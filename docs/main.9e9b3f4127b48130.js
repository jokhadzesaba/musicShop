"use strict";(self.webpackChunkmusicshop=self.webpackChunkmusicshop||[]).push([[792],{576:(sn,Ke,k)=>{k.d(Ke,{$:()=>ds,A:()=>ve,G:()=>ht,K:()=>Gi,L:()=>rr,N:()=>Bi,P:()=>Yc,R:()=>pt,U:()=>Bn,V:()=>Vs,W:()=>wi,X:()=>yr,Y:()=>Ls,Z:()=>Zo,_:()=>ar,a:()=>ta,a0:()=>W,a1:()=>pa,a2:()=>La,a3:()=>Ua,a4:()=>Aa,a5:()=>ma,a6:()=>Ki,a7:()=>Tc,a8:()=>Ao,a9:()=>C,aA:()=>ti,aB:()=>Ee,aC:()=>ie,aD:()=>Lu,aE:()=>Bt,aF:()=>qn,aG:()=>Vu,aH:()=>nf,aI:()=>Cd,aJ:()=>$t,aN:()=>Qn,aQ:()=>Yr,aa:()=>L,ab:()=>he,ac:()=>Se,ad:()=>Et,ae:()=>wt,af:()=>zn,ag:()=>Hn,ah:()=>oi,ak:()=>bo,al:()=>as,am:()=>cs,ap:()=>Jn,aq:()=>de,as:()=>pi,at:()=>El,au:()=>He,av:()=>Hi,aw:()=>ls,ax:()=>ue,ay:()=>nu,az:()=>eu,b:()=>_a,c:()=>ef,d:()=>tf,e:()=>Dl,f:()=>Td,g:()=>Rl,h:()=>Dd,i:()=>wl,j:()=>Rr,k:()=>Bu,l:()=>Ac,m:()=>$u,p:()=>Le,r:()=>ho,s:()=>dr,u:()=>ku});var _=k(467),T=k(7852),R=k(1076),y=k(8041),te=k(1635),be=k(1362);const Le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ve={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ht=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Me=function Ct(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ct=new R.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new y.Vy("@firebase/auth");function Pt(I,...h){We.logLevel<=y.$b.ERROR&&We.error(`Auth (${T.SDK_VERSION}): ${I}`,...h)}function ue(I,...h){throw Mt(I,...h)}function Ee(I,...h){return Mt(I,...h)}function oe(I,h,f){const A=Object.assign(Object.assign({},Me()),{[h]:f});return new R.FA("auth","Firebase",A).create(h,{appName:I.name})}function Ye(I){return oe(I,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Je(I,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&ue(I,"argument-error"),oe(I,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mt(I,...h){if("string"!=typeof I){const f=h[0],A=[...h.slice(1)];return A[0]&&(A[0].appName=I.name),I._errorFactory.create(f,...A)}return ct.create(I,...h)}function ie(I,h,...f){if(!I)throw Mt(h,...f)}function je(I){const h="INTERNAL ASSERTION FAILED: "+I;throw Pt(h),new Error(h)}function He(I,h){I||je(h)}function Jt(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function St(){return"http:"===un()||"https:"===un()}function un(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class tn{constructor(h,f){this.shortDelay=h,this.longDelay=f,He(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,R.jZ)()||(0,R.lV)()}get(){return function Lt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(St()||(0,R.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pe(I,h){He(I.emulator,"Emulator should always be set here");const{url:f}=I.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class Qe{static initialize(h,f,A){this.fetchImpl=h,f&&(this.headersImpl=f),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void je("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void je("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void je("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ft={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},yt=new tn(3e4,6e4);function It(I,h){return I.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:I.tenantId}):h}function tt(I,h,f,A){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,_.A)(function*(I,h,f,A,z={}){return gn(I,z,(0,_.A)(function*(){let ae={},Ve={};A&&("GET"===h?Ve=A:ae={body:JSON.stringify(A)});const bt=(0,R.Am)(Object.assign({key:I.config.apiKey},Ve)).slice(1),Gt=yield I._getAdditionalHeaders();return Gt["Content-Type"]="application/json",I.languageCode&&(Gt["X-Firebase-Locale"]=I.languageCode),Qe.fetch()(Dn(I,I.config.apiHost,f,bt),Object.assign({method:h,headers:Gt,referrerPolicy:"no-referrer"},ae))}))})).apply(this,arguments)}function gn(I,h,f){return rn.apply(this,arguments)}function rn(){return(rn=(0,_.A)(function*(I,h,f){I._canInitEmulator=!1;const A=Object.assign(Object.assign({},ft),h);try{const z=new ot(I),ae=yield Promise.race([f(),z.promise]);z.clearNetworkTimeout();const Ve=yield ae.json();if("needConfirmation"in Ve)throw In(I,"account-exists-with-different-credential",Ve);if(ae.ok&&!("errorMessage"in Ve))return Ve;{const bt=ae.ok?Ve.errorMessage:Ve.error.message,[Gt,Tn]=bt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Gt)throw In(I,"credential-already-in-use",Ve);if("EMAIL_EXISTS"===Gt)throw In(I,"email-already-in-use",Ve);if("USER_DISABLED"===Gt)throw In(I,"user-disabled",Ve);const $n=A[Gt]||Gt.toLowerCase().replace(/[_\s]+/g,"-");if(Tn)throw oe(I,$n,Tn);ue(I,$n)}}catch(z){if(z instanceof R.g)throw z;ue(I,"network-request-failed",{message:String(z)})}})).apply(this,arguments)}function on(I,h,f,A){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,_.A)(function*(I,h,f,A,z={}){const ae=yield tt(I,h,f,A,z);return"mfaPendingCredential"in ae&&ue(I,"multi-factor-auth-required",{_serverResponse:ae}),ae})).apply(this,arguments)}function Dn(I,h,f,A){const z=`${h}${f}?${A}`;return I.config.emulator?Pe(I.config,z):`${I.config.apiScheme}://${z}`}function Ln(I){switch(I){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ot{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,A)=>{this.timer=setTimeout(()=>A(Ee(this.auth,"network-request-failed")),yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function In(I,h,f){const A={appName:I.name};f.email&&(A.email=f.email),f.phoneNumber&&(A.phoneNumber=f.phoneNumber);const z=Ee(I,h,A);return z.customData._tokenResponse=f,z}function Kn(I){return void 0!==I&&void 0!==I.getResponse}function sr(I){return void 0!==I&&void 0!==I.enterprise}class Rt{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===h)return Ln(f.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function Zr(){return(Zr=(0,_.A)(function*(I){return(yield tt(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ft(I,h){return it.apply(this,arguments)}function it(){return(it=(0,_.A)(function*(I,h){return tt(I,"GET","/v2/recaptchaConfig",It(I,h))})).apply(this,arguments)}function Yn(){return(Yn=(0,_.A)(function*(I,h){return tt(I,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function An(){return(An=(0,_.A)(function*(I,h){return tt(I,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function bn(I,h){return kr.apply(this,arguments)}function kr(){return(kr=(0,_.A)(function*(I,h){return tt(I,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Wr(I){if(I)try{const h=new Date(Number(I));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Or(){return(Or=(0,_.A)(function*(I,h=!1){const f=(0,R.Ku)(I),A=yield f.getIdToken(h),z=Nn(A);ie(z&&z.exp&&z.auth_time&&z.iat,f.auth,"internal-error");const ae="object"==typeof z.firebase?z.firebase:void 0,Ve=ae?.sign_in_provider;return{claims:z,token:A,authTime:Wr(hs(z.auth_time)),issuedAtTime:Wr(hs(z.iat)),expirationTime:Wr(hs(z.exp)),signInProvider:Ve||null,signInSecondFactor:ae?.sign_in_second_factor||null}})).apply(this,arguments)}function hs(I){return 1e3*Number(I)}function Nn(I){const[h,f,A]=I.split(".");if(void 0===h||void 0===f||void 0===A)return Pt("JWT malformed, contained fewer than 3 sections"),null;try{const z=(0,R.u)(f);return z?JSON.parse(z):(Pt("Failed to decode base64 JWT payload"),null)}catch(z){return Pt("Caught error parsing JWT payload as JSON",z?.toString()),null}}function Li(I){const h=Nn(I);return ie(h,"internal-error"),ie(typeof h.exp<"u","internal-error"),ie(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}function zt(I,h){return Un.apply(this,arguments)}function Un(){return(Un=(0,_.A)(function*(I,h,f=!1){if(f)return h;try{return yield h}catch(A){throw A instanceof R.g&&function Nr({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}(A)&&I.auth.currentUser===I&&(yield I.auth.signOut()),A}})).apply(this,arguments)}class Zt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const z=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,z)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const A=this.getInterval(h);this.timerId=setTimeout((0,_.A)(function*(){yield f.iteration()}),A)}iteration(){var h=this;return(0,_.A)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class en{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wr(this.lastLoginAt),this.creationTime=Wr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kr(I){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,_.A)(function*(I){var h;const f=I.auth,A=yield I.getIdToken(),z=yield zt(I,bn(f,{idToken:A}));ie(z?.users.length,f,"internal-error");const ae=z.users[0];I._notifyReloadListener(ae);const Ve=null!==(h=ae.providerUserInfo)&&void 0!==h&&h.length?Ce(ae.providerUserInfo):[],bt=function we(I,h){return[...I.filter(A=>!h.some(z=>z.providerId===A.providerId)),...h]}(I.providerData,Ve),$n=!!I.isAnonymous&&!(I.email&&ae.passwordHash||bt?.length),Ar={uid:ae.localId,displayName:ae.displayName||null,photoURL:ae.photoUrl||null,email:ae.email||null,emailVerified:ae.emailVerified||!1,phoneNumber:ae.phoneNumber||null,tenantId:ae.tenantId||null,providerData:bt,metadata:new en(ae.createdAt,ae.lastLoginAt),isAnonymous:$n};Object.assign(I,Ar)})).apply(this,arguments)}function ke(){return(ke=(0,_.A)(function*(I){const h=(0,R.Ku)(I);yield Kr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ce(I){return I.map(h=>{var{providerId:f}=h,A=(0,te.Tt)(h,["providerId"]);return{providerId:f,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function Nt(){return(Nt=(0,_.A)(function*(I,h){const f=yield gn(I,{},(0,_.A)(function*(){const A=(0,R.Am)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:z,apiKey:ae}=I.config,Ve=Dn(I,z,"/v1/token",`key=${ae}`),bt=yield I._getAdditionalHeaders();return bt["Content-Type"]="application/x-www-form-urlencoded",Qe.fetch()(Ve,{method:"POST",headers:bt,body:A})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function q(){return(q=(0,_.A)(function*(I,h){return tt(I,"POST","/v2/accounts:revokeToken",It(I,h))})).apply(this,arguments)}class J{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ie(h.idToken,"internal-error"),ie(typeof h.idToken<"u","internal-error"),ie(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):Li(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}updateFromIdToken(h){ie(0!==h.length,"internal-error");const f=Li(h);this.updateTokensAndExpiration(h,null,f)}getToken(h,f=!1){var A=this;return(0,_.A)(function*(){return f||!A.accessToken||A.isExpired?(ie(A.refreshToken,h,"user-token-expired"),A.refreshToken?(yield A.refresh(h,A.refreshToken),A.accessToken):null):A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var A=this;return(0,_.A)(function*(){const{accessToken:z,refreshToken:ae,expiresIn:Ve}=yield function Xe(I,h){return Nt.apply(this,arguments)}(h,f);A.updateTokensAndExpiration(z,ae,Number(Ve))})()}updateTokensAndExpiration(h,f,A){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(h,f){const{refreshToken:A,accessToken:z,expirationTime:ae}=f,Ve=new J;return A&&(ie("string"==typeof A,"internal-error",{appName:h}),Ve.refreshToken=A),z&&(ie("string"==typeof z,"internal-error",{appName:h}),Ve.accessToken=z),ae&&(ie("number"==typeof ae,"internal-error",{appName:h}),Ve.expirationTime=ae),Ve}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new J,this.toJSON())}_performRefresh(){return je("not implemented")}}function se(I,h){ie("string"==typeof I||typeof I>"u","internal-error",{appName:h})}class me{constructor(h){var{uid:f,auth:A,stsTokenManager:z}=h,ae=(0,te.Tt)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=A,this.stsTokenManager=z,this.accessToken=z.accessToken,this.displayName=ae.displayName||null,this.email=ae.email||null,this.emailVerified=ae.emailVerified||!1,this.phoneNumber=ae.phoneNumber||null,this.photoURL=ae.photoURL||null,this.isAnonymous=ae.isAnonymous||!1,this.tenantId=ae.tenantId||null,this.providerData=ae.providerData?[...ae.providerData]:[],this.metadata=new en(ae.createdAt||void 0,ae.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,_.A)(function*(){const A=yield zt(f,f.stsTokenManager.getToken(f.auth,h));return ie(A,f.auth,"internal-error"),f.accessToken!==A&&(f.accessToken=A,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),A})()}getIdTokenResult(h){return function Vi(I){return Or.apply(this,arguments)}(this,h)}reload(){return function xr(I){return ke.apply(this,arguments)}(this)}_assign(h){this!==h&&(ie(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new me(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var A=this;return(0,_.A)(function*(){let z=!1;h.idToken&&h.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(h),z=!0),f&&(yield Kr(A)),yield A.auth._persistUserIfCurrent(A),z&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var h=this;return(0,_.A)(function*(){if((0,T._isFirebaseServerApp)(h.auth.app))return Promise.reject(Ye(h.auth));const f=yield h.getIdToken();return yield zt(h,function xt(I,h){return Yn.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var A,z,ae,Ve,bt,Gt,Tn,$n;const Ar=null!==(A=f.displayName)&&void 0!==A?A:void 0,so=null!==(z=f.email)&&void 0!==z?z:void 0,Ra=null!==(ae=f.phoneNumber)&&void 0!==ae?ae:void 0,Hu=null!==(Ve=f.photoURL)&&void 0!==Ve?Ve:void 0,Gu=null!==(bt=f.tenantId)&&void 0!==bt?bt:void 0,zu=null!==(Gt=f._redirectEventId)&&void 0!==Gt?Gt:void 0,jl=null!==(Tn=f.createdAt)&&void 0!==Tn?Tn:void 0,$l=null!==($n=f.lastLoginAt)&&void 0!==$n?$n:void 0,{uid:Ka,emailVerified:oa,isAnonymous:Wu,providerData:iu,stsTokenManager:Ku}=f;ie(Ka&&Ku,h,"internal-error");const dc=J.fromJSON(this.name,Ku);ie("string"==typeof Ka,h,"internal-error"),se(Ar,h.name),se(so,h.name),ie("boolean"==typeof oa,h,"internal-error"),ie("boolean"==typeof Wu,h,"internal-error"),se(Ra,h.name),se(Hu,h.name),se(Gu,h.name),se(zu,h.name),se(jl,h.name),se($l,h.name);const qa=new me({uid:Ka,auth:h,email:so,emailVerified:oa,displayName:Ar,isAnonymous:Wu,photoURL:Hu,phoneNumber:Ra,tenantId:Gu,stsTokenManager:dc,createdAt:jl,lastLoginAt:$l});return iu&&Array.isArray(iu)&&(qa.providerData=iu.map(Ss=>Object.assign({},Ss))),zu&&(qa._redirectEventId=zu),qa}static _fromIdTokenResponse(h,f,A=!1){return(0,_.A)(function*(){const z=new J;z.updateFromServerResponse(f);const ae=new me({uid:f.localId,auth:h,stsTokenManager:z,isAnonymous:A});return yield Kr(ae),ae})()}static _fromGetAccountInfoResponse(h,f,A){return(0,_.A)(function*(){const z=f.users[0];ie(void 0!==z.localId,"internal-error");const ae=void 0!==z.providerUserInfo?Ce(z.providerUserInfo):[],Ve=!(z.email&&z.passwordHash||ae?.length),bt=new J;bt.updateFromIdToken(A);const Gt=new me({uid:z.localId,auth:h,stsTokenManager:bt,isAnonymous:Ve}),Tn={uid:z.localId,displayName:z.displayName||null,photoURL:z.photoUrl||null,email:z.email||null,emailVerified:z.emailVerified||!1,phoneNumber:z.phoneNumber||null,tenantId:z.tenantId||null,providerData:ae,metadata:new en(z.createdAt,z.lastLoginAt),isAnonymous:!(z.email&&z.passwordHash||ae?.length)};return Object.assign(Gt,Tn),Gt})()}}const Dt=new Map;function Bt(I){He(I instanceof Function,"Expected a class definition");let h=Dt.get(I);return h?(He(h instanceof I,"Instance stored in cache mismatched with class"),h):(h=new I,Dt.set(I,h),h)}const Bn=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.A)(function*(){return!0})()}_set(f,A){var z=this;return(0,_.A)(function*(){z.storage[f]=A})()}_get(f){var A=this;return(0,_.A)(function*(){const z=A.storage[f];return void 0===z?null:z})()}_remove(f){var A=this;return(0,_.A)(function*(){delete A.storage[f]})()}_addListener(f,A){}_removeListener(f,A){}}return I.type="NONE",I})();function qn(I,h,f){return`firebase:${I}:${h}:${f}`}class Sn{constructor(h,f,A){this.persistence=h,this.auth=f,this.userKey=A;const{config:z,name:ae}=this.auth;this.fullUserKey=qn(this.userKey,z.apiKey,ae),this.fullPersistenceKey=qn("persistence",z.apiKey,ae),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,_.A)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?me._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,_.A)(function*(){if(f.persistence===h)return;const A=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,A?f.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,A="authUser"){return(0,_.A)(function*(){if(!f.length)return new Sn(Bt(Bn),h,A);const z=(yield Promise.all(f.map(function(){var Tn=(0,_.A)(function*($n){if(yield $n._isAvailable())return $n});return function($n){return Tn.apply(this,arguments)}}()))).filter(Tn=>Tn);let ae=z[0]||Bt(Bn);const Ve=qn(A,h.config.apiKey,h.name);let bt=null;for(const Tn of f)try{const $n=yield Tn._get(Ve);if($n){const Ar=me._fromJSON(h,$n);Tn!==ae&&(bt=Ar),ae=Tn;break}}catch{}const Gt=z.filter(Tn=>Tn._shouldAllowMigration);return ae._shouldAllowMigration&&Gt.length?(ae=Gt[0],bt&&(yield ae._set(Ve,bt.toJSON())),yield Promise.all(f.map(function(){var Tn=(0,_.A)(function*($n){if($n!==ae)try{yield $n._remove(Ve)}catch{}});return function($n){return Tn.apply(this,arguments)}}())),new Sn(ae,h,A)):new Sn(ae,h,A)})()}}function Wt(I){const h=I.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ms(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ne(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(or(h))return"Blackberry";if(ss(h))return"Webos";if($r(h))return"Safari";if((h.includes("chrome/")||Qr(h))&&!h.includes("edge/"))return"Chrome";if(ls(h))return"Android";{const A=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===A?.length)return A[1]}return"Other"}function Ne(I=(0,R.ZQ)()){return/firefox\//i.test(I)}function $r(I=(0,R.ZQ)()){const h=I.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Qr(I=(0,R.ZQ)()){return/crios\//i.test(I)}function Ms(I=(0,R.ZQ)()){return/iemobile/i.test(I)}function ls(I=(0,R.ZQ)()){return/android/i.test(I)}function or(I=(0,R.ZQ)()){return/blackberry/i.test(I)}function ss(I=(0,R.ZQ)()){return/webos/i.test(I)}function Hi(I=(0,R.ZQ)()){return/iphone|ipad|ipod/i.test(I)||/macintosh/i.test(I)&&/mobile/i.test(I)}function ti(I=(0,R.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}function Vt(I=(0,R.ZQ)()){return Hi(I)||ls(I)||ss(I)||or(I)||/windows phone/i.test(I)||Ms(I)}function cn(I,h=[]){let f;switch(I){case"Browser":f=Wt((0,R.ZQ)());break;case"Worker":f=`${Wt((0,R.ZQ)())}-${I}`;break;default:f=I}const A=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${T.SDK_VERSION}/${A}`}class ne{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const A=ae=>new Promise((Ve,bt)=>{try{Ve(h(ae))}catch(Gt){bt(Gt)}});A.onAbort=f,this.queue.push(A);const z=this.queue.length-1;return()=>{this.queue[z]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,_.A)(function*(){if(f.auth.currentUser===h)return;const A=[];try{for(const z of f.queue)yield z(h),z.onAbort&&A.push(z.onAbort)}catch(z){A.reverse();for(const ae of A)try{ae()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:z?.message})}})()}}function Ie(){return(Ie=(0,_.A)(function*(I,h={}){return tt(I,"GET","/v2/passwordPolicy",It(I,h))})).apply(this,arguments)}class Ze{constructor(h){var f,A,z,ae;const Ve=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=Ve.minPasswordLength)&&void 0!==f?f:6,Ve.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Ve.maxPasswordLength),void 0!==Ve.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Ve.containsLowercaseCharacter),void 0!==Ve.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Ve.containsUppercaseCharacter),void 0!==Ve.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Ve.containsNumericCharacter),void 0!==Ve.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Ve.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(z=null===(A=h.allowedNonAlphanumericCharacters)||void 0===A?void 0:A.join(""))&&void 0!==z?z:"",this.forceUpgradeOnSignin=null!==(ae=h.forceUpgradeOnSignin)&&void 0!==ae&&ae,this.schemaVersion=h.schemaVersion}validatePassword(h){var f,A,z,ae,Ve,bt;const Gt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,Gt),this.validatePasswordCharacterOptions(h,Gt),Gt.isValid&&(Gt.isValid=null===(f=Gt.meetsMinPasswordLength)||void 0===f||f),Gt.isValid&&(Gt.isValid=null===(A=Gt.meetsMaxPasswordLength)||void 0===A||A),Gt.isValid&&(Gt.isValid=null===(z=Gt.containsLowercaseLetter)||void 0===z||z),Gt.isValid&&(Gt.isValid=null===(ae=Gt.containsUppercaseLetter)||void 0===ae||ae),Gt.isValid&&(Gt.isValid=null===(Ve=Gt.containsNumericCharacter)||void 0===Ve||Ve),Gt.isValid&&(Gt.isValid=null===(bt=Gt.containsNonAlphanumericCharacter)||void 0===bt||bt),Gt}validatePasswordLengthOptions(h,f){const A=this.customStrengthOptions.minPasswordLength,z=this.customStrengthOptions.maxPasswordLength;A&&(f.meetsMinPasswordLength=h.length>=A),z&&(f.meetsMaxPasswordLength=h.length<=z)}validatePasswordCharacterOptions(h,f){let A;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let z=0;z<h.length;z++)A=h.charAt(z),this.updatePasswordCharacterOptionsStatuses(f,A>="a"&&A<="z",A>="A"&&A<="Z",A>="0"&&A<="9",this.allowedNonAlphanumericCharacters.includes(A))}updatePasswordCharacterOptionsStatuses(h,f,A,z,ae){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=A)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=z)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=ae))}}class Xt{constructor(h,f,A,z){this.app=h,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=A,this.config=z,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mn(this),this.idTokenSubscription=new Mn(this),this.beforeStateQueue=new ne(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=z.sdkClientVersion}_initializeWithPersistence(h,f){var A=this;return f&&(this._popupRedirectResolver=Bt(f)),this._initializationPromise=this.queue((0,_.A)(function*(){var z,ae;if(!A._deleted&&(A.persistenceManager=yield Sn.create(A,h),!A._deleted)){if(null!==(z=A._popupRedirectResolver)&&void 0!==z&&z._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch{}yield A.initializeCurrentUser(f),A.lastNotifiedUid=(null===(ae=A.currentUser)||void 0===ae?void 0:ae.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,_.A)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(h){var f=this;return(0,_.A)(function*(){try{const A=yield bn(f,{idToken:h}),z=yield me._fromGetAccountInfoResponse(f,A,h);yield f.directlySetCurrentUser(z)}catch(A){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",A),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(h){var f=this;return(0,_.A)(function*(){var A;if((0,T._isFirebaseServerApp)(f.app)){const bt=f.app.settings.authIdToken;return bt?new Promise(Gt=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(bt).then(Gt,Gt))}):f.directlySetCurrentUser(null)}const z=yield f.assertedPersistence.getCurrentUser();let ae=z,Ve=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const bt=null===(A=f.redirectUser)||void 0===A?void 0:A._redirectEventId,Gt=ae?._redirectEventId,Tn=yield f.tryRedirectSignIn(h);(!bt||bt===Gt)&&Tn?.user&&(ae=Tn.user,Ve=!0)}if(!ae)return f.directlySetCurrentUser(null);if(!ae._redirectEventId){if(Ve)try{yield f.beforeStateQueue.runMiddleware(ae)}catch(bt){ae=z,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(bt))}return ae?f.reloadAndSetCurrentUserOrClear(ae):f.directlySetCurrentUser(null)}return ie(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===ae._redirectEventId?f.directlySetCurrentUser(ae):f.reloadAndSetCurrentUserOrClear(ae)})()}tryRedirectSignIn(h){var f=this;return(0,_.A)(function*(){let A=null;try{A=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch{yield f._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,_.A)(function*(){try{yield Kr(h)}catch(A){if("auth/network-request-failed"!==A?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function at(){if(typeof navigator>"u")return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var h=this;return(0,_.A)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,_.A)(function*(){if((0,T._isFirebaseServerApp)(f.app))return Promise.reject(Ye(f));const A=h?(0,R.Ku)(h):null;return A&&ie(A.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(A&&A._clone(f))})()}_updateCurrentUser(h,f=!1){var A=this;return(0,_.A)(function*(){if(!A._deleted)return h&&ie(A.tenantId===h.tenantId,A,"tenant-id-mismatch"),f||(yield A.beforeStateQueue.runMiddleware(h)),A.queue((0,_.A)(function*(){yield A.directlySetCurrentUser(h),A.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,_.A)(function*(){return(0,T._isFirebaseServerApp)(h.app)?Promise.reject(Ye(h)):(yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0))})()}setPersistence(h){var f=this;return(0,T._isFirebaseServerApp)(this.app)?Promise.reject(Ye(this)):this.queue((0,_.A)(function*(){yield f.assertedPersistence.setPersistence(Bt(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var f=this;return(0,_.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const A=f._getPasswordPolicyInternal();return A.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):A.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,_.A)(function*(){const f=yield function ye(I){return Ie.apply(this,arguments)}(h),A=new Ze(f);null===h.tenantId?h._projectPasswordPolicy=A:h._tenantPasswordPolicies[h.tenantId]=A})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new R.FA("auth","Firebase",h())}onAuthStateChanged(h,f,A){return this.registerStateListener(this.authStateSubscription,h,f,A)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,A){return this.registerStateListener(this.idTokenSubscription,h,f,A)}authStateReady(){return new Promise((h,f)=>{if(this.currentUser)h();else{const A=this.onAuthStateChanged(()=>{A(),h()},f)}})}revokeAccessToken(h){var f=this;return(0,_.A)(function*(){if(f.currentUser){const A=yield f.currentUser.getIdToken(),z={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:h,idToken:A};null!=f.tenantId&&(z.tenantId=f.tenantId),yield function ge(I,h){return q.apply(this,arguments)}(f,z)}})()}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var A=this;return(0,_.A)(function*(){const z=yield A.getOrInitRedirectPersistenceManager(f);return null===h?z.removeCurrentUser():z.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,_.A)(function*(){if(!f.redirectPersistenceManager){const A=h&&Bt(h)||f._popupRedirectResolver;ie(A,f,"argument-error"),f.redirectPersistenceManager=yield Sn.create(f,[Bt(A._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,_.A)(function*(){var A,z;return f._isInitialized&&(yield f.queue((0,_.A)(function*(){}))),(null===(A=f._currentUser)||void 0===A?void 0:A._redirectEventId)===h?f._currentUser:(null===(z=f.redirectUser)||void 0===z?void 0:z._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,_.A)(function*(){if(h===f.currentUser)return f.queue((0,_.A)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,A,z){if(this._deleted)return()=>{};const ae="function"==typeof f?f:f.next.bind(f);let Ve=!1;const bt=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(bt,this,"internal-error"),bt.then(()=>{Ve||ae(this.currentUser)}),"function"==typeof f){const Gt=h.addObserver(f,A,z);return()=>{Ve=!0,Gt()}}{const Gt=h.addObserver(f);return()=>{Ve=!0,Gt()}}}directlySetCurrentUser(h){var f=this;return(0,_.A)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=cn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,_.A)(function*(){var f;const A={"X-Client-Version":h.clientVersion};h.app.options.appId&&(A["X-Firebase-gmpid"]=h.app.options.appId);const z=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();z&&(A["X-Firebase-Client"]=z);const ae=yield h._getAppCheckToken();return ae&&(A["X-Firebase-AppCheck"]=ae),A})()}_getAppCheckToken(){var h=this;return(0,_.A)(function*(){var f;const A=yield null===(f=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return A?.error&&function $e(I,...h){We.logLevel<=y.$b.WARN&&We.warn(`Auth (${T.SDK_VERSION}): ${I}`,...h)}(`Error while retrieving App Check token: ${A.error}`),A?.token})()}}function $t(I){return(0,R.Ku)(I)}class Mn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,R.tD)(f=>this.observer=f)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let wn={loadJS:()=>(0,_.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ii(I){return wn.loadJS(I)}function Si(I){return`__${I}${Math.floor(1e6*Math.random())}`}class li{constructor(h){this.type="recaptcha-enterprise",this.auth=$t(h)}verify(h="verify",f=!1){var A=this;return(0,_.A)(function*(){function ae(){return ae=(0,_.A)(function*(bt){if(!f){if(null==bt.tenantId&&null!=bt._agentRecaptchaConfig)return bt._agentRecaptchaConfig.siteKey;if(null!=bt.tenantId&&void 0!==bt._tenantRecaptchaConfigs[bt.tenantId])return bt._tenantRecaptchaConfigs[bt.tenantId].siteKey}return new Promise(function(){var Gt=(0,_.A)(function*(Tn,$n){Ft(bt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ar=>{if(void 0!==Ar.recaptchaKey){const so=new Rt(Ar);return null==bt.tenantId?bt._agentRecaptchaConfig=so:bt._tenantRecaptchaConfigs[bt.tenantId]=so,Tn(so.siteKey)}$n(new Error("recaptcha Enterprise site key undefined"))}).catch(Ar=>{$n(Ar)})});return function(Tn,$n){return Gt.apply(this,arguments)}}())}),ae.apply(this,arguments)}function Ve(bt,Gt,Tn){const $n=window.grecaptcha;sr($n)?$n.enterprise.ready(()=>{$n.enterprise.execute(bt,{action:h}).then(Ar=>{Gt(Ar)}).catch(()=>{Gt("NO_RECAPTCHA")})}):Tn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((bt,Gt)=>{(function z(bt){return ae.apply(this,arguments)})(A.auth).then(Tn=>{if(!f&&sr(window.grecaptcha))Ve(Tn,bt,Gt);else{if(typeof window>"u")return void Gt(new Error("RecaptchaVerifier is only supported in browser"));let $n=function ui(){return wn.recaptchaEnterpriseScript}();0!==$n.length&&($n+=Tn),ii($n).then(()=>{Ve(Tn,bt,Gt)}).catch(Ar=>{Gt(Ar)})}}).catch(Tn=>{Gt(Tn)})})})()}}function nr(I,h,f){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,_.A)(function*(I,h,f,A=!1){const z=new li(I);let ae;try{ae=yield z.verify(f)}catch{ae=yield z.verify(f,!0)}const Ve=Object.assign({},h);return Object.assign(Ve,A?{captchaResp:ae}:{captchaResponse:ae}),Object.assign(Ve,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Ve,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Ve})).apply(this,arguments)}function di(I,h,f,A){return vi.apply(this,arguments)}function vi(){return vi=(0,_.A)(function*(I,h,f,A){var z;if(null!==(z=I._getRecaptchaConfig())&&void 0!==z&&z.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const ae=yield nr(I,h,f,"getOobCode"===f);return A(I,ae)}return A(I,h).catch(function(){var ae=(0,_.A)(function*(Ve){if("auth/missing-recaptcha-token"===Ve.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const bt=yield nr(I,h,f,"getOobCode"===f);return A(I,bt)}return Promise.reject(Ve)});return function(Ve){return ae.apply(this,arguments)}}())}),vi.apply(this,arguments)}function Gi(I,h,f){const A=$t(I);ie(A._canInitEmulator,A,"emulator-config-failed"),ie(/^https?:\/\//.test(h),A,"invalid-emulator-scheme");const z=!!f?.disableWarnings,ae=Ks(h),{host:Ve,port:bt}=function Yo(I){const h=Ks(I),f=/(\/\/)?([^?#/]+)/.exec(I.substr(h.length));if(!f)return{host:"",port:null};const A=f[2].split("@").pop()||"",z=/^(\[[^\]]+\])(:|$)/.exec(A);if(z){const ae=z[1];return{host:ae,port:la(A.substr(ae.length+1))}}{const[ae,Ve]=A.split(":");return{host:ae,port:la(Ve)}}}(h);A.config.emulator={url:`${ae}//${Ve}${null===bt?"":`:${bt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:Ve,port:bt,protocol:ae.replace(":",""),options:Object.freeze({disableWarnings:z})}),z||function yo(){function I(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}function Ks(I){const h=I.indexOf(":");return h<0?"":I.substr(0,h+1)}function la(I){if(!I)return null;const h=Number(I);return isNaN(h)?null:h}class rr{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return je("not implemented")}_getIdTokenResponse(h){return je("not implemented")}_linkToIdToken(h,f){return je("not implemented")}_getReauthenticationResolver(h){return je("not implemented")}}function vo(I,h){return qs.apply(this,arguments)}function qs(){return(qs=(0,_.A)(function*(I,h){return tt(I,"POST","/v1/accounts:resetPassword",It(I,h))})).apply(this,arguments)}function Lo(){return(Lo=(0,_.A)(function*(I,h){return tt(I,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Qs(I,h){return da.apply(this,arguments)}function da(){return(da=(0,_.A)(function*(I,h){return tt(I,"POST","/v1/accounts:signUp",h)})).apply(this,arguments)}function Pr(){return(Pr=(0,_.A)(function*(I,h){return tt(I,"POST","/v1/accounts:update",It(I,h))})).apply(this,arguments)}function Ui(I,h){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,_.A)(function*(I,h){return on(I,"POST","/v1/accounts:signInWithPassword",It(I,h))})).apply(this,arguments)}function Cr(I,h){return fs.apply(this,arguments)}function fs(){return(fs=(0,_.A)(function*(I,h){return tt(I,"POST","/v1/accounts:sendOobCode",It(I,h))})).apply(this,arguments)}function Xr(){return(Xr=(0,_.A)(function*(I,h){return Cr(I,h)})).apply(this,arguments)}function Uo(I,h){return hi.apply(this,arguments)}function hi(){return(hi=(0,_.A)(function*(I,h){return Cr(I,h)})).apply(this,arguments)}function Hr(I,h){return ei.apply(this,arguments)}function ei(){return(ei=(0,_.A)(function*(I,h){return Cr(I,h)})).apply(this,arguments)}function dn(){return(dn=(0,_.A)(function*(I,h){return Cr(I,h)})).apply(this,arguments)}function ps(){return(ps=(0,_.A)(function*(I,h){return on(I,"POST","/v1/accounts:signInWithEmailLink",It(I,h))})).apply(this,arguments)}function gs(){return(gs=(0,_.A)(function*(I,h){return on(I,"POST","/v1/accounts:signInWithEmailLink",It(I,h))})).apply(this,arguments)}class Ys extends rr{constructor(h,f,A,z=null){super("password",A),this._email=h,this._password=f,this._tenantId=z}static _fromEmailAndPassword(h,f){return new Ys(h,f,"password")}static _fromEmailAndCode(h,f,A=null){return new Ys(h,f,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,_.A)(function*(){switch(f.signInMethod){case"password":return di(h,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ui);case"emailLink":return function si(I,h){return ps.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:ue(h,"internal-error")}})()}_linkToIdToken(h,f){var A=this;return(0,_.A)(function*(){switch(A.signInMethod){case"password":return di(h,{idToken:f,returnSecureToken:!0,email:A._email,password:A._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qs);case"emailLink":return function xs(I,h){return gs.apply(this,arguments)}(h,{idToken:f,email:A._email,oobCode:A._password});default:ue(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Pi(I,h){return es.apply(this,arguments)}function es(){return(es=(0,_.A)(function*(I,h){return on(I,"POST","/v1/accounts:signInWithIdp",It(I,h))})).apply(this,arguments)}class Bi extends rr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new Bi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):ue("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:A,signInMethod:z}=f,ae=(0,te.Tt)(f,["providerId","signInMethod"]);if(!A||!z)return null;const Ve=new Bi(A,z);return Ve.idToken=ae.idToken||void 0,Ve.accessToken=ae.accessToken||void 0,Ve.secret=ae.secret,Ve.nonce=ae.nonce,Ve.pendingToken=ae.pendingToken||null,Ve}_getIdTokenResponse(h){return Pi(h,this.buildRequest())}_linkToIdToken(h,f){const A=this.buildRequest();return A.idToken=f,Pi(h,A)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Pi(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,R.Am)(f)}return h}}function ks(){return(ks=(0,_.A)(function*(I,h){return tt(I,"POST","/v1/accounts:sendVerificationCode",It(I,h))})).apply(this,arguments)}function Bo(){return(Bo=(0,_.A)(function*(I,h){return on(I,"POST","/v1/accounts:signInWithPhoneNumber",It(I,h))})).apply(this,arguments)}function Mi(){return(Mi=(0,_.A)(function*(I,h){const f=yield on(I,"POST","/v1/accounts:signInWithPhoneNumber",It(I,h));if(f.temporaryProof)throw In(I,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Eo={USER_NOT_FOUND:"user-not-found"};function $i(){return($i=(0,_.A)(function*(I,h){return on(I,"POST","/v1/accounts:signInWithPhoneNumber",It(I,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Eo)})).apply(this,arguments)}class ms extends rr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new ms({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new ms({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function ji(I,h){return Bo.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function ns(I,h){return Mi.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ao(I,h){return $i.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:A,verificationCode:z}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:A,code:z}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:A,phoneNumber:z,temporaryProof:ae}=h;return A||f||z||ae?new ms({verificationId:f,verificationCode:A,phoneNumber:z,temporaryProof:ae}):null}}class Js{constructor(h){var f,A,z,ae,Ve,bt;const Gt=(0,R.I9)((0,R.hp)(h)),Tn=null!==(f=Gt.apiKey)&&void 0!==f?f:null,$n=null!==(A=Gt.oobCode)&&void 0!==A?A:null,Ar=function Fs(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(z=Gt.mode)&&void 0!==z?z:null);ie(Tn&&$n&&Ar,"argument-error"),this.apiKey=Tn,this.operation=Ar,this.code=$n,this.continueUrl=null!==(ae=Gt.continueUrl)&&void 0!==ae?ae:null,this.languageCode=null!==(Ve=Gt.languageCode)&&void 0!==Ve?Ve:null,this.tenantId=null!==(bt=Gt.tenantId)&&void 0!==bt?bt:null}static parseLink(h){const f=function Jo(I){const h=(0,R.I9)((0,R.hp)(I)).link,f=h?(0,R.I9)((0,R.hp)(h)).deep_link_id:null,A=(0,R.I9)((0,R.hp)(I)).deep_link_id;return(A?(0,R.I9)((0,R.hp)(A)).link:null)||A||f||h||I}(h);try{return new Js(f)}catch{return null}}}let Vs=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(f,A){return Ys._fromEmailAndPassword(f,A)}static credentialWithLink(f,A){const z=Js.parseLink(A);return ie(z,"argument-error"),Ys._fromEmailAndCode(f,z.code,z.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class Ci{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Io extends Ci{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Zo extends Io{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return ie("providerId"in f&&"signInMethod"in f,"argument-error"),Bi._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ie(h.idToken||h.accessToken,"argument-error"),Bi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Zo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Zo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:A,oauthTokenSecret:z,pendingToken:ae,nonce:Ve,providerId:bt}=h;if(!A&&!z&&!f&&!ae||!bt)return null;try{return new Zo(bt)._credential({idToken:f,accessToken:A,nonce:Ve,pendingToken:ae})}catch{return null}}}let wi=(()=>{class I extends Io{constructor(){super("facebook.com")}static credential(f){return Bi._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return I.credential(f.oauthAccessToken)}catch{return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),yr=(()=>{class I extends Io{constructor(){super("google.com"),this.addScope("profile")}static credential(f,A){return Bi._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:A})}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:A,oauthAccessToken:z}=f;if(!A&&!z)return null;try{return I.credential(A,z)}catch{return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),Ls=(()=>{class I extends Io{constructor(){super("github.com")}static credential(f){return Bi._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return I.credential(f.oauthAccessToken)}catch{return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class Yr extends rr{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Pi(h,this.buildRequest())}_linkToIdToken(h,f){const A=this.buildRequest();return A.idToken=f,Pi(h,A)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Pi(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:A,signInMethod:z,pendingToken:ae}=f;return A&&z&&ae&&A===z?new Yr(A,ae):null}static _create(h,f){return new Yr(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ar extends Ci{constructor(h){ie(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ar.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ar.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=Yr.fromJSON(h);return ie(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:A}=h;if(!f||!A)return null;try{return Yr._create(A,f)}catch{return null}}}let ds=(()=>{class I extends Io{constructor(){super("twitter.com")}static credential(f,A){return Bi._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:A})}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:A,oauthTokenSecret:z}=f;if(!A||!z)return null;try{return I.credential(A,z)}catch{return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function _s(I,h){return Co.apply(this,arguments)}function Co(){return(Co=(0,_.A)(function*(I,h){return on(I,"POST","/v1/accounts:signUp",It(I,h))})).apply(this,arguments)}class xi{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,A,z=!1){return(0,_.A)(function*(){const ae=yield me._fromIdTokenResponse(h,A,z),Ve=H(A);return new xi({user:ae,providerId:Ve,_tokenResponse:A,operationType:f})})()}static _forOperation(h,f,A){return(0,_.A)(function*(){yield h._updateTokensIfNecessary(A,!0);const z=H(A);return new xi({user:h,providerId:z,_tokenResponse:A,operationType:f})})()}}function H(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function W(I){return x.apply(this,arguments)}function x(){return(x=(0,_.A)(function*(I){var h;if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(Ye(I));const f=$t(I);if(yield f._initializationPromise,null!==(h=f.currentUser)&&void 0!==h&&h.isAnonymous)return new xi({user:f.currentUser,providerId:null,operationType:"signIn"});const A=yield _s(f,{returnSecureToken:!0}),z=yield xi._fromIdTokenResponse(f,"signIn",A,!0);return yield f._updateCurrentUser(z.user),z})).apply(this,arguments)}class Z extends R.g{constructor(h,f,A,z){var ae;super(f.code,f.message),this.operationType=A,this.user=z,Object.setPrototypeOf(this,Z.prototype),this.customData={appName:h.name,tenantId:null!==(ae=h.tenantId)&&void 0!==ae?ae:void 0,_serverResponse:f.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(h,f,A,z){return new Z(h,f,A,z)}}function De(I,h,f,A){return("reauthenticate"===h?f._getReauthenticationResolver(I):f._getIdTokenResponse(I)).catch(ae=>{throw"auth/multi-factor-auth-required"===ae.code?Z._fromErrorAndOperation(I,ae,h,A):ae})}function pn(I){return new Set(I.map(({providerId:h})=>h).filter(h=>!!h))}function Jn(I,h){return ys.apply(this,arguments)}function ys(){return ys=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I);yield Ts(!0,f,h);const{providerUserInfo:A}=yield function tr(I,h){return An.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),z=pn(A||[]);return f.providerData=f.providerData.filter(ae=>z.has(ae.providerId)),z.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),ys.apply(this,arguments)}function Zs(I,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,_.A)(function*(I,h,f=!1){const A=yield zt(I,h._linkToIdToken(I.auth,yield I.getIdToken()),f);return xi._forOperation(I,"link",A)})).apply(this,arguments)}function Ts(I,h,f){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,_.A)(function*(I,h,f){yield Kr(h);const z=!1===I?"provider-already-linked":"no-such-provider";ie(pn(h.providerData).has(f)===I,h.auth,z)})).apply(this,arguments)}function jo(I,h){return fa.apply(this,arguments)}function fa(){return(fa=(0,_.A)(function*(I,h,f=!1){const{auth:A}=I;if((0,T._isFirebaseServerApp)(A.app))return Promise.reject(Ye(A));const z="reauthenticate";try{const ae=yield zt(I,De(A,z,h,I),f);ie(ae.idToken,A,"internal-error");const Ve=Nn(ae.idToken);ie(Ve,A,"internal-error");const{sub:bt}=Ve;return ie(I.uid===bt,A,"user-mismatch"),xi._forOperation(I,z,ae)}catch(ae){throw"auth/user-not-found"===ae?.code&&ue(A,"user-mismatch"),ae}})).apply(this,arguments)}function Jr(I,h){return Da.apply(this,arguments)}function Da(){return(Da=(0,_.A)(function*(I,h,f=!1){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(Ye(I));const A="signIn",z=yield De(I,A,h),ae=yield xi._fromIdTokenResponse(I,A,z);return f||(yield I._updateCurrentUser(ae.user)),ae})).apply(this,arguments)}function pa(I,h){return Va.apply(this,arguments)}function Va(){return(Va=(0,_.A)(function*(I,h){return Jr($t(I),h)})).apply(this,arguments)}function La(I,h){return eo.apply(this,arguments)}function eo(){return(eo=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I);return yield Ts(!1,f,h.providerId),Zs(f,h)})).apply(this,arguments)}function Ua(I,h){return ga.apply(this,arguments)}function ga(){return(ga=(0,_.A)(function*(I,h){return jo((0,R.Ku)(I),h)})).apply(this,arguments)}function wo(){return(wo=(0,_.A)(function*(I,h){return on(I,"POST","/v1/accounts:signInWithCustomToken",It(I,h))})).apply(this,arguments)}function Aa(I,h){return ea.apply(this,arguments)}function ea(){return ea=(0,_.A)(function*(I,h){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(Ye(I));const f=$t(I),A=yield function $o(I,h){return wo.apply(this,arguments)}(f,{token:h,returnSecureToken:!0}),z=yield xi._fromIdTokenResponse(f,"signIn",A);return yield f._updateCurrentUser(z.user),z}),ea.apply(this,arguments)}class To{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?lr._fromServerResponse(h,f):"totpInfo"in f?Gr._fromServerResponse(h,f):ue(h,"internal-error")}}class lr extends To{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new lr(f)}}class Gr extends To{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new Gr(f)}}function ni(I,h,f){var A;ie((null===(A=f.url)||void 0===A?void 0:A.length)>0,I,"invalid-continue-uri"),ie(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ie(f.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(ie(f.android.packageName.length>0,I,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function Ri(I){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,_.A)(function*(I){const h=$t(I);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function ma(I,h,f){return vs.apply(this,arguments)}function vs(){return(vs=(0,_.A)(function*(I,h,f){const A=$t(I),z={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};f&&ni(A,z,f),yield di(A,z,"getOobCode",Uo)})).apply(this,arguments)}function Ki(I,h,f){return ec.apply(this,arguments)}function ec(){return ec=(0,_.A)(function*(I,h,f){yield vo((0,R.Ku)(I),{oobCode:h,newPassword:f}).catch(function(){var A=(0,_.A)(function*(z){throw"auth/password-does-not-meet-requirements"===z.code&&Ri(I),z});return function(z){return A.apply(this,arguments)}}())}),ec.apply(this,arguments)}function Tc(I,h){return Do.apply(this,arguments)}function Do(){return Do=(0,_.A)(function*(I,h){yield function Rs(I,h){return Pr.apply(this,arguments)}((0,R.Ku)(I),{oobCode:h})}),Do.apply(this,arguments)}function Ao(I,h){return Y.apply(this,arguments)}function Y(){return(Y=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I),A=yield vo(f,{oobCode:h}),z=A.requestType;switch(ie(z,f,"internal-error"),z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(A.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(A.mfaInfo,f,"internal-error");default:ie(A.email,f,"internal-error")}let ae=null;return A.mfaInfo&&(ae=To._fromServerResponse($t(f),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:ae},operation:z}})).apply(this,arguments)}function C(I,h){return D.apply(this,arguments)}function D(){return(D=(0,_.A)(function*(I,h){const{data:f}=yield Ao((0,R.Ku)(I),h);return f.email})).apply(this,arguments)}function L(I,h,f){return K.apply(this,arguments)}function K(){return(K=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(Ye(I));const A=$t(I),Ve=yield di(A,{returnSecureToken:!0,email:h,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_s).catch(Gt=>{throw"auth/password-does-not-meet-requirements"===Gt.code&&Ri(I),Gt}),bt=yield xi._fromIdTokenResponse(A,"signIn",Ve);return yield A._updateCurrentUser(bt.user),bt})).apply(this,arguments)}function he(I,h,f){return(0,T._isFirebaseServerApp)(I.app)?Promise.reject(Ye(I)):pa((0,R.Ku)(I),Vs.credential(h,f)).catch(function(){var A=(0,_.A)(function*(z){throw"auth/password-does-not-meet-requirements"===z.code&&Ri(I),z});return function(z){return A.apply(this,arguments)}}())}function Se(I,h,f){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,_.A)(function*(I,h,f){const A=$t(I),z={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function ae(Ve,bt){ie(bt.handleCodeInApp,A,"argument-error"),bt&&ni(A,Ve,bt)})(z,f),yield di(A,z,"getOobCode",Hr)})).apply(this,arguments)}function Et(I,h){const f=Js.parseLink(h);return"EMAIL_SIGNIN"===f?.operation}function wt(I,h,f){return mn.apply(this,arguments)}function mn(){return(mn=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(Ye(I));const A=(0,R.Ku)(I),z=Vs.credentialWithLink(h,f||Jt());return ie(z._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),pa(A,z)})).apply(this,arguments)}function hr(){return(hr=(0,_.A)(function*(I,h){return tt(I,"POST","/v1/accounts:createAuthUri",It(I,h))})).apply(this,arguments)}function zn(I,h){return Fn.apply(this,arguments)}function Fn(){return Fn=(0,_.A)(function*(I,h){const A={identifier:h,continueUri:St()?Jt():"http://localhost"},{signinMethods:z}=yield function hn(I,h){return hr.apply(this,arguments)}((0,R.Ku)(I),A);return z||[]}),Fn.apply(this,arguments)}function Hn(I,h){return Tr.apply(this,arguments)}function Tr(){return Tr=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I),z={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};h&&ni(f.auth,z,h);const{email:ae}=yield function Xs(I,h){return Xr.apply(this,arguments)}(f.auth,z);ae!==I.email&&(yield I.reload())}),Tr.apply(this,arguments)}function oi(I,h,f){return Pn.apply(this,arguments)}function Pn(){return Pn=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I),ae={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:h};f&&ni(A.auth,ae,f);const{email:Ve}=yield function os(I,h){return dn.apply(this,arguments)}(A.auth,ae);Ve!==I.email&&(yield I.reload())}),Pn.apply(this,arguments)}function ki(){return(ki=(0,_.A)(function*(I,h){return tt(I,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function bo(I,h){return rs.apply(this,arguments)}function rs(){return rs=(0,_.A)(function*(I,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const A=(0,R.Ku)(I),ae={idToken:yield A.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},Ve=yield zt(A,function Es(I,h){return ki.apply(this,arguments)}(A.auth,ae));A.displayName=Ve.displayName||null,A.photoURL=Ve.photoUrl||null;const bt=A.providerData.find(({providerId:Gt})=>"password"===Gt);bt&&(bt.displayName=A.displayName,bt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(Ve)}),rs.apply(this,arguments)}function as(I,h){const f=(0,R.Ku)(I);return(0,T._isFirebaseServerApp)(f.auth.app)?Promise.reject(Ye(f.auth)):Ho(f,h,null)}function cs(I,h){return Ho((0,R.Ku)(I),null,h)}function Ho(I,h,f){return uo.apply(this,arguments)}function uo(){return uo=(0,_.A)(function*(I,h,f){const{auth:A}=I,ae={idToken:yield I.getIdToken(),returnSecureToken:!0};h&&(ae.email=h),f&&(ae.password=f);const Ve=yield zt(I,function wr(I,h){return Lo.apply(this,arguments)}(A,ae));yield I._updateTokensIfNecessary(Ve,!0)}),uo.apply(this,arguments)}class qi{constructor(h,f,A={}){this.isNewUser=h,this.providerId=f,this.profile=A}}class Os extends qi{constructor(h,f,A,z){super(h,f,A),this.username=z}}class P extends qi{constructor(h,f){super(h,"facebook.com",f)}}class X extends Os{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class N extends qi{constructor(h,f){super(h,"google.com",f)}}class B extends Os{constructor(h,f,A){super(h,"twitter.com",f,A)}}function de(I){const{user:h,_tokenResponse:f}=I;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function to(I){var h,f;if(!I)return null;const{providerId:A}=I,z=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},ae=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!A&&I?.idToken){const Ve=null===(f=null===(h=Nn(I.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(Ve)return new qi(ae,"anonymous"!==Ve&&"custom"!==Ve?Ve:null)}if(!A)return null;switch(A){case"facebook.com":return new P(ae,z);case"github.com":return new X(ae,z);case"google.com":return new N(ae,z);case"twitter.com":return new B(ae,z,I.screenName||null);case"custom":case"anonymous":return new qi(ae,null);default:return new qi(ae,A,z)}}(f)}class _r{constructor(h,f,A){this.type=h,this.credential=f,this.user=A}static _fromIdtoken(h,f){return new _r("enroll",h,f)}static _fromMfaPendingCredential(h){return new _r("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,A;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return _r._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(A=h.multiFactorSession)&&void 0!==A&&A.idToken)return _r._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Ti{constructor(h,f,A){this.session=h,this.hints=f,this.signInResolver=A}static _fromError(h,f){const A=$t(h),z=f.customData._serverResponse,ae=(z.mfaInfo||[]).map(bt=>To._fromServerResponse(A,bt));ie(z.mfaPendingCredential,A,"internal-error");const Ve=_r._fromMfaPendingCredential(z.mfaPendingCredential);return new Ti(Ve,ae,function(){var bt=(0,_.A)(function*(Gt){const Tn=yield Gt._process(A,Ve);delete z.mfaInfo,delete z.mfaPendingCredential;const $n=Object.assign(Object.assign({},z),{idToken:Tn.idToken,refreshToken:Tn.refreshToken});switch(f.operationType){case"signIn":const Ar=yield xi._fromIdTokenResponse(A,f.operationType,$n);return yield A._updateCurrentUser(Ar.user),Ar;case"reauthenticate":return ie(f.user,A,"internal-error"),xi._forOperation(f.user,f.operationType,$n);default:ue(A,"internal-error")}});return function(Gt){return bt.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,_.A)(function*(){return f.signInResolver(h)})()}}function pi(I,h){var f;const A=(0,R.Ku)(I),z=h;return ie(h.customData.operationType,A,"argument-error"),ie(null===(f=z.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,A,"argument-error"),Ti._fromError(A,z)}class Zn{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(A=>To._fromServerResponse(h.auth,A)))})}static _fromUser(h){return new Zn(h)}getSession(){var h=this;return(0,_.A)(function*(){return _r._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,f){var A=this;return(0,_.A)(function*(){const z=h,ae=yield A.getSession(),Ve=yield zt(A.user,z._process(A.user.auth,ae,f));return yield A.user._updateTokensIfNecessary(Ve),A.user.reload()})()}unenroll(h){var f=this;return(0,_.A)(function*(){const A="string"==typeof h?h:h.uid,z=yield f.user.getIdToken();try{const ae=yield zt(f.user,function lo(I,h){return tt(I,"POST","/v2/accounts/mfaEnrollment:withdraw",It(I,h))}(f.user.auth,{idToken:z,mfaEnrollmentId:A}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Ve})=>Ve!==A),yield f.user._updateTokensIfNecessary(ae),yield f.user.reload()}catch(ae){throw ae}})()}}const Go=new WeakMap;function El(I){const h=(0,R.Ku)(I);return Go.has(h)||Go.set(h,Zn._fromUser(h)),Go.get(h)}const ai="__sak";class jn{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ai,"1"),this.storage.removeItem(ai),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const _a=(()=>{class I extends jn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,A)=>this.onStorageEvent(f,A),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vt(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const A of Object.keys(this.listeners)){const z=this.storage.getItem(A),ae=this.localCache[A];z!==ae&&f(A,ae,z)}}onStorageEvent(f,A=!1){if(!f.key)return void this.forAllChangedKeys((bt,Gt,Tn)=>{this.notifyListeners(bt,Tn)});const z=f.key;A?this.detachListener():this.stopPolling();const ae=()=>{const bt=this.storage.getItem(z);!A&&this.localCache[z]===bt||this.notifyListeners(z,bt)},Ve=this.storage.getItem(z);!function et(){return(0,R.lT)()&&10===document.documentMode}()||Ve===f.newValue||f.newValue===f.oldValue?ae():setTimeout(ae,10)}notifyListeners(f,A){this.localCache[f]=A;const z=this.listeners[f];if(z)for(const ae of Array.from(z))ae(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,A,z)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:A,newValue:z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(A)}_removeListener(f,A){this.listeners[f]&&(this.listeners[f].delete(A),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,A){var z=()=>super._set,ae=this;return(0,_.A)(function*(){yield z().call(ae,f,A),ae.localCache[f]=JSON.stringify(A)})()}_get(f){var A=()=>super._get,z=this;return(0,_.A)(function*(){const ae=yield A().call(z,f);return z.localCache[f]=JSON.stringify(ae),ae})()}_remove(f){var A=()=>super._remove,z=this;return(0,_.A)(function*(){yield A().call(z,f),delete z.localCache[f]})()}}return I.type="LOCAL",I})(),ta=(()=>{class I extends jn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,A){}_removeListener(f,A){}}return I.type="SESSION",I})();let Is=(()=>{class I{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const A=this.receivers.find(ae=>ae.isListeningto(f));if(A)return A;const z=new I(f);return this.receivers.push(z),z}isListeningto(f){return this.eventTarget===f}handleEvent(f){var A=this;return(0,_.A)(function*(){const z=f,{eventId:ae,eventType:Ve,data:bt}=z.data,Gt=A.handlersMap[Ve];if(!Gt?.size)return;z.ports[0].postMessage({status:"ack",eventId:ae,eventType:Ve});const Tn=Array.from(Gt).map(function(){var Ar=(0,_.A)(function*(so){return so(z.origin,bt)});return function(so){return Ar.apply(this,arguments)}}()),$n=yield function nc(I){return Promise.all(I.map(function(){var h=(0,_.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(A){return{fulfilled:!1,reason:A}}});return function(f){return h.apply(this,arguments)}}()))}(Tn);z.ports[0].postMessage({status:"done",eventId:ae,eventType:Ve,response:$n})})()}_subscribe(f,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(A)}_unsubscribe(f,A){this.handlersMap[f]&&A&&this.handlersMap[f].delete(A),(!A||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function Qn(I="",h=10){let f="";for(let A=0;A<h;A++)f+=Math.floor(10*Math.random());return I+f}class rc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,A=50){var z=this;return(0,_.A)(function*(){const ae=typeof MessageChannel<"u"?new MessageChannel:null;if(!ae)throw new Error("connection_unavailable");let Ve,bt;return new Promise((Gt,Tn)=>{const $n=Qn("",20);ae.port1.start();const Ar=setTimeout(()=>{Tn(new Error("unsupported_event"))},A);bt={messageChannel:ae,onMessage(so){const Ra=so;if(Ra.data.eventId===$n)switch(Ra.data.status){case"ack":clearTimeout(Ar),Ve=setTimeout(()=>{Tn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ve),Gt(Ra.data.response);break;default:clearTimeout(Ar),clearTimeout(Ve),Tn(new Error("invalid_response"))}}},z.handlers.add(bt),ae.port1.addEventListener("message",bt.onMessage),z.target.postMessage({eventType:h,eventId:$n,data:f},[ae.port2])}).finally(()=>{bt&&z.removeMessageHandler(bt)})})()}}function mi(){return window}function ba(){return typeof mi().WorkerGlobalScope<"u"&&"function"==typeof mi().importScripts}function Di(){return(Di=(0,_.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const As="firebaseLocalStorageDb",na="firebaseLocalStorage",qc="fbase_key";class no{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Ba(I,h){return I.transaction([na],h?"readwrite":"readonly").objectStore(na)}function Qc(){const I=indexedDB.open(As,1);return new Promise((h,f)=>{I.addEventListener("error",()=>{f(I.error)}),I.addEventListener("upgradeneeded",()=>{const A=I.result;try{A.createObjectStore(na,{keyPath:qc})}catch(z){f(z)}}),I.addEventListener("success",(0,_.A)(function*(){const A=I.result;A.objectStoreNames.contains(na)?h(A):(A.close(),yield function ic(){const I=indexedDB.deleteDatabase(As);return new no(I).toPromise()}(),h(yield Qc()))}))})}function Pu(I,h,f){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,_.A)(function*(I,h,f){const A=Ba(I,!0).put({[qc]:h,value:f});return new no(A).toPromise()})).apply(this,arguments)}function ja(){return(ja=(0,_.A)(function*(I,h){const f=Ba(I,!1).get(h),A=yield new no(f).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function Cl(I,h){const f=Ba(I,!0).delete(h);return new no(f).toPromise()}const wl=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,_.A)(function*(){return f.db||(f.db=yield Qc()),f.db})()}_withRetries(f){var A=this;return(0,_.A)(function*(){let z=0;for(;;)try{const ae=yield A._openDb();return yield f(ae)}catch(ae){if(z++>3)throw ae;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,_.A)(function*(){return ba()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,_.A)(function*(){f.receiver=Is._getInstance(function Ds(){return ba()?self:null}()),f.receiver._subscribe("keyChanged",function(){var A=(0,_.A)(function*(z,ae){return{keyProcessed:(yield f._poll()).includes(ae.key)}});return function(z,ae){return A.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var A=(0,_.A)(function*(z,ae){return["keyChanged"]});return function(z,ae){return A.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,_.A)(function*(){var A,z;if(f.activeServiceWorker=yield function Sa(){return Di.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new rc(f.activeServiceWorker);const ae=yield f.sender._send("ping",{},800);ae&&null!==(A=ae[0])&&void 0!==A&&A.fulfilled&&null!==(z=ae[0])&&void 0!==z&&z.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var A=this;return(0,_.A)(function*(){if(A.sender&&A.activeServiceWorker&&function Su(){var I;return(null===(I=navigator?.serviceWorker)||void 0===I?void 0:I.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:f},A.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.A)(function*(){try{if(!indexedDB)return!1;const f=yield Qc();return yield Pu(f,ai,"1"),yield Cl(f,ai),!0}catch{}return!1})()}_withPendingWrite(f){var A=this;return(0,_.A)(function*(){A.pendingWrites++;try{yield f()}finally{A.pendingWrites--}})()}_set(f,A){var z=this;return(0,_.A)(function*(){return z._withPendingWrite((0,_.A)(function*(){return yield z._withRetries(ae=>Pu(ae,f,A)),z.localCache[f]=A,z.notifyServiceWorker(f)}))})()}_get(f){var A=this;return(0,_.A)(function*(){const z=yield A._withRetries(ae=>function Mu(I,h){return ja.apply(this,arguments)}(ae,f));return A.localCache[f]=z,z})()}_remove(f){var A=this;return(0,_.A)(function*(){return A._withPendingWrite((0,_.A)(function*(){return yield A._withRetries(z=>Cl(z,f)),delete A.localCache[f],A.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,_.A)(function*(){const A=yield f._withRetries(Ve=>{const bt=Ba(Ve,!1).getAll();return new no(bt).toPromise()});if(!A)return[];if(0!==f.pendingWrites)return[];const z=[],ae=new Set;if(0!==A.length)for(const{fbase_key:Ve,value:bt}of A)ae.add(Ve),JSON.stringify(f.localCache[Ve])!==JSON.stringify(bt)&&(f.notifyListeners(Ve,bt),z.push(Ve));for(const Ve of Object.keys(f.localCache))f.localCache[Ve]&&!ae.has(Ve)&&(f.notifyListeners(Ve,null),z.push(Ve));return z})()}notifyListeners(f,A){this.localCache[f]=A;const z=this.listeners[f];if(z)for(const ae of Array.from(z))ae(A)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,_.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(A)}_removeListener(f,A){this.listeners[f]&&(this.listeners[f].delete(A),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})(),Tl=1e12;class Ou{constructor(h){this.auth=h,this.counter=Tl,this._widgets=new Map}render(h,f){const A=this.counter;return this._widgets.set(A,new Nu(h,this.auth.name,f||{})),this.counter++,A}reset(h){var f;const A=h||Tl;null===(f=this._widgets.get(A))||void 0===f||f.delete(),this._widgets.delete(A)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Tl))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,_.A)(function*(){var A;return null===(A=f._widgets.get(h||Tl))||void 0===A||A.execute(),""})()}}class Nu{constructor(h,f,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const z="string"==typeof h?document.getElementById(h):h;ie(z,"argument-error",{appName:f}),this.container=z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function E(I){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<I;A++)h.push(f.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const M=Si("rcb"),w=new tn(3e4,6e4);class O{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=mi().grecaptcha)||void 0===h||!h.render)}load(h,f=""){return ie(function j(I){return I.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I)}(f),h,"argument-error"),this.shouldResolveImmediately(f)&&Kn(mi().grecaptcha)?Promise.resolve(mi().grecaptcha):new Promise((A,z)=>{const ae=mi().setTimeout(()=>{z(Ee(h,"network-request-failed"))},w.get());mi()[M]=()=>{mi().clearTimeout(ae),delete mi()[M];const bt=mi().grecaptcha;if(!bt||!Kn(bt))return void z(Ee(h,"internal-error"));const Gt=bt.render;bt.render=(Tn,$n)=>{const Ar=Gt(Tn,$n);return this.counter++,Ar},this.hostLanguage=f,A(bt)},ii(`${function Er(){return wn.recaptchaV2Script}()}?${(0,R.Am)({onload:M,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(ae),z(Ee(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!(null===(f=mi().grecaptcha)||void 0===f||!f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ee{load(h){return(0,_.A)(function*(){return new Ou(h)})()}clearedOneInstance(){}}const Te="recaptcha",At={theme:"light",type:"image"};class pt{constructor(h,f,A=Object.assign({},At)){this.parameters=A,this.type=Te,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$t(h),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const z="string"==typeof f?document.getElementById(f):f;ie(z,this.auth,"argument-error"),this.container=z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ee:new O,this.validateStartingState()}verify(){var h=this;return(0,_.A)(function*(){h.assertNotDestroyed();const f=yield h.render(),A=h.getAssertedRecaptcha();return A.getResponse(f)||new Promise(ae=>{const Ve=bt=>{bt&&(h.tokenChangeListeners.delete(Ve),ae(bt))};h.tokenChangeListeners.add(Ve),h.isInvisible&&A.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(A=>A(f)),"function"==typeof h)h(f);else if("string"==typeof h){const A=mi()[h];"function"==typeof A&&A(f)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,_.A)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const A=document.createElement("div");f.appendChild(A),f=A}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,_.A)(function*(){ie(St()&&!ba(),h.auth,"internal-error"),yield function _n(){let I=null;return new Promise(h=>{"complete"!==document.readyState?(I=()=>h(),window.addEventListener("load",I)):h()}).catch(h=>{throw I&&window.removeEventListener("load",I),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function _t(I){return Zr.apply(this,arguments)}(h.auth);ie(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class er{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=ms._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function dr(I,h,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(Ye(I));const A=$t(I),z=yield Wo(A,h,(0,R.Ku)(f));return new er(z,ae=>pa(A,ae))})).apply(this,arguments)}function Ac(I,h,f){return ra.apply(this,arguments)}function ra(){return(ra=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);yield Ts(!1,A,"phone");const z=yield Wo(A.auth,h,(0,R.Ku)(f));return new er(z,ae=>La(A,ae))})).apply(this,arguments)}function ho(I,h,f){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);if((0,T._isFirebaseServerApp)(A.auth.app))return Promise.reject(Ye(A.auth));const z=yield Wo(A.auth,h,(0,R.Ku)(f));return new er(z,ae=>Ua(A,ae))})).apply(this,arguments)}function Wo(I,h,f){return xu.apply(this,arguments)}function xu(){return xu=(0,_.A)(function*(I,h,f){var A;const z=yield f.verify();try{let ae;if(ie("string"==typeof z,I,"argument-error"),ie(f.type===Te,I,"argument-error"),ae="string"==typeof h?{phoneNumber:h}:h,"session"in ae){const Ve=ae.session;if("phoneNumber"in ae)return ie("enroll"===Ve.type,I,"internal-error"),(yield function is(I,h){return tt(I,"POST","/v2/accounts/mfaEnrollment:start",It(I,h))}(I,{idToken:Ve.credential,phoneEnrollmentInfo:{phoneNumber:ae.phoneNumber,recaptchaToken:z}})).phoneSessionInfo.sessionInfo;{ie("signin"===Ve.type,I,"internal-error");const bt=(null===(A=ae.multiFactorHint)||void 0===A?void 0:A.uid)||ae.multiFactorUid;return ie(bt,I,"missing-multi-factor-info"),(yield function Ru(I,h){return tt(I,"POST","/v2/accounts/mfaSignIn:start",It(I,h))}(I,{mfaPendingCredential:Ve.credential,mfaEnrollmentId:bt,phoneSignInInfo:{recaptchaToken:z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ve}=yield function ts(I,h){return ks.apply(this,arguments)}(I,{phoneNumber:ae.phoneNumber,recaptchaToken:z});return Ve}}finally{f._reset()}}),xu.apply(this,arguments)}function ku(I,h){return $a.apply(this,arguments)}function $a(){return($a=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I);if((0,T._isFirebaseServerApp)(f.auth.app))return Promise.reject(Ye(f.auth));yield Zs(f,h)})).apply(this,arguments)}let Yc=(()=>{class I{constructor(f){this.providerId=I.PROVIDER_ID,this.auth=$t(f)}verifyPhoneNumber(f,A){return Wo(this.auth,f,(0,R.Ku)(A))}static credential(f,A){return ms._fromVerification(f,A)}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:A,temporaryProof:z}=f;return A&&z?ms._fromTokenResponse(A,z):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function Mr(I,h){return h?Bt(h):(ie(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class Ha extends rr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Pi(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Pi(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Pi(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function Jc(I){return Jr(I.auth,new Ha(I),I.bypassAuthState)}function js(I){const{auth:h,user:f}=I;return ie(f,h,"internal-error"),jo(f,new Ha(I),I.bypassAuthState)}function Id(I){return sc.apply(this,arguments)}function sc(){return(sc=(0,_.A)(function*(I){const{auth:h,user:f}=I;return ie(f,h,"internal-error"),Zs(f,new Ha(I),I.bypassAuthState)})).apply(this,arguments)}class oc{constructor(h,f,A,z,ae=!1){this.auth=h,this.resolver=A,this.user=z,this.bypassAuthState=ae,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,_.A)(function*(A,z){h.pendingPromise={resolve:A,reject:z};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(ae){h.reject(ae)}});return function(A,z){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,_.A)(function*(){const{urlResponse:A,sessionId:z,postBody:ae,tenantId:Ve,error:bt,type:Gt}=h;if(bt)return void f.reject(bt);const Tn={auth:f.auth,requestUri:A,sessionId:z,tenantId:Ve||void 0,postBody:ae||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Gt)(Tn))}catch($n){f.reject($n)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Jc;case"linkViaPopup":case"linkViaRedirect":return Id;case"reauthViaPopup":case"reauthViaRedirect":return js;default:ue(this.auth,"internal-error")}}resolve(h){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ko=new tn(2e3,1e4);function ef(I,h,f){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(Ee(I,"operation-not-supported-in-this-environment"));const A=$t(I);Je(I,h,Ci);const z=Mr(A,f);return new Al(A,"signInViaPopup",h,z).executeNotNull()})).apply(this,arguments)}function Dl(I,h,f){return ro.apply(this,arguments)}function ro(){return(ro=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);if((0,T._isFirebaseServerApp)(A.auth.app))return Promise.reject(Ee(A.auth,"operation-not-supported-in-this-environment"));Je(A.auth,h,Ci);const z=Mr(A.auth,f);return new Al(A.auth,"reauthViaPopup",h,z,A).executeNotNull()})).apply(this,arguments)}function tf(I,h,f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);Je(A.auth,h,Ci);const z=Mr(A.auth,f);return new Al(A.auth,"linkViaPopup",h,z,A).executeNotNull()})).apply(this,arguments)}let Al=(()=>{class I extends oc{constructor(f,A,z,ae,Ve){super(f,A,ae,Ve),this.provider=z,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var f=this;return(0,_.A)(function*(){const A=yield f.execute();return ie(A,f.auth,"internal-error"),A})()}onExecution(){var f=this;return(0,_.A)(function*(){He(1===f.filter.length,"Popup operations only handle one event");const A=Qn();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],A),f.authWindow.associatedEvent=A,f.resolver._originValidation(f.auth).catch(z=>{f.reject(z)}),f.resolver._isIframeWebStorageSupported(f.auth,z=>{z||f.reject(Ee(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const f=()=>{var A,z;this.pollId=null!==(z=null===(A=this.authWindow)||void 0===A?void 0:A.window)&&void 0!==z&&z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,Ko.get())};f()}}return I.currentPopupAction=null,I})();const bl="pendingRedirect",bc=new Map;class Fu extends oc{constructor(h,f,A=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,A),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,_.A)(function*(){let A=bc.get(f.auth._key());if(!A){try{const ae=(yield function Sl(I,h){return za.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;A=()=>Promise.resolve(ae)}catch(z){A=()=>Promise.reject(z)}bc.set(f.auth._key(),A)}return f.bypassAuthState||bc.set(f.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,A=this;return(0,_.A)(function*(){if("signInViaRedirect"===h.type)return f().call(A,h);if("unknown"!==h.type){if(h.eventId){const z=yield A.auth._redirectUserForId(h.eventId);if(z)return A.user=z,f().call(A,h);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,_.A)(function*(){})()}cleanUp(){}}function za(){return(za=(0,_.A)(function*(I,h){const f=rf(h),A=wd(I);if(!(yield A._isAvailable()))return!1;const z="true"===(yield A._get(f));return yield A._remove(f),z})).apply(this,arguments)}function fo(I,h){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,_.A)(function*(I,h){return wd(I)._set(rf(h),"true")})).apply(this,arguments)}function Cd(){bc.clear()}function nf(I,h){bc.set(I._key(),h)}function wd(I){return Bt(I._redirectPersistence)}function rf(I){return qn(bl,I.config.apiKey,I.name)}function Td(I,h,f){return function Pl(I,h,f){return Wa.apply(this,arguments)}(I,h,f)}function Wa(){return(Wa=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(Ye(I));const A=$t(I);Je(I,h,Ci),yield A._initializationPromise;const z=Mr(A,f);return yield fo(z,A),z._openRedirect(A,h,"signInViaRedirect")})).apply(this,arguments)}function Dd(I,h,f){return function Ad(I,h,f){return Ml.apply(this,arguments)}(I,h,f)}function Ml(){return(Ml=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);if(Je(A.auth,h,Ci),(0,T._isFirebaseServerApp)(A.auth.app))return Promise.reject(Ye(A.auth));yield A.auth._initializationPromise;const z=Mr(A.auth,f);yield fo(z,A.auth);const ae=yield Sc(A);return z._openRedirect(A.auth,h,"reauthViaRedirect",ae)})).apply(this,arguments)}function Rl(I,h,f){return function Kp(I,h,f){return Ut.apply(this,arguments)}(I,h,f)}function Ut(){return(Ut=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);Je(A.auth,h,Ci),yield A.auth._initializationPromise;const z=Mr(A.auth,f);yield Ts(!1,A,h.providerId),yield fo(z,A.auth);const ae=yield Sc(A);return z._openRedirect(A.auth,h,"linkViaRedirect",ae)})).apply(this,arguments)}function Rr(I,h){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,_.A)(function*(I,h){return yield $t(I)._initializationPromise,Vu(I,h,!1)})).apply(this,arguments)}function Vu(I,h){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,_.A)(function*(I,h,f=!1){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(Ye(I));const A=$t(I),z=Mr(A,h),Ve=yield new Fu(A,z,f).execute();return Ve&&!f&&(delete Ve.user._redirectEventId,yield A._persistUserIfCurrent(Ve.user),yield A._setRedirectUser(null,h)),Ve})).apply(this,arguments)}function Sc(I){return ia.apply(this,arguments)}function ia(){return(ia=(0,_.A)(function*(I){const h=Qn(`${I.uid}:::`);return I._redirectEventId=h,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),h})).apply(this,arguments)}class Lu{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(h,A)&&(f=!0,this.sendToConsumer(h,A),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Sd(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bd(I);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var A;if(h.error&&!bd(h)){const z=(null===(A=h.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";f.onError(Ee(this.auth,z))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const A=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&A}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bs(h))}saveEventToCache(h){this.cachedEventUids.add(bs(h)),this.lastProcessedEventTime=Date.now()}}function bs(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(h=>h).join("-")}function bd({type:I,error:h}){return"unknown"===I&&"auth/no-auth-event"===h?.code}function eu(I){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,_.A)(function*(I,h={}){return tt(I,"GET","/v1/projects",h)})).apply(this,arguments)}const io=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pc=/^https?/;function $s(){return($s=(0,_.A)(function*(I){if(I.config.emulator)return;const{authorizedDomains:h}=yield eu(I);for(const f of h)try{if(qp(f))return}catch{}ue(I,"unauthorized-domain")})).apply(this,arguments)}function qp(I){const h=Jt(),{protocol:f,hostname:A}=new URL(h);if(I.startsWith("chrome-extension://")){const Ve=new URL(I);return""===Ve.hostname&&""===A?"chrome-extension:"===f&&I.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&Ve.hostname===A}if(!Pc.test(f))return!1;if(io.test(I))return A===I;const z=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+z+"|"+z+")$","i").test(A)}const Mc=new tn(3e4,6e4);function Pd(){const I=mi().___jsl;if(I?.H)for(const h of Object.keys(I.H))if(I.H[h].r=I.H[h].r||[],I.H[h].L=I.H[h].L||[],I.H[h].r=[...I.H[h].L],I.CP)for(let f=0;f<I.CP.length;f++)I.CP[f]=null}let Rc=null;const Nl=new tn(5e3,15e3),xl="__/auth/iframe",sf="emulator/auth/iframe",af={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rd(I){const h=I.config;ie(h.authDomain,I,"auth-domain-config-required");const f=h.emulator?Pe(h,sf):`https://${I.config.authDomain}/${xl}`,A={apiKey:h.apiKey,appName:I.name,v:T.SDK_VERSION},z=tu.get(I.config.apiHost);z&&(A.eid=z);const ae=I._getFrameworks();return ae.length&&(A.fw=ae.join(",")),`${f}?${(0,R.Am)(A).slice(1)}`}function Uu(){return Uu=(0,_.A)(function*(I){const h=yield function Md(I){return Rc=Rc||function ac(I){return new Promise((h,f)=>{var A,z,ae;function Ve(){Pd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Pd(),f(Ee(I,"network-request-failed"))},timeout:Mc.get()})}if(null!==(z=null===(A=mi().gapi)||void 0===A?void 0:A.iframes)&&void 0!==z&&z.Iframe)h(gapi.iframes.getContext());else{if(null===(ae=mi().gapi)||void 0===ae||!ae.load){const bt=Si("iframefcb");return mi()[bt]=()=>{gapi.load?Ve():f(Ee(I,"network-request-failed"))},ii(`${function qr(){return wn.gapiScript}()}?onload=${bt}`).catch(Gt=>f(Gt))}Ve()}}).catch(h=>{throw Rc=null,h})}(I),Rc}(I),f=mi().gapi;return ie(f,I,"internal-error"),h.open({where:document.body,url:Rd(I),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:af,dontclear:!0},A=>new Promise(function(){var z=(0,_.A)(function*(ae,Ve){yield A.restyle({setHideOnLeave:!1});const bt=Ee(I,"network-request-failed"),Gt=mi().setTimeout(()=>{Ve(bt)},Nl.get());function Tn(){mi().clearTimeout(Gt),ae(A)}A.ping(Tn).then(Tn,()=>{Ve(bt)})});return function(ae,Ve){return z.apply(this,arguments)}}()))}),Uu.apply(this,arguments)}const uf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ai{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Xp="__/auth/handler",Yp="emulator/auth/handler",df=encodeURIComponent("fac");function nu(I,h,f,A,z,ae){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,_.A)(function*(I,h,f,A,z,ae){ie(I.config.authDomain,I,"auth-domain-config-required"),ie(I.config.apiKey,I,"invalid-api-key");const Ve={apiKey:I.config.apiKey,appName:I.name,authType:f,redirectUrl:A,v:T.SDK_VERSION,eventId:z};if(h instanceof Ci){h.setDefaultLanguage(I.languageCode),Ve.providerId=h.providerId||"",(0,R.Im)(h.getCustomParameters())||(Ve.customParameters=JSON.stringify(h.getCustomParameters()));for(const[$n,Ar]of Object.entries(ae||{}))Ve[$n]=Ar}if(h instanceof Io){const $n=h.getScopes().filter(Ar=>""!==Ar);$n.length>0&&(Ve.scopes=$n.join(","))}I.tenantId&&(Ve.tid=I.tenantId);const bt=Ve;for(const $n of Object.keys(bt))void 0===bt[$n]&&delete bt[$n];const Gt=yield I._getAppCheckToken(),Tn=Gt?`#${df}=${encodeURIComponent(Gt)}`:"";return`${function Pa({config:I}){return I.emulator?Pe(I,Yp):`https://${I.authDomain}/${Xp}`}(I)}?${(0,R.Am)(bt).slice(1)}${Tn}`})).apply(this,arguments)}const Od="webStorageSupport",Bu=class Fl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ta,this._completeRedirectFn=Vu,this._overrideRedirectResult=nf}_openPopup(h,f,A,z){var ae=this;return(0,_.A)(function*(){var Ve;He(null===(Ve=ae.eventManagers[h._key()])||void 0===Ve?void 0:Ve.manager,"_initialize() not called before _openPopup()");const bt=yield nu(h,f,A,Jt(),z);return function Qp(I,h,f,A=500,z=600){const ae=Math.max((window.screen.availHeight-z)/2,0).toString(),Ve=Math.max((window.screen.availWidth-A)/2,0).toString();let bt="";const Gt=Object.assign(Object.assign({},uf),{width:A.toString(),height:z.toString(),top:ae,left:Ve}),Tn=(0,R.ZQ)().toLowerCase();f&&(bt=Qr(Tn)?"_blank":f),Ne(Tn)&&(h=h||"http://localhost",Gt.scrollbars="yes");const $n=Object.entries(Gt).reduce((so,[Ra,Hu])=>`${so}${Ra}=${Hu},`,"");if(function vt(I=(0,R.ZQ)()){var h;return Hi(I)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Tn)&&"_self"!==bt)return function lf(I,h){const f=document.createElement("a");f.href=I,f.target=h;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(A)}(h||"",bt),new Ai(null);const Ar=window.open(h||"",bt,$n);ie(Ar,I,"popup-blocked");try{Ar.focus()}catch{}return new Ai(Ar)}(h,bt,Qn())})()}_openRedirect(h,f,A,z){var ae=this;return(0,_.A)(function*(){return yield ae._originValidation(h),function So(I){mi().location.href=I}(yield nu(h,f,A,Jt(),z)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:z,promise:ae}=this.eventManagers[f];return z?Promise.resolve(z):(He(ae,"If manager is not set, promise should be"),ae)}const A=this.initAndGetManager(h);return this.eventManagers[f]={promise:A},A.catch(()=>{delete this.eventManagers[f]}),A}initAndGetManager(h){var f=this;return(0,_.A)(function*(){const A=yield function cf(I){return Uu.apply(this,arguments)}(h),z=new Lu(h);return A.register("authEvent",ae=>(ie(ae?.authEvent,h,"invalid-auth-event"),{status:z.onEvent(ae.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:z},f.iframes[h._key()]=A,z})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(Od,{type:Od},z=>{var ae;const Ve=null===(ae=z?.[0])||void 0===ae?void 0:ae[Od];void 0!==Ve&&f(!!Ve),ue(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function sa(I){return $s.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return Vt()||$r()||Hi()}};class Nc{constructor(h){this.factorId=h}_process(h,f,A){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,A);case"signin":return this._finalizeSignIn(h,f.credential);default:return je("unexpected MultiFactorSessionType")}}}class ju extends Nc{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new ju(h)}_finalizeEnroll(h,f,A){return function Us(I,h){return tt(I,"POST","/v2/accounts/mfaEnrollment:finalize",It(I,h))}(h,{idToken:f,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function Ed(I,h){return tt(I,"POST","/v2/accounts/mfaSignIn:finalize",It(I,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $u=(()=>{class I{constructor(){}static assertion(f){return ju._fromCredential(f)}}return I.FACTOR_ID="phone",I})();var Ll="@firebase/auth";class Ul{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,_.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(A=>{h(A?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);f&&(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,R.XA)("authIdTokenMaxAge"),function Sr(I){wn=I}({loadJS:I=>new Promise((h,f)=>{const A=document.createElement("script");A.setAttribute("src",I),A.onload=h,A.onerror=z=>{const ae=Ee("internal-error");ae.customData=z,f(ae)},A.type="text/javascript",A.charset="UTF-8",function xc(){var I,h;return null!==(h=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==h?h:document}().appendChild(A)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function kd(I){(0,T._registerComponent)(new be.uA("auth",(h,{options:f})=>{const A=h.getProvider("app").getImmediate(),z=h.getProvider("heartbeat"),ae=h.getProvider("app-check-internal"),{apiKey:Ve,authDomain:bt}=A.options;ie(Ve&&!Ve.includes(":"),"invalid-api-key",{appName:A.name});const Gt={apiKey:Ve,authDomain:bt,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cn(I)},Tn=new Xt(A,z,ae,Gt);return function Vo(I,h){const f=h?.persistence||[],A=(Array.isArray(f)?f:[f]).map(Bt);h?.errorMap&&I._updateErrorMap(h.errorMap),I._initializeWithPersistence(A,h?.popupRedirectResolver)}(Tn,f),Tn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,A)=>{h.getProvider("auth-internal").initialize()})),(0,T._registerComponent)(new be.uA("auth-internal",h=>{const f=$t(h.getProvider("auth").getImmediate());return new Ul(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,T.registerVersion)(Ll,"1.7.8",function xd(I){switch(I){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(I)),(0,T.registerVersion)(Ll,"1.7.8","esm2017")}("Browser")},1076:(sn,Ke,k)=>{k.d(Ke,{Am:()=>Yn,Bd:()=>je,FA:()=>Kt,Fy:()=>Ye,I9:()=>tr,Im:()=>_t,Ku:()=>Nt,Ll:()=>ie,T9:()=>ue,Uj:()=>Re,XA:()=>Ee,ZQ:()=>Je,bD:()=>Ft,cY:()=>oe,eX:()=>ft,g:()=>tt,gR:()=>sr,hp:()=>An,jZ:()=>Mt,lT:()=>Lt,lV:()=>St,mS:()=>ht,nr:()=>Pe,p7:()=>He,sr:()=>Jt,tD:()=>kr,u:()=>_e,zW:()=>Qe,zw:()=>ze});const y=function(ge){const q=[];let J=0;for(let se=0;se<ge.length;se++){let me=ge.charCodeAt(se);me<128?q[J++]=me:me<2048?(q[J++]=me>>6|192,q[J++]=63&me|128):55296==(64512&me)&&se+1<ge.length&&56320==(64512&ge.charCodeAt(se+1))?(me=65536+((1023&me)<<10)+(1023&ge.charCodeAt(++se)),q[J++]=me>>18|240,q[J++]=me>>12&63|128,q[J++]=me>>6&63|128,q[J++]=63&me|128):(q[J++]=me>>12|224,q[J++]=me>>6&63|128,q[J++]=63&me|128)}return q},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,q){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,se=[];for(let me=0;me<ge.length;me+=3){const Dt=ge[me],Bt=me+1<ge.length,En=Bt?ge[me+1]:0,Bn=me+2<ge.length,qn=Bn?ge[me+2]:0;let Ne=(15&En)<<2|qn>>6,$r=63&qn;Bn||($r=64,Bt||(Ne=64)),se.push(J[Dt>>2],J[(3&Dt)<<4|En>>4],J[Ne],J[$r])}return se.join("")},encodeString(ge,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(ge):this.encodeByteArray(y(ge),q)},decodeString(ge,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(ge):function(ge){const q=[];let J=0,se=0;for(;J<ge.length;){const me=ge[J++];if(me<128)q[se++]=String.fromCharCode(me);else if(me>191&&me<224){const Dt=ge[J++];q[se++]=String.fromCharCode((31&me)<<6|63&Dt)}else if(me>239&&me<365){const Bn=((7&me)<<18|(63&ge[J++])<<12|(63&ge[J++])<<6|63&ge[J++])-65536;q[se++]=String.fromCharCode(55296+(Bn>>10)),q[se++]=String.fromCharCode(56320+(1023&Bn))}else{const Dt=ge[J++],Bt=ge[J++];q[se++]=String.fromCharCode((15&me)<<12|(63&Dt)<<6|63&Bt)}}return q.join("")}(this.decodeStringToByteArray(ge,q))},decodeStringToByteArray(ge,q){this.init_();const J=q?this.charToByteMapWebSafe_:this.charToByteMap_,se=[];for(let me=0;me<ge.length;){const Dt=J[ge.charAt(me++)],En=me<ge.length?J[ge.charAt(me)]:0;++me;const qn=me<ge.length?J[ge.charAt(me)]:64;++me;const Wt=me<ge.length?J[ge.charAt(me)]:64;if(++me,null==Dt||null==En||null==qn||null==Wt)throw new fe;se.push(Dt<<2|En>>4),64!==qn&&(se.push(En<<4&240|qn>>2),64!==Wt&&se.push(qn<<6&192|Wt))}return se},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}};class fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Re=function(ge){return function(ge){const q=y(ge);return be.encodeByteArray(q,!0)}(ge).replace(/\./g,"")},_e=function(ge){try{return be.decodeString(ge,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function ze(ge,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return q}for(const J in q)!q.hasOwnProperty(J)||!Ct(J)||(ge[J]=ze(ge[J],q[J]));return ge}function Ct(ge){return"__proto__"!==ge}function ht(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const We=()=>{try{return ht().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ge=process.env.__FIREBASE_DEFAULTS__;return ge?JSON.parse(ge):void 0})()||(()=>{if(typeof document>"u")return;let ge;try{ge=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const q=ge&&_e(ge[1]);return q&&JSON.parse(q)})()}catch(ge){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ge}`)}},ue=()=>{var ge;return null===(ge=We())||void 0===ge?void 0:ge.config},Ee=ge=>{var q;return null===(q=We())||void 0===q?void 0:q[`_${ge}`]};class oe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,J)=>{this.resolve=q,this.reject=J})}wrapCallback(q){return(J,se)=>{J?this.reject(J):this.resolve(se),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(J):q(J,se))}}}function Ye(ge,q){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const se=q||"demo-project",me=ge.iat||0,Dt=ge.sub||ge.user_id;if(!Dt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Bt=Object.assign({iss:`https://securetoken.google.com/${se}`,aud:se,iat:me,exp:me+3600,auth_time:me,sub:Dt,user_id:Dt,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[Re(JSON.stringify({alg:"none",type:"JWT"})),Re(JSON.stringify(Bt)),""].join(".")}function Je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Mt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function ie(){var ge;const q=null===(ge=We())||void 0===ge?void 0:ge.forceEnvironment;if("node"===q)return!0;if("browser"===q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function je(){return typeof window<"u"||He()}function He(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Jt(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function St(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Lt(){const ge=Je();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function Pe(){return!ie()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){try{return"object"==typeof indexedDB}catch{return!1}}function ft(){return new Promise((ge,q)=>{try{let J=!0;const se="validate-browser-context-for-indexeddb-analytics-module",me=self.indexedDB.open(se);me.onsuccess=()=>{me.result.close(),J||self.indexedDB.deleteDatabase(se),ge(!0)},me.onupgradeneeded=()=>{J=!1},me.onerror=()=>{var Dt;q((null===(Dt=me.error)||void 0===Dt?void 0:Dt.message)||"")}}catch(J){q(J)}})}class tt extends Error{constructor(q,J,se){super(J),this.code=q,this.customData=se,this.name="FirebaseError",Object.setPrototypeOf(this,tt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kt.prototype.create)}}class Kt{constructor(q,J,se){this.service=q,this.serviceName=J,this.errors=se}create(q,...J){const se=J[0]||{},me=`${this.service}/${q}`,Dt=this.errors[q],Bt=Dt?function gn(ge,q){return ge.replace(rn,(J,se)=>{const me=q[se];return null!=me?String(me):`<${se}?>`})}(Dt,se):"Error";return new tt(me,`${this.serviceName}: ${Bt} (${me}).`,se)}}const rn=/\{\$([^}]+)}/g;function sr(ge,q){return Object.prototype.hasOwnProperty.call(ge,q)}function _t(ge){for(const q in ge)if(Object.prototype.hasOwnProperty.call(ge,q))return!1;return!0}function Ft(ge,q){if(ge===q)return!0;const J=Object.keys(ge),se=Object.keys(q);for(const me of J){if(!se.includes(me))return!1;const Dt=ge[me],Bt=q[me];if(it(Dt)&&it(Bt)){if(!Ft(Dt,Bt))return!1}else if(Dt!==Bt)return!1}for(const me of se)if(!J.includes(me))return!1;return!0}function it(ge){return null!==ge&&"object"==typeof ge}function Yn(ge){const q=[];for(const[J,se]of Object.entries(ge))Array.isArray(se)?se.forEach(me=>{q.push(encodeURIComponent(J)+"="+encodeURIComponent(me))}):q.push(encodeURIComponent(J)+"="+encodeURIComponent(se));return q.length?"&"+q.join("&"):""}function tr(ge){const q={};return ge.replace(/^\?/,"").split("&").forEach(se=>{if(se){const[me,Dt]=se.split("=");q[decodeURIComponent(me)]=decodeURIComponent(Dt)}}),q}function An(ge){const q=ge.indexOf("?");if(!q)return"";const J=ge.indexOf("#",q);return ge.substring(q,J>0?J:void 0)}function kr(ge,q){const J=new Wr(ge,q);return J.subscribe.bind(J)}class Wr{constructor(q,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{q(this)}).catch(se=>{this.error(se)})}next(q){this.forEachObserver(J=>{J.next(q)})}error(q){this.forEachObserver(J=>{J.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,J,se){let me;if(void 0===q&&void 0===J&&void 0===se)throw new Error("Missing Observer.");me=function Vi(ge,q){if("object"!=typeof ge||null===ge)return!1;for(const J of q)if(J in ge&&"function"==typeof ge[J])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:J,complete:se},void 0===me.next&&(me.next=Or),void 0===me.error&&(me.error=Or),void 0===me.complete&&(me.complete=Or);const Dt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?me.error(this.finalError):me.complete()}catch{}}),this.observers.push(me),Dt}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,q)}sendOne(q,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{J(this.observers[q])}catch(se){typeof console<"u"&&console.error&&console.error(se)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Or(){}function Nt(ge){return ge&&ge._delegate?ge._delegate:ge}},3227:(sn,Ke,k)=>{k.d(Ke,{K:()=>We});var _=k(177),T=k(4454),R=k(4438),y=k(1413);const te=["payPalButtonContainer"];let be=(()=>{class $e{constructor(ue){this.zone=ue}registerScript(ue,Ee,oe){const Ye=window[Ee];if(Ye)return void this.zone.run(()=>{oe(Ye)});const Je=document.createElement("script");Je.id=this.getElemId(Ee),Je.innerHTML="",Je.onload=()=>{this.zone.run(()=>{oe(window[Ee])})},Je.src=ue,Je.async=!0,Je.defer=!0,document.getElementsByTagName("head")[0].appendChild(Je)}cleanup(ue){const Ee=document.getElementById(this.getElemId(ue));Ee&&Ee.remove()}getElemId(ue){return`ngx-paypal-script-elem-${ue}`}}return $e.\u0275fac=function(ue){return new(ue||$e)(R.KVO(R.SKi))},$e.\u0275prov=R.jDH({token:$e,factory:$e.\u0275fac}),$e})(),fe=(()=>{class $e{constructor(ue){this.scriptService=ue,this.paypalWindowName="paypal"}registerPayPalScript(ue,Ee){this.scriptService.registerScript(this.getUrlForConfig(ue),this.paypalWindowName,Ee)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(ue){const Ee=[{name:"client-id",value:ue.clientId}];return ue.locale&&Ee.push({name:"locale",value:ue.locale}),ue.currency&&Ee.push({name:"currency",value:ue.currency}),ue.commit&&Ee.push({name:"commit",value:ue.commit}),ue.vault&&Ee.push({name:"vault",value:ue.vault}),ue.intent&&Ee.push({name:"intent",value:ue.intent}),ue.funding&&Ee.push({name:"components",value:"buttons,funding-eligibility"}),ue.extraParams&&Ee.push(...ue.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(Ee)}`}getQueryString(ue){let Ee="";for(let oe=0;oe<ue.length;oe++){const Ye=ue[oe];Ee+=0===oe?"?":"&",Ee+=`${Ye.name}=${Ye.value}`}return Ee}}return $e.\u0275fac=function(ue){return new(ue||$e)(R.KVO(be))},$e.\u0275prov=R.jDH({token:$e,factory:$e.\u0275fac}),$e})(),Le=(()=>{class $e{constructor(ue,Ee,oe){this.paypalScriptService=ue,this.cdr=Ee,this.ngZone=oe,this.registerScript=!0,this.scriptLoaded=new R.bkB,this.ngUnsubscribe=new y.B,this.initializePayPal=!0}set payPalButtonContainer(ue){this.payPalButtonContainerElem=ue}ngOnChanges(ue){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());const Ee=this.config;ue.config.isFirstChange()&&Ee&&this.registerScript&&this.initPayPalScript(Ee,oe=>{this.payPal=oe,this.doPayPalCheck()}),ue.config.isFirstChange()||this.reinitialize(Ee)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(ue){this.payPal=ue,this.doPayPalCheck()}reinitialize(ue){if(this.config=ue,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)try{for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild)}catch(Ee){console.error(Ee)}this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,Ee=>{this.payPal=Ee,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(ue,Ee){this.paypalScriptService.registerPayPalScript({clientId:ue.clientId,locale:ue.advanced?.locale,commit:ue.advanced&&ue.advanced.commit?ue.advanced.commit:void 0,currency:ue.currency,vault:ue.vault,intent:ue.intent,funding:null!=ue.fundingSource||null!=ue.fundingSource,extraParams:ue.advanced&&ue.advanced.extraQueryParams?ue.advanced.extraQueryParams:[]},oe=>{this.scriptLoaded.next(oe),Ee(oe)})}generateElementId(){return`ngx-captcha-id-${this.generateGuid()}`}initPayPal(ue,Ee){this.ngZone.runOutsideAngular(()=>{const Mt={style:ue.style,fundingSource:void 0,onApprove:(je,He)=>this.ngZone.run(()=>{if(ue.onApprove&&ue.onApprove(je,He),ue.authorizeOnServer)return ue.authorizeOnServer(je,He);const Jt=ue.onClientAuthorization;Jt&&He.order.capture().then(St=>{this.ngZone.run(()=>{Jt(St)})})}),onError:je=>{this.ngZone.run(()=>{ue.onError&&ue.onError(je)})},onCancel:(je,He)=>{this.ngZone.run(()=>{ue.onCancel&&ue.onCancel(je,He)})},onClick:(je,He)=>{this.ngZone.run(()=>{ue.onClick&&ue.onClick(je,He)})},onInit:(je,He)=>{this.ngZone.run(()=>{ue.onInit&&ue.onInit(je,He)})},...(ue.createOrderOnClient||ue.createOrderOnServer)&&{createOrder:(je,He)=>this.ngZone.run(()=>{if(ue.createOrderOnClient&&ue.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!ue.createOrderOnClient&&!ue.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(ue.createOrderOnClient)return He.order.create(ue.createOrderOnClient(je));if(ue.createOrderOnServer)return ue.createOrderOnServer(je);throw Error("Invalid state for 'createOrder'.")})},...ue.createSubscriptionOnClient&&{createSubscription:(je,He)=>this.ngZone.run(()=>{if(ue.createSubscriptionOnClient)return He.subscription.create(ue.createSubscriptionOnClient(je))})},...ue.onShippingChange&&{onShippingChange:(je,He)=>this.ngZone.run(()=>{if(ue.onShippingChange)return ue.onShippingChange(je,He)})}};let ie;switch(ue.fundingSource){case"PAYPAL":ie=Ee.FUNDING.PAYPAL;break;case"CARD":ie=Ee.FUNDING.CARD;break;case"PAYLATER":ie=Ee.FUNDING.PAYLATER;break;case"CREDIT":ie=Ee.FUNDING.CREDIT;break;case"VENMO":ie=Ee.FUNDING.VENMO}null!=ie&&(Mt.fundingSource=ie,"PAYPAL"!==ue.fundingSource&&delete Mt.style?.color),Ee.Buttons(Mt).render(`#${this.payPalButtonContainerId}`)})}generateGuid(){let ue=(new Date).getTime(),Ee=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,oe=>{let Ye=16*Math.random();return ue>0?(Ye=(ue+Ye)%16|0,ue=Math.floor(ue/16)):(Ye=(Ee+Ye)%16|0,Ee=Math.floor(Ee/16)),("x"==oe?Ye:7&Ye|8).toString(16)})}}return $e.\u0275fac=function(ue){return new(ue||$e)(R.rXU(fe),R.rXU(R.gRc),R.rXU(R.SKi))},$e.\u0275cmp=R.VBU({type:$e,selectors:[["ngx-paypal"]],viewQuery:function(ue,Ee){if(1&ue&&R.GBs(te,5),2&ue){let oe;R.mGM(oe=R.lsd())&&(Ee.payPalButtonContainer=oe.first)}},inputs:{config:"config",registerScript:"registerScript"},outputs:{scriptLoaded:"scriptLoaded"},features:[R.OA$],decls:2,vars:1,consts:[["payPalButtonContainer",""],[3,"id"]],template:function(ue,Ee){1&ue&&R.nrm(0,"div",1,0),2&ue&&R.Y8G("id",Ee.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),$e})(),Re=(()=>{class $e{}return $e.\u0275fac=function(ue){return new(ue||$e)},$e.\u0275mod=R.$C({type:$e}),$e.\u0275inj=R.G2t({providers:[be,fe],imports:[_.MD]}),$e})();var _e=k(5435),ve=k(6569);let ze=(()=>{class $e{constructor(ue,Ee){this.sharedService=ue,this.authService=Ee,this.userId="",this.userEmail=""}ngOnInit(){this.authService.loggedUser.subscribe(ue=>{ue&&ue.user.email&&(this.userId=ue?.key,this.userEmail=ue?.user.email)}),this.cartArr$?.subscribe(ue=>{this.cartArr=ue}),this.initConfig()}update(){if(!this.userEmail)throw new Error("no user email found");this.authService.findUser(this.userEmail).subscribe(ue=>{this.authService.loggedUser.next(ue)})}initConfig(){this.paypalConfig={currency:"USD",clientId:"AQ7YdqsTpxT_ouN31zRUyhQFvr1mMuO8rfcrWINg6SE5BFQ0l67cIFOhsNjIMdaxDU2RU42hI8yx2IxG",createOrderOnClient:ue=>({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:this.totalPrice?.toString(),breakdown:{item_total:{currency_code:"USD",value:this.totalPrice?.toString()}}},items:[{name:"Music Shop Products",quantity:"1",category:"PHYSICAL_GOODS",unit_amount:{currency_code:"USD",value:this.totalPrice?.toString()}}]}]}),advanced:{commit:"true"},style:{label:"paypal",layout:"vertical"},onApprove:(ue,Ee)=>{this.cartArr&&this.totalPrice&&(this.sharedService.buyProducts(this.cartArr,this.totalPrice,this.userEmail,this.userId),this.update(),console.log("payment approved: ",ue,Ee))},onCancel:(ue,Ee)=>{console.log("payment cancelled: ",ue,Ee)},onClick:(ue,Ee)=>{console.log("Onclick: ",ue,Ee)}}}static#e=this.\u0275fac=function(Ee){return new(Ee||$e)(R.rXU(_e.m),R.rXU(ve.p))};static#t=this.\u0275cmp=R.VBU({type:$e,selectors:[["app-paypal"]],inputs:{totalPrice:"totalPrice",cartArr$:"cartArr$"},standalone:!0,features:[R.aNF],decls:1,vars:1,consts:[[3,"config"]],template:function(Ee,oe){1&Ee&&R.nrm(0,"ngx-paypal",0),2&Ee&&R.Y8G("config",oe.paypalConfig)},dependencies:[Re,Le]})}return $e})();var Ct=k(2906);const ht=["paymentRef"];function Me($e,Pt){if(1&$e){const ue=R.RV6();R.j41(0,"div",5)(1,"div",6)(2,"img",7),R.bIt("click",function(){const oe=R.eBV(ue).$implicit,Ye=R.XpG(2);return R.Njj(Ye.removeFromCart(oe.product))}),R.k0s()(),R.j41(3,"div"),R.nrm(4,"img",8),R.k0s(),R.j41(5,"div",9)(6,"span"),R.EFF(7),R.k0s(),R.j41(8,"span"),R.EFF(9),R.nI1(10,"slice"),R.k0s(),R.j41(11,"span"),R.EFF(12),R.k0s(),R.j41(13,"p"),R.EFF(14),R.k0s(),R.j41(15,"p")(16,"img",10),R.bIt("click",function(){const oe=R.eBV(ue).$implicit,Ye=R.XpG(2);return R.Njj(Ye.plus(oe.product.key,"minus"))}),R.k0s(),R.EFF(17),R.j41(18,"img",11),R.bIt("click",function(){const oe=R.eBV(ue).$implicit,Ye=R.XpG(2);return R.Njj(Ye.plus(oe.product.key,"plus"))}),R.k0s()(),R.j41(19,"button",12),R.bIt("click",function(){const oe=R.eBV(ue).$implicit,Ye=R.XpG(2);return R.Njj(Ye.nav(oe.product.key,oe.product.product.category))}),R.EFF(20," See Product "),R.k0s()()()}if(2&$e){const ue=Pt.$implicit;R.R7$(4),R.Y8G("src",ue.product.product.photoUrl[0],R.B4B),R.R7$(3),R.SpI("Type: ",ue.product.product.category,""),R.R7$(2),R.SpI("Model: ",R.brH(10,6,ue.product.product.model,0,60),"..."),R.R7$(3),R.SpI("Price: ",ue.product.product.price,"$"),R.R7$(2),R.SpI("Discount -",ue.product.product.discount,"%"),R.R7$(3),R.SpI("",ue.quantity," ")}}function ct($e,Pt){if(1&$e&&(R.j41(0,"div",13)(1,"h2"),R.EFF(2),R.k0s(),R.j41(3,"div")(4,"div"),R.nrm(5,"app-paypal",14),R.k0s()()()),2&$e){const ue=R.XpG(2);R.R7$(2),R.SpI("Total Price: ",ue.calculateTotalPrice(),"$"),R.R7$(3),R.Y8G("cartArr$",ue.cart$)("totalPrice",ue.calculateTotalPrice())}}function Ue($e,Pt){if(1&$e&&(R.j41(0,"div",1)(1,"div")(2,"h2"),R.EFF(3,"Cart"),R.k0s()(),R.j41(4,"div",2),R.DNE(5,Me,21,10,"div",3),R.nI1(6,"async"),R.k0s(),R.DNE(7,ct,6,3,"div",4),R.k0s()),2&$e){const ue=R.XpG();R.R7$(5),R.Y8G("ngForOf",R.bMT(6,2,ue.cart$)),R.R7$(2),R.Y8G("ngIf",ue.calculateTotalPrice()>0)}}let We=(()=>{class $e{constructor(ue,Ee,oe,Ye,Je){this.sharedService=ue,this.router=Ee,this.authService=oe,this.cd=Ye,this.cartService=Je,this.showCart=!0}ngOnInit(){this.authService.checkIfLoggedIn(),this.cart$=this.cartService.cart.asObservable(),this.cd.detectChanges()}makePayment(){this.sharedService.buyProducts(this.cartService.cart.getValue(),this.calculateTotalPrice(),this.authService.loggedUser.getValue()?.user.email,this.authService.loggedUser.getValue()?.key)}removeFromCart(ue){this.cartService.cartOperations("remove",ue),this.calculateTotalPrice()}nav(ue,Ee){this.router.navigate([`single-product/${ue}`],{queryParams:{type:Ee,prod:ue}})}plus(ue,Ee){let oe=this.cartService.cart.getValue();const Ye=oe.findIndex(Je=>Je.product.key===ue);"plus"===Ee?oe[Ye].quantity++:oe[Ye].quantity>1&&oe[Ye].quantity--,this.cartService.cart.next(oe)}calculateTotalPrice(){let ue=0;return this.cartService.cart.getValue().forEach(Ee=>{if(Ee.product.product.discount>0){const oe=Ee.quantity*(Ee.product.product.price-this.calculateDiscount(Ee.product.product.price,Ee.product.product.discount));ue+=oe}else ue+=Ee.quantity*Ee.product.product.price}),ue}calculateDiscount(ue,Ee){return Math.round(ue*Ee/100)}static#e=this.\u0275fac=function(Ee){return new(Ee||$e)(R.rXU(_e.m),R.rXU(T.Ix),R.rXU(ve.p),R.rXU(R.gRc),R.rXU(Ct.m))};static#t=this.\u0275cmp=R.VBU({type:$e,selectors:[["app-cart"]],viewQuery:function(Ee,oe){if(1&Ee&&R.GBs(ht,7),2&Ee){let Ye;R.mGM(Ye=R.lsd())&&(oe.paymentRef=Ye.first)}},inputs:{showCart:"showCart",userEmail:"userEmail"},standalone:!0,features:[R.aNF],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"products"],["class","product",4,"ngFor","ngForOf"],["class","payment",4,"ngIf"],[1,"product"],[1,"remove"],["src","assets/remove.png","alt","img",3,"click"],["alt","img",3,"src"],[1,"description"],["src","assets/minus.png","alt","img",3,"click"],["src","assets/plus.png","alt","img",3,"click"],[3,"click"],[1,"payment"],[3,"cartArr$","totalPrice"]],template:function(Ee,oe){1&Ee&&R.DNE(0,Ue,8,4,"div",0),2&Ee&&R.Y8G("ngIf",oe.showCart)},dependencies:[_.MD,_.Sq,_.bT,_.Jj,_.P9,T.iI,ze],styles:[".container[_ngcontent-%COMP%]{width:600px;height:600px;background-color:#98c0e0;overflow-y:scroll}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{text-align:center;padding:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]{display:flex;gap:5px;height:150px;width:80%;border:1px solid rgb(118,153,218);border-radius:8px;position:relative}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{position:absolute;right:0}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:20%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > img[_ngcontent-%COMP%]{width:100%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:repeat(2,190px);grid-template-rows:repeat(3,46px);align-content:center;align-items:center}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:14px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px;cursor:pointer}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:not(:last-child){font-size:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:24px;width:130px;border:none;color:#fff;background-color:#7699da;border-radius:3px;cursor:pointer}.container[_ngcontent-%COMP%]   .payment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}"],changeDetection:0})}return $e})()},2906:(sn,Ke,k)=>{k.d(Ke,{m:()=>R});var _=k(4438),T=k(4412);let R=(()=>{class y{constructor(){this.cart=new T.t([]),this.cartArr=new _.bkB}cartOperations(be,fe){let Le=this.cart.getValue();const Re=Le.findIndex(ve=>ve.product.key===fe.key);let _e=[...Le];-1!==Re?"add"===be?_e[Re].quantity++:_e.splice(Re,1):"add"===be&&_e.push({quantity:1,product:fe}),this.cart.next(_e),localStorage.setItem("cart",JSON.stringify(this.cart.value))}static#e=this.\u0275fac=function(fe){return new(fe||y)};static#t=this.\u0275prov=_.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},708:(sn,Ke,k)=>{k.d(Ke,{n:()=>te});var _=k(9417),T=k(4454),R=k(4438),y=k(6569);let te=(()=>{class be{constructor(Le,Re){this.service=Le,this.router=Re,this.email=""}sendEmail(){this.email=""}navigate(Le){if("profile"===Le){const Re=this.service.loggedUser.getValue()?.key;this.router.navigate([`profile/${Re}`])}}static#e=this.\u0275fac=function(Re){return new(Re||be)(R.rXU(y.p),R.rXU(T.Ix))};static#t=this.\u0275cmp=R.VBU({type:be,selectors:[["app-footer"]],standalone:!0,features:[R.aNF],decls:33,vars:1,consts:[[1,"container"],[1,"flex-container"],["src","assets/placeholder.png","alt","img"],["src","assets/phone.png","alt","img"],["routerLink","/login"],["routerLink","/products"],[3,"click"],["placeholder","Enter your Email",3,"ngModelChange","ngModel"],["src","assets/send.png","alt","img",3,"click"]],template:function(Re,_e){1&Re&&(R.j41(0,"div",0),R.nrm(1,"div"),R.j41(2,"div",1)(3,"div")(4,"h3"),R.EFF(5,"SABAMUSIC."),R.k0s(),R.j41(6,"p"),R.EFF(7,"Music Shop over 1000 brand. we sell quality product on our website"),R.k0s(),R.j41(8,"p"),R.nrm(9,"img",2),R.EFF(10,"Mindeli's street 7B"),R.k0s(),R.j41(11,"p"),R.nrm(12,"img",3),R.EFF(13,"+995 555 542 034"),R.k0s()(),R.j41(14,"div")(15,"h3"),R.EFF(16,"Menu"),R.k0s(),R.j41(17,"p",4),R.EFF(18,"Login"),R.k0s(),R.j41(19,"p",5),R.EFF(20,"Products"),R.k0s(),R.j41(21,"p"),R.EFF(22,"About Us"),R.k0s(),R.j41(23,"p"),R.EFF(24,"Terms & Policy"),R.k0s(),R.j41(25,"p",6),R.bIt("click",function(){return _e.navigate("profile")}),R.EFF(26,"My Account"),R.k0s()(),R.j41(27,"div")(28,"h3"),R.EFF(29,"Stay Updated"),R.k0s(),R.j41(30,"div")(31,"input",7),R.mxI("ngModelChange",function(ze){return R.DH7(_e.email,ze)||(_e.email=ze),ze}),R.k0s(),R.j41(32,"img",8),R.bIt("click",function(){return _e.sendEmail()}),R.k0s()()()()()),2&Re&&(R.R7$(31),R.R50("ngModel",_e.email))},dependencies:[_.YN,_.me,_.BC,_.vS,T.iI,T.Wk],styles:[".container[_ngcontent-%COMP%]{width:90%;height:220px;margin:100px auto;display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;height:2px;background-color:#000}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;height:100%}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:7px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:4px;cursor:pointer}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-size:14px;color:#616161}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > p[_ngcontent-%COMP%]{width:190px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{border:none;border-radius:2px;width:200px;height:20px;background-color:#e9dbdb}"],changeDetection:0})}return be})()},2152:(sn,Ke,k)=>{k.d(Ke,{l:()=>ht});var _=k(4454),T=k(177),R=k(3227),y=k(4438),te=k(6569);function be(Me,ct){if(1&Me){const Ue=y.RV6();y.j41(0,"div",13),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.changeShowsSidebar())}),y.nrm(1,"img",14),y.k0s()}}function fe(Me,ct){if(1&Me){const Ue=y.RV6();y.j41(0,"img",20),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG(2);return y.Njj($e.logOut())}),y.k0s()}}function Le(Me,ct){if(1&Me){const Ue=y.RV6();y.j41(0,"img",21),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG(2);return y.Njj($e.navigateToProfile())}),y.k0s()}}function Re(Me,ct){if(1&Me){const Ue=y.RV6();y.j41(0,"nav",15)(1,"div",16)(2,"div",13),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.changeShowsSidebar())}),y.nrm(3,"img",14),y.j41(4,"span",3),y.EFF(5,"SABAMUSIC."),y.k0s()(),y.j41(6,"div",17)(7,"div",18)(8,"span",5),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.navigateToCategotyPage("guitar"))}),y.EFF(9,"Guitars"),y.k0s(),y.j41(10,"span",5),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.navigateToCategotyPage("drum"))}),y.EFF(11,"Drums"),y.k0s(),y.j41(12,"span",5),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.navigateToCategotyPage("bass"))}),y.EFF(13,"Basses "),y.k0s(),y.j41(14,"span",5),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.navigateToCategotyPage("piano"))}),y.EFF(15,"Pianos"),y.k0s(),y.j41(16,"span",5),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.navigate("contact"))}),y.EFF(17,"Contact"),y.k0s(),y.j41(18,"span",5),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.navigate("about-us"))}),y.EFF(19,"About Us"),y.k0s(),y.nrm(20,"app-cart",9),y.k0s(),y.j41(21,"div",19),y.DNE(22,fe,1,0,"img",10),y.j41(23,"img",11),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.openCloseCart())}),y.k0s(),y.DNE(24,Le,1,0,"img",12),y.k0s()()()()}if(2&Me){const Ue=y.XpG();y.R7$(20),y.Y8G("userEmail",null==Ue.user||null==Ue.user.user?null:Ue.user.user.email)("showCart",Ue.cart),y.R7$(2),y.Y8G("ngIf",Ue.user),y.R7$(2),y.Y8G("ngIf",Ue.user)}}function _e(Me,ct){if(1&Me){const Ue=y.RV6();y.j41(0,"div",22)(1,"span",5),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.navigateToCategotyPage("guitar"))}),y.EFF(2,"Guitar"),y.k0s(),y.j41(3,"span",5),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.navigateToCategotyPage("drum"))}),y.EFF(4,"Drums"),y.k0s(),y.j41(5,"span",5),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.navigateToCategotyPage("bass"))}),y.EFF(6,"Bass "),y.k0s(),y.j41(7,"span",5),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.navigateToCategotyPage("piano"))}),y.EFF(8,"Piano"),y.k0s(),y.j41(9,"span",5),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.navigateToCategotyPage("other"))}),y.EFF(10,"Other"),y.k0s()()}}function ve(Me,ct){if(1&Me){const Ue=y.RV6();y.j41(0,"span",5),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.navigate("login"))}),y.EFF(1,"Log In"),y.k0s()}}function ze(Me,ct){if(1&Me){const Ue=y.RV6();y.j41(0,"img",20),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.logOut())}),y.k0s()}}function Ct(Me,ct){if(1&Me){const Ue=y.RV6();y.j41(0,"img",21),y.bIt("click",function(){y.eBV(Ue);const $e=y.XpG();return y.Njj($e.navigateToProfile())}),y.k0s()}}let ht=(()=>{class Me{constructor(Ue,We,$e){this.router=Ue,this.loginService=We,this.cd=$e,this.dropDown=!1,this.cart=!1,this.showsSidebar=!1,this.showsSidebar2=!0}ngOnInit(){this.loginService.loggedUser.subscribe(Ue=>{this.user=Ue,this.profilePicture=this.user?.user.photoUrl,this.cd.detectChanges()})}changeDropDown(){this.dropDown=!this.dropDown}changeShowsSidebar(){this.showsSidebar=!this.showsSidebar,this.showsSidebar2=!this.showsSidebar2}navigateToProfile(){this.router.navigate([`profile/${this.user?.key}`])}navigateToCategotyPage(Ue){this.router.navigate([`categoty/${Ue}`])}openCloseCart(){this.cart=!this.cart}logOut(){this.loginService.logOut(),this.router.navigate(["/products"])}navigate(Ue){this.router.navigate([`/${Ue}`])}static#e=this.\u0275fac=function(We){return new(We||Me)(y.rXU(_.Ix),y.rXU(te.p),y.rXU(y.gRc))};static#t=this.\u0275cmp=y.VBU({type:Me,selectors:[["app-header"]],standalone:!0,features:[y.aNF],decls:21,vars:8,consts:[["class","menu-icon",3,"click",4,"ngIf"],["class","sidebar",4,"ngIf"],[1,"header-container"],["routerLink","/products"],[1,"dropdown-container"],[3,"click"],["class","dropdown",4,"ngIf"],["src","assets/down-arrow.png","alt","img",3,"click"],[3,"click",4,"ngIf"],[1,"cart",3,"userEmail","showCart"],["src","assets/logout.png","alt","img",3,"click",4,"ngIf"],["src","assets/shopping-cart.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click",4,"ngIf"],[1,"menu-icon",3,"click"],["src","assets/menu-bar.png","alt","img"],[1,"sidebar"],[1,"sidebar-content"],[1,"sections"],[1,"categories"],[1,"cnt"],["src","assets/logout.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click"],[1,"dropdown"]],template:function(We,$e){1&We&&(y.DNE(0,be,2,0,"div",0)(1,Re,25,4,"nav",1),y.j41(2,"div",2)(3,"div")(4,"span",3),y.EFF(5,"SABAMUSIC."),y.k0s(),y.j41(6,"div",4)(7,"span",5),y.bIt("click",function(){return $e.changeDropDown()}),y.EFF(8,"Products "),y.DNE(9,_e,11,0,"div",6),y.k0s(),y.j41(10,"img",7),y.bIt("click",function(){return $e.changeDropDown()}),y.k0s()(),y.j41(11,"span",5),y.bIt("click",function(){return $e.navigate("contact")}),y.EFF(12,"Contact"),y.k0s(),y.j41(13,"span",5),y.bIt("click",function(){return $e.navigate("about-us")}),y.EFF(14,"About Us"),y.k0s(),y.DNE(15,ve,2,0,"span",8),y.nrm(16,"app-cart",9),y.k0s(),y.j41(17,"div"),y.DNE(18,ze,1,0,"img",10),y.j41(19,"img",11),y.bIt("click",function(){return $e.openCloseCart()}),y.k0s(),y.DNE(20,Ct,1,0,"img",12),y.k0s()()),2&We&&(y.Y8G("ngIf",$e.showsSidebar2),y.R7$(),y.Y8G("ngIf",$e.showsSidebar),y.R7$(8),y.Y8G("ngIf",$e.dropDown),y.R7$(6),y.Y8G("ngIf",!$e.user),y.R7$(),y.Y8G("userEmail",null==$e.user||null==$e.user.user?null:$e.user.user.email)("showCart",$e.cart),y.R7$(2),y.Y8G("ngIf",$e.user),y.R7$(2),y.Y8G("ngIf",$e.user))},dependencies:[T.MD,T.bT,_.iI,_.Wk,R.K],styles:[".header-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:160px;margin-bottom:40px;position:sticky;top:5px;z-index:2}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:60%;display:flex;justify-content:space-between;align-items:center}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child{display:flex;align-items:center;gap:10px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child > input[_ngcontent-%COMP%]{height:20px;border:none;background-color:#f3ecec;border-radius:3px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   .cart[_ngcontent-%COMP%]{position:absolute;top:80px;right:100px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:26px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:relative;font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%]{z-index:3;display:flex;flex-direction:column;position:absolute;top:30px;gap:5px;z-index:1}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:flex;gap:20px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   img[_ngcontent-%COMP%]{width:26px;height:26px;cursor:pointer}.menu-icon[_ngcontent-%COMP%]{padding:20px;display:none;align-items:center;position:absolute;position:sticky;top:20px;z-index:10;gap:10px}.menu-icon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}.menu-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.sidebar[_ngcontent-%COMP%]{display:none}nav[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]{background-color:#fff;border-radius:0 6px 6px 0;position:absolute;position:sticky;top:0;left:0;bottom:0;width:330px;box-shadow:8px 8px 18px #00000030;z-index:5;height:500px}nav[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{width:100%}nav[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}nav[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{width:100%;height:1.5rem;padding-right:.4rem;display:flex;flex-flow:row nowrap;align-items:center;justify-content:flex-end}nav[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.99rem}nav[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   span.close[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   span.close[_ngcontent-%COMP%]{opacity:0}nav[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover, .sidebar[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#00f}nav[_ngcontent-%COMP%]:hover   .sidebar-content[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .sidebar[_ngcontent-%COMP%]:hover   .sidebar-content[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1}.sections[_ngcontent-%COMP%]{margin-left:2rem;margin-top:2rem}.sections[_ngcontent-%COMP%] > .categories[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.sections[_ngcontent-%COMP%] > .categories[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px}.sections[_ngcontent-%COMP%] > .cnt[_ngcontent-%COMP%]{display:flex;gap:10px}@media only screen and (max-width: 1000px){.header-container[_ngcontent-%COMP%]{display:none}.sidebar[_ngcontent-%COMP%]{display:block;position:absolute}.menu-icon[_ngcontent-%COMP%]{display:flex}}"],changeDetection:0})}return Me})()},513:(sn,Ke,k)=>{k.r(Ke),k.d(Ke,{LoginAndRegistrationModule:()=>Ky});var _=k(177),T=k(9417),R=k(1182),y=k(4438),te=k(1825),be=k(9253),fe=k(3236),Le=k(1985),Re=k(8455),_e=k(7673),ve=k(9172),ze=k(9974),Ct=k(4360);function ht(){return(0,ze.N)((a,t)=>{let r,o=!1;a.subscribe((0,Ct._)(t,u=>{const d=r;r=u,o&&t.next([d,u]),o=!0}))})}var Me=k(6354),ct=k(2816),Ue=k(3669);function $e(a,t){return a===t}var Jt,St,Pt=k(5964),Ee=(k(2438),k(3345)),oe=k(467),Ye=k(7852),Je=k(1362),Mt=k(8041),ie=k(1076),je=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},He={};(function(){var a;function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(rt,Ae,Ge){Ge||(Ge=0);var st=Array(16);if("string"==typeof Ae)for(var lt=0;16>lt;++lt)st[lt]=Ae.charCodeAt(Ge++)|Ae.charCodeAt(Ge++)<<8|Ae.charCodeAt(Ge++)<<16|Ae.charCodeAt(Ge++)<<24;else for(lt=0;16>lt;++lt)st[lt]=Ae[Ge++]|Ae[Ge++]<<8|Ae[Ge++]<<16|Ae[Ge++]<<24;var Tt=rt.g[3],Be=(Ae=rt.g[0])+(Tt^(Ge=rt.g[1])&((lt=rt.g[2])^Tt))+st[0]+3614090360&4294967295;Be=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=(Ge=(lt=(Tt=(Ae=Ge+(Be<<7&4294967295|Be>>>25))+((Be=Tt+(lt^Ae&(Ge^lt))+st[1]+3905402710&4294967295)<<12&4294967295|Be>>>20))+((Be=lt+(Ge^Tt&(Ae^Ge))+st[2]+606105819&4294967295)<<17&4294967295|Be>>>15))+((Be=Ge+(Ae^lt&(Tt^Ae))+st[3]+3250441966&4294967295)<<22&4294967295|Be>>>10))+((Be=Ae+(Tt^Ge&(lt^Tt))+st[4]+4118548399&4294967295)<<7&4294967295|Be>>>25))+((Be=Tt+(lt^Ae&(Ge^lt))+st[5]+1200080426&4294967295)<<12&4294967295|Be>>>20))+((Be=lt+(Ge^Tt&(Ae^Ge))+st[6]+2821735955&4294967295)<<17&4294967295|Be>>>15))+((Be=Ge+(Ae^lt&(Tt^Ae))+st[7]+4249261313&4294967295)<<22&4294967295|Be>>>10))+((Be=Ae+(Tt^Ge&(lt^Tt))+st[8]+1770035416&4294967295)<<7&4294967295|Be>>>25))+((Be=Tt+(lt^Ae&(Ge^lt))+st[9]+2336552879&4294967295)<<12&4294967295|Be>>>20))+((Be=lt+(Ge^Tt&(Ae^Ge))+st[10]+4294925233&4294967295)<<17&4294967295|Be>>>15))+((Be=Ge+(Ae^lt&(Tt^Ae))+st[11]+2304563134&4294967295)<<22&4294967295|Be>>>10))+((Be=Ae+(Tt^Ge&(lt^Tt))+st[12]+1804603682&4294967295)<<7&4294967295|Be>>>25))+((Be=Tt+(lt^Ae&(Ge^lt))+st[13]+4254626195&4294967295)<<12&4294967295|Be>>>20))+((Be=lt+(Ge^Tt&(Ae^Ge))+st[14]+2792965006&4294967295)<<17&4294967295|Be>>>15))+((Be=Ge+(Ae^lt&(Tt^Ae))+st[15]+1236535329&4294967295)<<22&4294967295|Be>>>10))+((Be=Ae+(lt^Tt&(Ge^lt))+st[1]+4129170786&4294967295)<<5&4294967295|Be>>>27))+((Be=Tt+(Ge^lt&(Ae^Ge))+st[6]+3225465664&4294967295)<<9&4294967295|Be>>>23))+((Be=lt+(Ae^Ge&(Tt^Ae))+st[11]+643717713&4294967295)<<14&4294967295|Be>>>18))+((Be=Ge+(Tt^Ae&(lt^Tt))+st[0]+3921069994&4294967295)<<20&4294967295|Be>>>12))+((Be=Ae+(lt^Tt&(Ge^lt))+st[5]+3593408605&4294967295)<<5&4294967295|Be>>>27))+((Be=Tt+(Ge^lt&(Ae^Ge))+st[10]+38016083&4294967295)<<9&4294967295|Be>>>23))+((Be=lt+(Ae^Ge&(Tt^Ae))+st[15]+3634488961&4294967295)<<14&4294967295|Be>>>18))+((Be=Ge+(Tt^Ae&(lt^Tt))+st[4]+3889429448&4294967295)<<20&4294967295|Be>>>12))+((Be=Ae+(lt^Tt&(Ge^lt))+st[9]+568446438&4294967295)<<5&4294967295|Be>>>27))+((Be=Tt+(Ge^lt&(Ae^Ge))+st[14]+3275163606&4294967295)<<9&4294967295|Be>>>23))+((Be=lt+(Ae^Ge&(Tt^Ae))+st[3]+4107603335&4294967295)<<14&4294967295|Be>>>18))+((Be=Ge+(Tt^Ae&(lt^Tt))+st[8]+1163531501&4294967295)<<20&4294967295|Be>>>12))+((Be=Ae+(lt^Tt&(Ge^lt))+st[13]+2850285829&4294967295)<<5&4294967295|Be>>>27))+((Be=Tt+(Ge^lt&(Ae^Ge))+st[2]+4243563512&4294967295)<<9&4294967295|Be>>>23))+((Be=lt+(Ae^Ge&(Tt^Ae))+st[7]+1735328473&4294967295)<<14&4294967295|Be>>>18))+((Be=Ge+(Tt^Ae&(lt^Tt))+st[12]+2368359562&4294967295)<<20&4294967295|Be>>>12))+((Be=Ae+(Ge^lt^Tt)+st[5]+4294588738&4294967295)<<4&4294967295|Be>>>28))+((Be=Tt+(Ae^Ge^lt)+st[8]+2272392833&4294967295)<<11&4294967295|Be>>>21))+((Be=lt+(Tt^Ae^Ge)+st[11]+1839030562&4294967295)<<16&4294967295|Be>>>16))+((Be=Ge+(lt^Tt^Ae)+st[14]+4259657740&4294967295)<<23&4294967295|Be>>>9))+((Be=Ae+(Ge^lt^Tt)+st[1]+2763975236&4294967295)<<4&4294967295|Be>>>28))+((Be=Tt+(Ae^Ge^lt)+st[4]+1272893353&4294967295)<<11&4294967295|Be>>>21))+((Be=lt+(Tt^Ae^Ge)+st[7]+4139469664&4294967295)<<16&4294967295|Be>>>16))+((Be=Ge+(lt^Tt^Ae)+st[10]+3200236656&4294967295)<<23&4294967295|Be>>>9))+((Be=Ae+(Ge^lt^Tt)+st[13]+681279174&4294967295)<<4&4294967295|Be>>>28))+((Be=Tt+(Ae^Ge^lt)+st[0]+3936430074&4294967295)<<11&4294967295|Be>>>21))+((Be=lt+(Tt^Ae^Ge)+st[3]+3572445317&4294967295)<<16&4294967295|Be>>>16))+((Be=Ge+(lt^Tt^Ae)+st[6]+76029189&4294967295)<<23&4294967295|Be>>>9))+((Be=Ae+(Ge^lt^Tt)+st[9]+3654602809&4294967295)<<4&4294967295|Be>>>28))+((Be=Tt+(Ae^Ge^lt)+st[12]+3873151461&4294967295)<<11&4294967295|Be>>>21))+((Be=lt+(Tt^Ae^Ge)+st[15]+530742520&4294967295)<<16&4294967295|Be>>>16))+((Be=Ge+(lt^Tt^Ae)+st[2]+3299628645&4294967295)<<23&4294967295|Be>>>9))+((Be=Ae+(lt^(Ge|~Tt))+st[0]+4096336452&4294967295)<<6&4294967295|Be>>>26))+((Be=Tt+(Ge^(Ae|~lt))+st[7]+1126891415&4294967295)<<10&4294967295|Be>>>22))+((Be=lt+(Ae^(Tt|~Ge))+st[14]+2878612391&4294967295)<<15&4294967295|Be>>>17))+((Be=Ge+(Tt^(lt|~Ae))+st[5]+4237533241&4294967295)<<21&4294967295|Be>>>11))+((Be=Ae+(lt^(Ge|~Tt))+st[12]+1700485571&4294967295)<<6&4294967295|Be>>>26))+((Be=Tt+(Ge^(Ae|~lt))+st[3]+2399980690&4294967295)<<10&4294967295|Be>>>22))+((Be=lt+(Ae^(Tt|~Ge))+st[10]+4293915773&4294967295)<<15&4294967295|Be>>>17))+((Be=Ge+(Tt^(lt|~Ae))+st[1]+2240044497&4294967295)<<21&4294967295|Be>>>11))+((Be=Ae+(lt^(Ge|~Tt))+st[8]+1873313359&4294967295)<<6&4294967295|Be>>>26))+((Be=Tt+(Ge^(Ae|~lt))+st[15]+4264355552&4294967295)<<10&4294967295|Be>>>22))+((Be=lt+(Ae^(Tt|~Ge))+st[6]+2734768916&4294967295)<<15&4294967295|Be>>>17))+((Be=Ge+(Tt^(lt|~Ae))+st[13]+1309151649&4294967295)<<21&4294967295|Be>>>11))+((Tt=(Ae=Ge+((Be=Ae+(lt^(Ge|~Tt))+st[4]+4149444226&4294967295)<<6&4294967295|Be>>>26))+((Be=Tt+(Ge^(Ae|~lt))+st[11]+3174756917&4294967295)<<10&4294967295|Be>>>22))^((lt=Tt+((Be=lt+(Ae^(Tt|~Ge))+st[2]+718787259&4294967295)<<15&4294967295|Be>>>17))|~Ae))+st[9]+3951481745&4294967295,rt.g[0]=rt.g[0]+Ae&4294967295,rt.g[1]=rt.g[1]+(lt+(Be<<21&4294967295|Be>>>11))&4294967295,rt.g[2]=rt.g[2]+lt&4294967295,rt.g[3]=rt.g[3]+Tt&4294967295}function m(rt,Ae){this.h=Ae;for(var Ge=[],st=!0,lt=rt.length-1;0<=lt;lt--){var Tt=0|rt[lt];st&&Tt==Ae||(Ge[lt]=Tt,st=!1)}this.g=Ge}(function t(rt,Ae){function Ge(){}Ge.prototype=Ae.prototype,rt.D=Ae.prototype,rt.prototype=new Ge,rt.prototype.constructor=rt,rt.C=function(st,lt,Tt){for(var Be=Array(arguments.length-2),Bc=2;Bc<arguments.length;Bc++)Be[Bc-2]=arguments[Bc];return Ae.prototype[lt].apply(st,Be)}})(o,function r(){this.blockSize=-1}),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},o.prototype.u=function(rt,Ae){void 0===Ae&&(Ae=rt.length);for(var Ge=Ae-this.blockSize,st=this.B,lt=this.h,Tt=0;Tt<Ae;){if(0==lt)for(;Tt<=Ge;)u(this,rt,Tt),Tt+=this.blockSize;if("string"==typeof rt){for(;Tt<Ae;)if(st[lt++]=rt.charCodeAt(Tt++),lt==this.blockSize){u(this,st),lt=0;break}}else for(;Tt<Ae;)if(st[lt++]=rt[Tt++],lt==this.blockSize){u(this,st),lt=0;break}}this.h=lt,this.o+=Ae},o.prototype.v=function(){var rt=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);rt[0]=128;for(var Ae=1;Ae<rt.length-8;++Ae)rt[Ae]=0;var Ge=8*this.o;for(Ae=rt.length-8;Ae<rt.length;++Ae)rt[Ae]=255&Ge,Ge/=256;for(this.u(rt),rt=Array(16),Ae=Ge=0;4>Ae;++Ae)for(var st=0;32>st;st+=8)rt[Ge++]=this.g[Ae]>>>st&255;return rt};var b={};function F(rt){return-128<=rt&&128>rt?function d(rt,Ae){var Ge=b;return Object.prototype.hasOwnProperty.call(Ge,rt)?Ge[rt]:Ge[rt]=Ae(rt)}(rt,function(Ae){return new m([0|Ae],0>Ae?-1:0)}):new m([0|rt],0>rt?-1:0)}function $(rt){if(isNaN(rt)||!isFinite(rt))return pe;if(0>rt)return Qt($(-rt));for(var Ae=[],Ge=1,st=0;rt>=Ge;st++)Ae[st]=rt/Ge|0,Ge*=4294967296;return new m(Ae,0)}var pe=F(0),Oe=F(1),ut=F(16777216);function Ht(rt){if(0!=rt.h)return!1;for(var Ae=0;Ae<rt.g.length;Ae++)if(0!=rt.g[Ae])return!1;return!0}function nn(rt){return-1==rt.h}function Qt(rt){for(var Ae=rt.g.length,Ge=[],st=0;st<Ae;st++)Ge[st]=~rt.g[st];return new m(Ge,~rt.h).add(Oe)}function Vn(rt,Ae){return rt.add(Qt(Ae))}function Xn(rt,Ae){for(;(65535&rt[Ae])!=rt[Ae];)rt[Ae+1]+=rt[Ae]>>>16,rt[Ae]&=65535,Ae++}function kn(rt,Ae){this.g=rt,this.h=Ae}function cr(rt,Ae){if(Ht(Ae))throw Error("division by zero");if(Ht(rt))return new kn(pe,pe);if(nn(rt))return Ae=cr(Qt(rt),Ae),new kn(Qt(Ae.g),Qt(Ae.h));if(nn(Ae))return Ae=cr(rt,Qt(Ae)),new kn(Qt(Ae.g),Ae.h);if(30<rt.g.length){if(nn(rt)||nn(Ae))throw Error("slowDivide_ only works with positive integers.");for(var Ge=Oe,st=Ae;0>=st.l(rt);)Ge=Br(Ge),st=Br(st);var lt=br(Ge,1),Tt=br(st,1);for(st=br(st,2),Ge=br(Ge,2);!Ht(st);){var Be=Tt.add(st);0>=Be.l(rt)&&(lt=lt.add(Ge),Tt=Be),st=br(st,1),Ge=br(Ge,1)}return Ae=Vn(rt,lt.j(Ae)),new kn(lt,Ae)}for(lt=pe;0<=rt.l(Ae);){for(Ge=Math.max(1,Math.floor(rt.m()/Ae.m())),st=48>=(st=Math.ceil(Math.log(Ge)/Math.LN2))?1:Math.pow(2,st-48),Be=(Tt=$(Ge)).j(Ae);nn(Be)||0<Be.l(rt);)Be=(Tt=$(Ge-=st)).j(Ae);Ht(Tt)&&(Tt=Oe),lt=lt.add(Tt),rt=Vn(rt,Be)}return new kn(lt,rt)}function Br(rt){for(var Ae=rt.g.length+1,Ge=[],st=0;st<Ae;st++)Ge[st]=rt.i(st)<<1|rt.i(st-1)>>>31;return new m(Ge,rt.h)}function br(rt,Ae){var Ge=Ae>>5;Ae%=32;for(var st=rt.g.length-Ge,lt=[],Tt=0;Tt<st;Tt++)lt[Tt]=0<Ae?rt.i(Tt+Ge)>>>Ae|rt.i(Tt+Ge+1)<<32-Ae:rt.i(Tt+Ge);return new m(lt,rt.h)}(a=m.prototype).m=function(){if(nn(this))return-Qt(this).m();for(var rt=0,Ae=1,Ge=0;Ge<this.g.length;Ge++){var st=this.i(Ge);rt+=(0<=st?st:4294967296+st)*Ae,Ae*=4294967296}return rt},a.toString=function(rt){if(2>(rt=rt||10)||36<rt)throw Error("radix out of range: "+rt);if(Ht(this))return"0";if(nn(this))return"-"+Qt(this).toString(rt);for(var Ae=$(Math.pow(rt,6)),Ge=this,st="";;){var lt=cr(Ge,Ae).g,Tt=((0<(Ge=Vn(Ge,lt.j(Ae))).g.length?Ge.g[0]:Ge.h)>>>0).toString(rt);if(Ht(Ge=lt))return Tt+st;for(;6>Tt.length;)Tt="0"+Tt;st=Tt+st}},a.i=function(rt){return 0>rt?0:rt<this.g.length?this.g[rt]:this.h},a.l=function(rt){return nn(rt=Vn(this,rt))?-1:Ht(rt)?0:1},a.abs=function(){return nn(this)?Qt(this):this},a.add=function(rt){for(var Ae=Math.max(this.g.length,rt.g.length),Ge=[],st=0,lt=0;lt<=Ae;lt++){var Tt=st+(65535&this.i(lt))+(65535&rt.i(lt)),Be=(Tt>>>16)+(this.i(lt)>>>16)+(rt.i(lt)>>>16);st=Be>>>16,Ge[lt]=(Be&=65535)<<16|(Tt&=65535)}return new m(Ge,-2147483648&Ge[Ge.length-1]?-1:0)},a.j=function(rt){if(Ht(this)||Ht(rt))return pe;if(nn(this))return nn(rt)?Qt(this).j(Qt(rt)):Qt(Qt(this).j(rt));if(nn(rt))return Qt(this.j(Qt(rt)));if(0>this.l(ut)&&0>rt.l(ut))return $(this.m()*rt.m());for(var Ae=this.g.length+rt.g.length,Ge=[],st=0;st<2*Ae;st++)Ge[st]=0;for(st=0;st<this.g.length;st++)for(var lt=0;lt<rt.g.length;lt++){var Tt=this.i(st)>>>16,Be=65535&this.i(st),Bc=rt.i(lt)>>>16,sd=65535&rt.i(lt);Ge[2*st+2*lt]+=Be*sd,Xn(Ge,2*st+2*lt),Ge[2*st+2*lt+1]+=Tt*sd,Xn(Ge,2*st+2*lt+1),Ge[2*st+2*lt+1]+=Be*Bc,Xn(Ge,2*st+2*lt+1),Ge[2*st+2*lt+2]+=Tt*Bc,Xn(Ge,2*st+2*lt+2)}for(st=0;st<Ae;st++)Ge[st]=Ge[2*st+1]<<16|Ge[2*st];for(st=Ae;st<2*Ae;st++)Ge[st]=0;return new m(Ge,0)},a.A=function(rt){return cr(this,rt).h},a.and=function(rt){for(var Ae=Math.max(this.g.length,rt.g.length),Ge=[],st=0;st<Ae;st++)Ge[st]=this.i(st)&rt.i(st);return new m(Ge,this.h&rt.h)},a.or=function(rt){for(var Ae=Math.max(this.g.length,rt.g.length),Ge=[],st=0;st<Ae;st++)Ge[st]=this.i(st)|rt.i(st);return new m(Ge,this.h|rt.h)},a.xor=function(rt){for(var Ae=Math.max(this.g.length,rt.g.length),Ge=[],st=0;st<Ae;st++)Ge[st]=this.i(st)^rt.i(st);return new m(Ge,this.h^rt.h)},o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,St=He.Md5=o,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.A,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=$,m.fromString=function re(rt,Ae){if(0==rt.length)throw Error("number format error: empty string");if(2>(Ae=Ae||10)||36<Ae)throw Error("radix out of range: "+Ae);if("-"==rt.charAt(0))return Qt(re(rt.substring(1),Ae));if(0<=rt.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ge=$(Math.pow(Ae,8)),st=pe,lt=0;lt<rt.length;lt+=8){var Tt=Math.min(8,rt.length-lt),Be=parseInt(rt.substring(lt,lt+Tt),Ae);8>Tt?(Tt=$(Math.pow(Ae,Tt)),st=st.j(Tt).add($(Be))):st=(st=st.j(Ge)).add($(Be))}return st},Jt=He.Integer=m}).apply(typeof je<"u"?je:typeof self<"u"?self:typeof window<"u"?window:{});var at,tn,Pe,Qe,ft,yt,It,tt,Kt,un=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lt={};(function(){var a,t="function"==typeof Object.defineProperties?Object.defineProperty:function(g,V,G){return g==Array.prototype||g==Object.prototype||(g[V]=G.value),g},o=function r(g){g=["object"==typeof globalThis&&globalThis,g,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof un&&un];for(var V=0;V<g.length;++V){var G=g[V];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}(this);!function u(g,V){if(V)e:{var G=o;g=g.split(".");for(var le=0;le<g.length-1;le++){var gt=g[le];if(!(gt in G))break e;G=G[gt]}(V=V(le=G[g=g[g.length-1]]))!=le&&null!=V&&t(G,g,{configurable:!0,writable:!0,value:V})}}("Array.prototype.values",function(g){return g||function(){return function d(g,V){g instanceof String&&(g+="");var G=0,le=!1,gt={next:function(){if(!le&&G<g.length){var kt=G++;return{value:V(kt,g[kt]),done:!1}}return le=!0,{done:!0,value:void 0}}};return gt[Symbol.iterator]=function(){return gt},gt}(this,function(V,G){return G})}});var m=m||{},b=this||self;function F(g){var V=typeof g;return"array"==(V="object"!=V?V:g?Array.isArray(g)?"array":V:"null")||"object"==V&&"number"==typeof g.length}function $(g){var V=typeof g;return"object"==V&&null!=g||"function"==V}function re(g,V,G){return g.call.apply(g.bind,arguments)}function pe(g,V,G){if(!g)throw Error();if(2<arguments.length){var le=Array.prototype.slice.call(arguments,2);return function(){var gt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(gt,le),g.apply(V,gt)}}return function(){return g.apply(V,arguments)}}function Oe(g,V,G){return(Oe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?re:pe).apply(null,arguments)}function ut(g,V){var G=Array.prototype.slice.call(arguments,1);return function(){var le=G.slice();return le.push.apply(le,arguments),g.apply(this,le)}}function Ht(g,V){function G(){}G.prototype=V.prototype,g.aa=V.prototype,g.prototype=new G,g.prototype.constructor=g,g.Qb=function(le,gt,kt){for(var yn=Array(arguments.length-2),bi=2;bi<arguments.length;bi++)yn[bi-2]=arguments[bi];return V.prototype[gt].apply(le,yn)}}function nn(g){const V=g.length;if(0<V){const G=Array(V);for(let le=0;le<V;le++)G[le]=g[le];return G}return[]}function Qt(g,V){for(let G=1;G<arguments.length;G++){const le=arguments[G];if(F(le)){const gt=g.length||0,kt=le.length||0;g.length=gt+kt;for(let yn=0;yn<kt;yn++)g[gt+yn]=le[yn]}else g.push(le)}}function Xn(g){return/^[\s\xa0]*$/.test(g)}function kn(){var g=b.navigator;return g&&(g=g.userAgent)?g:""}function cr(g){return cr[" "](g),g}cr[" "]=function(){};var Br=!(-1==kn().indexOf("Gecko")||-1!=kn().toLowerCase().indexOf("webkit")&&-1==kn().indexOf("Edge")||-1!=kn().indexOf("Trident")||-1!=kn().indexOf("MSIE")||-1!=kn().indexOf("Edge"));function br(g,V,G){for(const le in g)V.call(G,g[le],le,g)}function Ae(g){const V={};for(const G in g)V[G]=g[G];return V}const Ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function st(g,V){let G,le;for(let gt=1;gt<arguments.length;gt++){for(G in le=arguments[gt],le)g[G]=le[G];for(let kt=0;kt<Ge.length;kt++)G=Ge[kt],Object.prototype.hasOwnProperty.call(le,G)&&(g[G]=le[G])}}function lt(g){var V=1;g=g.split(":");const G=[];for(;0<V&&g.length;)G.push(g.shift()),V--;return g.length&&G.push(g.join(":")),G}function Tt(g){b.setTimeout(()=>{throw g},0)}function Be(){var g=Am;let V=null;return g.g&&(V=g.g,g.g=g.g.next,g.g||(g.h=null),V.next=null),V}var sd=new class Vn{constructor(V,G){this.i=V,this.j=G,this.h=0,this.g=null}get(){let V;return 0<this.h?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}(()=>new vI,g=>g.reset());class vI{constructor(){this.next=this.g=this.h=null}set(V,G){this.h=V,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let od,tp=!1,Am=new class Bc{constructor(){this.h=this.g=null}add(V,G){const le=sd.get();le.set(V,G),this.h?this.h.next=le:this.g=le,this.h=le}},Ah=()=>{const g=b.Promise.resolve(void 0);od=()=>{g.then(qy)}};var qy=()=>{for(var g;g=Be();){try{g.h.call(g.g)}catch(G){Tt(G)}var V=sd;V.j(g),100>V.h&&(V.h++,g.next=V.g,V.g=g)}tp=!1};function _u(){this.s=this.s,this.C=this.C}function No(g,V){this.type=g,this.g=this.target=V,this.defaultPrevented=!1}_u.prototype.s=!1,_u.prototype.ma=function(){this.s||(this.s=!0,this.N())},_u.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},No.prototype.h=function(){this.defaultPrevented=!0};var EI=function(){if(!b.addEventListener||!Object.defineProperty)return!1;var g=!1,V=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const G=()=>{};b.addEventListener("test",G,V),b.removeEventListener("test",G,V)}catch{}return g}();function dl(g,V){if(No.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var G=this.type=g.type,le=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=V,V=g.relatedTarget){if(Br){e:{try{cr(V.nodeName);var gt=!0;break e}catch{}gt=!1}gt||(V=null)}}else"mouseover"==G?V=g.fromElement:"mouseout"==G&&(V=g.toElement);this.relatedTarget=V,le?(this.clientX=void 0!==le.clientX?le.clientX:le.pageX,this.clientY=void 0!==le.clientY?le.clientY:le.pageY,this.screenX=le.screenX||0,this.screenY=le.screenY||0):(this.clientX=void 0!==g.clientX?g.clientX:g.pageX,this.clientY=void 0!==g.clientY?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType="string"==typeof g.pointerType?g.pointerType:pC[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&dl.aa.h.call(this)}}Ht(dl,No);var pC={2:"touch",3:"pen",4:"mouse"};dl.prototype.h=function(){dl.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ad="closure_listenable_"+(1e6*Math.random()|0),Ec=0;function Qy(g,V,G,le,gt){this.listener=g,this.proxy=null,this.src=V,this.type=G,this.capture=!!le,this.ha=gt,this.key=++Ec,this.da=this.fa=!1}function np(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function bm(g){this.src=g,this.g={},this.h=0}function ws(g,V){var G=V.type;if(G in g.g){var kt,le=g.g[G],gt=Array.prototype.indexOf.call(le,V,void 0);(kt=0<=gt)&&Array.prototype.splice.call(le,gt,1),kt&&(np(V),0==g.g[G].length&&(delete g.g[G],g.h--))}}function Sm(g,V,G,le){for(var gt=0;gt<g.length;++gt){var kt=g[gt];if(!kt.da&&kt.listener==V&&kt.capture==!!G&&kt.ha==le)return gt}return-1}bm.prototype.add=function(g,V,G,le,gt){var kt=g.toString();(g=this.g[kt])||(g=this.g[kt]=[],this.h++);var yn=Sm(g,V,le,gt);return-1<yn?(V=g[yn],G||(V.fa=!1)):((V=new Qy(V,this.src,kt,!!le,gt)).fa=G,g.push(V)),V};var bh="closure_lm_"+(1e6*Math.random()|0),Pm={};function Xy(g,V,G,le,gt){if(le&&le.once)return Mm(g,V,G,le,gt);if(Array.isArray(V)){for(var kt=0;kt<V.length;kt++)Xy(g,V[kt],G,le,gt);return null}return G=Nm(G),g&&g[ad]?g.K(V,G,$(le)?!!le.capture:!!le,gt):rp(g,V,G,!1,le,gt)}function rp(g,V,G,le,gt,kt){if(!V)throw Error("Invalid event type");var yn=$(gt)?!!gt.capture:!!gt,bi=ip(g);if(bi||(g[bh]=bi=new bm(g)),(G=bi.add(V,G,le,yn,kt)).proxy)return G;if(le=function Yy(){const V=hl;return function g(G){return V.call(g.src,g.listener,G)}}(),G.proxy=le,le.src=g,le.listener=G,g.addEventListener)EI||(gt=yn),void 0===gt&&(gt=!1),g.addEventListener(V.toString(),le,gt);else if(g.attachEvent)g.attachEvent(Jy(V.toString()),le);else{if(!g.addListener||!g.removeListener)throw Error("addEventListener and attachEvent are unavailable.");g.addListener(le)}return G}function Mm(g,V,G,le,gt){if(Array.isArray(V)){for(var kt=0;kt<V.length;kt++)Mm(g,V[kt],G,le,gt);return null}return G=Nm(G),g&&g[ad]?g.L(V,G,$(le)?!!le.capture:!!le,gt):rp(g,V,G,!0,le,gt)}function Rm(g,V,G,le,gt){if(Array.isArray(V))for(var kt=0;kt<V.length;kt++)Rm(g,V[kt],G,le,gt);else le=$(le)?!!le.capture:!!le,G=Nm(G),g&&g[ad]?(g=g.i,(V=String(V).toString())in g.g&&-1<(G=Sm(kt=g.g[V],G,le,gt))&&(np(kt[G]),Array.prototype.splice.call(kt,G,1),0==kt.length&&(delete g.g[V],g.h--))):g&&(g=ip(g))&&(V=g.g[V.toString()],g=-1,V&&(g=Sm(V,G,le,gt)),(G=-1<g?V[g]:null)&&Om(G))}function Om(g){if("number"!=typeof g&&g&&!g.da){var V=g.src;if(V&&V[ad])ws(V.i,g);else{var G=g.type,le=g.proxy;V.removeEventListener?V.removeEventListener(G,le,g.capture):V.detachEvent?V.detachEvent(Jy(G),le):V.addListener&&V.removeListener&&V.removeListener(le),(G=ip(V))?(ws(G,g),0==G.h&&(G.src=null,V[bh]=null)):np(g)}}}function Jy(g){return g in Pm?Pm[g]:Pm[g]="on"+g}function hl(g,V){if(g.da)g=!0;else{V=new dl(V,this);var G=g.listener,le=g.ha||g.src;g.fa&&Om(g),g=G.call(le,V)}return g}function ip(g){return(g=g[bh])instanceof bm?g:null}var Sh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nm(g){return"function"==typeof g?g:(g[Sh]||(g[Sh]=function(V){return g.handleEvent(V)}),g[Sh])}function po(){_u.call(this),this.i=new bm(this),this.M=this,this.F=null}function xo(g,V){var G,le=g.F;if(le)for(G=[];le;le=le.F)G.push(le);if(g=g.M,le=V.type||V,"string"==typeof V)V=new No(V,g);else if(V instanceof No)V.target=V.target||g;else{var gt=V;st(V=new No(le,g),gt)}if(gt=!0,G)for(var kt=G.length-1;0<=kt;kt--){var yn=V.g=G[kt];gt=Ph(yn,le,!0,V)&&gt}if(gt=Ph(yn=V.g=g,le,!0,V)&&gt,gt=Ph(yn,le,!1,V)&&gt,G)for(kt=0;kt<G.length;kt++)gt=Ph(yn=V.g=G[kt],le,!1,V)&&gt}function Ph(g,V,G,le){if(!(V=g.i.g[String(V)]))return!0;V=V.concat();for(var gt=!0,kt=0;kt<V.length;++kt){var yn=V[kt];if(yn&&!yn.da&&yn.capture==G){var bi=yn.listener,ko=yn.ha||yn.src;yn.fa&&ws(g.i,yn),gt=!1!==bi.call(ko,le)&&gt}}return gt&&!le.defaultPrevented}function cd(g,V,G){if("function"==typeof g)G&&(g=Oe(g,G));else{if(!g||"function"!=typeof g.handleEvent)throw Error("Invalid listener argument");g=Oe(g.handleEvent,g)}return 2147483647<Number(V)?-1:b.setTimeout(g,V||0)}function sp(g){g.g=cd(()=>{g.g=null,g.i&&(g.i=!1,sp(g))},g.l);const V=g.h;g.h=null,g.m.apply(null,V)}Ht(po,_u),po.prototype[ad]=!0,po.prototype.removeEventListener=function(g,V,G,le){Rm(this,g,V,G,le)},po.prototype.N=function(){if(po.aa.N.call(this),this.i){var V,g=this.i;for(V in g.g){for(var G=g.g[V],le=0;le<G.length;le++)np(G[le]);delete g.g[V],g.h--}}this.F=null},po.prototype.K=function(g,V,G,le){return this.i.add(String(g),V,!1,G,le)},po.prototype.L=function(g,V,G,le){return this.i.add(String(g),V,!0,G,le)};class yu extends _u{constructor(V,G){super(),this.m=V,this.l=G,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:sp(this)}N(){super.N(),this.g&&(b.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vu(g){_u.call(this),this.h=g,this.g={}}Ht(vu,_u);var xm=[];function ud(g){br(g.g,function(V,G){this.g.hasOwnProperty(G)&&Om(V)},g),g.g={}}vu.prototype.N=function(){vu.aa.N.call(this),ud(this)},vu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var km=b.JSON.stringify,II=b.JSON.parse,Fm=class{stringify(g){return b.JSON.stringify(g,void 0)}parse(g){return b.JSON.parse(g,void 0)}};function op(){}function ld(){}op.prototype.h=null;var ap={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dd(){No.call(this,"d")}function cp(){No.call(this,"c")}Ht(dd,No),Ht(cp,No);var Eu={},Zy=null;function fl(){return Zy=Zy||new po}function hd(g){No.call(this,Eu.La,g)}function Mh(g){const V=fl();xo(V,new hd(V))}function ev(g,V){No.call(this,Eu.STAT_EVENT,g),this.stat=V}function Qo(g){const V=fl();xo(V,new ev(V,g))}function tv(g,V){No.call(this,Eu.Ma,g),this.size=V}function Rh(g,V){if("function"!=typeof g)throw Error("Fn must not be null and must be a function");return b.setTimeout(function(){g()},V)}function Oh(){this.g=!0}function $c(g,V,G,le){g.info(function(){return"XMLHTTP TEXT ("+V+"): "+function DI(g,V){if(!g.g)return V;if(!V)return null;try{var G=JSON.parse(V);if(G)for(g=0;g<G.length;g++)if(Array.isArray(G[g])){var le=G[g];if(!(2>le.length)){var gt=le[1];if(Array.isArray(gt)&&!(1>gt.length)){var kt=gt[0];if("noop"!=kt&&"stop"!=kt&&"close"!=kt)for(var yn=1;yn<gt.length;yn++)gt[yn]=""}}}return km(G)}catch{return V}}(g,G)+(le?" "+le:"")})}Eu.La="serverreachability",Ht(hd,No),Eu.STAT_EVENT="statevent",Ht(ev,No),Eu.Ma="timingevent",Ht(tv,No),Oh.prototype.xa=function(){this.g=!1},Oh.prototype.info=function(){};var xh,Nh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function kh(){}function Iu(g,V,G,le){this.j=g,this.i=V,this.l=G,this.R=le||1,this.U=new vu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lm}function Lm(){this.i=null,this.g="",this.h=!1}Ht(kh,op),kh.prototype.g=function(){return new XMLHttpRequest},kh.prototype.i=function(){return{}},xh=new kh;var up={},lp={};function dp(g,V,G){g.L=1,g.v=Lh(Ic(V)),g.m=G,g.P=!0,nv(g,null)}function nv(g,V){g.F=Date.now(),fd(g),g.A=Ic(g.v);var G=g.A,le=g.R;Array.isArray(le)||(le=[String(le)]),OI(G.i,"t",le),g.C=0,G=g.j.J,g.h=new Lm,g.g=wv(g.j,G?V:null,!g.m),0<g.O&&(g.M=new yu(Oe(g.Y,g,g.g),g.O)),V=g.U,G=g.g,le=g.ca;var gt="readystatechange";Array.isArray(gt)||(gt&&(xm[0]=gt.toString()),gt=xm);for(var kt=0;kt<gt.length;kt++){var yn=Xy(G,gt[kt],le||V.handleEvent,!1,V.h||V);if(!yn)break;V.g[yn.key]=yn}V=g.H?Ae(g.H):{},g.m?(g.u||(g.u="POST"),V["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,V)):(g.u="GET",g.g.ea(g.A,g.u,null,V)),Mh(),function CI(g,V,G,le,gt,kt){g.info(function(){if(g.g)if(kt)for(var yn="",bi=kt.split("&"),ko=0;ko<bi.length;ko++){var yi=bi[ko].split("=");if(1<yi.length){var Fo=yi[0];yi=yi[1];var Xo=Fo.split("_");yn=2<=Xo.length&&"type"==Xo[1]?yn+(Fo+"=")+yi+"&":yn+(Fo+"=redacted&")}}else yn=null;else yn=kt;return"XMLHTTP REQ ("+le+") [attempt "+gt+"]: "+V+"\n"+G+"\n"+yn})}(g.i,g.u,g.A,g.l,g.R,g.m)}function rv(g){return!!g.g&&"GET"==g.u&&2!=g.L&&g.j.Ca}function AI(g,V){var G=g.C,le=V.indexOf("\n",G);return-1==le?lp:(G=Number(V.substring(G,le)),isNaN(G)?up:(le+=1)+G>V.length?lp:(V=V.slice(le,le+G),g.C=le+G,V))}function fd(g){g.S=Date.now()+g.I,hp(g,g.I)}function hp(g,V){if(null!=g.B)throw Error("WatchDog timer not null");g.B=Rh(Oe(g.ba,g),V)}function fp(g){g.B&&(b.clearTimeout(g.B),g.B=null)}function pl(g){0==g.j.G||g.J||Iv(g.j,g)}function Hc(g){fp(g);var V=g.M;V&&"function"==typeof V.ma&&V.ma(),g.M=null,ud(g.U),g.g&&(V=g.g,g.g=null,V.abort(),V.ma())}function Um(g,V){try{var G=g.j;if(0!=G.G&&(G.g==g||Fh(G.h,g)))if(!g.K&&Fh(G.h,g)&&3==G.G){try{var le=G.Da.g.parse(V)}catch{le=null}if(Array.isArray(le)&&3==le.length){var gt=le;if(0==gt[0]){e:if(!G.u){if(G.g){if(!(G.g.F+3e3<g.F))break e;Ip(G),$h(G)}Ym(G),Qo(18)}}else G.za=gt[1],0<G.za-G.T&&37500>gt[2]&&G.F&&0==G.v&&!G.C&&(G.C=Rh(Oe(G.Za,G),6e3));if(1>=Bm(G.h)&&G.ca){try{G.ca()}catch{}G.ca=void 0}}else yl(G,11)}else if((g.K||G.g==g)&&Ip(G),!Xn(V))for(gt=G.Da.g.parse(V),V=0;V<gt.length;V++){let yi=gt[V];if(G.T=yi[0],yi=yi[1],2==G.G)if("c"==yi[0]){G.K=yi[1],G.ia=yi[2];const Fo=yi[3];null!=Fo&&(G.la=Fo,G.j.info("VER="+G.la));const Xo=yi[4];null!=Xo&&(G.Aa=Xo,G.j.info("SVER="+G.Aa));const Ja=yi[5];null!=Ja&&"number"==typeof Ja&&0<Ja&&(G.L=le=1.5*Ja,G.j.info("backChannelRequestTimeoutMs_="+le)),le=G;const Cc=g.g;if(Cc){const vl=Cc.g?Cc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vl){var kt=le.h;kt.g||-1==vl.indexOf("spdy")&&-1==vl.indexOf("quic")&&-1==vl.indexOf("h2")||(kt.j=kt.l,kt.g=new Set,kt.h&&(Vh(kt,kt.h),kt.h=null))}if(le.D){const n_=Cc.g?Cc.g.getResponseHeader("X-HTTP-Session-Id"):null;n_&&(le.ya=n_,Yi(le.I,le.D,n_))}}G.G=3,G.l&&G.l.ua(),G.ba&&(G.R=Date.now()-g.F,G.j.info("Handshake RTT: "+G.R+"ms"));var yn=g;if((le=G).qa=e_(le,le.J?le.ia:null,le.W),yn.K){jm(le.h,yn);var bi=yn,ko=le.L;ko&&(bi.I=ko),bi.B&&(fp(bi),fd(bi)),le.g=yn}else Gh(le);0<G.i.length&&vp(G)}else"stop"!=yi[0]&&"close"!=yi[0]||yl(G,7);else 3==G.G&&("stop"==yi[0]||"close"==yi[0]?"stop"==yi[0]?yl(G,7):_v(G):"noop"!=yi[0]&&G.l&&G.l.ta(yi),G.v=0)}Mh()}catch{}}Iu.prototype.ca=function(g){g=g.target;const V=this.M;V&&3==Gc(g)?V.j():this.Y(g)},Iu.prototype.Y=function(g){try{if(g==this.g)e:{const Xo=Gc(this.g);var V=this.g.Ba();if(this.g.Z(),!(3>Xo)&&(3!=Xo||this.g&&(this.h.h||this.g.oa()||Bh(this.g)))){this.J||4!=Xo||7==V||Mh(),fp(this);var G=this.g.Z();this.X=G;t:if(rv(this)){var le=Bh(this.g);g="";var gt=le.length,kt=4==Gc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hc(this),pl(this);var yn="";break t}this.h.i=new b.TextDecoder}for(V=0;V<gt;V++)this.h.h=!0,g+=this.h.i.decode(le[V],{stream:!(kt&&V==gt-1)});le.length=0,this.h.g+=g,this.C=0,yn=this.h.g}else yn=this.g.oa();if(this.o=200==G,function wI(g,V,G,le,gt,kt,yn){g.info(function(){return"XMLHTTP RESP ("+le+") [ attempt "+gt+"]: "+V+"\n"+G+"\n"+kt+" "+yn})}(this.i,this.u,this.A,this.l,this.R,Xo,G),this.o){if(this.T&&!this.K){t:{if(this.g){var bi,ko=this.g;if((bi=ko.g?ko.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xn(bi)){var yi=bi;break t}}yi=null}if(!(G=yi)){this.o=!1,this.s=3,Qo(12),Hc(this),pl(this);break e}$c(this.i,this.l,G,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Um(this,G)}if(this.P){let Cc;for(G=!0;!this.J&&this.C<yn.length;){if(Cc=AI(this,yn),Cc==lp){4==Xo&&(this.s=4,Qo(14),G=!1),$c(this.i,this.l,null,"[Incomplete Response]");break}if(Cc==up){this.s=4,Qo(15),$c(this.i,this.l,yn,"[Invalid Chunk]"),G=!1;break}$c(this.i,this.l,Cc,null),Um(this,Cc)}if(rv(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Xo||0!=yn.length||this.h.h||(this.s=1,Qo(16),G=!1),this.o=this.o&&G,G){if(0<yn.length&&!this.W){this.W=!0;var Fo=this.j;Fo.g==this&&Fo.ba&&!Fo.M&&(Fo.j.info("Great, no buffering proxy detected. Bytes received: "+yn.length),Jm(Fo),Fo.M=!0,Qo(11))}}else $c(this.i,this.l,yn,"[Invalid Chunked Response]"),Hc(this),pl(this)}else $c(this.i,this.l,yn,null),Um(this,yn);4==Xo&&Hc(this),this.o&&!this.J&&(4==Xo?Iv(this.j,this):(this.o=!1,fd(this)))}else(function mv(g){const V={};g=(g.g&&2<=Gc(g)&&g.g.getAllResponseHeaders()||"").split("\r\n");for(let le=0;le<g.length;le++){if(Xn(g[le]))continue;var G=lt(g[le]);const gt=G[0];if("string"!=typeof(G=G[1]))continue;G=G.trim();const kt=V[gt]||[];V[gt]=kt,kt.push(G)}!function rt(g,V){for(const G in g)V.call(void 0,g[G],G,g)}(V,function(le){return le.join(", ")})})(this.g),400==G&&0<yn.indexOf("Unknown SID")?(this.s=3,Qo(12)):(this.s=0,Qo(13)),Hc(this),pl(this)}}}catch{}},Iu.prototype.cancel=function(){this.J=!0,Hc(this)},Iu.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(function TI(g,V){g.info(function(){return"TIMEOUT: "+V})}(this.i,this.A),2!=this.L&&(Mh(),Qo(17)),Hc(this),this.s=2,pl(this)):hp(this,this.S-g)};var bI=class{constructor(g,V){this.g=g,this.map=V}};function iv(g){this.l=g||10,g=b.PerformanceNavigationTiming?0<(g=b.performance.getEntriesByType("navigation")).length&&("hq"==g[0].nextHopProtocol||"h2"==g[0].nextHopProtocol):!!(b.chrome&&b.chrome.loadTimes&&b.chrome.loadTimes()&&b.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sv(g){return!!g.h||!!g.g&&g.g.size>=g.j}function Bm(g){return g.h?1:g.g?g.g.size:0}function Fh(g,V){return g.h?g.h==V:!!g.g&&g.g.has(V)}function Vh(g,V){g.g?g.g.add(V):g.h=V}function jm(g,V){g.h&&g.h==V?g.h=null:g.g&&g.g.has(V)&&g.g.delete(V)}function $m(g){if(null!=g.h)return g.i.concat(g.h.D);if(null!=g.g&&0!==g.g.size){let V=g.i;for(const G of g.g.values())V=V.concat(G.D);return V}return nn(g.i)}function Hm(g,V){if(g.forEach&&"function"==typeof g.forEach)g.forEach(V,void 0);else if(F(g)||"string"==typeof g)Array.prototype.forEach.call(g,V,void 0);else for(var G=function SI(g){if(g.na&&"function"==typeof g.na)return g.na();if(!g.V||"function"!=typeof g.V){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(F(g)||"string"==typeof g){var V=[];g=g.length;for(var G=0;G<g;G++)V.push(G);return V}V=[],G=0;for(const le in g)V[G++]=le;return V}}}(g),le=function ov(g){if(g.V&&"function"==typeof g.V)return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if("string"==typeof g)return g.split("");if(F(g)){for(var V=[],G=g.length,le=0;le<G;le++)V.push(g[le]);return V}for(le in V=[],G=0,g)V[G++]=g[le];return V}(g),gt=le.length,kt=0;kt<gt;kt++)V.call(void 0,le[kt],G&&G[kt],g)}iv.prototype.cancel=function(){if(this.i=$m(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const g of this.g.values())g.cancel();this.g.clear()}};var av=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cu(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Cu){this.h=g.h,zm(this,g.j),this.o=g.o,this.g=g.g,Wm(this,g.s),this.l=g.l;var V=g.i,G=new pp;G.i=V.i,V.g&&(G.g=new Map(V.g),G.h=V.h),cv(this,G),this.m=g.m}else g&&(V=String(g).match(av))?(this.h=!1,zm(this,V[1]||"",!0),this.o=gl(V[2]||""),this.g=gl(V[3]||"",!0),Wm(this,V[4]),this.l=gl(V[5]||"",!0),cv(this,V[6]||"",!0),this.m=gl(V[7]||"")):(this.h=!1,this.i=new pp(null,this.h))}function Ic(g){return new Cu(g)}function zm(g,V,G){g.j=G?gl(V,!0):V,g.j&&(g.j=g.j.replace(/:$/,""))}function Wm(g,V){if(V){if(V=Number(V),isNaN(V)||0>V)throw Error("Bad port number "+V);g.s=V}else g.s=null}function cv(g,V,G){V instanceof pp?(g.i=V,function dv(g,V){V&&!g.j&&(ml(g),g.i=null,g.g.forEach(function(G,le){var gt=le.toLowerCase();le!=gt&&(MI(this,le),OI(this,gt,G))},g)),g.j=V}(g.i,g.h)):(G||(V=pd(V,gC)),g.i=new pp(V,g.h))}function Yi(g,V,G){g.i.set(V,G)}function Lh(g){return Yi(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function gl(g,V){return g?V?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function pd(g,V,G){return"string"==typeof g?(g=encodeURI(g).replace(V,uv),G&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function uv(g){return"%"+((g=g.charCodeAt(0))>>4&15).toString(16)+(15&g).toString(16)}Cu.prototype.toString=function(){var g=[],V=this.j;V&&g.push(pd(V,Km,!0),":");var G=this.g;return(G||"file"==V)&&(g.push("//"),(V=this.o)&&g.push(pd(V,Km,!0),"@"),g.push(encodeURIComponent(String(G)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(G=this.s)&&g.push(":",String(G))),(G=this.l)&&(this.g&&"/"!=G.charAt(0)&&g.push("/"),g.push(pd(G,"/"==G.charAt(0)?PI:lv,!0))),(G=this.i.toString())&&g.push("?",G),(G=this.m)&&g.push("#",pd(G,mC)),g.join("")};var Km=/[#\/\?@]/g,lv=/[#\?:]/g,PI=/[#\?]/g,gC=/[#\?@]/g,mC=/#/g;function pp(g,V){this.h=this.g=null,this.i=g||null,this.j=!!V}function ml(g){g.g||(g.g=new Map,g.h=0,g.i&&function Gm(g,V){if(g){g=g.split("&");for(var G=0;G<g.length;G++){var le=g[G].indexOf("="),gt=null;if(0<=le){var kt=g[G].substring(0,le);gt=g[G].substring(le+1)}else kt=g[G];V(kt,gt?decodeURIComponent(gt.replace(/\+/g," ")):"")}}}(g.i,function(V,G){g.add(decodeURIComponent(V.replace(/\+/g," ")),G)}))}function MI(g,V){ml(g),V=Uh(g,V),g.g.has(V)&&(g.i=null,g.h-=g.g.get(V).length,g.g.delete(V))}function RI(g,V){return ml(g),V=Uh(g,V),g.g.has(V)}function OI(g,V,G){MI(g,V),0<G.length&&(g.i=null,g.g.set(Uh(g,V),nn(G)),g.h+=G.length)}function Uh(g,V){return V=String(V),g.j&&(V=V.toLowerCase()),V}function _l(g,V,G,le,gt){try{gt&&(gt.onload=null,gt.onerror=null,gt.onabort=null,gt.ontimeout=null),le(G)}catch{}}function yC(){this.g=new Fm}function vC(g,V,G){const le=G||"";try{Hm(g,function(gt,kt){let yn=gt;$(gt)&&(yn=km(gt)),V.push(le+kt+"="+encodeURIComponent(yn))})}catch(gt){throw V.push(le+"type="+encodeURIComponent("_badmap")),gt}}function gp(g){this.l=g.Ub||null,this.j=g.eb||!1}function qm(g,V){po.call(this),this.D=g,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function NI(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}function mp(g){g.readyState=4,g.l=null,g.j=null,g.v=null,_p(g)}function _p(g){g.onreadystatechange&&g.onreadystatechange.call(g)}function fv(g){let V="";return br(g,function(G,le){V+=le,V+=":",V+=G,V+="\r\n"}),V}function wu(g,V,G){e:{for(le in G){var le=!1;break e}le=!0}le||(G=fv(G),"string"==typeof g?null!=G&&encodeURIComponent(String(G)):Yi(g,V,G))}function Ji(g){po.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=pp.prototype).add=function(g,V){ml(this),this.i=null,g=Uh(this,g);var G=this.g.get(g);return G||this.g.set(g,G=[]),G.push(V),this.h+=1,this},a.forEach=function(g,V){ml(this),this.g.forEach(function(G,le){G.forEach(function(gt){g.call(V,gt,le,this)},this)},this)},a.na=function(){ml(this);const g=Array.from(this.g.values()),V=Array.from(this.g.keys()),G=[];for(let le=0;le<V.length;le++){const gt=g[le];for(let kt=0;kt<gt.length;kt++)G.push(V[le])}return G},a.V=function(g){ml(this);let V=[];if("string"==typeof g)RI(this,g)&&(V=V.concat(this.g.get(Uh(this,g))));else{g=Array.from(this.g.values());for(let G=0;G<g.length;G++)V=V.concat(g[G])}return V},a.set=function(g,V){return ml(this),this.i=null,RI(this,g=Uh(this,g))&&(this.h-=this.g.get(g).length),this.g.set(g,[V]),this.h+=1,this},a.get=function(g,V){return g&&0<(g=this.V(g)).length?String(g[0]):V},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],V=Array.from(this.g.keys());for(var G=0;G<V.length;G++){var le=V[G];const kt=encodeURIComponent(String(le)),yn=this.V(le);for(le=0;le<yn.length;le++){var gt=kt;""!==yn[le]&&(gt+="="+encodeURIComponent(String(yn[le]))),g.push(gt)}}return this.i=g.join("&")},Ht(gp,op),gp.prototype.g=function(){return new qm(this.l,this.j)},gp.prototype.i=function(g){return function(){return g}}({}),Ht(qm,po),(a=qm.prototype).open=function(g,V){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=V,this.readyState=1,_p(this)},a.send=function(g){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const V={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(V.body=g),(this.D||b).fetch(new Request(this.A,V)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mp(this)),this.readyState=0},a.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,_p(this)),this.g&&(this.readyState=3,_p(this),this.g)))if("arraybuffer"===this.responseType)g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof b.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;NI(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var V=g.value?g.value:new Uint8Array(0);(V=this.v.decode(V,{stream:!g.done}))&&(this.response=this.responseText+=V)}g.done?mp(this):_p(this),3==this.readyState&&NI(this)}},a.Ra=function(g){this.g&&(this.response=this.responseText=g,mp(this))},a.Qa=function(g){this.g&&(this.response=g,mp(this))},a.ga=function(){this.g&&mp(this)},a.setRequestHeader=function(g,V){this.u.append(g,V)},a.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],V=this.h.entries();for(var G=V.next();!G.done;)g.push((G=G.value)[0]+": "+G[1]),G=V.next();return g.join("\r\n")},Object.defineProperty(qm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(g){this.m=g?"include":"same-origin"}}),Ht(Ji,po);var xI=/^https?$/i,EC=["POST","PUT"];function Qm(g,V){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=V,g.m=5,pv(g),yp(g)}function pv(g){g.A||(g.A=!0,xo(g,"complete"),xo(g,"error"))}function kI(g){if(g.h&&typeof m<"u"&&(!g.v[1]||4!=Gc(g)||2!=g.Z()))if(g.u&&4==Gc(g))cd(g.Ea,0,g);else if(xo(g,"readystatechange"),4==Gc(g)){g.h=!1;try{const yn=g.Z();e:switch(yn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var G;if(!(G=V)){var le;if(le=0===yn){var gt=String(g.D).match(av)[1]||null;!gt&&b.self&&b.self.location&&(gt=b.self.location.protocol.slice(0,-1)),le=!xI.test(gt?gt.toLowerCase():"")}G=le}if(G)xo(g,"complete"),xo(g,"success");else{g.m=6;try{var kt=2<Gc(g)?g.g.statusText:""}catch{kt=""}g.l=kt+" ["+g.Z()+"]",pv(g)}}finally{yp(g)}}}function yp(g,V){if(g.g){gv(g);const G=g.g,le=g.v[0]?()=>{}:null;g.g=null,g.v=null,V||xo(g,"ready");try{G.onreadystatechange=le}catch{}}}function gv(g){g.I&&(b.clearTimeout(g.I),g.I=null)}function Gc(g){return g.g?g.g.readyState:0}function Bh(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function jh(g,V,G){return G&&G.internalChannelParams&&G.internalChannelParams[g]||V}function Xm(g){this.Aa=0,this.i=[],this.j=new Oh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jh("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jh("baseRetryDelayMs",5e3,g),this.cb=jh("retryDelaySeedMs",1e4,g),this.Wa=jh("forwardChannelMaxRetries",2,g),this.wa=jh("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new iv(g&&g.concurrentRequestLimit),this.Da=new yC,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function _v(g){if(FI(g),3==g.G){var V=g.U++,G=Ic(g.I);if(Yi(G,"SID",g.K),Yi(G,"RID",V),Yi(G,"TYPE","terminate"),Hh(g,G),(V=new Iu(g,g.j,V)).L=2,V.v=Lh(Ic(G)),G=!1,b.navigator&&b.navigator.sendBeacon)try{G=b.navigator.sendBeacon(V.v.toString(),"")}catch{}!G&&b.Image&&((new Image).src=V.v,G=!0),G||(V.g=wv(V.j,null),V.g.ea(V.v)),V.F=Date.now(),fd(V)}Zm(g)}function $h(g){g.g&&(Jm(g),g.g.cancel(),g.g=null)}function FI(g){$h(g),g.u&&(b.clearTimeout(g.u),g.u=null),Ip(g),g.h.cancel(),g.s&&("number"==typeof g.s&&b.clearTimeout(g.s),g.s=null)}function vp(g){if(!sv(g.h)&&!g.s){g.s=!0;var V=g.Ga;od||Ah(),tp||(od(),tp=!0),Am.add(V,g),g.B=0}}function Ep(g,V){var G;G=V?V.l:g.U++;const le=Ic(g.I);Yi(le,"SID",g.K),Yi(le,"RID",G),Yi(le,"AID",g.T),Hh(g,le),g.m&&g.o&&wu(le,g.m,g.o),G=new Iu(g,g.j,G,g.B+1),null===g.m&&(G.H=g.o),V&&(g.i=V.D.concat(g.i)),V=vv(g,G,1e3),G.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Vh(g.h,G),dp(G,le,V)}function Hh(g,V){g.H&&br(g.H,function(G,le){Yi(V,le,G)}),g.l&&Hm({},function(G,le){Yi(V,le,G)})}function vv(g,V,G){G=Math.min(g.i.length,G);var le=g.l?Oe(g.l.Na,g.l,g):null;e:{var gt=g.i;let kt=-1;for(;;){const yn=["count="+G];-1==kt?0<G?(kt=gt[0].g,yn.push("ofs="+kt)):kt=0:yn.push("ofs="+kt);let bi=!0;for(let ko=0;ko<G;ko++){let yi=gt[ko].g;const Fo=gt[ko].map;if(yi-=kt,0>yi)kt=Math.max(0,gt[ko].g-100),bi=!1;else try{vC(Fo,yn,"req"+yi+"_")}catch{le&&le(Fo)}}if(bi){le=yn.join("&");break e}}}return g=g.i.splice(0,G),V.D=g,le}function Gh(g){if(!g.g&&!g.u){g.Y=1;var V=g.Fa;od||Ah(),tp||(od(),tp=!0),Am.add(V,g),g.v=0}}function Ym(g){return!(g.g||g.u||3<=g.v||(g.Y++,g.u=Rh(Oe(g.Fa,g),Cv(g,g.v)),g.v++,0))}function Jm(g){null!=g.A&&(b.clearTimeout(g.A),g.A=null)}function Ev(g){g.g=new Iu(g,g.j,"rpc",g.Y),null===g.m&&(g.g.H=g.o),g.g.O=0;var V=Ic(g.qa);Yi(V,"RID","rpc"),Yi(V,"SID",g.K),Yi(V,"AID",g.T),Yi(V,"CI",g.F?"0":"1"),!g.F&&g.ja&&Yi(V,"TO",g.ja),Yi(V,"TYPE","xmlhttp"),Hh(g,V),g.m&&g.o&&wu(V,g.m,g.o),g.L&&(g.g.I=g.L);var G=g.g;g=g.ia,G.L=1,G.v=Lh(Ic(V)),G.m=null,G.P=!0,nv(G,g)}function Ip(g){null!=g.C&&(b.clearTimeout(g.C),g.C=null)}function Iv(g,V){var G=null;if(g.g==V){Ip(g),Jm(g),g.g=null;var le=2}else{if(!Fh(g.h,V))return;G=V.D,jm(g.h,V),le=1}if(0!=g.G)if(V.o)if(1==le){G=V.m?V.m.length:0,V=Date.now()-V.F;var gt=g.B;xo(le=fl(),new tv(le,G)),vp(g)}else Gh(g);else if(3==(gt=V.s)||0==gt&&0<V.X||!(1==le&&function yv(g,V){return!(Bm(g.h)>=g.h.j-(g.s?1:0)||(g.s?(g.i=V.D.concat(g.i),0):1==g.G||2==g.G||g.B>=(g.Va?0:g.Wa)||(g.s=Rh(Oe(g.Ga,g,V),Cv(g,g.B)),g.B++,0)))}(g,V)||2==le&&Ym(g)))switch(G&&0<G.length&&(V=g.h,V.i=V.i.concat(G)),gt){case 1:yl(g,5);break;case 4:yl(g,10);break;case 3:yl(g,6);break;default:yl(g,2)}}function Cv(g,V){let G=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(G*=2),G*V}function yl(g,V){if(g.j.info("Error code "+V),2==V){var G=Oe(g.fb,g),le=g.Xa;const gt=!le;le=new Cu(le||"//www.google.com/images/cleardot.gif"),b.location&&"http"==b.location.protocol||zm(le,"https"),Lh(le),gt?function hv(g,V){const G=new Oh;if(b.Image){const le=new Image;le.onload=ut(_l,G,"TestLoadImage: loaded",!0,V,le),le.onerror=ut(_l,G,"TestLoadImage: error",!1,V,le),le.onabort=ut(_l,G,"TestLoadImage: abort",!1,V,le),le.ontimeout=ut(_l,G,"TestLoadImage: timeout",!1,V,le),b.setTimeout(function(){le.ontimeout&&le.ontimeout()},1e4),le.src=g}else V(!1)}(le.toString(),G):function _C(g,V){new Oh;const le=new AbortController,gt=setTimeout(()=>{le.abort(),_l(0,0,!1,V)},1e4);fetch(g,{signal:le.signal}).then(kt=>{clearTimeout(gt),_l(0,0,!!kt.ok,V)}).catch(()=>{clearTimeout(gt),_l(0,0,!1,V)})}(le.toString(),G)}else Qo(2);g.G=0,g.l&&g.l.sa(V),Zm(g),FI(g)}function Zm(g){if(g.G=0,g.ka=[],g.l){const V=$m(g.h);(0!=V.length||0!=g.i.length)&&(Qt(g.ka,V),Qt(g.ka,g.i),g.h.i.length=0,nn(g.i),g.i.length=0),g.l.ra()}}function e_(g,V,G){var le=G instanceof Cu?Ic(G):new Cu(G);if(""!=le.g)V&&(le.g=V+"."+le.g),Wm(le,le.s);else{var gt=b.location;le=gt.protocol,V=V?V+"."+gt.hostname:gt.hostname,gt=+gt.port;var kt=new Cu(null);le&&zm(kt,le),V&&(kt.g=V),gt&&Wm(kt,gt),G&&(kt.l=G),le=kt}return V=g.ya,(G=g.D)&&V&&Yi(le,G,V),Yi(le,"VER",g.la),Hh(g,le),le}function wv(g,V,G){if(V&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return(V=new Ji(g.Ca&&!g.pa?new gp({eb:G}):g.pa)).Ha(g.J),V}function VI(){}function zh(){}function ua(g,V){po.call(this),this.g=new Xm(V),this.l=g,this.h=V&&V.messageUrlParams||null,g=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(g?g["X-WebChannel-Content-Type"]=V.messageContentType:g={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.va&&(g?g["X-WebChannel-Client-Profile"]=V.va:g={"X-WebChannel-Client-Profile":V.va}),this.g.S=g,(g=V&&V.Sb)&&!Xn(g)&&(this.g.m=g),this.v=V&&V.supportsCrossDomainXhr||!1,this.u=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!Xn(V)&&(this.g.D=V,null!==(g=this.h)&&V in g&&V in(g=this.h)&&delete g[V]),this.j=new gd(this)}function Tu(g){dd.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var V=g.__sm__;if(V){e:{for(const G in V){g=G;break e}g=void 0}(this.i=g)&&(g=this.i,V=null!==V&&g in V?V[g]:void 0),this.data=V}else this.data=g}function t_(){cp.call(this),this.status=1}function gd(g){this.g=g}(a=Ji.prototype).Ha=function(g){this.J=g},a.ea=function(g,V,G,le){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);V=V?V.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xh.g(),this.v=function jc(g){return g.h||(g.h=g.i())}(this.o?this.o:xh),this.g.onreadystatechange=Oe(this.Ea,this);try{this.B=!0,this.g.open(V,String(g),!0),this.B=!1}catch(kt){return void Qm(this,kt)}if(g=G||"",G=new Map(this.headers),le)if(Object.getPrototypeOf(le)===Object.prototype)for(var gt in le)G.set(gt,le[gt]);else{if("function"!=typeof le.keys||"function"!=typeof le.get)throw Error("Unknown input type for opt_headers: "+String(le));for(const kt of le.keys())G.set(kt,le.get(kt))}le=Array.from(G.keys()).find(kt=>"content-type"==kt.toLowerCase()),gt=b.FormData&&g instanceof b.FormData,!(0<=Array.prototype.indexOf.call(EC,V,void 0))||le||gt||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[kt,yn]of G)this.g.setRequestHeader(kt,yn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gv(this),this.u=!0,this.g.send(g),this.u=!1}catch(kt){Qm(this,kt)}},a.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,xo(this,"complete"),xo(this,"abort"),yp(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yp(this,!0)),Ji.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?kI(this):this.bb())},a.bb=function(){kI(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<Gc(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(g){if(this.g){var V=this.g.responseText;return g&&0==V.indexOf(g)&&(V=V.substring(g.length)),II(V)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=Xm.prototype).la=8,a.G=1,a.connect=function(g,V,G,le){Qo(0),this.W=g,this.H=V||{},G&&void 0!==le&&(this.H.OSID=G,this.H.OAID=le),this.F=this.X,this.I=e_(this,null,this.W),vp(this)},a.Ga=function(g){if(this.s)if(this.s=null,1==this.G){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const gt=new Iu(this,this.j,g);let kt=this.o;if(this.S&&(kt?(kt=Ae(kt),st(kt,this.S)):kt=this.S),null!==this.m||this.O||(gt.H=kt,kt=null),this.P)e:{for(var V=0,G=0;G<this.i.length;G++){var le=this.i[G];if(void 0===(le="__data__"in le.map&&"string"==typeof(le=le.map.__data__)?le.length:void 0))break;if(4096<(V+=le)){V=G;break e}if(4096===V||G===this.i.length-1){V=G+1;break e}}V=1e3}else V=1e3;V=vv(this,gt,V),Yi(G=Ic(this.I),"RID",g),Yi(G,"CVER",22),this.D&&Yi(G,"X-HTTP-Session-Id",this.D),Hh(this,G),kt&&(this.O?V="headers="+encodeURIComponent(String(fv(kt)))+"&"+V:this.m&&wu(G,this.m,kt)),Vh(this.h,gt),this.Ua&&Yi(G,"TYPE","init"),this.P?(Yi(G,"$req",V),Yi(G,"SID","null"),gt.T=!0,dp(gt,G,null)):dp(gt,G,V),this.G=2}}else 3==this.G&&(g?Ep(this,g):0==this.i.length||sv(this.h)||Ep(this))},a.Fa=function(){if(this.u=null,Ev(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Rh(Oe(this.ab,this),g)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qo(10),$h(this),Ev(this))},a.Za=function(){null!=this.C&&(this.C=null,$h(this),Ym(this),Qo(19))},a.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Qo(2)):(this.j.info("Failed to ping google.com"),Qo(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=VI.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},zh.prototype.g=function(g,V){return new ua(g,V)},Ht(ua,po),ua.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ua.prototype.close=function(){_v(this.g)},ua.prototype.o=function(g){var V=this.g;if("string"==typeof g){var G={};G.__data__=g,g=G}else this.u&&((G={}).__data__=km(g),g=G);V.i.push(new bI(V.Ya++,g)),3==V.G&&vp(V)},ua.prototype.N=function(){this.g.l=null,delete this.j,_v(this.g),delete this.g,ua.aa.N.call(this)},Ht(Tu,dd),Ht(t_,cp),Ht(gd,VI),gd.prototype.ua=function(){xo(this.g,"a")},gd.prototype.ta=function(g){xo(this.g,new Tu(g))},gd.prototype.sa=function(g){xo(this.g,new t_)},gd.prototype.ra=function(){xo(this.g,"b")},zh.prototype.createWebChannel=zh.prototype.g,ua.prototype.send=ua.prototype.o,ua.prototype.open=ua.prototype.m,ua.prototype.close=ua.prototype.close,Kt=Lt.createWebChannelTransport=function(){return new zh},tt=Lt.getStatEventTarget=function(){return fl()},It=Lt.Event=Eu,yt=Lt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nh.NO_ERROR=0,Nh.TIMEOUT=8,Nh.HTTP_ERROR=6,ft=Lt.ErrorCode=Nh,Vm.COMPLETE="complete",Qe=Lt.EventType=Vm,ld.EventType=ap,ap.OPEN="a",ap.CLOSE="b",ap.ERROR="c",ap.MESSAGE="d",po.prototype.listen=po.prototype.K,Pe=Lt.WebChannel=ld,tn=Lt.FetchXmlHttpFactory=gp,Ji.prototype.listenOnce=Ji.prototype.L,Ji.prototype.getLastError=Ji.prototype.Ka,Ji.prototype.getLastErrorCode=Ji.prototype.Ba,Ji.prototype.getStatus=Ji.prototype.Z,Ji.prototype.getResponseJson=Ji.prototype.Oa,Ji.prototype.getResponseText=Ji.prototype.oa,Ji.prototype.send=Ji.prototype.ea,Ji.prototype.setWithCredentials=Ji.prototype.Ha,at=Lt.XhrIo=Ji}).apply(typeof un<"u"?un:typeof self<"u"?self:typeof window<"u"?window:{});const gn="@firebase/firestore";class rn{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");let on="10.13.1";const Cn=new Mt.Vy("@firebase/firestore");function Dn(){return Cn.logLevel}function ot(a,...t){if(Cn.logLevel<=Mt.$b.DEBUG){const r=t.map(sr);Cn.debug(`Firestore (${on}): ${a}`,...r)}}function In(a,...t){if(Cn.logLevel<=Mt.$b.ERROR){const r=t.map(sr);Cn.error(`Firestore (${on}): ${a}`,...r)}}function Kn(a,...t){if(Cn.logLevel<=Mt.$b.WARN){const r=t.map(sr);Cn.warn(`Firestore (${on}): ${a}`,...r)}}function sr(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function Rt(a="Unexpected state"){const t=`FIRESTORE (${on}) INTERNAL ASSERTION FAILED: `+a;throw In(t),new Error(t)}function _t(a,t){a||Rt()}function Ft(a,t){return a}const it={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xt extends ie.g{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yn{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}class tr{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class An{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(rn.UNAUTHENTICATED))}shutdown(){}}class bn{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class kr{constructor(t){this.t=t,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){var o=this;let u=this.i;const d=$=>this.i!==u?(u=this.i,r($)):Promise.resolve();let m=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new Yn,t.enqueueRetryable(()=>d(this.currentUser))};const b=()=>{const $=m;t.enqueueRetryable((0,oe.A)(function*(){yield $.promise,yield d(o.currentUser)}))},F=$=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=$,this.auth.addAuthTokenListener(this.o),b()};this.t.onInit($=>F($)),setTimeout(()=>{if(!this.auth){const $=this.t.getImmediate({optional:!0});$?F($):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new Yn)}},0),b()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(o=>this.i!==t?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(_t("string"==typeof o.accessToken),new tr(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return _t(null===t||"string"==typeof t),new rn(t)}}class Wr{constructor(t,r,o){this.l=t,this.h=r,this.P=o,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jr{constructor(t,r,o){this.l=t,this.h=r,this.P=o}getToken(){return Promise.resolve(new Wr(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vi{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Or{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){const o=d=>{null!=d.error&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.R;return this.R=d.token,ot("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?r(d.token):Promise.resolve()};this.o=d=>{t.enqueueRetryable(()=>o(d))};const u=d=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.A.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.A.getImmediate({optional:!0});d?u(d):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(_t("string"==typeof r.token),this.R=r.token,new Vi(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Nn(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let o=0;o<a;o++)r[o]=Math.floor(256*Math.random());return r}class Li{static newId(){const r=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=Nn(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<r&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[d]%62))}return o}}function zt(a,t){return a<t?-1:a>t?1:0}function Un(a,t,r){return a.length===t.length&&a.every((o,u)=>r(o,t[u]))}function Nr(a){return a+"\0"}class Zt{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new xt(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new xt(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new xt(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xt(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Zt.fromMillis(Date.now())}static fromDate(t){return Zt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*r));return new Zt(r,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?zt(this.nanoseconds,t.nanoseconds):zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class en{constructor(t){this.timestamp=t}static fromTimestamp(t){return new en(t)}static min(){return new en(new Zt(0,0))}static max(){return new en(new Zt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Kr{constructor(t,r,o){void 0===r?r=0:r>t.length&&Rt(),void 0===o?o=t.length-r:o>t.length-r&&Rt(),this.segments=t,this.offset=r,this.len=o}get length(){return this.len}isEqual(t){return 0===Kr.comparator(this,t)}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Kr?t.forEach(o=>{r.push(o)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,o=this.limit();r<o;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const o=Math.min(t.length,r.length);for(let u=0;u<o;u++){const d=t.get(u),m=r.get(u);if(d<m)return-1;if(d>m)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class Rn extends Kr{construct(t,r,o){return new Rn(t,r,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const o of t){if(o.indexOf("//")>=0)throw new xt(it.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);r.push(...o.split("/").filter(u=>u.length>0))}return new Rn(r)}static emptyPath(){return new Rn([])}}const xr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ke extends Kr{construct(t,r,o){return new ke(t,r,o)}static isValidIdentifier(t){return xr.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ke.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ke(["__name__"])}static fromServerFormat(t){const r=[];let o="",u=0;const d=()=>{if(0===o.length)throw new xt(it.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(o),o=""};let m=!1;for(;u<t.length;){const b=t[u];if("\\"===b){if(u+1===t.length)throw new xt(it.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const F=t[u+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new xt(it.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=F,u+=2}else"`"===b?(m=!m,u++):"."!==b||m?(o+=b,u++):(d(),u++)}if(d(),m)throw new xt(it.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ke(r)}static emptyPath(){return new ke([])}}class we{constructor(t){this.path=t}static fromPath(t){return new we(Rn.fromString(t))}static fromName(t){return new we(Rn.fromString(t).popFirst(5))}static empty(){return new we(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Rn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,r){return Rn.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new we(new Rn(t.slice()))}}class Ce{constructor(t,r,o,u){this.indexId=t,this.collectionGroup=r,this.fields=o,this.indexState=u}}function Xe(a){return a.fields.find(t=>2===t.kind)}function Nt(a){return a.fields.filter(t=>2!==t.kind)}Ce.UNKNOWN_ID=-1;class q{constructor(t,r){this.fieldPath=t,this.kind=r}}class se{constructor(t,r){this.sequenceNumber=t,this.offset=r}static empty(){return new se(0,Bt.min())}}function me(a,t){const r=a.toTimestamp().seconds,o=a.toTimestamp().nanoseconds+1,u=en.fromTimestamp(1e9===o?new Zt(r+1,0):new Zt(r,o));return new Bt(u,we.empty(),t)}function Dt(a){return new Bt(a.readTime,a.key,-1)}class Bt{constructor(t,r,o){this.readTime=t,this.documentKey=r,this.largestBatchId=o}static min(){return new Bt(en.min(),we.empty(),-1)}static max(){return new Bt(en.max(),we.empty(),-1)}}function En(a,t){let r=a.readTime.compareTo(t.readTime);return 0!==r?r:(r=we.comparator(a.documentKey,t.documentKey),0!==r?r:zt(a.largestBatchId,t.largestBatchId))}const Bn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Sn(a){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,oe.A)(function*(a){if(a.code!==it.FAILED_PRECONDITION||a.message!==Bn)throw a;ot("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Ne{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Ne((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(t,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(r,d).next(o,u)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Ne?r:Ne.resolve(r)}catch(r){return Ne.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Ne.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Ne.reject(r)}static resolve(t){return new Ne((r,o)=>{r(t)})}static reject(t){return new Ne((r,o)=>{o(t)})}static waitFor(t){return new Ne((r,o)=>{let u=0,d=0,m=!1;t.forEach(b=>{++u,b.next(()=>{++d,m&&d===u&&r()},F=>o(F))}),m=!0,d===u&&r()})}static or(t){let r=Ne.resolve(!1);for(const o of t)r=r.next(u=>u?Ne.resolve(u):o());return r}static forEach(t,r){const o=[];return t.forEach((u,d)=>{o.push(r.call(this,u,d))}),this.waitFor(o)}static mapArray(t,r){return new Ne((o,u)=>{const d=t.length,m=new Array(d);let b=0;for(let F=0;F<d;F++){const $=F;r(t[$]).next(re=>{m[$]=re,++b,b===d&&o(m)},re=>u(re))}})}static doWhile(t,r){return new Ne((o,u)=>{const d=()=>{!0===t()?r().next(()=>{d()},u):o()};d()})}}class $r{constructor(t,r){this.action=t,this.transaction=r,this.aborted=!1,this.V=new Yn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new or(t,r.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=et(o.target.error);this.V.reject(new or(t,u))}}static open(t,r,o,u){try{return new $r(r,t.transaction(u,o))}catch(d){throw new or(r,d)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(ot("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const r=this.transaction.objectStore(t);return new Hi(r)}}class Qr{constructor(t,r,o){this.name=t,this.version=r,this.p=o,12.2===Qr.S((0,ie.ZQ)())&&In("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return ot("SimpleDb","Removing database:",t),ti(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,ie.zW)())return!1;if(Qr.v())return!0;const t=(0,ie.ZQ)(),r=Qr.S(t),o=0<r&&r<10,u=Ms(t),d=0<u&&u<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||o||d)}static v(){var t;return typeof process<"u"&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.C)}static F(t,r){return t.store(r)}static S(t){const r=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(o)}M(t){var r=this;return(0,oe.A)(function*(){return r.db||(ot("SimpleDb","Opening database:",r.name),r.db=yield new Promise((o,u)=>{const d=indexedDB.open(r.name,r.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new or(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const b=m.target.error;u("VersionError"===b.name?new xt(it.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===b.name?new xt(it.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+b):new or(t,b))},d.onupgradeneeded=m=>{ot("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',m.oldVersion),r.p.O(m.target.result,d.transaction,m.oldVersion,r.version).next(()=>{ot("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=o=>r.N(o)),r.db})()}L(t){this.N=t,this.db&&(this.db.onversionchange=r=>t(r))}runTransaction(t,r,o,u){var d=this;return(0,oe.A)(function*(){const m="readonly"===r;let b=0;for(;;){++b;try{d.db=yield d.M(t);const F=$r.open(d.db,t,m?"readonly":"readwrite",o),$=u(F).next(re=>(F.g(),re)).catch(re=>(F.abort(re),Ne.reject(re))).toPromise();return $.catch(()=>{}),yield F.m,$}catch(F){const $=F,re="FirebaseError"!==$.name&&b<3;if(ot("SimpleDb","Transaction failed with error:",$.message,"Retrying:",re),d.close(),!re)return Promise.reject($)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function Ms(a){const t=a.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class ls{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return ti(this.B.delete())}}class or extends xt{constructor(t,r){super(it.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ss(a){return"IndexedDbTransactionError"===a.name}class Hi{constructor(t){this.store=t}put(t,r){let o;return void 0!==r?(ot("SimpleDb","PUT",this.store.name,t,r),o=this.store.put(r,t)):(ot("SimpleDb","PUT",this.store.name,"<auto-key>",t),o=this.store.put(t)),ti(o)}add(t){return ot("SimpleDb","ADD",this.store.name,t,t),ti(this.store.add(t))}get(t){return ti(this.store.get(t)).next(r=>(void 0===r&&(r=null),ot("SimpleDb","GET",this.store.name,t,r),r))}delete(t){return ot("SimpleDb","DELETE",this.store.name,t),ti(this.store.delete(t))}count(){return ot("SimpleDb","COUNT",this.store.name),ti(this.store.count())}U(t,r){const o=this.options(t,r),u=o.index?this.store.index(o.index):this.store;if("function"==typeof u.getAll){const d=u.getAll(o.range);return new Ne((m,b)=>{d.onerror=F=>{b(F.target.error)},d.onsuccess=F=>{m(F.target.result)}})}{const d=this.cursor(o),m=[];return this.W(d,(b,F)=>{m.push(F)}).next(()=>m)}}G(t,r){const o=this.store.getAll(t,null===r?void 0:r);return new Ne((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}j(t,r){ot("SimpleDb","DELETE ALL",this.store.name);const o=this.options(t,r);o.H=!1;const u=this.cursor(o);return this.W(u,(d,m,b)=>b.delete())}J(t,r){let o;r?o=t:(o={},r=t);const u=this.cursor(o);return this.W(u,r)}Y(t){const r=this.cursor({});return new Ne((o,u)=>{r.onerror=d=>{const m=et(d.target.error);u(m)},r.onsuccess=d=>{const m=d.target.result;m?t(m.primaryKey,m.value).next(b=>{b?m.continue():o()}):o()}})}W(t,r){const o=[];return new Ne((u,d)=>{t.onerror=m=>{d(m.target.error)},t.onsuccess=m=>{const b=m.target.result;if(!b)return void u();const F=new ls(b),$=r(b.primaryKey,b.value,F);if($ instanceof Ne){const re=$.catch(pe=>(F.done(),Ne.reject(pe)));o.push(re)}F.isDone?u():null===F.K?b.continue():b.continue(F.K)}}).next(()=>Ne.waitFor(o))}options(t,r){let o;return void 0!==t&&("string"==typeof t?o=t:r=t),{index:o,range:r}}cursor(t){let r="next";if(t.reverse&&(r="prev"),t.index){const o=this.store.index(t.index);return t.H?o.openKeyCursor(t.range,r):o.openCursor(t.range,r)}return this.store.openCursor(t.range,r)}}function ti(a){return new Ne((t,r)=>{a.onsuccess=o=>{t(o.target.result)},a.onerror=o=>{const u=et(o.target.error);r(u)}})}let vt=!1;function et(a){const t=Qr.S((0,ie.ZQ)());if(t>=12.2&&t<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const o=new xt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vt||(vt=!0,setTimeout(()=>{throw o},0)),o}}return a}class Vt{constructor(t,r){this.asyncQueue=t,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(t){var r=this;ot("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,oe.A)(function*(){r.task=null;try{ot("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(o){ss(o)?ot("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield Sn(o)}yield r.X(6e4)}))}}class cn{constructor(t,r){this.localStore=t,this.persistence=r}ee(t=50){var r=this;return(0,oe.A)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>r.te(o,t))})()}te(t,r){const o=new Set;let u=r,d=!0;return Ne.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(m=>{if(null!==m&&!o.has(m))return ot("IndexBackfiller",`Processing collection: ${m}`),this.ne(t,m,u).next(b=>{u-=b,o.add(m)});d=!1})).next(()=>r-u)}ne(t,r,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,r).next(u=>this.localStore.localDocuments.getNextDocuments(t,r,u,o).next(d=>{const m=d.changes;return this.localStore.indexManager.updateIndexEntries(t,m).next(()=>this.re(u,d)).next(b=>(ot("IndexBackfiller",`Updating offset: ${b}`),this.localStore.indexManager.updateCollectionGroup(t,r,b))).next(()=>m.size)}))}re(t,r){let o=t;return r.changes.forEach((u,d)=>{const m=Dt(d);En(m,o)>0&&(o=m)}),new Bt(o.readTime,o.documentKey,Math.max(r.batchId,t.largestBatchId))}}let ne=(()=>{class a{constructor(r,o){this.previousValue=r,o&&(o.sequenceNumberHandler=u=>this.ie(u),this.se=u=>o.writeSequenceNumber(u))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function ye(a){return null==a}function Ie(a){return 0===a&&1/a==-1/0}function dt(a){return"number"==typeof a&&Number.isInteger(a)&&!Ie(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function Ze(a){let t="";for(let r=0;r<a.length;r++)t.length>0&&(t=$t(t)),t=Xt(a.get(r),t);return $t(t)}function Xt(a,t){let r=t;const o=a.length;for(let u=0;u<o;u++){const d=a.charAt(u);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function $t(a){return a+"\x01\x01"}function Mn(a){const t=a.length;if(_t(t>=2),2===t)return _t("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),Rn.emptyPath();const r=t-2,o=[];let u="";for(let d=0;d<t;){const m=a.indexOf("\x01",d);switch((m<0||m>r)&&Rt(),a.charAt(m+1)){case"\x01":const b=a.substring(d,m);let F;0===u.length?F=b:(u+=b,F=u,u=""),o.push(F);break;case"\x10":u+=a.substring(d,m),u+="\0";break;case"\x11":u+=a.substring(d,m+1);break;default:Rt()}d=m+2}return new Rn(o)}const wn=["userId","batchId"];function Sr(a,t){return[a,Ze(t)]}function ii(a,t,r){return[a,Ze(t),r]}const Er={},ui=["prefixPath","collectionGroup","readTime","documentId"],qr=["prefixPath","collectionGroup","documentId"],Si=["collectionGroup","readTime","prefixPath","documentId"],Ir=["canonicalId","targetId"],Dr=["targetId","path"],li=["path","targetId"],nr=["collectionId","parent"],Fr=["indexId","uid"],di=["uid","sequenceNumber"],vi=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ei=["indexId","uid","orderedDocumentKey"],On=["userId","collectionPath","documentId"],ur=["userId","collectionPath","largestBatchId"],Vo=["userId","collectionGroup","largestBatchId"],Gi=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ks=[...Gi,"documentOverlays"],Yo=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],la=Yo,yo=[...la,"indexConfiguration","indexState","indexEntries"],rr=yo,vo=[...yo,"globals"];class qs extends qn{constructor(t,r){super(),this._e=t,this.currentSequenceNumber=r}}function wr(a,t){const r=Ft(a);return Qr.F(r._e,t)}function Lo(a){let t=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t++;return t}function Qs(a,t){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t(r,a[r])}function Rs(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}class Pr{constructor(t,r){this.comparator=t,this.root=r||Ii.EMPTY}insert(t,r){return new Pr(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Ii.BLACK,null,null))}remove(t){return new Pr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ii.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(0===o)return r.value;o<0?r=r.left:o>0&&(r=r.right)}return null}indexOf(t){let r=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(t,o.key);if(0===u)return r+o.left.size;u<0?o=o.left:(r+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,o)=>(t(r,o),!1))}toString(){const t=[];return this.inorderTraversal((r,o)=>(t.push(`${r}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ui(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ui(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ui(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ui(this.root,t,this.comparator,!0)}}class Ui{constructor(t,r,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!t.isEmpty();)if(d=r?o(t.key,r):1,r&&u&&(d*=-1),d<0)t=this.isReverse?t.left:t.right;else{if(0===d){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ii{constructor(t,r,o,u,d){this.key=t,this.value=r,this.color=o??Ii.RED,this.left=u??Ii.EMPTY,this.right=d??Ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,o,u,d){return new Ii(t??this.key,r??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const d=o(t,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===d?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ii.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let o,u=this;if(r(t,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(t,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(t,u.key)){if(u.right.isEmpty())return Ii.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(t,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Rt();const t=this.left.check();if(t!==this.right.check())throw Rt();return t+(this.isRed()?0:1)}}Ii.EMPTY=null,Ii.RED=!0,Ii.BLACK=!1,Ii.EMPTY=new class{constructor(){this.size=0}get key(){throw Rt()}get value(){throw Rt()}get color(){throw Rt()}get left(){throw Rt()}get right(){throw Rt()}copy(t,r,o,u,d){return this}insert(t,r,o){return new Ii(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cr{constructor(t){this.comparator=t,this.data=new Pr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,o)=>(t(r),!1))}forEachInRange(t,r){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,t[1])>=0)return;r(u.key)}}forEachWhile(t,r){let o;for(o=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new fs(this.data.getIterator())}getIteratorFrom(t){return new fs(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(o=>{r=r.add(o)}),r}isEqual(t){if(!(t instanceof Cr)||this.size!==t.size)return!1;const r=this.data.getIterator(),o=t.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Cr(this.comparator);return r.data=t,r}}class fs{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xs(a){return a.hasNext()?a.getNext():void 0}class Xr{constructor(t){this.fields=t,t.sort(ke.comparator)}static empty(){return new Xr([])}unionWith(t){let r=new Cr(ke.comparator);for(const o of this.fields)r=r.add(o);for(const o of t)r=r.add(o);return new Xr(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Un(this.fields,t.fields,(r,o)=>r.isEqual(o))}}class Uo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hr{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Uo("Invalid base64 string: "+d):d}}(t);return new Hr(r)}static fromUint8Array(t){const r=function(u){let d="";for(let m=0;m<u.length;++m)d+=String.fromCharCode(u[m]);return d}(t);return new Hr(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const o=new Uint8Array(r.length);for(let u=0;u<r.length;u++)o[u]=r.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Hr.EMPTY_BYTE_STRING=new Hr("");const ei=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(a){if(_t(!!a),"string"==typeof a){let t=0;const r=ei.exec(a);if(_t(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),t=Number(u)}const o=new Date(a);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:dn(a.seconds),nanos:dn(a.nanos)}}function dn(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function si(a){return"string"==typeof a?Hr.fromBase64String(a):Hr.fromUint8Array(a)}function ps(a){var t,r;return"server_timestamp"===(null===(r=((null===(t=a?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function xs(a){const t=a.mapValue.fields.__previous_value__;return ps(t)?xs(t):t}function gs(a){const t=os(a.mapValue.fields.__local_write_time__.timestampValue);return new Zt(t.seconds,t.nanos)}class Ys{constructor(t,r,o,u,d,m,b,F,$){this.databaseId=t,this.appId=r,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=b,this.longPollingOptions=F,this.useFetchStreams=$}}class Pi{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new Pi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Pi&&t.projectId===this.projectId&&t.database===this.database}}const es={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zi={nullValue:"NULL_VALUE"};function Bi(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?ps(a)?4:Io(a)?9007199254740991:Vs(a)?10:11:Rt()}function ts(a,t){if(a===t)return!0;const r=Bi(a);if(r!==Bi(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return gs(a).isEqual(gs(t));case 3:return function(u,d){if("string"==typeof u.timestampValue&&"string"==typeof d.timestampValue&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const m=os(u.timestampValue),b=os(d.timestampValue);return m.seconds===b.seconds&&m.nanos===b.nanos}(a,t);case 5:return a.stringValue===t.stringValue;case 6:return d=t,si(a.bytesValue).isEqual(si(d.bytesValue));case 7:return a.referenceValue===t.referenceValue;case 8:return function(u,d){return dn(u.geoPointValue.latitude)===dn(d.geoPointValue.latitude)&&dn(u.geoPointValue.longitude)===dn(d.geoPointValue.longitude)}(a,t);case 2:return function(u,d){if("integerValue"in u&&"integerValue"in d)return dn(u.integerValue)===dn(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const m=dn(u.doubleValue),b=dn(d.doubleValue);return m===b?Ie(m)===Ie(b):isNaN(m)&&isNaN(b)}return!1}(a,t);case 9:return Un(a.arrayValue.values||[],t.arrayValue.values||[],ts);case 10:case 11:return function(u,d){const m=u.mapValue.fields||{},b=d.mapValue.fields||{};if(Lo(m)!==Lo(b))return!1;for(const F in m)if(m.hasOwnProperty(F)&&(void 0===b[F]||!ts(m[F],b[F])))return!1;return!0}(a,t);default:return Rt()}var d}function ks(a,t){return void 0!==(a.values||[]).find(r=>ts(r,t))}function ji(a,t){if(a===t)return 0;const r=Bi(a),o=Bi(t);if(r!==o)return zt(r,o);switch(r){case 0:case 9007199254740991:return 0;case 1:return zt(a.booleanValue,t.booleanValue);case 2:return function(d,m){const b=dn(d.integerValue||d.doubleValue),F=dn(m.integerValue||m.doubleValue);return b<F?-1:b>F?1:b===F?0:isNaN(b)?isNaN(F)?0:-1:1}(a,t);case 3:return Bo(a.timestampValue,t.timestampValue);case 4:return Bo(gs(a),gs(t));case 5:return zt(a.stringValue,t.stringValue);case 6:return function(d,m){const b=si(d),F=si(m);return b.compareTo(F)}(a.bytesValue,t.bytesValue);case 7:return function(d,m){const b=d.split("/"),F=m.split("/");for(let $=0;$<b.length&&$<F.length;$++){const re=zt(b[$],F[$]);if(0!==re)return re}return zt(b.length,F.length)}(a.referenceValue,t.referenceValue);case 8:return function(d,m){const b=zt(dn(d.latitude),dn(m.latitude));return 0!==b?b:zt(dn(d.longitude),dn(m.longitude))}(a.geoPointValue,t.geoPointValue);case 9:return ns(a.arrayValue,t.arrayValue);case 10:return function(d,m){var b,F,$,re;const ut=null===(b=(d.fields||{}).value)||void 0===b?void 0:b.arrayValue,Ht=null===(F=(m.fields||{}).value)||void 0===F?void 0:F.arrayValue,nn=zt((null===($=ut?.values)||void 0===$?void 0:$.length)||0,(null===(re=Ht?.values)||void 0===re?void 0:re.length)||0);return 0!==nn?nn:ns(ut,Ht)}(a.mapValue,t.mapValue);case 11:return function(d,m){if(d===es.mapValue&&m===es.mapValue)return 0;if(d===es.mapValue)return 1;if(m===es.mapValue)return-1;const b=d.fields||{},F=Object.keys(b),$=m.fields||{},re=Object.keys($);F.sort(),re.sort();for(let pe=0;pe<F.length&&pe<re.length;++pe){const Oe=zt(F[pe],re[pe]);if(0!==Oe)return Oe;const ut=ji(b[F[pe]],$[re[pe]]);if(0!==ut)return ut}return zt(F.length,re.length)}(a.mapValue,t.mapValue);default:throw Rt()}}function Bo(a,t){if("string"==typeof a&&"string"==typeof t&&a.length===t.length)return zt(a,t);const r=os(a),o=os(t),u=zt(r.seconds,o.seconds);return 0!==u?u:zt(r.nanos,o.nanos)}function ns(a,t){const r=a.values||[],o=t.values||[];for(let u=0;u<r.length&&u<o.length;++u){const d=ji(r[u],o[u]);if(d)return d}return zt(r.length,o.length)}function Mi(a){return Eo(a)}function Eo(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const o=os(r);return`time(${o.seconds},${o.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?si(a.bytesValue).toBase64():"referenceValue"in a?we.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Eo(d);return o+"]"}(a.arrayValue):"mapValue"in a?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Eo(r.fields[m])}`;return u+"}"}(a.mapValue):Rt()}function $i(a,t){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${t.path.canonicalString()}`}}function ms(a){return!!a&&"integerValue"in a}function Fs(a){return!!a&&"arrayValue"in a}function Jo(a){return!!a&&"nullValue"in a}function Js(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Wi(a){return!!a&&"mapValue"in a}function Vs(a){var t,r;return"__vector__"===(null===(r=((null===(t=a?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Ci(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const t={mapValue:{fields:{}}};return Qs(a.mapValue.fields,(r,o)=>t.mapValue.fields[r]=Ci(o)),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Ci(a.arrayValue.values[r]);return t}return Object.assign({},a)}function Io(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}const Zo={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function wi(a){return"nullValue"in a?zi:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?$i(Pi.empty(),we.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?Vs(a)?Zo:{mapValue:{}}:Rt()}function yr(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?$i(Pi.empty(),we.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?Zo:"mapValue"in a?Vs(a)?{mapValue:{}}:es:Rt()}function Ls(a,t){const r=ji(a.value,t.value);return 0!==r?r:a.inclusive&&!t.inclusive?-1:!a.inclusive&&t.inclusive?1:0}function ha(a,t){const r=ji(a.value,t.value);return 0!==r?r:a.inclusive&&!t.inclusive?1:!a.inclusive&&t.inclusive?-1:0}class Yr{constructor(t){this.value=t}static empty(){return new Yr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let o=0;o<t.length-1;++o)if(r=(r.mapValue.fields||{})[t.get(o)],!Wi(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ci(r)}setAll(t){let r=ke.emptyPath(),o={},u=[];t.forEach((m,b)=>{if(!r.isImmediateParentOf(b)){const F=this.getFieldsMap(r);this.applyChanges(F,o,u),o={},u=[],r=b.popLast()}m?o[b.lastSegment()]=Ci(m):u.push(b.lastSegment())});const d=this.getFieldsMap(r);this.applyChanges(d,o,u)}delete(t){const r=this.field(t.popLast());Wi(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return ts(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let o=0;o<t.length;++o){let u=r.mapValue.fields[t.get(o)];Wi(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[t.get(o)]=u),r=u}return r.mapValue.fields}applyChanges(t,r,o){Qs(r,(u,d)=>t[u]=d);for(const u of o)delete t[u]}clone(){return new Yr(Ci(this.value))}}function co(a){const t=[];return Qs(a.fields,(r,o)=>{const u=new ke([r]);if(Wi(o)){const d=co(o.mapValue).fields;if(0===d.length)t.push(u);else for(const m of d)t.push(u.child(m))}else t.push(u)}),new Xr(t)}class ar{constructor(t,r,o,u,d,m,b){this.key=t,this.documentType=r,this.version=o,this.readTime=u,this.createTime=d,this.data=m,this.documentState=b}static newInvalidDocument(t){return new ar(t,0,en.min(),en.min(),en.min(),Yr.empty(),0)}static newFoundDocument(t,r,o,u){return new ar(t,1,r,en.min(),o,u,0)}static newNoDocument(t,r){return new ar(t,2,r,en.min(),en.min(),Yr.empty(),0)}static newUnknownDocument(t,r){return new ar(t,3,r,en.min(),en.min(),Yr.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(en.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Yr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=en.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ar&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ds{constructor(t,r){this.position=t,this.inclusive=r}}function _s(a,t,r){let o=0;for(let u=0;u<a.position.length;u++){const d=t[u],m=a.position[u];if(o=d.field.isKeyField()?we.comparator(we.fromName(m.referenceValue),r.key):ji(m,r.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Co(a,t){if(null===a)return null===t;if(null===t||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!ts(a.position[r],t.position[r]))return!1;return!0}class xi{constructor(t,r="asc"){this.field=t,this.dir=r}}function H(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}class W{}class x extends W{constructor(t,r,o){super(),this.field=t,this.op=r,this.value=o}static create(t,r,o){return t.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(t,r,o):new jo(t,r,o):"array-contains"===r?new pa(t,o):"in"===r?new Va(t,o):"not-in"===r?new La(t,o):"array-contains-any"===r?new eo(t,o):new x(t,r,o)}static createKeyFieldInFilter(t,r,o){return"in"===r?new fa(t,o):new Jr(t,o)}matches(t){const r=t.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(ji(r,this.value)):null!==r&&Bi(this.value)===Bi(r)&&this.matchesComparison(ji(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Z extends W{constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new Z(t,r)}matches(t){return De(this)?void 0===this.filters.find(r=>!r.matches(t)):void 0!==this.filters.find(r=>r.matches(t))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function De(a){return"and"===a.op}function pn(a){return"or"===a.op}function Jn(a){return ys(a)&&De(a)}function ys(a){for(const t of a.filters)if(t instanceof Z)return!1;return!0}function Zs(a){if(a instanceof x)return a.field.canonicalString()+a.op.toString()+Mi(a.value);if(Jn(a))return a.filters.map(t=>Zs(t)).join(",");{const t=a.filters.map(r=>Zs(r)).join(",");return`${a.op}(${t})`}}function fi(a,t){return a instanceof x?(o=a,(u=t)instanceof x&&o.op===u.op&&o.field.isEqual(u.field)&&ts(o.value,u.value)):a instanceof Z?function(o,u){return u instanceof Z&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((d,m,b)=>d&&fi(m,u.filters[b]),!0)}(a,t):void Rt();var o,u}function Ts(a,t){const r=a.filters.concat(t);return Z.create(r,a.op)}function Ta(a){return a instanceof x?`${(r=a).field.canonicalString()} ${r.op} ${Mi(r.value)}`:a instanceof Z?function(r){return r.op.toString()+" {"+r.getFilters().map(Ta).join(" ,")+"}"}(a):"Filter";var r}class jo extends x{constructor(t,r,o){super(t,r,o),this.key=we.fromName(o.referenceValue)}matches(t){const r=we.comparator(t.key,this.key);return this.matchesComparison(r)}}class fa extends x{constructor(t,r){super(t,"in",r),this.keys=Da(0,r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class Jr extends x{constructor(t,r){super(t,"not-in",r),this.keys=Da(0,r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function Da(a,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map(o=>we.fromName(o.referenceValue))}class pa extends x{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Fs(r)&&ks(r.arrayValue,this.value)}}class Va extends x{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return null!==r&&ks(this.value.arrayValue,r)}}class La extends x{constructor(t,r){super(t,"not-in",r)}matches(t){if(ks(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return null!==r&&!ks(this.value.arrayValue,r)}}class eo extends x{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Fs(r)||!r.arrayValue.values)&&r.arrayValue.values.some(o=>ks(this.value.arrayValue,o))}}class Ua{constructor(t,r=null,o=[],u=[],d=null,m=null,b=null){this.path=t,this.collectionGroup=r,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=b,this.ue=null}}function ga(a,t=null,r=[],o=[],u=null,d=null,m=null){return new Ua(a,t,r,o,u,d,m)}function $o(a){const t=Ft(a);if(null===t.ue){let r=t.path.canonicalString();null!==t.collectionGroup&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(o=>Zs(o)).join(","),r+="|ob:",r+=t.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),ye(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>Mi(o)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>Mi(o)).join(",")),t.ue=r}return t.ue}function wo(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!H(a.orderBy[r],t.orderBy[r]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!fi(a.filters[r],t.filters[r]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!Co(a.startAt,t.startAt)&&Co(a.endAt,t.endAt)}function Aa(a){return we.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function ea(a,t){return a.filters.filter(r=>r instanceof x&&r.field.isEqual(t))}function To(a,t,r){let o=zi,u=!0;for(const d of ea(a,t)){let m=zi,b=!0;switch(d.op){case"<":case"<=":m=wi(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,b=!1;break;case"!=":case"not-in":m=zi}Ls({value:o,inclusive:u},{value:m,inclusive:b})<0&&(o=m,u=b)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(t)){const m=r.position[d];Ls({value:o,inclusive:u},{value:m,inclusive:r.inclusive})<0&&(o=m,u=r.inclusive);break}return{value:o,inclusive:u}}function lr(a,t,r){let o=es,u=!0;for(const d of ea(a,t)){let m=es,b=!0;switch(d.op){case">=":case">":m=yr(d.value),b=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,b=!1;break;case"!=":case"not-in":m=es}ha({value:o,inclusive:u},{value:m,inclusive:b})>0&&(o=m,u=b)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(t)){const m=r.position[d];ha({value:o,inclusive:u},{value:m,inclusive:r.inclusive})>0&&(o=m,u=r.inclusive);break}return{value:o,inclusive:u}}class Gr{constructor(t,r=null,o=[],u=[],d=null,m="F",b=null,F=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=b,this.endAt=F,this.ce=null,this.le=null,this.he=null}}function ni(a,t,r,o,u,d,m,b){return new Gr(a,t,r,o,u,d,m,b)}function Ri(a){return new Gr(a)}function Oi(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function ma(a){return null!==a.collectionGroup}function vs(a){const t=Ft(a);if(null===t.ce){t.ce=[];const r=new Set;for(const d of t.explicitOrderBy)t.ce.push(d),r.add(d.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let b=new Cr(ke.comparator);return m.filters.forEach(F=>{F.getFlattenedFilters().forEach($=>{$.isInequality()&&(b=b.add($.field))})}),b})(t).forEach(d=>{r.has(d.canonicalString())||d.isKeyField()||t.ce.push(new xi(d,o))}),r.has(ke.keyField().canonicalString())||t.ce.push(new xi(ke.keyField(),o))}return t.ce}function Ki(a){const t=Ft(a);return t.le||(t.le=function Tc(a,t){if("F"===a.limitType)return ga(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map(u=>new xi(u.field,"desc"===u.dir?"asc":"desc"));const r=a.endAt?new ds(a.endAt.position,a.endAt.inclusive):null,o=a.startAt?new ds(a.startAt.position,a.startAt.inclusive):null;return ga(a.path,a.collectionGroup,t,a.filters,a.limit,r,o)}}(t,vs(a))),t.le}function Do(a,t){const r=a.filters.concat([t]);return new Gr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function Ao(a,t,r){return new Gr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,r,a.startAt,a.endAt)}function Y(a,t){return wo(Ki(a),Ki(t))&&a.limitType===t.limitType}function C(a){return`${$o(Ki(a))}|lt:${a.limitType}`}function D(a){return`Query(target=${function(r){let o=r.path.canonicalString();return null!==r.collectionGroup&&(o+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(o+=`, filters: [${r.filters.map(u=>Ta(u)).join(", ")}]`),ye(r.limit)||(o+=", limit: "+r.limit),r.orderBy.length>0&&(o+=`, orderBy: [${r.orderBy.map(u=>{return`${(m=u).field.canonicalString()} (${m.dir})`;var m}).join(", ")}]`),r.startAt&&(o+=", startAt: ",o+=r.startAt.inclusive?"b:":"a:",o+=r.startAt.position.map(u=>Mi(u)).join(",")),r.endAt&&(o+=", endAt: ",o+=r.endAt.inclusive?"a:":"b:",o+=r.endAt.position.map(u=>Mi(u)).join(",")),`Target(${o})`}(Ki(a))}; limitType=${a.limitType})`}function L(a,t){return t.isFoundDocument()&&function(o,u){const d=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(d):we.isDocumentKey(o.path)?o.path.isEqual(d):o.path.isImmediateParentOf(d)}(a,t)&&function(o,u){for(const d of vs(o))if(!d.field.isKeyField()&&null===u.data.field(d.field))return!1;return!0}(a,t)&&function(o,u){for(const d of o.filters)if(!d.matches(u))return!1;return!0}(a,t)&&(u=t,!((o=a).startAt&&!function(m,b,F){const $=_s(m,b,F);return m.inclusive?$<=0:$<0}(o.startAt,vs(o),u)||o.endAt&&!function(m,b,F){const $=_s(m,b,F);return m.inclusive?$>=0:$>0}(o.endAt,vs(o),u)));var o,u}function K(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function he(a){return(t,r)=>{let o=!1;for(const u of vs(a)){const d=Se(u,t,r);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Se(a,t,r){const o=a.field.isKeyField()?we.comparator(t.key,r.key):function(d,m,b){const F=m.data.field(d),$=b.data.field(d);return null!==F&&null!==$?ji(F,$):Rt()}(a.field,t,r);switch(a.dir){case"asc":return o;case"desc":return-1*o;default:return Rt()}}class Fe{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),o=this.inner[r];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,t))return d}has(t){return void 0!==this.get(t)}set(t,r){const o=this.mapKeyFn(t),u=this.inner[o];if(void 0===u)return this.inner[o]=[[t,r]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],t))return void(u[d]=[t,r]);u.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),o=this.inner[r];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return 1===o.length?delete this.inner[r]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(t){Qs(this.inner,(r,o)=>{for(const[u,d]of o)t(u,d)})}isEmpty(){return Rs(this.inner)}size(){return this.innerSize}}const Et=new Pr(we.comparator);function wt(){return Et}const mn=new Pr(we.comparator);function hn(...a){let t=mn;for(const r of a)t=t.insert(r.key,r);return t}function hr(a){let t=mn;return a.forEach((r,o)=>t=t.insert(r,o.overlayedDocument)),t}function zn(){return Hn()}function Fn(){return Hn()}function Hn(){return new Fe(a=>a.toString(),(a,t)=>a.isEqual(t))}const Tr=new Pr(we.comparator),oi=new Cr(we.comparator);function Pn(...a){let t=oi;for(const r of a)t=t.add(r);return t}const Es=new Cr(zt);function ki(){return Es}function bo(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ie(t)?"-0":t}}function rs(a){return{integerValue:""+a}}function as(a,t){return dt(t)?rs(t):bo(a,t)}class cs{constructor(){this._=void 0}}function Ho(a,t,r){return a instanceof qi?function(u,d){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&ps(d)&&(d=xs(d)),d&&(m.fields.__previous_value__=d),{mapValue:m}}(r,t):a instanceof Os?P(a,t):a instanceof X?N(a,t):function(u,d){const m=to(u,d),b=de(m)+de(u.Pe);return ms(m)&&ms(u.Pe)?rs(b):bo(u.serializer,b)}(a,t)}function uo(a,t,r){return a instanceof Os?P(a,t):a instanceof X?N(a,t):r}function to(a,t){return a instanceof B?ms(o=t)||(d=o)&&"doubleValue"in d?t:{integerValue:0}:null;var o,d}class qi extends cs{}class Os extends cs{constructor(t){super(),this.elements=t}}function P(a,t){const r=nt(t);for(const o of a.elements)r.some(u=>ts(u,o))||r.push(o);return{arrayValue:{values:r}}}class X extends cs{constructor(t){super(),this.elements=t}}function N(a,t){let r=nt(t);for(const o of a.elements)r=r.filter(u=>!ts(u,o));return{arrayValue:{values:r}}}class B extends cs{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function de(a){return dn(a.integerValue||a.doubleValue)}function nt(a){return Fs(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class Ot{constructor(t,r){this.field=t,this.transform=r}}class mr{constructor(t,r){this.version=t,this.transformResults=r}}class xn{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new xn}static exists(t){return new xn(void 0,t)}static updateTime(t){return new xn(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Gn(a,t){return void 0!==a.updateTime?t.isFoundDocument()&&t.version.isEqual(a.updateTime):void 0===a.exists||a.exists===t.isFoundDocument()}class fr{}function ri(a,t){if(!a.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return a.isNoDocument()?new Us(a.key,xn.none()):new vn(a.key,a.data,xn.none());{const r=a.data,o=Yr.empty();let u=new Cr(ke.comparator);for(let d of t.fields)if(!u.has(d)){let m=r.field(d);null===m&&d.length>1&&(d=d.popLast(),m=r.field(d)),null===m?o.delete(d):o.set(d,m),u=u.add(d)}return new _r(a.key,o,new Xr(u.toArray()),xn.none())}}function ir(a,t,r){a instanceof vn?function(u,d,m){const b=u.value.clone(),F=pi(u.fieldTransforms,d,m.transformResults);b.setAll(F),d.convertToFoundDocument(m.version,b).setHasCommittedMutations()}(a,t,r):a instanceof _r?function(u,d,m){if(!Gn(u.precondition,d))return void d.convertToUnknownDocument(m.version);const b=pi(u.fieldTransforms,d,m.transformResults),F=d.data;F.setAll(Ti(u)),F.setAll(b),d.convertToFoundDocument(m.version,F).setHasCommittedMutations()}(a,t,r):t.convertToNoDocument(r.version).setHasCommittedMutations()}function Vr(a,t,r,o){return a instanceof vn?function(d,m,b,F){if(!Gn(d.precondition,m))return b;const $=d.value.clone(),re=is(d.fieldTransforms,F,m);return $.setAll(re),m.convertToFoundDocument(m.version,$).setHasLocalMutations(),null}(a,t,r,o):a instanceof _r?function(d,m,b,F){if(!Gn(d.precondition,m))return b;const $=is(d.fieldTransforms,F,m),re=m.data;return re.setAll(Ti(d)),re.setAll($),m.convertToFoundDocument(m.version,re).setHasLocalMutations(),null===b?null:b.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(pe=>pe.field))}(a,t,r,o):(b=r,Gn(a.precondition,m=t)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):b);var m,b}function pr(a,t){let r=null;for(const o of a.fieldTransforms){const u=t.data.field(o.field),d=to(o.transform,u||null);null!=d&&(null===r&&(r=Yr.empty()),r.set(o.field,d))}return r||null}function Yt(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&(u=t.fieldTransforms,!!(void 0===(o=a.fieldTransforms)&&void 0===u||o&&u&&Un(o,u,(d,m)=>function fn(a,t){return a.field.isEqual(t.field)&&(u=t.transform,(o=a.transform)instanceof Os&&u instanceof Os||o instanceof X&&u instanceof X?Un(o.elements,u.elements,ts):o instanceof B&&u instanceof B?ts(o.Pe,u.Pe):o instanceof qi&&u instanceof qi);var o,u}(d,m))))&&(0===a.type?a.value.isEqual(t.value):1!==a.type||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask));var o,u}class vn extends fr{constructor(t,r,o,u=[]){super(),this.key=t,this.value=r,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class _r extends fr{constructor(t,r,o,u,d=[]){super(),this.key=t,this.data=r,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function Ti(a){const t=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const o=a.data.field(r);t.set(r,o)}}),t}function pi(a,t,r){const o=new Map;_t(a.length===r.length);for(let u=0;u<r.length;u++){const d=a[u],m=d.transform,b=t.data.field(d.field);o.set(d.field,uo(m,b,r[u]))}return o}function is(a,t,r){const o=new Map;for(const u of a){const d=u.transform,m=r.data.field(u.field);o.set(u.field,Ho(d,m,t))}return o}class Us extends fr{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gi extends fr{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zr{constructor(t,r,o,u){this.batchId=t,this.localWriteTime=r,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(t,r){const o=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(t.key)&&ir(d,t,o[u])}}applyToLocalView(t,r){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(r=Vr(o,t,r,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(r=Vr(o,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const o=Fn();return this.mutations.forEach(u=>{const d=t.get(u.key),m=d.overlayedDocument;let b=this.applyToLocalView(m,d.mutatedFields);b=r.has(u.key)?null:b;const F=ri(m,b);null!==F&&o.set(u.key,F),m.isValidDocument()||m.convertToNoDocument(en.min())}),o}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Pn())}isEqual(t){return this.batchId===t.batchId&&Un(this.mutations,t.mutations,(r,o)=>Yt(r,o))&&Un(this.baseMutations,t.baseMutations,(r,o)=>Yt(r,o))}}class lo{constructor(t,r,o,u){this.batch=t,this.commitVersion=r,this.mutationResults=o,this.docVersions=u}static from(t,r,o){_t(t.mutations.length===o.length);let u=function(){return Tr}();const d=t.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new lo(t,r,o,u)}}class Zn{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class El{constructor(t,r){this.count=t,this.unchangedNames=r}}var ai,jn;function Dc(a){switch(a){default:return Rt();case it.CANCELLED:case it.UNKNOWN:case it.DEADLINE_EXCEEDED:case it.RESOURCE_EXHAUSTED:case it.INTERNAL:case it.UNAVAILABLE:case it.UNAUTHENTICATED:return!1;case it.INVALID_ARGUMENT:case it.NOT_FOUND:case it.ALREADY_EXISTS:case it.PERMISSION_DENIED:case it.FAILED_PRECONDITION:case it.ABORTED:case it.OUT_OF_RANGE:case it.UNIMPLEMENTED:case it.DATA_LOSS:return!0}}function tc(a){if(void 0===a)return In("GRPC error has no .code"),it.UNKNOWN;switch(a){case ai.OK:return it.OK;case ai.CANCELLED:return it.CANCELLED;case ai.UNKNOWN:return it.UNKNOWN;case ai.DEADLINE_EXCEEDED:return it.DEADLINE_EXCEEDED;case ai.RESOURCE_EXHAUSTED:return it.RESOURCE_EXHAUSTED;case ai.INTERNAL:return it.INTERNAL;case ai.UNAVAILABLE:return it.UNAVAILABLE;case ai.UNAUTHENTICATED:return it.UNAUTHENTICATED;case ai.INVALID_ARGUMENT:return it.INVALID_ARGUMENT;case ai.NOT_FOUND:return it.NOT_FOUND;case ai.ALREADY_EXISTS:return it.ALREADY_EXISTS;case ai.PERMISSION_DENIED:return it.PERMISSION_DENIED;case ai.FAILED_PRECONDITION:return it.FAILED_PRECONDITION;case ai.ABORTED:return it.ABORTED;case ai.OUT_OF_RANGE:return it.OUT_OF_RANGE;case ai.UNIMPLEMENTED:return it.UNIMPLEMENTED;case ai.DATA_LOSS:return it.DATA_LOSS;default:return Rt()}}(jn=ai||(ai={}))[jn.OK=0]="OK",jn[jn.CANCELLED=1]="CANCELLED",jn[jn.UNKNOWN=2]="UNKNOWN",jn[jn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jn[jn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jn[jn.NOT_FOUND=5]="NOT_FOUND",jn[jn.ALREADY_EXISTS=6]="ALREADY_EXISTS",jn[jn.PERMISSION_DENIED=7]="PERMISSION_DENIED",jn[jn.UNAUTHENTICATED=16]="UNAUTHENTICATED",jn[jn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jn[jn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jn[jn.ABORTED=10]="ABORTED",jn[jn.OUT_OF_RANGE=11]="OUT_OF_RANGE",jn[jn.UNIMPLEMENTED=12]="UNIMPLEMENTED",jn[jn.INTERNAL=13]="INTERNAL",jn[jn.UNAVAILABLE=14]="UNAVAILABLE",jn[jn.DATA_LOSS=15]="DATA_LOSS";function _a(){return new TextEncoder}const Il=new Jt([4294967295,4294967295],0);function ta(a){const t=_a().encode(a),r=new St;return r.update(t),new Uint8Array(r.digest())}function nc(a){const t=new DataView(a.buffer),r=t.getUint32(0,!0),o=t.getUint32(4,!0),u=t.getUint32(8,!0),d=t.getUint32(12,!0);return[new Jt([r,o],0),new Jt([u,d],0)]}class Is{constructor(t,r,o){if(this.bitmap=t,this.padding=r,this.hashCount=o,r<0||r>=8)throw new Qn(`Invalid padding: ${r}`);if(o<0)throw new Qn(`Invalid hash count: ${o}`);if(t.length>0&&0===this.hashCount)throw new Qn(`Invalid hash count: ${o}`);if(0===t.length&&0!==r)throw new Qn(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*t.length-r,this.Te=Jt.fromNumber(this.Ie)}Ee(t,r,o){let u=t.add(r.multiply(Jt.fromNumber(o)));return 1===u.compare(Il)&&(u=new Jt([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const r=ta(t),[o,u]=nc(r);for(let d=0;d<this.hashCount;d++){const m=this.Ee(o,u,d);if(!this.de(m))return!1}return!0}static create(t,r,o){const u=t%8==0?0:8-t%8,d=new Uint8Array(Math.ceil(t/8)),m=new Is(d,u,r);return o.forEach(b=>m.insert(b)),m}insert(t){if(0===this.Ie)return;const r=ta(t),[o,u]=nc(r);for(let d=0;d<this.hashCount;d++){const m=this.Ee(o,u,d);this.Ae(m)}}Ae(t){const r=Math.floor(t/8);this.bitmap[r]|=1<<t%8}}class Qn extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rc{constructor(t,r,o,u,d){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(t,r,o){const u=new Map;return u.set(t,mi.createSynthesizedTargetChangeForCurrentChange(t,r,o)),new rc(en.min(),u,new Pr(zt),wt(),Pn())}}class mi{constructor(t,r,o,u,d){this.resumeToken=t,this.current=r,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(t,r,o){return new mi(o,r,Pn(),Pn(),Pn())}}class So{constructor(t,r,o,u){this.Re=t,this.removedTargetIds=r,this.key=o,this.Ve=u}}class ba{constructor(t,r){this.targetId=t,this.me=r}}class Sa{constructor(t,r,o=Hr.EMPTY_BYTE_STRING,u=null){this.state=t,this.targetIds=r,this.resumeToken=o,this.cause=u}}class Di{constructor(){this.fe=0,this.ge=As(),this.pe=Hr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Pn(),r=Pn(),o=Pn();return this.ge.forEach((u,d)=>{switch(d){case 0:t=t.add(u);break;case 2:r=r.add(u);break;case 1:o=o.add(u);break;default:Rt()}}),new mi(this.pe,this.ye,t,r,o)}Ce(){this.we=!1,this.ge=As()}Fe(t,r){this.we=!0,this.ge=this.ge.insert(t,r)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,_t(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Su{constructor(t){this.Le=t,this.Be=new Map,this.ke=wt(),this.qe=Ds(),this.Qe=new Pr(zt)}Ke(t){for(const r of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(r,t.Ve):this.Ue(r,t.key,t.Ve);for(const r of t.removedTargetIds)this.Ue(r,t.key,t.Ve)}We(t){this.forEachTarget(t,r=>{const o=this.Ge(r);switch(t.state){case 0:this.ze(r)&&o.De(t.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(t.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(o.Ne(),o.De(t.resumeToken));break;case 4:this.ze(r)&&(this.je(r),o.De(t.resumeToken));break;default:Rt()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.Be.forEach((o,u)=>{this.ze(u)&&r(u)})}He(t){const r=t.targetId,o=t.me.count,u=this.Je(r);if(u){const d=u.target;if(Aa(d))if(0===o){const m=new we(d.path);this.Ue(r,m,ar.newNoDocument(m,en.min()))}else _t(1===o);else{const m=this.Ye(r);if(m!==o){const b=this.Ze(t),F=b?this.Xe(b,t,m):1;0!==F&&(this.je(r),this.Qe=this.Qe.insert(r,2===F?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(t){const r=t.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:d=0}=r;let m,b;try{m=si(o).toUint8Array()}catch(F){if(F instanceof Uo)return Kn("Decoding the base64 bloom filter in existence filter failed ("+F.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw F}try{b=new Is(m,u,d)}catch(F){return Kn(F instanceof Qn?"BloomFilter error: ":"Applying bloom filter failed: ",F),null}return 0===b.Ie?null:b}Xe(t,r,o){return r.me.count===o-this.nt(t,r.targetId)?0:2}nt(t,r){const o=this.Le.getRemoteKeysForTarget(r);let u=0;return o.forEach(d=>{const m=this.Le.tt(),b=`projects/${m.projectId}/databases/${m.database}/documents/${d.path.canonicalString()}`;t.mightContain(b)||(this.Ue(r,d,null),u++)}),u}rt(t){const r=new Map;this.Be.forEach((d,m)=>{const b=this.Je(m);if(b){if(d.current&&Aa(b.target)){const F=new we(b.target.path);null!==this.ke.get(F)||this.it(m,F)||this.Ue(m,F,ar.newNoDocument(F,t))}d.be&&(r.set(m,d.ve()),d.Ce())}});let o=Pn();this.qe.forEach((d,m)=>{let b=!0;m.forEachWhile(F=>{const $=this.Je(F);return!$||"TargetPurposeLimboResolution"===$.purpose||(b=!1,!1)}),b&&(o=o.add(d))}),this.ke.forEach((d,m)=>m.setReadTime(t));const u=new rc(t,r,this.Qe,this.ke,o);return this.ke=wt(),this.qe=Ds(),this.Qe=new Pr(zt),u}$e(t,r){if(!this.ze(t))return;const o=this.it(t,r.key)?2:0;this.Ge(t).Fe(r.key,o),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(t))}Ue(t,r,o){if(!this.ze(t))return;const u=this.Ge(t);this.it(t,r)?u.Fe(r,1):u.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(t)),o&&(this.ke=this.ke.insert(r,o))}removeTarget(t){this.Be.delete(t)}Ye(t){const r=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let r=this.Be.get(t);return r||(r=new Di,this.Be.set(t,r)),r}st(t){let r=this.qe.get(t);return r||(r=new Cr(zt),this.qe=this.qe.insert(t,r)),r}ze(t){const r=null!==this.Je(t);return r||ot("WatchChangeAggregator","Detected inactive target",t),r}Je(t){const r=this.Be.get(t);return r&&r.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Di),this.Le.getRemoteKeysForTarget(t).forEach(r=>{this.Ue(t,r,null)})}it(t,r){return this.Le.getRemoteKeysForTarget(t).has(r)}}function Ds(){return new Pr(we.comparator)}function As(){return new Pr(we.comparator)}const Kc={asc:"ASCENDING",desc:"DESCENDING"},na={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qc={and:"AND",or:"OR"};class no{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Ba(a,t){return a.useProto3Json||ye(t)?t:{value:t}}function ic(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qc(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function Pu(a,t){return ic(a,t.toTimestamp())}function Ni(a){return _t(!!a),en.fromTimestamp(function(r){const o=os(r);return new Zt(o.seconds,o.nanos)}(a))}function Mu(a,t){return ja(a,t).canonicalString()}function ja(a,t){const r=(u=a,new Rn(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===t?r:r.child(t)}function Cl(a){const t=Rn.fromString(a);return _t(ra(t)),t}function Xc(a,t){return Mu(a.databaseId,t.path)}function ya(a,t){const r=Cl(t);if(r.get(1)!==a.databaseId.projectId)throw new xt(it.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new xt(it.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new we(Ed(r))}function Yh(a,t){return Mu(a.databaseId,t)}function wl(a){const t=Cl(a);return 4===t.length?Rn.emptyPath():Ed(t)}function Ru(a){return new Rn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Ed(a){return _t(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function Jh(a,t,r){return{name:Xc(a,t),fields:r.value.mapValue.fields}}function Zh(a,t,r){const o=ya(a,t.name),u=Ni(t.updateTime),d=t.createTime?Ni(t.createTime):en.min(),m=new Yr({mapValue:{fields:t.fields}}),b=ar.newFoundDocument(o,u,d,m);return r&&b.setHasCommittedMutations(),r?b.setHasCommittedMutations():b}function Ou(a,t){let r;if(t instanceof vn)r={update:Jh(a,t.key,t.value)};else if(t instanceof Us)r={delete:Xc(a,t.key)};else if(t instanceof _r)r={update:Jh(a,t.key,t.data),updateMask:Ac(t.fieldMask)};else{if(!(t instanceof gi))return Rt();r={verify:Xc(a,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(o=>function(d,m){const b=m.transform;if(b instanceof qi)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(b instanceof Os)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:b.elements}};if(b instanceof X)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:b.elements}};if(b instanceof B)return{fieldPath:m.field.canonicalString(),increment:b.Pe};throw Rt()}(0,o))),t.precondition.isNone||(r.currentDocument=void 0!==(d=t.precondition).updateTime?{updateTime:Pu(a,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:Rt()),r;var d}function Nu(a,t){const r=t.currentDocument?void 0!==(d=t.currentDocument).updateTime?xn.updateTime(Ni(d.updateTime)):void 0!==d.exists?xn.exists(d.exists):xn.none():xn.none(),o=t.updateTransforms?t.updateTransforms.map(u=>function(m,b){let F=null;"setToServerValue"in b?(_t("REQUEST_TIME"===b.setToServerValue),F=new qi):"appendMissingElements"in b?F=new Os(b.appendMissingElements.values||[]):"removeAllFromArray"in b?F=new X(b.removeAllFromArray.values||[]):"increment"in b?F=new B(m,b.increment):Rt();const $=ke.fromServerFormat(b.fieldPath);return new Ot($,F)}(a,u)):[];var d;if(t.update){const u=ya(a,t.update.name),d=new Yr({mapValue:{fields:t.update.fields}});if(t.updateMask){const m=new Xr((t.updateMask.fieldPaths||[]).map(re=>ke.fromServerFormat(re)));return new _r(u,d,m,r,o)}return new vn(u,d,r,o)}if(t.delete){const u=ya(a,t.delete);return new Us(u,r)}if(t.verify){const u=ya(a,t.verify);return new gi(u,r)}return Rt()}function M(a,t){return{documents:[Yh(a,t.path)]}}function w(a,t){const r={structuredQuery:{}},o=t.path;let u;null!==t.collectionGroup?(u=o,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(u=o.popLast(),r.structuredQuery.from=[{collectionId:o.lastSegment()}]),r.parent=Yh(a,u);const d=function($){if(0!==$.length)return Fi(Z.create($,"and"))}(t.filters);d&&(r.structuredQuery.where=d);const m=function($){if(0!==$.length)return $.map(re=>{return{field:er((Oe=re).field),direction:At(Oe.dir)};var Oe})}(t.orderBy);m&&(r.structuredQuery.orderBy=m);const b=Ba(a,t.limit);return null!==b&&(r.structuredQuery.limit=b),t.startAt&&(r.structuredQuery.startAt={before:($=t.startAt).inclusive,values:$.position}),t.endAt&&(r.structuredQuery.endAt=function($){return{before:!$.inclusive,values:$.position}}(t.endAt)),{_t:r,parent:u};var $}function j(a){let t=wl(a.parent);const r=a.structuredQuery,o=r.from?r.from.length:0;let u=null;if(o>0){_t(1===o);const re=r.from[0];re.allDescendants?u=re.collectionId:t=t.child(re.collectionId)}let d=[];r.where&&(d=function(pe){const Oe=Te(pe);return Oe instanceof Z&&Jn(Oe)?Oe.getFilters():[Oe]}(r.where));let m=[];r.orderBy&&(m=r.orderBy.map(Oe=>{return new xi(dr((Ht=Oe).field),function(Qt){switch(Qt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ht.direction));var Ht}));let b=null;r.limit&&(b=function(pe){let Oe;return Oe="object"==typeof pe?pe.value:pe,ye(Oe)?null:Oe}(r.limit));let F=null;var pe;r.startAt&&(F=new ds((pe=r.startAt).values||[],!!pe.before));let $=null;return r.endAt&&($=function(pe){return new ds(pe.values||[],!pe.before)}(r.endAt)),ni(t,u,m,d,b,"F",F,$)}function Te(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const o=dr(r.unaryFilter.field);return x.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=dr(r.unaryFilter.field);return x.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=dr(r.unaryFilter.field);return x.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=dr(r.unaryFilter.field);return x.create(m,"!=",{nullValue:"NULL_VALUE"});default:return Rt()}}(a):void 0!==a.fieldFilter?x.create(dr((r=a).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Rt()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return Z.create(r.compositeFilter.filters.map(o=>Te(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return Rt()}}(r.compositeFilter.op))}(a):Rt();var r}function At(a){return Kc[a]}function pt(a){return na[a]}function _n(a){return qc[a]}function er(a){return{fieldPath:a.canonicalString()}}function dr(a){return ke.fromServerFormat(a.fieldPath)}function Fi(a){return a instanceof x?function(r){if("=="===r.op){if(Js(r.value))return{unaryFilter:{field:er(r.field),op:"IS_NAN"}};if(Jo(r.value))return{unaryFilter:{field:er(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(Js(r.value))return{unaryFilter:{field:er(r.field),op:"IS_NOT_NAN"}};if(Jo(r.value))return{unaryFilter:{field:er(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:er(r.field),op:pt(r.op),value:r.value}}}(a):a instanceof Z?function(r){const o=r.getFilters().map(u=>Fi(u));return 1===o.length?o[0]:{compositeFilter:{op:_n(r.op),filters:o}}}(a):Rt()}function Ac(a){const t=[];return a.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function ra(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class ho{constructor(t,r,o,u,d=en.min(),m=en.min(),b=Hr.EMPTY_BYTE_STRING,F=null){this.target=t,this.targetId=r,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=b,this.expectedCount=F}withSequenceNumber(t){return new ho(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class Bs{constructor(t){this.ct=t}}function xu(a,t){const r=t.key,o={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:ku(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())o.document={name:Xc(d=a.ct,(m=t).key),fields:m.data.value.mapValue.fields,updateTime:ic(d,m.version.toTimestamp()),createTime:ic(d,m.createTime.toTimestamp())};else if(t.isNoDocument())o.noDocument={path:r.path.toArray(),readTime:$a(t.version)};else{if(!t.isUnknownDocument())return Rt();o.unknownDocument={path:r.path.toArray(),version:$a(t.version)}}var d,m;return o}function ku(a){const t=a.toTimestamp();return[t.seconds,t.nanoseconds]}function $a(a){const t=a.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Yc(a){const t=new Zt(a.seconds,a.nanoseconds);return en.fromTimestamp(t)}function Mr(a,t){const r=(t.baseMutations||[]).map(d=>Nu(a.ct,d));for(let d=0;d<t.mutations.length-1;++d)d+1<t.mutations.length&&void 0!==t.mutations[d+1].transform&&(t.mutations[d].updateTransforms=t.mutations[d+1].transform.fieldTransforms,t.mutations.splice(d+1,1),++d);const o=t.mutations.map(d=>Nu(a.ct,d)),u=Zt.fromMillis(t.localWriteTimeMs);return new zr(t.batchId,u,r,o)}function Ha(a){const t=Yc(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?Yc(a.lastLimboFreeSnapshotVersion):en.min();let o;return o=void 0!==a.query.documents?(_t(1===(d=a.query).documents.length),Ki(Ri(wl(d.documents[0])))):function(d){return Ki(j(d))}(a.query),new ho(o,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,t,r,Hr.fromBase64String(a.resumeToken));var d}function Jc(a,t){const r=$a(t.snapshotVersion),o=$a(t.lastLimboFreeSnapshotVersion);let u;u=Aa(t.target)?M(a.ct,t.target):w(a.ct,t.target)._t;const d=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:$o(t.target),readTime:r,resumeToken:d,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function js(a){const t=j({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?Ao(t,t.limit,"L"):t}function Id(a,t){return new Zn(t.largestBatchId,Nu(a.ct,t.overlayMutation))}function sc(a,t){const r=t.path.lastSegment();return[a,Ze(t.path.popLast()),r]}function oc(a,t,r,o){return{indexId:a,uid:t,sequenceNumber:r,readTime:$a(o.readTime),documentKey:Ze(o.documentKey.path),largestBatchId:o.largestBatchId}}class Ko{getBundleMetadata(t,r){return ef(t).get(r).next(o=>{if(o)return{id:(d=o).bundleId,createTime:Yc(d.createTime),version:d.version};var d})}saveBundleMetadata(t,r){return ef(t).put({bundleId:(u=r).id,createTime:$a(Ni(u.createTime)),version:u.version});var u}getNamedQuery(t,r){return Zc(t).get(r).next(o=>{if(o)return{name:(d=o).name,query:js(d.bundledQuery),readTime:Yc(d.readTime)};var d})}saveNamedQuery(t,r){return Zc(t).put({name:(u=r).name,readTime:$a(Ni(u.readTime)),bundledQuery:u.bundledQuery});var u}}function ef(a){return wr(a,"bundles")}function Zc(a){return wr(a,"namedQueries")}class Dl{constructor(t,r){this.serializer=t,this.userId=r}static lt(t,r){return new Dl(t,r.uid||"")}getOverlay(t,r){return ro(t).get(sc(this.userId,r)).next(o=>o?Id(this.serializer,o):null)}getOverlays(t,r){const o=zn();return Ne.forEach(r,u=>this.getOverlay(t,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(t,r,o){const u=[];return o.forEach((d,m)=>{const b=new Zn(r,m);u.push(this.ht(t,b))}),Ne.waitFor(u)}removeOverlaysForBatchId(t,r,o){const u=new Set;r.forEach(m=>u.add(Ze(m.getCollectionPath())));const d=[];return u.forEach(m=>{const b=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(ro(t).j("collectionPathOverlayIndex",b))}),Ne.waitFor(d)}getOverlaysForCollection(t,r,o){const u=zn(),d=Ze(r),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return ro(t).U("collectionPathOverlayIndex",m).next(b=>{for(const F of b){const $=Id(this.serializer,F);u.set($.getKey(),$)}return u})}getOverlaysForCollectionGroup(t,r,o,u){const d=zn();let m;const b=IDBKeyRange.bound([this.userId,r,o],[this.userId,r,Number.POSITIVE_INFINITY],!0);return ro(t).J({index:"collectionGroupOverlayIndex",range:b},(F,$,re)=>{const pe=Id(this.serializer,$);d.size()<u||pe.largestBatchId===m?(d.set(pe.getKey(),pe),m=pe.largestBatchId):re.done()}).next(()=>d)}ht(t,r){return ro(t).put(function(u,d,m){const[b,F,$]=sc(d,m.mutation.key);return{userId:d,collectionPath:F,documentId:$,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Ou(u.ct,m.mutation)}}(this.serializer,this.userId,r))}}function ro(a){return wr(a,"documentOverlays")}class tf{Pt(t){return wr(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(r=>{const o=r?.value;return o?Hr.fromUint8Array(o):Hr.EMPTY_BYTE_STRING})}setSessionToken(t,r){return this.Pt(t).put({name:"sessionToken",value:r.toUint8Array()})}}class Ga{constructor(){}It(t,r){this.Tt(t,r),r.Et()}Tt(t,r){if("nullValue"in t)this.dt(r,5);else if("booleanValue"in t)this.dt(r,10),r.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(r,15),r.At(dn(t.integerValue));else if("doubleValue"in t){const o=dn(t.doubleValue);isNaN(o)?this.dt(r,13):(this.dt(r,15),Ie(o)?r.At(0):r.At(o))}else if("timestampValue"in t){let o=t.timestampValue;this.dt(r,20),"string"==typeof o&&(o=os(o)),r.Rt(`${o.seconds||""}`),r.At(o.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,r),this.ft(r);else if("bytesValue"in t)this.dt(r,30),r.gt(si(t.bytesValue)),this.ft(r);else if("referenceValue"in t)this.yt(t.referenceValue,r);else if("geoPointValue"in t){const o=t.geoPointValue;this.dt(r,45),r.At(o.latitude||0),r.At(o.longitude||0)}else"mapValue"in t?Io(t)?this.dt(r,Number.MAX_SAFE_INTEGER):Vs(t)?this.wt(t.mapValue,r):(this.St(t.mapValue,r),this.ft(r)):"arrayValue"in t?(this.bt(t.arrayValue,r),this.ft(r)):Rt()}Vt(t,r){this.dt(r,25),this.Dt(t,r)}Dt(t,r){r.Rt(t)}St(t,r){const o=t.fields||{};this.dt(r,55);for(const u of Object.keys(o))this.Vt(u,r),this.Tt(o[u],r)}wt(t,r){var o,u;const d=t.fields||{};this.dt(r,53);const m="value",b=(null===(u=null===(o=d[m].arrayValue)||void 0===o?void 0:o.values)||void 0===u?void 0:u.length)||0;this.dt(r,15),r.At(dn(b)),this.Vt(m,r),this.Tt(d[m],r)}bt(t,r){const o=t.values||[];this.dt(r,50);for(const u of o)this.Tt(u,r)}yt(t,r){this.dt(r,37),we.fromName(t).path.forEach(o=>{this.dt(r,60),this.Dt(o,r)})}dt(t,r){t.At(r)}ft(t){t.At(2)}}function Al(a){if(0===a)return 8;let t=0;return!(a>>4)&&(t+=4,a<<=4),!(a>>6)&&(t+=2,a<<=2),!(a>>7)&&(t+=1),t}function bl(a){const t=64-function(o){let u=0;for(let d=0;d<8;++d){const m=Al(255&o[d]);if(u+=m,8!==m)break}return u}(a);return Math.ceil(t/8)}Ga.vt=new Ga;class bc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){const r=t[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Ft(o.value),o=r.next();this.Mt()}xt(t){const r=t[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Ot(o.value),o=r.next();this.Nt()}Lt(t){for(const r of t){const o=r.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=r.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Bt(t){for(const r of t){const o=r.charCodeAt(0);if(o<128)this.Ot(o);else if(o<2048)this.Ot(960|o>>>6),this.Ot(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|o>>>12),this.Ot(128|63&o>>>6),this.Ot(128|63&o);else{const u=r.codePointAt(0);this.Ot(240|u>>>18),this.Ot(128|63&u>>>12),this.Ot(128|63&u>>>6),this.Ot(128|63&u)}}this.Nt()}kt(t){const r=this.qt(t),o=bl(r);this.Qt(1+o),this.buffer[this.position++]=255&o;for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=255&r[u]}Kt(t){const r=this.qt(t),o=bl(r);this.Qt(1+o),this.buffer[this.position++]=~(255&o);for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){const r=function(d){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,d,!1),new Uint8Array(m.buffer)}(t),o=!!(128&r[0]);r[0]^=o?255:128;for(let u=1;u<r.length;++u)r[u]^=o?255:0;return r}Ft(t){const r=255&t;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(t){const r=255&t;0===r?(this.Gt(0),this.Gt(255)):255===r?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){const r=t+this.position;if(r<=this.buffer.length)return;let o=2*this.buffer.length;o<r&&(o=r);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Fu{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}}class Sl{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}}class za{constructor(){this.jt=new bc,this.Ht=new Fu(this.jt),this.Jt=new Sl(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return 0===t?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class fo{constructor(t,r,o,u){this.indexId=t,this.documentKey=r,this.arrayValue=o,this.directionalValue=u}Zt(){const t=this.directionalValue.length,r=0===t||255===this.directionalValue[t-1]?t+1:t,o=new Uint8Array(r);return o.set(this.directionalValue,0),r!==t?o.set([0],this.directionalValue.length):++o[o.length-1],new fo(this.indexId,this.documentKey,this.arrayValue,o)}}function Wn(a,t){let r=a.indexId-t.indexId;return 0!==r?r:(r=Cd(a.arrayValue,t.arrayValue),0!==r?r:(r=Cd(a.directionalValue,t.directionalValue),0!==r?r:we.comparator(a.documentKey,t.documentKey)))}function Cd(a,t){for(let r=0;r<a.length&&r<t.length;++r){const o=a[r]-t[r];if(0!==o)return o}return a.length-t.length}class nf{constructor(t){this.Xt=new Cr((r,o)=>ke.comparator(r.field,o.field)),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(const r of t.filters){const o=r;o.isInequality()?this.Xt=this.Xt.add(o):this.tn.push(o)}}get nn(){return this.Xt.size>1}rn(t){if(_t(t.collectionGroup===this.collectionId),this.nn)return!1;const r=Xe(t);if(void 0!==r&&!this.sn(r))return!1;const o=Nt(t);let u=new Set,d=0,m=0;for(;d<o.length&&this.sn(o[d]);++d)u=u.add(o[d].fieldPath.canonicalString());if(d===o.length)return!0;if(this.Xt.size>0){const b=this.Xt.getIterator().getNext();if(!u.has(b.field.canonicalString())){const F=o[d];if(!this.on(b,F)||!this._n(this.en[m++],F))return!1}++d}for(;d<o.length;++d)if(m>=this.en.length||!this._n(this.en[m++],o[d]))return!1;return!0}an(){if(this.nn)return null;let t=new Cr(ke.comparator);const r=[];for(const o of this.tn)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)r.push(new q(o.field,2));else{if(t.has(o.field))continue;t=t.add(o.field),r.push(new q(o.field,0))}for(const o of this.en)o.field.isKeyField()||t.has(o.field)||(t=t.add(o.field),r.push(new q(o.field,"asc"===o.dir?0:1)));return new Ce(Ce.UNKNOWN_ID,this.collectionId,r,se.empty())}sn(t){for(const r of this.tn)if(this.on(r,t))return!0;return!1}on(t,r){return!(void 0===t||!t.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===t.op||"array-contains-any"===t.op)}_n(t,r){return!!t.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===t.dir||1===r.kind&&"desc"===t.dir)}}function wd(a){var t,r;if(_t(a instanceof x||a instanceof Z),a instanceof x){if(a instanceof Va){const u=(null===(r=null===(t=a.value.arrayValue)||void 0===t?void 0:t.values)||void 0===r?void 0:r.map(d=>x.create(a.field,"==",d)))||[];return Z.create(u,"or")}return a}const o=a.filters.map(u=>wd(u));return Z.create(o,a.op)}function rf(a){if(0===a.getFilters().length)return[];const t=Dd(wd(a));return _t(Wa(t)),Td(t)||Pl(t)?[t]:t.getFilters()}function Td(a){return a instanceof x}function Pl(a){return a instanceof Z&&Jn(a)}function Wa(a){return Td(a)||Pl(a)||function(r){if(r instanceof Z&&pn(r)){for(const o of r.getFilters())if(!Td(o)&&!Pl(o))return!1;return!0}return!1}(a)}function Dd(a){if(_t(a instanceof x||a instanceof Z),a instanceof x)return a;if(1===a.filters.length)return Dd(a.filters[0]);const t=a.filters.map(o=>Dd(o));let r=Z.create(t,a.op);return r=Rl(r),Wa(r)?r:(_t(r instanceof Z),_t(De(r)),_t(r.filters.length>1),r.filters.reduce((o,u)=>Ad(o,u)))}function Ad(a,t){let r;return _t(a instanceof x||a instanceof Z),_t(t instanceof x||t instanceof Z),r=a instanceof x?t instanceof x?Z.create([a,t],"and"):Ml(a,t):t instanceof x?Ml(t,a):function(u,d){if(_t(u.filters.length>0&&d.filters.length>0),De(u)&&De(d))return Ts(u,d.getFilters());const m=pn(u)?u:d,b=pn(u)?d:u,F=m.filters.map($=>Ad($,b));return Z.create(F,"or")}(a,t),Rl(r)}function Ml(a,t){if(De(t))return Ts(t,a.getFilters());{const r=t.filters.map(o=>Ad(a,o));return Z.create(r,"or")}}function Rl(a){if(_t(a instanceof x||a instanceof Z),a instanceof x)return a;const t=a.getFilters();if(1===t.length)return Rl(t[0]);if(ys(a))return a;const r=t.map(u=>Rl(u)),o=[];return r.forEach(u=>{u instanceof x?o.push(u):u instanceof Z&&(u.op===a.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:Z.create(o,a.op)}class Kp{constructor(){this.un=new Ut}addToCollectionParentIndex(t,r){return this.un.add(r),Ne.resolve()}getCollectionParents(t,r){return Ne.resolve(this.un.getEntries(r))}addFieldIndex(t,r){return Ne.resolve()}deleteFieldIndex(t,r){return Ne.resolve()}deleteAllFieldIndexes(t){return Ne.resolve()}createTargetIndexes(t,r){return Ne.resolve()}getDocumentsMatchingTarget(t,r){return Ne.resolve(null)}getIndexType(t,r){return Ne.resolve(0)}getFieldIndexes(t,r){return Ne.resolve([])}getNextCollectionGroupToUpdate(t){return Ne.resolve(null)}getMinOffset(t,r){return Ne.resolve(Bt.min())}getMinOffsetFromCollectionGroup(t,r){return Ne.resolve(Bt.min())}updateCollectionGroup(t,r,o){return Ne.resolve()}updateIndexEntries(t,r){return Ne.resolve()}}class Ut{constructor(){this.index={}}add(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r]||new Cr(Rn.comparator),d=!u.has(o);return this.index[r]=u.add(o),d}has(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r];return u&&u.has(o)}getEntries(t){return(this.index[t]||new Cr(Rn.comparator)).toArray()}}const Rr=new Uint8Array(0);class Ol{constructor(t,r){this.databaseId=r,this.cn=new Ut,this.ln=new Fe(o=>$o(o),(o,u)=>wo(o,u)),this.uid=t.uid||""}addToCollectionParentIndex(t,r){if(!this.cn.has(r)){const o=r.lastSegment(),u=r.popLast();t.addOnCommittedListener(()=>{this.cn.add(r)});const d={collectionId:o,parent:Ze(u)};return Vu(t).put(d)}return Ne.resolve()}getCollectionParents(t,r){const o=[],u=IDBKeyRange.bound([r,""],[Nr(r),""],!1,!0);return Vu(t).U(u).next(d=>{for(const m of d){if(m.collectionId!==r)break;o.push(Mn(m.parent))}return o})}addFieldIndex(t,r){const o=Sc(t),u={indexId:(b=r).indexId,collectionGroup:b.collectionGroup,fields:b.fields.map(F=>[F.fieldPath.canonicalString(),F.kind])};var b;delete u.indexId;const d=o.add(u);if(r.indexState){const m=ia(t);return d.next(b=>{m.put(oc(b,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return d.next()}deleteFieldIndex(t,r){const o=Sc(t),u=ia(t),d=Lr(t);return o.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const r=Sc(t),o=Lr(t),u=ia(t);return r.j().next(()=>o.j()).next(()=>u.j())}createTargetIndexes(t,r){return Ne.forEach(this.hn(r),o=>this.getIndexType(t,o).next(u=>{if(0===u||1===u){const d=new nf(o).an();if(null!=d)return this.addFieldIndex(t,d)}}))}getDocumentsMatchingTarget(t,r){const o=Lr(t);let u=!0;const d=new Map;return Ne.forEach(this.hn(r),m=>this.Pn(t,m).next(b=>{u&&(u=!!b),d.set(m,b)})).next(()=>{if(u){let m=Pn();const b=[];return Ne.forEach(d,(F,$)=>{var kn;ot("IndexedDbIndexManager",`Using index ${kn=F,`id=${kn.indexId}|cg=${kn.collectionGroup}|f=${kn.fields.map(cr=>`${cr.fieldPath}:${cr.kind}`).join(",")}`} to execute ${$o(r)}`);const re=function(kn,cr){const Br=Xe(cr);if(void 0===Br)return null;for(const br of ea(kn,Br.fieldPath))switch(br.op){case"array-contains-any":return br.value.arrayValue.values||[];case"array-contains":return[br.value]}return null}($,F),pe=function(kn,cr){const Br=new Map;for(const br of Nt(cr))for(const rt of ea(kn,br.fieldPath))switch(rt.op){case"==":case"in":Br.set(br.fieldPath.canonicalString(),rt.value);break;case"not-in":case"!=":return Br.set(br.fieldPath.canonicalString(),rt.value),Array.from(Br.values())}return null}($,F),Oe=function(kn,cr){const Br=[];let br=!0;for(const rt of Nt(cr)){const Ae=0===rt.kind?To(kn,rt.fieldPath,kn.startAt):lr(kn,rt.fieldPath,kn.startAt);Br.push(Ae.value),br&&(br=Ae.inclusive)}return new ds(Br,br)}($,F),ut=function(kn,cr){const Br=[];let br=!0;for(const rt of Nt(cr)){const Ae=0===rt.kind?lr(kn,rt.fieldPath,kn.endAt):To(kn,rt.fieldPath,kn.endAt);Br.push(Ae.value),br&&(br=Ae.inclusive)}return new ds(Br,br)}($,F),Ht=this.In(F,$,Oe),nn=this.In(F,$,ut),Qt=this.Tn(F,$,pe),Vn=this.En(F.indexId,re,Ht,Oe.inclusive,nn,ut.inclusive,Qt);return Ne.forEach(Vn,Xn=>o.G(Xn,r.limit).next(kn=>{kn.forEach(cr=>{const Br=we.fromSegments(cr.documentKey);m.has(Br)||(m=m.add(Br),b.push(Br))})}))}).next(()=>b)}return Ne.resolve(null)})}hn(t){let r=this.ln.get(t);return r||(r=0===t.filters.length?[t]:rf(Z.create(t.filters,"and")).map(o=>ga(t.path,t.collectionGroup,t.orderBy,o.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,r),r)}En(t,r,o,u,d,m,b){const F=(null!=r?r.length:1)*Math.max(o.length,d.length),$=F/(null!=r?r.length:1),re=[];for(let pe=0;pe<F;++pe){const Oe=r?this.dn(r[pe/$]):Rr,ut=this.An(t,Oe,o[pe%$],u),Ht=this.Rn(t,Oe,d[pe%$],m),nn=b.map(Qt=>this.An(t,Oe,Qt,!0));re.push(...this.createRange(ut,Ht,nn))}return re}An(t,r,o,u){const d=new fo(t,we.empty(),r,o);return u?d:d.Zt()}Rn(t,r,o,u){const d=new fo(t,we.empty(),r,o);return u?d.Zt():d}Pn(t,r){const o=new nf(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(t,u).next(d=>{let m=null;for(const b of d)o.rn(b)&&(!m||b.fields.length>m.fields.length)&&(m=b);return m})}getIndexType(t,r){let o=2;const u=this.hn(r);return Ne.forEach(u,d=>this.Pn(t,d).next(m=>{m?0!==o&&m.fields.length<function(F){let $=new Cr(ke.comparator),re=!1;for(const pe of F.filters)for(const Oe of pe.getFlattenedFilters())Oe.field.isKeyField()||("array-contains"===Oe.op||"array-contains-any"===Oe.op?re=!0:$=$.add(Oe.field));for(const pe of F.orderBy)pe.field.isKeyField()||($=$.add(pe.field));return $.size+(re?1:0)}(d)&&(o=1):o=0})).next(()=>null!==r.limit&&u.length>1&&2===o?1:o)}Vn(t,r){const o=new za;for(const u of Nt(t)){const d=r.data.field(u.fieldPath);if(null==d)return null;const m=o.Yt(u.kind);Ga.vt.It(d,m)}return o.zt()}dn(t){const r=new za;return Ga.vt.It(t,r.Yt(0)),r.zt()}mn(t,r){const o=new za;return Ga.vt.It($i(this.databaseId,r),o.Yt(function(d){const m=Nt(d);return 0===m.length?0:m[m.length-1].kind}(t))),o.zt()}Tn(t,r,o){if(null===o)return[];let u=[];u.push(new za);let d=0;for(const m of Nt(t)){const b=o[d++];for(const F of u)if(this.fn(r,m.fieldPath)&&Fs(b))u=this.gn(u,m,b);else{const $=F.Yt(m.kind);Ga.vt.It(b,$)}}return this.pn(u)}In(t,r,o){return this.Tn(t,r,o.position)}pn(t){const r=[];for(let o=0;o<t.length;++o)r[o]=t[o].zt();return r}gn(t,r,o){const u=[...t],d=[];for(const m of o.arrayValue.values||[])for(const b of u){const F=new za;F.seed(b.zt()),Ga.vt.It(m,F.Yt(r.kind)),d.push(F)}return d}fn(t,r){return!!t.filters.find(o=>o instanceof x&&o.field.isEqual(r)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(t,r){const o=Sc(t),u=ia(t);return(r?o.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):o.U()).next(d=>{const m=[];return Ne.forEach(d,b=>u.get([b.indexId,this.uid]).next(F=>{m.push(function(re,pe){const Oe=pe?new se(pe.sequenceNumber,new Bt(Yc(pe.readTime),new we(Mn(pe.documentKey)),pe.largestBatchId)):se.empty(),ut=re.fields.map(([Ht,nn])=>new q(ke.fromServerFormat(Ht),nn));return new Ce(re.indexId,re.collectionGroup,ut,Oe)}(b,F))})).next(()=>m)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(r=>0===r.length?null:(r.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:zt(o.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(t,r,o){const u=Sc(t),d=ia(t);return this.yn(t).next(m=>u.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(b=>Ne.forEach(b,F=>d.put(oc(F.indexId,this.uid,m,o)))))}updateIndexEntries(t,r){const o=new Map;return Ne.forEach(r,(u,d)=>{const m=o.get(u.collectionGroup);return(m?Ne.resolve(m):this.getFieldIndexes(t,u.collectionGroup)).next(b=>(o.set(u.collectionGroup,b),Ne.forEach(b,F=>this.wn(t,u,F).next($=>{const re=this.Sn(d,F);return $.isEqual(re)?Ne.resolve():this.bn(t,d,F,$,re)}))))})}Dn(t,r,o,u){return Lr(t).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.mn(o,r.key),documentKey:r.key.path.toArray()})}vn(t,r,o,u){return Lr(t).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.mn(o,r.key),r.key.path.toArray()])}wn(t,r,o){const u=Lr(t);let d=new Cr(Wn);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.mn(o,r)])},(m,b)=>{d=d.add(new fo(o.indexId,r,b.arrayValue,b.directionalValue))}).next(()=>d)}Sn(t,r){let o=new Cr(Wn);const u=this.Vn(r,t);if(null==u)return o;const d=Xe(r);if(null!=d){const m=t.data.field(d.fieldPath);if(Fs(m))for(const b of m.arrayValue.values||[])o=o.add(new fo(r.indexId,t.key,this.dn(b),u))}else o=o.add(new fo(r.indexId,t.key,Rr,u));return o}bn(t,r,o,u,d){ot("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const m=[];return function(F,$,re,pe,Oe){const ut=F.getIterator(),Ht=$.getIterator();let nn=Xs(ut),Qt=Xs(Ht);for(;nn||Qt;){let Vn=!1,Xn=!1;if(nn&&Qt){const kn=re(nn,Qt);kn<0?Xn=!0:kn>0&&(Vn=!0)}else null!=nn?Xn=!0:Vn=!0;Vn?(pe(Qt),Qt=Xs(Ht)):Xn?(Oe(nn),nn=Xs(ut)):(nn=Xs(ut),Qt=Xs(Ht))}}(u,d,Wn,b=>{m.push(this.Dn(t,r,o,b))},b=>{m.push(this.vn(t,r,o,b))}),Ne.waitFor(m)}yn(t){let r=1;return ia(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(t,r,o){o=o.sort((m,b)=>Wn(m,b)).filter((m,b,F)=>!b||0!==Wn(m,F[b-1]));const u=[];u.push(t);for(const m of o){const b=Wn(m,t),F=Wn(m,r);if(0===b)u[0]=t.Zt();else if(b>0&&F<0)u.push(m),u.push(m.Zt());else if(F>0)break}u.push(r);const d=[];for(let m=0;m<u.length;m+=2){if(this.Cn(u[m],u[m+1]))return[];d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Rr,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Rr,[]]))}return d}Cn(t,r){return Wn(t,r)>0}getMinOffsetFromCollectionGroup(t,r){return this.getFieldIndexes(t,r).next(va)}getMinOffset(t,r){return Ne.mapArray(this.hn(r),o=>this.Pn(t,o).next(u=>u||Rt())).next(va)}}function Vu(a){return wr(a,"collectionParents")}function Lr(a){return wr(a,"indexEntries")}function Sc(a){return wr(a,"indexConfiguration")}function ia(a){return wr(a,"indexState")}function va(a){_t(0!==a.length);let t=a[0].indexState.offset,r=t.largestBatchId;for(let o=1;o<a.length;o++){const u=a[o].indexState.offset;En(u,t)<0&&(t=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new Bt(t.readTime,t.documentKey,r)}const Lu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bs{constructor(t,r,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=o}static withCacheSize(t){return new bs(t,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function bd(a,t,r){const o=a.store("mutations"),u=a.store("documentMutations"),d=[],m=IDBKeyRange.only(r.batchId);let b=0;const F=o.J({range:m},(re,pe,Oe)=>(b++,Oe.delete()));d.push(F.next(()=>{_t(1===b)}));const $=[];for(const re of r.mutations){const pe=ii(t,re.key.path,r.batchId);d.push(u.delete(pe)),$.push(re.key)}return Ne.waitFor(d).next(()=>$)}function Sd(a){if(!a)return 0;let t;if(a.document)t=a.document;else if(a.unknownDocument)t=a.unknownDocument;else{if(!a.noDocument)throw Rt();t=a.noDocument}return JSON.stringify(t).length}bs.DEFAULT_COLLECTION_PERCENTILE=10,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bs.DEFAULT=new bs(41943040,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bs.DISABLED=new bs(-1,0,0);class eu{constructor(t,r,o,u){this.userId=t,this.serializer=r,this.indexManager=o,this.referenceDelegate=u,this.Fn={}}static lt(t,r,o,u){_t(""!==t.uid);const d=t.isAuthenticated()?t.uid:"";return new eu(d,r,o,u)}checkEmpty(t){let r=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return io(t).J({index:"userMutationsIndex",range:o},(u,d,m)=>{r=!1,m.done()}).next(()=>r)}addMutationBatch(t,r,o,u){const d=Pc(t),m=io(t);return m.add({}).next(b=>{_t("number"==typeof b);const F=new zr(b,r,o,u),$=function(ut,Ht,nn){const Qt=nn.baseMutations.map(Xn=>Ou(ut.ct,Xn)),Vn=nn.mutations.map(Xn=>Ou(ut.ct,Xn));return{userId:Ht,batchId:nn.batchId,localWriteTimeMs:nn.localWriteTime.toMillis(),baseMutations:Qt,mutations:Vn}}(this.serializer,this.userId,F),re=[];let pe=new Cr((Oe,ut)=>zt(Oe.canonicalString(),ut.canonicalString()));for(const Oe of u){const ut=ii(this.userId,Oe.key.path,b);pe=pe.add(Oe.key.path.popLast()),re.push(m.put($)),re.push(d.put(ut,Er))}return pe.forEach(Oe=>{re.push(this.indexManager.addToCollectionParentIndex(t,Oe))}),t.addOnCommittedListener(()=>{this.Fn[b]=F.keys()}),Ne.waitFor(re).next(()=>F)})}lookupMutationBatch(t,r){return io(t).get(r).next(o=>o?(_t(o.userId===this.userId),Mr(this.serializer,o)):null)}Mn(t,r){return this.Fn[r]?Ne.resolve(this.Fn[r]):this.lookupMutationBatch(t,r).next(o=>{if(o){const u=o.keys();return this.Fn[r]=u,u}return null})}getNextMutationBatchAfterBatchId(t,r){const o=r+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return io(t).J({index:"userMutationsIndex",range:u},(m,b,F)=>{b.userId===this.userId&&(_t(b.batchId>=o),d=Mr(this.serializer,b)),F.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(t){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return io(t).J({index:"userMutationsIndex",range:r,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(t){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return io(t).U("userMutationsIndex",r).next(o=>o.map(u=>Mr(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(t,r){const o=Sr(this.userId,r.path),u=IDBKeyRange.lowerBound(o),d=[];return Pc(t).J({range:u},(m,b,F)=>{const[$,re,pe]=m,Oe=Mn(re);if($===this.userId&&r.path.isEqual(Oe))return io(t).get(pe).next(ut=>{if(!ut)throw Rt();_t(ut.userId===this.userId),d.push(Mr(this.serializer,ut))});F.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(t,r){let o=new Cr(zt);const u=[];return r.forEach(d=>{const m=Sr(this.userId,d.path),b=IDBKeyRange.lowerBound(m),F=Pc(t).J({range:b},($,re,pe)=>{const[Oe,ut,Ht]=$,nn=Mn(ut);Oe===this.userId&&d.path.isEqual(nn)?o=o.add(Ht):pe.done()});u.push(F)}),Ne.waitFor(u).next(()=>this.xn(t,o))}getAllMutationBatchesAffectingQuery(t,r){const o=r.path,u=o.length+1,d=Sr(this.userId,o),m=IDBKeyRange.lowerBound(d);let b=new Cr(zt);return Pc(t).J({range:m},(F,$,re)=>{const[pe,Oe,ut]=F,Ht=Mn(Oe);pe===this.userId&&o.isPrefixOf(Ht)?Ht.length===u&&(b=b.add(ut)):re.done()}).next(()=>this.xn(t,b))}xn(t,r){const o=[],u=[];return r.forEach(d=>{u.push(io(t).get(d).next(m=>{if(null===m)throw Rt();_t(m.userId===this.userId),o.push(Mr(this.serializer,m))}))}),Ne.waitFor(u).next(()=>o)}removeMutationBatch(t,r){return bd(t._e,this.userId,r).next(o=>(t.addOnCommittedListener(()=>{this.On(r.batchId)}),Ne.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(t,u))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(r=>{if(!r)return Ne.resolve();const o=IDBKeyRange.lowerBound(function(m){return[m]}(this.userId)),u=[];return Pc(t).J({range:o},(d,m,b)=>{if(d[0]===this.userId){const F=Mn(d[1]);u.push(F)}else b.done()}).next(()=>{_t(0===u.length)})})}containsKey(t,r){return Ns(t,this.userId,r)}Nn(t){return sa(t).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ns(a,t,r){const o=Sr(t,r.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return Pc(a).J({range:d,H:!0},(b,F,$)=>{const[re,pe,Oe]=b;re===t&&pe===u&&(m=!0),$.done()}).next(()=>m)}function io(a){return wr(a,"mutations")}function Pc(a){return wr(a,"documentMutations")}function sa(a){return wr(a,"mutationQueues")}class $s{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new $s(0)}static kn(){return new $s(-1)}}class qp{constructor(t,r){this.referenceDelegate=t,this.serializer=r}allocateTargetId(t){return this.qn(t).next(r=>{const o=new $s(r.highestTargetId);return r.highestTargetId=o.next(),this.Qn(t,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(r=>en.fromTimestamp(new Zt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(t,r,o){return this.qn(t).next(u=>(u.highestListenSequenceNumber=r,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.Qn(t,u)))}addTargetData(t,r){return this.Kn(t,r).next(()=>this.qn(t).next(o=>(o.targetCount+=1,this.$n(r,o),this.Qn(t,o))))}updateTargetData(t,r){return this.Kn(t,r)}removeTargetData(t,r){return this.removeMatchingKeysForTargetId(t,r.targetId).next(()=>Mc(t).delete(r.targetId)).next(()=>this.qn(t)).next(o=>(_t(o.targetCount>0),o.targetCount-=1,this.Qn(t,o)))}removeTargets(t,r,o){let u=0;const d=[];return Mc(t).J((m,b)=>{const F=Ha(b);F.sequenceNumber<=r&&null===o.get(F.targetId)&&(u++,d.push(this.removeTargetData(t,F)))}).next(()=>Ne.waitFor(d)).next(()=>u)}forEachTarget(t,r){return Mc(t).J((o,u)=>{const d=Ha(u);r(d)})}qn(t){return Pd(t).get("targetGlobalKey").next(r=>(_t(null!==r),r))}Qn(t,r){return Pd(t).put("targetGlobalKey",r)}Kn(t,r){return Mc(t).put(Jc(this.serializer,r))}$n(t,r){let o=!1;return t.targetId>r.highestTargetId&&(r.highestTargetId=t.targetId,o=!0),t.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t.sequenceNumber,o=!0),o}getTargetCount(t){return this.qn(t).next(r=>r.targetCount)}getTargetData(t,r){const o=$o(r),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Mc(t).J({range:u,index:"queryTargetsIndex"},(m,b,F)=>{const $=Ha(b);wo(r,$.target)&&(d=$,F.done())}).next(()=>d)}addMatchingKeys(t,r,o){const u=[],d=ac(t);return r.forEach(m=>{const b=Ze(m.path);u.push(d.put({targetId:o,path:b})),u.push(this.referenceDelegate.addReference(t,o,m))}),Ne.waitFor(u)}removeMatchingKeys(t,r,o){const u=ac(t);return Ne.forEach(r,d=>{const m=Ze(d.path);return Ne.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(t,o,d)])})}removeMatchingKeysForTargetId(t,r){const o=ac(t),u=IDBKeyRange.bound([r],[r+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(t,r){const o=IDBKeyRange.bound([r],[r+1],!1,!0),u=ac(t);let d=Pn();return u.J({range:o,H:!0},(m,b,F)=>{const $=Mn(m[1]),re=new we($);d=d.add(re)}).next(()=>d)}containsKey(t,r){const o=Ze(r.path),u=IDBKeyRange.bound([o],[Nr(o)],!1,!0);let d=0;return ac(t).J({index:"documentTargetsIndex",H:!0,range:u},([m,b],F,$)=>{0!==m&&(d++,$.done())}).next(()=>d>0)}ot(t,r){return Mc(t).get(r).next(o=>o?Ha(o):null)}}function Mc(a){return wr(a,"targets")}function Pd(a){return wr(a,"targetGlobal")}function ac(a){return wr(a,"targetDocuments")}function Rc([a,t],[r,o]){const u=zt(a,r);return 0===u?zt(t,o):u}class Md{constructor(t){this.Un=t,this.buffer=new Cr(Rc),this.Wn=0}Gn(){return++this.Wn}zn(t){const r=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const o=this.buffer.last();Rc(r,o)<0&&(this.buffer=this.buffer.delete(o).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Nl{constructor(t,r,o){this.garbageCollector=t,this.asyncQueue=r,this.localStore=o,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(t){var r=this;ot("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,oe.A)(function*(){r.jn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(o){ss(o)?ot("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Sn(o)}yield r.Hn(3e5)}))}}class xl{constructor(t,r){this.Jn=t,this.params=r}calculateTargetCount(t,r){return this.Jn.Yn(t).next(o=>Math.floor(r/100*o))}nthSequenceNumber(t,r){if(0===r)return Ne.resolve(ne.oe);const o=new Md(r);return this.Jn.forEachTarget(t,u=>o.zn(u.sequenceNumber)).next(()=>this.Jn.Zn(t,u=>o.zn(u))).next(()=>o.maxValue)}removeTargets(t,r,o){return this.Jn.removeTargets(t,r,o)}removeOrphanedDocuments(t,r){return this.Jn.removeOrphanedDocuments(t,r)}collect(t,r){return-1===this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(Lu)):this.getCacheSize(t).next(o=>o<this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lu):this.Xn(t,r))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,r){let o,u,d,m,b,F,$;const re=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(pe=>(pe>this.params.maximumSequenceNumbersToCollect?(ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${pe}`),u=this.params.maximumSequenceNumbersToCollect):u=pe,m=Date.now(),this.nthSequenceNumber(t,u))).next(pe=>(o=pe,b=Date.now(),this.removeTargets(t,o,r))).next(pe=>(d=pe,F=Date.now(),this.removeOrphanedDocuments(t,o))).next(pe=>($=Date.now(),Dn()<=Mt.$b.DEBUG&&ot("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-re}ms\n\tDetermined least recently used ${u} in `+(b-m)+`ms\n\tRemoved ${d} targets in `+(F-b)+`ms\n\tRemoved ${pe} documents in `+($-F)+`ms\nTotal Duration: ${$-re}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:pe})))}}class af{constructor(t,r){this.db=t,this.garbageCollector=function sf(a,t){return new xl(a,t)}(this,r)}Yn(t){const r=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(o=>r.next(u=>o+u))}er(t){let r=0;return this.Zn(t,o=>{r++}).next(()=>r)}forEachTarget(t,r){return this.db.getTargetCache().forEachTarget(t,r)}Zn(t,r){return this.tr(t,(o,u)=>r(u))}addReference(t,r,o){return tu(t,o)}removeReference(t,r,o){return tu(t,o)}removeTargets(t,r,o){return this.db.getTargetCache().removeTargets(t,r,o)}markPotentiallyOrphaned(t,r){return tu(t,r)}nr(t,r){return function(u,d){let m=!1;return sa(u).Y(b=>Ns(u,b,d).next(F=>(F&&(m=!0),Ne.resolve(!F)))).next(()=>m)}(t,r)}removeOrphanedDocuments(t,r){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.tr(t,(m,b)=>{if(b<=r){const F=this.nr(t,m).next($=>{if(!$)return d++,o.getEntry(t,m).next(()=>(o.removeEntry(m,en.min()),ac(t).delete([0,Ze(m.path)])))});u.push(F)}}).next(()=>Ne.waitFor(u)).next(()=>o.apply(t)).next(()=>d)}removeTarget(t,r){const o=r.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,o)}updateLimboDocument(t,r){return tu(t,r)}tr(t,r){const o=ac(t);let u,d=ne.oe;return o.J({index:"documentTargetsIndex"},([m,b],{path:F,sequenceNumber:$})=>{0===m?(d!==ne.oe&&r(new we(Mn(u)),d),d=$,u=F):d=ne.oe}).next(()=>{d!==ne.oe&&r(new we(Mn(u)),d)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function tu(a,t){return ac(a).put((u=a.currentSequenceNumber,{targetId:0,path:Ze(t.path),sequenceNumber:u}));var u}class Rd{constructor(){this.changes=new Fe(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,ar.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const o=this.changes.get(r);return void 0!==o?Ne.resolve(o):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class cf{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,r,o){return Oc(t).put(o)}removeEntry(t,r,o){return Oc(t).delete(function(d,m){const b=d.path.toArray();return[b.slice(0,b.length-2),b[b.length-2],ku(m),b[b.length-1]]}(r,o))}updateMetadata(t,r){return this.getMetadata(t).next(o=>(o.byteSize+=r,this.rr(t,o)))}getEntry(t,r){let o=ar.newInvalidDocument(r);return Oc(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cs(r))},(u,d)=>{o=this.ir(r,d)}).next(()=>o)}sr(t,r){let o={size:0,document:ar.newInvalidDocument(r)};return Oc(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cs(r))},(u,d)=>{o={document:this.ir(r,d),size:Sd(d)}}).next(()=>o)}getEntries(t,r){let o=wt();return this._r(t,r,(u,d)=>{const m=this.ir(u,d);o=o.insert(u,m)}).next(()=>o)}ar(t,r){let o=wt(),u=new Pr(we.comparator);return this._r(t,r,(d,m)=>{const b=this.ir(d,m);o=o.insert(d,b),u=u.insert(d,Sd(m))}).next(()=>({documents:o,ur:u}))}_r(t,r,o){if(r.isEmpty())return Ne.resolve();let u=new Cr(Ai);r.forEach(F=>u=u.add(F));const d=IDBKeyRange.bound(Cs(u.first()),Cs(u.last())),m=u.getIterator();let b=m.getNext();return Oc(t).J({index:"documentKeyIndex",range:d},(F,$,re)=>{const pe=we.fromSegments([...$.prefixPath,$.collectionGroup,$.documentId]);for(;b&&Ai(b,pe)<0;)o(b,null),b=m.getNext();b&&b.isEqual(pe)&&(o(b,$),b=m.hasNext()?m.getNext():null),b?re.$(Cs(b)):re.done()}).next(()=>{for(;b;)o(b,null),b=m.hasNext()?m.getNext():null})}getDocumentsMatchingQuery(t,r,o,u,d){const m=r.path,b=[m.popLast().toArray(),m.lastSegment(),ku(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],F=[m.popLast().toArray(),m.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oc(t).U(IDBKeyRange.bound(b,F,!0)).next($=>{d?.incrementDocumentReadCount($.length);let re=wt();for(const pe of $){const Oe=this.ir(we.fromSegments(pe.prefixPath.concat(pe.collectionGroup,pe.documentId)),pe);Oe.isFoundDocument()&&(L(r,Oe)||u.has(Oe.key))&&(re=re.insert(Oe.key,Oe))}return re})}getAllFromCollectionGroup(t,r,o,u){let d=wt();const m=cc(r,o),b=cc(r,Bt.max());return Oc(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,b,!0)},(F,$,re)=>{const pe=this.ir(we.fromSegments($.prefixPath.concat($.collectionGroup,$.documentId)),$);d=d.insert(pe.key,pe),d.size===u&&re.done()}).next(()=>d)}newChangeBuffer(t){return new uf(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(r=>r.byteSize)}getMetadata(t){return kl(t).get("remoteDocumentGlobalKey").next(r=>(_t(!!r),r))}rr(t,r){return kl(t).put("remoteDocumentGlobalKey",r)}ir(t,r){if(r){const o=function Wo(a,t){let r;if(t.document)r=Zh(a.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const o=we.fromSegments(t.noDocument.path),u=Yc(t.noDocument.readTime);r=ar.newNoDocument(o,u),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return Rt();{const o=we.fromSegments(t.unknownDocument.path),u=Yc(t.unknownDocument.version);r=ar.newUnknownDocument(o,u)}}return t.readTime&&r.setReadTime(function(u){const d=new Zt(u[0],u[1]);return en.fromTimestamp(d)}(t.readTime)),r}(this.serializer,r);if(!o.isNoDocument()||!o.version.isEqual(en.min()))return o}return ar.newInvalidDocument(t)}}function Uu(a){return new cf(a)}class uf extends Rd{constructor(t,r){super(),this.cr=t,this.trackRemovals=r,this.lr=new Fe(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(t){const r=[];let o=0,u=new Cr((d,m)=>zt(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const b=this.lr.get(d);if(r.push(this.cr.removeEntry(t,d,b.readTime)),m.isValidDocument()){const F=xu(this.cr.serializer,m);u=u.add(d.path.popLast());const $=Sd(F);o+=$-b.size,r.push(this.cr.addEntry(t,d,F))}else if(o-=b.size,this.trackRemovals){const F=xu(this.cr.serializer,m.convertToNoDocument(en.min()));r.push(this.cr.addEntry(t,d,F))}}),u.forEach(d=>{r.push(this.cr.indexManager.addToCollectionParentIndex(t,d))}),r.push(this.cr.updateMetadata(t,o)),Ne.waitFor(r)}getFromCache(t,r){return this.cr.sr(t,r).next(o=>(this.lr.set(r,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(t,r){return this.cr.ar(t,r).next(({documents:o,ur:u})=>(u.forEach((d,m)=>{this.lr.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function kl(a){return wr(a,"remoteDocumentGlobal")}function Oc(a){return wr(a,"remoteDocumentsV14")}function Cs(a){const t=a.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cc(a,t){const r=t.documentKey.path.toArray();return[a,ku(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Ai(a,t){const r=a.path.toArray(),o=t.path.toArray();let u=0;for(let d=0;d<r.length-2&&d<o.length-2;++d)if(u=zt(r[d],o[d]),u)return u;return u=zt(r.length,o.length),u||(u=zt(r[r.length-2],o[o.length-2]),u||zt(r[r.length-1],o[o.length-1]))}class Qp{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}class lf{constructor(t,r,o,u){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=o,this.indexManager=u}getDocument(t,r){let o=null;return this.documentOverlayCache.getOverlay(t,r).next(u=>(o=u,this.remoteDocumentCache.getEntry(t,r))).next(u=>(null!==o&&Vr(o.mutation,u,Xr.empty(),Zt.now()),u))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.getLocalViewOfDocuments(t,o,Pn()).next(()=>o))}getLocalViewOfDocuments(t,r,o=Pn()){const u=zn();return this.populateOverlays(t,u,r).next(()=>this.computeViews(t,r,u,o).next(d=>{let m=hn();return d.forEach((b,F)=>{m=m.insert(b,F.overlayedDocument)}),m}))}getOverlayedDocuments(t,r){const o=zn();return this.populateOverlays(t,o,r).next(()=>this.computeViews(t,r,o,Pn()))}populateOverlays(t,r,o){const u=[];return o.forEach(d=>{r.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(t,u).next(d=>{d.forEach((m,b)=>{r.set(m,b)})})}computeViews(t,r,o,u){let d=wt();const m=Hn(),b=Hn();return r.forEach((F,$)=>{const re=o.get($.key);u.has($.key)&&(void 0===re||re.mutation instanceof _r)?d=d.insert($.key,$):void 0!==re?(m.set($.key,re.mutation.getFieldMask()),Vr(re.mutation,$,re.mutation.getFieldMask(),Zt.now())):m.set($.key,Xr.empty())}),this.recalculateAndSaveOverlays(t,d).next(F=>(F.forEach(($,re)=>m.set($,re)),r.forEach(($,re)=>{var pe;return b.set($,new Qp(re,null!==(pe=m.get($))&&void 0!==pe?pe:null))}),b))}recalculateAndSaveOverlays(t,r){const o=Hn();let u=new Pr((m,b)=>m-b),d=Pn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(m=>{for(const b of m)b.keys().forEach(F=>{const $=r.get(F);if(null===$)return;let re=o.get(F)||Xr.empty();re=b.applyToLocalView($,re),o.set(F,re);const pe=(u.get(b.batchId)||Pn()).add(F);u=u.insert(b.batchId,pe)})}).next(()=>{const m=[],b=u.getReverseIterator();for(;b.hasNext();){const F=b.getNext(),$=F.key,re=F.value,pe=Fn();re.forEach(Oe=>{if(!d.has(Oe)){const ut=ri(r.get(Oe),o.get(Oe));null!==ut&&pe.set(Oe,ut),d=d.add(Oe)}}),m.push(this.documentOverlayCache.saveOverlays(t,$,pe))}return Ne.waitFor(m)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,r,o,u){return we.isDocumentKey((m=r).path)&&null===m.collectionGroup&&0===m.filters.length?this.getDocumentsMatchingDocumentQuery(t,r.path):ma(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,o,u):this.getDocumentsMatchingCollectionQuery(t,r,o,u);var m}getNextDocuments(t,r,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,o,u).next(d=>{const m=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,o.largestBatchId,u-d.size):Ne.resolve(zn());let b=-1,F=d;return m.next($=>Ne.forEach($,(re,pe)=>(b<pe.largestBatchId&&(b=pe.largestBatchId),d.get(re)?Ne.resolve():this.remoteDocumentCache.getEntry(t,re).next(Oe=>{F=F.insert(re,Oe)}))).next(()=>this.populateOverlays(t,$,d)).next(()=>this.computeViews(t,F,$,Pn())).next(re=>({batchId:b,changes:hr(re)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new we(r)).next(o=>{let u=hn();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(t,r,o,u){const d=r.collectionGroup;let m=hn();return this.indexManager.getCollectionParents(t,d).next(b=>Ne.forEach(b,F=>{const $=(pe=r,Oe=F.child(d),new Gr(Oe,null,pe.explicitOrderBy.slice(),pe.filters.slice(),pe.limit,pe.limitType,pe.startAt,pe.endAt));var pe,Oe;return this.getDocumentsMatchingCollectionQuery(t,$,o,u).next(re=>{re.forEach((pe,Oe)=>{m=m.insert(pe,Oe)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(t,r,o,u){let d;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,o.largestBatchId).next(m=>(d=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,o,d,u))).next(m=>{d.forEach((F,$)=>{const re=$.getKey();null===m.get(re)&&(m=m.insert(re,ar.newInvalidDocument(re)))});let b=hn();return m.forEach((F,$)=>{const re=d.get(F);void 0!==re&&Vr(re.mutation,$,Xr.empty(),Zt.now()),L(r,$)&&(b=b.insert(F,$))}),b})}}class Xp{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,r){return Ne.resolve(this.hr.get(r))}saveBundleMetadata(t,r){return this.hr.set(r.id,{id:(u=r).id,version:u.version,createTime:Ni(u.createTime)}),Ne.resolve();var u}getNamedQuery(t,r){return Ne.resolve(this.Pr.get(r))}saveNamedQuery(t,r){return this.Pr.set(r.name,{name:(u=r).name,query:js(u.bundledQuery),readTime:Ni(u.readTime)}),Ne.resolve();var u}}class Yp{constructor(){this.overlays=new Pr(we.comparator),this.Ir=new Map}getOverlay(t,r){return Ne.resolve(this.overlays.get(r))}getOverlays(t,r){const o=zn();return Ne.forEach(r,u=>this.getOverlay(t,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(t,r,o){return o.forEach((u,d)=>{this.ht(t,r,d)}),Ne.resolve()}removeOverlaysForBatchId(t,r,o){const u=this.Ir.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.Ir.delete(o)),Ne.resolve()}getOverlaysForCollection(t,r,o){const u=zn(),d=r.length+1,m=new we(r.child("")),b=this.overlays.getIteratorFrom(m);for(;b.hasNext();){const F=b.getNext().value,$=F.getKey();if(!r.isPrefixOf($.path))break;$.path.length===d&&F.largestBatchId>o&&u.set(F.getKey(),F)}return Ne.resolve(u)}getOverlaysForCollectionGroup(t,r,o,u){let d=new Pr(($,re)=>$-re);const m=this.overlays.getIterator();for(;m.hasNext();){const $=m.getNext().value;if($.getKey().getCollectionGroup()===r&&$.largestBatchId>o){let re=d.get($.largestBatchId);null===re&&(re=zn(),d=d.insert($.largestBatchId,re)),re.set($.getKey(),$)}}const b=zn(),F=d.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach(($,re)=>b.set($,re)),!(b.size()>=u)););return Ne.resolve(b)}ht(t,r,o){const u=this.overlays.get(o.key);if(null!==u){const m=this.Ir.get(u.largestBatchId).delete(o.key);this.Ir.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new Zn(r,o));let d=this.Ir.get(r);void 0===d&&(d=Pn(),this.Ir.set(r,d)),this.Ir.set(r,d.add(o.key))}}class df{constructor(){this.sessionToken=Hr.EMPTY_BYTE_STRING}getSessionToken(t){return Ne.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Ne.resolve()}}class nu{constructor(){this.Tr=new Cr(Qi.Er),this.dr=new Cr(Qi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,r){const o=new Qi(t,r);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(t,r){t.forEach(o=>this.addReference(o,r))}removeReference(t,r){this.Vr(new Qi(t,r))}mr(t,r){t.forEach(o=>this.removeReference(o,r))}gr(t){const r=new we(new Rn([])),o=new Qi(r,t),u=new Qi(r,t+1),d=[];return this.dr.forEachInRange([o,u],m=>{this.Vr(m),d.push(m.key)}),d}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const r=new we(new Rn([])),o=new Qi(r,t),u=new Qi(r,t+1);let d=Pn();return this.dr.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(t){const r=new Qi(t,0),o=this.Tr.firstAfterOrEqual(r);return null!==o&&t.isEqual(o.key)}}class Qi{constructor(t,r){this.key=t,this.wr=r}static Er(t,r){return we.comparator(t.key,r.key)||zt(t.wr,r.wr)}static Ar(t,r){return zt(t.wr,r.wr)||we.comparator(t.key,r.key)}}class Pa{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Cr(Qi.Er)}checkEmpty(t){return Ne.resolve(0===this.mutationQueue.length)}addMutationBatch(t,r,o,u){const d=this.Sr;this.Sr++;const m=new zr(d,r,o,u);this.mutationQueue.push(m);for(const b of u)this.br=this.br.add(new Qi(b.key,d)),this.indexManager.addToCollectionParentIndex(t,b.key.path.popLast());return Ne.resolve(m)}lookupMutationBatch(t,r){return Ne.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(t,r){const u=this.vr(r+1),d=u<0?0:u;return Ne.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const o=new Qi(r,0),u=new Qi(r,Number.POSITIVE_INFINITY),d=[];return this.br.forEachInRange([o,u],m=>{const b=this.Dr(m.wr);d.push(b)}),Ne.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(t,r){let o=new Cr(zt);return r.forEach(u=>{const d=new Qi(u,0),m=new Qi(u,Number.POSITIVE_INFINITY);this.br.forEachInRange([d,m],b=>{o=o.add(b.wr)})}),Ne.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,r){const o=r.path,u=o.length+1;let d=o;we.isDocumentKey(d)||(d=d.child(""));const m=new Qi(new we(d),0);let b=new Cr(zt);return this.br.forEachWhile(F=>{const $=F.key.path;return!!o.isPrefixOf($)&&($.length===u&&(b=b.add(F.wr)),!0)},m),Ne.resolve(this.Cr(b))}Cr(t){const r=[];return t.forEach(o=>{const u=this.Dr(o);null!==u&&r.push(u)}),r}removeMutationBatch(t,r){_t(0===this.Fr(r.batchId,"removed")),this.mutationQueue.shift();let o=this.br;return Ne.forEach(r.mutations,u=>{const d=new Qi(u.key,r.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(()=>{this.br=o})}On(t){}containsKey(t,r){const o=new Qi(r,0),u=this.br.firstAfterOrEqual(o);return Ne.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(t){return Ne.resolve()}Fr(t,r){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){const r=this.vr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Od{constructor(t){this.Mr=t,this.docs=new Pr(we.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const o=r.key,u=this.docs.get(o),d=u?u.size:0,m=this.Mr(r);return this.docs=this.docs.insert(o,{document:r.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const o=this.docs.get(r);return Ne.resolve(o?o.document.mutableCopy():ar.newInvalidDocument(r))}getEntries(t,r){let o=wt();return r.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():ar.newInvalidDocument(u))}),Ne.resolve(o)}getDocumentsMatchingQuery(t,r,o,u){let d=wt();const m=r.path,b=new we(m.child("")),F=this.docs.getIteratorFrom(b);for(;F.hasNext();){const{key:$,value:{document:re}}=F.getNext();if(!m.isPrefixOf($.path))break;$.path.length>m.length+1||En(Dt(re),o)<=0||(u.has(re.key)||L(r,re))&&(d=d.insert(re.key,re.mutableCopy()))}return Ne.resolve(d)}getAllFromCollectionGroup(t,r,o,u){Rt()}Or(t,r){return Ne.forEach(this.docs,o=>r(o))}newChangeBuffer(t){return new Fl(this)}getSize(t){return Ne.resolve(this.size)}}class Fl extends Rd{constructor(t){super(),this.cr=t}applyChanges(t){const r=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?r.push(this.cr.addEntry(t,u)):this.cr.removeEntry(o)}),Ne.waitFor(r)}getFromCache(t,r){return this.cr.getEntry(t,r)}getAllFromCache(t,r){return this.cr.getEntries(t,r)}}class Bu{constructor(t){this.persistence=t,this.Nr=new Fe(r=>$o(r),wo),this.lastRemoteSnapshotVersion=en.min(),this.highestTargetId=0,this.Lr=0,this.Br=new nu,this.targetCount=0,this.kr=$s.Bn()}forEachTarget(t,r){return this.Nr.forEach((o,u)=>r(u)),Ne.resolve()}getLastRemoteSnapshotVersion(t){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ne.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(t,r,o){return o&&(this.lastRemoteSnapshotVersion=o),r>this.Lr&&(this.Lr=r),Ne.resolve()}Kn(t){this.Nr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.kr=new $s(r),this.highestTargetId=r),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,r){return this.Kn(r),this.targetCount+=1,Ne.resolve()}updateTargetData(t,r){return this.Kn(r),Ne.resolve()}removeTargetData(t,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(t,r,o){let u=0;const d=[];return this.Nr.forEach((m,b)=>{b.sequenceNumber<=r&&null===o.get(b.targetId)&&(this.Nr.delete(m),d.push(this.removeMatchingKeysForTargetId(t,b.targetId)),u++)}),Ne.waitFor(d).next(()=>u)}getTargetCount(t){return Ne.resolve(this.targetCount)}getTargetData(t,r){const o=this.Nr.get(r)||null;return Ne.resolve(o)}addMatchingKeys(t,r,o){return this.Br.Rr(r,o),Ne.resolve()}removeMatchingKeys(t,r,o){this.Br.mr(r,o);const u=this.persistence.referenceDelegate,d=[];return u&&r.forEach(m=>{d.push(u.markPotentiallyOrphaned(t,m))}),Ne.waitFor(d)}removeMatchingKeysForTargetId(t,r){return this.Br.gr(r),Ne.resolve()}getMatchingKeysForTargetId(t,r){const o=this.Br.yr(r);return Ne.resolve(o)}containsKey(t,r){return Ne.resolve(this.Br.containsKey(r))}}class Nc{constructor(t,r){this.qr={},this.overlays={},this.Qr=new ne(0),this.Kr=!1,this.Kr=!0,this.$r=new df,this.referenceDelegate=t(this),this.Ur=new Bu(this),this.indexManager=new Kp,this.remoteDocumentCache=new Od(o=>this.referenceDelegate.Wr(o)),this.serializer=new Bs(r),this.Gr=new Xp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Yp,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let o=this.qr[t.toKey()];return o||(o=new Pa(r,this.referenceDelegate),this.qr[t.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,r,o){ot("MemoryPersistence","Starting transaction:",t);const u=new ju(this.Qr.next());return this.referenceDelegate.zr(),o(u).next(d=>this.referenceDelegate.jr(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Hr(t,r){return Ne.or(Object.values(this.qr).map(o=>()=>o.containsKey(t,r)))}}class ju extends qn{constructor(t){super(),this.currentSequenceNumber=t}}class $u{constructor(t){this.persistence=t,this.Jr=new nu,this.Yr=null}static Zr(t){return new $u(t)}get Xr(){if(this.Yr)return this.Yr;throw Rt()}addReference(t,r,o){return this.Jr.addReference(o,r),this.Xr.delete(o.toString()),Ne.resolve()}removeReference(t,r,o){return this.Jr.removeReference(o,r),this.Xr.add(o.toString()),Ne.resolve()}markPotentiallyOrphaned(t,r){return this.Xr.add(r.toString()),Ne.resolve()}removeTarget(t,r){this.Jr.gr(r.targetId).forEach(u=>this.Xr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,r.targetId).next(u=>{u.forEach(d=>this.Xr.add(d.toString()))}).next(()=>o.removeTargetData(t,r))}zr(){this.Yr=new Set}jr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.Xr,o=>{const u=we.fromPath(o);return this.ei(t,u).next(d=>{d||r.removeEntry(u,en.min())})}).next(()=>(this.Yr=null,r.apply(t)))}updateLimboDocument(t,r){return this.ei(t,r).next(o=>{o?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(t){return 0}ei(t,r){return Ne.or([()=>Ne.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Hr(t,r)])}}class Nd{constructor(t){this.serializer=t}O(t,r,o,u){const d=new $r("createOrUpgrade",r);var F;o<1&&u>=1&&(t.createObjectStore("owner"),(F=t).createObjectStore("mutationQueues",{keyPath:"userId"}),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wn,{unique:!0}),F.createObjectStore("documentMutations"),uc(t),function(F){F.createObjectStore("remoteDocuments")}(t));let m=Ne.resolve();return o<3&&u>=3&&(0!==o&&(function(F){F.deleteObjectStore("targetDocuments"),F.deleteObjectStore("targets"),F.deleteObjectStore("targetGlobal")}(t),uc(t)),m=m.next(()=>function(F){const $=F.store("targetGlobal"),re={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:en.min().toTimestamp(),targetCount:0};return $.put("targetGlobalKey",re)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(F,$){return $.store("mutations").U().next(re=>{F.deleteObjectStore("mutations"),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wn,{unique:!0});const pe=$.store("mutations"),Oe=re.map(ut=>pe.put(ut));return Ne.waitFor(Oe)})}(t,d))),m=m.next(()=>{!function(F){F.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),o<5&&u>=5&&(m=m.next(()=>this.ni(d))),o<6&&u>=6&&(m=m.next(()=>(function(F){F.createObjectStore("remoteDocumentGlobal")}(t),this.ri(d)))),o<7&&u>=7&&(m=m.next(()=>this.ii(d))),o<8&&u>=8&&(m=m.next(()=>this.si(t,d))),o<9&&u>=9&&(m=m.next(()=>{!function(F){F.objectStoreNames.contains("remoteDocumentChanges")&&F.deleteObjectStore("remoteDocumentChanges")}(t)})),o<10&&u>=10&&(m=m.next(()=>this.oi(d))),o<11&&u>=11&&(m=m.next(()=>{(function(F){F.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(F){F.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),o<12&&u>=12&&(m=m.next(()=>{!function(F){const $=F.createObjectStore("documentOverlays",{keyPath:On});$.createIndex("collectionPathOverlayIndex",ur,{unique:!1}),$.createIndex("collectionGroupOverlayIndex",Vo,{unique:!1})}(t)})),o<13&&u>=13&&(m=m.next(()=>function(F){const $=F.createObjectStore("remoteDocumentsV14",{keyPath:ui});$.createIndex("documentKeyIndex",qr),$.createIndex("collectionGroupIndex",Si)}(t)).next(()=>this._i(t,d)).next(()=>t.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>this.ai(t,d))),o<15&&u>=15&&(m=m.next(()=>function(F){F.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),F.createObjectStore("indexState",{keyPath:Fr}).createIndex("sequenceNumberIndex",di,{unique:!1}),F.createObjectStore("indexEntries",{keyPath:vi}).createIndex("documentKeyIndex",Ei,{unique:!1})}(t))),o<16&&u>=16&&(m=m.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),o<17&&u>=17&&(m=m.next(()=>{!function(F){F.createObjectStore("globals",{keyPath:"name"})}(t)})),m}ri(t){let r=0;return t.store("remoteDocuments").J((o,u)=>{r+=Sd(u)}).next(()=>{const o={byteSize:r};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}ni(t){const r=t.store("mutationQueues"),o=t.store("mutations");return r.U().next(u=>Ne.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.U("userMutationsIndex",m).next(b=>Ne.forEach(b,F=>{_t(F.userId===d.userId);const $=Mr(this.serializer,F);return bd(t,d.userId,$).next(()=>{})}))}))}ii(t){const r=t.store("targetDocuments"),o=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.J((m,b)=>{const F=new Rn(m),$=[0,Ze(F)];d.push(r.get($).next(re=>re?Ne.resolve():r.put({targetId:0,path:Ze(F),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Ne.waitFor(d))})}si(t,r){t.createObjectStore("collectionParents",{keyPath:nr});const o=r.store("collectionParents"),u=new Ut,d=m=>{if(u.add(m)){const b=m.lastSegment(),F=m.popLast();return o.put({collectionId:b,parent:Ze(F)})}};return r.store("remoteDocuments").J({H:!0},(m,b)=>{const F=new Rn(m);return d(F.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([m,b,F],$)=>{const re=Mn(b);return d(re.popLast())}))}oi(t){const r=t.store("targets");return r.J((o,u)=>{const d=Ha(u),m=Jc(this.serializer,d);return r.put(m)})}_i(t,r){const o=r.store("remoteDocuments"),u=[];return o.J((d,m)=>{const b=r.store("remoteDocumentsV14"),F=(pe=m,pe.document?new we(Rn.fromString(pe.document.name).popFirst(5)):pe.noDocument?we.fromSegments(pe.noDocument.path):pe.unknownDocument?we.fromSegments(pe.unknownDocument.path):Rt()).path.toArray(),$={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};var pe;u.push(b.put($))}).next(()=>Ne.waitFor(u))}ai(t,r){const o=r.store("mutations"),u=Uu(this.serializer),d=new Nc($u.Zr,this.serializer.ct);return o.U().next(m=>{const b=new Map;return m.forEach(F=>{var $;let re=null!==($=b.get(F.userId))&&void 0!==$?$:Pn();Mr(this.serializer,F).keys().forEach(pe=>re=re.add(pe)),b.set(F.userId,re)}),Ne.forEach(b,(F,$)=>{const re=new rn($),pe=Dl.lt(this.serializer,re),Oe=d.getIndexManager(re),ut=eu.lt(re,this.serializer,Oe,d.referenceDelegate);return new lf(u,ut,pe,Oe).recalculateAndSaveOverlaysForDocumentKeys(new qs(r,ne.oe),F).next()})})}}function uc(a){a.createObjectStore("targetDocuments",{keyPath:Dr}).createIndex("documentTargetsIndex",li,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ir,{unique:!0}),a.createObjectStore("targetGlobal")}const Ma="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ll{constructor(t,r,o,u,d,m,b,F,$,re,pe=17){if(this.allowTabSynchronization=t,this.persistenceKey=r,this.clientId=o,this.ui=d,this.window=m,this.document=b,this.ci=$,this.li=re,this.hi=pe,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=Oe=>Promise.resolve(),!Ll.D())throw new xt(it.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new af(this,u),this.Ai=r+"main",this.serializer=new Bs(F),this.Ri=new Qr(this.Ai,this.hi,new Nd(this.serializer)),this.$r=new tf,this.Ur=new qp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Uu(this.serializer),this.Gr=new Ko,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===re&&In("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xt(it.FAILED_PRECONDITION,Ma);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new ne(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){var r=this;return this.di=function(){var o=(0,oe.A)(function*(u){if(r.started)return t(u)});return function(u){return o.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(function(){var r=(0,oe.A)(function*(o){null===o.newVersion&&(yield t())});return function(o){return r.apply(this,arguments)}}())}setNetworkEnabled(t){var r=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget((0,oe.A)(function*(){r.started&&(yield r.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Ul(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(r=>this.isPrimary&&!r?this.bi(t).next(()=>!1):!!r&&this.Di(t).next(()=>!0))).catch(t=>{if(ss(t))return ot("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return ot("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return lc(t).get("owner").next(r=>Ne.resolve(this.vi(r)))}Ci(t){return Ul(t).delete(this.clientId)}Fi(){var t=this;return(0,oe.A)(function*(){if(t.isPrimary&&!t.Mi(t.Ei,18e5)){t.Ei=Date.now();const r=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=wr(o,"clientMetadata");return u.U().next(d=>{const m=t.xi(d,18e5),b=d.filter(F=>-1===m.indexOf(F));return Ne.forEach(b,F=>u.delete(F.clientId)).next(()=>b)})}).catch(()=>[]);if(t.Vi)for(const o of r)t.Vi.removeItem(t.Oi(o.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?Ne.resolve(!0):lc(t).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new xt(it.FAILED_PRECONDITION,Ma);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ul(t).U().next(o=>void 0===this.xi(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(r=>(this.isPrimary!==r&&ot("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var t=this;return(0,oe.A)(function*(){t.Kr=!1,t.Li(),t.Ti&&(t.Ti.cancel(),t.Ti=null),t.Bi(),t.ki(),yield t.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const o=new qs(r,ne.oe);return t.bi(o).next(()=>t.Ci(o))}),t.Ri.close(),t.qi()})()}xi(t,r){return t.filter(o=>this.Mi(o.updateTimeMs,r)&&!this.Ni(o.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>Ul(t).U().next(r=>this.xi(r,18e5).map(o=>o.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,r){return eu.lt(t,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Ol(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return Dl.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,r,o){ot("IndexedDbPersistence","Starting transaction:",t);const u="readonly"===r?"readonly":"readwrite",d=17===(F=this.hi)?vo:16===F?rr:15===F?yo:14===F?la:13===F?Yo:12===F?Ks:11===F?Gi:void Rt();var F;let m;return this.Ri.runTransaction(t,u,d,b=>(m=new qs(b,this.Qr?this.Qr.next():ne.oe),"readwrite-primary"===r?this.wi(m).next(F=>!!F||this.Si(m)).next(F=>{if(!F)throw In(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new xt(it.FAILED_PRECONDITION,Bn);return o(m)}).next(F=>this.Di(m).next(()=>F)):this.Ki(m).next(()=>o(m)))).then(b=>(m.raiseOnCommittedEvent(),b))}Ki(t){return lc(t).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new xt(it.FAILED_PRECONDITION,Ma)})}Di(t){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lc(t).put("owner",r)}static D(){return Qr.D()}bi(t){const r=lc(t);return r.get("owner").next(o=>this.vi(o)?(ot("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ne.resolve())}Mi(t,r){const o=Date.now();return!(t<o-r||t>o&&(In(`Detected an update time that is in the future: ${t} > ${o}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;(0,ie.nr)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var r;try{const o=null!==(null===(r=this.Vi)||void 0===r?void 0:r.getItem(this.Oi(t)));return ot("IndexedDbPersistence",`Client '${t}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return In("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){In("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function lc(a){return wr(a,"owner")}function Ul(a){return wr(a,"clientMetadata")}function xd(a,t){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+t+"/"+r+"/"}class kd{constructor(t,r,o,u){this.targetId=t,this.fromCache=r,this.$i=o,this.Ui=u}static Wi(t,r){let o=Pn(),u=Pn();for(const d of r.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new kd(t,r.fromCache,o,u)}}class I_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Jp{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,ie.nr)()?8:Ms((0,ie.ZQ)())>0?6:4}initialize(t,r){this.Ji=t,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(t,r,o,u){const d={result:null};return this.Yi(t,r).next(m=>{d.result=m}).next(()=>{if(!d.result)return this.Zi(t,r,u,o).next(m=>{d.result=m})}).next(()=>{if(d.result)return;const m=new I_;return this.Xi(t,r,m).next(b=>{if(d.result=b,this.zi)return this.es(t,r,m,b.size)})}).next(()=>d.result)}es(t,r,o,u){return o.documentReadCount<this.ji?(Dn()<=Mt.$b.DEBUG&&ot("QueryEngine","SDK will not create cache indexes for query:",D(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ne.resolve()):(Dn()<=Mt.$b.DEBUG&&ot("QueryEngine","Query:",D(r),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Hi*u?(Dn()<=Mt.$b.DEBUG&&ot("QueryEngine","The SDK decides to create cache indexes for query:",D(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ki(r))):Ne.resolve())}Yi(t,r){if(Oi(r))return Ne.resolve(null);let o=Ki(r);return this.indexManager.getIndexType(t,o).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=Ao(r,null,"F"),o=Ki(r)),this.indexManager.getDocumentsMatchingTarget(t,o).next(d=>{const m=Pn(...d);return this.Ji.getDocuments(t,m).next(b=>this.indexManager.getMinOffset(t,o).next(F=>{const $=this.ts(r,b);return this.ns(r,$,m,F.readTime)?this.Yi(t,Ao(r,null,"F")):this.rs(t,$,r,F)}))})))}Zi(t,r,o,u){return Oi(r)||u.isEqual(en.min())?Ne.resolve(null):this.Ji.getDocuments(t,o).next(d=>{const m=this.ts(r,d);return this.ns(r,m,o,u)?Ne.resolve(null):(Dn()<=Mt.$b.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),D(r)),this.rs(t,m,r,me(u,-1)).next(b=>b))})}ts(t,r){let o=new Cr(he(t));return r.forEach((u,d)=>{L(t,d)&&(o=o.add(d))}),o}ns(t,r,o,u){if(null===t.limit)return!1;if(o.size!==r.size)return!0;const d="F"===t.limitType?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Xi(t,r,o){return Dn()<=Mt.$b.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",D(r)),this.Ji.getDocumentsMatchingQuery(t,r,Bt.min(),o)}rs(t,r,o,u){return this.Ji.getDocumentsMatchingQuery(t,o,u).next(d=>(r.forEach(m=>{d=d.insert(m.key,m)}),d))}}class Bl{constructor(t,r,o,u){this.persistence=t,this.ss=r,this.serializer=u,this.os=new Pr(zt),this._s=new Fe(d=>$o(d),wo),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(o)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.os))}}function ru(a,t,r,o){return new Bl(a,t,r,o)}function Zp(a,t){return xc.apply(this,arguments)}function xc(){return(xc=(0,oe.A)(function*(a,t){const r=Ft(a);return yield r.persistence.runTransaction("Handle user change","readonly",o=>{let u;return r.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,r.ls(t),r.mutationQueue.getAllMutationBatches(o))).next(d=>{const m=[],b=[];let F=Pn();for(const $ of u){m.push($.batchId);for(const re of $.mutations)F=F.add(re.key)}for(const $ of d){b.push($.batchId);for(const re of $.mutations)F=F.add(re.key)}return r.localDocuments.getDocuments(o,F).next($=>({hs:$,removedBatchIds:m,addedBatchIds:b}))})})})).apply(this,arguments)}function h(a){const t=Ft(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Ur.getLastRemoteSnapshotVersion(r))}function A(a,t,r){let o=Pn(),u=Pn();return r.forEach(d=>o=o.add(d)),t.getEntries(a,o).next(d=>{let m=wt();return r.forEach((b,F)=>{const $=d.get(b);F.isFoundDocument()!==$.isFoundDocument()&&(u=u.add(b)),F.isNoDocument()&&F.version.isEqual(en.min())?(t.removeEntry(b,F.readTime),m=m.insert(b,F)):!$.isValidDocument()||F.version.compareTo($.version)>0||0===F.version.compareTo($.version)&&$.hasPendingWrites?(t.addEntry(F),m=m.insert(b,F)):ot("LocalStore","Ignoring outdated watch update for ",b,". Current version:",$.version," Watch version:",F.version)}),{Ps:m,Is:u}})}function z(a,t){const r=Ft(a);return r.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===t&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}function ae(a,t){const r=Ft(a);return r.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return r.Ur.getTargetData(o,t).next(d=>d?(u=d,Ne.resolve(u)):r.Ur.allocateTargetId(o).next(m=>(u=new ho(t,m,"TargetPurposeListen",o.currentSequenceNumber),r.Ur.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=r.os.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.os=r.os.insert(o.targetId,o),r._s.set(t,o.targetId)),o})}function Ve(a,t,r){return bt.apply(this,arguments)}function bt(){return(bt=(0,oe.A)(function*(a,t,r){const o=Ft(a),u=o.os.get(t),d=r?"readwrite":"readwrite-primary";try{r||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!ss(m))throw m;ot("LocalStore",`Failed to update sequence numbers for target ${t}: ${m}`)}o.os=o.os.remove(t),o._s.delete(u.target)})).apply(this,arguments)}function Gt(a,t,r){const o=Ft(a);let u=en.min(),d=Pn();return o.persistence.runTransaction("Execute query","readwrite",m=>function(F,$,re){const pe=Ft(F),Oe=pe._s.get(re);return void 0!==Oe?Ne.resolve(pe.os.get(Oe)):pe.Ur.getTargetData($,re)}(o,m,Ki(t)).next(b=>{if(b)return u=b.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(m,b.targetId).next(F=>{d=F})}).next(()=>o.ss.getDocumentsMatchingQuery(m,t,r?u:en.min(),r?d:Pn())).next(b=>(Ar(o,K(t),b),{documents:b,Ts:d})))}function Tn(a,t){const r=Ft(a),o=Ft(r.Ur),u=r.os.get(t);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",d=>o.ot(d,t).next(m=>m?m.target:null))}function $n(a,t){const r=Ft(a),o=r.us.get(t)||en.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.cs.getAllFromCollectionGroup(u,t,me(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Ar(r,t,u),u))}function Ar(a,t,r){let o=a.us.get(t)||en.min();r.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),a.us.set(t,o)}function Ra(){return(Ra=(0,oe.A)(function*(a,t,r,o){const u=Ft(a);let d=Pn(),m=wt();for(const $ of r){const re=t.Es($.metadata.name);$.document&&(d=d.add(re));const pe=t.ds($);pe.setReadTime(t.As($.metadata.readTime)),m=m.insert(re,pe)}const b=u.cs.newChangeBuffer({trackRemovals:!0}),F=yield ae(u,(re=o,Ki(Ri(Rn.fromString(`__bundle__/docs/${re}`)))));var re;return u.persistence.runTransaction("Apply bundle documents","readwrite",$=>A($,b,m).next(re=>(b.apply($),re)).next(re=>u.Ur.removeMatchingKeysForTargetId($,F.targetId).next(()=>u.Ur.addMatchingKeys($,d,F.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments($,re.Ps,re.Is)).next(()=>re.Ps)))})).apply(this,arguments)}function Hu(a,t){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,oe.A)(function*(a,t,r=Pn()){const o=yield ae(a,Ki(js(t.bundledQuery))),u=Ft(a);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=Ni(t.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u.Gr.saveNamedQuery(d,t);const b=o.withResumeToken(Hr.EMPTY_BYTE_STRING,m);return u.os=u.os.insert(b.targetId,b),u.Ur.updateTargetData(d,b).next(()=>u.Ur.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Ur.addMatchingKeys(d,r,o.targetId)).next(()=>u.Gr.saveNamedQuery(d,t))})})).apply(this,arguments)}function zu(a,t){return`firestore_clients_${a}_${t}`}function jl(a,t,r){let o=`firestore_mutations_${a}_${r}`;return t.isAuthenticated()&&(o+=`_${t.uid}`),o}function $l(a,t){return`firestore_targets_${a}_${t}`}class Ka{constructor(t,r,o,u){this.user=t,this.batchId=r,this.state=o,this.error=u}static Rs(t,r,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new xt(u.error.code,u.error.message))),m?new Ka(t,r,u.state,d):(In("SharedClientState",`Failed to parse mutation state for ID '${r}': ${o}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class oa{constructor(t,r,o){this.targetId=t,this.state=r,this.error=o}static Rs(t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new xt(o.error.code,o.error.message))),d?new oa(t,o.state,u):(In("SharedClientState",`Failed to parse target state for ID '${t}': ${r}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Wu{constructor(t,r){this.clientId=t,this.activeTargetIds=r}static Rs(t,r){const o=JSON.parse(r);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=ki();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=dt(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new Wu(t,d):(In("SharedClientState",`Failed to parse client data for instance '${t}': ${r}`),null)}}class iu{constructor(t,r){this.clientId=t,this.onlineState=r}static Rs(t){const r=JSON.parse(t);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new iu(r.clientId,r.onlineState):(In("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Ku{constructor(){this.activeTargetIds=ki()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class dc{constructor(t,r,o,u,d){this.window=t,this.ui=r,this.persistenceKey=o,this.ps=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Pr(zt),this.started=!1,this.bs=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.Ds=zu(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new Ku),this.Cs=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(F){return`firestore_bundle_loaded_v2_${F}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,oe.A)(function*(){const r=yield t.syncEngine.Qi();for(const u of r){if(u===t.ps)continue;const d=t.getItem(zu(t.persistenceKey,u));if(d){const m=Wu.Rs(u,d);m&&(t.Ss=t.Ss.insert(m.clientId,m))}}t.Ns();const o=t.storage.getItem(t.xs);if(o){const u=t.Ls(o);u&&t.Bs(u)}for(const u of t.bs)t.ws(u);t.bs=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.vs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(t){let r=!1;return this.Ss.forEach((o,u)=>{u.activeTargetIds.has(t)&&(r=!0)}),r}addPendingMutation(t){this.qs(t,"pending")}updateMutationState(t,r,o){this.qs(t,r,o),this.Qs(t)}addLocalQueryTarget(t){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem($l(this.persistenceKey,t));if(o){const u=oa.Rs(t,o);u&&(r=u.state)}}return this.Ks.fs(t),this.Ns(),r}removeLocalQueryTarget(t){this.Ks.gs(t),this.Ns()}isLocalQueryTarget(t){return this.Ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem($l(this.persistenceKey,t))}updateQueryState(t,r,o){this.$s(t,r,o)}handleUserChange(t,r,o){r.forEach(u=>{this.Qs(u)}),this.currentUser=t,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(t){this.Us(t)}notifyBundleLoaded(t){this.Ws(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(t){const r=this.storage.getItem(t);return ot("SharedClientState","READ",t,r),r}setItem(t,r){ot("SharedClientState","SET",t,r),this.storage.setItem(t,r)}removeItem(t){ot("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ws(t){var r=this;const o=t;if(o.storageArea===this.storage){if(ot("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Ds)return void In("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,oe.A)(function*(){if(r.started){if(null!==o.key)if(r.Cs.test(o.key)){if(null==o.newValue){const u=r.Gs(o.key);return r.zs(u,null)}{const u=r.js(o.key,o.newValue);if(u)return r.zs(u.clientId,u)}}else if(r.Fs.test(o.key)){if(null!==o.newValue){const u=r.Hs(o.key,o.newValue);if(u)return r.Js(u)}}else if(r.Ms.test(o.key)){if(null!==o.newValue){const u=r.Ys(o.key,o.newValue);if(u)return r.Zs(u)}}else if(o.key===r.xs){if(null!==o.newValue){const u=r.Ls(o.newValue);if(u)return r.Bs(u)}}else if(o.key===r.vs){const u=function(m){let b=ne.oe;if(null!=m)try{const F=JSON.parse(m);_t("number"==typeof F),b=F}catch(F){In("SharedClientState","Failed to read sequence number from WebStorage",F)}return b}(o.newValue);u!==ne.oe&&r.sequenceNumberHandler(u)}else if(o.key===r.Os){const u=r.Xs(o.newValue);yield Promise.all(u.map(d=>r.syncEngine.eo(d)))}}else r.bs.push(o)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(t,r,o){const u=new Ka(this.currentUser,t,r,o),d=jl(this.persistenceKey,this.currentUser,t);this.setItem(d,u.Vs())}Qs(t){const r=jl(this.persistenceKey,this.currentUser,t);this.removeItem(r)}Us(t){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:t}))}$s(t,r,o){const u=$l(this.persistenceKey,t),d=new oa(t,r,o);this.setItem(u,d.Vs())}Ws(t){const r=JSON.stringify(Array.from(t));this.setItem(this.Os,r)}Gs(t){const r=this.Cs.exec(t);return r?r[1]:null}js(t,r){const o=this.Gs(t);return Wu.Rs(o,r)}Hs(t,r){const o=this.Fs.exec(t),u=Number(o[1]);return Ka.Rs(new rn(void 0!==o[2]?o[2]:null),u,r)}Ys(t,r){const o=this.Ms.exec(t),u=Number(o[1]);return oa.Rs(u,r)}Ls(t){return iu.Rs(t)}Xs(t){return JSON.parse(t)}Js(t){var r=this;return(0,oe.A)(function*(){if(t.user.uid===r.currentUser.uid)return r.syncEngine.no(t.batchId,t.state,t.error);ot("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Zs(t){return this.syncEngine.ro(t.targetId,t.state,t.error)}zs(t,r){const o=r?this.Ss.insert(t,r):this.Ss.remove(t),u=this.ks(this.Ss),d=this.ks(o),m=[],b=[];return d.forEach(F=>{u.has(F)||m.push(F)}),u.forEach(F=>{d.has(F)||b.push(F)}),this.syncEngine.io(m,b).then(()=>{this.Ss=o})}Bs(t){this.Ss.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ks(t){let r=ki();return t.forEach((o,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class qa{constructor(){this.so=new Ku,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,o){}addLocalQueryTarget(t){return this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,r,o){this.oo[t]=r}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Ku,Promise.resolve()}handleUserChange(t,r,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Ss{_o(t){}shutdown(){}}class C_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Fd=null;function Vd(){return null===Fd?Fd=268435456+Math.round(2147483648*Math.random()):Fd++,"0x"+Fd.toString(16)}const Jv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class w_{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}const Hs="WebChannelConnection";class Zv extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const o=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+r.host,this.vo=`projects/${u}/databases/${d}`,this.Co="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${d}`}get Fo(){return!1}Mo(r,o,u,d,m){const b=Vd(),F=this.xo(r,o.toUriEncodedString());ot("RestConnection",`Sending RPC '${r}' ${b}:`,F,u);const $={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo($,d,m),this.No(r,F,$,u).then(re=>(ot("RestConnection",`Received RPC '${r}' ${b}: `,re),re),re=>{throw Kn("RestConnection",`RPC '${r}' ${b} failed with error: `,re,"url: ",F,"request:",u),re})}Lo(r,o,u,d,m,b){return this.Mo(r,o,u,d,m)}Oo(r,o,u){r["X-Goog-Api-Client"]="gl-js/ fire/"+on,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((d,m)=>r[m]=d),u&&u.headers.forEach((d,m)=>r[m]=d)}xo(r,o){return`${this.Do}/v1/${o}:${Jv[r]}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,r,o,u){const d=Vd();return new Promise((m,b)=>{const F=new at;F.setWithCredentials(!0),F.listenOnce(Qe.COMPLETE,()=>{try{switch(F.getLastErrorCode()){case ft.NO_ERROR:const re=F.getResponseJson();ot(Hs,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(re)),m(re);break;case ft.TIMEOUT:ot(Hs,`RPC '${t}' ${d} timed out`),b(new xt(it.DEADLINE_EXCEEDED,"Request time out"));break;case ft.HTTP_ERROR:const pe=F.getStatus();if(ot(Hs,`RPC '${t}' ${d} failed with status:`,pe,"response text:",F.getResponseText()),pe>0){let Oe=F.getResponseJson();Array.isArray(Oe)&&(Oe=Oe[0]);const ut=Oe?.error;if(ut&&ut.status&&ut.message){const Ht=function(Qt){const Vn=Qt.toLowerCase().replace(/_/g,"-");return Object.values(it).indexOf(Vn)>=0?Vn:it.UNKNOWN}(ut.status);b(new xt(Ht,ut.message))}else b(new xt(it.UNKNOWN,"Server responded with status "+F.getStatus()))}else b(new xt(it.UNAVAILABLE,"Connection failed."));break;default:Rt()}}finally{ot(Hs,`RPC '${t}' ${d} completed.`)}});const $=JSON.stringify(u);ot(Hs,`RPC '${t}' ${d} sending request:`,u),F.send(r,"POST",$,o,15)})}Bo(t,r,o){const u=Vd(),d=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=Kt(),b=tt(),F={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},$=this.longPollingOptions.timeoutSeconds;void 0!==$&&(F.longPollingTimeout=Math.round(1e3*$)),this.useFetchStreams&&(F.xmlHttpFactory=new tn({})),this.Oo(F.initMessageHeaders,r,o),F.encodeInitMessageHeaders=!0;const re=d.join("");ot(Hs,`Creating RPC '${t}' stream ${u}: ${re}`,F);const pe=m.createWebChannel(re,F);let Oe=!1,ut=!1;const Ht=new w_({Io:Qt=>{ut?ot(Hs,`Not sending because RPC '${t}' stream ${u} is closed:`,Qt):(Oe||(ot(Hs,`Opening RPC '${t}' stream ${u} transport.`),pe.open(),Oe=!0),ot(Hs,`RPC '${t}' stream ${u} sending:`,Qt),pe.send(Qt))},To:()=>pe.close()}),nn=(Qt,Vn,Xn)=>{Qt.listen(Vn,kn=>{try{Xn(kn)}catch(cr){setTimeout(()=>{throw cr},0)}})};return nn(pe,Pe.EventType.OPEN,()=>{ut||(ot(Hs,`RPC '${t}' stream ${u} transport opened.`),Ht.yo())}),nn(pe,Pe.EventType.CLOSE,()=>{ut||(ut=!0,ot(Hs,`RPC '${t}' stream ${u} transport closed`),Ht.So())}),nn(pe,Pe.EventType.ERROR,Qt=>{ut||(ut=!0,Kn(Hs,`RPC '${t}' stream ${u} transport errored:`,Qt),Ht.So(new xt(it.UNAVAILABLE,"The operation could not be completed")))}),nn(pe,Pe.EventType.MESSAGE,Qt=>{var Vn;if(!ut){const Xn=Qt.data[0];_t(!!Xn);const cr=Xn.error||(null===(Vn=Xn[0])||void 0===Vn?void 0:Vn.error);if(cr){ot(Hs,`RPC '${t}' stream ${u} received error:`,cr);const Br=cr.status;let br=function(Ge){const st=ai[Ge];if(void 0!==st)return tc(st)}(Br),rt=cr.message;void 0===br&&(br=it.INTERNAL,rt="Unknown error status: "+Br+" with message "+cr.message),ut=!0,Ht.So(new xt(br,rt)),pe.close()}else ot(Hs,`RPC '${t}' stream ${u} received:`,Xn),Ht.bo(Xn)}}),nn(b,It.STAT_EVENT,Qt=>{Qt.stat===yt.PROXY?ot(Hs,`RPC '${t}' stream ${u} detected buffering proxy`):Qt.stat===yt.NOPROXY&&ot(Hs,`RPC '${t}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{Ht.wo()},0),Ht}}function eg(){return typeof window<"u"?window:null}function Hl(){return typeof document<"u"?document:null}function su(a){return new no(a,!0)}class hf{constructor(t,r,o=1e3,u=1.5,d=6e4){this.ui=t,this.timerId=r,this.ko=o,this.qo=u,this.Qo=d,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const r=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),u=Math.max(0,r-o);u>0&&ot("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,u,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class T_{constructor(t,r,o,u,d,m,b,F){this.ui=t,this.Ho=o,this.Jo=u,this.connection=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=b,this.listener=F,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hf(t,r)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var t=this;return(0,oe.A)(function*(){t.n_()&&(yield t.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){var t=this;return(0,oe.A)(function*(){if(t.r_())return t.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,r){var o=this;return(0,oe.A)(function*(){o.u_(),o.c_(),o.t_.cancel(),o.Yo++,4!==t?o.t_.reset():r&&r.code===it.RESOURCE_EXHAUSTED?(In(r.toString()),In("Using maximum backoff delay to prevent overloading the backend."),o.t_.Wo()):r&&r.code===it.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.l_(),o.stream.close(),o.stream=null),o.state=t,yield o.listener.mo(r)})()}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Yo===r&&this.P_(o,u)},o=>{t(()=>{const u=new xt(it.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(u)})})}P_(t,r){const o=this.h_(this.Yo);this.stream=this.T_(t,r),this.stream.Eo(()=>{o(()=>this.listener.Eo())}),this.stream.Ro(()=>{o(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(u=>{o(()=>this.I_(u))}),this.stream.onMessage(u=>{o(()=>1==++this.e_?this.E_(u):this.onNext(u))})}i_(){var t=this;this.state=5,this.t_.Go((0,oe.A)(function*(){t.state=0,t.start()}))}I_(t){return ot("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return r=>{this.ui.enqueueAndForget(()=>this.Yo===t?r():(ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eE extends T_{constructor(t,r,o,u,d,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,o,u,m),this.serializer=d}T_(t,r){return this.connection.Bo("Listen",t,r)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const r=function Tl(a,t){let r;if("targetChange"in t){const o="NO_CHANGE"===($=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===$?1:"REMOVE"===$?2:"CURRENT"===$?3:"RESET"===$?4:Rt(),u=t.targetChange.targetIds||[],d=function($,re){return $.useProto3Json?(_t(void 0===re||"string"==typeof re),Hr.fromBase64String(re||"")):(_t(void 0===re||re instanceof Buffer||re instanceof Uint8Array),Hr.fromUint8Array(re||new Uint8Array))}(a,t.targetChange.resumeToken),m=t.targetChange.cause,b=m&&function($){const re=void 0===$.code?it.UNKNOWN:tc($.code);return new xt(re,$.message||"")}(m);r=new Sa(o,u,d,b||null)}else if("documentChange"in t){const o=t.documentChange,u=ya(a,o.document.name),d=Ni(o.document.updateTime),m=o.document.createTime?Ni(o.document.createTime):en.min(),b=new Yr({mapValue:{fields:o.document.fields}}),F=ar.newFoundDocument(u,d,m,b);r=new So(o.targetIds||[],o.removedTargetIds||[],F.key,F)}else if("documentDelete"in t){const o=t.documentDelete,u=ya(a,o.document),d=o.readTime?Ni(o.readTime):en.min(),m=ar.newNoDocument(u,d);r=new So([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in t){const o=t.documentRemove,u=ya(a,o.document);r=new So([],o.removedTargetIds||[],u,null)}else{if(!("filter"in t))return Rt();{const o=t.filter,{count:u=0,unchangedNames:d}=o,m=new El(u,d);r=new ba(o.targetId,m)}}var $;return r}(this.serializer,t),o=function(d){if(!("targetChange"in d))return en.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?en.min():m.readTime?Ni(m.readTime):en.min()}(t);return this.listener.d_(r,o)}A_(t){const r={};r.database=Ru(this.serializer),r.addTarget=function(d,m){let b;const F=m.target;if(b=Aa(F)?{documents:M(d,F)}:{query:w(d,F)._t},b.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){b.resumeToken=Qc(d,m.resumeToken);const $=Ba(d,m.expectedCount);null!==$&&(b.expectedCount=$)}else if(m.snapshotVersion.compareTo(en.min())>0){b.readTime=ic(d,m.snapshotVersion.toTimestamp());const $=Ba(d,m.expectedCount);null!==$&&(b.expectedCount=$)}return b}(this.serializer,t);const o=function ee(a,t){const r=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Rt()}}(t.purpose);return null==r?null:{"goog-listen-tags":r}}(0,t);o&&(r.labels=o),this.a_(r)}R_(t){const r={};r.database=Ru(this.serializer),r.removeTarget=t,this.a_(r)}}class tE extends T_{constructor(t,r,o,u,d,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,o,u,m),this.serializer=d}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,r){return this.connection.Bo("Write",t,r)}E_(t){return _t(!!t.streamToken),this.lastStreamToken=t.streamToken,_t(!t.writeResults||0===t.writeResults.length),this.listener.f_()}onNext(t){_t(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const r=function E(a,t){return a&&a.length>0?(_t(void 0!==t),a.map(r=>function(u,d){let m=Ni(u.updateTime?u.updateTime:d);return m.isEqual(en.min())&&(m=Ni(d)),new mr(m,u.transformResults||[])}(r,t))):[]}(t.writeResults,t.commitTime),o=Ni(t.commitTime);return this.listener.g_(o,r)}p_(){const t={};t.database=Ru(this.serializer),this.a_(t)}m_(t){const r={streamToken:this.lastStreamToken,writes:t.map(o=>Ou(this.serializer,o))};this.a_(r)}}class D_ extends class{}{constructor(t,r,o,u){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=o,this.serializer=u,this.y_=!1}w_(){if(this.y_)throw new xt(it.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,r,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Mo(t,ja(r,o),u,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new xt(it.UNKNOWN,d.toString())})}Lo(t,r,o,u,d){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,b])=>this.connection.Lo(t,ja(r,o),u,m,b,d)).catch(m=>{throw"FirebaseError"===m.name?(m.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new xt(it.UNKNOWN,m.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class nE{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const r=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(In(r),this.D_=!1):ot("OnlineStateTracker",r)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class A_{constructor(t,r,o,u,d){var m=this;this.localStore=t,this.datastore=r,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=d,this.k_._o(b=>{o.enqueueAndForget((0,oe.A)(function*(){var F;Po(m)&&(ot("RemoteStore","Restarting streams for network reachability change."),yield(F=(0,oe.A)(function*(re){const pe=Ft(re);pe.L_.add(4),yield Ud(pe),pe.q_.set("Unknown"),pe.L_.delete(4),yield Ld(pe)}),function $(re){return F.apply(this,arguments)})(m))}))}),this.q_=new nE(o,u)}}function Ld(a){return tg.apply(this,arguments)}function tg(){return(tg=(0,oe.A)(function*(a){if(Po(a))for(const t of a.B_)yield t(!0)})).apply(this,arguments)}function Ud(a){return ff.apply(this,arguments)}function ff(){return(ff=(0,oe.A)(function*(a){for(const t of a.B_)yield t(!1)})).apply(this,arguments)}function Bd(a,t){const r=Ft(a);r.N_.has(t.targetId)||(r.N_.set(t.targetId,t),jd(r)?S_(r):Wl(r).r_()&&b_(r,t))}function oo(a,t){const r=Ft(a),o=Wl(r);r.N_.delete(t),o.r_()&&ng(r,t),0===r.N_.size&&(o.r_()?o.o_():Po(r)&&r.q_.set("Unknown"))}function b_(a,t){if(a.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(en.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Wl(a).A_(t)}function ng(a,t){a.Q_.xe(t),Wl(a).R_(t)}function S_(a){a.Q_=new Su({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>a.N_.get(t)||null,tt:()=>a.datastore.serializer.databaseId}),Wl(a).start(),a.q_.v_()}function jd(a){return Po(a)&&!Wl(a).n_()&&a.N_.size>0}function Po(a){return 0===Ft(a).L_.size}function rg(a){a.Q_=void 0}function Gl(a){return ig.apply(this,arguments)}function ig(){return(ig=(0,oe.A)(function*(a){a.q_.set("Online")})).apply(this,arguments)}function rE(a){return pf.apply(this,arguments)}function pf(){return(pf=(0,oe.A)(function*(a){a.N_.forEach((t,r)=>{b_(a,t)})})).apply(this,arguments)}function H0(a,t){return P_.apply(this,arguments)}function P_(){return(P_=(0,oe.A)(function*(a,t){rg(a),jd(a)?(a.q_.M_(t),S_(a)):a.q_.set("Unknown")})).apply(this,arguments)}function G0(a,t,r){return M_.apply(this,arguments)}function M_(){return M_=(0,oe.A)(function*(a,t,r){if(a.q_.set("Online"),t instanceof Sa&&2===t.state&&t.cause)try{yield(o=(0,oe.A)(function*(d,m){const b=m.cause;for(const F of m.targetIds)d.N_.has(F)&&(yield d.remoteSyncer.rejectListen(F,b),d.N_.delete(F),d.Q_.removeTarget(F))}),function u(d,m){return o.apply(this,arguments)})(a,t)}catch(o){ot("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),yield sg(a,o)}else if(t instanceof So?a.Q_.Ke(t):t instanceof ba?a.Q_.He(t):a.Q_.We(t),!r.isEqual(en.min()))try{const o=yield h(a.localStore);r.compareTo(o)>=0&&(yield function(d,m){const b=d.Q_.rt(m);return b.targetChanges.forEach((F,$)=>{if(F.resumeToken.approximateByteSize()>0){const re=d.N_.get($);re&&d.N_.set($,re.withResumeToken(F.resumeToken,m))}}),b.targetMismatches.forEach((F,$)=>{const re=d.N_.get(F);if(!re)return;d.N_.set(F,re.withResumeToken(Hr.EMPTY_BYTE_STRING,re.snapshotVersion)),ng(d,F);const pe=new ho(re.target,F,$,re.sequenceNumber);b_(d,pe)}),d.remoteSyncer.applyRemoteEvent(b)}(a,r))}catch(o){ot("RemoteStore","Failed to raise snapshot:",o),yield sg(a,o)}var o}),M_.apply(this,arguments)}function sg(a,t,r){return og.apply(this,arguments)}function og(){return(og=(0,oe.A)(function*(a,t,r){if(!ss(t))throw t;a.L_.add(1),yield Ud(a),a.q_.set("Offline"),r||(r=()=>h(a.localStore)),a.asyncQueue.enqueueRetryable((0,oe.A)(function*(){ot("RemoteStore","Retrying IndexedDB access"),yield r(),a.L_.delete(1),yield Ld(a)}))})).apply(this,arguments)}function qu(a,t){return t().catch(r=>sg(a,r,t))}function hc(a){return gf.apply(this,arguments)}function gf(){return(gf=(0,oe.A)(function*(a){const t=Ft(a),r=ou(t);let o=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;iE(t);)try{const u=yield z(t.localStore,o);if(null===u){0===t.O_.length&&r.o_();break}o=u.batchId,ag(t,u)}catch(u){yield sg(t,u)}Qa(t)&&R_(t)})).apply(this,arguments)}function iE(a){return Po(a)&&a.O_.length<10}function ag(a,t){a.O_.push(t);const r=ou(a);r.r_()&&r.V_&&r.m_(t.mutations)}function Qa(a){return Po(a)&&!ou(a).n_()&&a.O_.length>0}function R_(a){ou(a).start()}function cg(a){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,oe.A)(function*(a){ou(a).p_()})).apply(this,arguments)}function sE(a){return mf.apply(this,arguments)}function mf(){return(mf=(0,oe.A)(function*(a){const t=ou(a);for(const r of a.O_)t.m_(r.mutations)})).apply(this,arguments)}function O_(a,t,r){return zl.apply(this,arguments)}function zl(){return(zl=(0,oe.A)(function*(a,t,r){const o=a.O_.shift(),u=lo.from(o,t,r);yield qu(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),yield hc(a)})).apply(this,arguments)}function _f(a,t){return $d.apply(this,arguments)}function $d(){return $d=(0,oe.A)(function*(a,t){var r;t&&ou(a).V_&&(yield(r=(0,oe.A)(function*(u,d){if(Dc(b=d.code)&&b!==it.ABORTED){const m=u.O_.shift();ou(u).s_(),yield qu(u,()=>u.remoteSyncer.rejectFailedWrite(m.batchId,d)),yield hc(u)}var b}),function o(u,d){return r.apply(this,arguments)})(a,t)),Qa(a)&&R_(a)}),$d.apply(this,arguments)}function N_(a,t){return ug.apply(this,arguments)}function ug(){return(ug=(0,oe.A)(function*(a,t){const r=Ft(a);r.asyncQueue.verifyOperationInProgress(),ot("RemoteStore","RemoteStore received new credentials");const o=Po(r);r.L_.add(3),yield Ud(r),o&&r.q_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(t),r.L_.delete(3),yield Ld(r)})).apply(this,arguments)}function lg(a,t){return yf.apply(this,arguments)}function yf(){return(yf=(0,oe.A)(function*(a,t){const r=Ft(a);t?(r.L_.delete(2),yield Ld(r)):t||(r.L_.add(2),yield Ud(r),r.q_.set("Unknown"))})).apply(this,arguments)}function Wl(a){return a.K_||(a.K_=function(r,o,u){const d=Ft(r);return d.w_(),new eE(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:Gl.bind(null,a),Ro:rE.bind(null,a),mo:H0.bind(null,a),d_:G0.bind(null,a)}),a.B_.push(function(){var t=(0,oe.A)(function*(r){r?(a.K_.s_(),jd(a)?S_(a):a.q_.set("Unknown")):(yield a.K_.stop(),rg(a))});return function(r){return t.apply(this,arguments)}}())),a.K_}function ou(a){return a.U_||(a.U_=function(r,o,u){const d=Ft(r);return d.w_(),new tE(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:()=>Promise.resolve(),Ro:cg.bind(null,a),mo:_f.bind(null,a),f_:sE.bind(null,a),g_:O_.bind(null,a)}),a.B_.push(function(){var t=(0,oe.A)(function*(r){r?(a.U_.s_(),yield hc(a)):(yield a.U_.stop(),a.O_.length>0&&(ot("RemoteStore",`Stopping write stream with ${a.O_.length} pending writes`),a.O_=[]))});return function(r){return t.apply(this,arguments)}}())),a.U_}class Mo{constructor(t,r,o,u,d){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,o,u,d){const m=Date.now()+o,b=new Mo(t,r,m,u,d);return b.start(o),b}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xt(it.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function au(a,t){if(In("AsyncQueue",`${t}: ${a}`),ss(a))return new xt(it.UNAVAILABLE,`${t}: ${a}`);throw a}class Xu{constructor(t){this.comparator=t?(r,o)=>t(r,o)||we.comparator(r.key,o.key):(r,o)=>we.comparator(r.key,o.key),this.keyedMap=hn(),this.sortedSet=new Pr(this.comparator)}static emptySet(t){return new Xu(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,o)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Xu)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,r){const o=new Xu;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=r,o}}class vf{constructor(){this.W_=new Pr(we.comparator)}track(t){const r=t.doc.key,o=this.W_.get(r);o?0!==t.type&&3===o.type?this.W_=this.W_.insert(r,t):3===t.type&&1!==o.type?this.W_=this.W_.insert(r,{type:o.type,doc:t.doc}):2===t.type&&2===o.type?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):2===t.type&&0===o.type?this.W_=this.W_.insert(r,{type:0,doc:t.doc}):1===t.type&&0===o.type?this.W_=this.W_.remove(r):1===t.type&&2===o.type?this.W_=this.W_.insert(r,{type:1,doc:o.doc}):0===t.type&&1===o.type?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):Rt():this.W_=this.W_.insert(r,t)}G_(){const t=[];return this.W_.inorderTraversal((r,o)=>{t.push(o)}),t}}class Ps{constructor(t,r,o,u,d,m,b,F,$){this.query=t,this.docs=r,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=b,this.excludesMetadataChanges=F,this.hasCachedResults=$}static fromInitialDocuments(t,r,o,u,d){const m=[];return r.forEach(b=>{m.push({type:0,doc:b})}),new Ps(t,r,Xu.emptySet(r),m,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Y(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,o=t.docChanges;if(r.length!==o.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==o[u].type||!r[u].doc.isEqual(o[u].doc))return!1;return!0}}class Hd{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class x_{constructor(){this.queries=dg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(r,o){const u=Ft(r),d=u.queries;u.queries=dg(),d.forEach((m,b)=>{for(const F of b.j_)F.onError(o)})}(this,new xt(it.ABORTED,"Firestore shutting down"))}}function dg(){return new Fe(a=>C(a),Y)}function hg(a,t){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,oe.A)(function*(a,t){const r=Ft(a);let o=3;const u=t.query;let d=r.queries.get(u);d?!d.H_()&&t.J_()&&(o=2):(d=new Hd,o=t.J_()?0:1);try{switch(o){case 0:d.z_=yield r.onListen(u,!0);break;case 1:d.z_=yield r.onListen(u,!1);break;case 2:yield r.onFirstRemoteStoreListen(u)}}catch(m){const b=au(m,`Initialization of query '${D(t.query)}' failed`);return void t.onError(b)}r.queries.set(u,d),d.j_.push(t),t.Z_(r.onlineState),d.z_&&t.X_(d.z_)&&pg(r)})).apply(this,arguments)}function fg(a,t){return If.apply(this,arguments)}function If(){return(If=(0,oe.A)(function*(a,t){const r=Ft(a),o=t.query;let u=3;const d=r.queries.get(o);if(d){const m=d.j_.indexOf(t);m>=0&&(d.j_.splice(m,1),0===d.j_.length?u=t.J_()?0:1:!d.H_()&&t.J_()&&(u=2))}switch(u){case 0:return r.queries.delete(o),r.onUnlisten(o,!0);case 1:return r.queries.delete(o),r.onUnlisten(o,!1);case 2:return r.onLastRemoteStoreUnlisten(o);default:return}})).apply(this,arguments)}function oE(a,t){const r=Ft(a);let o=!1;for(const u of t){const m=r.queries.get(u.query);if(m){for(const b of m.j_)b.X_(u)&&(o=!0);m.z_=u}}o&&pg(r)}function k_(a,t,r){const o=Ft(a),u=o.queries.get(t);if(u)for(const d of u.j_)d.onError(r);o.queries.delete(t)}function pg(a){a.Y_.forEach(t=>{t.next()})}var gg,F_;(F_=gg||(gg={})).ea="default",F_.Cache="cache";class mg{constructor(t,r,o){this.query=t,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(t){if(!this.options.includeMetadataChanges){const o=[];for(const u of t.docChanges)3!==u.type&&o.push(u);t=new Ps(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.na?this.ia(t)&&(this.ta.next(t),r=!0):this.sa(t,this.onlineState)&&(this.oa(t),r=!0),this.ra=t,r}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),r=!0),r}sa(t,r){return!t.fromCache||!this.J_()||(!this.options._a||!("Offline"!==r))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===r)}ia(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(t){t=Ps.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==gg.Cache}}class V_{constructor(t,r){this.aa=t,this.byteLength=r}ua(){return"metadata"in this.aa}}class _g{constructor(t){this.serializer=t}Es(t){return ya(this.serializer,t)}ds(t){return t.metadata.exists?Zh(this.serializer,t.document,!1):ar.newNoDocument(this.Es(t.metadata.name),this.As(t.metadata.readTime))}As(t){return Ni(t)}}class L_{constructor(t,r,o){this.ca=t,this.localStore=r,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gd(t)}la(t){this.progress.bytesLoaded+=t.byteLength;let r=this.progress.documentsLoaded;if(t.aa.namedQuery)this.queries.push(t.aa.namedQuery);else if(t.aa.documentMetadata){this.documents.push({metadata:t.aa.documentMetadata}),t.aa.documentMetadata.exists||++r;const o=Rn.fromString(t.aa.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else t.aa.document&&(this.documents[this.documents.length-1].document=t.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(t){const r=new Map,o=new _g(this.serializer);for(const u of t)if(u.metadata.queries){const d=o.Es(u.metadata.name);for(const m of u.metadata.queries){const b=(r.get(m)||Pn()).add(d);r.set(m,b)}}return r}complete(){var t=this;return(0,oe.A)(function*(){const r=yield function so(a,t,r,o){return Ra.apply(this,arguments)}(t.localStore,new _g(t.serializer),t.documents,t.ca.id),o=t.ha(t.documents);for(const u of t.queries)yield Hu(t.localStore,u,o.get(u.name));return t.progress.taskState="Success",{progress:t.progress,Pa:t.collectionGroups,Ia:r}})()}}function Gd(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class yg{constructor(t){this.key=t}}class vg{constructor(t){this.key=t}}class Eg{constructor(t,r){this.query=t,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pn(),this.mutatedKeys=Pn(),this.Aa=he(t),this.Ra=new Xu(this.Aa)}get Va(){return this.Ta}ma(t,r){const o=r?r.fa:new vf,u=r?r.Ra:this.Ra;let d=r?r.mutatedKeys:this.mutatedKeys,m=u,b=!1;const F="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,$="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal((re,pe)=>{const Oe=u.get(re),ut=L(this.query,pe)?pe:null,Ht=!!Oe&&this.mutatedKeys.has(Oe.key),nn=!!ut&&(ut.hasLocalMutations||this.mutatedKeys.has(ut.key)&&ut.hasCommittedMutations);let Qt=!1;Oe&&ut?Oe.data.isEqual(ut.data)?Ht!==nn&&(o.track({type:3,doc:ut}),Qt=!0):this.ga(Oe,ut)||(o.track({type:2,doc:ut}),Qt=!0,(F&&this.Aa(ut,F)>0||$&&this.Aa(ut,$)<0)&&(b=!0)):!Oe&&ut?(o.track({type:0,doc:ut}),Qt=!0):Oe&&!ut&&(o.track({type:1,doc:Oe}),Qt=!0,(F||$)&&(b=!0)),Qt&&(ut?(m=m.add(ut),d=nn?d.add(re):d.delete(re)):(m=m.delete(re),d=d.delete(re)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const re="F"===this.query.limitType?m.last():m.first();m=m.delete(re.key),d=d.delete(re.key),o.track({type:1,doc:re})}return{Ra:m,fa:o,ns:b,mutatedKeys:d}}ga(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,o,u){const d=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const m=t.fa.G_();m.sort((re,pe)=>function(ut,Ht){const nn=Qt=>{switch(Qt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Rt()}};return nn(ut)-nn(Ht)}(re.type,pe.type)||this.Aa(re.doc,pe.doc)),this.pa(o),u=null!=u&&u;const b=r&&!u?this.ya():[],F=0===this.da.size&&this.current&&!u?1:0,$=F!==this.Ea;return this.Ea=F,0!==m.length||$?{snapshot:new Ps(this.query,t.Ra,d,m,t.mutatedKeys,0===F,$,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:b}:{wa:b}}Z_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Pn(),this.Ra.forEach(o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))});const r=[];return t.forEach(o=>{this.da.has(o)||r.push(new vg(o))}),this.da.forEach(o=>{t.has(o)||r.push(new yg(o))}),r}ba(t){this.Ta=t.Ts,this.da=Pn();const r=this.ma(t.documents);return this.applyChanges(r,!0)}Da(){return Ps.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class U_{constructor(t,r,o){this.query=t,this.targetId=r,this.view=o}}class aE{constructor(t){this.key=t,this.va=!1}}class cE{constructor(t,r,o,u,d,m){this.localStore=t,this.remoteStore=r,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.Ca={},this.Fa=new Fe(b=>C(b),Y),this.Ma=new Map,this.xa=new Set,this.Oa=new Pr(we.comparator),this.Na=new Map,this.La=new nu,this.Ba={},this.ka=new Map,this.qa=$s.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function uE(a,t){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,oe.A)(function*(a,t,r=!0){const o=Fg(a);let u;const d=o.Fa.get(t);return d?(o.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.Da()):u=yield Cg(o,t,r,!0),u})).apply(this,arguments)}function B_(a,t){return j_.apply(this,arguments)}function j_(){return(j_=(0,oe.A)(function*(a,t){const r=Fg(a);yield Cg(r,t,!0,!1)})).apply(this,arguments)}function Cg(a,t,r,o){return wg.apply(this,arguments)}function wg(){return(wg=(0,oe.A)(function*(a,t,r,o){const u=yield ae(a.localStore,Ki(t)),d=u.targetId,m=r?a.sharedClientState.addLocalQueryTarget(d):"not-current";let b;return o&&(b=yield Tg(a,t,d,"current"===m,u.resumeToken)),a.isPrimaryClient&&r&&Bd(a.remoteStore,u),b})).apply(this,arguments)}function Tg(a,t,r,o,u){return $_.apply(this,arguments)}function $_(){return $_=(0,oe.A)(function*(a,t,r,o,u){a.Ka=(pe,Oe,ut)=>{return(Ht=(0,oe.A)(function*(Qt,Vn,Xn,kn){let cr=Vn.view.ma(Xn);cr.ns&&(cr=yield Gt(Qt.localStore,Vn.query,!1).then(({documents:Ae})=>Vn.view.ma(Ae,cr)));const Br=kn&&kn.targetChanges.get(Vn.targetId),br=kn&&null!=kn.targetMismatches.get(Vn.targetId),rt=Vn.view.applyChanges(cr,Qt.isPrimaryClient,Br,br);return Wd(Qt,Vn.targetId,rt.wa),rt.snapshot}),function nn(Qt,Vn,Xn,kn){return Ht.apply(this,arguments)})(a,pe,Oe,ut);var Ht};const d=yield Gt(a.localStore,t,!0),m=new Eg(t,d.Ts),b=m.ma(d.documents),F=mi.createSynthesizedTargetChangeForCurrentChange(r,o&&"Offline"!==a.onlineState,u),$=m.applyChanges(b,a.isPrimaryClient,F);Wd(a,r,$.wa);const re=new U_(t,r,m);return a.Fa.set(t,re),a.Ma.has(r)?a.Ma.get(r).push(t):a.Ma.set(r,[t]),$.snapshot}),$_.apply(this,arguments)}function lE(a,t,r){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,oe.A)(function*(a,t,r){const o=Ft(a),u=o.Fa.get(t),d=o.Ma.get(u.targetId);if(d.length>1)return o.Ma.set(u.targetId,d.filter(m=>!Y(m,t))),void o.Fa.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Ve(o.localStore,u.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(u.targetId),r&&oo(o.remoteStore,u.targetId),uu(o,u.targetId)}).catch(Sn))):(uu(o,u.targetId),yield Ve(o.localStore,u.targetId,!0))})).apply(this,arguments)}function Dg(a,t){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,oe.A)(function*(a,t){const r=Ft(a),o=r.Fa.get(t),u=r.Ma.get(o.targetId);r.isPrimaryClient&&1===u.length&&(r.sharedClientState.removeLocalQueryTarget(o.targetId),oo(r.remoteStore,o.targetId))})).apply(this,arguments)}function wf(){return(wf=(0,oe.A)(function*(a,t,r){const o=Zu(a);try{const u=yield function(m,b){const F=Ft(m),$=Zt.now(),re=b.reduce((ut,Ht)=>ut.add(Ht.key),Pn());let pe,Oe;return F.persistence.runTransaction("Locally write mutations","readwrite",ut=>{let Ht=wt(),nn=Pn();return F.cs.getEntries(ut,re).next(Qt=>{Ht=Qt,Ht.forEach((Vn,Xn)=>{Xn.isValidDocument()||(nn=nn.add(Vn))})}).next(()=>F.localDocuments.getOverlayedDocuments(ut,Ht)).next(Qt=>{pe=Qt;const Vn=[];for(const Xn of b){const kn=pr(Xn,pe.get(Xn.key).overlayedDocument);null!=kn&&Vn.push(new _r(Xn.key,kn,co(kn.value.mapValue),xn.exists(!0)))}return F.mutationQueue.addMutationBatch(ut,$,Vn,b)}).next(Qt=>{Oe=Qt;const Vn=Qt.applyToLocalDocumentSet(pe,nn);return F.documentOverlayCache.saveOverlays(ut,Qt.batchId,Vn)})}).then(()=>({batchId:Oe.batchId,changes:hr(pe)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(u.batchId),function(m,b,F){let $=m.Ba[m.currentUser.toKey()];$||($=new Pr(zt)),$=$.insert(b,F),m.Ba[m.currentUser.toKey()]=$}(o,u.batchId,r),yield Oa(o,u.changes),yield hc(o.remoteStore)}catch(u){const d=au(u,"Failed to persist write");r.reject(d)}})).apply(this,arguments)}function H_(a,t){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,oe.A)(function*(a,t){const r=Ft(a);try{const o=yield function f(a,t){const r=Ft(a),o=t.snapshotVersion;let u=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=r.cs.newChangeBuffer({trackRemovals:!0});u=r.os;const b=[];t.targetChanges.forEach((re,pe)=>{const Oe=u.get(pe);if(!Oe)return;b.push(r.Ur.removeMatchingKeys(d,re.removedDocuments,pe).next(()=>r.Ur.addMatchingKeys(d,re.addedDocuments,pe)));let ut=Oe.withSequenceNumber(d.currentSequenceNumber);var nn,Qt,Vn;null!==t.targetMismatches.get(pe)?ut=ut.withResumeToken(Hr.EMPTY_BYTE_STRING,en.min()).withLastLimboFreeSnapshotVersion(en.min()):re.resumeToken.approximateByteSize()>0&&(ut=ut.withResumeToken(re.resumeToken,o)),u=u.insert(pe,ut),Qt=ut,Vn=re,(0===(nn=Oe).resumeToken.approximateByteSize()||Qt.snapshotVersion.toMicroseconds()-nn.snapshotVersion.toMicroseconds()>=3e8||Vn.addedDocuments.size+Vn.modifiedDocuments.size+Vn.removedDocuments.size>0)&&b.push(r.Ur.updateTargetData(d,ut))});let F=wt(),$=Pn();if(t.documentUpdates.forEach(re=>{t.resolvedLimboDocuments.has(re)&&b.push(r.persistence.referenceDelegate.updateLimboDocument(d,re))}),b.push(A(d,m,t.documentUpdates).next(re=>{F=re.Ps,$=re.Is})),!o.isEqual(en.min())){const re=r.Ur.getLastRemoteSnapshotVersion(d).next(pe=>r.Ur.setTargetsMetadata(d,d.currentSequenceNumber,o));b.push(re)}return Ne.waitFor(b).next(()=>m.apply(d)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,F,$)).next(()=>F)}).then(d=>(r.os=u,d))}(r.localStore,t);t.targetChanges.forEach((u,d)=>{const m=r.Na.get(d);m&&(_t(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.va=!0:u.modifiedDocuments.size>0?_t(m.va):u.removedDocuments.size>0&&(_t(m.va),m.va=!1))}),yield Oa(r,o,t)}catch(o){yield Sn(o)}})).apply(this,arguments)}function Df(a,t,r){const o=Ft(a);if(o.isPrimaryClient&&0===r||!o.isPrimaryClient&&1===r){const u=[];o.Fa.forEach((d,m)=>{const b=m.view.Z_(t);b.snapshot&&u.push(b.snapshot)}),function(m,b){const F=Ft(m);F.onlineState=b;let $=!1;F.queries.forEach((re,pe)=>{for(const Oe of pe.j_)Oe.Z_(b)&&($=!0)}),$&&pg(F)}(o.eventManager,t),u.length&&o.Ca.d_(u),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}function z0(a,t,r){return bg.apply(this,arguments)}function bg(){return(bg=(0,oe.A)(function*(a,t,r){const o=Ft(a);o.sharedClientState.updateQueryState(t,"rejected",r);const u=o.Na.get(t),d=u&&u.key;if(d){let m=new Pr(we.comparator);m=m.insert(d,ar.newNoDocument(d,en.min()));const b=Pn().add(d),F=new rc(en.min(),new Map,new Pr(zt),m,b);yield H_(o,F),o.Oa=o.Oa.remove(d),o.Na.delete(t),Ju(o)}else yield Ve(o.localStore,t,!1).then(()=>uu(o,t,r)).catch(Sn)})).apply(this,arguments)}function dE(a,t){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,oe.A)(function*(a,t){const r=Ft(a),o=t.batch.batchId;try{const u=yield function I(a,t){const r=Ft(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=t.batch.keys(),d=r.cs.newChangeBuffer({trackRemovals:!0});return function(b,F,$,re){const pe=$.batch,Oe=pe.keys();let ut=Ne.resolve();return Oe.forEach(Ht=>{ut=ut.next(()=>re.getEntry(F,Ht)).next(nn=>{const Qt=$.docVersions.get(Ht);_t(null!==Qt),nn.version.compareTo(Qt)<0&&(pe.applyToRemoteDocument(nn,$),nn.isValidDocument()&&(nn.setReadTime($.commitVersion),re.addEntry(nn)))})}),ut.next(()=>b.mutationQueue.removeMutationBatch(F,pe))}(r,o,t,d).next(()=>d.apply(o)).next(()=>r.mutationQueue.performConsistencyCheck(o)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(o,u,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(b){let F=Pn();for(let $=0;$<b.mutationResults.length;++$)b.mutationResults[$].transformResults.length>0&&(F=F.add(b.batch.mutations[$].key));return F}(t))).next(()=>r.localDocuments.getDocuments(o,u))})}(r.localStore,t);zd(r,o,null),Pg(r,o),r.sharedClientState.updateMutationState(o,"acknowledged"),yield Oa(r,u)}catch(u){yield Sn(u)}})).apply(this,arguments)}function hE(a,t,r){return G_.apply(this,arguments)}function G_(){return(G_=(0,oe.A)(function*(a,t,r){const o=Ft(a);try{const u=yield function(m,b){const F=Ft(m);return F.persistence.runTransaction("Reject batch","readwrite-primary",$=>{let re;return F.mutationQueue.lookupMutationBatch($,b).next(pe=>(_t(null!==pe),re=pe.keys(),F.mutationQueue.removeMutationBatch($,pe))).next(()=>F.mutationQueue.performConsistencyCheck($)).next(()=>F.documentOverlayCache.removeOverlaysForBatchId($,re,b)).next(()=>F.localDocuments.recalculateAndSaveOverlaysForDocumentKeys($,re)).next(()=>F.localDocuments.getDocuments($,re))})}(o.localStore,t);zd(o,t,r),Pg(o,t),o.sharedClientState.updateMutationState(t,"rejected",r),yield Oa(o,u)}catch(u){yield Sn(u)}})).apply(this,arguments)}function Kl(){return(Kl=(0,oe.A)(function*(a,t){const r=Ft(a);Po(r.remoteStore)||ot("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const b=Ft(m);return b.persistence.runTransaction("Get highest unacknowledged batch id","readonly",F=>b.mutationQueue.getHighestUnacknowledgedBatchId(F))}(r.localStore);if(-1===o)return void t.resolve();const u=r.ka.get(o)||[];u.push(t),r.ka.set(o,u)}catch(o){const u=au(o,"Initialization of waitForPendingWrites() operation failed");t.reject(u)}})).apply(this,arguments)}function Pg(a,t){(a.ka.get(t)||[]).forEach(r=>{r.resolve()}),a.ka.delete(t)}function zd(a,t,r){const o=Ft(a);let u=o.Ba[o.currentUser.toKey()];if(u){const d=u.get(t);d&&(r?d.reject(r):d.resolve(),u=u.remove(t)),o.Ba[o.currentUser.toKey()]=u}}function uu(a,t,r=null){a.sharedClientState.removeLocalQueryTarget(t);for(const o of a.Ma.get(t))a.Fa.delete(o),r&&a.Ca.$a(o,r);a.Ma.delete(t),a.isPrimaryClient&&a.La.gr(t).forEach(o=>{a.La.containsKey(o)||Yu(a,o)})}function Yu(a,t){a.xa.delete(t.path.canonicalString());const r=a.Oa.get(t);null!==r&&(oo(a.remoteStore,r),a.Oa=a.Oa.remove(t),a.Na.delete(r),Ju(a))}function Wd(a,t,r){for(const o of r)o instanceof yg?(a.La.addReference(o.key,t),Mg(a,o)):o instanceof vg?(ot("SyncEngine","Document no longer in limbo: "+o.key),a.La.removeReference(o.key,t),a.La.containsKey(o.key)||Yu(a,o.key)):Rt()}function Mg(a,t){const r=t.key,o=r.path.canonicalString();a.Oa.get(r)||a.xa.has(o)||(ot("SyncEngine","New document in limbo: "+r),a.xa.add(o),Ju(a))}function Ju(a){for(;a.xa.size>0&&a.Oa.size<a.maxConcurrentLimboResolutions;){const t=a.xa.values().next().value;a.xa.delete(t);const r=new we(Rn.fromString(t)),o=a.qa.next();a.Na.set(o,new aE(r)),a.Oa=a.Oa.insert(r,o),Bd(a.remoteStore,new ho(Ki(Ri(r.path)),o,"TargetPurposeLimboResolution",ne.oe))}}function Oa(a,t,r){return lu.apply(this,arguments)}function lu(){return lu=(0,oe.A)(function*(a,t,r){const o=Ft(a),u=[],d=[],m=[];var b;o.Fa.isEmpty()||(o.Fa.forEach((b,F)=>{m.push(o.Ka(F,t,r).then($=>{var re;if(($||r)&&o.isPrimaryClient){const pe=$?!$.fromCache:null===(re=r?.targetChanges.get(F.targetId))||void 0===re?void 0:re.current;o.sharedClientState.updateQueryState(F.targetId,pe?"current":"not-current")}if($){u.push($);const pe=kd.Wi(F.targetId,$);d.push(pe)}}))}),yield Promise.all(m),o.Ca.d_(u),yield(b=(0,oe.A)(function*($,re){const pe=Ft($);try{yield pe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Oe=>Ne.forEach(re,ut=>Ne.forEach(ut.$i,Ht=>pe.persistence.referenceDelegate.addReference(Oe,ut.targetId,Ht)).next(()=>Ne.forEach(ut.Ui,Ht=>pe.persistence.referenceDelegate.removeReference(Oe,ut.targetId,Ht)))))}catch(Oe){if(!ss(Oe))throw Oe;ot("LocalStore","Failed to update sequence numbers: "+Oe)}for(const Oe of re){const ut=Oe.targetId;if(!Oe.fromCache){const Ht=pe.os.get(ut),Qt=Ht.withLastLimboFreeSnapshotVersion(Ht.snapshotVersion);pe.os=pe.os.insert(ut,Qt)}}}),function F($,re){return b.apply(this,arguments)})(o.localStore,d))}),lu.apply(this,arguments)}function Rg(a,t){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,oe.A)(function*(a,t){const r=Ft(a);if(!r.currentUser.isEqual(t)){ot("SyncEngine","User change. New user:",t.toKey());const o=yield Zp(r.localStore,t);r.currentUser=t,(d=r).ka.forEach(b=>{b.forEach(F=>{F.reject(new xt(it.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.ka.clear(),r.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),yield Oa(r,o.hs)}var d})).apply(this,arguments)}function Af(a,t){const r=Ft(a),o=r.Na.get(t);if(o&&o.va)return Pn().add(o.key);{let u=Pn();const d=r.Ma.get(t);if(!d)return u;for(const m of d){const b=r.Fa.get(m);u=u.unionWith(b.view.Va)}return u}}function K0(a,t){return qd.apply(this,arguments)}function qd(){return(qd=(0,oe.A)(function*(a,t){const r=Ft(a),o=yield Gt(r.localStore,t.query,!0),u=t.view.ba(o);return r.isPrimaryClient&&Wd(r,t.targetId,u.wa),u})).apply(this,arguments)}function Qd(a,t){return Og.apply(this,arguments)}function Og(){return(Og=(0,oe.A)(function*(a,t){const r=Ft(a);return $n(r.localStore,t).then(o=>Oa(r,o))})).apply(this,arguments)}function z_(a,t,r,o){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,oe.A)(function*(a,t,r,o){const u=Ft(a),d=yield function(b,F){const $=Ft(b),re=Ft($.mutationQueue);return $.persistence.runTransaction("Lookup mutation documents","readonly",pe=>re.Mn(pe,F).next(Oe=>Oe?$.localDocuments.getDocuments(pe,Oe):Ne.resolve(null)))}(u.localStore,t);var F;null!==d?("pending"===r?yield hc(u.remoteStore):"acknowledged"===r||"rejected"===r?(zd(u,t,o||null),Pg(u,t),F=t,Ft(Ft(u.localStore).mutationQueue).On(F)):Rt(),yield Oa(u,d)):ot("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function Xd(){return(Xd=(0,oe.A)(function*(a,t){const r=Ft(a);if(Fg(r),Zu(r),!0===t&&!0!==r.Qa){const o=r.sharedClientState.getAllActiveQueryTargets(),u=yield xg(r,o.toArray());r.Qa=!0,yield lg(r.remoteStore,!0);for(const d of u)Bd(r.remoteStore,d)}else if(!1===t&&!1!==r.Qa){const o=[];let u=Promise.resolve();r.Ma.forEach((d,m)=>{r.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(uu(r,m),Ve(r.localStore,m,!0))),oo(r.remoteStore,m)}),yield u,yield xg(r,o),function(m){const b=Ft(m);b.Na.forEach((F,$)=>{oo(b.remoteStore,$)}),b.La.pr(),b.Na=new Map,b.Oa=new Pr(we.comparator)}(r),r.Qa=!1,yield lg(r.remoteStore,!1)}})).apply(this,arguments)}function xg(a,t,r){return kg.apply(this,arguments)}function kg(){return(kg=(0,oe.A)(function*(a,t,r){const o=Ft(a),u=[],d=[];for(const m of t){let b;const F=o.Ma.get(m);if(F&&0!==F.length){b=yield ae(o.localStore,Ki(F[0]));for(const $ of F){const re=o.Fa.get($),pe=yield K0(o,re);pe.snapshot&&d.push(pe.snapshot)}}else{const $=yield Tn(o.localStore,m);b=yield ae(o.localStore,$),yield Tg(o,W_($),m,!1,b.resumeToken)}u.push(b)}return o.Ca.d_(d),u})).apply(this,arguments)}function W_(a){return ni(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function Yd(a){return r=Ft(a).localStore,Ft(Ft(r).persistence).Qi();var r}function K_(a,t,r,o){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,oe.A)(function*(a,t,r,o){const u=Ft(a);if(u.Qa)return void ot("SyncEngine","Ignoring unexpected query state notification.");const d=u.Ma.get(t);if(d&&d.length>0)switch(r){case"current":case"not-current":{const m=yield $n(u.localStore,K(d[0])),b=rc.createSynthesizedRemoteEventForCurrentChange(t,"current"===r,Hr.EMPTY_BYTE_STRING);yield Oa(u,m,b);break}case"rejected":yield Ve(u.localStore,t,!0),uu(u,t,o);break;default:Rt()}})).apply(this,arguments)}function pE(a,t,r){return q_.apply(this,arguments)}function q_(){return(q_=(0,oe.A)(function*(a,t,r){const o=Fg(a);if(o.Qa){for(const u of t){if(o.Ma.has(u)&&o.sharedClientState.isActiveQueryTarget(u)){ot("SyncEngine","Adding an already active target "+u);continue}const d=yield Tn(o.localStore,u),m=yield ae(o.localStore,d);yield Tg(o,W_(d),m.targetId,!1,m.resumeToken),Bd(o.remoteStore,m)}for(const u of r)o.Ma.has(u)&&(yield Ve(o.localStore,u,!1).then(()=>{oo(o.remoteStore,u),uu(o,u)}).catch(Sn))}})).apply(this,arguments)}function Fg(a){const t=Ft(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=H_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Af.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=z0.bind(null,t),t.Ca.d_=oE.bind(null,t.eventManager),t.Ca.$a=k_.bind(null,t.eventManager),t}function Zu(a){const t=Ft(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hE.bind(null,t),t}class kc{constructor(){this.synchronizeTabs=!1}initialize(t){var r=this;return(0,oe.A)(function*(){r.serializer=su(t.databaseInfo.databaseId),r.sharedClientState=r.createSharedClientState(t),r.persistence=r.createPersistence(t),yield r.persistence.start(),r.localStore=r.createLocalStore(t),r.gcScheduler=r.createGarbageCollectionScheduler(t,r.localStore),r.indexBackfillerScheduler=r.createIndexBackfillerScheduler(t,r.localStore)})()}createGarbageCollectionScheduler(t,r){return null}createIndexBackfillerScheduler(t,r){return null}createLocalStore(t){return ru(this.persistence,new Jp,t.initialUser,this.serializer)}createPersistence(t){return new Nc($u.Zr,this.serializer)}createSharedClientState(t){return new qa}terminate(){var t=this;return(0,oe.A)(function*(){var r,o;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(o=t.indexBackfillerScheduler)||void 0===o||o.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class Lg extends kc{constructor(t,r,o){super(),this.Wa=t,this.cacheSizeBytes=r,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(t){var r=()=>super.initialize,o=this;return(0,oe.A)(function*(){yield r().call(o,t),yield o.Wa.initialize(o,t),yield Zu(o.Wa.syncEngine),yield hc(o.Wa.remoteStore),yield o.persistence.yi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return ru(this.persistence,new Jp,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,r){return new Nl(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,r)}createIndexBackfillerScheduler(t,r){const o=new cn(r,this.persistence);return new Vt(t.asyncQueue,o)}createPersistence(t){const r=xd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?bs.withCacheSize(this.cacheSizeBytes):bs.DEFAULT;return new Ll(this.synchronizeTabs,r,t.clientId,o,t.asyncQueue,eg(),Hl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new qa}}class Ug extends Lg{constructor(t,r){super(t,r,!1),this.Wa=t,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(t){var r=()=>super.initialize,o=this;return(0,oe.A)(function*(){yield r().call(o,t);const u=o.Wa.syncEngine;o.sharedClientState instanceof dc&&(o.sharedClientState.syncEngine={no:z_.bind(null,u),ro:K_.bind(null,u),io:pE.bind(null,u),Qi:Yd.bind(null,u),eo:Qd.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.yi(function(){var d=(0,oe.A)(function*(m){yield function fE(a,t){return Xd.apply(this,arguments)}(o.Wa.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start():m||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(m&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():m||o.indexBackfillerScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}createSharedClientState(t){const r=eg();if(!dc.D(r))throw new xt(it.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=xd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new dc(r,t.asyncQueue,o,t.clientId,t.initialUser)}}class du{initialize(t,r){var o=this;return(0,oe.A)(function*(){o.localStore||(o.localStore=t.localStore,o.sharedClientState=t.sharedClientState,o.datastore=o.createDatastore(r),o.remoteStore=o.createRemoteStore(r),o.eventManager=o.createEventManager(r),o.syncEngine=o.createSyncEngine(r,!t.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Df(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Rg.bind(null,o.syncEngine),yield lg(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(t){return new x_}createDatastore(t){const r=su(t.databaseInfo.databaseId),o=new Zv(t.databaseInfo);return new D_(t.authCredentials,t.appCheckCredentials,o,r)}createRemoteStore(t){return o=this.localStore,u=this.datastore,d=t.asyncQueue,m=r=>Df(this.syncEngine,r,0),b=C_.D()?new C_:new Ss,new A_(o,u,d,m,b);var o,u,d,m,b}createSyncEngine(t,r){return function(u,d,m,b,F,$,re){const pe=new cE(u,d,m,b,F,$);return re&&(pe.Qa=!0),pe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,oe.A)(function*(){var r,o,u;yield(u=(0,oe.A)(function*(m){const b=Ft(m);ot("RemoteStore","RemoteStore shutting down."),b.L_.add(5),yield Ud(b),b.k_.shutdown(),b.q_.set("Unknown")}),function d(m){return u.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(o=t.eventManager)||void 0===o||o.terminate()})()}}function Zd(a,t=10240){let r=0;return{read:()=>(0,oe.A)(function*(){if(r<a.byteLength){const o={value:a.slice(r,r+t),done:!1};return r+=t,o}return{done:!0}})(),cancel:()=>(0,oe.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class el{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):In("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,r){this.muted||setTimeout(()=>{this.muted||t(r)},0)}}class Q_{constructor(t,r){this.ja=t,this.serializer=r,this.metadata=new Yn,this.buffer=new Uint8Array,this.Ha=new TextDecoder("utf-8"),this.Ja().then(o=>{o&&o.ua()?this.metadata.resolve(o.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.aa)}`))},o=>this.metadata.reject(o))}close(){return this.ja.cancel()}getMetadata(){var t=this;return(0,oe.A)(function*(){return t.metadata.promise})()}Ua(){var t=this;return(0,oe.A)(function*(){return yield t.getMetadata(),t.Ja()})()}Ja(){var t=this;return(0,oe.A)(function*(){const r=yield t.Ya();if(null===r)return null;const o=t.Ha.decode(r),u=Number(o);isNaN(u)&&t.Za(`length string (${o}) is not valid number`);const d=yield t.Xa(u);return new V_(JSON.parse(d),r.length+u)})()}eu(){return this.buffer.findIndex(t=>123===t)}Ya(){var t=this;return(0,oe.A)(function*(){for(;t.eu()<0&&!(yield t.tu()););if(0===t.buffer.length)return null;const r=t.eu();r<0&&t.Za("Reached the end of bundle when a length string is expected.");const o=t.buffer.slice(0,r);return t.buffer=t.buffer.slice(r),o})()}Xa(t){var r=this;return(0,oe.A)(function*(){for(;r.buffer.length<t;)(yield r.tu())&&r.Za("Reached the end of bundle when more is expected.");const o=r.Ha.decode(r.buffer.slice(0,t));return r.buffer=r.buffer.slice(t),o})()}Za(t){throw this.ja.cancel(),new Error(`Invalid bundle format: ${t}`)}tu(){var t=this;return(0,oe.A)(function*(){const r=yield t.ja.read();if(!r.done){const o=new Uint8Array(t.buffer.length+r.value.length);o.set(t.buffer),o.set(r.value,t.buffer.length),t.buffer=o}return r.done})()}}class X_{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){var r=this;return(0,oe.A)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new xt(it.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const o=yield(u=(0,oe.A)(function*(m,b){const F=Ft(m),$={documents:b.map(ut=>Xc(F.serializer,ut))},re=yield F.Lo("BatchGetDocuments",F.serializer.databaseId,Rn.emptyPath(),$,b.length),pe=new Map;re.forEach(ut=>{const Ht=function Wp(a,t){return"found"in t?function(o,u){_t(!!u.found);const d=ya(o,u.found.name),m=Ni(u.found.updateTime),b=u.found.createTime?Ni(u.found.createTime):en.min(),F=new Yr({mapValue:{fields:u.found.fields}});return ar.newFoundDocument(d,m,b,F)}(a,t):"missing"in t?function(o,u){_t(!!u.missing),_t(!!u.readTime);const d=ya(o,u.missing),m=Ni(u.readTime);return ar.newNoDocument(d,m)}(a,t):Rt()}(F.serializer,ut);pe.set(Ht.key.toString(),Ht)});const Oe=[];return b.forEach(ut=>{const Ht=pe.get(ut.toString());_t(!!Ht),Oe.push(Ht)}),Oe}),function d(m,b){return u.apply(this,arguments)})(r.datastore,t);var u;return o.forEach(u=>r.recordVersion(u)),o})()}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(t.toString())}delete(t){this.write(new Us(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,oe.A)(function*(){if(t.ensureCommitNotCalled(),t.lastTransactionError)throw t.lastTransactionError;const r=t.readVersions;var o;t.mutations.forEach(o=>{r.delete(o.key.toString())}),r.forEach((o,u)=>{const d=we.fromPath(u);t.mutations.push(new gi(d,t.precondition(d)))}),yield(o=(0,oe.A)(function*(d,m){const b=Ft(d),F={writes:m.map($=>Ou(b.serializer,$))};yield b.Mo("Commit",b.serializer.databaseId,Rn.emptyPath(),F)}),function u(d,m){return o.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw Rt();r=en.min()}const o=this.readVersions.get(t.key.toString());if(o){if(!r.isEqual(o))throw new xt(it.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(en.min())?xn.exists(!1):xn.updateTime(r):xn.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(en.min()))throw new xt(it.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xn.updateTime(r)}return xn.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class Y_{constructor(t,r,o,u,d){this.asyncQueue=t,this.datastore=r,this.options=o,this.updateFunction=u,this.deferred=d,this.nu=o.maxAttempts,this.t_=new hf(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){var t=this;this.t_.Go((0,oe.A)(function*(){const r=new X_(t.datastore),o=t.su(r);o&&o.then(u=>{t.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{t.deferred.resolve(u)}).catch(d=>{t.ou(d)}))}).catch(u=>{t.ou(u)})}))}su(t){try{const r=this.updateFunction(t);return!ye(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ou(t){this.nu>0&&this._u(t)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(t)}_u(t){if("FirebaseError"===t.name){const r=t.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!Dc(r)}return!1}}class bf{constructor(t,r,o,u){var d=this;this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=o,this.databaseInfo=u,this.user=rn.UNAUTHENTICATED,this.clientId=Li.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,oe.A)(function*(b){ot("FirestoreClient","Received user=",b.uid),yield d.authCredentialListener(b),d.user=b});return function(b){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(ot("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xt(it.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const r=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,oe.A)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),r.resolve()}catch(o){const u=au(o,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function ql(a,t){return hu.apply(this,arguments)}function hu(){return hu=(0,oe.A)(function*(a,t){a.asyncQueue.verifyOperationInProgress(),ot("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield t.initialize(r);let o=r.initialUser;a.setCredentialChangeListener(function(){var u=(0,oe.A)(function*(d){o.isEqual(d)||(yield Zp(t.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=t}),hu.apply(this,arguments)}function Bg(a,t){return jg.apply(this,arguments)}function jg(){return(jg=(0,oe.A)(function*(a,t){a.asyncQueue.verifyOperationInProgress();const r=yield Ql(a);ot("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(r,a.configuration),a.setCredentialChangeListener(o=>N_(t.remoteStore,o)),a.setAppCheckTokenChangeListener((o,u)=>N_(t.remoteStore,u)),a._onlineComponents=t})).apply(this,arguments)}function mE(a){return"FirebaseError"===a.name?a.code===it.FAILED_PRECONDITION||a.code===it.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code}function Ql(a){return eh.apply(this,arguments)}function eh(){return(eh=(0,oe.A)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){ot("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ql(a,a._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!mE(r))throw r;Kn("Error using user provided cache. Falling back to memory cache: "+r),yield ql(a,new kc)}}else ot("FirestoreClient","Using default OfflineComponentProvider"),yield ql(a,new kc);return a._offlineComponents})).apply(this,arguments)}function th(a){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,oe.A)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(ot("FirestoreClient","Using user provided OnlineComponentProvider"),yield Bg(a,a._uninitializedComponentsProvider._online)):(ot("FirestoreClient","Using default OnlineComponentProvider"),yield Bg(a,new du))),a._onlineComponents})).apply(this,arguments)}function $g(a){return Ql(a).then(t=>t.persistence)}function tl(a){return Ql(a).then(t=>t.localStore)}function J_(a){return th(a).then(t=>t.remoteStore)}function Hg(a){return th(a).then(t=>t.syncEngine)}function Xl(a){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,oe.A)(function*(a){const t=yield th(a),r=t.eventManager;return r.onListen=uE.bind(null,t.syncEngine),r.onUnlisten=lE.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=B_.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Dg.bind(null,t.syncEngine),r})).apply(this,arguments)}function yE(a,t,r={}){const o=new Yn;return a.asyncQueue.enqueueAndForget((0,oe.A)(function*(){return function(d,m,b,F,$){const re=new el({next:Oe=>{m.enqueueAndForget(()=>fg(d,pe));const ut=Oe.docs.has(b);!ut&&Oe.fromCache?$.reject(new xt(it.UNAVAILABLE,"Failed to get document because the client is offline.")):ut&&Oe.fromCache&&F&&"server"===F.source?$.reject(new xt(it.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):$.resolve(Oe)},error:Oe=>$.reject(Oe)}),pe=new mg(Ri(b.path),re,{includeMetadataChanges:!0,_a:!0});return hg(d,pe)}(yield Xl(a),a.asyncQueue,t,r,o)})),o.promise}function vE(a,t,r={}){const o=new Yn;return a.asyncQueue.enqueueAndForget((0,oe.A)(function*(){return function(d,m,b,F,$){const re=new el({next:Oe=>{m.enqueueAndForget(()=>fg(d,pe)),Oe.fromCache&&"server"===F.source?$.reject(new xt(it.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):$.resolve(Oe)},error:Oe=>$.reject(Oe)}),pe=new mg(b,re,{includeMetadataChanges:!0,_a:!0});return hg(d,pe)}(yield Xl(a),a.asyncQueue,t,r,o)})),o.promise}function Pf(a){const t={};return void 0!==a.timeoutSeconds&&(t.timeoutSeconds=a.timeoutSeconds),t}const fc=new Map;function nl(a,t,r){if(!r)throw new xt(it.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function zg(a,t,r,o){if(!0===t&&!0===o)throw new xt(it.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function Wg(a){if(!we.isDocumentKey(a))throw new xt(it.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Kg(a){if(we.isDocumentKey(a))throw new xt(it.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function qg(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const t=(o=a).constructor?o.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var o;return"function"==typeof a?"a function":Rt()}function Ur(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new xt(it.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=qg(a);throw new xt(it.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return a}function TE(a,t){if(t<=0)throw new xt(it.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${t}.`)}class Mf{constructor(t){var r,o;if(void 0===t.host){if(void 0!==t.ssl)throw new xt(it.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(r=t.ssl)||void 0===r||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new xt(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Pf(null!==(o=t.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new xt(it.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new xt(it.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new xt(it.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rl{constructor(t,r,o,u){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xt(it.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new xt(it.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mf(t),void 0!==t.credentials&&(this._authCredentials=function(o){if(!o)return new An;switch(o.type){case"firstParty":return new jr(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new xt(it.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const o=fc.get(r);o&&(ot("ComponentProvider","Removing Datastore"),fc.delete(r),o.terminate())}(this),Promise.resolve()}}class Ro{constructor(t,r,o){this.converter=r,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new Ro(this.firestore,t,this._query)}}class Xi{constructor(t,r,o){this.converter=r,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Xi(this.firestore,t,this._key)}}class pc extends Ro{constructor(t,r,o){super(t,r,Ri(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Xi(this.firestore,null,new we(t))}withConverter(t){return new pc(this.firestore,t,this._path)}}function ty(a,t,...r){if(a=(0,ie.Ku)(a),nl("collection","path",t),a instanceof rl){const o=Rn.fromString(t,...r);return Kg(o),new pc(a,null,o)}{if(!(a instanceof Xi||a instanceof pc))throw new xt(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Rn.fromString(t,...r));return Kg(o),new pc(a.firestore,null,o)}}function Rf(a,t,...r){if(a=(0,ie.Ku)(a),1===arguments.length&&(t=Li.newId()),nl("doc","path",t),a instanceof rl){const o=Rn.fromString(t,...r);return Wg(o),new Xi(a,null,new we(o))}{if(!(a instanceof Xi||a instanceof pc))throw new xt(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Rn.fromString(t,...r));return Wg(o),new Xi(a.firestore,a instanceof pc?a.converter:null,new we(o))}}function ny(a,t){return a=(0,ie.Ku)(a),t=(0,ie.Ku)(t),(a instanceof Xi||a instanceof pc)&&(t instanceof Xi||t instanceof pc)&&a.firestore===t.firestore&&a.path===t.path&&a.converter===t.converter}function Of(a,t){return a=(0,ie.Ku)(a),t=(0,ie.Ku)(t),a instanceof Ro&&t instanceof Ro&&a.firestore===t.firestore&&Y(a._query,t._query)&&a.converter===t.converter}class ry{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new hf(this,"async_queue_retry"),this.Eu=()=>{const r=Hl();r&&ot("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()};const t=Hl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;const r=Hl();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise(()=>{});const r=new Yn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.uu.push(t),this.Ru()))}Ru(){var t=this;return(0,oe.A)(function*(){if(0!==t.uu.length){try{yield t.uu[0](),t.uu.shift(),t.t_.reset()}catch(r){if(!ss(r))throw r;ot("AsyncQueue","Operation failed with retryable error: "+r)}t.uu.length>0&&t.t_.Go(()=>t.Ru())}})()}Au(t){const r=this.au.then(()=>(this.Pu=!0,t().catch(o=>{throw this.hu=o,this.Pu=!1,In("INTERNAL UNHANDLED ERROR: ",function(m){let b=m.message||"";return m.stack&&(b=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),b}(o)),o}).then(o=>(this.Pu=!1,o))));return this.au=r,r}enqueueAfterDelay(t,r,o){this.du(),this.Tu.indexOf(t)>-1&&(r=0);const u=Mo.createAndSchedule(this,t,r,o,d=>this.Vu(d));return this.lu.push(u),u}du(){this.hu&&Rt()}verifyOperationInProgress(){}mu(){var t=this;return(0,oe.A)(function*(){let r;do{r=t.au,yield r}while(r!==t.au)})()}fu(t){for(const r of this.lu)if(r.timerId===t)return!0;return!1}gu(t){return this.mu().then(()=>{this.lu.sort((r,o)=>r.targetTimeMs-o.targetTimeMs);for(const r of this.lu)if(r.skipDelay(),"all"!==t&&r.timerId===t)break;return this.mu()})}pu(t){this.Tu.push(t)}Vu(t){const r=this.lu.indexOf(t);this.lu.splice(r,1)}}function Qg(a){return function(r,o){if("object"!=typeof r||null===r)return!1;const u=r;for(const d of["next","error","complete"])if(d in u&&"function"==typeof u[d])return!0;return!1}(a)}class bE{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,r,o){this._progressObserver={next:t,error:r,complete:o}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,r){return this._taskCompletionResolver.promise.then(t,r)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class _i extends rl{constructor(t,r,o,u){super(t,r,o,u),this.type="firestore",this._queue=new ry,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||il(this),this._firestoreClient.terminate()}}function us(a){return a._firestoreClient||il(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function il(a){var t,r,o;const u=a._freezeSettings(),d=(F=(null===(t=a._app)||void 0===t?void 0:t.options.appId)||"",new Ys(a._databaseId,F,a._persistenceKey,(re=u).host,re.ssl,re.experimentalForceLongPolling,re.experimentalAutoDetectLongPolling,Pf(re.experimentalLongPollingOptions),re.useFetchStreams));var F,re;a._firestoreClient=new bf(a._authCredentials,a._appCheckCredentials,a._queue,d),null!==(r=u.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(a._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Nf(a,t,r){const o=new Yn;return a.asyncQueue.enqueue((0,oe.A)(function*(){try{yield ql(a,r),yield Bg(a,t),o.resolve()}catch(u){const d=u;if(!mE(d))throw d;Kn("Error enabling indexeddb cache. Falling back to memory cache: "+d),o.reject(d)}})).then(()=>o.promise)}function NE(a){if(a._initialized||a._terminated)throw new xt(it.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gc(Hr.fromBase64String(t))}catch(r){throw new xt(it.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new gc(Hr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Vc{constructor(...t){for(let r=0;r<t.length;++r)if(0===t[r].length)throw new xt(it.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ke(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class sl{constructor(t){this._methodName=t}}class xf{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new xt(it.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new xt(it.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return zt(this._lat,t._lat)||zt(this._long,t._long)}}class kf{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(o,u){if(o.length!==u.length)return!1;for(let d=0;d<o.length;++d)if(o[d]!==u[d])return!1;return!0}(this._values,t._values)}}const FE=/^__.*__$/;class VE{constructor(t,r,o){this.data=t,this.fieldMask=r,this.fieldTransforms=o}toMutation(t,r){return null!==this.fieldMask?new _r(t,this.data,this.fieldMask,r,this.fieldTransforms):new vn(t,this.data,r,this.fieldTransforms)}}class cy{constructor(t,r,o){this.data=t,this.fieldMask=r,this.fieldTransforms=o}toMutation(t,r){return new _r(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Ff(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Rt()}}class Xg{constructor(t,r,o,u,d,m){this.settings=t,this.databaseId=r,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===d&&this.yu(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new Xg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(t),u=this.Su({path:o,Du:!1});return u.vu(t),u}Cu(t){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(t),u=this.Su({path:o,Du:!1});return u.yu(),u}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return ih(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return void 0!==this.fieldMask.find(r=>t.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>t.isPrefixOf(r.field))}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(0===t.length)throw this.Mu("Document fields must not be empty");if(Ff(this.wu)&&FE.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}}class eC{constructor(t,r,o){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=o||su(t)}Nu(t,r,o,u=!1){return new Xg({wu:t,methodName:r,Ou:o,path:ke.emptyPath(),Du:!1,xu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lc(a){const t=a._freezeSettings(),r=su(a._databaseId);return new eC(a._databaseId,!!t.ignoreUndefinedProperties,r)}function Yg(a,t,r,o,u,d={}){const m=a.Nu(d.merge||d.mergeFields?2:0,t,r,u);Lf("Data must be an object, but it was:",m,o);const b=dy(o,m);let F,$;if(d.merge)F=new Xr(m.fieldMask),$=m.fieldTransforms;else if(d.mergeFields){const re=[];for(const pe of d.mergeFields){const Oe=mc(t,pe,r);if(!m.contains(Oe))throw new xt(it.INVALID_ARGUMENT,`Field '${Oe}' is specified in your field mask but missing from your input data.`);UE(re,Oe)||re.push(Oe)}F=new Xr(re),$=m.fieldTransforms.filter(pe=>F.covers(pe.field))}else F=null,$=m.fieldTransforms;return new VE(new Yr(b),F,$)}class Vf extends sl{_toFieldTransform(t){if(2!==t.wu)throw t.Mu(1===t.wu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Vf}}function LE(a,t,r){return new Xg({wu:3,Ou:t.settings.Ou,methodName:a._methodName,Du:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class uy extends sl{_toFieldTransform(t){return new Ot(t.path,new qi)}isEqual(t){return t instanceof uy}}class ly extends sl{constructor(t,r){super(t),this.Lu=r}_toFieldTransform(t){const r=LE(this,t,!0),o=this.Lu.map(d=>pu(d,r)),u=new Os(o);return new Ot(t.path,u)}isEqual(t){return t instanceof ly&&(0,ie.bD)(this.Lu,t.Lu)}}class Jg extends sl{constructor(t,r){super(t),this.Lu=r}_toFieldTransform(t){const r=LE(this,t,!0),o=this.Lu.map(d=>pu(d,r)),u=new X(o);return new Ot(t.path,u)}isEqual(t){return t instanceof Jg&&(0,ie.bD)(this.Lu,t.Lu)}}class Yl extends sl{constructor(t,r){super(t),this.Bu=r}_toFieldTransform(t){const r=new B(t.serializer,as(t.serializer,this.Bu));return new Ot(t.path,r)}isEqual(t){return t instanceof Yl&&this.Bu===t.Bu}}function Jl(a,t,r,o){const u=a.Nu(1,t,r);Lf("Data must be an object, but it was:",u,o);const d=[],m=Yr.empty();Qs(o,(F,$)=>{const re=aa(t,F,r);$=(0,ie.Ku)($);const pe=u.Cu(re);if($ instanceof Vf)d.push(re);else{const Oe=pu($,pe);null!=Oe&&(d.push(re),m.set(re,Oe))}});const b=new Xr(d);return new cy(m,b,u.fieldTransforms)}function rh(a,t,r,o,u,d){const m=a.Nu(1,t,r),b=[mc(t,o,r)],F=[u];if(d.length%2!=0)throw new xt(it.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Oe=0;Oe<d.length;Oe+=2)b.push(mc(t,d[Oe])),F.push(d[Oe+1]);const $=[],re=Yr.empty();for(let Oe=b.length-1;Oe>=0;--Oe)if(!UE($,b[Oe])){const ut=b[Oe];let Ht=F[Oe];Ht=(0,ie.Ku)(Ht);const nn=m.Cu(ut);if(Ht instanceof Vf)$.push(ut);else{const Qt=pu(Ht,nn);null!=Qt&&($.push(ut),re.set(ut,Qt))}}const pe=new Xr($);return new cy(re,pe,m.fieldTransforms)}function Zg(a,t,r,o=!1){return pu(r,a.Nu(o?4:3,t))}function pu(a,t){if(hy(a=(0,ie.Ku)(a)))return Lf("Unsupported field value:",t,a),dy(a,t);if(a instanceof sl)return function(o,u){if(!Ff(u.wu))throw u.Mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Mu(`${o._methodName}() is not currently supported inside arrays`);const d=o._toFieldTransform(u);d&&u.fieldTransforms.push(d)}(a,t),null;if(void 0===a&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.Du&&4!==t.wu)throw t.Mu("Nested arrays are not supported");return function(o,u){const d=[];let m=0;for(const b of o){let F=pu(b,u.Fu(m));null==F&&(F={nullValue:"NULL_VALUE"}),d.push(F),m++}return{arrayValue:{values:d}}}(a,t)}return function(o,u){if(null===(o=(0,ie.Ku)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return as(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const d=Zt.fromDate(o);return{timestampValue:ic(u.serializer,d)}}if(o instanceof Zt){const d=new Zt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:ic(u.serializer,d)}}if(o instanceof xf)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof gc)return{bytesValue:Qc(u.serializer,o._byteString)};if(o instanceof Xi){const d=u.databaseId,m=o.firestore._databaseId;if(!m.isEqual(d))throw u.Mu(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Mu(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof kf)return b=u,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(F=>{if("number"!=typeof F)throw b.Mu("VectorValues must only contain numeric values.");return bo(b.serializer,F)})}}}}};var b;throw u.Mu(`Unsupported field value: ${qg(o)}`)}(a,t)}function dy(a,t){const r={};return Rs(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qs(a,(o,u)=>{const d=pu(u,t.bu(o));null!=d&&(r[o]=d)}),{mapValue:{fields:r}}}function hy(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof Zt||a instanceof xf||a instanceof gc||a instanceof Xi||a instanceof sl||a instanceof kf)}function Lf(a,t,r){if(!hy(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=qg(r);throw t.Mu("an object"===o?a+" a custom object":a+" "+o)}var u}function mc(a,t,r){if((t=(0,ie.Ku)(t))instanceof Vc)return t._internalPath;if("string"==typeof t)return aa(a,t);throw ih("Field path arguments must be of type string or ",a,!1,void 0,r)}const Ea=new RegExp("[~\\*/\\[\\]]");function aa(a,t,r){if(t.search(Ea)>=0)throw ih(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new Vc(...t.split("."))._internalPath}catch{throw ih(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function ih(a,t,r,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let b=`Function ${t}() called with invalid data`;r&&(b+=" (via `toFirestore()`)"),b+=". ";let F="";return(d||m)&&(F+=" (found",d&&(F+=` in field ${o}`),m&&(F+=` in document ${u}`),F+=")"),new xt(it.INVALID_ARGUMENT,b+a+F)}function UE(a,t){return a.some(r=>r.isEqual(t))}class sh{constructor(t,r,o,u,d){this._firestore=t,this._userDataWriter=r,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Xi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new tC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(em("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r)}}}class tC extends sh{data(){return super.data()}}function em(a,t){return"string"==typeof t?aa(a,t):t instanceof Vc?t._internalPath:t._delegate._internalPath}function tm(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new xt(it.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class Bf extends Uf{}function Xa(a,t,...r){let o=[];t instanceof Uf&&o.push(t),o=o.concat(r),function(d){const m=d.filter(F=>F instanceof Zl).length,b=d.filter(F=>F instanceof ol).length;if(m>1||m>0&&b>0)throw new xt(it.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)a=u._apply(a);return a}class ol extends Bf{constructor(t,r,o){super(),this._field=t,this._op=r,this._value=o,this.type="where"}static _create(t,r,o){return new ol(t,r,o)}_apply(t){const r=this._parse(t);return my(t._query,r),new Ro(t.firestore,t.converter,Do(t._query,r))}_parse(t){const r=Lc(t.firestore);return function(d,m,b,F,$,re,pe){let Oe;if($.isKeyField()){if("array-contains"===re||"array-contains-any"===re)throw new xt(it.INVALID_ARGUMENT,`Invalid Query. You can't perform '${re}' queries on documentId().`);if("in"===re||"not-in"===re){gy(pe,re);const ut=[];for(const Ht of pe)ut.push(Hf(F,d,Ht));Oe={arrayValue:{values:ut}}}else Oe=Hf(F,d,pe)}else"in"!==re&&"not-in"!==re&&"array-contains-any"!==re||gy(pe,re),Oe=Zg(b,"where",pe,"in"===re||"not-in"===re);return x.create($,re,Oe)}(t._query,0,r,t.firestore._databaseId,this._field,this._op,this._value)}}class Zl extends Uf{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Zl(t,r)}_parse(t){const r=this._queryConstraints.map(o=>o._parse(t)).filter(o=>o.getFilters().length>0);return 1===r.length?r[0]:Z.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return 0===r.getFilters().length?t:(function(u,d){let m=u;const b=d.getFlattenedFilters();for(const F of b)my(m,F),m=Do(m,F)}(t._query,r),new Ro(t.firestore,t.converter,Do(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class jf extends Bf{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new jf(t,r)}_apply(t){const r=function(u,d,m){if(null!==u.startAt)throw new xt(it.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new xt(it.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xi(d,m)}(t._query,this._field,this._direction);return new Ro(t.firestore,t.converter,function(u,d){const m=u.explicitOrderBy.concat([d]);return new Gr(u.path,u.collectionGroup,m,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(t._query,r))}}class al extends Bf{constructor(t,r,o){super(),this.type=t,this._limit=r,this._limitType=o}static _create(t,r,o){return new al(t,r,o)}_apply(t){return new Ro(t.firestore,t.converter,Ao(t._query,this._limit,this._limitType))}}class ah extends Bf{constructor(t,r,o){super(),this.type=t,this._docOrFields=r,this._inclusive=o}static _create(t,r,o){return new ah(t,r,o)}_apply(t){const r=uh(t,this.type,this._docOrFields,this._inclusive);return new Ro(t.firestore,t.converter,(d=r,new Gr((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,d,u.endAt)));var u,d}}class $f extends Bf{constructor(t,r,o){super(),this.type=t,this._docOrFields=r,this._inclusive=o}static _create(t,r,o){return new $f(t,r,o)}_apply(t){const r=uh(t,this.type,this._docOrFields,this._inclusive);return new Ro(t.firestore,t.converter,(d=r,new Gr((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,d)));var u,d}}function uh(a,t,r,o){if(r[0]=(0,ie.Ku)(r[0]),r[0]instanceof sh)return function(d,m,b,F,$){if(!F)throw new xt(it.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${b}().`);const re=[];for(const pe of vs(d))if(pe.field.isKeyField())re.push($i(m,F.key));else{const Oe=F.data.field(pe.field);if(ps(Oe))throw new xt(it.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+pe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Oe){const ut=pe.field.canonicalString();throw new xt(it.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ut}' (used as the orderBy) does not exist.`)}re.push(Oe)}return new ds(re,$)}(a._query,a.firestore._databaseId,t,r[0]._document,o);{const u=Lc(a.firestore);return function(m,b,F,$,re,pe){const Oe=m.explicitOrderBy;if(re.length>Oe.length)throw new xt(it.INVALID_ARGUMENT,`Too many arguments provided to ${$}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ut=[];for(let Ht=0;Ht<re.length;Ht++){const nn=re[Ht];if(Oe[Ht].field.isKeyField()){if("string"!=typeof nn)throw new xt(it.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${$}(), but got a ${typeof nn}`);if(!ma(m)&&-1!==nn.indexOf("/"))throw new xt(it.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${$}() must be a plain document ID, but '${nn}' contains a slash.`);const Qt=m.path.child(Rn.fromString(nn));if(!we.isDocumentKey(Qt))throw new xt(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${$}() must result in a valid document path, but '${Qt}' is not because it contains an odd number of segments.`);const Vn=new we(Qt);ut.push($i(b,Vn))}else{const Qt=Zg(F,$,nn);ut.push(Qt)}}return new ds(ut,pe)}(a._query,a.firestore._databaseId,u,t,r,o)}}function Hf(a,t,r){if("string"==typeof(r=(0,ie.Ku)(r))){if(""===r)throw new xt(it.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ma(t)&&-1!==r.indexOf("/"))throw new xt(it.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const o=t.path.child(Rn.fromString(r));if(!we.isDocumentKey(o))throw new xt(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return $i(a,new we(o))}if(r instanceof Xi)return $i(a,r._key);throw new xt(it.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qg(r)}.`)}function gy(a,t){if(!Array.isArray(a)||0===a.length)throw new xt(it.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function my(a,t){const r=function(u,d){for(const m of u)for(const b of m.getFlattenedFilters())if(d.indexOf(b.op)>=0)return b.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw new xt(it.INVALID_ARGUMENT,r===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class zf{convertValue(t,r="none"){switch(Bi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return dn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(si(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Rt()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const o={};return Qs(t,(u,d)=>{o[u]=this.convertValue(d,r)}),o}convertVectorValue(t){var r,o,u;const d=null===(u=null===(o=null===(r=t.fields)||void 0===r?void 0:r.value.arrayValue)||void 0===o?void 0:o.values)||void 0===u?void 0:u.map(m=>dn(m.doubleValue));return new kf(d)}convertGeoPoint(t){return new xf(dn(t.latitude),dn(t.longitude))}convertArray(t,r){return(t.values||[]).map(o=>this.convertValue(o,r))}convertServerTimestamp(t,r){switch(r){case"previous":const o=xs(t);return null==o?null:this.convertValue(o,r);case"estimate":return this.convertTimestamp(gs(t));default:return null}}convertTimestamp(t){const r=os(t);return new Zt(r.seconds,r.nanos)}convertDocumentKey(t,r){const o=Rn.fromString(t);_t(ra(o));const u=new Pi(o.get(1),o.get(3)),d=new we(o.popFirst(5));return u.isEqual(r)||In(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),d}}function _c(a,t,r){let o;return o=a?r&&(r.merge||r.mergeFields)?a.toFirestore(t,r):a.toFirestore(t):t,o}class _y extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new gc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Xi(this.firestore,null,r)}}class gu{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class yc extends sh{constructor(t,r,o,u,d,m){super(t,r,o,u,m),this._firestore=t,this._firestoreImpl=t,this.metadata=d}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const o=this._document.data.field(em("DocumentSnapshot.get",t));if(null!==o)return this._userDataWriter.convertValue(o,r.serverTimestamps)}}}class ed extends yc{data(t={}){return super.data(t)}}class vc{constructor(t,r,o,u){this._firestore=t,this._userDataWriter=r,this._snapshot=u,this.metadata=new gu(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,r){this._snapshot.docs.forEach(o=>{t.call(r,new ed(this._firestore,this._userDataWriter,o.key,o,new gu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new xt(it.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,d){if(u._snapshot.oldDocs.isEmpty()){let m=0;return u._snapshot.docChanges.map(b=>({type:"added",doc:new ed(u._firestore,u._userDataWriter,b.doc.key,b.doc,new gu(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:m++}))}{let m=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(b=>d||3!==b.type).map(b=>{const F=new ed(u._firestore,u._userDataWriter,b.doc.key,b.doc,new gu(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter);let $=-1,re=-1;return 0!==b.type&&($=m.indexOf(b.doc.key),m=m.delete(b.doc.key)),1!==b.type&&(m=m.add(b.doc),re=m.indexOf(b.doc.key)),{type:yy(b.type),doc:F,oldIndex:$,newIndex:re}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function yy(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Rt()}}function lh(a,t){return a instanceof yc&&t instanceof yc?a._firestore===t._firestore&&a._key.isEqual(t._key)&&(null===a._document?null===t._document:a._document.isEqual(t._document))&&a._converter===t._converter:a instanceof vc&&t instanceof vc&&a._firestore===t._firestore&&Of(a.query,t.query)&&a.metadata.isEqual(t.metadata)&&a._snapshot.isEqual(t._snapshot)}class Uc extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new gc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Xi(this.firestore,null,r)}}function Ey(a,t,r){a=Ur(a,Xi);const o=Ur(a.firestore,_i),u=_c(a.converter,t,r);return cl(o,[Yg(Lc(o),"setDoc",a._key,u,null!==a.converter,r).toMutation(a._key,xn.none())])}function am(a,t,r,...o){a=Ur(a,Xi);const u=Ur(a.firestore,_i),d=Lc(u);let m;return m="string"==typeof(t=(0,ie.Ku)(t))||t instanceof Vc?rh(d,"updateDoc",a._key,t,r,o):Jl(d,"updateDoc",a._key,t),cl(u,[m.toMutation(a._key,xn.exists(!0))])}function Iy(a,...t){var r,o,u;a=(0,ie.Ku)(a);let d={includeMetadataChanges:!1,source:"default"},m=0;"object"!=typeof t[m]||Qg(t[m])||(d=t[m],m++);const b={includeMetadataChanges:d.includeMetadataChanges,source:d.source};if(Qg(t[m])){const pe=t[m];t[m]=null===(r=pe.next)||void 0===r?void 0:r.bind(pe),t[m+1]=null===(o=pe.error)||void 0===o?void 0:o.bind(pe),t[m+2]=null===(u=pe.complete)||void 0===u?void 0:u.bind(pe)}let F,$,re;if(a instanceof Xi)$=Ur(a.firestore,_i),re=Ri(a._key.path),F={next:pe=>{t[m]&&t[m](vr($,a,pe))},error:t[m+1],complete:t[m+2]};else{const pe=Ur(a,Ro);$=Ur(pe.firestore,_i),re=pe._query;const Oe=new Uc($);F={next:ut=>{t[m]&&t[m](new vc($,Oe,pe,ut))},error:t[m+1],complete:t[m+2]},tm(a._query)}return function(Oe,ut,Ht,nn){const Qt=new el(nn),Vn=new mg(ut,Qt,Ht);return Oe.asyncQueue.enqueueAndForget((0,oe.A)(function*(){return hg(yield Xl(Oe),Vn)})),()=>{Qt.za(),Oe.asyncQueue.enqueueAndForget((0,oe.A)(function*(){return fg(yield Xl(Oe),Vn)}))}}(us($),re,b,F)}function cl(a,t){return function(o,u){const d=new Yn;return o.asyncQueue.enqueueAndForget((0,oe.A)(function*(){return function cu(a,t,r){return wf.apply(this,arguments)}(yield Hg(o),u,d)})),d.promise}(us(a),t)}function vr(a,t,r){const o=r.docs.get(t._key),u=new Uc(a);return new yc(a,u,t._key,o,new gu(r.hasPendingWrites,r.fromCache),t.converter)}const Py={maxAttempts:5};class qf{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Lc(t)}set(t,r,o){this._verifyNotCommitted();const u=mu(t,this._firestore),d=_c(u.converter,r,o),m=Yg(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,xn.none())),this}update(t,r,o,...u){this._verifyNotCommitted();const d=mu(t,this._firestore);let m;return m="string"==typeof(r=(0,ie.Ku)(r))||r instanceof Vc?rh(this._dataReader,"WriteBatch.update",d._key,r,o,u):Jl(this._dataReader,"WriteBatch.update",d._key,r),this._mutations.push(m.toMutation(d._key,xn.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=mu(t,this._firestore);return this._mutations=this._mutations.concat(new Us(r._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xt(it.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mu(a,t){if((a=(0,ie.Ku)(a)).firestore!==t)throw new xt(it.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class QE extends class{constructor(r,o){this._firestore=r,this._transaction=o,this._dataReader=Lc(r)}get(r){const o=mu(r,this._firestore),u=new _y(this._firestore);return this._transaction.lookup([o._key]).then(d=>{if(!d||1!==d.length)return Rt();const m=d[0];if(m.isFoundDocument())return new sh(this._firestore,u,m.key,m,o.converter);if(m.isNoDocument())return new sh(this._firestore,u,o._key,null,o.converter);throw Rt()})}set(r,o,u){const d=mu(r,this._firestore),m=_c(d.converter,o,u),b=Yg(this._dataReader,"Transaction.set",d._key,m,null!==d.converter,u);return this._transaction.set(d._key,b),this}update(r,o,u,...d){const m=mu(r,this._firestore);let b;return b="string"==typeof(o=(0,ie.Ku)(o))||o instanceof Vc?rh(this._dataReader,"Transaction.update",m._key,o,u,d):Jl(this._dataReader,"Transaction.update",m._key,o),this._transaction.update(m._key,b),this}delete(r){const o=mu(r,this._firestore);return this._transaction.delete(o._key),this}}{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=mu(t,this._firestore),o=new Uc(this._firestore);return super.get(t).then(u=>new yc(this._firestore,o,r._key,u._document,new gu(!1,!1),r.converter))}}function pm(a,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new xt("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return t}function xy(){if(typeof Uint8Array>"u")throw new xt("unimplemented","Uint8Arrays are not available in this environment.")}function ky(){if(!function hi(){return typeof atob<"u"}())throw new xt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,r=!0){on=Ye.SDK_VERSION,(0,Ye._registerComponent)(new Je.uA("firestore",(o,{instanceIdentifier:u,options:d})=>{const m=o.getProvider("app").getImmediate(),b=new _i(new kr(o.getProvider("auth-internal")),new Or(o.getProvider("app-check-internal")),function($,re){if(!Object.prototype.hasOwnProperty.apply($.options,["projectId"]))throw new xt(it.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pi($.options.projectId,re)}(m,u),m);return d=Object.assign({useFetchStreams:r},d),b._setSettings(d),b},"PUBLIC").setMultipleInstances(!0)),(0,Ye.registerVersion)(gn,"4.7.1",t),(0,Ye.registerVersion)(gn,"4.7.1","esm2017")}();class ph{constructor(t){this._delegate=t}static fromBase64String(t){return ky(),new ph(gc.fromBase64String(t))}static fromUint8Array(t){return xy(),new ph(gc.fromUint8Array(t))}toBase64(){return ky(),this._delegate.toBase64()}toUint8Array(){return xy(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Na(a){return function gm(a,t){if("object"!=typeof a||null===a)return!1;const r=a;for(const o of t)if(o in r&&"function"==typeof r[o])return!0;return!1}(a,["next","error","complete"])}class sI{enableIndexedDbPersistence(t,r){return function SE(a,t){NE(a=Ur(a,_i));const r=us(a);if(r._uninitializedComponentsProvider)throw new xt(it.FAILED_PRECONDITION,"SDK cache is already specified.");Kn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=a._freezeSettings(),u=new du;return Nf(r,u,new Lg(u,o.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(t){return function PE(a){NE(a=Ur(a,_i));const t=us(a);if(t._uninitializedComponentsProvider)throw new xt(it.FAILED_PRECONDITION,"SDK cache is already specified.");Kn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings(),o=new du;return Nf(t,o,new Ug(o,r.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function oy(a){if(a._initialized&&!a._terminated)throw new xt(it.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Yn;return a._queue.enqueueAndForgetEvenWhileRestricted((0,oe.A)(function*(){try{yield(r=(0,oe.A)(function*(u){if(!Qr.D())return Promise.resolve();const d=u+"main";yield Qr.delete(d)}),function o(u){return r.apply(this,arguments)})(xd(a._databaseId,a._persistenceKey)),t.resolve()}catch(r){t.reject(r)}var r})),t.promise}(t._delegate)}}class Fy{constructor(t,r,o){this._delegate=r,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},t instanceof Pi||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const r=this._delegate._getSettings();!t.merge&&r.host!==t.host&&Kn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},r),t)).merge,this._delegate._setSettings(t)}useEmulator(t,r,o={}){!function DE(a,t,r,o={}){var u;const d=(a=Ur(a,rl))._getSettings(),m=`${t}:${r}`;if("firestore.googleapis.com"!==d.host&&d.host!==m&&Kn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},d),{host:m,ssl:!1})),o.mockUserToken){let b,F;if("string"==typeof o.mockUserToken)b=o.mockUserToken,F=rn.MOCK_USER;else{b=(0,ie.Fy)(o.mockUserToken,null===(u=a._app)||void 0===u?void 0:u.options.projectId);const $=o.mockUserToken.sub||o.mockUserToken.user_id;if(!$)throw new xt(it.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");F=new rn($)}a._authCredentials=new bn(new tr(b,F))}}(this._delegate,t,r,o)}enableNetwork(){return function RE(a){return function fu(a){return a.asyncQueue.enqueue((0,oe.A)(function*(){const t=yield $g(a),r=yield J_(a);return t.setNetworkEnabled(!0),function(u){const d=Ft(u);return d.L_.delete(0),Ld(d)}(r)}))}(us(a=Ur(a,_i)))}(this._delegate)}disableNetwork(){return function OE(a){return function nh(a){return a.asyncQueue.enqueue((0,oe.A)(function*(){const t=yield $g(a),r=yield J_(a);return t.setNetworkEnabled(!1),(o=(0,oe.A)(function*(d){const m=Ft(d);m.L_.add(0),yield Ud(m),m.q_.set("Offline")}),function u(d){return o.apply(this,arguments)})(r);var o}))}(us(a=Ur(a,_i)))}(this._delegate)}enablePersistence(t){let r=!1,o=!1;return t&&(r=!!t.synchronizeTabs,o=!!t.experimentalForceOwningTab,zg("synchronizeTabs",r,"experimentalForceOwningTab",o)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ME(a){return function(r){const o=new Yn;return r.asyncQueue.enqueueAndForget((0,oe.A)(function*(){return function W0(a,t){return Kl.apply(this,arguments)}(yield Hg(r),o)})),o.promise}(us(a=Ur(a,_i)))}(this._delegate)}onSnapshotsInSync(t){return function Cy(a,t){return function X0(a,t){const r=new el(t);return a.asyncQueue.enqueueAndForget((0,oe.A)(function*(){return u=yield Xl(a),d=r,Ft(u).Y_.add(d),void d.next();var u,d})),()=>{r.za(),a.asyncQueue.enqueueAndForget((0,oe.A)(function*(){return u=yield Xl(a),d=r,void Ft(u).Y_.delete(d);var u,d}))}}(us(a=Ur(a,_i)),Qg(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new xt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new rd(this,ty(this._delegate,t))}catch(r){throw Oo(r,"collection()","Firestore.collection()")}}doc(t){try{return new Ia(this,Rf(this._delegate,t))}catch(r){throw Oo(r,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new qo(this,function AE(a,t){if(a=Ur(a,rl),nl("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new xt(it.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ro(a,null,(o=t,new Gr(Rn.emptyPath(),o)));var o}(this._delegate,t))}catch(r){throw Oo(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function XE(a,t,r){a=Ur(a,_i);const o=Object.assign(Object.assign({},Py),r);return function(d){if(d.maxAttempts<1)throw new xt(it.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(d,m,b){const F=new Yn;return d.asyncQueue.enqueueAndForget((0,oe.A)(function*(){const $=yield function Z_(a){return th(a).then(t=>t.datastore)}(d);new Y_(d.asyncQueue,$,b,m,F).ru()})),F.promise}(us(a),u=>t(new QE(a,u)),o)}(this._delegate,r=>t(new mh(this,r)))}batch(){return us(this._delegate),new Xf(new qf(this._delegate,t=>cl(this._delegate,t)))}loadBundle(t){return function ay(a,t){const r=us(a=Ur(a,_i)),o=new bE;return function ey(a,t,r,o){const u=function(m,b){let F;return F="string"==typeof m?_a().encode(m):m,re=function(re,pe){if(re instanceof Uint8Array)return Zd(re,void 0);if(re instanceof ArrayBuffer)return Zd(new Uint8Array(re),void 0);if(re instanceof ReadableStream)return re.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(F),new Q_(re,b);var re}(r,su(t));a.asyncQueue.enqueueAndForget((0,oe.A)(function*(){!function gE(a,t,r){const o=Ft(a);var u;(u=(0,oe.A)(function*(m,b,F){try{const $=yield b.getMetadata();if(yield function(Ht,nn){const Qt=Ft(Ht),Vn=Ni(nn.createTime);return Qt.persistence.runTransaction("hasNewerBundle","readonly",Xn=>Qt.Gr.getBundleMetadata(Xn,nn.id)).then(Xn=>!!Xn&&Xn.createTime.compareTo(Vn)>=0)}(m.localStore,$))return yield b.close(),F._completeWith({taskState:"Success",documentsLoaded:(Ht=$).totalDocuments,bytesLoaded:Ht.totalBytes,totalDocuments:Ht.totalDocuments,totalBytes:Ht.totalBytes}),Promise.resolve(new Set);F._updateProgress(Gd($));const re=new L_($,m.localStore,b.serializer);let pe=yield b.Ua();for(;pe;){const ut=yield re.la(pe);ut&&F._updateProgress(ut),pe=yield b.Ua()}const Oe=yield re.complete();return yield Oa(m,Oe.Ia,void 0),yield function(Ht,nn){const Qt=Ft(Ht);return Qt.persistence.runTransaction("Save bundle","readwrite",Vn=>Qt.Gr.saveBundleMetadata(Vn,nn))}(m.localStore,$),F._completeWith(Oe.progress),Promise.resolve(Oe.Pa)}catch($){return Kn("SyncEngine",`Loading bundle failed with ${$}`),F._failWith($),Promise.resolve(new Set)}var Ht}),function d(m,b,F){return u.apply(this,arguments)})(o,t,r).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Hg(a),u,o)}))}(r,a._databaseId,t,o),o}(this._delegate,t)}namedQuery(t){return function Z0(a,t){return function EE(a,t){return a.asyncQueue.enqueue((0,oe.A)(function*(){return function(o,u){const d=Ft(o);return d.persistence.runTransaction("Get named query","readonly",m=>d.Gr.getNamedQuery(m,u))}(yield tl(a),t)}))}(us(a=Ur(a,_i)),t).then(r=>r?new Ro(a,null,r.query):null)}(this._delegate,t).then(r=>r?new qo(this,r):null)}}class gh extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new ph(new gc(t))}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return Ia.forKey(r,this.firestore,null)}}class mh{constructor(t,r){this._firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}get(t){const r=Ya(t);return this._delegate.get(r).then(o=>new ul(this._firestore,new yc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,r.converter)))}set(t,r,o){const u=Ya(t);return o?(pm("Transaction.set",o),this._delegate.set(u,r,o)):this._delegate.set(u,r),this}update(t,r,o,...u){const d=Ya(t);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...u),this}delete(t){const r=Ya(t);return this._delegate.delete(r),this}}class Xf{constructor(t){this._delegate=t}set(t,r,o){const u=Ya(t);return o?(pm("WriteBatch.set",o),this._delegate.set(u,r,o)):this._delegate.set(u,r),this}update(t,r,o,...u){const d=Ya(t);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...u),this}delete(t){const r=Ya(t);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class nd{constructor(t,r,o){this._firestore=t,this._userDataWriter=r,this._delegate=o}fromFirestore(t,r){const o=new ed(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Ca(this._firestore,o),r??{})}toFirestore(t,r){return r?this._delegate.toFirestore(t,r):this._delegate.toFirestore(t)}static getInstance(t,r){const o=nd.INSTANCES;let u=o.get(t);u||(u=new WeakMap,o.set(t,u));let d=u.get(r);return d||(d=new nd(t,new gh(t),r),u.set(r,d)),d}}nd.INSTANCES=new WeakMap;class Ia{constructor(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}static forPath(t,r,o){if(t.length%2!=0)throw new xt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Ia(r,new Xi(r._delegate,o,new we(t)))}static forKey(t,r,o){return new Ia(r,new Xi(r._delegate,o,t))}get id(){return this._delegate.id}get parent(){return new rd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new rd(this.firestore,ty(this._delegate,t))}catch(r){throw Oo(r,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,ie.Ku)(t))instanceof Xi&&ny(this._delegate,t)}set(t,r){r=pm("DocumentReference.set",r);try{return r?Ey(this._delegate,t,r):Ey(this._delegate,t)}catch(o){throw Oo(o,"setDoc()","DocumentReference.set()")}}update(t,r,...o){try{return 1===arguments.length?am(this._delegate,t):am(this._delegate,t,r,...o)}catch(u){throw Oo(u,"updateDoc()","DocumentReference.update()")}}delete(){return function zE(a){return cl(Ur(a.firestore,_i),[new Us(a._key,xn.none())])}(this._delegate)}onSnapshot(...t){const r=mm(t),o=_h(t,u=>new ul(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Iy(this._delegate,r,o)}get(t){let r;return r="cache"===t?.source?function sm(a){a=Ur(a,Xi);const t=Ur(a.firestore,_i),r=us(t),o=new Uc(t);return function _E(a,t){const r=new Yn;return a.asyncQueue.enqueueAndForget((0,oe.A)(function*(){return(o=(0,oe.A)(function*(d,m,b){try{const F=yield function(re,pe){const Oe=Ft(re);return Oe.persistence.runTransaction("read document","readonly",ut=>Oe.localDocuments.getDocument(ut,pe))}(d,m);F.isFoundDocument()?b.resolve(F):F.isNoDocument()?b.resolve(null):b.reject(new xt(it.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(F){const $=au(F,`Failed to get document '${m} from cache`);b.reject($)}}),function u(d,m,b){return o.apply(this,arguments)})(yield tl(a),t,r);var o})),r.promise}(r,a._key).then(u=>new yc(t,o,a._key,u,new gu(null!==u&&u.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===t?.source?function hh(a){a=Ur(a,Xi);const t=Ur(a.firestore,_i);return yE(us(t),a._key,{source:"server"}).then(r=>vr(t,a,r))}(this._delegate):function dh(a){a=Ur(a,Xi);const t=Ur(a.firestore,_i);return yE(us(t),a._key).then(r=>vr(t,a,r))}(this._delegate),r.then(o=>new ul(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(t){return new Ia(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}function Oo(a,t,r){return a.message=a.message.replace(t,r),a}function mm(a){for(const t of a)if("object"==typeof t&&!Na(t))return t;return{}}function _h(a,t){var r,o;let u;return u=Na(a[0])?a[0]:Na(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:d=>{u.next&&u.next(t(d))},error:null===(r=u.error)||void 0===r?void 0:r.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class ul{constructor(t,r){this._firestore=t,this._delegate=r}get ref(){return new Ia(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,r){return this._delegate.get(t,r)}isEqual(t){return lh(this._delegate,t._delegate)}}class Ca extends ul{data(t){const r=this._delegate.data(t);return this._delegate._converter||function Zr(a,t){a||Rt()}(void 0!==r),r}}class qo{constructor(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}where(t,r,o){try{return new qo(this.firestore,Xa(this._delegate,function nm(a,t,r){const o=t,u=em("where",a);return ol._create(u,o,r)}(t,r,o)))}catch(u){throw Oo(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,r){try{return new qo(this.firestore,Xa(this._delegate,function rm(a,t="asc"){const r=t,o=em("orderBy",a);return jf._create(o,r)}(t,r)))}catch(o){throw Oo(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new qo(this.firestore,Xa(this._delegate,function BE(a){return TE("limit",a),al._create("limit",a,"F")}(t)))}catch(r){throw Oo(r,"limit()","Query.limit()")}}limitToLast(t){try{return new qo(this.firestore,Xa(this._delegate,function jE(a){return TE("limitToLast",a),al._create("limitToLast",a,"L")}(t)))}catch(r){throw Oo(r,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new qo(this.firestore,Xa(this._delegate,function $E(...a){return ah._create("startAt",a,!0)}(...t)))}catch(r){throw Oo(r,"startAt()","Query.startAt()")}}startAfter(...t){try{return new qo(this.firestore,Xa(this._delegate,function HE(...a){return ah._create("startAfter",a,!1)}(...t)))}catch(r){throw Oo(r,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new qo(this.firestore,Xa(this._delegate,function py(...a){return $f._create("endBefore",a,!1)}(...t)))}catch(r){throw Oo(r,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new qo(this.firestore,Xa(this._delegate,function ch(...a){return $f._create("endAt",a,!0)}(...t)))}catch(r){throw Oo(r,"endAt()","Query.endAt()")}}isEqual(t){return Of(this._delegate,t._delegate)}get(t){let r;return r="cache"===t?.source?function om(a){a=Ur(a,Ro);const t=Ur(a.firestore,_i),r=us(t),o=new Uc(t);return function q0(a,t){const r=new Yn;return a.asyncQueue.enqueueAndForget((0,oe.A)(function*(){return(o=(0,oe.A)(function*(d,m,b){try{const F=yield Gt(d,m,!0),$=new Eg(m,F.Ts),re=$.ma(F.documents),pe=$.applyChanges(re,!1);b.resolve(pe.snapshot)}catch(F){const $=au(F,`Failed to execute query '${m} against cache`);b.reject($)}}),function u(d,m,b){return o.apply(this,arguments)})(yield tl(a),t,r);var o})),r.promise}(r,a._query).then(u=>new vc(t,o,a,u))}(this._delegate):"server"===t?.source?function Wf(a){a=Ur(a,Ro);const t=Ur(a.firestore,_i),r=us(t),o=new Uc(t);return vE(r,a._query,{source:"server"}).then(u=>new vc(t,o,a,u))}(this._delegate):function vy(a){a=Ur(a,Ro);const t=Ur(a.firestore,_i),r=us(t),o=new Uc(t);return tm(a._query),vE(r,a._query).then(u=>new vc(t,o,a,u))}(this._delegate),r.then(o=>new yh(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...t){const r=mm(t),o=_h(t,u=>new yh(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Iy(this._delegate,r,o)}withConverter(t){return new qo(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}class oI{constructor(t,r){this._firestore=t,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Ca(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yh{constructor(t,r){this._firestore=t,this._delegate=r}get query(){return new qo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Ca(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(r=>new oI(this._firestore,r))}forEach(t,r){this._delegate.forEach(o=>{t.call(r,new Ca(this._firestore,o))})}isEqual(t){return lh(this._delegate,t._delegate)}}class rd extends qo{constructor(t,r){super(t,r),this.firestore=t,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Ia(this.firestore,t):null}doc(t){try{return new Ia(this.firestore,void 0===t?Rf(this._delegate):Rf(this._delegate,t))}catch(r){throw Oo(r,"doc()","CollectionReference.doc()")}}add(t){return function WE(a,t){const r=Ur(a.firestore,_i),o=Rf(a),u=_c(a.converter,t);return cl(r,[Yg(Lc(a.firestore),"addDoc",o._key,u,null!==a.converter,{}).toMutation(o._key,xn.exists(!1))]).then(()=>o)}(this._delegate,t).then(r=>new Ia(this.firestore,r))}isEqual(t){return ny(this._delegate,t._delegate)}withConverter(t){return new rd(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}function Ya(a){return Ur(a,Xi)}class Yf{constructor(...t){this._delegate=new Vc(...t)}static documentId(){return new Yf(ke.keyField().canonicalString())}isEqual(t){return(t=(0,ie.Ku)(t))instanceof Vc&&this._delegate._internalPath.isEqual(t._internalPath)}}class xa{constructor(t){this._delegate=t}static serverTimestamp(){const t=function YE(){return new uy("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new xa(t)}static delete(){const t=function My(){return new Vf("deleteField")}();return t._methodName="FieldValue.delete",new xa(t)}static arrayUnion(...t){const r=function JE(...a){return new ly("arrayUnion",a)}(...t);return r._methodName="FieldValue.arrayUnion",new xa(r)}static arrayRemove(...t){const r=function ZE(...a){return new Jg("arrayRemove",a)}(...t);return r._methodName="FieldValue.arrayRemove",new xa(r)}static increment(t){const r=function eI(a){return new Yl("increment",a)}(t);return r._methodName="FieldValue.increment",new xa(r)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const vh={Firestore:Fy,GeoPoint:xf,Timestamp:Zt,Blob:ph,Transaction:mh,WriteBatch:Xf,DocumentReference:Ia,DocumentSnapshot:ul,Query:qo,QueryDocumentSnapshot:Ca,QuerySnapshot:yh,CollectionReference:rd,FieldPath:Yf,FieldValue:xa,setLogLevel:function Vy(a){!function Ln(a){Cn.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function Eh(a){(function _m(a,t){a.INTERNAL.registerComponent(new Je.uA("firestore-compat",r=>{const o=r.getProvider("app-compat").getImmediate(),u=r.getProvider("firestore").getImmediate();return t(o,u)},"PUBLIC").setServiceProps(Object.assign({},vh)))})(a,(t,r)=>new Fy(t,r,new sI)),a.registerVersion("@firebase/firestore-compat","0.3.36")}(Ee.A);var Ly=k(7935);function By(a,t){return function Uy(a,t=fe.E){return new Le.c(r=>{let o;return null!=t?t.schedule(()=>{o=a.onSnapshot({includeMetadataChanges:!0},r)}):o=a.onSnapshot({includeMetadataChanges:!0},r),()=>{o?.()}})}(a,t)}function ym(a,t){return By(a,t).pipe((0,Me.T)(r=>({payload:r,type:"query"})))}class jy{ref;afs;constructor(t,r){this.ref=t,this.afs=r}set(t,r){return this.ref.set(t,r)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,r){const o=this.ref.collection(t),{ref:u,query:d}=id(o,r);return new vm(u,d,this.afs)}snapshotChanges(){return function aI(a,t){return By(a,t).pipe((0,ve.Z)(void 0),ht(),(0,Me.T)(r=>{const[o,u]=r;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(te.U0)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Me.T)(({payload:r})=>t.idField?{...r.data(),[t.idField]:r.id}:r.data()))}get(t){return(0,Re.H)(this.ref.get(t)).pipe(te.U0)}}function Ih(a,t){return ym(a,t).pipe((0,ve.Z)(void 0),ht(),(0,Me.T)(r=>{const[o,u]=r,d=u.payload.docChanges(),m=d.map(b=>({type:b.type,payload:b}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((b,F)=>{const $=d.find(pe=>pe.doc.ref.isEqual(b.ref)),re=o?.payload.docs.find(pe=>pe.ref.isEqual(b.ref));$&&JSON.stringify($.doc.metadata)===JSON.stringify(b.metadata)||!$&&re&&JSON.stringify(re.metadata)===JSON.stringify(b.metadata)||m.push({type:"modified",payload:{oldIndex:F,newIndex:F,type:"modified",doc:b}})}),m}))}function Ch(a,t,r){return Ih(a,r).pipe((0,ct.S)((o,u)=>function cI(a,t,r){return t.forEach(o=>{r.indexOf(o.type)>-1&&(a=function uI(a,t){switch(t.type){case"added":if(!a[t.newIndex]||!a[t.newIndex].doc.ref.isEqual(t.doc.ref))return $y(a,t.newIndex,0,t);break;case"modified":if(null==a[t.oldIndex]||a[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const r=a.slice();return r.splice(t.oldIndex,1),r.splice(t.newIndex,0,t),r}return $y(a,t.newIndex,1,t)}break;case"removed":if(a[t.oldIndex]&&a[t.oldIndex].doc.ref.isEqual(t.doc.ref))return $y(a,t.oldIndex,1)}return a}(a,o))}),a}(o,u.map(d=>d.payload),t),[]),function We(a,t=Ue.D){return a=a??$e,(0,ze.N)((r,o)=>{let u,d=!0;r.subscribe((0,Ct._)(o,m=>{const b=t(m);(d||!a(u,b))&&(d=!1,u=b,o.next(m))}))})}(),(0,Me.T)(o=>o.map(u=>({type:u.type,payload:u}))))}function $y(a,t,r,...o){const u=a.slice();return u.splice(t,r,...o),u}function Hy(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class vm{ref;query;afs;constructor(t,r,o){this.ref=t,this.query=r,this.afs=o}stateChanges(t){let r=Ih(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(r=r.pipe((0,Me.T)(o=>o.filter(u=>t.indexOf(u.type)>-1)))),r.pipe((0,ve.Z)(void 0),ht(),(0,Pt.p)(([o,u])=>u.length>0||!o),(0,Me.T)(([,o])=>o),te.U0)}auditTrail(t){return this.stateChanges(t).pipe((0,ct.S)((r,o)=>[...r,...o],[]))}snapshotChanges(t){const r=Hy(t);return Ch(this.query,r,this.afs.schedulers.outsideAngular).pipe(te.U0)}valueChanges(t={}){return ym(this.query,this.afs.schedulers.outsideAngular).pipe((0,Me.T)(r=>r.payload.docs.map(o=>t.idField?{...o.data(),[t.idField]:o.id}:o.data())),te.U0)}get(t){return(0,Re.H)(this.query.get(t)).pipe(te.U0)}add(t){return this.ref.add(t)}doc(t){return new jy(this.ref.doc(t),this.afs)}}class lI{query;afs;constructor(t,r){this.query=t,this.afs=r}stateChanges(t){return t&&0!==t.length?Ih(this.query,this.afs.schedulers.outsideAngular).pipe((0,Me.T)(r=>r.filter(o=>t.indexOf(o.type)>-1)),(0,Pt.p)(r=>r.length>0),te.U0):Ih(this.query,this.afs.schedulers.outsideAngular).pipe(te.U0)}auditTrail(t){return this.stateChanges(t).pipe((0,ct.S)((r,o)=>[...r,...o],[]))}snapshotChanges(t){const r=Hy(t);return Ch(this.query,r,this.afs.schedulers.outsideAngular).pipe(te.U0)}valueChanges(t={}){return ym(this.query,this.afs.schedulers.outsideAngular).pipe((0,Me.T)(o=>o.payload.docs.map(u=>t.idField?{[t.idField]:u.id,...u.data()}:u.data())),te.U0)}get(t){return(0,Re.H)(this.query.get(t)).pipe(te.U0)}}const Gy=new y.nKC("angularfire2.enableFirestorePersistence"),Em=new y.nKC("angularfire2.firestore.persistenceSettings"),Im=new y.nKC("angularfire2.firestore.settings"),zy=new y.nKC("angularfire2.firestore.use-emulator");function id(a,t=(r=>r)){return{query:t(a),ref:a}}let wh=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,o,u,d,m,b,F,$,re,pe,Oe,ut,Ht,nn,Qt,Vn,Xn){this.schedulers=F;const kn=(0,be.iB)(r,b,o),cr=re;pe&&(0,R.gF)(kn,b,Oe,Ht,nn,Qt,ut,Vn),[this.firestore,this.persistenceEnabled$]=(0,be.BM)(`${kn.name}.firestore`,"AngularFirestore",kn.name,()=>{const Br=b.runOutsideAngular(()=>kn.firestore());if(d&&Br.settings(d),cr&&Br.useEmulator(...cr),u&&!(0,_.Vy)(m)){const br=()=>{try{return(0,Re.H)(Br.enablePersistence($||void 0).then(()=>!0,()=>!1))}catch(rt){return typeof console<"u"&&console.warn(rt),(0,_e.of)(!1)}};return[Br,b.runOutsideAngular(br)]}return[Br,(0,_e.of)(!1)]},[d,cr,u])}collection(r,o){let u;u="string"==typeof r?this.firestore.collection(r):r;const{ref:d,query:m}=id(u,o),b=this.schedulers.ngZone.run(()=>d);return new vm(b,m,this)}collectionGroup(r,o){const u=o||(m=>m),d=this.firestore.collectionGroup(r);return new lI(u(d),this)}doc(r){let o;o="string"==typeof r?this.firestore.doc(r):r;const u=this.schedulers.ngZone.run(()=>o);return new jy(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||a)(y.KVO(be.rx),y.KVO(be.uP,8),y.KVO(Gy,8),y.KVO(Im,8),y.KVO(y.Agw),y.KVO(y.SKi),y.KVO(te.u0),y.KVO(Em,8),y.KVO(zy,8),y.KVO(R.DS,8),y.KVO(R.CP,8),y.KVO(R.yy,8),y.KVO(R.ZP,8),y.KVO(R.$z,8),y.KVO(R.AU,8),y.KVO(R.UB,8),y.KVO(te.Jv,8))};static \u0275prov=y.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})(),Th=(()=>{class a{constructor(){Ly.A.registerVersion("angularfire",te.xv.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:Gy,useValue:!0},{provide:Em,useValue:r}]}}static \u0275fac=function(o){return new(o||a)};static \u0275mod=y.$C({type:a});static \u0275inj=y.G2t({providers:[wh]})}return a})();var dI=k(7231),Cm=k(4454),ll=k(9969),Jf=k(6569);function wm(a,t){1&a&&(y.j41(0,"span",13),y.EFF(1,"invalid Email format"),y.k0s())}function hI(a,t){1&a&&(y.j41(0,"span",13),y.EFF(1,"Email is required"),y.k0s())}function lC(a,t){if(1&a){const r=y.RV6();y.j41(0,"div",14)(1,"img",15),y.bIt("click",function(){y.eBV(r);const u=y.XpG();return y.Njj(u.togglePasswordVisibility("password"))}),y.k0s()()}}function dC(a,t){if(1&a){const r=y.RV6();y.j41(0,"div",14)(1,"img",16),y.bIt("click",function(){y.eBV(r);const u=y.XpG();return y.Njj(u.togglePasswordVisibility("password"))}),y.k0s()()}}function fI(a,t){1&a&&(y.j41(0,"span",13),y.EFF(1," Password is required "),y.k0s())}function pI(a,t){if(1&a){const r=y.RV6();y.j41(0,"div",14)(1,"img",15),y.bIt("click",function(){y.eBV(r);const u=y.XpG(2);return y.Njj(u.togglePasswordVisibility("confirmPassword"))}),y.k0s()()}}function hC(a,t){if(1&a){const r=y.RV6();y.j41(0,"div",14)(1,"img",16),y.bIt("click",function(){y.eBV(r);const u=y.XpG(2);return y.Njj(u.togglePasswordVisibility("confirmPassword"))}),y.k0s()()}}function gI(a,t){1&a&&(y.j41(0,"span",13),y.EFF(1," Confirm password is required "),y.k0s())}function fC(a,t){if(1&a&&(y.j41(0,"div",4)(1,"div",7),y.nrm(2,"input",17),y.DNE(3,pI,2,0,"div",9)(4,hC,2,0,"div",9),y.k0s(),y.DNE(5,gI,2,0,"span",6),y.k0s()),2&a){let r;const o=y.XpG();y.R7$(2),y.Y8G("type",o.showConfirmPassword),y.R7$(),y.Y8G("ngIf","password"!==o.showConfirmPassword),y.R7$(),y.Y8G("ngIf","password"===o.showConfirmPassword),y.R7$(),y.Y8G("ngIf",(null==(r=o.form.get("confirmPassword"))?null:r.hasError("required"))&&(null==(r=o.form.get("confirmPassword"))?null:r.touched))}}function mI(a,t){if(1&a){const r=y.RV6();y.j41(0,"button",18),y.bIt("click",function(){y.eBV(r);const u=y.XpG();return y.Njj(u.googleLogin())}),y.EFF(1," Sign in with Google "),y.nrm(2,"img",19),y.k0s()}}function _I(a,t){if(1&a){const r=y.RV6();y.j41(0,"button",18),y.bIt("click",function(){y.eBV(r);const u=y.XpG();return y.Njj(u.emailAndPasswordLogin())}),y.EFF(1," Sign in "),y.k0s()}}function yI(a,t){if(1&a){const r=y.RV6();y.j41(0,"button",18),y.bIt("click",function(){y.eBV(r);const u=y.XpG();return y.Njj(u.registration())}),y.EFF(1," Register "),y.k0s()}}const Tm=a=>{const t=a.get("password")?.value,r=a.get("confirmPassword")?.value;return t&&r&&t!==r?{passwordsMismatch:!0}:null},Dm=[{path:"",component:(()=>{class a{constructor(r,o){this.fb=r,this.logInService=o,this.selected=!0,this.showPassword="password",this.showConfirmPassword="password",this.form=this.fb.group({email:["",[T.k0.required,T.k0.email]],password:["",T.k0.required],confirmPassword:["",T.k0.required]},{validators:Tm})}ngOnInit(){}select(){this.selected=!this.selected,this.clearInputs()}togglePasswordVisibility(r){"password"===r?this.showPassword="password"===this.showPassword?"":"password":"confirmPassword"===r&&(this.showConfirmPassword="password"===this.showConfirmPassword?"":"password")}googleLogin(){this.logInService.loginWithGoogle()}emailAndPasswordLogin(){const r=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.loginWithEmailAndPassword(r,o)}registration(){if(this.form.hasError("passwordsMismatch"))return console.log("Password mismatch detected"),void alert("Password and confirm password do not match");let r=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.registration(r,o),this.clearInputs(),this.selected=!0}clearInputs(){this.form.get("email")?.setValue(""),this.form.get("password")?.setValue(""),this.form.get("confirmPassword")?.setValue(""),this.form.get("email")?.markAsUntouched(),this.form.get("password")?.markAsUntouched(),this.form.get("confirmPassword")?.markAsUntouched()}static#e=this.\u0275fac=function(o){return new(o||a)(y.rXU(T.ok),y.rXU(Jf.p))};static#t=this.\u0275cmp=y.VBU({type:a,selectors:[["app-login"]],decls:24,vars:14,consts:[[1,"loginContainer"],[1,"container"],[3,"click","ngClass"],[3,"formGroup"],[1,"inputs"],["formControlName","email","placeholder","Email ex:sabadmin@gmail.com"],["class","error-message",4,"ngIf"],[1,"password-input"],["formControlName","password","placeholder","Password ex:123123123",3,"type"],["class","pass-img",4,"ngIf"],["class","inputs",4,"ngIf"],[3,"click",4,"ngIf"],["routerLink","/products"],[1,"error-message"],[1,"pass-img"],["src","assets/show.png","alt","img",3,"click"],["src","assets/hidden.png","alt","img",3,"click"],["formControlName","confirmPassword","placeholder","Confirm Password",3,"type"],[3,"click"],["src","assets/google.png","alt","img"]],template:function(o,u){if(1&o&&(y.j41(0,"div",0)(1,"div",1)(2,"div")(3,"p",2),y.bIt("click",function(){return u.select()}),y.EFF(4,"LOG IN"),y.k0s(),y.j41(5,"p",2),y.bIt("click",function(){return u.select()}),y.EFF(6,"SIGN UP"),y.k0s()(),y.j41(7,"form",3)(8,"div",4),y.nrm(9,"input",5),y.DNE(10,wm,2,0,"span",6)(11,hI,2,0,"span",6),y.k0s(),y.j41(12,"div",4)(13,"div",7),y.nrm(14,"input",8),y.DNE(15,lC,2,0,"div",9)(16,dC,2,0,"div",9),y.k0s(),y.DNE(17,fI,2,0,"span",6),y.k0s(),y.DNE(18,fC,6,4,"div",10)(19,mI,3,0,"button",11)(20,_I,2,0,"button",11)(21,yI,2,0,"button",11),y.j41(22,"button",12),y.EFF(23,"Guest Mode"),y.k0s()()()()),2&o){let d,m,b;y.R7$(3),y.Y8G("ngClass",u.selected?"selected":""),y.R7$(2),y.Y8G("ngClass",u.selected?"":"selected"),y.R7$(2),y.Y8G("formGroup",u.form)("@toggleState",u.selected?"login":"signup"),y.R7$(3),y.Y8G("ngIf",null==(d=u.form.get("email"))?null:d.hasError("email")),y.R7$(),y.Y8G("ngIf",(null==(m=u.form.get("email"))?null:m.hasError("required"))&&(null==(m=u.form.get("email"))?null:m.touched)),y.R7$(3),y.Y8G("type",u.showPassword),y.R7$(),y.Y8G("ngIf","password"!==u.showPassword),y.R7$(),y.Y8G("ngIf","password"===u.showPassword),y.R7$(),y.Y8G("ngIf",(null==(b=u.form.get("password"))?null:b.hasError("required"))&&(null==(b=u.form.get("password"))?null:b.touched)),y.R7$(),y.Y8G("ngIf",!u.selected),y.R7$(),y.Y8G("ngIf",u.selected),y.R7$(),y.Y8G("ngIf",u.selected),y.R7$(),y.Y8G("ngIf",!u.selected)}},dependencies:[_.YU,_.bT,T.qT,T.me,T.BC,T.cb,T.j4,T.JD,Cm.Wk],styles:[".loginContainer[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:400px;height:400px;background-color:#62dfdf;border-radius:4px;background-image:url(background.05b7e6a7f70c58a5.webp);background-size:cover;transition:transform .3s ease-in-out}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;gap:20px;padding:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{cursor:pointer;font-size:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]{position:relative}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:6px;right:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{width:100%;height:70%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:200px;height:30px;border-radius:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#13afc7;color:#fff;display:flex;justify-content:center;align-items:center;cursor:pointer}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:5px}.selected[_ngcontent-%COMP%]{color:#fff;border-bottom:1px solid white}.error-message[_ngcontent-%COMP%]{font-size:14px;color:red}.button-disabled[_ngcontent-%COMP%]{background-color:#8ac9d3}"],data:{animation:[(0,ll.hZ)("toggleState",[(0,ll.wk)("login",(0,ll.iF)({transform:"translateX(0)"})),(0,ll.wk)("signup",(0,ll.iF)({transform:"translateY(-10%)"})),(0,ll.kY)("login <=> signup",[(0,ll.i0)("0.4s ease-in-out")])])]},changeDetection:0})}return a})()}];let ep=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=y.$C({type:a});static#n=this.\u0275inj=y.G2t({imports:[Cm.iI.forChild(Dm),Cm.iI]})}return a})();var Wy=k(1626);const Dh={apiKey:"AIzaSyCbQiRFo1MKF_WTEIwSMYg4rFL0CkKdTDI",authDomain:"exercise-app-9b873.firebaseapp.com",databaseURL:"https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app",projectId:"exercise-app-9b873",storageBucket:"exercise-app-9b873.appspot.com",messagingSenderId:"146569895533",appId:"1:146569895533:web:cfb4bca172cc29ee50a964",measurementId:"G-MW950TMVK5"};let Ky=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=y.$C({type:a});static#n=this.\u0275inj=y.G2t({providers:[dI.HF],imports:[_.MD,T.YN,T.X1,Th,R.X8,ep,Wy.q1,be.bf.initializeApp(Dh)]})}return a})()},6569:(sn,Ke,k)=>{k.d(Ke,{p:()=>ze});var _=k(7231),T=k(4412),R=k(6354),y=k(9437),te=k(7673),be=k(4438),fe=k(1182),Le=k(1626),Re=k(4454),_e=k(2906),ve=k(8385);let ze=(()=>{class Ct{constructor(Me,ct,Ue,We,$e){this.auth=Me,this.http=ct,this.router=Ue,this.cartService=We,this.idService=$e,this.loggedUser=new T.t(void 0),this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app/musicShopUsers",this.isAdmin=new T.t(!1),this.likedProducts=new T.t([])}loginWithGoogle(){this.auth.signInWithPopup(new _.HF).then(Me=>{localStorage.setItem("token",JSON.stringify(Me.user?.uid)),this.findUser(Me.user?.email).subscribe(ct=>{void 0===ct?this.addUserTodatabase(Me.user?.email,Me.user?.photoURL):this.findUser(Me.user?.email).subscribe(Ue=>{this.loggedUser.next(Ue),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(Ue))})})},Me=>{alert(Me.mesasage)})}loginWithEmailAndPassword(Me,ct){this.auth.signInWithEmailAndPassword(Me,ct).then(Ue=>{this.findUser(Ue.user?.email).subscribe(We=>{this.loggedUser.next(We),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(We)),We?.user.likedProducts&&(this.idService.prodId.next(We?.user.likedProducts),localStorage.setItem("prodKeyAndType",JSON.stringify(We?.user.likedProducts)),this.isAdmin.next(We?.user.isAdmin))})},Ue=>{alert(Ue.message),console.log(Ue.mesasage)})}registration(Me,ct){this.auth.createUserWithEmailAndPassword(Me,ct).then(Ue=>{this.addUserTodatabase(Ue.user?.email)},Ue=>{alert(Ue.message)})}addUserTodatabase(Me,ct){this.http.post(`${this.url}.json`,{email:Me,isAdmin:!1,photoUrl:ct,address:"",likedProducts:[{key:"none",category:"other"}],purchasedProducts:[{email:Me,userId:Me,date:new Date,totalPrice:0,products:[{quantity:-1,product:{key:"unknown",product:{category:"other",isTopProduct:{isTop:!1,date:new Date(1990)},model:"none",price:-1,quantity:-1,discount:-1,isAcoustic:!1,photoUrl:["none"]}}}]}]}).subscribe(()=>{console.log("User created succesfully")},We=>{alert(We.message)})}findUser(Me){return this.http.get(`${this.url}.json`).pipe((0,R.T)(ct=>{let Ue,We="";if(Object.entries(ct).find(([$e,Pt])=>{Pt.email===Me&&(Ue=Pt,We=$e)}),We&&Ue)return{user:Ue,key:We}}),(0,y.W)(ct=>(console.error(ct),(0,te.of)(void 0))))}findUserById(Me){return this.http.get(`${this.url}/${Me}.json`).pipe((0,R.T)(ct=>ct.email))}checkIfLoggedIn(){if(localStorage.getItem("currentUser")){let Me=JSON.parse(localStorage.getItem("currentUser"));this.loggedUser.next(Me),Me&&this.isAdmin.next(Me?.user.isAdmin),localStorage.getItem("cart")&&this.cartService.cart.next(JSON.parse(localStorage.getItem("cart"))),localStorage.getItem("prodKeyAndType")&&this.idService.prodId.next(JSON.parse(localStorage.getItem("prodKeyAndType")))}}logOut(){localStorage.removeItem("currentUser"),localStorage.removeItem("cart"),this.isAdmin.next(!1),this.loggedUser.next(void 0),this.cartService.cart.next([])}static#e=this.\u0275fac=function(ct){return new(ct||Ct)(be.KVO(fe.DS),be.KVO(Le.Qq),be.KVO(Re.Ix),be.KVO(_e.m),be.KVO(ve.v))};static#t=this.\u0275prov=be.jDH({token:Ct,factory:Ct.\u0275fac,providedIn:"root"})}return Ct})()},6483:(sn,Ke,k)=>{k.d(Ke,{P:()=>T});var _=k(4438);let T=(()=>{class R{transform(te){return te.charAt(0).toUpperCase()+te.substring(1,te.length)}static#e=this.\u0275fac=function(be){return new(be||R)};static#t=this.\u0275pipe=_.EJ8({name:"upperCase",type:R,pure:!0,standalone:!0})}return R})()},6552:(sn,Ke,k)=>{k.d(Ke,{u:()=>te});var _=k(4412),T=k(4438),R=k(6569);function y(be,fe){1&be&&(T.j41(0,"div",4),T.nrm(1,"div",5),T.j41(2,"p"),T.EFF(3,"Loading..."),T.k0s()())}let te=(()=>{class be{constructor(Le){this.authService=Le,this.isEditing="",this.loadingSubject=new _.t(!0),this.loading$=this.loadingSubject.asObservable()}ngOnInit(){this.authService.checkIfLoggedIn()}loadingValue(Le){this.loadingSubject.next(!Le)}static#e=this.\u0275fac=function(Re){return new(Re||be)(T.rXU(R.p))};static#t=this.\u0275cmp=T.VBU({type:be,selectors:[["app-product-page"]],decls:12,vars:7,consts:[[1,"sticky"],["class","loading-container",4,"ngIf"],[1,"container"],[3,"productsImported","category"],[1,"loading-container"],[1,"loader"]],template:function(Re,_e){1&Re&&(T.nrm(0,"app-header",0)(1,"app-top-products"),T.j41(2,"h1"),T.EFF(3,"Our Products"),T.k0s(),T.DNE(4,y,4,0,"div",1),T.nI1(5,"async"),T.j41(6,"div",2)(7,"app-product-page-single-category",3),T.bIt("productsImported",function(ze){return _e.loadingValue(ze)}),T.k0s(),T.j41(8,"app-product-page-single-category",3),T.bIt("productsImported",function(ze){return _e.loadingValue(ze)}),T.k0s(),T.j41(9,"app-product-page-single-category",3),T.bIt("productsImported",function(ze){return _e.loadingValue(ze)}),T.k0s(),T.j41(10,"app-product-page-single-category",3),T.bIt("productsImported",function(ze){return _e.loadingValue(ze)}),T.k0s()(),T.nrm(11,"app-footer")),2&Re&&(T.R7$(4),T.Y8G("ngIf",T.bMT(5,5,_e.loading$)),T.R7$(3),T.Y8G("category","guitar"),T.R7$(),T.Y8G("category","drum"),T.R7$(),T.Y8G("category","piano"),T.R7$(),T.Y8G("category","bass"))},styles:["h1[_ngcontent-%COMP%]{display:flex;justify-content:center}.container[_ngcontent-%COMP%]{padding:40px;display:flex;flex-direction:column;gap:30px}.loading-container[_ngcontent-%COMP%]{margin:0 auto;width:300px;height:300px;display:flex;flex-direction:column;justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%] > .loader[_ngcontent-%COMP%]{width:60px;aspect-ratio:1;border-radius:50%;border:8px solid lightblue;border-right-color:orange;animation:_ngcontent-%COMP%_l2 1s infinite linear}@keyframes _ngcontent-%COMP%_l2{to{transform:rotate(1turn)}}"],changeDetection:0})}return be})()},8569:(sn,Ke,k)=>{k.r(Ke),k.d(Ke,{ProductPageModule:()=>Jt});var _=k(177),T=k(6552),R=k(4454),y=k(4438);const te=[{path:"",component:T.u}];let be=(()=>{class St{static#e=this.\u0275fac=function(at){return new(at||St)};static#t=this.\u0275mod=y.$C({type:St});static#n=this.\u0275inj=y.G2t({imports:[R.iI.forChild(te),R.iI]})}return St})();var fe=k(3236),Le=k(1985),Re=k(9470);var Ct=k(4390);function ht(St,un){1&St&&(y.j41(0,"div",5),y.nrm(1,"div",6),y.j41(2,"p"),y.EFF(3,"Loading..."),y.k0s()())}function Me(St,un){if(1&St){const Lt=y.RV6();y.j41(0,"div",8),y.bIt("click",function(){const tn=y.eBV(Lt).index,Pe=y.XpG(2);return y.Njj(Pe.changeIndex(tn))}),y.k0s()}if(2&St){const Lt=un.index,at=y.XpG(2);y.Y8G("ngClass",at.index===Lt?"highlight":"")}}function ct(St,un){if(1&St&&(y.j41(0,"div"),y.DNE(1,Me,1,1,"div",7),y.k0s()),2&St){const Lt=y.XpG();y.R7$(),y.Y8G("ngForOf",Lt.imgUrls)}}function Ue(St,un){if(1&St){const Lt=y.RV6();y.j41(0,"div",9)(1,"img",10),y.bIt("click",function(){y.eBV(Lt);const tn=y.XpG();return y.Njj(tn.changeImgDown())}),y.k0s(),y.j41(2,"img",11),y.bIt("click",function(){y.eBV(Lt);const tn=y.XpG();return y.Njj(tn.changeImgUp())}),y.k0s()()}}function We(St,un){if(1&St&&(y.j41(0,"div",12),y.nrm(1,"img",13),y.k0s()),2&St){const Lt=y.XpG();y.R7$(),y.Y8G("src",Lt.img,y.B4B)}}let $e=(()=>{class St{constructor(Lt,at){this.cdr=Lt,this.dataShareService=at,this.index=0,this.imgUrls=[],this.img="",this.key="",this.loading=!0}ngOnInit(){this.dataShareService.getTypeOfProduct("guitar"),this.getTopProducts(),this.dataShareService.topProductUpdated$.subscribe(Lt=>{Lt&&("add"===Lt.operation?Lt.img&&this.imgUrls.push({img:Lt.img,key:Lt.key}):this.imgUrls=this.imgUrls.filter(at=>at.key!==Lt.key),this.cdr.detectChanges())})}getTopProducts(){this.dataShareService.topProducts.subscribe(Lt=>{Lt.forEach(at=>{this.imgUrls.push({key:at.key,img:at.product.photoUrl[0]})}),this.imgUrls.length>0&&(this.img=this.imgUrls[0].img,this.key=this.imgUrls[0].key,this.loading=!1,this.startTimeChangeInterval(),this.cdr.detectChanges())})}startTimeChangeInterval(){this.intervalSubscription=function ze(St=0,un=fe.E){return St<0&&(St=0),function ve(St=0,un,Lt=fe.b){let at=-1;return null!=un&&((0,Re.m)(un)?Lt=un:at=un),new Le.c(tn=>{let Pe=function _e(St){return St instanceof Date&&!isNaN(St)}(St)?+St-Lt.now():St;Pe<0&&(Pe=0);let Qe=0;return Lt.schedule(function(){tn.closed||(tn.next(Qe++),0<=at?this.schedule(void 0,at):tn.complete())},Pe)})}(St,St,un)}(4e3).subscribe(()=>{this.changeImgUp(),this.cdr.detectChanges()})}changeImgUp(){this.index===this.imgUrls.length-1?(this.index=0,this.img=this.imgUrls[this.index].img,this.key=this.imgUrls[this.index].key):(this.img=this.imgUrls[this.index+1].img,this.index++),this.clearInterval()}changeImgDown(){0===this.index?(this.index=this.imgUrls.length-1,this.img=this.imgUrls[this.index].img):(this.img=this.imgUrls[this.index-1].img,this.index--),this.clearInterval()}changeIndex(Lt){this.index=Lt,this.img=this.imgUrls[Lt].img,this.key=this.imgUrls[Lt].key,this.clearInterval()}clearInterval(){this.intervalSubscription&&this.intervalSubscription?.unsubscribe(),this.startTimeChangeInterval()}static#e=this.\u0275fac=function(at){return new(at||St)(y.rXU(y.gRc),y.rXU(Ct.L))};static#t=this.\u0275cmp=y.VBU({type:St,selectors:[["app-top-products"]],decls:6,vars:4,consts:[[1,"topProducts-container"],["class","loading-container",4,"ngIf"],[4,"ngIf"],["class","arrows",4,"ngIf"],["class","images",4,"ngIf"],[1,"loading-container"],[1,"loader"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"click","ngClass"],[1,"arrows"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"images"],["alt","img",3,"src"]],template:function(at,tn){1&at&&(y.j41(0,"div",0),y.DNE(1,ht,4,0,"div",1),y.j41(2,"div"),y.DNE(3,ct,2,1,"div",2)(4,Ue,3,0,"div",3),y.k0s(),y.DNE(5,We,2,1,"div",4),y.k0s()),2&at&&(y.R7$(),y.Y8G("ngIf",tn.loading),y.R7$(2),y.Y8G("ngIf",!tn.loading),y.R7$(),y.Y8G("ngIf",!tn.loading&&tn.imgUrls.length>0),y.R7$(),y.Y8G("ngIf",!tn.loading))},dependencies:[_.YU,_.Sq,_.bT],styles:[".topProducts-container[_ngcontent-%COMP%]{background-color:#cb548c;width:100%;height:550px;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0 auto 100px;gap:20px}.topProducts-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{margin:0 auto;width:60px;height:60px;display:flex;flex-direction:column;justify-content:center;align-items:center}.topProducts-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%] > .loader[_ngcontent-%COMP%]{width:20px;aspect-ratio:1;border-radius:50%;border:8px solid lightblue;border-right-color:orange;animation:_ngcontent-%COMP%_l2 1s infinite linear}@keyframes _ngcontent-%COMP%_l2{to{transform:rotate(1turn)}}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;flex-direction:column;align-items:center;gap:10px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child{display:flex;justify-content:center;gap:10px;width:100%}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]{width:10px;height:10px;border:.4px solid #ffc107;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]{display:flex}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:400px;height:300px}@media only screen and (min-width: 800px) and (max-width: 1400px){.topProducts-container[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px;height:200px}}@media only screen and (min-width: 200px) and (max-width: 800px){.topProducts-container[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:250px;height:200px}}.highlight[_ngcontent-%COMP%]{background-color:#ffc107}"],changeDetection:0})}return St})();var Pt=k(2152),ue=k(708),Ee=k(3227),oe=k(9156),Ye=k(3550),Je=k(5435);function Mt(St,un){if(1&St){const Lt=y.RV6();y.j41(0,"app-card",7),y.bIt("editEvent",function(tn){y.eBV(Lt);const Pe=y.XpG(3);return y.Njj(Pe.onFormSubmitted(tn))})("removeEvent",function(tn){y.eBV(Lt);const Pe=y.XpG(3);return y.Njj(Pe.removeHandler(tn))}),y.k0s()}if(2&St){const Lt=un.$implicit;y.Y8G("showSpecificContent",!0)("product",Lt)}}function ie(St,un){if(1&St&&(y.j41(0,"div",5),y.DNE(1,Mt,1,2,"app-card",6),y.nI1(2,"slice"),y.k0s()),2&St){const Lt=y.XpG(2);y.R7$(),y.Y8G("ngForOf",y.brH(2,1,Lt.productsArray,Lt.sliceStart,Lt.SliceEnd))}}function je(St,un){if(1&St){const Lt=y.RV6();y.j41(0,"div",1)(1,"div")(2,"h2"),y.EFF(3),y.k0s(),y.j41(4,"div")(5,"img",2),y.bIt("click",function(){y.eBV(Lt);const tn=y.XpG();return y.Njj(tn.shiftRight())}),y.k0s(),y.j41(6,"img",3),y.bIt("click",function(){y.eBV(Lt);const tn=y.XpG();return y.Njj(tn.shiftLeft())}),y.k0s()()(),y.DNE(7,ie,3,5,"div",4),y.k0s()}if(2&St){const Lt=y.XpG();y.R7$(3),y.SpI("",Lt.modifyCatName(),":"),y.R7$(4),y.Y8G("ngIf",Lt.productsArray.length>0)}}let He=(()=>{class St{constructor(Lt,at,tn){this.sharedService=Lt,this.cd=at,this.dataShareService=tn,this.productsArray=[],this.productsImported=new y.bkB(!0),this.loading=!0,this.sliceStart=0,this.SliceEnd=6,this.length=0}ngOnInit(){this.category&&this.dataShareService.getData(this.category).subscribe(Lt=>{this.productsArray=Lt,this.length=Lt.length,this.loading=!1,this.productsImported.emit(!0),this.applyResponsive(),window.addEventListener("resize",this.applyResponsive.bind(this)),this.cd.detectChanges(),console.log(window.innerWidth)})}shiftLeft(){this.SliceEnd<this.length&&(this.sliceStart+=1,this.SliceEnd+=1)}shiftRight(){this.sliceStart>0&&(this.sliceStart-=1,this.SliceEnd-=1)}ngOnDestroy(){window.removeEventListener("resize",this.applyResponsive.bind(this))}onFormSubmitted(Lt){this.sharedService.editProduct(Lt.form,Lt.prodId,Lt.prodCategory).subscribe(()=>{Lt.prodCategory===this.category&&this.sharedService.updateProductArray(Lt.form,this.productsArray,Lt.prodId),this.cd.detectChanges()})}removeHandler(Lt){this.productsArray=this.productsArray.filter(at=>at.key!==Lt.prodId),this.cd.detectChanges()}modifyCatName(){return this.category?this.category.charAt(0).toUpperCase()+this.category.substring(1,this.category.length)+"s":this.category}applyResponsive(){const Lt=window.innerWidth,tn=Math.floor(Lt/230);this.SliceEnd=Math.min(tn,8),this.SliceEnd>this.length&&(this.SliceEnd=this.length),this.sliceStart=0,this.cd.detectChanges()}static#e=this.\u0275fac=function(at){return new(at||St)(y.rXU(Je.m),y.rXU(y.gRc),y.rXU(Ct.L))};static#t=this.\u0275cmp=y.VBU({type:St,selectors:[["app-product-page-single-category"]],inputs:{category:"category"},outputs:{productsImported:"productsImported"},standalone:!0,features:[y.aNF],decls:1,vars:1,consts:[["class","products-container",4,"ngIf"],[1,"products-container"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],["class","products",4,"ngIf"],[1,"products"],[3,"showSpecificContent","product","editEvent","removeEvent",4,"ngFor","ngForOf"],[3,"editEvent","removeEvent","showSpecificContent","product"]],template:function(at,tn){1&at&&y.DNE(0,je,8,2,"div",0),2&at&&y.Y8G("ngIf",!tn.loading)},dependencies:[_.MD,_.Sq,_.bT,_.P9,Ye.i],styles:[".products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;display:flex;justify-content:space-between}.products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;cursor:pointer}.products-container[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{display:flex;gap:20px}"]})}return St})(),Jt=(()=>{class St{static#e=this.\u0275fac=function(at){return new(at||St)};static#t=this.\u0275mod=y.$C({type:St});static#n=this.\u0275inj=y.G2t({imports:[_.MD,be,ue.n,Pt.l,Ee.K,R.iI,oe.B,Ye.i,He]})}return St})();y.wjB(T.u,[_.bT,ue.n,Pt.l,He,$e],[_.Jj])},1343:(sn,Ke,k)=>{k.r(Ke),k.d(Ke,{ProfileModuleModule:()=>Ee});var _=k(177),T=k(4454),R=k(9417),y=k(6697),te=k(4438),be=k(6569),fe=k(5435),Le=k(8385),Re=k(2152),_e=k(708),ve=k(3550);function ze(oe,Ye){if(1&oe){const Je=te.RV6();te.j41(0,"button",5),te.bIt("click",function(){te.eBV(Je);const ie=te.XpG();return te.Njj(ie.addingProd())}),te.EFF(1," Add New Product "),te.k0s()}}function Ct(oe,Ye){if(1&oe){const Je=te.RV6();te.j41(0,"div",27)(1,"div"),te.nrm(2,"img",28),te.j41(3,"img",29),te.bIt("click",function(){const ie=te.eBV(Je).$implicit,je=te.XpG(2);return te.Njj(je.removeImg(ie))}),te.k0s()()()}if(2&oe){const Je=Ye.$implicit;te.R7$(2),te.Y8G("src",Je,te.B4B)}}function ht(oe,Ye){if(1&oe){const Je=te.RV6();te.j41(0,"form",10)(1,"select",11)(2,"option",12),te.EFF(3,"Guitar"),te.k0s(),te.j41(4,"option",13),te.EFF(5,"Drum"),te.k0s(),te.j41(6,"option",14),te.EFF(7,"Bass"),te.k0s(),te.j41(8,"option",15),te.EFF(9,"Piano"),te.k0s(),te.j41(10,"option",16),te.EFF(11,"Other"),te.k0s()(),te.nrm(12,"input",17)(13,"input",18)(14,"input",19)(15,"input",20)(16,"input",21),te.j41(17,"label"),te.EFF(18," is isAcoustic "),te.nrm(19,"input",22),te.k0s(),te.j41(20,"input",23),te.bIt("change",function(ie){te.eBV(Je);const je=te.XpG();return te.Njj(je.onFileChange(ie))}),te.k0s(),te.j41(21,"button",24),te.bIt("click",function(){te.eBV(Je);const ie=te.XpG();return te.Njj(ie.addNewProduct())}),te.EFF(22," add product "),te.k0s(),te.j41(23,"div",25),te.DNE(24,Ct,4,1,"div",26),te.k0s()()}if(2&oe){const Je=te.XpG();te.Y8G("formGroup",Je.form),te.R7$(21),te.Y8G("disabled",Je.form.invalid),te.R7$(3),te.Y8G("ngForOf",Je.photos)}}function Me(oe,Ye){1&oe&&te.nrm(0,"app-card",30),2&oe&&te.Y8G("product",Ye.$implicit)}let ct=(()=>{class oe{constructor(Je,Mt,ie,je,He,Jt){this.authService=Je,this.cd=Mt,this.fb=ie,this.sharedService=je,this.router=He,this.idService=Jt,this.photos=[],this.addingProduct=!1,this.purchasedProducts=[],this.form=this.fb.group({category:["",[R.k0.required]],model:["",R.k0.required],price:["",R.k0.required],quantity:["",R.k0.required],discount:["",R.k0.required],description:["",R.k0.required],isAcoustic:[!1,R.k0.required]})}ngOnInit(){this.authService.loggedUser.pipe((0,y.s)(1)).subscribe(Je=>{Je&&Je.user.purchasedProducts&&(this.user=Je,this.purchasedProducts=Je?.user.purchasedProducts.slice(1)),this.idService.prodId.subscribe(Mt=>{this.keyandType=Mt,this.getUserLikedProducts()}),this.form.patchValue({category:"guitar"})})}onFileChange(Je){const Mt=Je.target.files[0];if(Mt){const ie=new FileReader;ie.onload=je=>{this.photos.push(je.target?.result),this.cd.detectChanges()},ie.readAsDataURL(Mt)}}addingProd(){this.addingProduct=!this.addingProduct}removeImg(Je){const Mt=this.photos.findIndex(ie=>ie===Je);this.photos.splice(Mt,1)}addNewProduct(){const Je=this.form.get("category")?.getRawValue(),Mt=this.form.get("model")?.getRawValue(),ie=this.form.get("price")?.getRawValue(),je=this.form.get("discount")?.getRawValue(),He=this.form.get("quantity")?.getRawValue(),Jt=this.form.get("description")?.getRawValue(),St=this.form.get("isAcoustic")?.getRawValue();this.sharedService.addProduct(Je,Mt,ie,He,je,this.photos,Jt,St).subscribe({next:()=>{this.form.get("category")?.setValue(""),this.form.get("model")?.setValue(""),this.form.get("price")?.setValue(""),this.form.get("discount")?.setValue(""),this.form.get("quantity")?.setValue(""),this.form.get("description")?.setValue(""),this.photos=[],this.cd.detectChanges(),alert("Product was added successfully")},error:un=>{console.log("add product error: "+un.message)},complete:()=>{console.log("Subscription completed")}})}convertDate(Je){let Mt=new Date(Je);return`${Mt.getDate()}/${Mt.getMonth()+1}/${Mt.getFullYear()}`}navigate(Je){this.router.navigate([`/${Je}`])}getUserLikedProducts(){this.authService.loggedUser.pipe((0,y.s)(1)).subscribe(()=>{this.keyandType&&this.keyandType.length>0&&this.sharedService.getLikedProductsByIdsAsKeyValue(this.keyandType).subscribe(Je=>{this.likedProducts=Je,this.cd.detectChanges()})})}static#e=this.\u0275fac=function(Mt){return new(Mt||oe)(te.rXU(be.p),te.rXU(te.gRc),te.rXU(R.ok),te.rXU(fe.m),te.rXU(T.Ix),te.rXU(Le.v))};static#t=this.\u0275cmp=te.VBU({type:oe,selectors:[["app-profile"]],decls:27,vars:5,consts:[[1,"container"],[1,"wrapper"],[1,"box"],[1,"info"],[3,"click",4,"ngIf"],[3,"click"],[3,"formGroup",4,"ngIf"],[1,"liked-products"],[1,"products"],["class","single-product",3,"product",4,"ngFor","ngForOf"],[3,"formGroup"],["formControlName","category"],["value","guitar"],["value","drum"],["value","bass"],["value","piano"],["value","other"],["placeholder","Model","formControlName","model"],["placeholder","Price","formControlName","price"],["placeholder","Discount","formControlName","discount"],["placeholder","Quantity","formControlName","quantity"],["placeholder","Description","formControlName","description"],["type","checkbox","formControlName","isAcoustic"],["type","file",3,"change"],[3,"click","disabled"],[1,"photos"],["class","pht",4,"ngFor","ngForOf"],[1,"pht"],["alt","img",3,"src"],["src","assets/remove.png","alt","img",3,"click"],[1,"single-product",3,"product"]],template:function(Mt,ie){1&Mt&&(te.nrm(0,"app-header"),te.j41(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"p")(6,"span"),te.EFF(7," Email:"),te.k0s(),te.EFF(8),te.k0s(),te.j41(9,"p")(10,"span"),te.EFF(11,"Address:"),te.k0s(),te.EFF(12),te.k0s(),te.j41(13,"button"),te.EFF(14,"Change Password"),te.k0s(),te.DNE(15,ze,2,0,"button",4),te.j41(16,"button",5),te.bIt("click",function(){return ie.navigate("purchasedProducts")}),te.EFF(17," See Your Purchases "),te.k0s(),te.j41(18,"button",5),te.bIt("click",function(){return ie.navigate("allPurchase")}),te.EFF(19,"See All Purchases"),te.k0s()(),te.DNE(20,ht,25,3,"form",6),te.k0s(),te.j41(21,"div",7)(22,"h2"),te.EFF(23,"Liked Products:"),te.k0s(),te.j41(24,"div",8),te.DNE(25,Me,1,1,"app-card",9),te.k0s()()()(),te.nrm(26,"app-footer")),2&Mt&&(te.R7$(8),te.SpI(" ",null==ie.user||null==ie.user.user?null:ie.user.user.email,""),te.R7$(4),te.SpI(" ",null==ie.user||null==ie.user.user?null:ie.user.user.address,"Some Adrress"),te.R7$(3),te.Y8G("ngIf",null==ie.user||null==ie.user.user?null:ie.user.user.isAdmin),te.R7$(5),te.Y8G("ngIf",(null==ie.user||null==ie.user.user?null:ie.user.user.isAdmin)&&ie.addingProduct),te.R7$(5),te.Y8G("ngForOf",ie.likedProducts))},dependencies:[_.Sq,_.bT,R.qT,R.xH,R.y7,R.me,R.Zm,R.wz,R.BC,R.cb,R.j4,R.JD,Re.l,_e.n,ve.i],styles:[".container[_ngcontent-%COMP%]{width:100vw;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:90%;background-color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:8%;display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-size:18px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:200px;height:50px;cursor:pointer;--b: 2px;--s: .45em;--color: #373b44;padding:calc(.5em + var(--s)) calc(.9em + var(--s));color:var(--color);--_p: var(--s);background:conic-gradient(from 90deg at var(--b) var(--b),rgba(0,0,0,0) 90deg,var(--color) 0) var(--_p) var(--_p)/calc(100% - var(--b) - 2 * var(--_p)) calc(100% - var(--b) - 2 * var(--_p));transition:.3s linear,color 0s,background-color 0s;outline:var(--b) solid rgba(0,0,0,0);outline-offset:.6em;font-size:16px;border:0;user-select:none;-webkit-user-select:none;touch-action:manipulation}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus-visible{--_p: 0px;outline-color:var(--color);outline-offset:.05em}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background:var(--color);color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,200px);grid-template-rows:repeat(5,30px);padding-left:8%;margin-bottom:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]{display:flex;gap:12px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]:last-of-type{width:8px;position:absolute;top:3px;right:-6px}.liked-products[_ngcontent-%COMP%]{padding:20px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}"],changeDetection:0})}return oe})();var Ue=k(6354),We=k(8141);const Pt=[{path:"",component:ct,canActivate:[(()=>{class oe{constructor(){this.authService=(0,te.WQX)(be.p),this.router=(0,te.WQX)(T.Ix)}canActivate(Je){return this.authService.findUserById(Je.params.id).pipe((0,Ue.T)(ie=>this.authService.loggedUser.value?.user.email===ie),(0,We.M)(ie=>{ie||(alert("Access Denied!"),this.router.navigate(["/products"]))}))}static#e=this.\u0275fac=function(Mt){return new(Mt||oe)};static#t=this.\u0275prov=te.jDH({token:oe,factory:oe.\u0275fac,providedIn:"root"})}return oe})()]}];let ue=(()=>{class oe{static#e=this.\u0275fac=function(Mt){return new(Mt||oe)};static#t=this.\u0275mod=te.$C({type:oe});static#n=this.\u0275inj=te.G2t({imports:[T.iI.forChild(Pt),T.iI]})}return oe})(),Ee=(()=>{class oe{static#e=this.\u0275fac=function(Mt){return new(Mt||oe)};static#t=this.\u0275mod=te.$C({type:oe});static#n=this.\u0275inj=te.G2t({imports:[_.MD,ue,R.X1,Re.l,_e.n,ve.i]})}return oe})()},9156:(sn,Ke,k)=>{k.d(Ke,{B:()=>R});var _=k(4438),T=k(9417);let R=(()=>{class y{constructor(be){this.fb=be,this.formSubmitted=new _.bkB,this.productForm=this.fb.group({model:[""],price:["",T.k0.pattern("^[0-9]*$")],discount:["",T.k0.pattern("^[0-9]*$")],quantity:["",T.k0.pattern("^[0-9]*$")],description:[""]})}onSubmit(){this.formSubmitted.emit(this.productForm.value)}static#e=this.\u0275fac=function(fe){return new(fe||y)(_.rXU(T.ok))};static#t=this.\u0275cmp=_.VBU({type:y,selectors:[["app-reusable-form"]],outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[_.aNF],decls:8,vars:1,consts:[[1,"edit",3,"formGroup"],["formControlName","model","type","text","placeholder","New model-name"],["formControlName","price","type","text","placeholder","New price"],["formControlName","discount","type","text","placeholder","New Discount"],["formControlName","quantity","type","text","placeholder","New Quantity"],["formControlName","description","placeholder","New Description"],[3,"click"]],template:function(fe,Le){1&fe&&(_.j41(0,"form",0),_.nrm(1,"input",1)(2,"input",2)(3,"input",3)(4,"input",4)(5,"textarea",5),_.j41(6,"button",6),_.bIt("click",function(){return Le.onSubmit()}),_.EFF(7,"Confirm Changes"),_.k0s()()),2&fe&&_.Y8G("formGroup",Le.productForm)},dependencies:[T.X1,T.qT,T.me,T.BC,T.cb,T.j4,T.JD],styles:[".edit[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;gap:6px;margin-top:60px}.edit[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .edit[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:80%;height:26px}"]})}return y})()},3550:(sn,Ke,k)=>{k.d(Ke,{i:()=>Mt});var _=k(177),T=k(9417),R=k(9156),y=k(4438),te=k(6483),be=k(5435),fe=k(6569),Le=k(4454),Re=k(2906),_e=k(4390),ve=k(8385),ze=k(6552);function Ct(ie,je){if(1&ie){const He=y.RV6();y.j41(0,"img",16),y.bIt("click",function(){y.eBV(He);const St=y.XpG(3);return y.Njj(St.editing())}),y.k0s()}}function ht(ie,je){if(1&ie){const He=y.RV6();y.j41(0,"img",16),y.bIt("click",function(){y.eBV(He);const St=y.XpG(3);return y.Njj(St.cancelEditing())}),y.k0s()}}function Me(ie,je){if(1&ie){const He=y.RV6();y.j41(0,"div",13)(1,"img",14),y.bIt("click",function(){y.eBV(He);const St=y.XpG(2);return y.Njj(St.removeProduct())}),y.k0s(),y.DNE(2,Ct,1,0,"img",15)(3,ht,1,0,"img",15),y.k0s()}if(2&ie){const He=y.XpG(2);y.R7$(2),y.Y8G("ngIf",""===He.isEditing),y.R7$(),y.Y8G("ngIf",""!==He.isEditing)}}function ct(ie,je){if(1&ie){const He=y.RV6();y.j41(0,"div")(1,"button",5),y.bIt("click",function(){y.eBV(He);const St=y.XpG(2);return y.Njj(St.likeOrUnlikeProd())}),y.EFF(2,"Like"),y.k0s(),y.j41(3,"img",17),y.bIt("click",function(){y.eBV(He);const St=y.XpG(2);return y.Njj(St.likeOrUnlikeProd())}),y.k0s()()}}function Ue(ie,je){if(1&ie){const He=y.RV6();y.j41(0,"div")(1,"button",5),y.bIt("click",function(){y.eBV(He);const St=y.XpG(2);return y.Njj(St.likeOrUnlikeProd())}),y.EFF(2,"unLike"),y.k0s(),y.j41(3,"img",18),y.bIt("click",function(){y.eBV(He);const St=y.XpG(2);return y.Njj(St.likeOrUnlikeProd())}),y.k0s()()}}function We(ie,je){if(1&ie){const He=y.RV6();y.j41(0,"button",5),y.bIt("click",function(){y.eBV(He);const St=y.XpG(3);return y.Njj(St.makeItTop())}),y.EFF(1,"Add To Top"),y.k0s()}}function $e(ie,je){if(1&ie){const He=y.RV6();y.j41(0,"button",5),y.bIt("click",function(){y.eBV(He);const St=y.XpG(3);return y.Njj(St.makeItTop())}),y.EFF(1," Remove From Top "),y.k0s()}}function Pt(ie,je){if(1&ie&&(y.j41(0,"div",19),y.DNE(1,We,2,0,"button",20)(2,$e,2,0,"button",20),y.k0s()),2&ie){const He=y.XpG(2);y.R7$(),y.Y8G("ngIf",!He.isTopProduct),y.R7$(),y.Y8G("ngIf",He.isTopProduct)}}function ue(ie,je){if(1&ie){const He=y.RV6();y.j41(0,"div",21)(1,"app-reusable-form",22),y.bIt("formSubmitted",function(St){y.eBV(He);const un=y.XpG(2);return y.Njj(un.onFormSubmit(St))}),y.k0s(),y.j41(2,"div")(3,"button",5),y.bIt("click",function(){y.eBV(He);const St=y.XpG(2);return y.Njj(St.cancelEditing())}),y.EFF(4,"Cancel"),y.k0s()()()}}function Ee(ie,je){if(1&ie&&(y.j41(0,"div",23),y.EFF(1),y.k0s()),2&ie){const He=y.XpG(2);y.R7$(),y.SpI(" -",He.product.product.discount,"% ")}}function oe(ie,je){if(1&ie&&(y.j41(0,"span"),y.EFF(1),y.k0s()),2&ie){const He=y.XpG(2);y.R7$(),y.SpI("",He.product.product.price,"$")}}function Ye(ie,je){if(1&ie&&(y.j41(0,"div",24)(1,"span"),y.EFF(2),y.k0s(),y.j41(3,"span"),y.EFF(4),y.k0s()()),2&ie){const He=y.XpG(2);y.R7$(2),y.SpI(" ",He.product.product.price,"$ "),y.R7$(2),y.SpI(" ",He.calculateDiscount(),"$ ")}}function Je(ie,je){if(1&ie){const He=y.RV6();y.j41(0,"div")(1,"div",1),y.DNE(2,Me,4,2,"div",2),y.nI1(3,"async"),y.j41(4,"div",3)(5,"div",4),y.DNE(6,ct,4,0,"div",0)(7,Ue,4,0,"div",0),y.k0s(),y.j41(8,"button",5),y.bIt("click",function(){y.eBV(He);const St=y.XpG();return y.Njj(St.addInCart())}),y.EFF(9,"Add to cart"),y.k0s(),y.j41(10,"div",6)(11,"span",5),y.bIt("click",function(){y.eBV(He);const St=y.XpG();return y.Njj(St.navigation())}),y.EFF(12,"See Product"),y.k0s()(),y.DNE(13,Pt,3,2,"div",7),y.nI1(14,"async"),y.k0s(),y.DNE(15,ue,5,0,"div",8),y.j41(16,"div",3),y.DNE(17,Ee,2,1,"div",9),y.nrm(18,"img",10),y.k0s(),y.j41(19,"div",11)(20,"span"),y.EFF(21),y.nI1(22,"upperCase"),y.k0s(),y.j41(23,"span"),y.EFF(24),y.nI1(25,"slice"),y.nI1(26,"upperCase"),y.k0s(),y.DNE(27,oe,2,1,"span",0)(28,Ye,5,2,"div",12),y.k0s()()()}if(2&ie){const He=y.XpG();y.R7$(2),y.Y8G("ngIf",y.bMT(3,13,He.isAdmin)),y.R7$(2),y.Y8G("ngClass",He.isEditing?"display-none":"hover"),y.R7$(2),y.Y8G("ngIf",!He.isLiked),y.R7$(),y.Y8G("ngIf",He.isLiked),y.R7$(6),y.Y8G("ngIf",y.bMT(14,15,He.isAdmin)),y.R7$(2),y.Y8G("ngIf",He.isEditing===He.product.key),y.R7$(),y.Y8G("ngClass",He.isEditing===He.product.key?"display-none":"img-placeholder"),y.R7$(),y.Y8G("ngIf",null==He.product||null==He.product.product?null:He.product.product.discount),y.R7$(),y.Y8G("src",He.product.product.photoUrl[0],y.B4B),y.R7$(3),y.JRh(y.bMT(22,17,He.product.product.category)),y.R7$(3),y.JRh(y.bMT(26,23,y.brH(25,19,He.product.product.model,0,150))),y.R7$(3),y.Y8G("ngIf",!He.product.product.discount),y.R7$(),y.Y8G("ngIf",He.product.product.discount)}}let Mt=(()=>{class ie{constructor(He,Jt,St,un,Lt,at,tn,Pe){this.sharedService=He,this.authService=Jt,this.router=St,this.cd=un,this.cartService=Lt,this.dataService=at,this.idService=tn,this.specificParent=Pe,this.showSpecificContent=!1,this.singleProdPage=!1,this.removeEvent=new y.bkB,this.editEvent=new y.bkB,this.topProds=new y.bkB,this.isEditing="",this.isUsedInSpecificParent=!1,this.isTopProduct=!1,this.isLiked=!1,this.specificParent&&(this.isUsedInSpecificParent=!0)}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.loggedUser.subscribe(He=>{this.isAdmin=this.authService.isAdmin.asObservable(),this.userID=He?.key,this.isProductIntop(),this.isProdLiked()})}removeProduct(){this.sharedService.removeProduct(this.product?.product.category,this.product?.key).subscribe(()=>{this.removeEvent.emit({prodId:this.product?.key,prodCategory:this.product?.product.category}),this.dataService.emitTopProductUpdate(this.product.key,"remove"),this.cd.detectChanges()})}navigation(){this.router.navigate([`single-product/${this.product?.key}`],{queryParams:{type:this.product?.product.category,prod:this.product?.key}}),this.cd.detectChanges()}addInCart(){this.cartService.cartOperations("add",this.product)}navigateToCategotyPage(){this.router.navigate([`categoty/${this.product?.product.category}`])}calculateDiscount(){return this.product?.product.price-Math.round(this.product?.product.price*this.product?.product.discount/100)}editing(){this.isEditing=this.product?.key}cancelEditing(){this.isEditing=""}onFormSubmit(He){this.editEvent.emit({form:He,prodId:this.product?.key,prodCategory:this.product?.product?.category}),He.model&&(this.product.product.model=He.model),He.price&&(this.product.product.price=He.price),He.discount&&(this.product.product.discount=He.discount),He.quantity&&(this.product.product.quantity=He.quantity),He.description&&(this.product.product.description=He.description),this.cancelEditing()}firstLetterUpperCase(He){return He.charAt(0).toUpperCase()+He.substring(1,He.length)}makeItTop(){this.sharedService.makeTopProduct(this.product.key,this.product.product.category).subscribe(()=>{this.isTopProduct?(this.isTopProduct=!1,this.dataService.emitTopProductUpdate(this.product.key,"remove")):(this.isTopProduct=!0,this.dataService.emitTopProductUpdate(this.product.key,"add",this.product.product.photoUrl[0])),this.cd.detectChanges()})}isProductIntop(){this.dataService.topProducts.subscribe(He=>{He.find(Jt=>Jt.key===this.product.key)&&(this.isTopProduct=!0)})}likeOrUnlikeProd(){this.sharedService.likeUnlikeProduct(this.product.key,this.product.product.category,this.userID,this.idService.prodId.value).subscribe(()=>{this.isLiked=!this.isLiked,this.cd.detectChanges()})}isProdLiked(){this.idService.prodId.subscribe(He=>{He&&He.find(Jt=>Jt.key===this.product.key)&&(this.isLiked=!0)})}static#e=this.\u0275fac=function(Jt){return new(Jt||ie)(y.rXU(be.m),y.rXU(fe.p),y.rXU(Le.Ix),y.rXU(y.gRc),y.rXU(Re.m),y.rXU(_e.L),y.rXU(ve.v),y.rXU(ze.u,8))};static#t=this.\u0275cmp=y.VBU({type:ie,selectors:[["app-card"]],inputs:{showSpecificContent:"showSpecificContent",product:"product",singleProdPage:"singleProdPage"},outputs:{removeEvent:"removeEvent",editEvent:"editEvent",topProds:"topProds"},standalone:!0,features:[y.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[1,"single-product"],["class","delete-button",4,"ngIf"],[3,"ngClass"],[1,"like"],[3,"click"],[1,"see-prod"],["class","add-remove",4,"ngIf"],["class","edit",4,"ngIf"],["class","discount",4,"ngIf"],["alt","img",3,"src"],[1,"info"],["class","if-discount",4,"ngIf"],[1,"delete-button"],["src","assets/remove.png","alt","img",3,"click"],["src","assets/pen.png","alt","img",3,"click",4,"ngIf"],["src","assets/pen.png","alt","img",3,"click"],["src","assets/heart.png","alt","img",3,"click"],["src","assets/heart-red.png","alt","img",3,"click"],[1,"add-remove"],[3,"click",4,"ngIf"],[1,"edit"],[3,"formSubmitted"],[1,"discount"],[1,"if-discount"]],template:function(Jt,St){1&Jt&&y.DNE(0,Je,29,25,"div",0),2&Jt&&y.Y8G("ngIf",St.product&&St.product.product)},dependencies:[T.YN,_.MD,_.YU,_.bT,_.Jj,_.P9,R.B,te.P],styles:[".single-product[_ngcontent-%COMP%]{width:200px;height:420px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%]{position:absolute;z-index:1}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:2px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:14%;z-index:1}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .like[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .like[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .like[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80px;font-size:16px;background-color:#3a3afa;border:none}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .see-prod[_ngcontent-%COMP%]{display:flex;justify-content:center;height:40px;color:#fff}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-of-type{display:flex;justify-content:center;align-items:center;width:140px;height:40px;color:#fff}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{height:260px;display:flex;justify-content:center;position:relative}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;min-height:50%;min-width:50%}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{height:155px;display:flex;flex-direction:column;justify-content:space-between}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{text-decoration:line-through}.if-discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;font-weight:700;justify-self:flex-end}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:20px}.display-none[_ngcontent-%COMP%]{display:none}"],changeDetection:0})}return ie})()},8385:(sn,Ke,k)=>{k.d(Ke,{v:()=>R});var _=k(4412),T=k(4438);let R=(()=>{class y{constructor(){this.prodId=new _.t(void 0)}static#e=this.\u0275fac=function(fe){return new(fe||y)};static#t=this.\u0275prov=T.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},4390:(sn,Ke,k)=>{k.d(Ke,{L:()=>be});var _=k(4412),T=k(7468),R=k(6354),y=k(4438),te=k(1626);let be=(()=>{class fe{constructor(Re){this.http=Re,this.url="https://musicshop-88945-default-rtdb.firebaseio.com/",this.allProducts=new _.t([]),this.topProducts=new _.t([]),this.guitarProducts=new _.t([]),this.pianoProducts=new _.t([]),this.bassProducts=new _.t([]),this.drumProducts=new _.t([]),this.likedProducts=new _.t([]),this.topProductUpdated=new _.t(void 0),this.topProductUpdated$=this.topProductUpdated.asObservable()}getData(Re){return"guitar"===Re?this.guitarProducts:"bass"===Re?this.bassProducts:"drum"===Re?this.drumProducts:"piano"===Re?this.pianoProducts:this.allProducts}emitTopProductUpdate(Re,_e,ve){this.topProductUpdated.next({img:ve,key:Re,operation:_e})}getAllTopProduct(){this.allProducts.subscribe(Re=>{const ze=this.mapKeyValue(Re).filter(Ct=>!0===Ct.product.isTopProduct.isTop).sort((Ct,ht)=>new Date(Ct.product.isTopProduct.date).getTime()-new Date(ht.product.isTopProduct.date).getTime());this.topProducts.next(ze)})}getAllTypeOfProduct(){const Re=this.http.get(`${this.url}/products/guitar.json`),_e=this.http.get(`${this.url}/products/piano.json`),ve=this.http.get(`${this.url}/products/bass.json`),ze=this.http.get(`${this.url}/products/drum.json`);return(0,T.p)([Re,_e,ve,ze]).pipe((0,R.T)(Ct=>{this.allProducts.next(Ct);const ht=this.mapKeyValue(Ct),Me=ht.filter($e=>"guitar"===$e.product.category),ct=ht.filter($e=>"piano"===$e.product.category),Ue=ht.filter($e=>"bass"===$e.product.category),We=ht.filter($e=>"drum"===$e.product.category);return this.pianoProducts.next(ct),this.bassProducts.next(Ue),this.drumProducts.next(We),this.guitarProducts.next(Me),this.getAllTopProduct(),Ct}))}mapKeyValue(Re){return Re.flatMap(ve=>Object.entries(ve).map(([ze,Ct])=>({key:ze,product:Ct})))}getTypeOfProduct(Re){this.http.get(`${this.url}/products/guitar.json`).subscribe(_e=>{this.getData(Re).next(_e)})}static#e=this.\u0275fac=function(_e){return new(_e||fe)(y.KVO(te.Qq))};static#t=this.\u0275prov=y.jDH({token:fe,factory:fe.\u0275fac,providedIn:"root"})}return fe})()},5435:(sn,Ke,k)=>{k.d(Ke,{m:()=>ze});var _=k(4412),T=k(8141),R=k(6354),y=k(7468),te=k(5558),be=k(9437),fe=k(7673),Le=k(4438),Re=k(1626),_e=k(6569),ve=k(4390);let ze=(()=>{class Ct{constructor(Me,ct,Ue){this.http=Me,this.service=ct,this.shareDataService=Ue,this.detectChanges=new _.t(!1),this.userId=this.service.loggedUser.value?.key,this.url="https://musicshop-88945-default-rtdb.firebaseio.com/"}addProduct(Me,ct,Ue,We,$e,Pt,ue,Ee){const oe={category:Me,model:ct,price:parseInt(Ue),quantity:parseInt(We),discount:parseInt($e),photoUrl:Pt,isTopProduct:{isTop:!1,date:new Date(1990)},isAcoustic:Ee,description:ue};return this.http.post(`${this.url}/products/${Me}.json`,oe)}ifDetectChanges(){return this.detectChanges.next(!this.detectChanges.value),this.detectChanges.value}makeTopProduct(Me,ct){return this.http.get(`${this.url}/products/${ct}/${Me}.json`).pipe((0,T.M)(Ue=>{Ue.isTopProduct.isTop?(Ue.isTopProduct.isTop=!1,Ue.isTopProduct.date=new Date(1990)):(Ue.isTopProduct.isTop=!0,Ue.isTopProduct.date=new Date),this.http.patch(`${this.url}/products/${ct}/${Me}.json`,Ue).subscribe()}))}likeUnlikeProduct(Me,ct,Ue,We){return this.http.get(`${this.url}/musicShopUsers/${Ue}.json`).pipe((0,T.M)($e=>{let Pt=$e;console.log($e);let ue=We;Pt&&(Pt.likedProducts.find(oe=>oe.key===Me)?(ue=$e.likedProducts.filter(oe=>oe.key!==Me),Pt.likedProducts=ue):(ue=[...$e.likedProducts,{key:Me,category:ct}],Pt.likedProducts=ue),localStorage.setItem("prodKeyAndType",JSON.stringify(ue))),this.http.patch(`${this.url}/musicShopUsers/${Ue}.json`,Pt).subscribe()}))}getLikedProductsByIdsAsKeyValue(Me){const ct=Me.map(Ue=>this.getProductById(Ue.key,Ue.category).pipe((0,R.T)(We=>({key:Ue.key,product:We}))));return(0,y.p)(ct)}getProduct(Me,ct){return this.http.get(`${this.url}/products/${ct}/${Me}.json`)}getProductById(Me,ct){return this.http.get(`${this.url}/products/${ct}/${Me}.json`)}buyProducts(Me,ct,Ue,We){const $e={userId:We,email:Ue,date:new Date,totalPrice:ct,products:Me},Pt=this.http.get(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`).pipe((0,te.n)(Ee=>(Ee.purchasedProducts=[...Ee.purchasedProducts,$e],this.http.patch(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`,Ee))),(0,be.W)(Ee=>(console.error("Error in adminUpdate$",Ee),(0,fe.of)(null))));let ue=(0,fe.of)(null);We&&(ue=this.http.get(`${this.url}/musicShopUsers/${We}.json`).pipe((0,te.n)(Ee=>(Ee.purchasedProducts=[...Ee.purchasedProducts,$e],this.http.patch(`${this.url}/musicShopUsers/${We}.json`,Ee))),(0,be.W)(Ee=>(console.error("Error in userUpdate$",Ee),(0,fe.of)(null))))),(0,y.p)([Pt,ue]).subscribe()}removeProduct(Me,ct){return this.http.delete(`${this.url}/products/${Me}/${ct}.json`)}editProduct(Me,ct,Ue){return this.http.get(`${this.url}/products/${Ue}/${ct}.json`).pipe((0,T.M)(We=>{Me.model&&(We.model=Me.model),Me.price&&(We.price=Me.price),Me.discount&&(We.discount=Me.discount),Me.quantity&&(We.quantity=Me.quantity),Me.description&&(We.description=Me.description),this.http.patch(`${this.url}/products/${Ue}/${ct}.json`,We).subscribe()}))}updateProductArray(Me,ct,Ue){let We=ct.findIndex($e=>$e.key===Ue);Me.discount&&(ct[We].product.discount=Me.discount,Me.model&&(ct[We].product.model=Me.model),Me.price&&(ct[We].product.price=Me.price),Me.description&&(ct[We].product.description=Me.description),Me.quantity&&(ct[We].product.quantity=Me.quantity))}getRandomProducts(Me){return this.shareDataService.getData(Me).pipe((0,R.T)(ct=>{let Ue=4;const We=[],$e=[];for(;0!==Ue;){if(ct.length<=Ue)return ct;const Pt=Math.floor(Math.random()*ct.length);$e.includes(Pt)||(We.push(ct[Pt]),$e.push(Pt),Ue--)}return We}))}getLikedProductsArr(Me){return this.http.get(`${this.url}/musicShopUsers/${Me}.json`).pipe((0,R.T)(ct=>ct))}getAllClientPurchases(){return this.http.get(`${this.url}/musicShopUsers/.json`).pipe((0,R.T)(Me=>Object.keys(Me).map(ct=>(Me[ct].purchasedProducts||[]).slice(1))),(0,R.T)(Me=>Me.flat()))}static#e=this.\u0275fac=function(ct){return new(ct||Ct)(Le.KVO(Re.Qq),Le.KVO(_e.p),Le.KVO(ve.L))};static#t=this.\u0275prov=Le.jDH({token:Ct,factory:Ct.\u0275fac,providedIn:"root"})}return Ct})()},2735:(sn,Ke,k)=>{k.r(Ke),k.d(Ke,{SingleProductPageModule:()=>$e});var _=k(177),T=k(4454),R=k(6697),y=k(4438),te=k(5435),be=k(6569),fe=k(2906),Le=k(2152),Re=k(708),_e=k(8964);function ve(Pt,ue){if(1&Pt&&y.nrm(0,"img",15,0),2&Pt){const Ee=y.XpG();y.Y8G("src",Ee.images[Ee.cuurentIndex],y.B4B)}}function ze(Pt,ue){if(1&Pt){const Ee=y.RV6();y.j41(0,"div")(1,"img",16),y.bIt("click",function(){const Ye=y.eBV(Ee).index,Je=y.XpG();return y.Njj(Je.switchImage(Ye))}),y.k0s()()}if(2&Pt){const Ee=ue.index,oe=y.XpG();y.R7$(),y.Y8G("src",oe.images[Ee],y.B4B)}}function Ct(Pt,ue){if(1&Pt){const Ee=y.RV6();y.j41(0,"img",17),y.bIt("click",function(){y.eBV(Ee);const Ye=y.XpG();return y.Njj(Ye.likeProduct("unlike"))}),y.k0s()}}function ht(Pt,ue){if(1&Pt){const Ee=y.RV6();y.j41(0,"img",18),y.bIt("click",function(){y.eBV(Ee);const Ye=y.XpG();return y.Njj(Ye.likeProduct("like"))}),y.k0s()}}function Me(Pt,ue){if(1&Pt&&y.nrm(0,"app-suggestions",19),2&Pt){const Ee=y.XpG();y.Y8G("categoty",null==Ee.product?null:Ee.product.category)}}const Ue=[{path:"",component:(()=>{class Pt{constructor(Ee,oe,Ye,Je,Mt){this.sharedService=Ee,this.authService=oe,this.route=Ye,this.cd=Je,this.cartService=Mt,this.cuurentIndex=0,this.minSize=0,this.maxSize=0,this.focusedImg=this.product?.photoUrl?.[0],this.prodId="",this.userId="",this.isLiked=!1,this.userEmail=""}ngOnInit(){this.authService.checkIfLoggedIn(),this.route.queryParams.subscribe(()=>{this.getProductInfo(),this.getUserInfo()})}getUserInfo(){this.authService.loggedUser.subscribe(Ee=>{this.userId=Ee?.key,this.userEmail=Ee?.user.email})}getProductInfo(){this.route.queryParams.pipe((0,R.s)(1)).subscribe(Ee=>{this.sharedService.getProductById(Ee.prod,Ee.type).pipe((0,R.s)(1)).subscribe(oe=>{this.product=oe,this.images=oe.photoUrl,this.prodId=Ee.prod,this.cuurentIndex=0,this.focusedImg=this.product?.photoUrl?.[0],this.checkIfliked(),this.cd.detectChanges()})})}switchImage(Ee){this.cuurentIndex=Ee}checkIfliked(){this.likedProducts&&(this.isLiked=!!this.likedProducts.find(oe=>oe.key===this.prodId))}likeProduct(Ee){this.sharedService.likeUnlikeProduct(this.prodId,this.product?.category,this.userId,this.likedProducts).subscribe(()=>{this.likedProducts&&("unlike"===Ee?this.isLiked=!1:"like"===Ee&&(this.isLiked=!0),this.cd.detectChanges(),this.authService.findUser(this.userEmail).subscribe(oe=>{this.authService.loggedUser.next(oe),"unlike"===Ee?(this.likedProducts=this.likedProducts?.filter(Ye=>Ye.key!==this.prodId),this.isLiked=!1):"like"===Ee&&(this.likedProducts?.push({key:this.prodId,category:this.product?.category}),this.isLiked=!0),localStorage.setItem("currentUser",JSON.stringify(oe)),this.cd.detectChanges()}))})}scroll(Ee){"right"===Ee?this.images.unshift(this.images.pop()):this.images.push(this.images.shift())}addInCart(){this.cartService.cartOperations("add",{key:this.prodId,product:this.product})}static#e=this.\u0275fac=function(oe){return new(oe||Pt)(y.rXU(te.m),y.rXU(be.p),y.rXU(T.nX),y.rXU(y.gRc),y.rXU(fe.m))};static#t=this.\u0275cmp=y.VBU({type:Pt,selectors:[["app-single-product-page"]],decls:39,vars:12,consts:[["myImage",""],[1,"container"],[1,"content"],[1,"images"],[1,"focused-img"],["alt","img",3,"src",4,"ngIf"],[1,"otherPhotos"],["src","assets/left.png","alt","img",3,"click"],[4,"ngFor","ngForOf"],["src","assets/right.png","alt","img",3,"click"],[1,"description","payment"],["src","assets/heart-red.png","alt","img",3,"click",4,"ngIf"],["src","assets/heart.png","alt","img",3,"click",4,"ngIf"],[3,"click"],[3,"categoty",4,"ngIf"],["alt","img",3,"src"],["alt","img",3,"click","src"],["src","assets/heart-red.png","alt","img",3,"click"],["src","assets/heart.png","alt","img",3,"click"],[3,"categoty"]],template:function(oe,Ye){1&oe&&(y.nrm(0,"app-header"),y.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),y.DNE(5,ve,2,1,"img",5),y.k0s(),y.j41(6,"div",6)(7,"div")(8,"img",7),y.bIt("click",function(){return Ye.scroll("left")}),y.k0s()(),y.DNE(9,ze,2,1,"div",8),y.nI1(10,"slice"),y.j41(11,"div")(12,"img",9),y.bIt("click",function(){return Ye.scroll("right")}),y.k0s()()()(),y.j41(13,"div",10)(14,"div")(15,"p")(16,"span"),y.EFF(17,"Categoty:"),y.k0s(),y.EFF(18),y.k0s(),y.j41(19,"div"),y.DNE(20,Ct,1,0,"img",11)(21,ht,1,0,"img",12),y.k0s()(),y.j41(22,"div")(23,"p")(24,"span"),y.EFF(25,"Model:"),y.k0s(),y.EFF(26),y.k0s(),y.j41(27,"p")(28,"span"),y.EFF(29,"Description: "),y.k0s(),y.EFF(30),y.k0s(),y.j41(31,"p")(32,"span"),y.EFF(33,"Price:"),y.k0s(),y.EFF(34),y.k0s(),y.j41(35,"button",13),y.bIt("click",function(){return Ye.addInCart()}),y.EFF(36,"Add to Cart"),y.k0s()()(),y.DNE(37,Me,1,1,"app-suggestions",14),y.nrm(38,"app-footer"),y.k0s()()),2&oe&&(y.R7$(5),y.Y8G("ngIf",null==Ye.images?null:Ye.images.length),y.R7$(4),y.Y8G("ngForOf",y.i5U(10,9,Ye.images,0)),y.R7$(9),y.SpI(" ",null==Ye.product?null:Ye.product.category,""),y.R7$(2),y.Y8G("ngIf",Ye.isLiked),y.R7$(),y.Y8G("ngIf",!Ye.isLiked),y.R7$(5),y.SpI(" ",null==Ye.product?null:Ye.product.model,""),y.R7$(4),y.SpI(" ",null==Ye.product?null:Ye.product.description,""),y.R7$(4),y.SpI(" ",null==Ye.product?null:Ye.product.price,"$"),y.R7$(3),y.Y8G("ngIf",null==Ye.product?null:Ye.product.category))},dependencies:[_.Sq,_.bT,Le.l,Re.n,_e.x,_.P9],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6%;margin-top:4%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:350px;height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px;max-height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]{display:flex;gap:4px;justify-content:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child, .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{background-color:unset}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > img[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]{width:40px;height:40px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:40px;gap:20px;width:90%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:23px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:10px;word-wrap:break-word;font-size:20px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px;height:30px;border:none;text-align:center;color:#fff;background-color:#7a7af0;border-radius:3px;cursor:pointer}"],changeDetection:0})}return Pt})()}];let We=(()=>{class Pt{static#e=this.\u0275fac=function(oe){return new(oe||Pt)};static#t=this.\u0275mod=y.$C({type:Pt});static#n=this.\u0275inj=y.G2t({imports:[T.iI.forChild(Ue),T.iI]})}return Pt})(),$e=(()=>{class Pt{static#e=this.\u0275fac=function(oe){return new(oe||Pt)};static#t=this.\u0275mod=y.$C({type:Pt});static#n=this.\u0275inj=y.G2t({imports:[_.MD,Le.l,Re.n,We,_e.x]})}return Pt})()},8964:(sn,Ke,k)=>{k.d(Ke,{x:()=>be});var _=k(3550),T=k(177),R=k(4438),y=k(5435);function te(fe,Le){1&fe&&R.nrm(0,"app-card",2),2&fe&&R.Y8G("product",Le.$implicit)}let be=(()=>{class fe{constructor(Re,_e){this.service=Re,this.cd=_e,this.categoty="guitar"}ngOnInit(){this.service.getRandomProducts(this.categoty).subscribe(Re=>{this.randomSuggestions=Re,this.cd.detectChanges()})}static#e=this.\u0275fac=function(_e){return new(_e||fe)(R.rXU(y.m),R.rXU(R.gRc))};static#t=this.\u0275cmp=R.VBU({type:fe,selectors:[["app-suggestions"]],inputs:{categoty:"categoty"},standalone:!0,features:[R.aNF],decls:4,vars:1,consts:[[1,"container"],[3,"product",4,"ngFor","ngForOf"],[3,"product"]],template:function(_e,ve){1&_e&&(R.j41(0,"h2"),R.EFF(1,"You might also like:"),R.k0s(),R.j41(2,"div",0),R.DNE(3,te,1,1,"app-card",1),R.k0s()),2&_e&&(R.R7$(3),R.Y8G("ngForOf",ve.randomSuggestions))},dependencies:[_.i,T.MD,T.Sq],styles:["h2[_ngcontent-%COMP%]{color:#9191de;text-align:center}div[_ngcontent-%COMP%]{padding:3%;display:flex;gap:20px}"],changeDetection:0})}return fe})()},7827:(sn,Ke,k)=>{var _=k(345),T=k(4438),R=k(4454),y=k(6697),te=k(177),be=k(2152),fe=k(708);let Le=(()=>{class Y{transform(D){let L=new Date(D);return`${L.getDate()}/${L.getMonth()+1}/${L.getFullYear()}`}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275pipe=T.EJ8({name:"date",type:Y,pure:!0,standalone:!0})}return Y})();var Re=k(6483);function _e(Y,C){if(1&Y){const D=T.RV6();T.j41(0,"img",7),T.bIt("click",function(){T.eBV(D);const K=T.XpG(2);return T.Njj(K.showMoreItems=!K.showMoreItems)})("click",function(){T.eBV(D);const K=T.XpG(2);return T.Njj(K.changeArrow=!K.changeArrow)}),T.k0s()}}function ve(Y,C){if(1&Y){const D=T.RV6();T.j41(0,"img",8),T.bIt("click",function(){T.eBV(D);const K=T.XpG(2);return T.Njj(K.showMoreItems=!K.showMoreItems&&!K.changeArrow)})("click",function(){T.eBV(D);const K=T.XpG(2);return T.Njj(K.changeArrow=!K.changeArrow)}),T.k0s()}}function ze(Y,C){if(1&Y&&(T.j41(0,"div",9)(1,"div"),T.nrm(2,"img",10),T.k0s(),T.j41(3,"div",11)(4,"span"),T.EFF(5),T.k0s(),T.j41(6,"span"),T.EFF(7),T.k0s(),T.j41(8,"span"),T.EFF(9),T.k0s(),T.j41(10,"span"),T.EFF(11),T.k0s(),T.j41(12,"span"),T.EFF(13),T.k0s()()()),2&Y){const D=C.$implicit,L=T.XpG(2);T.R7$(2),T.Y8G("src",D.product.product.photoUrl[0],T.B4B),T.R7$(3),T.JRh(L.purchase.email?L.purchase.email:"unknown"),T.R7$(2),T.JRh(D.product.product.category),T.R7$(2),T.JRh(D.product.product.model),T.R7$(2),T.SpI("Price: ",D.product.product.price,"$"),T.R7$(2),T.SpI("Dicsount: ",D.product.product.discount,"%")}}function Ct(Y,C){if(1&Y&&(T.j41(0,"div",13)(1,"div"),T.nrm(2,"img",10),T.k0s(),T.j41(3,"div",11)(4,"span"),T.EFF(5),T.k0s(),T.j41(6,"span"),T.EFF(7),T.nI1(8,"upperCase"),T.k0s(),T.j41(9,"span"),T.EFF(10),T.nI1(11,"upperCase"),T.k0s(),T.j41(12,"span"),T.EFF(13),T.k0s(),T.j41(14,"span"),T.EFF(15),T.k0s()()()),2&Y){const D=C.$implicit,L=T.XpG(3);T.R7$(2),T.Y8G("src",D.product.product.photoUrl[0],T.B4B),T.R7$(3),T.JRh(L.purchase.email?L.purchase.email:"unknown"),T.R7$(2),T.JRh(T.bMT(8,6,D.product.product.category)),T.R7$(3),T.JRh(T.bMT(11,8,D.product.product.model)),T.R7$(3),T.SpI("Price: ",D.product.product.price,""),T.R7$(2),T.SpI("Dicsount: ",D.product.product.discount,"%")}}function ht(Y,C){if(1&Y&&(T.j41(0,"div"),T.DNE(1,Ct,16,10,"div",12),T.nI1(2,"slice"),T.k0s()),2&Y){const D=T.XpG(2);T.R7$(),T.Y8G("ngForOf",T.i5U(2,1,D.purchase.products,1))}}function Me(Y,C){if(1&Y&&(T.j41(0,"div",1)(1,"span"),T.EFF(2),T.nI1(3,"date"),T.k0s(),T.j41(4,"span"),T.EFF(5),T.k0s(),T.j41(6,"div",2),T.DNE(7,_e,1,0,"img",3)(8,ve,1,0,"img",4),T.k0s(),T.DNE(9,ze,14,6,"div",5),T.nI1(10,"slice"),T.DNE(11,ht,3,4,"div",6),T.k0s()),2&Y){const D=T.XpG();T.R7$(2),T.JRh(T.bMT(3,6,D.purchase.date)),T.R7$(3),T.SpI("total price: ",D.purchase.totalPrice,""),T.R7$(2),T.Y8G("ngIf",!D.changeArrow),T.R7$(),T.Y8G("ngIf",D.changeArrow),T.R7$(),T.Y8G("ngForOf",T.brH(10,8,D.purchase.products,0,1)),T.R7$(2),T.Y8G("ngIf",D.showMoreItems)}}let ct=(()=>{class Y{constructor(){this.showMoreItems=!1,this.changeArrow=!1}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275cmp=T.VBU({type:Y,selectors:[["app-purchased-product"]],inputs:{purchase:"purchase"},standalone:!0,features:[T.aNF],decls:1,vars:1,consts:[["class","purchase-wrapper",4,"ngIf"],[1,"purchase-wrapper"],[1,"see-more-arrow"],["src","assets/arrow-down.png","alt","img",3,"click",4,"ngIf"],["src","assets/arrow-up.png","alt","img",3,"click",4,"ngIf"],["class","purchase",4,"ngFor","ngForOf"],[4,"ngIf"],["src","assets/arrow-down.png","alt","img",3,"click"],["src","assets/arrow-up.png","alt","img",3,"click"],[1,"purchase"],["alt","img",3,"src"],[1,"grid-container"],["class","other-items purchase",4,"ngFor","ngForOf"],[1,"other-items","purchase"]],template:function(L,K){1&L&&T.DNE(0,Me,12,12,"div",0),2&L&&T.Y8G("ngIf",K.purchase)},dependencies:[te.MD,te.Sq,te.bT,te.P9,Re.P,Le],styles:[".purchase-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;background-color:#7daecf;width:490px;position:relative}.purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]{position:absolute;bottom:-8px;width:35px;height:35px;display:flex;justify-content:center;align-items:center}.purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%]{display:flex;gap:3%;border:1px solid rgb(84,145,185);width:470px;height:120px;padding:10px;margin-bottom:36px}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:13%;height:100%}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:70px;height:100%}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]{display:grid;width:100%;gap:7px;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(3,1fr);text-align:center}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{align-self:center}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-self:center;border:none;background-color:#373b44;color:#fff;width:120px;height:20px;cursor:pointer}"]})}return Y})();var Ue=k(6569);function We(Y,C){if(1&Y&&(T.j41(0,"div"),T.nrm(1,"app-purchased-product",3),T.k0s()),2&Y){const D=C.$implicit;T.R7$(),T.Y8G("purchase",D)}}function $e(Y,C){if(1&Y&&(T.j41(0,"div"),T.nrm(1,"app-purchased-product",3),T.k0s()),2&Y){const D=C.$implicit;T.R7$(),T.Y8G("purchase",D)}}let Pt=(()=>{class Y{constructor(D,L){this.authService=D,this.cd=L,this.purchasedProducts=[],this.halfLength=0,this.length=0}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.loggedUser.pipe((0,y.s)(1)).subscribe(D=>{D&&D.user.purchasedProducts?(this.user=D,this.purchasedProducts=D?.user.purchasedProducts.slice(1).sort((L,K)=>new Date(K.date).getTime()-new Date(L.date).getTime()),this.length=this.purchasedProducts.length,this.halfLength=Math.ceil(this.purchasedProducts.length/2),console.log("Purchased products:",this.purchasedProducts)):console.log("No user or purchased products found.")},D=>{console.error("Error fetching user data:",D)})}static#e=this.\u0275fac=function(L){return new(L||Y)(T.rXU(Ue.p),T.rXU(T.gRc))};static#t=this.\u0275cmp=T.VBU({type:Y,selectors:[["app-purchased-products"]],standalone:!0,features:[T.aNF],decls:9,vars:10,consts:[[1,"container"],[1,"purchased-products"],[4,"ngFor","ngForOf"],[3,"purchase"]],template:function(L,K){1&L&&(T.nrm(0,"app-header"),T.j41(1,"div",0)(2,"div",1),T.DNE(3,We,2,1,"div",2),T.nI1(4,"slice"),T.k0s(),T.j41(5,"div",1),T.DNE(6,$e,2,1,"div",2),T.nI1(7,"slice"),T.k0s()(),T.nrm(8,"app-footer")),2&L&&(T.R7$(3),T.Y8G("ngForOf",T.brH(4,2,K.purchasedProducts,0,K.halfLength)),T.R7$(3),T.Y8G("ngForOf",T.brH(7,6,K.purchasedProducts,K.halfLength,K.length)))},dependencies:[te.MD,te.Sq,te.P9,be.l,fe.n,ct],styles:[".container[_ngcontent-%COMP%]{padding:40px;display:flex;justify-content:center;gap:20px}.container[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0})}return Y})();var ue=k(9417),Ee=k(5435);function oe(Y,C){if(1&Y&&(T.j41(0,"div"),T.nrm(1,"app-purchased-product",6),T.k0s()),2&Y){const D=C.$implicit;T.R7$(),T.Y8G("purchase",D)}}function Ye(Y,C){if(1&Y&&(T.j41(0,"div"),T.nrm(1,"app-purchased-product",6),T.k0s()),2&Y){const D=C.$implicit;T.R7$(),T.Y8G("purchase",D)}}const Mt=[{path:"",redirectTo:"products",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.resolve().then(k.bind(k,513)).then(Y=>Y.LoginAndRegistrationModule)},{path:"about-us",loadComponent:()=>k.e(70).then(k.bind(k,9070)).then(Y=>Y.AboutUsComponent)},{path:"contact",loadComponent:()=>k.e(222).then(k.bind(k,3222)).then(Y=>Y.ContanctComponent)},{path:"products",loadChildren:()=>Promise.resolve().then(k.bind(k,8569)).then(Y=>Y.ProductPageModule)},{path:"profile/:id",loadChildren:()=>Promise.resolve().then(k.bind(k,1343)).then(Y=>Y.ProfileModuleModule)},{path:"single-product/:id",loadChildren:()=>Promise.resolve().then(k.bind(k,2735)).then(Y=>Y.SingleProductPageModule)},{path:"categoty/:category",loadChildren:()=>k.e(456).then(k.bind(k,9456)).then(Y=>Y.SinleCategoryPageModuleModule)},{path:"purchasedProducts",component:Pt},{path:"allPurchase",component:(()=>{class Y{constructor(D){this.service=D,this.halfLength=0,this.length=0,this.email=""}ngOnInit(){this.service.getAllClientPurchases().subscribe(D=>{if(D){const L=D.sort((K,he)=>new Date(he.date).getTime()-new Date(K.date).getTime());this.allPurchasedProducts=L,this.searched=L,this.length=D.length,this.halfLength=Math.ceil(D.length/2)}})}search(){this.email&&(this.searched=this.allPurchasedProducts?.filter(D=>D.email===this.email).sort((D,L)=>new Date(L.date).getTime()-new Date(D.date).getTime()))}static#e=this.\u0275fac=function(L){return new(L||Y)(T.rXU(Ee.m))};static#t=this.\u0275cmp=T.VBU({type:Y,selectors:[["app-all-client-purchases"]],standalone:!0,features:[T.aNF],decls:13,vars:11,consts:[[1,"search"],["type","email","placeholder","enter email",3,"ngModelChange","ngModel"],[3,"click"],[1,"container"],[1,"purchased-products"],[4,"ngFor","ngForOf"],[3,"purchase"]],template:function(L,K){1&L&&(T.nrm(0,"app-header"),T.j41(1,"div",0)(2,"input",1),T.mxI("ngModelChange",function(Se){return T.DH7(K.email,Se)||(K.email=Se),Se}),T.k0s(),T.j41(3,"button",2),T.bIt("click",function(){return K.search()}),T.EFF(4,"Search"),T.k0s()(),T.j41(5,"div",3)(6,"div",4),T.DNE(7,oe,2,1,"div",5),T.nI1(8,"slice"),T.k0s(),T.j41(9,"div",4),T.DNE(10,Ye,2,1,"div",5),T.nI1(11,"slice"),T.k0s()(),T.nrm(12,"app-footer")),2&L&&(T.R7$(2),T.R50("ngModel",K.email),T.R7$(5),T.Y8G("ngForOf",T.brH(8,3,K.searched,0,K.halfLength)),T.R7$(3),T.Y8G("ngForOf",T.brH(11,7,K.searched,K.halfLength,K.length)))},dependencies:[te.MD,te.Sq,te.P9,ue.YN,ue.me,ue.BC,ue.vS,ct,be.l,fe.n],styles:[".container[_ngcontent-%COMP%]{padding:40px;display:flex;justify-content:center;gap:20px}.container[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:10px}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:30px;gap:10px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;border:none;border-radius:4px}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#71bedb;color:#fff;cursor:pointer}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{color:green}"]})}return Y})()}];let ie=(()=>{class Y{static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275mod=T.$C({type:Y});static#n=this.\u0275inj=T.G2t({imports:[R.iI.forRoot(Mt,{useHash:!0}),R.iI]})}return Y})(),je=(()=>{class Y{constructor(){this.title="musicShop"}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275cmp=T.VBU({type:Y,selectors:[["app-root"]],decls:1,vars:0,template:function(L,K){1&L&&T.nrm(0,"router-outlet")},dependencies:[R.n3]})}return Y})();var He=k(513),Jt=k(8569),St=k(1343),un=k(2735),Lt=k(3227),at=k(9969);function Pe(Y){return new T.wOt(3e3,!1)}function Nr(Y){switch(Y.length){case 0:return new at.sf;case 1:return Y[0];default:return new at.ui(Y)}}function Zt(Y,C,D=new Map,L=new Map){const K=[],he=[];let Se=-1,Fe=null;if(C.forEach(Et=>{const wt=Et.get("offset"),mn=wt==Se,hn=mn&&Fe||new Map;Et.forEach((hr,zn)=>{let Fn=zn,Hn=hr;if("offset"!==zn)switch(Fn=Y.normalizePropertyName(Fn,K),Hn){case at.FX:Hn=D.get(zn);break;case at.kp:Hn=L.get(zn);break;default:Hn=Y.normalizeStyleValue(zn,Fn,Hn,K)}hn.set(Fn,Hn)}),mn||he.push(hn),Fe=hn,Se=wt}),K.length)throw function tr(Y){return new T.wOt(3502,!1)}();return he}function en(Y,C,D,L){switch(C){case"start":Y.onStart(()=>L(D&&Kr(D,"start",Y)));break;case"done":Y.onDone(()=>L(D&&Kr(D,"done",Y)));break;case"destroy":Y.onDestroy(()=>L(D&&Kr(D,"destroy",Y)))}}function Kr(Y,C,D){const he=Rn(Y.element,Y.triggerName,Y.fromState,Y.toState,C||Y.phaseName,D.totalTime??Y.totalTime,!!D.disabled),Se=Y._data;return null!=Se&&(he._data=Se),he}function Rn(Y,C,D,L,K="",he=0,Se){return{element:Y,triggerName:C,fromState:D,toState:L,phaseName:K,totalTime:he,disabled:!!Se}}function xr(Y,C,D){let L=Y.get(C);return L||Y.set(C,L=D),L}function ke(Y){const C=Y.indexOf(":");return[Y.substring(1,C),Y.slice(C+1)]}const we=typeof document>"u"?null:document.documentElement;function Ce(Y){const C=Y.parentNode||Y.host||null;return C===we?null:C}let Nt=null,ge=!1;function me(Y,C){for(;C;){if(C===Y)return!0;C=Ce(C)}return!1}function Dt(Y,C,D){if(D)return Array.from(Y.querySelectorAll(C));const L=Y.querySelector(C);return L?[L]:[]}let En=(()=>{class Y{validateStyleProperty(D){return function q(Y){Nt||(Nt=function se(){return typeof document<"u"?document.body:null}()||{},ge=!!Nt.style&&"WebkitAppearance"in Nt.style);let C=!0;return Nt.style&&!function Xe(Y){return"ebkit"==Y.substring(1,6)}(Y)&&(C=Y in Nt.style,!C&&ge&&(C="Webkit"+Y.charAt(0).toUpperCase()+Y.slice(1)in Nt.style)),C}(D)}matchesElement(D,L){return!1}containsElement(D,L){return me(D,L)}getParentElement(D){return Ce(D)}query(D,L,K){return Dt(D,L,K)}computeStyle(D,L,K){return K||""}animate(D,L,K,he,Se,Fe=[],Et){return new at.sf(K,he)}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275prov=T.jDH({token:Y,factory:Y.\u0275fac})}return Y})();class Bn{static#e=this.NOOP=new En}class qn{}const Wt=1e3,Qr="ng-enter",Ms="ng-leave",ls="ng-trigger",or=".ng-trigger",ss="ng-animating",Hi=".ng-animating";function ti(Y){if("number"==typeof Y)return Y;const C=Y.match(/^(-?[\.\d]+)(m?s)/);return!C||C.length<2?0:vt(parseFloat(C[1]),C[2])}function vt(Y,C){return"s"===C?Y*Wt:Y}function et(Y,C,D){return Y.hasOwnProperty("duration")?Y:function Vt(Y,C,D){let K,he=0,Se="";if("string"==typeof Y){const Fe=Y.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Fe)return C.push(Pe()),{duration:0,delay:0,easing:""};K=vt(parseFloat(Fe[1]),Fe[2]);const Et=Fe[3];null!=Et&&(he=vt(parseFloat(Et),Fe[4]));const wt=Fe[5];wt&&(Se=wt)}else K=Y;if(!D){let Fe=!1,Et=C.length;K<0&&(C.push(function Qe(){return new T.wOt(3100,!1)}()),Fe=!0),he<0&&(C.push(function ft(){return new T.wOt(3101,!1)}()),Fe=!0),Fe&&C.splice(Et,0,Pe())}return{duration:K,delay:he,easing:Se}}(Y,C,D)}function ye(Y,C,D){C.forEach((L,K)=>{const he=Sr(K);D&&!D.has(K)&&D.set(K,Y.style[he]),Y.style[he]=L})}function Ie(Y,C){C.forEach((D,L)=>{const K=Sr(L);Y.style[K]=""})}function dt(Y){return Array.isArray(Y)?1==Y.length?Y[0]:(0,at.K2)(Y):Y}const Xt=new RegExp("{{\\s*(.+?)\\s*}}","g");function $t(Y){let C=[];if("string"==typeof Y){let D;for(;D=Xt.exec(Y);)C.push(D[1]);Xt.lastIndex=0}return C}function Mn(Y,C,D){const L=`${Y}`,K=L.replace(Xt,(he,Se)=>{let Fe=C[Se];return null==Fe&&(D.push(function It(Y){return new T.wOt(3003,!1)}()),Fe=""),Fe.toString()});return K==L?Y:K}const wn=/-+([a-z0-9])/g;function Sr(Y){return Y.replace(wn,(...C)=>C[1].toUpperCase())}function qr(Y,C,D){switch(C.type){case at.If.Trigger:return Y.visitTrigger(C,D);case at.If.State:return Y.visitState(C,D);case at.If.Transition:return Y.visitTransition(C,D);case at.If.Sequence:return Y.visitSequence(C,D);case at.If.Group:return Y.visitGroup(C,D);case at.If.Animate:return Y.visitAnimate(C,D);case at.If.Keyframes:return Y.visitKeyframes(C,D);case at.If.Style:return Y.visitStyle(C,D);case at.If.Reference:return Y.visitReference(C,D);case at.If.AnimateChild:return Y.visitAnimateChild(C,D);case at.If.AnimateRef:return Y.visitAnimateRef(C,D);case at.If.Query:return Y.visitQuery(C,D);case at.If.Stagger:return Y.visitStagger(C,D);default:throw function tt(Y){return new T.wOt(3004,!1)}()}}function Si(Y,C){return window.getComputedStyle(Y)[C]}const Ir=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Dr extends qn{normalizePropertyName(C,D){return Sr(C)}normalizeStyleValue(C,D,L,K){let he="";const Se=L.toString().trim();if(Ir.has(D)&&0!==L&&"0"!==L)if("number"==typeof L)he="px";else{const Fe=L.match(/^[+-]?[\d\.]+([a-z]*)$/);Fe&&0==Fe[1].length&&K.push(function Kt(Y,C){return new T.wOt(3005,!1)}())}return Se+he}}const On="*";const Ks=new Set(["true","1"]),Yo=new Set(["false","0"]);function la(Y,C){const D=Ks.has(Y)||Yo.has(Y),L=Ks.has(C)||Yo.has(C);return(K,he)=>{let Se=Y==On||Y==K,Fe=C==On||C==he;return!Se&&D&&"boolean"==typeof K&&(Se=K?Ks.has(Y):Yo.has(Y)),!Fe&&L&&"boolean"==typeof he&&(Fe=he?Ks.has(C):Yo.has(C)),Se&&Fe}}const rr=new RegExp("s*:selfs*,?","g");function vo(Y,C,D,L){return new wr(Y).build(C,D,L)}class wr{constructor(C){this._driver=C}build(C,D,L){const K=new da(D);return this._resetContextStyleTimingState(K),qr(this,dt(C),K)}_resetContextStyleTimingState(C){C.currentQuerySelector="",C.collectedStyles=new Map,C.collectedStyles.set("",new Map),C.currentTime=0}visitTrigger(C,D){let L=D.queryCount=0,K=D.depCount=0;const he=[],Se=[];return"@"==C.name.charAt(0)&&D.errors.push(function gn(){return new T.wOt(3006,!1)}()),C.definitions.forEach(Fe=>{if(this._resetContextStyleTimingState(D),Fe.type==at.If.State){const Et=Fe,wt=Et.name;wt.toString().split(/\s*,\s*/).forEach(mn=>{Et.name=mn,he.push(this.visitState(Et,D))}),Et.name=wt}else if(Fe.type==at.If.Transition){const Et=this.visitTransition(Fe,D);L+=Et.queryCount,K+=Et.depCount,Se.push(Et)}else D.errors.push(function rn(){return new T.wOt(3007,!1)}())}),{type:at.If.Trigger,name:C.name,states:he,transitions:Se,queryCount:L,depCount:K,options:null}}visitState(C,D){const L=this.visitStyle(C.styles,D),K=C.options&&C.options.params||null;if(L.containsDynamicStyles){const he=new Set,Se=K||{};L.styles.forEach(Fe=>{Fe instanceof Map&&Fe.forEach(Et=>{$t(Et).forEach(wt=>{Se.hasOwnProperty(wt)||he.add(wt)})})}),he.size&&D.errors.push(function on(Y,C){return new T.wOt(3008,!1)}(0,he.values()))}return{type:at.If.State,name:C.name,style:L,options:K?{params:K}:null}}visitTransition(C,D){D.queryCount=0,D.depCount=0;const L=qr(this,dt(C.animation),D),K=function ur(Y,C){const D=[];return"string"==typeof Y?Y.split(/\s*,\s*/).forEach(L=>function Vo(Y,C,D){if(":"==Y[0]){const Et=function Gi(Y,C){switch(Y){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(D,L)=>parseFloat(L)>parseFloat(D);case":decrement":return(D,L)=>parseFloat(L)<parseFloat(D);default:return C.push(function Ft(Y){return new T.wOt(3016,!1)}()),"* => *"}}(Y,D);if("function"==typeof Et)return void C.push(Et);Y=Et}const L=Y.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==L||L.length<4)return D.push(function Zr(Y){return new T.wOt(3015,!1)}()),C;const K=L[1],he=L[2],Se=L[3];C.push(la(K,Se)),"<"==he[0]&&(K!=On||Se!=On)&&C.push(la(Se,K))}(L,D,C)):D.push(Y),D}(C.expr,D.errors);return{type:at.If.Transition,matchers:K,animation:L,queryCount:D.queryCount,depCount:D.depCount,options:Ui(C.options)}}visitSequence(C,D){return{type:at.If.Sequence,steps:C.steps.map(L=>qr(this,L,D)),options:Ui(C.options)}}visitGroup(C,D){const L=D.currentTime;let K=0;const he=C.steps.map(Se=>{D.currentTime=L;const Fe=qr(this,Se,D);return K=Math.max(K,D.currentTime),Fe});return D.currentTime=K,{type:at.If.Group,steps:he,options:Ui(C.options)}}visitAnimate(C,D){const L=function Pr(Y,C){if(Y.hasOwnProperty("duration"))return Y;if("number"==typeof Y)return Ii(et(Y,C).duration,0,"");const D=Y;if(D.split(/\s+/).some(he=>"{"==he.charAt(0)&&"{"==he.charAt(1))){const he=Ii(0,0,"");return he.dynamic=!0,he.strValue=D,he}const K=et(D,C);return Ii(K.duration,K.delay,K.easing)}(C.timings,D.errors);D.currentAnimateTimings=L;let K,he=C.styles?C.styles:(0,at.iF)({});if(he.type==at.If.Keyframes)K=this.visitKeyframes(he,D);else{let Se=C.styles,Fe=!1;if(!Se){Fe=!0;const wt={};L.easing&&(wt.easing=L.easing),Se=(0,at.iF)(wt)}D.currentTime+=L.duration+L.delay;const Et=this.visitStyle(Se,D);Et.isEmptyStep=Fe,K=Et}return D.currentAnimateTimings=null,{type:at.If.Animate,timings:L,style:K,options:null}}visitStyle(C,D){const L=this._makeStyleAst(C,D);return this._validateStyleAst(L,D),L}_makeStyleAst(C,D){const L=[],K=Array.isArray(C.styles)?C.styles:[C.styles];for(let Fe of K)"string"==typeof Fe?Fe===at.kp?L.push(Fe):D.errors.push(new T.wOt(3002,!1)):L.push(new Map(Object.entries(Fe)));let he=!1,Se=null;return L.forEach(Fe=>{if(Fe instanceof Map&&(Fe.has("easing")&&(Se=Fe.get("easing"),Fe.delete("easing")),!he))for(let Et of Fe.values())if(Et.toString().indexOf("{{")>=0){he=!0;break}}),{type:at.If.Style,styles:L,easing:Se,offset:C.offset,containsDynamicStyles:he,options:null}}_validateStyleAst(C,D){const L=D.currentAnimateTimings;let K=D.currentTime,he=D.currentTime;L&&he>0&&(he-=L.duration+L.delay),C.styles.forEach(Se=>{"string"!=typeof Se&&Se.forEach((Fe,Et)=>{const wt=D.collectedStyles.get(D.currentQuerySelector),mn=wt.get(Et);let hn=!0;mn&&(he!=K&&he>=mn.startTime&&K<=mn.endTime&&(D.errors.push(function Ln(Y,C,D,L,K){return new T.wOt(3010,!1)}()),hn=!1),he=mn.startTime),hn&&wt.set(Et,{startTime:he,endTime:K}),D.options&&function Ze(Y,C,D){const L=C.params||{},K=$t(Y);K.length&&K.forEach(he=>{L.hasOwnProperty(he)||D.push(function yt(Y){return new T.wOt(3001,!1)}())})}(Fe,D.options,D.errors)})})}visitKeyframes(C,D){const L={type:at.If.Keyframes,styles:[],options:null};if(!D.currentAnimateTimings)return D.errors.push(function ot(){return new T.wOt(3011,!1)}()),L;let he=0;const Se=[];let Fe=!1,Et=!1,wt=0;const mn=C.steps.map(oi=>{const Pn=this._makeStyleAst(oi,D);let Es=null!=Pn.offset?Pn.offset:function Rs(Y){if("string"==typeof Y)return null;let C=null;if(Array.isArray(Y))Y.forEach(D=>{if(D instanceof Map&&D.has("offset")){const L=D;C=parseFloat(L.get("offset")),L.delete("offset")}});else if(Y instanceof Map&&Y.has("offset")){const D=Y;C=parseFloat(D.get("offset")),D.delete("offset")}return C}(Pn.styles),ki=0;return null!=Es&&(he++,ki=Pn.offset=Es),Et=Et||ki<0||ki>1,Fe=Fe||ki<wt,wt=ki,Se.push(ki),Pn});Et&&D.errors.push(function In(){return new T.wOt(3012,!1)}()),Fe&&D.errors.push(function Kn(){return new T.wOt(3200,!1)}());const hn=C.steps.length;let hr=0;he>0&&he<hn?D.errors.push(function sr(){return new T.wOt(3202,!1)}()):0==he&&(hr=1/(hn-1));const zn=hn-1,Fn=D.currentTime,Hn=D.currentAnimateTimings,Tr=Hn.duration;return mn.forEach((oi,Pn)=>{const Es=hr>0?Pn==zn?1:hr*Pn:Se[Pn],ki=Es*Tr;D.currentTime=Fn+Hn.delay+ki,Hn.duration=ki,this._validateStyleAst(oi,D),oi.offset=Es,L.styles.push(oi)}),L}visitReference(C,D){return{type:at.If.Reference,animation:qr(this,dt(C.animation),D),options:Ui(C.options)}}visitAnimateChild(C,D){return D.depCount++,{type:at.If.AnimateChild,options:Ui(C.options)}}visitAnimateRef(C,D){return{type:at.If.AnimateRef,animation:this.visitReference(C.animation,D),options:Ui(C.options)}}visitQuery(C,D){const L=D.currentQuerySelector,K=C.options||{};D.queryCount++,D.currentQuery=C;const[he,Se]=function Lo(Y){const C=!!Y.split(/\s*,\s*/).find(D=>":self"==D);return C&&(Y=Y.replace(rr,"")),Y=Y.replace(/@\*/g,or).replace(/@\w+/g,D=>or+"-"+D.slice(1)).replace(/:animating/g,Hi),[Y,C]}(C.selector);D.currentQuerySelector=L.length?L+" "+he:he,xr(D.collectedStyles,D.currentQuerySelector,new Map);const Fe=qr(this,dt(C.animation),D);return D.currentQuery=null,D.currentQuerySelector=L,{type:at.If.Query,selector:he,limit:K.limit||0,optional:!!K.optional,includeSelf:Se,animation:Fe,originalSelector:C.selector,options:Ui(C.options)}}visitStagger(C,D){D.currentQuery||D.errors.push(function Rt(){return new T.wOt(3013,!1)}());const L="full"===C.timings?{duration:0,delay:0,easing:"full"}:et(C.timings,D.errors,!0);return{type:at.If.Stagger,animation:qr(this,dt(C.animation),D),timings:L,options:null}}}class da{constructor(C){this.errors=C,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ui(Y){return Y?(Y={...Y}).params&&(Y.params=function Qs(Y){return Y?{...Y}:null}(Y.params)):Y={},Y}function Ii(Y,C,D){return{duration:Y,delay:C,easing:D}}function Cr(Y,C,D,L,K,he,Se=null,Fe=!1){return{type:1,element:Y,keyframes:C,preStyleProps:D,postStyleProps:L,duration:K,delay:he,totalTime:K+he,easing:Se,subTimeline:Fe}}class fs{constructor(){this._map=new Map}get(C){return this._map.get(C)||[]}append(C,D){let L=this._map.get(C);L||this._map.set(C,L=[]),L.push(...D)}has(C){return this._map.has(C)}clear(){this._map.clear()}}const Uo=new RegExp(":enter","g"),Hr=new RegExp(":leave","g");function ei(Y,C,D,L,K,he=new Map,Se=new Map,Fe,Et,wt=[]){return(new os).buildKeyframes(Y,C,D,L,K,he,Se,Fe,Et,wt)}class os{buildKeyframes(C,D,L,K,he,Se,Fe,Et,wt,mn=[]){wt=wt||new fs;const hn=new si(C,D,wt,K,he,mn,[]);hn.options=Et;const hr=Et.delay?ti(Et.delay):0;hn.currentTimeline.delayNextStep(hr),hn.currentTimeline.setStyles([Se],null,hn.errors,Et),qr(this,L,hn);const zn=hn.timelines.filter(Fn=>Fn.containsAnimation());if(zn.length&&Fe.size){let Fn;for(let Hn=zn.length-1;Hn>=0;Hn--){const Tr=zn[Hn];if(Tr.element===D){Fn=Tr;break}}Fn&&!Fn.allowOnlyTimelineStyles()&&Fn.setStyles([Fe],null,hn.errors,Et)}return zn.length?zn.map(Fn=>Fn.buildKeyframes()):[Cr(D,[],[],[],0,hr,"",!1)]}visitTrigger(C,D){}visitState(C,D){}visitTransition(C,D){}visitAnimateChild(C,D){const L=D.subInstructions.get(D.element);if(L){const K=D.createSubContext(C.options),he=D.currentTimeline.currentTime,Se=this._visitSubInstructions(L,K,K.options);he!=Se&&D.transformIntoNewTimeline(Se)}D.previousNode=C}visitAnimateRef(C,D){const L=D.createSubContext(C.options);L.transformIntoNewTimeline(),this._applyAnimationRefDelays([C.options,C.animation.options],D,L),this.visitReference(C.animation,L),D.transformIntoNewTimeline(L.currentTimeline.currentTime),D.previousNode=C}_applyAnimationRefDelays(C,D,L){for(const K of C){const he=K?.delay;if(he){const Se="number"==typeof he?he:ti(Mn(he,K?.params??{},D.errors));L.delayNextStep(Se)}}}_visitSubInstructions(C,D,L){let he=D.currentTimeline.currentTime;const Se=null!=L.duration?ti(L.duration):null,Fe=null!=L.delay?ti(L.delay):null;return 0!==Se&&C.forEach(Et=>{const wt=D.appendInstructionToTimeline(Et,Se,Fe);he=Math.max(he,wt.duration+wt.delay)}),he}visitReference(C,D){D.updateOptions(C.options,!0),qr(this,C.animation,D),D.previousNode=C}visitSequence(C,D){const L=D.subContextCount;let K=D;const he=C.options;if(he&&(he.params||he.delay)&&(K=D.createSubContext(he),K.transformIntoNewTimeline(),null!=he.delay)){K.previousNode.type==at.If.Style&&(K.currentTimeline.snapshotCurrentStyles(),K.previousNode=dn);const Se=ti(he.delay);K.delayNextStep(Se)}C.steps.length&&(C.steps.forEach(Se=>qr(this,Se,K)),K.currentTimeline.applyStylesToKeyframe(),K.subContextCount>L&&K.transformIntoNewTimeline()),D.previousNode=C}visitGroup(C,D){const L=[];let K=D.currentTimeline.currentTime;const he=C.options&&C.options.delay?ti(C.options.delay):0;C.steps.forEach(Se=>{const Fe=D.createSubContext(C.options);he&&Fe.delayNextStep(he),qr(this,Se,Fe),K=Math.max(K,Fe.currentTimeline.currentTime),L.push(Fe.currentTimeline)}),L.forEach(Se=>D.currentTimeline.mergeTimelineCollectedStyles(Se)),D.transformIntoNewTimeline(K),D.previousNode=C}_visitTiming(C,D){if(C.dynamic){const L=C.strValue;return et(D.params?Mn(L,D.params,D.errors):L,D.errors)}return{duration:C.duration,delay:C.delay,easing:C.easing}}visitAnimate(C,D){const L=D.currentAnimateTimings=this._visitTiming(C.timings,D),K=D.currentTimeline;L.delay&&(D.incrementTime(L.delay),K.snapshotCurrentStyles());const he=C.style;he.type==at.If.Keyframes?this.visitKeyframes(he,D):(D.incrementTime(L.duration),this.visitStyle(he,D),K.applyStylesToKeyframe()),D.currentAnimateTimings=null,D.previousNode=C}visitStyle(C,D){const L=D.currentTimeline,K=D.currentAnimateTimings;!K&&L.hasCurrentStyleProperties()&&L.forwardFrame();const he=K&&K.easing||C.easing;C.isEmptyStep?L.applyEmptyStep(he):L.setStyles(C.styles,he,D.errors,D.options),D.previousNode=C}visitKeyframes(C,D){const L=D.currentAnimateTimings,K=D.currentTimeline.duration,he=L.duration,Fe=D.createSubContext().currentTimeline;Fe.easing=L.easing,C.styles.forEach(Et=>{Fe.forwardTime((Et.offset||0)*he),Fe.setStyles(Et.styles,Et.easing,D.errors,D.options),Fe.applyStylesToKeyframe()}),D.currentTimeline.mergeTimelineCollectedStyles(Fe),D.transformIntoNewTimeline(K+he),D.previousNode=C}visitQuery(C,D){const L=D.currentTimeline.currentTime,K=C.options||{},he=K.delay?ti(K.delay):0;he&&(D.previousNode.type===at.If.Style||0==L&&D.currentTimeline.hasCurrentStyleProperties())&&(D.currentTimeline.snapshotCurrentStyles(),D.previousNode=dn);let Se=L;const Fe=D.invokeQuery(C.selector,C.originalSelector,C.limit,C.includeSelf,!!K.optional,D.errors);D.currentQueryTotal=Fe.length;let Et=null;Fe.forEach((wt,mn)=>{D.currentQueryIndex=mn;const hn=D.createSubContext(C.options,wt);he&&hn.delayNextStep(he),wt===D.element&&(Et=hn.currentTimeline),qr(this,C.animation,hn),hn.currentTimeline.applyStylesToKeyframe(),Se=Math.max(Se,hn.currentTimeline.currentTime)}),D.currentQueryIndex=0,D.currentQueryTotal=0,D.transformIntoNewTimeline(Se),Et&&(D.currentTimeline.mergeTimelineCollectedStyles(Et),D.currentTimeline.snapshotCurrentStyles()),D.previousNode=C}visitStagger(C,D){const L=D.parentContext,K=D.currentTimeline,he=C.timings,Se=Math.abs(he.duration),Fe=Se*(D.currentQueryTotal-1);let Et=Se*D.currentQueryIndex;switch(he.duration<0?"reverse":he.easing){case"reverse":Et=Fe-Et;break;case"full":Et=L.currentStaggerTime}const mn=D.currentTimeline;Et&&mn.delayNextStep(Et);const hn=mn.currentTime;qr(this,C.animation,D),D.previousNode=C,L.currentStaggerTime=K.currentTime-hn+(K.startTime-L.currentTimeline.startTime)}}const dn={};class si{constructor(C,D,L,K,he,Se,Fe,Et){this._driver=C,this.element=D,this.subInstructions=L,this._enterClassName=K,this._leaveClassName=he,this.errors=Se,this.timelines=Fe,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=dn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Et||new ps(this._driver,D,0),Fe.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(C,D){if(!C)return;const L=C;let K=this.options;null!=L.duration&&(K.duration=ti(L.duration)),null!=L.delay&&(K.delay=ti(L.delay));const he=L.params;if(he){let Se=K.params;Se||(Se=this.options.params={}),Object.keys(he).forEach(Fe=>{(!D||!Se.hasOwnProperty(Fe))&&(Se[Fe]=Mn(he[Fe],Se,this.errors))})}}_copyOptions(){const C={};if(this.options){const D=this.options.params;if(D){const L=C.params={};Object.keys(D).forEach(K=>{L[K]=D[K]})}}return C}createSubContext(C=null,D,L){const K=D||this.element,he=new si(this._driver,K,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(K,L||0));return he.previousNode=this.previousNode,he.currentAnimateTimings=this.currentAnimateTimings,he.options=this._copyOptions(),he.updateOptions(C),he.currentQueryIndex=this.currentQueryIndex,he.currentQueryTotal=this.currentQueryTotal,he.parentContext=this,this.subContextCount++,he}transformIntoNewTimeline(C){return this.previousNode=dn,this.currentTimeline=this.currentTimeline.fork(this.element,C),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(C,D,L){const K={duration:D??C.duration,delay:this.currentTimeline.currentTime+(L??0)+C.delay,easing:""},he=new xs(this._driver,C.element,C.keyframes,C.preStyleProps,C.postStyleProps,K,C.stretchStartingKeyframe);return this.timelines.push(he),K}incrementTime(C){this.currentTimeline.forwardTime(this.currentTimeline.duration+C)}delayNextStep(C){C>0&&this.currentTimeline.delayNextStep(C)}invokeQuery(C,D,L,K,he,Se){let Fe=[];if(K&&Fe.push(this.element),C.length>0){C=(C=C.replace(Uo,"."+this._enterClassName)).replace(Hr,"."+this._leaveClassName);let wt=this._driver.query(this.element,C,1!=L);0!==L&&(wt=L<0?wt.slice(wt.length+L,wt.length):wt.slice(0,L)),Fe.push(...wt)}return!he&&0==Fe.length&&Se.push(function _t(Y){return new T.wOt(3014,!1)}()),Fe}}class ps{constructor(C,D,L,K){this._driver=C,this.element=D,this.startTime=L,this._elementTimelineStylesLookup=K,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(D),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(D,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(C){const D=1===this._keyframes.size&&this._pendingStyles.size;this.duration||D?(this.forwardTime(this.currentTime+C),D&&this.snapshotCurrentStyles()):this.startTime+=C}fork(C,D){return this.applyStylesToKeyframe(),new ps(this._driver,C,D||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(C){this.applyStylesToKeyframe(),this.duration=C,this._loadKeyframe()}_updateStyle(C,D){this._localTimelineStyles.set(C,D),this._globalTimelineStyles.set(C,D),this._styleSummary.set(C,{time:this.currentTime,value:D})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(C){C&&this._previousKeyframe.set("easing",C);for(let[D,L]of this._globalTimelineStyles)this._backFill.set(D,L||at.kp),this._currentKeyframe.set(D,at.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(C,D,L,K){D&&this._previousKeyframe.set("easing",D);const he=K&&K.params||{},Se=function Ys(Y,C){const D=new Map;let L;return Y.forEach(K=>{if("*"===K){L??=C.keys();for(let he of L)D.set(he,at.kp)}else for(let[he,Se]of K)D.set(he,Se)}),D}(C,this._globalTimelineStyles);for(let[Fe,Et]of Se){const wt=Mn(Et,he,L);this._pendingStyles.set(Fe,wt),this._localTimelineStyles.has(Fe)||this._backFill.set(Fe,this._globalTimelineStyles.get(Fe)??at.kp),this._updateStyle(Fe,wt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((C,D)=>{this._currentKeyframe.set(D,C)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((C,D)=>{this._currentKeyframe.has(D)||this._currentKeyframe.set(D,C)}))}snapshotCurrentStyles(){for(let[C,D]of this._localTimelineStyles)this._pendingStyles.set(C,D),this._updateStyle(C,D)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const C=[];for(let D in this._currentKeyframe)C.push(D);return C}mergeTimelineCollectedStyles(C){C._styleSummary.forEach((D,L)=>{const K=this._styleSummary.get(L);(!K||D.time>K.time)&&this._updateStyle(L,D.value)})}buildKeyframes(){this.applyStylesToKeyframe();const C=new Set,D=new Set,L=1===this._keyframes.size&&0===this.duration;let K=[];this._keyframes.forEach((Fe,Et)=>{const wt=new Map([...this._backFill,...Fe]);wt.forEach((mn,hn)=>{mn===at.FX?C.add(hn):mn===at.kp&&D.add(hn)}),L||wt.set("offset",Et/this.duration),K.push(wt)});const he=[...C.values()],Se=[...D.values()];if(L){const Fe=K[0],Et=new Map(Fe);Fe.set("offset",0),Et.set("offset",1),K=[Fe,Et]}return Cr(this.element,K,he,Se,this.duration,this.startTime,this.easing,!1)}}class xs extends ps{constructor(C,D,L,K,he,Se,Fe=!1){super(C,D,Se.delay),this.keyframes=L,this.preStyleProps=K,this.postStyleProps=he,this._stretchStartingKeyframe=Fe,this.timings={duration:Se.duration,delay:Se.delay,easing:Se.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let C=this.keyframes,{delay:D,duration:L,easing:K}=this.timings;if(this._stretchStartingKeyframe&&D){const he=[],Se=L+D,Fe=D/Se,Et=new Map(C[0]);Et.set("offset",0),he.push(Et);const wt=new Map(C[0]);wt.set("offset",gs(Fe)),he.push(wt);const mn=C.length-1;for(let hn=1;hn<=mn;hn++){let hr=new Map(C[hn]);const zn=hr.get("offset");hr.set("offset",gs((D+zn*L)/Se)),he.push(hr)}L=Se,D=0,K="",C=he}return Cr(this.element,C,this.preStyleProps,this.postStyleProps,L,D,K,!0)}}function gs(Y,C=3){const D=Math.pow(10,C-1);return Math.round(Y*D)/D}function Pi(Y,C,D,L,K,he,Se,Fe,Et,wt,mn,hn,hr){return{type:0,element:Y,triggerName:C,isRemovalTransition:K,fromState:D,fromStyles:he,toState:L,toStyles:Se,timelines:Fe,queriedElements:Et,preStyleProps:wt,postStyleProps:mn,totalTime:hn,errors:hr}}const es={};class zi{constructor(C,D,L){this._triggerName=C,this.ast=D,this._stateStyles=L}match(C,D,L,K){return function ts(Y,C,D,L,K){return Y.some(he=>he(C,D,L,K))}(this.ast.matchers,C,D,L,K)}buildStyles(C,D,L){let K=this._stateStyles.get("*");return void 0!==C&&(K=this._stateStyles.get(C?.toString())||K),K?K.buildStyles(D,L):new Map}build(C,D,L,K,he,Se,Fe,Et,wt,mn){const hn=[],hr=this.ast.options&&this.ast.options.params||es,Fn=this.buildStyles(L,Fe&&Fe.params||es,hn),Hn=Et&&Et.params||es,Tr=this.buildStyles(K,Hn,hn),oi=new Set,Pn=new Map,Es=new Map,ki="void"===K,bo={params:ks(Hn,hr),delay:this.ast.options?.delay},rs=mn?[]:ei(C,D,this.ast.animation,he,Se,Fn,Tr,bo,wt,hn);let as=0;return rs.forEach(cs=>{as=Math.max(cs.duration+cs.delay,as)}),hn.length?Pi(D,this._triggerName,L,K,ki,Fn,Tr,[],[],Pn,Es,as,hn):(rs.forEach(cs=>{const Ho=cs.element,uo=xr(Pn,Ho,new Set);cs.preStyleProps.forEach(qi=>uo.add(qi));const to=xr(Es,Ho,new Set);cs.postStyleProps.forEach(qi=>to.add(qi)),Ho!==D&&oi.add(Ho)}),Pi(D,this._triggerName,L,K,ki,Fn,Tr,rs,[...oi.values()],Pn,Es,as))}}function ks(Y,C){const D={...C};return Object.entries(Y).forEach(([L,K])=>{null!=K&&(D[L]=K)}),D}class ji{constructor(C,D,L){this.styles=C,this.defaultParams=D,this.normalizer=L}buildStyles(C,D){const L=new Map,K=ks(C,this.defaultParams);return this.styles.styles.forEach(he=>{"string"!=typeof he&&he.forEach((Se,Fe)=>{Se&&(Se=Mn(Se,K,D));const Et=this.normalizer.normalizePropertyName(Fe,D);Se=this.normalizer.normalizeStyleValue(Fe,Et,Se,D),L.set(Fe,Se)})}),L}}class ns{constructor(C,D,L){this.name=C,this.ast=D,this._normalizer=L,this.transitionFactories=[],this.states=new Map,D.states.forEach(K=>{this.states.set(K.name,new ji(K.style,K.options&&K.options.params||{},L))}),Eo(this.states,"true","1"),Eo(this.states,"false","0"),D.transitions.forEach(K=>{this.transitionFactories.push(new zi(C,K,this.states))}),this.fallbackTransition=function Mi(Y,C,D){return new zi(Y,{type:at.If.Transition,animation:{type:at.If.Sequence,steps:[],options:null},matchers:[(Se,Fe)=>!0],options:null,queryCount:0,depCount:0},C)}(C,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(C,D,L,K){return this.transitionFactories.find(Se=>Se.match(C,D,L,K))||null}matchStyles(C,D,L){return this.fallbackTransition.buildStyles(C,D,L)}}function Eo(Y,C,D){Y.has(C)?Y.has(D)||Y.set(D,Y.get(C)):Y.has(D)&&Y.set(C,Y.get(D))}const ao=new fs;class $i{constructor(C,D,L){this.bodyNode=C,this._driver=D,this._normalizer=L,this._animations=new Map,this._playersById=new Map,this.players=[]}register(C,D){const L=[],he=vo(this._driver,D,L,[]);if(L.length)throw function An(Y){return new T.wOt(3503,!1)}();this._animations.set(C,he)}_buildPlayer(C,D,L){const K=C.element,he=Zt(this._normalizer,C.keyframes,D,L);return this._driver.animate(K,he,C.duration,C.delay,C.easing,[],!0)}create(C,D,L={}){const K=[],he=this._animations.get(C);let Se;const Fe=new Map;if(he?(Se=ei(this._driver,D,he,Qr,Ms,new Map,new Map,L,ao,K),Se.forEach(mn=>{const hn=xr(Fe,mn.element,new Map);mn.postStyleProps.forEach(hr=>hn.set(hr,null))})):(K.push(function bn(){return new T.wOt(3300,!1)}()),Se=[]),K.length)throw function kr(Y){return new T.wOt(3504,!1)}();Fe.forEach((mn,hn)=>{mn.forEach((hr,zn)=>{mn.set(zn,this._driver.computeStyle(hn,zn,at.kp))})});const wt=Nr(Se.map(mn=>{const hn=Fe.get(mn.element);return this._buildPlayer(mn,new Map,hn)}));return this._playersById.set(C,wt),wt.onDestroy(()=>this.destroy(C)),this.players.push(wt),wt}destroy(C){const D=this._getPlayer(C);D.destroy(),this._playersById.delete(C);const L=this.players.indexOf(D);L>=0&&this.players.splice(L,1)}_getPlayer(C){const D=this._playersById.get(C);if(!D)throw function Wr(Y){return new T.wOt(3301,!1)}();return D}listen(C,D,L,K){const he=Rn(D,"","","");return en(this._getPlayer(C),L,he,K),()=>{}}command(C,D,L,K){if("register"==L)return void this.register(C,K[0]);if("create"==L)return void this.create(C,D,K[0]||{});const he=this._getPlayer(C);switch(L){case"play":he.play();break;case"pause":he.pause();break;case"reset":he.reset();break;case"restart":he.restart();break;case"finish":he.finish();break;case"init":he.init();break;case"setPosition":he.setPosition(parseFloat(K[0]));break;case"destroy":this.destroy(C)}}}const ms="ng-animate-queued",Jo="ng-animate-disabled",Ci=[],Io={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Zo={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},wi="__ng_removed";class yr{get params(){return this.options.params}constructor(C,D=""){this.namespaceId=D;const L=C&&C.hasOwnProperty("value");if(this.value=function _s(Y){return Y??null}(L?C.value:C),L){const{value:he,...Se}=C;this.options=Se}else this.options={};this.options.params||(this.options.params={})}absorbOptions(C){const D=C.params;if(D){const L=this.options.params;Object.keys(D).forEach(K=>{null==L[K]&&(L[K]=D[K])})}}}const Ls="void",ha=new yr(Ls);class Yr{constructor(C,D,L){this.id=C,this.hostElement=D,this._engine=L,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+C,Z(D,this._hostClassName)}listen(C,D,L,K){if(!this._triggers.has(D))throw function jr(Y,C){return new T.wOt(3302,!1)}();if(null==L||0==L.length)throw function Vi(Y){return new T.wOt(3303,!1)}();if(!function xi(Y){return"start"==Y||"done"==Y}(L))throw function Or(Y,C){return new T.wOt(3400,!1)}();const he=xr(this._elementListeners,C,[]),Se={name:D,phase:L,callback:K};he.push(Se);const Fe=xr(this._engine.statesByElement,C,new Map);return Fe.has(D)||(Z(C,ls),Z(C,ls+"-"+D),Fe.set(D,ha)),()=>{this._engine.afterFlush(()=>{const Et=he.indexOf(Se);Et>=0&&he.splice(Et,1),this._triggers.has(D)||Fe.delete(D)})}}register(C,D){return!this._triggers.has(C)&&(this._triggers.set(C,D),!0)}_getTrigger(C){const D=this._triggers.get(C);if(!D)throw function hs(Y){return new T.wOt(3401,!1)}();return D}trigger(C,D,L,K=!0){const he=this._getTrigger(D),Se=new ar(this.id,D,C);let Fe=this._engine.statesByElement.get(C);Fe||(Z(C,ls),Z(C,ls+"-"+D),this._engine.statesByElement.set(C,Fe=new Map));let Et=Fe.get(D);const wt=new yr(L,this.id);if(!(L&&L.hasOwnProperty("value"))&&Et&&wt.absorbOptions(Et.options),Fe.set(D,wt),Et||(Et=ha),wt.value!==Ls&&Et.value===wt.value){if(!function Zs(Y,C){const D=Object.keys(Y),L=Object.keys(C);if(D.length!=L.length)return!1;for(let K=0;K<D.length;K++){const he=D[K];if(!C.hasOwnProperty(he)||Y[he]!==C[he])return!1}return!0}(Et.params,wt.params)){const Hn=[],Tr=he.matchStyles(Et.value,Et.params,Hn),oi=he.matchStyles(wt.value,wt.params,Hn);Hn.length?this._engine.reportError(Hn):this._engine.afterFlush(()=>{Ie(C,Tr),ye(C,oi)})}return}const hr=xr(this._engine.playersByElement,C,[]);hr.forEach(Hn=>{Hn.namespaceId==this.id&&Hn.triggerName==D&&Hn.queued&&Hn.destroy()});let zn=he.matchTransition(Et.value,wt.value,C,wt.params),Fn=!1;if(!zn){if(!K)return;zn=he.fallbackTransition,Fn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:D,transition:zn,fromState:Et,toState:wt,player:Se,isFallbackTransition:Fn}),Fn||(Z(C,ms),Se.onStart(()=>{De(C,ms)})),Se.onDone(()=>{let Hn=this.players.indexOf(Se);Hn>=0&&this.players.splice(Hn,1);const Tr=this._engine.playersByElement.get(C);if(Tr){let oi=Tr.indexOf(Se);oi>=0&&Tr.splice(oi,1)}}),this.players.push(Se),hr.push(Se),Se}deregister(C){this._triggers.delete(C),this._engine.statesByElement.forEach(D=>D.delete(C)),this._elementListeners.forEach((D,L)=>{this._elementListeners.set(L,D.filter(K=>K.name!=C))})}clearElementCache(C){this._engine.statesByElement.delete(C),this._elementListeners.delete(C);const D=this._engine.playersByElement.get(C);D&&(D.forEach(L=>L.destroy()),this._engine.playersByElement.delete(C))}_signalRemovalForInnerTriggers(C,D){const L=this._engine.driver.query(C,or,!0);L.forEach(K=>{if(K[wi])return;const he=this._engine.fetchNamespacesByElement(K);he.size?he.forEach(Se=>Se.triggerLeaveAnimation(K,D,!1,!0)):this.clearElementCache(K)}),this._engine.afterFlushAnimationsDone(()=>L.forEach(K=>this.clearElementCache(K)))}triggerLeaveAnimation(C,D,L,K){const he=this._engine.statesByElement.get(C),Se=new Map;if(he){const Fe=[];if(he.forEach((Et,wt)=>{if(Se.set(wt,Et.value),this._triggers.has(wt)){const mn=this.trigger(C,wt,Ls,K);mn&&Fe.push(mn)}}),Fe.length)return this._engine.markElementAsRemoved(this.id,C,!0,D,Se),L&&Nr(Fe).onDone(()=>this._engine.processLeaveNode(C)),!0}return!1}prepareLeaveAnimationListeners(C){const D=this._elementListeners.get(C),L=this._engine.statesByElement.get(C);if(D&&L){const K=new Set;D.forEach(he=>{const Se=he.name;if(K.has(Se))return;K.add(Se);const Et=this._triggers.get(Se).fallbackTransition,wt=L.get(Se)||ha,mn=new yr(Ls),hn=new ar(this.id,Se,C);this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:Se,transition:Et,fromState:wt,toState:mn,player:hn,isFallbackTransition:!0})})}}removeNode(C,D){const L=this._engine;if(C.childElementCount&&this._signalRemovalForInnerTriggers(C,D),this.triggerLeaveAnimation(C,D,!0))return;let K=!1;if(L.totalAnimations){const he=L.players.length?L.playersByQueriedElement.get(C):[];if(he&&he.length)K=!0;else{let Se=C;for(;Se=Se.parentNode;)if(L.statesByElement.get(Se)){K=!0;break}}}if(this.prepareLeaveAnimationListeners(C),K)L.markElementAsRemoved(this.id,C,!1,D);else{const he=C[wi];(!he||he===Io)&&(L.afterFlush(()=>this.clearElementCache(C)),L.destroyInnerAnimations(C),L._onRemovalComplete(C,D))}}insertNode(C,D){Z(C,this._hostClassName)}drainQueuedTransitions(C){const D=[];return this._queue.forEach(L=>{const K=L.player;if(K.destroyed)return;const he=L.element,Se=this._elementListeners.get(he);Se&&Se.forEach(Fe=>{if(Fe.name==L.triggerName){const Et=Rn(he,L.triggerName,L.fromState.value,L.toState.value);Et._data=C,en(L.player,Fe.phase,Et,Fe.callback)}}),K.markedForDestroy?this._engine.afterFlush(()=>{K.destroy()}):D.push(L)}),this._queue=[],D.sort((L,K)=>{const he=L.transition.ast.depCount,Se=K.transition.ast.depCount;return 0==he||0==Se?he-Se:this._engine.driver.containsElement(L.element,K.element)?1:-1})}destroy(C){this.players.forEach(D=>D.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,C)}}class co{_onRemovalComplete(C,D){this.onRemovalComplete(C,D)}constructor(C,D,L,K){this.bodyNode=C,this.driver=D,this._normalizer=L,this.scheduler=K,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(he,Se)=>{}}get queuedPlayers(){const C=[];return this._namespaceList.forEach(D=>{D.players.forEach(L=>{L.queued&&C.push(L)})}),C}createNamespace(C,D){const L=new Yr(C,D,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,D)?this._balanceNamespaceList(L,D):(this.newHostElements.set(D,L),this.collectEnterElement(D)),this._namespaceLookup[C]=L}_balanceNamespaceList(C,D){const L=this._namespaceList,K=this.namespacesByHostElement;if(L.length-1>=0){let Se=!1,Fe=this.driver.getParentElement(D);for(;Fe;){const Et=K.get(Fe);if(Et){const wt=L.indexOf(Et);L.splice(wt+1,0,C),Se=!0;break}Fe=this.driver.getParentElement(Fe)}Se||L.unshift(C)}else L.push(C);return K.set(D,C),C}register(C,D){let L=this._namespaceLookup[C];return L||(L=this.createNamespace(C,D)),L}registerTrigger(C,D,L){let K=this._namespaceLookup[C];K&&K.register(D,L)&&this.totalAnimations++}destroy(C,D){C&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const L=this._fetchNamespace(C);this.namespacesByHostElement.delete(L.hostElement);const K=this._namespaceList.indexOf(L);K>=0&&this._namespaceList.splice(K,1),L.destroy(D),delete this._namespaceLookup[C]}))}_fetchNamespace(C){return this._namespaceLookup[C]}fetchNamespacesByElement(C){const D=new Set,L=this.statesByElement.get(C);if(L)for(let K of L.values())if(K.namespaceId){const he=this._fetchNamespace(K.namespaceId);he&&D.add(he)}return D}trigger(C,D,L,K){if(Co(D)){const he=this._fetchNamespace(C);if(he)return he.trigger(D,L,K),!0}return!1}insertNode(C,D,L,K){if(!Co(D))return;const he=D[wi];if(he&&he.setForRemoval){he.setForRemoval=!1,he.setForMove=!0;const Se=this.collectedLeaveElements.indexOf(D);Se>=0&&this.collectedLeaveElements.splice(Se,1)}if(C){const Se=this._fetchNamespace(C);Se&&Se.insertNode(D,L)}K&&this.collectEnterElement(D)}collectEnterElement(C){this.collectedEnterElements.push(C)}markElementAsDisabled(C,D){D?this.disabledNodes.has(C)||(this.disabledNodes.add(C),Z(C,Jo)):this.disabledNodes.has(C)&&(this.disabledNodes.delete(C),De(C,Jo))}removeNode(C,D,L){if(Co(D)){this.scheduler?.notify();const K=C?this._fetchNamespace(C):null;K?K.removeNode(D,L):this.markElementAsRemoved(C,D,!1,L);const he=this.namespacesByHostElement.get(D);he&&he.id!==C&&he.removeNode(D,L)}else this._onRemovalComplete(D,L)}markElementAsRemoved(C,D,L,K,he){this.collectedLeaveElements.push(D),D[wi]={namespaceId:C,setForRemoval:K,hasAnimation:L,removedBeforeQueried:!1,previousTriggersValues:he}}listen(C,D,L,K,he){return Co(D)?this._fetchNamespace(C).listen(D,L,K,he):()=>{}}_buildInstruction(C,D,L,K,he){return C.transition.build(this.driver,C.element,C.fromState.value,C.toState.value,L,K,C.fromState.options,C.toState.options,D,he)}destroyInnerAnimations(C){let D=this.driver.query(C,or,!0);D.forEach(L=>this.destroyActiveAnimationsForElement(L)),0!=this.playersByQueriedElement.size&&(D=this.driver.query(C,Hi,!0),D.forEach(L=>this.finishActiveQueriedAnimationOnElement(L)))}destroyActiveAnimationsForElement(C){const D=this.playersByElement.get(C);D&&D.forEach(L=>{L.queued?L.markedForDestroy=!0:L.destroy()})}finishActiveQueriedAnimationOnElement(C){const D=this.playersByQueriedElement.get(C);D&&D.forEach(L=>L.finish())}whenRenderingDone(){return new Promise(C=>{if(this.players.length)return Nr(this.players).onDone(()=>C());C()})}processLeaveNode(C){const D=C[wi];if(D&&D.setForRemoval){if(C[wi]=Io,D.namespaceId){this.destroyInnerAnimations(C);const L=this._fetchNamespace(D.namespaceId);L&&L.clearElementCache(C)}this._onRemovalComplete(C,D.setForRemoval)}C.classList?.contains(Jo)&&this.markElementAsDisabled(C,!1),this.driver.query(C,".ng-animate-disabled",!0).forEach(L=>{this.markElementAsDisabled(L,!1)})}flush(C=-1){let D=[];if(this.newHostElements.size&&(this.newHostElements.forEach((L,K)=>this._balanceNamespaceList(L,K)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let L=0;L<this.collectedEnterElements.length;L++)Z(this.collectedEnterElements[L],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const L=[];try{D=this._flushAnimations(L,C)}finally{for(let K=0;K<L.length;K++)L[K]()}}else for(let L=0;L<this.collectedLeaveElements.length;L++)this.processLeaveNode(this.collectedLeaveElements[L]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(L=>L()),this._flushFns=[],this._whenQuietFns.length){const L=this._whenQuietFns;this._whenQuietFns=[],D.length?Nr(D).onDone(()=>{L.forEach(K=>K())}):L.forEach(K=>K())}}reportError(C){throw function Nn(Y){return new T.wOt(3402,!1)}()}_flushAnimations(C,D){const L=new fs,K=[],he=new Map,Se=[],Fe=new Map,Et=new Map,wt=new Map,mn=new Set;this.disabledNodes.forEach(N=>{mn.add(N);const B=this.driver.query(N,".ng-animate-queued",!0);for(let de=0;de<B.length;de++)mn.add(B[de])});const hn=this.bodyNode,hr=Array.from(this.statesByElement.keys()),zn=x(hr,this.collectedEnterElements),Fn=new Map;let Hn=0;zn.forEach((N,B)=>{const de=Qr+Hn++;Fn.set(B,de),N.forEach(nt=>Z(nt,de))});const Tr=[],oi=new Set,Pn=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const B=this.collectedLeaveElements[N],de=B[wi];de&&de.setForRemoval&&(Tr.push(B),oi.add(B),de.hasAnimation?this.driver.query(B,".ng-star-inserted",!0).forEach(nt=>oi.add(nt)):Pn.add(B))}const Es=new Map,ki=x(hr,Array.from(oi));ki.forEach((N,B)=>{const de=Ms+Hn++;Es.set(B,de),N.forEach(nt=>Z(nt,de))}),C.push(()=>{zn.forEach((N,B)=>{const de=Fn.get(B);N.forEach(nt=>De(nt,de))}),ki.forEach((N,B)=>{const de=Es.get(B);N.forEach(nt=>De(nt,de))}),Tr.forEach(N=>{this.processLeaveNode(N)})});const bo=[],rs=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(D).forEach(de=>{const nt=de.player,Ot=de.element;if(bo.push(nt),this.collectedEnterElements.length){const ir=Ot[wi];if(ir&&ir.setForMove){if(ir.previousTriggersValues&&ir.previousTriggersValues.has(de.triggerName)){const Vr=ir.previousTriggersValues.get(de.triggerName),pr=this.statesByElement.get(de.element);if(pr&&pr.has(de.triggerName)){const Yt=pr.get(de.triggerName);Yt.value=Vr,pr.set(de.triggerName,Yt)}}return void nt.destroy()}}const fn=!hn||!this.driver.containsElement(hn,Ot),mr=Es.get(Ot),xn=Fn.get(Ot),Gn=this._buildInstruction(de,L,xn,mr,fn);if(Gn.errors&&Gn.errors.length)return void rs.push(Gn);if(fn)return nt.onStart(()=>Ie(Ot,Gn.fromStyles)),nt.onDestroy(()=>ye(Ot,Gn.toStyles)),void K.push(nt);if(de.isFallbackTransition)return nt.onStart(()=>Ie(Ot,Gn.fromStyles)),nt.onDestroy(()=>ye(Ot,Gn.toStyles)),void K.push(nt);const fr=[];Gn.timelines.forEach(ir=>{ir.stretchStartingKeyframe=!0,this.disabledNodes.has(ir.element)||fr.push(ir)}),Gn.timelines=fr,L.append(Ot,Gn.timelines),Se.push({instruction:Gn,player:nt,element:Ot}),Gn.queriedElements.forEach(ir=>xr(Fe,ir,[]).push(nt)),Gn.preStyleProps.forEach((ir,Vr)=>{if(ir.size){let pr=Et.get(Vr);pr||Et.set(Vr,pr=new Set),ir.forEach((Yt,vn)=>pr.add(vn))}}),Gn.postStyleProps.forEach((ir,Vr)=>{let pr=wt.get(Vr);pr||wt.set(Vr,pr=new Set),ir.forEach((Yt,vn)=>pr.add(vn))})});if(rs.length){const N=[];rs.forEach(B=>{N.push(function zt(Y,C){return new T.wOt(3505,!1)}())}),bo.forEach(B=>B.destroy()),this.reportError(N)}const as=new Map,cs=new Map;Se.forEach(N=>{const B=N.element;L.has(B)&&(cs.set(B,B),this._beforeAnimationBuild(N.player.namespaceId,N.instruction,as))}),K.forEach(N=>{const B=N.element;this._getPreviousPlayers(B,!1,N.namespaceId,N.triggerName,null).forEach(nt=>{xr(as,B,[]).push(nt),nt.destroy()})});const Ho=Tr.filter(N=>fi(N,Et,wt)),uo=new Map;W(uo,this.driver,Pn,wt,at.kp).forEach(N=>{fi(N,Et,wt)&&Ho.push(N)});const qi=new Map;zn.forEach((N,B)=>{W(qi,this.driver,new Set(N),Et,at.FX)}),Ho.forEach(N=>{const B=uo.get(N),de=qi.get(N);uo.set(N,new Map([...B?.entries()??[],...de?.entries()??[]]))});const Os=[],P=[],X={};Se.forEach(N=>{const{element:B,player:de,instruction:nt}=N;if(L.has(B)){if(mn.has(B))return de.onDestroy(()=>ye(B,nt.toStyles)),de.disabled=!0,de.overrideTotalTime(nt.totalTime),void K.push(de);let Ot=X;if(cs.size>1){let mr=B;const xn=[];for(;mr=mr.parentNode;){const Gn=cs.get(mr);if(Gn){Ot=Gn;break}xn.push(mr)}xn.forEach(Gn=>cs.set(Gn,Ot))}const fn=this._buildAnimation(de.namespaceId,nt,as,he,qi,uo);if(de.setRealPlayer(fn),Ot===X)Os.push(de);else{const mr=this.playersByElement.get(Ot);mr&&mr.length&&(de.parentPlayer=Nr(mr)),K.push(de)}}else Ie(B,nt.fromStyles),de.onDestroy(()=>ye(B,nt.toStyles)),P.push(de),mn.has(B)&&K.push(de)}),P.forEach(N=>{const B=he.get(N.element);if(B&&B.length){const de=Nr(B);N.setRealPlayer(de)}}),K.forEach(N=>{N.parentPlayer?N.syncPlayerEvents(N.parentPlayer):N.destroy()});for(let N=0;N<Tr.length;N++){const B=Tr[N],de=B[wi];if(De(B,Ms),de&&de.hasAnimation)continue;let nt=[];if(Fe.size){let fn=Fe.get(B);fn&&fn.length&&nt.push(...fn);let mr=this.driver.query(B,Hi,!0);for(let xn=0;xn<mr.length;xn++){let Gn=Fe.get(mr[xn]);Gn&&Gn.length&&nt.push(...Gn)}}const Ot=nt.filter(fn=>!fn.destroyed);Ot.length?pn(this,B,Ot):this.processLeaveNode(B)}return Tr.length=0,Os.forEach(N=>{this.players.push(N),N.onDone(()=>{N.destroy();const B=this.players.indexOf(N);this.players.splice(B,1)}),N.play()}),Os}afterFlush(C){this._flushFns.push(C)}afterFlushAnimationsDone(C){this._whenQuietFns.push(C)}_getPreviousPlayers(C,D,L,K,he){let Se=[];if(D){const Fe=this.playersByQueriedElement.get(C);Fe&&(Se=Fe)}else{const Fe=this.playersByElement.get(C);if(Fe){const Et=!he||he==Ls;Fe.forEach(wt=>{wt.queued||!Et&&wt.triggerName!=K||Se.push(wt)})}}return(L||K)&&(Se=Se.filter(Fe=>!(L&&L!=Fe.namespaceId||K&&K!=Fe.triggerName))),Se}_beforeAnimationBuild(C,D,L){const he=D.element,Se=D.isRemovalTransition?void 0:C,Fe=D.isRemovalTransition?void 0:D.triggerName;for(const Et of D.timelines){const wt=Et.element,mn=wt!==he,hn=xr(L,wt,[]);this._getPreviousPlayers(wt,mn,Se,Fe,D.toState).forEach(zn=>{const Fn=zn.getRealPlayer();Fn.beforeDestroy&&Fn.beforeDestroy(),zn.destroy(),hn.push(zn)})}Ie(he,D.fromStyles)}_buildAnimation(C,D,L,K,he,Se){const Fe=D.triggerName,Et=D.element,wt=[],mn=new Set,hn=new Set,hr=D.timelines.map(Fn=>{const Hn=Fn.element;mn.add(Hn);const Tr=Hn[wi];if(Tr&&Tr.removedBeforeQueried)return new at.sf(Fn.duration,Fn.delay);const oi=Hn!==Et,Pn=function Jn(Y){const C=[];return ys(Y,C),C}((L.get(Hn)||Ci).map(as=>as.getRealPlayer())).filter(as=>!!as.element&&as.element===Hn),Es=he.get(Hn),ki=Se.get(Hn),bo=Zt(this._normalizer,Fn.keyframes,Es,ki),rs=this._buildPlayer(Fn,bo,Pn);if(Fn.subTimeline&&K&&hn.add(Hn),oi){const as=new ar(C,Fe,Hn);as.setRealPlayer(rs),wt.push(as)}return rs});wt.forEach(Fn=>{xr(this.playersByQueriedElement,Fn.element,[]).push(Fn),Fn.onDone(()=>function ds(Y,C,D){let L=Y.get(C);if(L){if(L.length){const K=L.indexOf(D);L.splice(K,1)}0==L.length&&Y.delete(C)}return L}(this.playersByQueriedElement,Fn.element,Fn))}),mn.forEach(Fn=>Z(Fn,ss));const zn=Nr(hr);return zn.onDestroy(()=>{mn.forEach(Fn=>De(Fn,ss)),ye(Et,D.toStyles)}),hn.forEach(Fn=>{xr(K,Fn,[]).push(zn)}),zn}_buildPlayer(C,D,L){return D.length>0?this.driver.animate(C.element,D,C.duration,C.delay,C.easing,L):new at.sf(C.duration,C.delay)}}class ar{constructor(C,D,L){this.namespaceId=C,this.triggerName=D,this.element=L,this._player=new at.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(C){this._containsRealPlayer||(this._player=C,this._queuedCallbacks.forEach((D,L)=>{D.forEach(K=>en(C,L,void 0,K))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(C.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(C){this.totalTime=C}syncPlayerEvents(C){const D=this._player;D.triggerCallback&&C.onStart(()=>D.triggerCallback("start")),C.onDone(()=>this.finish()),C.onDestroy(()=>this.destroy())}_queueEvent(C,D){xr(this._queuedCallbacks,C,[]).push(D)}onDone(C){this.queued&&this._queueEvent("done",C),this._player.onDone(C)}onStart(C){this.queued&&this._queueEvent("start",C),this._player.onStart(C)}onDestroy(C){this.queued&&this._queueEvent("destroy",C),this._player.onDestroy(C)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(C){this.queued||this._player.setPosition(C)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(C){const D=this._player;D.triggerCallback&&D.triggerCallback(C)}}function Co(Y){return Y&&1===Y.nodeType}function H(Y,C){const D=Y.style.display;return Y.style.display=C??"none",D}function W(Y,C,D,L,K){const he=[];D.forEach(Et=>he.push(H(Et)));const Se=[];L.forEach((Et,wt)=>{const mn=new Map;Et.forEach(hn=>{const hr=C.computeStyle(wt,hn,K);mn.set(hn,hr),(!hr||0==hr.length)&&(wt[wi]=Zo,Se.push(wt))}),Y.set(wt,mn)});let Fe=0;return D.forEach(Et=>H(Et,he[Fe++])),Se}function x(Y,C){const D=new Map;if(Y.forEach(Fe=>D.set(Fe,[])),0==C.length)return D;const K=new Set(C),he=new Map;function Se(Fe){if(!Fe)return 1;let Et=he.get(Fe);if(Et)return Et;const wt=Fe.parentNode;return Et=D.has(wt)?wt:K.has(wt)?1:Se(wt),he.set(Fe,Et),Et}return C.forEach(Fe=>{const Et=Se(Fe);1!==Et&&D.get(Et).push(Fe)}),D}function Z(Y,C){Y.classList?.add(C)}function De(Y,C){Y.classList?.remove(C)}function pn(Y,C,D){Nr(D).onDone(()=>Y.processLeaveNode(C))}function ys(Y,C){for(let D=0;D<Y.length;D++){const L=Y[D];L instanceof at.ui?ys(L.players,C):C.push(L)}}function fi(Y,C,D){const L=D.get(Y);if(!L)return!1;let K=C.get(Y);return K?L.forEach(he=>K.add(he)):C.set(Y,L),D.delete(Y),!0}class Ts{constructor(C,D,L,K){this._driver=D,this._normalizer=L,this._triggerCache={},this.onRemovalComplete=(he,Se)=>{},this._transitionEngine=new co(C.body,D,L,K),this._timelineEngine=new $i(C.body,D,L),this._transitionEngine.onRemovalComplete=(he,Se)=>this.onRemovalComplete(he,Se)}registerTrigger(C,D,L,K,he){const Se=C+"-"+K;let Fe=this._triggerCache[Se];if(!Fe){const Et=[],mn=vo(this._driver,he,Et,[]);if(Et.length)throw function Yn(Y,C){return new T.wOt(3404,!1)}();Fe=function Bo(Y,C,D){return new ns(Y,C,D)}(K,mn,this._normalizer),this._triggerCache[Se]=Fe}this._transitionEngine.registerTrigger(D,K,Fe)}register(C,D){this._transitionEngine.register(C,D)}destroy(C,D){this._transitionEngine.destroy(C,D)}onInsert(C,D,L,K){this._transitionEngine.insertNode(C,D,L,K)}onRemove(C,D,L){this._transitionEngine.removeNode(C,D,L)}disableAnimations(C,D){this._transitionEngine.markElementAsDisabled(C,D)}process(C,D,L,K){if("@"==L.charAt(0)){const[he,Se]=ke(L);this._timelineEngine.command(he,D,Se,K)}else this._transitionEngine.trigger(C,D,L,K)}listen(C,D,L,K,he){if("@"==L.charAt(0)){const[Se,Fe]=ke(L);return this._timelineEngine.listen(Se,D,Fe,he)}return this._transitionEngine.listen(C,D,L,K,he)}flush(C=-1){this._transitionEngine.flush(C)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(C){this._transitionEngine.afterFlushAnimationsDone(C)}}class jo{static#e=this.initialStylesByElement=new WeakMap;constructor(C,D,L){this._element=C,this._startStyles=D,this._endStyles=L,this._state=0;let K=jo.initialStylesByElement.get(C);K||jo.initialStylesByElement.set(C,K=new Map),this._initialStyles=K}start(){this._state<1&&(this._startStyles&&ye(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ye(this._element,this._initialStyles),this._endStyles&&(ye(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(jo.initialStylesByElement.delete(this._element),this._startStyles&&(Ie(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ie(this._element,this._endStyles),this._endStyles=null),ye(this._element,this._initialStyles),this._state=3)}}function fa(Y){let C=null;return Y.forEach((D,L)=>{(function Jr(Y){return"display"===Y||"position"===Y})(L)&&(C=C||new Map,C.set(L,D))}),C}class Da{constructor(C,D,L,K){this.element=C,this.keyframes=D,this.options=L,this._specialStyles=K,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=L.duration,this._delay=L.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(C=>C()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const C=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,C,this.options),this._finalKeyframe=C.length?C[C.length-1]:new Map;const D=()=>this._onFinish();this.domPlayer.addEventListener("finish",D),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",D)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(C){const D=[];return C.forEach(L=>{D.push(Object.fromEntries(L))}),D}_triggerWebAnimation(C,D,L){return C.animate(this._convertKeyframesToObject(D),L)}onStart(C){this._originalOnStartFns.push(C),this._onStartFns.push(C)}onDone(C){this._originalOnDoneFns.push(C),this._onDoneFns.push(C)}onDestroy(C){this._onDestroyFns.push(C)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(C=>C()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(C=>C()),this._onDestroyFns=[])}setPosition(C){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=C*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const C=new Map;this.hasStarted()&&this._finalKeyframe.forEach((L,K)=>{"offset"!==K&&C.set(K,this._finished?L:Si(this.element,K))}),this.currentSnapshot=C}triggerCallback(C){const D="start"===C?this._onStartFns:this._onDoneFns;D.forEach(L=>L()),D.length=0}}class pa{validateStyleProperty(C){return!0}validateAnimatableStyleProperty(C){return!0}matchesElement(C,D){return!1}containsElement(C,D){return me(C,D)}getParentElement(C){return Ce(C)}query(C,D,L){return Dt(C,D,L)}computeStyle(C,D,L){return Si(C,D)}animate(C,D,L,K,he,Se=[]){const Et={duration:L,delay:K,fill:0==K?"both":"forwards"};he&&(Et.easing=he);const wt=new Map,mn=Se.filter(zn=>zn instanceof Da);(function Er(Y,C){return 0===Y||0===C})(L,K)&&mn.forEach(zn=>{zn.currentSnapshot.forEach((Fn,Hn)=>wt.set(Hn,Fn))});let hn=function cn(Y){return Y.length?Y[0]instanceof Map?Y:Y.map(C=>new Map(Object.entries(C))):[]}(D).map(zn=>new Map(zn));hn=function ui(Y,C,D){if(D.size&&C.length){let L=C[0],K=[];if(D.forEach((he,Se)=>{L.has(Se)||K.push(Se),L.set(Se,he)}),K.length)for(let he=1;he<C.length;he++){let Se=C[he];K.forEach(Fe=>Se.set(Fe,Si(Y,Fe)))}}return C}(C,hn,wt);const hr=function Ta(Y,C){let D=null,L=null;return Array.isArray(C)&&C.length?(D=fa(C[0]),C.length>1&&(L=fa(C[C.length-1]))):C instanceof Map&&(D=fa(C)),D||L?new jo(Y,D,L):null}(C,hn);return new Da(C,hn,Et,hr)}}const Ua="@.disabled";class ga{constructor(C,D,L,K){this.namespaceId=C,this.delegate=D,this.engine=L,this._onDestroy=K,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(C){this.delegate.destroyNode?.(C)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(C,D){return this.delegate.createElement(C,D)}createComment(C){return this.delegate.createComment(C)}createText(C){return this.delegate.createText(C)}appendChild(C,D){this.delegate.appendChild(C,D),this.engine.onInsert(this.namespaceId,D,C,!1)}insertBefore(C,D,L,K=!0){this.delegate.insertBefore(C,D,L),this.engine.onInsert(this.namespaceId,D,C,K)}removeChild(C,D,L){this.engine.onRemove(this.namespaceId,D,this.delegate)}selectRootElement(C,D){return this.delegate.selectRootElement(C,D)}parentNode(C){return this.delegate.parentNode(C)}nextSibling(C){return this.delegate.nextSibling(C)}setAttribute(C,D,L,K){this.delegate.setAttribute(C,D,L,K)}removeAttribute(C,D,L){this.delegate.removeAttribute(C,D,L)}addClass(C,D){this.delegate.addClass(C,D)}removeClass(C,D){this.delegate.removeClass(C,D)}setStyle(C,D,L,K){this.delegate.setStyle(C,D,L,K)}removeStyle(C,D,L){this.delegate.removeStyle(C,D,L)}setProperty(C,D,L){"@"==D.charAt(0)&&D==Ua?this.disableAnimations(C,!!L):this.delegate.setProperty(C,D,L)}setValue(C,D){this.delegate.setValue(C,D)}listen(C,D,L){return this.delegate.listen(C,D,L)}disableAnimations(C,D){this.engine.disableAnimations(C,D)}}class $o extends ga{constructor(C,D,L,K,he){super(D,L,K,he),this.factory=C,this.namespaceId=D}setProperty(C,D,L){"@"==D.charAt(0)?"."==D.charAt(1)&&D==Ua?this.disableAnimations(C,L=void 0===L||!!L):this.engine.process(this.namespaceId,C,D.slice(1),L):this.delegate.setProperty(C,D,L)}listen(C,D,L){if("@"==D.charAt(0)){const K=function wo(Y){switch(Y){case"body":return document.body;case"document":return document;case"window":return window;default:return Y}}(C);let he=D.slice(1),Se="";return"@"!=he.charAt(0)&&([he,Se]=function Aa(Y){const C=Y.indexOf(".");return[Y.substring(0,C),Y.slice(C+1)]}(he)),this.engine.listen(this.namespaceId,K,he,Se,Fe=>{this.factory.scheduleListenerCallback(Fe._data||-1,L,Fe)})}return this.delegate.listen(C,D,L)}}class ea{constructor(C,D,L){this.delegate=C,this.engine=D,this._zone=L,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,D.onRemovalComplete=(K,he)=>{const Se=he?.parentNode(K);Se&&he.removeChild(Se,K)}}createRenderer(C,D){const K=this.delegate.createRenderer(C,D);if(!C||!D?.data?.animation){const wt=this._rendererCache;let mn=wt.get(K);return mn||(mn=new ga("",K,this.engine,()=>wt.delete(K)),wt.set(K,mn)),mn}const he=D.id,Se=D.id+"-"+this._currentId;this._currentId++,this.engine.register(Se,C);const Fe=wt=>{Array.isArray(wt)?wt.forEach(Fe):this.engine.registerTrigger(he,Se,C,wt.name,wt)};return D.data.animation.forEach(Fe),new $o(this,Se,K,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(C,D,L){if(C>=0&&C<this._microtaskId)return void this._zone.run(()=>D(L));const K=this._animationCallbacksBuffer;0==K.length&&queueMicrotask(()=>{this._zone.run(()=>{K.forEach(he=>{const[Se,Fe]=he;Se(Fe)}),this._animationCallbacksBuffer=[]})}),K.push([D,L])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const ni=[{provide:qn,useFactory:function lr(){return new Dr}},{provide:Ts,useClass:(()=>{class Y extends Ts{constructor(D,L,K){super(D,L,K,(0,T.WQX)(T.An2,{optional:!0}))}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(L){return new(L||Y)(T.KVO(te.qQ),T.KVO(Bn),T.KVO(qn))};static#t=this.\u0275prov=T.jDH({token:Y,factory:Y.\u0275fac})}return Y})()},{provide:T._9s,useFactory:function Gr(Y,C,D){return new ea(Y,C,D)},deps:[_.B7,Ts,T.SKi]}],Ri=[{provide:Bn,useFactory:()=>new pa},{provide:T.bc$,useValue:"BrowserAnimations"},...ni],Oi=[{provide:Bn,useClass:En},{provide:T.bc$,useValue:"NoopAnimations"},...ni];let ma=(()=>{class Y{static withConfig(D){return{ngModule:Y,providers:D.disableAnimations?Oi:Ri}}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275mod=T.$C({type:Y});static#n=this.\u0275inj=T.G2t({providers:Ri,imports:[_.Bb]})}return Y})();var Tc=k(8964),Do=k(4390);let Ao=(()=>{class Y{static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275mod=T.$C({type:Y,bootstrap:[je]});static#n=this.\u0275inj=T.G2t({providers:[{provide:T.hnV,useFactory:D=>()=>D.getAllTypeOfProduct().subscribe(),deps:[Do.L],multi:!0}],imports:[te.MD,_.Bb,ie,He.LoginAndRegistrationModule,Jt.ProductPageModule,St.ProfileModuleModule,un.SingleProductPageModule,ma,Lt.K,Tc.x,be.l]})}return Y})();_.sG().bootstrapModule(Ao).catch(Y=>console.error(Y))},4412:(sn,Ke,k)=>{k.d(Ke,{t:()=>T});var _=k(1413);class T extends _.B{constructor(y){super(),this._value=y}get value(){return this.getValue()}_subscribe(y){const te=super._subscribe(y);return!te.closed&&y.next(this._value),te}getValue(){const{hasError:y,thrownError:te,_value:be}=this;if(y)throw te;return this._throwIfClosed(),be}next(y){super.next(this._value=y)}}},1985:(sn,Ke,k)=>{k.d(Ke,{c:()=>Le});var _=k(7707),T=k(8359),R=k(3494),y=k(1203),te=k(1026),be=k(8071),fe=k(9786);let Le=(()=>{class ze{constructor(ht){ht&&(this._subscribe=ht)}lift(ht){const Me=new ze;return Me.source=this,Me.operator=ht,Me}subscribe(ht,Me,ct){const Ue=function ve(ze){return ze&&ze instanceof _.vU||function _e(ze){return ze&&(0,be.T)(ze.next)&&(0,be.T)(ze.error)&&(0,be.T)(ze.complete)}(ze)&&(0,T.Uv)(ze)}(ht)?ht:new _.Ms(ht,Me,ct);return(0,fe.Y)(()=>{const{operator:We,source:$e}=this;Ue.add(We?We.call(Ue,$e):$e?this._subscribe(Ue):this._trySubscribe(Ue))}),Ue}_trySubscribe(ht){try{return this._subscribe(ht)}catch(Me){ht.error(Me)}}forEach(ht,Me){return new(Me=Re(Me))((ct,Ue)=>{const We=new _.Ms({next:$e=>{try{ht($e)}catch(Pt){Ue(Pt),We.unsubscribe()}},error:Ue,complete:ct});this.subscribe(We)})}_subscribe(ht){var Me;return null===(Me=this.source)||void 0===Me?void 0:Me.subscribe(ht)}[R.s](){return this}pipe(...ht){return(0,y.m)(ht)(this)}toPromise(ht){return new(ht=Re(ht))((Me,ct)=>{let Ue;this.subscribe(We=>Ue=We,We=>ct(We),()=>Me(Ue))})}}return ze.create=Ct=>new ze(Ct),ze})();function Re(ze){var Ct;return null!==(Ct=ze??te.$.Promise)&&void 0!==Ct?Ct:Promise}},1413:(sn,Ke,k)=>{k.d(Ke,{B:()=>fe});var _=k(1985),T=k(8359);const y=(0,k(1853).L)(Re=>function(){Re(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=k(7908),be=k(9786);let fe=(()=>{class Re extends _.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ve){const ze=new Le(this,this);return ze.operator=ve,ze}_throwIfClosed(){if(this.closed)throw new y}next(ve){(0,be.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ze of this.currentObservers)ze.next(ve)}})}error(ve){(0,be.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ve;const{observers:ze}=this;for(;ze.length;)ze.shift().error(ve)}})}complete(){(0,be.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ve}=this;for(;ve.length;)ve.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ve;return(null===(ve=this.observers)||void 0===ve?void 0:ve.length)>0}_trySubscribe(ve){return this._throwIfClosed(),super._trySubscribe(ve)}_subscribe(ve){return this._throwIfClosed(),this._checkFinalizedStatuses(ve),this._innerSubscribe(ve)}_innerSubscribe(ve){const{hasError:ze,isStopped:Ct,observers:ht}=this;return ze||Ct?T.Kn:(this.currentObservers=null,ht.push(ve),new T.yU(()=>{this.currentObservers=null,(0,te.o)(ht,ve)}))}_checkFinalizedStatuses(ve){const{hasError:ze,thrownError:Ct,isStopped:ht}=this;ze?ve.error(Ct):ht&&ve.complete()}asObservable(){const ve=new _.c;return ve.source=this,ve}}return Re.create=(_e,ve)=>new Le(_e,ve),Re})();class Le extends fe{constructor(_e,ve){super(),this.destination=_e,this.source=ve}next(_e){var ve,ze;null===(ze=null===(ve=this.destination)||void 0===ve?void 0:ve.next)||void 0===ze||ze.call(ve,_e)}error(_e){var ve,ze;null===(ze=null===(ve=this.destination)||void 0===ve?void 0:ve.error)||void 0===ze||ze.call(ve,_e)}complete(){var _e,ve;null===(ve=null===(_e=this.destination)||void 0===_e?void 0:_e.complete)||void 0===ve||ve.call(_e)}_subscribe(_e){var ve,ze;return null!==(ze=null===(ve=this.source)||void 0===ve?void 0:ve.subscribe(_e))&&void 0!==ze?ze:T.Kn}}},7707:(sn,Ke,k)=>{k.d(Ke,{Ms:()=>ct,vU:()=>ze});var _=k(8071),T=k(8359),R=k(1026),y=k(5334),te=k(5343);const be=Re("C",void 0,void 0);function Re(ue,Ee,oe){return{kind:ue,value:Ee,error:oe}}var _e=k(9270),ve=k(9786);class ze extends T.yU{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,T.Uv)(Ee)&&Ee.add(this)):this.destination=Pt}static create(Ee,oe,Ye){return new ct(Ee,oe,Ye)}next(Ee){this.isStopped?$e(function Le(ue){return Re("N",ue,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?$e(function fe(ue){return Re("E",void 0,ue)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?$e(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ct=Function.prototype.bind;function ht(ue,Ee){return Ct.call(ue,Ee)}class Me{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:oe}=this;if(oe.next)try{oe.next(Ee)}catch(Ye){Ue(Ye)}}error(Ee){const{partialObserver:oe}=this;if(oe.error)try{oe.error(Ee)}catch(Ye){Ue(Ye)}else Ue(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(oe){Ue(oe)}}}class ct extends ze{constructor(Ee,oe,Ye){let Je;if(super(),(0,_.T)(Ee)||!Ee)Je={next:Ee??void 0,error:oe??void 0,complete:Ye??void 0};else{let Mt;this&&R.$.useDeprecatedNextContext?(Mt=Object.create(Ee),Mt.unsubscribe=()=>this.unsubscribe(),Je={next:Ee.next&&ht(Ee.next,Mt),error:Ee.error&&ht(Ee.error,Mt),complete:Ee.complete&&ht(Ee.complete,Mt)}):Je=Ee}this.destination=new Me(Je)}}function Ue(ue){R.$.useDeprecatedSynchronousErrorHandling?(0,ve.l)(ue):(0,y.m)(ue)}function $e(ue,Ee){const{onStoppedNotification:oe}=R.$;oe&&_e.f.setTimeout(()=>oe(ue,Ee))}const Pt={closed:!0,next:te.l,error:function We(ue){throw ue},complete:te.l}},8359:(sn,Ke,k)=>{k.d(Ke,{Kn:()=>be,yU:()=>te,Uv:()=>fe});var _=k(8071);const R=(0,k(1853).L)(Re=>function(ve){Re(this),this.message=ve?`${ve.length} errors occurred during unsubscription:\n${ve.map((ze,Ct)=>`${Ct+1}) ${ze.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ve});var y=k(7908);class te{constructor(_e){this.initialTeardown=_e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let _e;if(!this.closed){this.closed=!0;const{_parentage:ve}=this;if(ve)if(this._parentage=null,Array.isArray(ve))for(const ht of ve)ht.remove(this);else ve.remove(this);const{initialTeardown:ze}=this;if((0,_.T)(ze))try{ze()}catch(ht){_e=ht instanceof R?ht.errors:[ht]}const{_finalizers:Ct}=this;if(Ct){this._finalizers=null;for(const ht of Ct)try{Le(ht)}catch(Me){_e=_e??[],Me instanceof R?_e=[..._e,...Me.errors]:_e.push(Me)}}if(_e)throw new R(_e)}}add(_e){var ve;if(_e&&_e!==this)if(this.closed)Le(_e);else{if(_e instanceof te){if(_e.closed||_e._hasParent(this))return;_e._addParent(this)}(this._finalizers=null!==(ve=this._finalizers)&&void 0!==ve?ve:[]).push(_e)}}_hasParent(_e){const{_parentage:ve}=this;return ve===_e||Array.isArray(ve)&&ve.includes(_e)}_addParent(_e){const{_parentage:ve}=this;this._parentage=Array.isArray(ve)?(ve.push(_e),ve):ve?[ve,_e]:_e}_removeParent(_e){const{_parentage:ve}=this;ve===_e?this._parentage=null:Array.isArray(ve)&&(0,y.o)(ve,_e)}remove(_e){const{_finalizers:ve}=this;ve&&(0,y.o)(ve,_e),_e instanceof te&&_e._removeParent(this)}}te.EMPTY=(()=>{const Re=new te;return Re.closed=!0,Re})();const be=te.EMPTY;function fe(Re){return Re instanceof te||Re&&"closed"in Re&&(0,_.T)(Re.remove)&&(0,_.T)(Re.add)&&(0,_.T)(Re.unsubscribe)}function Le(Re){(0,_.T)(Re)?Re():Re.unsubscribe()}},1026:(sn,Ke,k)=>{k.d(Ke,{$:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(sn,Ke,k)=>{k.d(Ke,{x:()=>te});var _=k(6365),R=k(9326),y=k(8455);function te(...be){return function T(){return(0,_.U)(1)}()((0,y.H)(be,(0,R.lI)(be)))}},983:(sn,Ke,k)=>{k.d(Ke,{w:()=>T});const T=new(k(1985).c)(te=>te.complete())},7468:(sn,Ke,k)=>{k.d(Ke,{p:()=>Le});var _=k(1985),T=k(3073),R=k(8750),y=k(9326),te=k(4360),be=k(6450),fe=k(8496);function Le(...Re){const _e=(0,y.ms)(Re),{args:ve,keys:ze}=(0,T.D)(Re),Ct=new _.c(ht=>{const{length:Me}=ve;if(!Me)return void ht.complete();const ct=new Array(Me);let Ue=Me,We=Me;for(let $e=0;$e<Me;$e++){let Pt=!1;(0,R.Tg)(ve[$e]).subscribe((0,te._)(ht,ue=>{Pt||(Pt=!0,We--),ct[$e]=ue},()=>Ue--,void 0,()=>{(!Ue||!Pt)&&(We||ht.next(ze?(0,fe.e)(ze,ct):ct),ht.complete())}))}});return _e?Ct.pipe((0,be.I)(_e)):Ct}},8455:(sn,Ke,k)=>{k.d(Ke,{H:()=>Ee});var _=k(8750),T=k(941),R=k(6745),be=k(1985),Le=k(4761),Re=k(8071),_e=k(5225);function ze(oe,Ye){if(!oe)throw new Error("Iterable cannot be null");return new be.c(Je=>{(0,_e.N)(Je,Ye,()=>{const Mt=oe[Symbol.asyncIterator]();(0,_e.N)(Je,Ye,()=>{Mt.next().then(ie=>{ie.done?Je.complete():Je.next(ie.value)})},0,!0)})})}var Ct=k(5055),ht=k(9858),Me=k(7441),ct=k(5397),Ue=k(7953),We=k(591),$e=k(5196);function Ee(oe,Ye){return Ye?function ue(oe,Ye){if(null!=oe){if((0,Ct.l)(oe))return function y(oe,Ye){return(0,_.Tg)(oe).pipe((0,R._)(Ye),(0,T.Q)(Ye))}(oe,Ye);if((0,Me.X)(oe))return function fe(oe,Ye){return new be.c(Je=>{let Mt=0;return Ye.schedule(function(){Mt===oe.length?Je.complete():(Je.next(oe[Mt++]),Je.closed||this.schedule())})})}(oe,Ye);if((0,ht.y)(oe))return function te(oe,Ye){return(0,_.Tg)(oe).pipe((0,R._)(Ye),(0,T.Q)(Ye))}(oe,Ye);if((0,Ue.T)(oe))return ze(oe,Ye);if((0,ct.x)(oe))return function ve(oe,Ye){return new be.c(Je=>{let Mt;return(0,_e.N)(Je,Ye,()=>{Mt=oe[Le.l](),(0,_e.N)(Je,Ye,()=>{let ie,je;try{({value:ie,done:je}=Mt.next())}catch(He){return void Je.error(He)}je?Je.complete():Je.next(ie)},0,!0)}),()=>(0,Re.T)(Mt?.return)&&Mt.return()})}(oe,Ye);if((0,$e.U)(oe))return function Pt(oe,Ye){return ze((0,$e.C)(oe),Ye)}(oe,Ye)}throw(0,We.L)(oe)}(oe,Ye):(0,_.Tg)(oe)}},8750:(sn,Ke,k)=>{k.d(Ke,{Tg:()=>Ct});var _=k(1635),T=k(7441),R=k(9858),y=k(1985),te=k(5055),be=k(7953),fe=k(591),Le=k(5397),Re=k(5196),_e=k(8071),ve=k(5334),ze=k(3494);function Ct(ue){if(ue instanceof y.c)return ue;if(null!=ue){if((0,te.l)(ue))return function ht(ue){return new y.c(Ee=>{const oe=ue[ze.s]();if((0,_e.T)(oe.subscribe))return oe.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ue);if((0,T.X)(ue))return function Me(ue){return new y.c(Ee=>{for(let oe=0;oe<ue.length&&!Ee.closed;oe++)Ee.next(ue[oe]);Ee.complete()})}(ue);if((0,R.y)(ue))return function ct(ue){return new y.c(Ee=>{ue.then(oe=>{Ee.closed||(Ee.next(oe),Ee.complete())},oe=>Ee.error(oe)).then(null,ve.m)})}(ue);if((0,be.T)(ue))return We(ue);if((0,Le.x)(ue))return function Ue(ue){return new y.c(Ee=>{for(const oe of ue)if(Ee.next(oe),Ee.closed)return;Ee.complete()})}(ue);if((0,Re.U)(ue))return function $e(ue){return We((0,Re.C)(ue))}(ue)}throw(0,fe.L)(ue)}function We(ue){return new y.c(Ee=>{(function Pt(ue,Ee){var oe,Ye,Je,Mt;return(0,_.sH)(this,void 0,void 0,function*(){try{for(oe=(0,_.xN)(ue);!(Ye=yield oe.next()).done;)if(Ee.next(Ye.value),Ee.closed)return}catch(ie){Je={error:ie}}finally{try{Ye&&!Ye.done&&(Mt=oe.return)&&(yield Mt.call(oe))}finally{if(Je)throw Je.error}}Ee.complete()})})(ue,Ee).catch(oe=>Ee.error(oe))})}},7673:(sn,Ke,k)=>{k.d(Ke,{of:()=>R});var _=k(9326),T=k(8455);function R(...y){const te=(0,_.lI)(y);return(0,T.H)(y,te)}},4360:(sn,Ke,k)=>{k.d(Ke,{_:()=>T});var _=k(7707);function T(y,te,be,fe,Le){return new R(y,te,be,fe,Le)}class R extends _.vU{constructor(te,be,fe,Le,Re,_e){super(te),this.onFinalize=Re,this.shouldUnsubscribe=_e,this._next=be?function(ve){try{be(ve)}catch(ze){te.error(ze)}}:super._next,this._error=Le?function(ve){try{Le(ve)}catch(ze){te.error(ze)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(ve){te.error(ve)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:be}=this;super.unsubscribe(),!be&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},9437:(sn,Ke,k)=>{k.d(Ke,{W:()=>y});var _=k(8750),T=k(4360),R=k(9974);function y(te){return(0,R.N)((be,fe)=>{let _e,Le=null,Re=!1;Le=be.subscribe((0,T._)(fe,void 0,void 0,ve=>{_e=(0,_.Tg)(te(ve,y(te)(be))),Le?(Le.unsubscribe(),Le=null,_e.subscribe(fe)):Re=!0})),Re&&(Le.unsubscribe(),Le=null,_e.subscribe(fe))})}},274:(sn,Ke,k)=>{k.d(Ke,{H:()=>R});var _=k(1397),T=k(8071);function R(y,te){return(0,T.T)(te)?(0,_.Z)(y,te,1):(0,_.Z)(y,1)}},9901:(sn,Ke,k)=>{k.d(Ke,{U:()=>R});var _=k(9974),T=k(4360);function R(y){return(0,_.N)((te,be)=>{let fe=!1;te.subscribe((0,T._)(be,Le=>{fe=!0,be.next(Le)},()=>{fe||be.next(y),be.complete()}))})}},5964:(sn,Ke,k)=>{k.d(Ke,{p:()=>R});var _=k(9974),T=k(4360);function R(y,te){return(0,_.N)((be,fe)=>{let Le=0;be.subscribe((0,T._)(fe,Re=>y.call(te,Re,Le++)&&fe.next(Re)))})}},980:(sn,Ke,k)=>{k.d(Ke,{j:()=>T});var _=k(9974);function T(R){return(0,_.N)((y,te)=>{try{y.subscribe(te)}finally{te.add(R)}})}},1594:(sn,Ke,k)=>{k.d(Ke,{$:()=>fe});var _=k(9350),T=k(5964),R=k(6697),y=k(9901),te=k(3774),be=k(3669);function fe(Le,Re){const _e=arguments.length>=2;return ve=>ve.pipe(Le?(0,T.p)((ze,Ct)=>Le(ze,Ct,ve)):be.D,(0,R.s)(1),_e?(0,y.U)(Re):(0,te.v)(()=>new _.G))}},6354:(sn,Ke,k)=>{k.d(Ke,{T:()=>R});var _=k(9974),T=k(4360);function R(y,te){return(0,_.N)((be,fe)=>{let Le=0;be.subscribe((0,T._)(fe,Re=>{fe.next(y.call(te,Re,Le++))}))})}},6365:(sn,Ke,k)=>{k.d(Ke,{U:()=>R});var _=k(1397),T=k(3669);function R(y=1/0){return(0,_.Z)(T.D,y)}},1397:(sn,Ke,k)=>{k.d(Ke,{Z:()=>Le});var _=k(6354),T=k(8750),R=k(9974),y=k(5225),te=k(4360),fe=k(8071);function Le(Re,_e,ve=1/0){return(0,fe.T)(_e)?Le((ze,Ct)=>(0,_.T)((ht,Me)=>_e(ze,ht,Ct,Me))((0,T.Tg)(Re(ze,Ct))),ve):("number"==typeof _e&&(ve=_e),(0,R.N)((ze,Ct)=>function be(Re,_e,ve,ze,Ct,ht,Me,ct){const Ue=[];let We=0,$e=0,Pt=!1;const ue=()=>{Pt&&!Ue.length&&!We&&_e.complete()},Ee=Ye=>We<ze?oe(Ye):Ue.push(Ye),oe=Ye=>{ht&&_e.next(Ye),We++;let Je=!1;(0,T.Tg)(ve(Ye,$e++)).subscribe((0,te._)(_e,Mt=>{Ct?.(Mt),ht?Ee(Mt):_e.next(Mt)},()=>{Je=!0},void 0,()=>{if(Je)try{for(We--;Ue.length&&We<ze;){const Mt=Ue.shift();Me?(0,y.N)(_e,Me,()=>oe(Mt)):oe(Mt)}ue()}catch(Mt){_e.error(Mt)}}))};return Re.subscribe((0,te._)(_e,Ee,()=>{Pt=!0,ue()})),()=>{ct?.()}}(ze,Ct,Re,ve)))}},941:(sn,Ke,k)=>{k.d(Ke,{Q:()=>y});var _=k(5225),T=k(9974),R=k(4360);function y(te,be=0){return(0,T.N)((fe,Le)=>{fe.subscribe((0,R._)(Le,Re=>(0,_.N)(Le,te,()=>Le.next(Re),be),()=>(0,_.N)(Le,te,()=>Le.complete(),be),Re=>(0,_.N)(Le,te,()=>Le.error(Re),be)))})}},2816:(sn,Ke,k)=>{k.d(Ke,{S:()=>y});var _=k(9974),T=k(4360);function y(te,be){return(0,_.N)(function R(te,be,fe,Le,Re){return(_e,ve)=>{let ze=fe,Ct=be,ht=0;_e.subscribe((0,T._)(ve,Me=>{const ct=ht++;Ct=ze?te(Ct,Me,ct):(ze=!0,Me),Le&&ve.next(Ct)},Re&&(()=>{ze&&ve.next(Ct),ve.complete()})))}}(te,be,arguments.length>=2,!0))}},9172:(sn,Ke,k)=>{k.d(Ke,{Z:()=>y});var _=k(8793),T=k(9326),R=k(9974);function y(...te){const be=(0,T.lI)(te);return(0,R.N)((fe,Le)=>{(be?(0,_.x)(te,fe,be):(0,_.x)(te,fe)).subscribe(Le)})}},6745:(sn,Ke,k)=>{k.d(Ke,{_:()=>T});var _=k(9974);function T(R,y=0){return(0,_.N)((te,be)=>{be.add(R.schedule(()=>te.subscribe(be),y))})}},5558:(sn,Ke,k)=>{k.d(Ke,{n:()=>y});var _=k(8750),T=k(9974),R=k(4360);function y(te,be){return(0,T.N)((fe,Le)=>{let Re=null,_e=0,ve=!1;const ze=()=>ve&&!Re&&Le.complete();fe.subscribe((0,R._)(Le,Ct=>{Re?.unsubscribe();let ht=0;const Me=_e++;(0,_.Tg)(te(Ct,Me)).subscribe(Re=(0,R._)(Le,ct=>Le.next(be?be(Ct,ct,Me,ht++):ct),()=>{Re=null,ze()}))},()=>{ve=!0,ze()}))})}},6697:(sn,Ke,k)=>{k.d(Ke,{s:()=>y});var _=k(983),T=k(9974),R=k(4360);function y(te){return te<=0?()=>_.w:(0,T.N)((be,fe)=>{let Le=0;be.subscribe((0,R._)(fe,Re=>{++Le<=te&&(fe.next(Re),te<=Le&&fe.complete())}))})}},8141:(sn,Ke,k)=>{k.d(Ke,{M:()=>te});var _=k(8071),T=k(9974),R=k(4360),y=k(3669);function te(be,fe,Le){const Re=(0,_.T)(be)||fe||Le?{next:be,error:fe,complete:Le}:be;return Re?(0,T.N)((_e,ve)=>{var ze;null===(ze=Re.subscribe)||void 0===ze||ze.call(Re);let Ct=!0;_e.subscribe((0,R._)(ve,ht=>{var Me;null===(Me=Re.next)||void 0===Me||Me.call(Re,ht),ve.next(ht)},()=>{var ht;Ct=!1,null===(ht=Re.complete)||void 0===ht||ht.call(Re),ve.complete()},ht=>{var Me;Ct=!1,null===(Me=Re.error)||void 0===Me||Me.call(Re,ht),ve.error(ht)},()=>{var ht,Me;Ct&&(null===(ht=Re.unsubscribe)||void 0===ht||ht.call(Re)),null===(Me=Re.finalize)||void 0===Me||Me.call(Re)}))}):y.D}},3774:(sn,Ke,k)=>{k.d(Ke,{v:()=>y});var _=k(9350),T=k(9974),R=k(4360);function y(be=te){return(0,T.N)((fe,Le)=>{let Re=!1;fe.subscribe((0,R._)(Le,_e=>{Re=!0,Le.next(_e)},()=>Re?Le.complete():Le.error(be())))})}function te(){return new _.G}},6780:(sn,Ke,k)=>{k.d(Ke,{R:()=>te});var _=k(8359);class T extends _.yU{constructor(fe,Le){super()}schedule(fe,Le=0){return this}}const R={setInterval(be,fe,...Le){const{delegate:Re}=R;return Re?.setInterval?Re.setInterval(be,fe,...Le):setInterval(be,fe,...Le)},clearInterval(be){const{delegate:fe}=R;return(fe?.clearInterval||clearInterval)(be)},delegate:void 0};var y=k(7908);class te extends T{constructor(fe,Le){super(fe,Le),this.scheduler=fe,this.work=Le,this.pending=!1}schedule(fe,Le=0){var Re;if(this.closed)return this;this.state=fe;const _e=this.id,ve=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(ve,_e,Le)),this.pending=!0,this.delay=Le,this.id=null!==(Re=this.id)&&void 0!==Re?Re:this.requestAsyncId(ve,this.id,Le),this}requestAsyncId(fe,Le,Re=0){return R.setInterval(fe.flush.bind(fe,this),Re)}recycleAsyncId(fe,Le,Re=0){if(null!=Re&&this.delay===Re&&!1===this.pending)return Le;null!=Le&&R.clearInterval(Le)}execute(fe,Le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Re=this._execute(fe,Le);if(Re)return Re;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,Le){let _e,Re=!1;try{this.work(fe)}catch(ve){Re=!0,_e=ve||new Error("Scheduled action threw falsy error")}if(Re)return this.unsubscribe(),_e}unsubscribe(){if(!this.closed){const{id:fe,scheduler:Le}=this,{actions:Re}=Le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,y.o)(Re,this),null!=fe&&(this.id=this.recycleAsyncId(Le,fe,null)),this.delay=null,super.unsubscribe()}}}},9687:(sn,Ke,k)=>{k.d(Ke,{q:()=>R});var _=k(6129);class T{constructor(te,be=T.now){this.schedulerActionCtor=te,this.now=be}schedule(te,be=0,fe){return new this.schedulerActionCtor(this,te).schedule(fe,be)}}T.now=_.U.now;class R extends T{constructor(te,be=T.now){super(te,be),this.actions=[],this._active=!1}flush(te){const{actions:be}=this;if(this._active)return void be.push(te);let fe;this._active=!0;do{if(fe=te.execute(te.state,te.delay))break}while(te=be.shift());if(this._active=!1,fe){for(;te=be.shift();)te.unsubscribe();throw fe}}}},3236:(sn,Ke,k)=>{k.d(Ke,{E:()=>R,b:()=>y});var _=k(6780);const R=new(k(9687).q)(_.R),y=R},6129:(sn,Ke,k)=>{k.d(Ke,{U:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},9270:(sn,Ke,k)=>{k.d(Ke,{f:()=>_});const _={setTimeout(T,R,...y){const{delegate:te}=_;return te?.setTimeout?te.setTimeout(T,R,...y):setTimeout(T,R,...y)},clearTimeout(T){const{delegate:R}=_;return(R?.clearTimeout||clearTimeout)(T)},delegate:void 0}},4761:(sn,Ke,k)=>{k.d(Ke,{l:()=>T});const T=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(sn,Ke,k)=>{k.d(Ke,{s:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(sn,Ke,k)=>{k.d(Ke,{G:()=>T});const T=(0,k(1853).L)(R=>function(){R(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(sn,Ke,k)=>{k.d(Ke,{R0:()=>be,lI:()=>te,ms:()=>y});var _=k(8071),T=k(9470);function R(fe){return fe[fe.length-1]}function y(fe){return(0,_.T)(R(fe))?fe.pop():void 0}function te(fe){return(0,T.m)(R(fe))?fe.pop():void 0}function be(fe,Le){return"number"==typeof R(fe)?fe.pop():Le}},3073:(sn,Ke,k)=>{k.d(Ke,{D:()=>te});const{isArray:_}=Array,{getPrototypeOf:T,prototype:R,keys:y}=Object;function te(fe){if(1===fe.length){const Le=fe[0];if(_(Le))return{args:Le,keys:null};if(function be(fe){return fe&&"object"==typeof fe&&T(fe)===R}(Le)){const Re=y(Le);return{args:Re.map(_e=>Le[_e]),keys:Re}}}return{args:fe,keys:null}}},7908:(sn,Ke,k)=>{function _(T,R){if(T){const y=T.indexOf(R);0<=y&&T.splice(y,1)}}k.d(Ke,{o:()=>_})},1853:(sn,Ke,k)=>{function _(T){const y=T(te=>{Error.call(te),te.stack=(new Error).stack});return y.prototype=Object.create(Error.prototype),y.prototype.constructor=y,y}k.d(Ke,{L:()=>_})},8496:(sn,Ke,k)=>{function _(T,R){return T.reduce((y,te,be)=>(y[te]=R[be],y),{})}k.d(Ke,{e:()=>_})},9786:(sn,Ke,k)=>{k.d(Ke,{Y:()=>R,l:()=>y});var _=k(1026);let T=null;function R(te){if(_.$.useDeprecatedSynchronousErrorHandling){const be=!T;if(be&&(T={errorThrown:!1,error:null}),te(),be){const{errorThrown:fe,error:Le}=T;if(T=null,fe)throw Le}}else te()}function y(te){_.$.useDeprecatedSynchronousErrorHandling&&T&&(T.errorThrown=!0,T.error=te)}},5225:(sn,Ke,k)=>{function _(T,R,y,te=0,be=!1){const fe=R.schedule(function(){y(),be?T.add(this.schedule(null,te)):this.unsubscribe()},te);if(T.add(fe),!be)return fe}k.d(Ke,{N:()=>_})},3669:(sn,Ke,k)=>{function _(T){return T}k.d(Ke,{D:()=>_})},7441:(sn,Ke,k)=>{k.d(Ke,{X:()=>_});const _=T=>T&&"number"==typeof T.length&&"function"!=typeof T},7953:(sn,Ke,k)=>{k.d(Ke,{T:()=>T});var _=k(8071);function T(R){return Symbol.asyncIterator&&(0,_.T)(R?.[Symbol.asyncIterator])}},8071:(sn,Ke,k)=>{function _(T){return"function"==typeof T}k.d(Ke,{T:()=>_})},5055:(sn,Ke,k)=>{k.d(Ke,{l:()=>R});var _=k(3494),T=k(8071);function R(y){return(0,T.T)(y[_.s])}},5397:(sn,Ke,k)=>{k.d(Ke,{x:()=>R});var _=k(4761),T=k(8071);function R(y){return(0,T.T)(y?.[_.l])}},9858:(sn,Ke,k)=>{k.d(Ke,{y:()=>T});var _=k(8071);function T(R){return(0,_.T)(R?.then)}},5196:(sn,Ke,k)=>{k.d(Ke,{C:()=>R,U:()=>y});var _=k(1635),T=k(8071);function R(te){return(0,_.AQ)(this,arguments,function*(){const fe=te.getReader();try{for(;;){const{value:Le,done:Re}=yield(0,_.N3)(fe.read());if(Re)return yield(0,_.N3)(void 0);yield yield(0,_.N3)(Le)}}finally{fe.releaseLock()}})}function y(te){return(0,T.T)(te?.getReader)}},9470:(sn,Ke,k)=>{k.d(Ke,{m:()=>T});var _=k(8071);function T(R){return R&&(0,_.T)(R.schedule)}},9974:(sn,Ke,k)=>{k.d(Ke,{N:()=>R,S:()=>T});var _=k(8071);function T(y){return(0,_.T)(y?.lift)}function R(y){return te=>{if(T(te))return te.lift(function(be){try{return y(be,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(sn,Ke,k)=>{k.d(Ke,{I:()=>y});var _=k(6354);const{isArray:T}=Array;function y(te){return(0,_.T)(be=>function R(te,be){return T(be)?te(...be):te(be)}(te,be))}},5343:(sn,Ke,k)=>{function _(){}k.d(Ke,{l:()=>_})},1203:(sn,Ke,k)=>{k.d(Ke,{F:()=>T,m:()=>R});var _=k(3669);function T(...y){return R(y)}function R(y){return 0===y.length?_.D:1===y.length?y[0]:function(be){return y.reduce((fe,Le)=>Le(fe),be)}}},5334:(sn,Ke,k)=>{k.d(Ke,{m:()=>R});var _=k(1026),T=k(9270);function R(y){T.f.setTimeout(()=>{const{onUnhandledError:te}=_.$;if(!te)throw y;te(y)})}},591:(sn,Ke,k)=>{function _(T){return new TypeError(`You provided ${null!==T&&"object"==typeof T?"an invalid object":`'${T}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ke,{L:()=>_})},9969:(sn,Ke,k)=>{k.d(Ke,{FX:()=>Mt,If:()=>_,K2:()=>be,hZ:()=>R,i0:()=>y,iF:()=>fe,kY:()=>_e,kp:()=>T,sf:()=>Ye,ui:()=>Je,wk:()=>Le});var _=function(ie){return ie[ie.State=0]="State",ie[ie.Transition=1]="Transition",ie[ie.Sequence=2]="Sequence",ie[ie.Group=3]="Group",ie[ie.Animate=4]="Animate",ie[ie.Keyframes=5]="Keyframes",ie[ie.Style=6]="Style",ie[ie.Trigger=7]="Trigger",ie[ie.Reference=8]="Reference",ie[ie.AnimateChild=9]="AnimateChild",ie[ie.AnimateRef=10]="AnimateRef",ie[ie.Query=11]="Query",ie[ie.Stagger=12]="Stagger",ie}(_||{});const T="*";function R(ie,je){return{type:_.Trigger,name:ie,definitions:je,options:{}}}function y(ie,je=null){return{type:_.Animate,styles:je,timings:ie}}function be(ie,je=null){return{type:_.Sequence,steps:ie,options:je}}function fe(ie){return{type:_.Style,styles:ie,offset:null}}function Le(ie,je,He){return{type:_.State,name:ie,styles:je,options:He}}function _e(ie,je,He=null){return{type:_.Transition,expr:ie,animation:je,options:He}}class Ye{constructor(je=0,He=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=je+He}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(je=>je()),this._onDoneFns=[])}onStart(je){this._originalOnStartFns.push(je),this._onStartFns.push(je)}onDone(je){this._originalOnDoneFns.push(je),this._onDoneFns.push(je)}onDestroy(je){this._onDestroyFns.push(je)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(je=>je()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(je=>je()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(je){this._position=this.totalTime?je*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(je){const He="start"==je?this._onStartFns:this._onDoneFns;He.forEach(Jt=>Jt()),He.length=0}}class Je{constructor(je){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=je;let He=0,Jt=0,St=0;const un=this.players.length;0==un?queueMicrotask(()=>this._onFinish()):this.players.forEach(Lt=>{Lt.onDone(()=>{++He==un&&this._onFinish()}),Lt.onDestroy(()=>{++Jt==un&&this._onDestroy()}),Lt.onStart(()=>{++St==un&&this._onStart()})}),this.totalTime=this.players.reduce((Lt,at)=>Math.max(Lt,at.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(je=>je()),this._onDoneFns=[])}init(){this.players.forEach(je=>je.init())}onStart(je){this._onStartFns.push(je)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(je=>je()),this._onStartFns=[])}onDone(je){this._onDoneFns.push(je)}onDestroy(je){this._onDestroyFns.push(je)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(je=>je.play())}pause(){this.players.forEach(je=>je.pause())}restart(){this.players.forEach(je=>je.restart())}finish(){this._onFinish(),this.players.forEach(je=>je.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(je=>je.destroy()),this._onDestroyFns.forEach(je=>je()),this._onDestroyFns=[])}reset(){this.players.forEach(je=>je.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(je){const He=je*this.totalTime;this.players.forEach(Jt=>{const St=Jt.totalTime?Math.min(1,He/Jt.totalTime):1;Jt.setPosition(St)})}getPosition(){const je=this.players.reduce((He,Jt)=>null===He||Jt.totalTime>He.totalTime?Jt:He,null);return null!=je?je.getPosition():0}beforeDestroy(){this.players.forEach(je=>{je.beforeDestroy&&je.beforeDestroy()})}triggerCallback(je){const He="start"==je?this._onStartFns:this._onDoneFns;He.forEach(Jt=>Jt()),He.length=0}}const Mt="!"},177:(sn,Ke,k)=>{k.d(Ke,{AJ:()=>gs,Jj:()=>rr,MD:()=>xs,N0:()=>ao,P9:()=>si,QT:()=>R,Sm:()=>ct,Sq:()=>wn,VF:()=>te,Vy:()=>Bi,Xr:()=>Bo,YU:()=>Ze,ZD:()=>y,_b:()=>ye,aZ:()=>We,bT:()=>Er,fw:()=>Ue,hb:()=>ht,hj:()=>Re,qQ:()=>fe});var _=k(4438);let T=null;function R(){return T}function y(P){T??=P}class te{}const fe=new _.nKC("");let Le=(()=>{class P{historyGo(N){throw new Error("")}static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275prov=_.jDH({token:P,factory:()=>(0,_.WQX)(_e),providedIn:"platform"})}return P})();const Re=new _.nKC("");let _e=(()=>{class P extends Le{constructor(){super(),this._doc=(0,_.WQX)(fe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(N){const B=R().getGlobalEventTarget(this._doc,"window");return B.addEventListener("popstate",N,!1),()=>B.removeEventListener("popstate",N)}onHashChange(N){const B=R().getGlobalEventTarget(this._doc,"window");return B.addEventListener("hashchange",N,!1),()=>B.removeEventListener("hashchange",N)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(N){this._location.pathname=N}pushState(N,B,de){this._history.pushState(N,B,de)}replaceState(N,B,de){this._history.replaceState(N,B,de)}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275prov=_.jDH({token:P,factory:()=>new P,providedIn:"platform"})}return P})();function ve(P,X){if(0==P.length)return X;if(0==X.length)return P;let N=0;return P.endsWith("/")&&N++,X.startsWith("/")&&N++,2==N?P+X.substring(1):1==N?P+X:P+"/"+X}function ze(P){const X=P.match(/#|\?|$/),N=X&&X.index||P.length;return P.slice(0,N-("/"===P[N-1]?1:0))+P.slice(N)}function Ct(P){return P&&"?"!==P[0]?"?"+P:P}let ht=(()=>{class P{historyGo(N){throw new Error("")}static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275prov=_.jDH({token:P,factory:()=>(0,_.WQX)(ct),providedIn:"root"})}return P})();const Me=new _.nKC("");let ct=(()=>{class P extends ht{constructor(N,B){super(),this._platformLocation=N,this._removeListenerFns=[],this._baseHref=B??this._platformLocation.getBaseHrefFromDOM()??(0,_.WQX)(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return ve(this._baseHref,N)}path(N=!1){const B=this._platformLocation.pathname+Ct(this._platformLocation.search),de=this._platformLocation.hash;return de&&N?`${B}${de}`:B}pushState(N,B,de,nt){const Ot=this.prepareExternalUrl(de+Ct(nt));this._platformLocation.pushState(N,B,Ot)}replaceState(N,B,de,nt){const Ot=this.prepareExternalUrl(de+Ct(nt));this._platformLocation.replaceState(N,B,Ot)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}static#e=this.\u0275fac=function(B){return new(B||P)(_.KVO(Le),_.KVO(Me,8))};static#t=this.\u0275prov=_.jDH({token:P,factory:P.\u0275fac,providedIn:"root"})}return P})(),Ue=(()=>{class P extends ht{constructor(N,B){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=B&&(this._baseHref=B)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){const B=this._platformLocation.hash??"#";return B.length>0?B.substring(1):B}prepareExternalUrl(N){const B=ve(this._baseHref,N);return B.length>0?"#"+B:B}pushState(N,B,de,nt){let Ot=this.prepareExternalUrl(de+Ct(nt));0==Ot.length&&(Ot=this._platformLocation.pathname),this._platformLocation.pushState(N,B,Ot)}replaceState(N,B,de,nt){let Ot=this.prepareExternalUrl(de+Ct(nt));0==Ot.length&&(Ot=this._platformLocation.pathname),this._platformLocation.replaceState(N,B,Ot)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}static#e=this.\u0275fac=function(B){return new(B||P)(_.KVO(Le),_.KVO(Me,8))};static#t=this.\u0275prov=_.jDH({token:P,factory:P.\u0275fac})}return P})(),We=(()=>{class P{constructor(N){this._subject=new _.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=N;const B=this._locationStrategy.getBaseHref();this._basePath=function Ee(P){if(new RegExp("^(https?:)?//").test(P)){const[,N]=P.split(/\/\/[^\/]+/);return N}return P}(ze(ue(B))),this._locationStrategy.onPopState(de=>{this._subject.emit({url:this.path(!0),pop:!0,state:de.state,type:de.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(N=!1){return this.normalize(this._locationStrategy.path(N))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(N,B=""){return this.path()==this.normalize(N+Ct(B))}normalize(N){return P.stripTrailingSlash(function Pt(P,X){if(!P||!X.startsWith(P))return X;const N=X.substring(P.length);return""===N||["/",";","?","#"].includes(N[0])?N:X}(this._basePath,ue(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._locationStrategy.prepareExternalUrl(N)}go(N,B="",de=null){this._locationStrategy.pushState(de,"",N,B),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Ct(B)),de)}replaceState(N,B="",de=null){this._locationStrategy.replaceState(de,"",N,B),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Ct(B)),de)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(N=0){this._locationStrategy.historyGo?.(N)}onUrlChange(N){return this._urlChangeListeners.push(N),this._urlChangeSubscription??=this.subscribe(B=>{this._notifyUrlChangeListeners(B.url,B.state)}),()=>{const B=this._urlChangeListeners.indexOf(N);this._urlChangeListeners.splice(B,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(N="",B){this._urlChangeListeners.forEach(de=>de(N,B))}subscribe(N,B,de){return this._subject.subscribe({next:N,error:B,complete:de})}static#e=this.normalizeQueryParams=Ct;static#t=this.joinWithSlash=ve;static#n=this.stripTrailingSlash=ze;static#r=this.\u0275fac=function(B){return new(B||P)(_.KVO(ht))};static#i=this.\u0275prov=_.jDH({token:P,factory:()=>function $e(){return new We((0,_.KVO)(ht))}(),providedIn:"root"})}return P})();function ue(P){return P.replace(/\/index.html$/,"")}function ye(P,X){X=encodeURIComponent(X);for(const N of P.split(";")){const B=N.indexOf("="),[de,nt]=-1==B?[N,""]:[N.slice(0,B),N.slice(B+1)];if(de.trim()===X)return decodeURIComponent(nt)}return null}const Ie=/\s+/,dt=[];let Ze=(()=>{class P{constructor(N,B){this._ngEl=N,this._renderer=B,this.initialClasses=dt,this.stateMap=new Map}set klass(N){this.initialClasses=null!=N?N.trim().split(Ie):dt}set ngClass(N){this.rawClass="string"==typeof N?N.trim().split(Ie):N}ngDoCheck(){for(const B of this.initialClasses)this._updateState(B,!0);const N=this.rawClass;if(Array.isArray(N)||N instanceof Set)for(const B of N)this._updateState(B,!0);else if(null!=N)for(const B of Object.keys(N))this._updateState(B,!!N[B]);this._applyStateDiff()}_updateState(N,B){const de=this.stateMap.get(N);void 0!==de?(de.enabled!==B&&(de.changed=!0,de.enabled=B),de.touched=!0):this.stateMap.set(N,{enabled:B,changed:!0,touched:!0})}_applyStateDiff(){for(const N of this.stateMap){const B=N[0],de=N[1];de.changed?(this._toggleClass(B,de.enabled),de.changed=!1):de.touched||(de.enabled&&this._toggleClass(B,!1),this.stateMap.delete(B)),de.touched=!1}}_toggleClass(N,B){(N=N.trim()).length>0&&N.split(Ie).forEach(de=>{B?this._renderer.addClass(this._ngEl.nativeElement,de):this._renderer.removeClass(this._ngEl.nativeElement,de)})}static#e=this.\u0275fac=function(B){return new(B||P)(_.rXU(_.aKT),_.rXU(_.sFG))};static#t=this.\u0275dir=_.FsC({type:P,selectors:[["","ngClass",""]],inputs:{klass:[_.Mj6.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return P})();class Mn{constructor(X,N,B,de){this.$implicit=X,this.ngForOf=N,this.index=B,this.count=de}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wn=(()=>{class P{set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}constructor(N,B,de){this._viewContainer=N,this._template=B,this._differs=de,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;!this._differ&&N&&(this._differ=this._differs.find(N).create(this.ngForTrackBy))}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const B=this._viewContainer;N.forEachOperation((de,nt,Ot)=>{if(null==de.previousIndex)B.createEmbeddedView(this._template,new Mn(de.item,this._ngForOf,-1,-1),null===Ot?void 0:Ot);else if(null==Ot)B.remove(null===nt?void 0:nt);else if(null!==nt){const fn=B.get(nt);B.move(fn,Ot),Sr(fn,de)}});for(let de=0,nt=B.length;de<nt;de++){const fn=B.get(de).context;fn.index=de,fn.count=nt,fn.ngForOf=this._ngForOf}N.forEachIdentityChange(de=>{Sr(B.get(de.currentIndex),de)})}static ngTemplateContextGuard(N,B){return!0}static#e=this.\u0275fac=function(B){return new(B||P)(_.rXU(_.c1b),_.rXU(_.C4Q),_.rXU(_._q3))};static#t=this.\u0275dir=_.FsC({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return P})();function Sr(P,X){P.context.$implicit=X.item}let Er=(()=>{class P{constructor(N,B){this._viewContainer=N,this._context=new ui,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=B}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){qr("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){qr("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,B){return!0}static#e=this.\u0275fac=function(B){return new(B||P)(_.rXU(_.c1b),_.rXU(_.C4Q))};static#t=this.\u0275dir=_.FsC({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return P})();class ui{constructor(){this.$implicit=null,this.ngIf=null}}function qr(P,X){if(X&&!X.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,_.Tbb)(X)}'.`)}function Gi(P,X){return new _.wOt(2100,!1)}class Ks{createSubscription(X,N){return(0,_.O8t)(()=>X.subscribe({next:N,error:B=>{throw B}}))}dispose(X){(0,_.O8t)(()=>X.unsubscribe())}}class Yo{createSubscription(X,N){return X.then(N,B=>{throw B})}dispose(X){}}const la=new Yo,yo=new Ks;let rr=(()=>{class P{constructor(N){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=N}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(N){if(!this._obj){if(N)try{this.markForCheckOnValueUpdate=!1,this._subscribe(N)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return N!==this._obj?(this._dispose(),this.transform(N)):this._latestValue}_subscribe(N){this._obj=N,this._strategy=this._selectStrategy(N),this._subscription=this._strategy.createSubscription(N,B=>this._updateLatestValue(N,B))}_selectStrategy(N){if((0,_.jNT)(N))return la;if((0,_.zjR)(N))return yo;throw Gi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(N,B){N===this._obj&&(this._latestValue=B,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(B){return new(B||P)(_.rXU(_.gRc,16))};static#t=this.\u0275pipe=_.EJ8({name:"async",type:P,pure:!1,standalone:!0})}return P})(),si=(()=>{class P{transform(N,B,de){if(null==N)return null;if(!this.supports(N))throw Gi();return N.slice(B,de)}supports(N){return"string"==typeof N||Array.isArray(N)}static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275pipe=_.EJ8({name:"slice",type:P,pure:!1,standalone:!0})}return P})(),xs=(()=>{class P{static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275mod=_.$C({type:P});static#n=this.\u0275inj=_.G2t({})}return P})();const gs="browser",Ys="server";function Bi(P){return P===Ys}let Bo=(()=>{class P{static#e=this.\u0275prov=(0,_.jDH)({token:P,providedIn:"root",factory:()=>function zi(P){return P===gs}((0,_.WQX)(_.Agw))?new ns((0,_.WQX)(fe),window):new Eo})}return P})();class ns{constructor(X,N){this.document=X,this.window=N,this.offset=()=>[0,0]}setOffset(X){this.offset=Array.isArray(X)?()=>X:X}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(X){this.window.scrollTo(X[0],X[1])}scrollToAnchor(X){const N=function Mi(P,X){const N=P.getElementById(X)||P.getElementsByName(X)[0];if(N)return N;if("function"==typeof P.createTreeWalker&&P.body&&"function"==typeof P.body.attachShadow){const B=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let de=B.currentNode;for(;de;){const nt=de.shadowRoot;if(nt){const Ot=nt.getElementById(X)||nt.querySelector(`[name="${X}"]`);if(Ot)return Ot}de=B.nextNode()}}return null}(this.document,X);N&&(this.scrollToElement(N),N.focus())}setHistoryScrollRestoration(X){this.window.history.scrollRestoration=X}scrollToElement(X){const N=X.getBoundingClientRect(),B=N.left+this.window.pageXOffset,de=N.top+this.window.pageYOffset,nt=this.offset();this.window.scrollTo(B-nt[0],de-nt[1])}}class Eo{setOffset(X){}getScrollPosition(){return[0,0]}scrollToPosition(X){}scrollToAnchor(X){}setHistoryScrollRestoration(X){}}class ao{}},1626:(sn,Ke,k)=>{k.d(Ke,{Qq:()=>ft,q1:()=>Bn}),k(467);var T=k(4438),R=k(7673),y=k(1985),te=k(8455),be=k(274),fe=k(5964),Le=k(6354),Re=k(980),_e=k(5558),ve=k(177);class ze{}class Ct{}class ht{constructor(ye){this.normalizedNames=new Map,this.lazyUpdate=null,ye?"string"==typeof ye?this.lazyInit=()=>{this.headers=new Map,ye.split("\n").forEach(Ie=>{const dt=Ie.indexOf(":");if(dt>0){const Ze=Ie.slice(0,dt),Xt=Ze.toLowerCase(),$t=Ie.slice(dt+1).trim();this.maybeSetNormalizedName(Ze,Xt),this.headers.has(Xt)?this.headers.get(Xt).push($t):this.headers.set(Xt,[$t])}})}:typeof Headers<"u"&&ye instanceof Headers?(this.headers=new Map,ye.forEach((Ie,dt)=>{this.setHeaderEntries(dt,Ie)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(ye).forEach(([Ie,dt])=>{this.setHeaderEntries(Ie,dt)})}:this.headers=new Map}has(ye){return this.init(),this.headers.has(ye.toLowerCase())}get(ye){this.init();const Ie=this.headers.get(ye.toLowerCase());return Ie&&Ie.length>0?Ie[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ye){return this.init(),this.headers.get(ye.toLowerCase())||null}append(ye,Ie){return this.clone({name:ye,value:Ie,op:"a"})}set(ye,Ie){return this.clone({name:ye,value:Ie,op:"s"})}delete(ye,Ie){return this.clone({name:ye,value:Ie,op:"d"})}maybeSetNormalizedName(ye,Ie){this.normalizedNames.has(Ie)||this.normalizedNames.set(Ie,ye)}init(){this.lazyInit&&(this.lazyInit instanceof ht?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ye=>this.applyUpdate(ye)),this.lazyUpdate=null))}copyFrom(ye){ye.init(),Array.from(ye.headers.keys()).forEach(Ie=>{this.headers.set(Ie,ye.headers.get(Ie)),this.normalizedNames.set(Ie,ye.normalizedNames.get(Ie))})}clone(ye){const Ie=new ht;return Ie.lazyInit=this.lazyInit&&this.lazyInit instanceof ht?this.lazyInit:this,Ie.lazyUpdate=(this.lazyUpdate||[]).concat([ye]),Ie}applyUpdate(ye){const Ie=ye.name.toLowerCase();switch(ye.op){case"a":case"s":let dt=ye.value;if("string"==typeof dt&&(dt=[dt]),0===dt.length)return;this.maybeSetNormalizedName(ye.name,Ie);const Ze=("a"===ye.op?this.headers.get(Ie):void 0)||[];Ze.push(...dt),this.headers.set(Ie,Ze);break;case"d":const Xt=ye.value;if(Xt){let $t=this.headers.get(Ie);if(!$t)return;$t=$t.filter(Mn=>-1===Xt.indexOf(Mn)),0===$t.length?(this.headers.delete(Ie),this.normalizedNames.delete(Ie)):this.headers.set(Ie,$t)}else this.headers.delete(Ie),this.normalizedNames.delete(Ie)}}setHeaderEntries(ye,Ie){const dt=(Array.isArray(Ie)?Ie:[Ie]).map(Xt=>Xt.toString()),Ze=ye.toLowerCase();this.headers.set(Ze,dt),this.maybeSetNormalizedName(ye,Ze)}forEach(ye){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ie=>ye(this.normalizedNames.get(Ie),this.headers.get(Ie)))}}class ct{encodeKey(ye){return Pt(ye)}encodeValue(ye){return Pt(ye)}decodeKey(ye){return decodeURIComponent(ye)}decodeValue(ye){return decodeURIComponent(ye)}}const We=/%(\d[a-f0-9])/gi,$e={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Pt(ne){return encodeURIComponent(ne).replace(We,(ye,Ie)=>$e[Ie]??ye)}function ue(ne){return`${ne}`}class Ee{constructor(ye={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ye.encoder||new ct,ye.fromString){if(ye.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ue(ne,ye){const Ie=new Map;return ne.length>0&&ne.replace(/^\?/,"").split("&").forEach(Ze=>{const Xt=Ze.indexOf("="),[$t,Mn]=-1==Xt?[ye.decodeKey(Ze),""]:[ye.decodeKey(Ze.slice(0,Xt)),ye.decodeValue(Ze.slice(Xt+1))],wn=Ie.get($t)||[];wn.push(Mn),Ie.set($t,wn)}),Ie}(ye.fromString,this.encoder)}else ye.fromObject?(this.map=new Map,Object.keys(ye.fromObject).forEach(Ie=>{const dt=ye.fromObject[Ie],Ze=Array.isArray(dt)?dt.map(ue):[ue(dt)];this.map.set(Ie,Ze)})):this.map=null}has(ye){return this.init(),this.map.has(ye)}get(ye){this.init();const Ie=this.map.get(ye);return Ie?Ie[0]:null}getAll(ye){return this.init(),this.map.get(ye)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ye,Ie){return this.clone({param:ye,value:Ie,op:"a"})}appendAll(ye){const Ie=[];return Object.keys(ye).forEach(dt=>{const Ze=ye[dt];Array.isArray(Ze)?Ze.forEach(Xt=>{Ie.push({param:dt,value:Xt,op:"a"})}):Ie.push({param:dt,value:Ze,op:"a"})}),this.clone(Ie)}set(ye,Ie){return this.clone({param:ye,value:Ie,op:"s"})}delete(ye,Ie){return this.clone({param:ye,value:Ie,op:"d"})}toString(){return this.init(),this.keys().map(ye=>{const Ie=this.encoder.encodeKey(ye);return this.map.get(ye).map(dt=>Ie+"="+this.encoder.encodeValue(dt)).join("&")}).filter(ye=>""!==ye).join("&")}clone(ye){const Ie=new Ee({encoder:this.encoder});return Ie.cloneFrom=this.cloneFrom||this,Ie.updates=(this.updates||[]).concat(ye),Ie}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ye=>this.map.set(ye,this.cloneFrom.map.get(ye))),this.updates.forEach(ye=>{switch(ye.op){case"a":case"s":const Ie=("a"===ye.op?this.map.get(ye.param):void 0)||[];Ie.push(ue(ye.value)),this.map.set(ye.param,Ie);break;case"d":if(void 0===ye.value){this.map.delete(ye.param);break}{let dt=this.map.get(ye.param)||[];const Ze=dt.indexOf(ue(ye.value));-1!==Ze&&dt.splice(Ze,1),dt.length>0?this.map.set(ye.param,dt):this.map.delete(ye.param)}}}),this.cloneFrom=this.updates=null)}}class Ye{constructor(){this.map=new Map}set(ye,Ie){return this.map.set(ye,Ie),this}get(ye){return this.map.has(ye)||this.map.set(ye,ye.defaultValue()),this.map.get(ye)}delete(ye){return this.map.delete(ye),this}has(ye){return this.map.has(ye)}keys(){return this.map.keys()}}function Mt(ne){return typeof ArrayBuffer<"u"&&ne instanceof ArrayBuffer}function ie(ne){return typeof Blob<"u"&&ne instanceof Blob}function je(ne){return typeof FormData<"u"&&ne instanceof FormData}class Jt{constructor(ye,Ie,dt,Ze){let Xt;if(this.url=Ie,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ye.toUpperCase(),function Je(ne){switch(ne){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Ze?(this.body=void 0!==dt?dt:null,Xt=Ze):Xt=dt,Xt&&(this.reportProgress=!!Xt.reportProgress,this.withCredentials=!!Xt.withCredentials,Xt.responseType&&(this.responseType=Xt.responseType),Xt.headers&&(this.headers=Xt.headers),Xt.context&&(this.context=Xt.context),Xt.params&&(this.params=Xt.params),this.transferCache=Xt.transferCache),this.headers??=new ht,this.context??=new Ye,this.params){const $t=this.params.toString();if(0===$t.length)this.urlWithParams=Ie;else{const Mn=Ie.indexOf("?");this.urlWithParams=Ie+(-1===Mn?"?":Mn<Ie.length-1?"&":"")+$t}}else this.params=new Ee,this.urlWithParams=Ie}serializeBody(){return null===this.body?null:"string"==typeof this.body||Mt(this.body)||ie(this.body)||je(this.body)||function He(ne){return typeof URLSearchParams<"u"&&ne instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Ee?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||je(this.body)?null:ie(this.body)?this.body.type||null:Mt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ee?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ye={}){const Ie=ye.method||this.method,dt=ye.url||this.url,Ze=ye.responseType||this.responseType,Xt=ye.transferCache??this.transferCache,$t=void 0!==ye.body?ye.body:this.body,Mn=ye.withCredentials??this.withCredentials,wn=ye.reportProgress??this.reportProgress;let Sr=ye.headers||this.headers,ii=ye.params||this.params;const Er=ye.context??this.context;return void 0!==ye.setHeaders&&(Sr=Object.keys(ye.setHeaders).reduce((ui,qr)=>ui.set(qr,ye.setHeaders[qr]),Sr)),ye.setParams&&(ii=Object.keys(ye.setParams).reduce((ui,qr)=>ui.set(qr,ye.setParams[qr]),ii)),new Jt(Ie,dt,$t,{params:ii,headers:Sr,context:Er,reportProgress:wn,responseType:Ze,withCredentials:Mn,transferCache:Xt})}}var St=function(ne){return ne[ne.Sent=0]="Sent",ne[ne.UploadProgress=1]="UploadProgress",ne[ne.ResponseHeader=2]="ResponseHeader",ne[ne.DownloadProgress=3]="DownloadProgress",ne[ne.Response=4]="Response",ne[ne.User=5]="User",ne}(St||{});class un{constructor(ye,Ie=Pe.Ok,dt="OK"){this.headers=ye.headers||new ht,this.status=void 0!==ye.status?ye.status:Ie,this.statusText=ye.statusText||dt,this.url=ye.url||null,this.ok=this.status>=200&&this.status<300}}class Lt extends un{constructor(ye={}){super(ye),this.type=St.ResponseHeader}clone(ye={}){return new Lt({headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class at extends un{constructor(ye={}){super(ye),this.type=St.Response,this.body=void 0!==ye.body?ye.body:null}clone(ye={}){return new at({body:void 0!==ye.body?ye.body:this.body,headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class tn extends un{constructor(ye){super(ye,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ye.url||"(unknown url)"}`:`Http failure response for ${ye.url||"(unknown url)"}: ${ye.status} ${ye.statusText}`,this.error=ye.error||null}}var Pe=function(ne){return ne[ne.Continue=100]="Continue",ne[ne.SwitchingProtocols=101]="SwitchingProtocols",ne[ne.Processing=102]="Processing",ne[ne.EarlyHints=103]="EarlyHints",ne[ne.Ok=200]="Ok",ne[ne.Created=201]="Created",ne[ne.Accepted=202]="Accepted",ne[ne.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",ne[ne.NoContent=204]="NoContent",ne[ne.ResetContent=205]="ResetContent",ne[ne.PartialContent=206]="PartialContent",ne[ne.MultiStatus=207]="MultiStatus",ne[ne.AlreadyReported=208]="AlreadyReported",ne[ne.ImUsed=226]="ImUsed",ne[ne.MultipleChoices=300]="MultipleChoices",ne[ne.MovedPermanently=301]="MovedPermanently",ne[ne.Found=302]="Found",ne[ne.SeeOther=303]="SeeOther",ne[ne.NotModified=304]="NotModified",ne[ne.UseProxy=305]="UseProxy",ne[ne.Unused=306]="Unused",ne[ne.TemporaryRedirect=307]="TemporaryRedirect",ne[ne.PermanentRedirect=308]="PermanentRedirect",ne[ne.BadRequest=400]="BadRequest",ne[ne.Unauthorized=401]="Unauthorized",ne[ne.PaymentRequired=402]="PaymentRequired",ne[ne.Forbidden=403]="Forbidden",ne[ne.NotFound=404]="NotFound",ne[ne.MethodNotAllowed=405]="MethodNotAllowed",ne[ne.NotAcceptable=406]="NotAcceptable",ne[ne.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",ne[ne.RequestTimeout=408]="RequestTimeout",ne[ne.Conflict=409]="Conflict",ne[ne.Gone=410]="Gone",ne[ne.LengthRequired=411]="LengthRequired",ne[ne.PreconditionFailed=412]="PreconditionFailed",ne[ne.PayloadTooLarge=413]="PayloadTooLarge",ne[ne.UriTooLong=414]="UriTooLong",ne[ne.UnsupportedMediaType=415]="UnsupportedMediaType",ne[ne.RangeNotSatisfiable=416]="RangeNotSatisfiable",ne[ne.ExpectationFailed=417]="ExpectationFailed",ne[ne.ImATeapot=418]="ImATeapot",ne[ne.MisdirectedRequest=421]="MisdirectedRequest",ne[ne.UnprocessableEntity=422]="UnprocessableEntity",ne[ne.Locked=423]="Locked",ne[ne.FailedDependency=424]="FailedDependency",ne[ne.TooEarly=425]="TooEarly",ne[ne.UpgradeRequired=426]="UpgradeRequired",ne[ne.PreconditionRequired=428]="PreconditionRequired",ne[ne.TooManyRequests=429]="TooManyRequests",ne[ne.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",ne[ne.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",ne[ne.InternalServerError=500]="InternalServerError",ne[ne.NotImplemented=501]="NotImplemented",ne[ne.BadGateway=502]="BadGateway",ne[ne.ServiceUnavailable=503]="ServiceUnavailable",ne[ne.GatewayTimeout=504]="GatewayTimeout",ne[ne.HttpVersionNotSupported=505]="HttpVersionNotSupported",ne[ne.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",ne[ne.InsufficientStorage=507]="InsufficientStorage",ne[ne.LoopDetected=508]="LoopDetected",ne[ne.NotExtended=510]="NotExtended",ne[ne.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",ne}(Pe||{});function Qe(ne,ye){return{body:ye,headers:ne.headers,context:ne.context,observe:ne.observe,params:ne.params,reportProgress:ne.reportProgress,responseType:ne.responseType,withCredentials:ne.withCredentials,transferCache:ne.transferCache}}let ft=(()=>{class ne{constructor(Ie){this.handler=Ie}request(Ie,dt,Ze={}){let Xt;if(Ie instanceof Jt)Xt=Ie;else{let wn,Sr;wn=Ze.headers instanceof ht?Ze.headers:new ht(Ze.headers),Ze.params&&(Sr=Ze.params instanceof Ee?Ze.params:new Ee({fromObject:Ze.params})),Xt=new Jt(Ie,dt,void 0!==Ze.body?Ze.body:null,{headers:wn,context:Ze.context,params:Sr,reportProgress:Ze.reportProgress,responseType:Ze.responseType||"json",withCredentials:Ze.withCredentials,transferCache:Ze.transferCache})}const $t=(0,R.of)(Xt).pipe((0,be.H)(wn=>this.handler.handle(wn)));if(Ie instanceof Jt||"events"===Ze.observe)return $t;const Mn=$t.pipe((0,fe.p)(wn=>wn instanceof at));switch(Ze.observe||"body"){case"body":switch(Xt.responseType){case"arraybuffer":return Mn.pipe((0,Le.T)(wn=>{if(null!==wn.body&&!(wn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return wn.body}));case"blob":return Mn.pipe((0,Le.T)(wn=>{if(null!==wn.body&&!(wn.body instanceof Blob))throw new Error("Response is not a Blob.");return wn.body}));case"text":return Mn.pipe((0,Le.T)(wn=>{if(null!==wn.body&&"string"!=typeof wn.body)throw new Error("Response is not a string.");return wn.body}));default:return Mn.pipe((0,Le.T)(wn=>wn.body))}case"response":return Mn;default:throw new Error(`Unreachable: unhandled observe type ${Ze.observe}}`)}}delete(Ie,dt={}){return this.request("DELETE",Ie,dt)}get(Ie,dt={}){return this.request("GET",Ie,dt)}head(Ie,dt={}){return this.request("HEAD",Ie,dt)}jsonp(Ie,dt){return this.request("JSONP",Ie,{params:(new Ee).append(dt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ie,dt={}){return this.request("OPTIONS",Ie,dt)}patch(Ie,dt,Ze={}){return this.request("PATCH",Ie,Qe(Ze,dt))}post(Ie,dt,Ze={}){return this.request("POST",Ie,Qe(Ze,dt))}put(Ie,dt,Ze={}){return this.request("PUT",Ie,Qe(Ze,dt))}static#e=this.\u0275fac=function(dt){return new(dt||ne)(T.KVO(ze))};static#t=this.\u0275prov=T.jDH({token:ne,factory:ne.\u0275fac})}return ne})();function Cn(ne,ye){return ye(ne)}function Dn(ne,ye){return(Ie,dt)=>ye.intercept(Ie,{handle:Ze=>ne(Ze,dt)})}const ot=new T.nKC(""),In=new T.nKC(""),Kn=new T.nKC(""),sr=new T.nKC("");function Rt(){let ne=null;return(ye,Ie)=>{null===ne&&(ne=((0,T.WQX)(ot,{optional:!0})??[]).reduceRight(Dn,Cn));const dt=(0,T.WQX)(T.TgB),Ze=dt.add();return ne(ye,Ie).pipe((0,Re.j)(()=>dt.remove(Ze)))}}let Ft=(()=>{class ne extends ze{constructor(Ie,dt){super(),this.backend=Ie,this.injector=dt,this.chain=null,this.pendingTasks=(0,T.WQX)(T.TgB);const Ze=(0,T.WQX)(sr,{optional:!0});this.backend=Ze??Ie}handle(Ie){if(null===this.chain){const Ze=Array.from(new Set([...this.injector.get(In),...this.injector.get(Kn,[])]));this.chain=Ze.reduceRight((Xt,$t)=>function Ln(ne,ye,Ie){return(dt,Ze)=>(0,T.N4e)(Ie,()=>ye(dt,Xt=>ne(Xt,Ze)))}(Xt,$t,this.injector),Cn)}const dt=this.pendingTasks.add();return this.chain(Ie,Ze=>this.backend.handle(Ze)).pipe((0,Re.j)(()=>this.pendingTasks.remove(dt)))}static#e=this.\u0275fac=function(dt){return new(dt||ne)(T.KVO(Ct),T.KVO(T.uvJ))};static#t=this.\u0275prov=T.jDH({token:ne,factory:ne.\u0275fac})}return ne})();const hs=/^\)\]\}',?\n/;let Li=(()=>{class ne{constructor(Ie){this.xhrFactory=Ie}handle(Ie){if("JSONP"===Ie.method)throw new T.wOt(-2800,!1);const dt=this.xhrFactory;return(dt.\u0275loadImpl?(0,te.H)(dt.\u0275loadImpl()):(0,R.of)(null)).pipe((0,_e.n)(()=>new y.c(Xt=>{const $t=dt.build();if($t.open(Ie.method,Ie.urlWithParams),Ie.withCredentials&&($t.withCredentials=!0),Ie.headers.forEach((Ir,Dr)=>$t.setRequestHeader(Ir,Dr.join(","))),Ie.headers.has("Accept")||$t.setRequestHeader("Accept","application/json, text/plain, */*"),!Ie.headers.has("Content-Type")){const Ir=Ie.detectContentTypeHeader();null!==Ir&&$t.setRequestHeader("Content-Type",Ir)}if(Ie.responseType){const Ir=Ie.responseType.toLowerCase();$t.responseType="json"!==Ir?Ir:"text"}const Mn=Ie.serializeBody();let wn=null;const Sr=()=>{if(null!==wn)return wn;const Ir=$t.statusText||"OK",Dr=new ht($t.getAllResponseHeaders()),li=function Nn(ne){return"responseURL"in ne&&ne.responseURL?ne.responseURL:/^X-Request-URL:/m.test(ne.getAllResponseHeaders())?ne.getResponseHeader("X-Request-URL"):null}($t)||Ie.url;return wn=new Lt({headers:Dr,status:$t.status,statusText:Ir,url:li}),wn},ii=()=>{let{headers:Ir,status:Dr,statusText:li,url:nr}=Sr(),Fr=null;Dr!==Pe.NoContent&&(Fr=typeof $t.response>"u"?$t.responseText:$t.response),0===Dr&&(Dr=Fr?Pe.Ok:0);let di=Dr>=200&&Dr<300;if("json"===Ie.responseType&&"string"==typeof Fr){const vi=Fr;Fr=Fr.replace(hs,"");try{Fr=""!==Fr?JSON.parse(Fr):null}catch(Ei){Fr=vi,di&&(di=!1,Fr={error:Ei,text:Fr})}}di?(Xt.next(new at({body:Fr,headers:Ir,status:Dr,statusText:li,url:nr||void 0})),Xt.complete()):Xt.error(new tn({error:Fr,headers:Ir,status:Dr,statusText:li,url:nr||void 0}))},Er=Ir=>{const{url:Dr}=Sr(),li=new tn({error:Ir,status:$t.status||0,statusText:$t.statusText||"Unknown Error",url:Dr||void 0});Xt.error(li)};let ui=!1;const qr=Ir=>{ui||(Xt.next(Sr()),ui=!0);let Dr={type:St.DownloadProgress,loaded:Ir.loaded};Ir.lengthComputable&&(Dr.total=Ir.total),"text"===Ie.responseType&&$t.responseText&&(Dr.partialText=$t.responseText),Xt.next(Dr)},Si=Ir=>{let Dr={type:St.UploadProgress,loaded:Ir.loaded};Ir.lengthComputable&&(Dr.total=Ir.total),Xt.next(Dr)};return $t.addEventListener("load",ii),$t.addEventListener("error",Er),$t.addEventListener("timeout",Er),$t.addEventListener("abort",Er),Ie.reportProgress&&($t.addEventListener("progress",qr),null!==Mn&&$t.upload&&$t.upload.addEventListener("progress",Si)),$t.send(Mn),Xt.next({type:St.Sent}),()=>{$t.removeEventListener("error",Er),$t.removeEventListener("abort",Er),$t.removeEventListener("load",ii),$t.removeEventListener("timeout",Er),Ie.reportProgress&&($t.removeEventListener("progress",qr),null!==Mn&&$t.upload&&$t.upload.removeEventListener("progress",Si)),$t.readyState!==$t.DONE&&$t.abort()}})))}static#e=this.\u0275fac=function(dt){return new(dt||ne)(T.KVO(ve.N0))};static#t=this.\u0275prov=T.jDH({token:ne,factory:ne.\u0275fac})}return ne})();const zt=new T.nKC(""),Nr=new T.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),en=new T.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Kr{}let Rn=(()=>{class ne{constructor(Ie,dt,Ze){this.doc=Ie,this.platform=dt,this.cookieName=Ze,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ie=this.doc.cookie||"";return Ie!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,ve._b)(Ie,this.cookieName),this.lastCookieString=Ie),this.lastToken}static#e=this.\u0275fac=function(dt){return new(dt||ne)(T.KVO(ve.qQ),T.KVO(T.Agw),T.KVO(Nr))};static#t=this.\u0275prov=T.jDH({token:ne,factory:ne.\u0275fac})}return ne})();function xr(ne,ye){const Ie=ne.url.toLowerCase();if(!(0,T.WQX)(zt)||"GET"===ne.method||"HEAD"===ne.method||Ie.startsWith("http://")||Ie.startsWith("https://"))return ye(ne);const dt=(0,T.WQX)(Kr).getToken(),Ze=(0,T.WQX)(en);return null!=dt&&!ne.headers.has(Ze)&&(ne=ne.clone({headers:ne.headers.set(Ze,dt)})),ye(ne)}var we=function(ne){return ne[ne.Interceptors=0]="Interceptors",ne[ne.LegacyInterceptors=1]="LegacyInterceptors",ne[ne.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ne[ne.NoXsrfProtection=3]="NoXsrfProtection",ne[ne.JsonpSupport=4]="JsonpSupport",ne[ne.RequestsMadeViaParent=5]="RequestsMadeViaParent",ne[ne.Fetch=6]="Fetch",ne}(we||{});function Xe(...ne){const ye=[ft,Li,Ft,{provide:ze,useExisting:Ft},{provide:Ct,useExisting:Li},{provide:In,useValue:xr,multi:!0},{provide:zt,useValue:!0},{provide:Kr,useClass:Rn}];for(const Ie of ne)ye.push(...Ie.\u0275providers);return(0,T.EmA)(ye)}const ge=new T.nKC("");function q(){return function Ce(ne,ye){return{\u0275kind:ne,\u0275providers:ye}}(we.LegacyInterceptors,[{provide:ge,useFactory:Rt},{provide:In,useExisting:ge,multi:!0}])}let Bn=(()=>{class ne{static#e=this.\u0275fac=function(dt){return new(dt||ne)};static#t=this.\u0275mod=T.$C({type:ne});static#n=this.\u0275inj=T.G2t({providers:[Xe(q())]})}return ne})()},4438:(sn,Ke,k)=>{k.d(Ke,{bc$:()=>bg,iLQ:()=>R0,sZ2:()=>wf,hnV:()=>yD,Hbi:()=>tR,o8S:()=>yd,BIS:()=>dE,gRc:()=>RD,Ql9:()=>bM,Ocv:()=>kM,Z63:()=>Ls,aKT:()=>hc,uvJ:()=>Tr,zcH:()=>Po,bkB:()=>Qa,$GK:()=>rr,nKC:()=>Ze,zZn:()=>oo,_q3:()=>U0,MKu:()=>B0,xe9:()=>Gv,Co$:()=>t_,Vns:()=>Tu,SKi:()=>ws,Xx1:()=>zi,Agw:()=>Df,PLl:()=>Tf,sFG:()=>_u,_9s:()=>qy,czy:()=>Xa,kdw:()=>ts,C4Q:()=>Th,NYb:()=>EM,giA:()=>mD,xvI:()=>qP,RxE:()=>cD,c1b:()=>$c,gXe:()=>ds,mal:()=>po,L39:()=>MR,Ol2:()=>kt,w6W:()=>gd,oH4:()=>bD,Rfq:()=>xr,WQX:()=>dn,naY:()=>BM,QuC:()=>Ri,EmA:()=>Do,fpN:()=>eR,HJs:()=>LR,N4e:()=>to,O8t:()=>OR,An2:()=>Be,H3F:()=>uD,H8p:()=>hn,KH2:()=>Bp,TgB:()=>Ja,wOt:()=>_t,WHO:()=>pD,e01:()=>gD,H5H:()=>l0,Zy3:()=>Zr,mq5:()=>Cw,JZv:()=>Nn,LfX:()=>vt,plB:()=>yu,jNT:()=>P0,zjR:()=>_D,TL$:()=>Ag,Tbb:()=>Zt,Vt3:()=>Ep,Mj6:()=>_s,GFd:()=>ua,OA$:()=>At,Jv_:()=>xT,aNF:()=>kT,R7$:()=>KE,BMQ:()=>qI,AVh:()=>e0,wni:()=>uT,VBU:()=>Ua,FsC:()=>ea,jDH:()=>or,G2t:()=>Hi,$C:()=>wo,EJ8:()=>To,rXU:()=>td,nrm:()=>a0,k0s:()=>Nv,j41:()=>Ov,RV6:()=>vw,xGo:()=>Fd,KVO:()=>ei,kS0:()=>Hs,QTQ:()=>Ty,bIt:()=>f0,lsd:()=>hT,XpG:()=>Zw,nI1:()=>HT,bMT:()=>GT,i5U:()=>zT,brH:()=>WT,Y8G:()=>JI,mGM:()=>dT,Njj:()=>Vu,eBV:()=>Ol,B4B:()=>Nf,n$t:()=>ay,wjB:()=>FT,DNE:()=>Cp,EFF:()=>CT,JRh:()=>m0,SpI:()=>Lv,DH7:()=>OT,mxI:()=>y0,R50:()=>_0,GBs:()=>lT}),k(467);let R=null,te=1;const be=Symbol("SIGNAL");function fe(e){const n=R;return R=e,n}function ht(e){if((!Ye(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==te)){if(!e.producerMustRecompute(e)&&!Pt(e))return e.dirty=!1,void(e.lastCleanEpoch=te);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=te}}function Pt(e){Je(e);for(let n=0;n<e.producerNode.length;n++){const i=e.producerNode[n],s=e.producerLastReadVersion[n];if(s!==i.version||(ht(i),s!==i.version))return!0}return!1}function oe(e,n){if(function Mt(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),Je(e),1===e.liveConsumerNode.length)for(let s=0;s<e.producerNode.length;s++)oe(e.producerNode[s],e.producerIndexOfThis[s]);const i=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[i],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[i],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const s=e.liveConsumerIndexOfThis[n],c=e.liveConsumerNode[n];Je(c),c.producerIndexOfThis[s]=n}}function Ye(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Je(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let Lt=null;var Ln=k(1413),ot=k(8359),In=k(4412),Kn=k(6354);const Rt="https://g.co/ng/security#xss";class _t extends Error{constructor(n,i){super(Zr(n,i)),this.code=n}}function Zr(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}function An(e){return{toString:e}.toString()}const kr="__parameters__";function Or(e,n,i){return An(()=>{const s=function Vi(e){return function(...i){if(e){const s=e(...i);for(const c in s)this[c]=s[c]}}}(n);function c(...l){if(this instanceof c)return s.apply(this,l),this;const p=new c(...l);return v.annotation=p,v;function v(S,U,Q){const ce=S.hasOwnProperty(kr)?S[kr]:Object.defineProperty(S,kr,{value:[]})[kr];for(;ce.length<=Q;)ce.push(null);return(ce[Q]=ce[Q]||[]).push(p),S}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=e,c.annotationCls=c,c})}const Nn=globalThis;function Un(e){for(let n in e)if(e[n]===Un)return n;throw Error("Could not find renamed property on target object.")}function Nr(e,n){for(const i in n)n.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=n[i])}function Zt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Zt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function en(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Rn=Un({__forward_ref__:Un});function xr(e){return e.__forward_ref__=xr,e.toString=function(){return Zt(this())},e}function ke(e){return we(e)?e():e}function we(e){return"function"==typeof e&&e.hasOwnProperty(Rn)&&e.__forward_ref__===xr}function or(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Hi(e){return{providers:e.providers||[],imports:e.imports||[]}}function ti(e){return et(e,ne)||et(e,Ie)}function vt(e){return null!==ti(e)}function et(e,n){return e.hasOwnProperty(n)?e[n]:null}function cn(e){return e&&(e.hasOwnProperty(ye)||e.hasOwnProperty(dt))?e[ye]:null}const ne=Un({\u0275prov:Un}),ye=Un({\u0275inj:Un}),Ie=Un({ngInjectableDef:Un}),dt=Un({ngInjectorDef:Un});class Ze{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=or({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ir(e){return e&&!!e.\u0275providers}const Dr=Un({\u0275cmp:Un}),li=Un({\u0275dir:Un}),nr=Un({\u0275pipe:Un}),Fr=Un({\u0275mod:Un}),di=Un({\u0275fac:Un}),vi=Un({__NG_ELEMENT_ID__:Un}),Ei=Un({__NG_ENV_ID__:Un});function On(e){return"string"==typeof e?e:null==e?"":String(e)}function yo(e,n){throw new _t(-201,!1)}var rr=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(rr||{});let vo;function qs(){return vo}function wr(e){const n=vo;return vo=e,n}function Lo(e,n,i){const s=ti(e);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:i&rr.Optional?null:void 0!==n?n:void yo()}const Rs={},Pr="__NG_DI_FLAG__",Ui="ngTempTokenPath",Cr=/\n/gm,Xs="__source";let Xr;function hi(e){const n=Xr;return Xr=e,n}function Hr(e,n=rr.Default){if(void 0===Xr)throw new _t(-203,!1);return null===Xr?Lo(e,void 0,n):Xr.get(e,n&rr.Optional?null:void 0,n)}function ei(e,n=rr.Default){return(qs()||Hr)(ke(e),n)}function dn(e,n=rr.Default){return ei(e,si(n))}function si(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ps(e){const n=[];for(let i=0;i<e.length;i++){const s=ke(e[i]);if(Array.isArray(s)){if(0===s.length)throw new _t(900,!1);let c,l=rr.Default;for(let p=0;p<s.length;p++){const v=s[p],S=gs(v);"number"==typeof S?-1===S?c=v.token:l|=S:c=v}n.push(ei(c,l))}else n.push(ei(s))}return n}function xs(e,n){return e[Pr]=n,e.prototype[Pr]=n,e}function gs(e){return e[Pr]}const zi=xs(Or("Optional"),8),ts=xs(Or("SkipSelf"),4);function ji(e,n){return e.hasOwnProperty(di)?e[di]:null}function Mi(e,n){e.forEach(i=>Array.isArray(i)?Mi(i,n):n(i))}function Eo(e,n,i){n>=e.length?e.push(i):e.splice(n,0,i)}function ao(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Wi(e,n,i){let s=Ci(e,n);return s>=0?e[1|s]=i:(s=~s,function Jo(e,n,i,s){let c=e.length;if(c==n)e.push(i,s);else if(1===c)e.push(s,e[0]),e[0]=i;else{for(c--,e.push(e[c-1],e[c]);c>n;)e[c]=e[c-2],c--;e[n]=i,e[n+1]=s}}(e,s,n,i)),s}function Vs(e,n){const i=Ci(e,n);if(i>=0)return e[1|i]}function Ci(e,n){return function Zo(e,n,i){let s=0,c=e.length>>i;for(;c!==s;){const l=s+(c-s>>1),p=e[l<<i];if(n===p)return l<<i;p>n?c=l:s=l+1}return~(c<<i)}(e,n,1)}const wi={},yr=[],Ls=new Ze(""),ha=new Ze("",-1),Yr=new Ze("");class co{get(n,i=Rs){if(i===Rs){const s=new Error(`NullInjectorError: No provider for ${Zt(n)}!`);throw s.name="NullInjectorError",s}return i}}var ar=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(ar||{}),ds=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(ds||{}),_s=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(_s||{});function Co(e,n,i){let s=e.length;for(;;){const c=e.indexOf(n,i);if(-1===c)return c;if(0===c||e.charCodeAt(c-1)<=32){const l=n.length;if(c+l===s||e.charCodeAt(c+l)<=32)return c}i=c+1}}function xi(e,n,i){let s=0;for(;s<i.length;){const c=i[s];if("number"==typeof c){if(0!==c)break;s++;const l=i[s++],p=i[s++],v=i[s++];e.setAttribute(n,p,v,l)}else{const l=c,p=i[++s];W(l)?e.setProperty(n,l,p):e.setAttribute(n,l,p),s++}}return s}function H(e){return 3===e||4===e||6===e}function W(e){return 64===e.charCodeAt(0)}function x(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let i=-1;for(let s=0;s<n.length;s++){const c=n[s];"number"==typeof c?i=c:0===i||Z(e,i,c,null,-1===i||2===i?n[++s]:null)}}return e}function Z(e,n,i,s,c){let l=0,p=e.length;if(-1===n)p=-1;else for(;l<e.length;){const v=e[l++];if("number"==typeof v){if(v===n){p=-1;break}if(v>n){p=l-1;break}}}for(;l<e.length;){const v=e[l];if("number"==typeof v)break;if(v===i){if(null===s)return void(null!==c&&(e[l+1]=c));if(s===e[l+1])return void(e[l+2]=c)}l++,null!==s&&l++,null!==c&&l++}-1!==p&&(e.splice(p,0,n),l=p+1),e.splice(l++,0,i),null!==s&&e.splice(l++,0,s),null!==c&&e.splice(l++,0,c)}const De="ng-template";function pn(e,n,i,s){let c=0;if(s){for(;c<n.length&&"string"==typeof n[c];c+=2)if("class"===n[c]&&-1!==Co(n[c+1].toLowerCase(),i,0))return!0}else if(Jn(e))return!1;if(c=n.indexOf(1,c),c>-1){let l;for(;++c<n.length&&"string"==typeof(l=n[c]);)if(l.toLowerCase()===i)return!0}return!1}function Jn(e){return 4===e.type&&e.value!==De}function ys(e,n,i){return n===(4!==e.type||i?e.value:De)}function Zs(e,n,i){let s=4;const c=e.attrs,l=null!==c?function fa(e){for(let n=0;n<e.length;n++)if(H(e[n]))return n;return e.length}(c):0;let p=!1;for(let v=0;v<n.length;v++){const S=n[v];if("number"!=typeof S){if(!p)if(4&s){if(s=2|1&s,""!==S&&!ys(e,S,i)||""===S&&1===n.length){if(fi(s))return!1;p=!0}}else if(8&s){if(null===c||!pn(e,c,S,i)){if(fi(s))return!1;p=!0}}else{const U=n[++v],Q=Ts(S,c,Jn(e),i);if(-1===Q){if(fi(s))return!1;p=!0;continue}if(""!==U){let ce;if(ce=Q>l?"":c[Q+1].toLowerCase(),2&s&&U!==ce){if(fi(s))return!1;p=!0}}}}else{if(!p&&!fi(s)&&!fi(S))return!1;if(p&&fi(S))continue;p=!1,s=S|1&s}}return fi(s)||p}function fi(e){return!(1&e)}function Ts(e,n,i,s){if(null===n)return-1;let c=0;if(s||!i){let l=!1;for(;c<n.length;){const p=n[c];if(p===e)return c;if(3===p||6===p)l=!0;else{if(1===p||2===p){let v=n[++c];for(;"string"==typeof v;)v=n[++c];continue}if(4===p)break;if(0===p){c+=4;continue}}c+=l?1:2}return-1}return function Jr(e,n){let i=e.indexOf(4);if(i>-1)for(i++;i<e.length;){const s=e[i];if("number"==typeof s)return-1;if(s===n)return i;i++}return-1}(n,e)}function Ta(e,n,i=!1){for(let s=0;s<n.length;s++)if(Zs(e,n[s],i))return!0;return!1}function pa(e,n){return e?":not("+n.trim()+")":n}function Va(e){let n=e[0],i=1,s=2,c="",l=!1;for(;i<e.length;){let p=e[i];if("string"==typeof p)if(2&s){const v=e[++i];c+="["+p+(v.length>0?'="'+v+'"':"")+"]"}else 8&s?c+="."+p:4&s&&(c+=" "+p);else""!==c&&!fi(p)&&(n+=pa(l,c),c=""),s=p,l=l||!fi(s);i++}return""!==c&&(n+=pa(l,c)),n}function Ua(e){return An(()=>{const n=ma(e),i={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===ar.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||ds.Emulated,styles:e.styles||yr,_:null,schemas:e.schemas||null,tView:null,id:""};vs(i);const s=e.dependencies;return i.directiveDefs=Ki(s,!1),i.pipeDefs=Ki(s,!0),i.id=function Tc(e){let n=0;const i=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const c of i)n=Math.imul(31,n)+c.charCodeAt(0)|0;return n+=2147483648,"c"+n}(i),i})}function ga(e){return lr(e)||Gr(e)}function $o(e){return null!==e}function wo(e){return An(()=>({type:e.type,bootstrap:e.bootstrap||yr,declarations:e.declarations||yr,imports:e.imports||yr,exports:e.exports||yr,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Aa(e,n){if(null==e)return wi;const i={};for(const s in e)if(e.hasOwnProperty(s)){const c=e[s];let l,p,v=_s.None;Array.isArray(c)?(v=c[0],l=c[1],p=c[2]??l):(l=c,p=c),n?(i[l]=v!==_s.None?[s,v]:s,n[l]=p):i[l]=s}return i}function ea(e){return An(()=>{const n=ma(e);return vs(n),n})}function To(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function lr(e){return e[Dr]||null}function Gr(e){return e[li]||null}function ni(e){return e[nr]||null}function Ri(e){const n=lr(e)||Gr(e)||ni(e);return null!==n&&n.standalone}function Oi(e,n){const i=e[Fr]||null;if(!i&&!0===n)throw new Error(`Type ${Zt(e)} does not have '\u0275mod' property.`);return i}function ma(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||wi,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||yr,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Aa(e.inputs,n),outputs:Aa(e.outputs),debugInfo:null}}function vs(e){e.features?.forEach(n=>n(e))}function Ki(e,n){if(!e)return null;const i=n?ni:ga;return()=>("function"==typeof e?e():e).map(s=>i(s)).filter($o)}function Do(e){return{\u0275providers:e}}function Ao(...e){return{\u0275providers:Y(0,e),\u0275fromNgModule:!0}}function Y(e,...n){const i=[],s=new Set;let c;const l=p=>{i.push(p)};return Mi(n,p=>{const v=p;D(v,l,[],s)&&(c||=[],c.push(v))}),void 0!==c&&C(c,l),i}function C(e,n){for(let i=0;i<e.length;i++){const{ngModule:s,providers:c}=e[i];K(c,l=>{n(l,s)})}}function D(e,n,i,s){if(!(e=ke(e)))return!1;let c=null,l=cn(e);const p=!l&&lr(e);if(l||p){if(p&&!p.standalone)return!1;c=e}else{const S=e.ngModule;if(l=cn(S),!l)return!1;c=S}const v=s.has(c);if(p){if(v)return!1;if(s.add(c),p.dependencies){const S="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const U of S)D(U,n,i,s)}}else{if(!l)return!1;{if(null!=l.imports&&!v){let U;s.add(c);try{Mi(l.imports,Q=>{D(Q,n,i,s)&&(U||=[],U.push(Q))})}finally{}void 0!==U&&C(U,n)}if(!v){const U=ji(c)||(()=>new c);n({provide:c,useFactory:U,deps:yr},c),n({provide:Yr,useValue:c,multi:!0},c),n({provide:Ls,useValue:()=>ei(c),multi:!0},c)}const S=l.providers;if(null!=S&&!v){const U=e;K(S,Q=>{n(Q,U)})}}}return c!==e&&void 0!==e.providers}function K(e,n){for(let i of e)Ir(i)&&(i=i.\u0275providers),Array.isArray(i)?K(i,n):n(i)}const he=Un({provide:String,useValue:Un});function Se(e){return null!==e&&"object"==typeof e&&he in e}function wt(e){return"function"==typeof e}const hn=new Ze(""),hr={},zn={};let Fn;function Hn(){return void 0===Fn&&(Fn=new co),Fn}class Tr{}class oi extends Tr{get destroyed(){return this._destroyed}constructor(n,i,s,c){super(),this.parent=i,this.source=s,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,uo(n,p=>this.processProvider(p)),this.records.set(ha,rs(void 0,this)),c.has("environment")&&this.records.set(Tr,rs(void 0,this));const l=this.records.get(hn);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(Yr,yr,rr.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=fe(null);try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const i=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of i)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),fe(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=hi(this),s=wr(void 0);try{return n()}finally{hi(i),wr(s)}}get(n,i=Rs,s=rr.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Ei))return n[Ei](this);s=si(s);const l=hi(this),p=wr(void 0);try{if(!(s&rr.SkipSelf)){let S=this.records.get(n);if(void 0===S){const U=function Ho(e){return"function"==typeof e||"object"==typeof e&&e instanceof Ze}(n)&&ti(n);S=U&&this.injectableDefInScope(U)?rs(Pn(n),hr):null,this.records.set(n,S)}if(null!=S)return this.hydrate(n,S)}return(s&rr.Self?Hn():this.parent).get(n,i=s&rr.Optional&&i===Rs?null:i)}catch(v){if("NullInjectorError"===v.name){if((v[Ui]=v[Ui]||[]).unshift(Zt(n)),l)throw v;return function Ys(e,n,i,s){const c=e[Ui];throw n[Xs]&&c.unshift(n[Xs]),e.message=function Pi(e,n,i,s=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let c=Zt(n);if(Array.isArray(n))c=n.map(Zt).join(" -> ");else if("object"==typeof n){let l=[];for(let p in n)if(n.hasOwnProperty(p)){let v=n[p];l.push(p+":"+("string"==typeof v?JSON.stringify(v):Zt(v)))}c=`{${l.join(", ")}}`}return`${i}${s?"("+s+")":""}[${c}]: ${e.replace(Cr,"\n  ")}`}("\n"+e.message,c,i,s),e.ngTokenPath=c,e[Ui]=null,e}(v,n,"R3InjectorError",this.source)}throw v}finally{wr(p),hi(l)}}resolveInjectorInitializers(){const n=fe(null),i=hi(this),s=wr(void 0);try{const l=this.get(Ls,yr,rr.Self);for(const p of l)p()}finally{hi(i),wr(s),fe(n)}}toString(){const n=[],i=this.records;for(const s of i.keys())n.push(Zt(s));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _t(205,!1)}processProvider(n){let i=wt(n=ke(n))?n:ke(n&&n.provide);const s=function ki(e){return Se(e)?rs(void 0,e.useValue):rs(bo(e),hr)}(n);if(!wt(n)&&!0===n.multi){let c=this.records.get(i);c||(c=rs(void 0,hr,!0),c.factory=()=>ps(c.multi),this.records.set(i,c)),i=n,c.multi.push(n)}this.records.set(i,s)}hydrate(n,i){const s=fe(null);try{return i.value===hr&&(i.value=zn,i.value=i.factory()),"object"==typeof i.value&&i.value&&function cs(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{fe(s)}}injectableDefInScope(n){if(!n.providedIn)return!1;const i=ke(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function Pn(e){const n=ti(e),i=null!==n?n.factory:ji(e);if(null!==i)return i;if(e instanceof Ze)throw new _t(204,!1);if(e instanceof Function)return function Es(e){if(e.length>0)throw new _t(204,!1);const i=function Vt(e){return e&&(e[ne]||e[Ie])||null}(e);return null!==i?()=>i.factory(e):()=>new e}(e);throw new _t(204,!1)}function bo(e,n,i){let s;if(wt(e)){const c=ke(e);return ji(c)||Pn(c)}if(Se(e))s=()=>ke(e.useValue);else if(function Et(e){return!(!e||!e.useFactory)}(e))s=()=>e.useFactory(...ps(e.deps||[]));else if(function Fe(e){return!(!e||!e.useExisting)}(e))s=()=>ei(ke(e.useExisting));else{const c=ke(e&&(e.useClass||e.provide));if(!function as(e){return!!e.deps}(e))return ji(c)||Pn(c);s=()=>new c(...ps(e.deps))}return s}function rs(e,n,i=!1){return{factory:e,value:n,multi:i?[]:void 0}}function uo(e,n){for(const i of e)Array.isArray(i)?uo(i,n):i&&Ir(i)?uo(i.\u0275providers,n):n(i)}function to(e,n){e instanceof oi&&e.assertNotDestroyed();const s=hi(e),c=wr(void 0);try{return n()}finally{hi(s),wr(c)}}function qi(){return void 0!==qs()||null!=function Uo(){return Xr}()}const pr=0,Yt=1,vn=2,_r=3,Ti=4,pi=5,is=6,Us=7,gi=8,zr=9,lo=10,Zn=11,Go=12,El=13,ai=14,jn=15,Dc=16,tc=17,zo=18,_a=19,Il=20,ta=21,nc=22,Is=23,Qn=25,rc=1,So=7,Sa=9,Di=10;var Su=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Su||{});function Ds(e){return Array.isArray(e)&&"object"==typeof e[rc]}function As(e){return Array.isArray(e)&&!0===e[rc]}function Kc(e){return!!(4&e.flags)}function na(e){return e.componentOffset>-1}function qc(e){return!(1&~e.flags)}function no(e){return!!e.template}function Ba(e){return!!(512&e[vn])}class ee{constructor(n,i,s){this.previousValue=n,this.currentValue=i,this.firstChange=s}isFirstChange(){return this.firstChange}}function Te(e,n,i,s){null!==n?n.applyValueToInputSignal(n,s):e[i]=s}function At(){return pt}function pt(e){return e.type.prototype.ngOnChanges&&(e.setInput=er),_n}function _n(){const e=Fi(this),n=e?.current;if(n){const i=e.previous;if(i===wi)e.previous=n;else for(let s in n)i[s]=n[s];e.current=null,this.ngOnChanges(n)}}function er(e,n,i,s,c){const l=this.declaredInputs[s],p=Fi(e)||function Ac(e,n){return e[dr]=n}(e,{previous:wi,current:null}),v=p.current||(p.current={}),S=p.previous,U=S[l];v[l]=new ee(U&&U.currentValue,i,S===wi),Te(e,n,c,i)}At.ngInherit=!0;const dr="__ngSimpleChanges__";function Fi(e){return e[dr]||null}const Bs=function(e,n,i){};let ku=!1;function Mr(e){for(;Array.isArray(e);)e=e[pr];return e}function Jc(e,n){return Mr(n[e])}function js(e,n){return Mr(n[e.index])}function sc(e,n){return e.data[n]}function oc(e,n){return e[n]}function Ko(e,n){const i=n[e];return Ds(i)?i:i[pr]}function Zc(e){return!(128&~e[vn])}function ro(e,n){return null==n?null:e[n]}function tf(e){e[tc]=0}function Ga(e){1024&e[vn]||(e[vn]|=1024,Zc(e)&&Fu(e))}function bl(e){return!!(9216&e[vn]||e[Is]?.dirty)}function bc(e){e[lo].changeDetectionScheduler?.notify(1),bl(e)?Fu(e):64&e[vn]&&(function $a(){return ku}()?(e[vn]|=1024,Fu(e)):e[lo].changeDetectionScheduler?.notify())}function Fu(e){e[lo].changeDetectionScheduler?.notify();let n=fo(e);for(;null!==n&&!(8192&n[vn])&&(n[vn]|=8192,Zc(n));)n=fo(n)}function Sl(e,n){if(!(256&~e[vn]))throw new _t(911,!1);null===e[ta]&&(e[ta]=[]),e[ta].push(n)}function fo(e){const n=e[_r];return As(n)?n[_r]:n}const Wn={lFrame:cf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Pl(){return Wn.bindingsEnabled}function Ut(){return Wn.lFrame.lView}function Rr(){return Wn.lFrame.tView}function Ol(e){return Wn.lFrame.contextLView=e,e[gi]}function Vu(e){return Wn.lFrame.contextLView=null,e}function Lr(){let e=Sc();for(;null!==e&&64===e.type;)e=e.parent;return e}function Sc(){return Wn.lFrame.currentTNode}function va(e,n){const i=Wn.lFrame;i.currentTNode=e,i.isParent=n}function Lu(){return Wn.lFrame.isParent}function Ns(){const e=Wn.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function sa(){return Wn.lFrame.bindingIndex++}function Pd(e,n){const i=Wn.lFrame;i.bindingIndex=i.bindingRootIndex=e,Rc(n)}function Rc(e){Wn.lFrame.currentDirectiveIndex=e}function Nl(){return Wn.lFrame.currentQueryIndex}function xl(e){Wn.lFrame.currentQueryIndex=e}function sf(e){const n=e[Yt];return 2===n.type?n.declTNode:1===n.type?e[pi]:null}function af(e,n,i){if(i&rr.SkipSelf){let c=n,l=e;for(;!(c=c.parent,null!==c||i&rr.Host||(c=sf(l),null===c||(l=l[ai],10&c.type))););if(null===c)return!1;n=c,e=l}const s=Wn.lFrame=Rd();return s.currentTNode=n,s.lView=e,!0}function tu(e){const n=Rd(),i=e[Yt];Wn.lFrame=n,n.currentTNode=i.firstChild,n.lView=e,n.tView=i,n.contextLView=e,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function Rd(){const e=Wn.lFrame,n=null===e?null:e.child;return null===n?cf(e):n}function cf(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Uu(){const e=Wn.lFrame;return Wn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const uf=Uu;function kl(){const e=Uu();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Cs(){return Wn.lFrame.selectedIndex}function cc(e){Wn.lFrame.selectedIndex=e}function Ai(){const e=Wn.lFrame;return sc(e.tView,e.selectedIndex)}let nu=!0;function Qi(){return nu}function Pa(e){nu=e}function Fl(e,n){for(let i=n.directiveStart,s=n.directiveEnd;i<s;i++){const l=e.data[i].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:v,ngAfterViewInit:S,ngAfterViewChecked:U,ngOnDestroy:Q}=l;p&&(e.contentHooks??=[]).push(-i,p),v&&((e.contentHooks??=[]).push(i,v),(e.contentCheckHooks??=[]).push(i,v)),S&&(e.viewHooks??=[]).push(-i,S),U&&((e.viewHooks??=[]).push(i,U),(e.viewCheckHooks??=[]).push(i,U)),null!=Q&&(e.destroyHooks??=[]).push(i,Q)}}function Bu(e,n,i){$u(e,n,3,i)}function Nc(e,n,i,s){(3&e[vn])===i&&$u(e,n,i,s)}function ju(e,n){let i=e[vn];(3&i)===n&&(i&=16383,i+=1,e[vn]=i)}function $u(e,n,i,s){const l=s??-1,p=n.length-1;let v=0;for(let S=void 0!==s?65535&e[tc]:0;S<p;S++)if("number"==typeof n[S+1]){if(v=n[S],null!=s&&v>=s)break}else n[S]<0&&(e[tc]+=65536),(v<l||-1==l)&&(Nd(e,i,n,S),e[tc]=(4294901760&e[tc])+S+2),S++}function Vl(e,n){Bs(4,e,n);const i=fe(null);try{n.call(e)}finally{fe(i),Bs(5,e,n)}}function Nd(e,n,i,s){const c=i[s]<0,l=i[s+1],v=e[c?-i[s]:i[s]];c?e[vn]>>14<e[tc]>>16&&(3&e[vn])===n&&(e[vn]+=16384,Vl(v,l)):Vl(v,l)}const uc=-1;class Ma{constructor(n,i,s){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=s}}function Bl(e){return e!==uc}function ru(e){return 32767&e}function xc(e,n){let i=function Zp(e){return e>>16}(e),s=n;for(;i>0;)s=s[ai],i--;return s}let I=!0;function h(e){const n=I;return I=e,n}const A=255,z=5;let ae=0;const Ve={};function Gt(e,n){const i=$n(e,n);if(-1!==i)return i;const s=n[Yt];s.firstCreatePass&&(e.injectorIndex=n.length,Tn(s.data,e),Tn(n,null),Tn(s.blueprint,null));const c=Ar(e,n),l=e.injectorIndex;if(Bl(c)){const p=ru(c),v=xc(c,n),S=v[Yt].data;for(let U=0;U<8;U++)n[l+U]=v[p+U]|S[p+U]}return n[l+8]=c,l}function Tn(e,n){e.push(0,0,0,0,0,0,0,0,n)}function $n(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Ar(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let i=0,s=null,c=n;for(;null!==c;){if(s=w_(c),null===s)return uc;if(i++,c=c[ai],-1!==s.injectorIndex)return s.injectorIndex|i<<16}return uc}function so(e,n,i){!function bt(e,n,i){let s;"string"==typeof i?s=i.charCodeAt(0)||0:i.hasOwnProperty(vi)&&(s=i[vi]),null==s&&(s=i[vi]=ae++);const c=s&A;n.data[e+(c>>z)]|=1<<c}(e,n,i)}function Hu(e,n,i){if(i&rr.Optional||void 0!==e)return e;yo()}function Gu(e,n,i,s){if(i&rr.Optional&&void 0===s&&(s=null),!(i&(rr.Self|rr.Host))){const c=e[zr],l=wr(void 0);try{return c?c.get(n,s,i&rr.Optional):Lo(n,s,i&rr.Optional)}finally{wr(l)}}return Hu(s,0,i)}function zu(e,n,i,s=rr.Default,c){if(null!==e){if(2048&n[vn]&&!(s&rr.Self)){const p=function Jv(e,n,i,s,c){let l=e,p=n;for(;null!==l&&null!==p&&2048&p[vn]&&!(512&p[vn]);){const v=jl(l,p,i,s|rr.Self,Ve);if(v!==Ve)return v;let S=l.parent;if(!S){const U=p[Il];if(U){const Q=U.get(i,Ve,s);if(Q!==Ve)return Q}S=w_(p),p=p[ai]}l=S}return c}(e,n,i,s,Ve);if(p!==Ve)return p}const l=jl(e,n,i,s,Ve);if(l!==Ve)return l}return Gu(n,i,s,c)}function jl(e,n,i,s,c){const l=function Wu(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(vi)?e[vi]:void 0;return"number"==typeof n?n>=0?n&A:C_:n}(i);if("function"==typeof l){if(!af(n,e,s))return s&rr.Host?Hu(c,0,s):Gu(n,i,s,c);try{let p;if(p=l(s),null!=p||s&rr.Optional)return p;yo()}finally{uf()}}else if("number"==typeof l){let p=null,v=$n(e,n),S=uc,U=s&rr.Host?n[jn][pi]:null;for((-1===v||s&rr.SkipSelf)&&(S=-1===v?Ar(e,n):n[v+8],S!==uc&&Ku(s,!1)?(p=n[Yt],v=ru(S),n=xc(S,n)):v=-1);-1!==v;){const Q=n[Yt];if(iu(l,v,Q.data)){const ce=$l(v,n,i,p,s,U);if(ce!==Ve)return ce}S=n[v+8],S!==uc&&Ku(s,n[Yt].data[v+8]===U)&&iu(l,v,n)?(p=Q,v=ru(S),n=xc(S,n)):v=-1}}return c}function $l(e,n,i,s,c,l){const p=n[Yt],v=p.data[e+8],Q=Ka(v,p,i,null==s?na(v)&&I:s!=p&&!!(3&v.type),c&rr.Host&&l===v);return null!==Q?oa(n,p,Q,v):Ve}function Ka(e,n,i,s,c){const l=e.providerIndexes,p=n.data,v=1048575&l,S=e.directiveStart,Q=l>>20,xe=c?v+Q:e.directiveEnd;for(let qe=s?v:v+Q;qe<xe;qe++){const mt=p[qe];if(qe<S&&i===mt||qe>=S&&mt.type===i)return qe}if(c){const qe=p[S];if(qe&&no(qe)&&qe.type===i)return S}return null}function oa(e,n,i,s){let c=e[i];const l=n.data;if(function Ll(e){return e instanceof Ma}(c)){const p=c;p.resolving&&function Ks(e,n){throw n&&n.join(" > "),new _t(-200,e)}(function ur(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():On(e)}(l[i]));const v=h(p.canSeeViewProviders);p.resolving=!0;const U=p.injectImpl?wr(p.injectImpl):null;af(e,s,rr.Default);try{c=e[i]=p.factory(void 0,l,e,s),n.firstCreatePass&&i>=s.directiveStart&&function Od(e,n,i){const{ngOnChanges:s,ngOnInit:c,ngDoCheck:l}=n.type.prototype;if(s){const p=pt(n);(i.preOrderHooks??=[]).push(e,p),(i.preOrderCheckHooks??=[]).push(e,p)}c&&(i.preOrderHooks??=[]).push(0-e,c),l&&((i.preOrderHooks??=[]).push(e,l),(i.preOrderCheckHooks??=[]).push(e,l))}(i,l[i],n)}finally{null!==U&&wr(U),h(v),p.resolving=!1,uf()}}return c}function iu(e,n,i){return!!(i[n+(e>>z)]&1<<e)}function Ku(e,n){return!(e&rr.Self||e&rr.Host&&n)}class Ss{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,s){return zu(this._tNode,this._lView,n,si(s),i)}}function C_(){return new Ss(Lr(),Ut())}function Fd(e){return An(()=>{const n=e.prototype.constructor,i=n[di]||Vd(n),s=Object.prototype;let c=Object.getPrototypeOf(e.prototype).constructor;for(;c&&c!==s;){const l=c[di]||Vd(c);if(l&&l!==i)return l;c=Object.getPrototypeOf(c)}return l=>new l})}function Vd(e){return we(e)?()=>{const n=Vd(ke(e));return n&&n()}:ji(e)}function w_(e){const n=e[Yt],i=n.type;return 2===i?n.declTNode:1===i?e[pi]:null}function Hs(e){return function Ra(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const i=e.attrs;if(i){const s=i.length;let c=0;for(;c<s;){const l=i[c];if(H(l))break;if(0===l)c+=2;else if("number"==typeof l)for(c++;c<s&&"string"==typeof i[c];)c++;else{if(l===n)return i[c+1];c+=2}}}return null}(Lr(),e)}function ff(e,n=null,i=null,s){const c=Bd(e,n,i,s);return c.resolveInjectorInitializers(),c}function Bd(e,n=null,i=null,s,c=new Set){const l=[i||yr,Ao(e)];return s=s||("object"==typeof e?void 0:Zt(e)),new oi(l,n||Hn(),s||null,c)}let oo=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Rs;static#t=this.NULL=new co;static create(i,s){if(Array.isArray(i))return ff({name:""},s,i,"");{const c=i.name??"";return ff({name:c},i.parent,i.providers,c)}}static#n=this.\u0275prov=or({token:e,providedIn:"any",factory:()=>ei(ha)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function jd(e){return e.ngOriginalError}class Po{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&jd(n);for(;i&&jd(i);)i=jd(i);return i||null}}const rg=new Ze("",{providedIn:"root",factory:()=>dn(Po).handleError.bind(void 0)});let Gl=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=rE;static#t=this.__NG_ENV_ID__=i=>i}return e})();class ig extends Gl{constructor(n){super(),this._lView=n}onDestroy(n){return Sl(this._lView,n),()=>function za(e,n){if(null===e[ta])return;const i=e[ta].indexOf(n);-1!==i&&e[ta].splice(i,1)}(this._lView,n)}}function rE(){return new ig(Ut())}function og(){return qu(Lr(),Ut())}function qu(e,n){return new hc(js(e,n))}let hc=(()=>{class e{constructor(i){this.nativeElement=i}static#e=this.__NG_ELEMENT_ID__=og}return e})();function gf(e){return e instanceof hc?e.nativeElement:e}function ag(e){return n=>{setTimeout(e,void 0,n)}}const Qa=class iE extends Ln.B{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,qi()&&(this.destroyRef=dn(Gl,{optional:!0})??void 0)}emit(n){const i=fe(null);try{super.next(n)}finally{fe(i)}}subscribe(n,i,s){let c=n,l=i||(()=>null),p=s;if(n&&"object"==typeof n){const S=n;c=S.next?.bind(S),l=S.error?.bind(S),p=S.complete?.bind(S)}this.__isAsync&&(l=ag(l),c&&(c=ag(c)),p&&(p=ag(p)));const v=super.subscribe({next:c,error:l,complete:p});return n instanceof ot.yU&&n.add(v),v}};function R_(){return this._results[Symbol.iterator]()}class cg{static#e=Symbol.iterator;get changes(){return this._changes??=new Qa}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const i=cg.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=R_)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){this.dirty=!1;const s=function ns(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Bo(e,n,i){if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++){let c=e[s],l=n[s];if(i&&(c=i(c),l=i(l)),l!==c)return!1}return!0}(this._results,s,i))&&(this._results=s,this.length=s.length,this.last=s[this.length-1],this.first=s[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function zl(e){return!(128&~e.flags)}const $d=new Map;let N_=0;const vf="__ngContext__";function Ps(e,n){Ds(n)?(e[vf]=n[_a],function lg(e){$d.set(e[_a],e)}(n)):e[vf]=n}function V_(e){return L_(e[Go])}function _g(e){return L_(e[Ti])}function L_(e){for(;null!==e&&!As(e);)e=e[Ti];return e}let Dg;function Ag(e){Dg=e}const wf=new Ze("",{providedIn:"root",factory:()=>H_}),H_="ng",Tf=new Ze(""),Df=new Ze("",{providedIn:"platform",factory:()=>"unknown"}),bg=new Ze(""),dE=new Ze("",{providedIn:"root",factory:()=>function cu(){if(void 0!==Dg)return Dg;if(typeof document<"u")return document;throw new _t(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let z_=()=>null;function Xd(e,n,i=!1){return z_(e,n,i)}const X_=new Ze("",{providedIn:"root",factory:()=>!1});let Ql;function $g(e){return function eh(){if(void 0===Ql&&(Ql=null,Nn.trustedTypes))try{Ql=Nn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ql}()?.createScriptURL(e)||e}class tl{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Rt})`}}function fu(e){return e instanceof tl?e.changingThisBreaksApplicationSecurity:e}function nh(e,n){const i=function _E(e){return e instanceof tl&&e.getTypeName()||null}(e);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${Rt})`)}return i===n}const wE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var il=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(il||{});function Nf(e){const n=Fc();return n?n.sanitize(il.URL,e)||"":nh(e,"URL")?fu(e):function Pf(e){return(e=String(e)).match(wE)?e:"unsafe:"+e}(On(e))}function oy(e){const n=Fc();if(n)return $g(n.sanitize(il.RESOURCE_URL,e)||"");if(nh(e,"ResourceURL"))return $g(fu(e));throw new _t(904,!1)}function ay(e,n,i){return function J0(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?oy:Nf}(n,i)(e)}function Fc(){const e=Ut();return e&&e[lo].sanitizer}function Ea(e){return e instanceof Function?e():e}var Xa=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Xa||{});let ol;function nm(e,n){return ol(e,n)}function oh(e,n,i,s,c){if(null!=s){let l,p=!1;As(s)?l=s:Ds(s)&&(p=!0,s=s[pr]);const v=Mr(s);0===e&&null!==i?null==c?_y(n,i,v):_c(n,i,v,c||null,!0):1===e&&null!==i?_c(n,i,v,c||null,!0):2===e?function hh(e,n,i){const s=im(e,n);s&&function nC(e,n,i,s){e.removeChild(n,i,s)}(e,s,n,i)}(n,v,p):3===e&&n.destroyNode(v),null!=l&&function zE(e,n,i,s,c){const l=i[So];l!==Mr(i)&&oh(n,e,s,l,c);for(let v=Di;v<i.length;v++){const S=i[v];Wf(S[Yt],S,e,n,s,l)}}(n,e,l,i,c)}}function al(e,n,i){return e.createElement(n,i)}function ah(e,n){n[lo].changeDetectionScheduler?.notify(1),Wf(e,n,n[Zn],2,null,null)}function py(e,n){const i=e[Sa],s=i.indexOf(n);i.splice(s,1)}function ch(e,n){if(e.length<=Di)return;const i=Di+n,s=e[i];if(s){const c=s[Dc];null!==c&&c!==e&&py(c,s),n>0&&(e[i-1][Ti]=s[Ti]);const l=ao(e,Di+n);!function BE(e,n){ah(e,n),n[pr]=null,n[pi]=null}(s[Yt],s);const p=l[zo];null!==p&&p.detachView(l[Yt]),s[_r]=null,s[Ti]=null,s[vn]&=-129}return s}function uh(e,n){if(!(256&n[vn])){const i=n[Zn];i.destroyNode&&Wf(e,n,i,3,null,null),function $E(e){let n=e[Go];if(!n)return Hf(e[Yt],e);for(;n;){let i=null;if(Ds(n))i=n[Go];else{const s=n[Di];s&&(i=s)}if(!i){for(;n&&!n[Ti]&&n!==e;)Ds(n)&&Hf(n[Yt],n),n=n[_r];null===n&&(n=e),Ds(n)&&Hf(n[Yt],n),i=n&&n[Ti]}n=i}}(n)}}function Hf(e,n){if(256&n[vn])return;const i=fe(null);try{n[vn]&=-129,n[vn]|=256,n[Is]&&function ue(e){if(Je(e),Ye(e))for(let n=0;n<e.producerNode.length;n++)oe(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}(n[Is]),function my(e,n){let i;if(null!=e&&null!=(i=e.destroyHooks))for(let s=0;s<i.length;s+=2){const c=n[i[s]];if(!(c instanceof Ma)){const l=i[s+1];if(Array.isArray(l))for(let p=0;p<l.length;p+=2){const v=c[l[p]],S=l[p+1];Bs(4,v,S);try{S.call(v)}finally{Bs(5,v,S)}}else{Bs(4,c,l);try{l.call(c)}finally{Bs(5,c,l)}}}}}(e,n),function gy(e,n){const i=e.cleanup,s=n[Us];if(null!==i)for(let l=0;l<i.length-1;l+=2)if("string"==typeof i[l]){const p=i[l+3];p>=0?s[p]():s[-p].unsubscribe(),l+=2}else i[l].call(s[i[l+1]]);null!==s&&(n[Us]=null);const c=n[ta];if(null!==c){n[ta]=null;for(let l=0;l<c.length;l++)(0,c[l])()}}(e,n),1===n[Yt].type&&n[Zn].destroy();const s=n[Dc];if(null!==s&&As(n[_r])){s!==n[_r]&&py(s,n);const c=n[zo];null!==c&&c.detachView(e)}!function Wl(e){$d.delete(e[_a])}(n)}finally{fe(i)}}function Gf(e,n,i){return function zf(e,n,i){let s=n;for(;null!==s&&40&s.type;)s=(n=s).parent;if(null===s)return i[pr];{const{componentOffset:c}=s;if(c>-1){const{encapsulation:l}=e.data[s.directiveStart+c];if(l===ds.None||l===ds.Emulated)return null}return js(s,i)}}(e,n.parent,i)}function _c(e,n,i,s,c){e.insertBefore(n,i,s,c)}function _y(e,n,i){e.appendChild(n,i)}function GE(e,n,i,s,c){null!==s?_c(e,n,i,s,c):_y(e,n,i)}function im(e,n){return e.parentNode(n)}let vc,ed=function yc(e,n,i){return 40&e.type?js(e,i):null};function lh(e,n,i,s){const c=Gf(e,s,n),l=n[Zn],v=function gu(e,n,i){return ed(e,n,i)}(s.parent||n[pi],s,n);if(null!=c)if(Array.isArray(i))for(let S=0;S<i.length;S++)GE(l,c,i[S],v,!1);else GE(l,c,i,v,!1);void 0!==vc&&vc(l,s,n,i,c)}function dh(e,n){if(null!==n){const i=n.type;if(3&i)return js(n,e);if(4&i)return sm(-1,e[n.index]);if(8&i){const s=n.child;if(null!==s)return dh(e,s);{const c=e[n.index];return As(c)?sm(-1,c):Mr(c)}}if(32&i)return nm(n,e)()||Mr(e[n.index]);{const s=Uc(e,n);return null!==s?Array.isArray(s)?s[0]:dh(fo(e[jn]),s):dh(e,n.next)}}return null}function Uc(e,n){return null!==n?e[jn][pi].projection[n.projection]:null}function sm(e,n){const i=Di+e+1;if(i<n.length){const s=n[i],c=s[Yt].firstChild;if(null!==c)return dh(s,c)}return n[So]}function om(e,n,i,s,c,l,p){for(;null!=i;){const v=s[i.index],S=i.type;if(p&&0===n&&(v&&Ps(Mr(v),s),i.flags|=2),32&~i.flags)if(8&S)om(e,n,i.child,s,c,l,!1),oh(n,e,c,v,l);else if(32&S){const U=nm(i,s);let Q;for(;Q=U();)oh(n,e,c,Q,l);oh(n,e,c,v,l)}else 16&S?am(e,n,s,i,c,l):oh(n,e,c,v,l);i=p?i.projectionNext:i.next}}function Wf(e,n,i,s,c,l){om(i,s,e.firstChild,n,c,l,!1)}function am(e,n,i,s,c,l){const p=i[jn],S=p[pi].projection[s.projection];if(Array.isArray(S))for(let U=0;U<S.length;U++)oh(n,e,c,S[U],l);else{let U=S;const Q=p[_r];zl(s)&&(U.flags|=128),om(e,n,U,Q,c,l,!0)}}function Cy(e,n,i){""===i?e.removeAttribute(n,"class"):e.setAttribute(n,"class",i)}function cl(e,n,i){const{mergedAttrs:s,classes:c,styles:l}=i;null!==s&&xi(e,n,s),null!==c&&Cy(e,n,c),null!==l&&function Iy(e,n,i){e.setAttribute(n,"style",i)}(e,n,l)}const vr={};function KE(e=1){wy(Rr(),Ut(),Cs()+e,!1)}function wy(e,n,i,s){if(!s)if(3&~n[vn]){const l=e.preOrderHooks;null!==l&&Nc(n,l,0,i)}else{const l=e.preOrderCheckHooks;null!==l&&Bu(n,l,i)}cc(i)}function td(e,n=rr.Default){const i=Ut();return null===i?ei(e,n):zu(Lr(),i,ke(e),n)}function Ty(){throw new Error("invalid")}function Dy(e,n,i,s,c,l){const p=fe(null);try{let v=null;c&_s.SignalBased&&(v=n[s][be]),null!==v&&void 0!==v.transformFn&&(l=v.transformFn(l)),c&_s.HasDecoratorInputTransform&&(l=e.inputTransforms[s].call(n,l)),null!==e.setInput?e.setInput(n,v,l,i,s):Te(n,v,s,l)}finally{fe(p)}}function cm(e,n,i,s,c,l,p,v,S,U,Q){const ce=n.blueprint.slice();return ce[pr]=c,ce[vn]=204|s,(null!==U||e&&2048&e[vn])&&(ce[vn]|=2048),tf(ce),ce[_r]=ce[ai]=e,ce[gi]=i,ce[lo]=p||e&&e[lo],ce[Zn]=v||e&&e[Zn],ce[zr]=S||e&&e[zr]||null,ce[pi]=l,ce[_a]=function ug(){return N_++}(),ce[is]=Q,ce[Il]=U,ce[jn]=2==n.type?e[jn]:ce,ce}function fh(e,n,i,s,c){let l=e.data[n];if(null===l)l=function Ay(e,n,i,s,c){const l=Sc(),p=Lu(),S=e.data[n]=function eI(e,n,i,s,c,l){let p=n?n.injectorIndex:-1,v=0;return function Wa(){return null!==Wn.skipHydrationRootTNode}()&&(v|=128),{type:i,index:s,insertBeforeIndex:null,injectorIndex:p,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:v,providerIndexes:0,value:c,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?l:l&&l.parent,i,n,s,c);return null===e.firstChild&&(e.firstChild=S),null!==l&&(p?null==l.child&&null!==S.parent&&(l.child=S):null===l.next&&(l.next=S,S.prev=l)),S}(e,n,i,s,c),function qp(){return Wn.lFrame.inI18n}()&&(l.flags|=32);else if(64&l.type){l.type=i,l.value=s,l.attrs=c;const p=function ia(){const e=Wn.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();l.injectorIndex=null===p?-1:p.injectorIndex}return va(l,!0),l}function Kf(e,n,i,s){if(0===i)return-1;const c=n.length;for(let l=0;l<i;l++)n.push(s),e.blueprint.push(s),e.data.push(null);return c}function by(e,n,i,s,c){const l=Cs(),p=2&s;try{cc(-1),p&&n.length>Qn&&wy(e,n,Qn,!1),Bs(p?2:0,c),i(s,c)}finally{cc(l),Bs(p?3:1,c)}}function um(e,n,i){if(Kc(n)){const s=fe(null);try{const l=n.directiveEnd;for(let p=n.directiveStart;p<l;p++){const v=e.data[p];v.contentQueries&&v.contentQueries(1,i[p],p)}}finally{fe(s)}}}function lm(e,n,i){Pl()&&(function uC(e,n,i,s){const c=i.directiveStart,l=i.directiveEnd;na(i)&&function ph(e,n,i){const s=js(n,e),c=Py(i);let p=16;i.signals?p=4096:i.onPush&&(p=64);const v=mh(e,cm(e,c,null,p,s,n,null,e[lo].rendererFactory.createRenderer(s,i),null,null,null));e[n.index]=v}(n,i,e.data[c+i.componentOffset]),e.firstCreatePass||Gt(i,n),Ps(s,n);const p=i.initialInputs;for(let v=c;v<l;v++){const S=e.data[v],U=oa(n,e,v,i);Ps(U,n),null!==p&&sI(0,v-c,U,S,0,p),no(S)&&(Ko(i.index,n)[gi]=oa(n,e,v,i))}}(e,n,i,js(i,n)),!(64&~i.flags)&&rI(e,n,i))}function Sy(e,n,i=js){const s=n.localNames;if(null!==s){let c=n.index+1;for(let l=0;l<s.length;l+=2){const p=s[l+1],v=-1===p?i(n,e):e[p];e[c++]=v}}}function Py(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=qf(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function qf(e,n,i,s,c,l,p,v,S,U,Q){const ce=Qn+s,xe=ce+c,qe=function mu(e,n){const i=[];for(let s=0;s<n;s++)i.push(s<e?null:vr);return i}(ce,xe),mt="function"==typeof U?U():U;return qe[Yt]={type:e,blueprint:qe,template:i,queries:null,viewQuery:v,declTNode:n,data:qe.slice().fill(null,ce),bindingStartIndex:ce,expandoStartIndex:xe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:S,consts:mt,incompleteFirstPass:!1,ssrId:Q}}let My=()=>null;function tI(e,n,i,s,c){for(let l in n){if(!n.hasOwnProperty(l))continue;const p=n[l];if(void 0===p)continue;s??={};let v,S=_s.None;Array.isArray(p)?(v=p[0],S=p[1]):v=p;let U=l;if(null!==c){if(!c.hasOwnProperty(l))continue;U=c[l]}0===e?nI(s,i,U,v,S):nI(s,i,U,v)}return s}function nI(e,n,i,s,c){let l;e.hasOwnProperty(i)?(l=e[i]).push(n,s):l=e[i]=[n,s],void 0!==c&&l.push(c)}function ca(e,n,i,s,c,l,p,v){const S=js(n,i);let Q,U=n.inputs;!v&&null!=U&&(Q=U[s])?(ul(e,i,Q,s,c),na(n)&&function oC(e,n){const i=Ko(n,e);16&i[vn]||(i[vn]|=64)}(i,n.index)):3&n.type&&(s=function Ry(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(s),c=null!=p?p(c,n.value||"",s):c,l.setProperty(S,s,c))}function Oy(e,n,i,s){if(Pl()){const c=null===s?null:{"":-1},l=function Qf(e,n){const i=e.directiveRegistry;let s=null,c=null;if(i)for(let l=0;l<i.length;l++){const p=i[l];if(Ta(n,p.selectors,!1))if(s||(s=[]),no(p))if(null!==p.findHostDirectiveDefs){const v=[];c=c||new Map,p.findHostDirectiveDefs(p,v,c),s.unshift(...v,p),fm(e,n,v.length)}else s.unshift(p),fm(e,n,0);else c=c||new Map,p.findHostDirectiveDefs?.(p,s,c),s.push(p)}return null===s?null:[s,c]}(e,i);let p,v;null===l?p=v=null:[p,v]=l,null!==p&&dm(e,n,i,p,c,v),c&&function iI(e,n,i){if(n){const s=e.localNames=[];for(let c=0;c<n.length;c+=2){const l=i[n[c+1]];if(null==l)throw new _t(-301,!1);s.push(n[c],l)}}}(i,s,c)}i.mergedAttrs=x(i.mergedAttrs,i.attrs)}function dm(e,n,i,s,c,l){for(let U=0;U<s.length;U++)so(Gt(i,n),e,s[U].type);!function xy(e,n,i){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+i,e.providerIndexes=n}(i,e.data.length,s.length);for(let U=0;U<s.length;U++){const Q=s[U];Q.providersResolver&&Q.providersResolver(Q)}let p=!1,v=!1,S=Kf(e,n,s.length,null);for(let U=0;U<s.length;U++){const Q=s[U];i.mergedAttrs=x(i.mergedAttrs,Q.hostAttrs),ky(e,i,n,S,Q),pm(S,Q,c),null!==Q.contentQueries&&(i.flags|=4),(null!==Q.hostBindings||null!==Q.hostAttrs||0!==Q.hostVars)&&(i.flags|=64);const ce=Q.type.prototype;!p&&(ce.ngOnChanges||ce.ngOnInit||ce.ngDoCheck)&&((e.preOrderHooks??=[]).push(i.index),p=!0),!v&&(ce.ngOnChanges||ce.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(i.index),v=!0),S++}!function sC(e,n,i){const c=n.directiveEnd,l=e.data,p=n.attrs,v=[];let S=null,U=null;for(let Q=n.directiveStart;Q<c;Q++){const ce=l[Q],xe=i?i.get(ce):null,mt=xe?xe.outputs:null;S=tI(0,ce.inputs,Q,S,xe?xe.inputs:null),U=tI(1,ce.outputs,Q,U,mt);const jt=null===S||null===p||Jn(n)?null:Fy(S,Q,p);v.push(jt)}null!==S&&(S.hasOwnProperty("class")&&(n.flags|=8),S.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=v,n.inputs=S,n.outputs=U}(e,i,l)}function rI(e,n,i){const s=i.directiveStart,c=i.directiveEnd,l=i.index,p=function ac(){return Wn.lFrame.currentDirectiveIndex}();try{cc(l);for(let v=s;v<c;v++){const S=e.data[v],U=n[v];Rc(v),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&hm(S,U)}}finally{cc(-1),Rc(p)}}function hm(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function fm(e,n,i){n.componentOffset=i,(e.components??=[]).push(n.index)}function pm(e,n,i){if(i){if(n.exportAs)for(let s=0;s<n.exportAs.length;s++)i[n.exportAs[s]]=e;no(n)&&(i[""]=e)}}function ky(e,n,i,s,c){e.data[s]=c;const l=c.factory||(c.factory=ji(c.type)),p=new Ma(l,no(c),td);e.blueprint[s]=p,i[s]=p,function Ny(e,n,i,s,c){const l=c.hostBindings;if(l){let p=e.hostBindingOpCodes;null===p&&(p=e.hostBindingOpCodes=[]);const v=~n.index;(function cC(e){let n=e.length;for(;n>0;){const i=e[--n];if("number"==typeof i&&i<0)return i}return 0})(p)!=v&&p.push(v),p.push(i,s,l)}}(e,n,s,Kf(e,i,c.hostVars,vr),c)}function Na(e,n,i,s,c,l){const p=js(e,n);!function gm(e,n,i,s,c,l,p){if(null==l)e.removeAttribute(n,c,i);else{const v=null==p?On(l):p(l,s||"",c);e.setAttribute(n,c,v,i)}}(n[Zn],p,l,e.value,i,s,c)}function sI(e,n,i,s,c,l){const p=l[n];if(null!==p)for(let v=0;v<p.length;)Dy(s,i,p[v++],p[v++],p[v++],p[v++])}function Fy(e,n,i){let s=null,c=0;for(;c<i.length;){const l=i[c];if(0!==l)if(5!==l){if("number"==typeof l)break;if(e.hasOwnProperty(l)){null===s&&(s=[]);const p=e[l];for(let v=0;v<p.length;v+=3)if(p[v]===n){s.push(l,p[v+1],p[v+2],i[c+1]);break}}c+=2}else c+=2;else c+=4}return s}function gh(e,n,i,s){return[e,!0,0,n,null,s,null,i,null,null]}function Vy(e,n){const i=e.contentQueries;if(null!==i){const s=fe(null);try{for(let c=0;c<i.length;c+=2){const p=i[c+1];if(-1!==p){const v=e.data[p];xl(i[c]),v.contentQueries(2,n[p],p)}}}finally{fe(s)}}}function mh(e,n){return e[Go]?e[El][Ti]=n:e[Go]=n,e[El]=n,n}function Xf(e,n,i){xl(0);const s=fe(null);try{n(e,i)}finally{fe(s)}}function Ia(e){return e[Us]||(e[Us]=[])}function Oo(e){return e.cleanup||(e.cleanup=[])}function _h(e,n){const i=e[zr],s=i?i.get(Po,null):null;s&&s.handleError(n)}function ul(e,n,i,s,c){for(let l=0;l<i.length;){const p=i[l++],v=i[l++],S=i[l++];Dy(e.data[p],n[p],s,v,S,c)}}function qo(e,n){const i=Ko(n,e),s=i[Yt];!function oI(e,n){for(let i=n.length;i<e.blueprint.length;i++)n.push(e.blueprint[i])}(s,i);const c=i[pr];null!==c&&null===i[is]&&(i[is]=Xd(c,i[zr])),yh(s,i,i[gi])}function yh(e,n,i){tu(n);try{const s=e.viewQuery;null!==s&&Xf(1,s,i);const c=e.template;null!==c&&by(e,n,c,1,i),e.firstCreatePass&&(e.firstCreatePass=!1),n[zo]?.finishViewCreation(e),e.staticContentQueries&&Vy(e,n),e.staticViewQueries&&Xf(2,e.viewQuery,i);const l=e.components;null!==l&&function rd(e,n){for(let i=0;i<n.length;i++)qo(e,n[i])}(n,l)}catch(s){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),s}finally{n[vn]&=-5,kl()}}function xa(e,n){return!n||null===n.firstChild||zl(e)}function vh(e,n,i,s=!0){const c=n[Yt];if(function HE(e,n,i,s){const c=Di+s,l=i.length;s>0&&(i[c-1][Ti]=n),s<l-Di?(n[Ti]=i[c],Eo(i,Di+s,n)):(i.push(n),n[Ti]=null),n[_r]=i;const p=n[Dc];null!==p&&i!==p&&function $f(e,n){const i=e[Sa];n[jn]!==n[_r][_r][jn]&&(e[vn]|=Su.HasTransplantedViews),null===i?e[Sa]=[n]:i.push(n)}(p,n);const v=n[zo];null!==v&&v.insertView(e),bc(n),n[vn]|=128}(c,n,e,i),s){const p=sm(i,e),v=n[Zn],S=im(v,e[So]);null!==S&&function jE(e,n,i,s,c,l){s[pr]=c,s[pi]=n,Wf(e,s,i,1,c,l)}(c,e[pi],v,n,S,p)}const l=n[is];null!==l&&null!==l.firstChild&&(l.firstChild=null)}function Eh(e,n,i,s,c=!1){for(;null!==i;){const l=n[i.index];null!==l&&s.push(Mr(l)),As(l)&&Ly(l,s);const p=i.type;if(8&p)Eh(e,n,i.child,s);else if(32&p){const v=nm(i,n);let S;for(;S=v();)s.push(S)}else if(16&p){const v=Uc(n,i);if(Array.isArray(v))s.push(...v);else{const S=fo(n[jn]);Eh(S[Yt],S,v,s,!0)}}i=c?i.projectionNext:i.next}return s}function Ly(e,n){for(let i=Di;i<e.length;i++){const s=e[i],c=s[Yt].firstChild;null!==c&&Eh(s[Yt],s,c,n)}e[So]!==e[pr]&&n.push(e[So])}let Uy=[];const jy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Fu(e.lView)},consumerOnSignalRead(){this.lView[Is]=this}},Ih=100;function Ch(e,n=!0,i=0){const s=e[lo],c=s.rendererFactory;c.begin?.();try{!function cI(e,n){Im(e,n);let i=0;for(;bl(e);){if(i===Ih)throw new _t(103,!1);i++,Im(e,1)}}(e,i)}catch(p){throw n&&_h(e,p),p}finally{c.end?.(),s.inlineEffectRunner?.flush()}}function uI(e,n,i,s){const c=n[vn];if(!(256&~c))return;n[lo].inlineEffectRunner?.flush(),tu(n);let p=null,v=null;(function Hy(e){return 2!==e.type})(e)&&(v=function By(e){return e[Is]??function aI(e){const n=Uy.pop()??Object.create(jy);return n.lView=e,n}(e)}(n),p=function We(e){return e&&(e.nextProducerIndex=0),fe(e)}(v));try{tf(n),function Pc(e){return Wn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==i&&by(e,n,i,2,s);const S=!(3&~c);if(S){const ce=e.preOrderCheckHooks;null!==ce&&Bu(n,ce,null)}else{const ce=e.preOrderHooks;null!==ce&&Nc(n,ce,0,null),ju(n,0)}if(function lI(e){for(let n=V_(e);null!==n;n=_g(n)){if(!(n[vn]&Su.HasTransplantedViews))continue;const i=n[Sa];for(let s=0;s<i.length;s++){Ga(i[s])}}}(n),vm(n,0),null!==e.contentQueries&&Vy(e,n),S){const ce=e.contentCheckHooks;null!==ce&&Bu(n,ce)}else{const ce=e.contentHooks;null!==ce&&Nc(n,ce,1),ju(n,1)}!function qE(e,n){const i=e.hostBindingOpCodes;if(null!==i)try{for(let s=0;s<i.length;s++){const c=i[s];if(c<0)cc(~c);else{const l=c,p=i[++s],v=i[++s];Pd(p,l),v(2,n[l])}}}finally{cc(-1)}}(e,n);const U=e.components;null!==U&&zy(n,U,0);const Q=e.viewQuery;if(null!==Q&&Xf(2,Q,s),S){const ce=e.viewCheckHooks;null!==ce&&Bu(n,ce)}else{const ce=e.viewHooks;null!==ce&&Nc(n,ce,2),ju(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[nc]){for(const ce of n[nc])ce();n[nc]=null}n[vn]&=-73}catch(S){throw Fu(n),S}finally{null!==v&&(function $e(e,n){if(fe(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Ye(e))for(let i=e.nextProducerIndex;i<e.producerNode.length;i++)oe(e.producerNode[i],e.producerIndexOfThis[i]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}(v,p),function ym(e){e.lView[Is]!==e&&(e.lView=null,Uy.push(e))}(v)),kl()}}function vm(e,n){for(let i=V_(e);null!==i;i=_g(i))for(let s=Di;s<i.length;s++)Em(i[s],n)}function Gy(e,n,i){Em(Ko(n,e),i)}function Em(e,n){Zc(e)&&Im(e,n)}function Im(e,n){const s=e[Yt],c=e[vn],l=e[Is];let p=!!(0===n&&16&c);if(p||=!!(64&c&&0===n),p||=!!(1024&c),p||=!(!l?.dirty||!Pt(l)),l&&(l.dirty=!1),e[vn]&=-9217,p)uI(s,e,s.template,e[gi]);else if(8192&c){vm(e,1);const v=s.components;null!==v&&zy(e,v,1)}}function zy(e,n,i){for(let s=0;s<n.length;s++)Gy(e,n[s],i)}function id(e){for(e[lo].changeDetectionScheduler?.notify();e;){e[vn]|=64;const n=fo(e);if(Ba(e)&&!n)return e;e=n}return null}class wh{get rootNodes(){const n=this._lView,i=n[Yt];return Eh(i,n,i.firstChild,[])}constructor(n,i,s=!0){this._lView=n,this._cdRefInjectingView=i,this.notifyErrorHandler=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gi]}set context(n){this._lView[gi]=n}get destroyed(){return!(256&~this._lView[vn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[_r];if(As(n)){const i=n[8],s=i?i.indexOf(this):-1;s>-1&&(ch(n,s),ao(i,s))}this._attachedToViewContainer=!1}uh(this._lView[Yt],this._lView)}onDestroy(n){Sl(this._lView,n)}markForCheck(){id(this._cdRefInjectingView||this._lView)}detach(){this._lView[vn]&=-129}reattach(){bc(this._lView),this._lView[vn]|=128}detectChanges(){this._lView[vn]|=1024,Ch(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _t(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ah(this._lView[Yt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new _t(902,!1);this._appRef=n,bc(this._lView)}}let Th=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=ll}return e})();const dI=Th,Cm=class extends dI{constructor(n,i,s){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=s}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,s){const c=function Ya(e,n,i,s){const c=fe(null);try{const l=n.tView,S=cm(e,l,i,4096&e[vn]?4096:16,null,n,null,null,s?.injector??null,s?.embeddedViewInjector??null,s?.dehydratedView??null);S[Dc]=e[n.index];const Q=e[zo];return null!==Q&&(S[zo]=Q.createEmbeddedView(l)),yh(l,S,i),S}finally{fe(c)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:s});return new wh(c)}};function ll(){return Jf(Lr(),Ut())}function Jf(e,n){return 4&e.type?new Cm(n,e,qu(e,n)):null}class Be{}class Bc{}class sd{}class Am{resolveComponentFactory(n){throw function vI(e){const n=Error(`No component factory found for ${Zt(e)}.`);return n.ngComponent=e,n}(n)}}let Ah=(()=>{class e{static#e=this.NULL=new Am}return e})();class qy{}let _u=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function No(){const e=Ut(),i=Ko(Lr().index,e);return(Ds(i)?i:e)[Zn]}()}return e})(),EI=(()=>{class e{static#e=this.\u0275prov=or({token:e,providedIn:"root",factory:()=>null})}return e})();const dl={},ad=new Set;function Ec(e){ad.has(e)||(ad.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Qy(...e){}class ws{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qa(!1),this.onMicrotaskEmpty=new Qa(!1),this.onStable=new Qa(!1),this.onError=new Qa(!1),typeof Zone>"u")throw new _t(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!s&&i,c.shouldCoalesceRunChangeDetection=s,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function np(){const e="function"==typeof Nn.requestAnimationFrame;let n=Nn[e?"requestAnimationFrame":"setTimeout"],i=Nn[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const c=i[Zone.__symbol__("OriginalDelegate")];c&&(i=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Xy(e){const n=()=>{!function Pm(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Nn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,rp(e),e.isCheckStableRunning=!0,bh(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),rp(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,s,c,l,p,v)=>{if(function Om(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(v))return i.invokeTask(c,l,p,v);try{return Yy(e),i.invokeTask(c,l,p,v)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||e.shouldCoalesceRunChangeDetection)&&n(),Mm(e)}},onInvoke:(i,s,c,l,p,v,S)=>{try{return Yy(e),i.invoke(c,l,p,v,S)}finally{e.shouldCoalesceRunChangeDetection&&n(),Mm(e)}},onHasTask:(i,s,c,l)=>{i.hasTask(c,l),s===c&&("microTask"==l.change?(e._hasPendingMicrotasks=l.microTask,rp(e),bh(e)):"macroTask"==l.change&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(i,s,c,l)=>(i.handleError(c,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ws.isInAngularZone())throw new _t(909,!1)}static assertNotInAngularZone(){if(ws.isInAngularZone())throw new _t(909,!1)}run(n,i,s){return this._inner.run(n,i,s)}runTask(n,i,s,c){const l=this._inner,p=l.scheduleEventTask("NgZoneEvent: "+c,n,Sm,Qy,Qy);try{return l.runTask(p,i,s)}finally{l.cancelTask(p)}}runGuarded(n,i,s){return this._inner.runGuarded(n,i,s)}runOutsideAngular(n){return this._outer.run(n)}}const Sm={};function bh(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function rp(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Yy(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Mm(e){e._nesting--,bh(e)}class Rm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qa,this.onMicrotaskEmpty=new Qa,this.onStable=new Qa,this.onError=new Qa}run(n,i,s){return n.apply(i,s)}runGuarded(n,i,s){return n.apply(i,s)}runOutsideAngular(n){return n()}runTask(n,i,s,c){return n.apply(i,s)}}var hl=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(hl||{});const ip={destroy(){}};function po(e,n){!n&&function Os(e){if(!qi())throw new _t(-203,!1)}();const i=n?.injector??dn(oo);if(!function aa(e){return"browser"===(e??dn(oo)).get(Df)}(i))return ip;Ec("NgAfterNextRender");const s=i.get(cd),c=s.handler??=new Ph,l=n?.phase??hl.MixedReadWrite,p=()=>{c.unregister(S),v()},v=i.get(Gl).onDestroy(p),S=to(i,()=>new xo(l,()=>{p(),e()}));return c.register(S),{destroy:p}}class xo{constructor(n,i){this.phase=n,this.callbackFn=i,this.zone=dn(ws),this.errorHandler=dn(Po,{optional:!0}),dn(Be,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){this.errorHandler?.handleError(n)}}}class Ph{constructor(){this.executingCallbacks=!1,this.buckets={[hl.EarlyRead]:new Set,[hl.Write]:new Set,[hl.MixedReadWrite]:new Set,[hl.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const i of n)i.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(const n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}}let cd=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const s of i)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=or({token:e,providedIn:"root",factory:()=>new e})}return e})();function yu(e){return!!Oi(e)}function dd(e,n,i){let s=i?e.styles:null,c=i?e.classes:null,l=0;if(null!==n)for(let p=0;p<n.length;p++){const v=n[p];"number"==typeof v?l=v:1==l?c=en(c,v):2==l&&(s=en(s,v+": "+n[++p]+";"))}i?e.styles=s:e.stylesWithoutHost=s,i?e.classes=c:e.classesWithoutHost=c}class cp extends Ah{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=lr(n);return new hd(i,this.ngModule)}}function Eu(e){const n=[];for(const i in e){if(!e.hasOwnProperty(i))continue;const s=e[i];void 0!==s&&n.push({propName:Array.isArray(s)?s[0]:s,templateName:i})}return n}class fl{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,s){s=si(s);const c=this.injector.get(n,dl,s);return c!==dl||i===dl?c:this.parentInjector.get(n,i,s)}}class hd extends sd{get inputs(){const n=this.componentDef,i=n.inputTransforms,s=Eu(n.inputs);if(null!==i)for(const c of s)i.hasOwnProperty(c.propName)&&(c.transform=i[c.propName]);return s}get outputs(){return Eu(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function La(e){return e.map(Va).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,s,c){const l=fe(null);try{let p=(c=c||this.ngModule)instanceof Tr?c:c?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new fl(n,p):n,S=v.get(qy,null);if(null===S)throw new _t(407,!1);const U=v.get(EI,null),xe={rendererFactory:S,sanitizer:U,inlineEffectRunner:null,afterRenderEventManager:v.get(cd,null),changeDetectionScheduler:v.get(Be,null)},qe=S.createRenderer(null,this.componentDef),mt=this.componentDef.selectors[0][0]||"div",jt=s?function QE(e,n,i,s){const l=s.get(X_,!1)||i===ds.ShadowDom,p=e.selectRootElement(n,l);return function XE(e){My(e)}(p),p}(qe,s,this.componentDef.encapsulation,v):al(qe,mt,function Zy(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(mt));let an=512;this.componentDef.signals?an|=4096:this.componentDef.onPush||(an|=16);let ln=null;null!==jt&&(ln=Xd(jt,v,!0));const qt=qf(0,null,null,1,0,null,null,null,null,null,null),gr=cm(null,qt,null,an,null,null,xe,qe,v,null,ln);let ci,Zi;tu(gr);try{const _o=this.componentDef;let Fa,zp=null;_o.findHostDirectiveDefs?(Fa=[],zp=new Map,_o.findHostDirectiveDefs(_o,Fa,zp),Fa.push(_o)):Fa=[_o];const cA=function ev(e,n){const i=e[Yt],s=Qn;return e[s]=n,fh(i,s,2,"#host",null)}(gr,jt),UR=function Qo(e,n,i,s,c,l,p){const v=c[Yt];!function tv(e,n,i,s){for(const c of e)n.mergedAttrs=x(n.mergedAttrs,c.hostAttrs);null!==n.mergedAttrs&&(dd(n,n.mergedAttrs,!0),null!==i&&cl(s,i,n))}(s,e,n,p);let S=null;null!==n&&(S=Xd(n,c[zr]));const U=l.rendererFactory.createRenderer(n,i);let Q=16;i.signals?Q=4096:i.onPush&&(Q=64);const ce=cm(c,Py(i),null,Q,c[e.index],e,l,U,null,null,S);return v.firstCreatePass&&fm(v,e,s.length-1),mh(c,ce),c[e.index]=ce}(cA,jt,_o,Fa,gr,xe,qe);Zi=sc(qt,Qn),jt&&function Oh(e,n,i,s){if(s)xi(e,i,["ng-version","17.3.12"]);else{const{attrs:c,classes:l}=function eo(e){const n=[],i=[];let s=1,c=2;for(;s<e.length;){let l=e[s];if("string"==typeof l)2===c?""!==l&&n.push(l,e[++s]):8===c&&i.push(l);else{if(!fi(c))break;c=l}s++}return{attrs:n,classes:i}}(n.selectors[0]);c&&xi(e,i,c),l&&l.length>0&&Cy(e,i,l.join(" "))}}(qe,_o,jt,s),void 0!==i&&function CI(e,n,i){const s=e.projection=[];for(let c=0;c<n.length;c++){const l=i[c];s.push(null!=l?Array.from(l):null)}}(Zi,this.ngContentSelectors,i),ci=function Rh(e,n,i,s,c,l){const p=Lr(),v=c[Yt],S=js(p,c);dm(v,c,p,i,null,s);for(let Q=0;Q<i.length;Q++)Ps(oa(c,v,p.directiveStart+Q,p),c);rI(v,c,p),S&&Ps(S,c);const U=oa(c,v,p.directiveStart+p.componentOffset,p);if(e[gi]=c[gi]=U,null!==l)for(const Q of l)Q(U,n);return um(v,p,c),U}(UR,_o,Fa,zp,gr,[wI]),yh(qt,gr,null)}finally{kl()}return new Mh(this.componentType,ci,qu(Zi,gr),gr,Zi)}finally{fe(l)}}}class Mh extends Bc{constructor(n,i,s,c,l){super(),this.location=s,this._rootLView=c,this._tNode=l,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new wh(c,void 0,!1),this.componentType=n}setInput(n,i){const s=this._tNode.inputs;let c;if(null!==s&&(c=s[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const l=this._rootLView;ul(l[Yt],l,c,n,i),this.previousInputValues.set(n,i),id(Ko(this._tNode.index,l))}}get injector(){return new Ss(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function wI(){const e=Lr();Fl(Ut()[Yt],e)}let $c=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=TI}return e})();function TI(){return kh(Lr(),Ut())}const DI=$c,Nh=class extends DI{constructor(n,i,s){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=s}get element(){return qu(this._hostTNode,this._hostLView)}get injector(){return new Ss(this._hostTNode,this._hostLView)}get parentInjector(){const n=Ar(this._hostTNode,this._hostLView);if(Bl(n)){const i=xc(n,this._hostLView),s=ru(n);return new Ss(i[Yt].data[s+8],i)}return new Ss(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=Vm(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-Di}createEmbeddedView(n,i,s){let c,l;"number"==typeof s?c=s:null!=s&&(c=s.index,l=s.injector);const v=n.createEmbeddedViewImpl(i||{},l,null);return this.insertImpl(v,c,xa(this._hostTNode,null)),v}createComponent(n,i,s,c,l){const p=n&&!function Ot(e){return"function"==typeof e}(n);let v;if(p)v=i;else{const mt=i||{};v=mt.index,s=mt.injector,c=mt.projectableNodes,l=mt.environmentInjector||mt.ngModuleRef}const S=p?n:new hd(lr(n)),U=s||this.parentInjector;if(!l&&null==S.ngModule){const jt=(p?U:this.parentInjector).get(Tr,null);jt&&(l=jt)}lr(S.componentType??{});const qe=S.create(U,c,null,l);return this.insertImpl(qe.hostView,v,xa(this._hostTNode,null)),qe}insert(n,i){return this.insertImpl(n,i,!0)}insertImpl(n,i,s){const c=n._lView;if(function Dl(e){return As(e[_r])}(c)){const v=this.indexOf(n);if(-1!==v)this.detach(v);else{const S=c[_r],U=new Nh(S,S[pi],S[_r]);U.detach(U.indexOf(n))}}const l=this._adjustIndex(i),p=this._lContainer;return vh(p,c,l,s),n.attachToViewContainerRef(),Eo(xh(p),l,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=Vm(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),s=ch(this._lContainer,i);s&&(ao(xh(this._lContainer),i),uh(s[Yt],s))}detach(n){const i=this._adjustIndex(n,-1),s=ch(this._lContainer,i);return s&&null!=ao(xh(this._lContainer),i)?new wh(s):null}_adjustIndex(n,i=0){return n??this.length+i}};function Vm(e){return e[8]}function xh(e){return e[8]||(e[8]=[])}function kh(e,n){let i;const s=n[e.index];return As(s)?i=s:(i=gh(s,n,null,e),n[e.index]=i,mh(n,i)),Lm(i,n,e,s),new Nh(i,e,n)}let Lm=function dp(e,n,i,s){if(e[So])return;let c;c=8&i.type?Mr(s):function Iu(e,n){const i=e[Zn],s=i.createComment(""),c=js(n,e);return _c(i,im(i,c),s,function iC(e,n){return e.nextSibling(n)}(i,c),!1),s}(n,i),e[So]=c},up=()=>!1;class fd{constructor(n){this.queryList=n,this.matches=null}clone(){return new fd(this.queryList)}setDirty(){this.queryList.setDirty()}}class hp{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const s=null!==n.contentQueries?n.contentQueries[0]:i.length,c=[];for(let l=0;l<s;l++){const p=i.getByIndex(l);c.push(this.queries[p.indexInDeclarationView].clone())}return new hp(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==Gm(n,i).matches&&this.queries[i].setDirty()}}class fp{constructor(n,i,s=null){this.flags=i,this.read=s,this.predicate="string"==typeof n?function SI(e){return e.split(",").map(n=>n.trim())}(n):n}}class pl{constructor(n=[]){this.queries=n}elementStart(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let s=0;s<this.length;s++){const c=null!==i?i.length:0,l=this.getByIndex(s).embeddedTView(n,c);l&&(l.indexInDeclarationView=s,null!==i?i.push(l):i=[l])}return null!==i?new pl(i):null}template(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Hc{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Hc(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const i=this._declarationNodeIndex;let s=n.parent;for(;null!==s&&8&s.type&&s.index!==i;)s=s.parent;return i===(null!==s?s.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const s=this.metadata.predicate;if(Array.isArray(s))for(let c=0;c<s.length;c++){const l=s[c];this.matchTNodeWithReadOption(n,i,Um(i,l)),this.matchTNodeWithReadOption(n,i,Ka(i,n,l,!1,!1))}else s===Th?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Ka(i,n,s,!1,!1))}matchTNodeWithReadOption(n,i,s){if(null!==s){const c=this.metadata.read;if(null!==c)if(c===hc||c===$c||c===Th&&4&i.type)this.addMatch(i.index,-2);else{const l=Ka(i,n,c,!1,!1);null!==l&&this.addMatch(i.index,l)}else this.addMatch(i.index,s)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function Um(e,n){const i=e.localNames;if(null!==i)for(let s=0;s<i.length;s+=2)if(i[s]===n)return i[s+1];return null}function iv(e,n,i,s){return-1===i?function bI(e,n){return 11&e.type?qu(e,n):4&e.type?Jf(e,n):null}(n,e):-2===i?function sv(e,n,i){return i===hc?qu(n,e):i===Th?Jf(n,e):i===$c?kh(n,e):void 0}(e,n,s):oa(e,e[Yt],i,n)}function Bm(e,n,i,s){const c=n[zo].queries[s];if(null===c.matches){const l=e.data,p=i.matches,v=[];for(let S=0;null!==p&&S<p.length;S+=2){const U=p[S];v.push(U<0?null:iv(n,l[U],p[S+1],i.metadata.read))}c.matches=v}return c.matches}function Fh(e,n,i,s){const c=e.queries.getByIndex(i),l=c.matches;if(null!==l){const p=Bm(e,n,c,i);for(let v=0;v<l.length;v+=2){const S=l[v];if(S>0)s.push(p[v/2]);else{const U=l[v+1],Q=n[-S];for(let ce=Di;ce<Q.length;ce++){const xe=Q[ce];xe[Dc]===xe[_r]&&Fh(xe[Yt],xe,U,s)}if(null!==Q[Sa]){const ce=Q[Sa];for(let xe=0;xe<ce.length;xe++){const qe=ce[xe];Fh(qe[Yt],qe,U,s)}}}}}return s}function jm(e,n,i){const s=new cg(!(4&~i));return function ZE(e,n,i,s){const c=Ia(n);c.push(i),e.firstCreatePass&&Oo(e).push(s,c.length-1)}(e,n,s,s.destroy),(n[zo]??=new hp).queries.push(new fd(s))-1}function Hm(e,n,i){null===e.queries&&(e.queries=new pl),e.queries.track(new Hc(n,i))}function Gm(e,n){return e.queries.getByIndex(n)}function Cu(e,n){const i=e[Yt],s=Gm(i,n);return s.crossesNgTemplate?Fh(i,e,n,[]):Bm(i,e,s,n)}function Lh(e){return function Ic(e){return"function"==typeof e&&void 0!==e[be]}(e)&&"function"==typeof e.set}function Ep(e){let n=function yv(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),i=!0;const s=[e];for(;n;){let c;if(no(e))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new _t(903,!1);c=n.\u0275dir}if(c){if(i){s.push(c);const p=e;p.inputs=Gh(e.inputs),p.inputTransforms=Gh(e.inputTransforms),p.declaredInputs=Gh(e.declaredInputs),p.outputs=Gh(e.outputs);const v=c.hostBindings;v&&Ev(e,v);const S=c.viewQuery,U=c.contentQueries;if(S&&Ym(e,S),U&&Jm(e,U),Hh(e,c),Nr(e.outputs,c.outputs),no(c)&&c.data.animation){const Q=e.data;Q.animation=(Q.animation||[]).concat(c.data.animation)}}const l=c.features;if(l)for(let p=0;p<l.length;p++){const v=l[p];v&&v.ngInherit&&v(e),v===Ep&&(i=!1)}}n=Object.getPrototypeOf(n)}!function vv(e){let n=0,i=null;for(let s=e.length-1;s>=0;s--){const c=e[s];c.hostVars=n+=c.hostVars,c.hostAttrs=x(c.hostAttrs,i=x(i,c.hostAttrs))}}(s)}function Hh(e,n){for(const i in n.inputs){if(!n.inputs.hasOwnProperty(i)||e.inputs.hasOwnProperty(i))continue;const s=n.inputs[i];if(void 0!==s&&(e.inputs[i]=s,e.declaredInputs[i]=n.declaredInputs[i],null!==n.inputTransforms)){const c=Array.isArray(s)?s[0]:s;if(!n.inputTransforms.hasOwnProperty(c))continue;e.inputTransforms??={},e.inputTransforms[c]=n.inputTransforms[c]}}}function Gh(e){return e===wi?{}:e===yr?[]:e}function Ym(e,n){const i=e.viewQuery;e.viewQuery=i?(s,c)=>{n(s,c),i(s,c)}:n}function Jm(e,n){const i=e.contentQueries;e.contentQueries=i?(s,c,l)=>{n(s,c,l),i(s,c,l)}:n}function Ev(e,n){const i=e.hostBindings;e.hostBindings=i?(s,c)=>{n(s,c),i(s,c)}:n}function ua(e){const n=e.inputConfig,i={};for(const s in n)if(n.hasOwnProperty(s)){const c=n[s];Array.isArray(c)&&c[3]&&(i[s]=c[3])}e.inputTransforms=i}class Tu{}class t_{}function gd(e,n){return new V(e,n??null,[])}class V extends Tu{constructor(n,i,s){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cp(this);const c=Oi(n);this._bootstrapComponents=Ea(c.bootstrap),this._r3Injector=Bd(n,i,[{provide:Tu,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver},...s],Zt(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class G extends t_{constructor(n){super(),this.moduleType=n}create(n){return new V(this.moduleType,n,[])}}class gt extends Tu{constructor(n){super(),this.componentFactoryResolver=new cp(this),this.instance=null;const i=new oi([...n.providers,{provide:Tu,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver}],n.parent||Hn(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function kt(e,n,i=null){return new gt({providers:e,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let Ja=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new In.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vl(e){return!!LI(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function LI(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Du(e,n,i){return e[n]=i}function Gs(e,n,i){return!Object.is(e[n],i)&&(e[n]=i,!0)}function Wh(e,n,i,s){const c=Gs(e,n,i);return Gs(e,n+1,s)||c}function Cp(e,n,i,s,c,l,p,v){const S=Ut(),U=Rr(),Q=e+Qn,ce=U.firstCreatePass?function hA(e,n,i,s,c,l,p,v,S){const U=n.consts,Q=fh(n,e,4,p||null,ro(U,v));Oy(n,i,Q,ro(U,S)),Fl(n,Q);const ce=Q.tView=qf(2,Q,s,c,l,n.directiveRegistry,n.pipeRegistry,null,n.schemas,U,null);return null!==n.queries&&(n.queries.template(n,Q),ce.queries=n.queries.embeddedTView(Q)),Q}(Q,U,S,n,i,s,c,l,p):U.data[Q];va(ce,!1);const xe=IC(U,S,ce,e);Qi()&&lh(U,S,xe,ce),Ps(xe,S);const qe=gh(xe,S,xe,ce);return S[Q]=qe,mh(S,qe),function lp(e,n,i){return up(e,n,i)}(qe,ce,S),qc(ce)&&lm(U,S,ce),null!=p&&Sy(S,ce,v),Cp}let IC=function CC(e,n,i,s){return Pa(!0),n[Zn].createComment("")};function qI(e,n,i,s){const c=Ut();return Gs(c,sa(),n)&&(Rr(),Na(Ai(),c,e,n,i,s)),qI}function Mv(e,n){return e<<17|n<<2}function _d(e){return e>>17&32767}function QI(e){return 2|e}function qh(e){return(131068&e)>>2}function XI(e,n){return-131069&e|n<<2}function YI(e){return 1|e}function ZC(e,n,i,s){const c=e[i+1],l=null===n;let p=s?_d(c):qh(c),v=!1;for(;0!==p&&(!1===v||l);){const U=e[p+1];JA(e[p],n)&&(v=!0,e[p+1]=s?YI(U):QI(U)),p=s?_d(U):qh(U)}v&&(e[i+1]=s?QI(c):YI(c))}function JA(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&Ci(e,n)>=0}function JI(e,n,i){const s=Ut();return Gs(s,sa(),n)&&ca(Rr(),Ai(),s,e,n,s[Zn],i,!1),JI}function ZI(e,n,i,s,c){const p=c?"class":"style";ul(e,i,n.inputs[p],p,s)}function e0(e,n){return function zc(e,n,i,s){const c=Ut(),l=Rr(),p=function $s(e){const n=Wn.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,i}(2);l.firstUpdatePass&&function cw(e,n,i,s){const c=e.data;if(null===c[i+1]){const l=c[Cs()],p=function aw(e,n){return n>=e.expandoStartIndex}(e,i);(function hw(e,n){return!!(e.flags&(n?8:16))})(l,s)&&null===n&&!p&&(n=!1),n=function ab(e,n,i,s){const c=function Md(e){const n=Wn.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let l=s?n.residualClasses:n.residualStyles;if(null===c)0===(s?n.classBindings:n.styleBindings)&&(i=c_(i=t0(null,e,n,i,s),n.attrs,s),l=null);else{const p=n.directiveStylingLast;if(-1===p||e[p]!==c)if(i=t0(c,e,n,i,s),null===l){let S=function cb(e,n,i){const s=i?n.classBindings:n.styleBindings;if(0!==qh(s))return e[_d(s)]}(e,n,s);void 0!==S&&Array.isArray(S)&&(S=t0(null,e,n,S[1],s),S=c_(S,n.attrs,s),function ub(e,n,i,s){e[_d(i?n.classBindings:n.styleBindings)]=s}(e,n,s,S))}else l=function lb(e,n,i){let s;const c=n.directiveEnd;for(let l=1+n.directiveStylingLast;l<c;l++)s=c_(s,e[l].hostAttrs,i);return c_(s,n.attrs,i)}(e,n,s)}return void 0!==l&&(s?n.residualClasses=l:n.residualStyles=l),i}(c,l,n,s),function XA(e,n,i,s,c,l){let p=l?n.classBindings:n.styleBindings,v=_d(p),S=qh(p);e[s]=i;let Q,U=!1;if(Array.isArray(i)?(Q=i[1],(null===Q||Ci(i,Q)>0)&&(U=!0)):Q=i,c)if(0!==S){const xe=_d(e[v+1]);e[s+1]=Mv(xe,v),0!==xe&&(e[xe+1]=XI(e[xe+1],s)),e[v+1]=function qA(e,n){return 131071&e|n<<17}(e[v+1],s)}else e[s+1]=Mv(v,0),0!==v&&(e[v+1]=XI(e[v+1],s)),v=s;else e[s+1]=Mv(S,0),0===v?v=s:e[S+1]=XI(e[S+1],s),S=s;U&&(e[s+1]=QI(e[s+1])),ZC(e,Q,s,!0),ZC(e,Q,s,!1),function YA(e,n,i,s,c){const l=c?e.residualClasses:e.residualStyles;null!=l&&"string"==typeof n&&Ci(l,n)>=0&&(i[s+1]=YI(i[s+1]))}(n,Q,e,s,l),p=Mv(v,S),l?n.classBindings=p:n.styleBindings=p}(c,l,n,i,p,s)}}(l,e,p,s),n!==vr&&Gs(c,p,n)&&function lw(e,n,i,s,c,l,p,v){if(!(3&n.type))return;const S=e.data,U=S[v+1],Q=function QA(e){return!(1&~e)}(U)?dw(S,n,i,c,qh(U),p):void 0;Rv(Q)||(Rv(l)||function KA(e){return!(2&~e)}(U)&&(l=dw(S,null,i,c,v,p)),function WE(e,n,i,s,c){if(n)c?e.addClass(i,s):e.removeClass(i,s);else{let l=-1===s.indexOf("-")?void 0:Xa.DashCase;null==c?e.removeStyle(i,s,l):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),l|=Xa.Important),e.setStyle(i,s,c,l))}}(s,p,Jc(Cs(),i),c,l))}(l,l.data[Cs()],c,c[Zn],e,c[p+1]=function pb(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Zt(fu(e)))),e}(n,i),s,p)}(e,n,null,!0),e0}function t0(e,n,i,s,c){let l=null;const p=i.directiveEnd;let v=i.directiveStylingLast;for(-1===v?v=i.directiveStart:v++;v<p&&(l=n[v],s=c_(s,l.hostAttrs,c),l!==e);)v++;return null!==e&&(i.directiveStylingLast=v),s}function c_(e,n,i){const s=i?1:2;let c=-1;if(null!==n)for(let l=0;l<n.length;l++){const p=n[l];"number"==typeof p?c=p:c===s&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Wi(e,p,!!i||n[++l]))}return void 0===e?null:e}function dw(e,n,i,s,c,l){const p=null===n;let v;for(;c>0;){const S=e[c],U=Array.isArray(S),Q=U?S[1]:S,ce=null===Q;let xe=i[c+1];xe===vr&&(xe=ce?yr:void 0);let qe=ce?Vs(xe,s):Q===s?xe:void 0;if(U&&!Rv(qe)&&(qe=Vs(S,s)),Rv(qe)&&(v=qe,p))return v;const mt=e[c+1];c=p?_d(mt):qh(mt)}if(null!==n){let S=l?n.residualClasses:n.residualStyles;null!=S&&(v=Vs(S,s))}return v}function Rv(e){return void 0!==e}function Ov(e,n,i,s){const c=Ut(),l=Rr(),p=Qn+e,v=c[Zn],S=l.firstCreatePass?function Vb(e,n,i,s,c,l){const p=n.consts,S=fh(n,e,2,s,ro(p,c));return Oy(n,i,S,ro(p,l)),null!==S.attrs&&dd(S,S.attrs,!1),null!==S.mergedAttrs&&dd(S,S.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,S),S}(p,l,c,n,i,s):l.data[p],U=mw(l,c,S,v,n,e);c[p]=U;const Q=qc(S);return va(S,!0),cl(v,U,S),!function i_(e){return!(32&~e.flags)}(S)&&Qi()&&lh(l,c,U,S),0===function wd(){return Wn.lFrame.elementDepthCount}()&&Ps(U,c),function rf(){Wn.lFrame.elementDepthCount++}(),Q&&(lm(l,c,S),um(l,S,c)),null!==s&&Sy(c,S),Ov}function Nv(){let e=Lr();Lu()?function bs(){Wn.lFrame.isParent=!1}():(e=e.parent,va(e,!1));const n=e;(function Dd(e){return Wn.skipHydrationRootTNode===e})(n)&&function Kp(){Wn.skipHydrationRootTNode=null}(),function Td(){Wn.lFrame.elementDepthCount--}();const i=Rr();return i.firstCreatePass&&(Fl(i,e),Kc(e)&&i.queries.elementEnd(e)),null!=n.classesWithoutHost&&function xd(e){return!!(8&e.flags)}(n)&&ZI(i,n,Ut(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function kd(e){return!!(16&e.flags)}(n)&&ZI(i,n,Ut(),n.stylesWithoutHost,!1),Nv}function a0(e,n,i,s){return Ov(e,n,i,s),Nv(),a0}let mw=(e,n,i,s,c,l)=>(Pa(!0),al(s,c,function df(){return Wn.lFrame.currentNamespace}()));function vw(){return Ut()}const Qh=void 0;var Gb=["en",[["a","p"],["AM","PM"],Qh],[["AM","PM"],Qh,Qh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qh,"{1} 'at' {0}",Qh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Hb(e){const i=Math.floor(Math.abs(e)),s=e.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===s?1:5}];let Up={};function l0(e){const n=function zb(e){return e.toLowerCase().replace(/_/g,"-")}(e);let i=ww(n);if(i)return i;const s=n.split("-")[0];if(i=ww(s),i)return i;if("en"===s)return Gb;throw new _t(701,!1)}function Cw(e){return l0(e)[Bp.PluralCase]}function ww(e){return e in Up||(Up[e]=Nn.ng&&Nn.ng.common&&Nn.ng.common.locales&&Nn.ng.common.locales[e]),Up[e]}var Bp=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Bp||{});const jp="en-US";let Tw=jp;function f0(e,n,i,s){const c=Ut(),l=Rr(),p=Lr();return p0(l,c,c[Zn],p,e,n,s),f0}function p0(e,n,i,s,c,l,p){const v=qc(s),U=e.firstCreatePass&&Oo(e),Q=n[gi],ce=Ia(n);let xe=!0;if(3&s.type||p){const jt=js(s,n),an=p?p(jt):jt,ln=ce.length,qt=p?ci=>p(Mr(ci[s.index])):s.index;let gr=null;if(!p&&v&&(gr=function jS(e,n,i,s){const c=e.cleanup;if(null!=c)for(let l=0;l<c.length-1;l+=2){const p=c[l];if(p===i&&c[l+1]===s){const v=n[Us],S=c[l+2];return v.length>S?v[S]:null}"string"==typeof p&&(l+=2)}return null}(e,n,c,s.index)),null!==gr)(gr.__ngLastListenerFn__||gr).__ngNextListenerFn__=l,gr.__ngLastListenerFn__=l,xe=!1;else{l=Jw(s,n,Q,l,!1);const ci=i.listen(an,c,l);ce.push(l,ci),U&&U.push(c,qt,ln,ln+1)}}else l=Jw(s,n,Q,l,!1);const qe=s.outputs;let mt;if(xe&&null!==qe&&(mt=qe[c])){const jt=mt.length;if(jt)for(let an=0;an<jt;an+=2){const Zi=n[mt[an]][mt[an+1]].subscribe(l),_o=ce.length;ce.push(l,Zi),U&&U.push(c,s.index,_o,-(_o+1))}}}function Yw(e,n,i,s){const c=fe(null);try{return Bs(6,n,i),!1!==i(s)}catch(l){return _h(e,l),!1}finally{Bs(7,n,i),fe(c)}}function Jw(e,n,i,s,c){return function l(p){if(p===Function)return s;id(e.componentOffset>-1?Ko(e.index,n):n);let S=Yw(n,i,s,p),U=l.__ngNextListenerFn__;for(;U;)S=Yw(n,i,U,p)&&S,U=U.__ngNextListenerFn__;return c&&!1===S&&p.preventDefault(),S}}function Zw(e=1){return function Oc(e){return(Wn.lFrame.contextLView=function Al(e,n){for(;e>0;)n=n[ai],e--;return n}(e,Wn.lFrame.contextLView))[gi]}(e)}function uT(e,n,i,s){!function ov(e,n,i,s){const c=Rr();if(c.firstCreatePass){const l=Lr();Hm(c,new fp(n,i,s),l.index),function av(e,n){const i=e.contentQueries||(e.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(e.queries.length-1,n)}(c,e),!(2&~i)&&(c.staticContentQueries=!0)}return jm(c,Ut(),i)}(e,n,i,s)}function lT(e,n,i){!function $m(e,n,i){const s=Rr();return s.firstCreatePass&&(Hm(s,new fp(e,n,i),-1),!(2&~n)&&(s.staticViewQueries=!0)),jm(s,Ut(),n)}(e,n,i)}function dT(e){const n=Ut(),i=Rr(),s=Nl();xl(s+1);const c=Gm(i,s);if(e.dirty&&function ef(e){return!(4&~e[vn])}(n)===!(2&~c.metadata.flags)){if(null===c.matches)e.reset([]);else{const l=Cu(n,s);e.reset(l,gf),e.notifyOnChanges()}return!0}return!1}function hT(){return function Vh(e,n){return e[zo].queries[n].queryList}(Ut(),Nl())}function CT(e,n=""){const i=Ut(),s=Rr(),c=e+Qn,l=s.firstCreatePass?fh(s,c,1,n,null):s.data[c],p=wT(s,i,l,n,e);i[c]=p,Qi()&&lh(s,i,p,l),va(l,!1)}let wT=(e,n,i,s,c)=>(Pa(!0),function fy(e,n){return e.createText(n)}(n[Zn],s));function m0(e){return Lv("",e,""),m0}function Lv(e,n,i){const s=Ut(),c=function Mp(e,n,i,s){return Gs(e,sa(),i)?n+On(i)+s:vr}(s,e,n,i);return c!==vr&&function Ca(e,n,i){const s=Jc(n,e);!function jf(e,n,i){e.setValue(n,i)}(e[Zn],s,i)}(s,Cs(),c),Lv}function _0(e,n,i){Lh(n)&&(n=n());const s=Ut();return Gs(s,sa(),n)&&ca(Rr(),Ai(),s,e,n,s[Zn],i,!1),_0}function OT(e,n){const i=Lh(e);return i&&e.set(n),i}function y0(e,n){const i=Ut(),s=Rr(),c=Lr();return p0(s,i,i[Zn],c,e,n),y0}function v0(e,n,i,s,c){if(e=ke(e),Array.isArray(e))for(let l=0;l<e.length;l++)v0(e[l],n,i,s,c);else{const l=Rr(),p=Ut(),v=Lr();let S=wt(e)?e:ke(e.provide);const U=bo(e),Q=1048575&v.providerIndexes,ce=v.directiveStart,xe=v.providerIndexes>>20;if(wt(e)||!e.multi){const qe=new Ma(U,c,td),mt=I0(S,n,c?Q:Q+xe,ce);-1===mt?(so(Gt(v,p),l,S),E0(l,e,n.length),n.push(S),v.directiveStart++,v.directiveEnd++,c&&(v.providerIndexes+=1048576),i.push(qe),p.push(qe)):(i[mt]=qe,p[mt]=qe)}else{const qe=I0(S,n,Q+xe,ce),mt=I0(S,n,Q,Q+xe),an=mt>=0&&i[mt];if(c&&!an||!c&&!(qe>=0&&i[qe])){so(Gt(v,p),l,S);const ln=function lP(e,n,i,s,c){const l=new Ma(e,i,td);return l.multi=[],l.index=n,l.componentProviders=0,NT(l,c,s&&!i),l}(c?uP:cP,i.length,c,s,U);!c&&an&&(i[mt].providerFactory=ln),E0(l,e,n.length,0),n.push(S),v.directiveStart++,v.directiveEnd++,c&&(v.providerIndexes+=1048576),i.push(ln),p.push(ln)}else E0(l,e,qe>-1?qe:mt,NT(i[c?mt:qe],U,!c&&s));!c&&s&&an&&i[mt].componentProviders++}}}function E0(e,n,i,s){const c=wt(n),l=function mn(e){return!!e.useClass}(n);if(c||l){const S=(l?ke(n.useClass):n).prototype.ngOnDestroy;if(S){const U=e.destroyHooks||(e.destroyHooks=[]);if(!c&&n.multi){const Q=U.indexOf(i);-1===Q?U.push(i,[s,S]):U[Q+1].push(s,S)}else U.push(i,S)}}}function NT(e,n,i){return i&&e.componentProviders++,e.multi.push(n)-1}function I0(e,n,i,s){for(let c=i;c<s;c++)if(n[c]===e)return c;return-1}function cP(e,n,i,s){return C0(this.multi,[])}function uP(e,n,i,s){const c=this.multi;let l;if(this.providerFactory){const p=this.providerFactory.componentProviders,v=oa(i,i[Yt],this.providerFactory.index,s);l=v.slice(0,p),C0(c,l);for(let S=p;S<v.length;S++)l.push(v[S])}else l=[],C0(c,l);return l}function C0(e,n){for(let i=0;i<e.length;i++)n.push((0,e[i])());return n}function xT(e,n=[]){return i=>{i.providersResolver=(s,c)=>function aP(e,n,i){const s=Rr();if(s.firstCreatePass){const c=no(e);v0(i,s.data,s.blueprint,c,!0),v0(n,s.data,s.blueprint,c,!1)}}(s,c?c(e):e,n)}}let dP=(()=>{class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const s=Y(0,i.type),c=s.length>0?kt([s],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,c)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=or({token:e,providedIn:"environment",factory:()=>new e(ei(Tr))})}return e})();function kT(e){Ec("NgStandalone"),e.getStandaloneInjector=n=>n.get(dP).getOrCreateStandaloneInjector(e)}function FT(e,n,i){const s=e.\u0275cmp;s.directiveDefs=Ki(n,!1),s.pipeDefs=Ki(i,!0)}function g_(e,n){const i=e[n];return i===vr?void 0:i}function BT(e,n,i,s,c,l,p,v){const S=n+i;return function Tv(e,n,i,s,c){const l=Wh(e,n,i,s);return Gs(e,n+2,c)||l}(e,S,c,l,p)?Du(e,S+3,v?s.call(v,c,l,p):s(c,l,p)):g_(e,S+3)}function HT(e,n){const i=Rr();let s;const c=e+Qn;i.firstCreatePass?(s=function wP(e,n){if(n)for(let i=n.length-1;i>=0;i--){const s=n[i];if(e===s.name)return s}}(n,i.pipeRegistry),i.data[c]=s,s.onDestroy&&(i.destroyHooks??=[]).push(c,s.onDestroy)):s=i.data[c];const l=s.factory||(s.factory=ji(s.type)),v=wr(td);try{const S=h(!1),U=l();return h(S),function qS(e,n,i,s){i>=e.data.length&&(e.data[i]=null,e.blueprint[i]=null),n[i]=s}(i,Ut(),c,U),U}finally{wr(v)}}function GT(e,n,i){const s=e+Qn,c=Ut(),l=oc(c,s);return m_(c,s)?function LT(e,n,i,s,c,l){const p=n+i;return Gs(e,p,c)?Du(e,p+1,l?s.call(l,c):s(c)):g_(e,p+1)}(c,Ns(),n,l.transform,i,l):l.transform(i)}function zT(e,n,i,s){const c=e+Qn,l=Ut(),p=oc(l,c);return m_(l,c)?function UT(e,n,i,s,c,l,p){const v=n+i;return Wh(e,v,c,l)?Du(e,v+2,p?s.call(p,c,l):s(c,l)):g_(e,v+2)}(l,Ns(),n,p.transform,i,s,p):p.transform(i,s)}function WT(e,n,i,s,c){const l=e+Qn,p=Ut(),v=oc(p,l);return m_(p,l)?BT(p,Ns(),n,v.transform,i,s,c,v):v.transform(i,s,c)}function m_(e,n){return e[Yt].data[n].pure}class cD{constructor(n){this.full=n;const i=n.split(".");this.major=i[0],this.minor=i[1],this.patch=i.slice(2).join(".")}}const qP=new cD("17.3.12");let uD=(()=>{class e{log(i){console.log(i)}warn(i){console.warn(i)}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const pD=new Ze(""),gD=new Ze("");let S0,EM=(()=>{class e{constructor(i,s,c){this._ngZone=i,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,S0||(function IM(e){S0=e}(c),c.addToWindow(s)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ws.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(i)||(clearTimeout(s.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,s,c){let l=-1;s&&s>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==l),i()},s)),this._callbacks.push({doneCb:i,timeoutId:l,updateCb:c})}whenStable(i,s,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,s,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,s,c){return[]}static#e=this.\u0275fac=function(s){return new(s||e)(ei(ws),ei(mD),ei(gD))};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac})}return e})(),mD=(()=>{class e{constructor(){this._applications=new Map}registerApplication(i,s){this._applications.set(i,s)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,s=!0){return S0?.findTestabilityInTree(this,i,s)??null}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function P0(e){return!!e&&"function"==typeof e.then}function _D(e){return!!e&&"function"==typeof e.subscribe}const yD=new Ze("");let M0=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s}),this.appInits=dn(yD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const c of this.appInits){const l=c();if(P0(l))i.push(l);else if(_D(l)){const p=new Promise((v,S)=>{l.subscribe({complete:v,error:S})});i.push(p)}}const s=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{s()}).catch(c=>{this.reject(c)}),0===i.length&&s(),this.initialized=!0}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const R0=new Ze("");function ID(e,n){return Array.isArray(n)?n.reduce(ID,e):{...e,...n}}let yd=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=dn(rg),this.afterRenderEffectManager=dn(cd),this.externalTestViews=new Set,this.beforeRender=new Ln.B,this.afterTick=new Ln.B,this.componentTypes=[],this.components=[],this.isStable=dn(Ja).hasPendingTasks.pipe((0,Kn.T)(i=>!i)),this._injector=dn(Tr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,s){const c=i instanceof sd;if(!this._injector.get(M0).done)throw!c&&Ri(i),new _t(405,!1);let p;p=c?i:this._injector.get(Ah).resolveComponentFactory(i),this.componentTypes.push(p.componentType);const v=function CM(e){return e.isBoundToModule}(p)?void 0:this._injector.get(Tu),U=p.create(oo.NULL,[],s||p.selector,v),Q=U.location.nativeElement,ce=U.injector.get(pD,null);return ce?.registerApplication(Q),U.onDestroy(()=>{this.detachView(U.hostView),$v(this.components,U),ce?.unregisterApplication(Q)}),this._loadComponent(U),U}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new _t(101,!1);const s=fe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(c){this.internalErrorHandler(c)}finally{this.afterTick.next(),this._runningTick=!1,fe(s)}}detectChangesInAttachedViews(i){let s=0;const c=this.afterRenderEffectManager;for(;;){if(s===Ih)throw new _t(103,!1);if(i){const l=0===s;this.beforeRender.next(l);for(let{_lView:p,notifyErrorHandler:v}of this._views)TM(p,l,v)}if(s++,c.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>O0(l))&&(c.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>O0(l))))break}}attachView(i){const s=i;this._views.push(s),s.attachToAppRef(this)}detachView(i){const s=i;$v(this._views,s),s.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const s=this._injector.get(R0,[]);[...this._bootstrapListeners,...s].forEach(c=>c(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>$v(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new _t(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $v(e,n){const i=e.indexOf(n);i>-1&&e.splice(i,1)}function TM(e,n,i){!n&&!O0(e)||function DM(e,n,i){let s;i?(s=0,e[vn]|=1024):s=64&e[vn]?0:1,Ch(e,n,s)}(e,i,n)}function O0(e){return bl(e)}class AM{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let bM=(()=>{class e{compileModuleSync(i){return new G(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const s=this.compileModuleSync(i),l=Ea(Oi(i).declarations).reduce((p,v)=>{const S=lr(v);return S&&p.push(new hd(S)),p},[]);return new AM(s,l)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),MM=(()=>{class e{constructor(){this.zone=dn(ws),this.applicationRef=dn(yd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function RM(){const e=dn(ws),n=dn(Po);return i=>e.runOutsideAngular(()=>n.handleError(i))}let NM=(()=>{class e{constructor(){this.subscription=new ot.yU,this.initialized=!1,this.zone=dn(ws),this.pendingTasks=dn(Ja)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ws.assertNotInAngularZone(),queueMicrotask(()=>{null!==i&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ws.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Gv=new Ze("",{providedIn:"root",factory:()=>dn(Gv,rr.Optional|rr.SkipSelf)||function xM(){return typeof $localize<"u"&&$localize.locale||jp}()}),kM=new Ze("",{providedIn:"root",factory:()=>"USD"}),N0=new Ze("");let DD=(()=>{class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,s){const c=function Jy(e="zone.js",n){return"noop"===e?new Rm:"zone.js"===e?new ws(n):e}(s?.ngZone,function TD(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:s?.ngZoneEventCoalescing,runCoalescing:s?.ngZoneRunCoalescing}));return c.run(()=>{const l=function le(e,n,i){return new V(e,n,i)}(i.moduleType,this.injector,function wD(e){return[{provide:ws,useFactory:e},{provide:Ls,multi:!0,useFactory:()=>{const n=dn(MM,{optional:!0});return()=>n.initialize()}},{provide:Ls,multi:!0,useFactory:()=>{const n=dn(NM);return()=>{n.initialize()}}},{provide:rg,useFactory:RM}]}(()=>c)),p=l.injector.get(Po,null);return c.runOutsideAngular(()=>{const v=c.onError.subscribe({next:S=>{p.handleError(S)}});l.onDestroy(()=>{$v(this._modules,l),v.unsubscribe()})}),function ED(e,n,i){try{const s=i();return P0(s)?s.catch(c=>{throw n.runOutsideAngular(()=>e.handleError(c)),c}):s}catch(s){throw n.runOutsideAngular(()=>e.handleError(s)),s}}(p,c,()=>{const v=l.injector.get(M0);return v.runInitializers(),v.donePromise.then(()=>(function Dw(e){"string"==typeof e&&(Tw=e.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Gv,jp)||jp),this._moduleDoBootstrap(l),l))})})}bootstrapModule(i,s=[]){const c=ID({},s);return function PM(e,n,i){const s=new G(i);return Promise.resolve(s)}(0,0,i).then(l=>this.bootstrapModuleFactory(l,c))}_moduleDoBootstrap(i){const s=i.injector.get(yd);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(c=>s.bootstrap(c));else{if(!i.instance.ngDoBootstrap)throw new _t(-403,!1);i.instance.ngDoBootstrap(s)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _t(404,!1);this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s());const i=this._injector.get(N0,null);i&&(i.forEach(s=>s()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(s){return new(s||e)(ei(oo))};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),vd=null;const AD=new Ze("");function bD(e,n,i=[]){const s=`Platform: ${n}`,c=new Ze(s);return(l=[])=>{let p=x0();if(!p||p.injector.get(AD,!1)){const v=[...i,...l,{provide:c,useValue:!0}];e?e(v):function VM(e){if(vd&&!vd.get(AD,!1))throw new _t(400,!1);(function vD(){!function tn(e){Lt=e}(()=>{throw new _t(600,!1)})})(),vd=e;const n=e.get(DD);(function PD(e){e.get(Tf,null)?.forEach(i=>i())})(e)}(function SD(e=[],n){return oo.create({name:n,providers:[{provide:hn,useValue:"platform"},{provide:N0,useValue:new Set([()=>vd=null])},...e]})}(v,s))}return function LM(e){const n=x0();if(!n)throw new _t(401,!1);return n}()}}function x0(){return vd?.get(DD)??null}function BM(){return!1}let RD=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=jM}return e})();function jM(e){return function $M(e,n,i){if(na(e)&&!i){const s=Ko(e.index,n);return new wh(s,s)}return 47&e.type?new wh(n[jn],n):null}(Lr(),Ut(),!(16&~e))}class kD{constructor(){}supports(n){return vl(n)}create(n){return new KM(n)}}const WM=(e,n)=>n;class KM{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||WM}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,s=this._removalsHead,c=0,l=null;for(;i||s;){const p=!s||i&&i.currentIndex<VD(s,c,l)?i:s,v=VD(p,c,l),S=p.currentIndex;if(p===s)c--,s=s._nextRemoved;else if(i=i._next,null==p.previousIndex)c++;else{l||(l=[]);const U=v-c,Q=S-c;if(U!=Q){for(let xe=0;xe<U;xe++){const qe=xe<l.length?l[xe]:l[xe]=0,mt=qe+xe;Q<=mt&&mt<U&&(l[xe]=qe+1)}l[p.previousIndex]=Q-U}}v!==S&&n(p,v,S)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!vl(n))throw new _t(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,l,p,i=this._itHead,s=!1;if(Array.isArray(n)){this.length=n.length;for(let v=0;v<this.length;v++)l=n[v],p=this._trackByFn(v,l),null!==i&&Object.is(i.trackById,p)?(s&&(i=this._verifyReinsertion(i,l,p,v)),Object.is(i.item,l)||this._addIdentityChange(i,l)):(i=this._mismatch(i,l,p,v),s=!0),i=i._next}else c=0,function lA(e,n){if(Array.isArray(e))for(let i=0;i<e.length;i++)n(e[i]);else{const i=e[Symbol.iterator]();let s;for(;!(s=i.next()).done;)n(s.value)}}(n,v=>{p=this._trackByFn(c,v),null!==i&&Object.is(i.trackById,p)?(s&&(i=this._verifyReinsertion(i,v,p,c)),Object.is(i.item,v)||this._addIdentityChange(i,v)):(i=this._mismatch(i,v,p,c),s=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,s,c){let l;return null===n?l=this._itTail:(l=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,l,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(s,c))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,l,c)):n=this._addAfter(new qM(i,s),l,c),n}_verifyReinsertion(n,i,s,c){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==l?n=this._reinsertAfter(l,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,l=n._nextRemoved;return null===c?this._removalsHead=l:c._nextRemoved=l,null===l?this._removalsTail=c:l._prevRemoved=c,this._insertAfter(n,i,s),this._addToMoves(n,s),n}_moveAfter(n,i,s){return this._unlink(n),this._insertAfter(n,i,s),this._addToMoves(n,s),n}_addAfter(n,i,s){return this._insertAfter(n,i,s),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,s){const c=null===i?this._itHead:i._next;return n._next=c,n._prev=i,null===c?this._itTail=n:c._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new FD),this._linkedRecords.put(n),n.currentIndex=s,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,s=n._next;return null===i?this._itHead=s:i._next=s,null===s?this._itTail=i:s._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FD),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class qM{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QM{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===i||i<=s.currentIndex)&&Object.is(s.trackById,n))return s;return null}remove(n){const i=n._prevDup,s=n._nextDup;return null===i?this._head=s:i._nextDup=s,null===s?this._tail=i:s._prevDup=i,null===this._head}}class FD{constructor(){this.map=new Map}put(n){const i=n.trackById;let s=this.map.get(i);s||(s=new QM,this.map.set(i,s)),s.add(n)}get(n,i){const c=this.map.get(n);return c?c.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VD(e,n,i){const s=e.previousIndex;if(null===s)return s;let c=0;return i&&s<i.length&&(c=i[s]),s+n+c}class LD{constructor(){}supports(n){return n instanceof Map||LI(n)}create(){return new XM}}class XM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||LI(n)))throw new _t(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(s,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,s),this._appendAfter=i,i=i._next;else{const l=this._getOrCreateRecordForKey(c,s);i=this._insertBeforeOrAppend(i,l)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let s=i;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const s=n._prev;return i._next=n,i._prev=s,n._prev=i,s&&(s._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,i);const l=c._prev,p=c._next;return l&&(l._next=p),p&&(p._prev=l),c._next=null,c._prev=null,c}const s=new YM(n);return this._records.set(n,s),s.currentValue=i,this._addToAdditions(s),s}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(s=>i(n[s],s))}}class YM{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UD(){return new U0([new kD])}let U0=(()=>{class e{static#e=this.\u0275prov=or({token:e,providedIn:"root",factory:UD});constructor(i){this.factories=i}static create(i,s){if(null!=s){const c=s.factories.slice();i=i.concat(c)}return new e(i)}static extend(i){return{provide:e,useFactory:s=>e.create(i,s||UD()),deps:[[e,new ts,new zi]]}}find(i){const s=this.factories.find(c=>c.supports(i));if(null!=s)return s;throw new _t(901,!1)}}return e})();function BD(){return new B0([new LD])}let B0=(()=>{class e{static#e=this.\u0275prov=or({token:e,providedIn:"root",factory:BD});constructor(i){this.factories=i}static create(i,s){if(s){const c=s.factories.slice();i=i.concat(c)}return new e(i)}static extend(i){return{provide:e,useFactory:s=>e.create(i,s||BD()),deps:[[e,new ts,new zi]]}}find(i){const s=this.factories.find(c=>c.supports(i));if(s)return s;throw new _t(901,!1)}}return e})();const eR=bD(null,"core",[]);let tR=(()=>{class e{constructor(i){}static#e=this.\u0275fac=function(s){return new(s||e)(ei(yd))};static#t=this.\u0275mod=wo({type:e});static#n=this.\u0275inj=Hi({})}return e})();function MR(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function OR(e){const n=fe(null);try{return e()}finally{fe(n)}}function LR(e){const n=lr(e);if(!n)return null;const i=new hd(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},1182:(sn,Ke,k)=>{k.d(Ke,{DS:()=>yt,X8:()=>It,$z:()=>tn,UB:()=>Qe,yy:()=>Lt,ZP:()=>at,AU:()=>Pe,CP:()=>un,gF:()=>ft}),k(2438);var T=k(177),R=k(4438),y=k(1825),te=k(9253),be=k(1413),fe=k(7673),Le=k(1985),Re=k(8455),_e=k(6365),ve=k(8750),ze=k(983),Ct=k(9326),Me=k(941),ct=k(5558),Ue=k(6354),We=k(6129);class $e extends be.B{constructor(Kt=1/0,gn=1/0,rn=We.U){super(),this._bufferSize=Kt,this._windowTime=gn,this._timestampProvider=rn,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=gn===1/0,this._bufferSize=Math.max(1,Kt),this._windowTime=Math.max(1,gn)}next(Kt){const{isStopped:gn,_buffer:rn,_infiniteTimeWindow:on,_timestampProvider:Cn,_windowTime:Dn}=this;gn||(rn.push(Kt),!on&&rn.push(Cn.now()+Dn)),this._trimBuffer(),super.next(Kt)}_subscribe(Kt){this._throwIfClosed(),this._trimBuffer();const gn=this._innerSubscribe(Kt),{_infiniteTimeWindow:rn,_buffer:on}=this,Cn=on.slice();for(let Dn=0;Dn<Cn.length&&!Kt.closed;Dn+=rn?1:2)Kt.next(Cn[Dn]);return this._checkFinalizedStatuses(Kt),gn}_trimBuffer(){const{_bufferSize:Kt,_timestampProvider:gn,_buffer:rn,_infiniteTimeWindow:on}=this,Cn=(on?1:2)*Kt;if(Kt<1/0&&Cn<rn.length&&rn.splice(0,rn.length-Cn),!on){const Dn=gn.now();let Ln=0;for(let ot=1;ot<rn.length&&rn[ot]<=Dn;ot+=2)Ln=ot;Ln&&rn.splice(0,Ln+1)}}}var Pt=k(7707),ue=k(9974);function oe(tt,Kt,...gn){if(!0===Kt)return void tt();if(!1===Kt)return;const rn=new Pt.Ms({next:()=>{rn.unsubscribe(),tt()}});return(0,ve.Tg)(Kt(...gn)).subscribe(rn)}function Ye(tt,Kt,gn){let rn,on=!1;return tt&&"object"==typeof tt?({bufferSize:rn=1/0,windowTime:Kt=1/0,refCount:on=!1,scheduler:gn}=tt):rn=tt??1/0,function Ee(tt={}){const{connector:Kt=(()=>new be.B),resetOnError:gn=!0,resetOnComplete:rn=!0,resetOnRefCountZero:on=!0}=tt;return Cn=>{let Dn,Ln,ot,In=0,Kn=!1,sr=!1;const Rt=()=>{Ln?.unsubscribe(),Ln=void 0},_t=()=>{Rt(),Dn=ot=void 0,Kn=sr=!1},Zr=()=>{const Ft=Dn;_t(),Ft?.unsubscribe()};return(0,ue.N)((Ft,it)=>{In++,!sr&&!Kn&&Rt();const xt=ot=ot??Kt();it.add(()=>{In--,0===In&&!sr&&!Kn&&(Ln=oe(Zr,on))}),xt.subscribe(it),!Dn&&In>0&&(Dn=new Pt.Ms({next:Yn=>xt.next(Yn),error:Yn=>{sr=!0,Rt(),Ln=oe(_t,gn,Yn),xt.error(Yn)},complete:()=>{Kn=!0,Rt(),Ln=oe(_t,rn),xt.complete()}}),(0,ve.Tg)(Ft).subscribe(Dn))})(Cn)}}({connector:()=>new $e(rn,Kt,gn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:on})}var Je=k(1594),Mt=k(8071);function ie(tt,Kt){return(0,Mt.T)(Kt)?(0,ct.n)(()=>tt,Kt):(0,ct.n)(()=>tt)}var je=k(6745),He=k(5964),Jt=k(7935);const un=new R.nKC("angularfire2.auth.use-emulator"),Lt=new R.nKC("angularfire2.auth.settings"),at=new R.nKC("angularfire2.auth.tenant-id"),tn=new R.nKC("angularfire2.auth.langugage-code"),Pe=new R.nKC("angularfire2.auth.use-device-language"),Qe=new R.nKC("angularfire.auth.persistence"),ft=(tt,Kt,gn,rn,on,Cn,Dn,Ln)=>(0,te.BM)(`${tt.name}.auth`,"AngularFireAuth",tt.name,()=>{const ot=Kt.runOutsideAngular(()=>tt.auth());if(gn&&ot.useEmulator(...gn),rn&&(ot.tenantId=rn),ot.languageCode=on,Cn&&ot.useDeviceLanguage(),Dn)for(const[In,Kn]of Object.entries(Dn))ot.settings[In]=Kn;return Ln&&ot.setPersistence(Ln),ot},[gn,rn,on,Cn,Dn,Ln]);let yt=(()=>{class tt{authState;idToken;user;idTokenResult;credential;constructor(gn,rn,on,Cn,Dn,Ln,ot,In,Kn,sr,Rt,_t){const Zr=new be.B,Ft=(0,fe.of)(void 0).pipe((0,Me.Q)(Dn.outsideAngular),(0,ct.n)(()=>Cn.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2438)))),(0,Ue.T)(()=>(0,te.iB)(gn,Cn,rn)),(0,Ue.T)(it=>ft(it,Cn,Ln,In,Kn,sr,ot,Rt)),Ye({bufferSize:1,refCount:!1}));if((0,T.Vy)(on))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,fe.of)(null);else{Ft.pipe((0,Je.$)()).subscribe();const it=Ft.pipe((0,ct.n)(tr=>tr.getRedirectResult().then(An=>An,()=>null)),y.U0,Ye({bufferSize:1,refCount:!1})),xt=Ft.pipe((0,ct.n)(tr=>new Le.c(An=>({unsubscribe:Cn.runOutsideAngular(()=>tr.onAuthStateChanged(bn=>An.next(bn),bn=>An.error(bn),()=>An.complete()))})))),Yn=Ft.pipe((0,ct.n)(tr=>new Le.c(An=>({unsubscribe:Cn.runOutsideAngular(()=>tr.onIdTokenChanged(bn=>An.next(bn),bn=>An.error(bn),()=>An.complete()))}))));this.authState=it.pipe(ie(xt),(0,je._)(Dn.outsideAngular),(0,Me.Q)(Dn.insideAngular)),this.user=it.pipe(ie(Yn),(0,je._)(Dn.outsideAngular),(0,Me.Q)(Dn.insideAngular)),this.idToken=this.user.pipe((0,ct.n)(tr=>tr?(0,Re.H)(tr.getIdToken()):(0,fe.of)(null))),this.idTokenResult=this.user.pipe((0,ct.n)(tr=>tr?(0,Re.H)(tr.getIdTokenResult()):(0,fe.of)(null))),this.credential=function ht(...tt){const Kt=(0,Ct.lI)(tt),gn=(0,Ct.R0)(tt,1/0),rn=tt;return rn.length?1===rn.length?(0,ve.Tg)(rn[0]):(0,_e.U)(gn)((0,Re.H)(rn,Kt)):ze.w}(it,Zr,this.authState.pipe((0,He.p)(tr=>!tr))).pipe((0,Ue.T)(tr=>tr?.user?tr:null),(0,je._)(Dn.outsideAngular),(0,Me.Q)(Dn.insideAngular))}return(0,te.Gt)(this,Ft,Cn,{spy:{apply:(it,xt,Yn)=>{(it.startsWith("signIn")||it.startsWith("createUser"))&&Yn.then(tr=>Zr.next(tr))}}})}static \u0275fac=function(rn){return new(rn||tt)(R.KVO(te.rx),R.KVO(te.uP,8),R.KVO(R.Agw),R.KVO(R.SKi),R.KVO(y.u0),R.KVO(un,8),R.KVO(Lt,8),R.KVO(at,8),R.KVO(tn,8),R.KVO(Pe,8),R.KVO(Qe,8),R.KVO(y.Jv,8))};static \u0275prov=R.jDH({token:tt,factory:tt.\u0275fac,providedIn:"any"})}return tt})(),It=(()=>{class tt{constructor(){Jt.A.registerVersion("angularfire",y.xv.full,"auth-compat")}static \u0275fac=function(rn){return new(rn||tt)};static \u0275mod=R.$C({type:tt});static \u0275inj=R.G2t({providers:[yt]})}return tt})()},9253:(sn,Ke,k)=>{k.d(Ke,{BM:()=>ht,Gt:()=>te,bf:()=>Ct,e7:()=>be,iB:()=>_e,rx:()=>Le,uP:()=>Re});var _=k(4438),T=k(1825),R=k(7935);const y=["ngOnDestroy"],te=(We,$e,Pt,ue={})=>new Proxy(We,{get:(Ee,oe)=>Pt.runOutsideAngular(()=>{if(We[oe])return ue?.spy?.get&&ue.spy.get(oe,We[oe]),We[oe];if(y.indexOf(oe)>-1)return()=>{};const Ye=$e.toPromise().then(Je=>{const Mt=Je?.[oe];return"function"==typeof Mt?Mt.bind(Je):Mt?.then?Mt.then(ie=>Pt.run(()=>ie)):Pt.run(()=>Mt)});return new Proxy(()=>{},{get:(Je,Mt)=>Ye[Mt],apply:(Je,Mt,ie)=>Ye.then(je=>{const He=je?.(...ie);return ue?.spy?.apply&&ue.spy.apply(oe,ie,He),He})})})}),be=(We,$e)=>{$e.forEach(Pt=>{Object.getOwnPropertyNames(Pt.prototype||Pt).forEach(ue=>{Object.defineProperty(We.prototype,ue,Object.getOwnPropertyDescriptor(Pt.prototype||Pt,ue))})})};class fe{constructor($e){return $e}}const Le=new _.nKC("angularfire2.app.options"),Re=new _.nKC("angularfire2.app.name");function _e(We,$e,Pt){const Ee="object"==typeof Pt&&Pt||{};Ee.name=Ee.name||"string"==typeof Pt&&Pt||"[DEFAULT]";const Ye=R.A.apps.filter(Je=>Je&&Je.name===Ee.name)[0]||$e.runOutsideAngular(()=>R.A.initializeApp(We,Ee));try{if(JSON.stringify(We)!==JSON.stringify(Ye.options)){const Je=!!module.hot;ve("error",`${Ye.name} Firebase App already initialized with different options${Je?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new fe(Ye)}const ve=(We,...$e)=>{(0,_.naY)()&&typeof console<"u"&&console[We](...$e)},ze={provide:fe,useFactory:_e,deps:[Le,_.SKi,[new _.Xx1,Re]]};let Ct=(()=>{class We{static initializeApp(Pt,ue){return{ngModule:We,providers:[{provide:Le,useValue:Pt},{provide:Re,useValue:ue}]}}constructor(Pt){R.A.registerVersion("angularfire",T.xv.full,"core"),R.A.registerVersion("angularfire",T.xv.full,"app-compat"),R.A.registerVersion("angular",_.xvI.full,Pt.toString())}static \u0275fac=function(ue){return new(ue||We)(_.KVO(_.Agw))};static \u0275mod=_.$C({type:We});static \u0275inj=_.G2t({providers:[ze]})}return We})();function ht(We,$e,Pt,ue,Ee){const[,oe,Ye]=globalThis.\u0275AngularfireInstanceCache.find(Je=>Je[0]===We)||[];if(oe)return function Me(We,$e){try{return We.toString()===$e.toString()}catch{return We===$e}}(Ee,Ye)||(Ue("error",`${$e} was already initialized on the ${Pt} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),Ue("warn",{is:Ee,was:Ye})),oe;{const Je=ue();return globalThis.\u0275AngularfireInstanceCache.push([We,Je,Ee]),Je}}const ct=typeof module<"u"&&!!module.hot,Ue=(We,...$e)=>{(0,_.naY)()&&typeof console<"u"&&console[We](...$e)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:(sn,Ke,k)=>{k.d(Ke,{xv:()=>Me,U0:()=>Jt,u0:()=>Ye,Jv:()=>$e});var _=k(4438),T=k(7852);(0,T.registerVersion)("firebase","10.13.1","app");var te=k(6780),fe=k(9687);const Re=new class Le extends fe.q{}(class be extends te.R{constructor(tn,Pe){super(tn,Pe),this.scheduler=tn,this.work=Pe}schedule(tn,Pe=0){return Pe>0?super.schedule(tn,Pe):(this.delay=Pe,this.state=tn,this.scheduler.flush(this),this)}execute(tn,Pe){return Pe>0||this.closed?super.execute(tn,Pe):this._execute(tn,Pe)}requestAsyncId(tn,Pe,Qe=0){return null!=Qe&&Qe>0||null==Qe&&this.delay>0?super.requestAsyncId(tn,Pe,Qe):(tn.flush(this),0)}});var ve=k(3236),ze=k(8141),Ct=k(6745),ht=k(941);const Me=new _.RxE("ANGULARFIRE2_VERSION");class $e{constructor(){return((at,tn)=>{const Pe=(0,T.getApps)(),Qe=[];return Pe.forEach(ft=>{ft.container.getProvider(at).instances.forEach(It=>{Qe.includes(It)||Qe.push(It)})}),Qe})(Pt)}}const Pt="app-check";function ue(){}class Ee{zone;delegate;constructor(tn,Pe=Re){this.zone=tn,this.delegate=Pe}now(){return this.delegate.now()}schedule(tn,Pe,Qe){const ft=this.zone;return this.delegate.schedule(function(It){ft.runGuarded(()=>{tn.apply(this,[It])})},Pe,Qe)}}class oe{zone;task=null;constructor(tn){this.zone=tn}call(tn,Pe){const Qe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ue,{},ue,ue)),Pe.pipe((0,ze.M)({next:Qe,complete:Qe,error:Qe})).subscribe(tn).add(Qe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ye=(()=>{class at{ngZone;outsideAngular;insideAngular;constructor(Pe){this.ngZone=Pe,this.outsideAngular=Pe.runOutsideAngular(()=>new Ee(Zone.current)),this.insideAngular=Pe.run(()=>new Ee(Zone.current,ve.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Qe){return new(Qe||at)(_.KVO(_.SKi))};static \u0275prov=_.jDH({token:at,factory:at.\u0275fac,providedIn:"root"})}return at})();function Jt(at){return function St(at){return function(Pe){return(Pe=Pe.lift(new oe(at.ngZone))).pipe((0,Ct._)(at.outsideAngular),(0,ht.Q)(at.insideAngular))}}(function Je(){const at=globalThis.\u0275AngularFireScheduler;if(!at)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return at}())(at)}},9417:(sn,Ke,k)=>{k.d(Ke,{BC:()=>Rt,JD:()=>Xr,Q0:()=>Ks,X1:()=>xi,YN:()=>Co,Zm:()=>_e,cb:()=>_t,j4:()=>Rs,k0:()=>Pt,me:()=>ht,ok:()=>co,qT:()=>Vo,vS:()=>ur,wz:()=>ei,xH:()=>os,y7:()=>Ys});var _=k(4438),T=k(177),R=k(8455),y=k(7468),te=k(6354);let be=(()=>{class H{constructor(x,Z){this._renderer=x,this._elementRef=Z,this.onChange=De=>{},this.onTouched=()=>{}}setProperty(x,Z){this._renderer.setProperty(this._elementRef.nativeElement,x,Z)}registerOnTouched(x){this.onTouched=x}registerOnChange(x){this.onChange=x}setDisabledState(x){this.setProperty("disabled",x)}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(_.sFG),_.rXU(_.aKT))};static#t=this.\u0275dir=_.FsC({type:H})}return H})(),fe=(()=>{class H extends be{static#e=this.\u0275fac=(()=>{let x;return function(De){return(x||(x=_.xGo(H)))(De||H)}})();static#t=this.\u0275dir=_.FsC({type:H,features:[_.Vt3]})}return H})();const Le=new _.nKC(""),Re={provide:Le,useExisting:(0,_.Rfq)(()=>_e),multi:!0};let _e=(()=>{class H extends fe{writeValue(x){this.setProperty("checked",x)}static#e=this.\u0275fac=(()=>{let x;return function(De){return(x||(x=_.xGo(H)))(De||H)}})();static#t=this.\u0275dir=_.FsC({type:H,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(Z,De){1&Z&&_.bIt("change",function(Jn){return De.onChange(Jn.target.checked)})("blur",function(){return De.onTouched()})},features:[_.Jv_([Re]),_.Vt3]})}return H})();const ve={provide:Le,useExisting:(0,_.Rfq)(()=>ht),multi:!0},Ct=new _.nKC("");let ht=(()=>{class H extends be{constructor(x,Z,De){super(x,Z),this._compositionMode=De,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ze(){const H=(0,T.QT)()?(0,T.QT)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(x){this.setProperty("value",x??"")}_handleInput(x){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(x)}_compositionStart(){this._composing=!0}_compositionEnd(x){this._composing=!1,this._compositionMode&&this.onChange(x)}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(_.sFG),_.rXU(_.aKT),_.rXU(Ct,8))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Z,De){1&Z&&_.bIt("input",function(Jn){return De._handleInput(Jn.target.value)})("blur",function(){return De.onTouched()})("compositionstart",function(){return De._compositionStart()})("compositionend",function(Jn){return De._compositionEnd(Jn.target.value)})},features:[_.Jv_([ve]),_.Vt3]})}return H})();function Me(H){return null==H||("string"==typeof H||Array.isArray(H))&&0===H.length}function ct(H){return null!=H&&"number"==typeof H.length}const Ue=new _.nKC(""),We=new _.nKC(""),$e=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Pt{static min(W){return function ue(H){return W=>{if(Me(W.value)||Me(H))return null;const x=parseFloat(W.value);return!isNaN(x)&&x<H?{min:{min:H,actual:W.value}}:null}}(W)}static max(W){return function Ee(H){return W=>{if(Me(W.value)||Me(H))return null;const x=parseFloat(W.value);return!isNaN(x)&&x>H?{max:{max:H,actual:W.value}}:null}}(W)}static required(W){return function oe(H){return Me(H.value)?{required:!0}:null}(W)}static requiredTrue(W){return function Ye(H){return!0===H.value?null:{required:!0}}(W)}static email(W){return function Je(H){return Me(H.value)||$e.test(H.value)?null:{email:!0}}(W)}static minLength(W){return function Mt(H){return W=>Me(W.value)||!ct(W.value)?null:W.value.length<H?{minlength:{requiredLength:H,actualLength:W.value.length}}:null}(W)}static maxLength(W){return function ie(H){return W=>ct(W.value)&&W.value.length>H?{maxlength:{requiredLength:H,actualLength:W.value.length}}:null}(W)}static pattern(W){return function je(H){if(!H)return He;let W,x;return"string"==typeof H?(x="","^"!==H.charAt(0)&&(x+="^"),x+=H,"$"!==H.charAt(H.length-1)&&(x+="$"),W=new RegExp(x)):(x=H.toString(),W=H),Z=>{if(Me(Z.value))return null;const De=Z.value;return W.test(De)?null:{pattern:{requiredPattern:x,actualValue:De}}}}(W)}static nullValidator(W){return null}static compose(W){return Pe(W)}static composeAsync(W){return ft(W)}}function He(H){return null}function Jt(H){return null!=H}function St(H){return(0,_.jNT)(H)?(0,R.H)(H):H}function un(H){let W={};return H.forEach(x=>{W=null!=x?{...W,...x}:W}),0===Object.keys(W).length?null:W}function Lt(H,W){return W.map(x=>x(H))}function tn(H){return H.map(W=>function at(H){return!H.validate}(W)?W:x=>W.validate(x))}function Pe(H){if(!H)return null;const W=H.filter(Jt);return 0==W.length?null:function(x){return un(Lt(x,W))}}function Qe(H){return null!=H?Pe(tn(H)):null}function ft(H){if(!H)return null;const W=H.filter(Jt);return 0==W.length?null:function(x){const Z=Lt(x,W).map(St);return(0,y.p)(Z).pipe((0,te.T)(un))}}function yt(H){return null!=H?ft(tn(H)):null}function It(H,W){return null===H?[W]:Array.isArray(H)?[...H,W]:[H,W]}function tt(H){return H._rawValidators}function Kt(H){return H._rawAsyncValidators}function gn(H){return H?Array.isArray(H)?H:[H]:[]}function rn(H,W){return Array.isArray(H)?H.includes(W):H===W}function on(H,W){const x=gn(W);return gn(H).forEach(De=>{rn(x,De)||x.push(De)}),x}function Cn(H,W){return gn(W).filter(x=>!rn(H,x))}class Dn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(W){this._rawValidators=W||[],this._composedValidatorFn=Qe(this._rawValidators)}_setAsyncValidators(W){this._rawAsyncValidators=W||[],this._composedAsyncValidatorFn=yt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(W){this._onDestroyCallbacks.push(W)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(W=>W()),this._onDestroyCallbacks=[]}reset(W=void 0){this.control&&this.control.reset(W)}hasError(W,x){return!!this.control&&this.control.hasError(W,x)}getError(W,x){return this.control?this.control.getError(W,x):null}}class Ln extends Dn{get formDirective(){return null}get path(){return null}}class ot extends Dn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class In{constructor(W){this._cd=W}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Rt=(()=>{class H extends In{constructor(x){super(x)}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(ot,2))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Z,De){2&Z&&_.AVh("ng-untouched",De.isUntouched)("ng-touched",De.isTouched)("ng-pristine",De.isPristine)("ng-dirty",De.isDirty)("ng-valid",De.isValid)("ng-invalid",De.isInvalid)("ng-pending",De.isPending)},features:[_.Vt3]})}return H})(),_t=(()=>{class H extends In{constructor(x){super(x)}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(Ln,10))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(Z,De){2&Z&&_.AVh("ng-untouched",De.isUntouched)("ng-touched",De.isTouched)("ng-pristine",De.isPristine)("ng-dirty",De.isDirty)("ng-valid",De.isValid)("ng-invalid",De.isInvalid)("ng-pending",De.isPending)("ng-submitted",De.isSubmitted)},features:[_.Vt3]})}return H})();const Un="VALID",Nr="INVALID",Zt="PENDING",en="DISABLED";function Kr(H){return(we(H)?H.validators:H)||null}function xr(H,W){return(we(W)?W.asyncValidators:H)||null}function we(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}function Ce(H,W,x){const Z=H.controls;if(!(W?Object.keys(Z):Z).length)throw new _.wOt(1e3,"");if(!Z[x])throw new _.wOt(1001,"")}function Xe(H,W,x){H._forEachChild((Z,De)=>{if(void 0===x[De])throw new _.wOt(1002,"")})}class Nt{constructor(W,x){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(W),this._assignAsyncValidators(x)}get validator(){return this._composedValidatorFn}set validator(W){this._rawValidators=this._composedValidatorFn=W}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(W){this._rawAsyncValidators=this._composedAsyncValidatorFn=W}get parent(){return this._parent}get valid(){return this.status===Un}get invalid(){return this.status===Nr}get pending(){return this.status==Zt}get disabled(){return this.status===en}get enabled(){return this.status!==en}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(W){this._assignValidators(W)}setAsyncValidators(W){this._assignAsyncValidators(W)}addValidators(W){this.setValidators(on(W,this._rawValidators))}addAsyncValidators(W){this.setAsyncValidators(on(W,this._rawAsyncValidators))}removeValidators(W){this.setValidators(Cn(W,this._rawValidators))}removeAsyncValidators(W){this.setAsyncValidators(Cn(W,this._rawAsyncValidators))}hasValidator(W){return rn(this._rawValidators,W)}hasAsyncValidator(W){return rn(this._rawAsyncValidators,W)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(W={}){this.touched=!0,this._parent&&!W.onlySelf&&this._parent.markAsTouched(W)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(W=>W.markAllAsTouched())}markAsUntouched(W={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(x=>{x.markAsUntouched({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}markAsDirty(W={}){this.pristine=!1,this._parent&&!W.onlySelf&&this._parent.markAsDirty(W)}markAsPristine(W={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(x=>{x.markAsPristine({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}markAsPending(W={}){this.status=Zt,!1!==W.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!W.onlySelf&&this._parent.markAsPending(W)}disable(W={}){const x=this._parentMarkedDirty(W.onlySelf);this.status=en,this.errors=null,this._forEachChild(Z=>{Z.disable({...W,onlySelf:!0})}),this._updateValue(),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...W,skipPristineCheck:x}),this._onDisabledChange.forEach(Z=>Z(!0))}enable(W={}){const x=this._parentMarkedDirty(W.onlySelf);this.status=Un,this._forEachChild(Z=>{Z.enable({...W,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent}),this._updateAncestors({...W,skipPristineCheck:x}),this._onDisabledChange.forEach(Z=>Z(!1))}_updateAncestors(W){this._parent&&!W.onlySelf&&(this._parent.updateValueAndValidity(W),W.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(W){this._parent=W}getRawValue(){return this.value}updateValueAndValidity(W={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Un||this.status===Zt)&&this._runAsyncValidator(W.emitEvent)),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!W.onlySelf&&this._parent.updateValueAndValidity(W)}_updateTreeValidity(W={emitEvent:!0}){this._forEachChild(x=>x._updateTreeValidity(W)),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?en:Un}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(W){if(this.asyncValidator){this.status=Zt,this._hasOwnPendingAsyncValidator=!0;const x=St(this.asyncValidator(this));this._asyncValidationSubscription=x.subscribe(Z=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Z,{emitEvent:W})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(W,x={}){this.errors=W,this._updateControlsErrors(!1!==x.emitEvent)}get(W){let x=W;return null==x||(Array.isArray(x)||(x=x.split(".")),0===x.length)?null:x.reduce((Z,De)=>Z&&Z._find(De),this)}getError(W,x){const Z=x?this.get(x):this;return Z&&Z.errors?Z.errors[W]:null}hasError(W,x){return!!this.getError(W,x)}get root(){let W=this;for(;W._parent;)W=W._parent;return W}_updateControlsErrors(W){this.status=this._calculateStatus(),W&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(W)}_initObservables(){this.valueChanges=new _.bkB,this.statusChanges=new _.bkB}_calculateStatus(){return this._allControlsDisabled()?en:this.errors?Nr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zt)?Zt:this._anyControlsHaveStatus(Nr)?Nr:Un}_anyControlsHaveStatus(W){return this._anyControls(x=>x.status===W)}_anyControlsDirty(){return this._anyControls(W=>W.dirty)}_anyControlsTouched(){return this._anyControls(W=>W.touched)}_updatePristine(W={}){this.pristine=!this._anyControlsDirty(),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}_updateTouched(W={}){this.touched=this._anyControlsTouched(),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}_registerOnCollectionChange(W){this._onCollectionChange=W}_setUpdateStrategy(W){we(W)&&null!=W.updateOn&&(this._updateOn=W.updateOn)}_parentMarkedDirty(W){return!W&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(W){return null}_assignValidators(W){this._rawValidators=Array.isArray(W)?W.slice():W,this._composedValidatorFn=function Rn(H){return Array.isArray(H)?Qe(H):H||null}(this._rawValidators)}_assignAsyncValidators(W){this._rawAsyncValidators=Array.isArray(W)?W.slice():W,this._composedAsyncValidatorFn=function ke(H){return Array.isArray(H)?yt(H):H||null}(this._rawAsyncValidators)}}class ge extends Nt{constructor(W,x,Z){super(Kr(x),xr(Z,x)),this.controls=W,this._initObservables(),this._setUpdateStrategy(x),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(W,x){return this.controls[W]?this.controls[W]:(this.controls[W]=x,x.setParent(this),x._registerOnCollectionChange(this._onCollectionChange),x)}addControl(W,x,Z={}){this.registerControl(W,x),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}removeControl(W,x={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],this.updateValueAndValidity({emitEvent:x.emitEvent}),this._onCollectionChange()}setControl(W,x,Z={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],x&&this.registerControl(W,x),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}contains(W){return this.controls.hasOwnProperty(W)&&this.controls[W].enabled}setValue(W,x={}){Xe(this,0,W),Object.keys(W).forEach(Z=>{Ce(this,!0,Z),this.controls[Z].setValue(W[Z],{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x)}patchValue(W,x={}){null!=W&&(Object.keys(W).forEach(Z=>{const De=this.controls[Z];De&&De.patchValue(W[Z],{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x))}reset(W={},x={}){this._forEachChild((Z,De)=>{Z.reset(W?W[De]:null,{onlySelf:!0,emitEvent:x.emitEvent})}),this._updatePristine(x),this._updateTouched(x),this.updateValueAndValidity(x)}getRawValue(){return this._reduceChildren({},(W,x,Z)=>(W[Z]=x.getRawValue(),W))}_syncPendingControls(){let W=this._reduceChildren(!1,(x,Z)=>!!Z._syncPendingControls()||x);return W&&this.updateValueAndValidity({onlySelf:!0}),W}_forEachChild(W){Object.keys(this.controls).forEach(x=>{const Z=this.controls[x];Z&&W(Z,x)})}_setUpControls(){this._forEachChild(W=>{W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(W){for(const[x,Z]of Object.entries(this.controls))if(this.contains(x)&&W(Z))return!0;return!1}_reduceValue(){return this._reduceChildren({},(x,Z,De)=>((Z.enabled||this.disabled)&&(x[De]=Z.value),x))}_reduceChildren(W,x){let Z=W;return this._forEachChild((De,pn)=>{Z=x(Z,De,pn)}),Z}_allControlsDisabled(){for(const W of Object.keys(this.controls))if(this.controls[W].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(W){return this.controls.hasOwnProperty(W)?this.controls[W]:null}}class me extends ge{}const Bt=new _.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>En}),En="always";function Bn(H,W){return[...W.path,H]}function qn(H,W,x=En){$r(H,W),W.valueAccessor.writeValue(H.value),(H.disabled||"always"===x)&&W.valueAccessor.setDisabledState?.(H.disabled),function Ms(H,W){W.valueAccessor.registerOnChange(x=>{H._pendingValue=x,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&or(H,W)})}(H,W),function ss(H,W){const x=(Z,De)=>{W.valueAccessor.writeValue(Z),De&&W.viewToModelUpdate(Z)};H.registerOnChange(x),W._registerOnDestroy(()=>{H._unregisterOnChange(x)})}(H,W),function ls(H,W){W.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&or(H,W),"submit"!==H.updateOn&&H.markAsTouched()})}(H,W),function Ne(H,W){if(W.valueAccessor.setDisabledState){const x=Z=>{W.valueAccessor.setDisabledState(Z)};H.registerOnDisabledChange(x),W._registerOnDestroy(()=>{H._unregisterOnDisabledChange(x)})}}(H,W)}function Sn(H,W,x=!0){const Z=()=>{};W.valueAccessor&&(W.valueAccessor.registerOnChange(Z),W.valueAccessor.registerOnTouched(Z)),Qr(H,W),H&&(W._invokeOnDestroyCallbacks(),H._registerOnCollectionChange(()=>{}))}function Wt(H,W){H.forEach(x=>{x.registerOnValidatorChange&&x.registerOnValidatorChange(W)})}function $r(H,W){const x=tt(H);null!==W.validator?H.setValidators(It(x,W.validator)):"function"==typeof x&&H.setValidators([x]);const Z=Kt(H);null!==W.asyncValidator?H.setAsyncValidators(It(Z,W.asyncValidator)):"function"==typeof Z&&H.setAsyncValidators([Z]);const De=()=>H.updateValueAndValidity();Wt(W._rawValidators,De),Wt(W._rawAsyncValidators,De)}function Qr(H,W){let x=!1;if(null!==H){if(null!==W.validator){const De=tt(H);if(Array.isArray(De)&&De.length>0){const pn=De.filter(Jn=>Jn!==W.validator);pn.length!==De.length&&(x=!0,H.setValidators(pn))}}if(null!==W.asyncValidator){const De=Kt(H);if(Array.isArray(De)&&De.length>0){const pn=De.filter(Jn=>Jn!==W.asyncValidator);pn.length!==De.length&&(x=!0,H.setAsyncValidators(pn))}}}const Z=()=>{};return Wt(W._rawValidators,Z),Wt(W._rawAsyncValidators,Z),x}function or(H,W){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),W.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function ye(H,W){if(!H.hasOwnProperty("model"))return!1;const x=H.model;return!!x.isFirstChange()||!Object.is(W,x.currentValue)}function Ze(H,W){if(!W)return null;let x,Z,De;return Array.isArray(W),W.forEach(pn=>{pn.constructor===ht?x=pn:function Ie(H){return Object.getPrototypeOf(H.constructor)===fe}(pn)?Z=pn:De=pn}),De||Z||x||null}function ii(H,W){const x=H.indexOf(W);x>-1&&H.splice(x,1)}function Er(H){return"object"==typeof H&&null!==H&&2===Object.keys(H).length&&"value"in H&&"disabled"in H}Promise.resolve();const ui=class extends Nt{constructor(W=null,x,Z){super(Kr(x),xr(Z,x)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(W),this._setUpdateStrategy(x),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),we(x)&&(x.nonNullable||x.initialValueIsDefault)&&(this.defaultValue=Er(W)?W.value:W)}setValue(W,x={}){this.value=this._pendingValue=W,this._onChange.length&&!1!==x.emitModelToViewChange&&this._onChange.forEach(Z=>Z(this.value,!1!==x.emitViewToModelChange)),this.updateValueAndValidity(x)}patchValue(W,x={}){this.setValue(W,x)}reset(W=this.defaultValue,x={}){this._applyFormState(W),this.markAsPristine(x),this.markAsUntouched(x),this.setValue(this.value,x),this._pendingChange=!1}_updateValue(){}_anyControls(W){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(W){this._onChange.push(W)}_unregisterOnChange(W){ii(this._onChange,W)}registerOnDisabledChange(W){this._onDisabledChange.push(W)}_unregisterOnDisabledChange(W){ii(this._onDisabledChange,W)}_forEachChild(W){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(W){Er(W)?(this.value=this._pendingValue=W.value,W.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=W}},Ei={provide:ot,useExisting:(0,_.Rfq)(()=>ur)},On=Promise.resolve();let ur=(()=>{class H extends ot{constructor(x,Z,De,pn,Jn,ys){super(),this._changeDetectorRef=Jn,this.callSetDisabledState=ys,this.control=new ui,this._registered=!1,this.name="",this.update=new _.bkB,this._parent=x,this._setValidators(Z),this._setAsyncValidators(De),this.valueAccessor=Ze(0,pn)}ngOnChanges(x){if(this._checkForErrors(),!this._registered||"name"in x){if(this._registered&&(this._checkName(),this.formDirective)){const Z=x.name.previousValue;this.formDirective.removeControl({name:Z,path:this._getPath(Z)})}this._setUpControl()}"isDisabled"in x&&this._updateDisabled(x),ye(x,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(x){this.viewModel=x,this.update.emit(x)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(x){On.then(()=>{this.control.setValue(x,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(x){const Z=x.isDisabled.currentValue,De=0!==Z&&(0,_.L39)(Z);On.then(()=>{De&&!this.control.disabled?this.control.disable():!De&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(x){return this._parent?Bn(x,this._parent):[x]}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(Ln,9),_.rXU(Ue,10),_.rXU(We,10),_.rXU(Le,10),_.rXU(_.gRc,8),_.rXU(Bt,8))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[_.Mj6.None,"disabled","isDisabled"],model:[_.Mj6.None,"ngModel","model"],options:[_.Mj6.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_.Jv_([Ei]),_.Vt3,_.OA$]})}return H})(),Vo=(()=>{class H{static#e=this.\u0275fac=function(Z){return new(Z||H)};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return H})();const Gi={provide:Le,useExisting:(0,_.Rfq)(()=>Ks),multi:!0};let Ks=(()=>{class H extends fe{writeValue(x){this.setProperty("value",x??"")}registerOnChange(x){this.onChange=Z=>{x(""==Z?null:parseFloat(Z))}}static#e=this.\u0275fac=(()=>{let x;return function(De){return(x||(x=_.xGo(H)))(De||H)}})();static#t=this.\u0275dir=_.FsC({type:H,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(Z,De){1&Z&&_.bIt("input",function(Jn){return De.onChange(Jn.target.value)})("blur",function(){return De.onTouched()})},features:[_.Jv_([Gi]),_.Vt3]})}return H})();const wr=new _.nKC(""),da={provide:Ln,useExisting:(0,_.Rfq)(()=>Rs)};let Rs=(()=>{class H extends Ln{constructor(x,Z,De){super(),this.callSetDisabledState=De,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.bkB,this._setValidators(x),this._setAsyncValidators(Z)}ngOnChanges(x){this._checkFormPresent(),x.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(x){const Z=this.form.get(x.path);return qn(Z,x,this.callSetDisabledState),Z.updateValueAndValidity({emitEvent:!1}),this.directives.push(x),Z}getControl(x){return this.form.get(x.path)}removeControl(x){Sn(x.control||null,x,!1),function Xt(H,W){const x=H.indexOf(W);x>-1&&H.splice(x,1)}(this.directives,x)}addFormGroup(x){this._setUpFormContainer(x)}removeFormGroup(x){this._cleanUpFormContainer(x)}getFormGroup(x){return this.form.get(x.path)}addFormArray(x){this._setUpFormContainer(x)}removeFormArray(x){this._cleanUpFormContainer(x)}getFormArray(x){return this.form.get(x.path)}updateModel(x,Z){this.form.get(x.path).setValue(Z)}onSubmit(x){return this.submitted=!0,function dt(H,W){H._syncPendingControls(),W.forEach(x=>{const Z=x.control;"submit"===Z.updateOn&&Z._pendingChange&&(x.viewToModelUpdate(Z._pendingValue),Z._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(x),"dialog"===x?.target?.method}onReset(){this.resetForm()}resetForm(x=void 0){this.form.reset(x),this.submitted=!1}_updateDomValue(){this.directives.forEach(x=>{const Z=x.control,De=this.form.get(x.path);Z!==De&&(Sn(Z||null,x),(H=>H instanceof ui)(De)&&(qn(De,x,this.callSetDisabledState),x.control=De))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(x){const Z=this.form.get(x.path);(function Hi(H,W){$r(H,W)})(Z,x),Z.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(x){if(this.form){const Z=this.form.get(x.path);Z&&function ti(H,W){return Qr(H,W)}(Z,x)&&Z.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$r(this.form,this),this._oldForm&&Qr(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(Ue,10),_.rXU(We,10),_.rXU(Bt,8))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["","formGroup",""]],hostBindings:function(Z,De){1&Z&&_.bIt("submit",function(Jn){return De.onSubmit(Jn)})("reset",function(){return De.onReset()})},inputs:{form:[_.Mj6.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_.Jv_([da]),_.Vt3,_.OA$]})}return H})();const Xs={provide:ot,useExisting:(0,_.Rfq)(()=>Xr)};let Xr=(()=>{class H extends ot{set isDisabled(x){}static#e=this._ngModelWarningSentOnce=!1;constructor(x,Z,De,pn,Jn){super(),this._ngModelWarningConfig=Jn,this._added=!1,this.name=null,this.update=new _.bkB,this._ngModelWarningSent=!1,this._parent=x,this._setValidators(Z),this._setAsyncValidators(De),this.valueAccessor=Ze(0,pn)}ngOnChanges(x){this._added||this._setUpControl(),ye(x,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(x){this.viewModel=x,this.update.emit(x)}get path(){return Bn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(Ln,13),_.rXU(Ue,10),_.rXU(We,10),_.rXU(Le,10),_.rXU(wr,8))};static#n=this.\u0275dir=_.FsC({type:H,selectors:[["","formControlName",""]],inputs:{name:[_.Mj6.None,"formControlName","name"],isDisabled:[_.Mj6.None,"disabled","isDisabled"],model:[_.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[_.Jv_([Xs]),_.Vt3,_.OA$]})}return H})();const Uo={provide:Le,useExisting:(0,_.Rfq)(()=>ei),multi:!0};function hi(H,W){return null==H?`${W}`:(W&&"object"==typeof W&&(W="Object"),`${H}: ${W}`.slice(0,50))}let ei=(()=>{class H extends fe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(x){this._compareWith=x}writeValue(x){this.value=x;const De=hi(this._getOptionId(x),x);this.setProperty("value",De)}registerOnChange(x){this.onChange=Z=>{this.value=this._getOptionValue(Z),x(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(x){for(const Z of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Z),x))return Z;return null}_getOptionValue(x){const Z=function Hr(H){return H.split(":")[0]}(x);return this._optionMap.has(Z)?this._optionMap.get(Z):x}static#e=this.\u0275fac=(()=>{let x;return function(De){return(x||(x=_.xGo(H)))(De||H)}})();static#t=this.\u0275dir=_.FsC({type:H,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(Z,De){1&Z&&_.bIt("change",function(Jn){return De.onChange(Jn.target.value)})("blur",function(){return De.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.Jv_([Uo]),_.Vt3]})}return H})(),os=(()=>{class H{constructor(x,Z,De){this._element=x,this._renderer=Z,this._select=De,this._select&&(this.id=this._select._registerOption())}set ngValue(x){null!=this._select&&(this._select._optionMap.set(this.id,x),this._setElementValue(hi(this.id,x)),this._select.writeValue(this._select.value))}set value(x){this._setElementValue(x),this._select&&this._select.writeValue(this._select.value)}_setElementValue(x){this._renderer.setProperty(this._element.nativeElement,"value",x)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(_.aKT),_.rXU(_.sFG),_.rXU(ei,9))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return H})();const dn={provide:Le,useExisting:(0,_.Rfq)(()=>gs),multi:!0};function si(H,W){return null==H?`${W}`:("string"==typeof W&&(W=`'${W}'`),W&&"object"==typeof W&&(W="Object"),`${H}: ${W}`.slice(0,50))}let gs=(()=>{class H extends fe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(x){this._compareWith=x}writeValue(x){let Z;if(this.value=x,Array.isArray(x)){const De=x.map(pn=>this._getOptionId(pn));Z=(pn,Jn)=>{pn._setSelected(De.indexOf(Jn.toString())>-1)}}else Z=(De,pn)=>{De._setSelected(!1)};this._optionMap.forEach(Z)}registerOnChange(x){this.onChange=Z=>{const De=[],pn=Z.selectedOptions;if(void 0!==pn){const Jn=pn;for(let ys=0;ys<Jn.length;ys++){const fi=this._getOptionValue(Jn[ys].value);De.push(fi)}}else{const Jn=Z.options;for(let ys=0;ys<Jn.length;ys++){const Zs=Jn[ys];if(Zs.selected){const fi=this._getOptionValue(Zs.value);De.push(fi)}}}this.value=De,x(De)}}_registerOption(x){const Z=(this._idCounter++).toString();return this._optionMap.set(Z,x),Z}_getOptionId(x){for(const Z of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Z)._value,x))return Z;return null}_getOptionValue(x){const Z=function ps(H){return H.split(":")[0]}(x);return this._optionMap.has(Z)?this._optionMap.get(Z)._value:x}static#e=this.\u0275fac=(()=>{let x;return function(De){return(x||(x=_.xGo(H)))(De||H)}})();static#t=this.\u0275dir=_.FsC({type:H,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(Z,De){1&Z&&_.bIt("change",function(Jn){return De.onChange(Jn.target)})("blur",function(){return De.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.Jv_([dn]),_.Vt3]})}return H})(),Ys=(()=>{class H{constructor(x,Z,De){this._element=x,this._renderer=Z,this._select=De,this._select&&(this.id=this._select._registerOption(this))}set ngValue(x){null!=this._select&&(this._value=x,this._setElementValue(si(this.id,x)),this._select.writeValue(this._select.value))}set value(x){this._select?(this._value=x,this._setElementValue(si(this.id,x)),this._select.writeValue(this._select.value)):this._setElementValue(x)}_setElementValue(x){this._renderer.setProperty(this._element.nativeElement,"value",x)}_setSelected(x){this._renderer.setProperty(this._element.nativeElement,"selected",x)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(_.aKT),_.rXU(_.sFG),_.rXU(gs,9))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return H})(),wi=(()=>{class H{static#e=this.\u0275fac=function(Z){return new(Z||H)};static#t=this.\u0275mod=_.$C({type:H});static#n=this.\u0275inj=_.G2t({})}return H})();class yr extends Nt{constructor(W,x,Z){super(Kr(x),xr(Z,x)),this.controls=W,this._initObservables(),this._setUpdateStrategy(x),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(W){return this.controls[this._adjustIndex(W)]}push(W,x={}){this.controls.push(W),this._registerControl(W),this.updateValueAndValidity({emitEvent:x.emitEvent}),this._onCollectionChange()}insert(W,x,Z={}){this.controls.splice(W,0,x),this._registerControl(x),this.updateValueAndValidity({emitEvent:Z.emitEvent})}removeAt(W,x={}){let Z=this._adjustIndex(W);Z<0&&(Z=0),this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),this.controls.splice(Z,1),this.updateValueAndValidity({emitEvent:x.emitEvent})}setControl(W,x,Z={}){let De=this._adjustIndex(W);De<0&&(De=0),this.controls[De]&&this.controls[De]._registerOnCollectionChange(()=>{}),this.controls.splice(De,1),x&&(this.controls.splice(De,0,x),this._registerControl(x)),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(W,x={}){Xe(this,0,W),W.forEach((Z,De)=>{Ce(this,!1,De),this.at(De).setValue(Z,{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x)}patchValue(W,x={}){null!=W&&(W.forEach((Z,De)=>{this.at(De)&&this.at(De).patchValue(Z,{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x))}reset(W=[],x={}){this._forEachChild((Z,De)=>{Z.reset(W[De],{onlySelf:!0,emitEvent:x.emitEvent})}),this._updatePristine(x),this._updateTouched(x),this.updateValueAndValidity(x)}getRawValue(){return this.controls.map(W=>W.getRawValue())}clear(W={}){this.controls.length<1||(this._forEachChild(x=>x._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:W.emitEvent}))}_adjustIndex(W){return W<0?W+this.length:W}_syncPendingControls(){let W=this.controls.reduce((x,Z)=>!!Z._syncPendingControls()||x,!1);return W&&this.updateValueAndValidity({onlySelf:!0}),W}_forEachChild(W){this.controls.forEach((x,Z)=>{W(x,Z)})}_updateValue(){this.value=this.controls.filter(W=>W.enabled||this.disabled).map(W=>W.value)}_anyControls(W){return this.controls.some(x=>x.enabled&&W(x))}_setUpControls(){this._forEachChild(W=>this._registerControl(W))}_allControlsDisabled(){for(const W of this.controls)if(W.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(W){W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange)}_find(W){return this.at(W)??null}}function Yr(H){return!!H&&(void 0!==H.asyncValidators||void 0!==H.validators||void 0!==H.updateOn)}let co=(()=>{class H{constructor(){this.useNonNullable=!1}get nonNullable(){const x=new H;return x.useNonNullable=!0,x}group(x,Z=null){const De=this._reduceControls(x);let pn={};return Yr(Z)?pn=Z:null!==Z&&(pn.validators=Z.validator,pn.asyncValidators=Z.asyncValidator),new ge(De,pn)}record(x,Z=null){const De=this._reduceControls(x);return new me(De,Z)}control(x,Z,De){let pn={};return this.useNonNullable?(Yr(Z)?pn=Z:(pn.validators=Z,pn.asyncValidators=De),new ui(x,{...pn,nonNullable:!0})):new ui(x,Z,De)}array(x,Z,De){const pn=x.map(Jn=>this._createControl(Jn));return new yr(pn,Z,De)}_reduceControls(x){const Z={};return Object.keys(x).forEach(De=>{Z[De]=this._createControl(x[De])}),Z}_createControl(x){return x instanceof ui||x instanceof Nt?x:Array.isArray(x)?this.control(x[0],x.length>1?x[1]:null,x.length>2?x[2]:null):this.control(x)}static#e=this.\u0275fac=function(Z){return new(Z||H)};static#t=this.\u0275prov=_.jDH({token:H,factory:H.\u0275fac,providedIn:"root"})}return H})(),Co=(()=>{class H{static withConfig(x){return{ngModule:H,providers:[{provide:Bt,useValue:x.callSetDisabledState??En}]}}static#e=this.\u0275fac=function(Z){return new(Z||H)};static#t=this.\u0275mod=_.$C({type:H});static#n=this.\u0275inj=_.G2t({imports:[wi]})}return H})(),xi=(()=>{class H{static withConfig(x){return{ngModule:H,providers:[{provide:wr,useValue:x.warnOnNgModelWithFormControl??"always"},{provide:Bt,useValue:x.callSetDisabledState??En}]}}static#e=this.\u0275fac=function(Z){return new(Z||H)};static#t=this.\u0275mod=_.$C({type:H});static#n=this.\u0275inj=_.G2t({imports:[wi]})}return H})()},345:(sn,Ke,k)=>{k.d(Ke,{B7:()=>Je,Bb:()=>In,hE:()=>Rt,sG:()=>Cn});var _=k(4438),T=k(177);class R extends T.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class y extends R{static makeCurrent(){(0,T.ZD)(new y)}onAndCancel(we,Ce,Xe){return we.addEventListener(Ce,Xe),()=>{we.removeEventListener(Ce,Xe)}}dispatchEvent(we,Ce){we.dispatchEvent(Ce)}remove(we){we.parentNode&&we.parentNode.removeChild(we)}createElement(we,Ce){return(Ce=Ce||this.getDefaultDocument()).createElement(we)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(we){return we.nodeType===Node.ELEMENT_NODE}isShadowRoot(we){return we instanceof DocumentFragment}getGlobalEventTarget(we,Ce){return"window"===Ce?window:"document"===Ce?we:"body"===Ce?we.body:null}getBaseHref(we){const Ce=function be(){return te=te||document.querySelector("base"),te?te.getAttribute("href"):null}();return null==Ce?null:function fe(ke){return new URL(ke,document.baseURI).pathname}(Ce)}resetBaseElement(){te=null}getUserAgent(){return window.navigator.userAgent}getCookie(we){return(0,T._b)(document.cookie,we)}}let te=null,Re=(()=>{class ke{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Xe){return new(Xe||ke)};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac})}return ke})();const _e=new _.nKC("");let ve=(()=>{class ke{constructor(Ce,Xe){this._zone=Xe,this._eventNameToPlugin=new Map,Ce.forEach(Nt=>{Nt.manager=this}),this._plugins=Ce.slice().reverse()}addEventListener(Ce,Xe,Nt){return this._findPluginFor(Xe).addEventListener(Ce,Xe,Nt)}getZone(){return this._zone}_findPluginFor(Ce){let Xe=this._eventNameToPlugin.get(Ce);if(Xe)return Xe;if(Xe=this._plugins.find(ge=>ge.supports(Ce)),!Xe)throw new _.wOt(5101,!1);return this._eventNameToPlugin.set(Ce,Xe),Xe}static#e=this.\u0275fac=function(Xe){return new(Xe||ke)(_.KVO(_e),_.KVO(_.SKi))};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac})}return ke})();class ze{constructor(we){this._doc=we}}const Ct="ng-app-id";let ht=(()=>{class ke{constructor(Ce,Xe,Nt,ge={}){this.doc=Ce,this.appId=Xe,this.nonce=Nt,this.platformId=ge,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,T.Vy)(ge),this.resetHostNodes()}addStyles(Ce){for(const Xe of Ce)1===this.changeUsageCount(Xe,1)&&this.onStyleAdded(Xe)}removeStyles(Ce){for(const Xe of Ce)this.changeUsageCount(Xe,-1)<=0&&this.onStyleRemoved(Xe)}ngOnDestroy(){const Ce=this.styleNodesInDOM;Ce&&(Ce.forEach(Xe=>Xe.remove()),Ce.clear());for(const Xe of this.getAllStyles())this.onStyleRemoved(Xe);this.resetHostNodes()}addHost(Ce){this.hostNodes.add(Ce);for(const Xe of this.getAllStyles())this.addStyleToHost(Ce,Xe)}removeHost(Ce){this.hostNodes.delete(Ce)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Ce){for(const Xe of this.hostNodes)this.addStyleToHost(Xe,Ce)}onStyleRemoved(Ce){const Xe=this.styleRef;Xe.get(Ce)?.elements?.forEach(Nt=>Nt.remove()),Xe.delete(Ce)}collectServerRenderedStyles(){const Ce=this.doc.head?.querySelectorAll(`style[${Ct}="${this.appId}"]`);if(Ce?.length){const Xe=new Map;return Ce.forEach(Nt=>{null!=Nt.textContent&&Xe.set(Nt.textContent,Nt)}),Xe}return null}changeUsageCount(Ce,Xe){const Nt=this.styleRef;if(Nt.has(Ce)){const ge=Nt.get(Ce);return ge.usage+=Xe,ge.usage}return Nt.set(Ce,{usage:Xe,elements:[]}),Xe}getStyleElement(Ce,Xe){const Nt=this.styleNodesInDOM,ge=Nt?.get(Xe);if(ge?.parentNode===Ce)return Nt.delete(Xe),ge.removeAttribute(Ct),ge;{const q=this.doc.createElement("style");return this.nonce&&q.setAttribute("nonce",this.nonce),q.textContent=Xe,this.platformIsServer&&q.setAttribute(Ct,this.appId),Ce.appendChild(q),q}}addStyleToHost(Ce,Xe){const Nt=this.getStyleElement(Ce,Xe),ge=this.styleRef,q=ge.get(Xe)?.elements;q?q.push(Nt):ge.set(Xe,{elements:[Nt],usage:1})}resetHostNodes(){const Ce=this.hostNodes;Ce.clear(),Ce.add(this.doc.head)}static#e=this.\u0275fac=function(Xe){return new(Xe||ke)(_.KVO(T.qQ),_.KVO(_.sZ2),_.KVO(_.BIS,8),_.KVO(_.Agw))};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac})}return ke})();const Me={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ct=/%COMP%/g,ue=new _.nKC("",{providedIn:"root",factory:()=>!0});function Ye(ke,we){return we.map(Ce=>Ce.replace(ct,ke))}let Je=(()=>{class ke{constructor(Ce,Xe,Nt,ge,q,J,se,me=null){this.eventManager=Ce,this.sharedStylesHost=Xe,this.appId=Nt,this.removeStylesOnCompDestroy=ge,this.doc=q,this.platformId=J,this.ngZone=se,this.nonce=me,this.rendererByCompId=new Map,this.platformIsServer=(0,T.Vy)(J),this.defaultRenderer=new Mt(Ce,q,se,this.platformIsServer)}createRenderer(Ce,Xe){if(!Ce||!Xe)return this.defaultRenderer;this.platformIsServer&&Xe.encapsulation===_.gXe.ShadowDom&&(Xe={...Xe,encapsulation:_.gXe.Emulated});const Nt=this.getOrCreateRenderer(Ce,Xe);return Nt instanceof un?Nt.applyToHost(Ce):Nt instanceof St&&Nt.applyStyles(),Nt}getOrCreateRenderer(Ce,Xe){const Nt=this.rendererByCompId;let ge=Nt.get(Xe.id);if(!ge){const q=this.doc,J=this.ngZone,se=this.eventManager,me=this.sharedStylesHost,Dt=this.removeStylesOnCompDestroy,Bt=this.platformIsServer;switch(Xe.encapsulation){case _.gXe.Emulated:ge=new un(se,me,Xe,this.appId,Dt,q,J,Bt);break;case _.gXe.ShadowDom:return new Jt(se,me,Ce,Xe,q,J,this.nonce,Bt);default:ge=new St(se,me,Xe,Dt,q,J,Bt)}Nt.set(Xe.id,ge)}return ge}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Xe){return new(Xe||ke)(_.KVO(ve),_.KVO(ht),_.KVO(_.sZ2),_.KVO(ue),_.KVO(T.qQ),_.KVO(_.Agw),_.KVO(_.SKi),_.KVO(_.BIS))};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac})}return ke})();class Mt{constructor(we,Ce,Xe,Nt){this.eventManager=we,this.doc=Ce,this.ngZone=Xe,this.platformIsServer=Nt,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(we,Ce){return Ce?this.doc.createElementNS(Me[Ce]||Ce,we):this.doc.createElement(we)}createComment(we){return this.doc.createComment(we)}createText(we){return this.doc.createTextNode(we)}appendChild(we,Ce){(He(we)?we.content:we).appendChild(Ce)}insertBefore(we,Ce,Xe){we&&(He(we)?we.content:we).insertBefore(Ce,Xe)}removeChild(we,Ce){we&&we.removeChild(Ce)}selectRootElement(we,Ce){let Xe="string"==typeof we?this.doc.querySelector(we):we;if(!Xe)throw new _.wOt(-5104,!1);return Ce||(Xe.textContent=""),Xe}parentNode(we){return we.parentNode}nextSibling(we){return we.nextSibling}setAttribute(we,Ce,Xe,Nt){if(Nt){Ce=Nt+":"+Ce;const ge=Me[Nt];ge?we.setAttributeNS(ge,Ce,Xe):we.setAttribute(Ce,Xe)}else we.setAttribute(Ce,Xe)}removeAttribute(we,Ce,Xe){if(Xe){const Nt=Me[Xe];Nt?we.removeAttributeNS(Nt,Ce):we.removeAttribute(`${Xe}:${Ce}`)}else we.removeAttribute(Ce)}addClass(we,Ce){we.classList.add(Ce)}removeClass(we,Ce){we.classList.remove(Ce)}setStyle(we,Ce,Xe,Nt){Nt&(_.czy.DashCase|_.czy.Important)?we.style.setProperty(Ce,Xe,Nt&_.czy.Important?"important":""):we.style[Ce]=Xe}removeStyle(we,Ce,Xe){Xe&_.czy.DashCase?we.style.removeProperty(Ce):we.style[Ce]=""}setProperty(we,Ce,Xe){null!=we&&(we[Ce]=Xe)}setValue(we,Ce){we.nodeValue=Ce}listen(we,Ce,Xe){if("string"==typeof we&&!(we=(0,T.QT)().getGlobalEventTarget(this.doc,we)))throw new Error(`Unsupported event target ${we} for event ${Ce}`);return this.eventManager.addEventListener(we,Ce,this.decoratePreventDefault(Xe))}decoratePreventDefault(we){return Ce=>{if("__ngUnwrap__"===Ce)return we;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>we(Ce)):we(Ce))&&Ce.preventDefault()}}}function He(ke){return"TEMPLATE"===ke.tagName&&void 0!==ke.content}class Jt extends Mt{constructor(we,Ce,Xe,Nt,ge,q,J,se){super(we,ge,q,se),this.sharedStylesHost=Ce,this.hostEl=Xe,this.shadowRoot=Xe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const me=Ye(Nt.id,Nt.styles);for(const Dt of me){const Bt=document.createElement("style");J&&Bt.setAttribute("nonce",J),Bt.textContent=Dt,this.shadowRoot.appendChild(Bt)}}nodeOrShadowRoot(we){return we===this.hostEl?this.shadowRoot:we}appendChild(we,Ce){return super.appendChild(this.nodeOrShadowRoot(we),Ce)}insertBefore(we,Ce,Xe){return super.insertBefore(this.nodeOrShadowRoot(we),Ce,Xe)}removeChild(we,Ce){return super.removeChild(this.nodeOrShadowRoot(we),Ce)}parentNode(we){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(we)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class St extends Mt{constructor(we,Ce,Xe,Nt,ge,q,J,se){super(we,ge,q,J),this.sharedStylesHost=Ce,this.removeStylesOnCompDestroy=Nt,this.styles=se?Ye(se,Xe.styles):Xe.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class un extends St{constructor(we,Ce,Xe,Nt,ge,q,J,se){const me=Nt+"-"+Xe.id;super(we,Ce,Xe,ge,q,J,se,me),this.contentAttr=function Ee(ke){return"_ngcontent-%COMP%".replace(ct,ke)}(me),this.hostAttr=function oe(ke){return"_nghost-%COMP%".replace(ct,ke)}(me)}applyToHost(we){this.applyStyles(),this.setAttribute(we,this.hostAttr,"")}createElement(we,Ce){const Xe=super.createElement(we,Ce);return super.setAttribute(Xe,this.contentAttr,""),Xe}}let Lt=(()=>{class ke extends ze{constructor(Ce){super(Ce)}supports(Ce){return!0}addEventListener(Ce,Xe,Nt){return Ce.addEventListener(Xe,Nt,!1),()=>this.removeEventListener(Ce,Xe,Nt)}removeEventListener(Ce,Xe,Nt){return Ce.removeEventListener(Xe,Nt)}static#e=this.\u0275fac=function(Xe){return new(Xe||ke)(_.KVO(T.qQ))};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac})}return ke})();const at=["alt","control","meta","shift"],tn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pe={alt:ke=>ke.altKey,control:ke=>ke.ctrlKey,meta:ke=>ke.metaKey,shift:ke=>ke.shiftKey};let Qe=(()=>{class ke extends ze{constructor(Ce){super(Ce)}supports(Ce){return null!=ke.parseEventName(Ce)}addEventListener(Ce,Xe,Nt){const ge=ke.parseEventName(Xe),q=ke.eventCallback(ge.fullKey,Nt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.QT)().onAndCancel(Ce,ge.domEventName,q))}static parseEventName(Ce){const Xe=Ce.toLowerCase().split("."),Nt=Xe.shift();if(0===Xe.length||"keydown"!==Nt&&"keyup"!==Nt)return null;const ge=ke._normalizeKey(Xe.pop());let q="",J=Xe.indexOf("code");if(J>-1&&(Xe.splice(J,1),q="code."),at.forEach(me=>{const Dt=Xe.indexOf(me);Dt>-1&&(Xe.splice(Dt,1),q+=me+".")}),q+=ge,0!=Xe.length||0===ge.length)return null;const se={};return se.domEventName=Nt,se.fullKey=q,se}static matchEventFullKeyCode(Ce,Xe){let Nt=tn[Ce.key]||Ce.key,ge="";return Xe.indexOf("code.")>-1&&(Nt=Ce.code,ge="code."),!(null==Nt||!Nt)&&(Nt=Nt.toLowerCase()," "===Nt?Nt="space":"."===Nt&&(Nt="dot"),at.forEach(q=>{q!==Nt&&(0,Pe[q])(Ce)&&(ge+=q+".")}),ge+=Nt,ge===Xe)}static eventCallback(Ce,Xe,Nt){return ge=>{ke.matchEventFullKeyCode(ge,Ce)&&Nt.runGuarded(()=>Xe(ge))}}static _normalizeKey(Ce){return"esc"===Ce?"escape":Ce}static#e=this.\u0275fac=function(Xe){return new(Xe||ke)(_.KVO(T.qQ))};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac})}return ke})();const Cn=(0,_.oH4)(_.fpN,"browser",[{provide:_.Agw,useValue:T.AJ},{provide:_.PLl,useValue:function Kt(){y.makeCurrent()},multi:!0},{provide:T.qQ,useFactory:function rn(){return(0,_.TL$)(document),document},deps:[]}]),Dn=new _.nKC(""),Ln=[{provide:_.e01,useClass:class Le{addToWindow(we){_.JZv.getAngularTestability=(Xe,Nt=!0)=>{const ge=we.findTestabilityInTree(Xe,Nt);if(null==ge)throw new _.wOt(5103,!1);return ge},_.JZv.getAllAngularTestabilities=()=>we.getAllTestabilities(),_.JZv.getAllAngularRootElements=()=>we.getAllRootElements(),_.JZv.frameworkStabilizers||(_.JZv.frameworkStabilizers=[]),_.JZv.frameworkStabilizers.push(Xe=>{const Nt=_.JZv.getAllAngularTestabilities();let ge=Nt.length;const q=function(){ge--,0==ge&&Xe()};Nt.forEach(J=>{J.whenStable(q)})})}findTestabilityInTree(we,Ce,Xe){return null==Ce?null:we.getTestability(Ce)??(Xe?(0,T.QT)().isShadowRoot(Ce)?this.findTestabilityInTree(we,Ce.host,!0):this.findTestabilityInTree(we,Ce.parentElement,!0):null)}},deps:[]},{provide:_.WHO,useClass:_.NYb,deps:[_.SKi,_.giA,_.e01]},{provide:_.NYb,useClass:_.NYb,deps:[_.SKi,_.giA,_.e01]}],ot=[{provide:_.H8p,useValue:"root"},{provide:_.zcH,useFactory:function gn(){return new _.zcH},deps:[]},{provide:_e,useClass:Lt,multi:!0,deps:[T.qQ,_.SKi,_.Agw]},{provide:_e,useClass:Qe,multi:!0,deps:[T.qQ]},Je,ht,ve,{provide:_._9s,useExisting:Je},{provide:T.N0,useClass:Re,deps:[]},[]];let In=(()=>{class ke{constructor(Ce){}static withServerTransition(Ce){return{ngModule:ke,providers:[{provide:_.sZ2,useValue:Ce.appId}]}}static#e=this.\u0275fac=function(Xe){return new(Xe||ke)(_.KVO(Dn,12))};static#t=this.\u0275mod=_.$C({type:ke});static#n=this.\u0275inj=_.G2t({providers:[...ot,...Ln],imports:[T.MD,_.Hbi]})}return ke})(),Rt=(()=>{class ke{constructor(Ce){this._doc=Ce}getTitle(){return this._doc.title}setTitle(Ce){this._doc.title=Ce||""}static#e=this.\u0275fac=function(Xe){return new(Xe||ke)(_.KVO(T.qQ))};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac,providedIn:"root"})}return ke})()},4454:(sn,Ke,k)=>{k.d(Ke,{nX:()=>si,Ix:()=>zr,Wk:()=>Go,iI:()=>ja,n3:()=>ts});var _=k(467),T=k(4438),R=k(1985),y=k(8071),be=k(8455),fe=k(7673),Le=k(4412),Re=k(3073),_e=k(3669),ve=k(6450),ze=k(9326),Ct=k(8496),ht=k(4360),Me=k(5225);function ct(...E){const M=(0,ze.lI)(E),w=(0,ze.ms)(E),{args:O,keys:j}=(0,Re.D)(E);if(0===O.length)return(0,be.H)([],M);const ee=new R.c(function Ue(E,M,w=_e.D){return O=>{We(M,()=>{const{length:j}=E,ee=new Array(j);let Te=j,At=j;for(let pt=0;pt<j;pt++)We(M,()=>{const _n=(0,be.H)(E[pt],M);let er=!1;_n.subscribe((0,ht._)(O,dr=>{ee[pt]=dr,er||(er=!0,At--),At||O.next(w(ee.slice()))},()=>{--Te||O.complete()}))},O)},O)}}(O,M,j?Te=>(0,Ct.e)(j,Te):_e.D));return w?ee.pipe((0,ve.I)(w)):ee}function We(E,M,w){E?(0,Me.N)(w,E,M):M()}var $e=k(9350),Pt=k(8793),ue=k(8750);function Ee(E){return new R.c(M=>{(0,ue.Tg)(E()).subscribe(M)})}var oe=k(1203);function Ye(E,M){const w=(0,y.T)(E)?E:()=>E,O=j=>j.error(w());return new R.c(M?j=>M.schedule(O,0,j):O)}var Je=k(983),Mt=k(8359),ie=k(9974);function je(){return(0,ie.N)((E,M)=>{let w=null;E._refCount++;const O=(0,ht._)(M,void 0,void 0,void 0,()=>{if(!E||E._refCount<=0||0<--E._refCount)return void(w=null);const j=E._connection,ee=w;w=null,j&&(!ee||j===ee)&&j.unsubscribe(),M.unsubscribe()});E.subscribe(O),O.closed||(w=E.connect())})}class He extends R.c{constructor(M,w){super(),this.source=M,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,ie.S)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,M?.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new Mt.yU;const w=this.getSubject();M.add(this.source.subscribe((0,ht._)(w,void 0,()=>{this._teardown(),w.complete()},O=>{this._teardown(),w.error(O)},()=>this._teardown()))),M.closed&&(this._connection=null,M=Mt.yU.EMPTY)}return M}refCount(){return je()(this)}}var Jt=k(1413),St=k(177),un=k(6354),Lt=k(5558),at=k(6697),tn=k(9172),Pe=k(5964),Qe=k(1397),ft=k(1594),yt=k(274),It=k(8141),tt=k(9437),Kt=k(2816),gn=k(9901);function rn(E){return E<=0?()=>Je.w:(0,ie.N)((M,w)=>{let O=[];M.subscribe((0,ht._)(w,j=>{O.push(j),E<O.length&&O.shift()},()=>{for(const j of O)w.next(j);w.complete()},void 0,()=>{O=null}))})}var on=k(3774),Ln=k(980),ot=k(5343),Kn=k(6365),sr=k(345);const Rt="primary",_t=Symbol("RouteTitle");class Zr{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const w=this.params[M];return Array.isArray(w)?w[0]:w}return null}getAll(M){if(this.has(M)){const w=this.params[M];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function Ft(E){return new Zr(E)}function it(E,M,w){const O=w.path.split("/");if(O.length>E.length||"full"===w.pathMatch&&(M.hasChildren()||O.length<E.length))return null;const j={};for(let ee=0;ee<O.length;ee++){const Te=O[ee],At=E[ee];if(Te.startsWith(":"))j[Te.substring(1)]=At;else if(Te!==At.path)return null}return{consumed:E.slice(0,O.length),posParams:j}}function Yn(E,M){const w=E?tr(E):void 0,O=M?tr(M):void 0;if(!w||!O||w.length!=O.length)return!1;let j;for(let ee=0;ee<w.length;ee++)if(j=w[ee],!An(E[j],M[j]))return!1;return!0}function tr(E){return[...Object.keys(E),...Object.getOwnPropertySymbols(E)]}function An(E,M){if(Array.isArray(E)&&Array.isArray(M)){if(E.length!==M.length)return!1;const w=[...E].sort(),O=[...M].sort();return w.every((j,ee)=>O[ee]===j)}return E===M}function bn(E){return E.length>0?E[E.length-1]:null}function kr(E){return function te(E){return!!E&&(E instanceof R.c||(0,y.T)(E.lift)&&(0,y.T)(E.subscribe))}(E)?E:(0,T.jNT)(E)?(0,be.H)(Promise.resolve(E)):(0,fe.of)(E)}const Wr={exact:function hs(E,M,w){if(!Rn(E.segments,M.segments)||!Un(E.segments,M.segments,w)||E.numberOfChildren!==M.numberOfChildren)return!1;for(const O in M.children)if(!E.children[O]||!hs(E.children[O],M.children[O],w))return!1;return!0},subset:Li},jr={exact:function Or(E,M){return Yn(E,M)},subset:function Nn(E,M){return Object.keys(M).length<=Object.keys(E).length&&Object.keys(M).every(w=>An(E[w],M[w]))},ignored:()=>!0};function Vi(E,M,w){return Wr[w.paths](E.root,M.root,w.matrixParams)&&jr[w.queryParams](E.queryParams,M.queryParams)&&!("exact"===w.fragment&&E.fragment!==M.fragment)}function Li(E,M,w){return zt(E,M,M.segments,w)}function zt(E,M,w,O){if(E.segments.length>w.length){const j=E.segments.slice(0,w.length);return!(!Rn(j,w)||M.hasChildren()||!Un(j,w,O))}if(E.segments.length===w.length){if(!Rn(E.segments,w)||!Un(E.segments,w,O))return!1;for(const j in M.children)if(!E.children[j]||!Li(E.children[j],M.children[j],O))return!1;return!0}{const j=w.slice(0,E.segments.length),ee=w.slice(E.segments.length);return!!(Rn(E.segments,j)&&Un(E.segments,j,O)&&E.children[Rt])&&zt(E.children[Rt],M,ee,O)}}function Un(E,M,w){return M.every((O,j)=>jr[w](E[j].parameters,O.parameters))}class Nr{constructor(M=new Zt([],{}),w={},O=null){this.root=M,this.queryParams=w,this.fragment=O}get queryParamMap(){return this._queryParamMap??=Ft(this.queryParams),this._queryParamMap}toString(){return Ce.serialize(this)}}class Zt{constructor(M,w){this.segments=M,this.children=w,this.parent=null,Object.values(w).forEach(O=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xe(this)}}class en{constructor(M,w){this.path=M,this.parameters=w}get parameterMap(){return this._parameterMap??=Ft(this.parameters),this._parameterMap}toString(){return Bt(this)}}function Rn(E,M){return E.length===M.length&&E.every((w,O)=>w.path===M[O].path)}let ke=(()=>{class E{static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:()=>new we,providedIn:"root"})}return E})();class we{parse(M){const w=new or(M);return new Nr(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(M){const w=`/${Nt(M.root,!0)}`,O=function Bn(E){const M=Object.entries(E).map(([w,O])=>Array.isArray(O)?O.map(j=>`${q(w)}=${q(j)}`).join("&"):`${q(w)}=${q(O)}`).filter(w=>w);return M.length?`?${M.join("&")}`:""}(M.queryParams);return`${w}${O}${"string"==typeof M.fragment?`#${function J(E){return encodeURI(E)}(M.fragment)}`:""}`}}const Ce=new we;function Xe(E){return E.segments.map(M=>Bt(M)).join("/")}function Nt(E,M){if(!E.hasChildren())return Xe(E);if(M){const w=E.children[Rt]?Nt(E.children[Rt],!1):"",O=[];return Object.entries(E.children).forEach(([j,ee])=>{j!==Rt&&O.push(`${j}:${Nt(ee,!1)}`)}),O.length>0?`${w}(${O.join("//")})`:w}{const w=function xr(E,M){let w=[];return Object.entries(E.children).forEach(([O,j])=>{O===Rt&&(w=w.concat(M(j,O)))}),Object.entries(E.children).forEach(([O,j])=>{O!==Rt&&(w=w.concat(M(j,O)))}),w}(E,(O,j)=>j===Rt?[Nt(E.children[Rt],!1)]:[`${j}:${Nt(O,!1)}`]);return 1===Object.keys(E.children).length&&null!=E.children[Rt]?`${Xe(E)}/${w[0]}`:`${Xe(E)}/(${w.join("//")})`}}function ge(E){return encodeURIComponent(E).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function q(E){return ge(E).replace(/%3B/gi,";")}function se(E){return ge(E).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function me(E){return decodeURIComponent(E)}function Dt(E){return me(E.replace(/\+/g,"%20"))}function Bt(E){return`${se(E.path)}${function En(E){return Object.entries(E).map(([M,w])=>`;${se(M)}=${se(w)}`).join("")}(E.parameters)}`}const qn=/^[^\/()?;#]+/;function Sn(E){const M=E.match(qn);return M?M[0]:""}const Wt=/^[^\/()?;=#]+/,$r=/^[^=?&#]+/,Ms=/^[^&#]+/;class or{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(M.length>0||Object.keys(w).length>0)&&(O[Rt]=new Zt(M,w)),O}parseSegment(){const M=Sn(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new T.wOt(4009,!1);return this.capture(M),new en(me(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const w=function Ne(E){const M=E.match(Wt);return M?M[0]:""}(this.remaining);if(!w)return;this.capture(w);let O="";if(this.consumeOptional("=")){const j=Sn(this.remaining);j&&(O=j,this.capture(O))}M[me(w)]=me(O)}parseQueryParam(M){const w=function Qr(E){const M=E.match($r);return M?M[0]:""}(this.remaining);if(!w)return;this.capture(w);let O="";if(this.consumeOptional("=")){const Te=function ls(E){const M=E.match(Ms);return M?M[0]:""}(this.remaining);Te&&(O=Te,this.capture(O))}const j=Dt(w),ee=Dt(O);if(M.hasOwnProperty(j)){let Te=M[j];Array.isArray(Te)||(Te=[Te],M[j]=Te),Te.push(ee)}else M[j]=ee}parseParens(M){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=Sn(this.remaining),j=this.remaining[O.length];if("/"!==j&&")"!==j&&";"!==j)throw new T.wOt(4010,!1);let ee;O.indexOf(":")>-1?(ee=O.slice(0,O.indexOf(":")),this.capture(ee),this.capture(":")):M&&(ee=Rt);const Te=this.parseChildren();w[ee]=1===Object.keys(Te).length?Te[Rt]:new Zt([],Te),this.consumeOptional("//")}return w}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new T.wOt(4011,!1)}}function ss(E){return E.segments.length>0?new Zt([],{[Rt]:E}):E}function Hi(E){const M={};for(const[O,j]of Object.entries(E.children)){const ee=Hi(j);if(O===Rt&&0===ee.segments.length&&ee.hasChildren())for(const[Te,At]of Object.entries(ee.children))M[Te]=At;else(ee.segments.length>0||ee.hasChildren())&&(M[O]=ee)}return function ti(E){if(1===E.numberOfChildren&&E.children[Rt]){const M=E.children[Rt];return new Zt(E.segments.concat(M.segments),M.children)}return E}(new Zt(E.segments,M))}function vt(E){return E instanceof Nr}function Vt(E){let M;const j=ss(function w(ee){const Te={};for(const pt of ee.children){const _n=w(pt);Te[pt.outlet]=_n}const At=new Zt(ee.url,Te);return ee===E&&(M=At),At}(E.root));return M??j}function cn(E,M,w,O){let j=E;for(;j.parent;)j=j.parent;if(0===M.length)return Ie(j,j,j,w,O);const ee=function Xt(E){if("string"==typeof E[0]&&1===E.length&&"/"===E[0])return new Ze(!0,0,E);let M=0,w=!1;const O=E.reduce((j,ee,Te)=>{if("object"==typeof ee&&null!=ee){if(ee.outlets){const At={};return Object.entries(ee.outlets).forEach(([pt,_n])=>{At[pt]="string"==typeof _n?_n.split("/"):_n}),[...j,{outlets:At}]}if(ee.segmentPath)return[...j,ee.segmentPath]}return"string"!=typeof ee?[...j,ee]:0===Te?(ee.split("/").forEach((At,pt)=>{0==pt&&"."===At||(0==pt&&""===At?w=!0:".."===At?M++:""!=At&&j.push(At))}),j):[...j,ee]},[]);return new Ze(w,M,O)}(M);if(ee.toRoot())return Ie(j,j,new Zt([],{}),w,O);const Te=function Mn(E,M,w){if(E.isAbsolute)return new $t(M,!0,0);if(!w)return new $t(M,!1,NaN);if(null===w.parent)return new $t(w,!0,0);const O=ne(E.commands[0])?0:1;return function wn(E,M,w){let O=E,j=M,ee=w;for(;ee>j;){if(ee-=j,O=O.parent,!O)throw new T.wOt(4005,!1);j=O.segments.length}return new $t(O,!1,j-ee)}(w,w.segments.length-1+O,E.numberOfDoubleDots)}(ee,j,E),At=Te.processChildren?Er(Te.segmentGroup,Te.index,ee.commands):ii(Te.segmentGroup,Te.index,ee.commands);return Ie(j,Te.segmentGroup,At,w,O)}function ne(E){return"object"==typeof E&&null!=E&&!E.outlets&&!E.segmentPath}function ye(E){return"object"==typeof E&&null!=E&&E.outlets}function Ie(E,M,w,O,j){let Te,ee={};O&&Object.entries(O).forEach(([pt,_n])=>{ee[pt]=Array.isArray(_n)?_n.map(er=>`${er}`):`${_n}`}),Te=E===M?w:dt(E,M,w);const At=ss(Hi(Te));return new Nr(At,ee,j)}function dt(E,M,w){const O={};return Object.entries(E.children).forEach(([j,ee])=>{O[j]=ee===M?w:dt(ee,M,w)}),new Zt(E.segments,O)}class Ze{constructor(M,w,O){if(this.isAbsolute=M,this.numberOfDoubleDots=w,this.commands=O,M&&O.length>0&&ne(O[0]))throw new T.wOt(4003,!1);const j=O.find(ye);if(j&&j!==bn(O))throw new T.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $t{constructor(M,w,O){this.segmentGroup=M,this.processChildren=w,this.index=O}}function ii(E,M,w){if(E??=new Zt([],{}),0===E.segments.length&&E.hasChildren())return Er(E,M,w);const O=function ui(E,M,w){let O=0,j=M;const ee={match:!1,pathIndex:0,commandIndex:0};for(;j<E.segments.length;){if(O>=w.length)return ee;const Te=E.segments[j],At=w[O];if(ye(At))break;const pt=`${At}`,_n=O<w.length-1?w[O+1]:null;if(j>0&&void 0===pt)break;if(pt&&_n&&"object"==typeof _n&&void 0===_n.outlets){if(!Dr(pt,_n,Te))return ee;O+=2}else{if(!Dr(pt,{},Te))return ee;O++}j++}return{match:!0,pathIndex:j,commandIndex:O}}(E,M,w),j=w.slice(O.commandIndex);if(O.match&&O.pathIndex<E.segments.length){const ee=new Zt(E.segments.slice(0,O.pathIndex),{});return ee.children[Rt]=new Zt(E.segments.slice(O.pathIndex),E.children),Er(ee,0,j)}return O.match&&0===j.length?new Zt(E.segments,{}):O.match&&!E.hasChildren()?qr(E,M,w):O.match?Er(E,0,j):qr(E,M,w)}function Er(E,M,w){if(0===w.length)return new Zt(E.segments,{});{const O=function Sr(E){return ye(E[0])?E[0].outlets:{[Rt]:E}}(w),j={};if(Object.keys(O).some(ee=>ee!==Rt)&&E.children[Rt]&&1===E.numberOfChildren&&0===E.children[Rt].segments.length){const ee=Er(E.children[Rt],M,w);return new Zt(E.segments,ee.children)}return Object.entries(O).forEach(([ee,Te])=>{"string"==typeof Te&&(Te=[Te]),null!==Te&&(j[ee]=ii(E.children[ee],M,Te))}),Object.entries(E.children).forEach(([ee,Te])=>{void 0===O[ee]&&(j[ee]=Te)}),new Zt(E.segments,j)}}function qr(E,M,w){const O=E.segments.slice(0,M);let j=0;for(;j<w.length;){const ee=w[j];if(ye(ee)){const pt=Si(ee.outlets);return new Zt(O,pt)}if(0===j&&ne(w[0])){O.push(new en(E.segments[M].path,Ir(w[0]))),j++;continue}const Te=ye(ee)?ee.outlets[Rt]:`${ee}`,At=j<w.length-1?w[j+1]:null;Te&&At&&ne(At)?(O.push(new en(Te,Ir(At))),j+=2):(O.push(new en(Te,{})),j++)}return new Zt(O,{})}function Si(E){const M={};return Object.entries(E).forEach(([w,O])=>{"string"==typeof O&&(O=[O]),null!==O&&(M[w]=qr(new Zt([],{}),0,O))}),M}function Ir(E){const M={};return Object.entries(E).forEach(([w,O])=>M[w]=`${O}`),M}function Dr(E,M,w){return E==w.path&&Yn(M,w.parameters)}const li="imperative";var nr=function(E){return E[E.NavigationStart=0]="NavigationStart",E[E.NavigationEnd=1]="NavigationEnd",E[E.NavigationCancel=2]="NavigationCancel",E[E.NavigationError=3]="NavigationError",E[E.RoutesRecognized=4]="RoutesRecognized",E[E.ResolveStart=5]="ResolveStart",E[E.ResolveEnd=6]="ResolveEnd",E[E.GuardsCheckStart=7]="GuardsCheckStart",E[E.GuardsCheckEnd=8]="GuardsCheckEnd",E[E.RouteConfigLoadStart=9]="RouteConfigLoadStart",E[E.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",E[E.ChildActivationStart=11]="ChildActivationStart",E[E.ChildActivationEnd=12]="ChildActivationEnd",E[E.ActivationStart=13]="ActivationStart",E[E.ActivationEnd=14]="ActivationEnd",E[E.Scroll=15]="Scroll",E[E.NavigationSkipped=16]="NavigationSkipped",E}(nr||{});class Fr{constructor(M,w){this.id=M,this.url=w}}class di extends Fr{constructor(M,w,O="imperative",j=null){super(M,w),this.type=nr.NavigationStart,this.navigationTrigger=O,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vi extends Fr{constructor(M,w,O){super(M,w),this.urlAfterRedirects=O,this.type=nr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Ei=function(E){return E[E.Redirect=0]="Redirect",E[E.SupersededByNewNavigation=1]="SupersededByNewNavigation",E[E.NoDataFromResolver=2]="NoDataFromResolver",E[E.GuardRejected=3]="GuardRejected",E}(Ei||{}),On=function(E){return E[E.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",E[E.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",E}(On||{});class ur extends Fr{constructor(M,w,O,j){super(M,w),this.reason=O,this.code=j,this.type=nr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vo extends Fr{constructor(M,w,O,j){super(M,w),this.reason=O,this.code=j,this.type=nr.NavigationSkipped}}class Gi extends Fr{constructor(M,w,O,j){super(M,w),this.error=O,this.target=j,this.type=nr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ks extends Fr{constructor(M,w,O,j){super(M,w),this.urlAfterRedirects=O,this.state=j,this.type=nr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yo extends Fr{constructor(M,w,O,j){super(M,w),this.urlAfterRedirects=O,this.state=j,this.type=nr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class la extends Fr{constructor(M,w,O,j,ee){super(M,w),this.urlAfterRedirects=O,this.state=j,this.shouldActivate=ee,this.type=nr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yo extends Fr{constructor(M,w,O,j){super(M,w),this.urlAfterRedirects=O,this.state=j,this.type=nr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rr extends Fr{constructor(M,w,O,j){super(M,w),this.urlAfterRedirects=O,this.state=j,this.type=nr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vo{constructor(M){this.route=M,this.type=nr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class qs{constructor(M){this.route=M,this.type=nr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wr{constructor(M){this.snapshot=M,this.type=nr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lo{constructor(M){this.snapshot=M,this.type=nr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qs{constructor(M){this.snapshot=M,this.type=nr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class da{constructor(M){this.snapshot=M,this.type=nr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rs{constructor(M,w,O){this.routerEvent=M,this.position=w,this.anchor=O,this.type=nr.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Pr{}class Ui{constructor(M){this.url=M}}class Cr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new fs,this.attachRef=null}}let fs=(()=>{class E{constructor(){this.contexts=new Map}onChildOutletCreated(w,O){const j=this.getOrCreateContext(w);j.outlet=O,this.contexts.set(w,j)}onChildOutletDestroyed(w){const O=this.getContext(w);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let O=this.getContext(w);return O||(O=new Cr,this.contexts.set(w,O)),O}getContext(w){return this.contexts.get(w)||null}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();class Xs{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const w=this.pathFromRoot(M);return w.length>1?w[w.length-2]:null}children(M){const w=Xr(M,this._root);return w?w.children.map(O=>O.value):[]}firstChild(M){const w=Xr(M,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(M){const w=Uo(M,this._root);return w.length<2?[]:w[w.length-2].children.map(j=>j.value).filter(j=>j!==M)}pathFromRoot(M){return Uo(M,this._root).map(w=>w.value)}}function Xr(E,M){if(E===M.value)return M;for(const w of M.children){const O=Xr(E,w);if(O)return O}return null}function Uo(E,M){if(E===M.value)return[M];for(const w of M.children){const O=Uo(E,w);if(O.length)return O.unshift(M),O}return[]}class hi{constructor(M,w){this.value=M,this.children=w}toString(){return`TreeNode(${this.value})`}}function Hr(E){const M={};return E&&E.children.forEach(w=>M[w.value.outlet]=w),M}class ei extends Xs{constructor(M,w){super(M),this.snapshot=w,Ys(this,M)}toString(){return this.snapshot.toString()}}function os(E){const M=function dn(E){const ee=new xs([],{},{},"",{},Rt,E,null,{});return new gs("",new hi(ee,[]))}(E),w=new Le.t([new en("",{})]),O=new Le.t({}),j=new Le.t({}),ee=new Le.t({}),Te=new Le.t(""),At=new si(w,O,ee,Te,j,Rt,E,M.root);return At.snapshot=M.root,new ei(new hi(At,[]),M)}class si{constructor(M,w,O,j,ee,Te,At,pt){this.urlSubject=M,this.paramsSubject=w,this.queryParamsSubject=O,this.fragmentSubject=j,this.dataSubject=ee,this.outlet=Te,this.component=At,this._futureSnapshot=pt,this.title=this.dataSubject?.pipe((0,un.T)(_n=>_n[_t]))??(0,fe.of)(void 0),this.url=M,this.params=w,this.queryParams=O,this.fragment=j,this.data=ee}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,un.T)(M=>Ft(M))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,un.T)(M=>Ft(M))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ps(E,M,w="emptyOnly"){let O;const{routeConfig:j}=E;return O=null===M||"always"!==w&&""!==j?.path&&(M.component||M.routeConfig?.loadComponent)?{params:{...E.params},data:{...E.data},resolve:{...E.data,...E._resolvedData??{}}}:{params:{...M.params,...E.params},data:{...M.data,...E.data},resolve:{...E.data,...M.data,...j?.data,...E._resolvedData}},j&&Bi(j)&&(O.resolve[_t]=j.title),O}class xs{get title(){return this.data?.[_t]}constructor(M,w,O,j,ee,Te,At,pt,_n){this.url=M,this.params=w,this.queryParams=O,this.fragment=j,this.data=ee,this.outlet=Te,this.component=At,this.routeConfig=pt,this._resolve=_n}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ft(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ft(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gs extends Xs{constructor(M,w){super(w),this.url=M,Ys(this,w)}toString(){return Pi(this._root)}}function Ys(E,M){M.value._routerState=E,M.children.forEach(w=>Ys(E,w))}function Pi(E){const M=E.children.length>0?` { ${E.children.map(Pi).join(", ")} } `:"";return`${E.value}${M}`}function es(E){if(E.snapshot){const M=E.snapshot,w=E._futureSnapshot;E.snapshot=w,Yn(M.queryParams,w.queryParams)||E.queryParamsSubject.next(w.queryParams),M.fragment!==w.fragment&&E.fragmentSubject.next(w.fragment),Yn(M.params,w.params)||E.paramsSubject.next(w.params),function xt(E,M){if(E.length!==M.length)return!1;for(let w=0;w<E.length;++w)if(!Yn(E[w],M[w]))return!1;return!0}(M.url,w.url)||E.urlSubject.next(w.url),Yn(M.data,w.data)||E.dataSubject.next(w.data)}else E.snapshot=E._futureSnapshot,E.dataSubject.next(E._futureSnapshot.data)}function zi(E,M){const w=Yn(E.params,M.params)&&function Kr(E,M){return Rn(E,M)&&E.every((w,O)=>Yn(w.parameters,M[O].parameters))}(E.url,M.url);return w&&!(!E.parent!=!M.parent)&&(!E.parent||zi(E.parent,M.parent))}function Bi(E){return"string"==typeof E.title||null===E.title}let ts=(()=>{class E{constructor(){this.activated=null,this._activatedRoute=null,this.name=Rt,this.activateEvents=new T.bkB,this.deactivateEvents=new T.bkB,this.attachEvents=new T.bkB,this.detachEvents=new T.bkB,this.parentContexts=(0,T.WQX)(fs),this.location=(0,T.WQX)(T.c1b),this.changeDetector=(0,T.WQX)(T.gRc),this.environmentInjector=(0,T.WQX)(T.uvJ),this.inputBinder=(0,T.WQX)(ji,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(w){if(w.name){const{firstChange:O,previousValue:j}=w.name;if(O)return;this.isTrackedInParentContexts(j)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(j)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(w){return this.parentContexts.getContext(w)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);w?.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T.wOt(4012,!1);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,O){this.activated=w,this._activatedRoute=O,this.location.insert(w.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,O){if(this.isActivated)throw new T.wOt(4013,!1);this._activatedRoute=w;const j=this.location,Te=w.snapshot.component,At=this.parentContexts.getOrCreateContext(this.name).children,pt=new ks(w,At,j.injector);this.activated=j.createComponent(Te,{index:j.length,injector:pt,environmentInjector:O??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275dir=T.FsC({type:E,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[T.OA$]})}return E})();class ks{__ngOutletInjector(M){return new ks(this.route,this.childContexts,M)}constructor(M,w,O){this.route=M,this.childContexts=w,this.parent=O}get(M,w){return M===si?this.route:M===fs?this.childContexts:this.parent.get(M,w)}}const ji=new T.nKC("");let Bo=(()=>{class E{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(w){this.unsubscribeFromRouteData(w),this.subscribeToRouteData(w)}unsubscribeFromRouteData(w){this.outletDataSubscriptions.get(w)?.unsubscribe(),this.outletDataSubscriptions.delete(w)}subscribeToRouteData(w){const{activatedRoute:O}=w,j=ct([O.queryParams,O.params,O.data]).pipe((0,Lt.n)(([ee,Te,At],pt)=>(At={...ee,...Te,...At},0===pt?(0,fe.of)(At):Promise.resolve(At)))).subscribe(ee=>{if(!w.isActivated||!w.activatedComponentRef||w.activatedRoute!==O||null===O.component)return void this.unsubscribeFromRouteData(w);const Te=(0,T.HJs)(O.component);if(Te)for(const{templateName:At}of Te.inputs)w.activatedComponentRef.setInput(At,ee[At]);else this.unsubscribeFromRouteData(w)});this.outletDataSubscriptions.set(w,j)}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac})}return E})();function Mi(E,M,w){if(w&&E.shouldReuseRoute(M.value,w.value.snapshot)){const O=w.value;O._futureSnapshot=M.value;const j=function Eo(E,M,w){return M.children.map(O=>{for(const j of w.children)if(E.shouldReuseRoute(O.value,j.value.snapshot))return Mi(E,O,j);return Mi(E,O)})}(E,M,w);return new hi(O,j)}{if(E.shouldAttach(M.value)){const ee=E.retrieve(M.value);if(null!==ee){const Te=ee.route;return Te.value._futureSnapshot=M.value,Te.children=M.children.map(At=>Mi(E,At)),Te}}const O=function ao(E){return new si(new Le.t(E.url),new Le.t(E.params),new Le.t(E.queryParams),new Le.t(E.fragment),new Le.t(E.data),E.outlet,E.component,E)}(M.value),j=M.children.map(ee=>Mi(E,ee));return new hi(O,j)}}const $i="ngNavigationCancelingError";function ms(E,M){const{redirectTo:w,navigationBehaviorOptions:O}=vt(M)?{redirectTo:M,navigationBehaviorOptions:void 0}:M,j=Fs(!1,Ei.Redirect);return j.url=w,j.navigationBehaviorOptions=O,j}function Fs(E,M){const w=new Error(`NavigationCancelingError: ${E||""}`);return w[$i]=!0,w.cancellationCode=M,w}function Js(E){return!!E&&E[$i]}let Wi=(()=>{class E{static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275cmp=T.VBU({type:E,selectors:[["ng-component"]],standalone:!0,features:[T.aNF],decls:1,vars:0,template:function(O,j){1&O&&T.nrm(0,"router-outlet")},dependencies:[ts],encapsulation:2})}return E})();function co(E){const M=E.children&&E.children.map(co),w=M?{...E,children:M}:{...E};return!w.component&&!w.loadComponent&&(M||w.loadChildren)&&w.outlet&&w.outlet!==Rt&&(w.component=Wi),w}function ar(E){return E.outlet||Rt}function _s(E){if(!E)return null;if(E.routeConfig?._injector)return E.routeConfig._injector;for(let M=E.parent;M;M=M.parent){const w=M.routeConfig;if(w?._loadedInjector)return w._loadedInjector;if(w?._injector)return w._injector}return null}class H{constructor(M,w,O,j,ee){this.routeReuseStrategy=M,this.futureState=w,this.currState=O,this.forwardEvent=j,this.inputBindingEnabled=ee}activate(M){const w=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,O,M),es(this.futureState.root),this.activateChildRoutes(w,O,M)}deactivateChildRoutes(M,w,O){const j=Hr(w);M.children.forEach(ee=>{const Te=ee.value.outlet;this.deactivateRoutes(ee,j[Te],O),delete j[Te]}),Object.values(j).forEach(ee=>{this.deactivateRouteAndItsChildren(ee,O)})}deactivateRoutes(M,w,O){const j=M.value,ee=w?w.value:null;if(j===ee)if(j.component){const Te=O.getContext(j.outlet);Te&&this.deactivateChildRoutes(M,w,Te.children)}else this.deactivateChildRoutes(M,w,O);else ee&&this.deactivateRouteAndItsChildren(w,O)}deactivateRouteAndItsChildren(M,w){M.value.component&&this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,w):this.deactivateRouteAndOutlet(M,w)}detachAndStoreRouteSubtree(M,w){const O=w.getContext(M.value.outlet),j=O&&M.value.component?O.children:w,ee=Hr(M);for(const Te of Object.values(ee))this.deactivateRouteAndItsChildren(Te,j);if(O&&O.outlet){const Te=O.outlet.detach(),At=O.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:Te,route:M,contexts:At})}}deactivateRouteAndOutlet(M,w){const O=w.getContext(M.value.outlet),j=O&&M.value.component?O.children:w,ee=Hr(M);for(const Te of Object.values(ee))this.deactivateRouteAndItsChildren(Te,j);O&&(O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated()),O.attachRef=null,O.route=null)}activateChildRoutes(M,w,O){const j=Hr(w);M.children.forEach(ee=>{this.activateRoutes(ee,j[ee.value.outlet],O),this.forwardEvent(new da(ee.value.snapshot))}),M.children.length&&this.forwardEvent(new Lo(M.value.snapshot))}activateRoutes(M,w,O){const j=M.value,ee=w?w.value:null;if(es(j),j===ee)if(j.component){const Te=O.getOrCreateContext(j.outlet);this.activateChildRoutes(M,w,Te.children)}else this.activateChildRoutes(M,w,O);else if(j.component){const Te=O.getOrCreateContext(j.outlet);if(this.routeReuseStrategy.shouldAttach(j.snapshot)){const At=this.routeReuseStrategy.retrieve(j.snapshot);this.routeReuseStrategy.store(j.snapshot,null),Te.children.onOutletReAttached(At.contexts),Te.attachRef=At.componentRef,Te.route=At.route.value,Te.outlet&&Te.outlet.attach(At.componentRef,At.route.value),es(At.route.value),this.activateChildRoutes(M,null,Te.children)}else{const At=_s(j.snapshot);Te.attachRef=null,Te.route=j,Te.injector=At,Te.outlet&&Te.outlet.activateWith(j,Te.injector),this.activateChildRoutes(M,null,Te.children)}}else this.activateChildRoutes(M,null,O)}}class W{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class x{constructor(M,w){this.component=M,this.route=w}}function Z(E,M,w){const O=E._root;return Jn(O,M?M._root:null,w,[O.value])}function pn(E,M){const w=Symbol(),O=M.get(E,w);return O===w?"function"!=typeof E||(0,T.LfX)(E)?M.get(E):E:O}function Jn(E,M,w,O,j={canDeactivateChecks:[],canActivateChecks:[]}){const ee=Hr(M);return E.children.forEach(Te=>{(function ys(E,M,w,O,j={canDeactivateChecks:[],canActivateChecks:[]}){const ee=E.value,Te=M?M.value:null,At=w?w.getContext(E.value.outlet):null;if(Te&&ee.routeConfig===Te.routeConfig){const pt=function Zs(E,M,w){if("function"==typeof w)return w(E,M);switch(w){case"pathParamsChange":return!Rn(E.url,M.url);case"pathParamsOrQueryParamsChange":return!Rn(E.url,M.url)||!Yn(E.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zi(E,M)||!Yn(E.queryParams,M.queryParams);default:return!zi(E,M)}}(Te,ee,ee.routeConfig.runGuardsAndResolvers);pt?j.canActivateChecks.push(new W(O)):(ee.data=Te.data,ee._resolvedData=Te._resolvedData),Jn(E,M,ee.component?At?At.children:null:w,O,j),pt&&At&&At.outlet&&At.outlet.isActivated&&j.canDeactivateChecks.push(new x(At.outlet.component,Te))}else Te&&fi(M,At,j),j.canActivateChecks.push(new W(O)),Jn(E,null,ee.component?At?At.children:null:w,O,j)})(Te,ee[Te.value.outlet],w,O.concat([Te.value]),j),delete ee[Te.value.outlet]}),Object.entries(ee).forEach(([Te,At])=>fi(At,w.getContext(Te),j)),j}function fi(E,M,w){const O=Hr(E),j=E.value;Object.entries(O).forEach(([ee,Te])=>{fi(Te,j.component?M?M.children.getContext(ee):null:M,w)}),w.canDeactivateChecks.push(new x(j.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,j))}function Ts(E){return"function"==typeof E}function Va(E){return E instanceof $e.G||"EmptyError"===E?.name}const La=Symbol("INITIAL_VALUE");function eo(){return(0,Lt.n)(E=>ct(E.map(M=>M.pipe((0,at.s)(1),(0,tn.Z)(La)))).pipe((0,un.T)(M=>{for(const w of M)if(!0!==w){if(w===La)return La;if(!1===w||w instanceof Nr)return w}return!0}),(0,Pe.p)(M=>M!==La),(0,at.s)(1)))}function ni(E){return(0,oe.F)((0,It.M)(M=>{if(vt(M))throw ms(0,M)}),(0,un.T)(M=>!0===M))}class Oi{constructor(M){this.segmentGroup=M||null}}class ma extends Error{constructor(M){super(),this.urlTree=M}}function vs(E){return Ye(new Oi(E))}class Do{constructor(M,w){this.urlSerializer=M,this.urlTree=w}lineralizeSegments(M,w){let O=[],j=w.root;for(;;){if(O=O.concat(j.segments),0===j.numberOfChildren)return(0,fe.of)(O);if(j.numberOfChildren>1||!j.children[Rt])return Ye(new T.wOt(4e3,!1));j=j.children[Rt]}}applyRedirectCommands(M,w,O){const j=this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),M,O);if(w.startsWith("/"))throw new ma(j);return j}applyRedirectCreateUrlTree(M,w,O,j){const ee=this.createSegmentGroup(M,w.root,O,j);return new Nr(ee,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(M,w){const O={};return Object.entries(M).forEach(([j,ee])=>{if("string"==typeof ee&&ee.startsWith(":")){const At=ee.substring(1);O[j]=w[At]}else O[j]=ee}),O}createSegmentGroup(M,w,O,j){const ee=this.createSegments(M,w.segments,O,j);let Te={};return Object.entries(w.children).forEach(([At,pt])=>{Te[At]=this.createSegmentGroup(M,pt,O,j)}),new Zt(ee,Te)}createSegments(M,w,O,j){return w.map(ee=>ee.path.startsWith(":")?this.findPosParam(M,ee,j):this.findOrReturn(ee,O))}findPosParam(M,w,O){const j=O[w.path.substring(1)];if(!j)throw new T.wOt(4001,!1);return j}findOrReturn(M,w){let O=0;for(const j of w){if(j.path===M.path)return w.splice(O),j;O++}return M}}const Ao={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Y(E,M,w,O,j){const ee=C(E,M,w);return ee.matched?(O=function Vs(E,M){return E.providers&&!E._injector&&(E._injector=(0,T.Ol2)(E.providers,M,`Route: ${E.path}`)),E._injector??M}(M,O),function Ri(E,M,w,O){const j=M.canMatch;if(!j||0===j.length)return(0,fe.of)(!0);const ee=j.map(Te=>{const At=pn(Te,E);return kr(function pa(E){return E&&Ts(E.canMatch)}(At)?At.canMatch(M,w):(0,T.N4e)(E,()=>At(M,w)))});return(0,fe.of)(ee).pipe(eo(),ni())}(O,M,w).pipe((0,un.T)(Te=>!0===Te?ee:{...Ao}))):(0,fe.of)(ee)}function C(E,M,w){if("**"===M.path)return function D(E){return{matched:!0,parameters:E.length>0?bn(E).parameters:{},consumedSegments:E,remainingSegments:[],positionalParamSegments:{}}}(w);if(""===M.path)return"full"===M.pathMatch&&(E.hasChildren()||w.length>0)?{...Ao}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const j=(M.matcher||it)(w,E,M);if(!j)return{...Ao};const ee={};Object.entries(j.posParams??{}).forEach(([At,pt])=>{ee[At]=pt.path});const Te=j.consumed.length>0?{...ee,...j.consumed[j.consumed.length-1].parameters}:ee;return{matched:!0,consumedSegments:j.consumed,remainingSegments:w.slice(j.consumed.length),parameters:Te,positionalParamSegments:j.posParams??{}}}function L(E,M,w,O){return w.length>0&&function Se(E,M,w){return w.some(O=>Et(E,M,O)&&ar(O)!==Rt)}(E,w,O)?{segmentGroup:new Zt(M,he(O,new Zt(w,E.children))),slicedSegments:[]}:0===w.length&&function Fe(E,M,w){return w.some(O=>Et(E,M,O))}(E,w,O)?{segmentGroup:new Zt(E.segments,K(E,w,O,E.children)),slicedSegments:w}:{segmentGroup:new Zt(E.segments,E.children),slicedSegments:w}}function K(E,M,w,O){const j={};for(const ee of w)if(Et(E,M,ee)&&!O[ar(ee)]){const Te=new Zt([],{});j[ar(ee)]=Te}return{...O,...j}}function he(E,M){const w={};w[Rt]=M;for(const O of E)if(""===O.path&&ar(O)!==Rt){const j=new Zt([],{});w[ar(O)]=j}return w}function Et(E,M,w){return(!(E.hasChildren()||M.length>0)||"full"!==w.pathMatch)&&""===w.path}class hn{}class Fn{constructor(M,w,O,j,ee,Te,At){this.injector=M,this.configLoader=w,this.rootComponentType=O,this.config=j,this.urlTree=ee,this.paramsInheritanceStrategy=Te,this.urlSerializer=At,this.applyRedirects=new Do(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(M){return new T.wOt(4002,`'${M.segmentGroup}'`)}recognize(){const M=L(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(M).pipe((0,un.T)(w=>{const O=new xs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Rt,this.rootComponentType,null,{}),j=new hi(O,w),ee=new gs("",j),Te=function et(E,M,w=null,O=null){return cn(Vt(E),M,w,O)}(O,[],this.urlTree.queryParams,this.urlTree.fragment);return Te.queryParams=this.urlTree.queryParams,ee.url=this.urlSerializer.serialize(Te),this.inheritParamsAndData(ee._root,null),{state:ee,tree:Te}}))}match(M){return this.processSegmentGroup(this.injector,this.config,M,Rt).pipe((0,tt.W)(O=>{if(O instanceof ma)return this.urlTree=O.urlTree,this.match(O.urlTree.root);throw O instanceof Oi?this.noMatchError(O):O}))}inheritParamsAndData(M,w){const O=M.value,j=ps(O,w,this.paramsInheritanceStrategy);O.params=Object.freeze(j.params),O.data=Object.freeze(j.data),M.children.forEach(ee=>this.inheritParamsAndData(ee,O))}processSegmentGroup(M,w,O,j){return 0===O.segments.length&&O.hasChildren()?this.processChildren(M,w,O):this.processSegment(M,w,O,O.segments,j,!0).pipe((0,un.T)(ee=>ee instanceof hi?[ee]:[]))}processChildren(M,w,O){const j=[];for(const ee of Object.keys(O.children))"primary"===ee?j.unshift(ee):j.push(ee);return(0,be.H)(j).pipe((0,yt.H)(ee=>{const Te=O.children[ee],At=function ds(E,M){const w=E.filter(O=>ar(O)===M);return w.push(...E.filter(O=>ar(O)!==M)),w}(w,ee);return this.processSegmentGroup(M,At,Te,ee)}),(0,Kt.S)((ee,Te)=>(ee.push(...Te),ee)),(0,gn.U)(null),function Cn(E,M){const w=arguments.length>=2;return O=>O.pipe(E?(0,Pe.p)((j,ee)=>E(j,ee,O)):_e.D,rn(1),w?(0,gn.U)(M):(0,on.v)(()=>new $e.G))}(),(0,Qe.Z)(ee=>{if(null===ee)return vs(O);const Te=oi(ee);return function Hn(E){E.sort((M,w)=>M.value.outlet===Rt?-1:w.value.outlet===Rt?1:M.value.outlet.localeCompare(w.value.outlet))}(Te),(0,fe.of)(Te)}))}processSegment(M,w,O,j,ee,Te){return(0,be.H)(w).pipe((0,yt.H)(At=>this.processSegmentAgainstRoute(At._injector??M,w,At,O,j,ee,Te).pipe((0,tt.W)(pt=>{if(pt instanceof Oi)return(0,fe.of)(null);throw pt}))),(0,ft.$)(At=>!!At),(0,tt.W)(At=>{if(Va(At))return function mn(E,M,w){return 0===M.length&&!E.children[w]}(O,j,ee)?(0,fe.of)(new hn):vs(O);throw At}))}processSegmentAgainstRoute(M,w,O,j,ee,Te,At){return function wt(E,M,w,O){return!!(ar(E)===O||O!==Rt&&Et(M,w,E))&&C(M,E,w).matched}(O,j,ee,Te)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(M,j,O,ee,Te):this.allowRedirects&&At?this.expandSegmentAgainstRouteUsingRedirect(M,j,w,O,ee,Te):vs(j):vs(j)}expandSegmentAgainstRouteUsingRedirect(M,w,O,j,ee,Te){const{matched:At,consumedSegments:pt,positionalParamSegments:_n,remainingSegments:er}=C(w,j,ee);if(!At)return vs(w);j.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const dr=this.applyRedirects.applyRedirectCommands(pt,j.redirectTo,_n);return this.applyRedirects.lineralizeSegments(j,dr).pipe((0,Qe.Z)(Fi=>this.processSegment(M,O,w,Fi.concat(er),Te,!1)))}matchSegmentAgainstRoute(M,w,O,j,ee){const Te=Y(w,O,j,M);return"**"===O.path&&(w.children={}),Te.pipe((0,Lt.n)(At=>At.matched?this.getChildConfig(M=O._injector??M,O,j).pipe((0,Lt.n)(({routes:pt})=>{const _n=O._loadedInjector??M,{consumedSegments:er,remainingSegments:dr,parameters:Fi}=At,Ac=new xs(er,Fi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Es(E){return E.data||{}}(O),ar(O),O.component??O._loadedComponent??null,O,function ki(E){return E.resolve||{}}(O)),{segmentGroup:ra,slicedSegments:ho}=L(w,er,dr,pt);if(0===ho.length&&ra.hasChildren())return this.processChildren(_n,pt,ra).pipe((0,un.T)(Wo=>null===Wo?null:new hi(Ac,Wo)));if(0===pt.length&&0===ho.length)return(0,fe.of)(new hi(Ac,[]));const Bs=ar(O)===ee;return this.processSegment(_n,pt,ra,ho,Bs?Rt:ee,!0).pipe((0,un.T)(Wo=>new hi(Ac,Wo instanceof hi?[Wo]:[])))})):vs(w)))}getChildConfig(M,w,O){return w.children?(0,fe.of)({routes:w.children,injector:M}):w.loadChildren?void 0!==w._loadedRoutes?(0,fe.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function Gr(E,M,w,O){const j=M.canLoad;if(void 0===j||0===j.length)return(0,fe.of)(!0);const ee=j.map(Te=>{const At=pn(Te,E);return kr(function jo(E){return E&&Ts(E.canLoad)}(At)?At.canLoad(M,w):(0,T.N4e)(E,()=>At(M,w)))});return(0,fe.of)(ee).pipe(eo(),ni())}(M,w,O).pipe((0,Qe.Z)(j=>j?this.configLoader.loadChildren(M,w).pipe((0,It.M)(ee=>{w._loadedRoutes=ee.routes,w._loadedInjector=ee.injector})):function Tc(E){return Ye(Fs(!1,Ei.GuardRejected))}())):(0,fe.of)({routes:[],injector:M})}}function Tr(E){const M=E.value.routeConfig;return M&&""===M.path}function oi(E){const M=[],w=new Set;for(const O of E){if(!Tr(O)){M.push(O);continue}const j=M.find(ee=>O.value.routeConfig===ee.value.routeConfig);void 0!==j?(j.children.push(...O.children),w.add(j)):M.push(O)}for(const O of w){const j=oi(O.children);M.push(new hi(O.value,j))}return M.filter(O=>!w.has(O))}function as(E){const M=E.children.map(w=>as(w)).flat();return[E,...M]}function to(E){return(0,Lt.n)(M=>{const w=E(M);return w?(0,be.H)(w).pipe((0,un.T)(()=>M)):(0,fe.of)(M)})}let qi=(()=>{class E{buildTitle(w){let O,j=w.root;for(;void 0!==j;)O=this.getResolvedTitleForRoute(j)??O,j=j.children.find(ee=>ee.outlet===Rt);return O}getResolvedTitleForRoute(w){return w.data[_t]}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:()=>(0,T.WQX)(Os),providedIn:"root"})}return E})(),Os=(()=>{class E extends qi{constructor(w){super(),this.title=w}updateTitle(w){const O=this.buildTitle(w);void 0!==O&&this.title.setTitle(O)}static#e=this.\u0275fac=function(O){return new(O||E)(T.KVO(sr.hE))};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const P=new T.nKC("",{providedIn:"root",factory:()=>({})}),X=new T.nKC("");let N=(()=>{class E{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,T.WQX)(T.Ql9)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,fe.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const O=kr(w.loadComponent()).pipe((0,un.T)(nt),(0,It.M)(ee=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=ee}),(0,Ln.j)(()=>{this.componentLoaders.delete(w)})),j=new He(O,()=>new Jt.B).pipe(je());return this.componentLoaders.set(w,j),j}loadChildren(w,O){if(this.childrenLoaders.get(O))return this.childrenLoaders.get(O);if(O._loadedRoutes)return(0,fe.of)({routes:O._loadedRoutes,injector:O._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(O);const ee=function B(E,M,w,O){return kr(E.loadChildren()).pipe((0,un.T)(nt),(0,Qe.Z)(j=>j instanceof T.Co$||Array.isArray(j)?(0,fe.of)(j):(0,be.H)(M.compileModuleAsync(j))),(0,un.T)(j=>{O&&O(E);let ee,Te,At=!1;return Array.isArray(j)?(Te=j,!0):(ee=j.create(w).injector,Te=ee.get(X,[],{optional:!0,self:!0}).flat()),{routes:Te.map(co),injector:ee}}))}(O,this.compiler,w,this.onLoadEndListener).pipe((0,Ln.j)(()=>{this.childrenLoaders.delete(O)})),Te=new He(ee,()=>new Jt.B).pipe(je());return this.childrenLoaders.set(O,Te),Te}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function nt(E){return function de(E){return E&&"object"==typeof E&&"default"in E}(E)?E.default:E}let Ot=(()=>{class E{static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:()=>(0,T.WQX)(fn),providedIn:"root"})}return E})(),fn=(()=>{class E{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,O){return w}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const mr=new T.nKC(""),xn=new T.nKC("");function Gn(E,M,w){const O=E.get(xn),j=E.get(St.qQ);return E.get(T.SKi).runOutsideAngular(()=>{if(!j.startViewTransition||O.skipNextTransition)return O.skipNextTransition=!1,new Promise(_n=>setTimeout(_n));let ee;const Te=new Promise(_n=>{ee=_n}),At=j.startViewTransition(()=>(ee(),function fr(E){return new Promise(M=>{(0,T.mal)(M,{injector:E})})}(E))),{onViewTransitionCreated:pt}=O;return pt&&(0,T.N4e)(E,()=>pt({transition:At,from:M,to:w})),Te})}let ri=(()=>{class E{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Jt.B,this.transitionAbortSubject=new Jt.B,this.configLoader=(0,T.WQX)(N),this.environmentInjector=(0,T.WQX)(T.uvJ),this.urlSerializer=(0,T.WQX)(ke),this.rootContexts=(0,T.WQX)(fs),this.location=(0,T.WQX)(St.aZ),this.inputBindingEnabled=null!==(0,T.WQX)(ji,{optional:!0}),this.titleStrategy=(0,T.WQX)(qi),this.options=(0,T.WQX)(P,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,T.WQX)(Ot),this.createViewTransition=(0,T.WQX)(mr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,fe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=j=>this.events.next(new qs(j)),this.configLoader.onLoadStartListener=j=>this.events.next(new vo(j))}complete(){this.transitions?.complete()}handleNavigationRequest(w){const O=++this.navigationId;this.transitions?.next({...this.transitions.value,...w,id:O})}setupNavigations(w,O,j){return this.transitions=new Le.t({id:0,currentUrlTree:O,currentRawUrl:O,extractedUrl:this.urlHandlingStrategy.extract(O),urlAfterRedirects:this.urlHandlingStrategy.extract(O),rawUrl:O,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:li,restoredState:null,currentSnapshot:j.snapshot,targetSnapshot:null,currentRouterState:j,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Pe.p)(ee=>0!==ee.id),(0,un.T)(ee=>({...ee,extractedUrl:this.urlHandlingStrategy.extract(ee.rawUrl)})),(0,Lt.n)(ee=>{let Te=!1,At=!1;return(0,fe.of)(ee).pipe((0,Lt.n)(pt=>{if(this.navigationId>ee.id)return this.cancelNavigationTransition(ee,"",Ei.SupersededByNewNavigation),Je.w;this.currentTransition=ee,this.currentNavigation={id:pt.id,initialUrl:pt.rawUrl,extractedUrl:pt.extractedUrl,trigger:pt.source,extras:pt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const _n=!w.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!_n&&"reload"!==(pt.extras.onSameUrlNavigation??w.onSameUrlNavigation)){const dr="";return this.events.next(new Vo(pt.id,this.urlSerializer.serialize(pt.rawUrl),dr,On.IgnoredSameUrlNavigation)),pt.resolve(null),Je.w}if(this.urlHandlingStrategy.shouldProcessUrl(pt.rawUrl))return(0,fe.of)(pt).pipe((0,Lt.n)(dr=>{const Fi=this.transitions?.getValue();return this.events.next(new di(dr.id,this.urlSerializer.serialize(dr.extractedUrl),dr.source,dr.restoredState)),Fi!==this.transitions?.getValue()?Je.w:Promise.resolve(dr)}),function bo(E,M,w,O,j,ee){return(0,Qe.Z)(Te=>function hr(E,M,w,O,j,ee,Te="emptyOnly"){return new Fn(E,M,w,O,j,Te,ee).recognize()}(E,M,w,O,Te.extractedUrl,j,ee).pipe((0,un.T)(({state:At,tree:pt})=>({...Te,targetSnapshot:At,urlAfterRedirects:pt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,w.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,It.M)(dr=>{ee.targetSnapshot=dr.targetSnapshot,ee.urlAfterRedirects=dr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:dr.urlAfterRedirects};const Fi=new Ks(dr.id,this.urlSerializer.serialize(dr.extractedUrl),this.urlSerializer.serialize(dr.urlAfterRedirects),dr.targetSnapshot);this.events.next(Fi)}));if(_n&&this.urlHandlingStrategy.shouldProcessUrl(pt.currentRawUrl)){const{id:dr,extractedUrl:Fi,source:Ac,restoredState:ra,extras:ho}=pt,Bs=new di(dr,this.urlSerializer.serialize(Fi),Ac,ra);this.events.next(Bs);const Wo=os(this.rootComponentType).snapshot;return this.currentTransition=ee={...pt,targetSnapshot:Wo,urlAfterRedirects:Fi,extras:{...ho,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Fi,(0,fe.of)(ee)}{const dr="";return this.events.next(new Vo(pt.id,this.urlSerializer.serialize(pt.extractedUrl),dr,On.IgnoredByUrlHandlingStrategy)),pt.resolve(null),Je.w}}),(0,It.M)(pt=>{const _n=new Yo(pt.id,this.urlSerializer.serialize(pt.extractedUrl),this.urlSerializer.serialize(pt.urlAfterRedirects),pt.targetSnapshot);this.events.next(_n)}),(0,un.T)(pt=>(this.currentTransition=ee={...pt,guards:Z(pt.targetSnapshot,pt.currentSnapshot,this.rootContexts)},ee)),function Ua(E,M){return(0,Qe.Z)(w=>{const{targetSnapshot:O,currentSnapshot:j,guards:{canActivateChecks:ee,canDeactivateChecks:Te}}=w;return 0===Te.length&&0===ee.length?(0,fe.of)({...w,guardsResult:!0}):function ga(E,M,w,O){return(0,be.H)(E).pipe((0,Qe.Z)(j=>function lr(E,M,w,O,j){const ee=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!ee||0===ee.length)return(0,fe.of)(!0);const Te=ee.map(At=>{const pt=_s(M)??j,_n=pn(At,pt);return kr(function Da(E){return E&&Ts(E.canDeactivate)}(_n)?_n.canDeactivate(E,M,w,O):(0,T.N4e)(pt,()=>_n(E,M,w,O))).pipe((0,ft.$)())});return(0,fe.of)(Te).pipe(eo())}(j.component,j.route,w,M,O)),(0,ft.$)(j=>!0!==j,!0))}(Te,O,j,E).pipe((0,Qe.Z)(At=>At&&function Ta(E){return"boolean"==typeof E}(At)?function $o(E,M,w,O){return(0,be.H)(M).pipe((0,yt.H)(j=>(0,Pt.x)(function Aa(E,M){return null!==E&&M&&M(new wr(E)),(0,fe.of)(!0)}(j.route.parent,O),function wo(E,M){return null!==E&&M&&M(new Qs(E)),(0,fe.of)(!0)}(j.route,O),function To(E,M,w){const O=M[M.length-1],ee=M.slice(0,M.length-1).reverse().map(Te=>function De(E){const M=E.routeConfig?E.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:E,guards:M}:null}(Te)).filter(Te=>null!==Te).map(Te=>Ee(()=>{const At=Te.guards.map(pt=>{const _n=_s(Te.node)??w,er=pn(pt,_n);return kr(function Jr(E){return E&&Ts(E.canActivateChild)}(er)?er.canActivateChild(O,E):(0,T.N4e)(_n,()=>er(O,E))).pipe((0,ft.$)())});return(0,fe.of)(At).pipe(eo())}));return(0,fe.of)(ee).pipe(eo())}(E,j.path,w),function ea(E,M,w){const O=M.routeConfig?M.routeConfig.canActivate:null;if(!O||0===O.length)return(0,fe.of)(!0);const j=O.map(ee=>Ee(()=>{const Te=_s(M)??w,At=pn(ee,Te);return kr(function fa(E){return E&&Ts(E.canActivate)}(At)?At.canActivate(M,E):(0,T.N4e)(Te,()=>At(M,E))).pipe((0,ft.$)())}));return(0,fe.of)(j).pipe(eo())}(E,j.route,w))),(0,ft.$)(j=>!0!==j,!0))}(O,ee,E,M):(0,fe.of)(At)),(0,un.T)(At=>({...w,guardsResult:At})))})}(this.environmentInjector,pt=>this.events.next(pt)),(0,It.M)(pt=>{if(ee.guardsResult=pt.guardsResult,vt(pt.guardsResult))throw ms(0,pt.guardsResult);const _n=new la(pt.id,this.urlSerializer.serialize(pt.extractedUrl),this.urlSerializer.serialize(pt.urlAfterRedirects),pt.targetSnapshot,!!pt.guardsResult);this.events.next(_n)}),(0,Pe.p)(pt=>!!pt.guardsResult||(this.cancelNavigationTransition(pt,"",Ei.GuardRejected),!1)),to(pt=>{if(pt.guards.canActivateChecks.length)return(0,fe.of)(pt).pipe((0,It.M)(_n=>{const er=new yo(_n.id,this.urlSerializer.serialize(_n.extractedUrl),this.urlSerializer.serialize(_n.urlAfterRedirects),_n.targetSnapshot);this.events.next(er)}),(0,Lt.n)(_n=>{let er=!1;return(0,fe.of)(_n).pipe(function rs(E,M){return(0,Qe.Z)(w=>{const{targetSnapshot:O,guards:{canActivateChecks:j}}=w;if(!j.length)return(0,fe.of)(w);const ee=new Set(j.map(pt=>pt.route)),Te=new Set;for(const pt of ee)if(!Te.has(pt))for(const _n of as(pt))Te.add(_n);let At=0;return(0,be.H)(Te).pipe((0,yt.H)(pt=>ee.has(pt)?function cs(E,M,w,O){const j=E.routeConfig,ee=E._resolve;return void 0!==j?.title&&!Bi(j)&&(ee[_t]=j.title),function Ho(E,M,w,O){const j=tr(E);if(0===j.length)return(0,fe.of)({});const ee={};return(0,be.H)(j).pipe((0,Qe.Z)(Te=>function uo(E,M,w,O){const j=_s(M)??O,ee=pn(E,j);return kr(ee.resolve?ee.resolve(M,w):(0,T.N4e)(j,()=>ee(M,w)))}(E[Te],M,w,O).pipe((0,ft.$)(),(0,It.M)(At=>{ee[Te]=At}))),rn(1),function Dn(E){return(0,un.T)(()=>E)}(ee),(0,tt.W)(Te=>Va(Te)?Je.w:Ye(Te)))}(ee,E,M,O).pipe((0,un.T)(Te=>(E._resolvedData=Te,E.data=ps(E,E.parent,w).resolve,null)))}(pt,O,E,M):(pt.data=ps(pt,pt.parent,E).resolve,(0,fe.of)(void 0))),(0,It.M)(()=>At++),rn(1),(0,Qe.Z)(pt=>At===Te.size?(0,fe.of)(w):Je.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,It.M)({next:()=>er=!0,complete:()=>{er||this.cancelNavigationTransition(_n,"",Ei.NoDataFromResolver)}}))}),(0,It.M)(_n=>{const er=new rr(_n.id,this.urlSerializer.serialize(_n.extractedUrl),this.urlSerializer.serialize(_n.urlAfterRedirects),_n.targetSnapshot);this.events.next(er)}))}),to(pt=>{const _n=er=>{const dr=[];er.routeConfig?.loadComponent&&!er.routeConfig._loadedComponent&&dr.push(this.configLoader.loadComponent(er.routeConfig).pipe((0,It.M)(Fi=>{er.component=Fi}),(0,un.T)(()=>{})));for(const Fi of er.children)dr.push(..._n(Fi));return dr};return ct(_n(pt.targetSnapshot.root)).pipe((0,gn.U)(null),(0,at.s)(1))}),to(()=>this.afterPreactivation()),(0,Lt.n)(()=>{const{currentSnapshot:pt,targetSnapshot:_n}=ee,er=this.createViewTransition?.(this.environmentInjector,pt.root,_n.root);return er?(0,be.H)(er).pipe((0,un.T)(()=>ee)):(0,fe.of)(ee)}),(0,un.T)(pt=>{const _n=function ns(E,M,w){const O=Mi(E,M._root,w?w._root:void 0);return new ei(O,M)}(w.routeReuseStrategy,pt.targetSnapshot,pt.currentRouterState);return this.currentTransition=ee={...pt,targetRouterState:_n},this.currentNavigation.targetRouterState=_n,ee}),(0,It.M)(()=>{this.events.next(new Pr)}),((E,M,w,O)=>(0,un.T)(j=>(new H(M,j.targetRouterState,j.currentRouterState,w,O).activate(E),j)))(this.rootContexts,w.routeReuseStrategy,pt=>this.events.next(pt),this.inputBindingEnabled),(0,at.s)(1),(0,It.M)({next:pt=>{Te=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new vi(pt.id,this.urlSerializer.serialize(pt.extractedUrl),this.urlSerializer.serialize(pt.urlAfterRedirects))),this.titleStrategy?.updateTitle(pt.targetRouterState.snapshot),pt.resolve(!0)},complete:()=>{Te=!0}}),function In(E){return(0,ie.N)((M,w)=>{(0,ue.Tg)(E).subscribe((0,ht._)(w,()=>w.complete(),ot.l)),!w.closed&&M.subscribe(w)})}(this.transitionAbortSubject.pipe((0,It.M)(pt=>{throw pt}))),(0,Ln.j)(()=>{!Te&&!At&&this.cancelNavigationTransition(ee,"",Ei.SupersededByNewNavigation),this.currentTransition?.id===ee.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,tt.W)(pt=>{if(At=!0,Js(pt))this.events.next(new ur(ee.id,this.urlSerializer.serialize(ee.extractedUrl),pt.message,pt.cancellationCode)),function Jo(E){return Js(E)&&vt(E.url)}(pt)?this.events.next(new Ui(pt.url)):ee.resolve(!1);else{this.events.next(new Gi(ee.id,this.urlSerializer.serialize(ee.extractedUrl),pt,ee.targetSnapshot??void 0));try{ee.resolve(w.errorHandler(pt))}catch(_n){this.options.resolveNavigationPromiseOnError?ee.resolve(!1):ee.reject(_n)}}return Je.w}))}))}cancelNavigationTransition(w,O,j){const ee=new ur(w.id,this.urlSerializer.serialize(w.extractedUrl),O,j);this.events.next(ee),w.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function ir(E){return E!==li}let Vr=(()=>{class E{static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:()=>(0,T.WQX)(Yt),providedIn:"root"})}return E})();class pr{shouldDetach(M){return!1}store(M,w){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,w){return M.routeConfig===w.routeConfig}}let Yt=(()=>{class E extends pr{static#e=this.\u0275fac=(()=>{let w;return function(j){return(w||(w=T.xGo(E)))(j||E)}})();static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),vn=(()=>{class E{static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:()=>(0,T.WQX)(_r),providedIn:"root"})}return E})(),_r=(()=>{class E extends vn{constructor(){super(...arguments),this.location=(0,T.WQX)(St.aZ),this.urlSerializer=(0,T.WQX)(ke),this.options=(0,T.WQX)(P,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,T.WQX)(Ot),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Nr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=os(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(w){return this.location.subscribe(O=>{"popstate"===O.type&&w(O.url,O.state)})}handleRouterEvent(w,O){if(w instanceof di)this.stateMemento=this.createStateMemento();else if(w instanceof Vo)this.rawUrlTree=O.initialUrl;else if(w instanceof Ks){if("eager"===this.urlUpdateStrategy&&!O.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(O.finalUrl,O.initialUrl);this.setBrowserUrl(j,O)}}else w instanceof Pr?(this.currentUrlTree=O.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(O.finalUrl,O.initialUrl),this.routerState=O.targetRouterState,"deferred"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,O))):w instanceof ur&&(w.code===Ei.GuardRejected||w.code===Ei.NoDataFromResolver)?this.restoreHistory(O):w instanceof Gi?this.restoreHistory(O,!0):w instanceof vi&&(this.lastSuccessfulId=w.id,this.currentPageId=this.browserPageId)}setBrowserUrl(w,O){const j=this.urlSerializer.serialize(w);if(this.location.isCurrentPathEqualTo(j)||O.extras.replaceUrl){const Te={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId)};this.location.replaceState(j,"",Te)}else{const ee={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId+1)};this.location.go(j,"",ee)}}restoreHistory(w,O=!1){if("computed"===this.canceledNavigationResolution){const ee=this.currentPageId-this.browserPageId;0!==ee?this.location.historyGo(ee):this.currentUrlTree===w.finalUrl&&0===ee&&(this.resetState(w),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,O){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:O}:{navigationId:w}}static#e=this.\u0275fac=(()=>{let w;return function(j){return(w||(w=T.xGo(E)))(j||E)}})();static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();var Ti=function(E){return E[E.COMPLETE=0]="COMPLETE",E[E.FAILED=1]="FAILED",E[E.REDIRECTING=2]="REDIRECTING",E}(Ti||{});function pi(E,M){E.events.pipe((0,Pe.p)(w=>w instanceof vi||w instanceof ur||w instanceof Gi||w instanceof Vo),(0,un.T)(w=>w instanceof vi||w instanceof Vo?Ti.COMPLETE:w instanceof ur&&(w.code===Ei.Redirect||w.code===Ei.SupersededByNewNavigation)?Ti.REDIRECTING:Ti.FAILED),(0,Pe.p)(w=>w!==Ti.REDIRECTING),(0,at.s)(1)).subscribe(()=>{M()})}function is(E){throw E}const Us={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zr=(()=>{class E{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,T.WQX)(T.H3F),this.stateManager=(0,T.WQX)(vn),this.options=(0,T.WQX)(P,{optional:!0})||{},this.pendingTasks=(0,T.WQX)(T.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,T.WQX)(ri),this.urlSerializer=(0,T.WQX)(ke),this.location=(0,T.WQX)(St.aZ),this.urlHandlingStrategy=(0,T.WQX)(Ot),this._events=new Jt.B,this.errorHandler=this.options.errorHandler||is,this.navigated=!1,this.routeReuseStrategy=(0,T.WQX)(Vr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,T.WQX)(X,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,T.WQX)(ji,{optional:!0}),this.eventsSubscription=new Mt.yU,this.isNgZoneEnabled=(0,T.WQX)(T.SKi)instanceof T.SKi&&T.SKi.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:w=>{this.console.warn(w)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const w=this.navigationTransitions.events.subscribe(O=>{try{const j=this.navigationTransitions.currentTransition,ee=this.navigationTransitions.currentNavigation;if(null!==j&&null!==ee)if(this.stateManager.handleRouterEvent(O,ee),O instanceof ur&&O.code!==Ei.Redirect&&O.code!==Ei.SupersededByNewNavigation)this.navigated=!0;else if(O instanceof vi)this.navigated=!0;else if(O instanceof Ui){const Te=this.urlHandlingStrategy.merge(O.url,j.currentRawUrl),At={info:j.extras.info,skipLocationChange:j.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ir(j.source)};this.scheduleNavigation(Te,li,null,At,{resolve:j.resolve,reject:j.reject,promise:j.promise})}(function Zn(E){return!(E instanceof Pr||E instanceof Ui)})(O)&&this._events.next(O)}catch(j){this.navigationTransitions.transitionAbortSubject.next(j)}});this.eventsSubscription.add(w)}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),li,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((w,O)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(w,"popstate",O)},0)})}navigateToSyncWithBrowser(w,O,j){const ee={replaceUrl:!0},Te=j?.navigationId?j:null;if(j){const pt={...j};delete pt.navigationId,delete pt.\u0275routerPageId,0!==Object.keys(pt).length&&(ee.state=pt)}const At=this.parseUrl(w);this.scheduleNavigation(At,O,Te,ee)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(w){this.config=w.map(co),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(w,O={}){const{relativeTo:j,queryParams:ee,fragment:Te,queryParamsHandling:At,preserveFragment:pt}=O,_n=pt?this.currentUrlTree.fragment:Te;let dr,er=null;switch(At){case"merge":er={...this.currentUrlTree.queryParams,...ee};break;case"preserve":er=this.currentUrlTree.queryParams;break;default:er=ee||null}null!==er&&(er=this.removeEmptyProps(er));try{dr=Vt(j?j.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof w[0]||!w[0].startsWith("/"))&&(w=[]),dr=this.currentUrlTree.root}return cn(dr,w,er,_n??null)}navigateByUrl(w,O={skipLocationChange:!1}){const j=vt(w)?w:this.parseUrl(w),ee=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(ee,li,null,O)}navigate(w,O={skipLocationChange:!1}){return function lo(E){for(let M=0;M<E.length;M++)if(null==E[M])throw new T.wOt(4008,!1)}(w),this.navigateByUrl(this.createUrlTree(w,O),O)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){try{return this.urlSerializer.parse(w)}catch{return this.urlSerializer.parse("/")}}isActive(w,O){let j;if(j=!0===O?{...Us}:!1===O?{...gi}:O,vt(w))return Vi(this.currentUrlTree,w,j);const ee=this.parseUrl(w);return Vi(this.currentUrlTree,ee,j)}removeEmptyProps(w){return Object.entries(w).reduce((O,[j,ee])=>(null!=ee&&(O[j]=ee),O),{})}scheduleNavigation(w,O,j,ee,Te){if(this.disposed)return Promise.resolve(!1);let At,pt,_n;Te?(At=Te.resolve,pt=Te.reject,_n=Te.promise):_n=new Promise((dr,Fi)=>{At=dr,pt=Fi});const er=this.pendingTasks.add();return pi(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(er))}),this.navigationTransitions.handleNavigationRequest({source:O,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:ee,resolve:At,reject:pt,promise:_n,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_n.catch(dr=>Promise.reject(dr))}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),Go=(()=>{class E{constructor(w,O,j,ee,Te,At){this.router=w,this.route=O,this.tabIndexAttribute=j,this.renderer=ee,this.el=Te,this.locationStrategy=At,this.href=null,this.commands=null,this.onChanges=new Jt.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const pt=Te.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===pt||"area"===pt,this.isAnchorElement?this.subscription=w.events.subscribe(_n=>{_n instanceof vi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,O,j,ee,Te){const At=this.urlTree;return!!(null===At||this.isAnchorElement&&(0!==w||O||j||ee||Te||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(At,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const w=this.urlTree;this.href=null!==w&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(w)):null;const O=null===this.href?null:(0,T.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",O)}applyAttributeValue(w,O){const j=this.renderer,ee=this.el.nativeElement;null!==O?j.setAttribute(ee,w,O):j.removeAttribute(ee,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(O){return new(O||E)(T.rXU(zr),T.rXU(si),T.kS0("tabindex"),T.rXU(T.sFG),T.rXU(T.aKT),T.rXU(St.hb))};static#t=this.\u0275dir=T.FsC({type:E,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(O,j){1&O&&T.bIt("click",function(Te){return j.onClick(Te.button,Te.ctrlKey,Te.shiftKey,Te.altKey,Te.metaKey)}),2&O&&T.BMQ("target",j.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[T.Mj6.HasDecoratorInputTransform,"preserveFragment","preserveFragment",T.L39],skipLocationChange:[T.Mj6.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",T.L39],replaceUrl:[T.Mj6.HasDecoratorInputTransform,"replaceUrl","replaceUrl",T.L39],routerLink:"routerLink"},standalone:!0,features:[T.GFd,T.OA$]})}return E})();class jn{}let zo=(()=>{class E{constructor(w,O,j,ee,Te){this.router=w,this.injector=j,this.preloadingStrategy=ee,this.loader=Te}setUpPreloading(){this.subscription=this.router.events.pipe((0,Pe.p)(w=>w instanceof vi),(0,yt.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,O){const j=[];for(const ee of O){ee.providers&&!ee._injector&&(ee._injector=(0,T.Ol2)(ee.providers,w,`Route: ${ee.path}`));const Te=ee._injector??w,At=ee._loadedInjector??Te;(ee.loadChildren&&!ee._loadedRoutes&&void 0===ee.canLoad||ee.loadComponent&&!ee._loadedComponent)&&j.push(this.preloadConfig(Te,ee)),(ee.children||ee._loadedRoutes)&&j.push(this.processRoutes(At,ee.children??ee._loadedRoutes))}return(0,be.H)(j).pipe((0,Kn.U)())}preloadConfig(w,O){return this.preloadingStrategy.preload(O,()=>{let j;j=O.loadChildren&&void 0===O.canLoad?this.loader.loadChildren(w,O):(0,fe.of)(null);const ee=j.pipe((0,Qe.Z)(Te=>null===Te?(0,fe.of)(void 0):(O._loadedRoutes=Te.routes,O._loadedInjector=Te.injector,this.processRoutes(Te.injector??w,Te.routes))));if(O.loadComponent&&!O._loadedComponent){const Te=this.loader.loadComponent(O);return(0,be.H)([ee,Te]).pipe((0,Kn.U)())}return ee})}static#e=this.\u0275fac=function(O){return new(O||E)(T.KVO(zr),T.KVO(T.Ql9),T.KVO(T.uvJ),T.KVO(jn),T.KVO(N))};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const _a=new T.nKC("");let Il=(()=>{class E{constructor(w,O,j,ee,Te={}){this.urlSerializer=w,this.transitions=O,this.viewportScroller=j,this.zone=ee,this.options=Te,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,T.WQX)(T.uvJ),Te.scrollPositionRestoration||="disabled",Te.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof di?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof vi?(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment)):w instanceof Vo&&w.code===On.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Rs&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,O){var j=this;this.zone.runOutsideAngular((0,_.A)(function*(){yield new Promise(ee=>{setTimeout(()=>{ee()}),(0,T.mal)(()=>{ee()},{injector:j.environmentInjector})}),j.zone.run(()=>{j.transitions.events.next(new Rs(w,"popstate"===j.lastSource?j.store[j.restoredId]:null,O))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(O){T.QTQ()};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac})}return E})();function Is(E,M){return{\u0275kind:E,\u0275providers:M}}function ba(){const E=(0,T.WQX)(T.zZn);return M=>{const w=E.get(T.o8S);if(M!==w.components[0])return;const O=E.get(zr),j=E.get(Sa);1===E.get(Di)&&O.initialNavigation(),E.get(Kc,null,T.$GK.Optional)?.setUpPreloading(),E.get(_a,null,T.$GK.Optional)?.init(),O.resetRootComponentType(w.componentTypes[0]),j.closed||(j.next(),j.complete(),j.unsubscribe())}}const Sa=new T.nKC("",{factory:()=>new Jt.B}),Di=new T.nKC("",{providedIn:"root",factory:()=>1}),Kc=new T.nKC("");function na(E){return Is(0,[{provide:Kc,useExisting:zo},{provide:jn,useExisting:E}])}function Qc(E){return Is(9,[{provide:mr,useValue:Gn},{provide:xn,useValue:{skipNextTransition:!!E?.skipInitialTransition,...E}}])}const Ni=new T.nKC("ROUTER_FORROOT_GUARD"),Mu=[St.aZ,{provide:ke,useClass:we},zr,fs,{provide:si,useFactory:function nc(E){return E.routerState.root},deps:[zr]},N,[]];let ja=(()=>{class E{constructor(w){}static forRoot(w,O){return{ngModule:E,providers:[Mu,[],{provide:X,multi:!0,useValue:w},{provide:Ni,useFactory:Yh,deps:[[zr,new T.Xx1,new T.kdw]]},{provide:P,useValue:O||{}},O?.useHash?{provide:St.hb,useClass:St.fw}:{provide:St.hb,useClass:St.Sm},{provide:_a,useFactory:()=>{const E=(0,T.WQX)(St.Xr),M=(0,T.WQX)(T.SKi),w=(0,T.WQX)(P),O=(0,T.WQX)(ri),j=(0,T.WQX)(ke);return w.scrollOffset&&E.setOffset(w.scrollOffset),new Il(j,O,E,M,w)}},O?.preloadingStrategy?na(O.preloadingStrategy).\u0275providers:[],O?.initialNavigation?wl(O):[],O?.bindToComponentInputs?Is(8,[Bo,{provide:ji,useExisting:Bo}]).\u0275providers:[],O?.enableViewTransitions?Qc().\u0275providers:[],[{provide:Ru,useFactory:ba},{provide:T.iLQ,multi:!0,useExisting:Ru}]]}}static forChild(w){return{ngModule:E,providers:[{provide:X,multi:!0,useValue:w}]}}static#e=this.\u0275fac=function(O){return new(O||E)(T.KVO(Ni,8))};static#t=this.\u0275mod=T.$C({type:E});static#n=this.\u0275inj=T.G2t({})}return E})();function Yh(E){return"guarded"}function wl(E){return["disabled"===E.initialNavigation?Is(3,[{provide:T.hnV,multi:!0,useFactory:()=>{const M=(0,T.WQX)(zr);return()=>{M.setUpLocationChangeListener()}}},{provide:Di,useValue:2}]).\u0275providers:[],"enabledBlocking"===E.initialNavigation?Is(2,[{provide:Di,useValue:0},{provide:T.hnV,multi:!0,deps:[T.zZn],useFactory:M=>{const w=M.get(St.hj,Promise.resolve());return()=>w.then(()=>new Promise(O=>{const j=M.get(zr),ee=M.get(Sa);pi(j,()=>{O(!0)}),M.get(ri).afterPreactivation=()=>(O(!0),ee.closed?(0,fe.of)(void 0):ee),j.initialNavigation()}))}}]).\u0275providers:[]]}const Ru=new T.nKC("")},3345:(sn,Ke,k)=>{k.d(Ke,{A:()=>Me});var _=k(1076),T=k(1362),R=k(7852),y=k(8041);class te{constructor(Ue,We){this._delegate=Ue,this.firebase=We,(0,R._addComponent)(Ue,new T.uA("app-compat",()=>this,"PUBLIC")),this.container=Ue.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ue){this._delegate.automaticDataCollectionEnabled=Ue}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ue=>{this._delegate.checkDestroyed(),Ue()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(Ue,We=R._DEFAULT_ENTRY_NAME){var $e;this._delegate.checkDestroyed();const Pt=this._delegate.container.getProvider(Ue);return!Pt.isInitialized()&&"EXPLICIT"===(null===($e=Pt.getComponent())||void 0===$e?void 0:$e.instantiationMode)&&Pt.initialize(),Pt.getImmediate({identifier:We})}_removeServiceInstance(Ue,We=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ue).clearInstance(We)}_addComponent(Ue){(0,R._addComponent)(this._delegate,Ue)}_addOrOverwriteComponent(Ue){(0,R._addOrOverwriteComponent)(this._delegate,Ue)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new _.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),_e=function Re(){const ct=function Le(ct){const Ue={},We={__esModule:!0,initializeApp:function ue(Je,Mt={}){const ie=R.initializeApp(Je,Mt);if((0,_.gR)(Ue,ie.name))return Ue[ie.name];const je=new ct(ie,We);return Ue[ie.name]=je,je},app:Pt,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function oe(Je){const Mt=Je.name,ie=Mt.replace("-compat","");if(R._registerComponent(Je)&&"PUBLIC"===Je.type){const je=(He=Pt())=>{if("function"!=typeof He[ie])throw fe.create("invalid-app-argument",{appName:Mt});return He[ie]()};void 0!==Je.serviceProps&&(0,_.zw)(je,Je.serviceProps),We[ie]=je,ct.prototype[ie]=function(...He){return this._getService.bind(this,Mt).apply(this,Je.multipleInstances?He:[])}}return"PUBLIC"===Je.type?We[ie]:null},removeApp:function $e(Je){delete Ue[Je]},useAsService:function Ye(Je,Mt){return"serverAuth"===Mt?null:Mt},modularAPIs:R}};function Pt(Je){if(!(0,_.gR)(Ue,Je=Je||R._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Je});return Ue[Je]}return We.default=We,Object.defineProperty(We,"apps",{get:function Ee(){return Object.keys(Ue).map(Je=>Ue[Je])}}),Pt.App=ct,We}(te);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:Re,extendNamespace:function Ue(We){(0,_.zw)(ct,We)},createSubscribe:_.tD,ErrorFactory:_.FA,deepExtend:_.zw}),ct}(),ve=new y.Vy("@firebase/app-compat");try{const ct=(0,_.mS)();if(void 0!==ct.firebase){ve.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const Ue=ct.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&ve.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Me=_e;!function ht(ct){(0,R.registerVersion)("@firebase/app-compat","0.2.40",ct)}()},7852:(sn,Ke,k)=>{k.r(Ke),k.d(Ke,{FirebaseError:()=>y.g,SDK_VERSION:()=>Rn,_DEFAULT_ENTRY_NAME:()=>tr,_addComponent:()=>jr,_addOrOverwriteComponent:()=>Vi,_apps:()=>bn,_clearComponents:()=>Un,_components:()=>Wr,_getProvider:()=>hs,_isFirebaseApp:()=>Li,_isFirebaseServerApp:()=>zt,_registerComponent:()=>Or,_removeServiceInstance:()=>Nn,_serverApps:()=>kr,deleteApp:()=>Xe,getApp:()=>we,getApps:()=>Ce,initializeApp:()=>xr,initializeServerApp:()=>ke,onLog:()=>q,registerVersion:()=>ge,setLogLevel:()=>J});var _=k(467),T=k(1362),R=k(8041),y=k(1076);const te=(vt,et)=>et.some(Vt=>vt instanceof Vt);let be,fe;const _e=new WeakMap,ve=new WeakMap,ze=new WeakMap,Ct=new WeakMap,ht=new WeakMap;let Ue={get(vt,et,Vt){if(vt instanceof IDBTransaction){if("done"===et)return ve.get(vt);if("objectStoreNames"===et)return vt.objectStoreNames||ze.get(vt);if("store"===et)return Vt.objectStoreNames[1]?void 0:Vt.objectStore(Vt.objectStoreNames[0])}return ue(vt[et])},set:(vt,et,Vt)=>(vt[et]=Vt,!0),has:(vt,et)=>vt instanceof IDBTransaction&&("done"===et||"store"===et)||et in vt};function Pt(vt){return"function"==typeof vt?function $e(vt){return vt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Re(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(vt)?function(...et){return vt.apply(Ee(this),et),ue(_e.get(this))}:function(...et){return ue(vt.apply(Ee(this),et))}:function(et,...Vt){const cn=vt.call(Ee(this),et,...Vt);return ze.set(cn,et.sort?et.sort():[et]),ue(cn)}}(vt):(vt instanceof IDBTransaction&&function ct(vt){if(ve.has(vt))return;const et=new Promise((Vt,cn)=>{const ne=()=>{vt.removeEventListener("complete",ye),vt.removeEventListener("error",Ie),vt.removeEventListener("abort",Ie)},ye=()=>{Vt(),ne()},Ie=()=>{cn(vt.error||new DOMException("AbortError","AbortError")),ne()};vt.addEventListener("complete",ye),vt.addEventListener("error",Ie),vt.addEventListener("abort",Ie)});ve.set(vt,et)}(vt),te(vt,function Le(){return be||(be=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(vt,Ue):vt)}function ue(vt){if(vt instanceof IDBRequest)return function Me(vt){const et=new Promise((Vt,cn)=>{const ne=()=>{vt.removeEventListener("success",ye),vt.removeEventListener("error",Ie)},ye=()=>{Vt(ue(vt.result)),ne()},Ie=()=>{cn(vt.error),ne()};vt.addEventListener("success",ye),vt.addEventListener("error",Ie)});return et.then(Vt=>{Vt instanceof IDBCursor&&_e.set(Vt,vt)}).catch(()=>{}),ht.set(et,vt),et}(vt);if(Ct.has(vt))return Ct.get(vt);const et=Pt(vt);return et!==vt&&(Ct.set(vt,et),ht.set(et,vt)),et}const Ee=vt=>ht.get(vt),Je=["get","getKey","getAll","getAllKeys","count"],Mt=["put","add","delete","clear"],ie=new Map;function je(vt,et){if(!(vt instanceof IDBDatabase)||et in vt||"string"!=typeof et)return;if(ie.get(et))return ie.get(et);const Vt=et.replace(/FromIndex$/,""),cn=et!==Vt,ne=Mt.includes(Vt);if(!(Vt in(cn?IDBIndex:IDBObjectStore).prototype)||!ne&&!Je.includes(Vt))return;const ye=function(){var Ie=(0,_.A)(function*(dt,...Ze){const Xt=this.transaction(dt,ne?"readwrite":"readonly");let $t=Xt.store;return cn&&($t=$t.index(Ze.shift())),(yield Promise.all([$t[Vt](...Ze),ne&&Xt.done]))[0]});return function(Ze){return Ie.apply(this,arguments)}}();return ie.set(et,ye),ye}!function We(vt){Ue=vt(Ue)}(vt=>({...vt,get:(et,Vt,cn)=>je(et,Vt)||vt.get(et,Vt,cn),has:(et,Vt)=>!!je(et,Vt)||vt.has(et,Vt)}));class He{constructor(et){this.container=et}getPlatformInfoString(){return this.container.getProviders().map(Vt=>{if(function Jt(vt){const et=vt.getComponent();return"VERSION"===et?.type}(Vt)){const cn=Vt.getImmediate();return`${cn.library}/${cn.version}`}return null}).filter(Vt=>Vt).join(" ")}}const St="@firebase/app",un="0.10.10",Lt=new R.Vy("@firebase/app"),tr="[DEFAULT]",An={[St]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},bn=new Map,kr=new Map,Wr=new Map;function jr(vt,et){try{vt.container.addComponent(et)}catch(Vt){Lt.debug(`Component ${et.name} failed to register with FirebaseApp ${vt.name}`,Vt)}}function Vi(vt,et){vt.container.addOrOverwriteComponent(et)}function Or(vt){const et=vt.name;if(Wr.has(et))return Lt.debug(`There were multiple attempts to register component ${et}.`),!1;Wr.set(et,vt);for(const Vt of bn.values())jr(Vt,vt);for(const Vt of kr.values())jr(Vt,vt);return!0}function hs(vt,et){const Vt=vt.container.getProvider("heartbeat").getImmediate({optional:!0});return Vt&&Vt.triggerHeartbeat(),vt.container.getProvider(et)}function Nn(vt,et,Vt=tr){hs(vt,et).clearInstance(Vt)}function Li(vt){return void 0!==vt.options}function zt(vt){return void 0!==vt.settings}function Un(){Wr.clear()}const Zt=new y.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class en{constructor(et,Vt,cn){this._isDeleted=!1,this._options=Object.assign({},et),this._config=Object.assign({},Vt),this._name=Vt.name,this._automaticDataCollectionEnabled=Vt.automaticDataCollectionEnabled,this._container=cn,this.container.addComponent(new T.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this.checkDestroyed(),this._automaticDataCollectionEnabled=et}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(et){this._isDeleted=et}checkDestroyed(){if(this.isDeleted)throw Zt.create("app-deleted",{appName:this._name})}}class Kr extends en{constructor(et,Vt,cn,ne){const ye=void 0!==Vt.automaticDataCollectionEnabled&&Vt.automaticDataCollectionEnabled,Ie={name:cn,automaticDataCollectionEnabled:ye};super(void 0!==et.apiKey?et:et.options,Ie,ne),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ye},Vt),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Vt.releaseOnDeref=void 0,ge(St,un,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(et){this.isDeleted||(this._refCount++,void 0!==et&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(et,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Xe(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Zt.create("server-app-deleted")}}const Rn="10.13.1";function xr(vt,et={}){let Vt=vt;"object"!=typeof et&&(et={name:et});const cn=Object.assign({name:tr,automaticDataCollectionEnabled:!1},et),ne=cn.name;if("string"!=typeof ne||!ne)throw Zt.create("bad-app-name",{appName:String(ne)});if(Vt||(Vt=(0,y.T9)()),!Vt)throw Zt.create("no-options");const ye=bn.get(ne);if(ye){if((0,y.bD)(Vt,ye.options)&&(0,y.bD)(cn,ye.config))return ye;throw Zt.create("duplicate-app",{appName:ne})}const Ie=new T.h1(ne);for(const Ze of Wr.values())Ie.addComponent(Ze);const dt=new en(Vt,cn,Ie);return bn.set(ne,dt),dt}function ke(vt,et){if((0,y.Bd)()&&!(0,y.p7)())throw Zt.create("invalid-server-app-environment");let Vt;void 0===et.automaticDataCollectionEnabled&&(et.automaticDataCollectionEnabled=!1),Vt=Li(vt)?vt.options:vt;const cn=Object.assign(Object.assign({},et),Vt);if(void 0!==cn.releaseOnDeref&&delete cn.releaseOnDeref,void 0!==et.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Zt.create("finalization-registry-not-supported",{});const ye=""+(Xt=JSON.stringify(cn),[...Xt].reduce(($t,Mn)=>Math.imul(31,$t)+Mn.charCodeAt(0)|0,0)),Ie=kr.get(ye);var Xt;if(Ie)return Ie.incRefCount(et.releaseOnDeref),Ie;const dt=new T.h1(ye);for(const Xt of Wr.values())dt.addComponent(Xt);const Ze=new Kr(Vt,et,ye,dt);return kr.set(ye,Ze),Ze}function we(vt=tr){const et=bn.get(vt);if(!et&&vt===tr&&(0,y.T9)())return xr();if(!et)throw Zt.create("no-app",{appName:vt});return et}function Ce(){return Array.from(bn.values())}function Xe(vt){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,_.A)(function*(vt){let et=!1;const Vt=vt.name;bn.has(Vt)?(et=!0,bn.delete(Vt)):kr.has(Vt)&&vt.decRefCount()<=0&&(kr.delete(Vt),et=!0),et&&(yield Promise.all(vt.container.getProviders().map(cn=>cn.delete())),vt.isDeleted=!0)})).apply(this,arguments)}function ge(vt,et,Vt){var cn;let ne=null!==(cn=An[vt])&&void 0!==cn?cn:vt;Vt&&(ne+=`-${Vt}`);const ye=ne.match(/\s|\//),Ie=et.match(/\s|\//);if(ye||Ie){const dt=[`Unable to register library "${ne}" with version "${et}":`];return ye&&dt.push(`library name "${ne}" contains illegal characters (whitespace or "/")`),ye&&Ie&&dt.push("and"),Ie&&dt.push(`version name "${et}" contains illegal characters (whitespace or "/")`),void Lt.warn(dt.join(" "))}Or(new T.uA(`${ne}-version`,()=>({library:ne,version:et}),"VERSION"))}function q(vt,et){if(null!==vt&&"function"!=typeof vt)throw Zt.create("invalid-log-argument");(0,R.Ey)(vt,et)}function J(vt){(0,R.He)(vt)}const se="firebase-heartbeat-database",me=1,Dt="firebase-heartbeat-store";let Bt=null;function En(){return Bt||(Bt=function oe(vt,et,{blocked:Vt,upgrade:cn,blocking:ne,terminated:ye}={}){const Ie=indexedDB.open(vt,et),dt=ue(Ie);return cn&&Ie.addEventListener("upgradeneeded",Ze=>{cn(ue(Ie.result),Ze.oldVersion,Ze.newVersion,ue(Ie.transaction),Ze)}),Vt&&Ie.addEventListener("blocked",Ze=>Vt(Ze.oldVersion,Ze.newVersion,Ze)),dt.then(Ze=>{ye&&Ze.addEventListener("close",()=>ye()),ne&&Ze.addEventListener("versionchange",Xt=>ne(Xt.oldVersion,Xt.newVersion,Xt))}).catch(()=>{}),dt}(se,me,{upgrade:(vt,et)=>{if(0===et)try{vt.createObjectStore(Dt)}catch(Vt){console.warn(Vt)}}}).catch(vt=>{throw Zt.create("idb-open",{originalErrorMessage:vt.message})})),Bt}function qn(){return(qn=(0,_.A)(function*(vt){try{const Vt=(yield En()).transaction(Dt),cn=yield Vt.objectStore(Dt).get(Ne(vt));return yield Vt.done,cn}catch(et){if(et instanceof y.g)Lt.warn(et.message);else{const Vt=Zt.create("idb-get",{originalErrorMessage:et?.message});Lt.warn(Vt.message)}}})).apply(this,arguments)}function Sn(vt,et){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,_.A)(function*(vt,et){try{const cn=(yield En()).transaction(Dt,"readwrite");yield cn.objectStore(Dt).put(et,Ne(vt)),yield cn.done}catch(Vt){if(Vt instanceof y.g)Lt.warn(Vt.message);else{const cn=Zt.create("idb-set",{originalErrorMessage:Vt?.message});Lt.warn(cn.message)}}})).apply(this,arguments)}function Ne(vt){return`${vt.name}!${vt.options.appId}`}class Ms{constructor(et){this.container=et,this._heartbeatsCache=null;const Vt=this.container.getProvider("app").getImmediate();this._storage=new ss(Vt),this._heartbeatsCachePromise=this._storage.read().then(cn=>(this._heartbeatsCache=cn,cn))}triggerHeartbeat(){var et=this;return(0,_.A)(function*(){var Vt,cn;try{const ye=et.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ie=ls();return null==(null===(Vt=et._heartbeatsCache)||void 0===Vt?void 0:Vt.heartbeats)&&(et._heartbeatsCache=yield et._heartbeatsCachePromise,null==(null===(cn=et._heartbeatsCache)||void 0===cn?void 0:cn.heartbeats))||et._heartbeatsCache.lastSentHeartbeatDate===Ie||et._heartbeatsCache.heartbeats.some(dt=>dt.date===Ie)?void 0:(et._heartbeatsCache.heartbeats.push({date:Ie,agent:ye}),et._heartbeatsCache.heartbeats=et._heartbeatsCache.heartbeats.filter(dt=>{const Ze=new Date(dt.date).valueOf();return Date.now()-Ze<=2592e6}),et._storage.overwrite(et._heartbeatsCache))}catch(ne){Lt.warn(ne)}})()}getHeartbeatsHeader(){var et=this;return(0,_.A)(function*(){var Vt;try{if(null===et._heartbeatsCache&&(yield et._heartbeatsCachePromise),null==(null===(Vt=et._heartbeatsCache)||void 0===Vt?void 0:Vt.heartbeats)||0===et._heartbeatsCache.heartbeats.length)return"";const cn=ls(),{heartbeatsToSend:ne,unsentEntries:ye}=function or(vt,et=1024){const Vt=[];let cn=vt.slice();for(const ne of vt){const ye=Vt.find(Ie=>Ie.agent===ne.agent);if(ye){if(ye.dates.push(ne.date),Hi(Vt)>et){ye.dates.pop();break}}else if(Vt.push({agent:ne.agent,dates:[ne.date]}),Hi(Vt)>et){Vt.pop();break}cn=cn.slice(1)}return{heartbeatsToSend:Vt,unsentEntries:cn}}(et._heartbeatsCache.heartbeats),Ie=(0,y.Uj)(JSON.stringify({version:2,heartbeats:ne}));return et._heartbeatsCache.lastSentHeartbeatDate=cn,ye.length>0?(et._heartbeatsCache.heartbeats=ye,yield et._storage.overwrite(et._heartbeatsCache)):(et._heartbeatsCache.heartbeats=[],et._storage.overwrite(et._heartbeatsCache)),Ie}catch(cn){return Lt.warn(cn),""}})()}}function ls(){return(new Date).toISOString().substring(0,10)}class ss{constructor(et){this.app=et,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.A)(function*(){return!!(0,y.zW)()&&(0,y.eX)().then(()=>!0).catch(()=>!1)})()}read(){var et=this;return(0,_.A)(function*(){if(yield et._canUseIndexedDBPromise){const cn=yield function Bn(vt){return qn.apply(this,arguments)}(et.app);return cn?.heartbeats?cn:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(et){var Vt=this;return(0,_.A)(function*(){var cn;if(yield Vt._canUseIndexedDBPromise){const ye=yield Vt.read();return Sn(Vt.app,{lastSentHeartbeatDate:null!==(cn=et.lastSentHeartbeatDate)&&void 0!==cn?cn:ye.lastSentHeartbeatDate,heartbeats:et.heartbeats})}})()}add(et){var Vt=this;return(0,_.A)(function*(){var cn;if(yield Vt._canUseIndexedDBPromise){const ye=yield Vt.read();return Sn(Vt.app,{lastSentHeartbeatDate:null!==(cn=et.lastSentHeartbeatDate)&&void 0!==cn?cn:ye.lastSentHeartbeatDate,heartbeats:[...ye.heartbeats,...et.heartbeats]})}})()}}function Hi(vt){return(0,y.Uj)(JSON.stringify({version:2,heartbeats:vt})).length}!function ti(vt){Or(new T.uA("platform-logger",et=>new He(et),"PRIVATE")),Or(new T.uA("heartbeat",et=>new Ms(et),"PRIVATE")),ge(St,un,vt),ge(St,un,"esm2017"),ge("fire-js","")}("")},1362:(sn,Ke,k)=>{k.d(Ke,{h1:()=>Le,uA:()=>R});var _=k(467),T=k(1076);class R{constructor(_e,ve,ze){this.name=_e,this.instanceFactory=ve,this.type=ze,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(_e){return this.instantiationMode=_e,this}setMultipleInstances(_e){return this.multipleInstances=_e,this}setServiceProps(_e){return this.serviceProps=_e,this}setInstanceCreatedCallback(_e){return this.onInstanceCreated=_e,this}}const y="[DEFAULT]";class te{constructor(_e,ve){this.name=_e,this.container=ve,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(_e){const ve=this.normalizeInstanceIdentifier(_e);if(!this.instancesDeferred.has(ve)){const ze=new T.cY;if(this.instancesDeferred.set(ve,ze),this.isInitialized(ve)||this.shouldAutoInitialize())try{const Ct=this.getOrInitializeService({instanceIdentifier:ve});Ct&&ze.resolve(Ct)}catch{}}return this.instancesDeferred.get(ve).promise}getImmediate(_e){var ve;const ze=this.normalizeInstanceIdentifier(_e?.identifier),Ct=null!==(ve=_e?.optional)&&void 0!==ve&&ve;if(!this.isInitialized(ze)&&!this.shouldAutoInitialize()){if(Ct)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ze})}catch(ht){if(Ct)return null;throw ht}}getComponent(){return this.component}setComponent(_e){if(_e.name!==this.name)throw Error(`Mismatching Component ${_e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=_e,this.shouldAutoInitialize()){if(function fe(Re){return"EAGER"===Re.instantiationMode}(_e))try{this.getOrInitializeService({instanceIdentifier:y})}catch{}for(const[ve,ze]of this.instancesDeferred.entries()){const Ct=this.normalizeInstanceIdentifier(ve);try{const ht=this.getOrInitializeService({instanceIdentifier:Ct});ze.resolve(ht)}catch{}}}}clearInstance(_e=y){this.instancesDeferred.delete(_e),this.instancesOptions.delete(_e),this.instances.delete(_e)}delete(){var _e=this;return(0,_.A)(function*(){const ve=Array.from(_e.instances.values());yield Promise.all([...ve.filter(ze=>"INTERNAL"in ze).map(ze=>ze.INTERNAL.delete()),...ve.filter(ze=>"_delete"in ze).map(ze=>ze._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(_e=y){return this.instances.has(_e)}getOptions(_e=y){return this.instancesOptions.get(_e)||{}}initialize(_e={}){const{options:ve={}}=_e,ze=this.normalizeInstanceIdentifier(_e.instanceIdentifier);if(this.isInitialized(ze))throw Error(`${this.name}(${ze}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ct=this.getOrInitializeService({instanceIdentifier:ze,options:ve});for(const[ht,Me]of this.instancesDeferred.entries())ze===this.normalizeInstanceIdentifier(ht)&&Me.resolve(Ct);return Ct}onInit(_e,ve){var ze;const Ct=this.normalizeInstanceIdentifier(ve),ht=null!==(ze=this.onInitCallbacks.get(Ct))&&void 0!==ze?ze:new Set;ht.add(_e),this.onInitCallbacks.set(Ct,ht);const Me=this.instances.get(Ct);return Me&&_e(Me,Ct),()=>{ht.delete(_e)}}invokeOnInitCallbacks(_e,ve){const ze=this.onInitCallbacks.get(ve);if(ze)for(const Ct of ze)try{Ct(_e,ve)}catch{}}getOrInitializeService({instanceIdentifier:_e,options:ve={}}){let ze=this.instances.get(_e);if(!ze&&this.component&&(ze=this.component.instanceFactory(this.container,{instanceIdentifier:(Re=_e,Re===y?void 0:Re),options:ve}),this.instances.set(_e,ze),this.instancesOptions.set(_e,ve),this.invokeOnInitCallbacks(ze,_e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,_e,ze)}catch{}var Re;return ze||null}normalizeInstanceIdentifier(_e=y){return this.component?this.component.multipleInstances?_e:y:_e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Le{constructor(_e){this.name=_e,this.providers=new Map}addComponent(_e){const ve=this.getProvider(_e.name);if(ve.isComponentSet())throw new Error(`Component ${_e.name} has already been registered with ${this.name}`);ve.setComponent(_e)}addOrOverwriteComponent(_e){this.getProvider(_e.name).isComponentSet()&&this.providers.delete(_e.name),this.addComponent(_e)}getProvider(_e){if(this.providers.has(_e))return this.providers.get(_e);const ve=new te(_e,this);return this.providers.set(_e,ve),ve}getProviders(){return Array.from(this.providers.values())}}},8041:(sn,Ke,k)=>{k.d(Ke,{$b:()=>T,Ey:()=>Re,He:()=>Le,Vy:()=>fe});const _=[];var T=function(_e){return _e[_e.DEBUG=0]="DEBUG",_e[_e.VERBOSE=1]="VERBOSE",_e[_e.INFO=2]="INFO",_e[_e.WARN=3]="WARN",_e[_e.ERROR=4]="ERROR",_e[_e.SILENT=5]="SILENT",_e}(T||{});const R={debug:T.DEBUG,verbose:T.VERBOSE,info:T.INFO,warn:T.WARN,error:T.ERROR,silent:T.SILENT},y=T.INFO,te={[T.DEBUG]:"log",[T.VERBOSE]:"log",[T.INFO]:"info",[T.WARN]:"warn",[T.ERROR]:"error"},be=(_e,ve,...ze)=>{if(ve<_e.logLevel)return;const Ct=(new Date).toISOString(),ht=te[ve];if(!ht)throw new Error(`Attempted to log a message with an invalid logType (value: ${ve})`);console[ht](`[${Ct}]  ${_e.name}:`,...ze)};class fe{constructor(ve){this.name=ve,this._logLevel=y,this._logHandler=be,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(ve){if(!(ve in T))throw new TypeError(`Invalid value "${ve}" assigned to \`logLevel\``);this._logLevel=ve}setLogLevel(ve){this._logLevel="string"==typeof ve?R[ve]:ve}get logHandler(){return this._logHandler}set logHandler(ve){if("function"!=typeof ve)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ve}get userLogHandler(){return this._userLogHandler}set userLogHandler(ve){this._userLogHandler=ve}debug(...ve){this._userLogHandler&&this._userLogHandler(this,T.DEBUG,...ve),this._logHandler(this,T.DEBUG,...ve)}log(...ve){this._userLogHandler&&this._userLogHandler(this,T.VERBOSE,...ve),this._logHandler(this,T.VERBOSE,...ve)}info(...ve){this._userLogHandler&&this._userLogHandler(this,T.INFO,...ve),this._logHandler(this,T.INFO,...ve)}warn(...ve){this._userLogHandler&&this._userLogHandler(this,T.WARN,...ve),this._logHandler(this,T.WARN,...ve)}error(...ve){this._userLogHandler&&this._userLogHandler(this,T.ERROR,...ve),this._logHandler(this,T.ERROR,...ve)}}function Le(_e){_.forEach(ve=>{ve.setLogLevel(_e)})}function Re(_e,ve){for(const ze of _){let Ct=null;ve&&ve.level&&(Ct=R[ve.level]),ze.userLogHandler=null===_e?null:(ht,Me,...ct)=>{const Ue=ct.map(We=>{if(null==We)return null;if("string"==typeof We)return We;if("number"==typeof We||"boolean"==typeof We)return We.toString();if(We instanceof Error)return We.message;try{return JSON.stringify(We)}catch{return null}}).filter(We=>We).join(" ");Me>=(Ct??ht.logLevel)&&_e({level:T[Me].toLowerCase(),message:Ue,args:ct,type:ht.name})}}}},7231:(sn,Ke,k)=>{k.d(Ke,{HF:()=>_.X});var _=k(576);k(7852),k(1076),k(8041),k(1362)},7935:(sn,Ke,k)=>{k.d(Ke,{A:()=>_.A});var _=k(3345);_.A.registerVersion("firebase","10.13.1","app-compat")},2438:(sn,Ke,k)=>{var _=k(467),T=k(3345),R=k(576),y=k(1076),fe=(k(7852),k(8041),k(1362));function Le(){return window}function ve(){return ve=(0,_.A)(function*(q,J,se){var me;const{BuildInfo:Dt}=Le();(0,R.au)(J.sessionId,"AuthEvent did not contain a session ID");const Bt=yield function We(q){return $e.apply(this,arguments)}(J.sessionId),En={};return(0,R.av)()?En.ibi=Dt.packageName:(0,R.aw)()?En.apn=Dt.packageName:(0,R.ax)(q,"operation-not-supported-in-this-environment"),Dt.displayName&&(En.appDisplayName=Dt.displayName),En.sessionId=Bt,(0,R.ay)(q,se,J.type,void 0,null!==(me=J.eventId)&&void 0!==me?me:void 0,En)}),ve.apply(this,arguments)}function Ct(){return(Ct=(0,_.A)(function*(q){const{BuildInfo:J}=Le(),se={};(0,R.av)()?se.iosBundleId=J.packageName:(0,R.aw)()?se.androidPackageName=J.packageName:(0,R.ax)(q,"operation-not-supported-in-this-environment"),yield(0,R.az)(q,se)})).apply(this,arguments)}function ct(){return(ct=(0,_.A)(function*(q,J,se){const{cordova:me}=Le();let Dt=()=>{};try{yield new Promise((Bt,En)=>{let Bn=null;function qn(){var Ne;Bt();const $r=null===(Ne=me.plugins.browsertab)||void 0===Ne?void 0:Ne.close;"function"==typeof $r&&$r(),"function"==typeof se?.close&&se.close()}function Sn(){Bn||(Bn=window.setTimeout(()=>{En((0,R.aB)(q,"redirect-cancelled-by-user"))},2e3))}function Wt(){"visible"===document?.visibilityState&&Sn()}J.addPassiveListener(qn),document.addEventListener("resume",Sn,!1),(0,R.aw)()&&document.addEventListener("visibilitychange",Wt,!1),Dt=()=>{J.removePassiveListener(qn),document.removeEventListener("resume",Sn,!1),document.removeEventListener("visibilitychange",Wt,!1),Bn&&window.clearTimeout(Bn)}})}finally{Dt()}})).apply(this,arguments)}function $e(){return($e=(0,_.A)(function*(q){const J=function Pt(q){if((0,R.au)(/[0-9a-zA-Z]+/.test(q),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(q);const J=new ArrayBuffer(q.length),se=new Uint8Array(J);for(let me=0;me<q.length;me++)se[me]=q.charCodeAt(me);return se}(q),se=yield crypto.subtle.digest("SHA-256",J);return Array.from(new Uint8Array(se)).map(Dt=>Dt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Ee extends R.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(J=>{this.resolveInitialized=J})}addPassiveListener(J){this.passiveListeners.add(J)}removePassiveListener(J){this.passiveListeners.delete(J)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(J){return this.resolveInitialized(),this.passiveListeners.forEach(se=>se(J)),super.onEvent(J)}initialized(){var J=this;return(0,_.A)(function*(){yield J.initPromise})()}}function Je(q){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,_.A)(function*(q){const J=yield He()._get(Jt(q));return J&&(yield He()._remove(Jt(q))),J})).apply(this,arguments)}function je(){const q=[];for(let se=0;se<20;se++){const me=Math.floor(62*Math.random());q.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(me))}return q.join("")}function He(){return(0,R.aE)(R.b)}function Jt(q){return(0,R.aF)("authEvent",q.config.apiKey,q.name)}function Lt(q){if(!q?.includes("?"))return{};const[J,...se]=q.split("?");return(0,y.I9)(se.join("?"))}const Pe=class tn{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aG,this._overrideRedirectResult=R.aH}_initialize(J){var se=this;return(0,_.A)(function*(){const me=J._key();let Dt=se.eventManagers.get(me);return Dt||(Dt=new Ee(J),se.eventManagers.set(me,Dt),se.attachCallbackListeners(J,Dt)),Dt})()}_openPopup(J){(0,R.ax)(J,"operation-not-supported-in-this-environment")}_openRedirect(J,se,me,Dt){var Bt=this;return(0,_.A)(function*(){!function Ue(q){var J,se,me,Dt,Bt,En,Bn,qn,Sn,Wt;const Ne=Le();(0,R.aC)("function"==typeof(null===(J=Ne?.universalLinks)||void 0===J?void 0:J.subscribe),q,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.aC)(typeof(null===(se=Ne?.BuildInfo)||void 0===se?void 0:se.packageName)<"u",q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.aC)("function"==typeof(null===(Bt=null===(Dt=null===(me=Ne?.cordova)||void 0===me?void 0:me.plugins)||void 0===Dt?void 0:Dt.browsertab)||void 0===Bt?void 0:Bt.openUrl),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aC)("function"==typeof(null===(qn=null===(Bn=null===(En=Ne?.cordova)||void 0===En?void 0:En.plugins)||void 0===Bn?void 0:Bn.browsertab)||void 0===qn?void 0:qn.isAvailable),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aC)("function"==typeof(null===(Wt=null===(Sn=Ne?.cordova)||void 0===Sn?void 0:Sn.InAppBrowser)||void 0===Wt?void 0:Wt.open),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(J);const En=yield Bt._initialize(J);yield En.initialized(),En.resetRedirect(),(0,R.aI)(),yield Bt._originValidation(J);const Bn=function oe(q,J,se=null){return{type:J,eventId:se,urlResponse:null,sessionId:je(),postBody:null,tenantId:q.tenantId,error:(0,R.aB)(q,"no-auth-event")}}(J,me,Dt);yield function Ye(q,J){return He()._set(Jt(q),J)}(J,Bn);const qn=yield function _e(q,J,se){return ve.apply(this,arguments)}(J,Bn,se),Sn=yield function ht(q){const{cordova:J}=Le();return new Promise(se=>{J.plugins.browsertab.isAvailable(me=>{let Dt=null;me?J.plugins.browsertab.openUrl(q):Dt=J.InAppBrowser.open(q,(0,R.aA)()?"_blank":"_system","location=yes"),se(Dt)})})}(qn);return function Me(q,J,se){return ct.apply(this,arguments)}(J,En,Sn)})()}_isIframeWebStorageSupported(J,se){throw new Error("Method not implemented.")}_originValidation(J){const se=J._key();return this.originValidationPromises[se]||(this.originValidationPromises[se]=function ze(q){return Ct.apply(this,arguments)}(J)),this.originValidationPromises[se]}attachCallbackListeners(J,se){const{universalLinks:me,handleOpenURL:Dt,BuildInfo:Bt}=Le(),En=setTimeout((0,_.A)(function*(){yield Je(J),se.onEvent(Qe())}),500),Bn=function(){var Wt=(0,_.A)(function*(Ne){clearTimeout(En);const $r=yield Je(J);let Qr=null;$r&&Ne?.url&&(Qr=function ie(q,J){var se,me;const Dt=function un(q){const J=Lt(q),se=J.link?decodeURIComponent(J.link):void 0,me=Lt(se).link,Dt=J.deep_link_id?decodeURIComponent(J.deep_link_id):void 0;return Lt(Dt).link||Dt||me||se||q}(J);if(Dt.includes("/__/auth/callback")){const Bt=Lt(Dt),En=Bt.firebaseError?function St(q){try{return JSON.parse(q)}catch{return null}}(decodeURIComponent(Bt.firebaseError)):null,Bn=null===(me=null===(se=En?.code)||void 0===se?void 0:se.split("auth/"))||void 0===me?void 0:me[1],qn=Bn?(0,R.aB)(Bn):null;return qn?{type:q.type,eventId:q.eventId,tenantId:q.tenantId,error:qn,urlResponse:null,sessionId:null,postBody:null}:{type:q.type,eventId:q.eventId,tenantId:q.tenantId,sessionId:q.sessionId,urlResponse:Dt,postBody:null}}return null}($r,Ne.url)),se.onEvent(Qr||Qe())});return function($r){return Wt.apply(this,arguments)}}();typeof me<"u"&&"function"==typeof me.subscribe&&me.subscribe(null,Bn);const qn=Dt,Sn=`${Bt.packageName.toLowerCase()}://`;Le().handleOpenURL=function(){var Wt=(0,_.A)(function*(Ne){if(Ne.toLowerCase().startsWith(Sn)&&Bn({url:Ne}),"function"==typeof qn)try{qn(Ne)}catch($r){console.error($r)}});return function(Ne){return Wt.apply(this,arguments)}}()}};function Qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.aB)("no-auth-event")}}function Kt(){var q;return(null===(q=self?.location)||void 0===q?void 0:q.protocol)||null}function rn(q=(0,y.ZQ)()){return!("file:"!==Kt()&&"ionic:"!==Kt()&&"capacitor:"!==Kt()||!q.toLowerCase().match(/iphone|ipad|ipod|android/))}function ot(){try{const q=self.localStorage,J=R.aN();if(q)return q.setItem(J,"1"),q.removeItem(J),!function Ln(q=(0,y.ZQ)()){return function Cn(){return(0,y.lT)()&&11===document?.documentMode}()||function Dn(q=(0,y.ZQ)()){return/Edge\/\d+/.test(q)}(q)}()||(0,y.zW)()}catch{return In()&&(0,y.zW)()}return!1}function In(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kn(){return(function gn(){return"http:"===Kt()||"https:"===Kt()}()||(0,y.sr)()||rn())&&!function on(){return(0,y.lV)()||(0,y.Ll)()}()&&ot()&&!In()}function sr(){return rn()&&typeof document<"u"}function _t(){return(_t=(0,_.A)(function*(){return!!sr()&&new Promise(q=>{const J=setTimeout(()=>{q(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(J),q(!0)})})})).apply(this,arguments)}const Ft={LOCAL:"local",NONE:"none",SESSION:"session"},it=R.aC,xt="persistence";function tr(q){return An.apply(this,arguments)}function An(){return(An=(0,_.A)(function*(q){yield q._initializationPromise;const J=kr(),se=R.aF(xt,q.config.apiKey,q.name);J&&J.setItem(se,q._getPersistence())})).apply(this,arguments)}function kr(){var q;try{return(null===(q=function Zr(){return typeof window<"u"?window:null}())||void 0===q?void 0:q.sessionStorage)||null}catch{return null}}const Wr=R.aC;class jr{constructor(){this.browserResolver=R.aE(R.k),this.cordovaResolver=R.aE(Pe),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aG,this._overrideRedirectResult=R.aH}_initialize(J){var se=this;return(0,_.A)(function*(){return yield se.selectUnderlyingResolver(),se.assertedUnderlyingResolver._initialize(J)})()}_openPopup(J,se,me,Dt){var Bt=this;return(0,_.A)(function*(){return yield Bt.selectUnderlyingResolver(),Bt.assertedUnderlyingResolver._openPopup(J,se,me,Dt)})()}_openRedirect(J,se,me,Dt){var Bt=this;return(0,_.A)(function*(){return yield Bt.selectUnderlyingResolver(),Bt.assertedUnderlyingResolver._openRedirect(J,se,me,Dt)})()}_isIframeWebStorageSupported(J,se){this.assertedUnderlyingResolver._isIframeWebStorageSupported(J,se)}_originValidation(J){return this.assertedUnderlyingResolver._originValidation(J)}get _shouldInitProactively(){return sr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var J=this;return(0,_.A)(function*(){if(J.underlyingResolver)return;const se=yield function Rt(){return _t.apply(this,arguments)}();J.underlyingResolver=se?J.cordovaResolver:J.browserResolver})()}}function Vi(q){return q.unwrap()}function hs(q){return Li(q)}function Li(q){const{_tokenResponse:J}=q instanceof y.g?q.customData:q;if(!J)return null;if(!(q instanceof y.g)&&"temporaryProof"in J&&"phoneNumber"in J)return R.P.credentialFromResult(q);const se=J.providerId;if(!se||se===R.p.PASSWORD)return null;let me;switch(se){case R.p.GOOGLE:me=R.X;break;case R.p.FACEBOOK:me=R.W;break;case R.p.GITHUB:me=R.Y;break;case R.p.TWITTER:me=R.$;break;default:const{oauthIdToken:Dt,oauthAccessToken:Bt,oauthTokenSecret:En,pendingToken:Bn,nonce:qn}=J;return Bt||En||Dt||Bn?Bn?se.startsWith("saml.")?R.aQ._create(se,Bn):R.N._fromParams({providerId:se,signInMethod:se,pendingToken:Bn,idToken:Dt,accessToken:Bt}):new R.Z(se).credential({idToken:Dt,accessToken:Bt,rawNonce:qn}):null}return q instanceof y.g?me.credentialFromError(q):me.credentialFromResult(q)}function zt(q,J){return J.catch(se=>{throw se instanceof y.g&&function Nn(q,J){var se;const me=null===(se=J.customData)||void 0===se?void 0:se._tokenResponse;if("auth/multi-factor-auth-required"===J?.code)J.resolver=new Zt(q,R.as(q,J));else if(me){const Dt=Li(J),Bt=J;Dt&&(Bt.credential=Dt,Bt.tenantId=me.tenantId||void 0,Bt.email=me.email||void 0,Bt.phoneNumber=me.phoneNumber||void 0)}}(q,se),se}).then(se=>{const Dt=se.user;return{operationType:se.operationType,credential:hs(se),additionalUserInfo:R.aq(se),user:en.getOrCreate(Dt)}})}function Un(q,J){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,_.A)(function*(q,J){const se=yield J;return{verificationId:se.verificationId,confirm:me=>zt(q,se.confirm(me))}})).apply(this,arguments)}class Zt{constructor(J,se){this.resolver=se,this.auth=function Or(q){return q.wrapped()}(J)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(J){return zt(Vi(this.auth),this.resolver.resolveSignIn(J))}}class en{constructor(J){this._delegate=J,this.multiFactor=R.at(J)}static getOrCreate(J){return en.USER_MAP.has(J)||en.USER_MAP.set(J,new en(J)),en.USER_MAP.get(J)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(J){return this._delegate.getIdTokenResult(J)}getIdToken(J){return this._delegate.getIdToken(J)}linkAndRetrieveDataWithCredential(J){return this.linkWithCredential(J)}linkWithCredential(J){var se=this;return(0,_.A)(function*(){return zt(se.auth,R.a2(se._delegate,J))})()}linkWithPhoneNumber(J,se){var me=this;return(0,_.A)(function*(){return Un(me.auth,R.l(me._delegate,J,se))})()}linkWithPopup(J){var se=this;return(0,_.A)(function*(){return zt(se.auth,R.d(se._delegate,J,jr))})()}linkWithRedirect(J){var se=this;return(0,_.A)(function*(){return yield tr(R.aJ(se.auth)),R.g(se._delegate,J,jr)})()}reauthenticateAndRetrieveDataWithCredential(J){return this.reauthenticateWithCredential(J)}reauthenticateWithCredential(J){var se=this;return(0,_.A)(function*(){return zt(se.auth,R.a3(se._delegate,J))})()}reauthenticateWithPhoneNumber(J,se){return Un(this.auth,R.r(this._delegate,J,se))}reauthenticateWithPopup(J){return zt(this.auth,R.e(this._delegate,J,jr))}reauthenticateWithRedirect(J){var se=this;return(0,_.A)(function*(){return yield tr(R.aJ(se.auth)),R.h(se._delegate,J,jr)})()}sendEmailVerification(J){return R.ag(this._delegate,J)}unlink(J){var se=this;return(0,_.A)(function*(){return yield R.ap(se._delegate,J),se})()}updateEmail(J){return R.al(this._delegate,J)}updatePassword(J){return R.am(this._delegate,J)}updatePhoneNumber(J){return R.u(this._delegate,J)}updateProfile(J){return R.ak(this._delegate,J)}verifyBeforeUpdateEmail(J,se){return R.ah(this._delegate,J,se)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}en.USER_MAP=new WeakMap;const Kr=R.aC;let Rn=(()=>{class q{constructor(se,me){if(this.app=se,me.isInitialized())return this._delegate=me.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Dt}=se.options;Kr(Dt,"invalid-api-key",{appName:se.name}),Kr(Dt,"invalid-api-key",{appName:se.name});const Bt=typeof window<"u"?jr:void 0;this._delegate=me.initialize({options:{persistence:ke(Dt,se.name),popupRedirectResolver:Bt}}),this._delegate._updateErrorMap(R.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?en.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(se){this._delegate.languageCode=se}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(se){this._delegate.tenantId=se}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(se,me){R.K(this._delegate,se,me)}applyActionCode(se){return R.a7(this._delegate,se)}checkActionCode(se){return R.a8(this._delegate,se)}confirmPasswordReset(se,me){return R.a6(this._delegate,se,me)}createUserWithEmailAndPassword(se,me){var Dt=this;return(0,_.A)(function*(){return zt(Dt._delegate,R.aa(Dt._delegate,se,me))})()}fetchProvidersForEmail(se){return this.fetchSignInMethodsForEmail(se)}fetchSignInMethodsForEmail(se){return R.af(this._delegate,se)}isSignInWithEmailLink(se){return R.ad(this._delegate,se)}getRedirectResult(){var se=this;return(0,_.A)(function*(){Kr(Kn(),se._delegate,"operation-not-supported-in-this-environment");const me=yield R.j(se._delegate,jr);return me?zt(se._delegate,Promise.resolve(me)):{credential:null,user:null}})()}addFrameworkForLogging(se){!function ft(q,J){(0,R.aJ)(q)._logFramework(J)}(this._delegate,se)}onAuthStateChanged(se,me,Dt){const{next:Bt,error:En,complete:Bn}=xr(se,me,Dt);return this._delegate.onAuthStateChanged(Bt,En,Bn)}onIdTokenChanged(se,me,Dt){const{next:Bt,error:En,complete:Bn}=xr(se,me,Dt);return this._delegate.onIdTokenChanged(Bt,En,Bn)}sendSignInLinkToEmail(se,me){return R.ac(this._delegate,se,me)}sendPasswordResetEmail(se,me){return R.a5(this._delegate,se,me||void 0)}setPersistence(se){var me=this;return(0,_.A)(function*(){let Dt;switch(function Yn(q,J){it(Object.values(Ft).includes(J),q,"invalid-persistence-type"),(0,y.lV)()?it(J!==Ft.SESSION,q,"unsupported-persistence-type"):(0,y.Ll)()?it(J===Ft.NONE,q,"unsupported-persistence-type"):In()?it(J===Ft.NONE||J===Ft.LOCAL&&(0,y.zW)(),q,"unsupported-persistence-type"):it(J===Ft.NONE||ot(),q,"unsupported-persistence-type")}(me._delegate,se),se){case Ft.SESSION:Dt=R.a;break;case Ft.LOCAL:Dt=(yield R.aE(R.i)._isAvailable())?R.i:R.b;break;case Ft.NONE:Dt=R.U;break;default:return R.ax("argument-error",{appName:me._delegate.name})}return me._delegate.setPersistence(Dt)})()}signInAndRetrieveDataWithCredential(se){return this.signInWithCredential(se)}signInAnonymously(){return zt(this._delegate,R.a0(this._delegate))}signInWithCredential(se){return zt(this._delegate,R.a1(this._delegate,se))}signInWithCustomToken(se){return zt(this._delegate,R.a4(this._delegate,se))}signInWithEmailAndPassword(se,me){return zt(this._delegate,R.ab(this._delegate,se,me))}signInWithEmailLink(se,me){return zt(this._delegate,R.ae(this._delegate,se,me))}signInWithPhoneNumber(se,me){return Un(this._delegate,R.s(this._delegate,se,me))}signInWithPopup(se){var me=this;return(0,_.A)(function*(){return Kr(Kn(),me._delegate,"operation-not-supported-in-this-environment"),zt(me._delegate,R.c(me._delegate,se,jr))})()}signInWithRedirect(se){var me=this;return(0,_.A)(function*(){return Kr(Kn(),me._delegate,"operation-not-supported-in-this-environment"),yield tr(me._delegate),R.f(me._delegate,se,jr)})()}updateCurrentUser(se){return this._delegate.updateCurrentUser(se)}verifyPasswordResetCode(se){return R.a9(this._delegate,se)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return q.Persistence=Ft,q})();function xr(q,J,se){let me=q;"function"!=typeof q&&({next:me,error:J,complete:se}=q);const Dt=me;return{next:En=>Dt(En&&en.getOrCreate(En)),error:J,complete:se}}function ke(q,J){const se=function bn(q,J){const se=kr();if(!se)return[];const me=R.aF(xt,q,J);switch(se.getItem(me)){case Ft.NONE:return[R.U];case Ft.LOCAL:return[R.i,R.a];case Ft.SESSION:return[R.a];default:return[]}}(q,J);if(typeof self<"u"&&!se.includes(R.i)&&se.push(R.i),typeof window<"u")for(const me of[R.b,R.a])se.includes(me)||se.push(me);return se.includes(R.U)||se.push(R.U),se}class we{constructor(){this.providerId="phone",this._delegate=new R.P(Vi(T.A.auth()))}static credential(J,se){return R.P.credential(J,se)}verifyPhoneNumber(J,se){return this._delegate.verifyPhoneNumber(J,se)}unwrap(){return this._delegate}}we.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,we.PROVIDER_ID=R.P.PROVIDER_ID;const Ce=R.aC;class Xe{constructor(J,se,me=T.A.app()){var Dt;Ce(null===(Dt=me.options)||void 0===Dt?void 0:Dt.apiKey,"invalid-api-key",{appName:me.name}),this._delegate=new R.R(me.auth(),J,se),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ge(q){q.INTERNAL.registerComponent(new fe.uA("auth-compat",J=>{const se=J.getProvider("app-compat").getImmediate(),me=J.getProvider("auth");return new Rn(se,me)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.V,FacebookAuthProvider:R.W,GithubAuthProvider:R.Y,GoogleAuthProvider:R.X,OAuthProvider:R.Z,SAMLAuthProvider:R._,PhoneAuthProvider:we,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:Xe,TwitterAuthProvider:R.$,Auth:Rn,AuthCredential:R.L,Error:y.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),q.registerVersion("@firebase/auth-compat","0.5.13")}(T.A)},467:(sn,Ke,k)=>{function _(R,y,te,be,fe,Le,Re){try{var _e=R[Le](Re),ve=_e.value}catch(ze){return void te(ze)}_e.done?y(ve):Promise.resolve(ve).then(be,fe)}function T(R){return function(){var y=this,te=arguments;return new Promise(function(be,fe){var Le=R.apply(y,te);function Re(ve){_(Le,be,fe,Re,_e,"next",ve)}function _e(ve){_(Le,be,fe,Re,_e,"throw",ve)}Re(void 0)})}}k.d(Ke,{A:()=>T})},1635:(sn,Ke,k)=>{function y(Pe,Qe){var ft={};for(var yt in Pe)Object.prototype.hasOwnProperty.call(Pe,yt)&&Qe.indexOf(yt)<0&&(ft[yt]=Pe[yt]);if(null!=Pe&&"function"==typeof Object.getOwnPropertySymbols){var It=0;for(yt=Object.getOwnPropertySymbols(Pe);It<yt.length;It++)Qe.indexOf(yt[It])<0&&Object.prototype.propertyIsEnumerable.call(Pe,yt[It])&&(ft[yt[It]]=Pe[yt[It]])}return ft}function ze(Pe,Qe,ft,yt){return new(ft||(ft=Promise))(function(tt,Kt){function gn(Cn){try{on(yt.next(Cn))}catch(Dn){Kt(Dn)}}function rn(Cn){try{on(yt.throw(Cn))}catch(Dn){Kt(Dn)}}function on(Cn){Cn.done?tt(Cn.value):function It(tt){return tt instanceof ft?tt:new ft(function(Kt){Kt(tt)})}(Cn.value).then(gn,rn)}on((yt=yt.apply(Pe,Qe||[])).next())})}function ue(Pe){return this instanceof ue?(this.v=Pe,this):new ue(Pe)}function Ee(Pe,Qe,ft){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var It,yt=ft.apply(Pe,Qe||[]),tt=[];return It=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),gn("next"),gn("throw"),gn("return",function Kt(ot){return function(In){return Promise.resolve(In).then(ot,Dn)}}),It[Symbol.asyncIterator]=function(){return this},It;function gn(ot,In){yt[ot]&&(It[ot]=function(Kn){return new Promise(function(sr,Rt){tt.push([ot,Kn,sr,Rt])>1||rn(ot,Kn)})},In&&(It[ot]=In(It[ot])))}function rn(ot,In){try{!function on(ot){ot.value instanceof ue?Promise.resolve(ot.value.v).then(Cn,Dn):Ln(tt[0][2],ot)}(yt[ot](In))}catch(Kn){Ln(tt[0][3],Kn)}}function Cn(ot){rn("next",ot)}function Dn(ot){rn("throw",ot)}function Ln(ot,In){ot(In),tt.shift(),tt.length&&rn(tt[0][0],tt[0][1])}}function Ye(Pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ft,Qe=Pe[Symbol.asyncIterator];return Qe?Qe.call(Pe):(Pe=function ct(Pe){var Qe="function"==typeof Symbol&&Symbol.iterator,ft=Qe&&Pe[Qe],yt=0;if(ft)return ft.call(Pe);if(Pe&&"number"==typeof Pe.length)return{next:function(){return Pe&&yt>=Pe.length&&(Pe=void 0),{value:Pe&&Pe[yt++],done:!Pe}}};throw new TypeError(Qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Pe),ft={},yt("next"),yt("throw"),yt("return"),ft[Symbol.asyncIterator]=function(){return this},ft);function yt(tt){ft[tt]=Pe[tt]&&function(Kt){return new Promise(function(gn,rn){!function It(tt,Kt,gn,rn){Promise.resolve(rn).then(function(on){tt({value:on,done:gn})},Kt)}(gn,rn,(Kt=Pe[tt](Kt)).done,Kt.value)})}}}k.d(Ke,{AQ:()=>Ee,N3:()=>ue,Tt:()=>y,sH:()=>ze,xN:()=>Ye}),"function"==typeof SuppressedError&&SuppressedError}},sn=>{sn(sn.s=7827)}]);