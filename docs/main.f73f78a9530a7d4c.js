"use strict";(self.webpackChunkmusicshop=self.webpackChunkmusicshop||[]).push([[792],{576:(nn,We,k)=>{k.d(We,{$:()=>ds,A:()=>pe,G:()=>nt,K:()=>Gi,L:()=>rr,N:()=>Bi,P:()=>Yc,R:()=>pt,U:()=>Bn,V:()=>Ls,W:()=>wi,X:()=>yr,Y:()=>Us,Z:()=>Zo,_:()=>ar,a:()=>ta,a0:()=>W,a1:()=>pa,a2:()=>La,a3:()=>Ua,a4:()=>Aa,a5:()=>ma,a6:()=>Ki,a7:()=>Tc,a8:()=>Ao,a9:()=>C,aA:()=>ti,aB:()=>we,aC:()=>ce,aD:()=>Lu,aE:()=>Vt,aF:()=>qn,aG:()=>Vu,aH:()=>nf,aI:()=>Cd,aJ:()=>Bt,aN:()=>Qn,aQ:()=>Yr,aa:()=>L,ab:()=>he,ac:()=>Pe,ad:()=>Et,ae:()=>Ct,af:()=>zn,ag:()=>Hn,ah:()=>oi,ak:()=>bo,al:()=>as,am:()=>cs,ap:()=>Jn,aq:()=>de,as:()=>pi,at:()=>El,au:()=>xt,av:()=>Hi,aw:()=>ls,ax:()=>ae,ay:()=>nu,az:()=>eu,b:()=>_a,c:()=>ef,d:()=>tf,e:()=>Dl,f:()=>Td,g:()=>Rl,h:()=>Dd,i:()=>wl,j:()=>Rr,k:()=>Bu,l:()=>Ac,m:()=>$u,p:()=>$e,r:()=>ho,s:()=>dr,u:()=>ku});var _=k(467),T=k(7852),R=k(1076),v=k(8041),re=k(1635),Se=k(1362);const $e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},pe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const nt=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},De=function it(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ct=new R.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ot=new v.Vy("@firebase/auth");function $t(I,...h){ot.logLevel<=v.$b.ERROR&&ot.error(`Auth (${T.SDK_VERSION}): ${I}`,...h)}function ae(I,...h){throw Oe(I,...h)}function we(I,...h){return Oe(I,...h)}function ie(I,h,f){const A=Object.assign(Object.assign({},De()),{[h]:f});return new R.FA("auth","Firebase",A).create(h,{appName:I.name})}function je(I){return ie(I,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ue(I,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&ae(I,"argument-error"),ie(I,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Oe(I,...h){if("string"!=typeof I){const f=h[0],A=[...h.slice(1)];return A[0]&&(A[0].appName=I.name),I._errorFactory.create(f,...A)}return ct.create(I,...h)}function ce(I,h,...f){if(!I)throw Oe(h,...f)}function xe(I){const h="INTERNAL ASSERTION FAILED: "+I;throw $t(h),new Error(h)}function xt(I,h){I||xe(h)}function un(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function jt(){return"http:"===ln()||"https:"===ln()}function ln(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class rn{constructor(h,f){this.shortDelay=h,this.longDelay=f,xt(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,R.jZ)()||(0,R.lV)()}get(){return function Lt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(jt()||(0,R.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Re(I,h){xt(I.emulator,"Emulator should always be set here");const{url:f}=I.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class qe{static initialize(h,f,A){this.fetchImpl=h,f&&(this.headersImpl=f),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void xe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void xe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void xe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ft={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},yt=new rn(3e4,6e4);function It(I,h){return I.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:I.tenantId}):h}function Je(I,h,f,A){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,_.A)(function*(I,h,f,A,z={}){return gn(I,z,(0,_.A)(function*(){let oe={},Be={};A&&("GET"===h?Be=A:oe={body:JSON.stringify(A)});const bt=(0,R.Am)(Object.assign({key:I.config.apiKey},Be)).slice(1),Gt=yield I._getAdditionalHeaders();return Gt["Content-Type"]="application/json",I.languageCode&&(Gt["X-Firebase-Locale"]=I.languageCode),qe.fetch()(Dn(I,I.config.apiHost,f,bt),Object.assign({method:h,headers:Gt,referrerPolicy:"no-referrer"},oe))}))})).apply(this,arguments)}function gn(I,h,f){return tn.apply(this,arguments)}function tn(){return(tn=(0,_.A)(function*(I,h,f){I._canInitEmulator=!1;const A=Object.assign(Object.assign({},ft),h);try{const z=new st(I),oe=yield Promise.race([f(),z.promise]);z.clearNetworkTimeout();const Be=yield oe.json();if("needConfirmation"in Be)throw In(I,"account-exists-with-different-credential",Be);if(oe.ok&&!("errorMessage"in Be))return Be;{const bt=oe.ok?Be.errorMessage:Be.error.message,[Gt,Tn]=bt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Gt)throw In(I,"credential-already-in-use",Be);if("EMAIL_EXISTS"===Gt)throw In(I,"email-already-in-use",Be);if("USER_DISABLED"===Gt)throw In(I,"user-disabled",Be);const $n=A[Gt]||Gt.toLowerCase().replace(/[_\s]+/g,"-");if(Tn)throw ie(I,$n,Tn);ae(I,$n)}}catch(z){if(z instanceof R.g)throw z;ae(I,"network-request-failed",{message:String(z)})}})).apply(this,arguments)}function sn(I,h,f,A){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,_.A)(function*(I,h,f,A,z={}){const oe=yield Je(I,h,f,A,z);return"mfaPendingCredential"in oe&&ae(I,"multi-factor-auth-required",{_serverResponse:oe}),oe})).apply(this,arguments)}function Dn(I,h,f,A){const z=`${h}${f}?${A}`;return I.config.emulator?Re(I.config,z):`${I.config.apiScheme}://${z}`}function Ln(I){switch(I){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class st{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,A)=>{this.timer=setTimeout(()=>A(we(this.auth,"network-request-failed")),yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function In(I,h,f){const A={appName:I.name};f.email&&(A.email=f.email),f.phoneNumber&&(A.phoneNumber=f.phoneNumber);const z=we(I,h,A);return z.customData._tokenResponse=f,z}function Kn(I){return void 0!==I&&void 0!==I.getResponse}function sr(I){return void 0!==I&&void 0!==I.enterprise}class St{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===h)return Ln(f.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function Zr(){return(Zr=(0,_.A)(function*(I){return(yield Je(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nt(I,h){return tt.apply(this,arguments)}function tt(){return(tt=(0,_.A)(function*(I,h){return Je(I,"GET","/v2/recaptchaConfig",It(I,h))})).apply(this,arguments)}function Yn(){return(Yn=(0,_.A)(function*(I,h){return Je(I,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function An(){return(An=(0,_.A)(function*(I,h){return Je(I,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function bn(I,h){return kr.apply(this,arguments)}function kr(){return(kr=(0,_.A)(function*(I,h){return Je(I,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Wr(I){if(I)try{const h=new Date(Number(I));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Or(){return(Or=(0,_.A)(function*(I,h=!1){const f=(0,R.Ku)(I),A=yield f.getIdToken(h),z=Nn(A);ce(z&&z.exp&&z.auth_time&&z.iat,f.auth,"internal-error");const oe="object"==typeof z.firebase?z.firebase:void 0,Be=oe?.sign_in_provider;return{claims:z,token:A,authTime:Wr(hs(z.auth_time)),issuedAtTime:Wr(hs(z.iat)),expirationTime:Wr(hs(z.exp)),signInProvider:Be||null,signInSecondFactor:oe?.sign_in_second_factor||null}})).apply(this,arguments)}function hs(I){return 1e3*Number(I)}function Nn(I){const[h,f,A]=I.split(".");if(void 0===h||void 0===f||void 0===A)return $t("JWT malformed, contained fewer than 3 sections"),null;try{const z=(0,R.u)(f);return z?JSON.parse(z):($t("Failed to decode base64 JWT payload"),null)}catch(z){return $t("Caught error parsing JWT payload as JSON",z?.toString()),null}}function Li(I){const h=Nn(I);return ce(h,"internal-error"),ce(typeof h.exp<"u","internal-error"),ce(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}function zt(I,h){return Un.apply(this,arguments)}function Un(){return(Un=(0,_.A)(function*(I,h,f=!1){if(f)return h;try{return yield h}catch(A){throw A instanceof R.g&&function Nr({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}(A)&&I.auth.currentUser===I&&(yield I.auth.signOut()),A}})).apply(this,arguments)}class Jt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const z=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,z)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const A=this.getInterval(h);this.timerId=setTimeout((0,_.A)(function*(){yield f.iteration()}),A)}iteration(){var h=this;return(0,_.A)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class Zt{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wr(this.lastLoginAt),this.creationTime=Wr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kr(I){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,_.A)(function*(I){var h;const f=I.auth,A=yield I.getIdToken(),z=yield zt(I,bn(f,{idToken:A}));ce(z?.users.length,f,"internal-error");const oe=z.users[0];I._notifyReloadListener(oe);const Be=null!==(h=oe.providerUserInfo)&&void 0!==h&&h.length?Ie(oe.providerUserInfo):[],bt=function Ce(I,h){return[...I.filter(A=>!h.some(z=>z.providerId===A.providerId)),...h]}(I.providerData,Be),$n=!!I.isAnonymous&&!(I.email&&oe.passwordHash||bt?.length),Ar={uid:oe.localId,displayName:oe.displayName||null,photoURL:oe.photoUrl||null,email:oe.email||null,emailVerified:oe.emailVerified||!1,phoneNumber:oe.phoneNumber||null,tenantId:oe.tenantId||null,providerData:bt,metadata:new Zt(oe.createdAt,oe.lastLoginAt),isAnonymous:$n};Object.assign(I,Ar)})).apply(this,arguments)}function Ve(){return(Ve=(0,_.A)(function*(I){const h=(0,R.Ku)(I);yield Kr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ie(I){return I.map(h=>{var{providerId:f}=h,A=(0,re.Tt)(h,["providerId"]);return{providerId:f,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function Mt(){return(Mt=(0,_.A)(function*(I,h){const f=yield gn(I,{},(0,_.A)(function*(){const A=(0,R.Am)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:z,apiKey:oe}=I.config,Be=Dn(I,z,"/v1/token",`key=${oe}`),bt=yield I._getAdditionalHeaders();return bt["Content-Type"]="application/x-www-form-urlencoded",qe.fetch()(Be,{method:"POST",headers:bt,body:A})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function q(){return(q=(0,_.A)(function*(I,h){return Je(I,"POST","/v2/accounts:revokeToken",It(I,h))})).apply(this,arguments)}class J{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ce(h.idToken,"internal-error"),ce(typeof h.idToken<"u","internal-error"),ce(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):Li(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}updateFromIdToken(h){ce(0!==h.length,"internal-error");const f=Li(h);this.updateTokensAndExpiration(h,null,f)}getToken(h,f=!1){var A=this;return(0,_.A)(function*(){return f||!A.accessToken||A.isExpired?(ce(A.refreshToken,h,"user-token-expired"),A.refreshToken?(yield A.refresh(h,A.refreshToken),A.accessToken):null):A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var A=this;return(0,_.A)(function*(){const{accessToken:z,refreshToken:oe,expiresIn:Be}=yield function Qe(I,h){return Mt.apply(this,arguments)}(h,f);A.updateTokensAndExpiration(z,oe,Number(Be))})()}updateTokensAndExpiration(h,f,A){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(h,f){const{refreshToken:A,accessToken:z,expirationTime:oe}=f,Be=new J;return A&&(ce("string"==typeof A,"internal-error",{appName:h}),Be.refreshToken=A),z&&(ce("string"==typeof z,"internal-error",{appName:h}),Be.accessToken=z),oe&&(ce("number"==typeof oe,"internal-error",{appName:h}),Be.expirationTime=oe),Be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new J,this.toJSON())}_performRefresh(){return xe("not implemented")}}function se(I,h){ce("string"==typeof I||typeof I>"u","internal-error",{appName:h})}class _e{constructor(h){var{uid:f,auth:A,stsTokenManager:z}=h,oe=(0,re.Tt)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=A,this.stsTokenManager=z,this.accessToken=z.accessToken,this.displayName=oe.displayName||null,this.email=oe.email||null,this.emailVerified=oe.emailVerified||!1,this.phoneNumber=oe.phoneNumber||null,this.photoURL=oe.photoURL||null,this.isAnonymous=oe.isAnonymous||!1,this.tenantId=oe.tenantId||null,this.providerData=oe.providerData?[...oe.providerData]:[],this.metadata=new Zt(oe.createdAt||void 0,oe.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,_.A)(function*(){const A=yield zt(f,f.stsTokenManager.getToken(f.auth,h));return ce(A,f.auth,"internal-error"),f.accessToken!==A&&(f.accessToken=A,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),A})()}getIdTokenResult(h){return function Vi(I){return Or.apply(this,arguments)}(this,h)}reload(){return function xr(I){return Ve.apply(this,arguments)}(this)}_assign(h){this!==h&&(ce(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new _e(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var A=this;return(0,_.A)(function*(){let z=!1;h.idToken&&h.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(h),z=!0),f&&(yield Kr(A)),yield A.auth._persistUserIfCurrent(A),z&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var h=this;return(0,_.A)(function*(){if((0,T._isFirebaseServerApp)(h.auth.app))return Promise.reject(je(h.auth));const f=yield h.getIdToken();return yield zt(h,function Rt(I,h){return Yn.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var A,z,oe,Be,bt,Gt,Tn,$n;const Ar=null!==(A=f.displayName)&&void 0!==A?A:void 0,io=null!==(z=f.email)&&void 0!==z?z:void 0,Ra=null!==(oe=f.phoneNumber)&&void 0!==oe?oe:void 0,Hu=null!==(Be=f.photoURL)&&void 0!==Be?Be:void 0,Gu=null!==(bt=f.tenantId)&&void 0!==bt?bt:void 0,zu=null!==(Gt=f._redirectEventId)&&void 0!==Gt?Gt:void 0,jl=null!==(Tn=f.createdAt)&&void 0!==Tn?Tn:void 0,$l=null!==($n=f.lastLoginAt)&&void 0!==$n?$n:void 0,{uid:Ka,emailVerified:oa,isAnonymous:Wu,providerData:iu,stsTokenManager:Ku}=f;ce(Ka&&Ku,h,"internal-error");const dc=J.fromJSON(this.name,Ku);ce("string"==typeof Ka,h,"internal-error"),se(Ar,h.name),se(io,h.name),ce("boolean"==typeof oa,h,"internal-error"),ce("boolean"==typeof Wu,h,"internal-error"),se(Ra,h.name),se(Hu,h.name),se(Gu,h.name),se(zu,h.name),se(jl,h.name),se($l,h.name);const qa=new _e({uid:Ka,auth:h,email:io,emailVerified:oa,displayName:Ar,isAnonymous:Wu,photoURL:Hu,phoneNumber:Ra,tenantId:Gu,stsTokenManager:dc,createdAt:jl,lastLoginAt:$l});return iu&&Array.isArray(iu)&&(qa.providerData=iu.map(Ss=>Object.assign({},Ss))),zu&&(qa._redirectEventId=zu),qa}static _fromIdTokenResponse(h,f,A=!1){return(0,_.A)(function*(){const z=new J;z.updateFromServerResponse(f);const oe=new _e({uid:f.localId,auth:h,stsTokenManager:z,isAnonymous:A});return yield Kr(oe),oe})()}static _fromGetAccountInfoResponse(h,f,A){return(0,_.A)(function*(){const z=f.users[0];ce(void 0!==z.localId,"internal-error");const oe=void 0!==z.providerUserInfo?Ie(z.providerUserInfo):[],Be=!(z.email&&z.passwordHash||oe?.length),bt=new J;bt.updateFromIdToken(A);const Gt=new _e({uid:z.localId,auth:h,stsTokenManager:bt,isAnonymous:Be}),Tn={uid:z.localId,displayName:z.displayName||null,photoURL:z.photoUrl||null,email:z.email||null,emailVerified:z.emailVerified||!1,phoneNumber:z.phoneNumber||null,tenantId:z.tenantId||null,providerData:oe,metadata:new Zt(z.createdAt,z.lastLoginAt),isAnonymous:!(z.email&&z.passwordHash||oe?.length)};return Object.assign(Gt,Tn),Gt})()}}const Tt=new Map;function Vt(I){xt(I instanceof Function,"Expected a class definition");let h=Tt.get(I);return h?(xt(h instanceof I,"Instance stored in cache mismatched with class"),h):(h=new I,Tt.set(I,h),h)}const Bn=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.A)(function*(){return!0})()}_set(f,A){var z=this;return(0,_.A)(function*(){z.storage[f]=A})()}_get(f){var A=this;return(0,_.A)(function*(){const z=A.storage[f];return void 0===z?null:z})()}_remove(f){var A=this;return(0,_.A)(function*(){delete A.storage[f]})()}_addListener(f,A){}_removeListener(f,A){}}return I.type="NONE",I})();function qn(I,h,f){return`firebase:${I}:${h}:${f}`}class Sn{constructor(h,f,A){this.persistence=h,this.auth=f,this.userKey=A;const{config:z,name:oe}=this.auth;this.fullUserKey=qn(this.userKey,z.apiKey,oe),this.fullPersistenceKey=qn("persistence",z.apiKey,oe),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,_.A)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?_e._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,_.A)(function*(){if(f.persistence===h)return;const A=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,A?f.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,A="authUser"){return(0,_.A)(function*(){if(!f.length)return new Sn(Vt(Bn),h,A);const z=(yield Promise.all(f.map(function(){var Tn=(0,_.A)(function*($n){if(yield $n._isAvailable())return $n});return function($n){return Tn.apply(this,arguments)}}()))).filter(Tn=>Tn);let oe=z[0]||Vt(Bn);const Be=qn(A,h.config.apiKey,h.name);let bt=null;for(const Tn of f)try{const $n=yield Tn._get(Be);if($n){const Ar=_e._fromJSON(h,$n);Tn!==oe&&(bt=Ar),oe=Tn;break}}catch{}const Gt=z.filter(Tn=>Tn._shouldAllowMigration);return oe._shouldAllowMigration&&Gt.length?(oe=Gt[0],bt&&(yield oe._set(Be,bt.toJSON())),yield Promise.all(f.map(function(){var Tn=(0,_.A)(function*($n){if($n!==oe)try{yield $n._remove(Be)}catch{}});return function($n){return Tn.apply(this,arguments)}}())),new Sn(oe,h,A)):new Sn(oe,h,A)})()}}function Wt(I){const h=I.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ms(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ke(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(or(h))return"Blackberry";if(ss(h))return"Webos";if($r(h))return"Safari";if((h.includes("chrome/")||Qr(h))&&!h.includes("edge/"))return"Chrome";if(ls(h))return"Android";{const A=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===A?.length)return A[1]}return"Other"}function ke(I=(0,R.ZQ)()){return/firefox\//i.test(I)}function $r(I=(0,R.ZQ)()){const h=I.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Qr(I=(0,R.ZQ)()){return/crios\//i.test(I)}function Ms(I=(0,R.ZQ)()){return/iemobile/i.test(I)}function ls(I=(0,R.ZQ)()){return/android/i.test(I)}function or(I=(0,R.ZQ)()){return/blackberry/i.test(I)}function ss(I=(0,R.ZQ)()){return/webos/i.test(I)}function Hi(I=(0,R.ZQ)()){return/iphone|ipad|ipod/i.test(I)||/macintosh/i.test(I)&&/mobile/i.test(I)}function ti(I=(0,R.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}function kt(I=(0,R.ZQ)()){return Hi(I)||ls(I)||ss(I)||or(I)||/windows phone/i.test(I)||Ms(I)}function an(I,h=[]){let f;switch(I){case"Browser":f=Wt((0,R.ZQ)());break;case"Worker":f=`${Wt((0,R.ZQ)())}-${I}`;break;default:f=I}const A=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${T.SDK_VERSION}/${A}`}class te{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const A=oe=>new Promise((Be,bt)=>{try{Be(h(oe))}catch(Gt){bt(Gt)}});A.onAbort=f,this.queue.push(A);const z=this.queue.length-1;return()=>{this.queue[z]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,_.A)(function*(){if(f.auth.currentUser===h)return;const A=[];try{for(const z of f.queue)yield z(h),z.onAbort&&A.push(z.onAbort)}catch(z){A.reverse();for(const oe of A)try{oe()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:z?.message})}})()}}function Ee(){return(Ee=(0,_.A)(function*(I,h={}){return Je(I,"GET","/v2/passwordPolicy",It(I,h))})).apply(this,arguments)}class Xe{constructor(h){var f,A,z,oe;const Be=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=Be.minPasswordLength)&&void 0!==f?f:6,Be.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Be.maxPasswordLength),void 0!==Be.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Be.containsLowercaseCharacter),void 0!==Be.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Be.containsUppercaseCharacter),void 0!==Be.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Be.containsNumericCharacter),void 0!==Be.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Be.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(z=null===(A=h.allowedNonAlphanumericCharacters)||void 0===A?void 0:A.join(""))&&void 0!==z?z:"",this.forceUpgradeOnSignin=null!==(oe=h.forceUpgradeOnSignin)&&void 0!==oe&&oe,this.schemaVersion=h.schemaVersion}validatePassword(h){var f,A,z,oe,Be,bt;const Gt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,Gt),this.validatePasswordCharacterOptions(h,Gt),Gt.isValid&&(Gt.isValid=null===(f=Gt.meetsMinPasswordLength)||void 0===f||f),Gt.isValid&&(Gt.isValid=null===(A=Gt.meetsMaxPasswordLength)||void 0===A||A),Gt.isValid&&(Gt.isValid=null===(z=Gt.containsLowercaseLetter)||void 0===z||z),Gt.isValid&&(Gt.isValid=null===(oe=Gt.containsUppercaseLetter)||void 0===oe||oe),Gt.isValid&&(Gt.isValid=null===(Be=Gt.containsNumericCharacter)||void 0===Be||Be),Gt.isValid&&(Gt.isValid=null===(bt=Gt.containsNonAlphanumericCharacter)||void 0===bt||bt),Gt}validatePasswordLengthOptions(h,f){const A=this.customStrengthOptions.minPasswordLength,z=this.customStrengthOptions.maxPasswordLength;A&&(f.meetsMinPasswordLength=h.length>=A),z&&(f.meetsMaxPasswordLength=h.length<=z)}validatePasswordCharacterOptions(h,f){let A;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let z=0;z<h.length;z++)A=h.charAt(z),this.updatePasswordCharacterOptionsStatuses(f,A>="a"&&A<="z",A>="A"&&A<="Z",A>="0"&&A<="9",this.allowedNonAlphanumericCharacters.includes(A))}updatePasswordCharacterOptionsStatuses(h,f,A,z,oe){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=A)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=z)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=oe))}}class Xt{constructor(h,f,A,z){this.app=h,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=A,this.config=z,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mn(this),this.idTokenSubscription=new Mn(this),this.beforeStateQueue=new te(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=z.sdkClientVersion}_initializeWithPersistence(h,f){var A=this;return f&&(this._popupRedirectResolver=Vt(f)),this._initializationPromise=this.queue((0,_.A)(function*(){var z,oe;if(!A._deleted&&(A.persistenceManager=yield Sn.create(A,h),!A._deleted)){if(null!==(z=A._popupRedirectResolver)&&void 0!==z&&z._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch{}yield A.initializeCurrentUser(f),A.lastNotifiedUid=(null===(oe=A.currentUser)||void 0===oe?void 0:oe.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,_.A)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(h){var f=this;return(0,_.A)(function*(){try{const A=yield bn(f,{idToken:h}),z=yield _e._fromGetAccountInfoResponse(f,A,h);yield f.directlySetCurrentUser(z)}catch(A){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",A),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(h){var f=this;return(0,_.A)(function*(){var A;if((0,T._isFirebaseServerApp)(f.app)){const bt=f.app.settings.authIdToken;return bt?new Promise(Gt=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(bt).then(Gt,Gt))}):f.directlySetCurrentUser(null)}const z=yield f.assertedPersistence.getCurrentUser();let oe=z,Be=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const bt=null===(A=f.redirectUser)||void 0===A?void 0:A._redirectEventId,Gt=oe?._redirectEventId,Tn=yield f.tryRedirectSignIn(h);(!bt||bt===Gt)&&Tn?.user&&(oe=Tn.user,Be=!0)}if(!oe)return f.directlySetCurrentUser(null);if(!oe._redirectEventId){if(Be)try{yield f.beforeStateQueue.runMiddleware(oe)}catch(bt){oe=z,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(bt))}return oe?f.reloadAndSetCurrentUserOrClear(oe):f.directlySetCurrentUser(null)}return ce(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===oe._redirectEventId?f.directlySetCurrentUser(oe):f.reloadAndSetCurrentUserOrClear(oe)})()}tryRedirectSignIn(h){var f=this;return(0,_.A)(function*(){let A=null;try{A=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch{yield f._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,_.A)(function*(){try{yield Kr(h)}catch(A){if("auth/network-request-failed"!==A?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function ut(){if(typeof navigator>"u")return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var h=this;return(0,_.A)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,_.A)(function*(){if((0,T._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const A=h?(0,R.Ku)(h):null;return A&&ce(A.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(A&&A._clone(f))})()}_updateCurrentUser(h,f=!1){var A=this;return(0,_.A)(function*(){if(!A._deleted)return h&&ce(A.tenantId===h.tenantId,A,"tenant-id-mismatch"),f||(yield A.beforeStateQueue.runMiddleware(h)),A.queue((0,_.A)(function*(){yield A.directlySetCurrentUser(h),A.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,_.A)(function*(){return(0,T._isFirebaseServerApp)(h.app)?Promise.reject(je(h)):(yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0))})()}setPersistence(h){var f=this;return(0,T._isFirebaseServerApp)(this.app)?Promise.reject(je(this)):this.queue((0,_.A)(function*(){yield f.assertedPersistence.setPersistence(Vt(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var f=this;return(0,_.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const A=f._getPasswordPolicyInternal();return A.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):A.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,_.A)(function*(){const f=yield function ve(I){return Ee.apply(this,arguments)}(h),A=new Xe(f);null===h.tenantId?h._projectPasswordPolicy=A:h._tenantPasswordPolicies[h.tenantId]=A})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new R.FA("auth","Firebase",h())}onAuthStateChanged(h,f,A){return this.registerStateListener(this.authStateSubscription,h,f,A)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,A){return this.registerStateListener(this.idTokenSubscription,h,f,A)}authStateReady(){return new Promise((h,f)=>{if(this.currentUser)h();else{const A=this.onAuthStateChanged(()=>{A(),h()},f)}})}revokeAccessToken(h){var f=this;return(0,_.A)(function*(){if(f.currentUser){const A=yield f.currentUser.getIdToken(),z={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:h,idToken:A};null!=f.tenantId&&(z.tenantId=f.tenantId),yield function me(I,h){return q.apply(this,arguments)}(f,z)}})()}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var A=this;return(0,_.A)(function*(){const z=yield A.getOrInitRedirectPersistenceManager(f);return null===h?z.removeCurrentUser():z.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,_.A)(function*(){if(!f.redirectPersistenceManager){const A=h&&Vt(h)||f._popupRedirectResolver;ce(A,f,"argument-error"),f.redirectPersistenceManager=yield Sn.create(f,[Vt(A._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,_.A)(function*(){var A,z;return f._isInitialized&&(yield f.queue((0,_.A)(function*(){}))),(null===(A=f._currentUser)||void 0===A?void 0:A._redirectEventId)===h?f._currentUser:(null===(z=f.redirectUser)||void 0===z?void 0:z._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,_.A)(function*(){if(h===f.currentUser)return f.queue((0,_.A)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,A,z){if(this._deleted)return()=>{};const oe="function"==typeof f?f:f.next.bind(f);let Be=!1;const bt=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(bt,this,"internal-error"),bt.then(()=>{Be||oe(this.currentUser)}),"function"==typeof f){const Gt=h.addObserver(f,A,z);return()=>{Be=!0,Gt()}}{const Gt=h.addObserver(f);return()=>{Be=!0,Gt()}}}directlySetCurrentUser(h){var f=this;return(0,_.A)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=an(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,_.A)(function*(){var f;const A={"X-Client-Version":h.clientVersion};h.app.options.appId&&(A["X-Firebase-gmpid"]=h.app.options.appId);const z=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();z&&(A["X-Firebase-Client"]=z);const oe=yield h._getAppCheckToken();return oe&&(A["X-Firebase-AppCheck"]=oe),A})()}_getAppCheckToken(){var h=this;return(0,_.A)(function*(){var f;const A=yield null===(f=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return A?.error&&function At(I,...h){ot.logLevel<=v.$b.WARN&&ot.warn(`Auth (${T.SDK_VERSION}): ${I}`,...h)}(`Error while retrieving App Check token: ${A.error}`),A?.token})()}}function Bt(I){return(0,R.Ku)(I)}class Mn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,R.tD)(f=>this.observer=f)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let wn={loadJS:()=>(0,_.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ii(I){return wn.loadJS(I)}function Si(I){return`__${I}${Math.floor(1e6*Math.random())}`}class li{constructor(h){this.type="recaptcha-enterprise",this.auth=Bt(h)}verify(h="verify",f=!1){var A=this;return(0,_.A)(function*(){function oe(){return oe=(0,_.A)(function*(bt){if(!f){if(null==bt.tenantId&&null!=bt._agentRecaptchaConfig)return bt._agentRecaptchaConfig.siteKey;if(null!=bt.tenantId&&void 0!==bt._tenantRecaptchaConfigs[bt.tenantId])return bt._tenantRecaptchaConfigs[bt.tenantId].siteKey}return new Promise(function(){var Gt=(0,_.A)(function*(Tn,$n){Nt(bt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ar=>{if(void 0!==Ar.recaptchaKey){const io=new St(Ar);return null==bt.tenantId?bt._agentRecaptchaConfig=io:bt._tenantRecaptchaConfigs[bt.tenantId]=io,Tn(io.siteKey)}$n(new Error("recaptcha Enterprise site key undefined"))}).catch(Ar=>{$n(Ar)})});return function(Tn,$n){return Gt.apply(this,arguments)}}())}),oe.apply(this,arguments)}function Be(bt,Gt,Tn){const $n=window.grecaptcha;sr($n)?$n.enterprise.ready(()=>{$n.enterprise.execute(bt,{action:h}).then(Ar=>{Gt(Ar)}).catch(()=>{Gt("NO_RECAPTCHA")})}):Tn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((bt,Gt)=>{(function z(bt){return oe.apply(this,arguments)})(A.auth).then(Tn=>{if(!f&&sr(window.grecaptcha))Be(Tn,bt,Gt);else{if(typeof window>"u")return void Gt(new Error("RecaptchaVerifier is only supported in browser"));let $n=function ui(){return wn.recaptchaEnterpriseScript}();0!==$n.length&&($n+=Tn),ii($n).then(()=>{Be(Tn,bt,Gt)}).catch(Ar=>{Gt(Ar)})}}).catch(Tn=>{Gt(Tn)})})})()}}function nr(I,h,f){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,_.A)(function*(I,h,f,A=!1){const z=new li(I);let oe;try{oe=yield z.verify(f)}catch{oe=yield z.verify(f,!0)}const Be=Object.assign({},h);return Object.assign(Be,A?{captchaResp:oe}:{captchaResponse:oe}),Object.assign(Be,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Be,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Be})).apply(this,arguments)}function di(I,h,f,A){return vi.apply(this,arguments)}function vi(){return vi=(0,_.A)(function*(I,h,f,A){var z;if(null!==(z=I._getRecaptchaConfig())&&void 0!==z&&z.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const oe=yield nr(I,h,f,"getOobCode"===f);return A(I,oe)}return A(I,h).catch(function(){var oe=(0,_.A)(function*(Be){if("auth/missing-recaptcha-token"===Be.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const bt=yield nr(I,h,f,"getOobCode"===f);return A(I,bt)}return Promise.reject(Be)});return function(Be){return oe.apply(this,arguments)}}())}),vi.apply(this,arguments)}function Gi(I,h,f){const A=Bt(I);ce(A._canInitEmulator,A,"emulator-config-failed"),ce(/^https?:\/\//.test(h),A,"invalid-emulator-scheme");const z=!!f?.disableWarnings,oe=oo(h),{host:Be,port:bt}=function Yo(I){const h=oo(I),f=/(\/\/)?([^?#/]+)/.exec(I.substr(h.length));if(!f)return{host:"",port:null};const A=f[2].split("@").pop()||"",z=/^(\[[^\]]+\])(:|$)/.exec(A);if(z){const oe=z[1];return{host:oe,port:la(A.substr(oe.length+1))}}{const[oe,Be]=A.split(":");return{host:oe,port:la(Be)}}}(h);A.config.emulator={url:`${oe}//${Be}${null===bt?"":`:${bt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:Be,port:bt,protocol:oe.replace(":",""),options:Object.freeze({disableWarnings:z})}),z||function yo(){function I(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}function oo(I){const h=I.indexOf(":");return h<0?"":I.substr(0,h+1)}function la(I){if(!I)return null;const h=Number(I);return isNaN(h)?null:h}class rr{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return xe("not implemented")}_getIdTokenResponse(h){return xe("not implemented")}_linkToIdToken(h,f){return xe("not implemented")}_getReauthenticationResolver(h){return xe("not implemented")}}function vo(I,h){return xs.apply(this,arguments)}function xs(){return(xs=(0,_.A)(function*(I,h){return Je(I,"POST","/v1/accounts:resetPassword",It(I,h))})).apply(this,arguments)}function Lo(){return(Lo=(0,_.A)(function*(I,h){return Je(I,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function qs(I,h){return da.apply(this,arguments)}function da(){return(da=(0,_.A)(function*(I,h){return Je(I,"POST","/v1/accounts:signUp",h)})).apply(this,arguments)}function Pr(){return(Pr=(0,_.A)(function*(I,h){return Je(I,"POST","/v1/accounts:update",It(I,h))})).apply(this,arguments)}function Ui(I,h){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithPassword",It(I,h))})).apply(this,arguments)}function Cr(I,h){return fs.apply(this,arguments)}function fs(){return(fs=(0,_.A)(function*(I,h){return Je(I,"POST","/v1/accounts:sendOobCode",It(I,h))})).apply(this,arguments)}function Xr(){return(Xr=(0,_.A)(function*(I,h){return Cr(I,h)})).apply(this,arguments)}function Uo(I,h){return hi.apply(this,arguments)}function hi(){return(hi=(0,_.A)(function*(I,h){return Cr(I,h)})).apply(this,arguments)}function Hr(I,h){return ei.apply(this,arguments)}function ei(){return(ei=(0,_.A)(function*(I,h){return Cr(I,h)})).apply(this,arguments)}function dn(){return(dn=(0,_.A)(function*(I,h){return Cr(I,h)})).apply(this,arguments)}function ps(){return(ps=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithEmailLink",It(I,h))})).apply(this,arguments)}function gs(){return(gs=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithEmailLink",It(I,h))})).apply(this,arguments)}class Xs extends rr{constructor(h,f,A,z=null){super("password",A),this._email=h,this._password=f,this._tenantId=z}static _fromEmailAndPassword(h,f){return new Xs(h,f,"password")}static _fromEmailAndCode(h,f,A=null){return new Xs(h,f,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,_.A)(function*(){switch(f.signInMethod){case"password":return di(h,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ui);case"emailLink":return function si(I,h){return ps.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:ae(h,"internal-error")}})()}_linkToIdToken(h,f){var A=this;return(0,_.A)(function*(){switch(A.signInMethod){case"password":return di(h,{idToken:f,returnSecureToken:!0,email:A._email,password:A._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qs);case"emailLink":return function ks(I,h){return gs.apply(this,arguments)}(h,{idToken:f,email:A._email,oobCode:A._password});default:ae(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Pi(I,h){return es.apply(this,arguments)}function es(){return(es=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithIdp",It(I,h))})).apply(this,arguments)}class Bi extends rr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new Bi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):ae("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:A,signInMethod:z}=f,oe=(0,re.Tt)(f,["providerId","signInMethod"]);if(!A||!z)return null;const Be=new Bi(A,z);return Be.idToken=oe.idToken||void 0,Be.accessToken=oe.accessToken||void 0,Be.secret=oe.secret,Be.nonce=oe.nonce,Be.pendingToken=oe.pendingToken||null,Be}_getIdTokenResponse(h){return Pi(h,this.buildRequest())}_linkToIdToken(h,f){const A=this.buildRequest();return A.idToken=f,Pi(h,A)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Pi(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,R.Am)(f)}return h}}function Fs(){return(Fs=(0,_.A)(function*(I,h){return Je(I,"POST","/v1/accounts:sendVerificationCode",It(I,h))})).apply(this,arguments)}function Bo(){return(Bo=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithPhoneNumber",It(I,h))})).apply(this,arguments)}function Mi(){return(Mi=(0,_.A)(function*(I,h){const f=yield sn(I,"POST","/v1/accounts:signInWithPhoneNumber",It(I,h));if(f.temporaryProof)throw In(I,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Eo={USER_NOT_FOUND:"user-not-found"};function $i(){return($i=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithPhoneNumber",It(I,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Eo)})).apply(this,arguments)}class ms extends rr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new ms({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new ms({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function ji(I,h){return Bo.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function ns(I,h){return Mi.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ao(I,h){return $i.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:A,verificationCode:z}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:A,code:z}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:A,phoneNumber:z,temporaryProof:oe}=h;return A||f||z||oe?new ms({verificationId:f,verificationCode:A,phoneNumber:z,temporaryProof:oe}):null}}class Ys{constructor(h){var f,A,z,oe,Be,bt;const Gt=(0,R.I9)((0,R.hp)(h)),Tn=null!==(f=Gt.apiKey)&&void 0!==f?f:null,$n=null!==(A=Gt.oobCode)&&void 0!==A?A:null,Ar=function Vs(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(z=Gt.mode)&&void 0!==z?z:null);ce(Tn&&$n&&Ar,"argument-error"),this.apiKey=Tn,this.operation=Ar,this.code=$n,this.continueUrl=null!==(oe=Gt.continueUrl)&&void 0!==oe?oe:null,this.languageCode=null!==(Be=Gt.languageCode)&&void 0!==Be?Be:null,this.tenantId=null!==(bt=Gt.tenantId)&&void 0!==bt?bt:null}static parseLink(h){const f=function Jo(I){const h=(0,R.I9)((0,R.hp)(I)).link,f=h?(0,R.I9)((0,R.hp)(h)).deep_link_id:null,A=(0,R.I9)((0,R.hp)(I)).deep_link_id;return(A?(0,R.I9)((0,R.hp)(A)).link:null)||A||f||h||I}(h);try{return new Ys(f)}catch{return null}}}let Ls=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(f,A){return Xs._fromEmailAndPassword(f,A)}static credentialWithLink(f,A){const z=Ys.parseLink(A);return ce(z,"argument-error"),Xs._fromEmailAndCode(f,z.code,z.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class Ci{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Io extends Ci{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Zo extends Io{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return ce("providerId"in f&&"signInMethod"in f,"argument-error"),Bi._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ce(h.idToken||h.accessToken,"argument-error"),Bi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Zo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Zo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:A,oauthTokenSecret:z,pendingToken:oe,nonce:Be,providerId:bt}=h;if(!A&&!z&&!f&&!oe||!bt)return null;try{return new Zo(bt)._credential({idToken:f,accessToken:A,nonce:Be,pendingToken:oe})}catch{return null}}}let wi=(()=>{class I extends Io{constructor(){super("facebook.com")}static credential(f){return Bi._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return I.credential(f.oauthAccessToken)}catch{return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),yr=(()=>{class I extends Io{constructor(){super("google.com"),this.addScope("profile")}static credential(f,A){return Bi._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:A})}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:A,oauthAccessToken:z}=f;if(!A&&!z)return null;try{return I.credential(A,z)}catch{return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),Us=(()=>{class I extends Io{constructor(){super("github.com")}static credential(f){return Bi._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return I.credential(f.oauthAccessToken)}catch{return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class Yr extends rr{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Pi(h,this.buildRequest())}_linkToIdToken(h,f){const A=this.buildRequest();return A.idToken=f,Pi(h,A)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Pi(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:A,signInMethod:z,pendingToken:oe}=f;return A&&z&&oe&&A===z?new Yr(A,oe):null}static _create(h,f){return new Yr(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ar extends Ci{constructor(h){ce(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ar.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ar.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=Yr.fromJSON(h);return ce(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:A}=h;if(!f||!A)return null;try{return Yr._create(A,f)}catch{return null}}}let ds=(()=>{class I extends Io{constructor(){super("twitter.com")}static credential(f,A){return Bi._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:A})}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:A,oauthTokenSecret:z}=f;if(!A||!z)return null;try{return I.credential(A,z)}catch{return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function _s(I,h){return Co.apply(this,arguments)}function Co(){return(Co=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signUp",It(I,h))})).apply(this,arguments)}class xi{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,A,z=!1){return(0,_.A)(function*(){const oe=yield _e._fromIdTokenResponse(h,A,z),Be=H(A);return new xi({user:oe,providerId:Be,_tokenResponse:A,operationType:f})})()}static _forOperation(h,f,A){return(0,_.A)(function*(){yield h._updateTokensIfNecessary(A,!0);const z=H(A);return new xi({user:h,providerId:z,_tokenResponse:A,operationType:f})})()}}function H(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function W(I){return x.apply(this,arguments)}function x(){return(x=(0,_.A)(function*(I){var h;if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const f=Bt(I);if(yield f._initializationPromise,null!==(h=f.currentUser)&&void 0!==h&&h.isAnonymous)return new xi({user:f.currentUser,providerId:null,operationType:"signIn"});const A=yield _s(f,{returnSecureToken:!0}),z=yield xi._fromIdTokenResponse(f,"signIn",A,!0);return yield f._updateCurrentUser(z.user),z})).apply(this,arguments)}class Z extends R.g{constructor(h,f,A,z){var oe;super(f.code,f.message),this.operationType=A,this.user=z,Object.setPrototypeOf(this,Z.prototype),this.customData={appName:h.name,tenantId:null!==(oe=h.tenantId)&&void 0!==oe?oe:void 0,_serverResponse:f.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(h,f,A,z){return new Z(h,f,A,z)}}function Ae(I,h,f,A){return("reauthenticate"===h?f._getReauthenticationResolver(I):f._getIdTokenResponse(I)).catch(oe=>{throw"auth/multi-factor-auth-required"===oe.code?Z._fromErrorAndOperation(I,oe,h,A):oe})}function pn(I){return new Set(I.map(({providerId:h})=>h).filter(h=>!!h))}function Jn(I,h){return ys.apply(this,arguments)}function ys(){return ys=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I);yield Ts(!0,f,h);const{providerUserInfo:A}=yield function tr(I,h){return An.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),z=pn(A||[]);return f.providerData=f.providerData.filter(oe=>z.has(oe.providerId)),z.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),ys.apply(this,arguments)}function Js(I,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,_.A)(function*(I,h,f=!1){const A=yield zt(I,h._linkToIdToken(I.auth,yield I.getIdToken()),f);return xi._forOperation(I,"link",A)})).apply(this,arguments)}function Ts(I,h,f){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,_.A)(function*(I,h,f){yield Kr(h);const z=!1===I?"provider-already-linked":"no-such-provider";ce(pn(h.providerData).has(f)===I,h.auth,z)})).apply(this,arguments)}function jo(I,h){return fa.apply(this,arguments)}function fa(){return(fa=(0,_.A)(function*(I,h,f=!1){const{auth:A}=I;if((0,T._isFirebaseServerApp)(A.app))return Promise.reject(je(A));const z="reauthenticate";try{const oe=yield zt(I,Ae(A,z,h,I),f);ce(oe.idToken,A,"internal-error");const Be=Nn(oe.idToken);ce(Be,A,"internal-error");const{sub:bt}=Be;return ce(I.uid===bt,A,"user-mismatch"),xi._forOperation(I,z,oe)}catch(oe){throw"auth/user-not-found"===oe?.code&&ae(A,"user-mismatch"),oe}})).apply(this,arguments)}function Jr(I,h){return Da.apply(this,arguments)}function Da(){return(Da=(0,_.A)(function*(I,h,f=!1){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const A="signIn",z=yield Ae(I,A,h),oe=yield xi._fromIdTokenResponse(I,A,z);return f||(yield I._updateCurrentUser(oe.user)),oe})).apply(this,arguments)}function pa(I,h){return Va.apply(this,arguments)}function Va(){return(Va=(0,_.A)(function*(I,h){return Jr(Bt(I),h)})).apply(this,arguments)}function La(I,h){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I);return yield Ts(!1,f,h.providerId),Js(f,h)})).apply(this,arguments)}function Ua(I,h){return ga.apply(this,arguments)}function ga(){return(ga=(0,_.A)(function*(I,h){return jo((0,R.Ku)(I),h)})).apply(this,arguments)}function wo(){return(wo=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithCustomToken",It(I,h))})).apply(this,arguments)}function Aa(I,h){return ea.apply(this,arguments)}function ea(){return ea=(0,_.A)(function*(I,h){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const f=Bt(I),A=yield function $o(I,h){return wo.apply(this,arguments)}(f,{token:h,returnSecureToken:!0}),z=yield xi._fromIdTokenResponse(f,"signIn",A);return yield f._updateCurrentUser(z.user),z}),ea.apply(this,arguments)}class To{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?lr._fromServerResponse(h,f):"totpInfo"in f?Gr._fromServerResponse(h,f):ae(h,"internal-error")}}class lr extends To{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new lr(f)}}class Gr extends To{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new Gr(f)}}function ni(I,h,f){var A;ce((null===(A=f.url)||void 0===A?void 0:A.length)>0,I,"invalid-continue-uri"),ce(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ce(f.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(ce(f.android.packageName.length>0,I,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function Ri(I){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,_.A)(function*(I){const h=Bt(I);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function ma(I,h,f){return vs.apply(this,arguments)}function vs(){return(vs=(0,_.A)(function*(I,h,f){const A=Bt(I),z={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};f&&ni(A,z,f),yield di(A,z,"getOobCode",Uo)})).apply(this,arguments)}function Ki(I,h,f){return ec.apply(this,arguments)}function ec(){return ec=(0,_.A)(function*(I,h,f){yield vo((0,R.Ku)(I),{oobCode:h,newPassword:f}).catch(function(){var A=(0,_.A)(function*(z){throw"auth/password-does-not-meet-requirements"===z.code&&Ri(I),z});return function(z){return A.apply(this,arguments)}}())}),ec.apply(this,arguments)}function Tc(I,h){return Do.apply(this,arguments)}function Do(){return Do=(0,_.A)(function*(I,h){yield function Rs(I,h){return Pr.apply(this,arguments)}((0,R.Ku)(I),{oobCode:h})}),Do.apply(this,arguments)}function Ao(I,h){return Y.apply(this,arguments)}function Y(){return(Y=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I),A=yield vo(f,{oobCode:h}),z=A.requestType;switch(ce(z,f,"internal-error"),z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ce(A.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ce(A.mfaInfo,f,"internal-error");default:ce(A.email,f,"internal-error")}let oe=null;return A.mfaInfo&&(oe=To._fromServerResponse(Bt(f),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:oe},operation:z}})).apply(this,arguments)}function C(I,h){return D.apply(this,arguments)}function D(){return(D=(0,_.A)(function*(I,h){const{data:f}=yield Ao((0,R.Ku)(I),h);return f.email})).apply(this,arguments)}function L(I,h,f){return K.apply(this,arguments)}function K(){return(K=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const A=Bt(I),Be=yield di(A,{returnSecureToken:!0,email:h,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_s).catch(Gt=>{throw"auth/password-does-not-meet-requirements"===Gt.code&&Ri(I),Gt}),bt=yield xi._fromIdTokenResponse(A,"signIn",Be);return yield A._updateCurrentUser(bt.user),bt})).apply(this,arguments)}function he(I,h,f){return(0,T._isFirebaseServerApp)(I.app)?Promise.reject(je(I)):pa((0,R.Ku)(I),Ls.credential(h,f)).catch(function(){var A=(0,_.A)(function*(z){throw"auth/password-does-not-meet-requirements"===z.code&&Ri(I),z});return function(z){return A.apply(this,arguments)}}())}function Pe(I,h,f){return Le.apply(this,arguments)}function Le(){return(Le=(0,_.A)(function*(I,h,f){const A=Bt(I),z={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function oe(Be,bt){ce(bt.handleCodeInApp,A,"argument-error"),bt&&ni(A,Be,bt)})(z,f),yield di(A,z,"getOobCode",Hr)})).apply(this,arguments)}function Et(I,h){const f=Ys.parseLink(h);return"EMAIL_SIGNIN"===f?.operation}function Ct(I,h,f){return mn.apply(this,arguments)}function mn(){return(mn=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const A=(0,R.Ku)(I),z=Ls.credentialWithLink(h,f||un());return ce(z._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),pa(A,z)})).apply(this,arguments)}function hr(){return(hr=(0,_.A)(function*(I,h){return Je(I,"POST","/v1/accounts:createAuthUri",It(I,h))})).apply(this,arguments)}function zn(I,h){return Fn.apply(this,arguments)}function Fn(){return Fn=(0,_.A)(function*(I,h){const A={identifier:h,continueUri:jt()?un():"http://localhost"},{signinMethods:z}=yield function hn(I,h){return hr.apply(this,arguments)}((0,R.Ku)(I),A);return z||[]}),Fn.apply(this,arguments)}function Hn(I,h){return Tr.apply(this,arguments)}function Tr(){return Tr=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I),z={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};h&&ni(f.auth,z,h);const{email:oe}=yield function Qs(I,h){return Xr.apply(this,arguments)}(f.auth,z);oe!==I.email&&(yield I.reload())}),Tr.apply(this,arguments)}function oi(I,h,f){return Pn.apply(this,arguments)}function Pn(){return Pn=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I),oe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:h};f&&ni(A.auth,oe,f);const{email:Be}=yield function os(I,h){return dn.apply(this,arguments)}(A.auth,oe);Be!==I.email&&(yield I.reload())}),Pn.apply(this,arguments)}function ki(){return(ki=(0,_.A)(function*(I,h){return Je(I,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function bo(I,h){return rs.apply(this,arguments)}function rs(){return rs=(0,_.A)(function*(I,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const A=(0,R.Ku)(I),oe={idToken:yield A.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},Be=yield zt(A,function Es(I,h){return ki.apply(this,arguments)}(A.auth,oe));A.displayName=Be.displayName||null,A.photoURL=Be.photoUrl||null;const bt=A.providerData.find(({providerId:Gt})=>"password"===Gt);bt&&(bt.displayName=A.displayName,bt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(Be)}),rs.apply(this,arguments)}function as(I,h){const f=(0,R.Ku)(I);return(0,T._isFirebaseServerApp)(f.auth.app)?Promise.reject(je(f.auth)):Ho(f,h,null)}function cs(I,h){return Ho((0,R.Ku)(I),null,h)}function Ho(I,h,f){return uo.apply(this,arguments)}function uo(){return uo=(0,_.A)(function*(I,h,f){const{auth:A}=I,oe={idToken:yield I.getIdToken(),returnSecureToken:!0};h&&(oe.email=h),f&&(oe.password=f);const Be=yield zt(I,function wr(I,h){return Lo.apply(this,arguments)}(A,oe));yield I._updateTokensIfNecessary(Be,!0)}),uo.apply(this,arguments)}class qi{constructor(h,f,A={}){this.isNewUser=h,this.providerId=f,this.profile=A}}class Os extends qi{constructor(h,f,A,z){super(h,f,A),this.username=z}}class P extends qi{constructor(h,f){super(h,"facebook.com",f)}}class X extends Os{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class N extends qi{constructor(h,f){super(h,"google.com",f)}}class B extends Os{constructor(h,f,A){super(h,"twitter.com",f,A)}}function de(I){const{user:h,_tokenResponse:f}=I;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function eo(I){var h,f;if(!I)return null;const{providerId:A}=I,z=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},oe=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!A&&I?.idToken){const Be=null===(f=null===(h=Nn(I.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(Be)return new qi(oe,"anonymous"!==Be&&"custom"!==Be?Be:null)}if(!A)return null;switch(A){case"facebook.com":return new P(oe,z);case"github.com":return new X(oe,z);case"google.com":return new N(oe,z);case"twitter.com":return new B(oe,z,I.screenName||null);case"custom":case"anonymous":return new qi(oe,null);default:return new qi(oe,A,z)}}(f)}class _r{constructor(h,f,A){this.type=h,this.credential=f,this.user=A}static _fromIdtoken(h,f){return new _r("enroll",h,f)}static _fromMfaPendingCredential(h){return new _r("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,A;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return _r._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(A=h.multiFactorSession)&&void 0!==A&&A.idToken)return _r._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Ti{constructor(h,f,A){this.session=h,this.hints=f,this.signInResolver=A}static _fromError(h,f){const A=Bt(h),z=f.customData._serverResponse,oe=(z.mfaInfo||[]).map(bt=>To._fromServerResponse(A,bt));ce(z.mfaPendingCredential,A,"internal-error");const Be=_r._fromMfaPendingCredential(z.mfaPendingCredential);return new Ti(Be,oe,function(){var bt=(0,_.A)(function*(Gt){const Tn=yield Gt._process(A,Be);delete z.mfaInfo,delete z.mfaPendingCredential;const $n=Object.assign(Object.assign({},z),{idToken:Tn.idToken,refreshToken:Tn.refreshToken});switch(f.operationType){case"signIn":const Ar=yield xi._fromIdTokenResponse(A,f.operationType,$n);return yield A._updateCurrentUser(Ar.user),Ar;case"reauthenticate":return ce(f.user,A,"internal-error"),xi._forOperation(f.user,f.operationType,$n);default:ae(A,"internal-error")}});return function(Gt){return bt.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,_.A)(function*(){return f.signInResolver(h)})()}}function pi(I,h){var f;const A=(0,R.Ku)(I),z=h;return ce(h.customData.operationType,A,"argument-error"),ce(null===(f=z.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,A,"argument-error"),Ti._fromError(A,z)}class Zn{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(A=>To._fromServerResponse(h.auth,A)))})}static _fromUser(h){return new Zn(h)}getSession(){var h=this;return(0,_.A)(function*(){return _r._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,f){var A=this;return(0,_.A)(function*(){const z=h,oe=yield A.getSession(),Be=yield zt(A.user,z._process(A.user.auth,oe,f));return yield A.user._updateTokensIfNecessary(Be),A.user.reload()})()}unenroll(h){var f=this;return(0,_.A)(function*(){const A="string"==typeof h?h:h.uid,z=yield f.user.getIdToken();try{const oe=yield zt(f.user,function lo(I,h){return Je(I,"POST","/v2/accounts/mfaEnrollment:withdraw",It(I,h))}(f.user.auth,{idToken:z,mfaEnrollmentId:A}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Be})=>Be!==A),yield f.user._updateTokensIfNecessary(oe),yield f.user.reload()}catch(oe){throw oe}})()}}const Go=new WeakMap;function El(I){const h=(0,R.Ku)(I);return Go.has(h)||Go.set(h,Zn._fromUser(h)),Go.get(h)}const ai="__sak";class jn{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ai,"1"),this.storage.removeItem(ai),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const _a=(()=>{class I extends jn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,A)=>this.onStorageEvent(f,A),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kt(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const A of Object.keys(this.listeners)){const z=this.storage.getItem(A),oe=this.localCache[A];z!==oe&&f(A,oe,z)}}onStorageEvent(f,A=!1){if(!f.key)return void this.forAllChangedKeys((bt,Gt,Tn)=>{this.notifyListeners(bt,Tn)});const z=f.key;A?this.detachListener():this.stopPolling();const oe=()=>{const bt=this.storage.getItem(z);!A&&this.localCache[z]===bt||this.notifyListeners(z,bt)},Be=this.storage.getItem(z);!function Ye(){return(0,R.lT)()&&10===document.documentMode}()||Be===f.newValue||f.newValue===f.oldValue?oe():setTimeout(oe,10)}notifyListeners(f,A){this.localCache[f]=A;const z=this.listeners[f];if(z)for(const oe of Array.from(z))oe(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,A,z)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:A,newValue:z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(A)}_removeListener(f,A){this.listeners[f]&&(this.listeners[f].delete(A),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,A){var z=()=>super._set,oe=this;return(0,_.A)(function*(){yield z().call(oe,f,A),oe.localCache[f]=JSON.stringify(A)})()}_get(f){var A=()=>super._get,z=this;return(0,_.A)(function*(){const oe=yield A().call(z,f);return z.localCache[f]=JSON.stringify(oe),oe})()}_remove(f){var A=()=>super._remove,z=this;return(0,_.A)(function*(){yield A().call(z,f),delete z.localCache[f]})()}}return I.type="LOCAL",I})(),ta=(()=>{class I extends jn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,A){}_removeListener(f,A){}}return I.type="SESSION",I})();let Is=(()=>{class I{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const A=this.receivers.find(oe=>oe.isListeningto(f));if(A)return A;const z=new I(f);return this.receivers.push(z),z}isListeningto(f){return this.eventTarget===f}handleEvent(f){var A=this;return(0,_.A)(function*(){const z=f,{eventId:oe,eventType:Be,data:bt}=z.data,Gt=A.handlersMap[Be];if(!Gt?.size)return;z.ports[0].postMessage({status:"ack",eventId:oe,eventType:Be});const Tn=Array.from(Gt).map(function(){var Ar=(0,_.A)(function*(io){return io(z.origin,bt)});return function(io){return Ar.apply(this,arguments)}}()),$n=yield function nc(I){return Promise.all(I.map(function(){var h=(0,_.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(A){return{fulfilled:!1,reason:A}}});return function(f){return h.apply(this,arguments)}}()))}(Tn);z.ports[0].postMessage({status:"done",eventId:oe,eventType:Be,response:$n})})()}_subscribe(f,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(A)}_unsubscribe(f,A){this.handlersMap[f]&&A&&this.handlersMap[f].delete(A),(!A||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function Qn(I="",h=10){let f="";for(let A=0;A<h;A++)f+=Math.floor(10*Math.random());return I+f}class rc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,A=50){var z=this;return(0,_.A)(function*(){const oe=typeof MessageChannel<"u"?new MessageChannel:null;if(!oe)throw new Error("connection_unavailable");let Be,bt;return new Promise((Gt,Tn)=>{const $n=Qn("",20);oe.port1.start();const Ar=setTimeout(()=>{Tn(new Error("unsupported_event"))},A);bt={messageChannel:oe,onMessage(io){const Ra=io;if(Ra.data.eventId===$n)switch(Ra.data.status){case"ack":clearTimeout(Ar),Be=setTimeout(()=>{Tn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Be),Gt(Ra.data.response);break;default:clearTimeout(Ar),clearTimeout(Be),Tn(new Error("invalid_response"))}}},z.handlers.add(bt),oe.port1.addEventListener("message",bt.onMessage),z.target.postMessage({eventType:h,eventId:$n,data:f},[oe.port2])}).finally(()=>{bt&&z.removeMessageHandler(bt)})})()}}function mi(){return window}function ba(){return typeof mi().WorkerGlobalScope<"u"&&"function"==typeof mi().importScripts}function Di(){return(Di=(0,_.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const As="firebaseLocalStorageDb",na="firebaseLocalStorage",qc="fbase_key";class to{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Ba(I,h){return I.transaction([na],h?"readwrite":"readonly").objectStore(na)}function Qc(){const I=indexedDB.open(As,1);return new Promise((h,f)=>{I.addEventListener("error",()=>{f(I.error)}),I.addEventListener("upgradeneeded",()=>{const A=I.result;try{A.createObjectStore(na,{keyPath:qc})}catch(z){f(z)}}),I.addEventListener("success",(0,_.A)(function*(){const A=I.result;A.objectStoreNames.contains(na)?h(A):(A.close(),yield function ic(){const I=indexedDB.deleteDatabase(As);return new to(I).toPromise()}(),h(yield Qc()))}))})}function Pu(I,h,f){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,_.A)(function*(I,h,f){const A=Ba(I,!0).put({[qc]:h,value:f});return new to(A).toPromise()})).apply(this,arguments)}function ja(){return(ja=(0,_.A)(function*(I,h){const f=Ba(I,!1).get(h),A=yield new to(f).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function Cl(I,h){const f=Ba(I,!0).delete(h);return new to(f).toPromise()}const wl=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,_.A)(function*(){return f.db||(f.db=yield Qc()),f.db})()}_withRetries(f){var A=this;return(0,_.A)(function*(){let z=0;for(;;)try{const oe=yield A._openDb();return yield f(oe)}catch(oe){if(z++>3)throw oe;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,_.A)(function*(){return ba()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,_.A)(function*(){f.receiver=Is._getInstance(function Ds(){return ba()?self:null}()),f.receiver._subscribe("keyChanged",function(){var A=(0,_.A)(function*(z,oe){return{keyProcessed:(yield f._poll()).includes(oe.key)}});return function(z,oe){return A.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var A=(0,_.A)(function*(z,oe){return["keyChanged"]});return function(z,oe){return A.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,_.A)(function*(){var A,z;if(f.activeServiceWorker=yield function Sa(){return Di.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new rc(f.activeServiceWorker);const oe=yield f.sender._send("ping",{},800);oe&&null!==(A=oe[0])&&void 0!==A&&A.fulfilled&&null!==(z=oe[0])&&void 0!==z&&z.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var A=this;return(0,_.A)(function*(){if(A.sender&&A.activeServiceWorker&&function Su(){var I;return(null===(I=navigator?.serviceWorker)||void 0===I?void 0:I.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:f},A.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.A)(function*(){try{if(!indexedDB)return!1;const f=yield Qc();return yield Pu(f,ai,"1"),yield Cl(f,ai),!0}catch{}return!1})()}_withPendingWrite(f){var A=this;return(0,_.A)(function*(){A.pendingWrites++;try{yield f()}finally{A.pendingWrites--}})()}_set(f,A){var z=this;return(0,_.A)(function*(){return z._withPendingWrite((0,_.A)(function*(){return yield z._withRetries(oe=>Pu(oe,f,A)),z.localCache[f]=A,z.notifyServiceWorker(f)}))})()}_get(f){var A=this;return(0,_.A)(function*(){const z=yield A._withRetries(oe=>function Mu(I,h){return ja.apply(this,arguments)}(oe,f));return A.localCache[f]=z,z})()}_remove(f){var A=this;return(0,_.A)(function*(){return A._withPendingWrite((0,_.A)(function*(){return yield A._withRetries(z=>Cl(z,f)),delete A.localCache[f],A.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,_.A)(function*(){const A=yield f._withRetries(Be=>{const bt=Ba(Be,!1).getAll();return new to(bt).toPromise()});if(!A)return[];if(0!==f.pendingWrites)return[];const z=[],oe=new Set;if(0!==A.length)for(const{fbase_key:Be,value:bt}of A)oe.add(Be),JSON.stringify(f.localCache[Be])!==JSON.stringify(bt)&&(f.notifyListeners(Be,bt),z.push(Be));for(const Be of Object.keys(f.localCache))f.localCache[Be]&&!oe.has(Be)&&(f.notifyListeners(Be,null),z.push(Be));return z})()}notifyListeners(f,A){this.localCache[f]=A;const z=this.listeners[f];if(z)for(const oe of Array.from(z))oe(A)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,_.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(A)}_removeListener(f,A){this.listeners[f]&&(this.listeners[f].delete(A),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})(),Tl=1e12;class Ou{constructor(h){this.auth=h,this.counter=Tl,this._widgets=new Map}render(h,f){const A=this.counter;return this._widgets.set(A,new Nu(h,this.auth.name,f||{})),this.counter++,A}reset(h){var f;const A=h||Tl;null===(f=this._widgets.get(A))||void 0===f||f.delete(),this._widgets.delete(A)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Tl))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,_.A)(function*(){var A;return null===(A=f._widgets.get(h||Tl))||void 0===A||A.execute(),""})()}}class Nu{constructor(h,f,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const z="string"==typeof h?document.getElementById(h):h;ce(z,"argument-error",{appName:f}),this.container=z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function E(I){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<I;A++)h.push(f.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const M=Si("rcb"),w=new rn(3e4,6e4);class O{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=mi().grecaptcha)||void 0===h||!h.render)}load(h,f=""){return ce(function j(I){return I.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I)}(f),h,"argument-error"),this.shouldResolveImmediately(f)&&Kn(mi().grecaptcha)?Promise.resolve(mi().grecaptcha):new Promise((A,z)=>{const oe=mi().setTimeout(()=>{z(we(h,"network-request-failed"))},w.get());mi()[M]=()=>{mi().clearTimeout(oe),delete mi()[M];const bt=mi().grecaptcha;if(!bt||!Kn(bt))return void z(we(h,"internal-error"));const Gt=bt.render;bt.render=(Tn,$n)=>{const Ar=Gt(Tn,$n);return this.counter++,Ar},this.hostLanguage=f,A(bt)},ii(`${function Er(){return wn.recaptchaV2Script}()}?${(0,R.Am)({onload:M,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(oe),z(we(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!(null===(f=mi().grecaptcha)||void 0===f||!f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ee{load(h){return(0,_.A)(function*(){return new Ou(h)})()}clearedOneInstance(){}}const Te="recaptcha",Dt={theme:"light",type:"image"};class pt{constructor(h,f,A=Object.assign({},Dt)){this.parameters=A,this.type=Te,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bt(h),this.isInvisible="invisible"===this.parameters.size,ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const z="string"==typeof f?document.getElementById(f):f;ce(z,this.auth,"argument-error"),this.container=z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ee:new O,this.validateStartingState()}verify(){var h=this;return(0,_.A)(function*(){h.assertNotDestroyed();const f=yield h.render(),A=h.getAssertedRecaptcha();return A.getResponse(f)||new Promise(oe=>{const Be=bt=>{bt&&(h.tokenChangeListeners.delete(Be),oe(bt))};h.tokenChangeListeners.add(Be),h.isInvisible&&A.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(A=>A(f)),"function"==typeof h)h(f);else if("string"==typeof h){const A=mi()[h];"function"==typeof A&&A(f)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,_.A)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const A=document.createElement("div");f.appendChild(A),f=A}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,_.A)(function*(){ce(jt()&&!ba(),h.auth,"internal-error"),yield function _n(){let I=null;return new Promise(h=>{"complete"!==document.readyState?(I=()=>h(),window.addEventListener("load",I)):h()}).catch(h=>{throw I&&window.removeEventListener("load",I),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function _t(I){return Zr.apply(this,arguments)}(h.auth);ce(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class er{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=ms._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function dr(I,h,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const A=Bt(I),z=yield Wo(A,h,(0,R.Ku)(f));return new er(z,oe=>pa(A,oe))})).apply(this,arguments)}function Ac(I,h,f){return ra.apply(this,arguments)}function ra(){return(ra=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);yield Ts(!1,A,"phone");const z=yield Wo(A.auth,h,(0,R.Ku)(f));return new er(z,oe=>La(A,oe))})).apply(this,arguments)}function ho(I,h,f){return js.apply(this,arguments)}function js(){return(js=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);if((0,T._isFirebaseServerApp)(A.auth.app))return Promise.reject(je(A.auth));const z=yield Wo(A.auth,h,(0,R.Ku)(f));return new er(z,oe=>Ua(A,oe))})).apply(this,arguments)}function Wo(I,h,f){return xu.apply(this,arguments)}function xu(){return xu=(0,_.A)(function*(I,h,f){var A;const z=yield f.verify();try{let oe;if(ce("string"==typeof z,I,"argument-error"),ce(f.type===Te,I,"argument-error"),oe="string"==typeof h?{phoneNumber:h}:h,"session"in oe){const Be=oe.session;if("phoneNumber"in oe)return ce("enroll"===Be.type,I,"internal-error"),(yield function is(I,h){return Je(I,"POST","/v2/accounts/mfaEnrollment:start",It(I,h))}(I,{idToken:Be.credential,phoneEnrollmentInfo:{phoneNumber:oe.phoneNumber,recaptchaToken:z}})).phoneSessionInfo.sessionInfo;{ce("signin"===Be.type,I,"internal-error");const bt=(null===(A=oe.multiFactorHint)||void 0===A?void 0:A.uid)||oe.multiFactorUid;return ce(bt,I,"missing-multi-factor-info"),(yield function Ru(I,h){return Je(I,"POST","/v2/accounts/mfaSignIn:start",It(I,h))}(I,{mfaPendingCredential:Be.credential,mfaEnrollmentId:bt,phoneSignInInfo:{recaptchaToken:z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Be}=yield function ts(I,h){return Fs.apply(this,arguments)}(I,{phoneNumber:oe.phoneNumber,recaptchaToken:z});return Be}}finally{f._reset()}}),xu.apply(this,arguments)}function ku(I,h){return $a.apply(this,arguments)}function $a(){return($a=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I);if((0,T._isFirebaseServerApp)(f.auth.app))return Promise.reject(je(f.auth));yield Js(f,h)})).apply(this,arguments)}let Yc=(()=>{class I{constructor(f){this.providerId=I.PROVIDER_ID,this.auth=Bt(f)}verifyPhoneNumber(f,A){return Wo(this.auth,f,(0,R.Ku)(A))}static credential(f,A){return ms._fromVerification(f,A)}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:A,temporaryProof:z}=f;return A&&z?ms._fromTokenResponse(A,z):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function Mr(I,h){return h?Vt(h):(ce(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class Ha extends rr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Pi(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Pi(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Pi(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function Jc(I){return Jr(I.auth,new Ha(I),I.bypassAuthState)}function $s(I){const{auth:h,user:f}=I;return ce(f,h,"internal-error"),jo(f,new Ha(I),I.bypassAuthState)}function Id(I){return sc.apply(this,arguments)}function sc(){return(sc=(0,_.A)(function*(I){const{auth:h,user:f}=I;return ce(f,h,"internal-error"),Js(f,new Ha(I),I.bypassAuthState)})).apply(this,arguments)}class oc{constructor(h,f,A,z,oe=!1){this.auth=h,this.resolver=A,this.user=z,this.bypassAuthState=oe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,_.A)(function*(A,z){h.pendingPromise={resolve:A,reject:z};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(oe){h.reject(oe)}});return function(A,z){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,_.A)(function*(){const{urlResponse:A,sessionId:z,postBody:oe,tenantId:Be,error:bt,type:Gt}=h;if(bt)return void f.reject(bt);const Tn={auth:f.auth,requestUri:A,sessionId:z,tenantId:Be||void 0,postBody:oe||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Gt)(Tn))}catch($n){f.reject($n)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Jc;case"linkViaPopup":case"linkViaRedirect":return Id;case"reauthViaPopup":case"reauthViaRedirect":return $s;default:ae(this.auth,"internal-error")}}resolve(h){xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ko=new rn(2e3,1e4);function ef(I,h,f){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(we(I,"operation-not-supported-in-this-environment"));const A=Bt(I);Ue(I,h,Ci);const z=Mr(A,f);return new Al(A,"signInViaPopup",h,z).executeNotNull()})).apply(this,arguments)}function Dl(I,h,f){return no.apply(this,arguments)}function no(){return(no=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);if((0,T._isFirebaseServerApp)(A.auth.app))return Promise.reject(we(A.auth,"operation-not-supported-in-this-environment"));Ue(A.auth,h,Ci);const z=Mr(A.auth,f);return new Al(A.auth,"reauthViaPopup",h,z,A).executeNotNull()})).apply(this,arguments)}function tf(I,h,f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);Ue(A.auth,h,Ci);const z=Mr(A.auth,f);return new Al(A.auth,"linkViaPopup",h,z,A).executeNotNull()})).apply(this,arguments)}let Al=(()=>{class I extends oc{constructor(f,A,z,oe,Be){super(f,A,oe,Be),this.provider=z,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var f=this;return(0,_.A)(function*(){const A=yield f.execute();return ce(A,f.auth,"internal-error"),A})()}onExecution(){var f=this;return(0,_.A)(function*(){xt(1===f.filter.length,"Popup operations only handle one event");const A=Qn();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],A),f.authWindow.associatedEvent=A,f.resolver._originValidation(f.auth).catch(z=>{f.reject(z)}),f.resolver._isIframeWebStorageSupported(f.auth,z=>{z||f.reject(we(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const f=()=>{var A,z;this.pollId=null!==(z=null===(A=this.authWindow)||void 0===A?void 0:A.window)&&void 0!==z&&z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,Ko.get())};f()}}return I.currentPopupAction=null,I})();const bl="pendingRedirect",bc=new Map;class Fu extends oc{constructor(h,f,A=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,A),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,_.A)(function*(){let A=bc.get(f.auth._key());if(!A){try{const oe=(yield function Sl(I,h){return za.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;A=()=>Promise.resolve(oe)}catch(z){A=()=>Promise.reject(z)}bc.set(f.auth._key(),A)}return f.bypassAuthState||bc.set(f.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,A=this;return(0,_.A)(function*(){if("signInViaRedirect"===h.type)return f().call(A,h);if("unknown"!==h.type){if(h.eventId){const z=yield A.auth._redirectUserForId(h.eventId);if(z)return A.user=z,f().call(A,h);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,_.A)(function*(){})()}cleanUp(){}}function za(){return(za=(0,_.A)(function*(I,h){const f=rf(h),A=wd(I);if(!(yield A._isAvailable()))return!1;const z="true"===(yield A._get(f));return yield A._remove(f),z})).apply(this,arguments)}function fo(I,h){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,_.A)(function*(I,h){return wd(I)._set(rf(h),"true")})).apply(this,arguments)}function Cd(){bc.clear()}function nf(I,h){bc.set(I._key(),h)}function wd(I){return Vt(I._redirectPersistence)}function rf(I){return qn(bl,I.config.apiKey,I.name)}function Td(I,h,f){return function Pl(I,h,f){return Wa.apply(this,arguments)}(I,h,f)}function Wa(){return(Wa=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const A=Bt(I);Ue(I,h,Ci),yield A._initializationPromise;const z=Mr(A,f);return yield fo(z,A),z._openRedirect(A,h,"signInViaRedirect")})).apply(this,arguments)}function Dd(I,h,f){return function Ad(I,h,f){return Ml.apply(this,arguments)}(I,h,f)}function Ml(){return(Ml=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);if(Ue(A.auth,h,Ci),(0,T._isFirebaseServerApp)(A.auth.app))return Promise.reject(je(A.auth));yield A.auth._initializationPromise;const z=Mr(A.auth,f);yield fo(z,A.auth);const oe=yield Sc(A);return z._openRedirect(A.auth,h,"reauthViaRedirect",oe)})).apply(this,arguments)}function Rl(I,h,f){return function Kp(I,h,f){return Ft.apply(this,arguments)}(I,h,f)}function Ft(){return(Ft=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);Ue(A.auth,h,Ci),yield A.auth._initializationPromise;const z=Mr(A.auth,f);yield Ts(!1,A,h.providerId),yield fo(z,A.auth);const oe=yield Sc(A);return z._openRedirect(A.auth,h,"linkViaRedirect",oe)})).apply(this,arguments)}function Rr(I,h){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,_.A)(function*(I,h){return yield Bt(I)._initializationPromise,Vu(I,h,!1)})).apply(this,arguments)}function Vu(I,h){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,_.A)(function*(I,h,f=!1){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const A=Bt(I),z=Mr(A,h),Be=yield new Fu(A,z,f).execute();return Be&&!f&&(delete Be.user._redirectEventId,yield A._persistUserIfCurrent(Be.user),yield A._setRedirectUser(null,h)),Be})).apply(this,arguments)}function Sc(I){return ia.apply(this,arguments)}function ia(){return(ia=(0,_.A)(function*(I){const h=Qn(`${I.uid}:::`);return I._redirectEventId=h,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),h})).apply(this,arguments)}class Lu{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(h,A)&&(f=!0,this.sendToConsumer(h,A),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Sd(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bd(I);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var A;if(h.error&&!bd(h)){const z=(null===(A=h.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";f.onError(we(this.auth,z))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const A=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&A}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bs(h))}saveEventToCache(h){this.cachedEventUids.add(bs(h)),this.lastProcessedEventTime=Date.now()}}function bs(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(h=>h).join("-")}function bd({type:I,error:h}){return"unknown"===I&&"auth/no-auth-event"===h?.code}function eu(I){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,_.A)(function*(I,h={}){return Je(I,"GET","/v1/projects",h)})).apply(this,arguments)}const ro=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pc=/^https?/;function Hs(){return(Hs=(0,_.A)(function*(I){if(I.config.emulator)return;const{authorizedDomains:h}=yield eu(I);for(const f of h)try{if(qp(f))return}catch{}ae(I,"unauthorized-domain")})).apply(this,arguments)}function qp(I){const h=un(),{protocol:f,hostname:A}=new URL(h);if(I.startsWith("chrome-extension://")){const Be=new URL(I);return""===Be.hostname&&""===A?"chrome-extension:"===f&&I.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&Be.hostname===A}if(!Pc.test(f))return!1;if(ro.test(I))return A===I;const z=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+z+"|"+z+")$","i").test(A)}const Mc=new rn(3e4,6e4);function Pd(){const I=mi().___jsl;if(I?.H)for(const h of Object.keys(I.H))if(I.H[h].r=I.H[h].r||[],I.H[h].L=I.H[h].L||[],I.H[h].r=[...I.H[h].L],I.CP)for(let f=0;f<I.CP.length;f++)I.CP[f]=null}let Rc=null;const Nl=new rn(5e3,15e3),xl="__/auth/iframe",sf="emulator/auth/iframe",af={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rd(I){const h=I.config;ce(h.authDomain,I,"auth-domain-config-required");const f=h.emulator?Re(h,sf):`https://${I.config.authDomain}/${xl}`,A={apiKey:h.apiKey,appName:I.name,v:T.SDK_VERSION},z=tu.get(I.config.apiHost);z&&(A.eid=z);const oe=I._getFrameworks();return oe.length&&(A.fw=oe.join(",")),`${f}?${(0,R.Am)(A).slice(1)}`}function Uu(){return Uu=(0,_.A)(function*(I){const h=yield function Md(I){return Rc=Rc||function ac(I){return new Promise((h,f)=>{var A,z,oe;function Be(){Pd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Pd(),f(we(I,"network-request-failed"))},timeout:Mc.get()})}if(null!==(z=null===(A=mi().gapi)||void 0===A?void 0:A.iframes)&&void 0!==z&&z.Iframe)h(gapi.iframes.getContext());else{if(null===(oe=mi().gapi)||void 0===oe||!oe.load){const bt=Si("iframefcb");return mi()[bt]=()=>{gapi.load?Be():f(we(I,"network-request-failed"))},ii(`${function qr(){return wn.gapiScript}()}?onload=${bt}`).catch(Gt=>f(Gt))}Be()}}).catch(h=>{throw Rc=null,h})}(I),Rc}(I),f=mi().gapi;return ce(f,I,"internal-error"),h.open({where:document.body,url:Rd(I),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:af,dontclear:!0},A=>new Promise(function(){var z=(0,_.A)(function*(oe,Be){yield A.restyle({setHideOnLeave:!1});const bt=we(I,"network-request-failed"),Gt=mi().setTimeout(()=>{Be(bt)},Nl.get());function Tn(){mi().clearTimeout(Gt),oe(A)}A.ping(Tn).then(Tn,()=>{Be(bt)})});return function(oe,Be){return z.apply(this,arguments)}}()))}),Uu.apply(this,arguments)}const uf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ai{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Xp="__/auth/handler",Yp="emulator/auth/handler",df=encodeURIComponent("fac");function nu(I,h,f,A,z,oe){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,_.A)(function*(I,h,f,A,z,oe){ce(I.config.authDomain,I,"auth-domain-config-required"),ce(I.config.apiKey,I,"invalid-api-key");const Be={apiKey:I.config.apiKey,appName:I.name,authType:f,redirectUrl:A,v:T.SDK_VERSION,eventId:z};if(h instanceof Ci){h.setDefaultLanguage(I.languageCode),Be.providerId=h.providerId||"",(0,R.Im)(h.getCustomParameters())||(Be.customParameters=JSON.stringify(h.getCustomParameters()));for(const[$n,Ar]of Object.entries(oe||{}))Be[$n]=Ar}if(h instanceof Io){const $n=h.getScopes().filter(Ar=>""!==Ar);$n.length>0&&(Be.scopes=$n.join(","))}I.tenantId&&(Be.tid=I.tenantId);const bt=Be;for(const $n of Object.keys(bt))void 0===bt[$n]&&delete bt[$n];const Gt=yield I._getAppCheckToken(),Tn=Gt?`#${df}=${encodeURIComponent(Gt)}`:"";return`${function Pa({config:I}){return I.emulator?Re(I,Yp):`https://${I.authDomain}/${Xp}`}(I)}?${(0,R.Am)(bt).slice(1)}${Tn}`})).apply(this,arguments)}const Od="webStorageSupport",Bu=class Fl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ta,this._completeRedirectFn=Vu,this._overrideRedirectResult=nf}_openPopup(h,f,A,z){var oe=this;return(0,_.A)(function*(){var Be;xt(null===(Be=oe.eventManagers[h._key()])||void 0===Be?void 0:Be.manager,"_initialize() not called before _openPopup()");const bt=yield nu(h,f,A,un(),z);return function Qp(I,h,f,A=500,z=600){const oe=Math.max((window.screen.availHeight-z)/2,0).toString(),Be=Math.max((window.screen.availWidth-A)/2,0).toString();let bt="";const Gt=Object.assign(Object.assign({},uf),{width:A.toString(),height:z.toString(),top:oe,left:Be}),Tn=(0,R.ZQ)().toLowerCase();f&&(bt=Qr(Tn)?"_blank":f),ke(Tn)&&(h=h||"http://localhost",Gt.scrollbars="yes");const $n=Object.entries(Gt).reduce((io,[Ra,Hu])=>`${io}${Ra}=${Hu},`,"");if(function vt(I=(0,R.ZQ)()){var h;return Hi(I)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Tn)&&"_self"!==bt)return function lf(I,h){const f=document.createElement("a");f.href=I,f.target=h;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(A)}(h||"",bt),new Ai(null);const Ar=window.open(h||"",bt,$n);ce(Ar,I,"popup-blocked");try{Ar.focus()}catch{}return new Ai(Ar)}(h,bt,Qn())})()}_openRedirect(h,f,A,z){var oe=this;return(0,_.A)(function*(){return yield oe._originValidation(h),function So(I){mi().location.href=I}(yield nu(h,f,A,un(),z)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:z,promise:oe}=this.eventManagers[f];return z?Promise.resolve(z):(xt(oe,"If manager is not set, promise should be"),oe)}const A=this.initAndGetManager(h);return this.eventManagers[f]={promise:A},A.catch(()=>{delete this.eventManagers[f]}),A}initAndGetManager(h){var f=this;return(0,_.A)(function*(){const A=yield function cf(I){return Uu.apply(this,arguments)}(h),z=new Lu(h);return A.register("authEvent",oe=>(ce(oe?.authEvent,h,"invalid-auth-event"),{status:z.onEvent(oe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:z},f.iframes[h._key()]=A,z})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(Od,{type:Od},z=>{var oe;const Be=null===(oe=z?.[0])||void 0===oe?void 0:oe[Od];void 0!==Be&&f(!!Be),ae(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function sa(I){return Hs.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return kt()||$r()||Hi()}};class Nc{constructor(h){this.factorId=h}_process(h,f,A){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,A);case"signin":return this._finalizeSignIn(h,f.credential);default:return xe("unexpected MultiFactorSessionType")}}}class ju extends Nc{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new ju(h)}_finalizeEnroll(h,f,A){return function Bs(I,h){return Je(I,"POST","/v2/accounts/mfaEnrollment:finalize",It(I,h))}(h,{idToken:f,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function Ed(I,h){return Je(I,"POST","/v2/accounts/mfaSignIn:finalize",It(I,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $u=(()=>{class I{constructor(){}static assertion(f){return ju._fromCredential(f)}}return I.FACTOR_ID="phone",I})();var Ll="@firebase/auth";class Ul{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,_.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(A=>{h(A?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);f&&(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,R.XA)("authIdTokenMaxAge"),function Sr(I){wn=I}({loadJS:I=>new Promise((h,f)=>{const A=document.createElement("script");A.setAttribute("src",I),A.onload=h,A.onerror=z=>{const oe=we("internal-error");oe.customData=z,f(oe)},A.type="text/javascript",A.charset="UTF-8",function xc(){var I,h;return null!==(h=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==h?h:document}().appendChild(A)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function kd(I){(0,T._registerComponent)(new Se.uA("auth",(h,{options:f})=>{const A=h.getProvider("app").getImmediate(),z=h.getProvider("heartbeat"),oe=h.getProvider("app-check-internal"),{apiKey:Be,authDomain:bt}=A.options;ce(Be&&!Be.includes(":"),"invalid-api-key",{appName:A.name});const Gt={apiKey:Be,authDomain:bt,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:an(I)},Tn=new Xt(A,z,oe,Gt);return function Vo(I,h){const f=h?.persistence||[],A=(Array.isArray(f)?f:[f]).map(Vt);h?.errorMap&&I._updateErrorMap(h.errorMap),I._initializeWithPersistence(A,h?.popupRedirectResolver)}(Tn,f),Tn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,A)=>{h.getProvider("auth-internal").initialize()})),(0,T._registerComponent)(new Se.uA("auth-internal",h=>{const f=Bt(h.getProvider("auth").getImmediate());return new Ul(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,T.registerVersion)(Ll,"1.7.8",function xd(I){switch(I){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(I)),(0,T.registerVersion)(Ll,"1.7.8","esm2017")}("Browser")},1076:(nn,We,k)=>{k.d(We,{Am:()=>Yn,Bd:()=>xe,FA:()=>Kt,Fy:()=>je,I9:()=>tr,Im:()=>_t,Ku:()=>Mt,Ll:()=>ce,T9:()=>ae,Uj:()=>Me,XA:()=>we,ZQ:()=>Ue,bD:()=>Nt,cY:()=>ie,eX:()=>ft,g:()=>Je,gR:()=>sr,hp:()=>An,jZ:()=>Oe,lT:()=>Lt,lV:()=>jt,mS:()=>nt,nr:()=>Re,p7:()=>xt,sr:()=>un,tD:()=>kr,u:()=>ye,zW:()=>qe,zw:()=>Ge});const v=function(me){const q=[];let J=0;for(let se=0;se<me.length;se++){let _e=me.charCodeAt(se);_e<128?q[J++]=_e:_e<2048?(q[J++]=_e>>6|192,q[J++]=63&_e|128):55296==(64512&_e)&&se+1<me.length&&56320==(64512&me.charCodeAt(se+1))?(_e=65536+((1023&_e)<<10)+(1023&me.charCodeAt(++se)),q[J++]=_e>>18|240,q[J++]=_e>>12&63|128,q[J++]=_e>>6&63|128,q[J++]=63&_e|128):(q[J++]=_e>>12|224,q[J++]=_e>>6&63|128,q[J++]=63&_e|128)}return q},Se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(me,q){if(!Array.isArray(me))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,se=[];for(let _e=0;_e<me.length;_e+=3){const Tt=me[_e],Vt=_e+1<me.length,En=Vt?me[_e+1]:0,Bn=_e+2<me.length,qn=Bn?me[_e+2]:0;let ke=(15&En)<<2|qn>>6,$r=63&qn;Bn||($r=64,Vt||(ke=64)),se.push(J[Tt>>2],J[(3&Tt)<<4|En>>4],J[ke],J[$r])}return se.join("")},encodeString(me,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(me):this.encodeByteArray(v(me),q)},decodeString(me,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(me):function(me){const q=[];let J=0,se=0;for(;J<me.length;){const _e=me[J++];if(_e<128)q[se++]=String.fromCharCode(_e);else if(_e>191&&_e<224){const Tt=me[J++];q[se++]=String.fromCharCode((31&_e)<<6|63&Tt)}else if(_e>239&&_e<365){const Bn=((7&_e)<<18|(63&me[J++])<<12|(63&me[J++])<<6|63&me[J++])-65536;q[se++]=String.fromCharCode(55296+(Bn>>10)),q[se++]=String.fromCharCode(56320+(1023&Bn))}else{const Tt=me[J++],Vt=me[J++];q[se++]=String.fromCharCode((15&_e)<<12|(63&Tt)<<6|63&Vt)}}return q.join("")}(this.decodeStringToByteArray(me,q))},decodeStringToByteArray(me,q){this.init_();const J=q?this.charToByteMapWebSafe_:this.charToByteMap_,se=[];for(let _e=0;_e<me.length;){const Tt=J[me.charAt(_e++)],En=_e<me.length?J[me.charAt(_e)]:0;++_e;const qn=_e<me.length?J[me.charAt(_e)]:64;++_e;const Wt=_e<me.length?J[me.charAt(_e)]:64;if(++_e,null==Tt||null==En||null==qn||null==Wt)throw new fe;se.push(Tt<<2|En>>4),64!==qn&&(se.push(En<<4&240|qn>>2),64!==Wt&&se.push(qn<<6&192|Wt))}return se},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let me=0;me<this.ENCODED_VALS.length;me++)this.byteToCharMap_[me]=this.ENCODED_VALS.charAt(me),this.charToByteMap_[this.byteToCharMap_[me]]=me,this.byteToCharMapWebSafe_[me]=this.ENCODED_VALS_WEBSAFE.charAt(me),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[me]]=me,me>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(me)]=me,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(me)]=me)}}};class fe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Me=function(me){return function(me){const q=v(me);return Se.encodeByteArray(q,!0)}(me).replace(/\./g,"")},ye=function(me){try{return Se.decodeString(me,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function Ge(me,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===me&&(me={});break;case Array:me=[];break;default:return q}for(const J in q)!q.hasOwnProperty(J)||!it(J)||(me[J]=Ge(me[J],q[J]));return me}function it(me){return"__proto__"!==me}function nt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ot=()=>{try{return nt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const me=process.env.__FIREBASE_DEFAULTS__;return me?JSON.parse(me):void 0})()||(()=>{if(typeof document>"u")return;let me;try{me=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const q=me&&ye(me[1]);return q&&JSON.parse(q)})()}catch(me){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${me}`)}},ae=()=>{var me;return null===(me=ot())||void 0===me?void 0:me.config},we=me=>{var q;return null===(q=ot())||void 0===q?void 0:q[`_${me}`]};class ie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,J)=>{this.resolve=q,this.reject=J})}wrapCallback(q){return(J,se)=>{J?this.reject(J):this.resolve(se),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(J):q(J,se))}}}function je(me,q){if(me.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const se=q||"demo-project",_e=me.iat||0,Tt=me.sub||me.user_id;if(!Tt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Vt=Object.assign({iss:`https://securetoken.google.com/${se}`,aud:se,iat:_e,exp:_e+3600,auth_time:_e,sub:Tt,user_id:Tt,firebase:{sign_in_provider:"custom",identities:{}}},me);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(Vt)),""].join(".")}function Ue(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Oe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function ce(){var me;const q=null===(me=ot())||void 0===me?void 0:me.forceEnvironment;if("node"===q)return!0;if("browser"===q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function xe(){return typeof window<"u"||xt()}function xt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function un(){const me="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof me&&void 0!==me.id}function jt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Lt(){const me=Ue();return me.indexOf("MSIE ")>=0||me.indexOf("Trident/")>=0}function Re(){return!ce()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){try{return"object"==typeof indexedDB}catch{return!1}}function ft(){return new Promise((me,q)=>{try{let J=!0;const se="validate-browser-context-for-indexeddb-analytics-module",_e=self.indexedDB.open(se);_e.onsuccess=()=>{_e.result.close(),J||self.indexedDB.deleteDatabase(se),me(!0)},_e.onupgradeneeded=()=>{J=!1},_e.onerror=()=>{var Tt;q((null===(Tt=_e.error)||void 0===Tt?void 0:Tt.message)||"")}}catch(J){q(J)}})}class Je extends Error{constructor(q,J,se){super(J),this.code=q,this.customData=se,this.name="FirebaseError",Object.setPrototypeOf(this,Je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kt.prototype.create)}}class Kt{constructor(q,J,se){this.service=q,this.serviceName=J,this.errors=se}create(q,...J){const se=J[0]||{},_e=`${this.service}/${q}`,Tt=this.errors[q],Vt=Tt?function gn(me,q){return me.replace(tn,(J,se)=>{const _e=q[se];return null!=_e?String(_e):`<${se}?>`})}(Tt,se):"Error";return new Je(_e,`${this.serviceName}: ${Vt} (${_e}).`,se)}}const tn=/\{\$([^}]+)}/g;function sr(me,q){return Object.prototype.hasOwnProperty.call(me,q)}function _t(me){for(const q in me)if(Object.prototype.hasOwnProperty.call(me,q))return!1;return!0}function Nt(me,q){if(me===q)return!0;const J=Object.keys(me),se=Object.keys(q);for(const _e of J){if(!se.includes(_e))return!1;const Tt=me[_e],Vt=q[_e];if(tt(Tt)&&tt(Vt)){if(!Nt(Tt,Vt))return!1}else if(Tt!==Vt)return!1}for(const _e of se)if(!J.includes(_e))return!1;return!0}function tt(me){return null!==me&&"object"==typeof me}function Yn(me){const q=[];for(const[J,se]of Object.entries(me))Array.isArray(se)?se.forEach(_e=>{q.push(encodeURIComponent(J)+"="+encodeURIComponent(_e))}):q.push(encodeURIComponent(J)+"="+encodeURIComponent(se));return q.length?"&"+q.join("&"):""}function tr(me){const q={};return me.replace(/^\?/,"").split("&").forEach(se=>{if(se){const[_e,Tt]=se.split("=");q[decodeURIComponent(_e)]=decodeURIComponent(Tt)}}),q}function An(me){const q=me.indexOf("?");if(!q)return"";const J=me.indexOf("#",q);return me.substring(q,J>0?J:void 0)}function kr(me,q){const J=new Wr(me,q);return J.subscribe.bind(J)}class Wr{constructor(q,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{q(this)}).catch(se=>{this.error(se)})}next(q){this.forEachObserver(J=>{J.next(q)})}error(q){this.forEachObserver(J=>{J.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,J,se){let _e;if(void 0===q&&void 0===J&&void 0===se)throw new Error("Missing Observer.");_e=function Vi(me,q){if("object"!=typeof me||null===me)return!1;for(const J of q)if(J in me&&"function"==typeof me[J])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:J,complete:se},void 0===_e.next&&(_e.next=Or),void 0===_e.error&&(_e.error=Or),void 0===_e.complete&&(_e.complete=Or);const Tt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?_e.error(this.finalError):_e.complete()}catch{}}),this.observers.push(_e),Tt}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,q)}sendOne(q,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{J(this.observers[q])}catch(se){typeof console<"u"&&console.error&&console.error(se)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Or(){}function Mt(me){return me&&me._delegate?me._delegate:me}},3227:(nn,We,k)=>{k.d(We,{K:()=>ot});var _=k(177),T=k(4454),R=k(4438),v=k(1413);const re=["payPalButtonContainer"];let Se=(()=>{class At{constructor(ae){this.zone=ae}registerScript(ae,we,ie){const je=window[we];if(je)return void this.zone.run(()=>{ie(je)});const Ue=document.createElement("script");Ue.id=this.getElemId(we),Ue.innerHTML="",Ue.onload=()=>{this.zone.run(()=>{ie(window[we])})},Ue.src=ae,Ue.async=!0,Ue.defer=!0,document.getElementsByTagName("head")[0].appendChild(Ue)}cleanup(ae){const we=document.getElementById(this.getElemId(ae));we&&we.remove()}getElemId(ae){return`ngx-paypal-script-elem-${ae}`}}return At.\u0275fac=function(ae){return new(ae||At)(R.KVO(R.SKi))},At.\u0275prov=R.jDH({token:At,factory:At.\u0275fac}),At})(),fe=(()=>{class At{constructor(ae){this.scriptService=ae,this.paypalWindowName="paypal"}registerPayPalScript(ae,we){this.scriptService.registerScript(this.getUrlForConfig(ae),this.paypalWindowName,we)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(ae){const we=[{name:"client-id",value:ae.clientId}];return ae.locale&&we.push({name:"locale",value:ae.locale}),ae.currency&&we.push({name:"currency",value:ae.currency}),ae.commit&&we.push({name:"commit",value:ae.commit}),ae.vault&&we.push({name:"vault",value:ae.vault}),ae.intent&&we.push({name:"intent",value:ae.intent}),ae.funding&&we.push({name:"components",value:"buttons,funding-eligibility"}),ae.extraParams&&we.push(...ae.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(we)}`}getQueryString(ae){let we="";for(let ie=0;ie<ae.length;ie++){const je=ae[ie];we+=0===ie?"?":"&",we+=`${je.name}=${je.value}`}return we}}return At.\u0275fac=function(ae){return new(ae||At)(R.KVO(Se))},At.\u0275prov=R.jDH({token:At,factory:At.\u0275fac}),At})(),$e=(()=>{class At{constructor(ae,we,ie){this.paypalScriptService=ae,this.cdr=we,this.ngZone=ie,this.registerScript=!0,this.scriptLoaded=new R.bkB,this.ngUnsubscribe=new v.B,this.initializePayPal=!0}set payPalButtonContainer(ae){this.payPalButtonContainerElem=ae}ngOnChanges(ae){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());const we=this.config;ae.config.isFirstChange()&&we&&this.registerScript&&this.initPayPalScript(we,ie=>{this.payPal=ie,this.doPayPalCheck()}),ae.config.isFirstChange()||this.reinitialize(we)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(ae){this.payPal=ae,this.doPayPalCheck()}reinitialize(ae){if(this.config=ae,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)try{for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild)}catch(we){console.error(we)}this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,we=>{this.payPal=we,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(ae,we){this.paypalScriptService.registerPayPalScript({clientId:ae.clientId,locale:ae.advanced?.locale,commit:ae.advanced&&ae.advanced.commit?ae.advanced.commit:void 0,currency:ae.currency,vault:ae.vault,intent:ae.intent,funding:null!=ae.fundingSource||null!=ae.fundingSource,extraParams:ae.advanced&&ae.advanced.extraQueryParams?ae.advanced.extraQueryParams:[]},ie=>{this.scriptLoaded.next(ie),we(ie)})}generateElementId(){return`ngx-captcha-id-${this.generateGuid()}`}initPayPal(ae,we){this.ngZone.runOutsideAngular(()=>{const Oe={style:ae.style,fundingSource:void 0,onApprove:(xe,xt)=>this.ngZone.run(()=>{if(ae.onApprove&&ae.onApprove(xe,xt),ae.authorizeOnServer)return ae.authorizeOnServer(xe,xt);const un=ae.onClientAuthorization;un&&xt.order.capture().then(jt=>{this.ngZone.run(()=>{un(jt)})})}),onError:xe=>{this.ngZone.run(()=>{ae.onError&&ae.onError(xe)})},onCancel:(xe,xt)=>{this.ngZone.run(()=>{ae.onCancel&&ae.onCancel(xe,xt)})},onClick:(xe,xt)=>{this.ngZone.run(()=>{ae.onClick&&ae.onClick(xe,xt)})},onInit:(xe,xt)=>{this.ngZone.run(()=>{ae.onInit&&ae.onInit(xe,xt)})},...(ae.createOrderOnClient||ae.createOrderOnServer)&&{createOrder:(xe,xt)=>this.ngZone.run(()=>{if(ae.createOrderOnClient&&ae.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!ae.createOrderOnClient&&!ae.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(ae.createOrderOnClient)return xt.order.create(ae.createOrderOnClient(xe));if(ae.createOrderOnServer)return ae.createOrderOnServer(xe);throw Error("Invalid state for 'createOrder'.")})},...ae.createSubscriptionOnClient&&{createSubscription:(xe,xt)=>this.ngZone.run(()=>{if(ae.createSubscriptionOnClient)return xt.subscription.create(ae.createSubscriptionOnClient(xe))})},...ae.onShippingChange&&{onShippingChange:(xe,xt)=>this.ngZone.run(()=>{if(ae.onShippingChange)return ae.onShippingChange(xe,xt)})}};let ce;switch(ae.fundingSource){case"PAYPAL":ce=we.FUNDING.PAYPAL;break;case"CARD":ce=we.FUNDING.CARD;break;case"PAYLATER":ce=we.FUNDING.PAYLATER;break;case"CREDIT":ce=we.FUNDING.CREDIT;break;case"VENMO":ce=we.FUNDING.VENMO}null!=ce&&(Oe.fundingSource=ce,"PAYPAL"!==ae.fundingSource&&delete Oe.style?.color),we.Buttons(Oe).render(`#${this.payPalButtonContainerId}`)})}generateGuid(){let ae=(new Date).getTime(),we=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,ie=>{let je=16*Math.random();return ae>0?(je=(ae+je)%16|0,ae=Math.floor(ae/16)):(je=(we+je)%16|0,we=Math.floor(we/16)),("x"==ie?je:7&je|8).toString(16)})}}return At.\u0275fac=function(ae){return new(ae||At)(R.rXU(fe),R.rXU(R.gRc),R.rXU(R.SKi))},At.\u0275cmp=R.VBU({type:At,selectors:[["ngx-paypal"]],viewQuery:function(ae,we){if(1&ae&&R.GBs(re,5),2&ae){let ie;R.mGM(ie=R.lsd())&&(we.payPalButtonContainer=ie.first)}},inputs:{config:"config",registerScript:"registerScript"},outputs:{scriptLoaded:"scriptLoaded"},features:[R.OA$],decls:2,vars:1,consts:[["payPalButtonContainer",""],[3,"id"]],template:function(ae,we){1&ae&&R.nrm(0,"div",1,0),2&ae&&R.Y8G("id",we.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),At})(),Me=(()=>{class At{}return At.\u0275fac=function(ae){return new(ae||At)},At.\u0275mod=R.$C({type:At}),At.\u0275inj=R.G2t({providers:[Se,fe],imports:[_.MD]}),At})();var ye=k(5435),pe=k(6569);let Ge=(()=>{class At{constructor(ae,we){this.sharedService=ae,this.authService=we,this.userId="",this.userEmail=""}ngOnInit(){this.authService.loggedUser.subscribe(ae=>{ae&&ae.user.email&&(this.userId=ae?.key,this.userEmail=ae?.user.email)}),this.cartArr$?.subscribe(ae=>{this.cartArr=ae}),this.initConfig()}update(){if(!this.userEmail)throw new Error("no user email found");this.authService.findUser(this.userEmail).subscribe(ae=>{this.authService.loggedUser.next(ae)})}initConfig(){this.paypalConfig={currency:"USD",clientId:"AQ7YdqsTpxT_ouN31zRUyhQFvr1mMuO8rfcrWINg6SE5BFQ0l67cIFOhsNjIMdaxDU2RU42hI8yx2IxG",createOrderOnClient:ae=>({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:this.totalPrice?.toString(),breakdown:{item_total:{currency_code:"USD",value:this.totalPrice?.toString()}}},items:[{name:"Music Shop Products",quantity:"1",category:"PHYSICAL_GOODS",unit_amount:{currency_code:"USD",value:this.totalPrice?.toString()}}]}]}),advanced:{commit:"true"},style:{label:"paypal",layout:"vertical"},onApprove:(ae,we)=>{this.cartArr&&this.totalPrice&&(this.sharedService.buyProducts(this.cartArr,this.totalPrice,this.userEmail,this.userId),this.update(),console.log("payment approved: ",ae,we))},onCancel:(ae,we)=>{console.log("payment cancelled: ",ae,we)},onClick:(ae,we)=>{console.log("Onclick: ",ae,we)}}}static#e=this.\u0275fac=function(we){return new(we||At)(R.rXU(ye.m),R.rXU(pe.p))};static#t=this.\u0275cmp=R.VBU({type:At,selectors:[["app-paypal"]],inputs:{totalPrice:"totalPrice",cartArr$:"cartArr$"},standalone:!0,features:[R.aNF],decls:1,vars:1,consts:[[3,"config"]],template:function(we,ie){1&we&&R.nrm(0,"ngx-paypal",0),2&we&&R.Y8G("config",ie.paypalConfig)},dependencies:[Me,$e]})}return At})();var it=k(2906);const nt=["paymentRef"];function De(At,$t){if(1&At){const ae=R.RV6();R.j41(0,"div",5)(1,"div",6)(2,"img",7),R.bIt("click",function(){const ie=R.eBV(ae).$implicit,je=R.XpG(2);return R.Njj(je.removeFromCart(ie.product))}),R.k0s()(),R.j41(3,"div"),R.nrm(4,"img",8),R.k0s(),R.j41(5,"div",9)(6,"span"),R.EFF(7),R.k0s(),R.j41(8,"span"),R.EFF(9),R.nI1(10,"slice"),R.k0s(),R.j41(11,"span"),R.EFF(12),R.k0s(),R.j41(13,"p"),R.EFF(14),R.k0s(),R.j41(15,"p")(16,"img",10),R.bIt("click",function(){const ie=R.eBV(ae).$implicit,je=R.XpG(2);return R.Njj(je.plus(ie.product.key,"minus"))}),R.k0s(),R.EFF(17),R.j41(18,"img",11),R.bIt("click",function(){const ie=R.eBV(ae).$implicit,je=R.XpG(2);return R.Njj(je.plus(ie.product.key,"plus"))}),R.k0s()(),R.j41(19,"button",12),R.bIt("click",function(){const ie=R.eBV(ae).$implicit,je=R.XpG(2);return R.Njj(je.nav(ie.product.key,ie.product.product.category))}),R.EFF(20," See Product "),R.k0s()()()}if(2&At){const ae=$t.$implicit;R.R7$(4),R.Y8G("src",ae.product.product.photoUrl[0],R.B4B),R.R7$(3),R.SpI("Type: ",ae.product.product.category,""),R.R7$(2),R.SpI("Model: ",R.brH(10,6,ae.product.product.model,0,60),"..."),R.R7$(3),R.SpI("Price: ",ae.product.product.price,"$"),R.R7$(2),R.SpI("Discount -",ae.product.product.discount,"%"),R.R7$(3),R.SpI("",ae.quantity," ")}}function ct(At,$t){if(1&At&&(R.j41(0,"div",13)(1,"h2"),R.EFF(2),R.k0s(),R.j41(3,"div")(4,"div"),R.nrm(5,"app-paypal",14),R.k0s()()()),2&At){const ae=R.XpG(2);R.R7$(2),R.SpI("Total Price: ",ae.calculateTotalPrice(),"$"),R.R7$(3),R.Y8G("cartArr$",ae.cart$)("totalPrice",ae.calculateTotalPrice())}}function at(At,$t){if(1&At&&(R.j41(0,"div",1)(1,"div")(2,"h2"),R.EFF(3,"Cart"),R.k0s()(),R.j41(4,"div",2),R.DNE(5,De,21,10,"div",3),R.nI1(6,"async"),R.k0s(),R.DNE(7,ct,6,3,"div",4),R.k0s()),2&At){const ae=R.XpG();R.R7$(5),R.Y8G("ngForOf",R.bMT(6,2,ae.cart$)),R.R7$(2),R.Y8G("ngIf",ae.calculateTotalPrice()>0)}}let ot=(()=>{class At{constructor(ae,we,ie,je,Ue){this.sharedService=ae,this.router=we,this.authService=ie,this.cd=je,this.cartService=Ue,this.showCart=!0}ngOnInit(){this.authService.checkIfLoggedIn(),this.cart$=this.cartService.cart.asObservable(),this.cd.detectChanges()}makePayment(){this.sharedService.buyProducts(this.cartService.cart.getValue(),this.calculateTotalPrice(),this.authService.loggedUser.getValue()?.user.email,this.authService.loggedUser.getValue()?.key)}removeFromCart(ae){this.cartService.cartOperations("remove",ae),this.calculateTotalPrice()}nav(ae,we){this.router.navigate([`single-product/${ae}`],{queryParams:{type:we,prod:ae}})}plus(ae,we){let ie=this.cartService.cart.getValue();const je=ie.findIndex(Ue=>Ue.product.key===ae);"plus"===we?ie[je].quantity++:ie[je].quantity>1&&ie[je].quantity--,this.cartService.cart.next(ie)}calculateTotalPrice(){let ae=0;return this.cartService.cart.getValue().forEach(we=>{if(we.product.product.discount>0){const ie=we.quantity*(we.product.product.price-this.calculateDiscount(we.product.product.price,we.product.product.discount));ae+=ie}else ae+=we.quantity*we.product.product.price}),ae}calculateDiscount(ae,we){return Math.round(ae*we/100)}static#e=this.\u0275fac=function(we){return new(we||At)(R.rXU(ye.m),R.rXU(T.Ix),R.rXU(pe.p),R.rXU(R.gRc),R.rXU(it.m))};static#t=this.\u0275cmp=R.VBU({type:At,selectors:[["app-cart"]],viewQuery:function(we,ie){if(1&we&&R.GBs(nt,7),2&we){let je;R.mGM(je=R.lsd())&&(ie.paymentRef=je.first)}},inputs:{showCart:"showCart",userEmail:"userEmail"},standalone:!0,features:[R.aNF],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"products"],["class","product",4,"ngFor","ngForOf"],["class","payment",4,"ngIf"],[1,"product"],[1,"remove"],["src","assets/remove.png","alt","img",3,"click"],["alt","img",3,"src"],[1,"description"],["src","assets/minus.png","alt","img",3,"click"],["src","assets/plus.png","alt","img",3,"click"],[3,"click"],[1,"payment"],[3,"cartArr$","totalPrice"]],template:function(we,ie){1&we&&R.DNE(0,at,8,4,"div",0),2&we&&R.Y8G("ngIf",ie.showCart)},dependencies:[_.MD,_.Sq,_.bT,_.Jj,_.P9,T.iI,Ge],styles:[".container[_ngcontent-%COMP%]{width:600px;height:600px;background-color:#98c0e0;overflow-y:scroll}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{text-align:center;padding:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]{display:flex;gap:5px;height:150px;width:80%;border:1px solid rgb(118,153,218);border-radius:8px;position:relative}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{position:absolute;right:0}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:20%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > img[_ngcontent-%COMP%]{width:100%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:repeat(2,190px);grid-template-rows:repeat(3,46px);align-content:center;align-items:center}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:14px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px;cursor:pointer}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:not(:last-child){font-size:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:24px;width:130px;border:none;color:#fff;background-color:#7699da;border-radius:3px;cursor:pointer}.container[_ngcontent-%COMP%]   .payment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}"],changeDetection:0})}return At})()},2906:(nn,We,k)=>{k.d(We,{m:()=>R});var _=k(4438),T=k(4412);let R=(()=>{class v{constructor(){this.cart=new T.t([]),this.cartArr=new _.bkB}cartOperations(Se,fe){let $e=this.cart.getValue();const Me=$e.findIndex(pe=>pe.product.key===fe.key);let ye=[...$e];-1!==Me?"add"===Se?ye[Me].quantity++:ye.splice(Me,1):"add"===Se&&ye.push({quantity:1,product:fe}),this.cart.next(ye),localStorage.setItem("cart",JSON.stringify(this.cart.value))}static#e=this.\u0275fac=function(fe){return new(fe||v)};static#t=this.\u0275prov=_.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},708:(nn,We,k)=>{k.d(We,{n:()=>re});var _=k(9417),T=k(4454),R=k(4438),v=k(6569);let re=(()=>{class Se{constructor($e,Me){this.service=$e,this.router=Me,this.email=""}sendEmail(){this.email=""}navigate($e){if("profile"===$e){const Me=this.service.loggedUser.getValue()?.key;this.router.navigate([`profile/${Me}`])}}static#e=this.\u0275fac=function(Me){return new(Me||Se)(R.rXU(v.p),R.rXU(T.Ix))};static#t=this.\u0275cmp=R.VBU({type:Se,selectors:[["app-footer"]],standalone:!0,features:[R.aNF],decls:33,vars:1,consts:[[1,"container"],[1,"flex-container"],["src","assets/placeholder.png","alt","img"],["src","assets/phone.png","alt","img"],["routerLink","/login"],["routerLink","/products"],[3,"click"],["placeholder","Enter your Email",3,"ngModelChange","ngModel"],["src","assets/send.png","alt","img",3,"click"]],template:function(Me,ye){1&Me&&(R.j41(0,"div",0),R.nrm(1,"div"),R.j41(2,"div",1)(3,"div")(4,"h3"),R.EFF(5,"SABAMUSIC."),R.k0s(),R.j41(6,"p"),R.EFF(7,"Music Shop over 1000 brand. we sell quality product on our website"),R.k0s(),R.j41(8,"p"),R.nrm(9,"img",2),R.EFF(10,"Mindeli's street 7B"),R.k0s(),R.j41(11,"p"),R.nrm(12,"img",3),R.EFF(13,"+995 555 542 034"),R.k0s()(),R.j41(14,"div")(15,"h3"),R.EFF(16,"Menu"),R.k0s(),R.j41(17,"p",4),R.EFF(18,"Login"),R.k0s(),R.j41(19,"p",5),R.EFF(20,"Products"),R.k0s(),R.j41(21,"p"),R.EFF(22,"About Us"),R.k0s(),R.j41(23,"p"),R.EFF(24,"Terms & Policy"),R.k0s(),R.j41(25,"p",6),R.bIt("click",function(){return ye.navigate("profile")}),R.EFF(26,"My Account"),R.k0s()(),R.j41(27,"div")(28,"h3"),R.EFF(29,"Stay Updated"),R.k0s(),R.j41(30,"div")(31,"input",7),R.mxI("ngModelChange",function(Ge){return R.DH7(ye.email,Ge)||(ye.email=Ge),Ge}),R.k0s(),R.j41(32,"img",8),R.bIt("click",function(){return ye.sendEmail()}),R.k0s()()()()()),2&Me&&(R.R7$(31),R.R50("ngModel",ye.email))},dependencies:[_.YN,_.me,_.BC,_.vS,T.iI,T.Wk],styles:[".container[_ngcontent-%COMP%]{width:90%;height:220px;margin:100px auto;display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;height:2px;background-color:#000}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;height:100%}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:7px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:4px;cursor:pointer}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-size:14px;color:#616161}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > p[_ngcontent-%COMP%]{width:190px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{border:none;border-radius:2px;width:200px;height:20px;background-color:#e9dbdb}"],changeDetection:0})}return Se})()},2152:(nn,We,k)=>{k.d(We,{l:()=>ye});var _=k(4454),T=k(177),R=k(3227),v=k(4438),re=k(6569);function Se(pe,Ge){if(1&pe){const it=v.RV6();v.j41(0,"div",11)(1,"span",3),v.bIt("click",function(){v.eBV(it);const De=v.XpG();return v.Njj(De.navigateToCategotyPage("guitar"))}),v.EFF(2,"Guitar"),v.k0s(),v.j41(3,"span",3),v.bIt("click",function(){v.eBV(it);const De=v.XpG();return v.Njj(De.navigateToCategotyPage("drum"))}),v.EFF(4,"Drums"),v.k0s(),v.j41(5,"span",3),v.bIt("click",function(){v.eBV(it);const De=v.XpG();return v.Njj(De.navigateToCategotyPage("bass"))}),v.EFF(6,"Bass "),v.k0s(),v.j41(7,"span",3),v.bIt("click",function(){v.eBV(it);const De=v.XpG();return v.Njj(De.navigateToCategotyPage("piano"))}),v.EFF(8,"Piano"),v.k0s(),v.j41(9,"span",3),v.bIt("click",function(){v.eBV(it);const De=v.XpG();return v.Njj(De.navigateToCategotyPage("other"))}),v.EFF(10,"Other"),v.k0s()()}}function fe(pe,Ge){if(1&pe){const it=v.RV6();v.j41(0,"span",3),v.bIt("click",function(){v.eBV(it);const De=v.XpG();return v.Njj(De.navigate("login"))}),v.EFF(1,"Log In"),v.k0s()}}function $e(pe,Ge){if(1&pe){const it=v.RV6();v.j41(0,"img",12),v.bIt("click",function(){v.eBV(it);const De=v.XpG();return v.Njj(De.logOut())}),v.k0s()}}function Me(pe,Ge){if(1&pe){const it=v.RV6();v.j41(0,"img",13),v.bIt("click",function(){v.eBV(it);const De=v.XpG();return v.Njj(De.navigateToProfile())}),v.k0s()}}let ye=(()=>{class pe{constructor(it,nt,De){this.router=it,this.loginService=nt,this.cd=De,this.dropDown=!1,this.cart=!1}ngOnInit(){this.loginService.loggedUser.subscribe(it=>{this.user=it,this.profilePicture=this.user?.user.photoUrl,this.cd.detectChanges()})}changeDropDown(){this.dropDown=!this.dropDown}navigateToProfile(){this.router.navigate([`profile/${this.user?.key}`])}navigateToCategotyPage(it){this.router.navigate([`categoty/${it}`])}openCloseCart(){this.cart=!this.cart}logOut(){this.loginService.logOut(),this.router.navigate(["/products"])}navigate(it){this.router.navigate([`/${it}`])}static#e=this.\u0275fac=function(nt){return new(nt||pe)(v.rXU(_.Ix),v.rXU(re.p),v.rXU(v.gRc))};static#t=this.\u0275cmp=v.VBU({type:pe,selectors:[["app-header"]],standalone:!0,features:[v.aNF],decls:19,vars:6,consts:[[1,"header-container"],["routerLink","/products"],[1,"dropdown-container"],[3,"click"],["class","dropdown",4,"ngIf"],["src","assets/down-arrow.png","alt","img",3,"click"],[3,"click",4,"ngIf"],[1,"cart",3,"userEmail","showCart"],["src","assets/logout.png","alt","img",3,"click",4,"ngIf"],["src","assets/shopping-cart.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click",4,"ngIf"],[1,"dropdown"],["src","assets/logout.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click"]],template:function(nt,De){1&nt&&(v.j41(0,"div",0)(1,"div")(2,"span",1),v.EFF(3,"SABAMUSIC."),v.k0s(),v.j41(4,"div",2)(5,"span",3),v.bIt("click",function(){return De.changeDropDown()}),v.EFF(6,"Products "),v.DNE(7,Se,11,0,"div",4),v.k0s(),v.j41(8,"img",5),v.bIt("click",function(){return De.changeDropDown()}),v.k0s()(),v.j41(9,"span",3),v.bIt("click",function(){return De.navigate("contact")}),v.EFF(10,"Contact"),v.k0s(),v.j41(11,"span",3),v.bIt("click",function(){return De.navigate("about-us")}),v.EFF(12,"About Us"),v.k0s(),v.DNE(13,fe,2,0,"span",6),v.nrm(14,"app-cart",7),v.k0s(),v.j41(15,"div"),v.DNE(16,$e,1,0,"img",8),v.j41(17,"img",9),v.bIt("click",function(){return De.openCloseCart()}),v.k0s(),v.DNE(18,Me,1,0,"img",10),v.k0s()()),2&nt&&(v.R7$(7),v.Y8G("ngIf",De.dropDown),v.R7$(6),v.Y8G("ngIf",!De.user),v.R7$(),v.Y8G("userEmail",null==De.user||null==De.user.user?null:De.user.user.email)("showCart",De.cart),v.R7$(2),v.Y8G("ngIf",De.user),v.R7$(2),v.Y8G("ngIf",De.user))},dependencies:[T.MD,T.bT,_.iI,_.Wk,R.K],styles:[".header-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:160px;margin-bottom:40px;position:sticky;top:5px;z-index:2}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:60%;display:flex;justify-content:space-between;align-items:center}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child{display:flex;align-items:center;gap:10px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child > input[_ngcontent-%COMP%]{height:20px;border:none;background-color:#f3ecec;border-radius:3px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   .cart[_ngcontent-%COMP%]{position:absolute;top:80px;right:100px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:26px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:relative;font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%]{z-index:3;display:flex;flex-direction:column;position:absolute;top:30px;gap:5px;z-index:1}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:flex;gap:20px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   img[_ngcontent-%COMP%]{width:26px;height:26px;cursor:pointer}"],changeDetection:0})}return pe})()},513:(nn,We,k)=>{k.r(We),k.d(We,{LoginAndRegistrationModule:()=>Ky});var _=k(177),T=k(9417),R=k(1182),v=k(4438),re=k(1825),Se=k(9253),fe=k(3236),$e=k(1985),Me=k(8455),ye=k(7673),pe=k(9172),Ge=k(9974),it=k(4360);function nt(){return(0,Ge.N)((a,t)=>{let r,o=!1;a.subscribe((0,it._)(t,u=>{const d=r;r=u,o&&t.next([d,u]),o=!0}))})}var De=k(6354),ct=k(2816),at=k(3669);function At(a,t){return a===t}var un,jt,$t=k(5964),we=(k(2438),k(3345)),ie=k(467),je=k(7852),Ue=k(1362),Oe=k(8041),ce=k(1076),xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xt={};(function(){var a;function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(et,be,ze){ze||(ze=0);var rt=Array(16);if("string"==typeof be)for(var dt=0;16>dt;++dt)rt[dt]=be.charCodeAt(ze++)|be.charCodeAt(ze++)<<8|be.charCodeAt(ze++)<<16|be.charCodeAt(ze++)<<24;else for(dt=0;16>dt;++dt)rt[dt]=be[ze++]|be[ze++]<<8|be[ze++]<<16|be[ze++]<<24;var wt=et.g[3],He=(be=et.g[0])+(wt^(ze=et.g[1])&((dt=et.g[2])^wt))+rt[0]+3614090360&4294967295;He=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=(ze=(dt=(wt=(be=ze+(He<<7&4294967295|He>>>25))+((He=wt+(dt^be&(ze^dt))+rt[1]+3905402710&4294967295)<<12&4294967295|He>>>20))+((He=dt+(ze^wt&(be^ze))+rt[2]+606105819&4294967295)<<17&4294967295|He>>>15))+((He=ze+(be^dt&(wt^be))+rt[3]+3250441966&4294967295)<<22&4294967295|He>>>10))+((He=be+(wt^ze&(dt^wt))+rt[4]+4118548399&4294967295)<<7&4294967295|He>>>25))+((He=wt+(dt^be&(ze^dt))+rt[5]+1200080426&4294967295)<<12&4294967295|He>>>20))+((He=dt+(ze^wt&(be^ze))+rt[6]+2821735955&4294967295)<<17&4294967295|He>>>15))+((He=ze+(be^dt&(wt^be))+rt[7]+4249261313&4294967295)<<22&4294967295|He>>>10))+((He=be+(wt^ze&(dt^wt))+rt[8]+1770035416&4294967295)<<7&4294967295|He>>>25))+((He=wt+(dt^be&(ze^dt))+rt[9]+2336552879&4294967295)<<12&4294967295|He>>>20))+((He=dt+(ze^wt&(be^ze))+rt[10]+4294925233&4294967295)<<17&4294967295|He>>>15))+((He=ze+(be^dt&(wt^be))+rt[11]+2304563134&4294967295)<<22&4294967295|He>>>10))+((He=be+(wt^ze&(dt^wt))+rt[12]+1804603682&4294967295)<<7&4294967295|He>>>25))+((He=wt+(dt^be&(ze^dt))+rt[13]+4254626195&4294967295)<<12&4294967295|He>>>20))+((He=dt+(ze^wt&(be^ze))+rt[14]+2792965006&4294967295)<<17&4294967295|He>>>15))+((He=ze+(be^dt&(wt^be))+rt[15]+1236535329&4294967295)<<22&4294967295|He>>>10))+((He=be+(dt^wt&(ze^dt))+rt[1]+4129170786&4294967295)<<5&4294967295|He>>>27))+((He=wt+(ze^dt&(be^ze))+rt[6]+3225465664&4294967295)<<9&4294967295|He>>>23))+((He=dt+(be^ze&(wt^be))+rt[11]+643717713&4294967295)<<14&4294967295|He>>>18))+((He=ze+(wt^be&(dt^wt))+rt[0]+3921069994&4294967295)<<20&4294967295|He>>>12))+((He=be+(dt^wt&(ze^dt))+rt[5]+3593408605&4294967295)<<5&4294967295|He>>>27))+((He=wt+(ze^dt&(be^ze))+rt[10]+38016083&4294967295)<<9&4294967295|He>>>23))+((He=dt+(be^ze&(wt^be))+rt[15]+3634488961&4294967295)<<14&4294967295|He>>>18))+((He=ze+(wt^be&(dt^wt))+rt[4]+3889429448&4294967295)<<20&4294967295|He>>>12))+((He=be+(dt^wt&(ze^dt))+rt[9]+568446438&4294967295)<<5&4294967295|He>>>27))+((He=wt+(ze^dt&(be^ze))+rt[14]+3275163606&4294967295)<<9&4294967295|He>>>23))+((He=dt+(be^ze&(wt^be))+rt[3]+4107603335&4294967295)<<14&4294967295|He>>>18))+((He=ze+(wt^be&(dt^wt))+rt[8]+1163531501&4294967295)<<20&4294967295|He>>>12))+((He=be+(dt^wt&(ze^dt))+rt[13]+2850285829&4294967295)<<5&4294967295|He>>>27))+((He=wt+(ze^dt&(be^ze))+rt[2]+4243563512&4294967295)<<9&4294967295|He>>>23))+((He=dt+(be^ze&(wt^be))+rt[7]+1735328473&4294967295)<<14&4294967295|He>>>18))+((He=ze+(wt^be&(dt^wt))+rt[12]+2368359562&4294967295)<<20&4294967295|He>>>12))+((He=be+(ze^dt^wt)+rt[5]+4294588738&4294967295)<<4&4294967295|He>>>28))+((He=wt+(be^ze^dt)+rt[8]+2272392833&4294967295)<<11&4294967295|He>>>21))+((He=dt+(wt^be^ze)+rt[11]+1839030562&4294967295)<<16&4294967295|He>>>16))+((He=ze+(dt^wt^be)+rt[14]+4259657740&4294967295)<<23&4294967295|He>>>9))+((He=be+(ze^dt^wt)+rt[1]+2763975236&4294967295)<<4&4294967295|He>>>28))+((He=wt+(be^ze^dt)+rt[4]+1272893353&4294967295)<<11&4294967295|He>>>21))+((He=dt+(wt^be^ze)+rt[7]+4139469664&4294967295)<<16&4294967295|He>>>16))+((He=ze+(dt^wt^be)+rt[10]+3200236656&4294967295)<<23&4294967295|He>>>9))+((He=be+(ze^dt^wt)+rt[13]+681279174&4294967295)<<4&4294967295|He>>>28))+((He=wt+(be^ze^dt)+rt[0]+3936430074&4294967295)<<11&4294967295|He>>>21))+((He=dt+(wt^be^ze)+rt[3]+3572445317&4294967295)<<16&4294967295|He>>>16))+((He=ze+(dt^wt^be)+rt[6]+76029189&4294967295)<<23&4294967295|He>>>9))+((He=be+(ze^dt^wt)+rt[9]+3654602809&4294967295)<<4&4294967295|He>>>28))+((He=wt+(be^ze^dt)+rt[12]+3873151461&4294967295)<<11&4294967295|He>>>21))+((He=dt+(wt^be^ze)+rt[15]+530742520&4294967295)<<16&4294967295|He>>>16))+((He=ze+(dt^wt^be)+rt[2]+3299628645&4294967295)<<23&4294967295|He>>>9))+((He=be+(dt^(ze|~wt))+rt[0]+4096336452&4294967295)<<6&4294967295|He>>>26))+((He=wt+(ze^(be|~dt))+rt[7]+1126891415&4294967295)<<10&4294967295|He>>>22))+((He=dt+(be^(wt|~ze))+rt[14]+2878612391&4294967295)<<15&4294967295|He>>>17))+((He=ze+(wt^(dt|~be))+rt[5]+4237533241&4294967295)<<21&4294967295|He>>>11))+((He=be+(dt^(ze|~wt))+rt[12]+1700485571&4294967295)<<6&4294967295|He>>>26))+((He=wt+(ze^(be|~dt))+rt[3]+2399980690&4294967295)<<10&4294967295|He>>>22))+((He=dt+(be^(wt|~ze))+rt[10]+4293915773&4294967295)<<15&4294967295|He>>>17))+((He=ze+(wt^(dt|~be))+rt[1]+2240044497&4294967295)<<21&4294967295|He>>>11))+((He=be+(dt^(ze|~wt))+rt[8]+1873313359&4294967295)<<6&4294967295|He>>>26))+((He=wt+(ze^(be|~dt))+rt[15]+4264355552&4294967295)<<10&4294967295|He>>>22))+((He=dt+(be^(wt|~ze))+rt[6]+2734768916&4294967295)<<15&4294967295|He>>>17))+((He=ze+(wt^(dt|~be))+rt[13]+1309151649&4294967295)<<21&4294967295|He>>>11))+((wt=(be=ze+((He=be+(dt^(ze|~wt))+rt[4]+4149444226&4294967295)<<6&4294967295|He>>>26))+((He=wt+(ze^(be|~dt))+rt[11]+3174756917&4294967295)<<10&4294967295|He>>>22))^((dt=wt+((He=dt+(be^(wt|~ze))+rt[2]+718787259&4294967295)<<15&4294967295|He>>>17))|~be))+rt[9]+3951481745&4294967295,et.g[0]=et.g[0]+be&4294967295,et.g[1]=et.g[1]+(dt+(He<<21&4294967295|He>>>11))&4294967295,et.g[2]=et.g[2]+dt&4294967295,et.g[3]=et.g[3]+wt&4294967295}function m(et,be){this.h=be;for(var ze=[],rt=!0,dt=et.length-1;0<=dt;dt--){var wt=0|et[dt];rt&&wt==be||(ze[dt]=wt,rt=!1)}this.g=ze}(function t(et,be){function ze(){}ze.prototype=be.prototype,et.D=be.prototype,et.prototype=new ze,et.prototype.constructor=et,et.C=function(rt,dt,wt){for(var He=Array(arguments.length-2),Bc=2;Bc<arguments.length;Bc++)He[Bc-2]=arguments[Bc];return be.prototype[dt].apply(rt,He)}})(o,function r(){this.blockSize=-1}),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},o.prototype.u=function(et,be){void 0===be&&(be=et.length);for(var ze=be-this.blockSize,rt=this.B,dt=this.h,wt=0;wt<be;){if(0==dt)for(;wt<=ze;)u(this,et,wt),wt+=this.blockSize;if("string"==typeof et){for(;wt<be;)if(rt[dt++]=et.charCodeAt(wt++),dt==this.blockSize){u(this,rt),dt=0;break}}else for(;wt<be;)if(rt[dt++]=et[wt++],dt==this.blockSize){u(this,rt),dt=0;break}}this.h=dt,this.o+=be},o.prototype.v=function(){var et=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);et[0]=128;for(var be=1;be<et.length-8;++be)et[be]=0;var ze=8*this.o;for(be=et.length-8;be<et.length;++be)et[be]=255&ze,ze/=256;for(this.u(et),et=Array(16),be=ze=0;4>be;++be)for(var rt=0;32>rt;rt+=8)et[ze++]=this.g[be]>>>rt&255;return et};var b={};function F(et){return-128<=et&&128>et?function d(et,be){var ze=b;return Object.prototype.hasOwnProperty.call(ze,et)?ze[et]:ze[et]=be(et)}(et,function(be){return new m([0|be],0>be?-1:0)}):new m([0|et],0>et?-1:0)}function $(et){if(isNaN(et)||!isFinite(et))return ge;if(0>et)return Qt($(-et));for(var be=[],ze=1,rt=0;et>=ze;rt++)be[rt]=et/ze|0,ze*=4294967296;return new m(be,0)}var ge=F(0),Ne=F(1),lt=F(16777216);function Ht(et){if(0!=et.h)return!1;for(var be=0;be<et.g.length;be++)if(0!=et.g[be])return!1;return!0}function en(et){return-1==et.h}function Qt(et){for(var be=et.g.length,ze=[],rt=0;rt<be;rt++)ze[rt]=~et.g[rt];return new m(ze,~et.h).add(Ne)}function Vn(et,be){return et.add(Qt(be))}function Xn(et,be){for(;(65535&et[be])!=et[be];)et[be+1]+=et[be]>>>16,et[be]&=65535,be++}function kn(et,be){this.g=et,this.h=be}function cr(et,be){if(Ht(be))throw Error("division by zero");if(Ht(et))return new kn(ge,ge);if(en(et))return be=cr(Qt(et),be),new kn(Qt(be.g),Qt(be.h));if(en(be))return be=cr(et,Qt(be)),new kn(Qt(be.g),be.h);if(30<et.g.length){if(en(et)||en(be))throw Error("slowDivide_ only works with positive integers.");for(var ze=Ne,rt=be;0>=rt.l(et);)ze=Br(ze),rt=Br(rt);var dt=br(ze,1),wt=br(rt,1);for(rt=br(rt,2),ze=br(ze,2);!Ht(rt);){var He=wt.add(rt);0>=He.l(et)&&(dt=dt.add(ze),wt=He),rt=br(rt,1),ze=br(ze,1)}return be=Vn(et,dt.j(be)),new kn(dt,be)}for(dt=ge;0<=et.l(be);){for(ze=Math.max(1,Math.floor(et.m()/be.m())),rt=48>=(rt=Math.ceil(Math.log(ze)/Math.LN2))?1:Math.pow(2,rt-48),He=(wt=$(ze)).j(be);en(He)||0<He.l(et);)He=(wt=$(ze-=rt)).j(be);Ht(wt)&&(wt=Ne),dt=dt.add(wt),et=Vn(et,He)}return new kn(dt,et)}function Br(et){for(var be=et.g.length+1,ze=[],rt=0;rt<be;rt++)ze[rt]=et.i(rt)<<1|et.i(rt-1)>>>31;return new m(ze,et.h)}function br(et,be){var ze=be>>5;be%=32;for(var rt=et.g.length-ze,dt=[],wt=0;wt<rt;wt++)dt[wt]=0<be?et.i(wt+ze)>>>be|et.i(wt+ze+1)<<32-be:et.i(wt+ze);return new m(dt,et.h)}(a=m.prototype).m=function(){if(en(this))return-Qt(this).m();for(var et=0,be=1,ze=0;ze<this.g.length;ze++){var rt=this.i(ze);et+=(0<=rt?rt:4294967296+rt)*be,be*=4294967296}return et},a.toString=function(et){if(2>(et=et||10)||36<et)throw Error("radix out of range: "+et);if(Ht(this))return"0";if(en(this))return"-"+Qt(this).toString(et);for(var be=$(Math.pow(et,6)),ze=this,rt="";;){var dt=cr(ze,be).g,wt=((0<(ze=Vn(ze,dt.j(be))).g.length?ze.g[0]:ze.h)>>>0).toString(et);if(Ht(ze=dt))return wt+rt;for(;6>wt.length;)wt="0"+wt;rt=wt+rt}},a.i=function(et){return 0>et?0:et<this.g.length?this.g[et]:this.h},a.l=function(et){return en(et=Vn(this,et))?-1:Ht(et)?0:1},a.abs=function(){return en(this)?Qt(this):this},a.add=function(et){for(var be=Math.max(this.g.length,et.g.length),ze=[],rt=0,dt=0;dt<=be;dt++){var wt=rt+(65535&this.i(dt))+(65535&et.i(dt)),He=(wt>>>16)+(this.i(dt)>>>16)+(et.i(dt)>>>16);rt=He>>>16,ze[dt]=(He&=65535)<<16|(wt&=65535)}return new m(ze,-2147483648&ze[ze.length-1]?-1:0)},a.j=function(et){if(Ht(this)||Ht(et))return ge;if(en(this))return en(et)?Qt(this).j(Qt(et)):Qt(Qt(this).j(et));if(en(et))return Qt(this.j(Qt(et)));if(0>this.l(lt)&&0>et.l(lt))return $(this.m()*et.m());for(var be=this.g.length+et.g.length,ze=[],rt=0;rt<2*be;rt++)ze[rt]=0;for(rt=0;rt<this.g.length;rt++)for(var dt=0;dt<et.g.length;dt++){var wt=this.i(rt)>>>16,He=65535&this.i(rt),Bc=et.i(dt)>>>16,sd=65535&et.i(dt);ze[2*rt+2*dt]+=He*sd,Xn(ze,2*rt+2*dt),ze[2*rt+2*dt+1]+=wt*sd,Xn(ze,2*rt+2*dt+1),ze[2*rt+2*dt+1]+=He*Bc,Xn(ze,2*rt+2*dt+1),ze[2*rt+2*dt+2]+=wt*Bc,Xn(ze,2*rt+2*dt+2)}for(rt=0;rt<be;rt++)ze[rt]=ze[2*rt+1]<<16|ze[2*rt];for(rt=be;rt<2*be;rt++)ze[rt]=0;return new m(ze,0)},a.A=function(et){return cr(this,et).h},a.and=function(et){for(var be=Math.max(this.g.length,et.g.length),ze=[],rt=0;rt<be;rt++)ze[rt]=this.i(rt)&et.i(rt);return new m(ze,this.h&et.h)},a.or=function(et){for(var be=Math.max(this.g.length,et.g.length),ze=[],rt=0;rt<be;rt++)ze[rt]=this.i(rt)|et.i(rt);return new m(ze,this.h|et.h)},a.xor=function(et){for(var be=Math.max(this.g.length,et.g.length),ze=[],rt=0;rt<be;rt++)ze[rt]=this.i(rt)^et.i(rt);return new m(ze,this.h^et.h)},o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,jt=xt.Md5=o,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.A,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=$,m.fromString=function ne(et,be){if(0==et.length)throw Error("number format error: empty string");if(2>(be=be||10)||36<be)throw Error("radix out of range: "+be);if("-"==et.charAt(0))return Qt(ne(et.substring(1),be));if(0<=et.indexOf("-"))throw Error('number format error: interior "-" character');for(var ze=$(Math.pow(be,8)),rt=ge,dt=0;dt<et.length;dt+=8){var wt=Math.min(8,et.length-dt),He=parseInt(et.substring(dt,dt+wt),be);8>wt?(wt=$(Math.pow(be,wt)),rt=rt.j(wt).add($(He))):rt=(rt=rt.j(ze)).add($(He))}return rt},un=xt.Integer=m}).apply(typeof xe<"u"?xe:typeof self<"u"?self:typeof window<"u"?window:{});var ut,rn,Re,qe,ft,yt,It,Je,Kt,ln=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lt={};(function(){var a,t="function"==typeof Object.defineProperties?Object.defineProperty:function(g,V,G){return g==Array.prototype||g==Object.prototype||(g[V]=G.value),g},o=function r(g){g=["object"==typeof globalThis&&globalThis,g,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ln&&ln];for(var V=0;V<g.length;++V){var G=g[V];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}(this);!function u(g,V){if(V)e:{var G=o;g=g.split(".");for(var le=0;le<g.length-1;le++){var gt=g[le];if(!(gt in G))break e;G=G[gt]}(V=V(le=G[g=g[g.length-1]]))!=le&&null!=V&&t(G,g,{configurable:!0,writable:!0,value:V})}}("Array.prototype.values",function(g){return g||function(){return function d(g,V){g instanceof String&&(g+="");var G=0,le=!1,gt={next:function(){if(!le&&G<g.length){var Ot=G++;return{value:V(Ot,g[Ot]),done:!1}}return le=!0,{done:!0,value:void 0}}};return gt[Symbol.iterator]=function(){return gt},gt}(this,function(V,G){return G})}});var m=m||{},b=this||self;function F(g){var V=typeof g;return"array"==(V="object"!=V?V:g?Array.isArray(g)?"array":V:"null")||"object"==V&&"number"==typeof g.length}function $(g){var V=typeof g;return"object"==V&&null!=g||"function"==V}function ne(g,V,G){return g.call.apply(g.bind,arguments)}function ge(g,V,G){if(!g)throw Error();if(2<arguments.length){var le=Array.prototype.slice.call(arguments,2);return function(){var gt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(gt,le),g.apply(V,gt)}}return function(){return g.apply(V,arguments)}}function Ne(g,V,G){return(Ne=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ne:ge).apply(null,arguments)}function lt(g,V){var G=Array.prototype.slice.call(arguments,1);return function(){var le=G.slice();return le.push.apply(le,arguments),g.apply(this,le)}}function Ht(g,V){function G(){}G.prototype=V.prototype,g.aa=V.prototype,g.prototype=new G,g.prototype.constructor=g,g.Qb=function(le,gt,Ot){for(var yn=Array(arguments.length-2),bi=2;bi<arguments.length;bi++)yn[bi-2]=arguments[bi];return V.prototype[gt].apply(le,yn)}}function en(g){const V=g.length;if(0<V){const G=Array(V);for(let le=0;le<V;le++)G[le]=g[le];return G}return[]}function Qt(g,V){for(let G=1;G<arguments.length;G++){const le=arguments[G];if(F(le)){const gt=g.length||0,Ot=le.length||0;g.length=gt+Ot;for(let yn=0;yn<Ot;yn++)g[gt+yn]=le[yn]}else g.push(le)}}function Xn(g){return/^[\s\xa0]*$/.test(g)}function kn(){var g=b.navigator;return g&&(g=g.userAgent)?g:""}function cr(g){return cr[" "](g),g}cr[" "]=function(){};var Br=!(-1==kn().indexOf("Gecko")||-1!=kn().toLowerCase().indexOf("webkit")&&-1==kn().indexOf("Edge")||-1!=kn().indexOf("Trident")||-1!=kn().indexOf("MSIE")||-1!=kn().indexOf("Edge"));function br(g,V,G){for(const le in g)V.call(G,g[le],le,g)}function be(g){const V={};for(const G in g)V[G]=g[G];return V}const ze="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rt(g,V){let G,le;for(let gt=1;gt<arguments.length;gt++){for(G in le=arguments[gt],le)g[G]=le[G];for(let Ot=0;Ot<ze.length;Ot++)G=ze[Ot],Object.prototype.hasOwnProperty.call(le,G)&&(g[G]=le[G])}}function dt(g){var V=1;g=g.split(":");const G=[];for(;0<V&&g.length;)G.push(g.shift()),V--;return g.length&&G.push(g.join(":")),G}function wt(g){b.setTimeout(()=>{throw g},0)}function He(){var g=Am;let V=null;return g.g&&(V=g.g,g.g=g.g.next,g.g||(g.h=null),V.next=null),V}var sd=new class Vn{constructor(V,G){this.i=V,this.j=G,this.h=0,this.g=null}get(){let V;return 0<this.h?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}(()=>new vI,g=>g.reset());class vI{constructor(){this.next=this.g=this.h=null}set(V,G){this.h=V,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let od,tp=!1,Am=new class Bc{constructor(){this.h=this.g=null}add(V,G){const le=sd.get();le.set(V,G),this.h?this.h.next=le:this.g=le,this.h=le}},Ah=()=>{const g=b.Promise.resolve(void 0);od=()=>{g.then(qy)}};var qy=()=>{for(var g;g=He();){try{g.h.call(g.g)}catch(G){wt(G)}var V=sd;V.j(g),100>V.h&&(V.h++,g.next=V.g,V.g=g)}tp=!1};function _u(){this.s=this.s,this.C=this.C}function No(g,V){this.type=g,this.g=this.target=V,this.defaultPrevented=!1}_u.prototype.s=!1,_u.prototype.ma=function(){this.s||(this.s=!0,this.N())},_u.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},No.prototype.h=function(){this.defaultPrevented=!0};var EI=function(){if(!b.addEventListener||!Object.defineProperty)return!1;var g=!1,V=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const G=()=>{};b.addEventListener("test",G,V),b.removeEventListener("test",G,V)}catch{}return g}();function dl(g,V){if(No.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var G=this.type=g.type,le=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=V,V=g.relatedTarget){if(Br){e:{try{cr(V.nodeName);var gt=!0;break e}catch{}gt=!1}gt||(V=null)}}else"mouseover"==G?V=g.fromElement:"mouseout"==G&&(V=g.toElement);this.relatedTarget=V,le?(this.clientX=void 0!==le.clientX?le.clientX:le.pageX,this.clientY=void 0!==le.clientY?le.clientY:le.pageY,this.screenX=le.screenX||0,this.screenY=le.screenY||0):(this.clientX=void 0!==g.clientX?g.clientX:g.pageX,this.clientY=void 0!==g.clientY?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType="string"==typeof g.pointerType?g.pointerType:pC[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&dl.aa.h.call(this)}}Ht(dl,No);var pC={2:"touch",3:"pen",4:"mouse"};dl.prototype.h=function(){dl.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ad="closure_listenable_"+(1e6*Math.random()|0),Ec=0;function Qy(g,V,G,le,gt){this.listener=g,this.proxy=null,this.src=V,this.type=G,this.capture=!!le,this.ha=gt,this.key=++Ec,this.da=this.fa=!1}function np(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function bm(g){this.src=g,this.g={},this.h=0}function ws(g,V){var G=V.type;if(G in g.g){var Ot,le=g.g[G],gt=Array.prototype.indexOf.call(le,V,void 0);(Ot=0<=gt)&&Array.prototype.splice.call(le,gt,1),Ot&&(np(V),0==g.g[G].length&&(delete g.g[G],g.h--))}}function Sm(g,V,G,le){for(var gt=0;gt<g.length;++gt){var Ot=g[gt];if(!Ot.da&&Ot.listener==V&&Ot.capture==!!G&&Ot.ha==le)return gt}return-1}bm.prototype.add=function(g,V,G,le,gt){var Ot=g.toString();(g=this.g[Ot])||(g=this.g[Ot]=[],this.h++);var yn=Sm(g,V,le,gt);return-1<yn?(V=g[yn],G||(V.fa=!1)):((V=new Qy(V,this.src,Ot,!!le,gt)).fa=G,g.push(V)),V};var bh="closure_lm_"+(1e6*Math.random()|0),Pm={};function Xy(g,V,G,le,gt){if(le&&le.once)return Mm(g,V,G,le,gt);if(Array.isArray(V)){for(var Ot=0;Ot<V.length;Ot++)Xy(g,V[Ot],G,le,gt);return null}return G=Nm(G),g&&g[ad]?g.K(V,G,$(le)?!!le.capture:!!le,gt):rp(g,V,G,!1,le,gt)}function rp(g,V,G,le,gt,Ot){if(!V)throw Error("Invalid event type");var yn=$(gt)?!!gt.capture:!!gt,bi=ip(g);if(bi||(g[bh]=bi=new bm(g)),(G=bi.add(V,G,le,yn,Ot)).proxy)return G;if(le=function Yy(){const V=hl;return function g(G){return V.call(g.src,g.listener,G)}}(),G.proxy=le,le.src=g,le.listener=G,g.addEventListener)EI||(gt=yn),void 0===gt&&(gt=!1),g.addEventListener(V.toString(),le,gt);else if(g.attachEvent)g.attachEvent(Jy(V.toString()),le);else{if(!g.addListener||!g.removeListener)throw Error("addEventListener and attachEvent are unavailable.");g.addListener(le)}return G}function Mm(g,V,G,le,gt){if(Array.isArray(V)){for(var Ot=0;Ot<V.length;Ot++)Mm(g,V[Ot],G,le,gt);return null}return G=Nm(G),g&&g[ad]?g.L(V,G,$(le)?!!le.capture:!!le,gt):rp(g,V,G,!0,le,gt)}function Rm(g,V,G,le,gt){if(Array.isArray(V))for(var Ot=0;Ot<V.length;Ot++)Rm(g,V[Ot],G,le,gt);else le=$(le)?!!le.capture:!!le,G=Nm(G),g&&g[ad]?(g=g.i,(V=String(V).toString())in g.g&&-1<(G=Sm(Ot=g.g[V],G,le,gt))&&(np(Ot[G]),Array.prototype.splice.call(Ot,G,1),0==Ot.length&&(delete g.g[V],g.h--))):g&&(g=ip(g))&&(V=g.g[V.toString()],g=-1,V&&(g=Sm(V,G,le,gt)),(G=-1<g?V[g]:null)&&Om(G))}function Om(g){if("number"!=typeof g&&g&&!g.da){var V=g.src;if(V&&V[ad])ws(V.i,g);else{var G=g.type,le=g.proxy;V.removeEventListener?V.removeEventListener(G,le,g.capture):V.detachEvent?V.detachEvent(Jy(G),le):V.addListener&&V.removeListener&&V.removeListener(le),(G=ip(V))?(ws(G,g),0==G.h&&(G.src=null,V[bh]=null)):np(g)}}}function Jy(g){return g in Pm?Pm[g]:Pm[g]="on"+g}function hl(g,V){if(g.da)g=!0;else{V=new dl(V,this);var G=g.listener,le=g.ha||g.src;g.fa&&Om(g),g=G.call(le,V)}return g}function ip(g){return(g=g[bh])instanceof bm?g:null}var Sh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nm(g){return"function"==typeof g?g:(g[Sh]||(g[Sh]=function(V){return g.handleEvent(V)}),g[Sh])}function po(){_u.call(this),this.i=new bm(this),this.M=this,this.F=null}function xo(g,V){var G,le=g.F;if(le)for(G=[];le;le=le.F)G.push(le);if(g=g.M,le=V.type||V,"string"==typeof V)V=new No(V,g);else if(V instanceof No)V.target=V.target||g;else{var gt=V;rt(V=new No(le,g),gt)}if(gt=!0,G)for(var Ot=G.length-1;0<=Ot;Ot--){var yn=V.g=G[Ot];gt=Ph(yn,le,!0,V)&&gt}if(gt=Ph(yn=V.g=g,le,!0,V)&&gt,gt=Ph(yn,le,!1,V)&&gt,G)for(Ot=0;Ot<G.length;Ot++)gt=Ph(yn=V.g=G[Ot],le,!1,V)&&gt}function Ph(g,V,G,le){if(!(V=g.i.g[String(V)]))return!0;V=V.concat();for(var gt=!0,Ot=0;Ot<V.length;++Ot){var yn=V[Ot];if(yn&&!yn.da&&yn.capture==G){var bi=yn.listener,ko=yn.ha||yn.src;yn.fa&&ws(g.i,yn),gt=!1!==bi.call(ko,le)&&gt}}return gt&&!le.defaultPrevented}function cd(g,V,G){if("function"==typeof g)G&&(g=Ne(g,G));else{if(!g||"function"!=typeof g.handleEvent)throw Error("Invalid listener argument");g=Ne(g.handleEvent,g)}return 2147483647<Number(V)?-1:b.setTimeout(g,V||0)}function sp(g){g.g=cd(()=>{g.g=null,g.i&&(g.i=!1,sp(g))},g.l);const V=g.h;g.h=null,g.m.apply(null,V)}Ht(po,_u),po.prototype[ad]=!0,po.prototype.removeEventListener=function(g,V,G,le){Rm(this,g,V,G,le)},po.prototype.N=function(){if(po.aa.N.call(this),this.i){var V,g=this.i;for(V in g.g){for(var G=g.g[V],le=0;le<G.length;le++)np(G[le]);delete g.g[V],g.h--}}this.F=null},po.prototype.K=function(g,V,G,le){return this.i.add(String(g),V,!1,G,le)},po.prototype.L=function(g,V,G,le){return this.i.add(String(g),V,!0,G,le)};class yu extends _u{constructor(V,G){super(),this.m=V,this.l=G,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:sp(this)}N(){super.N(),this.g&&(b.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vu(g){_u.call(this),this.h=g,this.g={}}Ht(vu,_u);var xm=[];function ud(g){br(g.g,function(V,G){this.g.hasOwnProperty(G)&&Om(V)},g),g.g={}}vu.prototype.N=function(){vu.aa.N.call(this),ud(this)},vu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var km=b.JSON.stringify,II=b.JSON.parse,Fm=class{stringify(g){return b.JSON.stringify(g,void 0)}parse(g){return b.JSON.parse(g,void 0)}};function op(){}function ld(){}op.prototype.h=null;var ap={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dd(){No.call(this,"d")}function cp(){No.call(this,"c")}Ht(dd,No),Ht(cp,No);var Eu={},Zy=null;function fl(){return Zy=Zy||new po}function hd(g){No.call(this,Eu.La,g)}function Mh(g){const V=fl();xo(V,new hd(V))}function ev(g,V){No.call(this,Eu.STAT_EVENT,g),this.stat=V}function Qo(g){const V=fl();xo(V,new ev(V,g))}function tv(g,V){No.call(this,Eu.Ma,g),this.size=V}function Rh(g,V){if("function"!=typeof g)throw Error("Fn must not be null and must be a function");return b.setTimeout(function(){g()},V)}function Oh(){this.g=!0}function $c(g,V,G,le){g.info(function(){return"XMLHTTP TEXT ("+V+"): "+function DI(g,V){if(!g.g)return V;if(!V)return null;try{var G=JSON.parse(V);if(G)for(g=0;g<G.length;g++)if(Array.isArray(G[g])){var le=G[g];if(!(2>le.length)){var gt=le[1];if(Array.isArray(gt)&&!(1>gt.length)){var Ot=gt[0];if("noop"!=Ot&&"stop"!=Ot&&"close"!=Ot)for(var yn=1;yn<gt.length;yn++)gt[yn]=""}}}return km(G)}catch{return V}}(g,G)+(le?" "+le:"")})}Eu.La="serverreachability",Ht(hd,No),Eu.STAT_EVENT="statevent",Ht(ev,No),Eu.Ma="timingevent",Ht(tv,No),Oh.prototype.xa=function(){this.g=!1},Oh.prototype.info=function(){};var xh,Nh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function kh(){}function Iu(g,V,G,le){this.j=g,this.i=V,this.l=G,this.R=le||1,this.U=new vu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lm}function Lm(){this.i=null,this.g="",this.h=!1}Ht(kh,op),kh.prototype.g=function(){return new XMLHttpRequest},kh.prototype.i=function(){return{}},xh=new kh;var up={},lp={};function dp(g,V,G){g.L=1,g.v=Lh(Ic(V)),g.m=G,g.P=!0,nv(g,null)}function nv(g,V){g.F=Date.now(),fd(g),g.A=Ic(g.v);var G=g.A,le=g.R;Array.isArray(le)||(le=[String(le)]),OI(G.i,"t",le),g.C=0,G=g.j.J,g.h=new Lm,g.g=wv(g.j,G?V:null,!g.m),0<g.O&&(g.M=new yu(Ne(g.Y,g,g.g),g.O)),V=g.U,G=g.g,le=g.ca;var gt="readystatechange";Array.isArray(gt)||(gt&&(xm[0]=gt.toString()),gt=xm);for(var Ot=0;Ot<gt.length;Ot++){var yn=Xy(G,gt[Ot],le||V.handleEvent,!1,V.h||V);if(!yn)break;V.g[yn.key]=yn}V=g.H?be(g.H):{},g.m?(g.u||(g.u="POST"),V["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,V)):(g.u="GET",g.g.ea(g.A,g.u,null,V)),Mh(),function CI(g,V,G,le,gt,Ot){g.info(function(){if(g.g)if(Ot)for(var yn="",bi=Ot.split("&"),ko=0;ko<bi.length;ko++){var yi=bi[ko].split("=");if(1<yi.length){var Fo=yi[0];yi=yi[1];var Xo=Fo.split("_");yn=2<=Xo.length&&"type"==Xo[1]?yn+(Fo+"=")+yi+"&":yn+(Fo+"=redacted&")}}else yn=null;else yn=Ot;return"XMLHTTP REQ ("+le+") [attempt "+gt+"]: "+V+"\n"+G+"\n"+yn})}(g.i,g.u,g.A,g.l,g.R,g.m)}function rv(g){return!!g.g&&"GET"==g.u&&2!=g.L&&g.j.Ca}function AI(g,V){var G=g.C,le=V.indexOf("\n",G);return-1==le?lp:(G=Number(V.substring(G,le)),isNaN(G)?up:(le+=1)+G>V.length?lp:(V=V.slice(le,le+G),g.C=le+G,V))}function fd(g){g.S=Date.now()+g.I,hp(g,g.I)}function hp(g,V){if(null!=g.B)throw Error("WatchDog timer not null");g.B=Rh(Ne(g.ba,g),V)}function fp(g){g.B&&(b.clearTimeout(g.B),g.B=null)}function pl(g){0==g.j.G||g.J||Iv(g.j,g)}function Hc(g){fp(g);var V=g.M;V&&"function"==typeof V.ma&&V.ma(),g.M=null,ud(g.U),g.g&&(V=g.g,g.g=null,V.abort(),V.ma())}function Um(g,V){try{var G=g.j;if(0!=G.G&&(G.g==g||Fh(G.h,g)))if(!g.K&&Fh(G.h,g)&&3==G.G){try{var le=G.Da.g.parse(V)}catch{le=null}if(Array.isArray(le)&&3==le.length){var gt=le;if(0==gt[0]){e:if(!G.u){if(G.g){if(!(G.g.F+3e3<g.F))break e;Ip(G),$h(G)}Ym(G),Qo(18)}}else G.za=gt[1],0<G.za-G.T&&37500>gt[2]&&G.F&&0==G.v&&!G.C&&(G.C=Rh(Ne(G.Za,G),6e3));if(1>=Bm(G.h)&&G.ca){try{G.ca()}catch{}G.ca=void 0}}else yl(G,11)}else if((g.K||G.g==g)&&Ip(G),!Xn(V))for(gt=G.Da.g.parse(V),V=0;V<gt.length;V++){let yi=gt[V];if(G.T=yi[0],yi=yi[1],2==G.G)if("c"==yi[0]){G.K=yi[1],G.ia=yi[2];const Fo=yi[3];null!=Fo&&(G.la=Fo,G.j.info("VER="+G.la));const Xo=yi[4];null!=Xo&&(G.Aa=Xo,G.j.info("SVER="+G.Aa));const Ja=yi[5];null!=Ja&&"number"==typeof Ja&&0<Ja&&(G.L=le=1.5*Ja,G.j.info("backChannelRequestTimeoutMs_="+le)),le=G;const Cc=g.g;if(Cc){const vl=Cc.g?Cc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vl){var Ot=le.h;Ot.g||-1==vl.indexOf("spdy")&&-1==vl.indexOf("quic")&&-1==vl.indexOf("h2")||(Ot.j=Ot.l,Ot.g=new Set,Ot.h&&(Vh(Ot,Ot.h),Ot.h=null))}if(le.D){const n_=Cc.g?Cc.g.getResponseHeader("X-HTTP-Session-Id"):null;n_&&(le.ya=n_,Yi(le.I,le.D,n_))}}G.G=3,G.l&&G.l.ua(),G.ba&&(G.R=Date.now()-g.F,G.j.info("Handshake RTT: "+G.R+"ms"));var yn=g;if((le=G).qa=e_(le,le.J?le.ia:null,le.W),yn.K){jm(le.h,yn);var bi=yn,ko=le.L;ko&&(bi.I=ko),bi.B&&(fp(bi),fd(bi)),le.g=yn}else Gh(le);0<G.i.length&&vp(G)}else"stop"!=yi[0]&&"close"!=yi[0]||yl(G,7);else 3==G.G&&("stop"==yi[0]||"close"==yi[0]?"stop"==yi[0]?yl(G,7):_v(G):"noop"!=yi[0]&&G.l&&G.l.ta(yi),G.v=0)}Mh()}catch{}}Iu.prototype.ca=function(g){g=g.target;const V=this.M;V&&3==Gc(g)?V.j():this.Y(g)},Iu.prototype.Y=function(g){try{if(g==this.g)e:{const Xo=Gc(this.g);var V=this.g.Ba();if(this.g.Z(),!(3>Xo)&&(3!=Xo||this.g&&(this.h.h||this.g.oa()||Bh(this.g)))){this.J||4!=Xo||7==V||Mh(),fp(this);var G=this.g.Z();this.X=G;t:if(rv(this)){var le=Bh(this.g);g="";var gt=le.length,Ot=4==Gc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hc(this),pl(this);var yn="";break t}this.h.i=new b.TextDecoder}for(V=0;V<gt;V++)this.h.h=!0,g+=this.h.i.decode(le[V],{stream:!(Ot&&V==gt-1)});le.length=0,this.h.g+=g,this.C=0,yn=this.h.g}else yn=this.g.oa();if(this.o=200==G,function wI(g,V,G,le,gt,Ot,yn){g.info(function(){return"XMLHTTP RESP ("+le+") [ attempt "+gt+"]: "+V+"\n"+G+"\n"+Ot+" "+yn})}(this.i,this.u,this.A,this.l,this.R,Xo,G),this.o){if(this.T&&!this.K){t:{if(this.g){var bi,ko=this.g;if((bi=ko.g?ko.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xn(bi)){var yi=bi;break t}}yi=null}if(!(G=yi)){this.o=!1,this.s=3,Qo(12),Hc(this),pl(this);break e}$c(this.i,this.l,G,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Um(this,G)}if(this.P){let Cc;for(G=!0;!this.J&&this.C<yn.length;){if(Cc=AI(this,yn),Cc==lp){4==Xo&&(this.s=4,Qo(14),G=!1),$c(this.i,this.l,null,"[Incomplete Response]");break}if(Cc==up){this.s=4,Qo(15),$c(this.i,this.l,yn,"[Invalid Chunk]"),G=!1;break}$c(this.i,this.l,Cc,null),Um(this,Cc)}if(rv(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Xo||0!=yn.length||this.h.h||(this.s=1,Qo(16),G=!1),this.o=this.o&&G,G){if(0<yn.length&&!this.W){this.W=!0;var Fo=this.j;Fo.g==this&&Fo.ba&&!Fo.M&&(Fo.j.info("Great, no buffering proxy detected. Bytes received: "+yn.length),Jm(Fo),Fo.M=!0,Qo(11))}}else $c(this.i,this.l,yn,"[Invalid Chunked Response]"),Hc(this),pl(this)}else $c(this.i,this.l,yn,null),Um(this,yn);4==Xo&&Hc(this),this.o&&!this.J&&(4==Xo?Iv(this.j,this):(this.o=!1,fd(this)))}else(function mv(g){const V={};g=(g.g&&2<=Gc(g)&&g.g.getAllResponseHeaders()||"").split("\r\n");for(let le=0;le<g.length;le++){if(Xn(g[le]))continue;var G=dt(g[le]);const gt=G[0];if("string"!=typeof(G=G[1]))continue;G=G.trim();const Ot=V[gt]||[];V[gt]=Ot,Ot.push(G)}!function et(g,V){for(const G in g)V.call(void 0,g[G],G,g)}(V,function(le){return le.join(", ")})})(this.g),400==G&&0<yn.indexOf("Unknown SID")?(this.s=3,Qo(12)):(this.s=0,Qo(13)),Hc(this),pl(this)}}}catch{}},Iu.prototype.cancel=function(){this.J=!0,Hc(this)},Iu.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(function TI(g,V){g.info(function(){return"TIMEOUT: "+V})}(this.i,this.A),2!=this.L&&(Mh(),Qo(17)),Hc(this),this.s=2,pl(this)):hp(this,this.S-g)};var bI=class{constructor(g,V){this.g=g,this.map=V}};function iv(g){this.l=g||10,g=b.PerformanceNavigationTiming?0<(g=b.performance.getEntriesByType("navigation")).length&&("hq"==g[0].nextHopProtocol||"h2"==g[0].nextHopProtocol):!!(b.chrome&&b.chrome.loadTimes&&b.chrome.loadTimes()&&b.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sv(g){return!!g.h||!!g.g&&g.g.size>=g.j}function Bm(g){return g.h?1:g.g?g.g.size:0}function Fh(g,V){return g.h?g.h==V:!!g.g&&g.g.has(V)}function Vh(g,V){g.g?g.g.add(V):g.h=V}function jm(g,V){g.h&&g.h==V?g.h=null:g.g&&g.g.has(V)&&g.g.delete(V)}function $m(g){if(null!=g.h)return g.i.concat(g.h.D);if(null!=g.g&&0!==g.g.size){let V=g.i;for(const G of g.g.values())V=V.concat(G.D);return V}return en(g.i)}function Hm(g,V){if(g.forEach&&"function"==typeof g.forEach)g.forEach(V,void 0);else if(F(g)||"string"==typeof g)Array.prototype.forEach.call(g,V,void 0);else for(var G=function SI(g){if(g.na&&"function"==typeof g.na)return g.na();if(!g.V||"function"!=typeof g.V){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(F(g)||"string"==typeof g){var V=[];g=g.length;for(var G=0;G<g;G++)V.push(G);return V}V=[],G=0;for(const le in g)V[G++]=le;return V}}}(g),le=function ov(g){if(g.V&&"function"==typeof g.V)return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if("string"==typeof g)return g.split("");if(F(g)){for(var V=[],G=g.length,le=0;le<G;le++)V.push(g[le]);return V}for(le in V=[],G=0,g)V[G++]=g[le];return V}(g),gt=le.length,Ot=0;Ot<gt;Ot++)V.call(void 0,le[Ot],G&&G[Ot],g)}iv.prototype.cancel=function(){if(this.i=$m(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const g of this.g.values())g.cancel();this.g.clear()}};var av=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cu(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Cu){this.h=g.h,zm(this,g.j),this.o=g.o,this.g=g.g,Wm(this,g.s),this.l=g.l;var V=g.i,G=new pp;G.i=V.i,V.g&&(G.g=new Map(V.g),G.h=V.h),cv(this,G),this.m=g.m}else g&&(V=String(g).match(av))?(this.h=!1,zm(this,V[1]||"",!0),this.o=gl(V[2]||""),this.g=gl(V[3]||"",!0),Wm(this,V[4]),this.l=gl(V[5]||"",!0),cv(this,V[6]||"",!0),this.m=gl(V[7]||"")):(this.h=!1,this.i=new pp(null,this.h))}function Ic(g){return new Cu(g)}function zm(g,V,G){g.j=G?gl(V,!0):V,g.j&&(g.j=g.j.replace(/:$/,""))}function Wm(g,V){if(V){if(V=Number(V),isNaN(V)||0>V)throw Error("Bad port number "+V);g.s=V}else g.s=null}function cv(g,V,G){V instanceof pp?(g.i=V,function dv(g,V){V&&!g.j&&(ml(g),g.i=null,g.g.forEach(function(G,le){var gt=le.toLowerCase();le!=gt&&(MI(this,le),OI(this,gt,G))},g)),g.j=V}(g.i,g.h)):(G||(V=pd(V,gC)),g.i=new pp(V,g.h))}function Yi(g,V,G){g.i.set(V,G)}function Lh(g){return Yi(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function gl(g,V){return g?V?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function pd(g,V,G){return"string"==typeof g?(g=encodeURI(g).replace(V,uv),G&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function uv(g){return"%"+((g=g.charCodeAt(0))>>4&15).toString(16)+(15&g).toString(16)}Cu.prototype.toString=function(){var g=[],V=this.j;V&&g.push(pd(V,Km,!0),":");var G=this.g;return(G||"file"==V)&&(g.push("//"),(V=this.o)&&g.push(pd(V,Km,!0),"@"),g.push(encodeURIComponent(String(G)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(G=this.s)&&g.push(":",String(G))),(G=this.l)&&(this.g&&"/"!=G.charAt(0)&&g.push("/"),g.push(pd(G,"/"==G.charAt(0)?PI:lv,!0))),(G=this.i.toString())&&g.push("?",G),(G=this.m)&&g.push("#",pd(G,mC)),g.join("")};var Km=/[#\/\?@]/g,lv=/[#\?:]/g,PI=/[#\?]/g,gC=/[#\?@]/g,mC=/#/g;function pp(g,V){this.h=this.g=null,this.i=g||null,this.j=!!V}function ml(g){g.g||(g.g=new Map,g.h=0,g.i&&function Gm(g,V){if(g){g=g.split("&");for(var G=0;G<g.length;G++){var le=g[G].indexOf("="),gt=null;if(0<=le){var Ot=g[G].substring(0,le);gt=g[G].substring(le+1)}else Ot=g[G];V(Ot,gt?decodeURIComponent(gt.replace(/\+/g," ")):"")}}}(g.i,function(V,G){g.add(decodeURIComponent(V.replace(/\+/g," ")),G)}))}function MI(g,V){ml(g),V=Uh(g,V),g.g.has(V)&&(g.i=null,g.h-=g.g.get(V).length,g.g.delete(V))}function RI(g,V){return ml(g),V=Uh(g,V),g.g.has(V)}function OI(g,V,G){MI(g,V),0<G.length&&(g.i=null,g.g.set(Uh(g,V),en(G)),g.h+=G.length)}function Uh(g,V){return V=String(V),g.j&&(V=V.toLowerCase()),V}function _l(g,V,G,le,gt){try{gt&&(gt.onload=null,gt.onerror=null,gt.onabort=null,gt.ontimeout=null),le(G)}catch{}}function yC(){this.g=new Fm}function vC(g,V,G){const le=G||"";try{Hm(g,function(gt,Ot){let yn=gt;$(gt)&&(yn=km(gt)),V.push(le+Ot+"="+encodeURIComponent(yn))})}catch(gt){throw V.push(le+"type="+encodeURIComponent("_badmap")),gt}}function gp(g){this.l=g.Ub||null,this.j=g.eb||!1}function qm(g,V){po.call(this),this.D=g,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function NI(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}function mp(g){g.readyState=4,g.l=null,g.j=null,g.v=null,_p(g)}function _p(g){g.onreadystatechange&&g.onreadystatechange.call(g)}function fv(g){let V="";return br(g,function(G,le){V+=le,V+=":",V+=G,V+="\r\n"}),V}function wu(g,V,G){e:{for(le in G){var le=!1;break e}le=!0}le||(G=fv(G),"string"==typeof g?null!=G&&encodeURIComponent(String(G)):Yi(g,V,G))}function Ji(g){po.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=pp.prototype).add=function(g,V){ml(this),this.i=null,g=Uh(this,g);var G=this.g.get(g);return G||this.g.set(g,G=[]),G.push(V),this.h+=1,this},a.forEach=function(g,V){ml(this),this.g.forEach(function(G,le){G.forEach(function(gt){g.call(V,gt,le,this)},this)},this)},a.na=function(){ml(this);const g=Array.from(this.g.values()),V=Array.from(this.g.keys()),G=[];for(let le=0;le<V.length;le++){const gt=g[le];for(let Ot=0;Ot<gt.length;Ot++)G.push(V[le])}return G},a.V=function(g){ml(this);let V=[];if("string"==typeof g)RI(this,g)&&(V=V.concat(this.g.get(Uh(this,g))));else{g=Array.from(this.g.values());for(let G=0;G<g.length;G++)V=V.concat(g[G])}return V},a.set=function(g,V){return ml(this),this.i=null,RI(this,g=Uh(this,g))&&(this.h-=this.g.get(g).length),this.g.set(g,[V]),this.h+=1,this},a.get=function(g,V){return g&&0<(g=this.V(g)).length?String(g[0]):V},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],V=Array.from(this.g.keys());for(var G=0;G<V.length;G++){var le=V[G];const Ot=encodeURIComponent(String(le)),yn=this.V(le);for(le=0;le<yn.length;le++){var gt=Ot;""!==yn[le]&&(gt+="="+encodeURIComponent(String(yn[le]))),g.push(gt)}}return this.i=g.join("&")},Ht(gp,op),gp.prototype.g=function(){return new qm(this.l,this.j)},gp.prototype.i=function(g){return function(){return g}}({}),Ht(qm,po),(a=qm.prototype).open=function(g,V){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=V,this.readyState=1,_p(this)},a.send=function(g){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const V={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(V.body=g),(this.D||b).fetch(new Request(this.A,V)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mp(this)),this.readyState=0},a.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,_p(this)),this.g&&(this.readyState=3,_p(this),this.g)))if("arraybuffer"===this.responseType)g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof b.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;NI(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var V=g.value?g.value:new Uint8Array(0);(V=this.v.decode(V,{stream:!g.done}))&&(this.response=this.responseText+=V)}g.done?mp(this):_p(this),3==this.readyState&&NI(this)}},a.Ra=function(g){this.g&&(this.response=this.responseText=g,mp(this))},a.Qa=function(g){this.g&&(this.response=g,mp(this))},a.ga=function(){this.g&&mp(this)},a.setRequestHeader=function(g,V){this.u.append(g,V)},a.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],V=this.h.entries();for(var G=V.next();!G.done;)g.push((G=G.value)[0]+": "+G[1]),G=V.next();return g.join("\r\n")},Object.defineProperty(qm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(g){this.m=g?"include":"same-origin"}}),Ht(Ji,po);var xI=/^https?$/i,EC=["POST","PUT"];function Qm(g,V){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=V,g.m=5,pv(g),yp(g)}function pv(g){g.A||(g.A=!0,xo(g,"complete"),xo(g,"error"))}function kI(g){if(g.h&&typeof m<"u"&&(!g.v[1]||4!=Gc(g)||2!=g.Z()))if(g.u&&4==Gc(g))cd(g.Ea,0,g);else if(xo(g,"readystatechange"),4==Gc(g)){g.h=!1;try{const yn=g.Z();e:switch(yn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var G;if(!(G=V)){var le;if(le=0===yn){var gt=String(g.D).match(av)[1]||null;!gt&&b.self&&b.self.location&&(gt=b.self.location.protocol.slice(0,-1)),le=!xI.test(gt?gt.toLowerCase():"")}G=le}if(G)xo(g,"complete"),xo(g,"success");else{g.m=6;try{var Ot=2<Gc(g)?g.g.statusText:""}catch{Ot=""}g.l=Ot+" ["+g.Z()+"]",pv(g)}}finally{yp(g)}}}function yp(g,V){if(g.g){gv(g);const G=g.g,le=g.v[0]?()=>{}:null;g.g=null,g.v=null,V||xo(g,"ready");try{G.onreadystatechange=le}catch{}}}function gv(g){g.I&&(b.clearTimeout(g.I),g.I=null)}function Gc(g){return g.g?g.g.readyState:0}function Bh(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function jh(g,V,G){return G&&G.internalChannelParams&&G.internalChannelParams[g]||V}function Xm(g){this.Aa=0,this.i=[],this.j=new Oh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jh("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jh("baseRetryDelayMs",5e3,g),this.cb=jh("retryDelaySeedMs",1e4,g),this.Wa=jh("forwardChannelMaxRetries",2,g),this.wa=jh("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new iv(g&&g.concurrentRequestLimit),this.Da=new yC,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function _v(g){if(FI(g),3==g.G){var V=g.U++,G=Ic(g.I);if(Yi(G,"SID",g.K),Yi(G,"RID",V),Yi(G,"TYPE","terminate"),Hh(g,G),(V=new Iu(g,g.j,V)).L=2,V.v=Lh(Ic(G)),G=!1,b.navigator&&b.navigator.sendBeacon)try{G=b.navigator.sendBeacon(V.v.toString(),"")}catch{}!G&&b.Image&&((new Image).src=V.v,G=!0),G||(V.g=wv(V.j,null),V.g.ea(V.v)),V.F=Date.now(),fd(V)}Zm(g)}function $h(g){g.g&&(Jm(g),g.g.cancel(),g.g=null)}function FI(g){$h(g),g.u&&(b.clearTimeout(g.u),g.u=null),Ip(g),g.h.cancel(),g.s&&("number"==typeof g.s&&b.clearTimeout(g.s),g.s=null)}function vp(g){if(!sv(g.h)&&!g.s){g.s=!0;var V=g.Ga;od||Ah(),tp||(od(),tp=!0),Am.add(V,g),g.B=0}}function Ep(g,V){var G;G=V?V.l:g.U++;const le=Ic(g.I);Yi(le,"SID",g.K),Yi(le,"RID",G),Yi(le,"AID",g.T),Hh(g,le),g.m&&g.o&&wu(le,g.m,g.o),G=new Iu(g,g.j,G,g.B+1),null===g.m&&(G.H=g.o),V&&(g.i=V.D.concat(g.i)),V=vv(g,G,1e3),G.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Vh(g.h,G),dp(G,le,V)}function Hh(g,V){g.H&&br(g.H,function(G,le){Yi(V,le,G)}),g.l&&Hm({},function(G,le){Yi(V,le,G)})}function vv(g,V,G){G=Math.min(g.i.length,G);var le=g.l?Ne(g.l.Na,g.l,g):null;e:{var gt=g.i;let Ot=-1;for(;;){const yn=["count="+G];-1==Ot?0<G?(Ot=gt[0].g,yn.push("ofs="+Ot)):Ot=0:yn.push("ofs="+Ot);let bi=!0;for(let ko=0;ko<G;ko++){let yi=gt[ko].g;const Fo=gt[ko].map;if(yi-=Ot,0>yi)Ot=Math.max(0,gt[ko].g-100),bi=!1;else try{vC(Fo,yn,"req"+yi+"_")}catch{le&&le(Fo)}}if(bi){le=yn.join("&");break e}}}return g=g.i.splice(0,G),V.D=g,le}function Gh(g){if(!g.g&&!g.u){g.Y=1;var V=g.Fa;od||Ah(),tp||(od(),tp=!0),Am.add(V,g),g.v=0}}function Ym(g){return!(g.g||g.u||3<=g.v||(g.Y++,g.u=Rh(Ne(g.Fa,g),Cv(g,g.v)),g.v++,0))}function Jm(g){null!=g.A&&(b.clearTimeout(g.A),g.A=null)}function Ev(g){g.g=new Iu(g,g.j,"rpc",g.Y),null===g.m&&(g.g.H=g.o),g.g.O=0;var V=Ic(g.qa);Yi(V,"RID","rpc"),Yi(V,"SID",g.K),Yi(V,"AID",g.T),Yi(V,"CI",g.F?"0":"1"),!g.F&&g.ja&&Yi(V,"TO",g.ja),Yi(V,"TYPE","xmlhttp"),Hh(g,V),g.m&&g.o&&wu(V,g.m,g.o),g.L&&(g.g.I=g.L);var G=g.g;g=g.ia,G.L=1,G.v=Lh(Ic(V)),G.m=null,G.P=!0,nv(G,g)}function Ip(g){null!=g.C&&(b.clearTimeout(g.C),g.C=null)}function Iv(g,V){var G=null;if(g.g==V){Ip(g),Jm(g),g.g=null;var le=2}else{if(!Fh(g.h,V))return;G=V.D,jm(g.h,V),le=1}if(0!=g.G)if(V.o)if(1==le){G=V.m?V.m.length:0,V=Date.now()-V.F;var gt=g.B;xo(le=fl(),new tv(le,G)),vp(g)}else Gh(g);else if(3==(gt=V.s)||0==gt&&0<V.X||!(1==le&&function yv(g,V){return!(Bm(g.h)>=g.h.j-(g.s?1:0)||(g.s?(g.i=V.D.concat(g.i),0):1==g.G||2==g.G||g.B>=(g.Va?0:g.Wa)||(g.s=Rh(Ne(g.Ga,g,V),Cv(g,g.B)),g.B++,0)))}(g,V)||2==le&&Ym(g)))switch(G&&0<G.length&&(V=g.h,V.i=V.i.concat(G)),gt){case 1:yl(g,5);break;case 4:yl(g,10);break;case 3:yl(g,6);break;default:yl(g,2)}}function Cv(g,V){let G=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(G*=2),G*V}function yl(g,V){if(g.j.info("Error code "+V),2==V){var G=Ne(g.fb,g),le=g.Xa;const gt=!le;le=new Cu(le||"//www.google.com/images/cleardot.gif"),b.location&&"http"==b.location.protocol||zm(le,"https"),Lh(le),gt?function hv(g,V){const G=new Oh;if(b.Image){const le=new Image;le.onload=lt(_l,G,"TestLoadImage: loaded",!0,V,le),le.onerror=lt(_l,G,"TestLoadImage: error",!1,V,le),le.onabort=lt(_l,G,"TestLoadImage: abort",!1,V,le),le.ontimeout=lt(_l,G,"TestLoadImage: timeout",!1,V,le),b.setTimeout(function(){le.ontimeout&&le.ontimeout()},1e4),le.src=g}else V(!1)}(le.toString(),G):function _C(g,V){new Oh;const le=new AbortController,gt=setTimeout(()=>{le.abort(),_l(0,0,!1,V)},1e4);fetch(g,{signal:le.signal}).then(Ot=>{clearTimeout(gt),_l(0,0,!!Ot.ok,V)}).catch(()=>{clearTimeout(gt),_l(0,0,!1,V)})}(le.toString(),G)}else Qo(2);g.G=0,g.l&&g.l.sa(V),Zm(g),FI(g)}function Zm(g){if(g.G=0,g.ka=[],g.l){const V=$m(g.h);(0!=V.length||0!=g.i.length)&&(Qt(g.ka,V),Qt(g.ka,g.i),g.h.i.length=0,en(g.i),g.i.length=0),g.l.ra()}}function e_(g,V,G){var le=G instanceof Cu?Ic(G):new Cu(G);if(""!=le.g)V&&(le.g=V+"."+le.g),Wm(le,le.s);else{var gt=b.location;le=gt.protocol,V=V?V+"."+gt.hostname:gt.hostname,gt=+gt.port;var Ot=new Cu(null);le&&zm(Ot,le),V&&(Ot.g=V),gt&&Wm(Ot,gt),G&&(Ot.l=G),le=Ot}return V=g.ya,(G=g.D)&&V&&Yi(le,G,V),Yi(le,"VER",g.la),Hh(g,le),le}function wv(g,V,G){if(V&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return(V=new Ji(g.Ca&&!g.pa?new gp({eb:G}):g.pa)).Ha(g.J),V}function VI(){}function zh(){}function ua(g,V){po.call(this),this.g=new Xm(V),this.l=g,this.h=V&&V.messageUrlParams||null,g=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(g?g["X-WebChannel-Content-Type"]=V.messageContentType:g={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.va&&(g?g["X-WebChannel-Client-Profile"]=V.va:g={"X-WebChannel-Client-Profile":V.va}),this.g.S=g,(g=V&&V.Sb)&&!Xn(g)&&(this.g.m=g),this.v=V&&V.supportsCrossDomainXhr||!1,this.u=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!Xn(V)&&(this.g.D=V,null!==(g=this.h)&&V in g&&V in(g=this.h)&&delete g[V]),this.j=new gd(this)}function Tu(g){dd.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var V=g.__sm__;if(V){e:{for(const G in V){g=G;break e}g=void 0}(this.i=g)&&(g=this.i,V=null!==V&&g in V?V[g]:void 0),this.data=V}else this.data=g}function t_(){cp.call(this),this.status=1}function gd(g){this.g=g}(a=Ji.prototype).Ha=function(g){this.J=g},a.ea=function(g,V,G,le){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);V=V?V.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xh.g(),this.v=function jc(g){return g.h||(g.h=g.i())}(this.o?this.o:xh),this.g.onreadystatechange=Ne(this.Ea,this);try{this.B=!0,this.g.open(V,String(g),!0),this.B=!1}catch(Ot){return void Qm(this,Ot)}if(g=G||"",G=new Map(this.headers),le)if(Object.getPrototypeOf(le)===Object.prototype)for(var gt in le)G.set(gt,le[gt]);else{if("function"!=typeof le.keys||"function"!=typeof le.get)throw Error("Unknown input type for opt_headers: "+String(le));for(const Ot of le.keys())G.set(Ot,le.get(Ot))}le=Array.from(G.keys()).find(Ot=>"content-type"==Ot.toLowerCase()),gt=b.FormData&&g instanceof b.FormData,!(0<=Array.prototype.indexOf.call(EC,V,void 0))||le||gt||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ot,yn]of G)this.g.setRequestHeader(Ot,yn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gv(this),this.u=!0,this.g.send(g),this.u=!1}catch(Ot){Qm(this,Ot)}},a.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,xo(this,"complete"),xo(this,"abort"),yp(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yp(this,!0)),Ji.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?kI(this):this.bb())},a.bb=function(){kI(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<Gc(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(g){if(this.g){var V=this.g.responseText;return g&&0==V.indexOf(g)&&(V=V.substring(g.length)),II(V)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=Xm.prototype).la=8,a.G=1,a.connect=function(g,V,G,le){Qo(0),this.W=g,this.H=V||{},G&&void 0!==le&&(this.H.OSID=G,this.H.OAID=le),this.F=this.X,this.I=e_(this,null,this.W),vp(this)},a.Ga=function(g){if(this.s)if(this.s=null,1==this.G){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const gt=new Iu(this,this.j,g);let Ot=this.o;if(this.S&&(Ot?(Ot=be(Ot),rt(Ot,this.S)):Ot=this.S),null!==this.m||this.O||(gt.H=Ot,Ot=null),this.P)e:{for(var V=0,G=0;G<this.i.length;G++){var le=this.i[G];if(void 0===(le="__data__"in le.map&&"string"==typeof(le=le.map.__data__)?le.length:void 0))break;if(4096<(V+=le)){V=G;break e}if(4096===V||G===this.i.length-1){V=G+1;break e}}V=1e3}else V=1e3;V=vv(this,gt,V),Yi(G=Ic(this.I),"RID",g),Yi(G,"CVER",22),this.D&&Yi(G,"X-HTTP-Session-Id",this.D),Hh(this,G),Ot&&(this.O?V="headers="+encodeURIComponent(String(fv(Ot)))+"&"+V:this.m&&wu(G,this.m,Ot)),Vh(this.h,gt),this.Ua&&Yi(G,"TYPE","init"),this.P?(Yi(G,"$req",V),Yi(G,"SID","null"),gt.T=!0,dp(gt,G,null)):dp(gt,G,V),this.G=2}}else 3==this.G&&(g?Ep(this,g):0==this.i.length||sv(this.h)||Ep(this))},a.Fa=function(){if(this.u=null,Ev(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Rh(Ne(this.ab,this),g)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qo(10),$h(this),Ev(this))},a.Za=function(){null!=this.C&&(this.C=null,$h(this),Ym(this),Qo(19))},a.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Qo(2)):(this.j.info("Failed to ping google.com"),Qo(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=VI.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},zh.prototype.g=function(g,V){return new ua(g,V)},Ht(ua,po),ua.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ua.prototype.close=function(){_v(this.g)},ua.prototype.o=function(g){var V=this.g;if("string"==typeof g){var G={};G.__data__=g,g=G}else this.u&&((G={}).__data__=km(g),g=G);V.i.push(new bI(V.Ya++,g)),3==V.G&&vp(V)},ua.prototype.N=function(){this.g.l=null,delete this.j,_v(this.g),delete this.g,ua.aa.N.call(this)},Ht(Tu,dd),Ht(t_,cp),Ht(gd,VI),gd.prototype.ua=function(){xo(this.g,"a")},gd.prototype.ta=function(g){xo(this.g,new Tu(g))},gd.prototype.sa=function(g){xo(this.g,new t_)},gd.prototype.ra=function(){xo(this.g,"b")},zh.prototype.createWebChannel=zh.prototype.g,ua.prototype.send=ua.prototype.o,ua.prototype.open=ua.prototype.m,ua.prototype.close=ua.prototype.close,Kt=Lt.createWebChannelTransport=function(){return new zh},Je=Lt.getStatEventTarget=function(){return fl()},It=Lt.Event=Eu,yt=Lt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nh.NO_ERROR=0,Nh.TIMEOUT=8,Nh.HTTP_ERROR=6,ft=Lt.ErrorCode=Nh,Vm.COMPLETE="complete",qe=Lt.EventType=Vm,ld.EventType=ap,ap.OPEN="a",ap.CLOSE="b",ap.ERROR="c",ap.MESSAGE="d",po.prototype.listen=po.prototype.K,Re=Lt.WebChannel=ld,rn=Lt.FetchXmlHttpFactory=gp,Ji.prototype.listenOnce=Ji.prototype.L,Ji.prototype.getLastError=Ji.prototype.Ka,Ji.prototype.getLastErrorCode=Ji.prototype.Ba,Ji.prototype.getStatus=Ji.prototype.Z,Ji.prototype.getResponseJson=Ji.prototype.Oa,Ji.prototype.getResponseText=Ji.prototype.oa,Ji.prototype.send=Ji.prototype.ea,Ji.prototype.setWithCredentials=Ji.prototype.Ha,ut=Lt.XhrIo=Ji}).apply(typeof ln<"u"?ln:typeof self<"u"?self:typeof window<"u"?window:{});const gn="@firebase/firestore";class tn{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");let sn="10.13.1";const Cn=new Oe.Vy("@firebase/firestore");function Dn(){return Cn.logLevel}function st(a,...t){if(Cn.logLevel<=Oe.$b.DEBUG){const r=t.map(sr);Cn.debug(`Firestore (${sn}): ${a}`,...r)}}function In(a,...t){if(Cn.logLevel<=Oe.$b.ERROR){const r=t.map(sr);Cn.error(`Firestore (${sn}): ${a}`,...r)}}function Kn(a,...t){if(Cn.logLevel<=Oe.$b.WARN){const r=t.map(sr);Cn.warn(`Firestore (${sn}): ${a}`,...r)}}function sr(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function St(a="Unexpected state"){const t=`FIRESTORE (${sn}) INTERNAL ASSERTION FAILED: `+a;throw In(t),new Error(t)}function _t(a,t){a||St()}function Nt(a,t){return a}const tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rt extends ce.g{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Yn{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}class tr{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class An{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(tn.UNAUTHENTICATED))}shutdown(){}}class bn{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class kr{constructor(t){this.t=t,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){var o=this;let u=this.i;const d=$=>this.i!==u?(u=this.i,r($)):Promise.resolve();let m=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new Yn,t.enqueueRetryable(()=>d(this.currentUser))};const b=()=>{const $=m;t.enqueueRetryable((0,ie.A)(function*(){yield $.promise,yield d(o.currentUser)}))},F=$=>{st("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=$,this.auth.addAuthTokenListener(this.o),b()};this.t.onInit($=>F($)),setTimeout(()=>{if(!this.auth){const $=this.t.getImmediate({optional:!0});$?F($):(st("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new Yn)}},0),b()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(o=>this.i!==t?(st("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(_t("string"==typeof o.accessToken),new tr(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return _t(null===t||"string"==typeof t),new tn(t)}}class Wr{constructor(t,r,o){this.l=t,this.h=r,this.P=o,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class jr{constructor(t,r,o){this.l=t,this.h=r,this.P=o}getToken(){return Promise.resolve(new Wr(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vi{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Or{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){const o=d=>{null!=d.error&&st("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.R;return this.R=d.token,st("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?r(d.token):Promise.resolve()};this.o=d=>{t.enqueueRetryable(()=>o(d))};const u=d=>{st("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.A.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.A.getImmediate({optional:!0});d?u(d):st("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(_t("string"==typeof r.token),this.R=r.token,new Vi(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Nn(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let o=0;o<a;o++)r[o]=Math.floor(256*Math.random());return r}class Li{static newId(){const r=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=Nn(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<r&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[d]%62))}return o}}function zt(a,t){return a<t?-1:a>t?1:0}function Un(a,t,r){return a.length===t.length&&a.every((o,u)=>r(o,t[u]))}function Nr(a){return a+"\0"}class Jt{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Rt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Rt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new Rt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Rt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Jt.fromMillis(Date.now())}static fromDate(t){return Jt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*r));return new Jt(r,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?zt(this.nanoseconds,t.nanoseconds):zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Zt(t)}static min(){return new Zt(new Jt(0,0))}static max(){return new Zt(new Jt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Kr{constructor(t,r,o){void 0===r?r=0:r>t.length&&St(),void 0===o?o=t.length-r:o>t.length-r&&St(),this.segments=t,this.offset=r,this.len=o}get length(){return this.len}isEqual(t){return 0===Kr.comparator(this,t)}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Kr?t.forEach(o=>{r.push(o)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,o=this.limit();r<o;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const o=Math.min(t.length,r.length);for(let u=0;u<o;u++){const d=t.get(u),m=r.get(u);if(d<m)return-1;if(d>m)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class Rn extends Kr{construct(t,r,o){return new Rn(t,r,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const o of t){if(o.indexOf("//")>=0)throw new Rt(tt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);r.push(...o.split("/").filter(u=>u.length>0))}return new Rn(r)}static emptyPath(){return new Rn([])}}const xr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ve extends Kr{construct(t,r,o){return new Ve(t,r,o)}static isValidIdentifier(t){return xr.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ve.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ve(["__name__"])}static fromServerFormat(t){const r=[];let o="",u=0;const d=()=>{if(0===o.length)throw new Rt(tt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(o),o=""};let m=!1;for(;u<t.length;){const b=t[u];if("\\"===b){if(u+1===t.length)throw new Rt(tt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const F=t[u+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new Rt(tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=F,u+=2}else"`"===b?(m=!m,u++):"."!==b||m?(o+=b,u++):(d(),u++)}if(d(),m)throw new Rt(tt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ve(r)}static emptyPath(){return new Ve([])}}class Ce{constructor(t){this.path=t}static fromPath(t){return new Ce(Rn.fromString(t))}static fromName(t){return new Ce(Rn.fromString(t).popFirst(5))}static empty(){return new Ce(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Rn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,r){return Rn.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ce(new Rn(t.slice()))}}class Ie{constructor(t,r,o,u){this.indexId=t,this.collectionGroup=r,this.fields=o,this.indexState=u}}function Qe(a){return a.fields.find(t=>2===t.kind)}function Mt(a){return a.fields.filter(t=>2!==t.kind)}Ie.UNKNOWN_ID=-1;class q{constructor(t,r){this.fieldPath=t,this.kind=r}}class se{constructor(t,r){this.sequenceNumber=t,this.offset=r}static empty(){return new se(0,Vt.min())}}function _e(a,t){const r=a.toTimestamp().seconds,o=a.toTimestamp().nanoseconds+1,u=Zt.fromTimestamp(1e9===o?new Jt(r+1,0):new Jt(r,o));return new Vt(u,Ce.empty(),t)}function Tt(a){return new Vt(a.readTime,a.key,-1)}class Vt{constructor(t,r,o){this.readTime=t,this.documentKey=r,this.largestBatchId=o}static min(){return new Vt(Zt.min(),Ce.empty(),-1)}static max(){return new Vt(Zt.max(),Ce.empty(),-1)}}function En(a,t){let r=a.readTime.compareTo(t.readTime);return 0!==r?r:(r=Ce.comparator(a.documentKey,t.documentKey),0!==r?r:zt(a.largestBatchId,t.largestBatchId))}const Bn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Sn(a){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,ie.A)(function*(a){if(a.code!==tt.FAILED_PRECONDITION||a.message!==Bn)throw a;st("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class ke{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&St(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new ke((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(t,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(r,d).next(o,u)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof ke?r:ke.resolve(r)}catch(r){return ke.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):ke.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):ke.reject(r)}static resolve(t){return new ke((r,o)=>{r(t)})}static reject(t){return new ke((r,o)=>{o(t)})}static waitFor(t){return new ke((r,o)=>{let u=0,d=0,m=!1;t.forEach(b=>{++u,b.next(()=>{++d,m&&d===u&&r()},F=>o(F))}),m=!0,d===u&&r()})}static or(t){let r=ke.resolve(!1);for(const o of t)r=r.next(u=>u?ke.resolve(u):o());return r}static forEach(t,r){const o=[];return t.forEach((u,d)=>{o.push(r.call(this,u,d))}),this.waitFor(o)}static mapArray(t,r){return new ke((o,u)=>{const d=t.length,m=new Array(d);let b=0;for(let F=0;F<d;F++){const $=F;r(t[$]).next(ne=>{m[$]=ne,++b,b===d&&o(m)},ne=>u(ne))}})}static doWhile(t,r){return new ke((o,u)=>{const d=()=>{!0===t()?r().next(()=>{d()},u):o()};d()})}}class $r{constructor(t,r){this.action=t,this.transaction=r,this.aborted=!1,this.V=new Yn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new or(t,r.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=Ye(o.target.error);this.V.reject(new or(t,u))}}static open(t,r,o,u){try{return new $r(r,t.transaction(u,o))}catch(d){throw new or(r,d)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(st("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const r=this.transaction.objectStore(t);return new Hi(r)}}class Qr{constructor(t,r,o){this.name=t,this.version=r,this.p=o,12.2===Qr.S((0,ce.ZQ)())&&In("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return st("SimpleDb","Removing database:",t),ti(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,ce.zW)())return!1;if(Qr.v())return!0;const t=(0,ce.ZQ)(),r=Qr.S(t),o=0<r&&r<10,u=Ms(t),d=0<u&&u<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||o||d)}static v(){var t;return typeof process<"u"&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.C)}static F(t,r){return t.store(r)}static S(t){const r=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(o)}M(t){var r=this;return(0,ie.A)(function*(){return r.db||(st("SimpleDb","Opening database:",r.name),r.db=yield new Promise((o,u)=>{const d=indexedDB.open(r.name,r.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new or(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const b=m.target.error;u("VersionError"===b.name?new Rt(tt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===b.name?new Rt(tt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+b):new or(t,b))},d.onupgradeneeded=m=>{st("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',m.oldVersion),r.p.O(m.target.result,d.transaction,m.oldVersion,r.version).next(()=>{st("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=o=>r.N(o)),r.db})()}L(t){this.N=t,this.db&&(this.db.onversionchange=r=>t(r))}runTransaction(t,r,o,u){var d=this;return(0,ie.A)(function*(){const m="readonly"===r;let b=0;for(;;){++b;try{d.db=yield d.M(t);const F=$r.open(d.db,t,m?"readonly":"readwrite",o),$=u(F).next(ne=>(F.g(),ne)).catch(ne=>(F.abort(ne),ke.reject(ne))).toPromise();return $.catch(()=>{}),yield F.m,$}catch(F){const $=F,ne="FirebaseError"!==$.name&&b<3;if(st("SimpleDb","Transaction failed with error:",$.message,"Retrying:",ne),d.close(),!ne)return Promise.reject($)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function Ms(a){const t=a.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class ls{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return ti(this.B.delete())}}class or extends Rt{constructor(t,r){super(tt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function ss(a){return"IndexedDbTransactionError"===a.name}class Hi{constructor(t){this.store=t}put(t,r){let o;return void 0!==r?(st("SimpleDb","PUT",this.store.name,t,r),o=this.store.put(r,t)):(st("SimpleDb","PUT",this.store.name,"<auto-key>",t),o=this.store.put(t)),ti(o)}add(t){return st("SimpleDb","ADD",this.store.name,t,t),ti(this.store.add(t))}get(t){return ti(this.store.get(t)).next(r=>(void 0===r&&(r=null),st("SimpleDb","GET",this.store.name,t,r),r))}delete(t){return st("SimpleDb","DELETE",this.store.name,t),ti(this.store.delete(t))}count(){return st("SimpleDb","COUNT",this.store.name),ti(this.store.count())}U(t,r){const o=this.options(t,r),u=o.index?this.store.index(o.index):this.store;if("function"==typeof u.getAll){const d=u.getAll(o.range);return new ke((m,b)=>{d.onerror=F=>{b(F.target.error)},d.onsuccess=F=>{m(F.target.result)}})}{const d=this.cursor(o),m=[];return this.W(d,(b,F)=>{m.push(F)}).next(()=>m)}}G(t,r){const o=this.store.getAll(t,null===r?void 0:r);return new ke((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}j(t,r){st("SimpleDb","DELETE ALL",this.store.name);const o=this.options(t,r);o.H=!1;const u=this.cursor(o);return this.W(u,(d,m,b)=>b.delete())}J(t,r){let o;r?o=t:(o={},r=t);const u=this.cursor(o);return this.W(u,r)}Y(t){const r=this.cursor({});return new ke((o,u)=>{r.onerror=d=>{const m=Ye(d.target.error);u(m)},r.onsuccess=d=>{const m=d.target.result;m?t(m.primaryKey,m.value).next(b=>{b?m.continue():o()}):o()}})}W(t,r){const o=[];return new ke((u,d)=>{t.onerror=m=>{d(m.target.error)},t.onsuccess=m=>{const b=m.target.result;if(!b)return void u();const F=new ls(b),$=r(b.primaryKey,b.value,F);if($ instanceof ke){const ne=$.catch(ge=>(F.done(),ke.reject(ge)));o.push(ne)}F.isDone?u():null===F.K?b.continue():b.continue(F.K)}}).next(()=>ke.waitFor(o))}options(t,r){let o;return void 0!==t&&("string"==typeof t?o=t:r=t),{index:o,range:r}}cursor(t){let r="next";if(t.reverse&&(r="prev"),t.index){const o=this.store.index(t.index);return t.H?o.openKeyCursor(t.range,r):o.openCursor(t.range,r)}return this.store.openCursor(t.range,r)}}function ti(a){return new ke((t,r)=>{a.onsuccess=o=>{t(o.target.result)},a.onerror=o=>{const u=Ye(o.target.error);r(u)}})}let vt=!1;function Ye(a){const t=Qr.S((0,ce.ZQ)());if(t>=12.2&&t<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const o=new Rt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vt||(vt=!0,setTimeout(()=>{throw o},0)),o}}return a}class kt{constructor(t,r){this.asyncQueue=t,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(t){var r=this;st("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,ie.A)(function*(){r.task=null;try{st("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(o){ss(o)?st("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield Sn(o)}yield r.X(6e4)}))}}class an{constructor(t,r){this.localStore=t,this.persistence=r}ee(t=50){var r=this;return(0,ie.A)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>r.te(o,t))})()}te(t,r){const o=new Set;let u=r,d=!0;return ke.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(m=>{if(null!==m&&!o.has(m))return st("IndexBackfiller",`Processing collection: ${m}`),this.ne(t,m,u).next(b=>{u-=b,o.add(m)});d=!1})).next(()=>r-u)}ne(t,r,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,r).next(u=>this.localStore.localDocuments.getNextDocuments(t,r,u,o).next(d=>{const m=d.changes;return this.localStore.indexManager.updateIndexEntries(t,m).next(()=>this.re(u,d)).next(b=>(st("IndexBackfiller",`Updating offset: ${b}`),this.localStore.indexManager.updateCollectionGroup(t,r,b))).next(()=>m.size)}))}re(t,r){let o=t;return r.changes.forEach((u,d)=>{const m=Tt(d);En(m,o)>0&&(o=m)}),new Vt(o.readTime,o.documentKey,Math.max(r.batchId,t.largestBatchId))}}let te=(()=>{class a{constructor(r,o){this.previousValue=r,o&&(o.sequenceNumberHandler=u=>this.ie(u),this.se=u=>o.writeSequenceNumber(u))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function ve(a){return null==a}function Ee(a){return 0===a&&1/a==-1/0}function ht(a){return"number"==typeof a&&Number.isInteger(a)&&!Ee(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function Xe(a){let t="";for(let r=0;r<a.length;r++)t.length>0&&(t=Bt(t)),t=Xt(a.get(r),t);return Bt(t)}function Xt(a,t){let r=t;const o=a.length;for(let u=0;u<o;u++){const d=a.charAt(u);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function Bt(a){return a+"\x01\x01"}function Mn(a){const t=a.length;if(_t(t>=2),2===t)return _t("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),Rn.emptyPath();const r=t-2,o=[];let u="";for(let d=0;d<t;){const m=a.indexOf("\x01",d);switch((m<0||m>r)&&St(),a.charAt(m+1)){case"\x01":const b=a.substring(d,m);let F;0===u.length?F=b:(u+=b,F=u,u=""),o.push(F);break;case"\x10":u+=a.substring(d,m),u+="\0";break;case"\x11":u+=a.substring(d,m+1);break;default:St()}d=m+2}return new Rn(o)}const wn=["userId","batchId"];function Sr(a,t){return[a,Xe(t)]}function ii(a,t,r){return[a,Xe(t),r]}const Er={},ui=["prefixPath","collectionGroup","readTime","documentId"],qr=["prefixPath","collectionGroup","documentId"],Si=["collectionGroup","readTime","prefixPath","documentId"],Ir=["canonicalId","targetId"],Dr=["targetId","path"],li=["path","targetId"],nr=["collectionId","parent"],Fr=["indexId","uid"],di=["uid","sequenceNumber"],vi=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ei=["indexId","uid","orderedDocumentKey"],On=["userId","collectionPath","documentId"],ur=["userId","collectionPath","largestBatchId"],Vo=["userId","collectionGroup","largestBatchId"],Gi=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oo=[...Gi,"documentOverlays"],Yo=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],la=Yo,yo=[...la,"indexConfiguration","indexState","indexEntries"],rr=yo,vo=[...yo,"globals"];class xs extends qn{constructor(t,r){super(),this._e=t,this.currentSequenceNumber=r}}function wr(a,t){const r=Nt(a);return Qr.F(r._e,t)}function Lo(a){let t=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t++;return t}function qs(a,t){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t(r,a[r])}function Rs(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}class Pr{constructor(t,r){this.comparator=t,this.root=r||Ii.EMPTY}insert(t,r){return new Pr(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Ii.BLACK,null,null))}remove(t){return new Pr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ii.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(0===o)return r.value;o<0?r=r.left:o>0&&(r=r.right)}return null}indexOf(t){let r=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(t,o.key);if(0===u)return r+o.left.size;u<0?o=o.left:(r+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,o)=>(t(r,o),!1))}toString(){const t=[];return this.inorderTraversal((r,o)=>(t.push(`${r}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ui(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ui(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ui(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ui(this.root,t,this.comparator,!0)}}class Ui{constructor(t,r,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!t.isEmpty();)if(d=r?o(t.key,r):1,r&&u&&(d*=-1),d<0)t=this.isReverse?t.left:t.right;else{if(0===d){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ii{constructor(t,r,o,u,d){this.key=t,this.value=r,this.color=o??Ii.RED,this.left=u??Ii.EMPTY,this.right=d??Ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,o,u,d){return new Ii(t??this.key,r??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const d=o(t,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===d?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ii.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let o,u=this;if(r(t,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(t,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(t,u.key)){if(u.right.isEmpty())return Ii.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(t,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw St();const t=this.left.check();if(t!==this.right.check())throw St();return t+(this.isRed()?0:1)}}Ii.EMPTY=null,Ii.RED=!0,Ii.BLACK=!1,Ii.EMPTY=new class{constructor(){this.size=0}get key(){throw St()}get value(){throw St()}get color(){throw St()}get left(){throw St()}get right(){throw St()}copy(t,r,o,u,d){return this}insert(t,r,o){return new Ii(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cr{constructor(t){this.comparator=t,this.data=new Pr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,o)=>(t(r),!1))}forEachInRange(t,r){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,t[1])>=0)return;r(u.key)}}forEachWhile(t,r){let o;for(o=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new fs(this.data.getIterator())}getIteratorFrom(t){return new fs(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(o=>{r=r.add(o)}),r}isEqual(t){if(!(t instanceof Cr)||this.size!==t.size)return!1;const r=this.data.getIterator(),o=t.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Cr(this.comparator);return r.data=t,r}}class fs{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qs(a){return a.hasNext()?a.getNext():void 0}class Xr{constructor(t){this.fields=t,t.sort(Ve.comparator)}static empty(){return new Xr([])}unionWith(t){let r=new Cr(Ve.comparator);for(const o of this.fields)r=r.add(o);for(const o of t)r=r.add(o);return new Xr(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Un(this.fields,t.fields,(r,o)=>r.isEqual(o))}}class Uo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Hr{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Uo("Invalid base64 string: "+d):d}}(t);return new Hr(r)}static fromUint8Array(t){const r=function(u){let d="";for(let m=0;m<u.length;++m)d+=String.fromCharCode(u[m]);return d}(t);return new Hr(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const o=new Uint8Array(r.length);for(let u=0;u<r.length;u++)o[u]=r.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Hr.EMPTY_BYTE_STRING=new Hr("");const ei=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(a){if(_t(!!a),"string"==typeof a){let t=0;const r=ei.exec(a);if(_t(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),t=Number(u)}const o=new Date(a);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:dn(a.seconds),nanos:dn(a.nanos)}}function dn(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function si(a){return"string"==typeof a?Hr.fromBase64String(a):Hr.fromUint8Array(a)}function ps(a){var t,r;return"server_timestamp"===(null===(r=((null===(t=a?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function ks(a){const t=a.mapValue.fields.__previous_value__;return ps(t)?ks(t):t}function gs(a){const t=os(a.mapValue.fields.__local_write_time__.timestampValue);return new Jt(t.seconds,t.nanos)}class Xs{constructor(t,r,o,u,d,m,b,F,$){this.databaseId=t,this.appId=r,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=b,this.longPollingOptions=F,this.useFetchStreams=$}}class Pi{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new Pi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Pi&&t.projectId===this.projectId&&t.database===this.database}}const es={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zi={nullValue:"NULL_VALUE"};function Bi(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?ps(a)?4:Io(a)?9007199254740991:Ls(a)?10:11:St()}function ts(a,t){if(a===t)return!0;const r=Bi(a);if(r!==Bi(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return gs(a).isEqual(gs(t));case 3:return function(u,d){if("string"==typeof u.timestampValue&&"string"==typeof d.timestampValue&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const m=os(u.timestampValue),b=os(d.timestampValue);return m.seconds===b.seconds&&m.nanos===b.nanos}(a,t);case 5:return a.stringValue===t.stringValue;case 6:return d=t,si(a.bytesValue).isEqual(si(d.bytesValue));case 7:return a.referenceValue===t.referenceValue;case 8:return function(u,d){return dn(u.geoPointValue.latitude)===dn(d.geoPointValue.latitude)&&dn(u.geoPointValue.longitude)===dn(d.geoPointValue.longitude)}(a,t);case 2:return function(u,d){if("integerValue"in u&&"integerValue"in d)return dn(u.integerValue)===dn(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const m=dn(u.doubleValue),b=dn(d.doubleValue);return m===b?Ee(m)===Ee(b):isNaN(m)&&isNaN(b)}return!1}(a,t);case 9:return Un(a.arrayValue.values||[],t.arrayValue.values||[],ts);case 10:case 11:return function(u,d){const m=u.mapValue.fields||{},b=d.mapValue.fields||{};if(Lo(m)!==Lo(b))return!1;for(const F in m)if(m.hasOwnProperty(F)&&(void 0===b[F]||!ts(m[F],b[F])))return!1;return!0}(a,t);default:return St()}var d}function Fs(a,t){return void 0!==(a.values||[]).find(r=>ts(r,t))}function ji(a,t){if(a===t)return 0;const r=Bi(a),o=Bi(t);if(r!==o)return zt(r,o);switch(r){case 0:case 9007199254740991:return 0;case 1:return zt(a.booleanValue,t.booleanValue);case 2:return function(d,m){const b=dn(d.integerValue||d.doubleValue),F=dn(m.integerValue||m.doubleValue);return b<F?-1:b>F?1:b===F?0:isNaN(b)?isNaN(F)?0:-1:1}(a,t);case 3:return Bo(a.timestampValue,t.timestampValue);case 4:return Bo(gs(a),gs(t));case 5:return zt(a.stringValue,t.stringValue);case 6:return function(d,m){const b=si(d),F=si(m);return b.compareTo(F)}(a.bytesValue,t.bytesValue);case 7:return function(d,m){const b=d.split("/"),F=m.split("/");for(let $=0;$<b.length&&$<F.length;$++){const ne=zt(b[$],F[$]);if(0!==ne)return ne}return zt(b.length,F.length)}(a.referenceValue,t.referenceValue);case 8:return function(d,m){const b=zt(dn(d.latitude),dn(m.latitude));return 0!==b?b:zt(dn(d.longitude),dn(m.longitude))}(a.geoPointValue,t.geoPointValue);case 9:return ns(a.arrayValue,t.arrayValue);case 10:return function(d,m){var b,F,$,ne;const lt=null===(b=(d.fields||{}).value)||void 0===b?void 0:b.arrayValue,Ht=null===(F=(m.fields||{}).value)||void 0===F?void 0:F.arrayValue,en=zt((null===($=lt?.values)||void 0===$?void 0:$.length)||0,(null===(ne=Ht?.values)||void 0===ne?void 0:ne.length)||0);return 0!==en?en:ns(lt,Ht)}(a.mapValue,t.mapValue);case 11:return function(d,m){if(d===es.mapValue&&m===es.mapValue)return 0;if(d===es.mapValue)return 1;if(m===es.mapValue)return-1;const b=d.fields||{},F=Object.keys(b),$=m.fields||{},ne=Object.keys($);F.sort(),ne.sort();for(let ge=0;ge<F.length&&ge<ne.length;++ge){const Ne=zt(F[ge],ne[ge]);if(0!==Ne)return Ne;const lt=ji(b[F[ge]],$[ne[ge]]);if(0!==lt)return lt}return zt(F.length,ne.length)}(a.mapValue,t.mapValue);default:throw St()}}function Bo(a,t){if("string"==typeof a&&"string"==typeof t&&a.length===t.length)return zt(a,t);const r=os(a),o=os(t),u=zt(r.seconds,o.seconds);return 0!==u?u:zt(r.nanos,o.nanos)}function ns(a,t){const r=a.values||[],o=t.values||[];for(let u=0;u<r.length&&u<o.length;++u){const d=ji(r[u],o[u]);if(d)return d}return zt(r.length,o.length)}function Mi(a){return Eo(a)}function Eo(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const o=os(r);return`time(${o.seconds},${o.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?si(a.bytesValue).toBase64():"referenceValue"in a?Ce.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Eo(d);return o+"]"}(a.arrayValue):"mapValue"in a?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Eo(r.fields[m])}`;return u+"}"}(a.mapValue):St()}function $i(a,t){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${t.path.canonicalString()}`}}function ms(a){return!!a&&"integerValue"in a}function Vs(a){return!!a&&"arrayValue"in a}function Jo(a){return!!a&&"nullValue"in a}function Ys(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Wi(a){return!!a&&"mapValue"in a}function Ls(a){var t,r;return"__vector__"===(null===(r=((null===(t=a?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Ci(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const t={mapValue:{fields:{}}};return qs(a.mapValue.fields,(r,o)=>t.mapValue.fields[r]=Ci(o)),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Ci(a.arrayValue.values[r]);return t}return Object.assign({},a)}function Io(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}const Zo={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function wi(a){return"nullValue"in a?zi:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?$i(Pi.empty(),Ce.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?Ls(a)?Zo:{mapValue:{}}:St()}function yr(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?$i(Pi.empty(),Ce.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?Zo:"mapValue"in a?Ls(a)?{mapValue:{}}:es:St()}function Us(a,t){const r=ji(a.value,t.value);return 0!==r?r:a.inclusive&&!t.inclusive?-1:!a.inclusive&&t.inclusive?1:0}function ha(a,t){const r=ji(a.value,t.value);return 0!==r?r:a.inclusive&&!t.inclusive?1:!a.inclusive&&t.inclusive?-1:0}class Yr{constructor(t){this.value=t}static empty(){return new Yr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let o=0;o<t.length-1;++o)if(r=(r.mapValue.fields||{})[t.get(o)],!Wi(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ci(r)}setAll(t){let r=Ve.emptyPath(),o={},u=[];t.forEach((m,b)=>{if(!r.isImmediateParentOf(b)){const F=this.getFieldsMap(r);this.applyChanges(F,o,u),o={},u=[],r=b.popLast()}m?o[b.lastSegment()]=Ci(m):u.push(b.lastSegment())});const d=this.getFieldsMap(r);this.applyChanges(d,o,u)}delete(t){const r=this.field(t.popLast());Wi(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return ts(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let o=0;o<t.length;++o){let u=r.mapValue.fields[t.get(o)];Wi(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[t.get(o)]=u),r=u}return r.mapValue.fields}applyChanges(t,r,o){qs(r,(u,d)=>t[u]=d);for(const u of o)delete t[u]}clone(){return new Yr(Ci(this.value))}}function co(a){const t=[];return qs(a.fields,(r,o)=>{const u=new Ve([r]);if(Wi(o)){const d=co(o.mapValue).fields;if(0===d.length)t.push(u);else for(const m of d)t.push(u.child(m))}else t.push(u)}),new Xr(t)}class ar{constructor(t,r,o,u,d,m,b){this.key=t,this.documentType=r,this.version=o,this.readTime=u,this.createTime=d,this.data=m,this.documentState=b}static newInvalidDocument(t){return new ar(t,0,Zt.min(),Zt.min(),Zt.min(),Yr.empty(),0)}static newFoundDocument(t,r,o,u){return new ar(t,1,r,Zt.min(),o,u,0)}static newNoDocument(t,r){return new ar(t,2,r,Zt.min(),Zt.min(),Yr.empty(),0)}static newUnknownDocument(t,r){return new ar(t,3,r,Zt.min(),Zt.min(),Yr.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Zt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Yr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ar&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ar(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ds{constructor(t,r){this.position=t,this.inclusive=r}}function _s(a,t,r){let o=0;for(let u=0;u<a.position.length;u++){const d=t[u],m=a.position[u];if(o=d.field.isKeyField()?Ce.comparator(Ce.fromName(m.referenceValue),r.key):ji(m,r.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Co(a,t){if(null===a)return null===t;if(null===t||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!ts(a.position[r],t.position[r]))return!1;return!0}class xi{constructor(t,r="asc"){this.field=t,this.dir=r}}function H(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}class W{}class x extends W{constructor(t,r,o){super(),this.field=t,this.op=r,this.value=o}static create(t,r,o){return t.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(t,r,o):new jo(t,r,o):"array-contains"===r?new pa(t,o):"in"===r?new Va(t,o):"not-in"===r?new La(t,o):"array-contains-any"===r?new Zs(t,o):new x(t,r,o)}static createKeyFieldInFilter(t,r,o){return"in"===r?new fa(t,o):new Jr(t,o)}matches(t){const r=t.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(ji(r,this.value)):null!==r&&Bi(this.value)===Bi(r)&&this.matchesComparison(ji(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return St()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Z extends W{constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new Z(t,r)}matches(t){return Ae(this)?void 0===this.filters.find(r=>!r.matches(t)):void 0!==this.filters.find(r=>r.matches(t))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ae(a){return"and"===a.op}function pn(a){return"or"===a.op}function Jn(a){return ys(a)&&Ae(a)}function ys(a){for(const t of a.filters)if(t instanceof Z)return!1;return!0}function Js(a){if(a instanceof x)return a.field.canonicalString()+a.op.toString()+Mi(a.value);if(Jn(a))return a.filters.map(t=>Js(t)).join(",");{const t=a.filters.map(r=>Js(r)).join(",");return`${a.op}(${t})`}}function fi(a,t){return a instanceof x?(o=a,(u=t)instanceof x&&o.op===u.op&&o.field.isEqual(u.field)&&ts(o.value,u.value)):a instanceof Z?function(o,u){return u instanceof Z&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((d,m,b)=>d&&fi(m,u.filters[b]),!0)}(a,t):void St();var o,u}function Ts(a,t){const r=a.filters.concat(t);return Z.create(r,a.op)}function Ta(a){return a instanceof x?`${(r=a).field.canonicalString()} ${r.op} ${Mi(r.value)}`:a instanceof Z?function(r){return r.op.toString()+" {"+r.getFilters().map(Ta).join(" ,")+"}"}(a):"Filter";var r}class jo extends x{constructor(t,r,o){super(t,r,o),this.key=Ce.fromName(o.referenceValue)}matches(t){const r=Ce.comparator(t.key,this.key);return this.matchesComparison(r)}}class fa extends x{constructor(t,r){super(t,"in",r),this.keys=Da(0,r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class Jr extends x{constructor(t,r){super(t,"not-in",r),this.keys=Da(0,r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function Da(a,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map(o=>Ce.fromName(o.referenceValue))}class pa extends x{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Vs(r)&&Fs(r.arrayValue,this.value)}}class Va extends x{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return null!==r&&Fs(this.value.arrayValue,r)}}class La extends x{constructor(t,r){super(t,"not-in",r)}matches(t){if(Fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return null!==r&&!Fs(this.value.arrayValue,r)}}class Zs extends x{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Vs(r)||!r.arrayValue.values)&&r.arrayValue.values.some(o=>Fs(this.value.arrayValue,o))}}class Ua{constructor(t,r=null,o=[],u=[],d=null,m=null,b=null){this.path=t,this.collectionGroup=r,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=b,this.ue=null}}function ga(a,t=null,r=[],o=[],u=null,d=null,m=null){return new Ua(a,t,r,o,u,d,m)}function $o(a){const t=Nt(a);if(null===t.ue){let r=t.path.canonicalString();null!==t.collectionGroup&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(o=>Js(o)).join(","),r+="|ob:",r+=t.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),ve(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>Mi(o)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>Mi(o)).join(",")),t.ue=r}return t.ue}function wo(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!H(a.orderBy[r],t.orderBy[r]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!fi(a.filters[r],t.filters[r]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!Co(a.startAt,t.startAt)&&Co(a.endAt,t.endAt)}function Aa(a){return Ce.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function ea(a,t){return a.filters.filter(r=>r instanceof x&&r.field.isEqual(t))}function To(a,t,r){let o=zi,u=!0;for(const d of ea(a,t)){let m=zi,b=!0;switch(d.op){case"<":case"<=":m=wi(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,b=!1;break;case"!=":case"not-in":m=zi}Us({value:o,inclusive:u},{value:m,inclusive:b})<0&&(o=m,u=b)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(t)){const m=r.position[d];Us({value:o,inclusive:u},{value:m,inclusive:r.inclusive})<0&&(o=m,u=r.inclusive);break}return{value:o,inclusive:u}}function lr(a,t,r){let o=es,u=!0;for(const d of ea(a,t)){let m=es,b=!0;switch(d.op){case">=":case">":m=yr(d.value),b=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,b=!1;break;case"!=":case"not-in":m=es}ha({value:o,inclusive:u},{value:m,inclusive:b})>0&&(o=m,u=b)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(t)){const m=r.position[d];ha({value:o,inclusive:u},{value:m,inclusive:r.inclusive})>0&&(o=m,u=r.inclusive);break}return{value:o,inclusive:u}}class Gr{constructor(t,r=null,o=[],u=[],d=null,m="F",b=null,F=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=b,this.endAt=F,this.ce=null,this.le=null,this.he=null}}function ni(a,t,r,o,u,d,m,b){return new Gr(a,t,r,o,u,d,m,b)}function Ri(a){return new Gr(a)}function Oi(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function ma(a){return null!==a.collectionGroup}function vs(a){const t=Nt(a);if(null===t.ce){t.ce=[];const r=new Set;for(const d of t.explicitOrderBy)t.ce.push(d),r.add(d.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let b=new Cr(Ve.comparator);return m.filters.forEach(F=>{F.getFlattenedFilters().forEach($=>{$.isInequality()&&(b=b.add($.field))})}),b})(t).forEach(d=>{r.has(d.canonicalString())||d.isKeyField()||t.ce.push(new xi(d,o))}),r.has(Ve.keyField().canonicalString())||t.ce.push(new xi(Ve.keyField(),o))}return t.ce}function Ki(a){const t=Nt(a);return t.le||(t.le=function Tc(a,t){if("F"===a.limitType)return ga(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map(u=>new xi(u.field,"desc"===u.dir?"asc":"desc"));const r=a.endAt?new ds(a.endAt.position,a.endAt.inclusive):null,o=a.startAt?new ds(a.startAt.position,a.startAt.inclusive):null;return ga(a.path,a.collectionGroup,t,a.filters,a.limit,r,o)}}(t,vs(a))),t.le}function Do(a,t){const r=a.filters.concat([t]);return new Gr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function Ao(a,t,r){return new Gr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,r,a.startAt,a.endAt)}function Y(a,t){return wo(Ki(a),Ki(t))&&a.limitType===t.limitType}function C(a){return`${$o(Ki(a))}|lt:${a.limitType}`}function D(a){return`Query(target=${function(r){let o=r.path.canonicalString();return null!==r.collectionGroup&&(o+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(o+=`, filters: [${r.filters.map(u=>Ta(u)).join(", ")}]`),ve(r.limit)||(o+=", limit: "+r.limit),r.orderBy.length>0&&(o+=`, orderBy: [${r.orderBy.map(u=>{return`${(m=u).field.canonicalString()} (${m.dir})`;var m}).join(", ")}]`),r.startAt&&(o+=", startAt: ",o+=r.startAt.inclusive?"b:":"a:",o+=r.startAt.position.map(u=>Mi(u)).join(",")),r.endAt&&(o+=", endAt: ",o+=r.endAt.inclusive?"a:":"b:",o+=r.endAt.position.map(u=>Mi(u)).join(",")),`Target(${o})`}(Ki(a))}; limitType=${a.limitType})`}function L(a,t){return t.isFoundDocument()&&function(o,u){const d=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(d):Ce.isDocumentKey(o.path)?o.path.isEqual(d):o.path.isImmediateParentOf(d)}(a,t)&&function(o,u){for(const d of vs(o))if(!d.field.isKeyField()&&null===u.data.field(d.field))return!1;return!0}(a,t)&&function(o,u){for(const d of o.filters)if(!d.matches(u))return!1;return!0}(a,t)&&(u=t,!((o=a).startAt&&!function(m,b,F){const $=_s(m,b,F);return m.inclusive?$<=0:$<0}(o.startAt,vs(o),u)||o.endAt&&!function(m,b,F){const $=_s(m,b,F);return m.inclusive?$>=0:$>0}(o.endAt,vs(o),u)));var o,u}function K(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function he(a){return(t,r)=>{let o=!1;for(const u of vs(a)){const d=Pe(u,t,r);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Pe(a,t,r){const o=a.field.isKeyField()?Ce.comparator(t.key,r.key):function(d,m,b){const F=m.data.field(d),$=b.data.field(d);return null!==F&&null!==$?ji(F,$):St()}(a.field,t,r);switch(a.dir){case"asc":return o;case"desc":return-1*o;default:return St()}}class Le{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),o=this.inner[r];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,t))return d}has(t){return void 0!==this.get(t)}set(t,r){const o=this.mapKeyFn(t),u=this.inner[o];if(void 0===u)return this.inner[o]=[[t,r]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],t))return void(u[d]=[t,r]);u.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),o=this.inner[r];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return 1===o.length?delete this.inner[r]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(t){qs(this.inner,(r,o)=>{for(const[u,d]of o)t(u,d)})}isEmpty(){return Rs(this.inner)}size(){return this.innerSize}}const Et=new Pr(Ce.comparator);function Ct(){return Et}const mn=new Pr(Ce.comparator);function hn(...a){let t=mn;for(const r of a)t=t.insert(r.key,r);return t}function hr(a){let t=mn;return a.forEach((r,o)=>t=t.insert(r,o.overlayedDocument)),t}function zn(){return Hn()}function Fn(){return Hn()}function Hn(){return new Le(a=>a.toString(),(a,t)=>a.isEqual(t))}const Tr=new Pr(Ce.comparator),oi=new Cr(Ce.comparator);function Pn(...a){let t=oi;for(const r of a)t=t.add(r);return t}const Es=new Cr(zt);function ki(){return Es}function bo(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ee(t)?"-0":t}}function rs(a){return{integerValue:""+a}}function as(a,t){return ht(t)?rs(t):bo(a,t)}class cs{constructor(){this._=void 0}}function Ho(a,t,r){return a instanceof qi?function(u,d){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&ps(d)&&(d=ks(d)),d&&(m.fields.__previous_value__=d),{mapValue:m}}(r,t):a instanceof Os?P(a,t):a instanceof X?N(a,t):function(u,d){const m=eo(u,d),b=de(m)+de(u.Pe);return ms(m)&&ms(u.Pe)?rs(b):bo(u.serializer,b)}(a,t)}function uo(a,t,r){return a instanceof Os?P(a,t):a instanceof X?N(a,t):r}function eo(a,t){return a instanceof B?ms(o=t)||(d=o)&&"doubleValue"in d?t:{integerValue:0}:null;var o,d}class qi extends cs{}class Os extends cs{constructor(t){super(),this.elements=t}}function P(a,t){const r=Ze(t);for(const o of a.elements)r.some(u=>ts(u,o))||r.push(o);return{arrayValue:{values:r}}}class X extends cs{constructor(t){super(),this.elements=t}}function N(a,t){let r=Ze(t);for(const o of a.elements)r=r.filter(u=>!ts(u,o));return{arrayValue:{values:r}}}class B extends cs{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function de(a){return dn(a.integerValue||a.doubleValue)}function Ze(a){return Vs(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class Pt{constructor(t,r){this.field=t,this.transform=r}}class mr{constructor(t,r){this.version=t,this.transformResults=r}}class xn{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new xn}static exists(t){return new xn(void 0,t)}static updateTime(t){return new xn(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Gn(a,t){return void 0!==a.updateTime?t.isFoundDocument()&&t.version.isEqual(a.updateTime):void 0===a.exists||a.exists===t.isFoundDocument()}class fr{}function ri(a,t){if(!a.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return a.isNoDocument()?new Bs(a.key,xn.none()):new vn(a.key,a.data,xn.none());{const r=a.data,o=Yr.empty();let u=new Cr(Ve.comparator);for(let d of t.fields)if(!u.has(d)){let m=r.field(d);null===m&&d.length>1&&(d=d.popLast(),m=r.field(d)),null===m?o.delete(d):o.set(d,m),u=u.add(d)}return new _r(a.key,o,new Xr(u.toArray()),xn.none())}}function ir(a,t,r){a instanceof vn?function(u,d,m){const b=u.value.clone(),F=pi(u.fieldTransforms,d,m.transformResults);b.setAll(F),d.convertToFoundDocument(m.version,b).setHasCommittedMutations()}(a,t,r):a instanceof _r?function(u,d,m){if(!Gn(u.precondition,d))return void d.convertToUnknownDocument(m.version);const b=pi(u.fieldTransforms,d,m.transformResults),F=d.data;F.setAll(Ti(u)),F.setAll(b),d.convertToFoundDocument(m.version,F).setHasCommittedMutations()}(a,t,r):t.convertToNoDocument(r.version).setHasCommittedMutations()}function Vr(a,t,r,o){return a instanceof vn?function(d,m,b,F){if(!Gn(d.precondition,m))return b;const $=d.value.clone(),ne=is(d.fieldTransforms,F,m);return $.setAll(ne),m.convertToFoundDocument(m.version,$).setHasLocalMutations(),null}(a,t,r,o):a instanceof _r?function(d,m,b,F){if(!Gn(d.precondition,m))return b;const $=is(d.fieldTransforms,F,m),ne=m.data;return ne.setAll(Ti(d)),ne.setAll($),m.convertToFoundDocument(m.version,ne).setHasLocalMutations(),null===b?null:b.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(ge=>ge.field))}(a,t,r,o):(b=r,Gn(a.precondition,m=t)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):b);var m,b}function pr(a,t){let r=null;for(const o of a.fieldTransforms){const u=t.data.field(o.field),d=eo(o.transform,u||null);null!=d&&(null===r&&(r=Yr.empty()),r.set(o.field,d))}return r||null}function Yt(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&(u=t.fieldTransforms,!!(void 0===(o=a.fieldTransforms)&&void 0===u||o&&u&&Un(o,u,(d,m)=>function fn(a,t){return a.field.isEqual(t.field)&&(u=t.transform,(o=a.transform)instanceof Os&&u instanceof Os||o instanceof X&&u instanceof X?Un(o.elements,u.elements,ts):o instanceof B&&u instanceof B?ts(o.Pe,u.Pe):o instanceof qi&&u instanceof qi);var o,u}(d,m))))&&(0===a.type?a.value.isEqual(t.value):1!==a.type||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask));var o,u}class vn extends fr{constructor(t,r,o,u=[]){super(),this.key=t,this.value=r,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class _r extends fr{constructor(t,r,o,u,d=[]){super(),this.key=t,this.data=r,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function Ti(a){const t=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const o=a.data.field(r);t.set(r,o)}}),t}function pi(a,t,r){const o=new Map;_t(a.length===r.length);for(let u=0;u<r.length;u++){const d=a[u],m=d.transform,b=t.data.field(d.field);o.set(d.field,uo(m,b,r[u]))}return o}function is(a,t,r){const o=new Map;for(const u of a){const d=u.transform,m=r.data.field(u.field);o.set(u.field,Ho(d,m,t))}return o}class Bs extends fr{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gi extends fr{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zr{constructor(t,r,o,u){this.batchId=t,this.localWriteTime=r,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(t,r){const o=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(t.key)&&ir(d,t,o[u])}}applyToLocalView(t,r){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(r=Vr(o,t,r,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(r=Vr(o,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const o=Fn();return this.mutations.forEach(u=>{const d=t.get(u.key),m=d.overlayedDocument;let b=this.applyToLocalView(m,d.mutatedFields);b=r.has(u.key)?null:b;const F=ri(m,b);null!==F&&o.set(u.key,F),m.isValidDocument()||m.convertToNoDocument(Zt.min())}),o}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Pn())}isEqual(t){return this.batchId===t.batchId&&Un(this.mutations,t.mutations,(r,o)=>Yt(r,o))&&Un(this.baseMutations,t.baseMutations,(r,o)=>Yt(r,o))}}class lo{constructor(t,r,o,u){this.batch=t,this.commitVersion=r,this.mutationResults=o,this.docVersions=u}static from(t,r,o){_t(t.mutations.length===o.length);let u=function(){return Tr}();const d=t.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new lo(t,r,o,u)}}class Zn{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class El{constructor(t,r){this.count=t,this.unchangedNames=r}}var ai,jn;function Dc(a){switch(a){default:return St();case tt.CANCELLED:case tt.UNKNOWN:case tt.DEADLINE_EXCEEDED:case tt.RESOURCE_EXHAUSTED:case tt.INTERNAL:case tt.UNAVAILABLE:case tt.UNAUTHENTICATED:return!1;case tt.INVALID_ARGUMENT:case tt.NOT_FOUND:case tt.ALREADY_EXISTS:case tt.PERMISSION_DENIED:case tt.FAILED_PRECONDITION:case tt.ABORTED:case tt.OUT_OF_RANGE:case tt.UNIMPLEMENTED:case tt.DATA_LOSS:return!0}}function tc(a){if(void 0===a)return In("GRPC error has no .code"),tt.UNKNOWN;switch(a){case ai.OK:return tt.OK;case ai.CANCELLED:return tt.CANCELLED;case ai.UNKNOWN:return tt.UNKNOWN;case ai.DEADLINE_EXCEEDED:return tt.DEADLINE_EXCEEDED;case ai.RESOURCE_EXHAUSTED:return tt.RESOURCE_EXHAUSTED;case ai.INTERNAL:return tt.INTERNAL;case ai.UNAVAILABLE:return tt.UNAVAILABLE;case ai.UNAUTHENTICATED:return tt.UNAUTHENTICATED;case ai.INVALID_ARGUMENT:return tt.INVALID_ARGUMENT;case ai.NOT_FOUND:return tt.NOT_FOUND;case ai.ALREADY_EXISTS:return tt.ALREADY_EXISTS;case ai.PERMISSION_DENIED:return tt.PERMISSION_DENIED;case ai.FAILED_PRECONDITION:return tt.FAILED_PRECONDITION;case ai.ABORTED:return tt.ABORTED;case ai.OUT_OF_RANGE:return tt.OUT_OF_RANGE;case ai.UNIMPLEMENTED:return tt.UNIMPLEMENTED;case ai.DATA_LOSS:return tt.DATA_LOSS;default:return St()}}(jn=ai||(ai={}))[jn.OK=0]="OK",jn[jn.CANCELLED=1]="CANCELLED",jn[jn.UNKNOWN=2]="UNKNOWN",jn[jn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jn[jn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jn[jn.NOT_FOUND=5]="NOT_FOUND",jn[jn.ALREADY_EXISTS=6]="ALREADY_EXISTS",jn[jn.PERMISSION_DENIED=7]="PERMISSION_DENIED",jn[jn.UNAUTHENTICATED=16]="UNAUTHENTICATED",jn[jn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jn[jn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jn[jn.ABORTED=10]="ABORTED",jn[jn.OUT_OF_RANGE=11]="OUT_OF_RANGE",jn[jn.UNIMPLEMENTED=12]="UNIMPLEMENTED",jn[jn.INTERNAL=13]="INTERNAL",jn[jn.UNAVAILABLE=14]="UNAVAILABLE",jn[jn.DATA_LOSS=15]="DATA_LOSS";function _a(){return new TextEncoder}const Il=new un([4294967295,4294967295],0);function ta(a){const t=_a().encode(a),r=new jt;return r.update(t),new Uint8Array(r.digest())}function nc(a){const t=new DataView(a.buffer),r=t.getUint32(0,!0),o=t.getUint32(4,!0),u=t.getUint32(8,!0),d=t.getUint32(12,!0);return[new un([r,o],0),new un([u,d],0)]}class Is{constructor(t,r,o){if(this.bitmap=t,this.padding=r,this.hashCount=o,r<0||r>=8)throw new Qn(`Invalid padding: ${r}`);if(o<0)throw new Qn(`Invalid hash count: ${o}`);if(t.length>0&&0===this.hashCount)throw new Qn(`Invalid hash count: ${o}`);if(0===t.length&&0!==r)throw new Qn(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*t.length-r,this.Te=un.fromNumber(this.Ie)}Ee(t,r,o){let u=t.add(r.multiply(un.fromNumber(o)));return 1===u.compare(Il)&&(u=new un([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const r=ta(t),[o,u]=nc(r);for(let d=0;d<this.hashCount;d++){const m=this.Ee(o,u,d);if(!this.de(m))return!1}return!0}static create(t,r,o){const u=t%8==0?0:8-t%8,d=new Uint8Array(Math.ceil(t/8)),m=new Is(d,u,r);return o.forEach(b=>m.insert(b)),m}insert(t){if(0===this.Ie)return;const r=ta(t),[o,u]=nc(r);for(let d=0;d<this.hashCount;d++){const m=this.Ee(o,u,d);this.Ae(m)}}Ae(t){const r=Math.floor(t/8);this.bitmap[r]|=1<<t%8}}class Qn extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rc{constructor(t,r,o,u,d){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(t,r,o){const u=new Map;return u.set(t,mi.createSynthesizedTargetChangeForCurrentChange(t,r,o)),new rc(Zt.min(),u,new Pr(zt),Ct(),Pn())}}class mi{constructor(t,r,o,u,d){this.resumeToken=t,this.current=r,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(t,r,o){return new mi(o,r,Pn(),Pn(),Pn())}}class So{constructor(t,r,o,u){this.Re=t,this.removedTargetIds=r,this.key=o,this.Ve=u}}class ba{constructor(t,r){this.targetId=t,this.me=r}}class Sa{constructor(t,r,o=Hr.EMPTY_BYTE_STRING,u=null){this.state=t,this.targetIds=r,this.resumeToken=o,this.cause=u}}class Di{constructor(){this.fe=0,this.ge=As(),this.pe=Hr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Pn(),r=Pn(),o=Pn();return this.ge.forEach((u,d)=>{switch(d){case 0:t=t.add(u);break;case 2:r=r.add(u);break;case 1:o=o.add(u);break;default:St()}}),new mi(this.pe,this.ye,t,r,o)}Ce(){this.we=!1,this.ge=As()}Fe(t,r){this.we=!0,this.ge=this.ge.insert(t,r)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,_t(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Su{constructor(t){this.Le=t,this.Be=new Map,this.ke=Ct(),this.qe=Ds(),this.Qe=new Pr(zt)}Ke(t){for(const r of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(r,t.Ve):this.Ue(r,t.key,t.Ve);for(const r of t.removedTargetIds)this.Ue(r,t.key,t.Ve)}We(t){this.forEachTarget(t,r=>{const o=this.Ge(r);switch(t.state){case 0:this.ze(r)&&o.De(t.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(t.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(o.Ne(),o.De(t.resumeToken));break;case 4:this.ze(r)&&(this.je(r),o.De(t.resumeToken));break;default:St()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.Be.forEach((o,u)=>{this.ze(u)&&r(u)})}He(t){const r=t.targetId,o=t.me.count,u=this.Je(r);if(u){const d=u.target;if(Aa(d))if(0===o){const m=new Ce(d.path);this.Ue(r,m,ar.newNoDocument(m,Zt.min()))}else _t(1===o);else{const m=this.Ye(r);if(m!==o){const b=this.Ze(t),F=b?this.Xe(b,t,m):1;0!==F&&(this.je(r),this.Qe=this.Qe.insert(r,2===F?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(t){const r=t.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:d=0}=r;let m,b;try{m=si(o).toUint8Array()}catch(F){if(F instanceof Uo)return Kn("Decoding the base64 bloom filter in existence filter failed ("+F.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw F}try{b=new Is(m,u,d)}catch(F){return Kn(F instanceof Qn?"BloomFilter error: ":"Applying bloom filter failed: ",F),null}return 0===b.Ie?null:b}Xe(t,r,o){return r.me.count===o-this.nt(t,r.targetId)?0:2}nt(t,r){const o=this.Le.getRemoteKeysForTarget(r);let u=0;return o.forEach(d=>{const m=this.Le.tt(),b=`projects/${m.projectId}/databases/${m.database}/documents/${d.path.canonicalString()}`;t.mightContain(b)||(this.Ue(r,d,null),u++)}),u}rt(t){const r=new Map;this.Be.forEach((d,m)=>{const b=this.Je(m);if(b){if(d.current&&Aa(b.target)){const F=new Ce(b.target.path);null!==this.ke.get(F)||this.it(m,F)||this.Ue(m,F,ar.newNoDocument(F,t))}d.be&&(r.set(m,d.ve()),d.Ce())}});let o=Pn();this.qe.forEach((d,m)=>{let b=!0;m.forEachWhile(F=>{const $=this.Je(F);return!$||"TargetPurposeLimboResolution"===$.purpose||(b=!1,!1)}),b&&(o=o.add(d))}),this.ke.forEach((d,m)=>m.setReadTime(t));const u=new rc(t,r,this.Qe,this.ke,o);return this.ke=Ct(),this.qe=Ds(),this.Qe=new Pr(zt),u}$e(t,r){if(!this.ze(t))return;const o=this.it(t,r.key)?2:0;this.Ge(t).Fe(r.key,o),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(t))}Ue(t,r,o){if(!this.ze(t))return;const u=this.Ge(t);this.it(t,r)?u.Fe(r,1):u.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(t)),o&&(this.ke=this.ke.insert(r,o))}removeTarget(t){this.Be.delete(t)}Ye(t){const r=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let r=this.Be.get(t);return r||(r=new Di,this.Be.set(t,r)),r}st(t){let r=this.qe.get(t);return r||(r=new Cr(zt),this.qe=this.qe.insert(t,r)),r}ze(t){const r=null!==this.Je(t);return r||st("WatchChangeAggregator","Detected inactive target",t),r}Je(t){const r=this.Be.get(t);return r&&r.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Di),this.Le.getRemoteKeysForTarget(t).forEach(r=>{this.Ue(t,r,null)})}it(t,r){return this.Le.getRemoteKeysForTarget(t).has(r)}}function Ds(){return new Pr(Ce.comparator)}function As(){return new Pr(Ce.comparator)}const Kc={asc:"ASCENDING",desc:"DESCENDING"},na={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qc={and:"AND",or:"OR"};class to{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Ba(a,t){return a.useProto3Json||ve(t)?t:{value:t}}function ic(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qc(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function Pu(a,t){return ic(a,t.toTimestamp())}function Ni(a){return _t(!!a),Zt.fromTimestamp(function(r){const o=os(r);return new Jt(o.seconds,o.nanos)}(a))}function Mu(a,t){return ja(a,t).canonicalString()}function ja(a,t){const r=(u=a,new Rn(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===t?r:r.child(t)}function Cl(a){const t=Rn.fromString(a);return _t(ra(t)),t}function Xc(a,t){return Mu(a.databaseId,t.path)}function ya(a,t){const r=Cl(t);if(r.get(1)!==a.databaseId.projectId)throw new Rt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Rt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new Ce(Ed(r))}function Yh(a,t){return Mu(a.databaseId,t)}function wl(a){const t=Cl(a);return 4===t.length?Rn.emptyPath():Ed(t)}function Ru(a){return new Rn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Ed(a){return _t(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function Jh(a,t,r){return{name:Xc(a,t),fields:r.value.mapValue.fields}}function Zh(a,t,r){const o=ya(a,t.name),u=Ni(t.updateTime),d=t.createTime?Ni(t.createTime):Zt.min(),m=new Yr({mapValue:{fields:t.fields}}),b=ar.newFoundDocument(o,u,d,m);return r&&b.setHasCommittedMutations(),r?b.setHasCommittedMutations():b}function Ou(a,t){let r;if(t instanceof vn)r={update:Jh(a,t.key,t.value)};else if(t instanceof Bs)r={delete:Xc(a,t.key)};else if(t instanceof _r)r={update:Jh(a,t.key,t.data),updateMask:Ac(t.fieldMask)};else{if(!(t instanceof gi))return St();r={verify:Xc(a,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(o=>function(d,m){const b=m.transform;if(b instanceof qi)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(b instanceof Os)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:b.elements}};if(b instanceof X)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:b.elements}};if(b instanceof B)return{fieldPath:m.field.canonicalString(),increment:b.Pe};throw St()}(0,o))),t.precondition.isNone||(r.currentDocument=void 0!==(d=t.precondition).updateTime?{updateTime:Pu(a,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:St()),r;var d}function Nu(a,t){const r=t.currentDocument?void 0!==(d=t.currentDocument).updateTime?xn.updateTime(Ni(d.updateTime)):void 0!==d.exists?xn.exists(d.exists):xn.none():xn.none(),o=t.updateTransforms?t.updateTransforms.map(u=>function(m,b){let F=null;"setToServerValue"in b?(_t("REQUEST_TIME"===b.setToServerValue),F=new qi):"appendMissingElements"in b?F=new Os(b.appendMissingElements.values||[]):"removeAllFromArray"in b?F=new X(b.removeAllFromArray.values||[]):"increment"in b?F=new B(m,b.increment):St();const $=Ve.fromServerFormat(b.fieldPath);return new Pt($,F)}(a,u)):[];var d;if(t.update){const u=ya(a,t.update.name),d=new Yr({mapValue:{fields:t.update.fields}});if(t.updateMask){const m=new Xr((t.updateMask.fieldPaths||[]).map(ne=>Ve.fromServerFormat(ne)));return new _r(u,d,m,r,o)}return new vn(u,d,r,o)}if(t.delete){const u=ya(a,t.delete);return new Bs(u,r)}if(t.verify){const u=ya(a,t.verify);return new gi(u,r)}return St()}function M(a,t){return{documents:[Yh(a,t.path)]}}function w(a,t){const r={structuredQuery:{}},o=t.path;let u;null!==t.collectionGroup?(u=o,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(u=o.popLast(),r.structuredQuery.from=[{collectionId:o.lastSegment()}]),r.parent=Yh(a,u);const d=function($){if(0!==$.length)return Fi(Z.create($,"and"))}(t.filters);d&&(r.structuredQuery.where=d);const m=function($){if(0!==$.length)return $.map(ne=>{return{field:er((Ne=ne).field),direction:Dt(Ne.dir)};var Ne})}(t.orderBy);m&&(r.structuredQuery.orderBy=m);const b=Ba(a,t.limit);return null!==b&&(r.structuredQuery.limit=b),t.startAt&&(r.structuredQuery.startAt={before:($=t.startAt).inclusive,values:$.position}),t.endAt&&(r.structuredQuery.endAt=function($){return{before:!$.inclusive,values:$.position}}(t.endAt)),{_t:r,parent:u};var $}function j(a){let t=wl(a.parent);const r=a.structuredQuery,o=r.from?r.from.length:0;let u=null;if(o>0){_t(1===o);const ne=r.from[0];ne.allDescendants?u=ne.collectionId:t=t.child(ne.collectionId)}let d=[];r.where&&(d=function(ge){const Ne=Te(ge);return Ne instanceof Z&&Jn(Ne)?Ne.getFilters():[Ne]}(r.where));let m=[];r.orderBy&&(m=r.orderBy.map(Ne=>{return new xi(dr((Ht=Ne).field),function(Qt){switch(Qt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ht.direction));var Ht}));let b=null;r.limit&&(b=function(ge){let Ne;return Ne="object"==typeof ge?ge.value:ge,ve(Ne)?null:Ne}(r.limit));let F=null;var ge;r.startAt&&(F=new ds((ge=r.startAt).values||[],!!ge.before));let $=null;return r.endAt&&($=function(ge){return new ds(ge.values||[],!ge.before)}(r.endAt)),ni(t,u,m,d,b,"F",F,$)}function Te(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const o=dr(r.unaryFilter.field);return x.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=dr(r.unaryFilter.field);return x.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=dr(r.unaryFilter.field);return x.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=dr(r.unaryFilter.field);return x.create(m,"!=",{nullValue:"NULL_VALUE"});default:return St()}}(a):void 0!==a.fieldFilter?x.create(dr((r=a).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return St()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return Z.create(r.compositeFilter.filters.map(o=>Te(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return St()}}(r.compositeFilter.op))}(a):St();var r}function Dt(a){return Kc[a]}function pt(a){return na[a]}function _n(a){return qc[a]}function er(a){return{fieldPath:a.canonicalString()}}function dr(a){return Ve.fromServerFormat(a.fieldPath)}function Fi(a){return a instanceof x?function(r){if("=="===r.op){if(Ys(r.value))return{unaryFilter:{field:er(r.field),op:"IS_NAN"}};if(Jo(r.value))return{unaryFilter:{field:er(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(Ys(r.value))return{unaryFilter:{field:er(r.field),op:"IS_NOT_NAN"}};if(Jo(r.value))return{unaryFilter:{field:er(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:er(r.field),op:pt(r.op),value:r.value}}}(a):a instanceof Z?function(r){const o=r.getFilters().map(u=>Fi(u));return 1===o.length?o[0]:{compositeFilter:{op:_n(r.op),filters:o}}}(a):St()}function Ac(a){const t=[];return a.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function ra(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class ho{constructor(t,r,o,u,d=Zt.min(),m=Zt.min(),b=Hr.EMPTY_BYTE_STRING,F=null){this.target=t,this.targetId=r,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=b,this.expectedCount=F}withSequenceNumber(t){return new ho(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class js{constructor(t){this.ct=t}}function xu(a,t){const r=t.key,o={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:ku(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())o.document={name:Xc(d=a.ct,(m=t).key),fields:m.data.value.mapValue.fields,updateTime:ic(d,m.version.toTimestamp()),createTime:ic(d,m.createTime.toTimestamp())};else if(t.isNoDocument())o.noDocument={path:r.path.toArray(),readTime:$a(t.version)};else{if(!t.isUnknownDocument())return St();o.unknownDocument={path:r.path.toArray(),version:$a(t.version)}}var d,m;return o}function ku(a){const t=a.toTimestamp();return[t.seconds,t.nanoseconds]}function $a(a){const t=a.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Yc(a){const t=new Jt(a.seconds,a.nanoseconds);return Zt.fromTimestamp(t)}function Mr(a,t){const r=(t.baseMutations||[]).map(d=>Nu(a.ct,d));for(let d=0;d<t.mutations.length-1;++d)d+1<t.mutations.length&&void 0!==t.mutations[d+1].transform&&(t.mutations[d].updateTransforms=t.mutations[d+1].transform.fieldTransforms,t.mutations.splice(d+1,1),++d);const o=t.mutations.map(d=>Nu(a.ct,d)),u=Jt.fromMillis(t.localWriteTimeMs);return new zr(t.batchId,u,r,o)}function Ha(a){const t=Yc(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?Yc(a.lastLimboFreeSnapshotVersion):Zt.min();let o;return o=void 0!==a.query.documents?(_t(1===(d=a.query).documents.length),Ki(Ri(wl(d.documents[0])))):function(d){return Ki(j(d))}(a.query),new ho(o,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,t,r,Hr.fromBase64String(a.resumeToken));var d}function Jc(a,t){const r=$a(t.snapshotVersion),o=$a(t.lastLimboFreeSnapshotVersion);let u;u=Aa(t.target)?M(a.ct,t.target):w(a.ct,t.target)._t;const d=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:$o(t.target),readTime:r,resumeToken:d,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function $s(a){const t=j({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?Ao(t,t.limit,"L"):t}function Id(a,t){return new Zn(t.largestBatchId,Nu(a.ct,t.overlayMutation))}function sc(a,t){const r=t.path.lastSegment();return[a,Xe(t.path.popLast()),r]}function oc(a,t,r,o){return{indexId:a,uid:t,sequenceNumber:r,readTime:$a(o.readTime),documentKey:Xe(o.documentKey.path),largestBatchId:o.largestBatchId}}class Ko{getBundleMetadata(t,r){return ef(t).get(r).next(o=>{if(o)return{id:(d=o).bundleId,createTime:Yc(d.createTime),version:d.version};var d})}saveBundleMetadata(t,r){return ef(t).put({bundleId:(u=r).id,createTime:$a(Ni(u.createTime)),version:u.version});var u}getNamedQuery(t,r){return Zc(t).get(r).next(o=>{if(o)return{name:(d=o).name,query:$s(d.bundledQuery),readTime:Yc(d.readTime)};var d})}saveNamedQuery(t,r){return Zc(t).put({name:(u=r).name,readTime:$a(Ni(u.readTime)),bundledQuery:u.bundledQuery});var u}}function ef(a){return wr(a,"bundles")}function Zc(a){return wr(a,"namedQueries")}class Dl{constructor(t,r){this.serializer=t,this.userId=r}static lt(t,r){return new Dl(t,r.uid||"")}getOverlay(t,r){return no(t).get(sc(this.userId,r)).next(o=>o?Id(this.serializer,o):null)}getOverlays(t,r){const o=zn();return ke.forEach(r,u=>this.getOverlay(t,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(t,r,o){const u=[];return o.forEach((d,m)=>{const b=new Zn(r,m);u.push(this.ht(t,b))}),ke.waitFor(u)}removeOverlaysForBatchId(t,r,o){const u=new Set;r.forEach(m=>u.add(Xe(m.getCollectionPath())));const d=[];return u.forEach(m=>{const b=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(no(t).j("collectionPathOverlayIndex",b))}),ke.waitFor(d)}getOverlaysForCollection(t,r,o){const u=zn(),d=Xe(r),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return no(t).U("collectionPathOverlayIndex",m).next(b=>{for(const F of b){const $=Id(this.serializer,F);u.set($.getKey(),$)}return u})}getOverlaysForCollectionGroup(t,r,o,u){const d=zn();let m;const b=IDBKeyRange.bound([this.userId,r,o],[this.userId,r,Number.POSITIVE_INFINITY],!0);return no(t).J({index:"collectionGroupOverlayIndex",range:b},(F,$,ne)=>{const ge=Id(this.serializer,$);d.size()<u||ge.largestBatchId===m?(d.set(ge.getKey(),ge),m=ge.largestBatchId):ne.done()}).next(()=>d)}ht(t,r){return no(t).put(function(u,d,m){const[b,F,$]=sc(d,m.mutation.key);return{userId:d,collectionPath:F,documentId:$,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Ou(u.ct,m.mutation)}}(this.serializer,this.userId,r))}}function no(a){return wr(a,"documentOverlays")}class tf{Pt(t){return wr(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(r=>{const o=r?.value;return o?Hr.fromUint8Array(o):Hr.EMPTY_BYTE_STRING})}setSessionToken(t,r){return this.Pt(t).put({name:"sessionToken",value:r.toUint8Array()})}}class Ga{constructor(){}It(t,r){this.Tt(t,r),r.Et()}Tt(t,r){if("nullValue"in t)this.dt(r,5);else if("booleanValue"in t)this.dt(r,10),r.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(r,15),r.At(dn(t.integerValue));else if("doubleValue"in t){const o=dn(t.doubleValue);isNaN(o)?this.dt(r,13):(this.dt(r,15),Ee(o)?r.At(0):r.At(o))}else if("timestampValue"in t){let o=t.timestampValue;this.dt(r,20),"string"==typeof o&&(o=os(o)),r.Rt(`${o.seconds||""}`),r.At(o.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,r),this.ft(r);else if("bytesValue"in t)this.dt(r,30),r.gt(si(t.bytesValue)),this.ft(r);else if("referenceValue"in t)this.yt(t.referenceValue,r);else if("geoPointValue"in t){const o=t.geoPointValue;this.dt(r,45),r.At(o.latitude||0),r.At(o.longitude||0)}else"mapValue"in t?Io(t)?this.dt(r,Number.MAX_SAFE_INTEGER):Ls(t)?this.wt(t.mapValue,r):(this.St(t.mapValue,r),this.ft(r)):"arrayValue"in t?(this.bt(t.arrayValue,r),this.ft(r)):St()}Vt(t,r){this.dt(r,25),this.Dt(t,r)}Dt(t,r){r.Rt(t)}St(t,r){const o=t.fields||{};this.dt(r,55);for(const u of Object.keys(o))this.Vt(u,r),this.Tt(o[u],r)}wt(t,r){var o,u;const d=t.fields||{};this.dt(r,53);const m="value",b=(null===(u=null===(o=d[m].arrayValue)||void 0===o?void 0:o.values)||void 0===u?void 0:u.length)||0;this.dt(r,15),r.At(dn(b)),this.Vt(m,r),this.Tt(d[m],r)}bt(t,r){const o=t.values||[];this.dt(r,50);for(const u of o)this.Tt(u,r)}yt(t,r){this.dt(r,37),Ce.fromName(t).path.forEach(o=>{this.dt(r,60),this.Dt(o,r)})}dt(t,r){t.At(r)}ft(t){t.At(2)}}function Al(a){if(0===a)return 8;let t=0;return!(a>>4)&&(t+=4,a<<=4),!(a>>6)&&(t+=2,a<<=2),!(a>>7)&&(t+=1),t}function bl(a){const t=64-function(o){let u=0;for(let d=0;d<8;++d){const m=Al(255&o[d]);if(u+=m,8!==m)break}return u}(a);return Math.ceil(t/8)}Ga.vt=new Ga;class bc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){const r=t[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Ft(o.value),o=r.next();this.Mt()}xt(t){const r=t[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Ot(o.value),o=r.next();this.Nt()}Lt(t){for(const r of t){const o=r.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=r.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Bt(t){for(const r of t){const o=r.charCodeAt(0);if(o<128)this.Ot(o);else if(o<2048)this.Ot(960|o>>>6),this.Ot(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|o>>>12),this.Ot(128|63&o>>>6),this.Ot(128|63&o);else{const u=r.codePointAt(0);this.Ot(240|u>>>18),this.Ot(128|63&u>>>12),this.Ot(128|63&u>>>6),this.Ot(128|63&u)}}this.Nt()}kt(t){const r=this.qt(t),o=bl(r);this.Qt(1+o),this.buffer[this.position++]=255&o;for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=255&r[u]}Kt(t){const r=this.qt(t),o=bl(r);this.Qt(1+o),this.buffer[this.position++]=~(255&o);for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){const r=function(d){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,d,!1),new Uint8Array(m.buffer)}(t),o=!!(128&r[0]);r[0]^=o?255:128;for(let u=1;u<r.length;++u)r[u]^=o?255:0;return r}Ft(t){const r=255&t;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(t){const r=255&t;0===r?(this.Gt(0),this.Gt(255)):255===r?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){const r=t+this.position;if(r<=this.buffer.length)return;let o=2*this.buffer.length;o<r&&(o=r);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Fu{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}}class Sl{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}}class za{constructor(){this.jt=new bc,this.Ht=new Fu(this.jt),this.Jt=new Sl(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return 0===t?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class fo{constructor(t,r,o,u){this.indexId=t,this.documentKey=r,this.arrayValue=o,this.directionalValue=u}Zt(){const t=this.directionalValue.length,r=0===t||255===this.directionalValue[t-1]?t+1:t,o=new Uint8Array(r);return o.set(this.directionalValue,0),r!==t?o.set([0],this.directionalValue.length):++o[o.length-1],new fo(this.indexId,this.documentKey,this.arrayValue,o)}}function Wn(a,t){let r=a.indexId-t.indexId;return 0!==r?r:(r=Cd(a.arrayValue,t.arrayValue),0!==r?r:(r=Cd(a.directionalValue,t.directionalValue),0!==r?r:Ce.comparator(a.documentKey,t.documentKey)))}function Cd(a,t){for(let r=0;r<a.length&&r<t.length;++r){const o=a[r]-t[r];if(0!==o)return o}return a.length-t.length}class nf{constructor(t){this.Xt=new Cr((r,o)=>Ve.comparator(r.field,o.field)),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(const r of t.filters){const o=r;o.isInequality()?this.Xt=this.Xt.add(o):this.tn.push(o)}}get nn(){return this.Xt.size>1}rn(t){if(_t(t.collectionGroup===this.collectionId),this.nn)return!1;const r=Qe(t);if(void 0!==r&&!this.sn(r))return!1;const o=Mt(t);let u=new Set,d=0,m=0;for(;d<o.length&&this.sn(o[d]);++d)u=u.add(o[d].fieldPath.canonicalString());if(d===o.length)return!0;if(this.Xt.size>0){const b=this.Xt.getIterator().getNext();if(!u.has(b.field.canonicalString())){const F=o[d];if(!this.on(b,F)||!this._n(this.en[m++],F))return!1}++d}for(;d<o.length;++d)if(m>=this.en.length||!this._n(this.en[m++],o[d]))return!1;return!0}an(){if(this.nn)return null;let t=new Cr(Ve.comparator);const r=[];for(const o of this.tn)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)r.push(new q(o.field,2));else{if(t.has(o.field))continue;t=t.add(o.field),r.push(new q(o.field,0))}for(const o of this.en)o.field.isKeyField()||t.has(o.field)||(t=t.add(o.field),r.push(new q(o.field,"asc"===o.dir?0:1)));return new Ie(Ie.UNKNOWN_ID,this.collectionId,r,se.empty())}sn(t){for(const r of this.tn)if(this.on(r,t))return!0;return!1}on(t,r){return!(void 0===t||!t.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===t.op||"array-contains-any"===t.op)}_n(t,r){return!!t.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===t.dir||1===r.kind&&"desc"===t.dir)}}function wd(a){var t,r;if(_t(a instanceof x||a instanceof Z),a instanceof x){if(a instanceof Va){const u=(null===(r=null===(t=a.value.arrayValue)||void 0===t?void 0:t.values)||void 0===r?void 0:r.map(d=>x.create(a.field,"==",d)))||[];return Z.create(u,"or")}return a}const o=a.filters.map(u=>wd(u));return Z.create(o,a.op)}function rf(a){if(0===a.getFilters().length)return[];const t=Dd(wd(a));return _t(Wa(t)),Td(t)||Pl(t)?[t]:t.getFilters()}function Td(a){return a instanceof x}function Pl(a){return a instanceof Z&&Jn(a)}function Wa(a){return Td(a)||Pl(a)||function(r){if(r instanceof Z&&pn(r)){for(const o of r.getFilters())if(!Td(o)&&!Pl(o))return!1;return!0}return!1}(a)}function Dd(a){if(_t(a instanceof x||a instanceof Z),a instanceof x)return a;if(1===a.filters.length)return Dd(a.filters[0]);const t=a.filters.map(o=>Dd(o));let r=Z.create(t,a.op);return r=Rl(r),Wa(r)?r:(_t(r instanceof Z),_t(Ae(r)),_t(r.filters.length>1),r.filters.reduce((o,u)=>Ad(o,u)))}function Ad(a,t){let r;return _t(a instanceof x||a instanceof Z),_t(t instanceof x||t instanceof Z),r=a instanceof x?t instanceof x?Z.create([a,t],"and"):Ml(a,t):t instanceof x?Ml(t,a):function(u,d){if(_t(u.filters.length>0&&d.filters.length>0),Ae(u)&&Ae(d))return Ts(u,d.getFilters());const m=pn(u)?u:d,b=pn(u)?d:u,F=m.filters.map($=>Ad($,b));return Z.create(F,"or")}(a,t),Rl(r)}function Ml(a,t){if(Ae(t))return Ts(t,a.getFilters());{const r=t.filters.map(o=>Ad(a,o));return Z.create(r,"or")}}function Rl(a){if(_t(a instanceof x||a instanceof Z),a instanceof x)return a;const t=a.getFilters();if(1===t.length)return Rl(t[0]);if(ys(a))return a;const r=t.map(u=>Rl(u)),o=[];return r.forEach(u=>{u instanceof x?o.push(u):u instanceof Z&&(u.op===a.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:Z.create(o,a.op)}class Kp{constructor(){this.un=new Ft}addToCollectionParentIndex(t,r){return this.un.add(r),ke.resolve()}getCollectionParents(t,r){return ke.resolve(this.un.getEntries(r))}addFieldIndex(t,r){return ke.resolve()}deleteFieldIndex(t,r){return ke.resolve()}deleteAllFieldIndexes(t){return ke.resolve()}createTargetIndexes(t,r){return ke.resolve()}getDocumentsMatchingTarget(t,r){return ke.resolve(null)}getIndexType(t,r){return ke.resolve(0)}getFieldIndexes(t,r){return ke.resolve([])}getNextCollectionGroupToUpdate(t){return ke.resolve(null)}getMinOffset(t,r){return ke.resolve(Vt.min())}getMinOffsetFromCollectionGroup(t,r){return ke.resolve(Vt.min())}updateCollectionGroup(t,r,o){return ke.resolve()}updateIndexEntries(t,r){return ke.resolve()}}class Ft{constructor(){this.index={}}add(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r]||new Cr(Rn.comparator),d=!u.has(o);return this.index[r]=u.add(o),d}has(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r];return u&&u.has(o)}getEntries(t){return(this.index[t]||new Cr(Rn.comparator)).toArray()}}const Rr=new Uint8Array(0);class Ol{constructor(t,r){this.databaseId=r,this.cn=new Ft,this.ln=new Le(o=>$o(o),(o,u)=>wo(o,u)),this.uid=t.uid||""}addToCollectionParentIndex(t,r){if(!this.cn.has(r)){const o=r.lastSegment(),u=r.popLast();t.addOnCommittedListener(()=>{this.cn.add(r)});const d={collectionId:o,parent:Xe(u)};return Vu(t).put(d)}return ke.resolve()}getCollectionParents(t,r){const o=[],u=IDBKeyRange.bound([r,""],[Nr(r),""],!1,!0);return Vu(t).U(u).next(d=>{for(const m of d){if(m.collectionId!==r)break;o.push(Mn(m.parent))}return o})}addFieldIndex(t,r){const o=Sc(t),u={indexId:(b=r).indexId,collectionGroup:b.collectionGroup,fields:b.fields.map(F=>[F.fieldPath.canonicalString(),F.kind])};var b;delete u.indexId;const d=o.add(u);if(r.indexState){const m=ia(t);return d.next(b=>{m.put(oc(b,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return d.next()}deleteFieldIndex(t,r){const o=Sc(t),u=ia(t),d=Lr(t);return o.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const r=Sc(t),o=Lr(t),u=ia(t);return r.j().next(()=>o.j()).next(()=>u.j())}createTargetIndexes(t,r){return ke.forEach(this.hn(r),o=>this.getIndexType(t,o).next(u=>{if(0===u||1===u){const d=new nf(o).an();if(null!=d)return this.addFieldIndex(t,d)}}))}getDocumentsMatchingTarget(t,r){const o=Lr(t);let u=!0;const d=new Map;return ke.forEach(this.hn(r),m=>this.Pn(t,m).next(b=>{u&&(u=!!b),d.set(m,b)})).next(()=>{if(u){let m=Pn();const b=[];return ke.forEach(d,(F,$)=>{var kn;st("IndexedDbIndexManager",`Using index ${kn=F,`id=${kn.indexId}|cg=${kn.collectionGroup}|f=${kn.fields.map(cr=>`${cr.fieldPath}:${cr.kind}`).join(",")}`} to execute ${$o(r)}`);const ne=function(kn,cr){const Br=Qe(cr);if(void 0===Br)return null;for(const br of ea(kn,Br.fieldPath))switch(br.op){case"array-contains-any":return br.value.arrayValue.values||[];case"array-contains":return[br.value]}return null}($,F),ge=function(kn,cr){const Br=new Map;for(const br of Mt(cr))for(const et of ea(kn,br.fieldPath))switch(et.op){case"==":case"in":Br.set(br.fieldPath.canonicalString(),et.value);break;case"not-in":case"!=":return Br.set(br.fieldPath.canonicalString(),et.value),Array.from(Br.values())}return null}($,F),Ne=function(kn,cr){const Br=[];let br=!0;for(const et of Mt(cr)){const be=0===et.kind?To(kn,et.fieldPath,kn.startAt):lr(kn,et.fieldPath,kn.startAt);Br.push(be.value),br&&(br=be.inclusive)}return new ds(Br,br)}($,F),lt=function(kn,cr){const Br=[];let br=!0;for(const et of Mt(cr)){const be=0===et.kind?lr(kn,et.fieldPath,kn.endAt):To(kn,et.fieldPath,kn.endAt);Br.push(be.value),br&&(br=be.inclusive)}return new ds(Br,br)}($,F),Ht=this.In(F,$,Ne),en=this.In(F,$,lt),Qt=this.Tn(F,$,ge),Vn=this.En(F.indexId,ne,Ht,Ne.inclusive,en,lt.inclusive,Qt);return ke.forEach(Vn,Xn=>o.G(Xn,r.limit).next(kn=>{kn.forEach(cr=>{const Br=Ce.fromSegments(cr.documentKey);m.has(Br)||(m=m.add(Br),b.push(Br))})}))}).next(()=>b)}return ke.resolve(null)})}hn(t){let r=this.ln.get(t);return r||(r=0===t.filters.length?[t]:rf(Z.create(t.filters,"and")).map(o=>ga(t.path,t.collectionGroup,t.orderBy,o.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,r),r)}En(t,r,o,u,d,m,b){const F=(null!=r?r.length:1)*Math.max(o.length,d.length),$=F/(null!=r?r.length:1),ne=[];for(let ge=0;ge<F;++ge){const Ne=r?this.dn(r[ge/$]):Rr,lt=this.An(t,Ne,o[ge%$],u),Ht=this.Rn(t,Ne,d[ge%$],m),en=b.map(Qt=>this.An(t,Ne,Qt,!0));ne.push(...this.createRange(lt,Ht,en))}return ne}An(t,r,o,u){const d=new fo(t,Ce.empty(),r,o);return u?d:d.Zt()}Rn(t,r,o,u){const d=new fo(t,Ce.empty(),r,o);return u?d.Zt():d}Pn(t,r){const o=new nf(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(t,u).next(d=>{let m=null;for(const b of d)o.rn(b)&&(!m||b.fields.length>m.fields.length)&&(m=b);return m})}getIndexType(t,r){let o=2;const u=this.hn(r);return ke.forEach(u,d=>this.Pn(t,d).next(m=>{m?0!==o&&m.fields.length<function(F){let $=new Cr(Ve.comparator),ne=!1;for(const ge of F.filters)for(const Ne of ge.getFlattenedFilters())Ne.field.isKeyField()||("array-contains"===Ne.op||"array-contains-any"===Ne.op?ne=!0:$=$.add(Ne.field));for(const ge of F.orderBy)ge.field.isKeyField()||($=$.add(ge.field));return $.size+(ne?1:0)}(d)&&(o=1):o=0})).next(()=>null!==r.limit&&u.length>1&&2===o?1:o)}Vn(t,r){const o=new za;for(const u of Mt(t)){const d=r.data.field(u.fieldPath);if(null==d)return null;const m=o.Yt(u.kind);Ga.vt.It(d,m)}return o.zt()}dn(t){const r=new za;return Ga.vt.It(t,r.Yt(0)),r.zt()}mn(t,r){const o=new za;return Ga.vt.It($i(this.databaseId,r),o.Yt(function(d){const m=Mt(d);return 0===m.length?0:m[m.length-1].kind}(t))),o.zt()}Tn(t,r,o){if(null===o)return[];let u=[];u.push(new za);let d=0;for(const m of Mt(t)){const b=o[d++];for(const F of u)if(this.fn(r,m.fieldPath)&&Vs(b))u=this.gn(u,m,b);else{const $=F.Yt(m.kind);Ga.vt.It(b,$)}}return this.pn(u)}In(t,r,o){return this.Tn(t,r,o.position)}pn(t){const r=[];for(let o=0;o<t.length;++o)r[o]=t[o].zt();return r}gn(t,r,o){const u=[...t],d=[];for(const m of o.arrayValue.values||[])for(const b of u){const F=new za;F.seed(b.zt()),Ga.vt.It(m,F.Yt(r.kind)),d.push(F)}return d}fn(t,r){return!!t.filters.find(o=>o instanceof x&&o.field.isEqual(r)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(t,r){const o=Sc(t),u=ia(t);return(r?o.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):o.U()).next(d=>{const m=[];return ke.forEach(d,b=>u.get([b.indexId,this.uid]).next(F=>{m.push(function(ne,ge){const Ne=ge?new se(ge.sequenceNumber,new Vt(Yc(ge.readTime),new Ce(Mn(ge.documentKey)),ge.largestBatchId)):se.empty(),lt=ne.fields.map(([Ht,en])=>new q(Ve.fromServerFormat(Ht),en));return new Ie(ne.indexId,ne.collectionGroup,lt,Ne)}(b,F))})).next(()=>m)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(r=>0===r.length?null:(r.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:zt(o.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(t,r,o){const u=Sc(t),d=ia(t);return this.yn(t).next(m=>u.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(b=>ke.forEach(b,F=>d.put(oc(F.indexId,this.uid,m,o)))))}updateIndexEntries(t,r){const o=new Map;return ke.forEach(r,(u,d)=>{const m=o.get(u.collectionGroup);return(m?ke.resolve(m):this.getFieldIndexes(t,u.collectionGroup)).next(b=>(o.set(u.collectionGroup,b),ke.forEach(b,F=>this.wn(t,u,F).next($=>{const ne=this.Sn(d,F);return $.isEqual(ne)?ke.resolve():this.bn(t,d,F,$,ne)}))))})}Dn(t,r,o,u){return Lr(t).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.mn(o,r.key),documentKey:r.key.path.toArray()})}vn(t,r,o,u){return Lr(t).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.mn(o,r.key),r.key.path.toArray()])}wn(t,r,o){const u=Lr(t);let d=new Cr(Wn);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.mn(o,r)])},(m,b)=>{d=d.add(new fo(o.indexId,r,b.arrayValue,b.directionalValue))}).next(()=>d)}Sn(t,r){let o=new Cr(Wn);const u=this.Vn(r,t);if(null==u)return o;const d=Qe(r);if(null!=d){const m=t.data.field(d.fieldPath);if(Vs(m))for(const b of m.arrayValue.values||[])o=o.add(new fo(r.indexId,t.key,this.dn(b),u))}else o=o.add(new fo(r.indexId,t.key,Rr,u));return o}bn(t,r,o,u,d){st("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const m=[];return function(F,$,ne,ge,Ne){const lt=F.getIterator(),Ht=$.getIterator();let en=Qs(lt),Qt=Qs(Ht);for(;en||Qt;){let Vn=!1,Xn=!1;if(en&&Qt){const kn=ne(en,Qt);kn<0?Xn=!0:kn>0&&(Vn=!0)}else null!=en?Xn=!0:Vn=!0;Vn?(ge(Qt),Qt=Qs(Ht)):Xn?(Ne(en),en=Qs(lt)):(en=Qs(lt),Qt=Qs(Ht))}}(u,d,Wn,b=>{m.push(this.Dn(t,r,o,b))},b=>{m.push(this.vn(t,r,o,b))}),ke.waitFor(m)}yn(t){let r=1;return ia(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(t,r,o){o=o.sort((m,b)=>Wn(m,b)).filter((m,b,F)=>!b||0!==Wn(m,F[b-1]));const u=[];u.push(t);for(const m of o){const b=Wn(m,t),F=Wn(m,r);if(0===b)u[0]=t.Zt();else if(b>0&&F<0)u.push(m),u.push(m.Zt());else if(F>0)break}u.push(r);const d=[];for(let m=0;m<u.length;m+=2){if(this.Cn(u[m],u[m+1]))return[];d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Rr,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Rr,[]]))}return d}Cn(t,r){return Wn(t,r)>0}getMinOffsetFromCollectionGroup(t,r){return this.getFieldIndexes(t,r).next(va)}getMinOffset(t,r){return ke.mapArray(this.hn(r),o=>this.Pn(t,o).next(u=>u||St())).next(va)}}function Vu(a){return wr(a,"collectionParents")}function Lr(a){return wr(a,"indexEntries")}function Sc(a){return wr(a,"indexConfiguration")}function ia(a){return wr(a,"indexState")}function va(a){_t(0!==a.length);let t=a[0].indexState.offset,r=t.largestBatchId;for(let o=1;o<a.length;o++){const u=a[o].indexState.offset;En(u,t)<0&&(t=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new Vt(t.readTime,t.documentKey,r)}const Lu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bs{constructor(t,r,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=o}static withCacheSize(t){return new bs(t,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function bd(a,t,r){const o=a.store("mutations"),u=a.store("documentMutations"),d=[],m=IDBKeyRange.only(r.batchId);let b=0;const F=o.J({range:m},(ne,ge,Ne)=>(b++,Ne.delete()));d.push(F.next(()=>{_t(1===b)}));const $=[];for(const ne of r.mutations){const ge=ii(t,ne.key.path,r.batchId);d.push(u.delete(ge)),$.push(ne.key)}return ke.waitFor(d).next(()=>$)}function Sd(a){if(!a)return 0;let t;if(a.document)t=a.document;else if(a.unknownDocument)t=a.unknownDocument;else{if(!a.noDocument)throw St();t=a.noDocument}return JSON.stringify(t).length}bs.DEFAULT_COLLECTION_PERCENTILE=10,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bs.DEFAULT=new bs(41943040,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bs.DISABLED=new bs(-1,0,0);class eu{constructor(t,r,o,u){this.userId=t,this.serializer=r,this.indexManager=o,this.referenceDelegate=u,this.Fn={}}static lt(t,r,o,u){_t(""!==t.uid);const d=t.isAuthenticated()?t.uid:"";return new eu(d,r,o,u)}checkEmpty(t){let r=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ro(t).J({index:"userMutationsIndex",range:o},(u,d,m)=>{r=!1,m.done()}).next(()=>r)}addMutationBatch(t,r,o,u){const d=Pc(t),m=ro(t);return m.add({}).next(b=>{_t("number"==typeof b);const F=new zr(b,r,o,u),$=function(lt,Ht,en){const Qt=en.baseMutations.map(Xn=>Ou(lt.ct,Xn)),Vn=en.mutations.map(Xn=>Ou(lt.ct,Xn));return{userId:Ht,batchId:en.batchId,localWriteTimeMs:en.localWriteTime.toMillis(),baseMutations:Qt,mutations:Vn}}(this.serializer,this.userId,F),ne=[];let ge=new Cr((Ne,lt)=>zt(Ne.canonicalString(),lt.canonicalString()));for(const Ne of u){const lt=ii(this.userId,Ne.key.path,b);ge=ge.add(Ne.key.path.popLast()),ne.push(m.put($)),ne.push(d.put(lt,Er))}return ge.forEach(Ne=>{ne.push(this.indexManager.addToCollectionParentIndex(t,Ne))}),t.addOnCommittedListener(()=>{this.Fn[b]=F.keys()}),ke.waitFor(ne).next(()=>F)})}lookupMutationBatch(t,r){return ro(t).get(r).next(o=>o?(_t(o.userId===this.userId),Mr(this.serializer,o)):null)}Mn(t,r){return this.Fn[r]?ke.resolve(this.Fn[r]):this.lookupMutationBatch(t,r).next(o=>{if(o){const u=o.keys();return this.Fn[r]=u,u}return null})}getNextMutationBatchAfterBatchId(t,r){const o=r+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return ro(t).J({index:"userMutationsIndex",range:u},(m,b,F)=>{b.userId===this.userId&&(_t(b.batchId>=o),d=Mr(this.serializer,b)),F.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(t){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return ro(t).J({index:"userMutationsIndex",range:r,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(t){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ro(t).U("userMutationsIndex",r).next(o=>o.map(u=>Mr(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(t,r){const o=Sr(this.userId,r.path),u=IDBKeyRange.lowerBound(o),d=[];return Pc(t).J({range:u},(m,b,F)=>{const[$,ne,ge]=m,Ne=Mn(ne);if($===this.userId&&r.path.isEqual(Ne))return ro(t).get(ge).next(lt=>{if(!lt)throw St();_t(lt.userId===this.userId),d.push(Mr(this.serializer,lt))});F.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(t,r){let o=new Cr(zt);const u=[];return r.forEach(d=>{const m=Sr(this.userId,d.path),b=IDBKeyRange.lowerBound(m),F=Pc(t).J({range:b},($,ne,ge)=>{const[Ne,lt,Ht]=$,en=Mn(lt);Ne===this.userId&&d.path.isEqual(en)?o=o.add(Ht):ge.done()});u.push(F)}),ke.waitFor(u).next(()=>this.xn(t,o))}getAllMutationBatchesAffectingQuery(t,r){const o=r.path,u=o.length+1,d=Sr(this.userId,o),m=IDBKeyRange.lowerBound(d);let b=new Cr(zt);return Pc(t).J({range:m},(F,$,ne)=>{const[ge,Ne,lt]=F,Ht=Mn(Ne);ge===this.userId&&o.isPrefixOf(Ht)?Ht.length===u&&(b=b.add(lt)):ne.done()}).next(()=>this.xn(t,b))}xn(t,r){const o=[],u=[];return r.forEach(d=>{u.push(ro(t).get(d).next(m=>{if(null===m)throw St();_t(m.userId===this.userId),o.push(Mr(this.serializer,m))}))}),ke.waitFor(u).next(()=>o)}removeMutationBatch(t,r){return bd(t._e,this.userId,r).next(o=>(t.addOnCommittedListener(()=>{this.On(r.batchId)}),ke.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(t,u))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(r=>{if(!r)return ke.resolve();const o=IDBKeyRange.lowerBound(function(m){return[m]}(this.userId)),u=[];return Pc(t).J({range:o},(d,m,b)=>{if(d[0]===this.userId){const F=Mn(d[1]);u.push(F)}else b.done()}).next(()=>{_t(0===u.length)})})}containsKey(t,r){return Ns(t,this.userId,r)}Nn(t){return sa(t).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ns(a,t,r){const o=Sr(t,r.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return Pc(a).J({range:d,H:!0},(b,F,$)=>{const[ne,ge,Ne]=b;ne===t&&ge===u&&(m=!0),$.done()}).next(()=>m)}function ro(a){return wr(a,"mutations")}function Pc(a){return wr(a,"documentMutations")}function sa(a){return wr(a,"mutationQueues")}class Hs{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Hs(0)}static kn(){return new Hs(-1)}}class qp{constructor(t,r){this.referenceDelegate=t,this.serializer=r}allocateTargetId(t){return this.qn(t).next(r=>{const o=new Hs(r.highestTargetId);return r.highestTargetId=o.next(),this.Qn(t,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(r=>Zt.fromTimestamp(new Jt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(t,r,o){return this.qn(t).next(u=>(u.highestListenSequenceNumber=r,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.Qn(t,u)))}addTargetData(t,r){return this.Kn(t,r).next(()=>this.qn(t).next(o=>(o.targetCount+=1,this.$n(r,o),this.Qn(t,o))))}updateTargetData(t,r){return this.Kn(t,r)}removeTargetData(t,r){return this.removeMatchingKeysForTargetId(t,r.targetId).next(()=>Mc(t).delete(r.targetId)).next(()=>this.qn(t)).next(o=>(_t(o.targetCount>0),o.targetCount-=1,this.Qn(t,o)))}removeTargets(t,r,o){let u=0;const d=[];return Mc(t).J((m,b)=>{const F=Ha(b);F.sequenceNumber<=r&&null===o.get(F.targetId)&&(u++,d.push(this.removeTargetData(t,F)))}).next(()=>ke.waitFor(d)).next(()=>u)}forEachTarget(t,r){return Mc(t).J((o,u)=>{const d=Ha(u);r(d)})}qn(t){return Pd(t).get("targetGlobalKey").next(r=>(_t(null!==r),r))}Qn(t,r){return Pd(t).put("targetGlobalKey",r)}Kn(t,r){return Mc(t).put(Jc(this.serializer,r))}$n(t,r){let o=!1;return t.targetId>r.highestTargetId&&(r.highestTargetId=t.targetId,o=!0),t.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t.sequenceNumber,o=!0),o}getTargetCount(t){return this.qn(t).next(r=>r.targetCount)}getTargetData(t,r){const o=$o(r),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Mc(t).J({range:u,index:"queryTargetsIndex"},(m,b,F)=>{const $=Ha(b);wo(r,$.target)&&(d=$,F.done())}).next(()=>d)}addMatchingKeys(t,r,o){const u=[],d=ac(t);return r.forEach(m=>{const b=Xe(m.path);u.push(d.put({targetId:o,path:b})),u.push(this.referenceDelegate.addReference(t,o,m))}),ke.waitFor(u)}removeMatchingKeys(t,r,o){const u=ac(t);return ke.forEach(r,d=>{const m=Xe(d.path);return ke.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(t,o,d)])})}removeMatchingKeysForTargetId(t,r){const o=ac(t),u=IDBKeyRange.bound([r],[r+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(t,r){const o=IDBKeyRange.bound([r],[r+1],!1,!0),u=ac(t);let d=Pn();return u.J({range:o,H:!0},(m,b,F)=>{const $=Mn(m[1]),ne=new Ce($);d=d.add(ne)}).next(()=>d)}containsKey(t,r){const o=Xe(r.path),u=IDBKeyRange.bound([o],[Nr(o)],!1,!0);let d=0;return ac(t).J({index:"documentTargetsIndex",H:!0,range:u},([m,b],F,$)=>{0!==m&&(d++,$.done())}).next(()=>d>0)}ot(t,r){return Mc(t).get(r).next(o=>o?Ha(o):null)}}function Mc(a){return wr(a,"targets")}function Pd(a){return wr(a,"targetGlobal")}function ac(a){return wr(a,"targetDocuments")}function Rc([a,t],[r,o]){const u=zt(a,r);return 0===u?zt(t,o):u}class Md{constructor(t){this.Un=t,this.buffer=new Cr(Rc),this.Wn=0}Gn(){return++this.Wn}zn(t){const r=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const o=this.buffer.last();Rc(r,o)<0&&(this.buffer=this.buffer.delete(o).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Nl{constructor(t,r,o){this.garbageCollector=t,this.asyncQueue=r,this.localStore=o,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(t){var r=this;st("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,ie.A)(function*(){r.jn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(o){ss(o)?st("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Sn(o)}yield r.Hn(3e5)}))}}class xl{constructor(t,r){this.Jn=t,this.params=r}calculateTargetCount(t,r){return this.Jn.Yn(t).next(o=>Math.floor(r/100*o))}nthSequenceNumber(t,r){if(0===r)return ke.resolve(te.oe);const o=new Md(r);return this.Jn.forEachTarget(t,u=>o.zn(u.sequenceNumber)).next(()=>this.Jn.Zn(t,u=>o.zn(u))).next(()=>o.maxValue)}removeTargets(t,r,o){return this.Jn.removeTargets(t,r,o)}removeOrphanedDocuments(t,r){return this.Jn.removeOrphanedDocuments(t,r)}collect(t,r){return-1===this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(Lu)):this.getCacheSize(t).next(o=>o<this.params.cacheSizeCollectionThreshold?(st("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lu):this.Xn(t,r))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,r){let o,u,d,m,b,F,$;const ne=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(ge=>(ge>this.params.maximumSequenceNumbersToCollect?(st("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ge}`),u=this.params.maximumSequenceNumbersToCollect):u=ge,m=Date.now(),this.nthSequenceNumber(t,u))).next(ge=>(o=ge,b=Date.now(),this.removeTargets(t,o,r))).next(ge=>(d=ge,F=Date.now(),this.removeOrphanedDocuments(t,o))).next(ge=>($=Date.now(),Dn()<=Oe.$b.DEBUG&&st("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-ne}ms\n\tDetermined least recently used ${u} in `+(b-m)+`ms\n\tRemoved ${d} targets in `+(F-b)+`ms\n\tRemoved ${ge} documents in `+($-F)+`ms\nTotal Duration: ${$-ne}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:ge})))}}class af{constructor(t,r){this.db=t,this.garbageCollector=function sf(a,t){return new xl(a,t)}(this,r)}Yn(t){const r=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(o=>r.next(u=>o+u))}er(t){let r=0;return this.Zn(t,o=>{r++}).next(()=>r)}forEachTarget(t,r){return this.db.getTargetCache().forEachTarget(t,r)}Zn(t,r){return this.tr(t,(o,u)=>r(u))}addReference(t,r,o){return tu(t,o)}removeReference(t,r,o){return tu(t,o)}removeTargets(t,r,o){return this.db.getTargetCache().removeTargets(t,r,o)}markPotentiallyOrphaned(t,r){return tu(t,r)}nr(t,r){return function(u,d){let m=!1;return sa(u).Y(b=>Ns(u,b,d).next(F=>(F&&(m=!0),ke.resolve(!F)))).next(()=>m)}(t,r)}removeOrphanedDocuments(t,r){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.tr(t,(m,b)=>{if(b<=r){const F=this.nr(t,m).next($=>{if(!$)return d++,o.getEntry(t,m).next(()=>(o.removeEntry(m,Zt.min()),ac(t).delete([0,Xe(m.path)])))});u.push(F)}}).next(()=>ke.waitFor(u)).next(()=>o.apply(t)).next(()=>d)}removeTarget(t,r){const o=r.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,o)}updateLimboDocument(t,r){return tu(t,r)}tr(t,r){const o=ac(t);let u,d=te.oe;return o.J({index:"documentTargetsIndex"},([m,b],{path:F,sequenceNumber:$})=>{0===m?(d!==te.oe&&r(new Ce(Mn(u)),d),d=$,u=F):d=te.oe}).next(()=>{d!==te.oe&&r(new Ce(Mn(u)),d)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function tu(a,t){return ac(a).put((u=a.currentSequenceNumber,{targetId:0,path:Xe(t.path),sequenceNumber:u}));var u}class Rd{constructor(){this.changes=new Le(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,ar.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const o=this.changes.get(r);return void 0!==o?ke.resolve(o):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class cf{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,r,o){return Oc(t).put(o)}removeEntry(t,r,o){return Oc(t).delete(function(d,m){const b=d.path.toArray();return[b.slice(0,b.length-2),b[b.length-2],ku(m),b[b.length-1]]}(r,o))}updateMetadata(t,r){return this.getMetadata(t).next(o=>(o.byteSize+=r,this.rr(t,o)))}getEntry(t,r){let o=ar.newInvalidDocument(r);return Oc(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cs(r))},(u,d)=>{o=this.ir(r,d)}).next(()=>o)}sr(t,r){let o={size:0,document:ar.newInvalidDocument(r)};return Oc(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cs(r))},(u,d)=>{o={document:this.ir(r,d),size:Sd(d)}}).next(()=>o)}getEntries(t,r){let o=Ct();return this._r(t,r,(u,d)=>{const m=this.ir(u,d);o=o.insert(u,m)}).next(()=>o)}ar(t,r){let o=Ct(),u=new Pr(Ce.comparator);return this._r(t,r,(d,m)=>{const b=this.ir(d,m);o=o.insert(d,b),u=u.insert(d,Sd(m))}).next(()=>({documents:o,ur:u}))}_r(t,r,o){if(r.isEmpty())return ke.resolve();let u=new Cr(Ai);r.forEach(F=>u=u.add(F));const d=IDBKeyRange.bound(Cs(u.first()),Cs(u.last())),m=u.getIterator();let b=m.getNext();return Oc(t).J({index:"documentKeyIndex",range:d},(F,$,ne)=>{const ge=Ce.fromSegments([...$.prefixPath,$.collectionGroup,$.documentId]);for(;b&&Ai(b,ge)<0;)o(b,null),b=m.getNext();b&&b.isEqual(ge)&&(o(b,$),b=m.hasNext()?m.getNext():null),b?ne.$(Cs(b)):ne.done()}).next(()=>{for(;b;)o(b,null),b=m.hasNext()?m.getNext():null})}getDocumentsMatchingQuery(t,r,o,u,d){const m=r.path,b=[m.popLast().toArray(),m.lastSegment(),ku(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],F=[m.popLast().toArray(),m.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oc(t).U(IDBKeyRange.bound(b,F,!0)).next($=>{d?.incrementDocumentReadCount($.length);let ne=Ct();for(const ge of $){const Ne=this.ir(Ce.fromSegments(ge.prefixPath.concat(ge.collectionGroup,ge.documentId)),ge);Ne.isFoundDocument()&&(L(r,Ne)||u.has(Ne.key))&&(ne=ne.insert(Ne.key,Ne))}return ne})}getAllFromCollectionGroup(t,r,o,u){let d=Ct();const m=cc(r,o),b=cc(r,Vt.max());return Oc(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,b,!0)},(F,$,ne)=>{const ge=this.ir(Ce.fromSegments($.prefixPath.concat($.collectionGroup,$.documentId)),$);d=d.insert(ge.key,ge),d.size===u&&ne.done()}).next(()=>d)}newChangeBuffer(t){return new uf(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(r=>r.byteSize)}getMetadata(t){return kl(t).get("remoteDocumentGlobalKey").next(r=>(_t(!!r),r))}rr(t,r){return kl(t).put("remoteDocumentGlobalKey",r)}ir(t,r){if(r){const o=function Wo(a,t){let r;if(t.document)r=Zh(a.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const o=Ce.fromSegments(t.noDocument.path),u=Yc(t.noDocument.readTime);r=ar.newNoDocument(o,u),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return St();{const o=Ce.fromSegments(t.unknownDocument.path),u=Yc(t.unknownDocument.version);r=ar.newUnknownDocument(o,u)}}return t.readTime&&r.setReadTime(function(u){const d=new Jt(u[0],u[1]);return Zt.fromTimestamp(d)}(t.readTime)),r}(this.serializer,r);if(!o.isNoDocument()||!o.version.isEqual(Zt.min()))return o}return ar.newInvalidDocument(t)}}function Uu(a){return new cf(a)}class uf extends Rd{constructor(t,r){super(),this.cr=t,this.trackRemovals=r,this.lr=new Le(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(t){const r=[];let o=0,u=new Cr((d,m)=>zt(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const b=this.lr.get(d);if(r.push(this.cr.removeEntry(t,d,b.readTime)),m.isValidDocument()){const F=xu(this.cr.serializer,m);u=u.add(d.path.popLast());const $=Sd(F);o+=$-b.size,r.push(this.cr.addEntry(t,d,F))}else if(o-=b.size,this.trackRemovals){const F=xu(this.cr.serializer,m.convertToNoDocument(Zt.min()));r.push(this.cr.addEntry(t,d,F))}}),u.forEach(d=>{r.push(this.cr.indexManager.addToCollectionParentIndex(t,d))}),r.push(this.cr.updateMetadata(t,o)),ke.waitFor(r)}getFromCache(t,r){return this.cr.sr(t,r).next(o=>(this.lr.set(r,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(t,r){return this.cr.ar(t,r).next(({documents:o,ur:u})=>(u.forEach((d,m)=>{this.lr.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function kl(a){return wr(a,"remoteDocumentGlobal")}function Oc(a){return wr(a,"remoteDocumentsV14")}function Cs(a){const t=a.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cc(a,t){const r=t.documentKey.path.toArray();return[a,ku(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Ai(a,t){const r=a.path.toArray(),o=t.path.toArray();let u=0;for(let d=0;d<r.length-2&&d<o.length-2;++d)if(u=zt(r[d],o[d]),u)return u;return u=zt(r.length,o.length),u||(u=zt(r[r.length-2],o[o.length-2]),u||zt(r[r.length-1],o[o.length-1]))}class Qp{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}class lf{constructor(t,r,o,u){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=o,this.indexManager=u}getDocument(t,r){let o=null;return this.documentOverlayCache.getOverlay(t,r).next(u=>(o=u,this.remoteDocumentCache.getEntry(t,r))).next(u=>(null!==o&&Vr(o.mutation,u,Xr.empty(),Jt.now()),u))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.getLocalViewOfDocuments(t,o,Pn()).next(()=>o))}getLocalViewOfDocuments(t,r,o=Pn()){const u=zn();return this.populateOverlays(t,u,r).next(()=>this.computeViews(t,r,u,o).next(d=>{let m=hn();return d.forEach((b,F)=>{m=m.insert(b,F.overlayedDocument)}),m}))}getOverlayedDocuments(t,r){const o=zn();return this.populateOverlays(t,o,r).next(()=>this.computeViews(t,r,o,Pn()))}populateOverlays(t,r,o){const u=[];return o.forEach(d=>{r.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(t,u).next(d=>{d.forEach((m,b)=>{r.set(m,b)})})}computeViews(t,r,o,u){let d=Ct();const m=Hn(),b=Hn();return r.forEach((F,$)=>{const ne=o.get($.key);u.has($.key)&&(void 0===ne||ne.mutation instanceof _r)?d=d.insert($.key,$):void 0!==ne?(m.set($.key,ne.mutation.getFieldMask()),Vr(ne.mutation,$,ne.mutation.getFieldMask(),Jt.now())):m.set($.key,Xr.empty())}),this.recalculateAndSaveOverlays(t,d).next(F=>(F.forEach(($,ne)=>m.set($,ne)),r.forEach(($,ne)=>{var ge;return b.set($,new Qp(ne,null!==(ge=m.get($))&&void 0!==ge?ge:null))}),b))}recalculateAndSaveOverlays(t,r){const o=Hn();let u=new Pr((m,b)=>m-b),d=Pn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(m=>{for(const b of m)b.keys().forEach(F=>{const $=r.get(F);if(null===$)return;let ne=o.get(F)||Xr.empty();ne=b.applyToLocalView($,ne),o.set(F,ne);const ge=(u.get(b.batchId)||Pn()).add(F);u=u.insert(b.batchId,ge)})}).next(()=>{const m=[],b=u.getReverseIterator();for(;b.hasNext();){const F=b.getNext(),$=F.key,ne=F.value,ge=Fn();ne.forEach(Ne=>{if(!d.has(Ne)){const lt=ri(r.get(Ne),o.get(Ne));null!==lt&&ge.set(Ne,lt),d=d.add(Ne)}}),m.push(this.documentOverlayCache.saveOverlays(t,$,ge))}return ke.waitFor(m)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,r,o,u){return Ce.isDocumentKey((m=r).path)&&null===m.collectionGroup&&0===m.filters.length?this.getDocumentsMatchingDocumentQuery(t,r.path):ma(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,o,u):this.getDocumentsMatchingCollectionQuery(t,r,o,u);var m}getNextDocuments(t,r,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,o,u).next(d=>{const m=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,o.largestBatchId,u-d.size):ke.resolve(zn());let b=-1,F=d;return m.next($=>ke.forEach($,(ne,ge)=>(b<ge.largestBatchId&&(b=ge.largestBatchId),d.get(ne)?ke.resolve():this.remoteDocumentCache.getEntry(t,ne).next(Ne=>{F=F.insert(ne,Ne)}))).next(()=>this.populateOverlays(t,$,d)).next(()=>this.computeViews(t,F,$,Pn())).next(ne=>({batchId:b,changes:hr(ne)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new Ce(r)).next(o=>{let u=hn();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(t,r,o,u){const d=r.collectionGroup;let m=hn();return this.indexManager.getCollectionParents(t,d).next(b=>ke.forEach(b,F=>{const $=(ge=r,Ne=F.child(d),new Gr(Ne,null,ge.explicitOrderBy.slice(),ge.filters.slice(),ge.limit,ge.limitType,ge.startAt,ge.endAt));var ge,Ne;return this.getDocumentsMatchingCollectionQuery(t,$,o,u).next(ne=>{ne.forEach((ge,Ne)=>{m=m.insert(ge,Ne)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(t,r,o,u){let d;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,o.largestBatchId).next(m=>(d=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,o,d,u))).next(m=>{d.forEach((F,$)=>{const ne=$.getKey();null===m.get(ne)&&(m=m.insert(ne,ar.newInvalidDocument(ne)))});let b=hn();return m.forEach((F,$)=>{const ne=d.get(F);void 0!==ne&&Vr(ne.mutation,$,Xr.empty(),Jt.now()),L(r,$)&&(b=b.insert(F,$))}),b})}}class Xp{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,r){return ke.resolve(this.hr.get(r))}saveBundleMetadata(t,r){return this.hr.set(r.id,{id:(u=r).id,version:u.version,createTime:Ni(u.createTime)}),ke.resolve();var u}getNamedQuery(t,r){return ke.resolve(this.Pr.get(r))}saveNamedQuery(t,r){return this.Pr.set(r.name,{name:(u=r).name,query:$s(u.bundledQuery),readTime:Ni(u.readTime)}),ke.resolve();var u}}class Yp{constructor(){this.overlays=new Pr(Ce.comparator),this.Ir=new Map}getOverlay(t,r){return ke.resolve(this.overlays.get(r))}getOverlays(t,r){const o=zn();return ke.forEach(r,u=>this.getOverlay(t,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(t,r,o){return o.forEach((u,d)=>{this.ht(t,r,d)}),ke.resolve()}removeOverlaysForBatchId(t,r,o){const u=this.Ir.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.Ir.delete(o)),ke.resolve()}getOverlaysForCollection(t,r,o){const u=zn(),d=r.length+1,m=new Ce(r.child("")),b=this.overlays.getIteratorFrom(m);for(;b.hasNext();){const F=b.getNext().value,$=F.getKey();if(!r.isPrefixOf($.path))break;$.path.length===d&&F.largestBatchId>o&&u.set(F.getKey(),F)}return ke.resolve(u)}getOverlaysForCollectionGroup(t,r,o,u){let d=new Pr(($,ne)=>$-ne);const m=this.overlays.getIterator();for(;m.hasNext();){const $=m.getNext().value;if($.getKey().getCollectionGroup()===r&&$.largestBatchId>o){let ne=d.get($.largestBatchId);null===ne&&(ne=zn(),d=d.insert($.largestBatchId,ne)),ne.set($.getKey(),$)}}const b=zn(),F=d.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach(($,ne)=>b.set($,ne)),!(b.size()>=u)););return ke.resolve(b)}ht(t,r,o){const u=this.overlays.get(o.key);if(null!==u){const m=this.Ir.get(u.largestBatchId).delete(o.key);this.Ir.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new Zn(r,o));let d=this.Ir.get(r);void 0===d&&(d=Pn(),this.Ir.set(r,d)),this.Ir.set(r,d.add(o.key))}}class df{constructor(){this.sessionToken=Hr.EMPTY_BYTE_STRING}getSessionToken(t){return ke.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,ke.resolve()}}class nu{constructor(){this.Tr=new Cr(Qi.Er),this.dr=new Cr(Qi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,r){const o=new Qi(t,r);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(t,r){t.forEach(o=>this.addReference(o,r))}removeReference(t,r){this.Vr(new Qi(t,r))}mr(t,r){t.forEach(o=>this.removeReference(o,r))}gr(t){const r=new Ce(new Rn([])),o=new Qi(r,t),u=new Qi(r,t+1),d=[];return this.dr.forEachInRange([o,u],m=>{this.Vr(m),d.push(m.key)}),d}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const r=new Ce(new Rn([])),o=new Qi(r,t),u=new Qi(r,t+1);let d=Pn();return this.dr.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(t){const r=new Qi(t,0),o=this.Tr.firstAfterOrEqual(r);return null!==o&&t.isEqual(o.key)}}class Qi{constructor(t,r){this.key=t,this.wr=r}static Er(t,r){return Ce.comparator(t.key,r.key)||zt(t.wr,r.wr)}static Ar(t,r){return zt(t.wr,r.wr)||Ce.comparator(t.key,r.key)}}class Pa{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Cr(Qi.Er)}checkEmpty(t){return ke.resolve(0===this.mutationQueue.length)}addMutationBatch(t,r,o,u){const d=this.Sr;this.Sr++;const m=new zr(d,r,o,u);this.mutationQueue.push(m);for(const b of u)this.br=this.br.add(new Qi(b.key,d)),this.indexManager.addToCollectionParentIndex(t,b.key.path.popLast());return ke.resolve(m)}lookupMutationBatch(t,r){return ke.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(t,r){const u=this.vr(r+1),d=u<0?0:u;return ke.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const o=new Qi(r,0),u=new Qi(r,Number.POSITIVE_INFINITY),d=[];return this.br.forEachInRange([o,u],m=>{const b=this.Dr(m.wr);d.push(b)}),ke.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(t,r){let o=new Cr(zt);return r.forEach(u=>{const d=new Qi(u,0),m=new Qi(u,Number.POSITIVE_INFINITY);this.br.forEachInRange([d,m],b=>{o=o.add(b.wr)})}),ke.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,r){const o=r.path,u=o.length+1;let d=o;Ce.isDocumentKey(d)||(d=d.child(""));const m=new Qi(new Ce(d),0);let b=new Cr(zt);return this.br.forEachWhile(F=>{const $=F.key.path;return!!o.isPrefixOf($)&&($.length===u&&(b=b.add(F.wr)),!0)},m),ke.resolve(this.Cr(b))}Cr(t){const r=[];return t.forEach(o=>{const u=this.Dr(o);null!==u&&r.push(u)}),r}removeMutationBatch(t,r){_t(0===this.Fr(r.batchId,"removed")),this.mutationQueue.shift();let o=this.br;return ke.forEach(r.mutations,u=>{const d=new Qi(u.key,r.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(()=>{this.br=o})}On(t){}containsKey(t,r){const o=new Qi(r,0),u=this.br.firstAfterOrEqual(o);return ke.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(t){return ke.resolve()}Fr(t,r){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){const r=this.vr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Od{constructor(t){this.Mr=t,this.docs=new Pr(Ce.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const o=r.key,u=this.docs.get(o),d=u?u.size:0,m=this.Mr(r);return this.docs=this.docs.insert(o,{document:r.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const o=this.docs.get(r);return ke.resolve(o?o.document.mutableCopy():ar.newInvalidDocument(r))}getEntries(t,r){let o=Ct();return r.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():ar.newInvalidDocument(u))}),ke.resolve(o)}getDocumentsMatchingQuery(t,r,o,u){let d=Ct();const m=r.path,b=new Ce(m.child("")),F=this.docs.getIteratorFrom(b);for(;F.hasNext();){const{key:$,value:{document:ne}}=F.getNext();if(!m.isPrefixOf($.path))break;$.path.length>m.length+1||En(Tt(ne),o)<=0||(u.has(ne.key)||L(r,ne))&&(d=d.insert(ne.key,ne.mutableCopy()))}return ke.resolve(d)}getAllFromCollectionGroup(t,r,o,u){St()}Or(t,r){return ke.forEach(this.docs,o=>r(o))}newChangeBuffer(t){return new Fl(this)}getSize(t){return ke.resolve(this.size)}}class Fl extends Rd{constructor(t){super(),this.cr=t}applyChanges(t){const r=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?r.push(this.cr.addEntry(t,u)):this.cr.removeEntry(o)}),ke.waitFor(r)}getFromCache(t,r){return this.cr.getEntry(t,r)}getAllFromCache(t,r){return this.cr.getEntries(t,r)}}class Bu{constructor(t){this.persistence=t,this.Nr=new Le(r=>$o(r),wo),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new nu,this.targetCount=0,this.kr=Hs.Bn()}forEachTarget(t,r){return this.Nr.forEach((o,u)=>r(u)),ke.resolve()}getLastRemoteSnapshotVersion(t){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ke.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(t,r,o){return o&&(this.lastRemoteSnapshotVersion=o),r>this.Lr&&(this.Lr=r),ke.resolve()}Kn(t){this.Nr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.kr=new Hs(r),this.highestTargetId=r),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,r){return this.Kn(r),this.targetCount+=1,ke.resolve()}updateTargetData(t,r){return this.Kn(r),ke.resolve()}removeTargetData(t,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,ke.resolve()}removeTargets(t,r,o){let u=0;const d=[];return this.Nr.forEach((m,b)=>{b.sequenceNumber<=r&&null===o.get(b.targetId)&&(this.Nr.delete(m),d.push(this.removeMatchingKeysForTargetId(t,b.targetId)),u++)}),ke.waitFor(d).next(()=>u)}getTargetCount(t){return ke.resolve(this.targetCount)}getTargetData(t,r){const o=this.Nr.get(r)||null;return ke.resolve(o)}addMatchingKeys(t,r,o){return this.Br.Rr(r,o),ke.resolve()}removeMatchingKeys(t,r,o){this.Br.mr(r,o);const u=this.persistence.referenceDelegate,d=[];return u&&r.forEach(m=>{d.push(u.markPotentiallyOrphaned(t,m))}),ke.waitFor(d)}removeMatchingKeysForTargetId(t,r){return this.Br.gr(r),ke.resolve()}getMatchingKeysForTargetId(t,r){const o=this.Br.yr(r);return ke.resolve(o)}containsKey(t,r){return ke.resolve(this.Br.containsKey(r))}}class Nc{constructor(t,r){this.qr={},this.overlays={},this.Qr=new te(0),this.Kr=!1,this.Kr=!0,this.$r=new df,this.referenceDelegate=t(this),this.Ur=new Bu(this),this.indexManager=new Kp,this.remoteDocumentCache=new Od(o=>this.referenceDelegate.Wr(o)),this.serializer=new js(r),this.Gr=new Xp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Yp,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let o=this.qr[t.toKey()];return o||(o=new Pa(r,this.referenceDelegate),this.qr[t.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,r,o){st("MemoryPersistence","Starting transaction:",t);const u=new ju(this.Qr.next());return this.referenceDelegate.zr(),o(u).next(d=>this.referenceDelegate.jr(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Hr(t,r){return ke.or(Object.values(this.qr).map(o=>()=>o.containsKey(t,r)))}}class ju extends qn{constructor(t){super(),this.currentSequenceNumber=t}}class $u{constructor(t){this.persistence=t,this.Jr=new nu,this.Yr=null}static Zr(t){return new $u(t)}get Xr(){if(this.Yr)return this.Yr;throw St()}addReference(t,r,o){return this.Jr.addReference(o,r),this.Xr.delete(o.toString()),ke.resolve()}removeReference(t,r,o){return this.Jr.removeReference(o,r),this.Xr.add(o.toString()),ke.resolve()}markPotentiallyOrphaned(t,r){return this.Xr.add(r.toString()),ke.resolve()}removeTarget(t,r){this.Jr.gr(r.targetId).forEach(u=>this.Xr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,r.targetId).next(u=>{u.forEach(d=>this.Xr.add(d.toString()))}).next(()=>o.removeTargetData(t,r))}zr(){this.Yr=new Set}jr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Xr,o=>{const u=Ce.fromPath(o);return this.ei(t,u).next(d=>{d||r.removeEntry(u,Zt.min())})}).next(()=>(this.Yr=null,r.apply(t)))}updateLimboDocument(t,r){return this.ei(t,r).next(o=>{o?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(t){return 0}ei(t,r){return ke.or([()=>ke.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Hr(t,r)])}}class Nd{constructor(t){this.serializer=t}O(t,r,o,u){const d=new $r("createOrUpgrade",r);var F;o<1&&u>=1&&(t.createObjectStore("owner"),(F=t).createObjectStore("mutationQueues",{keyPath:"userId"}),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wn,{unique:!0}),F.createObjectStore("documentMutations"),uc(t),function(F){F.createObjectStore("remoteDocuments")}(t));let m=ke.resolve();return o<3&&u>=3&&(0!==o&&(function(F){F.deleteObjectStore("targetDocuments"),F.deleteObjectStore("targets"),F.deleteObjectStore("targetGlobal")}(t),uc(t)),m=m.next(()=>function(F){const $=F.store("targetGlobal"),ne={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zt.min().toTimestamp(),targetCount:0};return $.put("targetGlobalKey",ne)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(F,$){return $.store("mutations").U().next(ne=>{F.deleteObjectStore("mutations"),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wn,{unique:!0});const ge=$.store("mutations"),Ne=ne.map(lt=>ge.put(lt));return ke.waitFor(Ne)})}(t,d))),m=m.next(()=>{!function(F){F.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),o<5&&u>=5&&(m=m.next(()=>this.ni(d))),o<6&&u>=6&&(m=m.next(()=>(function(F){F.createObjectStore("remoteDocumentGlobal")}(t),this.ri(d)))),o<7&&u>=7&&(m=m.next(()=>this.ii(d))),o<8&&u>=8&&(m=m.next(()=>this.si(t,d))),o<9&&u>=9&&(m=m.next(()=>{!function(F){F.objectStoreNames.contains("remoteDocumentChanges")&&F.deleteObjectStore("remoteDocumentChanges")}(t)})),o<10&&u>=10&&(m=m.next(()=>this.oi(d))),o<11&&u>=11&&(m=m.next(()=>{(function(F){F.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(F){F.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),o<12&&u>=12&&(m=m.next(()=>{!function(F){const $=F.createObjectStore("documentOverlays",{keyPath:On});$.createIndex("collectionPathOverlayIndex",ur,{unique:!1}),$.createIndex("collectionGroupOverlayIndex",Vo,{unique:!1})}(t)})),o<13&&u>=13&&(m=m.next(()=>function(F){const $=F.createObjectStore("remoteDocumentsV14",{keyPath:ui});$.createIndex("documentKeyIndex",qr),$.createIndex("collectionGroupIndex",Si)}(t)).next(()=>this._i(t,d)).next(()=>t.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>this.ai(t,d))),o<15&&u>=15&&(m=m.next(()=>function(F){F.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),F.createObjectStore("indexState",{keyPath:Fr}).createIndex("sequenceNumberIndex",di,{unique:!1}),F.createObjectStore("indexEntries",{keyPath:vi}).createIndex("documentKeyIndex",Ei,{unique:!1})}(t))),o<16&&u>=16&&(m=m.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),o<17&&u>=17&&(m=m.next(()=>{!function(F){F.createObjectStore("globals",{keyPath:"name"})}(t)})),m}ri(t){let r=0;return t.store("remoteDocuments").J((o,u)=>{r+=Sd(u)}).next(()=>{const o={byteSize:r};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}ni(t){const r=t.store("mutationQueues"),o=t.store("mutations");return r.U().next(u=>ke.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.U("userMutationsIndex",m).next(b=>ke.forEach(b,F=>{_t(F.userId===d.userId);const $=Mr(this.serializer,F);return bd(t,d.userId,$).next(()=>{})}))}))}ii(t){const r=t.store("targetDocuments"),o=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.J((m,b)=>{const F=new Rn(m),$=[0,Xe(F)];d.push(r.get($).next(ne=>ne?ke.resolve():r.put({targetId:0,path:Xe(F),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>ke.waitFor(d))})}si(t,r){t.createObjectStore("collectionParents",{keyPath:nr});const o=r.store("collectionParents"),u=new Ft,d=m=>{if(u.add(m)){const b=m.lastSegment(),F=m.popLast();return o.put({collectionId:b,parent:Xe(F)})}};return r.store("remoteDocuments").J({H:!0},(m,b)=>{const F=new Rn(m);return d(F.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([m,b,F],$)=>{const ne=Mn(b);return d(ne.popLast())}))}oi(t){const r=t.store("targets");return r.J((o,u)=>{const d=Ha(u),m=Jc(this.serializer,d);return r.put(m)})}_i(t,r){const o=r.store("remoteDocuments"),u=[];return o.J((d,m)=>{const b=r.store("remoteDocumentsV14"),F=(ge=m,ge.document?new Ce(Rn.fromString(ge.document.name).popFirst(5)):ge.noDocument?Ce.fromSegments(ge.noDocument.path):ge.unknownDocument?Ce.fromSegments(ge.unknownDocument.path):St()).path.toArray(),$={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};var ge;u.push(b.put($))}).next(()=>ke.waitFor(u))}ai(t,r){const o=r.store("mutations"),u=Uu(this.serializer),d=new Nc($u.Zr,this.serializer.ct);return o.U().next(m=>{const b=new Map;return m.forEach(F=>{var $;let ne=null!==($=b.get(F.userId))&&void 0!==$?$:Pn();Mr(this.serializer,F).keys().forEach(ge=>ne=ne.add(ge)),b.set(F.userId,ne)}),ke.forEach(b,(F,$)=>{const ne=new tn($),ge=Dl.lt(this.serializer,ne),Ne=d.getIndexManager(ne),lt=eu.lt(ne,this.serializer,Ne,d.referenceDelegate);return new lf(u,lt,ge,Ne).recalculateAndSaveOverlaysForDocumentKeys(new xs(r,te.oe),F).next()})})}}function uc(a){a.createObjectStore("targetDocuments",{keyPath:Dr}).createIndex("documentTargetsIndex",li,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ir,{unique:!0}),a.createObjectStore("targetGlobal")}const Ma="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ll{constructor(t,r,o,u,d,m,b,F,$,ne,ge=17){if(this.allowTabSynchronization=t,this.persistenceKey=r,this.clientId=o,this.ui=d,this.window=m,this.document=b,this.ci=$,this.li=ne,this.hi=ge,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=Ne=>Promise.resolve(),!Ll.D())throw new Rt(tt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new af(this,u),this.Ai=r+"main",this.serializer=new js(F),this.Ri=new Qr(this.Ai,this.hi,new Nd(this.serializer)),this.$r=new tf,this.Ur=new qp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Uu(this.serializer),this.Gr=new Ko,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===ne&&In("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Rt(tt.FAILED_PRECONDITION,Ma);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new te(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){var r=this;return this.di=function(){var o=(0,ie.A)(function*(u){if(r.started)return t(u)});return function(u){return o.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(function(){var r=(0,ie.A)(function*(o){null===o.newVersion&&(yield t())});return function(o){return r.apply(this,arguments)}}())}setNetworkEnabled(t){var r=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget((0,ie.A)(function*(){r.started&&(yield r.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Ul(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(r=>this.isPrimary&&!r?this.bi(t).next(()=>!1):!!r&&this.Di(t).next(()=>!0))).catch(t=>{if(ss(t))return st("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return st("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return lc(t).get("owner").next(r=>ke.resolve(this.vi(r)))}Ci(t){return Ul(t).delete(this.clientId)}Fi(){var t=this;return(0,ie.A)(function*(){if(t.isPrimary&&!t.Mi(t.Ei,18e5)){t.Ei=Date.now();const r=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=wr(o,"clientMetadata");return u.U().next(d=>{const m=t.xi(d,18e5),b=d.filter(F=>-1===m.indexOf(F));return ke.forEach(b,F=>u.delete(F.clientId)).next(()=>b)})}).catch(()=>[]);if(t.Vi)for(const o of r)t.Vi.removeItem(t.Oi(o.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?ke.resolve(!0):lc(t).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Rt(tt.FAILED_PRECONDITION,Ma);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ul(t).U().next(o=>void 0===this.xi(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(r=>(this.isPrimary!==r&&st("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var t=this;return(0,ie.A)(function*(){t.Kr=!1,t.Li(),t.Ti&&(t.Ti.cancel(),t.Ti=null),t.Bi(),t.ki(),yield t.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const o=new xs(r,te.oe);return t.bi(o).next(()=>t.Ci(o))}),t.Ri.close(),t.qi()})()}xi(t,r){return t.filter(o=>this.Mi(o.updateTimeMs,r)&&!this.Ni(o.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>Ul(t).U().next(r=>this.xi(r,18e5).map(o=>o.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,r){return eu.lt(t,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Ol(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return Dl.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,r,o){st("IndexedDbPersistence","Starting transaction:",t);const u="readonly"===r?"readonly":"readwrite",d=17===(F=this.hi)?vo:16===F?rr:15===F?yo:14===F?la:13===F?Yo:12===F?oo:11===F?Gi:void St();var F;let m;return this.Ri.runTransaction(t,u,d,b=>(m=new xs(b,this.Qr?this.Qr.next():te.oe),"readwrite-primary"===r?this.wi(m).next(F=>!!F||this.Si(m)).next(F=>{if(!F)throw In(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Rt(tt.FAILED_PRECONDITION,Bn);return o(m)}).next(F=>this.Di(m).next(()=>F)):this.Ki(m).next(()=>o(m)))).then(b=>(m.raiseOnCommittedEvent(),b))}Ki(t){return lc(t).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Rt(tt.FAILED_PRECONDITION,Ma)})}Di(t){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lc(t).put("owner",r)}static D(){return Qr.D()}bi(t){const r=lc(t);return r.get("owner").next(o=>this.vi(o)?(st("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):ke.resolve())}Mi(t,r){const o=Date.now();return!(t<o-r||t>o&&(In(`Detected an update time that is in the future: ${t} > ${o}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;(0,ce.nr)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var r;try{const o=null!==(null===(r=this.Vi)||void 0===r?void 0:r.getItem(this.Oi(t)));return st("IndexedDbPersistence",`Client '${t}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return In("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){In("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function lc(a){return wr(a,"owner")}function Ul(a){return wr(a,"clientMetadata")}function xd(a,t){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+t+"/"+r+"/"}class kd{constructor(t,r,o,u){this.targetId=t,this.fromCache=r,this.$i=o,this.Ui=u}static Wi(t,r){let o=Pn(),u=Pn();for(const d of r.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new kd(t,r.fromCache,o,u)}}class I_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Jp{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,ce.nr)()?8:Ms((0,ce.ZQ)())>0?6:4}initialize(t,r){this.Ji=t,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(t,r,o,u){const d={result:null};return this.Yi(t,r).next(m=>{d.result=m}).next(()=>{if(!d.result)return this.Zi(t,r,u,o).next(m=>{d.result=m})}).next(()=>{if(d.result)return;const m=new I_;return this.Xi(t,r,m).next(b=>{if(d.result=b,this.zi)return this.es(t,r,m,b.size)})}).next(()=>d.result)}es(t,r,o,u){return o.documentReadCount<this.ji?(Dn()<=Oe.$b.DEBUG&&st("QueryEngine","SDK will not create cache indexes for query:",D(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ke.resolve()):(Dn()<=Oe.$b.DEBUG&&st("QueryEngine","Query:",D(r),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Hi*u?(Dn()<=Oe.$b.DEBUG&&st("QueryEngine","The SDK decides to create cache indexes for query:",D(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ki(r))):ke.resolve())}Yi(t,r){if(Oi(r))return ke.resolve(null);let o=Ki(r);return this.indexManager.getIndexType(t,o).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=Ao(r,null,"F"),o=Ki(r)),this.indexManager.getDocumentsMatchingTarget(t,o).next(d=>{const m=Pn(...d);return this.Ji.getDocuments(t,m).next(b=>this.indexManager.getMinOffset(t,o).next(F=>{const $=this.ts(r,b);return this.ns(r,$,m,F.readTime)?this.Yi(t,Ao(r,null,"F")):this.rs(t,$,r,F)}))})))}Zi(t,r,o,u){return Oi(r)||u.isEqual(Zt.min())?ke.resolve(null):this.Ji.getDocuments(t,o).next(d=>{const m=this.ts(r,d);return this.ns(r,m,o,u)?ke.resolve(null):(Dn()<=Oe.$b.DEBUG&&st("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),D(r)),this.rs(t,m,r,_e(u,-1)).next(b=>b))})}ts(t,r){let o=new Cr(he(t));return r.forEach((u,d)=>{L(t,d)&&(o=o.add(d))}),o}ns(t,r,o,u){if(null===t.limit)return!1;if(o.size!==r.size)return!0;const d="F"===t.limitType?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Xi(t,r,o){return Dn()<=Oe.$b.DEBUG&&st("QueryEngine","Using full collection scan to execute query:",D(r)),this.Ji.getDocumentsMatchingQuery(t,r,Vt.min(),o)}rs(t,r,o,u){return this.Ji.getDocumentsMatchingQuery(t,o,u).next(d=>(r.forEach(m=>{d=d.insert(m.key,m)}),d))}}class Bl{constructor(t,r,o,u){this.persistence=t,this.ss=r,this.serializer=u,this.os=new Pr(zt),this._s=new Le(d=>$o(d),wo),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(o)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.os))}}function ru(a,t,r,o){return new Bl(a,t,r,o)}function Zp(a,t){return xc.apply(this,arguments)}function xc(){return(xc=(0,ie.A)(function*(a,t){const r=Nt(a);return yield r.persistence.runTransaction("Handle user change","readonly",o=>{let u;return r.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,r.ls(t),r.mutationQueue.getAllMutationBatches(o))).next(d=>{const m=[],b=[];let F=Pn();for(const $ of u){m.push($.batchId);for(const ne of $.mutations)F=F.add(ne.key)}for(const $ of d){b.push($.batchId);for(const ne of $.mutations)F=F.add(ne.key)}return r.localDocuments.getDocuments(o,F).next($=>({hs:$,removedBatchIds:m,addedBatchIds:b}))})})})).apply(this,arguments)}function h(a){const t=Nt(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Ur.getLastRemoteSnapshotVersion(r))}function A(a,t,r){let o=Pn(),u=Pn();return r.forEach(d=>o=o.add(d)),t.getEntries(a,o).next(d=>{let m=Ct();return r.forEach((b,F)=>{const $=d.get(b);F.isFoundDocument()!==$.isFoundDocument()&&(u=u.add(b)),F.isNoDocument()&&F.version.isEqual(Zt.min())?(t.removeEntry(b,F.readTime),m=m.insert(b,F)):!$.isValidDocument()||F.version.compareTo($.version)>0||0===F.version.compareTo($.version)&&$.hasPendingWrites?(t.addEntry(F),m=m.insert(b,F)):st("LocalStore","Ignoring outdated watch update for ",b,". Current version:",$.version," Watch version:",F.version)}),{Ps:m,Is:u}})}function z(a,t){const r=Nt(a);return r.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===t&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}function oe(a,t){const r=Nt(a);return r.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return r.Ur.getTargetData(o,t).next(d=>d?(u=d,ke.resolve(u)):r.Ur.allocateTargetId(o).next(m=>(u=new ho(t,m,"TargetPurposeListen",o.currentSequenceNumber),r.Ur.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=r.os.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.os=r.os.insert(o.targetId,o),r._s.set(t,o.targetId)),o})}function Be(a,t,r){return bt.apply(this,arguments)}function bt(){return(bt=(0,ie.A)(function*(a,t,r){const o=Nt(a),u=o.os.get(t),d=r?"readwrite":"readwrite-primary";try{r||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!ss(m))throw m;st("LocalStore",`Failed to update sequence numbers for target ${t}: ${m}`)}o.os=o.os.remove(t),o._s.delete(u.target)})).apply(this,arguments)}function Gt(a,t,r){const o=Nt(a);let u=Zt.min(),d=Pn();return o.persistence.runTransaction("Execute query","readwrite",m=>function(F,$,ne){const ge=Nt(F),Ne=ge._s.get(ne);return void 0!==Ne?ke.resolve(ge.os.get(Ne)):ge.Ur.getTargetData($,ne)}(o,m,Ki(t)).next(b=>{if(b)return u=b.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(m,b.targetId).next(F=>{d=F})}).next(()=>o.ss.getDocumentsMatchingQuery(m,t,r?u:Zt.min(),r?d:Pn())).next(b=>(Ar(o,K(t),b),{documents:b,Ts:d})))}function Tn(a,t){const r=Nt(a),o=Nt(r.Ur),u=r.os.get(t);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",d=>o.ot(d,t).next(m=>m?m.target:null))}function $n(a,t){const r=Nt(a),o=r.us.get(t)||Zt.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.cs.getAllFromCollectionGroup(u,t,_e(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Ar(r,t,u),u))}function Ar(a,t,r){let o=a.us.get(t)||Zt.min();r.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),a.us.set(t,o)}function Ra(){return(Ra=(0,ie.A)(function*(a,t,r,o){const u=Nt(a);let d=Pn(),m=Ct();for(const $ of r){const ne=t.Es($.metadata.name);$.document&&(d=d.add(ne));const ge=t.ds($);ge.setReadTime(t.As($.metadata.readTime)),m=m.insert(ne,ge)}const b=u.cs.newChangeBuffer({trackRemovals:!0}),F=yield oe(u,(ne=o,Ki(Ri(Rn.fromString(`__bundle__/docs/${ne}`)))));var ne;return u.persistence.runTransaction("Apply bundle documents","readwrite",$=>A($,b,m).next(ne=>(b.apply($),ne)).next(ne=>u.Ur.removeMatchingKeysForTargetId($,F.targetId).next(()=>u.Ur.addMatchingKeys($,d,F.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments($,ne.Ps,ne.Is)).next(()=>ne.Ps)))})).apply(this,arguments)}function Hu(a,t){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,ie.A)(function*(a,t,r=Pn()){const o=yield oe(a,Ki($s(t.bundledQuery))),u=Nt(a);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=Ni(t.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u.Gr.saveNamedQuery(d,t);const b=o.withResumeToken(Hr.EMPTY_BYTE_STRING,m);return u.os=u.os.insert(b.targetId,b),u.Ur.updateTargetData(d,b).next(()=>u.Ur.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Ur.addMatchingKeys(d,r,o.targetId)).next(()=>u.Gr.saveNamedQuery(d,t))})})).apply(this,arguments)}function zu(a,t){return`firestore_clients_${a}_${t}`}function jl(a,t,r){let o=`firestore_mutations_${a}_${r}`;return t.isAuthenticated()&&(o+=`_${t.uid}`),o}function $l(a,t){return`firestore_targets_${a}_${t}`}class Ka{constructor(t,r,o,u){this.user=t,this.batchId=r,this.state=o,this.error=u}static Rs(t,r,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new Rt(u.error.code,u.error.message))),m?new Ka(t,r,u.state,d):(In("SharedClientState",`Failed to parse mutation state for ID '${r}': ${o}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class oa{constructor(t,r,o){this.targetId=t,this.state=r,this.error=o}static Rs(t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Rt(o.error.code,o.error.message))),d?new oa(t,o.state,u):(In("SharedClientState",`Failed to parse target state for ID '${t}': ${r}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Wu{constructor(t,r){this.clientId=t,this.activeTargetIds=r}static Rs(t,r){const o=JSON.parse(r);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=ki();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=ht(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new Wu(t,d):(In("SharedClientState",`Failed to parse client data for instance '${t}': ${r}`),null)}}class iu{constructor(t,r){this.clientId=t,this.onlineState=r}static Rs(t){const r=JSON.parse(t);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new iu(r.clientId,r.onlineState):(In("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Ku{constructor(){this.activeTargetIds=ki()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class dc{constructor(t,r,o,u,d){this.window=t,this.ui=r,this.persistenceKey=o,this.ps=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Pr(zt),this.started=!1,this.bs=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.Ds=zu(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new Ku),this.Cs=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(F){return`firestore_bundle_loaded_v2_${F}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,ie.A)(function*(){const r=yield t.syncEngine.Qi();for(const u of r){if(u===t.ps)continue;const d=t.getItem(zu(t.persistenceKey,u));if(d){const m=Wu.Rs(u,d);m&&(t.Ss=t.Ss.insert(m.clientId,m))}}t.Ns();const o=t.storage.getItem(t.xs);if(o){const u=t.Ls(o);u&&t.Bs(u)}for(const u of t.bs)t.ws(u);t.bs=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.vs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(t){let r=!1;return this.Ss.forEach((o,u)=>{u.activeTargetIds.has(t)&&(r=!0)}),r}addPendingMutation(t){this.qs(t,"pending")}updateMutationState(t,r,o){this.qs(t,r,o),this.Qs(t)}addLocalQueryTarget(t){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem($l(this.persistenceKey,t));if(o){const u=oa.Rs(t,o);u&&(r=u.state)}}return this.Ks.fs(t),this.Ns(),r}removeLocalQueryTarget(t){this.Ks.gs(t),this.Ns()}isLocalQueryTarget(t){return this.Ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem($l(this.persistenceKey,t))}updateQueryState(t,r,o){this.$s(t,r,o)}handleUserChange(t,r,o){r.forEach(u=>{this.Qs(u)}),this.currentUser=t,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(t){this.Us(t)}notifyBundleLoaded(t){this.Ws(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(t){const r=this.storage.getItem(t);return st("SharedClientState","READ",t,r),r}setItem(t,r){st("SharedClientState","SET",t,r),this.storage.setItem(t,r)}removeItem(t){st("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ws(t){var r=this;const o=t;if(o.storageArea===this.storage){if(st("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Ds)return void In("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,ie.A)(function*(){if(r.started){if(null!==o.key)if(r.Cs.test(o.key)){if(null==o.newValue){const u=r.Gs(o.key);return r.zs(u,null)}{const u=r.js(o.key,o.newValue);if(u)return r.zs(u.clientId,u)}}else if(r.Fs.test(o.key)){if(null!==o.newValue){const u=r.Hs(o.key,o.newValue);if(u)return r.Js(u)}}else if(r.Ms.test(o.key)){if(null!==o.newValue){const u=r.Ys(o.key,o.newValue);if(u)return r.Zs(u)}}else if(o.key===r.xs){if(null!==o.newValue){const u=r.Ls(o.newValue);if(u)return r.Bs(u)}}else if(o.key===r.vs){const u=function(m){let b=te.oe;if(null!=m)try{const F=JSON.parse(m);_t("number"==typeof F),b=F}catch(F){In("SharedClientState","Failed to read sequence number from WebStorage",F)}return b}(o.newValue);u!==te.oe&&r.sequenceNumberHandler(u)}else if(o.key===r.Os){const u=r.Xs(o.newValue);yield Promise.all(u.map(d=>r.syncEngine.eo(d)))}}else r.bs.push(o)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(t,r,o){const u=new Ka(this.currentUser,t,r,o),d=jl(this.persistenceKey,this.currentUser,t);this.setItem(d,u.Vs())}Qs(t){const r=jl(this.persistenceKey,this.currentUser,t);this.removeItem(r)}Us(t){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:t}))}$s(t,r,o){const u=$l(this.persistenceKey,t),d=new oa(t,r,o);this.setItem(u,d.Vs())}Ws(t){const r=JSON.stringify(Array.from(t));this.setItem(this.Os,r)}Gs(t){const r=this.Cs.exec(t);return r?r[1]:null}js(t,r){const o=this.Gs(t);return Wu.Rs(o,r)}Hs(t,r){const o=this.Fs.exec(t),u=Number(o[1]);return Ka.Rs(new tn(void 0!==o[2]?o[2]:null),u,r)}Ys(t,r){const o=this.Ms.exec(t),u=Number(o[1]);return oa.Rs(u,r)}Ls(t){return iu.Rs(t)}Xs(t){return JSON.parse(t)}Js(t){var r=this;return(0,ie.A)(function*(){if(t.user.uid===r.currentUser.uid)return r.syncEngine.no(t.batchId,t.state,t.error);st("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Zs(t){return this.syncEngine.ro(t.targetId,t.state,t.error)}zs(t,r){const o=r?this.Ss.insert(t,r):this.Ss.remove(t),u=this.ks(this.Ss),d=this.ks(o),m=[],b=[];return d.forEach(F=>{u.has(F)||m.push(F)}),u.forEach(F=>{d.has(F)||b.push(F)}),this.syncEngine.io(m,b).then(()=>{this.Ss=o})}Bs(t){this.Ss.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ks(t){let r=ki();return t.forEach((o,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class qa{constructor(){this.so=new Ku,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,o){}addLocalQueryTarget(t){return this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,r,o){this.oo[t]=r}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Ku,Promise.resolve()}handleUserChange(t,r,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Ss{_o(t){}shutdown(){}}class C_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){st("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){st("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Fd=null;function Vd(){return null===Fd?Fd=268435456+Math.round(2147483648*Math.random()):Fd++,"0x"+Fd.toString(16)}const Jv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class w_{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}const Gs="WebChannelConnection";class Zv extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const o=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+r.host,this.vo=`projects/${u}/databases/${d}`,this.Co="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${d}`}get Fo(){return!1}Mo(r,o,u,d,m){const b=Vd(),F=this.xo(r,o.toUriEncodedString());st("RestConnection",`Sending RPC '${r}' ${b}:`,F,u);const $={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo($,d,m),this.No(r,F,$,u).then(ne=>(st("RestConnection",`Received RPC '${r}' ${b}: `,ne),ne),ne=>{throw Kn("RestConnection",`RPC '${r}' ${b} failed with error: `,ne,"url: ",F,"request:",u),ne})}Lo(r,o,u,d,m,b){return this.Mo(r,o,u,d,m)}Oo(r,o,u){r["X-Goog-Api-Client"]="gl-js/ fire/"+sn,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((d,m)=>r[m]=d),u&&u.headers.forEach((d,m)=>r[m]=d)}xo(r,o){return`${this.Do}/v1/${o}:${Jv[r]}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,r,o,u){const d=Vd();return new Promise((m,b)=>{const F=new ut;F.setWithCredentials(!0),F.listenOnce(qe.COMPLETE,()=>{try{switch(F.getLastErrorCode()){case ft.NO_ERROR:const ne=F.getResponseJson();st(Gs,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(ne)),m(ne);break;case ft.TIMEOUT:st(Gs,`RPC '${t}' ${d} timed out`),b(new Rt(tt.DEADLINE_EXCEEDED,"Request time out"));break;case ft.HTTP_ERROR:const ge=F.getStatus();if(st(Gs,`RPC '${t}' ${d} failed with status:`,ge,"response text:",F.getResponseText()),ge>0){let Ne=F.getResponseJson();Array.isArray(Ne)&&(Ne=Ne[0]);const lt=Ne?.error;if(lt&&lt.status&&lt.message){const Ht=function(Qt){const Vn=Qt.toLowerCase().replace(/_/g,"-");return Object.values(tt).indexOf(Vn)>=0?Vn:tt.UNKNOWN}(lt.status);b(new Rt(Ht,lt.message))}else b(new Rt(tt.UNKNOWN,"Server responded with status "+F.getStatus()))}else b(new Rt(tt.UNAVAILABLE,"Connection failed."));break;default:St()}}finally{st(Gs,`RPC '${t}' ${d} completed.`)}});const $=JSON.stringify(u);st(Gs,`RPC '${t}' ${d} sending request:`,u),F.send(r,"POST",$,o,15)})}Bo(t,r,o){const u=Vd(),d=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=Kt(),b=Je(),F={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},$=this.longPollingOptions.timeoutSeconds;void 0!==$&&(F.longPollingTimeout=Math.round(1e3*$)),this.useFetchStreams&&(F.xmlHttpFactory=new rn({})),this.Oo(F.initMessageHeaders,r,o),F.encodeInitMessageHeaders=!0;const ne=d.join("");st(Gs,`Creating RPC '${t}' stream ${u}: ${ne}`,F);const ge=m.createWebChannel(ne,F);let Ne=!1,lt=!1;const Ht=new w_({Io:Qt=>{lt?st(Gs,`Not sending because RPC '${t}' stream ${u} is closed:`,Qt):(Ne||(st(Gs,`Opening RPC '${t}' stream ${u} transport.`),ge.open(),Ne=!0),st(Gs,`RPC '${t}' stream ${u} sending:`,Qt),ge.send(Qt))},To:()=>ge.close()}),en=(Qt,Vn,Xn)=>{Qt.listen(Vn,kn=>{try{Xn(kn)}catch(cr){setTimeout(()=>{throw cr},0)}})};return en(ge,Re.EventType.OPEN,()=>{lt||(st(Gs,`RPC '${t}' stream ${u} transport opened.`),Ht.yo())}),en(ge,Re.EventType.CLOSE,()=>{lt||(lt=!0,st(Gs,`RPC '${t}' stream ${u} transport closed`),Ht.So())}),en(ge,Re.EventType.ERROR,Qt=>{lt||(lt=!0,Kn(Gs,`RPC '${t}' stream ${u} transport errored:`,Qt),Ht.So(new Rt(tt.UNAVAILABLE,"The operation could not be completed")))}),en(ge,Re.EventType.MESSAGE,Qt=>{var Vn;if(!lt){const Xn=Qt.data[0];_t(!!Xn);const cr=Xn.error||(null===(Vn=Xn[0])||void 0===Vn?void 0:Vn.error);if(cr){st(Gs,`RPC '${t}' stream ${u} received error:`,cr);const Br=cr.status;let br=function(ze){const rt=ai[ze];if(void 0!==rt)return tc(rt)}(Br),et=cr.message;void 0===br&&(br=tt.INTERNAL,et="Unknown error status: "+Br+" with message "+cr.message),lt=!0,Ht.So(new Rt(br,et)),ge.close()}else st(Gs,`RPC '${t}' stream ${u} received:`,Xn),Ht.bo(Xn)}}),en(b,It.STAT_EVENT,Qt=>{Qt.stat===yt.PROXY?st(Gs,`RPC '${t}' stream ${u} detected buffering proxy`):Qt.stat===yt.NOPROXY&&st(Gs,`RPC '${t}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{Ht.wo()},0),Ht}}function eg(){return typeof window<"u"?window:null}function Hl(){return typeof document<"u"?document:null}function su(a){return new to(a,!0)}class hf{constructor(t,r,o=1e3,u=1.5,d=6e4){this.ui=t,this.timerId=r,this.ko=o,this.qo=u,this.Qo=d,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const r=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),u=Math.max(0,r-o);u>0&&st("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,u,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class T_{constructor(t,r,o,u,d,m,b,F){this.ui=t,this.Ho=o,this.Jo=u,this.connection=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=b,this.listener=F,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hf(t,r)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var t=this;return(0,ie.A)(function*(){t.n_()&&(yield t.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){var t=this;return(0,ie.A)(function*(){if(t.r_())return t.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,r){var o=this;return(0,ie.A)(function*(){o.u_(),o.c_(),o.t_.cancel(),o.Yo++,4!==t?o.t_.reset():r&&r.code===tt.RESOURCE_EXHAUSTED?(In(r.toString()),In("Using maximum backoff delay to prevent overloading the backend."),o.t_.Wo()):r&&r.code===tt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.l_(),o.stream.close(),o.stream=null),o.state=t,yield o.listener.mo(r)})()}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Yo===r&&this.P_(o,u)},o=>{t(()=>{const u=new Rt(tt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(u)})})}P_(t,r){const o=this.h_(this.Yo);this.stream=this.T_(t,r),this.stream.Eo(()=>{o(()=>this.listener.Eo())}),this.stream.Ro(()=>{o(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(u=>{o(()=>this.I_(u))}),this.stream.onMessage(u=>{o(()=>1==++this.e_?this.E_(u):this.onNext(u))})}i_(){var t=this;this.state=5,this.t_.Go((0,ie.A)(function*(){t.state=0,t.start()}))}I_(t){return st("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return r=>{this.ui.enqueueAndForget(()=>this.Yo===t?r():(st("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eE extends T_{constructor(t,r,o,u,d,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,o,u,m),this.serializer=d}T_(t,r){return this.connection.Bo("Listen",t,r)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const r=function Tl(a,t){let r;if("targetChange"in t){const o="NO_CHANGE"===($=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===$?1:"REMOVE"===$?2:"CURRENT"===$?3:"RESET"===$?4:St(),u=t.targetChange.targetIds||[],d=function($,ne){return $.useProto3Json?(_t(void 0===ne||"string"==typeof ne),Hr.fromBase64String(ne||"")):(_t(void 0===ne||ne instanceof Buffer||ne instanceof Uint8Array),Hr.fromUint8Array(ne||new Uint8Array))}(a,t.targetChange.resumeToken),m=t.targetChange.cause,b=m&&function($){const ne=void 0===$.code?tt.UNKNOWN:tc($.code);return new Rt(ne,$.message||"")}(m);r=new Sa(o,u,d,b||null)}else if("documentChange"in t){const o=t.documentChange,u=ya(a,o.document.name),d=Ni(o.document.updateTime),m=o.document.createTime?Ni(o.document.createTime):Zt.min(),b=new Yr({mapValue:{fields:o.document.fields}}),F=ar.newFoundDocument(u,d,m,b);r=new So(o.targetIds||[],o.removedTargetIds||[],F.key,F)}else if("documentDelete"in t){const o=t.documentDelete,u=ya(a,o.document),d=o.readTime?Ni(o.readTime):Zt.min(),m=ar.newNoDocument(u,d);r=new So([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in t){const o=t.documentRemove,u=ya(a,o.document);r=new So([],o.removedTargetIds||[],u,null)}else{if(!("filter"in t))return St();{const o=t.filter,{count:u=0,unchangedNames:d}=o,m=new El(u,d);r=new ba(o.targetId,m)}}var $;return r}(this.serializer,t),o=function(d){if(!("targetChange"in d))return Zt.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?Zt.min():m.readTime?Ni(m.readTime):Zt.min()}(t);return this.listener.d_(r,o)}A_(t){const r={};r.database=Ru(this.serializer),r.addTarget=function(d,m){let b;const F=m.target;if(b=Aa(F)?{documents:M(d,F)}:{query:w(d,F)._t},b.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){b.resumeToken=Qc(d,m.resumeToken);const $=Ba(d,m.expectedCount);null!==$&&(b.expectedCount=$)}else if(m.snapshotVersion.compareTo(Zt.min())>0){b.readTime=ic(d,m.snapshotVersion.toTimestamp());const $=Ba(d,m.expectedCount);null!==$&&(b.expectedCount=$)}return b}(this.serializer,t);const o=function ee(a,t){const r=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return St()}}(t.purpose);return null==r?null:{"goog-listen-tags":r}}(0,t);o&&(r.labels=o),this.a_(r)}R_(t){const r={};r.database=Ru(this.serializer),r.removeTarget=t,this.a_(r)}}class tE extends T_{constructor(t,r,o,u,d,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,o,u,m),this.serializer=d}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,r){return this.connection.Bo("Write",t,r)}E_(t){return _t(!!t.streamToken),this.lastStreamToken=t.streamToken,_t(!t.writeResults||0===t.writeResults.length),this.listener.f_()}onNext(t){_t(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const r=function E(a,t){return a&&a.length>0?(_t(void 0!==t),a.map(r=>function(u,d){let m=Ni(u.updateTime?u.updateTime:d);return m.isEqual(Zt.min())&&(m=Ni(d)),new mr(m,u.transformResults||[])}(r,t))):[]}(t.writeResults,t.commitTime),o=Ni(t.commitTime);return this.listener.g_(o,r)}p_(){const t={};t.database=Ru(this.serializer),this.a_(t)}m_(t){const r={streamToken:this.lastStreamToken,writes:t.map(o=>Ou(this.serializer,o))};this.a_(r)}}class D_ extends class{}{constructor(t,r,o,u){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=o,this.serializer=u,this.y_=!1}w_(){if(this.y_)throw new Rt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,r,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Mo(t,ja(r,o),u,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Rt(tt.UNKNOWN,d.toString())})}Lo(t,r,o,u,d){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,b])=>this.connection.Lo(t,ja(r,o),u,m,b,d)).catch(m=>{throw"FirebaseError"===m.name?(m.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Rt(tt.UNKNOWN,m.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class nE{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const r=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(In(r),this.D_=!1):st("OnlineStateTracker",r)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class A_{constructor(t,r,o,u,d){var m=this;this.localStore=t,this.datastore=r,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=d,this.k_._o(b=>{o.enqueueAndForget((0,ie.A)(function*(){var F;Po(m)&&(st("RemoteStore","Restarting streams for network reachability change."),yield(F=(0,ie.A)(function*(ne){const ge=Nt(ne);ge.L_.add(4),yield Ud(ge),ge.q_.set("Unknown"),ge.L_.delete(4),yield Ld(ge)}),function $(ne){return F.apply(this,arguments)})(m))}))}),this.q_=new nE(o,u)}}function Ld(a){return tg.apply(this,arguments)}function tg(){return(tg=(0,ie.A)(function*(a){if(Po(a))for(const t of a.B_)yield t(!0)})).apply(this,arguments)}function Ud(a){return ff.apply(this,arguments)}function ff(){return(ff=(0,ie.A)(function*(a){for(const t of a.B_)yield t(!1)})).apply(this,arguments)}function Bd(a,t){const r=Nt(a);r.N_.has(t.targetId)||(r.N_.set(t.targetId,t),jd(r)?S_(r):Wl(r).r_()&&b_(r,t))}function so(a,t){const r=Nt(a),o=Wl(r);r.N_.delete(t),o.r_()&&ng(r,t),0===r.N_.size&&(o.r_()?o.o_():Po(r)&&r.q_.set("Unknown"))}function b_(a,t){if(a.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zt.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Wl(a).A_(t)}function ng(a,t){a.Q_.xe(t),Wl(a).R_(t)}function S_(a){a.Q_=new Su({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>a.N_.get(t)||null,tt:()=>a.datastore.serializer.databaseId}),Wl(a).start(),a.q_.v_()}function jd(a){return Po(a)&&!Wl(a).n_()&&a.N_.size>0}function Po(a){return 0===Nt(a).L_.size}function rg(a){a.Q_=void 0}function Gl(a){return ig.apply(this,arguments)}function ig(){return(ig=(0,ie.A)(function*(a){a.q_.set("Online")})).apply(this,arguments)}function rE(a){return pf.apply(this,arguments)}function pf(){return(pf=(0,ie.A)(function*(a){a.N_.forEach((t,r)=>{b_(a,t)})})).apply(this,arguments)}function H0(a,t){return P_.apply(this,arguments)}function P_(){return(P_=(0,ie.A)(function*(a,t){rg(a),jd(a)?(a.q_.M_(t),S_(a)):a.q_.set("Unknown")})).apply(this,arguments)}function G0(a,t,r){return M_.apply(this,arguments)}function M_(){return M_=(0,ie.A)(function*(a,t,r){if(a.q_.set("Online"),t instanceof Sa&&2===t.state&&t.cause)try{yield(o=(0,ie.A)(function*(d,m){const b=m.cause;for(const F of m.targetIds)d.N_.has(F)&&(yield d.remoteSyncer.rejectListen(F,b),d.N_.delete(F),d.Q_.removeTarget(F))}),function u(d,m){return o.apply(this,arguments)})(a,t)}catch(o){st("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),yield sg(a,o)}else if(t instanceof So?a.Q_.Ke(t):t instanceof ba?a.Q_.He(t):a.Q_.We(t),!r.isEqual(Zt.min()))try{const o=yield h(a.localStore);r.compareTo(o)>=0&&(yield function(d,m){const b=d.Q_.rt(m);return b.targetChanges.forEach((F,$)=>{if(F.resumeToken.approximateByteSize()>0){const ne=d.N_.get($);ne&&d.N_.set($,ne.withResumeToken(F.resumeToken,m))}}),b.targetMismatches.forEach((F,$)=>{const ne=d.N_.get(F);if(!ne)return;d.N_.set(F,ne.withResumeToken(Hr.EMPTY_BYTE_STRING,ne.snapshotVersion)),ng(d,F);const ge=new ho(ne.target,F,$,ne.sequenceNumber);b_(d,ge)}),d.remoteSyncer.applyRemoteEvent(b)}(a,r))}catch(o){st("RemoteStore","Failed to raise snapshot:",o),yield sg(a,o)}var o}),M_.apply(this,arguments)}function sg(a,t,r){return og.apply(this,arguments)}function og(){return(og=(0,ie.A)(function*(a,t,r){if(!ss(t))throw t;a.L_.add(1),yield Ud(a),a.q_.set("Offline"),r||(r=()=>h(a.localStore)),a.asyncQueue.enqueueRetryable((0,ie.A)(function*(){st("RemoteStore","Retrying IndexedDB access"),yield r(),a.L_.delete(1),yield Ld(a)}))})).apply(this,arguments)}function qu(a,t){return t().catch(r=>sg(a,r,t))}function hc(a){return gf.apply(this,arguments)}function gf(){return(gf=(0,ie.A)(function*(a){const t=Nt(a),r=ou(t);let o=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;iE(t);)try{const u=yield z(t.localStore,o);if(null===u){0===t.O_.length&&r.o_();break}o=u.batchId,ag(t,u)}catch(u){yield sg(t,u)}Qa(t)&&R_(t)})).apply(this,arguments)}function iE(a){return Po(a)&&a.O_.length<10}function ag(a,t){a.O_.push(t);const r=ou(a);r.r_()&&r.V_&&r.m_(t.mutations)}function Qa(a){return Po(a)&&!ou(a).n_()&&a.O_.length>0}function R_(a){ou(a).start()}function cg(a){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,ie.A)(function*(a){ou(a).p_()})).apply(this,arguments)}function sE(a){return mf.apply(this,arguments)}function mf(){return(mf=(0,ie.A)(function*(a){const t=ou(a);for(const r of a.O_)t.m_(r.mutations)})).apply(this,arguments)}function O_(a,t,r){return zl.apply(this,arguments)}function zl(){return(zl=(0,ie.A)(function*(a,t,r){const o=a.O_.shift(),u=lo.from(o,t,r);yield qu(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),yield hc(a)})).apply(this,arguments)}function _f(a,t){return $d.apply(this,arguments)}function $d(){return $d=(0,ie.A)(function*(a,t){var r;t&&ou(a).V_&&(yield(r=(0,ie.A)(function*(u,d){if(Dc(b=d.code)&&b!==tt.ABORTED){const m=u.O_.shift();ou(u).s_(),yield qu(u,()=>u.remoteSyncer.rejectFailedWrite(m.batchId,d)),yield hc(u)}var b}),function o(u,d){return r.apply(this,arguments)})(a,t)),Qa(a)&&R_(a)}),$d.apply(this,arguments)}function N_(a,t){return ug.apply(this,arguments)}function ug(){return(ug=(0,ie.A)(function*(a,t){const r=Nt(a);r.asyncQueue.verifyOperationInProgress(),st("RemoteStore","RemoteStore received new credentials");const o=Po(r);r.L_.add(3),yield Ud(r),o&&r.q_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(t),r.L_.delete(3),yield Ld(r)})).apply(this,arguments)}function lg(a,t){return yf.apply(this,arguments)}function yf(){return(yf=(0,ie.A)(function*(a,t){const r=Nt(a);t?(r.L_.delete(2),yield Ld(r)):t||(r.L_.add(2),yield Ud(r),r.q_.set("Unknown"))})).apply(this,arguments)}function Wl(a){return a.K_||(a.K_=function(r,o,u){const d=Nt(r);return d.w_(),new eE(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:Gl.bind(null,a),Ro:rE.bind(null,a),mo:H0.bind(null,a),d_:G0.bind(null,a)}),a.B_.push(function(){var t=(0,ie.A)(function*(r){r?(a.K_.s_(),jd(a)?S_(a):a.q_.set("Unknown")):(yield a.K_.stop(),rg(a))});return function(r){return t.apply(this,arguments)}}())),a.K_}function ou(a){return a.U_||(a.U_=function(r,o,u){const d=Nt(r);return d.w_(),new tE(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:()=>Promise.resolve(),Ro:cg.bind(null,a),mo:_f.bind(null,a),f_:sE.bind(null,a),g_:O_.bind(null,a)}),a.B_.push(function(){var t=(0,ie.A)(function*(r){r?(a.U_.s_(),yield hc(a)):(yield a.U_.stop(),a.O_.length>0&&(st("RemoteStore",`Stopping write stream with ${a.O_.length} pending writes`),a.O_=[]))});return function(r){return t.apply(this,arguments)}}())),a.U_}class Mo{constructor(t,r,o,u,d){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,o,u,d){const m=Date.now()+o,b=new Mo(t,r,m,u,d);return b.start(o),b}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Rt(tt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function au(a,t){if(In("AsyncQueue",`${t}: ${a}`),ss(a))return new Rt(tt.UNAVAILABLE,`${t}: ${a}`);throw a}class Xu{constructor(t){this.comparator=t?(r,o)=>t(r,o)||Ce.comparator(r.key,o.key):(r,o)=>Ce.comparator(r.key,o.key),this.keyedMap=hn(),this.sortedSet=new Pr(this.comparator)}static emptySet(t){return new Xu(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,o)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Xu)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,r){const o=new Xu;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=r,o}}class vf{constructor(){this.W_=new Pr(Ce.comparator)}track(t){const r=t.doc.key,o=this.W_.get(r);o?0!==t.type&&3===o.type?this.W_=this.W_.insert(r,t):3===t.type&&1!==o.type?this.W_=this.W_.insert(r,{type:o.type,doc:t.doc}):2===t.type&&2===o.type?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):2===t.type&&0===o.type?this.W_=this.W_.insert(r,{type:0,doc:t.doc}):1===t.type&&0===o.type?this.W_=this.W_.remove(r):1===t.type&&2===o.type?this.W_=this.W_.insert(r,{type:1,doc:o.doc}):0===t.type&&1===o.type?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):St():this.W_=this.W_.insert(r,t)}G_(){const t=[];return this.W_.inorderTraversal((r,o)=>{t.push(o)}),t}}class Ps{constructor(t,r,o,u,d,m,b,F,$){this.query=t,this.docs=r,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=b,this.excludesMetadataChanges=F,this.hasCachedResults=$}static fromInitialDocuments(t,r,o,u,d){const m=[];return r.forEach(b=>{m.push({type:0,doc:b})}),new Ps(t,r,Xu.emptySet(r),m,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Y(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,o=t.docChanges;if(r.length!==o.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==o[u].type||!r[u].doc.isEqual(o[u].doc))return!1;return!0}}class Hd{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class x_{constructor(){this.queries=dg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(r,o){const u=Nt(r),d=u.queries;u.queries=dg(),d.forEach((m,b)=>{for(const F of b.j_)F.onError(o)})}(this,new Rt(tt.ABORTED,"Firestore shutting down"))}}function dg(){return new Le(a=>C(a),Y)}function hg(a,t){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,ie.A)(function*(a,t){const r=Nt(a);let o=3;const u=t.query;let d=r.queries.get(u);d?!d.H_()&&t.J_()&&(o=2):(d=new Hd,o=t.J_()?0:1);try{switch(o){case 0:d.z_=yield r.onListen(u,!0);break;case 1:d.z_=yield r.onListen(u,!1);break;case 2:yield r.onFirstRemoteStoreListen(u)}}catch(m){const b=au(m,`Initialization of query '${D(t.query)}' failed`);return void t.onError(b)}r.queries.set(u,d),d.j_.push(t),t.Z_(r.onlineState),d.z_&&t.X_(d.z_)&&pg(r)})).apply(this,arguments)}function fg(a,t){return If.apply(this,arguments)}function If(){return(If=(0,ie.A)(function*(a,t){const r=Nt(a),o=t.query;let u=3;const d=r.queries.get(o);if(d){const m=d.j_.indexOf(t);m>=0&&(d.j_.splice(m,1),0===d.j_.length?u=t.J_()?0:1:!d.H_()&&t.J_()&&(u=2))}switch(u){case 0:return r.queries.delete(o),r.onUnlisten(o,!0);case 1:return r.queries.delete(o),r.onUnlisten(o,!1);case 2:return r.onLastRemoteStoreUnlisten(o);default:return}})).apply(this,arguments)}function oE(a,t){const r=Nt(a);let o=!1;for(const u of t){const m=r.queries.get(u.query);if(m){for(const b of m.j_)b.X_(u)&&(o=!0);m.z_=u}}o&&pg(r)}function k_(a,t,r){const o=Nt(a),u=o.queries.get(t);if(u)for(const d of u.j_)d.onError(r);o.queries.delete(t)}function pg(a){a.Y_.forEach(t=>{t.next()})}var gg,F_;(F_=gg||(gg={})).ea="default",F_.Cache="cache";class mg{constructor(t,r,o){this.query=t,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(t){if(!this.options.includeMetadataChanges){const o=[];for(const u of t.docChanges)3!==u.type&&o.push(u);t=new Ps(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.na?this.ia(t)&&(this.ta.next(t),r=!0):this.sa(t,this.onlineState)&&(this.oa(t),r=!0),this.ra=t,r}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),r=!0),r}sa(t,r){return!t.fromCache||!this.J_()||(!this.options._a||!("Offline"!==r))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===r)}ia(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(t){t=Ps.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==gg.Cache}}class V_{constructor(t,r){this.aa=t,this.byteLength=r}ua(){return"metadata"in this.aa}}class _g{constructor(t){this.serializer=t}Es(t){return ya(this.serializer,t)}ds(t){return t.metadata.exists?Zh(this.serializer,t.document,!1):ar.newNoDocument(this.Es(t.metadata.name),this.As(t.metadata.readTime))}As(t){return Ni(t)}}class L_{constructor(t,r,o){this.ca=t,this.localStore=r,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gd(t)}la(t){this.progress.bytesLoaded+=t.byteLength;let r=this.progress.documentsLoaded;if(t.aa.namedQuery)this.queries.push(t.aa.namedQuery);else if(t.aa.documentMetadata){this.documents.push({metadata:t.aa.documentMetadata}),t.aa.documentMetadata.exists||++r;const o=Rn.fromString(t.aa.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else t.aa.document&&(this.documents[this.documents.length-1].document=t.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(t){const r=new Map,o=new _g(this.serializer);for(const u of t)if(u.metadata.queries){const d=o.Es(u.metadata.name);for(const m of u.metadata.queries){const b=(r.get(m)||Pn()).add(d);r.set(m,b)}}return r}complete(){var t=this;return(0,ie.A)(function*(){const r=yield function io(a,t,r,o){return Ra.apply(this,arguments)}(t.localStore,new _g(t.serializer),t.documents,t.ca.id),o=t.ha(t.documents);for(const u of t.queries)yield Hu(t.localStore,u,o.get(u.name));return t.progress.taskState="Success",{progress:t.progress,Pa:t.collectionGroups,Ia:r}})()}}function Gd(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class yg{constructor(t){this.key=t}}class vg{constructor(t){this.key=t}}class Eg{constructor(t,r){this.query=t,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pn(),this.mutatedKeys=Pn(),this.Aa=he(t),this.Ra=new Xu(this.Aa)}get Va(){return this.Ta}ma(t,r){const o=r?r.fa:new vf,u=r?r.Ra:this.Ra;let d=r?r.mutatedKeys:this.mutatedKeys,m=u,b=!1;const F="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,$="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal((ne,ge)=>{const Ne=u.get(ne),lt=L(this.query,ge)?ge:null,Ht=!!Ne&&this.mutatedKeys.has(Ne.key),en=!!lt&&(lt.hasLocalMutations||this.mutatedKeys.has(lt.key)&&lt.hasCommittedMutations);let Qt=!1;Ne&&lt?Ne.data.isEqual(lt.data)?Ht!==en&&(o.track({type:3,doc:lt}),Qt=!0):this.ga(Ne,lt)||(o.track({type:2,doc:lt}),Qt=!0,(F&&this.Aa(lt,F)>0||$&&this.Aa(lt,$)<0)&&(b=!0)):!Ne&&lt?(o.track({type:0,doc:lt}),Qt=!0):Ne&&!lt&&(o.track({type:1,doc:Ne}),Qt=!0,(F||$)&&(b=!0)),Qt&&(lt?(m=m.add(lt),d=en?d.add(ne):d.delete(ne)):(m=m.delete(ne),d=d.delete(ne)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const ne="F"===this.query.limitType?m.last():m.first();m=m.delete(ne.key),d=d.delete(ne.key),o.track({type:1,doc:ne})}return{Ra:m,fa:o,ns:b,mutatedKeys:d}}ga(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,o,u){const d=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const m=t.fa.G_();m.sort((ne,ge)=>function(lt,Ht){const en=Qt=>{switch(Qt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St()}};return en(lt)-en(Ht)}(ne.type,ge.type)||this.Aa(ne.doc,ge.doc)),this.pa(o),u=null!=u&&u;const b=r&&!u?this.ya():[],F=0===this.da.size&&this.current&&!u?1:0,$=F!==this.Ea;return this.Ea=F,0!==m.length||$?{snapshot:new Ps(this.query,t.Ra,d,m,t.mutatedKeys,0===F,$,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:b}:{wa:b}}Z_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Pn(),this.Ra.forEach(o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))});const r=[];return t.forEach(o=>{this.da.has(o)||r.push(new vg(o))}),this.da.forEach(o=>{t.has(o)||r.push(new yg(o))}),r}ba(t){this.Ta=t.Ts,this.da=Pn();const r=this.ma(t.documents);return this.applyChanges(r,!0)}Da(){return Ps.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class U_{constructor(t,r,o){this.query=t,this.targetId=r,this.view=o}}class aE{constructor(t){this.key=t,this.va=!1}}class cE{constructor(t,r,o,u,d,m){this.localStore=t,this.remoteStore=r,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.Ca={},this.Fa=new Le(b=>C(b),Y),this.Ma=new Map,this.xa=new Set,this.Oa=new Pr(Ce.comparator),this.Na=new Map,this.La=new nu,this.Ba={},this.ka=new Map,this.qa=Hs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function uE(a,t){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,ie.A)(function*(a,t,r=!0){const o=Fg(a);let u;const d=o.Fa.get(t);return d?(o.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.Da()):u=yield Cg(o,t,r,!0),u})).apply(this,arguments)}function B_(a,t){return j_.apply(this,arguments)}function j_(){return(j_=(0,ie.A)(function*(a,t){const r=Fg(a);yield Cg(r,t,!0,!1)})).apply(this,arguments)}function Cg(a,t,r,o){return wg.apply(this,arguments)}function wg(){return(wg=(0,ie.A)(function*(a,t,r,o){const u=yield oe(a.localStore,Ki(t)),d=u.targetId,m=r?a.sharedClientState.addLocalQueryTarget(d):"not-current";let b;return o&&(b=yield Tg(a,t,d,"current"===m,u.resumeToken)),a.isPrimaryClient&&r&&Bd(a.remoteStore,u),b})).apply(this,arguments)}function Tg(a,t,r,o,u){return $_.apply(this,arguments)}function $_(){return $_=(0,ie.A)(function*(a,t,r,o,u){a.Ka=(ge,Ne,lt)=>{return(Ht=(0,ie.A)(function*(Qt,Vn,Xn,kn){let cr=Vn.view.ma(Xn);cr.ns&&(cr=yield Gt(Qt.localStore,Vn.query,!1).then(({documents:be})=>Vn.view.ma(be,cr)));const Br=kn&&kn.targetChanges.get(Vn.targetId),br=kn&&null!=kn.targetMismatches.get(Vn.targetId),et=Vn.view.applyChanges(cr,Qt.isPrimaryClient,Br,br);return Wd(Qt,Vn.targetId,et.wa),et.snapshot}),function en(Qt,Vn,Xn,kn){return Ht.apply(this,arguments)})(a,ge,Ne,lt);var Ht};const d=yield Gt(a.localStore,t,!0),m=new Eg(t,d.Ts),b=m.ma(d.documents),F=mi.createSynthesizedTargetChangeForCurrentChange(r,o&&"Offline"!==a.onlineState,u),$=m.applyChanges(b,a.isPrimaryClient,F);Wd(a,r,$.wa);const ne=new U_(t,r,m);return a.Fa.set(t,ne),a.Ma.has(r)?a.Ma.get(r).push(t):a.Ma.set(r,[t]),$.snapshot}),$_.apply(this,arguments)}function lE(a,t,r){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,ie.A)(function*(a,t,r){const o=Nt(a),u=o.Fa.get(t),d=o.Ma.get(u.targetId);if(d.length>1)return o.Ma.set(u.targetId,d.filter(m=>!Y(m,t))),void o.Fa.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Be(o.localStore,u.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(u.targetId),r&&so(o.remoteStore,u.targetId),uu(o,u.targetId)}).catch(Sn))):(uu(o,u.targetId),yield Be(o.localStore,u.targetId,!0))})).apply(this,arguments)}function Dg(a,t){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,ie.A)(function*(a,t){const r=Nt(a),o=r.Fa.get(t),u=r.Ma.get(o.targetId);r.isPrimaryClient&&1===u.length&&(r.sharedClientState.removeLocalQueryTarget(o.targetId),so(r.remoteStore,o.targetId))})).apply(this,arguments)}function wf(){return(wf=(0,ie.A)(function*(a,t,r){const o=Zu(a);try{const u=yield function(m,b){const F=Nt(m),$=Jt.now(),ne=b.reduce((lt,Ht)=>lt.add(Ht.key),Pn());let ge,Ne;return F.persistence.runTransaction("Locally write mutations","readwrite",lt=>{let Ht=Ct(),en=Pn();return F.cs.getEntries(lt,ne).next(Qt=>{Ht=Qt,Ht.forEach((Vn,Xn)=>{Xn.isValidDocument()||(en=en.add(Vn))})}).next(()=>F.localDocuments.getOverlayedDocuments(lt,Ht)).next(Qt=>{ge=Qt;const Vn=[];for(const Xn of b){const kn=pr(Xn,ge.get(Xn.key).overlayedDocument);null!=kn&&Vn.push(new _r(Xn.key,kn,co(kn.value.mapValue),xn.exists(!0)))}return F.mutationQueue.addMutationBatch(lt,$,Vn,b)}).next(Qt=>{Ne=Qt;const Vn=Qt.applyToLocalDocumentSet(ge,en);return F.documentOverlayCache.saveOverlays(lt,Qt.batchId,Vn)})}).then(()=>({batchId:Ne.batchId,changes:hr(ge)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(u.batchId),function(m,b,F){let $=m.Ba[m.currentUser.toKey()];$||($=new Pr(zt)),$=$.insert(b,F),m.Ba[m.currentUser.toKey()]=$}(o,u.batchId,r),yield Oa(o,u.changes),yield hc(o.remoteStore)}catch(u){const d=au(u,"Failed to persist write");r.reject(d)}})).apply(this,arguments)}function H_(a,t){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,ie.A)(function*(a,t){const r=Nt(a);try{const o=yield function f(a,t){const r=Nt(a),o=t.snapshotVersion;let u=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=r.cs.newChangeBuffer({trackRemovals:!0});u=r.os;const b=[];t.targetChanges.forEach((ne,ge)=>{const Ne=u.get(ge);if(!Ne)return;b.push(r.Ur.removeMatchingKeys(d,ne.removedDocuments,ge).next(()=>r.Ur.addMatchingKeys(d,ne.addedDocuments,ge)));let lt=Ne.withSequenceNumber(d.currentSequenceNumber);var en,Qt,Vn;null!==t.targetMismatches.get(ge)?lt=lt.withResumeToken(Hr.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):ne.resumeToken.approximateByteSize()>0&&(lt=lt.withResumeToken(ne.resumeToken,o)),u=u.insert(ge,lt),Qt=lt,Vn=ne,(0===(en=Ne).resumeToken.approximateByteSize()||Qt.snapshotVersion.toMicroseconds()-en.snapshotVersion.toMicroseconds()>=3e8||Vn.addedDocuments.size+Vn.modifiedDocuments.size+Vn.removedDocuments.size>0)&&b.push(r.Ur.updateTargetData(d,lt))});let F=Ct(),$=Pn();if(t.documentUpdates.forEach(ne=>{t.resolvedLimboDocuments.has(ne)&&b.push(r.persistence.referenceDelegate.updateLimboDocument(d,ne))}),b.push(A(d,m,t.documentUpdates).next(ne=>{F=ne.Ps,$=ne.Is})),!o.isEqual(Zt.min())){const ne=r.Ur.getLastRemoteSnapshotVersion(d).next(ge=>r.Ur.setTargetsMetadata(d,d.currentSequenceNumber,o));b.push(ne)}return ke.waitFor(b).next(()=>m.apply(d)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,F,$)).next(()=>F)}).then(d=>(r.os=u,d))}(r.localStore,t);t.targetChanges.forEach((u,d)=>{const m=r.Na.get(d);m&&(_t(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.va=!0:u.modifiedDocuments.size>0?_t(m.va):u.removedDocuments.size>0&&(_t(m.va),m.va=!1))}),yield Oa(r,o,t)}catch(o){yield Sn(o)}})).apply(this,arguments)}function Df(a,t,r){const o=Nt(a);if(o.isPrimaryClient&&0===r||!o.isPrimaryClient&&1===r){const u=[];o.Fa.forEach((d,m)=>{const b=m.view.Z_(t);b.snapshot&&u.push(b.snapshot)}),function(m,b){const F=Nt(m);F.onlineState=b;let $=!1;F.queries.forEach((ne,ge)=>{for(const Ne of ge.j_)Ne.Z_(b)&&($=!0)}),$&&pg(F)}(o.eventManager,t),u.length&&o.Ca.d_(u),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}function z0(a,t,r){return bg.apply(this,arguments)}function bg(){return(bg=(0,ie.A)(function*(a,t,r){const o=Nt(a);o.sharedClientState.updateQueryState(t,"rejected",r);const u=o.Na.get(t),d=u&&u.key;if(d){let m=new Pr(Ce.comparator);m=m.insert(d,ar.newNoDocument(d,Zt.min()));const b=Pn().add(d),F=new rc(Zt.min(),new Map,new Pr(zt),m,b);yield H_(o,F),o.Oa=o.Oa.remove(d),o.Na.delete(t),Ju(o)}else yield Be(o.localStore,t,!1).then(()=>uu(o,t,r)).catch(Sn)})).apply(this,arguments)}function dE(a,t){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,ie.A)(function*(a,t){const r=Nt(a),o=t.batch.batchId;try{const u=yield function I(a,t){const r=Nt(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=t.batch.keys(),d=r.cs.newChangeBuffer({trackRemovals:!0});return function(b,F,$,ne){const ge=$.batch,Ne=ge.keys();let lt=ke.resolve();return Ne.forEach(Ht=>{lt=lt.next(()=>ne.getEntry(F,Ht)).next(en=>{const Qt=$.docVersions.get(Ht);_t(null!==Qt),en.version.compareTo(Qt)<0&&(ge.applyToRemoteDocument(en,$),en.isValidDocument()&&(en.setReadTime($.commitVersion),ne.addEntry(en)))})}),lt.next(()=>b.mutationQueue.removeMutationBatch(F,ge))}(r,o,t,d).next(()=>d.apply(o)).next(()=>r.mutationQueue.performConsistencyCheck(o)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(o,u,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(b){let F=Pn();for(let $=0;$<b.mutationResults.length;++$)b.mutationResults[$].transformResults.length>0&&(F=F.add(b.batch.mutations[$].key));return F}(t))).next(()=>r.localDocuments.getDocuments(o,u))})}(r.localStore,t);zd(r,o,null),Pg(r,o),r.sharedClientState.updateMutationState(o,"acknowledged"),yield Oa(r,u)}catch(u){yield Sn(u)}})).apply(this,arguments)}function hE(a,t,r){return G_.apply(this,arguments)}function G_(){return(G_=(0,ie.A)(function*(a,t,r){const o=Nt(a);try{const u=yield function(m,b){const F=Nt(m);return F.persistence.runTransaction("Reject batch","readwrite-primary",$=>{let ne;return F.mutationQueue.lookupMutationBatch($,b).next(ge=>(_t(null!==ge),ne=ge.keys(),F.mutationQueue.removeMutationBatch($,ge))).next(()=>F.mutationQueue.performConsistencyCheck($)).next(()=>F.documentOverlayCache.removeOverlaysForBatchId($,ne,b)).next(()=>F.localDocuments.recalculateAndSaveOverlaysForDocumentKeys($,ne)).next(()=>F.localDocuments.getDocuments($,ne))})}(o.localStore,t);zd(o,t,r),Pg(o,t),o.sharedClientState.updateMutationState(t,"rejected",r),yield Oa(o,u)}catch(u){yield Sn(u)}})).apply(this,arguments)}function Kl(){return(Kl=(0,ie.A)(function*(a,t){const r=Nt(a);Po(r.remoteStore)||st("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const b=Nt(m);return b.persistence.runTransaction("Get highest unacknowledged batch id","readonly",F=>b.mutationQueue.getHighestUnacknowledgedBatchId(F))}(r.localStore);if(-1===o)return void t.resolve();const u=r.ka.get(o)||[];u.push(t),r.ka.set(o,u)}catch(o){const u=au(o,"Initialization of waitForPendingWrites() operation failed");t.reject(u)}})).apply(this,arguments)}function Pg(a,t){(a.ka.get(t)||[]).forEach(r=>{r.resolve()}),a.ka.delete(t)}function zd(a,t,r){const o=Nt(a);let u=o.Ba[o.currentUser.toKey()];if(u){const d=u.get(t);d&&(r?d.reject(r):d.resolve(),u=u.remove(t)),o.Ba[o.currentUser.toKey()]=u}}function uu(a,t,r=null){a.sharedClientState.removeLocalQueryTarget(t);for(const o of a.Ma.get(t))a.Fa.delete(o),r&&a.Ca.$a(o,r);a.Ma.delete(t),a.isPrimaryClient&&a.La.gr(t).forEach(o=>{a.La.containsKey(o)||Yu(a,o)})}function Yu(a,t){a.xa.delete(t.path.canonicalString());const r=a.Oa.get(t);null!==r&&(so(a.remoteStore,r),a.Oa=a.Oa.remove(t),a.Na.delete(r),Ju(a))}function Wd(a,t,r){for(const o of r)o instanceof yg?(a.La.addReference(o.key,t),Mg(a,o)):o instanceof vg?(st("SyncEngine","Document no longer in limbo: "+o.key),a.La.removeReference(o.key,t),a.La.containsKey(o.key)||Yu(a,o.key)):St()}function Mg(a,t){const r=t.key,o=r.path.canonicalString();a.Oa.get(r)||a.xa.has(o)||(st("SyncEngine","New document in limbo: "+r),a.xa.add(o),Ju(a))}function Ju(a){for(;a.xa.size>0&&a.Oa.size<a.maxConcurrentLimboResolutions;){const t=a.xa.values().next().value;a.xa.delete(t);const r=new Ce(Rn.fromString(t)),o=a.qa.next();a.Na.set(o,new aE(r)),a.Oa=a.Oa.insert(r,o),Bd(a.remoteStore,new ho(Ki(Ri(r.path)),o,"TargetPurposeLimboResolution",te.oe))}}function Oa(a,t,r){return lu.apply(this,arguments)}function lu(){return lu=(0,ie.A)(function*(a,t,r){const o=Nt(a),u=[],d=[],m=[];var b;o.Fa.isEmpty()||(o.Fa.forEach((b,F)=>{m.push(o.Ka(F,t,r).then($=>{var ne;if(($||r)&&o.isPrimaryClient){const ge=$?!$.fromCache:null===(ne=r?.targetChanges.get(F.targetId))||void 0===ne?void 0:ne.current;o.sharedClientState.updateQueryState(F.targetId,ge?"current":"not-current")}if($){u.push($);const ge=kd.Wi(F.targetId,$);d.push(ge)}}))}),yield Promise.all(m),o.Ca.d_(u),yield(b=(0,ie.A)(function*($,ne){const ge=Nt($);try{yield ge.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ne=>ke.forEach(ne,lt=>ke.forEach(lt.$i,Ht=>ge.persistence.referenceDelegate.addReference(Ne,lt.targetId,Ht)).next(()=>ke.forEach(lt.Ui,Ht=>ge.persistence.referenceDelegate.removeReference(Ne,lt.targetId,Ht)))))}catch(Ne){if(!ss(Ne))throw Ne;st("LocalStore","Failed to update sequence numbers: "+Ne)}for(const Ne of ne){const lt=Ne.targetId;if(!Ne.fromCache){const Ht=ge.os.get(lt),Qt=Ht.withLastLimboFreeSnapshotVersion(Ht.snapshotVersion);ge.os=ge.os.insert(lt,Qt)}}}),function F($,ne){return b.apply(this,arguments)})(o.localStore,d))}),lu.apply(this,arguments)}function Rg(a,t){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,ie.A)(function*(a,t){const r=Nt(a);if(!r.currentUser.isEqual(t)){st("SyncEngine","User change. New user:",t.toKey());const o=yield Zp(r.localStore,t);r.currentUser=t,(d=r).ka.forEach(b=>{b.forEach(F=>{F.reject(new Rt(tt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.ka.clear(),r.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),yield Oa(r,o.hs)}var d})).apply(this,arguments)}function Af(a,t){const r=Nt(a),o=r.Na.get(t);if(o&&o.va)return Pn().add(o.key);{let u=Pn();const d=r.Ma.get(t);if(!d)return u;for(const m of d){const b=r.Fa.get(m);u=u.unionWith(b.view.Va)}return u}}function K0(a,t){return qd.apply(this,arguments)}function qd(){return(qd=(0,ie.A)(function*(a,t){const r=Nt(a),o=yield Gt(r.localStore,t.query,!0),u=t.view.ba(o);return r.isPrimaryClient&&Wd(r,t.targetId,u.wa),u})).apply(this,arguments)}function Qd(a,t){return Og.apply(this,arguments)}function Og(){return(Og=(0,ie.A)(function*(a,t){const r=Nt(a);return $n(r.localStore,t).then(o=>Oa(r,o))})).apply(this,arguments)}function z_(a,t,r,o){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,ie.A)(function*(a,t,r,o){const u=Nt(a),d=yield function(b,F){const $=Nt(b),ne=Nt($.mutationQueue);return $.persistence.runTransaction("Lookup mutation documents","readonly",ge=>ne.Mn(ge,F).next(Ne=>Ne?$.localDocuments.getDocuments(ge,Ne):ke.resolve(null)))}(u.localStore,t);var F;null!==d?("pending"===r?yield hc(u.remoteStore):"acknowledged"===r||"rejected"===r?(zd(u,t,o||null),Pg(u,t),F=t,Nt(Nt(u.localStore).mutationQueue).On(F)):St(),yield Oa(u,d)):st("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function Xd(){return(Xd=(0,ie.A)(function*(a,t){const r=Nt(a);if(Fg(r),Zu(r),!0===t&&!0!==r.Qa){const o=r.sharedClientState.getAllActiveQueryTargets(),u=yield xg(r,o.toArray());r.Qa=!0,yield lg(r.remoteStore,!0);for(const d of u)Bd(r.remoteStore,d)}else if(!1===t&&!1!==r.Qa){const o=[];let u=Promise.resolve();r.Ma.forEach((d,m)=>{r.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(uu(r,m),Be(r.localStore,m,!0))),so(r.remoteStore,m)}),yield u,yield xg(r,o),function(m){const b=Nt(m);b.Na.forEach((F,$)=>{so(b.remoteStore,$)}),b.La.pr(),b.Na=new Map,b.Oa=new Pr(Ce.comparator)}(r),r.Qa=!1,yield lg(r.remoteStore,!1)}})).apply(this,arguments)}function xg(a,t,r){return kg.apply(this,arguments)}function kg(){return(kg=(0,ie.A)(function*(a,t,r){const o=Nt(a),u=[],d=[];for(const m of t){let b;const F=o.Ma.get(m);if(F&&0!==F.length){b=yield oe(o.localStore,Ki(F[0]));for(const $ of F){const ne=o.Fa.get($),ge=yield K0(o,ne);ge.snapshot&&d.push(ge.snapshot)}}else{const $=yield Tn(o.localStore,m);b=yield oe(o.localStore,$),yield Tg(o,W_($),m,!1,b.resumeToken)}u.push(b)}return o.Ca.d_(d),u})).apply(this,arguments)}function W_(a){return ni(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function Yd(a){return r=Nt(a).localStore,Nt(Nt(r).persistence).Qi();var r}function K_(a,t,r,o){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,ie.A)(function*(a,t,r,o){const u=Nt(a);if(u.Qa)return void st("SyncEngine","Ignoring unexpected query state notification.");const d=u.Ma.get(t);if(d&&d.length>0)switch(r){case"current":case"not-current":{const m=yield $n(u.localStore,K(d[0])),b=rc.createSynthesizedRemoteEventForCurrentChange(t,"current"===r,Hr.EMPTY_BYTE_STRING);yield Oa(u,m,b);break}case"rejected":yield Be(u.localStore,t,!0),uu(u,t,o);break;default:St()}})).apply(this,arguments)}function pE(a,t,r){return q_.apply(this,arguments)}function q_(){return(q_=(0,ie.A)(function*(a,t,r){const o=Fg(a);if(o.Qa){for(const u of t){if(o.Ma.has(u)&&o.sharedClientState.isActiveQueryTarget(u)){st("SyncEngine","Adding an already active target "+u);continue}const d=yield Tn(o.localStore,u),m=yield oe(o.localStore,d);yield Tg(o,W_(d),m.targetId,!1,m.resumeToken),Bd(o.remoteStore,m)}for(const u of r)o.Ma.has(u)&&(yield Be(o.localStore,u,!1).then(()=>{so(o.remoteStore,u),uu(o,u)}).catch(Sn))}})).apply(this,arguments)}function Fg(a){const t=Nt(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=H_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Af.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=z0.bind(null,t),t.Ca.d_=oE.bind(null,t.eventManager),t.Ca.$a=k_.bind(null,t.eventManager),t}function Zu(a){const t=Nt(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hE.bind(null,t),t}class kc{constructor(){this.synchronizeTabs=!1}initialize(t){var r=this;return(0,ie.A)(function*(){r.serializer=su(t.databaseInfo.databaseId),r.sharedClientState=r.createSharedClientState(t),r.persistence=r.createPersistence(t),yield r.persistence.start(),r.localStore=r.createLocalStore(t),r.gcScheduler=r.createGarbageCollectionScheduler(t,r.localStore),r.indexBackfillerScheduler=r.createIndexBackfillerScheduler(t,r.localStore)})()}createGarbageCollectionScheduler(t,r){return null}createIndexBackfillerScheduler(t,r){return null}createLocalStore(t){return ru(this.persistence,new Jp,t.initialUser,this.serializer)}createPersistence(t){return new Nc($u.Zr,this.serializer)}createSharedClientState(t){return new qa}terminate(){var t=this;return(0,ie.A)(function*(){var r,o;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(o=t.indexBackfillerScheduler)||void 0===o||o.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class Lg extends kc{constructor(t,r,o){super(),this.Wa=t,this.cacheSizeBytes=r,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(t){var r=()=>super.initialize,o=this;return(0,ie.A)(function*(){yield r().call(o,t),yield o.Wa.initialize(o,t),yield Zu(o.Wa.syncEngine),yield hc(o.Wa.remoteStore),yield o.persistence.yi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return ru(this.persistence,new Jp,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,r){return new Nl(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,r)}createIndexBackfillerScheduler(t,r){const o=new an(r,this.persistence);return new kt(t.asyncQueue,o)}createPersistence(t){const r=xd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?bs.withCacheSize(this.cacheSizeBytes):bs.DEFAULT;return new Ll(this.synchronizeTabs,r,t.clientId,o,t.asyncQueue,eg(),Hl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new qa}}class Ug extends Lg{constructor(t,r){super(t,r,!1),this.Wa=t,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(t){var r=()=>super.initialize,o=this;return(0,ie.A)(function*(){yield r().call(o,t);const u=o.Wa.syncEngine;o.sharedClientState instanceof dc&&(o.sharedClientState.syncEngine={no:z_.bind(null,u),ro:K_.bind(null,u),io:pE.bind(null,u),Qi:Yd.bind(null,u),eo:Qd.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.yi(function(){var d=(0,ie.A)(function*(m){yield function fE(a,t){return Xd.apply(this,arguments)}(o.Wa.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start():m||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(m&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():m||o.indexBackfillerScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}createSharedClientState(t){const r=eg();if(!dc.D(r))throw new Rt(tt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=xd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new dc(r,t.asyncQueue,o,t.clientId,t.initialUser)}}class du{initialize(t,r){var o=this;return(0,ie.A)(function*(){o.localStore||(o.localStore=t.localStore,o.sharedClientState=t.sharedClientState,o.datastore=o.createDatastore(r),o.remoteStore=o.createRemoteStore(r),o.eventManager=o.createEventManager(r),o.syncEngine=o.createSyncEngine(r,!t.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Df(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Rg.bind(null,o.syncEngine),yield lg(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(t){return new x_}createDatastore(t){const r=su(t.databaseInfo.databaseId),o=new Zv(t.databaseInfo);return new D_(t.authCredentials,t.appCheckCredentials,o,r)}createRemoteStore(t){return o=this.localStore,u=this.datastore,d=t.asyncQueue,m=r=>Df(this.syncEngine,r,0),b=C_.D()?new C_:new Ss,new A_(o,u,d,m,b);var o,u,d,m,b}createSyncEngine(t,r){return function(u,d,m,b,F,$,ne){const ge=new cE(u,d,m,b,F,$);return ne&&(ge.Qa=!0),ge}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,ie.A)(function*(){var r,o,u;yield(u=(0,ie.A)(function*(m){const b=Nt(m);st("RemoteStore","RemoteStore shutting down."),b.L_.add(5),yield Ud(b),b.k_.shutdown(),b.q_.set("Unknown")}),function d(m){return u.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(o=t.eventManager)||void 0===o||o.terminate()})()}}function Zd(a,t=10240){let r=0;return{read:()=>(0,ie.A)(function*(){if(r<a.byteLength){const o={value:a.slice(r,r+t),done:!1};return r+=t,o}return{done:!0}})(),cancel:()=>(0,ie.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class el{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):In("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,r){this.muted||setTimeout(()=>{this.muted||t(r)},0)}}class Q_{constructor(t,r){this.ja=t,this.serializer=r,this.metadata=new Yn,this.buffer=new Uint8Array,this.Ha=new TextDecoder("utf-8"),this.Ja().then(o=>{o&&o.ua()?this.metadata.resolve(o.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.aa)}`))},o=>this.metadata.reject(o))}close(){return this.ja.cancel()}getMetadata(){var t=this;return(0,ie.A)(function*(){return t.metadata.promise})()}Ua(){var t=this;return(0,ie.A)(function*(){return yield t.getMetadata(),t.Ja()})()}Ja(){var t=this;return(0,ie.A)(function*(){const r=yield t.Ya();if(null===r)return null;const o=t.Ha.decode(r),u=Number(o);isNaN(u)&&t.Za(`length string (${o}) is not valid number`);const d=yield t.Xa(u);return new V_(JSON.parse(d),r.length+u)})()}eu(){return this.buffer.findIndex(t=>123===t)}Ya(){var t=this;return(0,ie.A)(function*(){for(;t.eu()<0&&!(yield t.tu()););if(0===t.buffer.length)return null;const r=t.eu();r<0&&t.Za("Reached the end of bundle when a length string is expected.");const o=t.buffer.slice(0,r);return t.buffer=t.buffer.slice(r),o})()}Xa(t){var r=this;return(0,ie.A)(function*(){for(;r.buffer.length<t;)(yield r.tu())&&r.Za("Reached the end of bundle when more is expected.");const o=r.Ha.decode(r.buffer.slice(0,t));return r.buffer=r.buffer.slice(t),o})()}Za(t){throw this.ja.cancel(),new Error(`Invalid bundle format: ${t}`)}tu(){var t=this;return(0,ie.A)(function*(){const r=yield t.ja.read();if(!r.done){const o=new Uint8Array(t.buffer.length+r.value.length);o.set(t.buffer),o.set(r.value,t.buffer.length),t.buffer=o}return r.done})()}}class X_{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){var r=this;return(0,ie.A)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new Rt(tt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const o=yield(u=(0,ie.A)(function*(m,b){const F=Nt(m),$={documents:b.map(lt=>Xc(F.serializer,lt))},ne=yield F.Lo("BatchGetDocuments",F.serializer.databaseId,Rn.emptyPath(),$,b.length),ge=new Map;ne.forEach(lt=>{const Ht=function Wp(a,t){return"found"in t?function(o,u){_t(!!u.found);const d=ya(o,u.found.name),m=Ni(u.found.updateTime),b=u.found.createTime?Ni(u.found.createTime):Zt.min(),F=new Yr({mapValue:{fields:u.found.fields}});return ar.newFoundDocument(d,m,b,F)}(a,t):"missing"in t?function(o,u){_t(!!u.missing),_t(!!u.readTime);const d=ya(o,u.missing),m=Ni(u.readTime);return ar.newNoDocument(d,m)}(a,t):St()}(F.serializer,lt);ge.set(Ht.key.toString(),Ht)});const Ne=[];return b.forEach(lt=>{const Ht=ge.get(lt.toString());_t(!!Ht),Ne.push(Ht)}),Ne}),function d(m,b){return u.apply(this,arguments)})(r.datastore,t);var u;return o.forEach(u=>r.recordVersion(u)),o})()}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(t.toString())}delete(t){this.write(new Bs(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,ie.A)(function*(){if(t.ensureCommitNotCalled(),t.lastTransactionError)throw t.lastTransactionError;const r=t.readVersions;var o;t.mutations.forEach(o=>{r.delete(o.key.toString())}),r.forEach((o,u)=>{const d=Ce.fromPath(u);t.mutations.push(new gi(d,t.precondition(d)))}),yield(o=(0,ie.A)(function*(d,m){const b=Nt(d),F={writes:m.map($=>Ou(b.serializer,$))};yield b.Mo("Commit",b.serializer.databaseId,Rn.emptyPath(),F)}),function u(d,m){return o.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw St();r=Zt.min()}const o=this.readVersions.get(t.key.toString());if(o){if(!r.isEqual(o))throw new Rt(tt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(Zt.min())?xn.exists(!1):xn.updateTime(r):xn.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(Zt.min()))throw new Rt(tt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xn.updateTime(r)}return xn.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class Y_{constructor(t,r,o,u,d){this.asyncQueue=t,this.datastore=r,this.options=o,this.updateFunction=u,this.deferred=d,this.nu=o.maxAttempts,this.t_=new hf(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){var t=this;this.t_.Go((0,ie.A)(function*(){const r=new X_(t.datastore),o=t.su(r);o&&o.then(u=>{t.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{t.deferred.resolve(u)}).catch(d=>{t.ou(d)}))}).catch(u=>{t.ou(u)})}))}su(t){try{const r=this.updateFunction(t);return!ve(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ou(t){this.nu>0&&this._u(t)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(t)}_u(t){if("FirebaseError"===t.name){const r=t.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!Dc(r)}return!1}}class bf{constructor(t,r,o,u){var d=this;this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=o,this.databaseInfo=u,this.user=tn.UNAUTHENTICATED,this.clientId=Li.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,ie.A)(function*(b){st("FirestoreClient","Received user=",b.uid),yield d.authCredentialListener(b),d.user=b});return function(b){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(st("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Rt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const r=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ie.A)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),r.resolve()}catch(o){const u=au(o,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function ql(a,t){return hu.apply(this,arguments)}function hu(){return hu=(0,ie.A)(function*(a,t){a.asyncQueue.verifyOperationInProgress(),st("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield t.initialize(r);let o=r.initialUser;a.setCredentialChangeListener(function(){var u=(0,ie.A)(function*(d){o.isEqual(d)||(yield Zp(t.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=t}),hu.apply(this,arguments)}function Bg(a,t){return jg.apply(this,arguments)}function jg(){return(jg=(0,ie.A)(function*(a,t){a.asyncQueue.verifyOperationInProgress();const r=yield Ql(a);st("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(r,a.configuration),a.setCredentialChangeListener(o=>N_(t.remoteStore,o)),a.setAppCheckTokenChangeListener((o,u)=>N_(t.remoteStore,u)),a._onlineComponents=t})).apply(this,arguments)}function mE(a){return"FirebaseError"===a.name?a.code===tt.FAILED_PRECONDITION||a.code===tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code}function Ql(a){return eh.apply(this,arguments)}function eh(){return(eh=(0,ie.A)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){st("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ql(a,a._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!mE(r))throw r;Kn("Error using user provided cache. Falling back to memory cache: "+r),yield ql(a,new kc)}}else st("FirestoreClient","Using default OfflineComponentProvider"),yield ql(a,new kc);return a._offlineComponents})).apply(this,arguments)}function th(a){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,ie.A)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(st("FirestoreClient","Using user provided OnlineComponentProvider"),yield Bg(a,a._uninitializedComponentsProvider._online)):(st("FirestoreClient","Using default OnlineComponentProvider"),yield Bg(a,new du))),a._onlineComponents})).apply(this,arguments)}function $g(a){return Ql(a).then(t=>t.persistence)}function tl(a){return Ql(a).then(t=>t.localStore)}function J_(a){return th(a).then(t=>t.remoteStore)}function Hg(a){return th(a).then(t=>t.syncEngine)}function Xl(a){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,ie.A)(function*(a){const t=yield th(a),r=t.eventManager;return r.onListen=uE.bind(null,t.syncEngine),r.onUnlisten=lE.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=B_.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Dg.bind(null,t.syncEngine),r})).apply(this,arguments)}function yE(a,t,r={}){const o=new Yn;return a.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function(d,m,b,F,$){const ne=new el({next:Ne=>{m.enqueueAndForget(()=>fg(d,ge));const lt=Ne.docs.has(b);!lt&&Ne.fromCache?$.reject(new Rt(tt.UNAVAILABLE,"Failed to get document because the client is offline.")):lt&&Ne.fromCache&&F&&"server"===F.source?$.reject(new Rt(tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):$.resolve(Ne)},error:Ne=>$.reject(Ne)}),ge=new mg(Ri(b.path),ne,{includeMetadataChanges:!0,_a:!0});return hg(d,ge)}(yield Xl(a),a.asyncQueue,t,r,o)})),o.promise}function vE(a,t,r={}){const o=new Yn;return a.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function(d,m,b,F,$){const ne=new el({next:Ne=>{m.enqueueAndForget(()=>fg(d,ge)),Ne.fromCache&&"server"===F.source?$.reject(new Rt(tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):$.resolve(Ne)},error:Ne=>$.reject(Ne)}),ge=new mg(b,ne,{includeMetadataChanges:!0,_a:!0});return hg(d,ge)}(yield Xl(a),a.asyncQueue,t,r,o)})),o.promise}function Pf(a){const t={};return void 0!==a.timeoutSeconds&&(t.timeoutSeconds=a.timeoutSeconds),t}const fc=new Map;function nl(a,t,r){if(!r)throw new Rt(tt.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function zg(a,t,r,o){if(!0===t&&!0===o)throw new Rt(tt.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function Wg(a){if(!Ce.isDocumentKey(a))throw new Rt(tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Kg(a){if(Ce.isDocumentKey(a))throw new Rt(tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function qg(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const t=(o=a).constructor?o.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var o;return"function"==typeof a?"a function":St()}function Ur(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new Rt(tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=qg(a);throw new Rt(tt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return a}function TE(a,t){if(t<=0)throw new Rt(tt.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${t}.`)}class Mf{constructor(t){var r,o;if(void 0===t.host){if(void 0!==t.ssl)throw new Rt(tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(r=t.ssl)||void 0===r||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Rt(tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Pf(null!==(o=t.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new Rt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new Rt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new Rt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rl{constructor(t,r,o,u){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Rt(tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Rt(tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mf(t),void 0!==t.credentials&&(this._authCredentials=function(o){if(!o)return new An;switch(o.type){case"firstParty":return new jr(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Rt(tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const o=fc.get(r);o&&(st("ComponentProvider","Removing Datastore"),fc.delete(r),o.terminate())}(this),Promise.resolve()}}class Ro{constructor(t,r,o){this.converter=r,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new Ro(this.firestore,t,this._query)}}class Xi{constructor(t,r,o){this.converter=r,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Xi(this.firestore,t,this._key)}}class pc extends Ro{constructor(t,r,o){super(t,r,Ri(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Xi(this.firestore,null,new Ce(t))}withConverter(t){return new pc(this.firestore,t,this._path)}}function ty(a,t,...r){if(a=(0,ce.Ku)(a),nl("collection","path",t),a instanceof rl){const o=Rn.fromString(t,...r);return Kg(o),new pc(a,null,o)}{if(!(a instanceof Xi||a instanceof pc))throw new Rt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Rn.fromString(t,...r));return Kg(o),new pc(a.firestore,null,o)}}function Rf(a,t,...r){if(a=(0,ce.Ku)(a),1===arguments.length&&(t=Li.newId()),nl("doc","path",t),a instanceof rl){const o=Rn.fromString(t,...r);return Wg(o),new Xi(a,null,new Ce(o))}{if(!(a instanceof Xi||a instanceof pc))throw new Rt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Rn.fromString(t,...r));return Wg(o),new Xi(a.firestore,a instanceof pc?a.converter:null,new Ce(o))}}function ny(a,t){return a=(0,ce.Ku)(a),t=(0,ce.Ku)(t),(a instanceof Xi||a instanceof pc)&&(t instanceof Xi||t instanceof pc)&&a.firestore===t.firestore&&a.path===t.path&&a.converter===t.converter}function Of(a,t){return a=(0,ce.Ku)(a),t=(0,ce.Ku)(t),a instanceof Ro&&t instanceof Ro&&a.firestore===t.firestore&&Y(a._query,t._query)&&a.converter===t.converter}class ry{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new hf(this,"async_queue_retry"),this.Eu=()=>{const r=Hl();r&&st("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()};const t=Hl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;const r=Hl();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise(()=>{});const r=new Yn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.uu.push(t),this.Ru()))}Ru(){var t=this;return(0,ie.A)(function*(){if(0!==t.uu.length){try{yield t.uu[0](),t.uu.shift(),t.t_.reset()}catch(r){if(!ss(r))throw r;st("AsyncQueue","Operation failed with retryable error: "+r)}t.uu.length>0&&t.t_.Go(()=>t.Ru())}})()}Au(t){const r=this.au.then(()=>(this.Pu=!0,t().catch(o=>{throw this.hu=o,this.Pu=!1,In("INTERNAL UNHANDLED ERROR: ",function(m){let b=m.message||"";return m.stack&&(b=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),b}(o)),o}).then(o=>(this.Pu=!1,o))));return this.au=r,r}enqueueAfterDelay(t,r,o){this.du(),this.Tu.indexOf(t)>-1&&(r=0);const u=Mo.createAndSchedule(this,t,r,o,d=>this.Vu(d));return this.lu.push(u),u}du(){this.hu&&St()}verifyOperationInProgress(){}mu(){var t=this;return(0,ie.A)(function*(){let r;do{r=t.au,yield r}while(r!==t.au)})()}fu(t){for(const r of this.lu)if(r.timerId===t)return!0;return!1}gu(t){return this.mu().then(()=>{this.lu.sort((r,o)=>r.targetTimeMs-o.targetTimeMs);for(const r of this.lu)if(r.skipDelay(),"all"!==t&&r.timerId===t)break;return this.mu()})}pu(t){this.Tu.push(t)}Vu(t){const r=this.lu.indexOf(t);this.lu.splice(r,1)}}function Qg(a){return function(r,o){if("object"!=typeof r||null===r)return!1;const u=r;for(const d of["next","error","complete"])if(d in u&&"function"==typeof u[d])return!0;return!1}(a)}class bE{constructor(){this._progressObserver={},this._taskCompletionResolver=new Yn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,r,o){this._progressObserver={next:t,error:r,complete:o}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,r){return this._taskCompletionResolver.promise.then(t,r)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class _i extends rl{constructor(t,r,o,u){super(t,r,o,u),this.type="firestore",this._queue=new ry,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||il(this),this._firestoreClient.terminate()}}function us(a){return a._firestoreClient||il(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function il(a){var t,r,o;const u=a._freezeSettings(),d=(F=(null===(t=a._app)||void 0===t?void 0:t.options.appId)||"",new Xs(a._databaseId,F,a._persistenceKey,(ne=u).host,ne.ssl,ne.experimentalForceLongPolling,ne.experimentalAutoDetectLongPolling,Pf(ne.experimentalLongPollingOptions),ne.useFetchStreams));var F,ne;a._firestoreClient=new bf(a._authCredentials,a._appCheckCredentials,a._queue,d),null!==(r=u.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(a._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Nf(a,t,r){const o=new Yn;return a.asyncQueue.enqueue((0,ie.A)(function*(){try{yield ql(a,r),yield Bg(a,t),o.resolve()}catch(u){const d=u;if(!mE(d))throw d;Kn("Error enabling indexeddb cache. Falling back to memory cache: "+d),o.reject(d)}})).then(()=>o.promise)}function NE(a){if(a._initialized||a._terminated)throw new Rt(tt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gc(Hr.fromBase64String(t))}catch(r){throw new Rt(tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new gc(Hr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Vc{constructor(...t){for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Rt(tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ve(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class sl{constructor(t){this._methodName=t}}class xf{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Rt(tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Rt(tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return zt(this._lat,t._lat)||zt(this._long,t._long)}}class kf{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(o,u){if(o.length!==u.length)return!1;for(let d=0;d<o.length;++d)if(o[d]!==u[d])return!1;return!0}(this._values,t._values)}}const FE=/^__.*__$/;class VE{constructor(t,r,o){this.data=t,this.fieldMask=r,this.fieldTransforms=o}toMutation(t,r){return null!==this.fieldMask?new _r(t,this.data,this.fieldMask,r,this.fieldTransforms):new vn(t,this.data,r,this.fieldTransforms)}}class cy{constructor(t,r,o){this.data=t,this.fieldMask=r,this.fieldTransforms=o}toMutation(t,r){return new _r(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Ff(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St()}}class Xg{constructor(t,r,o,u,d,m){this.settings=t,this.databaseId=r,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===d&&this.yu(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new Xg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(t),u=this.Su({path:o,Du:!1});return u.vu(t),u}Cu(t){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(t),u=this.Su({path:o,Du:!1});return u.yu(),u}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return ih(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return void 0!==this.fieldMask.find(r=>t.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>t.isPrefixOf(r.field))}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(0===t.length)throw this.Mu("Document fields must not be empty");if(Ff(this.wu)&&FE.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}}class eC{constructor(t,r,o){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=o||su(t)}Nu(t,r,o,u=!1){return new Xg({wu:t,methodName:r,Ou:o,path:Ve.emptyPath(),Du:!1,xu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lc(a){const t=a._freezeSettings(),r=su(a._databaseId);return new eC(a._databaseId,!!t.ignoreUndefinedProperties,r)}function Yg(a,t,r,o,u,d={}){const m=a.Nu(d.merge||d.mergeFields?2:0,t,r,u);Lf("Data must be an object, but it was:",m,o);const b=dy(o,m);let F,$;if(d.merge)F=new Xr(m.fieldMask),$=m.fieldTransforms;else if(d.mergeFields){const ne=[];for(const ge of d.mergeFields){const Ne=mc(t,ge,r);if(!m.contains(Ne))throw new Rt(tt.INVALID_ARGUMENT,`Field '${Ne}' is specified in your field mask but missing from your input data.`);UE(ne,Ne)||ne.push(Ne)}F=new Xr(ne),$=m.fieldTransforms.filter(ge=>F.covers(ge.field))}else F=null,$=m.fieldTransforms;return new VE(new Yr(b),F,$)}class Vf extends sl{_toFieldTransform(t){if(2!==t.wu)throw t.Mu(1===t.wu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Vf}}function LE(a,t,r){return new Xg({wu:3,Ou:t.settings.Ou,methodName:a._methodName,Du:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class uy extends sl{_toFieldTransform(t){return new Pt(t.path,new qi)}isEqual(t){return t instanceof uy}}class ly extends sl{constructor(t,r){super(t),this.Lu=r}_toFieldTransform(t){const r=LE(this,t,!0),o=this.Lu.map(d=>pu(d,r)),u=new Os(o);return new Pt(t.path,u)}isEqual(t){return t instanceof ly&&(0,ce.bD)(this.Lu,t.Lu)}}class Jg extends sl{constructor(t,r){super(t),this.Lu=r}_toFieldTransform(t){const r=LE(this,t,!0),o=this.Lu.map(d=>pu(d,r)),u=new X(o);return new Pt(t.path,u)}isEqual(t){return t instanceof Jg&&(0,ce.bD)(this.Lu,t.Lu)}}class Yl extends sl{constructor(t,r){super(t),this.Bu=r}_toFieldTransform(t){const r=new B(t.serializer,as(t.serializer,this.Bu));return new Pt(t.path,r)}isEqual(t){return t instanceof Yl&&this.Bu===t.Bu}}function Jl(a,t,r,o){const u=a.Nu(1,t,r);Lf("Data must be an object, but it was:",u,o);const d=[],m=Yr.empty();qs(o,(F,$)=>{const ne=aa(t,F,r);$=(0,ce.Ku)($);const ge=u.Cu(ne);if($ instanceof Vf)d.push(ne);else{const Ne=pu($,ge);null!=Ne&&(d.push(ne),m.set(ne,Ne))}});const b=new Xr(d);return new cy(m,b,u.fieldTransforms)}function rh(a,t,r,o,u,d){const m=a.Nu(1,t,r),b=[mc(t,o,r)],F=[u];if(d.length%2!=0)throw new Rt(tt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ne=0;Ne<d.length;Ne+=2)b.push(mc(t,d[Ne])),F.push(d[Ne+1]);const $=[],ne=Yr.empty();for(let Ne=b.length-1;Ne>=0;--Ne)if(!UE($,b[Ne])){const lt=b[Ne];let Ht=F[Ne];Ht=(0,ce.Ku)(Ht);const en=m.Cu(lt);if(Ht instanceof Vf)$.push(lt);else{const Qt=pu(Ht,en);null!=Qt&&($.push(lt),ne.set(lt,Qt))}}const ge=new Xr($);return new cy(ne,ge,m.fieldTransforms)}function Zg(a,t,r,o=!1){return pu(r,a.Nu(o?4:3,t))}function pu(a,t){if(hy(a=(0,ce.Ku)(a)))return Lf("Unsupported field value:",t,a),dy(a,t);if(a instanceof sl)return function(o,u){if(!Ff(u.wu))throw u.Mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Mu(`${o._methodName}() is not currently supported inside arrays`);const d=o._toFieldTransform(u);d&&u.fieldTransforms.push(d)}(a,t),null;if(void 0===a&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.Du&&4!==t.wu)throw t.Mu("Nested arrays are not supported");return function(o,u){const d=[];let m=0;for(const b of o){let F=pu(b,u.Fu(m));null==F&&(F={nullValue:"NULL_VALUE"}),d.push(F),m++}return{arrayValue:{values:d}}}(a,t)}return function(o,u){if(null===(o=(0,ce.Ku)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return as(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const d=Jt.fromDate(o);return{timestampValue:ic(u.serializer,d)}}if(o instanceof Jt){const d=new Jt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:ic(u.serializer,d)}}if(o instanceof xf)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof gc)return{bytesValue:Qc(u.serializer,o._byteString)};if(o instanceof Xi){const d=u.databaseId,m=o.firestore._databaseId;if(!m.isEqual(d))throw u.Mu(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Mu(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof kf)return b=u,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(F=>{if("number"!=typeof F)throw b.Mu("VectorValues must only contain numeric values.");return bo(b.serializer,F)})}}}}};var b;throw u.Mu(`Unsupported field value: ${qg(o)}`)}(a,t)}function dy(a,t){const r={};return Rs(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qs(a,(o,u)=>{const d=pu(u,t.bu(o));null!=d&&(r[o]=d)}),{mapValue:{fields:r}}}function hy(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof Jt||a instanceof xf||a instanceof gc||a instanceof Xi||a instanceof sl||a instanceof kf)}function Lf(a,t,r){if(!hy(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=qg(r);throw t.Mu("an object"===o?a+" a custom object":a+" "+o)}var u}function mc(a,t,r){if((t=(0,ce.Ku)(t))instanceof Vc)return t._internalPath;if("string"==typeof t)return aa(a,t);throw ih("Field path arguments must be of type string or ",a,!1,void 0,r)}const Ea=new RegExp("[~\\*/\\[\\]]");function aa(a,t,r){if(t.search(Ea)>=0)throw ih(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new Vc(...t.split("."))._internalPath}catch{throw ih(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function ih(a,t,r,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let b=`Function ${t}() called with invalid data`;r&&(b+=" (via `toFirestore()`)"),b+=". ";let F="";return(d||m)&&(F+=" (found",d&&(F+=` in field ${o}`),m&&(F+=` in document ${u}`),F+=")"),new Rt(tt.INVALID_ARGUMENT,b+a+F)}function UE(a,t){return a.some(r=>r.isEqual(t))}class sh{constructor(t,r,o,u,d){this._firestore=t,this._userDataWriter=r,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Xi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new tC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(em("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r)}}}class tC extends sh{data(){return super.data()}}function em(a,t){return"string"==typeof t?aa(a,t):t instanceof Vc?t._internalPath:t._delegate._internalPath}function tm(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new Rt(tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class Bf extends Uf{}function Xa(a,t,...r){let o=[];t instanceof Uf&&o.push(t),o=o.concat(r),function(d){const m=d.filter(F=>F instanceof Zl).length,b=d.filter(F=>F instanceof ol).length;if(m>1||m>0&&b>0)throw new Rt(tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)a=u._apply(a);return a}class ol extends Bf{constructor(t,r,o){super(),this._field=t,this._op=r,this._value=o,this.type="where"}static _create(t,r,o){return new ol(t,r,o)}_apply(t){const r=this._parse(t);return my(t._query,r),new Ro(t.firestore,t.converter,Do(t._query,r))}_parse(t){const r=Lc(t.firestore);return function(d,m,b,F,$,ne,ge){let Ne;if($.isKeyField()){if("array-contains"===ne||"array-contains-any"===ne)throw new Rt(tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ne}' queries on documentId().`);if("in"===ne||"not-in"===ne){gy(ge,ne);const lt=[];for(const Ht of ge)lt.push(Hf(F,d,Ht));Ne={arrayValue:{values:lt}}}else Ne=Hf(F,d,ge)}else"in"!==ne&&"not-in"!==ne&&"array-contains-any"!==ne||gy(ge,ne),Ne=Zg(b,"where",ge,"in"===ne||"not-in"===ne);return x.create($,ne,Ne)}(t._query,0,r,t.firestore._databaseId,this._field,this._op,this._value)}}class Zl extends Uf{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Zl(t,r)}_parse(t){const r=this._queryConstraints.map(o=>o._parse(t)).filter(o=>o.getFilters().length>0);return 1===r.length?r[0]:Z.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return 0===r.getFilters().length?t:(function(u,d){let m=u;const b=d.getFlattenedFilters();for(const F of b)my(m,F),m=Do(m,F)}(t._query,r),new Ro(t.firestore,t.converter,Do(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class jf extends Bf{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new jf(t,r)}_apply(t){const r=function(u,d,m){if(null!==u.startAt)throw new Rt(tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Rt(tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xi(d,m)}(t._query,this._field,this._direction);return new Ro(t.firestore,t.converter,function(u,d){const m=u.explicitOrderBy.concat([d]);return new Gr(u.path,u.collectionGroup,m,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(t._query,r))}}class al extends Bf{constructor(t,r,o){super(),this.type=t,this._limit=r,this._limitType=o}static _create(t,r,o){return new al(t,r,o)}_apply(t){return new Ro(t.firestore,t.converter,Ao(t._query,this._limit,this._limitType))}}class ah extends Bf{constructor(t,r,o){super(),this.type=t,this._docOrFields=r,this._inclusive=o}static _create(t,r,o){return new ah(t,r,o)}_apply(t){const r=uh(t,this.type,this._docOrFields,this._inclusive);return new Ro(t.firestore,t.converter,(d=r,new Gr((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,d,u.endAt)));var u,d}}class $f extends Bf{constructor(t,r,o){super(),this.type=t,this._docOrFields=r,this._inclusive=o}static _create(t,r,o){return new $f(t,r,o)}_apply(t){const r=uh(t,this.type,this._docOrFields,this._inclusive);return new Ro(t.firestore,t.converter,(d=r,new Gr((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,d)));var u,d}}function uh(a,t,r,o){if(r[0]=(0,ce.Ku)(r[0]),r[0]instanceof sh)return function(d,m,b,F,$){if(!F)throw new Rt(tt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${b}().`);const ne=[];for(const ge of vs(d))if(ge.field.isKeyField())ne.push($i(m,F.key));else{const Ne=F.data.field(ge.field);if(ps(Ne))throw new Rt(tt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ge.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ne){const lt=ge.field.canonicalString();throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${lt}' (used as the orderBy) does not exist.`)}ne.push(Ne)}return new ds(ne,$)}(a._query,a.firestore._databaseId,t,r[0]._document,o);{const u=Lc(a.firestore);return function(m,b,F,$,ne,ge){const Ne=m.explicitOrderBy;if(ne.length>Ne.length)throw new Rt(tt.INVALID_ARGUMENT,`Too many arguments provided to ${$}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const lt=[];for(let Ht=0;Ht<ne.length;Ht++){const en=ne[Ht];if(Ne[Ht].field.isKeyField()){if("string"!=typeof en)throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${$}(), but got a ${typeof en}`);if(!ma(m)&&-1!==en.indexOf("/"))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${$}() must be a plain document ID, but '${en}' contains a slash.`);const Qt=m.path.child(Rn.fromString(en));if(!Ce.isDocumentKey(Qt))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${$}() must result in a valid document path, but '${Qt}' is not because it contains an odd number of segments.`);const Vn=new Ce(Qt);lt.push($i(b,Vn))}else{const Qt=Zg(F,$,en);lt.push(Qt)}}return new ds(lt,ge)}(a._query,a.firestore._databaseId,u,t,r,o)}}function Hf(a,t,r){if("string"==typeof(r=(0,ce.Ku)(r))){if(""===r)throw new Rt(tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ma(t)&&-1!==r.indexOf("/"))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const o=t.path.child(Rn.fromString(r));if(!Ce.isDocumentKey(o))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return $i(a,new Ce(o))}if(r instanceof Xi)return $i(a,r._key);throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qg(r)}.`)}function gy(a,t){if(!Array.isArray(a)||0===a.length)throw new Rt(tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function my(a,t){const r=function(u,d){for(const m of u)for(const b of m.getFlattenedFilters())if(d.indexOf(b.op)>=0)return b.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw new Rt(tt.INVALID_ARGUMENT,r===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class zf{convertValue(t,r="none"){switch(Bi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return dn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(si(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw St()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const o={};return qs(t,(u,d)=>{o[u]=this.convertValue(d,r)}),o}convertVectorValue(t){var r,o,u;const d=null===(u=null===(o=null===(r=t.fields)||void 0===r?void 0:r.value.arrayValue)||void 0===o?void 0:o.values)||void 0===u?void 0:u.map(m=>dn(m.doubleValue));return new kf(d)}convertGeoPoint(t){return new xf(dn(t.latitude),dn(t.longitude))}convertArray(t,r){return(t.values||[]).map(o=>this.convertValue(o,r))}convertServerTimestamp(t,r){switch(r){case"previous":const o=ks(t);return null==o?null:this.convertValue(o,r);case"estimate":return this.convertTimestamp(gs(t));default:return null}}convertTimestamp(t){const r=os(t);return new Jt(r.seconds,r.nanos)}convertDocumentKey(t,r){const o=Rn.fromString(t);_t(ra(o));const u=new Pi(o.get(1),o.get(3)),d=new Ce(o.popFirst(5));return u.isEqual(r)||In(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),d}}function _c(a,t,r){let o;return o=a?r&&(r.merge||r.mergeFields)?a.toFirestore(t,r):a.toFirestore(t):t,o}class _y extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new gc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Xi(this.firestore,null,r)}}class gu{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class yc extends sh{constructor(t,r,o,u,d,m){super(t,r,o,u,m),this._firestore=t,this._firestoreImpl=t,this.metadata=d}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const o=this._document.data.field(em("DocumentSnapshot.get",t));if(null!==o)return this._userDataWriter.convertValue(o,r.serverTimestamps)}}}class ed extends yc{data(t={}){return super.data(t)}}class vc{constructor(t,r,o,u){this._firestore=t,this._userDataWriter=r,this._snapshot=u,this.metadata=new gu(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,r){this._snapshot.docs.forEach(o=>{t.call(r,new ed(this._firestore,this._userDataWriter,o.key,o,new gu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Rt(tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,d){if(u._snapshot.oldDocs.isEmpty()){let m=0;return u._snapshot.docChanges.map(b=>({type:"added",doc:new ed(u._firestore,u._userDataWriter,b.doc.key,b.doc,new gu(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:m++}))}{let m=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(b=>d||3!==b.type).map(b=>{const F=new ed(u._firestore,u._userDataWriter,b.doc.key,b.doc,new gu(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter);let $=-1,ne=-1;return 0!==b.type&&($=m.indexOf(b.doc.key),m=m.delete(b.doc.key)),1!==b.type&&(m=m.add(b.doc),ne=m.indexOf(b.doc.key)),{type:yy(b.type),doc:F,oldIndex:$,newIndex:ne}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function yy(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return St()}}function lh(a,t){return a instanceof yc&&t instanceof yc?a._firestore===t._firestore&&a._key.isEqual(t._key)&&(null===a._document?null===t._document:a._document.isEqual(t._document))&&a._converter===t._converter:a instanceof vc&&t instanceof vc&&a._firestore===t._firestore&&Of(a.query,t.query)&&a.metadata.isEqual(t.metadata)&&a._snapshot.isEqual(t._snapshot)}class Uc extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new gc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Xi(this.firestore,null,r)}}function Ey(a,t,r){a=Ur(a,Xi);const o=Ur(a.firestore,_i),u=_c(a.converter,t,r);return cl(o,[Yg(Lc(o),"setDoc",a._key,u,null!==a.converter,r).toMutation(a._key,xn.none())])}function am(a,t,r,...o){a=Ur(a,Xi);const u=Ur(a.firestore,_i),d=Lc(u);let m;return m="string"==typeof(t=(0,ce.Ku)(t))||t instanceof Vc?rh(d,"updateDoc",a._key,t,r,o):Jl(d,"updateDoc",a._key,t),cl(u,[m.toMutation(a._key,xn.exists(!0))])}function Iy(a,...t){var r,o,u;a=(0,ce.Ku)(a);let d={includeMetadataChanges:!1,source:"default"},m=0;"object"!=typeof t[m]||Qg(t[m])||(d=t[m],m++);const b={includeMetadataChanges:d.includeMetadataChanges,source:d.source};if(Qg(t[m])){const ge=t[m];t[m]=null===(r=ge.next)||void 0===r?void 0:r.bind(ge),t[m+1]=null===(o=ge.error)||void 0===o?void 0:o.bind(ge),t[m+2]=null===(u=ge.complete)||void 0===u?void 0:u.bind(ge)}let F,$,ne;if(a instanceof Xi)$=Ur(a.firestore,_i),ne=Ri(a._key.path),F={next:ge=>{t[m]&&t[m](vr($,a,ge))},error:t[m+1],complete:t[m+2]};else{const ge=Ur(a,Ro);$=Ur(ge.firestore,_i),ne=ge._query;const Ne=new Uc($);F={next:lt=>{t[m]&&t[m](new vc($,Ne,ge,lt))},error:t[m+1],complete:t[m+2]},tm(a._query)}return function(Ne,lt,Ht,en){const Qt=new el(en),Vn=new mg(lt,Qt,Ht);return Ne.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return hg(yield Xl(Ne),Vn)})),()=>{Qt.za(),Ne.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return fg(yield Xl(Ne),Vn)}))}}(us($),ne,b,F)}function cl(a,t){return function(o,u){const d=new Yn;return o.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function cu(a,t,r){return wf.apply(this,arguments)}(yield Hg(o),u,d)})),d.promise}(us(a),t)}function vr(a,t,r){const o=r.docs.get(t._key),u=new Uc(a);return new yc(a,u,t._key,o,new gu(r.hasPendingWrites,r.fromCache),t.converter)}const Py={maxAttempts:5};class qf{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Lc(t)}set(t,r,o){this._verifyNotCommitted();const u=mu(t,this._firestore),d=_c(u.converter,r,o),m=Yg(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,xn.none())),this}update(t,r,o,...u){this._verifyNotCommitted();const d=mu(t,this._firestore);let m;return m="string"==typeof(r=(0,ce.Ku)(r))||r instanceof Vc?rh(this._dataReader,"WriteBatch.update",d._key,r,o,u):Jl(this._dataReader,"WriteBatch.update",d._key,r),this._mutations.push(m.toMutation(d._key,xn.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=mu(t,this._firestore);return this._mutations=this._mutations.concat(new Bs(r._key,xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Rt(tt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mu(a,t){if((a=(0,ce.Ku)(a)).firestore!==t)throw new Rt(tt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class QE extends class{constructor(r,o){this._firestore=r,this._transaction=o,this._dataReader=Lc(r)}get(r){const o=mu(r,this._firestore),u=new _y(this._firestore);return this._transaction.lookup([o._key]).then(d=>{if(!d||1!==d.length)return St();const m=d[0];if(m.isFoundDocument())return new sh(this._firestore,u,m.key,m,o.converter);if(m.isNoDocument())return new sh(this._firestore,u,o._key,null,o.converter);throw St()})}set(r,o,u){const d=mu(r,this._firestore),m=_c(d.converter,o,u),b=Yg(this._dataReader,"Transaction.set",d._key,m,null!==d.converter,u);return this._transaction.set(d._key,b),this}update(r,o,u,...d){const m=mu(r,this._firestore);let b;return b="string"==typeof(o=(0,ce.Ku)(o))||o instanceof Vc?rh(this._dataReader,"Transaction.update",m._key,o,u,d):Jl(this._dataReader,"Transaction.update",m._key,o),this._transaction.update(m._key,b),this}delete(r){const o=mu(r,this._firestore);return this._transaction.delete(o._key),this}}{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=mu(t,this._firestore),o=new Uc(this._firestore);return super.get(t).then(u=>new yc(this._firestore,o,r._key,u._document,new gu(!1,!1),r.converter))}}function pm(a,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Rt("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return t}function xy(){if(typeof Uint8Array>"u")throw new Rt("unimplemented","Uint8Arrays are not available in this environment.")}function ky(){if(!function hi(){return typeof atob<"u"}())throw new Rt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,r=!0){sn=je.SDK_VERSION,(0,je._registerComponent)(new Ue.uA("firestore",(o,{instanceIdentifier:u,options:d})=>{const m=o.getProvider("app").getImmediate(),b=new _i(new kr(o.getProvider("auth-internal")),new Or(o.getProvider("app-check-internal")),function($,ne){if(!Object.prototype.hasOwnProperty.apply($.options,["projectId"]))throw new Rt(tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pi($.options.projectId,ne)}(m,u),m);return d=Object.assign({useFetchStreams:r},d),b._setSettings(d),b},"PUBLIC").setMultipleInstances(!0)),(0,je.registerVersion)(gn,"4.7.1",t),(0,je.registerVersion)(gn,"4.7.1","esm2017")}();class ph{constructor(t){this._delegate=t}static fromBase64String(t){return ky(),new ph(gc.fromBase64String(t))}static fromUint8Array(t){return xy(),new ph(gc.fromUint8Array(t))}toBase64(){return ky(),this._delegate.toBase64()}toUint8Array(){return xy(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Na(a){return function gm(a,t){if("object"!=typeof a||null===a)return!1;const r=a;for(const o of t)if(o in r&&"function"==typeof r[o])return!0;return!1}(a,["next","error","complete"])}class sI{enableIndexedDbPersistence(t,r){return function SE(a,t){NE(a=Ur(a,_i));const r=us(a);if(r._uninitializedComponentsProvider)throw new Rt(tt.FAILED_PRECONDITION,"SDK cache is already specified.");Kn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=a._freezeSettings(),u=new du;return Nf(r,u,new Lg(u,o.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(t){return function PE(a){NE(a=Ur(a,_i));const t=us(a);if(t._uninitializedComponentsProvider)throw new Rt(tt.FAILED_PRECONDITION,"SDK cache is already specified.");Kn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings(),o=new du;return Nf(t,o,new Ug(o,r.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function oy(a){if(a._initialized&&!a._terminated)throw new Rt(tt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Yn;return a._queue.enqueueAndForgetEvenWhileRestricted((0,ie.A)(function*(){try{yield(r=(0,ie.A)(function*(u){if(!Qr.D())return Promise.resolve();const d=u+"main";yield Qr.delete(d)}),function o(u){return r.apply(this,arguments)})(xd(a._databaseId,a._persistenceKey)),t.resolve()}catch(r){t.reject(r)}var r})),t.promise}(t._delegate)}}class Fy{constructor(t,r,o){this._delegate=r,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},t instanceof Pi||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const r=this._delegate._getSettings();!t.merge&&r.host!==t.host&&Kn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},r),t)).merge,this._delegate._setSettings(t)}useEmulator(t,r,o={}){!function DE(a,t,r,o={}){var u;const d=(a=Ur(a,rl))._getSettings(),m=`${t}:${r}`;if("firestore.googleapis.com"!==d.host&&d.host!==m&&Kn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},d),{host:m,ssl:!1})),o.mockUserToken){let b,F;if("string"==typeof o.mockUserToken)b=o.mockUserToken,F=tn.MOCK_USER;else{b=(0,ce.Fy)(o.mockUserToken,null===(u=a._app)||void 0===u?void 0:u.options.projectId);const $=o.mockUserToken.sub||o.mockUserToken.user_id;if(!$)throw new Rt(tt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");F=new tn($)}a._authCredentials=new bn(new tr(b,F))}}(this._delegate,t,r,o)}enableNetwork(){return function RE(a){return function fu(a){return a.asyncQueue.enqueue((0,ie.A)(function*(){const t=yield $g(a),r=yield J_(a);return t.setNetworkEnabled(!0),function(u){const d=Nt(u);return d.L_.delete(0),Ld(d)}(r)}))}(us(a=Ur(a,_i)))}(this._delegate)}disableNetwork(){return function OE(a){return function nh(a){return a.asyncQueue.enqueue((0,ie.A)(function*(){const t=yield $g(a),r=yield J_(a);return t.setNetworkEnabled(!1),(o=(0,ie.A)(function*(d){const m=Nt(d);m.L_.add(0),yield Ud(m),m.q_.set("Offline")}),function u(d){return o.apply(this,arguments)})(r);var o}))}(us(a=Ur(a,_i)))}(this._delegate)}enablePersistence(t){let r=!1,o=!1;return t&&(r=!!t.synchronizeTabs,o=!!t.experimentalForceOwningTab,zg("synchronizeTabs",r,"experimentalForceOwningTab",o)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ME(a){return function(r){const o=new Yn;return r.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return function W0(a,t){return Kl.apply(this,arguments)}(yield Hg(r),o)})),o.promise}(us(a=Ur(a,_i)))}(this._delegate)}onSnapshotsInSync(t){return function Cy(a,t){return function X0(a,t){const r=new el(t);return a.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return u=yield Xl(a),d=r,Nt(u).Y_.add(d),void d.next();var u,d})),()=>{r.za(),a.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return u=yield Xl(a),d=r,void Nt(u).Y_.delete(d);var u,d}))}}(us(a=Ur(a,_i)),Qg(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Rt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new rd(this,ty(this._delegate,t))}catch(r){throw Oo(r,"collection()","Firestore.collection()")}}doc(t){try{return new Ia(this,Rf(this._delegate,t))}catch(r){throw Oo(r,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new qo(this,function AE(a,t){if(a=Ur(a,rl),nl("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Rt(tt.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ro(a,null,(o=t,new Gr(Rn.emptyPath(),o)));var o}(this._delegate,t))}catch(r){throw Oo(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function XE(a,t,r){a=Ur(a,_i);const o=Object.assign(Object.assign({},Py),r);return function(d){if(d.maxAttempts<1)throw new Rt(tt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(d,m,b){const F=new Yn;return d.asyncQueue.enqueueAndForget((0,ie.A)(function*(){const $=yield function Z_(a){return th(a).then(t=>t.datastore)}(d);new Y_(d.asyncQueue,$,b,m,F).ru()})),F.promise}(us(a),u=>t(new QE(a,u)),o)}(this._delegate,r=>t(new mh(this,r)))}batch(){return us(this._delegate),new Xf(new qf(this._delegate,t=>cl(this._delegate,t)))}loadBundle(t){return function ay(a,t){const r=us(a=Ur(a,_i)),o=new bE;return function ey(a,t,r,o){const u=function(m,b){let F;return F="string"==typeof m?_a().encode(m):m,ne=function(ne,ge){if(ne instanceof Uint8Array)return Zd(ne,void 0);if(ne instanceof ArrayBuffer)return Zd(new Uint8Array(ne),void 0);if(ne instanceof ReadableStream)return ne.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(F),new Q_(ne,b);var ne}(r,su(t));a.asyncQueue.enqueueAndForget((0,ie.A)(function*(){!function gE(a,t,r){const o=Nt(a);var u;(u=(0,ie.A)(function*(m,b,F){try{const $=yield b.getMetadata();if(yield function(Ht,en){const Qt=Nt(Ht),Vn=Ni(en.createTime);return Qt.persistence.runTransaction("hasNewerBundle","readonly",Xn=>Qt.Gr.getBundleMetadata(Xn,en.id)).then(Xn=>!!Xn&&Xn.createTime.compareTo(Vn)>=0)}(m.localStore,$))return yield b.close(),F._completeWith({taskState:"Success",documentsLoaded:(Ht=$).totalDocuments,bytesLoaded:Ht.totalBytes,totalDocuments:Ht.totalDocuments,totalBytes:Ht.totalBytes}),Promise.resolve(new Set);F._updateProgress(Gd($));const ne=new L_($,m.localStore,b.serializer);let ge=yield b.Ua();for(;ge;){const lt=yield ne.la(ge);lt&&F._updateProgress(lt),ge=yield b.Ua()}const Ne=yield ne.complete();return yield Oa(m,Ne.Ia,void 0),yield function(Ht,en){const Qt=Nt(Ht);return Qt.persistence.runTransaction("Save bundle","readwrite",Vn=>Qt.Gr.saveBundleMetadata(Vn,en))}(m.localStore,$),F._completeWith(Ne.progress),Promise.resolve(Ne.Pa)}catch($){return Kn("SyncEngine",`Loading bundle failed with ${$}`),F._failWith($),Promise.resolve(new Set)}var Ht}),function d(m,b,F){return u.apply(this,arguments)})(o,t,r).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Hg(a),u,o)}))}(r,a._databaseId,t,o),o}(this._delegate,t)}namedQuery(t){return function Z0(a,t){return function EE(a,t){return a.asyncQueue.enqueue((0,ie.A)(function*(){return function(o,u){const d=Nt(o);return d.persistence.runTransaction("Get named query","readonly",m=>d.Gr.getNamedQuery(m,u))}(yield tl(a),t)}))}(us(a=Ur(a,_i)),t).then(r=>r?new Ro(a,null,r.query):null)}(this._delegate,t).then(r=>r?new qo(this,r):null)}}class gh extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new ph(new gc(t))}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return Ia.forKey(r,this.firestore,null)}}class mh{constructor(t,r){this._firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}get(t){const r=Ya(t);return this._delegate.get(r).then(o=>new ul(this._firestore,new yc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,r.converter)))}set(t,r,o){const u=Ya(t);return o?(pm("Transaction.set",o),this._delegate.set(u,r,o)):this._delegate.set(u,r),this}update(t,r,o,...u){const d=Ya(t);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...u),this}delete(t){const r=Ya(t);return this._delegate.delete(r),this}}class Xf{constructor(t){this._delegate=t}set(t,r,o){const u=Ya(t);return o?(pm("WriteBatch.set",o),this._delegate.set(u,r,o)):this._delegate.set(u,r),this}update(t,r,o,...u){const d=Ya(t);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...u),this}delete(t){const r=Ya(t);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class nd{constructor(t,r,o){this._firestore=t,this._userDataWriter=r,this._delegate=o}fromFirestore(t,r){const o=new ed(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Ca(this._firestore,o),r??{})}toFirestore(t,r){return r?this._delegate.toFirestore(t,r):this._delegate.toFirestore(t)}static getInstance(t,r){const o=nd.INSTANCES;let u=o.get(t);u||(u=new WeakMap,o.set(t,u));let d=u.get(r);return d||(d=new nd(t,new gh(t),r),u.set(r,d)),d}}nd.INSTANCES=new WeakMap;class Ia{constructor(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}static forPath(t,r,o){if(t.length%2!=0)throw new Rt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Ia(r,new Xi(r._delegate,o,new Ce(t)))}static forKey(t,r,o){return new Ia(r,new Xi(r._delegate,o,t))}get id(){return this._delegate.id}get parent(){return new rd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new rd(this.firestore,ty(this._delegate,t))}catch(r){throw Oo(r,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,ce.Ku)(t))instanceof Xi&&ny(this._delegate,t)}set(t,r){r=pm("DocumentReference.set",r);try{return r?Ey(this._delegate,t,r):Ey(this._delegate,t)}catch(o){throw Oo(o,"setDoc()","DocumentReference.set()")}}update(t,r,...o){try{return 1===arguments.length?am(this._delegate,t):am(this._delegate,t,r,...o)}catch(u){throw Oo(u,"updateDoc()","DocumentReference.update()")}}delete(){return function zE(a){return cl(Ur(a.firestore,_i),[new Bs(a._key,xn.none())])}(this._delegate)}onSnapshot(...t){const r=mm(t),o=_h(t,u=>new ul(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Iy(this._delegate,r,o)}get(t){let r;return r="cache"===t?.source?function sm(a){a=Ur(a,Xi);const t=Ur(a.firestore,_i),r=us(t),o=new Uc(t);return function _E(a,t){const r=new Yn;return a.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return(o=(0,ie.A)(function*(d,m,b){try{const F=yield function(ne,ge){const Ne=Nt(ne);return Ne.persistence.runTransaction("read document","readonly",lt=>Ne.localDocuments.getDocument(lt,ge))}(d,m);F.isFoundDocument()?b.resolve(F):F.isNoDocument()?b.resolve(null):b.reject(new Rt(tt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(F){const $=au(F,`Failed to get document '${m} from cache`);b.reject($)}}),function u(d,m,b){return o.apply(this,arguments)})(yield tl(a),t,r);var o})),r.promise}(r,a._key).then(u=>new yc(t,o,a._key,u,new gu(null!==u&&u.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===t?.source?function hh(a){a=Ur(a,Xi);const t=Ur(a.firestore,_i);return yE(us(t),a._key,{source:"server"}).then(r=>vr(t,a,r))}(this._delegate):function dh(a){a=Ur(a,Xi);const t=Ur(a.firestore,_i);return yE(us(t),a._key).then(r=>vr(t,a,r))}(this._delegate),r.then(o=>new ul(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(t){return new Ia(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}function Oo(a,t,r){return a.message=a.message.replace(t,r),a}function mm(a){for(const t of a)if("object"==typeof t&&!Na(t))return t;return{}}function _h(a,t){var r,o;let u;return u=Na(a[0])?a[0]:Na(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:d=>{u.next&&u.next(t(d))},error:null===(r=u.error)||void 0===r?void 0:r.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class ul{constructor(t,r){this._firestore=t,this._delegate=r}get ref(){return new Ia(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,r){return this._delegate.get(t,r)}isEqual(t){return lh(this._delegate,t._delegate)}}class Ca extends ul{data(t){const r=this._delegate.data(t);return this._delegate._converter||function Zr(a,t){a||St()}(void 0!==r),r}}class qo{constructor(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}where(t,r,o){try{return new qo(this.firestore,Xa(this._delegate,function nm(a,t,r){const o=t,u=em("where",a);return ol._create(u,o,r)}(t,r,o)))}catch(u){throw Oo(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,r){try{return new qo(this.firestore,Xa(this._delegate,function rm(a,t="asc"){const r=t,o=em("orderBy",a);return jf._create(o,r)}(t,r)))}catch(o){throw Oo(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new qo(this.firestore,Xa(this._delegate,function BE(a){return TE("limit",a),al._create("limit",a,"F")}(t)))}catch(r){throw Oo(r,"limit()","Query.limit()")}}limitToLast(t){try{return new qo(this.firestore,Xa(this._delegate,function jE(a){return TE("limitToLast",a),al._create("limitToLast",a,"L")}(t)))}catch(r){throw Oo(r,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new qo(this.firestore,Xa(this._delegate,function $E(...a){return ah._create("startAt",a,!0)}(...t)))}catch(r){throw Oo(r,"startAt()","Query.startAt()")}}startAfter(...t){try{return new qo(this.firestore,Xa(this._delegate,function HE(...a){return ah._create("startAfter",a,!1)}(...t)))}catch(r){throw Oo(r,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new qo(this.firestore,Xa(this._delegate,function py(...a){return $f._create("endBefore",a,!1)}(...t)))}catch(r){throw Oo(r,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new qo(this.firestore,Xa(this._delegate,function ch(...a){return $f._create("endAt",a,!0)}(...t)))}catch(r){throw Oo(r,"endAt()","Query.endAt()")}}isEqual(t){return Of(this._delegate,t._delegate)}get(t){let r;return r="cache"===t?.source?function om(a){a=Ur(a,Ro);const t=Ur(a.firestore,_i),r=us(t),o=new Uc(t);return function q0(a,t){const r=new Yn;return a.asyncQueue.enqueueAndForget((0,ie.A)(function*(){return(o=(0,ie.A)(function*(d,m,b){try{const F=yield Gt(d,m,!0),$=new Eg(m,F.Ts),ne=$.ma(F.documents),ge=$.applyChanges(ne,!1);b.resolve(ge.snapshot)}catch(F){const $=au(F,`Failed to execute query '${m} against cache`);b.reject($)}}),function u(d,m,b){return o.apply(this,arguments)})(yield tl(a),t,r);var o})),r.promise}(r,a._query).then(u=>new vc(t,o,a,u))}(this._delegate):"server"===t?.source?function Wf(a){a=Ur(a,Ro);const t=Ur(a.firestore,_i),r=us(t),o=new Uc(t);return vE(r,a._query,{source:"server"}).then(u=>new vc(t,o,a,u))}(this._delegate):function vy(a){a=Ur(a,Ro);const t=Ur(a.firestore,_i),r=us(t),o=new Uc(t);return tm(a._query),vE(r,a._query).then(u=>new vc(t,o,a,u))}(this._delegate),r.then(o=>new yh(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...t){const r=mm(t),o=_h(t,u=>new yh(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Iy(this._delegate,r,o)}withConverter(t){return new qo(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}class oI{constructor(t,r){this._firestore=t,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Ca(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yh{constructor(t,r){this._firestore=t,this._delegate=r}get query(){return new qo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Ca(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(r=>new oI(this._firestore,r))}forEach(t,r){this._delegate.forEach(o=>{t.call(r,new Ca(this._firestore,o))})}isEqual(t){return lh(this._delegate,t._delegate)}}class rd extends qo{constructor(t,r){super(t,r),this.firestore=t,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Ia(this.firestore,t):null}doc(t){try{return new Ia(this.firestore,void 0===t?Rf(this._delegate):Rf(this._delegate,t))}catch(r){throw Oo(r,"doc()","CollectionReference.doc()")}}add(t){return function WE(a,t){const r=Ur(a.firestore,_i),o=Rf(a),u=_c(a.converter,t);return cl(r,[Yg(Lc(a.firestore),"addDoc",o._key,u,null!==a.converter,{}).toMutation(o._key,xn.exists(!1))]).then(()=>o)}(this._delegate,t).then(r=>new Ia(this.firestore,r))}isEqual(t){return ny(this._delegate,t._delegate)}withConverter(t){return new rd(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}function Ya(a){return Ur(a,Xi)}class Yf{constructor(...t){this._delegate=new Vc(...t)}static documentId(){return new Yf(Ve.keyField().canonicalString())}isEqual(t){return(t=(0,ce.Ku)(t))instanceof Vc&&this._delegate._internalPath.isEqual(t._internalPath)}}class xa{constructor(t){this._delegate=t}static serverTimestamp(){const t=function YE(){return new uy("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new xa(t)}static delete(){const t=function My(){return new Vf("deleteField")}();return t._methodName="FieldValue.delete",new xa(t)}static arrayUnion(...t){const r=function JE(...a){return new ly("arrayUnion",a)}(...t);return r._methodName="FieldValue.arrayUnion",new xa(r)}static arrayRemove(...t){const r=function ZE(...a){return new Jg("arrayRemove",a)}(...t);return r._methodName="FieldValue.arrayRemove",new xa(r)}static increment(t){const r=function eI(a){return new Yl("increment",a)}(t);return r._methodName="FieldValue.increment",new xa(r)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const vh={Firestore:Fy,GeoPoint:xf,Timestamp:Jt,Blob:ph,Transaction:mh,WriteBatch:Xf,DocumentReference:Ia,DocumentSnapshot:ul,Query:qo,QueryDocumentSnapshot:Ca,QuerySnapshot:yh,CollectionReference:rd,FieldPath:Yf,FieldValue:xa,setLogLevel:function Vy(a){!function Ln(a){Cn.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function Eh(a){(function _m(a,t){a.INTERNAL.registerComponent(new Ue.uA("firestore-compat",r=>{const o=r.getProvider("app-compat").getImmediate(),u=r.getProvider("firestore").getImmediate();return t(o,u)},"PUBLIC").setServiceProps(Object.assign({},vh)))})(a,(t,r)=>new Fy(t,r,new sI)),a.registerVersion("@firebase/firestore-compat","0.3.36")}(we.A);var Ly=k(7935);function By(a,t){return function Uy(a,t=fe.E){return new $e.c(r=>{let o;return null!=t?t.schedule(()=>{o=a.onSnapshot({includeMetadataChanges:!0},r)}):o=a.onSnapshot({includeMetadataChanges:!0},r),()=>{o?.()}})}(a,t)}function ym(a,t){return By(a,t).pipe((0,De.T)(r=>({payload:r,type:"query"})))}class jy{ref;afs;constructor(t,r){this.ref=t,this.afs=r}set(t,r){return this.ref.set(t,r)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,r){const o=this.ref.collection(t),{ref:u,query:d}=id(o,r);return new vm(u,d,this.afs)}snapshotChanges(){return function aI(a,t){return By(a,t).pipe((0,pe.Z)(void 0),nt(),(0,De.T)(r=>{const[o,u]=r;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(re.U0)}valueChanges(t={}){return this.snapshotChanges().pipe((0,De.T)(({payload:r})=>t.idField?{...r.data(),[t.idField]:r.id}:r.data()))}get(t){return(0,Me.H)(this.ref.get(t)).pipe(re.U0)}}function Ih(a,t){return ym(a,t).pipe((0,pe.Z)(void 0),nt(),(0,De.T)(r=>{const[o,u]=r,d=u.payload.docChanges(),m=d.map(b=>({type:b.type,payload:b}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((b,F)=>{const $=d.find(ge=>ge.doc.ref.isEqual(b.ref)),ne=o?.payload.docs.find(ge=>ge.ref.isEqual(b.ref));$&&JSON.stringify($.doc.metadata)===JSON.stringify(b.metadata)||!$&&ne&&JSON.stringify(ne.metadata)===JSON.stringify(b.metadata)||m.push({type:"modified",payload:{oldIndex:F,newIndex:F,type:"modified",doc:b}})}),m}))}function Ch(a,t,r){return Ih(a,r).pipe((0,ct.S)((o,u)=>function cI(a,t,r){return t.forEach(o=>{r.indexOf(o.type)>-1&&(a=function uI(a,t){switch(t.type){case"added":if(!a[t.newIndex]||!a[t.newIndex].doc.ref.isEqual(t.doc.ref))return $y(a,t.newIndex,0,t);break;case"modified":if(null==a[t.oldIndex]||a[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const r=a.slice();return r.splice(t.oldIndex,1),r.splice(t.newIndex,0,t),r}return $y(a,t.newIndex,1,t)}break;case"removed":if(a[t.oldIndex]&&a[t.oldIndex].doc.ref.isEqual(t.doc.ref))return $y(a,t.oldIndex,1)}return a}(a,o))}),a}(o,u.map(d=>d.payload),t),[]),function ot(a,t=at.D){return a=a??At,(0,Ge.N)((r,o)=>{let u,d=!0;r.subscribe((0,it._)(o,m=>{const b=t(m);(d||!a(u,b))&&(d=!1,u=b,o.next(m))}))})}(),(0,De.T)(o=>o.map(u=>({type:u.type,payload:u}))))}function $y(a,t,r,...o){const u=a.slice();return u.splice(t,r,...o),u}function Hy(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class vm{ref;query;afs;constructor(t,r,o){this.ref=t,this.query=r,this.afs=o}stateChanges(t){let r=Ih(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(r=r.pipe((0,De.T)(o=>o.filter(u=>t.indexOf(u.type)>-1)))),r.pipe((0,pe.Z)(void 0),nt(),(0,$t.p)(([o,u])=>u.length>0||!o),(0,De.T)(([,o])=>o),re.U0)}auditTrail(t){return this.stateChanges(t).pipe((0,ct.S)((r,o)=>[...r,...o],[]))}snapshotChanges(t){const r=Hy(t);return Ch(this.query,r,this.afs.schedulers.outsideAngular).pipe(re.U0)}valueChanges(t={}){return ym(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.T)(r=>r.payload.docs.map(o=>t.idField?{...o.data(),[t.idField]:o.id}:o.data())),re.U0)}get(t){return(0,Me.H)(this.query.get(t)).pipe(re.U0)}add(t){return this.ref.add(t)}doc(t){return new jy(this.ref.doc(t),this.afs)}}class lI{query;afs;constructor(t,r){this.query=t,this.afs=r}stateChanges(t){return t&&0!==t.length?Ih(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.T)(r=>r.filter(o=>t.indexOf(o.type)>-1)),(0,$t.p)(r=>r.length>0),re.U0):Ih(this.query,this.afs.schedulers.outsideAngular).pipe(re.U0)}auditTrail(t){return this.stateChanges(t).pipe((0,ct.S)((r,o)=>[...r,...o],[]))}snapshotChanges(t){const r=Hy(t);return Ch(this.query,r,this.afs.schedulers.outsideAngular).pipe(re.U0)}valueChanges(t={}){return ym(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.T)(o=>o.payload.docs.map(u=>t.idField?{[t.idField]:u.id,...u.data()}:u.data())),re.U0)}get(t){return(0,Me.H)(this.query.get(t)).pipe(re.U0)}}const Gy=new v.nKC("angularfire2.enableFirestorePersistence"),Em=new v.nKC("angularfire2.firestore.persistenceSettings"),Im=new v.nKC("angularfire2.firestore.settings"),zy=new v.nKC("angularfire2.firestore.use-emulator");function id(a,t=(r=>r)){return{query:t(a),ref:a}}let wh=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,o,u,d,m,b,F,$,ne,ge,Ne,lt,Ht,en,Qt,Vn,Xn){this.schedulers=F;const kn=(0,Se.iB)(r,b,o),cr=ne;ge&&(0,R.gF)(kn,b,Ne,Ht,en,Qt,lt,Vn),[this.firestore,this.persistenceEnabled$]=(0,Se.BM)(`${kn.name}.firestore`,"AngularFirestore",kn.name,()=>{const Br=b.runOutsideAngular(()=>kn.firestore());if(d&&Br.settings(d),cr&&Br.useEmulator(...cr),u&&!(0,_.Vy)(m)){const br=()=>{try{return(0,Me.H)(Br.enablePersistence($||void 0).then(()=>!0,()=>!1))}catch(et){return typeof console<"u"&&console.warn(et),(0,ye.of)(!1)}};return[Br,b.runOutsideAngular(br)]}return[Br,(0,ye.of)(!1)]},[d,cr,u])}collection(r,o){let u;u="string"==typeof r?this.firestore.collection(r):r;const{ref:d,query:m}=id(u,o),b=this.schedulers.ngZone.run(()=>d);return new vm(b,m,this)}collectionGroup(r,o){const u=o||(m=>m),d=this.firestore.collectionGroup(r);return new lI(u(d),this)}doc(r){let o;o="string"==typeof r?this.firestore.doc(r):r;const u=this.schedulers.ngZone.run(()=>o);return new jy(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||a)(v.KVO(Se.rx),v.KVO(Se.uP,8),v.KVO(Gy,8),v.KVO(Im,8),v.KVO(v.Agw),v.KVO(v.SKi),v.KVO(re.u0),v.KVO(Em,8),v.KVO(zy,8),v.KVO(R.DS,8),v.KVO(R.CP,8),v.KVO(R.yy,8),v.KVO(R.ZP,8),v.KVO(R.$z,8),v.KVO(R.AU,8),v.KVO(R.UB,8),v.KVO(re.Jv,8))};static \u0275prov=v.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})(),Th=(()=>{class a{constructor(){Ly.A.registerVersion("angularfire",re.xv.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:Gy,useValue:!0},{provide:Em,useValue:r}]}}static \u0275fac=function(o){return new(o||a)};static \u0275mod=v.$C({type:a});static \u0275inj=v.G2t({providers:[wh]})}return a})();var dI=k(7231),Cm=k(4454),ll=k(9969),Jf=k(6569);function wm(a,t){1&a&&(v.j41(0,"span",13),v.EFF(1,"invalid Email format"),v.k0s())}function hI(a,t){1&a&&(v.j41(0,"span",13),v.EFF(1,"Email is required"),v.k0s())}function lC(a,t){if(1&a){const r=v.RV6();v.j41(0,"div",14)(1,"img",15),v.bIt("click",function(){v.eBV(r);const u=v.XpG();return v.Njj(u.togglePasswordVisibility("password"))}),v.k0s()()}}function dC(a,t){if(1&a){const r=v.RV6();v.j41(0,"div",14)(1,"img",16),v.bIt("click",function(){v.eBV(r);const u=v.XpG();return v.Njj(u.togglePasswordVisibility("password"))}),v.k0s()()}}function fI(a,t){1&a&&(v.j41(0,"span",13),v.EFF(1," Password is required "),v.k0s())}function pI(a,t){if(1&a){const r=v.RV6();v.j41(0,"div",14)(1,"img",15),v.bIt("click",function(){v.eBV(r);const u=v.XpG(2);return v.Njj(u.togglePasswordVisibility("confirmPassword"))}),v.k0s()()}}function hC(a,t){if(1&a){const r=v.RV6();v.j41(0,"div",14)(1,"img",16),v.bIt("click",function(){v.eBV(r);const u=v.XpG(2);return v.Njj(u.togglePasswordVisibility("confirmPassword"))}),v.k0s()()}}function gI(a,t){1&a&&(v.j41(0,"span",13),v.EFF(1," Confirm password is required "),v.k0s())}function fC(a,t){if(1&a&&(v.j41(0,"div",4)(1,"div",7),v.nrm(2,"input",17),v.DNE(3,pI,2,0,"div",9)(4,hC,2,0,"div",9),v.k0s(),v.DNE(5,gI,2,0,"span",6),v.k0s()),2&a){let r;const o=v.XpG();v.R7$(2),v.Y8G("type",o.showConfirmPassword),v.R7$(),v.Y8G("ngIf","password"!==o.showConfirmPassword),v.R7$(),v.Y8G("ngIf","password"===o.showConfirmPassword),v.R7$(),v.Y8G("ngIf",(null==(r=o.form.get("confirmPassword"))?null:r.hasError("required"))&&(null==(r=o.form.get("confirmPassword"))?null:r.touched))}}function mI(a,t){if(1&a){const r=v.RV6();v.j41(0,"button",18),v.bIt("click",function(){v.eBV(r);const u=v.XpG();return v.Njj(u.googleLogin())}),v.EFF(1," Sign in with Google "),v.nrm(2,"img",19),v.k0s()}}function _I(a,t){if(1&a){const r=v.RV6();v.j41(0,"button",18),v.bIt("click",function(){v.eBV(r);const u=v.XpG();return v.Njj(u.emailAndPasswordLogin())}),v.EFF(1," Sign in "),v.k0s()}}function yI(a,t){if(1&a){const r=v.RV6();v.j41(0,"button",18),v.bIt("click",function(){v.eBV(r);const u=v.XpG();return v.Njj(u.registration())}),v.EFF(1," Register "),v.k0s()}}const Tm=a=>{const t=a.get("password")?.value,r=a.get("confirmPassword")?.value;return t&&r&&t!==r?{passwordsMismatch:!0}:null},Dm=[{path:"",component:(()=>{class a{constructor(r,o){this.fb=r,this.logInService=o,this.selected=!0,this.showPassword="password",this.showConfirmPassword="password",this.form=this.fb.group({email:["",[T.k0.required,T.k0.email]],password:["",T.k0.required],confirmPassword:["",T.k0.required]},{validators:Tm})}ngOnInit(){}select(){this.selected=!this.selected,this.clearInputs()}togglePasswordVisibility(r){"password"===r?this.showPassword="password"===this.showPassword?"":"password":"confirmPassword"===r&&(this.showConfirmPassword="password"===this.showConfirmPassword?"":"password")}googleLogin(){this.logInService.loginWithGoogle()}emailAndPasswordLogin(){const r=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.loginWithEmailAndPassword(r,o)}registration(){if(this.form.hasError("passwordsMismatch"))return console.log("Password mismatch detected"),void alert("Password and confirm password do not match");let r=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.registration(r,o),this.clearInputs(),this.selected=!0}clearInputs(){this.form.get("email")?.setValue(""),this.form.get("password")?.setValue(""),this.form.get("confirmPassword")?.setValue(""),this.form.get("email")?.markAsUntouched(),this.form.get("password")?.markAsUntouched(),this.form.get("confirmPassword")?.markAsUntouched()}static#e=this.\u0275fac=function(o){return new(o||a)(v.rXU(T.ok),v.rXU(Jf.p))};static#t=this.\u0275cmp=v.VBU({type:a,selectors:[["app-login"]],decls:24,vars:14,consts:[[1,"loginContainer"],[1,"container"],[3,"click","ngClass"],[3,"formGroup"],[1,"inputs"],["formControlName","email","placeholder","Email ex:sabadmin@gmail.com"],["class","error-message",4,"ngIf"],[1,"password-input"],["formControlName","password","placeholder","Password ex:123123123",3,"type"],["class","pass-img",4,"ngIf"],["class","inputs",4,"ngIf"],[3,"click",4,"ngIf"],["routerLink","/products"],[1,"error-message"],[1,"pass-img"],["src","assets/show.png","alt","img",3,"click"],["src","assets/hidden.png","alt","img",3,"click"],["formControlName","confirmPassword","placeholder","Confirm Password",3,"type"],[3,"click"],["src","assets/google.png","alt","img"]],template:function(o,u){if(1&o&&(v.j41(0,"div",0)(1,"div",1)(2,"div")(3,"p",2),v.bIt("click",function(){return u.select()}),v.EFF(4,"LOG IN"),v.k0s(),v.j41(5,"p",2),v.bIt("click",function(){return u.select()}),v.EFF(6,"SIGN UP"),v.k0s()(),v.j41(7,"form",3)(8,"div",4),v.nrm(9,"input",5),v.DNE(10,wm,2,0,"span",6)(11,hI,2,0,"span",6),v.k0s(),v.j41(12,"div",4)(13,"div",7),v.nrm(14,"input",8),v.DNE(15,lC,2,0,"div",9)(16,dC,2,0,"div",9),v.k0s(),v.DNE(17,fI,2,0,"span",6),v.k0s(),v.DNE(18,fC,6,4,"div",10)(19,mI,3,0,"button",11)(20,_I,2,0,"button",11)(21,yI,2,0,"button",11),v.j41(22,"button",12),v.EFF(23,"Guest Mode"),v.k0s()()()()),2&o){let d,m,b;v.R7$(3),v.Y8G("ngClass",u.selected?"selected":""),v.R7$(2),v.Y8G("ngClass",u.selected?"":"selected"),v.R7$(2),v.Y8G("formGroup",u.form)("@toggleState",u.selected?"login":"signup"),v.R7$(3),v.Y8G("ngIf",null==(d=u.form.get("email"))?null:d.hasError("email")),v.R7$(),v.Y8G("ngIf",(null==(m=u.form.get("email"))?null:m.hasError("required"))&&(null==(m=u.form.get("email"))?null:m.touched)),v.R7$(3),v.Y8G("type",u.showPassword),v.R7$(),v.Y8G("ngIf","password"!==u.showPassword),v.R7$(),v.Y8G("ngIf","password"===u.showPassword),v.R7$(),v.Y8G("ngIf",(null==(b=u.form.get("password"))?null:b.hasError("required"))&&(null==(b=u.form.get("password"))?null:b.touched)),v.R7$(),v.Y8G("ngIf",!u.selected),v.R7$(),v.Y8G("ngIf",u.selected),v.R7$(),v.Y8G("ngIf",u.selected),v.R7$(),v.Y8G("ngIf",!u.selected)}},dependencies:[_.YU,_.bT,T.qT,T.me,T.BC,T.cb,T.j4,T.JD,Cm.Wk],styles:[".loginContainer[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:400px;height:400px;background-color:#62dfdf;border-radius:4px;background-image:url(background.05b7e6a7f70c58a5.webp);background-size:cover;transition:transform .3s ease-in-out}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;gap:20px;padding:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{cursor:pointer;font-size:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]{position:relative}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:6px;right:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{width:100%;height:70%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:200px;height:30px;border-radius:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#13afc7;color:#fff;display:flex;justify-content:center;align-items:center;cursor:pointer}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:5px}.selected[_ngcontent-%COMP%]{color:#fff;border-bottom:1px solid white}.error-message[_ngcontent-%COMP%]{font-size:14px;color:red}.button-disabled[_ngcontent-%COMP%]{background-color:#8ac9d3}"],data:{animation:[(0,ll.hZ)("toggleState",[(0,ll.wk)("login",(0,ll.iF)({transform:"translateX(0)"})),(0,ll.wk)("signup",(0,ll.iF)({transform:"translateY(-10%)"})),(0,ll.kY)("login <=> signup",[(0,ll.i0)("0.4s ease-in-out")])])]},changeDetection:0})}return a})()}];let ep=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=v.$C({type:a});static#n=this.\u0275inj=v.G2t({imports:[Cm.iI.forChild(Dm),Cm.iI]})}return a})();var Wy=k(1626);const Dh={apiKey:"AIzaSyCbQiRFo1MKF_WTEIwSMYg4rFL0CkKdTDI",authDomain:"exercise-app-9b873.firebaseapp.com",databaseURL:"https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app",projectId:"exercise-app-9b873",storageBucket:"exercise-app-9b873.appspot.com",messagingSenderId:"146569895533",appId:"1:146569895533:web:cfb4bca172cc29ee50a964",measurementId:"G-MW950TMVK5"};let Ky=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=v.$C({type:a});static#n=this.\u0275inj=v.G2t({providers:[dI.HF],imports:[_.MD,T.YN,T.X1,Th,R.X8,ep,Wy.q1,Se.bf.initializeApp(Dh)]})}return a})()},6569:(nn,We,k)=>{k.d(We,{p:()=>Ge});var _=k(7231),T=k(4412),R=k(6354),v=k(9437),re=k(7673),Se=k(4438),fe=k(1182),$e=k(1626),Me=k(4454),ye=k(2906),pe=k(1996);let Ge=(()=>{class it{constructor(De,ct,at,ot,At){this.auth=De,this.http=ct,this.router=at,this.cartService=ot,this.sng=At,this.loggedUser=new T.t(void 0),this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app/musicShopUsers",this.isAdmin=new T.t(!1),this.likedProducts=new T.t([])}loginWithGoogle(){this.auth.signInWithPopup(new _.HF).then(De=>{localStorage.setItem("token",JSON.stringify(De.user?.uid)),this.findUser(De.user?.email).subscribe(ct=>{void 0===ct?this.addUserTodatabase(De.user?.email,De.user?.photoURL):this.findUser(De.user?.email).subscribe(at=>{this.loggedUser.next(at),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(at))})})},De=>{alert(De.mesasage)})}loginWithEmailAndPassword(De,ct){this.auth.signInWithEmailAndPassword(De,ct).then(at=>{this.findUser(at.user?.email).subscribe(ot=>{this.loggedUser.next(ot),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(ot)),ot?.user.likedProducts&&(this.sng.prodId.next(ot?.user.likedProducts),localStorage.setItem("prodKeyAndType",JSON.stringify(ot?.user.likedProducts)))})},at=>{alert(at.message),console.log(at.mesasage)})}registration(De,ct){this.auth.createUserWithEmailAndPassword(De,ct).then(at=>{this.addUserTodatabase(at.user?.email)},at=>{alert(at.message)})}addUserTodatabase(De,ct){this.http.post(`${this.url}.json`,{email:De,isAdmin:!1,photoUrl:ct,address:"",likedProducts:[{key:"none",category:"other"}],purchasedProducts:[{email:De,userId:De,date:new Date,totalPrice:0,products:[{quantity:-1,product:{key:"unknown",product:{category:"other",isTopProduct:{isTop:!1,date:new Date(1990)},model:"none",price:-1,quantity:-1,discount:-1,photoUrl:["none"]}}}]}]}).subscribe(()=>{console.log("User created succesfully")},ot=>{alert(ot.message)})}findUser(De){return this.http.get(`${this.url}.json`).pipe((0,R.T)(ct=>{let at,ot="";if(Object.entries(ct).find(([At,$t])=>{$t.email===De&&(at=$t,ot=At)}),ot&&at)return{user:at,key:ot}}),(0,v.W)(ct=>(console.error(ct),(0,re.of)(void 0))))}findUserById(De){return this.http.get(`${this.url}/${De}.json`).pipe((0,R.T)(ct=>ct.email))}checkIfLoggedIn(){if(localStorage.getItem("currentUser")){let De=JSON.parse(localStorage.getItem("currentUser"));this.loggedUser.next(De),localStorage.getItem("cart")&&this.cartService.cart.next(JSON.parse(localStorage.getItem("cart"))),localStorage.getItem("prodKeyAndType")&&this.sng.prodId.next(JSON.parse(localStorage.getItem("prodKeyAndType")))}}logOut(){localStorage.removeItem("currentUser"),localStorage.removeItem("cart"),this.loggedUser.next(void 0),this.cartService.cart.next([])}static#e=this.\u0275fac=function(ct){return new(ct||it)(Se.KVO(fe.DS),Se.KVO($e.Qq),Se.KVO(Me.Ix),Se.KVO(ye.m),Se.KVO(pe.f))};static#t=this.\u0275prov=Se.jDH({token:it,factory:it.\u0275fac,providedIn:"root"})}return it})()},6483:(nn,We,k)=>{k.d(We,{P:()=>T});var _=k(4438);let T=(()=>{class R{transform(re){return re.charAt(0).toUpperCase()+re.substring(1,re.length)}static#e=this.\u0275fac=function(Se){return new(Se||R)};static#t=this.\u0275pipe=_.EJ8({name:"upperCase",type:R,pure:!0,standalone:!0})}return R})()},6552:(nn,We,k)=>{k.d(We,{u:()=>re});var _=k(4412),T=k(4438),R=k(6569);function v(Se,fe){1&Se&&(T.j41(0,"div",2),T.nrm(1,"div",3),T.j41(2,"p"),T.EFF(3,"Loading..."),T.k0s()())}let re=(()=>{class Se{constructor($e){this.authService=$e,this.isEditing="",this.loadingSubject=new _.t(!0),this.loading$=this.loadingSubject.asObservable()}ngOnInit(){this.authService.checkIfLoggedIn()}loadingValue($e){this.loadingSubject.next(!$e)}static#e=this.\u0275fac=function(Me){return new(Me||Se)(T.rXU(R.p))};static#t=this.\u0275cmp=T.VBU({type:Se,selectors:[["app-product-page"]],decls:11,vars:7,consts:[["class","loading-container",4,"ngIf"],[3,"productsImported","category"],[1,"loading-container"],[1,"loader"]],template:function(Me,ye){1&Me&&(T.nrm(0,"app-header")(1,"app-top-products"),T.j41(2,"h1"),T.EFF(3,"Our Products"),T.k0s(),T.DNE(4,v,4,0,"div",0),T.nI1(5,"async"),T.j41(6,"app-product-page-single-category",1),T.bIt("productsImported",function(Ge){return ye.loadingValue(Ge)}),T.k0s(),T.j41(7,"app-product-page-single-category",1),T.bIt("productsImported",function(Ge){return ye.loadingValue(Ge)}),T.k0s(),T.j41(8,"app-product-page-single-category",1),T.bIt("productsImported",function(Ge){return ye.loadingValue(Ge)}),T.k0s(),T.j41(9,"app-product-page-single-category",1),T.bIt("productsImported",function(Ge){return ye.loadingValue(Ge)}),T.k0s(),T.nrm(10,"app-footer")),2&Me&&(T.R7$(4),T.Y8G("ngIf",T.bMT(5,5,ye.loading$)),T.R7$(2),T.Y8G("category","guitar"),T.R7$(),T.Y8G("category","drum"),T.R7$(),T.Y8G("category","piano"),T.R7$(),T.Y8G("category","bass"))},styles:["h1[_ngcontent-%COMP%]{display:flex;justify-content:center}.loading-container[_ngcontent-%COMP%]{margin:0 auto;width:300px;height:300px;display:flex;flex-direction:column;justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%] > .loader[_ngcontent-%COMP%]{width:60px;aspect-ratio:1;border-radius:50%;border:8px solid lightblue;border-right-color:orange;animation:_ngcontent-%COMP%_l2 1s infinite linear}@keyframes _ngcontent-%COMP%_l2{to{transform:rotate(1turn)}}"],changeDetection:0})}return Se})()},8569:(nn,We,k)=>{k.r(We),k.d(We,{ProductPageModule:()=>un});var _=k(177),T=k(6552),R=k(4454),v=k(4438);const re=[{path:"",component:T.u}];let Se=(()=>{class jt{static#e=this.\u0275fac=function(ut){return new(ut||jt)};static#t=this.\u0275mod=v.$C({type:jt});static#n=this.\u0275inj=v.G2t({imports:[R.iI.forChild(re),R.iI]})}return jt})();var fe=k(3236),$e=k(1985),Me=k(9470);var it=k(4390);function nt(jt,ln){1&jt&&(v.j41(0,"div",5),v.nrm(1,"div",6),v.j41(2,"p"),v.EFF(3,"Loading..."),v.k0s()())}function De(jt,ln){if(1&jt){const Lt=v.RV6();v.j41(0,"div",8),v.bIt("click",function(){const rn=v.eBV(Lt).index,Re=v.XpG(2);return v.Njj(Re.changeIndex(rn))}),v.k0s()}if(2&jt){const Lt=ln.index,ut=v.XpG(2);v.Y8G("ngClass",ut.index===Lt?"highlight":"")}}function ct(jt,ln){if(1&jt&&(v.j41(0,"div"),v.DNE(1,De,1,1,"div",7),v.k0s()),2&jt){const Lt=v.XpG();v.R7$(),v.Y8G("ngForOf",Lt.imgUrls)}}function at(jt,ln){if(1&jt){const Lt=v.RV6();v.j41(0,"div",9)(1,"img",10),v.bIt("click",function(){v.eBV(Lt);const rn=v.XpG();return v.Njj(rn.changeImgDown())}),v.k0s(),v.j41(2,"img",11),v.bIt("click",function(){v.eBV(Lt);const rn=v.XpG();return v.Njj(rn.changeImgUp())}),v.k0s()()}}function ot(jt,ln){if(1&jt&&(v.j41(0,"div",12),v.nrm(1,"img",13),v.k0s()),2&jt){const Lt=v.XpG();v.R7$(),v.Y8G("src",Lt.img,v.B4B)}}let At=(()=>{class jt{constructor(Lt,ut){this.cdr=Lt,this.dataShareService=ut,this.index=0,this.imgUrls=[],this.img="",this.key="",this.loading=!0}ngOnInit(){this.dataShareService.getTypeOfProduct("guitar"),this.getTopProducts(),this.dataShareService.topProductUpdated$.subscribe(Lt=>{Lt&&("add"===Lt.operation?Lt.img&&this.imgUrls.push({img:Lt.img,key:Lt.key}):this.imgUrls=this.imgUrls.filter(ut=>ut.key!==Lt.key),this.cdr.detectChanges())})}getTopProducts(){this.dataShareService.topProducts.subscribe(Lt=>{Lt.forEach(ut=>{this.imgUrls.push({key:ut.key,img:ut.product.photoUrl[0]})}),this.imgUrls.length>0&&(this.img=this.imgUrls[0].img,this.key=this.imgUrls[0].key,this.loading=!1,this.startTimeChangeInterval(),this.cdr.detectChanges())})}startTimeChangeInterval(){this.intervalSubscription=function Ge(jt=0,ln=fe.E){return jt<0&&(jt=0),function pe(jt=0,ln,Lt=fe.b){let ut=-1;return null!=ln&&((0,Me.m)(ln)?Lt=ln:ut=ln),new $e.c(rn=>{let Re=function ye(jt){return jt instanceof Date&&!isNaN(jt)}(jt)?+jt-Lt.now():jt;Re<0&&(Re=0);let qe=0;return Lt.schedule(function(){rn.closed||(rn.next(qe++),0<=ut?this.schedule(void 0,ut):rn.complete())},Re)})}(jt,jt,ln)}(4e3).subscribe(()=>{this.changeImgUp(),this.cdr.detectChanges()})}changeImgUp(){this.index===this.imgUrls.length-1?(this.index=0,this.img=this.imgUrls[this.index].img,this.key=this.imgUrls[this.index].key):(this.img=this.imgUrls[this.index+1].img,this.index++),this.clearInterval()}changeImgDown(){0===this.index?(this.index=this.imgUrls.length-1,this.img=this.imgUrls[this.index].img):(this.img=this.imgUrls[this.index-1].img,this.index--),this.clearInterval()}changeIndex(Lt){this.index=Lt,this.img=this.imgUrls[Lt].img,this.key=this.imgUrls[Lt].key,this.clearInterval()}clearInterval(){this.intervalSubscription&&this.intervalSubscription?.unsubscribe(),this.startTimeChangeInterval()}static#e=this.\u0275fac=function(ut){return new(ut||jt)(v.rXU(v.gRc),v.rXU(it.L))};static#t=this.\u0275cmp=v.VBU({type:jt,selectors:[["app-top-products"]],decls:6,vars:4,consts:[[1,"topProducts-container"],["class","loading-container",4,"ngIf"],[4,"ngIf"],["class","arrows",4,"ngIf"],["class","images",4,"ngIf"],[1,"loading-container"],[1,"loader"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"click","ngClass"],[1,"arrows"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"images"],["alt","img",3,"src"]],template:function(ut,rn){1&ut&&(v.j41(0,"div",0),v.DNE(1,nt,4,0,"div",1),v.j41(2,"div"),v.DNE(3,ct,2,1,"div",2)(4,at,3,0,"div",3),v.k0s(),v.DNE(5,ot,2,1,"div",4),v.k0s()),2&ut&&(v.R7$(),v.Y8G("ngIf",rn.loading),v.R7$(2),v.Y8G("ngIf",!rn.loading),v.R7$(),v.Y8G("ngIf",!rn.loading&&rn.imgUrls.length>0),v.R7$(),v.Y8G("ngIf",!rn.loading))},dependencies:[_.YU,_.Sq,_.bT],styles:[".topProducts-container[_ngcontent-%COMP%]{background-color:#54cbb7;width:100%;height:550px;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0 auto 100px;gap:20px}.topProducts-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{margin:0 auto;width:60px;height:60px;display:flex;flex-direction:column;justify-content:center;align-items:center}.topProducts-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%] > .loader[_ngcontent-%COMP%]{width:20px;aspect-ratio:1;border-radius:50%;border:8px solid lightblue;border-right-color:orange;animation:_ngcontent-%COMP%_l2 1s infinite linear}@keyframes _ngcontent-%COMP%_l2{to{transform:rotate(1turn)}}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;flex-direction:column;align-items:center;gap:10px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child{display:flex;justify-content:center;gap:10px;width:100%}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]{width:10px;height:10px;border:.4px solid #ffc107;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]{display:flex}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:400px;height:300px}.highlight[_ngcontent-%COMP%]{background-color:#ffc107}"],changeDetection:0})}return jt})();var $t=k(2152),ae=k(708),we=k(3227),ie=k(9156),je=k(3550),Ue=k(5435);function Oe(jt,ln){if(1&jt){const Lt=v.RV6();v.j41(0,"app-card",7),v.bIt("editEvent",function(rn){v.eBV(Lt);const Re=v.XpG(3);return v.Njj(Re.onFormSubmitted(rn))})("removeEvent",function(rn){v.eBV(Lt);const Re=v.XpG(3);return v.Njj(Re.removeHandler(rn))}),v.k0s()}if(2&jt){const Lt=ln.$implicit;v.Y8G("showSpecificContent",!0)("product",Lt)}}function ce(jt,ln){if(1&jt&&(v.j41(0,"div",5),v.DNE(1,Oe,1,2,"app-card",6),v.nI1(2,"slice"),v.k0s()),2&jt){const Lt=v.XpG(2);v.R7$(),v.Y8G("ngForOf",v.brH(2,1,Lt.productsArray,Lt.sliceStart,Lt.SliceEnd))}}function xe(jt,ln){if(1&jt){const Lt=v.RV6();v.j41(0,"div",1)(1,"div")(2,"h2"),v.EFF(3),v.k0s(),v.j41(4,"div")(5,"img",2),v.bIt("click",function(){v.eBV(Lt);const rn=v.XpG();return v.Njj(rn.shiftRight())}),v.k0s(),v.j41(6,"img",3),v.bIt("click",function(){v.eBV(Lt);const rn=v.XpG();return v.Njj(rn.shiftLeft())}),v.k0s()()(),v.DNE(7,ce,3,5,"div",4),v.k0s()}if(2&jt){const Lt=v.XpG();v.R7$(3),v.SpI("",Lt.modifyCatName(),":"),v.R7$(4),v.Y8G("ngIf",Lt.productsArray.length>0)}}let xt=(()=>{class jt{constructor(Lt,ut,rn){this.sharedService=Lt,this.cd=ut,this.dataShareService=rn,this.productsArray=[],this.productsImported=new v.bkB(!0),this.loading=!0,this.sliceStart=0,this.SliceEnd=6,this.length=0}ngOnInit(){this.category&&this.dataShareService.getData(this.category).subscribe(Lt=>{this.productsArray=Lt,this.length=Lt.length,this.loading=!1,this.productsImported.emit(!0),this.cd.detectChanges()})}shiftLeft(){this.SliceEnd<this.length&&(this.sliceStart+=1,this.SliceEnd+=1)}shiftRight(){this.sliceStart>0&&(this.sliceStart-=1,this.SliceEnd-=1)}onFormSubmitted(Lt){this.sharedService.editProduct(Lt.form,Lt.prodId,Lt.prodCategory).subscribe(()=>{Lt.prodCategory===this.category&&this.sharedService.updateProductArray(Lt.form,this.productsArray,Lt.prodId),this.cd.detectChanges()})}removeHandler(Lt){this.productsArray=this.productsArray.filter(ut=>ut.key!==Lt.prodId),this.cd.detectChanges()}modifyCatName(){return this.category?this.category.charAt(0).toUpperCase()+this.category.substring(1,this.category.length)+"s":this.category}static#e=this.\u0275fac=function(ut){return new(ut||jt)(v.rXU(Ue.m),v.rXU(v.gRc),v.rXU(it.L))};static#t=this.\u0275cmp=v.VBU({type:jt,selectors:[["app-product-page-single-category"]],inputs:{category:"category"},outputs:{productsImported:"productsImported"},standalone:!0,features:[v.aNF],decls:1,vars:1,consts:[["class","products-container",4,"ngIf"],[1,"products-container"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],["class","products",4,"ngIf"],[1,"products"],[3,"showSpecificContent","product","editEvent","removeEvent",4,"ngFor","ngForOf"],[3,"editEvent","removeEvent","showSpecificContent","product"]],template:function(ut,rn){1&ut&&v.DNE(0,xe,8,2,"div",0),2&ut&&v.Y8G("ngIf",!rn.loading)},dependencies:[_.MD,_.Sq,_.bT,_.P9,je.i],styles:[".products-container[_ngcontent-%COMP%]{padding:60px}.products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;display:flex;justify-content:space-between}.products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;cursor:pointer}.products-container[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{display:flex;gap:20px}"]})}return jt})(),un=(()=>{class jt{static#e=this.\u0275fac=function(ut){return new(ut||jt)};static#t=this.\u0275mod=v.$C({type:jt});static#n=this.\u0275inj=v.G2t({imports:[_.MD,Se,ae.n,$t.l,we.K,R.iI,ie.B,je.i,xt]})}return jt})();v.wjB(T.u,[_.bT,ae.n,$t.l,xt,At],[_.Jj])},1343:(nn,We,k)=>{k.r(We),k.d(We,{ProfileModuleModule:()=>we});var _=k(177),T=k(4454),R=k(9417),v=k(6697),re=k(4438),Se=k(6569),fe=k(5435),$e=k(1996),Me=k(2152),ye=k(708),pe=k(3550);function Ge(ie,je){if(1&ie){const Ue=re.RV6();re.j41(0,"button",5),re.bIt("click",function(){re.eBV(Ue);const ce=re.XpG();return re.Njj(ce.addingProd())}),re.EFF(1," Add New Product "),re.k0s()}}function it(ie,je){if(1&ie){const Ue=re.RV6();re.j41(0,"div",26)(1,"div"),re.nrm(2,"img",27),re.j41(3,"img",28),re.bIt("click",function(){const ce=re.eBV(Ue).$implicit,xe=re.XpG(2);return re.Njj(xe.removeImg(ce))}),re.k0s()()()}if(2&ie){const Ue=je.$implicit;re.R7$(2),re.Y8G("src",Ue,re.B4B)}}function nt(ie,je){if(1&ie){const Ue=re.RV6();re.j41(0,"form",10)(1,"select",11)(2,"option",12),re.EFF(3,"Guitar"),re.k0s(),re.j41(4,"option",13),re.EFF(5,"Drum"),re.k0s(),re.j41(6,"option",14),re.EFF(7,"Bass"),re.k0s(),re.j41(8,"option",15),re.EFF(9,"Piano"),re.k0s(),re.j41(10,"option",16),re.EFF(11,"Other"),re.k0s()(),re.nrm(12,"input",17)(13,"input",18)(14,"input",19)(15,"input",20)(16,"input",21),re.j41(17,"input",22),re.bIt("change",function(ce){re.eBV(Ue);const xe=re.XpG();return re.Njj(xe.onFileChange(ce))}),re.k0s(),re.j41(18,"button",23),re.bIt("click",function(){re.eBV(Ue);const ce=re.XpG();return re.Njj(ce.addNewProduct())}),re.EFF(19," add product "),re.k0s(),re.j41(20,"div",24),re.DNE(21,it,4,1,"div",25),re.k0s()()}if(2&ie){const Ue=re.XpG();re.Y8G("formGroup",Ue.form),re.R7$(18),re.Y8G("disabled",Ue.form.invalid),re.R7$(3),re.Y8G("ngForOf",Ue.photos)}}function De(ie,je){1&ie&&re.nrm(0,"app-card",29),2&ie&&re.Y8G("product",je.$implicit)}let ct=(()=>{class ie{constructor(Ue,Oe,ce,xe,xt,un){this.authService=Ue,this.cd=Oe,this.fb=ce,this.sharedService=xe,this.router=xt,this.sngService=un,this.photos=[],this.addingProduct=!1,this.purchasedProducts=[],this.form=this.fb.group({category:["",[R.k0.required]],model:["",R.k0.required],price:["",R.k0.required],quantity:["",R.k0.required],discount:["",R.k0.required],description:["",R.k0.required]})}ngOnInit(){this.authService.loggedUser.pipe((0,v.s)(1)).subscribe(Ue=>{Ue&&Ue.user.purchasedProducts&&(this.user=Ue,this.purchasedProducts=Ue?.user.purchasedProducts.slice(1)),this.sngService.prodId.subscribe(Oe=>{this.keyandType=Oe}),this.getUserLikedProducts(),this.form.patchValue({category:"guitar"})})}onFileChange(Ue){const Oe=Ue.target.files[0];if(Oe){const ce=new FileReader;ce.onload=xe=>{this.photos.push(xe.target?.result),this.cd.detectChanges()},ce.readAsDataURL(Oe)}}addingProd(){this.addingProduct=!this.addingProduct}removeImg(Ue){const Oe=this.photos.findIndex(ce=>ce===Ue);this.photos.splice(Oe,1)}addNewProduct(){const Ue=this.form.get("category")?.getRawValue(),Oe=this.form.get("model")?.getRawValue(),ce=this.form.get("price")?.getRawValue(),xe=this.form.get("discount")?.getRawValue(),xt=this.form.get("quantity")?.getRawValue(),un=this.form.get("description")?.getRawValue();this.sharedService.addProduct(Ue,Oe,ce,xt,xe,this.photos,un).subscribe({next:()=>{this.form.get("category")?.setValue(""),this.form.get("model")?.setValue(""),this.form.get("price")?.setValue(""),this.form.get("discount")?.setValue(""),this.form.get("quantity")?.setValue(""),this.form.get("description")?.setValue(""),this.photos=[],this.cd.detectChanges(),alert("Product was added successfully")},error:jt=>{console.log("add product error: "+jt.message)},complete:()=>{console.log("Subscription completed")}})}convertDate(Ue){let Oe=new Date(Ue);return`${Oe.getDate()}/${Oe.getMonth()+1}/${Oe.getFullYear()}`}navigate(Ue){this.router.navigate([`/${Ue}`])}getUserLikedProducts(){this.authService.loggedUser.pipe((0,v.s)(1)).subscribe(Ue=>{this.keyandType&&this.keyandType.length>0&&this.sharedService.getLikedProductsByIdsAsKeyValue(this.keyandType).subscribe(Oe=>{this.likedProducts=Oe,this.cd.detectChanges()})})}static#e=this.\u0275fac=function(Oe){return new(Oe||ie)(re.rXU(Se.p),re.rXU(re.gRc),re.rXU(R.ok),re.rXU(fe.m),re.rXU(T.Ix),re.rXU($e.f))};static#t=this.\u0275cmp=re.VBU({type:ie,selectors:[["app-profile"]],decls:27,vars:5,consts:[[1,"container"],[1,"wrapper"],[1,"box"],[1,"info"],[3,"click",4,"ngIf"],[3,"click"],[3,"formGroup",4,"ngIf"],[1,"liked-products"],[1,"products"],["class","single-product",3,"product",4,"ngFor","ngForOf"],[3,"formGroup"],["formControlName","category"],["value","guitar"],["value","drum"],["value","bass"],["value","piano"],["value","other"],["placeholder","Model","formControlName","model"],["placeholder","Price","formControlName","price"],["placeholder","Discount","formControlName","discount"],["placeholder","Quantity","formControlName","quantity"],["placeholder","Description","formControlName","description"],["type","file",3,"change"],[3,"click","disabled"],[1,"photos"],["class","pht",4,"ngFor","ngForOf"],[1,"pht"],["alt","img",3,"src"],["src","assets/remove.png","alt","img",3,"click"],[1,"single-product",3,"product"]],template:function(Oe,ce){1&Oe&&(re.nrm(0,"app-header"),re.j41(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"p")(6,"span"),re.EFF(7," Email:"),re.k0s(),re.EFF(8),re.k0s(),re.j41(9,"p")(10,"span"),re.EFF(11,"Address:"),re.k0s(),re.EFF(12),re.k0s(),re.j41(13,"button"),re.EFF(14,"Change Password"),re.k0s(),re.DNE(15,Ge,2,0,"button",4),re.j41(16,"button",5),re.bIt("click",function(){return ce.navigate("purchasedProducts")}),re.EFF(17," See Your Purchases "),re.k0s(),re.j41(18,"button",5),re.bIt("click",function(){return ce.navigate("allPurchase")}),re.EFF(19,"See All Purchases"),re.k0s()(),re.DNE(20,nt,22,3,"form",6),re.k0s(),re.j41(21,"div",7)(22,"h2"),re.EFF(23,"Liked Products:"),re.k0s(),re.j41(24,"div",8),re.DNE(25,De,1,1,"app-card",9),re.k0s()()()(),re.nrm(26,"app-footer")),2&Oe&&(re.R7$(8),re.SpI(" ",null==ce.user||null==ce.user.user?null:ce.user.user.email,""),re.R7$(4),re.SpI(" ",null==ce.user||null==ce.user.user?null:ce.user.user.address,"Some Adrress"),re.R7$(3),re.Y8G("ngIf",null==ce.user||null==ce.user.user?null:ce.user.user.isAdmin),re.R7$(5),re.Y8G("ngIf",(null==ce.user||null==ce.user.user?null:ce.user.user.isAdmin)&&ce.addingProduct),re.R7$(5),re.Y8G("ngForOf",ce.likedProducts))},dependencies:[_.Sq,_.bT,R.qT,R.xH,R.y7,R.me,R.wz,R.BC,R.cb,R.j4,R.JD,Me.l,ye.n,pe.i],styles:[".container[_ngcontent-%COMP%]{width:100vw;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:90%;background-color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:8%;display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-size:18px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:200px;height:50px;cursor:pointer;--b: 2px;--s: .45em;--color: #373b44;padding:calc(.5em + var(--s)) calc(.9em + var(--s));color:var(--color);--_p: var(--s);background:conic-gradient(from 90deg at var(--b) var(--b),rgba(0,0,0,0) 90deg,var(--color) 0) var(--_p) var(--_p)/calc(100% - var(--b) - 2 * var(--_p)) calc(100% - var(--b) - 2 * var(--_p));transition:.3s linear,color 0s,background-color 0s;outline:var(--b) solid rgba(0,0,0,0);outline-offset:.6em;font-size:16px;border:0;user-select:none;-webkit-user-select:none;touch-action:manipulation}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus-visible{--_p: 0px;outline-color:var(--color);outline-offset:.05em}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background:var(--color);color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,200px);grid-template-rows:repeat(5,30px);padding-left:8%;margin-bottom:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]{display:flex;gap:12px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]:last-of-type{width:8px;position:absolute;top:3px;right:-6px}.liked-products[_ngcontent-%COMP%]{padding:20px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}"],changeDetection:0})}return ie})();var at=k(6354),ot=k(8141);const $t=[{path:"",component:ct,canActivate:[(()=>{class ie{constructor(){this.authService=(0,re.WQX)(Se.p),this.router=(0,re.WQX)(T.Ix)}canActivate(Ue){return this.authService.findUserById(Ue.params.id).pipe((0,at.T)(ce=>this.authService.loggedUser.value?.user.email===ce),(0,ot.M)(ce=>{ce||(alert("Access Denied!"),this.router.navigate(["/products"]))}))}static#e=this.\u0275fac=function(Oe){return new(Oe||ie)};static#t=this.\u0275prov=re.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"})}return ie})()]}];let ae=(()=>{class ie{static#e=this.\u0275fac=function(Oe){return new(Oe||ie)};static#t=this.\u0275mod=re.$C({type:ie});static#n=this.\u0275inj=re.G2t({imports:[T.iI.forChild($t),T.iI]})}return ie})(),we=(()=>{class ie{static#e=this.\u0275fac=function(Oe){return new(Oe||ie)};static#t=this.\u0275mod=re.$C({type:ie});static#n=this.\u0275inj=re.G2t({imports:[_.MD,ae,R.X1,Me.l,ye.n,pe.i]})}return ie})()},9156:(nn,We,k)=>{k.d(We,{B:()=>R});var _=k(4438),T=k(9417);let R=(()=>{class v{constructor(Se){this.fb=Se,this.formSubmitted=new _.bkB,this.productForm=this.fb.group({model:[""],price:["",T.k0.pattern("^[0-9]*$")],discount:["",T.k0.pattern("^[0-9]*$")],quantity:["",T.k0.pattern("^[0-9]*$")],description:[""]})}onSubmit(){this.formSubmitted.emit(this.productForm.value)}static#e=this.\u0275fac=function(fe){return new(fe||v)(_.rXU(T.ok))};static#t=this.\u0275cmp=_.VBU({type:v,selectors:[["app-reusable-form"]],outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[_.aNF],decls:8,vars:1,consts:[[1,"edit",3,"formGroup"],["formControlName","model","type","text","placeholder","New model-name"],["formControlName","price","type","text","placeholder","New price"],["formControlName","discount","type","text","placeholder","New Discount"],["formControlName","quantity","type","text","placeholder","New Quantity"],["formControlName","description","placeholder","New Description"],[3,"click"]],template:function(fe,$e){1&fe&&(_.j41(0,"form",0),_.nrm(1,"input",1)(2,"input",2)(3,"input",3)(4,"input",4)(5,"textarea",5),_.j41(6,"button",6),_.bIt("click",function(){return $e.onSubmit()}),_.EFF(7,"Confirm Changes"),_.k0s()()),2&fe&&_.Y8G("formGroup",$e.productForm)},dependencies:[T.X1,T.qT,T.me,T.BC,T.cb,T.j4,T.JD],styles:[".edit[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;gap:6px;margin-top:60px}.edit[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .edit[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:80%;height:26px}"]})}return v})()},3550:(nn,We,k)=>{k.d(We,{i:()=>ie});var _=k(177),T=k(9417),R=k(9156),v=k(4438),re=k(6483),Se=k(5435),fe=k(6569),$e=k(4454),Me=k(2906),ye=k(4390),pe=k(6552);function Ge(je,Ue){if(1&je){const Oe=v.RV6();v.j41(0,"img",14),v.bIt("click",function(){v.eBV(Oe);const xe=v.XpG(3);return v.Njj(xe.editing())}),v.k0s()}}function it(je,Ue){if(1&je){const Oe=v.RV6();v.j41(0,"img",14),v.bIt("click",function(){v.eBV(Oe);const xe=v.XpG(3);return v.Njj(xe.cancelEditing())}),v.k0s()}}function nt(je,Ue){if(1&je){const Oe=v.RV6();v.j41(0,"div",11)(1,"img",12),v.bIt("click",function(){v.eBV(Oe);const xe=v.XpG(2);return v.Njj(xe.removeProduct())}),v.k0s(),v.DNE(2,Ge,1,0,"img",13)(3,it,1,0,"img",13),v.k0s()}if(2&je){const Oe=v.XpG(2);v.R7$(2),v.Y8G("ngIf",""===Oe.isEditing),v.R7$(),v.Y8G("ngIf",""!==Oe.isEditing)}}function De(je,Ue){if(1&je){const Oe=v.RV6();v.j41(0,"button",4),v.bIt("click",function(){v.eBV(Oe);const xe=v.XpG(3);return v.Njj(xe.makeItTop())}),v.EFF(1,"Add To Top"),v.k0s()}}function ct(je,Ue){if(1&je){const Oe=v.RV6();v.j41(0,"button",4),v.bIt("click",function(){v.eBV(Oe);const xe=v.XpG(3);return v.Njj(xe.makeItTop())}),v.EFF(1," Remove From Top "),v.k0s()}}function at(je,Ue){if(1&je&&(v.j41(0,"div",15),v.DNE(1,De,2,0,"button",16)(2,ct,2,0,"button",16),v.k0s()),2&je){const Oe=v.XpG(2);v.R7$(),v.Y8G("ngIf",!Oe.isTopProduct),v.R7$(),v.Y8G("ngIf",Oe.isTopProduct)}}function ot(je,Ue){if(1&je){const Oe=v.RV6();v.j41(0,"div",17)(1,"app-reusable-form",18),v.bIt("formSubmitted",function(xe){v.eBV(Oe);const xt=v.XpG(2);return v.Njj(xt.onFormSubmit(xe))}),v.k0s(),v.j41(2,"div")(3,"button",4),v.bIt("click",function(){v.eBV(Oe);const xe=v.XpG(2);return v.Njj(xe.cancelEditing())}),v.EFF(4,"Cancel"),v.k0s()()()}}function At(je,Ue){if(1&je&&(v.j41(0,"div",19),v.EFF(1),v.k0s()),2&je){const Oe=v.XpG(2);v.R7$(),v.SpI(" -",Oe.product.product.discount,"% ")}}function $t(je,Ue){if(1&je&&(v.j41(0,"span"),v.EFF(1),v.k0s()),2&je){const Oe=v.XpG(2);v.R7$(),v.SpI("",Oe.product.product.price,"$")}}function ae(je,Ue){if(1&je&&(v.j41(0,"div",20)(1,"span"),v.EFF(2),v.k0s(),v.j41(3,"span"),v.EFF(4),v.k0s()()),2&je){const Oe=v.XpG(2);v.R7$(2),v.SpI(" ",Oe.product.product.price,"$ "),v.R7$(2),v.SpI(" ",Oe.calculateDiscount(),"$ ")}}function we(je,Ue){if(1&je){const Oe=v.RV6();v.j41(0,"div")(1,"div",1),v.DNE(2,nt,4,2,"div",2),v.nI1(3,"async"),v.j41(4,"div",3)(5,"button",4),v.bIt("click",function(){v.eBV(Oe);const xe=v.XpG();return v.Njj(xe.addInCart())}),v.EFF(6,"Add to cart"),v.k0s(),v.j41(7,"div")(8,"span",4),v.bIt("click",function(){v.eBV(Oe);const xe=v.XpG();return v.Njj(xe.navigation())}),v.EFF(9,"See Product"),v.k0s()(),v.DNE(10,at,3,2,"div",5),v.k0s(),v.DNE(11,ot,5,0,"div",6),v.j41(12,"div",3),v.DNE(13,At,2,1,"div",7),v.nrm(14,"img",8),v.k0s(),v.j41(15,"div",9)(16,"span"),v.EFF(17),v.nI1(18,"upperCase"),v.k0s(),v.j41(19,"span"),v.EFF(20),v.nI1(21,"slice"),v.nI1(22,"upperCase"),v.k0s(),v.DNE(23,$t,2,1,"span",0)(24,ae,5,2,"div",10),v.k0s()()()}if(2&je){const Oe=v.XpG();v.R7$(2),v.Y8G("ngIf",v.bMT(3,11,Oe.isAdmin)),v.R7$(2),v.Y8G("ngClass",Oe.isEditing?"display-none":"hover"),v.R7$(6),v.Y8G("ngIf",Oe.isAdmin),v.R7$(),v.Y8G("ngIf",Oe.isEditing===Oe.product.key),v.R7$(),v.Y8G("ngClass",Oe.isEditing===Oe.product.key?"display-none":"img-placeholder"),v.R7$(),v.Y8G("ngIf",null==Oe.product||null==Oe.product.product?null:Oe.product.product.discount),v.R7$(),v.Y8G("src",Oe.product.product.photoUrl[0],v.B4B),v.R7$(3),v.JRh(v.bMT(18,13,Oe.product.product.category)),v.R7$(3),v.JRh(v.bMT(22,19,v.brH(21,15,Oe.product.product.model,0,150))),v.R7$(3),v.Y8G("ngIf",!Oe.product.product.discount),v.R7$(),v.Y8G("ngIf",Oe.product.product.discount)}}let ie=(()=>{class je{constructor(Oe,ce,xe,xt,un,jt,ln){this.sharedService=Oe,this.authService=ce,this.router=xe,this.cd=xt,this.cartService=un,this.dataService=jt,this.specificParent=ln,this.showSpecificContent=!1,this.singleProdPage=!1,this.removeEvent=new v.bkB,this.editEvent=new v.bkB,this.topProds=new v.bkB,this.isEditing="",this.isUsedInSpecificParent=!1,this.isTopProduct=!1,this.specificParent&&(this.isUsedInSpecificParent=!0)}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.loggedUser.subscribe(Oe=>{this.authService.isAdmin.next(Oe?.user.isAdmin),this.isAdmin=this.authService.isAdmin.asObservable(),this.userID=Oe?.key,this.isProductIntop()})}removeProduct(){this.sharedService.removeProduct(this.product?.product.category,this.product?.key).subscribe(()=>{this.removeEvent.emit({prodId:this.product?.key,prodCategory:this.product?.product.category}),this.dataService.emitTopProductUpdate(this.product.key,"remove"),this.cd.detectChanges()})}navigation(){this.router.navigate([`single-product/${this.product?.key}`],{queryParams:{type:this.product?.product.category,prod:this.product?.key}}),this.cd.detectChanges()}addInCart(){this.cartService.cartOperations("add",this.product)}navigateToCategotyPage(){this.router.navigate([`categoty/${this.product?.product.category}`])}calculateDiscount(){return this.product?.product.price-Math.round(this.product?.product.price*this.product?.product.discount/100)}editing(){this.isEditing=this.product?.key}cancelEditing(){this.isEditing=""}onFormSubmit(Oe){this.editEvent.emit({form:Oe,prodId:this.product?.key,prodCategory:this.product?.product?.category}),Oe.model&&(this.product.product.model=Oe.model),Oe.price&&(this.product.product.price=Oe.price),Oe.discount&&(this.product.product.discount=Oe.discount),Oe.quantity&&(this.product.product.quantity=Oe.quantity),Oe.description&&(this.product.product.description=Oe.description),this.cancelEditing()}firstLetterUpperCase(Oe){return Oe.charAt(0).toUpperCase()+Oe.substring(1,Oe.length)}makeItTop(){this.sharedService.makeTopProduct(this.product.key,this.product.product.category).subscribe(()=>{this.isTopProduct?(this.isTopProduct=!1,this.dataService.emitTopProductUpdate(this.product.key,"remove")):(this.isTopProduct=!0,this.dataService.emitTopProductUpdate(this.product.key,"add",this.product.product.photoUrl[0])),this.cd.detectChanges()})}isProductIntop(){this.dataService.topProducts.subscribe(Oe=>{Oe.find(ce=>ce.key===this.product.key)&&(this.isTopProduct=!0)})}static#e=this.\u0275fac=function(ce){return new(ce||je)(v.rXU(Se.m),v.rXU(fe.p),v.rXU($e.Ix),v.rXU(v.gRc),v.rXU(Me.m),v.rXU(ye.L),v.rXU(pe.u,8))};static#t=this.\u0275cmp=v.VBU({type:je,selectors:[["app-card"]],inputs:{showSpecificContent:"showSpecificContent",product:"product",singleProdPage:"singleProdPage"},outputs:{removeEvent:"removeEvent",editEvent:"editEvent",topProds:"topProds"},standalone:!0,features:[v.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[1,"single-product"],["class","delete-button",4,"ngIf"],[3,"ngClass"],[3,"click"],["class","add-remove",4,"ngIf"],["class","edit",4,"ngIf"],["class","discount",4,"ngIf"],["alt","img",3,"src"],[1,"info"],["class","if-discount",4,"ngIf"],[1,"delete-button"],["src","assets/remove.png","alt","img",3,"click"],["src","assets/pen.png","alt","img",3,"click",4,"ngIf"],["src","assets/pen.png","alt","img",3,"click"],[1,"add-remove"],[3,"click",4,"ngIf"],[1,"edit"],[3,"formSubmitted"],[1,"discount"],[1,"if-discount"]],template:function(ce,xe){1&ce&&v.DNE(0,we,25,21,"div",0),2&ce&&v.Y8G("ngIf",xe.product&&xe.product.product)},dependencies:[T.YN,_.MD,_.YU,_.bT,_.Jj,_.P9,R.B,re.P],styles:[".single-product[_ngcontent-%COMP%]{width:200px;height:420px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%]{position:absolute;z-index:1}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:2px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:14%;z-index:1}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-of-type{display:flex;justify-content:center;align-items:center;width:140px;height:40px;color:#fff}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{height:260px;display:flex;justify-content:center;position:relative}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;min-height:50%;min-width:50%}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{height:155px;display:flex;flex-direction:column;justify-content:space-between}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{text-decoration:line-through}.if-discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;font-weight:700;justify-self:flex-end}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:20px}.display-none[_ngcontent-%COMP%]{display:none}"],changeDetection:0})}return je})()},4390:(nn,We,k)=>{k.d(We,{L:()=>Se});var _=k(4412),T=k(7468),R=k(6354),v=k(4438),re=k(1626);let Se=(()=>{class fe{constructor(Me){this.http=Me,this.url="https://musicshop-88945-default-rtdb.firebaseio.com/",this.allProducts=new _.t([]),this.topProducts=new _.t([]),this.guitarProducts=new _.t([]),this.pianoProducts=new _.t([]),this.bassProducts=new _.t([]),this.drumProducts=new _.t([]),this.topProductUpdated=new _.t(void 0),this.topProductUpdated$=this.topProductUpdated.asObservable()}getData(Me){return"guitar"===Me?this.guitarProducts:"bass"===Me?this.bassProducts:"drum"===Me?this.drumProducts:"piano"===Me?this.pianoProducts:this.allProducts}emitTopProductUpdate(Me,ye,pe){this.topProductUpdated.next({img:pe,key:Me,operation:ye})}getAllTopProduct(){this.allProducts.subscribe(Me=>{const Ge=this.mapKeyValue(Me).filter(it=>!0===it.product.isTopProduct.isTop).sort((it,nt)=>new Date(it.product.isTopProduct.date).getTime()-new Date(nt.product.isTopProduct.date).getTime());this.topProducts.next(Ge)})}getAllTypeOfProduct(){const Me=this.http.get(`${this.url}/products/guitar.json`),ye=this.http.get(`${this.url}/products/piano.json`),pe=this.http.get(`${this.url}/products/bass.json`),Ge=this.http.get(`${this.url}/products/drum.json`);return(0,T.p)([Me,ye,pe,Ge]).pipe((0,R.T)(it=>{this.allProducts.next(it);const nt=this.mapKeyValue(it),De=nt.filter(At=>"guitar"===At.product.category),ct=nt.filter(At=>"piano"===At.product.category),at=nt.filter(At=>"bass"===At.product.category),ot=nt.filter(At=>"drum"===At.product.category);return this.guitarProducts.next(De),this.pianoProducts.next(ct),this.bassProducts.next(at),this.drumProducts.next(ot),this.getAllTopProduct(),it}))}mapKeyValue(Me){return Me.flatMap(pe=>Object.entries(pe).map(([Ge,it])=>({key:Ge,product:it})))}getTypeOfProduct(Me){this.http.get(`${this.url}/products/guitar.json`).subscribe(ye=>{this.getData(Me).next(ye)})}static#e=this.\u0275fac=function(ye){return new(ye||fe)(v.KVO(re.Qq))};static#t=this.\u0275prov=v.jDH({token:fe,factory:fe.\u0275fac,providedIn:"root"})}return fe})()},5435:(nn,We,k)=>{k.d(We,{m:()=>Ge});var _=k(4412),T=k(8141),R=k(6354),v=k(7468),re=k(5558),Se=k(9437),fe=k(7673),$e=k(4438),Me=k(1626),ye=k(6569),pe=k(4390);let Ge=(()=>{class it{constructor(De,ct,at){this.http=De,this.service=ct,this.shareDataService=at,this.detectChanges=new _.t(!1),this.userId=this.service.loggedUser.value?.key,this.url="https://musicshop-88945-default-rtdb.firebaseio.com/"}addProduct(De,ct,at,ot,At,$t,ae){const we={category:De,model:ct,price:parseInt(at),quantity:parseInt(ot),discount:parseInt(At),photoUrl:$t,isTopProduct:{isTop:!1,date:new Date(1990)},description:ae};return this.http.post(`${this.url}/products/${De}.json`,we)}ifDetectChanges(){return this.detectChanges.next(!this.detectChanges.value),this.detectChanges.value}makeTopProduct(De,ct){return this.http.get(`${this.url}/products/${ct}/${De}.json`).pipe((0,T.M)(at=>{at.isTopProduct.isTop?(at.isTopProduct.isTop=!1,at.isTopProduct.date=new Date(1990)):(at.isTopProduct.isTop=!0,at.isTopProduct.date=new Date),this.http.patch(`${this.url}/products/${ct}/${De}.json`,at).subscribe()}))}likeUnlikeProduct(De,ct,at,ot){return this.http.get(`${this.url}/musicShopUsers/${at}.json`).pipe((0,T.M)(At=>{let $t=At;console.log(At);let ae=ot;$t&&($t.likedProducts.find(ie=>ie.key===De)?(ae=At.likedProducts.filter(ie=>ie.key!==De),$t.likedProducts=ae):(ae=[...At.likedProducts,{key:De,category:ct}],$t.likedProducts=ae)),this.http.patch(`${this.url}/musicShopUsers/${at}.json`,$t).subscribe()}))}getLikedProductsByIdsAsKeyValue(De){const ct=De.map(at=>this.getProductById(at.key,at.category).pipe((0,R.T)(ot=>({key:at.key,product:ot}))));return(0,v.p)(ct)}getProduct(De,ct){return this.http.get(`${this.url}/products/${ct}/${De}.json`)}getProductById(De,ct){return this.http.get(`${this.url}/products/${ct}/${De}.json`)}buyProducts(De,ct,at,ot){const At={userId:ot,email:at,date:new Date,totalPrice:ct,products:De},$t=this.http.get(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`).pipe((0,re.n)(we=>(we.purchasedProducts=[...we.purchasedProducts,At],this.http.patch(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`,we))),(0,Se.W)(we=>(console.error("Error in adminUpdate$",we),(0,fe.of)(null))));let ae=(0,fe.of)(null);ot&&(ae=this.http.get(`${this.url}/musicShopUsers/${ot}.json`).pipe((0,re.n)(we=>(we.purchasedProducts=[...we.purchasedProducts,At],this.http.patch(`${this.url}/musicShopUsers/${ot}.json`,we))),(0,Se.W)(we=>(console.error("Error in userUpdate$",we),(0,fe.of)(null))))),(0,v.p)([$t,ae]).subscribe()}removeProduct(De,ct){return this.http.delete(`${this.url}/products/${De}/${ct}.json`)}editProduct(De,ct,at){return this.http.get(`${this.url}/products/${at}/${ct}.json`).pipe((0,T.M)(ot=>{De.model&&(ot.model=De.model),De.price&&(ot.price=De.price),De.discount&&(ot.discount=De.discount),De.quantity&&(ot.quantity=De.quantity),De.description&&(ot.description=De.description),this.http.patch(`${this.url}/products/${at}/${ct}.json`,ot).subscribe()}))}updateProductArray(De,ct,at){let ot=ct.findIndex(At=>At.key===at);De.discount&&(ct[ot].product.discount=De.discount,De.model&&(ct[ot].product.model=De.model),De.price&&(ct[ot].product.price=De.price),De.description&&(ct[ot].product.description=De.description),De.quantity&&(ct[ot].product.quantity=De.quantity))}getRandomProducts(De){return this.shareDataService.getData(De).pipe((0,R.T)(ct=>{let at=4;const ot=[],At=[];for(;0!==at;){if(ct.length<=at)return ct;const $t=Math.floor(Math.random()*ct.length);At.includes($t)||(ot.push(ct[$t]),At.push($t),at--)}return ot}))}getLikedProductsArr(De){return this.http.get(`${this.url}/musicShopUsers/${De}.json`).pipe((0,R.T)(ct=>ct))}getAllClientPurchases(){return this.http.get(`${this.url}/musicShopUsers/.json`).pipe((0,R.T)(De=>Object.keys(De).map(ct=>(De[ct].purchasedProducts||[]).slice(1))),(0,R.T)(De=>De.flat()))}static#e=this.\u0275fac=function(ct){return new(ct||it)($e.KVO(Me.Qq),$e.KVO(ye.p),$e.KVO(pe.L))};static#t=this.\u0275prov=$e.jDH({token:it,factory:it.\u0275fac,providedIn:"root"})}return it})()},1996:(nn,We,k)=>{k.d(We,{f:()=>R});var _=k(4412),T=k(4438);let R=(()=>{class v{constructor(){this.prodId=new _.t(void 0)}static#e=this.\u0275fac=function(fe){return new(fe||v)};static#t=this.\u0275prov=T.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})()},2735:(nn,We,k)=>{k.r(We),k.d(We,{SingleProductPageModule:()=>$t});var _=k(177),T=k(4454),R=k(6697),v=k(4438),re=k(5435),Se=k(6569),fe=k(2906),$e=k(1996),Me=k(2152),ye=k(708),pe=k(8964);function Ge(ae,we){if(1&ae&&v.nrm(0,"img",15,0),2&ae){const ie=v.XpG();v.Y8G("src",ie.images[ie.cuurentIndex],v.B4B)}}function it(ae,we){if(1&ae){const ie=v.RV6();v.j41(0,"div")(1,"img",16),v.bIt("click",function(){const Ue=v.eBV(ie).index,Oe=v.XpG();return v.Njj(Oe.switchImage(Ue))}),v.k0s()()}if(2&ae){const ie=we.index,je=v.XpG();v.R7$(),v.Y8G("src",je.images[ie],v.B4B)}}function nt(ae,we){if(1&ae){const ie=v.RV6();v.j41(0,"img",17),v.bIt("click",function(){v.eBV(ie);const Ue=v.XpG();return v.Njj(Ue.likeProduct("unlike"))}),v.k0s()}}function De(ae,we){if(1&ae){const ie=v.RV6();v.j41(0,"img",18),v.bIt("click",function(){v.eBV(ie);const Ue=v.XpG();return v.Njj(Ue.likeProduct("like"))}),v.k0s()}}function ct(ae,we){if(1&ae&&v.nrm(0,"app-suggestions",19),2&ae){const ie=v.XpG();v.Y8G("categoty",null==ie.product?null:ie.product.category)}}const ot=[{path:"",component:(()=>{class ae{constructor(ie,je,Ue,Oe,ce,xe){this.sharedService=ie,this.authService=je,this.route=Ue,this.cd=Oe,this.cartService=ce,this.sngService=xe,this.cuurentIndex=0,this.minSize=0,this.maxSize=0,this.focusedImg=this.product?.photoUrl?.[0],this.prodId="",this.userId="",this.isLiked=!1,this.userEmail=""}ngOnInit(){this.authService.checkIfLoggedIn(),this.route.queryParams.subscribe(()=>{this.getProductInfo(),this.getUserInfo()})}getUserInfo(){this.authService.loggedUser.subscribe(ie=>{this.userId=ie?.key,this.userEmail=ie?.user.email})}getProductInfo(){this.route.queryParams.pipe((0,R.s)(1)).subscribe(ie=>{this.sharedService.getProductById(ie.prod,ie.type).pipe((0,R.s)(1)).subscribe(je=>{this.product=je,this.images=je.photoUrl,this.prodId=ie.prod,this.cuurentIndex=0,this.focusedImg=this.product?.photoUrl?.[0],this.likedProducts=this.sngService.prodId.value,this.checkIfliked(),this.cd.detectChanges()})})}switchImage(ie){this.cuurentIndex=ie}checkIfliked(){this.likedProducts&&(this.isLiked=!!this.likedProducts.find(je=>je.key===this.prodId))}likeProduct(ie){this.sharedService.likeUnlikeProduct(this.prodId,this.product?.category,this.userId,this.likedProducts).subscribe(()=>{this.likedProducts&&("unlike"===ie?this.isLiked=!1:"like"===ie&&(this.isLiked=!0),this.cd.detectChanges(),this.authService.findUser(this.userEmail).subscribe(je=>{this.authService.loggedUser.next(je),"unlike"===ie?(this.likedProducts=this.likedProducts?.filter(Ue=>Ue.key!==this.prodId),this.isLiked=!1):"like"===ie&&(this.likedProducts?.push({key:this.prodId,category:this.product?.category}),this.isLiked=!0),localStorage.setItem("currentUser",JSON.stringify(je)),this.cd.detectChanges()}))})}scroll(ie){"right"===ie?this.images.unshift(this.images.pop()):this.images.push(this.images.shift())}addInCart(){this.cartService.cartOperations("add",{key:this.prodId,product:this.product})}static#e=this.\u0275fac=function(je){return new(je||ae)(v.rXU(re.m),v.rXU(Se.p),v.rXU(T.nX),v.rXU(v.gRc),v.rXU(fe.m),v.rXU($e.f))};static#t=this.\u0275cmp=v.VBU({type:ae,selectors:[["app-single-product-page"]],decls:39,vars:12,consts:[["myImage",""],[1,"container"],[1,"content"],[1,"images"],[1,"focused-img"],["alt","img",3,"src",4,"ngIf"],[1,"otherPhotos"],["src","assets/left.png","alt","img",3,"click"],[4,"ngFor","ngForOf"],["src","assets/right.png","alt","img",3,"click"],[1,"description","payment"],["src","assets/heart-red.png","alt","img",3,"click",4,"ngIf"],["src","assets/heart.png","alt","img",3,"click",4,"ngIf"],[3,"click"],[3,"categoty",4,"ngIf"],["alt","img",3,"src"],["alt","img",3,"click","src"],["src","assets/heart-red.png","alt","img",3,"click"],["src","assets/heart.png","alt","img",3,"click"],[3,"categoty"]],template:function(je,Ue){1&je&&(v.nrm(0,"app-header"),v.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),v.DNE(5,Ge,2,1,"img",5),v.k0s(),v.j41(6,"div",6)(7,"div")(8,"img",7),v.bIt("click",function(){return Ue.scroll("left")}),v.k0s()(),v.DNE(9,it,2,1,"div",8),v.nI1(10,"slice"),v.j41(11,"div")(12,"img",9),v.bIt("click",function(){return Ue.scroll("right")}),v.k0s()()()(),v.j41(13,"div",10)(14,"div")(15,"p")(16,"span"),v.EFF(17,"Categoty:"),v.k0s(),v.EFF(18),v.k0s(),v.j41(19,"div"),v.DNE(20,nt,1,0,"img",11)(21,De,1,0,"img",12),v.k0s()(),v.j41(22,"div")(23,"p")(24,"span"),v.EFF(25,"Model:"),v.k0s(),v.EFF(26),v.k0s(),v.j41(27,"p")(28,"span"),v.EFF(29,"Description: "),v.k0s(),v.EFF(30),v.k0s(),v.j41(31,"p")(32,"span"),v.EFF(33,"Price:"),v.k0s(),v.EFF(34),v.k0s(),v.j41(35,"button",13),v.bIt("click",function(){return Ue.addInCart()}),v.EFF(36,"Add to Cart"),v.k0s()()(),v.DNE(37,ct,1,1,"app-suggestions",14),v.nrm(38,"app-footer"),v.k0s()()),2&je&&(v.R7$(5),v.Y8G("ngIf",null==Ue.images?null:Ue.images.length),v.R7$(4),v.Y8G("ngForOf",v.i5U(10,9,Ue.images,0)),v.R7$(9),v.SpI(" ",null==Ue.product?null:Ue.product.category,""),v.R7$(2),v.Y8G("ngIf",Ue.isLiked),v.R7$(),v.Y8G("ngIf",!Ue.isLiked),v.R7$(5),v.SpI(" ",null==Ue.product?null:Ue.product.model,""),v.R7$(4),v.SpI(" ",null==Ue.product?null:Ue.product.description,""),v.R7$(4),v.SpI(" ",null==Ue.product?null:Ue.product.price,"$"),v.R7$(3),v.Y8G("ngIf",null==Ue.product?null:Ue.product.category))},dependencies:[_.Sq,_.bT,Me.l,ye.n,pe.x,_.P9],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6%;margin-top:4%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:350px;height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px;max-height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]{display:flex;gap:4px;justify-content:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child, .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{background-color:unset}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > img[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]{width:40px;height:40px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:40px;gap:20px;width:90%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:23px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:10px;word-wrap:break-word;font-size:20px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px;height:30px;border:none;text-align:center;color:#fff;background-color:#7a7af0;border-radius:3px;cursor:pointer}"],changeDetection:0})}return ae})()}];let At=(()=>{class ae{static#e=this.\u0275fac=function(je){return new(je||ae)};static#t=this.\u0275mod=v.$C({type:ae});static#n=this.\u0275inj=v.G2t({imports:[T.iI.forChild(ot),T.iI]})}return ae})(),$t=(()=>{class ae{static#e=this.\u0275fac=function(je){return new(je||ae)};static#t=this.\u0275mod=v.$C({type:ae});static#n=this.\u0275inj=v.G2t({imports:[_.MD,Me.l,ye.n,At,pe.x]})}return ae})()},8964:(nn,We,k)=>{k.d(We,{x:()=>Se});var _=k(3550),T=k(177),R=k(4438),v=k(5435);function re(fe,$e){1&fe&&R.nrm(0,"app-card",2),2&fe&&R.Y8G("product",$e.$implicit)}let Se=(()=>{class fe{constructor(Me,ye){this.service=Me,this.cd=ye,this.categoty="guitar"}ngOnInit(){this.service.getRandomProducts(this.categoty).subscribe(Me=>{this.randomSuggestions=Me,this.cd.detectChanges()})}static#e=this.\u0275fac=function(ye){return new(ye||fe)(R.rXU(v.m),R.rXU(R.gRc))};static#t=this.\u0275cmp=R.VBU({type:fe,selectors:[["app-suggestions"]],inputs:{categoty:"categoty"},standalone:!0,features:[R.aNF],decls:4,vars:1,consts:[[1,"container"],[3,"product",4,"ngFor","ngForOf"],[3,"product"]],template:function(ye,pe){1&ye&&(R.j41(0,"h2"),R.EFF(1,"You might also like:"),R.k0s(),R.j41(2,"div",0),R.DNE(3,re,1,1,"app-card",1),R.k0s()),2&ye&&(R.R7$(3),R.Y8G("ngForOf",pe.randomSuggestions))},dependencies:[_.i,T.MD,T.Sq],styles:["h2[_ngcontent-%COMP%]{color:#9191de;text-align:center}div[_ngcontent-%COMP%]{padding:3%;display:flex;gap:20px}"],changeDetection:0})}return fe})()},7827:(nn,We,k)=>{var _=k(345),T=k(4438),R=k(4454),v=k(6697),re=k(177),Se=k(2152),fe=k(708);let $e=(()=>{class Y{transform(D){let L=new Date(D);return`${L.getDate()}/${L.getMonth()+1}/${L.getFullYear()}`}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275pipe=T.EJ8({name:"date",type:Y,pure:!0,standalone:!0})}return Y})();var Me=k(6483);function ye(Y,C){if(1&Y){const D=T.RV6();T.j41(0,"img",7),T.bIt("click",function(){T.eBV(D);const K=T.XpG(2);return T.Njj(K.showMoreItems=!K.showMoreItems)})("click",function(){T.eBV(D);const K=T.XpG(2);return T.Njj(K.changeArrow=!K.changeArrow)}),T.k0s()}}function pe(Y,C){if(1&Y){const D=T.RV6();T.j41(0,"img",8),T.bIt("click",function(){T.eBV(D);const K=T.XpG(2);return T.Njj(K.showMoreItems=!K.showMoreItems&&!K.changeArrow)})("click",function(){T.eBV(D);const K=T.XpG(2);return T.Njj(K.changeArrow=!K.changeArrow)}),T.k0s()}}function Ge(Y,C){if(1&Y&&(T.j41(0,"div",9)(1,"div"),T.nrm(2,"img",10),T.k0s(),T.j41(3,"div",11)(4,"span"),T.EFF(5),T.k0s(),T.j41(6,"span"),T.EFF(7),T.k0s(),T.j41(8,"span"),T.EFF(9),T.k0s(),T.j41(10,"span"),T.EFF(11),T.k0s(),T.j41(12,"span"),T.EFF(13),T.k0s()()()),2&Y){const D=C.$implicit,L=T.XpG(2);T.R7$(2),T.Y8G("src",D.product.product.photoUrl[0],T.B4B),T.R7$(3),T.JRh(L.purchase.email?L.purchase.email:"unknown"),T.R7$(2),T.JRh(D.product.product.category),T.R7$(2),T.JRh(D.product.product.model),T.R7$(2),T.SpI("Price: ",D.product.product.price,"$"),T.R7$(2),T.SpI("Dicsount: ",D.product.product.discount,"%")}}function it(Y,C){if(1&Y&&(T.j41(0,"div",13)(1,"div"),T.nrm(2,"img",10),T.k0s(),T.j41(3,"div",11)(4,"span"),T.EFF(5),T.k0s(),T.j41(6,"span"),T.EFF(7),T.nI1(8,"upperCase"),T.k0s(),T.j41(9,"span"),T.EFF(10),T.nI1(11,"upperCase"),T.k0s(),T.j41(12,"span"),T.EFF(13),T.k0s(),T.j41(14,"span"),T.EFF(15),T.k0s()()()),2&Y){const D=C.$implicit,L=T.XpG(3);T.R7$(2),T.Y8G("src",D.product.product.photoUrl[0],T.B4B),T.R7$(3),T.JRh(L.purchase.email?L.purchase.email:"unknown"),T.R7$(2),T.JRh(T.bMT(8,6,D.product.product.category)),T.R7$(3),T.JRh(T.bMT(11,8,D.product.product.model)),T.R7$(3),T.SpI("Price: ",D.product.product.price,""),T.R7$(2),T.SpI("Dicsount: ",D.product.product.discount,"%")}}function nt(Y,C){if(1&Y&&(T.j41(0,"div"),T.DNE(1,it,16,10,"div",12),T.nI1(2,"slice"),T.k0s()),2&Y){const D=T.XpG(2);T.R7$(),T.Y8G("ngForOf",T.i5U(2,1,D.purchase.products,1))}}function De(Y,C){if(1&Y&&(T.j41(0,"div",1)(1,"span"),T.EFF(2),T.nI1(3,"date"),T.k0s(),T.j41(4,"span"),T.EFF(5),T.k0s(),T.j41(6,"div",2),T.DNE(7,ye,1,0,"img",3)(8,pe,1,0,"img",4),T.k0s(),T.DNE(9,Ge,14,6,"div",5),T.nI1(10,"slice"),T.DNE(11,nt,3,4,"div",6),T.k0s()),2&Y){const D=T.XpG();T.R7$(2),T.JRh(T.bMT(3,6,D.purchase.date)),T.R7$(3),T.SpI("total price: ",D.purchase.totalPrice,""),T.R7$(2),T.Y8G("ngIf",!D.changeArrow),T.R7$(),T.Y8G("ngIf",D.changeArrow),T.R7$(),T.Y8G("ngForOf",T.brH(10,8,D.purchase.products,0,1)),T.R7$(2),T.Y8G("ngIf",D.showMoreItems)}}let ct=(()=>{class Y{constructor(){this.showMoreItems=!1,this.changeArrow=!1}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275cmp=T.VBU({type:Y,selectors:[["app-purchased-product"]],inputs:{purchase:"purchase"},standalone:!0,features:[T.aNF],decls:1,vars:1,consts:[["class","purchase-wrapper",4,"ngIf"],[1,"purchase-wrapper"],[1,"see-more-arrow"],["src","assets/arrow-down.png","alt","img",3,"click",4,"ngIf"],["src","assets/arrow-up.png","alt","img",3,"click",4,"ngIf"],["class","purchase",4,"ngFor","ngForOf"],[4,"ngIf"],["src","assets/arrow-down.png","alt","img",3,"click"],["src","assets/arrow-up.png","alt","img",3,"click"],[1,"purchase"],["alt","img",3,"src"],[1,"grid-container"],["class","other-items purchase",4,"ngFor","ngForOf"],[1,"other-items","purchase"]],template:function(L,K){1&L&&T.DNE(0,De,12,12,"div",0),2&L&&T.Y8G("ngIf",K.purchase)},dependencies:[re.MD,re.Sq,re.bT,re.P9,Me.P,$e],styles:[".purchase-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;background-color:#7daecf;width:490px;position:relative}.purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]{position:absolute;bottom:-8px;width:35px;height:35px;display:flex;justify-content:center;align-items:center}.purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%]{display:flex;gap:3%;border:1px solid rgb(84,145,185);width:470px;height:120px;padding:10px;margin-bottom:36px}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:13%;height:100%}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:70px;height:100%}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]{display:grid;width:100%;gap:7px;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(3,1fr);text-align:center}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{align-self:center}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-self:center;border:none;background-color:#373b44;color:#fff;width:120px;height:20px;cursor:pointer}"]})}return Y})();var at=k(6569);function ot(Y,C){if(1&Y&&(T.j41(0,"div"),T.nrm(1,"app-purchased-product",3),T.k0s()),2&Y){const D=C.$implicit;T.R7$(),T.Y8G("purchase",D)}}function At(Y,C){if(1&Y&&(T.j41(0,"div"),T.nrm(1,"app-purchased-product",3),T.k0s()),2&Y){const D=C.$implicit;T.R7$(),T.Y8G("purchase",D)}}let $t=(()=>{class Y{constructor(D,L){this.authService=D,this.cd=L,this.purchasedProducts=[],this.halfLength=0,this.length=0}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.loggedUser.pipe((0,v.s)(1)).subscribe(D=>{D&&D.user.purchasedProducts?(this.user=D,this.purchasedProducts=D?.user.purchasedProducts.slice(1).sort((L,K)=>new Date(K.date).getTime()-new Date(L.date).getTime()),this.length=this.purchasedProducts.length,this.halfLength=Math.ceil(this.purchasedProducts.length/2),console.log("Purchased products:",this.purchasedProducts)):console.log("No user or purchased products found.")},D=>{console.error("Error fetching user data:",D)})}static#e=this.\u0275fac=function(L){return new(L||Y)(T.rXU(at.p),T.rXU(T.gRc))};static#t=this.\u0275cmp=T.VBU({type:Y,selectors:[["app-purchased-products"]],standalone:!0,features:[T.aNF],decls:9,vars:10,consts:[[1,"container"],[1,"purchased-products"],[4,"ngFor","ngForOf"],[3,"purchase"]],template:function(L,K){1&L&&(T.nrm(0,"app-header"),T.j41(1,"div",0)(2,"div",1),T.DNE(3,ot,2,1,"div",2),T.nI1(4,"slice"),T.k0s(),T.j41(5,"div",1),T.DNE(6,At,2,1,"div",2),T.nI1(7,"slice"),T.k0s()(),T.nrm(8,"app-footer")),2&L&&(T.R7$(3),T.Y8G("ngForOf",T.brH(4,2,K.purchasedProducts,0,K.halfLength)),T.R7$(3),T.Y8G("ngForOf",T.brH(7,6,K.purchasedProducts,K.halfLength,K.length)))},dependencies:[re.MD,re.Sq,re.P9,Se.l,fe.n,ct],styles:[".container[_ngcontent-%COMP%]{padding:40px;display:flex;justify-content:center;gap:20px}.container[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0})}return Y})();var ae=k(9417),we=k(5435);function ie(Y,C){if(1&Y&&(T.j41(0,"div"),T.nrm(1,"app-purchased-product",6),T.k0s()),2&Y){const D=C.$implicit;T.R7$(),T.Y8G("purchase",D)}}function je(Y,C){if(1&Y&&(T.j41(0,"div"),T.nrm(1,"app-purchased-product",6),T.k0s()),2&Y){const D=C.$implicit;T.R7$(),T.Y8G("purchase",D)}}const Oe=[{path:"",redirectTo:"products",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.resolve().then(k.bind(k,513)).then(Y=>Y.LoginAndRegistrationModule)},{path:"about-us",loadComponent:()=>k.e(70).then(k.bind(k,9070)).then(Y=>Y.AboutUsComponent)},{path:"contact",loadComponent:()=>k.e(222).then(k.bind(k,3222)).then(Y=>Y.ContanctComponent)},{path:"products",loadChildren:()=>Promise.resolve().then(k.bind(k,8569)).then(Y=>Y.ProductPageModule)},{path:"profile/:id",loadChildren:()=>Promise.resolve().then(k.bind(k,1343)).then(Y=>Y.ProfileModuleModule)},{path:"single-product/:id",loadChildren:()=>Promise.resolve().then(k.bind(k,2735)).then(Y=>Y.SingleProductPageModule)},{path:"categoty/:category",loadChildren:()=>k.e(456).then(k.bind(k,9456)).then(Y=>Y.SinleCategoryPageModuleModule)},{path:"purchasedProducts",component:$t},{path:"allPurchase",component:(()=>{class Y{constructor(D){this.service=D,this.halfLength=0,this.length=0,this.email=""}ngOnInit(){this.service.getAllClientPurchases().subscribe(D=>{if(D){const L=D.sort((K,he)=>new Date(he.date).getTime()-new Date(K.date).getTime());this.allPurchasedProducts=L,this.searched=L,this.length=D.length,this.halfLength=Math.ceil(D.length/2)}})}search(){this.email&&(this.searched=this.allPurchasedProducts?.filter(D=>D.email===this.email).sort((D,L)=>new Date(L.date).getTime()-new Date(D.date).getTime()))}static#e=this.\u0275fac=function(L){return new(L||Y)(T.rXU(we.m))};static#t=this.\u0275cmp=T.VBU({type:Y,selectors:[["app-all-client-purchases"]],standalone:!0,features:[T.aNF],decls:13,vars:11,consts:[[1,"search"],["type","email","placeholder","enter email",3,"ngModelChange","ngModel"],[3,"click"],[1,"container"],[1,"purchased-products"],[4,"ngFor","ngForOf"],[3,"purchase"]],template:function(L,K){1&L&&(T.nrm(0,"app-header"),T.j41(1,"div",0)(2,"input",1),T.mxI("ngModelChange",function(Pe){return T.DH7(K.email,Pe)||(K.email=Pe),Pe}),T.k0s(),T.j41(3,"button",2),T.bIt("click",function(){return K.search()}),T.EFF(4,"Search"),T.k0s()(),T.j41(5,"div",3)(6,"div",4),T.DNE(7,ie,2,1,"div",5),T.nI1(8,"slice"),T.k0s(),T.j41(9,"div",4),T.DNE(10,je,2,1,"div",5),T.nI1(11,"slice"),T.k0s()(),T.nrm(12,"app-footer")),2&L&&(T.R7$(2),T.R50("ngModel",K.email),T.R7$(5),T.Y8G("ngForOf",T.brH(8,3,K.searched,0,K.halfLength)),T.R7$(3),T.Y8G("ngForOf",T.brH(11,7,K.searched,K.halfLength,K.length)))},dependencies:[re.MD,re.Sq,re.P9,ae.YN,ae.me,ae.BC,ae.vS,ct,Se.l,fe.n],styles:[".container[_ngcontent-%COMP%]{padding:40px;display:flex;justify-content:center;gap:20px}.container[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:10px}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:30px;gap:10px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;border:none;border-radius:4px}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#71bedb;color:#fff;cursor:pointer}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{color:green}"]})}return Y})()}];let ce=(()=>{class Y{static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275mod=T.$C({type:Y});static#n=this.\u0275inj=T.G2t({imports:[R.iI.forRoot(Oe,{useHash:!0}),R.iI]})}return Y})(),xe=(()=>{class Y{constructor(){this.title="musicShop"}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275cmp=T.VBU({type:Y,selectors:[["app-root"]],decls:1,vars:0,template:function(L,K){1&L&&T.nrm(0,"router-outlet")},dependencies:[R.n3]})}return Y})();var xt=k(513),un=k(8569),jt=k(1343),ln=k(2735),Lt=k(3227),ut=k(9969);function Re(Y){return new T.wOt(3e3,!1)}function Nr(Y){switch(Y.length){case 0:return new ut.sf;case 1:return Y[0];default:return new ut.ui(Y)}}function Jt(Y,C,D=new Map,L=new Map){const K=[],he=[];let Pe=-1,Le=null;if(C.forEach(Et=>{const Ct=Et.get("offset"),mn=Ct==Pe,hn=mn&&Le||new Map;Et.forEach((hr,zn)=>{let Fn=zn,Hn=hr;if("offset"!==zn)switch(Fn=Y.normalizePropertyName(Fn,K),Hn){case ut.FX:Hn=D.get(zn);break;case ut.kp:Hn=L.get(zn);break;default:Hn=Y.normalizeStyleValue(zn,Fn,Hn,K)}hn.set(Fn,Hn)}),mn||he.push(hn),Le=hn,Pe=Ct}),K.length)throw function tr(Y){return new T.wOt(3502,!1)}();return he}function Zt(Y,C,D,L){switch(C){case"start":Y.onStart(()=>L(D&&Kr(D,"start",Y)));break;case"done":Y.onDone(()=>L(D&&Kr(D,"done",Y)));break;case"destroy":Y.onDestroy(()=>L(D&&Kr(D,"destroy",Y)))}}function Kr(Y,C,D){const he=Rn(Y.element,Y.triggerName,Y.fromState,Y.toState,C||Y.phaseName,D.totalTime??Y.totalTime,!!D.disabled),Pe=Y._data;return null!=Pe&&(he._data=Pe),he}function Rn(Y,C,D,L,K="",he=0,Pe){return{element:Y,triggerName:C,fromState:D,toState:L,phaseName:K,totalTime:he,disabled:!!Pe}}function xr(Y,C,D){let L=Y.get(C);return L||Y.set(C,L=D),L}function Ve(Y){const C=Y.indexOf(":");return[Y.substring(1,C),Y.slice(C+1)]}const Ce=typeof document>"u"?null:document.documentElement;function Ie(Y){const C=Y.parentNode||Y.host||null;return C===Ce?null:C}let Mt=null,me=!1;function _e(Y,C){for(;C;){if(C===Y)return!0;C=Ie(C)}return!1}function Tt(Y,C,D){if(D)return Array.from(Y.querySelectorAll(C));const L=Y.querySelector(C);return L?[L]:[]}let En=(()=>{class Y{validateStyleProperty(D){return function q(Y){Mt||(Mt=function se(){return typeof document<"u"?document.body:null}()||{},me=!!Mt.style&&"WebkitAppearance"in Mt.style);let C=!0;return Mt.style&&!function Qe(Y){return"ebkit"==Y.substring(1,6)}(Y)&&(C=Y in Mt.style,!C&&me&&(C="Webkit"+Y.charAt(0).toUpperCase()+Y.slice(1)in Mt.style)),C}(D)}matchesElement(D,L){return!1}containsElement(D,L){return _e(D,L)}getParentElement(D){return Ie(D)}query(D,L,K){return Tt(D,L,K)}computeStyle(D,L,K){return K||""}animate(D,L,K,he,Pe,Le=[],Et){return new ut.sf(K,he)}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275prov=T.jDH({token:Y,factory:Y.\u0275fac})}return Y})();class Bn{static#e=this.NOOP=new En}class qn{}const Wt=1e3,Qr="ng-enter",Ms="ng-leave",ls="ng-trigger",or=".ng-trigger",ss="ng-animating",Hi=".ng-animating";function ti(Y){if("number"==typeof Y)return Y;const C=Y.match(/^(-?[\.\d]+)(m?s)/);return!C||C.length<2?0:vt(parseFloat(C[1]),C[2])}function vt(Y,C){return"s"===C?Y*Wt:Y}function Ye(Y,C,D){return Y.hasOwnProperty("duration")?Y:function kt(Y,C,D){let K,he=0,Pe="";if("string"==typeof Y){const Le=Y.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Le)return C.push(Re()),{duration:0,delay:0,easing:""};K=vt(parseFloat(Le[1]),Le[2]);const Et=Le[3];null!=Et&&(he=vt(parseFloat(Et),Le[4]));const Ct=Le[5];Ct&&(Pe=Ct)}else K=Y;if(!D){let Le=!1,Et=C.length;K<0&&(C.push(function qe(){return new T.wOt(3100,!1)}()),Le=!0),he<0&&(C.push(function ft(){return new T.wOt(3101,!1)}()),Le=!0),Le&&C.splice(Et,0,Re())}return{duration:K,delay:he,easing:Pe}}(Y,C,D)}function ve(Y,C,D){C.forEach((L,K)=>{const he=Sr(K);D&&!D.has(K)&&D.set(K,Y.style[he]),Y.style[he]=L})}function Ee(Y,C){C.forEach((D,L)=>{const K=Sr(L);Y.style[K]=""})}function ht(Y){return Array.isArray(Y)?1==Y.length?Y[0]:(0,ut.K2)(Y):Y}const Xt=new RegExp("{{\\s*(.+?)\\s*}}","g");function Bt(Y){let C=[];if("string"==typeof Y){let D;for(;D=Xt.exec(Y);)C.push(D[1]);Xt.lastIndex=0}return C}function Mn(Y,C,D){const L=`${Y}`,K=L.replace(Xt,(he,Pe)=>{let Le=C[Pe];return null==Le&&(D.push(function It(Y){return new T.wOt(3003,!1)}()),Le=""),Le.toString()});return K==L?Y:K}const wn=/-+([a-z0-9])/g;function Sr(Y){return Y.replace(wn,(...C)=>C[1].toUpperCase())}function qr(Y,C,D){switch(C.type){case ut.If.Trigger:return Y.visitTrigger(C,D);case ut.If.State:return Y.visitState(C,D);case ut.If.Transition:return Y.visitTransition(C,D);case ut.If.Sequence:return Y.visitSequence(C,D);case ut.If.Group:return Y.visitGroup(C,D);case ut.If.Animate:return Y.visitAnimate(C,D);case ut.If.Keyframes:return Y.visitKeyframes(C,D);case ut.If.Style:return Y.visitStyle(C,D);case ut.If.Reference:return Y.visitReference(C,D);case ut.If.AnimateChild:return Y.visitAnimateChild(C,D);case ut.If.AnimateRef:return Y.visitAnimateRef(C,D);case ut.If.Query:return Y.visitQuery(C,D);case ut.If.Stagger:return Y.visitStagger(C,D);default:throw function Je(Y){return new T.wOt(3004,!1)}()}}function Si(Y,C){return window.getComputedStyle(Y)[C]}const Ir=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Dr extends qn{normalizePropertyName(C,D){return Sr(C)}normalizeStyleValue(C,D,L,K){let he="";const Pe=L.toString().trim();if(Ir.has(D)&&0!==L&&"0"!==L)if("number"==typeof L)he="px";else{const Le=L.match(/^[+-]?[\d\.]+([a-z]*)$/);Le&&0==Le[1].length&&K.push(function Kt(Y,C){return new T.wOt(3005,!1)}())}return Pe+he}}const On="*";const oo=new Set(["true","1"]),Yo=new Set(["false","0"]);function la(Y,C){const D=oo.has(Y)||Yo.has(Y),L=oo.has(C)||Yo.has(C);return(K,he)=>{let Pe=Y==On||Y==K,Le=C==On||C==he;return!Pe&&D&&"boolean"==typeof K&&(Pe=K?oo.has(Y):Yo.has(Y)),!Le&&L&&"boolean"==typeof he&&(Le=he?oo.has(C):Yo.has(C)),Pe&&Le}}const rr=new RegExp("s*:selfs*,?","g");function vo(Y,C,D,L){return new wr(Y).build(C,D,L)}class wr{constructor(C){this._driver=C}build(C,D,L){const K=new da(D);return this._resetContextStyleTimingState(K),qr(this,ht(C),K)}_resetContextStyleTimingState(C){C.currentQuerySelector="",C.collectedStyles=new Map,C.collectedStyles.set("",new Map),C.currentTime=0}visitTrigger(C,D){let L=D.queryCount=0,K=D.depCount=0;const he=[],Pe=[];return"@"==C.name.charAt(0)&&D.errors.push(function gn(){return new T.wOt(3006,!1)}()),C.definitions.forEach(Le=>{if(this._resetContextStyleTimingState(D),Le.type==ut.If.State){const Et=Le,Ct=Et.name;Ct.toString().split(/\s*,\s*/).forEach(mn=>{Et.name=mn,he.push(this.visitState(Et,D))}),Et.name=Ct}else if(Le.type==ut.If.Transition){const Et=this.visitTransition(Le,D);L+=Et.queryCount,K+=Et.depCount,Pe.push(Et)}else D.errors.push(function tn(){return new T.wOt(3007,!1)}())}),{type:ut.If.Trigger,name:C.name,states:he,transitions:Pe,queryCount:L,depCount:K,options:null}}visitState(C,D){const L=this.visitStyle(C.styles,D),K=C.options&&C.options.params||null;if(L.containsDynamicStyles){const he=new Set,Pe=K||{};L.styles.forEach(Le=>{Le instanceof Map&&Le.forEach(Et=>{Bt(Et).forEach(Ct=>{Pe.hasOwnProperty(Ct)||he.add(Ct)})})}),he.size&&D.errors.push(function sn(Y,C){return new T.wOt(3008,!1)}(0,he.values()))}return{type:ut.If.State,name:C.name,style:L,options:K?{params:K}:null}}visitTransition(C,D){D.queryCount=0,D.depCount=0;const L=qr(this,ht(C.animation),D),K=function ur(Y,C){const D=[];return"string"==typeof Y?Y.split(/\s*,\s*/).forEach(L=>function Vo(Y,C,D){if(":"==Y[0]){const Et=function Gi(Y,C){switch(Y){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(D,L)=>parseFloat(L)>parseFloat(D);case":decrement":return(D,L)=>parseFloat(L)<parseFloat(D);default:return C.push(function Nt(Y){return new T.wOt(3016,!1)}()),"* => *"}}(Y,D);if("function"==typeof Et)return void C.push(Et);Y=Et}const L=Y.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==L||L.length<4)return D.push(function Zr(Y){return new T.wOt(3015,!1)}()),C;const K=L[1],he=L[2],Pe=L[3];C.push(la(K,Pe)),"<"==he[0]&&(K!=On||Pe!=On)&&C.push(la(Pe,K))}(L,D,C)):D.push(Y),D}(C.expr,D.errors);return{type:ut.If.Transition,matchers:K,animation:L,queryCount:D.queryCount,depCount:D.depCount,options:Ui(C.options)}}visitSequence(C,D){return{type:ut.If.Sequence,steps:C.steps.map(L=>qr(this,L,D)),options:Ui(C.options)}}visitGroup(C,D){const L=D.currentTime;let K=0;const he=C.steps.map(Pe=>{D.currentTime=L;const Le=qr(this,Pe,D);return K=Math.max(K,D.currentTime),Le});return D.currentTime=K,{type:ut.If.Group,steps:he,options:Ui(C.options)}}visitAnimate(C,D){const L=function Pr(Y,C){if(Y.hasOwnProperty("duration"))return Y;if("number"==typeof Y)return Ii(Ye(Y,C).duration,0,"");const D=Y;if(D.split(/\s+/).some(he=>"{"==he.charAt(0)&&"{"==he.charAt(1))){const he=Ii(0,0,"");return he.dynamic=!0,he.strValue=D,he}const K=Ye(D,C);return Ii(K.duration,K.delay,K.easing)}(C.timings,D.errors);D.currentAnimateTimings=L;let K,he=C.styles?C.styles:(0,ut.iF)({});if(he.type==ut.If.Keyframes)K=this.visitKeyframes(he,D);else{let Pe=C.styles,Le=!1;if(!Pe){Le=!0;const Ct={};L.easing&&(Ct.easing=L.easing),Pe=(0,ut.iF)(Ct)}D.currentTime+=L.duration+L.delay;const Et=this.visitStyle(Pe,D);Et.isEmptyStep=Le,K=Et}return D.currentAnimateTimings=null,{type:ut.If.Animate,timings:L,style:K,options:null}}visitStyle(C,D){const L=this._makeStyleAst(C,D);return this._validateStyleAst(L,D),L}_makeStyleAst(C,D){const L=[],K=Array.isArray(C.styles)?C.styles:[C.styles];for(let Le of K)"string"==typeof Le?Le===ut.kp?L.push(Le):D.errors.push(new T.wOt(3002,!1)):L.push(new Map(Object.entries(Le)));let he=!1,Pe=null;return L.forEach(Le=>{if(Le instanceof Map&&(Le.has("easing")&&(Pe=Le.get("easing"),Le.delete("easing")),!he))for(let Et of Le.values())if(Et.toString().indexOf("{{")>=0){he=!0;break}}),{type:ut.If.Style,styles:L,easing:Pe,offset:C.offset,containsDynamicStyles:he,options:null}}_validateStyleAst(C,D){const L=D.currentAnimateTimings;let K=D.currentTime,he=D.currentTime;L&&he>0&&(he-=L.duration+L.delay),C.styles.forEach(Pe=>{"string"!=typeof Pe&&Pe.forEach((Le,Et)=>{const Ct=D.collectedStyles.get(D.currentQuerySelector),mn=Ct.get(Et);let hn=!0;mn&&(he!=K&&he>=mn.startTime&&K<=mn.endTime&&(D.errors.push(function Ln(Y,C,D,L,K){return new T.wOt(3010,!1)}()),hn=!1),he=mn.startTime),hn&&Ct.set(Et,{startTime:he,endTime:K}),D.options&&function Xe(Y,C,D){const L=C.params||{},K=Bt(Y);K.length&&K.forEach(he=>{L.hasOwnProperty(he)||D.push(function yt(Y){return new T.wOt(3001,!1)}())})}(Le,D.options,D.errors)})})}visitKeyframes(C,D){const L={type:ut.If.Keyframes,styles:[],options:null};if(!D.currentAnimateTimings)return D.errors.push(function st(){return new T.wOt(3011,!1)}()),L;let he=0;const Pe=[];let Le=!1,Et=!1,Ct=0;const mn=C.steps.map(oi=>{const Pn=this._makeStyleAst(oi,D);let Es=null!=Pn.offset?Pn.offset:function Rs(Y){if("string"==typeof Y)return null;let C=null;if(Array.isArray(Y))Y.forEach(D=>{if(D instanceof Map&&D.has("offset")){const L=D;C=parseFloat(L.get("offset")),L.delete("offset")}});else if(Y instanceof Map&&Y.has("offset")){const D=Y;C=parseFloat(D.get("offset")),D.delete("offset")}return C}(Pn.styles),ki=0;return null!=Es&&(he++,ki=Pn.offset=Es),Et=Et||ki<0||ki>1,Le=Le||ki<Ct,Ct=ki,Pe.push(ki),Pn});Et&&D.errors.push(function In(){return new T.wOt(3012,!1)}()),Le&&D.errors.push(function Kn(){return new T.wOt(3200,!1)}());const hn=C.steps.length;let hr=0;he>0&&he<hn?D.errors.push(function sr(){return new T.wOt(3202,!1)}()):0==he&&(hr=1/(hn-1));const zn=hn-1,Fn=D.currentTime,Hn=D.currentAnimateTimings,Tr=Hn.duration;return mn.forEach((oi,Pn)=>{const Es=hr>0?Pn==zn?1:hr*Pn:Pe[Pn],ki=Es*Tr;D.currentTime=Fn+Hn.delay+ki,Hn.duration=ki,this._validateStyleAst(oi,D),oi.offset=Es,L.styles.push(oi)}),L}visitReference(C,D){return{type:ut.If.Reference,animation:qr(this,ht(C.animation),D),options:Ui(C.options)}}visitAnimateChild(C,D){return D.depCount++,{type:ut.If.AnimateChild,options:Ui(C.options)}}visitAnimateRef(C,D){return{type:ut.If.AnimateRef,animation:this.visitReference(C.animation,D),options:Ui(C.options)}}visitQuery(C,D){const L=D.currentQuerySelector,K=C.options||{};D.queryCount++,D.currentQuery=C;const[he,Pe]=function Lo(Y){const C=!!Y.split(/\s*,\s*/).find(D=>":self"==D);return C&&(Y=Y.replace(rr,"")),Y=Y.replace(/@\*/g,or).replace(/@\w+/g,D=>or+"-"+D.slice(1)).replace(/:animating/g,Hi),[Y,C]}(C.selector);D.currentQuerySelector=L.length?L+" "+he:he,xr(D.collectedStyles,D.currentQuerySelector,new Map);const Le=qr(this,ht(C.animation),D);return D.currentQuery=null,D.currentQuerySelector=L,{type:ut.If.Query,selector:he,limit:K.limit||0,optional:!!K.optional,includeSelf:Pe,animation:Le,originalSelector:C.selector,options:Ui(C.options)}}visitStagger(C,D){D.currentQuery||D.errors.push(function St(){return new T.wOt(3013,!1)}());const L="full"===C.timings?{duration:0,delay:0,easing:"full"}:Ye(C.timings,D.errors,!0);return{type:ut.If.Stagger,animation:qr(this,ht(C.animation),D),timings:L,options:null}}}class da{constructor(C){this.errors=C,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ui(Y){return Y?(Y={...Y}).params&&(Y.params=function qs(Y){return Y?{...Y}:null}(Y.params)):Y={},Y}function Ii(Y,C,D){return{duration:Y,delay:C,easing:D}}function Cr(Y,C,D,L,K,he,Pe=null,Le=!1){return{type:1,element:Y,keyframes:C,preStyleProps:D,postStyleProps:L,duration:K,delay:he,totalTime:K+he,easing:Pe,subTimeline:Le}}class fs{constructor(){this._map=new Map}get(C){return this._map.get(C)||[]}append(C,D){let L=this._map.get(C);L||this._map.set(C,L=[]),L.push(...D)}has(C){return this._map.has(C)}clear(){this._map.clear()}}const Uo=new RegExp(":enter","g"),Hr=new RegExp(":leave","g");function ei(Y,C,D,L,K,he=new Map,Pe=new Map,Le,Et,Ct=[]){return(new os).buildKeyframes(Y,C,D,L,K,he,Pe,Le,Et,Ct)}class os{buildKeyframes(C,D,L,K,he,Pe,Le,Et,Ct,mn=[]){Ct=Ct||new fs;const hn=new si(C,D,Ct,K,he,mn,[]);hn.options=Et;const hr=Et.delay?ti(Et.delay):0;hn.currentTimeline.delayNextStep(hr),hn.currentTimeline.setStyles([Pe],null,hn.errors,Et),qr(this,L,hn);const zn=hn.timelines.filter(Fn=>Fn.containsAnimation());if(zn.length&&Le.size){let Fn;for(let Hn=zn.length-1;Hn>=0;Hn--){const Tr=zn[Hn];if(Tr.element===D){Fn=Tr;break}}Fn&&!Fn.allowOnlyTimelineStyles()&&Fn.setStyles([Le],null,hn.errors,Et)}return zn.length?zn.map(Fn=>Fn.buildKeyframes()):[Cr(D,[],[],[],0,hr,"",!1)]}visitTrigger(C,D){}visitState(C,D){}visitTransition(C,D){}visitAnimateChild(C,D){const L=D.subInstructions.get(D.element);if(L){const K=D.createSubContext(C.options),he=D.currentTimeline.currentTime,Pe=this._visitSubInstructions(L,K,K.options);he!=Pe&&D.transformIntoNewTimeline(Pe)}D.previousNode=C}visitAnimateRef(C,D){const L=D.createSubContext(C.options);L.transformIntoNewTimeline(),this._applyAnimationRefDelays([C.options,C.animation.options],D,L),this.visitReference(C.animation,L),D.transformIntoNewTimeline(L.currentTimeline.currentTime),D.previousNode=C}_applyAnimationRefDelays(C,D,L){for(const K of C){const he=K?.delay;if(he){const Pe="number"==typeof he?he:ti(Mn(he,K?.params??{},D.errors));L.delayNextStep(Pe)}}}_visitSubInstructions(C,D,L){let he=D.currentTimeline.currentTime;const Pe=null!=L.duration?ti(L.duration):null,Le=null!=L.delay?ti(L.delay):null;return 0!==Pe&&C.forEach(Et=>{const Ct=D.appendInstructionToTimeline(Et,Pe,Le);he=Math.max(he,Ct.duration+Ct.delay)}),he}visitReference(C,D){D.updateOptions(C.options,!0),qr(this,C.animation,D),D.previousNode=C}visitSequence(C,D){const L=D.subContextCount;let K=D;const he=C.options;if(he&&(he.params||he.delay)&&(K=D.createSubContext(he),K.transformIntoNewTimeline(),null!=he.delay)){K.previousNode.type==ut.If.Style&&(K.currentTimeline.snapshotCurrentStyles(),K.previousNode=dn);const Pe=ti(he.delay);K.delayNextStep(Pe)}C.steps.length&&(C.steps.forEach(Pe=>qr(this,Pe,K)),K.currentTimeline.applyStylesToKeyframe(),K.subContextCount>L&&K.transformIntoNewTimeline()),D.previousNode=C}visitGroup(C,D){const L=[];let K=D.currentTimeline.currentTime;const he=C.options&&C.options.delay?ti(C.options.delay):0;C.steps.forEach(Pe=>{const Le=D.createSubContext(C.options);he&&Le.delayNextStep(he),qr(this,Pe,Le),K=Math.max(K,Le.currentTimeline.currentTime),L.push(Le.currentTimeline)}),L.forEach(Pe=>D.currentTimeline.mergeTimelineCollectedStyles(Pe)),D.transformIntoNewTimeline(K),D.previousNode=C}_visitTiming(C,D){if(C.dynamic){const L=C.strValue;return Ye(D.params?Mn(L,D.params,D.errors):L,D.errors)}return{duration:C.duration,delay:C.delay,easing:C.easing}}visitAnimate(C,D){const L=D.currentAnimateTimings=this._visitTiming(C.timings,D),K=D.currentTimeline;L.delay&&(D.incrementTime(L.delay),K.snapshotCurrentStyles());const he=C.style;he.type==ut.If.Keyframes?this.visitKeyframes(he,D):(D.incrementTime(L.duration),this.visitStyle(he,D),K.applyStylesToKeyframe()),D.currentAnimateTimings=null,D.previousNode=C}visitStyle(C,D){const L=D.currentTimeline,K=D.currentAnimateTimings;!K&&L.hasCurrentStyleProperties()&&L.forwardFrame();const he=K&&K.easing||C.easing;C.isEmptyStep?L.applyEmptyStep(he):L.setStyles(C.styles,he,D.errors,D.options),D.previousNode=C}visitKeyframes(C,D){const L=D.currentAnimateTimings,K=D.currentTimeline.duration,he=L.duration,Le=D.createSubContext().currentTimeline;Le.easing=L.easing,C.styles.forEach(Et=>{Le.forwardTime((Et.offset||0)*he),Le.setStyles(Et.styles,Et.easing,D.errors,D.options),Le.applyStylesToKeyframe()}),D.currentTimeline.mergeTimelineCollectedStyles(Le),D.transformIntoNewTimeline(K+he),D.previousNode=C}visitQuery(C,D){const L=D.currentTimeline.currentTime,K=C.options||{},he=K.delay?ti(K.delay):0;he&&(D.previousNode.type===ut.If.Style||0==L&&D.currentTimeline.hasCurrentStyleProperties())&&(D.currentTimeline.snapshotCurrentStyles(),D.previousNode=dn);let Pe=L;const Le=D.invokeQuery(C.selector,C.originalSelector,C.limit,C.includeSelf,!!K.optional,D.errors);D.currentQueryTotal=Le.length;let Et=null;Le.forEach((Ct,mn)=>{D.currentQueryIndex=mn;const hn=D.createSubContext(C.options,Ct);he&&hn.delayNextStep(he),Ct===D.element&&(Et=hn.currentTimeline),qr(this,C.animation,hn),hn.currentTimeline.applyStylesToKeyframe(),Pe=Math.max(Pe,hn.currentTimeline.currentTime)}),D.currentQueryIndex=0,D.currentQueryTotal=0,D.transformIntoNewTimeline(Pe),Et&&(D.currentTimeline.mergeTimelineCollectedStyles(Et),D.currentTimeline.snapshotCurrentStyles()),D.previousNode=C}visitStagger(C,D){const L=D.parentContext,K=D.currentTimeline,he=C.timings,Pe=Math.abs(he.duration),Le=Pe*(D.currentQueryTotal-1);let Et=Pe*D.currentQueryIndex;switch(he.duration<0?"reverse":he.easing){case"reverse":Et=Le-Et;break;case"full":Et=L.currentStaggerTime}const mn=D.currentTimeline;Et&&mn.delayNextStep(Et);const hn=mn.currentTime;qr(this,C.animation,D),D.previousNode=C,L.currentStaggerTime=K.currentTime-hn+(K.startTime-L.currentTimeline.startTime)}}const dn={};class si{constructor(C,D,L,K,he,Pe,Le,Et){this._driver=C,this.element=D,this.subInstructions=L,this._enterClassName=K,this._leaveClassName=he,this.errors=Pe,this.timelines=Le,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=dn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Et||new ps(this._driver,D,0),Le.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(C,D){if(!C)return;const L=C;let K=this.options;null!=L.duration&&(K.duration=ti(L.duration)),null!=L.delay&&(K.delay=ti(L.delay));const he=L.params;if(he){let Pe=K.params;Pe||(Pe=this.options.params={}),Object.keys(he).forEach(Le=>{(!D||!Pe.hasOwnProperty(Le))&&(Pe[Le]=Mn(he[Le],Pe,this.errors))})}}_copyOptions(){const C={};if(this.options){const D=this.options.params;if(D){const L=C.params={};Object.keys(D).forEach(K=>{L[K]=D[K]})}}return C}createSubContext(C=null,D,L){const K=D||this.element,he=new si(this._driver,K,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(K,L||0));return he.previousNode=this.previousNode,he.currentAnimateTimings=this.currentAnimateTimings,he.options=this._copyOptions(),he.updateOptions(C),he.currentQueryIndex=this.currentQueryIndex,he.currentQueryTotal=this.currentQueryTotal,he.parentContext=this,this.subContextCount++,he}transformIntoNewTimeline(C){return this.previousNode=dn,this.currentTimeline=this.currentTimeline.fork(this.element,C),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(C,D,L){const K={duration:D??C.duration,delay:this.currentTimeline.currentTime+(L??0)+C.delay,easing:""},he=new ks(this._driver,C.element,C.keyframes,C.preStyleProps,C.postStyleProps,K,C.stretchStartingKeyframe);return this.timelines.push(he),K}incrementTime(C){this.currentTimeline.forwardTime(this.currentTimeline.duration+C)}delayNextStep(C){C>0&&this.currentTimeline.delayNextStep(C)}invokeQuery(C,D,L,K,he,Pe){let Le=[];if(K&&Le.push(this.element),C.length>0){C=(C=C.replace(Uo,"."+this._enterClassName)).replace(Hr,"."+this._leaveClassName);let Ct=this._driver.query(this.element,C,1!=L);0!==L&&(Ct=L<0?Ct.slice(Ct.length+L,Ct.length):Ct.slice(0,L)),Le.push(...Ct)}return!he&&0==Le.length&&Pe.push(function _t(Y){return new T.wOt(3014,!1)}()),Le}}class ps{constructor(C,D,L,K){this._driver=C,this.element=D,this.startTime=L,this._elementTimelineStylesLookup=K,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(D),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(D,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(C){const D=1===this._keyframes.size&&this._pendingStyles.size;this.duration||D?(this.forwardTime(this.currentTime+C),D&&this.snapshotCurrentStyles()):this.startTime+=C}fork(C,D){return this.applyStylesToKeyframe(),new ps(this._driver,C,D||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(C){this.applyStylesToKeyframe(),this.duration=C,this._loadKeyframe()}_updateStyle(C,D){this._localTimelineStyles.set(C,D),this._globalTimelineStyles.set(C,D),this._styleSummary.set(C,{time:this.currentTime,value:D})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(C){C&&this._previousKeyframe.set("easing",C);for(let[D,L]of this._globalTimelineStyles)this._backFill.set(D,L||ut.kp),this._currentKeyframe.set(D,ut.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(C,D,L,K){D&&this._previousKeyframe.set("easing",D);const he=K&&K.params||{},Pe=function Xs(Y,C){const D=new Map;let L;return Y.forEach(K=>{if("*"===K){L??=C.keys();for(let he of L)D.set(he,ut.kp)}else for(let[he,Pe]of K)D.set(he,Pe)}),D}(C,this._globalTimelineStyles);for(let[Le,Et]of Pe){const Ct=Mn(Et,he,L);this._pendingStyles.set(Le,Ct),this._localTimelineStyles.has(Le)||this._backFill.set(Le,this._globalTimelineStyles.get(Le)??ut.kp),this._updateStyle(Le,Ct)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((C,D)=>{this._currentKeyframe.set(D,C)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((C,D)=>{this._currentKeyframe.has(D)||this._currentKeyframe.set(D,C)}))}snapshotCurrentStyles(){for(let[C,D]of this._localTimelineStyles)this._pendingStyles.set(C,D),this._updateStyle(C,D)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const C=[];for(let D in this._currentKeyframe)C.push(D);return C}mergeTimelineCollectedStyles(C){C._styleSummary.forEach((D,L)=>{const K=this._styleSummary.get(L);(!K||D.time>K.time)&&this._updateStyle(L,D.value)})}buildKeyframes(){this.applyStylesToKeyframe();const C=new Set,D=new Set,L=1===this._keyframes.size&&0===this.duration;let K=[];this._keyframes.forEach((Le,Et)=>{const Ct=new Map([...this._backFill,...Le]);Ct.forEach((mn,hn)=>{mn===ut.FX?C.add(hn):mn===ut.kp&&D.add(hn)}),L||Ct.set("offset",Et/this.duration),K.push(Ct)});const he=[...C.values()],Pe=[...D.values()];if(L){const Le=K[0],Et=new Map(Le);Le.set("offset",0),Et.set("offset",1),K=[Le,Et]}return Cr(this.element,K,he,Pe,this.duration,this.startTime,this.easing,!1)}}class ks extends ps{constructor(C,D,L,K,he,Pe,Le=!1){super(C,D,Pe.delay),this.keyframes=L,this.preStyleProps=K,this.postStyleProps=he,this._stretchStartingKeyframe=Le,this.timings={duration:Pe.duration,delay:Pe.delay,easing:Pe.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let C=this.keyframes,{delay:D,duration:L,easing:K}=this.timings;if(this._stretchStartingKeyframe&&D){const he=[],Pe=L+D,Le=D/Pe,Et=new Map(C[0]);Et.set("offset",0),he.push(Et);const Ct=new Map(C[0]);Ct.set("offset",gs(Le)),he.push(Ct);const mn=C.length-1;for(let hn=1;hn<=mn;hn++){let hr=new Map(C[hn]);const zn=hr.get("offset");hr.set("offset",gs((D+zn*L)/Pe)),he.push(hr)}L=Pe,D=0,K="",C=he}return Cr(this.element,C,this.preStyleProps,this.postStyleProps,L,D,K,!0)}}function gs(Y,C=3){const D=Math.pow(10,C-1);return Math.round(Y*D)/D}function Pi(Y,C,D,L,K,he,Pe,Le,Et,Ct,mn,hn,hr){return{type:0,element:Y,triggerName:C,isRemovalTransition:K,fromState:D,fromStyles:he,toState:L,toStyles:Pe,timelines:Le,queriedElements:Et,preStyleProps:Ct,postStyleProps:mn,totalTime:hn,errors:hr}}const es={};class zi{constructor(C,D,L){this._triggerName=C,this.ast=D,this._stateStyles=L}match(C,D,L,K){return function ts(Y,C,D,L,K){return Y.some(he=>he(C,D,L,K))}(this.ast.matchers,C,D,L,K)}buildStyles(C,D,L){let K=this._stateStyles.get("*");return void 0!==C&&(K=this._stateStyles.get(C?.toString())||K),K?K.buildStyles(D,L):new Map}build(C,D,L,K,he,Pe,Le,Et,Ct,mn){const hn=[],hr=this.ast.options&&this.ast.options.params||es,Fn=this.buildStyles(L,Le&&Le.params||es,hn),Hn=Et&&Et.params||es,Tr=this.buildStyles(K,Hn,hn),oi=new Set,Pn=new Map,Es=new Map,ki="void"===K,bo={params:Fs(Hn,hr),delay:this.ast.options?.delay},rs=mn?[]:ei(C,D,this.ast.animation,he,Pe,Fn,Tr,bo,Ct,hn);let as=0;return rs.forEach(cs=>{as=Math.max(cs.duration+cs.delay,as)}),hn.length?Pi(D,this._triggerName,L,K,ki,Fn,Tr,[],[],Pn,Es,as,hn):(rs.forEach(cs=>{const Ho=cs.element,uo=xr(Pn,Ho,new Set);cs.preStyleProps.forEach(qi=>uo.add(qi));const eo=xr(Es,Ho,new Set);cs.postStyleProps.forEach(qi=>eo.add(qi)),Ho!==D&&oi.add(Ho)}),Pi(D,this._triggerName,L,K,ki,Fn,Tr,rs,[...oi.values()],Pn,Es,as))}}function Fs(Y,C){const D={...C};return Object.entries(Y).forEach(([L,K])=>{null!=K&&(D[L]=K)}),D}class ji{constructor(C,D,L){this.styles=C,this.defaultParams=D,this.normalizer=L}buildStyles(C,D){const L=new Map,K=Fs(C,this.defaultParams);return this.styles.styles.forEach(he=>{"string"!=typeof he&&he.forEach((Pe,Le)=>{Pe&&(Pe=Mn(Pe,K,D));const Et=this.normalizer.normalizePropertyName(Le,D);Pe=this.normalizer.normalizeStyleValue(Le,Et,Pe,D),L.set(Le,Pe)})}),L}}class ns{constructor(C,D,L){this.name=C,this.ast=D,this._normalizer=L,this.transitionFactories=[],this.states=new Map,D.states.forEach(K=>{this.states.set(K.name,new ji(K.style,K.options&&K.options.params||{},L))}),Eo(this.states,"true","1"),Eo(this.states,"false","0"),D.transitions.forEach(K=>{this.transitionFactories.push(new zi(C,K,this.states))}),this.fallbackTransition=function Mi(Y,C,D){return new zi(Y,{type:ut.If.Transition,animation:{type:ut.If.Sequence,steps:[],options:null},matchers:[(Pe,Le)=>!0],options:null,queryCount:0,depCount:0},C)}(C,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(C,D,L,K){return this.transitionFactories.find(Pe=>Pe.match(C,D,L,K))||null}matchStyles(C,D,L){return this.fallbackTransition.buildStyles(C,D,L)}}function Eo(Y,C,D){Y.has(C)?Y.has(D)||Y.set(D,Y.get(C)):Y.has(D)&&Y.set(C,Y.get(D))}const ao=new fs;class $i{constructor(C,D,L){this.bodyNode=C,this._driver=D,this._normalizer=L,this._animations=new Map,this._playersById=new Map,this.players=[]}register(C,D){const L=[],he=vo(this._driver,D,L,[]);if(L.length)throw function An(Y){return new T.wOt(3503,!1)}();this._animations.set(C,he)}_buildPlayer(C,D,L){const K=C.element,he=Jt(this._normalizer,C.keyframes,D,L);return this._driver.animate(K,he,C.duration,C.delay,C.easing,[],!0)}create(C,D,L={}){const K=[],he=this._animations.get(C);let Pe;const Le=new Map;if(he?(Pe=ei(this._driver,D,he,Qr,Ms,new Map,new Map,L,ao,K),Pe.forEach(mn=>{const hn=xr(Le,mn.element,new Map);mn.postStyleProps.forEach(hr=>hn.set(hr,null))})):(K.push(function bn(){return new T.wOt(3300,!1)}()),Pe=[]),K.length)throw function kr(Y){return new T.wOt(3504,!1)}();Le.forEach((mn,hn)=>{mn.forEach((hr,zn)=>{mn.set(zn,this._driver.computeStyle(hn,zn,ut.kp))})});const Ct=Nr(Pe.map(mn=>{const hn=Le.get(mn.element);return this._buildPlayer(mn,new Map,hn)}));return this._playersById.set(C,Ct),Ct.onDestroy(()=>this.destroy(C)),this.players.push(Ct),Ct}destroy(C){const D=this._getPlayer(C);D.destroy(),this._playersById.delete(C);const L=this.players.indexOf(D);L>=0&&this.players.splice(L,1)}_getPlayer(C){const D=this._playersById.get(C);if(!D)throw function Wr(Y){return new T.wOt(3301,!1)}();return D}listen(C,D,L,K){const he=Rn(D,"","","");return Zt(this._getPlayer(C),L,he,K),()=>{}}command(C,D,L,K){if("register"==L)return void this.register(C,K[0]);if("create"==L)return void this.create(C,D,K[0]||{});const he=this._getPlayer(C);switch(L){case"play":he.play();break;case"pause":he.pause();break;case"reset":he.reset();break;case"restart":he.restart();break;case"finish":he.finish();break;case"init":he.init();break;case"setPosition":he.setPosition(parseFloat(K[0]));break;case"destroy":this.destroy(C)}}}const ms="ng-animate-queued",Jo="ng-animate-disabled",Ci=[],Io={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Zo={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},wi="__ng_removed";class yr{get params(){return this.options.params}constructor(C,D=""){this.namespaceId=D;const L=C&&C.hasOwnProperty("value");if(this.value=function _s(Y){return Y??null}(L?C.value:C),L){const{value:he,...Pe}=C;this.options=Pe}else this.options={};this.options.params||(this.options.params={})}absorbOptions(C){const D=C.params;if(D){const L=this.options.params;Object.keys(D).forEach(K=>{null==L[K]&&(L[K]=D[K])})}}}const Us="void",ha=new yr(Us);class Yr{constructor(C,D,L){this.id=C,this.hostElement=D,this._engine=L,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+C,Z(D,this._hostClassName)}listen(C,D,L,K){if(!this._triggers.has(D))throw function jr(Y,C){return new T.wOt(3302,!1)}();if(null==L||0==L.length)throw function Vi(Y){return new T.wOt(3303,!1)}();if(!function xi(Y){return"start"==Y||"done"==Y}(L))throw function Or(Y,C){return new T.wOt(3400,!1)}();const he=xr(this._elementListeners,C,[]),Pe={name:D,phase:L,callback:K};he.push(Pe);const Le=xr(this._engine.statesByElement,C,new Map);return Le.has(D)||(Z(C,ls),Z(C,ls+"-"+D),Le.set(D,ha)),()=>{this._engine.afterFlush(()=>{const Et=he.indexOf(Pe);Et>=0&&he.splice(Et,1),this._triggers.has(D)||Le.delete(D)})}}register(C,D){return!this._triggers.has(C)&&(this._triggers.set(C,D),!0)}_getTrigger(C){const D=this._triggers.get(C);if(!D)throw function hs(Y){return new T.wOt(3401,!1)}();return D}trigger(C,D,L,K=!0){const he=this._getTrigger(D),Pe=new ar(this.id,D,C);let Le=this._engine.statesByElement.get(C);Le||(Z(C,ls),Z(C,ls+"-"+D),this._engine.statesByElement.set(C,Le=new Map));let Et=Le.get(D);const Ct=new yr(L,this.id);if(!(L&&L.hasOwnProperty("value"))&&Et&&Ct.absorbOptions(Et.options),Le.set(D,Ct),Et||(Et=ha),Ct.value!==Us&&Et.value===Ct.value){if(!function Js(Y,C){const D=Object.keys(Y),L=Object.keys(C);if(D.length!=L.length)return!1;for(let K=0;K<D.length;K++){const he=D[K];if(!C.hasOwnProperty(he)||Y[he]!==C[he])return!1}return!0}(Et.params,Ct.params)){const Hn=[],Tr=he.matchStyles(Et.value,Et.params,Hn),oi=he.matchStyles(Ct.value,Ct.params,Hn);Hn.length?this._engine.reportError(Hn):this._engine.afterFlush(()=>{Ee(C,Tr),ve(C,oi)})}return}const hr=xr(this._engine.playersByElement,C,[]);hr.forEach(Hn=>{Hn.namespaceId==this.id&&Hn.triggerName==D&&Hn.queued&&Hn.destroy()});let zn=he.matchTransition(Et.value,Ct.value,C,Ct.params),Fn=!1;if(!zn){if(!K)return;zn=he.fallbackTransition,Fn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:D,transition:zn,fromState:Et,toState:Ct,player:Pe,isFallbackTransition:Fn}),Fn||(Z(C,ms),Pe.onStart(()=>{Ae(C,ms)})),Pe.onDone(()=>{let Hn=this.players.indexOf(Pe);Hn>=0&&this.players.splice(Hn,1);const Tr=this._engine.playersByElement.get(C);if(Tr){let oi=Tr.indexOf(Pe);oi>=0&&Tr.splice(oi,1)}}),this.players.push(Pe),hr.push(Pe),Pe}deregister(C){this._triggers.delete(C),this._engine.statesByElement.forEach(D=>D.delete(C)),this._elementListeners.forEach((D,L)=>{this._elementListeners.set(L,D.filter(K=>K.name!=C))})}clearElementCache(C){this._engine.statesByElement.delete(C),this._elementListeners.delete(C);const D=this._engine.playersByElement.get(C);D&&(D.forEach(L=>L.destroy()),this._engine.playersByElement.delete(C))}_signalRemovalForInnerTriggers(C,D){const L=this._engine.driver.query(C,or,!0);L.forEach(K=>{if(K[wi])return;const he=this._engine.fetchNamespacesByElement(K);he.size?he.forEach(Pe=>Pe.triggerLeaveAnimation(K,D,!1,!0)):this.clearElementCache(K)}),this._engine.afterFlushAnimationsDone(()=>L.forEach(K=>this.clearElementCache(K)))}triggerLeaveAnimation(C,D,L,K){const he=this._engine.statesByElement.get(C),Pe=new Map;if(he){const Le=[];if(he.forEach((Et,Ct)=>{if(Pe.set(Ct,Et.value),this._triggers.has(Ct)){const mn=this.trigger(C,Ct,Us,K);mn&&Le.push(mn)}}),Le.length)return this._engine.markElementAsRemoved(this.id,C,!0,D,Pe),L&&Nr(Le).onDone(()=>this._engine.processLeaveNode(C)),!0}return!1}prepareLeaveAnimationListeners(C){const D=this._elementListeners.get(C),L=this._engine.statesByElement.get(C);if(D&&L){const K=new Set;D.forEach(he=>{const Pe=he.name;if(K.has(Pe))return;K.add(Pe);const Et=this._triggers.get(Pe).fallbackTransition,Ct=L.get(Pe)||ha,mn=new yr(Us),hn=new ar(this.id,Pe,C);this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:Pe,transition:Et,fromState:Ct,toState:mn,player:hn,isFallbackTransition:!0})})}}removeNode(C,D){const L=this._engine;if(C.childElementCount&&this._signalRemovalForInnerTriggers(C,D),this.triggerLeaveAnimation(C,D,!0))return;let K=!1;if(L.totalAnimations){const he=L.players.length?L.playersByQueriedElement.get(C):[];if(he&&he.length)K=!0;else{let Pe=C;for(;Pe=Pe.parentNode;)if(L.statesByElement.get(Pe)){K=!0;break}}}if(this.prepareLeaveAnimationListeners(C),K)L.markElementAsRemoved(this.id,C,!1,D);else{const he=C[wi];(!he||he===Io)&&(L.afterFlush(()=>this.clearElementCache(C)),L.destroyInnerAnimations(C),L._onRemovalComplete(C,D))}}insertNode(C,D){Z(C,this._hostClassName)}drainQueuedTransitions(C){const D=[];return this._queue.forEach(L=>{const K=L.player;if(K.destroyed)return;const he=L.element,Pe=this._elementListeners.get(he);Pe&&Pe.forEach(Le=>{if(Le.name==L.triggerName){const Et=Rn(he,L.triggerName,L.fromState.value,L.toState.value);Et._data=C,Zt(L.player,Le.phase,Et,Le.callback)}}),K.markedForDestroy?this._engine.afterFlush(()=>{K.destroy()}):D.push(L)}),this._queue=[],D.sort((L,K)=>{const he=L.transition.ast.depCount,Pe=K.transition.ast.depCount;return 0==he||0==Pe?he-Pe:this._engine.driver.containsElement(L.element,K.element)?1:-1})}destroy(C){this.players.forEach(D=>D.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,C)}}class co{_onRemovalComplete(C,D){this.onRemovalComplete(C,D)}constructor(C,D,L,K){this.bodyNode=C,this.driver=D,this._normalizer=L,this.scheduler=K,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(he,Pe)=>{}}get queuedPlayers(){const C=[];return this._namespaceList.forEach(D=>{D.players.forEach(L=>{L.queued&&C.push(L)})}),C}createNamespace(C,D){const L=new Yr(C,D,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,D)?this._balanceNamespaceList(L,D):(this.newHostElements.set(D,L),this.collectEnterElement(D)),this._namespaceLookup[C]=L}_balanceNamespaceList(C,D){const L=this._namespaceList,K=this.namespacesByHostElement;if(L.length-1>=0){let Pe=!1,Le=this.driver.getParentElement(D);for(;Le;){const Et=K.get(Le);if(Et){const Ct=L.indexOf(Et);L.splice(Ct+1,0,C),Pe=!0;break}Le=this.driver.getParentElement(Le)}Pe||L.unshift(C)}else L.push(C);return K.set(D,C),C}register(C,D){let L=this._namespaceLookup[C];return L||(L=this.createNamespace(C,D)),L}registerTrigger(C,D,L){let K=this._namespaceLookup[C];K&&K.register(D,L)&&this.totalAnimations++}destroy(C,D){C&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const L=this._fetchNamespace(C);this.namespacesByHostElement.delete(L.hostElement);const K=this._namespaceList.indexOf(L);K>=0&&this._namespaceList.splice(K,1),L.destroy(D),delete this._namespaceLookup[C]}))}_fetchNamespace(C){return this._namespaceLookup[C]}fetchNamespacesByElement(C){const D=new Set,L=this.statesByElement.get(C);if(L)for(let K of L.values())if(K.namespaceId){const he=this._fetchNamespace(K.namespaceId);he&&D.add(he)}return D}trigger(C,D,L,K){if(Co(D)){const he=this._fetchNamespace(C);if(he)return he.trigger(D,L,K),!0}return!1}insertNode(C,D,L,K){if(!Co(D))return;const he=D[wi];if(he&&he.setForRemoval){he.setForRemoval=!1,he.setForMove=!0;const Pe=this.collectedLeaveElements.indexOf(D);Pe>=0&&this.collectedLeaveElements.splice(Pe,1)}if(C){const Pe=this._fetchNamespace(C);Pe&&Pe.insertNode(D,L)}K&&this.collectEnterElement(D)}collectEnterElement(C){this.collectedEnterElements.push(C)}markElementAsDisabled(C,D){D?this.disabledNodes.has(C)||(this.disabledNodes.add(C),Z(C,Jo)):this.disabledNodes.has(C)&&(this.disabledNodes.delete(C),Ae(C,Jo))}removeNode(C,D,L){if(Co(D)){this.scheduler?.notify();const K=C?this._fetchNamespace(C):null;K?K.removeNode(D,L):this.markElementAsRemoved(C,D,!1,L);const he=this.namespacesByHostElement.get(D);he&&he.id!==C&&he.removeNode(D,L)}else this._onRemovalComplete(D,L)}markElementAsRemoved(C,D,L,K,he){this.collectedLeaveElements.push(D),D[wi]={namespaceId:C,setForRemoval:K,hasAnimation:L,removedBeforeQueried:!1,previousTriggersValues:he}}listen(C,D,L,K,he){return Co(D)?this._fetchNamespace(C).listen(D,L,K,he):()=>{}}_buildInstruction(C,D,L,K,he){return C.transition.build(this.driver,C.element,C.fromState.value,C.toState.value,L,K,C.fromState.options,C.toState.options,D,he)}destroyInnerAnimations(C){let D=this.driver.query(C,or,!0);D.forEach(L=>this.destroyActiveAnimationsForElement(L)),0!=this.playersByQueriedElement.size&&(D=this.driver.query(C,Hi,!0),D.forEach(L=>this.finishActiveQueriedAnimationOnElement(L)))}destroyActiveAnimationsForElement(C){const D=this.playersByElement.get(C);D&&D.forEach(L=>{L.queued?L.markedForDestroy=!0:L.destroy()})}finishActiveQueriedAnimationOnElement(C){const D=this.playersByQueriedElement.get(C);D&&D.forEach(L=>L.finish())}whenRenderingDone(){return new Promise(C=>{if(this.players.length)return Nr(this.players).onDone(()=>C());C()})}processLeaveNode(C){const D=C[wi];if(D&&D.setForRemoval){if(C[wi]=Io,D.namespaceId){this.destroyInnerAnimations(C);const L=this._fetchNamespace(D.namespaceId);L&&L.clearElementCache(C)}this._onRemovalComplete(C,D.setForRemoval)}C.classList?.contains(Jo)&&this.markElementAsDisabled(C,!1),this.driver.query(C,".ng-animate-disabled",!0).forEach(L=>{this.markElementAsDisabled(L,!1)})}flush(C=-1){let D=[];if(this.newHostElements.size&&(this.newHostElements.forEach((L,K)=>this._balanceNamespaceList(L,K)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let L=0;L<this.collectedEnterElements.length;L++)Z(this.collectedEnterElements[L],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const L=[];try{D=this._flushAnimations(L,C)}finally{for(let K=0;K<L.length;K++)L[K]()}}else for(let L=0;L<this.collectedLeaveElements.length;L++)this.processLeaveNode(this.collectedLeaveElements[L]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(L=>L()),this._flushFns=[],this._whenQuietFns.length){const L=this._whenQuietFns;this._whenQuietFns=[],D.length?Nr(D).onDone(()=>{L.forEach(K=>K())}):L.forEach(K=>K())}}reportError(C){throw function Nn(Y){return new T.wOt(3402,!1)}()}_flushAnimations(C,D){const L=new fs,K=[],he=new Map,Pe=[],Le=new Map,Et=new Map,Ct=new Map,mn=new Set;this.disabledNodes.forEach(N=>{mn.add(N);const B=this.driver.query(N,".ng-animate-queued",!0);for(let de=0;de<B.length;de++)mn.add(B[de])});const hn=this.bodyNode,hr=Array.from(this.statesByElement.keys()),zn=x(hr,this.collectedEnterElements),Fn=new Map;let Hn=0;zn.forEach((N,B)=>{const de=Qr+Hn++;Fn.set(B,de),N.forEach(Ze=>Z(Ze,de))});const Tr=[],oi=new Set,Pn=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){const B=this.collectedLeaveElements[N],de=B[wi];de&&de.setForRemoval&&(Tr.push(B),oi.add(B),de.hasAnimation?this.driver.query(B,".ng-star-inserted",!0).forEach(Ze=>oi.add(Ze)):Pn.add(B))}const Es=new Map,ki=x(hr,Array.from(oi));ki.forEach((N,B)=>{const de=Ms+Hn++;Es.set(B,de),N.forEach(Ze=>Z(Ze,de))}),C.push(()=>{zn.forEach((N,B)=>{const de=Fn.get(B);N.forEach(Ze=>Ae(Ze,de))}),ki.forEach((N,B)=>{const de=Es.get(B);N.forEach(Ze=>Ae(Ze,de))}),Tr.forEach(N=>{this.processLeaveNode(N)})});const bo=[],rs=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(D).forEach(de=>{const Ze=de.player,Pt=de.element;if(bo.push(Ze),this.collectedEnterElements.length){const ir=Pt[wi];if(ir&&ir.setForMove){if(ir.previousTriggersValues&&ir.previousTriggersValues.has(de.triggerName)){const Vr=ir.previousTriggersValues.get(de.triggerName),pr=this.statesByElement.get(de.element);if(pr&&pr.has(de.triggerName)){const Yt=pr.get(de.triggerName);Yt.value=Vr,pr.set(de.triggerName,Yt)}}return void Ze.destroy()}}const fn=!hn||!this.driver.containsElement(hn,Pt),mr=Es.get(Pt),xn=Fn.get(Pt),Gn=this._buildInstruction(de,L,xn,mr,fn);if(Gn.errors&&Gn.errors.length)return void rs.push(Gn);if(fn)return Ze.onStart(()=>Ee(Pt,Gn.fromStyles)),Ze.onDestroy(()=>ve(Pt,Gn.toStyles)),void K.push(Ze);if(de.isFallbackTransition)return Ze.onStart(()=>Ee(Pt,Gn.fromStyles)),Ze.onDestroy(()=>ve(Pt,Gn.toStyles)),void K.push(Ze);const fr=[];Gn.timelines.forEach(ir=>{ir.stretchStartingKeyframe=!0,this.disabledNodes.has(ir.element)||fr.push(ir)}),Gn.timelines=fr,L.append(Pt,Gn.timelines),Pe.push({instruction:Gn,player:Ze,element:Pt}),Gn.queriedElements.forEach(ir=>xr(Le,ir,[]).push(Ze)),Gn.preStyleProps.forEach((ir,Vr)=>{if(ir.size){let pr=Et.get(Vr);pr||Et.set(Vr,pr=new Set),ir.forEach((Yt,vn)=>pr.add(vn))}}),Gn.postStyleProps.forEach((ir,Vr)=>{let pr=Ct.get(Vr);pr||Ct.set(Vr,pr=new Set),ir.forEach((Yt,vn)=>pr.add(vn))})});if(rs.length){const N=[];rs.forEach(B=>{N.push(function zt(Y,C){return new T.wOt(3505,!1)}())}),bo.forEach(B=>B.destroy()),this.reportError(N)}const as=new Map,cs=new Map;Pe.forEach(N=>{const B=N.element;L.has(B)&&(cs.set(B,B),this._beforeAnimationBuild(N.player.namespaceId,N.instruction,as))}),K.forEach(N=>{const B=N.element;this._getPreviousPlayers(B,!1,N.namespaceId,N.triggerName,null).forEach(Ze=>{xr(as,B,[]).push(Ze),Ze.destroy()})});const Ho=Tr.filter(N=>fi(N,Et,Ct)),uo=new Map;W(uo,this.driver,Pn,Ct,ut.kp).forEach(N=>{fi(N,Et,Ct)&&Ho.push(N)});const qi=new Map;zn.forEach((N,B)=>{W(qi,this.driver,new Set(N),Et,ut.FX)}),Ho.forEach(N=>{const B=uo.get(N),de=qi.get(N);uo.set(N,new Map([...B?.entries()??[],...de?.entries()??[]]))});const Os=[],P=[],X={};Pe.forEach(N=>{const{element:B,player:de,instruction:Ze}=N;if(L.has(B)){if(mn.has(B))return de.onDestroy(()=>ve(B,Ze.toStyles)),de.disabled=!0,de.overrideTotalTime(Ze.totalTime),void K.push(de);let Pt=X;if(cs.size>1){let mr=B;const xn=[];for(;mr=mr.parentNode;){const Gn=cs.get(mr);if(Gn){Pt=Gn;break}xn.push(mr)}xn.forEach(Gn=>cs.set(Gn,Pt))}const fn=this._buildAnimation(de.namespaceId,Ze,as,he,qi,uo);if(de.setRealPlayer(fn),Pt===X)Os.push(de);else{const mr=this.playersByElement.get(Pt);mr&&mr.length&&(de.parentPlayer=Nr(mr)),K.push(de)}}else Ee(B,Ze.fromStyles),de.onDestroy(()=>ve(B,Ze.toStyles)),P.push(de),mn.has(B)&&K.push(de)}),P.forEach(N=>{const B=he.get(N.element);if(B&&B.length){const de=Nr(B);N.setRealPlayer(de)}}),K.forEach(N=>{N.parentPlayer?N.syncPlayerEvents(N.parentPlayer):N.destroy()});for(let N=0;N<Tr.length;N++){const B=Tr[N],de=B[wi];if(Ae(B,Ms),de&&de.hasAnimation)continue;let Ze=[];if(Le.size){let fn=Le.get(B);fn&&fn.length&&Ze.push(...fn);let mr=this.driver.query(B,Hi,!0);for(let xn=0;xn<mr.length;xn++){let Gn=Le.get(mr[xn]);Gn&&Gn.length&&Ze.push(...Gn)}}const Pt=Ze.filter(fn=>!fn.destroyed);Pt.length?pn(this,B,Pt):this.processLeaveNode(B)}return Tr.length=0,Os.forEach(N=>{this.players.push(N),N.onDone(()=>{N.destroy();const B=this.players.indexOf(N);this.players.splice(B,1)}),N.play()}),Os}afterFlush(C){this._flushFns.push(C)}afterFlushAnimationsDone(C){this._whenQuietFns.push(C)}_getPreviousPlayers(C,D,L,K,he){let Pe=[];if(D){const Le=this.playersByQueriedElement.get(C);Le&&(Pe=Le)}else{const Le=this.playersByElement.get(C);if(Le){const Et=!he||he==Us;Le.forEach(Ct=>{Ct.queued||!Et&&Ct.triggerName!=K||Pe.push(Ct)})}}return(L||K)&&(Pe=Pe.filter(Le=>!(L&&L!=Le.namespaceId||K&&K!=Le.triggerName))),Pe}_beforeAnimationBuild(C,D,L){const he=D.element,Pe=D.isRemovalTransition?void 0:C,Le=D.isRemovalTransition?void 0:D.triggerName;for(const Et of D.timelines){const Ct=Et.element,mn=Ct!==he,hn=xr(L,Ct,[]);this._getPreviousPlayers(Ct,mn,Pe,Le,D.toState).forEach(zn=>{const Fn=zn.getRealPlayer();Fn.beforeDestroy&&Fn.beforeDestroy(),zn.destroy(),hn.push(zn)})}Ee(he,D.fromStyles)}_buildAnimation(C,D,L,K,he,Pe){const Le=D.triggerName,Et=D.element,Ct=[],mn=new Set,hn=new Set,hr=D.timelines.map(Fn=>{const Hn=Fn.element;mn.add(Hn);const Tr=Hn[wi];if(Tr&&Tr.removedBeforeQueried)return new ut.sf(Fn.duration,Fn.delay);const oi=Hn!==Et,Pn=function Jn(Y){const C=[];return ys(Y,C),C}((L.get(Hn)||Ci).map(as=>as.getRealPlayer())).filter(as=>!!as.element&&as.element===Hn),Es=he.get(Hn),ki=Pe.get(Hn),bo=Jt(this._normalizer,Fn.keyframes,Es,ki),rs=this._buildPlayer(Fn,bo,Pn);if(Fn.subTimeline&&K&&hn.add(Hn),oi){const as=new ar(C,Le,Hn);as.setRealPlayer(rs),Ct.push(as)}return rs});Ct.forEach(Fn=>{xr(this.playersByQueriedElement,Fn.element,[]).push(Fn),Fn.onDone(()=>function ds(Y,C,D){let L=Y.get(C);if(L){if(L.length){const K=L.indexOf(D);L.splice(K,1)}0==L.length&&Y.delete(C)}return L}(this.playersByQueriedElement,Fn.element,Fn))}),mn.forEach(Fn=>Z(Fn,ss));const zn=Nr(hr);return zn.onDestroy(()=>{mn.forEach(Fn=>Ae(Fn,ss)),ve(Et,D.toStyles)}),hn.forEach(Fn=>{xr(K,Fn,[]).push(zn)}),zn}_buildPlayer(C,D,L){return D.length>0?this.driver.animate(C.element,D,C.duration,C.delay,C.easing,L):new ut.sf(C.duration,C.delay)}}class ar{constructor(C,D,L){this.namespaceId=C,this.triggerName=D,this.element=L,this._player=new ut.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(C){this._containsRealPlayer||(this._player=C,this._queuedCallbacks.forEach((D,L)=>{D.forEach(K=>Zt(C,L,void 0,K))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(C.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(C){this.totalTime=C}syncPlayerEvents(C){const D=this._player;D.triggerCallback&&C.onStart(()=>D.triggerCallback("start")),C.onDone(()=>this.finish()),C.onDestroy(()=>this.destroy())}_queueEvent(C,D){xr(this._queuedCallbacks,C,[]).push(D)}onDone(C){this.queued&&this._queueEvent("done",C),this._player.onDone(C)}onStart(C){this.queued&&this._queueEvent("start",C),this._player.onStart(C)}onDestroy(C){this.queued&&this._queueEvent("destroy",C),this._player.onDestroy(C)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(C){this.queued||this._player.setPosition(C)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(C){const D=this._player;D.triggerCallback&&D.triggerCallback(C)}}function Co(Y){return Y&&1===Y.nodeType}function H(Y,C){const D=Y.style.display;return Y.style.display=C??"none",D}function W(Y,C,D,L,K){const he=[];D.forEach(Et=>he.push(H(Et)));const Pe=[];L.forEach((Et,Ct)=>{const mn=new Map;Et.forEach(hn=>{const hr=C.computeStyle(Ct,hn,K);mn.set(hn,hr),(!hr||0==hr.length)&&(Ct[wi]=Zo,Pe.push(Ct))}),Y.set(Ct,mn)});let Le=0;return D.forEach(Et=>H(Et,he[Le++])),Pe}function x(Y,C){const D=new Map;if(Y.forEach(Le=>D.set(Le,[])),0==C.length)return D;const K=new Set(C),he=new Map;function Pe(Le){if(!Le)return 1;let Et=he.get(Le);if(Et)return Et;const Ct=Le.parentNode;return Et=D.has(Ct)?Ct:K.has(Ct)?1:Pe(Ct),he.set(Le,Et),Et}return C.forEach(Le=>{const Et=Pe(Le);1!==Et&&D.get(Et).push(Le)}),D}function Z(Y,C){Y.classList?.add(C)}function Ae(Y,C){Y.classList?.remove(C)}function pn(Y,C,D){Nr(D).onDone(()=>Y.processLeaveNode(C))}function ys(Y,C){for(let D=0;D<Y.length;D++){const L=Y[D];L instanceof ut.ui?ys(L.players,C):C.push(L)}}function fi(Y,C,D){const L=D.get(Y);if(!L)return!1;let K=C.get(Y);return K?L.forEach(he=>K.add(he)):C.set(Y,L),D.delete(Y),!0}class Ts{constructor(C,D,L,K){this._driver=D,this._normalizer=L,this._triggerCache={},this.onRemovalComplete=(he,Pe)=>{},this._transitionEngine=new co(C.body,D,L,K),this._timelineEngine=new $i(C.body,D,L),this._transitionEngine.onRemovalComplete=(he,Pe)=>this.onRemovalComplete(he,Pe)}registerTrigger(C,D,L,K,he){const Pe=C+"-"+K;let Le=this._triggerCache[Pe];if(!Le){const Et=[],mn=vo(this._driver,he,Et,[]);if(Et.length)throw function Yn(Y,C){return new T.wOt(3404,!1)}();Le=function Bo(Y,C,D){return new ns(Y,C,D)}(K,mn,this._normalizer),this._triggerCache[Pe]=Le}this._transitionEngine.registerTrigger(D,K,Le)}register(C,D){this._transitionEngine.register(C,D)}destroy(C,D){this._transitionEngine.destroy(C,D)}onInsert(C,D,L,K){this._transitionEngine.insertNode(C,D,L,K)}onRemove(C,D,L){this._transitionEngine.removeNode(C,D,L)}disableAnimations(C,D){this._transitionEngine.markElementAsDisabled(C,D)}process(C,D,L,K){if("@"==L.charAt(0)){const[he,Pe]=Ve(L);this._timelineEngine.command(he,D,Pe,K)}else this._transitionEngine.trigger(C,D,L,K)}listen(C,D,L,K,he){if("@"==L.charAt(0)){const[Pe,Le]=Ve(L);return this._timelineEngine.listen(Pe,D,Le,he)}return this._transitionEngine.listen(C,D,L,K,he)}flush(C=-1){this._transitionEngine.flush(C)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(C){this._transitionEngine.afterFlushAnimationsDone(C)}}class jo{static#e=this.initialStylesByElement=new WeakMap;constructor(C,D,L){this._element=C,this._startStyles=D,this._endStyles=L,this._state=0;let K=jo.initialStylesByElement.get(C);K||jo.initialStylesByElement.set(C,K=new Map),this._initialStyles=K}start(){this._state<1&&(this._startStyles&&ve(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ve(this._element,this._initialStyles),this._endStyles&&(ve(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(jo.initialStylesByElement.delete(this._element),this._startStyles&&(Ee(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ee(this._element,this._endStyles),this._endStyles=null),ve(this._element,this._initialStyles),this._state=3)}}function fa(Y){let C=null;return Y.forEach((D,L)=>{(function Jr(Y){return"display"===Y||"position"===Y})(L)&&(C=C||new Map,C.set(L,D))}),C}class Da{constructor(C,D,L,K){this.element=C,this.keyframes=D,this.options=L,this._specialStyles=K,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=L.duration,this._delay=L.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(C=>C()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const C=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,C,this.options),this._finalKeyframe=C.length?C[C.length-1]:new Map;const D=()=>this._onFinish();this.domPlayer.addEventListener("finish",D),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",D)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(C){const D=[];return C.forEach(L=>{D.push(Object.fromEntries(L))}),D}_triggerWebAnimation(C,D,L){return C.animate(this._convertKeyframesToObject(D),L)}onStart(C){this._originalOnStartFns.push(C),this._onStartFns.push(C)}onDone(C){this._originalOnDoneFns.push(C),this._onDoneFns.push(C)}onDestroy(C){this._onDestroyFns.push(C)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(C=>C()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(C=>C()),this._onDestroyFns=[])}setPosition(C){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=C*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const C=new Map;this.hasStarted()&&this._finalKeyframe.forEach((L,K)=>{"offset"!==K&&C.set(K,this._finished?L:Si(this.element,K))}),this.currentSnapshot=C}triggerCallback(C){const D="start"===C?this._onStartFns:this._onDoneFns;D.forEach(L=>L()),D.length=0}}class pa{validateStyleProperty(C){return!0}validateAnimatableStyleProperty(C){return!0}matchesElement(C,D){return!1}containsElement(C,D){return _e(C,D)}getParentElement(C){return Ie(C)}query(C,D,L){return Tt(C,D,L)}computeStyle(C,D,L){return Si(C,D)}animate(C,D,L,K,he,Pe=[]){const Et={duration:L,delay:K,fill:0==K?"both":"forwards"};he&&(Et.easing=he);const Ct=new Map,mn=Pe.filter(zn=>zn instanceof Da);(function Er(Y,C){return 0===Y||0===C})(L,K)&&mn.forEach(zn=>{zn.currentSnapshot.forEach((Fn,Hn)=>Ct.set(Hn,Fn))});let hn=function an(Y){return Y.length?Y[0]instanceof Map?Y:Y.map(C=>new Map(Object.entries(C))):[]}(D).map(zn=>new Map(zn));hn=function ui(Y,C,D){if(D.size&&C.length){let L=C[0],K=[];if(D.forEach((he,Pe)=>{L.has(Pe)||K.push(Pe),L.set(Pe,he)}),K.length)for(let he=1;he<C.length;he++){let Pe=C[he];K.forEach(Le=>Pe.set(Le,Si(Y,Le)))}}return C}(C,hn,Ct);const hr=function Ta(Y,C){let D=null,L=null;return Array.isArray(C)&&C.length?(D=fa(C[0]),C.length>1&&(L=fa(C[C.length-1]))):C instanceof Map&&(D=fa(C)),D||L?new jo(Y,D,L):null}(C,hn);return new Da(C,hn,Et,hr)}}const Ua="@.disabled";class ga{constructor(C,D,L,K){this.namespaceId=C,this.delegate=D,this.engine=L,this._onDestroy=K,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(C){this.delegate.destroyNode?.(C)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(C,D){return this.delegate.createElement(C,D)}createComment(C){return this.delegate.createComment(C)}createText(C){return this.delegate.createText(C)}appendChild(C,D){this.delegate.appendChild(C,D),this.engine.onInsert(this.namespaceId,D,C,!1)}insertBefore(C,D,L,K=!0){this.delegate.insertBefore(C,D,L),this.engine.onInsert(this.namespaceId,D,C,K)}removeChild(C,D,L){this.engine.onRemove(this.namespaceId,D,this.delegate)}selectRootElement(C,D){return this.delegate.selectRootElement(C,D)}parentNode(C){return this.delegate.parentNode(C)}nextSibling(C){return this.delegate.nextSibling(C)}setAttribute(C,D,L,K){this.delegate.setAttribute(C,D,L,K)}removeAttribute(C,D,L){this.delegate.removeAttribute(C,D,L)}addClass(C,D){this.delegate.addClass(C,D)}removeClass(C,D){this.delegate.removeClass(C,D)}setStyle(C,D,L,K){this.delegate.setStyle(C,D,L,K)}removeStyle(C,D,L){this.delegate.removeStyle(C,D,L)}setProperty(C,D,L){"@"==D.charAt(0)&&D==Ua?this.disableAnimations(C,!!L):this.delegate.setProperty(C,D,L)}setValue(C,D){this.delegate.setValue(C,D)}listen(C,D,L){return this.delegate.listen(C,D,L)}disableAnimations(C,D){this.engine.disableAnimations(C,D)}}class $o extends ga{constructor(C,D,L,K,he){super(D,L,K,he),this.factory=C,this.namespaceId=D}setProperty(C,D,L){"@"==D.charAt(0)?"."==D.charAt(1)&&D==Ua?this.disableAnimations(C,L=void 0===L||!!L):this.engine.process(this.namespaceId,C,D.slice(1),L):this.delegate.setProperty(C,D,L)}listen(C,D,L){if("@"==D.charAt(0)){const K=function wo(Y){switch(Y){case"body":return document.body;case"document":return document;case"window":return window;default:return Y}}(C);let he=D.slice(1),Pe="";return"@"!=he.charAt(0)&&([he,Pe]=function Aa(Y){const C=Y.indexOf(".");return[Y.substring(0,C),Y.slice(C+1)]}(he)),this.engine.listen(this.namespaceId,K,he,Pe,Le=>{this.factory.scheduleListenerCallback(Le._data||-1,L,Le)})}return this.delegate.listen(C,D,L)}}class ea{constructor(C,D,L){this.delegate=C,this.engine=D,this._zone=L,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,D.onRemovalComplete=(K,he)=>{const Pe=he?.parentNode(K);Pe&&he.removeChild(Pe,K)}}createRenderer(C,D){const K=this.delegate.createRenderer(C,D);if(!C||!D?.data?.animation){const Ct=this._rendererCache;let mn=Ct.get(K);return mn||(mn=new ga("",K,this.engine,()=>Ct.delete(K)),Ct.set(K,mn)),mn}const he=D.id,Pe=D.id+"-"+this._currentId;this._currentId++,this.engine.register(Pe,C);const Le=Ct=>{Array.isArray(Ct)?Ct.forEach(Le):this.engine.registerTrigger(he,Pe,C,Ct.name,Ct)};return D.data.animation.forEach(Le),new $o(this,Pe,K,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(C,D,L){if(C>=0&&C<this._microtaskId)return void this._zone.run(()=>D(L));const K=this._animationCallbacksBuffer;0==K.length&&queueMicrotask(()=>{this._zone.run(()=>{K.forEach(he=>{const[Pe,Le]=he;Pe(Le)}),this._animationCallbacksBuffer=[]})}),K.push([D,L])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const ni=[{provide:qn,useFactory:function lr(){return new Dr}},{provide:Ts,useClass:(()=>{class Y extends Ts{constructor(D,L,K){super(D,L,K,(0,T.WQX)(T.An2,{optional:!0}))}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(L){return new(L||Y)(T.KVO(re.qQ),T.KVO(Bn),T.KVO(qn))};static#t=this.\u0275prov=T.jDH({token:Y,factory:Y.\u0275fac})}return Y})()},{provide:T._9s,useFactory:function Gr(Y,C,D){return new ea(Y,C,D)},deps:[_.B7,Ts,T.SKi]}],Ri=[{provide:Bn,useFactory:()=>new pa},{provide:T.bc$,useValue:"BrowserAnimations"},...ni],Oi=[{provide:Bn,useClass:En},{provide:T.bc$,useValue:"NoopAnimations"},...ni];let ma=(()=>{class Y{static withConfig(D){return{ngModule:Y,providers:D.disableAnimations?Oi:Ri}}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275mod=T.$C({type:Y});static#n=this.\u0275inj=T.G2t({providers:Ri,imports:[_.Bb]})}return Y})();var Tc=k(8964),Do=k(4390);let Ao=(()=>{class Y{static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275mod=T.$C({type:Y,bootstrap:[xe]});static#n=this.\u0275inj=T.G2t({providers:[{provide:T.hnV,useFactory:D=>()=>D.getAllTypeOfProduct().subscribe(),deps:[Do.L],multi:!0}],imports:[re.MD,_.Bb,ce,xt.LoginAndRegistrationModule,un.ProductPageModule,jt.ProfileModuleModule,ln.SingleProductPageModule,ma,Lt.K,Tc.x]})}return Y})();_.sG().bootstrapModule(Ao).catch(Y=>console.error(Y))},4412:(nn,We,k)=>{k.d(We,{t:()=>T});var _=k(1413);class T extends _.B{constructor(v){super(),this._value=v}get value(){return this.getValue()}_subscribe(v){const re=super._subscribe(v);return!re.closed&&v.next(this._value),re}getValue(){const{hasError:v,thrownError:re,_value:Se}=this;if(v)throw re;return this._throwIfClosed(),Se}next(v){super.next(this._value=v)}}},1985:(nn,We,k)=>{k.d(We,{c:()=>$e});var _=k(7707),T=k(8359),R=k(3494),v=k(1203),re=k(1026),Se=k(8071),fe=k(9786);let $e=(()=>{class Ge{constructor(nt){nt&&(this._subscribe=nt)}lift(nt){const De=new Ge;return De.source=this,De.operator=nt,De}subscribe(nt,De,ct){const at=function pe(Ge){return Ge&&Ge instanceof _.vU||function ye(Ge){return Ge&&(0,Se.T)(Ge.next)&&(0,Se.T)(Ge.error)&&(0,Se.T)(Ge.complete)}(Ge)&&(0,T.Uv)(Ge)}(nt)?nt:new _.Ms(nt,De,ct);return(0,fe.Y)(()=>{const{operator:ot,source:At}=this;at.add(ot?ot.call(at,At):At?this._subscribe(at):this._trySubscribe(at))}),at}_trySubscribe(nt){try{return this._subscribe(nt)}catch(De){nt.error(De)}}forEach(nt,De){return new(De=Me(De))((ct,at)=>{const ot=new _.Ms({next:At=>{try{nt(At)}catch($t){at($t),ot.unsubscribe()}},error:at,complete:ct});this.subscribe(ot)})}_subscribe(nt){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(nt)}[R.s](){return this}pipe(...nt){return(0,v.m)(nt)(this)}toPromise(nt){return new(nt=Me(nt))((De,ct)=>{let at;this.subscribe(ot=>at=ot,ot=>ct(ot),()=>De(at))})}}return Ge.create=it=>new Ge(it),Ge})();function Me(Ge){var it;return null!==(it=Ge??re.$.Promise)&&void 0!==it?it:Promise}},1413:(nn,We,k)=>{k.d(We,{B:()=>fe});var _=k(1985),T=k(8359);const v=(0,k(1853).L)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(7908),Se=k(9786);let fe=(()=>{class Me extends _.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(pe){const Ge=new $e(this,this);return Ge.operator=pe,Ge}_throwIfClosed(){if(this.closed)throw new v}next(pe){(0,Se.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ge of this.currentObservers)Ge.next(pe)}})}error(pe){(0,Se.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=pe;const{observers:Ge}=this;for(;Ge.length;)Ge.shift().error(pe)}})}complete(){(0,Se.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:pe}=this;for(;pe.length;)pe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var pe;return(null===(pe=this.observers)||void 0===pe?void 0:pe.length)>0}_trySubscribe(pe){return this._throwIfClosed(),super._trySubscribe(pe)}_subscribe(pe){return this._throwIfClosed(),this._checkFinalizedStatuses(pe),this._innerSubscribe(pe)}_innerSubscribe(pe){const{hasError:Ge,isStopped:it,observers:nt}=this;return Ge||it?T.Kn:(this.currentObservers=null,nt.push(pe),new T.yU(()=>{this.currentObservers=null,(0,re.o)(nt,pe)}))}_checkFinalizedStatuses(pe){const{hasError:Ge,thrownError:it,isStopped:nt}=this;Ge?pe.error(it):nt&&pe.complete()}asObservable(){const pe=new _.c;return pe.source=this,pe}}return Me.create=(ye,pe)=>new $e(ye,pe),Me})();class $e extends fe{constructor(ye,pe){super(),this.destination=ye,this.source=pe}next(ye){var pe,Ge;null===(Ge=null===(pe=this.destination)||void 0===pe?void 0:pe.next)||void 0===Ge||Ge.call(pe,ye)}error(ye){var pe,Ge;null===(Ge=null===(pe=this.destination)||void 0===pe?void 0:pe.error)||void 0===Ge||Ge.call(pe,ye)}complete(){var ye,pe;null===(pe=null===(ye=this.destination)||void 0===ye?void 0:ye.complete)||void 0===pe||pe.call(ye)}_subscribe(ye){var pe,Ge;return null!==(Ge=null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(ye))&&void 0!==Ge?Ge:T.Kn}}},7707:(nn,We,k)=>{k.d(We,{Ms:()=>ct,vU:()=>Ge});var _=k(8071),T=k(8359),R=k(1026),v=k(5334),re=k(5343);const Se=Me("C",void 0,void 0);function Me(ae,we,ie){return{kind:ae,value:we,error:ie}}var ye=k(9270),pe=k(9786);class Ge extends T.yU{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,T.Uv)(we)&&we.add(this)):this.destination=$t}static create(we,ie,je){return new ct(we,ie,je)}next(we){this.isStopped?At(function $e(ae){return Me("N",ae,void 0)}(we),this):this._next(we)}error(we){this.isStopped?At(function fe(ae){return Me("E",void 0,ae)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?At(Se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const it=Function.prototype.bind;function nt(ae,we){return it.call(ae,we)}class De{constructor(we){this.partialObserver=we}next(we){const{partialObserver:ie}=this;if(ie.next)try{ie.next(we)}catch(je){at(je)}}error(we){const{partialObserver:ie}=this;if(ie.error)try{ie.error(we)}catch(je){at(je)}else at(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(ie){at(ie)}}}class ct extends Ge{constructor(we,ie,je){let Ue;if(super(),(0,_.T)(we)||!we)Ue={next:we??void 0,error:ie??void 0,complete:je??void 0};else{let Oe;this&&R.$.useDeprecatedNextContext?(Oe=Object.create(we),Oe.unsubscribe=()=>this.unsubscribe(),Ue={next:we.next&&nt(we.next,Oe),error:we.error&&nt(we.error,Oe),complete:we.complete&&nt(we.complete,Oe)}):Ue=we}this.destination=new De(Ue)}}function at(ae){R.$.useDeprecatedSynchronousErrorHandling?(0,pe.l)(ae):(0,v.m)(ae)}function At(ae,we){const{onStoppedNotification:ie}=R.$;ie&&ye.f.setTimeout(()=>ie(ae,we))}const $t={closed:!0,next:re.l,error:function ot(ae){throw ae},complete:re.l}},8359:(nn,We,k)=>{k.d(We,{Kn:()=>Se,yU:()=>re,Uv:()=>fe});var _=k(8071);const R=(0,k(1853).L)(Me=>function(pe){Me(this),this.message=pe?`${pe.length} errors occurred during unsubscription:\n${pe.map((Ge,it)=>`${it+1}) ${Ge.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=pe});var v=k(7908);class re{constructor(ye){this.initialTeardown=ye,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ye;if(!this.closed){this.closed=!0;const{_parentage:pe}=this;if(pe)if(this._parentage=null,Array.isArray(pe))for(const nt of pe)nt.remove(this);else pe.remove(this);const{initialTeardown:Ge}=this;if((0,_.T)(Ge))try{Ge()}catch(nt){ye=nt instanceof R?nt.errors:[nt]}const{_finalizers:it}=this;if(it){this._finalizers=null;for(const nt of it)try{$e(nt)}catch(De){ye=ye??[],De instanceof R?ye=[...ye,...De.errors]:ye.push(De)}}if(ye)throw new R(ye)}}add(ye){var pe;if(ye&&ye!==this)if(this.closed)$e(ye);else{if(ye instanceof re){if(ye.closed||ye._hasParent(this))return;ye._addParent(this)}(this._finalizers=null!==(pe=this._finalizers)&&void 0!==pe?pe:[]).push(ye)}}_hasParent(ye){const{_parentage:pe}=this;return pe===ye||Array.isArray(pe)&&pe.includes(ye)}_addParent(ye){const{_parentage:pe}=this;this._parentage=Array.isArray(pe)?(pe.push(ye),pe):pe?[pe,ye]:ye}_removeParent(ye){const{_parentage:pe}=this;pe===ye?this._parentage=null:Array.isArray(pe)&&(0,v.o)(pe,ye)}remove(ye){const{_finalizers:pe}=this;pe&&(0,v.o)(pe,ye),ye instanceof re&&ye._removeParent(this)}}re.EMPTY=(()=>{const Me=new re;return Me.closed=!0,Me})();const Se=re.EMPTY;function fe(Me){return Me instanceof re||Me&&"closed"in Me&&(0,_.T)(Me.remove)&&(0,_.T)(Me.add)&&(0,_.T)(Me.unsubscribe)}function $e(Me){(0,_.T)(Me)?Me():Me.unsubscribe()}},1026:(nn,We,k)=>{k.d(We,{$:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(nn,We,k)=>{k.d(We,{x:()=>re});var _=k(6365),R=k(9326),v=k(8455);function re(...Se){return function T(){return(0,_.U)(1)}()((0,v.H)(Se,(0,R.lI)(Se)))}},983:(nn,We,k)=>{k.d(We,{w:()=>T});const T=new(k(1985).c)(re=>re.complete())},7468:(nn,We,k)=>{k.d(We,{p:()=>$e});var _=k(1985),T=k(3073),R=k(8750),v=k(9326),re=k(4360),Se=k(6450),fe=k(8496);function $e(...Me){const ye=(0,v.ms)(Me),{args:pe,keys:Ge}=(0,T.D)(Me),it=new _.c(nt=>{const{length:De}=pe;if(!De)return void nt.complete();const ct=new Array(De);let at=De,ot=De;for(let At=0;At<De;At++){let $t=!1;(0,R.Tg)(pe[At]).subscribe((0,re._)(nt,ae=>{$t||($t=!0,ot--),ct[At]=ae},()=>at--,void 0,()=>{(!at||!$t)&&(ot||nt.next(Ge?(0,fe.e)(Ge,ct):ct),nt.complete())}))}});return ye?it.pipe((0,Se.I)(ye)):it}},8455:(nn,We,k)=>{k.d(We,{H:()=>we});var _=k(8750),T=k(941),R=k(6745),Se=k(1985),$e=k(4761),Me=k(8071),ye=k(5225);function Ge(ie,je){if(!ie)throw new Error("Iterable cannot be null");return new Se.c(Ue=>{(0,ye.N)(Ue,je,()=>{const Oe=ie[Symbol.asyncIterator]();(0,ye.N)(Ue,je,()=>{Oe.next().then(ce=>{ce.done?Ue.complete():Ue.next(ce.value)})},0,!0)})})}var it=k(5055),nt=k(9858),De=k(7441),ct=k(5397),at=k(7953),ot=k(591),At=k(5196);function we(ie,je){return je?function ae(ie,je){if(null!=ie){if((0,it.l)(ie))return function v(ie,je){return(0,_.Tg)(ie).pipe((0,R._)(je),(0,T.Q)(je))}(ie,je);if((0,De.X)(ie))return function fe(ie,je){return new Se.c(Ue=>{let Oe=0;return je.schedule(function(){Oe===ie.length?Ue.complete():(Ue.next(ie[Oe++]),Ue.closed||this.schedule())})})}(ie,je);if((0,nt.y)(ie))return function re(ie,je){return(0,_.Tg)(ie).pipe((0,R._)(je),(0,T.Q)(je))}(ie,je);if((0,at.T)(ie))return Ge(ie,je);if((0,ct.x)(ie))return function pe(ie,je){return new Se.c(Ue=>{let Oe;return(0,ye.N)(Ue,je,()=>{Oe=ie[$e.l](),(0,ye.N)(Ue,je,()=>{let ce,xe;try{({value:ce,done:xe}=Oe.next())}catch(xt){return void Ue.error(xt)}xe?Ue.complete():Ue.next(ce)},0,!0)}),()=>(0,Me.T)(Oe?.return)&&Oe.return()})}(ie,je);if((0,At.U)(ie))return function $t(ie,je){return Ge((0,At.C)(ie),je)}(ie,je)}throw(0,ot.L)(ie)}(ie,je):(0,_.Tg)(ie)}},8750:(nn,We,k)=>{k.d(We,{Tg:()=>it});var _=k(1635),T=k(7441),R=k(9858),v=k(1985),re=k(5055),Se=k(7953),fe=k(591),$e=k(5397),Me=k(5196),ye=k(8071),pe=k(5334),Ge=k(3494);function it(ae){if(ae instanceof v.c)return ae;if(null!=ae){if((0,re.l)(ae))return function nt(ae){return new v.c(we=>{const ie=ae[Ge.s]();if((0,ye.T)(ie.subscribe))return ie.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ae);if((0,T.X)(ae))return function De(ae){return new v.c(we=>{for(let ie=0;ie<ae.length&&!we.closed;ie++)we.next(ae[ie]);we.complete()})}(ae);if((0,R.y)(ae))return function ct(ae){return new v.c(we=>{ae.then(ie=>{we.closed||(we.next(ie),we.complete())},ie=>we.error(ie)).then(null,pe.m)})}(ae);if((0,Se.T)(ae))return ot(ae);if((0,$e.x)(ae))return function at(ae){return new v.c(we=>{for(const ie of ae)if(we.next(ie),we.closed)return;we.complete()})}(ae);if((0,Me.U)(ae))return function At(ae){return ot((0,Me.C)(ae))}(ae)}throw(0,fe.L)(ae)}function ot(ae){return new v.c(we=>{(function $t(ae,we){var ie,je,Ue,Oe;return(0,_.sH)(this,void 0,void 0,function*(){try{for(ie=(0,_.xN)(ae);!(je=yield ie.next()).done;)if(we.next(je.value),we.closed)return}catch(ce){Ue={error:ce}}finally{try{je&&!je.done&&(Oe=ie.return)&&(yield Oe.call(ie))}finally{if(Ue)throw Ue.error}}we.complete()})})(ae,we).catch(ie=>we.error(ie))})}},7673:(nn,We,k)=>{k.d(We,{of:()=>R});var _=k(9326),T=k(8455);function R(...v){const re=(0,_.lI)(v);return(0,T.H)(v,re)}},4360:(nn,We,k)=>{k.d(We,{_:()=>T});var _=k(7707);function T(v,re,Se,fe,$e){return new R(v,re,Se,fe,$e)}class R extends _.vU{constructor(re,Se,fe,$e,Me,ye){super(re),this.onFinalize=Me,this.shouldUnsubscribe=ye,this._next=Se?function(pe){try{Se(pe)}catch(Ge){re.error(Ge)}}:super._next,this._error=$e?function(pe){try{$e(pe)}catch(Ge){re.error(Ge)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(pe){re.error(pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Se}=this;super.unsubscribe(),!Se&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},9437:(nn,We,k)=>{k.d(We,{W:()=>v});var _=k(8750),T=k(4360),R=k(9974);function v(re){return(0,R.N)((Se,fe)=>{let ye,$e=null,Me=!1;$e=Se.subscribe((0,T._)(fe,void 0,void 0,pe=>{ye=(0,_.Tg)(re(pe,v(re)(Se))),$e?($e.unsubscribe(),$e=null,ye.subscribe(fe)):Me=!0})),Me&&($e.unsubscribe(),$e=null,ye.subscribe(fe))})}},274:(nn,We,k)=>{k.d(We,{H:()=>R});var _=k(1397),T=k(8071);function R(v,re){return(0,T.T)(re)?(0,_.Z)(v,re,1):(0,_.Z)(v,1)}},9901:(nn,We,k)=>{k.d(We,{U:()=>R});var _=k(9974),T=k(4360);function R(v){return(0,_.N)((re,Se)=>{let fe=!1;re.subscribe((0,T._)(Se,$e=>{fe=!0,Se.next($e)},()=>{fe||Se.next(v),Se.complete()}))})}},5964:(nn,We,k)=>{k.d(We,{p:()=>R});var _=k(9974),T=k(4360);function R(v,re){return(0,_.N)((Se,fe)=>{let $e=0;Se.subscribe((0,T._)(fe,Me=>v.call(re,Me,$e++)&&fe.next(Me)))})}},980:(nn,We,k)=>{k.d(We,{j:()=>T});var _=k(9974);function T(R){return(0,_.N)((v,re)=>{try{v.subscribe(re)}finally{re.add(R)}})}},1594:(nn,We,k)=>{k.d(We,{$:()=>fe});var _=k(9350),T=k(5964),R=k(6697),v=k(9901),re=k(3774),Se=k(3669);function fe($e,Me){const ye=arguments.length>=2;return pe=>pe.pipe($e?(0,T.p)((Ge,it)=>$e(Ge,it,pe)):Se.D,(0,R.s)(1),ye?(0,v.U)(Me):(0,re.v)(()=>new _.G))}},6354:(nn,We,k)=>{k.d(We,{T:()=>R});var _=k(9974),T=k(4360);function R(v,re){return(0,_.N)((Se,fe)=>{let $e=0;Se.subscribe((0,T._)(fe,Me=>{fe.next(v.call(re,Me,$e++))}))})}},6365:(nn,We,k)=>{k.d(We,{U:()=>R});var _=k(1397),T=k(3669);function R(v=1/0){return(0,_.Z)(T.D,v)}},1397:(nn,We,k)=>{k.d(We,{Z:()=>$e});var _=k(6354),T=k(8750),R=k(9974),v=k(5225),re=k(4360),fe=k(8071);function $e(Me,ye,pe=1/0){return(0,fe.T)(ye)?$e((Ge,it)=>(0,_.T)((nt,De)=>ye(Ge,nt,it,De))((0,T.Tg)(Me(Ge,it))),pe):("number"==typeof ye&&(pe=ye),(0,R.N)((Ge,it)=>function Se(Me,ye,pe,Ge,it,nt,De,ct){const at=[];let ot=0,At=0,$t=!1;const ae=()=>{$t&&!at.length&&!ot&&ye.complete()},we=je=>ot<Ge?ie(je):at.push(je),ie=je=>{nt&&ye.next(je),ot++;let Ue=!1;(0,T.Tg)(pe(je,At++)).subscribe((0,re._)(ye,Oe=>{it?.(Oe),nt?we(Oe):ye.next(Oe)},()=>{Ue=!0},void 0,()=>{if(Ue)try{for(ot--;at.length&&ot<Ge;){const Oe=at.shift();De?(0,v.N)(ye,De,()=>ie(Oe)):ie(Oe)}ae()}catch(Oe){ye.error(Oe)}}))};return Me.subscribe((0,re._)(ye,we,()=>{$t=!0,ae()})),()=>{ct?.()}}(Ge,it,Me,pe)))}},941:(nn,We,k)=>{k.d(We,{Q:()=>v});var _=k(5225),T=k(9974),R=k(4360);function v(re,Se=0){return(0,T.N)((fe,$e)=>{fe.subscribe((0,R._)($e,Me=>(0,_.N)($e,re,()=>$e.next(Me),Se),()=>(0,_.N)($e,re,()=>$e.complete(),Se),Me=>(0,_.N)($e,re,()=>$e.error(Me),Se)))})}},2816:(nn,We,k)=>{k.d(We,{S:()=>v});var _=k(9974),T=k(4360);function v(re,Se){return(0,_.N)(function R(re,Se,fe,$e,Me){return(ye,pe)=>{let Ge=fe,it=Se,nt=0;ye.subscribe((0,T._)(pe,De=>{const ct=nt++;it=Ge?re(it,De,ct):(Ge=!0,De),$e&&pe.next(it)},Me&&(()=>{Ge&&pe.next(it),pe.complete()})))}}(re,Se,arguments.length>=2,!0))}},9172:(nn,We,k)=>{k.d(We,{Z:()=>v});var _=k(8793),T=k(9326),R=k(9974);function v(...re){const Se=(0,T.lI)(re);return(0,R.N)((fe,$e)=>{(Se?(0,_.x)(re,fe,Se):(0,_.x)(re,fe)).subscribe($e)})}},6745:(nn,We,k)=>{k.d(We,{_:()=>T});var _=k(9974);function T(R,v=0){return(0,_.N)((re,Se)=>{Se.add(R.schedule(()=>re.subscribe(Se),v))})}},5558:(nn,We,k)=>{k.d(We,{n:()=>v});var _=k(8750),T=k(9974),R=k(4360);function v(re,Se){return(0,T.N)((fe,$e)=>{let Me=null,ye=0,pe=!1;const Ge=()=>pe&&!Me&&$e.complete();fe.subscribe((0,R._)($e,it=>{Me?.unsubscribe();let nt=0;const De=ye++;(0,_.Tg)(re(it,De)).subscribe(Me=(0,R._)($e,ct=>$e.next(Se?Se(it,ct,De,nt++):ct),()=>{Me=null,Ge()}))},()=>{pe=!0,Ge()}))})}},6697:(nn,We,k)=>{k.d(We,{s:()=>v});var _=k(983),T=k(9974),R=k(4360);function v(re){return re<=0?()=>_.w:(0,T.N)((Se,fe)=>{let $e=0;Se.subscribe((0,R._)(fe,Me=>{++$e<=re&&(fe.next(Me),re<=$e&&fe.complete())}))})}},8141:(nn,We,k)=>{k.d(We,{M:()=>re});var _=k(8071),T=k(9974),R=k(4360),v=k(3669);function re(Se,fe,$e){const Me=(0,_.T)(Se)||fe||$e?{next:Se,error:fe,complete:$e}:Se;return Me?(0,T.N)((ye,pe)=>{var Ge;null===(Ge=Me.subscribe)||void 0===Ge||Ge.call(Me);let it=!0;ye.subscribe((0,R._)(pe,nt=>{var De;null===(De=Me.next)||void 0===De||De.call(Me,nt),pe.next(nt)},()=>{var nt;it=!1,null===(nt=Me.complete)||void 0===nt||nt.call(Me),pe.complete()},nt=>{var De;it=!1,null===(De=Me.error)||void 0===De||De.call(Me,nt),pe.error(nt)},()=>{var nt,De;it&&(null===(nt=Me.unsubscribe)||void 0===nt||nt.call(Me)),null===(De=Me.finalize)||void 0===De||De.call(Me)}))}):v.D}},3774:(nn,We,k)=>{k.d(We,{v:()=>v});var _=k(9350),T=k(9974),R=k(4360);function v(Se=re){return(0,T.N)((fe,$e)=>{let Me=!1;fe.subscribe((0,R._)($e,ye=>{Me=!0,$e.next(ye)},()=>Me?$e.complete():$e.error(Se())))})}function re(){return new _.G}},6780:(nn,We,k)=>{k.d(We,{R:()=>re});var _=k(8359);class T extends _.yU{constructor(fe,$e){super()}schedule(fe,$e=0){return this}}const R={setInterval(Se,fe,...$e){const{delegate:Me}=R;return Me?.setInterval?Me.setInterval(Se,fe,...$e):setInterval(Se,fe,...$e)},clearInterval(Se){const{delegate:fe}=R;return(fe?.clearInterval||clearInterval)(Se)},delegate:void 0};var v=k(7908);class re extends T{constructor(fe,$e){super(fe,$e),this.scheduler=fe,this.work=$e,this.pending=!1}schedule(fe,$e=0){var Me;if(this.closed)return this;this.state=fe;const ye=this.id,pe=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(pe,ye,$e)),this.pending=!0,this.delay=$e,this.id=null!==(Me=this.id)&&void 0!==Me?Me:this.requestAsyncId(pe,this.id,$e),this}requestAsyncId(fe,$e,Me=0){return R.setInterval(fe.flush.bind(fe,this),Me)}recycleAsyncId(fe,$e,Me=0){if(null!=Me&&this.delay===Me&&!1===this.pending)return $e;null!=$e&&R.clearInterval($e)}execute(fe,$e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Me=this._execute(fe,$e);if(Me)return Me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,$e){let ye,Me=!1;try{this.work(fe)}catch(pe){Me=!0,ye=pe||new Error("Scheduled action threw falsy error")}if(Me)return this.unsubscribe(),ye}unsubscribe(){if(!this.closed){const{id:fe,scheduler:$e}=this,{actions:Me}=$e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,v.o)(Me,this),null!=fe&&(this.id=this.recycleAsyncId($e,fe,null)),this.delay=null,super.unsubscribe()}}}},9687:(nn,We,k)=>{k.d(We,{q:()=>R});var _=k(6129);class T{constructor(re,Se=T.now){this.schedulerActionCtor=re,this.now=Se}schedule(re,Se=0,fe){return new this.schedulerActionCtor(this,re).schedule(fe,Se)}}T.now=_.U.now;class R extends T{constructor(re,Se=T.now){super(re,Se),this.actions=[],this._active=!1}flush(re){const{actions:Se}=this;if(this._active)return void Se.push(re);let fe;this._active=!0;do{if(fe=re.execute(re.state,re.delay))break}while(re=Se.shift());if(this._active=!1,fe){for(;re=Se.shift();)re.unsubscribe();throw fe}}}},3236:(nn,We,k)=>{k.d(We,{E:()=>R,b:()=>v});var _=k(6780);const R=new(k(9687).q)(_.R),v=R},6129:(nn,We,k)=>{k.d(We,{U:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},9270:(nn,We,k)=>{k.d(We,{f:()=>_});const _={setTimeout(T,R,...v){const{delegate:re}=_;return re?.setTimeout?re.setTimeout(T,R,...v):setTimeout(T,R,...v)},clearTimeout(T){const{delegate:R}=_;return(R?.clearTimeout||clearTimeout)(T)},delegate:void 0}},4761:(nn,We,k)=>{k.d(We,{l:()=>T});const T=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(nn,We,k)=>{k.d(We,{s:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(nn,We,k)=>{k.d(We,{G:()=>T});const T=(0,k(1853).L)(R=>function(){R(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(nn,We,k)=>{k.d(We,{R0:()=>Se,lI:()=>re,ms:()=>v});var _=k(8071),T=k(9470);function R(fe){return fe[fe.length-1]}function v(fe){return(0,_.T)(R(fe))?fe.pop():void 0}function re(fe){return(0,T.m)(R(fe))?fe.pop():void 0}function Se(fe,$e){return"number"==typeof R(fe)?fe.pop():$e}},3073:(nn,We,k)=>{k.d(We,{D:()=>re});const{isArray:_}=Array,{getPrototypeOf:T,prototype:R,keys:v}=Object;function re(fe){if(1===fe.length){const $e=fe[0];if(_($e))return{args:$e,keys:null};if(function Se(fe){return fe&&"object"==typeof fe&&T(fe)===R}($e)){const Me=v($e);return{args:Me.map(ye=>$e[ye]),keys:Me}}}return{args:fe,keys:null}}},7908:(nn,We,k)=>{function _(T,R){if(T){const v=T.indexOf(R);0<=v&&T.splice(v,1)}}k.d(We,{o:()=>_})},1853:(nn,We,k)=>{function _(T){const v=T(re=>{Error.call(re),re.stack=(new Error).stack});return v.prototype=Object.create(Error.prototype),v.prototype.constructor=v,v}k.d(We,{L:()=>_})},8496:(nn,We,k)=>{function _(T,R){return T.reduce((v,re,Se)=>(v[re]=R[Se],v),{})}k.d(We,{e:()=>_})},9786:(nn,We,k)=>{k.d(We,{Y:()=>R,l:()=>v});var _=k(1026);let T=null;function R(re){if(_.$.useDeprecatedSynchronousErrorHandling){const Se=!T;if(Se&&(T={errorThrown:!1,error:null}),re(),Se){const{errorThrown:fe,error:$e}=T;if(T=null,fe)throw $e}}else re()}function v(re){_.$.useDeprecatedSynchronousErrorHandling&&T&&(T.errorThrown=!0,T.error=re)}},5225:(nn,We,k)=>{function _(T,R,v,re=0,Se=!1){const fe=R.schedule(function(){v(),Se?T.add(this.schedule(null,re)):this.unsubscribe()},re);if(T.add(fe),!Se)return fe}k.d(We,{N:()=>_})},3669:(nn,We,k)=>{function _(T){return T}k.d(We,{D:()=>_})},7441:(nn,We,k)=>{k.d(We,{X:()=>_});const _=T=>T&&"number"==typeof T.length&&"function"!=typeof T},7953:(nn,We,k)=>{k.d(We,{T:()=>T});var _=k(8071);function T(R){return Symbol.asyncIterator&&(0,_.T)(R?.[Symbol.asyncIterator])}},8071:(nn,We,k)=>{function _(T){return"function"==typeof T}k.d(We,{T:()=>_})},5055:(nn,We,k)=>{k.d(We,{l:()=>R});var _=k(3494),T=k(8071);function R(v){return(0,T.T)(v[_.s])}},5397:(nn,We,k)=>{k.d(We,{x:()=>R});var _=k(4761),T=k(8071);function R(v){return(0,T.T)(v?.[_.l])}},9858:(nn,We,k)=>{k.d(We,{y:()=>T});var _=k(8071);function T(R){return(0,_.T)(R?.then)}},5196:(nn,We,k)=>{k.d(We,{C:()=>R,U:()=>v});var _=k(1635),T=k(8071);function R(re){return(0,_.AQ)(this,arguments,function*(){const fe=re.getReader();try{for(;;){const{value:$e,done:Me}=yield(0,_.N3)(fe.read());if(Me)return yield(0,_.N3)(void 0);yield yield(0,_.N3)($e)}}finally{fe.releaseLock()}})}function v(re){return(0,T.T)(re?.getReader)}},9470:(nn,We,k)=>{k.d(We,{m:()=>T});var _=k(8071);function T(R){return R&&(0,_.T)(R.schedule)}},9974:(nn,We,k)=>{k.d(We,{N:()=>R,S:()=>T});var _=k(8071);function T(v){return(0,_.T)(v?.lift)}function R(v){return re=>{if(T(re))return re.lift(function(Se){try{return v(Se,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(nn,We,k)=>{k.d(We,{I:()=>v});var _=k(6354);const{isArray:T}=Array;function v(re){return(0,_.T)(Se=>function R(re,Se){return T(Se)?re(...Se):re(Se)}(re,Se))}},5343:(nn,We,k)=>{function _(){}k.d(We,{l:()=>_})},1203:(nn,We,k)=>{k.d(We,{F:()=>T,m:()=>R});var _=k(3669);function T(...v){return R(v)}function R(v){return 0===v.length?_.D:1===v.length?v[0]:function(Se){return v.reduce((fe,$e)=>$e(fe),Se)}}},5334:(nn,We,k)=>{k.d(We,{m:()=>R});var _=k(1026),T=k(9270);function R(v){T.f.setTimeout(()=>{const{onUnhandledError:re}=_.$;if(!re)throw v;re(v)})}},591:(nn,We,k)=>{function _(T){return new TypeError(`You provided ${null!==T&&"object"==typeof T?"an invalid object":`'${T}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(We,{L:()=>_})},9969:(nn,We,k)=>{k.d(We,{FX:()=>Oe,If:()=>_,K2:()=>Se,hZ:()=>R,i0:()=>v,iF:()=>fe,kY:()=>ye,kp:()=>T,sf:()=>je,ui:()=>Ue,wk:()=>$e});var _=function(ce){return ce[ce.State=0]="State",ce[ce.Transition=1]="Transition",ce[ce.Sequence=2]="Sequence",ce[ce.Group=3]="Group",ce[ce.Animate=4]="Animate",ce[ce.Keyframes=5]="Keyframes",ce[ce.Style=6]="Style",ce[ce.Trigger=7]="Trigger",ce[ce.Reference=8]="Reference",ce[ce.AnimateChild=9]="AnimateChild",ce[ce.AnimateRef=10]="AnimateRef",ce[ce.Query=11]="Query",ce[ce.Stagger=12]="Stagger",ce}(_||{});const T="*";function R(ce,xe){return{type:_.Trigger,name:ce,definitions:xe,options:{}}}function v(ce,xe=null){return{type:_.Animate,styles:xe,timings:ce}}function Se(ce,xe=null){return{type:_.Sequence,steps:ce,options:xe}}function fe(ce){return{type:_.Style,styles:ce,offset:null}}function $e(ce,xe,xt){return{type:_.State,name:ce,styles:xe,options:xt}}function ye(ce,xe,xt=null){return{type:_.Transition,expr:ce,animation:xe,options:xt}}class je{constructor(xe=0,xt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=xe+xt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(xe=>xe()),this._onDoneFns=[])}onStart(xe){this._originalOnStartFns.push(xe),this._onStartFns.push(xe)}onDone(xe){this._originalOnDoneFns.push(xe),this._onDoneFns.push(xe)}onDestroy(xe){this._onDestroyFns.push(xe)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(xe=>xe()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(xe=>xe()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(xe){this._position=this.totalTime?xe*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(xe){const xt="start"==xe?this._onStartFns:this._onDoneFns;xt.forEach(un=>un()),xt.length=0}}class Ue{constructor(xe){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=xe;let xt=0,un=0,jt=0;const ln=this.players.length;0==ln?queueMicrotask(()=>this._onFinish()):this.players.forEach(Lt=>{Lt.onDone(()=>{++xt==ln&&this._onFinish()}),Lt.onDestroy(()=>{++un==ln&&this._onDestroy()}),Lt.onStart(()=>{++jt==ln&&this._onStart()})}),this.totalTime=this.players.reduce((Lt,ut)=>Math.max(Lt,ut.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(xe=>xe()),this._onDoneFns=[])}init(){this.players.forEach(xe=>xe.init())}onStart(xe){this._onStartFns.push(xe)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(xe=>xe()),this._onStartFns=[])}onDone(xe){this._onDoneFns.push(xe)}onDestroy(xe){this._onDestroyFns.push(xe)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(xe=>xe.play())}pause(){this.players.forEach(xe=>xe.pause())}restart(){this.players.forEach(xe=>xe.restart())}finish(){this._onFinish(),this.players.forEach(xe=>xe.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(xe=>xe.destroy()),this._onDestroyFns.forEach(xe=>xe()),this._onDestroyFns=[])}reset(){this.players.forEach(xe=>xe.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(xe){const xt=xe*this.totalTime;this.players.forEach(un=>{const jt=un.totalTime?Math.min(1,xt/un.totalTime):1;un.setPosition(jt)})}getPosition(){const xe=this.players.reduce((xt,un)=>null===xt||un.totalTime>xt.totalTime?un:xt,null);return null!=xe?xe.getPosition():0}beforeDestroy(){this.players.forEach(xe=>{xe.beforeDestroy&&xe.beforeDestroy()})}triggerCallback(xe){const xt="start"==xe?this._onStartFns:this._onDoneFns;xt.forEach(un=>un()),xt.length=0}}const Oe="!"},177:(nn,We,k)=>{k.d(We,{AJ:()=>gs,Jj:()=>rr,MD:()=>ks,N0:()=>ao,P9:()=>si,QT:()=>R,Sm:()=>ct,Sq:()=>wn,VF:()=>re,Vy:()=>Bi,Xr:()=>Bo,YU:()=>Xe,ZD:()=>v,_b:()=>ve,aZ:()=>ot,bT:()=>Er,fw:()=>at,hb:()=>nt,hj:()=>Me,qQ:()=>fe});var _=k(4438);let T=null;function R(){return T}function v(P){T??=P}class re{}const fe=new _.nKC("");let $e=(()=>{class P{historyGo(N){throw new Error("")}static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275prov=_.jDH({token:P,factory:()=>(0,_.WQX)(ye),providedIn:"platform"})}return P})();const Me=new _.nKC("");let ye=(()=>{class P extends $e{constructor(){super(),this._doc=(0,_.WQX)(fe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(N){const B=R().getGlobalEventTarget(this._doc,"window");return B.addEventListener("popstate",N,!1),()=>B.removeEventListener("popstate",N)}onHashChange(N){const B=R().getGlobalEventTarget(this._doc,"window");return B.addEventListener("hashchange",N,!1),()=>B.removeEventListener("hashchange",N)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(N){this._location.pathname=N}pushState(N,B,de){this._history.pushState(N,B,de)}replaceState(N,B,de){this._history.replaceState(N,B,de)}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275prov=_.jDH({token:P,factory:()=>new P,providedIn:"platform"})}return P})();function pe(P,X){if(0==P.length)return X;if(0==X.length)return P;let N=0;return P.endsWith("/")&&N++,X.startsWith("/")&&N++,2==N?P+X.substring(1):1==N?P+X:P+"/"+X}function Ge(P){const X=P.match(/#|\?|$/),N=X&&X.index||P.length;return P.slice(0,N-("/"===P[N-1]?1:0))+P.slice(N)}function it(P){return P&&"?"!==P[0]?"?"+P:P}let nt=(()=>{class P{historyGo(N){throw new Error("")}static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275prov=_.jDH({token:P,factory:()=>(0,_.WQX)(ct),providedIn:"root"})}return P})();const De=new _.nKC("");let ct=(()=>{class P extends nt{constructor(N,B){super(),this._platformLocation=N,this._removeListenerFns=[],this._baseHref=B??this._platformLocation.getBaseHrefFromDOM()??(0,_.WQX)(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return pe(this._baseHref,N)}path(N=!1){const B=this._platformLocation.pathname+it(this._platformLocation.search),de=this._platformLocation.hash;return de&&N?`${B}${de}`:B}pushState(N,B,de,Ze){const Pt=this.prepareExternalUrl(de+it(Ze));this._platformLocation.pushState(N,B,Pt)}replaceState(N,B,de,Ze){const Pt=this.prepareExternalUrl(de+it(Ze));this._platformLocation.replaceState(N,B,Pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}static#e=this.\u0275fac=function(B){return new(B||P)(_.KVO($e),_.KVO(De,8))};static#t=this.\u0275prov=_.jDH({token:P,factory:P.\u0275fac,providedIn:"root"})}return P})(),at=(()=>{class P extends nt{constructor(N,B){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=B&&(this._baseHref=B)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){const B=this._platformLocation.hash??"#";return B.length>0?B.substring(1):B}prepareExternalUrl(N){const B=pe(this._baseHref,N);return B.length>0?"#"+B:B}pushState(N,B,de,Ze){let Pt=this.prepareExternalUrl(de+it(Ze));0==Pt.length&&(Pt=this._platformLocation.pathname),this._platformLocation.pushState(N,B,Pt)}replaceState(N,B,de,Ze){let Pt=this.prepareExternalUrl(de+it(Ze));0==Pt.length&&(Pt=this._platformLocation.pathname),this._platformLocation.replaceState(N,B,Pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}static#e=this.\u0275fac=function(B){return new(B||P)(_.KVO($e),_.KVO(De,8))};static#t=this.\u0275prov=_.jDH({token:P,factory:P.\u0275fac})}return P})(),ot=(()=>{class P{constructor(N){this._subject=new _.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=N;const B=this._locationStrategy.getBaseHref();this._basePath=function we(P){if(new RegExp("^(https?:)?//").test(P)){const[,N]=P.split(/\/\/[^\/]+/);return N}return P}(Ge(ae(B))),this._locationStrategy.onPopState(de=>{this._subject.emit({url:this.path(!0),pop:!0,state:de.state,type:de.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(N=!1){return this.normalize(this._locationStrategy.path(N))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(N,B=""){return this.path()==this.normalize(N+it(B))}normalize(N){return P.stripTrailingSlash(function $t(P,X){if(!P||!X.startsWith(P))return X;const N=X.substring(P.length);return""===N||["/",";","?","#"].includes(N[0])?N:X}(this._basePath,ae(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._locationStrategy.prepareExternalUrl(N)}go(N,B="",de=null){this._locationStrategy.pushState(de,"",N,B),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+it(B)),de)}replaceState(N,B="",de=null){this._locationStrategy.replaceState(de,"",N,B),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+it(B)),de)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(N=0){this._locationStrategy.historyGo?.(N)}onUrlChange(N){return this._urlChangeListeners.push(N),this._urlChangeSubscription??=this.subscribe(B=>{this._notifyUrlChangeListeners(B.url,B.state)}),()=>{const B=this._urlChangeListeners.indexOf(N);this._urlChangeListeners.splice(B,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(N="",B){this._urlChangeListeners.forEach(de=>de(N,B))}subscribe(N,B,de){return this._subject.subscribe({next:N,error:B,complete:de})}static#e=this.normalizeQueryParams=it;static#t=this.joinWithSlash=pe;static#n=this.stripTrailingSlash=Ge;static#r=this.\u0275fac=function(B){return new(B||P)(_.KVO(nt))};static#i=this.\u0275prov=_.jDH({token:P,factory:()=>function At(){return new ot((0,_.KVO)(nt))}(),providedIn:"root"})}return P})();function ae(P){return P.replace(/\/index.html$/,"")}function ve(P,X){X=encodeURIComponent(X);for(const N of P.split(";")){const B=N.indexOf("="),[de,Ze]=-1==B?[N,""]:[N.slice(0,B),N.slice(B+1)];if(de.trim()===X)return decodeURIComponent(Ze)}return null}const Ee=/\s+/,ht=[];let Xe=(()=>{class P{constructor(N,B){this._ngEl=N,this._renderer=B,this.initialClasses=ht,this.stateMap=new Map}set klass(N){this.initialClasses=null!=N?N.trim().split(Ee):ht}set ngClass(N){this.rawClass="string"==typeof N?N.trim().split(Ee):N}ngDoCheck(){for(const B of this.initialClasses)this._updateState(B,!0);const N=this.rawClass;if(Array.isArray(N)||N instanceof Set)for(const B of N)this._updateState(B,!0);else if(null!=N)for(const B of Object.keys(N))this._updateState(B,!!N[B]);this._applyStateDiff()}_updateState(N,B){const de=this.stateMap.get(N);void 0!==de?(de.enabled!==B&&(de.changed=!0,de.enabled=B),de.touched=!0):this.stateMap.set(N,{enabled:B,changed:!0,touched:!0})}_applyStateDiff(){for(const N of this.stateMap){const B=N[0],de=N[1];de.changed?(this._toggleClass(B,de.enabled),de.changed=!1):de.touched||(de.enabled&&this._toggleClass(B,!1),this.stateMap.delete(B)),de.touched=!1}}_toggleClass(N,B){(N=N.trim()).length>0&&N.split(Ee).forEach(de=>{B?this._renderer.addClass(this._ngEl.nativeElement,de):this._renderer.removeClass(this._ngEl.nativeElement,de)})}static#e=this.\u0275fac=function(B){return new(B||P)(_.rXU(_.aKT),_.rXU(_.sFG))};static#t=this.\u0275dir=_.FsC({type:P,selectors:[["","ngClass",""]],inputs:{klass:[_.Mj6.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return P})();class Mn{constructor(X,N,B,de){this.$implicit=X,this.ngForOf=N,this.index=B,this.count=de}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wn=(()=>{class P{set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}constructor(N,B,de){this._viewContainer=N,this._template=B,this._differs=de,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;!this._differ&&N&&(this._differ=this._differs.find(N).create(this.ngForTrackBy))}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const B=this._viewContainer;N.forEachOperation((de,Ze,Pt)=>{if(null==de.previousIndex)B.createEmbeddedView(this._template,new Mn(de.item,this._ngForOf,-1,-1),null===Pt?void 0:Pt);else if(null==Pt)B.remove(null===Ze?void 0:Ze);else if(null!==Ze){const fn=B.get(Ze);B.move(fn,Pt),Sr(fn,de)}});for(let de=0,Ze=B.length;de<Ze;de++){const fn=B.get(de).context;fn.index=de,fn.count=Ze,fn.ngForOf=this._ngForOf}N.forEachIdentityChange(de=>{Sr(B.get(de.currentIndex),de)})}static ngTemplateContextGuard(N,B){return!0}static#e=this.\u0275fac=function(B){return new(B||P)(_.rXU(_.c1b),_.rXU(_.C4Q),_.rXU(_._q3))};static#t=this.\u0275dir=_.FsC({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return P})();function Sr(P,X){P.context.$implicit=X.item}let Er=(()=>{class P{constructor(N,B){this._viewContainer=N,this._context=new ui,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=B}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){qr("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){qr("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,B){return!0}static#e=this.\u0275fac=function(B){return new(B||P)(_.rXU(_.c1b),_.rXU(_.C4Q))};static#t=this.\u0275dir=_.FsC({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return P})();class ui{constructor(){this.$implicit=null,this.ngIf=null}}function qr(P,X){if(X&&!X.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,_.Tbb)(X)}'.`)}function Gi(P,X){return new _.wOt(2100,!1)}class oo{createSubscription(X,N){return(0,_.O8t)(()=>X.subscribe({next:N,error:B=>{throw B}}))}dispose(X){(0,_.O8t)(()=>X.unsubscribe())}}class Yo{createSubscription(X,N){return X.then(N,B=>{throw B})}dispose(X){}}const la=new Yo,yo=new oo;let rr=(()=>{class P{constructor(N){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=N}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(N){if(!this._obj){if(N)try{this.markForCheckOnValueUpdate=!1,this._subscribe(N)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return N!==this._obj?(this._dispose(),this.transform(N)):this._latestValue}_subscribe(N){this._obj=N,this._strategy=this._selectStrategy(N),this._subscription=this._strategy.createSubscription(N,B=>this._updateLatestValue(N,B))}_selectStrategy(N){if((0,_.jNT)(N))return la;if((0,_.zjR)(N))return yo;throw Gi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(N,B){N===this._obj&&(this._latestValue=B,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(B){return new(B||P)(_.rXU(_.gRc,16))};static#t=this.\u0275pipe=_.EJ8({name:"async",type:P,pure:!1,standalone:!0})}return P})(),si=(()=>{class P{transform(N,B,de){if(null==N)return null;if(!this.supports(N))throw Gi();return N.slice(B,de)}supports(N){return"string"==typeof N||Array.isArray(N)}static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275pipe=_.EJ8({name:"slice",type:P,pure:!1,standalone:!0})}return P})(),ks=(()=>{class P{static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275mod=_.$C({type:P});static#n=this.\u0275inj=_.G2t({})}return P})();const gs="browser",Xs="server";function Bi(P){return P===Xs}let Bo=(()=>{class P{static#e=this.\u0275prov=(0,_.jDH)({token:P,providedIn:"root",factory:()=>function zi(P){return P===gs}((0,_.WQX)(_.Agw))?new ns((0,_.WQX)(fe),window):new Eo})}return P})();class ns{constructor(X,N){this.document=X,this.window=N,this.offset=()=>[0,0]}setOffset(X){this.offset=Array.isArray(X)?()=>X:X}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(X){this.window.scrollTo(X[0],X[1])}scrollToAnchor(X){const N=function Mi(P,X){const N=P.getElementById(X)||P.getElementsByName(X)[0];if(N)return N;if("function"==typeof P.createTreeWalker&&P.body&&"function"==typeof P.body.attachShadow){const B=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let de=B.currentNode;for(;de;){const Ze=de.shadowRoot;if(Ze){const Pt=Ze.getElementById(X)||Ze.querySelector(`[name="${X}"]`);if(Pt)return Pt}de=B.nextNode()}}return null}(this.document,X);N&&(this.scrollToElement(N),N.focus())}setHistoryScrollRestoration(X){this.window.history.scrollRestoration=X}scrollToElement(X){const N=X.getBoundingClientRect(),B=N.left+this.window.pageXOffset,de=N.top+this.window.pageYOffset,Ze=this.offset();this.window.scrollTo(B-Ze[0],de-Ze[1])}}class Eo{setOffset(X){}getScrollPosition(){return[0,0]}scrollToPosition(X){}scrollToAnchor(X){}setHistoryScrollRestoration(X){}}class ao{}},1626:(nn,We,k)=>{k.d(We,{Qq:()=>ft,q1:()=>Bn}),k(467);var T=k(4438),R=k(7673),v=k(1985),re=k(8455),Se=k(274),fe=k(5964),$e=k(6354),Me=k(980),ye=k(5558),pe=k(177);class Ge{}class it{}class nt{constructor(ve){this.normalizedNames=new Map,this.lazyUpdate=null,ve?"string"==typeof ve?this.lazyInit=()=>{this.headers=new Map,ve.split("\n").forEach(Ee=>{const ht=Ee.indexOf(":");if(ht>0){const Xe=Ee.slice(0,ht),Xt=Xe.toLowerCase(),Bt=Ee.slice(ht+1).trim();this.maybeSetNormalizedName(Xe,Xt),this.headers.has(Xt)?this.headers.get(Xt).push(Bt):this.headers.set(Xt,[Bt])}})}:typeof Headers<"u"&&ve instanceof Headers?(this.headers=new Map,ve.forEach((Ee,ht)=>{this.setHeaderEntries(ht,Ee)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(ve).forEach(([Ee,ht])=>{this.setHeaderEntries(Ee,ht)})}:this.headers=new Map}has(ve){return this.init(),this.headers.has(ve.toLowerCase())}get(ve){this.init();const Ee=this.headers.get(ve.toLowerCase());return Ee&&Ee.length>0?Ee[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ve){return this.init(),this.headers.get(ve.toLowerCase())||null}append(ve,Ee){return this.clone({name:ve,value:Ee,op:"a"})}set(ve,Ee){return this.clone({name:ve,value:Ee,op:"s"})}delete(ve,Ee){return this.clone({name:ve,value:Ee,op:"d"})}maybeSetNormalizedName(ve,Ee){this.normalizedNames.has(Ee)||this.normalizedNames.set(Ee,ve)}init(){this.lazyInit&&(this.lazyInit instanceof nt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ve=>this.applyUpdate(ve)),this.lazyUpdate=null))}copyFrom(ve){ve.init(),Array.from(ve.headers.keys()).forEach(Ee=>{this.headers.set(Ee,ve.headers.get(Ee)),this.normalizedNames.set(Ee,ve.normalizedNames.get(Ee))})}clone(ve){const Ee=new nt;return Ee.lazyInit=this.lazyInit&&this.lazyInit instanceof nt?this.lazyInit:this,Ee.lazyUpdate=(this.lazyUpdate||[]).concat([ve]),Ee}applyUpdate(ve){const Ee=ve.name.toLowerCase();switch(ve.op){case"a":case"s":let ht=ve.value;if("string"==typeof ht&&(ht=[ht]),0===ht.length)return;this.maybeSetNormalizedName(ve.name,Ee);const Xe=("a"===ve.op?this.headers.get(Ee):void 0)||[];Xe.push(...ht),this.headers.set(Ee,Xe);break;case"d":const Xt=ve.value;if(Xt){let Bt=this.headers.get(Ee);if(!Bt)return;Bt=Bt.filter(Mn=>-1===Xt.indexOf(Mn)),0===Bt.length?(this.headers.delete(Ee),this.normalizedNames.delete(Ee)):this.headers.set(Ee,Bt)}else this.headers.delete(Ee),this.normalizedNames.delete(Ee)}}setHeaderEntries(ve,Ee){const ht=(Array.isArray(Ee)?Ee:[Ee]).map(Xt=>Xt.toString()),Xe=ve.toLowerCase();this.headers.set(Xe,ht),this.maybeSetNormalizedName(ve,Xe)}forEach(ve){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ee=>ve(this.normalizedNames.get(Ee),this.headers.get(Ee)))}}class ct{encodeKey(ve){return $t(ve)}encodeValue(ve){return $t(ve)}decodeKey(ve){return decodeURIComponent(ve)}decodeValue(ve){return decodeURIComponent(ve)}}const ot=/%(\d[a-f0-9])/gi,At={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $t(te){return encodeURIComponent(te).replace(ot,(ve,Ee)=>At[Ee]??ve)}function ae(te){return`${te}`}class we{constructor(ve={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ve.encoder||new ct,ve.fromString){if(ve.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function at(te,ve){const Ee=new Map;return te.length>0&&te.replace(/^\?/,"").split("&").forEach(Xe=>{const Xt=Xe.indexOf("="),[Bt,Mn]=-1==Xt?[ve.decodeKey(Xe),""]:[ve.decodeKey(Xe.slice(0,Xt)),ve.decodeValue(Xe.slice(Xt+1))],wn=Ee.get(Bt)||[];wn.push(Mn),Ee.set(Bt,wn)}),Ee}(ve.fromString,this.encoder)}else ve.fromObject?(this.map=new Map,Object.keys(ve.fromObject).forEach(Ee=>{const ht=ve.fromObject[Ee],Xe=Array.isArray(ht)?ht.map(ae):[ae(ht)];this.map.set(Ee,Xe)})):this.map=null}has(ve){return this.init(),this.map.has(ve)}get(ve){this.init();const Ee=this.map.get(ve);return Ee?Ee[0]:null}getAll(ve){return this.init(),this.map.get(ve)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ve,Ee){return this.clone({param:ve,value:Ee,op:"a"})}appendAll(ve){const Ee=[];return Object.keys(ve).forEach(ht=>{const Xe=ve[ht];Array.isArray(Xe)?Xe.forEach(Xt=>{Ee.push({param:ht,value:Xt,op:"a"})}):Ee.push({param:ht,value:Xe,op:"a"})}),this.clone(Ee)}set(ve,Ee){return this.clone({param:ve,value:Ee,op:"s"})}delete(ve,Ee){return this.clone({param:ve,value:Ee,op:"d"})}toString(){return this.init(),this.keys().map(ve=>{const Ee=this.encoder.encodeKey(ve);return this.map.get(ve).map(ht=>Ee+"="+this.encoder.encodeValue(ht)).join("&")}).filter(ve=>""!==ve).join("&")}clone(ve){const Ee=new we({encoder:this.encoder});return Ee.cloneFrom=this.cloneFrom||this,Ee.updates=(this.updates||[]).concat(ve),Ee}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ve=>this.map.set(ve,this.cloneFrom.map.get(ve))),this.updates.forEach(ve=>{switch(ve.op){case"a":case"s":const Ee=("a"===ve.op?this.map.get(ve.param):void 0)||[];Ee.push(ae(ve.value)),this.map.set(ve.param,Ee);break;case"d":if(void 0===ve.value){this.map.delete(ve.param);break}{let ht=this.map.get(ve.param)||[];const Xe=ht.indexOf(ae(ve.value));-1!==Xe&&ht.splice(Xe,1),ht.length>0?this.map.set(ve.param,ht):this.map.delete(ve.param)}}}),this.cloneFrom=this.updates=null)}}class je{constructor(){this.map=new Map}set(ve,Ee){return this.map.set(ve,Ee),this}get(ve){return this.map.has(ve)||this.map.set(ve,ve.defaultValue()),this.map.get(ve)}delete(ve){return this.map.delete(ve),this}has(ve){return this.map.has(ve)}keys(){return this.map.keys()}}function Oe(te){return typeof ArrayBuffer<"u"&&te instanceof ArrayBuffer}function ce(te){return typeof Blob<"u"&&te instanceof Blob}function xe(te){return typeof FormData<"u"&&te instanceof FormData}class un{constructor(ve,Ee,ht,Xe){let Xt;if(this.url=Ee,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ve.toUpperCase(),function Ue(te){switch(te){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Xe?(this.body=void 0!==ht?ht:null,Xt=Xe):Xt=ht,Xt&&(this.reportProgress=!!Xt.reportProgress,this.withCredentials=!!Xt.withCredentials,Xt.responseType&&(this.responseType=Xt.responseType),Xt.headers&&(this.headers=Xt.headers),Xt.context&&(this.context=Xt.context),Xt.params&&(this.params=Xt.params),this.transferCache=Xt.transferCache),this.headers??=new nt,this.context??=new je,this.params){const Bt=this.params.toString();if(0===Bt.length)this.urlWithParams=Ee;else{const Mn=Ee.indexOf("?");this.urlWithParams=Ee+(-1===Mn?"?":Mn<Ee.length-1?"&":"")+Bt}}else this.params=new we,this.urlWithParams=Ee}serializeBody(){return null===this.body?null:"string"==typeof this.body||Oe(this.body)||ce(this.body)||xe(this.body)||function xt(te){return typeof URLSearchParams<"u"&&te instanceof URLSearchParams}(this.body)?this.body:this.body instanceof we?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||xe(this.body)?null:ce(this.body)?this.body.type||null:Oe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof we?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ve={}){const Ee=ve.method||this.method,ht=ve.url||this.url,Xe=ve.responseType||this.responseType,Xt=ve.transferCache??this.transferCache,Bt=void 0!==ve.body?ve.body:this.body,Mn=ve.withCredentials??this.withCredentials,wn=ve.reportProgress??this.reportProgress;let Sr=ve.headers||this.headers,ii=ve.params||this.params;const Er=ve.context??this.context;return void 0!==ve.setHeaders&&(Sr=Object.keys(ve.setHeaders).reduce((ui,qr)=>ui.set(qr,ve.setHeaders[qr]),Sr)),ve.setParams&&(ii=Object.keys(ve.setParams).reduce((ui,qr)=>ui.set(qr,ve.setParams[qr]),ii)),new un(Ee,ht,Bt,{params:ii,headers:Sr,context:Er,reportProgress:wn,responseType:Xe,withCredentials:Mn,transferCache:Xt})}}var jt=function(te){return te[te.Sent=0]="Sent",te[te.UploadProgress=1]="UploadProgress",te[te.ResponseHeader=2]="ResponseHeader",te[te.DownloadProgress=3]="DownloadProgress",te[te.Response=4]="Response",te[te.User=5]="User",te}(jt||{});class ln{constructor(ve,Ee=Re.Ok,ht="OK"){this.headers=ve.headers||new nt,this.status=void 0!==ve.status?ve.status:Ee,this.statusText=ve.statusText||ht,this.url=ve.url||null,this.ok=this.status>=200&&this.status<300}}class Lt extends ln{constructor(ve={}){super(ve),this.type=jt.ResponseHeader}clone(ve={}){return new Lt({headers:ve.headers||this.headers,status:void 0!==ve.status?ve.status:this.status,statusText:ve.statusText||this.statusText,url:ve.url||this.url||void 0})}}class ut extends ln{constructor(ve={}){super(ve),this.type=jt.Response,this.body=void 0!==ve.body?ve.body:null}clone(ve={}){return new ut({body:void 0!==ve.body?ve.body:this.body,headers:ve.headers||this.headers,status:void 0!==ve.status?ve.status:this.status,statusText:ve.statusText||this.statusText,url:ve.url||this.url||void 0})}}class rn extends ln{constructor(ve){super(ve,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ve.url||"(unknown url)"}`:`Http failure response for ${ve.url||"(unknown url)"}: ${ve.status} ${ve.statusText}`,this.error=ve.error||null}}var Re=function(te){return te[te.Continue=100]="Continue",te[te.SwitchingProtocols=101]="SwitchingProtocols",te[te.Processing=102]="Processing",te[te.EarlyHints=103]="EarlyHints",te[te.Ok=200]="Ok",te[te.Created=201]="Created",te[te.Accepted=202]="Accepted",te[te.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",te[te.NoContent=204]="NoContent",te[te.ResetContent=205]="ResetContent",te[te.PartialContent=206]="PartialContent",te[te.MultiStatus=207]="MultiStatus",te[te.AlreadyReported=208]="AlreadyReported",te[te.ImUsed=226]="ImUsed",te[te.MultipleChoices=300]="MultipleChoices",te[te.MovedPermanently=301]="MovedPermanently",te[te.Found=302]="Found",te[te.SeeOther=303]="SeeOther",te[te.NotModified=304]="NotModified",te[te.UseProxy=305]="UseProxy",te[te.Unused=306]="Unused",te[te.TemporaryRedirect=307]="TemporaryRedirect",te[te.PermanentRedirect=308]="PermanentRedirect",te[te.BadRequest=400]="BadRequest",te[te.Unauthorized=401]="Unauthorized",te[te.PaymentRequired=402]="PaymentRequired",te[te.Forbidden=403]="Forbidden",te[te.NotFound=404]="NotFound",te[te.MethodNotAllowed=405]="MethodNotAllowed",te[te.NotAcceptable=406]="NotAcceptable",te[te.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",te[te.RequestTimeout=408]="RequestTimeout",te[te.Conflict=409]="Conflict",te[te.Gone=410]="Gone",te[te.LengthRequired=411]="LengthRequired",te[te.PreconditionFailed=412]="PreconditionFailed",te[te.PayloadTooLarge=413]="PayloadTooLarge",te[te.UriTooLong=414]="UriTooLong",te[te.UnsupportedMediaType=415]="UnsupportedMediaType",te[te.RangeNotSatisfiable=416]="RangeNotSatisfiable",te[te.ExpectationFailed=417]="ExpectationFailed",te[te.ImATeapot=418]="ImATeapot",te[te.MisdirectedRequest=421]="MisdirectedRequest",te[te.UnprocessableEntity=422]="UnprocessableEntity",te[te.Locked=423]="Locked",te[te.FailedDependency=424]="FailedDependency",te[te.TooEarly=425]="TooEarly",te[te.UpgradeRequired=426]="UpgradeRequired",te[te.PreconditionRequired=428]="PreconditionRequired",te[te.TooManyRequests=429]="TooManyRequests",te[te.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",te[te.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",te[te.InternalServerError=500]="InternalServerError",te[te.NotImplemented=501]="NotImplemented",te[te.BadGateway=502]="BadGateway",te[te.ServiceUnavailable=503]="ServiceUnavailable",te[te.GatewayTimeout=504]="GatewayTimeout",te[te.HttpVersionNotSupported=505]="HttpVersionNotSupported",te[te.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",te[te.InsufficientStorage=507]="InsufficientStorage",te[te.LoopDetected=508]="LoopDetected",te[te.NotExtended=510]="NotExtended",te[te.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",te}(Re||{});function qe(te,ve){return{body:ve,headers:te.headers,context:te.context,observe:te.observe,params:te.params,reportProgress:te.reportProgress,responseType:te.responseType,withCredentials:te.withCredentials,transferCache:te.transferCache}}let ft=(()=>{class te{constructor(Ee){this.handler=Ee}request(Ee,ht,Xe={}){let Xt;if(Ee instanceof un)Xt=Ee;else{let wn,Sr;wn=Xe.headers instanceof nt?Xe.headers:new nt(Xe.headers),Xe.params&&(Sr=Xe.params instanceof we?Xe.params:new we({fromObject:Xe.params})),Xt=new un(Ee,ht,void 0!==Xe.body?Xe.body:null,{headers:wn,context:Xe.context,params:Sr,reportProgress:Xe.reportProgress,responseType:Xe.responseType||"json",withCredentials:Xe.withCredentials,transferCache:Xe.transferCache})}const Bt=(0,R.of)(Xt).pipe((0,Se.H)(wn=>this.handler.handle(wn)));if(Ee instanceof un||"events"===Xe.observe)return Bt;const Mn=Bt.pipe((0,fe.p)(wn=>wn instanceof ut));switch(Xe.observe||"body"){case"body":switch(Xt.responseType){case"arraybuffer":return Mn.pipe((0,$e.T)(wn=>{if(null!==wn.body&&!(wn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return wn.body}));case"blob":return Mn.pipe((0,$e.T)(wn=>{if(null!==wn.body&&!(wn.body instanceof Blob))throw new Error("Response is not a Blob.");return wn.body}));case"text":return Mn.pipe((0,$e.T)(wn=>{if(null!==wn.body&&"string"!=typeof wn.body)throw new Error("Response is not a string.");return wn.body}));default:return Mn.pipe((0,$e.T)(wn=>wn.body))}case"response":return Mn;default:throw new Error(`Unreachable: unhandled observe type ${Xe.observe}}`)}}delete(Ee,ht={}){return this.request("DELETE",Ee,ht)}get(Ee,ht={}){return this.request("GET",Ee,ht)}head(Ee,ht={}){return this.request("HEAD",Ee,ht)}jsonp(Ee,ht){return this.request("JSONP",Ee,{params:(new we).append(ht,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ee,ht={}){return this.request("OPTIONS",Ee,ht)}patch(Ee,ht,Xe={}){return this.request("PATCH",Ee,qe(Xe,ht))}post(Ee,ht,Xe={}){return this.request("POST",Ee,qe(Xe,ht))}put(Ee,ht,Xe={}){return this.request("PUT",Ee,qe(Xe,ht))}static#e=this.\u0275fac=function(ht){return new(ht||te)(T.KVO(Ge))};static#t=this.\u0275prov=T.jDH({token:te,factory:te.\u0275fac})}return te})();function Cn(te,ve){return ve(te)}function Dn(te,ve){return(Ee,ht)=>ve.intercept(Ee,{handle:Xe=>te(Xe,ht)})}const st=new T.nKC(""),In=new T.nKC(""),Kn=new T.nKC(""),sr=new T.nKC("");function St(){let te=null;return(ve,Ee)=>{null===te&&(te=((0,T.WQX)(st,{optional:!0})??[]).reduceRight(Dn,Cn));const ht=(0,T.WQX)(T.TgB),Xe=ht.add();return te(ve,Ee).pipe((0,Me.j)(()=>ht.remove(Xe)))}}let Nt=(()=>{class te extends Ge{constructor(Ee,ht){super(),this.backend=Ee,this.injector=ht,this.chain=null,this.pendingTasks=(0,T.WQX)(T.TgB);const Xe=(0,T.WQX)(sr,{optional:!0});this.backend=Xe??Ee}handle(Ee){if(null===this.chain){const Xe=Array.from(new Set([...this.injector.get(In),...this.injector.get(Kn,[])]));this.chain=Xe.reduceRight((Xt,Bt)=>function Ln(te,ve,Ee){return(ht,Xe)=>(0,T.N4e)(Ee,()=>ve(ht,Xt=>te(Xt,Xe)))}(Xt,Bt,this.injector),Cn)}const ht=this.pendingTasks.add();return this.chain(Ee,Xe=>this.backend.handle(Xe)).pipe((0,Me.j)(()=>this.pendingTasks.remove(ht)))}static#e=this.\u0275fac=function(ht){return new(ht||te)(T.KVO(it),T.KVO(T.uvJ))};static#t=this.\u0275prov=T.jDH({token:te,factory:te.\u0275fac})}return te})();const hs=/^\)\]\}',?\n/;let Li=(()=>{class te{constructor(Ee){this.xhrFactory=Ee}handle(Ee){if("JSONP"===Ee.method)throw new T.wOt(-2800,!1);const ht=this.xhrFactory;return(ht.\u0275loadImpl?(0,re.H)(ht.\u0275loadImpl()):(0,R.of)(null)).pipe((0,ye.n)(()=>new v.c(Xt=>{const Bt=ht.build();if(Bt.open(Ee.method,Ee.urlWithParams),Ee.withCredentials&&(Bt.withCredentials=!0),Ee.headers.forEach((Ir,Dr)=>Bt.setRequestHeader(Ir,Dr.join(","))),Ee.headers.has("Accept")||Bt.setRequestHeader("Accept","application/json, text/plain, */*"),!Ee.headers.has("Content-Type")){const Ir=Ee.detectContentTypeHeader();null!==Ir&&Bt.setRequestHeader("Content-Type",Ir)}if(Ee.responseType){const Ir=Ee.responseType.toLowerCase();Bt.responseType="json"!==Ir?Ir:"text"}const Mn=Ee.serializeBody();let wn=null;const Sr=()=>{if(null!==wn)return wn;const Ir=Bt.statusText||"OK",Dr=new nt(Bt.getAllResponseHeaders()),li=function Nn(te){return"responseURL"in te&&te.responseURL?te.responseURL:/^X-Request-URL:/m.test(te.getAllResponseHeaders())?te.getResponseHeader("X-Request-URL"):null}(Bt)||Ee.url;return wn=new Lt({headers:Dr,status:Bt.status,statusText:Ir,url:li}),wn},ii=()=>{let{headers:Ir,status:Dr,statusText:li,url:nr}=Sr(),Fr=null;Dr!==Re.NoContent&&(Fr=typeof Bt.response>"u"?Bt.responseText:Bt.response),0===Dr&&(Dr=Fr?Re.Ok:0);let di=Dr>=200&&Dr<300;if("json"===Ee.responseType&&"string"==typeof Fr){const vi=Fr;Fr=Fr.replace(hs,"");try{Fr=""!==Fr?JSON.parse(Fr):null}catch(Ei){Fr=vi,di&&(di=!1,Fr={error:Ei,text:Fr})}}di?(Xt.next(new ut({body:Fr,headers:Ir,status:Dr,statusText:li,url:nr||void 0})),Xt.complete()):Xt.error(new rn({error:Fr,headers:Ir,status:Dr,statusText:li,url:nr||void 0}))},Er=Ir=>{const{url:Dr}=Sr(),li=new rn({error:Ir,status:Bt.status||0,statusText:Bt.statusText||"Unknown Error",url:Dr||void 0});Xt.error(li)};let ui=!1;const qr=Ir=>{ui||(Xt.next(Sr()),ui=!0);let Dr={type:jt.DownloadProgress,loaded:Ir.loaded};Ir.lengthComputable&&(Dr.total=Ir.total),"text"===Ee.responseType&&Bt.responseText&&(Dr.partialText=Bt.responseText),Xt.next(Dr)},Si=Ir=>{let Dr={type:jt.UploadProgress,loaded:Ir.loaded};Ir.lengthComputable&&(Dr.total=Ir.total),Xt.next(Dr)};return Bt.addEventListener("load",ii),Bt.addEventListener("error",Er),Bt.addEventListener("timeout",Er),Bt.addEventListener("abort",Er),Ee.reportProgress&&(Bt.addEventListener("progress",qr),null!==Mn&&Bt.upload&&Bt.upload.addEventListener("progress",Si)),Bt.send(Mn),Xt.next({type:jt.Sent}),()=>{Bt.removeEventListener("error",Er),Bt.removeEventListener("abort",Er),Bt.removeEventListener("load",ii),Bt.removeEventListener("timeout",Er),Ee.reportProgress&&(Bt.removeEventListener("progress",qr),null!==Mn&&Bt.upload&&Bt.upload.removeEventListener("progress",Si)),Bt.readyState!==Bt.DONE&&Bt.abort()}})))}static#e=this.\u0275fac=function(ht){return new(ht||te)(T.KVO(pe.N0))};static#t=this.\u0275prov=T.jDH({token:te,factory:te.\u0275fac})}return te})();const zt=new T.nKC(""),Nr=new T.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Zt=new T.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Kr{}let Rn=(()=>{class te{constructor(Ee,ht,Xe){this.doc=Ee,this.platform=ht,this.cookieName=Xe,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ee=this.doc.cookie||"";return Ee!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,pe._b)(Ee,this.cookieName),this.lastCookieString=Ee),this.lastToken}static#e=this.\u0275fac=function(ht){return new(ht||te)(T.KVO(pe.qQ),T.KVO(T.Agw),T.KVO(Nr))};static#t=this.\u0275prov=T.jDH({token:te,factory:te.\u0275fac})}return te})();function xr(te,ve){const Ee=te.url.toLowerCase();if(!(0,T.WQX)(zt)||"GET"===te.method||"HEAD"===te.method||Ee.startsWith("http://")||Ee.startsWith("https://"))return ve(te);const ht=(0,T.WQX)(Kr).getToken(),Xe=(0,T.WQX)(Zt);return null!=ht&&!te.headers.has(Xe)&&(te=te.clone({headers:te.headers.set(Xe,ht)})),ve(te)}var Ce=function(te){return te[te.Interceptors=0]="Interceptors",te[te.LegacyInterceptors=1]="LegacyInterceptors",te[te.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",te[te.NoXsrfProtection=3]="NoXsrfProtection",te[te.JsonpSupport=4]="JsonpSupport",te[te.RequestsMadeViaParent=5]="RequestsMadeViaParent",te[te.Fetch=6]="Fetch",te}(Ce||{});function Qe(...te){const ve=[ft,Li,Nt,{provide:Ge,useExisting:Nt},{provide:it,useExisting:Li},{provide:In,useValue:xr,multi:!0},{provide:zt,useValue:!0},{provide:Kr,useClass:Rn}];for(const Ee of te)ve.push(...Ee.\u0275providers);return(0,T.EmA)(ve)}const me=new T.nKC("");function q(){return function Ie(te,ve){return{\u0275kind:te,\u0275providers:ve}}(Ce.LegacyInterceptors,[{provide:me,useFactory:St},{provide:In,useExisting:me,multi:!0}])}let Bn=(()=>{class te{static#e=this.\u0275fac=function(ht){return new(ht||te)};static#t=this.\u0275mod=T.$C({type:te});static#n=this.\u0275inj=T.G2t({providers:[Qe(q())]})}return te})()},4438:(nn,We,k)=>{k.d(We,{bc$:()=>bg,iLQ:()=>R0,sZ2:()=>wf,hnV:()=>yD,Hbi:()=>tR,o8S:()=>yd,BIS:()=>dE,gRc:()=>RD,Ql9:()=>bM,Ocv:()=>kM,Z63:()=>Us,aKT:()=>hc,uvJ:()=>Tr,zcH:()=>Po,bkB:()=>Qa,$GK:()=>rr,nKC:()=>Xe,zZn:()=>so,_q3:()=>U0,MKu:()=>B0,xe9:()=>Gv,Co$:()=>t_,Vns:()=>Tu,SKi:()=>ws,Xx1:()=>zi,Agw:()=>Df,PLl:()=>Tf,sFG:()=>_u,_9s:()=>qy,czy:()=>Xa,kdw:()=>ts,C4Q:()=>Th,NYb:()=>EM,giA:()=>mD,xvI:()=>qP,RxE:()=>cD,c1b:()=>$c,gXe:()=>ds,mal:()=>po,L39:()=>MR,Ol2:()=>Ot,w6W:()=>gd,oH4:()=>bD,Rfq:()=>xr,WQX:()=>dn,naY:()=>BM,QuC:()=>Ri,EmA:()=>Do,fpN:()=>eR,HJs:()=>LR,N4e:()=>eo,O8t:()=>OR,An2:()=>He,H3F:()=>uD,H8p:()=>hn,KH2:()=>Bp,TgB:()=>Ja,wOt:()=>_t,WHO:()=>pD,e01:()=>gD,H5H:()=>l0,Zy3:()=>Zr,mq5:()=>Cw,JZv:()=>Nn,LfX:()=>vt,plB:()=>yu,jNT:()=>P0,zjR:()=>_D,TL$:()=>Ag,Tbb:()=>Jt,Vt3:()=>Ep,Mj6:()=>_s,GFd:()=>ua,OA$:()=>Dt,Jv_:()=>xT,aNF:()=>kT,R7$:()=>KE,BMQ:()=>qI,AVh:()=>e0,wni:()=>uT,VBU:()=>Ua,FsC:()=>ea,jDH:()=>or,G2t:()=>Hi,$C:()=>wo,EJ8:()=>To,rXU:()=>td,nrm:()=>a0,k0s:()=>Nv,j41:()=>Ov,RV6:()=>vw,xGo:()=>Fd,KVO:()=>ei,kS0:()=>Gs,QTQ:()=>Ty,bIt:()=>f0,lsd:()=>hT,XpG:()=>Zw,nI1:()=>HT,bMT:()=>GT,i5U:()=>zT,brH:()=>WT,Y8G:()=>JI,mGM:()=>dT,Njj:()=>Vu,eBV:()=>Ol,B4B:()=>Nf,n$t:()=>ay,wjB:()=>FT,DNE:()=>Cp,EFF:()=>CT,JRh:()=>m0,SpI:()=>Lv,DH7:()=>OT,mxI:()=>y0,R50:()=>_0,GBs:()=>lT}),k(467);let R=null,re=1;const Se=Symbol("SIGNAL");function fe(e){const n=R;return R=e,n}function nt(e){if((!je(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==re)){if(!e.producerMustRecompute(e)&&!$t(e))return e.dirty=!1,void(e.lastCleanEpoch=re);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=re}}function $t(e){Ue(e);for(let n=0;n<e.producerNode.length;n++){const i=e.producerNode[n],s=e.producerLastReadVersion[n];if(s!==i.version||(nt(i),s!==i.version))return!0}return!1}function ie(e,n){if(function Oe(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),Ue(e),1===e.liveConsumerNode.length)for(let s=0;s<e.producerNode.length;s++)ie(e.producerNode[s],e.producerIndexOfThis[s]);const i=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[i],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[i],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const s=e.liveConsumerIndexOfThis[n],c=e.liveConsumerNode[n];Ue(c),c.producerIndexOfThis[s]=n}}function je(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ue(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let Lt=null;var Ln=k(1413),st=k(8359),In=k(4412),Kn=k(6354);const St="https://g.co/ng/security#xss";class _t extends Error{constructor(n,i){super(Zr(n,i)),this.code=n}}function Zr(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}function An(e){return{toString:e}.toString()}const kr="__parameters__";function Or(e,n,i){return An(()=>{const s=function Vi(e){return function(...i){if(e){const s=e(...i);for(const c in s)this[c]=s[c]}}}(n);function c(...l){if(this instanceof c)return s.apply(this,l),this;const p=new c(...l);return y.annotation=p,y;function y(S,U,Q){const ue=S.hasOwnProperty(kr)?S[kr]:Object.defineProperty(S,kr,{value:[]})[kr];for(;ue.length<=Q;)ue.push(null);return(ue[Q]=ue[Q]||[]).push(p),S}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=e,c.annotationCls=c,c})}const Nn=globalThis;function Un(e){for(let n in e)if(e[n]===Un)return n;throw Error("Could not find renamed property on target object.")}function Nr(e,n){for(const i in n)n.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=n[i])}function Jt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Jt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function Zt(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Rn=Un({__forward_ref__:Un});function xr(e){return e.__forward_ref__=xr,e.toString=function(){return Jt(this())},e}function Ve(e){return Ce(e)?e():e}function Ce(e){return"function"==typeof e&&e.hasOwnProperty(Rn)&&e.__forward_ref__===xr}function or(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Hi(e){return{providers:e.providers||[],imports:e.imports||[]}}function ti(e){return Ye(e,te)||Ye(e,Ee)}function vt(e){return null!==ti(e)}function Ye(e,n){return e.hasOwnProperty(n)?e[n]:null}function an(e){return e&&(e.hasOwnProperty(ve)||e.hasOwnProperty(ht))?e[ve]:null}const te=Un({\u0275prov:Un}),ve=Un({\u0275inj:Un}),Ee=Un({ngInjectableDef:Un}),ht=Un({ngInjectorDef:Un});class Xe{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=or({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ir(e){return e&&!!e.\u0275providers}const Dr=Un({\u0275cmp:Un}),li=Un({\u0275dir:Un}),nr=Un({\u0275pipe:Un}),Fr=Un({\u0275mod:Un}),di=Un({\u0275fac:Un}),vi=Un({__NG_ELEMENT_ID__:Un}),Ei=Un({__NG_ENV_ID__:Un});function On(e){return"string"==typeof e?e:null==e?"":String(e)}function yo(e,n){throw new _t(-201,!1)}var rr=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(rr||{});let vo;function xs(){return vo}function wr(e){const n=vo;return vo=e,n}function Lo(e,n,i){const s=ti(e);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:i&rr.Optional?null:void 0!==n?n:void yo()}const Rs={},Pr="__NG_DI_FLAG__",Ui="ngTempTokenPath",Cr=/\n/gm,Qs="__source";let Xr;function hi(e){const n=Xr;return Xr=e,n}function Hr(e,n=rr.Default){if(void 0===Xr)throw new _t(-203,!1);return null===Xr?Lo(e,void 0,n):Xr.get(e,n&rr.Optional?null:void 0,n)}function ei(e,n=rr.Default){return(xs()||Hr)(Ve(e),n)}function dn(e,n=rr.Default){return ei(e,si(n))}function si(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ps(e){const n=[];for(let i=0;i<e.length;i++){const s=Ve(e[i]);if(Array.isArray(s)){if(0===s.length)throw new _t(900,!1);let c,l=rr.Default;for(let p=0;p<s.length;p++){const y=s[p],S=gs(y);"number"==typeof S?-1===S?c=y.token:l|=S:c=y}n.push(ei(c,l))}else n.push(ei(s))}return n}function ks(e,n){return e[Pr]=n,e.prototype[Pr]=n,e}function gs(e){return e[Pr]}const zi=ks(Or("Optional"),8),ts=ks(Or("SkipSelf"),4);function ji(e,n){return e.hasOwnProperty(di)?e[di]:null}function Mi(e,n){e.forEach(i=>Array.isArray(i)?Mi(i,n):n(i))}function Eo(e,n,i){n>=e.length?e.push(i):e.splice(n,0,i)}function ao(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Wi(e,n,i){let s=Ci(e,n);return s>=0?e[1|s]=i:(s=~s,function Jo(e,n,i,s){let c=e.length;if(c==n)e.push(i,s);else if(1===c)e.push(s,e[0]),e[0]=i;else{for(c--,e.push(e[c-1],e[c]);c>n;)e[c]=e[c-2],c--;e[n]=i,e[n+1]=s}}(e,s,n,i)),s}function Ls(e,n){const i=Ci(e,n);if(i>=0)return e[1|i]}function Ci(e,n){return function Zo(e,n,i){let s=0,c=e.length>>i;for(;c!==s;){const l=s+(c-s>>1),p=e[l<<i];if(n===p)return l<<i;p>n?c=l:s=l+1}return~(c<<i)}(e,n,1)}const wi={},yr=[],Us=new Xe(""),ha=new Xe("",-1),Yr=new Xe("");class co{get(n,i=Rs){if(i===Rs){const s=new Error(`NullInjectorError: No provider for ${Jt(n)}!`);throw s.name="NullInjectorError",s}return i}}var ar=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(ar||{}),ds=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(ds||{}),_s=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(_s||{});function Co(e,n,i){let s=e.length;for(;;){const c=e.indexOf(n,i);if(-1===c)return c;if(0===c||e.charCodeAt(c-1)<=32){const l=n.length;if(c+l===s||e.charCodeAt(c+l)<=32)return c}i=c+1}}function xi(e,n,i){let s=0;for(;s<i.length;){const c=i[s];if("number"==typeof c){if(0!==c)break;s++;const l=i[s++],p=i[s++],y=i[s++];e.setAttribute(n,p,y,l)}else{const l=c,p=i[++s];W(l)?e.setProperty(n,l,p):e.setAttribute(n,l,p),s++}}return s}function H(e){return 3===e||4===e||6===e}function W(e){return 64===e.charCodeAt(0)}function x(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let i=-1;for(let s=0;s<n.length;s++){const c=n[s];"number"==typeof c?i=c:0===i||Z(e,i,c,null,-1===i||2===i?n[++s]:null)}}return e}function Z(e,n,i,s,c){let l=0,p=e.length;if(-1===n)p=-1;else for(;l<e.length;){const y=e[l++];if("number"==typeof y){if(y===n){p=-1;break}if(y>n){p=l-1;break}}}for(;l<e.length;){const y=e[l];if("number"==typeof y)break;if(y===i){if(null===s)return void(null!==c&&(e[l+1]=c));if(s===e[l+1])return void(e[l+2]=c)}l++,null!==s&&l++,null!==c&&l++}-1!==p&&(e.splice(p,0,n),l=p+1),e.splice(l++,0,i),null!==s&&e.splice(l++,0,s),null!==c&&e.splice(l++,0,c)}const Ae="ng-template";function pn(e,n,i,s){let c=0;if(s){for(;c<n.length&&"string"==typeof n[c];c+=2)if("class"===n[c]&&-1!==Co(n[c+1].toLowerCase(),i,0))return!0}else if(Jn(e))return!1;if(c=n.indexOf(1,c),c>-1){let l;for(;++c<n.length&&"string"==typeof(l=n[c]);)if(l.toLowerCase()===i)return!0}return!1}function Jn(e){return 4===e.type&&e.value!==Ae}function ys(e,n,i){return n===(4!==e.type||i?e.value:Ae)}function Js(e,n,i){let s=4;const c=e.attrs,l=null!==c?function fa(e){for(let n=0;n<e.length;n++)if(H(e[n]))return n;return e.length}(c):0;let p=!1;for(let y=0;y<n.length;y++){const S=n[y];if("number"!=typeof S){if(!p)if(4&s){if(s=2|1&s,""!==S&&!ys(e,S,i)||""===S&&1===n.length){if(fi(s))return!1;p=!0}}else if(8&s){if(null===c||!pn(e,c,S,i)){if(fi(s))return!1;p=!0}}else{const U=n[++y],Q=Ts(S,c,Jn(e),i);if(-1===Q){if(fi(s))return!1;p=!0;continue}if(""!==U){let ue;if(ue=Q>l?"":c[Q+1].toLowerCase(),2&s&&U!==ue){if(fi(s))return!1;p=!0}}}}else{if(!p&&!fi(s)&&!fi(S))return!1;if(p&&fi(S))continue;p=!1,s=S|1&s}}return fi(s)||p}function fi(e){return!(1&e)}function Ts(e,n,i,s){if(null===n)return-1;let c=0;if(s||!i){let l=!1;for(;c<n.length;){const p=n[c];if(p===e)return c;if(3===p||6===p)l=!0;else{if(1===p||2===p){let y=n[++c];for(;"string"==typeof y;)y=n[++c];continue}if(4===p)break;if(0===p){c+=4;continue}}c+=l?1:2}return-1}return function Jr(e,n){let i=e.indexOf(4);if(i>-1)for(i++;i<e.length;){const s=e[i];if("number"==typeof s)return-1;if(s===n)return i;i++}return-1}(n,e)}function Ta(e,n,i=!1){for(let s=0;s<n.length;s++)if(Js(e,n[s],i))return!0;return!1}function pa(e,n){return e?":not("+n.trim()+")":n}function Va(e){let n=e[0],i=1,s=2,c="",l=!1;for(;i<e.length;){let p=e[i];if("string"==typeof p)if(2&s){const y=e[++i];c+="["+p+(y.length>0?'="'+y+'"':"")+"]"}else 8&s?c+="."+p:4&s&&(c+=" "+p);else""!==c&&!fi(p)&&(n+=pa(l,c),c=""),s=p,l=l||!fi(s);i++}return""!==c&&(n+=pa(l,c)),n}function Ua(e){return An(()=>{const n=ma(e),i={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===ar.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||ds.Emulated,styles:e.styles||yr,_:null,schemas:e.schemas||null,tView:null,id:""};vs(i);const s=e.dependencies;return i.directiveDefs=Ki(s,!1),i.pipeDefs=Ki(s,!0),i.id=function Tc(e){let n=0;const i=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const c of i)n=Math.imul(31,n)+c.charCodeAt(0)|0;return n+=2147483648,"c"+n}(i),i})}function ga(e){return lr(e)||Gr(e)}function $o(e){return null!==e}function wo(e){return An(()=>({type:e.type,bootstrap:e.bootstrap||yr,declarations:e.declarations||yr,imports:e.imports||yr,exports:e.exports||yr,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Aa(e,n){if(null==e)return wi;const i={};for(const s in e)if(e.hasOwnProperty(s)){const c=e[s];let l,p,y=_s.None;Array.isArray(c)?(y=c[0],l=c[1],p=c[2]??l):(l=c,p=c),n?(i[l]=y!==_s.None?[s,y]:s,n[l]=p):i[l]=s}return i}function ea(e){return An(()=>{const n=ma(e);return vs(n),n})}function To(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function lr(e){return e[Dr]||null}function Gr(e){return e[li]||null}function ni(e){return e[nr]||null}function Ri(e){const n=lr(e)||Gr(e)||ni(e);return null!==n&&n.standalone}function Oi(e,n){const i=e[Fr]||null;if(!i&&!0===n)throw new Error(`Type ${Jt(e)} does not have '\u0275mod' property.`);return i}function ma(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||wi,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||yr,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Aa(e.inputs,n),outputs:Aa(e.outputs),debugInfo:null}}function vs(e){e.features?.forEach(n=>n(e))}function Ki(e,n){if(!e)return null;const i=n?ni:ga;return()=>("function"==typeof e?e():e).map(s=>i(s)).filter($o)}function Do(e){return{\u0275providers:e}}function Ao(...e){return{\u0275providers:Y(0,e),\u0275fromNgModule:!0}}function Y(e,...n){const i=[],s=new Set;let c;const l=p=>{i.push(p)};return Mi(n,p=>{const y=p;D(y,l,[],s)&&(c||=[],c.push(y))}),void 0!==c&&C(c,l),i}function C(e,n){for(let i=0;i<e.length;i++){const{ngModule:s,providers:c}=e[i];K(c,l=>{n(l,s)})}}function D(e,n,i,s){if(!(e=Ve(e)))return!1;let c=null,l=an(e);const p=!l&&lr(e);if(l||p){if(p&&!p.standalone)return!1;c=e}else{const S=e.ngModule;if(l=an(S),!l)return!1;c=S}const y=s.has(c);if(p){if(y)return!1;if(s.add(c),p.dependencies){const S="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const U of S)D(U,n,i,s)}}else{if(!l)return!1;{if(null!=l.imports&&!y){let U;s.add(c);try{Mi(l.imports,Q=>{D(Q,n,i,s)&&(U||=[],U.push(Q))})}finally{}void 0!==U&&C(U,n)}if(!y){const U=ji(c)||(()=>new c);n({provide:c,useFactory:U,deps:yr},c),n({provide:Yr,useValue:c,multi:!0},c),n({provide:Us,useValue:()=>ei(c),multi:!0},c)}const S=l.providers;if(null!=S&&!y){const U=e;K(S,Q=>{n(Q,U)})}}}return c!==e&&void 0!==e.providers}function K(e,n){for(let i of e)Ir(i)&&(i=i.\u0275providers),Array.isArray(i)?K(i,n):n(i)}const he=Un({provide:String,useValue:Un});function Pe(e){return null!==e&&"object"==typeof e&&he in e}function Ct(e){return"function"==typeof e}const hn=new Xe(""),hr={},zn={};let Fn;function Hn(){return void 0===Fn&&(Fn=new co),Fn}class Tr{}class oi extends Tr{get destroyed(){return this._destroyed}constructor(n,i,s,c){super(),this.parent=i,this.source=s,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,uo(n,p=>this.processProvider(p)),this.records.set(ha,rs(void 0,this)),c.has("environment")&&this.records.set(Tr,rs(void 0,this));const l=this.records.get(hn);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(Yr,yr,rr.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=fe(null);try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const i=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of i)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),fe(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=hi(this),s=wr(void 0);try{return n()}finally{hi(i),wr(s)}}get(n,i=Rs,s=rr.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Ei))return n[Ei](this);s=si(s);const l=hi(this),p=wr(void 0);try{if(!(s&rr.SkipSelf)){let S=this.records.get(n);if(void 0===S){const U=function Ho(e){return"function"==typeof e||"object"==typeof e&&e instanceof Xe}(n)&&ti(n);S=U&&this.injectableDefInScope(U)?rs(Pn(n),hr):null,this.records.set(n,S)}if(null!=S)return this.hydrate(n,S)}return(s&rr.Self?Hn():this.parent).get(n,i=s&rr.Optional&&i===Rs?null:i)}catch(y){if("NullInjectorError"===y.name){if((y[Ui]=y[Ui]||[]).unshift(Jt(n)),l)throw y;return function Xs(e,n,i,s){const c=e[Ui];throw n[Qs]&&c.unshift(n[Qs]),e.message=function Pi(e,n,i,s=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let c=Jt(n);if(Array.isArray(n))c=n.map(Jt).join(" -> ");else if("object"==typeof n){let l=[];for(let p in n)if(n.hasOwnProperty(p)){let y=n[p];l.push(p+":"+("string"==typeof y?JSON.stringify(y):Jt(y)))}c=`{${l.join(", ")}}`}return`${i}${s?"("+s+")":""}[${c}]: ${e.replace(Cr,"\n  ")}`}("\n"+e.message,c,i,s),e.ngTokenPath=c,e[Ui]=null,e}(y,n,"R3InjectorError",this.source)}throw y}finally{wr(p),hi(l)}}resolveInjectorInitializers(){const n=fe(null),i=hi(this),s=wr(void 0);try{const l=this.get(Us,yr,rr.Self);for(const p of l)p()}finally{hi(i),wr(s),fe(n)}}toString(){const n=[],i=this.records;for(const s of i.keys())n.push(Jt(s));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _t(205,!1)}processProvider(n){let i=Ct(n=Ve(n))?n:Ve(n&&n.provide);const s=function ki(e){return Pe(e)?rs(void 0,e.useValue):rs(bo(e),hr)}(n);if(!Ct(n)&&!0===n.multi){let c=this.records.get(i);c||(c=rs(void 0,hr,!0),c.factory=()=>ps(c.multi),this.records.set(i,c)),i=n,c.multi.push(n)}this.records.set(i,s)}hydrate(n,i){const s=fe(null);try{return i.value===hr&&(i.value=zn,i.value=i.factory()),"object"==typeof i.value&&i.value&&function cs(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{fe(s)}}injectableDefInScope(n){if(!n.providedIn)return!1;const i=Ve(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function Pn(e){const n=ti(e),i=null!==n?n.factory:ji(e);if(null!==i)return i;if(e instanceof Xe)throw new _t(204,!1);if(e instanceof Function)return function Es(e){if(e.length>0)throw new _t(204,!1);const i=function kt(e){return e&&(e[te]||e[Ee])||null}(e);return null!==i?()=>i.factory(e):()=>new e}(e);throw new _t(204,!1)}function bo(e,n,i){let s;if(Ct(e)){const c=Ve(e);return ji(c)||Pn(c)}if(Pe(e))s=()=>Ve(e.useValue);else if(function Et(e){return!(!e||!e.useFactory)}(e))s=()=>e.useFactory(...ps(e.deps||[]));else if(function Le(e){return!(!e||!e.useExisting)}(e))s=()=>ei(Ve(e.useExisting));else{const c=Ve(e&&(e.useClass||e.provide));if(!function as(e){return!!e.deps}(e))return ji(c)||Pn(c);s=()=>new c(...ps(e.deps))}return s}function rs(e,n,i=!1){return{factory:e,value:n,multi:i?[]:void 0}}function uo(e,n){for(const i of e)Array.isArray(i)?uo(i,n):i&&Ir(i)?uo(i.\u0275providers,n):n(i)}function eo(e,n){e instanceof oi&&e.assertNotDestroyed();const s=hi(e),c=wr(void 0);try{return n()}finally{hi(s),wr(c)}}function qi(){return void 0!==xs()||null!=function Uo(){return Xr}()}const pr=0,Yt=1,vn=2,_r=3,Ti=4,pi=5,is=6,Bs=7,gi=8,zr=9,lo=10,Zn=11,Go=12,El=13,ai=14,jn=15,Dc=16,tc=17,zo=18,_a=19,Il=20,ta=21,nc=22,Is=23,Qn=25,rc=1,So=7,Sa=9,Di=10;var Su=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Su||{});function Ds(e){return Array.isArray(e)&&"object"==typeof e[rc]}function As(e){return Array.isArray(e)&&!0===e[rc]}function Kc(e){return!!(4&e.flags)}function na(e){return e.componentOffset>-1}function qc(e){return!(1&~e.flags)}function to(e){return!!e.template}function Ba(e){return!!(512&e[vn])}class ee{constructor(n,i,s){this.previousValue=n,this.currentValue=i,this.firstChange=s}isFirstChange(){return this.firstChange}}function Te(e,n,i,s){null!==n?n.applyValueToInputSignal(n,s):e[i]=s}function Dt(){return pt}function pt(e){return e.type.prototype.ngOnChanges&&(e.setInput=er),_n}function _n(){const e=Fi(this),n=e?.current;if(n){const i=e.previous;if(i===wi)e.previous=n;else for(let s in n)i[s]=n[s];e.current=null,this.ngOnChanges(n)}}function er(e,n,i,s,c){const l=this.declaredInputs[s],p=Fi(e)||function Ac(e,n){return e[dr]=n}(e,{previous:wi,current:null}),y=p.current||(p.current={}),S=p.previous,U=S[l];y[l]=new ee(U&&U.currentValue,i,S===wi),Te(e,n,c,i)}Dt.ngInherit=!0;const dr="__ngSimpleChanges__";function Fi(e){return e[dr]||null}const js=function(e,n,i){};let ku=!1;function Mr(e){for(;Array.isArray(e);)e=e[pr];return e}function Jc(e,n){return Mr(n[e])}function $s(e,n){return Mr(n[e.index])}function sc(e,n){return e.data[n]}function oc(e,n){return e[n]}function Ko(e,n){const i=n[e];return Ds(i)?i:i[pr]}function Zc(e){return!(128&~e[vn])}function no(e,n){return null==n?null:e[n]}function tf(e){e[tc]=0}function Ga(e){1024&e[vn]||(e[vn]|=1024,Zc(e)&&Fu(e))}function bl(e){return!!(9216&e[vn]||e[Is]?.dirty)}function bc(e){e[lo].changeDetectionScheduler?.notify(1),bl(e)?Fu(e):64&e[vn]&&(function $a(){return ku}()?(e[vn]|=1024,Fu(e)):e[lo].changeDetectionScheduler?.notify())}function Fu(e){e[lo].changeDetectionScheduler?.notify();let n=fo(e);for(;null!==n&&!(8192&n[vn])&&(n[vn]|=8192,Zc(n));)n=fo(n)}function Sl(e,n){if(!(256&~e[vn]))throw new _t(911,!1);null===e[ta]&&(e[ta]=[]),e[ta].push(n)}function fo(e){const n=e[_r];return As(n)?n[_r]:n}const Wn={lFrame:cf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Pl(){return Wn.bindingsEnabled}function Ft(){return Wn.lFrame.lView}function Rr(){return Wn.lFrame.tView}function Ol(e){return Wn.lFrame.contextLView=e,e[gi]}function Vu(e){return Wn.lFrame.contextLView=null,e}function Lr(){let e=Sc();for(;null!==e&&64===e.type;)e=e.parent;return e}function Sc(){return Wn.lFrame.currentTNode}function va(e,n){const i=Wn.lFrame;i.currentTNode=e,i.isParent=n}function Lu(){return Wn.lFrame.isParent}function Ns(){const e=Wn.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function sa(){return Wn.lFrame.bindingIndex++}function Pd(e,n){const i=Wn.lFrame;i.bindingIndex=i.bindingRootIndex=e,Rc(n)}function Rc(e){Wn.lFrame.currentDirectiveIndex=e}function Nl(){return Wn.lFrame.currentQueryIndex}function xl(e){Wn.lFrame.currentQueryIndex=e}function sf(e){const n=e[Yt];return 2===n.type?n.declTNode:1===n.type?e[pi]:null}function af(e,n,i){if(i&rr.SkipSelf){let c=n,l=e;for(;!(c=c.parent,null!==c||i&rr.Host||(c=sf(l),null===c||(l=l[ai],10&c.type))););if(null===c)return!1;n=c,e=l}const s=Wn.lFrame=Rd();return s.currentTNode=n,s.lView=e,!0}function tu(e){const n=Rd(),i=e[Yt];Wn.lFrame=n,n.currentTNode=i.firstChild,n.lView=e,n.tView=i,n.contextLView=e,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function Rd(){const e=Wn.lFrame,n=null===e?null:e.child;return null===n?cf(e):n}function cf(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Uu(){const e=Wn.lFrame;return Wn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const uf=Uu;function kl(){const e=Uu();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Cs(){return Wn.lFrame.selectedIndex}function cc(e){Wn.lFrame.selectedIndex=e}function Ai(){const e=Wn.lFrame;return sc(e.tView,e.selectedIndex)}let nu=!0;function Qi(){return nu}function Pa(e){nu=e}function Fl(e,n){for(let i=n.directiveStart,s=n.directiveEnd;i<s;i++){const l=e.data[i].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:y,ngAfterViewInit:S,ngAfterViewChecked:U,ngOnDestroy:Q}=l;p&&(e.contentHooks??=[]).push(-i,p),y&&((e.contentHooks??=[]).push(i,y),(e.contentCheckHooks??=[]).push(i,y)),S&&(e.viewHooks??=[]).push(-i,S),U&&((e.viewHooks??=[]).push(i,U),(e.viewCheckHooks??=[]).push(i,U)),null!=Q&&(e.destroyHooks??=[]).push(i,Q)}}function Bu(e,n,i){$u(e,n,3,i)}function Nc(e,n,i,s){(3&e[vn])===i&&$u(e,n,i,s)}function ju(e,n){let i=e[vn];(3&i)===n&&(i&=16383,i+=1,e[vn]=i)}function $u(e,n,i,s){const l=s??-1,p=n.length-1;let y=0;for(let S=void 0!==s?65535&e[tc]:0;S<p;S++)if("number"==typeof n[S+1]){if(y=n[S],null!=s&&y>=s)break}else n[S]<0&&(e[tc]+=65536),(y<l||-1==l)&&(Nd(e,i,n,S),e[tc]=(4294901760&e[tc])+S+2),S++}function Vl(e,n){js(4,e,n);const i=fe(null);try{n.call(e)}finally{fe(i),js(5,e,n)}}function Nd(e,n,i,s){const c=i[s]<0,l=i[s+1],y=e[c?-i[s]:i[s]];c?e[vn]>>14<e[tc]>>16&&(3&e[vn])===n&&(e[vn]+=16384,Vl(y,l)):Vl(y,l)}const uc=-1;class Ma{constructor(n,i,s){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=s}}function Bl(e){return e!==uc}function ru(e){return 32767&e}function xc(e,n){let i=function Zp(e){return e>>16}(e),s=n;for(;i>0;)s=s[ai],i--;return s}let I=!0;function h(e){const n=I;return I=e,n}const A=255,z=5;let oe=0;const Be={};function Gt(e,n){const i=$n(e,n);if(-1!==i)return i;const s=n[Yt];s.firstCreatePass&&(e.injectorIndex=n.length,Tn(s.data,e),Tn(n,null),Tn(s.blueprint,null));const c=Ar(e,n),l=e.injectorIndex;if(Bl(c)){const p=ru(c),y=xc(c,n),S=y[Yt].data;for(let U=0;U<8;U++)n[l+U]=y[p+U]|S[p+U]}return n[l+8]=c,l}function Tn(e,n){e.push(0,0,0,0,0,0,0,0,n)}function $n(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Ar(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let i=0,s=null,c=n;for(;null!==c;){if(s=w_(c),null===s)return uc;if(i++,c=c[ai],-1!==s.injectorIndex)return s.injectorIndex|i<<16}return uc}function io(e,n,i){!function bt(e,n,i){let s;"string"==typeof i?s=i.charCodeAt(0)||0:i.hasOwnProperty(vi)&&(s=i[vi]),null==s&&(s=i[vi]=oe++);const c=s&A;n.data[e+(c>>z)]|=1<<c}(e,n,i)}function Hu(e,n,i){if(i&rr.Optional||void 0!==e)return e;yo()}function Gu(e,n,i,s){if(i&rr.Optional&&void 0===s&&(s=null),!(i&(rr.Self|rr.Host))){const c=e[zr],l=wr(void 0);try{return c?c.get(n,s,i&rr.Optional):Lo(n,s,i&rr.Optional)}finally{wr(l)}}return Hu(s,0,i)}function zu(e,n,i,s=rr.Default,c){if(null!==e){if(2048&n[vn]&&!(s&rr.Self)){const p=function Jv(e,n,i,s,c){let l=e,p=n;for(;null!==l&&null!==p&&2048&p[vn]&&!(512&p[vn]);){const y=jl(l,p,i,s|rr.Self,Be);if(y!==Be)return y;let S=l.parent;if(!S){const U=p[Il];if(U){const Q=U.get(i,Be,s);if(Q!==Be)return Q}S=w_(p),p=p[ai]}l=S}return c}(e,n,i,s,Be);if(p!==Be)return p}const l=jl(e,n,i,s,Be);if(l!==Be)return l}return Gu(n,i,s,c)}function jl(e,n,i,s,c){const l=function Wu(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(vi)?e[vi]:void 0;return"number"==typeof n?n>=0?n&A:C_:n}(i);if("function"==typeof l){if(!af(n,e,s))return s&rr.Host?Hu(c,0,s):Gu(n,i,s,c);try{let p;if(p=l(s),null!=p||s&rr.Optional)return p;yo()}finally{uf()}}else if("number"==typeof l){let p=null,y=$n(e,n),S=uc,U=s&rr.Host?n[jn][pi]:null;for((-1===y||s&rr.SkipSelf)&&(S=-1===y?Ar(e,n):n[y+8],S!==uc&&Ku(s,!1)?(p=n[Yt],y=ru(S),n=xc(S,n)):y=-1);-1!==y;){const Q=n[Yt];if(iu(l,y,Q.data)){const ue=$l(y,n,i,p,s,U);if(ue!==Be)return ue}S=n[y+8],S!==uc&&Ku(s,n[Yt].data[y+8]===U)&&iu(l,y,n)?(p=Q,y=ru(S),n=xc(S,n)):y=-1}}return c}function $l(e,n,i,s,c,l){const p=n[Yt],y=p.data[e+8],Q=Ka(y,p,i,null==s?na(y)&&I:s!=p&&!!(3&y.type),c&rr.Host&&l===y);return null!==Q?oa(n,p,Q,y):Be}function Ka(e,n,i,s,c){const l=e.providerIndexes,p=n.data,y=1048575&l,S=e.directiveStart,Q=l>>20,Fe=c?y+Q:e.directiveEnd;for(let Ke=s?y:y+Q;Ke<Fe;Ke++){const mt=p[Ke];if(Ke<S&&i===mt||Ke>=S&&mt.type===i)return Ke}if(c){const Ke=p[S];if(Ke&&to(Ke)&&Ke.type===i)return S}return null}function oa(e,n,i,s){let c=e[i];const l=n.data;if(function Ll(e){return e instanceof Ma}(c)){const p=c;p.resolving&&function oo(e,n){throw n&&n.join(" > "),new _t(-200,e)}(function ur(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():On(e)}(l[i]));const y=h(p.canSeeViewProviders);p.resolving=!0;const U=p.injectImpl?wr(p.injectImpl):null;af(e,s,rr.Default);try{c=e[i]=p.factory(void 0,l,e,s),n.firstCreatePass&&i>=s.directiveStart&&function Od(e,n,i){const{ngOnChanges:s,ngOnInit:c,ngDoCheck:l}=n.type.prototype;if(s){const p=pt(n);(i.preOrderHooks??=[]).push(e,p),(i.preOrderCheckHooks??=[]).push(e,p)}c&&(i.preOrderHooks??=[]).push(0-e,c),l&&((i.preOrderHooks??=[]).push(e,l),(i.preOrderCheckHooks??=[]).push(e,l))}(i,l[i],n)}finally{null!==U&&wr(U),h(y),p.resolving=!1,uf()}}return c}function iu(e,n,i){return!!(i[n+(e>>z)]&1<<e)}function Ku(e,n){return!(e&rr.Self||e&rr.Host&&n)}class Ss{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,s){return zu(this._tNode,this._lView,n,si(s),i)}}function C_(){return new Ss(Lr(),Ft())}function Fd(e){return An(()=>{const n=e.prototype.constructor,i=n[di]||Vd(n),s=Object.prototype;let c=Object.getPrototypeOf(e.prototype).constructor;for(;c&&c!==s;){const l=c[di]||Vd(c);if(l&&l!==i)return l;c=Object.getPrototypeOf(c)}return l=>new l})}function Vd(e){return Ce(e)?()=>{const n=Vd(Ve(e));return n&&n()}:ji(e)}function w_(e){const n=e[Yt],i=n.type;return 2===i?n.declTNode:1===i?e[pi]:null}function Gs(e){return function Ra(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const i=e.attrs;if(i){const s=i.length;let c=0;for(;c<s;){const l=i[c];if(H(l))break;if(0===l)c+=2;else if("number"==typeof l)for(c++;c<s&&"string"==typeof i[c];)c++;else{if(l===n)return i[c+1];c+=2}}}return null}(Lr(),e)}function ff(e,n=null,i=null,s){const c=Bd(e,n,i,s);return c.resolveInjectorInitializers(),c}function Bd(e,n=null,i=null,s,c=new Set){const l=[i||yr,Ao(e)];return s=s||("object"==typeof e?void 0:Jt(e)),new oi(l,n||Hn(),s||null,c)}let so=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Rs;static#t=this.NULL=new co;static create(i,s){if(Array.isArray(i))return ff({name:""},s,i,"");{const c=i.name??"";return ff({name:c},i.parent,i.providers,c)}}static#n=this.\u0275prov=or({token:e,providedIn:"any",factory:()=>ei(ha)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function jd(e){return e.ngOriginalError}class Po{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&jd(n);for(;i&&jd(i);)i=jd(i);return i||null}}const rg=new Xe("",{providedIn:"root",factory:()=>dn(Po).handleError.bind(void 0)});let Gl=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=rE;static#t=this.__NG_ENV_ID__=i=>i}return e})();class ig extends Gl{constructor(n){super(),this._lView=n}onDestroy(n){return Sl(this._lView,n),()=>function za(e,n){if(null===e[ta])return;const i=e[ta].indexOf(n);-1!==i&&e[ta].splice(i,1)}(this._lView,n)}}function rE(){return new ig(Ft())}function og(){return qu(Lr(),Ft())}function qu(e,n){return new hc($s(e,n))}let hc=(()=>{class e{constructor(i){this.nativeElement=i}static#e=this.__NG_ELEMENT_ID__=og}return e})();function gf(e){return e instanceof hc?e.nativeElement:e}function ag(e){return n=>{setTimeout(e,void 0,n)}}const Qa=class iE extends Ln.B{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,qi()&&(this.destroyRef=dn(Gl,{optional:!0})??void 0)}emit(n){const i=fe(null);try{super.next(n)}finally{fe(i)}}subscribe(n,i,s){let c=n,l=i||(()=>null),p=s;if(n&&"object"==typeof n){const S=n;c=S.next?.bind(S),l=S.error?.bind(S),p=S.complete?.bind(S)}this.__isAsync&&(l=ag(l),c&&(c=ag(c)),p&&(p=ag(p)));const y=super.subscribe({next:c,error:l,complete:p});return n instanceof st.yU&&n.add(y),y}};function R_(){return this._results[Symbol.iterator]()}class cg{static#e=Symbol.iterator;get changes(){return this._changes??=new Qa}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const i=cg.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=R_)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){this.dirty=!1;const s=function ns(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Bo(e,n,i){if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++){let c=e[s],l=n[s];if(i&&(c=i(c),l=i(l)),l!==c)return!1}return!0}(this._results,s,i))&&(this._results=s,this.length=s.length,this.last=s[this.length-1],this.first=s[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function zl(e){return!(128&~e.flags)}const $d=new Map;let N_=0;const vf="__ngContext__";function Ps(e,n){Ds(n)?(e[vf]=n[_a],function lg(e){$d.set(e[_a],e)}(n)):e[vf]=n}function V_(e){return L_(e[Go])}function _g(e){return L_(e[Ti])}function L_(e){for(;null!==e&&!As(e);)e=e[Ti];return e}let Dg;function Ag(e){Dg=e}const wf=new Xe("",{providedIn:"root",factory:()=>H_}),H_="ng",Tf=new Xe(""),Df=new Xe("",{providedIn:"platform",factory:()=>"unknown"}),bg=new Xe(""),dE=new Xe("",{providedIn:"root",factory:()=>function cu(){if(void 0!==Dg)return Dg;if(typeof document<"u")return document;throw new _t(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let z_=()=>null;function Xd(e,n,i=!1){return z_(e,n,i)}const X_=new Xe("",{providedIn:"root",factory:()=>!1});let Ql;function $g(e){return function eh(){if(void 0===Ql&&(Ql=null,Nn.trustedTypes))try{Ql=Nn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ql}()?.createScriptURL(e)||e}class tl{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${St})`}}function fu(e){return e instanceof tl?e.changingThisBreaksApplicationSecurity:e}function nh(e,n){const i=function _E(e){return e instanceof tl&&e.getTypeName()||null}(e);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${St})`)}return i===n}const wE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var il=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(il||{});function Nf(e){const n=Fc();return n?n.sanitize(il.URL,e)||"":nh(e,"URL")?fu(e):function Pf(e){return(e=String(e)).match(wE)?e:"unsafe:"+e}(On(e))}function oy(e){const n=Fc();if(n)return $g(n.sanitize(il.RESOURCE_URL,e)||"");if(nh(e,"ResourceURL"))return $g(fu(e));throw new _t(904,!1)}function ay(e,n,i){return function J0(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?oy:Nf}(n,i)(e)}function Fc(){const e=Ft();return e&&e[lo].sanitizer}function Ea(e){return e instanceof Function?e():e}var Xa=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Xa||{});let ol;function nm(e,n){return ol(e,n)}function oh(e,n,i,s,c){if(null!=s){let l,p=!1;As(s)?l=s:Ds(s)&&(p=!0,s=s[pr]);const y=Mr(s);0===e&&null!==i?null==c?_y(n,i,y):_c(n,i,y,c||null,!0):1===e&&null!==i?_c(n,i,y,c||null,!0):2===e?function hh(e,n,i){const s=im(e,n);s&&function nC(e,n,i,s){e.removeChild(n,i,s)}(e,s,n,i)}(n,y,p):3===e&&n.destroyNode(y),null!=l&&function zE(e,n,i,s,c){const l=i[So];l!==Mr(i)&&oh(n,e,s,l,c);for(let y=Di;y<i.length;y++){const S=i[y];Wf(S[Yt],S,e,n,s,l)}}(n,e,l,i,c)}}function al(e,n,i){return e.createElement(n,i)}function ah(e,n){n[lo].changeDetectionScheduler?.notify(1),Wf(e,n,n[Zn],2,null,null)}function py(e,n){const i=e[Sa],s=i.indexOf(n);i.splice(s,1)}function ch(e,n){if(e.length<=Di)return;const i=Di+n,s=e[i];if(s){const c=s[Dc];null!==c&&c!==e&&py(c,s),n>0&&(e[i-1][Ti]=s[Ti]);const l=ao(e,Di+n);!function BE(e,n){ah(e,n),n[pr]=null,n[pi]=null}(s[Yt],s);const p=l[zo];null!==p&&p.detachView(l[Yt]),s[_r]=null,s[Ti]=null,s[vn]&=-129}return s}function uh(e,n){if(!(256&n[vn])){const i=n[Zn];i.destroyNode&&Wf(e,n,i,3,null,null),function $E(e){let n=e[Go];if(!n)return Hf(e[Yt],e);for(;n;){let i=null;if(Ds(n))i=n[Go];else{const s=n[Di];s&&(i=s)}if(!i){for(;n&&!n[Ti]&&n!==e;)Ds(n)&&Hf(n[Yt],n),n=n[_r];null===n&&(n=e),Ds(n)&&Hf(n[Yt],n),i=n&&n[Ti]}n=i}}(n)}}function Hf(e,n){if(256&n[vn])return;const i=fe(null);try{n[vn]&=-129,n[vn]|=256,n[Is]&&function ae(e){if(Ue(e),je(e))for(let n=0;n<e.producerNode.length;n++)ie(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}(n[Is]),function my(e,n){let i;if(null!=e&&null!=(i=e.destroyHooks))for(let s=0;s<i.length;s+=2){const c=n[i[s]];if(!(c instanceof Ma)){const l=i[s+1];if(Array.isArray(l))for(let p=0;p<l.length;p+=2){const y=c[l[p]],S=l[p+1];js(4,y,S);try{S.call(y)}finally{js(5,y,S)}}else{js(4,c,l);try{l.call(c)}finally{js(5,c,l)}}}}}(e,n),function gy(e,n){const i=e.cleanup,s=n[Bs];if(null!==i)for(let l=0;l<i.length-1;l+=2)if("string"==typeof i[l]){const p=i[l+3];p>=0?s[p]():s[-p].unsubscribe(),l+=2}else i[l].call(s[i[l+1]]);null!==s&&(n[Bs]=null);const c=n[ta];if(null!==c){n[ta]=null;for(let l=0;l<c.length;l++)(0,c[l])()}}(e,n),1===n[Yt].type&&n[Zn].destroy();const s=n[Dc];if(null!==s&&As(n[_r])){s!==n[_r]&&py(s,n);const c=n[zo];null!==c&&c.detachView(e)}!function Wl(e){$d.delete(e[_a])}(n)}finally{fe(i)}}function Gf(e,n,i){return function zf(e,n,i){let s=n;for(;null!==s&&40&s.type;)s=(n=s).parent;if(null===s)return i[pr];{const{componentOffset:c}=s;if(c>-1){const{encapsulation:l}=e.data[s.directiveStart+c];if(l===ds.None||l===ds.Emulated)return null}return $s(s,i)}}(e,n.parent,i)}function _c(e,n,i,s,c){e.insertBefore(n,i,s,c)}function _y(e,n,i){e.appendChild(n,i)}function GE(e,n,i,s,c){null!==s?_c(e,n,i,s,c):_y(e,n,i)}function im(e,n){return e.parentNode(n)}let vc,ed=function yc(e,n,i){return 40&e.type?$s(e,i):null};function lh(e,n,i,s){const c=Gf(e,s,n),l=n[Zn],y=function gu(e,n,i){return ed(e,n,i)}(s.parent||n[pi],s,n);if(null!=c)if(Array.isArray(i))for(let S=0;S<i.length;S++)GE(l,c,i[S],y,!1);else GE(l,c,i,y,!1);void 0!==vc&&vc(l,s,n,i,c)}function dh(e,n){if(null!==n){const i=n.type;if(3&i)return $s(n,e);if(4&i)return sm(-1,e[n.index]);if(8&i){const s=n.child;if(null!==s)return dh(e,s);{const c=e[n.index];return As(c)?sm(-1,c):Mr(c)}}if(32&i)return nm(n,e)()||Mr(e[n.index]);{const s=Uc(e,n);return null!==s?Array.isArray(s)?s[0]:dh(fo(e[jn]),s):dh(e,n.next)}}return null}function Uc(e,n){return null!==n?e[jn][pi].projection[n.projection]:null}function sm(e,n){const i=Di+e+1;if(i<n.length){const s=n[i],c=s[Yt].firstChild;if(null!==c)return dh(s,c)}return n[So]}function om(e,n,i,s,c,l,p){for(;null!=i;){const y=s[i.index],S=i.type;if(p&&0===n&&(y&&Ps(Mr(y),s),i.flags|=2),32&~i.flags)if(8&S)om(e,n,i.child,s,c,l,!1),oh(n,e,c,y,l);else if(32&S){const U=nm(i,s);let Q;for(;Q=U();)oh(n,e,c,Q,l);oh(n,e,c,y,l)}else 16&S?am(e,n,s,i,c,l):oh(n,e,c,y,l);i=p?i.projectionNext:i.next}}function Wf(e,n,i,s,c,l){om(i,s,e.firstChild,n,c,l,!1)}function am(e,n,i,s,c,l){const p=i[jn],S=p[pi].projection[s.projection];if(Array.isArray(S))for(let U=0;U<S.length;U++)oh(n,e,c,S[U],l);else{let U=S;const Q=p[_r];zl(s)&&(U.flags|=128),om(e,n,U,Q,c,l,!0)}}function Cy(e,n,i){""===i?e.removeAttribute(n,"class"):e.setAttribute(n,"class",i)}function cl(e,n,i){const{mergedAttrs:s,classes:c,styles:l}=i;null!==s&&xi(e,n,s),null!==c&&Cy(e,n,c),null!==l&&function Iy(e,n,i){e.setAttribute(n,"style",i)}(e,n,l)}const vr={};function KE(e=1){wy(Rr(),Ft(),Cs()+e,!1)}function wy(e,n,i,s){if(!s)if(3&~n[vn]){const l=e.preOrderHooks;null!==l&&Nc(n,l,0,i)}else{const l=e.preOrderCheckHooks;null!==l&&Bu(n,l,i)}cc(i)}function td(e,n=rr.Default){const i=Ft();return null===i?ei(e,n):zu(Lr(),i,Ve(e),n)}function Ty(){throw new Error("invalid")}function Dy(e,n,i,s,c,l){const p=fe(null);try{let y=null;c&_s.SignalBased&&(y=n[s][Se]),null!==y&&void 0!==y.transformFn&&(l=y.transformFn(l)),c&_s.HasDecoratorInputTransform&&(l=e.inputTransforms[s].call(n,l)),null!==e.setInput?e.setInput(n,y,l,i,s):Te(n,y,s,l)}finally{fe(p)}}function cm(e,n,i,s,c,l,p,y,S,U,Q){const ue=n.blueprint.slice();return ue[pr]=c,ue[vn]=204|s,(null!==U||e&&2048&e[vn])&&(ue[vn]|=2048),tf(ue),ue[_r]=ue[ai]=e,ue[gi]=i,ue[lo]=p||e&&e[lo],ue[Zn]=y||e&&e[Zn],ue[zr]=S||e&&e[zr]||null,ue[pi]=l,ue[_a]=function ug(){return N_++}(),ue[is]=Q,ue[Il]=U,ue[jn]=2==n.type?e[jn]:ue,ue}function fh(e,n,i,s,c){let l=e.data[n];if(null===l)l=function Ay(e,n,i,s,c){const l=Sc(),p=Lu(),S=e.data[n]=function eI(e,n,i,s,c,l){let p=n?n.injectorIndex:-1,y=0;return function Wa(){return null!==Wn.skipHydrationRootTNode}()&&(y|=128),{type:i,index:s,insertBeforeIndex:null,injectorIndex:p,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:y,providerIndexes:0,value:c,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?l:l&&l.parent,i,n,s,c);return null===e.firstChild&&(e.firstChild=S),null!==l&&(p?null==l.child&&null!==S.parent&&(l.child=S):null===l.next&&(l.next=S,S.prev=l)),S}(e,n,i,s,c),function qp(){return Wn.lFrame.inI18n}()&&(l.flags|=32);else if(64&l.type){l.type=i,l.value=s,l.attrs=c;const p=function ia(){const e=Wn.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();l.injectorIndex=null===p?-1:p.injectorIndex}return va(l,!0),l}function Kf(e,n,i,s){if(0===i)return-1;const c=n.length;for(let l=0;l<i;l++)n.push(s),e.blueprint.push(s),e.data.push(null);return c}function by(e,n,i,s,c){const l=Cs(),p=2&s;try{cc(-1),p&&n.length>Qn&&wy(e,n,Qn,!1),js(p?2:0,c),i(s,c)}finally{cc(l),js(p?3:1,c)}}function um(e,n,i){if(Kc(n)){const s=fe(null);try{const l=n.directiveEnd;for(let p=n.directiveStart;p<l;p++){const y=e.data[p];y.contentQueries&&y.contentQueries(1,i[p],p)}}finally{fe(s)}}}function lm(e,n,i){Pl()&&(function uC(e,n,i,s){const c=i.directiveStart,l=i.directiveEnd;na(i)&&function ph(e,n,i){const s=$s(n,e),c=Py(i);let p=16;i.signals?p=4096:i.onPush&&(p=64);const y=mh(e,cm(e,c,null,p,s,n,null,e[lo].rendererFactory.createRenderer(s,i),null,null,null));e[n.index]=y}(n,i,e.data[c+i.componentOffset]),e.firstCreatePass||Gt(i,n),Ps(s,n);const p=i.initialInputs;for(let y=c;y<l;y++){const S=e.data[y],U=oa(n,e,y,i);Ps(U,n),null!==p&&sI(0,y-c,U,S,0,p),to(S)&&(Ko(i.index,n)[gi]=oa(n,e,y,i))}}(e,n,i,$s(i,n)),!(64&~i.flags)&&rI(e,n,i))}function Sy(e,n,i=$s){const s=n.localNames;if(null!==s){let c=n.index+1;for(let l=0;l<s.length;l+=2){const p=s[l+1],y=-1===p?i(n,e):e[p];e[c++]=y}}}function Py(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=qf(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function qf(e,n,i,s,c,l,p,y,S,U,Q){const ue=Qn+s,Fe=ue+c,Ke=function mu(e,n){const i=[];for(let s=0;s<n;s++)i.push(s<e?null:vr);return i}(ue,Fe),mt="function"==typeof U?U():U;return Ke[Yt]={type:e,blueprint:Ke,template:i,queries:null,viewQuery:y,declTNode:n,data:Ke.slice().fill(null,ue),bindingStartIndex:ue,expandoStartIndex:Fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:S,consts:mt,incompleteFirstPass:!1,ssrId:Q}}let My=()=>null;function tI(e,n,i,s,c){for(let l in n){if(!n.hasOwnProperty(l))continue;const p=n[l];if(void 0===p)continue;s??={};let y,S=_s.None;Array.isArray(p)?(y=p[0],S=p[1]):y=p;let U=l;if(null!==c){if(!c.hasOwnProperty(l))continue;U=c[l]}0===e?nI(s,i,U,y,S):nI(s,i,U,y)}return s}function nI(e,n,i,s,c){let l;e.hasOwnProperty(i)?(l=e[i]).push(n,s):l=e[i]=[n,s],void 0!==c&&l.push(c)}function ca(e,n,i,s,c,l,p,y){const S=$s(n,i);let Q,U=n.inputs;!y&&null!=U&&(Q=U[s])?(ul(e,i,Q,s,c),na(n)&&function oC(e,n){const i=Ko(n,e);16&i[vn]||(i[vn]|=64)}(i,n.index)):3&n.type&&(s=function Ry(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(s),c=null!=p?p(c,n.value||"",s):c,l.setProperty(S,s,c))}function Oy(e,n,i,s){if(Pl()){const c=null===s?null:{"":-1},l=function Qf(e,n){const i=e.directiveRegistry;let s=null,c=null;if(i)for(let l=0;l<i.length;l++){const p=i[l];if(Ta(n,p.selectors,!1))if(s||(s=[]),to(p))if(null!==p.findHostDirectiveDefs){const y=[];c=c||new Map,p.findHostDirectiveDefs(p,y,c),s.unshift(...y,p),fm(e,n,y.length)}else s.unshift(p),fm(e,n,0);else c=c||new Map,p.findHostDirectiveDefs?.(p,s,c),s.push(p)}return null===s?null:[s,c]}(e,i);let p,y;null===l?p=y=null:[p,y]=l,null!==p&&dm(e,n,i,p,c,y),c&&function iI(e,n,i){if(n){const s=e.localNames=[];for(let c=0;c<n.length;c+=2){const l=i[n[c+1]];if(null==l)throw new _t(-301,!1);s.push(n[c],l)}}}(i,s,c)}i.mergedAttrs=x(i.mergedAttrs,i.attrs)}function dm(e,n,i,s,c,l){for(let U=0;U<s.length;U++)io(Gt(i,n),e,s[U].type);!function xy(e,n,i){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+i,e.providerIndexes=n}(i,e.data.length,s.length);for(let U=0;U<s.length;U++){const Q=s[U];Q.providersResolver&&Q.providersResolver(Q)}let p=!1,y=!1,S=Kf(e,n,s.length,null);for(let U=0;U<s.length;U++){const Q=s[U];i.mergedAttrs=x(i.mergedAttrs,Q.hostAttrs),ky(e,i,n,S,Q),pm(S,Q,c),null!==Q.contentQueries&&(i.flags|=4),(null!==Q.hostBindings||null!==Q.hostAttrs||0!==Q.hostVars)&&(i.flags|=64);const ue=Q.type.prototype;!p&&(ue.ngOnChanges||ue.ngOnInit||ue.ngDoCheck)&&((e.preOrderHooks??=[]).push(i.index),p=!0),!y&&(ue.ngOnChanges||ue.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(i.index),y=!0),S++}!function sC(e,n,i){const c=n.directiveEnd,l=e.data,p=n.attrs,y=[];let S=null,U=null;for(let Q=n.directiveStart;Q<c;Q++){const ue=l[Q],Fe=i?i.get(ue):null,mt=Fe?Fe.outputs:null;S=tI(0,ue.inputs,Q,S,Fe?Fe.inputs:null),U=tI(1,ue.outputs,Q,U,mt);const Ut=null===S||null===p||Jn(n)?null:Fy(S,Q,p);y.push(Ut)}null!==S&&(S.hasOwnProperty("class")&&(n.flags|=8),S.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=y,n.inputs=S,n.outputs=U}(e,i,l)}function rI(e,n,i){const s=i.directiveStart,c=i.directiveEnd,l=i.index,p=function ac(){return Wn.lFrame.currentDirectiveIndex}();try{cc(l);for(let y=s;y<c;y++){const S=e.data[y],U=n[y];Rc(y),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&hm(S,U)}}finally{cc(-1),Rc(p)}}function hm(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function fm(e,n,i){n.componentOffset=i,(e.components??=[]).push(n.index)}function pm(e,n,i){if(i){if(n.exportAs)for(let s=0;s<n.exportAs.length;s++)i[n.exportAs[s]]=e;to(n)&&(i[""]=e)}}function ky(e,n,i,s,c){e.data[s]=c;const l=c.factory||(c.factory=ji(c.type)),p=new Ma(l,to(c),td);e.blueprint[s]=p,i[s]=p,function Ny(e,n,i,s,c){const l=c.hostBindings;if(l){let p=e.hostBindingOpCodes;null===p&&(p=e.hostBindingOpCodes=[]);const y=~n.index;(function cC(e){let n=e.length;for(;n>0;){const i=e[--n];if("number"==typeof i&&i<0)return i}return 0})(p)!=y&&p.push(y),p.push(i,s,l)}}(e,n,s,Kf(e,i,c.hostVars,vr),c)}function Na(e,n,i,s,c,l){const p=$s(e,n);!function gm(e,n,i,s,c,l,p){if(null==l)e.removeAttribute(n,c,i);else{const y=null==p?On(l):p(l,s||"",c);e.setAttribute(n,c,y,i)}}(n[Zn],p,l,e.value,i,s,c)}function sI(e,n,i,s,c,l){const p=l[n];if(null!==p)for(let y=0;y<p.length;)Dy(s,i,p[y++],p[y++],p[y++],p[y++])}function Fy(e,n,i){let s=null,c=0;for(;c<i.length;){const l=i[c];if(0!==l)if(5!==l){if("number"==typeof l)break;if(e.hasOwnProperty(l)){null===s&&(s=[]);const p=e[l];for(let y=0;y<p.length;y+=3)if(p[y]===n){s.push(l,p[y+1],p[y+2],i[c+1]);break}}c+=2}else c+=2;else c+=4}return s}function gh(e,n,i,s){return[e,!0,0,n,null,s,null,i,null,null]}function Vy(e,n){const i=e.contentQueries;if(null!==i){const s=fe(null);try{for(let c=0;c<i.length;c+=2){const p=i[c+1];if(-1!==p){const y=e.data[p];xl(i[c]),y.contentQueries(2,n[p],p)}}}finally{fe(s)}}}function mh(e,n){return e[Go]?e[El][Ti]=n:e[Go]=n,e[El]=n,n}function Xf(e,n,i){xl(0);const s=fe(null);try{n(e,i)}finally{fe(s)}}function Ia(e){return e[Bs]||(e[Bs]=[])}function Oo(e){return e.cleanup||(e.cleanup=[])}function _h(e,n){const i=e[zr],s=i?i.get(Po,null):null;s&&s.handleError(n)}function ul(e,n,i,s,c){for(let l=0;l<i.length;){const p=i[l++],y=i[l++],S=i[l++];Dy(e.data[p],n[p],s,y,S,c)}}function qo(e,n){const i=Ko(n,e),s=i[Yt];!function oI(e,n){for(let i=n.length;i<e.blueprint.length;i++)n.push(e.blueprint[i])}(s,i);const c=i[pr];null!==c&&null===i[is]&&(i[is]=Xd(c,i[zr])),yh(s,i,i[gi])}function yh(e,n,i){tu(n);try{const s=e.viewQuery;null!==s&&Xf(1,s,i);const c=e.template;null!==c&&by(e,n,c,1,i),e.firstCreatePass&&(e.firstCreatePass=!1),n[zo]?.finishViewCreation(e),e.staticContentQueries&&Vy(e,n),e.staticViewQueries&&Xf(2,e.viewQuery,i);const l=e.components;null!==l&&function rd(e,n){for(let i=0;i<n.length;i++)qo(e,n[i])}(n,l)}catch(s){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),s}finally{n[vn]&=-5,kl()}}function xa(e,n){return!n||null===n.firstChild||zl(e)}function vh(e,n,i,s=!0){const c=n[Yt];if(function HE(e,n,i,s){const c=Di+s,l=i.length;s>0&&(i[c-1][Ti]=n),s<l-Di?(n[Ti]=i[c],Eo(i,Di+s,n)):(i.push(n),n[Ti]=null),n[_r]=i;const p=n[Dc];null!==p&&i!==p&&function $f(e,n){const i=e[Sa];n[jn]!==n[_r][_r][jn]&&(e[vn]|=Su.HasTransplantedViews),null===i?e[Sa]=[n]:i.push(n)}(p,n);const y=n[zo];null!==y&&y.insertView(e),bc(n),n[vn]|=128}(c,n,e,i),s){const p=sm(i,e),y=n[Zn],S=im(y,e[So]);null!==S&&function jE(e,n,i,s,c,l){s[pr]=c,s[pi]=n,Wf(e,s,i,1,c,l)}(c,e[pi],y,n,S,p)}const l=n[is];null!==l&&null!==l.firstChild&&(l.firstChild=null)}function Eh(e,n,i,s,c=!1){for(;null!==i;){const l=n[i.index];null!==l&&s.push(Mr(l)),As(l)&&Ly(l,s);const p=i.type;if(8&p)Eh(e,n,i.child,s);else if(32&p){const y=nm(i,n);let S;for(;S=y();)s.push(S)}else if(16&p){const y=Uc(n,i);if(Array.isArray(y))s.push(...y);else{const S=fo(n[jn]);Eh(S[Yt],S,y,s,!0)}}i=c?i.projectionNext:i.next}return s}function Ly(e,n){for(let i=Di;i<e.length;i++){const s=e[i],c=s[Yt].firstChild;null!==c&&Eh(s[Yt],s,c,n)}e[So]!==e[pr]&&n.push(e[So])}let Uy=[];const jy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Fu(e.lView)},consumerOnSignalRead(){this.lView[Is]=this}},Ih=100;function Ch(e,n=!0,i=0){const s=e[lo],c=s.rendererFactory;c.begin?.();try{!function cI(e,n){Im(e,n);let i=0;for(;bl(e);){if(i===Ih)throw new _t(103,!1);i++,Im(e,1)}}(e,i)}catch(p){throw n&&_h(e,p),p}finally{c.end?.(),s.inlineEffectRunner?.flush()}}function uI(e,n,i,s){const c=n[vn];if(!(256&~c))return;n[lo].inlineEffectRunner?.flush(),tu(n);let p=null,y=null;(function Hy(e){return 2!==e.type})(e)&&(y=function By(e){return e[Is]??function aI(e){const n=Uy.pop()??Object.create(jy);return n.lView=e,n}(e)}(n),p=function ot(e){return e&&(e.nextProducerIndex=0),fe(e)}(y));try{tf(n),function Pc(e){return Wn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==i&&by(e,n,i,2,s);const S=!(3&~c);if(S){const ue=e.preOrderCheckHooks;null!==ue&&Bu(n,ue,null)}else{const ue=e.preOrderHooks;null!==ue&&Nc(n,ue,0,null),ju(n,0)}if(function lI(e){for(let n=V_(e);null!==n;n=_g(n)){if(!(n[vn]&Su.HasTransplantedViews))continue;const i=n[Sa];for(let s=0;s<i.length;s++){Ga(i[s])}}}(n),vm(n,0),null!==e.contentQueries&&Vy(e,n),S){const ue=e.contentCheckHooks;null!==ue&&Bu(n,ue)}else{const ue=e.contentHooks;null!==ue&&Nc(n,ue,1),ju(n,1)}!function qE(e,n){const i=e.hostBindingOpCodes;if(null!==i)try{for(let s=0;s<i.length;s++){const c=i[s];if(c<0)cc(~c);else{const l=c,p=i[++s],y=i[++s];Pd(p,l),y(2,n[l])}}}finally{cc(-1)}}(e,n);const U=e.components;null!==U&&zy(n,U,0);const Q=e.viewQuery;if(null!==Q&&Xf(2,Q,s),S){const ue=e.viewCheckHooks;null!==ue&&Bu(n,ue)}else{const ue=e.viewHooks;null!==ue&&Nc(n,ue,2),ju(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[nc]){for(const ue of n[nc])ue();n[nc]=null}n[vn]&=-73}catch(S){throw Fu(n),S}finally{null!==y&&(function At(e,n){if(fe(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(je(e))for(let i=e.nextProducerIndex;i<e.producerNode.length;i++)ie(e.producerNode[i],e.producerIndexOfThis[i]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}(y,p),function ym(e){e.lView[Is]!==e&&(e.lView=null,Uy.push(e))}(y)),kl()}}function vm(e,n){for(let i=V_(e);null!==i;i=_g(i))for(let s=Di;s<i.length;s++)Em(i[s],n)}function Gy(e,n,i){Em(Ko(n,e),i)}function Em(e,n){Zc(e)&&Im(e,n)}function Im(e,n){const s=e[Yt],c=e[vn],l=e[Is];let p=!!(0===n&&16&c);if(p||=!!(64&c&&0===n),p||=!!(1024&c),p||=!(!l?.dirty||!$t(l)),l&&(l.dirty=!1),e[vn]&=-9217,p)uI(s,e,s.template,e[gi]);else if(8192&c){vm(e,1);const y=s.components;null!==y&&zy(e,y,1)}}function zy(e,n,i){for(let s=0;s<n.length;s++)Gy(e,n[s],i)}function id(e){for(e[lo].changeDetectionScheduler?.notify();e;){e[vn]|=64;const n=fo(e);if(Ba(e)&&!n)return e;e=n}return null}class wh{get rootNodes(){const n=this._lView,i=n[Yt];return Eh(i,n,i.firstChild,[])}constructor(n,i,s=!0){this._lView=n,this._cdRefInjectingView=i,this.notifyErrorHandler=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gi]}set context(n){this._lView[gi]=n}get destroyed(){return!(256&~this._lView[vn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[_r];if(As(n)){const i=n[8],s=i?i.indexOf(this):-1;s>-1&&(ch(n,s),ao(i,s))}this._attachedToViewContainer=!1}uh(this._lView[Yt],this._lView)}onDestroy(n){Sl(this._lView,n)}markForCheck(){id(this._cdRefInjectingView||this._lView)}detach(){this._lView[vn]&=-129}reattach(){bc(this._lView),this._lView[vn]|=128}detectChanges(){this._lView[vn]|=1024,Ch(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _t(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ah(this._lView[Yt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new _t(902,!1);this._appRef=n,bc(this._lView)}}let Th=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=ll}return e})();const dI=Th,Cm=class extends dI{constructor(n,i,s){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=s}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,s){const c=function Ya(e,n,i,s){const c=fe(null);try{const l=n.tView,S=cm(e,l,i,4096&e[vn]?4096:16,null,n,null,null,s?.injector??null,s?.embeddedViewInjector??null,s?.dehydratedView??null);S[Dc]=e[n.index];const Q=e[zo];return null!==Q&&(S[zo]=Q.createEmbeddedView(l)),yh(l,S,i),S}finally{fe(c)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:s});return new wh(c)}};function ll(){return Jf(Lr(),Ft())}function Jf(e,n){return 4&e.type?new Cm(n,e,qu(e,n)):null}class He{}class Bc{}class sd{}class Am{resolveComponentFactory(n){throw function vI(e){const n=Error(`No component factory found for ${Jt(e)}.`);return n.ngComponent=e,n}(n)}}let Ah=(()=>{class e{static#e=this.NULL=new Am}return e})();class qy{}let _u=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function No(){const e=Ft(),i=Ko(Lr().index,e);return(Ds(i)?i:e)[Zn]}()}return e})(),EI=(()=>{class e{static#e=this.\u0275prov=or({token:e,providedIn:"root",factory:()=>null})}return e})();const dl={},ad=new Set;function Ec(e){ad.has(e)||(ad.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Qy(...e){}class ws{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qa(!1),this.onMicrotaskEmpty=new Qa(!1),this.onStable=new Qa(!1),this.onError=new Qa(!1),typeof Zone>"u")throw new _t(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!s&&i,c.shouldCoalesceRunChangeDetection=s,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function np(){const e="function"==typeof Nn.requestAnimationFrame;let n=Nn[e?"requestAnimationFrame":"setTimeout"],i=Nn[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const c=i[Zone.__symbol__("OriginalDelegate")];c&&(i=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Xy(e){const n=()=>{!function Pm(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Nn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,rp(e),e.isCheckStableRunning=!0,bh(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),rp(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,s,c,l,p,y)=>{if(function Om(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(y))return i.invokeTask(c,l,p,y);try{return Yy(e),i.invokeTask(c,l,p,y)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||e.shouldCoalesceRunChangeDetection)&&n(),Mm(e)}},onInvoke:(i,s,c,l,p,y,S)=>{try{return Yy(e),i.invoke(c,l,p,y,S)}finally{e.shouldCoalesceRunChangeDetection&&n(),Mm(e)}},onHasTask:(i,s,c,l)=>{i.hasTask(c,l),s===c&&("microTask"==l.change?(e._hasPendingMicrotasks=l.microTask,rp(e),bh(e)):"macroTask"==l.change&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(i,s,c,l)=>(i.handleError(c,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ws.isInAngularZone())throw new _t(909,!1)}static assertNotInAngularZone(){if(ws.isInAngularZone())throw new _t(909,!1)}run(n,i,s){return this._inner.run(n,i,s)}runTask(n,i,s,c){const l=this._inner,p=l.scheduleEventTask("NgZoneEvent: "+c,n,Sm,Qy,Qy);try{return l.runTask(p,i,s)}finally{l.cancelTask(p)}}runGuarded(n,i,s){return this._inner.runGuarded(n,i,s)}runOutsideAngular(n){return this._outer.run(n)}}const Sm={};function bh(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function rp(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Yy(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Mm(e){e._nesting--,bh(e)}class Rm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qa,this.onMicrotaskEmpty=new Qa,this.onStable=new Qa,this.onError=new Qa}run(n,i,s){return n.apply(i,s)}runGuarded(n,i,s){return n.apply(i,s)}runOutsideAngular(n){return n()}runTask(n,i,s,c){return n.apply(i,s)}}var hl=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(hl||{});const ip={destroy(){}};function po(e,n){!n&&function Os(e){if(!qi())throw new _t(-203,!1)}();const i=n?.injector??dn(so);if(!function aa(e){return"browser"===(e??dn(so)).get(Df)}(i))return ip;Ec("NgAfterNextRender");const s=i.get(cd),c=s.handler??=new Ph,l=n?.phase??hl.MixedReadWrite,p=()=>{c.unregister(S),y()},y=i.get(Gl).onDestroy(p),S=eo(i,()=>new xo(l,()=>{p(),e()}));return c.register(S),{destroy:p}}class xo{constructor(n,i){this.phase=n,this.callbackFn=i,this.zone=dn(ws),this.errorHandler=dn(Po,{optional:!0}),dn(He,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){this.errorHandler?.handleError(n)}}}class Ph{constructor(){this.executingCallbacks=!1,this.buckets={[hl.EarlyRead]:new Set,[hl.Write]:new Set,[hl.MixedReadWrite]:new Set,[hl.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const i of n)i.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(const n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}}let cd=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const s of i)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=or({token:e,providedIn:"root",factory:()=>new e})}return e})();function yu(e){return!!Oi(e)}function dd(e,n,i){let s=i?e.styles:null,c=i?e.classes:null,l=0;if(null!==n)for(let p=0;p<n.length;p++){const y=n[p];"number"==typeof y?l=y:1==l?c=Zt(c,y):2==l&&(s=Zt(s,y+": "+n[++p]+";"))}i?e.styles=s:e.stylesWithoutHost=s,i?e.classes=c:e.classesWithoutHost=c}class cp extends Ah{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=lr(n);return new hd(i,this.ngModule)}}function Eu(e){const n=[];for(const i in e){if(!e.hasOwnProperty(i))continue;const s=e[i];void 0!==s&&n.push({propName:Array.isArray(s)?s[0]:s,templateName:i})}return n}class fl{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,s){s=si(s);const c=this.injector.get(n,dl,s);return c!==dl||i===dl?c:this.parentInjector.get(n,i,s)}}class hd extends sd{get inputs(){const n=this.componentDef,i=n.inputTransforms,s=Eu(n.inputs);if(null!==i)for(const c of s)i.hasOwnProperty(c.propName)&&(c.transform=i[c.propName]);return s}get outputs(){return Eu(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function La(e){return e.map(Va).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,s,c){const l=fe(null);try{let p=(c=c||this.ngModule)instanceof Tr?c:c?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new fl(n,p):n,S=y.get(qy,null);if(null===S)throw new _t(407,!1);const U=y.get(EI,null),Fe={rendererFactory:S,sanitizer:U,inlineEffectRunner:null,afterRenderEventManager:y.get(cd,null),changeDetectionScheduler:y.get(He,null)},Ke=S.createRenderer(null,this.componentDef),mt=this.componentDef.selectors[0][0]||"div",Ut=s?function QE(e,n,i,s){const l=s.get(X_,!1)||i===ds.ShadowDom,p=e.selectRootElement(n,l);return function XE(e){My(e)}(p),p}(Ke,s,this.componentDef.encapsulation,y):al(Ke,mt,function Zy(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(mt));let on=512;this.componentDef.signals?on|=4096:this.componentDef.onPush||(on|=16);let cn=null;null!==Ut&&(cn=Xd(Ut,y,!0));const qt=qf(0,null,null,1,0,null,null,null,null,null,null),gr=cm(null,qt,null,on,null,null,Fe,Ke,y,null,cn);let ci,Zi;tu(gr);try{const _o=this.componentDef;let Fa,zp=null;_o.findHostDirectiveDefs?(Fa=[],zp=new Map,_o.findHostDirectiveDefs(_o,Fa,zp),Fa.push(_o)):Fa=[_o];const cA=function ev(e,n){const i=e[Yt],s=Qn;return e[s]=n,fh(i,s,2,"#host",null)}(gr,Ut),UR=function Qo(e,n,i,s,c,l,p){const y=c[Yt];!function tv(e,n,i,s){for(const c of e)n.mergedAttrs=x(n.mergedAttrs,c.hostAttrs);null!==n.mergedAttrs&&(dd(n,n.mergedAttrs,!0),null!==i&&cl(s,i,n))}(s,e,n,p);let S=null;null!==n&&(S=Xd(n,c[zr]));const U=l.rendererFactory.createRenderer(n,i);let Q=16;i.signals?Q=4096:i.onPush&&(Q=64);const ue=cm(c,Py(i),null,Q,c[e.index],e,l,U,null,null,S);return y.firstCreatePass&&fm(y,e,s.length-1),mh(c,ue),c[e.index]=ue}(cA,Ut,_o,Fa,gr,Fe,Ke);Zi=sc(qt,Qn),Ut&&function Oh(e,n,i,s){if(s)xi(e,i,["ng-version","17.3.12"]);else{const{attrs:c,classes:l}=function Zs(e){const n=[],i=[];let s=1,c=2;for(;s<e.length;){let l=e[s];if("string"==typeof l)2===c?""!==l&&n.push(l,e[++s]):8===c&&i.push(l);else{if(!fi(c))break;c=l}s++}return{attrs:n,classes:i}}(n.selectors[0]);c&&xi(e,i,c),l&&l.length>0&&Cy(e,i,l.join(" "))}}(Ke,_o,Ut,s),void 0!==i&&function CI(e,n,i){const s=e.projection=[];for(let c=0;c<n.length;c++){const l=i[c];s.push(null!=l?Array.from(l):null)}}(Zi,this.ngContentSelectors,i),ci=function Rh(e,n,i,s,c,l){const p=Lr(),y=c[Yt],S=$s(p,c);dm(y,c,p,i,null,s);for(let Q=0;Q<i.length;Q++)Ps(oa(c,y,p.directiveStart+Q,p),c);rI(y,c,p),S&&Ps(S,c);const U=oa(c,y,p.directiveStart+p.componentOffset,p);if(e[gi]=c[gi]=U,null!==l)for(const Q of l)Q(U,n);return um(y,p,c),U}(UR,_o,Fa,zp,gr,[wI]),yh(qt,gr,null)}finally{kl()}return new Mh(this.componentType,ci,qu(Zi,gr),gr,Zi)}finally{fe(l)}}}class Mh extends Bc{constructor(n,i,s,c,l){super(),this.location=s,this._rootLView=c,this._tNode=l,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new wh(c,void 0,!1),this.componentType=n}setInput(n,i){const s=this._tNode.inputs;let c;if(null!==s&&(c=s[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const l=this._rootLView;ul(l[Yt],l,c,n,i),this.previousInputValues.set(n,i),id(Ko(this._tNode.index,l))}}get injector(){return new Ss(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function wI(){const e=Lr();Fl(Ft()[Yt],e)}let $c=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=TI}return e})();function TI(){return kh(Lr(),Ft())}const DI=$c,Nh=class extends DI{constructor(n,i,s){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=s}get element(){return qu(this._hostTNode,this._hostLView)}get injector(){return new Ss(this._hostTNode,this._hostLView)}get parentInjector(){const n=Ar(this._hostTNode,this._hostLView);if(Bl(n)){const i=xc(n,this._hostLView),s=ru(n);return new Ss(i[Yt].data[s+8],i)}return new Ss(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=Vm(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-Di}createEmbeddedView(n,i,s){let c,l;"number"==typeof s?c=s:null!=s&&(c=s.index,l=s.injector);const y=n.createEmbeddedViewImpl(i||{},l,null);return this.insertImpl(y,c,xa(this._hostTNode,null)),y}createComponent(n,i,s,c,l){const p=n&&!function Pt(e){return"function"==typeof e}(n);let y;if(p)y=i;else{const mt=i||{};y=mt.index,s=mt.injector,c=mt.projectableNodes,l=mt.environmentInjector||mt.ngModuleRef}const S=p?n:new hd(lr(n)),U=s||this.parentInjector;if(!l&&null==S.ngModule){const Ut=(p?U:this.parentInjector).get(Tr,null);Ut&&(l=Ut)}lr(S.componentType??{});const Ke=S.create(U,c,null,l);return this.insertImpl(Ke.hostView,y,xa(this._hostTNode,null)),Ke}insert(n,i){return this.insertImpl(n,i,!0)}insertImpl(n,i,s){const c=n._lView;if(function Dl(e){return As(e[_r])}(c)){const y=this.indexOf(n);if(-1!==y)this.detach(y);else{const S=c[_r],U=new Nh(S,S[pi],S[_r]);U.detach(U.indexOf(n))}}const l=this._adjustIndex(i),p=this._lContainer;return vh(p,c,l,s),n.attachToViewContainerRef(),Eo(xh(p),l,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=Vm(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),s=ch(this._lContainer,i);s&&(ao(xh(this._lContainer),i),uh(s[Yt],s))}detach(n){const i=this._adjustIndex(n,-1),s=ch(this._lContainer,i);return s&&null!=ao(xh(this._lContainer),i)?new wh(s):null}_adjustIndex(n,i=0){return n??this.length+i}};function Vm(e){return e[8]}function xh(e){return e[8]||(e[8]=[])}function kh(e,n){let i;const s=n[e.index];return As(s)?i=s:(i=gh(s,n,null,e),n[e.index]=i,mh(n,i)),Lm(i,n,e,s),new Nh(i,e,n)}let Lm=function dp(e,n,i,s){if(e[So])return;let c;c=8&i.type?Mr(s):function Iu(e,n){const i=e[Zn],s=i.createComment(""),c=$s(n,e);return _c(i,im(i,c),s,function iC(e,n){return e.nextSibling(n)}(i,c),!1),s}(n,i),e[So]=c},up=()=>!1;class fd{constructor(n){this.queryList=n,this.matches=null}clone(){return new fd(this.queryList)}setDirty(){this.queryList.setDirty()}}class hp{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const s=null!==n.contentQueries?n.contentQueries[0]:i.length,c=[];for(let l=0;l<s;l++){const p=i.getByIndex(l);c.push(this.queries[p.indexInDeclarationView].clone())}return new hp(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==Gm(n,i).matches&&this.queries[i].setDirty()}}class fp{constructor(n,i,s=null){this.flags=i,this.read=s,this.predicate="string"==typeof n?function SI(e){return e.split(",").map(n=>n.trim())}(n):n}}class pl{constructor(n=[]){this.queries=n}elementStart(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let s=0;s<this.length;s++){const c=null!==i?i.length:0,l=this.getByIndex(s).embeddedTView(n,c);l&&(l.indexInDeclarationView=s,null!==i?i.push(l):i=[l])}return null!==i?new pl(i):null}template(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Hc{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Hc(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const i=this._declarationNodeIndex;let s=n.parent;for(;null!==s&&8&s.type&&s.index!==i;)s=s.parent;return i===(null!==s?s.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const s=this.metadata.predicate;if(Array.isArray(s))for(let c=0;c<s.length;c++){const l=s[c];this.matchTNodeWithReadOption(n,i,Um(i,l)),this.matchTNodeWithReadOption(n,i,Ka(i,n,l,!1,!1))}else s===Th?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Ka(i,n,s,!1,!1))}matchTNodeWithReadOption(n,i,s){if(null!==s){const c=this.metadata.read;if(null!==c)if(c===hc||c===$c||c===Th&&4&i.type)this.addMatch(i.index,-2);else{const l=Ka(i,n,c,!1,!1);null!==l&&this.addMatch(i.index,l)}else this.addMatch(i.index,s)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function Um(e,n){const i=e.localNames;if(null!==i)for(let s=0;s<i.length;s+=2)if(i[s]===n)return i[s+1];return null}function iv(e,n,i,s){return-1===i?function bI(e,n){return 11&e.type?qu(e,n):4&e.type?Jf(e,n):null}(n,e):-2===i?function sv(e,n,i){return i===hc?qu(n,e):i===Th?Jf(n,e):i===$c?kh(n,e):void 0}(e,n,s):oa(e,e[Yt],i,n)}function Bm(e,n,i,s){const c=n[zo].queries[s];if(null===c.matches){const l=e.data,p=i.matches,y=[];for(let S=0;null!==p&&S<p.length;S+=2){const U=p[S];y.push(U<0?null:iv(n,l[U],p[S+1],i.metadata.read))}c.matches=y}return c.matches}function Fh(e,n,i,s){const c=e.queries.getByIndex(i),l=c.matches;if(null!==l){const p=Bm(e,n,c,i);for(let y=0;y<l.length;y+=2){const S=l[y];if(S>0)s.push(p[y/2]);else{const U=l[y+1],Q=n[-S];for(let ue=Di;ue<Q.length;ue++){const Fe=Q[ue];Fe[Dc]===Fe[_r]&&Fh(Fe[Yt],Fe,U,s)}if(null!==Q[Sa]){const ue=Q[Sa];for(let Fe=0;Fe<ue.length;Fe++){const Ke=ue[Fe];Fh(Ke[Yt],Ke,U,s)}}}}}return s}function jm(e,n,i){const s=new cg(!(4&~i));return function ZE(e,n,i,s){const c=Ia(n);c.push(i),e.firstCreatePass&&Oo(e).push(s,c.length-1)}(e,n,s,s.destroy),(n[zo]??=new hp).queries.push(new fd(s))-1}function Hm(e,n,i){null===e.queries&&(e.queries=new pl),e.queries.track(new Hc(n,i))}function Gm(e,n){return e.queries.getByIndex(n)}function Cu(e,n){const i=e[Yt],s=Gm(i,n);return s.crossesNgTemplate?Fh(i,e,n,[]):Bm(i,e,s,n)}function Lh(e){return function Ic(e){return"function"==typeof e&&void 0!==e[Se]}(e)&&"function"==typeof e.set}function Ep(e){let n=function yv(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),i=!0;const s=[e];for(;n;){let c;if(to(e))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new _t(903,!1);c=n.\u0275dir}if(c){if(i){s.push(c);const p=e;p.inputs=Gh(e.inputs),p.inputTransforms=Gh(e.inputTransforms),p.declaredInputs=Gh(e.declaredInputs),p.outputs=Gh(e.outputs);const y=c.hostBindings;y&&Ev(e,y);const S=c.viewQuery,U=c.contentQueries;if(S&&Ym(e,S),U&&Jm(e,U),Hh(e,c),Nr(e.outputs,c.outputs),to(c)&&c.data.animation){const Q=e.data;Q.animation=(Q.animation||[]).concat(c.data.animation)}}const l=c.features;if(l)for(let p=0;p<l.length;p++){const y=l[p];y&&y.ngInherit&&y(e),y===Ep&&(i=!1)}}n=Object.getPrototypeOf(n)}!function vv(e){let n=0,i=null;for(let s=e.length-1;s>=0;s--){const c=e[s];c.hostVars=n+=c.hostVars,c.hostAttrs=x(c.hostAttrs,i=x(i,c.hostAttrs))}}(s)}function Hh(e,n){for(const i in n.inputs){if(!n.inputs.hasOwnProperty(i)||e.inputs.hasOwnProperty(i))continue;const s=n.inputs[i];if(void 0!==s&&(e.inputs[i]=s,e.declaredInputs[i]=n.declaredInputs[i],null!==n.inputTransforms)){const c=Array.isArray(s)?s[0]:s;if(!n.inputTransforms.hasOwnProperty(c))continue;e.inputTransforms??={},e.inputTransforms[c]=n.inputTransforms[c]}}}function Gh(e){return e===wi?{}:e===yr?[]:e}function Ym(e,n){const i=e.viewQuery;e.viewQuery=i?(s,c)=>{n(s,c),i(s,c)}:n}function Jm(e,n){const i=e.contentQueries;e.contentQueries=i?(s,c,l)=>{n(s,c,l),i(s,c,l)}:n}function Ev(e,n){const i=e.hostBindings;e.hostBindings=i?(s,c)=>{n(s,c),i(s,c)}:n}function ua(e){const n=e.inputConfig,i={};for(const s in n)if(n.hasOwnProperty(s)){const c=n[s];Array.isArray(c)&&c[3]&&(i[s]=c[3])}e.inputTransforms=i}class Tu{}class t_{}function gd(e,n){return new V(e,n??null,[])}class V extends Tu{constructor(n,i,s){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cp(this);const c=Oi(n);this._bootstrapComponents=Ea(c.bootstrap),this._r3Injector=Bd(n,i,[{provide:Tu,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver},...s],Jt(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class G extends t_{constructor(n){super(),this.moduleType=n}create(n){return new V(this.moduleType,n,[])}}class gt extends Tu{constructor(n){super(),this.componentFactoryResolver=new cp(this),this.instance=null;const i=new oi([...n.providers,{provide:Tu,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver}],n.parent||Hn(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Ot(e,n,i=null){return new gt({providers:e,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let Ja=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new In.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vl(e){return!!LI(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function LI(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Du(e,n,i){return e[n]=i}function zs(e,n,i){return!Object.is(e[n],i)&&(e[n]=i,!0)}function Wh(e,n,i,s){const c=zs(e,n,i);return zs(e,n+1,s)||c}function Cp(e,n,i,s,c,l,p,y){const S=Ft(),U=Rr(),Q=e+Qn,ue=U.firstCreatePass?function hA(e,n,i,s,c,l,p,y,S){const U=n.consts,Q=fh(n,e,4,p||null,no(U,y));Oy(n,i,Q,no(U,S)),Fl(n,Q);const ue=Q.tView=qf(2,Q,s,c,l,n.directiveRegistry,n.pipeRegistry,null,n.schemas,U,null);return null!==n.queries&&(n.queries.template(n,Q),ue.queries=n.queries.embeddedTView(Q)),Q}(Q,U,S,n,i,s,c,l,p):U.data[Q];va(ue,!1);const Fe=IC(U,S,ue,e);Qi()&&lh(U,S,Fe,ue),Ps(Fe,S);const Ke=gh(Fe,S,Fe,ue);return S[Q]=Ke,mh(S,Ke),function lp(e,n,i){return up(e,n,i)}(Ke,ue,S),qc(ue)&&lm(U,S,ue),null!=p&&Sy(S,ue,y),Cp}let IC=function CC(e,n,i,s){return Pa(!0),n[Zn].createComment("")};function qI(e,n,i,s){const c=Ft();return zs(c,sa(),n)&&(Rr(),Na(Ai(),c,e,n,i,s)),qI}function Mv(e,n){return e<<17|n<<2}function _d(e){return e>>17&32767}function QI(e){return 2|e}function qh(e){return(131068&e)>>2}function XI(e,n){return-131069&e|n<<2}function YI(e){return 1|e}function ZC(e,n,i,s){const c=e[i+1],l=null===n;let p=s?_d(c):qh(c),y=!1;for(;0!==p&&(!1===y||l);){const U=e[p+1];JA(e[p],n)&&(y=!0,e[p+1]=s?YI(U):QI(U)),p=s?_d(U):qh(U)}y&&(e[i+1]=s?QI(c):YI(c))}function JA(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&Ci(e,n)>=0}function JI(e,n,i){const s=Ft();return zs(s,sa(),n)&&ca(Rr(),Ai(),s,e,n,s[Zn],i,!1),JI}function ZI(e,n,i,s,c){const p=c?"class":"style";ul(e,i,n.inputs[p],p,s)}function e0(e,n){return function zc(e,n,i,s){const c=Ft(),l=Rr(),p=function Hs(e){const n=Wn.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,i}(2);l.firstUpdatePass&&function cw(e,n,i,s){const c=e.data;if(null===c[i+1]){const l=c[Cs()],p=function aw(e,n){return n>=e.expandoStartIndex}(e,i);(function hw(e,n){return!!(e.flags&(n?8:16))})(l,s)&&null===n&&!p&&(n=!1),n=function ab(e,n,i,s){const c=function Md(e){const n=Wn.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let l=s?n.residualClasses:n.residualStyles;if(null===c)0===(s?n.classBindings:n.styleBindings)&&(i=c_(i=t0(null,e,n,i,s),n.attrs,s),l=null);else{const p=n.directiveStylingLast;if(-1===p||e[p]!==c)if(i=t0(c,e,n,i,s),null===l){let S=function cb(e,n,i){const s=i?n.classBindings:n.styleBindings;if(0!==qh(s))return e[_d(s)]}(e,n,s);void 0!==S&&Array.isArray(S)&&(S=t0(null,e,n,S[1],s),S=c_(S,n.attrs,s),function ub(e,n,i,s){e[_d(i?n.classBindings:n.styleBindings)]=s}(e,n,s,S))}else l=function lb(e,n,i){let s;const c=n.directiveEnd;for(let l=1+n.directiveStylingLast;l<c;l++)s=c_(s,e[l].hostAttrs,i);return c_(s,n.attrs,i)}(e,n,s)}return void 0!==l&&(s?n.residualClasses=l:n.residualStyles=l),i}(c,l,n,s),function XA(e,n,i,s,c,l){let p=l?n.classBindings:n.styleBindings,y=_d(p),S=qh(p);e[s]=i;let Q,U=!1;if(Array.isArray(i)?(Q=i[1],(null===Q||Ci(i,Q)>0)&&(U=!0)):Q=i,c)if(0!==S){const Fe=_d(e[y+1]);e[s+1]=Mv(Fe,y),0!==Fe&&(e[Fe+1]=XI(e[Fe+1],s)),e[y+1]=function qA(e,n){return 131071&e|n<<17}(e[y+1],s)}else e[s+1]=Mv(y,0),0!==y&&(e[y+1]=XI(e[y+1],s)),y=s;else e[s+1]=Mv(S,0),0===y?y=s:e[S+1]=XI(e[S+1],s),S=s;U&&(e[s+1]=QI(e[s+1])),ZC(e,Q,s,!0),ZC(e,Q,s,!1),function YA(e,n,i,s,c){const l=c?e.residualClasses:e.residualStyles;null!=l&&"string"==typeof n&&Ci(l,n)>=0&&(i[s+1]=YI(i[s+1]))}(n,Q,e,s,l),p=Mv(y,S),l?n.classBindings=p:n.styleBindings=p}(c,l,n,i,p,s)}}(l,e,p,s),n!==vr&&zs(c,p,n)&&function lw(e,n,i,s,c,l,p,y){if(!(3&n.type))return;const S=e.data,U=S[y+1],Q=function QA(e){return!(1&~e)}(U)?dw(S,n,i,c,qh(U),p):void 0;Rv(Q)||(Rv(l)||function KA(e){return!(2&~e)}(U)&&(l=dw(S,null,i,c,y,p)),function WE(e,n,i,s,c){if(n)c?e.addClass(i,s):e.removeClass(i,s);else{let l=-1===s.indexOf("-")?void 0:Xa.DashCase;null==c?e.removeStyle(i,s,l):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),l|=Xa.Important),e.setStyle(i,s,c,l))}}(s,p,Jc(Cs(),i),c,l))}(l,l.data[Cs()],c,c[Zn],e,c[p+1]=function pb(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Jt(fu(e)))),e}(n,i),s,p)}(e,n,null,!0),e0}function t0(e,n,i,s,c){let l=null;const p=i.directiveEnd;let y=i.directiveStylingLast;for(-1===y?y=i.directiveStart:y++;y<p&&(l=n[y],s=c_(s,l.hostAttrs,c),l!==e);)y++;return null!==e&&(i.directiveStylingLast=y),s}function c_(e,n,i){const s=i?1:2;let c=-1;if(null!==n)for(let l=0;l<n.length;l++){const p=n[l];"number"==typeof p?c=p:c===s&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Wi(e,p,!!i||n[++l]))}return void 0===e?null:e}function dw(e,n,i,s,c,l){const p=null===n;let y;for(;c>0;){const S=e[c],U=Array.isArray(S),Q=U?S[1]:S,ue=null===Q;let Fe=i[c+1];Fe===vr&&(Fe=ue?yr:void 0);let Ke=ue?Ls(Fe,s):Q===s?Fe:void 0;if(U&&!Rv(Ke)&&(Ke=Ls(S,s)),Rv(Ke)&&(y=Ke,p))return y;const mt=e[c+1];c=p?_d(mt):qh(mt)}if(null!==n){let S=l?n.residualClasses:n.residualStyles;null!=S&&(y=Ls(S,s))}return y}function Rv(e){return void 0!==e}function Ov(e,n,i,s){const c=Ft(),l=Rr(),p=Qn+e,y=c[Zn],S=l.firstCreatePass?function Vb(e,n,i,s,c,l){const p=n.consts,S=fh(n,e,2,s,no(p,c));return Oy(n,i,S,no(p,l)),null!==S.attrs&&dd(S,S.attrs,!1),null!==S.mergedAttrs&&dd(S,S.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,S),S}(p,l,c,n,i,s):l.data[p],U=mw(l,c,S,y,n,e);c[p]=U;const Q=qc(S);return va(S,!0),cl(y,U,S),!function i_(e){return!(32&~e.flags)}(S)&&Qi()&&lh(l,c,U,S),0===function wd(){return Wn.lFrame.elementDepthCount}()&&Ps(U,c),function rf(){Wn.lFrame.elementDepthCount++}(),Q&&(lm(l,c,S),um(l,S,c)),null!==s&&Sy(c,S),Ov}function Nv(){let e=Lr();Lu()?function bs(){Wn.lFrame.isParent=!1}():(e=e.parent,va(e,!1));const n=e;(function Dd(e){return Wn.skipHydrationRootTNode===e})(n)&&function Kp(){Wn.skipHydrationRootTNode=null}(),function Td(){Wn.lFrame.elementDepthCount--}();const i=Rr();return i.firstCreatePass&&(Fl(i,e),Kc(e)&&i.queries.elementEnd(e)),null!=n.classesWithoutHost&&function xd(e){return!!(8&e.flags)}(n)&&ZI(i,n,Ft(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function kd(e){return!!(16&e.flags)}(n)&&ZI(i,n,Ft(),n.stylesWithoutHost,!1),Nv}function a0(e,n,i,s){return Ov(e,n,i,s),Nv(),a0}let mw=(e,n,i,s,c,l)=>(Pa(!0),al(s,c,function df(){return Wn.lFrame.currentNamespace}()));function vw(){return Ft()}const Qh=void 0;var Gb=["en",[["a","p"],["AM","PM"],Qh],[["AM","PM"],Qh,Qh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qh,"{1} 'at' {0}",Qh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Hb(e){const i=Math.floor(Math.abs(e)),s=e.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===s?1:5}];let Up={};function l0(e){const n=function zb(e){return e.toLowerCase().replace(/_/g,"-")}(e);let i=ww(n);if(i)return i;const s=n.split("-")[0];if(i=ww(s),i)return i;if("en"===s)return Gb;throw new _t(701,!1)}function Cw(e){return l0(e)[Bp.PluralCase]}function ww(e){return e in Up||(Up[e]=Nn.ng&&Nn.ng.common&&Nn.ng.common.locales&&Nn.ng.common.locales[e]),Up[e]}var Bp=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Bp||{});const jp="en-US";let Tw=jp;function f0(e,n,i,s){const c=Ft(),l=Rr(),p=Lr();return p0(l,c,c[Zn],p,e,n,s),f0}function p0(e,n,i,s,c,l,p){const y=qc(s),U=e.firstCreatePass&&Oo(e),Q=n[gi],ue=Ia(n);let Fe=!0;if(3&s.type||p){const Ut=$s(s,n),on=p?p(Ut):Ut,cn=ue.length,qt=p?ci=>p(Mr(ci[s.index])):s.index;let gr=null;if(!p&&y&&(gr=function jS(e,n,i,s){const c=e.cleanup;if(null!=c)for(let l=0;l<c.length-1;l+=2){const p=c[l];if(p===i&&c[l+1]===s){const y=n[Bs],S=c[l+2];return y.length>S?y[S]:null}"string"==typeof p&&(l+=2)}return null}(e,n,c,s.index)),null!==gr)(gr.__ngLastListenerFn__||gr).__ngNextListenerFn__=l,gr.__ngLastListenerFn__=l,Fe=!1;else{l=Jw(s,n,Q,l,!1);const ci=i.listen(on,c,l);ue.push(l,ci),U&&U.push(c,qt,cn,cn+1)}}else l=Jw(s,n,Q,l,!1);const Ke=s.outputs;let mt;if(Fe&&null!==Ke&&(mt=Ke[c])){const Ut=mt.length;if(Ut)for(let on=0;on<Ut;on+=2){const Zi=n[mt[on]][mt[on+1]].subscribe(l),_o=ue.length;ue.push(l,Zi),U&&U.push(c,s.index,_o,-(_o+1))}}}function Yw(e,n,i,s){const c=fe(null);try{return js(6,n,i),!1!==i(s)}catch(l){return _h(e,l),!1}finally{js(7,n,i),fe(c)}}function Jw(e,n,i,s,c){return function l(p){if(p===Function)return s;id(e.componentOffset>-1?Ko(e.index,n):n);let S=Yw(n,i,s,p),U=l.__ngNextListenerFn__;for(;U;)S=Yw(n,i,U,p)&&S,U=U.__ngNextListenerFn__;return c&&!1===S&&p.preventDefault(),S}}function Zw(e=1){return function Oc(e){return(Wn.lFrame.contextLView=function Al(e,n){for(;e>0;)n=n[ai],e--;return n}(e,Wn.lFrame.contextLView))[gi]}(e)}function uT(e,n,i,s){!function ov(e,n,i,s){const c=Rr();if(c.firstCreatePass){const l=Lr();Hm(c,new fp(n,i,s),l.index),function av(e,n){const i=e.contentQueries||(e.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(e.queries.length-1,n)}(c,e),!(2&~i)&&(c.staticContentQueries=!0)}return jm(c,Ft(),i)}(e,n,i,s)}function lT(e,n,i){!function $m(e,n,i){const s=Rr();return s.firstCreatePass&&(Hm(s,new fp(e,n,i),-1),!(2&~n)&&(s.staticViewQueries=!0)),jm(s,Ft(),n)}(e,n,i)}function dT(e){const n=Ft(),i=Rr(),s=Nl();xl(s+1);const c=Gm(i,s);if(e.dirty&&function ef(e){return!(4&~e[vn])}(n)===!(2&~c.metadata.flags)){if(null===c.matches)e.reset([]);else{const l=Cu(n,s);e.reset(l,gf),e.notifyOnChanges()}return!0}return!1}function hT(){return function Vh(e,n){return e[zo].queries[n].queryList}(Ft(),Nl())}function CT(e,n=""){const i=Ft(),s=Rr(),c=e+Qn,l=s.firstCreatePass?fh(s,c,1,n,null):s.data[c],p=wT(s,i,l,n,e);i[c]=p,Qi()&&lh(s,i,p,l),va(l,!1)}let wT=(e,n,i,s,c)=>(Pa(!0),function fy(e,n){return e.createText(n)}(n[Zn],s));function m0(e){return Lv("",e,""),m0}function Lv(e,n,i){const s=Ft(),c=function Mp(e,n,i,s){return zs(e,sa(),i)?n+On(i)+s:vr}(s,e,n,i);return c!==vr&&function Ca(e,n,i){const s=Jc(n,e);!function jf(e,n,i){e.setValue(n,i)}(e[Zn],s,i)}(s,Cs(),c),Lv}function _0(e,n,i){Lh(n)&&(n=n());const s=Ft();return zs(s,sa(),n)&&ca(Rr(),Ai(),s,e,n,s[Zn],i,!1),_0}function OT(e,n){const i=Lh(e);return i&&e.set(n),i}function y0(e,n){const i=Ft(),s=Rr(),c=Lr();return p0(s,i,i[Zn],c,e,n),y0}function v0(e,n,i,s,c){if(e=Ve(e),Array.isArray(e))for(let l=0;l<e.length;l++)v0(e[l],n,i,s,c);else{const l=Rr(),p=Ft(),y=Lr();let S=Ct(e)?e:Ve(e.provide);const U=bo(e),Q=1048575&y.providerIndexes,ue=y.directiveStart,Fe=y.providerIndexes>>20;if(Ct(e)||!e.multi){const Ke=new Ma(U,c,td),mt=I0(S,n,c?Q:Q+Fe,ue);-1===mt?(io(Gt(y,p),l,S),E0(l,e,n.length),n.push(S),y.directiveStart++,y.directiveEnd++,c&&(y.providerIndexes+=1048576),i.push(Ke),p.push(Ke)):(i[mt]=Ke,p[mt]=Ke)}else{const Ke=I0(S,n,Q+Fe,ue),mt=I0(S,n,Q,Q+Fe),on=mt>=0&&i[mt];if(c&&!on||!c&&!(Ke>=0&&i[Ke])){io(Gt(y,p),l,S);const cn=function lP(e,n,i,s,c){const l=new Ma(e,i,td);return l.multi=[],l.index=n,l.componentProviders=0,NT(l,c,s&&!i),l}(c?uP:cP,i.length,c,s,U);!c&&on&&(i[mt].providerFactory=cn),E0(l,e,n.length,0),n.push(S),y.directiveStart++,y.directiveEnd++,c&&(y.providerIndexes+=1048576),i.push(cn),p.push(cn)}else E0(l,e,Ke>-1?Ke:mt,NT(i[c?mt:Ke],U,!c&&s));!c&&s&&on&&i[mt].componentProviders++}}}function E0(e,n,i,s){const c=Ct(n),l=function mn(e){return!!e.useClass}(n);if(c||l){const S=(l?Ve(n.useClass):n).prototype.ngOnDestroy;if(S){const U=e.destroyHooks||(e.destroyHooks=[]);if(!c&&n.multi){const Q=U.indexOf(i);-1===Q?U.push(i,[s,S]):U[Q+1].push(s,S)}else U.push(i,S)}}}function NT(e,n,i){return i&&e.componentProviders++,e.multi.push(n)-1}function I0(e,n,i,s){for(let c=i;c<s;c++)if(n[c]===e)return c;return-1}function cP(e,n,i,s){return C0(this.multi,[])}function uP(e,n,i,s){const c=this.multi;let l;if(this.providerFactory){const p=this.providerFactory.componentProviders,y=oa(i,i[Yt],this.providerFactory.index,s);l=y.slice(0,p),C0(c,l);for(let S=p;S<y.length;S++)l.push(y[S])}else l=[],C0(c,l);return l}function C0(e,n){for(let i=0;i<e.length;i++)n.push((0,e[i])());return n}function xT(e,n=[]){return i=>{i.providersResolver=(s,c)=>function aP(e,n,i){const s=Rr();if(s.firstCreatePass){const c=to(e);v0(i,s.data,s.blueprint,c,!0),v0(n,s.data,s.blueprint,c,!1)}}(s,c?c(e):e,n)}}let dP=(()=>{class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const s=Y(0,i.type),c=s.length>0?Ot([s],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,c)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=or({token:e,providedIn:"environment",factory:()=>new e(ei(Tr))})}return e})();function kT(e){Ec("NgStandalone"),e.getStandaloneInjector=n=>n.get(dP).getOrCreateStandaloneInjector(e)}function FT(e,n,i){const s=e.\u0275cmp;s.directiveDefs=Ki(n,!1),s.pipeDefs=Ki(i,!0)}function g_(e,n){const i=e[n];return i===vr?void 0:i}function BT(e,n,i,s,c,l,p,y){const S=n+i;return function Tv(e,n,i,s,c){const l=Wh(e,n,i,s);return zs(e,n+2,c)||l}(e,S,c,l,p)?Du(e,S+3,y?s.call(y,c,l,p):s(c,l,p)):g_(e,S+3)}function HT(e,n){const i=Rr();let s;const c=e+Qn;i.firstCreatePass?(s=function wP(e,n){if(n)for(let i=n.length-1;i>=0;i--){const s=n[i];if(e===s.name)return s}}(n,i.pipeRegistry),i.data[c]=s,s.onDestroy&&(i.destroyHooks??=[]).push(c,s.onDestroy)):s=i.data[c];const l=s.factory||(s.factory=ji(s.type)),y=wr(td);try{const S=h(!1),U=l();return h(S),function qS(e,n,i,s){i>=e.data.length&&(e.data[i]=null,e.blueprint[i]=null),n[i]=s}(i,Ft(),c,U),U}finally{wr(y)}}function GT(e,n,i){const s=e+Qn,c=Ft(),l=oc(c,s);return m_(c,s)?function LT(e,n,i,s,c,l){const p=n+i;return zs(e,p,c)?Du(e,p+1,l?s.call(l,c):s(c)):g_(e,p+1)}(c,Ns(),n,l.transform,i,l):l.transform(i)}function zT(e,n,i,s){const c=e+Qn,l=Ft(),p=oc(l,c);return m_(l,c)?function UT(e,n,i,s,c,l,p){const y=n+i;return Wh(e,y,c,l)?Du(e,y+2,p?s.call(p,c,l):s(c,l)):g_(e,y+2)}(l,Ns(),n,p.transform,i,s,p):p.transform(i,s)}function WT(e,n,i,s,c){const l=e+Qn,p=Ft(),y=oc(p,l);return m_(p,l)?BT(p,Ns(),n,y.transform,i,s,c,y):y.transform(i,s,c)}function m_(e,n){return e[Yt].data[n].pure}class cD{constructor(n){this.full=n;const i=n.split(".");this.major=i[0],this.minor=i[1],this.patch=i.slice(2).join(".")}}const qP=new cD("17.3.12");let uD=(()=>{class e{log(i){console.log(i)}warn(i){console.warn(i)}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const pD=new Xe(""),gD=new Xe("");let S0,EM=(()=>{class e{constructor(i,s,c){this._ngZone=i,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,S0||(function IM(e){S0=e}(c),c.addToWindow(s)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ws.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(i)||(clearTimeout(s.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,s,c){let l=-1;s&&s>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==l),i()},s)),this._callbacks.push({doneCb:i,timeoutId:l,updateCb:c})}whenStable(i,s,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,s,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,s,c){return[]}static#e=this.\u0275fac=function(s){return new(s||e)(ei(ws),ei(mD),ei(gD))};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac})}return e})(),mD=(()=>{class e{constructor(){this._applications=new Map}registerApplication(i,s){this._applications.set(i,s)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,s=!0){return S0?.findTestabilityInTree(this,i,s)??null}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function P0(e){return!!e&&"function"==typeof e.then}function _D(e){return!!e&&"function"==typeof e.subscribe}const yD=new Xe("");let M0=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s}),this.appInits=dn(yD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const c of this.appInits){const l=c();if(P0(l))i.push(l);else if(_D(l)){const p=new Promise((y,S)=>{l.subscribe({complete:y,error:S})});i.push(p)}}const s=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{s()}).catch(c=>{this.reject(c)}),0===i.length&&s(),this.initialized=!0}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const R0=new Xe("");function ID(e,n){return Array.isArray(n)?n.reduce(ID,e):{...e,...n}}let yd=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=dn(rg),this.afterRenderEffectManager=dn(cd),this.externalTestViews=new Set,this.beforeRender=new Ln.B,this.afterTick=new Ln.B,this.componentTypes=[],this.components=[],this.isStable=dn(Ja).hasPendingTasks.pipe((0,Kn.T)(i=>!i)),this._injector=dn(Tr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,s){const c=i instanceof sd;if(!this._injector.get(M0).done)throw!c&&Ri(i),new _t(405,!1);let p;p=c?i:this._injector.get(Ah).resolveComponentFactory(i),this.componentTypes.push(p.componentType);const y=function CM(e){return e.isBoundToModule}(p)?void 0:this._injector.get(Tu),U=p.create(so.NULL,[],s||p.selector,y),Q=U.location.nativeElement,ue=U.injector.get(pD,null);return ue?.registerApplication(Q),U.onDestroy(()=>{this.detachView(U.hostView),$v(this.components,U),ue?.unregisterApplication(Q)}),this._loadComponent(U),U}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new _t(101,!1);const s=fe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(c){this.internalErrorHandler(c)}finally{this.afterTick.next(),this._runningTick=!1,fe(s)}}detectChangesInAttachedViews(i){let s=0;const c=this.afterRenderEffectManager;for(;;){if(s===Ih)throw new _t(103,!1);if(i){const l=0===s;this.beforeRender.next(l);for(let{_lView:p,notifyErrorHandler:y}of this._views)TM(p,l,y)}if(s++,c.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>O0(l))&&(c.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>O0(l))))break}}attachView(i){const s=i;this._views.push(s),s.attachToAppRef(this)}detachView(i){const s=i;$v(this._views,s),s.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const s=this._injector.get(R0,[]);[...this._bootstrapListeners,...s].forEach(c=>c(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>$v(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new _t(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $v(e,n){const i=e.indexOf(n);i>-1&&e.splice(i,1)}function TM(e,n,i){!n&&!O0(e)||function DM(e,n,i){let s;i?(s=0,e[vn]|=1024):s=64&e[vn]?0:1,Ch(e,n,s)}(e,i,n)}function O0(e){return bl(e)}class AM{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let bM=(()=>{class e{compileModuleSync(i){return new G(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const s=this.compileModuleSync(i),l=Ea(Oi(i).declarations).reduce((p,y)=>{const S=lr(y);return S&&p.push(new hd(S)),p},[]);return new AM(s,l)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),MM=(()=>{class e{constructor(){this.zone=dn(ws),this.applicationRef=dn(yd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function RM(){const e=dn(ws),n=dn(Po);return i=>e.runOutsideAngular(()=>n.handleError(i))}let NM=(()=>{class e{constructor(){this.subscription=new st.yU,this.initialized=!1,this.zone=dn(ws),this.pendingTasks=dn(Ja)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ws.assertNotInAngularZone(),queueMicrotask(()=>{null!==i&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ws.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Gv=new Xe("",{providedIn:"root",factory:()=>dn(Gv,rr.Optional|rr.SkipSelf)||function xM(){return typeof $localize<"u"&&$localize.locale||jp}()}),kM=new Xe("",{providedIn:"root",factory:()=>"USD"}),N0=new Xe("");let DD=(()=>{class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,s){const c=function Jy(e="zone.js",n){return"noop"===e?new Rm:"zone.js"===e?new ws(n):e}(s?.ngZone,function TD(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:s?.ngZoneEventCoalescing,runCoalescing:s?.ngZoneRunCoalescing}));return c.run(()=>{const l=function le(e,n,i){return new V(e,n,i)}(i.moduleType,this.injector,function wD(e){return[{provide:ws,useFactory:e},{provide:Us,multi:!0,useFactory:()=>{const n=dn(MM,{optional:!0});return()=>n.initialize()}},{provide:Us,multi:!0,useFactory:()=>{const n=dn(NM);return()=>{n.initialize()}}},{provide:rg,useFactory:RM}]}(()=>c)),p=l.injector.get(Po,null);return c.runOutsideAngular(()=>{const y=c.onError.subscribe({next:S=>{p.handleError(S)}});l.onDestroy(()=>{$v(this._modules,l),y.unsubscribe()})}),function ED(e,n,i){try{const s=i();return P0(s)?s.catch(c=>{throw n.runOutsideAngular(()=>e.handleError(c)),c}):s}catch(s){throw n.runOutsideAngular(()=>e.handleError(s)),s}}(p,c,()=>{const y=l.injector.get(M0);return y.runInitializers(),y.donePromise.then(()=>(function Dw(e){"string"==typeof e&&(Tw=e.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Gv,jp)||jp),this._moduleDoBootstrap(l),l))})})}bootstrapModule(i,s=[]){const c=ID({},s);return function PM(e,n,i){const s=new G(i);return Promise.resolve(s)}(0,0,i).then(l=>this.bootstrapModuleFactory(l,c))}_moduleDoBootstrap(i){const s=i.injector.get(yd);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(c=>s.bootstrap(c));else{if(!i.instance.ngDoBootstrap)throw new _t(-403,!1);i.instance.ngDoBootstrap(s)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _t(404,!1);this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s());const i=this._injector.get(N0,null);i&&(i.forEach(s=>s()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(s){return new(s||e)(ei(so))};static#t=this.\u0275prov=or({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),vd=null;const AD=new Xe("");function bD(e,n,i=[]){const s=`Platform: ${n}`,c=new Xe(s);return(l=[])=>{let p=x0();if(!p||p.injector.get(AD,!1)){const y=[...i,...l,{provide:c,useValue:!0}];e?e(y):function VM(e){if(vd&&!vd.get(AD,!1))throw new _t(400,!1);(function vD(){!function rn(e){Lt=e}(()=>{throw new _t(600,!1)})})(),vd=e;const n=e.get(DD);(function PD(e){e.get(Tf,null)?.forEach(i=>i())})(e)}(function SD(e=[],n){return so.create({name:n,providers:[{provide:hn,useValue:"platform"},{provide:N0,useValue:new Set([()=>vd=null])},...e]})}(y,s))}return function LM(e){const n=x0();if(!n)throw new _t(401,!1);return n}()}}function x0(){return vd?.get(DD)??null}function BM(){return!1}let RD=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=jM}return e})();function jM(e){return function $M(e,n,i){if(na(e)&&!i){const s=Ko(e.index,n);return new wh(s,s)}return 47&e.type?new wh(n[jn],n):null}(Lr(),Ft(),!(16&~e))}class kD{constructor(){}supports(n){return vl(n)}create(n){return new KM(n)}}const WM=(e,n)=>n;class KM{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||WM}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,s=this._removalsHead,c=0,l=null;for(;i||s;){const p=!s||i&&i.currentIndex<VD(s,c,l)?i:s,y=VD(p,c,l),S=p.currentIndex;if(p===s)c--,s=s._nextRemoved;else if(i=i._next,null==p.previousIndex)c++;else{l||(l=[]);const U=y-c,Q=S-c;if(U!=Q){for(let Fe=0;Fe<U;Fe++){const Ke=Fe<l.length?l[Fe]:l[Fe]=0,mt=Ke+Fe;Q<=mt&&mt<U&&(l[Fe]=Ke+1)}l[p.previousIndex]=Q-U}}y!==S&&n(p,y,S)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!vl(n))throw new _t(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,l,p,i=this._itHead,s=!1;if(Array.isArray(n)){this.length=n.length;for(let y=0;y<this.length;y++)l=n[y],p=this._trackByFn(y,l),null!==i&&Object.is(i.trackById,p)?(s&&(i=this._verifyReinsertion(i,l,p,y)),Object.is(i.item,l)||this._addIdentityChange(i,l)):(i=this._mismatch(i,l,p,y),s=!0),i=i._next}else c=0,function lA(e,n){if(Array.isArray(e))for(let i=0;i<e.length;i++)n(e[i]);else{const i=e[Symbol.iterator]();let s;for(;!(s=i.next()).done;)n(s.value)}}(n,y=>{p=this._trackByFn(c,y),null!==i&&Object.is(i.trackById,p)?(s&&(i=this._verifyReinsertion(i,y,p,c)),Object.is(i.item,y)||this._addIdentityChange(i,y)):(i=this._mismatch(i,y,p,c),s=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,s,c){let l;return null===n?l=this._itTail:(l=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,l,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(s,c))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,l,c)):n=this._addAfter(new qM(i,s),l,c),n}_verifyReinsertion(n,i,s,c){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==l?n=this._reinsertAfter(l,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,l=n._nextRemoved;return null===c?this._removalsHead=l:c._nextRemoved=l,null===l?this._removalsTail=c:l._prevRemoved=c,this._insertAfter(n,i,s),this._addToMoves(n,s),n}_moveAfter(n,i,s){return this._unlink(n),this._insertAfter(n,i,s),this._addToMoves(n,s),n}_addAfter(n,i,s){return this._insertAfter(n,i,s),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,s){const c=null===i?this._itHead:i._next;return n._next=c,n._prev=i,null===c?this._itTail=n:c._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new FD),this._linkedRecords.put(n),n.currentIndex=s,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,s=n._next;return null===i?this._itHead=s:i._next=s,null===s?this._itTail=i:s._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FD),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class qM{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QM{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===i||i<=s.currentIndex)&&Object.is(s.trackById,n))return s;return null}remove(n){const i=n._prevDup,s=n._nextDup;return null===i?this._head=s:i._nextDup=s,null===s?this._tail=i:s._prevDup=i,null===this._head}}class FD{constructor(){this.map=new Map}put(n){const i=n.trackById;let s=this.map.get(i);s||(s=new QM,this.map.set(i,s)),s.add(n)}get(n,i){const c=this.map.get(n);return c?c.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VD(e,n,i){const s=e.previousIndex;if(null===s)return s;let c=0;return i&&s<i.length&&(c=i[s]),s+n+c}class LD{constructor(){}supports(n){return n instanceof Map||LI(n)}create(){return new XM}}class XM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||LI(n)))throw new _t(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(s,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,s),this._appendAfter=i,i=i._next;else{const l=this._getOrCreateRecordForKey(c,s);i=this._insertBeforeOrAppend(i,l)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let s=i;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const s=n._prev;return i._next=n,i._prev=s,n._prev=i,s&&(s._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,i);const l=c._prev,p=c._next;return l&&(l._next=p),p&&(p._prev=l),c._next=null,c._prev=null,c}const s=new YM(n);return this._records.set(n,s),s.currentValue=i,this._addToAdditions(s),s}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(s=>i(n[s],s))}}class YM{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UD(){return new U0([new kD])}let U0=(()=>{class e{static#e=this.\u0275prov=or({token:e,providedIn:"root",factory:UD});constructor(i){this.factories=i}static create(i,s){if(null!=s){const c=s.factories.slice();i=i.concat(c)}return new e(i)}static extend(i){return{provide:e,useFactory:s=>e.create(i,s||UD()),deps:[[e,new ts,new zi]]}}find(i){const s=this.factories.find(c=>c.supports(i));if(null!=s)return s;throw new _t(901,!1)}}return e})();function BD(){return new B0([new LD])}let B0=(()=>{class e{static#e=this.\u0275prov=or({token:e,providedIn:"root",factory:BD});constructor(i){this.factories=i}static create(i,s){if(s){const c=s.factories.slice();i=i.concat(c)}return new e(i)}static extend(i){return{provide:e,useFactory:s=>e.create(i,s||BD()),deps:[[e,new ts,new zi]]}}find(i){const s=this.factories.find(c=>c.supports(i));if(s)return s;throw new _t(901,!1)}}return e})();const eR=bD(null,"core",[]);let tR=(()=>{class e{constructor(i){}static#e=this.\u0275fac=function(s){return new(s||e)(ei(yd))};static#t=this.\u0275mod=wo({type:e});static#n=this.\u0275inj=Hi({})}return e})();function MR(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function OR(e){const n=fe(null);try{return e()}finally{fe(n)}}function LR(e){const n=lr(e);if(!n)return null;const i=new hd(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},1182:(nn,We,k)=>{k.d(We,{DS:()=>yt,X8:()=>It,$z:()=>rn,UB:()=>qe,yy:()=>Lt,ZP:()=>ut,AU:()=>Re,CP:()=>ln,gF:()=>ft}),k(2438);var T=k(177),R=k(4438),v=k(1825),re=k(9253),Se=k(1413),fe=k(7673),$e=k(1985),Me=k(8455),ye=k(6365),pe=k(8750),Ge=k(983),it=k(9326),De=k(941),ct=k(5558),at=k(6354),ot=k(6129);class At extends Se.B{constructor(Kt=1/0,gn=1/0,tn=ot.U){super(),this._bufferSize=Kt,this._windowTime=gn,this._timestampProvider=tn,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=gn===1/0,this._bufferSize=Math.max(1,Kt),this._windowTime=Math.max(1,gn)}next(Kt){const{isStopped:gn,_buffer:tn,_infiniteTimeWindow:sn,_timestampProvider:Cn,_windowTime:Dn}=this;gn||(tn.push(Kt),!sn&&tn.push(Cn.now()+Dn)),this._trimBuffer(),super.next(Kt)}_subscribe(Kt){this._throwIfClosed(),this._trimBuffer();const gn=this._innerSubscribe(Kt),{_infiniteTimeWindow:tn,_buffer:sn}=this,Cn=sn.slice();for(let Dn=0;Dn<Cn.length&&!Kt.closed;Dn+=tn?1:2)Kt.next(Cn[Dn]);return this._checkFinalizedStatuses(Kt),gn}_trimBuffer(){const{_bufferSize:Kt,_timestampProvider:gn,_buffer:tn,_infiniteTimeWindow:sn}=this,Cn=(sn?1:2)*Kt;if(Kt<1/0&&Cn<tn.length&&tn.splice(0,tn.length-Cn),!sn){const Dn=gn.now();let Ln=0;for(let st=1;st<tn.length&&tn[st]<=Dn;st+=2)Ln=st;Ln&&tn.splice(0,Ln+1)}}}var $t=k(7707),ae=k(9974);function ie(Je,Kt,...gn){if(!0===Kt)return void Je();if(!1===Kt)return;const tn=new $t.Ms({next:()=>{tn.unsubscribe(),Je()}});return(0,pe.Tg)(Kt(...gn)).subscribe(tn)}function je(Je,Kt,gn){let tn,sn=!1;return Je&&"object"==typeof Je?({bufferSize:tn=1/0,windowTime:Kt=1/0,refCount:sn=!1,scheduler:gn}=Je):tn=Je??1/0,function we(Je={}){const{connector:Kt=(()=>new Se.B),resetOnError:gn=!0,resetOnComplete:tn=!0,resetOnRefCountZero:sn=!0}=Je;return Cn=>{let Dn,Ln,st,In=0,Kn=!1,sr=!1;const St=()=>{Ln?.unsubscribe(),Ln=void 0},_t=()=>{St(),Dn=st=void 0,Kn=sr=!1},Zr=()=>{const Nt=Dn;_t(),Nt?.unsubscribe()};return(0,ae.N)((Nt,tt)=>{In++,!sr&&!Kn&&St();const Rt=st=st??Kt();tt.add(()=>{In--,0===In&&!sr&&!Kn&&(Ln=ie(Zr,sn))}),Rt.subscribe(tt),!Dn&&In>0&&(Dn=new $t.Ms({next:Yn=>Rt.next(Yn),error:Yn=>{sr=!0,St(),Ln=ie(_t,gn,Yn),Rt.error(Yn)},complete:()=>{Kn=!0,St(),Ln=ie(_t,tn),Rt.complete()}}),(0,pe.Tg)(Nt).subscribe(Dn))})(Cn)}}({connector:()=>new At(tn,Kt,gn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:sn})}var Ue=k(1594),Oe=k(8071);function ce(Je,Kt){return(0,Oe.T)(Kt)?(0,ct.n)(()=>Je,Kt):(0,ct.n)(()=>Je)}var xe=k(6745),xt=k(5964),un=k(7935);const ln=new R.nKC("angularfire2.auth.use-emulator"),Lt=new R.nKC("angularfire2.auth.settings"),ut=new R.nKC("angularfire2.auth.tenant-id"),rn=new R.nKC("angularfire2.auth.langugage-code"),Re=new R.nKC("angularfire2.auth.use-device-language"),qe=new R.nKC("angularfire.auth.persistence"),ft=(Je,Kt,gn,tn,sn,Cn,Dn,Ln)=>(0,re.BM)(`${Je.name}.auth`,"AngularFireAuth",Je.name,()=>{const st=Kt.runOutsideAngular(()=>Je.auth());if(gn&&st.useEmulator(...gn),tn&&(st.tenantId=tn),st.languageCode=sn,Cn&&st.useDeviceLanguage(),Dn)for(const[In,Kn]of Object.entries(Dn))st.settings[In]=Kn;return Ln&&st.setPersistence(Ln),st},[gn,tn,sn,Cn,Dn,Ln]);let yt=(()=>{class Je{authState;idToken;user;idTokenResult;credential;constructor(gn,tn,sn,Cn,Dn,Ln,st,In,Kn,sr,St,_t){const Zr=new Se.B,Nt=(0,fe.of)(void 0).pipe((0,De.Q)(Dn.outsideAngular),(0,ct.n)(()=>Cn.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2438)))),(0,at.T)(()=>(0,re.iB)(gn,Cn,tn)),(0,at.T)(tt=>ft(tt,Cn,Ln,In,Kn,sr,st,St)),je({bufferSize:1,refCount:!1}));if((0,T.Vy)(sn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,fe.of)(null);else{Nt.pipe((0,Ue.$)()).subscribe();const tt=Nt.pipe((0,ct.n)(tr=>tr.getRedirectResult().then(An=>An,()=>null)),v.U0,je({bufferSize:1,refCount:!1})),Rt=Nt.pipe((0,ct.n)(tr=>new $e.c(An=>({unsubscribe:Cn.runOutsideAngular(()=>tr.onAuthStateChanged(bn=>An.next(bn),bn=>An.error(bn),()=>An.complete()))})))),Yn=Nt.pipe((0,ct.n)(tr=>new $e.c(An=>({unsubscribe:Cn.runOutsideAngular(()=>tr.onIdTokenChanged(bn=>An.next(bn),bn=>An.error(bn),()=>An.complete()))}))));this.authState=tt.pipe(ce(Rt),(0,xe._)(Dn.outsideAngular),(0,De.Q)(Dn.insideAngular)),this.user=tt.pipe(ce(Yn),(0,xe._)(Dn.outsideAngular),(0,De.Q)(Dn.insideAngular)),this.idToken=this.user.pipe((0,ct.n)(tr=>tr?(0,Me.H)(tr.getIdToken()):(0,fe.of)(null))),this.idTokenResult=this.user.pipe((0,ct.n)(tr=>tr?(0,Me.H)(tr.getIdTokenResult()):(0,fe.of)(null))),this.credential=function nt(...Je){const Kt=(0,it.lI)(Je),gn=(0,it.R0)(Je,1/0),tn=Je;return tn.length?1===tn.length?(0,pe.Tg)(tn[0]):(0,ye.U)(gn)((0,Me.H)(tn,Kt)):Ge.w}(tt,Zr,this.authState.pipe((0,xt.p)(tr=>!tr))).pipe((0,at.T)(tr=>tr?.user?tr:null),(0,xe._)(Dn.outsideAngular),(0,De.Q)(Dn.insideAngular))}return(0,re.Gt)(this,Nt,Cn,{spy:{apply:(tt,Rt,Yn)=>{(tt.startsWith("signIn")||tt.startsWith("createUser"))&&Yn.then(tr=>Zr.next(tr))}}})}static \u0275fac=function(tn){return new(tn||Je)(R.KVO(re.rx),R.KVO(re.uP,8),R.KVO(R.Agw),R.KVO(R.SKi),R.KVO(v.u0),R.KVO(ln,8),R.KVO(Lt,8),R.KVO(ut,8),R.KVO(rn,8),R.KVO(Re,8),R.KVO(qe,8),R.KVO(v.Jv,8))};static \u0275prov=R.jDH({token:Je,factory:Je.\u0275fac,providedIn:"any"})}return Je})(),It=(()=>{class Je{constructor(){un.A.registerVersion("angularfire",v.xv.full,"auth-compat")}static \u0275fac=function(tn){return new(tn||Je)};static \u0275mod=R.$C({type:Je});static \u0275inj=R.G2t({providers:[yt]})}return Je})()},9253:(nn,We,k)=>{k.d(We,{BM:()=>nt,Gt:()=>re,bf:()=>it,e7:()=>Se,iB:()=>ye,rx:()=>$e,uP:()=>Me});var _=k(4438),T=k(1825),R=k(7935);const v=["ngOnDestroy"],re=(ot,At,$t,ae={})=>new Proxy(ot,{get:(we,ie)=>$t.runOutsideAngular(()=>{if(ot[ie])return ae?.spy?.get&&ae.spy.get(ie,ot[ie]),ot[ie];if(v.indexOf(ie)>-1)return()=>{};const je=At.toPromise().then(Ue=>{const Oe=Ue?.[ie];return"function"==typeof Oe?Oe.bind(Ue):Oe?.then?Oe.then(ce=>$t.run(()=>ce)):$t.run(()=>Oe)});return new Proxy(()=>{},{get:(Ue,Oe)=>je[Oe],apply:(Ue,Oe,ce)=>je.then(xe=>{const xt=xe?.(...ce);return ae?.spy?.apply&&ae.spy.apply(ie,ce,xt),xt})})})}),Se=(ot,At)=>{At.forEach($t=>{Object.getOwnPropertyNames($t.prototype||$t).forEach(ae=>{Object.defineProperty(ot.prototype,ae,Object.getOwnPropertyDescriptor($t.prototype||$t,ae))})})};class fe{constructor(At){return At}}const $e=new _.nKC("angularfire2.app.options"),Me=new _.nKC("angularfire2.app.name");function ye(ot,At,$t){const we="object"==typeof $t&&$t||{};we.name=we.name||"string"==typeof $t&&$t||"[DEFAULT]";const je=R.A.apps.filter(Ue=>Ue&&Ue.name===we.name)[0]||At.runOutsideAngular(()=>R.A.initializeApp(ot,we));try{if(JSON.stringify(ot)!==JSON.stringify(je.options)){const Ue=!!module.hot;pe("error",`${je.name} Firebase App already initialized with different options${Ue?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new fe(je)}const pe=(ot,...At)=>{(0,_.naY)()&&typeof console<"u"&&console[ot](...At)},Ge={provide:fe,useFactory:ye,deps:[$e,_.SKi,[new _.Xx1,Me]]};let it=(()=>{class ot{static initializeApp($t,ae){return{ngModule:ot,providers:[{provide:$e,useValue:$t},{provide:Me,useValue:ae}]}}constructor($t){R.A.registerVersion("angularfire",T.xv.full,"core"),R.A.registerVersion("angularfire",T.xv.full,"app-compat"),R.A.registerVersion("angular",_.xvI.full,$t.toString())}static \u0275fac=function(ae){return new(ae||ot)(_.KVO(_.Agw))};static \u0275mod=_.$C({type:ot});static \u0275inj=_.G2t({providers:[Ge]})}return ot})();function nt(ot,At,$t,ae,we){const[,ie,je]=globalThis.\u0275AngularfireInstanceCache.find(Ue=>Ue[0]===ot)||[];if(ie)return function De(ot,At){try{return ot.toString()===At.toString()}catch{return ot===At}}(we,je)||(at("error",`${At} was already initialized on the ${$t} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),at("warn",{is:we,was:je})),ie;{const Ue=ae();return globalThis.\u0275AngularfireInstanceCache.push([ot,Ue,we]),Ue}}const ct=typeof module<"u"&&!!module.hot,at=(ot,...At)=>{(0,_.naY)()&&typeof console<"u"&&console[ot](...At)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:(nn,We,k)=>{k.d(We,{xv:()=>De,U0:()=>un,u0:()=>je,Jv:()=>At});var _=k(4438),T=k(7852);(0,T.registerVersion)("firebase","10.13.1","app");var re=k(6780),fe=k(9687);const Me=new class $e extends fe.q{}(class Se extends re.R{constructor(rn,Re){super(rn,Re),this.scheduler=rn,this.work=Re}schedule(rn,Re=0){return Re>0?super.schedule(rn,Re):(this.delay=Re,this.state=rn,this.scheduler.flush(this),this)}execute(rn,Re){return Re>0||this.closed?super.execute(rn,Re):this._execute(rn,Re)}requestAsyncId(rn,Re,qe=0){return null!=qe&&qe>0||null==qe&&this.delay>0?super.requestAsyncId(rn,Re,qe):(rn.flush(this),0)}});var pe=k(3236),Ge=k(8141),it=k(6745),nt=k(941);const De=new _.RxE("ANGULARFIRE2_VERSION");class At{constructor(){return((ut,rn)=>{const Re=(0,T.getApps)(),qe=[];return Re.forEach(ft=>{ft.container.getProvider(ut).instances.forEach(It=>{qe.includes(It)||qe.push(It)})}),qe})($t)}}const $t="app-check";function ae(){}class we{zone;delegate;constructor(rn,Re=Me){this.zone=rn,this.delegate=Re}now(){return this.delegate.now()}schedule(rn,Re,qe){const ft=this.zone;return this.delegate.schedule(function(It){ft.runGuarded(()=>{rn.apply(this,[It])})},Re,qe)}}class ie{zone;task=null;constructor(rn){this.zone=rn}call(rn,Re){const qe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ae,{},ae,ae)),Re.pipe((0,Ge.M)({next:qe,complete:qe,error:qe})).subscribe(rn).add(qe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let je=(()=>{class ut{ngZone;outsideAngular;insideAngular;constructor(Re){this.ngZone=Re,this.outsideAngular=Re.runOutsideAngular(()=>new we(Zone.current)),this.insideAngular=Re.run(()=>new we(Zone.current,pe.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(qe){return new(qe||ut)(_.KVO(_.SKi))};static \u0275prov=_.jDH({token:ut,factory:ut.\u0275fac,providedIn:"root"})}return ut})();function un(ut){return function jt(ut){return function(Re){return(Re=Re.lift(new ie(ut.ngZone))).pipe((0,it._)(ut.outsideAngular),(0,nt.Q)(ut.insideAngular))}}(function Ue(){const ut=globalThis.\u0275AngularFireScheduler;if(!ut)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return ut}())(ut)}},9417:(nn,We,k)=>{k.d(We,{BC:()=>St,JD:()=>Xr,MR:()=>xs,X1:()=>xi,YN:()=>Co,cb:()=>_t,j4:()=>Rs,k0:()=>$t,me:()=>nt,ok:()=>co,qT:()=>Vo,vS:()=>ur,wz:()=>ei,xH:()=>os,y7:()=>Xs});var _=k(4438),T=k(177),R=k(8455),v=k(7468),re=k(6354);let Se=(()=>{class H{constructor(x,Z){this._renderer=x,this._elementRef=Z,this.onChange=Ae=>{},this.onTouched=()=>{}}setProperty(x,Z){this._renderer.setProperty(this._elementRef.nativeElement,x,Z)}registerOnTouched(x){this.onTouched=x}registerOnChange(x){this.onChange=x}setDisabledState(x){this.setProperty("disabled",x)}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(_.sFG),_.rXU(_.aKT))};static#t=this.\u0275dir=_.FsC({type:H})}return H})(),fe=(()=>{class H extends Se{static#e=this.\u0275fac=(()=>{let x;return function(Ae){return(x||(x=_.xGo(H)))(Ae||H)}})();static#t=this.\u0275dir=_.FsC({type:H,features:[_.Vt3]})}return H})();const $e=new _.nKC(""),pe={provide:$e,useExisting:(0,_.Rfq)(()=>nt),multi:!0},it=new _.nKC("");let nt=(()=>{class H extends Se{constructor(x,Z,Ae){super(x,Z),this._compositionMode=Ae,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ge(){const H=(0,T.QT)()?(0,T.QT)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(x){this.setProperty("value",x??"")}_handleInput(x){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(x)}_compositionStart(){this._composing=!0}_compositionEnd(x){this._composing=!1,this._compositionMode&&this.onChange(x)}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(_.sFG),_.rXU(_.aKT),_.rXU(it,8))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Z,Ae){1&Z&&_.bIt("input",function(Jn){return Ae._handleInput(Jn.target.value)})("blur",function(){return Ae.onTouched()})("compositionstart",function(){return Ae._compositionStart()})("compositionend",function(Jn){return Ae._compositionEnd(Jn.target.value)})},features:[_.Jv_([pe]),_.Vt3]})}return H})();function De(H){return null==H||("string"==typeof H||Array.isArray(H))&&0===H.length}function ct(H){return null!=H&&"number"==typeof H.length}const at=new _.nKC(""),ot=new _.nKC(""),At=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class $t{static min(W){return function ae(H){return W=>{if(De(W.value)||De(H))return null;const x=parseFloat(W.value);return!isNaN(x)&&x<H?{min:{min:H,actual:W.value}}:null}}(W)}static max(W){return function we(H){return W=>{if(De(W.value)||De(H))return null;const x=parseFloat(W.value);return!isNaN(x)&&x>H?{max:{max:H,actual:W.value}}:null}}(W)}static required(W){return function ie(H){return De(H.value)?{required:!0}:null}(W)}static requiredTrue(W){return function je(H){return!0===H.value?null:{required:!0}}(W)}static email(W){return function Ue(H){return De(H.value)||At.test(H.value)?null:{email:!0}}(W)}static minLength(W){return function Oe(H){return W=>De(W.value)||!ct(W.value)?null:W.value.length<H?{minlength:{requiredLength:H,actualLength:W.value.length}}:null}(W)}static maxLength(W){return function ce(H){return W=>ct(W.value)&&W.value.length>H?{maxlength:{requiredLength:H,actualLength:W.value.length}}:null}(W)}static pattern(W){return function xe(H){if(!H)return xt;let W,x;return"string"==typeof H?(x="","^"!==H.charAt(0)&&(x+="^"),x+=H,"$"!==H.charAt(H.length-1)&&(x+="$"),W=new RegExp(x)):(x=H.toString(),W=H),Z=>{if(De(Z.value))return null;const Ae=Z.value;return W.test(Ae)?null:{pattern:{requiredPattern:x,actualValue:Ae}}}}(W)}static nullValidator(W){return null}static compose(W){return Re(W)}static composeAsync(W){return ft(W)}}function xt(H){return null}function un(H){return null!=H}function jt(H){return(0,_.jNT)(H)?(0,R.H)(H):H}function ln(H){let W={};return H.forEach(x=>{W=null!=x?{...W,...x}:W}),0===Object.keys(W).length?null:W}function Lt(H,W){return W.map(x=>x(H))}function rn(H){return H.map(W=>function ut(H){return!H.validate}(W)?W:x=>W.validate(x))}function Re(H){if(!H)return null;const W=H.filter(un);return 0==W.length?null:function(x){return ln(Lt(x,W))}}function qe(H){return null!=H?Re(rn(H)):null}function ft(H){if(!H)return null;const W=H.filter(un);return 0==W.length?null:function(x){const Z=Lt(x,W).map(jt);return(0,v.p)(Z).pipe((0,re.T)(ln))}}function yt(H){return null!=H?ft(rn(H)):null}function It(H,W){return null===H?[W]:Array.isArray(H)?[...H,W]:[H,W]}function Je(H){return H._rawValidators}function Kt(H){return H._rawAsyncValidators}function gn(H){return H?Array.isArray(H)?H:[H]:[]}function tn(H,W){return Array.isArray(H)?H.includes(W):H===W}function sn(H,W){const x=gn(W);return gn(H).forEach(Ae=>{tn(x,Ae)||x.push(Ae)}),x}function Cn(H,W){return gn(W).filter(x=>!tn(H,x))}class Dn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(W){this._rawValidators=W||[],this._composedValidatorFn=qe(this._rawValidators)}_setAsyncValidators(W){this._rawAsyncValidators=W||[],this._composedAsyncValidatorFn=yt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(W){this._onDestroyCallbacks.push(W)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(W=>W()),this._onDestroyCallbacks=[]}reset(W=void 0){this.control&&this.control.reset(W)}hasError(W,x){return!!this.control&&this.control.hasError(W,x)}getError(W,x){return this.control?this.control.getError(W,x):null}}class Ln extends Dn{get formDirective(){return null}get path(){return null}}class st extends Dn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class In{constructor(W){this._cd=W}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let St=(()=>{class H extends In{constructor(x){super(x)}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(st,2))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Z,Ae){2&Z&&_.AVh("ng-untouched",Ae.isUntouched)("ng-touched",Ae.isTouched)("ng-pristine",Ae.isPristine)("ng-dirty",Ae.isDirty)("ng-valid",Ae.isValid)("ng-invalid",Ae.isInvalid)("ng-pending",Ae.isPending)},features:[_.Vt3]})}return H})(),_t=(()=>{class H extends In{constructor(x){super(x)}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(Ln,10))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(Z,Ae){2&Z&&_.AVh("ng-untouched",Ae.isUntouched)("ng-touched",Ae.isTouched)("ng-pristine",Ae.isPristine)("ng-dirty",Ae.isDirty)("ng-valid",Ae.isValid)("ng-invalid",Ae.isInvalid)("ng-pending",Ae.isPending)("ng-submitted",Ae.isSubmitted)},features:[_.Vt3]})}return H})();const Un="VALID",Nr="INVALID",Jt="PENDING",Zt="DISABLED";function Kr(H){return(Ce(H)?H.validators:H)||null}function xr(H,W){return(Ce(W)?W.asyncValidators:H)||null}function Ce(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}function Ie(H,W,x){const Z=H.controls;if(!(W?Object.keys(Z):Z).length)throw new _.wOt(1e3,"");if(!Z[x])throw new _.wOt(1001,"")}function Qe(H,W,x){H._forEachChild((Z,Ae)=>{if(void 0===x[Ae])throw new _.wOt(1002,"")})}class Mt{constructor(W,x){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(W),this._assignAsyncValidators(x)}get validator(){return this._composedValidatorFn}set validator(W){this._rawValidators=this._composedValidatorFn=W}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(W){this._rawAsyncValidators=this._composedAsyncValidatorFn=W}get parent(){return this._parent}get valid(){return this.status===Un}get invalid(){return this.status===Nr}get pending(){return this.status==Jt}get disabled(){return this.status===Zt}get enabled(){return this.status!==Zt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(W){this._assignValidators(W)}setAsyncValidators(W){this._assignAsyncValidators(W)}addValidators(W){this.setValidators(sn(W,this._rawValidators))}addAsyncValidators(W){this.setAsyncValidators(sn(W,this._rawAsyncValidators))}removeValidators(W){this.setValidators(Cn(W,this._rawValidators))}removeAsyncValidators(W){this.setAsyncValidators(Cn(W,this._rawAsyncValidators))}hasValidator(W){return tn(this._rawValidators,W)}hasAsyncValidator(W){return tn(this._rawAsyncValidators,W)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(W={}){this.touched=!0,this._parent&&!W.onlySelf&&this._parent.markAsTouched(W)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(W=>W.markAllAsTouched())}markAsUntouched(W={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(x=>{x.markAsUntouched({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}markAsDirty(W={}){this.pristine=!1,this._parent&&!W.onlySelf&&this._parent.markAsDirty(W)}markAsPristine(W={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(x=>{x.markAsPristine({onlySelf:!0})}),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}markAsPending(W={}){this.status=Jt,!1!==W.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!W.onlySelf&&this._parent.markAsPending(W)}disable(W={}){const x=this._parentMarkedDirty(W.onlySelf);this.status=Zt,this.errors=null,this._forEachChild(Z=>{Z.disable({...W,onlySelf:!0})}),this._updateValue(),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...W,skipPristineCheck:x}),this._onDisabledChange.forEach(Z=>Z(!0))}enable(W={}){const x=this._parentMarkedDirty(W.onlySelf);this.status=Un,this._forEachChild(Z=>{Z.enable({...W,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent}),this._updateAncestors({...W,skipPristineCheck:x}),this._onDisabledChange.forEach(Z=>Z(!1))}_updateAncestors(W){this._parent&&!W.onlySelf&&(this._parent.updateValueAndValidity(W),W.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(W){this._parent=W}getRawValue(){return this.value}updateValueAndValidity(W={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Un||this.status===Jt)&&this._runAsyncValidator(W.emitEvent)),!1!==W.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!W.onlySelf&&this._parent.updateValueAndValidity(W)}_updateTreeValidity(W={emitEvent:!0}){this._forEachChild(x=>x._updateTreeValidity(W)),this.updateValueAndValidity({onlySelf:!0,emitEvent:W.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zt:Un}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(W){if(this.asyncValidator){this.status=Jt,this._hasOwnPendingAsyncValidator=!0;const x=jt(this.asyncValidator(this));this._asyncValidationSubscription=x.subscribe(Z=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Z,{emitEvent:W})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(W,x={}){this.errors=W,this._updateControlsErrors(!1!==x.emitEvent)}get(W){let x=W;return null==x||(Array.isArray(x)||(x=x.split(".")),0===x.length)?null:x.reduce((Z,Ae)=>Z&&Z._find(Ae),this)}getError(W,x){const Z=x?this.get(x):this;return Z&&Z.errors?Z.errors[W]:null}hasError(W,x){return!!this.getError(W,x)}get root(){let W=this;for(;W._parent;)W=W._parent;return W}_updateControlsErrors(W){this.status=this._calculateStatus(),W&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(W)}_initObservables(){this.valueChanges=new _.bkB,this.statusChanges=new _.bkB}_calculateStatus(){return this._allControlsDisabled()?Zt:this.errors?Nr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jt)?Jt:this._anyControlsHaveStatus(Nr)?Nr:Un}_anyControlsHaveStatus(W){return this._anyControls(x=>x.status===W)}_anyControlsDirty(){return this._anyControls(W=>W.dirty)}_anyControlsTouched(){return this._anyControls(W=>W.touched)}_updatePristine(W={}){this.pristine=!this._anyControlsDirty(),this._parent&&!W.onlySelf&&this._parent._updatePristine(W)}_updateTouched(W={}){this.touched=this._anyControlsTouched(),this._parent&&!W.onlySelf&&this._parent._updateTouched(W)}_registerOnCollectionChange(W){this._onCollectionChange=W}_setUpdateStrategy(W){Ce(W)&&null!=W.updateOn&&(this._updateOn=W.updateOn)}_parentMarkedDirty(W){return!W&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(W){return null}_assignValidators(W){this._rawValidators=Array.isArray(W)?W.slice():W,this._composedValidatorFn=function Rn(H){return Array.isArray(H)?qe(H):H||null}(this._rawValidators)}_assignAsyncValidators(W){this._rawAsyncValidators=Array.isArray(W)?W.slice():W,this._composedAsyncValidatorFn=function Ve(H){return Array.isArray(H)?yt(H):H||null}(this._rawAsyncValidators)}}class me extends Mt{constructor(W,x,Z){super(Kr(x),xr(Z,x)),this.controls=W,this._initObservables(),this._setUpdateStrategy(x),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(W,x){return this.controls[W]?this.controls[W]:(this.controls[W]=x,x.setParent(this),x._registerOnCollectionChange(this._onCollectionChange),x)}addControl(W,x,Z={}){this.registerControl(W,x),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}removeControl(W,x={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],this.updateValueAndValidity({emitEvent:x.emitEvent}),this._onCollectionChange()}setControl(W,x,Z={}){this.controls[W]&&this.controls[W]._registerOnCollectionChange(()=>{}),delete this.controls[W],x&&this.registerControl(W,x),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}contains(W){return this.controls.hasOwnProperty(W)&&this.controls[W].enabled}setValue(W,x={}){Qe(this,0,W),Object.keys(W).forEach(Z=>{Ie(this,!0,Z),this.controls[Z].setValue(W[Z],{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x)}patchValue(W,x={}){null!=W&&(Object.keys(W).forEach(Z=>{const Ae=this.controls[Z];Ae&&Ae.patchValue(W[Z],{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x))}reset(W={},x={}){this._forEachChild((Z,Ae)=>{Z.reset(W?W[Ae]:null,{onlySelf:!0,emitEvent:x.emitEvent})}),this._updatePristine(x),this._updateTouched(x),this.updateValueAndValidity(x)}getRawValue(){return this._reduceChildren({},(W,x,Z)=>(W[Z]=x.getRawValue(),W))}_syncPendingControls(){let W=this._reduceChildren(!1,(x,Z)=>!!Z._syncPendingControls()||x);return W&&this.updateValueAndValidity({onlySelf:!0}),W}_forEachChild(W){Object.keys(this.controls).forEach(x=>{const Z=this.controls[x];Z&&W(Z,x)})}_setUpControls(){this._forEachChild(W=>{W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(W){for(const[x,Z]of Object.entries(this.controls))if(this.contains(x)&&W(Z))return!0;return!1}_reduceValue(){return this._reduceChildren({},(x,Z,Ae)=>((Z.enabled||this.disabled)&&(x[Ae]=Z.value),x))}_reduceChildren(W,x){let Z=W;return this._forEachChild((Ae,pn)=>{Z=x(Z,Ae,pn)}),Z}_allControlsDisabled(){for(const W of Object.keys(this.controls))if(this.controls[W].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(W){return this.controls.hasOwnProperty(W)?this.controls[W]:null}}class _e extends me{}const Vt=new _.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>En}),En="always";function Bn(H,W){return[...W.path,H]}function qn(H,W,x=En){$r(H,W),W.valueAccessor.writeValue(H.value),(H.disabled||"always"===x)&&W.valueAccessor.setDisabledState?.(H.disabled),function Ms(H,W){W.valueAccessor.registerOnChange(x=>{H._pendingValue=x,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&or(H,W)})}(H,W),function ss(H,W){const x=(Z,Ae)=>{W.valueAccessor.writeValue(Z),Ae&&W.viewToModelUpdate(Z)};H.registerOnChange(x),W._registerOnDestroy(()=>{H._unregisterOnChange(x)})}(H,W),function ls(H,W){W.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&or(H,W),"submit"!==H.updateOn&&H.markAsTouched()})}(H,W),function ke(H,W){if(W.valueAccessor.setDisabledState){const x=Z=>{W.valueAccessor.setDisabledState(Z)};H.registerOnDisabledChange(x),W._registerOnDestroy(()=>{H._unregisterOnDisabledChange(x)})}}(H,W)}function Sn(H,W,x=!0){const Z=()=>{};W.valueAccessor&&(W.valueAccessor.registerOnChange(Z),W.valueAccessor.registerOnTouched(Z)),Qr(H,W),H&&(W._invokeOnDestroyCallbacks(),H._registerOnCollectionChange(()=>{}))}function Wt(H,W){H.forEach(x=>{x.registerOnValidatorChange&&x.registerOnValidatorChange(W)})}function $r(H,W){const x=Je(H);null!==W.validator?H.setValidators(It(x,W.validator)):"function"==typeof x&&H.setValidators([x]);const Z=Kt(H);null!==W.asyncValidator?H.setAsyncValidators(It(Z,W.asyncValidator)):"function"==typeof Z&&H.setAsyncValidators([Z]);const Ae=()=>H.updateValueAndValidity();Wt(W._rawValidators,Ae),Wt(W._rawAsyncValidators,Ae)}function Qr(H,W){let x=!1;if(null!==H){if(null!==W.validator){const Ae=Je(H);if(Array.isArray(Ae)&&Ae.length>0){const pn=Ae.filter(Jn=>Jn!==W.validator);pn.length!==Ae.length&&(x=!0,H.setValidators(pn))}}if(null!==W.asyncValidator){const Ae=Kt(H);if(Array.isArray(Ae)&&Ae.length>0){const pn=Ae.filter(Jn=>Jn!==W.asyncValidator);pn.length!==Ae.length&&(x=!0,H.setAsyncValidators(pn))}}}const Z=()=>{};return Wt(W._rawValidators,Z),Wt(W._rawAsyncValidators,Z),x}function or(H,W){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),W.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function ve(H,W){if(!H.hasOwnProperty("model"))return!1;const x=H.model;return!!x.isFirstChange()||!Object.is(W,x.currentValue)}function Xe(H,W){if(!W)return null;let x,Z,Ae;return Array.isArray(W),W.forEach(pn=>{pn.constructor===nt?x=pn:function Ee(H){return Object.getPrototypeOf(H.constructor)===fe}(pn)?Z=pn:Ae=pn}),Ae||Z||x||null}function ii(H,W){const x=H.indexOf(W);x>-1&&H.splice(x,1)}function Er(H){return"object"==typeof H&&null!==H&&2===Object.keys(H).length&&"value"in H&&"disabled"in H}Promise.resolve();const ui=class extends Mt{constructor(W=null,x,Z){super(Kr(x),xr(Z,x)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(W),this._setUpdateStrategy(x),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ce(x)&&(x.nonNullable||x.initialValueIsDefault)&&(this.defaultValue=Er(W)?W.value:W)}setValue(W,x={}){this.value=this._pendingValue=W,this._onChange.length&&!1!==x.emitModelToViewChange&&this._onChange.forEach(Z=>Z(this.value,!1!==x.emitViewToModelChange)),this.updateValueAndValidity(x)}patchValue(W,x={}){this.setValue(W,x)}reset(W=this.defaultValue,x={}){this._applyFormState(W),this.markAsPristine(x),this.markAsUntouched(x),this.setValue(this.value,x),this._pendingChange=!1}_updateValue(){}_anyControls(W){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(W){this._onChange.push(W)}_unregisterOnChange(W){ii(this._onChange,W)}registerOnDisabledChange(W){this._onDisabledChange.push(W)}_unregisterOnDisabledChange(W){ii(this._onDisabledChange,W)}_forEachChild(W){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(W){Er(W)?(this.value=this._pendingValue=W.value,W.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=W}},Ei={provide:st,useExisting:(0,_.Rfq)(()=>ur)},On=Promise.resolve();let ur=(()=>{class H extends st{constructor(x,Z,Ae,pn,Jn,ys){super(),this._changeDetectorRef=Jn,this.callSetDisabledState=ys,this.control=new ui,this._registered=!1,this.name="",this.update=new _.bkB,this._parent=x,this._setValidators(Z),this._setAsyncValidators(Ae),this.valueAccessor=Xe(0,pn)}ngOnChanges(x){if(this._checkForErrors(),!this._registered||"name"in x){if(this._registered&&(this._checkName(),this.formDirective)){const Z=x.name.previousValue;this.formDirective.removeControl({name:Z,path:this._getPath(Z)})}this._setUpControl()}"isDisabled"in x&&this._updateDisabled(x),ve(x,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(x){this.viewModel=x,this.update.emit(x)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){qn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(x){On.then(()=>{this.control.setValue(x,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(x){const Z=x.isDisabled.currentValue,Ae=0!==Z&&(0,_.L39)(Z);On.then(()=>{Ae&&!this.control.disabled?this.control.disable():!Ae&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(x){return this._parent?Bn(x,this._parent):[x]}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(Ln,9),_.rXU(at,10),_.rXU(ot,10),_.rXU($e,10),_.rXU(_.gRc,8),_.rXU(Vt,8))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[_.Mj6.None,"disabled","isDisabled"],model:[_.Mj6.None,"ngModel","model"],options:[_.Mj6.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_.Jv_([Ei]),_.Vt3,_.OA$]})}return H})(),Vo=(()=>{class H{static#e=this.\u0275fac=function(Z){return new(Z||H)};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return H})();const vo={provide:$e,useExisting:(0,_.Rfq)(()=>xs),multi:!0};let xs=(()=>{class H extends fe{writeValue(x){this.setProperty("value",parseFloat(x))}registerOnChange(x){this.onChange=Z=>{x(""==Z?null:parseFloat(Z))}}static#e=this.\u0275fac=(()=>{let x;return function(Ae){return(x||(x=_.xGo(H)))(Ae||H)}})();static#t=this.\u0275dir=_.FsC({type:H,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(Z,Ae){1&Z&&_.bIt("change",function(Jn){return Ae.onChange(Jn.target.value)})("input",function(Jn){return Ae.onChange(Jn.target.value)})("blur",function(){return Ae.onTouched()})},features:[_.Jv_([vo]),_.Vt3]})}return H})();const wr=new _.nKC(""),da={provide:Ln,useExisting:(0,_.Rfq)(()=>Rs)};let Rs=(()=>{class H extends Ln{constructor(x,Z,Ae){super(),this.callSetDisabledState=Ae,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.bkB,this._setValidators(x),this._setAsyncValidators(Z)}ngOnChanges(x){this._checkFormPresent(),x.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(x){const Z=this.form.get(x.path);return qn(Z,x,this.callSetDisabledState),Z.updateValueAndValidity({emitEvent:!1}),this.directives.push(x),Z}getControl(x){return this.form.get(x.path)}removeControl(x){Sn(x.control||null,x,!1),function Xt(H,W){const x=H.indexOf(W);x>-1&&H.splice(x,1)}(this.directives,x)}addFormGroup(x){this._setUpFormContainer(x)}removeFormGroup(x){this._cleanUpFormContainer(x)}getFormGroup(x){return this.form.get(x.path)}addFormArray(x){this._setUpFormContainer(x)}removeFormArray(x){this._cleanUpFormContainer(x)}getFormArray(x){return this.form.get(x.path)}updateModel(x,Z){this.form.get(x.path).setValue(Z)}onSubmit(x){return this.submitted=!0,function ht(H,W){H._syncPendingControls(),W.forEach(x=>{const Z=x.control;"submit"===Z.updateOn&&Z._pendingChange&&(x.viewToModelUpdate(Z._pendingValue),Z._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(x),"dialog"===x?.target?.method}onReset(){this.resetForm()}resetForm(x=void 0){this.form.reset(x),this.submitted=!1}_updateDomValue(){this.directives.forEach(x=>{const Z=x.control,Ae=this.form.get(x.path);Z!==Ae&&(Sn(Z||null,x),(H=>H instanceof ui)(Ae)&&(qn(Ae,x,this.callSetDisabledState),x.control=Ae))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(x){const Z=this.form.get(x.path);(function Hi(H,W){$r(H,W)})(Z,x),Z.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(x){if(this.form){const Z=this.form.get(x.path);Z&&function ti(H,W){return Qr(H,W)}(Z,x)&&Z.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){$r(this.form,this),this._oldForm&&Qr(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(at,10),_.rXU(ot,10),_.rXU(Vt,8))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["","formGroup",""]],hostBindings:function(Z,Ae){1&Z&&_.bIt("submit",function(Jn){return Ae.onSubmit(Jn)})("reset",function(){return Ae.onReset()})},inputs:{form:[_.Mj6.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_.Jv_([da]),_.Vt3,_.OA$]})}return H})();const Qs={provide:st,useExisting:(0,_.Rfq)(()=>Xr)};let Xr=(()=>{class H extends st{set isDisabled(x){}static#e=this._ngModelWarningSentOnce=!1;constructor(x,Z,Ae,pn,Jn){super(),this._ngModelWarningConfig=Jn,this._added=!1,this.name=null,this.update=new _.bkB,this._ngModelWarningSent=!1,this._parent=x,this._setValidators(Z),this._setAsyncValidators(Ae),this.valueAccessor=Xe(0,pn)}ngOnChanges(x){this._added||this._setUpControl(),ve(x,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(x){this.viewModel=x,this.update.emit(x)}get path(){return Bn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(Ln,13),_.rXU(at,10),_.rXU(ot,10),_.rXU($e,10),_.rXU(wr,8))};static#n=this.\u0275dir=_.FsC({type:H,selectors:[["","formControlName",""]],inputs:{name:[_.Mj6.None,"formControlName","name"],isDisabled:[_.Mj6.None,"disabled","isDisabled"],model:[_.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[_.Jv_([Qs]),_.Vt3,_.OA$]})}return H})();const Uo={provide:$e,useExisting:(0,_.Rfq)(()=>ei),multi:!0};function hi(H,W){return null==H?`${W}`:(W&&"object"==typeof W&&(W="Object"),`${H}: ${W}`.slice(0,50))}let ei=(()=>{class H extends fe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(x){this._compareWith=x}writeValue(x){this.value=x;const Ae=hi(this._getOptionId(x),x);this.setProperty("value",Ae)}registerOnChange(x){this.onChange=Z=>{this.value=this._getOptionValue(Z),x(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(x){for(const Z of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Z),x))return Z;return null}_getOptionValue(x){const Z=function Hr(H){return H.split(":")[0]}(x);return this._optionMap.has(Z)?this._optionMap.get(Z):x}static#e=this.\u0275fac=(()=>{let x;return function(Ae){return(x||(x=_.xGo(H)))(Ae||H)}})();static#t=this.\u0275dir=_.FsC({type:H,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(Z,Ae){1&Z&&_.bIt("change",function(Jn){return Ae.onChange(Jn.target.value)})("blur",function(){return Ae.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.Jv_([Uo]),_.Vt3]})}return H})(),os=(()=>{class H{constructor(x,Z,Ae){this._element=x,this._renderer=Z,this._select=Ae,this._select&&(this.id=this._select._registerOption())}set ngValue(x){null!=this._select&&(this._select._optionMap.set(this.id,x),this._setElementValue(hi(this.id,x)),this._select.writeValue(this._select.value))}set value(x){this._setElementValue(x),this._select&&this._select.writeValue(this._select.value)}_setElementValue(x){this._renderer.setProperty(this._element.nativeElement,"value",x)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(_.aKT),_.rXU(_.sFG),_.rXU(ei,9))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return H})();const dn={provide:$e,useExisting:(0,_.Rfq)(()=>gs),multi:!0};function si(H,W){return null==H?`${W}`:("string"==typeof W&&(W=`'${W}'`),W&&"object"==typeof W&&(W="Object"),`${H}: ${W}`.slice(0,50))}let gs=(()=>{class H extends fe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(x){this._compareWith=x}writeValue(x){let Z;if(this.value=x,Array.isArray(x)){const Ae=x.map(pn=>this._getOptionId(pn));Z=(pn,Jn)=>{pn._setSelected(Ae.indexOf(Jn.toString())>-1)}}else Z=(Ae,pn)=>{Ae._setSelected(!1)};this._optionMap.forEach(Z)}registerOnChange(x){this.onChange=Z=>{const Ae=[],pn=Z.selectedOptions;if(void 0!==pn){const Jn=pn;for(let ys=0;ys<Jn.length;ys++){const fi=this._getOptionValue(Jn[ys].value);Ae.push(fi)}}else{const Jn=Z.options;for(let ys=0;ys<Jn.length;ys++){const Js=Jn[ys];if(Js.selected){const fi=this._getOptionValue(Js.value);Ae.push(fi)}}}this.value=Ae,x(Ae)}}_registerOption(x){const Z=(this._idCounter++).toString();return this._optionMap.set(Z,x),Z}_getOptionId(x){for(const Z of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Z)._value,x))return Z;return null}_getOptionValue(x){const Z=function ps(H){return H.split(":")[0]}(x);return this._optionMap.has(Z)?this._optionMap.get(Z)._value:x}static#e=this.\u0275fac=(()=>{let x;return function(Ae){return(x||(x=_.xGo(H)))(Ae||H)}})();static#t=this.\u0275dir=_.FsC({type:H,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(Z,Ae){1&Z&&_.bIt("change",function(Jn){return Ae.onChange(Jn.target)})("blur",function(){return Ae.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.Jv_([dn]),_.Vt3]})}return H})(),Xs=(()=>{class H{constructor(x,Z,Ae){this._element=x,this._renderer=Z,this._select=Ae,this._select&&(this.id=this._select._registerOption(this))}set ngValue(x){null!=this._select&&(this._value=x,this._setElementValue(si(this.id,x)),this._select.writeValue(this._select.value))}set value(x){this._select?(this._value=x,this._setElementValue(si(this.id,x)),this._select.writeValue(this._select.value)):this._setElementValue(x)}_setElementValue(x){this._renderer.setProperty(this._element.nativeElement,"value",x)}_setSelected(x){this._renderer.setProperty(this._element.nativeElement,"selected",x)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Z){return new(Z||H)(_.rXU(_.aKT),_.rXU(_.sFG),_.rXU(gs,9))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return H})(),wi=(()=>{class H{static#e=this.\u0275fac=function(Z){return new(Z||H)};static#t=this.\u0275mod=_.$C({type:H});static#n=this.\u0275inj=_.G2t({})}return H})();class yr extends Mt{constructor(W,x,Z){super(Kr(x),xr(Z,x)),this.controls=W,this._initObservables(),this._setUpdateStrategy(x),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(W){return this.controls[this._adjustIndex(W)]}push(W,x={}){this.controls.push(W),this._registerControl(W),this.updateValueAndValidity({emitEvent:x.emitEvent}),this._onCollectionChange()}insert(W,x,Z={}){this.controls.splice(W,0,x),this._registerControl(x),this.updateValueAndValidity({emitEvent:Z.emitEvent})}removeAt(W,x={}){let Z=this._adjustIndex(W);Z<0&&(Z=0),this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),this.controls.splice(Z,1),this.updateValueAndValidity({emitEvent:x.emitEvent})}setControl(W,x,Z={}){let Ae=this._adjustIndex(W);Ae<0&&(Ae=0),this.controls[Ae]&&this.controls[Ae]._registerOnCollectionChange(()=>{}),this.controls.splice(Ae,1),x&&(this.controls.splice(Ae,0,x),this._registerControl(x)),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(W,x={}){Qe(this,0,W),W.forEach((Z,Ae)=>{Ie(this,!1,Ae),this.at(Ae).setValue(Z,{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x)}patchValue(W,x={}){null!=W&&(W.forEach((Z,Ae)=>{this.at(Ae)&&this.at(Ae).patchValue(Z,{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x))}reset(W=[],x={}){this._forEachChild((Z,Ae)=>{Z.reset(W[Ae],{onlySelf:!0,emitEvent:x.emitEvent})}),this._updatePristine(x),this._updateTouched(x),this.updateValueAndValidity(x)}getRawValue(){return this.controls.map(W=>W.getRawValue())}clear(W={}){this.controls.length<1||(this._forEachChild(x=>x._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:W.emitEvent}))}_adjustIndex(W){return W<0?W+this.length:W}_syncPendingControls(){let W=this.controls.reduce((x,Z)=>!!Z._syncPendingControls()||x,!1);return W&&this.updateValueAndValidity({onlySelf:!0}),W}_forEachChild(W){this.controls.forEach((x,Z)=>{W(x,Z)})}_updateValue(){this.value=this.controls.filter(W=>W.enabled||this.disabled).map(W=>W.value)}_anyControls(W){return this.controls.some(x=>x.enabled&&W(x))}_setUpControls(){this._forEachChild(W=>this._registerControl(W))}_allControlsDisabled(){for(const W of this.controls)if(W.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(W){W.setParent(this),W._registerOnCollectionChange(this._onCollectionChange)}_find(W){return this.at(W)??null}}function Yr(H){return!!H&&(void 0!==H.asyncValidators||void 0!==H.validators||void 0!==H.updateOn)}let co=(()=>{class H{constructor(){this.useNonNullable=!1}get nonNullable(){const x=new H;return x.useNonNullable=!0,x}group(x,Z=null){const Ae=this._reduceControls(x);let pn={};return Yr(Z)?pn=Z:null!==Z&&(pn.validators=Z.validator,pn.asyncValidators=Z.asyncValidator),new me(Ae,pn)}record(x,Z=null){const Ae=this._reduceControls(x);return new _e(Ae,Z)}control(x,Z,Ae){let pn={};return this.useNonNullable?(Yr(Z)?pn=Z:(pn.validators=Z,pn.asyncValidators=Ae),new ui(x,{...pn,nonNullable:!0})):new ui(x,Z,Ae)}array(x,Z,Ae){const pn=x.map(Jn=>this._createControl(Jn));return new yr(pn,Z,Ae)}_reduceControls(x){const Z={};return Object.keys(x).forEach(Ae=>{Z[Ae]=this._createControl(x[Ae])}),Z}_createControl(x){return x instanceof ui||x instanceof Mt?x:Array.isArray(x)?this.control(x[0],x.length>1?x[1]:null,x.length>2?x[2]:null):this.control(x)}static#e=this.\u0275fac=function(Z){return new(Z||H)};static#t=this.\u0275prov=_.jDH({token:H,factory:H.\u0275fac,providedIn:"root"})}return H})(),Co=(()=>{class H{static withConfig(x){return{ngModule:H,providers:[{provide:Vt,useValue:x.callSetDisabledState??En}]}}static#e=this.\u0275fac=function(Z){return new(Z||H)};static#t=this.\u0275mod=_.$C({type:H});static#n=this.\u0275inj=_.G2t({imports:[wi]})}return H})(),xi=(()=>{class H{static withConfig(x){return{ngModule:H,providers:[{provide:wr,useValue:x.warnOnNgModelWithFormControl??"always"},{provide:Vt,useValue:x.callSetDisabledState??En}]}}static#e=this.\u0275fac=function(Z){return new(Z||H)};static#t=this.\u0275mod=_.$C({type:H});static#n=this.\u0275inj=_.G2t({imports:[wi]})}return H})()},345:(nn,We,k)=>{k.d(We,{B7:()=>Ue,Bb:()=>In,hE:()=>St,sG:()=>Cn});var _=k(4438),T=k(177);class R extends T.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class v extends R{static makeCurrent(){(0,T.ZD)(new v)}onAndCancel(Ce,Ie,Qe){return Ce.addEventListener(Ie,Qe),()=>{Ce.removeEventListener(Ie,Qe)}}dispatchEvent(Ce,Ie){Ce.dispatchEvent(Ie)}remove(Ce){Ce.parentNode&&Ce.parentNode.removeChild(Ce)}createElement(Ce,Ie){return(Ie=Ie||this.getDefaultDocument()).createElement(Ce)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ce){return Ce.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ce){return Ce instanceof DocumentFragment}getGlobalEventTarget(Ce,Ie){return"window"===Ie?window:"document"===Ie?Ce:"body"===Ie?Ce.body:null}getBaseHref(Ce){const Ie=function Se(){return re=re||document.querySelector("base"),re?re.getAttribute("href"):null}();return null==Ie?null:function fe(Ve){return new URL(Ve,document.baseURI).pathname}(Ie)}resetBaseElement(){re=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ce){return(0,T._b)(document.cookie,Ce)}}let re=null,Me=(()=>{class Ve{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Qe){return new(Qe||Ve)};static#t=this.\u0275prov=_.jDH({token:Ve,factory:Ve.\u0275fac})}return Ve})();const ye=new _.nKC("");let pe=(()=>{class Ve{constructor(Ie,Qe){this._zone=Qe,this._eventNameToPlugin=new Map,Ie.forEach(Mt=>{Mt.manager=this}),this._plugins=Ie.slice().reverse()}addEventListener(Ie,Qe,Mt){return this._findPluginFor(Qe).addEventListener(Ie,Qe,Mt)}getZone(){return this._zone}_findPluginFor(Ie){let Qe=this._eventNameToPlugin.get(Ie);if(Qe)return Qe;if(Qe=this._plugins.find(me=>me.supports(Ie)),!Qe)throw new _.wOt(5101,!1);return this._eventNameToPlugin.set(Ie,Qe),Qe}static#e=this.\u0275fac=function(Qe){return new(Qe||Ve)(_.KVO(ye),_.KVO(_.SKi))};static#t=this.\u0275prov=_.jDH({token:Ve,factory:Ve.\u0275fac})}return Ve})();class Ge{constructor(Ce){this._doc=Ce}}const it="ng-app-id";let nt=(()=>{class Ve{constructor(Ie,Qe,Mt,me={}){this.doc=Ie,this.appId=Qe,this.nonce=Mt,this.platformId=me,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,T.Vy)(me),this.resetHostNodes()}addStyles(Ie){for(const Qe of Ie)1===this.changeUsageCount(Qe,1)&&this.onStyleAdded(Qe)}removeStyles(Ie){for(const Qe of Ie)this.changeUsageCount(Qe,-1)<=0&&this.onStyleRemoved(Qe)}ngOnDestroy(){const Ie=this.styleNodesInDOM;Ie&&(Ie.forEach(Qe=>Qe.remove()),Ie.clear());for(const Qe of this.getAllStyles())this.onStyleRemoved(Qe);this.resetHostNodes()}addHost(Ie){this.hostNodes.add(Ie);for(const Qe of this.getAllStyles())this.addStyleToHost(Ie,Qe)}removeHost(Ie){this.hostNodes.delete(Ie)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Ie){for(const Qe of this.hostNodes)this.addStyleToHost(Qe,Ie)}onStyleRemoved(Ie){const Qe=this.styleRef;Qe.get(Ie)?.elements?.forEach(Mt=>Mt.remove()),Qe.delete(Ie)}collectServerRenderedStyles(){const Ie=this.doc.head?.querySelectorAll(`style[${it}="${this.appId}"]`);if(Ie?.length){const Qe=new Map;return Ie.forEach(Mt=>{null!=Mt.textContent&&Qe.set(Mt.textContent,Mt)}),Qe}return null}changeUsageCount(Ie,Qe){const Mt=this.styleRef;if(Mt.has(Ie)){const me=Mt.get(Ie);return me.usage+=Qe,me.usage}return Mt.set(Ie,{usage:Qe,elements:[]}),Qe}getStyleElement(Ie,Qe){const Mt=this.styleNodesInDOM,me=Mt?.get(Qe);if(me?.parentNode===Ie)return Mt.delete(Qe),me.removeAttribute(it),me;{const q=this.doc.createElement("style");return this.nonce&&q.setAttribute("nonce",this.nonce),q.textContent=Qe,this.platformIsServer&&q.setAttribute(it,this.appId),Ie.appendChild(q),q}}addStyleToHost(Ie,Qe){const Mt=this.getStyleElement(Ie,Qe),me=this.styleRef,q=me.get(Qe)?.elements;q?q.push(Mt):me.set(Qe,{elements:[Mt],usage:1})}resetHostNodes(){const Ie=this.hostNodes;Ie.clear(),Ie.add(this.doc.head)}static#e=this.\u0275fac=function(Qe){return new(Qe||Ve)(_.KVO(T.qQ),_.KVO(_.sZ2),_.KVO(_.BIS,8),_.KVO(_.Agw))};static#t=this.\u0275prov=_.jDH({token:Ve,factory:Ve.\u0275fac})}return Ve})();const De={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ct=/%COMP%/g,ae=new _.nKC("",{providedIn:"root",factory:()=>!0});function je(Ve,Ce){return Ce.map(Ie=>Ie.replace(ct,Ve))}let Ue=(()=>{class Ve{constructor(Ie,Qe,Mt,me,q,J,se,_e=null){this.eventManager=Ie,this.sharedStylesHost=Qe,this.appId=Mt,this.removeStylesOnCompDestroy=me,this.doc=q,this.platformId=J,this.ngZone=se,this.nonce=_e,this.rendererByCompId=new Map,this.platformIsServer=(0,T.Vy)(J),this.defaultRenderer=new Oe(Ie,q,se,this.platformIsServer)}createRenderer(Ie,Qe){if(!Ie||!Qe)return this.defaultRenderer;this.platformIsServer&&Qe.encapsulation===_.gXe.ShadowDom&&(Qe={...Qe,encapsulation:_.gXe.Emulated});const Mt=this.getOrCreateRenderer(Ie,Qe);return Mt instanceof ln?Mt.applyToHost(Ie):Mt instanceof jt&&Mt.applyStyles(),Mt}getOrCreateRenderer(Ie,Qe){const Mt=this.rendererByCompId;let me=Mt.get(Qe.id);if(!me){const q=this.doc,J=this.ngZone,se=this.eventManager,_e=this.sharedStylesHost,Tt=this.removeStylesOnCompDestroy,Vt=this.platformIsServer;switch(Qe.encapsulation){case _.gXe.Emulated:me=new ln(se,_e,Qe,this.appId,Tt,q,J,Vt);break;case _.gXe.ShadowDom:return new un(se,_e,Ie,Qe,q,J,this.nonce,Vt);default:me=new jt(se,_e,Qe,Tt,q,J,Vt)}Mt.set(Qe.id,me)}return me}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Qe){return new(Qe||Ve)(_.KVO(pe),_.KVO(nt),_.KVO(_.sZ2),_.KVO(ae),_.KVO(T.qQ),_.KVO(_.Agw),_.KVO(_.SKi),_.KVO(_.BIS))};static#t=this.\u0275prov=_.jDH({token:Ve,factory:Ve.\u0275fac})}return Ve})();class Oe{constructor(Ce,Ie,Qe,Mt){this.eventManager=Ce,this.doc=Ie,this.ngZone=Qe,this.platformIsServer=Mt,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(Ce,Ie){return Ie?this.doc.createElementNS(De[Ie]||Ie,Ce):this.doc.createElement(Ce)}createComment(Ce){return this.doc.createComment(Ce)}createText(Ce){return this.doc.createTextNode(Ce)}appendChild(Ce,Ie){(xt(Ce)?Ce.content:Ce).appendChild(Ie)}insertBefore(Ce,Ie,Qe){Ce&&(xt(Ce)?Ce.content:Ce).insertBefore(Ie,Qe)}removeChild(Ce,Ie){Ce&&Ce.removeChild(Ie)}selectRootElement(Ce,Ie){let Qe="string"==typeof Ce?this.doc.querySelector(Ce):Ce;if(!Qe)throw new _.wOt(-5104,!1);return Ie||(Qe.textContent=""),Qe}parentNode(Ce){return Ce.parentNode}nextSibling(Ce){return Ce.nextSibling}setAttribute(Ce,Ie,Qe,Mt){if(Mt){Ie=Mt+":"+Ie;const me=De[Mt];me?Ce.setAttributeNS(me,Ie,Qe):Ce.setAttribute(Ie,Qe)}else Ce.setAttribute(Ie,Qe)}removeAttribute(Ce,Ie,Qe){if(Qe){const Mt=De[Qe];Mt?Ce.removeAttributeNS(Mt,Ie):Ce.removeAttribute(`${Qe}:${Ie}`)}else Ce.removeAttribute(Ie)}addClass(Ce,Ie){Ce.classList.add(Ie)}removeClass(Ce,Ie){Ce.classList.remove(Ie)}setStyle(Ce,Ie,Qe,Mt){Mt&(_.czy.DashCase|_.czy.Important)?Ce.style.setProperty(Ie,Qe,Mt&_.czy.Important?"important":""):Ce.style[Ie]=Qe}removeStyle(Ce,Ie,Qe){Qe&_.czy.DashCase?Ce.style.removeProperty(Ie):Ce.style[Ie]=""}setProperty(Ce,Ie,Qe){null!=Ce&&(Ce[Ie]=Qe)}setValue(Ce,Ie){Ce.nodeValue=Ie}listen(Ce,Ie,Qe){if("string"==typeof Ce&&!(Ce=(0,T.QT)().getGlobalEventTarget(this.doc,Ce)))throw new Error(`Unsupported event target ${Ce} for event ${Ie}`);return this.eventManager.addEventListener(Ce,Ie,this.decoratePreventDefault(Qe))}decoratePreventDefault(Ce){return Ie=>{if("__ngUnwrap__"===Ie)return Ce;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Ce(Ie)):Ce(Ie))&&Ie.preventDefault()}}}function xt(Ve){return"TEMPLATE"===Ve.tagName&&void 0!==Ve.content}class un extends Oe{constructor(Ce,Ie,Qe,Mt,me,q,J,se){super(Ce,me,q,se),this.sharedStylesHost=Ie,this.hostEl=Qe,this.shadowRoot=Qe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const _e=je(Mt.id,Mt.styles);for(const Tt of _e){const Vt=document.createElement("style");J&&Vt.setAttribute("nonce",J),Vt.textContent=Tt,this.shadowRoot.appendChild(Vt)}}nodeOrShadowRoot(Ce){return Ce===this.hostEl?this.shadowRoot:Ce}appendChild(Ce,Ie){return super.appendChild(this.nodeOrShadowRoot(Ce),Ie)}insertBefore(Ce,Ie,Qe){return super.insertBefore(this.nodeOrShadowRoot(Ce),Ie,Qe)}removeChild(Ce,Ie){return super.removeChild(this.nodeOrShadowRoot(Ce),Ie)}parentNode(Ce){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ce)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class jt extends Oe{constructor(Ce,Ie,Qe,Mt,me,q,J,se){super(Ce,me,q,J),this.sharedStylesHost=Ie,this.removeStylesOnCompDestroy=Mt,this.styles=se?je(se,Qe.styles):Qe.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class ln extends jt{constructor(Ce,Ie,Qe,Mt,me,q,J,se){const _e=Mt+"-"+Qe.id;super(Ce,Ie,Qe,me,q,J,se,_e),this.contentAttr=function we(Ve){return"_ngcontent-%COMP%".replace(ct,Ve)}(_e),this.hostAttr=function ie(Ve){return"_nghost-%COMP%".replace(ct,Ve)}(_e)}applyToHost(Ce){this.applyStyles(),this.setAttribute(Ce,this.hostAttr,"")}createElement(Ce,Ie){const Qe=super.createElement(Ce,Ie);return super.setAttribute(Qe,this.contentAttr,""),Qe}}let Lt=(()=>{class Ve extends Ge{constructor(Ie){super(Ie)}supports(Ie){return!0}addEventListener(Ie,Qe,Mt){return Ie.addEventListener(Qe,Mt,!1),()=>this.removeEventListener(Ie,Qe,Mt)}removeEventListener(Ie,Qe,Mt){return Ie.removeEventListener(Qe,Mt)}static#e=this.\u0275fac=function(Qe){return new(Qe||Ve)(_.KVO(T.qQ))};static#t=this.\u0275prov=_.jDH({token:Ve,factory:Ve.\u0275fac})}return Ve})();const ut=["alt","control","meta","shift"],rn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Re={alt:Ve=>Ve.altKey,control:Ve=>Ve.ctrlKey,meta:Ve=>Ve.metaKey,shift:Ve=>Ve.shiftKey};let qe=(()=>{class Ve extends Ge{constructor(Ie){super(Ie)}supports(Ie){return null!=Ve.parseEventName(Ie)}addEventListener(Ie,Qe,Mt){const me=Ve.parseEventName(Qe),q=Ve.eventCallback(me.fullKey,Mt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.QT)().onAndCancel(Ie,me.domEventName,q))}static parseEventName(Ie){const Qe=Ie.toLowerCase().split("."),Mt=Qe.shift();if(0===Qe.length||"keydown"!==Mt&&"keyup"!==Mt)return null;const me=Ve._normalizeKey(Qe.pop());let q="",J=Qe.indexOf("code");if(J>-1&&(Qe.splice(J,1),q="code."),ut.forEach(_e=>{const Tt=Qe.indexOf(_e);Tt>-1&&(Qe.splice(Tt,1),q+=_e+".")}),q+=me,0!=Qe.length||0===me.length)return null;const se={};return se.domEventName=Mt,se.fullKey=q,se}static matchEventFullKeyCode(Ie,Qe){let Mt=rn[Ie.key]||Ie.key,me="";return Qe.indexOf("code.")>-1&&(Mt=Ie.code,me="code."),!(null==Mt||!Mt)&&(Mt=Mt.toLowerCase()," "===Mt?Mt="space":"."===Mt&&(Mt="dot"),ut.forEach(q=>{q!==Mt&&(0,Re[q])(Ie)&&(me+=q+".")}),me+=Mt,me===Qe)}static eventCallback(Ie,Qe,Mt){return me=>{Ve.matchEventFullKeyCode(me,Ie)&&Mt.runGuarded(()=>Qe(me))}}static _normalizeKey(Ie){return"esc"===Ie?"escape":Ie}static#e=this.\u0275fac=function(Qe){return new(Qe||Ve)(_.KVO(T.qQ))};static#t=this.\u0275prov=_.jDH({token:Ve,factory:Ve.\u0275fac})}return Ve})();const Cn=(0,_.oH4)(_.fpN,"browser",[{provide:_.Agw,useValue:T.AJ},{provide:_.PLl,useValue:function Kt(){v.makeCurrent()},multi:!0},{provide:T.qQ,useFactory:function tn(){return(0,_.TL$)(document),document},deps:[]}]),Dn=new _.nKC(""),Ln=[{provide:_.e01,useClass:class $e{addToWindow(Ce){_.JZv.getAngularTestability=(Qe,Mt=!0)=>{const me=Ce.findTestabilityInTree(Qe,Mt);if(null==me)throw new _.wOt(5103,!1);return me},_.JZv.getAllAngularTestabilities=()=>Ce.getAllTestabilities(),_.JZv.getAllAngularRootElements=()=>Ce.getAllRootElements(),_.JZv.frameworkStabilizers||(_.JZv.frameworkStabilizers=[]),_.JZv.frameworkStabilizers.push(Qe=>{const Mt=_.JZv.getAllAngularTestabilities();let me=Mt.length;const q=function(){me--,0==me&&Qe()};Mt.forEach(J=>{J.whenStable(q)})})}findTestabilityInTree(Ce,Ie,Qe){return null==Ie?null:Ce.getTestability(Ie)??(Qe?(0,T.QT)().isShadowRoot(Ie)?this.findTestabilityInTree(Ce,Ie.host,!0):this.findTestabilityInTree(Ce,Ie.parentElement,!0):null)}},deps:[]},{provide:_.WHO,useClass:_.NYb,deps:[_.SKi,_.giA,_.e01]},{provide:_.NYb,useClass:_.NYb,deps:[_.SKi,_.giA,_.e01]}],st=[{provide:_.H8p,useValue:"root"},{provide:_.zcH,useFactory:function gn(){return new _.zcH},deps:[]},{provide:ye,useClass:Lt,multi:!0,deps:[T.qQ,_.SKi,_.Agw]},{provide:ye,useClass:qe,multi:!0,deps:[T.qQ]},Ue,nt,pe,{provide:_._9s,useExisting:Ue},{provide:T.N0,useClass:Me,deps:[]},[]];let In=(()=>{class Ve{constructor(Ie){}static withServerTransition(Ie){return{ngModule:Ve,providers:[{provide:_.sZ2,useValue:Ie.appId}]}}static#e=this.\u0275fac=function(Qe){return new(Qe||Ve)(_.KVO(Dn,12))};static#t=this.\u0275mod=_.$C({type:Ve});static#n=this.\u0275inj=_.G2t({providers:[...st,...Ln],imports:[T.MD,_.Hbi]})}return Ve})(),St=(()=>{class Ve{constructor(Ie){this._doc=Ie}getTitle(){return this._doc.title}setTitle(Ie){this._doc.title=Ie||""}static#e=this.\u0275fac=function(Qe){return new(Qe||Ve)(_.KVO(T.qQ))};static#t=this.\u0275prov=_.jDH({token:Ve,factory:Ve.\u0275fac,providedIn:"root"})}return Ve})()},4454:(nn,We,k)=>{k.d(We,{nX:()=>si,Ix:()=>zr,Wk:()=>Go,iI:()=>ja,n3:()=>ts});var _=k(467),T=k(4438),R=k(1985),v=k(8071),Se=k(8455),fe=k(7673),$e=k(4412),Me=k(3073),ye=k(3669),pe=k(6450),Ge=k(9326),it=k(8496),nt=k(4360),De=k(5225);function ct(...E){const M=(0,Ge.lI)(E),w=(0,Ge.ms)(E),{args:O,keys:j}=(0,Me.D)(E);if(0===O.length)return(0,Se.H)([],M);const ee=new R.c(function at(E,M,w=ye.D){return O=>{ot(M,()=>{const{length:j}=E,ee=new Array(j);let Te=j,Dt=j;for(let pt=0;pt<j;pt++)ot(M,()=>{const _n=(0,Se.H)(E[pt],M);let er=!1;_n.subscribe((0,nt._)(O,dr=>{ee[pt]=dr,er||(er=!0,Dt--),Dt||O.next(w(ee.slice()))},()=>{--Te||O.complete()}))},O)},O)}}(O,M,j?Te=>(0,it.e)(j,Te):ye.D));return w?ee.pipe((0,pe.I)(w)):ee}function ot(E,M,w){E?(0,De.N)(w,E,M):M()}var At=k(9350),$t=k(8793),ae=k(8750);function we(E){return new R.c(M=>{(0,ae.Tg)(E()).subscribe(M)})}var ie=k(1203);function je(E,M){const w=(0,v.T)(E)?E:()=>E,O=j=>j.error(w());return new R.c(M?j=>M.schedule(O,0,j):O)}var Ue=k(983),Oe=k(8359),ce=k(9974);function xe(){return(0,ce.N)((E,M)=>{let w=null;E._refCount++;const O=(0,nt._)(M,void 0,void 0,void 0,()=>{if(!E||E._refCount<=0||0<--E._refCount)return void(w=null);const j=E._connection,ee=w;w=null,j&&(!ee||j===ee)&&j.unsubscribe(),M.unsubscribe()});E.subscribe(O),O.closed||(w=E.connect())})}class xt extends R.c{constructor(M,w){super(),this.source=M,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,ce.S)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,M?.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new Oe.yU;const w=this.getSubject();M.add(this.source.subscribe((0,nt._)(w,void 0,()=>{this._teardown(),w.complete()},O=>{this._teardown(),w.error(O)},()=>this._teardown()))),M.closed&&(this._connection=null,M=Oe.yU.EMPTY)}return M}refCount(){return xe()(this)}}var un=k(1413),jt=k(177),ln=k(6354),Lt=k(5558),ut=k(6697),rn=k(9172),Re=k(5964),qe=k(1397),ft=k(1594),yt=k(274),It=k(8141),Je=k(9437),Kt=k(2816),gn=k(9901);function tn(E){return E<=0?()=>Ue.w:(0,ce.N)((M,w)=>{let O=[];M.subscribe((0,nt._)(w,j=>{O.push(j),E<O.length&&O.shift()},()=>{for(const j of O)w.next(j);w.complete()},void 0,()=>{O=null}))})}var sn=k(3774),Ln=k(980),st=k(5343),Kn=k(6365),sr=k(345);const St="primary",_t=Symbol("RouteTitle");class Zr{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const w=this.params[M];return Array.isArray(w)?w[0]:w}return null}getAll(M){if(this.has(M)){const w=this.params[M];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function Nt(E){return new Zr(E)}function tt(E,M,w){const O=w.path.split("/");if(O.length>E.length||"full"===w.pathMatch&&(M.hasChildren()||O.length<E.length))return null;const j={};for(let ee=0;ee<O.length;ee++){const Te=O[ee],Dt=E[ee];if(Te.startsWith(":"))j[Te.substring(1)]=Dt;else if(Te!==Dt.path)return null}return{consumed:E.slice(0,O.length),posParams:j}}function Yn(E,M){const w=E?tr(E):void 0,O=M?tr(M):void 0;if(!w||!O||w.length!=O.length)return!1;let j;for(let ee=0;ee<w.length;ee++)if(j=w[ee],!An(E[j],M[j]))return!1;return!0}function tr(E){return[...Object.keys(E),...Object.getOwnPropertySymbols(E)]}function An(E,M){if(Array.isArray(E)&&Array.isArray(M)){if(E.length!==M.length)return!1;const w=[...E].sort(),O=[...M].sort();return w.every((j,ee)=>O[ee]===j)}return E===M}function bn(E){return E.length>0?E[E.length-1]:null}function kr(E){return function re(E){return!!E&&(E instanceof R.c||(0,v.T)(E.lift)&&(0,v.T)(E.subscribe))}(E)?E:(0,T.jNT)(E)?(0,Se.H)(Promise.resolve(E)):(0,fe.of)(E)}const Wr={exact:function hs(E,M,w){if(!Rn(E.segments,M.segments)||!Un(E.segments,M.segments,w)||E.numberOfChildren!==M.numberOfChildren)return!1;for(const O in M.children)if(!E.children[O]||!hs(E.children[O],M.children[O],w))return!1;return!0},subset:Li},jr={exact:function Or(E,M){return Yn(E,M)},subset:function Nn(E,M){return Object.keys(M).length<=Object.keys(E).length&&Object.keys(M).every(w=>An(E[w],M[w]))},ignored:()=>!0};function Vi(E,M,w){return Wr[w.paths](E.root,M.root,w.matrixParams)&&jr[w.queryParams](E.queryParams,M.queryParams)&&!("exact"===w.fragment&&E.fragment!==M.fragment)}function Li(E,M,w){return zt(E,M,M.segments,w)}function zt(E,M,w,O){if(E.segments.length>w.length){const j=E.segments.slice(0,w.length);return!(!Rn(j,w)||M.hasChildren()||!Un(j,w,O))}if(E.segments.length===w.length){if(!Rn(E.segments,w)||!Un(E.segments,w,O))return!1;for(const j in M.children)if(!E.children[j]||!Li(E.children[j],M.children[j],O))return!1;return!0}{const j=w.slice(0,E.segments.length),ee=w.slice(E.segments.length);return!!(Rn(E.segments,j)&&Un(E.segments,j,O)&&E.children[St])&&zt(E.children[St],M,ee,O)}}function Un(E,M,w){return M.every((O,j)=>jr[w](E[j].parameters,O.parameters))}class Nr{constructor(M=new Jt([],{}),w={},O=null){this.root=M,this.queryParams=w,this.fragment=O}get queryParamMap(){return this._queryParamMap??=Nt(this.queryParams),this._queryParamMap}toString(){return Ie.serialize(this)}}class Jt{constructor(M,w){this.segments=M,this.children=w,this.parent=null,Object.values(w).forEach(O=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qe(this)}}class Zt{constructor(M,w){this.path=M,this.parameters=w}get parameterMap(){return this._parameterMap??=Nt(this.parameters),this._parameterMap}toString(){return Vt(this)}}function Rn(E,M){return E.length===M.length&&E.every((w,O)=>w.path===M[O].path)}let Ve=(()=>{class E{static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:()=>new Ce,providedIn:"root"})}return E})();class Ce{parse(M){const w=new or(M);return new Nr(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(M){const w=`/${Mt(M.root,!0)}`,O=function Bn(E){const M=Object.entries(E).map(([w,O])=>Array.isArray(O)?O.map(j=>`${q(w)}=${q(j)}`).join("&"):`${q(w)}=${q(O)}`).filter(w=>w);return M.length?`?${M.join("&")}`:""}(M.queryParams);return`${w}${O}${"string"==typeof M.fragment?`#${function J(E){return encodeURI(E)}(M.fragment)}`:""}`}}const Ie=new Ce;function Qe(E){return E.segments.map(M=>Vt(M)).join("/")}function Mt(E,M){if(!E.hasChildren())return Qe(E);if(M){const w=E.children[St]?Mt(E.children[St],!1):"",O=[];return Object.entries(E.children).forEach(([j,ee])=>{j!==St&&O.push(`${j}:${Mt(ee,!1)}`)}),O.length>0?`${w}(${O.join("//")})`:w}{const w=function xr(E,M){let w=[];return Object.entries(E.children).forEach(([O,j])=>{O===St&&(w=w.concat(M(j,O)))}),Object.entries(E.children).forEach(([O,j])=>{O!==St&&(w=w.concat(M(j,O)))}),w}(E,(O,j)=>j===St?[Mt(E.children[St],!1)]:[`${j}:${Mt(O,!1)}`]);return 1===Object.keys(E.children).length&&null!=E.children[St]?`${Qe(E)}/${w[0]}`:`${Qe(E)}/(${w.join("//")})`}}function me(E){return encodeURIComponent(E).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function q(E){return me(E).replace(/%3B/gi,";")}function se(E){return me(E).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _e(E){return decodeURIComponent(E)}function Tt(E){return _e(E.replace(/\+/g,"%20"))}function Vt(E){return`${se(E.path)}${function En(E){return Object.entries(E).map(([M,w])=>`;${se(M)}=${se(w)}`).join("")}(E.parameters)}`}const qn=/^[^\/()?;#]+/;function Sn(E){const M=E.match(qn);return M?M[0]:""}const Wt=/^[^\/()?;=#]+/,$r=/^[^=?&#]+/,Ms=/^[^&#]+/;class or{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(M.length>0||Object.keys(w).length>0)&&(O[St]=new Jt(M,w)),O}parseSegment(){const M=Sn(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new T.wOt(4009,!1);return this.capture(M),new Zt(_e(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const w=function ke(E){const M=E.match(Wt);return M?M[0]:""}(this.remaining);if(!w)return;this.capture(w);let O="";if(this.consumeOptional("=")){const j=Sn(this.remaining);j&&(O=j,this.capture(O))}M[_e(w)]=_e(O)}parseQueryParam(M){const w=function Qr(E){const M=E.match($r);return M?M[0]:""}(this.remaining);if(!w)return;this.capture(w);let O="";if(this.consumeOptional("=")){const Te=function ls(E){const M=E.match(Ms);return M?M[0]:""}(this.remaining);Te&&(O=Te,this.capture(O))}const j=Tt(w),ee=Tt(O);if(M.hasOwnProperty(j)){let Te=M[j];Array.isArray(Te)||(Te=[Te],M[j]=Te),Te.push(ee)}else M[j]=ee}parseParens(M){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=Sn(this.remaining),j=this.remaining[O.length];if("/"!==j&&")"!==j&&";"!==j)throw new T.wOt(4010,!1);let ee;O.indexOf(":")>-1?(ee=O.slice(0,O.indexOf(":")),this.capture(ee),this.capture(":")):M&&(ee=St);const Te=this.parseChildren();w[ee]=1===Object.keys(Te).length?Te[St]:new Jt([],Te),this.consumeOptional("//")}return w}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new T.wOt(4011,!1)}}function ss(E){return E.segments.length>0?new Jt([],{[St]:E}):E}function Hi(E){const M={};for(const[O,j]of Object.entries(E.children)){const ee=Hi(j);if(O===St&&0===ee.segments.length&&ee.hasChildren())for(const[Te,Dt]of Object.entries(ee.children))M[Te]=Dt;else(ee.segments.length>0||ee.hasChildren())&&(M[O]=ee)}return function ti(E){if(1===E.numberOfChildren&&E.children[St]){const M=E.children[St];return new Jt(E.segments.concat(M.segments),M.children)}return E}(new Jt(E.segments,M))}function vt(E){return E instanceof Nr}function kt(E){let M;const j=ss(function w(ee){const Te={};for(const pt of ee.children){const _n=w(pt);Te[pt.outlet]=_n}const Dt=new Jt(ee.url,Te);return ee===E&&(M=Dt),Dt}(E.root));return M??j}function an(E,M,w,O){let j=E;for(;j.parent;)j=j.parent;if(0===M.length)return Ee(j,j,j,w,O);const ee=function Xt(E){if("string"==typeof E[0]&&1===E.length&&"/"===E[0])return new Xe(!0,0,E);let M=0,w=!1;const O=E.reduce((j,ee,Te)=>{if("object"==typeof ee&&null!=ee){if(ee.outlets){const Dt={};return Object.entries(ee.outlets).forEach(([pt,_n])=>{Dt[pt]="string"==typeof _n?_n.split("/"):_n}),[...j,{outlets:Dt}]}if(ee.segmentPath)return[...j,ee.segmentPath]}return"string"!=typeof ee?[...j,ee]:0===Te?(ee.split("/").forEach((Dt,pt)=>{0==pt&&"."===Dt||(0==pt&&""===Dt?w=!0:".."===Dt?M++:""!=Dt&&j.push(Dt))}),j):[...j,ee]},[]);return new Xe(w,M,O)}(M);if(ee.toRoot())return Ee(j,j,new Jt([],{}),w,O);const Te=function Mn(E,M,w){if(E.isAbsolute)return new Bt(M,!0,0);if(!w)return new Bt(M,!1,NaN);if(null===w.parent)return new Bt(w,!0,0);const O=te(E.commands[0])?0:1;return function wn(E,M,w){let O=E,j=M,ee=w;for(;ee>j;){if(ee-=j,O=O.parent,!O)throw new T.wOt(4005,!1);j=O.segments.length}return new Bt(O,!1,j-ee)}(w,w.segments.length-1+O,E.numberOfDoubleDots)}(ee,j,E),Dt=Te.processChildren?Er(Te.segmentGroup,Te.index,ee.commands):ii(Te.segmentGroup,Te.index,ee.commands);return Ee(j,Te.segmentGroup,Dt,w,O)}function te(E){return"object"==typeof E&&null!=E&&!E.outlets&&!E.segmentPath}function ve(E){return"object"==typeof E&&null!=E&&E.outlets}function Ee(E,M,w,O,j){let Te,ee={};O&&Object.entries(O).forEach(([pt,_n])=>{ee[pt]=Array.isArray(_n)?_n.map(er=>`${er}`):`${_n}`}),Te=E===M?w:ht(E,M,w);const Dt=ss(Hi(Te));return new Nr(Dt,ee,j)}function ht(E,M,w){const O={};return Object.entries(E.children).forEach(([j,ee])=>{O[j]=ee===M?w:ht(ee,M,w)}),new Jt(E.segments,O)}class Xe{constructor(M,w,O){if(this.isAbsolute=M,this.numberOfDoubleDots=w,this.commands=O,M&&O.length>0&&te(O[0]))throw new T.wOt(4003,!1);const j=O.find(ve);if(j&&j!==bn(O))throw new T.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Bt{constructor(M,w,O){this.segmentGroup=M,this.processChildren=w,this.index=O}}function ii(E,M,w){if(E??=new Jt([],{}),0===E.segments.length&&E.hasChildren())return Er(E,M,w);const O=function ui(E,M,w){let O=0,j=M;const ee={match:!1,pathIndex:0,commandIndex:0};for(;j<E.segments.length;){if(O>=w.length)return ee;const Te=E.segments[j],Dt=w[O];if(ve(Dt))break;const pt=`${Dt}`,_n=O<w.length-1?w[O+1]:null;if(j>0&&void 0===pt)break;if(pt&&_n&&"object"==typeof _n&&void 0===_n.outlets){if(!Dr(pt,_n,Te))return ee;O+=2}else{if(!Dr(pt,{},Te))return ee;O++}j++}return{match:!0,pathIndex:j,commandIndex:O}}(E,M,w),j=w.slice(O.commandIndex);if(O.match&&O.pathIndex<E.segments.length){const ee=new Jt(E.segments.slice(0,O.pathIndex),{});return ee.children[St]=new Jt(E.segments.slice(O.pathIndex),E.children),Er(ee,0,j)}return O.match&&0===j.length?new Jt(E.segments,{}):O.match&&!E.hasChildren()?qr(E,M,w):O.match?Er(E,0,j):qr(E,M,w)}function Er(E,M,w){if(0===w.length)return new Jt(E.segments,{});{const O=function Sr(E){return ve(E[0])?E[0].outlets:{[St]:E}}(w),j={};if(Object.keys(O).some(ee=>ee!==St)&&E.children[St]&&1===E.numberOfChildren&&0===E.children[St].segments.length){const ee=Er(E.children[St],M,w);return new Jt(E.segments,ee.children)}return Object.entries(O).forEach(([ee,Te])=>{"string"==typeof Te&&(Te=[Te]),null!==Te&&(j[ee]=ii(E.children[ee],M,Te))}),Object.entries(E.children).forEach(([ee,Te])=>{void 0===O[ee]&&(j[ee]=Te)}),new Jt(E.segments,j)}}function qr(E,M,w){const O=E.segments.slice(0,M);let j=0;for(;j<w.length;){const ee=w[j];if(ve(ee)){const pt=Si(ee.outlets);return new Jt(O,pt)}if(0===j&&te(w[0])){O.push(new Zt(E.segments[M].path,Ir(w[0]))),j++;continue}const Te=ve(ee)?ee.outlets[St]:`${ee}`,Dt=j<w.length-1?w[j+1]:null;Te&&Dt&&te(Dt)?(O.push(new Zt(Te,Ir(Dt))),j+=2):(O.push(new Zt(Te,{})),j++)}return new Jt(O,{})}function Si(E){const M={};return Object.entries(E).forEach(([w,O])=>{"string"==typeof O&&(O=[O]),null!==O&&(M[w]=qr(new Jt([],{}),0,O))}),M}function Ir(E){const M={};return Object.entries(E).forEach(([w,O])=>M[w]=`${O}`),M}function Dr(E,M,w){return E==w.path&&Yn(M,w.parameters)}const li="imperative";var nr=function(E){return E[E.NavigationStart=0]="NavigationStart",E[E.NavigationEnd=1]="NavigationEnd",E[E.NavigationCancel=2]="NavigationCancel",E[E.NavigationError=3]="NavigationError",E[E.RoutesRecognized=4]="RoutesRecognized",E[E.ResolveStart=5]="ResolveStart",E[E.ResolveEnd=6]="ResolveEnd",E[E.GuardsCheckStart=7]="GuardsCheckStart",E[E.GuardsCheckEnd=8]="GuardsCheckEnd",E[E.RouteConfigLoadStart=9]="RouteConfigLoadStart",E[E.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",E[E.ChildActivationStart=11]="ChildActivationStart",E[E.ChildActivationEnd=12]="ChildActivationEnd",E[E.ActivationStart=13]="ActivationStart",E[E.ActivationEnd=14]="ActivationEnd",E[E.Scroll=15]="Scroll",E[E.NavigationSkipped=16]="NavigationSkipped",E}(nr||{});class Fr{constructor(M,w){this.id=M,this.url=w}}class di extends Fr{constructor(M,w,O="imperative",j=null){super(M,w),this.type=nr.NavigationStart,this.navigationTrigger=O,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vi extends Fr{constructor(M,w,O){super(M,w),this.urlAfterRedirects=O,this.type=nr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Ei=function(E){return E[E.Redirect=0]="Redirect",E[E.SupersededByNewNavigation=1]="SupersededByNewNavigation",E[E.NoDataFromResolver=2]="NoDataFromResolver",E[E.GuardRejected=3]="GuardRejected",E}(Ei||{}),On=function(E){return E[E.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",E[E.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",E}(On||{});class ur extends Fr{constructor(M,w,O,j){super(M,w),this.reason=O,this.code=j,this.type=nr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Vo extends Fr{constructor(M,w,O,j){super(M,w),this.reason=O,this.code=j,this.type=nr.NavigationSkipped}}class Gi extends Fr{constructor(M,w,O,j){super(M,w),this.error=O,this.target=j,this.type=nr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oo extends Fr{constructor(M,w,O,j){super(M,w),this.urlAfterRedirects=O,this.state=j,this.type=nr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yo extends Fr{constructor(M,w,O,j){super(M,w),this.urlAfterRedirects=O,this.state=j,this.type=nr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class la extends Fr{constructor(M,w,O,j,ee){super(M,w),this.urlAfterRedirects=O,this.state=j,this.shouldActivate=ee,this.type=nr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yo extends Fr{constructor(M,w,O,j){super(M,w),this.urlAfterRedirects=O,this.state=j,this.type=nr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rr extends Fr{constructor(M,w,O,j){super(M,w),this.urlAfterRedirects=O,this.state=j,this.type=nr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vo{constructor(M){this.route=M,this.type=nr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xs{constructor(M){this.route=M,this.type=nr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wr{constructor(M){this.snapshot=M,this.type=nr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lo{constructor(M){this.snapshot=M,this.type=nr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qs{constructor(M){this.snapshot=M,this.type=nr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class da{constructor(M){this.snapshot=M,this.type=nr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rs{constructor(M,w,O){this.routerEvent=M,this.position=w,this.anchor=O,this.type=nr.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Pr{}class Ui{constructor(M){this.url=M}}class Cr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new fs,this.attachRef=null}}let fs=(()=>{class E{constructor(){this.contexts=new Map}onChildOutletCreated(w,O){const j=this.getOrCreateContext(w);j.outlet=O,this.contexts.set(w,j)}onChildOutletDestroyed(w){const O=this.getContext(w);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let O=this.getContext(w);return O||(O=new Cr,this.contexts.set(w,O)),O}getContext(w){return this.contexts.get(w)||null}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();class Qs{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const w=this.pathFromRoot(M);return w.length>1?w[w.length-2]:null}children(M){const w=Xr(M,this._root);return w?w.children.map(O=>O.value):[]}firstChild(M){const w=Xr(M,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(M){const w=Uo(M,this._root);return w.length<2?[]:w[w.length-2].children.map(j=>j.value).filter(j=>j!==M)}pathFromRoot(M){return Uo(M,this._root).map(w=>w.value)}}function Xr(E,M){if(E===M.value)return M;for(const w of M.children){const O=Xr(E,w);if(O)return O}return null}function Uo(E,M){if(E===M.value)return[M];for(const w of M.children){const O=Uo(E,w);if(O.length)return O.unshift(M),O}return[]}class hi{constructor(M,w){this.value=M,this.children=w}toString(){return`TreeNode(${this.value})`}}function Hr(E){const M={};return E&&E.children.forEach(w=>M[w.value.outlet]=w),M}class ei extends Qs{constructor(M,w){super(M),this.snapshot=w,Xs(this,M)}toString(){return this.snapshot.toString()}}function os(E){const M=function dn(E){const ee=new ks([],{},{},"",{},St,E,null,{});return new gs("",new hi(ee,[]))}(E),w=new $e.t([new Zt("",{})]),O=new $e.t({}),j=new $e.t({}),ee=new $e.t({}),Te=new $e.t(""),Dt=new si(w,O,ee,Te,j,St,E,M.root);return Dt.snapshot=M.root,new ei(new hi(Dt,[]),M)}class si{constructor(M,w,O,j,ee,Te,Dt,pt){this.urlSubject=M,this.paramsSubject=w,this.queryParamsSubject=O,this.fragmentSubject=j,this.dataSubject=ee,this.outlet=Te,this.component=Dt,this._futureSnapshot=pt,this.title=this.dataSubject?.pipe((0,ln.T)(_n=>_n[_t]))??(0,fe.of)(void 0),this.url=M,this.params=w,this.queryParams=O,this.fragment=j,this.data=ee}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,ln.T)(M=>Nt(M))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,ln.T)(M=>Nt(M))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ps(E,M,w="emptyOnly"){let O;const{routeConfig:j}=E;return O=null===M||"always"!==w&&""!==j?.path&&(M.component||M.routeConfig?.loadComponent)?{params:{...E.params},data:{...E.data},resolve:{...E.data,...E._resolvedData??{}}}:{params:{...M.params,...E.params},data:{...M.data,...E.data},resolve:{...E.data,...M.data,...j?.data,...E._resolvedData}},j&&Bi(j)&&(O.resolve[_t]=j.title),O}class ks{get title(){return this.data?.[_t]}constructor(M,w,O,j,ee,Te,Dt,pt,_n){this.url=M,this.params=w,this.queryParams=O,this.fragment=j,this.data=ee,this.outlet=Te,this.component=Dt,this.routeConfig=pt,this._resolve=_n}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Nt(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Nt(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gs extends Qs{constructor(M,w){super(w),this.url=M,Xs(this,w)}toString(){return Pi(this._root)}}function Xs(E,M){M.value._routerState=E,M.children.forEach(w=>Xs(E,w))}function Pi(E){const M=E.children.length>0?` { ${E.children.map(Pi).join(", ")} } `:"";return`${E.value}${M}`}function es(E){if(E.snapshot){const M=E.snapshot,w=E._futureSnapshot;E.snapshot=w,Yn(M.queryParams,w.queryParams)||E.queryParamsSubject.next(w.queryParams),M.fragment!==w.fragment&&E.fragmentSubject.next(w.fragment),Yn(M.params,w.params)||E.paramsSubject.next(w.params),function Rt(E,M){if(E.length!==M.length)return!1;for(let w=0;w<E.length;++w)if(!Yn(E[w],M[w]))return!1;return!0}(M.url,w.url)||E.urlSubject.next(w.url),Yn(M.data,w.data)||E.dataSubject.next(w.data)}else E.snapshot=E._futureSnapshot,E.dataSubject.next(E._futureSnapshot.data)}function zi(E,M){const w=Yn(E.params,M.params)&&function Kr(E,M){return Rn(E,M)&&E.every((w,O)=>Yn(w.parameters,M[O].parameters))}(E.url,M.url);return w&&!(!E.parent!=!M.parent)&&(!E.parent||zi(E.parent,M.parent))}function Bi(E){return"string"==typeof E.title||null===E.title}let ts=(()=>{class E{constructor(){this.activated=null,this._activatedRoute=null,this.name=St,this.activateEvents=new T.bkB,this.deactivateEvents=new T.bkB,this.attachEvents=new T.bkB,this.detachEvents=new T.bkB,this.parentContexts=(0,T.WQX)(fs),this.location=(0,T.WQX)(T.c1b),this.changeDetector=(0,T.WQX)(T.gRc),this.environmentInjector=(0,T.WQX)(T.uvJ),this.inputBinder=(0,T.WQX)(ji,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(w){if(w.name){const{firstChange:O,previousValue:j}=w.name;if(O)return;this.isTrackedInParentContexts(j)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(j)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(w){return this.parentContexts.getContext(w)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);w?.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T.wOt(4012,!1);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,O){this.activated=w,this._activatedRoute=O,this.location.insert(w.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,O){if(this.isActivated)throw new T.wOt(4013,!1);this._activatedRoute=w;const j=this.location,Te=w.snapshot.component,Dt=this.parentContexts.getOrCreateContext(this.name).children,pt=new Fs(w,Dt,j.injector);this.activated=j.createComponent(Te,{index:j.length,injector:pt,environmentInjector:O??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275dir=T.FsC({type:E,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[T.OA$]})}return E})();class Fs{__ngOutletInjector(M){return new Fs(this.route,this.childContexts,M)}constructor(M,w,O){this.route=M,this.childContexts=w,this.parent=O}get(M,w){return M===si?this.route:M===fs?this.childContexts:this.parent.get(M,w)}}const ji=new T.nKC("");let Bo=(()=>{class E{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(w){this.unsubscribeFromRouteData(w),this.subscribeToRouteData(w)}unsubscribeFromRouteData(w){this.outletDataSubscriptions.get(w)?.unsubscribe(),this.outletDataSubscriptions.delete(w)}subscribeToRouteData(w){const{activatedRoute:O}=w,j=ct([O.queryParams,O.params,O.data]).pipe((0,Lt.n)(([ee,Te,Dt],pt)=>(Dt={...ee,...Te,...Dt},0===pt?(0,fe.of)(Dt):Promise.resolve(Dt)))).subscribe(ee=>{if(!w.isActivated||!w.activatedComponentRef||w.activatedRoute!==O||null===O.component)return void this.unsubscribeFromRouteData(w);const Te=(0,T.HJs)(O.component);if(Te)for(const{templateName:Dt}of Te.inputs)w.activatedComponentRef.setInput(Dt,ee[Dt]);else this.unsubscribeFromRouteData(w)});this.outletDataSubscriptions.set(w,j)}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac})}return E})();function Mi(E,M,w){if(w&&E.shouldReuseRoute(M.value,w.value.snapshot)){const O=w.value;O._futureSnapshot=M.value;const j=function Eo(E,M,w){return M.children.map(O=>{for(const j of w.children)if(E.shouldReuseRoute(O.value,j.value.snapshot))return Mi(E,O,j);return Mi(E,O)})}(E,M,w);return new hi(O,j)}{if(E.shouldAttach(M.value)){const ee=E.retrieve(M.value);if(null!==ee){const Te=ee.route;return Te.value._futureSnapshot=M.value,Te.children=M.children.map(Dt=>Mi(E,Dt)),Te}}const O=function ao(E){return new si(new $e.t(E.url),new $e.t(E.params),new $e.t(E.queryParams),new $e.t(E.fragment),new $e.t(E.data),E.outlet,E.component,E)}(M.value),j=M.children.map(ee=>Mi(E,ee));return new hi(O,j)}}const $i="ngNavigationCancelingError";function ms(E,M){const{redirectTo:w,navigationBehaviorOptions:O}=vt(M)?{redirectTo:M,navigationBehaviorOptions:void 0}:M,j=Vs(!1,Ei.Redirect);return j.url=w,j.navigationBehaviorOptions=O,j}function Vs(E,M){const w=new Error(`NavigationCancelingError: ${E||""}`);return w[$i]=!0,w.cancellationCode=M,w}function Ys(E){return!!E&&E[$i]}let Wi=(()=>{class E{static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275cmp=T.VBU({type:E,selectors:[["ng-component"]],standalone:!0,features:[T.aNF],decls:1,vars:0,template:function(O,j){1&O&&T.nrm(0,"router-outlet")},dependencies:[ts],encapsulation:2})}return E})();function co(E){const M=E.children&&E.children.map(co),w=M?{...E,children:M}:{...E};return!w.component&&!w.loadComponent&&(M||w.loadChildren)&&w.outlet&&w.outlet!==St&&(w.component=Wi),w}function ar(E){return E.outlet||St}function _s(E){if(!E)return null;if(E.routeConfig?._injector)return E.routeConfig._injector;for(let M=E.parent;M;M=M.parent){const w=M.routeConfig;if(w?._loadedInjector)return w._loadedInjector;if(w?._injector)return w._injector}return null}class H{constructor(M,w,O,j,ee){this.routeReuseStrategy=M,this.futureState=w,this.currState=O,this.forwardEvent=j,this.inputBindingEnabled=ee}activate(M){const w=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,O,M),es(this.futureState.root),this.activateChildRoutes(w,O,M)}deactivateChildRoutes(M,w,O){const j=Hr(w);M.children.forEach(ee=>{const Te=ee.value.outlet;this.deactivateRoutes(ee,j[Te],O),delete j[Te]}),Object.values(j).forEach(ee=>{this.deactivateRouteAndItsChildren(ee,O)})}deactivateRoutes(M,w,O){const j=M.value,ee=w?w.value:null;if(j===ee)if(j.component){const Te=O.getContext(j.outlet);Te&&this.deactivateChildRoutes(M,w,Te.children)}else this.deactivateChildRoutes(M,w,O);else ee&&this.deactivateRouteAndItsChildren(w,O)}deactivateRouteAndItsChildren(M,w){M.value.component&&this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,w):this.deactivateRouteAndOutlet(M,w)}detachAndStoreRouteSubtree(M,w){const O=w.getContext(M.value.outlet),j=O&&M.value.component?O.children:w,ee=Hr(M);for(const Te of Object.values(ee))this.deactivateRouteAndItsChildren(Te,j);if(O&&O.outlet){const Te=O.outlet.detach(),Dt=O.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:Te,route:M,contexts:Dt})}}deactivateRouteAndOutlet(M,w){const O=w.getContext(M.value.outlet),j=O&&M.value.component?O.children:w,ee=Hr(M);for(const Te of Object.values(ee))this.deactivateRouteAndItsChildren(Te,j);O&&(O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated()),O.attachRef=null,O.route=null)}activateChildRoutes(M,w,O){const j=Hr(w);M.children.forEach(ee=>{this.activateRoutes(ee,j[ee.value.outlet],O),this.forwardEvent(new da(ee.value.snapshot))}),M.children.length&&this.forwardEvent(new Lo(M.value.snapshot))}activateRoutes(M,w,O){const j=M.value,ee=w?w.value:null;if(es(j),j===ee)if(j.component){const Te=O.getOrCreateContext(j.outlet);this.activateChildRoutes(M,w,Te.children)}else this.activateChildRoutes(M,w,O);else if(j.component){const Te=O.getOrCreateContext(j.outlet);if(this.routeReuseStrategy.shouldAttach(j.snapshot)){const Dt=this.routeReuseStrategy.retrieve(j.snapshot);this.routeReuseStrategy.store(j.snapshot,null),Te.children.onOutletReAttached(Dt.contexts),Te.attachRef=Dt.componentRef,Te.route=Dt.route.value,Te.outlet&&Te.outlet.attach(Dt.componentRef,Dt.route.value),es(Dt.route.value),this.activateChildRoutes(M,null,Te.children)}else{const Dt=_s(j.snapshot);Te.attachRef=null,Te.route=j,Te.injector=Dt,Te.outlet&&Te.outlet.activateWith(j,Te.injector),this.activateChildRoutes(M,null,Te.children)}}else this.activateChildRoutes(M,null,O)}}class W{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class x{constructor(M,w){this.component=M,this.route=w}}function Z(E,M,w){const O=E._root;return Jn(O,M?M._root:null,w,[O.value])}function pn(E,M){const w=Symbol(),O=M.get(E,w);return O===w?"function"!=typeof E||(0,T.LfX)(E)?M.get(E):E:O}function Jn(E,M,w,O,j={canDeactivateChecks:[],canActivateChecks:[]}){const ee=Hr(M);return E.children.forEach(Te=>{(function ys(E,M,w,O,j={canDeactivateChecks:[],canActivateChecks:[]}){const ee=E.value,Te=M?M.value:null,Dt=w?w.getContext(E.value.outlet):null;if(Te&&ee.routeConfig===Te.routeConfig){const pt=function Js(E,M,w){if("function"==typeof w)return w(E,M);switch(w){case"pathParamsChange":return!Rn(E.url,M.url);case"pathParamsOrQueryParamsChange":return!Rn(E.url,M.url)||!Yn(E.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zi(E,M)||!Yn(E.queryParams,M.queryParams);default:return!zi(E,M)}}(Te,ee,ee.routeConfig.runGuardsAndResolvers);pt?j.canActivateChecks.push(new W(O)):(ee.data=Te.data,ee._resolvedData=Te._resolvedData),Jn(E,M,ee.component?Dt?Dt.children:null:w,O,j),pt&&Dt&&Dt.outlet&&Dt.outlet.isActivated&&j.canDeactivateChecks.push(new x(Dt.outlet.component,Te))}else Te&&fi(M,Dt,j),j.canActivateChecks.push(new W(O)),Jn(E,null,ee.component?Dt?Dt.children:null:w,O,j)})(Te,ee[Te.value.outlet],w,O.concat([Te.value]),j),delete ee[Te.value.outlet]}),Object.entries(ee).forEach(([Te,Dt])=>fi(Dt,w.getContext(Te),j)),j}function fi(E,M,w){const O=Hr(E),j=E.value;Object.entries(O).forEach(([ee,Te])=>{fi(Te,j.component?M?M.children.getContext(ee):null:M,w)}),w.canDeactivateChecks.push(new x(j.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,j))}function Ts(E){return"function"==typeof E}function Va(E){return E instanceof At.G||"EmptyError"===E?.name}const La=Symbol("INITIAL_VALUE");function Zs(){return(0,Lt.n)(E=>ct(E.map(M=>M.pipe((0,ut.s)(1),(0,rn.Z)(La)))).pipe((0,ln.T)(M=>{for(const w of M)if(!0!==w){if(w===La)return La;if(!1===w||w instanceof Nr)return w}return!0}),(0,Re.p)(M=>M!==La),(0,ut.s)(1)))}function ni(E){return(0,ie.F)((0,It.M)(M=>{if(vt(M))throw ms(0,M)}),(0,ln.T)(M=>!0===M))}class Oi{constructor(M){this.segmentGroup=M||null}}class ma extends Error{constructor(M){super(),this.urlTree=M}}function vs(E){return je(new Oi(E))}class Do{constructor(M,w){this.urlSerializer=M,this.urlTree=w}lineralizeSegments(M,w){let O=[],j=w.root;for(;;){if(O=O.concat(j.segments),0===j.numberOfChildren)return(0,fe.of)(O);if(j.numberOfChildren>1||!j.children[St])return je(new T.wOt(4e3,!1));j=j.children[St]}}applyRedirectCommands(M,w,O){const j=this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),M,O);if(w.startsWith("/"))throw new ma(j);return j}applyRedirectCreateUrlTree(M,w,O,j){const ee=this.createSegmentGroup(M,w.root,O,j);return new Nr(ee,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(M,w){const O={};return Object.entries(M).forEach(([j,ee])=>{if("string"==typeof ee&&ee.startsWith(":")){const Dt=ee.substring(1);O[j]=w[Dt]}else O[j]=ee}),O}createSegmentGroup(M,w,O,j){const ee=this.createSegments(M,w.segments,O,j);let Te={};return Object.entries(w.children).forEach(([Dt,pt])=>{Te[Dt]=this.createSegmentGroup(M,pt,O,j)}),new Jt(ee,Te)}createSegments(M,w,O,j){return w.map(ee=>ee.path.startsWith(":")?this.findPosParam(M,ee,j):this.findOrReturn(ee,O))}findPosParam(M,w,O){const j=O[w.path.substring(1)];if(!j)throw new T.wOt(4001,!1);return j}findOrReturn(M,w){let O=0;for(const j of w){if(j.path===M.path)return w.splice(O),j;O++}return M}}const Ao={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Y(E,M,w,O,j){const ee=C(E,M,w);return ee.matched?(O=function Ls(E,M){return E.providers&&!E._injector&&(E._injector=(0,T.Ol2)(E.providers,M,`Route: ${E.path}`)),E._injector??M}(M,O),function Ri(E,M,w,O){const j=M.canMatch;if(!j||0===j.length)return(0,fe.of)(!0);const ee=j.map(Te=>{const Dt=pn(Te,E);return kr(function pa(E){return E&&Ts(E.canMatch)}(Dt)?Dt.canMatch(M,w):(0,T.N4e)(E,()=>Dt(M,w)))});return(0,fe.of)(ee).pipe(Zs(),ni())}(O,M,w).pipe((0,ln.T)(Te=>!0===Te?ee:{...Ao}))):(0,fe.of)(ee)}function C(E,M,w){if("**"===M.path)return function D(E){return{matched:!0,parameters:E.length>0?bn(E).parameters:{},consumedSegments:E,remainingSegments:[],positionalParamSegments:{}}}(w);if(""===M.path)return"full"===M.pathMatch&&(E.hasChildren()||w.length>0)?{...Ao}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const j=(M.matcher||tt)(w,E,M);if(!j)return{...Ao};const ee={};Object.entries(j.posParams??{}).forEach(([Dt,pt])=>{ee[Dt]=pt.path});const Te=j.consumed.length>0?{...ee,...j.consumed[j.consumed.length-1].parameters}:ee;return{matched:!0,consumedSegments:j.consumed,remainingSegments:w.slice(j.consumed.length),parameters:Te,positionalParamSegments:j.posParams??{}}}function L(E,M,w,O){return w.length>0&&function Pe(E,M,w){return w.some(O=>Et(E,M,O)&&ar(O)!==St)}(E,w,O)?{segmentGroup:new Jt(M,he(O,new Jt(w,E.children))),slicedSegments:[]}:0===w.length&&function Le(E,M,w){return w.some(O=>Et(E,M,O))}(E,w,O)?{segmentGroup:new Jt(E.segments,K(E,w,O,E.children)),slicedSegments:w}:{segmentGroup:new Jt(E.segments,E.children),slicedSegments:w}}function K(E,M,w,O){const j={};for(const ee of w)if(Et(E,M,ee)&&!O[ar(ee)]){const Te=new Jt([],{});j[ar(ee)]=Te}return{...O,...j}}function he(E,M){const w={};w[St]=M;for(const O of E)if(""===O.path&&ar(O)!==St){const j=new Jt([],{});w[ar(O)]=j}return w}function Et(E,M,w){return(!(E.hasChildren()||M.length>0)||"full"!==w.pathMatch)&&""===w.path}class hn{}class Fn{constructor(M,w,O,j,ee,Te,Dt){this.injector=M,this.configLoader=w,this.rootComponentType=O,this.config=j,this.urlTree=ee,this.paramsInheritanceStrategy=Te,this.urlSerializer=Dt,this.applyRedirects=new Do(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(M){return new T.wOt(4002,`'${M.segmentGroup}'`)}recognize(){const M=L(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(M).pipe((0,ln.T)(w=>{const O=new ks([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},St,this.rootComponentType,null,{}),j=new hi(O,w),ee=new gs("",j),Te=function Ye(E,M,w=null,O=null){return an(kt(E),M,w,O)}(O,[],this.urlTree.queryParams,this.urlTree.fragment);return Te.queryParams=this.urlTree.queryParams,ee.url=this.urlSerializer.serialize(Te),this.inheritParamsAndData(ee._root,null),{state:ee,tree:Te}}))}match(M){return this.processSegmentGroup(this.injector,this.config,M,St).pipe((0,Je.W)(O=>{if(O instanceof ma)return this.urlTree=O.urlTree,this.match(O.urlTree.root);throw O instanceof Oi?this.noMatchError(O):O}))}inheritParamsAndData(M,w){const O=M.value,j=ps(O,w,this.paramsInheritanceStrategy);O.params=Object.freeze(j.params),O.data=Object.freeze(j.data),M.children.forEach(ee=>this.inheritParamsAndData(ee,O))}processSegmentGroup(M,w,O,j){return 0===O.segments.length&&O.hasChildren()?this.processChildren(M,w,O):this.processSegment(M,w,O,O.segments,j,!0).pipe((0,ln.T)(ee=>ee instanceof hi?[ee]:[]))}processChildren(M,w,O){const j=[];for(const ee of Object.keys(O.children))"primary"===ee?j.unshift(ee):j.push(ee);return(0,Se.H)(j).pipe((0,yt.H)(ee=>{const Te=O.children[ee],Dt=function ds(E,M){const w=E.filter(O=>ar(O)===M);return w.push(...E.filter(O=>ar(O)!==M)),w}(w,ee);return this.processSegmentGroup(M,Dt,Te,ee)}),(0,Kt.S)((ee,Te)=>(ee.push(...Te),ee)),(0,gn.U)(null),function Cn(E,M){const w=arguments.length>=2;return O=>O.pipe(E?(0,Re.p)((j,ee)=>E(j,ee,O)):ye.D,tn(1),w?(0,gn.U)(M):(0,sn.v)(()=>new At.G))}(),(0,qe.Z)(ee=>{if(null===ee)return vs(O);const Te=oi(ee);return function Hn(E){E.sort((M,w)=>M.value.outlet===St?-1:w.value.outlet===St?1:M.value.outlet.localeCompare(w.value.outlet))}(Te),(0,fe.of)(Te)}))}processSegment(M,w,O,j,ee,Te){return(0,Se.H)(w).pipe((0,yt.H)(Dt=>this.processSegmentAgainstRoute(Dt._injector??M,w,Dt,O,j,ee,Te).pipe((0,Je.W)(pt=>{if(pt instanceof Oi)return(0,fe.of)(null);throw pt}))),(0,ft.$)(Dt=>!!Dt),(0,Je.W)(Dt=>{if(Va(Dt))return function mn(E,M,w){return 0===M.length&&!E.children[w]}(O,j,ee)?(0,fe.of)(new hn):vs(O);throw Dt}))}processSegmentAgainstRoute(M,w,O,j,ee,Te,Dt){return function Ct(E,M,w,O){return!!(ar(E)===O||O!==St&&Et(M,w,E))&&C(M,E,w).matched}(O,j,ee,Te)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(M,j,O,ee,Te):this.allowRedirects&&Dt?this.expandSegmentAgainstRouteUsingRedirect(M,j,w,O,ee,Te):vs(j):vs(j)}expandSegmentAgainstRouteUsingRedirect(M,w,O,j,ee,Te){const{matched:Dt,consumedSegments:pt,positionalParamSegments:_n,remainingSegments:er}=C(w,j,ee);if(!Dt)return vs(w);j.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const dr=this.applyRedirects.applyRedirectCommands(pt,j.redirectTo,_n);return this.applyRedirects.lineralizeSegments(j,dr).pipe((0,qe.Z)(Fi=>this.processSegment(M,O,w,Fi.concat(er),Te,!1)))}matchSegmentAgainstRoute(M,w,O,j,ee){const Te=Y(w,O,j,M);return"**"===O.path&&(w.children={}),Te.pipe((0,Lt.n)(Dt=>Dt.matched?this.getChildConfig(M=O._injector??M,O,j).pipe((0,Lt.n)(({routes:pt})=>{const _n=O._loadedInjector??M,{consumedSegments:er,remainingSegments:dr,parameters:Fi}=Dt,Ac=new ks(er,Fi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Es(E){return E.data||{}}(O),ar(O),O.component??O._loadedComponent??null,O,function ki(E){return E.resolve||{}}(O)),{segmentGroup:ra,slicedSegments:ho}=L(w,er,dr,pt);if(0===ho.length&&ra.hasChildren())return this.processChildren(_n,pt,ra).pipe((0,ln.T)(Wo=>null===Wo?null:new hi(Ac,Wo)));if(0===pt.length&&0===ho.length)return(0,fe.of)(new hi(Ac,[]));const js=ar(O)===ee;return this.processSegment(_n,pt,ra,ho,js?St:ee,!0).pipe((0,ln.T)(Wo=>new hi(Ac,Wo instanceof hi?[Wo]:[])))})):vs(w)))}getChildConfig(M,w,O){return w.children?(0,fe.of)({routes:w.children,injector:M}):w.loadChildren?void 0!==w._loadedRoutes?(0,fe.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function Gr(E,M,w,O){const j=M.canLoad;if(void 0===j||0===j.length)return(0,fe.of)(!0);const ee=j.map(Te=>{const Dt=pn(Te,E);return kr(function jo(E){return E&&Ts(E.canLoad)}(Dt)?Dt.canLoad(M,w):(0,T.N4e)(E,()=>Dt(M,w)))});return(0,fe.of)(ee).pipe(Zs(),ni())}(M,w,O).pipe((0,qe.Z)(j=>j?this.configLoader.loadChildren(M,w).pipe((0,It.M)(ee=>{w._loadedRoutes=ee.routes,w._loadedInjector=ee.injector})):function Tc(E){return je(Vs(!1,Ei.GuardRejected))}())):(0,fe.of)({routes:[],injector:M})}}function Tr(E){const M=E.value.routeConfig;return M&&""===M.path}function oi(E){const M=[],w=new Set;for(const O of E){if(!Tr(O)){M.push(O);continue}const j=M.find(ee=>O.value.routeConfig===ee.value.routeConfig);void 0!==j?(j.children.push(...O.children),w.add(j)):M.push(O)}for(const O of w){const j=oi(O.children);M.push(new hi(O.value,j))}return M.filter(O=>!w.has(O))}function as(E){const M=E.children.map(w=>as(w)).flat();return[E,...M]}function eo(E){return(0,Lt.n)(M=>{const w=E(M);return w?(0,Se.H)(w).pipe((0,ln.T)(()=>M)):(0,fe.of)(M)})}let qi=(()=>{class E{buildTitle(w){let O,j=w.root;for(;void 0!==j;)O=this.getResolvedTitleForRoute(j)??O,j=j.children.find(ee=>ee.outlet===St);return O}getResolvedTitleForRoute(w){return w.data[_t]}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:()=>(0,T.WQX)(Os),providedIn:"root"})}return E})(),Os=(()=>{class E extends qi{constructor(w){super(),this.title=w}updateTitle(w){const O=this.buildTitle(w);void 0!==O&&this.title.setTitle(O)}static#e=this.\u0275fac=function(O){return new(O||E)(T.KVO(sr.hE))};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const P=new T.nKC("",{providedIn:"root",factory:()=>({})}),X=new T.nKC("");let N=(()=>{class E{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,T.WQX)(T.Ql9)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,fe.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const O=kr(w.loadComponent()).pipe((0,ln.T)(Ze),(0,It.M)(ee=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=ee}),(0,Ln.j)(()=>{this.componentLoaders.delete(w)})),j=new xt(O,()=>new un.B).pipe(xe());return this.componentLoaders.set(w,j),j}loadChildren(w,O){if(this.childrenLoaders.get(O))return this.childrenLoaders.get(O);if(O._loadedRoutes)return(0,fe.of)({routes:O._loadedRoutes,injector:O._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(O);const ee=function B(E,M,w,O){return kr(E.loadChildren()).pipe((0,ln.T)(Ze),(0,qe.Z)(j=>j instanceof T.Co$||Array.isArray(j)?(0,fe.of)(j):(0,Se.H)(M.compileModuleAsync(j))),(0,ln.T)(j=>{O&&O(E);let ee,Te,Dt=!1;return Array.isArray(j)?(Te=j,!0):(ee=j.create(w).injector,Te=ee.get(X,[],{optional:!0,self:!0}).flat()),{routes:Te.map(co),injector:ee}}))}(O,this.compiler,w,this.onLoadEndListener).pipe((0,Ln.j)(()=>{this.childrenLoaders.delete(O)})),Te=new xt(ee,()=>new un.B).pipe(xe());return this.childrenLoaders.set(O,Te),Te}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function Ze(E){return function de(E){return E&&"object"==typeof E&&"default"in E}(E)?E.default:E}let Pt=(()=>{class E{static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:()=>(0,T.WQX)(fn),providedIn:"root"})}return E})(),fn=(()=>{class E{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,O){return w}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const mr=new T.nKC(""),xn=new T.nKC("");function Gn(E,M,w){const O=E.get(xn),j=E.get(jt.qQ);return E.get(T.SKi).runOutsideAngular(()=>{if(!j.startViewTransition||O.skipNextTransition)return O.skipNextTransition=!1,new Promise(_n=>setTimeout(_n));let ee;const Te=new Promise(_n=>{ee=_n}),Dt=j.startViewTransition(()=>(ee(),function fr(E){return new Promise(M=>{(0,T.mal)(M,{injector:E})})}(E))),{onViewTransitionCreated:pt}=O;return pt&&(0,T.N4e)(E,()=>pt({transition:Dt,from:M,to:w})),Te})}let ri=(()=>{class E{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new un.B,this.transitionAbortSubject=new un.B,this.configLoader=(0,T.WQX)(N),this.environmentInjector=(0,T.WQX)(T.uvJ),this.urlSerializer=(0,T.WQX)(Ve),this.rootContexts=(0,T.WQX)(fs),this.location=(0,T.WQX)(jt.aZ),this.inputBindingEnabled=null!==(0,T.WQX)(ji,{optional:!0}),this.titleStrategy=(0,T.WQX)(qi),this.options=(0,T.WQX)(P,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,T.WQX)(Pt),this.createViewTransition=(0,T.WQX)(mr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,fe.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=j=>this.events.next(new xs(j)),this.configLoader.onLoadStartListener=j=>this.events.next(new vo(j))}complete(){this.transitions?.complete()}handleNavigationRequest(w){const O=++this.navigationId;this.transitions?.next({...this.transitions.value,...w,id:O})}setupNavigations(w,O,j){return this.transitions=new $e.t({id:0,currentUrlTree:O,currentRawUrl:O,extractedUrl:this.urlHandlingStrategy.extract(O),urlAfterRedirects:this.urlHandlingStrategy.extract(O),rawUrl:O,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:li,restoredState:null,currentSnapshot:j.snapshot,targetSnapshot:null,currentRouterState:j,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Re.p)(ee=>0!==ee.id),(0,ln.T)(ee=>({...ee,extractedUrl:this.urlHandlingStrategy.extract(ee.rawUrl)})),(0,Lt.n)(ee=>{let Te=!1,Dt=!1;return(0,fe.of)(ee).pipe((0,Lt.n)(pt=>{if(this.navigationId>ee.id)return this.cancelNavigationTransition(ee,"",Ei.SupersededByNewNavigation),Ue.w;this.currentTransition=ee,this.currentNavigation={id:pt.id,initialUrl:pt.rawUrl,extractedUrl:pt.extractedUrl,trigger:pt.source,extras:pt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const _n=!w.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!_n&&"reload"!==(pt.extras.onSameUrlNavigation??w.onSameUrlNavigation)){const dr="";return this.events.next(new Vo(pt.id,this.urlSerializer.serialize(pt.rawUrl),dr,On.IgnoredSameUrlNavigation)),pt.resolve(null),Ue.w}if(this.urlHandlingStrategy.shouldProcessUrl(pt.rawUrl))return(0,fe.of)(pt).pipe((0,Lt.n)(dr=>{const Fi=this.transitions?.getValue();return this.events.next(new di(dr.id,this.urlSerializer.serialize(dr.extractedUrl),dr.source,dr.restoredState)),Fi!==this.transitions?.getValue()?Ue.w:Promise.resolve(dr)}),function bo(E,M,w,O,j,ee){return(0,qe.Z)(Te=>function hr(E,M,w,O,j,ee,Te="emptyOnly"){return new Fn(E,M,w,O,j,Te,ee).recognize()}(E,M,w,O,Te.extractedUrl,j,ee).pipe((0,ln.T)(({state:Dt,tree:pt})=>({...Te,targetSnapshot:Dt,urlAfterRedirects:pt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,w.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,It.M)(dr=>{ee.targetSnapshot=dr.targetSnapshot,ee.urlAfterRedirects=dr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:dr.urlAfterRedirects};const Fi=new oo(dr.id,this.urlSerializer.serialize(dr.extractedUrl),this.urlSerializer.serialize(dr.urlAfterRedirects),dr.targetSnapshot);this.events.next(Fi)}));if(_n&&this.urlHandlingStrategy.shouldProcessUrl(pt.currentRawUrl)){const{id:dr,extractedUrl:Fi,source:Ac,restoredState:ra,extras:ho}=pt,js=new di(dr,this.urlSerializer.serialize(Fi),Ac,ra);this.events.next(js);const Wo=os(this.rootComponentType).snapshot;return this.currentTransition=ee={...pt,targetSnapshot:Wo,urlAfterRedirects:Fi,extras:{...ho,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Fi,(0,fe.of)(ee)}{const dr="";return this.events.next(new Vo(pt.id,this.urlSerializer.serialize(pt.extractedUrl),dr,On.IgnoredByUrlHandlingStrategy)),pt.resolve(null),Ue.w}}),(0,It.M)(pt=>{const _n=new Yo(pt.id,this.urlSerializer.serialize(pt.extractedUrl),this.urlSerializer.serialize(pt.urlAfterRedirects),pt.targetSnapshot);this.events.next(_n)}),(0,ln.T)(pt=>(this.currentTransition=ee={...pt,guards:Z(pt.targetSnapshot,pt.currentSnapshot,this.rootContexts)},ee)),function Ua(E,M){return(0,qe.Z)(w=>{const{targetSnapshot:O,currentSnapshot:j,guards:{canActivateChecks:ee,canDeactivateChecks:Te}}=w;return 0===Te.length&&0===ee.length?(0,fe.of)({...w,guardsResult:!0}):function ga(E,M,w,O){return(0,Se.H)(E).pipe((0,qe.Z)(j=>function lr(E,M,w,O,j){const ee=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!ee||0===ee.length)return(0,fe.of)(!0);const Te=ee.map(Dt=>{const pt=_s(M)??j,_n=pn(Dt,pt);return kr(function Da(E){return E&&Ts(E.canDeactivate)}(_n)?_n.canDeactivate(E,M,w,O):(0,T.N4e)(pt,()=>_n(E,M,w,O))).pipe((0,ft.$)())});return(0,fe.of)(Te).pipe(Zs())}(j.component,j.route,w,M,O)),(0,ft.$)(j=>!0!==j,!0))}(Te,O,j,E).pipe((0,qe.Z)(Dt=>Dt&&function Ta(E){return"boolean"==typeof E}(Dt)?function $o(E,M,w,O){return(0,Se.H)(M).pipe((0,yt.H)(j=>(0,$t.x)(function Aa(E,M){return null!==E&&M&&M(new wr(E)),(0,fe.of)(!0)}(j.route.parent,O),function wo(E,M){return null!==E&&M&&M(new qs(E)),(0,fe.of)(!0)}(j.route,O),function To(E,M,w){const O=M[M.length-1],ee=M.slice(0,M.length-1).reverse().map(Te=>function Ae(E){const M=E.routeConfig?E.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:E,guards:M}:null}(Te)).filter(Te=>null!==Te).map(Te=>we(()=>{const Dt=Te.guards.map(pt=>{const _n=_s(Te.node)??w,er=pn(pt,_n);return kr(function Jr(E){return E&&Ts(E.canActivateChild)}(er)?er.canActivateChild(O,E):(0,T.N4e)(_n,()=>er(O,E))).pipe((0,ft.$)())});return(0,fe.of)(Dt).pipe(Zs())}));return(0,fe.of)(ee).pipe(Zs())}(E,j.path,w),function ea(E,M,w){const O=M.routeConfig?M.routeConfig.canActivate:null;if(!O||0===O.length)return(0,fe.of)(!0);const j=O.map(ee=>we(()=>{const Te=_s(M)??w,Dt=pn(ee,Te);return kr(function fa(E){return E&&Ts(E.canActivate)}(Dt)?Dt.canActivate(M,E):(0,T.N4e)(Te,()=>Dt(M,E))).pipe((0,ft.$)())}));return(0,fe.of)(j).pipe(Zs())}(E,j.route,w))),(0,ft.$)(j=>!0!==j,!0))}(O,ee,E,M):(0,fe.of)(Dt)),(0,ln.T)(Dt=>({...w,guardsResult:Dt})))})}(this.environmentInjector,pt=>this.events.next(pt)),(0,It.M)(pt=>{if(ee.guardsResult=pt.guardsResult,vt(pt.guardsResult))throw ms(0,pt.guardsResult);const _n=new la(pt.id,this.urlSerializer.serialize(pt.extractedUrl),this.urlSerializer.serialize(pt.urlAfterRedirects),pt.targetSnapshot,!!pt.guardsResult);this.events.next(_n)}),(0,Re.p)(pt=>!!pt.guardsResult||(this.cancelNavigationTransition(pt,"",Ei.GuardRejected),!1)),eo(pt=>{if(pt.guards.canActivateChecks.length)return(0,fe.of)(pt).pipe((0,It.M)(_n=>{const er=new yo(_n.id,this.urlSerializer.serialize(_n.extractedUrl),this.urlSerializer.serialize(_n.urlAfterRedirects),_n.targetSnapshot);this.events.next(er)}),(0,Lt.n)(_n=>{let er=!1;return(0,fe.of)(_n).pipe(function rs(E,M){return(0,qe.Z)(w=>{const{targetSnapshot:O,guards:{canActivateChecks:j}}=w;if(!j.length)return(0,fe.of)(w);const ee=new Set(j.map(pt=>pt.route)),Te=new Set;for(const pt of ee)if(!Te.has(pt))for(const _n of as(pt))Te.add(_n);let Dt=0;return(0,Se.H)(Te).pipe((0,yt.H)(pt=>ee.has(pt)?function cs(E,M,w,O){const j=E.routeConfig,ee=E._resolve;return void 0!==j?.title&&!Bi(j)&&(ee[_t]=j.title),function Ho(E,M,w,O){const j=tr(E);if(0===j.length)return(0,fe.of)({});const ee={};return(0,Se.H)(j).pipe((0,qe.Z)(Te=>function uo(E,M,w,O){const j=_s(M)??O,ee=pn(E,j);return kr(ee.resolve?ee.resolve(M,w):(0,T.N4e)(j,()=>ee(M,w)))}(E[Te],M,w,O).pipe((0,ft.$)(),(0,It.M)(Dt=>{ee[Te]=Dt}))),tn(1),function Dn(E){return(0,ln.T)(()=>E)}(ee),(0,Je.W)(Te=>Va(Te)?Ue.w:je(Te)))}(ee,E,M,O).pipe((0,ln.T)(Te=>(E._resolvedData=Te,E.data=ps(E,E.parent,w).resolve,null)))}(pt,O,E,M):(pt.data=ps(pt,pt.parent,E).resolve,(0,fe.of)(void 0))),(0,It.M)(()=>Dt++),tn(1),(0,qe.Z)(pt=>Dt===Te.size?(0,fe.of)(w):Ue.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,It.M)({next:()=>er=!0,complete:()=>{er||this.cancelNavigationTransition(_n,"",Ei.NoDataFromResolver)}}))}),(0,It.M)(_n=>{const er=new rr(_n.id,this.urlSerializer.serialize(_n.extractedUrl),this.urlSerializer.serialize(_n.urlAfterRedirects),_n.targetSnapshot);this.events.next(er)}))}),eo(pt=>{const _n=er=>{const dr=[];er.routeConfig?.loadComponent&&!er.routeConfig._loadedComponent&&dr.push(this.configLoader.loadComponent(er.routeConfig).pipe((0,It.M)(Fi=>{er.component=Fi}),(0,ln.T)(()=>{})));for(const Fi of er.children)dr.push(..._n(Fi));return dr};return ct(_n(pt.targetSnapshot.root)).pipe((0,gn.U)(null),(0,ut.s)(1))}),eo(()=>this.afterPreactivation()),(0,Lt.n)(()=>{const{currentSnapshot:pt,targetSnapshot:_n}=ee,er=this.createViewTransition?.(this.environmentInjector,pt.root,_n.root);return er?(0,Se.H)(er).pipe((0,ln.T)(()=>ee)):(0,fe.of)(ee)}),(0,ln.T)(pt=>{const _n=function ns(E,M,w){const O=Mi(E,M._root,w?w._root:void 0);return new ei(O,M)}(w.routeReuseStrategy,pt.targetSnapshot,pt.currentRouterState);return this.currentTransition=ee={...pt,targetRouterState:_n},this.currentNavigation.targetRouterState=_n,ee}),(0,It.M)(()=>{this.events.next(new Pr)}),((E,M,w,O)=>(0,ln.T)(j=>(new H(M,j.targetRouterState,j.currentRouterState,w,O).activate(E),j)))(this.rootContexts,w.routeReuseStrategy,pt=>this.events.next(pt),this.inputBindingEnabled),(0,ut.s)(1),(0,It.M)({next:pt=>{Te=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new vi(pt.id,this.urlSerializer.serialize(pt.extractedUrl),this.urlSerializer.serialize(pt.urlAfterRedirects))),this.titleStrategy?.updateTitle(pt.targetRouterState.snapshot),pt.resolve(!0)},complete:()=>{Te=!0}}),function In(E){return(0,ce.N)((M,w)=>{(0,ae.Tg)(E).subscribe((0,nt._)(w,()=>w.complete(),st.l)),!w.closed&&M.subscribe(w)})}(this.transitionAbortSubject.pipe((0,It.M)(pt=>{throw pt}))),(0,Ln.j)(()=>{!Te&&!Dt&&this.cancelNavigationTransition(ee,"",Ei.SupersededByNewNavigation),this.currentTransition?.id===ee.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,Je.W)(pt=>{if(Dt=!0,Ys(pt))this.events.next(new ur(ee.id,this.urlSerializer.serialize(ee.extractedUrl),pt.message,pt.cancellationCode)),function Jo(E){return Ys(E)&&vt(E.url)}(pt)?this.events.next(new Ui(pt.url)):ee.resolve(!1);else{this.events.next(new Gi(ee.id,this.urlSerializer.serialize(ee.extractedUrl),pt,ee.targetSnapshot??void 0));try{ee.resolve(w.errorHandler(pt))}catch(_n){this.options.resolveNavigationPromiseOnError?ee.resolve(!1):ee.reject(_n)}}return Ue.w}))}))}cancelNavigationTransition(w,O,j){const ee=new ur(w.id,this.urlSerializer.serialize(w.extractedUrl),O,j);this.events.next(ee),w.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();function ir(E){return E!==li}let Vr=(()=>{class E{static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:()=>(0,T.WQX)(Yt),providedIn:"root"})}return E})();class pr{shouldDetach(M){return!1}store(M,w){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,w){return M.routeConfig===w.routeConfig}}let Yt=(()=>{class E extends pr{static#e=this.\u0275fac=(()=>{let w;return function(j){return(w||(w=T.xGo(E)))(j||E)}})();static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),vn=(()=>{class E{static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:()=>(0,T.WQX)(_r),providedIn:"root"})}return E})(),_r=(()=>{class E extends vn{constructor(){super(...arguments),this.location=(0,T.WQX)(jt.aZ),this.urlSerializer=(0,T.WQX)(Ve),this.options=(0,T.WQX)(P,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,T.WQX)(Pt),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Nr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=os(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(w){return this.location.subscribe(O=>{"popstate"===O.type&&w(O.url,O.state)})}handleRouterEvent(w,O){if(w instanceof di)this.stateMemento=this.createStateMemento();else if(w instanceof Vo)this.rawUrlTree=O.initialUrl;else if(w instanceof oo){if("eager"===this.urlUpdateStrategy&&!O.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(O.finalUrl,O.initialUrl);this.setBrowserUrl(j,O)}}else w instanceof Pr?(this.currentUrlTree=O.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(O.finalUrl,O.initialUrl),this.routerState=O.targetRouterState,"deferred"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,O))):w instanceof ur&&(w.code===Ei.GuardRejected||w.code===Ei.NoDataFromResolver)?this.restoreHistory(O):w instanceof Gi?this.restoreHistory(O,!0):w instanceof vi&&(this.lastSuccessfulId=w.id,this.currentPageId=this.browserPageId)}setBrowserUrl(w,O){const j=this.urlSerializer.serialize(w);if(this.location.isCurrentPathEqualTo(j)||O.extras.replaceUrl){const Te={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId)};this.location.replaceState(j,"",Te)}else{const ee={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId+1)};this.location.go(j,"",ee)}}restoreHistory(w,O=!1){if("computed"===this.canceledNavigationResolution){const ee=this.currentPageId-this.browserPageId;0!==ee?this.location.historyGo(ee):this.currentUrlTree===w.finalUrl&&0===ee&&(this.resetState(w),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,O){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:O}:{navigationId:w}}static#e=this.\u0275fac=(()=>{let w;return function(j){return(w||(w=T.xGo(E)))(j||E)}})();static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();var Ti=function(E){return E[E.COMPLETE=0]="COMPLETE",E[E.FAILED=1]="FAILED",E[E.REDIRECTING=2]="REDIRECTING",E}(Ti||{});function pi(E,M){E.events.pipe((0,Re.p)(w=>w instanceof vi||w instanceof ur||w instanceof Gi||w instanceof Vo),(0,ln.T)(w=>w instanceof vi||w instanceof Vo?Ti.COMPLETE:w instanceof ur&&(w.code===Ei.Redirect||w.code===Ei.SupersededByNewNavigation)?Ti.REDIRECTING:Ti.FAILED),(0,Re.p)(w=>w!==Ti.REDIRECTING),(0,ut.s)(1)).subscribe(()=>{M()})}function is(E){throw E}const Bs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zr=(()=>{class E{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,T.WQX)(T.H3F),this.stateManager=(0,T.WQX)(vn),this.options=(0,T.WQX)(P,{optional:!0})||{},this.pendingTasks=(0,T.WQX)(T.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,T.WQX)(ri),this.urlSerializer=(0,T.WQX)(Ve),this.location=(0,T.WQX)(jt.aZ),this.urlHandlingStrategy=(0,T.WQX)(Pt),this._events=new un.B,this.errorHandler=this.options.errorHandler||is,this.navigated=!1,this.routeReuseStrategy=(0,T.WQX)(Vr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,T.WQX)(X,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,T.WQX)(ji,{optional:!0}),this.eventsSubscription=new Oe.yU,this.isNgZoneEnabled=(0,T.WQX)(T.SKi)instanceof T.SKi&&T.SKi.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:w=>{this.console.warn(w)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const w=this.navigationTransitions.events.subscribe(O=>{try{const j=this.navigationTransitions.currentTransition,ee=this.navigationTransitions.currentNavigation;if(null!==j&&null!==ee)if(this.stateManager.handleRouterEvent(O,ee),O instanceof ur&&O.code!==Ei.Redirect&&O.code!==Ei.SupersededByNewNavigation)this.navigated=!0;else if(O instanceof vi)this.navigated=!0;else if(O instanceof Ui){const Te=this.urlHandlingStrategy.merge(O.url,j.currentRawUrl),Dt={info:j.extras.info,skipLocationChange:j.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ir(j.source)};this.scheduleNavigation(Te,li,null,Dt,{resolve:j.resolve,reject:j.reject,promise:j.promise})}(function Zn(E){return!(E instanceof Pr||E instanceof Ui)})(O)&&this._events.next(O)}catch(j){this.navigationTransitions.transitionAbortSubject.next(j)}});this.eventsSubscription.add(w)}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),li,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((w,O)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(w,"popstate",O)},0)})}navigateToSyncWithBrowser(w,O,j){const ee={replaceUrl:!0},Te=j?.navigationId?j:null;if(j){const pt={...j};delete pt.navigationId,delete pt.\u0275routerPageId,0!==Object.keys(pt).length&&(ee.state=pt)}const Dt=this.parseUrl(w);this.scheduleNavigation(Dt,O,Te,ee)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(w){this.config=w.map(co),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(w,O={}){const{relativeTo:j,queryParams:ee,fragment:Te,queryParamsHandling:Dt,preserveFragment:pt}=O,_n=pt?this.currentUrlTree.fragment:Te;let dr,er=null;switch(Dt){case"merge":er={...this.currentUrlTree.queryParams,...ee};break;case"preserve":er=this.currentUrlTree.queryParams;break;default:er=ee||null}null!==er&&(er=this.removeEmptyProps(er));try{dr=kt(j?j.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof w[0]||!w[0].startsWith("/"))&&(w=[]),dr=this.currentUrlTree.root}return an(dr,w,er,_n??null)}navigateByUrl(w,O={skipLocationChange:!1}){const j=vt(w)?w:this.parseUrl(w),ee=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(ee,li,null,O)}navigate(w,O={skipLocationChange:!1}){return function lo(E){for(let M=0;M<E.length;M++)if(null==E[M])throw new T.wOt(4008,!1)}(w),this.navigateByUrl(this.createUrlTree(w,O),O)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){try{return this.urlSerializer.parse(w)}catch{return this.urlSerializer.parse("/")}}isActive(w,O){let j;if(j=!0===O?{...Bs}:!1===O?{...gi}:O,vt(w))return Vi(this.currentUrlTree,w,j);const ee=this.parseUrl(w);return Vi(this.currentUrlTree,ee,j)}removeEmptyProps(w){return Object.entries(w).reduce((O,[j,ee])=>(null!=ee&&(O[j]=ee),O),{})}scheduleNavigation(w,O,j,ee,Te){if(this.disposed)return Promise.resolve(!1);let Dt,pt,_n;Te?(Dt=Te.resolve,pt=Te.reject,_n=Te.promise):_n=new Promise((dr,Fi)=>{Dt=dr,pt=Fi});const er=this.pendingTasks.add();return pi(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(er))}),this.navigationTransitions.handleNavigationRequest({source:O,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:ee,resolve:Dt,reject:pt,promise:_n,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_n.catch(dr=>Promise.reject(dr))}static#e=this.\u0275fac=function(O){return new(O||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})(),Go=(()=>{class E{constructor(w,O,j,ee,Te,Dt){this.router=w,this.route=O,this.tabIndexAttribute=j,this.renderer=ee,this.el=Te,this.locationStrategy=Dt,this.href=null,this.commands=null,this.onChanges=new un.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const pt=Te.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===pt||"area"===pt,this.isAnchorElement?this.subscription=w.events.subscribe(_n=>{_n instanceof vi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,O,j,ee,Te){const Dt=this.urlTree;return!!(null===Dt||this.isAnchorElement&&(0!==w||O||j||ee||Te||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(Dt,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const w=this.urlTree;this.href=null!==w&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(w)):null;const O=null===this.href?null:(0,T.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",O)}applyAttributeValue(w,O){const j=this.renderer,ee=this.el.nativeElement;null!==O?j.setAttribute(ee,w,O):j.removeAttribute(ee,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(O){return new(O||E)(T.rXU(zr),T.rXU(si),T.kS0("tabindex"),T.rXU(T.sFG),T.rXU(T.aKT),T.rXU(jt.hb))};static#t=this.\u0275dir=T.FsC({type:E,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(O,j){1&O&&T.bIt("click",function(Te){return j.onClick(Te.button,Te.ctrlKey,Te.shiftKey,Te.altKey,Te.metaKey)}),2&O&&T.BMQ("target",j.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[T.Mj6.HasDecoratorInputTransform,"preserveFragment","preserveFragment",T.L39],skipLocationChange:[T.Mj6.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",T.L39],replaceUrl:[T.Mj6.HasDecoratorInputTransform,"replaceUrl","replaceUrl",T.L39],routerLink:"routerLink"},standalone:!0,features:[T.GFd,T.OA$]})}return E})();class jn{}let zo=(()=>{class E{constructor(w,O,j,ee,Te){this.router=w,this.injector=j,this.preloadingStrategy=ee,this.loader=Te}setUpPreloading(){this.subscription=this.router.events.pipe((0,Re.p)(w=>w instanceof vi),(0,yt.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,O){const j=[];for(const ee of O){ee.providers&&!ee._injector&&(ee._injector=(0,T.Ol2)(ee.providers,w,`Route: ${ee.path}`));const Te=ee._injector??w,Dt=ee._loadedInjector??Te;(ee.loadChildren&&!ee._loadedRoutes&&void 0===ee.canLoad||ee.loadComponent&&!ee._loadedComponent)&&j.push(this.preloadConfig(Te,ee)),(ee.children||ee._loadedRoutes)&&j.push(this.processRoutes(Dt,ee.children??ee._loadedRoutes))}return(0,Se.H)(j).pipe((0,Kn.U)())}preloadConfig(w,O){return this.preloadingStrategy.preload(O,()=>{let j;j=O.loadChildren&&void 0===O.canLoad?this.loader.loadChildren(w,O):(0,fe.of)(null);const ee=j.pipe((0,qe.Z)(Te=>null===Te?(0,fe.of)(void 0):(O._loadedRoutes=Te.routes,O._loadedInjector=Te.injector,this.processRoutes(Te.injector??w,Te.routes))));if(O.loadComponent&&!O._loadedComponent){const Te=this.loader.loadComponent(O);return(0,Se.H)([ee,Te]).pipe((0,Kn.U)())}return ee})}static#e=this.\u0275fac=function(O){return new(O||E)(T.KVO(zr),T.KVO(T.Ql9),T.KVO(T.uvJ),T.KVO(jn),T.KVO(N))};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})();const _a=new T.nKC("");let Il=(()=>{class E{constructor(w,O,j,ee,Te={}){this.urlSerializer=w,this.transitions=O,this.viewportScroller=j,this.zone=ee,this.options=Te,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,T.WQX)(T.uvJ),Te.scrollPositionRestoration||="disabled",Te.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof di?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof vi?(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment)):w instanceof Vo&&w.code===On.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Rs&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,O){var j=this;this.zone.runOutsideAngular((0,_.A)(function*(){yield new Promise(ee=>{setTimeout(()=>{ee()}),(0,T.mal)(()=>{ee()},{injector:j.environmentInjector})}),j.zone.run(()=>{j.transitions.events.next(new Rs(w,"popstate"===j.lastSource?j.store[j.restoredId]:null,O))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(O){T.QTQ()};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac})}return E})();function Is(E,M){return{\u0275kind:E,\u0275providers:M}}function ba(){const E=(0,T.WQX)(T.zZn);return M=>{const w=E.get(T.o8S);if(M!==w.components[0])return;const O=E.get(zr),j=E.get(Sa);1===E.get(Di)&&O.initialNavigation(),E.get(Kc,null,T.$GK.Optional)?.setUpPreloading(),E.get(_a,null,T.$GK.Optional)?.init(),O.resetRootComponentType(w.componentTypes[0]),j.closed||(j.next(),j.complete(),j.unsubscribe())}}const Sa=new T.nKC("",{factory:()=>new un.B}),Di=new T.nKC("",{providedIn:"root",factory:()=>1}),Kc=new T.nKC("");function na(E){return Is(0,[{provide:Kc,useExisting:zo},{provide:jn,useExisting:E}])}function Qc(E){return Is(9,[{provide:mr,useValue:Gn},{provide:xn,useValue:{skipNextTransition:!!E?.skipInitialTransition,...E}}])}const Ni=new T.nKC("ROUTER_FORROOT_GUARD"),Mu=[jt.aZ,{provide:Ve,useClass:Ce},zr,fs,{provide:si,useFactory:function nc(E){return E.routerState.root},deps:[zr]},N,[]];let ja=(()=>{class E{constructor(w){}static forRoot(w,O){return{ngModule:E,providers:[Mu,[],{provide:X,multi:!0,useValue:w},{provide:Ni,useFactory:Yh,deps:[[zr,new T.Xx1,new T.kdw]]},{provide:P,useValue:O||{}},O?.useHash?{provide:jt.hb,useClass:jt.fw}:{provide:jt.hb,useClass:jt.Sm},{provide:_a,useFactory:()=>{const E=(0,T.WQX)(jt.Xr),M=(0,T.WQX)(T.SKi),w=(0,T.WQX)(P),O=(0,T.WQX)(ri),j=(0,T.WQX)(Ve);return w.scrollOffset&&E.setOffset(w.scrollOffset),new Il(j,O,E,M,w)}},O?.preloadingStrategy?na(O.preloadingStrategy).\u0275providers:[],O?.initialNavigation?wl(O):[],O?.bindToComponentInputs?Is(8,[Bo,{provide:ji,useExisting:Bo}]).\u0275providers:[],O?.enableViewTransitions?Qc().\u0275providers:[],[{provide:Ru,useFactory:ba},{provide:T.iLQ,multi:!0,useExisting:Ru}]]}}static forChild(w){return{ngModule:E,providers:[{provide:X,multi:!0,useValue:w}]}}static#e=this.\u0275fac=function(O){return new(O||E)(T.KVO(Ni,8))};static#t=this.\u0275mod=T.$C({type:E});static#n=this.\u0275inj=T.G2t({})}return E})();function Yh(E){return"guarded"}function wl(E){return["disabled"===E.initialNavigation?Is(3,[{provide:T.hnV,multi:!0,useFactory:()=>{const M=(0,T.WQX)(zr);return()=>{M.setUpLocationChangeListener()}}},{provide:Di,useValue:2}]).\u0275providers:[],"enabledBlocking"===E.initialNavigation?Is(2,[{provide:Di,useValue:0},{provide:T.hnV,multi:!0,deps:[T.zZn],useFactory:M=>{const w=M.get(jt.hj,Promise.resolve());return()=>w.then(()=>new Promise(O=>{const j=M.get(zr),ee=M.get(Sa);pi(j,()=>{O(!0)}),M.get(ri).afterPreactivation=()=>(O(!0),ee.closed?(0,fe.of)(void 0):ee),j.initialNavigation()}))}}]).\u0275providers:[]]}const Ru=new T.nKC("")},3345:(nn,We,k)=>{k.d(We,{A:()=>De});var _=k(1076),T=k(1362),R=k(7852),v=k(8041);class re{constructor(at,ot){this._delegate=at,this.firebase=ot,(0,R._addComponent)(at,new T.uA("app-compat",()=>this,"PUBLIC")),this.container=at.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(at){this._delegate.automaticDataCollectionEnabled=at}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(at=>{this._delegate.checkDestroyed(),at()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(at,ot=R._DEFAULT_ENTRY_NAME){var At;this._delegate.checkDestroyed();const $t=this._delegate.container.getProvider(at);return!$t.isInitialized()&&"EXPLICIT"===(null===(At=$t.getComponent())||void 0===At?void 0:At.instantiationMode)&&$t.initialize(),$t.getImmediate({identifier:ot})}_removeServiceInstance(at,ot=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(at).clearInstance(ot)}_addComponent(at){(0,R._addComponent)(this._delegate,at)}_addOrOverwriteComponent(at){(0,R._addOrOverwriteComponent)(this._delegate,at)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new _.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ye=function Me(){const ct=function $e(ct){const at={},ot={__esModule:!0,initializeApp:function ae(Ue,Oe={}){const ce=R.initializeApp(Ue,Oe);if((0,_.gR)(at,ce.name))return at[ce.name];const xe=new ct(ce,ot);return at[ce.name]=xe,xe},app:$t,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function ie(Ue){const Oe=Ue.name,ce=Oe.replace("-compat","");if(R._registerComponent(Ue)&&"PUBLIC"===Ue.type){const xe=(xt=$t())=>{if("function"!=typeof xt[ce])throw fe.create("invalid-app-argument",{appName:Oe});return xt[ce]()};void 0!==Ue.serviceProps&&(0,_.zw)(xe,Ue.serviceProps),ot[ce]=xe,ct.prototype[ce]=function(...xt){return this._getService.bind(this,Oe).apply(this,Ue.multipleInstances?xt:[])}}return"PUBLIC"===Ue.type?ot[ce]:null},removeApp:function At(Ue){delete at[Ue]},useAsService:function je(Ue,Oe){return"serverAuth"===Oe?null:Oe},modularAPIs:R}};function $t(Ue){if(!(0,_.gR)(at,Ue=Ue||R._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:Ue});return at[Ue]}return ot.default=ot,Object.defineProperty(ot,"apps",{get:function we(){return Object.keys(at).map(Ue=>at[Ue])}}),$t.App=ct,ot}(re);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:Me,extendNamespace:function at(ot){(0,_.zw)(ct,ot)},createSubscribe:_.tD,ErrorFactory:_.FA,deepExtend:_.zw}),ct}(),pe=new v.Vy("@firebase/app-compat");try{const ct=(0,_.mS)();if(void 0!==ct.firebase){pe.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const at=ct.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&pe.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const De=ye;!function nt(ct){(0,R.registerVersion)("@firebase/app-compat","0.2.40",ct)}()},7852:(nn,We,k)=>{k.r(We),k.d(We,{FirebaseError:()=>v.g,SDK_VERSION:()=>Rn,_DEFAULT_ENTRY_NAME:()=>tr,_addComponent:()=>jr,_addOrOverwriteComponent:()=>Vi,_apps:()=>bn,_clearComponents:()=>Un,_components:()=>Wr,_getProvider:()=>hs,_isFirebaseApp:()=>Li,_isFirebaseServerApp:()=>zt,_registerComponent:()=>Or,_removeServiceInstance:()=>Nn,_serverApps:()=>kr,deleteApp:()=>Qe,getApp:()=>Ce,getApps:()=>Ie,initializeApp:()=>xr,initializeServerApp:()=>Ve,onLog:()=>q,registerVersion:()=>me,setLogLevel:()=>J});var _=k(467),T=k(1362),R=k(8041),v=k(1076);const re=(vt,Ye)=>Ye.some(kt=>vt instanceof kt);let Se,fe;const ye=new WeakMap,pe=new WeakMap,Ge=new WeakMap,it=new WeakMap,nt=new WeakMap;let at={get(vt,Ye,kt){if(vt instanceof IDBTransaction){if("done"===Ye)return pe.get(vt);if("objectStoreNames"===Ye)return vt.objectStoreNames||Ge.get(vt);if("store"===Ye)return kt.objectStoreNames[1]?void 0:kt.objectStore(kt.objectStoreNames[0])}return ae(vt[Ye])},set:(vt,Ye,kt)=>(vt[Ye]=kt,!0),has:(vt,Ye)=>vt instanceof IDBTransaction&&("done"===Ye||"store"===Ye)||Ye in vt};function $t(vt){return"function"==typeof vt?function At(vt){return vt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Me(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(vt)?function(...Ye){return vt.apply(we(this),Ye),ae(ye.get(this))}:function(...Ye){return ae(vt.apply(we(this),Ye))}:function(Ye,...kt){const an=vt.call(we(this),Ye,...kt);return Ge.set(an,Ye.sort?Ye.sort():[Ye]),ae(an)}}(vt):(vt instanceof IDBTransaction&&function ct(vt){if(pe.has(vt))return;const Ye=new Promise((kt,an)=>{const te=()=>{vt.removeEventListener("complete",ve),vt.removeEventListener("error",Ee),vt.removeEventListener("abort",Ee)},ve=()=>{kt(),te()},Ee=()=>{an(vt.error||new DOMException("AbortError","AbortError")),te()};vt.addEventListener("complete",ve),vt.addEventListener("error",Ee),vt.addEventListener("abort",Ee)});pe.set(vt,Ye)}(vt),re(vt,function $e(){return Se||(Se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(vt,at):vt)}function ae(vt){if(vt instanceof IDBRequest)return function De(vt){const Ye=new Promise((kt,an)=>{const te=()=>{vt.removeEventListener("success",ve),vt.removeEventListener("error",Ee)},ve=()=>{kt(ae(vt.result)),te()},Ee=()=>{an(vt.error),te()};vt.addEventListener("success",ve),vt.addEventListener("error",Ee)});return Ye.then(kt=>{kt instanceof IDBCursor&&ye.set(kt,vt)}).catch(()=>{}),nt.set(Ye,vt),Ye}(vt);if(it.has(vt))return it.get(vt);const Ye=$t(vt);return Ye!==vt&&(it.set(vt,Ye),nt.set(Ye,vt)),Ye}const we=vt=>nt.get(vt),Ue=["get","getKey","getAll","getAllKeys","count"],Oe=["put","add","delete","clear"],ce=new Map;function xe(vt,Ye){if(!(vt instanceof IDBDatabase)||Ye in vt||"string"!=typeof Ye)return;if(ce.get(Ye))return ce.get(Ye);const kt=Ye.replace(/FromIndex$/,""),an=Ye!==kt,te=Oe.includes(kt);if(!(kt in(an?IDBIndex:IDBObjectStore).prototype)||!te&&!Ue.includes(kt))return;const ve=function(){var Ee=(0,_.A)(function*(ht,...Xe){const Xt=this.transaction(ht,te?"readwrite":"readonly");let Bt=Xt.store;return an&&(Bt=Bt.index(Xe.shift())),(yield Promise.all([Bt[kt](...Xe),te&&Xt.done]))[0]});return function(Xe){return Ee.apply(this,arguments)}}();return ce.set(Ye,ve),ve}!function ot(vt){at=vt(at)}(vt=>({...vt,get:(Ye,kt,an)=>xe(Ye,kt)||vt.get(Ye,kt,an),has:(Ye,kt)=>!!xe(Ye,kt)||vt.has(Ye,kt)}));class xt{constructor(Ye){this.container=Ye}getPlatformInfoString(){return this.container.getProviders().map(kt=>{if(function un(vt){const Ye=vt.getComponent();return"VERSION"===Ye?.type}(kt)){const an=kt.getImmediate();return`${an.library}/${an.version}`}return null}).filter(kt=>kt).join(" ")}}const jt="@firebase/app",ln="0.10.10",Lt=new R.Vy("@firebase/app"),tr="[DEFAULT]",An={[jt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},bn=new Map,kr=new Map,Wr=new Map;function jr(vt,Ye){try{vt.container.addComponent(Ye)}catch(kt){Lt.debug(`Component ${Ye.name} failed to register with FirebaseApp ${vt.name}`,kt)}}function Vi(vt,Ye){vt.container.addOrOverwriteComponent(Ye)}function Or(vt){const Ye=vt.name;if(Wr.has(Ye))return Lt.debug(`There were multiple attempts to register component ${Ye}.`),!1;Wr.set(Ye,vt);for(const kt of bn.values())jr(kt,vt);for(const kt of kr.values())jr(kt,vt);return!0}function hs(vt,Ye){const kt=vt.container.getProvider("heartbeat").getImmediate({optional:!0});return kt&&kt.triggerHeartbeat(),vt.container.getProvider(Ye)}function Nn(vt,Ye,kt=tr){hs(vt,Ye).clearInstance(kt)}function Li(vt){return void 0!==vt.options}function zt(vt){return void 0!==vt.settings}function Un(){Wr.clear()}const Jt=new v.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Zt{constructor(Ye,kt,an){this._isDeleted=!1,this._options=Object.assign({},Ye),this._config=Object.assign({},kt),this._name=kt.name,this._automaticDataCollectionEnabled=kt.automaticDataCollectionEnabled,this._container=an,this.container.addComponent(new T.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ye}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ye){this._isDeleted=Ye}checkDestroyed(){if(this.isDeleted)throw Jt.create("app-deleted",{appName:this._name})}}class Kr extends Zt{constructor(Ye,kt,an,te){const ve=void 0!==kt.automaticDataCollectionEnabled&&kt.automaticDataCollectionEnabled,Ee={name:an,automaticDataCollectionEnabled:ve};super(void 0!==Ye.apiKey?Ye:Ye.options,Ee,te),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ve},kt),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,kt.releaseOnDeref=void 0,me(jt,ln,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Ye){this.isDeleted||(this._refCount++,void 0!==Ye&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Ye,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Qe(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Jt.create("server-app-deleted")}}const Rn="10.13.1";function xr(vt,Ye={}){let kt=vt;"object"!=typeof Ye&&(Ye={name:Ye});const an=Object.assign({name:tr,automaticDataCollectionEnabled:!1},Ye),te=an.name;if("string"!=typeof te||!te)throw Jt.create("bad-app-name",{appName:String(te)});if(kt||(kt=(0,v.T9)()),!kt)throw Jt.create("no-options");const ve=bn.get(te);if(ve){if((0,v.bD)(kt,ve.options)&&(0,v.bD)(an,ve.config))return ve;throw Jt.create("duplicate-app",{appName:te})}const Ee=new T.h1(te);for(const Xe of Wr.values())Ee.addComponent(Xe);const ht=new Zt(kt,an,Ee);return bn.set(te,ht),ht}function Ve(vt,Ye){if((0,v.Bd)()&&!(0,v.p7)())throw Jt.create("invalid-server-app-environment");let kt;void 0===Ye.automaticDataCollectionEnabled&&(Ye.automaticDataCollectionEnabled=!1),kt=Li(vt)?vt.options:vt;const an=Object.assign(Object.assign({},Ye),kt);if(void 0!==an.releaseOnDeref&&delete an.releaseOnDeref,void 0!==Ye.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Jt.create("finalization-registry-not-supported",{});const ve=""+(Xt=JSON.stringify(an),[...Xt].reduce((Bt,Mn)=>Math.imul(31,Bt)+Mn.charCodeAt(0)|0,0)),Ee=kr.get(ve);var Xt;if(Ee)return Ee.incRefCount(Ye.releaseOnDeref),Ee;const ht=new T.h1(ve);for(const Xt of Wr.values())ht.addComponent(Xt);const Xe=new Kr(kt,Ye,ve,ht);return kr.set(ve,Xe),Xe}function Ce(vt=tr){const Ye=bn.get(vt);if(!Ye&&vt===tr&&(0,v.T9)())return xr();if(!Ye)throw Jt.create("no-app",{appName:vt});return Ye}function Ie(){return Array.from(bn.values())}function Qe(vt){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,_.A)(function*(vt){let Ye=!1;const kt=vt.name;bn.has(kt)?(Ye=!0,bn.delete(kt)):kr.has(kt)&&vt.decRefCount()<=0&&(kr.delete(kt),Ye=!0),Ye&&(yield Promise.all(vt.container.getProviders().map(an=>an.delete())),vt.isDeleted=!0)})).apply(this,arguments)}function me(vt,Ye,kt){var an;let te=null!==(an=An[vt])&&void 0!==an?an:vt;kt&&(te+=`-${kt}`);const ve=te.match(/\s|\//),Ee=Ye.match(/\s|\//);if(ve||Ee){const ht=[`Unable to register library "${te}" with version "${Ye}":`];return ve&&ht.push(`library name "${te}" contains illegal characters (whitespace or "/")`),ve&&Ee&&ht.push("and"),Ee&&ht.push(`version name "${Ye}" contains illegal characters (whitespace or "/")`),void Lt.warn(ht.join(" "))}Or(new T.uA(`${te}-version`,()=>({library:te,version:Ye}),"VERSION"))}function q(vt,Ye){if(null!==vt&&"function"!=typeof vt)throw Jt.create("invalid-log-argument");(0,R.Ey)(vt,Ye)}function J(vt){(0,R.He)(vt)}const se="firebase-heartbeat-database",_e=1,Tt="firebase-heartbeat-store";let Vt=null;function En(){return Vt||(Vt=function ie(vt,Ye,{blocked:kt,upgrade:an,blocking:te,terminated:ve}={}){const Ee=indexedDB.open(vt,Ye),ht=ae(Ee);return an&&Ee.addEventListener("upgradeneeded",Xe=>{an(ae(Ee.result),Xe.oldVersion,Xe.newVersion,ae(Ee.transaction),Xe)}),kt&&Ee.addEventListener("blocked",Xe=>kt(Xe.oldVersion,Xe.newVersion,Xe)),ht.then(Xe=>{ve&&Xe.addEventListener("close",()=>ve()),te&&Xe.addEventListener("versionchange",Xt=>te(Xt.oldVersion,Xt.newVersion,Xt))}).catch(()=>{}),ht}(se,_e,{upgrade:(vt,Ye)=>{if(0===Ye)try{vt.createObjectStore(Tt)}catch(kt){console.warn(kt)}}}).catch(vt=>{throw Jt.create("idb-open",{originalErrorMessage:vt.message})})),Vt}function qn(){return(qn=(0,_.A)(function*(vt){try{const kt=(yield En()).transaction(Tt),an=yield kt.objectStore(Tt).get(ke(vt));return yield kt.done,an}catch(Ye){if(Ye instanceof v.g)Lt.warn(Ye.message);else{const kt=Jt.create("idb-get",{originalErrorMessage:Ye?.message});Lt.warn(kt.message)}}})).apply(this,arguments)}function Sn(vt,Ye){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,_.A)(function*(vt,Ye){try{const an=(yield En()).transaction(Tt,"readwrite");yield an.objectStore(Tt).put(Ye,ke(vt)),yield an.done}catch(kt){if(kt instanceof v.g)Lt.warn(kt.message);else{const an=Jt.create("idb-set",{originalErrorMessage:kt?.message});Lt.warn(an.message)}}})).apply(this,arguments)}function ke(vt){return`${vt.name}!${vt.options.appId}`}class Ms{constructor(Ye){this.container=Ye,this._heartbeatsCache=null;const kt=this.container.getProvider("app").getImmediate();this._storage=new ss(kt),this._heartbeatsCachePromise=this._storage.read().then(an=>(this._heartbeatsCache=an,an))}triggerHeartbeat(){var Ye=this;return(0,_.A)(function*(){var kt,an;try{const ve=Ye.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ee=ls();return null==(null===(kt=Ye._heartbeatsCache)||void 0===kt?void 0:kt.heartbeats)&&(Ye._heartbeatsCache=yield Ye._heartbeatsCachePromise,null==(null===(an=Ye._heartbeatsCache)||void 0===an?void 0:an.heartbeats))||Ye._heartbeatsCache.lastSentHeartbeatDate===Ee||Ye._heartbeatsCache.heartbeats.some(ht=>ht.date===Ee)?void 0:(Ye._heartbeatsCache.heartbeats.push({date:Ee,agent:ve}),Ye._heartbeatsCache.heartbeats=Ye._heartbeatsCache.heartbeats.filter(ht=>{const Xe=new Date(ht.date).valueOf();return Date.now()-Xe<=2592e6}),Ye._storage.overwrite(Ye._heartbeatsCache))}catch(te){Lt.warn(te)}})()}getHeartbeatsHeader(){var Ye=this;return(0,_.A)(function*(){var kt;try{if(null===Ye._heartbeatsCache&&(yield Ye._heartbeatsCachePromise),null==(null===(kt=Ye._heartbeatsCache)||void 0===kt?void 0:kt.heartbeats)||0===Ye._heartbeatsCache.heartbeats.length)return"";const an=ls(),{heartbeatsToSend:te,unsentEntries:ve}=function or(vt,Ye=1024){const kt=[];let an=vt.slice();for(const te of vt){const ve=kt.find(Ee=>Ee.agent===te.agent);if(ve){if(ve.dates.push(te.date),Hi(kt)>Ye){ve.dates.pop();break}}else if(kt.push({agent:te.agent,dates:[te.date]}),Hi(kt)>Ye){kt.pop();break}an=an.slice(1)}return{heartbeatsToSend:kt,unsentEntries:an}}(Ye._heartbeatsCache.heartbeats),Ee=(0,v.Uj)(JSON.stringify({version:2,heartbeats:te}));return Ye._heartbeatsCache.lastSentHeartbeatDate=an,ve.length>0?(Ye._heartbeatsCache.heartbeats=ve,yield Ye._storage.overwrite(Ye._heartbeatsCache)):(Ye._heartbeatsCache.heartbeats=[],Ye._storage.overwrite(Ye._heartbeatsCache)),Ee}catch(an){return Lt.warn(an),""}})()}}function ls(){return(new Date).toISOString().substring(0,10)}class ss{constructor(Ye){this.app=Ye,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.A)(function*(){return!!(0,v.zW)()&&(0,v.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Ye=this;return(0,_.A)(function*(){if(yield Ye._canUseIndexedDBPromise){const an=yield function Bn(vt){return qn.apply(this,arguments)}(Ye.app);return an?.heartbeats?an:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Ye){var kt=this;return(0,_.A)(function*(){var an;if(yield kt._canUseIndexedDBPromise){const ve=yield kt.read();return Sn(kt.app,{lastSentHeartbeatDate:null!==(an=Ye.lastSentHeartbeatDate)&&void 0!==an?an:ve.lastSentHeartbeatDate,heartbeats:Ye.heartbeats})}})()}add(Ye){var kt=this;return(0,_.A)(function*(){var an;if(yield kt._canUseIndexedDBPromise){const ve=yield kt.read();return Sn(kt.app,{lastSentHeartbeatDate:null!==(an=Ye.lastSentHeartbeatDate)&&void 0!==an?an:ve.lastSentHeartbeatDate,heartbeats:[...ve.heartbeats,...Ye.heartbeats]})}})()}}function Hi(vt){return(0,v.Uj)(JSON.stringify({version:2,heartbeats:vt})).length}!function ti(vt){Or(new T.uA("platform-logger",Ye=>new xt(Ye),"PRIVATE")),Or(new T.uA("heartbeat",Ye=>new Ms(Ye),"PRIVATE")),me(jt,ln,vt),me(jt,ln,"esm2017"),me("fire-js","")}("")},1362:(nn,We,k)=>{k.d(We,{h1:()=>$e,uA:()=>R});var _=k(467),T=k(1076);class R{constructor(ye,pe,Ge){this.name=ye,this.instanceFactory=pe,this.type=Ge,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ye){return this.instantiationMode=ye,this}setMultipleInstances(ye){return this.multipleInstances=ye,this}setServiceProps(ye){return this.serviceProps=ye,this}setInstanceCreatedCallback(ye){return this.onInstanceCreated=ye,this}}const v="[DEFAULT]";class re{constructor(ye,pe){this.name=ye,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ye){const pe=this.normalizeInstanceIdentifier(ye);if(!this.instancesDeferred.has(pe)){const Ge=new T.cY;if(this.instancesDeferred.set(pe,Ge),this.isInitialized(pe)||this.shouldAutoInitialize())try{const it=this.getOrInitializeService({instanceIdentifier:pe});it&&Ge.resolve(it)}catch{}}return this.instancesDeferred.get(pe).promise}getImmediate(ye){var pe;const Ge=this.normalizeInstanceIdentifier(ye?.identifier),it=null!==(pe=ye?.optional)&&void 0!==pe&&pe;if(!this.isInitialized(Ge)&&!this.shouldAutoInitialize()){if(it)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ge})}catch(nt){if(it)return null;throw nt}}getComponent(){return this.component}setComponent(ye){if(ye.name!==this.name)throw Error(`Mismatching Component ${ye.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ye,this.shouldAutoInitialize()){if(function fe(Me){return"EAGER"===Me.instantiationMode}(ye))try{this.getOrInitializeService({instanceIdentifier:v})}catch{}for(const[pe,Ge]of this.instancesDeferred.entries()){const it=this.normalizeInstanceIdentifier(pe);try{const nt=this.getOrInitializeService({instanceIdentifier:it});Ge.resolve(nt)}catch{}}}}clearInstance(ye=v){this.instancesDeferred.delete(ye),this.instancesOptions.delete(ye),this.instances.delete(ye)}delete(){var ye=this;return(0,_.A)(function*(){const pe=Array.from(ye.instances.values());yield Promise.all([...pe.filter(Ge=>"INTERNAL"in Ge).map(Ge=>Ge.INTERNAL.delete()),...pe.filter(Ge=>"_delete"in Ge).map(Ge=>Ge._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ye=v){return this.instances.has(ye)}getOptions(ye=v){return this.instancesOptions.get(ye)||{}}initialize(ye={}){const{options:pe={}}=ye,Ge=this.normalizeInstanceIdentifier(ye.instanceIdentifier);if(this.isInitialized(Ge))throw Error(`${this.name}(${Ge}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const it=this.getOrInitializeService({instanceIdentifier:Ge,options:pe});for(const[nt,De]of this.instancesDeferred.entries())Ge===this.normalizeInstanceIdentifier(nt)&&De.resolve(it);return it}onInit(ye,pe){var Ge;const it=this.normalizeInstanceIdentifier(pe),nt=null!==(Ge=this.onInitCallbacks.get(it))&&void 0!==Ge?Ge:new Set;nt.add(ye),this.onInitCallbacks.set(it,nt);const De=this.instances.get(it);return De&&ye(De,it),()=>{nt.delete(ye)}}invokeOnInitCallbacks(ye,pe){const Ge=this.onInitCallbacks.get(pe);if(Ge)for(const it of Ge)try{it(ye,pe)}catch{}}getOrInitializeService({instanceIdentifier:ye,options:pe={}}){let Ge=this.instances.get(ye);if(!Ge&&this.component&&(Ge=this.component.instanceFactory(this.container,{instanceIdentifier:(Me=ye,Me===v?void 0:Me),options:pe}),this.instances.set(ye,Ge),this.instancesOptions.set(ye,pe),this.invokeOnInitCallbacks(Ge,ye),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ye,Ge)}catch{}var Me;return Ge||null}normalizeInstanceIdentifier(ye=v){return this.component?this.component.multipleInstances?ye:v:ye}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class $e{constructor(ye){this.name=ye,this.providers=new Map}addComponent(ye){const pe=this.getProvider(ye.name);if(pe.isComponentSet())throw new Error(`Component ${ye.name} has already been registered with ${this.name}`);pe.setComponent(ye)}addOrOverwriteComponent(ye){this.getProvider(ye.name).isComponentSet()&&this.providers.delete(ye.name),this.addComponent(ye)}getProvider(ye){if(this.providers.has(ye))return this.providers.get(ye);const pe=new re(ye,this);return this.providers.set(ye,pe),pe}getProviders(){return Array.from(this.providers.values())}}},8041:(nn,We,k)=>{k.d(We,{$b:()=>T,Ey:()=>Me,He:()=>$e,Vy:()=>fe});const _=[];var T=function(ye){return ye[ye.DEBUG=0]="DEBUG",ye[ye.VERBOSE=1]="VERBOSE",ye[ye.INFO=2]="INFO",ye[ye.WARN=3]="WARN",ye[ye.ERROR=4]="ERROR",ye[ye.SILENT=5]="SILENT",ye}(T||{});const R={debug:T.DEBUG,verbose:T.VERBOSE,info:T.INFO,warn:T.WARN,error:T.ERROR,silent:T.SILENT},v=T.INFO,re={[T.DEBUG]:"log",[T.VERBOSE]:"log",[T.INFO]:"info",[T.WARN]:"warn",[T.ERROR]:"error"},Se=(ye,pe,...Ge)=>{if(pe<ye.logLevel)return;const it=(new Date).toISOString(),nt=re[pe];if(!nt)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[nt](`[${it}]  ${ye.name}:`,...Ge)};class fe{constructor(pe){this.name=pe,this._logLevel=v,this._logHandler=Se,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in T))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?R[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,T.DEBUG,...pe),this._logHandler(this,T.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,T.VERBOSE,...pe),this._logHandler(this,T.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,T.INFO,...pe),this._logHandler(this,T.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,T.WARN,...pe),this._logHandler(this,T.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,T.ERROR,...pe),this._logHandler(this,T.ERROR,...pe)}}function $e(ye){_.forEach(pe=>{pe.setLogLevel(ye)})}function Me(ye,pe){for(const Ge of _){let it=null;pe&&pe.level&&(it=R[pe.level]),Ge.userLogHandler=null===ye?null:(nt,De,...ct)=>{const at=ct.map(ot=>{if(null==ot)return null;if("string"==typeof ot)return ot;if("number"==typeof ot||"boolean"==typeof ot)return ot.toString();if(ot instanceof Error)return ot.message;try{return JSON.stringify(ot)}catch{return null}}).filter(ot=>ot).join(" ");De>=(it??nt.logLevel)&&ye({level:T[De].toLowerCase(),message:at,args:ct,type:nt.name})}}}},7231:(nn,We,k)=>{k.d(We,{HF:()=>_.X});var _=k(576);k(7852),k(1076),k(8041),k(1362)},7935:(nn,We,k)=>{k.d(We,{A:()=>_.A});var _=k(3345);_.A.registerVersion("firebase","10.13.1","app-compat")},2438:(nn,We,k)=>{var _=k(467),T=k(3345),R=k(576),v=k(1076),fe=(k(7852),k(8041),k(1362));function $e(){return window}function pe(){return pe=(0,_.A)(function*(q,J,se){var _e;const{BuildInfo:Tt}=$e();(0,R.au)(J.sessionId,"AuthEvent did not contain a session ID");const Vt=yield function ot(q){return At.apply(this,arguments)}(J.sessionId),En={};return(0,R.av)()?En.ibi=Tt.packageName:(0,R.aw)()?En.apn=Tt.packageName:(0,R.ax)(q,"operation-not-supported-in-this-environment"),Tt.displayName&&(En.appDisplayName=Tt.displayName),En.sessionId=Vt,(0,R.ay)(q,se,J.type,void 0,null!==(_e=J.eventId)&&void 0!==_e?_e:void 0,En)}),pe.apply(this,arguments)}function it(){return(it=(0,_.A)(function*(q){const{BuildInfo:J}=$e(),se={};(0,R.av)()?se.iosBundleId=J.packageName:(0,R.aw)()?se.androidPackageName=J.packageName:(0,R.ax)(q,"operation-not-supported-in-this-environment"),yield(0,R.az)(q,se)})).apply(this,arguments)}function ct(){return(ct=(0,_.A)(function*(q,J,se){const{cordova:_e}=$e();let Tt=()=>{};try{yield new Promise((Vt,En)=>{let Bn=null;function qn(){var ke;Vt();const $r=null===(ke=_e.plugins.browsertab)||void 0===ke?void 0:ke.close;"function"==typeof $r&&$r(),"function"==typeof se?.close&&se.close()}function Sn(){Bn||(Bn=window.setTimeout(()=>{En((0,R.aB)(q,"redirect-cancelled-by-user"))},2e3))}function Wt(){"visible"===document?.visibilityState&&Sn()}J.addPassiveListener(qn),document.addEventListener("resume",Sn,!1),(0,R.aw)()&&document.addEventListener("visibilitychange",Wt,!1),Tt=()=>{J.removePassiveListener(qn),document.removeEventListener("resume",Sn,!1),document.removeEventListener("visibilitychange",Wt,!1),Bn&&window.clearTimeout(Bn)}})}finally{Tt()}})).apply(this,arguments)}function At(){return(At=(0,_.A)(function*(q){const J=function $t(q){if((0,R.au)(/[0-9a-zA-Z]+/.test(q),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(q);const J=new ArrayBuffer(q.length),se=new Uint8Array(J);for(let _e=0;_e<q.length;_e++)se[_e]=q.charCodeAt(_e);return se}(q),se=yield crypto.subtle.digest("SHA-256",J);return Array.from(new Uint8Array(se)).map(Tt=>Tt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class we extends R.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(J=>{this.resolveInitialized=J})}addPassiveListener(J){this.passiveListeners.add(J)}removePassiveListener(J){this.passiveListeners.delete(J)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(J){return this.resolveInitialized(),this.passiveListeners.forEach(se=>se(J)),super.onEvent(J)}initialized(){var J=this;return(0,_.A)(function*(){yield J.initPromise})()}}function Ue(q){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,_.A)(function*(q){const J=yield xt()._get(un(q));return J&&(yield xt()._remove(un(q))),J})).apply(this,arguments)}function xe(){const q=[];for(let se=0;se<20;se++){const _e=Math.floor(62*Math.random());q.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(_e))}return q.join("")}function xt(){return(0,R.aE)(R.b)}function un(q){return(0,R.aF)("authEvent",q.config.apiKey,q.name)}function Lt(q){if(!q?.includes("?"))return{};const[J,...se]=q.split("?");return(0,v.I9)(se.join("?"))}const Re=class rn{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aG,this._overrideRedirectResult=R.aH}_initialize(J){var se=this;return(0,_.A)(function*(){const _e=J._key();let Tt=se.eventManagers.get(_e);return Tt||(Tt=new we(J),se.eventManagers.set(_e,Tt),se.attachCallbackListeners(J,Tt)),Tt})()}_openPopup(J){(0,R.ax)(J,"operation-not-supported-in-this-environment")}_openRedirect(J,se,_e,Tt){var Vt=this;return(0,_.A)(function*(){!function at(q){var J,se,_e,Tt,Vt,En,Bn,qn,Sn,Wt;const ke=$e();(0,R.aC)("function"==typeof(null===(J=ke?.universalLinks)||void 0===J?void 0:J.subscribe),q,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.aC)(typeof(null===(se=ke?.BuildInfo)||void 0===se?void 0:se.packageName)<"u",q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.aC)("function"==typeof(null===(Vt=null===(Tt=null===(_e=ke?.cordova)||void 0===_e?void 0:_e.plugins)||void 0===Tt?void 0:Tt.browsertab)||void 0===Vt?void 0:Vt.openUrl),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aC)("function"==typeof(null===(qn=null===(Bn=null===(En=ke?.cordova)||void 0===En?void 0:En.plugins)||void 0===Bn?void 0:Bn.browsertab)||void 0===qn?void 0:qn.isAvailable),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aC)("function"==typeof(null===(Wt=null===(Sn=ke?.cordova)||void 0===Sn?void 0:Sn.InAppBrowser)||void 0===Wt?void 0:Wt.open),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(J);const En=yield Vt._initialize(J);yield En.initialized(),En.resetRedirect(),(0,R.aI)(),yield Vt._originValidation(J);const Bn=function ie(q,J,se=null){return{type:J,eventId:se,urlResponse:null,sessionId:xe(),postBody:null,tenantId:q.tenantId,error:(0,R.aB)(q,"no-auth-event")}}(J,_e,Tt);yield function je(q,J){return xt()._set(un(q),J)}(J,Bn);const qn=yield function ye(q,J,se){return pe.apply(this,arguments)}(J,Bn,se),Sn=yield function nt(q){const{cordova:J}=$e();return new Promise(se=>{J.plugins.browsertab.isAvailable(_e=>{let Tt=null;_e?J.plugins.browsertab.openUrl(q):Tt=J.InAppBrowser.open(q,(0,R.aA)()?"_blank":"_system","location=yes"),se(Tt)})})}(qn);return function De(q,J,se){return ct.apply(this,arguments)}(J,En,Sn)})()}_isIframeWebStorageSupported(J,se){throw new Error("Method not implemented.")}_originValidation(J){const se=J._key();return this.originValidationPromises[se]||(this.originValidationPromises[se]=function Ge(q){return it.apply(this,arguments)}(J)),this.originValidationPromises[se]}attachCallbackListeners(J,se){const{universalLinks:_e,handleOpenURL:Tt,BuildInfo:Vt}=$e(),En=setTimeout((0,_.A)(function*(){yield Ue(J),se.onEvent(qe())}),500),Bn=function(){var Wt=(0,_.A)(function*(ke){clearTimeout(En);const $r=yield Ue(J);let Qr=null;$r&&ke?.url&&(Qr=function ce(q,J){var se,_e;const Tt=function ln(q){const J=Lt(q),se=J.link?decodeURIComponent(J.link):void 0,_e=Lt(se).link,Tt=J.deep_link_id?decodeURIComponent(J.deep_link_id):void 0;return Lt(Tt).link||Tt||_e||se||q}(J);if(Tt.includes("/__/auth/callback")){const Vt=Lt(Tt),En=Vt.firebaseError?function jt(q){try{return JSON.parse(q)}catch{return null}}(decodeURIComponent(Vt.firebaseError)):null,Bn=null===(_e=null===(se=En?.code)||void 0===se?void 0:se.split("auth/"))||void 0===_e?void 0:_e[1],qn=Bn?(0,R.aB)(Bn):null;return qn?{type:q.type,eventId:q.eventId,tenantId:q.tenantId,error:qn,urlResponse:null,sessionId:null,postBody:null}:{type:q.type,eventId:q.eventId,tenantId:q.tenantId,sessionId:q.sessionId,urlResponse:Tt,postBody:null}}return null}($r,ke.url)),se.onEvent(Qr||qe())});return function($r){return Wt.apply(this,arguments)}}();typeof _e<"u"&&"function"==typeof _e.subscribe&&_e.subscribe(null,Bn);const qn=Tt,Sn=`${Vt.packageName.toLowerCase()}://`;$e().handleOpenURL=function(){var Wt=(0,_.A)(function*(ke){if(ke.toLowerCase().startsWith(Sn)&&Bn({url:ke}),"function"==typeof qn)try{qn(ke)}catch($r){console.error($r)}});return function(ke){return Wt.apply(this,arguments)}}()}};function qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.aB)("no-auth-event")}}function Kt(){var q;return(null===(q=self?.location)||void 0===q?void 0:q.protocol)||null}function tn(q=(0,v.ZQ)()){return!("file:"!==Kt()&&"ionic:"!==Kt()&&"capacitor:"!==Kt()||!q.toLowerCase().match(/iphone|ipad|ipod|android/))}function st(){try{const q=self.localStorage,J=R.aN();if(q)return q.setItem(J,"1"),q.removeItem(J),!function Ln(q=(0,v.ZQ)()){return function Cn(){return(0,v.lT)()&&11===document?.documentMode}()||function Dn(q=(0,v.ZQ)()){return/Edge\/\d+/.test(q)}(q)}()||(0,v.zW)()}catch{return In()&&(0,v.zW)()}return!1}function In(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kn(){return(function gn(){return"http:"===Kt()||"https:"===Kt()}()||(0,v.sr)()||tn())&&!function sn(){return(0,v.lV)()||(0,v.Ll)()}()&&st()&&!In()}function sr(){return tn()&&typeof document<"u"}function _t(){return(_t=(0,_.A)(function*(){return!!sr()&&new Promise(q=>{const J=setTimeout(()=>{q(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(J),q(!0)})})})).apply(this,arguments)}const Nt={LOCAL:"local",NONE:"none",SESSION:"session"},tt=R.aC,Rt="persistence";function tr(q){return An.apply(this,arguments)}function An(){return(An=(0,_.A)(function*(q){yield q._initializationPromise;const J=kr(),se=R.aF(Rt,q.config.apiKey,q.name);J&&J.setItem(se,q._getPersistence())})).apply(this,arguments)}function kr(){var q;try{return(null===(q=function Zr(){return typeof window<"u"?window:null}())||void 0===q?void 0:q.sessionStorage)||null}catch{return null}}const Wr=R.aC;class jr{constructor(){this.browserResolver=R.aE(R.k),this.cordovaResolver=R.aE(Re),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aG,this._overrideRedirectResult=R.aH}_initialize(J){var se=this;return(0,_.A)(function*(){return yield se.selectUnderlyingResolver(),se.assertedUnderlyingResolver._initialize(J)})()}_openPopup(J,se,_e,Tt){var Vt=this;return(0,_.A)(function*(){return yield Vt.selectUnderlyingResolver(),Vt.assertedUnderlyingResolver._openPopup(J,se,_e,Tt)})()}_openRedirect(J,se,_e,Tt){var Vt=this;return(0,_.A)(function*(){return yield Vt.selectUnderlyingResolver(),Vt.assertedUnderlyingResolver._openRedirect(J,se,_e,Tt)})()}_isIframeWebStorageSupported(J,se){this.assertedUnderlyingResolver._isIframeWebStorageSupported(J,se)}_originValidation(J){return this.assertedUnderlyingResolver._originValidation(J)}get _shouldInitProactively(){return sr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var J=this;return(0,_.A)(function*(){if(J.underlyingResolver)return;const se=yield function St(){return _t.apply(this,arguments)}();J.underlyingResolver=se?J.cordovaResolver:J.browserResolver})()}}function Vi(q){return q.unwrap()}function hs(q){return Li(q)}function Li(q){const{_tokenResponse:J}=q instanceof v.g?q.customData:q;if(!J)return null;if(!(q instanceof v.g)&&"temporaryProof"in J&&"phoneNumber"in J)return R.P.credentialFromResult(q);const se=J.providerId;if(!se||se===R.p.PASSWORD)return null;let _e;switch(se){case R.p.GOOGLE:_e=R.X;break;case R.p.FACEBOOK:_e=R.W;break;case R.p.GITHUB:_e=R.Y;break;case R.p.TWITTER:_e=R.$;break;default:const{oauthIdToken:Tt,oauthAccessToken:Vt,oauthTokenSecret:En,pendingToken:Bn,nonce:qn}=J;return Vt||En||Tt||Bn?Bn?se.startsWith("saml.")?R.aQ._create(se,Bn):R.N._fromParams({providerId:se,signInMethod:se,pendingToken:Bn,idToken:Tt,accessToken:Vt}):new R.Z(se).credential({idToken:Tt,accessToken:Vt,rawNonce:qn}):null}return q instanceof v.g?_e.credentialFromError(q):_e.credentialFromResult(q)}function zt(q,J){return J.catch(se=>{throw se instanceof v.g&&function Nn(q,J){var se;const _e=null===(se=J.customData)||void 0===se?void 0:se._tokenResponse;if("auth/multi-factor-auth-required"===J?.code)J.resolver=new Jt(q,R.as(q,J));else if(_e){const Tt=Li(J),Vt=J;Tt&&(Vt.credential=Tt,Vt.tenantId=_e.tenantId||void 0,Vt.email=_e.email||void 0,Vt.phoneNumber=_e.phoneNumber||void 0)}}(q,se),se}).then(se=>{const Tt=se.user;return{operationType:se.operationType,credential:hs(se),additionalUserInfo:R.aq(se),user:Zt.getOrCreate(Tt)}})}function Un(q,J){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,_.A)(function*(q,J){const se=yield J;return{verificationId:se.verificationId,confirm:_e=>zt(q,se.confirm(_e))}})).apply(this,arguments)}class Jt{constructor(J,se){this.resolver=se,this.auth=function Or(q){return q.wrapped()}(J)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(J){return zt(Vi(this.auth),this.resolver.resolveSignIn(J))}}class Zt{constructor(J){this._delegate=J,this.multiFactor=R.at(J)}static getOrCreate(J){return Zt.USER_MAP.has(J)||Zt.USER_MAP.set(J,new Zt(J)),Zt.USER_MAP.get(J)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(J){return this._delegate.getIdTokenResult(J)}getIdToken(J){return this._delegate.getIdToken(J)}linkAndRetrieveDataWithCredential(J){return this.linkWithCredential(J)}linkWithCredential(J){var se=this;return(0,_.A)(function*(){return zt(se.auth,R.a2(se._delegate,J))})()}linkWithPhoneNumber(J,se){var _e=this;return(0,_.A)(function*(){return Un(_e.auth,R.l(_e._delegate,J,se))})()}linkWithPopup(J){var se=this;return(0,_.A)(function*(){return zt(se.auth,R.d(se._delegate,J,jr))})()}linkWithRedirect(J){var se=this;return(0,_.A)(function*(){return yield tr(R.aJ(se.auth)),R.g(se._delegate,J,jr)})()}reauthenticateAndRetrieveDataWithCredential(J){return this.reauthenticateWithCredential(J)}reauthenticateWithCredential(J){var se=this;return(0,_.A)(function*(){return zt(se.auth,R.a3(se._delegate,J))})()}reauthenticateWithPhoneNumber(J,se){return Un(this.auth,R.r(this._delegate,J,se))}reauthenticateWithPopup(J){return zt(this.auth,R.e(this._delegate,J,jr))}reauthenticateWithRedirect(J){var se=this;return(0,_.A)(function*(){return yield tr(R.aJ(se.auth)),R.h(se._delegate,J,jr)})()}sendEmailVerification(J){return R.ag(this._delegate,J)}unlink(J){var se=this;return(0,_.A)(function*(){return yield R.ap(se._delegate,J),se})()}updateEmail(J){return R.al(this._delegate,J)}updatePassword(J){return R.am(this._delegate,J)}updatePhoneNumber(J){return R.u(this._delegate,J)}updateProfile(J){return R.ak(this._delegate,J)}verifyBeforeUpdateEmail(J,se){return R.ah(this._delegate,J,se)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Zt.USER_MAP=new WeakMap;const Kr=R.aC;let Rn=(()=>{class q{constructor(se,_e){if(this.app=se,_e.isInitialized())return this._delegate=_e.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Tt}=se.options;Kr(Tt,"invalid-api-key",{appName:se.name}),Kr(Tt,"invalid-api-key",{appName:se.name});const Vt=typeof window<"u"?jr:void 0;this._delegate=_e.initialize({options:{persistence:Ve(Tt,se.name),popupRedirectResolver:Vt}}),this._delegate._updateErrorMap(R.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Zt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(se){this._delegate.languageCode=se}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(se){this._delegate.tenantId=se}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(se,_e){R.K(this._delegate,se,_e)}applyActionCode(se){return R.a7(this._delegate,se)}checkActionCode(se){return R.a8(this._delegate,se)}confirmPasswordReset(se,_e){return R.a6(this._delegate,se,_e)}createUserWithEmailAndPassword(se,_e){var Tt=this;return(0,_.A)(function*(){return zt(Tt._delegate,R.aa(Tt._delegate,se,_e))})()}fetchProvidersForEmail(se){return this.fetchSignInMethodsForEmail(se)}fetchSignInMethodsForEmail(se){return R.af(this._delegate,se)}isSignInWithEmailLink(se){return R.ad(this._delegate,se)}getRedirectResult(){var se=this;return(0,_.A)(function*(){Kr(Kn(),se._delegate,"operation-not-supported-in-this-environment");const _e=yield R.j(se._delegate,jr);return _e?zt(se._delegate,Promise.resolve(_e)):{credential:null,user:null}})()}addFrameworkForLogging(se){!function ft(q,J){(0,R.aJ)(q)._logFramework(J)}(this._delegate,se)}onAuthStateChanged(se,_e,Tt){const{next:Vt,error:En,complete:Bn}=xr(se,_e,Tt);return this._delegate.onAuthStateChanged(Vt,En,Bn)}onIdTokenChanged(se,_e,Tt){const{next:Vt,error:En,complete:Bn}=xr(se,_e,Tt);return this._delegate.onIdTokenChanged(Vt,En,Bn)}sendSignInLinkToEmail(se,_e){return R.ac(this._delegate,se,_e)}sendPasswordResetEmail(se,_e){return R.a5(this._delegate,se,_e||void 0)}setPersistence(se){var _e=this;return(0,_.A)(function*(){let Tt;switch(function Yn(q,J){tt(Object.values(Nt).includes(J),q,"invalid-persistence-type"),(0,v.lV)()?tt(J!==Nt.SESSION,q,"unsupported-persistence-type"):(0,v.Ll)()?tt(J===Nt.NONE,q,"unsupported-persistence-type"):In()?tt(J===Nt.NONE||J===Nt.LOCAL&&(0,v.zW)(),q,"unsupported-persistence-type"):tt(J===Nt.NONE||st(),q,"unsupported-persistence-type")}(_e._delegate,se),se){case Nt.SESSION:Tt=R.a;break;case Nt.LOCAL:Tt=(yield R.aE(R.i)._isAvailable())?R.i:R.b;break;case Nt.NONE:Tt=R.U;break;default:return R.ax("argument-error",{appName:_e._delegate.name})}return _e._delegate.setPersistence(Tt)})()}signInAndRetrieveDataWithCredential(se){return this.signInWithCredential(se)}signInAnonymously(){return zt(this._delegate,R.a0(this._delegate))}signInWithCredential(se){return zt(this._delegate,R.a1(this._delegate,se))}signInWithCustomToken(se){return zt(this._delegate,R.a4(this._delegate,se))}signInWithEmailAndPassword(se,_e){return zt(this._delegate,R.ab(this._delegate,se,_e))}signInWithEmailLink(se,_e){return zt(this._delegate,R.ae(this._delegate,se,_e))}signInWithPhoneNumber(se,_e){return Un(this._delegate,R.s(this._delegate,se,_e))}signInWithPopup(se){var _e=this;return(0,_.A)(function*(){return Kr(Kn(),_e._delegate,"operation-not-supported-in-this-environment"),zt(_e._delegate,R.c(_e._delegate,se,jr))})()}signInWithRedirect(se){var _e=this;return(0,_.A)(function*(){return Kr(Kn(),_e._delegate,"operation-not-supported-in-this-environment"),yield tr(_e._delegate),R.f(_e._delegate,se,jr)})()}updateCurrentUser(se){return this._delegate.updateCurrentUser(se)}verifyPasswordResetCode(se){return R.a9(this._delegate,se)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return q.Persistence=Nt,q})();function xr(q,J,se){let _e=q;"function"!=typeof q&&({next:_e,error:J,complete:se}=q);const Tt=_e;return{next:En=>Tt(En&&Zt.getOrCreate(En)),error:J,complete:se}}function Ve(q,J){const se=function bn(q,J){const se=kr();if(!se)return[];const _e=R.aF(Rt,q,J);switch(se.getItem(_e)){case Nt.NONE:return[R.U];case Nt.LOCAL:return[R.i,R.a];case Nt.SESSION:return[R.a];default:return[]}}(q,J);if(typeof self<"u"&&!se.includes(R.i)&&se.push(R.i),typeof window<"u")for(const _e of[R.b,R.a])se.includes(_e)||se.push(_e);return se.includes(R.U)||se.push(R.U),se}class Ce{constructor(){this.providerId="phone",this._delegate=new R.P(Vi(T.A.auth()))}static credential(J,se){return R.P.credential(J,se)}verifyPhoneNumber(J,se){return this._delegate.verifyPhoneNumber(J,se)}unwrap(){return this._delegate}}Ce.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,Ce.PROVIDER_ID=R.P.PROVIDER_ID;const Ie=R.aC;class Qe{constructor(J,se,_e=T.A.app()){var Tt;Ie(null===(Tt=_e.options)||void 0===Tt?void 0:Tt.apiKey,"invalid-api-key",{appName:_e.name}),this._delegate=new R.R(_e.auth(),J,se),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function me(q){q.INTERNAL.registerComponent(new fe.uA("auth-compat",J=>{const se=J.getProvider("app-compat").getImmediate(),_e=J.getProvider("auth");return new Rn(se,_e)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.V,FacebookAuthProvider:R.W,GithubAuthProvider:R.Y,GoogleAuthProvider:R.X,OAuthProvider:R.Z,SAMLAuthProvider:R._,PhoneAuthProvider:Ce,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:Qe,TwitterAuthProvider:R.$,Auth:Rn,AuthCredential:R.L,Error:v.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),q.registerVersion("@firebase/auth-compat","0.5.13")}(T.A)},467:(nn,We,k)=>{function _(R,v,re,Se,fe,$e,Me){try{var ye=R[$e](Me),pe=ye.value}catch(Ge){return void re(Ge)}ye.done?v(pe):Promise.resolve(pe).then(Se,fe)}function T(R){return function(){var v=this,re=arguments;return new Promise(function(Se,fe){var $e=R.apply(v,re);function Me(pe){_($e,Se,fe,Me,ye,"next",pe)}function ye(pe){_($e,Se,fe,Me,ye,"throw",pe)}Me(void 0)})}}k.d(We,{A:()=>T})},1635:(nn,We,k)=>{function v(Re,qe){var ft={};for(var yt in Re)Object.prototype.hasOwnProperty.call(Re,yt)&&qe.indexOf(yt)<0&&(ft[yt]=Re[yt]);if(null!=Re&&"function"==typeof Object.getOwnPropertySymbols){var It=0;for(yt=Object.getOwnPropertySymbols(Re);It<yt.length;It++)qe.indexOf(yt[It])<0&&Object.prototype.propertyIsEnumerable.call(Re,yt[It])&&(ft[yt[It]]=Re[yt[It]])}return ft}function Ge(Re,qe,ft,yt){return new(ft||(ft=Promise))(function(Je,Kt){function gn(Cn){try{sn(yt.next(Cn))}catch(Dn){Kt(Dn)}}function tn(Cn){try{sn(yt.throw(Cn))}catch(Dn){Kt(Dn)}}function sn(Cn){Cn.done?Je(Cn.value):function It(Je){return Je instanceof ft?Je:new ft(function(Kt){Kt(Je)})}(Cn.value).then(gn,tn)}sn((yt=yt.apply(Re,qe||[])).next())})}function ae(Re){return this instanceof ae?(this.v=Re,this):new ae(Re)}function we(Re,qe,ft){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var It,yt=ft.apply(Re,qe||[]),Je=[];return It=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),gn("next"),gn("throw"),gn("return",function Kt(st){return function(In){return Promise.resolve(In).then(st,Dn)}}),It[Symbol.asyncIterator]=function(){return this},It;function gn(st,In){yt[st]&&(It[st]=function(Kn){return new Promise(function(sr,St){Je.push([st,Kn,sr,St])>1||tn(st,Kn)})},In&&(It[st]=In(It[st])))}function tn(st,In){try{!function sn(st){st.value instanceof ae?Promise.resolve(st.value.v).then(Cn,Dn):Ln(Je[0][2],st)}(yt[st](In))}catch(Kn){Ln(Je[0][3],Kn)}}function Cn(st){tn("next",st)}function Dn(st){tn("throw",st)}function Ln(st,In){st(In),Je.shift(),Je.length&&tn(Je[0][0],Je[0][1])}}function je(Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ft,qe=Re[Symbol.asyncIterator];return qe?qe.call(Re):(Re=function ct(Re){var qe="function"==typeof Symbol&&Symbol.iterator,ft=qe&&Re[qe],yt=0;if(ft)return ft.call(Re);if(Re&&"number"==typeof Re.length)return{next:function(){return Re&&yt>=Re.length&&(Re=void 0),{value:Re&&Re[yt++],done:!Re}}};throw new TypeError(qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Re),ft={},yt("next"),yt("throw"),yt("return"),ft[Symbol.asyncIterator]=function(){return this},ft);function yt(Je){ft[Je]=Re[Je]&&function(Kt){return new Promise(function(gn,tn){!function It(Je,Kt,gn,tn){Promise.resolve(tn).then(function(sn){Je({value:sn,done:gn})},Kt)}(gn,tn,(Kt=Re[Je](Kt)).done,Kt.value)})}}}k.d(We,{AQ:()=>we,N3:()=>ae,Tt:()=>v,sH:()=>Ge,xN:()=>je}),"function"==typeof SuppressedError&&SuppressedError}},nn=>{nn(nn.s=7827)}]);