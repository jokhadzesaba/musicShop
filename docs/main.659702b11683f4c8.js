"use strict";(self.webpackChunkmusicshop=self.webpackChunkmusicshop||[]).push([[792],{576:(Zt,qe,x)=>{x.d(qe,{$:()=>ls,A:()=>_e,G:()=>De,K:()=>Qi,L:()=>sr,N:()=>Bi,P:()=>Yc,R:()=>dt,U:()=>Wn,V:()=>bs,W:()=>Ls,X:()=>vr,Y:()=>Lo,Z:()=>Qo,_:()=>lr,a:()=>Yo,a0:()=>K,a1:()=>ca,a2:()=>Ca,a3:()=>ec,a4:()=>ua,a5:()=>la,a6:()=>I,a7:()=>L,a8:()=>fe,a9:()=>Ue,aA:()=>Ki,aB:()=>de,aC:()=>ce,aD:()=>Lu,aE:()=>Ft,aF:()=>Xn,aG:()=>Vu,aH:()=>nf,aI:()=>Cd,aJ:()=>Ut,aN:()=>Jn,aQ:()=>Ur,aa:()=>Pt,ab:()=>gn,ac:()=>Ir,ad:()=>Hn,ae:()=>Dn,af:()=>di,ag:()=>Ss,ah:()=>$i,ak:()=>Ta,al:()=>Da,am:()=>Aa,ap:()=>tr,aq:()=>Ee,as:()=>Ei,at:()=>El,au:()=>We,av:()=>us,aw:()=>ys,ax:()=>ue,ay:()=>nu,az:()=>eu,b:()=>da,c:()=>ef,d:()=>tf,e:()=>Dl,f:()=>Td,g:()=>Rl,h:()=>Dd,i:()=>wl,j:()=>Rr,k:()=>Bu,l:()=>Ac,m:()=>$u,p:()=>Le,r:()=>mo,s:()=>pr,u:()=>ku});var _=x(467),V=x(7852),M=x(1076),w=x(8041),se=x(1635),Pe=x(1362);const Le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},_e={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const De=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Be=function Tt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},At=new M.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),st=new w.Vy("@firebase/auth");function gt(E,...h){st.logLevel<=w.$b.ERROR&&st.error(`Auth (${V.SDK_VERSION}): ${E}`,...h)}function ue(E,...h){throw et(E,...h)}function de(E,...h){return et(E,...h)}function ae(E,h,f){const A=Object.assign(Object.assign({},Be()),{[h]:f});return new M.FA("auth","Firebase",A).create(h,{appName:E.name})}function Ve(E){return ae(E,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ye(E,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&ue(E,"argument-error"),ae(E,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function et(E,...h){if("string"!=typeof E){const f=h[0],A=[...h.slice(1)];return A[0]&&(A[0].appName=E.name),E._errorFactory.create(f,...A)}return At.create(E,...h)}function ce(E,h,...f){if(!E)throw et(h,...f)}function Ne(E){const h="INTERNAL ASSERTION FAILED: "+E;throw gt(h),new Error(h)}function We(E,h){E||Ne(h)}function pn(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function bn(){return"http:"===Fn()||"https:"===Fn()}function Fn(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class An{constructor(h,f){this.shortDelay=h,this.longDelay=f,We(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,M.jZ)()||(0,M.lV)()}get(){return function xn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bn()||(0,M.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ke(E,h){We(E.emulator,"Emulator should always be set here");const{url:f}=E.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class Qe{static initialize(h,f,A){this.fetchImpl=h,f&&(this.headersImpl=f),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ne("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ne("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ne("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ct={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_t=new An(3e4,6e4);function vt(E,h){return E.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:E.tenantId}):h}function Ze(E,h,f,A){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,_.A)(function*(E,h,f,A,W={}){return un(E,W,(0,_.A)(function*(){let oe={},Fe={};A&&("GET"===h?Fe=A:oe={body:JSON.stringify(A)});const Dt=(0,M.Am)(Object.assign({key:E.config.apiKey},Fe)).slice(1),jt=yield E._getAdditionalHeaders();return jt["Content-Type"]="application/json",E.languageCode&&(jt["X-Firebase-Locale"]=E.languageCode),Qe.fetch()(En(E,E.config.apiHost,f,Dt),Object.assign({method:h,headers:jt,referrerPolicy:"no-referrer"},oe))}))})).apply(this,arguments)}function un(E,h,f){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,_.A)(function*(E,h,f){E._canInitEmulator=!1;const A=Object.assign(Object.assign({},ct),h);try{const W=new it(E),oe=yield Promise.race([f(),W.promise]);W.clearNetworkTimeout();const Fe=yield oe.json();if("needConfirmation"in Fe)throw yn(E,"account-exists-with-different-credential",Fe);if(oe.ok&&!("errorMessage"in Fe))return Fe;{const Dt=oe.ok?Fe.errorMessage:Fe.error.message,[jt,Cn]=Dt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===jt)throw yn(E,"credential-already-in-use",Fe);if("EMAIL_EXISTS"===jt)throw yn(E,"email-already-in-use",Fe);if("USER_DISABLED"===jt)throw yn(E,"user-disabled",Fe);const zn=A[jt]||jt.toLowerCase().replace(/[_\s]+/g,"-");if(Cn)throw ae(E,zn,Cn);ue(E,zn)}}catch(W){if(W instanceof M.g)throw W;ue(E,"network-request-failed",{message:String(W)})}})).apply(this,arguments)}function en(E,h,f,A){return vn.apply(this,arguments)}function vn(){return(vn=(0,_.A)(function*(E,h,f,A,W={}){const oe=yield Ze(E,h,f,A,W);return"mfaPendingCredential"in oe&&ue(E,"multi-factor-auth-required",{_serverResponse:oe}),oe})).apply(this,arguments)}function En(E,h,f,A){const W=`${h}${f}?${A}`;return E.config.emulator?ke(E.config,W):`${E.config.apiScheme}://${W}`}function jn(E){switch(E){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class it{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,A)=>{this.timer=setTimeout(()=>A(de(this.auth,"network-request-failed")),_t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yn(E,h,f){const A={appName:E.name};f.email&&(A.email=f.email),f.phoneNumber&&(A.phoneNumber=f.phoneNumber);const W=de(E,h,A);return W.customData._tokenResponse=f,W}function Qn(E){return void 0!==E&&void 0!==E.getResponse}function or(E){return void 0!==E&&void 0!==E.enterprise}class St{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===h)return jn(f.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function ni(){return(ni=(0,_.A)(function*(E){return(yield Ze(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ot(E,h){return nt.apply(this,arguments)}function nt(){return(nt=(0,_.A)(function*(E,h){return Ze(E,"GET","/v2/recaptchaConfig",vt(E,h))})).apply(this,arguments)}function er(){return(er=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function wn(){return(wn=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Pn(E,h){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function zr(E){if(E)try{const h=new Date(Number(E));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Or(){return(Or=(0,_.A)(function*(E,h=!1){const f=(0,M.Ku)(E),A=yield f.getIdToken(h),W=On(A);ce(W&&W.exp&&W.auth_time&&W.iat,f.auth,"internal-error");const oe="object"==typeof W.firebase?W.firebase:void 0,Fe=oe?.sign_in_provider;return{claims:W,token:A,authTime:zr(xi(W.auth_time)),issuedAtTime:zr(xi(W.iat)),expirationTime:zr(xi(W.exp)),signInProvider:Fe||null,signInSecondFactor:oe?.sign_in_second_factor||null}})).apply(this,arguments)}function xi(E){return 1e3*Number(E)}function On(E){const[h,f,A]=E.split(".");if(void 0===h||void 0===f||void 0===A)return gt("JWT malformed, contained fewer than 3 sections"),null;try{const W=(0,M.u)(f);return W?JSON.parse(W):(gt("Failed to decode base64 JWT payload"),null)}catch(W){return gt("Caught error parsing JWT payload as JSON",W?.toString()),null}}function Di(E){const h=On(E);return ce(h,"internal-error"),ce(typeof h.exp<"u","internal-error"),ce(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}function Ht(E,h){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,_.A)(function*(E,h,f=!1){if(f)return h;try{return yield h}catch(A){throw A instanceof M.g&&function _r({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(A)&&E.auth.currentUser===E&&(yield E.auth.signOut()),A}})).apply(this,arguments)}class qt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const W=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,W)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const A=this.getInterval(h);this.timerId=setTimeout((0,_.A)(function*(){yield f.iteration()}),A)}iteration(){var h=this;return(0,_.A)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class Xt{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=zr(this.lastLoginAt),this.creationTime=zr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kr(E){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,_.A)(function*(E){var h;const f=E.auth,A=yield E.getIdToken(),W=yield Ht(E,Pn(f,{idToken:A}));ce(W?.users.length,f,"internal-error");const oe=W.users[0];E._notifyReloadListener(oe);const Fe=null!==(h=oe.providerUserInfo)&&void 0!==h&&h.length?Ce(oe.providerUserInfo):[],Dt=function we(E,h){return[...E.filter(A=>!h.some(W=>W.providerId===A.providerId)),...h]}(E.providerData,Fe),zn=!!E.isAnonymous&&!(E.email&&oe.passwordHash||Dt?.length),Dr={uid:oe.localId,displayName:oe.displayName||null,photoURL:oe.photoUrl||null,email:oe.email||null,emailVerified:oe.emailVerified||!1,phoneNumber:oe.phoneNumber||null,tenantId:oe.tenantId||null,providerData:Dt,metadata:new Xt(oe.createdAt,oe.lastLoginAt),isAnonymous:zn};Object.assign(E,Dr)})).apply(this,arguments)}function xe(){return(xe=(0,_.A)(function*(E){const h=(0,M.Ku)(E);yield Kr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ce(E){return E.map(h=>{var{providerId:f}=h,A=(0,se.Tt)(h,["providerId"]);return{providerId:f,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function Nt(){return(Nt=(0,_.A)(function*(E,h){const f=yield un(E,{},(0,_.A)(function*(){const A=(0,M.Am)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:W,apiKey:oe}=E.config,Fe=En(E,W,"/v1/token",`key=${oe}`),Dt=yield E._getAdditionalHeaders();return Dt["Content-Type"]="application/x-www-form-urlencoded",Qe.fetch()(Fe,{method:"POST",headers:Dt,body:A})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function q(){return(q=(0,_.A)(function*(E,h){return Ze(E,"POST","/v2/accounts:revokeToken",vt(E,h))})).apply(this,arguments)}class J{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ce(h.idToken,"internal-error"),ce(typeof h.idToken<"u","internal-error"),ce(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):Di(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}updateFromIdToken(h){ce(0!==h.length,"internal-error");const f=Di(h);this.updateTokensAndExpiration(h,null,f)}getToken(h,f=!1){var A=this;return(0,_.A)(function*(){return f||!A.accessToken||A.isExpired?(ce(A.refreshToken,h,"user-token-expired"),A.refreshToken?(yield A.refresh(h,A.refreshToken),A.accessToken):null):A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var A=this;return(0,_.A)(function*(){const{accessToken:W,refreshToken:oe,expiresIn:Fe}=yield function Ke(E,h){return Nt.apply(this,arguments)}(h,f);A.updateTokensAndExpiration(W,oe,Number(Fe))})()}updateTokensAndExpiration(h,f,A){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(h,f){const{refreshToken:A,accessToken:W,expirationTime:oe}=f,Fe=new J;return A&&(ce("string"==typeof A,"internal-error",{appName:h}),Fe.refreshToken=A),W&&(ce("string"==typeof W,"internal-error",{appName:h}),Fe.accessToken=W),oe&&(ce("number"==typeof oe,"internal-error",{appName:h}),Fe.expirationTime=oe),Fe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new J,this.toJSON())}_performRefresh(){return Ne("not implemented")}}function ie(E,h){ce("string"==typeof E||typeof E>"u","internal-error",{appName:h})}class me{constructor(h){var{uid:f,auth:A,stsTokenManager:W}=h,oe=(0,se.Tt)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=A,this.stsTokenManager=W,this.accessToken=W.accessToken,this.displayName=oe.displayName||null,this.email=oe.email||null,this.emailVerified=oe.emailVerified||!1,this.phoneNumber=oe.phoneNumber||null,this.photoURL=oe.photoURL||null,this.isAnonymous=oe.isAnonymous||!1,this.tenantId=oe.tenantId||null,this.providerData=oe.providerData?[...oe.providerData]:[],this.metadata=new Xt(oe.createdAt||void 0,oe.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,_.A)(function*(){const A=yield Ht(f,f.stsTokenManager.getToken(f.auth,h));return ce(A,f.auth,"internal-error"),f.accessToken!==A&&(f.accessToken=A,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),A})()}getIdTokenResult(h){return function Gi(E){return Or.apply(this,arguments)}(this,h)}reload(){return function Yr(E){return xe.apply(this,arguments)}(this)}_assign(h){this!==h&&(ce(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new me(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var A=this;return(0,_.A)(function*(){let W=!1;h.idToken&&h.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(h),W=!0),f&&(yield Kr(A)),yield A.auth._persistUserIfCurrent(A),W&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var h=this;return(0,_.A)(function*(){if((0,V._isFirebaseServerApp)(h.auth.app))return Promise.reject(Ve(h.auth));const f=yield h.getIdToken();return yield Ht(h,function Mt(E,h){return er.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var A,W,oe,Fe,Dt,jt,Cn,zn;const Dr=null!==(A=f.displayName)&&void 0!==A?A:void 0,oo=null!==(W=f.email)&&void 0!==W?W:void 0,Ra=null!==(oe=f.phoneNumber)&&void 0!==oe?oe:void 0,Hu=null!==(Fe=f.photoURL)&&void 0!==Fe?Fe:void 0,Gu=null!==(Dt=f.tenantId)&&void 0!==Dt?Dt:void 0,zu=null!==(jt=f._redirectEventId)&&void 0!==jt?jt:void 0,jl=null!==(Cn=f.createdAt)&&void 0!==Cn?Cn:void 0,$l=null!==(zn=f.lastLoginAt)&&void 0!==zn?zn:void 0,{uid:za,emailVerified:na,isAnonymous:Wu,providerData:iu,stsTokenManager:Ku}=f;ce(za&&Ku,h,"internal-error");const hc=J.fromJSON(this.name,Ku);ce("string"==typeof za,h,"internal-error"),ie(Dr,h.name),ie(oo,h.name),ce("boolean"==typeof na,h,"internal-error"),ce("boolean"==typeof Wu,h,"internal-error"),ie(Ra,h.name),ie(Hu,h.name),ie(Gu,h.name),ie(zu,h.name),ie(jl,h.name),ie($l,h.name);const Wa=new me({uid:za,auth:h,email:oo,emailVerified:na,displayName:Dr,isAnonymous:Wu,photoURL:Hu,phoneNumber:Ra,tenantId:Gu,stsTokenManager:hc,createdAt:jl,lastLoginAt:$l});return iu&&Array.isArray(iu)&&(Wa.providerData=iu.map(Os=>Object.assign({},Os))),zu&&(Wa._redirectEventId=zu),Wa}static _fromIdTokenResponse(h,f,A=!1){return(0,_.A)(function*(){const W=new J;W.updateFromServerResponse(f);const oe=new me({uid:f.localId,auth:h,stsTokenManager:W,isAnonymous:A});return yield Kr(oe),oe})()}static _fromGetAccountInfoResponse(h,f,A){return(0,_.A)(function*(){const W=f.users[0];ce(void 0!==W.localId,"internal-error");const oe=void 0!==W.providerUserInfo?Ce(W.providerUserInfo):[],Fe=!(W.email&&W.passwordHash||oe?.length),Dt=new J;Dt.updateFromIdToken(A);const jt=new me({uid:W.localId,auth:h,stsTokenManager:Dt,isAnonymous:Fe}),Cn={uid:W.localId,displayName:W.displayName||null,photoURL:W.photoUrl||null,email:W.email||null,emailVerified:W.emailVerified||!1,phoneNumber:W.phoneNumber||null,tenantId:W.tenantId||null,providerData:oe,metadata:new Xt(W.createdAt,W.lastLoginAt),isAnonymous:!(W.email&&W.passwordHash||oe?.length)};return Object.assign(jt,Cn),jt})()}}const It=new Map;function Ft(E){We(E instanceof Function,"Expected a class definition");let h=It.get(E);return h?(We(h instanceof E,"Instance stored in cache mismatched with class"),h):(h=new E,It.set(E,h),h)}const Wn=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.A)(function*(){return!0})()}_set(f,A){var W=this;return(0,_.A)(function*(){W.storage[f]=A})()}_get(f){var A=this;return(0,_.A)(function*(){const W=A.storage[f];return void 0===W?null:W})()}_remove(f){var A=this;return(0,_.A)(function*(){delete A.storage[f]})()}_addListener(f,A){}_removeListener(f,A){}}return E.type="NONE",E})();function Xn(E,h,f){return`firebase:${E}:${h}:${f}`}class Tn{constructor(h,f,A){this.persistence=h,this.auth=f,this.userKey=A;const{config:W,name:oe}=this.auth;this.fullUserKey=Xn(this.userKey,W.apiKey,oe),this.fullPersistenceKey=Xn("persistence",W.apiKey,oe),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,_.A)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?me._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,_.A)(function*(){if(f.persistence===h)return;const A=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,A?f.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,A="authUser"){return(0,_.A)(function*(){if(!f.length)return new Tn(Ft(Wn),h,A);const W=(yield Promise.all(f.map(function(){var Cn=(0,_.A)(function*(zn){if(yield zn._isAvailable())return zn});return function(zn){return Cn.apply(this,arguments)}}()))).filter(Cn=>Cn);let oe=W[0]||Ft(Wn);const Fe=Xn(A,h.config.apiKey,h.name);let Dt=null;for(const Cn of f)try{const zn=yield Cn._get(Fe);if(zn){const Dr=me._fromJSON(h,zn);Cn!==oe&&(Dt=Dr),oe=Cn;break}}catch{}const jt=W.filter(Cn=>Cn._shouldAllowMigration);return oe._shouldAllowMigration&&jt.length?(oe=jt[0],Dt&&(yield oe._set(Fe,Dt.toJSON())),yield Promise.all(f.map(function(){var Cn=(0,_.A)(function*(zn){if(zn!==oe)try{yield zn._remove(Fe)}catch{}});return function(zn){return Cn.apply(this,arguments)}}())),new Tn(oe,h,A)):new Tn(oe,h,A)})()}}function $t(E){const h=E.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(rs(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Me(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(ar(h))return"Blackberry";if(fs(h))return"Webos";if(Lr(h))return"Safari";if((h.includes("chrome/")||Jr(h))&&!h.includes("edge/"))return"Chrome";if(ys(h))return"Android";{const A=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===A?.length)return A[1]}return"Other"}function Me(E=(0,M.ZQ)()){return/firefox\//i.test(E)}function Lr(E=(0,M.ZQ)()){const h=E.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Jr(E=(0,M.ZQ)()){return/crios\//i.test(E)}function rs(E=(0,M.ZQ)()){return/iemobile/i.test(E)}function ys(E=(0,M.ZQ)()){return/android/i.test(E)}function ar(E=(0,M.ZQ)()){return/blackberry/i.test(E)}function fs(E=(0,M.ZQ)()){return/webos/i.test(E)}function us(E=(0,M.ZQ)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function Ki(E=(0,M.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function xt(E=(0,M.ZQ)()){return us(E)||ys(E)||fs(E)||ar(E)||/windows phone/i.test(E)||rs(E)}function nn(E,h=[]){let f;switch(E){case"Browser":f=$t((0,M.ZQ)());break;case"Worker":f=`${$t((0,M.ZQ)())}-${E}`;break;default:f=E}const A=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${V.SDK_VERSION}/${A}`}class ne{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const A=oe=>new Promise((Fe,Dt)=>{try{Fe(h(oe))}catch(jt){Dt(jt)}});A.onAbort=f,this.queue.push(A);const W=this.queue.length-1;return()=>{this.queue[W]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,_.A)(function*(){if(f.auth.currentUser===h)return;const A=[];try{for(const W of f.queue)yield W(h),W.onAbort&&A.push(W.onAbort)}catch(W){A.reverse();for(const oe of A)try{oe()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:W?.message})}})()}}function Ie(){return(Ie=(0,_.A)(function*(E,h={}){return Ze(E,"GET","/v2/passwordPolicy",vt(E,h))})).apply(this,arguments)}class Xe{constructor(h){var f,A,W,oe;const Fe=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=Fe.minPasswordLength)&&void 0!==f?f:6,Fe.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Fe.maxPasswordLength),void 0!==Fe.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Fe.containsLowercaseCharacter),void 0!==Fe.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Fe.containsUppercaseCharacter),void 0!==Fe.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Fe.containsNumericCharacter),void 0!==Fe.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Fe.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(W=null===(A=h.allowedNonAlphanumericCharacters)||void 0===A?void 0:A.join(""))&&void 0!==W?W:"",this.forceUpgradeOnSignin=null!==(oe=h.forceUpgradeOnSignin)&&void 0!==oe&&oe,this.schemaVersion=h.schemaVersion}validatePassword(h){var f,A,W,oe,Fe,Dt;const jt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,jt),this.validatePasswordCharacterOptions(h,jt),jt.isValid&&(jt.isValid=null===(f=jt.meetsMinPasswordLength)||void 0===f||f),jt.isValid&&(jt.isValid=null===(A=jt.meetsMaxPasswordLength)||void 0===A||A),jt.isValid&&(jt.isValid=null===(W=jt.containsLowercaseLetter)||void 0===W||W),jt.isValid&&(jt.isValid=null===(oe=jt.containsUppercaseLetter)||void 0===oe||oe),jt.isValid&&(jt.isValid=null===(Fe=jt.containsNumericCharacter)||void 0===Fe||Fe),jt.isValid&&(jt.isValid=null===(Dt=jt.containsNonAlphanumericCharacter)||void 0===Dt||Dt),jt}validatePasswordLengthOptions(h,f){const A=this.customStrengthOptions.minPasswordLength,W=this.customStrengthOptions.maxPasswordLength;A&&(f.meetsMinPasswordLength=h.length>=A),W&&(f.meetsMaxPasswordLength=h.length<=W)}validatePasswordCharacterOptions(h,f){let A;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let W=0;W<h.length;W++)A=h.charAt(W),this.updatePasswordCharacterOptionsStatuses(f,A>="a"&&A<="z",A>="A"&&A<="Z",A>="0"&&A<="9",this.allowedNonAlphanumericCharacters.includes(A))}updatePasswordCharacterOptionsStatuses(h,f,A,W,oe){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=A)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=W)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=oe))}}class Kt{constructor(h,f,A,W){this.app=h,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=A,this.config=W,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $n(this),this.idTokenSubscription=new $n(this),this.beforeStateQueue=new ne(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=At,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=W.sdkClientVersion}_initializeWithPersistence(h,f){var A=this;return f&&(this._popupRedirectResolver=Ft(f)),this._initializationPromise=this.queue((0,_.A)(function*(){var W,oe;if(!A._deleted&&(A.persistenceManager=yield Tn.create(A,h),!A._deleted)){if(null!==(W=A._popupRedirectResolver)&&void 0!==W&&W._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch{}yield A.initializeCurrentUser(f),A.lastNotifiedUid=(null===(oe=A.currentUser)||void 0===oe?void 0:oe.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,_.A)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(h){var f=this;return(0,_.A)(function*(){try{const A=yield Pn(f,{idToken:h}),W=yield me._fromGetAccountInfoResponse(f,A,h);yield f.directlySetCurrentUser(W)}catch(A){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",A),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(h){var f=this;return(0,_.A)(function*(){var A;if((0,V._isFirebaseServerApp)(f.app)){const Dt=f.app.settings.authIdToken;return Dt?new Promise(jt=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(Dt).then(jt,jt))}):f.directlySetCurrentUser(null)}const W=yield f.assertedPersistence.getCurrentUser();let oe=W,Fe=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Dt=null===(A=f.redirectUser)||void 0===A?void 0:A._redirectEventId,jt=oe?._redirectEventId,Cn=yield f.tryRedirectSignIn(h);(!Dt||Dt===jt)&&Cn?.user&&(oe=Cn.user,Fe=!0)}if(!oe)return f.directlySetCurrentUser(null);if(!oe._redirectEventId){if(Fe)try{yield f.beforeStateQueue.runMiddleware(oe)}catch(Dt){oe=W,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Dt))}return oe?f.reloadAndSetCurrentUserOrClear(oe):f.directlySetCurrentUser(null)}return ce(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===oe._redirectEventId?f.directlySetCurrentUser(oe):f.reloadAndSetCurrentUserOrClear(oe)})()}tryRedirectSignIn(h){var f=this;return(0,_.A)(function*(){let A=null;try{A=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch{yield f._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,_.A)(function*(){try{yield Kr(h)}catch(A){if("auth/network-request-failed"!==A?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function fn(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var h=this;return(0,_.A)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,_.A)(function*(){if((0,V._isFirebaseServerApp)(f.app))return Promise.reject(Ve(f));const A=h?(0,M.Ku)(h):null;return A&&ce(A.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(A&&A._clone(f))})()}_updateCurrentUser(h,f=!1){var A=this;return(0,_.A)(function*(){if(!A._deleted)return h&&ce(A.tenantId===h.tenantId,A,"tenant-id-mismatch"),f||(yield A.beforeStateQueue.runMiddleware(h)),A.queue((0,_.A)(function*(){yield A.directlySetCurrentUser(h),A.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,_.A)(function*(){return(0,V._isFirebaseServerApp)(h.app)?Promise.reject(Ve(h)):(yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0))})()}setPersistence(h){var f=this;return(0,V._isFirebaseServerApp)(this.app)?Promise.reject(Ve(this)):this.queue((0,_.A)(function*(){yield f.assertedPersistence.setPersistence(Ft(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var f=this;return(0,_.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const A=f._getPasswordPolicyInternal();return A.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):A.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,_.A)(function*(){const f=yield function ye(E){return Ie.apply(this,arguments)}(h),A=new Xe(f);null===h.tenantId?h._projectPasswordPolicy=A:h._tenantPasswordPolicies[h.tenantId]=A})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new M.FA("auth","Firebase",h())}onAuthStateChanged(h,f,A){return this.registerStateListener(this.authStateSubscription,h,f,A)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,A){return this.registerStateListener(this.idTokenSubscription,h,f,A)}authStateReady(){return new Promise((h,f)=>{if(this.currentUser)h();else{const A=this.onAuthStateChanged(()=>{A(),h()},f)}})}revokeAccessToken(h){var f=this;return(0,_.A)(function*(){if(f.currentUser){const A=yield f.currentUser.getIdToken(),W={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:h,idToken:A};null!=f.tenantId&&(W.tenantId=f.tenantId),yield function ge(E,h){return q.apply(this,arguments)}(f,W)}})()}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var A=this;return(0,_.A)(function*(){const W=yield A.getOrInitRedirectPersistenceManager(f);return null===h?W.removeCurrentUser():W.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,_.A)(function*(){if(!f.redirectPersistenceManager){const A=h&&Ft(h)||f._popupRedirectResolver;ce(A,f,"argument-error"),f.redirectPersistenceManager=yield Tn.create(f,[Ft(A._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,_.A)(function*(){var A,W;return f._isInitialized&&(yield f.queue((0,_.A)(function*(){}))),(null===(A=f._currentUser)||void 0===A?void 0:A._redirectEventId)===h?f._currentUser:(null===(W=f.redirectUser)||void 0===W?void 0:W._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,_.A)(function*(){if(h===f.currentUser)return f.queue((0,_.A)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,A,W){if(this._deleted)return()=>{};const oe="function"==typeof f?f:f.next.bind(f);let Fe=!1;const Dt=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(Dt,this,"internal-error"),Dt.then(()=>{Fe||oe(this.currentUser)}),"function"==typeof f){const jt=h.addObserver(f,A,W);return()=>{Fe=!0,jt()}}{const jt=h.addObserver(f);return()=>{Fe=!0,jt()}}}directlySetCurrentUser(h){var f=this;return(0,_.A)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=nn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,_.A)(function*(){var f;const A={"X-Client-Version":h.clientVersion};h.app.options.appId&&(A["X-Firebase-gmpid"]=h.app.options.appId);const W=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();W&&(A["X-Firebase-Client"]=W);const oe=yield h._getAppCheckToken();return oe&&(A["X-Firebase-AppCheck"]=oe),A})()}_getAppCheckToken(){var h=this;return(0,_.A)(function*(){var f;const A=yield null===(f=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return A?.error&&function bt(E,...h){st.logLevel<=w.$b.WARN&&st.warn(`Auth (${V.SDK_VERSION}): ${E}`,...h)}(`Error while retrieving App Check token: ${A.error}`),A?.token})()}}function Ut(E){return(0,M.Ku)(E)}class $n{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,M.tD)(f=>this.observer=f)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let on={loadJS:()=>(0,_.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function si(E){return on.loadJS(E)}function qi(E){return`__${E}${Math.floor(1e6*Math.random())}`}class pi{constructor(h){this.type="recaptcha-enterprise",this.auth=Ut(h)}verify(h="verify",f=!1){var A=this;return(0,_.A)(function*(){function oe(){return oe=(0,_.A)(function*(Dt){if(!f){if(null==Dt.tenantId&&null!=Dt._agentRecaptchaConfig)return Dt._agentRecaptchaConfig.siteKey;if(null!=Dt.tenantId&&void 0!==Dt._tenantRecaptchaConfigs[Dt.tenantId])return Dt._tenantRecaptchaConfigs[Dt.tenantId].siteKey}return new Promise(function(){var jt=(0,_.A)(function*(Cn,zn){Ot(Dt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Dr=>{if(void 0!==Dr.recaptchaKey){const oo=new St(Dr);return null==Dt.tenantId?Dt._agentRecaptchaConfig=oo:Dt._tenantRecaptchaConfigs[Dt.tenantId]=oo,Cn(oo.siteKey)}zn(new Error("recaptcha Enterprise site key undefined"))}).catch(Dr=>{zn(Dr)})});return function(Cn,zn){return jt.apply(this,arguments)}}())}),oe.apply(this,arguments)}function Fe(Dt,jt,Cn){const zn=window.grecaptcha;or(zn)?zn.enterprise.ready(()=>{zn.enterprise.execute(Dt,{action:h}).then(Dr=>{jt(Dr)}).catch(()=>{jt("NO_RECAPTCHA")})}):Cn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Dt,jt)=>{(function W(Dt){return oe.apply(this,arguments)})(A.auth).then(Cn=>{if(!f&&or(window.grecaptcha))Fe(Cn,Dt,jt);else{if(typeof window>"u")return void jt(new Error("RecaptchaVerifier is only supported in browser"));let zn=function Ai(){return on.recaptchaEnterpriseScript}();0!==zn.length&&(zn+=Cn),si(zn).then(()=>{Fe(Cn,Dt,jt)}).catch(Dr=>{jt(Dr)})}}).catch(Cn=>{jt(Cn)})})})()}}function Yn(E,h,f){return kr.apply(this,arguments)}function kr(){return(kr=(0,_.A)(function*(E,h,f,A=!1){const W=new pi(E);let oe;try{oe=yield W.verify(f)}catch{oe=yield W.verify(f,!0)}const Fe=Object.assign({},h);return Object.assign(Fe,A?{captchaResp:oe}:{captchaResponse:oe}),Object.assign(Fe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Fe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Fe})).apply(this,arguments)}function ui(E,h,f,A){return gi.apply(this,arguments)}function gi(){return gi=(0,_.A)(function*(E,h,f,A){var W;if(null!==(W=E._getRecaptchaConfig())&&void 0!==W&&W.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const oe=yield Yn(E,h,f,"getOobCode"===f);return A(E,oe)}return A(E,h).catch(function(){var oe=(0,_.A)(function*(Fe){if("auth/missing-recaptcha-token"===Fe.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Dt=yield Yn(E,h,f,"getOobCode"===f);return A(E,Dt)}return Promise.reject(Fe)});return function(Fe){return oe.apply(this,arguments)}}())}),gi.apply(this,arguments)}function Qi(E,h,f){const A=Ut(E);ce(A._canInitEmulator,A,"emulator-config-failed"),ce(/^https?:\/\//.test(h),A,"invalid-emulator-scheme");const W=!!f?.disableWarnings,oe=wo(h),{host:Fe,port:Dt}=function ya(E){const h=wo(E),f=/(\/\/)?([^?#/]+)/.exec(E.substr(h.length));if(!f)return{host:"",port:null};const A=f[2].split("@").pop()||"",W=/^(\[[^\]]+\])(:|$)/.exec(A);if(W){const oe=W[1];return{host:oe,port:va(A.substr(oe.length+1))}}{const[oe,Fe]=A.split(":");return{host:oe,port:va(Fe)}}}(h);A.config.emulator={url:`${oe}//${Fe}${null===Dt?"":`:${Dt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:Fe,port:Dt,protocol:oe.replace(":",""),options:Object.freeze({disableWarnings:W})}),W||function ko(){function E(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function wo(E){const h=E.indexOf(":");return h<0?"":E.substr(0,h+1)}function va(E){if(!E)return null;const h=Number(E);return isNaN(h)?null:h}class sr{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return Ne("not implemented")}_getIdTokenResponse(h){return Ne("not implemented")}_linkToIdToken(h,f){return Ne("not implemented")}_getReauthenticationResolver(h){return Ne("not implemented")}}function qo(E,h){return Js.apply(this,arguments)}function Js(){return(Js=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:resetPassword",vt(E,h))})).apply(this,arguments)}function ws(){return(ws=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function xs(E,h){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:signUp",h)})).apply(this,arguments)}function Sr(){return(Sr=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:update",vt(E,h))})).apply(this,arguments)}function Ts(E,h){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,_.A)(function*(E,h){return en(E,"POST","/v1/accounts:signInWithPassword",vt(E,h))})).apply(this,arguments)}function Tr(E,h){return js.apply(this,arguments)}function js(){return(js=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:sendOobCode",vt(E,h))})).apply(this,arguments)}function Zr(){return(Zr=(0,_.A)(function*(E,h){return Tr(E,h)})).apply(this,arguments)}function Zs(E,h){return oi.apply(this,arguments)}function oi(){return(oi=(0,_.A)(function*(E,h){return Tr(E,h)})).apply(this,arguments)}function Fr(E,h){return li.apply(this,arguments)}function li(){return(li=(0,_.A)(function*(E,h){return Tr(E,h)})).apply(this,arguments)}function ln(){return(ln=(0,_.A)(function*(E,h){return Tr(E,h)})).apply(this,arguments)}function Ds(){return(Ds=(0,_.A)(function*(E,h){return en(E,"POST","/v1/accounts:signInWithEmailLink",vt(E,h))})).apply(this,arguments)}function Vs(){return(Vs=(0,_.A)(function*(E,h){return en(E,"POST","/v1/accounts:signInWithEmailLink",vt(E,h))})).apply(this,arguments)}class eo extends sr{constructor(h,f,A,W=null){super("password",A),this._email=h,this._password=f,this._tenantId=W}static _fromEmailAndPassword(h,f){return new eo(h,f,"password")}static _fromEmailAndCode(h,f,A=null){return new eo(h,f,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,_.A)(function*(){switch(f.signInMethod){case"password":return ui(h,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Ts);case"emailLink":return function mi(E,h){return Ds.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:ue(h,"internal-error")}})()}_linkToIdToken(h,f){var A=this;return(0,_.A)(function*(){switch(A.signInMethod){case"password":return ui(h,{idToken:f,returnSecureToken:!0,email:A._email,password:A._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xs);case"emailLink":return function Fs(E,h){return Vs.apply(this,arguments)}(h,{idToken:f,email:A._email,oobCode:A._password});default:ue(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function ki(E,h){return ms.apply(this,arguments)}function ms(){return(ms=(0,_.A)(function*(E,h){return en(E,"POST","/v1/accounts:signInWithIdp",vt(E,h))})).apply(this,arguments)}class Bi extends sr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new Bi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):ue("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:A,signInMethod:W}=f,oe=(0,se.Tt)(f,["providerId","signInMethod"]);if(!A||!W)return null;const Fe=new Bi(A,W);return Fe.idToken=oe.idToken||void 0,Fe.accessToken=oe.accessToken||void 0,Fe.secret=oe.secret,Fe.nonce=oe.nonce,Fe.pendingToken=oe.pendingToken||null,Fe}_getIdTokenResponse(h){return ki(h,this.buildRequest())}_linkToIdToken(h,f){const A=this.buildRequest();return A.idToken=f,ki(h,A)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,ki(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,M.Am)(f)}return h}}function $s(){return($s=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:sendVerificationCode",vt(E,h))})).apply(this,arguments)}function Vo(){return(Vo=(0,_.A)(function*(E,h){return en(E,"POST","/v1/accounts:signInWithPhoneNumber",vt(E,h))})).apply(this,arguments)}function Fi(){return(Fi=(0,_.A)(function*(E,h){const f=yield en(E,"POST","/v1/accounts:signInWithPhoneNumber",vt(E,h));if(f.temporaryProof)throw yn(E,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const co={USER_NOT_FOUND:"user-not-found"};function Wi(){return(Wi=(0,_.A)(function*(E,h){return en(E,"POST","/v1/accounts:signInWithPhoneNumber",vt(E,Object.assign(Object.assign({},h),{operation:"REAUTH"})),co)})).apply(this,arguments)}class As extends sr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new As({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new As({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function zi(E,h){return Vo.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function Xi(E,h){return Fi.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function uo(E,h){return Wi.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:A,verificationCode:W}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:A,code:W}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:A,phoneNumber:W,temporaryProof:oe}=h;return A||f||W||oe?new As({verificationId:f,verificationCode:A,phoneNumber:W,temporaryProof:oe}):null}}class to{constructor(h){var f,A,W,oe,Fe,Dt;const jt=(0,M.I9)((0,M.hp)(h)),Cn=null!==(f=jt.apiKey)&&void 0!==f?f:null,zn=null!==(A=jt.oobCode)&&void 0!==A?A:null,Dr=function Hs(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(W=jt.mode)&&void 0!==W?W:null);ce(Cn&&zn&&Dr,"argument-error"),this.apiKey=Cn,this.operation=Dr,this.code=zn,this.continueUrl=null!==(oe=jt.continueUrl)&&void 0!==oe?oe:null,this.languageCode=null!==(Fe=jt.languageCode)&&void 0!==Fe?Fe:null,this.tenantId=null!==(Dt=jt.tenantId)&&void 0!==Dt?Dt:null}static parseLink(h){const f=function oa(E){const h=(0,M.I9)((0,M.hp)(E)).link,f=h?(0,M.I9)((0,M.hp)(h)).deep_link_id:null,A=(0,M.I9)((0,M.hp)(E)).deep_link_id;return(A?(0,M.I9)((0,M.hp)(A)).link:null)||A||f||h||E}(h);try{return new to(f)}catch{return null}}}let bs=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(f,A){return eo._fromEmailAndPassword(f,A)}static credentialWithLink(f,A){const W=to.parseLink(A);return ce(W,"argument-error"),eo._fromEmailAndCode(f,W.code,W.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class ii{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class lo extends ii{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Qo extends lo{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return ce("providerId"in f&&"signInMethod"in f,"argument-error"),Bi._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ce(h.idToken||h.accessToken,"argument-error"),Bi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Qo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Qo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:A,oauthTokenSecret:W,pendingToken:oe,nonce:Fe,providerId:Dt}=h;if(!A&&!W&&!f&&!oe||!Dt)return null;try{return new Qo(Dt)._credential({idToken:f,accessToken:A,nonce:Fe,pendingToken:oe})}catch{return null}}}let Ls=(()=>{class E extends lo{constructor(){super("facebook.com")}static credential(f){return Bi._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return E.credential(f.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),vr=(()=>{class E extends lo{constructor(){super("google.com"),this.addScope("profile")}static credential(f,A){return Bi._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:A})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:A,oauthAccessToken:W}=f;if(!A&&!W)return null;try{return E.credential(A,W)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),Lo=(()=>{class E extends lo{constructor(){super("github.com")}static credential(f){return Bi._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return E.credential(f.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Ur extends sr{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return ki(h,this.buildRequest())}_linkToIdToken(h,f){const A=this.buildRequest();return A.idToken=f,ki(h,A)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,ki(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:A,signInMethod:W,pendingToken:oe}=f;return A&&W&&oe&&A===W?new Ur(A,oe):null}static _create(h,f){return new Ur(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class lr extends ii{constructor(h){ce(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return lr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return lr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=Ur.fromJSON(h);return ce(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:A}=h;if(!f||!A)return null;try{return Ur._create(A,f)}catch{return null}}}let ls=(()=>{class E extends lo{constructor(){super("twitter.com")}static credential(f,A){return Bi._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:A})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:A,oauthTokenSecret:W}=f;if(!A||!W)return null;try{return E.credential(A,W)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function _s(E,h){return ds.apply(this,arguments)}function ds(){return(ds=(0,_.A)(function*(E,h){return en(E,"POST","/v1/accounts:signUp",vt(E,h))})).apply(this,arguments)}class ai{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,A,W=!1){return(0,_.A)(function*(){const oe=yield me._fromIdTokenResponse(h,A,W),Fe=G(A);return new ai({user:oe,providerId:Fe,_tokenResponse:A,operationType:f})})()}static _forOperation(h,f,A){return(0,_.A)(function*(){yield h._updateTokensIfNecessary(A,!0);const W=G(A);return new ai({user:h,providerId:W,_tokenResponse:A,operationType:f})})()}}function G(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function K(E){return O.apply(this,arguments)}function O(){return(O=(0,_.A)(function*(E){var h;if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(Ve(E));const f=Ut(E);if(yield f._initializationPromise,null!==(h=f.currentUser)&&void 0!==h&&h.isAnonymous)return new ai({user:f.currentUser,providerId:null,operationType:"signIn"});const A=yield _s(f,{returnSecureToken:!0}),W=yield ai._fromIdTokenResponse(f,"signIn",A,!0);return yield f._updateCurrentUser(W.user),W})).apply(this,arguments)}class ee extends M.g{constructor(h,f,A,W){var oe;super(f.code,f.message),this.operationType=A,this.user=W,Object.setPrototypeOf(this,ee.prototype),this.customData={appName:h.name,tenantId:null!==(oe=h.tenantId)&&void 0!==oe?oe:void 0,_serverResponse:f.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(h,f,A,W){return new ee(h,f,A,W)}}function Se(E,h,f,A){return("reauthenticate"===h?f._getReauthenticationResolver(E):f._getIdTokenResponse(E)).catch(oe=>{throw"auth/multi-factor-auth-required"===oe.code?ee._fromErrorAndOperation(E,oe,h,A):oe})}function sn(E){return new Set(E.map(({providerId:h})=>h).filter(h=>!!h))}function tr(E,h){return as.apply(this,arguments)}function as(){return as=(0,_.A)(function*(E,h){const f=(0,M.Ku)(E);yield no(!0,f,h);const{providerUserInfo:A}=yield function ir(E,h){return wn.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),W=sn(A||[]);return f.providerData=f.providerData.filter(oe=>W.has(oe.providerId)),W.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),as.apply(this,arguments)}function Us(E,h){return bi.apply(this,arguments)}function bi(){return(bi=(0,_.A)(function*(E,h,f=!1){const A=yield Ht(E,h._linkToIdToken(E.auth,yield E.getIdToken()),f);return ai._forOperation(E,"link",A)})).apply(this,arguments)}function no(E,h,f){return aa.apply(this,arguments)}function aa(){return(aa=(0,_.A)(function*(E,h,f){yield Kr(h);const W=!1===E?"provider-already-linked":"no-such-provider";ce(sn(h.providerData).has(f)===E,h.auth,W)})).apply(this,arguments)}function Ja(E,h){return Za.apply(this,arguments)}function Za(){return(Za=(0,_.A)(function*(E,h,f=!1){const{auth:A}=E;if((0,V._isFirebaseServerApp)(A.app))return Promise.reject(Ve(A));const W="reauthenticate";try{const oe=yield Ht(E,Se(A,W,h,E),f);ce(oe.idToken,A,"internal-error");const Fe=On(oe.idToken);ce(Fe,A,"internal-error");const{sub:Dt}=Fe;return ce(E.uid===Dt,A,"user-mismatch"),ai._forOperation(E,W,oe)}catch(oe){throw"auth/user-not-found"===oe?.code&&ue(A,"user-mismatch"),oe}})).apply(this,arguments)}function Br(E,h){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,_.A)(function*(E,h,f=!1){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(Ve(E));const A="signIn",W=yield Se(E,A,h),oe=yield ai._fromIdTokenResponse(E,A,W);return f||(yield E._updateCurrentUser(oe.user)),oe})).apply(this,arguments)}function ca(E,h){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,_.A)(function*(E,h){return Br(Ut(E),h)})).apply(this,arguments)}function Ca(E,h){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,_.A)(function*(E,h){const f=(0,M.Ku)(E);return yield no(!1,f,h.providerId),Us(f,h)})).apply(this,arguments)}function ec(E,h){return wa.apply(this,arguments)}function wa(){return(wa=(0,_.A)(function*(E,h){return Ja((0,M.Ku)(E),h)})).apply(this,arguments)}function To(){return(To=(0,_.A)(function*(E,h){return en(E,"POST","/v1/accounts:signInWithCustomToken",vt(E,h))})).apply(this,arguments)}function ua(E,h){return Do.apply(this,arguments)}function Do(){return Do=(0,_.A)(function*(E,h){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(Ve(E));const f=Ut(E),A=yield function Bo(E,h){return To.apply(this,arguments)}(f,{token:h,returnSecureToken:!0}),W=yield ai._fromIdTokenResponse(f,"signIn",A);return yield f._updateCurrentUser(W.user),W}),Do.apply(this,arguments)}class fo{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?dr._fromServerResponse(h,f):"totpInfo"in f?Qr._fromServerResponse(h,f):ue(h,"internal-error")}}class dr extends fo{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new dr(f)}}class Qr extends fo{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new Qr(f)}}function _i(E,h,f){var A;ce((null===(A=f.url)||void 0===A?void 0:A.length)>0,E,"invalid-continue-uri"),ce(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ce(f.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(ce(f.android.packageName.length>0,E,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function Yi(E){return ji.apply(this,arguments)}function ji(){return(ji=(0,_.A)(function*(E){const h=Ut(E);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function la(E,h,f){return Z.apply(this,arguments)}function Z(){return(Z=(0,_.A)(function*(E,h,f){const A=Ut(E),W={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};f&&_i(A,W,f),yield ui(A,W,"getOobCode",Zs)})).apply(this,arguments)}function I(E,h,f){return D.apply(this,arguments)}function D(){return D=(0,_.A)(function*(E,h,f){yield qo((0,M.Ku)(E),{oobCode:h,newPassword:f}).catch(function(){var A=(0,_.A)(function*(W){throw"auth/password-does-not-meet-requirements"===W.code&&Yi(E),W});return function(W){return A.apply(this,arguments)}}())}),D.apply(this,arguments)}function L(E,h){return Y.apply(this,arguments)}function Y(){return Y=(0,_.A)(function*(E,h){yield function gs(E,h){return Sr.apply(this,arguments)}((0,M.Ku)(E),{oobCode:h})}),Y.apply(this,arguments)}function fe(E,h){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,_.A)(function*(E,h){const f=(0,M.Ku)(E),A=yield qo(f,{oobCode:h}),W=A.requestType;switch(ce(W,f,"internal-error"),W){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ce(A.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ce(A.mfaInfo,f,"internal-error");default:ce(A.email,f,"internal-error")}let oe=null;return A.mfaInfo&&(oe=fo._fromServerResponse(Ut(f),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:oe},operation:W}})).apply(this,arguments)}function Ue(E,h){return lt.apply(this,arguments)}function lt(){return(lt=(0,_.A)(function*(E,h){const{data:f}=yield fe((0,M.Ku)(E),h);return f.email})).apply(this,arguments)}function Pt(E,h,f){return cn.apply(this,arguments)}function cn(){return(cn=(0,_.A)(function*(E,h,f){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(Ve(E));const A=Ut(E),Fe=yield ui(A,{returnSecureToken:!0,email:h,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_s).catch(jt=>{throw"auth/password-does-not-meet-requirements"===jt.code&&Yi(E),jt}),Dt=yield ai._fromIdTokenResponse(A,"signIn",Fe);return yield A._updateCurrentUser(Dt.user),Dt})).apply(this,arguments)}function gn(E,h,f){return(0,V._isFirebaseServerApp)(E.app)?Promise.reject(Ve(E)):ca((0,M.Ku)(E),bs.credential(h,f)).catch(function(){var A=(0,_.A)(function*(W){throw"auth/password-does-not-meet-requirements"===W.code&&Yi(E),W});return function(W){return A.apply(this,arguments)}}())}function Ir(E,h,f){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,_.A)(function*(E,h,f){const A=Ut(E),W={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function oe(Fe,Dt){ce(Dt.handleCodeInApp,A,"argument-error"),Dt&&_i(A,Fe,Dt)})(W,f),yield ui(A,W,"getOobCode",Fr)})).apply(this,arguments)}function Hn(E,h){const f=to.parseLink(h);return"EMAIL_SIGNIN"===f?.operation}function Dn(E,h,f){return ei.apply(this,arguments)}function ei(){return(ei=(0,_.A)(function*(E,h,f){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(Ve(E));const A=(0,M.Ku)(E),W=bs.credentialWithLink(h,f||pn());return ce(W._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),ca(A,W)})).apply(this,arguments)}function yi(){return(yi=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:createAuthUri",vt(E,h))})).apply(this,arguments)}function di(E,h){return Vi.apply(this,arguments)}function Vi(){return Vi=(0,_.A)(function*(E,h){const A={identifier:h,continueUri:bn()?pn():"http://localhost"},{signinMethods:W}=yield function ci(E,h){return yi.apply(this,arguments)}((0,M.Ku)(E),A);return W||[]}),Vi.apply(this,arguments)}function Ss(E,h){return Si.apply(this,arguments)}function Si(){return Si=(0,_.A)(function*(E,h){const f=(0,M.Ku)(E),W={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};h&&_i(f.auth,W,h);const{email:oe}=yield function ks(E,h){return Zr.apply(this,arguments)}(f.auth,W);oe!==E.email&&(yield E.reload())}),Si.apply(this,arguments)}function $i(E,h,f){return Un.apply(this,arguments)}function Un(){return Un=(0,_.A)(function*(E,h,f){const A=(0,M.Ku)(E),oe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:h};f&&_i(A.auth,oe,f);const{email:Fe}=yield function is(E,h){return ln.apply(this,arguments)}(A.auth,oe);Fe!==E.email&&(yield E.reload())}),Un.apply(this,arguments)}function po(){return(po=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ta(E,h){return vs.apply(this,arguments)}function vs(){return vs=(0,_.A)(function*(E,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const A=(0,M.Ku)(E),oe={idToken:yield A.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},Fe=yield Ht(A,function Xo(E,h){return po.apply(this,arguments)}(A.auth,oe));A.displayName=Fe.displayName||null,A.photoURL=Fe.photoUrl||null;const Dt=A.providerData.find(({providerId:jt})=>"password"===jt);Dt&&(Dt.displayName=A.displayName,Dt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(Fe)}),vs.apply(this,arguments)}function Da(E,h){const f=(0,M.Ku)(E);return(0,V._isFirebaseServerApp)(f.auth.app)?Promise.reject(Ve(f.auth)):tc(f,h,null)}function Aa(E,h){return tc((0,M.Ku)(E),null,h)}function tc(E,h,f){return In.apply(this,arguments)}function In(){return In=(0,_.A)(function*(E,h,f){const{auth:A}=E,oe={idToken:yield E.getIdToken(),returnSecureToken:!0};h&&(oe.email=h),f&&(oe.password=f);const Fe=yield Ht(E,function wr(E,h){return ws.apply(this,arguments)}(A,oe));yield E._updateTokensIfNecessary(Fe,!0)}),In.apply(this,arguments)}class Rn{constructor(h,f,A={}){this.isNewUser=h,this.providerId=f,this.profile=A}}class hr extends Rn{constructor(h,f,A,W){super(h,f,A),this.username=W}}class T extends Rn{constructor(h,f){super(h,"facebook.com",f)}}class Q extends hr{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class F extends Rn{constructor(h,f){super(h,"google.com",f)}}class $ extends hr{constructor(h,f,A){super(h,"twitter.com",f,A)}}function Ee(E){const{user:h,_tokenResponse:f}=E;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Mn(E){var h,f;if(!E)return null;const{providerId:A}=E,W=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},oe=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!A&&E?.idToken){const Fe=null===(f=null===(h=On(E.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(Fe)return new Rn(oe,"anonymous"!==Fe&&"custom"!==Fe?Fe:null)}if(!A)return null;switch(A){case"facebook.com":return new T(oe,W);case"github.com":return new Q(oe,W);case"google.com":return new F(oe,W);case"twitter.com":return new $(oe,W,E.screenName||null);case"custom":case"anonymous":return new Rn(oe,null);default:return new Rn(oe,A,W)}}(f)}class mr{constructor(h,f,A){this.type=h,this.credential=f,this.user=A}static _fromIdtoken(h,f){return new mr("enroll",h,f)}static _fromMfaPendingCredential(h){return new mr("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,A;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return mr._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(A=h.multiFactorSession)&&void 0!==A&&A.idToken)return mr._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Mi{constructor(h,f,A){this.session=h,this.hints=f,this.signInResolver=A}static _fromError(h,f){const A=Ut(h),W=f.customData._serverResponse,oe=(W.mfaInfo||[]).map(Dt=>fo._fromServerResponse(A,Dt));ce(W.mfaPendingCredential,A,"internal-error");const Fe=mr._fromMfaPendingCredential(W.mfaPendingCredential);return new Mi(Fe,oe,function(){var Dt=(0,_.A)(function*(jt){const Cn=yield jt._process(A,Fe);delete W.mfaInfo,delete W.mfaPendingCredential;const zn=Object.assign(Object.assign({},W),{idToken:Cn.idToken,refreshToken:Cn.refreshToken});switch(f.operationType){case"signIn":const Dr=yield ai._fromIdTokenResponse(A,f.operationType,zn);return yield A._updateCurrentUser(Dr.user),Dr;case"reauthenticate":return ce(f.user,A,"internal-error"),ai._forOperation(f.user,f.operationType,zn);default:ue(A,"internal-error")}});return function(jt){return Dt.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,_.A)(function*(){return f.signInResolver(h)})()}}function Ei(E,h){var f;const A=(0,M.Ku)(E),W=h;return ce(h.customData.operationType,A,"argument-error"),ce(null===(f=W.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,A,"argument-error"),Mi._fromError(A,W)}class nr{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(A=>fo._fromServerResponse(h.auth,A)))})}static _fromUser(h){return new nr(h)}getSession(){var h=this;return(0,_.A)(function*(){return mr._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,f){var A=this;return(0,_.A)(function*(){const W=h,oe=yield A.getSession(),Fe=yield Ht(A.user,W._process(A.user.auth,oe,f));return yield A.user._updateTokensIfNecessary(Fe),A.user.reload()})()}unenroll(h){var f=this;return(0,_.A)(function*(){const A="string"==typeof h?h:h.uid,W=yield f.user.getIdToken();try{const oe=yield Ht(f.user,function go(E,h){return Ze(E,"POST","/v2/accounts/mfaEnrollment:withdraw",vt(E,h))}(f.user.auth,{idToken:W,mfaEnrollmentId:A}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Fe})=>Fe!==A),yield f.user._updateTokensIfNecessary(oe),yield f.user.reload()}catch(oe){throw oe}})()}}const jo=new WeakMap;function El(E){const h=(0,M.Ku)(E);return jo.has(h)||jo.set(h,nr._fromUser(h)),jo.get(h)}const hi="__sak";class Gn{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(hi,"1"),this.storage.removeItem(hi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const da=(()=>{class E extends Gn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,A)=>this.onStorageEvent(f,A),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xt(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const A of Object.keys(this.listeners)){const W=this.storage.getItem(A),oe=this.localCache[A];W!==oe&&f(A,oe,W)}}onStorageEvent(f,A=!1){if(!f.key)return void this.forAllChangedKeys((Dt,jt,Cn)=>{this.notifyListeners(Dt,Cn)});const W=f.key;A?this.detachListener():this.stopPolling();const oe=()=>{const Dt=this.storage.getItem(W);!A&&this.localCache[W]===Dt||this.notifyListeners(W,Dt)},Fe=this.storage.getItem(W);!function Je(){return(0,M.lT)()&&10===document.documentMode}()||Fe===f.newValue||f.newValue===f.oldValue?oe():setTimeout(oe,10)}notifyListeners(f,A){this.localCache[f]=A;const W=this.listeners[f];if(W)for(const oe of Array.from(W))oe(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,A,W)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:A,newValue:W}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(A)}_removeListener(f,A){this.listeners[f]&&(this.listeners[f].delete(A),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,A){var W=()=>super._set,oe=this;return(0,_.A)(function*(){yield W().call(oe,f,A),oe.localCache[f]=JSON.stringify(A)})()}_get(f){var A=()=>super._get,W=this;return(0,_.A)(function*(){const oe=yield A().call(W,f);return W.localCache[f]=JSON.stringify(oe),oe})()}_remove(f){var A=()=>super._remove,W=this;return(0,_.A)(function*(){yield A().call(W,f),delete W.localCache[f]})()}}return E.type="LOCAL",E})(),Yo=(()=>{class E extends Gn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,A){}_removeListener(f,A){}}return E.type="SESSION",E})();let Es=(()=>{class E{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const A=this.receivers.find(oe=>oe.isListeningto(f));if(A)return A;const W=new E(f);return this.receivers.push(W),W}isListeningto(f){return this.eventTarget===f}handleEvent(f){var A=this;return(0,_.A)(function*(){const W=f,{eventId:oe,eventType:Fe,data:Dt}=W.data,jt=A.handlersMap[Fe];if(!jt?.size)return;W.ports[0].postMessage({status:"ack",eventId:oe,eventType:Fe});const Cn=Array.from(jt).map(function(){var Dr=(0,_.A)(function*(oo){return oo(W.origin,Dt)});return function(oo){return Dr.apply(this,arguments)}}()),zn=yield function rc(E){return Promise.all(E.map(function(){var h=(0,_.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(A){return{fulfilled:!1,reason:A}}});return function(f){return h.apply(this,arguments)}}()))}(Cn);W.ports[0].postMessage({status:"done",eventId:oe,eventType:Fe,response:zn})})()}_subscribe(f,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(A)}_unsubscribe(f,A){this.handlersMap[f]&&A&&this.handlersMap[f].delete(A),(!A||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Jn(E="",h=10){let f="";for(let A=0;A<h;A++)f+=Math.floor(10*Math.random());return E+f}class ic{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,A=50){var W=this;return(0,_.A)(function*(){const oe=typeof MessageChannel<"u"?new MessageChannel:null;if(!oe)throw new Error("connection_unavailable");let Fe,Dt;return new Promise((jt,Cn)=>{const zn=Jn("",20);oe.port1.start();const Dr=setTimeout(()=>{Cn(new Error("unsupported_event"))},A);Dt={messageChannel:oe,onMessage(oo){const Ra=oo;if(Ra.data.eventId===zn)switch(Ra.data.status){case"ack":clearTimeout(Dr),Fe=setTimeout(()=>{Cn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Fe),jt(Ra.data.response);break;default:clearTimeout(Dr),clearTimeout(Fe),Cn(new Error("invalid_response"))}}},W.handlers.add(Dt),oe.port1.addEventListener("message",Dt.onMessage),W.target.postMessage({eventType:h,eventId:zn,data:f},[oe.port2])}).finally(()=>{Dt&&W.removeMessageHandler(Dt)})})()}}function Ci(){return window}function ba(){return typeof Ci().WorkerGlobalScope<"u"&&"function"==typeof Ci().importScripts}function Ri(){return(Ri=(0,_.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ms="firebaseLocalStorageDb",Jo="firebaseLocalStorage",qc="fbase_key";class ro{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function La(E,h){return E.transaction([Jo],h?"readwrite":"readonly").objectStore(Jo)}function Qc(){const E=indexedDB.open(Ms,1);return new Promise((h,f)=>{E.addEventListener("error",()=>{f(E.error)}),E.addEventListener("upgradeneeded",()=>{const A=E.result;try{A.createObjectStore(Jo,{keyPath:qc})}catch(W){f(W)}}),E.addEventListener("success",(0,_.A)(function*(){const A=E.result;A.objectStoreNames.contains(Jo)?h(A):(A.close(),yield function sc(){const E=indexedDB.deleteDatabase(Ms);return new ro(E).toPromise()}(),h(yield Qc()))}))})}function Pu(E,h,f){return Li.apply(this,arguments)}function Li(){return(Li=(0,_.A)(function*(E,h,f){const A=La(E,!0).put({[qc]:h,value:f});return new ro(A).toPromise()})).apply(this,arguments)}function Ua(){return(Ua=(0,_.A)(function*(E,h){const f=La(E,!1).get(h),A=yield new ro(f).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function Cl(E,h){const f=La(E,!0).delete(h);return new ro(f).toPromise()}const wl=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,_.A)(function*(){return f.db||(f.db=yield Qc()),f.db})()}_withRetries(f){var A=this;return(0,_.A)(function*(){let W=0;for(;;)try{const oe=yield A._openDb();return yield f(oe)}catch(oe){if(W++>3)throw oe;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,_.A)(function*(){return ba()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,_.A)(function*(){f.receiver=Es._getInstance(function Ps(){return ba()?self:null}()),f.receiver._subscribe("keyChanged",function(){var A=(0,_.A)(function*(W,oe){return{keyProcessed:(yield f._poll()).includes(oe.key)}});return function(W,oe){return A.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var A=(0,_.A)(function*(W,oe){return["keyChanged"]});return function(W,oe){return A.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,_.A)(function*(){var A,W;if(f.activeServiceWorker=yield function Sa(){return Ri.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new ic(f.activeServiceWorker);const oe=yield f.sender._send("ping",{},800);oe&&null!==(A=oe[0])&&void 0!==A&&A.fulfilled&&null!==(W=oe[0])&&void 0!==W&&W.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var A=this;return(0,_.A)(function*(){if(A.sender&&A.activeServiceWorker&&function Su(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:f},A.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.A)(function*(){try{if(!indexedDB)return!1;const f=yield Qc();return yield Pu(f,hi,"1"),yield Cl(f,hi),!0}catch{}return!1})()}_withPendingWrite(f){var A=this;return(0,_.A)(function*(){A.pendingWrites++;try{yield f()}finally{A.pendingWrites--}})()}_set(f,A){var W=this;return(0,_.A)(function*(){return W._withPendingWrite((0,_.A)(function*(){return yield W._withRetries(oe=>Pu(oe,f,A)),W.localCache[f]=A,W.notifyServiceWorker(f)}))})()}_get(f){var A=this;return(0,_.A)(function*(){const W=yield A._withRetries(oe=>function Mu(E,h){return Ua.apply(this,arguments)}(oe,f));return A.localCache[f]=W,W})()}_remove(f){var A=this;return(0,_.A)(function*(){return A._withPendingWrite((0,_.A)(function*(){return yield A._withRetries(W=>Cl(W,f)),delete A.localCache[f],A.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,_.A)(function*(){const A=yield f._withRetries(Fe=>{const Dt=La(Fe,!1).getAll();return new ro(Dt).toPromise()});if(!A)return[];if(0!==f.pendingWrites)return[];const W=[],oe=new Set;if(0!==A.length)for(const{fbase_key:Fe,value:Dt}of A)oe.add(Fe),JSON.stringify(f.localCache[Fe])!==JSON.stringify(Dt)&&(f.notifyListeners(Fe,Dt),W.push(Fe));for(const Fe of Object.keys(f.localCache))f.localCache[Fe]&&!oe.has(Fe)&&(f.notifyListeners(Fe,null),W.push(Fe));return W})()}notifyListeners(f,A){this.localCache[f]=A;const W=this.listeners[f];if(W)for(const oe of Array.from(W))oe(A)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,_.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(A)}_removeListener(f,A){this.listeners[f]&&(this.listeners[f].delete(A),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),Tl=1e12;class Ou{constructor(h){this.auth=h,this.counter=Tl,this._widgets=new Map}render(h,f){const A=this.counter;return this._widgets.set(A,new Nu(h,this.auth.name,f||{})),this.counter++,A}reset(h){var f;const A=h||Tl;null===(f=this._widgets.get(A))||void 0===f||f.delete(),this._widgets.delete(A)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Tl))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,_.A)(function*(){var A;return null===(A=f._widgets.get(h||Tl))||void 0===A||A.execute(),""})()}}class Nu{constructor(h,f,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const W="string"==typeof h?document.getElementById(h):h;ce(W,"argument-error",{appName:f}),this.container=W,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function v(E){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<E;A++)h.push(f.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const P=qi("rcb"),C=new An(3e4,6e4);class R{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Ci().grecaptcha)||void 0===h||!h.render)}load(h,f=""){return ce(function j(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(f),h,"argument-error"),this.shouldResolveImmediately(f)&&Qn(Ci().grecaptcha)?Promise.resolve(Ci().grecaptcha):new Promise((A,W)=>{const oe=Ci().setTimeout(()=>{W(de(h,"network-request-failed"))},C.get());Ci()[P]=()=>{Ci().clearTimeout(oe),delete Ci()[P];const Dt=Ci().grecaptcha;if(!Dt||!Qn(Dt))return void W(de(h,"internal-error"));const jt=Dt.render;Dt.render=(Cn,zn)=>{const Dr=jt(Cn,zn);return this.counter++,Dr},this.hostLanguage=f,A(Dt)},si(`${function yr(){return on.recaptchaV2Script}()}?${(0,M.Am)({onload:P,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(oe),W(de(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!(null===(f=Ci().grecaptcha)||void 0===f||!f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class te{load(h){return(0,_.A)(function*(){return new Ou(h)})()}clearedOneInstance(){}}const Te="recaptcha",wt={theme:"light",type:"image"};class dt{constructor(h,f,A=Object.assign({},wt)){this.parameters=A,this.type=Te,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ut(h),this.isInvisible="invisible"===this.parameters.size,ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const W="string"==typeof f?document.getElementById(f):f;ce(W,this.auth,"argument-error"),this.container=W,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new te:new R,this.validateStartingState()}verify(){var h=this;return(0,_.A)(function*(){h.assertNotDestroyed();const f=yield h.render(),A=h.getAssertedRecaptcha();return A.getResponse(f)||new Promise(oe=>{const Fe=Dt=>{Dt&&(h.tokenChangeListeners.delete(Fe),oe(Dt))};h.tokenChangeListeners.add(Fe),h.isInvisible&&A.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(A=>A(f)),"function"==typeof h)h(f);else if("string"==typeof h){const A=Ci()[h];"function"==typeof A&&A(f)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,_.A)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const A=document.createElement("div");f.appendChild(A),f=A}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,_.A)(function*(){ce(bn()&&!ba(),h.auth,"internal-error"),yield function dn(){let E=null;return new Promise(h=>{"complete"!==document.readyState?(E=()=>h(),window.addEventListener("load",E)):h()}).catch(h=>{throw E&&window.removeEventListener("load",E),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function mt(E){return ni.apply(this,arguments)}(h.auth);ce(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rr{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=As._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function pr(E,h,f){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,_.A)(function*(E,h,f){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(Ve(E));const A=Ut(E),W=yield Ho(A,h,(0,M.Ku)(f));return new rr(W,oe=>ca(A,oe))})).apply(this,arguments)}function Ac(E,h,f){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,_.A)(function*(E,h,f){const A=(0,M.Ku)(E);yield no(!1,A,"phone");const W=yield Ho(A.auth,h,(0,M.Ku)(f));return new rr(W,oe=>Ca(A,oe))})).apply(this,arguments)}function mo(E,h,f){return zs.apply(this,arguments)}function zs(){return(zs=(0,_.A)(function*(E,h,f){const A=(0,M.Ku)(E);if((0,V._isFirebaseServerApp)(A.auth.app))return Promise.reject(Ve(A.auth));const W=yield Ho(A.auth,h,(0,M.Ku)(f));return new rr(W,oe=>ec(A,oe))})).apply(this,arguments)}function Ho(E,h,f){return xu.apply(this,arguments)}function xu(){return xu=(0,_.A)(function*(E,h,f){var A;const W=yield f.verify();try{let oe;if(ce("string"==typeof W,E,"argument-error"),ce(f.type===Te,E,"argument-error"),oe="string"==typeof h?{phoneNumber:h}:h,"session"in oe){const Fe=oe.session;if("phoneNumber"in oe)return ce("enroll"===Fe.type,E,"internal-error"),(yield function cs(E,h){return Ze(E,"POST","/v2/accounts/mfaEnrollment:start",vt(E,h))}(E,{idToken:Fe.credential,phoneEnrollmentInfo:{phoneNumber:oe.phoneNumber,recaptchaToken:W}})).phoneSessionInfo.sessionInfo;{ce("signin"===Fe.type,E,"internal-error");const Dt=(null===(A=oe.multiFactorHint)||void 0===A?void 0:A.uid)||oe.multiFactorUid;return ce(Dt,E,"missing-multi-factor-info"),(yield function Ru(E,h){return Ze(E,"POST","/v2/accounts/mfaSignIn:start",vt(E,h))}(E,{mfaPendingCredential:Fe.credential,mfaEnrollmentId:Dt,phoneSignInInfo:{recaptchaToken:W}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Fe}=yield function os(E,h){return $s.apply(this,arguments)}(E,{phoneNumber:oe.phoneNumber,recaptchaToken:W});return Fe}}finally{f._reset()}}),xu.apply(this,arguments)}function ku(E,h){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,_.A)(function*(E,h){const f=(0,M.Ku)(E);if((0,V._isFirebaseServerApp)(f.auth.app))return Promise.reject(Ve(f.auth));yield Us(f,h)})).apply(this,arguments)}let Yc=(()=>{class E{constructor(f){this.providerId=E.PROVIDER_ID,this.auth=Ut(f)}verifyPhoneNumber(f,A){return Ho(this.auth,f,(0,M.Ku)(A))}static credential(f,A){return As._fromVerification(f,A)}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:A,temporaryProof:W}=f;return A&&W?As._fromTokenResponse(A,W):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Mr(E,h){return h?Ft(h):(ce(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class ja extends sr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return ki(h,this._buildIdpRequest())}_linkToIdToken(h,f){return ki(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return ki(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function Jc(E){return Br(E.auth,new ja(E),E.bypassAuthState)}function Ws(E){const{auth:h,user:f}=E;return ce(f,h,"internal-error"),Ja(f,new ja(E),E.bypassAuthState)}function Id(E){return oc.apply(this,arguments)}function oc(){return(oc=(0,_.A)(function*(E){const{auth:h,user:f}=E;return ce(f,h,"internal-error"),Us(f,new ja(E),E.bypassAuthState)})).apply(this,arguments)}class ac{constructor(h,f,A,W,oe=!1){this.auth=h,this.resolver=A,this.user=W,this.bypassAuthState=oe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,_.A)(function*(A,W){h.pendingPromise={resolve:A,reject:W};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(oe){h.reject(oe)}});return function(A,W){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,_.A)(function*(){const{urlResponse:A,sessionId:W,postBody:oe,tenantId:Fe,error:Dt,type:jt}=h;if(Dt)return void f.reject(Dt);const Cn={auth:f.auth,requestUri:A,sessionId:W,tenantId:Fe||void 0,postBody:oe||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(jt)(Cn))}catch(zn){f.reject(zn)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Jc;case"linkViaPopup":case"linkViaRedirect":return Id;case"reauthViaPopup":case"reauthViaRedirect":return Ws;default:ue(this.auth,"internal-error")}}resolve(h){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){We(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Go=new An(2e3,1e4);function ef(E,h,f){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,_.A)(function*(E,h,f){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(de(E,"operation-not-supported-in-this-environment"));const A=Ut(E);Ye(E,h,ii);const W=Mr(A,f);return new Al(A,"signInViaPopup",h,W).executeNotNull()})).apply(this,arguments)}function Dl(E,h,f){return io.apply(this,arguments)}function io(){return(io=(0,_.A)(function*(E,h,f){const A=(0,M.Ku)(E);if((0,V._isFirebaseServerApp)(A.auth.app))return Promise.reject(de(A.auth,"operation-not-supported-in-this-environment"));Ye(A.auth,h,ii);const W=Mr(A.auth,f);return new Al(A.auth,"reauthViaPopup",h,W,A).executeNotNull()})).apply(this,arguments)}function tf(E,h,f){return $a.apply(this,arguments)}function $a(){return($a=(0,_.A)(function*(E,h,f){const A=(0,M.Ku)(E);Ye(A.auth,h,ii);const W=Mr(A.auth,f);return new Al(A.auth,"linkViaPopup",h,W,A).executeNotNull()})).apply(this,arguments)}let Al=(()=>{class E extends ac{constructor(f,A,W,oe,Fe){super(f,A,oe,Fe),this.provider=W,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var f=this;return(0,_.A)(function*(){const A=yield f.execute();return ce(A,f.auth,"internal-error"),A})()}onExecution(){var f=this;return(0,_.A)(function*(){We(1===f.filter.length,"Popup operations only handle one event");const A=Jn();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],A),f.authWindow.associatedEvent=A,f.resolver._originValidation(f.auth).catch(W=>{f.reject(W)}),f.resolver._isIframeWebStorageSupported(f.auth,W=>{W||f.reject(de(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(de(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const f=()=>{var A,W;this.pollId=null!==(W=null===(A=this.authWindow)||void 0===A?void 0:A.window)&&void 0!==W&&W.closed?window.setTimeout(()=>{this.pollId=null,this.reject(de(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,Go.get())};f()}}return E.currentPopupAction=null,E})();const bl="pendingRedirect",bc=new Map;class Fu extends ac{constructor(h,f,A=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,A),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,_.A)(function*(){let A=bc.get(f.auth._key());if(!A){try{const oe=(yield function Sl(E,h){return Ha.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;A=()=>Promise.resolve(oe)}catch(W){A=()=>Promise.reject(W)}bc.set(f.auth._key(),A)}return f.bypassAuthState||bc.set(f.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,A=this;return(0,_.A)(function*(){if("signInViaRedirect"===h.type)return f().call(A,h);if("unknown"!==h.type){if(h.eventId){const W=yield A.auth._redirectUserForId(h.eventId);if(W)return A.user=W,f().call(A,h);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,_.A)(function*(){})()}cleanUp(){}}function Ha(){return(Ha=(0,_.A)(function*(E,h){const f=rf(h),A=wd(E);if(!(yield A._isAvailable()))return!1;const W="true"===(yield A._get(f));return yield A._remove(f),W})).apply(this,arguments)}function _o(E,h){return qn.apply(this,arguments)}function qn(){return(qn=(0,_.A)(function*(E,h){return wd(E)._set(rf(h),"true")})).apply(this,arguments)}function Cd(){bc.clear()}function nf(E,h){bc.set(E._key(),h)}function wd(E){return Ft(E._redirectPersistence)}function rf(E){return Xn(bl,E.config.apiKey,E.name)}function Td(E,h,f){return function Pl(E,h,f){return Ga.apply(this,arguments)}(E,h,f)}function Ga(){return(Ga=(0,_.A)(function*(E,h,f){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(Ve(E));const A=Ut(E);Ye(E,h,ii),yield A._initializationPromise;const W=Mr(A,f);return yield _o(W,A),W._openRedirect(A,h,"signInViaRedirect")})).apply(this,arguments)}function Dd(E,h,f){return function Ad(E,h,f){return Ml.apply(this,arguments)}(E,h,f)}function Ml(){return(Ml=(0,_.A)(function*(E,h,f){const A=(0,M.Ku)(E);if(Ye(A.auth,h,ii),(0,V._isFirebaseServerApp)(A.auth.app))return Promise.reject(Ve(A.auth));yield A.auth._initializationPromise;const W=Mr(A.auth,f);yield _o(W,A.auth);const oe=yield Sc(A);return W._openRedirect(A.auth,h,"reauthViaRedirect",oe)})).apply(this,arguments)}function Rl(E,h,f){return function Kp(E,h,f){return kt.apply(this,arguments)}(E,h,f)}function kt(){return(kt=(0,_.A)(function*(E,h,f){const A=(0,M.Ku)(E);Ye(A.auth,h,ii),yield A.auth._initializationPromise;const W=Mr(A.auth,f);yield no(!1,A,h.providerId),yield _o(W,A.auth);const oe=yield Sc(A);return W._openRedirect(A.auth,h,"linkViaRedirect",oe)})).apply(this,arguments)}function Rr(E,h){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,_.A)(function*(E,h){return yield Ut(E)._initializationPromise,Vu(E,h,!1)})).apply(this,arguments)}function Vu(E,h){return jr.apply(this,arguments)}function jr(){return(jr=(0,_.A)(function*(E,h,f=!1){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(Ve(E));const A=Ut(E),W=Mr(A,h),Fe=yield new Fu(A,W,f).execute();return Fe&&!f&&(delete Fe.user._redirectEventId,yield A._persistUserIfCurrent(Fe.user),yield A._setRedirectUser(null,h)),Fe})).apply(this,arguments)}function Sc(E){return ea.apply(this,arguments)}function ea(){return(ea=(0,_.A)(function*(E){const h=Jn(`${E.uid}:::`);return E._redirectEventId=h,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),h})).apply(this,arguments)}class Lu{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(h,A)&&(f=!0,this.sendToConsumer(h,A),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Sd(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bd(E);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var A;if(h.error&&!bd(h)){const W=(null===(A=h.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";f.onError(de(this.auth,W))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const A=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&A}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Rs(h))}saveEventToCache(h){this.cachedEventUids.add(Rs(h)),this.lastProcessedEventTime=Date.now()}}function Rs(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(h=>h).join("-")}function bd({type:E,error:h}){return"unknown"===E&&"auth/no-auth-event"===h?.code}function eu(E){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,_.A)(function*(E,h={}){return Ze(E,"GET","/v1/projects",h)})).apply(this,arguments)}const so=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pc=/^https?/;function Ks(){return(Ks=(0,_.A)(function*(E){if(E.config.emulator)return;const{authorizedDomains:h}=yield eu(E);for(const f of h)try{if(qp(f))return}catch{}ue(E,"unauthorized-domain")})).apply(this,arguments)}function qp(E){const h=pn(),{protocol:f,hostname:A}=new URL(h);if(E.startsWith("chrome-extension://")){const Fe=new URL(E);return""===Fe.hostname&&""===A?"chrome-extension:"===f&&E.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&Fe.hostname===A}if(!Pc.test(f))return!1;if(so.test(E))return A===E;const W=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+W+"|"+W+")$","i").test(A)}const Mc=new An(3e4,6e4);function Pd(){const E=Ci().___jsl;if(E?.H)for(const h of Object.keys(E.H))if(E.H[h].r=E.H[h].r||[],E.H[h].L=E.H[h].L||[],E.H[h].r=[...E.H[h].L],E.CP)for(let f=0;f<E.CP.length;f++)E.CP[f]=null}let Rc=null;const Nl=new An(5e3,15e3),xl="__/auth/iframe",sf="emulator/auth/iframe",af={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rd(E){const h=E.config;ce(h.authDomain,E,"auth-domain-config-required");const f=h.emulator?ke(h,sf):`https://${E.config.authDomain}/${xl}`,A={apiKey:h.apiKey,appName:E.name,v:V.SDK_VERSION},W=tu.get(E.config.apiHost);W&&(A.eid=W);const oe=E._getFrameworks();return oe.length&&(A.fw=oe.join(",")),`${f}?${(0,M.Am)(A).slice(1)}`}function Uu(){return Uu=(0,_.A)(function*(E){const h=yield function Md(E){return Rc=Rc||function cc(E){return new Promise((h,f)=>{var A,W,oe;function Fe(){Pd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Pd(),f(de(E,"network-request-failed"))},timeout:Mc.get()})}if(null!==(W=null===(A=Ci().gapi)||void 0===A?void 0:A.iframes)&&void 0!==W&&W.Iframe)h(gapi.iframes.getContext());else{if(null===(oe=Ci().gapi)||void 0===oe||!oe.load){const Dt=qi("iframefcb");return Ci()[Dt]=()=>{gapi.load?Fe():f(de(E,"network-request-failed"))},si(`${function ps(){return on.gapiScript}()}?onload=${Dt}`).catch(jt=>f(jt))}Fe()}}).catch(h=>{throw Rc=null,h})}(E),Rc}(E),f=Ci().gapi;return ce(f,E,"internal-error"),h.open({where:document.body,url:Rd(E),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:af,dontclear:!0},A=>new Promise(function(){var W=(0,_.A)(function*(oe,Fe){yield A.restyle({setHideOnLeave:!1});const Dt=de(E,"network-request-failed"),jt=Ci().setTimeout(()=>{Fe(Dt)},Nl.get());function Cn(){Ci().clearTimeout(jt),oe(A)}A.ping(Cn).then(Cn,()=>{Fe(Dt)})});return function(oe,Fe){return W.apply(this,arguments)}}()))}),Uu.apply(this,arguments)}const uf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Oi{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Xp="__/auth/handler",Yp="emulator/auth/handler",df=encodeURIComponent("fac");function nu(E,h,f,A,W,oe){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,_.A)(function*(E,h,f,A,W,oe){ce(E.config.authDomain,E,"auth-domain-config-required"),ce(E.config.apiKey,E,"invalid-api-key");const Fe={apiKey:E.config.apiKey,appName:E.name,authType:f,redirectUrl:A,v:V.SDK_VERSION,eventId:W};if(h instanceof ii){h.setDefaultLanguage(E.languageCode),Fe.providerId=h.providerId||"",(0,M.Im)(h.getCustomParameters())||(Fe.customParameters=JSON.stringify(h.getCustomParameters()));for(const[zn,Dr]of Object.entries(oe||{}))Fe[zn]=Dr}if(h instanceof lo){const zn=h.getScopes().filter(Dr=>""!==Dr);zn.length>0&&(Fe.scopes=zn.join(","))}E.tenantId&&(Fe.tid=E.tenantId);const Dt=Fe;for(const zn of Object.keys(Dt))void 0===Dt[zn]&&delete Dt[zn];const jt=yield E._getAppCheckToken(),Cn=jt?`#${df}=${encodeURIComponent(jt)}`:"";return`${function Pa({config:E}){return E.emulator?ke(E,Yp):`https://${E.authDomain}/${Xp}`}(E)}?${(0,M.Am)(Dt).slice(1)}${Cn}`})).apply(this,arguments)}const Od="webStorageSupport",Bu=class Fl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yo,this._completeRedirectFn=Vu,this._overrideRedirectResult=nf}_openPopup(h,f,A,W){var oe=this;return(0,_.A)(function*(){var Fe;We(null===(Fe=oe.eventManagers[h._key()])||void 0===Fe?void 0:Fe.manager,"_initialize() not called before _openPopup()");const Dt=yield nu(h,f,A,pn(),W);return function Qp(E,h,f,A=500,W=600){const oe=Math.max((window.screen.availHeight-W)/2,0).toString(),Fe=Math.max((window.screen.availWidth-A)/2,0).toString();let Dt="";const jt=Object.assign(Object.assign({},uf),{width:A.toString(),height:W.toString(),top:oe,left:Fe}),Cn=(0,M.ZQ)().toLowerCase();f&&(Dt=Jr(Cn)?"_blank":f),Me(Cn)&&(h=h||"http://localhost",jt.scrollbars="yes");const zn=Object.entries(jt).reduce((oo,[Ra,Hu])=>`${oo}${Ra}=${Hu},`,"");if(function ut(E=(0,M.ZQ)()){var h;return us(E)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Cn)&&"_self"!==Dt)return function lf(E,h){const f=document.createElement("a");f.href=E,f.target=h;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(A)}(h||"",Dt),new Oi(null);const Dr=window.open(h||"",Dt,zn);ce(Dr,E,"popup-blocked");try{Dr.focus()}catch{}return new Oi(Dr)}(h,Dt,Jn())})()}_openRedirect(h,f,A,W){var oe=this;return(0,_.A)(function*(){return yield oe._originValidation(h),function Ao(E){Ci().location.href=E}(yield nu(h,f,A,pn(),W)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:W,promise:oe}=this.eventManagers[f];return W?Promise.resolve(W):(We(oe,"If manager is not set, promise should be"),oe)}const A=this.initAndGetManager(h);return this.eventManagers[f]={promise:A},A.catch(()=>{delete this.eventManagers[f]}),A}initAndGetManager(h){var f=this;return(0,_.A)(function*(){const A=yield function cf(E){return Uu.apply(this,arguments)}(h),W=new Lu(h);return A.register("authEvent",oe=>(ce(oe?.authEvent,h,"invalid-auth-event"),{status:W.onEvent(oe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:W},f.iframes[h._key()]=A,W})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(Od,{type:Od},W=>{var oe;const Fe=null===(oe=W?.[0])||void 0===oe?void 0:oe[Od];void 0!==Fe&&f(!!Fe),ue(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function ta(E){return Ks.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return xt()||Lr()||us()}};class Nc{constructor(h){this.factorId=h}_process(h,f,A){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,A);case"signin":return this._finalizeSignIn(h,f.credential);default:return Ne("unexpected MultiFactorSessionType")}}}class ju extends Nc{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new ju(h)}_finalizeEnroll(h,f,A){return function Gs(E,h){return Ze(E,"POST","/v2/accounts/mfaEnrollment:finalize",vt(E,h))}(h,{idToken:f,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function Ed(E,h){return Ze(E,"POST","/v2/accounts/mfaSignIn:finalize",vt(E,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $u=(()=>{class E{constructor(){}static assertion(f){return ju._fromCredential(f)}}return E.FACTOR_ID="phone",E})();var Ll="@firebase/auth";class Ul{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,_.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(A=>{h(A?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);f&&(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,M.XA)("authIdTokenMaxAge"),function br(E){on=E}({loadJS:E=>new Promise((h,f)=>{const A=document.createElement("script");A.setAttribute("src",E),A.onload=h,A.onerror=W=>{const oe=de("internal-error");oe.customData=W,f(oe)},A.type="text/javascript",A.charset="UTF-8",function xc(){var E,h;return null!==(h=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==h?h:document}().appendChild(A)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function kd(E){(0,V._registerComponent)(new Pe.uA("auth",(h,{options:f})=>{const A=h.getProvider("app").getImmediate(),W=h.getProvider("heartbeat"),oe=h.getProvider("app-check-internal"),{apiKey:Fe,authDomain:Dt}=A.options;ce(Fe&&!Fe.includes(":"),"invalid-api-key",{appName:A.name});const jt={apiKey:Fe,authDomain:Dt,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nn(E)},Cn=new Kt(A,W,oe,jt);return function Co(E,h){const f=h?.persistence||[],A=(Array.isArray(f)?f:[f]).map(Ft);h?.errorMap&&E._updateErrorMap(h.errorMap),E._initializeWithPersistence(A,h?.popupRedirectResolver)}(Cn,f),Cn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,A)=>{h.getProvider("auth-internal").initialize()})),(0,V._registerComponent)(new Pe.uA("auth-internal",h=>{const f=Ut(h.getProvider("auth").getImmediate());return new Ul(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,V.registerVersion)(Ll,"1.7.8",function xd(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(E)),(0,V.registerVersion)(Ll,"1.7.8","esm2017")}("Browser")},1076:(Zt,qe,x)=>{x.d(qe,{Am:()=>er,Bd:()=>Ne,FA:()=>Gt,Fy:()=>Ve,I9:()=>ir,Im:()=>mt,Ku:()=>Nt,Ll:()=>ce,T9:()=>ue,Uj:()=>$e,XA:()=>de,ZQ:()=>Ye,bD:()=>Ot,cY:()=>ae,eX:()=>ct,g:()=>Ze,gR:()=>or,hp:()=>wn,jZ:()=>et,lT:()=>xn,lV:()=>bn,mS:()=>De,nr:()=>ke,p7:()=>We,sr:()=>pn,tD:()=>Vr,u:()=>ve,zW:()=>Qe,zw:()=>He});const w=function(ge){const q=[];let J=0;for(let ie=0;ie<ge.length;ie++){let me=ge.charCodeAt(ie);me<128?q[J++]=me:me<2048?(q[J++]=me>>6|192,q[J++]=63&me|128):55296==(64512&me)&&ie+1<ge.length&&56320==(64512&ge.charCodeAt(ie+1))?(me=65536+((1023&me)<<10)+(1023&ge.charCodeAt(++ie)),q[J++]=me>>18|240,q[J++]=me>>12&63|128,q[J++]=me>>6&63|128,q[J++]=63&me|128):(q[J++]=me>>12|224,q[J++]=me>>6&63|128,q[J++]=63&me|128)}return q},Pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,q){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,ie=[];for(let me=0;me<ge.length;me+=3){const It=ge[me],Ft=me+1<ge.length,mn=Ft?ge[me+1]:0,Wn=me+2<ge.length,Xn=Wn?ge[me+2]:0;let Me=(15&mn)<<2|Xn>>6,Lr=63&Xn;Wn||(Lr=64,Ft||(Me=64)),ie.push(J[It>>2],J[(3&It)<<4|mn>>4],J[Me],J[Lr])}return ie.join("")},encodeString(ge,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(ge):this.encodeByteArray(w(ge),q)},decodeString(ge,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(ge):function(ge){const q=[];let J=0,ie=0;for(;J<ge.length;){const me=ge[J++];if(me<128)q[ie++]=String.fromCharCode(me);else if(me>191&&me<224){const It=ge[J++];q[ie++]=String.fromCharCode((31&me)<<6|63&It)}else if(me>239&&me<365){const Wn=((7&me)<<18|(63&ge[J++])<<12|(63&ge[J++])<<6|63&ge[J++])-65536;q[ie++]=String.fromCharCode(55296+(Wn>>10)),q[ie++]=String.fromCharCode(56320+(1023&Wn))}else{const It=ge[J++],Ft=ge[J++];q[ie++]=String.fromCharCode((15&me)<<12|(63&It)<<6|63&Ft)}}return q.join("")}(this.decodeStringToByteArray(ge,q))},decodeStringToByteArray(ge,q){this.init_();const J=q?this.charToByteMapWebSafe_:this.charToByteMap_,ie=[];for(let me=0;me<ge.length;){const It=J[ge.charAt(me++)],mn=me<ge.length?J[ge.charAt(me)]:0;++me;const Xn=me<ge.length?J[ge.charAt(me)]:64;++me;const $t=me<ge.length?J[ge.charAt(me)]:64;if(++me,null==It||null==mn||null==Xn||null==$t)throw new B;ie.push(It<<2|mn>>4),64!==Xn&&(ie.push(mn<<4&240|Xn>>2),64!==$t&&ie.push(Xn<<6&192|$t))}return ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}};class B extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $e=function(ge){return function(ge){const q=w(ge);return Pe.encodeByteArray(q,!0)}(ge).replace(/\./g,"")},ve=function(ge){try{return Pe.decodeString(ge,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function He(ge,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return q}for(const J in q)!q.hasOwnProperty(J)||!Tt(J)||(ge[J]=He(ge[J],q[J]));return ge}function Tt(ge){return"__proto__"!==ge}function De(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const st=()=>{try{return De().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ge=process.env.__FIREBASE_DEFAULTS__;return ge?JSON.parse(ge):void 0})()||(()=>{if(typeof document>"u")return;let ge;try{ge=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const q=ge&&ve(ge[1]);return q&&JSON.parse(q)})()}catch(ge){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ge}`)}},ue=()=>{var ge;return null===(ge=st())||void 0===ge?void 0:ge.config},de=ge=>{var q;return null===(q=st())||void 0===q?void 0:q[`_${ge}`]};class ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,J)=>{this.resolve=q,this.reject=J})}wrapCallback(q){return(J,ie)=>{J?this.reject(J):this.resolve(ie),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(J):q(J,ie))}}}function Ve(ge,q){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ie=q||"demo-project",me=ge.iat||0,It=ge.sub||ge.user_id;if(!It)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ft=Object.assign({iss:`https://securetoken.google.com/${ie}`,aud:ie,iat:me,exp:me+3600,auth_time:me,sub:It,user_id:It,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[$e(JSON.stringify({alg:"none",type:"JWT"})),$e(JSON.stringify(Ft)),""].join(".")}function Ye(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function et(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function ce(){var ge;const q=null===(ge=st())||void 0===ge?void 0:ge.forceEnvironment;if("node"===q)return!0;if("browser"===q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ne(){return typeof window<"u"||We()}function We(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function pn(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function bn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xn(){const ge=Ye();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function ke(){return!ce()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){try{return"object"==typeof indexedDB}catch{return!1}}function ct(){return new Promise((ge,q)=>{try{let J=!0;const ie="validate-browser-context-for-indexeddb-analytics-module",me=self.indexedDB.open(ie);me.onsuccess=()=>{me.result.close(),J||self.indexedDB.deleteDatabase(ie),ge(!0)},me.onupgradeneeded=()=>{J=!1},me.onerror=()=>{var It;q((null===(It=me.error)||void 0===It?void 0:It.message)||"")}}catch(J){q(J)}})}class Ze extends Error{constructor(q,J,ie){super(J),this.code=q,this.customData=ie,this.name="FirebaseError",Object.setPrototypeOf(this,Ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gt.prototype.create)}}class Gt{constructor(q,J,ie){this.service=q,this.serviceName=J,this.errors=ie}create(q,...J){const ie=J[0]||{},me=`${this.service}/${q}`,It=this.errors[q],Ft=It?function un(ge,q){return ge.replace(Jt,(J,ie)=>{const me=q[ie];return null!=me?String(me):`<${ie}?>`})}(It,ie):"Error";return new Ze(me,`${this.serviceName}: ${Ft} (${me}).`,ie)}}const Jt=/\{\$([^}]+)}/g;function or(ge,q){return Object.prototype.hasOwnProperty.call(ge,q)}function mt(ge){for(const q in ge)if(Object.prototype.hasOwnProperty.call(ge,q))return!1;return!0}function Ot(ge,q){if(ge===q)return!0;const J=Object.keys(ge),ie=Object.keys(q);for(const me of J){if(!ie.includes(me))return!1;const It=ge[me],Ft=q[me];if(nt(It)&&nt(Ft)){if(!Ot(It,Ft))return!1}else if(It!==Ft)return!1}for(const me of ie)if(!J.includes(me))return!1;return!0}function nt(ge){return null!==ge&&"object"==typeof ge}function er(ge){const q=[];for(const[J,ie]of Object.entries(ge))Array.isArray(ie)?ie.forEach(me=>{q.push(encodeURIComponent(J)+"="+encodeURIComponent(me))}):q.push(encodeURIComponent(J)+"="+encodeURIComponent(ie));return q.length?"&"+q.join("&"):""}function ir(ge){const q={};return ge.replace(/^\?/,"").split("&").forEach(ie=>{if(ie){const[me,It]=ie.split("=");q[decodeURIComponent(me)]=decodeURIComponent(It)}}),q}function wn(ge){const q=ge.indexOf("?");if(!q)return"";const J=ge.indexOf("#",q);return ge.substring(q,J>0?J:void 0)}function Vr(ge,q){const J=new zr(ge,q);return J.subscribe.bind(J)}class zr{constructor(q,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{q(this)}).catch(ie=>{this.error(ie)})}next(q){this.forEachObserver(J=>{J.next(q)})}error(q){this.forEachObserver(J=>{J.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,J,ie){let me;if(void 0===q&&void 0===J&&void 0===ie)throw new Error("Missing Observer.");me=function Gi(ge,q){if("object"!=typeof ge||null===ge)return!1;for(const J of q)if(J in ge&&"function"==typeof ge[J])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:J,complete:ie},void 0===me.next&&(me.next=Or),void 0===me.error&&(me.error=Or),void 0===me.complete&&(me.complete=Or);const It=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?me.error(this.finalError):me.complete()}catch{}}),this.observers.push(me),It}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,q)}sendOne(q,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{J(this.observers[q])}catch(ie){typeof console<"u"&&console.error&&console.error(ie)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Or(){}function Nt(ge){return ge&&ge._delegate?ge._delegate:ge}},102:(Zt,qe,x)=>{x.d(qe,{i:()=>bt});var _=x(177),V=x(9417),M=x(9156),w=x(4438),se=x(6483),Pe=x(5435),B=x(6569),Le=x(4454),$e=x(2906),ve=x(6552);function _e(gt,ue){if(1&gt){const de=w.RV6();w.j41(0,"img",13),w.bIt("click",function(){w.eBV(de);const Ve=w.XpG(3);return w.Njj(Ve.editing())}),w.k0s()}}function He(gt,ue){if(1&gt){const de=w.RV6();w.j41(0,"img",13),w.bIt("click",function(){w.eBV(de);const Ve=w.XpG(3);return w.Njj(Ve.cancelEditing())}),w.k0s()}}function Tt(gt,ue){if(1&gt){const de=w.RV6();w.j41(0,"div",10)(1,"img",11),w.bIt("click",function(){w.eBV(de);const Ve=w.XpG(2);return w.Njj(Ve.removeProduct())}),w.k0s(),w.DNE(2,_e,1,0,"img",12)(3,He,1,0,"img",12),w.k0s()}if(2&gt){const de=w.XpG(2);w.R7$(2),w.Y8G("ngIf",""===de.isEditing),w.R7$(),w.Y8G("ngIf",""!==de.isEditing)}}function De(gt,ue){if(1&gt){const de=w.RV6();w.j41(0,"div",14)(1,"app-reusable-form",15),w.bIt("formSubmitted",function(Ve){w.eBV(de);const Ye=w.XpG(2);return w.Njj(Ye.onFormSubmit(Ve))}),w.k0s(),w.j41(2,"div")(3,"button",4),w.bIt("click",function(){w.eBV(de);const Ve=w.XpG(2);return w.Njj(Ve.cancelEditing())}),w.EFF(4,"Cancel"),w.k0s()()()}}function Be(gt,ue){if(1&gt&&(w.j41(0,"div",16),w.EFF(1),w.k0s()),2&gt){const de=w.XpG(2);w.R7$(),w.SpI(" -",de.product.product.discount,"% ")}}function At(gt,ue){if(1&gt&&(w.j41(0,"span"),w.EFF(1),w.k0s()),2&gt){const de=w.XpG(2);w.R7$(),w.SpI("",de.product.product.price,"$")}}function yt(gt,ue){if(1&gt&&(w.j41(0,"div",17)(1,"span"),w.EFF(2),w.k0s(),w.j41(3,"span"),w.EFF(4),w.k0s()()),2&gt){const de=w.XpG(2);w.R7$(2),w.SpI(" ",de.product.product.price,"$ "),w.R7$(2),w.SpI(" ",de.calculateDiscount(),"$ ")}}function st(gt,ue){if(1&gt){const de=w.RV6();w.j41(0,"div")(1,"div",1),w.DNE(2,Tt,4,2,"div",2),w.nI1(3,"async"),w.j41(4,"div",3)(5,"button",4),w.bIt("click",function(){w.eBV(de);const Ve=w.XpG();return w.Njj(Ve.addInCart())}),w.EFF(6,"Add to cart"),w.k0s(),w.j41(7,"div")(8,"span",4),w.bIt("click",function(){w.eBV(de);const Ve=w.XpG();return w.Njj(Ve.navigation())}),w.EFF(9,"See Product"),w.k0s()()(),w.DNE(10,De,5,0,"div",5),w.j41(11,"div",3),w.DNE(12,Be,2,1,"div",6),w.nrm(13,"img",7),w.k0s(),w.j41(14,"div",8)(15,"span"),w.EFF(16),w.nI1(17,"upperCase"),w.k0s(),w.j41(18,"span"),w.EFF(19),w.nI1(20,"slice"),w.nI1(21,"upperCase"),w.k0s(),w.DNE(22,At,2,1,"span",0)(23,yt,5,2,"div",9),w.k0s()()()}if(2&gt){const de=w.XpG();w.R7$(2),w.Y8G("ngIf",w.bMT(3,10,de.isAdmin)),w.R7$(2),w.Y8G("ngClass",de.isEditing?"display-none":"hover"),w.R7$(6),w.Y8G("ngIf",de.isEditing===de.product.key),w.R7$(),w.Y8G("ngClass",de.isEditing===de.product.key?"display-none":"img-placeholder"),w.R7$(),w.Y8G("ngIf",null==de.product||null==de.product.product?null:de.product.product.discount),w.R7$(),w.Y8G("src",de.product.product.photoUrl[0],w.B4B),w.R7$(3),w.JRh(w.bMT(17,12,de.product.product.category)),w.R7$(3),w.JRh(w.bMT(21,18,w.brH(20,14,de.product.product.model,0,150))),w.R7$(3),w.Y8G("ngIf",!de.product.product.discount),w.R7$(),w.Y8G("ngIf",de.product.product.discount)}}let bt=(()=>{class gt{constructor(de,ae,Ve,Ye,et,ce){this.sharedService=de,this.authService=ae,this.router=Ve,this.cd=Ye,this.cartService=et,this.specificParent=ce,this.singleProdPage=!1,this.removeEvent=new w.bkB,this.editEvent=new w.bkB,this.position=0,this.isEditing="",this.isUsedInSpecificParent=!1,this.showSpecificContent=!1,this.specificParent&&(this.isUsedInSpecificParent=!0)}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.loggedUser.subscribe(de=>{this.authService.isAdmin.next(de?.user.isAdmin),this.isAdmin=this.authService.isAdmin.asObservable(),this.userID=de?.key})}removeProduct(){this.sharedService.removeProduct(this.product?.product.category,this.product?.key).subscribe(()=>{this.removeEvent.emit({prodId:this.product?.key,prodCategory:this.product?.product.category}),this.cd.detectChanges()})}navigation(){this.router.navigate([`single-product/${this.product?.key}`],{queryParams:{type:this.product?.product.category,prod:this.product?.key}}),this.cd.detectChanges()}addInCart(){this.cartService.cartOperations("add",this.product)}navigateToCategotyPage(){this.router.navigate([`categoty/${this.product?.product.category}`])}calculateDiscount(){return this.product?.product.price-Math.round(this.product?.product.price*this.product?.product.discount/100)}editing(){this.isEditing=this.product?.key}cancelEditing(){this.isEditing=""}onFormSubmit(de){this.editEvent.emit({form:de,prodId:this.product?.key,prodCategory:this.product?.product?.category}),de.model&&(this.product.product.model=de.model),de.price&&(this.product.product.price=de.price),de.discount&&(this.product.product.discount=de.discount),de.quantity&&(this.product.product.quantity=de.quantity),de.description&&(this.product.product.description=de.description),this.cancelEditing()}firstLetterUpperCase(de){return de.charAt(0).toUpperCase()+de.substring(1,de.length)}static#e=this.\u0275fac=function(ae){return new(ae||gt)(w.rXU(Pe.m),w.rXU(B.p),w.rXU(Le.Ix),w.rXU(w.gRc),w.rXU($e.m),w.rXU(ve.u,8))};static#t=this.\u0275cmp=w.VBU({type:gt,selectors:[["app-card"]],inputs:{product:"product",singleProdPage:"singleProdPage",showSpecificContent:"showSpecificContent"},outputs:{removeEvent:"removeEvent",editEvent:"editEvent"},standalone:!0,features:[w.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[1,"single-product"],["class","delete-button",4,"ngIf"],[3,"ngClass"],[3,"click"],["class","edit",4,"ngIf"],["class","discount",4,"ngIf"],["alt","img",3,"src"],[1,"info"],["class","if-discount",4,"ngIf"],[1,"delete-button"],["src","assets/remove.png","alt","img",3,"click"],["src","assets/pen.png","alt","img",3,"click",4,"ngIf"],["src","assets/pen.png","alt","img",3,"click"],[1,"edit"],[3,"formSubmitted"],[1,"discount"],[1,"if-discount"]],template:function(ae,Ve){1&ae&&w.DNE(0,st,24,20,"div",0),2&ae&&w.Y8G("ngIf",Ve.product&&Ve.product.product)},dependencies:[V.YN,_.MD,_.YU,_.bT,_.Jj,_.P9,M.B,se.P],styles:[".single-product[_ngcontent-%COMP%]{width:200px;height:420px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%]{position:absolute;z-index:1}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:2px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:14%;z-index:1}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:20px;border-radius:4px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:35px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{color:red}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{display:flex;gap:10px;justify-content:center;width:140px;height:40px;color:#fff}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{height:260px;display:flex;justify-content:center;position:relative}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;min-height:50%;min-width:50%}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{height:155px;display:flex;flex-direction:column;justify-content:space-between}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{text-decoration:line-through}.if-discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;justify-self:flex-end}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:20px}.display-none[_ngcontent-%COMP%]{display:none}"],changeDetection:0})}return gt})()},3227:(Zt,qe,x)=>{x.d(qe,{K:()=>st});var _=x(177),V=x(4454),M=x(4438),w=x(1413);const se=["payPalButtonContainer"];let Pe=(()=>{class bt{constructor(ue){this.zone=ue}registerScript(ue,de,ae){const Ve=window[de];if(Ve)return void this.zone.run(()=>{ae(Ve)});const Ye=document.createElement("script");Ye.id=this.getElemId(de),Ye.innerHTML="",Ye.onload=()=>{this.zone.run(()=>{ae(window[de])})},Ye.src=ue,Ye.async=!0,Ye.defer=!0,document.getElementsByTagName("head")[0].appendChild(Ye)}cleanup(ue){const de=document.getElementById(this.getElemId(ue));de&&de.remove()}getElemId(ue){return`ngx-paypal-script-elem-${ue}`}}return bt.\u0275fac=function(ue){return new(ue||bt)(M.KVO(M.SKi))},bt.\u0275prov=M.jDH({token:bt,factory:bt.\u0275fac}),bt})(),B=(()=>{class bt{constructor(ue){this.scriptService=ue,this.paypalWindowName="paypal"}registerPayPalScript(ue,de){this.scriptService.registerScript(this.getUrlForConfig(ue),this.paypalWindowName,de)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(ue){const de=[{name:"client-id",value:ue.clientId}];return ue.locale&&de.push({name:"locale",value:ue.locale}),ue.currency&&de.push({name:"currency",value:ue.currency}),ue.commit&&de.push({name:"commit",value:ue.commit}),ue.vault&&de.push({name:"vault",value:ue.vault}),ue.intent&&de.push({name:"intent",value:ue.intent}),ue.funding&&de.push({name:"components",value:"buttons,funding-eligibility"}),ue.extraParams&&de.push(...ue.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(de)}`}getQueryString(ue){let de="";for(let ae=0;ae<ue.length;ae++){const Ve=ue[ae];de+=0===ae?"?":"&",de+=`${Ve.name}=${Ve.value}`}return de}}return bt.\u0275fac=function(ue){return new(ue||bt)(M.KVO(Pe))},bt.\u0275prov=M.jDH({token:bt,factory:bt.\u0275fac}),bt})(),Le=(()=>{class bt{constructor(ue,de,ae){this.paypalScriptService=ue,this.cdr=de,this.ngZone=ae,this.registerScript=!0,this.scriptLoaded=new M.bkB,this.ngUnsubscribe=new w.B,this.initializePayPal=!0}set payPalButtonContainer(ue){this.payPalButtonContainerElem=ue}ngOnChanges(ue){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());const de=this.config;ue.config.isFirstChange()&&de&&this.registerScript&&this.initPayPalScript(de,ae=>{this.payPal=ae,this.doPayPalCheck()}),ue.config.isFirstChange()||this.reinitialize(de)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(ue){this.payPal=ue,this.doPayPalCheck()}reinitialize(ue){if(this.config=ue,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)try{for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild)}catch(de){console.error(de)}this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,de=>{this.payPal=de,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(ue,de){this.paypalScriptService.registerPayPalScript({clientId:ue.clientId,locale:ue.advanced?.locale,commit:ue.advanced&&ue.advanced.commit?ue.advanced.commit:void 0,currency:ue.currency,vault:ue.vault,intent:ue.intent,funding:null!=ue.fundingSource||null!=ue.fundingSource,extraParams:ue.advanced&&ue.advanced.extraQueryParams?ue.advanced.extraQueryParams:[]},ae=>{this.scriptLoaded.next(ae),de(ae)})}generateElementId(){return`ngx-captcha-id-${this.generateGuid()}`}initPayPal(ue,de){this.ngZone.runOutsideAngular(()=>{const et={style:ue.style,fundingSource:void 0,onApprove:(Ne,We)=>this.ngZone.run(()=>{if(ue.onApprove&&ue.onApprove(Ne,We),ue.authorizeOnServer)return ue.authorizeOnServer(Ne,We);const pn=ue.onClientAuthorization;pn&&We.order.capture().then(bn=>{this.ngZone.run(()=>{pn(bn)})})}),onError:Ne=>{this.ngZone.run(()=>{ue.onError&&ue.onError(Ne)})},onCancel:(Ne,We)=>{this.ngZone.run(()=>{ue.onCancel&&ue.onCancel(Ne,We)})},onClick:(Ne,We)=>{this.ngZone.run(()=>{ue.onClick&&ue.onClick(Ne,We)})},onInit:(Ne,We)=>{this.ngZone.run(()=>{ue.onInit&&ue.onInit(Ne,We)})},...(ue.createOrderOnClient||ue.createOrderOnServer)&&{createOrder:(Ne,We)=>this.ngZone.run(()=>{if(ue.createOrderOnClient&&ue.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!ue.createOrderOnClient&&!ue.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(ue.createOrderOnClient)return We.order.create(ue.createOrderOnClient(Ne));if(ue.createOrderOnServer)return ue.createOrderOnServer(Ne);throw Error("Invalid state for 'createOrder'.")})},...ue.createSubscriptionOnClient&&{createSubscription:(Ne,We)=>this.ngZone.run(()=>{if(ue.createSubscriptionOnClient)return We.subscription.create(ue.createSubscriptionOnClient(Ne))})},...ue.onShippingChange&&{onShippingChange:(Ne,We)=>this.ngZone.run(()=>{if(ue.onShippingChange)return ue.onShippingChange(Ne,We)})}};let ce;switch(ue.fundingSource){case"PAYPAL":ce=de.FUNDING.PAYPAL;break;case"CARD":ce=de.FUNDING.CARD;break;case"PAYLATER":ce=de.FUNDING.PAYLATER;break;case"CREDIT":ce=de.FUNDING.CREDIT;break;case"VENMO":ce=de.FUNDING.VENMO}null!=ce&&(et.fundingSource=ce,"PAYPAL"!==ue.fundingSource&&delete et.style?.color),de.Buttons(et).render(`#${this.payPalButtonContainerId}`)})}generateGuid(){let ue=(new Date).getTime(),de=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,ae=>{let Ve=16*Math.random();return ue>0?(Ve=(ue+Ve)%16|0,ue=Math.floor(ue/16)):(Ve=(de+Ve)%16|0,de=Math.floor(de/16)),("x"==ae?Ve:7&Ve|8).toString(16)})}}return bt.\u0275fac=function(ue){return new(ue||bt)(M.rXU(B),M.rXU(M.gRc),M.rXU(M.SKi))},bt.\u0275cmp=M.VBU({type:bt,selectors:[["ngx-paypal"]],viewQuery:function(ue,de){if(1&ue&&M.GBs(se,5),2&ue){let ae;M.mGM(ae=M.lsd())&&(de.payPalButtonContainer=ae.first)}},inputs:{config:"config",registerScript:"registerScript"},outputs:{scriptLoaded:"scriptLoaded"},features:[M.OA$],decls:2,vars:1,consts:[["payPalButtonContainer",""],[3,"id"]],template:function(ue,de){1&ue&&M.nrm(0,"div",1,0),2&ue&&M.Y8G("id",de.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),bt})(),$e=(()=>{class bt{}return bt.\u0275fac=function(ue){return new(ue||bt)},bt.\u0275mod=M.$C({type:bt}),bt.\u0275inj=M.G2t({providers:[Pe,B],imports:[_.MD]}),bt})();var ve=x(5435),_e=x(6569);let He=(()=>{class bt{constructor(ue,de){this.sharedService=ue,this.authService=de,this.userId="",this.userEmail=""}ngOnInit(){this.authService.loggedUser.subscribe(ue=>{ue&&ue.user.email&&(this.userId=ue?.key,this.userEmail=ue?.user.email)}),this.cartArr$?.subscribe(ue=>{this.cartArr=ue}),this.initConfig()}update(){if(!this.userEmail)throw new Error("no user email found");this.authService.findUser(this.userEmail).subscribe(ue=>{this.authService.loggedUser.next(ue)})}initConfig(){this.paypalConfig={currency:"USD",clientId:"AQ7YdqsTpxT_ouN31zRUyhQFvr1mMuO8rfcrWINg6SE5BFQ0l67cIFOhsNjIMdaxDU2RU42hI8yx2IxG",createOrderOnClient:ue=>({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:this.totalPrice?.toString(),breakdown:{item_total:{currency_code:"USD",value:this.totalPrice?.toString()}}},items:[{name:"Music Shop Products",quantity:"1",category:"PHYSICAL_GOODS",unit_amount:{currency_code:"USD",value:this.totalPrice?.toString()}}]}]}),advanced:{commit:"true"},style:{label:"paypal",layout:"vertical"},onApprove:(ue,de)=>{this.cartArr&&this.totalPrice&&(this.sharedService.buyProducts(this.cartArr,this.totalPrice,this.userEmail,this.userId),this.update(),console.log("payment approved: ",ue,de))},onCancel:(ue,de)=>{console.log("payment cancelled: ",ue,de)},onClick:(ue,de)=>{console.log("Onclick: ",ue,de)}}}static#e=this.\u0275fac=function(de){return new(de||bt)(M.rXU(ve.m),M.rXU(_e.p))};static#t=this.\u0275cmp=M.VBU({type:bt,selectors:[["app-paypal"]],inputs:{totalPrice:"totalPrice",cartArr$:"cartArr$"},standalone:!0,features:[M.aNF],decls:1,vars:1,consts:[[3,"config"]],template:function(de,ae){1&de&&M.nrm(0,"ngx-paypal",0),2&de&&M.Y8G("config",ae.paypalConfig)},dependencies:[$e,Le]})}return bt})();var Tt=x(2906);const De=["paymentRef"];function Be(bt,gt){if(1&bt){const ue=M.RV6();M.j41(0,"div",5)(1,"div",6)(2,"img",7),M.bIt("click",function(){const ae=M.eBV(ue).$implicit,Ve=M.XpG(2);return M.Njj(Ve.removeFromCart(ae.product))}),M.k0s()(),M.j41(3,"div"),M.nrm(4,"img",8),M.k0s(),M.j41(5,"div",9)(6,"span"),M.EFF(7),M.k0s(),M.j41(8,"span"),M.EFF(9),M.nI1(10,"slice"),M.k0s(),M.j41(11,"span"),M.EFF(12),M.k0s(),M.j41(13,"p"),M.EFF(14),M.k0s(),M.j41(15,"p")(16,"img",10),M.bIt("click",function(){const ae=M.eBV(ue).$implicit,Ve=M.XpG(2);return M.Njj(Ve.plus(ae.product.key,"minus"))}),M.k0s(),M.EFF(17),M.j41(18,"img",11),M.bIt("click",function(){const ae=M.eBV(ue).$implicit,Ve=M.XpG(2);return M.Njj(Ve.plus(ae.product.key,"plus"))}),M.k0s()(),M.j41(19,"button",12),M.bIt("click",function(){const ae=M.eBV(ue).$implicit,Ve=M.XpG(2);return M.Njj(Ve.nav(ae.product.key,ae.product.product.category))}),M.EFF(20," See Product "),M.k0s()()()}if(2&bt){const ue=gt.$implicit;M.R7$(4),M.Y8G("src",ue.product.product.photoUrl[0],M.B4B),M.R7$(3),M.SpI("Type: ",ue.product.product.category,""),M.R7$(2),M.SpI("Model: ",M.brH(10,6,ue.product.product.model,0,60),"..."),M.R7$(3),M.SpI("Price: ",ue.product.product.price,"$"),M.R7$(2),M.SpI("Discount -",ue.product.product.discount,"%"),M.R7$(3),M.SpI("",ue.quantity," ")}}function At(bt,gt){if(1&bt&&(M.j41(0,"div",13)(1,"h2"),M.EFF(2),M.k0s(),M.j41(3,"div")(4,"div"),M.nrm(5,"app-paypal",14),M.k0s()()()),2&bt){const ue=M.XpG(2);M.R7$(2),M.SpI("Total Price: ",ue.calculateTotalPrice(),"$"),M.R7$(3),M.Y8G("cartArr$",ue.cart$)("totalPrice",ue.calculateTotalPrice())}}function yt(bt,gt){if(1&bt&&(M.j41(0,"div",1)(1,"div")(2,"h2"),M.EFF(3,"Cart"),M.k0s()(),M.j41(4,"div",2),M.DNE(5,Be,21,10,"div",3),M.nI1(6,"async"),M.k0s(),M.DNE(7,At,6,3,"div",4),M.k0s()),2&bt){const ue=M.XpG();M.R7$(5),M.Y8G("ngForOf",M.bMT(6,2,ue.cart$)),M.R7$(2),M.Y8G("ngIf",ue.calculateTotalPrice()>0)}}let st=(()=>{class bt{constructor(ue,de,ae,Ve,Ye){this.sharedService=ue,this.router=de,this.authService=ae,this.cd=Ve,this.cartService=Ye,this.showCart=!0}ngOnInit(){this.authService.checkIfLoggedIn(),this.cart$=this.cartService.cart.asObservable(),this.cd.detectChanges()}makePayment(){this.sharedService.buyProducts(this.cartService.cart.getValue(),this.calculateTotalPrice(),this.authService.loggedUser.getValue()?.user.email,this.authService.loggedUser.getValue()?.key)}removeFromCart(ue){this.cartService.cartOperations("remove",ue),this.calculateTotalPrice()}nav(ue,de){this.router.navigate([`single-product/${ue}`],{queryParams:{type:de,prod:ue}})}plus(ue,de){let ae=this.cartService.cart.getValue();const Ve=ae.findIndex(Ye=>Ye.product.key===ue);"plus"===de?ae[Ve].quantity++:ae[Ve].quantity>1&&ae[Ve].quantity--,this.cartService.cart.next(ae)}calculateTotalPrice(){let ue=0;return this.cartService.cart.getValue().forEach(de=>{if(de.product.product.discount>0){const ae=de.quantity*(de.product.product.price-this.calculateDiscount(de.product.product.price,de.product.product.discount));ue+=ae}else ue+=de.quantity*de.product.product.price}),ue}calculateDiscount(ue,de){return Math.round(ue*de/100)}static#e=this.\u0275fac=function(de){return new(de||bt)(M.rXU(ve.m),M.rXU(V.Ix),M.rXU(_e.p),M.rXU(M.gRc),M.rXU(Tt.m))};static#t=this.\u0275cmp=M.VBU({type:bt,selectors:[["app-cart"]],viewQuery:function(de,ae){if(1&de&&M.GBs(De,7),2&de){let Ve;M.mGM(Ve=M.lsd())&&(ae.paymentRef=Ve.first)}},inputs:{showCart:"showCart",userEmail:"userEmail"},standalone:!0,features:[M.aNF],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"products"],["class","product",4,"ngFor","ngForOf"],["class","payment",4,"ngIf"],[1,"product"],[1,"remove"],["src","assets/remove.png","alt","img",3,"click"],["alt","img",3,"src"],[1,"description"],["src","assets/minus.png","alt","img",3,"click"],["src","assets/plus.png","alt","img",3,"click"],[3,"click"],[1,"payment"],[3,"cartArr$","totalPrice"]],template:function(de,ae){1&de&&M.DNE(0,yt,8,4,"div",0),2&de&&M.Y8G("ngIf",ae.showCart)},dependencies:[_.MD,_.Sq,_.bT,_.Jj,_.P9,V.iI,He],styles:[".container[_ngcontent-%COMP%]{width:600px;height:600px;background-color:#98c0e0;overflow-y:scroll}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{text-align:center;padding:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]{display:flex;gap:5px;height:150px;width:80%;border:1px solid rgb(118,153,218);border-radius:8px;position:relative}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{position:absolute;right:0}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:20%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > img[_ngcontent-%COMP%]{width:100%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:repeat(2,190px);grid-template-rows:repeat(3,46px);align-content:center;align-items:center}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:14px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px;cursor:pointer}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:not(:last-child){font-size:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:24px;width:130px;border:none;color:#fff;background-color:#7699da;border-radius:3px;cursor:pointer}.container[_ngcontent-%COMP%]   .payment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}"],changeDetection:0})}return bt})()},2906:(Zt,qe,x)=>{x.d(qe,{m:()=>M});var _=x(4438),V=x(4412);let M=(()=>{class w{constructor(){this.cart=new V.t([]),this.cartArr=new _.bkB}cartOperations(Pe,B){let Le=this.cart.getValue();const $e=Le.findIndex(_e=>_e.product.key===B.key);let ve=[...Le];-1!==$e?"add"===Pe?ve[$e].quantity++:ve.splice($e,1):"add"===Pe&&ve.push({quantity:1,product:B}),this.cart.next(ve),localStorage.setItem("cart",JSON.stringify(this.cart.value))}static#e=this.\u0275fac=function(B){return new(B||w)};static#t=this.\u0275prov=_.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})()},708:(Zt,qe,x)=>{x.d(qe,{n:()=>se});var _=x(9417),V=x(4454),M=x(4438),w=x(6569);let se=(()=>{class Pe{constructor(Le,$e){this.service=Le,this.router=$e,this.email=""}sendEmail(){this.email=""}navigate(Le){if("profile"===Le){const $e=this.service.loggedUser.getValue()?.key;this.router.navigate([`profile/${$e}`])}}static#e=this.\u0275fac=function($e){return new($e||Pe)(M.rXU(w.p),M.rXU(V.Ix))};static#t=this.\u0275cmp=M.VBU({type:Pe,selectors:[["app-footer"]],standalone:!0,features:[M.aNF],decls:33,vars:1,consts:[[1,"container"],[1,"flex-container"],["src","assets/placeholder.png","alt","img"],["src","assets/phone.png","alt","img"],["routerLink","/login"],["routerLink","/products"],[3,"click"],["placeholder","Enter your Email",3,"ngModelChange","ngModel"],["src","assets/send.png","alt","img",3,"click"]],template:function($e,ve){1&$e&&(M.j41(0,"div",0),M.nrm(1,"div"),M.j41(2,"div",1)(3,"div")(4,"h3"),M.EFF(5,"SABAMUSIC."),M.k0s(),M.j41(6,"p"),M.EFF(7,"Music Shop over 1000 brand. we sell quality product on our website"),M.k0s(),M.j41(8,"p"),M.nrm(9,"img",2),M.EFF(10,"Mindeli's street 7B"),M.k0s(),M.j41(11,"p"),M.nrm(12,"img",3),M.EFF(13,"+995 555 542 034"),M.k0s()(),M.j41(14,"div")(15,"h3"),M.EFF(16,"Menu"),M.k0s(),M.j41(17,"p",4),M.EFF(18,"Login"),M.k0s(),M.j41(19,"p",5),M.EFF(20,"Products"),M.k0s(),M.j41(21,"p"),M.EFF(22,"About Us"),M.k0s(),M.j41(23,"p"),M.EFF(24,"Terms & Policy"),M.k0s(),M.j41(25,"p",6),M.bIt("click",function(){return ve.navigate("profile")}),M.EFF(26,"My Account"),M.k0s()(),M.j41(27,"div")(28,"h3"),M.EFF(29,"Stay Updated"),M.k0s(),M.j41(30,"div")(31,"input",7),M.mxI("ngModelChange",function(He){return M.DH7(ve.email,He)||(ve.email=He),He}),M.k0s(),M.j41(32,"img",8),M.bIt("click",function(){return ve.sendEmail()}),M.k0s()()()()()),2&$e&&(M.R7$(31),M.R50("ngModel",ve.email))},dependencies:[_.YN,_.me,_.BC,_.vS,V.iI,V.Wk],styles:[".container[_ngcontent-%COMP%]{width:90%;height:220px;margin:100px auto;display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;height:2px;background-color:#000}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;height:100%}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:7px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:4px;cursor:pointer}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-size:14px;color:#616161}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > p[_ngcontent-%COMP%]{width:190px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{border:none;border-radius:2px;width:200px;height:20px;background-color:#e9dbdb}"],changeDetection:0})}return Pe})()},2152:(Zt,qe,x)=>{x.d(qe,{l:()=>ve});var _=x(4454),V=x(177),M=x(3227),w=x(4438),se=x(6569);function Pe(_e,He){if(1&_e){const Tt=w.RV6();w.j41(0,"div",11)(1,"span",3),w.bIt("click",function(){w.eBV(Tt);const Be=w.XpG();return w.Njj(Be.navigateToCategotyPage("guitar"))}),w.EFF(2,"Guitar"),w.k0s(),w.j41(3,"span",3),w.bIt("click",function(){w.eBV(Tt);const Be=w.XpG();return w.Njj(Be.navigateToCategotyPage("drum"))}),w.EFF(4,"Drums"),w.k0s(),w.j41(5,"span",3),w.bIt("click",function(){w.eBV(Tt);const Be=w.XpG();return w.Njj(Be.navigateToCategotyPage("bass"))}),w.EFF(6,"Bass "),w.k0s(),w.j41(7,"span",3),w.bIt("click",function(){w.eBV(Tt);const Be=w.XpG();return w.Njj(Be.navigateToCategotyPage("piano"))}),w.EFF(8,"Piano"),w.k0s(),w.j41(9,"span",3),w.bIt("click",function(){w.eBV(Tt);const Be=w.XpG();return w.Njj(Be.navigateToCategotyPage("other"))}),w.EFF(10,"Other"),w.k0s()()}}function B(_e,He){if(1&_e){const Tt=w.RV6();w.j41(0,"span",3),w.bIt("click",function(){w.eBV(Tt);const Be=w.XpG();return w.Njj(Be.navigate("login"))}),w.EFF(1,"Log In"),w.k0s()}}function Le(_e,He){if(1&_e){const Tt=w.RV6();w.j41(0,"img",12),w.bIt("click",function(){w.eBV(Tt);const Be=w.XpG();return w.Njj(Be.logOut())}),w.k0s()}}function $e(_e,He){if(1&_e){const Tt=w.RV6();w.j41(0,"img",13),w.bIt("click",function(){w.eBV(Tt);const Be=w.XpG();return w.Njj(Be.navigateToProfile())}),w.k0s()}}let ve=(()=>{class _e{constructor(Tt,De,Be){this.router=Tt,this.loginService=De,this.cd=Be,this.dropDown=!1,this.cart=!1}ngOnInit(){this.loginService.loggedUser.subscribe(Tt=>{this.user=Tt,this.profilePicture=this.user?.user.photoUrl,this.cd.detectChanges()})}changeDropDown(){this.dropDown=!this.dropDown}navigateToProfile(){this.router.navigate([`profile/${this.user?.key}`])}navigateToCategotyPage(Tt){this.router.navigate([`categoty/${Tt}`])}openCloseCart(){this.cart=!this.cart}logOut(){this.loginService.logOut(),this.router.navigate(["/products"])}navigate(Tt){this.router.navigate([`/${Tt}`])}static#e=this.\u0275fac=function(De){return new(De||_e)(w.rXU(_.Ix),w.rXU(se.p),w.rXU(w.gRc))};static#t=this.\u0275cmp=w.VBU({type:_e,selectors:[["app-header"]],standalone:!0,features:[w.aNF],decls:19,vars:6,consts:[[1,"header-container"],["routerLink","/products"],[1,"dropdown-container"],[3,"click"],["class","dropdown",4,"ngIf"],["src","assets/down-arrow.png","alt","img",3,"click"],[3,"click",4,"ngIf"],[1,"cart",3,"userEmail","showCart"],["src","assets/logout.png","alt","img",3,"click",4,"ngIf"],["src","assets/shopping-cart.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click",4,"ngIf"],[1,"dropdown"],["src","assets/logout.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click"]],template:function(De,Be){1&De&&(w.j41(0,"div",0)(1,"div")(2,"span",1),w.EFF(3,"SABAMUSIC."),w.k0s(),w.j41(4,"div",2)(5,"span",3),w.bIt("click",function(){return Be.changeDropDown()}),w.EFF(6,"Products "),w.DNE(7,Pe,11,0,"div",4),w.k0s(),w.j41(8,"img",5),w.bIt("click",function(){return Be.changeDropDown()}),w.k0s()(),w.j41(9,"span",3),w.bIt("click",function(){return Be.navigate("contact")}),w.EFF(10,"Contact"),w.k0s(),w.j41(11,"span",3),w.bIt("click",function(){return Be.navigate("about-us")}),w.EFF(12,"About Us"),w.k0s(),w.DNE(13,B,2,0,"span",6),w.nrm(14,"app-cart",7),w.k0s(),w.j41(15,"div"),w.DNE(16,Le,1,0,"img",8),w.j41(17,"img",9),w.bIt("click",function(){return Be.openCloseCart()}),w.k0s(),w.DNE(18,$e,1,0,"img",10),w.k0s()()),2&De&&(w.R7$(7),w.Y8G("ngIf",Be.dropDown),w.R7$(6),w.Y8G("ngIf",!Be.user),w.R7$(),w.Y8G("userEmail",null==Be.user||null==Be.user.user?null:Be.user.user.email)("showCart",Be.cart),w.R7$(2),w.Y8G("ngIf",Be.user),w.R7$(2),w.Y8G("ngIf",Be.user))},dependencies:[V.MD,V.bT,_.iI,_.Wk,M.K],styles:[".header-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:160px;margin-bottom:40px;position:sticky;top:5px;z-index:2}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:60%;display:flex;justify-content:space-between;align-items:center}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child{display:flex;align-items:center;gap:10px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child > input[_ngcontent-%COMP%]{height:20px;border:none;background-color:#f3ecec;border-radius:3px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   .cart[_ngcontent-%COMP%]{position:absolute;top:80px;right:100px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:26px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:relative;font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%]{z-index:3;display:flex;flex-direction:column;position:absolute;top:30px;gap:5px;z-index:1}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:flex;gap:20px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   img[_ngcontent-%COMP%]{width:26px;height:26px;cursor:pointer}"],changeDetection:0})}return _e})()},513:(Zt,qe,x)=>{x.r(qe),x.d(qe,{LoginAndRegistrationModule:()=>Ky});var _=x(177),V=x(9417),M=x(1182),w=x(4438),se=x(1825),Pe=x(9253),B=x(3236),Le=x(1985),$e=x(8455),ve=x(7673),_e=x(9172),He=x(9974),Tt=x(4360);function De(){return(0,He.N)((a,t)=>{let r,o=!1;a.subscribe((0,Tt._)(t,u=>{const d=r;r=u,o&&t.next([d,u]),o=!0}))})}var Be=x(6354),At=x(2816),yt=x(3669);function bt(a,t){return a===t}var pn,bn,gt=x(5964),de=(x(2438),x(3345)),ae=x(467),Ve=x(7852),Ye=x(1362),et=x(8041),ce=x(1076),Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},We={};(function(){var a;function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(tt,be,Ge){Ge||(Ge=0);var rt=Array(16);if("string"==typeof be)for(var at=0;16>at;++at)rt[at]=be.charCodeAt(Ge++)|be.charCodeAt(Ge++)<<8|be.charCodeAt(Ge++)<<16|be.charCodeAt(Ge++)<<24;else for(at=0;16>at;++at)rt[at]=be[Ge++]|be[Ge++]<<8|be[Ge++]<<16|be[Ge++]<<24;var Et=tt.g[3],je=(be=tt.g[0])+(Et^(Ge=tt.g[1])&((at=tt.g[2])^Et))+rt[0]+3614090360&4294967295;je=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=(Ge=(at=(Et=(be=Ge+(je<<7&4294967295|je>>>25))+((je=Et+(at^be&(Ge^at))+rt[1]+3905402710&4294967295)<<12&4294967295|je>>>20))+((je=at+(Ge^Et&(be^Ge))+rt[2]+606105819&4294967295)<<17&4294967295|je>>>15))+((je=Ge+(be^at&(Et^be))+rt[3]+3250441966&4294967295)<<22&4294967295|je>>>10))+((je=be+(Et^Ge&(at^Et))+rt[4]+4118548399&4294967295)<<7&4294967295|je>>>25))+((je=Et+(at^be&(Ge^at))+rt[5]+1200080426&4294967295)<<12&4294967295|je>>>20))+((je=at+(Ge^Et&(be^Ge))+rt[6]+2821735955&4294967295)<<17&4294967295|je>>>15))+((je=Ge+(be^at&(Et^be))+rt[7]+4249261313&4294967295)<<22&4294967295|je>>>10))+((je=be+(Et^Ge&(at^Et))+rt[8]+1770035416&4294967295)<<7&4294967295|je>>>25))+((je=Et+(at^be&(Ge^at))+rt[9]+2336552879&4294967295)<<12&4294967295|je>>>20))+((je=at+(Ge^Et&(be^Ge))+rt[10]+4294925233&4294967295)<<17&4294967295|je>>>15))+((je=Ge+(be^at&(Et^be))+rt[11]+2304563134&4294967295)<<22&4294967295|je>>>10))+((je=be+(Et^Ge&(at^Et))+rt[12]+1804603682&4294967295)<<7&4294967295|je>>>25))+((je=Et+(at^be&(Ge^at))+rt[13]+4254626195&4294967295)<<12&4294967295|je>>>20))+((je=at+(Ge^Et&(be^Ge))+rt[14]+2792965006&4294967295)<<17&4294967295|je>>>15))+((je=Ge+(be^at&(Et^be))+rt[15]+1236535329&4294967295)<<22&4294967295|je>>>10))+((je=be+(at^Et&(Ge^at))+rt[1]+4129170786&4294967295)<<5&4294967295|je>>>27))+((je=Et+(Ge^at&(be^Ge))+rt[6]+3225465664&4294967295)<<9&4294967295|je>>>23))+((je=at+(be^Ge&(Et^be))+rt[11]+643717713&4294967295)<<14&4294967295|je>>>18))+((je=Ge+(Et^be&(at^Et))+rt[0]+3921069994&4294967295)<<20&4294967295|je>>>12))+((je=be+(at^Et&(Ge^at))+rt[5]+3593408605&4294967295)<<5&4294967295|je>>>27))+((je=Et+(Ge^at&(be^Ge))+rt[10]+38016083&4294967295)<<9&4294967295|je>>>23))+((je=at+(be^Ge&(Et^be))+rt[15]+3634488961&4294967295)<<14&4294967295|je>>>18))+((je=Ge+(Et^be&(at^Et))+rt[4]+3889429448&4294967295)<<20&4294967295|je>>>12))+((je=be+(at^Et&(Ge^at))+rt[9]+568446438&4294967295)<<5&4294967295|je>>>27))+((je=Et+(Ge^at&(be^Ge))+rt[14]+3275163606&4294967295)<<9&4294967295|je>>>23))+((je=at+(be^Ge&(Et^be))+rt[3]+4107603335&4294967295)<<14&4294967295|je>>>18))+((je=Ge+(Et^be&(at^Et))+rt[8]+1163531501&4294967295)<<20&4294967295|je>>>12))+((je=be+(at^Et&(Ge^at))+rt[13]+2850285829&4294967295)<<5&4294967295|je>>>27))+((je=Et+(Ge^at&(be^Ge))+rt[2]+4243563512&4294967295)<<9&4294967295|je>>>23))+((je=at+(be^Ge&(Et^be))+rt[7]+1735328473&4294967295)<<14&4294967295|je>>>18))+((je=Ge+(Et^be&(at^Et))+rt[12]+2368359562&4294967295)<<20&4294967295|je>>>12))+((je=be+(Ge^at^Et)+rt[5]+4294588738&4294967295)<<4&4294967295|je>>>28))+((je=Et+(be^Ge^at)+rt[8]+2272392833&4294967295)<<11&4294967295|je>>>21))+((je=at+(Et^be^Ge)+rt[11]+1839030562&4294967295)<<16&4294967295|je>>>16))+((je=Ge+(at^Et^be)+rt[14]+4259657740&4294967295)<<23&4294967295|je>>>9))+((je=be+(Ge^at^Et)+rt[1]+2763975236&4294967295)<<4&4294967295|je>>>28))+((je=Et+(be^Ge^at)+rt[4]+1272893353&4294967295)<<11&4294967295|je>>>21))+((je=at+(Et^be^Ge)+rt[7]+4139469664&4294967295)<<16&4294967295|je>>>16))+((je=Ge+(at^Et^be)+rt[10]+3200236656&4294967295)<<23&4294967295|je>>>9))+((je=be+(Ge^at^Et)+rt[13]+681279174&4294967295)<<4&4294967295|je>>>28))+((je=Et+(be^Ge^at)+rt[0]+3936430074&4294967295)<<11&4294967295|je>>>21))+((je=at+(Et^be^Ge)+rt[3]+3572445317&4294967295)<<16&4294967295|je>>>16))+((je=Ge+(at^Et^be)+rt[6]+76029189&4294967295)<<23&4294967295|je>>>9))+((je=be+(Ge^at^Et)+rt[9]+3654602809&4294967295)<<4&4294967295|je>>>28))+((je=Et+(be^Ge^at)+rt[12]+3873151461&4294967295)<<11&4294967295|je>>>21))+((je=at+(Et^be^Ge)+rt[15]+530742520&4294967295)<<16&4294967295|je>>>16))+((je=Ge+(at^Et^be)+rt[2]+3299628645&4294967295)<<23&4294967295|je>>>9))+((je=be+(at^(Ge|~Et))+rt[0]+4096336452&4294967295)<<6&4294967295|je>>>26))+((je=Et+(Ge^(be|~at))+rt[7]+1126891415&4294967295)<<10&4294967295|je>>>22))+((je=at+(be^(Et|~Ge))+rt[14]+2878612391&4294967295)<<15&4294967295|je>>>17))+((je=Ge+(Et^(at|~be))+rt[5]+4237533241&4294967295)<<21&4294967295|je>>>11))+((je=be+(at^(Ge|~Et))+rt[12]+1700485571&4294967295)<<6&4294967295|je>>>26))+((je=Et+(Ge^(be|~at))+rt[3]+2399980690&4294967295)<<10&4294967295|je>>>22))+((je=at+(be^(Et|~Ge))+rt[10]+4293915773&4294967295)<<15&4294967295|je>>>17))+((je=Ge+(Et^(at|~be))+rt[1]+2240044497&4294967295)<<21&4294967295|je>>>11))+((je=be+(at^(Ge|~Et))+rt[8]+1873313359&4294967295)<<6&4294967295|je>>>26))+((je=Et+(Ge^(be|~at))+rt[15]+4264355552&4294967295)<<10&4294967295|je>>>22))+((je=at+(be^(Et|~Ge))+rt[6]+2734768916&4294967295)<<15&4294967295|je>>>17))+((je=Ge+(Et^(at|~be))+rt[13]+1309151649&4294967295)<<21&4294967295|je>>>11))+((Et=(be=Ge+((je=be+(at^(Ge|~Et))+rt[4]+4149444226&4294967295)<<6&4294967295|je>>>26))+((je=Et+(Ge^(be|~at))+rt[11]+3174756917&4294967295)<<10&4294967295|je>>>22))^((at=Et+((je=at+(be^(Et|~Ge))+rt[2]+718787259&4294967295)<<15&4294967295|je>>>17))|~be))+rt[9]+3951481745&4294967295,tt.g[0]=tt.g[0]+be&4294967295,tt.g[1]=tt.g[1]+(at+(je<<21&4294967295|je>>>11))&4294967295,tt.g[2]=tt.g[2]+at&4294967295,tt.g[3]=tt.g[3]+Et&4294967295}function m(tt,be){this.h=be;for(var Ge=[],rt=!0,at=tt.length-1;0<=at;at--){var Et=0|tt[at];rt&&Et==be||(Ge[at]=Et,rt=!1)}this.g=Ge}(function t(tt,be){function Ge(){}Ge.prototype=be.prototype,tt.D=be.prototype,tt.prototype=new Ge,tt.prototype.constructor=tt,tt.C=function(rt,at,Et){for(var je=Array(arguments.length-2),Bc=2;Bc<arguments.length;Bc++)je[Bc-2]=arguments[Bc];return be.prototype[at].apply(rt,je)}})(o,function r(){this.blockSize=-1}),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},o.prototype.u=function(tt,be){void 0===be&&(be=tt.length);for(var Ge=be-this.blockSize,rt=this.B,at=this.h,Et=0;Et<be;){if(0==at)for(;Et<=Ge;)u(this,tt,Et),Et+=this.blockSize;if("string"==typeof tt){for(;Et<be;)if(rt[at++]=tt.charCodeAt(Et++),at==this.blockSize){u(this,rt),at=0;break}}else for(;Et<be;)if(rt[at++]=tt[Et++],at==this.blockSize){u(this,rt),at=0;break}}this.h=at,this.o+=be},o.prototype.v=function(){var tt=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);tt[0]=128;for(var be=1;be<tt.length-8;++be)tt[be]=0;var Ge=8*this.o;for(be=tt.length-8;be<tt.length;++be)tt[be]=255&Ge,Ge/=256;for(this.u(tt),tt=Array(16),be=Ge=0;4>be;++be)for(var rt=0;32>rt;rt+=8)tt[Ge++]=this.g[be]>>>rt&255;return tt};var b={};function N(tt){return-128<=tt&&128>tt?function d(tt,be){var Ge=b;return Object.prototype.hasOwnProperty.call(Ge,tt)?Ge[tt]:Ge[tt]=be(tt)}(tt,function(be){return new m([0|be],0>be?-1:0)}):new m([0|tt],0>tt?-1:0)}function H(tt){if(isNaN(tt)||!isFinite(tt))return pe;if(0>tt)return Wt(H(-tt));for(var be=[],Ge=1,rt=0;tt>=Ge;rt++)be[rt]=tt/Ge|0,Ge*=4294967296;return new m(be,0)}var pe=N(0),Re=N(1),ot=N(16777216);function Bt(tt){if(0!=tt.h)return!1;for(var be=0;be<tt.g.length;be++)if(0!=tt.g[be])return!1;return!0}function Yt(tt){return-1==tt.h}function Wt(tt){for(var be=tt.g.length,Ge=[],rt=0;rt<be;rt++)Ge[rt]=~tt.g[rt];return new m(Ge,~tt.h).add(Re)}function Bn(tt,be){return tt.add(Wt(be))}function Zn(tt,be){for(;(65535&tt[be])!=tt[be];)tt[be+1]+=tt[be]>>>16,tt[be]&=65535,be++}function kn(tt,be){this.g=tt,this.h=be}function ur(tt,be){if(Bt(be))throw Error("division by zero");if(Bt(tt))return new kn(pe,pe);if(Yt(tt))return be=ur(Wt(tt),be),new kn(Wt(be.g),Wt(be.h));if(Yt(be))return be=ur(tt,Wt(be)),new kn(Wt(be.g),be.h);if(30<tt.g.length){if(Yt(tt)||Yt(be))throw Error("slowDivide_ only works with positive integers.");for(var Ge=Re,rt=be;0>=rt.l(tt);)Ge=Hr(Ge),rt=Hr(rt);var at=Ar(Ge,1),Et=Ar(rt,1);for(rt=Ar(rt,2),Ge=Ar(Ge,2);!Bt(rt);){var je=Et.add(rt);0>=je.l(tt)&&(at=at.add(Ge),Et=je),rt=Ar(rt,1),Ge=Ar(Ge,1)}return be=Bn(tt,at.j(be)),new kn(at,be)}for(at=pe;0<=tt.l(be);){for(Ge=Math.max(1,Math.floor(tt.m()/be.m())),rt=48>=(rt=Math.ceil(Math.log(Ge)/Math.LN2))?1:Math.pow(2,rt-48),je=(Et=H(Ge)).j(be);Yt(je)||0<je.l(tt);)je=(Et=H(Ge-=rt)).j(be);Bt(Et)&&(Et=Re),at=at.add(Et),tt=Bn(tt,je)}return new kn(at,tt)}function Hr(tt){for(var be=tt.g.length+1,Ge=[],rt=0;rt<be;rt++)Ge[rt]=tt.i(rt)<<1|tt.i(rt-1)>>>31;return new m(Ge,tt.h)}function Ar(tt,be){var Ge=be>>5;be%=32;for(var rt=tt.g.length-Ge,at=[],Et=0;Et<rt;Et++)at[Et]=0<be?tt.i(Et+Ge)>>>be|tt.i(Et+Ge+1)<<32-be:tt.i(Et+Ge);return new m(at,tt.h)}(a=m.prototype).m=function(){if(Yt(this))return-Wt(this).m();for(var tt=0,be=1,Ge=0;Ge<this.g.length;Ge++){var rt=this.i(Ge);tt+=(0<=rt?rt:4294967296+rt)*be,be*=4294967296}return tt},a.toString=function(tt){if(2>(tt=tt||10)||36<tt)throw Error("radix out of range: "+tt);if(Bt(this))return"0";if(Yt(this))return"-"+Wt(this).toString(tt);for(var be=H(Math.pow(tt,6)),Ge=this,rt="";;){var at=ur(Ge,be).g,Et=((0<(Ge=Bn(Ge,at.j(be))).g.length?Ge.g[0]:Ge.h)>>>0).toString(tt);if(Bt(Ge=at))return Et+rt;for(;6>Et.length;)Et="0"+Et;rt=Et+rt}},a.i=function(tt){return 0>tt?0:tt<this.g.length?this.g[tt]:this.h},a.l=function(tt){return Yt(tt=Bn(this,tt))?-1:Bt(tt)?0:1},a.abs=function(){return Yt(this)?Wt(this):this},a.add=function(tt){for(var be=Math.max(this.g.length,tt.g.length),Ge=[],rt=0,at=0;at<=be;at++){var Et=rt+(65535&this.i(at))+(65535&tt.i(at)),je=(Et>>>16)+(this.i(at)>>>16)+(tt.i(at)>>>16);rt=je>>>16,Ge[at]=(je&=65535)<<16|(Et&=65535)}return new m(Ge,-2147483648&Ge[Ge.length-1]?-1:0)},a.j=function(tt){if(Bt(this)||Bt(tt))return pe;if(Yt(this))return Yt(tt)?Wt(this).j(Wt(tt)):Wt(Wt(this).j(tt));if(Yt(tt))return Wt(this.j(Wt(tt)));if(0>this.l(ot)&&0>tt.l(ot))return H(this.m()*tt.m());for(var be=this.g.length+tt.g.length,Ge=[],rt=0;rt<2*be;rt++)Ge[rt]=0;for(rt=0;rt<this.g.length;rt++)for(var at=0;at<tt.g.length;at++){var Et=this.i(rt)>>>16,je=65535&this.i(rt),Bc=tt.i(at)>>>16,sd=65535&tt.i(at);Ge[2*rt+2*at]+=je*sd,Zn(Ge,2*rt+2*at),Ge[2*rt+2*at+1]+=Et*sd,Zn(Ge,2*rt+2*at+1),Ge[2*rt+2*at+1]+=je*Bc,Zn(Ge,2*rt+2*at+1),Ge[2*rt+2*at+2]+=Et*Bc,Zn(Ge,2*rt+2*at+2)}for(rt=0;rt<be;rt++)Ge[rt]=Ge[2*rt+1]<<16|Ge[2*rt];for(rt=be;rt<2*be;rt++)Ge[rt]=0;return new m(Ge,0)},a.A=function(tt){return ur(this,tt).h},a.and=function(tt){for(var be=Math.max(this.g.length,tt.g.length),Ge=[],rt=0;rt<be;rt++)Ge[rt]=this.i(rt)&tt.i(rt);return new m(Ge,this.h&tt.h)},a.or=function(tt){for(var be=Math.max(this.g.length,tt.g.length),Ge=[],rt=0;rt<be;rt++)Ge[rt]=this.i(rt)|tt.i(rt);return new m(Ge,this.h|tt.h)},a.xor=function(tt){for(var be=Math.max(this.g.length,tt.g.length),Ge=[],rt=0;rt<be;rt++)Ge[rt]=this.i(rt)^tt.i(rt);return new m(Ge,this.h^tt.h)},o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,bn=We.Md5=o,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.A,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=H,m.fromString=function re(tt,be){if(0==tt.length)throw Error("number format error: empty string");if(2>(be=be||10)||36<be)throw Error("radix out of range: "+be);if("-"==tt.charAt(0))return Wt(re(tt.substring(1),be));if(0<=tt.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ge=H(Math.pow(be,8)),rt=pe,at=0;at<tt.length;at+=8){var Et=Math.min(8,tt.length-at),je=parseInt(tt.substring(at,at+Et),be);8>Et?(Et=H(Math.pow(be,Et)),rt=rt.j(Et).add(H(je))):rt=(rt=rt.j(Ge)).add(H(je))}return rt},pn=We.Integer=m}).apply(typeof Ne<"u"?Ne:typeof self<"u"?self:typeof window<"u"?window:{});var fn,An,ke,Qe,ct,_t,vt,Ze,Gt,Fn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xn={};(function(){var a,t="function"==typeof Object.defineProperties?Object.defineProperty:function(g,k,z){return g==Array.prototype||g==Object.prototype||(g[k]=z.value),g},o=function r(g){g=["object"==typeof globalThis&&globalThis,g,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Fn&&Fn];for(var k=0;k<g.length;++k){var z=g[k];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}(this);!function u(g,k){if(k)e:{var z=o;g=g.split(".");for(var he=0;he<g.length-1;he++){var ht=g[he];if(!(ht in z))break e;z=z[ht]}(k=k(he=z[g=g[g.length-1]]))!=he&&null!=k&&t(z,g,{configurable:!0,writable:!0,value:k})}}("Array.prototype.values",function(g){return g||function(){return function d(g,k){g instanceof String&&(g+="");var z=0,he=!1,ht={next:function(){if(!he&&z<g.length){var Rt=z++;return{value:k(Rt,g[Rt]),done:!1}}return he=!0,{done:!0,value:void 0}}};return ht[Symbol.iterator]=function(){return ht},ht}(this,function(k,z){return z})}});var m=m||{},b=this||self;function N(g){var k=typeof g;return"array"==(k="object"!=k?k:g?Array.isArray(g)?"array":k:"null")||"object"==k&&"number"==typeof g.length}function H(g){var k=typeof g;return"object"==k&&null!=g||"function"==k}function re(g,k,z){return g.call.apply(g.bind,arguments)}function pe(g,k,z){if(!g)throw Error();if(2<arguments.length){var he=Array.prototype.slice.call(arguments,2);return function(){var ht=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ht,he),g.apply(k,ht)}}return function(){return g.apply(k,arguments)}}function Re(g,k,z){return(Re=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?re:pe).apply(null,arguments)}function ot(g,k){var z=Array.prototype.slice.call(arguments,1);return function(){var he=z.slice();return he.push.apply(he,arguments),g.apply(this,he)}}function Bt(g,k){function z(){}z.prototype=k.prototype,g.aa=k.prototype,g.prototype=new z,g.prototype.constructor=g,g.Qb=function(he,ht,Rt){for(var hn=Array(arguments.length-2),Ni=2;Ni<arguments.length;Ni++)hn[Ni-2]=arguments[Ni];return k.prototype[ht].apply(he,hn)}}function Yt(g){const k=g.length;if(0<k){const z=Array(k);for(let he=0;he<k;he++)z[he]=g[he];return z}return[]}function Wt(g,k){for(let z=1;z<arguments.length;z++){const he=arguments[z];if(N(he)){const ht=g.length||0,Rt=he.length||0;g.length=ht+Rt;for(let hn=0;hn<Rt;hn++)g[ht+hn]=he[hn]}else g.push(he)}}function Zn(g){return/^[\s\xa0]*$/.test(g)}function kn(){var g=b.navigator;return g&&(g=g.userAgent)?g:""}function ur(g){return ur[" "](g),g}ur[" "]=function(){};var Hr=!(-1==kn().indexOf("Gecko")||-1!=kn().toLowerCase().indexOf("webkit")&&-1==kn().indexOf("Edge")||-1!=kn().indexOf("Trident")||-1!=kn().indexOf("MSIE")||-1!=kn().indexOf("Edge"));function Ar(g,k,z){for(const he in g)k.call(z,g[he],he,g)}function be(g){const k={};for(const z in g)k[z]=g[z];return k}const Ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rt(g,k){let z,he;for(let ht=1;ht<arguments.length;ht++){for(z in he=arguments[ht],he)g[z]=he[z];for(let Rt=0;Rt<Ge.length;Rt++)z=Ge[Rt],Object.prototype.hasOwnProperty.call(he,z)&&(g[z]=he[z])}}function at(g){var k=1;g=g.split(":");const z=[];for(;0<k&&g.length;)z.push(g.shift()),k--;return g.length&&z.push(g.join(":")),z}function Et(g){b.setTimeout(()=>{throw g},0)}function je(){var g=Am;let k=null;return g.g&&(k=g.g,g.g=g.g.next,g.g||(g.h=null),k.next=null),k}var sd=new class Bn{constructor(k,z){this.i=k,this.j=z,this.h=0,this.g=null}get(){let k;return 0<this.h?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}(()=>new vI,g=>g.reset());class vI{constructor(){this.next=this.g=this.h=null}set(k,z){this.h=k,this.g=z,this.next=null}reset(){this.next=this.g=this.h=null}}let od,tp=!1,Am=new class Bc{constructor(){this.h=this.g=null}add(k,z){const he=sd.get();he.set(k,z),this.h?this.h.next=he:this.g=he,this.h=he}},Ah=()=>{const g=b.Promise.resolve(void 0);od=()=>{g.then(qy)}};var qy=()=>{for(var g;g=je();){try{g.h.call(g.g)}catch(z){Et(z)}var k=sd;k.j(g),100>k.h&&(k.h++,g.next=k.g,k.g=g)}tp=!1};function _u(){this.s=this.s,this.C=this.C}function Ro(g,k){this.type=g,this.g=this.target=k,this.defaultPrevented=!1}_u.prototype.s=!1,_u.prototype.ma=function(){this.s||(this.s=!0,this.N())},_u.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Ro.prototype.h=function(){this.defaultPrevented=!0};var EI=function(){if(!b.addEventListener||!Object.defineProperty)return!1;var g=!1,k=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const z=()=>{};b.addEventListener("test",z,k),b.removeEventListener("test",z,k)}catch{}return g}();function dl(g,k){if(Ro.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var z=this.type=g.type,he=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=k,k=g.relatedTarget){if(Hr){e:{try{ur(k.nodeName);var ht=!0;break e}catch{}ht=!1}ht||(k=null)}}else"mouseover"==z?k=g.fromElement:"mouseout"==z&&(k=g.toElement);this.relatedTarget=k,he?(this.clientX=void 0!==he.clientX?he.clientX:he.pageX,this.clientY=void 0!==he.clientY?he.clientY:he.pageY,this.screenX=he.screenX||0,this.screenY=he.screenY||0):(this.clientX=void 0!==g.clientX?g.clientX:g.pageX,this.clientY=void 0!==g.clientY?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType="string"==typeof g.pointerType?g.pointerType:p0[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&dl.aa.h.call(this)}}Bt(dl,Ro);var p0={2:"touch",3:"pen",4:"mouse"};dl.prototype.h=function(){dl.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ad="closure_listenable_"+(1e6*Math.random()|0),Ic=0;function Qy(g,k,z,he,ht){this.listener=g,this.proxy=null,this.src=k,this.type=z,this.capture=!!he,this.ha=ht,this.key=++Ic,this.da=this.fa=!1}function np(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function bm(g){this.src=g,this.g={},this.h=0}function Cs(g,k){var z=k.type;if(z in g.g){var Rt,he=g.g[z],ht=Array.prototype.indexOf.call(he,k,void 0);(Rt=0<=ht)&&Array.prototype.splice.call(he,ht,1),Rt&&(np(k),0==g.g[z].length&&(delete g.g[z],g.h--))}}function Sm(g,k,z,he){for(var ht=0;ht<g.length;++ht){var Rt=g[ht];if(!Rt.da&&Rt.listener==k&&Rt.capture==!!z&&Rt.ha==he)return ht}return-1}bm.prototype.add=function(g,k,z,he,ht){var Rt=g.toString();(g=this.g[Rt])||(g=this.g[Rt]=[],this.h++);var hn=Sm(g,k,he,ht);return-1<hn?(k=g[hn],z||(k.fa=!1)):((k=new Qy(k,this.src,Rt,!!he,ht)).fa=z,g.push(k)),k};var bh="closure_lm_"+(1e6*Math.random()|0),Pm={};function Xy(g,k,z,he,ht){if(he&&he.once)return Mm(g,k,z,he,ht);if(Array.isArray(k)){for(var Rt=0;Rt<k.length;Rt++)Xy(g,k[Rt],z,he,ht);return null}return z=Nm(z),g&&g[ad]?g.K(k,z,H(he)?!!he.capture:!!he,ht):rp(g,k,z,!1,he,ht)}function rp(g,k,z,he,ht,Rt){if(!k)throw Error("Invalid event type");var hn=H(ht)?!!ht.capture:!!ht,Ni=ip(g);if(Ni||(g[bh]=Ni=new bm(g)),(z=Ni.add(k,z,he,hn,Rt)).proxy)return z;if(he=function Yy(){const k=hl;return function g(z){return k.call(g.src,g.listener,z)}}(),z.proxy=he,he.src=g,he.listener=z,g.addEventListener)EI||(ht=hn),void 0===ht&&(ht=!1),g.addEventListener(k.toString(),he,ht);else if(g.attachEvent)g.attachEvent(Jy(k.toString()),he);else{if(!g.addListener||!g.removeListener)throw Error("addEventListener and attachEvent are unavailable.");g.addListener(he)}return z}function Mm(g,k,z,he,ht){if(Array.isArray(k)){for(var Rt=0;Rt<k.length;Rt++)Mm(g,k[Rt],z,he,ht);return null}return z=Nm(z),g&&g[ad]?g.L(k,z,H(he)?!!he.capture:!!he,ht):rp(g,k,z,!0,he,ht)}function Rm(g,k,z,he,ht){if(Array.isArray(k))for(var Rt=0;Rt<k.length;Rt++)Rm(g,k[Rt],z,he,ht);else he=H(he)?!!he.capture:!!he,z=Nm(z),g&&g[ad]?(g=g.i,(k=String(k).toString())in g.g&&-1<(z=Sm(Rt=g.g[k],z,he,ht))&&(np(Rt[z]),Array.prototype.splice.call(Rt,z,1),0==Rt.length&&(delete g.g[k],g.h--))):g&&(g=ip(g))&&(k=g.g[k.toString()],g=-1,k&&(g=Sm(k,z,he,ht)),(z=-1<g?k[g]:null)&&Om(z))}function Om(g){if("number"!=typeof g&&g&&!g.da){var k=g.src;if(k&&k[ad])Cs(k.i,g);else{var z=g.type,he=g.proxy;k.removeEventListener?k.removeEventListener(z,he,g.capture):k.detachEvent?k.detachEvent(Jy(z),he):k.addListener&&k.removeListener&&k.removeListener(he),(z=ip(k))?(Cs(z,g),0==z.h&&(z.src=null,k[bh]=null)):np(g)}}}function Jy(g){return g in Pm?Pm[g]:Pm[g]="on"+g}function hl(g,k){if(g.da)g=!0;else{k=new dl(k,this);var z=g.listener,he=g.ha||g.src;g.fa&&Om(g),g=z.call(he,k)}return g}function ip(g){return(g=g[bh])instanceof bm?g:null}var Sh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nm(g){return"function"==typeof g?g:(g[Sh]||(g[Sh]=function(k){return g.handleEvent(k)}),g[Sh])}function yo(){_u.call(this),this.i=new bm(this),this.M=this,this.F=null}function Oo(g,k){var z,he=g.F;if(he)for(z=[];he;he=he.F)z.push(he);if(g=g.M,he=k.type||k,"string"==typeof k)k=new Ro(k,g);else if(k instanceof Ro)k.target=k.target||g;else{var ht=k;rt(k=new Ro(he,g),ht)}if(ht=!0,z)for(var Rt=z.length-1;0<=Rt;Rt--){var hn=k.g=z[Rt];ht=Ph(hn,he,!0,k)&&ht}if(ht=Ph(hn=k.g=g,he,!0,k)&&ht,ht=Ph(hn,he,!1,k)&&ht,z)for(Rt=0;Rt<z.length;Rt++)ht=Ph(hn=k.g=z[Rt],he,!1,k)&&ht}function Ph(g,k,z,he){if(!(k=g.i.g[String(k)]))return!0;k=k.concat();for(var ht=!0,Rt=0;Rt<k.length;++Rt){var hn=k[Rt];if(hn&&!hn.da&&hn.capture==z){var Ni=hn.listener,No=hn.ha||hn.src;hn.fa&&Cs(g.i,hn),ht=!1!==Ni.call(No,he)&&ht}}return ht&&!he.defaultPrevented}function cd(g,k,z){if("function"==typeof g)z&&(g=Re(g,z));else{if(!g||"function"!=typeof g.handleEvent)throw Error("Invalid listener argument");g=Re(g.handleEvent,g)}return 2147483647<Number(k)?-1:b.setTimeout(g,k||0)}function sp(g){g.g=cd(()=>{g.g=null,g.i&&(g.i=!1,sp(g))},g.l);const k=g.h;g.h=null,g.m.apply(null,k)}Bt(yo,_u),yo.prototype[ad]=!0,yo.prototype.removeEventListener=function(g,k,z,he){Rm(this,g,k,z,he)},yo.prototype.N=function(){if(yo.aa.N.call(this),this.i){var k,g=this.i;for(k in g.g){for(var z=g.g[k],he=0;he<z.length;he++)np(z[he]);delete g.g[k],g.h--}}this.F=null},yo.prototype.K=function(g,k,z,he){return this.i.add(String(g),k,!1,z,he)},yo.prototype.L=function(g,k,z,he){return this.i.add(String(g),k,!0,z,he)};class yu extends _u{constructor(k,z){super(),this.m=k,this.l=z,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:sp(this)}N(){super.N(),this.g&&(b.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vu(g){_u.call(this),this.h=g,this.g={}}Bt(vu,_u);var xm=[];function ud(g){Ar(g.g,function(k,z){this.g.hasOwnProperty(z)&&Om(k)},g),g.g={}}vu.prototype.N=function(){vu.aa.N.call(this),ud(this)},vu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var km=b.JSON.stringify,II=b.JSON.parse,Fm=class{stringify(g){return b.JSON.stringify(g,void 0)}parse(g){return b.JSON.parse(g,void 0)}};function op(){}function ld(){}op.prototype.h=null;var ap={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dd(){Ro.call(this,"d")}function cp(){Ro.call(this,"c")}Bt(dd,Ro),Bt(cp,Ro);var Eu={},Zy=null;function fl(){return Zy=Zy||new yo}function hd(g){Ro.call(this,Eu.La,g)}function Mh(g){const k=fl();Oo(k,new hd(k))}function ev(g,k){Ro.call(this,Eu.STAT_EVENT,g),this.stat=k}function Wo(g){const k=fl();Oo(k,new ev(k,g))}function tv(g,k){Ro.call(this,Eu.Ma,g),this.size=k}function Rh(g,k){if("function"!=typeof g)throw Error("Fn must not be null and must be a function");return b.setTimeout(function(){g()},k)}function Oh(){this.g=!0}function $c(g,k,z,he){g.info(function(){return"XMLHTTP TEXT ("+k+"): "+function DI(g,k){if(!g.g)return k;if(!k)return null;try{var z=JSON.parse(k);if(z)for(g=0;g<z.length;g++)if(Array.isArray(z[g])){var he=z[g];if(!(2>he.length)){var ht=he[1];if(Array.isArray(ht)&&!(1>ht.length)){var Rt=ht[0];if("noop"!=Rt&&"stop"!=Rt&&"close"!=Rt)for(var hn=1;hn<ht.length;hn++)ht[hn]=""}}}return km(z)}catch{return k}}(g,z)+(he?" "+he:"")})}Eu.La="serverreachability",Bt(hd,Ro),Eu.STAT_EVENT="statevent",Bt(ev,Ro),Eu.Ma="timingevent",Bt(tv,Ro),Oh.prototype.xa=function(){this.g=!1},Oh.prototype.info=function(){};var xh,Nh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function kh(){}function Iu(g,k,z,he){this.j=g,this.i=k,this.l=z,this.R=he||1,this.U=new vu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lm}function Lm(){this.i=null,this.g="",this.h=!1}Bt(kh,op),kh.prototype.g=function(){return new XMLHttpRequest},kh.prototype.i=function(){return{}},xh=new kh;var up={},lp={};function dp(g,k,z){g.L=1,g.v=Lh(Cc(k)),g.m=z,g.P=!0,nv(g,null)}function nv(g,k){g.F=Date.now(),fd(g),g.A=Cc(g.v);var z=g.A,he=g.R;Array.isArray(he)||(he=[String(he)]),OI(z.i,"t",he),g.C=0,z=g.j.J,g.h=new Lm,g.g=wv(g.j,z?k:null,!g.m),0<g.O&&(g.M=new yu(Re(g.Y,g,g.g),g.O)),k=g.U,z=g.g,he=g.ca;var ht="readystatechange";Array.isArray(ht)||(ht&&(xm[0]=ht.toString()),ht=xm);for(var Rt=0;Rt<ht.length;Rt++){var hn=Xy(z,ht[Rt],he||k.handleEvent,!1,k.h||k);if(!hn)break;k.g[hn.key]=hn}k=g.H?be(g.H):{},g.m?(g.u||(g.u="POST"),k["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,k)):(g.u="GET",g.g.ea(g.A,g.u,null,k)),Mh(),function CI(g,k,z,he,ht,Rt){g.info(function(){if(g.g)if(Rt)for(var hn="",Ni=Rt.split("&"),No=0;No<Ni.length;No++){var Ti=Ni[No].split("=");if(1<Ti.length){var xo=Ti[0];Ti=Ti[1];var Ko=xo.split("_");hn=2<=Ko.length&&"type"==Ko[1]?hn+(xo+"=")+Ti+"&":hn+(xo+"=redacted&")}}else hn=null;else hn=Rt;return"XMLHTTP REQ ("+he+") [attempt "+ht+"]: "+k+"\n"+z+"\n"+hn})}(g.i,g.u,g.A,g.l,g.R,g.m)}function rv(g){return!!g.g&&"GET"==g.u&&2!=g.L&&g.j.Ca}function AI(g,k){var z=g.C,he=k.indexOf("\n",z);return-1==he?lp:(z=Number(k.substring(z,he)),isNaN(z)?up:(he+=1)+z>k.length?lp:(k=k.slice(he,he+z),g.C=he+z,k))}function fd(g){g.S=Date.now()+g.I,hp(g,g.I)}function hp(g,k){if(null!=g.B)throw Error("WatchDog timer not null");g.B=Rh(Re(g.ba,g),k)}function fp(g){g.B&&(b.clearTimeout(g.B),g.B=null)}function pl(g){0==g.j.G||g.J||Iv(g.j,g)}function Hc(g){fp(g);var k=g.M;k&&"function"==typeof k.ma&&k.ma(),g.M=null,ud(g.U),g.g&&(k=g.g,g.g=null,k.abort(),k.ma())}function Um(g,k){try{var z=g.j;if(0!=z.G&&(z.g==g||Fh(z.h,g)))if(!g.K&&Fh(z.h,g)&&3==z.G){try{var he=z.Da.g.parse(k)}catch{he=null}if(Array.isArray(he)&&3==he.length){var ht=he;if(0==ht[0]){e:if(!z.u){if(z.g){if(!(z.g.F+3e3<g.F))break e;Ip(z),$h(z)}Ym(z),Wo(18)}}else z.za=ht[1],0<z.za-z.T&&37500>ht[2]&&z.F&&0==z.v&&!z.C&&(z.C=Rh(Re(z.Za,z),6e3));if(1>=Bm(z.h)&&z.ca){try{z.ca()}catch{}z.ca=void 0}}else yl(z,11)}else if((g.K||z.g==g)&&Ip(z),!Zn(k))for(ht=z.Da.g.parse(k),k=0;k<ht.length;k++){let Ti=ht[k];if(z.T=Ti[0],Ti=Ti[1],2==z.G)if("c"==Ti[0]){z.K=Ti[1],z.ia=Ti[2];const xo=Ti[3];null!=xo&&(z.la=xo,z.j.info("VER="+z.la));const Ko=Ti[4];null!=Ko&&(z.Aa=Ko,z.j.info("SVER="+z.Aa));const Xa=Ti[5];null!=Xa&&"number"==typeof Xa&&0<Xa&&(z.L=he=1.5*Xa,z.j.info("backChannelRequestTimeoutMs_="+he)),he=z;const wc=g.g;if(wc){const vl=wc.g?wc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vl){var Rt=he.h;Rt.g||-1==vl.indexOf("spdy")&&-1==vl.indexOf("quic")&&-1==vl.indexOf("h2")||(Rt.j=Rt.l,Rt.g=new Set,Rt.h&&(Vh(Rt,Rt.h),Rt.h=null))}if(he.D){const n_=wc.g?wc.g.getResponseHeader("X-HTTP-Session-Id"):null;n_&&(he.ya=n_,es(he.I,he.D,n_))}}z.G=3,z.l&&z.l.ua(),z.ba&&(z.R=Date.now()-g.F,z.j.info("Handshake RTT: "+z.R+"ms"));var hn=g;if((he=z).qa=e_(he,he.J?he.ia:null,he.W),hn.K){jm(he.h,hn);var Ni=hn,No=he.L;No&&(Ni.I=No),Ni.B&&(fp(Ni),fd(Ni)),he.g=hn}else Gh(he);0<z.i.length&&vp(z)}else"stop"!=Ti[0]&&"close"!=Ti[0]||yl(z,7);else 3==z.G&&("stop"==Ti[0]||"close"==Ti[0]?"stop"==Ti[0]?yl(z,7):_v(z):"noop"!=Ti[0]&&z.l&&z.l.ta(Ti),z.v=0)}Mh()}catch{}}Iu.prototype.ca=function(g){g=g.target;const k=this.M;k&&3==Gc(g)?k.j():this.Y(g)},Iu.prototype.Y=function(g){try{if(g==this.g)e:{const Ko=Gc(this.g);var k=this.g.Ba();if(this.g.Z(),!(3>Ko)&&(3!=Ko||this.g&&(this.h.h||this.g.oa()||Bh(this.g)))){this.J||4!=Ko||7==k||Mh(),fp(this);var z=this.g.Z();this.X=z;t:if(rv(this)){var he=Bh(this.g);g="";var ht=he.length,Rt=4==Gc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hc(this),pl(this);var hn="";break t}this.h.i=new b.TextDecoder}for(k=0;k<ht;k++)this.h.h=!0,g+=this.h.i.decode(he[k],{stream:!(Rt&&k==ht-1)});he.length=0,this.h.g+=g,this.C=0,hn=this.h.g}else hn=this.g.oa();if(this.o=200==z,function wI(g,k,z,he,ht,Rt,hn){g.info(function(){return"XMLHTTP RESP ("+he+") [ attempt "+ht+"]: "+k+"\n"+z+"\n"+Rt+" "+hn})}(this.i,this.u,this.A,this.l,this.R,Ko,z),this.o){if(this.T&&!this.K){t:{if(this.g){var Ni,No=this.g;if((Ni=No.g?No.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Zn(Ni)){var Ti=Ni;break t}}Ti=null}if(!(z=Ti)){this.o=!1,this.s=3,Wo(12),Hc(this),pl(this);break e}$c(this.i,this.l,z,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Um(this,z)}if(this.P){let wc;for(z=!0;!this.J&&this.C<hn.length;){if(wc=AI(this,hn),wc==lp){4==Ko&&(this.s=4,Wo(14),z=!1),$c(this.i,this.l,null,"[Incomplete Response]");break}if(wc==up){this.s=4,Wo(15),$c(this.i,this.l,hn,"[Invalid Chunk]"),z=!1;break}$c(this.i,this.l,wc,null),Um(this,wc)}if(rv(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Ko||0!=hn.length||this.h.h||(this.s=1,Wo(16),z=!1),this.o=this.o&&z,z){if(0<hn.length&&!this.W){this.W=!0;var xo=this.j;xo.g==this&&xo.ba&&!xo.M&&(xo.j.info("Great, no buffering proxy detected. Bytes received: "+hn.length),Jm(xo),xo.M=!0,Wo(11))}}else $c(this.i,this.l,hn,"[Invalid Chunked Response]"),Hc(this),pl(this)}else $c(this.i,this.l,hn,null),Um(this,hn);4==Ko&&Hc(this),this.o&&!this.J&&(4==Ko?Iv(this.j,this):(this.o=!1,fd(this)))}else(function mv(g){const k={};g=(g.g&&2<=Gc(g)&&g.g.getAllResponseHeaders()||"").split("\r\n");for(let he=0;he<g.length;he++){if(Zn(g[he]))continue;var z=at(g[he]);const ht=z[0];if("string"!=typeof(z=z[1]))continue;z=z.trim();const Rt=k[ht]||[];k[ht]=Rt,Rt.push(z)}!function tt(g,k){for(const z in g)k.call(void 0,g[z],z,g)}(k,function(he){return he.join(", ")})})(this.g),400==z&&0<hn.indexOf("Unknown SID")?(this.s=3,Wo(12)):(this.s=0,Wo(13)),Hc(this),pl(this)}}}catch{}},Iu.prototype.cancel=function(){this.J=!0,Hc(this)},Iu.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(function TI(g,k){g.info(function(){return"TIMEOUT: "+k})}(this.i,this.A),2!=this.L&&(Mh(),Wo(17)),Hc(this),this.s=2,pl(this)):hp(this,this.S-g)};var bI=class{constructor(g,k){this.g=g,this.map=k}};function iv(g){this.l=g||10,g=b.PerformanceNavigationTiming?0<(g=b.performance.getEntriesByType("navigation")).length&&("hq"==g[0].nextHopProtocol||"h2"==g[0].nextHopProtocol):!!(b.chrome&&b.chrome.loadTimes&&b.chrome.loadTimes()&&b.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sv(g){return!!g.h||!!g.g&&g.g.size>=g.j}function Bm(g){return g.h?1:g.g?g.g.size:0}function Fh(g,k){return g.h?g.h==k:!!g.g&&g.g.has(k)}function Vh(g,k){g.g?g.g.add(k):g.h=k}function jm(g,k){g.h&&g.h==k?g.h=null:g.g&&g.g.has(k)&&g.g.delete(k)}function $m(g){if(null!=g.h)return g.i.concat(g.h.D);if(null!=g.g&&0!==g.g.size){let k=g.i;for(const z of g.g.values())k=k.concat(z.D);return k}return Yt(g.i)}function Hm(g,k){if(g.forEach&&"function"==typeof g.forEach)g.forEach(k,void 0);else if(N(g)||"string"==typeof g)Array.prototype.forEach.call(g,k,void 0);else for(var z=function SI(g){if(g.na&&"function"==typeof g.na)return g.na();if(!g.V||"function"!=typeof g.V){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(N(g)||"string"==typeof g){var k=[];g=g.length;for(var z=0;z<g;z++)k.push(z);return k}k=[],z=0;for(const he in g)k[z++]=he;return k}}}(g),he=function ov(g){if(g.V&&"function"==typeof g.V)return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if("string"==typeof g)return g.split("");if(N(g)){for(var k=[],z=g.length,he=0;he<z;he++)k.push(g[he]);return k}for(he in k=[],z=0,g)k[z++]=g[he];return k}(g),ht=he.length,Rt=0;Rt<ht;Rt++)k.call(void 0,he[Rt],z&&z[Rt],g)}iv.prototype.cancel=function(){if(this.i=$m(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const g of this.g.values())g.cancel();this.g.clear()}};var av=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cu(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Cu){this.h=g.h,zm(this,g.j),this.o=g.o,this.g=g.g,Wm(this,g.s),this.l=g.l;var k=g.i,z=new pp;z.i=k.i,k.g&&(z.g=new Map(k.g),z.h=k.h),cv(this,z),this.m=g.m}else g&&(k=String(g).match(av))?(this.h=!1,zm(this,k[1]||"",!0),this.o=gl(k[2]||""),this.g=gl(k[3]||"",!0),Wm(this,k[4]),this.l=gl(k[5]||"",!0),cv(this,k[6]||"",!0),this.m=gl(k[7]||"")):(this.h=!1,this.i=new pp(null,this.h))}function Cc(g){return new Cu(g)}function zm(g,k,z){g.j=z?gl(k,!0):k,g.j&&(g.j=g.j.replace(/:$/,""))}function Wm(g,k){if(k){if(k=Number(k),isNaN(k)||0>k)throw Error("Bad port number "+k);g.s=k}else g.s=null}function cv(g,k,z){k instanceof pp?(g.i=k,function dv(g,k){k&&!g.j&&(ml(g),g.i=null,g.g.forEach(function(z,he){var ht=he.toLowerCase();he!=ht&&(MI(this,he),OI(this,ht,z))},g)),g.j=k}(g.i,g.h)):(z||(k=pd(k,g0)),g.i=new pp(k,g.h))}function es(g,k,z){g.i.set(k,z)}function Lh(g){return es(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function gl(g,k){return g?k?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function pd(g,k,z){return"string"==typeof g?(g=encodeURI(g).replace(k,uv),z&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function uv(g){return"%"+((g=g.charCodeAt(0))>>4&15).toString(16)+(15&g).toString(16)}Cu.prototype.toString=function(){var g=[],k=this.j;k&&g.push(pd(k,Km,!0),":");var z=this.g;return(z||"file"==k)&&(g.push("//"),(k=this.o)&&g.push(pd(k,Km,!0),"@"),g.push(encodeURIComponent(String(z)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(z=this.s)&&g.push(":",String(z))),(z=this.l)&&(this.g&&"/"!=z.charAt(0)&&g.push("/"),g.push(pd(z,"/"==z.charAt(0)?PI:lv,!0))),(z=this.i.toString())&&g.push("?",z),(z=this.m)&&g.push("#",pd(z,m0)),g.join("")};var Km=/[#\/\?@]/g,lv=/[#\?:]/g,PI=/[#\?]/g,g0=/[#\?@]/g,m0=/#/g;function pp(g,k){this.h=this.g=null,this.i=g||null,this.j=!!k}function ml(g){g.g||(g.g=new Map,g.h=0,g.i&&function Gm(g,k){if(g){g=g.split("&");for(var z=0;z<g.length;z++){var he=g[z].indexOf("="),ht=null;if(0<=he){var Rt=g[z].substring(0,he);ht=g[z].substring(he+1)}else Rt=g[z];k(Rt,ht?decodeURIComponent(ht.replace(/\+/g," ")):"")}}}(g.i,function(k,z){g.add(decodeURIComponent(k.replace(/\+/g," ")),z)}))}function MI(g,k){ml(g),k=Uh(g,k),g.g.has(k)&&(g.i=null,g.h-=g.g.get(k).length,g.g.delete(k))}function RI(g,k){return ml(g),k=Uh(g,k),g.g.has(k)}function OI(g,k,z){MI(g,k),0<z.length&&(g.i=null,g.g.set(Uh(g,k),Yt(z)),g.h+=z.length)}function Uh(g,k){return k=String(k),g.j&&(k=k.toLowerCase()),k}function _l(g,k,z,he,ht){try{ht&&(ht.onload=null,ht.onerror=null,ht.onabort=null,ht.ontimeout=null),he(z)}catch{}}function y0(){this.g=new Fm}function v0(g,k,z){const he=z||"";try{Hm(g,function(ht,Rt){let hn=ht;H(ht)&&(hn=km(ht)),k.push(he+Rt+"="+encodeURIComponent(hn))})}catch(ht){throw k.push(he+"type="+encodeURIComponent("_badmap")),ht}}function gp(g){this.l=g.Ub||null,this.j=g.eb||!1}function qm(g,k){yo.call(this),this.D=g,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function NI(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}function mp(g){g.readyState=4,g.l=null,g.j=null,g.v=null,_p(g)}function _p(g){g.onreadystatechange&&g.onreadystatechange.call(g)}function fv(g){let k="";return Ar(g,function(z,he){k+=he,k+=":",k+=z,k+="\r\n"}),k}function wu(g,k,z){e:{for(he in z){var he=!1;break e}he=!0}he||(z=fv(z),"string"==typeof g?null!=z&&encodeURIComponent(String(z)):es(g,k,z))}function ts(g){yo.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=pp.prototype).add=function(g,k){ml(this),this.i=null,g=Uh(this,g);var z=this.g.get(g);return z||this.g.set(g,z=[]),z.push(k),this.h+=1,this},a.forEach=function(g,k){ml(this),this.g.forEach(function(z,he){z.forEach(function(ht){g.call(k,ht,he,this)},this)},this)},a.na=function(){ml(this);const g=Array.from(this.g.values()),k=Array.from(this.g.keys()),z=[];for(let he=0;he<k.length;he++){const ht=g[he];for(let Rt=0;Rt<ht.length;Rt++)z.push(k[he])}return z},a.V=function(g){ml(this);let k=[];if("string"==typeof g)RI(this,g)&&(k=k.concat(this.g.get(Uh(this,g))));else{g=Array.from(this.g.values());for(let z=0;z<g.length;z++)k=k.concat(g[z])}return k},a.set=function(g,k){return ml(this),this.i=null,RI(this,g=Uh(this,g))&&(this.h-=this.g.get(g).length),this.g.set(g,[k]),this.h+=1,this},a.get=function(g,k){return g&&0<(g=this.V(g)).length?String(g[0]):k},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],k=Array.from(this.g.keys());for(var z=0;z<k.length;z++){var he=k[z];const Rt=encodeURIComponent(String(he)),hn=this.V(he);for(he=0;he<hn.length;he++){var ht=Rt;""!==hn[he]&&(ht+="="+encodeURIComponent(String(hn[he]))),g.push(ht)}}return this.i=g.join("&")},Bt(gp,op),gp.prototype.g=function(){return new qm(this.l,this.j)},gp.prototype.i=function(g){return function(){return g}}({}),Bt(qm,yo),(a=qm.prototype).open=function(g,k){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=k,this.readyState=1,_p(this)},a.send=function(g){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const k={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(k.body=g),(this.D||b).fetch(new Request(this.A,k)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mp(this)),this.readyState=0},a.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,_p(this)),this.g&&(this.readyState=3,_p(this),this.g)))if("arraybuffer"===this.responseType)g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof b.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;NI(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var k=g.value?g.value:new Uint8Array(0);(k=this.v.decode(k,{stream:!g.done}))&&(this.response=this.responseText+=k)}g.done?mp(this):_p(this),3==this.readyState&&NI(this)}},a.Ra=function(g){this.g&&(this.response=this.responseText=g,mp(this))},a.Qa=function(g){this.g&&(this.response=g,mp(this))},a.ga=function(){this.g&&mp(this)},a.setRequestHeader=function(g,k){this.u.append(g,k)},a.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],k=this.h.entries();for(var z=k.next();!z.done;)g.push((z=z.value)[0]+": "+z[1]),z=k.next();return g.join("\r\n")},Object.defineProperty(qm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(g){this.m=g?"include":"same-origin"}}),Bt(ts,yo);var xI=/^https?$/i,E0=["POST","PUT"];function Qm(g,k){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=k,g.m=5,pv(g),yp(g)}function pv(g){g.A||(g.A=!0,Oo(g,"complete"),Oo(g,"error"))}function kI(g){if(g.h&&typeof m<"u"&&(!g.v[1]||4!=Gc(g)||2!=g.Z()))if(g.u&&4==Gc(g))cd(g.Ea,0,g);else if(Oo(g,"readystatechange"),4==Gc(g)){g.h=!1;try{const hn=g.Z();e:switch(hn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var z;if(!(z=k)){var he;if(he=0===hn){var ht=String(g.D).match(av)[1]||null;!ht&&b.self&&b.self.location&&(ht=b.self.location.protocol.slice(0,-1)),he=!xI.test(ht?ht.toLowerCase():"")}z=he}if(z)Oo(g,"complete"),Oo(g,"success");else{g.m=6;try{var Rt=2<Gc(g)?g.g.statusText:""}catch{Rt=""}g.l=Rt+" ["+g.Z()+"]",pv(g)}}finally{yp(g)}}}function yp(g,k){if(g.g){gv(g);const z=g.g,he=g.v[0]?()=>{}:null;g.g=null,g.v=null,k||Oo(g,"ready");try{z.onreadystatechange=he}catch{}}}function gv(g){g.I&&(b.clearTimeout(g.I),g.I=null)}function Gc(g){return g.g?g.g.readyState:0}function Bh(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function jh(g,k,z){return z&&z.internalChannelParams&&z.internalChannelParams[g]||k}function Xm(g){this.Aa=0,this.i=[],this.j=new Oh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jh("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jh("baseRetryDelayMs",5e3,g),this.cb=jh("retryDelaySeedMs",1e4,g),this.Wa=jh("forwardChannelMaxRetries",2,g),this.wa=jh("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new iv(g&&g.concurrentRequestLimit),this.Da=new y0,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function _v(g){if(FI(g),3==g.G){var k=g.U++,z=Cc(g.I);if(es(z,"SID",g.K),es(z,"RID",k),es(z,"TYPE","terminate"),Hh(g,z),(k=new Iu(g,g.j,k)).L=2,k.v=Lh(Cc(z)),z=!1,b.navigator&&b.navigator.sendBeacon)try{z=b.navigator.sendBeacon(k.v.toString(),"")}catch{}!z&&b.Image&&((new Image).src=k.v,z=!0),z||(k.g=wv(k.j,null),k.g.ea(k.v)),k.F=Date.now(),fd(k)}Zm(g)}function $h(g){g.g&&(Jm(g),g.g.cancel(),g.g=null)}function FI(g){$h(g),g.u&&(b.clearTimeout(g.u),g.u=null),Ip(g),g.h.cancel(),g.s&&("number"==typeof g.s&&b.clearTimeout(g.s),g.s=null)}function vp(g){if(!sv(g.h)&&!g.s){g.s=!0;var k=g.Ga;od||Ah(),tp||(od(),tp=!0),Am.add(k,g),g.B=0}}function Ep(g,k){var z;z=k?k.l:g.U++;const he=Cc(g.I);es(he,"SID",g.K),es(he,"RID",z),es(he,"AID",g.T),Hh(g,he),g.m&&g.o&&wu(he,g.m,g.o),z=new Iu(g,g.j,z,g.B+1),null===g.m&&(z.H=g.o),k&&(g.i=k.D.concat(g.i)),k=vv(g,z,1e3),z.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Vh(g.h,z),dp(z,he,k)}function Hh(g,k){g.H&&Ar(g.H,function(z,he){es(k,he,z)}),g.l&&Hm({},function(z,he){es(k,he,z)})}function vv(g,k,z){z=Math.min(g.i.length,z);var he=g.l?Re(g.l.Na,g.l,g):null;e:{var ht=g.i;let Rt=-1;for(;;){const hn=["count="+z];-1==Rt?0<z?(Rt=ht[0].g,hn.push("ofs="+Rt)):Rt=0:hn.push("ofs="+Rt);let Ni=!0;for(let No=0;No<z;No++){let Ti=ht[No].g;const xo=ht[No].map;if(Ti-=Rt,0>Ti)Rt=Math.max(0,ht[No].g-100),Ni=!1;else try{v0(xo,hn,"req"+Ti+"_")}catch{he&&he(xo)}}if(Ni){he=hn.join("&");break e}}}return g=g.i.splice(0,z),k.D=g,he}function Gh(g){if(!g.g&&!g.u){g.Y=1;var k=g.Fa;od||Ah(),tp||(od(),tp=!0),Am.add(k,g),g.v=0}}function Ym(g){return!(g.g||g.u||3<=g.v||(g.Y++,g.u=Rh(Re(g.Fa,g),Cv(g,g.v)),g.v++,0))}function Jm(g){null!=g.A&&(b.clearTimeout(g.A),g.A=null)}function Ev(g){g.g=new Iu(g,g.j,"rpc",g.Y),null===g.m&&(g.g.H=g.o),g.g.O=0;var k=Cc(g.qa);es(k,"RID","rpc"),es(k,"SID",g.K),es(k,"AID",g.T),es(k,"CI",g.F?"0":"1"),!g.F&&g.ja&&es(k,"TO",g.ja),es(k,"TYPE","xmlhttp"),Hh(g,k),g.m&&g.o&&wu(k,g.m,g.o),g.L&&(g.g.I=g.L);var z=g.g;g=g.ia,z.L=1,z.v=Lh(Cc(k)),z.m=null,z.P=!0,nv(z,g)}function Ip(g){null!=g.C&&(b.clearTimeout(g.C),g.C=null)}function Iv(g,k){var z=null;if(g.g==k){Ip(g),Jm(g),g.g=null;var he=2}else{if(!Fh(g.h,k))return;z=k.D,jm(g.h,k),he=1}if(0!=g.G)if(k.o)if(1==he){z=k.m?k.m.length:0,k=Date.now()-k.F;var ht=g.B;Oo(he=fl(),new tv(he,z)),vp(g)}else Gh(g);else if(3==(ht=k.s)||0==ht&&0<k.X||!(1==he&&function yv(g,k){return!(Bm(g.h)>=g.h.j-(g.s?1:0)||(g.s?(g.i=k.D.concat(g.i),0):1==g.G||2==g.G||g.B>=(g.Va?0:g.Wa)||(g.s=Rh(Re(g.Ga,g,k),Cv(g,g.B)),g.B++,0)))}(g,k)||2==he&&Ym(g)))switch(z&&0<z.length&&(k=g.h,k.i=k.i.concat(z)),ht){case 1:yl(g,5);break;case 4:yl(g,10);break;case 3:yl(g,6);break;default:yl(g,2)}}function Cv(g,k){let z=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(z*=2),z*k}function yl(g,k){if(g.j.info("Error code "+k),2==k){var z=Re(g.fb,g),he=g.Xa;const ht=!he;he=new Cu(he||"//www.google.com/images/cleardot.gif"),b.location&&"http"==b.location.protocol||zm(he,"https"),Lh(he),ht?function hv(g,k){const z=new Oh;if(b.Image){const he=new Image;he.onload=ot(_l,z,"TestLoadImage: loaded",!0,k,he),he.onerror=ot(_l,z,"TestLoadImage: error",!1,k,he),he.onabort=ot(_l,z,"TestLoadImage: abort",!1,k,he),he.ontimeout=ot(_l,z,"TestLoadImage: timeout",!1,k,he),b.setTimeout(function(){he.ontimeout&&he.ontimeout()},1e4),he.src=g}else k(!1)}(he.toString(),z):function _0(g,k){new Oh;const he=new AbortController,ht=setTimeout(()=>{he.abort(),_l(0,0,!1,k)},1e4);fetch(g,{signal:he.signal}).then(Rt=>{clearTimeout(ht),_l(0,0,!!Rt.ok,k)}).catch(()=>{clearTimeout(ht),_l(0,0,!1,k)})}(he.toString(),z)}else Wo(2);g.G=0,g.l&&g.l.sa(k),Zm(g),FI(g)}function Zm(g){if(g.G=0,g.ka=[],g.l){const k=$m(g.h);(0!=k.length||0!=g.i.length)&&(Wt(g.ka,k),Wt(g.ka,g.i),g.h.i.length=0,Yt(g.i),g.i.length=0),g.l.ra()}}function e_(g,k,z){var he=z instanceof Cu?Cc(z):new Cu(z);if(""!=he.g)k&&(he.g=k+"."+he.g),Wm(he,he.s);else{var ht=b.location;he=ht.protocol,k=k?k+"."+ht.hostname:ht.hostname,ht=+ht.port;var Rt=new Cu(null);he&&zm(Rt,he),k&&(Rt.g=k),ht&&Wm(Rt,ht),z&&(Rt.l=z),he=Rt}return k=g.ya,(z=g.D)&&k&&es(he,z,k),es(he,"VER",g.la),Hh(g,he),he}function wv(g,k,z){if(k&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return(k=new ts(g.Ca&&!g.pa?new gp({eb:z}):g.pa)).Ha(g.J),k}function VI(){}function zh(){}function sa(g,k){yo.call(this),this.g=new Xm(k),this.l=g,this.h=k&&k.messageUrlParams||null,g=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(g?g["X-WebChannel-Content-Type"]=k.messageContentType:g={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.va&&(g?g["X-WebChannel-Client-Profile"]=k.va:g={"X-WebChannel-Client-Profile":k.va}),this.g.S=g,(g=k&&k.Sb)&&!Zn(g)&&(this.g.m=g),this.v=k&&k.supportsCrossDomainXhr||!1,this.u=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!Zn(k)&&(this.g.D=k,null!==(g=this.h)&&k in g&&k in(g=this.h)&&delete g[k]),this.j=new gd(this)}function Tu(g){dd.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var k=g.__sm__;if(k){e:{for(const z in k){g=z;break e}g=void 0}(this.i=g)&&(g=this.i,k=null!==k&&g in k?k[g]:void 0),this.data=k}else this.data=g}function t_(){cp.call(this),this.status=1}function gd(g){this.g=g}(a=ts.prototype).Ha=function(g){this.J=g},a.ea=function(g,k,z,he){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);k=k?k.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xh.g(),this.v=function jc(g){return g.h||(g.h=g.i())}(this.o?this.o:xh),this.g.onreadystatechange=Re(this.Ea,this);try{this.B=!0,this.g.open(k,String(g),!0),this.B=!1}catch(Rt){return void Qm(this,Rt)}if(g=z||"",z=new Map(this.headers),he)if(Object.getPrototypeOf(he)===Object.prototype)for(var ht in he)z.set(ht,he[ht]);else{if("function"!=typeof he.keys||"function"!=typeof he.get)throw Error("Unknown input type for opt_headers: "+String(he));for(const Rt of he.keys())z.set(Rt,he.get(Rt))}he=Array.from(z.keys()).find(Rt=>"content-type"==Rt.toLowerCase()),ht=b.FormData&&g instanceof b.FormData,!(0<=Array.prototype.indexOf.call(E0,k,void 0))||he||ht||z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Rt,hn]of z)this.g.setRequestHeader(Rt,hn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gv(this),this.u=!0,this.g.send(g),this.u=!1}catch(Rt){Qm(this,Rt)}},a.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Oo(this,"complete"),Oo(this,"abort"),yp(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yp(this,!0)),ts.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?kI(this):this.bb())},a.bb=function(){kI(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<Gc(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(g){if(this.g){var k=this.g.responseText;return g&&0==k.indexOf(g)&&(k=k.substring(g.length)),II(k)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=Xm.prototype).la=8,a.G=1,a.connect=function(g,k,z,he){Wo(0),this.W=g,this.H=k||{},z&&void 0!==he&&(this.H.OSID=z,this.H.OAID=he),this.F=this.X,this.I=e_(this,null,this.W),vp(this)},a.Ga=function(g){if(this.s)if(this.s=null,1==this.G){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const ht=new Iu(this,this.j,g);let Rt=this.o;if(this.S&&(Rt?(Rt=be(Rt),rt(Rt,this.S)):Rt=this.S),null!==this.m||this.O||(ht.H=Rt,Rt=null),this.P)e:{for(var k=0,z=0;z<this.i.length;z++){var he=this.i[z];if(void 0===(he="__data__"in he.map&&"string"==typeof(he=he.map.__data__)?he.length:void 0))break;if(4096<(k+=he)){k=z;break e}if(4096===k||z===this.i.length-1){k=z+1;break e}}k=1e3}else k=1e3;k=vv(this,ht,k),es(z=Cc(this.I),"RID",g),es(z,"CVER",22),this.D&&es(z,"X-HTTP-Session-Id",this.D),Hh(this,z),Rt&&(this.O?k="headers="+encodeURIComponent(String(fv(Rt)))+"&"+k:this.m&&wu(z,this.m,Rt)),Vh(this.h,ht),this.Ua&&es(z,"TYPE","init"),this.P?(es(z,"$req",k),es(z,"SID","null"),ht.T=!0,dp(ht,z,null)):dp(ht,z,k),this.G=2}}else 3==this.G&&(g?Ep(this,g):0==this.i.length||sv(this.h)||Ep(this))},a.Fa=function(){if(this.u=null,Ev(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Rh(Re(this.ab,this),g)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wo(10),$h(this),Ev(this))},a.Za=function(){null!=this.C&&(this.C=null,$h(this),Ym(this),Wo(19))},a.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Wo(2)):(this.j.info("Failed to ping google.com"),Wo(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=VI.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},zh.prototype.g=function(g,k){return new sa(g,k)},Bt(sa,yo),sa.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},sa.prototype.close=function(){_v(this.g)},sa.prototype.o=function(g){var k=this.g;if("string"==typeof g){var z={};z.__data__=g,g=z}else this.u&&((z={}).__data__=km(g),g=z);k.i.push(new bI(k.Ya++,g)),3==k.G&&vp(k)},sa.prototype.N=function(){this.g.l=null,delete this.j,_v(this.g),delete this.g,sa.aa.N.call(this)},Bt(Tu,dd),Bt(t_,cp),Bt(gd,VI),gd.prototype.ua=function(){Oo(this.g,"a")},gd.prototype.ta=function(g){Oo(this.g,new Tu(g))},gd.prototype.sa=function(g){Oo(this.g,new t_)},gd.prototype.ra=function(){Oo(this.g,"b")},zh.prototype.createWebChannel=zh.prototype.g,sa.prototype.send=sa.prototype.o,sa.prototype.open=sa.prototype.m,sa.prototype.close=sa.prototype.close,Gt=xn.createWebChannelTransport=function(){return new zh},Ze=xn.getStatEventTarget=function(){return fl()},vt=xn.Event=Eu,_t=xn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nh.NO_ERROR=0,Nh.TIMEOUT=8,Nh.HTTP_ERROR=6,ct=xn.ErrorCode=Nh,Vm.COMPLETE="complete",Qe=xn.EventType=Vm,ld.EventType=ap,ap.OPEN="a",ap.CLOSE="b",ap.ERROR="c",ap.MESSAGE="d",yo.prototype.listen=yo.prototype.K,ke=xn.WebChannel=ld,An=xn.FetchXmlHttpFactory=gp,ts.prototype.listenOnce=ts.prototype.L,ts.prototype.getLastError=ts.prototype.Ka,ts.prototype.getLastErrorCode=ts.prototype.Ba,ts.prototype.getStatus=ts.prototype.Z,ts.prototype.getResponseJson=ts.prototype.Oa,ts.prototype.getResponseText=ts.prototype.oa,ts.prototype.send=ts.prototype.ea,ts.prototype.setWithCredentials=ts.prototype.Ha,fn=xn.XhrIo=ts}).apply(typeof Fn<"u"?Fn:typeof self<"u"?self:typeof window<"u"?window:{});const un="@firebase/firestore";class Jt{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");let en="10.13.1";const vn=new et.Vy("@firebase/firestore");function En(){return vn.logLevel}function it(a,...t){if(vn.logLevel<=et.$b.DEBUG){const r=t.map(or);vn.debug(`Firestore (${en}): ${a}`,...r)}}function yn(a,...t){if(vn.logLevel<=et.$b.ERROR){const r=t.map(or);vn.error(`Firestore (${en}): ${a}`,...r)}}function Qn(a,...t){if(vn.logLevel<=et.$b.WARN){const r=t.map(or);vn.warn(`Firestore (${en}): ${a}`,...r)}}function or(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function St(a="Unexpected state"){const t=`FIRESTORE (${en}) INTERNAL ASSERTION FAILED: `+a;throw yn(t),new Error(t)}function mt(a,t){a||St()}function Ot(a,t){return a}const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mt extends ce.g{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class er{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}class ir{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class wn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Jt.UNAUTHENTICATED))}shutdown(){}}class Pn{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Vr{constructor(t){this.t=t,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){var o=this;let u=this.i;const d=H=>this.i!==u?(u=this.i,r(H)):Promise.resolve();let m=new er;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new er,t.enqueueRetryable(()=>d(this.currentUser))};const b=()=>{const H=m;t.enqueueRetryable((0,ae.A)(function*(){yield H.promise,yield d(o.currentUser)}))},N=H=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=H,this.auth.addAuthTokenListener(this.o),b()};this.t.onInit(H=>N(H)),setTimeout(()=>{if(!this.auth){const H=this.t.getImmediate({optional:!0});H?N(H):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new er)}},0),b()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(o=>this.i!==t?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(mt("string"==typeof o.accessToken),new ir(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return mt(null===t||"string"==typeof t),new Jt(t)}}class zr{constructor(t,r,o){this.l=t,this.h=r,this.P=o,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Wr{constructor(t,r,o){this.l=t,this.h=r,this.P=o}getToken(){return Promise.resolve(new zr(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Gi{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Or{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){const o=d=>{null!=d.error&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.R;return this.R=d.token,it("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?r(d.token):Promise.resolve()};this.o=d=>{t.enqueueRetryable(()=>o(d))};const u=d=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.A.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.A.getImmediate({optional:!0});d?u(d):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(mt("string"==typeof r.token),this.R=r.token,new Gi(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function On(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let o=0;o<a;o++)r[o]=Math.floor(256*Math.random());return r}class Di{static newId(){const r=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=On(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<r&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[d]%62))}return o}}function Ht(a,t){return a<t?-1:a>t?1:0}function Vn(a,t,r){return a.length===t.length&&a.every((o,u)=>r(o,t[u]))}function _r(a){return a+"\0"}class qt{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Mt(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new Mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Mt(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return qt.fromMillis(Date.now())}static fromDate(t){return qt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*r));return new qt(r,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ht(this.nanoseconds,t.nanoseconds):Ht(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Xt(t)}static min(){return new Xt(new qt(0,0))}static max(){return new Xt(new qt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Kr{constructor(t,r,o){void 0===r?r=0:r>t.length&&St(),void 0===o?o=t.length-r:o>t.length-r&&St(),this.segments=t,this.offset=r,this.len=o}get length(){return this.len}isEqual(t){return 0===Kr.comparator(this,t)}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Kr?t.forEach(o=>{r.push(o)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,o=this.limit();r<o;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const o=Math.min(t.length,r.length);for(let u=0;u<o;u++){const d=t.get(u),m=r.get(u);if(d<m)return-1;if(d>m)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class Ln extends Kr{construct(t,r,o){return new Ln(t,r,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const o of t){if(o.indexOf("//")>=0)throw new Mt(nt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);r.push(...o.split("/").filter(u=>u.length>0))}return new Ln(r)}static emptyPath(){return new Ln([])}}const Yr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xe extends Kr{construct(t,r,o){return new xe(t,r,o)}static isValidIdentifier(t){return Yr.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xe(["__name__"])}static fromServerFormat(t){const r=[];let o="",u=0;const d=()=>{if(0===o.length)throw new Mt(nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(o),o=""};let m=!1;for(;u<t.length;){const b=t[u];if("\\"===b){if(u+1===t.length)throw new Mt(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const N=t[u+1];if("\\"!==N&&"."!==N&&"`"!==N)throw new Mt(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=N,u+=2}else"`"===b?(m=!m,u++):"."!==b||m?(o+=b,u++):(d(),u++)}if(d(),m)throw new Mt(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new xe(r)}static emptyPath(){return new xe([])}}class we{constructor(t){this.path=t}static fromPath(t){return new we(Ln.fromString(t))}static fromName(t){return new we(Ln.fromString(t).popFirst(5))}static empty(){return new we(Ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Ln.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,r){return Ln.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new we(new Ln(t.slice()))}}class Ce{constructor(t,r,o,u){this.indexId=t,this.collectionGroup=r,this.fields=o,this.indexState=u}}function Ke(a){return a.fields.find(t=>2===t.kind)}function Nt(a){return a.fields.filter(t=>2!==t.kind)}Ce.UNKNOWN_ID=-1;class q{constructor(t,r){this.fieldPath=t,this.kind=r}}class ie{constructor(t,r){this.sequenceNumber=t,this.offset=r}static empty(){return new ie(0,Ft.min())}}function me(a,t){const r=a.toTimestamp().seconds,o=a.toTimestamp().nanoseconds+1,u=Xt.fromTimestamp(1e9===o?new qt(r+1,0):new qt(r,o));return new Ft(u,we.empty(),t)}function It(a){return new Ft(a.readTime,a.key,-1)}class Ft{constructor(t,r,o){this.readTime=t,this.documentKey=r,this.largestBatchId=o}static min(){return new Ft(Xt.min(),we.empty(),-1)}static max(){return new Ft(Xt.max(),we.empty(),-1)}}function mn(a,t){let r=a.readTime.compareTo(t.readTime);return 0!==r?r:(r=we.comparator(a.documentKey,t.documentKey),0!==r?r:Ht(a.largestBatchId,t.largestBatchId))}const Wn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Xn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Tn(a){return $t.apply(this,arguments)}function $t(){return($t=(0,ae.A)(function*(a){if(a.code!==nt.FAILED_PRECONDITION||a.message!==Wn)throw a;it("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Me{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&St(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Me((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(t,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(r,d).next(o,u)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Me?r:Me.resolve(r)}catch(r){return Me.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Me.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Me.reject(r)}static resolve(t){return new Me((r,o)=>{r(t)})}static reject(t){return new Me((r,o)=>{o(t)})}static waitFor(t){return new Me((r,o)=>{let u=0,d=0,m=!1;t.forEach(b=>{++u,b.next(()=>{++d,m&&d===u&&r()},N=>o(N))}),m=!0,d===u&&r()})}static or(t){let r=Me.resolve(!1);for(const o of t)r=r.next(u=>u?Me.resolve(u):o());return r}static forEach(t,r){const o=[];return t.forEach((u,d)=>{o.push(r.call(this,u,d))}),this.waitFor(o)}static mapArray(t,r){return new Me((o,u)=>{const d=t.length,m=new Array(d);let b=0;for(let N=0;N<d;N++){const H=N;r(t[H]).next(re=>{m[H]=re,++b,b===d&&o(m)},re=>u(re))}})}static doWhile(t,r){return new Me((o,u)=>{const d=()=>{!0===t()?r().next(()=>{d()},u):o()};d()})}}class Lr{constructor(t,r){this.action=t,this.transaction=r,this.aborted=!1,this.V=new er,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new ar(t,r.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=Je(o.target.error);this.V.reject(new ar(t,u))}}static open(t,r,o,u){try{return new Lr(r,t.transaction(u,o))}catch(d){throw new ar(r,d)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(it("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const r=this.transaction.objectStore(t);return new us(r)}}class Jr{constructor(t,r,o){this.name=t,this.version=r,this.p=o,12.2===Jr.S((0,ce.ZQ)())&&yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return it("SimpleDb","Removing database:",t),Ki(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,ce.zW)())return!1;if(Jr.v())return!0;const t=(0,ce.ZQ)(),r=Jr.S(t),o=0<r&&r<10,u=rs(t),d=0<u&&u<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||o||d)}static v(){var t;return typeof process<"u"&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.C)}static F(t,r){return t.store(r)}static S(t){const r=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(o)}M(t){var r=this;return(0,ae.A)(function*(){return r.db||(it("SimpleDb","Opening database:",r.name),r.db=yield new Promise((o,u)=>{const d=indexedDB.open(r.name,r.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new ar(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const b=m.target.error;u("VersionError"===b.name?new Mt(nt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===b.name?new Mt(nt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+b):new ar(t,b))},d.onupgradeneeded=m=>{it("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',m.oldVersion),r.p.O(m.target.result,d.transaction,m.oldVersion,r.version).next(()=>{it("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=o=>r.N(o)),r.db})()}L(t){this.N=t,this.db&&(this.db.onversionchange=r=>t(r))}runTransaction(t,r,o,u){var d=this;return(0,ae.A)(function*(){const m="readonly"===r;let b=0;for(;;){++b;try{d.db=yield d.M(t);const N=Lr.open(d.db,t,m?"readonly":"readwrite",o),H=u(N).next(re=>(N.g(),re)).catch(re=>(N.abort(re),Me.reject(re))).toPromise();return H.catch(()=>{}),yield N.m,H}catch(N){const H=N,re="FirebaseError"!==H.name&&b<3;if(it("SimpleDb","Transaction failed with error:",H.message,"Retrying:",re),d.close(),!re)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function rs(a){const t=a.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class ys{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return Ki(this.B.delete())}}class ar extends Mt{constructor(t,r){super(nt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function fs(a){return"IndexedDbTransactionError"===a.name}class us{constructor(t){this.store=t}put(t,r){let o;return void 0!==r?(it("SimpleDb","PUT",this.store.name,t,r),o=this.store.put(r,t)):(it("SimpleDb","PUT",this.store.name,"<auto-key>",t),o=this.store.put(t)),Ki(o)}add(t){return it("SimpleDb","ADD",this.store.name,t,t),Ki(this.store.add(t))}get(t){return Ki(this.store.get(t)).next(r=>(void 0===r&&(r=null),it("SimpleDb","GET",this.store.name,t,r),r))}delete(t){return it("SimpleDb","DELETE",this.store.name,t),Ki(this.store.delete(t))}count(){return it("SimpleDb","COUNT",this.store.name),Ki(this.store.count())}U(t,r){const o=this.options(t,r),u=o.index?this.store.index(o.index):this.store;if("function"==typeof u.getAll){const d=u.getAll(o.range);return new Me((m,b)=>{d.onerror=N=>{b(N.target.error)},d.onsuccess=N=>{m(N.target.result)}})}{const d=this.cursor(o),m=[];return this.W(d,(b,N)=>{m.push(N)}).next(()=>m)}}G(t,r){const o=this.store.getAll(t,null===r?void 0:r);return new Me((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}j(t,r){it("SimpleDb","DELETE ALL",this.store.name);const o=this.options(t,r);o.H=!1;const u=this.cursor(o);return this.W(u,(d,m,b)=>b.delete())}J(t,r){let o;r?o=t:(o={},r=t);const u=this.cursor(o);return this.W(u,r)}Y(t){const r=this.cursor({});return new Me((o,u)=>{r.onerror=d=>{const m=Je(d.target.error);u(m)},r.onsuccess=d=>{const m=d.target.result;m?t(m.primaryKey,m.value).next(b=>{b?m.continue():o()}):o()}})}W(t,r){const o=[];return new Me((u,d)=>{t.onerror=m=>{d(m.target.error)},t.onsuccess=m=>{const b=m.target.result;if(!b)return void u();const N=new ys(b),H=r(b.primaryKey,b.value,N);if(H instanceof Me){const re=H.catch(pe=>(N.done(),Me.reject(pe)));o.push(re)}N.isDone?u():null===N.K?b.continue():b.continue(N.K)}}).next(()=>Me.waitFor(o))}options(t,r){let o;return void 0!==t&&("string"==typeof t?o=t:r=t),{index:o,range:r}}cursor(t){let r="next";if(t.reverse&&(r="prev"),t.index){const o=this.store.index(t.index);return t.H?o.openKeyCursor(t.range,r):o.openCursor(t.range,r)}return this.store.openCursor(t.range,r)}}function Ki(a){return new Me((t,r)=>{a.onsuccess=o=>{t(o.target.result)},a.onerror=o=>{const u=Je(o.target.error);r(u)}})}let ut=!1;function Je(a){const t=Jr.S((0,ce.ZQ)());if(t>=12.2&&t<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const o=new Mt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ut||(ut=!0,setTimeout(()=>{throw o},0)),o}}return a}class xt{constructor(t,r){this.asyncQueue=t,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(t){var r=this;it("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,ae.A)(function*(){r.task=null;try{it("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(o){fs(o)?it("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield Tn(o)}yield r.X(6e4)}))}}class nn{constructor(t,r){this.localStore=t,this.persistence=r}ee(t=50){var r=this;return(0,ae.A)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>r.te(o,t))})()}te(t,r){const o=new Set;let u=r,d=!0;return Me.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(m=>{if(null!==m&&!o.has(m))return it("IndexBackfiller",`Processing collection: ${m}`),this.ne(t,m,u).next(b=>{u-=b,o.add(m)});d=!1})).next(()=>r-u)}ne(t,r,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,r).next(u=>this.localStore.localDocuments.getNextDocuments(t,r,u,o).next(d=>{const m=d.changes;return this.localStore.indexManager.updateIndexEntries(t,m).next(()=>this.re(u,d)).next(b=>(it("IndexBackfiller",`Updating offset: ${b}`),this.localStore.indexManager.updateCollectionGroup(t,r,b))).next(()=>m.size)}))}re(t,r){let o=t;return r.changes.forEach((u,d)=>{const m=It(d);mn(m,o)>0&&(o=m)}),new Ft(o.readTime,o.documentKey,Math.max(r.batchId,t.largestBatchId))}}let ne=(()=>{class a{constructor(r,o){this.previousValue=r,o&&(o.sequenceNumberHandler=u=>this.ie(u),this.se=u=>o.writeSequenceNumber(u))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function ye(a){return null==a}function Ie(a){return 0===a&&1/a==-1/0}function pt(a){return"number"==typeof a&&Number.isInteger(a)&&!Ie(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function Xe(a){let t="";for(let r=0;r<a.length;r++)t.length>0&&(t=Ut(t)),t=Kt(a.get(r),t);return Ut(t)}function Kt(a,t){let r=t;const o=a.length;for(let u=0;u<o;u++){const d=a.charAt(u);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function Ut(a){return a+"\x01\x01"}function $n(a){const t=a.length;if(mt(t>=2),2===t)return mt("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),Ln.emptyPath();const r=t-2,o=[];let u="";for(let d=0;d<t;){const m=a.indexOf("\x01",d);switch((m<0||m>r)&&St(),a.charAt(m+1)){case"\x01":const b=a.substring(d,m);let N;0===u.length?N=b:(u+=b,N=u,u=""),o.push(N);break;case"\x10":u+=a.substring(d,m),u+="\0";break;case"\x11":u+=a.substring(d,m+1);break;default:St()}d=m+2}return new Ln(o)}const on=["userId","batchId"];function br(a,t){return[a,Xe(t)]}function si(a,t,r){return[a,Xe(t),r]}const yr={},Ai=["prefixPath","collectionGroup","readTime","documentId"],ps=["prefixPath","collectionGroup","documentId"],qi=["collectionGroup","readTime","prefixPath","documentId"],Cr=["canonicalId","targetId"],Nr=["targetId","path"],pi=["path","targetId"],Yn=["collectionId","parent"],kr=["indexId","uid"],ui=["uid","sequenceNumber"],gi=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ri=["indexId","uid","orderedDocumentKey"],Nn=["userId","collectionPath","documentId"],cr=["userId","collectionPath","largestBatchId"],Co=["userId","collectionGroup","largestBatchId"],Qi=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wo=[...Qi,"documentOverlays"],ya=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],va=ya,ko=[...va,"indexConfiguration","indexState","indexEntries"],sr=ko,qo=[...ko,"globals"];class Js extends Xn{constructor(t,r){super(),this._e=t,this.currentSequenceNumber=r}}function wr(a,t){const r=Ot(a);return Jr.F(r._e,t)}function ws(a){let t=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t++;return t}function xs(a,t){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t(r,a[r])}function gs(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}class Sr{constructor(t,r){this.comparator=t,this.root=r||Ui.EMPTY}insert(t,r){return new Sr(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Ui.BLACK,null,null))}remove(t){return new Sr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ui.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(0===o)return r.value;o<0?r=r.left:o>0&&(r=r.right)}return null}indexOf(t){let r=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(t,o.key);if(0===u)return r+o.left.size;u<0?o=o.left:(r+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,o)=>(t(r,o),!1))}toString(){const t=[];return this.inorderTraversal((r,o)=>(t.push(`${r}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ts(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ts(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ts(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ts(this.root,t,this.comparator,!0)}}class Ts{constructor(t,r,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!t.isEmpty();)if(d=r?o(t.key,r):1,r&&u&&(d*=-1),d<0)t=this.isReverse?t.left:t.right;else{if(0===d){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ui{constructor(t,r,o,u,d){this.key=t,this.value=r,this.color=o??Ui.RED,this.left=u??Ui.EMPTY,this.right=d??Ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,o,u,d){return new Ui(t??this.key,r??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const d=o(t,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===d?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ui.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let o,u=this;if(r(t,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(t,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(t,u.key)){if(u.right.isEmpty())return Ui.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(t,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw St();const t=this.left.check();if(t!==this.right.check())throw St();return t+(this.isRed()?0:1)}}Ui.EMPTY=null,Ui.RED=!0,Ui.BLACK=!1,Ui.EMPTY=new class{constructor(){this.size=0}get key(){throw St()}get value(){throw St()}get color(){throw St()}get left(){throw St()}get right(){throw St()}copy(t,r,o,u,d){return this}insert(t,r,o){return new Ui(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tr{constructor(t){this.comparator=t,this.data=new Sr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,o)=>(t(r),!1))}forEachInRange(t,r){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,t[1])>=0)return;r(u.key)}}forEachWhile(t,r){let o;for(o=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new js(this.data.getIterator())}getIteratorFrom(t){return new js(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(o=>{r=r.add(o)}),r}isEqual(t){if(!(t instanceof Tr)||this.size!==t.size)return!1;const r=this.data.getIterator(),o=t.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Tr(this.comparator);return r.data=t,r}}class js{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ks(a){return a.hasNext()?a.getNext():void 0}class Zr{constructor(t){this.fields=t,t.sort(xe.comparator)}static empty(){return new Zr([])}unionWith(t){let r=new Tr(xe.comparator);for(const o of this.fields)r=r.add(o);for(const o of t)r=r.add(o);return new Zr(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Vn(this.fields,t.fields,(r,o)=>r.isEqual(o))}}class Zs extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fr{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Zs("Invalid base64 string: "+d):d}}(t);return new Fr(r)}static fromUint8Array(t){const r=function(u){let d="";for(let m=0;m<u.length;++m)d+=String.fromCharCode(u[m]);return d}(t);return new Fr(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const o=new Uint8Array(r.length);for(let u=0;u<r.length;u++)o[u]=r.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ht(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const li=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(a){if(mt(!!a),"string"==typeof a){let t=0;const r=li.exec(a);if(mt(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),t=Number(u)}const o=new Date(a);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:ln(a.seconds),nanos:ln(a.nanos)}}function ln(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function mi(a){return"string"==typeof a?Fr.fromBase64String(a):Fr.fromUint8Array(a)}function Ds(a){var t,r;return"server_timestamp"===(null===(r=((null===(t=a?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Fs(a){const t=a.mapValue.fields.__previous_value__;return Ds(t)?Fs(t):t}function Vs(a){const t=is(a.mapValue.fields.__local_write_time__.timestampValue);return new qt(t.seconds,t.nanos)}class eo{constructor(t,r,o,u,d,m,b,N,H){this.databaseId=t,this.appId=r,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=b,this.longPollingOptions=N,this.useFetchStreams=H}}class ki{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new ki("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof ki&&t.projectId===this.projectId&&t.database===this.database}}const ms={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ss={nullValue:"NULL_VALUE"};function Bi(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Ds(a)?4:lo(a)?9007199254740991:bs(a)?10:11:St()}function os(a,t){if(a===t)return!0;const r=Bi(a);if(r!==Bi(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return Vs(a).isEqual(Vs(t));case 3:return function(u,d){if("string"==typeof u.timestampValue&&"string"==typeof d.timestampValue&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const m=is(u.timestampValue),b=is(d.timestampValue);return m.seconds===b.seconds&&m.nanos===b.nanos}(a,t);case 5:return a.stringValue===t.stringValue;case 6:return d=t,mi(a.bytesValue).isEqual(mi(d.bytesValue));case 7:return a.referenceValue===t.referenceValue;case 8:return function(u,d){return ln(u.geoPointValue.latitude)===ln(d.geoPointValue.latitude)&&ln(u.geoPointValue.longitude)===ln(d.geoPointValue.longitude)}(a,t);case 2:return function(u,d){if("integerValue"in u&&"integerValue"in d)return ln(u.integerValue)===ln(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const m=ln(u.doubleValue),b=ln(d.doubleValue);return m===b?Ie(m)===Ie(b):isNaN(m)&&isNaN(b)}return!1}(a,t);case 9:return Vn(a.arrayValue.values||[],t.arrayValue.values||[],os);case 10:case 11:return function(u,d){const m=u.mapValue.fields||{},b=d.mapValue.fields||{};if(ws(m)!==ws(b))return!1;for(const N in m)if(m.hasOwnProperty(N)&&(void 0===b[N]||!os(m[N],b[N])))return!1;return!0}(a,t);default:return St()}var d}function $s(a,t){return void 0!==(a.values||[]).find(r=>os(r,t))}function zi(a,t){if(a===t)return 0;const r=Bi(a),o=Bi(t);if(r!==o)return Ht(r,o);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ht(a.booleanValue,t.booleanValue);case 2:return function(d,m){const b=ln(d.integerValue||d.doubleValue),N=ln(m.integerValue||m.doubleValue);return b<N?-1:b>N?1:b===N?0:isNaN(b)?isNaN(N)?0:-1:1}(a,t);case 3:return Vo(a.timestampValue,t.timestampValue);case 4:return Vo(Vs(a),Vs(t));case 5:return Ht(a.stringValue,t.stringValue);case 6:return function(d,m){const b=mi(d),N=mi(m);return b.compareTo(N)}(a.bytesValue,t.bytesValue);case 7:return function(d,m){const b=d.split("/"),N=m.split("/");for(let H=0;H<b.length&&H<N.length;H++){const re=Ht(b[H],N[H]);if(0!==re)return re}return Ht(b.length,N.length)}(a.referenceValue,t.referenceValue);case 8:return function(d,m){const b=Ht(ln(d.latitude),ln(m.latitude));return 0!==b?b:Ht(ln(d.longitude),ln(m.longitude))}(a.geoPointValue,t.geoPointValue);case 9:return Xi(a.arrayValue,t.arrayValue);case 10:return function(d,m){var b,N,H,re;const ot=null===(b=(d.fields||{}).value)||void 0===b?void 0:b.arrayValue,Bt=null===(N=(m.fields||{}).value)||void 0===N?void 0:N.arrayValue,Yt=Ht((null===(H=ot?.values)||void 0===H?void 0:H.length)||0,(null===(re=Bt?.values)||void 0===re?void 0:re.length)||0);return 0!==Yt?Yt:Xi(ot,Bt)}(a.mapValue,t.mapValue);case 11:return function(d,m){if(d===ms.mapValue&&m===ms.mapValue)return 0;if(d===ms.mapValue)return 1;if(m===ms.mapValue)return-1;const b=d.fields||{},N=Object.keys(b),H=m.fields||{},re=Object.keys(H);N.sort(),re.sort();for(let pe=0;pe<N.length&&pe<re.length;++pe){const Re=Ht(N[pe],re[pe]);if(0!==Re)return Re;const ot=zi(b[N[pe]],H[re[pe]]);if(0!==ot)return ot}return Ht(N.length,re.length)}(a.mapValue,t.mapValue);default:throw St()}}function Vo(a,t){if("string"==typeof a&&"string"==typeof t&&a.length===t.length)return Ht(a,t);const r=is(a),o=is(t),u=Ht(r.seconds,o.seconds);return 0!==u?u:Ht(r.nanos,o.nanos)}function Xi(a,t){const r=a.values||[],o=t.values||[];for(let u=0;u<r.length&&u<o.length;++u){const d=zi(r[u],o[u]);if(d)return d}return Ht(r.length,o.length)}function Fi(a){return co(a)}function co(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const o=is(r);return`time(${o.seconds},${o.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?mi(a.bytesValue).toBase64():"referenceValue"in a?we.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=co(d);return o+"]"}(a.arrayValue):"mapValue"in a?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${co(r.fields[m])}`;return u+"}"}(a.mapValue):St()}function Wi(a,t){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${t.path.canonicalString()}`}}function As(a){return!!a&&"integerValue"in a}function Hs(a){return!!a&&"arrayValue"in a}function oa(a){return!!a&&"nullValue"in a}function to(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function qr(a){return!!a&&"mapValue"in a}function bs(a){var t,r;return"__vector__"===(null===(r=((null===(t=a?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function ii(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const t={mapValue:{fields:{}}};return xs(a.mapValue.fields,(r,o)=>t.mapValue.fields[r]=ii(o)),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=ii(a.arrayValue.values[r]);return t}return Object.assign({},a)}function lo(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}const Qo={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Ls(a){return"nullValue"in a?ss:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?Wi(ki.empty(),we.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?bs(a)?Qo:{mapValue:{}}:St()}function vr(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?Wi(ki.empty(),we.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?Qo:"mapValue"in a?bs(a)?{mapValue:{}}:ms:St()}function Lo(a,t){const r=zi(a.value,t.value);return 0!==r?r:a.inclusive&&!t.inclusive?-1:!a.inclusive&&t.inclusive?1:0}function Va(a,t){const r=zi(a.value,t.value);return 0!==r?r:a.inclusive&&!t.inclusive?1:!a.inclusive&&t.inclusive?-1:0}class Ur{constructor(t){this.value=t}static empty(){return new Ur({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let o=0;o<t.length-1;++o)if(r=(r.mapValue.fields||{})[t.get(o)],!qr(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=ii(r)}setAll(t){let r=xe.emptyPath(),o={},u=[];t.forEach((m,b)=>{if(!r.isImmediateParentOf(b)){const N=this.getFieldsMap(r);this.applyChanges(N,o,u),o={},u=[],r=b.popLast()}m?o[b.lastSegment()]=ii(m):u.push(b.lastSegment())});const d=this.getFieldsMap(r);this.applyChanges(d,o,u)}delete(t){const r=this.field(t.popLast());qr(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return os(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let o=0;o<t.length;++o){let u=r.mapValue.fields[t.get(o)];qr(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[t.get(o)]=u),r=u}return r.mapValue.fields}applyChanges(t,r,o){xs(r,(u,d)=>t[u]=d);for(const u of o)delete t[u]}clone(){return new Ur(ii(this.value))}}function ho(a){const t=[];return xs(a.fields,(r,o)=>{const u=new xe([r]);if(qr(o)){const d=ho(o.mapValue).fields;if(0===d.length)t.push(u);else for(const m of d)t.push(u.child(m))}else t.push(u)}),new Zr(t)}class lr{constructor(t,r,o,u,d,m,b){this.key=t,this.documentType=r,this.version=o,this.readTime=u,this.createTime=d,this.data=m,this.documentState=b}static newInvalidDocument(t){return new lr(t,0,Xt.min(),Xt.min(),Xt.min(),Ur.empty(),0)}static newFoundDocument(t,r,o,u){return new lr(t,1,r,Xt.min(),o,u,0)}static newNoDocument(t,r){return new lr(t,2,r,Xt.min(),Xt.min(),Ur.empty(),0)}static newUnknownDocument(t,r){return new lr(t,3,r,Xt.min(),Xt.min(),Ur.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Xt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof lr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new lr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ls{constructor(t,r){this.position=t,this.inclusive=r}}function _s(a,t,r){let o=0;for(let u=0;u<a.position.length;u++){const d=t[u],m=a.position[u];if(o=d.field.isKeyField()?we.comparator(we.fromName(m.referenceValue),r.key):zi(m,r.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function ds(a,t){if(null===a)return null===t;if(null===t||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!os(a.position[r],t.position[r]))return!1;return!0}class ai{constructor(t,r="asc"){this.field=t,this.dir=r}}function G(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}class K{}class O extends K{constructor(t,r,o){super(),this.field=t,this.op=r,this.value=o}static create(t,r,o){return t.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(t,r,o):new Ja(t,r,o):"array-contains"===r?new ca(t,o):"in"===r?new Ia(t,o):"not-in"===r?new Ca(t,o):"array-contains-any"===r?new Uo(t,o):new O(t,r,o)}static createKeyFieldInFilter(t,r,o){return"in"===r?new Za(t,o):new Br(t,o)}matches(t){const r=t.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(zi(r,this.value)):null!==r&&Bi(this.value)===Bi(r)&&this.matchesComparison(zi(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return St()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ee extends K{constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new ee(t,r)}matches(t){return Se(this)?void 0===this.filters.find(r=>!r.matches(t)):void 0!==this.filters.find(r=>r.matches(t))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Se(a){return"and"===a.op}function sn(a){return"or"===a.op}function tr(a){return as(a)&&Se(a)}function as(a){for(const t of a.filters)if(t instanceof ee)return!1;return!0}function Us(a){if(a instanceof O)return a.field.canonicalString()+a.op.toString()+Fi(a.value);if(tr(a))return a.filters.map(t=>Us(t)).join(",");{const t=a.filters.map(r=>Us(r)).join(",");return`${a.op}(${t})`}}function bi(a,t){return a instanceof O?(o=a,(u=t)instanceof O&&o.op===u.op&&o.field.isEqual(u.field)&&os(o.value,u.value)):a instanceof ee?function(o,u){return u instanceof ee&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((d,m,b)=>d&&bi(m,u.filters[b]),!0)}(a,t):void St();var o,u}function no(a,t){const r=a.filters.concat(t);return ee.create(r,a.op)}function aa(a){return a instanceof O?`${(r=a).field.canonicalString()} ${r.op} ${Fi(r.value)}`:a instanceof ee?function(r){return r.op.toString()+" {"+r.getFilters().map(aa).join(" ,")+"}"}(a):"Filter";var r}class Ja extends O{constructor(t,r,o){super(t,r,o),this.key=we.fromName(o.referenceValue)}matches(t){const r=we.comparator(t.key,this.key);return this.matchesComparison(r)}}class Za extends O{constructor(t,r){super(t,"in",r),this.keys=Ea(0,r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class Br extends O{constructor(t,r){super(t,"not-in",r),this.keys=Ea(0,r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function Ea(a,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map(o=>we.fromName(o.referenceValue))}class ca extends O{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Hs(r)&&$s(r.arrayValue,this.value)}}class Ia extends O{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return null!==r&&$s(this.value.arrayValue,r)}}class Ca extends O{constructor(t,r){super(t,"not-in",r)}matches(t){if($s(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return null!==r&&!$s(this.value.arrayValue,r)}}class Uo extends O{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Hs(r)||!r.arrayValue.values)&&r.arrayValue.values.some(o=>$s(this.value.arrayValue,o))}}class ec{constructor(t,r=null,o=[],u=[],d=null,m=null,b=null){this.path=t,this.collectionGroup=r,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=b,this.ue=null}}function wa(a,t=null,r=[],o=[],u=null,d=null,m=null){return new ec(a,t,r,o,u,d,m)}function Bo(a){const t=Ot(a);if(null===t.ue){let r=t.path.canonicalString();null!==t.collectionGroup&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(o=>Us(o)).join(","),r+="|ob:",r+=t.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),ye(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>Fi(o)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>Fi(o)).join(",")),t.ue=r}return t.ue}function To(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!G(a.orderBy[r],t.orderBy[r]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!bi(a.filters[r],t.filters[r]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!ds(a.startAt,t.startAt)&&ds(a.endAt,t.endAt)}function ua(a){return we.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function Do(a,t){return a.filters.filter(r=>r instanceof O&&r.field.isEqual(t))}function fo(a,t,r){let o=ss,u=!0;for(const d of Do(a,t)){let m=ss,b=!0;switch(d.op){case"<":case"<=":m=Ls(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,b=!1;break;case"!=":case"not-in":m=ss}Lo({value:o,inclusive:u},{value:m,inclusive:b})<0&&(o=m,u=b)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(t)){const m=r.position[d];Lo({value:o,inclusive:u},{value:m,inclusive:r.inclusive})<0&&(o=m,u=r.inclusive);break}return{value:o,inclusive:u}}function dr(a,t,r){let o=ms,u=!0;for(const d of Do(a,t)){let m=ms,b=!0;switch(d.op){case">=":case">":m=vr(d.value),b=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,b=!1;break;case"!=":case"not-in":m=ms}Va({value:o,inclusive:u},{value:m,inclusive:b})>0&&(o=m,u=b)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(t)){const m=r.position[d];Va({value:o,inclusive:u},{value:m,inclusive:r.inclusive})>0&&(o=m,u=r.inclusive);break}return{value:o,inclusive:u}}class Qr{constructor(t,r=null,o=[],u=[],d=null,m="F",b=null,N=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=b,this.endAt=N,this.ce=null,this.le=null,this.he=null}}function _i(a,t,r,o,u,d,m,b){return new Qr(a,t,r,o,u,d,m,b)}function Yi(a){return new Qr(a)}function ji(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function la(a){return null!==a.collectionGroup}function Z(a){const t=Ot(a);if(null===t.ce){t.ce=[];const r=new Set;for(const d of t.explicitOrderBy)t.ce.push(d),r.add(d.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let b=new Tr(xe.comparator);return m.filters.forEach(N=>{N.getFlattenedFilters().forEach(H=>{H.isInequality()&&(b=b.add(H.field))})}),b})(t).forEach(d=>{r.has(d.canonicalString())||d.isKeyField()||t.ce.push(new ai(d,o))}),r.has(xe.keyField().canonicalString())||t.ce.push(new ai(xe.keyField(),o))}return t.ce}function I(a){const t=Ot(a);return t.le||(t.le=function L(a,t){if("F"===a.limitType)return wa(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map(u=>new ai(u.field,"desc"===u.dir?"asc":"desc"));const r=a.endAt?new ls(a.endAt.position,a.endAt.inclusive):null,o=a.startAt?new ls(a.startAt.position,a.startAt.inclusive):null;return wa(a.path,a.collectionGroup,t,a.filters,a.limit,r,o)}}(t,Z(a))),t.le}function Y(a,t){const r=a.filters.concat([t]);return new Qr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function fe(a,t,r){return new Qr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,r,a.startAt,a.endAt)}function Ae(a,t){return To(I(a),I(t))&&a.limitType===t.limitType}function Ue(a){return`${Bo(I(a))}|lt:${a.limitType}`}function lt(a){return`Query(target=${function(r){let o=r.path.canonicalString();return null!==r.collectionGroup&&(o+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(o+=`, filters: [${r.filters.map(u=>aa(u)).join(", ")}]`),ye(r.limit)||(o+=", limit: "+r.limit),r.orderBy.length>0&&(o+=`, orderBy: [${r.orderBy.map(u=>{return`${(m=u).field.canonicalString()} (${m.dir})`;var m}).join(", ")}]`),r.startAt&&(o+=", startAt: ",o+=r.startAt.inclusive?"b:":"a:",o+=r.startAt.position.map(u=>Fi(u)).join(",")),r.endAt&&(o+=", endAt: ",o+=r.endAt.inclusive?"a:":"b:",o+=r.endAt.position.map(u=>Fi(u)).join(",")),`Target(${o})`}(I(a))}; limitType=${a.limitType})`}function Pt(a,t){return t.isFoundDocument()&&function(o,u){const d=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(d):we.isDocumentKey(o.path)?o.path.isEqual(d):o.path.isImmediateParentOf(d)}(a,t)&&function(o,u){for(const d of Z(o))if(!d.field.isKeyField()&&null===u.data.field(d.field))return!1;return!0}(a,t)&&function(o,u){for(const d of o.filters)if(!d.matches(u))return!1;return!0}(a,t)&&(u=t,!((o=a).startAt&&!function(m,b,N){const H=_s(m,b,N);return m.inclusive?H<=0:H<0}(o.startAt,Z(o),u)||o.endAt&&!function(m,b,N){const H=_s(m,b,N);return m.inclusive?H>=0:H>0}(o.endAt,Z(o),u)));var o,u}function cn(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function gn(a){return(t,r)=>{let o=!1;for(const u of Z(a)){const d=Ir(u,t,r);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Ir(a,t,r){const o=a.field.isKeyField()?we.comparator(t.key,r.key):function(d,m,b){const N=m.data.field(d),H=b.data.field(d);return null!==N&&null!==H?zi(N,H):St()}(a.field,t,r);switch(a.dir){case"asc":return o;case"desc":return-1*o;default:return St()}}class Kn{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),o=this.inner[r];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,t))return d}has(t){return void 0!==this.get(t)}set(t,r){const o=this.mapKeyFn(t),u=this.inner[o];if(void 0===u)return this.inner[o]=[[t,r]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],t))return void(u[d]=[t,r]);u.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),o=this.inner[r];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return 1===o.length?delete this.inner[r]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(t){xs(this.inner,(r,o)=>{for(const[u,d]of o)t(u,d)})}isEmpty(){return gs(this.inner)}size(){return this.innerSize}}const Hn=new Sr(we.comparator);function Dn(){return Hn}const ei=new Sr(we.comparator);function ci(...a){let t=ei;for(const r of a)t=t.insert(r.key,r);return t}function yi(a){let t=ei;return a.forEach((r,o)=>t=t.insert(r,o.overlayedDocument)),t}function di(){return Ss()}function Vi(){return Ss()}function Ss(){return new Kn(a=>a.toString(),(a,t)=>a.isEqual(t))}const Si=new Sr(we.comparator),$i=new Tr(we.comparator);function Un(...a){let t=$i;for(const r of a)t=t.add(r);return t}const Xo=new Tr(Ht);function po(){return Xo}function Ta(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ie(t)?"-0":t}}function vs(a){return{integerValue:""+a}}function Da(a,t){return pt(t)?vs(t):Ta(a,t)}class Aa{constructor(){this._=void 0}}function tc(a,t,r){return a instanceof Rn?function(u,d){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&Ds(d)&&(d=Fs(d)),d&&(m.fields.__previous_value__=d),{mapValue:m}}(r,t):a instanceof hr?T(a,t):a instanceof Q?F(a,t):function(u,d){const m=Mn(u,d),b=Ee(m)+Ee(u.Pe);return As(m)&&As(u.Pe)?vs(b):Ta(u.serializer,b)}(a,t)}function In(a,t,r){return a instanceof hr?T(a,t):a instanceof Q?F(a,t):r}function Mn(a,t){return a instanceof $?As(o=t)||(d=o)&&"doubleValue"in d?t:{integerValue:0}:null;var o,d}class Rn extends Aa{}class hr extends Aa{constructor(t){super(),this.elements=t}}function T(a,t){const r=Ct(t);for(const o of a.elements)r.some(u=>os(u,o))||r.push(o);return{arrayValue:{values:r}}}class Q extends Aa{constructor(t){super(),this.elements=t}}function F(a,t){let r=Ct(t);for(const o of a.elements)r=r.filter(u=>!os(u,o));return{arrayValue:{values:r}}}class $ extends Aa{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function Ee(a){return ln(a.integerValue||a.doubleValue)}function Ct(a){return Hs(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class Vt{constructor(t,r){this.field=t,this.transform=r}}class Pr{constructor(t,r){this.version=t,this.transformResults=r}}class Sn{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Sn}static exists(t){return new Sn(void 0,t)}static updateTime(t){return new Sn(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function xr(a,t){return void 0!==a.updateTime?t.isFoundDocument()&&t.version.isEqual(a.updateTime):void 0===a.exists||a.exists===t.isFoundDocument()}class fr{}function vi(a,t){if(!a.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return a.isNoDocument()?new Gs(a.key,Sn.none()):new _n(a.key,a.data,Sn.none());{const r=a.data,o=Ur.empty();let u=new Tr(xe.comparator);for(let d of t.fields)if(!u.has(d)){let m=r.field(d);null===m&&d.length>1&&(d=d.popLast(),m=r.field(d)),null===m?o.delete(d):o.set(d,m),u=u.add(d)}return new mr(a.key,o,new Zr(u.toArray()),Sn.none())}}function ti(a,t,r){a instanceof _n?function(u,d,m){const b=u.value.clone(),N=Ei(u.fieldTransforms,d,m.transformResults);b.setAll(N),d.convertToFoundDocument(m.version,b).setHasCommittedMutations()}(a,t,r):a instanceof mr?function(u,d,m){if(!xr(u.precondition,d))return void d.convertToUnknownDocument(m.version);const b=Ei(u.fieldTransforms,d,m.transformResults),N=d.data;N.setAll(Mi(u)),N.setAll(b),d.convertToFoundDocument(m.version,N).setHasCommittedMutations()}(a,t,r):t.convertToNoDocument(r.version).setHasCommittedMutations()}function Pi(a,t,r,o){return a instanceof _n?function(d,m,b,N){if(!xr(d.precondition,m))return b;const H=d.value.clone(),re=cs(d.fieldTransforms,N,m);return H.setAll(re),m.convertToFoundDocument(m.version,H).setHasLocalMutations(),null}(a,t,r,o):a instanceof mr?function(d,m,b,N){if(!xr(d.precondition,m))return b;const H=cs(d.fieldTransforms,N,m),re=m.data;return re.setAll(Mi(d)),re.setAll(H),m.convertToFoundDocument(m.version,re).setHasLocalMutations(),null===b?null:b.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(pe=>pe.field))}(a,t,r,o):(b=r,xr(a.precondition,m=t)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):b);var m,b}function Xr(a,t){let r=null;for(const o of a.fieldTransforms){const u=t.data.field(o.field),d=Mn(o.transform,u||null);null!=d&&(null===r&&(r=Ur.empty()),r.set(o.field,d))}return r||null}function Qt(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&(u=t.fieldTransforms,!!(void 0===(o=a.fieldTransforms)&&void 0===u||o&&u&&Vn(o,u,(d,m)=>function rn(a,t){return a.field.isEqual(t.field)&&(u=t.transform,(o=a.transform)instanceof hr&&u instanceof hr||o instanceof Q&&u instanceof Q?Vn(o.elements,u.elements,os):o instanceof $&&u instanceof $?os(o.Pe,u.Pe):o instanceof Rn&&u instanceof Rn);var o,u}(d,m))))&&(0===a.type?a.value.isEqual(t.value):1!==a.type||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask));var o,u}class _n extends fr{constructor(t,r,o,u=[]){super(),this.key=t,this.value=r,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class mr extends fr{constructor(t,r,o,u,d=[]){super(),this.key=t,this.data=r,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function Mi(a){const t=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const o=a.data.field(r);t.set(r,o)}}),t}function Ei(a,t,r){const o=new Map;mt(a.length===r.length);for(let u=0;u<r.length;u++){const d=a[u],m=d.transform,b=t.data.field(d.field);o.set(d.field,In(m,b,r[u]))}return o}function cs(a,t,r){const o=new Map;for(const u of a){const d=u.transform,m=r.data.field(u.field);o.set(u.field,tc(d,m,t))}return o}class Gs extends fr{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ii extends fr{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gr{constructor(t,r,o,u){this.batchId=t,this.localWriteTime=r,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(t,r){const o=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(t.key)&&ti(d,t,o[u])}}applyToLocalView(t,r){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(r=Pi(o,t,r,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(r=Pi(o,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const o=Vi();return this.mutations.forEach(u=>{const d=t.get(u.key),m=d.overlayedDocument;let b=this.applyToLocalView(m,d.mutatedFields);b=r.has(u.key)?null:b;const N=vi(m,b);null!==N&&o.set(u.key,N),m.isValidDocument()||m.convertToNoDocument(Xt.min())}),o}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Un())}isEqual(t){return this.batchId===t.batchId&&Vn(this.mutations,t.mutations,(r,o)=>Qt(r,o))&&Vn(this.baseMutations,t.baseMutations,(r,o)=>Qt(r,o))}}class go{constructor(t,r,o,u){this.batch=t,this.commitVersion=r,this.mutationResults=o,this.docVersions=u}static from(t,r,o){mt(t.mutations.length===o.length);let u=function(){return Si}();const d=t.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new go(t,r,o,u)}}class nr{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class El{constructor(t,r){this.count=t,this.unchangedNames=r}}var hi,Gn;function Dc(a){switch(a){default:return St();case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0}}function nc(a){if(void 0===a)return yn("GRPC error has no .code"),nt.UNKNOWN;switch(a){case hi.OK:return nt.OK;case hi.CANCELLED:return nt.CANCELLED;case hi.UNKNOWN:return nt.UNKNOWN;case hi.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case hi.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case hi.INTERNAL:return nt.INTERNAL;case hi.UNAVAILABLE:return nt.UNAVAILABLE;case hi.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case hi.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case hi.NOT_FOUND:return nt.NOT_FOUND;case hi.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case hi.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case hi.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case hi.ABORTED:return nt.ABORTED;case hi.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case hi.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case hi.DATA_LOSS:return nt.DATA_LOSS;default:return St()}}(Gn=hi||(hi={}))[Gn.OK=0]="OK",Gn[Gn.CANCELLED=1]="CANCELLED",Gn[Gn.UNKNOWN=2]="UNKNOWN",Gn[Gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gn[Gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gn[Gn.NOT_FOUND=5]="NOT_FOUND",Gn[Gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gn[Gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gn[Gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gn[Gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gn[Gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gn[Gn.ABORTED=10]="ABORTED",Gn[Gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gn[Gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gn[Gn.INTERNAL=13]="INTERNAL",Gn[Gn.UNAVAILABLE=14]="UNAVAILABLE",Gn[Gn.DATA_LOSS=15]="DATA_LOSS";function da(){return new TextEncoder}const Il=new pn([4294967295,4294967295],0);function Yo(a){const t=da().encode(a),r=new bn;return r.update(t),new Uint8Array(r.digest())}function rc(a){const t=new DataView(a.buffer),r=t.getUint32(0,!0),o=t.getUint32(4,!0),u=t.getUint32(8,!0),d=t.getUint32(12,!0);return[new pn([r,o],0),new pn([u,d],0)]}class Es{constructor(t,r,o){if(this.bitmap=t,this.padding=r,this.hashCount=o,r<0||r>=8)throw new Jn(`Invalid padding: ${r}`);if(o<0)throw new Jn(`Invalid hash count: ${o}`);if(t.length>0&&0===this.hashCount)throw new Jn(`Invalid hash count: ${o}`);if(0===t.length&&0!==r)throw new Jn(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*t.length-r,this.Te=pn.fromNumber(this.Ie)}Ee(t,r,o){let u=t.add(r.multiply(pn.fromNumber(o)));return 1===u.compare(Il)&&(u=new pn([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const r=Yo(t),[o,u]=rc(r);for(let d=0;d<this.hashCount;d++){const m=this.Ee(o,u,d);if(!this.de(m))return!1}return!0}static create(t,r,o){const u=t%8==0?0:8-t%8,d=new Uint8Array(Math.ceil(t/8)),m=new Es(d,u,r);return o.forEach(b=>m.insert(b)),m}insert(t){if(0===this.Ie)return;const r=Yo(t),[o,u]=rc(r);for(let d=0;d<this.hashCount;d++){const m=this.Ee(o,u,d);this.Ae(m)}}Ae(t){const r=Math.floor(t/8);this.bitmap[r]|=1<<t%8}}class Jn extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ic{constructor(t,r,o,u,d){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(t,r,o){const u=new Map;return u.set(t,Ci.createSynthesizedTargetChangeForCurrentChange(t,r,o)),new ic(Xt.min(),u,new Sr(Ht),Dn(),Un())}}class Ci{constructor(t,r,o,u,d){this.resumeToken=t,this.current=r,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(t,r,o){return new Ci(o,r,Un(),Un(),Un())}}class Ao{constructor(t,r,o,u){this.Re=t,this.removedTargetIds=r,this.key=o,this.Ve=u}}class ba{constructor(t,r){this.targetId=t,this.me=r}}class Sa{constructor(t,r,o=Fr.EMPTY_BYTE_STRING,u=null){this.state=t,this.targetIds=r,this.resumeToken=o,this.cause=u}}class Ri{constructor(){this.fe=0,this.ge=Ms(),this.pe=Fr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Un(),r=Un(),o=Un();return this.ge.forEach((u,d)=>{switch(d){case 0:t=t.add(u);break;case 2:r=r.add(u);break;case 1:o=o.add(u);break;default:St()}}),new Ci(this.pe,this.ye,t,r,o)}Ce(){this.we=!1,this.ge=Ms()}Fe(t,r){this.we=!0,this.ge=this.ge.insert(t,r)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,mt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Su{constructor(t){this.Le=t,this.Be=new Map,this.ke=Dn(),this.qe=Ps(),this.Qe=new Sr(Ht)}Ke(t){for(const r of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(r,t.Ve):this.Ue(r,t.key,t.Ve);for(const r of t.removedTargetIds)this.Ue(r,t.key,t.Ve)}We(t){this.forEachTarget(t,r=>{const o=this.Ge(r);switch(t.state){case 0:this.ze(r)&&o.De(t.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(t.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(o.Ne(),o.De(t.resumeToken));break;case 4:this.ze(r)&&(this.je(r),o.De(t.resumeToken));break;default:St()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.Be.forEach((o,u)=>{this.ze(u)&&r(u)})}He(t){const r=t.targetId,o=t.me.count,u=this.Je(r);if(u){const d=u.target;if(ua(d))if(0===o){const m=new we(d.path);this.Ue(r,m,lr.newNoDocument(m,Xt.min()))}else mt(1===o);else{const m=this.Ye(r);if(m!==o){const b=this.Ze(t),N=b?this.Xe(b,t,m):1;0!==N&&(this.je(r),this.Qe=this.Qe.insert(r,2===N?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(t){const r=t.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:d=0}=r;let m,b;try{m=mi(o).toUint8Array()}catch(N){if(N instanceof Zs)return Qn("Decoding the base64 bloom filter in existence filter failed ("+N.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw N}try{b=new Es(m,u,d)}catch(N){return Qn(N instanceof Jn?"BloomFilter error: ":"Applying bloom filter failed: ",N),null}return 0===b.Ie?null:b}Xe(t,r,o){return r.me.count===o-this.nt(t,r.targetId)?0:2}nt(t,r){const o=this.Le.getRemoteKeysForTarget(r);let u=0;return o.forEach(d=>{const m=this.Le.tt(),b=`projects/${m.projectId}/databases/${m.database}/documents/${d.path.canonicalString()}`;t.mightContain(b)||(this.Ue(r,d,null),u++)}),u}rt(t){const r=new Map;this.Be.forEach((d,m)=>{const b=this.Je(m);if(b){if(d.current&&ua(b.target)){const N=new we(b.target.path);null!==this.ke.get(N)||this.it(m,N)||this.Ue(m,N,lr.newNoDocument(N,t))}d.be&&(r.set(m,d.ve()),d.Ce())}});let o=Un();this.qe.forEach((d,m)=>{let b=!0;m.forEachWhile(N=>{const H=this.Je(N);return!H||"TargetPurposeLimboResolution"===H.purpose||(b=!1,!1)}),b&&(o=o.add(d))}),this.ke.forEach((d,m)=>m.setReadTime(t));const u=new ic(t,r,this.Qe,this.ke,o);return this.ke=Dn(),this.qe=Ps(),this.Qe=new Sr(Ht),u}$e(t,r){if(!this.ze(t))return;const o=this.it(t,r.key)?2:0;this.Ge(t).Fe(r.key,o),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(t))}Ue(t,r,o){if(!this.ze(t))return;const u=this.Ge(t);this.it(t,r)?u.Fe(r,1):u.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(t)),o&&(this.ke=this.ke.insert(r,o))}removeTarget(t){this.Be.delete(t)}Ye(t){const r=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let r=this.Be.get(t);return r||(r=new Ri,this.Be.set(t,r)),r}st(t){let r=this.qe.get(t);return r||(r=new Tr(Ht),this.qe=this.qe.insert(t,r)),r}ze(t){const r=null!==this.Je(t);return r||it("WatchChangeAggregator","Detected inactive target",t),r}Je(t){const r=this.Be.get(t);return r&&r.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Ri),this.Le.getRemoteKeysForTarget(t).forEach(r=>{this.Ue(t,r,null)})}it(t,r){return this.Le.getRemoteKeysForTarget(t).has(r)}}function Ps(){return new Sr(we.comparator)}function Ms(){return new Sr(we.comparator)}const Kc={asc:"ASCENDING",desc:"DESCENDING"},Jo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qc={and:"AND",or:"OR"};class ro{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function La(a,t){return a.useProto3Json||ye(t)?t:{value:t}}function sc(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qc(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function Pu(a,t){return sc(a,t.toTimestamp())}function Li(a){return mt(!!a),Xt.fromTimestamp(function(r){const o=is(r);return new qt(o.seconds,o.nanos)}(a))}function Mu(a,t){return Ua(a,t).canonicalString()}function Ua(a,t){const r=(u=a,new Ln(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===t?r:r.child(t)}function Cl(a){const t=Ln.fromString(a);return mt(Zo(t)),t}function Xc(a,t){return Mu(a.databaseId,t.path)}function ha(a,t){const r=Cl(t);if(r.get(1)!==a.databaseId.projectId)throw new Mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Mt(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new we(Ed(r))}function Yh(a,t){return Mu(a.databaseId,t)}function wl(a){const t=Cl(a);return 4===t.length?Ln.emptyPath():Ed(t)}function Ru(a){return new Ln(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Ed(a){return mt(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function Jh(a,t,r){return{name:Xc(a,t),fields:r.value.mapValue.fields}}function Zh(a,t,r){const o=ha(a,t.name),u=Li(t.updateTime),d=t.createTime?Li(t.createTime):Xt.min(),m=new Ur({mapValue:{fields:t.fields}}),b=lr.newFoundDocument(o,u,d,m);return r&&b.setHasCommittedMutations(),r?b.setHasCommittedMutations():b}function Ou(a,t){let r;if(t instanceof _n)r={update:Jh(a,t.key,t.value)};else if(t instanceof Gs)r={delete:Xc(a,t.key)};else if(t instanceof mr)r={update:Jh(a,t.key,t.data),updateMask:Ac(t.fieldMask)};else{if(!(t instanceof Ii))return St();r={verify:Xc(a,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(o=>function(d,m){const b=m.transform;if(b instanceof Rn)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(b instanceof hr)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:b.elements}};if(b instanceof Q)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:b.elements}};if(b instanceof $)return{fieldPath:m.field.canonicalString(),increment:b.Pe};throw St()}(0,o))),t.precondition.isNone||(r.currentDocument=void 0!==(d=t.precondition).updateTime?{updateTime:Pu(a,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:St()),r;var d}function Nu(a,t){const r=t.currentDocument?void 0!==(d=t.currentDocument).updateTime?Sn.updateTime(Li(d.updateTime)):void 0!==d.exists?Sn.exists(d.exists):Sn.none():Sn.none(),o=t.updateTransforms?t.updateTransforms.map(u=>function(m,b){let N=null;"setToServerValue"in b?(mt("REQUEST_TIME"===b.setToServerValue),N=new Rn):"appendMissingElements"in b?N=new hr(b.appendMissingElements.values||[]):"removeAllFromArray"in b?N=new Q(b.removeAllFromArray.values||[]):"increment"in b?N=new $(m,b.increment):St();const H=xe.fromServerFormat(b.fieldPath);return new Vt(H,N)}(a,u)):[];var d;if(t.update){const u=ha(a,t.update.name),d=new Ur({mapValue:{fields:t.update.fields}});if(t.updateMask){const m=new Zr((t.updateMask.fieldPaths||[]).map(re=>xe.fromServerFormat(re)));return new mr(u,d,m,r,o)}return new _n(u,d,r,o)}if(t.delete){const u=ha(a,t.delete);return new Gs(u,r)}if(t.verify){const u=ha(a,t.verify);return new Ii(u,r)}return St()}function P(a,t){return{documents:[Yh(a,t.path)]}}function C(a,t){const r={structuredQuery:{}},o=t.path;let u;null!==t.collectionGroup?(u=o,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(u=o.popLast(),r.structuredQuery.from=[{collectionId:o.lastSegment()}]),r.parent=Yh(a,u);const d=function(H){if(0!==H.length)return Hi(ee.create(H,"and"))}(t.filters);d&&(r.structuredQuery.where=d);const m=function(H){if(0!==H.length)return H.map(re=>{return{field:rr((Re=re).field),direction:wt(Re.dir)};var Re})}(t.orderBy);m&&(r.structuredQuery.orderBy=m);const b=La(a,t.limit);return null!==b&&(r.structuredQuery.limit=b),t.startAt&&(r.structuredQuery.startAt={before:(H=t.startAt).inclusive,values:H.position}),t.endAt&&(r.structuredQuery.endAt=function(H){return{before:!H.inclusive,values:H.position}}(t.endAt)),{_t:r,parent:u};var H}function j(a){let t=wl(a.parent);const r=a.structuredQuery,o=r.from?r.from.length:0;let u=null;if(o>0){mt(1===o);const re=r.from[0];re.allDescendants?u=re.collectionId:t=t.child(re.collectionId)}let d=[];r.where&&(d=function(pe){const Re=Te(pe);return Re instanceof ee&&tr(Re)?Re.getFilters():[Re]}(r.where));let m=[];r.orderBy&&(m=r.orderBy.map(Re=>{return new ai(pr((Bt=Re).field),function(Wt){switch(Wt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Bt.direction));var Bt}));let b=null;r.limit&&(b=function(pe){let Re;return Re="object"==typeof pe?pe.value:pe,ye(Re)?null:Re}(r.limit));let N=null;var pe;r.startAt&&(N=new ls((pe=r.startAt).values||[],!!pe.before));let H=null;return r.endAt&&(H=function(pe){return new ls(pe.values||[],!pe.before)}(r.endAt)),_i(t,u,m,d,b,"F",N,H)}function Te(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const o=pr(r.unaryFilter.field);return O.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=pr(r.unaryFilter.field);return O.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=pr(r.unaryFilter.field);return O.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=pr(r.unaryFilter.field);return O.create(m,"!=",{nullValue:"NULL_VALUE"});default:return St()}}(a):void 0!==a.fieldFilter?O.create(pr((r=a).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return St()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return ee.create(r.compositeFilter.filters.map(o=>Te(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return St()}}(r.compositeFilter.op))}(a):St();var r}function wt(a){return Kc[a]}function dt(a){return Jo[a]}function dn(a){return qc[a]}function rr(a){return{fieldPath:a.canonicalString()}}function pr(a){return xe.fromServerFormat(a.fieldPath)}function Hi(a){return a instanceof O?function(r){if("=="===r.op){if(to(r.value))return{unaryFilter:{field:rr(r.field),op:"IS_NAN"}};if(oa(r.value))return{unaryFilter:{field:rr(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(to(r.value))return{unaryFilter:{field:rr(r.field),op:"IS_NOT_NAN"}};if(oa(r.value))return{unaryFilter:{field:rr(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rr(r.field),op:dt(r.op),value:r.value}}}(a):a instanceof ee?function(r){const o=r.getFilters().map(u=>Hi(u));return 1===o.length?o[0]:{compositeFilter:{op:dn(r.op),filters:o}}}(a):St()}function Ac(a){const t=[];return a.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function Zo(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class mo{constructor(t,r,o,u,d=Xt.min(),m=Xt.min(),b=Fr.EMPTY_BYTE_STRING,N=null){this.target=t,this.targetId=r,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=b,this.expectedCount=N}withSequenceNumber(t){return new mo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new mo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new mo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class zs{constructor(t){this.ct=t}}function xu(a,t){const r=t.key,o={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:ku(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())o.document={name:Xc(d=a.ct,(m=t).key),fields:m.data.value.mapValue.fields,updateTime:sc(d,m.version.toTimestamp()),createTime:sc(d,m.createTime.toTimestamp())};else if(t.isNoDocument())o.noDocument={path:r.path.toArray(),readTime:Ba(t.version)};else{if(!t.isUnknownDocument())return St();o.unknownDocument={path:r.path.toArray(),version:Ba(t.version)}}var d,m;return o}function ku(a){const t=a.toTimestamp();return[t.seconds,t.nanoseconds]}function Ba(a){const t=a.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Yc(a){const t=new qt(a.seconds,a.nanoseconds);return Xt.fromTimestamp(t)}function Mr(a,t){const r=(t.baseMutations||[]).map(d=>Nu(a.ct,d));for(let d=0;d<t.mutations.length-1;++d)d+1<t.mutations.length&&void 0!==t.mutations[d+1].transform&&(t.mutations[d].updateTransforms=t.mutations[d+1].transform.fieldTransforms,t.mutations.splice(d+1,1),++d);const o=t.mutations.map(d=>Nu(a.ct,d)),u=qt.fromMillis(t.localWriteTimeMs);return new Gr(t.batchId,u,r,o)}function ja(a){const t=Yc(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?Yc(a.lastLimboFreeSnapshotVersion):Xt.min();let o;return o=void 0!==a.query.documents?(mt(1===(d=a.query).documents.length),I(Yi(wl(d.documents[0])))):function(d){return I(j(d))}(a.query),new mo(o,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,t,r,Fr.fromBase64String(a.resumeToken));var d}function Jc(a,t){const r=Ba(t.snapshotVersion),o=Ba(t.lastLimboFreeSnapshotVersion);let u;u=ua(t.target)?P(a.ct,t.target):C(a.ct,t.target)._t;const d=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Bo(t.target),readTime:r,resumeToken:d,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Ws(a){const t=j({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?fe(t,t.limit,"L"):t}function Id(a,t){return new nr(t.largestBatchId,Nu(a.ct,t.overlayMutation))}function oc(a,t){const r=t.path.lastSegment();return[a,Xe(t.path.popLast()),r]}function ac(a,t,r,o){return{indexId:a,uid:t,sequenceNumber:r,readTime:Ba(o.readTime),documentKey:Xe(o.documentKey.path),largestBatchId:o.largestBatchId}}class Go{getBundleMetadata(t,r){return ef(t).get(r).next(o=>{if(o)return{id:(d=o).bundleId,createTime:Yc(d.createTime),version:d.version};var d})}saveBundleMetadata(t,r){return ef(t).put({bundleId:(u=r).id,createTime:Ba(Li(u.createTime)),version:u.version});var u}getNamedQuery(t,r){return Zc(t).get(r).next(o=>{if(o)return{name:(d=o).name,query:Ws(d.bundledQuery),readTime:Yc(d.readTime)};var d})}saveNamedQuery(t,r){return Zc(t).put({name:(u=r).name,readTime:Ba(Li(u.readTime)),bundledQuery:u.bundledQuery});var u}}function ef(a){return wr(a,"bundles")}function Zc(a){return wr(a,"namedQueries")}class Dl{constructor(t,r){this.serializer=t,this.userId=r}static lt(t,r){return new Dl(t,r.uid||"")}getOverlay(t,r){return io(t).get(oc(this.userId,r)).next(o=>o?Id(this.serializer,o):null)}getOverlays(t,r){const o=di();return Me.forEach(r,u=>this.getOverlay(t,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(t,r,o){const u=[];return o.forEach((d,m)=>{const b=new nr(r,m);u.push(this.ht(t,b))}),Me.waitFor(u)}removeOverlaysForBatchId(t,r,o){const u=new Set;r.forEach(m=>u.add(Xe(m.getCollectionPath())));const d=[];return u.forEach(m=>{const b=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(io(t).j("collectionPathOverlayIndex",b))}),Me.waitFor(d)}getOverlaysForCollection(t,r,o){const u=di(),d=Xe(r),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return io(t).U("collectionPathOverlayIndex",m).next(b=>{for(const N of b){const H=Id(this.serializer,N);u.set(H.getKey(),H)}return u})}getOverlaysForCollectionGroup(t,r,o,u){const d=di();let m;const b=IDBKeyRange.bound([this.userId,r,o],[this.userId,r,Number.POSITIVE_INFINITY],!0);return io(t).J({index:"collectionGroupOverlayIndex",range:b},(N,H,re)=>{const pe=Id(this.serializer,H);d.size()<u||pe.largestBatchId===m?(d.set(pe.getKey(),pe),m=pe.largestBatchId):re.done()}).next(()=>d)}ht(t,r){return io(t).put(function(u,d,m){const[b,N,H]=oc(d,m.mutation.key);return{userId:d,collectionPath:N,documentId:H,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Ou(u.ct,m.mutation)}}(this.serializer,this.userId,r))}}function io(a){return wr(a,"documentOverlays")}class tf{Pt(t){return wr(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(r=>{const o=r?.value;return o?Fr.fromUint8Array(o):Fr.EMPTY_BYTE_STRING})}setSessionToken(t,r){return this.Pt(t).put({name:"sessionToken",value:r.toUint8Array()})}}class $a{constructor(){}It(t,r){this.Tt(t,r),r.Et()}Tt(t,r){if("nullValue"in t)this.dt(r,5);else if("booleanValue"in t)this.dt(r,10),r.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(r,15),r.At(ln(t.integerValue));else if("doubleValue"in t){const o=ln(t.doubleValue);isNaN(o)?this.dt(r,13):(this.dt(r,15),Ie(o)?r.At(0):r.At(o))}else if("timestampValue"in t){let o=t.timestampValue;this.dt(r,20),"string"==typeof o&&(o=is(o)),r.Rt(`${o.seconds||""}`),r.At(o.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,r),this.ft(r);else if("bytesValue"in t)this.dt(r,30),r.gt(mi(t.bytesValue)),this.ft(r);else if("referenceValue"in t)this.yt(t.referenceValue,r);else if("geoPointValue"in t){const o=t.geoPointValue;this.dt(r,45),r.At(o.latitude||0),r.At(o.longitude||0)}else"mapValue"in t?lo(t)?this.dt(r,Number.MAX_SAFE_INTEGER):bs(t)?this.wt(t.mapValue,r):(this.St(t.mapValue,r),this.ft(r)):"arrayValue"in t?(this.bt(t.arrayValue,r),this.ft(r)):St()}Vt(t,r){this.dt(r,25),this.Dt(t,r)}Dt(t,r){r.Rt(t)}St(t,r){const o=t.fields||{};this.dt(r,55);for(const u of Object.keys(o))this.Vt(u,r),this.Tt(o[u],r)}wt(t,r){var o,u;const d=t.fields||{};this.dt(r,53);const m="value",b=(null===(u=null===(o=d[m].arrayValue)||void 0===o?void 0:o.values)||void 0===u?void 0:u.length)||0;this.dt(r,15),r.At(ln(b)),this.Vt(m,r),this.Tt(d[m],r)}bt(t,r){const o=t.values||[];this.dt(r,50);for(const u of o)this.Tt(u,r)}yt(t,r){this.dt(r,37),we.fromName(t).path.forEach(o=>{this.dt(r,60),this.Dt(o,r)})}dt(t,r){t.At(r)}ft(t){t.At(2)}}function Al(a){if(0===a)return 8;let t=0;return!(a>>4)&&(t+=4,a<<=4),!(a>>6)&&(t+=2,a<<=2),!(a>>7)&&(t+=1),t}function bl(a){const t=64-function(o){let u=0;for(let d=0;d<8;++d){const m=Al(255&o[d]);if(u+=m,8!==m)break}return u}(a);return Math.ceil(t/8)}$a.vt=new $a;class bc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){const r=t[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Ft(o.value),o=r.next();this.Mt()}xt(t){const r=t[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Ot(o.value),o=r.next();this.Nt()}Lt(t){for(const r of t){const o=r.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=r.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Bt(t){for(const r of t){const o=r.charCodeAt(0);if(o<128)this.Ot(o);else if(o<2048)this.Ot(960|o>>>6),this.Ot(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|o>>>12),this.Ot(128|63&o>>>6),this.Ot(128|63&o);else{const u=r.codePointAt(0);this.Ot(240|u>>>18),this.Ot(128|63&u>>>12),this.Ot(128|63&u>>>6),this.Ot(128|63&u)}}this.Nt()}kt(t){const r=this.qt(t),o=bl(r);this.Qt(1+o),this.buffer[this.position++]=255&o;for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=255&r[u]}Kt(t){const r=this.qt(t),o=bl(r);this.Qt(1+o),this.buffer[this.position++]=~(255&o);for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){const r=function(d){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,d,!1),new Uint8Array(m.buffer)}(t),o=!!(128&r[0]);r[0]^=o?255:128;for(let u=1;u<r.length;++u)r[u]^=o?255:0;return r}Ft(t){const r=255&t;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(t){const r=255&t;0===r?(this.Gt(0),this.Gt(255)):255===r?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){const r=t+this.position;if(r<=this.buffer.length)return;let o=2*this.buffer.length;o<r&&(o=r);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Fu{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}}class Sl{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}}class Ha{constructor(){this.jt=new bc,this.Ht=new Fu(this.jt),this.Jt=new Sl(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return 0===t?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class _o{constructor(t,r,o,u){this.indexId=t,this.documentKey=r,this.arrayValue=o,this.directionalValue=u}Zt(){const t=this.directionalValue.length,r=0===t||255===this.directionalValue[t-1]?t+1:t,o=new Uint8Array(r);return o.set(this.directionalValue,0),r!==t?o.set([0],this.directionalValue.length):++o[o.length-1],new _o(this.indexId,this.documentKey,this.arrayValue,o)}}function qn(a,t){let r=a.indexId-t.indexId;return 0!==r?r:(r=Cd(a.arrayValue,t.arrayValue),0!==r?r:(r=Cd(a.directionalValue,t.directionalValue),0!==r?r:we.comparator(a.documentKey,t.documentKey)))}function Cd(a,t){for(let r=0;r<a.length&&r<t.length;++r){const o=a[r]-t[r];if(0!==o)return o}return a.length-t.length}class nf{constructor(t){this.Xt=new Tr((r,o)=>xe.comparator(r.field,o.field)),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(const r of t.filters){const o=r;o.isInequality()?this.Xt=this.Xt.add(o):this.tn.push(o)}}get nn(){return this.Xt.size>1}rn(t){if(mt(t.collectionGroup===this.collectionId),this.nn)return!1;const r=Ke(t);if(void 0!==r&&!this.sn(r))return!1;const o=Nt(t);let u=new Set,d=0,m=0;for(;d<o.length&&this.sn(o[d]);++d)u=u.add(o[d].fieldPath.canonicalString());if(d===o.length)return!0;if(this.Xt.size>0){const b=this.Xt.getIterator().getNext();if(!u.has(b.field.canonicalString())){const N=o[d];if(!this.on(b,N)||!this._n(this.en[m++],N))return!1}++d}for(;d<o.length;++d)if(m>=this.en.length||!this._n(this.en[m++],o[d]))return!1;return!0}an(){if(this.nn)return null;let t=new Tr(xe.comparator);const r=[];for(const o of this.tn)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)r.push(new q(o.field,2));else{if(t.has(o.field))continue;t=t.add(o.field),r.push(new q(o.field,0))}for(const o of this.en)o.field.isKeyField()||t.has(o.field)||(t=t.add(o.field),r.push(new q(o.field,"asc"===o.dir?0:1)));return new Ce(Ce.UNKNOWN_ID,this.collectionId,r,ie.empty())}sn(t){for(const r of this.tn)if(this.on(r,t))return!0;return!1}on(t,r){return!(void 0===t||!t.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===t.op||"array-contains-any"===t.op)}_n(t,r){return!!t.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===t.dir||1===r.kind&&"desc"===t.dir)}}function wd(a){var t,r;if(mt(a instanceof O||a instanceof ee),a instanceof O){if(a instanceof Ia){const u=(null===(r=null===(t=a.value.arrayValue)||void 0===t?void 0:t.values)||void 0===r?void 0:r.map(d=>O.create(a.field,"==",d)))||[];return ee.create(u,"or")}return a}const o=a.filters.map(u=>wd(u));return ee.create(o,a.op)}function rf(a){if(0===a.getFilters().length)return[];const t=Dd(wd(a));return mt(Ga(t)),Td(t)||Pl(t)?[t]:t.getFilters()}function Td(a){return a instanceof O}function Pl(a){return a instanceof ee&&tr(a)}function Ga(a){return Td(a)||Pl(a)||function(r){if(r instanceof ee&&sn(r)){for(const o of r.getFilters())if(!Td(o)&&!Pl(o))return!1;return!0}return!1}(a)}function Dd(a){if(mt(a instanceof O||a instanceof ee),a instanceof O)return a;if(1===a.filters.length)return Dd(a.filters[0]);const t=a.filters.map(o=>Dd(o));let r=ee.create(t,a.op);return r=Rl(r),Ga(r)?r:(mt(r instanceof ee),mt(Se(r)),mt(r.filters.length>1),r.filters.reduce((o,u)=>Ad(o,u)))}function Ad(a,t){let r;return mt(a instanceof O||a instanceof ee),mt(t instanceof O||t instanceof ee),r=a instanceof O?t instanceof O?ee.create([a,t],"and"):Ml(a,t):t instanceof O?Ml(t,a):function(u,d){if(mt(u.filters.length>0&&d.filters.length>0),Se(u)&&Se(d))return no(u,d.getFilters());const m=sn(u)?u:d,b=sn(u)?d:u,N=m.filters.map(H=>Ad(H,b));return ee.create(N,"or")}(a,t),Rl(r)}function Ml(a,t){if(Se(t))return no(t,a.getFilters());{const r=t.filters.map(o=>Ad(a,o));return ee.create(r,"or")}}function Rl(a){if(mt(a instanceof O||a instanceof ee),a instanceof O)return a;const t=a.getFilters();if(1===t.length)return Rl(t[0]);if(as(a))return a;const r=t.map(u=>Rl(u)),o=[];return r.forEach(u=>{u instanceof O?o.push(u):u instanceof ee&&(u.op===a.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:ee.create(o,a.op)}class Kp{constructor(){this.un=new kt}addToCollectionParentIndex(t,r){return this.un.add(r),Me.resolve()}getCollectionParents(t,r){return Me.resolve(this.un.getEntries(r))}addFieldIndex(t,r){return Me.resolve()}deleteFieldIndex(t,r){return Me.resolve()}deleteAllFieldIndexes(t){return Me.resolve()}createTargetIndexes(t,r){return Me.resolve()}getDocumentsMatchingTarget(t,r){return Me.resolve(null)}getIndexType(t,r){return Me.resolve(0)}getFieldIndexes(t,r){return Me.resolve([])}getNextCollectionGroupToUpdate(t){return Me.resolve(null)}getMinOffset(t,r){return Me.resolve(Ft.min())}getMinOffsetFromCollectionGroup(t,r){return Me.resolve(Ft.min())}updateCollectionGroup(t,r,o){return Me.resolve()}updateIndexEntries(t,r){return Me.resolve()}}class kt{constructor(){this.index={}}add(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r]||new Tr(Ln.comparator),d=!u.has(o);return this.index[r]=u.add(o),d}has(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r];return u&&u.has(o)}getEntries(t){return(this.index[t]||new Tr(Ln.comparator)).toArray()}}const Rr=new Uint8Array(0);class Ol{constructor(t,r){this.databaseId=r,this.cn=new kt,this.ln=new Kn(o=>Bo(o),(o,u)=>To(o,u)),this.uid=t.uid||""}addToCollectionParentIndex(t,r){if(!this.cn.has(r)){const o=r.lastSegment(),u=r.popLast();t.addOnCommittedListener(()=>{this.cn.add(r)});const d={collectionId:o,parent:Xe(u)};return Vu(t).put(d)}return Me.resolve()}getCollectionParents(t,r){const o=[],u=IDBKeyRange.bound([r,""],[_r(r),""],!1,!0);return Vu(t).U(u).next(d=>{for(const m of d){if(m.collectionId!==r)break;o.push($n(m.parent))}return o})}addFieldIndex(t,r){const o=Sc(t),u={indexId:(b=r).indexId,collectionGroup:b.collectionGroup,fields:b.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var b;delete u.indexId;const d=o.add(u);if(r.indexState){const m=ea(t);return d.next(b=>{m.put(ac(b,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return d.next()}deleteFieldIndex(t,r){const o=Sc(t),u=ea(t),d=jr(t);return o.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const r=Sc(t),o=jr(t),u=ea(t);return r.j().next(()=>o.j()).next(()=>u.j())}createTargetIndexes(t,r){return Me.forEach(this.hn(r),o=>this.getIndexType(t,o).next(u=>{if(0===u||1===u){const d=new nf(o).an();if(null!=d)return this.addFieldIndex(t,d)}}))}getDocumentsMatchingTarget(t,r){const o=jr(t);let u=!0;const d=new Map;return Me.forEach(this.hn(r),m=>this.Pn(t,m).next(b=>{u&&(u=!!b),d.set(m,b)})).next(()=>{if(u){let m=Un();const b=[];return Me.forEach(d,(N,H)=>{var kn;it("IndexedDbIndexManager",`Using index ${kn=N,`id=${kn.indexId}|cg=${kn.collectionGroup}|f=${kn.fields.map(ur=>`${ur.fieldPath}:${ur.kind}`).join(",")}`} to execute ${Bo(r)}`);const re=function(kn,ur){const Hr=Ke(ur);if(void 0===Hr)return null;for(const Ar of Do(kn,Hr.fieldPath))switch(Ar.op){case"array-contains-any":return Ar.value.arrayValue.values||[];case"array-contains":return[Ar.value]}return null}(H,N),pe=function(kn,ur){const Hr=new Map;for(const Ar of Nt(ur))for(const tt of Do(kn,Ar.fieldPath))switch(tt.op){case"==":case"in":Hr.set(Ar.fieldPath.canonicalString(),tt.value);break;case"not-in":case"!=":return Hr.set(Ar.fieldPath.canonicalString(),tt.value),Array.from(Hr.values())}return null}(H,N),Re=function(kn,ur){const Hr=[];let Ar=!0;for(const tt of Nt(ur)){const be=0===tt.kind?fo(kn,tt.fieldPath,kn.startAt):dr(kn,tt.fieldPath,kn.startAt);Hr.push(be.value),Ar&&(Ar=be.inclusive)}return new ls(Hr,Ar)}(H,N),ot=function(kn,ur){const Hr=[];let Ar=!0;for(const tt of Nt(ur)){const be=0===tt.kind?dr(kn,tt.fieldPath,kn.endAt):fo(kn,tt.fieldPath,kn.endAt);Hr.push(be.value),Ar&&(Ar=be.inclusive)}return new ls(Hr,Ar)}(H,N),Bt=this.In(N,H,Re),Yt=this.In(N,H,ot),Wt=this.Tn(N,H,pe),Bn=this.En(N.indexId,re,Bt,Re.inclusive,Yt,ot.inclusive,Wt);return Me.forEach(Bn,Zn=>o.G(Zn,r.limit).next(kn=>{kn.forEach(ur=>{const Hr=we.fromSegments(ur.documentKey);m.has(Hr)||(m=m.add(Hr),b.push(Hr))})}))}).next(()=>b)}return Me.resolve(null)})}hn(t){let r=this.ln.get(t);return r||(r=0===t.filters.length?[t]:rf(ee.create(t.filters,"and")).map(o=>wa(t.path,t.collectionGroup,t.orderBy,o.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,r),r)}En(t,r,o,u,d,m,b){const N=(null!=r?r.length:1)*Math.max(o.length,d.length),H=N/(null!=r?r.length:1),re=[];for(let pe=0;pe<N;++pe){const Re=r?this.dn(r[pe/H]):Rr,ot=this.An(t,Re,o[pe%H],u),Bt=this.Rn(t,Re,d[pe%H],m),Yt=b.map(Wt=>this.An(t,Re,Wt,!0));re.push(...this.createRange(ot,Bt,Yt))}return re}An(t,r,o,u){const d=new _o(t,we.empty(),r,o);return u?d:d.Zt()}Rn(t,r,o,u){const d=new _o(t,we.empty(),r,o);return u?d.Zt():d}Pn(t,r){const o=new nf(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(t,u).next(d=>{let m=null;for(const b of d)o.rn(b)&&(!m||b.fields.length>m.fields.length)&&(m=b);return m})}getIndexType(t,r){let o=2;const u=this.hn(r);return Me.forEach(u,d=>this.Pn(t,d).next(m=>{m?0!==o&&m.fields.length<function(N){let H=new Tr(xe.comparator),re=!1;for(const pe of N.filters)for(const Re of pe.getFlattenedFilters())Re.field.isKeyField()||("array-contains"===Re.op||"array-contains-any"===Re.op?re=!0:H=H.add(Re.field));for(const pe of N.orderBy)pe.field.isKeyField()||(H=H.add(pe.field));return H.size+(re?1:0)}(d)&&(o=1):o=0})).next(()=>null!==r.limit&&u.length>1&&2===o?1:o)}Vn(t,r){const o=new Ha;for(const u of Nt(t)){const d=r.data.field(u.fieldPath);if(null==d)return null;const m=o.Yt(u.kind);$a.vt.It(d,m)}return o.zt()}dn(t){const r=new Ha;return $a.vt.It(t,r.Yt(0)),r.zt()}mn(t,r){const o=new Ha;return $a.vt.It(Wi(this.databaseId,r),o.Yt(function(d){const m=Nt(d);return 0===m.length?0:m[m.length-1].kind}(t))),o.zt()}Tn(t,r,o){if(null===o)return[];let u=[];u.push(new Ha);let d=0;for(const m of Nt(t)){const b=o[d++];for(const N of u)if(this.fn(r,m.fieldPath)&&Hs(b))u=this.gn(u,m,b);else{const H=N.Yt(m.kind);$a.vt.It(b,H)}}return this.pn(u)}In(t,r,o){return this.Tn(t,r,o.position)}pn(t){const r=[];for(let o=0;o<t.length;++o)r[o]=t[o].zt();return r}gn(t,r,o){const u=[...t],d=[];for(const m of o.arrayValue.values||[])for(const b of u){const N=new Ha;N.seed(b.zt()),$a.vt.It(m,N.Yt(r.kind)),d.push(N)}return d}fn(t,r){return!!t.filters.find(o=>o instanceof O&&o.field.isEqual(r)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(t,r){const o=Sc(t),u=ea(t);return(r?o.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):o.U()).next(d=>{const m=[];return Me.forEach(d,b=>u.get([b.indexId,this.uid]).next(N=>{m.push(function(re,pe){const Re=pe?new ie(pe.sequenceNumber,new Ft(Yc(pe.readTime),new we($n(pe.documentKey)),pe.largestBatchId)):ie.empty(),ot=re.fields.map(([Bt,Yt])=>new q(xe.fromServerFormat(Bt),Yt));return new Ce(re.indexId,re.collectionGroup,ot,Re)}(b,N))})).next(()=>m)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(r=>0===r.length?null:(r.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:Ht(o.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(t,r,o){const u=Sc(t),d=ea(t);return this.yn(t).next(m=>u.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(b=>Me.forEach(b,N=>d.put(ac(N.indexId,this.uid,m,o)))))}updateIndexEntries(t,r){const o=new Map;return Me.forEach(r,(u,d)=>{const m=o.get(u.collectionGroup);return(m?Me.resolve(m):this.getFieldIndexes(t,u.collectionGroup)).next(b=>(o.set(u.collectionGroup,b),Me.forEach(b,N=>this.wn(t,u,N).next(H=>{const re=this.Sn(d,N);return H.isEqual(re)?Me.resolve():this.bn(t,d,N,H,re)}))))})}Dn(t,r,o,u){return jr(t).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.mn(o,r.key),documentKey:r.key.path.toArray()})}vn(t,r,o,u){return jr(t).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.mn(o,r.key),r.key.path.toArray()])}wn(t,r,o){const u=jr(t);let d=new Tr(qn);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.mn(o,r)])},(m,b)=>{d=d.add(new _o(o.indexId,r,b.arrayValue,b.directionalValue))}).next(()=>d)}Sn(t,r){let o=new Tr(qn);const u=this.Vn(r,t);if(null==u)return o;const d=Ke(r);if(null!=d){const m=t.data.field(d.fieldPath);if(Hs(m))for(const b of m.arrayValue.values||[])o=o.add(new _o(r.indexId,t.key,this.dn(b),u))}else o=o.add(new _o(r.indexId,t.key,Rr,u));return o}bn(t,r,o,u,d){it("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const m=[];return function(N,H,re,pe,Re){const ot=N.getIterator(),Bt=H.getIterator();let Yt=ks(ot),Wt=ks(Bt);for(;Yt||Wt;){let Bn=!1,Zn=!1;if(Yt&&Wt){const kn=re(Yt,Wt);kn<0?Zn=!0:kn>0&&(Bn=!0)}else null!=Yt?Zn=!0:Bn=!0;Bn?(pe(Wt),Wt=ks(Bt)):Zn?(Re(Yt),Yt=ks(ot)):(Yt=ks(ot),Wt=ks(Bt))}}(u,d,qn,b=>{m.push(this.Dn(t,r,o,b))},b=>{m.push(this.vn(t,r,o,b))}),Me.waitFor(m)}yn(t){let r=1;return ea(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(t,r,o){o=o.sort((m,b)=>qn(m,b)).filter((m,b,N)=>!b||0!==qn(m,N[b-1]));const u=[];u.push(t);for(const m of o){const b=qn(m,t),N=qn(m,r);if(0===b)u[0]=t.Zt();else if(b>0&&N<0)u.push(m),u.push(m.Zt());else if(N>0)break}u.push(r);const d=[];for(let m=0;m<u.length;m+=2){if(this.Cn(u[m],u[m+1]))return[];d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Rr,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Rr,[]]))}return d}Cn(t,r){return qn(t,r)>0}getMinOffsetFromCollectionGroup(t,r){return this.getFieldIndexes(t,r).next(fa)}getMinOffset(t,r){return Me.mapArray(this.hn(r),o=>this.Pn(t,o).next(u=>u||St())).next(fa)}}function Vu(a){return wr(a,"collectionParents")}function jr(a){return wr(a,"indexEntries")}function Sc(a){return wr(a,"indexConfiguration")}function ea(a){return wr(a,"indexState")}function fa(a){mt(0!==a.length);let t=a[0].indexState.offset,r=t.largestBatchId;for(let o=1;o<a.length;o++){const u=a[o].indexState.offset;mn(u,t)<0&&(t=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new Ft(t.readTime,t.documentKey,r)}const Lu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Rs{constructor(t,r,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=o}static withCacheSize(t){return new Rs(t,Rs.DEFAULT_COLLECTION_PERCENTILE,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function bd(a,t,r){const o=a.store("mutations"),u=a.store("documentMutations"),d=[],m=IDBKeyRange.only(r.batchId);let b=0;const N=o.J({range:m},(re,pe,Re)=>(b++,Re.delete()));d.push(N.next(()=>{mt(1===b)}));const H=[];for(const re of r.mutations){const pe=si(t,re.key.path,r.batchId);d.push(u.delete(pe)),H.push(re.key)}return Me.waitFor(d).next(()=>H)}function Sd(a){if(!a)return 0;let t;if(a.document)t=a.document;else if(a.unknownDocument)t=a.unknownDocument;else{if(!a.noDocument)throw St();t=a.noDocument}return JSON.stringify(t).length}Rs.DEFAULT_COLLECTION_PERCENTILE=10,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rs.DEFAULT=new Rs(41943040,Rs.DEFAULT_COLLECTION_PERCENTILE,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rs.DISABLED=new Rs(-1,0,0);class eu{constructor(t,r,o,u){this.userId=t,this.serializer=r,this.indexManager=o,this.referenceDelegate=u,this.Fn={}}static lt(t,r,o,u){mt(""!==t.uid);const d=t.isAuthenticated()?t.uid:"";return new eu(d,r,o,u)}checkEmpty(t){let r=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return so(t).J({index:"userMutationsIndex",range:o},(u,d,m)=>{r=!1,m.done()}).next(()=>r)}addMutationBatch(t,r,o,u){const d=Pc(t),m=so(t);return m.add({}).next(b=>{mt("number"==typeof b);const N=new Gr(b,r,o,u),H=function(ot,Bt,Yt){const Wt=Yt.baseMutations.map(Zn=>Ou(ot.ct,Zn)),Bn=Yt.mutations.map(Zn=>Ou(ot.ct,Zn));return{userId:Bt,batchId:Yt.batchId,localWriteTimeMs:Yt.localWriteTime.toMillis(),baseMutations:Wt,mutations:Bn}}(this.serializer,this.userId,N),re=[];let pe=new Tr((Re,ot)=>Ht(Re.canonicalString(),ot.canonicalString()));for(const Re of u){const ot=si(this.userId,Re.key.path,b);pe=pe.add(Re.key.path.popLast()),re.push(m.put(H)),re.push(d.put(ot,yr))}return pe.forEach(Re=>{re.push(this.indexManager.addToCollectionParentIndex(t,Re))}),t.addOnCommittedListener(()=>{this.Fn[b]=N.keys()}),Me.waitFor(re).next(()=>N)})}lookupMutationBatch(t,r){return so(t).get(r).next(o=>o?(mt(o.userId===this.userId),Mr(this.serializer,o)):null)}Mn(t,r){return this.Fn[r]?Me.resolve(this.Fn[r]):this.lookupMutationBatch(t,r).next(o=>{if(o){const u=o.keys();return this.Fn[r]=u,u}return null})}getNextMutationBatchAfterBatchId(t,r){const o=r+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return so(t).J({index:"userMutationsIndex",range:u},(m,b,N)=>{b.userId===this.userId&&(mt(b.batchId>=o),d=Mr(this.serializer,b)),N.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(t){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return so(t).J({index:"userMutationsIndex",range:r,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(t){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return so(t).U("userMutationsIndex",r).next(o=>o.map(u=>Mr(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(t,r){const o=br(this.userId,r.path),u=IDBKeyRange.lowerBound(o),d=[];return Pc(t).J({range:u},(m,b,N)=>{const[H,re,pe]=m,Re=$n(re);if(H===this.userId&&r.path.isEqual(Re))return so(t).get(pe).next(ot=>{if(!ot)throw St();mt(ot.userId===this.userId),d.push(Mr(this.serializer,ot))});N.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(t,r){let o=new Tr(Ht);const u=[];return r.forEach(d=>{const m=br(this.userId,d.path),b=IDBKeyRange.lowerBound(m),N=Pc(t).J({range:b},(H,re,pe)=>{const[Re,ot,Bt]=H,Yt=$n(ot);Re===this.userId&&d.path.isEqual(Yt)?o=o.add(Bt):pe.done()});u.push(N)}),Me.waitFor(u).next(()=>this.xn(t,o))}getAllMutationBatchesAffectingQuery(t,r){const o=r.path,u=o.length+1,d=br(this.userId,o),m=IDBKeyRange.lowerBound(d);let b=new Tr(Ht);return Pc(t).J({range:m},(N,H,re)=>{const[pe,Re,ot]=N,Bt=$n(Re);pe===this.userId&&o.isPrefixOf(Bt)?Bt.length===u&&(b=b.add(ot)):re.done()}).next(()=>this.xn(t,b))}xn(t,r){const o=[],u=[];return r.forEach(d=>{u.push(so(t).get(d).next(m=>{if(null===m)throw St();mt(m.userId===this.userId),o.push(Mr(this.serializer,m))}))}),Me.waitFor(u).next(()=>o)}removeMutationBatch(t,r){return bd(t._e,this.userId,r).next(o=>(t.addOnCommittedListener(()=>{this.On(r.batchId)}),Me.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(t,u))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(r=>{if(!r)return Me.resolve();const o=IDBKeyRange.lowerBound(function(m){return[m]}(this.userId)),u=[];return Pc(t).J({range:o},(d,m,b)=>{if(d[0]===this.userId){const N=$n(d[1]);u.push(N)}else b.done()}).next(()=>{mt(0===u.length)})})}containsKey(t,r){return Bs(t,this.userId,r)}Nn(t){return ta(t).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Bs(a,t,r){const o=br(t,r.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return Pc(a).J({range:d,H:!0},(b,N,H)=>{const[re,pe,Re]=b;re===t&&pe===u&&(m=!0),H.done()}).next(()=>m)}function so(a){return wr(a,"mutations")}function Pc(a){return wr(a,"documentMutations")}function ta(a){return wr(a,"mutationQueues")}class Ks{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ks(0)}static kn(){return new Ks(-1)}}class qp{constructor(t,r){this.referenceDelegate=t,this.serializer=r}allocateTargetId(t){return this.qn(t).next(r=>{const o=new Ks(r.highestTargetId);return r.highestTargetId=o.next(),this.Qn(t,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(r=>Xt.fromTimestamp(new qt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(t,r,o){return this.qn(t).next(u=>(u.highestListenSequenceNumber=r,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.Qn(t,u)))}addTargetData(t,r){return this.Kn(t,r).next(()=>this.qn(t).next(o=>(o.targetCount+=1,this.$n(r,o),this.Qn(t,o))))}updateTargetData(t,r){return this.Kn(t,r)}removeTargetData(t,r){return this.removeMatchingKeysForTargetId(t,r.targetId).next(()=>Mc(t).delete(r.targetId)).next(()=>this.qn(t)).next(o=>(mt(o.targetCount>0),o.targetCount-=1,this.Qn(t,o)))}removeTargets(t,r,o){let u=0;const d=[];return Mc(t).J((m,b)=>{const N=ja(b);N.sequenceNumber<=r&&null===o.get(N.targetId)&&(u++,d.push(this.removeTargetData(t,N)))}).next(()=>Me.waitFor(d)).next(()=>u)}forEachTarget(t,r){return Mc(t).J((o,u)=>{const d=ja(u);r(d)})}qn(t){return Pd(t).get("targetGlobalKey").next(r=>(mt(null!==r),r))}Qn(t,r){return Pd(t).put("targetGlobalKey",r)}Kn(t,r){return Mc(t).put(Jc(this.serializer,r))}$n(t,r){let o=!1;return t.targetId>r.highestTargetId&&(r.highestTargetId=t.targetId,o=!0),t.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t.sequenceNumber,o=!0),o}getTargetCount(t){return this.qn(t).next(r=>r.targetCount)}getTargetData(t,r){const o=Bo(r),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Mc(t).J({range:u,index:"queryTargetsIndex"},(m,b,N)=>{const H=ja(b);To(r,H.target)&&(d=H,N.done())}).next(()=>d)}addMatchingKeys(t,r,o){const u=[],d=cc(t);return r.forEach(m=>{const b=Xe(m.path);u.push(d.put({targetId:o,path:b})),u.push(this.referenceDelegate.addReference(t,o,m))}),Me.waitFor(u)}removeMatchingKeys(t,r,o){const u=cc(t);return Me.forEach(r,d=>{const m=Xe(d.path);return Me.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(t,o,d)])})}removeMatchingKeysForTargetId(t,r){const o=cc(t),u=IDBKeyRange.bound([r],[r+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(t,r){const o=IDBKeyRange.bound([r],[r+1],!1,!0),u=cc(t);let d=Un();return u.J({range:o,H:!0},(m,b,N)=>{const H=$n(m[1]),re=new we(H);d=d.add(re)}).next(()=>d)}containsKey(t,r){const o=Xe(r.path),u=IDBKeyRange.bound([o],[_r(o)],!1,!0);let d=0;return cc(t).J({index:"documentTargetsIndex",H:!0,range:u},([m,b],N,H)=>{0!==m&&(d++,H.done())}).next(()=>d>0)}ot(t,r){return Mc(t).get(r).next(o=>o?ja(o):null)}}function Mc(a){return wr(a,"targets")}function Pd(a){return wr(a,"targetGlobal")}function cc(a){return wr(a,"targetDocuments")}function Rc([a,t],[r,o]){const u=Ht(a,r);return 0===u?Ht(t,o):u}class Md{constructor(t){this.Un=t,this.buffer=new Tr(Rc),this.Wn=0}Gn(){return++this.Wn}zn(t){const r=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const o=this.buffer.last();Rc(r,o)<0&&(this.buffer=this.buffer.delete(o).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Nl{constructor(t,r,o){this.garbageCollector=t,this.asyncQueue=r,this.localStore=o,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(t){var r=this;it("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,ae.A)(function*(){r.jn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(o){fs(o)?it("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Tn(o)}yield r.Hn(3e5)}))}}class xl{constructor(t,r){this.Jn=t,this.params=r}calculateTargetCount(t,r){return this.Jn.Yn(t).next(o=>Math.floor(r/100*o))}nthSequenceNumber(t,r){if(0===r)return Me.resolve(ne.oe);const o=new Md(r);return this.Jn.forEachTarget(t,u=>o.zn(u.sequenceNumber)).next(()=>this.Jn.Zn(t,u=>o.zn(u))).next(()=>o.maxValue)}removeTargets(t,r,o){return this.Jn.removeTargets(t,r,o)}removeOrphanedDocuments(t,r){return this.Jn.removeOrphanedDocuments(t,r)}collect(t,r){return-1===this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector","Garbage collection skipped; disabled"),Me.resolve(Lu)):this.getCacheSize(t).next(o=>o<this.params.cacheSizeCollectionThreshold?(it("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lu):this.Xn(t,r))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,r){let o,u,d,m,b,N,H;const re=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(pe=>(pe>this.params.maximumSequenceNumbersToCollect?(it("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${pe}`),u=this.params.maximumSequenceNumbersToCollect):u=pe,m=Date.now(),this.nthSequenceNumber(t,u))).next(pe=>(o=pe,b=Date.now(),this.removeTargets(t,o,r))).next(pe=>(d=pe,N=Date.now(),this.removeOrphanedDocuments(t,o))).next(pe=>(H=Date.now(),En()<=et.$b.DEBUG&&it("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-re}ms\n\tDetermined least recently used ${u} in `+(b-m)+`ms\n\tRemoved ${d} targets in `+(N-b)+`ms\n\tRemoved ${pe} documents in `+(H-N)+`ms\nTotal Duration: ${H-re}ms`),Me.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:pe})))}}class af{constructor(t,r){this.db=t,this.garbageCollector=function sf(a,t){return new xl(a,t)}(this,r)}Yn(t){const r=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(o=>r.next(u=>o+u))}er(t){let r=0;return this.Zn(t,o=>{r++}).next(()=>r)}forEachTarget(t,r){return this.db.getTargetCache().forEachTarget(t,r)}Zn(t,r){return this.tr(t,(o,u)=>r(u))}addReference(t,r,o){return tu(t,o)}removeReference(t,r,o){return tu(t,o)}removeTargets(t,r,o){return this.db.getTargetCache().removeTargets(t,r,o)}markPotentiallyOrphaned(t,r){return tu(t,r)}nr(t,r){return function(u,d){let m=!1;return ta(u).Y(b=>Bs(u,b,d).next(N=>(N&&(m=!0),Me.resolve(!N)))).next(()=>m)}(t,r)}removeOrphanedDocuments(t,r){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.tr(t,(m,b)=>{if(b<=r){const N=this.nr(t,m).next(H=>{if(!H)return d++,o.getEntry(t,m).next(()=>(o.removeEntry(m,Xt.min()),cc(t).delete([0,Xe(m.path)])))});u.push(N)}}).next(()=>Me.waitFor(u)).next(()=>o.apply(t)).next(()=>d)}removeTarget(t,r){const o=r.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,o)}updateLimboDocument(t,r){return tu(t,r)}tr(t,r){const o=cc(t);let u,d=ne.oe;return o.J({index:"documentTargetsIndex"},([m,b],{path:N,sequenceNumber:H})=>{0===m?(d!==ne.oe&&r(new we($n(u)),d),d=H,u=N):d=ne.oe}).next(()=>{d!==ne.oe&&r(new we($n(u)),d)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function tu(a,t){return cc(a).put((u=a.currentSequenceNumber,{targetId:0,path:Xe(t.path),sequenceNumber:u}));var u}class Rd{constructor(){this.changes=new Kn(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,lr.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const o=this.changes.get(r);return void 0!==o?Me.resolve(o):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class cf{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,r,o){return Oc(t).put(o)}removeEntry(t,r,o){return Oc(t).delete(function(d,m){const b=d.path.toArray();return[b.slice(0,b.length-2),b[b.length-2],ku(m),b[b.length-1]]}(r,o))}updateMetadata(t,r){return this.getMetadata(t).next(o=>(o.byteSize+=r,this.rr(t,o)))}getEntry(t,r){let o=lr.newInvalidDocument(r);return Oc(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Is(r))},(u,d)=>{o=this.ir(r,d)}).next(()=>o)}sr(t,r){let o={size:0,document:lr.newInvalidDocument(r)};return Oc(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Is(r))},(u,d)=>{o={document:this.ir(r,d),size:Sd(d)}}).next(()=>o)}getEntries(t,r){let o=Dn();return this._r(t,r,(u,d)=>{const m=this.ir(u,d);o=o.insert(u,m)}).next(()=>o)}ar(t,r){let o=Dn(),u=new Sr(we.comparator);return this._r(t,r,(d,m)=>{const b=this.ir(d,m);o=o.insert(d,b),u=u.insert(d,Sd(m))}).next(()=>({documents:o,ur:u}))}_r(t,r,o){if(r.isEmpty())return Me.resolve();let u=new Tr(Oi);r.forEach(N=>u=u.add(N));const d=IDBKeyRange.bound(Is(u.first()),Is(u.last())),m=u.getIterator();let b=m.getNext();return Oc(t).J({index:"documentKeyIndex",range:d},(N,H,re)=>{const pe=we.fromSegments([...H.prefixPath,H.collectionGroup,H.documentId]);for(;b&&Oi(b,pe)<0;)o(b,null),b=m.getNext();b&&b.isEqual(pe)&&(o(b,H),b=m.hasNext()?m.getNext():null),b?re.$(Is(b)):re.done()}).next(()=>{for(;b;)o(b,null),b=m.hasNext()?m.getNext():null})}getDocumentsMatchingQuery(t,r,o,u,d){const m=r.path,b=[m.popLast().toArray(),m.lastSegment(),ku(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],N=[m.popLast().toArray(),m.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oc(t).U(IDBKeyRange.bound(b,N,!0)).next(H=>{d?.incrementDocumentReadCount(H.length);let re=Dn();for(const pe of H){const Re=this.ir(we.fromSegments(pe.prefixPath.concat(pe.collectionGroup,pe.documentId)),pe);Re.isFoundDocument()&&(Pt(r,Re)||u.has(Re.key))&&(re=re.insert(Re.key,Re))}return re})}getAllFromCollectionGroup(t,r,o,u){let d=Dn();const m=uc(r,o),b=uc(r,Ft.max());return Oc(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,b,!0)},(N,H,re)=>{const pe=this.ir(we.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);d=d.insert(pe.key,pe),d.size===u&&re.done()}).next(()=>d)}newChangeBuffer(t){return new uf(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(r=>r.byteSize)}getMetadata(t){return kl(t).get("remoteDocumentGlobalKey").next(r=>(mt(!!r),r))}rr(t,r){return kl(t).put("remoteDocumentGlobalKey",r)}ir(t,r){if(r){const o=function Ho(a,t){let r;if(t.document)r=Zh(a.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const o=we.fromSegments(t.noDocument.path),u=Yc(t.noDocument.readTime);r=lr.newNoDocument(o,u),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return St();{const o=we.fromSegments(t.unknownDocument.path),u=Yc(t.unknownDocument.version);r=lr.newUnknownDocument(o,u)}}return t.readTime&&r.setReadTime(function(u){const d=new qt(u[0],u[1]);return Xt.fromTimestamp(d)}(t.readTime)),r}(this.serializer,r);if(!o.isNoDocument()||!o.version.isEqual(Xt.min()))return o}return lr.newInvalidDocument(t)}}function Uu(a){return new cf(a)}class uf extends Rd{constructor(t,r){super(),this.cr=t,this.trackRemovals=r,this.lr=new Kn(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(t){const r=[];let o=0,u=new Tr((d,m)=>Ht(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const b=this.lr.get(d);if(r.push(this.cr.removeEntry(t,d,b.readTime)),m.isValidDocument()){const N=xu(this.cr.serializer,m);u=u.add(d.path.popLast());const H=Sd(N);o+=H-b.size,r.push(this.cr.addEntry(t,d,N))}else if(o-=b.size,this.trackRemovals){const N=xu(this.cr.serializer,m.convertToNoDocument(Xt.min()));r.push(this.cr.addEntry(t,d,N))}}),u.forEach(d=>{r.push(this.cr.indexManager.addToCollectionParentIndex(t,d))}),r.push(this.cr.updateMetadata(t,o)),Me.waitFor(r)}getFromCache(t,r){return this.cr.sr(t,r).next(o=>(this.lr.set(r,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(t,r){return this.cr.ar(t,r).next(({documents:o,ur:u})=>(u.forEach((d,m)=>{this.lr.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function kl(a){return wr(a,"remoteDocumentGlobal")}function Oc(a){return wr(a,"remoteDocumentsV14")}function Is(a){const t=a.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function uc(a,t){const r=t.documentKey.path.toArray();return[a,ku(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Oi(a,t){const r=a.path.toArray(),o=t.path.toArray();let u=0;for(let d=0;d<r.length-2&&d<o.length-2;++d)if(u=Ht(r[d],o[d]),u)return u;return u=Ht(r.length,o.length),u||(u=Ht(r[r.length-2],o[o.length-2]),u||Ht(r[r.length-1],o[o.length-1]))}class Qp{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}class lf{constructor(t,r,o,u){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=o,this.indexManager=u}getDocument(t,r){let o=null;return this.documentOverlayCache.getOverlay(t,r).next(u=>(o=u,this.remoteDocumentCache.getEntry(t,r))).next(u=>(null!==o&&Pi(o.mutation,u,Zr.empty(),qt.now()),u))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.getLocalViewOfDocuments(t,o,Un()).next(()=>o))}getLocalViewOfDocuments(t,r,o=Un()){const u=di();return this.populateOverlays(t,u,r).next(()=>this.computeViews(t,r,u,o).next(d=>{let m=ci();return d.forEach((b,N)=>{m=m.insert(b,N.overlayedDocument)}),m}))}getOverlayedDocuments(t,r){const o=di();return this.populateOverlays(t,o,r).next(()=>this.computeViews(t,r,o,Un()))}populateOverlays(t,r,o){const u=[];return o.forEach(d=>{r.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(t,u).next(d=>{d.forEach((m,b)=>{r.set(m,b)})})}computeViews(t,r,o,u){let d=Dn();const m=Ss(),b=Ss();return r.forEach((N,H)=>{const re=o.get(H.key);u.has(H.key)&&(void 0===re||re.mutation instanceof mr)?d=d.insert(H.key,H):void 0!==re?(m.set(H.key,re.mutation.getFieldMask()),Pi(re.mutation,H,re.mutation.getFieldMask(),qt.now())):m.set(H.key,Zr.empty())}),this.recalculateAndSaveOverlays(t,d).next(N=>(N.forEach((H,re)=>m.set(H,re)),r.forEach((H,re)=>{var pe;return b.set(H,new Qp(re,null!==(pe=m.get(H))&&void 0!==pe?pe:null))}),b))}recalculateAndSaveOverlays(t,r){const o=Ss();let u=new Sr((m,b)=>m-b),d=Un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(m=>{for(const b of m)b.keys().forEach(N=>{const H=r.get(N);if(null===H)return;let re=o.get(N)||Zr.empty();re=b.applyToLocalView(H,re),o.set(N,re);const pe=(u.get(b.batchId)||Un()).add(N);u=u.insert(b.batchId,pe)})}).next(()=>{const m=[],b=u.getReverseIterator();for(;b.hasNext();){const N=b.getNext(),H=N.key,re=N.value,pe=Vi();re.forEach(Re=>{if(!d.has(Re)){const ot=vi(r.get(Re),o.get(Re));null!==ot&&pe.set(Re,ot),d=d.add(Re)}}),m.push(this.documentOverlayCache.saveOverlays(t,H,pe))}return Me.waitFor(m)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,r,o,u){return we.isDocumentKey((m=r).path)&&null===m.collectionGroup&&0===m.filters.length?this.getDocumentsMatchingDocumentQuery(t,r.path):la(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,o,u):this.getDocumentsMatchingCollectionQuery(t,r,o,u);var m}getNextDocuments(t,r,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,o,u).next(d=>{const m=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,o.largestBatchId,u-d.size):Me.resolve(di());let b=-1,N=d;return m.next(H=>Me.forEach(H,(re,pe)=>(b<pe.largestBatchId&&(b=pe.largestBatchId),d.get(re)?Me.resolve():this.remoteDocumentCache.getEntry(t,re).next(Re=>{N=N.insert(re,Re)}))).next(()=>this.populateOverlays(t,H,d)).next(()=>this.computeViews(t,N,H,Un())).next(re=>({batchId:b,changes:yi(re)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new we(r)).next(o=>{let u=ci();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(t,r,o,u){const d=r.collectionGroup;let m=ci();return this.indexManager.getCollectionParents(t,d).next(b=>Me.forEach(b,N=>{const H=(pe=r,Re=N.child(d),new Qr(Re,null,pe.explicitOrderBy.slice(),pe.filters.slice(),pe.limit,pe.limitType,pe.startAt,pe.endAt));var pe,Re;return this.getDocumentsMatchingCollectionQuery(t,H,o,u).next(re=>{re.forEach((pe,Re)=>{m=m.insert(pe,Re)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(t,r,o,u){let d;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,o.largestBatchId).next(m=>(d=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,o,d,u))).next(m=>{d.forEach((N,H)=>{const re=H.getKey();null===m.get(re)&&(m=m.insert(re,lr.newInvalidDocument(re)))});let b=ci();return m.forEach((N,H)=>{const re=d.get(N);void 0!==re&&Pi(re.mutation,H,Zr.empty(),qt.now()),Pt(r,H)&&(b=b.insert(N,H))}),b})}}class Xp{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,r){return Me.resolve(this.hr.get(r))}saveBundleMetadata(t,r){return this.hr.set(r.id,{id:(u=r).id,version:u.version,createTime:Li(u.createTime)}),Me.resolve();var u}getNamedQuery(t,r){return Me.resolve(this.Pr.get(r))}saveNamedQuery(t,r){return this.Pr.set(r.name,{name:(u=r).name,query:Ws(u.bundledQuery),readTime:Li(u.readTime)}),Me.resolve();var u}}class Yp{constructor(){this.overlays=new Sr(we.comparator),this.Ir=new Map}getOverlay(t,r){return Me.resolve(this.overlays.get(r))}getOverlays(t,r){const o=di();return Me.forEach(r,u=>this.getOverlay(t,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(t,r,o){return o.forEach((u,d)=>{this.ht(t,r,d)}),Me.resolve()}removeOverlaysForBatchId(t,r,o){const u=this.Ir.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.Ir.delete(o)),Me.resolve()}getOverlaysForCollection(t,r,o){const u=di(),d=r.length+1,m=new we(r.child("")),b=this.overlays.getIteratorFrom(m);for(;b.hasNext();){const N=b.getNext().value,H=N.getKey();if(!r.isPrefixOf(H.path))break;H.path.length===d&&N.largestBatchId>o&&u.set(N.getKey(),N)}return Me.resolve(u)}getOverlaysForCollectionGroup(t,r,o,u){let d=new Sr((H,re)=>H-re);const m=this.overlays.getIterator();for(;m.hasNext();){const H=m.getNext().value;if(H.getKey().getCollectionGroup()===r&&H.largestBatchId>o){let re=d.get(H.largestBatchId);null===re&&(re=di(),d=d.insert(H.largestBatchId,re)),re.set(H.getKey(),H)}}const b=di(),N=d.getIterator();for(;N.hasNext()&&(N.getNext().value.forEach((H,re)=>b.set(H,re)),!(b.size()>=u)););return Me.resolve(b)}ht(t,r,o){const u=this.overlays.get(o.key);if(null!==u){const m=this.Ir.get(u.largestBatchId).delete(o.key);this.Ir.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new nr(r,o));let d=this.Ir.get(r);void 0===d&&(d=Un(),this.Ir.set(r,d)),this.Ir.set(r,d.add(o.key))}}class df{constructor(){this.sessionToken=Fr.EMPTY_BYTE_STRING}getSessionToken(t){return Me.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Me.resolve()}}class nu{constructor(){this.Tr=new Tr(Ji.Er),this.dr=new Tr(Ji.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,r){const o=new Ji(t,r);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(t,r){t.forEach(o=>this.addReference(o,r))}removeReference(t,r){this.Vr(new Ji(t,r))}mr(t,r){t.forEach(o=>this.removeReference(o,r))}gr(t){const r=new we(new Ln([])),o=new Ji(r,t),u=new Ji(r,t+1),d=[];return this.dr.forEachInRange([o,u],m=>{this.Vr(m),d.push(m.key)}),d}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const r=new we(new Ln([])),o=new Ji(r,t),u=new Ji(r,t+1);let d=Un();return this.dr.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(t){const r=new Ji(t,0),o=this.Tr.firstAfterOrEqual(r);return null!==o&&t.isEqual(o.key)}}class Ji{constructor(t,r){this.key=t,this.wr=r}static Er(t,r){return we.comparator(t.key,r.key)||Ht(t.wr,r.wr)}static Ar(t,r){return Ht(t.wr,r.wr)||we.comparator(t.key,r.key)}}class Pa{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Tr(Ji.Er)}checkEmpty(t){return Me.resolve(0===this.mutationQueue.length)}addMutationBatch(t,r,o,u){const d=this.Sr;this.Sr++;const m=new Gr(d,r,o,u);this.mutationQueue.push(m);for(const b of u)this.br=this.br.add(new Ji(b.key,d)),this.indexManager.addToCollectionParentIndex(t,b.key.path.popLast());return Me.resolve(m)}lookupMutationBatch(t,r){return Me.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(t,r){const u=this.vr(r+1),d=u<0?0:u;return Me.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return Me.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return Me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const o=new Ji(r,0),u=new Ji(r,Number.POSITIVE_INFINITY),d=[];return this.br.forEachInRange([o,u],m=>{const b=this.Dr(m.wr);d.push(b)}),Me.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(t,r){let o=new Tr(Ht);return r.forEach(u=>{const d=new Ji(u,0),m=new Ji(u,Number.POSITIVE_INFINITY);this.br.forEachInRange([d,m],b=>{o=o.add(b.wr)})}),Me.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,r){const o=r.path,u=o.length+1;let d=o;we.isDocumentKey(d)||(d=d.child(""));const m=new Ji(new we(d),0);let b=new Tr(Ht);return this.br.forEachWhile(N=>{const H=N.key.path;return!!o.isPrefixOf(H)&&(H.length===u&&(b=b.add(N.wr)),!0)},m),Me.resolve(this.Cr(b))}Cr(t){const r=[];return t.forEach(o=>{const u=this.Dr(o);null!==u&&r.push(u)}),r}removeMutationBatch(t,r){mt(0===this.Fr(r.batchId,"removed")),this.mutationQueue.shift();let o=this.br;return Me.forEach(r.mutations,u=>{const d=new Ji(u.key,r.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(()=>{this.br=o})}On(t){}containsKey(t,r){const o=new Ji(r,0),u=this.br.firstAfterOrEqual(o);return Me.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(t){return Me.resolve()}Fr(t,r){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){const r=this.vr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Od{constructor(t){this.Mr=t,this.docs=new Sr(we.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const o=r.key,u=this.docs.get(o),d=u?u.size:0,m=this.Mr(r);return this.docs=this.docs.insert(o,{document:r.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const o=this.docs.get(r);return Me.resolve(o?o.document.mutableCopy():lr.newInvalidDocument(r))}getEntries(t,r){let o=Dn();return r.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():lr.newInvalidDocument(u))}),Me.resolve(o)}getDocumentsMatchingQuery(t,r,o,u){let d=Dn();const m=r.path,b=new we(m.child("")),N=this.docs.getIteratorFrom(b);for(;N.hasNext();){const{key:H,value:{document:re}}=N.getNext();if(!m.isPrefixOf(H.path))break;H.path.length>m.length+1||mn(It(re),o)<=0||(u.has(re.key)||Pt(r,re))&&(d=d.insert(re.key,re.mutableCopy()))}return Me.resolve(d)}getAllFromCollectionGroup(t,r,o,u){St()}Or(t,r){return Me.forEach(this.docs,o=>r(o))}newChangeBuffer(t){return new Fl(this)}getSize(t){return Me.resolve(this.size)}}class Fl extends Rd{constructor(t){super(),this.cr=t}applyChanges(t){const r=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?r.push(this.cr.addEntry(t,u)):this.cr.removeEntry(o)}),Me.waitFor(r)}getFromCache(t,r){return this.cr.getEntry(t,r)}getAllFromCache(t,r){return this.cr.getEntries(t,r)}}class Bu{constructor(t){this.persistence=t,this.Nr=new Kn(r=>Bo(r),To),this.lastRemoteSnapshotVersion=Xt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new nu,this.targetCount=0,this.kr=Ks.Bn()}forEachTarget(t,r){return this.Nr.forEach((o,u)=>r(u)),Me.resolve()}getLastRemoteSnapshotVersion(t){return Me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Me.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Me.resolve(this.highestTargetId)}setTargetsMetadata(t,r,o){return o&&(this.lastRemoteSnapshotVersion=o),r>this.Lr&&(this.Lr=r),Me.resolve()}Kn(t){this.Nr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.kr=new Ks(r),this.highestTargetId=r),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,r){return this.Kn(r),this.targetCount+=1,Me.resolve()}updateTargetData(t,r){return this.Kn(r),Me.resolve()}removeTargetData(t,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Me.resolve()}removeTargets(t,r,o){let u=0;const d=[];return this.Nr.forEach((m,b)=>{b.sequenceNumber<=r&&null===o.get(b.targetId)&&(this.Nr.delete(m),d.push(this.removeMatchingKeysForTargetId(t,b.targetId)),u++)}),Me.waitFor(d).next(()=>u)}getTargetCount(t){return Me.resolve(this.targetCount)}getTargetData(t,r){const o=this.Nr.get(r)||null;return Me.resolve(o)}addMatchingKeys(t,r,o){return this.Br.Rr(r,o),Me.resolve()}removeMatchingKeys(t,r,o){this.Br.mr(r,o);const u=this.persistence.referenceDelegate,d=[];return u&&r.forEach(m=>{d.push(u.markPotentiallyOrphaned(t,m))}),Me.waitFor(d)}removeMatchingKeysForTargetId(t,r){return this.Br.gr(r),Me.resolve()}getMatchingKeysForTargetId(t,r){const o=this.Br.yr(r);return Me.resolve(o)}containsKey(t,r){return Me.resolve(this.Br.containsKey(r))}}class Nc{constructor(t,r){this.qr={},this.overlays={},this.Qr=new ne(0),this.Kr=!1,this.Kr=!0,this.$r=new df,this.referenceDelegate=t(this),this.Ur=new Bu(this),this.indexManager=new Kp,this.remoteDocumentCache=new Od(o=>this.referenceDelegate.Wr(o)),this.serializer=new zs(r),this.Gr=new Xp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Yp,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let o=this.qr[t.toKey()];return o||(o=new Pa(r,this.referenceDelegate),this.qr[t.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,r,o){it("MemoryPersistence","Starting transaction:",t);const u=new ju(this.Qr.next());return this.referenceDelegate.zr(),o(u).next(d=>this.referenceDelegate.jr(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Hr(t,r){return Me.or(Object.values(this.qr).map(o=>()=>o.containsKey(t,r)))}}class ju extends Xn{constructor(t){super(),this.currentSequenceNumber=t}}class $u{constructor(t){this.persistence=t,this.Jr=new nu,this.Yr=null}static Zr(t){return new $u(t)}get Xr(){if(this.Yr)return this.Yr;throw St()}addReference(t,r,o){return this.Jr.addReference(o,r),this.Xr.delete(o.toString()),Me.resolve()}removeReference(t,r,o){return this.Jr.removeReference(o,r),this.Xr.add(o.toString()),Me.resolve()}markPotentiallyOrphaned(t,r){return this.Xr.add(r.toString()),Me.resolve()}removeTarget(t,r){this.Jr.gr(r.targetId).forEach(u=>this.Xr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,r.targetId).next(u=>{u.forEach(d=>this.Xr.add(d.toString()))}).next(()=>o.removeTargetData(t,r))}zr(){this.Yr=new Set}jr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Me.forEach(this.Xr,o=>{const u=we.fromPath(o);return this.ei(t,u).next(d=>{d||r.removeEntry(u,Xt.min())})}).next(()=>(this.Yr=null,r.apply(t)))}updateLimboDocument(t,r){return this.ei(t,r).next(o=>{o?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(t){return 0}ei(t,r){return Me.or([()=>Me.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Hr(t,r)])}}class Nd{constructor(t){this.serializer=t}O(t,r,o,u){const d=new Lr("createOrUpgrade",r);var N;o<1&&u>=1&&(t.createObjectStore("owner"),(N=t).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",on,{unique:!0}),N.createObjectStore("documentMutations"),lc(t),function(N){N.createObjectStore("remoteDocuments")}(t));let m=Me.resolve();return o<3&&u>=3&&(0!==o&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(t),lc(t)),m=m.next(()=>function(N){const H=N.store("targetGlobal"),re={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xt.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",re)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(N,H){return H.store("mutations").U().next(re=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",on,{unique:!0});const pe=H.store("mutations"),Re=re.map(ot=>pe.put(ot));return Me.waitFor(Re)})}(t,d))),m=m.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),o<5&&u>=5&&(m=m.next(()=>this.ni(d))),o<6&&u>=6&&(m=m.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(t),this.ri(d)))),o<7&&u>=7&&(m=m.next(()=>this.ii(d))),o<8&&u>=8&&(m=m.next(()=>this.si(t,d))),o<9&&u>=9&&(m=m.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(t)})),o<10&&u>=10&&(m=m.next(()=>this.oi(d))),o<11&&u>=11&&(m=m.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),o<12&&u>=12&&(m=m.next(()=>{!function(N){const H=N.createObjectStore("documentOverlays",{keyPath:Nn});H.createIndex("collectionPathOverlayIndex",cr,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",Co,{unique:!1})}(t)})),o<13&&u>=13&&(m=m.next(()=>function(N){const H=N.createObjectStore("remoteDocumentsV14",{keyPath:Ai});H.createIndex("documentKeyIndex",ps),H.createIndex("collectionGroupIndex",qi)}(t)).next(()=>this._i(t,d)).next(()=>t.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>this.ai(t,d))),o<15&&u>=15&&(m=m.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:kr}).createIndex("sequenceNumberIndex",ui,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:gi}).createIndex("documentKeyIndex",ri,{unique:!1})}(t))),o<16&&u>=16&&(m=m.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),o<17&&u>=17&&(m=m.next(()=>{!function(N){N.createObjectStore("globals",{keyPath:"name"})}(t)})),m}ri(t){let r=0;return t.store("remoteDocuments").J((o,u)=>{r+=Sd(u)}).next(()=>{const o={byteSize:r};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}ni(t){const r=t.store("mutationQueues"),o=t.store("mutations");return r.U().next(u=>Me.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.U("userMutationsIndex",m).next(b=>Me.forEach(b,N=>{mt(N.userId===d.userId);const H=Mr(this.serializer,N);return bd(t,d.userId,H).next(()=>{})}))}))}ii(t){const r=t.store("targetDocuments"),o=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.J((m,b)=>{const N=new Ln(m),H=[0,Xe(N)];d.push(r.get(H).next(re=>re?Me.resolve():r.put({targetId:0,path:Xe(N),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Me.waitFor(d))})}si(t,r){t.createObjectStore("collectionParents",{keyPath:Yn});const o=r.store("collectionParents"),u=new kt,d=m=>{if(u.add(m)){const b=m.lastSegment(),N=m.popLast();return o.put({collectionId:b,parent:Xe(N)})}};return r.store("remoteDocuments").J({H:!0},(m,b)=>{const N=new Ln(m);return d(N.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([m,b,N],H)=>{const re=$n(b);return d(re.popLast())}))}oi(t){const r=t.store("targets");return r.J((o,u)=>{const d=ja(u),m=Jc(this.serializer,d);return r.put(m)})}_i(t,r){const o=r.store("remoteDocuments"),u=[];return o.J((d,m)=>{const b=r.store("remoteDocumentsV14"),N=(pe=m,pe.document?new we(Ln.fromString(pe.document.name).popFirst(5)):pe.noDocument?we.fromSegments(pe.noDocument.path):pe.unknownDocument?we.fromSegments(pe.unknownDocument.path):St()).path.toArray(),H={prefixPath:N.slice(0,N.length-2),collectionGroup:N[N.length-2],documentId:N[N.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};var pe;u.push(b.put(H))}).next(()=>Me.waitFor(u))}ai(t,r){const o=r.store("mutations"),u=Uu(this.serializer),d=new Nc($u.Zr,this.serializer.ct);return o.U().next(m=>{const b=new Map;return m.forEach(N=>{var H;let re=null!==(H=b.get(N.userId))&&void 0!==H?H:Un();Mr(this.serializer,N).keys().forEach(pe=>re=re.add(pe)),b.set(N.userId,re)}),Me.forEach(b,(N,H)=>{const re=new Jt(H),pe=Dl.lt(this.serializer,re),Re=d.getIndexManager(re),ot=eu.lt(re,this.serializer,Re,d.referenceDelegate);return new lf(u,ot,pe,Re).recalculateAndSaveOverlaysForDocumentKeys(new Js(r,ne.oe),N).next()})})}}function lc(a){a.createObjectStore("targetDocuments",{keyPath:Nr}).createIndex("documentTargetsIndex",pi,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Cr,{unique:!0}),a.createObjectStore("targetGlobal")}const Ma="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ll{constructor(t,r,o,u,d,m,b,N,H,re,pe=17){if(this.allowTabSynchronization=t,this.persistenceKey=r,this.clientId=o,this.ui=d,this.window=m,this.document=b,this.ci=H,this.li=re,this.hi=pe,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=Re=>Promise.resolve(),!Ll.D())throw new Mt(nt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new af(this,u),this.Ai=r+"main",this.serializer=new zs(N),this.Ri=new Jr(this.Ai,this.hi,new Nd(this.serializer)),this.$r=new tf,this.Ur=new qp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Uu(this.serializer),this.Gr=new Go,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===re&&yn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Mt(nt.FAILED_PRECONDITION,Ma);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new ne(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){var r=this;return this.di=function(){var o=(0,ae.A)(function*(u){if(r.started)return t(u)});return function(u){return o.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(function(){var r=(0,ae.A)(function*(o){null===o.newVersion&&(yield t())});return function(o){return r.apply(this,arguments)}}())}setNetworkEnabled(t){var r=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget((0,ae.A)(function*(){r.started&&(yield r.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Ul(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(r=>this.isPrimary&&!r?this.bi(t).next(()=>!1):!!r&&this.Di(t).next(()=>!0))).catch(t=>{if(fs(t))return it("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return it("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return dc(t).get("owner").next(r=>Me.resolve(this.vi(r)))}Ci(t){return Ul(t).delete(this.clientId)}Fi(){var t=this;return(0,ae.A)(function*(){if(t.isPrimary&&!t.Mi(t.Ei,18e5)){t.Ei=Date.now();const r=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=wr(o,"clientMetadata");return u.U().next(d=>{const m=t.xi(d,18e5),b=d.filter(N=>-1===m.indexOf(N));return Me.forEach(b,N=>u.delete(N.clientId)).next(()=>b)})}).catch(()=>[]);if(t.Vi)for(const o of r)t.Vi.removeItem(t.Oi(o.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?Me.resolve(!0):dc(t).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Mt(nt.FAILED_PRECONDITION,Ma);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ul(t).U().next(o=>void 0===this.xi(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(r=>(this.isPrimary!==r&&it("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var t=this;return(0,ae.A)(function*(){t.Kr=!1,t.Li(),t.Ti&&(t.Ti.cancel(),t.Ti=null),t.Bi(),t.ki(),yield t.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const o=new Js(r,ne.oe);return t.bi(o).next(()=>t.Ci(o))}),t.Ri.close(),t.qi()})()}xi(t,r){return t.filter(o=>this.Mi(o.updateTimeMs,r)&&!this.Ni(o.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>Ul(t).U().next(r=>this.xi(r,18e5).map(o=>o.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,r){return eu.lt(t,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Ol(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return Dl.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,r,o){it("IndexedDbPersistence","Starting transaction:",t);const u="readonly"===r?"readonly":"readwrite",d=17===(N=this.hi)?qo:16===N?sr:15===N?ko:14===N?va:13===N?ya:12===N?wo:11===N?Qi:void St();var N;let m;return this.Ri.runTransaction(t,u,d,b=>(m=new Js(b,this.Qr?this.Qr.next():ne.oe),"readwrite-primary"===r?this.wi(m).next(N=>!!N||this.Si(m)).next(N=>{if(!N)throw yn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Mt(nt.FAILED_PRECONDITION,Wn);return o(m)}).next(N=>this.Di(m).next(()=>N)):this.Ki(m).next(()=>o(m)))).then(b=>(m.raiseOnCommittedEvent(),b))}Ki(t){return dc(t).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Mt(nt.FAILED_PRECONDITION,Ma)})}Di(t){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dc(t).put("owner",r)}static D(){return Jr.D()}bi(t){const r=dc(t);return r.get("owner").next(o=>this.vi(o)?(it("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Me.resolve())}Mi(t,r){const o=Date.now();return!(t<o-r||t>o&&(yn(`Detected an update time that is in the future: ${t} > ${o}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;(0,ce.nr)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var r;try{const o=null!==(null===(r=this.Vi)||void 0===r?void 0:r.getItem(this.Oi(t)));return it("IndexedDbPersistence",`Client '${t}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return yn("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){yn("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function dc(a){return wr(a,"owner")}function Ul(a){return wr(a,"clientMetadata")}function xd(a,t){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+t+"/"+r+"/"}class kd{constructor(t,r,o,u){this.targetId=t,this.fromCache=r,this.$i=o,this.Ui=u}static Wi(t,r){let o=Un(),u=Un();for(const d of r.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new kd(t,r.fromCache,o,u)}}class I_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Jp{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,ce.nr)()?8:rs((0,ce.ZQ)())>0?6:4}initialize(t,r){this.Ji=t,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(t,r,o,u){const d={result:null};return this.Yi(t,r).next(m=>{d.result=m}).next(()=>{if(!d.result)return this.Zi(t,r,u,o).next(m=>{d.result=m})}).next(()=>{if(d.result)return;const m=new I_;return this.Xi(t,r,m).next(b=>{if(d.result=b,this.zi)return this.es(t,r,m,b.size)})}).next(()=>d.result)}es(t,r,o,u){return o.documentReadCount<this.ji?(En()<=et.$b.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",lt(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Me.resolve()):(En()<=et.$b.DEBUG&&it("QueryEngine","Query:",lt(r),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Hi*u?(En()<=et.$b.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",lt(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,I(r))):Me.resolve())}Yi(t,r){if(ji(r))return Me.resolve(null);let o=I(r);return this.indexManager.getIndexType(t,o).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=fe(r,null,"F"),o=I(r)),this.indexManager.getDocumentsMatchingTarget(t,o).next(d=>{const m=Un(...d);return this.Ji.getDocuments(t,m).next(b=>this.indexManager.getMinOffset(t,o).next(N=>{const H=this.ts(r,b);return this.ns(r,H,m,N.readTime)?this.Yi(t,fe(r,null,"F")):this.rs(t,H,r,N)}))})))}Zi(t,r,o,u){return ji(r)||u.isEqual(Xt.min())?Me.resolve(null):this.Ji.getDocuments(t,o).next(d=>{const m=this.ts(r,d);return this.ns(r,m,o,u)?Me.resolve(null):(En()<=et.$b.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),lt(r)),this.rs(t,m,r,me(u,-1)).next(b=>b))})}ts(t,r){let o=new Tr(gn(t));return r.forEach((u,d)=>{Pt(t,d)&&(o=o.add(d))}),o}ns(t,r,o,u){if(null===t.limit)return!1;if(o.size!==r.size)return!0;const d="F"===t.limitType?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Xi(t,r,o){return En()<=et.$b.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",lt(r)),this.Ji.getDocumentsMatchingQuery(t,r,Ft.min(),o)}rs(t,r,o,u){return this.Ji.getDocumentsMatchingQuery(t,o,u).next(d=>(r.forEach(m=>{d=d.insert(m.key,m)}),d))}}class Bl{constructor(t,r,o,u){this.persistence=t,this.ss=r,this.serializer=u,this.os=new Sr(Ht),this._s=new Kn(d=>Bo(d),To),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(o)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.os))}}function ru(a,t,r,o){return new Bl(a,t,r,o)}function Zp(a,t){return xc.apply(this,arguments)}function xc(){return(xc=(0,ae.A)(function*(a,t){const r=Ot(a);return yield r.persistence.runTransaction("Handle user change","readonly",o=>{let u;return r.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,r.ls(t),r.mutationQueue.getAllMutationBatches(o))).next(d=>{const m=[],b=[];let N=Un();for(const H of u){m.push(H.batchId);for(const re of H.mutations)N=N.add(re.key)}for(const H of d){b.push(H.batchId);for(const re of H.mutations)N=N.add(re.key)}return r.localDocuments.getDocuments(o,N).next(H=>({hs:H,removedBatchIds:m,addedBatchIds:b}))})})})).apply(this,arguments)}function h(a){const t=Ot(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Ur.getLastRemoteSnapshotVersion(r))}function A(a,t,r){let o=Un(),u=Un();return r.forEach(d=>o=o.add(d)),t.getEntries(a,o).next(d=>{let m=Dn();return r.forEach((b,N)=>{const H=d.get(b);N.isFoundDocument()!==H.isFoundDocument()&&(u=u.add(b)),N.isNoDocument()&&N.version.isEqual(Xt.min())?(t.removeEntry(b,N.readTime),m=m.insert(b,N)):!H.isValidDocument()||N.version.compareTo(H.version)>0||0===N.version.compareTo(H.version)&&H.hasPendingWrites?(t.addEntry(N),m=m.insert(b,N)):it("LocalStore","Ignoring outdated watch update for ",b,". Current version:",H.version," Watch version:",N.version)}),{Ps:m,Is:u}})}function W(a,t){const r=Ot(a);return r.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===t&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}function oe(a,t){const r=Ot(a);return r.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return r.Ur.getTargetData(o,t).next(d=>d?(u=d,Me.resolve(u)):r.Ur.allocateTargetId(o).next(m=>(u=new mo(t,m,"TargetPurposeListen",o.currentSequenceNumber),r.Ur.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=r.os.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.os=r.os.insert(o.targetId,o),r._s.set(t,o.targetId)),o})}function Fe(a,t,r){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,ae.A)(function*(a,t,r){const o=Ot(a),u=o.os.get(t),d=r?"readwrite":"readwrite-primary";try{r||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!fs(m))throw m;it("LocalStore",`Failed to update sequence numbers for target ${t}: ${m}`)}o.os=o.os.remove(t),o._s.delete(u.target)})).apply(this,arguments)}function jt(a,t,r){const o=Ot(a);let u=Xt.min(),d=Un();return o.persistence.runTransaction("Execute query","readwrite",m=>function(N,H,re){const pe=Ot(N),Re=pe._s.get(re);return void 0!==Re?Me.resolve(pe.os.get(Re)):pe.Ur.getTargetData(H,re)}(o,m,I(t)).next(b=>{if(b)return u=b.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(m,b.targetId).next(N=>{d=N})}).next(()=>o.ss.getDocumentsMatchingQuery(m,t,r?u:Xt.min(),r?d:Un())).next(b=>(Dr(o,cn(t),b),{documents:b,Ts:d})))}function Cn(a,t){const r=Ot(a),o=Ot(r.Ur),u=r.os.get(t);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",d=>o.ot(d,t).next(m=>m?m.target:null))}function zn(a,t){const r=Ot(a),o=r.us.get(t)||Xt.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.cs.getAllFromCollectionGroup(u,t,me(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Dr(r,t,u),u))}function Dr(a,t,r){let o=a.us.get(t)||Xt.min();r.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),a.us.set(t,o)}function Ra(){return(Ra=(0,ae.A)(function*(a,t,r,o){const u=Ot(a);let d=Un(),m=Dn();for(const H of r){const re=t.Es(H.metadata.name);H.document&&(d=d.add(re));const pe=t.ds(H);pe.setReadTime(t.As(H.metadata.readTime)),m=m.insert(re,pe)}const b=u.cs.newChangeBuffer({trackRemovals:!0}),N=yield oe(u,(re=o,I(Yi(Ln.fromString(`__bundle__/docs/${re}`)))));var re;return u.persistence.runTransaction("Apply bundle documents","readwrite",H=>A(H,b,m).next(re=>(b.apply(H),re)).next(re=>u.Ur.removeMatchingKeysForTargetId(H,N.targetId).next(()=>u.Ur.addMatchingKeys(H,d,N.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(H,re.Ps,re.Is)).next(()=>re.Ps)))})).apply(this,arguments)}function Hu(a,t){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,ae.A)(function*(a,t,r=Un()){const o=yield oe(a,I(Ws(t.bundledQuery))),u=Ot(a);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=Li(t.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u.Gr.saveNamedQuery(d,t);const b=o.withResumeToken(Fr.EMPTY_BYTE_STRING,m);return u.os=u.os.insert(b.targetId,b),u.Ur.updateTargetData(d,b).next(()=>u.Ur.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Ur.addMatchingKeys(d,r,o.targetId)).next(()=>u.Gr.saveNamedQuery(d,t))})})).apply(this,arguments)}function zu(a,t){return`firestore_clients_${a}_${t}`}function jl(a,t,r){let o=`firestore_mutations_${a}_${r}`;return t.isAuthenticated()&&(o+=`_${t.uid}`),o}function $l(a,t){return`firestore_targets_${a}_${t}`}class za{constructor(t,r,o,u){this.user=t,this.batchId=r,this.state=o,this.error=u}static Rs(t,r,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new Mt(u.error.code,u.error.message))),m?new za(t,r,u.state,d):(yn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${o}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class na{constructor(t,r,o){this.targetId=t,this.state=r,this.error=o}static Rs(t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Mt(o.error.code,o.error.message))),d?new na(t,o.state,u):(yn("SharedClientState",`Failed to parse target state for ID '${t}': ${r}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Wu{constructor(t,r){this.clientId=t,this.activeTargetIds=r}static Rs(t,r){const o=JSON.parse(r);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=po();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=pt(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new Wu(t,d):(yn("SharedClientState",`Failed to parse client data for instance '${t}': ${r}`),null)}}class iu{constructor(t,r){this.clientId=t,this.onlineState=r}static Rs(t){const r=JSON.parse(t);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new iu(r.clientId,r.onlineState):(yn("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Ku{constructor(){this.activeTargetIds=po()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class hc{constructor(t,r,o,u,d){this.window=t,this.ui=r,this.persistenceKey=o,this.ps=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Sr(Ht),this.started=!1,this.bs=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.Ds=zu(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new Ku),this.Cs=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,ae.A)(function*(){const r=yield t.syncEngine.Qi();for(const u of r){if(u===t.ps)continue;const d=t.getItem(zu(t.persistenceKey,u));if(d){const m=Wu.Rs(u,d);m&&(t.Ss=t.Ss.insert(m.clientId,m))}}t.Ns();const o=t.storage.getItem(t.xs);if(o){const u=t.Ls(o);u&&t.Bs(u)}for(const u of t.bs)t.ws(u);t.bs=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.vs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(t){let r=!1;return this.Ss.forEach((o,u)=>{u.activeTargetIds.has(t)&&(r=!0)}),r}addPendingMutation(t){this.qs(t,"pending")}updateMutationState(t,r,o){this.qs(t,r,o),this.Qs(t)}addLocalQueryTarget(t){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem($l(this.persistenceKey,t));if(o){const u=na.Rs(t,o);u&&(r=u.state)}}return this.Ks.fs(t),this.Ns(),r}removeLocalQueryTarget(t){this.Ks.gs(t),this.Ns()}isLocalQueryTarget(t){return this.Ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem($l(this.persistenceKey,t))}updateQueryState(t,r,o){this.$s(t,r,o)}handleUserChange(t,r,o){r.forEach(u=>{this.Qs(u)}),this.currentUser=t,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(t){this.Us(t)}notifyBundleLoaded(t){this.Ws(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(t){const r=this.storage.getItem(t);return it("SharedClientState","READ",t,r),r}setItem(t,r){it("SharedClientState","SET",t,r),this.storage.setItem(t,r)}removeItem(t){it("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ws(t){var r=this;const o=t;if(o.storageArea===this.storage){if(it("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Ds)return void yn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,ae.A)(function*(){if(r.started){if(null!==o.key)if(r.Cs.test(o.key)){if(null==o.newValue){const u=r.Gs(o.key);return r.zs(u,null)}{const u=r.js(o.key,o.newValue);if(u)return r.zs(u.clientId,u)}}else if(r.Fs.test(o.key)){if(null!==o.newValue){const u=r.Hs(o.key,o.newValue);if(u)return r.Js(u)}}else if(r.Ms.test(o.key)){if(null!==o.newValue){const u=r.Ys(o.key,o.newValue);if(u)return r.Zs(u)}}else if(o.key===r.xs){if(null!==o.newValue){const u=r.Ls(o.newValue);if(u)return r.Bs(u)}}else if(o.key===r.vs){const u=function(m){let b=ne.oe;if(null!=m)try{const N=JSON.parse(m);mt("number"==typeof N),b=N}catch(N){yn("SharedClientState","Failed to read sequence number from WebStorage",N)}return b}(o.newValue);u!==ne.oe&&r.sequenceNumberHandler(u)}else if(o.key===r.Os){const u=r.Xs(o.newValue);yield Promise.all(u.map(d=>r.syncEngine.eo(d)))}}else r.bs.push(o)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(t,r,o){const u=new za(this.currentUser,t,r,o),d=jl(this.persistenceKey,this.currentUser,t);this.setItem(d,u.Vs())}Qs(t){const r=jl(this.persistenceKey,this.currentUser,t);this.removeItem(r)}Us(t){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:t}))}$s(t,r,o){const u=$l(this.persistenceKey,t),d=new na(t,r,o);this.setItem(u,d.Vs())}Ws(t){const r=JSON.stringify(Array.from(t));this.setItem(this.Os,r)}Gs(t){const r=this.Cs.exec(t);return r?r[1]:null}js(t,r){const o=this.Gs(t);return Wu.Rs(o,r)}Hs(t,r){const o=this.Fs.exec(t),u=Number(o[1]);return za.Rs(new Jt(void 0!==o[2]?o[2]:null),u,r)}Ys(t,r){const o=this.Ms.exec(t),u=Number(o[1]);return na.Rs(u,r)}Ls(t){return iu.Rs(t)}Xs(t){return JSON.parse(t)}Js(t){var r=this;return(0,ae.A)(function*(){if(t.user.uid===r.currentUser.uid)return r.syncEngine.no(t.batchId,t.state,t.error);it("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Zs(t){return this.syncEngine.ro(t.targetId,t.state,t.error)}zs(t,r){const o=r?this.Ss.insert(t,r):this.Ss.remove(t),u=this.ks(this.Ss),d=this.ks(o),m=[],b=[];return d.forEach(N=>{u.has(N)||m.push(N)}),u.forEach(N=>{d.has(N)||b.push(N)}),this.syncEngine.io(m,b).then(()=>{this.Ss=o})}Bs(t){this.Ss.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ks(t){let r=po();return t.forEach((o,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class Wa{constructor(){this.so=new Ku,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,o){}addLocalQueryTarget(t){return this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,r,o){this.oo[t]=r}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Ku,Promise.resolve()}handleUserChange(t,r,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Os{_o(t){}shutdown(){}}class C_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){it("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){it("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Fd=null;function Vd(){return null===Fd?Fd=268435456+Math.round(2147483648*Math.random()):Fd++,"0x"+Fd.toString(16)}const Jv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class w_{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}const qs="WebChannelConnection";class Zv extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const o=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+r.host,this.vo=`projects/${u}/databases/${d}`,this.Co="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${d}`}get Fo(){return!1}Mo(r,o,u,d,m){const b=Vd(),N=this.xo(r,o.toUriEncodedString());it("RestConnection",`Sending RPC '${r}' ${b}:`,N,u);const H={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(H,d,m),this.No(r,N,H,u).then(re=>(it("RestConnection",`Received RPC '${r}' ${b}: `,re),re),re=>{throw Qn("RestConnection",`RPC '${r}' ${b} failed with error: `,re,"url: ",N,"request:",u),re})}Lo(r,o,u,d,m,b){return this.Mo(r,o,u,d,m)}Oo(r,o,u){r["X-Goog-Api-Client"]="gl-js/ fire/"+en,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((d,m)=>r[m]=d),u&&u.headers.forEach((d,m)=>r[m]=d)}xo(r,o){return`${this.Do}/v1/${o}:${Jv[r]}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,r,o,u){const d=Vd();return new Promise((m,b)=>{const N=new fn;N.setWithCredentials(!0),N.listenOnce(Qe.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case ct.NO_ERROR:const re=N.getResponseJson();it(qs,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(re)),m(re);break;case ct.TIMEOUT:it(qs,`RPC '${t}' ${d} timed out`),b(new Mt(nt.DEADLINE_EXCEEDED,"Request time out"));break;case ct.HTTP_ERROR:const pe=N.getStatus();if(it(qs,`RPC '${t}' ${d} failed with status:`,pe,"response text:",N.getResponseText()),pe>0){let Re=N.getResponseJson();Array.isArray(Re)&&(Re=Re[0]);const ot=Re?.error;if(ot&&ot.status&&ot.message){const Bt=function(Wt){const Bn=Wt.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(Bn)>=0?Bn:nt.UNKNOWN}(ot.status);b(new Mt(Bt,ot.message))}else b(new Mt(nt.UNKNOWN,"Server responded with status "+N.getStatus()))}else b(new Mt(nt.UNAVAILABLE,"Connection failed."));break;default:St()}}finally{it(qs,`RPC '${t}' ${d} completed.`)}});const H=JSON.stringify(u);it(qs,`RPC '${t}' ${d} sending request:`,u),N.send(r,"POST",H,o,15)})}Bo(t,r,o){const u=Vd(),d=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=Gt(),b=Ze(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},H=this.longPollingOptions.timeoutSeconds;void 0!==H&&(N.longPollingTimeout=Math.round(1e3*H)),this.useFetchStreams&&(N.xmlHttpFactory=new An({})),this.Oo(N.initMessageHeaders,r,o),N.encodeInitMessageHeaders=!0;const re=d.join("");it(qs,`Creating RPC '${t}' stream ${u}: ${re}`,N);const pe=m.createWebChannel(re,N);let Re=!1,ot=!1;const Bt=new w_({Io:Wt=>{ot?it(qs,`Not sending because RPC '${t}' stream ${u} is closed:`,Wt):(Re||(it(qs,`Opening RPC '${t}' stream ${u} transport.`),pe.open(),Re=!0),it(qs,`RPC '${t}' stream ${u} sending:`,Wt),pe.send(Wt))},To:()=>pe.close()}),Yt=(Wt,Bn,Zn)=>{Wt.listen(Bn,kn=>{try{Zn(kn)}catch(ur){setTimeout(()=>{throw ur},0)}})};return Yt(pe,ke.EventType.OPEN,()=>{ot||(it(qs,`RPC '${t}' stream ${u} transport opened.`),Bt.yo())}),Yt(pe,ke.EventType.CLOSE,()=>{ot||(ot=!0,it(qs,`RPC '${t}' stream ${u} transport closed`),Bt.So())}),Yt(pe,ke.EventType.ERROR,Wt=>{ot||(ot=!0,Qn(qs,`RPC '${t}' stream ${u} transport errored:`,Wt),Bt.So(new Mt(nt.UNAVAILABLE,"The operation could not be completed")))}),Yt(pe,ke.EventType.MESSAGE,Wt=>{var Bn;if(!ot){const Zn=Wt.data[0];mt(!!Zn);const ur=Zn.error||(null===(Bn=Zn[0])||void 0===Bn?void 0:Bn.error);if(ur){it(qs,`RPC '${t}' stream ${u} received error:`,ur);const Hr=ur.status;let Ar=function(Ge){const rt=hi[Ge];if(void 0!==rt)return nc(rt)}(Hr),tt=ur.message;void 0===Ar&&(Ar=nt.INTERNAL,tt="Unknown error status: "+Hr+" with message "+ur.message),ot=!0,Bt.So(new Mt(Ar,tt)),pe.close()}else it(qs,`RPC '${t}' stream ${u} received:`,Zn),Bt.bo(Zn)}}),Yt(b,vt.STAT_EVENT,Wt=>{Wt.stat===_t.PROXY?it(qs,`RPC '${t}' stream ${u} detected buffering proxy`):Wt.stat===_t.NOPROXY&&it(qs,`RPC '${t}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{Bt.wo()},0),Bt}}function eg(){return typeof window<"u"?window:null}function Hl(){return typeof document<"u"?document:null}function su(a){return new ro(a,!0)}class hf{constructor(t,r,o=1e3,u=1.5,d=6e4){this.ui=t,this.timerId=r,this.ko=o,this.qo=u,this.Qo=d,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const r=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),u=Math.max(0,r-o);u>0&&it("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,u,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class T_{constructor(t,r,o,u,d,m,b,N){this.ui=t,this.Ho=o,this.Jo=u,this.connection=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=b,this.listener=N,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hf(t,r)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var t=this;return(0,ae.A)(function*(){t.n_()&&(yield t.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){var t=this;return(0,ae.A)(function*(){if(t.r_())return t.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,r){var o=this;return(0,ae.A)(function*(){o.u_(),o.c_(),o.t_.cancel(),o.Yo++,4!==t?o.t_.reset():r&&r.code===nt.RESOURCE_EXHAUSTED?(yn(r.toString()),yn("Using maximum backoff delay to prevent overloading the backend."),o.t_.Wo()):r&&r.code===nt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.l_(),o.stream.close(),o.stream=null),o.state=t,yield o.listener.mo(r)})()}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Yo===r&&this.P_(o,u)},o=>{t(()=>{const u=new Mt(nt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(u)})})}P_(t,r){const o=this.h_(this.Yo);this.stream=this.T_(t,r),this.stream.Eo(()=>{o(()=>this.listener.Eo())}),this.stream.Ro(()=>{o(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(u=>{o(()=>this.I_(u))}),this.stream.onMessage(u=>{o(()=>1==++this.e_?this.E_(u):this.onNext(u))})}i_(){var t=this;this.state=5,this.t_.Go((0,ae.A)(function*(){t.state=0,t.start()}))}I_(t){return it("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return r=>{this.ui.enqueueAndForget(()=>this.Yo===t?r():(it("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eE extends T_{constructor(t,r,o,u,d,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,o,u,m),this.serializer=d}T_(t,r){return this.connection.Bo("Listen",t,r)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const r=function Tl(a,t){let r;if("targetChange"in t){const o="NO_CHANGE"===(H=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:St(),u=t.targetChange.targetIds||[],d=function(H,re){return H.useProto3Json?(mt(void 0===re||"string"==typeof re),Fr.fromBase64String(re||"")):(mt(void 0===re||re instanceof Buffer||re instanceof Uint8Array),Fr.fromUint8Array(re||new Uint8Array))}(a,t.targetChange.resumeToken),m=t.targetChange.cause,b=m&&function(H){const re=void 0===H.code?nt.UNKNOWN:nc(H.code);return new Mt(re,H.message||"")}(m);r=new Sa(o,u,d,b||null)}else if("documentChange"in t){const o=t.documentChange,u=ha(a,o.document.name),d=Li(o.document.updateTime),m=o.document.createTime?Li(o.document.createTime):Xt.min(),b=new Ur({mapValue:{fields:o.document.fields}}),N=lr.newFoundDocument(u,d,m,b);r=new Ao(o.targetIds||[],o.removedTargetIds||[],N.key,N)}else if("documentDelete"in t){const o=t.documentDelete,u=ha(a,o.document),d=o.readTime?Li(o.readTime):Xt.min(),m=lr.newNoDocument(u,d);r=new Ao([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in t){const o=t.documentRemove,u=ha(a,o.document);r=new Ao([],o.removedTargetIds||[],u,null)}else{if(!("filter"in t))return St();{const o=t.filter,{count:u=0,unchangedNames:d}=o,m=new El(u,d);r=new ba(o.targetId,m)}}var H;return r}(this.serializer,t),o=function(d){if(!("targetChange"in d))return Xt.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?Xt.min():m.readTime?Li(m.readTime):Xt.min()}(t);return this.listener.d_(r,o)}A_(t){const r={};r.database=Ru(this.serializer),r.addTarget=function(d,m){let b;const N=m.target;if(b=ua(N)?{documents:P(d,N)}:{query:C(d,N)._t},b.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){b.resumeToken=Qc(d,m.resumeToken);const H=La(d,m.expectedCount);null!==H&&(b.expectedCount=H)}else if(m.snapshotVersion.compareTo(Xt.min())>0){b.readTime=sc(d,m.snapshotVersion.toTimestamp());const H=La(d,m.expectedCount);null!==H&&(b.expectedCount=H)}return b}(this.serializer,t);const o=function te(a,t){const r=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return St()}}(t.purpose);return null==r?null:{"goog-listen-tags":r}}(0,t);o&&(r.labels=o),this.a_(r)}R_(t){const r={};r.database=Ru(this.serializer),r.removeTarget=t,this.a_(r)}}class tE extends T_{constructor(t,r,o,u,d,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,o,u,m),this.serializer=d}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,r){return this.connection.Bo("Write",t,r)}E_(t){return mt(!!t.streamToken),this.lastStreamToken=t.streamToken,mt(!t.writeResults||0===t.writeResults.length),this.listener.f_()}onNext(t){mt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const r=function v(a,t){return a&&a.length>0?(mt(void 0!==t),a.map(r=>function(u,d){let m=Li(u.updateTime?u.updateTime:d);return m.isEqual(Xt.min())&&(m=Li(d)),new Pr(m,u.transformResults||[])}(r,t))):[]}(t.writeResults,t.commitTime),o=Li(t.commitTime);return this.listener.g_(o,r)}p_(){const t={};t.database=Ru(this.serializer),this.a_(t)}m_(t){const r={streamToken:this.lastStreamToken,writes:t.map(o=>Ou(this.serializer,o))};this.a_(r)}}class D_ extends class{}{constructor(t,r,o,u){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=o,this.serializer=u,this.y_=!1}w_(){if(this.y_)throw new Mt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,r,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Mo(t,Ua(r,o),u,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Mt(nt.UNKNOWN,d.toString())})}Lo(t,r,o,u,d){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,b])=>this.connection.Lo(t,Ua(r,o),u,m,b,d)).catch(m=>{throw"FirebaseError"===m.name?(m.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Mt(nt.UNKNOWN,m.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class nE{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const r=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(yn(r),this.D_=!1):it("OnlineStateTracker",r)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class A_{constructor(t,r,o,u,d){var m=this;this.localStore=t,this.datastore=r,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=d,this.k_._o(b=>{o.enqueueAndForget((0,ae.A)(function*(){var N;bo(m)&&(it("RemoteStore","Restarting streams for network reachability change."),yield(N=(0,ae.A)(function*(re){const pe=Ot(re);pe.L_.add(4),yield Ud(pe),pe.q_.set("Unknown"),pe.L_.delete(4),yield Ld(pe)}),function H(re){return N.apply(this,arguments)})(m))}))}),this.q_=new nE(o,u)}}function Ld(a){return tg.apply(this,arguments)}function tg(){return(tg=(0,ae.A)(function*(a){if(bo(a))for(const t of a.B_)yield t(!0)})).apply(this,arguments)}function Ud(a){return ff.apply(this,arguments)}function ff(){return(ff=(0,ae.A)(function*(a){for(const t of a.B_)yield t(!1)})).apply(this,arguments)}function Bd(a,t){const r=Ot(a);r.N_.has(t.targetId)||(r.N_.set(t.targetId,t),jd(r)?S_(r):Wl(r).r_()&&b_(r,t))}function ao(a,t){const r=Ot(a),o=Wl(r);r.N_.delete(t),o.r_()&&ng(r,t),0===r.N_.size&&(o.r_()?o.o_():bo(r)&&r.q_.set("Unknown"))}function b_(a,t){if(a.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Xt.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Wl(a).A_(t)}function ng(a,t){a.Q_.xe(t),Wl(a).R_(t)}function S_(a){a.Q_=new Su({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>a.N_.get(t)||null,tt:()=>a.datastore.serializer.databaseId}),Wl(a).start(),a.q_.v_()}function jd(a){return bo(a)&&!Wl(a).n_()&&a.N_.size>0}function bo(a){return 0===Ot(a).L_.size}function rg(a){a.Q_=void 0}function Gl(a){return ig.apply(this,arguments)}function ig(){return(ig=(0,ae.A)(function*(a){a.q_.set("Online")})).apply(this,arguments)}function rE(a){return pf.apply(this,arguments)}function pf(){return(pf=(0,ae.A)(function*(a){a.N_.forEach((t,r)=>{b_(a,t)})})).apply(this,arguments)}function $C(a,t){return P_.apply(this,arguments)}function P_(){return(P_=(0,ae.A)(function*(a,t){rg(a),jd(a)?(a.q_.M_(t),S_(a)):a.q_.set("Unknown")})).apply(this,arguments)}function HC(a,t,r){return M_.apply(this,arguments)}function M_(){return M_=(0,ae.A)(function*(a,t,r){if(a.q_.set("Online"),t instanceof Sa&&2===t.state&&t.cause)try{yield(o=(0,ae.A)(function*(d,m){const b=m.cause;for(const N of m.targetIds)d.N_.has(N)&&(yield d.remoteSyncer.rejectListen(N,b),d.N_.delete(N),d.Q_.removeTarget(N))}),function u(d,m){return o.apply(this,arguments)})(a,t)}catch(o){it("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),yield sg(a,o)}else if(t instanceof Ao?a.Q_.Ke(t):t instanceof ba?a.Q_.He(t):a.Q_.We(t),!r.isEqual(Xt.min()))try{const o=yield h(a.localStore);r.compareTo(o)>=0&&(yield function(d,m){const b=d.Q_.rt(m);return b.targetChanges.forEach((N,H)=>{if(N.resumeToken.approximateByteSize()>0){const re=d.N_.get(H);re&&d.N_.set(H,re.withResumeToken(N.resumeToken,m))}}),b.targetMismatches.forEach((N,H)=>{const re=d.N_.get(N);if(!re)return;d.N_.set(N,re.withResumeToken(Fr.EMPTY_BYTE_STRING,re.snapshotVersion)),ng(d,N);const pe=new mo(re.target,N,H,re.sequenceNumber);b_(d,pe)}),d.remoteSyncer.applyRemoteEvent(b)}(a,r))}catch(o){it("RemoteStore","Failed to raise snapshot:",o),yield sg(a,o)}var o}),M_.apply(this,arguments)}function sg(a,t,r){return og.apply(this,arguments)}function og(){return(og=(0,ae.A)(function*(a,t,r){if(!fs(t))throw t;a.L_.add(1),yield Ud(a),a.q_.set("Offline"),r||(r=()=>h(a.localStore)),a.asyncQueue.enqueueRetryable((0,ae.A)(function*(){it("RemoteStore","Retrying IndexedDB access"),yield r(),a.L_.delete(1),yield Ld(a)}))})).apply(this,arguments)}function qu(a,t){return t().catch(r=>sg(a,r,t))}function fc(a){return gf.apply(this,arguments)}function gf(){return(gf=(0,ae.A)(function*(a){const t=Ot(a),r=ou(t);let o=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;iE(t);)try{const u=yield W(t.localStore,o);if(null===u){0===t.O_.length&&r.o_();break}o=u.batchId,ag(t,u)}catch(u){yield sg(t,u)}Ka(t)&&R_(t)})).apply(this,arguments)}function iE(a){return bo(a)&&a.O_.length<10}function ag(a,t){a.O_.push(t);const r=ou(a);r.r_()&&r.V_&&r.m_(t.mutations)}function Ka(a){return bo(a)&&!ou(a).n_()&&a.O_.length>0}function R_(a){ou(a).start()}function cg(a){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,ae.A)(function*(a){ou(a).p_()})).apply(this,arguments)}function sE(a){return mf.apply(this,arguments)}function mf(){return(mf=(0,ae.A)(function*(a){const t=ou(a);for(const r of a.O_)t.m_(r.mutations)})).apply(this,arguments)}function O_(a,t,r){return zl.apply(this,arguments)}function zl(){return(zl=(0,ae.A)(function*(a,t,r){const o=a.O_.shift(),u=go.from(o,t,r);yield qu(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),yield fc(a)})).apply(this,arguments)}function _f(a,t){return $d.apply(this,arguments)}function $d(){return $d=(0,ae.A)(function*(a,t){var r;t&&ou(a).V_&&(yield(r=(0,ae.A)(function*(u,d){if(Dc(b=d.code)&&b!==nt.ABORTED){const m=u.O_.shift();ou(u).s_(),yield qu(u,()=>u.remoteSyncer.rejectFailedWrite(m.batchId,d)),yield fc(u)}var b}),function o(u,d){return r.apply(this,arguments)})(a,t)),Ka(a)&&R_(a)}),$d.apply(this,arguments)}function N_(a,t){return ug.apply(this,arguments)}function ug(){return(ug=(0,ae.A)(function*(a,t){const r=Ot(a);r.asyncQueue.verifyOperationInProgress(),it("RemoteStore","RemoteStore received new credentials");const o=bo(r);r.L_.add(3),yield Ud(r),o&&r.q_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(t),r.L_.delete(3),yield Ld(r)})).apply(this,arguments)}function lg(a,t){return yf.apply(this,arguments)}function yf(){return(yf=(0,ae.A)(function*(a,t){const r=Ot(a);t?(r.L_.delete(2),yield Ld(r)):t||(r.L_.add(2),yield Ud(r),r.q_.set("Unknown"))})).apply(this,arguments)}function Wl(a){return a.K_||(a.K_=function(r,o,u){const d=Ot(r);return d.w_(),new eE(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:Gl.bind(null,a),Ro:rE.bind(null,a),mo:$C.bind(null,a),d_:HC.bind(null,a)}),a.B_.push(function(){var t=(0,ae.A)(function*(r){r?(a.K_.s_(),jd(a)?S_(a):a.q_.set("Unknown")):(yield a.K_.stop(),rg(a))});return function(r){return t.apply(this,arguments)}}())),a.K_}function ou(a){return a.U_||(a.U_=function(r,o,u){const d=Ot(r);return d.w_(),new tE(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:()=>Promise.resolve(),Ro:cg.bind(null,a),mo:_f.bind(null,a),f_:sE.bind(null,a),g_:O_.bind(null,a)}),a.B_.push(function(){var t=(0,ae.A)(function*(r){r?(a.U_.s_(),yield fc(a)):(yield a.U_.stop(),a.O_.length>0&&(it("RemoteStore",`Stopping write stream with ${a.O_.length} pending writes`),a.O_=[]))});return function(r){return t.apply(this,arguments)}}())),a.U_}class So{constructor(t,r,o,u,d){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,o,u,d){const m=Date.now()+o,b=new So(t,r,m,u,d);return b.start(o),b}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mt(nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function au(a,t){if(yn("AsyncQueue",`${t}: ${a}`),fs(a))return new Mt(nt.UNAVAILABLE,`${t}: ${a}`);throw a}class Xu{constructor(t){this.comparator=t?(r,o)=>t(r,o)||we.comparator(r.key,o.key):(r,o)=>we.comparator(r.key,o.key),this.keyedMap=ci(),this.sortedSet=new Sr(this.comparator)}static emptySet(t){return new Xu(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,o)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Xu)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,r){const o=new Xu;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=r,o}}class vf{constructor(){this.W_=new Sr(we.comparator)}track(t){const r=t.doc.key,o=this.W_.get(r);o?0!==t.type&&3===o.type?this.W_=this.W_.insert(r,t):3===t.type&&1!==o.type?this.W_=this.W_.insert(r,{type:o.type,doc:t.doc}):2===t.type&&2===o.type?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):2===t.type&&0===o.type?this.W_=this.W_.insert(r,{type:0,doc:t.doc}):1===t.type&&0===o.type?this.W_=this.W_.remove(r):1===t.type&&2===o.type?this.W_=this.W_.insert(r,{type:1,doc:o.doc}):0===t.type&&1===o.type?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):St():this.W_=this.W_.insert(r,t)}G_(){const t=[];return this.W_.inorderTraversal((r,o)=>{t.push(o)}),t}}class Ns{constructor(t,r,o,u,d,m,b,N,H){this.query=t,this.docs=r,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=b,this.excludesMetadataChanges=N,this.hasCachedResults=H}static fromInitialDocuments(t,r,o,u,d){const m=[];return r.forEach(b=>{m.push({type:0,doc:b})}),new Ns(t,r,Xu.emptySet(r),m,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ae(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,o=t.docChanges;if(r.length!==o.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==o[u].type||!r[u].doc.isEqual(o[u].doc))return!1;return!0}}class Hd{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class x_{constructor(){this.queries=dg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(r,o){const u=Ot(r),d=u.queries;u.queries=dg(),d.forEach((m,b)=>{for(const N of b.j_)N.onError(o)})}(this,new Mt(nt.ABORTED,"Firestore shutting down"))}}function dg(){return new Kn(a=>Ue(a),Ae)}function hg(a,t){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,ae.A)(function*(a,t){const r=Ot(a);let o=3;const u=t.query;let d=r.queries.get(u);d?!d.H_()&&t.J_()&&(o=2):(d=new Hd,o=t.J_()?0:1);try{switch(o){case 0:d.z_=yield r.onListen(u,!0);break;case 1:d.z_=yield r.onListen(u,!1);break;case 2:yield r.onFirstRemoteStoreListen(u)}}catch(m){const b=au(m,`Initialization of query '${lt(t.query)}' failed`);return void t.onError(b)}r.queries.set(u,d),d.j_.push(t),t.Z_(r.onlineState),d.z_&&t.X_(d.z_)&&pg(r)})).apply(this,arguments)}function fg(a,t){return If.apply(this,arguments)}function If(){return(If=(0,ae.A)(function*(a,t){const r=Ot(a),o=t.query;let u=3;const d=r.queries.get(o);if(d){const m=d.j_.indexOf(t);m>=0&&(d.j_.splice(m,1),0===d.j_.length?u=t.J_()?0:1:!d.H_()&&t.J_()&&(u=2))}switch(u){case 0:return r.queries.delete(o),r.onUnlisten(o,!0);case 1:return r.queries.delete(o),r.onUnlisten(o,!1);case 2:return r.onLastRemoteStoreUnlisten(o);default:return}})).apply(this,arguments)}function oE(a,t){const r=Ot(a);let o=!1;for(const u of t){const m=r.queries.get(u.query);if(m){for(const b of m.j_)b.X_(u)&&(o=!0);m.z_=u}}o&&pg(r)}function k_(a,t,r){const o=Ot(a),u=o.queries.get(t);if(u)for(const d of u.j_)d.onError(r);o.queries.delete(t)}function pg(a){a.Y_.forEach(t=>{t.next()})}var gg,F_;(F_=gg||(gg={})).ea="default",F_.Cache="cache";class mg{constructor(t,r,o){this.query=t,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(t){if(!this.options.includeMetadataChanges){const o=[];for(const u of t.docChanges)3!==u.type&&o.push(u);t=new Ns(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.na?this.ia(t)&&(this.ta.next(t),r=!0):this.sa(t,this.onlineState)&&(this.oa(t),r=!0),this.ra=t,r}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),r=!0),r}sa(t,r){return!t.fromCache||!this.J_()||(!this.options._a||!("Offline"!==r))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===r)}ia(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(t){t=Ns.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==gg.Cache}}class V_{constructor(t,r){this.aa=t,this.byteLength=r}ua(){return"metadata"in this.aa}}class _g{constructor(t){this.serializer=t}Es(t){return ha(this.serializer,t)}ds(t){return t.metadata.exists?Zh(this.serializer,t.document,!1):lr.newNoDocument(this.Es(t.metadata.name),this.As(t.metadata.readTime))}As(t){return Li(t)}}class L_{constructor(t,r,o){this.ca=t,this.localStore=r,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gd(t)}la(t){this.progress.bytesLoaded+=t.byteLength;let r=this.progress.documentsLoaded;if(t.aa.namedQuery)this.queries.push(t.aa.namedQuery);else if(t.aa.documentMetadata){this.documents.push({metadata:t.aa.documentMetadata}),t.aa.documentMetadata.exists||++r;const o=Ln.fromString(t.aa.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else t.aa.document&&(this.documents[this.documents.length-1].document=t.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(t){const r=new Map,o=new _g(this.serializer);for(const u of t)if(u.metadata.queries){const d=o.Es(u.metadata.name);for(const m of u.metadata.queries){const b=(r.get(m)||Un()).add(d);r.set(m,b)}}return r}complete(){var t=this;return(0,ae.A)(function*(){const r=yield function oo(a,t,r,o){return Ra.apply(this,arguments)}(t.localStore,new _g(t.serializer),t.documents,t.ca.id),o=t.ha(t.documents);for(const u of t.queries)yield Hu(t.localStore,u,o.get(u.name));return t.progress.taskState="Success",{progress:t.progress,Pa:t.collectionGroups,Ia:r}})()}}function Gd(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class yg{constructor(t){this.key=t}}class vg{constructor(t){this.key=t}}class Eg{constructor(t,r){this.query=t,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Un(),this.mutatedKeys=Un(),this.Aa=gn(t),this.Ra=new Xu(this.Aa)}get Va(){return this.Ta}ma(t,r){const o=r?r.fa:new vf,u=r?r.Ra:this.Ra;let d=r?r.mutatedKeys:this.mutatedKeys,m=u,b=!1;const N="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,H="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal((re,pe)=>{const Re=u.get(re),ot=Pt(this.query,pe)?pe:null,Bt=!!Re&&this.mutatedKeys.has(Re.key),Yt=!!ot&&(ot.hasLocalMutations||this.mutatedKeys.has(ot.key)&&ot.hasCommittedMutations);let Wt=!1;Re&&ot?Re.data.isEqual(ot.data)?Bt!==Yt&&(o.track({type:3,doc:ot}),Wt=!0):this.ga(Re,ot)||(o.track({type:2,doc:ot}),Wt=!0,(N&&this.Aa(ot,N)>0||H&&this.Aa(ot,H)<0)&&(b=!0)):!Re&&ot?(o.track({type:0,doc:ot}),Wt=!0):Re&&!ot&&(o.track({type:1,doc:Re}),Wt=!0,(N||H)&&(b=!0)),Wt&&(ot?(m=m.add(ot),d=Yt?d.add(re):d.delete(re)):(m=m.delete(re),d=d.delete(re)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const re="F"===this.query.limitType?m.last():m.first();m=m.delete(re.key),d=d.delete(re.key),o.track({type:1,doc:re})}return{Ra:m,fa:o,ns:b,mutatedKeys:d}}ga(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,o,u){const d=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const m=t.fa.G_();m.sort((re,pe)=>function(ot,Bt){const Yt=Wt=>{switch(Wt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St()}};return Yt(ot)-Yt(Bt)}(re.type,pe.type)||this.Aa(re.doc,pe.doc)),this.pa(o),u=null!=u&&u;const b=r&&!u?this.ya():[],N=0===this.da.size&&this.current&&!u?1:0,H=N!==this.Ea;return this.Ea=N,0!==m.length||H?{snapshot:new Ns(this.query,t.Ra,d,m,t.mutatedKeys,0===N,H,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:b}:{wa:b}}Z_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Un(),this.Ra.forEach(o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))});const r=[];return t.forEach(o=>{this.da.has(o)||r.push(new vg(o))}),this.da.forEach(o=>{t.has(o)||r.push(new yg(o))}),r}ba(t){this.Ta=t.Ts,this.da=Un();const r=this.ma(t.documents);return this.applyChanges(r,!0)}Da(){return Ns.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class U_{constructor(t,r,o){this.query=t,this.targetId=r,this.view=o}}class aE{constructor(t){this.key=t,this.va=!1}}class cE{constructor(t,r,o,u,d,m){this.localStore=t,this.remoteStore=r,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.Ca={},this.Fa=new Kn(b=>Ue(b),Ae),this.Ma=new Map,this.xa=new Set,this.Oa=new Sr(we.comparator),this.Na=new Map,this.La=new nu,this.Ba={},this.ka=new Map,this.qa=Ks.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function uE(a,t){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,ae.A)(function*(a,t,r=!0){const o=Fg(a);let u;const d=o.Fa.get(t);return d?(o.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.Da()):u=yield Cg(o,t,r,!0),u})).apply(this,arguments)}function B_(a,t){return j_.apply(this,arguments)}function j_(){return(j_=(0,ae.A)(function*(a,t){const r=Fg(a);yield Cg(r,t,!0,!1)})).apply(this,arguments)}function Cg(a,t,r,o){return wg.apply(this,arguments)}function wg(){return(wg=(0,ae.A)(function*(a,t,r,o){const u=yield oe(a.localStore,I(t)),d=u.targetId,m=r?a.sharedClientState.addLocalQueryTarget(d):"not-current";let b;return o&&(b=yield Tg(a,t,d,"current"===m,u.resumeToken)),a.isPrimaryClient&&r&&Bd(a.remoteStore,u),b})).apply(this,arguments)}function Tg(a,t,r,o,u){return $_.apply(this,arguments)}function $_(){return $_=(0,ae.A)(function*(a,t,r,o,u){a.Ka=(pe,Re,ot)=>{return(Bt=(0,ae.A)(function*(Wt,Bn,Zn,kn){let ur=Bn.view.ma(Zn);ur.ns&&(ur=yield jt(Wt.localStore,Bn.query,!1).then(({documents:be})=>Bn.view.ma(be,ur)));const Hr=kn&&kn.targetChanges.get(Bn.targetId),Ar=kn&&null!=kn.targetMismatches.get(Bn.targetId),tt=Bn.view.applyChanges(ur,Wt.isPrimaryClient,Hr,Ar);return Wd(Wt,Bn.targetId,tt.wa),tt.snapshot}),function Yt(Wt,Bn,Zn,kn){return Bt.apply(this,arguments)})(a,pe,Re,ot);var Bt};const d=yield jt(a.localStore,t,!0),m=new Eg(t,d.Ts),b=m.ma(d.documents),N=Ci.createSynthesizedTargetChangeForCurrentChange(r,o&&"Offline"!==a.onlineState,u),H=m.applyChanges(b,a.isPrimaryClient,N);Wd(a,r,H.wa);const re=new U_(t,r,m);return a.Fa.set(t,re),a.Ma.has(r)?a.Ma.get(r).push(t):a.Ma.set(r,[t]),H.snapshot}),$_.apply(this,arguments)}function lE(a,t,r){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,ae.A)(function*(a,t,r){const o=Ot(a),u=o.Fa.get(t),d=o.Ma.get(u.targetId);if(d.length>1)return o.Ma.set(u.targetId,d.filter(m=>!Ae(m,t))),void o.Fa.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Fe(o.localStore,u.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(u.targetId),r&&ao(o.remoteStore,u.targetId),uu(o,u.targetId)}).catch(Tn))):(uu(o,u.targetId),yield Fe(o.localStore,u.targetId,!0))})).apply(this,arguments)}function Dg(a,t){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,ae.A)(function*(a,t){const r=Ot(a),o=r.Fa.get(t),u=r.Ma.get(o.targetId);r.isPrimaryClient&&1===u.length&&(r.sharedClientState.removeLocalQueryTarget(o.targetId),ao(r.remoteStore,o.targetId))})).apply(this,arguments)}function wf(){return(wf=(0,ae.A)(function*(a,t,r){const o=Zu(a);try{const u=yield function(m,b){const N=Ot(m),H=qt.now(),re=b.reduce((ot,Bt)=>ot.add(Bt.key),Un());let pe,Re;return N.persistence.runTransaction("Locally write mutations","readwrite",ot=>{let Bt=Dn(),Yt=Un();return N.cs.getEntries(ot,re).next(Wt=>{Bt=Wt,Bt.forEach((Bn,Zn)=>{Zn.isValidDocument()||(Yt=Yt.add(Bn))})}).next(()=>N.localDocuments.getOverlayedDocuments(ot,Bt)).next(Wt=>{pe=Wt;const Bn=[];for(const Zn of b){const kn=Xr(Zn,pe.get(Zn.key).overlayedDocument);null!=kn&&Bn.push(new mr(Zn.key,kn,ho(kn.value.mapValue),Sn.exists(!0)))}return N.mutationQueue.addMutationBatch(ot,H,Bn,b)}).next(Wt=>{Re=Wt;const Bn=Wt.applyToLocalDocumentSet(pe,Yt);return N.documentOverlayCache.saveOverlays(ot,Wt.batchId,Bn)})}).then(()=>({batchId:Re.batchId,changes:yi(pe)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(u.batchId),function(m,b,N){let H=m.Ba[m.currentUser.toKey()];H||(H=new Sr(Ht)),H=H.insert(b,N),m.Ba[m.currentUser.toKey()]=H}(o,u.batchId,r),yield Oa(o,u.changes),yield fc(o.remoteStore)}catch(u){const d=au(u,"Failed to persist write");r.reject(d)}})).apply(this,arguments)}function H_(a,t){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,ae.A)(function*(a,t){const r=Ot(a);try{const o=yield function f(a,t){const r=Ot(a),o=t.snapshotVersion;let u=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=r.cs.newChangeBuffer({trackRemovals:!0});u=r.os;const b=[];t.targetChanges.forEach((re,pe)=>{const Re=u.get(pe);if(!Re)return;b.push(r.Ur.removeMatchingKeys(d,re.removedDocuments,pe).next(()=>r.Ur.addMatchingKeys(d,re.addedDocuments,pe)));let ot=Re.withSequenceNumber(d.currentSequenceNumber);var Yt,Wt,Bn;null!==t.targetMismatches.get(pe)?ot=ot.withResumeToken(Fr.EMPTY_BYTE_STRING,Xt.min()).withLastLimboFreeSnapshotVersion(Xt.min()):re.resumeToken.approximateByteSize()>0&&(ot=ot.withResumeToken(re.resumeToken,o)),u=u.insert(pe,ot),Wt=ot,Bn=re,(0===(Yt=Re).resumeToken.approximateByteSize()||Wt.snapshotVersion.toMicroseconds()-Yt.snapshotVersion.toMicroseconds()>=3e8||Bn.addedDocuments.size+Bn.modifiedDocuments.size+Bn.removedDocuments.size>0)&&b.push(r.Ur.updateTargetData(d,ot))});let N=Dn(),H=Un();if(t.documentUpdates.forEach(re=>{t.resolvedLimboDocuments.has(re)&&b.push(r.persistence.referenceDelegate.updateLimboDocument(d,re))}),b.push(A(d,m,t.documentUpdates).next(re=>{N=re.Ps,H=re.Is})),!o.isEqual(Xt.min())){const re=r.Ur.getLastRemoteSnapshotVersion(d).next(pe=>r.Ur.setTargetsMetadata(d,d.currentSequenceNumber,o));b.push(re)}return Me.waitFor(b).next(()=>m.apply(d)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,N,H)).next(()=>N)}).then(d=>(r.os=u,d))}(r.localStore,t);t.targetChanges.forEach((u,d)=>{const m=r.Na.get(d);m&&(mt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.va=!0:u.modifiedDocuments.size>0?mt(m.va):u.removedDocuments.size>0&&(mt(m.va),m.va=!1))}),yield Oa(r,o,t)}catch(o){yield Tn(o)}})).apply(this,arguments)}function Df(a,t,r){const o=Ot(a);if(o.isPrimaryClient&&0===r||!o.isPrimaryClient&&1===r){const u=[];o.Fa.forEach((d,m)=>{const b=m.view.Z_(t);b.snapshot&&u.push(b.snapshot)}),function(m,b){const N=Ot(m);N.onlineState=b;let H=!1;N.queries.forEach((re,pe)=>{for(const Re of pe.j_)Re.Z_(b)&&(H=!0)}),H&&pg(N)}(o.eventManager,t),u.length&&o.Ca.d_(u),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}function GC(a,t,r){return bg.apply(this,arguments)}function bg(){return(bg=(0,ae.A)(function*(a,t,r){const o=Ot(a);o.sharedClientState.updateQueryState(t,"rejected",r);const u=o.Na.get(t),d=u&&u.key;if(d){let m=new Sr(we.comparator);m=m.insert(d,lr.newNoDocument(d,Xt.min()));const b=Un().add(d),N=new ic(Xt.min(),new Map,new Sr(Ht),m,b);yield H_(o,N),o.Oa=o.Oa.remove(d),o.Na.delete(t),Ju(o)}else yield Fe(o.localStore,t,!1).then(()=>uu(o,t,r)).catch(Tn)})).apply(this,arguments)}function dE(a,t){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,ae.A)(function*(a,t){const r=Ot(a),o=t.batch.batchId;try{const u=yield function E(a,t){const r=Ot(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=t.batch.keys(),d=r.cs.newChangeBuffer({trackRemovals:!0});return function(b,N,H,re){const pe=H.batch,Re=pe.keys();let ot=Me.resolve();return Re.forEach(Bt=>{ot=ot.next(()=>re.getEntry(N,Bt)).next(Yt=>{const Wt=H.docVersions.get(Bt);mt(null!==Wt),Yt.version.compareTo(Wt)<0&&(pe.applyToRemoteDocument(Yt,H),Yt.isValidDocument()&&(Yt.setReadTime(H.commitVersion),re.addEntry(Yt)))})}),ot.next(()=>b.mutationQueue.removeMutationBatch(N,pe))}(r,o,t,d).next(()=>d.apply(o)).next(()=>r.mutationQueue.performConsistencyCheck(o)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(o,u,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(b){let N=Un();for(let H=0;H<b.mutationResults.length;++H)b.mutationResults[H].transformResults.length>0&&(N=N.add(b.batch.mutations[H].key));return N}(t))).next(()=>r.localDocuments.getDocuments(o,u))})}(r.localStore,t);zd(r,o,null),Pg(r,o),r.sharedClientState.updateMutationState(o,"acknowledged"),yield Oa(r,u)}catch(u){yield Tn(u)}})).apply(this,arguments)}function hE(a,t,r){return G_.apply(this,arguments)}function G_(){return(G_=(0,ae.A)(function*(a,t,r){const o=Ot(a);try{const u=yield function(m,b){const N=Ot(m);return N.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let re;return N.mutationQueue.lookupMutationBatch(H,b).next(pe=>(mt(null!==pe),re=pe.keys(),N.mutationQueue.removeMutationBatch(H,pe))).next(()=>N.mutationQueue.performConsistencyCheck(H)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(H,re,b)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(H,re)).next(()=>N.localDocuments.getDocuments(H,re))})}(o.localStore,t);zd(o,t,r),Pg(o,t),o.sharedClientState.updateMutationState(t,"rejected",r),yield Oa(o,u)}catch(u){yield Tn(u)}})).apply(this,arguments)}function Kl(){return(Kl=(0,ae.A)(function*(a,t){const r=Ot(a);bo(r.remoteStore)||it("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const b=Ot(m);return b.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>b.mutationQueue.getHighestUnacknowledgedBatchId(N))}(r.localStore);if(-1===o)return void t.resolve();const u=r.ka.get(o)||[];u.push(t),r.ka.set(o,u)}catch(o){const u=au(o,"Initialization of waitForPendingWrites() operation failed");t.reject(u)}})).apply(this,arguments)}function Pg(a,t){(a.ka.get(t)||[]).forEach(r=>{r.resolve()}),a.ka.delete(t)}function zd(a,t,r){const o=Ot(a);let u=o.Ba[o.currentUser.toKey()];if(u){const d=u.get(t);d&&(r?d.reject(r):d.resolve(),u=u.remove(t)),o.Ba[o.currentUser.toKey()]=u}}function uu(a,t,r=null){a.sharedClientState.removeLocalQueryTarget(t);for(const o of a.Ma.get(t))a.Fa.delete(o),r&&a.Ca.$a(o,r);a.Ma.delete(t),a.isPrimaryClient&&a.La.gr(t).forEach(o=>{a.La.containsKey(o)||Yu(a,o)})}function Yu(a,t){a.xa.delete(t.path.canonicalString());const r=a.Oa.get(t);null!==r&&(ao(a.remoteStore,r),a.Oa=a.Oa.remove(t),a.Na.delete(r),Ju(a))}function Wd(a,t,r){for(const o of r)o instanceof yg?(a.La.addReference(o.key,t),Mg(a,o)):o instanceof vg?(it("SyncEngine","Document no longer in limbo: "+o.key),a.La.removeReference(o.key,t),a.La.containsKey(o.key)||Yu(a,o.key)):St()}function Mg(a,t){const r=t.key,o=r.path.canonicalString();a.Oa.get(r)||a.xa.has(o)||(it("SyncEngine","New document in limbo: "+r),a.xa.add(o),Ju(a))}function Ju(a){for(;a.xa.size>0&&a.Oa.size<a.maxConcurrentLimboResolutions;){const t=a.xa.values().next().value;a.xa.delete(t);const r=new we(Ln.fromString(t)),o=a.qa.next();a.Na.set(o,new aE(r)),a.Oa=a.Oa.insert(r,o),Bd(a.remoteStore,new mo(I(Yi(r.path)),o,"TargetPurposeLimboResolution",ne.oe))}}function Oa(a,t,r){return lu.apply(this,arguments)}function lu(){return lu=(0,ae.A)(function*(a,t,r){const o=Ot(a),u=[],d=[],m=[];var b;o.Fa.isEmpty()||(o.Fa.forEach((b,N)=>{m.push(o.Ka(N,t,r).then(H=>{var re;if((H||r)&&o.isPrimaryClient){const pe=H?!H.fromCache:null===(re=r?.targetChanges.get(N.targetId))||void 0===re?void 0:re.current;o.sharedClientState.updateQueryState(N.targetId,pe?"current":"not-current")}if(H){u.push(H);const pe=kd.Wi(N.targetId,H);d.push(pe)}}))}),yield Promise.all(m),o.Ca.d_(u),yield(b=(0,ae.A)(function*(H,re){const pe=Ot(H);try{yield pe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Re=>Me.forEach(re,ot=>Me.forEach(ot.$i,Bt=>pe.persistence.referenceDelegate.addReference(Re,ot.targetId,Bt)).next(()=>Me.forEach(ot.Ui,Bt=>pe.persistence.referenceDelegate.removeReference(Re,ot.targetId,Bt)))))}catch(Re){if(!fs(Re))throw Re;it("LocalStore","Failed to update sequence numbers: "+Re)}for(const Re of re){const ot=Re.targetId;if(!Re.fromCache){const Bt=pe.os.get(ot),Wt=Bt.withLastLimboFreeSnapshotVersion(Bt.snapshotVersion);pe.os=pe.os.insert(ot,Wt)}}}),function N(H,re){return b.apply(this,arguments)})(o.localStore,d))}),lu.apply(this,arguments)}function Rg(a,t){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,ae.A)(function*(a,t){const r=Ot(a);if(!r.currentUser.isEqual(t)){it("SyncEngine","User change. New user:",t.toKey());const o=yield Zp(r.localStore,t);r.currentUser=t,(d=r).ka.forEach(b=>{b.forEach(N=>{N.reject(new Mt(nt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.ka.clear(),r.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),yield Oa(r,o.hs)}var d})).apply(this,arguments)}function Af(a,t){const r=Ot(a),o=r.Na.get(t);if(o&&o.va)return Un().add(o.key);{let u=Un();const d=r.Ma.get(t);if(!d)return u;for(const m of d){const b=r.Fa.get(m);u=u.unionWith(b.view.Va)}return u}}function WC(a,t){return qd.apply(this,arguments)}function qd(){return(qd=(0,ae.A)(function*(a,t){const r=Ot(a),o=yield jt(r.localStore,t.query,!0),u=t.view.ba(o);return r.isPrimaryClient&&Wd(r,t.targetId,u.wa),u})).apply(this,arguments)}function Qd(a,t){return Og.apply(this,arguments)}function Og(){return(Og=(0,ae.A)(function*(a,t){const r=Ot(a);return zn(r.localStore,t).then(o=>Oa(r,o))})).apply(this,arguments)}function z_(a,t,r,o){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,ae.A)(function*(a,t,r,o){const u=Ot(a),d=yield function(b,N){const H=Ot(b),re=Ot(H.mutationQueue);return H.persistence.runTransaction("Lookup mutation documents","readonly",pe=>re.Mn(pe,N).next(Re=>Re?H.localDocuments.getDocuments(pe,Re):Me.resolve(null)))}(u.localStore,t);var N;null!==d?("pending"===r?yield fc(u.remoteStore):"acknowledged"===r||"rejected"===r?(zd(u,t,o||null),Pg(u,t),N=t,Ot(Ot(u.localStore).mutationQueue).On(N)):St(),yield Oa(u,d)):it("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function Xd(){return(Xd=(0,ae.A)(function*(a,t){const r=Ot(a);if(Fg(r),Zu(r),!0===t&&!0!==r.Qa){const o=r.sharedClientState.getAllActiveQueryTargets(),u=yield xg(r,o.toArray());r.Qa=!0,yield lg(r.remoteStore,!0);for(const d of u)Bd(r.remoteStore,d)}else if(!1===t&&!1!==r.Qa){const o=[];let u=Promise.resolve();r.Ma.forEach((d,m)=>{r.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(uu(r,m),Fe(r.localStore,m,!0))),ao(r.remoteStore,m)}),yield u,yield xg(r,o),function(m){const b=Ot(m);b.Na.forEach((N,H)=>{ao(b.remoteStore,H)}),b.La.pr(),b.Na=new Map,b.Oa=new Sr(we.comparator)}(r),r.Qa=!1,yield lg(r.remoteStore,!1)}})).apply(this,arguments)}function xg(a,t,r){return kg.apply(this,arguments)}function kg(){return(kg=(0,ae.A)(function*(a,t,r){const o=Ot(a),u=[],d=[];for(const m of t){let b;const N=o.Ma.get(m);if(N&&0!==N.length){b=yield oe(o.localStore,I(N[0]));for(const H of N){const re=o.Fa.get(H),pe=yield WC(o,re);pe.snapshot&&d.push(pe.snapshot)}}else{const H=yield Cn(o.localStore,m);b=yield oe(o.localStore,H),yield Tg(o,W_(H),m,!1,b.resumeToken)}u.push(b)}return o.Ca.d_(d),u})).apply(this,arguments)}function W_(a){return _i(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function Yd(a){return r=Ot(a).localStore,Ot(Ot(r).persistence).Qi();var r}function K_(a,t,r,o){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,ae.A)(function*(a,t,r,o){const u=Ot(a);if(u.Qa)return void it("SyncEngine","Ignoring unexpected query state notification.");const d=u.Ma.get(t);if(d&&d.length>0)switch(r){case"current":case"not-current":{const m=yield zn(u.localStore,cn(d[0])),b=ic.createSynthesizedRemoteEventForCurrentChange(t,"current"===r,Fr.EMPTY_BYTE_STRING);yield Oa(u,m,b);break}case"rejected":yield Fe(u.localStore,t,!0),uu(u,t,o);break;default:St()}})).apply(this,arguments)}function pE(a,t,r){return q_.apply(this,arguments)}function q_(){return(q_=(0,ae.A)(function*(a,t,r){const o=Fg(a);if(o.Qa){for(const u of t){if(o.Ma.has(u)&&o.sharedClientState.isActiveQueryTarget(u)){it("SyncEngine","Adding an already active target "+u);continue}const d=yield Cn(o.localStore,u),m=yield oe(o.localStore,d);yield Tg(o,W_(d),m.targetId,!1,m.resumeToken),Bd(o.remoteStore,m)}for(const u of r)o.Ma.has(u)&&(yield Fe(o.localStore,u,!1).then(()=>{ao(o.remoteStore,u),uu(o,u)}).catch(Tn))}})).apply(this,arguments)}function Fg(a){const t=Ot(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=H_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Af.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=GC.bind(null,t),t.Ca.d_=oE.bind(null,t.eventManager),t.Ca.$a=k_.bind(null,t.eventManager),t}function Zu(a){const t=Ot(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hE.bind(null,t),t}class kc{constructor(){this.synchronizeTabs=!1}initialize(t){var r=this;return(0,ae.A)(function*(){r.serializer=su(t.databaseInfo.databaseId),r.sharedClientState=r.createSharedClientState(t),r.persistence=r.createPersistence(t),yield r.persistence.start(),r.localStore=r.createLocalStore(t),r.gcScheduler=r.createGarbageCollectionScheduler(t,r.localStore),r.indexBackfillerScheduler=r.createIndexBackfillerScheduler(t,r.localStore)})()}createGarbageCollectionScheduler(t,r){return null}createIndexBackfillerScheduler(t,r){return null}createLocalStore(t){return ru(this.persistence,new Jp,t.initialUser,this.serializer)}createPersistence(t){return new Nc($u.Zr,this.serializer)}createSharedClientState(t){return new Wa}terminate(){var t=this;return(0,ae.A)(function*(){var r,o;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(o=t.indexBackfillerScheduler)||void 0===o||o.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class Lg extends kc{constructor(t,r,o){super(),this.Wa=t,this.cacheSizeBytes=r,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(t){var r=()=>super.initialize,o=this;return(0,ae.A)(function*(){yield r().call(o,t),yield o.Wa.initialize(o,t),yield Zu(o.Wa.syncEngine),yield fc(o.Wa.remoteStore),yield o.persistence.yi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return ru(this.persistence,new Jp,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,r){return new Nl(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,r)}createIndexBackfillerScheduler(t,r){const o=new nn(r,this.persistence);return new xt(t.asyncQueue,o)}createPersistence(t){const r=xd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Rs.withCacheSize(this.cacheSizeBytes):Rs.DEFAULT;return new Ll(this.synchronizeTabs,r,t.clientId,o,t.asyncQueue,eg(),Hl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new Wa}}class Ug extends Lg{constructor(t,r){super(t,r,!1),this.Wa=t,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(t){var r=()=>super.initialize,o=this;return(0,ae.A)(function*(){yield r().call(o,t);const u=o.Wa.syncEngine;o.sharedClientState instanceof hc&&(o.sharedClientState.syncEngine={no:z_.bind(null,u),ro:K_.bind(null,u),io:pE.bind(null,u),Qi:Yd.bind(null,u),eo:Qd.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.yi(function(){var d=(0,ae.A)(function*(m){yield function fE(a,t){return Xd.apply(this,arguments)}(o.Wa.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start():m||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(m&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():m||o.indexBackfillerScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}createSharedClientState(t){const r=eg();if(!hc.D(r))throw new Mt(nt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=xd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new hc(r,t.asyncQueue,o,t.clientId,t.initialUser)}}class du{initialize(t,r){var o=this;return(0,ae.A)(function*(){o.localStore||(o.localStore=t.localStore,o.sharedClientState=t.sharedClientState,o.datastore=o.createDatastore(r),o.remoteStore=o.createRemoteStore(r),o.eventManager=o.createEventManager(r),o.syncEngine=o.createSyncEngine(r,!t.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Df(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Rg.bind(null,o.syncEngine),yield lg(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(t){return new x_}createDatastore(t){const r=su(t.databaseInfo.databaseId),o=new Zv(t.databaseInfo);return new D_(t.authCredentials,t.appCheckCredentials,o,r)}createRemoteStore(t){return o=this.localStore,u=this.datastore,d=t.asyncQueue,m=r=>Df(this.syncEngine,r,0),b=C_.D()?new C_:new Os,new A_(o,u,d,m,b);var o,u,d,m,b}createSyncEngine(t,r){return function(u,d,m,b,N,H,re){const pe=new cE(u,d,m,b,N,H);return re&&(pe.Qa=!0),pe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,ae.A)(function*(){var r,o,u;yield(u=(0,ae.A)(function*(m){const b=Ot(m);it("RemoteStore","RemoteStore shutting down."),b.L_.add(5),yield Ud(b),b.k_.shutdown(),b.q_.set("Unknown")}),function d(m){return u.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(o=t.eventManager)||void 0===o||o.terminate()})()}}function Zd(a,t=10240){let r=0;return{read:()=>(0,ae.A)(function*(){if(r<a.byteLength){const o={value:a.slice(r,r+t),done:!1};return r+=t,o}return{done:!0}})(),cancel:()=>(0,ae.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class el{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):yn("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,r){this.muted||setTimeout(()=>{this.muted||t(r)},0)}}class Q_{constructor(t,r){this.ja=t,this.serializer=r,this.metadata=new er,this.buffer=new Uint8Array,this.Ha=new TextDecoder("utf-8"),this.Ja().then(o=>{o&&o.ua()?this.metadata.resolve(o.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.aa)}`))},o=>this.metadata.reject(o))}close(){return this.ja.cancel()}getMetadata(){var t=this;return(0,ae.A)(function*(){return t.metadata.promise})()}Ua(){var t=this;return(0,ae.A)(function*(){return yield t.getMetadata(),t.Ja()})()}Ja(){var t=this;return(0,ae.A)(function*(){const r=yield t.Ya();if(null===r)return null;const o=t.Ha.decode(r),u=Number(o);isNaN(u)&&t.Za(`length string (${o}) is not valid number`);const d=yield t.Xa(u);return new V_(JSON.parse(d),r.length+u)})()}eu(){return this.buffer.findIndex(t=>123===t)}Ya(){var t=this;return(0,ae.A)(function*(){for(;t.eu()<0&&!(yield t.tu()););if(0===t.buffer.length)return null;const r=t.eu();r<0&&t.Za("Reached the end of bundle when a length string is expected.");const o=t.buffer.slice(0,r);return t.buffer=t.buffer.slice(r),o})()}Xa(t){var r=this;return(0,ae.A)(function*(){for(;r.buffer.length<t;)(yield r.tu())&&r.Za("Reached the end of bundle when more is expected.");const o=r.Ha.decode(r.buffer.slice(0,t));return r.buffer=r.buffer.slice(t),o})()}Za(t){throw this.ja.cancel(),new Error(`Invalid bundle format: ${t}`)}tu(){var t=this;return(0,ae.A)(function*(){const r=yield t.ja.read();if(!r.done){const o=new Uint8Array(t.buffer.length+r.value.length);o.set(t.buffer),o.set(r.value,t.buffer.length),t.buffer=o}return r.done})()}}class X_{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){var r=this;return(0,ae.A)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new Mt(nt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const o=yield(u=(0,ae.A)(function*(m,b){const N=Ot(m),H={documents:b.map(ot=>Xc(N.serializer,ot))},re=yield N.Lo("BatchGetDocuments",N.serializer.databaseId,Ln.emptyPath(),H,b.length),pe=new Map;re.forEach(ot=>{const Bt=function Wp(a,t){return"found"in t?function(o,u){mt(!!u.found);const d=ha(o,u.found.name),m=Li(u.found.updateTime),b=u.found.createTime?Li(u.found.createTime):Xt.min(),N=new Ur({mapValue:{fields:u.found.fields}});return lr.newFoundDocument(d,m,b,N)}(a,t):"missing"in t?function(o,u){mt(!!u.missing),mt(!!u.readTime);const d=ha(o,u.missing),m=Li(u.readTime);return lr.newNoDocument(d,m)}(a,t):St()}(N.serializer,ot);pe.set(Bt.key.toString(),Bt)});const Re=[];return b.forEach(ot=>{const Bt=pe.get(ot.toString());mt(!!Bt),Re.push(Bt)}),Re}),function d(m,b){return u.apply(this,arguments)})(r.datastore,t);var u;return o.forEach(u=>r.recordVersion(u)),o})()}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(t.toString())}delete(t){this.write(new Gs(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,ae.A)(function*(){if(t.ensureCommitNotCalled(),t.lastTransactionError)throw t.lastTransactionError;const r=t.readVersions;var o;t.mutations.forEach(o=>{r.delete(o.key.toString())}),r.forEach((o,u)=>{const d=we.fromPath(u);t.mutations.push(new Ii(d,t.precondition(d)))}),yield(o=(0,ae.A)(function*(d,m){const b=Ot(d),N={writes:m.map(H=>Ou(b.serializer,H))};yield b.Mo("Commit",b.serializer.databaseId,Ln.emptyPath(),N)}),function u(d,m){return o.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw St();r=Xt.min()}const o=this.readVersions.get(t.key.toString());if(o){if(!r.isEqual(o))throw new Mt(nt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(Xt.min())?Sn.exists(!1):Sn.updateTime(r):Sn.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(Xt.min()))throw new Mt(nt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sn.updateTime(r)}return Sn.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class Y_{constructor(t,r,o,u,d){this.asyncQueue=t,this.datastore=r,this.options=o,this.updateFunction=u,this.deferred=d,this.nu=o.maxAttempts,this.t_=new hf(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){var t=this;this.t_.Go((0,ae.A)(function*(){const r=new X_(t.datastore),o=t.su(r);o&&o.then(u=>{t.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{t.deferred.resolve(u)}).catch(d=>{t.ou(d)}))}).catch(u=>{t.ou(u)})}))}su(t){try{const r=this.updateFunction(t);return!ye(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ou(t){this.nu>0&&this._u(t)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(t)}_u(t){if("FirebaseError"===t.name){const r=t.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!Dc(r)}return!1}}class bf{constructor(t,r,o,u){var d=this;this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=o,this.databaseInfo=u,this.user=Jt.UNAUTHENTICATED,this.clientId=Di.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,ae.A)(function*(b){it("FirestoreClient","Received user=",b.uid),yield d.authCredentialListener(b),d.user=b});return function(b){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(it("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Mt(nt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const r=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.A)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),r.resolve()}catch(o){const u=au(o,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function ql(a,t){return hu.apply(this,arguments)}function hu(){return hu=(0,ae.A)(function*(a,t){a.asyncQueue.verifyOperationInProgress(),it("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield t.initialize(r);let o=r.initialUser;a.setCredentialChangeListener(function(){var u=(0,ae.A)(function*(d){o.isEqual(d)||(yield Zp(t.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=t}),hu.apply(this,arguments)}function Bg(a,t){return jg.apply(this,arguments)}function jg(){return(jg=(0,ae.A)(function*(a,t){a.asyncQueue.verifyOperationInProgress();const r=yield Ql(a);it("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(r,a.configuration),a.setCredentialChangeListener(o=>N_(t.remoteStore,o)),a.setAppCheckTokenChangeListener((o,u)=>N_(t.remoteStore,u)),a._onlineComponents=t})).apply(this,arguments)}function mE(a){return"FirebaseError"===a.name?a.code===nt.FAILED_PRECONDITION||a.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code}function Ql(a){return eh.apply(this,arguments)}function eh(){return(eh=(0,ae.A)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){it("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ql(a,a._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!mE(r))throw r;Qn("Error using user provided cache. Falling back to memory cache: "+r),yield ql(a,new kc)}}else it("FirestoreClient","Using default OfflineComponentProvider"),yield ql(a,new kc);return a._offlineComponents})).apply(this,arguments)}function th(a){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,ae.A)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(it("FirestoreClient","Using user provided OnlineComponentProvider"),yield Bg(a,a._uninitializedComponentsProvider._online)):(it("FirestoreClient","Using default OnlineComponentProvider"),yield Bg(a,new du))),a._onlineComponents})).apply(this,arguments)}function $g(a){return Ql(a).then(t=>t.persistence)}function tl(a){return Ql(a).then(t=>t.localStore)}function J_(a){return th(a).then(t=>t.remoteStore)}function Hg(a){return th(a).then(t=>t.syncEngine)}function Xl(a){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,ae.A)(function*(a){const t=yield th(a),r=t.eventManager;return r.onListen=uE.bind(null,t.syncEngine),r.onUnlisten=lE.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=B_.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Dg.bind(null,t.syncEngine),r})).apply(this,arguments)}function yE(a,t,r={}){const o=new er;return a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function(d,m,b,N,H){const re=new el({next:Re=>{m.enqueueAndForget(()=>fg(d,pe));const ot=Re.docs.has(b);!ot&&Re.fromCache?H.reject(new Mt(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):ot&&Re.fromCache&&N&&"server"===N.source?H.reject(new Mt(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(Re)},error:Re=>H.reject(Re)}),pe=new mg(Yi(b.path),re,{includeMetadataChanges:!0,_a:!0});return hg(d,pe)}(yield Xl(a),a.asyncQueue,t,r,o)})),o.promise}function vE(a,t,r={}){const o=new er;return a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function(d,m,b,N,H){const re=new el({next:Re=>{m.enqueueAndForget(()=>fg(d,pe)),Re.fromCache&&"server"===N.source?H.reject(new Mt(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(Re)},error:Re=>H.reject(Re)}),pe=new mg(b,re,{includeMetadataChanges:!0,_a:!0});return hg(d,pe)}(yield Xl(a),a.asyncQueue,t,r,o)})),o.promise}function Pf(a){const t={};return void 0!==a.timeoutSeconds&&(t.timeoutSeconds=a.timeoutSeconds),t}const pc=new Map;function nl(a,t,r){if(!r)throw new Mt(nt.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function zg(a,t,r,o){if(!0===t&&!0===o)throw new Mt(nt.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function Wg(a){if(!we.isDocumentKey(a))throw new Mt(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Kg(a){if(we.isDocumentKey(a))throw new Mt(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function qg(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const t=(o=a).constructor?o.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var o;return"function"==typeof a?"a function":St()}function $r(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new Mt(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=qg(a);throw new Mt(nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return a}function TE(a,t){if(t<=0)throw new Mt(nt.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${t}.`)}class Mf{constructor(t){var r,o;if(void 0===t.host){if(void 0!==t.ssl)throw new Mt(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(r=t.ssl)||void 0===r||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Mt(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Pf(null!==(o=t.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new Mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new Mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new Mt(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rl{constructor(t,r,o,u){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Mt(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Mt(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mf(t),void 0!==t.credentials&&(this._authCredentials=function(o){if(!o)return new wn;switch(o.type){case"firstParty":return new Wr(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Mt(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const o=pc.get(r);o&&(it("ComponentProvider","Removing Datastore"),pc.delete(r),o.terminate())}(this),Promise.resolve()}}class Po{constructor(t,r,o){this.converter=r,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new Po(this.firestore,t,this._query)}}class Zi{constructor(t,r,o){this.converter=r,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Zi(this.firestore,t,this._key)}}class gc extends Po{constructor(t,r,o){super(t,r,Yi(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Zi(this.firestore,null,new we(t))}withConverter(t){return new gc(this.firestore,t,this._path)}}function ty(a,t,...r){if(a=(0,ce.Ku)(a),nl("collection","path",t),a instanceof rl){const o=Ln.fromString(t,...r);return Kg(o),new gc(a,null,o)}{if(!(a instanceof Zi||a instanceof gc))throw new Mt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Ln.fromString(t,...r));return Kg(o),new gc(a.firestore,null,o)}}function Rf(a,t,...r){if(a=(0,ce.Ku)(a),1===arguments.length&&(t=Di.newId()),nl("doc","path",t),a instanceof rl){const o=Ln.fromString(t,...r);return Wg(o),new Zi(a,null,new we(o))}{if(!(a instanceof Zi||a instanceof gc))throw new Mt(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Ln.fromString(t,...r));return Wg(o),new Zi(a.firestore,a instanceof gc?a.converter:null,new we(o))}}function ny(a,t){return a=(0,ce.Ku)(a),t=(0,ce.Ku)(t),(a instanceof Zi||a instanceof gc)&&(t instanceof Zi||t instanceof gc)&&a.firestore===t.firestore&&a.path===t.path&&a.converter===t.converter}function Of(a,t){return a=(0,ce.Ku)(a),t=(0,ce.Ku)(t),a instanceof Po&&t instanceof Po&&a.firestore===t.firestore&&Ae(a._query,t._query)&&a.converter===t.converter}class ry{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new hf(this,"async_queue_retry"),this.Eu=()=>{const r=Hl();r&&it("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()};const t=Hl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;const r=Hl();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise(()=>{});const r=new er;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.uu.push(t),this.Ru()))}Ru(){var t=this;return(0,ae.A)(function*(){if(0!==t.uu.length){try{yield t.uu[0](),t.uu.shift(),t.t_.reset()}catch(r){if(!fs(r))throw r;it("AsyncQueue","Operation failed with retryable error: "+r)}t.uu.length>0&&t.t_.Go(()=>t.Ru())}})()}Au(t){const r=this.au.then(()=>(this.Pu=!0,t().catch(o=>{throw this.hu=o,this.Pu=!1,yn("INTERNAL UNHANDLED ERROR: ",function(m){let b=m.message||"";return m.stack&&(b=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),b}(o)),o}).then(o=>(this.Pu=!1,o))));return this.au=r,r}enqueueAfterDelay(t,r,o){this.du(),this.Tu.indexOf(t)>-1&&(r=0);const u=So.createAndSchedule(this,t,r,o,d=>this.Vu(d));return this.lu.push(u),u}du(){this.hu&&St()}verifyOperationInProgress(){}mu(){var t=this;return(0,ae.A)(function*(){let r;do{r=t.au,yield r}while(r!==t.au)})()}fu(t){for(const r of this.lu)if(r.timerId===t)return!0;return!1}gu(t){return this.mu().then(()=>{this.lu.sort((r,o)=>r.targetTimeMs-o.targetTimeMs);for(const r of this.lu)if(r.skipDelay(),"all"!==t&&r.timerId===t)break;return this.mu()})}pu(t){this.Tu.push(t)}Vu(t){const r=this.lu.indexOf(t);this.lu.splice(r,1)}}function Qg(a){return function(r,o){if("object"!=typeof r||null===r)return!1;const u=r;for(const d of["next","error","complete"])if(d in u&&"function"==typeof u[d])return!0;return!1}(a)}class bE{constructor(){this._progressObserver={},this._taskCompletionResolver=new er,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,r,o){this._progressObserver={next:t,error:r,complete:o}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,r){return this._taskCompletionResolver.promise.then(t,r)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class wi extends rl{constructor(t,r,o,u){super(t,r,o,u),this.type="firestore",this._queue=new ry,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||il(this),this._firestoreClient.terminate()}}function hs(a){return a._firestoreClient||il(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function il(a){var t,r,o;const u=a._freezeSettings(),d=(N=(null===(t=a._app)||void 0===t?void 0:t.options.appId)||"",new eo(a._databaseId,N,a._persistenceKey,(re=u).host,re.ssl,re.experimentalForceLongPolling,re.experimentalAutoDetectLongPolling,Pf(re.experimentalLongPollingOptions),re.useFetchStreams));var N,re;a._firestoreClient=new bf(a._authCredentials,a._appCheckCredentials,a._queue,d),null!==(r=u.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(a._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Nf(a,t,r){const o=new er;return a.asyncQueue.enqueue((0,ae.A)(function*(){try{yield ql(a,r),yield Bg(a,t),o.resolve()}catch(u){const d=u;if(!mE(d))throw d;Qn("Error enabling indexeddb cache. Falling back to memory cache: "+d),o.reject(d)}})).then(()=>o.promise)}function NE(a){if(a._initialized||a._terminated)throw new Mt(nt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class mc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new mc(Fr.fromBase64String(t))}catch(r){throw new Mt(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new mc(Fr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Vc{constructor(...t){for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Mt(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class sl{constructor(t){this._methodName=t}}class xf{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Mt(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Mt(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ht(this._lat,t._lat)||Ht(this._long,t._long)}}class kf{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(o,u){if(o.length!==u.length)return!1;for(let d=0;d<o.length;++d)if(o[d]!==u[d])return!1;return!0}(this._values,t._values)}}const FE=/^__.*__$/;class VE{constructor(t,r,o){this.data=t,this.fieldMask=r,this.fieldTransforms=o}toMutation(t,r){return null!==this.fieldMask?new mr(t,this.data,this.fieldMask,r,this.fieldTransforms):new _n(t,this.data,r,this.fieldTransforms)}}class cy{constructor(t,r,o){this.data=t,this.fieldMask=r,this.fieldTransforms=o}toMutation(t,r){return new mr(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Ff(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St()}}class Xg{constructor(t,r,o,u,d,m){this.settings=t,this.databaseId=r,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===d&&this.yu(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new Xg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(t),u=this.Su({path:o,Du:!1});return u.vu(t),u}Cu(t){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(t),u=this.Su({path:o,Du:!1});return u.yu(),u}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return ih(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return void 0!==this.fieldMask.find(r=>t.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>t.isPrefixOf(r.field))}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(0===t.length)throw this.Mu("Document fields must not be empty");if(Ff(this.wu)&&FE.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}}class ZC{constructor(t,r,o){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=o||su(t)}Nu(t,r,o,u=!1){return new Xg({wu:t,methodName:r,Ou:o,path:xe.emptyPath(),Du:!1,xu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lc(a){const t=a._freezeSettings(),r=su(a._databaseId);return new ZC(a._databaseId,!!t.ignoreUndefinedProperties,r)}function Yg(a,t,r,o,u,d={}){const m=a.Nu(d.merge||d.mergeFields?2:0,t,r,u);Lf("Data must be an object, but it was:",m,o);const b=dy(o,m);let N,H;if(d.merge)N=new Zr(m.fieldMask),H=m.fieldTransforms;else if(d.mergeFields){const re=[];for(const pe of d.mergeFields){const Re=_c(t,pe,r);if(!m.contains(Re))throw new Mt(nt.INVALID_ARGUMENT,`Field '${Re}' is specified in your field mask but missing from your input data.`);UE(re,Re)||re.push(Re)}N=new Zr(re),H=m.fieldTransforms.filter(pe=>N.covers(pe.field))}else N=null,H=m.fieldTransforms;return new VE(new Ur(b),N,H)}class Vf extends sl{_toFieldTransform(t){if(2!==t.wu)throw t.Mu(1===t.wu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Vf}}function LE(a,t,r){return new Xg({wu:3,Ou:t.settings.Ou,methodName:a._methodName,Du:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class uy extends sl{_toFieldTransform(t){return new Vt(t.path,new Rn)}isEqual(t){return t instanceof uy}}class ly extends sl{constructor(t,r){super(t),this.Lu=r}_toFieldTransform(t){const r=LE(this,t,!0),o=this.Lu.map(d=>pu(d,r)),u=new hr(o);return new Vt(t.path,u)}isEqual(t){return t instanceof ly&&(0,ce.bD)(this.Lu,t.Lu)}}class Jg extends sl{constructor(t,r){super(t),this.Lu=r}_toFieldTransform(t){const r=LE(this,t,!0),o=this.Lu.map(d=>pu(d,r)),u=new Q(o);return new Vt(t.path,u)}isEqual(t){return t instanceof Jg&&(0,ce.bD)(this.Lu,t.Lu)}}class Yl extends sl{constructor(t,r){super(t),this.Bu=r}_toFieldTransform(t){const r=new $(t.serializer,Da(t.serializer,this.Bu));return new Vt(t.path,r)}isEqual(t){return t instanceof Yl&&this.Bu===t.Bu}}function Jl(a,t,r,o){const u=a.Nu(1,t,r);Lf("Data must be an object, but it was:",u,o);const d=[],m=Ur.empty();xs(o,(N,H)=>{const re=ra(t,N,r);H=(0,ce.Ku)(H);const pe=u.Cu(re);if(H instanceof Vf)d.push(re);else{const Re=pu(H,pe);null!=Re&&(d.push(re),m.set(re,Re))}});const b=new Zr(d);return new cy(m,b,u.fieldTransforms)}function rh(a,t,r,o,u,d){const m=a.Nu(1,t,r),b=[_c(t,o,r)],N=[u];if(d.length%2!=0)throw new Mt(nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Re=0;Re<d.length;Re+=2)b.push(_c(t,d[Re])),N.push(d[Re+1]);const H=[],re=Ur.empty();for(let Re=b.length-1;Re>=0;--Re)if(!UE(H,b[Re])){const ot=b[Re];let Bt=N[Re];Bt=(0,ce.Ku)(Bt);const Yt=m.Cu(ot);if(Bt instanceof Vf)H.push(ot);else{const Wt=pu(Bt,Yt);null!=Wt&&(H.push(ot),re.set(ot,Wt))}}const pe=new Zr(H);return new cy(re,pe,m.fieldTransforms)}function Zg(a,t,r,o=!1){return pu(r,a.Nu(o?4:3,t))}function pu(a,t){if(hy(a=(0,ce.Ku)(a)))return Lf("Unsupported field value:",t,a),dy(a,t);if(a instanceof sl)return function(o,u){if(!Ff(u.wu))throw u.Mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Mu(`${o._methodName}() is not currently supported inside arrays`);const d=o._toFieldTransform(u);d&&u.fieldTransforms.push(d)}(a,t),null;if(void 0===a&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.Du&&4!==t.wu)throw t.Mu("Nested arrays are not supported");return function(o,u){const d=[];let m=0;for(const b of o){let N=pu(b,u.Fu(m));null==N&&(N={nullValue:"NULL_VALUE"}),d.push(N),m++}return{arrayValue:{values:d}}}(a,t)}return function(o,u){if(null===(o=(0,ce.Ku)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Da(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const d=qt.fromDate(o);return{timestampValue:sc(u.serializer,d)}}if(o instanceof qt){const d=new qt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:sc(u.serializer,d)}}if(o instanceof xf)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof mc)return{bytesValue:Qc(u.serializer,o._byteString)};if(o instanceof Zi){const d=u.databaseId,m=o.firestore._databaseId;if(!m.isEqual(d))throw u.Mu(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Mu(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof kf)return b=u,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(N=>{if("number"!=typeof N)throw b.Mu("VectorValues must only contain numeric values.");return Ta(b.serializer,N)})}}}}};var b;throw u.Mu(`Unsupported field value: ${qg(o)}`)}(a,t)}function dy(a,t){const r={};return gs(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):xs(a,(o,u)=>{const d=pu(u,t.bu(o));null!=d&&(r[o]=d)}),{mapValue:{fields:r}}}function hy(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof qt||a instanceof xf||a instanceof mc||a instanceof Zi||a instanceof sl||a instanceof kf)}function Lf(a,t,r){if(!hy(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=qg(r);throw t.Mu("an object"===o?a+" a custom object":a+" "+o)}var u}function _c(a,t,r){if((t=(0,ce.Ku)(t))instanceof Vc)return t._internalPath;if("string"==typeof t)return ra(a,t);throw ih("Field path arguments must be of type string or ",a,!1,void 0,r)}const pa=new RegExp("[~\\*/\\[\\]]");function ra(a,t,r){if(t.search(pa)>=0)throw ih(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new Vc(...t.split("."))._internalPath}catch{throw ih(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function ih(a,t,r,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let b=`Function ${t}() called with invalid data`;r&&(b+=" (via `toFirestore()`)"),b+=". ";let N="";return(d||m)&&(N+=" (found",d&&(N+=` in field ${o}`),m&&(N+=` in document ${u}`),N+=")"),new Mt(nt.INVALID_ARGUMENT,b+a+N)}function UE(a,t){return a.some(r=>r.isEqual(t))}class sh{constructor(t,r,o,u,d){this._firestore=t,this._userDataWriter=r,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Zi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new e0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(em("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r)}}}class e0 extends sh{data(){return super.data()}}function em(a,t){return"string"==typeof t?ra(a,t):t instanceof Vc?t._internalPath:t._delegate._internalPath}function tm(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new Mt(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class Bf extends Uf{}function qa(a,t,...r){let o=[];t instanceof Uf&&o.push(t),o=o.concat(r),function(d){const m=d.filter(N=>N instanceof Zl).length,b=d.filter(N=>N instanceof ol).length;if(m>1||m>0&&b>0)throw new Mt(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)a=u._apply(a);return a}class ol extends Bf{constructor(t,r,o){super(),this._field=t,this._op=r,this._value=o,this.type="where"}static _create(t,r,o){return new ol(t,r,o)}_apply(t){const r=this._parse(t);return my(t._query,r),new Po(t.firestore,t.converter,Y(t._query,r))}_parse(t){const r=Lc(t.firestore);return function(d,m,b,N,H,re,pe){let Re;if(H.isKeyField()){if("array-contains"===re||"array-contains-any"===re)throw new Mt(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${re}' queries on documentId().`);if("in"===re||"not-in"===re){gy(pe,re);const ot=[];for(const Bt of pe)ot.push(Hf(N,d,Bt));Re={arrayValue:{values:ot}}}else Re=Hf(N,d,pe)}else"in"!==re&&"not-in"!==re&&"array-contains-any"!==re||gy(pe,re),Re=Zg(b,"where",pe,"in"===re||"not-in"===re);return O.create(H,re,Re)}(t._query,0,r,t.firestore._databaseId,this._field,this._op,this._value)}}class Zl extends Uf{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Zl(t,r)}_parse(t){const r=this._queryConstraints.map(o=>o._parse(t)).filter(o=>o.getFilters().length>0);return 1===r.length?r[0]:ee.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return 0===r.getFilters().length?t:(function(u,d){let m=u;const b=d.getFlattenedFilters();for(const N of b)my(m,N),m=Y(m,N)}(t._query,r),new Po(t.firestore,t.converter,Y(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class jf extends Bf{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new jf(t,r)}_apply(t){const r=function(u,d,m){if(null!==u.startAt)throw new Mt(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Mt(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ai(d,m)}(t._query,this._field,this._direction);return new Po(t.firestore,t.converter,function(u,d){const m=u.explicitOrderBy.concat([d]);return new Qr(u.path,u.collectionGroup,m,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(t._query,r))}}class al extends Bf{constructor(t,r,o){super(),this.type=t,this._limit=r,this._limitType=o}static _create(t,r,o){return new al(t,r,o)}_apply(t){return new Po(t.firestore,t.converter,fe(t._query,this._limit,this._limitType))}}class ah extends Bf{constructor(t,r,o){super(),this.type=t,this._docOrFields=r,this._inclusive=o}static _create(t,r,o){return new ah(t,r,o)}_apply(t){const r=uh(t,this.type,this._docOrFields,this._inclusive);return new Po(t.firestore,t.converter,(d=r,new Qr((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,d,u.endAt)));var u,d}}class $f extends Bf{constructor(t,r,o){super(),this.type=t,this._docOrFields=r,this._inclusive=o}static _create(t,r,o){return new $f(t,r,o)}_apply(t){const r=uh(t,this.type,this._docOrFields,this._inclusive);return new Po(t.firestore,t.converter,(d=r,new Qr((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,d)));var u,d}}function uh(a,t,r,o){if(r[0]=(0,ce.Ku)(r[0]),r[0]instanceof sh)return function(d,m,b,N,H){if(!N)throw new Mt(nt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${b}().`);const re=[];for(const pe of Z(d))if(pe.field.isKeyField())re.push(Wi(m,N.key));else{const Re=N.data.field(pe.field);if(Ds(Re))throw new Mt(nt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+pe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Re){const ot=pe.field.canonicalString();throw new Mt(nt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ot}' (used as the orderBy) does not exist.`)}re.push(Re)}return new ls(re,H)}(a._query,a.firestore._databaseId,t,r[0]._document,o);{const u=Lc(a.firestore);return function(m,b,N,H,re,pe){const Re=m.explicitOrderBy;if(re.length>Re.length)throw new Mt(nt.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ot=[];for(let Bt=0;Bt<re.length;Bt++){const Yt=re[Bt];if(Re[Bt].field.isKeyField()){if("string"!=typeof Yt)throw new Mt(nt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof Yt}`);if(!la(m)&&-1!==Yt.indexOf("/"))throw new Mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${Yt}' contains a slash.`);const Wt=m.path.child(Ln.fromString(Yt));if(!we.isDocumentKey(Wt))throw new Mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${Wt}' is not because it contains an odd number of segments.`);const Bn=new we(Wt);ot.push(Wi(b,Bn))}else{const Wt=Zg(N,H,Yt);ot.push(Wt)}}return new ls(ot,pe)}(a._query,a.firestore._databaseId,u,t,r,o)}}function Hf(a,t,r){if("string"==typeof(r=(0,ce.Ku)(r))){if(""===r)throw new Mt(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!la(t)&&-1!==r.indexOf("/"))throw new Mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const o=t.path.child(Ln.fromString(r));if(!we.isDocumentKey(o))throw new Mt(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Wi(a,new we(o))}if(r instanceof Zi)return Wi(a,r._key);throw new Mt(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qg(r)}.`)}function gy(a,t){if(!Array.isArray(a)||0===a.length)throw new Mt(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function my(a,t){const r=function(u,d){for(const m of u)for(const b of m.getFlattenedFilters())if(d.indexOf(b.op)>=0)return b.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw new Mt(nt.INVALID_ARGUMENT,r===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class zf{convertValue(t,r="none"){switch(Bi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ln(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(mi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw St()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const o={};return xs(t,(u,d)=>{o[u]=this.convertValue(d,r)}),o}convertVectorValue(t){var r,o,u;const d=null===(u=null===(o=null===(r=t.fields)||void 0===r?void 0:r.value.arrayValue)||void 0===o?void 0:o.values)||void 0===u?void 0:u.map(m=>ln(m.doubleValue));return new kf(d)}convertGeoPoint(t){return new xf(ln(t.latitude),ln(t.longitude))}convertArray(t,r){return(t.values||[]).map(o=>this.convertValue(o,r))}convertServerTimestamp(t,r){switch(r){case"previous":const o=Fs(t);return null==o?null:this.convertValue(o,r);case"estimate":return this.convertTimestamp(Vs(t));default:return null}}convertTimestamp(t){const r=is(t);return new qt(r.seconds,r.nanos)}convertDocumentKey(t,r){const o=Ln.fromString(t);mt(Zo(o));const u=new ki(o.get(1),o.get(3)),d=new we(o.popFirst(5));return u.isEqual(r)||yn(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),d}}function yc(a,t,r){let o;return o=a?r&&(r.merge||r.mergeFields)?a.toFirestore(t,r):a.toFirestore(t):t,o}class _y extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new mc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Zi(this.firestore,null,r)}}class gu{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class vc extends sh{constructor(t,r,o,u,d,m){super(t,r,o,u,m),this._firestore=t,this._firestoreImpl=t,this.metadata=d}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const o=this._document.data.field(em("DocumentSnapshot.get",t));if(null!==o)return this._userDataWriter.convertValue(o,r.serverTimestamps)}}}class ed extends vc{data(t={}){return super.data(t)}}class Ec{constructor(t,r,o,u){this._firestore=t,this._userDataWriter=r,this._snapshot=u,this.metadata=new gu(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,r){this._snapshot.docs.forEach(o=>{t.call(r,new ed(this._firestore,this._userDataWriter,o.key,o,new gu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Mt(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,d){if(u._snapshot.oldDocs.isEmpty()){let m=0;return u._snapshot.docChanges.map(b=>({type:"added",doc:new ed(u._firestore,u._userDataWriter,b.doc.key,b.doc,new gu(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:m++}))}{let m=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(b=>d||3!==b.type).map(b=>{const N=new ed(u._firestore,u._userDataWriter,b.doc.key,b.doc,new gu(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter);let H=-1,re=-1;return 0!==b.type&&(H=m.indexOf(b.doc.key),m=m.delete(b.doc.key)),1!==b.type&&(m=m.add(b.doc),re=m.indexOf(b.doc.key)),{type:yy(b.type),doc:N,oldIndex:H,newIndex:re}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function yy(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return St()}}function lh(a,t){return a instanceof vc&&t instanceof vc?a._firestore===t._firestore&&a._key.isEqual(t._key)&&(null===a._document?null===t._document:a._document.isEqual(t._document))&&a._converter===t._converter:a instanceof Ec&&t instanceof Ec&&a._firestore===t._firestore&&Of(a.query,t.query)&&a.metadata.isEqual(t.metadata)&&a._snapshot.isEqual(t._snapshot)}class Uc extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new mc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Zi(this.firestore,null,r)}}function Ey(a,t,r){a=$r(a,Zi);const o=$r(a.firestore,wi),u=yc(a.converter,t,r);return cl(o,[Yg(Lc(o),"setDoc",a._key,u,null!==a.converter,r).toMutation(a._key,Sn.none())])}function am(a,t,r,...o){a=$r(a,Zi);const u=$r(a.firestore,wi),d=Lc(u);let m;return m="string"==typeof(t=(0,ce.Ku)(t))||t instanceof Vc?rh(d,"updateDoc",a._key,t,r,o):Jl(d,"updateDoc",a._key,t),cl(u,[m.toMutation(a._key,Sn.exists(!0))])}function Iy(a,...t){var r,o,u;a=(0,ce.Ku)(a);let d={includeMetadataChanges:!1,source:"default"},m=0;"object"!=typeof t[m]||Qg(t[m])||(d=t[m],m++);const b={includeMetadataChanges:d.includeMetadataChanges,source:d.source};if(Qg(t[m])){const pe=t[m];t[m]=null===(r=pe.next)||void 0===r?void 0:r.bind(pe),t[m+1]=null===(o=pe.error)||void 0===o?void 0:o.bind(pe),t[m+2]=null===(u=pe.complete)||void 0===u?void 0:u.bind(pe)}let N,H,re;if(a instanceof Zi)H=$r(a.firestore,wi),re=Yi(a._key.path),N={next:pe=>{t[m]&&t[m](Er(H,a,pe))},error:t[m+1],complete:t[m+2]};else{const pe=$r(a,Po);H=$r(pe.firestore,wi),re=pe._query;const Re=new Uc(H);N={next:ot=>{t[m]&&t[m](new Ec(H,Re,pe,ot))},error:t[m+1],complete:t[m+2]},tm(a._query)}return function(Re,ot,Bt,Yt){const Wt=new el(Yt),Bn=new mg(ot,Wt,Bt);return Re.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return hg(yield Xl(Re),Bn)})),()=>{Wt.za(),Re.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return fg(yield Xl(Re),Bn)}))}}(hs(H),re,b,N)}function cl(a,t){return function(o,u){const d=new er;return o.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function cu(a,t,r){return wf.apply(this,arguments)}(yield Hg(o),u,d)})),d.promise}(hs(a),t)}function Er(a,t,r){const o=r.docs.get(t._key),u=new Uc(a);return new vc(a,u,t._key,o,new gu(r.hasPendingWrites,r.fromCache),t.converter)}const Py={maxAttempts:5};class qf{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Lc(t)}set(t,r,o){this._verifyNotCommitted();const u=mu(t,this._firestore),d=yc(u.converter,r,o),m=Yg(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,Sn.none())),this}update(t,r,o,...u){this._verifyNotCommitted();const d=mu(t,this._firestore);let m;return m="string"==typeof(r=(0,ce.Ku)(r))||r instanceof Vc?rh(this._dataReader,"WriteBatch.update",d._key,r,o,u):Jl(this._dataReader,"WriteBatch.update",d._key,r),this._mutations.push(m.toMutation(d._key,Sn.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=mu(t,this._firestore);return this._mutations=this._mutations.concat(new Gs(r._key,Sn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Mt(nt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mu(a,t){if((a=(0,ce.Ku)(a)).firestore!==t)throw new Mt(nt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class QE extends class{constructor(r,o){this._firestore=r,this._transaction=o,this._dataReader=Lc(r)}get(r){const o=mu(r,this._firestore),u=new _y(this._firestore);return this._transaction.lookup([o._key]).then(d=>{if(!d||1!==d.length)return St();const m=d[0];if(m.isFoundDocument())return new sh(this._firestore,u,m.key,m,o.converter);if(m.isNoDocument())return new sh(this._firestore,u,o._key,null,o.converter);throw St()})}set(r,o,u){const d=mu(r,this._firestore),m=yc(d.converter,o,u),b=Yg(this._dataReader,"Transaction.set",d._key,m,null!==d.converter,u);return this._transaction.set(d._key,b),this}update(r,o,u,...d){const m=mu(r,this._firestore);let b;return b="string"==typeof(o=(0,ce.Ku)(o))||o instanceof Vc?rh(this._dataReader,"Transaction.update",m._key,o,u,d):Jl(this._dataReader,"Transaction.update",m._key,o),this._transaction.update(m._key,b),this}delete(r){const o=mu(r,this._firestore);return this._transaction.delete(o._key),this}}{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=mu(t,this._firestore),o=new Uc(this._firestore);return super.get(t).then(u=>new vc(this._firestore,o,r._key,u._document,new gu(!1,!1),r.converter))}}function pm(a,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Mt("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return t}function xy(){if(typeof Uint8Array>"u")throw new Mt("unimplemented","Uint8Arrays are not available in this environment.")}function ky(){if(!function oi(){return typeof atob<"u"}())throw new Mt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,r=!0){en=Ve.SDK_VERSION,(0,Ve._registerComponent)(new Ye.uA("firestore",(o,{instanceIdentifier:u,options:d})=>{const m=o.getProvider("app").getImmediate(),b=new wi(new Vr(o.getProvider("auth-internal")),new Or(o.getProvider("app-check-internal")),function(H,re){if(!Object.prototype.hasOwnProperty.apply(H.options,["projectId"]))throw new Mt(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ki(H.options.projectId,re)}(m,u),m);return d=Object.assign({useFetchStreams:r},d),b._setSettings(d),b},"PUBLIC").setMultipleInstances(!0)),(0,Ve.registerVersion)(un,"4.7.1",t),(0,Ve.registerVersion)(un,"4.7.1","esm2017")}();class ph{constructor(t){this._delegate=t}static fromBase64String(t){return ky(),new ph(mc.fromBase64String(t))}static fromUint8Array(t){return xy(),new ph(mc.fromUint8Array(t))}toBase64(){return ky(),this._delegate.toBase64()}toUint8Array(){return xy(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Na(a){return function gm(a,t){if("object"!=typeof a||null===a)return!1;const r=a;for(const o of t)if(o in r&&"function"==typeof r[o])return!0;return!1}(a,["next","error","complete"])}class sI{enableIndexedDbPersistence(t,r){return function SE(a,t){NE(a=$r(a,wi));const r=hs(a);if(r._uninitializedComponentsProvider)throw new Mt(nt.FAILED_PRECONDITION,"SDK cache is already specified.");Qn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=a._freezeSettings(),u=new du;return Nf(r,u,new Lg(u,o.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(t){return function PE(a){NE(a=$r(a,wi));const t=hs(a);if(t._uninitializedComponentsProvider)throw new Mt(nt.FAILED_PRECONDITION,"SDK cache is already specified.");Qn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings(),o=new du;return Nf(t,o,new Ug(o,r.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function oy(a){if(a._initialized&&!a._terminated)throw new Mt(nt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new er;return a._queue.enqueueAndForgetEvenWhileRestricted((0,ae.A)(function*(){try{yield(r=(0,ae.A)(function*(u){if(!Jr.D())return Promise.resolve();const d=u+"main";yield Jr.delete(d)}),function o(u){return r.apply(this,arguments)})(xd(a._databaseId,a._persistenceKey)),t.resolve()}catch(r){t.reject(r)}var r})),t.promise}(t._delegate)}}class Fy{constructor(t,r,o){this._delegate=r,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},t instanceof ki||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const r=this._delegate._getSettings();!t.merge&&r.host!==t.host&&Qn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},r),t)).merge,this._delegate._setSettings(t)}useEmulator(t,r,o={}){!function DE(a,t,r,o={}){var u;const d=(a=$r(a,rl))._getSettings(),m=`${t}:${r}`;if("firestore.googleapis.com"!==d.host&&d.host!==m&&Qn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},d),{host:m,ssl:!1})),o.mockUserToken){let b,N;if("string"==typeof o.mockUserToken)b=o.mockUserToken,N=Jt.MOCK_USER;else{b=(0,ce.Fy)(o.mockUserToken,null===(u=a._app)||void 0===u?void 0:u.options.projectId);const H=o.mockUserToken.sub||o.mockUserToken.user_id;if(!H)throw new Mt(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new Jt(H)}a._authCredentials=new Pn(new ir(b,N))}}(this._delegate,t,r,o)}enableNetwork(){return function RE(a){return function fu(a){return a.asyncQueue.enqueue((0,ae.A)(function*(){const t=yield $g(a),r=yield J_(a);return t.setNetworkEnabled(!0),function(u){const d=Ot(u);return d.L_.delete(0),Ld(d)}(r)}))}(hs(a=$r(a,wi)))}(this._delegate)}disableNetwork(){return function OE(a){return function nh(a){return a.asyncQueue.enqueue((0,ae.A)(function*(){const t=yield $g(a),r=yield J_(a);return t.setNetworkEnabled(!1),(o=(0,ae.A)(function*(d){const m=Ot(d);m.L_.add(0),yield Ud(m),m.q_.set("Offline")}),function u(d){return o.apply(this,arguments)})(r);var o}))}(hs(a=$r(a,wi)))}(this._delegate)}enablePersistence(t){let r=!1,o=!1;return t&&(r=!!t.synchronizeTabs,o=!!t.experimentalForceOwningTab,zg("synchronizeTabs",r,"experimentalForceOwningTab",o)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ME(a){return function(r){const o=new er;return r.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return function zC(a,t){return Kl.apply(this,arguments)}(yield Hg(r),o)})),o.promise}(hs(a=$r(a,wi)))}(this._delegate)}onSnapshotsInSync(t){return function Cy(a,t){return function QC(a,t){const r=new el(t);return a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return u=yield Xl(a),d=r,Ot(u).Y_.add(d),void d.next();var u,d})),()=>{r.za(),a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return u=yield Xl(a),d=r,void Ot(u).Y_.delete(d);var u,d}))}}(hs(a=$r(a,wi)),Qg(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Mt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new rd(this,ty(this._delegate,t))}catch(r){throw Mo(r,"collection()","Firestore.collection()")}}doc(t){try{return new ga(this,Rf(this._delegate,t))}catch(r){throw Mo(r,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new zo(this,function AE(a,t){if(a=$r(a,rl),nl("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Mt(nt.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Po(a,null,(o=t,new Qr(Ln.emptyPath(),o)));var o}(this._delegate,t))}catch(r){throw Mo(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function XE(a,t,r){a=$r(a,wi);const o=Object.assign(Object.assign({},Py),r);return function(d){if(d.maxAttempts<1)throw new Mt(nt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(d,m,b){const N=new er;return d.asyncQueue.enqueueAndForget((0,ae.A)(function*(){const H=yield function Z_(a){return th(a).then(t=>t.datastore)}(d);new Y_(d.asyncQueue,H,b,m,N).ru()})),N.promise}(hs(a),u=>t(new QE(a,u)),o)}(this._delegate,r=>t(new mh(this,r)))}batch(){return hs(this._delegate),new Xf(new qf(this._delegate,t=>cl(this._delegate,t)))}loadBundle(t){return function ay(a,t){const r=hs(a=$r(a,wi)),o=new bE;return function ey(a,t,r,o){const u=function(m,b){let N;return N="string"==typeof m?da().encode(m):m,re=function(re,pe){if(re instanceof Uint8Array)return Zd(re,void 0);if(re instanceof ArrayBuffer)return Zd(new Uint8Array(re),void 0);if(re instanceof ReadableStream)return re.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new Q_(re,b);var re}(r,su(t));a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){!function gE(a,t,r){const o=Ot(a);var u;(u=(0,ae.A)(function*(m,b,N){try{const H=yield b.getMetadata();if(yield function(Bt,Yt){const Wt=Ot(Bt),Bn=Li(Yt.createTime);return Wt.persistence.runTransaction("hasNewerBundle","readonly",Zn=>Wt.Gr.getBundleMetadata(Zn,Yt.id)).then(Zn=>!!Zn&&Zn.createTime.compareTo(Bn)>=0)}(m.localStore,H))return yield b.close(),N._completeWith({taskState:"Success",documentsLoaded:(Bt=H).totalDocuments,bytesLoaded:Bt.totalBytes,totalDocuments:Bt.totalDocuments,totalBytes:Bt.totalBytes}),Promise.resolve(new Set);N._updateProgress(Gd(H));const re=new L_(H,m.localStore,b.serializer);let pe=yield b.Ua();for(;pe;){const ot=yield re.la(pe);ot&&N._updateProgress(ot),pe=yield b.Ua()}const Re=yield re.complete();return yield Oa(m,Re.Ia,void 0),yield function(Bt,Yt){const Wt=Ot(Bt);return Wt.persistence.runTransaction("Save bundle","readwrite",Bn=>Wt.Gr.saveBundleMetadata(Bn,Yt))}(m.localStore,H),N._completeWith(Re.progress),Promise.resolve(Re.Pa)}catch(H){return Qn("SyncEngine",`Loading bundle failed with ${H}`),N._failWith(H),Promise.resolve(new Set)}var Bt}),function d(m,b,N){return u.apply(this,arguments)})(o,t,r).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Hg(a),u,o)}))}(r,a._databaseId,t,o),o}(this._delegate,t)}namedQuery(t){return function JC(a,t){return function EE(a,t){return a.asyncQueue.enqueue((0,ae.A)(function*(){return function(o,u){const d=Ot(o);return d.persistence.runTransaction("Get named query","readonly",m=>d.Gr.getNamedQuery(m,u))}(yield tl(a),t)}))}(hs(a=$r(a,wi)),t).then(r=>r?new Po(a,null,r.query):null)}(this._delegate,t).then(r=>r?new zo(this,r):null)}}class gh extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new ph(new mc(t))}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return ga.forKey(r,this.firestore,null)}}class mh{constructor(t,r){this._firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}get(t){const r=Qa(t);return this._delegate.get(r).then(o=>new ul(this._firestore,new vc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,r.converter)))}set(t,r,o){const u=Qa(t);return o?(pm("Transaction.set",o),this._delegate.set(u,r,o)):this._delegate.set(u,r),this}update(t,r,o,...u){const d=Qa(t);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...u),this}delete(t){const r=Qa(t);return this._delegate.delete(r),this}}class Xf{constructor(t){this._delegate=t}set(t,r,o){const u=Qa(t);return o?(pm("WriteBatch.set",o),this._delegate.set(u,r,o)):this._delegate.set(u,r),this}update(t,r,o,...u){const d=Qa(t);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...u),this}delete(t){const r=Qa(t);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class nd{constructor(t,r,o){this._firestore=t,this._userDataWriter=r,this._delegate=o}fromFirestore(t,r){const o=new ed(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new ma(this._firestore,o),r??{})}toFirestore(t,r){return r?this._delegate.toFirestore(t,r):this._delegate.toFirestore(t)}static getInstance(t,r){const o=nd.INSTANCES;let u=o.get(t);u||(u=new WeakMap,o.set(t,u));let d=u.get(r);return d||(d=new nd(t,new gh(t),r),u.set(r,d)),d}}nd.INSTANCES=new WeakMap;class ga{constructor(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}static forPath(t,r,o){if(t.length%2!=0)throw new Mt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new ga(r,new Zi(r._delegate,o,new we(t)))}static forKey(t,r,o){return new ga(r,new Zi(r._delegate,o,t))}get id(){return this._delegate.id}get parent(){return new rd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new rd(this.firestore,ty(this._delegate,t))}catch(r){throw Mo(r,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,ce.Ku)(t))instanceof Zi&&ny(this._delegate,t)}set(t,r){r=pm("DocumentReference.set",r);try{return r?Ey(this._delegate,t,r):Ey(this._delegate,t)}catch(o){throw Mo(o,"setDoc()","DocumentReference.set()")}}update(t,r,...o){try{return 1===arguments.length?am(this._delegate,t):am(this._delegate,t,r,...o)}catch(u){throw Mo(u,"updateDoc()","DocumentReference.update()")}}delete(){return function zE(a){return cl($r(a.firestore,wi),[new Gs(a._key,Sn.none())])}(this._delegate)}onSnapshot(...t){const r=mm(t),o=_h(t,u=>new ul(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Iy(this._delegate,r,o)}get(t){let r;return r="cache"===t?.source?function sm(a){a=$r(a,Zi);const t=$r(a.firestore,wi),r=hs(t),o=new Uc(t);return function _E(a,t){const r=new er;return a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return(o=(0,ae.A)(function*(d,m,b){try{const N=yield function(re,pe){const Re=Ot(re);return Re.persistence.runTransaction("read document","readonly",ot=>Re.localDocuments.getDocument(ot,pe))}(d,m);N.isFoundDocument()?b.resolve(N):N.isNoDocument()?b.resolve(null):b.reject(new Mt(nt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const H=au(N,`Failed to get document '${m} from cache`);b.reject(H)}}),function u(d,m,b){return o.apply(this,arguments)})(yield tl(a),t,r);var o})),r.promise}(r,a._key).then(u=>new vc(t,o,a._key,u,new gu(null!==u&&u.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===t?.source?function hh(a){a=$r(a,Zi);const t=$r(a.firestore,wi);return yE(hs(t),a._key,{source:"server"}).then(r=>Er(t,a,r))}(this._delegate):function dh(a){a=$r(a,Zi);const t=$r(a.firestore,wi);return yE(hs(t),a._key).then(r=>Er(t,a,r))}(this._delegate),r.then(o=>new ul(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(t){return new ga(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}function Mo(a,t,r){return a.message=a.message.replace(t,r),a}function mm(a){for(const t of a)if("object"==typeof t&&!Na(t))return t;return{}}function _h(a,t){var r,o;let u;return u=Na(a[0])?a[0]:Na(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:d=>{u.next&&u.next(t(d))},error:null===(r=u.error)||void 0===r?void 0:r.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class ul{constructor(t,r){this._firestore=t,this._delegate=r}get ref(){return new ga(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,r){return this._delegate.get(t,r)}isEqual(t){return lh(this._delegate,t._delegate)}}class ma extends ul{data(t){const r=this._delegate.data(t);return this._delegate._converter||function ni(a,t){a||St()}(void 0!==r),r}}class zo{constructor(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}where(t,r,o){try{return new zo(this.firestore,qa(this._delegate,function nm(a,t,r){const o=t,u=em("where",a);return ol._create(u,o,r)}(t,r,o)))}catch(u){throw Mo(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,r){try{return new zo(this.firestore,qa(this._delegate,function rm(a,t="asc"){const r=t,o=em("orderBy",a);return jf._create(o,r)}(t,r)))}catch(o){throw Mo(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new zo(this.firestore,qa(this._delegate,function BE(a){return TE("limit",a),al._create("limit",a,"F")}(t)))}catch(r){throw Mo(r,"limit()","Query.limit()")}}limitToLast(t){try{return new zo(this.firestore,qa(this._delegate,function jE(a){return TE("limitToLast",a),al._create("limitToLast",a,"L")}(t)))}catch(r){throw Mo(r,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new zo(this.firestore,qa(this._delegate,function $E(...a){return ah._create("startAt",a,!0)}(...t)))}catch(r){throw Mo(r,"startAt()","Query.startAt()")}}startAfter(...t){try{return new zo(this.firestore,qa(this._delegate,function HE(...a){return ah._create("startAfter",a,!1)}(...t)))}catch(r){throw Mo(r,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new zo(this.firestore,qa(this._delegate,function py(...a){return $f._create("endBefore",a,!1)}(...t)))}catch(r){throw Mo(r,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new zo(this.firestore,qa(this._delegate,function ch(...a){return $f._create("endAt",a,!0)}(...t)))}catch(r){throw Mo(r,"endAt()","Query.endAt()")}}isEqual(t){return Of(this._delegate,t._delegate)}get(t){let r;return r="cache"===t?.source?function om(a){a=$r(a,Po);const t=$r(a.firestore,wi),r=hs(t),o=new Uc(t);return function KC(a,t){const r=new er;return a.asyncQueue.enqueueAndForget((0,ae.A)(function*(){return(o=(0,ae.A)(function*(d,m,b){try{const N=yield jt(d,m,!0),H=new Eg(m,N.Ts),re=H.ma(N.documents),pe=H.applyChanges(re,!1);b.resolve(pe.snapshot)}catch(N){const H=au(N,`Failed to execute query '${m} against cache`);b.reject(H)}}),function u(d,m,b){return o.apply(this,arguments)})(yield tl(a),t,r);var o})),r.promise}(r,a._query).then(u=>new Ec(t,o,a,u))}(this._delegate):"server"===t?.source?function Wf(a){a=$r(a,Po);const t=$r(a.firestore,wi),r=hs(t),o=new Uc(t);return vE(r,a._query,{source:"server"}).then(u=>new Ec(t,o,a,u))}(this._delegate):function vy(a){a=$r(a,Po);const t=$r(a.firestore,wi),r=hs(t),o=new Uc(t);return tm(a._query),vE(r,a._query).then(u=>new Ec(t,o,a,u))}(this._delegate),r.then(o=>new yh(this.firestore,new Ec(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...t){const r=mm(t),o=_h(t,u=>new yh(this.firestore,new Ec(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Iy(this._delegate,r,o)}withConverter(t){return new zo(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}class oI{constructor(t,r){this._firestore=t,this._delegate=r}get type(){return this._delegate.type}get doc(){return new ma(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yh{constructor(t,r){this._firestore=t,this._delegate=r}get query(){return new zo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new ma(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(r=>new oI(this._firestore,r))}forEach(t,r){this._delegate.forEach(o=>{t.call(r,new ma(this._firestore,o))})}isEqual(t){return lh(this._delegate,t._delegate)}}class rd extends zo{constructor(t,r){super(t,r),this.firestore=t,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new ga(this.firestore,t):null}doc(t){try{return new ga(this.firestore,void 0===t?Rf(this._delegate):Rf(this._delegate,t))}catch(r){throw Mo(r,"doc()","CollectionReference.doc()")}}add(t){return function WE(a,t){const r=$r(a.firestore,wi),o=Rf(a),u=yc(a.converter,t);return cl(r,[Yg(Lc(a.firestore),"addDoc",o._key,u,null!==a.converter,{}).toMutation(o._key,Sn.exists(!1))]).then(()=>o)}(this._delegate,t).then(r=>new ga(this.firestore,r))}isEqual(t){return ny(this._delegate,t._delegate)}withConverter(t){return new rd(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}function Qa(a){return $r(a,Zi)}class Yf{constructor(...t){this._delegate=new Vc(...t)}static documentId(){return new Yf(xe.keyField().canonicalString())}isEqual(t){return(t=(0,ce.Ku)(t))instanceof Vc&&this._delegate._internalPath.isEqual(t._internalPath)}}class xa{constructor(t){this._delegate=t}static serverTimestamp(){const t=function YE(){return new uy("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new xa(t)}static delete(){const t=function My(){return new Vf("deleteField")}();return t._methodName="FieldValue.delete",new xa(t)}static arrayUnion(...t){const r=function JE(...a){return new ly("arrayUnion",a)}(...t);return r._methodName="FieldValue.arrayUnion",new xa(r)}static arrayRemove(...t){const r=function ZE(...a){return new Jg("arrayRemove",a)}(...t);return r._methodName="FieldValue.arrayRemove",new xa(r)}static increment(t){const r=function eI(a){return new Yl("increment",a)}(t);return r._methodName="FieldValue.increment",new xa(r)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const vh={Firestore:Fy,GeoPoint:xf,Timestamp:qt,Blob:ph,Transaction:mh,WriteBatch:Xf,DocumentReference:ga,DocumentSnapshot:ul,Query:zo,QueryDocumentSnapshot:ma,QuerySnapshot:yh,CollectionReference:rd,FieldPath:Yf,FieldValue:xa,setLogLevel:function Vy(a){!function jn(a){vn.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function Eh(a){(function _m(a,t){a.INTERNAL.registerComponent(new Ye.uA("firestore-compat",r=>{const o=r.getProvider("app-compat").getImmediate(),u=r.getProvider("firestore").getImmediate();return t(o,u)},"PUBLIC").setServiceProps(Object.assign({},vh)))})(a,(t,r)=>new Fy(t,r,new sI)),a.registerVersion("@firebase/firestore-compat","0.3.36")}(de.A);var Ly=x(7935);function By(a,t){return function Uy(a,t=B.E){return new Le.c(r=>{let o;return null!=t?t.schedule(()=>{o=a.onSnapshot({includeMetadataChanges:!0},r)}):o=a.onSnapshot({includeMetadataChanges:!0},r),()=>{o?.()}})}(a,t)}function ym(a,t){return By(a,t).pipe((0,Be.T)(r=>({payload:r,type:"query"})))}class jy{ref;afs;constructor(t,r){this.ref=t,this.afs=r}set(t,r){return this.ref.set(t,r)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,r){const o=this.ref.collection(t),{ref:u,query:d}=id(o,r);return new vm(u,d,this.afs)}snapshotChanges(){return function aI(a,t){return By(a,t).pipe((0,_e.Z)(void 0),De(),(0,Be.T)(r=>{const[o,u]=r;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(se.U0)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Be.T)(({payload:r})=>t.idField?{...r.data(),[t.idField]:r.id}:r.data()))}get(t){return(0,$e.H)(this.ref.get(t)).pipe(se.U0)}}function Ih(a,t){return ym(a,t).pipe((0,_e.Z)(void 0),De(),(0,Be.T)(r=>{const[o,u]=r,d=u.payload.docChanges(),m=d.map(b=>({type:b.type,payload:b}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((b,N)=>{const H=d.find(pe=>pe.doc.ref.isEqual(b.ref)),re=o?.payload.docs.find(pe=>pe.ref.isEqual(b.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(b.metadata)||!H&&re&&JSON.stringify(re.metadata)===JSON.stringify(b.metadata)||m.push({type:"modified",payload:{oldIndex:N,newIndex:N,type:"modified",doc:b}})}),m}))}function Ch(a,t,r){return Ih(a,r).pipe((0,At.S)((o,u)=>function cI(a,t,r){return t.forEach(o=>{r.indexOf(o.type)>-1&&(a=function uI(a,t){switch(t.type){case"added":if(!a[t.newIndex]||!a[t.newIndex].doc.ref.isEqual(t.doc.ref))return $y(a,t.newIndex,0,t);break;case"modified":if(null==a[t.oldIndex]||a[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const r=a.slice();return r.splice(t.oldIndex,1),r.splice(t.newIndex,0,t),r}return $y(a,t.newIndex,1,t)}break;case"removed":if(a[t.oldIndex]&&a[t.oldIndex].doc.ref.isEqual(t.doc.ref))return $y(a,t.oldIndex,1)}return a}(a,o))}),a}(o,u.map(d=>d.payload),t),[]),function st(a,t=yt.D){return a=a??bt,(0,He.N)((r,o)=>{let u,d=!0;r.subscribe((0,Tt._)(o,m=>{const b=t(m);(d||!a(u,b))&&(d=!1,u=b,o.next(m))}))})}(),(0,Be.T)(o=>o.map(u=>({type:u.type,payload:u}))))}function $y(a,t,r,...o){const u=a.slice();return u.splice(t,r,...o),u}function Hy(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class vm{ref;query;afs;constructor(t,r,o){this.ref=t,this.query=r,this.afs=o}stateChanges(t){let r=Ih(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(r=r.pipe((0,Be.T)(o=>o.filter(u=>t.indexOf(u.type)>-1)))),r.pipe((0,_e.Z)(void 0),De(),(0,gt.p)(([o,u])=>u.length>0||!o),(0,Be.T)(([,o])=>o),se.U0)}auditTrail(t){return this.stateChanges(t).pipe((0,At.S)((r,o)=>[...r,...o],[]))}snapshotChanges(t){const r=Hy(t);return Ch(this.query,r,this.afs.schedulers.outsideAngular).pipe(se.U0)}valueChanges(t={}){return ym(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.T)(r=>r.payload.docs.map(o=>t.idField?{...o.data(),[t.idField]:o.id}:o.data())),se.U0)}get(t){return(0,$e.H)(this.query.get(t)).pipe(se.U0)}add(t){return this.ref.add(t)}doc(t){return new jy(this.ref.doc(t),this.afs)}}class lI{query;afs;constructor(t,r){this.query=t,this.afs=r}stateChanges(t){return t&&0!==t.length?Ih(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.T)(r=>r.filter(o=>t.indexOf(o.type)>-1)),(0,gt.p)(r=>r.length>0),se.U0):Ih(this.query,this.afs.schedulers.outsideAngular).pipe(se.U0)}auditTrail(t){return this.stateChanges(t).pipe((0,At.S)((r,o)=>[...r,...o],[]))}snapshotChanges(t){const r=Hy(t);return Ch(this.query,r,this.afs.schedulers.outsideAngular).pipe(se.U0)}valueChanges(t={}){return ym(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.T)(o=>o.payload.docs.map(u=>t.idField?{[t.idField]:u.id,...u.data()}:u.data())),se.U0)}get(t){return(0,$e.H)(this.query.get(t)).pipe(se.U0)}}const Gy=new w.nKC("angularfire2.enableFirestorePersistence"),Em=new w.nKC("angularfire2.firestore.persistenceSettings"),Im=new w.nKC("angularfire2.firestore.settings"),zy=new w.nKC("angularfire2.firestore.use-emulator");function id(a,t=(r=>r)){return{query:t(a),ref:a}}let wh=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,o,u,d,m,b,N,H,re,pe,Re,ot,Bt,Yt,Wt,Bn,Zn){this.schedulers=N;const kn=(0,Pe.iB)(r,b,o),ur=re;pe&&(0,M.gF)(kn,b,Re,Bt,Yt,Wt,ot,Bn),[this.firestore,this.persistenceEnabled$]=(0,Pe.BM)(`${kn.name}.firestore`,"AngularFirestore",kn.name,()=>{const Hr=b.runOutsideAngular(()=>kn.firestore());if(d&&Hr.settings(d),ur&&Hr.useEmulator(...ur),u&&!(0,_.Vy)(m)){const Ar=()=>{try{return(0,$e.H)(Hr.enablePersistence(H||void 0).then(()=>!0,()=>!1))}catch(tt){return typeof console<"u"&&console.warn(tt),(0,ve.of)(!1)}};return[Hr,b.runOutsideAngular(Ar)]}return[Hr,(0,ve.of)(!1)]},[d,ur,u])}collection(r,o){let u;u="string"==typeof r?this.firestore.collection(r):r;const{ref:d,query:m}=id(u,o),b=this.schedulers.ngZone.run(()=>d);return new vm(b,m,this)}collectionGroup(r,o){const u=o||(m=>m),d=this.firestore.collectionGroup(r);return new lI(u(d),this)}doc(r){let o;o="string"==typeof r?this.firestore.doc(r):r;const u=this.schedulers.ngZone.run(()=>o);return new jy(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||a)(w.KVO(Pe.rx),w.KVO(Pe.uP,8),w.KVO(Gy,8),w.KVO(Im,8),w.KVO(w.Agw),w.KVO(w.SKi),w.KVO(se.u0),w.KVO(Em,8),w.KVO(zy,8),w.KVO(M.DS,8),w.KVO(M.CP,8),w.KVO(M.yy,8),w.KVO(M.ZP,8),w.KVO(M.$z,8),w.KVO(M.AU,8),w.KVO(M.UB,8),w.KVO(se.Jv,8))};static \u0275prov=w.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})(),Th=(()=>{class a{constructor(){Ly.A.registerVersion("angularfire",se.xv.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:Gy,useValue:!0},{provide:Em,useValue:r}]}}static \u0275fac=function(o){return new(o||a)};static \u0275mod=w.$C({type:a});static \u0275inj=w.G2t({providers:[wh]})}return a})();var dI=x(7231),Cm=x(4454),ll=x(9969),Jf=x(6569);function wm(a,t){1&a&&(w.j41(0,"span",13),w.EFF(1,"invalid Email format"),w.k0s())}function hI(a,t){1&a&&(w.j41(0,"span",13),w.EFF(1,"Email is required"),w.k0s())}function l0(a,t){if(1&a){const r=w.RV6();w.j41(0,"div",14)(1,"img",15),w.bIt("click",function(){w.eBV(r);const u=w.XpG();return w.Njj(u.togglePasswordVisibility("password"))}),w.k0s()()}}function d0(a,t){if(1&a){const r=w.RV6();w.j41(0,"div",14)(1,"img",16),w.bIt("click",function(){w.eBV(r);const u=w.XpG();return w.Njj(u.togglePasswordVisibility("password"))}),w.k0s()()}}function fI(a,t){1&a&&(w.j41(0,"span",13),w.EFF(1," Password is required "),w.k0s())}function pI(a,t){if(1&a){const r=w.RV6();w.j41(0,"div",14)(1,"img",15),w.bIt("click",function(){w.eBV(r);const u=w.XpG(2);return w.Njj(u.togglePasswordVisibility("confirmPassword"))}),w.k0s()()}}function h0(a,t){if(1&a){const r=w.RV6();w.j41(0,"div",14)(1,"img",16),w.bIt("click",function(){w.eBV(r);const u=w.XpG(2);return w.Njj(u.togglePasswordVisibility("confirmPassword"))}),w.k0s()()}}function gI(a,t){1&a&&(w.j41(0,"span",13),w.EFF(1," Confirm password is required "),w.k0s())}function f0(a,t){if(1&a&&(w.j41(0,"div",4)(1,"div",7),w.nrm(2,"input",17),w.DNE(3,pI,2,0,"div",9)(4,h0,2,0,"div",9),w.k0s(),w.DNE(5,gI,2,0,"span",6),w.k0s()),2&a){let r;const o=w.XpG();w.R7$(2),w.Y8G("type",o.showConfirmPassword),w.R7$(),w.Y8G("ngIf","password"!==o.showConfirmPassword),w.R7$(),w.Y8G("ngIf","password"===o.showConfirmPassword),w.R7$(),w.Y8G("ngIf",(null==(r=o.form.get("confirmPassword"))?null:r.hasError("required"))&&(null==(r=o.form.get("confirmPassword"))?null:r.touched))}}function mI(a,t){if(1&a){const r=w.RV6();w.j41(0,"button",18),w.bIt("click",function(){w.eBV(r);const u=w.XpG();return w.Njj(u.googleLogin())}),w.EFF(1," Sign in with Google "),w.nrm(2,"img",19),w.k0s()}}function _I(a,t){if(1&a){const r=w.RV6();w.j41(0,"button",18),w.bIt("click",function(){w.eBV(r);const u=w.XpG();return w.Njj(u.emailAndPasswordLogin())}),w.EFF(1," Sign in "),w.k0s()}}function yI(a,t){if(1&a){const r=w.RV6();w.j41(0,"button",18),w.bIt("click",function(){w.eBV(r);const u=w.XpG();return w.Njj(u.registration())}),w.EFF(1," Register "),w.k0s()}}const Tm=a=>{const t=a.get("password")?.value,r=a.get("confirmPassword")?.value;return t&&r&&t!==r?{passwordsMismatch:!0}:null},Dm=[{path:"",component:(()=>{class a{constructor(r,o){this.fb=r,this.logInService=o,this.selected=!0,this.showPassword="password",this.showConfirmPassword="password",this.form=this.fb.group({email:["",[V.k0.required,V.k0.email]],password:["",V.k0.required],confirmPassword:["",V.k0.required]},{validators:Tm})}ngOnInit(){}select(){this.selected=!this.selected,this.clearInputs()}togglePasswordVisibility(r){"password"===r?this.showPassword="password"===this.showPassword?"":"password":"confirmPassword"===r&&(this.showConfirmPassword="password"===this.showConfirmPassword?"":"password")}googleLogin(){this.logInService.loginWithGoogle()}emailAndPasswordLogin(){const r=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.loginWithEmailAndPassword(r,o)}registration(){if(this.form.hasError("passwordsMismatch"))return console.log("Password mismatch detected"),void alert("Password and confirm password do not match");console.log(this.form.get("password")?.getRawValue()),console.log(this.form.get("confirmPassword")?.getRawValue()),console.log("Form is valid, proceeding with registration");let r=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.registration(r,o),this.clearInputs(),this.selected=!0}clearInputs(){this.form.get("email")?.setValue(""),this.form.get("password")?.setValue(""),this.form.get("confirmPassword")?.setValue(""),this.form.get("email")?.markAsUntouched(),this.form.get("password")?.markAsUntouched(),this.form.get("confirmPassword")?.markAsUntouched()}static#e=this.\u0275fac=function(o){return new(o||a)(w.rXU(V.ok),w.rXU(Jf.p))};static#t=this.\u0275cmp=w.VBU({type:a,selectors:[["app-login"]],decls:24,vars:14,consts:[[1,"loginContainer"],[1,"container"],[3,"click","ngClass"],[3,"formGroup"],[1,"inputs"],["formControlName","email","placeholder","Email ex:sabadmin@gmail.com"],["class","error-message",4,"ngIf"],[1,"password-input"],["formControlName","password","placeholder","Password ex:123123123",3,"type"],["class","pass-img",4,"ngIf"],["class","inputs",4,"ngIf"],[3,"click",4,"ngIf"],["routerLink","/products"],[1,"error-message"],[1,"pass-img"],["src","assets/show.png","alt","img",3,"click"],["src","assets/hidden.png","alt","img",3,"click"],["formControlName","confirmPassword","placeholder","Confirm Password",3,"type"],[3,"click"],["src","assets/google.png","alt","img"]],template:function(o,u){if(1&o&&(w.j41(0,"div",0)(1,"div",1)(2,"div")(3,"p",2),w.bIt("click",function(){return u.select()}),w.EFF(4,"LOG IN"),w.k0s(),w.j41(5,"p",2),w.bIt("click",function(){return u.select()}),w.EFF(6,"SIGN UP"),w.k0s()(),w.j41(7,"form",3)(8,"div",4),w.nrm(9,"input",5),w.DNE(10,wm,2,0,"span",6)(11,hI,2,0,"span",6),w.k0s(),w.j41(12,"div",4)(13,"div",7),w.nrm(14,"input",8),w.DNE(15,l0,2,0,"div",9)(16,d0,2,0,"div",9),w.k0s(),w.DNE(17,fI,2,0,"span",6),w.k0s(),w.DNE(18,f0,6,4,"div",10)(19,mI,3,0,"button",11)(20,_I,2,0,"button",11)(21,yI,2,0,"button",11),w.j41(22,"button",12),w.EFF(23,"Guest Mode"),w.k0s()()()()),2&o){let d,m,b;w.R7$(3),w.Y8G("ngClass",u.selected?"selected":""),w.R7$(2),w.Y8G("ngClass",u.selected?"":"selected"),w.R7$(2),w.Y8G("formGroup",u.form)("@toggleState",u.selected?"login":"signup"),w.R7$(3),w.Y8G("ngIf",null==(d=u.form.get("email"))?null:d.hasError("email")),w.R7$(),w.Y8G("ngIf",(null==(m=u.form.get("email"))?null:m.hasError("required"))&&(null==(m=u.form.get("email"))?null:m.touched)),w.R7$(3),w.Y8G("type",u.showPassword),w.R7$(),w.Y8G("ngIf","password"!==u.showPassword),w.R7$(),w.Y8G("ngIf","password"===u.showPassword),w.R7$(),w.Y8G("ngIf",(null==(b=u.form.get("password"))?null:b.hasError("required"))&&(null==(b=u.form.get("password"))?null:b.touched)),w.R7$(),w.Y8G("ngIf",!u.selected),w.R7$(),w.Y8G("ngIf",u.selected),w.R7$(),w.Y8G("ngIf",u.selected),w.R7$(),w.Y8G("ngIf",!u.selected)}},dependencies:[_.YU,_.bT,V.qT,V.me,V.BC,V.cb,V.j4,V.JD,Cm.Wk],styles:[".loginContainer[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:400px;height:400px;background-color:#62dfdf;border-radius:4px;background-image:url(background.05b7e6a7f70c58a5.webp);background-size:cover;transition:transform .3s ease-in-out}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;gap:20px;padding:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{cursor:pointer;font-size:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]{position:relative}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:6px;right:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{width:100%;height:70%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:200px;height:30px;border-radius:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#13afc7;color:#fff;display:flex;justify-content:center;align-items:center;cursor:pointer}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:5px}.selected[_ngcontent-%COMP%]{color:#fff;border-bottom:1px solid white}.error-message[_ngcontent-%COMP%]{font-size:14px;color:red}.button-disabled[_ngcontent-%COMP%]{background-color:#8ac9d3}"],data:{animation:[(0,ll.hZ)("toggleState",[(0,ll.wk)("login",(0,ll.iF)({transform:"translateX(0)"})),(0,ll.wk)("signup",(0,ll.iF)({transform:"translateY(-10%)"})),(0,ll.kY)("login <=> signup",[(0,ll.i0)("0.4s ease-in-out")])])]},changeDetection:0})}return a})()}];let ep=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=w.$C({type:a});static#n=this.\u0275inj=w.G2t({imports:[Cm.iI.forChild(Dm),Cm.iI]})}return a})();var Wy=x(1626);const Dh={apiKey:"AIzaSyCbQiRFo1MKF_WTEIwSMYg4rFL0CkKdTDI",authDomain:"exercise-app-9b873.firebaseapp.com",databaseURL:"https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app",projectId:"exercise-app-9b873",storageBucket:"exercise-app-9b873.appspot.com",messagingSenderId:"146569895533",appId:"1:146569895533:web:cfb4bca172cc29ee50a964",measurementId:"G-MW950TMVK5"};let Ky=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=w.$C({type:a});static#n=this.\u0275inj=w.G2t({providers:[dI.HF],imports:[_.MD,V.YN,V.X1,Th,M.X8,ep,Wy.q1,Pe.bf.initializeApp(Dh)]})}return a})()},6569:(Zt,qe,x)=>{x.d(qe,{p:()=>_e});var _=x(7231),V=x(4412),M=x(6354),w=x(9437),se=x(7673),Pe=x(4438),B=x(1182),Le=x(1626),$e=x(4454),ve=x(2906);let _e=(()=>{class He{constructor(De,Be,At,yt){this.auth=De,this.http=Be,this.router=At,this.cartService=yt,this.loggedUser=new V.t(void 0),this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app/musicShopUsers",this.isAdmin=new V.t(!1)}loginWithGoogle(){this.auth.signInWithPopup(new _.HF).then(De=>{localStorage.setItem("token",JSON.stringify(De.user?.uid)),this.findUser(De.user?.email).subscribe(Be=>{void 0===Be?this.addUserTodatabase(De.user?.email,De.user?.photoURL):this.findUser(De.user?.email).subscribe(At=>{this.loggedUser.next(At),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(At))})})},De=>{alert(De.mesasage)})}loginWithEmailAndPassword(De,Be){this.auth.signInWithEmailAndPassword(De,Be).then(At=>{this.findUser(At.user?.email).subscribe(yt=>{this.loggedUser.next(yt),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(yt))})},At=>{alert(At.message),console.log(At.mesasage)})}registration(De,Be){this.auth.createUserWithEmailAndPassword(De,Be).then(At=>{this.addUserTodatabase(At.user?.email)},At=>{alert(At.message)})}addUserTodatabase(De,Be){this.http.post(`${this.url}.json`,{email:De,isAdmin:!1,photoUrl:Be,address:"",likedProducts:[{key:"none",category:"other"}],purchasedProducts:[{email:De,userId:De,date:new Date,totalPrice:0,products:[{quantity:-1,product:{key:"unknown",product:{category:"other",model:"none",price:-1,quantity:-1,discount:-1,photoUrl:["none"]}}}]}]}).subscribe(()=>{console.log("User created succesfully")},yt=>{alert(yt.message)})}findUser(De){return this.http.get(`${this.url}.json`).pipe((0,M.T)(Be=>{let At,yt="";if(Object.entries(Be).find(([st,bt])=>{bt.email===De&&(At=bt,yt=st)}),yt&&At)return{user:At,key:yt}}),(0,w.W)(Be=>(console.error(Be),(0,se.of)(void 0))))}findUserById(De){return this.http.get(`${this.url}/${De}.json`).pipe((0,M.T)(Be=>Be.email))}checkIfLoggedIn(){if(localStorage.getItem("currentUser")){let De=JSON.parse(localStorage.getItem("currentUser"));this.loggedUser.next(De),localStorage.getItem("cart")&&this.cartService.cart.next(JSON.parse(localStorage.getItem("cart")))}}logOut(){localStorage.removeItem("currentUser"),localStorage.removeItem("cart"),this.loggedUser.next(void 0),this.cartService.cart.next([])}static#e=this.\u0275fac=function(Be){return new(Be||He)(Pe.KVO(B.DS),Pe.KVO(Le.Qq),Pe.KVO($e.Ix),Pe.KVO(ve.m))};static#t=this.\u0275prov=Pe.jDH({token:He,factory:He.\u0275fac,providedIn:"root"})}return He})()},6483:(Zt,qe,x)=>{x.d(qe,{P:()=>V});var _=x(4438);let V=(()=>{class M{transform(se){return se.charAt(0).toUpperCase()+se.substring(1,se.length)}static#e=this.\u0275fac=function(Pe){return new(Pe||M)};static#t=this.\u0275pipe=_.EJ8({name:"upperCase",type:M,pure:!0,standalone:!0})}return M})()},6552:(Zt,qe,x)=>{x.d(qe,{u:()=>se});var _=x(4412),V=x(4438),M=x(6569);function w(Pe,B){1&Pe&&(V.j41(0,"div",2),V.nrm(1,"div",3),V.j41(2,"p"),V.EFF(3,"Loading..."),V.k0s()())}let se=(()=>{class Pe{constructor(Le){this.authService=Le,this.isEditing="",this.loadingSubject=new _.t(!0),this.loading$=this.loadingSubject.asObservable()}ngOnInit(){this.authService.checkIfLoggedIn()}loadingValue(Le){this.loadingSubject.next(!Le)}static#e=this.\u0275fac=function($e){return new($e||Pe)(V.rXU(M.p))};static#t=this.\u0275cmp=V.VBU({type:Pe,selectors:[["app-product-page"]],decls:11,vars:7,consts:[["class","loading-container",4,"ngIf"],[3,"productsImported","category"],[1,"loading-container"],[1,"loader"]],template:function($e,ve){1&$e&&(V.nrm(0,"app-header")(1,"app-top-products"),V.j41(2,"h1"),V.EFF(3,"Our Products"),V.k0s(),V.DNE(4,w,4,0,"div",0),V.nI1(5,"async"),V.j41(6,"app-product-page-single-category",1),V.bIt("productsImported",function(He){return ve.loadingValue(He)}),V.k0s(),V.j41(7,"app-product-page-single-category",1),V.bIt("productsImported",function(He){return ve.loadingValue(He)}),V.k0s(),V.j41(8,"app-product-page-single-category",1),V.bIt("productsImported",function(He){return ve.loadingValue(He)}),V.k0s(),V.j41(9,"app-product-page-single-category",1),V.bIt("productsImported",function(He){return ve.loadingValue(He)}),V.k0s(),V.nrm(10,"app-footer")),2&$e&&(V.R7$(4),V.Y8G("ngIf",V.bMT(5,5,ve.loading$)),V.R7$(2),V.Y8G("category","guitar"),V.R7$(),V.Y8G("category","drum"),V.R7$(),V.Y8G("category","piano"),V.R7$(),V.Y8G("category","bass"))},styles:["h1[_ngcontent-%COMP%]{display:flex;justify-content:center}.loading-container[_ngcontent-%COMP%]{margin:0 auto;width:300px;height:300px;display:flex;flex-direction:column;justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%] > .loader[_ngcontent-%COMP%]{width:60px;aspect-ratio:1;border-radius:50%;border:8px solid lightblue;border-right-color:orange;animation:_ngcontent-%COMP%_l2 1s infinite linear}@keyframes _ngcontent-%COMP%_l2{to{transform:rotate(1turn)}}"],changeDetection:0})}return Pe})()},8569:(Zt,qe,x)=>{x.r(qe),x.d(qe,{ProductPageModule:()=>ae});var _=x(177),V=x(6552),M=x(4454),w=x(4438);const se=[{path:"",component:V.u}];let Pe=(()=>{class Ve{static#e=this.\u0275fac=function(ce){return new(ce||Ve)};static#t=this.\u0275mod=w.$C({type:Ve});static#n=this.\u0275inj=w.G2t({imports:[M.iI.forChild(se),M.iI]})}return Ve})();var B=x(3236),Le=x(1985),$e=x(9470);let Tt=(()=>{class Ve{constructor(et){this.cdr=et,this.index=0,this.imgUrls=["assets/guitar1.jpg","assets/piano.png","assets/drum.avif","assets/bass.webp"],this.img=this.imgUrls[0]}ngOnInit(){this.startTimeChangeInterval()}startTimeChangeInterval(){this.intervalSubscription=function He(Ve=0,Ye=B.E){return Ve<0&&(Ve=0),function _e(Ve=0,Ye,et=B.b){let ce=-1;return null!=Ye&&((0,$e.m)(Ye)?et=Ye:ce=Ye),new Le.c(Ne=>{let We=function ve(Ve){return Ve instanceof Date&&!isNaN(Ve)}(Ve)?+Ve-et.now():Ve;We<0&&(We=0);let pn=0;return et.schedule(function(){Ne.closed||(Ne.next(pn++),0<=ce?this.schedule(void 0,ce):Ne.complete())},We)})}(Ve,Ve,Ye)}(4e3).subscribe(()=>{this.changeImgUp(),this.cdr.detectChanges()})}changeImgUp(){3===this.index?(this.index=0,this.img=this.imgUrls[this.index]):(this.img=this.imgUrls[this.index+1],this.index++),this.clearInterval()}changeImgDown(){0===this.index?(this.index=3,this.img=this.imgUrls[this.index]):(this.img=this.imgUrls[this.index-1],this.index--),this.clearInterval()}changeIndex(et){this.index=et,this.img=this.imgUrls[et],this.clearInterval()}clearInterval(){this.intervalSubscription&&this.intervalSubscription?.unsubscribe(),this.startTimeChangeInterval()}static#e=this.\u0275fac=function(ce){return new(ce||Ve)(w.rXU(w.gRc))};static#t=this.\u0275cmp=w.VBU({type:Ve,selectors:[["app-top-products"]],decls:12,vars:5,consts:[[1,"topProducts-container"],[3,"click","ngClass"],[1,"arrows"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"images"],["alt","img",3,"src"]],template:function(ce,Ne){1&ce&&(w.j41(0,"div",0)(1,"div")(2,"div")(3,"div",1),w.bIt("click",function(){return Ne.changeIndex(0)}),w.k0s(),w.j41(4,"div",1),w.bIt("click",function(){return Ne.changeIndex(1)}),w.k0s(),w.j41(5,"div",1),w.bIt("click",function(){return Ne.changeIndex(2)}),w.k0s(),w.j41(6,"div",1),w.bIt("click",function(){return Ne.changeIndex(3)}),w.k0s()(),w.j41(7,"div",2)(8,"img",3),w.bIt("click",function(){return Ne.changeImgDown()}),w.k0s(),w.j41(9,"img",4),w.bIt("click",function(){return Ne.changeImgUp()}),w.k0s()()(),w.j41(10,"div",5),w.nrm(11,"img",6),w.k0s()()),2&ce&&(w.R7$(3),w.Y8G("ngClass",0===Ne.index?"highlight":""),w.R7$(),w.Y8G("ngClass",1===Ne.index?"highlight":""),w.R7$(),w.Y8G("ngClass",2===Ne.index?"highlight":""),w.R7$(),w.Y8G("ngClass",3===Ne.index?"highlight":""),w.R7$(5),w.Y8G("src",Ne.img,w.B4B))},dependencies:[_.YU],styles:[".topProducts-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0 auto 100px;gap:20px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;flex-direction:column;align-items:center;gap:10px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child{display:flex;gap:10px;width:100%}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]{width:10px;height:10px;border:.4px solid #ffc107;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]{display:flex}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:600px;height:300px}.highlight[_ngcontent-%COMP%]{background-color:#ffc107}"],changeDetection:0})}return Ve})();var De=x(2152),Be=x(708),At=x(3227),yt=x(9156),st=x(102),bt=x(5435);function gt(Ve,Ye){if(1&Ve){const et=w.RV6();w.j41(0,"app-card",6),w.bIt("editEvent",function(Ne){w.eBV(et);const We=w.XpG(2);return w.Njj(We.onFormSubmitted(Ne))})("removeEvent",function(Ne){w.eBV(et);const We=w.XpG(2);return w.Njj(We.removeHandler(Ne))}),w.k0s()}if(2&Ve){const et=Ye.$implicit;w.Y8G("showSpecificContent",!0)("product",et)}}function ue(Ve,Ye){if(1&Ve){const et=w.RV6();w.j41(0,"div",1)(1,"div")(2,"h2"),w.EFF(3),w.k0s(),w.j41(4,"div")(5,"img",2),w.bIt("click",function(){w.eBV(et);const Ne=w.XpG();return w.Njj(Ne.shiftRight())}),w.k0s(),w.j41(6,"img",3),w.bIt("click",function(){w.eBV(et);const Ne=w.XpG();return w.Njj(Ne.shiftLeft())}),w.k0s()()(),w.j41(7,"div",4),w.DNE(8,gt,1,2,"app-card",5),w.nI1(9,"slice"),w.k0s()()}if(2&Ve){const et=w.XpG();w.R7$(3),w.SpI("",et.modifyCatName(),":"),w.R7$(5),w.Y8G("ngForOf",w.brH(9,2,et.productsArray,et.sliceStart,et.SliceEnd))}}let de=(()=>{class Ve{constructor(et,ce){this.sharedService=et,this.cd=ce,this.productsArray=[],this.productsImported=new w.bkB(!0),this.loading=!0,this.sliceStart=0,this.SliceEnd=6,this.length=0}ngOnInit(){this.category&&this.sharedService.getTypeOfProduct(`${this.category}`).subscribe(et=>{this.productsArray=et,this.length=et.length,this.loading=!1,this.productsImported.emit(!0),this.cd.detectChanges()})}shiftLeft(){this.SliceEnd<this.length&&(this.sliceStart+=1,this.SliceEnd+=1)}shiftRight(){this.sliceStart>0&&(this.sliceStart-=1,this.SliceEnd-=1)}onFormSubmitted(et){this.sharedService.editProduct(et.form,et.prodId,et.prodCategory).subscribe(()=>{"guitar"===et.prodCategory&&this.sharedService.updateProductArray(et.form,this.productsArray,et.prodId),this.cd.detectChanges()})}removeHandler(et){this.productsArray=this.productsArray.filter(ce=>ce.key!==et.prodId),this.cd.detectChanges()}modifyCatName(){return this.category?this.category.charAt(0).toUpperCase()+this.category.substring(1,this.category.length)+"s":this.category}static#e=this.\u0275fac=function(ce){return new(ce||Ve)(w.rXU(bt.m),w.rXU(w.gRc))};static#t=this.\u0275cmp=w.VBU({type:Ve,selectors:[["app-product-page-single-category"]],inputs:{category:"category"},outputs:{productsImported:"productsImported"},standalone:!0,features:[w.aNF],decls:1,vars:1,consts:[["class","products-container",4,"ngIf"],[1,"products-container"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"products"],[3,"showSpecificContent","product","editEvent","removeEvent",4,"ngFor","ngForOf"],[3,"editEvent","removeEvent","showSpecificContent","product"]],template:function(ce,Ne){1&ce&&w.DNE(0,ue,10,6,"div",0),2&ce&&w.Y8G("ngIf",!Ne.loading)},dependencies:[_.MD,_.Sq,_.bT,_.P9,st.i],styles:[".products-container[_ngcontent-%COMP%]{padding:60px}.products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;display:flex;justify-content:space-between}.products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;cursor:pointer}.products-container[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{display:flex;gap:20px}"]})}return Ve})(),ae=(()=>{class Ve{static#e=this.\u0275fac=function(ce){return new(ce||Ve)};static#t=this.\u0275mod=w.$C({type:Ve});static#n=this.\u0275inj=w.G2t({imports:[_.MD,Pe,Be.n,De.l,At.K,M.iI,yt.B,st.i,de]})}return Ve})();w.wjB(V.u,[_.bT,Be.n,De.l,de,Tt],[_.Jj])},1343:(Zt,qe,x)=>{x.r(qe),x.d(qe,{ProfileModuleModule:()=>de});var _=x(177),V=x(4454),M=x(9417),w=x(6697),se=x(4438),Pe=x(6569),B=x(5435),Le=x(2152),$e=x(708),ve=x(102);function _e(ae,Ve){if(1&ae){const Ye=se.RV6();se.j41(0,"button",5),se.bIt("click",function(){se.eBV(Ye);const ce=se.XpG();return se.Njj(ce.addingProd())}),se.EFF(1," Add New Product "),se.k0s()}}function He(ae,Ve){if(1&ae){const Ye=se.RV6();se.j41(0,"div",27)(1,"div"),se.nrm(2,"img",28),se.j41(3,"img",29),se.bIt("click",function(){const ce=se.eBV(Ye).$implicit,Ne=se.XpG(2);return se.Njj(Ne.removeImg(ce))}),se.k0s()()()}if(2&ae){const Ye=Ve.$implicit;se.R7$(2),se.Y8G("src",Ye,se.B4B)}}function Tt(ae,Ve){if(1&ae){const Ye=se.RV6();se.j41(0,"form",11)(1,"select",12)(2,"option",13),se.EFF(3,"Guitar"),se.k0s(),se.j41(4,"option",14),se.EFF(5,"Drum"),se.k0s(),se.j41(6,"option",15),se.EFF(7,"Bass"),se.k0s(),se.j41(8,"option",16),se.EFF(9,"Piano"),se.k0s(),se.j41(10,"option",17),se.EFF(11,"Other"),se.k0s()(),se.nrm(12,"input",18)(13,"input",19)(14,"input",20)(15,"input",21)(16,"input",22),se.j41(17,"input",23),se.bIt("change",function(ce){se.eBV(Ye);const Ne=se.XpG();return se.Njj(Ne.onFileChange(ce))}),se.k0s(),se.j41(18,"button",24),se.bIt("click",function(){se.eBV(Ye);const ce=se.XpG();return se.Njj(ce.addNewProduct())}),se.EFF(19," add product "),se.k0s(),se.j41(20,"div",25),se.DNE(21,He,4,1,"div",26),se.k0s()()}if(2&ae){const Ye=se.XpG();se.Y8G("formGroup",Ye.form),se.R7$(18),se.Y8G("disabled",Ye.form.invalid),se.R7$(3),se.Y8G("ngForOf",Ye.photos)}}function De(ae,Ve){1&ae&&(se.j41(0,"p"),se.EFF(1,"Liked Products:"),se.k0s())}function Be(ae,Ve){1&ae&&se.nrm(0,"app-card",30),2&ae&&se.Y8G("product",Ve.$implicit)}let At=(()=>{class ae{constructor(Ye,et,ce,Ne,We){this.authService=Ye,this.cd=et,this.fb=ce,this.sharedService=Ne,this.router=We,this.photos=[],this.addingProduct=!1,this.purchasedProducts=[],this.form=this.fb.group({category:["",[M.k0.required]],model:["",M.k0.required],price:["",M.k0.required],quantity:["",M.k0.required],discount:["",M.k0.required],description:["",M.k0.required]})}ngOnInit(){this.authService.loggedUser.pipe((0,w.s)(1)).subscribe(Ye=>{Ye&&Ye.user.purchasedProducts&&(this.user=Ye,this.purchasedProducts=Ye?.user.purchasedProducts.slice(1),console.log(this.purchasedProducts)),this.form.patchValue({category:"guitar"})})}onFileChange(Ye){const et=Ye.target.files[0];if(et){const ce=new FileReader;ce.onload=Ne=>{this.photos.push(Ne.target?.result),this.cd.detectChanges()},ce.readAsDataURL(et)}}addingProd(){this.addingProduct=!this.addingProduct}removeImg(Ye){const et=this.photos.findIndex(ce=>ce===Ye);this.photos.splice(et,1)}addNewProduct(){const Ye=this.form.get("category")?.getRawValue(),et=this.form.get("model")?.getRawValue(),ce=this.form.get("price")?.getRawValue(),Ne=this.form.get("discount")?.getRawValue(),We=this.form.get("quantity")?.getRawValue(),pn=this.form.get("description")?.getRawValue();this.sharedService.addProduct(Ye,et,ce,We,Ne,this.photos,pn).subscribe({next:()=>{this.form.get("category")?.setValue(""),this.form.get("model")?.setValue(""),this.form.get("price")?.setValue(""),this.form.get("discount")?.setValue(""),this.form.get("quantity")?.setValue(""),this.form.get("description")?.setValue(""),this.photos=[],this.cd.detectChanges(),alert("Product was added successfully")},error:bn=>{console.log("add product error: "+bn.message)},complete:()=>{console.log("Subscription completed")}})}convertDate(Ye){let et=new Date(Ye);return`${et.getDate()}/${et.getMonth()+1}/${et.getFullYear()}`}navigate(){this.router.navigate(["/purchasedProducts"])}static#e=this.\u0275fac=function(et){return new(et||ae)(se.rXU(Pe.p),se.rXU(se.gRc),se.rXU(M.ok),se.rXU(B.m),se.rXU(V.Ix))};static#t=this.\u0275cmp=se.VBU({type:ae,selectors:[["app-profile"]],decls:25,vars:9,consts:[[1,"container"],[1,"wrapper"],[1,"box"],[1,"info"],[3,"click",4,"ngIf"],[3,"click"],[3,"formGroup",4,"ngIf"],[1,"liked-products"],[4,"ngIf"],[1,"products"],["class","single-product",3,"product",4,"ngFor","ngForOf"],[3,"formGroup"],["formControlName","category"],["value","guitar"],["value","drum"],["value","bass"],["value","piano"],["value","other"],["placeholder","Model","formControlName","model"],["placeholder","Price","formControlName","price"],["placeholder","Discount","formControlName","discount"],["placeholder","Quantity","formControlName","quantity"],["placeholder","Description","formControlName","description"],["type","file",3,"change"],[3,"click","disabled"],[1,"photos"],["class","pht",4,"ngFor","ngForOf"],[1,"pht"],["alt","img",3,"src"],["src","assets/remove.png","alt","img",3,"click"],[1,"single-product",3,"product"]],template:function(et,ce){1&et&&(se.nrm(0,"app-header"),se.j41(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"p")(6,"span"),se.EFF(7," Email:"),se.k0s(),se.EFF(8),se.k0s(),se.j41(9,"p")(10,"span"),se.EFF(11,"Address:"),se.k0s(),se.EFF(12),se.k0s(),se.j41(13,"button"),se.EFF(14,"Change Password"),se.k0s(),se.DNE(15,_e,2,0,"button",4),se.j41(16,"button",5),se.bIt("click",function(){return ce.navigate()}),se.EFF(17,"See Purchases"),se.k0s()(),se.DNE(18,Tt,22,3,"form",6),se.k0s(),se.j41(19,"div",7),se.DNE(20,De,2,0,"p",8),se.j41(21,"div",9),se.DNE(22,Be,1,1,"app-card",10),se.nI1(23,"slice"),se.k0s()()()(),se.nrm(24,"app-footer")),2&et&&(se.R7$(8),se.SpI(" ",null==ce.user||null==ce.user.user?null:ce.user.user.email,""),se.R7$(4),se.SpI(" ",null==ce.user||null==ce.user.user?null:ce.user.user.address,"Some Adrress"),se.R7$(3),se.Y8G("ngIf",null==ce.user||null==ce.user.user?null:ce.user.user.isAdmin),se.R7$(3),se.Y8G("ngIf",(null==ce.user||null==ce.user.user?null:ce.user.user.isAdmin)&&ce.addingProduct),se.R7$(2),se.Y8G("ngIf",ce.likedProducts),se.R7$(2),se.Y8G("ngForOf",se.i5U(23,6,ce.likedProducts,1)))},dependencies:[_.Sq,_.bT,M.qT,M.xH,M.y7,M.me,M.wz,M.BC,M.cb,M.j4,M.JD,Le.l,$e.n,ve.i,_.P9],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:85%;background-color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:8%;display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-size:18px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:200px;height:50px;cursor:pointer;--b: 2px;--s: .45em;--color: #373b44;padding:calc(.5em + var(--s)) calc(.9em + var(--s));color:var(--color);--_p: var(--s);background:conic-gradient(from 90deg at var(--b) var(--b),rgba(0,0,0,0) 90deg,var(--color) 0) var(--_p) var(--_p)/calc(100% - var(--b) - 2 * var(--_p)) calc(100% - var(--b) - 2 * var(--_p));transition:.3s linear,color 0s,background-color 0s;outline:var(--b) solid rgba(0,0,0,0);outline-offset:.6em;font-size:16px;border:0;user-select:none;-webkit-user-select:none;touch-action:manipulation}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus-visible{--_p: 0px;outline-color:var(--color);outline-offset:.05em}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background:var(--color);color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,200px);grid-template-rows:repeat(5,30px);padding-left:8%;margin-bottom:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]{display:flex;gap:12px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]:last-of-type{width:8px;position:absolute;top:3px;right:-6px}.liked-products[_ngcontent-%COMP%]{padding:40px}.liked-products[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:20px;font-weight:700;padding:40px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;gap:20px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%]{width:150px;height:380px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:20%;z-index:1}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{display:flex;gap:10px;justify-content:center;width:140px;height:40px;color:#fff}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{width:100%;height:260px;position:relative}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:260px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{width:100%;height:120px;display:flex;flex-direction:column;justify-content:space-around}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}"],changeDetection:0})}return ae})();var yt=x(6354),st=x(8141);const gt=[{path:"",component:At,canActivate:[(()=>{class ae{constructor(){this.authService=(0,se.WQX)(Pe.p),this.router=(0,se.WQX)(V.Ix)}canActivate(Ye){return this.authService.findUserById(Ye.params.id).pipe((0,yt.T)(ce=>this.authService.loggedUser.value?.user.email===ce),(0,st.M)(ce=>{ce||(alert("Access Denied!"),this.router.navigate(["/products"]))}))}static#e=this.\u0275fac=function(et){return new(et||ae)};static#t=this.\u0275prov=se.jDH({token:ae,factory:ae.\u0275fac,providedIn:"root"})}return ae})()]}];let ue=(()=>{class ae{static#e=this.\u0275fac=function(et){return new(et||ae)};static#t=this.\u0275mod=se.$C({type:ae});static#n=this.\u0275inj=se.G2t({imports:[V.iI.forChild(gt),V.iI]})}return ae})(),de=(()=>{class ae{static#e=this.\u0275fac=function(et){return new(et||ae)};static#t=this.\u0275mod=se.$C({type:ae});static#n=this.\u0275inj=se.G2t({imports:[_.MD,ue,M.X1,Le.l,$e.n,ve.i]})}return ae})()},9156:(Zt,qe,x)=>{x.d(qe,{B:()=>M});var _=x(4438),V=x(9417);let M=(()=>{class w{constructor(Pe){this.fb=Pe,this.formSubmitted=new _.bkB,this.productForm=this.fb.group({model:[""],price:["",V.k0.pattern("^[0-9]*$")],discount:["",V.k0.pattern("^[0-9]*$")],quantity:["",V.k0.pattern("^[0-9]*$")],description:[""]})}onSubmit(){this.formSubmitted.emit(this.productForm.value)}static#e=this.\u0275fac=function(B){return new(B||w)(_.rXU(V.ok))};static#t=this.\u0275cmp=_.VBU({type:w,selectors:[["app-reusable-form"]],outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[_.aNF],decls:8,vars:1,consts:[[1,"edit",3,"formGroup"],["formControlName","model","type","text","placeholder","New model-name"],["formControlName","price","type","text","placeholder","New price"],["formControlName","discount","type","text","placeholder","New Discount"],["formControlName","quantity","type","text","placeholder","New Quantity"],["formControlName","description","placeholder","New Description"],[3,"click"]],template:function(B,Le){1&B&&(_.j41(0,"form",0),_.nrm(1,"input",1)(2,"input",2)(3,"input",3)(4,"input",4)(5,"textarea",5),_.j41(6,"button",6),_.bIt("click",function(){return Le.onSubmit()}),_.EFF(7,"Confirm Changes"),_.k0s()()),2&B&&_.Y8G("formGroup",Le.productForm)},dependencies:[V.X1,V.qT,V.me,V.BC,V.cb,V.j4,V.JD],styles:[".edit[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;gap:6px;margin-top:60px}.edit[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .edit[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:80%;height:26px}"]})}return w})()},5435:(Zt,qe,x)=>{x.d(qe,{m:()=>_e});var _=x(4412),V=x(6354),M=x(7468),w=x(8141),se=x(5558),Pe=x(9437),B=x(7673),Le=x(4438),$e=x(1626),ve=x(6569);let _e=(()=>{class He{constructor(De,Be){this.http=De,this.service=Be,this.detectChanges=new _.t(!1),this.userId=this.service.loggedUser.value?.key,this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app"}addProduct(De,Be,At,yt,st,bt,gt){const ue={category:De,model:Be,price:parseInt(At),quantity:parseInt(yt),discount:parseInt(st),photoUrl:bt,description:gt};return this.http.post(`${this.url}/products/${De}.json`,ue)}ifDetectChanges(){return this.detectChanges.next(!this.detectChanges.value),this.detectChanges.value}getTypeOfProduct(De){return this.http.get(`${this.url}/products/${De}.json`).pipe((0,V.T)(Be=>{let At=[];return Object.entries(Be).forEach(([yt,st])=>At.push({key:yt,product:st})),At}))}getAllTypeOfProduct(){const De=this.http.get(`${this.url}/products/guitar.json`),Be=this.http.get(`${this.url}/products/piano.json`),At=this.http.get(`${this.url}/products/bass.json`),yt=this.http.get(`${this.url}/products/drum.json`);return(0,M.p)([De,Be,At,yt]).pipe((0,V.T)(st=>st))}likeUnlikeProduct(De,Be,At,yt){return this.http.get(`${this.url}/musicShopUsers/${At}.json`).pipe((0,w.M)(st=>{let bt=st;console.log(st);let gt=yt;bt&&(bt.likedProducts.find(de=>de.key===De)?(gt=st.likedProducts.filter(de=>de.key!==De),bt.likedProducts=gt):(gt=[...st.likedProducts,{key:De,category:Be}],bt.likedProducts=gt)),this.http.patch(`${this.url}/musicShopUsers/${At}.json`,bt).subscribe()}))}getAllLikedProducts(De){}getProduct(De,Be){return this.http.get(`${this.url}/products/${Be}/${De}.json`)}getProductById(De,Be){return this.http.get(`${this.url}/products/${Be}/${De}.json`)}buyProducts(De,Be,At,yt){const st={userId:yt,email:At,date:new Date,totalPrice:Be,products:De},bt=this.http.get(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`).pipe((0,se.n)(ue=>(ue.purchasedProducts=[...ue.purchasedProducts,st],this.http.patch(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`,ue))),(0,Pe.W)(ue=>(console.error("Error in adminUpdate$",ue),(0,B.of)(null))));let gt=(0,B.of)(null);yt&&(gt=this.http.get(`${this.url}/musicShopUsers/${yt}.json`).pipe((0,se.n)(ue=>(ue.purchasedProducts=[...ue.purchasedProducts,st],this.http.patch(`${this.url}/musicShopUsers/${yt}.json`,ue))),(0,Pe.W)(ue=>(console.error("Error in userUpdate$",ue),(0,B.of)(null))))),(0,M.p)([bt,gt]).subscribe()}removeProduct(De,Be){return this.http.delete(`${this.url}/products/${De}/${Be}.json`)}editProduct(De,Be,At){return this.http.get(`${this.url}/products/${At}/${Be}.json`).pipe((0,w.M)(yt=>{De.model&&(yt.model=De.model),De.price&&(yt.price=De.price),De.discount&&(yt.discount=De.discount),De.quantity&&(yt.quantity=De.quantity),De.description&&(yt.description=De.description),this.http.patch(`${this.url}/products/${At}/${Be}.json`,yt).subscribe()}))}updateProductArray(De,Be,At){let yt=Be.findIndex(st=>st.key===At);De.discount&&(Be[yt].product.discount=De.discount,De.model&&(Be[yt].product.model=De.model),De.price&&(Be[yt].product.price=De.price),De.description&&(Be[yt].product.description=De.description),De.quantity&&(Be[yt].product.quantity=De.quantity))}getRandomProducts(De){return this.getTypeOfProduct(De).pipe((0,V.T)(Be=>{let At=4;const yt=[],st=[];for(;0!==At;){if(Be.length<=At)return Be;const bt=Math.floor(Math.random()*Be.length);st.includes(bt)||(yt.push(Be[bt]),st.push(bt),At--)}return yt}))}getLikedProductsArr(De){return this.http.get(`${this.url}/musicShopUsers/${De}.json`).pipe((0,V.T)(Be=>Be))}static#e=this.\u0275fac=function(Be){return new(Be||He)(Le.KVO($e.Qq),Le.KVO(ve.p))};static#t=this.\u0275prov=Le.jDH({token:He,factory:He.\u0275fac,providedIn:"root"})}return He})()},2735:(Zt,qe,x)=>{x.r(qe),x.d(qe,{SingleProductPageModule:()=>yt});var _=x(177),V=x(4454),M=x(6697),w=x(4438),se=x(5435),Pe=x(6569),B=x(2906),Le=x(2152),$e=x(708),ve=x(8964);function _e(st,bt){if(1&st&&w.nrm(0,"img",13,0),2&st){const gt=w.XpG();w.Y8G("src",gt.images[gt.cuurentIndex],w.B4B)}}function He(st,bt){if(1&st){const gt=w.RV6();w.j41(0,"div")(1,"img",14),w.bIt("click",function(){const de=w.eBV(gt).index,ae=w.XpG();return w.Njj(ae.switchImage(de))}),w.k0s()()}if(2&st){const gt=bt.index,ue=w.XpG();w.R7$(),w.Y8G("src",ue.images[gt],w.B4B)}}function Tt(st,bt){if(1&st&&w.nrm(0,"app-suggestions",15),2&st){const gt=w.XpG();w.Y8G("categoty",null==gt.product?null:gt.product.category)}}const Be=[{path:"",component:(()=>{class st{constructor(gt,ue,de,ae,Ve){this.sharedService=gt,this.authService=ue,this.route=de,this.cd=ae,this.cartService=Ve,this.cuurentIndex=0,this.minSize=0,this.maxSize=0,this.focusedImg=this.product?.photoUrl?.[0],this.prodId="",this.userId=""}ngOnInit(){this.authService.loggedUser.subscribe(gt=>{this.userId=gt?.key}),this.authService.checkIfLoggedIn(),this.route.queryParams.subscribe(()=>{this.getProductInfo()})}getProductInfo(){this.route.queryParams.pipe((0,M.s)(1)).subscribe(gt=>{this.sharedService.getProductById(gt.prod,gt.type).pipe((0,M.s)(1)).subscribe(ue=>{this.product=ue,this.images=ue.photoUrl,this.prodId=gt.prod,this.cuurentIndex=0,this.focusedImg=this.product?.photoUrl?.[0],this.cd.detectChanges()})})}switchImage(gt){this.cuurentIndex=gt}checkIfliked(){return!!this.likedProducts&&this.likedProducts.find(gt=>gt.key=this.prodId)}likeProduct(gt){this.sharedService.likeUnlikeProduct(this.prodId,this.product?.category,this.userId,this.likedProducts).subscribe(()=>{this.likedProducts&&(this.likedProducts=this.likedProducts=this.likedProducts?.filter(ue=>ue.key!==this.prodId)),this.cd.detectChanges()})}scroll(gt){"right"===gt?this.images.unshift(this.images.pop()):this.images.push(this.images.shift())}addInCart(){this.cartService.cartOperations("add",{key:this.prodId,product:this.product})}static#e=this.\u0275fac=function(ue){return new(ue||st)(w.rXU(se.m),w.rXU(Pe.p),w.rXU(V.nX),w.rXU(w.gRc),w.rXU(B.m))};static#t=this.\u0275cmp=w.VBU({type:st,selectors:[["app-single-product-page"]],decls:36,vars:10,consts:[["myImage",""],[1,"container"],[1,"content"],[1,"images"],[1,"focused-img"],["alt","img",3,"src",4,"ngIf"],[1,"otherPhotos"],["src","assets/left.png","alt","img",3,"click"],[4,"ngFor","ngForOf"],["src","assets/right.png","alt","img",3,"click"],[1,"description","payment"],[3,"click"],[3,"categoty",4,"ngIf"],["alt","img",3,"src"],["alt","img",3,"click","src"],[3,"categoty"]],template:function(ue,de){1&ue&&(w.nrm(0,"app-header"),w.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),w.DNE(5,_e,2,1,"img",5),w.k0s(),w.j41(6,"div",6)(7,"div")(8,"img",7),w.bIt("click",function(){return de.scroll("left")}),w.k0s()(),w.DNE(9,He,2,1,"div",8),w.nI1(10,"slice"),w.j41(11,"div")(12,"img",9),w.bIt("click",function(){return de.scroll("right")}),w.k0s()()()(),w.j41(13,"div",10)(14,"div")(15,"p")(16,"span"),w.EFF(17,"Categoty:"),w.k0s(),w.EFF(18),w.k0s()(),w.j41(19,"div")(20,"p")(21,"span"),w.EFF(22,"Model:"),w.k0s(),w.EFF(23),w.k0s(),w.j41(24,"p")(25,"span"),w.EFF(26,"Description: "),w.k0s(),w.EFF(27),w.k0s(),w.j41(28,"p")(29,"span"),w.EFF(30,"Price:"),w.k0s(),w.EFF(31),w.k0s(),w.j41(32,"button",11),w.bIt("click",function(){return de.addInCart()}),w.EFF(33,"Add to Cart"),w.k0s()()(),w.DNE(34,Tt,1,1,"app-suggestions",12),w.nrm(35,"app-footer"),w.k0s()()),2&ue&&(w.R7$(5),w.Y8G("ngIf",de.images),w.R7$(4),w.Y8G("ngForOf",w.i5U(10,7,de.images,0)),w.R7$(9),w.SpI(" ",null==de.product?null:de.product.category,""),w.R7$(5),w.SpI(" ",null==de.product?null:de.product.model,""),w.R7$(4),w.SpI(" ",null==de.product?null:de.product.description," "),w.R7$(4),w.SpI(" ",null==de.product?null:de.product.price,"$"),w.R7$(3),w.Y8G("ngIf",null==de.product?null:de.product.category))},dependencies:[_.Sq,_.bT,Le.l,$e.n,ve.x,_.P9],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6%;margin-top:4%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:350px;height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px;max-height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]{display:flex;gap:4px;justify-content:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child, .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{background-color:unset}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > img[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]{width:40px;height:40px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:40px;gap:20px;width:90%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:23px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:10px;word-wrap:break-word;font-size:20px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px;height:30px;border:none;text-align:center;color:#fff;background-color:#7a7af0;border-radius:3px;cursor:pointer}"],changeDetection:0})}return st})()}];let At=(()=>{class st{static#e=this.\u0275fac=function(ue){return new(ue||st)};static#t=this.\u0275mod=w.$C({type:st});static#n=this.\u0275inj=w.G2t({imports:[V.iI.forChild(Be),V.iI]})}return st})(),yt=(()=>{class st{static#e=this.\u0275fac=function(ue){return new(ue||st)};static#t=this.\u0275mod=w.$C({type:st});static#n=this.\u0275inj=w.G2t({imports:[_.MD,Le.l,$e.n,At,ve.x]})}return st})()},8964:(Zt,qe,x)=>{x.d(qe,{x:()=>Pe});var _=x(102),V=x(177),M=x(4438),w=x(5435);function se(B,Le){1&B&&M.nrm(0,"app-card",2),2&B&&M.Y8G("product",Le.$implicit)}let Pe=(()=>{class B{constructor($e,ve){this.service=$e,this.cd=ve,this.categoty="guitar"}ngOnInit(){this.service.getRandomProducts(this.categoty).subscribe($e=>{this.randomSuggestions=$e,this.cd.detectChanges()})}static#e=this.\u0275fac=function(ve){return new(ve||B)(M.rXU(w.m),M.rXU(M.gRc))};static#t=this.\u0275cmp=M.VBU({type:B,selectors:[["app-suggestions"]],inputs:{categoty:"categoty"},standalone:!0,features:[M.aNF],decls:4,vars:1,consts:[[1,"container"],[3,"product",4,"ngFor","ngForOf"],[3,"product"]],template:function(ve,_e){1&ve&&(M.j41(0,"h2"),M.EFF(1,"You might also like:"),M.k0s(),M.j41(2,"div",0),M.DNE(3,se,1,1,"app-card",1),M.k0s()),2&ve&&(M.R7$(3),M.Y8G("ngForOf",_e.randomSuggestions))},dependencies:[_.i,V.MD,V.Sq],styles:["h2[_ngcontent-%COMP%]{color:#9191de;text-align:center}div[_ngcontent-%COMP%]{padding:3%;display:flex;gap:20px}"],changeDetection:0})}return B})()},6462:(Zt,qe,x)=>{var _=x(345),V=x(4454),M=x(6697),w=x(177),se=x(2152),Pe=x(708),B=x(4438);let Le=(()=>{class Z{transform(D){let L=new Date(D);return`${L.getDate()}/${L.getMonth()+1}/${L.getFullYear()}`}static#e=this.\u0275fac=function(L){return new(L||Z)};static#t=this.\u0275pipe=B.EJ8({name:"date",type:Z,pure:!0,standalone:!0})}return Z})();var $e=x(6483);function ve(Z,I){if(1&Z){const D=B.RV6();B.j41(0,"img",7),B.bIt("click",function(){B.eBV(D);const Y=B.XpG(2);return B.Njj(Y.showMoreItems=!Y.showMoreItems)})("click",function(){B.eBV(D);const Y=B.XpG(2);return B.Njj(Y.changeArrow=!Y.changeArrow)}),B.k0s()}}function _e(Z,I){if(1&Z){const D=B.RV6();B.j41(0,"img",8),B.bIt("click",function(){B.eBV(D);const Y=B.XpG(2);return B.Njj(Y.showMoreItems=!Y.showMoreItems&&!Y.changeArrow)})("click",function(){B.eBV(D);const Y=B.XpG(2);return B.Njj(Y.changeArrow=!Y.changeArrow)}),B.k0s()}}function He(Z,I){if(1&Z&&(B.j41(0,"div",9)(1,"div"),B.nrm(2,"img",10),B.k0s(),B.j41(3,"div",11)(4,"span"),B.EFF(5),B.k0s(),B.j41(6,"span"),B.EFF(7),B.k0s(),B.j41(8,"span"),B.EFF(9),B.k0s(),B.j41(10,"span"),B.EFF(11),B.k0s(),B.j41(12,"span"),B.EFF(13),B.k0s()()()),2&Z){const D=I.$implicit,L=B.XpG(2);B.R7$(2),B.Y8G("src",D.product.product.photoUrl[0],B.B4B),B.R7$(3),B.JRh(L.purchase.email?L.purchase.email:"unknown"),B.R7$(2),B.JRh(D.product.product.category),B.R7$(2),B.JRh(D.product.product.model),B.R7$(2),B.SpI("Price: ",D.product.product.price,"$"),B.R7$(2),B.SpI("Dicsount: ",D.product.product.discount,"%")}}function Tt(Z,I){if(1&Z&&(B.j41(0,"div",13)(1,"div"),B.nrm(2,"img",10),B.k0s(),B.j41(3,"div",11)(4,"span"),B.EFF(5),B.k0s(),B.j41(6,"span"),B.EFF(7),B.nI1(8,"upperCase"),B.k0s(),B.j41(9,"span"),B.EFF(10),B.nI1(11,"upperCase"),B.k0s(),B.j41(12,"span"),B.EFF(13),B.k0s(),B.j41(14,"span"),B.EFF(15),B.k0s()()()),2&Z){const D=I.$implicit,L=B.XpG(3);B.R7$(2),B.Y8G("src",D.product.product.photoUrl[0],B.B4B),B.R7$(3),B.JRh(L.purchase.email?L.purchase.email:"unknown"),B.R7$(2),B.JRh(B.bMT(8,6,D.product.product.category)),B.R7$(3),B.JRh(B.bMT(11,8,D.product.product.model)),B.R7$(3),B.SpI("Price: ",D.product.product.price,""),B.R7$(2),B.SpI("Dicsount: ",D.product.product.discount,"%")}}function De(Z,I){if(1&Z&&(B.j41(0,"div"),B.DNE(1,Tt,16,10,"div",12),B.nI1(2,"slice"),B.k0s()),2&Z){const D=B.XpG(2);B.R7$(),B.Y8G("ngForOf",B.i5U(2,1,D.purchase.products,1))}}function Be(Z,I){if(1&Z&&(B.j41(0,"div",1)(1,"span"),B.EFF(2),B.nI1(3,"date"),B.k0s(),B.j41(4,"span"),B.EFF(5),B.k0s(),B.j41(6,"div",2),B.DNE(7,ve,1,0,"img",3)(8,_e,1,0,"img",4),B.k0s(),B.DNE(9,He,14,6,"div",5),B.nI1(10,"slice"),B.DNE(11,De,3,4,"div",6),B.k0s()),2&Z){const D=B.XpG();B.R7$(2),B.JRh(B.bMT(3,6,D.purchase.date)),B.R7$(3),B.SpI("total price: ",D.purchase.totalPrice,""),B.R7$(2),B.Y8G("ngIf",!D.changeArrow),B.R7$(),B.Y8G("ngIf",D.changeArrow),B.R7$(),B.Y8G("ngForOf",B.brH(10,8,D.purchase.products,0,1)),B.R7$(2),B.Y8G("ngIf",D.showMoreItems)}}let At=(()=>{class Z{constructor(){this.showMoreItems=!1,this.changeArrow=!1}static#e=this.\u0275fac=function(L){return new(L||Z)};static#t=this.\u0275cmp=B.VBU({type:Z,selectors:[["app-purchased-product"]],inputs:{purchase:"purchase"},standalone:!0,features:[B.aNF],decls:1,vars:1,consts:[["class","purchase-wrapper",4,"ngIf"],[1,"purchase-wrapper"],[1,"see-more-arrow"],["src","assets/arrow-down.png","alt","img",3,"click",4,"ngIf"],["src","assets/arrow-up.png","alt","img",3,"click",4,"ngIf"],["class","purchase",4,"ngFor","ngForOf"],[4,"ngIf"],["src","assets/arrow-down.png","alt","img",3,"click"],["src","assets/arrow-up.png","alt","img",3,"click"],[1,"purchase"],["alt","img",3,"src"],[1,"grid-container"],["class","other-items purchase",4,"ngFor","ngForOf"],[1,"other-items","purchase"]],template:function(L,Y){1&L&&B.DNE(0,Be,12,12,"div",0),2&L&&B.Y8G("ngIf",Y.purchase)},dependencies:[w.MD,w.Sq,w.bT,w.P9,$e.P,Le],styles:[".purchase-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;background-color:#7daecf;width:490px;position:relative}.purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]{position:absolute;bottom:-8px;width:35px;height:35px;display:flex;justify-content:center;align-items:center}.purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%]{display:flex;gap:3%;border:1px solid rgb(84,145,185);width:470px;height:120px;padding:10px;margin-bottom:36px}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:13%;height:100%}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:70px;height:100%}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]{display:grid;width:100%;gap:7px;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(3,1fr);text-align:center}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{align-self:center}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-self:center;border:none;background-color:#373b44;color:#fff;width:120px;height:20px;cursor:pointer}"]})}return Z})();var yt=x(6569);function st(Z,I){if(1&Z&&(B.j41(0,"div"),B.nrm(1,"app-purchased-product",3),B.k0s()),2&Z){const D=I.$implicit;B.R7$(),B.Y8G("purchase",D)}}function bt(Z,I){if(1&Z&&(B.j41(0,"div"),B.nrm(1,"app-purchased-product",3),B.k0s()),2&Z){const D=I.$implicit;B.R7$(),B.Y8G("purchase",D)}}const ue=[{path:"",redirectTo:"products",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.resolve().then(x.bind(x,513)).then(Z=>Z.LoginAndRegistrationModule)},{path:"about-us",loadComponent:()=>x.e(70).then(x.bind(x,9070)).then(Z=>Z.AboutUsComponent)},{path:"contact",loadComponent:()=>x.e(222).then(x.bind(x,3222)).then(Z=>Z.ContanctComponent)},{path:"products",loadChildren:()=>Promise.resolve().then(x.bind(x,8569)).then(Z=>Z.ProductPageModule)},{path:"profile/:id",loadChildren:()=>Promise.resolve().then(x.bind(x,1343)).then(Z=>Z.ProfileModuleModule)},{path:"single-product/:id",loadChildren:()=>Promise.resolve().then(x.bind(x,2735)).then(Z=>Z.SingleProductPageModule)},{path:"categoty/:category",loadChildren:()=>x.e(456).then(x.bind(x,9456)).then(Z=>Z.SinleCategoryPageModuleModule)},{path:"purchasedProducts",component:(()=>{class Z{constructor(D,L){this.authService=D,this.cd=L,this.purchasedProducts=[],this.length=0}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.loggedUser.pipe((0,M.s)(1)).subscribe(D=>{D&&D.user.purchasedProducts?(this.user=D,this.purchasedProducts=D?.user.purchasedProducts.slice(1),this.length=this.purchasedProducts.length,console.log("Purchased products:",this.purchasedProducts)):console.log("No user or purchased products found.")},D=>{console.error("Error fetching user data:",D)})}static#e=this.\u0275fac=function(L){return new(L||Z)(B.rXU(yt.p),B.rXU(B.gRc))};static#t=this.\u0275cmp=B.VBU({type:Z,selectors:[["app-purchased-products"]],standalone:!0,features:[B.aNF],decls:9,vars:10,consts:[[1,"container"],[1,"purchased-products"],[4,"ngFor","ngForOf"],[3,"purchase"]],template:function(L,Y){1&L&&(B.nrm(0,"app-header"),B.j41(1,"div",0)(2,"div",1),B.DNE(3,st,2,1,"div",2),B.nI1(4,"slice"),B.k0s(),B.j41(5,"div",1),B.DNE(6,bt,2,1,"div",2),B.nI1(7,"slice"),B.k0s()(),B.nrm(8,"app-footer")),2&L&&(B.R7$(3),B.Y8G("ngForOf",B.brH(4,2,Y.purchasedProducts,0,Y.length/2+1)),B.R7$(3),B.Y8G("ngForOf",B.brH(7,6,Y.purchasedProducts,Y.length/2+1,Y.length)))},dependencies:[w.MD,w.Sq,w.P9,se.l,Pe.n,At],styles:[".container[_ngcontent-%COMP%]{padding:40px;display:flex;justify-content:center;gap:20px}.container[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0})}return Z})()}];let de=(()=>{class Z{static#e=this.\u0275fac=function(L){return new(L||Z)};static#t=this.\u0275mod=B.$C({type:Z});static#n=this.\u0275inj=B.G2t({imports:[V.iI.forRoot(ue,{useHash:!0}),V.iI]})}return Z})(),ae=(()=>{class Z{constructor(){this.title="musicShop"}static#e=this.\u0275fac=function(L){return new(L||Z)};static#t=this.\u0275cmp=B.VBU({type:Z,selectors:[["app-root"]],decls:1,vars:0,template:function(L,Y){1&L&&B.nrm(0,"router-outlet")},dependencies:[V.n3]})}return Z})();var Ve=x(513),Ye=x(8569),et=x(1343),ce=x(2735),Ne=x(3227),We=x(9969);function bn(Z){return new B.wOt(3e3,!1)}function xi(Z){switch(Z.length){case 0:return new We.sf;case 1:return Z[0];default:return new We.ui(Z)}}function On(Z,I,D=new Map,L=new Map){const Y=[],fe=[];let Ae=-1,Ue=null;if(I.forEach(lt=>{const Pt=lt.get("offset"),cn=Pt==Ae,gn=cn&&Ue||new Map;lt.forEach((Ir,Kn)=>{let Hn=Kn,Dn=Ir;if("offset"!==Kn)switch(Hn=Z.normalizePropertyName(Hn,Y),Dn){case We.FX:Dn=D.get(Kn);break;case We.kp:Dn=L.get(Kn);break;default:Dn=Z.normalizeStyleValue(Kn,Hn,Dn,Y)}gn.set(Hn,Dn)}),cn||fe.push(gn),Ue=gn,Ae=Pt}),Y.length)throw function ni(Z){return new B.wOt(3502,!1)}();return fe}function Di(Z,I,D,L){switch(I){case"start":Z.onStart(()=>L(D&&Ht(D,"start",Z)));break;case"done":Z.onDone(()=>L(D&&Ht(D,"done",Z)));break;case"destroy":Z.onDestroy(()=>L(D&&Ht(D,"destroy",Z)))}}function Ht(Z,I,D){const fe=Vn(Z.element,Z.triggerName,Z.fromState,Z.toState,I||Z.phaseName,D.totalTime??Z.totalTime,!!D.disabled),Ae=Z._data;return null!=Ae&&(fe._data=Ae),fe}function Vn(Z,I,D,L,Y="",fe=0,Ae){return{element:Z,triggerName:I,fromState:D,toState:L,phaseName:Y,totalTime:fe,disabled:!!Ae}}function _r(Z,I,D){let L=Z.get(I);return L||Z.set(I,L=D),L}function qt(Z){const I=Z.indexOf(":");return[Z.substring(1,I),Z.slice(I+1)]}const Xt=typeof document>"u"?null:document.documentElement;function Kr(Z){const I=Z.parentNode||Z.host||null;return I===Xt?null:I}let Yr=null,xe=!1;function Nt(Z,I){for(;I;){if(I===Z)return!0;I=Kr(I)}return!1}function ge(Z,I,D){if(D)return Array.from(Z.querySelectorAll(I));const L=Z.querySelector(I);return L?[L]:[]}let J=(()=>{class Z{validateStyleProperty(D){return function we(Z){Yr||(Yr=function Ke(){return typeof document<"u"?document.body:null}()||{},xe=!!Yr.style&&"WebkitAppearance"in Yr.style);let I=!0;return Yr.style&&!function Ln(Z){return"ebkit"==Z.substring(1,6)}(Z)&&(I=Z in Yr.style,!I&&xe&&(I="Webkit"+Z.charAt(0).toUpperCase()+Z.slice(1)in Yr.style)),I}(D)}matchesElement(D,L){return!1}containsElement(D,L){return Nt(D,L)}getParentElement(D){return Kr(D)}query(D,L,Y){return ge(D,L,Y)}computeStyle(D,L,Y){return Y||""}animate(D,L,Y,fe,Ae,Ue=[],lt){return new We.sf(Y,fe)}static#e=this.\u0275fac=function(L){return new(L||Z)};static#t=this.\u0275prov=B.jDH({token:Z,factory:Z.\u0275fac})}return Z})();class ie{static#e=this.NOOP=new J}class me{}const Ft=1e3,Xn="ng-enter",Tn="ng-leave",$t="ng-trigger",Me=".ng-trigger",Lr="ng-animating",Jr=".ng-animating";function rs(Z){if("number"==typeof Z)return Z;const I=Z.match(/^(-?[\.\d]+)(m?s)/);return!I||I.length<2?0:ys(parseFloat(I[1]),I[2])}function ys(Z,I){return"s"===I?Z*Ft:Z}function ar(Z,I,D){return Z.hasOwnProperty("duration")?Z:function fs(Z,I,D){let Y,fe=0,Ae="";if("string"==typeof Z){const Ue=Z.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Ue)return I.push(bn()),{duration:0,delay:0,easing:""};Y=ys(parseFloat(Ue[1]),Ue[2]);const lt=Ue[3];null!=lt&&(fe=ys(parseFloat(lt),Ue[4]));const Pt=Ue[5];Pt&&(Ae=Pt)}else Y=Z;if(!D){let Ue=!1,lt=I.length;Y<0&&(I.push(function Fn(){return new B.wOt(3100,!1)}()),Ue=!0),fe<0&&(I.push(function xn(){return new B.wOt(3101,!1)}()),Ue=!0),Ue&&I.splice(lt,0,bn())}return{duration:Y,delay:fe,easing:Ae}}(Z,I,D)}function ut(Z,I,D){I.forEach((L,Y)=>{const fe=Xe(Y);D&&!D.has(Y)&&D.set(Y,Z.style[fe]),Z.style[fe]=L})}function Je(Z,I){I.forEach((D,L)=>{const Y=Xe(L);Z.style[Y]=""})}function xt(Z){return Array.isArray(Z)?1==Z.length?Z[0]:(0,We.K2)(Z):Z}const ne=new RegExp("{{\\s*(.+?)\\s*}}","g");function ye(Z){let I=[];if("string"==typeof Z){let D;for(;D=ne.exec(Z);)I.push(D[1]);ne.lastIndex=0}return I}function Ie(Z,I,D){const L=`${Z}`,Y=L.replace(ne,(fe,Ae)=>{let Ue=I[Ae];return null==Ue&&(D.push(function An(Z){return new B.wOt(3003,!1)}()),Ue=""),Ue.toString()});return Y==L?Z:Y}const pt=/-+([a-z0-9])/g;function Xe(Z){return Z.replace(pt,(...I)=>I[1].toUpperCase())}function on(Z,I,D){switch(I.type){case We.If.Trigger:return Z.visitTrigger(I,D);case We.If.State:return Z.visitState(I,D);case We.If.Transition:return Z.visitTransition(I,D);case We.If.Sequence:return Z.visitSequence(I,D);case We.If.Group:return Z.visitGroup(I,D);case We.If.Animate:return Z.visitAnimate(I,D);case We.If.Keyframes:return Z.visitKeyframes(I,D);case We.If.Style:return Z.visitStyle(I,D);case We.If.Reference:return Z.visitReference(I,D);case We.If.AnimateChild:return Z.visitAnimateChild(I,D);case We.If.AnimateRef:return Z.visitAnimateRef(I,D);case We.If.Query:return Z.visitQuery(I,D);case We.If.Stagger:return Z.visitStagger(I,D);default:throw function ke(Z){return new B.wOt(3004,!1)}()}}function br(Z,I){return window.getComputedStyle(Z)[I]}const si=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class yr extends me{normalizePropertyName(I,D){return Xe(I)}normalizeStyleValue(I,D,L,Y){let fe="";const Ae=L.toString().trim();if(si.has(D)&&0!==L&&"0"!==L)if("number"==typeof L)fe="px";else{const Ue=L.match(/^[+-]?[\d\.]+([a-z]*)$/);Ue&&0==Ue[1].length&&Y.push(function Qe(Z,I){return new B.wOt(3005,!1)}())}return Ae+fe}}const Yn="*";const ri=new Set(["true","1"]),Nn=new Set(["false","0"]);function cr(Z,I){const D=ri.has(Z)||Nn.has(Z),L=ri.has(I)||Nn.has(I);return(Y,fe)=>{let Ae=Z==Yn||Z==Y,Ue=I==Yn||I==fe;return!Ae&&D&&"boolean"==typeof Y&&(Ae=Y?ri.has(Z):Nn.has(Z)),!Ue&&L&&"boolean"==typeof fe&&(Ue=fe?ri.has(I):Nn.has(I)),Ae&&Ue}}const Qi=new RegExp("s*:selfs*,?","g");function wo(Z,I,D,L){return new va(Z).build(I,D,L)}class va{constructor(I){this._driver=I}build(I,D,L){const Y=new qo(D);return this._resetContextStyleTimingState(Y),on(this,xt(I),Y)}_resetContextStyleTimingState(I){I.currentQuerySelector="",I.collectedStyles=new Map,I.collectedStyles.set("",new Map),I.currentTime=0}visitTrigger(I,D){let L=D.queryCount=0,Y=D.depCount=0;const fe=[],Ae=[];return"@"==I.name.charAt(0)&&D.errors.push(function ct(){return new B.wOt(3006,!1)}()),I.definitions.forEach(Ue=>{if(this._resetContextStyleTimingState(D),Ue.type==We.If.State){const lt=Ue,Pt=lt.name;Pt.toString().split(/\s*,\s*/).forEach(cn=>{lt.name=cn,fe.push(this.visitState(lt,D))}),lt.name=Pt}else if(Ue.type==We.If.Transition){const lt=this.visitTransition(Ue,D);L+=lt.queryCount,Y+=lt.depCount,Ae.push(lt)}else D.errors.push(function _t(){return new B.wOt(3007,!1)}())}),{type:We.If.Trigger,name:I.name,states:fe,transitions:Ae,queryCount:L,depCount:Y,options:null}}visitState(I,D){const L=this.visitStyle(I.styles,D),Y=I.options&&I.options.params||null;if(L.containsDynamicStyles){const fe=new Set,Ae=Y||{};L.styles.forEach(Ue=>{Ue instanceof Map&&Ue.forEach(lt=>{ye(lt).forEach(Pt=>{Ae.hasOwnProperty(Pt)||fe.add(Pt)})})}),fe.size&&D.errors.push(function vt(Z,I){return new B.wOt(3008,!1)}(0,fe.values()))}return{type:We.If.State,name:I.name,style:L,options:Y?{params:Y}:null}}visitTransition(I,D){D.queryCount=0,D.depCount=0;const L=on(this,xt(I.animation),D),Y=function kr(Z,I){const D=[];return"string"==typeof Z?Z.split(/\s*,\s*/).forEach(L=>function ui(Z,I,D){if(":"==Z[0]){const lt=function gi(Z,I){switch(Z){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(D,L)=>parseFloat(L)>parseFloat(D);case":decrement":return(D,L)=>parseFloat(L)<parseFloat(D);default:return I.push(function Qn(Z){return new B.wOt(3016,!1)}()),"* => *"}}(Z,D);if("function"==typeof lt)return void I.push(lt);Z=lt}const L=Z.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==L||L.length<4)return D.push(function yn(Z){return new B.wOt(3015,!1)}()),I;const Y=L[1],fe=L[2],Ae=L[3];I.push(cr(Y,Ae)),"<"==fe[0]&&(Y!=Yn||Ae!=Yn)&&I.push(cr(Ae,Y))}(L,D,I)):D.push(Z),D}(I.expr,D.errors);return{type:We.If.Transition,matchers:Y,animation:L,queryCount:D.queryCount,depCount:D.depCount,options:ws(I.options)}}visitSequence(I,D){return{type:We.If.Sequence,steps:I.steps.map(L=>on(this,L,D)),options:ws(I.options)}}visitGroup(I,D){const L=D.currentTime;let Y=0;const fe=I.steps.map(Ae=>{D.currentTime=L;const Ue=on(this,Ae,D);return Y=Math.max(Y,D.currentTime),Ue});return D.currentTime=Y,{type:We.If.Group,steps:fe,options:ws(I.options)}}visitAnimate(I,D){const L=function wr(Z,I){if(Z.hasOwnProperty("duration"))return Z;if("number"==typeof Z)return xs(ar(Z,I).duration,0,"");const D=Z;if(D.split(/\s+/).some(fe=>"{"==fe.charAt(0)&&"{"==fe.charAt(1))){const fe=xs(0,0,"");return fe.dynamic=!0,fe.strValue=D,fe}const Y=ar(D,I);return xs(Y.duration,Y.delay,Y.easing)}(I.timings,D.errors);D.currentAnimateTimings=L;let Y,fe=I.styles?I.styles:(0,We.iF)({});if(fe.type==We.If.Keyframes)Y=this.visitKeyframes(fe,D);else{let Ae=I.styles,Ue=!1;if(!Ae){Ue=!0;const Pt={};L.easing&&(Pt.easing=L.easing),Ae=(0,We.iF)(Pt)}D.currentTime+=L.duration+L.delay;const lt=this.visitStyle(Ae,D);lt.isEmptyStep=Ue,Y=lt}return D.currentAnimateTimings=null,{type:We.If.Animate,timings:L,style:Y,options:null}}visitStyle(I,D){const L=this._makeStyleAst(I,D);return this._validateStyleAst(L,D),L}_makeStyleAst(I,D){const L=[],Y=Array.isArray(I.styles)?I.styles:[I.styles];for(let Ue of Y)"string"==typeof Ue?Ue===We.kp?L.push(Ue):D.errors.push(new B.wOt(3002,!1)):L.push(new Map(Object.entries(Ue)));let fe=!1,Ae=null;return L.forEach(Ue=>{if(Ue instanceof Map&&(Ue.has("easing")&&(Ae=Ue.get("easing"),Ue.delete("easing")),!fe))for(let lt of Ue.values())if(lt.toString().indexOf("{{")>=0){fe=!0;break}}),{type:We.If.Style,styles:L,easing:Ae,offset:I.offset,containsDynamicStyles:fe,options:null}}_validateStyleAst(I,D){const L=D.currentAnimateTimings;let Y=D.currentTime,fe=D.currentTime;L&&fe>0&&(fe-=L.duration+L.delay),I.styles.forEach(Ae=>{"string"!=typeof Ae&&Ae.forEach((Ue,lt)=>{const Pt=D.collectedStyles.get(D.currentQuerySelector),cn=Pt.get(lt);let gn=!0;cn&&(fe!=Y&&fe>=cn.startTime&&Y<=cn.endTime&&(D.errors.push(function un(Z,I,D,L,Y){return new B.wOt(3010,!1)}()),gn=!1),fe=cn.startTime),gn&&Pt.set(lt,{startTime:fe,endTime:Y}),D.options&&function nn(Z,I,D){const L=I.params||{},Y=ye(Z);Y.length&&Y.forEach(fe=>{L.hasOwnProperty(fe)||D.push(function fn(Z){return new B.wOt(3001,!1)}())})}(Ue,D.options,D.errors)})})}visitKeyframes(I,D){const L={type:We.If.Keyframes,styles:[],options:null};if(!D.currentAnimateTimings)return D.errors.push(function Jt(){return new B.wOt(3011,!1)}()),L;let fe=0;const Ae=[];let Ue=!1,lt=!1,Pt=0;const cn=I.steps.map(ci=>{const yi=this._makeStyleAst(ci,D);let di=null!=yi.offset?yi.offset:function Js(Z){if("string"==typeof Z)return null;let I=null;if(Array.isArray(Z))Z.forEach(D=>{if(D instanceof Map&&D.has("offset")){const L=D;I=parseFloat(L.get("offset")),L.delete("offset")}});else if(Z instanceof Map&&Z.has("offset")){const D=Z;I=parseFloat(D.get("offset")),D.delete("offset")}return I}(yi.styles),Vi=0;return null!=di&&(fe++,Vi=yi.offset=di),lt=lt||Vi<0||Vi>1,Ue=Ue||Vi<Pt,Pt=Vi,Ae.push(Vi),yi});lt&&D.errors.push(function en(){return new B.wOt(3012,!1)}()),Ue&&D.errors.push(function vn(){return new B.wOt(3200,!1)}());const gn=I.steps.length;let Ir=0;fe>0&&fe<gn?D.errors.push(function En(){return new B.wOt(3202,!1)}()):0==fe&&(Ir=1/(gn-1));const Kn=gn-1,Hn=D.currentTime,Dn=D.currentAnimateTimings,ei=Dn.duration;return cn.forEach((ci,yi)=>{const di=Ir>0?yi==Kn?1:Ir*yi:Ae[yi],Vi=di*ei;D.currentTime=Hn+Dn.delay+Vi,Dn.duration=Vi,this._validateStyleAst(ci,D),ci.offset=di,L.styles.push(ci)}),L}visitReference(I,D){return{type:We.If.Reference,animation:on(this,xt(I.animation),D),options:ws(I.options)}}visitAnimateChild(I,D){return D.depCount++,{type:We.If.AnimateChild,options:ws(I.options)}}visitAnimateRef(I,D){return{type:We.If.AnimateRef,animation:this.visitReference(I.animation,D),options:ws(I.options)}}visitQuery(I,D){const L=D.currentQuerySelector,Y=I.options||{};D.queryCount++,D.currentQuery=I;const[fe,Ae]=function ko(Z){const I=!!Z.split(/\s*,\s*/).find(D=>":self"==D);return I&&(Z=Z.replace(Qi,"")),Z=Z.replace(/@\*/g,Me).replace(/@\w+/g,D=>Me+"-"+D.slice(1)).replace(/:animating/g,Jr),[Z,I]}(I.selector);D.currentQuerySelector=L.length?L+" "+fe:fe,_r(D.collectedStyles,D.currentQuerySelector,new Map);const Ue=on(this,xt(I.animation),D);return D.currentQuery=null,D.currentQuerySelector=L,{type:We.If.Query,selector:fe,limit:Y.limit||0,optional:!!Y.optional,includeSelf:Ae,animation:Ue,originalSelector:I.selector,options:ws(I.options)}}visitStagger(I,D){D.currentQuery||D.errors.push(function jn(){return new B.wOt(3013,!1)}());const L="full"===I.timings?{duration:0,delay:0,easing:"full"}:ar(I.timings,D.errors,!0);return{type:We.If.Stagger,animation:on(this,xt(I.animation),D),timings:L,options:null}}}class qo{constructor(I){this.errors=I,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ws(Z){return Z?(Z={...Z}).params&&(Z.params=function sr(Z){return Z?{...Z}:null}(Z.params)):Z={},Z}function xs(Z,I,D){return{duration:Z,delay:I,easing:D}}function Fo(Z,I,D,L,Y,fe,Ae=null,Ue=!1){return{type:1,element:Z,keyframes:I,preStyleProps:D,postStyleProps:L,duration:Y,delay:fe,totalTime:Y+fe,easing:Ae,subTimeline:Ue}}class gs{constructor(){this._map=new Map}get(I){return this._map.get(I)||[]}append(I,D){let L=this._map.get(I);L||this._map.set(I,L=[]),L.push(...D)}has(I){return this._map.has(I)}clear(){this._map.clear()}}const Ui=new RegExp(":enter","g"),js=new RegExp(":leave","g");function ks(Z,I,D,L,Y,fe=new Map,Ae=new Map,Ue,lt,Pt=[]){return(new Zr).buildKeyframes(Z,I,D,L,Y,fe,Ae,Ue,lt,Pt)}class Zr{buildKeyframes(I,D,L,Y,fe,Ae,Ue,lt,Pt,cn=[]){Pt=Pt||new gs;const gn=new oi(I,D,Pt,Y,fe,cn,[]);gn.options=lt;const Ir=lt.delay?rs(lt.delay):0;gn.currentTimeline.delayNextStep(Ir),gn.currentTimeline.setStyles([Ae],null,gn.errors,lt),on(this,L,gn);const Kn=gn.timelines.filter(Hn=>Hn.containsAnimation());if(Kn.length&&Ue.size){let Hn;for(let Dn=Kn.length-1;Dn>=0;Dn--){const ei=Kn[Dn];if(ei.element===D){Hn=ei;break}}Hn&&!Hn.allowOnlyTimelineStyles()&&Hn.setStyles([Ue],null,gn.errors,lt)}return Kn.length?Kn.map(Hn=>Hn.buildKeyframes()):[Fo(D,[],[],[],0,Ir,"",!1)]}visitTrigger(I,D){}visitState(I,D){}visitTransition(I,D){}visitAnimateChild(I,D){const L=D.subInstructions.get(D.element);if(L){const Y=D.createSubContext(I.options),fe=D.currentTimeline.currentTime,Ae=this._visitSubInstructions(L,Y,Y.options);fe!=Ae&&D.transformIntoNewTimeline(Ae)}D.previousNode=I}visitAnimateRef(I,D){const L=D.createSubContext(I.options);L.transformIntoNewTimeline(),this._applyAnimationRefDelays([I.options,I.animation.options],D,L),this.visitReference(I.animation,L),D.transformIntoNewTimeline(L.currentTimeline.currentTime),D.previousNode=I}_applyAnimationRefDelays(I,D,L){for(const Y of I){const fe=Y?.delay;if(fe){const Ae="number"==typeof fe?fe:rs(Ie(fe,Y?.params??{},D.errors));L.delayNextStep(Ae)}}}_visitSubInstructions(I,D,L){let fe=D.currentTimeline.currentTime;const Ae=null!=L.duration?rs(L.duration):null,Ue=null!=L.delay?rs(L.delay):null;return 0!==Ae&&I.forEach(lt=>{const Pt=D.appendInstructionToTimeline(lt,Ae,Ue);fe=Math.max(fe,Pt.duration+Pt.delay)}),fe}visitReference(I,D){D.updateOptions(I.options,!0),on(this,I.animation,D),D.previousNode=I}visitSequence(I,D){const L=D.subContextCount;let Y=D;const fe=I.options;if(fe&&(fe.params||fe.delay)&&(Y=D.createSubContext(fe),Y.transformIntoNewTimeline(),null!=fe.delay)){Y.previousNode.type==We.If.Style&&(Y.currentTimeline.snapshotCurrentStyles(),Y.previousNode=Zs);const Ae=rs(fe.delay);Y.delayNextStep(Ae)}I.steps.length&&(I.steps.forEach(Ae=>on(this,Ae,Y)),Y.currentTimeline.applyStylesToKeyframe(),Y.subContextCount>L&&Y.transformIntoNewTimeline()),D.previousNode=I}visitGroup(I,D){const L=[];let Y=D.currentTimeline.currentTime;const fe=I.options&&I.options.delay?rs(I.options.delay):0;I.steps.forEach(Ae=>{const Ue=D.createSubContext(I.options);fe&&Ue.delayNextStep(fe),on(this,Ae,Ue),Y=Math.max(Y,Ue.currentTimeline.currentTime),L.push(Ue.currentTimeline)}),L.forEach(Ae=>D.currentTimeline.mergeTimelineCollectedStyles(Ae)),D.transformIntoNewTimeline(Y),D.previousNode=I}_visitTiming(I,D){if(I.dynamic){const L=I.strValue;return ar(D.params?Ie(L,D.params,D.errors):L,D.errors)}return{duration:I.duration,delay:I.delay,easing:I.easing}}visitAnimate(I,D){const L=D.currentAnimateTimings=this._visitTiming(I.timings,D),Y=D.currentTimeline;L.delay&&(D.incrementTime(L.delay),Y.snapshotCurrentStyles());const fe=I.style;fe.type==We.If.Keyframes?this.visitKeyframes(fe,D):(D.incrementTime(L.duration),this.visitStyle(fe,D),Y.applyStylesToKeyframe()),D.currentAnimateTimings=null,D.previousNode=I}visitStyle(I,D){const L=D.currentTimeline,Y=D.currentAnimateTimings;!Y&&L.hasCurrentStyleProperties()&&L.forwardFrame();const fe=Y&&Y.easing||I.easing;I.isEmptyStep?L.applyEmptyStep(fe):L.setStyles(I.styles,fe,D.errors,D.options),D.previousNode=I}visitKeyframes(I,D){const L=D.currentAnimateTimings,Y=D.currentTimeline.duration,fe=L.duration,Ue=D.createSubContext().currentTimeline;Ue.easing=L.easing,I.styles.forEach(lt=>{Ue.forwardTime((lt.offset||0)*fe),Ue.setStyles(lt.styles,lt.easing,D.errors,D.options),Ue.applyStylesToKeyframe()}),D.currentTimeline.mergeTimelineCollectedStyles(Ue),D.transformIntoNewTimeline(Y+fe),D.previousNode=I}visitQuery(I,D){const L=D.currentTimeline.currentTime,Y=I.options||{},fe=Y.delay?rs(Y.delay):0;fe&&(D.previousNode.type===We.If.Style||0==L&&D.currentTimeline.hasCurrentStyleProperties())&&(D.currentTimeline.snapshotCurrentStyles(),D.previousNode=Zs);let Ae=L;const Ue=D.invokeQuery(I.selector,I.originalSelector,I.limit,I.includeSelf,!!Y.optional,D.errors);D.currentQueryTotal=Ue.length;let lt=null;Ue.forEach((Pt,cn)=>{D.currentQueryIndex=cn;const gn=D.createSubContext(I.options,Pt);fe&&gn.delayNextStep(fe),Pt===D.element&&(lt=gn.currentTimeline),on(this,I.animation,gn),gn.currentTimeline.applyStylesToKeyframe(),Ae=Math.max(Ae,gn.currentTimeline.currentTime)}),D.currentQueryIndex=0,D.currentQueryTotal=0,D.transformIntoNewTimeline(Ae),lt&&(D.currentTimeline.mergeTimelineCollectedStyles(lt),D.currentTimeline.snapshotCurrentStyles()),D.previousNode=I}visitStagger(I,D){const L=D.parentContext,Y=D.currentTimeline,fe=I.timings,Ae=Math.abs(fe.duration),Ue=Ae*(D.currentQueryTotal-1);let lt=Ae*D.currentQueryIndex;switch(fe.duration<0?"reverse":fe.easing){case"reverse":lt=Ue-lt;break;case"full":lt=L.currentStaggerTime}const cn=D.currentTimeline;lt&&cn.delayNextStep(lt);const gn=cn.currentTime;on(this,I.animation,D),D.previousNode=I,L.currentStaggerTime=Y.currentTime-gn+(Y.startTime-L.currentTimeline.startTime)}}const Zs={};class oi{constructor(I,D,L,Y,fe,Ae,Ue,lt){this._driver=I,this.element=D,this.subInstructions=L,this._enterClassName=Y,this._leaveClassName=fe,this.errors=Ae,this.timelines=Ue,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Zs,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=lt||new Fr(this._driver,D,0),Ue.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(I,D){if(!I)return;const L=I;let Y=this.options;null!=L.duration&&(Y.duration=rs(L.duration)),null!=L.delay&&(Y.delay=rs(L.delay));const fe=L.params;if(fe){let Ae=Y.params;Ae||(Ae=this.options.params={}),Object.keys(fe).forEach(Ue=>{(!D||!Ae.hasOwnProperty(Ue))&&(Ae[Ue]=Ie(fe[Ue],Ae,this.errors))})}}_copyOptions(){const I={};if(this.options){const D=this.options.params;if(D){const L=I.params={};Object.keys(D).forEach(Y=>{L[Y]=D[Y]})}}return I}createSubContext(I=null,D,L){const Y=D||this.element,fe=new oi(this._driver,Y,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Y,L||0));return fe.previousNode=this.previousNode,fe.currentAnimateTimings=this.currentAnimateTimings,fe.options=this._copyOptions(),fe.updateOptions(I),fe.currentQueryIndex=this.currentQueryIndex,fe.currentQueryTotal=this.currentQueryTotal,fe.parentContext=this,this.subContextCount++,fe}transformIntoNewTimeline(I){return this.previousNode=Zs,this.currentTimeline=this.currentTimeline.fork(this.element,I),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(I,D,L){const Y={duration:D??I.duration,delay:this.currentTimeline.currentTime+(L??0)+I.delay,easing:""},fe=new li(this._driver,I.element,I.keyframes,I.preStyleProps,I.postStyleProps,Y,I.stretchStartingKeyframe);return this.timelines.push(fe),Y}incrementTime(I){this.currentTimeline.forwardTime(this.currentTimeline.duration+I)}delayNextStep(I){I>0&&this.currentTimeline.delayNextStep(I)}invokeQuery(I,D,L,Y,fe,Ae){let Ue=[];if(Y&&Ue.push(this.element),I.length>0){I=(I=I.replace(Ui,"."+this._enterClassName)).replace(js,"."+this._leaveClassName);let Pt=this._driver.query(this.element,I,1!=L);0!==L&&(Pt=L<0?Pt.slice(Pt.length+L,Pt.length):Pt.slice(0,L)),Ue.push(...Pt)}return!fe&&0==Ue.length&&Ae.push(function it(Z){return new B.wOt(3014,!1)}()),Ue}}class Fr{constructor(I,D,L,Y){this._driver=I,this.element=D,this.startTime=L,this._elementTimelineStylesLookup=Y,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(D),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(D,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(I){const D=1===this._keyframes.size&&this._pendingStyles.size;this.duration||D?(this.forwardTime(this.currentTime+I),D&&this.snapshotCurrentStyles()):this.startTime+=I}fork(I,D){return this.applyStylesToKeyframe(),new Fr(this._driver,I,D||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(I){this.applyStylesToKeyframe(),this.duration=I,this._loadKeyframe()}_updateStyle(I,D){this._localTimelineStyles.set(I,D),this._globalTimelineStyles.set(I,D),this._styleSummary.set(I,{time:this.currentTime,value:D})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(I){I&&this._previousKeyframe.set("easing",I);for(let[D,L]of this._globalTimelineStyles)this._backFill.set(D,L||We.kp),this._currentKeyframe.set(D,We.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(I,D,L,Y){D&&this._previousKeyframe.set("easing",D);const fe=Y&&Y.params||{},Ae=function ln(Z,I){const D=new Map;let L;return Z.forEach(Y=>{if("*"===Y){L??=I.keys();for(let fe of L)D.set(fe,We.kp)}else for(let[fe,Ae]of Y)D.set(fe,Ae)}),D}(I,this._globalTimelineStyles);for(let[Ue,lt]of Ae){const Pt=Ie(lt,fe,L);this._pendingStyles.set(Ue,Pt),this._localTimelineStyles.has(Ue)||this._backFill.set(Ue,this._globalTimelineStyles.get(Ue)??We.kp),this._updateStyle(Ue,Pt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((I,D)=>{this._currentKeyframe.set(D,I)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((I,D)=>{this._currentKeyframe.has(D)||this._currentKeyframe.set(D,I)}))}snapshotCurrentStyles(){for(let[I,D]of this._localTimelineStyles)this._pendingStyles.set(I,D),this._updateStyle(I,D)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const I=[];for(let D in this._currentKeyframe)I.push(D);return I}mergeTimelineCollectedStyles(I){I._styleSummary.forEach((D,L)=>{const Y=this._styleSummary.get(L);(!Y||D.time>Y.time)&&this._updateStyle(L,D.value)})}buildKeyframes(){this.applyStylesToKeyframe();const I=new Set,D=new Set,L=1===this._keyframes.size&&0===this.duration;let Y=[];this._keyframes.forEach((Ue,lt)=>{const Pt=new Map([...this._backFill,...Ue]);Pt.forEach((cn,gn)=>{cn===We.FX?I.add(gn):cn===We.kp&&D.add(gn)}),L||Pt.set("offset",lt/this.duration),Y.push(Pt)});const fe=[...I.values()],Ae=[...D.values()];if(L){const Ue=Y[0],lt=new Map(Ue);Ue.set("offset",0),lt.set("offset",1),Y=[Ue,lt]}return Fo(this.element,Y,fe,Ae,this.duration,this.startTime,this.easing,!1)}}class li extends Fr{constructor(I,D,L,Y,fe,Ae,Ue=!1){super(I,D,Ae.delay),this.keyframes=L,this.preStyleProps=Y,this.postStyleProps=fe,this._stretchStartingKeyframe=Ue,this.timings={duration:Ae.duration,delay:Ae.delay,easing:Ae.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let I=this.keyframes,{delay:D,duration:L,easing:Y}=this.timings;if(this._stretchStartingKeyframe&&D){const fe=[],Ae=L+D,Ue=D/Ae,lt=new Map(I[0]);lt.set("offset",0),fe.push(lt);const Pt=new Map(I[0]);Pt.set("offset",is(Ue)),fe.push(Pt);const cn=I.length-1;for(let gn=1;gn<=cn;gn++){let Ir=new Map(I[gn]);const Kn=Ir.get("offset");Ir.set("offset",is((D+Kn*L)/Ae)),fe.push(Ir)}L=Ae,D=0,Y="",I=fe}return Fo(this.element,I,this.preStyleProps,this.postStyleProps,L,D,Y,!0)}}function is(Z,I=3){const D=Math.pow(10,I-1);return Math.round(Z*D)/D}function mi(Z,I,D,L,Y,fe,Ae,Ue,lt,Pt,cn,gn,Ir){return{type:0,element:Z,triggerName:I,isRemovalTransition:Y,fromState:D,fromStyles:fe,toState:L,toStyles:Ae,timelines:Ue,queriedElements:lt,preStyleProps:Pt,postStyleProps:cn,totalTime:gn,errors:Ir}}const Ds={};class Fs{constructor(I,D,L){this._triggerName=I,this.ast=D,this._stateStyles=L}match(I,D,L,Y){return function eo(Z,I,D,L,Y){return Z.some(fe=>fe(I,D,L,Y))}(this.ast.matchers,I,D,L,Y)}buildStyles(I,D,L){let Y=this._stateStyles.get("*");return void 0!==I&&(Y=this._stateStyles.get(I?.toString())||Y),Y?Y.buildStyles(D,L):new Map}build(I,D,L,Y,fe,Ae,Ue,lt,Pt,cn){const gn=[],Ir=this.ast.options&&this.ast.options.params||Ds,Hn=this.buildStyles(L,Ue&&Ue.params||Ds,gn),Dn=lt&&lt.params||Ds,ei=this.buildStyles(Y,Dn,gn),ci=new Set,yi=new Map,di=new Map,Vi="void"===Y,Ss={params:ki(Dn,Ir),delay:this.ast.options?.delay},Si=cn?[]:ks(I,D,this.ast.animation,fe,Ae,Hn,ei,Ss,Pt,gn);let $i=0;return Si.forEach(Un=>{$i=Math.max(Un.duration+Un.delay,$i)}),gn.length?mi(D,this._triggerName,L,Y,Vi,Hn,ei,[],[],yi,di,$i,gn):(Si.forEach(Un=>{const Xo=Un.element,po=_r(yi,Xo,new Set);Un.preStyleProps.forEach(vs=>po.add(vs));const Ta=_r(di,Xo,new Set);Un.postStyleProps.forEach(vs=>Ta.add(vs)),Xo!==D&&ci.add(Xo)}),mi(D,this._triggerName,L,Y,Vi,Hn,ei,Si,[...ci.values()],yi,di,$i))}}function ki(Z,I){const D={...I};return Object.entries(Z).forEach(([L,Y])=>{null!=Y&&(D[L]=Y)}),D}class ms{constructor(I,D,L){this.styles=I,this.defaultParams=D,this.normalizer=L}buildStyles(I,D){const L=new Map,Y=ki(I,this.defaultParams);return this.styles.styles.forEach(fe=>{"string"!=typeof fe&&fe.forEach((Ae,Ue)=>{Ae&&(Ae=Ie(Ae,Y,D));const lt=this.normalizer.normalizePropertyName(Ue,D);Ae=this.normalizer.normalizeStyleValue(Ue,lt,Ae,D),L.set(Ue,Ae)})}),L}}class Bi{constructor(I,D,L){this.name=I,this.ast=D,this._normalizer=L,this.transitionFactories=[],this.states=new Map,D.states.forEach(Y=>{this.states.set(Y.name,new ms(Y.style,Y.options&&Y.options.params||{},L))}),$s(this.states,"true","1"),$s(this.states,"false","0"),D.transitions.forEach(Y=>{this.transitionFactories.push(new Fs(I,Y,this.states))}),this.fallbackTransition=function os(Z,I,D){return new Fs(Z,{type:We.If.Transition,animation:{type:We.If.Sequence,steps:[],options:null},matchers:[(Ae,Ue)=>!0],options:null,queryCount:0,depCount:0},I)}(I,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(I,D,L,Y){return this.transitionFactories.find(Ae=>Ae.match(I,D,L,Y))||null}matchStyles(I,D,L){return this.fallbackTransition.buildStyles(I,D,L)}}function $s(Z,I,D){Z.has(I)?Z.has(D)||Z.set(D,Z.get(I)):Z.has(D)&&Z.set(I,Z.get(D))}const zi=new gs;class Vo{constructor(I,D,L){this.bodyNode=I,this._driver=D,this._normalizer=L,this._animations=new Map,this._playersById=new Map,this.players=[]}register(I,D){const L=[],fe=wo(this._driver,D,L,[]);if(L.length)throw function Ot(Z){return new B.wOt(3503,!1)}();this._animations.set(I,fe)}_buildPlayer(I,D,L){const Y=I.element,fe=On(this._normalizer,I.keyframes,D,L);return this._driver.animate(Y,fe,I.duration,I.delay,I.easing,[],!0)}create(I,D,L={}){const Y=[],fe=this._animations.get(I);let Ae;const Ue=new Map;if(fe?(Ae=ks(this._driver,D,fe,Xn,Tn,new Map,new Map,L,zi,Y),Ae.forEach(cn=>{const gn=_r(Ue,cn.element,new Map);cn.postStyleProps.forEach(Ir=>gn.set(Ir,null))})):(Y.push(function nt(){return new B.wOt(3300,!1)}()),Ae=[]),Y.length)throw function Mt(Z){return new B.wOt(3504,!1)}();Ue.forEach((cn,gn)=>{cn.forEach((Ir,Kn)=>{cn.set(Kn,this._driver.computeStyle(gn,Kn,We.kp))})});const Pt=xi(Ae.map(cn=>{const gn=Ue.get(cn.element);return this._buildPlayer(cn,new Map,gn)}));return this._playersById.set(I,Pt),Pt.onDestroy(()=>this.destroy(I)),this.players.push(Pt),Pt}destroy(I){const D=this._getPlayer(I);D.destroy(),this._playersById.delete(I);const L=this.players.indexOf(D);L>=0&&this.players.splice(L,1)}_getPlayer(I){const D=this._playersById.get(I);if(!D)throw function er(Z){return new B.wOt(3301,!1)}();return D}listen(I,D,L,Y){const fe=Vn(D,"","","");return Di(this._getPlayer(I),L,fe,Y),()=>{}}command(I,D,L,Y){if("register"==L)return void this.register(I,Y[0]);if("create"==L)return void this.create(I,D,Y[0]||{});const fe=this._getPlayer(I);switch(L){case"play":fe.play();break;case"pause":fe.pause();break;case"reset":fe.reset();break;case"restart":fe.restart();break;case"finish":fe.finish();break;case"init":fe.init();break;case"setPosition":fe.setPosition(parseFloat(Y[0]));break;case"destroy":this.destroy(I)}}}const Xi="ng-animate-queued",co="ng-animate-disabled",Hs=[],oa={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},to={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},qr="__ng_removed";class bs{get params(){return this.options.params}constructor(I,D=""){this.namespaceId=D;const L=I&&I.hasOwnProperty("value");if(this.value=function Va(Z){return Z??null}(L?I.value:I),L){const{value:fe,...Ae}=I;this.options=Ae}else this.options={};this.options.params||(this.options.params={})}absorbOptions(I){const D=I.params;if(D){const L=this.options.params;Object.keys(D).forEach(Y=>{null==L[Y]&&(L[Y]=D[Y])})}}}const ii="void",lo=new bs(ii);class Qo{constructor(I,D,L){this.id=I,this.hostElement=D,this._engine=L,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+I,ds(D,this._hostClassName)}listen(I,D,L,Y){if(!this._triggers.has(D))throw function ir(Z,I){return new B.wOt(3302,!1)}();if(null==L||0==L.length)throw function wn(Z){return new B.wOt(3303,!1)}();if(!function ho(Z){return"start"==Z||"done"==Z}(L))throw function Pn(Z,I){return new B.wOt(3400,!1)}();const fe=_r(this._elementListeners,I,[]),Ae={name:D,phase:L,callback:Y};fe.push(Ae);const Ue=_r(this._engine.statesByElement,I,new Map);return Ue.has(D)||(ds(I,$t),ds(I,$t+"-"+D),Ue.set(D,lo)),()=>{this._engine.afterFlush(()=>{const lt=fe.indexOf(Ae);lt>=0&&fe.splice(lt,1),this._triggers.has(D)||Ue.delete(D)})}}register(I,D){return!this._triggers.has(I)&&(this._triggers.set(I,D),!0)}_getTrigger(I){const D=this._triggers.get(I);if(!D)throw function Vr(Z){return new B.wOt(3401,!1)}();return D}trigger(I,D,L,Y=!0){const fe=this._getTrigger(D),Ae=new vr(this.id,D,I);let Ue=this._engine.statesByElement.get(I);Ue||(ds(I,$t),ds(I,$t+"-"+D),this._engine.statesByElement.set(I,Ue=new Map));let lt=Ue.get(D);const Pt=new bs(L,this.id);if(!(L&&L.hasOwnProperty("value"))&&lt&&Pt.absorbOptions(lt.options),Ue.set(D,Pt),lt||(lt=lo),Pt.value!==ii&&lt.value===Pt.value){if(!function ee(Z,I){const D=Object.keys(Z),L=Object.keys(I);if(D.length!=L.length)return!1;for(let Y=0;Y<D.length;Y++){const fe=D[Y];if(!I.hasOwnProperty(fe)||Z[fe]!==I[fe])return!1}return!0}(lt.params,Pt.params)){const Dn=[],ei=fe.matchStyles(lt.value,lt.params,Dn),ci=fe.matchStyles(Pt.value,Pt.params,Dn);Dn.length?this._engine.reportError(Dn):this._engine.afterFlush(()=>{Je(I,ei),ut(I,ci)})}return}const Ir=_r(this._engine.playersByElement,I,[]);Ir.forEach(Dn=>{Dn.namespaceId==this.id&&Dn.triggerName==D&&Dn.queued&&Dn.destroy()});let Kn=fe.matchTransition(lt.value,Pt.value,I,Pt.params),Hn=!1;if(!Kn){if(!Y)return;Kn=fe.fallbackTransition,Hn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:I,triggerName:D,transition:Kn,fromState:lt,toState:Pt,player:Ae,isFallbackTransition:Hn}),Hn||(ds(I,Xi),Ae.onStart(()=>{ai(I,Xi)})),Ae.onDone(()=>{let Dn=this.players.indexOf(Ae);Dn>=0&&this.players.splice(Dn,1);const ei=this._engine.playersByElement.get(I);if(ei){let ci=ei.indexOf(Ae);ci>=0&&ei.splice(ci,1)}}),this.players.push(Ae),Ir.push(Ae),Ae}deregister(I){this._triggers.delete(I),this._engine.statesByElement.forEach(D=>D.delete(I)),this._elementListeners.forEach((D,L)=>{this._elementListeners.set(L,D.filter(Y=>Y.name!=I))})}clearElementCache(I){this._engine.statesByElement.delete(I),this._elementListeners.delete(I);const D=this._engine.playersByElement.get(I);D&&(D.forEach(L=>L.destroy()),this._engine.playersByElement.delete(I))}_signalRemovalForInnerTriggers(I,D){const L=this._engine.driver.query(I,Me,!0);L.forEach(Y=>{if(Y[qr])return;const fe=this._engine.fetchNamespacesByElement(Y);fe.size?fe.forEach(Ae=>Ae.triggerLeaveAnimation(Y,D,!1,!0)):this.clearElementCache(Y)}),this._engine.afterFlushAnimationsDone(()=>L.forEach(Y=>this.clearElementCache(Y)))}triggerLeaveAnimation(I,D,L,Y){const fe=this._engine.statesByElement.get(I),Ae=new Map;if(fe){const Ue=[];if(fe.forEach((lt,Pt)=>{if(Ae.set(Pt,lt.value),this._triggers.has(Pt)){const cn=this.trigger(I,Pt,ii,Y);cn&&Ue.push(cn)}}),Ue.length)return this._engine.markElementAsRemoved(this.id,I,!0,D,Ae),L&&xi(Ue).onDone(()=>this._engine.processLeaveNode(I)),!0}return!1}prepareLeaveAnimationListeners(I){const D=this._elementListeners.get(I),L=this._engine.statesByElement.get(I);if(D&&L){const Y=new Set;D.forEach(fe=>{const Ae=fe.name;if(Y.has(Ae))return;Y.add(Ae);const lt=this._triggers.get(Ae).fallbackTransition,Pt=L.get(Ae)||lo,cn=new bs(ii),gn=new vr(this.id,Ae,I);this._engine.totalQueuedPlayers++,this._queue.push({element:I,triggerName:Ae,transition:lt,fromState:Pt,toState:cn,player:gn,isFallbackTransition:!0})})}}removeNode(I,D){const L=this._engine;if(I.childElementCount&&this._signalRemovalForInnerTriggers(I,D),this.triggerLeaveAnimation(I,D,!0))return;let Y=!1;if(L.totalAnimations){const fe=L.players.length?L.playersByQueriedElement.get(I):[];if(fe&&fe.length)Y=!0;else{let Ae=I;for(;Ae=Ae.parentNode;)if(L.statesByElement.get(Ae)){Y=!0;break}}}if(this.prepareLeaveAnimationListeners(I),Y)L.markElementAsRemoved(this.id,I,!1,D);else{const fe=I[qr];(!fe||fe===oa)&&(L.afterFlush(()=>this.clearElementCache(I)),L.destroyInnerAnimations(I),L._onRemovalComplete(I,D))}}insertNode(I,D){ds(I,this._hostClassName)}drainQueuedTransitions(I){const D=[];return this._queue.forEach(L=>{const Y=L.player;if(Y.destroyed)return;const fe=L.element,Ae=this._elementListeners.get(fe);Ae&&Ae.forEach(Ue=>{if(Ue.name==L.triggerName){const lt=Vn(fe,L.triggerName,L.fromState.value,L.toState.value);lt._data=I,Di(L.player,Ue.phase,lt,Ue.callback)}}),Y.markedForDestroy?this._engine.afterFlush(()=>{Y.destroy()}):D.push(L)}),this._queue=[],D.sort((L,Y)=>{const fe=L.transition.ast.depCount,Ae=Y.transition.ast.depCount;return 0==fe||0==Ae?fe-Ae:this._engine.driver.containsElement(L.element,Y.element)?1:-1})}destroy(I){this.players.forEach(D=>D.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,I)}}class Ls{_onRemovalComplete(I,D){this.onRemovalComplete(I,D)}constructor(I,D,L,Y){this.bodyNode=I,this.driver=D,this._normalizer=L,this.scheduler=Y,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(fe,Ae)=>{}}get queuedPlayers(){const I=[];return this._namespaceList.forEach(D=>{D.players.forEach(L=>{L.queued&&I.push(L)})}),I}createNamespace(I,D){const L=new Qo(I,D,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,D)?this._balanceNamespaceList(L,D):(this.newHostElements.set(D,L),this.collectEnterElement(D)),this._namespaceLookup[I]=L}_balanceNamespaceList(I,D){const L=this._namespaceList,Y=this.namespacesByHostElement;if(L.length-1>=0){let Ae=!1,Ue=this.driver.getParentElement(D);for(;Ue;){const lt=Y.get(Ue);if(lt){const Pt=L.indexOf(lt);L.splice(Pt+1,0,I),Ae=!0;break}Ue=this.driver.getParentElement(Ue)}Ae||L.unshift(I)}else L.push(I);return Y.set(D,I),I}register(I,D){let L=this._namespaceLookup[I];return L||(L=this.createNamespace(I,D)),L}registerTrigger(I,D,L){let Y=this._namespaceLookup[I];Y&&Y.register(D,L)&&this.totalAnimations++}destroy(I,D){I&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const L=this._fetchNamespace(I);this.namespacesByHostElement.delete(L.hostElement);const Y=this._namespaceList.indexOf(L);Y>=0&&this._namespaceList.splice(Y,1),L.destroy(D),delete this._namespaceLookup[I]}))}_fetchNamespace(I){return this._namespaceLookup[I]}fetchNamespacesByElement(I){const D=new Set,L=this.statesByElement.get(I);if(L)for(let Y of L.values())if(Y.namespaceId){const fe=this._fetchNamespace(Y.namespaceId);fe&&D.add(fe)}return D}trigger(I,D,L,Y){if(Ur(D)){const fe=this._fetchNamespace(I);if(fe)return fe.trigger(D,L,Y),!0}return!1}insertNode(I,D,L,Y){if(!Ur(D))return;const fe=D[qr];if(fe&&fe.setForRemoval){fe.setForRemoval=!1,fe.setForMove=!0;const Ae=this.collectedLeaveElements.indexOf(D);Ae>=0&&this.collectedLeaveElements.splice(Ae,1)}if(I){const Ae=this._fetchNamespace(I);Ae&&Ae.insertNode(D,L)}Y&&this.collectEnterElement(D)}collectEnterElement(I){this.collectedEnterElements.push(I)}markElementAsDisabled(I,D){D?this.disabledNodes.has(I)||(this.disabledNodes.add(I),ds(I,co)):this.disabledNodes.has(I)&&(this.disabledNodes.delete(I),ai(I,co))}removeNode(I,D,L){if(Ur(D)){this.scheduler?.notify();const Y=I?this._fetchNamespace(I):null;Y?Y.removeNode(D,L):this.markElementAsRemoved(I,D,!1,L);const fe=this.namespacesByHostElement.get(D);fe&&fe.id!==I&&fe.removeNode(D,L)}else this._onRemovalComplete(D,L)}markElementAsRemoved(I,D,L,Y,fe){this.collectedLeaveElements.push(D),D[qr]={namespaceId:I,setForRemoval:Y,hasAnimation:L,removedBeforeQueried:!1,previousTriggersValues:fe}}listen(I,D,L,Y,fe){return Ur(D)?this._fetchNamespace(I).listen(D,L,Y,fe):()=>{}}_buildInstruction(I,D,L,Y,fe){return I.transition.build(this.driver,I.element,I.fromState.value,I.toState.value,L,Y,I.fromState.options,I.toState.options,D,fe)}destroyInnerAnimations(I){let D=this.driver.query(I,Me,!0);D.forEach(L=>this.destroyActiveAnimationsForElement(L)),0!=this.playersByQueriedElement.size&&(D=this.driver.query(I,Jr,!0),D.forEach(L=>this.finishActiveQueriedAnimationOnElement(L)))}destroyActiveAnimationsForElement(I){const D=this.playersByElement.get(I);D&&D.forEach(L=>{L.queued?L.markedForDestroy=!0:L.destroy()})}finishActiveQueriedAnimationOnElement(I){const D=this.playersByQueriedElement.get(I);D&&D.forEach(L=>L.finish())}whenRenderingDone(){return new Promise(I=>{if(this.players.length)return xi(this.players).onDone(()=>I());I()})}processLeaveNode(I){const D=I[qr];if(D&&D.setForRemoval){if(I[qr]=oa,D.namespaceId){this.destroyInnerAnimations(I);const L=this._fetchNamespace(D.namespaceId);L&&L.clearElementCache(I)}this._onRemovalComplete(I,D.setForRemoval)}I.classList?.contains(co)&&this.markElementAsDisabled(I,!1),this.driver.query(I,".ng-animate-disabled",!0).forEach(L=>{this.markElementAsDisabled(L,!1)})}flush(I=-1){let D=[];if(this.newHostElements.size&&(this.newHostElements.forEach((L,Y)=>this._balanceNamespaceList(L,Y)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let L=0;L<this.collectedEnterElements.length;L++)ds(this.collectedEnterElements[L],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const L=[];try{D=this._flushAnimations(L,I)}finally{for(let Y=0;Y<L.length;Y++)L[Y]()}}else for(let L=0;L<this.collectedLeaveElements.length;L++)this.processLeaveNode(this.collectedLeaveElements[L]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(L=>L()),this._flushFns=[],this._whenQuietFns.length){const L=this._whenQuietFns;this._whenQuietFns=[],D.length?xi(D).onDone(()=>{L.forEach(Y=>Y())}):L.forEach(Y=>Y())}}reportError(I){throw function zr(Z){return new B.wOt(3402,!1)}()}_flushAnimations(I,D){const L=new gs,Y=[],fe=new Map,Ae=[],Ue=new Map,lt=new Map,Pt=new Map,cn=new Set;this.disabledNodes.forEach(In=>{cn.add(In);const Mn=this.driver.query(In,".ng-animate-queued",!0);for(let Rn=0;Rn<Mn.length;Rn++)cn.add(Mn[Rn])});const gn=this.bodyNode,Ir=Array.from(this.statesByElement.keys()),Kn=_s(Ir,this.collectedEnterElements),Hn=new Map;let Dn=0;Kn.forEach((In,Mn)=>{const Rn=Xn+Dn++;Hn.set(Mn,Rn),In.forEach(hr=>ds(hr,Rn))});const ei=[],ci=new Set,yi=new Set;for(let In=0;In<this.collectedLeaveElements.length;In++){const Mn=this.collectedLeaveElements[In],Rn=Mn[qr];Rn&&Rn.setForRemoval&&(ei.push(Mn),ci.add(Mn),Rn.hasAnimation?this.driver.query(Mn,".ng-star-inserted",!0).forEach(hr=>ci.add(hr)):yi.add(Mn))}const di=new Map,Vi=_s(Ir,Array.from(ci));Vi.forEach((In,Mn)=>{const Rn=Tn+Dn++;di.set(Mn,Rn),In.forEach(hr=>ds(hr,Rn))}),I.push(()=>{Kn.forEach((In,Mn)=>{const Rn=Hn.get(Mn);In.forEach(hr=>ai(hr,Rn))}),Vi.forEach((In,Mn)=>{const Rn=di.get(Mn);In.forEach(hr=>ai(hr,Rn))}),ei.forEach(In=>{this.processLeaveNode(In)})});const Ss=[],Si=[];for(let In=this._namespaceList.length-1;In>=0;In--)this._namespaceList[In].drainQueuedTransitions(D).forEach(Rn=>{const hr=Rn.player,T=Rn.element;if(Ss.push(hr),this.collectedEnterElements.length){const rn=T[qr];if(rn&&rn.setForMove){if(rn.previousTriggersValues&&rn.previousTriggersValues.has(Rn.triggerName)){const Pr=rn.previousTriggersValues.get(Rn.triggerName),Sn=this.statesByElement.get(Rn.element);if(Sn&&Sn.has(Rn.triggerName)){const xr=Sn.get(Rn.triggerName);xr.value=Pr,Sn.set(Rn.triggerName,xr)}}return void hr.destroy()}}const Q=!gn||!this.driver.containsElement(gn,T),F=di.get(T),$=Hn.get(T),Ee=this._buildInstruction(Rn,L,$,F,Q);if(Ee.errors&&Ee.errors.length)return void Si.push(Ee);if(Q)return hr.onStart(()=>Je(T,Ee.fromStyles)),hr.onDestroy(()=>ut(T,Ee.toStyles)),void Y.push(hr);if(Rn.isFallbackTransition)return hr.onStart(()=>Je(T,Ee.fromStyles)),hr.onDestroy(()=>ut(T,Ee.toStyles)),void Y.push(hr);const Ct=[];Ee.timelines.forEach(rn=>{rn.stretchStartingKeyframe=!0,this.disabledNodes.has(rn.element)||Ct.push(rn)}),Ee.timelines=Ct,L.append(T,Ee.timelines),Ae.push({instruction:Ee,player:hr,element:T}),Ee.queriedElements.forEach(rn=>_r(Ue,rn,[]).push(hr)),Ee.preStyleProps.forEach((rn,Pr)=>{if(rn.size){let Sn=lt.get(Pr);Sn||lt.set(Pr,Sn=new Set),rn.forEach((xr,fr)=>Sn.add(fr))}}),Ee.postStyleProps.forEach((rn,Pr)=>{let Sn=Pt.get(Pr);Sn||Pt.set(Pr,Sn=new Set),rn.forEach((xr,fr)=>Sn.add(fr))})});if(Si.length){const In=[];Si.forEach(Mn=>{In.push(function Gi(Z,I){return new B.wOt(3505,!1)}())}),Ss.forEach(Mn=>Mn.destroy()),this.reportError(In)}const $i=new Map,Un=new Map;Ae.forEach(In=>{const Mn=In.element;L.has(Mn)&&(Un.set(Mn,Mn),this._beforeAnimationBuild(In.player.namespaceId,In.instruction,$i))}),Y.forEach(In=>{const Mn=In.element;this._getPreviousPlayers(Mn,!1,In.namespaceId,In.triggerName,null).forEach(hr=>{_r($i,Mn,[]).push(hr),hr.destroy()})});const Xo=ei.filter(In=>Se(In,lt,Pt)),po=new Map;ls(po,this.driver,yi,Pt,We.kp).forEach(In=>{Se(In,lt,Pt)&&Xo.push(In)});const vs=new Map;Kn.forEach((In,Mn)=>{ls(vs,this.driver,new Set(In),lt,We.FX)}),Xo.forEach(In=>{const Mn=po.get(In),Rn=vs.get(In);po.set(In,new Map([...Mn?.entries()??[],...Rn?.entries()??[]]))});const Da=[],Aa=[],tc={};Ae.forEach(In=>{const{element:Mn,player:Rn,instruction:hr}=In;if(L.has(Mn)){if(cn.has(Mn))return Rn.onDestroy(()=>ut(Mn,hr.toStyles)),Rn.disabled=!0,Rn.overrideTotalTime(hr.totalTime),void Y.push(Rn);let T=tc;if(Un.size>1){let F=Mn;const $=[];for(;F=F.parentNode;){const Ee=Un.get(F);if(Ee){T=Ee;break}$.push(F)}$.forEach(Ee=>Un.set(Ee,T))}const Q=this._buildAnimation(Rn.namespaceId,hr,$i,fe,vs,po);if(Rn.setRealPlayer(Q),T===tc)Da.push(Rn);else{const F=this.playersByElement.get(T);F&&F.length&&(Rn.parentPlayer=xi(F)),Y.push(Rn)}}else Je(Mn,hr.fromStyles),Rn.onDestroy(()=>ut(Mn,hr.toStyles)),Aa.push(Rn),cn.has(Mn)&&Y.push(Rn)}),Aa.forEach(In=>{const Mn=fe.get(In.element);if(Mn&&Mn.length){const Rn=xi(Mn);In.setRealPlayer(Rn)}}),Y.forEach(In=>{In.parentPlayer?In.syncPlayerEvents(In.parentPlayer):In.destroy()});for(let In=0;In<ei.length;In++){const Mn=ei[In],Rn=Mn[qr];if(ai(Mn,Tn),Rn&&Rn.hasAnimation)continue;let hr=[];if(Ue.size){let Q=Ue.get(Mn);Q&&Q.length&&hr.push(...Q);let F=this.driver.query(Mn,Jr,!0);for(let $=0;$<F.length;$++){let Ee=Ue.get(F[$]);Ee&&Ee.length&&hr.push(...Ee)}}const T=hr.filter(Q=>!Q.destroyed);T.length?G(this,Mn,T):this.processLeaveNode(Mn)}return ei.length=0,Da.forEach(In=>{this.players.push(In),In.onDone(()=>{In.destroy();const Mn=this.players.indexOf(In);this.players.splice(Mn,1)}),In.play()}),Da}afterFlush(I){this._flushFns.push(I)}afterFlushAnimationsDone(I){this._whenQuietFns.push(I)}_getPreviousPlayers(I,D,L,Y,fe){let Ae=[];if(D){const Ue=this.playersByQueriedElement.get(I);Ue&&(Ae=Ue)}else{const Ue=this.playersByElement.get(I);if(Ue){const lt=!fe||fe==ii;Ue.forEach(Pt=>{Pt.queued||!lt&&Pt.triggerName!=Y||Ae.push(Pt)})}}return(L||Y)&&(Ae=Ae.filter(Ue=>!(L&&L!=Ue.namespaceId||Y&&Y!=Ue.triggerName))),Ae}_beforeAnimationBuild(I,D,L){const fe=D.element,Ae=D.isRemovalTransition?void 0:I,Ue=D.isRemovalTransition?void 0:D.triggerName;for(const lt of D.timelines){const Pt=lt.element,cn=Pt!==fe,gn=_r(L,Pt,[]);this._getPreviousPlayers(Pt,cn,Ae,Ue,D.toState).forEach(Kn=>{const Hn=Kn.getRealPlayer();Hn.beforeDestroy&&Hn.beforeDestroy(),Kn.destroy(),gn.push(Kn)})}Je(fe,D.fromStyles)}_buildAnimation(I,D,L,Y,fe,Ae){const Ue=D.triggerName,lt=D.element,Pt=[],cn=new Set,gn=new Set,Ir=D.timelines.map(Hn=>{const Dn=Hn.element;cn.add(Dn);const ei=Dn[qr];if(ei&&ei.removedBeforeQueried)return new We.sf(Hn.duration,Hn.delay);const ci=Dn!==lt,yi=function K(Z){const I=[];return O(Z,I),I}((L.get(Dn)||Hs).map($i=>$i.getRealPlayer())).filter($i=>!!$i.element&&$i.element===Dn),di=fe.get(Dn),Vi=Ae.get(Dn),Ss=On(this._normalizer,Hn.keyframes,di,Vi),Si=this._buildPlayer(Hn,Ss,yi);if(Hn.subTimeline&&Y&&gn.add(Dn),ci){const $i=new vr(I,Ue,Dn);$i.setRealPlayer(Si),Pt.push($i)}return Si});Pt.forEach(Hn=>{_r(this.playersByQueriedElement,Hn.element,[]).push(Hn),Hn.onDone(()=>function Lo(Z,I,D){let L=Z.get(I);if(L){if(L.length){const Y=L.indexOf(D);L.splice(Y,1)}0==L.length&&Z.delete(I)}return L}(this.playersByQueriedElement,Hn.element,Hn))}),cn.forEach(Hn=>ds(Hn,Lr));const Kn=xi(Ir);return Kn.onDestroy(()=>{cn.forEach(Hn=>ai(Hn,Lr)),ut(lt,D.toStyles)}),gn.forEach(Hn=>{_r(Y,Hn,[]).push(Kn)}),Kn}_buildPlayer(I,D,L){return D.length>0?this.driver.animate(I.element,D,I.duration,I.delay,I.easing,L):new We.sf(I.duration,I.delay)}}class vr{constructor(I,D,L){this.namespaceId=I,this.triggerName=D,this.element=L,this._player=new We.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(I){this._containsRealPlayer||(this._player=I,this._queuedCallbacks.forEach((D,L)=>{D.forEach(Y=>Di(I,L,void 0,Y))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(I.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(I){this.totalTime=I}syncPlayerEvents(I){const D=this._player;D.triggerCallback&&I.onStart(()=>D.triggerCallback("start")),I.onDone(()=>this.finish()),I.onDestroy(()=>this.destroy())}_queueEvent(I,D){_r(this._queuedCallbacks,I,[]).push(D)}onDone(I){this.queued&&this._queueEvent("done",I),this._player.onDone(I)}onStart(I){this.queued&&this._queueEvent("start",I),this._player.onStart(I)}onDestroy(I){this.queued&&this._queueEvent("destroy",I),this._player.onDestroy(I)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(I){this.queued||this._player.setPosition(I)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(I){const D=this._player;D.triggerCallback&&D.triggerCallback(I)}}function Ur(Z){return Z&&1===Z.nodeType}function lr(Z,I){const D=Z.style.display;return Z.style.display=I??"none",D}function ls(Z,I,D,L,Y){const fe=[];D.forEach(lt=>fe.push(lr(lt)));const Ae=[];L.forEach((lt,Pt)=>{const cn=new Map;lt.forEach(gn=>{const Ir=I.computeStyle(Pt,gn,Y);cn.set(gn,Ir),(!Ir||0==Ir.length)&&(Pt[qr]=to,Ae.push(Pt))}),Z.set(Pt,cn)});let Ue=0;return D.forEach(lt=>lr(lt,fe[Ue++])),Ae}function _s(Z,I){const D=new Map;if(Z.forEach(Ue=>D.set(Ue,[])),0==I.length)return D;const Y=new Set(I),fe=new Map;function Ae(Ue){if(!Ue)return 1;let lt=fe.get(Ue);if(lt)return lt;const Pt=Ue.parentNode;return lt=D.has(Pt)?Pt:Y.has(Pt)?1:Ae(Pt),fe.set(Ue,lt),lt}return I.forEach(Ue=>{const lt=Ae(Ue);1!==lt&&D.get(lt).push(Ue)}),D}function ds(Z,I){Z.classList?.add(I)}function ai(Z,I){Z.classList?.remove(I)}function G(Z,I,D){xi(D).onDone(()=>Z.processLeaveNode(I))}function O(Z,I){for(let D=0;D<Z.length;D++){const L=Z[D];L instanceof We.ui?O(L.players,I):I.push(L)}}function Se(Z,I,D){const L=D.get(Z);if(!L)return!1;let Y=I.get(Z);return Y?L.forEach(fe=>Y.add(fe)):I.set(Z,L),D.delete(Z),!0}class sn{constructor(I,D,L,Y){this._driver=D,this._normalizer=L,this._triggerCache={},this.onRemovalComplete=(fe,Ae)=>{},this._transitionEngine=new Ls(I.body,D,L,Y),this._timelineEngine=new Vo(I.body,D,L),this._transitionEngine.onRemovalComplete=(fe,Ae)=>this.onRemovalComplete(fe,Ae)}registerTrigger(I,D,L,Y,fe){const Ae=I+"-"+Y;let Ue=this._triggerCache[Ae];if(!Ue){const lt=[],cn=wo(this._driver,fe,lt,[]);if(lt.length)throw function mt(Z,I){return new B.wOt(3404,!1)}();Ue=function ss(Z,I,D){return new Bi(Z,I,D)}(Y,cn,this._normalizer),this._triggerCache[Ae]=Ue}this._transitionEngine.registerTrigger(D,Y,Ue)}register(I,D){this._transitionEngine.register(I,D)}destroy(I,D){this._transitionEngine.destroy(I,D)}onInsert(I,D,L,Y){this._transitionEngine.insertNode(I,D,L,Y)}onRemove(I,D,L){this._transitionEngine.removeNode(I,D,L)}disableAnimations(I,D){this._transitionEngine.markElementAsDisabled(I,D)}process(I,D,L,Y){if("@"==L.charAt(0)){const[fe,Ae]=qt(L);this._timelineEngine.command(fe,D,Ae,Y)}else this._transitionEngine.trigger(I,D,L,Y)}listen(I,D,L,Y,fe){if("@"==L.charAt(0)){const[Ae,Ue]=qt(L);return this._timelineEngine.listen(Ae,D,Ue,fe)}return this._transitionEngine.listen(I,D,L,Y,fe)}flush(I=-1){this._transitionEngine.flush(I)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(I){this._transitionEngine.afterFlushAnimationsDone(I)}}class as{static#e=this.initialStylesByElement=new WeakMap;constructor(I,D,L){this._element=I,this._startStyles=D,this._endStyles=L,this._state=0;let Y=as.initialStylesByElement.get(I);Y||as.initialStylesByElement.set(I,Y=new Map),this._initialStyles=Y}start(){this._state<1&&(this._startStyles&&ut(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ut(this._element,this._initialStyles),this._endStyles&&(ut(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(as.initialStylesByElement.delete(this._element),this._startStyles&&(Je(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Je(this._element,this._endStyles),this._endStyles=null),ut(this._element,this._initialStyles),this._state=3)}}function Us(Z){let I=null;return Z.forEach((D,L)=>{(function bi(Z){return"display"===Z||"position"===Z})(L)&&(I=I||new Map,I.set(L,D))}),I}class no{constructor(I,D,L,Y){this.element=I,this.keyframes=D,this.options=L,this._specialStyles=Y,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=L.duration,this._delay=L.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(I=>I()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const I=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,I,this.options),this._finalKeyframe=I.length?I[I.length-1]:new Map;const D=()=>this._onFinish();this.domPlayer.addEventListener("finish",D),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",D)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(I){const D=[];return I.forEach(L=>{D.push(Object.fromEntries(L))}),D}_triggerWebAnimation(I,D,L){return I.animate(this._convertKeyframesToObject(D),L)}onStart(I){this._originalOnStartFns.push(I),this._onStartFns.push(I)}onDone(I){this._originalOnDoneFns.push(I),this._onDoneFns.push(I)}onDestroy(I){this._onDestroyFns.push(I)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(I=>I()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(I=>I()),this._onDestroyFns=[])}setPosition(I){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=I*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const I=new Map;this.hasStarted()&&this._finalKeyframe.forEach((L,Y)=>{"offset"!==Y&&I.set(Y,this._finished?L:br(this.element,Y))}),this.currentSnapshot=I}triggerCallback(I){const D="start"===I?this._onStartFns:this._onDoneFns;D.forEach(L=>L()),D.length=0}}class aa{validateStyleProperty(I){return!0}validateAnimatableStyleProperty(I){return!0}matchesElement(I,D){return!1}containsElement(I,D){return Nt(I,D)}getParentElement(I){return Kr(I)}query(I,D,L){return ge(I,D,L)}computeStyle(I,D,L){return br(I,D)}animate(I,D,L,Y,fe,Ae=[]){const lt={duration:L,delay:Y,fill:0==Y?"both":"forwards"};fe&&(lt.easing=fe);const Pt=new Map,cn=Ae.filter(Kn=>Kn instanceof no);(function Ut(Z,I){return 0===Z||0===I})(L,Y)&&cn.forEach(Kn=>{Kn.currentSnapshot.forEach((Hn,Dn)=>Pt.set(Dn,Hn))});let gn=function us(Z){return Z.length?Z[0]instanceof Map?Z:Z.map(I=>new Map(Object.entries(I))):[]}(D).map(Kn=>new Map(Kn));gn=function $n(Z,I,D){if(D.size&&I.length){let L=I[0],Y=[];if(D.forEach((fe,Ae)=>{L.has(Ae)||Y.push(Ae),L.set(Ae,fe)}),Y.length)for(let fe=1;fe<I.length;fe++){let Ae=I[fe];Y.forEach(Ue=>Ae.set(Ue,br(Z,Ue)))}}return I}(I,gn,Pt);const Ir=function tr(Z,I){let D=null,L=null;return Array.isArray(I)&&I.length?(D=Us(I[0]),I.length>1&&(L=Us(I[I.length-1]))):I instanceof Map&&(D=Us(I)),D||L?new as(Z,D,L):null}(I,gn);return new no(I,gn,lt,Ir)}}const Ea="@.disabled";class ca{constructor(I,D,L,Y){this.namespaceId=I,this.delegate=D,this.engine=L,this._onDestroy=Y,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(I){this.delegate.destroyNode?.(I)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(I,D){return this.delegate.createElement(I,D)}createComment(I){return this.delegate.createComment(I)}createText(I){return this.delegate.createText(I)}appendChild(I,D){this.delegate.appendChild(I,D),this.engine.onInsert(this.namespaceId,D,I,!1)}insertBefore(I,D,L,Y=!0){this.delegate.insertBefore(I,D,L),this.engine.onInsert(this.namespaceId,D,I,Y)}removeChild(I,D,L){this.engine.onRemove(this.namespaceId,D,this.delegate)}selectRootElement(I,D){return this.delegate.selectRootElement(I,D)}parentNode(I){return this.delegate.parentNode(I)}nextSibling(I){return this.delegate.nextSibling(I)}setAttribute(I,D,L,Y){this.delegate.setAttribute(I,D,L,Y)}removeAttribute(I,D,L){this.delegate.removeAttribute(I,D,L)}addClass(I,D){this.delegate.addClass(I,D)}removeClass(I,D){this.delegate.removeClass(I,D)}setStyle(I,D,L,Y){this.delegate.setStyle(I,D,L,Y)}removeStyle(I,D,L){this.delegate.removeStyle(I,D,L)}setProperty(I,D,L){"@"==D.charAt(0)&&D==Ea?this.disableAnimations(I,!!L):this.delegate.setProperty(I,D,L)}setValue(I,D){this.delegate.setValue(I,D)}listen(I,D,L){return this.delegate.listen(I,D,L)}disableAnimations(I,D){this.engine.disableAnimations(I,D)}}class Ia extends ca{constructor(I,D,L,Y,fe){super(D,L,Y,fe),this.factory=I,this.namespaceId=D}setProperty(I,D,L){"@"==D.charAt(0)?"."==D.charAt(1)&&D==Ea?this.disableAnimations(I,L=void 0===L||!!L):this.engine.process(this.namespaceId,I,D.slice(1),L):this.delegate.setProperty(I,D,L)}listen(I,D,L){if("@"==D.charAt(0)){const Y=function Ca(Z){switch(Z){case"body":return document.body;case"document":return document;case"window":return window;default:return Z}}(I);let fe=D.slice(1),Ae="";return"@"!=fe.charAt(0)&&([fe,Ae]=function Uo(Z){const I=Z.indexOf(".");return[Z.substring(0,I),Z.slice(I+1)]}(fe)),this.engine.listen(this.namespaceId,Y,fe,Ae,Ue=>{this.factory.scheduleListenerCallback(Ue._data||-1,L,Ue)})}return this.delegate.listen(I,D,L)}}class ec{constructor(I,D,L){this.delegate=I,this.engine=D,this._zone=L,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,D.onRemovalComplete=(Y,fe)=>{const Ae=fe?.parentNode(Y);Ae&&fe.removeChild(Ae,Y)}}createRenderer(I,D){const Y=this.delegate.createRenderer(I,D);if(!I||!D?.data?.animation){const Pt=this._rendererCache;let cn=Pt.get(Y);return cn||(cn=new ca("",Y,this.engine,()=>Pt.delete(Y)),Pt.set(Y,cn)),cn}const fe=D.id,Ae=D.id+"-"+this._currentId;this._currentId++,this.engine.register(Ae,I);const Ue=Pt=>{Array.isArray(Pt)?Pt.forEach(Ue):this.engine.registerTrigger(fe,Ae,I,Pt.name,Pt)};return D.data.animation.forEach(Ue),new Ia(this,Ae,Y,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(I,D,L){if(I>=0&&I<this._microtaskId)return void this._zone.run(()=>D(L));const Y=this._animationCallbacksBuffer;0==Y.length&&queueMicrotask(()=>{this._zone.run(()=>{Y.forEach(fe=>{const[Ae,Ue]=fe;Ae(Ue)}),this._animationCallbacksBuffer=[]})}),Y.push([D,L])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const ua=[{provide:me,useFactory:function Bo(){return new yr}},{provide:sn,useClass:(()=>{class Z extends sn{constructor(D,L,Y){super(D,L,Y,(0,B.WQX)(B.An2,{optional:!0}))}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(L){return new(L||Z)(B.KVO(w.qQ),B.KVO(ie),B.KVO(me))};static#t=this.\u0275prov=B.jDH({token:Z,factory:Z.\u0275fac})}return Z})()},{provide:B._9s,useFactory:function To(Z,I,D){return new ec(Z,I,D)},deps:[_.B7,sn,B.SKi]}],Do=[{provide:ie,useFactory:()=>new aa},{provide:B.bc$,useValue:"BrowserAnimations"},...ua],fo=[{provide:ie,useClass:J},{provide:B.bc$,useValue:"NoopAnimations"},...ua];let dr=(()=>{class Z{static withConfig(D){return{ngModule:Z,providers:D.disableAnimations?fo:Do}}static#e=this.\u0275fac=function(L){return new(L||Z)};static#t=this.\u0275mod=B.$C({type:Z});static#n=this.\u0275inj=B.G2t({providers:Do,imports:[_.Bb]})}return Z})();var ji=x(8964);let la=(()=>{class Z{static#e=this.\u0275fac=function(L){return new(L||Z)};static#t=this.\u0275mod=B.$C({type:Z,bootstrap:[ae]});static#n=this.\u0275inj=B.G2t({imports:[w.MD,_.Bb,de,Ve.LoginAndRegistrationModule,Ye.ProductPageModule,et.ProfileModuleModule,ce.SingleProductPageModule,dr,Ne.K,ji.x]})}return Z})();_.sG().bootstrapModule(la).catch(Z=>console.error(Z))},4412:(Zt,qe,x)=>{x.d(qe,{t:()=>V});var _=x(1413);class V extends _.B{constructor(w){super(),this._value=w}get value(){return this.getValue()}_subscribe(w){const se=super._subscribe(w);return!se.closed&&w.next(this._value),se}getValue(){const{hasError:w,thrownError:se,_value:Pe}=this;if(w)throw se;return this._throwIfClosed(),Pe}next(w){super.next(this._value=w)}}},1985:(Zt,qe,x)=>{x.d(qe,{c:()=>Le});var _=x(7707),V=x(8359),M=x(3494),w=x(1203),se=x(1026),Pe=x(8071),B=x(9786);let Le=(()=>{class He{constructor(De){De&&(this._subscribe=De)}lift(De){const Be=new He;return Be.source=this,Be.operator=De,Be}subscribe(De,Be,At){const yt=function _e(He){return He&&He instanceof _.vU||function ve(He){return He&&(0,Pe.T)(He.next)&&(0,Pe.T)(He.error)&&(0,Pe.T)(He.complete)}(He)&&(0,V.Uv)(He)}(De)?De:new _.Ms(De,Be,At);return(0,B.Y)(()=>{const{operator:st,source:bt}=this;yt.add(st?st.call(yt,bt):bt?this._subscribe(yt):this._trySubscribe(yt))}),yt}_trySubscribe(De){try{return this._subscribe(De)}catch(Be){De.error(Be)}}forEach(De,Be){return new(Be=$e(Be))((At,yt)=>{const st=new _.Ms({next:bt=>{try{De(bt)}catch(gt){yt(gt),st.unsubscribe()}},error:yt,complete:At});this.subscribe(st)})}_subscribe(De){var Be;return null===(Be=this.source)||void 0===Be?void 0:Be.subscribe(De)}[M.s](){return this}pipe(...De){return(0,w.m)(De)(this)}toPromise(De){return new(De=$e(De))((Be,At)=>{let yt;this.subscribe(st=>yt=st,st=>At(st),()=>Be(yt))})}}return He.create=Tt=>new He(Tt),He})();function $e(He){var Tt;return null!==(Tt=He??se.$.Promise)&&void 0!==Tt?Tt:Promise}},1413:(Zt,qe,x)=>{x.d(qe,{B:()=>B});var _=x(1985),V=x(8359);const w=(0,x(1853).L)($e=>function(){$e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=x(7908),Pe=x(9786);let B=(()=>{class $e extends _.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(_e){const He=new Le(this,this);return He.operator=_e,He}_throwIfClosed(){if(this.closed)throw new w}next(_e){(0,Pe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const He of this.currentObservers)He.next(_e)}})}error(_e){(0,Pe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=_e;const{observers:He}=this;for(;He.length;)He.shift().error(_e)}})}complete(){(0,Pe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:_e}=this;for(;_e.length;)_e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var _e;return(null===(_e=this.observers)||void 0===_e?void 0:_e.length)>0}_trySubscribe(_e){return this._throwIfClosed(),super._trySubscribe(_e)}_subscribe(_e){return this._throwIfClosed(),this._checkFinalizedStatuses(_e),this._innerSubscribe(_e)}_innerSubscribe(_e){const{hasError:He,isStopped:Tt,observers:De}=this;return He||Tt?V.Kn:(this.currentObservers=null,De.push(_e),new V.yU(()=>{this.currentObservers=null,(0,se.o)(De,_e)}))}_checkFinalizedStatuses(_e){const{hasError:He,thrownError:Tt,isStopped:De}=this;He?_e.error(Tt):De&&_e.complete()}asObservable(){const _e=new _.c;return _e.source=this,_e}}return $e.create=(ve,_e)=>new Le(ve,_e),$e})();class Le extends B{constructor(ve,_e){super(),this.destination=ve,this.source=_e}next(ve){var _e,He;null===(He=null===(_e=this.destination)||void 0===_e?void 0:_e.next)||void 0===He||He.call(_e,ve)}error(ve){var _e,He;null===(He=null===(_e=this.destination)||void 0===_e?void 0:_e.error)||void 0===He||He.call(_e,ve)}complete(){var ve,_e;null===(_e=null===(ve=this.destination)||void 0===ve?void 0:ve.complete)||void 0===_e||_e.call(ve)}_subscribe(ve){var _e,He;return null!==(He=null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(ve))&&void 0!==He?He:V.Kn}}},7707:(Zt,qe,x)=>{x.d(qe,{Ms:()=>At,vU:()=>He});var _=x(8071),V=x(8359),M=x(1026),w=x(5334),se=x(5343);const Pe=$e("C",void 0,void 0);function $e(ue,de,ae){return{kind:ue,value:de,error:ae}}var ve=x(9270),_e=x(9786);class He extends V.yU{constructor(de){super(),this.isStopped=!1,de?(this.destination=de,(0,V.Uv)(de)&&de.add(this)):this.destination=gt}static create(de,ae,Ve){return new At(de,ae,Ve)}next(de){this.isStopped?bt(function Le(ue){return $e("N",ue,void 0)}(de),this):this._next(de)}error(de){this.isStopped?bt(function B(ue){return $e("E",void 0,ue)}(de),this):(this.isStopped=!0,this._error(de))}complete(){this.isStopped?bt(Pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(de){this.destination.next(de)}_error(de){try{this.destination.error(de)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Tt=Function.prototype.bind;function De(ue,de){return Tt.call(ue,de)}class Be{constructor(de){this.partialObserver=de}next(de){const{partialObserver:ae}=this;if(ae.next)try{ae.next(de)}catch(Ve){yt(Ve)}}error(de){const{partialObserver:ae}=this;if(ae.error)try{ae.error(de)}catch(Ve){yt(Ve)}else yt(de)}complete(){const{partialObserver:de}=this;if(de.complete)try{de.complete()}catch(ae){yt(ae)}}}class At extends He{constructor(de,ae,Ve){let Ye;if(super(),(0,_.T)(de)||!de)Ye={next:de??void 0,error:ae??void 0,complete:Ve??void 0};else{let et;this&&M.$.useDeprecatedNextContext?(et=Object.create(de),et.unsubscribe=()=>this.unsubscribe(),Ye={next:de.next&&De(de.next,et),error:de.error&&De(de.error,et),complete:de.complete&&De(de.complete,et)}):Ye=de}this.destination=new Be(Ye)}}function yt(ue){M.$.useDeprecatedSynchronousErrorHandling?(0,_e.l)(ue):(0,w.m)(ue)}function bt(ue,de){const{onStoppedNotification:ae}=M.$;ae&&ve.f.setTimeout(()=>ae(ue,de))}const gt={closed:!0,next:se.l,error:function st(ue){throw ue},complete:se.l}},8359:(Zt,qe,x)=>{x.d(qe,{Kn:()=>Pe,yU:()=>se,Uv:()=>B});var _=x(8071);const M=(0,x(1853).L)($e=>function(_e){$e(this),this.message=_e?`${_e.length} errors occurred during unsubscription:\n${_e.map((He,Tt)=>`${Tt+1}) ${He.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=_e});var w=x(7908);class se{constructor(ve){this.initialTeardown=ve,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ve;if(!this.closed){this.closed=!0;const{_parentage:_e}=this;if(_e)if(this._parentage=null,Array.isArray(_e))for(const De of _e)De.remove(this);else _e.remove(this);const{initialTeardown:He}=this;if((0,_.T)(He))try{He()}catch(De){ve=De instanceof M?De.errors:[De]}const{_finalizers:Tt}=this;if(Tt){this._finalizers=null;for(const De of Tt)try{Le(De)}catch(Be){ve=ve??[],Be instanceof M?ve=[...ve,...Be.errors]:ve.push(Be)}}if(ve)throw new M(ve)}}add(ve){var _e;if(ve&&ve!==this)if(this.closed)Le(ve);else{if(ve instanceof se){if(ve.closed||ve._hasParent(this))return;ve._addParent(this)}(this._finalizers=null!==(_e=this._finalizers)&&void 0!==_e?_e:[]).push(ve)}}_hasParent(ve){const{_parentage:_e}=this;return _e===ve||Array.isArray(_e)&&_e.includes(ve)}_addParent(ve){const{_parentage:_e}=this;this._parentage=Array.isArray(_e)?(_e.push(ve),_e):_e?[_e,ve]:ve}_removeParent(ve){const{_parentage:_e}=this;_e===ve?this._parentage=null:Array.isArray(_e)&&(0,w.o)(_e,ve)}remove(ve){const{_finalizers:_e}=this;_e&&(0,w.o)(_e,ve),ve instanceof se&&ve._removeParent(this)}}se.EMPTY=(()=>{const $e=new se;return $e.closed=!0,$e})();const Pe=se.EMPTY;function B($e){return $e instanceof se||$e&&"closed"in $e&&(0,_.T)($e.remove)&&(0,_.T)($e.add)&&(0,_.T)($e.unsubscribe)}function Le($e){(0,_.T)($e)?$e():$e.unsubscribe()}},1026:(Zt,qe,x)=>{x.d(qe,{$:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(Zt,qe,x)=>{x.d(qe,{x:()=>se});var _=x(6365),M=x(9326),w=x(8455);function se(...Pe){return function V(){return(0,_.U)(1)}()((0,w.H)(Pe,(0,M.lI)(Pe)))}},983:(Zt,qe,x)=>{x.d(qe,{w:()=>V});const V=new(x(1985).c)(se=>se.complete())},7468:(Zt,qe,x)=>{x.d(qe,{p:()=>Le});var _=x(1985),V=x(3073),M=x(8750),w=x(9326),se=x(4360),Pe=x(6450),B=x(8496);function Le(...$e){const ve=(0,w.ms)($e),{args:_e,keys:He}=(0,V.D)($e),Tt=new _.c(De=>{const{length:Be}=_e;if(!Be)return void De.complete();const At=new Array(Be);let yt=Be,st=Be;for(let bt=0;bt<Be;bt++){let gt=!1;(0,M.Tg)(_e[bt]).subscribe((0,se._)(De,ue=>{gt||(gt=!0,st--),At[bt]=ue},()=>yt--,void 0,()=>{(!yt||!gt)&&(st||De.next(He?(0,B.e)(He,At):At),De.complete())}))}});return ve?Tt.pipe((0,Pe.I)(ve)):Tt}},8455:(Zt,qe,x)=>{x.d(qe,{H:()=>de});var _=x(8750),V=x(941),M=x(6745),Pe=x(1985),Le=x(4761),$e=x(8071),ve=x(5225);function He(ae,Ve){if(!ae)throw new Error("Iterable cannot be null");return new Pe.c(Ye=>{(0,ve.N)(Ye,Ve,()=>{const et=ae[Symbol.asyncIterator]();(0,ve.N)(Ye,Ve,()=>{et.next().then(ce=>{ce.done?Ye.complete():Ye.next(ce.value)})},0,!0)})})}var Tt=x(5055),De=x(9858),Be=x(7441),At=x(5397),yt=x(7953),st=x(591),bt=x(5196);function de(ae,Ve){return Ve?function ue(ae,Ve){if(null!=ae){if((0,Tt.l)(ae))return function w(ae,Ve){return(0,_.Tg)(ae).pipe((0,M._)(Ve),(0,V.Q)(Ve))}(ae,Ve);if((0,Be.X)(ae))return function B(ae,Ve){return new Pe.c(Ye=>{let et=0;return Ve.schedule(function(){et===ae.length?Ye.complete():(Ye.next(ae[et++]),Ye.closed||this.schedule())})})}(ae,Ve);if((0,De.y)(ae))return function se(ae,Ve){return(0,_.Tg)(ae).pipe((0,M._)(Ve),(0,V.Q)(Ve))}(ae,Ve);if((0,yt.T)(ae))return He(ae,Ve);if((0,At.x)(ae))return function _e(ae,Ve){return new Pe.c(Ye=>{let et;return(0,ve.N)(Ye,Ve,()=>{et=ae[Le.l](),(0,ve.N)(Ye,Ve,()=>{let ce,Ne;try{({value:ce,done:Ne}=et.next())}catch(We){return void Ye.error(We)}Ne?Ye.complete():Ye.next(ce)},0,!0)}),()=>(0,$e.T)(et?.return)&&et.return()})}(ae,Ve);if((0,bt.U)(ae))return function gt(ae,Ve){return He((0,bt.C)(ae),Ve)}(ae,Ve)}throw(0,st.L)(ae)}(ae,Ve):(0,_.Tg)(ae)}},8750:(Zt,qe,x)=>{x.d(qe,{Tg:()=>Tt});var _=x(1635),V=x(7441),M=x(9858),w=x(1985),se=x(5055),Pe=x(7953),B=x(591),Le=x(5397),$e=x(5196),ve=x(8071),_e=x(5334),He=x(3494);function Tt(ue){if(ue instanceof w.c)return ue;if(null!=ue){if((0,se.l)(ue))return function De(ue){return new w.c(de=>{const ae=ue[He.s]();if((0,ve.T)(ae.subscribe))return ae.subscribe(de);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ue);if((0,V.X)(ue))return function Be(ue){return new w.c(de=>{for(let ae=0;ae<ue.length&&!de.closed;ae++)de.next(ue[ae]);de.complete()})}(ue);if((0,M.y)(ue))return function At(ue){return new w.c(de=>{ue.then(ae=>{de.closed||(de.next(ae),de.complete())},ae=>de.error(ae)).then(null,_e.m)})}(ue);if((0,Pe.T)(ue))return st(ue);if((0,Le.x)(ue))return function yt(ue){return new w.c(de=>{for(const ae of ue)if(de.next(ae),de.closed)return;de.complete()})}(ue);if((0,$e.U)(ue))return function bt(ue){return st((0,$e.C)(ue))}(ue)}throw(0,B.L)(ue)}function st(ue){return new w.c(de=>{(function gt(ue,de){var ae,Ve,Ye,et;return(0,_.sH)(this,void 0,void 0,function*(){try{for(ae=(0,_.xN)(ue);!(Ve=yield ae.next()).done;)if(de.next(Ve.value),de.closed)return}catch(ce){Ye={error:ce}}finally{try{Ve&&!Ve.done&&(et=ae.return)&&(yield et.call(ae))}finally{if(Ye)throw Ye.error}}de.complete()})})(ue,de).catch(ae=>de.error(ae))})}},7673:(Zt,qe,x)=>{x.d(qe,{of:()=>M});var _=x(9326),V=x(8455);function M(...w){const se=(0,_.lI)(w);return(0,V.H)(w,se)}},4360:(Zt,qe,x)=>{x.d(qe,{_:()=>V});var _=x(7707);function V(w,se,Pe,B,Le){return new M(w,se,Pe,B,Le)}class M extends _.vU{constructor(se,Pe,B,Le,$e,ve){super(se),this.onFinalize=$e,this.shouldUnsubscribe=ve,this._next=Pe?function(_e){try{Pe(_e)}catch(He){se.error(He)}}:super._next,this._error=Le?function(_e){try{Le(_e)}catch(He){se.error(He)}finally{this.unsubscribe()}}:super._error,this._complete=B?function(){try{B()}catch(_e){se.error(_e)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Pe}=this;super.unsubscribe(),!Pe&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},9437:(Zt,qe,x)=>{x.d(qe,{W:()=>w});var _=x(8750),V=x(4360),M=x(9974);function w(se){return(0,M.N)((Pe,B)=>{let ve,Le=null,$e=!1;Le=Pe.subscribe((0,V._)(B,void 0,void 0,_e=>{ve=(0,_.Tg)(se(_e,w(se)(Pe))),Le?(Le.unsubscribe(),Le=null,ve.subscribe(B)):$e=!0})),$e&&(Le.unsubscribe(),Le=null,ve.subscribe(B))})}},274:(Zt,qe,x)=>{x.d(qe,{H:()=>M});var _=x(1397),V=x(8071);function M(w,se){return(0,V.T)(se)?(0,_.Z)(w,se,1):(0,_.Z)(w,1)}},9901:(Zt,qe,x)=>{x.d(qe,{U:()=>M});var _=x(9974),V=x(4360);function M(w){return(0,_.N)((se,Pe)=>{let B=!1;se.subscribe((0,V._)(Pe,Le=>{B=!0,Pe.next(Le)},()=>{B||Pe.next(w),Pe.complete()}))})}},5964:(Zt,qe,x)=>{x.d(qe,{p:()=>M});var _=x(9974),V=x(4360);function M(w,se){return(0,_.N)((Pe,B)=>{let Le=0;Pe.subscribe((0,V._)(B,$e=>w.call(se,$e,Le++)&&B.next($e)))})}},980:(Zt,qe,x)=>{x.d(qe,{j:()=>V});var _=x(9974);function V(M){return(0,_.N)((w,se)=>{try{w.subscribe(se)}finally{se.add(M)}})}},1594:(Zt,qe,x)=>{x.d(qe,{$:()=>B});var _=x(9350),V=x(5964),M=x(6697),w=x(9901),se=x(3774),Pe=x(3669);function B(Le,$e){const ve=arguments.length>=2;return _e=>_e.pipe(Le?(0,V.p)((He,Tt)=>Le(He,Tt,_e)):Pe.D,(0,M.s)(1),ve?(0,w.U)($e):(0,se.v)(()=>new _.G))}},6354:(Zt,qe,x)=>{x.d(qe,{T:()=>M});var _=x(9974),V=x(4360);function M(w,se){return(0,_.N)((Pe,B)=>{let Le=0;Pe.subscribe((0,V._)(B,$e=>{B.next(w.call(se,$e,Le++))}))})}},6365:(Zt,qe,x)=>{x.d(qe,{U:()=>M});var _=x(1397),V=x(3669);function M(w=1/0){return(0,_.Z)(V.D,w)}},1397:(Zt,qe,x)=>{x.d(qe,{Z:()=>Le});var _=x(6354),V=x(8750),M=x(9974),w=x(5225),se=x(4360),B=x(8071);function Le($e,ve,_e=1/0){return(0,B.T)(ve)?Le((He,Tt)=>(0,_.T)((De,Be)=>ve(He,De,Tt,Be))((0,V.Tg)($e(He,Tt))),_e):("number"==typeof ve&&(_e=ve),(0,M.N)((He,Tt)=>function Pe($e,ve,_e,He,Tt,De,Be,At){const yt=[];let st=0,bt=0,gt=!1;const ue=()=>{gt&&!yt.length&&!st&&ve.complete()},de=Ve=>st<He?ae(Ve):yt.push(Ve),ae=Ve=>{De&&ve.next(Ve),st++;let Ye=!1;(0,V.Tg)(_e(Ve,bt++)).subscribe((0,se._)(ve,et=>{Tt?.(et),De?de(et):ve.next(et)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(st--;yt.length&&st<He;){const et=yt.shift();Be?(0,w.N)(ve,Be,()=>ae(et)):ae(et)}ue()}catch(et){ve.error(et)}}))};return $e.subscribe((0,se._)(ve,de,()=>{gt=!0,ue()})),()=>{At?.()}}(He,Tt,$e,_e)))}},941:(Zt,qe,x)=>{x.d(qe,{Q:()=>w});var _=x(5225),V=x(9974),M=x(4360);function w(se,Pe=0){return(0,V.N)((B,Le)=>{B.subscribe((0,M._)(Le,$e=>(0,_.N)(Le,se,()=>Le.next($e),Pe),()=>(0,_.N)(Le,se,()=>Le.complete(),Pe),$e=>(0,_.N)(Le,se,()=>Le.error($e),Pe)))})}},2816:(Zt,qe,x)=>{x.d(qe,{S:()=>w});var _=x(9974),V=x(4360);function w(se,Pe){return(0,_.N)(function M(se,Pe,B,Le,$e){return(ve,_e)=>{let He=B,Tt=Pe,De=0;ve.subscribe((0,V._)(_e,Be=>{const At=De++;Tt=He?se(Tt,Be,At):(He=!0,Be),Le&&_e.next(Tt)},$e&&(()=>{He&&_e.next(Tt),_e.complete()})))}}(se,Pe,arguments.length>=2,!0))}},9172:(Zt,qe,x)=>{x.d(qe,{Z:()=>w});var _=x(8793),V=x(9326),M=x(9974);function w(...se){const Pe=(0,V.lI)(se);return(0,M.N)((B,Le)=>{(Pe?(0,_.x)(se,B,Pe):(0,_.x)(se,B)).subscribe(Le)})}},6745:(Zt,qe,x)=>{x.d(qe,{_:()=>V});var _=x(9974);function V(M,w=0){return(0,_.N)((se,Pe)=>{Pe.add(M.schedule(()=>se.subscribe(Pe),w))})}},5558:(Zt,qe,x)=>{x.d(qe,{n:()=>w});var _=x(8750),V=x(9974),M=x(4360);function w(se,Pe){return(0,V.N)((B,Le)=>{let $e=null,ve=0,_e=!1;const He=()=>_e&&!$e&&Le.complete();B.subscribe((0,M._)(Le,Tt=>{$e?.unsubscribe();let De=0;const Be=ve++;(0,_.Tg)(se(Tt,Be)).subscribe($e=(0,M._)(Le,At=>Le.next(Pe?Pe(Tt,At,Be,De++):At),()=>{$e=null,He()}))},()=>{_e=!0,He()}))})}},6697:(Zt,qe,x)=>{x.d(qe,{s:()=>w});var _=x(983),V=x(9974),M=x(4360);function w(se){return se<=0?()=>_.w:(0,V.N)((Pe,B)=>{let Le=0;Pe.subscribe((0,M._)(B,$e=>{++Le<=se&&(B.next($e),se<=Le&&B.complete())}))})}},8141:(Zt,qe,x)=>{x.d(qe,{M:()=>se});var _=x(8071),V=x(9974),M=x(4360),w=x(3669);function se(Pe,B,Le){const $e=(0,_.T)(Pe)||B||Le?{next:Pe,error:B,complete:Le}:Pe;return $e?(0,V.N)((ve,_e)=>{var He;null===(He=$e.subscribe)||void 0===He||He.call($e);let Tt=!0;ve.subscribe((0,M._)(_e,De=>{var Be;null===(Be=$e.next)||void 0===Be||Be.call($e,De),_e.next(De)},()=>{var De;Tt=!1,null===(De=$e.complete)||void 0===De||De.call($e),_e.complete()},De=>{var Be;Tt=!1,null===(Be=$e.error)||void 0===Be||Be.call($e,De),_e.error(De)},()=>{var De,Be;Tt&&(null===(De=$e.unsubscribe)||void 0===De||De.call($e)),null===(Be=$e.finalize)||void 0===Be||Be.call($e)}))}):w.D}},3774:(Zt,qe,x)=>{x.d(qe,{v:()=>w});var _=x(9350),V=x(9974),M=x(4360);function w(Pe=se){return(0,V.N)((B,Le)=>{let $e=!1;B.subscribe((0,M._)(Le,ve=>{$e=!0,Le.next(ve)},()=>$e?Le.complete():Le.error(Pe())))})}function se(){return new _.G}},6780:(Zt,qe,x)=>{x.d(qe,{R:()=>se});var _=x(8359);class V extends _.yU{constructor(B,Le){super()}schedule(B,Le=0){return this}}const M={setInterval(Pe,B,...Le){const{delegate:$e}=M;return $e?.setInterval?$e.setInterval(Pe,B,...Le):setInterval(Pe,B,...Le)},clearInterval(Pe){const{delegate:B}=M;return(B?.clearInterval||clearInterval)(Pe)},delegate:void 0};var w=x(7908);class se extends V{constructor(B,Le){super(B,Le),this.scheduler=B,this.work=Le,this.pending=!1}schedule(B,Le=0){var $e;if(this.closed)return this;this.state=B;const ve=this.id,_e=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(_e,ve,Le)),this.pending=!0,this.delay=Le,this.id=null!==($e=this.id)&&void 0!==$e?$e:this.requestAsyncId(_e,this.id,Le),this}requestAsyncId(B,Le,$e=0){return M.setInterval(B.flush.bind(B,this),$e)}recycleAsyncId(B,Le,$e=0){if(null!=$e&&this.delay===$e&&!1===this.pending)return Le;null!=Le&&M.clearInterval(Le)}execute(B,Le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const $e=this._execute(B,Le);if($e)return $e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(B,Le){let ve,$e=!1;try{this.work(B)}catch(_e){$e=!0,ve=_e||new Error("Scheduled action threw falsy error")}if($e)return this.unsubscribe(),ve}unsubscribe(){if(!this.closed){const{id:B,scheduler:Le}=this,{actions:$e}=Le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,w.o)($e,this),null!=B&&(this.id=this.recycleAsyncId(Le,B,null)),this.delay=null,super.unsubscribe()}}}},9687:(Zt,qe,x)=>{x.d(qe,{q:()=>M});var _=x(6129);class V{constructor(se,Pe=V.now){this.schedulerActionCtor=se,this.now=Pe}schedule(se,Pe=0,B){return new this.schedulerActionCtor(this,se).schedule(B,Pe)}}V.now=_.U.now;class M extends V{constructor(se,Pe=V.now){super(se,Pe),this.actions=[],this._active=!1}flush(se){const{actions:Pe}=this;if(this._active)return void Pe.push(se);let B;this._active=!0;do{if(B=se.execute(se.state,se.delay))break}while(se=Pe.shift());if(this._active=!1,B){for(;se=Pe.shift();)se.unsubscribe();throw B}}}},3236:(Zt,qe,x)=>{x.d(qe,{E:()=>M,b:()=>w});var _=x(6780);const M=new(x(9687).q)(_.R),w=M},6129:(Zt,qe,x)=>{x.d(qe,{U:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},9270:(Zt,qe,x)=>{x.d(qe,{f:()=>_});const _={setTimeout(V,M,...w){const{delegate:se}=_;return se?.setTimeout?se.setTimeout(V,M,...w):setTimeout(V,M,...w)},clearTimeout(V){const{delegate:M}=_;return(M?.clearTimeout||clearTimeout)(V)},delegate:void 0}},4761:(Zt,qe,x)=>{x.d(qe,{l:()=>V});const V=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Zt,qe,x)=>{x.d(qe,{s:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(Zt,qe,x)=>{x.d(qe,{G:()=>V});const V=(0,x(1853).L)(M=>function(){M(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(Zt,qe,x)=>{x.d(qe,{R0:()=>Pe,lI:()=>se,ms:()=>w});var _=x(8071),V=x(9470);function M(B){return B[B.length-1]}function w(B){return(0,_.T)(M(B))?B.pop():void 0}function se(B){return(0,V.m)(M(B))?B.pop():void 0}function Pe(B,Le){return"number"==typeof M(B)?B.pop():Le}},3073:(Zt,qe,x)=>{x.d(qe,{D:()=>se});const{isArray:_}=Array,{getPrototypeOf:V,prototype:M,keys:w}=Object;function se(B){if(1===B.length){const Le=B[0];if(_(Le))return{args:Le,keys:null};if(function Pe(B){return B&&"object"==typeof B&&V(B)===M}(Le)){const $e=w(Le);return{args:$e.map(ve=>Le[ve]),keys:$e}}}return{args:B,keys:null}}},7908:(Zt,qe,x)=>{function _(V,M){if(V){const w=V.indexOf(M);0<=w&&V.splice(w,1)}}x.d(qe,{o:()=>_})},1853:(Zt,qe,x)=>{function _(V){const w=V(se=>{Error.call(se),se.stack=(new Error).stack});return w.prototype=Object.create(Error.prototype),w.prototype.constructor=w,w}x.d(qe,{L:()=>_})},8496:(Zt,qe,x)=>{function _(V,M){return V.reduce((w,se,Pe)=>(w[se]=M[Pe],w),{})}x.d(qe,{e:()=>_})},9786:(Zt,qe,x)=>{x.d(qe,{Y:()=>M,l:()=>w});var _=x(1026);let V=null;function M(se){if(_.$.useDeprecatedSynchronousErrorHandling){const Pe=!V;if(Pe&&(V={errorThrown:!1,error:null}),se(),Pe){const{errorThrown:B,error:Le}=V;if(V=null,B)throw Le}}else se()}function w(se){_.$.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=se)}},5225:(Zt,qe,x)=>{function _(V,M,w,se=0,Pe=!1){const B=M.schedule(function(){w(),Pe?V.add(this.schedule(null,se)):this.unsubscribe()},se);if(V.add(B),!Pe)return B}x.d(qe,{N:()=>_})},3669:(Zt,qe,x)=>{function _(V){return V}x.d(qe,{D:()=>_})},7441:(Zt,qe,x)=>{x.d(qe,{X:()=>_});const _=V=>V&&"number"==typeof V.length&&"function"!=typeof V},7953:(Zt,qe,x)=>{x.d(qe,{T:()=>V});var _=x(8071);function V(M){return Symbol.asyncIterator&&(0,_.T)(M?.[Symbol.asyncIterator])}},8071:(Zt,qe,x)=>{function _(V){return"function"==typeof V}x.d(qe,{T:()=>_})},5055:(Zt,qe,x)=>{x.d(qe,{l:()=>M});var _=x(3494),V=x(8071);function M(w){return(0,V.T)(w[_.s])}},5397:(Zt,qe,x)=>{x.d(qe,{x:()=>M});var _=x(4761),V=x(8071);function M(w){return(0,V.T)(w?.[_.l])}},9858:(Zt,qe,x)=>{x.d(qe,{y:()=>V});var _=x(8071);function V(M){return(0,_.T)(M?.then)}},5196:(Zt,qe,x)=>{x.d(qe,{C:()=>M,U:()=>w});var _=x(1635),V=x(8071);function M(se){return(0,_.AQ)(this,arguments,function*(){const B=se.getReader();try{for(;;){const{value:Le,done:$e}=yield(0,_.N3)(B.read());if($e)return yield(0,_.N3)(void 0);yield yield(0,_.N3)(Le)}}finally{B.releaseLock()}})}function w(se){return(0,V.T)(se?.getReader)}},9470:(Zt,qe,x)=>{x.d(qe,{m:()=>V});var _=x(8071);function V(M){return M&&(0,_.T)(M.schedule)}},9974:(Zt,qe,x)=>{x.d(qe,{N:()=>M,S:()=>V});var _=x(8071);function V(w){return(0,_.T)(w?.lift)}function M(w){return se=>{if(V(se))return se.lift(function(Pe){try{return w(Pe,this)}catch(B){this.error(B)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(Zt,qe,x)=>{x.d(qe,{I:()=>w});var _=x(6354);const{isArray:V}=Array;function w(se){return(0,_.T)(Pe=>function M(se,Pe){return V(Pe)?se(...Pe):se(Pe)}(se,Pe))}},5343:(Zt,qe,x)=>{function _(){}x.d(qe,{l:()=>_})},1203:(Zt,qe,x)=>{x.d(qe,{F:()=>V,m:()=>M});var _=x(3669);function V(...w){return M(w)}function M(w){return 0===w.length?_.D:1===w.length?w[0]:function(Pe){return w.reduce((B,Le)=>Le(B),Pe)}}},5334:(Zt,qe,x)=>{x.d(qe,{m:()=>M});var _=x(1026),V=x(9270);function M(w){V.f.setTimeout(()=>{const{onUnhandledError:se}=_.$;if(!se)throw w;se(w)})}},591:(Zt,qe,x)=>{function _(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}x.d(qe,{L:()=>_})},9969:(Zt,qe,x)=>{x.d(qe,{FX:()=>et,If:()=>_,K2:()=>Pe,hZ:()=>M,i0:()=>w,iF:()=>B,kY:()=>ve,kp:()=>V,sf:()=>Ve,ui:()=>Ye,wk:()=>Le});var _=function(ce){return ce[ce.State=0]="State",ce[ce.Transition=1]="Transition",ce[ce.Sequence=2]="Sequence",ce[ce.Group=3]="Group",ce[ce.Animate=4]="Animate",ce[ce.Keyframes=5]="Keyframes",ce[ce.Style=6]="Style",ce[ce.Trigger=7]="Trigger",ce[ce.Reference=8]="Reference",ce[ce.AnimateChild=9]="AnimateChild",ce[ce.AnimateRef=10]="AnimateRef",ce[ce.Query=11]="Query",ce[ce.Stagger=12]="Stagger",ce}(_||{});const V="*";function M(ce,Ne){return{type:_.Trigger,name:ce,definitions:Ne,options:{}}}function w(ce,Ne=null){return{type:_.Animate,styles:Ne,timings:ce}}function Pe(ce,Ne=null){return{type:_.Sequence,steps:ce,options:Ne}}function B(ce){return{type:_.Style,styles:ce,offset:null}}function Le(ce,Ne,We){return{type:_.State,name:ce,styles:Ne,options:We}}function ve(ce,Ne,We=null){return{type:_.Transition,expr:ce,animation:Ne,options:We}}class Ve{constructor(Ne=0,We=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ne+We}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ne=>Ne()),this._onDoneFns=[])}onStart(Ne){this._originalOnStartFns.push(Ne),this._onStartFns.push(Ne)}onDone(Ne){this._originalOnDoneFns.push(Ne),this._onDoneFns.push(Ne)}onDestroy(Ne){this._onDestroyFns.push(Ne)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ne=>Ne()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ne=>Ne()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Ne){this._position=this.totalTime?Ne*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ne){const We="start"==Ne?this._onStartFns:this._onDoneFns;We.forEach(pn=>pn()),We.length=0}}class Ye{constructor(Ne){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ne;let We=0,pn=0,bn=0;const Fn=this.players.length;0==Fn?queueMicrotask(()=>this._onFinish()):this.players.forEach(xn=>{xn.onDone(()=>{++We==Fn&&this._onFinish()}),xn.onDestroy(()=>{++pn==Fn&&this._onDestroy()}),xn.onStart(()=>{++bn==Fn&&this._onStart()})}),this.totalTime=this.players.reduce((xn,fn)=>Math.max(xn,fn.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ne=>Ne()),this._onDoneFns=[])}init(){this.players.forEach(Ne=>Ne.init())}onStart(Ne){this._onStartFns.push(Ne)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ne=>Ne()),this._onStartFns=[])}onDone(Ne){this._onDoneFns.push(Ne)}onDestroy(Ne){this._onDestroyFns.push(Ne)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ne=>Ne.play())}pause(){this.players.forEach(Ne=>Ne.pause())}restart(){this.players.forEach(Ne=>Ne.restart())}finish(){this._onFinish(),this.players.forEach(Ne=>Ne.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ne=>Ne.destroy()),this._onDestroyFns.forEach(Ne=>Ne()),this._onDestroyFns=[])}reset(){this.players.forEach(Ne=>Ne.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ne){const We=Ne*this.totalTime;this.players.forEach(pn=>{const bn=pn.totalTime?Math.min(1,We/pn.totalTime):1;pn.setPosition(bn)})}getPosition(){const Ne=this.players.reduce((We,pn)=>null===We||pn.totalTime>We.totalTime?pn:We,null);return null!=Ne?Ne.getPosition():0}beforeDestroy(){this.players.forEach(Ne=>{Ne.beforeDestroy&&Ne.beforeDestroy()})}triggerCallback(Ne){const We="start"==Ne?this._onStartFns:this._onDoneFns;We.forEach(pn=>pn()),We.length=0}}const et="!"},177:(Zt,qe,x)=>{x.d(qe,{AJ:()=>Vs,Jj:()=>sr,MD:()=>Fs,N0:()=>uo,P9:()=>mi,QT:()=>M,Sm:()=>At,Sq:()=>on,VF:()=>se,Vy:()=>Bi,Xr:()=>Vo,YU:()=>Xe,ZD:()=>w,_b:()=>ye,aZ:()=>st,bT:()=>yr,fw:()=>yt,hb:()=>De,hj:()=>$e,qQ:()=>B});var _=x(4438);let V=null;function M(){return V}function w(T){V??=T}class se{}const B=new _.nKC("");let Le=(()=>{class T{historyGo(F){throw new Error("")}static#e=this.\u0275fac=function($){return new($||T)};static#t=this.\u0275prov=_.jDH({token:T,factory:()=>(0,_.WQX)(ve),providedIn:"platform"})}return T})();const $e=new _.nKC("");let ve=(()=>{class T extends Le{constructor(){super(),this._doc=(0,_.WQX)(B),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return M().getBaseHref(this._doc)}onPopState(F){const $=M().getGlobalEventTarget(this._doc,"window");return $.addEventListener("popstate",F,!1),()=>$.removeEventListener("popstate",F)}onHashChange(F){const $=M().getGlobalEventTarget(this._doc,"window");return $.addEventListener("hashchange",F,!1),()=>$.removeEventListener("hashchange",F)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(F){this._location.pathname=F}pushState(F,$,Ee){this._history.pushState(F,$,Ee)}replaceState(F,$,Ee){this._history.replaceState(F,$,Ee)}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}static#e=this.\u0275fac=function($){return new($||T)};static#t=this.\u0275prov=_.jDH({token:T,factory:()=>new T,providedIn:"platform"})}return T})();function _e(T,Q){if(0==T.length)return Q;if(0==Q.length)return T;let F=0;return T.endsWith("/")&&F++,Q.startsWith("/")&&F++,2==F?T+Q.substring(1):1==F?T+Q:T+"/"+Q}function He(T){const Q=T.match(/#|\?|$/),F=Q&&Q.index||T.length;return T.slice(0,F-("/"===T[F-1]?1:0))+T.slice(F)}function Tt(T){return T&&"?"!==T[0]?"?"+T:T}let De=(()=>{class T{historyGo(F){throw new Error("")}static#e=this.\u0275fac=function($){return new($||T)};static#t=this.\u0275prov=_.jDH({token:T,factory:()=>(0,_.WQX)(At),providedIn:"root"})}return T})();const Be=new _.nKC("");let At=(()=>{class T extends De{constructor(F,$){super(),this._platformLocation=F,this._removeListenerFns=[],this._baseHref=$??this._platformLocation.getBaseHrefFromDOM()??(0,_.WQX)(B).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return _e(this._baseHref,F)}path(F=!1){const $=this._platformLocation.pathname+Tt(this._platformLocation.search),Ee=this._platformLocation.hash;return Ee&&F?`${$}${Ee}`:$}pushState(F,$,Ee,Ct){const Vt=this.prepareExternalUrl(Ee+Tt(Ct));this._platformLocation.pushState(F,$,Vt)}replaceState(F,$,Ee,Ct){const Vt=this.prepareExternalUrl(Ee+Tt(Ct));this._platformLocation.replaceState(F,$,Vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){this._platformLocation.historyGo?.(F)}static#e=this.\u0275fac=function($){return new($||T)(_.KVO(Le),_.KVO(Be,8))};static#t=this.\u0275prov=_.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}return T})(),yt=(()=>{class T extends De{constructor(F,$){super(),this._platformLocation=F,this._baseHref="",this._removeListenerFns=[],null!=$&&(this._baseHref=$)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}path(F=!1){const $=this._platformLocation.hash??"#";return $.length>0?$.substring(1):$}prepareExternalUrl(F){const $=_e(this._baseHref,F);return $.length>0?"#"+$:$}pushState(F,$,Ee,Ct){let Vt=this.prepareExternalUrl(Ee+Tt(Ct));0==Vt.length&&(Vt=this._platformLocation.pathname),this._platformLocation.pushState(F,$,Vt)}replaceState(F,$,Ee,Ct){let Vt=this.prepareExternalUrl(Ee+Tt(Ct));0==Vt.length&&(Vt=this._platformLocation.pathname),this._platformLocation.replaceState(F,$,Vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){this._platformLocation.historyGo?.(F)}static#e=this.\u0275fac=function($){return new($||T)(_.KVO(Le),_.KVO(Be,8))};static#t=this.\u0275prov=_.jDH({token:T,factory:T.\u0275fac})}return T})(),st=(()=>{class T{constructor(F){this._subject=new _.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=F;const $=this._locationStrategy.getBaseHref();this._basePath=function de(T){if(new RegExp("^(https?:)?//").test(T)){const[,F]=T.split(/\/\/[^\/]+/);return F}return T}(He(ue($))),this._locationStrategy.onPopState(Ee=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ee.state,type:Ee.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(F=!1){return this.normalize(this._locationStrategy.path(F))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(F,$=""){return this.path()==this.normalize(F+Tt($))}normalize(F){return T.stripTrailingSlash(function gt(T,Q){if(!T||!Q.startsWith(T))return Q;const F=Q.substring(T.length);return""===F||["/",";","?","#"].includes(F[0])?F:Q}(this._basePath,ue(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._locationStrategy.prepareExternalUrl(F)}go(F,$="",Ee=null){this._locationStrategy.pushState(Ee,"",F,$),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+Tt($)),Ee)}replaceState(F,$="",Ee=null){this._locationStrategy.replaceState(Ee,"",F,$),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+Tt($)),Ee)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(F=0){this._locationStrategy.historyGo?.(F)}onUrlChange(F){return this._urlChangeListeners.push(F),this._urlChangeSubscription??=this.subscribe($=>{this._notifyUrlChangeListeners($.url,$.state)}),()=>{const $=this._urlChangeListeners.indexOf(F);this._urlChangeListeners.splice($,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(F="",$){this._urlChangeListeners.forEach(Ee=>Ee(F,$))}subscribe(F,$,Ee){return this._subject.subscribe({next:F,error:$,complete:Ee})}static#e=this.normalizeQueryParams=Tt;static#t=this.joinWithSlash=_e;static#n=this.stripTrailingSlash=He;static#r=this.\u0275fac=function($){return new($||T)(_.KVO(De))};static#i=this.\u0275prov=_.jDH({token:T,factory:()=>function bt(){return new st((0,_.KVO)(De))}(),providedIn:"root"})}return T})();function ue(T){return T.replace(/\/index.html$/,"")}function ye(T,Q){Q=encodeURIComponent(Q);for(const F of T.split(";")){const $=F.indexOf("="),[Ee,Ct]=-1==$?[F,""]:[F.slice(0,$),F.slice($+1)];if(Ee.trim()===Q)return decodeURIComponent(Ct)}return null}const Ie=/\s+/,pt=[];let Xe=(()=>{class T{constructor(F,$){this._ngEl=F,this._renderer=$,this.initialClasses=pt,this.stateMap=new Map}set klass(F){this.initialClasses=null!=F?F.trim().split(Ie):pt}set ngClass(F){this.rawClass="string"==typeof F?F.trim().split(Ie):F}ngDoCheck(){for(const $ of this.initialClasses)this._updateState($,!0);const F=this.rawClass;if(Array.isArray(F)||F instanceof Set)for(const $ of F)this._updateState($,!0);else if(null!=F)for(const $ of Object.keys(F))this._updateState($,!!F[$]);this._applyStateDiff()}_updateState(F,$){const Ee=this.stateMap.get(F);void 0!==Ee?(Ee.enabled!==$&&(Ee.changed=!0,Ee.enabled=$),Ee.touched=!0):this.stateMap.set(F,{enabled:$,changed:!0,touched:!0})}_applyStateDiff(){for(const F of this.stateMap){const $=F[0],Ee=F[1];Ee.changed?(this._toggleClass($,Ee.enabled),Ee.changed=!1):Ee.touched||(Ee.enabled&&this._toggleClass($,!1),this.stateMap.delete($)),Ee.touched=!1}}_toggleClass(F,$){(F=F.trim()).length>0&&F.split(Ie).forEach(Ee=>{$?this._renderer.addClass(this._ngEl.nativeElement,Ee):this._renderer.removeClass(this._ngEl.nativeElement,Ee)})}static#e=this.\u0275fac=function($){return new($||T)(_.rXU(_.aKT),_.rXU(_.sFG))};static#t=this.\u0275dir=_.FsC({type:T,selectors:[["","ngClass",""]],inputs:{klass:[_.Mj6.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return T})();class $n{constructor(Q,F,$,Ee){this.$implicit=Q,this.ngForOf=F,this.index=$,this.count=Ee}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let on=(()=>{class T{set ngForOf(F){this._ngForOf=F,this._ngForOfDirty=!0}set ngForTrackBy(F){this._trackByFn=F}get ngForTrackBy(){return this._trackByFn}constructor(F,$,Ee){this._viewContainer=F,this._template=$,this._differs=Ee,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(F){F&&(this._template=F)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const F=this._ngForOf;!this._differ&&F&&(this._differ=this._differs.find(F).create(this.ngForTrackBy))}if(this._differ){const F=this._differ.diff(this._ngForOf);F&&this._applyChanges(F)}}_applyChanges(F){const $=this._viewContainer;F.forEachOperation((Ee,Ct,Vt)=>{if(null==Ee.previousIndex)$.createEmbeddedView(this._template,new $n(Ee.item,this._ngForOf,-1,-1),null===Vt?void 0:Vt);else if(null==Vt)$.remove(null===Ct?void 0:Ct);else if(null!==Ct){const rn=$.get(Ct);$.move(rn,Vt),br(rn,Ee)}});for(let Ee=0,Ct=$.length;Ee<Ct;Ee++){const rn=$.get(Ee).context;rn.index=Ee,rn.count=Ct,rn.ngForOf=this._ngForOf}F.forEachIdentityChange(Ee=>{br($.get(Ee.currentIndex),Ee)})}static ngTemplateContextGuard(F,$){return!0}static#e=this.\u0275fac=function($){return new($||T)(_.rXU(_.c1b),_.rXU(_.C4Q),_.rXU(_._q3))};static#t=this.\u0275dir=_.FsC({type:T,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return T})();function br(T,Q){T.context.$implicit=Q.item}let yr=(()=>{class T{constructor(F,$){this._viewContainer=F,this._context=new Ai,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=$}set ngIf(F){this._context.$implicit=this._context.ngIf=F,this._updateView()}set ngIfThen(F){ps("ngIfThen",F),this._thenTemplateRef=F,this._thenViewRef=null,this._updateView()}set ngIfElse(F){ps("ngIfElse",F),this._elseTemplateRef=F,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(F,$){return!0}static#e=this.\u0275fac=function($){return new($||T)(_.rXU(_.c1b),_.rXU(_.C4Q))};static#t=this.\u0275dir=_.FsC({type:T,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return T})();class Ai{constructor(){this.$implicit=null,this.ngIf=null}}function ps(T,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${T} must be a TemplateRef, but received '${(0,_.Tbb)(Q)}'.`)}function Qi(T,Q){return new _.wOt(2100,!1)}class wo{createSubscription(Q,F){return(0,_.O8t)(()=>Q.subscribe({next:F,error:$=>{throw $}}))}dispose(Q){(0,_.O8t)(()=>Q.unsubscribe())}}class ya{createSubscription(Q,F){return Q.then(F,$=>{throw $})}dispose(Q){}}const va=new ya,ko=new wo;let sr=(()=>{class T{constructor(F){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=F}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(F){if(!this._obj){if(F)try{this.markForCheckOnValueUpdate=!1,this._subscribe(F)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return F!==this._obj?(this._dispose(),this.transform(F)):this._latestValue}_subscribe(F){this._obj=F,this._strategy=this._selectStrategy(F),this._subscription=this._strategy.createSubscription(F,$=>this._updateLatestValue(F,$))}_selectStrategy(F){if((0,_.jNT)(F))return va;if((0,_.zjR)(F))return ko;throw Qi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(F,$){F===this._obj&&(this._latestValue=$,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function($){return new($||T)(_.rXU(_.gRc,16))};static#t=this.\u0275pipe=_.EJ8({name:"async",type:T,pure:!1,standalone:!0})}return T})(),mi=(()=>{class T{transform(F,$,Ee){if(null==F)return null;if(!this.supports(F))throw Qi();return F.slice($,Ee)}supports(F){return"string"==typeof F||Array.isArray(F)}static#e=this.\u0275fac=function($){return new($||T)};static#t=this.\u0275pipe=_.EJ8({name:"slice",type:T,pure:!1,standalone:!0})}return T})(),Fs=(()=>{class T{static#e=this.\u0275fac=function($){return new($||T)};static#t=this.\u0275mod=_.$C({type:T});static#n=this.\u0275inj=_.G2t({})}return T})();const Vs="browser",eo="server";function Bi(T){return T===eo}let Vo=(()=>{class T{static#e=this.\u0275prov=(0,_.jDH)({token:T,providedIn:"root",factory:()=>function ss(T){return T===Vs}((0,_.WQX)(_.Agw))?new Xi((0,_.WQX)(B),window):new co})}return T})();class Xi{constructor(Q,F){this.document=Q,this.window=F,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(Q){this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){const F=function Fi(T,Q){const F=T.getElementById(Q)||T.getElementsByName(Q)[0];if(F)return F;if("function"==typeof T.createTreeWalker&&T.body&&"function"==typeof T.body.attachShadow){const $=T.createTreeWalker(T.body,NodeFilter.SHOW_ELEMENT);let Ee=$.currentNode;for(;Ee;){const Ct=Ee.shadowRoot;if(Ct){const Vt=Ct.getElementById(Q)||Ct.querySelector(`[name="${Q}"]`);if(Vt)return Vt}Ee=$.nextNode()}}return null}(this.document,Q);F&&(this.scrollToElement(F),F.focus())}setHistoryScrollRestoration(Q){this.window.history.scrollRestoration=Q}scrollToElement(Q){const F=Q.getBoundingClientRect(),$=F.left+this.window.pageXOffset,Ee=F.top+this.window.pageYOffset,Ct=this.offset();this.window.scrollTo($-Ct[0],Ee-Ct[1])}}class co{setOffset(Q){}getScrollPosition(){return[0,0]}scrollToPosition(Q){}scrollToAnchor(Q){}setHistoryScrollRestoration(Q){}}class uo{}},1626:(Zt,qe,x)=>{x.d(qe,{Qq:()=>ct,q1:()=>Wn}),x(467);var V=x(4438),M=x(7673),w=x(1985),se=x(8455),Pe=x(274),B=x(5964),Le=x(6354),$e=x(980),ve=x(5558),_e=x(177);class He{}class Tt{}class De{constructor(ye){this.normalizedNames=new Map,this.lazyUpdate=null,ye?"string"==typeof ye?this.lazyInit=()=>{this.headers=new Map,ye.split("\n").forEach(Ie=>{const pt=Ie.indexOf(":");if(pt>0){const Xe=Ie.slice(0,pt),Kt=Xe.toLowerCase(),Ut=Ie.slice(pt+1).trim();this.maybeSetNormalizedName(Xe,Kt),this.headers.has(Kt)?this.headers.get(Kt).push(Ut):this.headers.set(Kt,[Ut])}})}:typeof Headers<"u"&&ye instanceof Headers?(this.headers=new Map,ye.forEach((Ie,pt)=>{this.setHeaderEntries(pt,Ie)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(ye).forEach(([Ie,pt])=>{this.setHeaderEntries(Ie,pt)})}:this.headers=new Map}has(ye){return this.init(),this.headers.has(ye.toLowerCase())}get(ye){this.init();const Ie=this.headers.get(ye.toLowerCase());return Ie&&Ie.length>0?Ie[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ye){return this.init(),this.headers.get(ye.toLowerCase())||null}append(ye,Ie){return this.clone({name:ye,value:Ie,op:"a"})}set(ye,Ie){return this.clone({name:ye,value:Ie,op:"s"})}delete(ye,Ie){return this.clone({name:ye,value:Ie,op:"d"})}maybeSetNormalizedName(ye,Ie){this.normalizedNames.has(Ie)||this.normalizedNames.set(Ie,ye)}init(){this.lazyInit&&(this.lazyInit instanceof De?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ye=>this.applyUpdate(ye)),this.lazyUpdate=null))}copyFrom(ye){ye.init(),Array.from(ye.headers.keys()).forEach(Ie=>{this.headers.set(Ie,ye.headers.get(Ie)),this.normalizedNames.set(Ie,ye.normalizedNames.get(Ie))})}clone(ye){const Ie=new De;return Ie.lazyInit=this.lazyInit&&this.lazyInit instanceof De?this.lazyInit:this,Ie.lazyUpdate=(this.lazyUpdate||[]).concat([ye]),Ie}applyUpdate(ye){const Ie=ye.name.toLowerCase();switch(ye.op){case"a":case"s":let pt=ye.value;if("string"==typeof pt&&(pt=[pt]),0===pt.length)return;this.maybeSetNormalizedName(ye.name,Ie);const Xe=("a"===ye.op?this.headers.get(Ie):void 0)||[];Xe.push(...pt),this.headers.set(Ie,Xe);break;case"d":const Kt=ye.value;if(Kt){let Ut=this.headers.get(Ie);if(!Ut)return;Ut=Ut.filter($n=>-1===Kt.indexOf($n)),0===Ut.length?(this.headers.delete(Ie),this.normalizedNames.delete(Ie)):this.headers.set(Ie,Ut)}else this.headers.delete(Ie),this.normalizedNames.delete(Ie)}}setHeaderEntries(ye,Ie){const pt=(Array.isArray(Ie)?Ie:[Ie]).map(Kt=>Kt.toString()),Xe=ye.toLowerCase();this.headers.set(Xe,pt),this.maybeSetNormalizedName(ye,Xe)}forEach(ye){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ie=>ye(this.normalizedNames.get(Ie),this.headers.get(Ie)))}}class At{encodeKey(ye){return gt(ye)}encodeValue(ye){return gt(ye)}decodeKey(ye){return decodeURIComponent(ye)}decodeValue(ye){return decodeURIComponent(ye)}}const st=/%(\d[a-f0-9])/gi,bt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function gt(ne){return encodeURIComponent(ne).replace(st,(ye,Ie)=>bt[Ie]??ye)}function ue(ne){return`${ne}`}class de{constructor(ye={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ye.encoder||new At,ye.fromString){if(ye.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yt(ne,ye){const Ie=new Map;return ne.length>0&&ne.replace(/^\?/,"").split("&").forEach(Xe=>{const Kt=Xe.indexOf("="),[Ut,$n]=-1==Kt?[ye.decodeKey(Xe),""]:[ye.decodeKey(Xe.slice(0,Kt)),ye.decodeValue(Xe.slice(Kt+1))],on=Ie.get(Ut)||[];on.push($n),Ie.set(Ut,on)}),Ie}(ye.fromString,this.encoder)}else ye.fromObject?(this.map=new Map,Object.keys(ye.fromObject).forEach(Ie=>{const pt=ye.fromObject[Ie],Xe=Array.isArray(pt)?pt.map(ue):[ue(pt)];this.map.set(Ie,Xe)})):this.map=null}has(ye){return this.init(),this.map.has(ye)}get(ye){this.init();const Ie=this.map.get(ye);return Ie?Ie[0]:null}getAll(ye){return this.init(),this.map.get(ye)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ye,Ie){return this.clone({param:ye,value:Ie,op:"a"})}appendAll(ye){const Ie=[];return Object.keys(ye).forEach(pt=>{const Xe=ye[pt];Array.isArray(Xe)?Xe.forEach(Kt=>{Ie.push({param:pt,value:Kt,op:"a"})}):Ie.push({param:pt,value:Xe,op:"a"})}),this.clone(Ie)}set(ye,Ie){return this.clone({param:ye,value:Ie,op:"s"})}delete(ye,Ie){return this.clone({param:ye,value:Ie,op:"d"})}toString(){return this.init(),this.keys().map(ye=>{const Ie=this.encoder.encodeKey(ye);return this.map.get(ye).map(pt=>Ie+"="+this.encoder.encodeValue(pt)).join("&")}).filter(ye=>""!==ye).join("&")}clone(ye){const Ie=new de({encoder:this.encoder});return Ie.cloneFrom=this.cloneFrom||this,Ie.updates=(this.updates||[]).concat(ye),Ie}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ye=>this.map.set(ye,this.cloneFrom.map.get(ye))),this.updates.forEach(ye=>{switch(ye.op){case"a":case"s":const Ie=("a"===ye.op?this.map.get(ye.param):void 0)||[];Ie.push(ue(ye.value)),this.map.set(ye.param,Ie);break;case"d":if(void 0===ye.value){this.map.delete(ye.param);break}{let pt=this.map.get(ye.param)||[];const Xe=pt.indexOf(ue(ye.value));-1!==Xe&&pt.splice(Xe,1),pt.length>0?this.map.set(ye.param,pt):this.map.delete(ye.param)}}}),this.cloneFrom=this.updates=null)}}class Ve{constructor(){this.map=new Map}set(ye,Ie){return this.map.set(ye,Ie),this}get(ye){return this.map.has(ye)||this.map.set(ye,ye.defaultValue()),this.map.get(ye)}delete(ye){return this.map.delete(ye),this}has(ye){return this.map.has(ye)}keys(){return this.map.keys()}}function et(ne){return typeof ArrayBuffer<"u"&&ne instanceof ArrayBuffer}function ce(ne){return typeof Blob<"u"&&ne instanceof Blob}function Ne(ne){return typeof FormData<"u"&&ne instanceof FormData}class pn{constructor(ye,Ie,pt,Xe){let Kt;if(this.url=Ie,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ye.toUpperCase(),function Ye(ne){switch(ne){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Xe?(this.body=void 0!==pt?pt:null,Kt=Xe):Kt=pt,Kt&&(this.reportProgress=!!Kt.reportProgress,this.withCredentials=!!Kt.withCredentials,Kt.responseType&&(this.responseType=Kt.responseType),Kt.headers&&(this.headers=Kt.headers),Kt.context&&(this.context=Kt.context),Kt.params&&(this.params=Kt.params),this.transferCache=Kt.transferCache),this.headers??=new De,this.context??=new Ve,this.params){const Ut=this.params.toString();if(0===Ut.length)this.urlWithParams=Ie;else{const $n=Ie.indexOf("?");this.urlWithParams=Ie+(-1===$n?"?":$n<Ie.length-1?"&":"")+Ut}}else this.params=new de,this.urlWithParams=Ie}serializeBody(){return null===this.body?null:"string"==typeof this.body||et(this.body)||ce(this.body)||Ne(this.body)||function We(ne){return typeof URLSearchParams<"u"&&ne instanceof URLSearchParams}(this.body)?this.body:this.body instanceof de?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ne(this.body)?null:ce(this.body)?this.body.type||null:et(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof de?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ye={}){const Ie=ye.method||this.method,pt=ye.url||this.url,Xe=ye.responseType||this.responseType,Kt=ye.transferCache??this.transferCache,Ut=void 0!==ye.body?ye.body:this.body,$n=ye.withCredentials??this.withCredentials,on=ye.reportProgress??this.reportProgress;let br=ye.headers||this.headers,si=ye.params||this.params;const yr=ye.context??this.context;return void 0!==ye.setHeaders&&(br=Object.keys(ye.setHeaders).reduce((Ai,ps)=>Ai.set(ps,ye.setHeaders[ps]),br)),ye.setParams&&(si=Object.keys(ye.setParams).reduce((Ai,ps)=>Ai.set(ps,ye.setParams[ps]),si)),new pn(Ie,pt,Ut,{params:si,headers:br,context:yr,reportProgress:on,responseType:Xe,withCredentials:$n,transferCache:Kt})}}var bn=function(ne){return ne[ne.Sent=0]="Sent",ne[ne.UploadProgress=1]="UploadProgress",ne[ne.ResponseHeader=2]="ResponseHeader",ne[ne.DownloadProgress=3]="DownloadProgress",ne[ne.Response=4]="Response",ne[ne.User=5]="User",ne}(bn||{});class Fn{constructor(ye,Ie=ke.Ok,pt="OK"){this.headers=ye.headers||new De,this.status=void 0!==ye.status?ye.status:Ie,this.statusText=ye.statusText||pt,this.url=ye.url||null,this.ok=this.status>=200&&this.status<300}}class xn extends Fn{constructor(ye={}){super(ye),this.type=bn.ResponseHeader}clone(ye={}){return new xn({headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class fn extends Fn{constructor(ye={}){super(ye),this.type=bn.Response,this.body=void 0!==ye.body?ye.body:null}clone(ye={}){return new fn({body:void 0!==ye.body?ye.body:this.body,headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class An extends Fn{constructor(ye){super(ye,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ye.url||"(unknown url)"}`:`Http failure response for ${ye.url||"(unknown url)"}: ${ye.status} ${ye.statusText}`,this.error=ye.error||null}}var ke=function(ne){return ne[ne.Continue=100]="Continue",ne[ne.SwitchingProtocols=101]="SwitchingProtocols",ne[ne.Processing=102]="Processing",ne[ne.EarlyHints=103]="EarlyHints",ne[ne.Ok=200]="Ok",ne[ne.Created=201]="Created",ne[ne.Accepted=202]="Accepted",ne[ne.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",ne[ne.NoContent=204]="NoContent",ne[ne.ResetContent=205]="ResetContent",ne[ne.PartialContent=206]="PartialContent",ne[ne.MultiStatus=207]="MultiStatus",ne[ne.AlreadyReported=208]="AlreadyReported",ne[ne.ImUsed=226]="ImUsed",ne[ne.MultipleChoices=300]="MultipleChoices",ne[ne.MovedPermanently=301]="MovedPermanently",ne[ne.Found=302]="Found",ne[ne.SeeOther=303]="SeeOther",ne[ne.NotModified=304]="NotModified",ne[ne.UseProxy=305]="UseProxy",ne[ne.Unused=306]="Unused",ne[ne.TemporaryRedirect=307]="TemporaryRedirect",ne[ne.PermanentRedirect=308]="PermanentRedirect",ne[ne.BadRequest=400]="BadRequest",ne[ne.Unauthorized=401]="Unauthorized",ne[ne.PaymentRequired=402]="PaymentRequired",ne[ne.Forbidden=403]="Forbidden",ne[ne.NotFound=404]="NotFound",ne[ne.MethodNotAllowed=405]="MethodNotAllowed",ne[ne.NotAcceptable=406]="NotAcceptable",ne[ne.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",ne[ne.RequestTimeout=408]="RequestTimeout",ne[ne.Conflict=409]="Conflict",ne[ne.Gone=410]="Gone",ne[ne.LengthRequired=411]="LengthRequired",ne[ne.PreconditionFailed=412]="PreconditionFailed",ne[ne.PayloadTooLarge=413]="PayloadTooLarge",ne[ne.UriTooLong=414]="UriTooLong",ne[ne.UnsupportedMediaType=415]="UnsupportedMediaType",ne[ne.RangeNotSatisfiable=416]="RangeNotSatisfiable",ne[ne.ExpectationFailed=417]="ExpectationFailed",ne[ne.ImATeapot=418]="ImATeapot",ne[ne.MisdirectedRequest=421]="MisdirectedRequest",ne[ne.UnprocessableEntity=422]="UnprocessableEntity",ne[ne.Locked=423]="Locked",ne[ne.FailedDependency=424]="FailedDependency",ne[ne.TooEarly=425]="TooEarly",ne[ne.UpgradeRequired=426]="UpgradeRequired",ne[ne.PreconditionRequired=428]="PreconditionRequired",ne[ne.TooManyRequests=429]="TooManyRequests",ne[ne.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",ne[ne.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",ne[ne.InternalServerError=500]="InternalServerError",ne[ne.NotImplemented=501]="NotImplemented",ne[ne.BadGateway=502]="BadGateway",ne[ne.ServiceUnavailable=503]="ServiceUnavailable",ne[ne.GatewayTimeout=504]="GatewayTimeout",ne[ne.HttpVersionNotSupported=505]="HttpVersionNotSupported",ne[ne.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",ne[ne.InsufficientStorage=507]="InsufficientStorage",ne[ne.LoopDetected=508]="LoopDetected",ne[ne.NotExtended=510]="NotExtended",ne[ne.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",ne}(ke||{});function Qe(ne,ye){return{body:ye,headers:ne.headers,context:ne.context,observe:ne.observe,params:ne.params,reportProgress:ne.reportProgress,responseType:ne.responseType,withCredentials:ne.withCredentials,transferCache:ne.transferCache}}let ct=(()=>{class ne{constructor(Ie){this.handler=Ie}request(Ie,pt,Xe={}){let Kt;if(Ie instanceof pn)Kt=Ie;else{let on,br;on=Xe.headers instanceof De?Xe.headers:new De(Xe.headers),Xe.params&&(br=Xe.params instanceof de?Xe.params:new de({fromObject:Xe.params})),Kt=new pn(Ie,pt,void 0!==Xe.body?Xe.body:null,{headers:on,context:Xe.context,params:br,reportProgress:Xe.reportProgress,responseType:Xe.responseType||"json",withCredentials:Xe.withCredentials,transferCache:Xe.transferCache})}const Ut=(0,M.of)(Kt).pipe((0,Pe.H)(on=>this.handler.handle(on)));if(Ie instanceof pn||"events"===Xe.observe)return Ut;const $n=Ut.pipe((0,B.p)(on=>on instanceof fn));switch(Xe.observe||"body"){case"body":switch(Kt.responseType){case"arraybuffer":return $n.pipe((0,Le.T)(on=>{if(null!==on.body&&!(on.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return on.body}));case"blob":return $n.pipe((0,Le.T)(on=>{if(null!==on.body&&!(on.body instanceof Blob))throw new Error("Response is not a Blob.");return on.body}));case"text":return $n.pipe((0,Le.T)(on=>{if(null!==on.body&&"string"!=typeof on.body)throw new Error("Response is not a string.");return on.body}));default:return $n.pipe((0,Le.T)(on=>on.body))}case"response":return $n;default:throw new Error(`Unreachable: unhandled observe type ${Xe.observe}}`)}}delete(Ie,pt={}){return this.request("DELETE",Ie,pt)}get(Ie,pt={}){return this.request("GET",Ie,pt)}head(Ie,pt={}){return this.request("HEAD",Ie,pt)}jsonp(Ie,pt){return this.request("JSONP",Ie,{params:(new de).append(pt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ie,pt={}){return this.request("OPTIONS",Ie,pt)}patch(Ie,pt,Xe={}){return this.request("PATCH",Ie,Qe(Xe,pt))}post(Ie,pt,Xe={}){return this.request("POST",Ie,Qe(Xe,pt))}put(Ie,pt,Xe={}){return this.request("PUT",Ie,Qe(Xe,pt))}static#e=this.\u0275fac=function(pt){return new(pt||ne)(V.KVO(He))};static#t=this.\u0275prov=V.jDH({token:ne,factory:ne.\u0275fac})}return ne})();function vn(ne,ye){return ye(ne)}function En(ne,ye){return(Ie,pt)=>ye.intercept(Ie,{handle:Xe=>ne(Xe,pt)})}const it=new V.nKC(""),yn=new V.nKC(""),Qn=new V.nKC(""),or=new V.nKC("");function St(){let ne=null;return(ye,Ie)=>{null===ne&&(ne=((0,V.WQX)(it,{optional:!0})??[]).reduceRight(En,vn));const pt=(0,V.WQX)(V.TgB),Xe=pt.add();return ne(ye,Ie).pipe((0,$e.j)(()=>pt.remove(Xe)))}}let Ot=(()=>{class ne extends He{constructor(Ie,pt){super(),this.backend=Ie,this.injector=pt,this.chain=null,this.pendingTasks=(0,V.WQX)(V.TgB);const Xe=(0,V.WQX)(or,{optional:!0});this.backend=Xe??Ie}handle(Ie){if(null===this.chain){const Xe=Array.from(new Set([...this.injector.get(yn),...this.injector.get(Qn,[])]));this.chain=Xe.reduceRight((Kt,Ut)=>function jn(ne,ye,Ie){return(pt,Xe)=>(0,V.N4e)(Ie,()=>ye(pt,Kt=>ne(Kt,Xe)))}(Kt,Ut,this.injector),vn)}const pt=this.pendingTasks.add();return this.chain(Ie,Xe=>this.backend.handle(Xe)).pipe((0,$e.j)(()=>this.pendingTasks.remove(pt)))}static#e=this.\u0275fac=function(pt){return new(pt||ne)(V.KVO(Tt),V.KVO(V.uvJ))};static#t=this.\u0275prov=V.jDH({token:ne,factory:ne.\u0275fac})}return ne})();const xi=/^\)\]\}',?\n/;let Di=(()=>{class ne{constructor(Ie){this.xhrFactory=Ie}handle(Ie){if("JSONP"===Ie.method)throw new V.wOt(-2800,!1);const pt=this.xhrFactory;return(pt.\u0275loadImpl?(0,se.H)(pt.\u0275loadImpl()):(0,M.of)(null)).pipe((0,ve.n)(()=>new w.c(Kt=>{const Ut=pt.build();if(Ut.open(Ie.method,Ie.urlWithParams),Ie.withCredentials&&(Ut.withCredentials=!0),Ie.headers.forEach((Cr,Nr)=>Ut.setRequestHeader(Cr,Nr.join(","))),Ie.headers.has("Accept")||Ut.setRequestHeader("Accept","application/json, text/plain, */*"),!Ie.headers.has("Content-Type")){const Cr=Ie.detectContentTypeHeader();null!==Cr&&Ut.setRequestHeader("Content-Type",Cr)}if(Ie.responseType){const Cr=Ie.responseType.toLowerCase();Ut.responseType="json"!==Cr?Cr:"text"}const $n=Ie.serializeBody();let on=null;const br=()=>{if(null!==on)return on;const Cr=Ut.statusText||"OK",Nr=new De(Ut.getAllResponseHeaders()),pi=function On(ne){return"responseURL"in ne&&ne.responseURL?ne.responseURL:/^X-Request-URL:/m.test(ne.getAllResponseHeaders())?ne.getResponseHeader("X-Request-URL"):null}(Ut)||Ie.url;return on=new xn({headers:Nr,status:Ut.status,statusText:Cr,url:pi}),on},si=()=>{let{headers:Cr,status:Nr,statusText:pi,url:Yn}=br(),kr=null;Nr!==ke.NoContent&&(kr=typeof Ut.response>"u"?Ut.responseText:Ut.response),0===Nr&&(Nr=kr?ke.Ok:0);let ui=Nr>=200&&Nr<300;if("json"===Ie.responseType&&"string"==typeof kr){const gi=kr;kr=kr.replace(xi,"");try{kr=""!==kr?JSON.parse(kr):null}catch(ri){kr=gi,ui&&(ui=!1,kr={error:ri,text:kr})}}ui?(Kt.next(new fn({body:kr,headers:Cr,status:Nr,statusText:pi,url:Yn||void 0})),Kt.complete()):Kt.error(new An({error:kr,headers:Cr,status:Nr,statusText:pi,url:Yn||void 0}))},yr=Cr=>{const{url:Nr}=br(),pi=new An({error:Cr,status:Ut.status||0,statusText:Ut.statusText||"Unknown Error",url:Nr||void 0});Kt.error(pi)};let Ai=!1;const ps=Cr=>{Ai||(Kt.next(br()),Ai=!0);let Nr={type:bn.DownloadProgress,loaded:Cr.loaded};Cr.lengthComputable&&(Nr.total=Cr.total),"text"===Ie.responseType&&Ut.responseText&&(Nr.partialText=Ut.responseText),Kt.next(Nr)},qi=Cr=>{let Nr={type:bn.UploadProgress,loaded:Cr.loaded};Cr.lengthComputable&&(Nr.total=Cr.total),Kt.next(Nr)};return Ut.addEventListener("load",si),Ut.addEventListener("error",yr),Ut.addEventListener("timeout",yr),Ut.addEventListener("abort",yr),Ie.reportProgress&&(Ut.addEventListener("progress",ps),null!==$n&&Ut.upload&&Ut.upload.addEventListener("progress",qi)),Ut.send($n),Kt.next({type:bn.Sent}),()=>{Ut.removeEventListener("error",yr),Ut.removeEventListener("abort",yr),Ut.removeEventListener("load",si),Ut.removeEventListener("timeout",yr),Ie.reportProgress&&(Ut.removeEventListener("progress",ps),null!==$n&&Ut.upload&&Ut.upload.removeEventListener("progress",qi)),Ut.readyState!==Ut.DONE&&Ut.abort()}})))}static#e=this.\u0275fac=function(pt){return new(pt||ne)(V.KVO(_e.N0))};static#t=this.\u0275prov=V.jDH({token:ne,factory:ne.\u0275fac})}return ne})();const Ht=new V.nKC(""),_r=new V.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Xt=new V.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Kr{}let Ln=(()=>{class ne{constructor(Ie,pt,Xe){this.doc=Ie,this.platform=pt,this.cookieName=Xe,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ie=this.doc.cookie||"";return Ie!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,_e._b)(Ie,this.cookieName),this.lastCookieString=Ie),this.lastToken}static#e=this.\u0275fac=function(pt){return new(pt||ne)(V.KVO(_e.qQ),V.KVO(V.Agw),V.KVO(_r))};static#t=this.\u0275prov=V.jDH({token:ne,factory:ne.\u0275fac})}return ne})();function Yr(ne,ye){const Ie=ne.url.toLowerCase();if(!(0,V.WQX)(Ht)||"GET"===ne.method||"HEAD"===ne.method||Ie.startsWith("http://")||Ie.startsWith("https://"))return ye(ne);const pt=(0,V.WQX)(Kr).getToken(),Xe=(0,V.WQX)(Xt);return null!=pt&&!ne.headers.has(Xe)&&(ne=ne.clone({headers:ne.headers.set(Xe,pt)})),ye(ne)}var we=function(ne){return ne[ne.Interceptors=0]="Interceptors",ne[ne.LegacyInterceptors=1]="LegacyInterceptors",ne[ne.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ne[ne.NoXsrfProtection=3]="NoXsrfProtection",ne[ne.JsonpSupport=4]="JsonpSupport",ne[ne.RequestsMadeViaParent=5]="RequestsMadeViaParent",ne[ne.Fetch=6]="Fetch",ne}(we||{});function Ke(...ne){const ye=[ct,Di,Ot,{provide:He,useExisting:Ot},{provide:Tt,useExisting:Di},{provide:yn,useValue:Yr,multi:!0},{provide:Ht,useValue:!0},{provide:Kr,useClass:Ln}];for(const Ie of ne)ye.push(...Ie.\u0275providers);return(0,V.EmA)(ye)}const ge=new V.nKC("");function q(){return function Ce(ne,ye){return{\u0275kind:ne,\u0275providers:ye}}(we.LegacyInterceptors,[{provide:ge,useFactory:St},{provide:yn,useExisting:ge,multi:!0}])}let Wn=(()=>{class ne{static#e=this.\u0275fac=function(pt){return new(pt||ne)};static#t=this.\u0275mod=V.$C({type:ne});static#n=this.\u0275inj=V.G2t({providers:[Ke(q())]})}return ne})()},4438:(Zt,qe,x)=>{x.d(qe,{bc$:()=>bg,iLQ:()=>MC,sZ2:()=>wf,hnV:()=>yD,Hbi:()=>tR,o8S:()=>yd,BIS:()=>dE,gRc:()=>RD,Ql9:()=>bM,Ocv:()=>kM,Z63:()=>Lo,aKT:()=>fc,uvJ:()=>Si,zcH:()=>bo,bkB:()=>Ka,$GK:()=>sr,nKC:()=>Xe,zZn:()=>ao,_q3:()=>LC,MKu:()=>UC,xe9:()=>Gv,Co$:()=>t_,Vns:()=>Tu,SKi:()=>Cs,Xx1:()=>ss,Agw:()=>Df,PLl:()=>Tf,sFG:()=>_u,_9s:()=>qy,czy:()=>qa,kdw:()=>os,C4Q:()=>Th,NYb:()=>EM,giA:()=>mD,xvI:()=>qP,RxE:()=>cD,c1b:()=>$c,gXe:()=>ls,mal:()=>yo,L39:()=>MR,Ol2:()=>Rt,w6W:()=>gd,oH4:()=>bD,Rfq:()=>Yr,WQX:()=>ln,naY:()=>BM,QuC:()=>Yi,EmA:()=>Y,fpN:()=>eR,HJs:()=>LR,N4e:()=>Mn,O8t:()=>OR,An2:()=>je,H3F:()=>uD,H8p:()=>ci,KH2:()=>Bp,TgB:()=>Xa,wOt:()=>mt,WHO:()=>pD,e01:()=>gD,H5H:()=>uC,Zy3:()=>ni,mq5:()=>Cw,JZv:()=>On,LfX:()=>ut,plB:()=>yu,jNT:()=>SC,zjR:()=>_D,TL$:()=>Ag,Tbb:()=>qt,Vt3:()=>Ep,Mj6:()=>_s,GFd:()=>sa,OA$:()=>wt,Jv_:()=>xT,aNF:()=>kT,R7$:()=>KE,BMQ:()=>qI,AVh:()=>eC,wni:()=>uT,VBU:()=>ec,FsC:()=>Do,jDH:()=>ar,G2t:()=>us,$C:()=>To,EJ8:()=>fo,rXU:()=>td,nrm:()=>oC,k0s:()=>Nv,j41:()=>Ov,RV6:()=>vw,xGo:()=>Fd,KVO:()=>li,kS0:()=>qs,QTQ:()=>Ty,bIt:()=>hC,lsd:()=>hT,XpG:()=>Zw,nI1:()=>HT,bMT:()=>GT,i5U:()=>zT,brH:()=>WT,Y8G:()=>JI,mGM:()=>dT,Njj:()=>Vu,eBV:()=>Ol,B4B:()=>Nf,n$t:()=>ay,wjB:()=>FT,DNE:()=>Cp,EFF:()=>CT,JRh:()=>gC,SpI:()=>Lv,DH7:()=>OT,mxI:()=>_C,R50:()=>mC,GBs:()=>lT}),x(467);let M=null,se=1;const Pe=Symbol("SIGNAL");function B(e){const n=M;return M=e,n}function De(e){if((!Ve(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==se)){if(!e.producerMustRecompute(e)&&!gt(e))return e.dirty=!1,void(e.lastCleanEpoch=se);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=se}}function gt(e){Ye(e);for(let n=0;n<e.producerNode.length;n++){const i=e.producerNode[n],s=e.producerLastReadVersion[n];if(s!==i.version||(De(i),s!==i.version))return!0}return!1}function ae(e,n){if(function et(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),Ye(e),1===e.liveConsumerNode.length)for(let s=0;s<e.producerNode.length;s++)ae(e.producerNode[s],e.producerIndexOfThis[s]);const i=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[i],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[i],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const s=e.liveConsumerIndexOfThis[n],c=e.liveConsumerNode[n];Ye(c),c.producerIndexOfThis[s]=n}}function Ve(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ye(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let xn=null;var jn=x(1413),it=x(8359),yn=x(4412),Qn=x(6354);const St="https://g.co/ng/security#xss";class mt extends Error{constructor(n,i){super(ni(n,i)),this.code=n}}function ni(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}function wn(e){return{toString:e}.toString()}const Vr="__parameters__";function Or(e,n,i){return wn(()=>{const s=function Gi(e){return function(...i){if(e){const s=e(...i);for(const c in s)this[c]=s[c]}}}(n);function c(...l){if(this instanceof c)return s.apply(this,l),this;const p=new c(...l);return y.annotation=p,y;function y(S,U,X){const le=S.hasOwnProperty(Vr)?S[Vr]:Object.defineProperty(S,Vr,{value:[]})[Vr];for(;le.length<=X;)le.push(null);return(le[X]=le[X]||[]).push(p),S}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=e,c.annotationCls=c,c})}const On=globalThis;function Vn(e){for(let n in e)if(e[n]===Vn)return n;throw Error("Could not find renamed property on target object.")}function _r(e,n){for(const i in n)n.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=n[i])}function qt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(qt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function Xt(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Ln=Vn({__forward_ref__:Vn});function Yr(e){return e.__forward_ref__=Yr,e.toString=function(){return qt(this())},e}function xe(e){return we(e)?e():e}function we(e){return"function"==typeof e&&e.hasOwnProperty(Ln)&&e.__forward_ref__===Yr}function ar(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function us(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ki(e){return Je(e,ne)||Je(e,Ie)}function ut(e){return null!==Ki(e)}function Je(e,n){return e.hasOwnProperty(n)?e[n]:null}function nn(e){return e&&(e.hasOwnProperty(ye)||e.hasOwnProperty(pt))?e[ye]:null}const ne=Vn({\u0275prov:Vn}),ye=Vn({\u0275inj:Vn}),Ie=Vn({ngInjectableDef:Vn}),pt=Vn({ngInjectorDef:Vn});class Xe{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=ar({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Cr(e){return e&&!!e.\u0275providers}const Nr=Vn({\u0275cmp:Vn}),pi=Vn({\u0275dir:Vn}),Yn=Vn({\u0275pipe:Vn}),kr=Vn({\u0275mod:Vn}),ui=Vn({\u0275fac:Vn}),gi=Vn({__NG_ELEMENT_ID__:Vn}),ri=Vn({__NG_ENV_ID__:Vn});function Nn(e){return"string"==typeof e?e:null==e?"":String(e)}function ko(e,n){throw new mt(-201,!1)}var sr=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(sr||{});let qo;function Js(){return qo}function wr(e){const n=qo;return qo=e,n}function ws(e,n,i){const s=Ki(e);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:i&sr.Optional?null:void 0!==n?n:void ko()}const gs={},Sr="__NG_DI_FLAG__",Ts="ngTempTokenPath",Tr=/\n/gm,ks="__source";let Zr;function oi(e){const n=Zr;return Zr=e,n}function Fr(e,n=sr.Default){if(void 0===Zr)throw new mt(-203,!1);return null===Zr?ws(e,void 0,n):Zr.get(e,n&sr.Optional?null:void 0,n)}function li(e,n=sr.Default){return(Js()||Fr)(xe(e),n)}function ln(e,n=sr.Default){return li(e,mi(n))}function mi(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Ds(e){const n=[];for(let i=0;i<e.length;i++){const s=xe(e[i]);if(Array.isArray(s)){if(0===s.length)throw new mt(900,!1);let c,l=sr.Default;for(let p=0;p<s.length;p++){const y=s[p],S=Vs(y);"number"==typeof S?-1===S?c=y.token:l|=S:c=y}n.push(li(c,l))}else n.push(li(s))}return n}function Fs(e,n){return e[Sr]=n,e.prototype[Sr]=n,e}function Vs(e){return e[Sr]}const ss=Fs(Or("Optional"),8),os=Fs(Or("SkipSelf"),4);function zi(e,n){return e.hasOwnProperty(ui)?e[ui]:null}function Fi(e,n){e.forEach(i=>Array.isArray(i)?Fi(i,n):n(i))}function co(e,n,i){n>=e.length?e.push(i):e.splice(n,0,i)}function uo(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function qr(e,n,i){let s=ii(e,n);return s>=0?e[1|s]=i:(s=~s,function oa(e,n,i,s){let c=e.length;if(c==n)e.push(i,s);else if(1===c)e.push(s,e[0]),e[0]=i;else{for(c--,e.push(e[c-1],e[c]);c>n;)e[c]=e[c-2],c--;e[n]=i,e[n+1]=s}}(e,s,n,i)),s}function bs(e,n){const i=ii(e,n);if(i>=0)return e[1|i]}function ii(e,n){return function Qo(e,n,i){let s=0,c=e.length>>i;for(;c!==s;){const l=s+(c-s>>1),p=e[l<<i];if(n===p)return l<<i;p>n?c=l:s=l+1}return~(c<<i)}(e,n,1)}const Ls={},vr=[],Lo=new Xe(""),Va=new Xe("",-1),Ur=new Xe("");class ho{get(n,i=gs){if(i===gs){const s=new Error(`NullInjectorError: No provider for ${qt(n)}!`);throw s.name="NullInjectorError",s}return i}}var lr=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(lr||{}),ls=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(ls||{}),_s=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(_s||{});function ds(e,n,i){let s=e.length;for(;;){const c=e.indexOf(n,i);if(-1===c)return c;if(0===c||e.charCodeAt(c-1)<=32){const l=n.length;if(c+l===s||e.charCodeAt(c+l)<=32)return c}i=c+1}}function ai(e,n,i){let s=0;for(;s<i.length;){const c=i[s];if("number"==typeof c){if(0!==c)break;s++;const l=i[s++],p=i[s++],y=i[s++];e.setAttribute(n,p,y,l)}else{const l=c,p=i[++s];K(l)?e.setProperty(n,l,p):e.setAttribute(n,l,p),s++}}return s}function G(e){return 3===e||4===e||6===e}function K(e){return 64===e.charCodeAt(0)}function O(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let i=-1;for(let s=0;s<n.length;s++){const c=n[s];"number"==typeof c?i=c:0===i||ee(e,i,c,null,-1===i||2===i?n[++s]:null)}}return e}function ee(e,n,i,s,c){let l=0,p=e.length;if(-1===n)p=-1;else for(;l<e.length;){const y=e[l++];if("number"==typeof y){if(y===n){p=-1;break}if(y>n){p=l-1;break}}}for(;l<e.length;){const y=e[l];if("number"==typeof y)break;if(y===i){if(null===s)return void(null!==c&&(e[l+1]=c));if(s===e[l+1])return void(e[l+2]=c)}l++,null!==s&&l++,null!==c&&l++}-1!==p&&(e.splice(p,0,n),l=p+1),e.splice(l++,0,i),null!==s&&e.splice(l++,0,s),null!==c&&e.splice(l++,0,c)}const Se="ng-template";function sn(e,n,i,s){let c=0;if(s){for(;c<n.length&&"string"==typeof n[c];c+=2)if("class"===n[c]&&-1!==ds(n[c+1].toLowerCase(),i,0))return!0}else if(tr(e))return!1;if(c=n.indexOf(1,c),c>-1){let l;for(;++c<n.length&&"string"==typeof(l=n[c]);)if(l.toLowerCase()===i)return!0}return!1}function tr(e){return 4===e.type&&e.value!==Se}function as(e,n,i){return n===(4!==e.type||i?e.value:Se)}function Us(e,n,i){let s=4;const c=e.attrs,l=null!==c?function Za(e){for(let n=0;n<e.length;n++)if(G(e[n]))return n;return e.length}(c):0;let p=!1;for(let y=0;y<n.length;y++){const S=n[y];if("number"!=typeof S){if(!p)if(4&s){if(s=2|1&s,""!==S&&!as(e,S,i)||""===S&&1===n.length){if(bi(s))return!1;p=!0}}else if(8&s){if(null===c||!sn(e,c,S,i)){if(bi(s))return!1;p=!0}}else{const U=n[++y],X=no(S,c,tr(e),i);if(-1===X){if(bi(s))return!1;p=!0;continue}if(""!==U){let le;if(le=X>l?"":c[X+1].toLowerCase(),2&s&&U!==le){if(bi(s))return!1;p=!0}}}}else{if(!p&&!bi(s)&&!bi(S))return!1;if(p&&bi(S))continue;p=!1,s=S|1&s}}return bi(s)||p}function bi(e){return!(1&e)}function no(e,n,i,s){if(null===n)return-1;let c=0;if(s||!i){let l=!1;for(;c<n.length;){const p=n[c];if(p===e)return c;if(3===p||6===p)l=!0;else{if(1===p||2===p){let y=n[++c];for(;"string"==typeof y;)y=n[++c];continue}if(4===p)break;if(0===p){c+=4;continue}}c+=l?1:2}return-1}return function Br(e,n){let i=e.indexOf(4);if(i>-1)for(i++;i<e.length;){const s=e[i];if("number"==typeof s)return-1;if(s===n)return i;i++}return-1}(n,e)}function aa(e,n,i=!1){for(let s=0;s<n.length;s++)if(Us(e,n[s],i))return!0;return!1}function ca(e,n){return e?":not("+n.trim()+")":n}function Ia(e){let n=e[0],i=1,s=2,c="",l=!1;for(;i<e.length;){let p=e[i];if("string"==typeof p)if(2&s){const y=e[++i];c+="["+p+(y.length>0?'="'+y+'"':"")+"]"}else 8&s?c+="."+p:4&s&&(c+=" "+p);else""!==c&&!bi(p)&&(n+=ca(l,c),c=""),s=p,l=l||!bi(s);i++}return""!==c&&(n+=ca(l,c)),n}function ec(e){return wn(()=>{const n=la(e),i={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===lr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||ls.Emulated,styles:e.styles||vr,_:null,schemas:e.schemas||null,tView:null,id:""};Z(i);const s=e.dependencies;return i.directiveDefs=I(s,!1),i.pipeDefs=I(s,!0),i.id=function L(e){let n=0;const i=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const c of i)n=Math.imul(31,n)+c.charCodeAt(0)|0;return n+=2147483648,"c"+n}(i),i})}function wa(e){return dr(e)||Qr(e)}function Bo(e){return null!==e}function To(e){return wn(()=>({type:e.type,bootstrap:e.bootstrap||vr,declarations:e.declarations||vr,imports:e.imports||vr,exports:e.exports||vr,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function ua(e,n){if(null==e)return Ls;const i={};for(const s in e)if(e.hasOwnProperty(s)){const c=e[s];let l,p,y=_s.None;Array.isArray(c)?(y=c[0],l=c[1],p=c[2]??l):(l=c,p=c),n?(i[l]=y!==_s.None?[s,y]:s,n[l]=p):i[l]=s}return i}function Do(e){return wn(()=>{const n=la(e);return Z(n),n})}function fo(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function dr(e){return e[Nr]||null}function Qr(e){return e[pi]||null}function _i(e){return e[Yn]||null}function Yi(e){const n=dr(e)||Qr(e)||_i(e);return null!==n&&n.standalone}function ji(e,n){const i=e[kr]||null;if(!i&&!0===n)throw new Error(`Type ${qt(e)} does not have '\u0275mod' property.`);return i}function la(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||Ls,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||vr,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ua(e.inputs,n),outputs:ua(e.outputs),debugInfo:null}}function Z(e){e.features?.forEach(n=>n(e))}function I(e,n){if(!e)return null;const i=n?_i:wa;return()=>("function"==typeof e?e():e).map(s=>i(s)).filter(Bo)}function Y(e){return{\u0275providers:e}}function fe(...e){return{\u0275providers:Ae(0,e),\u0275fromNgModule:!0}}function Ae(e,...n){const i=[],s=new Set;let c;const l=p=>{i.push(p)};return Fi(n,p=>{const y=p;lt(y,l,[],s)&&(c||=[],c.push(y))}),void 0!==c&&Ue(c,l),i}function Ue(e,n){for(let i=0;i<e.length;i++){const{ngModule:s,providers:c}=e[i];cn(c,l=>{n(l,s)})}}function lt(e,n,i,s){if(!(e=xe(e)))return!1;let c=null,l=nn(e);const p=!l&&dr(e);if(l||p){if(p&&!p.standalone)return!1;c=e}else{const S=e.ngModule;if(l=nn(S),!l)return!1;c=S}const y=s.has(c);if(p){if(y)return!1;if(s.add(c),p.dependencies){const S="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const U of S)lt(U,n,i,s)}}else{if(!l)return!1;{if(null!=l.imports&&!y){let U;s.add(c);try{Fi(l.imports,X=>{lt(X,n,i,s)&&(U||=[],U.push(X))})}finally{}void 0!==U&&Ue(U,n)}if(!y){const U=zi(c)||(()=>new c);n({provide:c,useFactory:U,deps:vr},c),n({provide:Ur,useValue:c,multi:!0},c),n({provide:Lo,useValue:()=>li(c),multi:!0},c)}const S=l.providers;if(null!=S&&!y){const U=e;cn(S,X=>{n(X,U)})}}}return c!==e&&void 0!==e.providers}function cn(e,n){for(let i of e)Cr(i)&&(i=i.\u0275providers),Array.isArray(i)?cn(i,n):n(i)}const gn=Vn({provide:String,useValue:Vn});function Ir(e){return null!==e&&"object"==typeof e&&gn in e}function Dn(e){return"function"==typeof e}const ci=new Xe(""),yi={},di={};let Vi;function Ss(){return void 0===Vi&&(Vi=new ho),Vi}class Si{}class $i extends Si{get destroyed(){return this._destroyed}constructor(n,i,s,c){super(),this.parent=i,this.source=s,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,In(n,p=>this.processProvider(p)),this.records.set(Va,vs(void 0,this)),c.has("environment")&&this.records.set(Si,vs(void 0,this));const l=this.records.get(ci);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(Ur,vr,sr.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=B(null);try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const i=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of i)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),B(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=oi(this),s=wr(void 0);try{return n()}finally{oi(i),wr(s)}}get(n,i=gs,s=sr.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(ri))return n[ri](this);s=mi(s);const l=oi(this),p=wr(void 0);try{if(!(s&sr.SkipSelf)){let S=this.records.get(n);if(void 0===S){const U=function tc(e){return"function"==typeof e||"object"==typeof e&&e instanceof Xe}(n)&&Ki(n);S=U&&this.injectableDefInScope(U)?vs(Un(n),yi):null,this.records.set(n,S)}if(null!=S)return this.hydrate(n,S)}return(s&sr.Self?Ss():this.parent).get(n,i=s&sr.Optional&&i===gs?null:i)}catch(y){if("NullInjectorError"===y.name){if((y[Ts]=y[Ts]||[]).unshift(qt(n)),l)throw y;return function eo(e,n,i,s){const c=e[Ts];throw n[ks]&&c.unshift(n[ks]),e.message=function ki(e,n,i,s=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let c=qt(n);if(Array.isArray(n))c=n.map(qt).join(" -> ");else if("object"==typeof n){let l=[];for(let p in n)if(n.hasOwnProperty(p)){let y=n[p];l.push(p+":"+("string"==typeof y?JSON.stringify(y):qt(y)))}c=`{${l.join(", ")}}`}return`${i}${s?"("+s+")":""}[${c}]: ${e.replace(Tr,"\n  ")}`}("\n"+e.message,c,i,s),e.ngTokenPath=c,e[Ts]=null,e}(y,n,"R3InjectorError",this.source)}throw y}finally{wr(p),oi(l)}}resolveInjectorInitializers(){const n=B(null),i=oi(this),s=wr(void 0);try{const l=this.get(Lo,vr,sr.Self);for(const p of l)p()}finally{oi(i),wr(s),B(n)}}toString(){const n=[],i=this.records;for(const s of i.keys())n.push(qt(s));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new mt(205,!1)}processProvider(n){let i=Dn(n=xe(n))?n:xe(n&&n.provide);const s=function po(e){return Ir(e)?vs(void 0,e.useValue):vs(Ta(e),yi)}(n);if(!Dn(n)&&!0===n.multi){let c=this.records.get(i);c||(c=vs(void 0,yi,!0),c.factory=()=>Ds(c.multi),this.records.set(i,c)),i=n,c.multi.push(n)}this.records.set(i,s)}hydrate(n,i){const s=B(null);try{return i.value===yi&&(i.value=di,i.value=i.factory()),"object"==typeof i.value&&i.value&&function Aa(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{B(s)}}injectableDefInScope(n){if(!n.providedIn)return!1;const i=xe(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function Un(e){const n=Ki(e),i=null!==n?n.factory:zi(e);if(null!==i)return i;if(e instanceof Xe)throw new mt(204,!1);if(e instanceof Function)return function Xo(e){if(e.length>0)throw new mt(204,!1);const i=function xt(e){return e&&(e[ne]||e[Ie])||null}(e);return null!==i?()=>i.factory(e):()=>new e}(e);throw new mt(204,!1)}function Ta(e,n,i){let s;if(Dn(e)){const c=xe(e);return zi(c)||Un(c)}if(Ir(e))s=()=>xe(e.useValue);else if(function Hn(e){return!(!e||!e.useFactory)}(e))s=()=>e.useFactory(...Ds(e.deps||[]));else if(function Kn(e){return!(!e||!e.useExisting)}(e))s=()=>li(xe(e.useExisting));else{const c=xe(e&&(e.useClass||e.provide));if(!function Da(e){return!!e.deps}(e))return zi(c)||Un(c);s=()=>new c(...Ds(e.deps))}return s}function vs(e,n,i=!1){return{factory:e,value:n,multi:i?[]:void 0}}function In(e,n){for(const i of e)Array.isArray(i)?In(i,n):i&&Cr(i)?In(i.\u0275providers,n):n(i)}function Mn(e,n){e instanceof $i&&e.assertNotDestroyed();const s=oi(e),c=wr(void 0);try{return n()}finally{oi(s),wr(c)}}function Rn(){return void 0!==Js()||null!=function Zs(){return Zr}()}const Xr=0,Qt=1,_n=2,mr=3,Mi=4,Ei=5,cs=6,Gs=7,Ii=8,Gr=9,go=10,nr=11,jo=12,El=13,hi=14,Gn=15,Dc=16,nc=17,$o=18,da=19,Il=20,Yo=21,rc=22,Es=23,Jn=25,ic=1,Ao=7,Sa=9,Ri=10;var Su=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Su||{});function Ps(e){return Array.isArray(e)&&"object"==typeof e[ic]}function Ms(e){return Array.isArray(e)&&!0===e[ic]}function Kc(e){return!!(4&e.flags)}function Jo(e){return e.componentOffset>-1}function qc(e){return!(1&~e.flags)}function ro(e){return!!e.template}function La(e){return!!(512&e[_n])}class te{constructor(n,i,s){this.previousValue=n,this.currentValue=i,this.firstChange=s}isFirstChange(){return this.firstChange}}function Te(e,n,i,s){null!==n?n.applyValueToInputSignal(n,s):e[i]=s}function wt(){return dt}function dt(e){return e.type.prototype.ngOnChanges&&(e.setInput=rr),dn}function dn(){const e=Hi(this),n=e?.current;if(n){const i=e.previous;if(i===Ls)e.previous=n;else for(let s in n)i[s]=n[s];e.current=null,this.ngOnChanges(n)}}function rr(e,n,i,s,c){const l=this.declaredInputs[s],p=Hi(e)||function Ac(e,n){return e[pr]=n}(e,{previous:Ls,current:null}),y=p.current||(p.current={}),S=p.previous,U=S[l];y[l]=new te(U&&U.currentValue,i,S===Ls),Te(e,n,c,i)}wt.ngInherit=!0;const pr="__ngSimpleChanges__";function Hi(e){return e[pr]||null}const zs=function(e,n,i){};let ku=!1;function Mr(e){for(;Array.isArray(e);)e=e[Xr];return e}function Jc(e,n){return Mr(n[e])}function Ws(e,n){return Mr(n[e.index])}function oc(e,n){return e.data[n]}function ac(e,n){return e[n]}function Go(e,n){const i=n[e];return Ps(i)?i:i[Xr]}function Zc(e){return!(128&~e[_n])}function io(e,n){return null==n?null:e[n]}function tf(e){e[nc]=0}function $a(e){1024&e[_n]||(e[_n]|=1024,Zc(e)&&Fu(e))}function bl(e){return!!(9216&e[_n]||e[Es]?.dirty)}function bc(e){e[go].changeDetectionScheduler?.notify(1),bl(e)?Fu(e):64&e[_n]&&(function Ba(){return ku}()?(e[_n]|=1024,Fu(e)):e[go].changeDetectionScheduler?.notify())}function Fu(e){e[go].changeDetectionScheduler?.notify();let n=_o(e);for(;null!==n&&!(8192&n[_n])&&(n[_n]|=8192,Zc(n));)n=_o(n)}function Sl(e,n){if(!(256&~e[_n]))throw new mt(911,!1);null===e[Yo]&&(e[Yo]=[]),e[Yo].push(n)}function _o(e){const n=e[mr];return Ms(n)?n[mr]:n}const qn={lFrame:cf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Pl(){return qn.bindingsEnabled}function kt(){return qn.lFrame.lView}function Rr(){return qn.lFrame.tView}function Ol(e){return qn.lFrame.contextLView=e,e[Ii]}function Vu(e){return qn.lFrame.contextLView=null,e}function jr(){let e=Sc();for(;null!==e&&64===e.type;)e=e.parent;return e}function Sc(){return qn.lFrame.currentTNode}function fa(e,n){const i=qn.lFrame;i.currentTNode=e,i.isParent=n}function Lu(){return qn.lFrame.isParent}function Bs(){const e=qn.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function ta(){return qn.lFrame.bindingIndex++}function Pd(e,n){const i=qn.lFrame;i.bindingIndex=i.bindingRootIndex=e,Rc(n)}function Rc(e){qn.lFrame.currentDirectiveIndex=e}function Nl(){return qn.lFrame.currentQueryIndex}function xl(e){qn.lFrame.currentQueryIndex=e}function sf(e){const n=e[Qt];return 2===n.type?n.declTNode:1===n.type?e[Ei]:null}function af(e,n,i){if(i&sr.SkipSelf){let c=n,l=e;for(;!(c=c.parent,null!==c||i&sr.Host||(c=sf(l),null===c||(l=l[hi],10&c.type))););if(null===c)return!1;n=c,e=l}const s=qn.lFrame=Rd();return s.currentTNode=n,s.lView=e,!0}function tu(e){const n=Rd(),i=e[Qt];qn.lFrame=n,n.currentTNode=i.firstChild,n.lView=e,n.tView=i,n.contextLView=e,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function Rd(){const e=qn.lFrame,n=null===e?null:e.child;return null===n?cf(e):n}function cf(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Uu(){const e=qn.lFrame;return qn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const uf=Uu;function kl(){const e=Uu();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Is(){return qn.lFrame.selectedIndex}function uc(e){qn.lFrame.selectedIndex=e}function Oi(){const e=qn.lFrame;return oc(e.tView,e.selectedIndex)}let nu=!0;function Ji(){return nu}function Pa(e){nu=e}function Fl(e,n){for(let i=n.directiveStart,s=n.directiveEnd;i<s;i++){const l=e.data[i].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:y,ngAfterViewInit:S,ngAfterViewChecked:U,ngOnDestroy:X}=l;p&&(e.contentHooks??=[]).push(-i,p),y&&((e.contentHooks??=[]).push(i,y),(e.contentCheckHooks??=[]).push(i,y)),S&&(e.viewHooks??=[]).push(-i,S),U&&((e.viewHooks??=[]).push(i,U),(e.viewCheckHooks??=[]).push(i,U)),null!=X&&(e.destroyHooks??=[]).push(i,X)}}function Bu(e,n,i){$u(e,n,3,i)}function Nc(e,n,i,s){(3&e[_n])===i&&$u(e,n,i,s)}function ju(e,n){let i=e[_n];(3&i)===n&&(i&=16383,i+=1,e[_n]=i)}function $u(e,n,i,s){const l=s??-1,p=n.length-1;let y=0;for(let S=void 0!==s?65535&e[nc]:0;S<p;S++)if("number"==typeof n[S+1]){if(y=n[S],null!=s&&y>=s)break}else n[S]<0&&(e[nc]+=65536),(y<l||-1==l)&&(Nd(e,i,n,S),e[nc]=(4294901760&e[nc])+S+2),S++}function Vl(e,n){zs(4,e,n);const i=B(null);try{n.call(e)}finally{B(i),zs(5,e,n)}}function Nd(e,n,i,s){const c=i[s]<0,l=i[s+1],y=e[c?-i[s]:i[s]];c?e[_n]>>14<e[nc]>>16&&(3&e[_n])===n&&(e[_n]+=16384,Vl(y,l)):Vl(y,l)}const lc=-1;class Ma{constructor(n,i,s){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=s}}function Bl(e){return e!==lc}function ru(e){return 32767&e}function xc(e,n){let i=function Zp(e){return e>>16}(e),s=n;for(;i>0;)s=s[hi],i--;return s}let E=!0;function h(e){const n=E;return E=e,n}const A=255,W=5;let oe=0;const Fe={};function jt(e,n){const i=zn(e,n);if(-1!==i)return i;const s=n[Qt];s.firstCreatePass&&(e.injectorIndex=n.length,Cn(s.data,e),Cn(n,null),Cn(s.blueprint,null));const c=Dr(e,n),l=e.injectorIndex;if(Bl(c)){const p=ru(c),y=xc(c,n),S=y[Qt].data;for(let U=0;U<8;U++)n[l+U]=y[p+U]|S[p+U]}return n[l+8]=c,l}function Cn(e,n){e.push(0,0,0,0,0,0,0,0,n)}function zn(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Dr(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let i=0,s=null,c=n;for(;null!==c;){if(s=w_(c),null===s)return lc;if(i++,c=c[hi],-1!==s.injectorIndex)return s.injectorIndex|i<<16}return lc}function oo(e,n,i){!function Dt(e,n,i){let s;"string"==typeof i?s=i.charCodeAt(0)||0:i.hasOwnProperty(gi)&&(s=i[gi]),null==s&&(s=i[gi]=oe++);const c=s&A;n.data[e+(c>>W)]|=1<<c}(e,n,i)}function Hu(e,n,i){if(i&sr.Optional||void 0!==e)return e;ko()}function Gu(e,n,i,s){if(i&sr.Optional&&void 0===s&&(s=null),!(i&(sr.Self|sr.Host))){const c=e[Gr],l=wr(void 0);try{return c?c.get(n,s,i&sr.Optional):ws(n,s,i&sr.Optional)}finally{wr(l)}}return Hu(s,0,i)}function zu(e,n,i,s=sr.Default,c){if(null!==e){if(2048&n[_n]&&!(s&sr.Self)){const p=function Jv(e,n,i,s,c){let l=e,p=n;for(;null!==l&&null!==p&&2048&p[_n]&&!(512&p[_n]);){const y=jl(l,p,i,s|sr.Self,Fe);if(y!==Fe)return y;let S=l.parent;if(!S){const U=p[Il];if(U){const X=U.get(i,Fe,s);if(X!==Fe)return X}S=w_(p),p=p[hi]}l=S}return c}(e,n,i,s,Fe);if(p!==Fe)return p}const l=jl(e,n,i,s,Fe);if(l!==Fe)return l}return Gu(n,i,s,c)}function jl(e,n,i,s,c){const l=function Wu(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(gi)?e[gi]:void 0;return"number"==typeof n?n>=0?n&A:C_:n}(i);if("function"==typeof l){if(!af(n,e,s))return s&sr.Host?Hu(c,0,s):Gu(n,i,s,c);try{let p;if(p=l(s),null!=p||s&sr.Optional)return p;ko()}finally{uf()}}else if("number"==typeof l){let p=null,y=zn(e,n),S=lc,U=s&sr.Host?n[Gn][Ei]:null;for((-1===y||s&sr.SkipSelf)&&(S=-1===y?Dr(e,n):n[y+8],S!==lc&&Ku(s,!1)?(p=n[Qt],y=ru(S),n=xc(S,n)):y=-1);-1!==y;){const X=n[Qt];if(iu(l,y,X.data)){const le=$l(y,n,i,p,s,U);if(le!==Fe)return le}S=n[y+8],S!==lc&&Ku(s,n[Qt].data[y+8]===U)&&iu(l,y,n)?(p=X,y=ru(S),n=xc(S,n)):y=-1}}return c}function $l(e,n,i,s,c,l){const p=n[Qt],y=p.data[e+8],X=za(y,p,i,null==s?Jo(y)&&E:s!=p&&!!(3&y.type),c&sr.Host&&l===y);return null!==X?na(n,p,X,y):Fe}function za(e,n,i,s,c){const l=e.providerIndexes,p=n.data,y=1048575&l,S=e.directiveStart,X=l>>20,Oe=c?y+X:e.directiveEnd;for(let ze=s?y:y+X;ze<Oe;ze++){const ft=p[ze];if(ze<S&&i===ft||ze>=S&&ft.type===i)return ze}if(c){const ze=p[S];if(ze&&ro(ze)&&ze.type===i)return S}return null}function na(e,n,i,s){let c=e[i];const l=n.data;if(function Ll(e){return e instanceof Ma}(c)){const p=c;p.resolving&&function wo(e,n){throw n&&n.join(" > "),new mt(-200,e)}(function cr(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Nn(e)}(l[i]));const y=h(p.canSeeViewProviders);p.resolving=!0;const U=p.injectImpl?wr(p.injectImpl):null;af(e,s,sr.Default);try{c=e[i]=p.factory(void 0,l,e,s),n.firstCreatePass&&i>=s.directiveStart&&function Od(e,n,i){const{ngOnChanges:s,ngOnInit:c,ngDoCheck:l}=n.type.prototype;if(s){const p=dt(n);(i.preOrderHooks??=[]).push(e,p),(i.preOrderCheckHooks??=[]).push(e,p)}c&&(i.preOrderHooks??=[]).push(0-e,c),l&&((i.preOrderHooks??=[]).push(e,l),(i.preOrderCheckHooks??=[]).push(e,l))}(i,l[i],n)}finally{null!==U&&wr(U),h(y),p.resolving=!1,uf()}}return c}function iu(e,n,i){return!!(i[n+(e>>W)]&1<<e)}function Ku(e,n){return!(e&sr.Self||e&sr.Host&&n)}class Os{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,s){return zu(this._tNode,this._lView,n,mi(s),i)}}function C_(){return new Os(jr(),kt())}function Fd(e){return wn(()=>{const n=e.prototype.constructor,i=n[ui]||Vd(n),s=Object.prototype;let c=Object.getPrototypeOf(e.prototype).constructor;for(;c&&c!==s;){const l=c[ui]||Vd(c);if(l&&l!==i)return l;c=Object.getPrototypeOf(c)}return l=>new l})}function Vd(e){return we(e)?()=>{const n=Vd(xe(e));return n&&n()}:zi(e)}function w_(e){const n=e[Qt],i=n.type;return 2===i?n.declTNode:1===i?e[Ei]:null}function qs(e){return function Ra(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const i=e.attrs;if(i){const s=i.length;let c=0;for(;c<s;){const l=i[c];if(G(l))break;if(0===l)c+=2;else if("number"==typeof l)for(c++;c<s&&"string"==typeof i[c];)c++;else{if(l===n)return i[c+1];c+=2}}}return null}(jr(),e)}function ff(e,n=null,i=null,s){const c=Bd(e,n,i,s);return c.resolveInjectorInitializers(),c}function Bd(e,n=null,i=null,s,c=new Set){const l=[i||vr,fe(e)];return s=s||("object"==typeof e?void 0:qt(e)),new $i(l,n||Ss(),s||null,c)}let ao=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=gs;static#t=this.NULL=new ho;static create(i,s){if(Array.isArray(i))return ff({name:""},s,i,"");{const c=i.name??"";return ff({name:c},i.parent,i.providers,c)}}static#n=this.\u0275prov=ar({token:e,providedIn:"any",factory:()=>li(Va)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function jd(e){return e.ngOriginalError}class bo{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&jd(n);for(;i&&jd(i);)i=jd(i);return i||null}}const rg=new Xe("",{providedIn:"root",factory:()=>ln(bo).handleError.bind(void 0)});let Gl=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=rE;static#t=this.__NG_ENV_ID__=i=>i}return e})();class ig extends Gl{constructor(n){super(),this._lView=n}onDestroy(n){return Sl(this._lView,n),()=>function Ha(e,n){if(null===e[Yo])return;const i=e[Yo].indexOf(n);-1!==i&&e[Yo].splice(i,1)}(this._lView,n)}}function rE(){return new ig(kt())}function og(){return qu(jr(),kt())}function qu(e,n){return new fc(Ws(e,n))}let fc=(()=>{class e{constructor(i){this.nativeElement=i}static#e=this.__NG_ELEMENT_ID__=og}return e})();function gf(e){return e instanceof fc?e.nativeElement:e}function ag(e){return n=>{setTimeout(e,void 0,n)}}const Ka=class iE extends jn.B{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,Rn()&&(this.destroyRef=ln(Gl,{optional:!0})??void 0)}emit(n){const i=B(null);try{super.next(n)}finally{B(i)}}subscribe(n,i,s){let c=n,l=i||(()=>null),p=s;if(n&&"object"==typeof n){const S=n;c=S.next?.bind(S),l=S.error?.bind(S),p=S.complete?.bind(S)}this.__isAsync&&(l=ag(l),c&&(c=ag(c)),p&&(p=ag(p)));const y=super.subscribe({next:c,error:l,complete:p});return n instanceof it.yU&&n.add(y),y}};function R_(){return this._results[Symbol.iterator]()}class cg{static#e=Symbol.iterator;get changes(){return this._changes??=new Ka}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const i=cg.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=R_)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){this.dirty=!1;const s=function Xi(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Vo(e,n,i){if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++){let c=e[s],l=n[s];if(i&&(c=i(c),l=i(l)),l!==c)return!1}return!0}(this._results,s,i))&&(this._results=s,this.length=s.length,this.last=s[this.length-1],this.first=s[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function zl(e){return!(128&~e.flags)}const $d=new Map;let N_=0;const vf="__ngContext__";function Ns(e,n){Ps(n)?(e[vf]=n[da],function lg(e){$d.set(e[da],e)}(n)):e[vf]=n}function V_(e){return L_(e[jo])}function _g(e){return L_(e[Mi])}function L_(e){for(;null!==e&&!Ms(e);)e=e[Mi];return e}let Dg;function Ag(e){Dg=e}const wf=new Xe("",{providedIn:"root",factory:()=>H_}),H_="ng",Tf=new Xe(""),Df=new Xe("",{providedIn:"platform",factory:()=>"unknown"}),bg=new Xe(""),dE=new Xe("",{providedIn:"root",factory:()=>function cu(){if(void 0!==Dg)return Dg;if(typeof document<"u")return document;throw new mt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let z_=()=>null;function Xd(e,n,i=!1){return z_(e,n,i)}const X_=new Xe("",{providedIn:"root",factory:()=>!1});let Ql;function $g(e){return function eh(){if(void 0===Ql&&(Ql=null,On.trustedTypes))try{Ql=On.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ql}()?.createScriptURL(e)||e}class tl{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${St})`}}function fu(e){return e instanceof tl?e.changingThisBreaksApplicationSecurity:e}function nh(e,n){const i=function _E(e){return e instanceof tl&&e.getTypeName()||null}(e);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${St})`)}return i===n}const wE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var il=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(il||{});function Nf(e){const n=Fc();return n?n.sanitize(il.URL,e)||"":nh(e,"URL")?fu(e):function Pf(e){return(e=String(e)).match(wE)?e:"unsafe:"+e}(Nn(e))}function oy(e){const n=Fc();if(n)return $g(n.sanitize(il.RESOURCE_URL,e)||"");if(nh(e,"ResourceURL"))return $g(fu(e));throw new mt(904,!1)}function ay(e,n,i){return function YC(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?oy:Nf}(n,i)(e)}function Fc(){const e=kt();return e&&e[go].sanitizer}function pa(e){return e instanceof Function?e():e}var qa=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(qa||{});let ol;function nm(e,n){return ol(e,n)}function oh(e,n,i,s,c){if(null!=s){let l,p=!1;Ms(s)?l=s:Ps(s)&&(p=!0,s=s[Xr]);const y=Mr(s);0===e&&null!==i?null==c?_y(n,i,y):yc(n,i,y,c||null,!0):1===e&&null!==i?yc(n,i,y,c||null,!0):2===e?function hh(e,n,i){const s=im(e,n);s&&function t0(e,n,i,s){e.removeChild(n,i,s)}(e,s,n,i)}(n,y,p):3===e&&n.destroyNode(y),null!=l&&function zE(e,n,i,s,c){const l=i[Ao];l!==Mr(i)&&oh(n,e,s,l,c);for(let y=Ri;y<i.length;y++){const S=i[y];Wf(S[Qt],S,e,n,s,l)}}(n,e,l,i,c)}}function al(e,n,i){return e.createElement(n,i)}function ah(e,n){n[go].changeDetectionScheduler?.notify(1),Wf(e,n,n[nr],2,null,null)}function py(e,n){const i=e[Sa],s=i.indexOf(n);i.splice(s,1)}function ch(e,n){if(e.length<=Ri)return;const i=Ri+n,s=e[i];if(s){const c=s[Dc];null!==c&&c!==e&&py(c,s),n>0&&(e[i-1][Mi]=s[Mi]);const l=uo(e,Ri+n);!function BE(e,n){ah(e,n),n[Xr]=null,n[Ei]=null}(s[Qt],s);const p=l[$o];null!==p&&p.detachView(l[Qt]),s[mr]=null,s[Mi]=null,s[_n]&=-129}return s}function uh(e,n){if(!(256&n[_n])){const i=n[nr];i.destroyNode&&Wf(e,n,i,3,null,null),function $E(e){let n=e[jo];if(!n)return Hf(e[Qt],e);for(;n;){let i=null;if(Ps(n))i=n[jo];else{const s=n[Ri];s&&(i=s)}if(!i){for(;n&&!n[Mi]&&n!==e;)Ps(n)&&Hf(n[Qt],n),n=n[mr];null===n&&(n=e),Ps(n)&&Hf(n[Qt],n),i=n&&n[Mi]}n=i}}(n)}}function Hf(e,n){if(256&n[_n])return;const i=B(null);try{n[_n]&=-129,n[_n]|=256,n[Es]&&function ue(e){if(Ye(e),Ve(e))for(let n=0;n<e.producerNode.length;n++)ae(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}(n[Es]),function my(e,n){let i;if(null!=e&&null!=(i=e.destroyHooks))for(let s=0;s<i.length;s+=2){const c=n[i[s]];if(!(c instanceof Ma)){const l=i[s+1];if(Array.isArray(l))for(let p=0;p<l.length;p+=2){const y=c[l[p]],S=l[p+1];zs(4,y,S);try{S.call(y)}finally{zs(5,y,S)}}else{zs(4,c,l);try{l.call(c)}finally{zs(5,c,l)}}}}}(e,n),function gy(e,n){const i=e.cleanup,s=n[Gs];if(null!==i)for(let l=0;l<i.length-1;l+=2)if("string"==typeof i[l]){const p=i[l+3];p>=0?s[p]():s[-p].unsubscribe(),l+=2}else i[l].call(s[i[l+1]]);null!==s&&(n[Gs]=null);const c=n[Yo];if(null!==c){n[Yo]=null;for(let l=0;l<c.length;l++)(0,c[l])()}}(e,n),1===n[Qt].type&&n[nr].destroy();const s=n[Dc];if(null!==s&&Ms(n[mr])){s!==n[mr]&&py(s,n);const c=n[$o];null!==c&&c.detachView(e)}!function Wl(e){$d.delete(e[da])}(n)}finally{B(i)}}function Gf(e,n,i){return function zf(e,n,i){let s=n;for(;null!==s&&40&s.type;)s=(n=s).parent;if(null===s)return i[Xr];{const{componentOffset:c}=s;if(c>-1){const{encapsulation:l}=e.data[s.directiveStart+c];if(l===ls.None||l===ls.Emulated)return null}return Ws(s,i)}}(e,n.parent,i)}function yc(e,n,i,s,c){e.insertBefore(n,i,s,c)}function _y(e,n,i){e.appendChild(n,i)}function GE(e,n,i,s,c){null!==s?yc(e,n,i,s,c):_y(e,n,i)}function im(e,n){return e.parentNode(n)}let Ec,ed=function vc(e,n,i){return 40&e.type?Ws(e,i):null};function lh(e,n,i,s){const c=Gf(e,s,n),l=n[nr],y=function gu(e,n,i){return ed(e,n,i)}(s.parent||n[Ei],s,n);if(null!=c)if(Array.isArray(i))for(let S=0;S<i.length;S++)GE(l,c,i[S],y,!1);else GE(l,c,i,y,!1);void 0!==Ec&&Ec(l,s,n,i,c)}function dh(e,n){if(null!==n){const i=n.type;if(3&i)return Ws(n,e);if(4&i)return sm(-1,e[n.index]);if(8&i){const s=n.child;if(null!==s)return dh(e,s);{const c=e[n.index];return Ms(c)?sm(-1,c):Mr(c)}}if(32&i)return nm(n,e)()||Mr(e[n.index]);{const s=Uc(e,n);return null!==s?Array.isArray(s)?s[0]:dh(_o(e[Gn]),s):dh(e,n.next)}}return null}function Uc(e,n){return null!==n?e[Gn][Ei].projection[n.projection]:null}function sm(e,n){const i=Ri+e+1;if(i<n.length){const s=n[i],c=s[Qt].firstChild;if(null!==c)return dh(s,c)}return n[Ao]}function om(e,n,i,s,c,l,p){for(;null!=i;){const y=s[i.index],S=i.type;if(p&&0===n&&(y&&Ns(Mr(y),s),i.flags|=2),32&~i.flags)if(8&S)om(e,n,i.child,s,c,l,!1),oh(n,e,c,y,l);else if(32&S){const U=nm(i,s);let X;for(;X=U();)oh(n,e,c,X,l);oh(n,e,c,y,l)}else 16&S?am(e,n,s,i,c,l):oh(n,e,c,y,l);i=p?i.projectionNext:i.next}}function Wf(e,n,i,s,c,l){om(i,s,e.firstChild,n,c,l,!1)}function am(e,n,i,s,c,l){const p=i[Gn],S=p[Ei].projection[s.projection];if(Array.isArray(S))for(let U=0;U<S.length;U++)oh(n,e,c,S[U],l);else{let U=S;const X=p[mr];zl(s)&&(U.flags|=128),om(e,n,U,X,c,l,!0)}}function Cy(e,n,i){""===i?e.removeAttribute(n,"class"):e.setAttribute(n,"class",i)}function cl(e,n,i){const{mergedAttrs:s,classes:c,styles:l}=i;null!==s&&ai(e,n,s),null!==c&&Cy(e,n,c),null!==l&&function Iy(e,n,i){e.setAttribute(n,"style",i)}(e,n,l)}const Er={};function KE(e=1){wy(Rr(),kt(),Is()+e,!1)}function wy(e,n,i,s){if(!s)if(3&~n[_n]){const l=e.preOrderHooks;null!==l&&Nc(n,l,0,i)}else{const l=e.preOrderCheckHooks;null!==l&&Bu(n,l,i)}uc(i)}function td(e,n=sr.Default){const i=kt();return null===i?li(e,n):zu(jr(),i,xe(e),n)}function Ty(){throw new Error("invalid")}function Dy(e,n,i,s,c,l){const p=B(null);try{let y=null;c&_s.SignalBased&&(y=n[s][Pe]),null!==y&&void 0!==y.transformFn&&(l=y.transformFn(l)),c&_s.HasDecoratorInputTransform&&(l=e.inputTransforms[s].call(n,l)),null!==e.setInput?e.setInput(n,y,l,i,s):Te(n,y,s,l)}finally{B(p)}}function cm(e,n,i,s,c,l,p,y,S,U,X){const le=n.blueprint.slice();return le[Xr]=c,le[_n]=204|s,(null!==U||e&&2048&e[_n])&&(le[_n]|=2048),tf(le),le[mr]=le[hi]=e,le[Ii]=i,le[go]=p||e&&e[go],le[nr]=y||e&&e[nr],le[Gr]=S||e&&e[Gr]||null,le[Ei]=l,le[da]=function ug(){return N_++}(),le[cs]=X,le[Il]=U,le[Gn]=2==n.type?e[Gn]:le,le}function fh(e,n,i,s,c){let l=e.data[n];if(null===l)l=function Ay(e,n,i,s,c){const l=Sc(),p=Lu(),S=e.data[n]=function eI(e,n,i,s,c,l){let p=n?n.injectorIndex:-1,y=0;return function Ga(){return null!==qn.skipHydrationRootTNode}()&&(y|=128),{type:i,index:s,insertBeforeIndex:null,injectorIndex:p,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:y,providerIndexes:0,value:c,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?l:l&&l.parent,i,n,s,c);return null===e.firstChild&&(e.firstChild=S),null!==l&&(p?null==l.child&&null!==S.parent&&(l.child=S):null===l.next&&(l.next=S,S.prev=l)),S}(e,n,i,s,c),function qp(){return qn.lFrame.inI18n}()&&(l.flags|=32);else if(64&l.type){l.type=i,l.value=s,l.attrs=c;const p=function ea(){const e=qn.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();l.injectorIndex=null===p?-1:p.injectorIndex}return fa(l,!0),l}function Kf(e,n,i,s){if(0===i)return-1;const c=n.length;for(let l=0;l<i;l++)n.push(s),e.blueprint.push(s),e.data.push(null);return c}function by(e,n,i,s,c){const l=Is(),p=2&s;try{uc(-1),p&&n.length>Jn&&wy(e,n,Jn,!1),zs(p?2:0,c),i(s,c)}finally{uc(l),zs(p?3:1,c)}}function um(e,n,i){if(Kc(n)){const s=B(null);try{const l=n.directiveEnd;for(let p=n.directiveStart;p<l;p++){const y=e.data[p];y.contentQueries&&y.contentQueries(1,i[p],p)}}finally{B(s)}}}function lm(e,n,i){Pl()&&(function u0(e,n,i,s){const c=i.directiveStart,l=i.directiveEnd;Jo(i)&&function ph(e,n,i){const s=Ws(n,e),c=Py(i);let p=16;i.signals?p=4096:i.onPush&&(p=64);const y=mh(e,cm(e,c,null,p,s,n,null,e[go].rendererFactory.createRenderer(s,i),null,null,null));e[n.index]=y}(n,i,e.data[c+i.componentOffset]),e.firstCreatePass||jt(i,n),Ns(s,n);const p=i.initialInputs;for(let y=c;y<l;y++){const S=e.data[y],U=na(n,e,y,i);Ns(U,n),null!==p&&sI(0,y-c,U,S,0,p),ro(S)&&(Go(i.index,n)[Ii]=na(n,e,y,i))}}(e,n,i,Ws(i,n)),!(64&~i.flags)&&rI(e,n,i))}function Sy(e,n,i=Ws){const s=n.localNames;if(null!==s){let c=n.index+1;for(let l=0;l<s.length;l+=2){const p=s[l+1],y=-1===p?i(n,e):e[p];e[c++]=y}}}function Py(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=qf(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function qf(e,n,i,s,c,l,p,y,S,U,X){const le=Jn+s,Oe=le+c,ze=function mu(e,n){const i=[];for(let s=0;s<n;s++)i.push(s<e?null:Er);return i}(le,Oe),ft="function"==typeof U?U():U;return ze[Qt]={type:e,blueprint:ze,template:i,queries:null,viewQuery:y,declTNode:n,data:ze.slice().fill(null,le),bindingStartIndex:le,expandoStartIndex:Oe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:S,consts:ft,incompleteFirstPass:!1,ssrId:X}}let My=()=>null;function tI(e,n,i,s,c){for(let l in n){if(!n.hasOwnProperty(l))continue;const p=n[l];if(void 0===p)continue;s??={};let y,S=_s.None;Array.isArray(p)?(y=p[0],S=p[1]):y=p;let U=l;if(null!==c){if(!c.hasOwnProperty(l))continue;U=c[l]}0===e?nI(s,i,U,y,S):nI(s,i,U,y)}return s}function nI(e,n,i,s,c){let l;e.hasOwnProperty(i)?(l=e[i]).push(n,s):l=e[i]=[n,s],void 0!==c&&l.push(c)}function ia(e,n,i,s,c,l,p,y){const S=Ws(n,i);let X,U=n.inputs;!y&&null!=U&&(X=U[s])?(ul(e,i,X,s,c),Jo(n)&&function o0(e,n){const i=Go(n,e);16&i[_n]||(i[_n]|=64)}(i,n.index)):3&n.type&&(s=function Ry(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(s),c=null!=p?p(c,n.value||"",s):c,l.setProperty(S,s,c))}function Oy(e,n,i,s){if(Pl()){const c=null===s?null:{"":-1},l=function Qf(e,n){const i=e.directiveRegistry;let s=null,c=null;if(i)for(let l=0;l<i.length;l++){const p=i[l];if(aa(n,p.selectors,!1))if(s||(s=[]),ro(p))if(null!==p.findHostDirectiveDefs){const y=[];c=c||new Map,p.findHostDirectiveDefs(p,y,c),s.unshift(...y,p),fm(e,n,y.length)}else s.unshift(p),fm(e,n,0);else c=c||new Map,p.findHostDirectiveDefs?.(p,s,c),s.push(p)}return null===s?null:[s,c]}(e,i);let p,y;null===l?p=y=null:[p,y]=l,null!==p&&dm(e,n,i,p,c,y),c&&function iI(e,n,i){if(n){const s=e.localNames=[];for(let c=0;c<n.length;c+=2){const l=i[n[c+1]];if(null==l)throw new mt(-301,!1);s.push(n[c],l)}}}(i,s,c)}i.mergedAttrs=O(i.mergedAttrs,i.attrs)}function dm(e,n,i,s,c,l){for(let U=0;U<s.length;U++)oo(jt(i,n),e,s[U].type);!function xy(e,n,i){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+i,e.providerIndexes=n}(i,e.data.length,s.length);for(let U=0;U<s.length;U++){const X=s[U];X.providersResolver&&X.providersResolver(X)}let p=!1,y=!1,S=Kf(e,n,s.length,null);for(let U=0;U<s.length;U++){const X=s[U];i.mergedAttrs=O(i.mergedAttrs,X.hostAttrs),ky(e,i,n,S,X),pm(S,X,c),null!==X.contentQueries&&(i.flags|=4),(null!==X.hostBindings||null!==X.hostAttrs||0!==X.hostVars)&&(i.flags|=64);const le=X.type.prototype;!p&&(le.ngOnChanges||le.ngOnInit||le.ngDoCheck)&&((e.preOrderHooks??=[]).push(i.index),p=!0),!y&&(le.ngOnChanges||le.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(i.index),y=!0),S++}!function s0(e,n,i){const c=n.directiveEnd,l=e.data,p=n.attrs,y=[];let S=null,U=null;for(let X=n.directiveStart;X<c;X++){const le=l[X],Oe=i?i.get(le):null,ft=Oe?Oe.outputs:null;S=tI(0,le.inputs,X,S,Oe?Oe.inputs:null),U=tI(1,le.outputs,X,U,ft);const Lt=null===S||null===p||tr(n)?null:Fy(S,X,p);y.push(Lt)}null!==S&&(S.hasOwnProperty("class")&&(n.flags|=8),S.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=y,n.inputs=S,n.outputs=U}(e,i,l)}function rI(e,n,i){const s=i.directiveStart,c=i.directiveEnd,l=i.index,p=function cc(){return qn.lFrame.currentDirectiveIndex}();try{uc(l);for(let y=s;y<c;y++){const S=e.data[y],U=n[y];Rc(y),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&hm(S,U)}}finally{uc(-1),Rc(p)}}function hm(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function fm(e,n,i){n.componentOffset=i,(e.components??=[]).push(n.index)}function pm(e,n,i){if(i){if(n.exportAs)for(let s=0;s<n.exportAs.length;s++)i[n.exportAs[s]]=e;ro(n)&&(i[""]=e)}}function ky(e,n,i,s,c){e.data[s]=c;const l=c.factory||(c.factory=zi(c.type)),p=new Ma(l,ro(c),td);e.blueprint[s]=p,i[s]=p,function Ny(e,n,i,s,c){const l=c.hostBindings;if(l){let p=e.hostBindingOpCodes;null===p&&(p=e.hostBindingOpCodes=[]);const y=~n.index;(function c0(e){let n=e.length;for(;n>0;){const i=e[--n];if("number"==typeof i&&i<0)return i}return 0})(p)!=y&&p.push(y),p.push(i,s,l)}}(e,n,s,Kf(e,i,c.hostVars,Er),c)}function Na(e,n,i,s,c,l){const p=Ws(e,n);!function gm(e,n,i,s,c,l,p){if(null==l)e.removeAttribute(n,c,i);else{const y=null==p?Nn(l):p(l,s||"",c);e.setAttribute(n,c,y,i)}}(n[nr],p,l,e.value,i,s,c)}function sI(e,n,i,s,c,l){const p=l[n];if(null!==p)for(let y=0;y<p.length;)Dy(s,i,p[y++],p[y++],p[y++],p[y++])}function Fy(e,n,i){let s=null,c=0;for(;c<i.length;){const l=i[c];if(0!==l)if(5!==l){if("number"==typeof l)break;if(e.hasOwnProperty(l)){null===s&&(s=[]);const p=e[l];for(let y=0;y<p.length;y+=3)if(p[y]===n){s.push(l,p[y+1],p[y+2],i[c+1]);break}}c+=2}else c+=2;else c+=4}return s}function gh(e,n,i,s){return[e,!0,0,n,null,s,null,i,null,null]}function Vy(e,n){const i=e.contentQueries;if(null!==i){const s=B(null);try{for(let c=0;c<i.length;c+=2){const p=i[c+1];if(-1!==p){const y=e.data[p];xl(i[c]),y.contentQueries(2,n[p],p)}}}finally{B(s)}}}function mh(e,n){return e[jo]?e[El][Mi]=n:e[jo]=n,e[El]=n,n}function Xf(e,n,i){xl(0);const s=B(null);try{n(e,i)}finally{B(s)}}function ga(e){return e[Gs]||(e[Gs]=[])}function Mo(e){return e.cleanup||(e.cleanup=[])}function _h(e,n){const i=e[Gr],s=i?i.get(bo,null):null;s&&s.handleError(n)}function ul(e,n,i,s,c){for(let l=0;l<i.length;){const p=i[l++],y=i[l++],S=i[l++];Dy(e.data[p],n[p],s,y,S,c)}}function zo(e,n){const i=Go(n,e),s=i[Qt];!function oI(e,n){for(let i=n.length;i<e.blueprint.length;i++)n.push(e.blueprint[i])}(s,i);const c=i[Xr];null!==c&&null===i[cs]&&(i[cs]=Xd(c,i[Gr])),yh(s,i,i[Ii])}function yh(e,n,i){tu(n);try{const s=e.viewQuery;null!==s&&Xf(1,s,i);const c=e.template;null!==c&&by(e,n,c,1,i),e.firstCreatePass&&(e.firstCreatePass=!1),n[$o]?.finishViewCreation(e),e.staticContentQueries&&Vy(e,n),e.staticViewQueries&&Xf(2,e.viewQuery,i);const l=e.components;null!==l&&function rd(e,n){for(let i=0;i<n.length;i++)zo(e,n[i])}(n,l)}catch(s){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),s}finally{n[_n]&=-5,kl()}}function xa(e,n){return!n||null===n.firstChild||zl(e)}function vh(e,n,i,s=!0){const c=n[Qt];if(function HE(e,n,i,s){const c=Ri+s,l=i.length;s>0&&(i[c-1][Mi]=n),s<l-Ri?(n[Mi]=i[c],co(i,Ri+s,n)):(i.push(n),n[Mi]=null),n[mr]=i;const p=n[Dc];null!==p&&i!==p&&function $f(e,n){const i=e[Sa];n[Gn]!==n[mr][mr][Gn]&&(e[_n]|=Su.HasTransplantedViews),null===i?e[Sa]=[n]:i.push(n)}(p,n);const y=n[$o];null!==y&&y.insertView(e),bc(n),n[_n]|=128}(c,n,e,i),s){const p=sm(i,e),y=n[nr],S=im(y,e[Ao]);null!==S&&function jE(e,n,i,s,c,l){s[Xr]=c,s[Ei]=n,Wf(e,s,i,1,c,l)}(c,e[Ei],y,n,S,p)}const l=n[cs];null!==l&&null!==l.firstChild&&(l.firstChild=null)}function Eh(e,n,i,s,c=!1){for(;null!==i;){const l=n[i.index];null!==l&&s.push(Mr(l)),Ms(l)&&Ly(l,s);const p=i.type;if(8&p)Eh(e,n,i.child,s);else if(32&p){const y=nm(i,n);let S;for(;S=y();)s.push(S)}else if(16&p){const y=Uc(n,i);if(Array.isArray(y))s.push(...y);else{const S=_o(n[Gn]);Eh(S[Qt],S,y,s,!0)}}i=c?i.projectionNext:i.next}return s}function Ly(e,n){for(let i=Ri;i<e.length;i++){const s=e[i],c=s[Qt].firstChild;null!==c&&Eh(s[Qt],s,c,n)}e[Ao]!==e[Xr]&&n.push(e[Ao])}let Uy=[];const jy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Fu(e.lView)},consumerOnSignalRead(){this.lView[Es]=this}},Ih=100;function Ch(e,n=!0,i=0){const s=e[go],c=s.rendererFactory;c.begin?.();try{!function cI(e,n){Im(e,n);let i=0;for(;bl(e);){if(i===Ih)throw new mt(103,!1);i++,Im(e,1)}}(e,i)}catch(p){throw n&&_h(e,p),p}finally{c.end?.(),s.inlineEffectRunner?.flush()}}function uI(e,n,i,s){const c=n[_n];if(!(256&~c))return;n[go].inlineEffectRunner?.flush(),tu(n);let p=null,y=null;(function Hy(e){return 2!==e.type})(e)&&(y=function By(e){return e[Es]??function aI(e){const n=Uy.pop()??Object.create(jy);return n.lView=e,n}(e)}(n),p=function st(e){return e&&(e.nextProducerIndex=0),B(e)}(y));try{tf(n),function Pc(e){return qn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==i&&by(e,n,i,2,s);const S=!(3&~c);if(S){const le=e.preOrderCheckHooks;null!==le&&Bu(n,le,null)}else{const le=e.preOrderHooks;null!==le&&Nc(n,le,0,null),ju(n,0)}if(function lI(e){for(let n=V_(e);null!==n;n=_g(n)){if(!(n[_n]&Su.HasTransplantedViews))continue;const i=n[Sa];for(let s=0;s<i.length;s++){$a(i[s])}}}(n),vm(n,0),null!==e.contentQueries&&Vy(e,n),S){const le=e.contentCheckHooks;null!==le&&Bu(n,le)}else{const le=e.contentHooks;null!==le&&Nc(n,le,1),ju(n,1)}!function qE(e,n){const i=e.hostBindingOpCodes;if(null!==i)try{for(let s=0;s<i.length;s++){const c=i[s];if(c<0)uc(~c);else{const l=c,p=i[++s],y=i[++s];Pd(p,l),y(2,n[l])}}}finally{uc(-1)}}(e,n);const U=e.components;null!==U&&zy(n,U,0);const X=e.viewQuery;if(null!==X&&Xf(2,X,s),S){const le=e.viewCheckHooks;null!==le&&Bu(n,le)}else{const le=e.viewHooks;null!==le&&Nc(n,le,2),ju(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[rc]){for(const le of n[rc])le();n[rc]=null}n[_n]&=-73}catch(S){throw Fu(n),S}finally{null!==y&&(function bt(e,n){if(B(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Ve(e))for(let i=e.nextProducerIndex;i<e.producerNode.length;i++)ae(e.producerNode[i],e.producerIndexOfThis[i]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}(y,p),function ym(e){e.lView[Es]!==e&&(e.lView=null,Uy.push(e))}(y)),kl()}}function vm(e,n){for(let i=V_(e);null!==i;i=_g(i))for(let s=Ri;s<i.length;s++)Em(i[s],n)}function Gy(e,n,i){Em(Go(n,e),i)}function Em(e,n){Zc(e)&&Im(e,n)}function Im(e,n){const s=e[Qt],c=e[_n],l=e[Es];let p=!!(0===n&&16&c);if(p||=!!(64&c&&0===n),p||=!!(1024&c),p||=!(!l?.dirty||!gt(l)),l&&(l.dirty=!1),e[_n]&=-9217,p)uI(s,e,s.template,e[Ii]);else if(8192&c){vm(e,1);const y=s.components;null!==y&&zy(e,y,1)}}function zy(e,n,i){for(let s=0;s<n.length;s++)Gy(e,n[s],i)}function id(e){for(e[go].changeDetectionScheduler?.notify();e;){e[_n]|=64;const n=_o(e);if(La(e)&&!n)return e;e=n}return null}class wh{get rootNodes(){const n=this._lView,i=n[Qt];return Eh(i,n,i.firstChild,[])}constructor(n,i,s=!0){this._lView=n,this._cdRefInjectingView=i,this.notifyErrorHandler=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ii]}set context(n){this._lView[Ii]=n}get destroyed(){return!(256&~this._lView[_n])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[mr];if(Ms(n)){const i=n[8],s=i?i.indexOf(this):-1;s>-1&&(ch(n,s),uo(i,s))}this._attachedToViewContainer=!1}uh(this._lView[Qt],this._lView)}onDestroy(n){Sl(this._lView,n)}markForCheck(){id(this._cdRefInjectingView||this._lView)}detach(){this._lView[_n]&=-129}reattach(){bc(this._lView),this._lView[_n]|=128}detectChanges(){this._lView[_n]|=1024,Ch(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new mt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ah(this._lView[Qt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new mt(902,!1);this._appRef=n,bc(this._lView)}}let Th=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=ll}return e})();const dI=Th,Cm=class extends dI{constructor(n,i,s){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=s}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,s){const c=function Qa(e,n,i,s){const c=B(null);try{const l=n.tView,S=cm(e,l,i,4096&e[_n]?4096:16,null,n,null,null,s?.injector??null,s?.embeddedViewInjector??null,s?.dehydratedView??null);S[Dc]=e[n.index];const X=e[$o];return null!==X&&(S[$o]=X.createEmbeddedView(l)),yh(l,S,i),S}finally{B(c)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:s});return new wh(c)}};function ll(){return Jf(jr(),kt())}function Jf(e,n){return 4&e.type?new Cm(n,e,qu(e,n)):null}class je{}class Bc{}class sd{}class Am{resolveComponentFactory(n){throw function vI(e){const n=Error(`No component factory found for ${qt(e)}.`);return n.ngComponent=e,n}(n)}}let Ah=(()=>{class e{static#e=this.NULL=new Am}return e})();class qy{}let _u=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Ro(){const e=kt(),i=Go(jr().index,e);return(Ps(i)?i:e)[nr]}()}return e})(),EI=(()=>{class e{static#e=this.\u0275prov=ar({token:e,providedIn:"root",factory:()=>null})}return e})();const dl={},ad=new Set;function Ic(e){ad.has(e)||(ad.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Qy(...e){}class Cs{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ka(!1),this.onMicrotaskEmpty=new Ka(!1),this.onStable=new Ka(!1),this.onError=new Ka(!1),typeof Zone>"u")throw new mt(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!s&&i,c.shouldCoalesceRunChangeDetection=s,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function np(){const e="function"==typeof On.requestAnimationFrame;let n=On[e?"requestAnimationFrame":"setTimeout"],i=On[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const c=i[Zone.__symbol__("OriginalDelegate")];c&&(i=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Xy(e){const n=()=>{!function Pm(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(On,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,rp(e),e.isCheckStableRunning=!0,bh(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),rp(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,s,c,l,p,y)=>{if(function Om(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(y))return i.invokeTask(c,l,p,y);try{return Yy(e),i.invokeTask(c,l,p,y)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||e.shouldCoalesceRunChangeDetection)&&n(),Mm(e)}},onInvoke:(i,s,c,l,p,y,S)=>{try{return Yy(e),i.invoke(c,l,p,y,S)}finally{e.shouldCoalesceRunChangeDetection&&n(),Mm(e)}},onHasTask:(i,s,c,l)=>{i.hasTask(c,l),s===c&&("microTask"==l.change?(e._hasPendingMicrotasks=l.microTask,rp(e),bh(e)):"macroTask"==l.change&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(i,s,c,l)=>(i.handleError(c,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Cs.isInAngularZone())throw new mt(909,!1)}static assertNotInAngularZone(){if(Cs.isInAngularZone())throw new mt(909,!1)}run(n,i,s){return this._inner.run(n,i,s)}runTask(n,i,s,c){const l=this._inner,p=l.scheduleEventTask("NgZoneEvent: "+c,n,Sm,Qy,Qy);try{return l.runTask(p,i,s)}finally{l.cancelTask(p)}}runGuarded(n,i,s){return this._inner.runGuarded(n,i,s)}runOutsideAngular(n){return this._outer.run(n)}}const Sm={};function bh(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function rp(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Yy(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Mm(e){e._nesting--,bh(e)}class Rm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ka,this.onMicrotaskEmpty=new Ka,this.onStable=new Ka,this.onError=new Ka}run(n,i,s){return n.apply(i,s)}runGuarded(n,i,s){return n.apply(i,s)}runOutsideAngular(n){return n()}runTask(n,i,s,c){return n.apply(i,s)}}var hl=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(hl||{});const ip={destroy(){}};function yo(e,n){!n&&function hr(e){if(!Rn())throw new mt(-203,!1)}();const i=n?.injector??ln(ao);if(!function ra(e){return"browser"===(e??ln(ao)).get(Df)}(i))return ip;Ic("NgAfterNextRender");const s=i.get(cd),c=s.handler??=new Ph,l=n?.phase??hl.MixedReadWrite,p=()=>{c.unregister(S),y()},y=i.get(Gl).onDestroy(p),S=Mn(i,()=>new Oo(l,()=>{p(),e()}));return c.register(S),{destroy:p}}class Oo{constructor(n,i){this.phase=n,this.callbackFn=i,this.zone=ln(Cs),this.errorHandler=ln(bo,{optional:!0}),ln(je,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){this.errorHandler?.handleError(n)}}}class Ph{constructor(){this.executingCallbacks=!1,this.buckets={[hl.EarlyRead]:new Set,[hl.Write]:new Set,[hl.MixedReadWrite]:new Set,[hl.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const i of n)i.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(const n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}}let cd=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const s of i)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=ar({token:e,providedIn:"root",factory:()=>new e})}return e})();function yu(e){return!!ji(e)}function dd(e,n,i){let s=i?e.styles:null,c=i?e.classes:null,l=0;if(null!==n)for(let p=0;p<n.length;p++){const y=n[p];"number"==typeof y?l=y:1==l?c=Xt(c,y):2==l&&(s=Xt(s,y+": "+n[++p]+";"))}i?e.styles=s:e.stylesWithoutHost=s,i?e.classes=c:e.classesWithoutHost=c}class cp extends Ah{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=dr(n);return new hd(i,this.ngModule)}}function Eu(e){const n=[];for(const i in e){if(!e.hasOwnProperty(i))continue;const s=e[i];void 0!==s&&n.push({propName:Array.isArray(s)?s[0]:s,templateName:i})}return n}class fl{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,s){s=mi(s);const c=this.injector.get(n,dl,s);return c!==dl||i===dl?c:this.parentInjector.get(n,i,s)}}class hd extends sd{get inputs(){const n=this.componentDef,i=n.inputTransforms,s=Eu(n.inputs);if(null!==i)for(const c of s)i.hasOwnProperty(c.propName)&&(c.transform=i[c.propName]);return s}get outputs(){return Eu(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function Ca(e){return e.map(Ia).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,s,c){const l=B(null);try{let p=(c=c||this.ngModule)instanceof Si?c:c?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new fl(n,p):n,S=y.get(qy,null);if(null===S)throw new mt(407,!1);const U=y.get(EI,null),Oe={rendererFactory:S,sanitizer:U,inlineEffectRunner:null,afterRenderEventManager:y.get(cd,null),changeDetectionScheduler:y.get(je,null)},ze=S.createRenderer(null,this.componentDef),ft=this.componentDef.selectors[0][0]||"div",Lt=s?function QE(e,n,i,s){const l=s.get(X_,!1)||i===ls.ShadowDom,p=e.selectRootElement(n,l);return function XE(e){My(e)}(p),p}(ze,s,this.componentDef.encapsulation,y):al(ze,ft,function Zy(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(ft));let tn=512;this.componentDef.signals?tn|=4096:this.componentDef.onPush||(tn|=16);let an=null;null!==Lt&&(an=Xd(Lt,y,!0));const zt=qf(0,null,null,1,0,null,null,null,null,null,null),gr=cm(null,zt,null,tn,null,null,Oe,ze,y,null,an);let fi,ns;tu(gr);try{const Io=this.componentDef;let Fa,zp=null;Io.findHostDirectiveDefs?(Fa=[],zp=new Map,Io.findHostDirectiveDefs(Io,Fa,zp),Fa.push(Io)):Fa=[Io];const cA=function ev(e,n){const i=e[Qt],s=Jn;return e[s]=n,fh(i,s,2,"#host",null)}(gr,Lt),UR=function Wo(e,n,i,s,c,l,p){const y=c[Qt];!function tv(e,n,i,s){for(const c of e)n.mergedAttrs=O(n.mergedAttrs,c.hostAttrs);null!==n.mergedAttrs&&(dd(n,n.mergedAttrs,!0),null!==i&&cl(s,i,n))}(s,e,n,p);let S=null;null!==n&&(S=Xd(n,c[Gr]));const U=l.rendererFactory.createRenderer(n,i);let X=16;i.signals?X=4096:i.onPush&&(X=64);const le=cm(c,Py(i),null,X,c[e.index],e,l,U,null,null,S);return y.firstCreatePass&&fm(y,e,s.length-1),mh(c,le),c[e.index]=le}(cA,Lt,Io,Fa,gr,Oe,ze);ns=oc(zt,Jn),Lt&&function Oh(e,n,i,s){if(s)ai(e,i,["ng-version","17.3.12"]);else{const{attrs:c,classes:l}=function Uo(e){const n=[],i=[];let s=1,c=2;for(;s<e.length;){let l=e[s];if("string"==typeof l)2===c?""!==l&&n.push(l,e[++s]):8===c&&i.push(l);else{if(!bi(c))break;c=l}s++}return{attrs:n,classes:i}}(n.selectors[0]);c&&ai(e,i,c),l&&l.length>0&&Cy(e,i,l.join(" "))}}(ze,Io,Lt,s),void 0!==i&&function CI(e,n,i){const s=e.projection=[];for(let c=0;c<n.length;c++){const l=i[c];s.push(null!=l?Array.from(l):null)}}(ns,this.ngContentSelectors,i),fi=function Rh(e,n,i,s,c,l){const p=jr(),y=c[Qt],S=Ws(p,c);dm(y,c,p,i,null,s);for(let X=0;X<i.length;X++)Ns(na(c,y,p.directiveStart+X,p),c);rI(y,c,p),S&&Ns(S,c);const U=na(c,y,p.directiveStart+p.componentOffset,p);if(e[Ii]=c[Ii]=U,null!==l)for(const X of l)X(U,n);return um(y,p,c),U}(UR,Io,Fa,zp,gr,[wI]),yh(zt,gr,null)}finally{kl()}return new Mh(this.componentType,fi,qu(ns,gr),gr,ns)}finally{B(l)}}}class Mh extends Bc{constructor(n,i,s,c,l){super(),this.location=s,this._rootLView=c,this._tNode=l,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new wh(c,void 0,!1),this.componentType=n}setInput(n,i){const s=this._tNode.inputs;let c;if(null!==s&&(c=s[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const l=this._rootLView;ul(l[Qt],l,c,n,i),this.previousInputValues.set(n,i),id(Go(this._tNode.index,l))}}get injector(){return new Os(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function wI(){const e=jr();Fl(kt()[Qt],e)}let $c=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=TI}return e})();function TI(){return kh(jr(),kt())}const DI=$c,Nh=class extends DI{constructor(n,i,s){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=s}get element(){return qu(this._hostTNode,this._hostLView)}get injector(){return new Os(this._hostTNode,this._hostLView)}get parentInjector(){const n=Dr(this._hostTNode,this._hostLView);if(Bl(n)){const i=xc(n,this._hostLView),s=ru(n);return new Os(i[Qt].data[s+8],i)}return new Os(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=Vm(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-Ri}createEmbeddedView(n,i,s){let c,l;"number"==typeof s?c=s:null!=s&&(c=s.index,l=s.injector);const y=n.createEmbeddedViewImpl(i||{},l,null);return this.insertImpl(y,c,xa(this._hostTNode,null)),y}createComponent(n,i,s,c,l){const p=n&&!function Vt(e){return"function"==typeof e}(n);let y;if(p)y=i;else{const ft=i||{};y=ft.index,s=ft.injector,c=ft.projectableNodes,l=ft.environmentInjector||ft.ngModuleRef}const S=p?n:new hd(dr(n)),U=s||this.parentInjector;if(!l&&null==S.ngModule){const Lt=(p?U:this.parentInjector).get(Si,null);Lt&&(l=Lt)}dr(S.componentType??{});const ze=S.create(U,c,null,l);return this.insertImpl(ze.hostView,y,xa(this._hostTNode,null)),ze}insert(n,i){return this.insertImpl(n,i,!0)}insertImpl(n,i,s){const c=n._lView;if(function Dl(e){return Ms(e[mr])}(c)){const y=this.indexOf(n);if(-1!==y)this.detach(y);else{const S=c[mr],U=new Nh(S,S[Ei],S[mr]);U.detach(U.indexOf(n))}}const l=this._adjustIndex(i),p=this._lContainer;return vh(p,c,l,s),n.attachToViewContainerRef(),co(xh(p),l,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=Vm(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),s=ch(this._lContainer,i);s&&(uo(xh(this._lContainer),i),uh(s[Qt],s))}detach(n){const i=this._adjustIndex(n,-1),s=ch(this._lContainer,i);return s&&null!=uo(xh(this._lContainer),i)?new wh(s):null}_adjustIndex(n,i=0){return n??this.length+i}};function Vm(e){return e[8]}function xh(e){return e[8]||(e[8]=[])}function kh(e,n){let i;const s=n[e.index];return Ms(s)?i=s:(i=gh(s,n,null,e),n[e.index]=i,mh(n,i)),Lm(i,n,e,s),new Nh(i,e,n)}let Lm=function dp(e,n,i,s){if(e[Ao])return;let c;c=8&i.type?Mr(s):function Iu(e,n){const i=e[nr],s=i.createComment(""),c=Ws(n,e);return yc(i,im(i,c),s,function r0(e,n){return e.nextSibling(n)}(i,c),!1),s}(n,i),e[Ao]=c},up=()=>!1;class fd{constructor(n){this.queryList=n,this.matches=null}clone(){return new fd(this.queryList)}setDirty(){this.queryList.setDirty()}}class hp{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const s=null!==n.contentQueries?n.contentQueries[0]:i.length,c=[];for(let l=0;l<s;l++){const p=i.getByIndex(l);c.push(this.queries[p.indexInDeclarationView].clone())}return new hp(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==Gm(n,i).matches&&this.queries[i].setDirty()}}class fp{constructor(n,i,s=null){this.flags=i,this.read=s,this.predicate="string"==typeof n?function SI(e){return e.split(",").map(n=>n.trim())}(n):n}}class pl{constructor(n=[]){this.queries=n}elementStart(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let s=0;s<this.length;s++){const c=null!==i?i.length:0,l=this.getByIndex(s).embeddedTView(n,c);l&&(l.indexInDeclarationView=s,null!==i?i.push(l):i=[l])}return null!==i?new pl(i):null}template(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Hc{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Hc(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const i=this._declarationNodeIndex;let s=n.parent;for(;null!==s&&8&s.type&&s.index!==i;)s=s.parent;return i===(null!==s?s.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const s=this.metadata.predicate;if(Array.isArray(s))for(let c=0;c<s.length;c++){const l=s[c];this.matchTNodeWithReadOption(n,i,Um(i,l)),this.matchTNodeWithReadOption(n,i,za(i,n,l,!1,!1))}else s===Th?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,za(i,n,s,!1,!1))}matchTNodeWithReadOption(n,i,s){if(null!==s){const c=this.metadata.read;if(null!==c)if(c===fc||c===$c||c===Th&&4&i.type)this.addMatch(i.index,-2);else{const l=za(i,n,c,!1,!1);null!==l&&this.addMatch(i.index,l)}else this.addMatch(i.index,s)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function Um(e,n){const i=e.localNames;if(null!==i)for(let s=0;s<i.length;s+=2)if(i[s]===n)return i[s+1];return null}function iv(e,n,i,s){return-1===i?function bI(e,n){return 11&e.type?qu(e,n):4&e.type?Jf(e,n):null}(n,e):-2===i?function sv(e,n,i){return i===fc?qu(n,e):i===Th?Jf(n,e):i===$c?kh(n,e):void 0}(e,n,s):na(e,e[Qt],i,n)}function Bm(e,n,i,s){const c=n[$o].queries[s];if(null===c.matches){const l=e.data,p=i.matches,y=[];for(let S=0;null!==p&&S<p.length;S+=2){const U=p[S];y.push(U<0?null:iv(n,l[U],p[S+1],i.metadata.read))}c.matches=y}return c.matches}function Fh(e,n,i,s){const c=e.queries.getByIndex(i),l=c.matches;if(null!==l){const p=Bm(e,n,c,i);for(let y=0;y<l.length;y+=2){const S=l[y];if(S>0)s.push(p[y/2]);else{const U=l[y+1],X=n[-S];for(let le=Ri;le<X.length;le++){const Oe=X[le];Oe[Dc]===Oe[mr]&&Fh(Oe[Qt],Oe,U,s)}if(null!==X[Sa]){const le=X[Sa];for(let Oe=0;Oe<le.length;Oe++){const ze=le[Oe];Fh(ze[Qt],ze,U,s)}}}}}return s}function jm(e,n,i){const s=new cg(!(4&~i));return function ZE(e,n,i,s){const c=ga(n);c.push(i),e.firstCreatePass&&Mo(e).push(s,c.length-1)}(e,n,s,s.destroy),(n[$o]??=new hp).queries.push(new fd(s))-1}function Hm(e,n,i){null===e.queries&&(e.queries=new pl),e.queries.track(new Hc(n,i))}function Gm(e,n){return e.queries.getByIndex(n)}function Cu(e,n){const i=e[Qt],s=Gm(i,n);return s.crossesNgTemplate?Fh(i,e,n,[]):Bm(i,e,s,n)}function Lh(e){return function Cc(e){return"function"==typeof e&&void 0!==e[Pe]}(e)&&"function"==typeof e.set}function Ep(e){let n=function yv(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),i=!0;const s=[e];for(;n;){let c;if(ro(e))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new mt(903,!1);c=n.\u0275dir}if(c){if(i){s.push(c);const p=e;p.inputs=Gh(e.inputs),p.inputTransforms=Gh(e.inputTransforms),p.declaredInputs=Gh(e.declaredInputs),p.outputs=Gh(e.outputs);const y=c.hostBindings;y&&Ev(e,y);const S=c.viewQuery,U=c.contentQueries;if(S&&Ym(e,S),U&&Jm(e,U),Hh(e,c),_r(e.outputs,c.outputs),ro(c)&&c.data.animation){const X=e.data;X.animation=(X.animation||[]).concat(c.data.animation)}}const l=c.features;if(l)for(let p=0;p<l.length;p++){const y=l[p];y&&y.ngInherit&&y(e),y===Ep&&(i=!1)}}n=Object.getPrototypeOf(n)}!function vv(e){let n=0,i=null;for(let s=e.length-1;s>=0;s--){const c=e[s];c.hostVars=n+=c.hostVars,c.hostAttrs=O(c.hostAttrs,i=O(i,c.hostAttrs))}}(s)}function Hh(e,n){for(const i in n.inputs){if(!n.inputs.hasOwnProperty(i)||e.inputs.hasOwnProperty(i))continue;const s=n.inputs[i];if(void 0!==s&&(e.inputs[i]=s,e.declaredInputs[i]=n.declaredInputs[i],null!==n.inputTransforms)){const c=Array.isArray(s)?s[0]:s;if(!n.inputTransforms.hasOwnProperty(c))continue;e.inputTransforms??={},e.inputTransforms[c]=n.inputTransforms[c]}}}function Gh(e){return e===Ls?{}:e===vr?[]:e}function Ym(e,n){const i=e.viewQuery;e.viewQuery=i?(s,c)=>{n(s,c),i(s,c)}:n}function Jm(e,n){const i=e.contentQueries;e.contentQueries=i?(s,c,l)=>{n(s,c,l),i(s,c,l)}:n}function Ev(e,n){const i=e.hostBindings;e.hostBindings=i?(s,c)=>{n(s,c),i(s,c)}:n}function sa(e){const n=e.inputConfig,i={};for(const s in n)if(n.hasOwnProperty(s)){const c=n[s];Array.isArray(c)&&c[3]&&(i[s]=c[3])}e.inputTransforms=i}class Tu{}class t_{}function gd(e,n){return new k(e,n??null,[])}class k extends Tu{constructor(n,i,s){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cp(this);const c=ji(n);this._bootstrapComponents=pa(c.bootstrap),this._r3Injector=Bd(n,i,[{provide:Tu,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver},...s],qt(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class z extends t_{constructor(n){super(),this.moduleType=n}create(n){return new k(this.moduleType,n,[])}}class ht extends Tu{constructor(n){super(),this.componentFactoryResolver=new cp(this),this.instance=null;const i=new $i([...n.providers,{provide:Tu,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver}],n.parent||Ss(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Rt(e,n,i=null){return new ht({providers:e,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let Xa=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new yn.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ar({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vl(e){return!!LI(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function LI(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Du(e,n,i){return e[n]=i}function Qs(e,n,i){return!Object.is(e[n],i)&&(e[n]=i,!0)}function Wh(e,n,i,s){const c=Qs(e,n,i);return Qs(e,n+1,s)||c}function Cp(e,n,i,s,c,l,p,y){const S=kt(),U=Rr(),X=e+Jn,le=U.firstCreatePass?function hA(e,n,i,s,c,l,p,y,S){const U=n.consts,X=fh(n,e,4,p||null,io(U,y));Oy(n,i,X,io(U,S)),Fl(n,X);const le=X.tView=qf(2,X,s,c,l,n.directiveRegistry,n.pipeRegistry,null,n.schemas,U,null);return null!==n.queries&&(n.queries.template(n,X),le.queries=n.queries.embeddedTView(X)),X}(X,U,S,n,i,s,c,l,p):U.data[X];fa(le,!1);const Oe=I0(U,S,le,e);Ji()&&lh(U,S,Oe,le),Ns(Oe,S);const ze=gh(Oe,S,Oe,le);return S[X]=ze,mh(S,ze),function lp(e,n,i){return up(e,n,i)}(ze,le,S),qc(le)&&lm(U,S,le),null!=p&&Sy(S,le,y),Cp}let I0=function C0(e,n,i,s){return Pa(!0),n[nr].createComment("")};function qI(e,n,i,s){const c=kt();return Qs(c,ta(),n)&&(Rr(),Na(Oi(),c,e,n,i,s)),qI}function Mv(e,n){return e<<17|n<<2}function _d(e){return e>>17&32767}function QI(e){return 2|e}function qh(e){return(131068&e)>>2}function XI(e,n){return-131069&e|n<<2}function YI(e){return 1|e}function Z0(e,n,i,s){const c=e[i+1],l=null===n;let p=s?_d(c):qh(c),y=!1;for(;0!==p&&(!1===y||l);){const U=e[p+1];JA(e[p],n)&&(y=!0,e[p+1]=s?YI(U):QI(U)),p=s?_d(U):qh(U)}y&&(e[i+1]=s?QI(c):YI(c))}function JA(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&ii(e,n)>=0}function JI(e,n,i){const s=kt();return Qs(s,ta(),n)&&ia(Rr(),Oi(),s,e,n,s[nr],i,!1),JI}function ZI(e,n,i,s,c){const p=c?"class":"style";ul(e,i,n.inputs[p],p,s)}function eC(e,n){return function zc(e,n,i,s){const c=kt(),l=Rr(),p=function Ks(e){const n=qn.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,i}(2);l.firstUpdatePass&&function cw(e,n,i,s){const c=e.data;if(null===c[i+1]){const l=c[Is()],p=function aw(e,n){return n>=e.expandoStartIndex}(e,i);(function hw(e,n){return!!(e.flags&(n?8:16))})(l,s)&&null===n&&!p&&(n=!1),n=function ab(e,n,i,s){const c=function Md(e){const n=qn.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let l=s?n.residualClasses:n.residualStyles;if(null===c)0===(s?n.classBindings:n.styleBindings)&&(i=c_(i=tC(null,e,n,i,s),n.attrs,s),l=null);else{const p=n.directiveStylingLast;if(-1===p||e[p]!==c)if(i=tC(c,e,n,i,s),null===l){let S=function cb(e,n,i){const s=i?n.classBindings:n.styleBindings;if(0!==qh(s))return e[_d(s)]}(e,n,s);void 0!==S&&Array.isArray(S)&&(S=tC(null,e,n,S[1],s),S=c_(S,n.attrs,s),function ub(e,n,i,s){e[_d(i?n.classBindings:n.styleBindings)]=s}(e,n,s,S))}else l=function lb(e,n,i){let s;const c=n.directiveEnd;for(let l=1+n.directiveStylingLast;l<c;l++)s=c_(s,e[l].hostAttrs,i);return c_(s,n.attrs,i)}(e,n,s)}return void 0!==l&&(s?n.residualClasses=l:n.residualStyles=l),i}(c,l,n,s),function XA(e,n,i,s,c,l){let p=l?n.classBindings:n.styleBindings,y=_d(p),S=qh(p);e[s]=i;let X,U=!1;if(Array.isArray(i)?(X=i[1],(null===X||ii(i,X)>0)&&(U=!0)):X=i,c)if(0!==S){const Oe=_d(e[y+1]);e[s+1]=Mv(Oe,y),0!==Oe&&(e[Oe+1]=XI(e[Oe+1],s)),e[y+1]=function qA(e,n){return 131071&e|n<<17}(e[y+1],s)}else e[s+1]=Mv(y,0),0!==y&&(e[y+1]=XI(e[y+1],s)),y=s;else e[s+1]=Mv(S,0),0===y?y=s:e[S+1]=XI(e[S+1],s),S=s;U&&(e[s+1]=QI(e[s+1])),Z0(e,X,s,!0),Z0(e,X,s,!1),function YA(e,n,i,s,c){const l=c?e.residualClasses:e.residualStyles;null!=l&&"string"==typeof n&&ii(l,n)>=0&&(i[s+1]=YI(i[s+1]))}(n,X,e,s,l),p=Mv(y,S),l?n.classBindings=p:n.styleBindings=p}(c,l,n,i,p,s)}}(l,e,p,s),n!==Er&&Qs(c,p,n)&&function lw(e,n,i,s,c,l,p,y){if(!(3&n.type))return;const S=e.data,U=S[y+1],X=function QA(e){return!(1&~e)}(U)?dw(S,n,i,c,qh(U),p):void 0;Rv(X)||(Rv(l)||function KA(e){return!(2&~e)}(U)&&(l=dw(S,null,i,c,y,p)),function WE(e,n,i,s,c){if(n)c?e.addClass(i,s):e.removeClass(i,s);else{let l=-1===s.indexOf("-")?void 0:qa.DashCase;null==c?e.removeStyle(i,s,l):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),l|=qa.Important),e.setStyle(i,s,c,l))}}(s,p,Jc(Is(),i),c,l))}(l,l.data[Is()],c,c[nr],e,c[p+1]=function pb(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=qt(fu(e)))),e}(n,i),s,p)}(e,n,null,!0),eC}function tC(e,n,i,s,c){let l=null;const p=i.directiveEnd;let y=i.directiveStylingLast;for(-1===y?y=i.directiveStart:y++;y<p&&(l=n[y],s=c_(s,l.hostAttrs,c),l!==e);)y++;return null!==e&&(i.directiveStylingLast=y),s}function c_(e,n,i){const s=i?1:2;let c=-1;if(null!==n)for(let l=0;l<n.length;l++){const p=n[l];"number"==typeof p?c=p:c===s&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),qr(e,p,!!i||n[++l]))}return void 0===e?null:e}function dw(e,n,i,s,c,l){const p=null===n;let y;for(;c>0;){const S=e[c],U=Array.isArray(S),X=U?S[1]:S,le=null===X;let Oe=i[c+1];Oe===Er&&(Oe=le?vr:void 0);let ze=le?bs(Oe,s):X===s?Oe:void 0;if(U&&!Rv(ze)&&(ze=bs(S,s)),Rv(ze)&&(y=ze,p))return y;const ft=e[c+1];c=p?_d(ft):qh(ft)}if(null!==n){let S=l?n.residualClasses:n.residualStyles;null!=S&&(y=bs(S,s))}return y}function Rv(e){return void 0!==e}function Ov(e,n,i,s){const c=kt(),l=Rr(),p=Jn+e,y=c[nr],S=l.firstCreatePass?function Vb(e,n,i,s,c,l){const p=n.consts,S=fh(n,e,2,s,io(p,c));return Oy(n,i,S,io(p,l)),null!==S.attrs&&dd(S,S.attrs,!1),null!==S.mergedAttrs&&dd(S,S.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,S),S}(p,l,c,n,i,s):l.data[p],U=mw(l,c,S,y,n,e);c[p]=U;const X=qc(S);return fa(S,!0),cl(y,U,S),!function i_(e){return!(32&~e.flags)}(S)&&Ji()&&lh(l,c,U,S),0===function wd(){return qn.lFrame.elementDepthCount}()&&Ns(U,c),function rf(){qn.lFrame.elementDepthCount++}(),X&&(lm(l,c,S),um(l,S,c)),null!==s&&Sy(c,S),Ov}function Nv(){let e=jr();Lu()?function Rs(){qn.lFrame.isParent=!1}():(e=e.parent,fa(e,!1));const n=e;(function Dd(e){return qn.skipHydrationRootTNode===e})(n)&&function Kp(){qn.skipHydrationRootTNode=null}(),function Td(){qn.lFrame.elementDepthCount--}();const i=Rr();return i.firstCreatePass&&(Fl(i,e),Kc(e)&&i.queries.elementEnd(e)),null!=n.classesWithoutHost&&function xd(e){return!!(8&e.flags)}(n)&&ZI(i,n,kt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function kd(e){return!!(16&e.flags)}(n)&&ZI(i,n,kt(),n.stylesWithoutHost,!1),Nv}function oC(e,n,i,s){return Ov(e,n,i,s),Nv(),oC}let mw=(e,n,i,s,c,l)=>(Pa(!0),al(s,c,function df(){return qn.lFrame.currentNamespace}()));function vw(){return kt()}const Qh=void 0;var Gb=["en",[["a","p"],["AM","PM"],Qh],[["AM","PM"],Qh,Qh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qh,"{1} 'at' {0}",Qh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Hb(e){const i=Math.floor(Math.abs(e)),s=e.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===s?1:5}];let Up={};function uC(e){const n=function zb(e){return e.toLowerCase().replace(/_/g,"-")}(e);let i=ww(n);if(i)return i;const s=n.split("-")[0];if(i=ww(s),i)return i;if("en"===s)return Gb;throw new mt(701,!1)}function Cw(e){return uC(e)[Bp.PluralCase]}function ww(e){return e in Up||(Up[e]=On.ng&&On.ng.common&&On.ng.common.locales&&On.ng.common.locales[e]),Up[e]}var Bp=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Bp||{});const jp="en-US";let Tw=jp;function hC(e,n,i,s){const c=kt(),l=Rr(),p=jr();return fC(l,c,c[nr],p,e,n,s),hC}function fC(e,n,i,s,c,l,p){const y=qc(s),U=e.firstCreatePass&&Mo(e),X=n[Ii],le=ga(n);let Oe=!0;if(3&s.type||p){const Lt=Ws(s,n),tn=p?p(Lt):Lt,an=le.length,zt=p?fi=>p(Mr(fi[s.index])):s.index;let gr=null;if(!p&&y&&(gr=function jS(e,n,i,s){const c=e.cleanup;if(null!=c)for(let l=0;l<c.length-1;l+=2){const p=c[l];if(p===i&&c[l+1]===s){const y=n[Gs],S=c[l+2];return y.length>S?y[S]:null}"string"==typeof p&&(l+=2)}return null}(e,n,c,s.index)),null!==gr)(gr.__ngLastListenerFn__||gr).__ngNextListenerFn__=l,gr.__ngLastListenerFn__=l,Oe=!1;else{l=Jw(s,n,X,l,!1);const fi=i.listen(tn,c,l);le.push(l,fi),U&&U.push(c,zt,an,an+1)}}else l=Jw(s,n,X,l,!1);const ze=s.outputs;let ft;if(Oe&&null!==ze&&(ft=ze[c])){const Lt=ft.length;if(Lt)for(let tn=0;tn<Lt;tn+=2){const ns=n[ft[tn]][ft[tn+1]].subscribe(l),Io=le.length;le.push(l,ns),U&&U.push(c,s.index,Io,-(Io+1))}}}function Yw(e,n,i,s){const c=B(null);try{return zs(6,n,i),!1!==i(s)}catch(l){return _h(e,l),!1}finally{zs(7,n,i),B(c)}}function Jw(e,n,i,s,c){return function l(p){if(p===Function)return s;id(e.componentOffset>-1?Go(e.index,n):n);let S=Yw(n,i,s,p),U=l.__ngNextListenerFn__;for(;U;)S=Yw(n,i,U,p)&&S,U=U.__ngNextListenerFn__;return c&&!1===S&&p.preventDefault(),S}}function Zw(e=1){return function Oc(e){return(qn.lFrame.contextLView=function Al(e,n){for(;e>0;)n=n[hi],e--;return n}(e,qn.lFrame.contextLView))[Ii]}(e)}function uT(e,n,i,s){!function ov(e,n,i,s){const c=Rr();if(c.firstCreatePass){const l=jr();Hm(c,new fp(n,i,s),l.index),function av(e,n){const i=e.contentQueries||(e.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(e.queries.length-1,n)}(c,e),!(2&~i)&&(c.staticContentQueries=!0)}return jm(c,kt(),i)}(e,n,i,s)}function lT(e,n,i){!function $m(e,n,i){const s=Rr();return s.firstCreatePass&&(Hm(s,new fp(e,n,i),-1),!(2&~n)&&(s.staticViewQueries=!0)),jm(s,kt(),n)}(e,n,i)}function dT(e){const n=kt(),i=Rr(),s=Nl();xl(s+1);const c=Gm(i,s);if(e.dirty&&function ef(e){return!(4&~e[_n])}(n)===!(2&~c.metadata.flags)){if(null===c.matches)e.reset([]);else{const l=Cu(n,s);e.reset(l,gf),e.notifyOnChanges()}return!0}return!1}function hT(){return function Vh(e,n){return e[$o].queries[n].queryList}(kt(),Nl())}function CT(e,n=""){const i=kt(),s=Rr(),c=e+Jn,l=s.firstCreatePass?fh(s,c,1,n,null):s.data[c],p=wT(s,i,l,n,e);i[c]=p,Ji()&&lh(s,i,p,l),fa(l,!1)}let wT=(e,n,i,s,c)=>(Pa(!0),function fy(e,n){return e.createText(n)}(n[nr],s));function gC(e){return Lv("",e,""),gC}function Lv(e,n,i){const s=kt(),c=function Mp(e,n,i,s){return Qs(e,ta(),i)?n+Nn(i)+s:Er}(s,e,n,i);return c!==Er&&function ma(e,n,i){const s=Jc(n,e);!function jf(e,n,i){e.setValue(n,i)}(e[nr],s,i)}(s,Is(),c),Lv}function mC(e,n,i){Lh(n)&&(n=n());const s=kt();return Qs(s,ta(),n)&&ia(Rr(),Oi(),s,e,n,s[nr],i,!1),mC}function OT(e,n){const i=Lh(e);return i&&e.set(n),i}function _C(e,n){const i=kt(),s=Rr(),c=jr();return fC(s,i,i[nr],c,e,n),_C}function yC(e,n,i,s,c){if(e=xe(e),Array.isArray(e))for(let l=0;l<e.length;l++)yC(e[l],n,i,s,c);else{const l=Rr(),p=kt(),y=jr();let S=Dn(e)?e:xe(e.provide);const U=Ta(e),X=1048575&y.providerIndexes,le=y.directiveStart,Oe=y.providerIndexes>>20;if(Dn(e)||!e.multi){const ze=new Ma(U,c,td),ft=EC(S,n,c?X:X+Oe,le);-1===ft?(oo(jt(y,p),l,S),vC(l,e,n.length),n.push(S),y.directiveStart++,y.directiveEnd++,c&&(y.providerIndexes+=1048576),i.push(ze),p.push(ze)):(i[ft]=ze,p[ft]=ze)}else{const ze=EC(S,n,X+Oe,le),ft=EC(S,n,X,X+Oe),tn=ft>=0&&i[ft];if(c&&!tn||!c&&!(ze>=0&&i[ze])){oo(jt(y,p),l,S);const an=function lP(e,n,i,s,c){const l=new Ma(e,i,td);return l.multi=[],l.index=n,l.componentProviders=0,NT(l,c,s&&!i),l}(c?uP:cP,i.length,c,s,U);!c&&tn&&(i[ft].providerFactory=an),vC(l,e,n.length,0),n.push(S),y.directiveStart++,y.directiveEnd++,c&&(y.providerIndexes+=1048576),i.push(an),p.push(an)}else vC(l,e,ze>-1?ze:ft,NT(i[c?ft:ze],U,!c&&s));!c&&s&&tn&&i[ft].componentProviders++}}}function vC(e,n,i,s){const c=Dn(n),l=function ei(e){return!!e.useClass}(n);if(c||l){const S=(l?xe(n.useClass):n).prototype.ngOnDestroy;if(S){const U=e.destroyHooks||(e.destroyHooks=[]);if(!c&&n.multi){const X=U.indexOf(i);-1===X?U.push(i,[s,S]):U[X+1].push(s,S)}else U.push(i,S)}}}function NT(e,n,i){return i&&e.componentProviders++,e.multi.push(n)-1}function EC(e,n,i,s){for(let c=i;c<s;c++)if(n[c]===e)return c;return-1}function cP(e,n,i,s){return IC(this.multi,[])}function uP(e,n,i,s){const c=this.multi;let l;if(this.providerFactory){const p=this.providerFactory.componentProviders,y=na(i,i[Qt],this.providerFactory.index,s);l=y.slice(0,p),IC(c,l);for(let S=p;S<y.length;S++)l.push(y[S])}else l=[],IC(c,l);return l}function IC(e,n){for(let i=0;i<e.length;i++)n.push((0,e[i])());return n}function xT(e,n=[]){return i=>{i.providersResolver=(s,c)=>function aP(e,n,i){const s=Rr();if(s.firstCreatePass){const c=ro(e);yC(i,s.data,s.blueprint,c,!0),yC(n,s.data,s.blueprint,c,!1)}}(s,c?c(e):e,n)}}let dP=(()=>{class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const s=Ae(0,i.type),c=s.length>0?Rt([s],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,c)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ar({token:e,providedIn:"environment",factory:()=>new e(li(Si))})}return e})();function kT(e){Ic("NgStandalone"),e.getStandaloneInjector=n=>n.get(dP).getOrCreateStandaloneInjector(e)}function FT(e,n,i){const s=e.\u0275cmp;s.directiveDefs=I(n,!1),s.pipeDefs=I(i,!0)}function g_(e,n){const i=e[n];return i===Er?void 0:i}function BT(e,n,i,s,c,l,p,y){const S=n+i;return function Tv(e,n,i,s,c){const l=Wh(e,n,i,s);return Qs(e,n+2,c)||l}(e,S,c,l,p)?Du(e,S+3,y?s.call(y,c,l,p):s(c,l,p)):g_(e,S+3)}function HT(e,n){const i=Rr();let s;const c=e+Jn;i.firstCreatePass?(s=function wP(e,n){if(n)for(let i=n.length-1;i>=0;i--){const s=n[i];if(e===s.name)return s}}(n,i.pipeRegistry),i.data[c]=s,s.onDestroy&&(i.destroyHooks??=[]).push(c,s.onDestroy)):s=i.data[c];const l=s.factory||(s.factory=zi(s.type)),y=wr(td);try{const S=h(!1),U=l();return h(S),function qS(e,n,i,s){i>=e.data.length&&(e.data[i]=null,e.blueprint[i]=null),n[i]=s}(i,kt(),c,U),U}finally{wr(y)}}function GT(e,n,i){const s=e+Jn,c=kt(),l=ac(c,s);return m_(c,s)?function LT(e,n,i,s,c,l){const p=n+i;return Qs(e,p,c)?Du(e,p+1,l?s.call(l,c):s(c)):g_(e,p+1)}(c,Bs(),n,l.transform,i,l):l.transform(i)}function zT(e,n,i,s){const c=e+Jn,l=kt(),p=ac(l,c);return m_(l,c)?function UT(e,n,i,s,c,l,p){const y=n+i;return Wh(e,y,c,l)?Du(e,y+2,p?s.call(p,c,l):s(c,l)):g_(e,y+2)}(l,Bs(),n,p.transform,i,s,p):p.transform(i,s)}function WT(e,n,i,s,c){const l=e+Jn,p=kt(),y=ac(p,l);return m_(p,l)?BT(p,Bs(),n,y.transform,i,s,c,y):y.transform(i,s,c)}function m_(e,n){return e[Qt].data[n].pure}class cD{constructor(n){this.full=n;const i=n.split(".");this.major=i[0],this.minor=i[1],this.patch=i.slice(2).join(".")}}const qP=new cD("17.3.12");let uD=(()=>{class e{log(i){console.log(i)}warn(i){console.warn(i)}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ar({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const pD=new Xe(""),gD=new Xe("");let bC,EM=(()=>{class e{constructor(i,s,c){this._ngZone=i,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,bC||(function IM(e){bC=e}(c),c.addToWindow(s)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Cs.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(i)||(clearTimeout(s.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,s,c){let l=-1;s&&s>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==l),i()},s)),this._callbacks.push({doneCb:i,timeoutId:l,updateCb:c})}whenStable(i,s,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,s,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,s,c){return[]}static#e=this.\u0275fac=function(s){return new(s||e)(li(Cs),li(mD),li(gD))};static#t=this.\u0275prov=ar({token:e,factory:e.\u0275fac})}return e})(),mD=(()=>{class e{constructor(){this._applications=new Map}registerApplication(i,s){this._applications.set(i,s)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,s=!0){return bC?.findTestabilityInTree(this,i,s)??null}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ar({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function SC(e){return!!e&&"function"==typeof e.then}function _D(e){return!!e&&"function"==typeof e.subscribe}const yD=new Xe("");let PC=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s}),this.appInits=ln(yD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const c of this.appInits){const l=c();if(SC(l))i.push(l);else if(_D(l)){const p=new Promise((y,S)=>{l.subscribe({complete:y,error:S})});i.push(p)}}const s=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{s()}).catch(c=>{this.reject(c)}),0===i.length&&s(),this.initialized=!0}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ar({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const MC=new Xe("");function ID(e,n){return Array.isArray(n)?n.reduce(ID,e):{...e,...n}}let yd=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ln(rg),this.afterRenderEffectManager=ln(cd),this.externalTestViews=new Set,this.beforeRender=new jn.B,this.afterTick=new jn.B,this.componentTypes=[],this.components=[],this.isStable=ln(Xa).hasPendingTasks.pipe((0,Qn.T)(i=>!i)),this._injector=ln(Si)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,s){const c=i instanceof sd;if(!this._injector.get(PC).done)throw!c&&Yi(i),new mt(405,!1);let p;p=c?i:this._injector.get(Ah).resolveComponentFactory(i),this.componentTypes.push(p.componentType);const y=function CM(e){return e.isBoundToModule}(p)?void 0:this._injector.get(Tu),U=p.create(ao.NULL,[],s||p.selector,y),X=U.location.nativeElement,le=U.injector.get(pD,null);return le?.registerApplication(X),U.onDestroy(()=>{this.detachView(U.hostView),$v(this.components,U),le?.unregisterApplication(X)}),this._loadComponent(U),U}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new mt(101,!1);const s=B(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(c){this.internalErrorHandler(c)}finally{this.afterTick.next(),this._runningTick=!1,B(s)}}detectChangesInAttachedViews(i){let s=0;const c=this.afterRenderEffectManager;for(;;){if(s===Ih)throw new mt(103,!1);if(i){const l=0===s;this.beforeRender.next(l);for(let{_lView:p,notifyErrorHandler:y}of this._views)TM(p,l,y)}if(s++,c.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>RC(l))&&(c.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>RC(l))))break}}attachView(i){const s=i;this._views.push(s),s.attachToAppRef(this)}detachView(i){const s=i;$v(this._views,s),s.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const s=this._injector.get(MC,[]);[...this._bootstrapListeners,...s].forEach(c=>c(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>$v(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new mt(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ar({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $v(e,n){const i=e.indexOf(n);i>-1&&e.splice(i,1)}function TM(e,n,i){!n&&!RC(e)||function DM(e,n,i){let s;i?(s=0,e[_n]|=1024):s=64&e[_n]?0:1,Ch(e,n,s)}(e,i,n)}function RC(e){return bl(e)}class AM{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let bM=(()=>{class e{compileModuleSync(i){return new z(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const s=this.compileModuleSync(i),l=pa(ji(i).declarations).reduce((p,y)=>{const S=dr(y);return S&&p.push(new hd(S)),p},[]);return new AM(s,l)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ar({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),MM=(()=>{class e{constructor(){this.zone=ln(Cs),this.applicationRef=ln(yd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ar({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function RM(){const e=ln(Cs),n=ln(bo);return i=>e.runOutsideAngular(()=>n.handleError(i))}let NM=(()=>{class e{constructor(){this.subscription=new it.yU,this.initialized=!1,this.zone=ln(Cs),this.pendingTasks=ln(Xa)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Cs.assertNotInAngularZone(),queueMicrotask(()=>{null!==i&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Cs.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ar({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Gv=new Xe("",{providedIn:"root",factory:()=>ln(Gv,sr.Optional|sr.SkipSelf)||function xM(){return typeof $localize<"u"&&$localize.locale||jp}()}),kM=new Xe("",{providedIn:"root",factory:()=>"USD"}),OC=new Xe("");let DD=(()=>{class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,s){const c=function Jy(e="zone.js",n){return"noop"===e?new Rm:"zone.js"===e?new Cs(n):e}(s?.ngZone,function TD(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:s?.ngZoneEventCoalescing,runCoalescing:s?.ngZoneRunCoalescing}));return c.run(()=>{const l=function he(e,n,i){return new k(e,n,i)}(i.moduleType,this.injector,function wD(e){return[{provide:Cs,useFactory:e},{provide:Lo,multi:!0,useFactory:()=>{const n=ln(MM,{optional:!0});return()=>n.initialize()}},{provide:Lo,multi:!0,useFactory:()=>{const n=ln(NM);return()=>{n.initialize()}}},{provide:rg,useFactory:RM}]}(()=>c)),p=l.injector.get(bo,null);return c.runOutsideAngular(()=>{const y=c.onError.subscribe({next:S=>{p.handleError(S)}});l.onDestroy(()=>{$v(this._modules,l),y.unsubscribe()})}),function ED(e,n,i){try{const s=i();return SC(s)?s.catch(c=>{throw n.runOutsideAngular(()=>e.handleError(c)),c}):s}catch(s){throw n.runOutsideAngular(()=>e.handleError(s)),s}}(p,c,()=>{const y=l.injector.get(PC);return y.runInitializers(),y.donePromise.then(()=>(function Dw(e){"string"==typeof e&&(Tw=e.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Gv,jp)||jp),this._moduleDoBootstrap(l),l))})})}bootstrapModule(i,s=[]){const c=ID({},s);return function PM(e,n,i){const s=new z(i);return Promise.resolve(s)}(0,0,i).then(l=>this.bootstrapModuleFactory(l,c))}_moduleDoBootstrap(i){const s=i.injector.get(yd);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(c=>s.bootstrap(c));else{if(!i.instance.ngDoBootstrap)throw new mt(-403,!1);i.instance.ngDoBootstrap(s)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new mt(404,!1);this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s());const i=this._injector.get(OC,null);i&&(i.forEach(s=>s()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(s){return new(s||e)(li(ao))};static#t=this.\u0275prov=ar({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),vd=null;const AD=new Xe("");function bD(e,n,i=[]){const s=`Platform: ${n}`,c=new Xe(s);return(l=[])=>{let p=NC();if(!p||p.injector.get(AD,!1)){const y=[...i,...l,{provide:c,useValue:!0}];e?e(y):function VM(e){if(vd&&!vd.get(AD,!1))throw new mt(400,!1);(function vD(){!function An(e){xn=e}(()=>{throw new mt(600,!1)})})(),vd=e;const n=e.get(DD);(function PD(e){e.get(Tf,null)?.forEach(i=>i())})(e)}(function SD(e=[],n){return ao.create({name:n,providers:[{provide:ci,useValue:"platform"},{provide:OC,useValue:new Set([()=>vd=null])},...e]})}(y,s))}return function LM(e){const n=NC();if(!n)throw new mt(401,!1);return n}()}}function NC(){return vd?.get(DD)??null}function BM(){return!1}let RD=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=jM}return e})();function jM(e){return function $M(e,n,i){if(Jo(e)&&!i){const s=Go(e.index,n);return new wh(s,s)}return 47&e.type?new wh(n[Gn],n):null}(jr(),kt(),!(16&~e))}class kD{constructor(){}supports(n){return vl(n)}create(n){return new KM(n)}}const WM=(e,n)=>n;class KM{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||WM}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,s=this._removalsHead,c=0,l=null;for(;i||s;){const p=!s||i&&i.currentIndex<VD(s,c,l)?i:s,y=VD(p,c,l),S=p.currentIndex;if(p===s)c--,s=s._nextRemoved;else if(i=i._next,null==p.previousIndex)c++;else{l||(l=[]);const U=y-c,X=S-c;if(U!=X){for(let Oe=0;Oe<U;Oe++){const ze=Oe<l.length?l[Oe]:l[Oe]=0,ft=ze+Oe;X<=ft&&ft<U&&(l[Oe]=ze+1)}l[p.previousIndex]=X-U}}y!==S&&n(p,y,S)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!vl(n))throw new mt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,l,p,i=this._itHead,s=!1;if(Array.isArray(n)){this.length=n.length;for(let y=0;y<this.length;y++)l=n[y],p=this._trackByFn(y,l),null!==i&&Object.is(i.trackById,p)?(s&&(i=this._verifyReinsertion(i,l,p,y)),Object.is(i.item,l)||this._addIdentityChange(i,l)):(i=this._mismatch(i,l,p,y),s=!0),i=i._next}else c=0,function lA(e,n){if(Array.isArray(e))for(let i=0;i<e.length;i++)n(e[i]);else{const i=e[Symbol.iterator]();let s;for(;!(s=i.next()).done;)n(s.value)}}(n,y=>{p=this._trackByFn(c,y),null!==i&&Object.is(i.trackById,p)?(s&&(i=this._verifyReinsertion(i,y,p,c)),Object.is(i.item,y)||this._addIdentityChange(i,y)):(i=this._mismatch(i,y,p,c),s=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,s,c){let l;return null===n?l=this._itTail:(l=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,l,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(s,c))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,l,c)):n=this._addAfter(new qM(i,s),l,c),n}_verifyReinsertion(n,i,s,c){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==l?n=this._reinsertAfter(l,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,l=n._nextRemoved;return null===c?this._removalsHead=l:c._nextRemoved=l,null===l?this._removalsTail=c:l._prevRemoved=c,this._insertAfter(n,i,s),this._addToMoves(n,s),n}_moveAfter(n,i,s){return this._unlink(n),this._insertAfter(n,i,s),this._addToMoves(n,s),n}_addAfter(n,i,s){return this._insertAfter(n,i,s),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,s){const c=null===i?this._itHead:i._next;return n._next=c,n._prev=i,null===c?this._itTail=n:c._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new FD),this._linkedRecords.put(n),n.currentIndex=s,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,s=n._next;return null===i?this._itHead=s:i._next=s,null===s?this._itTail=i:s._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FD),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class qM{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QM{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===i||i<=s.currentIndex)&&Object.is(s.trackById,n))return s;return null}remove(n){const i=n._prevDup,s=n._nextDup;return null===i?this._head=s:i._nextDup=s,null===s?this._tail=i:s._prevDup=i,null===this._head}}class FD{constructor(){this.map=new Map}put(n){const i=n.trackById;let s=this.map.get(i);s||(s=new QM,this.map.set(i,s)),s.add(n)}get(n,i){const c=this.map.get(n);return c?c.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VD(e,n,i){const s=e.previousIndex;if(null===s)return s;let c=0;return i&&s<i.length&&(c=i[s]),s+n+c}class LD{constructor(){}supports(n){return n instanceof Map||LI(n)}create(){return new XM}}class XM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||LI(n)))throw new mt(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(s,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,s),this._appendAfter=i,i=i._next;else{const l=this._getOrCreateRecordForKey(c,s);i=this._insertBeforeOrAppend(i,l)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let s=i;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const s=n._prev;return i._next=n,i._prev=s,n._prev=i,s&&(s._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,i);const l=c._prev,p=c._next;return l&&(l._next=p),p&&(p._prev=l),c._next=null,c._prev=null,c}const s=new YM(n);return this._records.set(n,s),s.currentValue=i,this._addToAdditions(s),s}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(s=>i(n[s],s))}}class YM{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UD(){return new LC([new kD])}let LC=(()=>{class e{static#e=this.\u0275prov=ar({token:e,providedIn:"root",factory:UD});constructor(i){this.factories=i}static create(i,s){if(null!=s){const c=s.factories.slice();i=i.concat(c)}return new e(i)}static extend(i){return{provide:e,useFactory:s=>e.create(i,s||UD()),deps:[[e,new os,new ss]]}}find(i){const s=this.factories.find(c=>c.supports(i));if(null!=s)return s;throw new mt(901,!1)}}return e})();function BD(){return new UC([new LD])}let UC=(()=>{class e{static#e=this.\u0275prov=ar({token:e,providedIn:"root",factory:BD});constructor(i){this.factories=i}static create(i,s){if(s){const c=s.factories.slice();i=i.concat(c)}return new e(i)}static extend(i){return{provide:e,useFactory:s=>e.create(i,s||BD()),deps:[[e,new os,new ss]]}}find(i){const s=this.factories.find(c=>c.supports(i));if(s)return s;throw new mt(901,!1)}}return e})();const eR=bD(null,"core",[]);let tR=(()=>{class e{constructor(i){}static#e=this.\u0275fac=function(s){return new(s||e)(li(yd))};static#t=this.\u0275mod=To({type:e});static#n=this.\u0275inj=us({})}return e})();function MR(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function OR(e){const n=B(null);try{return e()}finally{B(n)}}function LR(e){const n=dr(e);if(!n)return null;const i=new hd(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},1182:(Zt,qe,x)=>{x.d(qe,{DS:()=>_t,X8:()=>vt,$z:()=>An,UB:()=>Qe,yy:()=>xn,ZP:()=>fn,AU:()=>ke,CP:()=>Fn,gF:()=>ct}),x(2438);var V=x(177),M=x(4438),w=x(1825),se=x(9253),Pe=x(1413),B=x(7673),Le=x(1985),$e=x(8455),ve=x(6365),_e=x(8750),He=x(983),Tt=x(9326),Be=x(941),At=x(5558),yt=x(6354),st=x(6129);class bt extends Pe.B{constructor(Gt=1/0,un=1/0,Jt=st.U){super(),this._bufferSize=Gt,this._windowTime=un,this._timestampProvider=Jt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=un===1/0,this._bufferSize=Math.max(1,Gt),this._windowTime=Math.max(1,un)}next(Gt){const{isStopped:un,_buffer:Jt,_infiniteTimeWindow:en,_timestampProvider:vn,_windowTime:En}=this;un||(Jt.push(Gt),!en&&Jt.push(vn.now()+En)),this._trimBuffer(),super.next(Gt)}_subscribe(Gt){this._throwIfClosed(),this._trimBuffer();const un=this._innerSubscribe(Gt),{_infiniteTimeWindow:Jt,_buffer:en}=this,vn=en.slice();for(let En=0;En<vn.length&&!Gt.closed;En+=Jt?1:2)Gt.next(vn[En]);return this._checkFinalizedStatuses(Gt),un}_trimBuffer(){const{_bufferSize:Gt,_timestampProvider:un,_buffer:Jt,_infiniteTimeWindow:en}=this,vn=(en?1:2)*Gt;if(Gt<1/0&&vn<Jt.length&&Jt.splice(0,Jt.length-vn),!en){const En=un.now();let jn=0;for(let it=1;it<Jt.length&&Jt[it]<=En;it+=2)jn=it;jn&&Jt.splice(0,jn+1)}}}var gt=x(7707),ue=x(9974);function ae(Ze,Gt,...un){if(!0===Gt)return void Ze();if(!1===Gt)return;const Jt=new gt.Ms({next:()=>{Jt.unsubscribe(),Ze()}});return(0,_e.Tg)(Gt(...un)).subscribe(Jt)}function Ve(Ze,Gt,un){let Jt,en=!1;return Ze&&"object"==typeof Ze?({bufferSize:Jt=1/0,windowTime:Gt=1/0,refCount:en=!1,scheduler:un}=Ze):Jt=Ze??1/0,function de(Ze={}){const{connector:Gt=(()=>new Pe.B),resetOnError:un=!0,resetOnComplete:Jt=!0,resetOnRefCountZero:en=!0}=Ze;return vn=>{let En,jn,it,yn=0,Qn=!1,or=!1;const St=()=>{jn?.unsubscribe(),jn=void 0},mt=()=>{St(),En=it=void 0,Qn=or=!1},ni=()=>{const Ot=En;mt(),Ot?.unsubscribe()};return(0,ue.N)((Ot,nt)=>{yn++,!or&&!Qn&&St();const Mt=it=it??Gt();nt.add(()=>{yn--,0===yn&&!or&&!Qn&&(jn=ae(ni,en))}),Mt.subscribe(nt),!En&&yn>0&&(En=new gt.Ms({next:er=>Mt.next(er),error:er=>{or=!0,St(),jn=ae(mt,un,er),Mt.error(er)},complete:()=>{Qn=!0,St(),jn=ae(mt,Jt),Mt.complete()}}),(0,_e.Tg)(Ot).subscribe(En))})(vn)}}({connector:()=>new bt(Jt,Gt,un),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:en})}var Ye=x(1594),et=x(8071);function ce(Ze,Gt){return(0,et.T)(Gt)?(0,At.n)(()=>Ze,Gt):(0,At.n)(()=>Ze)}var Ne=x(6745),We=x(5964),pn=x(7935);const Fn=new M.nKC("angularfire2.auth.use-emulator"),xn=new M.nKC("angularfire2.auth.settings"),fn=new M.nKC("angularfire2.auth.tenant-id"),An=new M.nKC("angularfire2.auth.langugage-code"),ke=new M.nKC("angularfire2.auth.use-device-language"),Qe=new M.nKC("angularfire.auth.persistence"),ct=(Ze,Gt,un,Jt,en,vn,En,jn)=>(0,se.BM)(`${Ze.name}.auth`,"AngularFireAuth",Ze.name,()=>{const it=Gt.runOutsideAngular(()=>Ze.auth());if(un&&it.useEmulator(...un),Jt&&(it.tenantId=Jt),it.languageCode=en,vn&&it.useDeviceLanguage(),En)for(const[yn,Qn]of Object.entries(En))it.settings[yn]=Qn;return jn&&it.setPersistence(jn),it},[un,Jt,en,vn,En,jn]);let _t=(()=>{class Ze{authState;idToken;user;idTokenResult;credential;constructor(un,Jt,en,vn,En,jn,it,yn,Qn,or,St,mt){const ni=new Pe.B,Ot=(0,B.of)(void 0).pipe((0,Be.Q)(En.outsideAngular),(0,At.n)(()=>vn.runOutsideAngular(()=>Promise.resolve().then(x.bind(x,2438)))),(0,yt.T)(()=>(0,se.iB)(un,vn,Jt)),(0,yt.T)(nt=>ct(nt,vn,jn,yn,Qn,or,it,St)),Ve({bufferSize:1,refCount:!1}));if((0,V.Vy)(en))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,B.of)(null);else{Ot.pipe((0,Ye.$)()).subscribe();const nt=Ot.pipe((0,At.n)(ir=>ir.getRedirectResult().then(wn=>wn,()=>null)),w.U0,Ve({bufferSize:1,refCount:!1})),Mt=Ot.pipe((0,At.n)(ir=>new Le.c(wn=>({unsubscribe:vn.runOutsideAngular(()=>ir.onAuthStateChanged(Pn=>wn.next(Pn),Pn=>wn.error(Pn),()=>wn.complete()))})))),er=Ot.pipe((0,At.n)(ir=>new Le.c(wn=>({unsubscribe:vn.runOutsideAngular(()=>ir.onIdTokenChanged(Pn=>wn.next(Pn),Pn=>wn.error(Pn),()=>wn.complete()))}))));this.authState=nt.pipe(ce(Mt),(0,Ne._)(En.outsideAngular),(0,Be.Q)(En.insideAngular)),this.user=nt.pipe(ce(er),(0,Ne._)(En.outsideAngular),(0,Be.Q)(En.insideAngular)),this.idToken=this.user.pipe((0,At.n)(ir=>ir?(0,$e.H)(ir.getIdToken()):(0,B.of)(null))),this.idTokenResult=this.user.pipe((0,At.n)(ir=>ir?(0,$e.H)(ir.getIdTokenResult()):(0,B.of)(null))),this.credential=function De(...Ze){const Gt=(0,Tt.lI)(Ze),un=(0,Tt.R0)(Ze,1/0),Jt=Ze;return Jt.length?1===Jt.length?(0,_e.Tg)(Jt[0]):(0,ve.U)(un)((0,$e.H)(Jt,Gt)):He.w}(nt,ni,this.authState.pipe((0,We.p)(ir=>!ir))).pipe((0,yt.T)(ir=>ir?.user?ir:null),(0,Ne._)(En.outsideAngular),(0,Be.Q)(En.insideAngular))}return(0,se.Gt)(this,Ot,vn,{spy:{apply:(nt,Mt,er)=>{(nt.startsWith("signIn")||nt.startsWith("createUser"))&&er.then(ir=>ni.next(ir))}}})}static \u0275fac=function(Jt){return new(Jt||Ze)(M.KVO(se.rx),M.KVO(se.uP,8),M.KVO(M.Agw),M.KVO(M.SKi),M.KVO(w.u0),M.KVO(Fn,8),M.KVO(xn,8),M.KVO(fn,8),M.KVO(An,8),M.KVO(ke,8),M.KVO(Qe,8),M.KVO(w.Jv,8))};static \u0275prov=M.jDH({token:Ze,factory:Ze.\u0275fac,providedIn:"any"})}return Ze})(),vt=(()=>{class Ze{constructor(){pn.A.registerVersion("angularfire",w.xv.full,"auth-compat")}static \u0275fac=function(Jt){return new(Jt||Ze)};static \u0275mod=M.$C({type:Ze});static \u0275inj=M.G2t({providers:[_t]})}return Ze})()},9253:(Zt,qe,x)=>{x.d(qe,{BM:()=>De,Gt:()=>se,bf:()=>Tt,e7:()=>Pe,iB:()=>ve,rx:()=>Le,uP:()=>$e});var _=x(4438),V=x(1825),M=x(7935);const w=["ngOnDestroy"],se=(st,bt,gt,ue={})=>new Proxy(st,{get:(de,ae)=>gt.runOutsideAngular(()=>{if(st[ae])return ue?.spy?.get&&ue.spy.get(ae,st[ae]),st[ae];if(w.indexOf(ae)>-1)return()=>{};const Ve=bt.toPromise().then(Ye=>{const et=Ye?.[ae];return"function"==typeof et?et.bind(Ye):et?.then?et.then(ce=>gt.run(()=>ce)):gt.run(()=>et)});return new Proxy(()=>{},{get:(Ye,et)=>Ve[et],apply:(Ye,et,ce)=>Ve.then(Ne=>{const We=Ne?.(...ce);return ue?.spy?.apply&&ue.spy.apply(ae,ce,We),We})})})}),Pe=(st,bt)=>{bt.forEach(gt=>{Object.getOwnPropertyNames(gt.prototype||gt).forEach(ue=>{Object.defineProperty(st.prototype,ue,Object.getOwnPropertyDescriptor(gt.prototype||gt,ue))})})};class B{constructor(bt){return bt}}const Le=new _.nKC("angularfire2.app.options"),$e=new _.nKC("angularfire2.app.name");function ve(st,bt,gt){const de="object"==typeof gt&&gt||{};de.name=de.name||"string"==typeof gt&&gt||"[DEFAULT]";const Ve=M.A.apps.filter(Ye=>Ye&&Ye.name===de.name)[0]||bt.runOutsideAngular(()=>M.A.initializeApp(st,de));try{if(JSON.stringify(st)!==JSON.stringify(Ve.options)){const Ye=!!module.hot;_e("error",`${Ve.name} Firebase App already initialized with different options${Ye?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new B(Ve)}const _e=(st,...bt)=>{(0,_.naY)()&&typeof console<"u"&&console[st](...bt)},He={provide:B,useFactory:ve,deps:[Le,_.SKi,[new _.Xx1,$e]]};let Tt=(()=>{class st{static initializeApp(gt,ue){return{ngModule:st,providers:[{provide:Le,useValue:gt},{provide:$e,useValue:ue}]}}constructor(gt){M.A.registerVersion("angularfire",V.xv.full,"core"),M.A.registerVersion("angularfire",V.xv.full,"app-compat"),M.A.registerVersion("angular",_.xvI.full,gt.toString())}static \u0275fac=function(ue){return new(ue||st)(_.KVO(_.Agw))};static \u0275mod=_.$C({type:st});static \u0275inj=_.G2t({providers:[He]})}return st})();function De(st,bt,gt,ue,de){const[,ae,Ve]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===st)||[];if(ae)return function Be(st,bt){try{return st.toString()===bt.toString()}catch{return st===bt}}(de,Ve)||(yt("error",`${bt} was already initialized on the ${gt} Firebase App with different settings.${At?" You may need to reload as Firebase is not HMR aware.":""}`),yt("warn",{is:de,was:Ve})),ae;{const Ye=ue();return globalThis.\u0275AngularfireInstanceCache.push([st,Ye,de]),Ye}}const At=typeof module<"u"&&!!module.hot,yt=(st,...bt)=>{(0,_.naY)()&&typeof console<"u"&&console[st](...bt)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:(Zt,qe,x)=>{x.d(qe,{xv:()=>Be,U0:()=>pn,u0:()=>Ve,Jv:()=>bt});var _=x(4438),V=x(7852);(0,V.registerVersion)("firebase","10.13.1","app");var se=x(6780),B=x(9687);const $e=new class Le extends B.q{}(class Pe extends se.R{constructor(An,ke){super(An,ke),this.scheduler=An,this.work=ke}schedule(An,ke=0){return ke>0?super.schedule(An,ke):(this.delay=ke,this.state=An,this.scheduler.flush(this),this)}execute(An,ke){return ke>0||this.closed?super.execute(An,ke):this._execute(An,ke)}requestAsyncId(An,ke,Qe=0){return null!=Qe&&Qe>0||null==Qe&&this.delay>0?super.requestAsyncId(An,ke,Qe):(An.flush(this),0)}});var _e=x(3236),He=x(8141),Tt=x(6745),De=x(941);const Be=new _.RxE("ANGULARFIRE2_VERSION");class bt{constructor(){return((fn,An)=>{const ke=(0,V.getApps)(),Qe=[];return ke.forEach(ct=>{ct.container.getProvider(fn).instances.forEach(vt=>{Qe.includes(vt)||Qe.push(vt)})}),Qe})(gt)}}const gt="app-check";function ue(){}class de{zone;delegate;constructor(An,ke=$e){this.zone=An,this.delegate=ke}now(){return this.delegate.now()}schedule(An,ke,Qe){const ct=this.zone;return this.delegate.schedule(function(vt){ct.runGuarded(()=>{An.apply(this,[vt])})},ke,Qe)}}class ae{zone;task=null;constructor(An){this.zone=An}call(An,ke){const Qe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ue,{},ue,ue)),ke.pipe((0,He.M)({next:Qe,complete:Qe,error:Qe})).subscribe(An).add(Qe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ve=(()=>{class fn{ngZone;outsideAngular;insideAngular;constructor(ke){this.ngZone=ke,this.outsideAngular=ke.runOutsideAngular(()=>new de(Zone.current)),this.insideAngular=ke.run(()=>new de(Zone.current,_e.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Qe){return new(Qe||fn)(_.KVO(_.SKi))};static \u0275prov=_.jDH({token:fn,factory:fn.\u0275fac,providedIn:"root"})}return fn})();function pn(fn){return function bn(fn){return function(ke){return(ke=ke.lift(new ae(fn.ngZone))).pipe((0,Tt._)(fn.outsideAngular),(0,De.Q)(fn.insideAngular))}}(function Ye(){const fn=globalThis.\u0275AngularFireScheduler;if(!fn)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return fn}())(fn)}},9417:(Zt,qe,x)=>{x.d(qe,{BC:()=>St,JD:()=>Zr,MR:()=>Js,X1:()=>ai,YN:()=>ds,cb:()=>mt,j4:()=>gs,k0:()=>gt,me:()=>De,ok:()=>ho,qT:()=>Co,vS:()=>cr,wz:()=>li,xH:()=>is,y7:()=>eo});var _=x(4438),V=x(177),M=x(8455),w=x(7468),se=x(6354);let Pe=(()=>{class G{constructor(O,ee){this._renderer=O,this._elementRef=ee,this.onChange=Se=>{},this.onTouched=()=>{}}setProperty(O,ee){this._renderer.setProperty(this._elementRef.nativeElement,O,ee)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}static#e=this.\u0275fac=function(ee){return new(ee||G)(_.rXU(_.sFG),_.rXU(_.aKT))};static#t=this.\u0275dir=_.FsC({type:G})}return G})(),B=(()=>{class G extends Pe{static#e=this.\u0275fac=(()=>{let O;return function(Se){return(O||(O=_.xGo(G)))(Se||G)}})();static#t=this.\u0275dir=_.FsC({type:G,features:[_.Vt3]})}return G})();const Le=new _.nKC(""),_e={provide:Le,useExisting:(0,_.Rfq)(()=>De),multi:!0},Tt=new _.nKC("");let De=(()=>{class G extends Pe{constructor(O,ee,Se){super(O,ee),this._compositionMode=Se,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function He(){const G=(0,V.QT)()?(0,V.QT)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(O){this.setProperty("value",O??"")}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}static#e=this.\u0275fac=function(ee){return new(ee||G)(_.rXU(_.sFG),_.rXU(_.aKT),_.rXU(Tt,8))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(ee,Se){1&ee&&_.bIt("input",function(tr){return Se._handleInput(tr.target.value)})("blur",function(){return Se.onTouched()})("compositionstart",function(){return Se._compositionStart()})("compositionend",function(tr){return Se._compositionEnd(tr.target.value)})},features:[_.Jv_([_e]),_.Vt3]})}return G})();function Be(G){return null==G||("string"==typeof G||Array.isArray(G))&&0===G.length}function At(G){return null!=G&&"number"==typeof G.length}const yt=new _.nKC(""),st=new _.nKC(""),bt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class gt{static min(K){return function ue(G){return K=>{if(Be(K.value)||Be(G))return null;const O=parseFloat(K.value);return!isNaN(O)&&O<G?{min:{min:G,actual:K.value}}:null}}(K)}static max(K){return function de(G){return K=>{if(Be(K.value)||Be(G))return null;const O=parseFloat(K.value);return!isNaN(O)&&O>G?{max:{max:G,actual:K.value}}:null}}(K)}static required(K){return function ae(G){return Be(G.value)?{required:!0}:null}(K)}static requiredTrue(K){return function Ve(G){return!0===G.value?null:{required:!0}}(K)}static email(K){return function Ye(G){return Be(G.value)||bt.test(G.value)?null:{email:!0}}(K)}static minLength(K){return function et(G){return K=>Be(K.value)||!At(K.value)?null:K.value.length<G?{minlength:{requiredLength:G,actualLength:K.value.length}}:null}(K)}static maxLength(K){return function ce(G){return K=>At(K.value)&&K.value.length>G?{maxlength:{requiredLength:G,actualLength:K.value.length}}:null}(K)}static pattern(K){return function Ne(G){if(!G)return We;let K,O;return"string"==typeof G?(O="","^"!==G.charAt(0)&&(O+="^"),O+=G,"$"!==G.charAt(G.length-1)&&(O+="$"),K=new RegExp(O)):(O=G.toString(),K=G),ee=>{if(Be(ee.value))return null;const Se=ee.value;return K.test(Se)?null:{pattern:{requiredPattern:O,actualValue:Se}}}}(K)}static nullValidator(K){return null}static compose(K){return ke(K)}static composeAsync(K){return ct(K)}}function We(G){return null}function pn(G){return null!=G}function bn(G){return(0,_.jNT)(G)?(0,M.H)(G):G}function Fn(G){let K={};return G.forEach(O=>{K=null!=O?{...K,...O}:K}),0===Object.keys(K).length?null:K}function xn(G,K){return K.map(O=>O(G))}function An(G){return G.map(K=>function fn(G){return!G.validate}(K)?K:O=>K.validate(O))}function ke(G){if(!G)return null;const K=G.filter(pn);return 0==K.length?null:function(O){return Fn(xn(O,K))}}function Qe(G){return null!=G?ke(An(G)):null}function ct(G){if(!G)return null;const K=G.filter(pn);return 0==K.length?null:function(O){const ee=xn(O,K).map(bn);return(0,w.p)(ee).pipe((0,se.T)(Fn))}}function _t(G){return null!=G?ct(An(G)):null}function vt(G,K){return null===G?[K]:Array.isArray(G)?[...G,K]:[G,K]}function Ze(G){return G._rawValidators}function Gt(G){return G._rawAsyncValidators}function un(G){return G?Array.isArray(G)?G:[G]:[]}function Jt(G,K){return Array.isArray(G)?G.includes(K):G===K}function en(G,K){const O=un(K);return un(G).forEach(Se=>{Jt(O,Se)||O.push(Se)}),O}function vn(G,K){return un(K).filter(O=>!Jt(G,O))}class En{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(K){this._rawValidators=K||[],this._composedValidatorFn=Qe(this._rawValidators)}_setAsyncValidators(K){this._rawAsyncValidators=K||[],this._composedAsyncValidatorFn=_t(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(K){this._onDestroyCallbacks.push(K)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(K=>K()),this._onDestroyCallbacks=[]}reset(K=void 0){this.control&&this.control.reset(K)}hasError(K,O){return!!this.control&&this.control.hasError(K,O)}getError(K,O){return this.control?this.control.getError(K,O):null}}class jn extends En{get formDirective(){return null}get path(){return null}}class it extends En{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yn{constructor(K){this._cd=K}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let St=(()=>{class G extends yn{constructor(O){super(O)}static#e=this.\u0275fac=function(ee){return new(ee||G)(_.rXU(it,2))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(ee,Se){2&ee&&_.AVh("ng-untouched",Se.isUntouched)("ng-touched",Se.isTouched)("ng-pristine",Se.isPristine)("ng-dirty",Se.isDirty)("ng-valid",Se.isValid)("ng-invalid",Se.isInvalid)("ng-pending",Se.isPending)},features:[_.Vt3]})}return G})(),mt=(()=>{class G extends yn{constructor(O){super(O)}static#e=this.\u0275fac=function(ee){return new(ee||G)(_.rXU(jn,10))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(ee,Se){2&ee&&_.AVh("ng-untouched",Se.isUntouched)("ng-touched",Se.isTouched)("ng-pristine",Se.isPristine)("ng-dirty",Se.isDirty)("ng-valid",Se.isValid)("ng-invalid",Se.isInvalid)("ng-pending",Se.isPending)("ng-submitted",Se.isSubmitted)},features:[_.Vt3]})}return G})();const Vn="VALID",_r="INVALID",qt="PENDING",Xt="DISABLED";function Kr(G){return(we(G)?G.validators:G)||null}function Yr(G,K){return(we(K)?K.asyncValidators:G)||null}function we(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}function Ce(G,K,O){const ee=G.controls;if(!(K?Object.keys(ee):ee).length)throw new _.wOt(1e3,"");if(!ee[O])throw new _.wOt(1001,"")}function Ke(G,K,O){G._forEachChild((ee,Se)=>{if(void 0===O[Se])throw new _.wOt(1002,"")})}class Nt{constructor(K,O){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(K),this._assignAsyncValidators(O)}get validator(){return this._composedValidatorFn}set validator(K){this._rawValidators=this._composedValidatorFn=K}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(K){this._rawAsyncValidators=this._composedAsyncValidatorFn=K}get parent(){return this._parent}get valid(){return this.status===Vn}get invalid(){return this.status===_r}get pending(){return this.status==qt}get disabled(){return this.status===Xt}get enabled(){return this.status!==Xt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(K){this._assignValidators(K)}setAsyncValidators(K){this._assignAsyncValidators(K)}addValidators(K){this.setValidators(en(K,this._rawValidators))}addAsyncValidators(K){this.setAsyncValidators(en(K,this._rawAsyncValidators))}removeValidators(K){this.setValidators(vn(K,this._rawValidators))}removeAsyncValidators(K){this.setAsyncValidators(vn(K,this._rawAsyncValidators))}hasValidator(K){return Jt(this._rawValidators,K)}hasAsyncValidator(K){return Jt(this._rawAsyncValidators,K)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(K={}){this.touched=!0,this._parent&&!K.onlySelf&&this._parent.markAsTouched(K)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(K=>K.markAllAsTouched())}markAsUntouched(K={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}markAsDirty(K={}){this.pristine=!1,this._parent&&!K.onlySelf&&this._parent.markAsDirty(K)}markAsPristine(K={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}markAsPending(K={}){this.status=qt,!1!==K.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!K.onlySelf&&this._parent.markAsPending(K)}disable(K={}){const O=this._parentMarkedDirty(K.onlySelf);this.status=Xt,this.errors=null,this._forEachChild(ee=>{ee.disable({...K,onlySelf:!0})}),this._updateValue(),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...K,skipPristineCheck:O}),this._onDisabledChange.forEach(ee=>ee(!0))}enable(K={}){const O=this._parentMarkedDirty(K.onlySelf);this.status=Vn,this._forEachChild(ee=>{ee.enable({...K,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent}),this._updateAncestors({...K,skipPristineCheck:O}),this._onDisabledChange.forEach(ee=>ee(!1))}_updateAncestors(K){this._parent&&!K.onlySelf&&(this._parent.updateValueAndValidity(K),K.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(K){this._parent=K}getRawValue(){return this.value}updateValueAndValidity(K={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vn||this.status===qt)&&this._runAsyncValidator(K.emitEvent)),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!K.onlySelf&&this._parent.updateValueAndValidity(K)}_updateTreeValidity(K={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(K)),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Xt:Vn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(K){if(this.asyncValidator){this.status=qt,this._hasOwnPendingAsyncValidator=!0;const O=bn(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(ee=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ee,{emitEvent:K})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(K,O={}){this.errors=K,this._updateControlsErrors(!1!==O.emitEvent)}get(K){let O=K;return null==O||(Array.isArray(O)||(O=O.split(".")),0===O.length)?null:O.reduce((ee,Se)=>ee&&ee._find(Se),this)}getError(K,O){const ee=O?this.get(O):this;return ee&&ee.errors?ee.errors[K]:null}hasError(K,O){return!!this.getError(K,O)}get root(){let K=this;for(;K._parent;)K=K._parent;return K}_updateControlsErrors(K){this.status=this._calculateStatus(),K&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(K)}_initObservables(){this.valueChanges=new _.bkB,this.statusChanges=new _.bkB}_calculateStatus(){return this._allControlsDisabled()?Xt:this.errors?_r:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(qt)?qt:this._anyControlsHaveStatus(_r)?_r:Vn}_anyControlsHaveStatus(K){return this._anyControls(O=>O.status===K)}_anyControlsDirty(){return this._anyControls(K=>K.dirty)}_anyControlsTouched(){return this._anyControls(K=>K.touched)}_updatePristine(K={}){this.pristine=!this._anyControlsDirty(),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}_updateTouched(K={}){this.touched=this._anyControlsTouched(),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}_registerOnCollectionChange(K){this._onCollectionChange=K}_setUpdateStrategy(K){we(K)&&null!=K.updateOn&&(this._updateOn=K.updateOn)}_parentMarkedDirty(K){return!K&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(K){return null}_assignValidators(K){this._rawValidators=Array.isArray(K)?K.slice():K,this._composedValidatorFn=function Ln(G){return Array.isArray(G)?Qe(G):G||null}(this._rawValidators)}_assignAsyncValidators(K){this._rawAsyncValidators=Array.isArray(K)?K.slice():K,this._composedAsyncValidatorFn=function xe(G){return Array.isArray(G)?_t(G):G||null}(this._rawAsyncValidators)}}class ge extends Nt{constructor(K,O,ee){super(Kr(O),Yr(ee,O)),this.controls=K,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(K,O){return this.controls[K]?this.controls[K]:(this.controls[K]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(K,O,ee={}){this.registerControl(K,O),this.updateValueAndValidity({emitEvent:ee.emitEvent}),this._onCollectionChange()}removeControl(K,O={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(K,O,ee={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],O&&this.registerControl(K,O),this.updateValueAndValidity({emitEvent:ee.emitEvent}),this._onCollectionChange()}contains(K){return this.controls.hasOwnProperty(K)&&this.controls[K].enabled}setValue(K,O={}){Ke(this,0,K),Object.keys(K).forEach(ee=>{Ce(this,!0,ee),this.controls[ee].setValue(K[ee],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(K,O={}){null!=K&&(Object.keys(K).forEach(ee=>{const Se=this.controls[ee];Se&&Se.patchValue(K[ee],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(K={},O={}){this._forEachChild((ee,Se)=>{ee.reset(K?K[Se]:null,{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(K,O,ee)=>(K[ee]=O.getRawValue(),K))}_syncPendingControls(){let K=this._reduceChildren(!1,(O,ee)=>!!ee._syncPendingControls()||O);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){Object.keys(this.controls).forEach(O=>{const ee=this.controls[O];ee&&K(ee,O)})}_setUpControls(){this._forEachChild(K=>{K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(K){for(const[O,ee]of Object.entries(this.controls))if(this.contains(O)&&K(ee))return!0;return!1}_reduceValue(){return this._reduceChildren({},(O,ee,Se)=>((ee.enabled||this.disabled)&&(O[Se]=ee.value),O))}_reduceChildren(K,O){let ee=K;return this._forEachChild((Se,sn)=>{ee=O(ee,Se,sn)}),ee}_allControlsDisabled(){for(const K of Object.keys(this.controls))if(this.controls[K].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(K){return this.controls.hasOwnProperty(K)?this.controls[K]:null}}class me extends ge{}const Ft=new _.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>mn}),mn="always";function Wn(G,K){return[...K.path,G]}function Xn(G,K,O=mn){Lr(G,K),K.valueAccessor.writeValue(G.value),(G.disabled||"always"===O)&&K.valueAccessor.setDisabledState?.(G.disabled),function rs(G,K){K.valueAccessor.registerOnChange(O=>{G._pendingValue=O,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&ar(G,K)})}(G,K),function fs(G,K){const O=(ee,Se)=>{K.valueAccessor.writeValue(ee),Se&&K.viewToModelUpdate(ee)};G.registerOnChange(O),K._registerOnDestroy(()=>{G._unregisterOnChange(O)})}(G,K),function ys(G,K){K.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&ar(G,K),"submit"!==G.updateOn&&G.markAsTouched()})}(G,K),function Me(G,K){if(K.valueAccessor.setDisabledState){const O=ee=>{K.valueAccessor.setDisabledState(ee)};G.registerOnDisabledChange(O),K._registerOnDestroy(()=>{G._unregisterOnDisabledChange(O)})}}(G,K)}function Tn(G,K,O=!0){const ee=()=>{};K.valueAccessor&&(K.valueAccessor.registerOnChange(ee),K.valueAccessor.registerOnTouched(ee)),Jr(G,K),G&&(K._invokeOnDestroyCallbacks(),G._registerOnCollectionChange(()=>{}))}function $t(G,K){G.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(K)})}function Lr(G,K){const O=Ze(G);null!==K.validator?G.setValidators(vt(O,K.validator)):"function"==typeof O&&G.setValidators([O]);const ee=Gt(G);null!==K.asyncValidator?G.setAsyncValidators(vt(ee,K.asyncValidator)):"function"==typeof ee&&G.setAsyncValidators([ee]);const Se=()=>G.updateValueAndValidity();$t(K._rawValidators,Se),$t(K._rawAsyncValidators,Se)}function Jr(G,K){let O=!1;if(null!==G){if(null!==K.validator){const Se=Ze(G);if(Array.isArray(Se)&&Se.length>0){const sn=Se.filter(tr=>tr!==K.validator);sn.length!==Se.length&&(O=!0,G.setValidators(sn))}}if(null!==K.asyncValidator){const Se=Gt(G);if(Array.isArray(Se)&&Se.length>0){const sn=Se.filter(tr=>tr!==K.asyncValidator);sn.length!==Se.length&&(O=!0,G.setAsyncValidators(sn))}}}const ee=()=>{};return $t(K._rawValidators,ee),$t(K._rawAsyncValidators,ee),O}function ar(G,K){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),K.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function ye(G,K){if(!G.hasOwnProperty("model"))return!1;const O=G.model;return!!O.isFirstChange()||!Object.is(K,O.currentValue)}function Xe(G,K){if(!K)return null;let O,ee,Se;return Array.isArray(K),K.forEach(sn=>{sn.constructor===De?O=sn:function Ie(G){return Object.getPrototypeOf(G.constructor)===B}(sn)?ee=sn:Se=sn}),Se||ee||O||null}function si(G,K){const O=G.indexOf(K);O>-1&&G.splice(O,1)}function yr(G){return"object"==typeof G&&null!==G&&2===Object.keys(G).length&&"value"in G&&"disabled"in G}Promise.resolve();const Ai=class extends Nt{constructor(K=null,O,ee){super(Kr(O),Yr(ee,O)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(K),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),we(O)&&(O.nonNullable||O.initialValueIsDefault)&&(this.defaultValue=yr(K)?K.value:K)}setValue(K,O={}){this.value=this._pendingValue=K,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(ee=>ee(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(K,O={}){this.setValue(K,O)}reset(K=this.defaultValue,O={}){this._applyFormState(K),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(K){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(K){this._onChange.push(K)}_unregisterOnChange(K){si(this._onChange,K)}registerOnDisabledChange(K){this._onDisabledChange.push(K)}_unregisterOnDisabledChange(K){si(this._onDisabledChange,K)}_forEachChild(K){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(K){yr(K)?(this.value=this._pendingValue=K.value,K.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=K}},ri={provide:it,useExisting:(0,_.Rfq)(()=>cr)},Nn=Promise.resolve();let cr=(()=>{class G extends it{constructor(O,ee,Se,sn,tr,as){super(),this._changeDetectorRef=tr,this.callSetDisabledState=as,this.control=new Ai,this._registered=!1,this.name="",this.update=new _.bkB,this._parent=O,this._setValidators(ee),this._setAsyncValidators(Se),this.valueAccessor=Xe(0,sn)}ngOnChanges(O){if(this._checkForErrors(),!this._registered||"name"in O){if(this._registered&&(this._checkName(),this.formDirective)){const ee=O.name.previousValue;this.formDirective.removeControl({name:ee,path:this._getPath(ee)})}this._setUpControl()}"isDisabled"in O&&this._updateDisabled(O),ye(O,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Xn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(O){Nn.then(()=>{this.control.setValue(O,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(O){const ee=O.isDisabled.currentValue,Se=0!==ee&&(0,_.L39)(ee);Nn.then(()=>{Se&&!this.control.disabled?this.control.disable():!Se&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(O){return this._parent?Wn(O,this._parent):[O]}static#e=this.\u0275fac=function(ee){return new(ee||G)(_.rXU(jn,9),_.rXU(yt,10),_.rXU(st,10),_.rXU(Le,10),_.rXU(_.gRc,8),_.rXU(Ft,8))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[_.Mj6.None,"disabled","isDisabled"],model:[_.Mj6.None,"ngModel","model"],options:[_.Mj6.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_.Jv_([ri]),_.Vt3,_.OA$]})}return G})(),Co=(()=>{class G{static#e=this.\u0275fac=function(ee){return new(ee||G)};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return G})();const qo={provide:Le,useExisting:(0,_.Rfq)(()=>Js),multi:!0};let Js=(()=>{class G extends B{writeValue(O){this.setProperty("value",parseFloat(O))}registerOnChange(O){this.onChange=ee=>{O(""==ee?null:parseFloat(ee))}}static#e=this.\u0275fac=(()=>{let O;return function(Se){return(O||(O=_.xGo(G)))(Se||G)}})();static#t=this.\u0275dir=_.FsC({type:G,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(ee,Se){1&ee&&_.bIt("change",function(tr){return Se.onChange(tr.target.value)})("input",function(tr){return Se.onChange(tr.target.value)})("blur",function(){return Se.onTouched()})},features:[_.Jv_([qo]),_.Vt3]})}return G})();const wr=new _.nKC(""),Fo={provide:jn,useExisting:(0,_.Rfq)(()=>gs)};let gs=(()=>{class G extends jn{constructor(O,ee,Se){super(),this.callSetDisabledState=Se,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.bkB,this._setValidators(O),this._setAsyncValidators(ee)}ngOnChanges(O){this._checkFormPresent(),O.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Jr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(O){const ee=this.form.get(O.path);return Xn(ee,O,this.callSetDisabledState),ee.updateValueAndValidity({emitEvent:!1}),this.directives.push(O),ee}getControl(O){return this.form.get(O.path)}removeControl(O){Tn(O.control||null,O,!1),function Kt(G,K){const O=G.indexOf(K);O>-1&&G.splice(O,1)}(this.directives,O)}addFormGroup(O){this._setUpFormContainer(O)}removeFormGroup(O){this._cleanUpFormContainer(O)}getFormGroup(O){return this.form.get(O.path)}addFormArray(O){this._setUpFormContainer(O)}removeFormArray(O){this._cleanUpFormContainer(O)}getFormArray(O){return this.form.get(O.path)}updateModel(O,ee){this.form.get(O.path).setValue(ee)}onSubmit(O){return this.submitted=!0,function pt(G,K){G._syncPendingControls(),K.forEach(O=>{const ee=O.control;"submit"===ee.updateOn&&ee._pendingChange&&(O.viewToModelUpdate(ee._pendingValue),ee._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(O),"dialog"===O?.target?.method}onReset(){this.resetForm()}resetForm(O=void 0){this.form.reset(O),this.submitted=!1}_updateDomValue(){this.directives.forEach(O=>{const ee=O.control,Se=this.form.get(O.path);ee!==Se&&(Tn(ee||null,O),(G=>G instanceof Ai)(Se)&&(Xn(Se,O,this.callSetDisabledState),O.control=Se))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(O){const ee=this.form.get(O.path);(function us(G,K){Lr(G,K)})(ee,O),ee.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(O){if(this.form){const ee=this.form.get(O.path);ee&&function Ki(G,K){return Jr(G,K)}(ee,O)&&ee.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Lr(this.form,this),this._oldForm&&Jr(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(ee){return new(ee||G)(_.rXU(yt,10),_.rXU(st,10),_.rXU(Ft,8))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["","formGroup",""]],hostBindings:function(ee,Se){1&ee&&_.bIt("submit",function(tr){return Se.onSubmit(tr)})("reset",function(){return Se.onReset()})},inputs:{form:[_.Mj6.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_.Jv_([Fo]),_.Vt3,_.OA$]})}return G})();const ks={provide:it,useExisting:(0,_.Rfq)(()=>Zr)};let Zr=(()=>{class G extends it{set isDisabled(O){}static#e=this._ngModelWarningSentOnce=!1;constructor(O,ee,Se,sn,tr){super(),this._ngModelWarningConfig=tr,this._added=!1,this.name=null,this.update=new _.bkB,this._ngModelWarningSent=!1,this._parent=O,this._setValidators(ee),this._setAsyncValidators(Se),this.valueAccessor=Xe(0,sn)}ngOnChanges(O){this._added||this._setUpControl(),ye(O,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}get path(){return Wn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(ee){return new(ee||G)(_.rXU(jn,13),_.rXU(yt,10),_.rXU(st,10),_.rXU(Le,10),_.rXU(wr,8))};static#n=this.\u0275dir=_.FsC({type:G,selectors:[["","formControlName",""]],inputs:{name:[_.Mj6.None,"formControlName","name"],isDisabled:[_.Mj6.None,"disabled","isDisabled"],model:[_.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[_.Jv_([ks]),_.Vt3,_.OA$]})}return G})();const Zs={provide:Le,useExisting:(0,_.Rfq)(()=>li),multi:!0};function oi(G,K){return null==G?`${K}`:(K&&"object"==typeof K&&(K="Object"),`${G}: ${K}`.slice(0,50))}let li=(()=>{class G extends B{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(O){this._compareWith=O}writeValue(O){this.value=O;const Se=oi(this._getOptionId(O),O);this.setProperty("value",Se)}registerOnChange(O){this.onChange=ee=>{this.value=this._getOptionValue(ee),O(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(O){for(const ee of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ee),O))return ee;return null}_getOptionValue(O){const ee=function Fr(G){return G.split(":")[0]}(O);return this._optionMap.has(ee)?this._optionMap.get(ee):O}static#e=this.\u0275fac=(()=>{let O;return function(Se){return(O||(O=_.xGo(G)))(Se||G)}})();static#t=this.\u0275dir=_.FsC({type:G,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(ee,Se){1&ee&&_.bIt("change",function(tr){return Se.onChange(tr.target.value)})("blur",function(){return Se.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.Jv_([Zs]),_.Vt3]})}return G})(),is=(()=>{class G{constructor(O,ee,Se){this._element=O,this._renderer=ee,this._select=Se,this._select&&(this.id=this._select._registerOption())}set ngValue(O){null!=this._select&&(this._select._optionMap.set(this.id,O),this._setElementValue(oi(this.id,O)),this._select.writeValue(this._select.value))}set value(O){this._setElementValue(O),this._select&&this._select.writeValue(this._select.value)}_setElementValue(O){this._renderer.setProperty(this._element.nativeElement,"value",O)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(ee){return new(ee||G)(_.rXU(_.aKT),_.rXU(_.sFG),_.rXU(li,9))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return G})();const ln={provide:Le,useExisting:(0,_.Rfq)(()=>Vs),multi:!0};function mi(G,K){return null==G?`${K}`:("string"==typeof K&&(K=`'${K}'`),K&&"object"==typeof K&&(K="Object"),`${G}: ${K}`.slice(0,50))}let Vs=(()=>{class G extends B{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(O){this._compareWith=O}writeValue(O){let ee;if(this.value=O,Array.isArray(O)){const Se=O.map(sn=>this._getOptionId(sn));ee=(sn,tr)=>{sn._setSelected(Se.indexOf(tr.toString())>-1)}}else ee=(Se,sn)=>{Se._setSelected(!1)};this._optionMap.forEach(ee)}registerOnChange(O){this.onChange=ee=>{const Se=[],sn=ee.selectedOptions;if(void 0!==sn){const tr=sn;for(let as=0;as<tr.length;as++){const bi=this._getOptionValue(tr[as].value);Se.push(bi)}}else{const tr=ee.options;for(let as=0;as<tr.length;as++){const Us=tr[as];if(Us.selected){const bi=this._getOptionValue(Us.value);Se.push(bi)}}}this.value=Se,O(Se)}}_registerOption(O){const ee=(this._idCounter++).toString();return this._optionMap.set(ee,O),ee}_getOptionId(O){for(const ee of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ee)._value,O))return ee;return null}_getOptionValue(O){const ee=function Ds(G){return G.split(":")[0]}(O);return this._optionMap.has(ee)?this._optionMap.get(ee)._value:O}static#e=this.\u0275fac=(()=>{let O;return function(Se){return(O||(O=_.xGo(G)))(Se||G)}})();static#t=this.\u0275dir=_.FsC({type:G,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(ee,Se){1&ee&&_.bIt("change",function(tr){return Se.onChange(tr.target)})("blur",function(){return Se.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.Jv_([ln]),_.Vt3]})}return G})(),eo=(()=>{class G{constructor(O,ee,Se){this._element=O,this._renderer=ee,this._select=Se,this._select&&(this.id=this._select._registerOption(this))}set ngValue(O){null!=this._select&&(this._value=O,this._setElementValue(mi(this.id,O)),this._select.writeValue(this._select.value))}set value(O){this._select?(this._value=O,this._setElementValue(mi(this.id,O)),this._select.writeValue(this._select.value)):this._setElementValue(O)}_setElementValue(O){this._renderer.setProperty(this._element.nativeElement,"value",O)}_setSelected(O){this._renderer.setProperty(this._element.nativeElement,"selected",O)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(ee){return new(ee||G)(_.rXU(_.aKT),_.rXU(_.sFG),_.rXU(Vs,9))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return G})(),Ls=(()=>{class G{static#e=this.\u0275fac=function(ee){return new(ee||G)};static#t=this.\u0275mod=_.$C({type:G});static#n=this.\u0275inj=_.G2t({})}return G})();class vr extends Nt{constructor(K,O,ee){super(Kr(O),Yr(ee,O)),this.controls=K,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(K){return this.controls[this._adjustIndex(K)]}push(K,O={}){this.controls.push(K),this._registerControl(K),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}insert(K,O,ee={}){this.controls.splice(K,0,O),this._registerControl(O),this.updateValueAndValidity({emitEvent:ee.emitEvent})}removeAt(K,O={}){let ee=this._adjustIndex(K);ee<0&&(ee=0),this.controls[ee]&&this.controls[ee]._registerOnCollectionChange(()=>{}),this.controls.splice(ee,1),this.updateValueAndValidity({emitEvent:O.emitEvent})}setControl(K,O,ee={}){let Se=this._adjustIndex(K);Se<0&&(Se=0),this.controls[Se]&&this.controls[Se]._registerOnCollectionChange(()=>{}),this.controls.splice(Se,1),O&&(this.controls.splice(Se,0,O),this._registerControl(O)),this.updateValueAndValidity({emitEvent:ee.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(K,O={}){Ke(this,0,K),K.forEach((ee,Se)=>{Ce(this,!1,Se),this.at(Se).setValue(ee,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(K,O={}){null!=K&&(K.forEach((ee,Se)=>{this.at(Se)&&this.at(Se).patchValue(ee,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(K=[],O={}){this._forEachChild((ee,Se)=>{ee.reset(K[Se],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this.controls.map(K=>K.getRawValue())}clear(K={}){this.controls.length<1||(this._forEachChild(O=>O._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:K.emitEvent}))}_adjustIndex(K){return K<0?K+this.length:K}_syncPendingControls(){let K=this.controls.reduce((O,ee)=>!!ee._syncPendingControls()||O,!1);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){this.controls.forEach((O,ee)=>{K(O,ee)})}_updateValue(){this.value=this.controls.filter(K=>K.enabled||this.disabled).map(K=>K.value)}_anyControls(K){return this.controls.some(O=>O.enabled&&K(O))}_setUpControls(){this._forEachChild(K=>this._registerControl(K))}_allControlsDisabled(){for(const K of this.controls)if(K.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(K){K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)}_find(K){return this.at(K)??null}}function Ur(G){return!!G&&(void 0!==G.asyncValidators||void 0!==G.validators||void 0!==G.updateOn)}let ho=(()=>{class G{constructor(){this.useNonNullable=!1}get nonNullable(){const O=new G;return O.useNonNullable=!0,O}group(O,ee=null){const Se=this._reduceControls(O);let sn={};return Ur(ee)?sn=ee:null!==ee&&(sn.validators=ee.validator,sn.asyncValidators=ee.asyncValidator),new ge(Se,sn)}record(O,ee=null){const Se=this._reduceControls(O);return new me(Se,ee)}control(O,ee,Se){let sn={};return this.useNonNullable?(Ur(ee)?sn=ee:(sn.validators=ee,sn.asyncValidators=Se),new Ai(O,{...sn,nonNullable:!0})):new Ai(O,ee,Se)}array(O,ee,Se){const sn=O.map(tr=>this._createControl(tr));return new vr(sn,ee,Se)}_reduceControls(O){const ee={};return Object.keys(O).forEach(Se=>{ee[Se]=this._createControl(O[Se])}),ee}_createControl(O){return O instanceof Ai||O instanceof Nt?O:Array.isArray(O)?this.control(O[0],O.length>1?O[1]:null,O.length>2?O[2]:null):this.control(O)}static#e=this.\u0275fac=function(ee){return new(ee||G)};static#t=this.\u0275prov=_.jDH({token:G,factory:G.\u0275fac,providedIn:"root"})}return G})(),ds=(()=>{class G{static withConfig(O){return{ngModule:G,providers:[{provide:Ft,useValue:O.callSetDisabledState??mn}]}}static#e=this.\u0275fac=function(ee){return new(ee||G)};static#t=this.\u0275mod=_.$C({type:G});static#n=this.\u0275inj=_.G2t({imports:[Ls]})}return G})(),ai=(()=>{class G{static withConfig(O){return{ngModule:G,providers:[{provide:wr,useValue:O.warnOnNgModelWithFormControl??"always"},{provide:Ft,useValue:O.callSetDisabledState??mn}]}}static#e=this.\u0275fac=function(ee){return new(ee||G)};static#t=this.\u0275mod=_.$C({type:G});static#n=this.\u0275inj=_.G2t({imports:[Ls]})}return G})()},345:(Zt,qe,x)=>{x.d(qe,{B7:()=>Ye,Bb:()=>yn,hE:()=>St,sG:()=>vn});var _=x(4438),V=x(177);class M extends V.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class w extends M{static makeCurrent(){(0,V.ZD)(new w)}onAndCancel(we,Ce,Ke){return we.addEventListener(Ce,Ke),()=>{we.removeEventListener(Ce,Ke)}}dispatchEvent(we,Ce){we.dispatchEvent(Ce)}remove(we){we.parentNode&&we.parentNode.removeChild(we)}createElement(we,Ce){return(Ce=Ce||this.getDefaultDocument()).createElement(we)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(we){return we.nodeType===Node.ELEMENT_NODE}isShadowRoot(we){return we instanceof DocumentFragment}getGlobalEventTarget(we,Ce){return"window"===Ce?window:"document"===Ce?we:"body"===Ce?we.body:null}getBaseHref(we){const Ce=function Pe(){return se=se||document.querySelector("base"),se?se.getAttribute("href"):null}();return null==Ce?null:function B(xe){return new URL(xe,document.baseURI).pathname}(Ce)}resetBaseElement(){se=null}getUserAgent(){return window.navigator.userAgent}getCookie(we){return(0,V._b)(document.cookie,we)}}let se=null,$e=(()=>{class xe{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac})}return xe})();const ve=new _.nKC("");let _e=(()=>{class xe{constructor(Ce,Ke){this._zone=Ke,this._eventNameToPlugin=new Map,Ce.forEach(Nt=>{Nt.manager=this}),this._plugins=Ce.slice().reverse()}addEventListener(Ce,Ke,Nt){return this._findPluginFor(Ke).addEventListener(Ce,Ke,Nt)}getZone(){return this._zone}_findPluginFor(Ce){let Ke=this._eventNameToPlugin.get(Ce);if(Ke)return Ke;if(Ke=this._plugins.find(ge=>ge.supports(Ce)),!Ke)throw new _.wOt(5101,!1);return this._eventNameToPlugin.set(Ce,Ke),Ke}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(ve),_.KVO(_.SKi))};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac})}return xe})();class He{constructor(we){this._doc=we}}const Tt="ng-app-id";let De=(()=>{class xe{constructor(Ce,Ke,Nt,ge={}){this.doc=Ce,this.appId=Ke,this.nonce=Nt,this.platformId=ge,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,V.Vy)(ge),this.resetHostNodes()}addStyles(Ce){for(const Ke of Ce)1===this.changeUsageCount(Ke,1)&&this.onStyleAdded(Ke)}removeStyles(Ce){for(const Ke of Ce)this.changeUsageCount(Ke,-1)<=0&&this.onStyleRemoved(Ke)}ngOnDestroy(){const Ce=this.styleNodesInDOM;Ce&&(Ce.forEach(Ke=>Ke.remove()),Ce.clear());for(const Ke of this.getAllStyles())this.onStyleRemoved(Ke);this.resetHostNodes()}addHost(Ce){this.hostNodes.add(Ce);for(const Ke of this.getAllStyles())this.addStyleToHost(Ce,Ke)}removeHost(Ce){this.hostNodes.delete(Ce)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Ce){for(const Ke of this.hostNodes)this.addStyleToHost(Ke,Ce)}onStyleRemoved(Ce){const Ke=this.styleRef;Ke.get(Ce)?.elements?.forEach(Nt=>Nt.remove()),Ke.delete(Ce)}collectServerRenderedStyles(){const Ce=this.doc.head?.querySelectorAll(`style[${Tt}="${this.appId}"]`);if(Ce?.length){const Ke=new Map;return Ce.forEach(Nt=>{null!=Nt.textContent&&Ke.set(Nt.textContent,Nt)}),Ke}return null}changeUsageCount(Ce,Ke){const Nt=this.styleRef;if(Nt.has(Ce)){const ge=Nt.get(Ce);return ge.usage+=Ke,ge.usage}return Nt.set(Ce,{usage:Ke,elements:[]}),Ke}getStyleElement(Ce,Ke){const Nt=this.styleNodesInDOM,ge=Nt?.get(Ke);if(ge?.parentNode===Ce)return Nt.delete(Ke),ge.removeAttribute(Tt),ge;{const q=this.doc.createElement("style");return this.nonce&&q.setAttribute("nonce",this.nonce),q.textContent=Ke,this.platformIsServer&&q.setAttribute(Tt,this.appId),Ce.appendChild(q),q}}addStyleToHost(Ce,Ke){const Nt=this.getStyleElement(Ce,Ke),ge=this.styleRef,q=ge.get(Ke)?.elements;q?q.push(Nt):ge.set(Ke,{elements:[Nt],usage:1})}resetHostNodes(){const Ce=this.hostNodes;Ce.clear(),Ce.add(this.doc.head)}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(V.qQ),_.KVO(_.sZ2),_.KVO(_.BIS,8),_.KVO(_.Agw))};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac})}return xe})();const Be={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},At=/%COMP%/g,ue=new _.nKC("",{providedIn:"root",factory:()=>!0});function Ve(xe,we){return we.map(Ce=>Ce.replace(At,xe))}let Ye=(()=>{class xe{constructor(Ce,Ke,Nt,ge,q,J,ie,me=null){this.eventManager=Ce,this.sharedStylesHost=Ke,this.appId=Nt,this.removeStylesOnCompDestroy=ge,this.doc=q,this.platformId=J,this.ngZone=ie,this.nonce=me,this.rendererByCompId=new Map,this.platformIsServer=(0,V.Vy)(J),this.defaultRenderer=new et(Ce,q,ie,this.platformIsServer)}createRenderer(Ce,Ke){if(!Ce||!Ke)return this.defaultRenderer;this.platformIsServer&&Ke.encapsulation===_.gXe.ShadowDom&&(Ke={...Ke,encapsulation:_.gXe.Emulated});const Nt=this.getOrCreateRenderer(Ce,Ke);return Nt instanceof Fn?Nt.applyToHost(Ce):Nt instanceof bn&&Nt.applyStyles(),Nt}getOrCreateRenderer(Ce,Ke){const Nt=this.rendererByCompId;let ge=Nt.get(Ke.id);if(!ge){const q=this.doc,J=this.ngZone,ie=this.eventManager,me=this.sharedStylesHost,It=this.removeStylesOnCompDestroy,Ft=this.platformIsServer;switch(Ke.encapsulation){case _.gXe.Emulated:ge=new Fn(ie,me,Ke,this.appId,It,q,J,Ft);break;case _.gXe.ShadowDom:return new pn(ie,me,Ce,Ke,q,J,this.nonce,Ft);default:ge=new bn(ie,me,Ke,It,q,J,Ft)}Nt.set(Ke.id,ge)}return ge}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(_e),_.KVO(De),_.KVO(_.sZ2),_.KVO(ue),_.KVO(V.qQ),_.KVO(_.Agw),_.KVO(_.SKi),_.KVO(_.BIS))};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac})}return xe})();class et{constructor(we,Ce,Ke,Nt){this.eventManager=we,this.doc=Ce,this.ngZone=Ke,this.platformIsServer=Nt,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(we,Ce){return Ce?this.doc.createElementNS(Be[Ce]||Ce,we):this.doc.createElement(we)}createComment(we){return this.doc.createComment(we)}createText(we){return this.doc.createTextNode(we)}appendChild(we,Ce){(We(we)?we.content:we).appendChild(Ce)}insertBefore(we,Ce,Ke){we&&(We(we)?we.content:we).insertBefore(Ce,Ke)}removeChild(we,Ce){we&&we.removeChild(Ce)}selectRootElement(we,Ce){let Ke="string"==typeof we?this.doc.querySelector(we):we;if(!Ke)throw new _.wOt(-5104,!1);return Ce||(Ke.textContent=""),Ke}parentNode(we){return we.parentNode}nextSibling(we){return we.nextSibling}setAttribute(we,Ce,Ke,Nt){if(Nt){Ce=Nt+":"+Ce;const ge=Be[Nt];ge?we.setAttributeNS(ge,Ce,Ke):we.setAttribute(Ce,Ke)}else we.setAttribute(Ce,Ke)}removeAttribute(we,Ce,Ke){if(Ke){const Nt=Be[Ke];Nt?we.removeAttributeNS(Nt,Ce):we.removeAttribute(`${Ke}:${Ce}`)}else we.removeAttribute(Ce)}addClass(we,Ce){we.classList.add(Ce)}removeClass(we,Ce){we.classList.remove(Ce)}setStyle(we,Ce,Ke,Nt){Nt&(_.czy.DashCase|_.czy.Important)?we.style.setProperty(Ce,Ke,Nt&_.czy.Important?"important":""):we.style[Ce]=Ke}removeStyle(we,Ce,Ke){Ke&_.czy.DashCase?we.style.removeProperty(Ce):we.style[Ce]=""}setProperty(we,Ce,Ke){null!=we&&(we[Ce]=Ke)}setValue(we,Ce){we.nodeValue=Ce}listen(we,Ce,Ke){if("string"==typeof we&&!(we=(0,V.QT)().getGlobalEventTarget(this.doc,we)))throw new Error(`Unsupported event target ${we} for event ${Ce}`);return this.eventManager.addEventListener(we,Ce,this.decoratePreventDefault(Ke))}decoratePreventDefault(we){return Ce=>{if("__ngUnwrap__"===Ce)return we;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>we(Ce)):we(Ce))&&Ce.preventDefault()}}}function We(xe){return"TEMPLATE"===xe.tagName&&void 0!==xe.content}class pn extends et{constructor(we,Ce,Ke,Nt,ge,q,J,ie){super(we,ge,q,ie),this.sharedStylesHost=Ce,this.hostEl=Ke,this.shadowRoot=Ke.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const me=Ve(Nt.id,Nt.styles);for(const It of me){const Ft=document.createElement("style");J&&Ft.setAttribute("nonce",J),Ft.textContent=It,this.shadowRoot.appendChild(Ft)}}nodeOrShadowRoot(we){return we===this.hostEl?this.shadowRoot:we}appendChild(we,Ce){return super.appendChild(this.nodeOrShadowRoot(we),Ce)}insertBefore(we,Ce,Ke){return super.insertBefore(this.nodeOrShadowRoot(we),Ce,Ke)}removeChild(we,Ce){return super.removeChild(this.nodeOrShadowRoot(we),Ce)}parentNode(we){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(we)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class bn extends et{constructor(we,Ce,Ke,Nt,ge,q,J,ie){super(we,ge,q,J),this.sharedStylesHost=Ce,this.removeStylesOnCompDestroy=Nt,this.styles=ie?Ve(ie,Ke.styles):Ke.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Fn extends bn{constructor(we,Ce,Ke,Nt,ge,q,J,ie){const me=Nt+"-"+Ke.id;super(we,Ce,Ke,ge,q,J,ie,me),this.contentAttr=function de(xe){return"_ngcontent-%COMP%".replace(At,xe)}(me),this.hostAttr=function ae(xe){return"_nghost-%COMP%".replace(At,xe)}(me)}applyToHost(we){this.applyStyles(),this.setAttribute(we,this.hostAttr,"")}createElement(we,Ce){const Ke=super.createElement(we,Ce);return super.setAttribute(Ke,this.contentAttr,""),Ke}}let xn=(()=>{class xe extends He{constructor(Ce){super(Ce)}supports(Ce){return!0}addEventListener(Ce,Ke,Nt){return Ce.addEventListener(Ke,Nt,!1),()=>this.removeEventListener(Ce,Ke,Nt)}removeEventListener(Ce,Ke,Nt){return Ce.removeEventListener(Ke,Nt)}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(V.qQ))};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac})}return xe})();const fn=["alt","control","meta","shift"],An={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ke={alt:xe=>xe.altKey,control:xe=>xe.ctrlKey,meta:xe=>xe.metaKey,shift:xe=>xe.shiftKey};let Qe=(()=>{class xe extends He{constructor(Ce){super(Ce)}supports(Ce){return null!=xe.parseEventName(Ce)}addEventListener(Ce,Ke,Nt){const ge=xe.parseEventName(Ke),q=xe.eventCallback(ge.fullKey,Nt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,V.QT)().onAndCancel(Ce,ge.domEventName,q))}static parseEventName(Ce){const Ke=Ce.toLowerCase().split("."),Nt=Ke.shift();if(0===Ke.length||"keydown"!==Nt&&"keyup"!==Nt)return null;const ge=xe._normalizeKey(Ke.pop());let q="",J=Ke.indexOf("code");if(J>-1&&(Ke.splice(J,1),q="code."),fn.forEach(me=>{const It=Ke.indexOf(me);It>-1&&(Ke.splice(It,1),q+=me+".")}),q+=ge,0!=Ke.length||0===ge.length)return null;const ie={};return ie.domEventName=Nt,ie.fullKey=q,ie}static matchEventFullKeyCode(Ce,Ke){let Nt=An[Ce.key]||Ce.key,ge="";return Ke.indexOf("code.")>-1&&(Nt=Ce.code,ge="code."),!(null==Nt||!Nt)&&(Nt=Nt.toLowerCase()," "===Nt?Nt="space":"."===Nt&&(Nt="dot"),fn.forEach(q=>{q!==Nt&&(0,ke[q])(Ce)&&(ge+=q+".")}),ge+=Nt,ge===Ke)}static eventCallback(Ce,Ke,Nt){return ge=>{xe.matchEventFullKeyCode(ge,Ce)&&Nt.runGuarded(()=>Ke(ge))}}static _normalizeKey(Ce){return"esc"===Ce?"escape":Ce}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(V.qQ))};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac})}return xe})();const vn=(0,_.oH4)(_.fpN,"browser",[{provide:_.Agw,useValue:V.AJ},{provide:_.PLl,useValue:function Gt(){w.makeCurrent()},multi:!0},{provide:V.qQ,useFactory:function Jt(){return(0,_.TL$)(document),document},deps:[]}]),En=new _.nKC(""),jn=[{provide:_.e01,useClass:class Le{addToWindow(we){_.JZv.getAngularTestability=(Ke,Nt=!0)=>{const ge=we.findTestabilityInTree(Ke,Nt);if(null==ge)throw new _.wOt(5103,!1);return ge},_.JZv.getAllAngularTestabilities=()=>we.getAllTestabilities(),_.JZv.getAllAngularRootElements=()=>we.getAllRootElements(),_.JZv.frameworkStabilizers||(_.JZv.frameworkStabilizers=[]),_.JZv.frameworkStabilizers.push(Ke=>{const Nt=_.JZv.getAllAngularTestabilities();let ge=Nt.length;const q=function(){ge--,0==ge&&Ke()};Nt.forEach(J=>{J.whenStable(q)})})}findTestabilityInTree(we,Ce,Ke){return null==Ce?null:we.getTestability(Ce)??(Ke?(0,V.QT)().isShadowRoot(Ce)?this.findTestabilityInTree(we,Ce.host,!0):this.findTestabilityInTree(we,Ce.parentElement,!0):null)}},deps:[]},{provide:_.WHO,useClass:_.NYb,deps:[_.SKi,_.giA,_.e01]},{provide:_.NYb,useClass:_.NYb,deps:[_.SKi,_.giA,_.e01]}],it=[{provide:_.H8p,useValue:"root"},{provide:_.zcH,useFactory:function un(){return new _.zcH},deps:[]},{provide:ve,useClass:xn,multi:!0,deps:[V.qQ,_.SKi,_.Agw]},{provide:ve,useClass:Qe,multi:!0,deps:[V.qQ]},Ye,De,_e,{provide:_._9s,useExisting:Ye},{provide:V.N0,useClass:$e,deps:[]},[]];let yn=(()=>{class xe{constructor(Ce){}static withServerTransition(Ce){return{ngModule:xe,providers:[{provide:_.sZ2,useValue:Ce.appId}]}}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(En,12))};static#t=this.\u0275mod=_.$C({type:xe});static#n=this.\u0275inj=_.G2t({providers:[...it,...jn],imports:[V.MD,_.Hbi]})}return xe})(),St=(()=>{class xe{constructor(Ce){this._doc=Ce}getTitle(){return this._doc.title}setTitle(Ce){this._doc.title=Ce||""}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(V.qQ))};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac,providedIn:"root"})}return xe})()},4454:(Zt,qe,x)=>{x.d(qe,{nX:()=>mi,Ix:()=>Gr,Wk:()=>jo,iI:()=>Ua,n3:()=>os});var _=x(467),V=x(4438),M=x(1985),w=x(8071),Pe=x(8455),B=x(7673),Le=x(4412),$e=x(3073),ve=x(3669),_e=x(6450),He=x(9326),Tt=x(8496),De=x(4360),Be=x(5225);function At(...v){const P=(0,He.lI)(v),C=(0,He.ms)(v),{args:R,keys:j}=(0,$e.D)(v);if(0===R.length)return(0,Pe.H)([],P);const te=new M.c(function yt(v,P,C=ve.D){return R=>{st(P,()=>{const{length:j}=v,te=new Array(j);let Te=j,wt=j;for(let dt=0;dt<j;dt++)st(P,()=>{const dn=(0,Pe.H)(v[dt],P);let rr=!1;dn.subscribe((0,De._)(R,pr=>{te[dt]=pr,rr||(rr=!0,wt--),wt||R.next(C(te.slice()))},()=>{--Te||R.complete()}))},R)},R)}}(R,P,j?Te=>(0,Tt.e)(j,Te):ve.D));return C?te.pipe((0,_e.I)(C)):te}function st(v,P,C){v?(0,Be.N)(C,v,P):P()}var bt=x(9350),gt=x(8793),ue=x(8750);function de(v){return new M.c(P=>{(0,ue.Tg)(v()).subscribe(P)})}var ae=x(1203);function Ve(v,P){const C=(0,w.T)(v)?v:()=>v,R=j=>j.error(C());return new M.c(P?j=>P.schedule(R,0,j):R)}var Ye=x(983),et=x(8359),ce=x(9974);function Ne(){return(0,ce.N)((v,P)=>{let C=null;v._refCount++;const R=(0,De._)(P,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(C=null);const j=v._connection,te=C;C=null,j&&(!te||j===te)&&j.unsubscribe(),P.unsubscribe()});v.subscribe(R),R.closed||(C=v.connect())})}class We extends M.c{constructor(P,C){super(),this.source=P,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,ce.S)(P)&&(this.lift=P.lift)}_subscribe(P){return this.getSubject().subscribe(P)}getSubject(){const P=this._subject;return(!P||P.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:P}=this;this._subject=this._connection=null,P?.unsubscribe()}connect(){let P=this._connection;if(!P){P=this._connection=new et.yU;const C=this.getSubject();P.add(this.source.subscribe((0,De._)(C,void 0,()=>{this._teardown(),C.complete()},R=>{this._teardown(),C.error(R)},()=>this._teardown()))),P.closed&&(this._connection=null,P=et.yU.EMPTY)}return P}refCount(){return Ne()(this)}}var pn=x(1413),bn=x(177),Fn=x(6354),xn=x(5558),fn=x(6697),An=x(9172),ke=x(5964),Qe=x(1397),ct=x(1594),_t=x(274),vt=x(8141),Ze=x(9437),Gt=x(2816),un=x(9901);function Jt(v){return v<=0?()=>Ye.w:(0,ce.N)((P,C)=>{let R=[];P.subscribe((0,De._)(C,j=>{R.push(j),v<R.length&&R.shift()},()=>{for(const j of R)C.next(j);C.complete()},void 0,()=>{R=null}))})}var en=x(3774),jn=x(980),it=x(5343),Qn=x(6365),or=x(345);const St="primary",mt=Symbol("RouteTitle");class ni{constructor(P){this.params=P||{}}has(P){return Object.prototype.hasOwnProperty.call(this.params,P)}get(P){if(this.has(P)){const C=this.params[P];return Array.isArray(C)?C[0]:C}return null}getAll(P){if(this.has(P)){const C=this.params[P];return Array.isArray(C)?C:[C]}return[]}get keys(){return Object.keys(this.params)}}function Ot(v){return new ni(v)}function nt(v,P,C){const R=C.path.split("/");if(R.length>v.length||"full"===C.pathMatch&&(P.hasChildren()||R.length<v.length))return null;const j={};for(let te=0;te<R.length;te++){const Te=R[te],wt=v[te];if(Te.startsWith(":"))j[Te.substring(1)]=wt;else if(Te!==wt.path)return null}return{consumed:v.slice(0,R.length),posParams:j}}function er(v,P){const C=v?ir(v):void 0,R=P?ir(P):void 0;if(!C||!R||C.length!=R.length)return!1;let j;for(let te=0;te<C.length;te++)if(j=C[te],!wn(v[j],P[j]))return!1;return!0}function ir(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}function wn(v,P){if(Array.isArray(v)&&Array.isArray(P)){if(v.length!==P.length)return!1;const C=[...v].sort(),R=[...P].sort();return C.every((j,te)=>R[te]===j)}return v===P}function Pn(v){return v.length>0?v[v.length-1]:null}function Vr(v){return function se(v){return!!v&&(v instanceof M.c||(0,w.T)(v.lift)&&(0,w.T)(v.subscribe))}(v)?v:(0,V.jNT)(v)?(0,Pe.H)(Promise.resolve(v)):(0,B.of)(v)}const zr={exact:function xi(v,P,C){if(!Ln(v.segments,P.segments)||!Vn(v.segments,P.segments,C)||v.numberOfChildren!==P.numberOfChildren)return!1;for(const R in P.children)if(!v.children[R]||!xi(v.children[R],P.children[R],C))return!1;return!0},subset:Di},Wr={exact:function Or(v,P){return er(v,P)},subset:function On(v,P){return Object.keys(P).length<=Object.keys(v).length&&Object.keys(P).every(C=>wn(v[C],P[C]))},ignored:()=>!0};function Gi(v,P,C){return zr[C.paths](v.root,P.root,C.matrixParams)&&Wr[C.queryParams](v.queryParams,P.queryParams)&&!("exact"===C.fragment&&v.fragment!==P.fragment)}function Di(v,P,C){return Ht(v,P,P.segments,C)}function Ht(v,P,C,R){if(v.segments.length>C.length){const j=v.segments.slice(0,C.length);return!(!Ln(j,C)||P.hasChildren()||!Vn(j,C,R))}if(v.segments.length===C.length){if(!Ln(v.segments,C)||!Vn(v.segments,C,R))return!1;for(const j in P.children)if(!v.children[j]||!Di(v.children[j],P.children[j],R))return!1;return!0}{const j=C.slice(0,v.segments.length),te=C.slice(v.segments.length);return!!(Ln(v.segments,j)&&Vn(v.segments,j,R)&&v.children[St])&&Ht(v.children[St],P,te,R)}}function Vn(v,P,C){return P.every((R,j)=>Wr[C](v[j].parameters,R.parameters))}class _r{constructor(P=new qt([],{}),C={},R=null){this.root=P,this.queryParams=C,this.fragment=R}get queryParamMap(){return this._queryParamMap??=Ot(this.queryParams),this._queryParamMap}toString(){return Ce.serialize(this)}}class qt{constructor(P,C){this.segments=P,this.children=C,this.parent=null,Object.values(C).forEach(R=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ke(this)}}class Xt{constructor(P,C){this.path=P,this.parameters=C}get parameterMap(){return this._parameterMap??=Ot(this.parameters),this._parameterMap}toString(){return Ft(this)}}function Ln(v,P){return v.length===P.length&&v.every((C,R)=>C.path===P[R].path)}let xe=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:()=>new we,providedIn:"root"})}return v})();class we{parse(P){const C=new ar(P);return new _r(C.parseRootSegment(),C.parseQueryParams(),C.parseFragment())}serialize(P){const C=`/${Nt(P.root,!0)}`,R=function Wn(v){const P=Object.entries(v).map(([C,R])=>Array.isArray(R)?R.map(j=>`${q(C)}=${q(j)}`).join("&"):`${q(C)}=${q(R)}`).filter(C=>C);return P.length?`?${P.join("&")}`:""}(P.queryParams);return`${C}${R}${"string"==typeof P.fragment?`#${function J(v){return encodeURI(v)}(P.fragment)}`:""}`}}const Ce=new we;function Ke(v){return v.segments.map(P=>Ft(P)).join("/")}function Nt(v,P){if(!v.hasChildren())return Ke(v);if(P){const C=v.children[St]?Nt(v.children[St],!1):"",R=[];return Object.entries(v.children).forEach(([j,te])=>{j!==St&&R.push(`${j}:${Nt(te,!1)}`)}),R.length>0?`${C}(${R.join("//")})`:C}{const C=function Yr(v,P){let C=[];return Object.entries(v.children).forEach(([R,j])=>{R===St&&(C=C.concat(P(j,R)))}),Object.entries(v.children).forEach(([R,j])=>{R!==St&&(C=C.concat(P(j,R)))}),C}(v,(R,j)=>j===St?[Nt(v.children[St],!1)]:[`${j}:${Nt(R,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[St]?`${Ke(v)}/${C[0]}`:`${Ke(v)}/(${C.join("//")})`}}function ge(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function q(v){return ge(v).replace(/%3B/gi,";")}function ie(v){return ge(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function me(v){return decodeURIComponent(v)}function It(v){return me(v.replace(/\+/g,"%20"))}function Ft(v){return`${ie(v.path)}${function mn(v){return Object.entries(v).map(([P,C])=>`;${ie(P)}=${ie(C)}`).join("")}(v.parameters)}`}const Xn=/^[^\/()?;#]+/;function Tn(v){const P=v.match(Xn);return P?P[0]:""}const $t=/^[^\/()?;=#]+/,Lr=/^[^=?&#]+/,rs=/^[^&#]+/;class ar{constructor(P){this.url=P,this.remaining=P}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qt([],{}):new qt([],this.parseChildren())}parseQueryParams(){const P={};if(this.consumeOptional("?"))do{this.parseQueryParam(P)}while(this.consumeOptional("&"));return P}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const P=[];for(this.peekStartsWith("(")||P.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),P.push(this.parseSegment());let C={};this.peekStartsWith("/(")&&(this.capture("/"),C=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(P.length>0||Object.keys(C).length>0)&&(R[St]=new qt(P,C)),R}parseSegment(){const P=Tn(this.remaining);if(""===P&&this.peekStartsWith(";"))throw new V.wOt(4009,!1);return this.capture(P),new Xt(me(P),this.parseMatrixParams())}parseMatrixParams(){const P={};for(;this.consumeOptional(";");)this.parseParam(P);return P}parseParam(P){const C=function Me(v){const P=v.match($t);return P?P[0]:""}(this.remaining);if(!C)return;this.capture(C);let R="";if(this.consumeOptional("=")){const j=Tn(this.remaining);j&&(R=j,this.capture(R))}P[me(C)]=me(R)}parseQueryParam(P){const C=function Jr(v){const P=v.match(Lr);return P?P[0]:""}(this.remaining);if(!C)return;this.capture(C);let R="";if(this.consumeOptional("=")){const Te=function ys(v){const P=v.match(rs);return P?P[0]:""}(this.remaining);Te&&(R=Te,this.capture(R))}const j=It(C),te=It(R);if(P.hasOwnProperty(j)){let Te=P[j];Array.isArray(Te)||(Te=[Te],P[j]=Te),Te.push(te)}else P[j]=te}parseParens(P){const C={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=Tn(this.remaining),j=this.remaining[R.length];if("/"!==j&&")"!==j&&";"!==j)throw new V.wOt(4010,!1);let te;R.indexOf(":")>-1?(te=R.slice(0,R.indexOf(":")),this.capture(te),this.capture(":")):P&&(te=St);const Te=this.parseChildren();C[te]=1===Object.keys(Te).length?Te[St]:new qt([],Te),this.consumeOptional("//")}return C}peekStartsWith(P){return this.remaining.startsWith(P)}consumeOptional(P){return!!this.peekStartsWith(P)&&(this.remaining=this.remaining.substring(P.length),!0)}capture(P){if(!this.consumeOptional(P))throw new V.wOt(4011,!1)}}function fs(v){return v.segments.length>0?new qt([],{[St]:v}):v}function us(v){const P={};for(const[R,j]of Object.entries(v.children)){const te=us(j);if(R===St&&0===te.segments.length&&te.hasChildren())for(const[Te,wt]of Object.entries(te.children))P[Te]=wt;else(te.segments.length>0||te.hasChildren())&&(P[R]=te)}return function Ki(v){if(1===v.numberOfChildren&&v.children[St]){const P=v.children[St];return new qt(v.segments.concat(P.segments),P.children)}return v}(new qt(v.segments,P))}function ut(v){return v instanceof _r}function xt(v){let P;const j=fs(function C(te){const Te={};for(const dt of te.children){const dn=C(dt);Te[dt.outlet]=dn}const wt=new qt(te.url,Te);return te===v&&(P=wt),wt}(v.root));return P??j}function nn(v,P,C,R){let j=v;for(;j.parent;)j=j.parent;if(0===P.length)return Ie(j,j,j,C,R);const te=function Kt(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new Xe(!0,0,v);let P=0,C=!1;const R=v.reduce((j,te,Te)=>{if("object"==typeof te&&null!=te){if(te.outlets){const wt={};return Object.entries(te.outlets).forEach(([dt,dn])=>{wt[dt]="string"==typeof dn?dn.split("/"):dn}),[...j,{outlets:wt}]}if(te.segmentPath)return[...j,te.segmentPath]}return"string"!=typeof te?[...j,te]:0===Te?(te.split("/").forEach((wt,dt)=>{0==dt&&"."===wt||(0==dt&&""===wt?C=!0:".."===wt?P++:""!=wt&&j.push(wt))}),j):[...j,te]},[]);return new Xe(C,P,R)}(P);if(te.toRoot())return Ie(j,j,new qt([],{}),C,R);const Te=function $n(v,P,C){if(v.isAbsolute)return new Ut(P,!0,0);if(!C)return new Ut(P,!1,NaN);if(null===C.parent)return new Ut(C,!0,0);const R=ne(v.commands[0])?0:1;return function on(v,P,C){let R=v,j=P,te=C;for(;te>j;){if(te-=j,R=R.parent,!R)throw new V.wOt(4005,!1);j=R.segments.length}return new Ut(R,!1,j-te)}(C,C.segments.length-1+R,v.numberOfDoubleDots)}(te,j,v),wt=Te.processChildren?yr(Te.segmentGroup,Te.index,te.commands):si(Te.segmentGroup,Te.index,te.commands);return Ie(j,Te.segmentGroup,wt,C,R)}function ne(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function ye(v){return"object"==typeof v&&null!=v&&v.outlets}function Ie(v,P,C,R,j){let Te,te={};R&&Object.entries(R).forEach(([dt,dn])=>{te[dt]=Array.isArray(dn)?dn.map(rr=>`${rr}`):`${dn}`}),Te=v===P?C:pt(v,P,C);const wt=fs(us(Te));return new _r(wt,te,j)}function pt(v,P,C){const R={};return Object.entries(v.children).forEach(([j,te])=>{R[j]=te===P?C:pt(te,P,C)}),new qt(v.segments,R)}class Xe{constructor(P,C,R){if(this.isAbsolute=P,this.numberOfDoubleDots=C,this.commands=R,P&&R.length>0&&ne(R[0]))throw new V.wOt(4003,!1);const j=R.find(ye);if(j&&j!==Pn(R))throw new V.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ut{constructor(P,C,R){this.segmentGroup=P,this.processChildren=C,this.index=R}}function si(v,P,C){if(v??=new qt([],{}),0===v.segments.length&&v.hasChildren())return yr(v,P,C);const R=function Ai(v,P,C){let R=0,j=P;const te={match:!1,pathIndex:0,commandIndex:0};for(;j<v.segments.length;){if(R>=C.length)return te;const Te=v.segments[j],wt=C[R];if(ye(wt))break;const dt=`${wt}`,dn=R<C.length-1?C[R+1]:null;if(j>0&&void 0===dt)break;if(dt&&dn&&"object"==typeof dn&&void 0===dn.outlets){if(!Nr(dt,dn,Te))return te;R+=2}else{if(!Nr(dt,{},Te))return te;R++}j++}return{match:!0,pathIndex:j,commandIndex:R}}(v,P,C),j=C.slice(R.commandIndex);if(R.match&&R.pathIndex<v.segments.length){const te=new qt(v.segments.slice(0,R.pathIndex),{});return te.children[St]=new qt(v.segments.slice(R.pathIndex),v.children),yr(te,0,j)}return R.match&&0===j.length?new qt(v.segments,{}):R.match&&!v.hasChildren()?ps(v,P,C):R.match?yr(v,0,j):ps(v,P,C)}function yr(v,P,C){if(0===C.length)return new qt(v.segments,{});{const R=function br(v){return ye(v[0])?v[0].outlets:{[St]:v}}(C),j={};if(Object.keys(R).some(te=>te!==St)&&v.children[St]&&1===v.numberOfChildren&&0===v.children[St].segments.length){const te=yr(v.children[St],P,C);return new qt(v.segments,te.children)}return Object.entries(R).forEach(([te,Te])=>{"string"==typeof Te&&(Te=[Te]),null!==Te&&(j[te]=si(v.children[te],P,Te))}),Object.entries(v.children).forEach(([te,Te])=>{void 0===R[te]&&(j[te]=Te)}),new qt(v.segments,j)}}function ps(v,P,C){const R=v.segments.slice(0,P);let j=0;for(;j<C.length;){const te=C[j];if(ye(te)){const dt=qi(te.outlets);return new qt(R,dt)}if(0===j&&ne(C[0])){R.push(new Xt(v.segments[P].path,Cr(C[0]))),j++;continue}const Te=ye(te)?te.outlets[St]:`${te}`,wt=j<C.length-1?C[j+1]:null;Te&&wt&&ne(wt)?(R.push(new Xt(Te,Cr(wt))),j+=2):(R.push(new Xt(Te,{})),j++)}return new qt(R,{})}function qi(v){const P={};return Object.entries(v).forEach(([C,R])=>{"string"==typeof R&&(R=[R]),null!==R&&(P[C]=ps(new qt([],{}),0,R))}),P}function Cr(v){const P={};return Object.entries(v).forEach(([C,R])=>P[C]=`${R}`),P}function Nr(v,P,C){return v==C.path&&er(P,C.parameters)}const pi="imperative";var Yn=function(v){return v[v.NavigationStart=0]="NavigationStart",v[v.NavigationEnd=1]="NavigationEnd",v[v.NavigationCancel=2]="NavigationCancel",v[v.NavigationError=3]="NavigationError",v[v.RoutesRecognized=4]="RoutesRecognized",v[v.ResolveStart=5]="ResolveStart",v[v.ResolveEnd=6]="ResolveEnd",v[v.GuardsCheckStart=7]="GuardsCheckStart",v[v.GuardsCheckEnd=8]="GuardsCheckEnd",v[v.RouteConfigLoadStart=9]="RouteConfigLoadStart",v[v.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",v[v.ChildActivationStart=11]="ChildActivationStart",v[v.ChildActivationEnd=12]="ChildActivationEnd",v[v.ActivationStart=13]="ActivationStart",v[v.ActivationEnd=14]="ActivationEnd",v[v.Scroll=15]="Scroll",v[v.NavigationSkipped=16]="NavigationSkipped",v}(Yn||{});class kr{constructor(P,C){this.id=P,this.url=C}}class ui extends kr{constructor(P,C,R="imperative",j=null){super(P,C),this.type=Yn.NavigationStart,this.navigationTrigger=R,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gi extends kr{constructor(P,C,R){super(P,C),this.urlAfterRedirects=R,this.type=Yn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var ri=function(v){return v[v.Redirect=0]="Redirect",v[v.SupersededByNewNavigation=1]="SupersededByNewNavigation",v[v.NoDataFromResolver=2]="NoDataFromResolver",v[v.GuardRejected=3]="GuardRejected",v}(ri||{}),Nn=function(v){return v[v.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",v[v.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",v}(Nn||{});class cr extends kr{constructor(P,C,R,j){super(P,C),this.reason=R,this.code=j,this.type=Yn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Co extends kr{constructor(P,C,R,j){super(P,C),this.reason=R,this.code=j,this.type=Yn.NavigationSkipped}}class Qi extends kr{constructor(P,C,R,j){super(P,C),this.error=R,this.target=j,this.type=Yn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wo extends kr{constructor(P,C,R,j){super(P,C),this.urlAfterRedirects=R,this.state=j,this.type=Yn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ya extends kr{constructor(P,C,R,j){super(P,C),this.urlAfterRedirects=R,this.state=j,this.type=Yn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class va extends kr{constructor(P,C,R,j,te){super(P,C),this.urlAfterRedirects=R,this.state=j,this.shouldActivate=te,this.type=Yn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ko extends kr{constructor(P,C,R,j){super(P,C),this.urlAfterRedirects=R,this.state=j,this.type=Yn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sr extends kr{constructor(P,C,R,j){super(P,C),this.urlAfterRedirects=R,this.state=j,this.type=Yn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qo{constructor(P){this.route=P,this.type=Yn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Js{constructor(P){this.route=P,this.type=Yn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wr{constructor(P){this.snapshot=P,this.type=Yn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ws{constructor(P){this.snapshot=P,this.type=Yn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xs{constructor(P){this.snapshot=P,this.type=Yn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fo{constructor(P){this.snapshot=P,this.type=Yn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gs{constructor(P,C,R){this.routerEvent=P,this.position=C,this.anchor=R,this.type=Yn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Sr{}class Ts{constructor(P){this.url=P}}class Tr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new js,this.attachRef=null}}let js=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(C,R){const j=this.getOrCreateContext(C);j.outlet=R,this.contexts.set(C,j)}onChildOutletDestroyed(C){const R=this.getContext(C);R&&(R.outlet=null,R.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let R=this.getContext(C);return R||(R=new Tr,this.contexts.set(C,R)),R}getContext(C){return this.contexts.get(C)||null}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();class ks{constructor(P){this._root=P}get root(){return this._root.value}parent(P){const C=this.pathFromRoot(P);return C.length>1?C[C.length-2]:null}children(P){const C=Zr(P,this._root);return C?C.children.map(R=>R.value):[]}firstChild(P){const C=Zr(P,this._root);return C&&C.children.length>0?C.children[0].value:null}siblings(P){const C=Zs(P,this._root);return C.length<2?[]:C[C.length-2].children.map(j=>j.value).filter(j=>j!==P)}pathFromRoot(P){return Zs(P,this._root).map(C=>C.value)}}function Zr(v,P){if(v===P.value)return P;for(const C of P.children){const R=Zr(v,C);if(R)return R}return null}function Zs(v,P){if(v===P.value)return[P];for(const C of P.children){const R=Zs(v,C);if(R.length)return R.unshift(P),R}return[]}class oi{constructor(P,C){this.value=P,this.children=C}toString(){return`TreeNode(${this.value})`}}function Fr(v){const P={};return v&&v.children.forEach(C=>P[C.value.outlet]=C),P}class li extends ks{constructor(P,C){super(P),this.snapshot=C,eo(this,P)}toString(){return this.snapshot.toString()}}function is(v){const P=function ln(v){const te=new Fs([],{},{},"",{},St,v,null,{});return new Vs("",new oi(te,[]))}(v),C=new Le.t([new Xt("",{})]),R=new Le.t({}),j=new Le.t({}),te=new Le.t({}),Te=new Le.t(""),wt=new mi(C,R,te,Te,j,St,v,P.root);return wt.snapshot=P.root,new li(new oi(wt,[]),P)}class mi{constructor(P,C,R,j,te,Te,wt,dt){this.urlSubject=P,this.paramsSubject=C,this.queryParamsSubject=R,this.fragmentSubject=j,this.dataSubject=te,this.outlet=Te,this.component=wt,this._futureSnapshot=dt,this.title=this.dataSubject?.pipe((0,Fn.T)(dn=>dn[mt]))??(0,B.of)(void 0),this.url=P,this.params=C,this.queryParams=R,this.fragment=j,this.data=te}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Fn.T)(P=>Ot(P))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Fn.T)(P=>Ot(P))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ds(v,P,C="emptyOnly"){let R;const{routeConfig:j}=v;return R=null===P||"always"!==C&&""!==j?.path&&(P.component||P.routeConfig?.loadComponent)?{params:{...v.params},data:{...v.data},resolve:{...v.data,...v._resolvedData??{}}}:{params:{...P.params,...v.params},data:{...P.data,...v.data},resolve:{...v.data,...P.data,...j?.data,...v._resolvedData}},j&&Bi(j)&&(R.resolve[mt]=j.title),R}class Fs{get title(){return this.data?.[mt]}constructor(P,C,R,j,te,Te,wt,dt,dn){this.url=P,this.params=C,this.queryParams=R,this.fragment=j,this.data=te,this.outlet=Te,this.component=wt,this.routeConfig=dt,this._resolve=dn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ot(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ot(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vs extends ks{constructor(P,C){super(C),this.url=P,eo(this,C)}toString(){return ki(this._root)}}function eo(v,P){P.value._routerState=v,P.children.forEach(C=>eo(v,C))}function ki(v){const P=v.children.length>0?` { ${v.children.map(ki).join(", ")} } `:"";return`${v.value}${P}`}function ms(v){if(v.snapshot){const P=v.snapshot,C=v._futureSnapshot;v.snapshot=C,er(P.queryParams,C.queryParams)||v.queryParamsSubject.next(C.queryParams),P.fragment!==C.fragment&&v.fragmentSubject.next(C.fragment),er(P.params,C.params)||v.paramsSubject.next(C.params),function Mt(v,P){if(v.length!==P.length)return!1;for(let C=0;C<v.length;++C)if(!er(v[C],P[C]))return!1;return!0}(P.url,C.url)||v.urlSubject.next(C.url),er(P.data,C.data)||v.dataSubject.next(C.data)}else v.snapshot=v._futureSnapshot,v.dataSubject.next(v._futureSnapshot.data)}function ss(v,P){const C=er(v.params,P.params)&&function Kr(v,P){return Ln(v,P)&&v.every((C,R)=>er(C.parameters,P[R].parameters))}(v.url,P.url);return C&&!(!v.parent!=!P.parent)&&(!v.parent||ss(v.parent,P.parent))}function Bi(v){return"string"==typeof v.title||null===v.title}let os=(()=>{class v{constructor(){this.activated=null,this._activatedRoute=null,this.name=St,this.activateEvents=new V.bkB,this.deactivateEvents=new V.bkB,this.attachEvents=new V.bkB,this.detachEvents=new V.bkB,this.parentContexts=(0,V.WQX)(js),this.location=(0,V.WQX)(V.c1b),this.changeDetector=(0,V.WQX)(V.gRc),this.environmentInjector=(0,V.WQX)(V.uvJ),this.inputBinder=(0,V.WQX)(zi,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(C){if(C.name){const{firstChange:R,previousValue:j}=C.name;if(R)return;this.isTrackedInParentContexts(j)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(j)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(C){return this.parentContexts.getContext(C)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const C=this.parentContexts.getContext(this.name);C?.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V.wOt(4012,!1);this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,R){this.activated=C,this._activatedRoute=R,this.location.insert(C.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,R){if(this.isActivated)throw new V.wOt(4013,!1);this._activatedRoute=C;const j=this.location,Te=C.snapshot.component,wt=this.parentContexts.getOrCreateContext(this.name).children,dt=new $s(C,wt,j.injector);this.activated=j.createComponent(Te,{index:j.length,injector:dt,environmentInjector:R??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275dir=V.FsC({type:v,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[V.OA$]})}return v})();class $s{__ngOutletInjector(P){return new $s(this.route,this.childContexts,P)}constructor(P,C,R){this.route=P,this.childContexts=C,this.parent=R}get(P,C){return P===mi?this.route:P===js?this.childContexts:this.parent.get(P,C)}}const zi=new V.nKC("");let Vo=(()=>{class v{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(C){this.unsubscribeFromRouteData(C),this.subscribeToRouteData(C)}unsubscribeFromRouteData(C){this.outletDataSubscriptions.get(C)?.unsubscribe(),this.outletDataSubscriptions.delete(C)}subscribeToRouteData(C){const{activatedRoute:R}=C,j=At([R.queryParams,R.params,R.data]).pipe((0,xn.n)(([te,Te,wt],dt)=>(wt={...te,...Te,...wt},0===dt?(0,B.of)(wt):Promise.resolve(wt)))).subscribe(te=>{if(!C.isActivated||!C.activatedComponentRef||C.activatedRoute!==R||null===R.component)return void this.unsubscribeFromRouteData(C);const Te=(0,V.HJs)(R.component);if(Te)for(const{templateName:wt}of Te.inputs)C.activatedComponentRef.setInput(wt,te[wt]);else this.unsubscribeFromRouteData(C)});this.outletDataSubscriptions.set(C,j)}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac})}return v})();function Fi(v,P,C){if(C&&v.shouldReuseRoute(P.value,C.value.snapshot)){const R=C.value;R._futureSnapshot=P.value;const j=function co(v,P,C){return P.children.map(R=>{for(const j of C.children)if(v.shouldReuseRoute(R.value,j.value.snapshot))return Fi(v,R,j);return Fi(v,R)})}(v,P,C);return new oi(R,j)}{if(v.shouldAttach(P.value)){const te=v.retrieve(P.value);if(null!==te){const Te=te.route;return Te.value._futureSnapshot=P.value,Te.children=P.children.map(wt=>Fi(v,wt)),Te}}const R=function uo(v){return new mi(new Le.t(v.url),new Le.t(v.params),new Le.t(v.queryParams),new Le.t(v.fragment),new Le.t(v.data),v.outlet,v.component,v)}(P.value),j=P.children.map(te=>Fi(v,te));return new oi(R,j)}}const Wi="ngNavigationCancelingError";function As(v,P){const{redirectTo:C,navigationBehaviorOptions:R}=ut(P)?{redirectTo:P,navigationBehaviorOptions:void 0}:P,j=Hs(!1,ri.Redirect);return j.url=C,j.navigationBehaviorOptions=R,j}function Hs(v,P){const C=new Error(`NavigationCancelingError: ${v||""}`);return C[Wi]=!0,C.cancellationCode=P,C}function to(v){return!!v&&v[Wi]}let qr=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275cmp=V.VBU({type:v,selectors:[["ng-component"]],standalone:!0,features:[V.aNF],decls:1,vars:0,template:function(R,j){1&R&&V.nrm(0,"router-outlet")},dependencies:[os],encapsulation:2})}return v})();function ho(v){const P=v.children&&v.children.map(ho),C=P?{...v,children:P}:{...v};return!C.component&&!C.loadComponent&&(P||C.loadChildren)&&C.outlet&&C.outlet!==St&&(C.component=qr),C}function lr(v){return v.outlet||St}function _s(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let P=v.parent;P;P=P.parent){const C=P.routeConfig;if(C?._loadedInjector)return C._loadedInjector;if(C?._injector)return C._injector}return null}class G{constructor(P,C,R,j,te){this.routeReuseStrategy=P,this.futureState=C,this.currState=R,this.forwardEvent=j,this.inputBindingEnabled=te}activate(P){const C=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(C,R,P),ms(this.futureState.root),this.activateChildRoutes(C,R,P)}deactivateChildRoutes(P,C,R){const j=Fr(C);P.children.forEach(te=>{const Te=te.value.outlet;this.deactivateRoutes(te,j[Te],R),delete j[Te]}),Object.values(j).forEach(te=>{this.deactivateRouteAndItsChildren(te,R)})}deactivateRoutes(P,C,R){const j=P.value,te=C?C.value:null;if(j===te)if(j.component){const Te=R.getContext(j.outlet);Te&&this.deactivateChildRoutes(P,C,Te.children)}else this.deactivateChildRoutes(P,C,R);else te&&this.deactivateRouteAndItsChildren(C,R)}deactivateRouteAndItsChildren(P,C){P.value.component&&this.routeReuseStrategy.shouldDetach(P.value.snapshot)?this.detachAndStoreRouteSubtree(P,C):this.deactivateRouteAndOutlet(P,C)}detachAndStoreRouteSubtree(P,C){const R=C.getContext(P.value.outlet),j=R&&P.value.component?R.children:C,te=Fr(P);for(const Te of Object.values(te))this.deactivateRouteAndItsChildren(Te,j);if(R&&R.outlet){const Te=R.outlet.detach(),wt=R.children.onOutletDeactivated();this.routeReuseStrategy.store(P.value.snapshot,{componentRef:Te,route:P,contexts:wt})}}deactivateRouteAndOutlet(P,C){const R=C.getContext(P.value.outlet),j=R&&P.value.component?R.children:C,te=Fr(P);for(const Te of Object.values(te))this.deactivateRouteAndItsChildren(Te,j);R&&(R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated()),R.attachRef=null,R.route=null)}activateChildRoutes(P,C,R){const j=Fr(C);P.children.forEach(te=>{this.activateRoutes(te,j[te.value.outlet],R),this.forwardEvent(new Fo(te.value.snapshot))}),P.children.length&&this.forwardEvent(new ws(P.value.snapshot))}activateRoutes(P,C,R){const j=P.value,te=C?C.value:null;if(ms(j),j===te)if(j.component){const Te=R.getOrCreateContext(j.outlet);this.activateChildRoutes(P,C,Te.children)}else this.activateChildRoutes(P,C,R);else if(j.component){const Te=R.getOrCreateContext(j.outlet);if(this.routeReuseStrategy.shouldAttach(j.snapshot)){const wt=this.routeReuseStrategy.retrieve(j.snapshot);this.routeReuseStrategy.store(j.snapshot,null),Te.children.onOutletReAttached(wt.contexts),Te.attachRef=wt.componentRef,Te.route=wt.route.value,Te.outlet&&Te.outlet.attach(wt.componentRef,wt.route.value),ms(wt.route.value),this.activateChildRoutes(P,null,Te.children)}else{const wt=_s(j.snapshot);Te.attachRef=null,Te.route=j,Te.injector=wt,Te.outlet&&Te.outlet.activateWith(j,Te.injector),this.activateChildRoutes(P,null,Te.children)}}else this.activateChildRoutes(P,null,R)}}class K{constructor(P){this.path=P,this.route=this.path[this.path.length-1]}}class O{constructor(P,C){this.component=P,this.route=C}}function ee(v,P,C){const R=v._root;return tr(R,P?P._root:null,C,[R.value])}function sn(v,P){const C=Symbol(),R=P.get(v,C);return R===C?"function"!=typeof v||(0,V.LfX)(v)?P.get(v):v:R}function tr(v,P,C,R,j={canDeactivateChecks:[],canActivateChecks:[]}){const te=Fr(P);return v.children.forEach(Te=>{(function as(v,P,C,R,j={canDeactivateChecks:[],canActivateChecks:[]}){const te=v.value,Te=P?P.value:null,wt=C?C.getContext(v.value.outlet):null;if(Te&&te.routeConfig===Te.routeConfig){const dt=function Us(v,P,C){if("function"==typeof C)return C(v,P);switch(C){case"pathParamsChange":return!Ln(v.url,P.url);case"pathParamsOrQueryParamsChange":return!Ln(v.url,P.url)||!er(v.queryParams,P.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ss(v,P)||!er(v.queryParams,P.queryParams);default:return!ss(v,P)}}(Te,te,te.routeConfig.runGuardsAndResolvers);dt?j.canActivateChecks.push(new K(R)):(te.data=Te.data,te._resolvedData=Te._resolvedData),tr(v,P,te.component?wt?wt.children:null:C,R,j),dt&&wt&&wt.outlet&&wt.outlet.isActivated&&j.canDeactivateChecks.push(new O(wt.outlet.component,Te))}else Te&&bi(P,wt,j),j.canActivateChecks.push(new K(R)),tr(v,null,te.component?wt?wt.children:null:C,R,j)})(Te,te[Te.value.outlet],C,R.concat([Te.value]),j),delete te[Te.value.outlet]}),Object.entries(te).forEach(([Te,wt])=>bi(wt,C.getContext(Te),j)),j}function bi(v,P,C){const R=Fr(v),j=v.value;Object.entries(R).forEach(([te,Te])=>{bi(Te,j.component?P?P.children.getContext(te):null:P,C)}),C.canDeactivateChecks.push(new O(j.component&&P&&P.outlet&&P.outlet.isActivated?P.outlet.component:null,j))}function no(v){return"function"==typeof v}function Ia(v){return v instanceof bt.G||"EmptyError"===v?.name}const Ca=Symbol("INITIAL_VALUE");function Uo(){return(0,xn.n)(v=>At(v.map(P=>P.pipe((0,fn.s)(1),(0,An.Z)(Ca)))).pipe((0,Fn.T)(P=>{for(const C of P)if(!0!==C){if(C===Ca)return Ca;if(!1===C||C instanceof _r)return C}return!0}),(0,ke.p)(P=>P!==Ca),(0,fn.s)(1)))}function _i(v){return(0,ae.F)((0,vt.M)(P=>{if(ut(P))throw As(0,P)}),(0,Fn.T)(P=>!0===P))}class ji{constructor(P){this.segmentGroup=P||null}}class la extends Error{constructor(P){super(),this.urlTree=P}}function Z(v){return Ve(new ji(v))}class Y{constructor(P,C){this.urlSerializer=P,this.urlTree=C}lineralizeSegments(P,C){let R=[],j=C.root;for(;;){if(R=R.concat(j.segments),0===j.numberOfChildren)return(0,B.of)(R);if(j.numberOfChildren>1||!j.children[St])return Ve(new V.wOt(4e3,!1));j=j.children[St]}}applyRedirectCommands(P,C,R){const j=this.applyRedirectCreateUrlTree(C,this.urlSerializer.parse(C),P,R);if(C.startsWith("/"))throw new la(j);return j}applyRedirectCreateUrlTree(P,C,R,j){const te=this.createSegmentGroup(P,C.root,R,j);return new _r(te,this.createQueryParams(C.queryParams,this.urlTree.queryParams),C.fragment)}createQueryParams(P,C){const R={};return Object.entries(P).forEach(([j,te])=>{if("string"==typeof te&&te.startsWith(":")){const wt=te.substring(1);R[j]=C[wt]}else R[j]=te}),R}createSegmentGroup(P,C,R,j){const te=this.createSegments(P,C.segments,R,j);let Te={};return Object.entries(C.children).forEach(([wt,dt])=>{Te[wt]=this.createSegmentGroup(P,dt,R,j)}),new qt(te,Te)}createSegments(P,C,R,j){return C.map(te=>te.path.startsWith(":")?this.findPosParam(P,te,j):this.findOrReturn(te,R))}findPosParam(P,C,R){const j=R[C.path.substring(1)];if(!j)throw new V.wOt(4001,!1);return j}findOrReturn(P,C){let R=0;for(const j of C){if(j.path===P.path)return C.splice(R),j;R++}return P}}const fe={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ae(v,P,C,R,j){const te=Ue(v,P,C);return te.matched?(R=function bs(v,P){return v.providers&&!v._injector&&(v._injector=(0,V.Ol2)(v.providers,P,`Route: ${v.path}`)),v._injector??P}(P,R),function Yi(v,P,C,R){const j=P.canMatch;if(!j||0===j.length)return(0,B.of)(!0);const te=j.map(Te=>{const wt=sn(Te,v);return Vr(function ca(v){return v&&no(v.canMatch)}(wt)?wt.canMatch(P,C):(0,V.N4e)(v,()=>wt(P,C)))});return(0,B.of)(te).pipe(Uo(),_i())}(R,P,C).pipe((0,Fn.T)(Te=>!0===Te?te:{...fe}))):(0,B.of)(te)}function Ue(v,P,C){if("**"===P.path)return function lt(v){return{matched:!0,parameters:v.length>0?Pn(v).parameters:{},consumedSegments:v,remainingSegments:[],positionalParamSegments:{}}}(C);if(""===P.path)return"full"===P.pathMatch&&(v.hasChildren()||C.length>0)?{...fe}:{matched:!0,consumedSegments:[],remainingSegments:C,parameters:{},positionalParamSegments:{}};const j=(P.matcher||nt)(C,v,P);if(!j)return{...fe};const te={};Object.entries(j.posParams??{}).forEach(([wt,dt])=>{te[wt]=dt.path});const Te=j.consumed.length>0?{...te,...j.consumed[j.consumed.length-1].parameters}:te;return{matched:!0,consumedSegments:j.consumed,remainingSegments:C.slice(j.consumed.length),parameters:Te,positionalParamSegments:j.posParams??{}}}function Pt(v,P,C,R){return C.length>0&&function Ir(v,P,C){return C.some(R=>Hn(v,P,R)&&lr(R)!==St)}(v,C,R)?{segmentGroup:new qt(P,gn(R,new qt(C,v.children))),slicedSegments:[]}:0===C.length&&function Kn(v,P,C){return C.some(R=>Hn(v,P,R))}(v,C,R)?{segmentGroup:new qt(v.segments,cn(v,C,R,v.children)),slicedSegments:C}:{segmentGroup:new qt(v.segments,v.children),slicedSegments:C}}function cn(v,P,C,R){const j={};for(const te of C)if(Hn(v,P,te)&&!R[lr(te)]){const Te=new qt([],{});j[lr(te)]=Te}return{...R,...j}}function gn(v,P){const C={};C[St]=P;for(const R of v)if(""===R.path&&lr(R)!==St){const j=new qt([],{});C[lr(R)]=j}return C}function Hn(v,P,C){return(!(v.hasChildren()||P.length>0)||"full"!==C.pathMatch)&&""===C.path}class ci{}class Vi{constructor(P,C,R,j,te,Te,wt){this.injector=P,this.configLoader=C,this.rootComponentType=R,this.config=j,this.urlTree=te,this.paramsInheritanceStrategy=Te,this.urlSerializer=wt,this.applyRedirects=new Y(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(P){return new V.wOt(4002,`'${P.segmentGroup}'`)}recognize(){const P=Pt(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(P).pipe((0,Fn.T)(C=>{const R=new Fs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},St,this.rootComponentType,null,{}),j=new oi(R,C),te=new Vs("",j),Te=function Je(v,P,C=null,R=null){return nn(xt(v),P,C,R)}(R,[],this.urlTree.queryParams,this.urlTree.fragment);return Te.queryParams=this.urlTree.queryParams,te.url=this.urlSerializer.serialize(Te),this.inheritParamsAndData(te._root,null),{state:te,tree:Te}}))}match(P){return this.processSegmentGroup(this.injector,this.config,P,St).pipe((0,Ze.W)(R=>{if(R instanceof la)return this.urlTree=R.urlTree,this.match(R.urlTree.root);throw R instanceof ji?this.noMatchError(R):R}))}inheritParamsAndData(P,C){const R=P.value,j=Ds(R,C,this.paramsInheritanceStrategy);R.params=Object.freeze(j.params),R.data=Object.freeze(j.data),P.children.forEach(te=>this.inheritParamsAndData(te,R))}processSegmentGroup(P,C,R,j){return 0===R.segments.length&&R.hasChildren()?this.processChildren(P,C,R):this.processSegment(P,C,R,R.segments,j,!0).pipe((0,Fn.T)(te=>te instanceof oi?[te]:[]))}processChildren(P,C,R){const j=[];for(const te of Object.keys(R.children))"primary"===te?j.unshift(te):j.push(te);return(0,Pe.H)(j).pipe((0,_t.H)(te=>{const Te=R.children[te],wt=function ls(v,P){const C=v.filter(R=>lr(R)===P);return C.push(...v.filter(R=>lr(R)!==P)),C}(C,te);return this.processSegmentGroup(P,wt,Te,te)}),(0,Gt.S)((te,Te)=>(te.push(...Te),te)),(0,un.U)(null),function vn(v,P){const C=arguments.length>=2;return R=>R.pipe(v?(0,ke.p)((j,te)=>v(j,te,R)):ve.D,Jt(1),C?(0,un.U)(P):(0,en.v)(()=>new bt.G))}(),(0,Qe.Z)(te=>{if(null===te)return Z(R);const Te=$i(te);return function Ss(v){v.sort((P,C)=>P.value.outlet===St?-1:C.value.outlet===St?1:P.value.outlet.localeCompare(C.value.outlet))}(Te),(0,B.of)(Te)}))}processSegment(P,C,R,j,te,Te){return(0,Pe.H)(C).pipe((0,_t.H)(wt=>this.processSegmentAgainstRoute(wt._injector??P,C,wt,R,j,te,Te).pipe((0,Ze.W)(dt=>{if(dt instanceof ji)return(0,B.of)(null);throw dt}))),(0,ct.$)(wt=>!!wt),(0,Ze.W)(wt=>{if(Ia(wt))return function ei(v,P,C){return 0===P.length&&!v.children[C]}(R,j,te)?(0,B.of)(new ci):Z(R);throw wt}))}processSegmentAgainstRoute(P,C,R,j,te,Te,wt){return function Dn(v,P,C,R){return!!(lr(v)===R||R!==St&&Hn(P,C,v))&&Ue(P,v,C).matched}(R,j,te,Te)?void 0===R.redirectTo?this.matchSegmentAgainstRoute(P,j,R,te,Te):this.allowRedirects&&wt?this.expandSegmentAgainstRouteUsingRedirect(P,j,C,R,te,Te):Z(j):Z(j)}expandSegmentAgainstRouteUsingRedirect(P,C,R,j,te,Te){const{matched:wt,consumedSegments:dt,positionalParamSegments:dn,remainingSegments:rr}=Ue(C,j,te);if(!wt)return Z(C);j.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const pr=this.applyRedirects.applyRedirectCommands(dt,j.redirectTo,dn);return this.applyRedirects.lineralizeSegments(j,pr).pipe((0,Qe.Z)(Hi=>this.processSegment(P,R,C,Hi.concat(rr),Te,!1)))}matchSegmentAgainstRoute(P,C,R,j,te){const Te=Ae(C,R,j,P);return"**"===R.path&&(C.children={}),Te.pipe((0,xn.n)(wt=>wt.matched?this.getChildConfig(P=R._injector??P,R,j).pipe((0,xn.n)(({routes:dt})=>{const dn=R._loadedInjector??P,{consumedSegments:rr,remainingSegments:pr,parameters:Hi}=wt,Ac=new Fs(rr,Hi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Xo(v){return v.data||{}}(R),lr(R),R.component??R._loadedComponent??null,R,function po(v){return v.resolve||{}}(R)),{segmentGroup:Zo,slicedSegments:mo}=Pt(C,rr,pr,dt);if(0===mo.length&&Zo.hasChildren())return this.processChildren(dn,dt,Zo).pipe((0,Fn.T)(Ho=>null===Ho?null:new oi(Ac,Ho)));if(0===dt.length&&0===mo.length)return(0,B.of)(new oi(Ac,[]));const zs=lr(R)===te;return this.processSegment(dn,dt,Zo,mo,zs?St:te,!0).pipe((0,Fn.T)(Ho=>new oi(Ac,Ho instanceof oi?[Ho]:[])))})):Z(C)))}getChildConfig(P,C,R){return C.children?(0,B.of)({routes:C.children,injector:P}):C.loadChildren?void 0!==C._loadedRoutes?(0,B.of)({routes:C._loadedRoutes,injector:C._loadedInjector}):function Qr(v,P,C,R){const j=P.canLoad;if(void 0===j||0===j.length)return(0,B.of)(!0);const te=j.map(Te=>{const wt=sn(Te,v);return Vr(function Ja(v){return v&&no(v.canLoad)}(wt)?wt.canLoad(P,C):(0,V.N4e)(v,()=>wt(P,C)))});return(0,B.of)(te).pipe(Uo(),_i())}(P,C,R).pipe((0,Qe.Z)(j=>j?this.configLoader.loadChildren(P,C).pipe((0,vt.M)(te=>{C._loadedRoutes=te.routes,C._loadedInjector=te.injector})):function L(v){return Ve(Hs(!1,ri.GuardRejected))}())):(0,B.of)({routes:[],injector:P})}}function Si(v){const P=v.value.routeConfig;return P&&""===P.path}function $i(v){const P=[],C=new Set;for(const R of v){if(!Si(R)){P.push(R);continue}const j=P.find(te=>R.value.routeConfig===te.value.routeConfig);void 0!==j?(j.children.push(...R.children),C.add(j)):P.push(R)}for(const R of C){const j=$i(R.children);P.push(new oi(R.value,j))}return P.filter(R=>!C.has(R))}function Da(v){const P=v.children.map(C=>Da(C)).flat();return[v,...P]}function Mn(v){return(0,xn.n)(P=>{const C=v(P);return C?(0,Pe.H)(C).pipe((0,Fn.T)(()=>P)):(0,B.of)(P)})}let Rn=(()=>{class v{buildTitle(C){let R,j=C.root;for(;void 0!==j;)R=this.getResolvedTitleForRoute(j)??R,j=j.children.find(te=>te.outlet===St);return R}getResolvedTitleForRoute(C){return C.data[mt]}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:()=>(0,V.WQX)(hr),providedIn:"root"})}return v})(),hr=(()=>{class v extends Rn{constructor(C){super(),this.title=C}updateTitle(C){const R=this.buildTitle(C);void 0!==R&&this.title.setTitle(R)}static#e=this.\u0275fac=function(R){return new(R||v)(V.KVO(or.hE))};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const T=new V.nKC("",{providedIn:"root",factory:()=>({})}),Q=new V.nKC("");let F=(()=>{class v{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,V.WQX)(V.Ql9)}loadComponent(C){if(this.componentLoaders.get(C))return this.componentLoaders.get(C);if(C._loadedComponent)return(0,B.of)(C._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(C);const R=Vr(C.loadComponent()).pipe((0,Fn.T)(Ct),(0,vt.M)(te=>{this.onLoadEndListener&&this.onLoadEndListener(C),C._loadedComponent=te}),(0,jn.j)(()=>{this.componentLoaders.delete(C)})),j=new We(R,()=>new pn.B).pipe(Ne());return this.componentLoaders.set(C,j),j}loadChildren(C,R){if(this.childrenLoaders.get(R))return this.childrenLoaders.get(R);if(R._loadedRoutes)return(0,B.of)({routes:R._loadedRoutes,injector:R._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(R);const te=function $(v,P,C,R){return Vr(v.loadChildren()).pipe((0,Fn.T)(Ct),(0,Qe.Z)(j=>j instanceof V.Co$||Array.isArray(j)?(0,B.of)(j):(0,Pe.H)(P.compileModuleAsync(j))),(0,Fn.T)(j=>{R&&R(v);let te,Te,wt=!1;return Array.isArray(j)?(Te=j,!0):(te=j.create(C).injector,Te=te.get(Q,[],{optional:!0,self:!0}).flat()),{routes:Te.map(ho),injector:te}}))}(R,this.compiler,C,this.onLoadEndListener).pipe((0,jn.j)(()=>{this.childrenLoaders.delete(R)})),Te=new We(te,()=>new pn.B).pipe(Ne());return this.childrenLoaders.set(R,Te),Te}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function Ct(v){return function Ee(v){return v&&"object"==typeof v&&"default"in v}(v)?v.default:v}let Vt=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:()=>(0,V.WQX)(rn),providedIn:"root"})}return v})(),rn=(()=>{class v{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,R){return C}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const Pr=new V.nKC(""),Sn=new V.nKC("");function xr(v,P,C){const R=v.get(Sn),j=v.get(bn.qQ);return v.get(V.SKi).runOutsideAngular(()=>{if(!j.startViewTransition||R.skipNextTransition)return R.skipNextTransition=!1,new Promise(dn=>setTimeout(dn));let te;const Te=new Promise(dn=>{te=dn}),wt=j.startViewTransition(()=>(te(),function fr(v){return new Promise(P=>{(0,V.mal)(P,{injector:v})})}(v))),{onViewTransitionCreated:dt}=R;return dt&&(0,V.N4e)(v,()=>dt({transition:wt,from:P,to:C})),Te})}let vi=(()=>{class v{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new pn.B,this.transitionAbortSubject=new pn.B,this.configLoader=(0,V.WQX)(F),this.environmentInjector=(0,V.WQX)(V.uvJ),this.urlSerializer=(0,V.WQX)(xe),this.rootContexts=(0,V.WQX)(js),this.location=(0,V.WQX)(bn.aZ),this.inputBindingEnabled=null!==(0,V.WQX)(zi,{optional:!0}),this.titleStrategy=(0,V.WQX)(Rn),this.options=(0,V.WQX)(T,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,V.WQX)(Vt),this.createViewTransition=(0,V.WQX)(Pr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,B.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=j=>this.events.next(new Js(j)),this.configLoader.onLoadStartListener=j=>this.events.next(new qo(j))}complete(){this.transitions?.complete()}handleNavigationRequest(C){const R=++this.navigationId;this.transitions?.next({...this.transitions.value,...C,id:R})}setupNavigations(C,R,j){return this.transitions=new Le.t({id:0,currentUrlTree:R,currentRawUrl:R,extractedUrl:this.urlHandlingStrategy.extract(R),urlAfterRedirects:this.urlHandlingStrategy.extract(R),rawUrl:R,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pi,restoredState:null,currentSnapshot:j.snapshot,targetSnapshot:null,currentRouterState:j,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,ke.p)(te=>0!==te.id),(0,Fn.T)(te=>({...te,extractedUrl:this.urlHandlingStrategy.extract(te.rawUrl)})),(0,xn.n)(te=>{let Te=!1,wt=!1;return(0,B.of)(te).pipe((0,xn.n)(dt=>{if(this.navigationId>te.id)return this.cancelNavigationTransition(te,"",ri.SupersededByNewNavigation),Ye.w;this.currentTransition=te,this.currentNavigation={id:dt.id,initialUrl:dt.rawUrl,extractedUrl:dt.extractedUrl,trigger:dt.source,extras:dt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const dn=!C.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!dn&&"reload"!==(dt.extras.onSameUrlNavigation??C.onSameUrlNavigation)){const pr="";return this.events.next(new Co(dt.id,this.urlSerializer.serialize(dt.rawUrl),pr,Nn.IgnoredSameUrlNavigation)),dt.resolve(null),Ye.w}if(this.urlHandlingStrategy.shouldProcessUrl(dt.rawUrl))return(0,B.of)(dt).pipe((0,xn.n)(pr=>{const Hi=this.transitions?.getValue();return this.events.next(new ui(pr.id,this.urlSerializer.serialize(pr.extractedUrl),pr.source,pr.restoredState)),Hi!==this.transitions?.getValue()?Ye.w:Promise.resolve(pr)}),function Ta(v,P,C,R,j,te){return(0,Qe.Z)(Te=>function yi(v,P,C,R,j,te,Te="emptyOnly"){return new Vi(v,P,C,R,j,Te,te).recognize()}(v,P,C,R,Te.extractedUrl,j,te).pipe((0,Fn.T)(({state:wt,tree:dt})=>({...Te,targetSnapshot:wt,urlAfterRedirects:dt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,C.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,vt.M)(pr=>{te.targetSnapshot=pr.targetSnapshot,te.urlAfterRedirects=pr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:pr.urlAfterRedirects};const Hi=new wo(pr.id,this.urlSerializer.serialize(pr.extractedUrl),this.urlSerializer.serialize(pr.urlAfterRedirects),pr.targetSnapshot);this.events.next(Hi)}));if(dn&&this.urlHandlingStrategy.shouldProcessUrl(dt.currentRawUrl)){const{id:pr,extractedUrl:Hi,source:Ac,restoredState:Zo,extras:mo}=dt,zs=new ui(pr,this.urlSerializer.serialize(Hi),Ac,Zo);this.events.next(zs);const Ho=is(this.rootComponentType).snapshot;return this.currentTransition=te={...dt,targetSnapshot:Ho,urlAfterRedirects:Hi,extras:{...mo,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Hi,(0,B.of)(te)}{const pr="";return this.events.next(new Co(dt.id,this.urlSerializer.serialize(dt.extractedUrl),pr,Nn.IgnoredByUrlHandlingStrategy)),dt.resolve(null),Ye.w}}),(0,vt.M)(dt=>{const dn=new ya(dt.id,this.urlSerializer.serialize(dt.extractedUrl),this.urlSerializer.serialize(dt.urlAfterRedirects),dt.targetSnapshot);this.events.next(dn)}),(0,Fn.T)(dt=>(this.currentTransition=te={...dt,guards:ee(dt.targetSnapshot,dt.currentSnapshot,this.rootContexts)},te)),function ec(v,P){return(0,Qe.Z)(C=>{const{targetSnapshot:R,currentSnapshot:j,guards:{canActivateChecks:te,canDeactivateChecks:Te}}=C;return 0===Te.length&&0===te.length?(0,B.of)({...C,guardsResult:!0}):function wa(v,P,C,R){return(0,Pe.H)(v).pipe((0,Qe.Z)(j=>function dr(v,P,C,R,j){const te=P&&P.routeConfig?P.routeConfig.canDeactivate:null;if(!te||0===te.length)return(0,B.of)(!0);const Te=te.map(wt=>{const dt=_s(P)??j,dn=sn(wt,dt);return Vr(function Ea(v){return v&&no(v.canDeactivate)}(dn)?dn.canDeactivate(v,P,C,R):(0,V.N4e)(dt,()=>dn(v,P,C,R))).pipe((0,ct.$)())});return(0,B.of)(Te).pipe(Uo())}(j.component,j.route,C,P,R)),(0,ct.$)(j=>!0!==j,!0))}(Te,R,j,v).pipe((0,Qe.Z)(wt=>wt&&function aa(v){return"boolean"==typeof v}(wt)?function Bo(v,P,C,R){return(0,Pe.H)(P).pipe((0,_t.H)(j=>(0,gt.x)(function ua(v,P){return null!==v&&P&&P(new wr(v)),(0,B.of)(!0)}(j.route.parent,R),function To(v,P){return null!==v&&P&&P(new xs(v)),(0,B.of)(!0)}(j.route,R),function fo(v,P,C){const R=P[P.length-1],te=P.slice(0,P.length-1).reverse().map(Te=>function Se(v){const P=v.routeConfig?v.routeConfig.canActivateChild:null;return P&&0!==P.length?{node:v,guards:P}:null}(Te)).filter(Te=>null!==Te).map(Te=>de(()=>{const wt=Te.guards.map(dt=>{const dn=_s(Te.node)??C,rr=sn(dt,dn);return Vr(function Br(v){return v&&no(v.canActivateChild)}(rr)?rr.canActivateChild(R,v):(0,V.N4e)(dn,()=>rr(R,v))).pipe((0,ct.$)())});return(0,B.of)(wt).pipe(Uo())}));return(0,B.of)(te).pipe(Uo())}(v,j.path,C),function Do(v,P,C){const R=P.routeConfig?P.routeConfig.canActivate:null;if(!R||0===R.length)return(0,B.of)(!0);const j=R.map(te=>de(()=>{const Te=_s(P)??C,wt=sn(te,Te);return Vr(function Za(v){return v&&no(v.canActivate)}(wt)?wt.canActivate(P,v):(0,V.N4e)(Te,()=>wt(P,v))).pipe((0,ct.$)())}));return(0,B.of)(j).pipe(Uo())}(v,j.route,C))),(0,ct.$)(j=>!0!==j,!0))}(R,te,v,P):(0,B.of)(wt)),(0,Fn.T)(wt=>({...C,guardsResult:wt})))})}(this.environmentInjector,dt=>this.events.next(dt)),(0,vt.M)(dt=>{if(te.guardsResult=dt.guardsResult,ut(dt.guardsResult))throw As(0,dt.guardsResult);const dn=new va(dt.id,this.urlSerializer.serialize(dt.extractedUrl),this.urlSerializer.serialize(dt.urlAfterRedirects),dt.targetSnapshot,!!dt.guardsResult);this.events.next(dn)}),(0,ke.p)(dt=>!!dt.guardsResult||(this.cancelNavigationTransition(dt,"",ri.GuardRejected),!1)),Mn(dt=>{if(dt.guards.canActivateChecks.length)return(0,B.of)(dt).pipe((0,vt.M)(dn=>{const rr=new ko(dn.id,this.urlSerializer.serialize(dn.extractedUrl),this.urlSerializer.serialize(dn.urlAfterRedirects),dn.targetSnapshot);this.events.next(rr)}),(0,xn.n)(dn=>{let rr=!1;return(0,B.of)(dn).pipe(function vs(v,P){return(0,Qe.Z)(C=>{const{targetSnapshot:R,guards:{canActivateChecks:j}}=C;if(!j.length)return(0,B.of)(C);const te=new Set(j.map(dt=>dt.route)),Te=new Set;for(const dt of te)if(!Te.has(dt))for(const dn of Da(dt))Te.add(dn);let wt=0;return(0,Pe.H)(Te).pipe((0,_t.H)(dt=>te.has(dt)?function Aa(v,P,C,R){const j=v.routeConfig,te=v._resolve;return void 0!==j?.title&&!Bi(j)&&(te[mt]=j.title),function tc(v,P,C,R){const j=ir(v);if(0===j.length)return(0,B.of)({});const te={};return(0,Pe.H)(j).pipe((0,Qe.Z)(Te=>function In(v,P,C,R){const j=_s(P)??R,te=sn(v,j);return Vr(te.resolve?te.resolve(P,C):(0,V.N4e)(j,()=>te(P,C)))}(v[Te],P,C,R).pipe((0,ct.$)(),(0,vt.M)(wt=>{te[Te]=wt}))),Jt(1),function En(v){return(0,Fn.T)(()=>v)}(te),(0,Ze.W)(Te=>Ia(Te)?Ye.w:Ve(Te)))}(te,v,P,R).pipe((0,Fn.T)(Te=>(v._resolvedData=Te,v.data=Ds(v,v.parent,C).resolve,null)))}(dt,R,v,P):(dt.data=Ds(dt,dt.parent,v).resolve,(0,B.of)(void 0))),(0,vt.M)(()=>wt++),Jt(1),(0,Qe.Z)(dt=>wt===Te.size?(0,B.of)(C):Ye.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,vt.M)({next:()=>rr=!0,complete:()=>{rr||this.cancelNavigationTransition(dn,"",ri.NoDataFromResolver)}}))}),(0,vt.M)(dn=>{const rr=new sr(dn.id,this.urlSerializer.serialize(dn.extractedUrl),this.urlSerializer.serialize(dn.urlAfterRedirects),dn.targetSnapshot);this.events.next(rr)}))}),Mn(dt=>{const dn=rr=>{const pr=[];rr.routeConfig?.loadComponent&&!rr.routeConfig._loadedComponent&&pr.push(this.configLoader.loadComponent(rr.routeConfig).pipe((0,vt.M)(Hi=>{rr.component=Hi}),(0,Fn.T)(()=>{})));for(const Hi of rr.children)pr.push(...dn(Hi));return pr};return At(dn(dt.targetSnapshot.root)).pipe((0,un.U)(null),(0,fn.s)(1))}),Mn(()=>this.afterPreactivation()),(0,xn.n)(()=>{const{currentSnapshot:dt,targetSnapshot:dn}=te,rr=this.createViewTransition?.(this.environmentInjector,dt.root,dn.root);return rr?(0,Pe.H)(rr).pipe((0,Fn.T)(()=>te)):(0,B.of)(te)}),(0,Fn.T)(dt=>{const dn=function Xi(v,P,C){const R=Fi(v,P._root,C?C._root:void 0);return new li(R,P)}(C.routeReuseStrategy,dt.targetSnapshot,dt.currentRouterState);return this.currentTransition=te={...dt,targetRouterState:dn},this.currentNavigation.targetRouterState=dn,te}),(0,vt.M)(()=>{this.events.next(new Sr)}),((v,P,C,R)=>(0,Fn.T)(j=>(new G(P,j.targetRouterState,j.currentRouterState,C,R).activate(v),j)))(this.rootContexts,C.routeReuseStrategy,dt=>this.events.next(dt),this.inputBindingEnabled),(0,fn.s)(1),(0,vt.M)({next:dt=>{Te=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gi(dt.id,this.urlSerializer.serialize(dt.extractedUrl),this.urlSerializer.serialize(dt.urlAfterRedirects))),this.titleStrategy?.updateTitle(dt.targetRouterState.snapshot),dt.resolve(!0)},complete:()=>{Te=!0}}),function yn(v){return(0,ce.N)((P,C)=>{(0,ue.Tg)(v).subscribe((0,De._)(C,()=>C.complete(),it.l)),!C.closed&&P.subscribe(C)})}(this.transitionAbortSubject.pipe((0,vt.M)(dt=>{throw dt}))),(0,jn.j)(()=>{!Te&&!wt&&this.cancelNavigationTransition(te,"",ri.SupersededByNewNavigation),this.currentTransition?.id===te.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,Ze.W)(dt=>{if(wt=!0,to(dt))this.events.next(new cr(te.id,this.urlSerializer.serialize(te.extractedUrl),dt.message,dt.cancellationCode)),function oa(v){return to(v)&&ut(v.url)}(dt)?this.events.next(new Ts(dt.url)):te.resolve(!1);else{this.events.next(new Qi(te.id,this.urlSerializer.serialize(te.extractedUrl),dt,te.targetSnapshot??void 0));try{te.resolve(C.errorHandler(dt))}catch(dn){this.options.resolveNavigationPromiseOnError?te.resolve(!1):te.reject(dn)}}return Ye.w}))}))}cancelNavigationTransition(C,R,j){const te=new cr(C.id,this.urlSerializer.serialize(C.extractedUrl),R,j);this.events.next(te),C.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function ti(v){return v!==pi}let Pi=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:()=>(0,V.WQX)(Qt),providedIn:"root"})}return v})();class Xr{shouldDetach(P){return!1}store(P,C){}shouldAttach(P){return!1}retrieve(P){return null}shouldReuseRoute(P,C){return P.routeConfig===C.routeConfig}}let Qt=(()=>{class v extends Xr{static#e=this.\u0275fac=(()=>{let C;return function(j){return(C||(C=V.xGo(v)))(j||v)}})();static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),_n=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:()=>(0,V.WQX)(mr),providedIn:"root"})}return v})(),mr=(()=>{class v extends _n{constructor(){super(...arguments),this.location=(0,V.WQX)(bn.aZ),this.urlSerializer=(0,V.WQX)(xe),this.options=(0,V.WQX)(T,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,V.WQX)(Vt),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new _r,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=is(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(C){return this.location.subscribe(R=>{"popstate"===R.type&&C(R.url,R.state)})}handleRouterEvent(C,R){if(C instanceof ui)this.stateMemento=this.createStateMemento();else if(C instanceof Co)this.rawUrlTree=R.initialUrl;else if(C instanceof wo){if("eager"===this.urlUpdateStrategy&&!R.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(R.finalUrl,R.initialUrl);this.setBrowserUrl(j,R)}}else C instanceof Sr?(this.currentUrlTree=R.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(R.finalUrl,R.initialUrl),this.routerState=R.targetRouterState,"deferred"===this.urlUpdateStrategy&&(R.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,R))):C instanceof cr&&(C.code===ri.GuardRejected||C.code===ri.NoDataFromResolver)?this.restoreHistory(R):C instanceof Qi?this.restoreHistory(R,!0):C instanceof gi&&(this.lastSuccessfulId=C.id,this.currentPageId=this.browserPageId)}setBrowserUrl(C,R){const j=this.urlSerializer.serialize(C);if(this.location.isCurrentPathEqualTo(j)||R.extras.replaceUrl){const Te={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId)};this.location.replaceState(j,"",Te)}else{const te={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId+1)};this.location.go(j,"",te)}}restoreHistory(C,R=!1){if("computed"===this.canceledNavigationResolution){const te=this.currentPageId-this.browserPageId;0!==te?this.location.historyGo(te):this.currentUrlTree===C.finalUrl&&0===te&&(this.resetState(C),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(C,R){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:R}:{navigationId:C}}static#e=this.\u0275fac=(()=>{let C;return function(j){return(C||(C=V.xGo(v)))(j||v)}})();static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();var Mi=function(v){return v[v.COMPLETE=0]="COMPLETE",v[v.FAILED=1]="FAILED",v[v.REDIRECTING=2]="REDIRECTING",v}(Mi||{});function Ei(v,P){v.events.pipe((0,ke.p)(C=>C instanceof gi||C instanceof cr||C instanceof Qi||C instanceof Co),(0,Fn.T)(C=>C instanceof gi||C instanceof Co?Mi.COMPLETE:C instanceof cr&&(C.code===ri.Redirect||C.code===ri.SupersededByNewNavigation)?Mi.REDIRECTING:Mi.FAILED),(0,ke.p)(C=>C!==Mi.REDIRECTING),(0,fn.s)(1)).subscribe(()=>{P()})}function cs(v){throw v}const Gs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ii={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gr=(()=>{class v{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,V.WQX)(V.H3F),this.stateManager=(0,V.WQX)(_n),this.options=(0,V.WQX)(T,{optional:!0})||{},this.pendingTasks=(0,V.WQX)(V.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,V.WQX)(vi),this.urlSerializer=(0,V.WQX)(xe),this.location=(0,V.WQX)(bn.aZ),this.urlHandlingStrategy=(0,V.WQX)(Vt),this._events=new pn.B,this.errorHandler=this.options.errorHandler||cs,this.navigated=!1,this.routeReuseStrategy=(0,V.WQX)(Pi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,V.WQX)(Q,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,V.WQX)(zi,{optional:!0}),this.eventsSubscription=new et.yU,this.isNgZoneEnabled=(0,V.WQX)(V.SKi)instanceof V.SKi&&V.SKi.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:C=>{this.console.warn(C)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const C=this.navigationTransitions.events.subscribe(R=>{try{const j=this.navigationTransitions.currentTransition,te=this.navigationTransitions.currentNavigation;if(null!==j&&null!==te)if(this.stateManager.handleRouterEvent(R,te),R instanceof cr&&R.code!==ri.Redirect&&R.code!==ri.SupersededByNewNavigation)this.navigated=!0;else if(R instanceof gi)this.navigated=!0;else if(R instanceof Ts){const Te=this.urlHandlingStrategy.merge(R.url,j.currentRawUrl),wt={info:j.extras.info,skipLocationChange:j.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ti(j.source)};this.scheduleNavigation(Te,pi,null,wt,{resolve:j.resolve,reject:j.reject,promise:j.promise})}(function nr(v){return!(v instanceof Sr||v instanceof Ts)})(R)&&this._events.next(R)}catch(j){this.navigationTransitions.transitionAbortSubject.next(j)}});this.eventsSubscription.add(C)}resetRootComponentType(C){this.routerState.root.component=C,this.navigationTransitions.rootComponentType=C}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((C,R)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(C,"popstate",R)},0)})}navigateToSyncWithBrowser(C,R,j){const te={replaceUrl:!0},Te=j?.navigationId?j:null;if(j){const dt={...j};delete dt.navigationId,delete dt.\u0275routerPageId,0!==Object.keys(dt).length&&(te.state=dt)}const wt=this.parseUrl(C);this.scheduleNavigation(wt,R,Te,te)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(C){this.config=C.map(ho),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(C,R={}){const{relativeTo:j,queryParams:te,fragment:Te,queryParamsHandling:wt,preserveFragment:dt}=R,dn=dt?this.currentUrlTree.fragment:Te;let pr,rr=null;switch(wt){case"merge":rr={...this.currentUrlTree.queryParams,...te};break;case"preserve":rr=this.currentUrlTree.queryParams;break;default:rr=te||null}null!==rr&&(rr=this.removeEmptyProps(rr));try{pr=xt(j?j.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof C[0]||!C[0].startsWith("/"))&&(C=[]),pr=this.currentUrlTree.root}return nn(pr,C,rr,dn??null)}navigateByUrl(C,R={skipLocationChange:!1}){const j=ut(C)?C:this.parseUrl(C),te=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(te,pi,null,R)}navigate(C,R={skipLocationChange:!1}){return function go(v){for(let P=0;P<v.length;P++)if(null==v[P])throw new V.wOt(4008,!1)}(C),this.navigateByUrl(this.createUrlTree(C,R),R)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){try{return this.urlSerializer.parse(C)}catch{return this.urlSerializer.parse("/")}}isActive(C,R){let j;if(j=!0===R?{...Gs}:!1===R?{...Ii}:R,ut(C))return Gi(this.currentUrlTree,C,j);const te=this.parseUrl(C);return Gi(this.currentUrlTree,te,j)}removeEmptyProps(C){return Object.entries(C).reduce((R,[j,te])=>(null!=te&&(R[j]=te),R),{})}scheduleNavigation(C,R,j,te,Te){if(this.disposed)return Promise.resolve(!1);let wt,dt,dn;Te?(wt=Te.resolve,dt=Te.reject,dn=Te.promise):dn=new Promise((pr,Hi)=>{wt=pr,dt=Hi});const rr=this.pendingTasks.add();return Ei(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(rr))}),this.navigationTransitions.handleNavigationRequest({source:R,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:C,extras:te,resolve:wt,reject:dt,promise:dn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),dn.catch(pr=>Promise.reject(pr))}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),jo=(()=>{class v{constructor(C,R,j,te,Te,wt){this.router=C,this.route=R,this.tabIndexAttribute=j,this.renderer=te,this.el=Te,this.locationStrategy=wt,this.href=null,this.commands=null,this.onChanges=new pn.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const dt=Te.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===dt||"area"===dt,this.isAnchorElement?this.subscription=C.events.subscribe(dn=>{dn instanceof gi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(C){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",C)}ngOnChanges(C){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(C){null!=C?(this.commands=Array.isArray(C)?C:[C],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(C,R,j,te,Te){const wt=this.urlTree;return!!(null===wt||this.isAnchorElement&&(0!==C||R||j||te||Te||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(wt,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const C=this.urlTree;this.href=null!==C&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(C)):null;const R=null===this.href?null:(0,V.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",R)}applyAttributeValue(C,R){const j=this.renderer,te=this.el.nativeElement;null!==R?j.setAttribute(te,C,R):j.removeAttribute(te,C)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(R){return new(R||v)(V.rXU(Gr),V.rXU(mi),V.kS0("tabindex"),V.rXU(V.sFG),V.rXU(V.aKT),V.rXU(bn.hb))};static#t=this.\u0275dir=V.FsC({type:v,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(R,j){1&R&&V.bIt("click",function(Te){return j.onClick(Te.button,Te.ctrlKey,Te.shiftKey,Te.altKey,Te.metaKey)}),2&R&&V.BMQ("target",j.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[V.Mj6.HasDecoratorInputTransform,"preserveFragment","preserveFragment",V.L39],skipLocationChange:[V.Mj6.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",V.L39],replaceUrl:[V.Mj6.HasDecoratorInputTransform,"replaceUrl","replaceUrl",V.L39],routerLink:"routerLink"},standalone:!0,features:[V.GFd,V.OA$]})}return v})();class Gn{}let $o=(()=>{class v{constructor(C,R,j,te,Te){this.router=C,this.injector=j,this.preloadingStrategy=te,this.loader=Te}setUpPreloading(){this.subscription=this.router.events.pipe((0,ke.p)(C=>C instanceof gi),(0,_t.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,R){const j=[];for(const te of R){te.providers&&!te._injector&&(te._injector=(0,V.Ol2)(te.providers,C,`Route: ${te.path}`));const Te=te._injector??C,wt=te._loadedInjector??Te;(te.loadChildren&&!te._loadedRoutes&&void 0===te.canLoad||te.loadComponent&&!te._loadedComponent)&&j.push(this.preloadConfig(Te,te)),(te.children||te._loadedRoutes)&&j.push(this.processRoutes(wt,te.children??te._loadedRoutes))}return(0,Pe.H)(j).pipe((0,Qn.U)())}preloadConfig(C,R){return this.preloadingStrategy.preload(R,()=>{let j;j=R.loadChildren&&void 0===R.canLoad?this.loader.loadChildren(C,R):(0,B.of)(null);const te=j.pipe((0,Qe.Z)(Te=>null===Te?(0,B.of)(void 0):(R._loadedRoutes=Te.routes,R._loadedInjector=Te.injector,this.processRoutes(Te.injector??C,Te.routes))));if(R.loadComponent&&!R._loadedComponent){const Te=this.loader.loadComponent(R);return(0,Pe.H)([te,Te]).pipe((0,Qn.U)())}return te})}static#e=this.\u0275fac=function(R){return new(R||v)(V.KVO(Gr),V.KVO(V.Ql9),V.KVO(V.uvJ),V.KVO(Gn),V.KVO(F))};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const da=new V.nKC("");let Il=(()=>{class v{constructor(C,R,j,te,Te={}){this.urlSerializer=C,this.transitions=R,this.viewportScroller=j,this.zone=te,this.options=Te,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,V.WQX)(V.uvJ),Te.scrollPositionRestoration||="disabled",Te.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(C=>{C instanceof ui?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof gi?(this.lastId=C.id,this.scheduleScrollEvent(C,this.urlSerializer.parse(C.urlAfterRedirects).fragment)):C instanceof Co&&C.code===Nn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(C,this.urlSerializer.parse(C.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(C=>{C instanceof gs&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,R){var j=this;this.zone.runOutsideAngular((0,_.A)(function*(){yield new Promise(te=>{setTimeout(()=>{te()}),(0,V.mal)(()=>{te()},{injector:j.environmentInjector})}),j.zone.run(()=>{j.transitions.events.next(new gs(C,"popstate"===j.lastSource?j.store[j.restoredId]:null,R))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(R){V.QTQ()};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac})}return v})();function Es(v,P){return{\u0275kind:v,\u0275providers:P}}function ba(){const v=(0,V.WQX)(V.zZn);return P=>{const C=v.get(V.o8S);if(P!==C.components[0])return;const R=v.get(Gr),j=v.get(Sa);1===v.get(Ri)&&R.initialNavigation(),v.get(Kc,null,V.$GK.Optional)?.setUpPreloading(),v.get(da,null,V.$GK.Optional)?.init(),R.resetRootComponentType(C.componentTypes[0]),j.closed||(j.next(),j.complete(),j.unsubscribe())}}const Sa=new V.nKC("",{factory:()=>new pn.B}),Ri=new V.nKC("",{providedIn:"root",factory:()=>1}),Kc=new V.nKC("");function Jo(v){return Es(0,[{provide:Kc,useExisting:$o},{provide:Gn,useExisting:v}])}function Qc(v){return Es(9,[{provide:Pr,useValue:xr},{provide:Sn,useValue:{skipNextTransition:!!v?.skipInitialTransition,...v}}])}const Li=new V.nKC("ROUTER_FORROOT_GUARD"),Mu=[bn.aZ,{provide:xe,useClass:we},Gr,js,{provide:mi,useFactory:function rc(v){return v.routerState.root},deps:[Gr]},F,[]];let Ua=(()=>{class v{constructor(C){}static forRoot(C,R){return{ngModule:v,providers:[Mu,[],{provide:Q,multi:!0,useValue:C},{provide:Li,useFactory:Yh,deps:[[Gr,new V.Xx1,new V.kdw]]},{provide:T,useValue:R||{}},R?.useHash?{provide:bn.hb,useClass:bn.fw}:{provide:bn.hb,useClass:bn.Sm},{provide:da,useFactory:()=>{const v=(0,V.WQX)(bn.Xr),P=(0,V.WQX)(V.SKi),C=(0,V.WQX)(T),R=(0,V.WQX)(vi),j=(0,V.WQX)(xe);return C.scrollOffset&&v.setOffset(C.scrollOffset),new Il(j,R,v,P,C)}},R?.preloadingStrategy?Jo(R.preloadingStrategy).\u0275providers:[],R?.initialNavigation?wl(R):[],R?.bindToComponentInputs?Es(8,[Vo,{provide:zi,useExisting:Vo}]).\u0275providers:[],R?.enableViewTransitions?Qc().\u0275providers:[],[{provide:Ru,useFactory:ba},{provide:V.iLQ,multi:!0,useExisting:Ru}]]}}static forChild(C){return{ngModule:v,providers:[{provide:Q,multi:!0,useValue:C}]}}static#e=this.\u0275fac=function(R){return new(R||v)(V.KVO(Li,8))};static#t=this.\u0275mod=V.$C({type:v});static#n=this.\u0275inj=V.G2t({})}return v})();function Yh(v){return"guarded"}function wl(v){return["disabled"===v.initialNavigation?Es(3,[{provide:V.hnV,multi:!0,useFactory:()=>{const P=(0,V.WQX)(Gr);return()=>{P.setUpLocationChangeListener()}}},{provide:Ri,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?Es(2,[{provide:Ri,useValue:0},{provide:V.hnV,multi:!0,deps:[V.zZn],useFactory:P=>{const C=P.get(bn.hj,Promise.resolve());return()=>C.then(()=>new Promise(R=>{const j=P.get(Gr),te=P.get(Sa);Ei(j,()=>{R(!0)}),P.get(vi).afterPreactivation=()=>(R(!0),te.closed?(0,B.of)(void 0):te),j.initialNavigation()}))}}]).\u0275providers:[]]}const Ru=new V.nKC("")},3345:(Zt,qe,x)=>{x.d(qe,{A:()=>Be});var _=x(1076),V=x(1362),M=x(7852),w=x(8041);class se{constructor(yt,st){this._delegate=yt,this.firebase=st,(0,M._addComponent)(yt,new V.uA("app-compat",()=>this,"PUBLIC")),this.container=yt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(yt){this._delegate.automaticDataCollectionEnabled=yt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(yt=>{this._delegate.checkDestroyed(),yt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,M.deleteApp)(this._delegate)))}_getService(yt,st=M._DEFAULT_ENTRY_NAME){var bt;this._delegate.checkDestroyed();const gt=this._delegate.container.getProvider(yt);return!gt.isInitialized()&&"EXPLICIT"===(null===(bt=gt.getComponent())||void 0===bt?void 0:bt.instantiationMode)&&gt.initialize(),gt.getImmediate({identifier:st})}_removeServiceInstance(yt,st=M._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(yt).clearInstance(st)}_addComponent(yt){(0,M._addComponent)(this._delegate,yt)}_addOrOverwriteComponent(yt){(0,M._addOrOverwriteComponent)(this._delegate,yt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const B=new _.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ve=function $e(){const At=function Le(At){const yt={},st={__esModule:!0,initializeApp:function ue(Ye,et={}){const ce=M.initializeApp(Ye,et);if((0,_.gR)(yt,ce.name))return yt[ce.name];const Ne=new At(ce,st);return yt[ce.name]=Ne,Ne},app:gt,registerVersion:M.registerVersion,setLogLevel:M.setLogLevel,onLog:M.onLog,apps:null,SDK_VERSION:M.SDK_VERSION,INTERNAL:{registerComponent:function ae(Ye){const et=Ye.name,ce=et.replace("-compat","");if(M._registerComponent(Ye)&&"PUBLIC"===Ye.type){const Ne=(We=gt())=>{if("function"!=typeof We[ce])throw B.create("invalid-app-argument",{appName:et});return We[ce]()};void 0!==Ye.serviceProps&&(0,_.zw)(Ne,Ye.serviceProps),st[ce]=Ne,At.prototype[ce]=function(...We){return this._getService.bind(this,et).apply(this,Ye.multipleInstances?We:[])}}return"PUBLIC"===Ye.type?st[ce]:null},removeApp:function bt(Ye){delete yt[Ye]},useAsService:function Ve(Ye,et){return"serverAuth"===et?null:et},modularAPIs:M}};function gt(Ye){if(!(0,_.gR)(yt,Ye=Ye||M._DEFAULT_ENTRY_NAME))throw B.create("no-app",{appName:Ye});return yt[Ye]}return st.default=st,Object.defineProperty(st,"apps",{get:function de(){return Object.keys(yt).map(Ye=>yt[Ye])}}),gt.App=At,st}(se);return At.INTERNAL=Object.assign(Object.assign({},At.INTERNAL),{createFirebaseNamespace:$e,extendNamespace:function yt(st){(0,_.zw)(At,st)},createSubscribe:_.tD,ErrorFactory:_.FA,deepExtend:_.zw}),At}(),_e=new w.Vy("@firebase/app-compat");try{const At=(0,_.mS)();if(void 0!==At.firebase){_e.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const yt=At.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&_e.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Be=ve;!function De(At){(0,M.registerVersion)("@firebase/app-compat","0.2.40",At)}()},7852:(Zt,qe,x)=>{x.r(qe),x.d(qe,{FirebaseError:()=>w.g,SDK_VERSION:()=>Ln,_DEFAULT_ENTRY_NAME:()=>ir,_addComponent:()=>Wr,_addOrOverwriteComponent:()=>Gi,_apps:()=>Pn,_clearComponents:()=>Vn,_components:()=>zr,_getProvider:()=>xi,_isFirebaseApp:()=>Di,_isFirebaseServerApp:()=>Ht,_registerComponent:()=>Or,_removeServiceInstance:()=>On,_serverApps:()=>Vr,deleteApp:()=>Ke,getApp:()=>we,getApps:()=>Ce,initializeApp:()=>Yr,initializeServerApp:()=>xe,onLog:()=>q,registerVersion:()=>ge,setLogLevel:()=>J});var _=x(467),V=x(1362),M=x(8041),w=x(1076);const se=(ut,Je)=>Je.some(xt=>ut instanceof xt);let Pe,B;const ve=new WeakMap,_e=new WeakMap,He=new WeakMap,Tt=new WeakMap,De=new WeakMap;let yt={get(ut,Je,xt){if(ut instanceof IDBTransaction){if("done"===Je)return _e.get(ut);if("objectStoreNames"===Je)return ut.objectStoreNames||He.get(ut);if("store"===Je)return xt.objectStoreNames[1]?void 0:xt.objectStore(xt.objectStoreNames[0])}return ue(ut[Je])},set:(ut,Je,xt)=>(ut[Je]=xt,!0),has:(ut,Je)=>ut instanceof IDBTransaction&&("done"===Je||"store"===Je)||Je in ut};function gt(ut){return"function"==typeof ut?function bt(ut){return ut!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function $e(){return B||(B=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ut)?function(...Je){return ut.apply(de(this),Je),ue(ve.get(this))}:function(...Je){return ue(ut.apply(de(this),Je))}:function(Je,...xt){const nn=ut.call(de(this),Je,...xt);return He.set(nn,Je.sort?Je.sort():[Je]),ue(nn)}}(ut):(ut instanceof IDBTransaction&&function At(ut){if(_e.has(ut))return;const Je=new Promise((xt,nn)=>{const ne=()=>{ut.removeEventListener("complete",ye),ut.removeEventListener("error",Ie),ut.removeEventListener("abort",Ie)},ye=()=>{xt(),ne()},Ie=()=>{nn(ut.error||new DOMException("AbortError","AbortError")),ne()};ut.addEventListener("complete",ye),ut.addEventListener("error",Ie),ut.addEventListener("abort",Ie)});_e.set(ut,Je)}(ut),se(ut,function Le(){return Pe||(Pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ut,yt):ut)}function ue(ut){if(ut instanceof IDBRequest)return function Be(ut){const Je=new Promise((xt,nn)=>{const ne=()=>{ut.removeEventListener("success",ye),ut.removeEventListener("error",Ie)},ye=()=>{xt(ue(ut.result)),ne()},Ie=()=>{nn(ut.error),ne()};ut.addEventListener("success",ye),ut.addEventListener("error",Ie)});return Je.then(xt=>{xt instanceof IDBCursor&&ve.set(xt,ut)}).catch(()=>{}),De.set(Je,ut),Je}(ut);if(Tt.has(ut))return Tt.get(ut);const Je=gt(ut);return Je!==ut&&(Tt.set(ut,Je),De.set(Je,ut)),Je}const de=ut=>De.get(ut),Ye=["get","getKey","getAll","getAllKeys","count"],et=["put","add","delete","clear"],ce=new Map;function Ne(ut,Je){if(!(ut instanceof IDBDatabase)||Je in ut||"string"!=typeof Je)return;if(ce.get(Je))return ce.get(Je);const xt=Je.replace(/FromIndex$/,""),nn=Je!==xt,ne=et.includes(xt);if(!(xt in(nn?IDBIndex:IDBObjectStore).prototype)||!ne&&!Ye.includes(xt))return;const ye=function(){var Ie=(0,_.A)(function*(pt,...Xe){const Kt=this.transaction(pt,ne?"readwrite":"readonly");let Ut=Kt.store;return nn&&(Ut=Ut.index(Xe.shift())),(yield Promise.all([Ut[xt](...Xe),ne&&Kt.done]))[0]});return function(Xe){return Ie.apply(this,arguments)}}();return ce.set(Je,ye),ye}!function st(ut){yt=ut(yt)}(ut=>({...ut,get:(Je,xt,nn)=>Ne(Je,xt)||ut.get(Je,xt,nn),has:(Je,xt)=>!!Ne(Je,xt)||ut.has(Je,xt)}));class We{constructor(Je){this.container=Je}getPlatformInfoString(){return this.container.getProviders().map(xt=>{if(function pn(ut){const Je=ut.getComponent();return"VERSION"===Je?.type}(xt)){const nn=xt.getImmediate();return`${nn.library}/${nn.version}`}return null}).filter(xt=>xt).join(" ")}}const bn="@firebase/app",Fn="0.10.10",xn=new M.Vy("@firebase/app"),ir="[DEFAULT]",wn={[bn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Pn=new Map,Vr=new Map,zr=new Map;function Wr(ut,Je){try{ut.container.addComponent(Je)}catch(xt){xn.debug(`Component ${Je.name} failed to register with FirebaseApp ${ut.name}`,xt)}}function Gi(ut,Je){ut.container.addOrOverwriteComponent(Je)}function Or(ut){const Je=ut.name;if(zr.has(Je))return xn.debug(`There were multiple attempts to register component ${Je}.`),!1;zr.set(Je,ut);for(const xt of Pn.values())Wr(xt,ut);for(const xt of Vr.values())Wr(xt,ut);return!0}function xi(ut,Je){const xt=ut.container.getProvider("heartbeat").getImmediate({optional:!0});return xt&&xt.triggerHeartbeat(),ut.container.getProvider(Je)}function On(ut,Je,xt=ir){xi(ut,Je).clearInstance(xt)}function Di(ut){return void 0!==ut.options}function Ht(ut){return void 0!==ut.settings}function Vn(){zr.clear()}const qt=new w.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Xt{constructor(Je,xt,nn){this._isDeleted=!1,this._options=Object.assign({},Je),this._config=Object.assign({},xt),this._name=xt.name,this._automaticDataCollectionEnabled=xt.automaticDataCollectionEnabled,this._container=nn,this.container.addComponent(new V.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Je){this.checkDestroyed(),this._automaticDataCollectionEnabled=Je}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Je){this._isDeleted=Je}checkDestroyed(){if(this.isDeleted)throw qt.create("app-deleted",{appName:this._name})}}class Kr extends Xt{constructor(Je,xt,nn,ne){const ye=void 0!==xt.automaticDataCollectionEnabled&&xt.automaticDataCollectionEnabled,Ie={name:nn,automaticDataCollectionEnabled:ye};super(void 0!==Je.apiKey?Je:Je.options,Ie,ne),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ye},xt),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,xt.releaseOnDeref=void 0,ge(bn,Fn,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Je){this.isDeleted||(this._refCount++,void 0!==Je&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Je,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ke(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw qt.create("server-app-deleted")}}const Ln="10.13.1";function Yr(ut,Je={}){let xt=ut;"object"!=typeof Je&&(Je={name:Je});const nn=Object.assign({name:ir,automaticDataCollectionEnabled:!1},Je),ne=nn.name;if("string"!=typeof ne||!ne)throw qt.create("bad-app-name",{appName:String(ne)});if(xt||(xt=(0,w.T9)()),!xt)throw qt.create("no-options");const ye=Pn.get(ne);if(ye){if((0,w.bD)(xt,ye.options)&&(0,w.bD)(nn,ye.config))return ye;throw qt.create("duplicate-app",{appName:ne})}const Ie=new V.h1(ne);for(const Xe of zr.values())Ie.addComponent(Xe);const pt=new Xt(xt,nn,Ie);return Pn.set(ne,pt),pt}function xe(ut,Je){if((0,w.Bd)()&&!(0,w.p7)())throw qt.create("invalid-server-app-environment");let xt;void 0===Je.automaticDataCollectionEnabled&&(Je.automaticDataCollectionEnabled=!1),xt=Di(ut)?ut.options:ut;const nn=Object.assign(Object.assign({},Je),xt);if(void 0!==nn.releaseOnDeref&&delete nn.releaseOnDeref,void 0!==Je.releaseOnDeref&&typeof FinalizationRegistry>"u")throw qt.create("finalization-registry-not-supported",{});const ye=""+(Kt=JSON.stringify(nn),[...Kt].reduce((Ut,$n)=>Math.imul(31,Ut)+$n.charCodeAt(0)|0,0)),Ie=Vr.get(ye);var Kt;if(Ie)return Ie.incRefCount(Je.releaseOnDeref),Ie;const pt=new V.h1(ye);for(const Kt of zr.values())pt.addComponent(Kt);const Xe=new Kr(xt,Je,ye,pt);return Vr.set(ye,Xe),Xe}function we(ut=ir){const Je=Pn.get(ut);if(!Je&&ut===ir&&(0,w.T9)())return Yr();if(!Je)throw qt.create("no-app",{appName:ut});return Je}function Ce(){return Array.from(Pn.values())}function Ke(ut){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,_.A)(function*(ut){let Je=!1;const xt=ut.name;Pn.has(xt)?(Je=!0,Pn.delete(xt)):Vr.has(xt)&&ut.decRefCount()<=0&&(Vr.delete(xt),Je=!0),Je&&(yield Promise.all(ut.container.getProviders().map(nn=>nn.delete())),ut.isDeleted=!0)})).apply(this,arguments)}function ge(ut,Je,xt){var nn;let ne=null!==(nn=wn[ut])&&void 0!==nn?nn:ut;xt&&(ne+=`-${xt}`);const ye=ne.match(/\s|\//),Ie=Je.match(/\s|\//);if(ye||Ie){const pt=[`Unable to register library "${ne}" with version "${Je}":`];return ye&&pt.push(`library name "${ne}" contains illegal characters (whitespace or "/")`),ye&&Ie&&pt.push("and"),Ie&&pt.push(`version name "${Je}" contains illegal characters (whitespace or "/")`),void xn.warn(pt.join(" "))}Or(new V.uA(`${ne}-version`,()=>({library:ne,version:Je}),"VERSION"))}function q(ut,Je){if(null!==ut&&"function"!=typeof ut)throw qt.create("invalid-log-argument");(0,M.Ey)(ut,Je)}function J(ut){(0,M.He)(ut)}const ie="firebase-heartbeat-database",me=1,It="firebase-heartbeat-store";let Ft=null;function mn(){return Ft||(Ft=function ae(ut,Je,{blocked:xt,upgrade:nn,blocking:ne,terminated:ye}={}){const Ie=indexedDB.open(ut,Je),pt=ue(Ie);return nn&&Ie.addEventListener("upgradeneeded",Xe=>{nn(ue(Ie.result),Xe.oldVersion,Xe.newVersion,ue(Ie.transaction),Xe)}),xt&&Ie.addEventListener("blocked",Xe=>xt(Xe.oldVersion,Xe.newVersion,Xe)),pt.then(Xe=>{ye&&Xe.addEventListener("close",()=>ye()),ne&&Xe.addEventListener("versionchange",Kt=>ne(Kt.oldVersion,Kt.newVersion,Kt))}).catch(()=>{}),pt}(ie,me,{upgrade:(ut,Je)=>{if(0===Je)try{ut.createObjectStore(It)}catch(xt){console.warn(xt)}}}).catch(ut=>{throw qt.create("idb-open",{originalErrorMessage:ut.message})})),Ft}function Xn(){return(Xn=(0,_.A)(function*(ut){try{const xt=(yield mn()).transaction(It),nn=yield xt.objectStore(It).get(Me(ut));return yield xt.done,nn}catch(Je){if(Je instanceof w.g)xn.warn(Je.message);else{const xt=qt.create("idb-get",{originalErrorMessage:Je?.message});xn.warn(xt.message)}}})).apply(this,arguments)}function Tn(ut,Je){return $t.apply(this,arguments)}function $t(){return($t=(0,_.A)(function*(ut,Je){try{const nn=(yield mn()).transaction(It,"readwrite");yield nn.objectStore(It).put(Je,Me(ut)),yield nn.done}catch(xt){if(xt instanceof w.g)xn.warn(xt.message);else{const nn=qt.create("idb-set",{originalErrorMessage:xt?.message});xn.warn(nn.message)}}})).apply(this,arguments)}function Me(ut){return`${ut.name}!${ut.options.appId}`}class rs{constructor(Je){this.container=Je,this._heartbeatsCache=null;const xt=this.container.getProvider("app").getImmediate();this._storage=new fs(xt),this._heartbeatsCachePromise=this._storage.read().then(nn=>(this._heartbeatsCache=nn,nn))}triggerHeartbeat(){var Je=this;return(0,_.A)(function*(){var xt,nn;try{const ye=Je.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ie=ys();return null==(null===(xt=Je._heartbeatsCache)||void 0===xt?void 0:xt.heartbeats)&&(Je._heartbeatsCache=yield Je._heartbeatsCachePromise,null==(null===(nn=Je._heartbeatsCache)||void 0===nn?void 0:nn.heartbeats))||Je._heartbeatsCache.lastSentHeartbeatDate===Ie||Je._heartbeatsCache.heartbeats.some(pt=>pt.date===Ie)?void 0:(Je._heartbeatsCache.heartbeats.push({date:Ie,agent:ye}),Je._heartbeatsCache.heartbeats=Je._heartbeatsCache.heartbeats.filter(pt=>{const Xe=new Date(pt.date).valueOf();return Date.now()-Xe<=2592e6}),Je._storage.overwrite(Je._heartbeatsCache))}catch(ne){xn.warn(ne)}})()}getHeartbeatsHeader(){var Je=this;return(0,_.A)(function*(){var xt;try{if(null===Je._heartbeatsCache&&(yield Je._heartbeatsCachePromise),null==(null===(xt=Je._heartbeatsCache)||void 0===xt?void 0:xt.heartbeats)||0===Je._heartbeatsCache.heartbeats.length)return"";const nn=ys(),{heartbeatsToSend:ne,unsentEntries:ye}=function ar(ut,Je=1024){const xt=[];let nn=ut.slice();for(const ne of ut){const ye=xt.find(Ie=>Ie.agent===ne.agent);if(ye){if(ye.dates.push(ne.date),us(xt)>Je){ye.dates.pop();break}}else if(xt.push({agent:ne.agent,dates:[ne.date]}),us(xt)>Je){xt.pop();break}nn=nn.slice(1)}return{heartbeatsToSend:xt,unsentEntries:nn}}(Je._heartbeatsCache.heartbeats),Ie=(0,w.Uj)(JSON.stringify({version:2,heartbeats:ne}));return Je._heartbeatsCache.lastSentHeartbeatDate=nn,ye.length>0?(Je._heartbeatsCache.heartbeats=ye,yield Je._storage.overwrite(Je._heartbeatsCache)):(Je._heartbeatsCache.heartbeats=[],Je._storage.overwrite(Je._heartbeatsCache)),Ie}catch(nn){return xn.warn(nn),""}})()}}function ys(){return(new Date).toISOString().substring(0,10)}class fs{constructor(Je){this.app=Je,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.A)(function*(){return!!(0,w.zW)()&&(0,w.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Je=this;return(0,_.A)(function*(){if(yield Je._canUseIndexedDBPromise){const nn=yield function Wn(ut){return Xn.apply(this,arguments)}(Je.app);return nn?.heartbeats?nn:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Je){var xt=this;return(0,_.A)(function*(){var nn;if(yield xt._canUseIndexedDBPromise){const ye=yield xt.read();return Tn(xt.app,{lastSentHeartbeatDate:null!==(nn=Je.lastSentHeartbeatDate)&&void 0!==nn?nn:ye.lastSentHeartbeatDate,heartbeats:Je.heartbeats})}})()}add(Je){var xt=this;return(0,_.A)(function*(){var nn;if(yield xt._canUseIndexedDBPromise){const ye=yield xt.read();return Tn(xt.app,{lastSentHeartbeatDate:null!==(nn=Je.lastSentHeartbeatDate)&&void 0!==nn?nn:ye.lastSentHeartbeatDate,heartbeats:[...ye.heartbeats,...Je.heartbeats]})}})()}}function us(ut){return(0,w.Uj)(JSON.stringify({version:2,heartbeats:ut})).length}!function Ki(ut){Or(new V.uA("platform-logger",Je=>new We(Je),"PRIVATE")),Or(new V.uA("heartbeat",Je=>new rs(Je),"PRIVATE")),ge(bn,Fn,ut),ge(bn,Fn,"esm2017"),ge("fire-js","")}("")},1362:(Zt,qe,x)=>{x.d(qe,{h1:()=>Le,uA:()=>M});var _=x(467),V=x(1076);class M{constructor(ve,_e,He){this.name=ve,this.instanceFactory=_e,this.type=He,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ve){return this.instantiationMode=ve,this}setMultipleInstances(ve){return this.multipleInstances=ve,this}setServiceProps(ve){return this.serviceProps=ve,this}setInstanceCreatedCallback(ve){return this.onInstanceCreated=ve,this}}const w="[DEFAULT]";class se{constructor(ve,_e){this.name=ve,this.container=_e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ve){const _e=this.normalizeInstanceIdentifier(ve);if(!this.instancesDeferred.has(_e)){const He=new V.cY;if(this.instancesDeferred.set(_e,He),this.isInitialized(_e)||this.shouldAutoInitialize())try{const Tt=this.getOrInitializeService({instanceIdentifier:_e});Tt&&He.resolve(Tt)}catch{}}return this.instancesDeferred.get(_e).promise}getImmediate(ve){var _e;const He=this.normalizeInstanceIdentifier(ve?.identifier),Tt=null!==(_e=ve?.optional)&&void 0!==_e&&_e;if(!this.isInitialized(He)&&!this.shouldAutoInitialize()){if(Tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:He})}catch(De){if(Tt)return null;throw De}}getComponent(){return this.component}setComponent(ve){if(ve.name!==this.name)throw Error(`Mismatching Component ${ve.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ve,this.shouldAutoInitialize()){if(function B($e){return"EAGER"===$e.instantiationMode}(ve))try{this.getOrInitializeService({instanceIdentifier:w})}catch{}for(const[_e,He]of this.instancesDeferred.entries()){const Tt=this.normalizeInstanceIdentifier(_e);try{const De=this.getOrInitializeService({instanceIdentifier:Tt});He.resolve(De)}catch{}}}}clearInstance(ve=w){this.instancesDeferred.delete(ve),this.instancesOptions.delete(ve),this.instances.delete(ve)}delete(){var ve=this;return(0,_.A)(function*(){const _e=Array.from(ve.instances.values());yield Promise.all([..._e.filter(He=>"INTERNAL"in He).map(He=>He.INTERNAL.delete()),..._e.filter(He=>"_delete"in He).map(He=>He._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ve=w){return this.instances.has(ve)}getOptions(ve=w){return this.instancesOptions.get(ve)||{}}initialize(ve={}){const{options:_e={}}=ve,He=this.normalizeInstanceIdentifier(ve.instanceIdentifier);if(this.isInitialized(He))throw Error(`${this.name}(${He}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Tt=this.getOrInitializeService({instanceIdentifier:He,options:_e});for(const[De,Be]of this.instancesDeferred.entries())He===this.normalizeInstanceIdentifier(De)&&Be.resolve(Tt);return Tt}onInit(ve,_e){var He;const Tt=this.normalizeInstanceIdentifier(_e),De=null!==(He=this.onInitCallbacks.get(Tt))&&void 0!==He?He:new Set;De.add(ve),this.onInitCallbacks.set(Tt,De);const Be=this.instances.get(Tt);return Be&&ve(Be,Tt),()=>{De.delete(ve)}}invokeOnInitCallbacks(ve,_e){const He=this.onInitCallbacks.get(_e);if(He)for(const Tt of He)try{Tt(ve,_e)}catch{}}getOrInitializeService({instanceIdentifier:ve,options:_e={}}){let He=this.instances.get(ve);if(!He&&this.component&&(He=this.component.instanceFactory(this.container,{instanceIdentifier:($e=ve,$e===w?void 0:$e),options:_e}),this.instances.set(ve,He),this.instancesOptions.set(ve,_e),this.invokeOnInitCallbacks(He,ve),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ve,He)}catch{}var $e;return He||null}normalizeInstanceIdentifier(ve=w){return this.component?this.component.multipleInstances?ve:w:ve}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Le{constructor(ve){this.name=ve,this.providers=new Map}addComponent(ve){const _e=this.getProvider(ve.name);if(_e.isComponentSet())throw new Error(`Component ${ve.name} has already been registered with ${this.name}`);_e.setComponent(ve)}addOrOverwriteComponent(ve){this.getProvider(ve.name).isComponentSet()&&this.providers.delete(ve.name),this.addComponent(ve)}getProvider(ve){if(this.providers.has(ve))return this.providers.get(ve);const _e=new se(ve,this);return this.providers.set(ve,_e),_e}getProviders(){return Array.from(this.providers.values())}}},8041:(Zt,qe,x)=>{x.d(qe,{$b:()=>V,Ey:()=>$e,He:()=>Le,Vy:()=>B});const _=[];var V=function(ve){return ve[ve.DEBUG=0]="DEBUG",ve[ve.VERBOSE=1]="VERBOSE",ve[ve.INFO=2]="INFO",ve[ve.WARN=3]="WARN",ve[ve.ERROR=4]="ERROR",ve[ve.SILENT=5]="SILENT",ve}(V||{});const M={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},w=V.INFO,se={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},Pe=(ve,_e,...He)=>{if(_e<ve.logLevel)return;const Tt=(new Date).toISOString(),De=se[_e];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${_e})`);console[De](`[${Tt}]  ${ve.name}:`,...He)};class B{constructor(_e){this.name=_e,this._logLevel=w,this._logHandler=Pe,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(_e){if(!(_e in V))throw new TypeError(`Invalid value "${_e}" assigned to \`logLevel\``);this._logLevel=_e}setLogLevel(_e){this._logLevel="string"==typeof _e?M[_e]:_e}get logHandler(){return this._logHandler}set logHandler(_e){if("function"!=typeof _e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=_e}get userLogHandler(){return this._userLogHandler}set userLogHandler(_e){this._userLogHandler=_e}debug(..._e){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,..._e),this._logHandler(this,V.DEBUG,..._e)}log(..._e){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,..._e),this._logHandler(this,V.VERBOSE,..._e)}info(..._e){this._userLogHandler&&this._userLogHandler(this,V.INFO,..._e),this._logHandler(this,V.INFO,..._e)}warn(..._e){this._userLogHandler&&this._userLogHandler(this,V.WARN,..._e),this._logHandler(this,V.WARN,..._e)}error(..._e){this._userLogHandler&&this._userLogHandler(this,V.ERROR,..._e),this._logHandler(this,V.ERROR,..._e)}}function Le(ve){_.forEach(_e=>{_e.setLogLevel(ve)})}function $e(ve,_e){for(const He of _){let Tt=null;_e&&_e.level&&(Tt=M[_e.level]),He.userLogHandler=null===ve?null:(De,Be,...At)=>{const yt=At.map(st=>{if(null==st)return null;if("string"==typeof st)return st;if("number"==typeof st||"boolean"==typeof st)return st.toString();if(st instanceof Error)return st.message;try{return JSON.stringify(st)}catch{return null}}).filter(st=>st).join(" ");Be>=(Tt??De.logLevel)&&ve({level:V[Be].toLowerCase(),message:yt,args:At,type:De.name})}}}},7231:(Zt,qe,x)=>{x.d(qe,{HF:()=>_.X});var _=x(576);x(7852),x(1076),x(8041),x(1362)},7935:(Zt,qe,x)=>{x.d(qe,{A:()=>_.A});var _=x(3345);_.A.registerVersion("firebase","10.13.1","app-compat")},2438:(Zt,qe,x)=>{var _=x(467),V=x(3345),M=x(576),w=x(1076),B=(x(7852),x(8041),x(1362));function Le(){return window}function _e(){return _e=(0,_.A)(function*(q,J,ie){var me;const{BuildInfo:It}=Le();(0,M.au)(J.sessionId,"AuthEvent did not contain a session ID");const Ft=yield function st(q){return bt.apply(this,arguments)}(J.sessionId),mn={};return(0,M.av)()?mn.ibi=It.packageName:(0,M.aw)()?mn.apn=It.packageName:(0,M.ax)(q,"operation-not-supported-in-this-environment"),It.displayName&&(mn.appDisplayName=It.displayName),mn.sessionId=Ft,(0,M.ay)(q,ie,J.type,void 0,null!==(me=J.eventId)&&void 0!==me?me:void 0,mn)}),_e.apply(this,arguments)}function Tt(){return(Tt=(0,_.A)(function*(q){const{BuildInfo:J}=Le(),ie={};(0,M.av)()?ie.iosBundleId=J.packageName:(0,M.aw)()?ie.androidPackageName=J.packageName:(0,M.ax)(q,"operation-not-supported-in-this-environment"),yield(0,M.az)(q,ie)})).apply(this,arguments)}function At(){return(At=(0,_.A)(function*(q,J,ie){const{cordova:me}=Le();let It=()=>{};try{yield new Promise((Ft,mn)=>{let Wn=null;function Xn(){var Me;Ft();const Lr=null===(Me=me.plugins.browsertab)||void 0===Me?void 0:Me.close;"function"==typeof Lr&&Lr(),"function"==typeof ie?.close&&ie.close()}function Tn(){Wn||(Wn=window.setTimeout(()=>{mn((0,M.aB)(q,"redirect-cancelled-by-user"))},2e3))}function $t(){"visible"===document?.visibilityState&&Tn()}J.addPassiveListener(Xn),document.addEventListener("resume",Tn,!1),(0,M.aw)()&&document.addEventListener("visibilitychange",$t,!1),It=()=>{J.removePassiveListener(Xn),document.removeEventListener("resume",Tn,!1),document.removeEventListener("visibilitychange",$t,!1),Wn&&window.clearTimeout(Wn)}})}finally{It()}})).apply(this,arguments)}function bt(){return(bt=(0,_.A)(function*(q){const J=function gt(q){if((0,M.au)(/[0-9a-zA-Z]+/.test(q),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(q);const J=new ArrayBuffer(q.length),ie=new Uint8Array(J);for(let me=0;me<q.length;me++)ie[me]=q.charCodeAt(me);return ie}(q),ie=yield crypto.subtle.digest("SHA-256",J);return Array.from(new Uint8Array(ie)).map(It=>It.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class de extends M.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(J=>{this.resolveInitialized=J})}addPassiveListener(J){this.passiveListeners.add(J)}removePassiveListener(J){this.passiveListeners.delete(J)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(J){return this.resolveInitialized(),this.passiveListeners.forEach(ie=>ie(J)),super.onEvent(J)}initialized(){var J=this;return(0,_.A)(function*(){yield J.initPromise})()}}function Ye(q){return et.apply(this,arguments)}function et(){return(et=(0,_.A)(function*(q){const J=yield We()._get(pn(q));return J&&(yield We()._remove(pn(q))),J})).apply(this,arguments)}function Ne(){const q=[];for(let ie=0;ie<20;ie++){const me=Math.floor(62*Math.random());q.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(me))}return q.join("")}function We(){return(0,M.aE)(M.b)}function pn(q){return(0,M.aF)("authEvent",q.config.apiKey,q.name)}function xn(q){if(!q?.includes("?"))return{};const[J,...ie]=q.split("?");return(0,w.I9)(ie.join("?"))}const ke=class An{constructor(){this._redirectPersistence=M.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=M.aG,this._overrideRedirectResult=M.aH}_initialize(J){var ie=this;return(0,_.A)(function*(){const me=J._key();let It=ie.eventManagers.get(me);return It||(It=new de(J),ie.eventManagers.set(me,It),ie.attachCallbackListeners(J,It)),It})()}_openPopup(J){(0,M.ax)(J,"operation-not-supported-in-this-environment")}_openRedirect(J,ie,me,It){var Ft=this;return(0,_.A)(function*(){!function yt(q){var J,ie,me,It,Ft,mn,Wn,Xn,Tn,$t;const Me=Le();(0,M.aC)("function"==typeof(null===(J=Me?.universalLinks)||void 0===J?void 0:J.subscribe),q,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,M.aC)(typeof(null===(ie=Me?.BuildInfo)||void 0===ie?void 0:ie.packageName)<"u",q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,M.aC)("function"==typeof(null===(Ft=null===(It=null===(me=Me?.cordova)||void 0===me?void 0:me.plugins)||void 0===It?void 0:It.browsertab)||void 0===Ft?void 0:Ft.openUrl),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aC)("function"==typeof(null===(Xn=null===(Wn=null===(mn=Me?.cordova)||void 0===mn?void 0:mn.plugins)||void 0===Wn?void 0:Wn.browsertab)||void 0===Xn?void 0:Xn.isAvailable),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aC)("function"==typeof(null===($t=null===(Tn=Me?.cordova)||void 0===Tn?void 0:Tn.InAppBrowser)||void 0===$t?void 0:$t.open),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(J);const mn=yield Ft._initialize(J);yield mn.initialized(),mn.resetRedirect(),(0,M.aI)(),yield Ft._originValidation(J);const Wn=function ae(q,J,ie=null){return{type:J,eventId:ie,urlResponse:null,sessionId:Ne(),postBody:null,tenantId:q.tenantId,error:(0,M.aB)(q,"no-auth-event")}}(J,me,It);yield function Ve(q,J){return We()._set(pn(q),J)}(J,Wn);const Xn=yield function ve(q,J,ie){return _e.apply(this,arguments)}(J,Wn,ie),Tn=yield function De(q){const{cordova:J}=Le();return new Promise(ie=>{J.plugins.browsertab.isAvailable(me=>{let It=null;me?J.plugins.browsertab.openUrl(q):It=J.InAppBrowser.open(q,(0,M.aA)()?"_blank":"_system","location=yes"),ie(It)})})}(Xn);return function Be(q,J,ie){return At.apply(this,arguments)}(J,mn,Tn)})()}_isIframeWebStorageSupported(J,ie){throw new Error("Method not implemented.")}_originValidation(J){const ie=J._key();return this.originValidationPromises[ie]||(this.originValidationPromises[ie]=function He(q){return Tt.apply(this,arguments)}(J)),this.originValidationPromises[ie]}attachCallbackListeners(J,ie){const{universalLinks:me,handleOpenURL:It,BuildInfo:Ft}=Le(),mn=setTimeout((0,_.A)(function*(){yield Ye(J),ie.onEvent(Qe())}),500),Wn=function(){var $t=(0,_.A)(function*(Me){clearTimeout(mn);const Lr=yield Ye(J);let Jr=null;Lr&&Me?.url&&(Jr=function ce(q,J){var ie,me;const It=function Fn(q){const J=xn(q),ie=J.link?decodeURIComponent(J.link):void 0,me=xn(ie).link,It=J.deep_link_id?decodeURIComponent(J.deep_link_id):void 0;return xn(It).link||It||me||ie||q}(J);if(It.includes("/__/auth/callback")){const Ft=xn(It),mn=Ft.firebaseError?function bn(q){try{return JSON.parse(q)}catch{return null}}(decodeURIComponent(Ft.firebaseError)):null,Wn=null===(me=null===(ie=mn?.code)||void 0===ie?void 0:ie.split("auth/"))||void 0===me?void 0:me[1],Xn=Wn?(0,M.aB)(Wn):null;return Xn?{type:q.type,eventId:q.eventId,tenantId:q.tenantId,error:Xn,urlResponse:null,sessionId:null,postBody:null}:{type:q.type,eventId:q.eventId,tenantId:q.tenantId,sessionId:q.sessionId,urlResponse:It,postBody:null}}return null}(Lr,Me.url)),ie.onEvent(Jr||Qe())});return function(Lr){return $t.apply(this,arguments)}}();typeof me<"u"&&"function"==typeof me.subscribe&&me.subscribe(null,Wn);const Xn=It,Tn=`${Ft.packageName.toLowerCase()}://`;Le().handleOpenURL=function(){var $t=(0,_.A)(function*(Me){if(Me.toLowerCase().startsWith(Tn)&&Wn({url:Me}),"function"==typeof Xn)try{Xn(Me)}catch(Lr){console.error(Lr)}});return function(Me){return $t.apply(this,arguments)}}()}};function Qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,M.aB)("no-auth-event")}}function Gt(){var q;return(null===(q=self?.location)||void 0===q?void 0:q.protocol)||null}function Jt(q=(0,w.ZQ)()){return!("file:"!==Gt()&&"ionic:"!==Gt()&&"capacitor:"!==Gt()||!q.toLowerCase().match(/iphone|ipad|ipod|android/))}function it(){try{const q=self.localStorage,J=M.aN();if(q)return q.setItem(J,"1"),q.removeItem(J),!function jn(q=(0,w.ZQ)()){return function vn(){return(0,w.lT)()&&11===document?.documentMode}()||function En(q=(0,w.ZQ)()){return/Edge\/\d+/.test(q)}(q)}()||(0,w.zW)()}catch{return yn()&&(0,w.zW)()}return!1}function yn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qn(){return(function un(){return"http:"===Gt()||"https:"===Gt()}()||(0,w.sr)()||Jt())&&!function en(){return(0,w.lV)()||(0,w.Ll)()}()&&it()&&!yn()}function or(){return Jt()&&typeof document<"u"}function mt(){return(mt=(0,_.A)(function*(){return!!or()&&new Promise(q=>{const J=setTimeout(()=>{q(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(J),q(!0)})})})).apply(this,arguments)}const Ot={LOCAL:"local",NONE:"none",SESSION:"session"},nt=M.aC,Mt="persistence";function ir(q){return wn.apply(this,arguments)}function wn(){return(wn=(0,_.A)(function*(q){yield q._initializationPromise;const J=Vr(),ie=M.aF(Mt,q.config.apiKey,q.name);J&&J.setItem(ie,q._getPersistence())})).apply(this,arguments)}function Vr(){var q;try{return(null===(q=function ni(){return typeof window<"u"?window:null}())||void 0===q?void 0:q.sessionStorage)||null}catch{return null}}const zr=M.aC;class Wr{constructor(){this.browserResolver=M.aE(M.k),this.cordovaResolver=M.aE(ke),this.underlyingResolver=null,this._redirectPersistence=M.a,this._completeRedirectFn=M.aG,this._overrideRedirectResult=M.aH}_initialize(J){var ie=this;return(0,_.A)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._initialize(J)})()}_openPopup(J,ie,me,It){var Ft=this;return(0,_.A)(function*(){return yield Ft.selectUnderlyingResolver(),Ft.assertedUnderlyingResolver._openPopup(J,ie,me,It)})()}_openRedirect(J,ie,me,It){var Ft=this;return(0,_.A)(function*(){return yield Ft.selectUnderlyingResolver(),Ft.assertedUnderlyingResolver._openRedirect(J,ie,me,It)})()}_isIframeWebStorageSupported(J,ie){this.assertedUnderlyingResolver._isIframeWebStorageSupported(J,ie)}_originValidation(J){return this.assertedUnderlyingResolver._originValidation(J)}get _shouldInitProactively(){return or()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var J=this;return(0,_.A)(function*(){if(J.underlyingResolver)return;const ie=yield function St(){return mt.apply(this,arguments)}();J.underlyingResolver=ie?J.cordovaResolver:J.browserResolver})()}}function Gi(q){return q.unwrap()}function xi(q){return Di(q)}function Di(q){const{_tokenResponse:J}=q instanceof w.g?q.customData:q;if(!J)return null;if(!(q instanceof w.g)&&"temporaryProof"in J&&"phoneNumber"in J)return M.P.credentialFromResult(q);const ie=J.providerId;if(!ie||ie===M.p.PASSWORD)return null;let me;switch(ie){case M.p.GOOGLE:me=M.X;break;case M.p.FACEBOOK:me=M.W;break;case M.p.GITHUB:me=M.Y;break;case M.p.TWITTER:me=M.$;break;default:const{oauthIdToken:It,oauthAccessToken:Ft,oauthTokenSecret:mn,pendingToken:Wn,nonce:Xn}=J;return Ft||mn||It||Wn?Wn?ie.startsWith("saml.")?M.aQ._create(ie,Wn):M.N._fromParams({providerId:ie,signInMethod:ie,pendingToken:Wn,idToken:It,accessToken:Ft}):new M.Z(ie).credential({idToken:It,accessToken:Ft,rawNonce:Xn}):null}return q instanceof w.g?me.credentialFromError(q):me.credentialFromResult(q)}function Ht(q,J){return J.catch(ie=>{throw ie instanceof w.g&&function On(q,J){var ie;const me=null===(ie=J.customData)||void 0===ie?void 0:ie._tokenResponse;if("auth/multi-factor-auth-required"===J?.code)J.resolver=new qt(q,M.as(q,J));else if(me){const It=Di(J),Ft=J;It&&(Ft.credential=It,Ft.tenantId=me.tenantId||void 0,Ft.email=me.email||void 0,Ft.phoneNumber=me.phoneNumber||void 0)}}(q,ie),ie}).then(ie=>{const It=ie.user;return{operationType:ie.operationType,credential:xi(ie),additionalUserInfo:M.aq(ie),user:Xt.getOrCreate(It)}})}function Vn(q,J){return _r.apply(this,arguments)}function _r(){return(_r=(0,_.A)(function*(q,J){const ie=yield J;return{verificationId:ie.verificationId,confirm:me=>Ht(q,ie.confirm(me))}})).apply(this,arguments)}class qt{constructor(J,ie){this.resolver=ie,this.auth=function Or(q){return q.wrapped()}(J)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(J){return Ht(Gi(this.auth),this.resolver.resolveSignIn(J))}}class Xt{constructor(J){this._delegate=J,this.multiFactor=M.at(J)}static getOrCreate(J){return Xt.USER_MAP.has(J)||Xt.USER_MAP.set(J,new Xt(J)),Xt.USER_MAP.get(J)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(J){return this._delegate.getIdTokenResult(J)}getIdToken(J){return this._delegate.getIdToken(J)}linkAndRetrieveDataWithCredential(J){return this.linkWithCredential(J)}linkWithCredential(J){var ie=this;return(0,_.A)(function*(){return Ht(ie.auth,M.a2(ie._delegate,J))})()}linkWithPhoneNumber(J,ie){var me=this;return(0,_.A)(function*(){return Vn(me.auth,M.l(me._delegate,J,ie))})()}linkWithPopup(J){var ie=this;return(0,_.A)(function*(){return Ht(ie.auth,M.d(ie._delegate,J,Wr))})()}linkWithRedirect(J){var ie=this;return(0,_.A)(function*(){return yield ir(M.aJ(ie.auth)),M.g(ie._delegate,J,Wr)})()}reauthenticateAndRetrieveDataWithCredential(J){return this.reauthenticateWithCredential(J)}reauthenticateWithCredential(J){var ie=this;return(0,_.A)(function*(){return Ht(ie.auth,M.a3(ie._delegate,J))})()}reauthenticateWithPhoneNumber(J,ie){return Vn(this.auth,M.r(this._delegate,J,ie))}reauthenticateWithPopup(J){return Ht(this.auth,M.e(this._delegate,J,Wr))}reauthenticateWithRedirect(J){var ie=this;return(0,_.A)(function*(){return yield ir(M.aJ(ie.auth)),M.h(ie._delegate,J,Wr)})()}sendEmailVerification(J){return M.ag(this._delegate,J)}unlink(J){var ie=this;return(0,_.A)(function*(){return yield M.ap(ie._delegate,J),ie})()}updateEmail(J){return M.al(this._delegate,J)}updatePassword(J){return M.am(this._delegate,J)}updatePhoneNumber(J){return M.u(this._delegate,J)}updateProfile(J){return M.ak(this._delegate,J)}verifyBeforeUpdateEmail(J,ie){return M.ah(this._delegate,J,ie)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Xt.USER_MAP=new WeakMap;const Kr=M.aC;let Ln=(()=>{class q{constructor(ie,me){if(this.app=ie,me.isInitialized())return this._delegate=me.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:It}=ie.options;Kr(It,"invalid-api-key",{appName:ie.name}),Kr(It,"invalid-api-key",{appName:ie.name});const Ft=typeof window<"u"?Wr:void 0;this._delegate=me.initialize({options:{persistence:xe(It,ie.name),popupRedirectResolver:Ft}}),this._delegate._updateErrorMap(M.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Xt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(ie){this._delegate.languageCode=ie}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(ie){this._delegate.tenantId=ie}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(ie,me){M.K(this._delegate,ie,me)}applyActionCode(ie){return M.a7(this._delegate,ie)}checkActionCode(ie){return M.a8(this._delegate,ie)}confirmPasswordReset(ie,me){return M.a6(this._delegate,ie,me)}createUserWithEmailAndPassword(ie,me){var It=this;return(0,_.A)(function*(){return Ht(It._delegate,M.aa(It._delegate,ie,me))})()}fetchProvidersForEmail(ie){return this.fetchSignInMethodsForEmail(ie)}fetchSignInMethodsForEmail(ie){return M.af(this._delegate,ie)}isSignInWithEmailLink(ie){return M.ad(this._delegate,ie)}getRedirectResult(){var ie=this;return(0,_.A)(function*(){Kr(Qn(),ie._delegate,"operation-not-supported-in-this-environment");const me=yield M.j(ie._delegate,Wr);return me?Ht(ie._delegate,Promise.resolve(me)):{credential:null,user:null}})()}addFrameworkForLogging(ie){!function ct(q,J){(0,M.aJ)(q)._logFramework(J)}(this._delegate,ie)}onAuthStateChanged(ie,me,It){const{next:Ft,error:mn,complete:Wn}=Yr(ie,me,It);return this._delegate.onAuthStateChanged(Ft,mn,Wn)}onIdTokenChanged(ie,me,It){const{next:Ft,error:mn,complete:Wn}=Yr(ie,me,It);return this._delegate.onIdTokenChanged(Ft,mn,Wn)}sendSignInLinkToEmail(ie,me){return M.ac(this._delegate,ie,me)}sendPasswordResetEmail(ie,me){return M.a5(this._delegate,ie,me||void 0)}setPersistence(ie){var me=this;return(0,_.A)(function*(){let It;switch(function er(q,J){nt(Object.values(Ot).includes(J),q,"invalid-persistence-type"),(0,w.lV)()?nt(J!==Ot.SESSION,q,"unsupported-persistence-type"):(0,w.Ll)()?nt(J===Ot.NONE,q,"unsupported-persistence-type"):yn()?nt(J===Ot.NONE||J===Ot.LOCAL&&(0,w.zW)(),q,"unsupported-persistence-type"):nt(J===Ot.NONE||it(),q,"unsupported-persistence-type")}(me._delegate,ie),ie){case Ot.SESSION:It=M.a;break;case Ot.LOCAL:It=(yield M.aE(M.i)._isAvailable())?M.i:M.b;break;case Ot.NONE:It=M.U;break;default:return M.ax("argument-error",{appName:me._delegate.name})}return me._delegate.setPersistence(It)})()}signInAndRetrieveDataWithCredential(ie){return this.signInWithCredential(ie)}signInAnonymously(){return Ht(this._delegate,M.a0(this._delegate))}signInWithCredential(ie){return Ht(this._delegate,M.a1(this._delegate,ie))}signInWithCustomToken(ie){return Ht(this._delegate,M.a4(this._delegate,ie))}signInWithEmailAndPassword(ie,me){return Ht(this._delegate,M.ab(this._delegate,ie,me))}signInWithEmailLink(ie,me){return Ht(this._delegate,M.ae(this._delegate,ie,me))}signInWithPhoneNumber(ie,me){return Vn(this._delegate,M.s(this._delegate,ie,me))}signInWithPopup(ie){var me=this;return(0,_.A)(function*(){return Kr(Qn(),me._delegate,"operation-not-supported-in-this-environment"),Ht(me._delegate,M.c(me._delegate,ie,Wr))})()}signInWithRedirect(ie){var me=this;return(0,_.A)(function*(){return Kr(Qn(),me._delegate,"operation-not-supported-in-this-environment"),yield ir(me._delegate),M.f(me._delegate,ie,Wr)})()}updateCurrentUser(ie){return this._delegate.updateCurrentUser(ie)}verifyPasswordResetCode(ie){return M.a9(this._delegate,ie)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return q.Persistence=Ot,q})();function Yr(q,J,ie){let me=q;"function"!=typeof q&&({next:me,error:J,complete:ie}=q);const It=me;return{next:mn=>It(mn&&Xt.getOrCreate(mn)),error:J,complete:ie}}function xe(q,J){const ie=function Pn(q,J){const ie=Vr();if(!ie)return[];const me=M.aF(Mt,q,J);switch(ie.getItem(me)){case Ot.NONE:return[M.U];case Ot.LOCAL:return[M.i,M.a];case Ot.SESSION:return[M.a];default:return[]}}(q,J);if(typeof self<"u"&&!ie.includes(M.i)&&ie.push(M.i),typeof window<"u")for(const me of[M.b,M.a])ie.includes(me)||ie.push(me);return ie.includes(M.U)||ie.push(M.U),ie}class we{constructor(){this.providerId="phone",this._delegate=new M.P(Gi(V.A.auth()))}static credential(J,ie){return M.P.credential(J,ie)}verifyPhoneNumber(J,ie){return this._delegate.verifyPhoneNumber(J,ie)}unwrap(){return this._delegate}}we.PHONE_SIGN_IN_METHOD=M.P.PHONE_SIGN_IN_METHOD,we.PROVIDER_ID=M.P.PROVIDER_ID;const Ce=M.aC;class Ke{constructor(J,ie,me=V.A.app()){var It;Ce(null===(It=me.options)||void 0===It?void 0:It.apiKey,"invalid-api-key",{appName:me.name}),this._delegate=new M.R(me.auth(),J,ie),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ge(q){q.INTERNAL.registerComponent(new B.uA("auth-compat",J=>{const ie=J.getProvider("app-compat").getImmediate(),me=J.getProvider("auth");return new Ln(ie,me)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:M.A.EMAIL_SIGNIN,PASSWORD_RESET:M.A.PASSWORD_RESET,RECOVER_EMAIL:M.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:M.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:M.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:M.A.VERIFY_EMAIL}},EmailAuthProvider:M.V,FacebookAuthProvider:M.W,GithubAuthProvider:M.Y,GoogleAuthProvider:M.X,OAuthProvider:M.Z,SAMLAuthProvider:M._,PhoneAuthProvider:we,PhoneMultiFactorGenerator:M.m,RecaptchaVerifier:Ke,TwitterAuthProvider:M.$,Auth:Ln,AuthCredential:M.L,Error:w.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),q.registerVersion("@firebase/auth-compat","0.5.13")}(V.A)},467:(Zt,qe,x)=>{function _(M,w,se,Pe,B,Le,$e){try{var ve=M[Le]($e),_e=ve.value}catch(He){return void se(He)}ve.done?w(_e):Promise.resolve(_e).then(Pe,B)}function V(M){return function(){var w=this,se=arguments;return new Promise(function(Pe,B){var Le=M.apply(w,se);function $e(_e){_(Le,Pe,B,$e,ve,"next",_e)}function ve(_e){_(Le,Pe,B,$e,ve,"throw",_e)}$e(void 0)})}}x.d(qe,{A:()=>V})},1635:(Zt,qe,x)=>{function w(ke,Qe){var ct={};for(var _t in ke)Object.prototype.hasOwnProperty.call(ke,_t)&&Qe.indexOf(_t)<0&&(ct[_t]=ke[_t]);if(null!=ke&&"function"==typeof Object.getOwnPropertySymbols){var vt=0;for(_t=Object.getOwnPropertySymbols(ke);vt<_t.length;vt++)Qe.indexOf(_t[vt])<0&&Object.prototype.propertyIsEnumerable.call(ke,_t[vt])&&(ct[_t[vt]]=ke[_t[vt]])}return ct}function He(ke,Qe,ct,_t){return new(ct||(ct=Promise))(function(Ze,Gt){function un(vn){try{en(_t.next(vn))}catch(En){Gt(En)}}function Jt(vn){try{en(_t.throw(vn))}catch(En){Gt(En)}}function en(vn){vn.done?Ze(vn.value):function vt(Ze){return Ze instanceof ct?Ze:new ct(function(Gt){Gt(Ze)})}(vn.value).then(un,Jt)}en((_t=_t.apply(ke,Qe||[])).next())})}function ue(ke){return this instanceof ue?(this.v=ke,this):new ue(ke)}function de(ke,Qe,ct){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var vt,_t=ct.apply(ke,Qe||[]),Ze=[];return vt=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),un("next"),un("throw"),un("return",function Gt(it){return function(yn){return Promise.resolve(yn).then(it,En)}}),vt[Symbol.asyncIterator]=function(){return this},vt;function un(it,yn){_t[it]&&(vt[it]=function(Qn){return new Promise(function(or,St){Ze.push([it,Qn,or,St])>1||Jt(it,Qn)})},yn&&(vt[it]=yn(vt[it])))}function Jt(it,yn){try{!function en(it){it.value instanceof ue?Promise.resolve(it.value.v).then(vn,En):jn(Ze[0][2],it)}(_t[it](yn))}catch(Qn){jn(Ze[0][3],Qn)}}function vn(it){Jt("next",it)}function En(it){Jt("throw",it)}function jn(it,yn){it(yn),Ze.shift(),Ze.length&&Jt(Ze[0][0],Ze[0][1])}}function Ve(ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ct,Qe=ke[Symbol.asyncIterator];return Qe?Qe.call(ke):(ke=function At(ke){var Qe="function"==typeof Symbol&&Symbol.iterator,ct=Qe&&ke[Qe],_t=0;if(ct)return ct.call(ke);if(ke&&"number"==typeof ke.length)return{next:function(){return ke&&_t>=ke.length&&(ke=void 0),{value:ke&&ke[_t++],done:!ke}}};throw new TypeError(Qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ke),ct={},_t("next"),_t("throw"),_t("return"),ct[Symbol.asyncIterator]=function(){return this},ct);function _t(Ze){ct[Ze]=ke[Ze]&&function(Gt){return new Promise(function(un,Jt){!function vt(Ze,Gt,un,Jt){Promise.resolve(Jt).then(function(en){Ze({value:en,done:un})},Gt)}(un,Jt,(Gt=ke[Ze](Gt)).done,Gt.value)})}}}x.d(qe,{AQ:()=>de,N3:()=>ue,Tt:()=>w,sH:()=>He,xN:()=>Ve}),"function"==typeof SuppressedError&&SuppressedError}},Zt=>{Zt(Zt.s=6462)}]);