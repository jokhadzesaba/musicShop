"use strict";(self.webpackChunkmusicshop=self.webpackChunkmusicshop||[]).push([[590],{1944:(Xt,$e,V)=>{V.d($e,{$:()=>ga,A:()=>ue,G:()=>Le,K:()=>ji,L:()=>$r,N:()=>Ei,P:()=>ir,R:()=>jt,U:()=>En,V:()=>xs,W:()=>Wo,X:()=>Ya,Y:()=>Vc,Z:()=>Ks,_:()=>pa,a:()=>ro,a0:()=>z,a1:()=>Ma,a2:()=>Qs,a3:()=>dr,a4:()=>ks,a5:()=>Xs,a6:()=>zo,a7:()=>Bc,a8:()=>Mn,a9:()=>hr,aA:()=>Bn,aB:()=>rt,aC:()=>Me,aD:()=>Ts,aE:()=>mt,aF:()=>Cn,aG:()=>rc,aH:()=>Vs,aI:()=>Ca,aJ:()=>pn,aN:()=>go,aQ:()=>js,aa:()=>mc,ab:()=>wo,ac:()=>Ko,ad:()=>vu,ae:()=>hs,af:()=>ar,ag:()=>eo,ah:()=>Lr,ak:()=>$c,al:()=>ti,am:()=>Gc,ap:()=>Qn,aq:()=>et,as:()=>To,at:()=>Eu,au:()=>bt,av:()=>rn,aw:()=>qe,ax:()=>Ze,ay:()=>sc,az:()=>Yu,b:()=>yl,c:()=>Wd,d:()=>Yh,e:()=>zu,f:()=>mr,g:()=>Ic,h:()=>Ec,i:()=>tc,j:()=>Cc,k:()=>hd,l:()=>La,m:()=>ac,o:()=>cc,p:()=>Be,r:()=>Do,s:()=>qi,u:()=>gp});var _=V(1528),J=V(7144),I=V(9360),O=V(5976),ge=V(1316),Ee=V(4920);const Be={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ue={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Le=function Oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},We=function Se(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ve=new J.UR("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ce=new O.YJ("@firebase/auth");function _t(T,...m){Ce.logLevel<=O.Ge.ERROR&&Ce.error(`Auth (${I.SDK_VERSION}): ${T}`,...m)}function Ze(T,...m){throw At(T,...m)}function rt(T,...m){return At(T,...m)}function me(T,m,v){const S=Object.assign(Object.assign({},We()),{[m]:v});return new J.UR("auth","Firebase",S).create(m,{appName:T.name})}function Ot(T,m,v){if(!(m instanceof v))throw v.name!==m.constructor.name&&Ze(T,"argument-error"),me(T,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function At(T,...m){if("string"!=typeof T){const v=m[0],S=[...m.slice(1)];return S[0]&&(S[0].appName=T.name),T._errorFactory.create(v,...S)}return Ve.create(T,...m)}function Me(T,m,...v){if(!T)throw At(m,...v)}function Ct(T){const m="INTERNAL ASSERTION FAILED: "+T;throw _t(m),new Error(m)}function bt(T,m){T||Ct(m)}function Ut(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function ke(){return"http:"===Rt()||"https:"===Rt()}function Rt(){var T;return typeof self<"u"&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class Kt{constructor(m,v){this.shortDelay=m,this.longDelay=v,bt(v>m,"Short delay should be less than long delay!"),this.isMobile=(0,J.AV)()||(0,J.AL)()}get(){return function ct(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ke()||(0,J.Cc)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function sn(T,m){bt(T.emulator,"Emulator should always be set here");const{url:v}=T.emulator;return m?`${v}${m.startsWith("/")?m.slice(1):m}`:v}class Re{static initialize(m,v,S){this.fetchImpl=m,v&&(this.headersImpl=v),S&&(this.responseImpl=S)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ct("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ct("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ct("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const He={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},tt=new Kt(3e4,6e4);function Ue(T,m){return T.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:T.tenantId}):m}function at(T,m,v,S){return st.apply(this,arguments)}function st(){return(st=(0,_.c)(function*(T,m,v,S,H={}){return Dt(T,H,(0,_.c)(function*(){let ne={},be={};S&&("GET"===m?be=S:ne={body:JSON.stringify(S)});const nt=(0,J.ik)(Object.assign({key:T.config.apiKey},be)).slice(1),St=yield T._getAdditionalHeaders();return St["Content-Type"]="application/json",T.languageCode&&(St["X-Firebase-Locale"]=T.languageCode),Re.fetch()(dt(T,T.config.apiHost,v,nt),Object.assign({method:m,headers:St,referrerPolicy:"no-referrer"},ne))}))})).apply(this,arguments)}function Dt(T,m,v){return ze.apply(this,arguments)}function ze(){return(ze=(0,_.c)(function*(T,m,v){T._canInitEmulator=!1;const S=Object.assign(Object.assign({},He),m);try{const H=new ut(T),ne=yield Promise.race([v(),H.promise]);H.clearNetworkTimeout();const be=yield ne.json();if("needConfirmation"in be)throw Yt(T,"account-exists-with-different-credential",be);if(ne.ok&&!("errorMessage"in be))return be;{const nt=ne.ok?be.errorMessage:be.error.message,[St,dn]=nt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===St)throw Yt(T,"credential-already-in-use",be);if("EMAIL_EXISTS"===St)throw Yt(T,"email-already-in-use",be);if("USER_DISABLED"===St)throw Yt(T,"user-disabled",be);const Pn=S[St]||St.toLowerCase().replace(/[_\s]+/g,"-");if(dn)throw me(T,Pn,dn);Ze(T,Pn)}}catch(H){if(H instanceof J.kx)throw H;Ze(T,"network-request-failed",{message:String(H)})}})).apply(this,arguments)}function xt(T,m,v,S){return De.apply(this,arguments)}function De(){return(De=(0,_.c)(function*(T,m,v,S,H={}){const ne=yield at(T,m,v,S,H);return"mfaPendingCredential"in ne&&Ze(T,"multi-factor-auth-required",{_serverResponse:ne}),ne})).apply(this,arguments)}function dt(T,m,v,S){const H=`${m}${v}?${S}`;return T.config.emulator?sn(T.config,H):`${T.config.apiScheme}://${H}`}function yt(T){switch(T){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ut{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((v,S)=>{this.timer=setTimeout(()=>S(rt(this.auth,"network-request-failed")),tt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yt(T,m,v){const S={appName:T.name};v.email&&(S.email=v.email),v.phoneNumber&&(S.phoneNumber=v.phoneNumber);const H=rt(T,m,S);return H.customData._tokenResponse=v,H}function Wn(T){return void 0!==T&&void 0!==T.getResponse}function Rr(T){return void 0!==T&&void 0!==T.enterprise}class Ht{constructor(m){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=m.recaptchaEnforcementState}getProviderEnforcementState(m){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const v of this.recaptchaEnforcementState)if(v.provider&&v.provider===m)return yt(v.enforcementState);return null}isProviderEnabled(m){return"ENFORCE"===this.getProviderEnforcementState(m)||"AUDIT"===this.getProviderEnforcementState(m)}}function $t(){return($t=(0,_.c)(function*(T){return(yield at(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function zr(T,m){return kn.apply(this,arguments)}function kn(){return(kn=(0,_.c)(function*(T,m){return at(T,"GET","/v2/recaptchaConfig",Ue(T,m))})).apply(this,arguments)}function yr(){return(yr=(0,_.c)(function*(T,m){return at(T,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function rr(){return(rr=(0,_.c)(function*(T,m){return at(T,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function yn(){return(yn=(0,_.c)(function*(T,m){return at(T,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function ii(T){if(T)try{const m=new Date(Number(T));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Bi(){return(Bi=(0,_.c)(function*(T,m=!1){const v=(0,J.Yj)(T),S=yield v.getIdToken(m),H=bn(S);Me(H&&H.exp&&H.auth_time&&H.iat,v.auth,"internal-error");const ne="object"==typeof H.firebase?H.firebase:void 0,be=ne?.sign_in_provider;return{claims:H,token:S,authTime:ii(Oi(H.auth_time)),issuedAtTime:ii(Oi(H.iat)),expirationTime:ii(Oi(H.exp)),signInProvider:be||null,signInSecondFactor:ne?.sign_in_second_factor||null}})).apply(this,arguments)}function Oi(T){return 1e3*Number(T)}function bn(T){const[m,v,S]=T.split(".");if(void 0===m||void 0===v||void 0===S)return _t("JWT malformed, contained fewer than 3 sections"),null;try{const H=(0,J.WW)(v);return H?JSON.parse(H):(_t("Failed to decode base64 JWT payload"),null)}catch(H){return _t("Caught error parsing JWT payload as JSON",H?.toString()),null}}function Tr(T,m){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,_.c)(function*(T,m,v=!1){if(v)return m;try{return yield m}catch(S){throw S instanceof J.kx&&function Mr({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}(S)&&T.auth.currentUser===T&&(yield T.auth.signOut()),S}})).apply(this,arguments)}class Gn{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var v;if(m){const S=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),S}{this.errorBackoff=3e4;const H=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,H)}}schedule(m=!1){var v=this;if(!this.isRunning)return;const S=this.getInterval(m);this.timerId=setTimeout((0,_.c)(function*(){yield v.iteration()}),S)}iteration(){var m=this;return(0,_.c)(function*(){try{yield m.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&m.schedule(!0))}m.schedule()})()}}class wi{constructor(m,v){this.createdAt=m,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=ii(this.lastLoginAt),this.creationTime=ii(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jr(T){return Nr.apply(this,arguments)}function Nr(){return Nr=(0,_.c)(function*(T){var m;const v=T.auth,S=yield T.getIdToken(),H=yield Tr(T,function In(T,m){return yn.apply(this,arguments)}(v,{idToken:S}));Me(H?.users.length,v,"internal-error");const ne=H.users[0];T._notifyReloadListener(ne);const be=null!==(m=ne.providerUserInfo)&&void 0!==m&&m.length?function Ge(T){return T.map(m=>{var{providerId:v}=m,S=(0,ge.sX)(m,["providerId"]);return{providerId:v,uid:S.rawId||"",displayName:S.displayName||null,email:S.email||null,phoneNumber:S.phoneNumber||null,photoURL:S.photoUrl||null}})}(ne.providerUserInfo):[],nt=function gt(T,m){return[...T.filter(S=>!m.some(H=>H.providerId===S.providerId)),...m]}(T.providerData,be),Pn=!!T.isAnonymous&&!(T.email&&ne.passwordHash||nt?.length),tr={uid:ne.localId,displayName:ne.displayName||null,photoURL:ne.photoUrl||null,email:ne.email||null,emailVerified:ne.emailVerified||!1,phoneNumber:ne.phoneNumber||null,tenantId:ne.tenantId||null,providerData:nt,metadata:new wi(ne.createdAt,ne.lastLoginAt),isAnonymous:Pn};Object.assign(T,tr)}),Nr.apply(this,arguments)}function pi(){return(pi=(0,_.c)(function*(T){const m=(0,J.Yj)(T);yield jr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Fe(){return(Fe=(0,_.c)(function*(T,m){const v=yield Dt(T,{},(0,_.c)(function*(){const S=(0,J.ik)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:H,apiKey:ne}=T.config,be=dt(T,H,"/v1/token",`key=${ne}`),nt=yield T._getAdditionalHeaders();return nt["Content-Type"]="application/x-www-form-urlencoded",Re.fetch()(be,{method:"POST",headers:nt,body:S})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}function ae(){return(ae=(0,_.c)(function*(T,m){return at(T,"POST","/v2/accounts:revokeToken",Ue(T,m))})).apply(this,arguments)}class X{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){Me(m.idToken,"internal-error"),Me(typeof m.idToken<"u","internal-error"),Me(typeof m.refreshToken<"u","internal-error");const v="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Fn(T){const m=bn(T);return Me(m,"internal-error"),Me(typeof m.exp<"u","internal-error"),Me(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,v)}getToken(m,v=!1){var S=this;return(0,_.c)(function*(){return Me(!S.accessToken||S.refreshToken,m,"user-token-expired"),v||!S.accessToken||S.isExpired?S.refreshToken?(yield S.refresh(m,S.refreshToken),S.accessToken):null:S.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,v){var S=this;return(0,_.c)(function*(){const{accessToken:H,refreshToken:ne,expiresIn:be}=yield function he(T,m){return Fe.apply(this,arguments)}(m,v);S.updateTokensAndExpiration(H,ne,Number(be))})()}updateTokensAndExpiration(m,v,S){this.refreshToken=v||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*S}static fromJSON(m,v){const{refreshToken:S,accessToken:H,expirationTime:ne}=v,be=new X;return S&&(Me("string"==typeof S,"internal-error",{appName:m}),be.refreshToken=S),H&&(Me("string"==typeof H,"internal-error",{appName:m}),be.accessToken=H),ne&&(Me("number"==typeof ne,"internal-error",{appName:m}),be.expirationTime=ne),be}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new X,this.toJSON())}_performRefresh(){return Ct("not implemented")}}function Q(T,m){Me("string"==typeof T||typeof T>"u","internal-error",{appName:m})}class Z{constructor(m){var{uid:v,auth:S,stsTokenManager:H}=m,ne=(0,ge.sX)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=S,this.stsTokenManager=H,this.accessToken=H.accessToken,this.displayName=ne.displayName||null,this.email=ne.email||null,this.emailVerified=ne.emailVerified||!1,this.phoneNumber=ne.phoneNumber||null,this.photoURL=ne.photoURL||null,this.isAnonymous=ne.isAnonymous||!1,this.tenantId=ne.tenantId||null,this.providerData=ne.providerData?[...ne.providerData]:[],this.metadata=new wi(ne.createdAt||void 0,ne.lastLoginAt||void 0)}getIdToken(m){var v=this;return(0,_.c)(function*(){const S=yield Tr(v,v.stsTokenManager.getToken(v.auth,m));return Me(S,v.auth,"internal-error"),v.accessToken!==S&&(v.accessToken=S,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),S})()}getIdTokenResult(m){return function qr(T){return Bi.apply(this,arguments)}(this,m)}reload(){return function Ds(T){return pi.apply(this,arguments)}(this)}_assign(m){this!==m&&(Me(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(v=>Object.assign({},v)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const v=new Z(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(m){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,v=!1){var S=this;return(0,_.c)(function*(){let H=!1;m.idToken&&m.idToken!==S.stsTokenManager.accessToken&&(S.stsTokenManager.updateFromServerResponse(m),H=!0),v&&(yield jr(S)),yield S.auth._persistUserIfCurrent(S),H&&S.auth._notifyListenersIfCurrent(S)})()}delete(){var m=this;return(0,_.c)(function*(){const v=yield m.getIdToken();return yield Tr(m,function Zr(T,m){return yr.apply(this,arguments)}(m.auth,{idToken:v})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,v){var S,H,ne,be,nt,St,dn,Pn;const tr=null!==(S=v.displayName)&&void 0!==S?S:void 0,_o=null!==(H=v.email)&&void 0!==H?H:void 0,ms=null!==(ne=v.phoneNumber)&&void 0!==ne?ne:void 0,tu=null!==(be=v.photoURL)&&void 0!==be?be:void 0,yo=null!==(nt=v.tenantId)&&void 0!==nt?nt:void 0,vo=null!==(St=v._redirectEventId)&&void 0!==St?St:void 0,uc=null!==(dn=v.createdAt)&&void 0!==dn?dn:void 0,pd=null!==(Pn=v.lastLoginAt)&&void 0!==Pn?Pn:void 0,{uid:So,emailVerified:bc,isAnonymous:Mu,providerData:gd,stsTokenManager:_s}=v;Me(So&&_s,m,"internal-error");const nr=X.fromJSON(this.name,_s);Me("string"==typeof So,m,"internal-error"),Q(tr,m.name),Q(_o,m.name),Me("boolean"==typeof bc,m,"internal-error"),Me("boolean"==typeof Mu,m,"internal-error"),Q(ms,m.name),Q(tu,m.name),Q(yo,m.name),Q(vo,m.name),Q(uc,m.name),Q(pd,m.name);const Al=new Z({uid:So,auth:m,email:_o,emailVerified:bc,displayName:tr,isAnonymous:Mu,photoURL:tu,phoneNumber:ms,tenantId:yo,stsTokenManager:nr,createdAt:uc,lastLoginAt:pd});return gd&&Array.isArray(gd)&&(Al.providerData=gd.map(Rc=>Object.assign({},Rc))),vo&&(Al._redirectEventId=vo),Al}static _fromIdTokenResponse(m,v,S=!1){return(0,_.c)(function*(){const H=new X;H.updateFromServerResponse(v);const ne=new Z({uid:v.localId,auth:m,stsTokenManager:H,isAnonymous:S});return yield jr(ne),ne})()}}const Ne=new Map;function mt(T){bt(T instanceof Function,"Expected a class definition");let m=Ne.get(T);return m?(bt(m instanceof T,"Instance stored in cache mismatched with class"),m):(m=new T,Ne.set(T,m),m)}const En=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.c)(function*(){return!0})()}_set(v,S){var H=this;return(0,_.c)(function*(){H.storage[v]=S})()}_get(v){var S=this;return(0,_.c)(function*(){const H=S.storage[v];return void 0===H?null:H})()}_remove(v){var S=this;return(0,_.c)(function*(){delete S.storage[v]})()}_addListener(v,S){}_removeListener(v,S){}}return T.type="NONE",T})();function Cn(T,m,v){return`firebase:${T}:${m}:${v}`}class On{constructor(m,v,S){this.persistence=m,this.auth=v,this.userKey=S;const{config:H,name:ne}=this.auth;this.fullUserKey=Cn(this.userKey,H.apiKey,ne),this.fullPersistenceKey=Cn("persistence",H.apiKey,ne),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,_.c)(function*(){const v=yield m.persistence._get(m.fullUserKey);return v?Z._fromJSON(m.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var v=this;return(0,_.c)(function*(){if(v.persistence===m)return;const S=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=m,S?v.setCurrentUser(S):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,v,S="authUser"){return(0,_.c)(function*(){if(!v.length)return new On(mt(En),m,S);const H=(yield Promise.all(v.map(function(){var dn=(0,_.c)(function*(Pn){if(yield Pn._isAvailable())return Pn});return function(Pn){return dn.apply(this,arguments)}}()))).filter(dn=>dn);let ne=H[0]||mt(En);const be=Cn(S,m.config.apiKey,m.name);let nt=null;for(const dn of v)try{const Pn=yield dn._get(be);if(Pn){const tr=Z._fromJSON(m,Pn);dn!==ne&&(nt=tr),ne=dn;break}}catch{}const St=H.filter(dn=>dn._shouldAllowMigration);return ne._shouldAllowMigration&&St.length?(ne=St[0],nt&&(yield ne._set(be,nt.toJSON())),yield Promise.all(v.map(function(){var dn=(0,_.c)(function*(Pn){if(Pn!==ne)try{yield Pn._remove(be)}catch{}});return function(Pn){return dn.apply(this,arguments)}}())),new On(ne,m,S)):new On(ne,m,S)})()}}function en(T){const m=T.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Pe(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Dr(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Qe(m))return"Blackberry";if(Tt(m))return"Webos";if(fn(m))return"Safari";if((m.includes("chrome/")||Ln(m))&&!m.includes("edge/"))return"Chrome";if(qe(m))return"Android";{const S=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===S?.length)return S[1]}return"Other"}function Dr(T=(0,J.Su)()){return/firefox\//i.test(T)}function fn(T=(0,J.Su)()){const m=T.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Ln(T=(0,J.Su)()){return/crios\//i.test(T)}function Pe(T=(0,J.Su)()){return/iemobile/i.test(T)}function qe(T=(0,J.Su)()){return/android/i.test(T)}function Qe(T=(0,J.Su)()){return/blackberry/i.test(T)}function Tt(T=(0,J.Su)()){return/webos/i.test(T)}function rn(T=(0,J.Su)()){return/iphone|ipad|ipod/i.test(T)||/macintosh/i.test(T)&&/mobile/i.test(T)}function Bn(T=(0,J.Su)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}function Kr(T=(0,J.Su)()){return rn(T)||qe(T)||Tt(T)||Qe(T)||/windows phone/i.test(T)||Pe(T)}function se(T,m=[]){let v;switch(T){case"Browser":v=en((0,J.Su)());break;case"Worker":v=`${en((0,J.Su)())}-${T}`;break;default:v=T}const S=m.length?m.join(","):"FirebaseCore-web";return`${v}/JsCore/${I.SDK_VERSION}/${S}`}class _e{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,v){const S=ne=>new Promise((be,nt)=>{try{be(m(ne))}catch(St){nt(St)}});S.onAbort=v,this.queue.push(S);const H=this.queue.length-1;return()=>{this.queue[H]=()=>Promise.resolve()}}runMiddleware(m){var v=this;return(0,_.c)(function*(){if(v.auth.currentUser===m)return;const S=[];try{for(const H of v.queue)yield H(m),H.onAbort&&S.push(H.onAbort)}catch(H){S.reverse();for(const ne of S)try{ne()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:H?.message})}})()}}function ft(){return(ft=(0,_.c)(function*(T,m={}){return at(T,"GET","/v2/passwordPolicy",Ue(T,m))})).apply(this,arguments)}class Vt{constructor(m){var v,S,H,ne;const be=m.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(v=be.minPasswordLength)&&void 0!==v?v:6,be.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=be.maxPasswordLength),void 0!==be.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=be.containsLowercaseCharacter),void 0!==be.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=be.containsUppercaseCharacter),void 0!==be.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=be.containsNumericCharacter),void 0!==be.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=be.containsNonAlphanumericCharacter),this.enforcementState=m.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(H=null===(S=m.allowedNonAlphanumericCharacters)||void 0===S?void 0:S.join(""))&&void 0!==H?H:"",this.forceUpgradeOnSignin=null!==(ne=m.forceUpgradeOnSignin)&&void 0!==ne&&ne,this.schemaVersion=m.schemaVersion}validatePassword(m){var v,S,H,ne,be,nt;const St={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(m,St),this.validatePasswordCharacterOptions(m,St),St.isValid&&(St.isValid=null===(v=St.meetsMinPasswordLength)||void 0===v||v),St.isValid&&(St.isValid=null===(S=St.meetsMaxPasswordLength)||void 0===S||S),St.isValid&&(St.isValid=null===(H=St.containsLowercaseLetter)||void 0===H||H),St.isValid&&(St.isValid=null===(ne=St.containsUppercaseLetter)||void 0===ne||ne),St.isValid&&(St.isValid=null===(be=St.containsNumericCharacter)||void 0===be||be),St.isValid&&(St.isValid=null===(nt=St.containsNonAlphanumericCharacter)||void 0===nt||nt),St}validatePasswordLengthOptions(m,v){const S=this.customStrengthOptions.minPasswordLength,H=this.customStrengthOptions.maxPasswordLength;S&&(v.meetsMinPasswordLength=m.length>=S),H&&(v.meetsMaxPasswordLength=m.length<=H)}validatePasswordCharacterOptions(m,v){let S;this.updatePasswordCharacterOptionsStatuses(v,!1,!1,!1,!1);for(let H=0;H<m.length;H++)S=m.charAt(H),this.updatePasswordCharacterOptionsStatuses(v,S>="a"&&S<="z",S>="A"&&S<="Z",S>="0"&&S<="9",this.allowedNonAlphanumericCharacters.includes(S))}updatePasswordCharacterOptionsStatuses(m,v,S,H,ne){this.customStrengthOptions.containsLowercaseLetter&&(m.containsLowercaseLetter||(m.containsLowercaseLetter=v)),this.customStrengthOptions.containsUppercaseLetter&&(m.containsUppercaseLetter||(m.containsUppercaseLetter=S)),this.customStrengthOptions.containsNumericCharacter&&(m.containsNumericCharacter||(m.containsNumericCharacter=H)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(m.containsNonAlphanumericCharacter||(m.containsNonAlphanumericCharacter=ne))}}class qt{constructor(m,v,S,H){this.app=m,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=S,this.config=H,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new an(this),this.idTokenSubscription=new an(this),this.beforeStateQueue=new _e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ve,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=H.sdkClientVersion}_initializeWithPersistence(m,v){var S=this;return v&&(this._popupRedirectResolver=mt(v)),this._initializationPromise=this.queue((0,_.c)(function*(){var H,ne;if(!S._deleted&&(S.persistenceManager=yield On.create(S,m),!S._deleted)){if(null!==(H=S._popupRedirectResolver)&&void 0!==H&&H._shouldInitProactively)try{yield S._popupRedirectResolver._initialize(S)}catch{}yield S.initializeCurrentUser(v),S.lastNotifiedUid=(null===(ne=S.currentUser)||void 0===ne?void 0:ne.uid)||null,!S._deleted&&(S._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,_.c)(function*(){if(m._deleted)return;const v=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||v){if(m.currentUser&&v&&m.currentUser.uid===v.uid)return m._currentUser._assign(v),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(v,!0)}})()}initializeCurrentUser(m){var v=this;return(0,_.c)(function*(){var S;const H=yield v.assertedPersistence.getCurrentUser();let ne=H,be=!1;if(m&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const nt=null===(S=v.redirectUser)||void 0===S?void 0:S._redirectEventId,St=ne?._redirectEventId,dn=yield v.tryRedirectSignIn(m);(!nt||nt===St)&&dn?.user&&(ne=dn.user,be=!0)}if(!ne)return v.directlySetCurrentUser(null);if(!ne._redirectEventId){if(be)try{yield v.beforeStateQueue.runMiddleware(ne)}catch(nt){ne=H,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(nt))}return ne?v.reloadAndSetCurrentUserOrClear(ne):v.directlySetCurrentUser(null)}return Me(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===ne._redirectEventId?v.directlySetCurrentUser(ne):v.reloadAndSetCurrentUserOrClear(ne)})()}tryRedirectSignIn(m){var v=this;return(0,_.c)(function*(){let S=null;try{S=yield v._popupRedirectResolver._completeRedirectFn(v,m,!0)}catch{yield v._setRedirectUser(null)}return S})()}reloadAndSetCurrentUserOrClear(m){var v=this;return(0,_.c)(function*(){try{yield jr(m)}catch(S){if("auth/network-request-failed"!==S?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Nt(){if(typeof navigator>"u")return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var m=this;return(0,_.c)(function*(){m._deleted=!0})()}updateCurrentUser(m){var v=this;return(0,_.c)(function*(){const S=m?(0,J.Yj)(m):null;return S&&Me(S.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(S&&S._clone(v))})()}_updateCurrentUser(m,v=!1){var S=this;return(0,_.c)(function*(){if(!S._deleted)return m&&Me(S.tenantId===m.tenantId,S,"tenant-id-mismatch"),v||(yield S.beforeStateQueue.runMiddleware(m)),S.queue((0,_.c)(function*(){yield S.directlySetCurrentUser(m),S.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,_.c)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var v=this;return this.queue((0,_.c)(function*(){yield v.assertedPersistence.setPersistence(mt(m))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(m){var v=this;return(0,_.c)(function*(){v._getPasswordPolicyInternal()||(yield v._updatePasswordPolicy());const S=v._getPasswordPolicyInternal();return S.schemaVersion!==v.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(v._errorFactory.create("unsupported-password-policy-schema-version",{})):S.validatePassword(m)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var m=this;return(0,_.c)(function*(){const v=yield function ye(T){return ft.apply(this,arguments)}(m),S=new Vt(v);null===m.tenantId?m._projectPasswordPolicy=S:m._tenantPasswordPolicies[m.tenantId]=S})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new J.UR("auth","Firebase",m())}onAuthStateChanged(m,v,S){return this.registerStateListener(this.authStateSubscription,m,v,S)}beforeAuthStateChanged(m,v){return this.beforeStateQueue.pushCallback(m,v)}onIdTokenChanged(m,v,S){return this.registerStateListener(this.idTokenSubscription,m,v,S)}authStateReady(){return new Promise((m,v)=>{if(this.currentUser)m();else{const S=this.onAuthStateChanged(()=>{S(),m()},v)}})}revokeAccessToken(m){var v=this;return(0,_.c)(function*(){if(v.currentUser){const S=yield v.currentUser.getIdToken(),H={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:m,idToken:S};null!=v.tenantId&&(H.tenantId=v.tenantId),yield function re(T,m){return ae.apply(this,arguments)}(v,H)}})()}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,v){var S=this;return(0,_.c)(function*(){const H=yield S.getOrInitRedirectPersistenceManager(v);return null===m?H.removeCurrentUser():H.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var v=this;return(0,_.c)(function*(){if(!v.redirectPersistenceManager){const S=m&&mt(m)||v._popupRedirectResolver;Me(S,v,"argument-error"),v.redirectPersistenceManager=yield On.create(v,[mt(S._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(m){var v=this;return(0,_.c)(function*(){var S,H;return v._isInitialized&&(yield v.queue((0,_.c)(function*(){}))),(null===(S=v._currentUser)||void 0===S?void 0:S._redirectEventId)===m?v._currentUser:(null===(H=v.redirectUser)||void 0===H?void 0:H._redirectEventId)===m?v.redirectUser:null})()}_persistUserIfCurrent(m){var v=this;return(0,_.c)(function*(){if(m===v.currentUser)return v.queue((0,_.c)(function*(){return v.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const S=null!==(v=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==S&&(this.lastNotifiedUid=S,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,v,S,H){if(this._deleted)return()=>{};const ne="function"==typeof v?v:v.next.bind(v);let be=!1;const nt=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(nt,this,"internal-error"),nt.then(()=>{be||ne(this.currentUser)}),"function"==typeof v){const St=m.addObserver(v,S,H);return()=>{be=!0,St()}}{const St=m.addObserver(v);return()=>{be=!0,St()}}}directlySetCurrentUser(m){var v=this;return(0,_.c)(function*(){v.currentUser&&v.currentUser!==m&&v._currentUser._stopProactiveRefresh(),m&&v.isProactiveRefreshEnabled&&m._startProactiveRefresh(),v.currentUser=m,m?yield v.assertedPersistence.setCurrentUser(m):yield v.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=se(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,_.c)(function*(){var v;const S={"X-Client-Version":m.clientVersion};m.app.options.appId&&(S["X-Firebase-gmpid"]=m.app.options.appId);const H=yield null===(v=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();H&&(S["X-Firebase-Client"]=H);const ne=yield m._getAppCheckToken();return ne&&(S["X-Firebase-AppCheck"]=ne),S})()}_getAppCheckToken(){var m=this;return(0,_.c)(function*(){var v;const S=yield null===(v=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return S?.error&&function ht(T,...m){Ce.logLevel<=O.Ge.WARN&&Ce.warn(`Auth (${I.SDK_VERSION}): ${T}`,...m)}(`Error while retrieving App Check token: ${S.error}`),S?.token})()}}function pn(T){return(0,J.Yj)(T)}class an{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,J.my)(v=>this.observer=v)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zn={loadJS:()=>(0,_.c)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sr(T){return zn.loadJS(T)}function kr(T){return`__${T}${Math.floor(1e6*Math.random())}`}class $n{constructor(m){this.type="recaptcha-enterprise",this.auth=pn(m)}verify(m="verify",v=!1){var S=this;return(0,_.c)(function*(){function ne(){return ne=(0,_.c)(function*(nt){if(!v){if(null==nt.tenantId&&null!=nt._agentRecaptchaConfig)return nt._agentRecaptchaConfig.siteKey;if(null!=nt.tenantId&&void 0!==nt._tenantRecaptchaConfigs[nt.tenantId])return nt._tenantRecaptchaConfigs[nt.tenantId].siteKey}return new Promise(function(){var St=(0,_.c)(function*(dn,Pn){zr(nt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tr=>{if(void 0!==tr.recaptchaKey){const _o=new Ht(tr);return null==nt.tenantId?nt._agentRecaptchaConfig=_o:nt._tenantRecaptchaConfigs[nt.tenantId]=_o,dn(_o.siteKey)}Pn(new Error("recaptcha Enterprise site key undefined"))}).catch(tr=>{Pn(tr)})});return function(dn,Pn){return St.apply(this,arguments)}}())}),ne.apply(this,arguments)}function be(nt,St,dn){const Pn=window.grecaptcha;Rr(Pn)?Pn.enterprise.ready(()=>{Pn.enterprise.execute(nt,{action:m}).then(tr=>{St(tr)}).catch(()=>{St("NO_RECAPTCHA")})}):dn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((nt,St)=>{(function H(nt){return ne.apply(this,arguments)})(S.auth).then(dn=>{if(!v&&Rr(window.grecaptcha))be(dn,nt,St);else{if(typeof window>"u")return void St(new Error("RecaptchaVerifier is only supported in browser"));let Pn=function ns(){return zn.recaptchaEnterpriseScript}();0!==Pn.length&&(Pn+=dn),sr(Pn).then(()=>{be(dn,nt,St)}).catch(tr=>{St(tr)})}}).catch(dn=>{St(dn)})})})()}}function fr(T,m,v){return rs.apply(this,arguments)}function rs(){return(rs=(0,_.c)(function*(T,m,v,S=!1){const H=new $n(T);let ne;try{ne=yield H.verify(v)}catch{ne=yield H.verify(v,!0)}const be=Object.assign({},m);return Object.assign(be,S?{captchaResp:ne}:{captchaResponse:ne}),Object.assign(be,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(be,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),be})).apply(this,arguments)}function Di(T,m,v,S){return si.apply(this,arguments)}function si(){return si=(0,_.c)(function*(T,m,v,S){var H;if(null!==(H=T._getRecaptchaConfig())&&void 0!==H&&H.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const ne=yield fr(T,m,v,"getOobCode"===v);return S(T,ne)}return S(T,m).catch(function(){var ne=(0,_.c)(function*(be){if("auth/missing-recaptcha-token"===be.code){console.log(`${v} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const nt=yield fr(T,m,v,"getOobCode"===v);return S(T,nt)}return Promise.reject(be)});return function(be){return ne.apply(this,arguments)}}())}),si.apply(this,arguments)}function ji(T,m,v){const S=pn(T);Me(S._canInitEmulator,S,"emulator-config-failed"),Me(/^https?:\/\//.test(m),S,"invalid-emulator-scheme");const H=!!v?.disableWarnings,ne=Go(m),{host:be,port:nt}=function Ka(T){const m=Go(T),v=/(\/\/)?([^?#/]+)/.exec(T.substr(m.length));if(!v)return{host:"",port:null};const S=v[2].split("@").pop()||"",H=/^(\[[^\]]+\])(:|$)/.exec(S);if(H){const ne=H[1];return{host:ne,port:Zn(S.substr(ne.length+1))}}{const[ne,be]=S.split(":");return{host:ne,port:Zn(be)}}}(m);S.config.emulator={url:`${ne}//${be}${null===nt?"":`:${nt}`}/`},S.settings.appVerificationDisabledForTesting=!0,S.emulatorConfig=Object.freeze({host:be,port:nt,protocol:ne.replace(":",""),options:Object.freeze({disableWarnings:H})}),H||function Si(){function T(){const m=document.createElement("p"),v=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}function Go(T){const m=T.indexOf(":");return m<0?"":T.substr(0,m+1)}function Zn(T){if(!T)return null;const m=Number(T);return isNaN(m)?null:m}class $r{constructor(m,v){this.providerId=m,this.signInMethod=v}toJSON(){return Ct("not implemented")}_getIdTokenResponse(m){return Ct("not implemented")}_linkToIdToken(m,v){return Ct("not implemented")}_getReauthenticationResolver(m){return Ct("not implemented")}}function Ss(T,m){return oi.apply(this,arguments)}function oi(){return(oi=(0,_.c)(function*(T,m){return at(T,"POST","/v1/accounts:resetPassword",Ue(T,m))})).apply(this,arguments)}function ia(){return(ia=(0,_.c)(function*(T,m){return at(T,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Bs(T,m){return zs.apply(this,arguments)}function zs(){return(zs=(0,_.c)(function*(T,m){return at(T,"POST","/v1/accounts:signUp",m)})).apply(this,arguments)}function Qr(){return(Qr=(0,_.c)(function*(T,m){return at(T,"POST","/v1/accounts:update",Ue(T,m))})).apply(this,arguments)}function Bt(T,m){return vn.apply(this,arguments)}function vn(){return(vn=(0,_.c)(function*(T,m){return xt(T,"POST","/v1/accounts:signInWithPassword",Ue(T,m))})).apply(this,arguments)}function Ar(T,m){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,_.c)(function*(T,m){return at(T,"POST","/v1/accounts:sendOobCode",Ue(T,m))})).apply(this,arguments)}function Ni(){return(Ni=(0,_.c)(function*(T,m){return Ar(T,m)})).apply(this,arguments)}function $i(T,m){return or.apply(this,arguments)}function or(){return(or=(0,_.c)(function*(T,m){return Ar(T,m)})).apply(this,arguments)}function ki(T,m){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,_.c)(function*(T,m){return Ar(T,m)})).apply(this,arguments)}function Pi(){return(Pi=(0,_.c)(function*(T,m){return Ar(T,m)})).apply(this,arguments)}function qs(){return(qs=(0,_.c)(function*(T,m){return xt(T,"POST","/v1/accounts:signInWithEmailLink",Ue(T,m))})).apply(this,arguments)}function Ps(){return(Ps=(0,_.c)(function*(T,m){return xt(T,"POST","/v1/accounts:signInWithEmailLink",Ue(T,m))})).apply(this,arguments)}class bs extends $r{constructor(m,v,S,H=null){super("password",S),this._email=m,this._password=v,this._tenantId=H}static _fromEmailAndPassword(m,v){return new bs(m,v,"password")}static _fromEmailAndCode(m,v,S=null){return new bs(m,v,"emailLink",S)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(m){var v=this;return(0,_.c)(function*(){switch(v.signInMethod){case"password":return Di(m,{returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Bt);case"emailLink":return function ho(T,m){return qs.apply(this,arguments)}(m,{email:v._email,oobCode:v._password});default:Ze(m,"internal-error")}})()}_linkToIdToken(m,v){var S=this;return(0,_.c)(function*(){switch(S.signInMethod){case"password":return Di(m,{idToken:v,returnSecureToken:!0,email:S._email,password:S._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bs);case"emailLink":return function li(T,m){return Ps.apply(this,arguments)}(m,{idToken:v,email:S._email,oobCode:S._password});default:Ze(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function bi(T,m){return is.apply(this,arguments)}function is(){return(is=(0,_.c)(function*(T,m){return xt(T,"POST","/v1/accounts:signInWithIdp",Ue(T,m))})).apply(this,arguments)}class Ei extends $r{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const v=new Ei(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(v.idToken=m.idToken),m.accessToken&&(v.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(v.nonce=m.nonce),m.pendingToken&&(v.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(v.accessToken=m.oauthToken,v.secret=m.oauthTokenSecret):Ze("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m,{providerId:S,signInMethod:H}=v,ne=(0,ge.sX)(v,["providerId","signInMethod"]);if(!S||!H)return null;const be=new Ei(S,H);return be.idToken=ne.idToken||void 0,be.accessToken=ne.accessToken||void 0,be.secret=ne.secret,be.nonce=ne.nonce,be.pendingToken=ne.pendingToken||null,be}_getIdTokenResponse(m){return bi(m,this.buildRequest())}_linkToIdToken(m,v){const S=this.buildRequest();return S.idToken=v,bi(m,S)}_getReauthenticationResolver(m){const v=this.buildRequest();return v.autoCreate=!1,bi(m,v)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),m.postBody=(0,J.ik)(v)}return m}}function Rs(){return(Rs=(0,_.c)(function*(T,m){return at(T,"POST","/v1/accounts:sendVerificationCode",Ue(T,m))})).apply(this,arguments)}function Mo(){return(Mo=(0,_.c)(function*(T,m){return xt(T,"POST","/v1/accounts:signInWithPhoneNumber",Ue(T,m))})).apply(this,arguments)}function Wi(){return(Wi=(0,_.c)(function*(T,m){const v=yield xt(T,"POST","/v1/accounts:signInWithPhoneNumber",Ue(T,m));if(v.temporaryProof)throw Yt(T,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const fa={USER_NOT_FOUND:"user-not-found"};function di(){return(di=(0,_.c)(function*(T,m){return xt(T,"POST","/v1/accounts:signInWithPhoneNumber",Ue(T,Object.assign(Object.assign({},m),{operation:"REAUTH"})),fa)})).apply(this,arguments)}class ys extends $r{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,v){return new ys({verificationId:m,verificationCode:v})}static _fromTokenResponse(m,v){return new ys({phoneNumber:m,temporaryProof:v})}_getIdTokenResponse(m){return function cn(T,m){return Mo.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,v){return function Ms(T,m){return Wi.apply(this,arguments)}(m,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Oo(T,m){return di.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:v,verificationId:S,verificationCode:H}=this.params;return m&&v?{temporaryProof:m,phoneNumber:v}:{sessionInfo:S,code:H}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:v,verificationCode:S,phoneNumber:H,temporaryProof:ne}=m;return S||v||H||ne?new ys({verificationId:v,verificationCode:S,phoneNumber:H,temporaryProof:ne}):null}}class Os{constructor(m){var v,S,H,ne,be,nt;const St=(0,J.aw)((0,J.kF)(m)),dn=null!==(v=St.apiKey)&&void 0!==v?v:null,Pn=null!==(S=St.oobCode)&&void 0!==S?S:null,tr=function ss(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(H=St.mode)&&void 0!==H?H:null);Me(dn&&Pn&&tr,"argument-error"),this.apiKey=dn,this.operation=tr,this.code=Pn,this.continueUrl=null!==(ne=St.continueUrl)&&void 0!==ne?ne:null,this.languageCode=null!==(be=St.languageCode)&&void 0!==be?be:null,this.tenantId=null!==(nt=St.tenantId)&&void 0!==nt?nt:null}static parseLink(m){const v=function Hi(T){const m=(0,J.aw)((0,J.kF)(T)).link,v=m?(0,J.aw)((0,J.kF)(m)).deep_link_id:null,S=(0,J.aw)((0,J.kF)(T)).deep_link_id;return(S?(0,J.aw)((0,J.kF)(S)).link:null)||S||v||m||T}(m);try{return new Os(v)}catch{return null}}}let xs=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(v,S){return bs._fromEmailAndPassword(v,S)}static credentialWithLink(v,S){const H=Os.parseLink(S);return Me(H,"argument-error"),bs._fromEmailAndCode(v,H.code,H.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class Li{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class sa extends Li{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Ks extends sa{static credentialFromJSON(m){const v="string"==typeof m?JSON.parse(m):m;return Me("providerId"in v&&"signInMethod"in v,"argument-error"),Ei._fromParams(v)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return Me(m.idToken||m.accessToken,"argument-error"),Ei._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Ks.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Ks.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:v,oauthAccessToken:S,oauthTokenSecret:H,pendingToken:ne,nonce:be,providerId:nt}=m;if(!S&&!H&&!v&&!ne||!nt)return null;try{return new Ks(nt)._credential({idToken:v,accessToken:S,nonce:be,pendingToken:ne})}catch{return null}}}let Wo=(()=>{class T extends sa{constructor(){super("facebook.com")}static credential(v){return Ei._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return T.credential(v.oauthAccessToken)}catch{return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),Ya=(()=>{class T extends sa{constructor(){super("google.com"),this.addScope("profile")}static credential(v,S){return Ei._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:S})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:S,oauthAccessToken:H}=v;if(!S&&!H)return null;try{return T.credential(S,H)}catch{return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),Vc=(()=>{class T extends sa{constructor(){super("github.com")}static credential(v){return Ei._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return T.credential(v.oauthAccessToken)}catch{return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class js extends $r{constructor(m,v){super(m,m),this.pendingToken=v}_getIdTokenResponse(m){return bi(m,this.buildRequest())}_linkToIdToken(m,v){const S=this.buildRequest();return S.idToken=v,bi(m,S)}_getReauthenticationResolver(m){const v=this.buildRequest();return v.autoCreate=!1,bi(m,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m,{providerId:S,signInMethod:H,pendingToken:ne}=v;return S&&H&&ne&&S===H?new js(S,ne):null}static _create(m,v){return new js(m,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class pa extends Li{constructor(m){Me(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return pa.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return pa.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const v=js.fromJSON(m);return Me(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:v,providerId:S}=m;if(!v||!S)return null;try{return js._create(S,v)}catch{return null}}}let ga=(()=>{class T extends sa{constructor(){super("twitter.com")}static credential(v,S){return Ei._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:S})}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:S,oauthTokenSecret:H}=v;if(!S||!H)return null;try{return T.credential(S,H)}catch{return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function yu(T,m){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,_.c)(function*(T,m){return xt(T,"POST","/v1/accounts:signUp",Ue(T,m))})).apply(this,arguments)}class Ys{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,v,S,H=!1){return(0,_.c)(function*(){const ne=yield Z._fromIdTokenResponse(m,S,H),be=G(S);return new Ys({user:ne,providerId:be,_tokenResponse:S,operationType:v})})()}static _forOperation(m,v,S){return(0,_.c)(function*(){yield m._updateTokensIfNecessary(S,!0);const H=G(S);return new Ys({user:m,providerId:H,_tokenResponse:S,operationType:v})})()}}function G(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function z(T){return F.apply(this,arguments)}function F(){return(F=(0,_.c)(function*(T){var m;const v=pn(T);if(yield v._initializationPromise,null!==(m=v.currentUser)&&void 0!==m&&m.isAnonymous)return new Ys({user:v.currentUser,providerId:null,operationType:"signIn"});const S=yield yu(v,{returnSecureToken:!0}),H=yield Ys._fromIdTokenResponse(v,"signIn",S,!0);return yield v._updateCurrentUser(H.user),H})).apply(this,arguments)}class te extends J.kx{constructor(m,v,S,H){var ne;super(v.code,v.message),this.operationType=S,this.user=H,Object.setPrototypeOf(this,te.prototype),this.customData={appName:m.name,tenantId:null!==(ne=m.tenantId)&&void 0!==ne?ne:void 0,_serverResponse:v.customData._serverResponse,operationType:S}}static _fromErrorAndOperation(m,v,S,H){return new te(m,v,S,H)}}function ve(T,m,v,S){return("reauthenticate"===m?v._getReauthenticationResolver(T):v._getIdTokenResponse(T)).catch(ne=>{throw"auth/multi-factor-auth-required"===ne.code?te._fromErrorAndOperation(T,ne,m,S):ne})}function un(T){return new Set(T.map(({providerId:m})=>m).filter(m=>!!m))}function Qn(T,m){return vs.apply(this,arguments)}function vs(){return vs=(0,_.c)(function*(T,m){const v=(0,J.Yj)(T);yield Uc(!0,v,m);const{providerUserInfo:S}=yield function vi(T,m){return rr.apply(this,arguments)}(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[m]}),H=un(S||[]);return v.providerData=v.providerData.filter(ne=>H.has(ne.providerId)),H.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v}),vs.apply(this,arguments)}function os(T,m){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,_.c)(function*(T,m,v=!1){const S=yield Tr(T,m._linkToIdToken(T.auth,yield T.getIdToken()),v);return Ys._forOperation(T,"link",S)})).apply(this,arguments)}function Uc(T,m,v){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,_.c)(function*(T,m,v){yield jr(m);const H=!1===T?"provider-already-linked":"no-such-provider";Me(un(m.providerData).has(v)===T,m.auth,H)})).apply(this,arguments)}function Sr(T,m){return gn.apply(this,arguments)}function gn(){return(gn=(0,_.c)(function*(T,m,v=!1){const{auth:S}=T,H="reauthenticate";try{const ne=yield Tr(T,ve(S,H,m,T),v);Me(ne.idToken,S,"internal-error");const be=bn(ne.idToken);Me(be,S,"internal-error");const{sub:nt}=be;return Me(T.uid===nt,S,"user-mismatch"),Ys._forOperation(T,H,ne)}catch(ne){throw"auth/user-not-found"===ne?.code&&Ze(S,"user-mismatch"),ne}})).apply(this,arguments)}function Ho(T,m){return ai.apply(this,arguments)}function ai(){return(ai=(0,_.c)(function*(T,m,v=!1){const S="signIn",H=yield ve(T,S,m),ne=yield Ys._fromIdTokenResponse(T,S,H);return v||(yield T._updateCurrentUser(ne.user)),ne})).apply(this,arguments)}function Ma(T,m){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,_.c)(function*(T,m){return Ho(pn(T),m)})).apply(this,arguments)}function Qs(T,m){return xo.apply(this,arguments)}function xo(){return(xo=(0,_.c)(function*(T,m){const v=(0,J.Yj)(T);return yield Uc(!1,v,m.providerId),os(v,m)})).apply(this,arguments)}function dr(T,m){return Un.apply(this,arguments)}function Un(){return(Un=(0,_.c)(function*(T,m){return Sr((0,J.Yj)(T),m)})).apply(this,arguments)}function ma(){return(ma=(0,_.c)(function*(T,m){return xt(T,"POST","/v1/accounts:signInWithCustomToken",Ue(T,m))})).apply(this,arguments)}function ks(T,m){return ls.apply(this,arguments)}function ls(){return ls=(0,_.c)(function*(T,m){const v=pn(T),S=yield function Ji(T,m){return ma.apply(this,arguments)}(v,{token:m,returnSecureToken:!0}),H=yield Ys._fromIdTokenResponse(v,"signIn",S);return yield v._updateCurrentUser(H.user),H}),ls.apply(this,arguments)}class Io{constructor(m,v){this.factorId=m,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(m,v){return"phoneInfo"in v?gc._fromServerResponse(m,v):"totpInfo"in v?ds._fromServerResponse(m,v):Ze(m,"internal-error")}}class gc extends Io{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,v){return new gc(v)}}class ds extends Io{constructor(m){super("totp",m)}static _fromServerResponse(m,v){return new ds(v)}}function Js(T,m,v){var S;Me((null===(S=v.url)||void 0===S?void 0:S.length)>0,T,"invalid-continue-uri"),Me(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),m.continueUrl=v.url,m.dynamicLinkDomain=v.dynamicLinkDomain,m.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(Me(v.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),m.iOSBundleId=v.iOS.bundleId),v.android&&(Me(v.android.packageName.length>0,T,"missing-android-pkg-name"),m.androidInstallApp=v.android.installApp,m.androidMinimumVersionCode=v.android.minimumVersion,m.androidPackageName=v.android.packageName)}function Co(T){return No.apply(this,arguments)}function No(){return(No=(0,_.c)(function*(T){const m=pn(T);m._getPasswordPolicyInternal()&&(yield m._updatePasswordPolicy())})).apply(this,arguments)}function Xs(T,m,v){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,_.c)(function*(T,m,v){const S=pn(T),H={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};v&&Js(S,H,v),yield Di(S,H,"getOobCode",$i)})).apply(this,arguments)}function zo(T,m,v){return xa.apply(this,arguments)}function xa(){return xa=(0,_.c)(function*(T,m,v){yield Ss((0,J.Yj)(T),{oobCode:m,newPassword:v}).catch(function(){var S=(0,_.c)(function*(H){throw"auth/password-does-not-meet-requirements"===H.code&&Co(T),H});return function(H){return S.apply(this,arguments)}}())}),xa.apply(this,arguments)}function Bc(T,m){return $s.apply(this,arguments)}function $s(){return $s=(0,_.c)(function*(T,m){yield function bo(T,m){return Qr.apply(this,arguments)}((0,J.Yj)(T),{oobCode:m})}),$s.apply(this,arguments)}function Mn(T,m){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,_.c)(function*(T,m){const v=(0,J.Yj)(T),S=yield Ss(v,{oobCode:m}),H=S.requestType;switch(Me(H,v,"internal-error"),H){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Me(S.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Me(S.mfaInfo,v,"internal-error");default:Me(S.email,v,"internal-error")}let ne=null;return S.mfaInfo&&(ne=Io._fromServerResponse(pn(v),S.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.newEmail:S.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.email:S.newEmail)||null,multiFactorInfo:ne},operation:H}})).apply(this,arguments)}function hr(T,m){return _a.apply(this,arguments)}function _a(){return(_a=(0,_.c)(function*(T,m){const{data:v}=yield Mn((0,J.Yj)(T),m);return v.email})).apply(this,arguments)}function mc(T,m,v){return qo.apply(this,arguments)}function qo(){return(qo=(0,_.c)(function*(T,m,v){const S=pn(T),be=yield Di(S,{returnSecureToken:!0,email:m,password:v,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yu).catch(St=>{throw"auth/password-does-not-meet-requirements"===St.code&&Co(T),St}),nt=yield Ys._fromIdTokenResponse(S,"signIn",be);return yield S._updateCurrentUser(nt.user),nt})).apply(this,arguments)}function wo(T,m,v){return Ma((0,J.Yj)(T),xs.credential(m,v)).catch(function(){var S=(0,_.c)(function*(H){throw"auth/password-does-not-meet-requirements"===H.code&&Co(T),H});return function(H){return S.apply(this,arguments)}}())}function Ko(T,m,v){return Es.apply(this,arguments)}function Es(){return(Es=(0,_.c)(function*(T,m,v){const S=pn(T),H={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};(function ne(be,nt){Me(nt.handleCodeInApp,S,"argument-error"),nt&&Js(S,be,nt)})(H,v),yield Di(S,H,"getOobCode",ki)})).apply(this,arguments)}function vu(T,m){const v=Os.parseLink(m);return"EMAIL_SIGNIN"===v?.operation}function hs(T,m,v){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,_.c)(function*(T,m,v){const S=(0,J.Yj)(T),H=xs.credentialWithLink(m,v||Ut());return Me(H._tenantId===(S.tenantId||null),S,"tenant-id-mismatch"),Ma(S,H)})).apply(this,arguments)}function vt(){return(vt=(0,_.c)(function*(T,m){return at(T,"POST","/v1/accounts:createAuthUri",Ue(T,m))})).apply(this,arguments)}function ar(T,m){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,_.c)(function*(T,m){const S={identifier:m,continueUri:ke()?Ut():"http://localhost"},{signinMethods:H}=yield function jc(T,m){return vt.apply(this,arguments)}((0,J.Yj)(T),S);return H||[]}),Qa.apply(this,arguments)}function eo(T,m){return Or.apply(this,arguments)}function Or(){return Or=(0,_.c)(function*(T,m){const v=(0,J.Yj)(T),H={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};m&&Js(v.auth,H,m);const{email:ne}=yield function xi(T,m){return Ni.apply(this,arguments)}(v.auth,H);ne!==T.email&&(yield T.reload())}),Or.apply(this,arguments)}function Lr(T,m,v){return ya.apply(this,arguments)}function ya(){return ya=(0,_.c)(function*(T,m,v){const S=(0,J.Yj)(T),ne={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:m};v&&Js(S.auth,ne,v);const{email:be}=yield function An(T,m){return Pi.apply(this,arguments)}(S.auth,ne);be!==T.email&&(yield T.reload())}),ya.apply(this,arguments)}function to(){return(to=(0,_.c)(function*(T,m){return at(T,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function $c(T,m){return Ja.apply(this,arguments)}function Ja(){return Ja=(0,_.c)(function*(T,{displayName:m,photoURL:v}){if(void 0===m&&void 0===v)return;const S=(0,J.Yj)(T),ne={idToken:yield S.getIdToken(),displayName:m,photoUrl:v,returnSecureToken:!0},be=yield Tr(S,function po(T,m){return to.apply(this,arguments)}(S.auth,ne));S.displayName=be.displayName||null,S.photoURL=be.photoUrl||null;const nt=S.providerData.find(({providerId:St})=>"password"===St);nt&&(nt.displayName=S.displayName,nt.photoURL=S.photoURL),yield S._updateTokensIfNecessary(be)}),Ja.apply(this,arguments)}function ti(T,m){return Is((0,J.Yj)(T),m,null)}function Gc(T,m){return Is((0,J.Yj)(T),null,m)}function Is(T,m,v){return hi.apply(this,arguments)}function hi(){return hi=(0,_.c)(function*(T,m,v){const{auth:S}=T,ne={idToken:yield T.getIdToken(),returnSecureToken:!0};m&&(ne.email=m),v&&(ne.password=v);const be=yield Tr(T,function ra(T,m){return ia.apply(this,arguments)}(S,ne));yield T._updateTokensIfNecessary(be,!0)}),hi.apply(this,arguments)}class Er{constructor(m,v,S={}){this.isNewUser=m,this.providerId=v,this.profile=S}}class A extends Er{constructor(m,v,S,H){super(m,v,S),this.username=H}}class q extends Er{constructor(m,v){super(m,"facebook.com",v)}}class N extends A{constructor(m,v){super(m,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class W extends Er{constructor(m,v){super(m,"google.com",v)}}class de extends A{constructor(m,v,S){super(m,"twitter.com",v,S)}}function et(T){const{user:m,_tokenResponse:v}=T;return m.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Ls(T){var m,v;if(!T)return null;const{providerId:S}=T,H=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},ne=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!S&&T?.idToken){const be=null===(v=null===(m=bn(T.idToken))||void 0===m?void 0:m.firebase)||void 0===v?void 0:v.sign_in_provider;if(be)return new Er(ne,"anonymous"!==be&&"custom"!==be?be:null)}if(!S)return null;switch(S){case"facebook.com":return new q(ne,H);case"github.com":return new N(ne,H);case"google.com":return new W(ne,H);case"twitter.com":return new de(ne,H,T.screenName||null);case"custom":case"anonymous":return new Er(ne,null);default:return new Er(ne,S,H)}}(v)}class ui{constructor(m,v,S){this.type=m,this.credential=v,this.user=S}static _fromIdtoken(m,v){return new ui("enroll",m,v)}static _fromMfaPendingCredential(m){return new ui("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var v,S;if(m?.multiFactorSession){if(null!==(v=m.multiFactorSession)&&void 0!==v&&v.pendingCredential)return ui._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(S=m.multiFactorSession)&&void 0!==S&&S.idToken)return ui._fromIdtoken(m.multiFactorSession.idToken)}return null}}class er{constructor(m,v,S){this.session=m,this.hints=v,this.signInResolver=S}static _fromError(m,v){const S=pn(m),H=v.customData._serverResponse,ne=(H.mfaInfo||[]).map(nt=>Io._fromServerResponse(S,nt));Me(H.mfaPendingCredential,S,"internal-error");const be=ui._fromMfaPendingCredential(H.mfaPendingCredential);return new er(be,ne,function(){var nt=(0,_.c)(function*(St){const dn=yield St._process(S,be);delete H.mfaInfo,delete H.mfaPendingCredential;const Pn=Object.assign(Object.assign({},H),{idToken:dn.idToken,refreshToken:dn.refreshToken});switch(v.operationType){case"signIn":const tr=yield Ys._fromIdTokenResponse(S,v.operationType,Pn);return yield S._updateCurrentUser(tr.user),tr;case"reauthenticate":return Me(v.user,S,"internal-error"),Ys._forOperation(v.user,v.operationType,Pn);default:Ze(S,"internal-error")}});return function(St){return nt.apply(this,arguments)}}())}resolveSignIn(m){var v=this;return(0,_.c)(function*(){return v.signInResolver(m)})()}}function To(T,m){var v;const S=(0,J.Yj)(T),H=m;return Me(m.customData.operationType,S,"argument-error"),Me(null===(v=H.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,S,"argument-error"),er._fromError(S,H)}class on{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(S=>Io._fromServerResponse(m.auth,S)))})}static _fromUser(m){return new on(m)}getSession(){var m=this;return(0,_.c)(function*(){return ui._fromIdtoken(yield m.user.getIdToken(),m.user)})()}enroll(m,v){var S=this;return(0,_.c)(function*(){const H=m,ne=yield S.getSession(),be=yield Tr(S.user,H._process(S.user.auth,ne,v));return yield S.user._updateTokensIfNecessary(be),S.user.reload()})()}unenroll(m){var v=this;return(0,_.c)(function*(){const S="string"==typeof m?m:m.uid,H=yield v.user.getIdToken();try{const ne=yield Tr(v.user,function Za(T,m){return at(T,"POST","/v2/accounts/mfaEnrollment:withdraw",Ue(T,m))}(v.user.auth,{idToken:H,mfaEnrollmentId:S}));v.enrolledFactors=v.enrolledFactors.filter(({uid:be})=>be!==S),yield v.user._updateTokensIfNecessary(ne),yield v.user.reload()}catch(ne){throw ne}})()}}const hn=new WeakMap;function Eu(T){const m=(0,J.Yj)(T);return hn.has(m)||hn.set(m,on._fromUser(m)),hn.get(m)}const zt="__sak";class ot{constructor(m,v){this.storageRetriever=m,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(zt,"1"),this.storage.removeItem(zt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,v){return this.storage.setItem(m,JSON.stringify(v)),Promise.resolve()}_get(m){const v=this.storage.getItem(m);return Promise.resolve(v?JSON.parse(v):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const yl=(()=>{class T extends ot{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,S)=>this.onStorageEvent(v,S),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Pt(){const T=(0,J.Su)();return fn(T)||rn(T)}()&&function lr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Kr(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const S of Object.keys(this.listeners)){const H=this.storage.getItem(S),ne=this.localCache[S];H!==ne&&v(S,ne,H)}}onStorageEvent(v,S=!1){if(!v.key)return void this.forAllChangedKeys((nt,St,dn)=>{this.notifyListeners(nt,dn)});const H=v.key;if(S?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const nt=this.storage.getItem(H);if(v.newValue!==nt)null!==v.newValue?this.storage.setItem(H,v.newValue):this.storage.removeItem(H);else if(this.localCache[H]===v.newValue&&!S)return}const ne=()=>{const nt=this.storage.getItem(H);!S&&this.localCache[H]===nt||this.notifyListeners(H,nt)},be=this.storage.getItem(H);!function Yn(){return(0,J.Uv)()&&10===document.documentMode}()||be===v.newValue||v.newValue===v.oldValue?ne():setTimeout(ne,10)}notifyListeners(v,S){this.localCache[v]=S;const H=this.listeners[v];if(H)for(const ne of Array.from(H))ne(S&&JSON.parse(S))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,S,H)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:S,newValue:H}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,S){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(S)}_removeListener(v,S){this.listeners[v]&&(this.listeners[v].delete(S),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,S){var H=()=>super._set,ne=this;return(0,_.c)(function*(){yield H().call(ne,v,S),ne.localCache[v]=JSON.stringify(S)})()}_get(v){var S=()=>super._get,H=this;return(0,_.c)(function*(){const ne=yield S().call(H,v);return H.localCache[v]=JSON.stringify(ne),ne})()}_remove(v){var S=()=>super._remove,H=this;return(0,_.c)(function*(){yield S().call(H,v),delete H.localCache[v]})()}}return T.type="LOCAL",T})(),ro=(()=>{class T extends ot{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,S){}_removeListener(v,S){}}return T.type="SESSION",T})();let Ud=(()=>{class T{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const S=this.receivers.find(ne=>ne.isListeningto(v));if(S)return S;const H=new T(v);return this.receivers.push(H),H}isListeningto(v){return this.eventTarget===v}handleEvent(v){var S=this;return(0,_.c)(function*(){const H=v,{eventId:ne,eventType:be,data:nt}=H.data,St=S.handlersMap[be];if(!St?.size)return;H.ports[0].postMessage({status:"ack",eventId:ne,eventType:be});const dn=Array.from(St).map(function(){var tr=(0,_.c)(function*(_o){return _o(H.origin,nt)});return function(_o){return tr.apply(this,arguments)}}()),Pn=yield function Gu(T){return Promise.all(T.map(function(){var m=(0,_.c)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(S){return{fulfilled:!1,reason:S}}});return function(v){return m.apply(this,arguments)}}()))}(dn);H.ports[0].postMessage({status:"done",eventId:ne,eventType:be,response:Pn})})()}_subscribe(v,S){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(S)}_unsubscribe(v,S){this.handlersMap[v]&&S&&this.handlersMap[v].delete(S),(!S||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function go(T="",m=10){let v="";for(let S=0;S<m;S++)v+=Math.floor(10*Math.random());return T+v}class Bd{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,v,S=50){var H=this;return(0,_.c)(function*(){const ne=typeof MessageChannel<"u"?new MessageChannel:null;if(!ne)throw new Error("connection_unavailable");let be,nt;return new Promise((St,dn)=>{const Pn=go("",20);ne.port1.start();const tr=setTimeout(()=>{dn(new Error("unsupported_event"))},S);nt={messageChannel:ne,onMessage(_o){const ms=_o;if(ms.data.eventId===Pn)switch(ms.data.status){case"ack":clearTimeout(tr),be=setTimeout(()=>{dn(new Error("timeout"))},3e3);break;case"done":clearTimeout(be),St(ms.data.response);break;default:clearTimeout(tr),clearTimeout(be),dn(new Error("invalid_response"))}}},H.handlers.add(nt),ne.port1.addEventListener("message",nt.onMessage),H.target.postMessage({eventType:m,eventId:Pn,data:v},[ne.port2])}).finally(()=>{nt&&H.removeMessageHandler(nt)})})()}}function Vr(){return window}function Sn(){return typeof Vr().WorkerGlobalScope<"u"&&"function"==typeof Vr().importScripts}function Yo(){return(Yo=(0,_.c)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const oa="firebaseLocalStorageDb",Na="firebaseLocalStorage",Ii="fbase_key";class Jt{constructor(m){this.request=m}toPromise(){return new Promise((m,v)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function io(T,m){return T.transaction([Na],m?"readwrite":"readonly").objectStore(Na)}function Qo(){const T=indexedDB.open(oa,1);return new Promise((m,v)=>{T.addEventListener("error",()=>{v(T.error)}),T.addEventListener("upgradeneeded",()=>{const S=T.result;try{S.createObjectStore(Na,{keyPath:Ii})}catch(H){v(H)}}),T.addEventListener("success",(0,_.c)(function*(){const S=T.result;S.objectStoreNames.contains(Na)?m(S):(S.close(),yield function ka(){const T=indexedDB.deleteDatabase(oa);return new Jt(T).toPromise()}(),m(yield Qo()))}))})}function Fo(T,m,v){return pr.apply(this,arguments)}function pr(){return(pr=(0,_.c)(function*(T,m,v){const S=io(T,!0).put({[Ii]:m,value:v});return new Jt(S).toPromise()})).apply(this,arguments)}function Jo(){return(Jo=(0,_.c)(function*(T,m){const v=io(T,!1).get(m),S=yield new Jt(v).toPromise();return void 0===S?null:S.value})).apply(this,arguments)}function ri(T,m){const v=io(T,!0).delete(m);return new Jt(v).toPromise()}const tc=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,_.c)(function*(){return v.db||(v.db=yield Qo()),v.db})()}_withRetries(v){var S=this;return(0,_.c)(function*(){let H=0;for(;;)try{const ne=yield S._openDb();return yield v(ne)}catch(ne){if(H++>3)throw ne;S.db&&(S.db.close(),S.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,_.c)(function*(){return Sn()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,_.c)(function*(){v.receiver=Ud._getInstance(function mn(){return Sn()?self:null}()),v.receiver._subscribe("keyChanged",function(){var S=(0,_.c)(function*(H,ne){return{keyProcessed:(yield v._poll()).includes(ne.key)}});return function(H,ne){return S.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var S=(0,_.c)(function*(H,ne){return["keyChanged"]});return function(H,ne){return S.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,_.c)(function*(){var S,H;if(v.activeServiceWorker=yield function Ea(){return Yo.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Bd(v.activeServiceWorker);const ne=yield v.sender._send("ping",{},800);ne&&null!==(S=ne[0])&&void 0!==S&&S.fulfilled&&null!==(H=ne[0])&&void 0!==H&&H.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var S=this;return(0,_.c)(function*(){if(S.sender&&S.activeServiceWorker&&function gi(){var T;return(null===(T=navigator?.serviceWorker)||void 0===T?void 0:T.controller)||null}()===S.activeServiceWorker)try{yield S.sender._send("keyChanged",{key:v},S.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.c)(function*(){try{if(!indexedDB)return!1;const v=yield Qo();return yield Fo(v,zt,"1"),yield ri(v,zt),!0}catch{}return!1})()}_withPendingWrite(v){var S=this;return(0,_.c)(function*(){S.pendingWrites++;try{yield v()}finally{S.pendingWrites--}})()}_set(v,S){var H=this;return(0,_.c)(function*(){return H._withPendingWrite((0,_.c)(function*(){return yield H._withRetries(ne=>Fo(ne,v,S)),H.localCache[v]=S,H.notifyServiceWorker(v)}))})()}_get(v){var S=this;return(0,_.c)(function*(){const H=yield S._withRetries(ne=>function vl(T,m){return Jo.apply(this,arguments)}(ne,v));return S.localCache[v]=H,H})()}_remove(v){var S=this;return(0,_.c)(function*(){return S._withPendingWrite((0,_.c)(function*(){return yield S._withRetries(H=>ri(H,v)),delete S.localCache[v],S.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,_.c)(function*(){const S=yield v._withRetries(be=>{const nt=io(be,!1).getAll();return new Jt(nt).toPromise()});if(!S)return[];if(0!==v.pendingWrites)return[];const H=[],ne=new Set;if(0!==S.length)for(const{fbase_key:be,value:nt}of S)ne.add(be),JSON.stringify(v.localCache[be])!==JSON.stringify(nt)&&(v.notifyListeners(be,nt),H.push(be));for(const be of Object.keys(v.localCache))v.localCache[be]&&!ne.has(be)&&(v.notifyListeners(be,null),H.push(be));return H})()}notifyListeners(v,S){this.localCache[v]=S;const H=this.listeners[v];if(H)for(const ne of Array.from(H))ne(S)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,_.c)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,S){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(S)}_removeListener(v,S){this.listeners[v]&&(this.listeners[v].delete(S),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})(),cs=1e12;class w{constructor(m){this.auth=m,this.counter=cs,this._widgets=new Map}render(m,v){const S=this.counter;return this._widgets.set(S,new M(m,this.auth.name,v||{})),this.counter++,S}reset(m){var v;const S=m||cs;null===(v=this._widgets.get(S))||void 0===v||v.delete(),this._widgets.delete(S)}getResponse(m){var v;return(null===(v=this._widgets.get(m||cs))||void 0===v?void 0:v.getResponse())||""}execute(m){var v=this;return(0,_.c)(function*(){var S;return null===(S=v._widgets.get(m||cs))||void 0===S||S.execute(),""})()}}class M{constructor(m,v,S){this.params=S,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const H="string"==typeof m?document.getElementById(m):m;Me(H,"argument-error",{appName:v}),this.container=H,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function D(T){const m=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let S=0;S<T;S++)m.push(v.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":v}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const x=kr("rcb"),j=new Kt(3e4,6e4);class ee{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Vr().grecaptcha)||void 0===m||!m.render)}load(m,v=""){return Me(function fe(T){return T.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T)}(v),m,"argument-error"),this.shouldResolveImmediately(v)&&Wn(Vr().grecaptcha)?Promise.resolve(Vr().grecaptcha):new Promise((S,H)=>{const ne=Vr().setTimeout(()=>{H(rt(m,"network-request-failed"))},j.get());Vr()[x]=()=>{Vr().clearTimeout(ne),delete Vr()[x];const nt=Vr().grecaptcha;if(!nt||!Wn(nt))return void H(rt(m,"internal-error"));const St=nt.render;nt.render=(dn,Pn)=>{const tr=St(dn,Pn);return this.counter++,tr},this.hostLanguage=v,S(nt)},sr(`${function Vn(){return zn.recaptchaV2Script}()}?${(0,J.ik)({onload:x,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(ne),H(rt(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var v;return!(null===(v=Vr().grecaptcha)||void 0===v||!v.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class it{load(m){return(0,_.c)(function*(){return new w(m)})()}clearedOneInstance(){}}const Je="recaptcha",Gt={theme:"light",type:"image"};class jt{constructor(m,v,S=Object.assign({},Gt)){this.parameters=S,this.type=Je,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pn(m),this.isInvisible="invisible"===this.parameters.size,Me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const H="string"==typeof v?document.getElementById(v):v;Me(H,this.auth,"argument-error"),this.container=H,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new it:new ee,this.validateStartingState()}verify(){var m=this;return(0,_.c)(function*(){m.assertNotDestroyed();const v=yield m.render(),S=m.getAssertedRecaptcha();return S.getResponse(v)||new Promise(ne=>{const be=nt=>{nt&&(m.tokenChangeListeners.delete(be),ne(nt))};m.tokenChangeListeners.add(be),m.isInvisible&&S.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){Me(!this.parameters.sitekey,this.auth,"argument-error"),Me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return v=>{if(this.tokenChangeListeners.forEach(S=>S(v)),"function"==typeof m)m(v);else if("string"==typeof m){const S=Vr()[m];"function"==typeof S&&S(v)}}}assertNotDestroyed(){Me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,_.c)(function*(){if(yield m.init(),!m.widgetId){let v=m.container;if(!m.isInvisible){const S=document.createElement("div");v.appendChild(S),v=S}m.widgetId=m.getAssertedRecaptcha().render(v,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,_.c)(function*(){Me(ke()&&!Sn(),m.auth,"internal-error"),yield function Xn(){let T=null;return new Promise(m=>{"complete"!==document.readyState?(T=()=>m(),window.addEventListener("load",T)):m()}).catch(m=>{throw T&&window.removeEventListener("load",T),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const v=yield function wr(T){return $t.apply(this,arguments)}(m.auth);Me(v,m.auth,"internal-error"),m.parameters.sitekey=v})()}getAssertedRecaptcha(){return Me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ri{constructor(m,v){this.verificationId=m,this.onConfirmation=v}confirm(m){const v=ys._fromVerification(this.verificationId,m);return this.onConfirmation(v)}}function qi(T,m,v){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,_.c)(function*(T,m,v){const S=pn(T),H=yield Wu(S,m,(0,J.Yj)(v));return new Ri(H,ne=>Ma(S,ne))})).apply(this,arguments)}function La(T,m,v){return mo.apply(this,arguments)}function mo(){return(mo=(0,_.c)(function*(T,m,v){const S=(0,J.Yj)(T);yield Uc(!1,S,"phone");const H=yield Wu(S.auth,m,(0,J.Yj)(v));return new Ri(H,ne=>Qs(S,ne))})).apply(this,arguments)}function Do(T,m,v){return zc.apply(this,arguments)}function zc(){return(zc=(0,_.c)(function*(T,m,v){const S=(0,J.Yj)(T),H=yield Wu(S.auth,m,(0,J.Yj)(v));return new Ri(H,ne=>dr(S,ne))})).apply(this,arguments)}function Wu(T,m,v){return Hu.apply(this,arguments)}function Hu(){return Hu=(0,_.c)(function*(T,m,v){var S;const H=yield v.verify();try{let ne;if(Me("string"==typeof H,T,"argument-error"),Me(v.type===Je,T,"argument-error"),ne="string"==typeof m?{phoneNumber:m}:m,"session"in ne){const be=ne.session;if("phoneNumber"in ne)return Me("enroll"===be.type,T,"internal-error"),(yield function Xa(T,m){return at(T,"POST","/v2/accounts/mfaEnrollment:start",Ue(T,m))}(T,{idToken:be.credential,phoneEnrollmentInfo:{phoneNumber:ne.phoneNumber,recaptchaToken:H}})).phoneSessionInfo.sessionInfo;{Me("signin"===be.type,T,"internal-error");const nt=(null===(S=ne.multiFactorHint)||void 0===S?void 0:S.uid)||ne.multiFactorUid;return Me(nt,T,"missing-multi-factor-info"),(yield function yc(T,m){return at(T,"POST","/v2/accounts/mfaSignIn:start",Ue(T,m))}(T,{mfaPendingCredential:be.credential,mfaEnrollmentId:nt,phoneSignInInfo:{recaptchaToken:H}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:be}=yield function Ro(T,m){return Rs.apply(this,arguments)}(T,{phoneNumber:ne.phoneNumber,recaptchaToken:H});return be}}finally{v._reset()}}),Hu.apply(this,arguments)}function gp(T,m){return qc.apply(this,arguments)}function qc(){return(qc=(0,_.c)(function*(T,m){yield os((0,J.Yj)(T),m)})).apply(this,arguments)}let ir=(()=>{class T{constructor(v){this.providerId=T.PROVIDER_ID,this.auth=pn(v)}verifyPhoneNumber(v,S){return Wu(this.auth,v,(0,J.Yj)(S))}static credential(v,S){return ys._fromVerification(v,S)}static credentialFromResult(v){return T.credentialFromTaggedObject(v)}static credentialFromError(v){return T.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:S,temporaryProof:H}=v;return S&&H?ys._fromTokenResponse(S,H):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function xr(T,m){return m?mt(m):(Me(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class jd extends $r{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return bi(m,this._buildIdpRequest())}_linkToIdToken(m,v){return bi(m,this._buildIdpRequest(v))}_getReauthenticationResolver(m){return bi(m,this._buildIdpRequest())}_buildIdpRequest(m){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(v.idToken=m),v}}function Kh(T){return Ho(T.auth,new jd(T),T.bypassAuthState)}function $d(T){const{auth:m,user:v}=T;return Me(v,m,"internal-error"),Sr(v,new jd(T),T.bypassAuthState)}function Gd(T){return sd.apply(this,arguments)}function sd(){return(sd=(0,_.c)(function*(T){const{auth:m,user:v}=T;return Me(v,m,"internal-error"),os(v,new jd(T),T.bypassAuthState)})).apply(this,arguments)}class El{constructor(m,v,S,H,ne=!1){this.auth=m,this.resolver=S,this.user=H,this.bypassAuthState=ne,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var m=this;return new Promise(function(){var v=(0,_.c)(function*(S,H){m.pendingPromise={resolve:S,reject:H};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(ne){m.reject(ne)}});return function(S,H){return v.apply(this,arguments)}}())}onAuthEvent(m){var v=this;return(0,_.c)(function*(){const{urlResponse:S,sessionId:H,postBody:ne,tenantId:be,error:nt,type:St}=m;if(nt)return void v.reject(nt);const dn={auth:v.auth,requestUri:S,sessionId:H,tenantId:be||void 0,postBody:ne||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(St)(dn))}catch(Pn){v.reject(Pn)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Kh;case"linkViaPopup":case"linkViaRedirect":return Gd;case"reauthViaPopup":case"reauthViaRedirect":return $d;default:Ze(this.auth,"internal-error")}}resolve(m){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const od=new Kt(2e3,1e4);function Wd(T,m,v){return oo.apply(this,arguments)}function oo(){return(oo=(0,_.c)(function*(T,m,v){const S=pn(T);Ot(T,m,Li);const H=xr(S,v);return new Kc(S,"signInViaPopup",m,H).executeNotNull()})).apply(this,arguments)}function zu(T,m,v){return qu.apply(this,arguments)}function qu(){return(qu=(0,_.c)(function*(T,m,v){const S=(0,J.Yj)(T);Ot(S.auth,m,Li);const H=xr(S.auth,v);return new Kc(S.auth,"reauthViaPopup",m,H,S).executeNotNull()})).apply(this,arguments)}function Yh(T,m,v){return vc.apply(this,arguments)}function vc(){return(vc=(0,_.c)(function*(T,m,v){const S=(0,J.Yj)(T);Ot(S.auth,m,Li);const H=xr(S.auth,v);return new Kc(S.auth,"linkViaPopup",m,H,S).executeNotNull()})).apply(this,arguments)}let Kc=(()=>{class T extends El{constructor(v,S,H,ne,be){super(v,S,ne,be),this.provider=H,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var v=this;return(0,_.c)(function*(){const S=yield v.execute();return Me(S,v.auth,"internal-error"),S})()}onExecution(){var v=this;return(0,_.c)(function*(){bt(1===v.filter.length,"Popup operations only handle one event");const S=go();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],S),v.authWindow.associatedEvent=S,v.resolver._originValidation(v.auth).catch(H=>{v.reject(H)}),v.resolver._isIframeWebStorageSupported(v.auth,H=>{H||v.reject(rt(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(rt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const v=()=>{var S,H;this.pollId=null!==(H=null===(S=this.authWindow)||void 0===S?void 0:S.window)&&void 0!==H&&H.closed?window.setTimeout(()=>{this.pollId=null,this.reject(rt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,od.get())};v()}}return T.currentPopupAction=null,T})();const Cu="pendingRedirect",Yc=new Map;class Gs extends El{constructor(m,v,S=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,S),this.eventId=null}execute(){var m=()=>super.execute,v=this;return(0,_.c)(function*(){let S=Yc.get(v.auth._key());if(!S){try{const ne=(yield function Hd(T,m){return Ia.apply(this,arguments)}(v.resolver,v.auth))?yield m().call(v):null;S=()=>Promise.resolve(ne)}catch(H){S=()=>Promise.reject(H)}Yc.set(v.auth._key(),S)}return v.bypassAuthState||Yc.set(v.auth._key(),()=>Promise.resolve(null)),S()})()}onAuthEvent(m){var v=()=>super.onAuthEvent,S=this;return(0,_.c)(function*(){if("signInViaRedirect"===m.type)return v().call(S,m);if("unknown"!==m.type){if(m.eventId){const H=yield S.auth._redirectUserForId(m.eventId);if(H)return S.user=H,v().call(S,m);S.resolve(null)}}else S.resolve(null)})()}onExecution(){return(0,_.c)(function*(){})()}cleanUp(){}}function Ia(){return(Ia=(0,_.c)(function*(T,m){const v=Ku(m),S=cr(T);if(!(yield S._isAvailable()))return!1;const H="true"===(yield S._get(v));return yield S._remove(v),H})).apply(this,arguments)}function nc(T,m){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,_.c)(function*(T,m){return cr(T)._set(Ku(m),"true")})).apply(this,arguments)}function Ca(){Yc.clear()}function Vs(T,m){Yc.set(T._key(),m)}function cr(T){return mt(T._redirectPersistence)}function Ku(T){return Cn(Cu,T.config.apiKey,T.name)}function mr(T,m,v){return function ao(T,m,v){return Qc.apply(this,arguments)}(T,m,v)}function Qc(){return(Qc=(0,_.c)(function*(T,m,v){const S=pn(T);Ot(T,m,Li),yield S._initializationPromise;const H=xr(S,v);return yield nc(H,S),H._openRedirect(S,m,"signInViaRedirect")})).apply(this,arguments)}function Ec(T,m,v){return function ws(T,m,v){return ad.apply(this,arguments)}(T,m,v)}function ad(){return(ad=(0,_.c)(function*(T,m,v){const S=(0,J.Yj)(T);Ot(S.auth,m,Li),yield S.auth._initializationPromise;const H=xr(S.auth,v);yield nc(H,S.auth);const ne=yield gs(S);return H._openRedirect(S.auth,m,"reauthViaRedirect",ne)})).apply(this,arguments)}function Ic(T,m,v){return function ps(T,m,v){return aa.apply(this,arguments)}(T,m,v)}function aa(){return(aa=(0,_.c)(function*(T,m,v){const S=(0,J.Yj)(T);Ot(S.auth,m,Li),yield S.auth._initializationPromise;const H=xr(S.auth,v);yield Uc(!1,S,m.providerId),yield nc(H,S.auth);const ne=yield gs(S);return H._openRedirect(S.auth,m,"linkViaRedirect",ne)})).apply(this,arguments)}function Cc(T,m){return wu.apply(this,arguments)}function wu(){return(wu=(0,_.c)(function*(T,m){return yield pn(T)._initializationPromise,rc(T,m,!1)})).apply(this,arguments)}function rc(T,m){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,_.c)(function*(T,m,v=!1){const S=pn(T),H=xr(S,m),be=yield new Gs(S,H,v).execute();return be&&!v&&(delete be.user._redirectEventId,yield S._persistUserIfCurrent(be.user),yield S._setRedirectUser(null,m)),be})).apply(this,arguments)}function gs(T){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,_.c)(function*(T){const m=go(`${T.uid}:::`);return T._redirectEventId=m,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),m})).apply(this,arguments)}class Ts{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let v=!1;return this.consumers.forEach(S=>{this.isEventForConsumer(m,S)&&(v=!0,this.sendToConsumer(m,S),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Va(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vo(T);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=m,v=!0)),v}sendToConsumer(m,v){var S;if(m.error&&!Vo(m)){const H=(null===(S=m.error.code)||void 0===S?void 0:S.split("auth/")[1])||"internal-error";v.onError(rt(this.auth,H))}else v.onAuthEvent(m)}isEventForConsumer(m,v){const S=null===v.eventId||!!m.eventId&&m.eventId===v.eventId;return v.filter.includes(m.type)&&S}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(co(m))}saveEventToCache(m){this.cachedEventUids.add(co(m)),this.lastProcessedEventTime=Date.now()}}function co(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(m=>m).join("-")}function Vo({type:T,error:m}){return"unknown"===T&&"auth/no-auth-event"===m?.code}function Yu(T){return wa.apply(this,arguments)}function wa(){return(wa=(0,_.c)(function*(T,m={}){return at(T,"GET","/v1/projects",m)})).apply(this,arguments)}const cd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wc=/^https?/;function ca(){return(ca=(0,_.c)(function*(T){if(T.config.emulator)return;const{authorizedDomains:m}=yield Yu(T);for(const v of m)try{if(Ua(v))return}catch{}Ze(T,"unauthorized-domain")})).apply(this,arguments)}function Ua(T){const m=Ut(),{protocol:v,hostname:S}=new URL(m);if(T.startsWith("chrome-extension://")){const be=new URL(T);return""===be.hostname&&""===S?"chrome-extension:"===v&&T.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===v&&be.hostname===S}if(!wc.test(v))return!1;if(cd.test(T))return S===T;const H=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+H+"|"+H+")$","i").test(S)}const zd=new Kt(3e4,6e4);function ud(){const T=Vr().___jsl;if(T?.H)for(const m of Object.keys(T.H))if(T.H[m].r=T.H[m].r||[],T.H[m].L=T.H[m].L||[],T.H[m].r=[...T.H[m].L],T.CP)for(let v=0;v<T.CP.length;v++)T.CP[v]=null}let ua=null;const Qh=new Kt(5e3,15e3),Tc="__/auth/iframe",Au="emulator/auth/iframe",Il={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qd(T){const m=T.config;Me(m.authDomain,T,"auth-domain-config-required");const v=m.emulator?sn(m,Au):`https://${T.config.authDomain}/${Tc}`,S={apiKey:m.apiKey,appName:T.name,v:I.SDK_VERSION},H=Zi.get(T.config.apiHost);H&&(S.eid=H);const ne=T._getFrameworks();return ne.length&&(S.fw=ne.join(",")),`${v}?${(0,J.ik)(S).slice(1)}`}function Ao(){return Ao=(0,_.c)(function*(T){const m=yield function ld(T){return ua=ua||function Du(T){return new Promise((m,v)=>{var S,H,ne;function be(){ud(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{ud(),v(rt(T,"network-request-failed"))},timeout:zd.get()})}if(null!==(H=null===(S=Vr().gapi)||void 0===S?void 0:S.iframes)&&void 0!==H&&H.Iframe)m(gapi.iframes.getContext());else{if(null===(ne=Vr().gapi)||void 0===ne||!ne.load){const nt=kr("iframefcb");return Vr()[nt]=()=>{gapi.load?be():v(rt(T,"network-request-failed"))},sr(`${function Ti(){return zn.gapiScript}()}?onload=${nt}`).catch(St=>v(St))}be()}}).catch(m=>{throw ua=null,m})}(T),ua}(T),v=Vr().gapi;return Me(v,T,"internal-error"),m.open({where:document.body,url:qd(T),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Il,dontclear:!0},S=>new Promise(function(){var H=(0,_.c)(function*(ne,be){yield S.restyle({setHideOnLeave:!1});const nt=rt(T,"network-request-failed"),St=Vr().setTimeout(()=>{be(nt)},Qh.get());function dn(){Vr().clearTimeout(St),ne(S)}S.ping(dn).then(dn,()=>{be(nt)})});return function(ne,be){return H.apply(this,arguments)}}()))}),Ao.apply(this,arguments)}const Su={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class br{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ac="__/auth/handler",Sc="emulator/auth/handler",Ju=encodeURIComponent("fac");function sc(T,m,v,S,H,ne){return oc.apply(this,arguments)}function oc(){return(oc=(0,_.c)(function*(T,m,v,S,H,ne){Me(T.config.authDomain,T,"auth-domain-config-required"),Me(T.config.apiKey,T,"invalid-api-key");const be={apiKey:T.config.apiKey,appName:T.name,authType:v,redirectUrl:S,v:I.SDK_VERSION,eventId:H};if(m instanceof Li){m.setDefaultLanguage(T.languageCode),be.providerId=m.providerId||"",(0,J.t7)(m.getCustomParameters())||(be.customParameters=JSON.stringify(m.getCustomParameters()));for(const[Pn,tr]of Object.entries(ne||{}))be[Pn]=tr}if(m instanceof sa){const Pn=m.getScopes().filter(tr=>""!==tr);Pn.length>0&&(be.scopes=Pn.join(","))}T.tenantId&&(be.tid=T.tenantId);const nt=be;for(const Pn of Object.keys(nt))void 0===nt[Pn]&&delete nt[Pn];const St=yield T._getAppCheckToken(),dn=St?`#${Ju}=${encodeURIComponent(St)}`:"";return`${function Kd({config:T}){return T.emulator?sn(T,Sc):`https://${T.authDomain}/${Ac}`}(T)}?${(0,J.ik)(nt).slice(1)}${dn}`})).apply(this,arguments)}const Cl="webStorageSupport",hd=class wl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ro,this._completeRedirectFn=rc,this._overrideRedirectResult=Vs}_openPopup(m,v,S,H){var ne=this;return(0,_.c)(function*(){var be;bt(null===(be=ne.eventManagers[m._key()])||void 0===be?void 0:be.manager,"_initialize() not called before _openPopup()");const nt=yield sc(m,v,S,Ut(),H);return function Wr(T,m,v,S=500,H=600){const ne=Math.max((window.screen.availHeight-H)/2,0).toString(),be=Math.max((window.screen.availWidth-S)/2,0).toString();let nt="";const St=Object.assign(Object.assign({},Su),{width:S.toString(),height:H.toString(),top:ne,left:be}),dn=(0,J.Su)().toLowerCase();v&&(nt=Ln(dn)?"_blank":v),Dr(dn)&&(m=m||"http://localhost",St.scrollbars="yes");const Pn=Object.entries(St).reduce((_o,[ms,tu])=>`${_o}${ms}=${tu},`,"");if(function Hn(T=(0,J.Su)()){var m;return rn(T)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(dn)&&"_self"!==nt)return function Da(T,m){const v=document.createElement("a");v.href=T,v.target=m;const S=document.createEvent("MouseEvent");S.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(S)}(m||"",nt),new br(null);const tr=window.open(m||"",nt,Pn);Me(tr,T,"popup-blocked");try{tr.focus()}catch{}return new br(tr)}(m,nt,go())})()}_openRedirect(m,v,S,H){var ne=this;return(0,_.c)(function*(){return yield ne._originValidation(m),function ec(T){Vr().location.href=T}(yield sc(m,v,S,Ut(),H)),new Promise(()=>{})})()}_initialize(m){const v=m._key();if(this.eventManagers[v]){const{manager:H,promise:ne}=this.eventManagers[v];return H?Promise.resolve(H):(bt(ne,"If manager is not set, promise should be"),ne)}const S=this.initAndGetManager(m);return this.eventManagers[v]={promise:S},S.catch(()=>{delete this.eventManagers[v]}),S}initAndGetManager(m){var v=this;return(0,_.c)(function*(){const S=yield function Vi(T){return Ao.apply(this,arguments)}(m),H=new Ts(m);return S.register("authEvent",ne=>(Me(ne?.authEvent,m,"invalid-auth-event"),{status:H.onEvent(ne.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[m._key()]={manager:H},v.iframes[m._key()]=S,H})()}_isIframeWebStorageSupported(m,v){this.iframes[m._key()].send(Cl,{type:Cl},H=>{var ne;const be=null===(ne=H?.[0])||void 0===ne?void 0:ne[Cl];void 0!==be&&v(!!be),Ze(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const v=m._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Ta(T){return ca.apply(this,arguments)}(m)),this.originValidationPromises[v]}get _shouldInitProactively(){return Kr()||fn()||rn()}};class Xc{constructor(m){this.factorId=m}_process(m,v,S){switch(v.type){case"enroll":return this._finalizeEnroll(m,v.credential,S);case"signin":return this._finalizeSignIn(m,v.credential);default:return Ct("unexpected MultiFactorSessionType")}}}class Pu extends Xc{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Pu(m)}_finalizeEnroll(m,v,S){return function Lt(T,m){return at(T,"POST","/v2/accounts/mfaEnrollment:finalize",Ue(T,m))}(m,{idToken:v,displayName:S,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,v){return function so(T,m){return at(T,"POST","/v2/accounts/mfaSignIn:finalize",Ue(T,m))}(m,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ac=(()=>{class T{constructor(){}static assertion(v){return Pu._fromCredential(v)}}return T.FACTOR_ID="phone",T})();var Zc="@firebase/auth";class eu{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var v=this;return(0,_.c)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const v=this.auth.onIdTokenChanged(S=>{m(S?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,v),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const v=this.internalListeners.get(m);v&&(this.internalListeners.delete(m),v(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Tl=(0,J.sX)("authIdTokenMaxAge")||300;let $a=null;const Dl=T=>function(){var m=(0,_.c)(function*(v){const S=v&&(yield v.getIdTokenResult()),H=S&&((new Date).getTime()-Date.parse(S.issuedAtTime))/1e3;if(H&&H>Tl)return;const ne=S?.token;$a!==ne&&($a=ne,yield fetch(T,{method:ne?"POST":"DELETE",headers:ne?{Authorization:`Bearer ${ne}`}:{}}))});return function(v){return m.apply(this,arguments)}}();function cc(T=(0,I.getApp)()){const m=(0,I._getProvider)(T,"auth");if(m.isInitialized())return m.getImmediate();const v=function Ai(T,m){const v=(0,I._getProvider)(T,"auth");if(v.isInitialized()){const H=v.getImmediate(),ne=v.getOptions();if((0,J.IN)(ne,m??{}))return H;Ze(H,"already-initialized")}return v.initialize({options:m})}(T,{popupRedirectResolver:hd,persistence:[tc,yl,ro]}),S=(0,J.sX)("authTokenSyncURL");if(S){const ne=Dl(S);(function Kn(T,m,v){(0,J.Yj)(T).beforeAuthStateChanged(m,v)})(v,ne,()=>ne(v.currentUser)),function ni(T,m,v,S){(0,J.Yj)(T).onIdTokenChanged(m,v,S)}(v,be=>ne(be))}const H=(0,J.EB)("auth");return H&&ji(v,`http://${H}`),v}(function vr(T){zn=T})({loadJS:T=>new Promise((m,v)=>{const S=document.createElement("script");S.setAttribute("src",T),S.onload=m,S.onerror=H=>{const ne=rt("internal-error");ne.customData=H,v(ne)},S.type="text/javascript",S.charset="UTF-8",function Ru(){var T,m;return null!==(m=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==m?m:document}().appendChild(S)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Sa(T){(0,I._registerComponent)(new Ee.Yl("auth",(m,{options:v})=>{const S=m.getProvider("app").getImmediate(),H=m.getProvider("heartbeat"),ne=m.getProvider("app-check-internal"),{apiKey:be,authDomain:nt}=S.options;Me(be&&!be.includes(":"),"invalid-api-key",{appName:S.name});const St={apiKey:be,authDomain:nt,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:se(T)},dn=new qt(S,H,ne,St);return function $o(T,m){const v=m?.persistence||[],S=(Array.isArray(v)?v:[v]).map(mt);m?.errorMap&&T._updateErrorMap(m.errorMap),T._initializeWithPersistence(S,m?.popupRedirectResolver)}(dn,v),dn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,v,S)=>{m.getProvider("auth-internal").initialize()})),(0,I._registerComponent)(new Ee.Yl("auth-internal",m=>{const v=pn(m.getProvider("auth").getImmediate());return new eu(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,I.registerVersion)(Zc,"1.6.0",function Xu(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(T)),(0,I.registerVersion)(Zc,"1.6.0","esm2017")}("Browser")},7144:(Xt,$e,V)=>{V.d($e,{A3:()=>He,AL:()=>ke,AV:()=>Me,AX:()=>Yt,Al:()=>Ee,Cc:()=>Ut,EB:()=>ht,GI:()=>xt,IN:()=>zr,L0:()=>Wn,O0:()=>ue,OS:()=>Mr,Su:()=>At,UR:()=>st,Uc:()=>J,Uj:()=>Gn,Uv:()=>ct,WW:()=>le,Wg:()=>je,Ww:()=>Oe,Y7:()=>Rr,Y9:()=>I,YD:()=>Ot,Yd:()=>Ze,Yj:()=>Fe,aw:()=>vi,c9:()=>Be,i:()=>De,iQ:()=>bn,ik:()=>yr,iw:()=>Kt,kF:()=>rr,kH:()=>$t,kx:()=>at,my:()=>yn,o5:()=>Ht,o9:()=>me,on:()=>_t,qS:()=>In,qk:()=>sn,sX:()=>rt,t7:()=>wr,uH:()=>bt,yW:()=>Ct,yy:()=>Re});const _={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},J=function(re,ae){if(!re)throw I(ae)},I=function(re){return new Error("Firebase Database ("+_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+re)},O=function(re){const ae=[];let X=0;for(let Q=0;Q<re.length;Q++){let Z=re.charCodeAt(Q);Z<128?ae[X++]=Z:Z<2048?(ae[X++]=Z>>6|192,ae[X++]=63&Z|128):55296==(64512&Z)&&Q+1<re.length&&56320==(64512&re.charCodeAt(Q+1))?(Z=65536+((1023&Z)<<10)+(1023&re.charCodeAt(++Q)),ae[X++]=Z>>18|240,ae[X++]=Z>>12&63|128,ae[X++]=Z>>6&63|128,ae[X++]=63&Z|128):(ae[X++]=Z>>12|224,ae[X++]=Z>>6&63|128,ae[X++]=63&Z|128)}return ae},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(re,ae){if(!Array.isArray(re))throw Error("encodeByteArray takes an array as a parameter");this.init_();const X=ae?this.byteToCharMapWebSafe_:this.byteToCharMap_,Q=[];for(let Z=0;Z<re.length;Z+=3){const Ne=re[Z],mt=Z+1<re.length,Qt=mt?re[Z+1]:0,En=Z+2<re.length,Cn=En?re[Z+2]:0;let Dr=(15&Qt)<<2|Cn>>6,fn=63&Cn;En||(fn=64,mt||(Dr=64)),Q.push(X[Ne>>2],X[(3&Ne)<<4|Qt>>4],X[Dr],X[fn])}return Q.join("")},encodeString(re,ae){return this.HAS_NATIVE_SUPPORT&&!ae?btoa(re):this.encodeByteArray(O(re),ae)},decodeString(re,ae){return this.HAS_NATIVE_SUPPORT&&!ae?atob(re):function(re){const ae=[];let X=0,Q=0;for(;X<re.length;){const Z=re[X++];if(Z<128)ae[Q++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const Ne=re[X++];ae[Q++]=String.fromCharCode((31&Z)<<6|63&Ne)}else if(Z>239&&Z<365){const En=((7&Z)<<18|(63&re[X++])<<12|(63&re[X++])<<6|63&re[X++])-65536;ae[Q++]=String.fromCharCode(55296+(En>>10)),ae[Q++]=String.fromCharCode(56320+(1023&En))}else{const Ne=re[X++],mt=re[X++];ae[Q++]=String.fromCharCode((15&Z)<<12|(63&Ne)<<6|63&mt)}}return ae.join("")}(this.decodeStringToByteArray(re,ae))},decodeStringToByteArray(re,ae){this.init_();const X=ae?this.charToByteMapWebSafe_:this.charToByteMap_,Q=[];for(let Z=0;Z<re.length;){const Ne=X[re.charAt(Z++)],Qt=Z<re.length?X[re.charAt(Z)]:0;++Z;const Cn=Z<re.length?X[re.charAt(Z)]:64;++Z;const en=Z<re.length?X[re.charAt(Z)]:64;if(++Z,null==Ne||null==Qt||null==Cn||null==en)throw new Ie;Q.push(Ne<<2|Qt>>4),64!==Cn&&(Q.push(Qt<<4&240|Cn>>2),64!==en&&Q.push(Cn<<6&192|en))}return Q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let re=0;re<this.ENCODED_VALS.length;re++)this.byteToCharMap_[re]=this.ENCODED_VALS.charAt(re),this.charToByteMap_[this.byteToCharMap_[re]]=re,this.byteToCharMapWebSafe_[re]=this.ENCODED_VALS_WEBSAFE.charAt(re),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[re]]=re,re>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(re)]=re,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(re)]=re)}}};class Ie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Be=function(re){const ae=O(re);return Ee.encodeByteArray(ae,!0)},je=function(re){return Be(re).replace(/\./g,"")},le=function(re){try{return Ee.decodeString(re,!0)}catch(ae){console.error("base64Decode failed: ",ae)}return null};function ue(re){return Oe(void 0,re)}function Oe(re,ae){if(!(ae instanceof Object))return ae;switch(ae.constructor){case Date:return new Date(ae.getTime());case Object:void 0===re&&(re={});break;case Array:re=[];break;default:return ae}for(const X in ae)!ae.hasOwnProperty(X)||!Se(X)||(re[X]=Oe(re[X],ae[X]));return re}function Se(re){return"__proto__"!==re}const Ce=()=>{try{return function Le(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const re=process.env.__FIREBASE_DEFAULTS__;return re?JSON.parse(re):void 0})()||(()=>{if(typeof document>"u")return;let re;try{re=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ae=re&&le(re[1]);return ae&&JSON.parse(ae)})()}catch(re){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${re}`)}},ht=re=>{var ae,X;return null===(X=null===(ae=Ce())||void 0===ae?void 0:ae.emulatorHosts)||void 0===X?void 0:X[re]},_t=re=>{const ae=ht(re);if(!ae)return;const X=ae.lastIndexOf(":");if(X<=0||X+1===ae.length)throw new Error(`Invalid host ${ae} with no separate hostname and port!`);const Q=parseInt(ae.substring(X+1),10);return"["===ae[0]?[ae.substring(1,X-1),Q]:[ae.substring(0,X),Q]},Ze=()=>{var re;return null===(re=Ce())||void 0===re?void 0:re.config},rt=re=>{var ae;return null===(ae=Ce())||void 0===ae?void 0:ae[`_${re}`]};class me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ae,X)=>{this.resolve=ae,this.reject=X})}wrapCallback(ae){return(X,Q)=>{X?this.reject(X):this.resolve(Q),"function"==typeof ae&&(this.promise.catch(()=>{}),1===ae.length?ae(X):ae(X,Q))}}}function Ot(re,ae){if(re.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Q=ae||"demo-project",Z=re.iat||0,Ne=re.sub||re.user_id;if(!Ne)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${Q}`,aud:Q,iat:Z,exp:Z+3600,auth_time:Z,sub:Ne,user_id:Ne,firebase:{sign_in_provider:"custom",identities:{}}},re);return[je(JSON.stringify({alg:"none",type:"JWT"})),je(JSON.stringify(mt)),""].join(".")}function At(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Me(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(At())}function Ct(){var re;const ae=null===(re=Ce())||void 0===re?void 0:re.forceEnvironment;if("node"===ae)return!0;if("browser"===ae)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function bt(){return"object"==typeof self&&self.self===self}function Ut(){const re="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof re&&void 0!==re.id}function ke(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ct(){const re=At();return re.indexOf("MSIE ")>=0||re.indexOf("Trident/")>=0}function Kt(){return!0===_.NODE_CLIENT||!0===_.NODE_ADMIN}function sn(){return!Ct()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Re(){try{return"object"==typeof indexedDB}catch{return!1}}function He(){return new Promise((re,ae)=>{try{let X=!0;const Q="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(Q);Z.onsuccess=()=>{Z.result.close(),X||self.indexedDB.deleteDatabase(Q),re(!0)},Z.onupgradeneeded=()=>{X=!1},Z.onerror=()=>{var Ne;ae((null===(Ne=Z.error)||void 0===Ne?void 0:Ne.message)||"")}}catch(X){ae(X)}})}class at extends Error{constructor(ae,X,Q){super(X),this.code=ae,this.customData=Q,this.name="FirebaseError",Object.setPrototypeOf(this,at.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,st.prototype.create)}}class st{constructor(ae,X,Q){this.service=ae,this.serviceName=X,this.errors=Q}create(ae,...X){const Q=X[0]||{},Z=`${this.service}/${ae}`,Ne=this.errors[ae],mt=Ne?function Dt(re,ae){return re.replace(ze,(X,Q)=>{const Z=ae[Q];return null!=Z?String(Z):`<${Q}?>`})}(Ne,Q):"Error";return new at(Z,`${this.serviceName}: ${mt} (${Z}).`,Q)}}const ze=/\{\$([^}]+)}/g;function xt(re){return JSON.parse(re)}function De(re){return JSON.stringify(re)}const dt=function(re){let ae={},X={},Q={},Z="";try{const Ne=re.split(".");ae=xt(le(Ne[0])||""),X=xt(le(Ne[1])||""),Z=Ne[2],Q=X.d||{},delete X.d}catch{}return{header:ae,claims:X,data:Q,signature:Z}},Yt=function(re){const X=dt(re).claims;return!!X&&"object"==typeof X&&X.hasOwnProperty("iat")},Wn=function(re){const ae=dt(re).claims;return"object"==typeof ae&&!0===ae.admin};function Rr(re,ae){return Object.prototype.hasOwnProperty.call(re,ae)}function Ht(re,ae){if(Object.prototype.hasOwnProperty.call(re,ae))return re[ae]}function wr(re){for(const ae in re)if(Object.prototype.hasOwnProperty.call(re,ae))return!1;return!0}function $t(re,ae,X){const Q={};for(const Z in re)Object.prototype.hasOwnProperty.call(re,Z)&&(Q[Z]=ae.call(X,re[Z],Z,re));return Q}function zr(re,ae){if(re===ae)return!0;const X=Object.keys(re),Q=Object.keys(ae);for(const Z of X){if(!Q.includes(Z))return!1;const Ne=re[Z],mt=ae[Z];if(kn(Ne)&&kn(mt)){if(!zr(Ne,mt))return!1}else if(Ne!==mt)return!1}for(const Z of Q)if(!X.includes(Z))return!1;return!0}function kn(re){return null!==re&&"object"==typeof re}function yr(re){const ae=[];for(const[X,Q]of Object.entries(re))Array.isArray(Q)?Q.forEach(Z=>{ae.push(encodeURIComponent(X)+"="+encodeURIComponent(Z))}):ae.push(encodeURIComponent(X)+"="+encodeURIComponent(Q));return ae.length?"&"+ae.join("&"):""}function vi(re){const ae={};return re.replace(/^\?/,"").split("&").forEach(Q=>{if(Q){const[Z,Ne]=Q.split("=");ae[decodeURIComponent(Z)]=decodeURIComponent(Ne)}}),ae}function rr(re){const ae=re.indexOf("?");if(!ae)return"";const X=re.indexOf("#",ae);return re.substring(ae,X>0?X:void 0)}class In{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ae=1;ae<this.blockSize;++ae)this.pad_[ae]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ae,X){X||(X=0);const Q=this.W_;if("string"==typeof ae)for(let en=0;en<16;en++)Q[en]=ae.charCodeAt(X)<<24|ae.charCodeAt(X+1)<<16|ae.charCodeAt(X+2)<<8|ae.charCodeAt(X+3),X+=4;else for(let en=0;en<16;en++)Q[en]=ae[X]<<24|ae[X+1]<<16|ae[X+2]<<8|ae[X+3],X+=4;for(let en=16;en<80;en++){const Dr=Q[en-3]^Q[en-8]^Q[en-14]^Q[en-16];Q[en]=4294967295&(Dr<<1|Dr>>>31)}let Cn,On,Z=this.chain_[0],Ne=this.chain_[1],mt=this.chain_[2],Qt=this.chain_[3],En=this.chain_[4];for(let en=0;en<80;en++){en<40?en<20?(Cn=Qt^Ne&(mt^Qt),On=1518500249):(Cn=Ne^mt^Qt,On=1859775393):en<60?(Cn=Ne&mt|Qt&(Ne|mt),On=2400959708):(Cn=Ne^mt^Qt,On=3395469782);const Dr=(Z<<5|Z>>>27)+Cn+En+On+Q[en]&4294967295;En=Qt,Qt=mt,mt=4294967295&(Ne<<30|Ne>>>2),Ne=Z,Z=Dr}this.chain_[0]=this.chain_[0]+Z&4294967295,this.chain_[1]=this.chain_[1]+Ne&4294967295,this.chain_[2]=this.chain_[2]+mt&4294967295,this.chain_[3]=this.chain_[3]+Qt&4294967295,this.chain_[4]=this.chain_[4]+En&4294967295}update(ae,X){if(null==ae)return;void 0===X&&(X=ae.length);const Q=X-this.blockSize;let Z=0;const Ne=this.buf_;let mt=this.inbuf_;for(;Z<X;){if(0===mt)for(;Z<=Q;)this.compress_(ae,Z),Z+=this.blockSize;if("string"==typeof ae){for(;Z<X;)if(Ne[mt]=ae.charCodeAt(Z),++mt,++Z,mt===this.blockSize){this.compress_(Ne),mt=0;break}}else for(;Z<X;)if(Ne[mt]=ae[Z],++mt,++Z,mt===this.blockSize){this.compress_(Ne),mt=0;break}}this.inbuf_=mt,this.total_+=X}digest(){const ae=[];let X=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Z=this.blockSize-1;Z>=56;Z--)this.buf_[Z]=255&X,X/=256;this.compress_(this.buf_);let Q=0;for(let Z=0;Z<5;Z++)for(let Ne=24;Ne>=0;Ne-=8)ae[Q]=this.chain_[Z]>>Ne&255,++Q;return ae}}function yn(re,ae){const X=new ii(re,ae);return X.subscribe.bind(X)}class ii{constructor(ae,X){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=X,this.task.then(()=>{ae(this)}).catch(Q=>{this.error(Q)})}next(ae){this.forEachObserver(X=>{X.next(ae)})}error(ae){this.forEachObserver(X=>{X.error(ae)}),this.close(ae)}complete(){this.forEachObserver(ae=>{ae.complete()}),this.close()}subscribe(ae,X,Q){let Z;if(void 0===ae&&void 0===X&&void 0===Q)throw new Error("Missing Observer.");Z=function qr(re,ae){if("object"!=typeof re||null===re)return!1;for(const X of ae)if(X in re&&"function"==typeof re[X])return!0;return!1}(ae,["next","error","complete"])?ae:{next:ae,error:X,complete:Q},void 0===Z.next&&(Z.next=Bi),void 0===Z.error&&(Z.error=Bi),void 0===Z.complete&&(Z.complete=Bi);const Ne=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch{}}),this.observers.push(Z),Ne}unsubscribeOne(ae){void 0===this.observers||void 0===this.observers[ae]||(delete this.observers[ae],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ae){if(!this.finalized)for(let X=0;X<this.observers.length;X++)this.sendOne(X,ae)}sendOne(ae,X){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ae])try{X(this.observers[ae])}catch(Q){typeof console<"u"&&console.error&&console.error(Q)}})}close(ae){this.finalized||(this.finalized=!0,void 0!==ae&&(this.finalError=ae),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bi(){}function bn(re,ae){return`${re} failed: ${ae} argument `}const Mr=function(re){const ae=[];let X=0;for(let Q=0;Q<re.length;Q++){let Z=re.charCodeAt(Q);if(Z>=55296&&Z<=56319){const Ne=Z-55296;Q++,J(Q<re.length,"Surrogate pair missing trail surrogate."),Z=65536+(Ne<<10)+(re.charCodeAt(Q)-56320)}Z<128?ae[X++]=Z:Z<2048?(ae[X++]=Z>>6|192,ae[X++]=63&Z|128):Z<65536?(ae[X++]=Z>>12|224,ae[X++]=Z>>6&63|128,ae[X++]=63&Z|128):(ae[X++]=Z>>18|240,ae[X++]=Z>>12&63|128,ae[X++]=Z>>6&63|128,ae[X++]=63&Z|128)}return ae},Gn=function(re){let ae=0;for(let X=0;X<re.length;X++){const Q=re.charCodeAt(X);Q<128?ae++:Q<2048?ae+=2:Q>=55296&&Q<=56319?(ae+=4,X++):ae+=3}return ae};function Fe(re){return re&&re._delegate?re._delegate:re}},1680:(Xt,$e,V)=>{V.d($e,{w:()=>We});var _=V(1368),J=V(4856),I=V(4496);let ge=(()=>{class Ve{constructor(Ce){this.zone=Ce}registerScript(Ce,ht,_t){const Ze=window[ht];if(Ze)return void this.zone.run(()=>{_t(Ze)});const rt=document.createElement("script");rt.id=this.getElemId(ht),rt.innerHTML="",rt.onload=()=>{this.zone.run(()=>{_t(window[ht])})},rt.src=Ce,rt.async=!0,rt.defer=!0,document.getElementsByTagName("head")[0].appendChild(rt)}cleanup(Ce){const ht=document.getElementById(this.getElemId(Ce));ht&&ht.remove()}getElemId(Ce){return`ngx-paypal-script-elem-${Ce}`}}return Ve.\u0275fac=function(Ce){return new(Ce||Ve)(I.CoB(I.WW2))},Ve.\u0275prov=I.wxM({token:Ve,factory:Ve.\u0275fac}),Ve})(),Ee=(()=>{class Ve{constructor(Ce){this.scriptService=Ce,this.paypalWindowName="paypal"}registerPayPalScript(Ce,ht){this.scriptService.registerScript(this.getUrlForConfig(Ce),this.paypalWindowName,ht)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(Ce){const ht=[{name:"client-id",value:Ce.clientId}];return Ce.locale&&ht.push({name:"locale",value:Ce.locale}),Ce.currency&&ht.push({name:"currency",value:Ce.currency}),Ce.commit&&ht.push({name:"commit",value:Ce.commit}),Ce.vault&&ht.push({name:"vault",value:Ce.vault}),Ce.intent&&ht.push({name:"intent",value:Ce.intent}),Ce.funding&&ht.push({name:"components",value:"buttons,funding-eligibility"}),Ce.extraParams&&ht.push(...Ce.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(ht)}`}getQueryString(Ce){let ht="";for(let _t=0;_t<Ce.length;_t++){const Ze=Ce[_t];ht+=0===_t?"?":"&",ht+=`${Ze.name}=${Ze.value}`}return ht}}return Ve.\u0275fac=function(Ce){return new(Ce||Ve)(I.CoB(ge))},Ve.\u0275prov=I.wxM({token:Ve,factory:Ve.\u0275fac}),Ve})(),Be=(()=>{class Ve{}return Ve.\u0275fac=function(Ce){return new(Ce||Ve)},Ve.\u0275mod=I.a4G({type:Ve}),Ve.\u0275inj=I.s3X({providers:[ge,Ee],imports:[_.MD]}),Ve})();var je=V(3804),le=V(788);const ue=["paymentRef"];function Oe(Ve,Xe){if(1&Ve){const Ce=I.KQA();I.I0R(0,"div",5)(1,"div",6)(2,"img",7),I.qCj("click",function(){const Ze=I.usT(Ce).$implicit,rt=I.GaO(2);return I.CGJ(rt.removeFromCart(Ze.product))}),I.C$Y()(),I.I0R(3,"div"),I.wR5(4,"img",8),I.C$Y(),I.I0R(5,"div",9)(6,"span"),I.OEk(7),I.C$Y(),I.I0R(8,"span"),I.OEk(9),I.C$Y(),I.I0R(10,"span"),I.OEk(11),I.C$Y(),I.I0R(12,"button",10),I.qCj("click",function(){const Ze=I.usT(Ce).$implicit,rt=I.GaO(2);return I.CGJ(rt.nav(Ze.product.key,Ze.product.product.category))}),I.OEk(13," See Product "),I.C$Y(),I.I0R(14,"p"),I.OEk(15),I.C$Y(),I.I0R(16,"p")(17,"img",11),I.qCj("click",function(){const Ze=I.usT(Ce).$implicit,rt=I.GaO(2);return I.CGJ(rt.plus(Ze.product.key,"minus"))}),I.C$Y(),I.OEk(18),I.I0R(19,"img",12),I.qCj("click",function(){const Ze=I.usT(Ce).$implicit,rt=I.GaO(2);return I.CGJ(rt.plus(Ze.product.key,"plus"))}),I.C$Y()()()()}if(2&Ve){const Ce=Xe.$implicit;I.yG2(4),I.E7m("src",Ce.product.product.photoUrl[0],I.K6U),I.yG2(3),I.oRS("Type: ",Ce.product.product.category,""),I.yG2(2),I.oRS("Model: ",Ce.product.product.model,""),I.yG2(2),I.oRS("Price: ",Ce.product.product.price,"$"),I.yG2(4),I.oRS("Discount -",Ce.product.product.discount,"%"),I.yG2(3),I.oRS("",Ce.quantity," ")}}function Se(Ve,Xe){if(1&Ve){const Ce=I.KQA();I.I0R(0,"div",13)(1,"h2"),I.OEk(2),I.C$Y(),I.I0R(3,"div")(4,"div")(5,"button",10),I.qCj("click",function(){I.usT(Ce);const _t=I.GaO(2);return I.CGJ(_t.makePayment())}),I.OEk(6,"Buy Now"),I.C$Y()()()()}if(2&Ve){const Ce=I.GaO(2);I.yG2(2),I.oRS("Total Price: ",Ce.calculateTotalPrice(),"$")}}function Le(Ve,Xe){if(1&Ve&&(I.I0R(0,"div",1)(1,"div")(2,"h2"),I.OEk(3,"Cart"),I.C$Y()(),I.I0R(4,"div",2),I.yuY(5,Oe,20,6,"div",3),I.wVc(6,"async"),I.C$Y(),I.yuY(7,Se,7,1,"div",4),I.C$Y()),2&Ve){const Ce=I.GaO();I.yG2(5),I.E7m("ngForOf",I.kDX(6,2,Ce.cart$)),I.yG2(2),I.E7m("ngIf",Ce.calculateTotalPrice()>0)}}let We=(()=>{class Ve{constructor(Ce,ht,_t,Ze){this.sharedService=Ce,this.router=ht,this.authService=_t,this.cd=Ze,this.showCart=!0}ngOnInit(){this.cart$=this.sharedService.cart.asObservable()}makePayment(){this.sharedService.buyProducts(this.sharedService.cart.getValue(),this.calculateTotalPrice(),this.authService.loggedUser.getValue()?.user.email,this.authService.loggedUser.getValue()?.key)}removeFromCart(Ce){this.sharedService.cartOperations("remove",Ce),this.calculateTotalPrice()}nav(Ce,ht){this.router.navigate([`single-product/${Ce}`],{queryParams:{type:ht,prod:Ce}})}plus(Ce,ht){let _t=this.sharedService.cart.getValue();const Ze=_t.findIndex(rt=>rt.product.key===Ce);"plus"===ht?_t[Ze].quantity++:_t[Ze].quantity>1&&_t[Ze].quantity--,this.sharedService.cart.next(_t)}calculateTotalPrice(){let Ce=0;return this.sharedService.cart.getValue().forEach(ht=>{if(ht.product.product.discount>0){const _t=ht.quantity*(ht.product.product.price-this.calculateDiscount(ht.product.product.price,ht.product.product.discount));Ce+=_t}else Ce+=ht.quantity*ht.product.product.price}),Ce}calculateDiscount(Ce,ht){return Math.round(Ce*ht/100)}static#e=this.\u0275fac=function(ht){return new(ht||Ve)(I.GI1(je.Y),I.GI1(J.E5),I.GI1(le.e),I.GI1(I.kD9))};static#t=this.\u0275cmp=I.In1({type:Ve,selectors:[["app-cart"]],viewQuery:function(ht,_t){if(1&ht&&I.CC$(ue,7),2&ht){let Ze;I.wto(Ze=I.Gqi())&&(_t.paymentRef=Ze.first)}},inputs:{showCart:"showCart",userEmail:"userEmail"},standalone:!0,features:[I.UHJ],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"products"],["class","product",4,"ngFor","ngForOf"],["class","payment",4,"ngIf"],[1,"product"],[1,"remove"],["src","assets/remove.png","alt","img",3,"click"],["alt","img",3,"src"],[1,"description"],[3,"click"],["src","assets/minus.png","alt","img",3,"click"],["src","assets/plus.png","alt","img",3,"click"],[1,"payment"]],template:function(ht,_t){1&ht&&I.yuY(0,Le,8,4,"div",0),2&ht&&I.E7m("ngIf",_t.showCart)},dependencies:[_.MD,_.ay,_.u_,_.a,J.qQ,Be],styles:[".container[_ngcontent-%COMP%]{width:600px;height:400px;background-color:#98c0e0;overflow-y:scroll}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{text-align:center;padding:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]{display:flex;gap:5px;height:110px;width:80%;border:1px solid rgb(118,153,218);border-radius:8px;position:relative}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{position:absolute;right:0}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:20%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > img[_ngcontent-%COMP%]{width:100%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:repeat(2,190px);grid-template-rows:repeat(3,34px);align-content:center;align-items:center}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:14px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px;cursor:pointer}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:not(:last-child){font-size:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:24px;width:130px;border:none;color:#fff;background-color:#7699da;border-radius:3px;cursor:pointer}.container[_ngcontent-%COMP%]   .payment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}"],changeDetection:0})}return Ve})()},6940:(Xt,$e,V)=>{V.d($e,{W:()=>J});var _=V(4496);let J=(()=>{class I{static#e=this.\u0275fac=function(Ee){return new(Ee||I)};static#t=this.\u0275cmp=_.In1({type:I,selectors:[["app-footer"]],standalone:!0,features:[_.UHJ],decls:49,vars:0,consts:[[1,"container"],[1,"flex-container"],["src","assets/placeholder.png","alt","img"],["src","assets/phone.png","alt","img"],["routerLink","/login"],["type","text","placeholder","Enter your Email"],["src","assets/send.png","alt","img"]],template:function(Ee,Ie){1&Ee&&(_.I0R(0,"div",0),_.wR5(1,"div"),_.I0R(2,"div",1)(3,"div")(4,"h3"),_.OEk(5,"SABAMUSIC."),_.C$Y(),_.I0R(6,"p"),_.OEk(7,"Music Shop over 1000 brand. we sell quality product on our website"),_.C$Y(),_.I0R(8,"p"),_.wR5(9,"img",2),_.OEk(10,"Mindeli's street 7B"),_.C$Y(),_.I0R(11,"p"),_.wR5(12,"img",3),_.OEk(13,"+995 555 542 034"),_.C$Y()(),_.I0R(14,"div")(15,"h3"),_.OEk(16,"Menu"),_.C$Y(),_.I0R(17,"p",4),_.OEk(18,"Login"),_.C$Y(),_.I0R(19,"p"),_.OEk(20,"Products"),_.C$Y(),_.I0R(21,"p"),_.OEk(22,"About Us"),_.C$Y(),_.I0R(23,"p"),_.OEk(24,"Terms & Policy"),_.C$Y()(),_.I0R(25,"div")(26,"h3"),_.OEk(27,"Account"),_.C$Y(),_.I0R(28,"p"),_.OEk(29,"My Account"),_.C$Y(),_.I0R(30,"p"),_.OEk(31,"My Cart"),_.C$Y(),_.I0R(32,"p"),_.OEk(33,"Checkout"),_.C$Y()(),_.I0R(34,"div")(35,"h3"),_.OEk(36,"Stay Connected"),_.C$Y(),_.I0R(37,"p"),_.OEk(38,"Facebook"),_.C$Y(),_.I0R(39,"p"),_.OEk(40,"Instagram"),_.C$Y(),_.I0R(41,"p"),_.OEk(42,"Twitter"),_.C$Y()(),_.I0R(43,"div")(44,"h3"),_.OEk(45,"Stay Updated"),_.C$Y(),_.I0R(46,"div"),_.wR5(47,"input",5)(48,"img",6),_.C$Y()()()())},styles:[".container[_ngcontent-%COMP%]{width:90%;height:220px;margin:100px auto;display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;height:2px;background-color:#000}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;height:100%}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:4px;cursor:pointer}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-size:14px;color:#616161}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > p[_ngcontent-%COMP%]{width:190px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{border:none;border-radius:2px;width:200px;height:20px;background-color:#e9dbdb}"],changeDetection:0})}return I})()},1092:(Xt,$e,V)=>{V.d($e,{k:()=>Ie});var _=V(4856),J=V(1368),I=V(1680),O=V(4496),ge=V(788);function Ee(Be,je){if(1&Be){const le=O.KQA();O.I0R(0,"div",12)(1,"span",3),O.qCj("click",function(){O.usT(le);const Oe=O.GaO();return O.CGJ(Oe.navigateToCategotyPage("guitar"))}),O.OEk(2,"Guitar"),O.C$Y(),O.I0R(3,"span",3),O.qCj("click",function(){O.usT(le);const Oe=O.GaO();return O.CGJ(Oe.navigateToCategotyPage("drum"))}),O.OEk(4,"Drums"),O.C$Y(),O.I0R(5,"span",3),O.qCj("click",function(){O.usT(le);const Oe=O.GaO();return O.CGJ(Oe.navigateToCategotyPage("bass"))}),O.OEk(6,"Bass "),O.C$Y(),O.I0R(7,"span",3),O.qCj("click",function(){O.usT(le);const Oe=O.GaO();return O.CGJ(Oe.navigateToCategotyPage("piano"))}),O.OEk(8,"Piano"),O.C$Y(),O.I0R(9,"span",3),O.qCj("click",function(){O.usT(le);const Oe=O.GaO();return O.CGJ(Oe.navigateToCategotyPage("other"))}),O.OEk(10,"Other"),O.C$Y()()}}let Ie=(()=>{class Be{constructor(le,ue,Oe){this.router=le,this.loginService=ue,this.cd=Oe,this.dropDown=!1,this.cart=!1}ngOnInit(){this.loginService.loggedUser.subscribe(le=>{this.user=le,this.profilePicture=this.user?.user.photoUrl,this.cd.detectChanges()})}changeDropDown(){this.dropDown=!this.dropDown}navigateToProfile(){this.router.navigate([`profile/${this.user?.key}`])}navigateToCategotyPage(le){this.router.navigate([`categoty/${le}`])}openCloseCart(){this.cart=!this.cart}logOut(){this.loginService.logOut(),this.router.navigate(["/products"])}static#e=this.\u0275fac=function(ue){return new(ue||Be)(O.GI1(_.E5),O.GI1(ge.e),O.GI1(O.kD9))};static#t=this.\u0275cmp=O.In1({type:Be,selectors:[["app-header"]],standalone:!0,features:[O.UHJ],decls:21,vars:3,consts:[[1,"header-container"],["routerLink","/products"],[1,"dropdown-container"],[3,"click"],["class","dropdown",4,"ngIf"],["src","assets/down-arrow.png","alt","img",3,"click"],[1,"cart",3,"userEmail","showCart"],["src","assets/loupe.png","alt","img"],["type","text","placeholder","Search"],["src","assets/logout.png","alt","img",3,"click"],["src","assets/shopping-cart.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click"],[1,"dropdown"]],template:function(ue,Oe){1&ue&&(O.I0R(0,"div",0)(1,"div")(2,"span",1),O.OEk(3,"SABAMUSIC."),O.C$Y(),O.I0R(4,"div",2)(5,"span",3),O.qCj("click",function(){return Oe.changeDropDown()}),O.OEk(6,"Products "),O.yuY(7,Ee,11,0,"div",4),O.C$Y(),O.I0R(8,"img",5),O.qCj("click",function(){return Oe.changeDropDown()}),O.C$Y()(),O.I0R(9,"span"),O.OEk(10,"Contact"),O.C$Y(),O.I0R(11,"span"),O.OEk(12,"About Us"),O.C$Y(),O.wR5(13,"app-cart",6),O.I0R(14,"div"),O.wR5(15,"img",7)(16,"input",8),O.C$Y()(),O.I0R(17,"div")(18,"img",9),O.qCj("click",function(){return Oe.logOut()}),O.C$Y(),O.I0R(19,"img",10),O.qCj("click",function(){return Oe.openCloseCart()}),O.C$Y(),O.I0R(20,"img",11),O.qCj("click",function(){return Oe.navigateToProfile()}),O.C$Y()()()),2&ue&&(O.yG2(7),O.E7m("ngIf",Oe.dropDown),O.yG2(6),O.E7m("userEmail",null==Oe.user||null==Oe.user.user?null:Oe.user.user.email)("showCart",Oe.cart))},dependencies:[J.MD,J.u_,_.qQ,_.ER,I.w],styles:[".header-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:160px;margin-bottom:40px;position:sticky;top:5px;z-index:2}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:60%;display:flex;justify-content:space-between;align-items:center}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child{display:flex;align-items:center;gap:10px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child > input[_ngcontent-%COMP%]{height:20px;border:none;background-color:#f3ecec;border-radius:3px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   .cart[_ngcontent-%COMP%]{position:absolute;top:80px;right:100px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:26px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:relative;font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%]{z-index:3;display:flex;flex-direction:column;position:absolute;top:30px;gap:5px;z-index:1}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:flex;gap:20px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   img[_ngcontent-%COMP%]{width:26px;height:26px;cursor:pointer}"],changeDetection:0})}return Be})()},3960:(Xt,$e,V)=>{V.r($e),V.d($e,{LoginAndRegistrationModule:()=>XI});var _=V(1368),J=V(6504),I=V(2740),O=V(4496),ge=V(6176),Ee=V(6e3),Ie=V(112),Be=V(3252),je=V(9900),le=V(2700),ue=V(5568),Oe=V(5448),Se=V(7773);function Le(){return(0,Oe.i)((i,e)=>{let n,o=!1;i.subscribe((0,Se.e)(e,c=>{const h=n;n=c,o&&e.next([h,c]),o=!0}))})}var We=V(4704),Ve=V(208),Xe=V(528);function ht(i,e){return i===e}var ke,_t=V(6684),rt=(V(6858),V(8368)),me=V(1528),Ot=V(9360),At=V(4920),Me=V(5976),Ct=V(7144),bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ut={},Rt=Rt||{},ct=bt||self;function Nt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Kt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Re="closure_uid_"+(1e9*Math.random()>>>0),He=0;function tt(i,e,n){return i.call.apply(i.bind,arguments)}function Ue(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,o),i.apply(e,c)}}return function(){return i.apply(e,arguments)}}function at(i,e,n){return(at=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tt:Ue).apply(null,arguments)}function st(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Dt(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,c,h){for(var g=Array(arguments.length-2),R=2;R<arguments.length;R++)g[R-2]=arguments[R];return e.prototype[c].apply(o,g)}}function ze(){this.s=this.s,this.o=this.o}ze.prototype.s=!1,ze.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function sn(i){Object.prototype.hasOwnProperty.call(i,Re)&&i[Re]||(i[Re]=++He)}(this)},ze.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const De=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function dt(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function yt(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(Nt(o)){const c=i.length||0,h=o.length||0;i.length=c+h;for(let g=0;g<h;g++)i[c+g]=o[g]}else i.push(o)}}function ut(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}ut.prototype.h=function(){this.defaultPrevented=!0};var Yt=function(){if(!ct.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const n=()=>{};ct.addEventListener("test",n,e),ct.removeEventListener("test",n,e)}catch{}return i}();function Wn(i){return/^[\s\xa0]*$/.test(i)}function Rr(){var i=ct.navigator;return i&&(i=i.userAgent)?i:""}function Ht(i){return-1!=Rr().indexOf(i)}function wr(i){return wr[" "](i),i}wr[" "]=function(){};var yn,i,zr=Ht("Opera"),kn=Ht("Trident")||Ht("MSIE"),Zr=Ht("Edge"),yr=Zr||kn,vi=Ht("Gecko")&&!(-1!=Rr().toLowerCase().indexOf("webkit")&&!Ht("Edge"))&&!(Ht("Trident")||Ht("MSIE"))&&!Ht("Edge"),rr=-1!=Rr().toLowerCase().indexOf("webkit")&&!Ht("Edge");function In(){var i=ct.document;return i?i.documentMode:void 0}e:{var ii="",Hs=(i=Rr(),vi?/rv:([^\);]+)(\)|;)/.exec(i):Zr?/Edge\/([\d\.]+)/.exec(i):kn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):rr?/WebKit\/(\S+)/.exec(i):zr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Hs&&(ii=Hs?Hs[1]:""),kn){var qr=In();if(null!=qr&&qr>parseFloat(ii)){yn=String(qr);break e}}yn=ii}var bn=ct.document&&kn&&(In()||parseInt(yn,10))||void 0;function Fn(i,e){if(ut.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(vi){e:{try{wr(e.nodeName);var c=!0;break e}catch{}c=!1}c||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Tr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Fn.$.h.call(this)}}Dt(Fn,ut);var Tr={2:"touch",3:"pen",4:"mouse"};Fn.prototype.h=function(){Fn.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Tn="closure_listenable_"+(1e6*Math.random()|0),Mr=0;function Gn(i,e,n,o,c){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=c,this.key=++Mr,this.fa=this.ia=!1}function wi(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function jr(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function Ds(i){const e={};for(const n in i)e[n]=i[n];return e}const pi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(i,e){let n,o;for(let c=1;c<arguments.length;c++){for(n in o=arguments[c],o)i[n]=o[n];for(let h=0;h<pi.length;h++)n=pi[h],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function Ge(i){this.src=i,this.g={},this.h=0}function he(i,e){var n=e.type;if(n in i.g){var h,o=i.g[n],c=De(o,e);(h=0<=c)&&Array.prototype.splice.call(o,c,1),h&&(wi(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Fe(i,e,n,o){for(var c=0;c<i.length;++c){var h=i[c];if(!h.fa&&h.listener==e&&h.capture==!!n&&h.la==o)return c}return-1}Ge.prototype.add=function(i,e,n,o,c){var h=i.toString();(i=this.g[h])||(i=this.g[h]=[],this.h++);var g=Fe(i,e,o,c);return-1<g?(e=i[g],n||(e.ia=!1)):((e=new Gn(e,this.src,h,!!o,c)).ia=n,i.push(e)),e};var re="closure_lm_"+(1e6*Math.random()|0),ae={};function X(i,e,n,o,c){if(o&&o.once)return Ne(i,e,n,o,c);if(Array.isArray(e)){for(var h=0;h<e.length;h++)X(i,e[h],n,o,c);return null}return n=Dr(n),i&&i[Tn]?i.O(e,n,Kt(o)?!!o.capture:!!o,c):Q(i,e,n,!1,o,c)}function Q(i,e,n,o,c,h){if(!e)throw Error("Invalid event type");var g=Kt(c)?!!c.capture:!!c,R=On(i);if(R||(i[re]=R=new Ge(i)),(n=R.add(e,n,o,g,h)).proxy)return n;if(o=function Z(){const e=Cn;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)Yt||(c=g),void 0===c&&(c=!1),i.addEventListener(e.toString(),o,c);else if(i.attachEvent)i.attachEvent(En(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function Ne(i,e,n,o,c){if(Array.isArray(e)){for(var h=0;h<e.length;h++)Ne(i,e[h],n,o,c);return null}return n=Dr(n),i&&i[Tn]?i.P(e,n,Kt(o)?!!o.capture:!!o,c):Q(i,e,n,!0,o,c)}function mt(i,e,n,o,c){if(Array.isArray(e))for(var h=0;h<e.length;h++)mt(i,e[h],n,o,c);else o=Kt(o)?!!o.capture:!!o,n=Dr(n),i&&i[Tn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Fe(h=i.g[e],n,o,c))&&(wi(h[n]),Array.prototype.splice.call(h,n,1),0==h.length&&(delete i.g[e],i.h--))):i&&(i=On(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Fe(e,n,o,c)),(n=-1<i?e[i]:null)&&Qt(n))}function Qt(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Tn])he(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(En(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=On(e))?(he(n,i),0==n.h&&(n.src=null,e[re]=null)):wi(i)}}}function En(i){return i in ae?ae[i]:ae[i]="on"+i}function Cn(i,e){if(i.fa)i=!0;else{e=new Fn(e,this);var n=i.listener,o=i.la||i.src;i.ia&&Qt(i),i=n.call(o,e)}return i}function On(i){return(i=i[re])instanceof Ge?i:null}var en="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dr(i){return"function"==typeof i?i:(i[en]||(i[en]=function(e){return i.handleEvent(e)}),i[en])}function fn(){ze.call(this),this.i=new Ge(this),this.S=this,this.J=null}function Ln(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new ut(e,i);else if(e instanceof ut)e.target=e.target||i;else{var c=e;gt(e=new ut(o,i),c)}if(c=!0,n)for(var h=n.length-1;0<=h;h--){var g=e.g=n[h];c=Pe(g,o,!0,e)&&c}if(c=Pe(g=e.g=i,o,!0,e)&&c,c=Pe(g,o,!1,e)&&c,n)for(h=0;h<n.length;h++)c=Pe(g=e.g=n[h],o,!1,e)&&c}function Pe(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,h=0;h<e.length;++h){var g=e[h];if(g&&!g.fa&&g.capture==n){var R=g.listener,k=g.la||g.src;g.ia&&he(i.i,g),c=!1!==R.call(k,o)&&c}}return c&&!o.defaultPrevented}Dt(fn,ze),fn.prototype[Tn]=!0,fn.prototype.removeEventListener=function(i,e,n,o){mt(this,i,e,n,o)},fn.prototype.N=function(){if(fn.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)wi(n[o]);delete i.g[e],i.h--}}this.J=null},fn.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},fn.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var qe=ct.JSON.stringify;function Tt(){var i=_e;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Bn=new class Qe{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Hn,i=>i.reset());class Hn{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Yn(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function Kr(i){ct.setTimeout(()=>{throw i},0)}let lr,se=!1,_e=new class rn{constructor(){this.h=this.g=null}add(e,n){const o=Bn.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},ye=()=>{const i=ct.Promise.resolve(void 0);lr=()=>{i.then(ft)}};var ft=()=>{for(var i;i=Tt();){try{i.h.call(i.g)}catch(n){Kr(n)}var e=Bn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}se=!1};function wt(i,e){fn.call(this),this.h=i||1,this.g=e||ct,this.j=at(this.qb,this),this.l=Date.now()}function Vt(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function qt(i,e,n){if("function"==typeof i)n&&(i=at(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=at(i.handleEvent,i)}return 2147483647<Number(e)?-1:ct.setTimeout(i,e||0)}function pn(i){i.g=qt(()=>{i.g=null,i.i&&(i.i=!1,pn(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Dt(wt,fn),(ke=wt.prototype).ga=!1,ke.T=null,ke.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ln(this,"tick"),this.ga&&(Vt(this),this.start()))}},ke.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ke.N=function(){wt.$.N.call(this),Vt(this),delete this.g};class an extends ze{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pn(this)}N(){super.N(),this.g&&(ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zn(i){ze.call(this),this.h=i,this.g={}}Dt(zn,ze);var vr=[];function sr(i,e,n,o){Array.isArray(n)||(n&&(vr[0]=n.toString()),n=vr);for(var c=0;c<n.length;c++){var h=X(e,n[c],o||i.handleEvent,!1,i.h||i);if(!h)break;i.g[h.key]=h}}function Vn(i){jr(i.g,function(e,n){this.g.hasOwnProperty(n)&&Qt(e)},i),i.g={}}function ns(){this.g=!0}function qn(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function $n(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var c=o[1];if(Array.isArray(c)&&!(1>c.length)){var h=c[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var g=1;g<c.length;g++)c[g]=""}}}return qe(n)}catch{return e}}(i,n)+(o?" "+o:"")})}zn.prototype.N=function(){zn.$.N.call(this),Vn(this)},zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ns.prototype.Ea=function(){this.g=!1},ns.prototype.info=function(){};var fr={},rs=null;function Di(){return rs=rs||new fn}function si(i){ut.call(this,fr.Ta,i)}function Yr(i){const e=Di();Ln(e,new si(e))}function As(i,e){ut.call(this,fr.STAT_EVENT,i),this.stat=e}function Ai(i){const e=Di();Ln(e,new As(e,i))}function $o(i,e){ut.call(this,fr.Ua,i),this.size=e}function ji(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ct.setTimeout(function(){i()},e)}fr.Ta="serverreachability",Dt(si,ut),fr.STAT_EVENT="statevent",Dt(As,ut),fr.Ua="timingevent",Dt($o,ut);var Go={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ka={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zn(){}function $r(){}Zn.prototype.h=null;var ia,Ss={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function oi(){ut.call(this,"d")}function ra(){ut.call(this,"c")}function Bs(){}function zs(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new zn(this),this.P=Qr,this.V=new wt(i=yr?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bo}function bo(){this.i=null,this.g="",this.h=!1}Dt(oi,ut),Dt(ra,ut),Dt(Bs,Zn),Bs.prototype.g=function(){return new XMLHttpRequest},Bs.prototype.i=function(){return{}},ia=new Bs;var Qr=45e3,Bt={},vn={};function Ar(i,e,n){i.L=1,i.A=Mo(Qi(e)),i.u=n,i.S=!0,Yi(i,null)}function Yi(i,e){i.G=Date.now(),or(i),i.B=Qi(i.A);var n=i.B,o=i.W;Array.isArray(o)||(o=[String(o)]),sa(n.i,"t",o),i.o=0,n=i.l.J,i.h=new bo,i.g=Es(i.l,n?e:null,!i.u),0<i.O&&(i.M=new an(at(i.Pa,i,i.g),i.O)),sr(i.U,i.g,"readystatechange",i.nb),e=i.I?Ds(i.I):{},i.u?(i.v||(i.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.B,i.v,i.u,e)):(i.v="GET",i.g.ha(i.B,i.v,null,e)),Yr(),function Ti(i,e,n,o,c,h){i.info(function(){if(i.g)if(h)for(var g="",R=h.split("&"),k=0;k<R.length;k++){var B=R[k].split("=");if(1<B.length){var Y=B[0];B=B[1];var ce=Y.split("_");g=2<=ce.length&&"type"==ce[1]?g+(Y+"=")+B+"&":g+(Y+"=redacted&")}}else g=null;else g=h;return"XMLHTTP REQ ("+o+") [attempt "+c+"]: "+e+"\n"+n+"\n"+g})}(i.j,i.v,i.B,i.m,i.W,i.u)}function xi(i){return!!i.g&&"GET"==i.v&&2!=i.L&&i.l.Ha}function Ni(i,e,n){let c,o=!0;for(;!i.J&&i.o<n.length;){if(c=$i(i,n),c==vn){4==e&&(i.s=4,Ai(14),o=!1),qn(i.j,i.m,null,"[Incomplete Response]");break}if(c==Bt){i.s=4,Ai(15),qn(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}qn(i.j,i.m,c,null),ho(i,c)}xi(i)&&0!=i.o&&(i.h.g=i.h.g.slice(i.o),i.o=0),4!=e||0!=n.length||i.h.h||(i.s=1,Ai(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mn(e),e.M=!0,Ai(11))):(qn(i.j,i.m,n,"[Invalid Chunked Response]"),Pi(i),An(i))}function $i(i,e){var n=i.o,o=e.indexOf("\n",n);return-1==o?vn:(n=Number(e.substring(n,o)),isNaN(n)?Bt:(o+=1)+n>e.length?vn:(e=e.slice(o,o+n),i.o=o+n,e))}function or(i){i.Y=Date.now()+i.P,ki(i,i.P)}function ki(i,e){if(null!=i.C)throw Error("WatchDog timer not null");i.C=ji(at(i.lb,i),e)}function Gi(i){i.C&&(ct.clearTimeout(i.C),i.C=null)}function An(i){0==i.l.H||i.J||_a(i.l,i)}function Pi(i){Gi(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,Vt(i.V),Vn(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function ho(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||pa(n.i,i)))if(!i.K&&pa(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var c=o;if(0==c[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;hr(n),Js(n)}$s(n),Ai(18)}}else n.Fa=c[1],0<n.Fa-n.V&&37500>c[2]&&n.G&&0==n.A&&!n.v&&(n.v=ji(at(n.ib,n),6e3));if(1>=fo(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else qo(n,11)}else if((i.K||n.g==i)&&hr(n),!Wn(e))for(c=n.Ja.g.parse(e),e=0;e<c.length;e++){let B=c[e];if(n.V=B[0],B=B[1],2==n.H)if("c"==B[0]){n.K=B[1],n.pa=B[2];const Y=B[3];null!=Y&&(n.ra=Y,n.l.info("VER="+n.ra));const ce=B[4];null!=ce&&(n.Ga=ce,n.l.info("SVER="+n.Ga));const Ae=B[5];null!=Ae&&"number"==typeof Ae&&0<Ae&&(n.L=o=1.5*Ae,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const Ye=i.g;if(Ye){const Wt=Ye.g?Ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wt){var h=o.i;h.g||-1==Wt.indexOf("spdy")&&-1==Wt.indexOf("quic")&&-1==Wt.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(ga(h,h.h),h.h=null))}if(o.F){const nn=Ye.g?Ye.g.getResponseHeader("X-HTTP-Session-Id"):null;nn&&(o.Da=nn,cn(o.I,o.F,nn))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var g=i;if((o=n).wa=Ko(o,o.J?o.pa:null,o.Y),g.K){yu(o.i,g);var R=g,k=o.L;k&&R.setTimeout(k),R.C&&(Gi(R),or(R)),o.g=g}else Bc(o);0<n.j.length&&No(n)}else"stop"!=B[0]&&"close"!=B[0]||qo(n,7);else 3==n.H&&("stop"==B[0]||"close"==B[0]?"stop"==B[0]?qo(n,7):ds(n):"noop"!=B[0]&&n.h&&n.h.Aa(B),n.A=0)}Yr()}catch{}}function Ps(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Nt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function li(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(Nt(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function qs(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Nt(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),c=o.length,h=0;h<c;h++)e.call(void 0,o[h],n&&n[h],i)}(ke=zs.prototype).setTimeout=function(i){this.P=i},ke.nb=function(i){i=i.target;const e=this.M;e&&3==Un(i)?e.l():this.Pa(i)},ke.Pa=function(i){try{if(i==this.g)e:{const Y=Un(this.g);var e=this.g.Ia();if(this.g.da(),!(3>Y)&&(3!=Y||yr||this.g&&(this.h.h||this.g.ja()||Ji(this.g)))){this.J||4!=Y||7==e||Yr(),Gi(this);var n=this.g.da();this.ca=n;t:if(xi(this)){var o=Ji(this.g);i="";var c=o.length,h=4==Un(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Pi(this),An(this);var g="";break t}this.h.i=new ct.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:h&&e==c-1});o.length=0,this.h.g+=i,this.o=0,g=this.h.g}else g=this.g.ja();if(this.i=200==n,function kr(i,e,n,o,c,h,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+c+"]: "+e+"\n"+n+"\n"+h+" "+g})}(this.j,this.v,this.B,this.m,this.W,Y,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var R,k=this.g;if((R=k.g?k.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wn(R)){var B=R;break t}}B=null}if(!(n=B)){this.i=!1,this.s=3,Ai(12),Pi(this),An(this);break e}qn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ho(this,n)}this.S?(Ni(this,Y,g),yr&&this.i&&3==Y&&(sr(this.U,this.V,"tick",this.mb),this.V.start())):(qn(this.j,this.m,g,null),ho(this,g)),4==Y&&Pi(this),this.i&&!this.J&&(4==Y?_a(this.l,this):(this.i=!1,or(this)))}else(function ma(i){const e={};i=(i.g&&2<=Un(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(Wn(i[o]))continue;var n=Yn(i[o]);const c=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const h=e[c]||[];e[c]=h,h.push(n)}!function Nr(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<g.indexOf("Unknown SID")?(this.s=3,Ai(12)):(this.s=0,Ai(13)),Pi(this),An(this)}}}catch{}},ke.mb=function(){if(this.g){var i=Un(this.g),e=this.g.ja();this.o<e.length&&(Gi(this),Ni(this,i,e),this.i&&4!=i&&or(this))}},ke.cancel=function(){this.J=!0,Pi(this)},ke.lb=function(){this.C=null;const i=Date.now();0<=i-this.Y?(function ei(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Yr(),Ai(17)),Pi(this),this.s=2,An(this)):ki(this,this.Y-i)};var bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function is(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof is){this.h=i.h,Ei(this,i.j),this.s=i.s,this.g=i.g,Ro(this,i.m),this.l=i.l;var e=i.i,n=new Os;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Rs(this,n),this.o=i.o}else i&&(e=String(i).match(bs))?(this.h=!1,Ei(this,e[1]||"",!0),this.s=Ms(e[2]||""),this.g=Ms(e[3]||"",!0),Ro(this,e[4]),this.l=Ms(e[5]||"",!0),Rs(this,e[6]||"",!0),this.o=Ms(e[7]||"")):(this.h=!1,this.i=new Os(null,this.h))}function Qi(i){return new is(i)}function Ei(i,e,n){i.j=n?Ms(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ro(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Rs(i,e,n){e instanceof Os?(i.i=e,function Wo(i,e){e&&!i.j&&(Fi(i),i.i=null,i.g.forEach(function(n,o){var c=o.toLowerCase();o!=c&&(xs(this,o),sa(this,c,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Wi(e,ss)),i.i=new Os(e,i.h))}function cn(i,e,n){i.i.set(e,n)}function Mo(i){return cn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ms(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Wi(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,fa),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function fa(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}is.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Wi(e,Oo,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Wi(e,Oo,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Wi(n,"/"==n.charAt(0)?ys:di,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Wi(n,Hi)),i.join("")};var Oo=/[#\/\?@]/g,di=/[#\?:]/g,ys=/[#\?]/g,ss=/[#\?@]/g,Hi=/#/g;function Os(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Fi(i){i.g||(i.g=new Map,i.h=0,i.i&&function bi(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),c=null;if(0<=o){var h=i[n].substring(0,o);c=i[n].substring(o+1)}else h=i[n];e(h,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function xs(i,e){Fi(i),e=Ks(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Li(i,e){return Fi(i),e=Ks(i,e),i.g.has(e)}function sa(i,e,n){xs(i,e),0<n.length&&(i.i=null,i.g.set(Ks(i,e),dt(n)),i.h+=n.length)}function Ks(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}(ke=Os.prototype).add=function(i,e){Fi(this),this.i=null,i=Ks(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},ke.forEach=function(i,e){Fi(this),this.g.forEach(function(n,o){n.forEach(function(c){i.call(e,c,o,this)},this)},this)},ke.ta=function(){Fi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const c=i[o];for(let h=0;h<c.length;h++)n.push(e[o])}return n},ke.Z=function(i){Fi(this);let e=[];if("string"==typeof i)Li(this,i)&&(e=e.concat(this.g.get(Ks(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},ke.set=function(i,e){return Fi(this),this.i=null,Li(this,i=Ks(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ke.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const h=encodeURIComponent(String(o)),g=this.Z(o);for(o=0;o<g.length;o++){var c=h;""!==g[o]&&(c+="="+encodeURIComponent(String(g[o]))),i.push(c)}}return this.i=i.join("&")};var Ya=class{constructor(i,e){this.g=i,this.map=e}};function Vc(i){this.l=i||_u,i=ct.PerformanceNavigationTiming?0<(i=ct.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ct.g&&ct.g.Ka&&ct.g.Ka()&&ct.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _u=10;function js(i){return!!i.h||!!i.g&&i.g.size>=i.j}function fo(i){return i.h?1:i.g?i.g.size:0}function pa(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ga(i,e){i.g?i.g.add(e):i.h=e}function yu(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ra(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return dt(i.i)}Vc.prototype.cancel=function(){if(this.i=Ra(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var Ys=class{stringify(i){return ct.JSON.stringify(i,void 0)}parse(i){return ct.JSON.parse(i,void 0)}};function G(){this.g=new Ys}function z(i,e,n){const o=n||"";try{Ps(i,function(c,h){let g=c;Kt(c)&&(g=qe(c)),e.push(o+h+"="+encodeURIComponent(g))})}catch(c){throw e.push(o+"type="+encodeURIComponent("_badmap")),c}}function te(i,e,n,o,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(o)}catch{}}function ve(i){this.l=i.ec||null,this.j=i.ob||!1}function un(i,e){fn.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=Qn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Dt(ve,Zn),ve.prototype.g=function(){return new un(this.l,this.j)},ve.prototype.i=function(i){return function(){return i}}({}),Dt(un,fn);var Qn=0;function vs(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function os(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Ns(i)}function Ns(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ke=un.prototype).open=function(i,e){if(this.readyState!=Qn)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Ns(this)},ke.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||ct).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,os(this)),this.readyState=Qn},ke.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Ns(this)),this.g&&(this.readyState=3,Ns(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ct.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vs(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},ke.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?os(this):Ns(this),3==this.readyState&&vs(this)}},ke.Za=function(i){this.g&&(this.response=this.responseText=i,os(this))},ke.Ya=function(i){this.g&&(this.response=i,os(this))},ke.ka=function(){this.g&&os(this)},ke.setRequestHeader=function(i,e){this.v.append(i,e)},ke.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ke.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(un.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Uc=ct.JSON.parse;function Rn(i){fn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Sr,this.L=this.M=!1}Dt(Rn,fn);var Sr="",gn=/^https?$/i,Ho=["POST","PUT"];function Ma(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Fr(i),xo(i)}function Fr(i){i.F||(i.F=!0,Ln(i,"complete"),Ln(i,"error"))}function Qs(i){if(i.h&&typeof Rt<"u"&&(!i.C[1]||4!=Un(i)||2!=i.da()))if(i.v&&4==Un(i))qt(i.La,0,i);else if(Ln(i,"readystatechange"),4==Un(i)){i.h=!1;try{const g=i.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===g){var c=String(i.I).match(bs)[1]||null;!c&&ct.self&&ct.self.location&&(c=ct.self.location.protocol.slice(0,-1)),o=!gn.test(c?c.toLowerCase():"")}n=o}if(n)Ln(i,"complete"),Ln(i,"success");else{i.m=6;try{var h=2<Un(i)?i.g.statusText:""}catch{h=""}i.j=h+" ["+i.da()+"]",Fr(i)}}finally{xo(i)}}}function xo(i,e){if(i.g){dr(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Ln(i,"ready");try{n.onreadystatechange=o}catch{}}}function dr(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(ct.clearTimeout(i.A),i.A=null)}function Un(i){return i.g?i.g.readyState:0}function Ji(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Sr:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function ks(i){let e="";return jr(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function ls(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=ks(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):cn(i,e,n))}function Io(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function gc(i){this.Ga=0,this.j=[],this.l=new ns,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Io("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Io("baseRetryDelayMs",5e3,i),this.hb=Io("retryDelaySeedMs",1e4,i),this.eb=Io("forwardChannelMaxRetries",2,i),this.xa=Io("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new Vc(i&&i.concurrentRequestLimit),this.Ja=new G,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ds(i){if(Co(i),3==i.H){var e=i.W++,n=Qi(i.I);if(cn(n,"SID",i.K),cn(n,"RID",e),cn(n,"TYPE","terminate"),zo(i,n),(e=new zs(i,i.l,e)).L=2,e.A=Mo(Qi(n)),n=!1,ct.navigator&&ct.navigator.sendBeacon)try{n=ct.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ct.Image&&((new Image).src=e.A,n=!0),n||(e.g=Es(e.l,null),e.g.ha(e.A)),e.G=Date.now(),or(e)}wo(i)}function Js(i){i.g&&(Mn(i),i.g.cancel(),i.g=null)}function Co(i){Js(i),i.u&&(ct.clearTimeout(i.u),i.u=null),hr(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ct.clearTimeout(i.m),i.m=null)}function No(i){if(!js(i.i)&&!i.m){i.m=!0;var e=i.Na;lr||ye(),se||(lr(),se=!0),_e.add(e,i),i.C=0}}function Oa(i,e){var n;n=e?e.m:i.W++;const o=Qi(i.I);cn(o,"SID",i.K),cn(o,"RID",n),cn(o,"AID",i.V),zo(i,o),i.o&&i.s&&ls(o,i.o,i.s),n=new zs(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=xa(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),ga(i.i,n),Ar(n,o,e)}function zo(i,e){i.na&&jr(i.na,function(n,o){cn(e,o,n)}),i.h&&Ps({},function(n,o){cn(e,o,n)})}function xa(i,e,n){n=Math.min(i.j.length,n);var o=i.h?at(i.h.Va,i.h,i):null;e:{var c=i.j;let h=-1;for(;;){const g=["count="+n];-1==h?0<n?(h=c[0].g,g.push("ofs="+h)):h=0:g.push("ofs="+h);let R=!0;for(let k=0;k<n;k++){let B=c[k].g;const Y=c[k].map;if(B-=h,0>B)h=Math.max(0,c[k].g-100),R=!1;else try{z(Y,g,"req"+B+"_")}catch{o&&o(Y)}}if(R){o=g.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function Bc(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;lr||ye(),se||(lr(),se=!0),_e.add(e,i),i.A=0}}function $s(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=ji(at(i.Ma,i),mc(i,i.A)),i.A++,0))}function Mn(i){null!=i.B&&(ct.clearTimeout(i.B),i.B=null)}function Zs(i){i.g=new zs(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Qi(i.wa);cn(e,"RID","rpc"),cn(e,"SID",i.K),cn(e,"AID",i.V),cn(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&cn(e,"TO",i.qa),cn(e,"TYPE","xmlhttp"),zo(i,e),i.o&&i.s&&ls(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.A=Mo(Qi(e)),n.u=null,n.S=!0,Yi(n,i)}function hr(i){null!=i.v&&(ct.clearTimeout(i.v),i.v=null)}function _a(i,e){var n=null;if(i.g==e){hr(i),Mn(i),i.g=null;var o=2}else{if(!pa(i.i,e))return;n=e.F,yu(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.u?e.u.length:0,e=Date.now()-e.G;var c=i.C;Ln(o=Di(),new $o(o,n)),No(i)}else Bc(i);else if(3==(c=e.s)||0==c&&0<e.ca||!(1==o&&function Xs(i,e){return!(fo(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=ji(at(i.Na,i,e),mc(i,i.C)),i.C++,0)))}(i,e)||2==o&&$s(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),c){case 1:qo(i,5);break;case 4:qo(i,10);break;case 3:qo(i,6);break;default:qo(i,2)}}function mc(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function qo(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=at(i.pb,i);n||(n=new is("//www.google.com/images/cleardot.gif"),ct.location&&"http"==ct.location.protocol||Ei(n,"https"),Mo(n)),function F(i,e){const n=new ns;if(ct.Image){const o=new Image;o.onload=st(te,n,o,"TestLoadImage: loaded",!0,e),o.onerror=st(te,n,o,"TestLoadImage: error",!1,e),o.onabort=st(te,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=st(te,n,o,"TestLoadImage: timeout",!1,e),ct.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else Ai(2);i.H=0,i.h&&i.h.za(e),wo(i),Co(i)}function wo(i){if(i.H=0,i.ma=[],i.h){const e=Ra(i.i);(0!=e.length||0!=i.j.length)&&(yt(i.ma,e),yt(i.ma,i.j),i.i.i.length=0,dt(i.j),i.j.length=0),i.h.ya()}}function Ko(i,e,n){var o=n instanceof is?Qi(n):new is(n);if(""!=o.g)e&&(o.g=e+"."+o.g),Ro(o,o.m);else{var c=ct.location;o=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var h=new is(null);o&&Ei(h,o),e&&(h.g=e),c&&Ro(h,c),n&&(h.l=n),o=h}return e=i.Da,(n=i.F)&&e&&cn(o,n,e),cn(o,"VER",i.ra),zo(i,o),o}function Es(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Rn(i.Ha&&!i.va?new ve({ob:n}):i.va)).Oa(i.J),e}function vu(){}function hs(){if(kn&&!(10<=Number(bn)))throw Error("Environmental error: no available transport.")}function Fs(i,e){fn.call(this),this.g=new gc(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Wn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wn(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ar(this)}function jc(i){oi.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function vt(){ra.call(this),this.status=1}function ar(i){this.g=i}function eo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Or(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var c=0;16>c;++c)o[c]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(c=0;16>c;++c)o[c]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var h=i.g[3],g=(e=i.g[0])+(h^(n=i.g[1])&((c=i.g[2])^h))+o[0]+3614090360&4294967295;g=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=n+(g<<7&4294967295|g>>>25))+((g=h+(c^e&(n^c))+o[1]+3905402710&4294967295)<<12&4294967295|g>>>20))+((g=c+(n^h&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^c&(h^e))+o[3]+3250441966&4294967295)<<22&4294967295|g>>>10))+((g=e+(h^n&(c^h))+o[4]+4118548399&4294967295)<<7&4294967295|g>>>25))+((g=h+(c^e&(n^c))+o[5]+1200080426&4294967295)<<12&4294967295|g>>>20))+((g=c+(n^h&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^c&(h^e))+o[7]+4249261313&4294967295)<<22&4294967295|g>>>10))+((g=e+(h^n&(c^h))+o[8]+1770035416&4294967295)<<7&4294967295|g>>>25))+((g=h+(c^e&(n^c))+o[9]+2336552879&4294967295)<<12&4294967295|g>>>20))+((g=c+(n^h&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^c&(h^e))+o[11]+2304563134&4294967295)<<22&4294967295|g>>>10))+((g=e+(h^n&(c^h))+o[12]+1804603682&4294967295)<<7&4294967295|g>>>25))+((g=h+(c^e&(n^c))+o[13]+4254626195&4294967295)<<12&4294967295|g>>>20))+((g=c+(n^h&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^c&(h^e))+o[15]+1236535329&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^h&(n^c))+o[1]+4129170786&4294967295)<<5&4294967295|g>>>27))+((g=h+(n^c&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|g>>>23))+((g=c+(e^n&(h^e))+o[11]+643717713&4294967295)<<14&4294967295|g>>>18))+((g=n+(h^e&(c^h))+o[0]+3921069994&4294967295)<<20&4294967295|g>>>12))+((g=e+(c^h&(n^c))+o[5]+3593408605&4294967295)<<5&4294967295|g>>>27))+((g=h+(n^c&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|g>>>23))+((g=c+(e^n&(h^e))+o[15]+3634488961&4294967295)<<14&4294967295|g>>>18))+((g=n+(h^e&(c^h))+o[4]+3889429448&4294967295)<<20&4294967295|g>>>12))+((g=e+(c^h&(n^c))+o[9]+568446438&4294967295)<<5&4294967295|g>>>27))+((g=h+(n^c&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|g>>>23))+((g=c+(e^n&(h^e))+o[3]+4107603335&4294967295)<<14&4294967295|g>>>18))+((g=n+(h^e&(c^h))+o[8]+1163531501&4294967295)<<20&4294967295|g>>>12))+((g=e+(c^h&(n^c))+o[13]+2850285829&4294967295)<<5&4294967295|g>>>27))+((g=h+(n^c&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|g>>>23))+((g=c+(e^n&(h^e))+o[7]+1735328473&4294967295)<<14&4294967295|g>>>18))+((g=n+(h^e&(c^h))+o[12]+2368359562&4294967295)<<20&4294967295|g>>>12))+((g=e+(n^c^h)+o[5]+4294588738&4294967295)<<4&4294967295|g>>>28))+((g=h+(e^n^c)+o[8]+2272392833&4294967295)<<11&4294967295|g>>>21))+((g=c+(h^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|g>>>16))+((g=n+(c^h^e)+o[14]+4259657740&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^c^h)+o[1]+2763975236&4294967295)<<4&4294967295|g>>>28))+((g=h+(e^n^c)+o[4]+1272893353&4294967295)<<11&4294967295|g>>>21))+((g=c+(h^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|g>>>16))+((g=n+(c^h^e)+o[10]+3200236656&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^c^h)+o[13]+681279174&4294967295)<<4&4294967295|g>>>28))+((g=h+(e^n^c)+o[0]+3936430074&4294967295)<<11&4294967295|g>>>21))+((g=c+(h^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|g>>>16))+((g=n+(c^h^e)+o[6]+76029189&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^c^h)+o[9]+3654602809&4294967295)<<4&4294967295|g>>>28))+((g=h+(e^n^c)+o[12]+3873151461&4294967295)<<11&4294967295|g>>>21))+((g=c+(h^e^n)+o[15]+530742520&4294967295)<<16&4294967295|g>>>16))+((g=n+(c^h^e)+o[2]+3299628645&4294967295)<<23&4294967295|g>>>9))+((g=e+(c^(n|~h))+o[0]+4096336452&4294967295)<<6&4294967295|g>>>26))+((g=h+(n^(e|~c))+o[7]+1126891415&4294967295)<<10&4294967295|g>>>22))+((g=c+(e^(h|~n))+o[14]+2878612391&4294967295)<<15&4294967295|g>>>17))+((g=n+(h^(c|~e))+o[5]+4237533241&4294967295)<<21&4294967295|g>>>11))+((g=e+(c^(n|~h))+o[12]+1700485571&4294967295)<<6&4294967295|g>>>26))+((g=h+(n^(e|~c))+o[3]+2399980690&4294967295)<<10&4294967295|g>>>22))+((g=c+(e^(h|~n))+o[10]+4293915773&4294967295)<<15&4294967295|g>>>17))+((g=n+(h^(c|~e))+o[1]+2240044497&4294967295)<<21&4294967295|g>>>11))+((g=e+(c^(n|~h))+o[8]+1873313359&4294967295)<<6&4294967295|g>>>26))+((g=h+(n^(e|~c))+o[15]+4264355552&4294967295)<<10&4294967295|g>>>22))+((g=c+(e^(h|~n))+o[6]+2734768916&4294967295)<<15&4294967295|g>>>17))+((g=n+(h^(c|~e))+o[13]+1309151649&4294967295)<<21&4294967295|g>>>11))+((h=(e=n+((g=e+(c^(n|~h))+o[4]+4149444226&4294967295)<<6&4294967295|g>>>26))+((g=h+(n^(e|~c))+o[11]+3174756917&4294967295)<<10&4294967295|g>>>22))^((c=h+((g=c+(e^(h|~n))+o[2]+718787259&4294967295)<<15&4294967295|g>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(c+(g<<21&4294967295|g>>>11))&4294967295,i.g[2]=i.g[2]+c&4294967295,i.g[3]=i.g[3]+h&4294967295}function Lr(i,e){this.h=e;for(var n=[],o=!0,c=i.length-1;0<=c;c--){var h=0|i[c];o&&h==e||(n[c]=h,o=!1)}this.g=n}(ke=Rn.prototype).Oa=function(i){this.M=i},ke.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ia.g(),this.C=function Si(i){return i.h||(i.h=i.i())}(this.u?this.u:ia),this.g.onreadystatechange=at(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(h){return void Ma(this,h)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var c in o)n.set(c,o[c]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const h of o.keys())n.set(h,o.get(h))}o=Array.from(n.keys()).find(h=>"content-type"==h.toLowerCase()),c=ct.FormData&&i instanceof ct.FormData,!(0<=De(Ho,e))||o||c||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[h,g]of n)this.g.setRequestHeader(h,g);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{dr(this),0<this.B&&((this.L=function ai(i){return kn&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=at(this.ua,this)):this.A=qt(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(h){Ma(this,h)}},ke.ua=function(){typeof Rt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ln(this,"timeout"),this.abort(8))},ke.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Ln(this,"complete"),Ln(this,"abort"),xo(this))},ke.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xo(this,!0)),Rn.$.N.call(this)},ke.La=function(){this.s||(this.G||this.v||this.l?Qs(this):this.kb())},ke.kb=function(){Qs(this)},ke.isActive=function(){return!!this.g},ke.da=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},ke.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ke.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Uc(e)}},ke.Ia=function(){return this.m},ke.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ke=gc.prototype).ra=8,ke.H=1,ke.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const c=new zs(this,this.l,i);let h=this.s;if(this.U&&(h?(h=Ds(h),gt(h,this.U)):h=this.U),null!==this.o||this.O||(c.I=h,h=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=xa(this,c,e),cn(n=Qi(this.I),"RID",i),cn(n,"CVER",22),this.F&&cn(n,"X-HTTP-Session-Id",this.F),zo(this,n),h&&(this.O?e="headers="+encodeURIComponent(String(ks(h)))+"&"+e:this.o&&ls(n,this.o,h)),ga(this.i,c),this.bb&&cn(n,"TYPE","init"),this.P?(cn(n,"$req",e),cn(n,"SID","null"),c.aa=!0,Ar(c,n,null)):Ar(c,n,e),this.H=2}}else 3==this.H&&(i?Oa(this,i):0==this.j.length||js(this.i)||Oa(this))},ke.Ma=function(){if(this.u=null,Zs(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=ji(at(this.jb,this),i)}},ke.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ai(10),Js(this),Zs(this))},ke.ib=function(){null!=this.v&&(this.v=null,Js(this),$s(this),Ai(19))},ke.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Ai(2)):(this.l.info("Failed to ping google.com"),Ai(1))},ke.isActive=function(){return!!this.h&&this.h.isActive(this)},(ke=vu.prototype).Ba=function(){},ke.Aa=function(){},ke.za=function(){},ke.ya=function(){},ke.isActive=function(){return!0},ke.Va=function(){},hs.prototype.g=function(i,e){return new Fs(i,e)},Dt(Fs,fn),Fs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;Ai(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=Ko(i,null,i.Y),No(i)},Fs.prototype.close=function(){ds(this.g)},Fs.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=qe(i),i=n);e.j.push(new Ya(e.fb++,i)),3==e.H&&No(e)},Fs.prototype.N=function(){this.g.h=null,delete this.j,ds(this.g),delete this.g,Fs.$.N.call(this)},Dt(jc,oi),Dt(vt,ra),Dt(ar,vu),ar.prototype.Ba=function(){Ln(this.g,"a")},ar.prototype.Aa=function(i){Ln(this.g,new jc(i))},ar.prototype.za=function(i){Ln(this.g,new vt)},ar.prototype.ya=function(){Ln(this.g,"b")},Dt(eo,function Qa(){this.blockSize=-1}),eo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},eo.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,c=this.h,h=0;h<e;){if(0==c)for(;h<=n;)Or(this,i,h),h+=this.blockSize;if("string"==typeof i){for(;h<e;)if(o[c++]=i.charCodeAt(h++),c==this.blockSize){Or(this,o),c=0;break}}else for(;h<e;)if(o[c++]=i[h++],c==this.blockSize){Or(this,o),c=0;break}}this.h=c,this.i+=e},eo.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var ya={};function po(i){return-128<=i&&128>i?function $t(i,e){var n=ya;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new Lr([0|e],0>e?-1:0)}):new Lr([0|i],0>i?-1:0)}function to(i){if(isNaN(i)||!isFinite(i))return ti;if(0>i)return Er(to(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=Ja;return new Lr(e,0)}var Ja=4294967296,ti=po(0),Gc=po(1),Is=po(16777216);function hi(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Ls(i){return-1==i.h}function Er(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new Lr(n,~i.h).add(Gc)}function A(i,e){return i.add(Er(e))}function q(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function N(i,e){this.g=i,this.h=e}function W(i,e){if(hi(e))throw Error("division by zero");if(hi(i))return new N(ti,ti);if(Ls(i))return e=W(Er(i),e),new N(Er(e.g),Er(e.h));if(Ls(e))return e=W(i,Er(e)),new N(Er(e.g),e.h);if(30<i.g.length){if(Ls(i)||Ls(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Gc,o=e;0>=o.X(i);)n=de(n),o=de(o);var c=et(n,1),h=et(o,1);for(o=et(o,2),n=et(n,2);!hi(o);){var g=h.add(o);0>=g.X(i)&&(c=c.add(n),h=g),o=et(o,1),n=et(n,1)}return e=A(i,c.R(e)),new N(c,e)}for(c=ti;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),g=(h=to(n)).R(e);Ls(g)||0<g.X(i);)g=(h=to(n-=o)).R(e);hi(h)&&(h=Gc),c=c.add(h),i=A(i,g)}return new N(c,i)}function de(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new Lr(n,i.h)}function et(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,c=[],h=0;h<o;h++)c[h]=0<e?i.D(h+n)>>>e|i.D(h+n+1)<<32-e:i.D(h+n);return new Lr(c,i.h)}(ke=Lr.prototype).ea=function(){if(Ls(this))return-Er(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:Ja+o)*e,e*=Ja}return i},ke.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(hi(this))return"0";if(Ls(this))return"-"+Er(this).toString(i);for(var e=to(Math.pow(i,6)),n=this,o="";;){var c=W(n,e).g,h=((0<(n=A(n,c.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(hi(n=c))return h+o;for(;6>h.length;)h="0"+h;o=h+o}},ke.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},ke.X=function(i){return Ls(i=A(this,i))?-1:hi(i)?0:1},ke.abs=function(){return Ls(this)?Er(this):this},ke.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,c=0;c<=e;c++){var h=o+(65535&this.D(c))+(65535&i.D(c)),g=(h>>>16)+(this.D(c)>>>16)+(i.D(c)>>>16);o=g>>>16,n[c]=(g&=65535)<<16|(h&=65535)}return new Lr(n,-2147483648&n[n.length-1]?-1:0)},ke.R=function(i){if(hi(this)||hi(i))return ti;if(Ls(this))return Ls(i)?Er(this).R(Er(i)):Er(Er(this).R(i));if(Ls(i))return Er(this.R(Er(i)));if(0>this.X(Is)&&0>i.X(Is))return to(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var c=0;c<i.g.length;c++){var h=this.D(o)>>>16,g=65535&this.D(o),R=i.D(c)>>>16,k=65535&i.D(c);n[2*o+2*c]+=g*k,q(n,2*o+2*c),n[2*o+2*c+1]+=h*k,q(n,2*o+2*c+1),n[2*o+2*c+1]+=g*R,q(n,2*o+2*c+1),n[2*o+2*c+2]+=h*R,q(n,2*o+2*c+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new Lr(n,0)},ke.gb=function(i){return W(this,i).h},ke.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new Lr(n,this.h&i.h)},ke.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new Lr(n,this.h|i.h)},ke.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new Lr(n,this.h^i.h)},hs.prototype.createWebChannel=hs.prototype.g,Fs.prototype.send=Fs.prototype.u,Fs.prototype.open=Fs.prototype.m,Fs.prototype.close=Fs.prototype.close,Go.NO_ERROR=0,Go.TIMEOUT=8,Go.HTTP_ERROR=6,Ka.COMPLETE="complete",$r.EventType=Ss,Ss.OPEN="a",Ss.CLOSE="b",Ss.ERROR="c",Ss.MESSAGE="d",fn.prototype.listen=fn.prototype.O,Rn.prototype.listenOnce=Rn.prototype.P,Rn.prototype.getLastError=Rn.prototype.Sa,Rn.prototype.getLastErrorCode=Rn.prototype.Ia,Rn.prototype.getStatus=Rn.prototype.da,Rn.prototype.getResponseJson=Rn.prototype.Wa,Rn.prototype.getResponseText=Rn.prototype.ja,Rn.prototype.send=Rn.prototype.ha,Rn.prototype.setWithCredentials=Rn.prototype.Oa,eo.prototype.digest=eo.prototype.l,eo.prototype.reset=eo.prototype.reset,eo.prototype.update=eo.prototype.j,Lr.prototype.add=Lr.prototype.add,Lr.prototype.multiply=Lr.prototype.R,Lr.prototype.modulo=Lr.prototype.gb,Lr.prototype.compare=Lr.prototype.X,Lr.prototype.toNumber=Lr.prototype.ea,Lr.prototype.toString=Lr.prototype.toString,Lr.prototype.getBits=Lr.prototype.D,Lr.fromNumber=to,Lr.fromString=function $c(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Er($c(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=to(Math.pow(e,8)),o=ti,c=0;c<i.length;c+=8){var h=Math.min(8,i.length-c),g=parseInt(i.substring(c,c+h),e);8>h?(h=to(Math.pow(e,h)),o=o.R(h).add(to(g))):o=(o=o.R(n)).add(to(g))}return o};var pt=Ut.createWebChannelTransport=function(){return new hs},ln=Ut.getStatEventTarget=function(){return Di()},Xr=Ut.ErrorCode=Go,Gr=Ut.EventType=Ka,ni=Ut.Event=fr,Kn=Ut.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Pr=(Ut.FetchXmlHttpFactory=ve,Ut.WebChannel=$r),as=Ut.XhrIo=Rn,ko=Ut.Md5=eo,zi=Ut.Integer=Lr;const va="@firebase/firestore";class Jn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");let ui="10.8.0";const er=new Me.YJ("@firebase/firestore");function To(){return er.logLevel}function Lt(i,...e){if(er.logLevel<=Me.Ge.DEBUG){const n=e.map(Za);er.debug(`Firestore (${ui}): ${i}`,...n)}}function Jr(i,...e){if(er.logLevel<=Me.Ge.ERROR){const n=e.map(Za);er.error(`Firestore (${ui}): ${i}`,...n)}}function no(i,...e){if(er.logLevel<=Me.Ge.WARN){const n=e.map(Za);er.warn(`Firestore (${ui}): ${i}`,...n)}}function Za(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function on(i="Unexpected state"){const e=`FIRESTORE (${ui}) INTERNAL ASSERTION FAILED: `+i;throw Jr(e),new Error(e)}function hn(i,e){i||on()}function zt(i,e){return i}const ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pt extends Ct.kx{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class fs{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _c{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jn.UNAUTHENTICATED))}shutdown(){}}class yl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Wc{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let c=this.i;const h=B=>this.i!==c?(c=this.i,n(B)):Promise.resolve();let g=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Xi,e.enqueueRetryable(()=>h(this.currentUser))};const R=()=>{const B=g;e.enqueueRetryable((0,me.c)(function*(){yield B.promise,yield h(o.currentUser)}))},k=B=>{Lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=B,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(B=>k(B)),setTimeout(()=>{if(!this.auth){const B=this.t.getImmediate({optional:!0});B?k(B):(Lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Xi)}},0),R()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(Lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(hn("string"==typeof o.accessToken),new fs(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return hn(null===e||"string"==typeof e),new Jn(e)}}class ro{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Gu{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new ro(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ud{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class go{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=h=>{null!=h.error&&Lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const g=h.token!==this.R;return this.R=h.token,Lt("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?n(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>o(h))};const c=h=>{Lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.appCheck.addTokenListener(this.o)};this.A.onInit(h=>c(h)),setTimeout(()=>{if(!this.appCheck){const h=this.A.getImmediate({optional:!0});h?c(h):Lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(hn("string"==typeof n.token),this.R=n.token,new Ud(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Vr(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class ec{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const c=Vr(40);for(let h=0;h<c.length;++h)o.length<20&&c[h]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(c[h]%62))}return o}}function Sn(i,e){return i<e?-1:i>e?1:0}function Ea(i,e,n){return i.length===e.length&&i.every((o,c)=>n(o,e[c]))}function Yo(i){return i+"\0"}class gi{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Pt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Pt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Pt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gi.fromMillis(Date.now())}static fromDate(e){return gi.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new gi(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Sn(this.nanoseconds,e.nanoseconds):Sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mn(e)}static min(){return new mn(new gi(0,0))}static max(){return new mn(new gi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class oa{constructor(e,n,o){void 0===n?n=0:n>e.length&&on(),void 0===o?o=e.length-n:o>e.length-n&&on(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===oa.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oa?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let c=0;c<o;c++){const h=e.get(c),g=n.get(c);if(h<g)return-1;if(h>g)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ur extends oa{construct(e,n,o){return new Ur(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new Pt(ot.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(c=>c.length>0))}return new Ur(n)}static emptyPath(){return new Ur([])}}const Na=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ii extends oa{construct(e,n,o){return new Ii(e,n,o)}static isValidIdentifier(e){return Na.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ii.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ii(["__name__"])}static fromServerFormat(e){const n=[];let o="",c=0;const h=()=>{if(0===o.length)throw new Pt(ot.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let g=!1;for(;c<e.length;){const R=e[c];if("\\"===R){if(c+1===e.length)throw new Pt(ot.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const k=e[c+1];if("\\"!==k&&"."!==k&&"`"!==k)throw new Pt(ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=k,c+=2}else"`"===R?(g=!g,c++):"."!==R||g?(o+=R,c++):(h(),c++)}if(h(),g)throw new Pt(ot.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ii(n)}static emptyPath(){return new Ii([])}}class Jt{constructor(e){this.path=e}static fromPath(e){return new Jt(Ur.fromString(e))}static fromName(e){return new Jt(Ur.fromString(e).popFirst(5))}static empty(){return new Jt(Ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ur.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Ur.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Jt(new Ur(e.slice()))}}class io{constructor(e,n,o,c){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=c}}function ka(i){return i.fields.find(e=>2===e.kind)}function Qo(i){return i.fields.filter(e=>2!==e.kind)}io.UNKNOWN_ID=-1;class pr{constructor(e,n){this.fieldPath=e,this.kind=n}}class Jo{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Jo(0,Cs.min())}}function ri(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,c=mn.fromTimestamp(1e9===o?new gi(n+1,0):new gi(n,o));return new Cs(c,Jt.empty(),e)}function Lo(i){return new Cs(i.readTime,i.key,-1)}class Cs{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Cs(mn.min(),Jt.empty(),-1)}static max(){return new Cs(mn.max(),Jt.empty(),-1)}}function Hc(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Jt.comparator(i.documentKey,e.documentKey),0!==n?n:Sn(i.largestBatchId,e.largestBatchId))}const tc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function so(i){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,me.c)(function*(i){if(i.code!==ot.FAILED_PRECONDITION||i.message!==tc)throw i;Lt("LocalStore","Unexpectedly lost primary lease")}),Iu.apply(this,arguments)}class Ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&on(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ke((o,c)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(o,c)},this.catchCallback=h=>{this.wrapFailure(n,h).next(o,c)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ke?n:Ke.resolve(n)}catch(n){return Ke.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ke.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ke.reject(n)}static resolve(e){return new Ke((n,o)=>{n(e)})}static reject(e){return new Ke((n,o)=>{o(e)})}static waitFor(e){return new Ke((n,o)=>{let c=0,h=0,g=!1;e.forEach(R=>{++c,R.next(()=>{++h,g&&h===c&&n()},k=>o(k))}),g=!0,h===c&&n()})}static or(e){let n=Ke.resolve(!1);for(const o of e)n=n.next(c=>c?Ke.resolve(c):o());return n}static forEach(e,n){const o=[];return e.forEach((c,h)=>{o.push(n.call(this,c,h))}),this.waitFor(o)}static mapArray(e,n){return new Ke((o,c)=>{const h=e.length,g=new Array(h);let R=0;for(let k=0;k<h;k++){const B=k;n(e[B]).next(Y=>{g[B]=Y,++R,R===h&&o(g)},Y=>c(Y))}})}static doWhile(e,n){return new Ke((o,c)=>{const h=()=>{!0===e()?n().next(()=>{h()},c):o()};h()})}}class gr{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Xi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new M(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const c=fe(o.target.error);this.V.reject(new M(e,c))}}static open(e,n,o,c){try{return new gr(n,e.transaction(c,o))}catch(h){throw new M(n,h)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Lt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new x(n)}}class cs{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===cs.S((0,Ct.Su)())&&Jr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Lt("SimpleDb","Removing database:",e),j(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Ct.yy)())return!1;if(cs.C())return!0;const e=(0,Ct.Su)(),n=cs.S(e),o=0<n&&n<10,c=cs.v(e),h=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||h)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,me.c)(function*(){return n.db||(Lt("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,c)=>{const h=indexedDB.open(n.name,n.version);h.onsuccess=g=>{o(g.target.result)},h.onblocked=()=>{c(new M(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=g=>{const R=g.target.error;c("VersionError"===R.name?new Pt(ot.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new Pt(ot.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new M(e,R))},h.onupgradeneeded=g=>{Lt("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',g.oldVersion),n.p.N(g.target.result,h.transaction,g.oldVersion,n.version).next(()=>{Lt("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,c){var h=this;return(0,me.c)(function*(){const g="readonly"===n;let R=0;for(;;){++R;try{h.db=yield h.O(e);const k=gr.open(h.db,e,g?"readonly":"readwrite",o),B=c(k).next(Y=>(k.g(),Y)).catch(Y=>(k.abort(Y),Ke.reject(Y))).toPromise();return B.catch(()=>{}),yield k.m,B}catch(k){const B=k,Y="FirebaseError"!==B.name&&R<3;if(Lt("SimpleDb","Transaction failed with error:",B.message,"Retrying:",Y),h.close(),!Y)return Promise.reject(B)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class w{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return j(this.k.delete())}}class M extends Pt{constructor(e,n){super(ot.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function D(i){return"IndexedDbTransactionError"===i.name}class x{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(Lt("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(Lt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),j(o)}add(e){return Lt("SimpleDb","ADD",this.store.name,e,e),j(this.store.add(e))}get(e){return j(this.store.get(e)).next(n=>(void 0===n&&(n=null),Lt("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Lt("SimpleDb","DELETE",this.store.name,e),j(this.store.delete(e))}count(){return Lt("SimpleDb","COUNT",this.store.name),j(this.store.count())}W(e,n){const o=this.options(e,n),c=o.index?this.store.index(o.index):this.store;if("function"==typeof c.getAll){const h=c.getAll(o.range);return new Ke((g,R)=>{h.onerror=k=>{R(k.target.error)},h.onsuccess=k=>{g(k.target.result)}})}{const h=this.cursor(o),g=[];return this.G(h,(R,k)=>{g.push(k)}).next(()=>g)}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new Ke((c,h)=>{o.onerror=g=>{h(g.target.error)},o.onsuccess=g=>{c(g.target.result)}})}H(e,n){Lt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const c=this.cursor(o);return this.G(c,(h,g,R)=>R.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const c=this.cursor(o);return this.G(c,n)}Z(e){const n=this.cursor({});return new Ke((o,c)=>{n.onerror=h=>{const g=fe(h.target.error);c(g)},n.onsuccess=h=>{const g=h.target.result;g?e(g.primaryKey,g.value).next(R=>{R?g.continue():o()}):o()}})}G(e,n){const o=[];return new Ke((c,h)=>{e.onerror=g=>{h(g.target.error)},e.onsuccess=g=>{const R=g.target.result;if(!R)return void c();const k=new w(R),B=n(R.primaryKey,R.value,k);if(B instanceof Ke){const Y=B.catch(ce=>(k.done(),Ke.reject(ce)));o.push(Y)}k.isDone?c():null===k.$?R.continue():R.continue(k.$)}}).next(()=>Ke.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function j(i){return new Ke((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const c=fe(o.target.error);n(c)}})}let ee=!1;function fe(i){const e=cs.S((0,Ct.Su)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new Pt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ee||(ee=!0,setTimeout(()=>{throw o},0)),o}}return i}class it{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Lt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.c)(function*(){n.task=null;try{Lt("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(o){D(o)?Lt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield so(o)}yield n.ee(6e4)}))}}class Je{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,me.c)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let c=n,h=!0;return Ke.doWhile(()=>!0===h&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return Lt("IndexBackfiller",`Processing collection: ${g}`),this.re(e,g,c).next(R=>{c-=R,o.add(g)});h=!1})).next(()=>n-c)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(c=>this.localStore.localDocuments.getNextDocuments(e,n,c,o).next(h=>{const g=h.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ie(c,h)).next(R=>(Lt("IndexBackfiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,n,R))).next(()=>g.size)}))}ie(e,n){let o=e;return n.changes.forEach((c,h)=>{const g=Lo(h);Hc(g,o)>0&&(o=g)}),new Cs(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Gt=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=c=>this.se(c),this.oe=c=>o.writeSequenceNumber(c))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function jt(i){return null==i}function Xn(i){return 0===i&&1/i==-1/0}function Ri(i){return"number"==typeof i&&Number.isInteger(i)&&!Xn(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function qi(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=La(e)),e=Fa(i.get(n),e);return La(e)}function Fa(i,e){let n=e;const o=i.length;for(let c=0;c<o;c++){const h=i.charAt(c);switch(h){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=h}}return n}function La(i){return i+"\x01\x01"}function mo(i){const e=i.length;if(hn(e>=2),2===e)return hn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Ur.emptyPath();const n=e-2,o=[];let c="";for(let h=0;h<e;){const g=i.indexOf("\x01",h);switch((g<0||g>n)&&on(),i.charAt(g+1)){case"\x01":const R=i.substring(h,g);let k;0===c.length?k=R:(c+=R,k=c,c=""),o.push(k);break;case"\x10":c+=i.substring(h,g),c+="\0";break;case"\x11":c+=i.substring(h,g+1);break;default:on()}h=g+2}return new Ur(o)}const Do=["userId","batchId"];function zc(i,e){return[i,qi(e)]}function Wu(i,e,n){return[i,qi(e),n]}const Hu={},gp=["prefixPath","collectionGroup","readTime","documentId"],qc=["prefixPath","collectionGroup","documentId"],ir=["collectionGroup","readTime","prefixPath","documentId"],xr=["canonicalId","targetId"],jd=["targetId","path"],Kh=["path","targetId"],$d=["collectionId","parent"],Gd=["indexId","uid"],sd=["uid","sequenceNumber"],El=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],od=["indexId","uid","orderedDocumentKey"],Wd=["userId","collectionPath","documentId"],oo=["userId","collectionPath","largestBatchId"],zu=["userId","collectionGroup","largestBatchId"],qu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Yh=[...qu,"documentOverlays"],vc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Kc=vc,Cu=[...Kc,"indexConfiguration","indexState","indexEntries"];class Yc extends yc{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Gs(i,e){const n=zt(i);return cs.M(n.ae,e)}function Hd(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ia(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function nc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Ci{constructor(e,n){this.comparator=e,this.root=n||Vs.EMPTY}insert(e,n){return new Ci(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vs.BLACK,null,null))}remove(e){return new Ci(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const c=this.comparator(e,o.key);if(0===c)return n+o.left.size;c<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ca(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ca(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ca(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ca(this.root,e,this.comparator,!0)}}class Ca{constructor(e,n,o,c){this.isReverse=c,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=n?o(e.key,n):1,n&&c&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(0===h){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vs{constructor(e,n,o,c,h){this.key=e,this.value=n,this.color=o??Vs.RED,this.left=c??Vs.EMPTY,this.right=h??Vs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,c,h){return new Vs(e??this.key,n??this.value,o??this.color,c??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let c=this;const h=o(e,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(e,n,o),null):0===h?c.copy(null,n,null,null,null):c.copy(null,null,null,null,c.right.insert(e,n,o)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Vs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,c=this;if(n(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,n),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===n(e,c.key)){if(c.right.isEmpty())return Vs.EMPTY;o=c.right.min(),c=c.copy(o.key,o.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,n))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw on();const e=this.left.check();if(e!==this.right.check())throw on();return e+(this.isRed()?0:1)}}Vs.EMPTY=null,Vs.RED=!0,Vs.BLACK=!1,Vs.EMPTY=new class{constructor(){this.size=0}get key(){throw on()}get value(){throw on()}get color(){throw on()}get left(){throw on()}get right(){throw on()}copy(e,n,o,c,h){return this}insert(e,n,o){return new Vs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cr{constructor(e){this.comparator=e,this.data=new Ci(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const c=o.getNext();if(this.comparator(c.key,e[1])>=0)return;n(c.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ku(this.data.getIterator())}getIteratorFrom(e){return new Ku(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const c=n.getNext().key,h=o.getNext().key;if(0!==this.comparator(c,h))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new cr(this.comparator);return n.data=e,n}}class Ku{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mr(i){return i.hasNext()?i.getNext():void 0}class ao{constructor(e){this.fields=e,e.sort(Ii.comparator)}static empty(){return new ao([])}unionWith(e){let n=new cr(Ii.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new ao(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Qc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ws{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(c){try{return atob(c)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Qc("Invalid base64 string: "+h):h}}(e);return new ws(n)}static fromUint8Array(e){const n=function(c){let h="";for(let g=0;g<c.length;++g)h+=String.fromCharCode(c[g]);return h}(e);return new ws(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let c=0;c<n.length;c++)o[c]=n.charCodeAt(c);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ws.EMPTY_BYTE_STRING=new ws("");const ad=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ic(i){if(hn(!!i),"string"==typeof i){let e=0;const n=ad.exec(i);if(hn(!!n),n[1]){let c=n[1];c=(c+"000000000").substr(0,9),e=Number(c)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:ps(i.seconds),nanos:ps(i.nanos)}}function ps(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function aa(i){return"string"==typeof i?ws.fromBase64String(i):ws.fromUint8Array(i)}function Cc(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wu(i){const e=i.mapValue.fields.__previous_value__;return Cc(e)?wu(e):e}function rc(i){const e=Ic(i.mapValue.fields.__local_write_time__.timestampValue);return new gi(e.seconds,e.nanos)}class Tu{constructor(e,n,o,c,h,g,R,k,B){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=c,this.ssl=h,this.forceLongPolling=g,this.autoDetectLongPolling=R,this.longPollingOptions=k,this.useFetchStreams=B}}class gs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new gs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gs&&e.projectId===this.projectId&&e.database===this.database}}const Xo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jc={nullValue:"NULL_VALUE"};function Ts(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Cc(i)?4:ld(i)?9007199254740991:10:on()}function co(i,e){if(i===e)return!0;const n=Ts(i);if(n!==Ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return rc(i).isEqual(rc(e));case 3:return function(c,h){if("string"==typeof c.timestampValue&&"string"==typeof h.timestampValue&&c.timestampValue.length===h.timestampValue.length)return c.timestampValue===h.timestampValue;const g=Ic(c.timestampValue),R=Ic(h.timestampValue);return g.seconds===R.seconds&&g.nanos===R.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return h=e,aa(i.bytesValue).isEqual(aa(h.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(c,h){return ps(c.geoPointValue.latitude)===ps(h.geoPointValue.latitude)&&ps(c.geoPointValue.longitude)===ps(h.geoPointValue.longitude)}(i,e);case 2:return function(c,h){if("integerValue"in c&&"integerValue"in h)return ps(c.integerValue)===ps(h.integerValue);if("doubleValue"in c&&"doubleValue"in h){const g=ps(c.doubleValue),R=ps(h.doubleValue);return g===R?Xn(g)===Xn(R):isNaN(g)&&isNaN(R)}return!1}(i,e);case 9:return Ea(i.arrayValue.values||[],e.arrayValue.values||[],co);case 10:return function(c,h){const g=c.mapValue.fields||{},R=h.mapValue.fields||{};if(Hd(g)!==Hd(R))return!1;for(const k in g)if(g.hasOwnProperty(k)&&(void 0===R[k]||!co(g[k],R[k])))return!1;return!0}(i,e);default:return on()}var h}function Vo(i,e){return void 0!==(i.values||[]).find(n=>co(n,e))}function Va(i,e){if(i===e)return 0;const n=Ts(i),o=Ts(e);if(n!==o)return Sn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Sn(i.booleanValue,e.booleanValue);case 2:return function(h,g){const R=ps(h.integerValue||h.doubleValue),k=ps(g.integerValue||g.doubleValue);return R<k?-1:R>k?1:R===k?0:isNaN(R)?isNaN(k)?0:-1:1}(i,e);case 3:return Yu(i.timestampValue,e.timestampValue);case 4:return Yu(rc(i),rc(e));case 5:return Sn(i.stringValue,e.stringValue);case 6:return function(h,g){const R=aa(h),k=aa(g);return R.compareTo(k)}(i.bytesValue,e.bytesValue);case 7:return function(h,g){const R=h.split("/"),k=g.split("/");for(let B=0;B<R.length&&B<k.length;B++){const Y=Sn(R[B],k[B]);if(0!==Y)return Y}return Sn(R.length,k.length)}(i.referenceValue,e.referenceValue);case 8:return function(h,g){const R=Sn(ps(h.latitude),ps(g.latitude));return 0!==R?R:Sn(ps(h.longitude),ps(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(h,g){const R=h.values||[],k=g.values||[];for(let B=0;B<R.length&&B<k.length;++B){const Y=Va(R[B],k[B]);if(Y)return Y}return Sn(R.length,k.length)}(i.arrayValue,e.arrayValue);case 10:return function(h,g){if(h===Xo.mapValue&&g===Xo.mapValue)return 0;if(h===Xo.mapValue)return 1;if(g===Xo.mapValue)return-1;const R=h.fields||{},k=Object.keys(R),B=g.fields||{},Y=Object.keys(B);k.sort(),Y.sort();for(let ce=0;ce<k.length&&ce<Y.length;++ce){const Ae=Sn(k[ce],Y[ce]);if(0!==Ae)return Ae;const Ye=Va(R[k[ce]],B[Y[ce]]);if(0!==Ye)return Ye}return Sn(k.length,Y.length)}(i.mapValue,e.mapValue);default:throw on()}}function Yu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Sn(i,e);const n=Ic(i),o=Ic(e),c=Sn(n.seconds,o.seconds);return 0!==c?c:Sn(n.nanos,o.nanos)}function wa(i){return cd(i)}function cd(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=Ic(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?aa(i.bytesValue).toBase64():"referenceValue"in i?Jt.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",c=!0;for(const h of n.values||[])c?c=!1:o+=",",o+=cd(h);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let c="{",h=!0;for(const g of o)h?h=!1:c+=",",c+=`${g}:${cd(n.fields[g])}`;return c+"}"}(i.mapValue):on()}function Ta(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ca(i){return!!i&&"integerValue"in i}function Ua(i){return!!i&&"arrayValue"in i}function zd(i){return!!i&&"nullValue"in i}function ud(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Du(i){return!!i&&"mapValue"in i}function ua(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ia(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=ua(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ua(i.arrayValue.values[n]);return e}return Object.assign({},i)}function ld(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Qh(i){return"nullValue"in i?Jc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ta(gs.empty(),Jt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:on()}function Tc(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ta(gs.empty(),Jt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Xo:on()}function Au(i,e){const n=Va(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Il(i,e){const n=Va(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Zi{constructor(e){this.value=e}static empty(){return new Zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Du(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ua(n)}setAll(e){let n=Ii.emptyPath(),o={},c=[];e.forEach((g,R)=>{if(!n.isImmediateParentOf(R)){const k=this.getFieldsMap(n);this.applyChanges(k,o,c),o={},c=[],n=R.popLast()}g?o[R.lastSegment()]=ua(g):c.push(R.lastSegment())});const h=this.getFieldsMap(n);this.applyChanges(h,o,c)}delete(e){const n=this.field(e.popLast());Du(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return co(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let c=n.mapValue.fields[e.get(o)];Du(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=c),n=c}return n.mapValue.fields}applyChanges(e,n,o){Ia(n,(c,h)=>e[c]=h);for(const c of o)delete e[c]}clone(){return new Zi(ua(this.value))}}function qd(i){const e=[];return Ia(i.fields,(n,o)=>{const c=new Ii([n]);if(Du(o)){const h=qd(o.mapValue).fields;if(0===h.length)e.push(c);else for(const g of h)e.push(c.child(g))}else e.push(c)}),new ao(e)}class Vi{constructor(e,n,o,c,h,g,R){this.key=e,this.documentType=n,this.version=o,this.readTime=c,this.createTime=h,this.data=g,this.documentState=R}static newInvalidDocument(e){return new Vi(e,0,mn.min(),mn.min(),mn.min(),Zi.empty(),0)}static newFoundDocument(e,n,o,c){return new Vi(e,1,n,mn.min(),o,c,0)}static newNoDocument(e,n){return new Vi(e,2,n,mn.min(),mn.min(),Zi.empty(),0)}static newUnknownDocument(e,n){return new Vi(e,3,n,mn.min(),mn.min(),Zi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(mn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ao{constructor(e,n){this.position=e,this.inclusive=n}}function Su(i,e,n){let o=0;for(let c=0;c<i.position.length;c++){const h=e[c],g=i.position[c];if(o=h.field.isKeyField()?Jt.comparator(Jt.fromName(g.referenceValue),n.key):Va(g,n.data.field(h.field)),"desc"===h.dir&&(o*=-1),0!==o)break}return o}function Dc(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!co(i.position[n],e.position[n]))return!1;return!0}class ic{constructor(e,n="asc"){this.field=e,this.dir=n}}function dd(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Qu{}class br extends Qu{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new wl(e,n,o):"array-contains"===n?new ac(e,o):"in"===n?new Ba(e,o):"not-in"===n?new ja(e,o):"array-contains-any"===n?new bu(e,o):new br(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new hd(e,o):new Xc(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Va(n,this.value)):null!==n&&Ts(this.value)===Ts(n)&&this.matchesComparison(Va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return on()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wr extends Qu{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Wr(e,n)}matches(e){return Da(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Da(i){return"and"===i.op}function Ac(i){return"or"===i.op}function Sc(i){return Ju(i)&&Da(i)}function Ju(i){for(const e of i.filters)if(e instanceof Wr)return!1;return!0}function sc(i){if(i instanceof br)return i.field.canonicalString()+i.op.toString()+wa(i.value);if(Sc(i))return i.filters.map(e=>sc(e)).join(",");{const e=i.filters.map(n=>sc(n)).join(",");return`${i.op}(${e})`}}function oc(i,e){return i instanceof br?(o=i,(c=e)instanceof br&&o.op===c.op&&o.field.isEqual(c.field)&&co(o.value,c.value)):i instanceof Wr?function(o,c){return c instanceof Wr&&o.op===c.op&&o.filters.length===c.filters.length&&o.filters.reduce((h,g,R)=>h&&oc(g,c.filters[R]),!0)}(i,e):void on();var o,c}function Kd(i,e){const n=i.filters.concat(e);return Wr.create(n,i.op)}function Cl(i){return i instanceof br?`${(n=i).field.canonicalString()} ${n.op} ${wa(n.value)}`:i instanceof Wr?function(n){return n.op.toString()+" {"+n.getFilters().map(Cl).join(" ,")+"}"}(i):"Filter";var n}class wl extends br{constructor(e,n,o){super(e,n,o),this.key=Jt.fromName(o.referenceValue)}matches(e){const n=Jt.comparator(e.key,this.key);return this.matchesComparison(n)}}class hd extends br{constructor(e,n){super(e,"in",n),this.keys=Pu(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Xc extends br{constructor(e,n){super(e,"not-in",n),this.keys=Pu(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Pu(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>Jt.fromName(o.referenceValue))}class ac extends br{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ua(n)&&Vo(n.arrayValue,this.value)}}class Ba extends br{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Vo(this.value.arrayValue,n)}}class ja extends br{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Vo(this.value.arrayValue,n)}}class bu extends br{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ua(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Vo(this.value.arrayValue,o))}}class Pc{constructor(e,n=null,o=[],c=[],h=null,g=null,R=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=c,this.limit=h,this.startAt=g,this.endAt=R,this.ce=null}}function Zc(i,e=null,n=[],o=[],c=null,h=null,g=null){return new Pc(i,e,n,o,c,h,g)}function Aa(i){const e=zt(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>sc(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(h=o).field.canonicalString()+h.dir;var h}).join(","),jt(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>wa(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>wa(o)).join(",")),e.ce=n}return e.ce}function eu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!dd(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!oc(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Dc(i.startAt,e.startAt)&&Dc(i.endAt,e.endAt)}function Xu(i){return Jt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Sa(i,e){return i.filters.filter(n=>n instanceof br&&n.field.isEqual(e))}function fd(i,e,n){let o=Jc,c=!0;for(const h of Sa(i,e)){let g=Jc,R=!0;switch(h.op){case"<":case"<=":g=Qh(h.value);break;case"==":case"in":case">=":g=h.value;break;case">":g=h.value,R=!1;break;case"!=":case"not-in":g=Jc}Au({value:o,inclusive:c},{value:g,inclusive:R})<0&&(o=g,c=R)}if(null!==n)for(let h=0;h<i.orderBy.length;++h)if(i.orderBy[h].field.isEqual(e)){const g=n.position[h];Au({value:o,inclusive:c},{value:g,inclusive:n.inclusive})<0&&(o=g,c=n.inclusive);break}return{value:o,inclusive:c}}function Tl(i,e,n){let o=Xo,c=!0;for(const h of Sa(i,e)){let g=Xo,R=!0;switch(h.op){case">=":case">":g=Tc(h.value),R=!1;break;case"==":case"in":case"<=":g=h.value;break;case"<":g=h.value,R=!1;break;case"!=":case"not-in":g=Xo}Il({value:o,inclusive:c},{value:g,inclusive:R})>0&&(o=g,c=R)}if(null!==n)for(let h=0;h<i.orderBy.length;++h)if(i.orderBy[h].field.isEqual(e)){const g=n.position[h];Il({value:o,inclusive:c},{value:g,inclusive:n.inclusive})>0&&(o=g,c=n.inclusive);break}return{value:o,inclusive:c}}class $a{constructor(e,n=null,o=[],c=[],h=null,g="F",R=null,k=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=c,this.limit=h,this.limitType=g,this.startAt=R,this.endAt=k,this.le=null,this.he=null,this.Pe=null}}function Dl(i,e,n,o,c,h,g,R){return new $a(i,e,n,o,c,h,g,R)}function cc(i){return new $a(i)}function Ru(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function T(i){return null!==i.collectionGroup}function m(i){const e=zt(i);if(null===e.le){e.le=[];const n=new Set;for(const h of e.explicitOrderBy)e.le.push(h),n.add(h.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let R=new cr(Ii.comparator);return g.filters.forEach(k=>{k.getFlattenedFilters().forEach(B=>{B.isInequality()&&(R=R.add(B.field))})}),R})(e).forEach(h=>{n.has(h.canonicalString())||h.isKeyField()||e.le.push(new ic(h,o))}),n.has(Ii.keyField().canonicalString())||e.le.push(new ic(Ii.keyField(),o))}return e.le}function v(i){const e=zt(i);return e.he||(e.he=function S(i,e){if("F"===i.limitType)return Zc(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(c=>new ic(c.field,"desc"===c.dir?"asc":"desc"));const n=i.endAt?new Ao(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new Ao(i.startAt.position,i.startAt.inclusive):null;return Zc(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,m(i))),e.he}function H(i,e){const n=i.filters.concat([e]);return new $a(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function ne(i,e,n){return new $a(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function be(i,e){return eu(v(i),v(e))&&i.limitType===e.limitType}function nt(i){return`${Aa(v(i))}|lt:${i.limitType}`}function St(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(c=>Cl(c)).join(", ")}]`),jt(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(c=>{return`${(g=c).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(c=>wa(c)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(c=>wa(c)).join(",")),`Target(${o})`}(v(i))}; limitType=${i.limitType})`}function dn(i,e){return e.isFoundDocument()&&function(o,c){const h=c.key.path;return null!==o.collectionGroup?c.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(h):Jt.isDocumentKey(o.path)?o.path.isEqual(h):o.path.isImmediateParentOf(h)}(i,e)&&function(o,c){for(const h of m(o))if(!h.field.isKeyField()&&null===c.data.field(h.field))return!1;return!0}(i,e)&&function(o,c){for(const h of o.filters)if(!h.matches(c))return!1;return!0}(i,e)&&(c=e,!((o=i).startAt&&!function(g,R,k){const B=Su(g,R,k);return g.inclusive?B<=0:B<0}(o.startAt,m(o),c)||o.endAt&&!function(g,R,k){const B=Su(g,R,k);return g.inclusive?B>=0:B>0}(o.endAt,m(o),c)));var o,c}function Pn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function tr(i){return(e,n)=>{let o=!1;for(const c of m(i)){const h=_o(c,e,n);if(0!==h)return h;o=o||c.field.isKeyField()}return 0}}function _o(i,e,n){const o=i.field.isKeyField()?Jt.comparator(e.key,n.key):function(h,g,R){const k=g.data.field(h),B=R.data.field(h);return null!==k&&null!==B?Va(k,B):on()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return on()}}class ms{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[c,h]of o)if(this.equalsFn(c,e))return h}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),c=this.inner[o];if(void 0===c)return this.inner[o]=[[e,n]],void this.innerSize++;for(let h=0;h<c.length;h++)if(this.equalsFn(c[h][0],e))return void(c[h]=[e,n]);c.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return 1===o.length?delete this.inner[n]:o.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,(n,o)=>{for(const[c,h]of o)e(c,h)})}isEmpty(){return nc(this.inner)}size(){return this.innerSize}}const tu=new Ci(Jt.comparator);function yo(){return tu}const vo=new Ci(Jt.comparator);function uc(...i){let e=vo;for(const n of i)e=e.insert(n.key,n);return e}function pd(i){let e=vo;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function So(){return Mu()}function bc(){return Mu()}function Mu(){return new ms(i=>i.toString(),(i,e)=>i.isEqual(e))}const gd=new Ci(Jt.comparator),_s=new cr(Jt.comparator);function nr(...i){let e=_s;for(const n of i)e=e.add(n);return e}const Al=new cr(Sn);function Rc(){return Al}function mp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xn(e)?"-0":e}}function Yd(i){return{integerValue:""+i}}function md(i,e){return Ri(e)?Yd(e):mp(i,e)}class Qd{constructor(){this._=void 0}}function Jh(i,e,n){return i instanceof nu?function(c,h){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return h&&Cc(h)&&(h=wu(h)),h&&(g.fields.__previous_value__=h),{mapValue:g}}(n,e):i instanceof Ou?Xh(i,e):i instanceof ru?Zh(i,e):function(c,h){const g=Jd(c,h),R=ef(g)+ef(c.Ie);return ca(g)&&ca(c.Ie)?Yd(R):mp(c.serializer,R)}(i,e)}function lm(i,e,n){return i instanceof Ou?Xh(i,e):i instanceof ru?Zh(i,e):n}function Jd(i,e){return i instanceof xu?ca(o=e)||(h=o)&&"doubleValue"in h?e:{integerValue:0}:null;var o,h}class nu extends Qd{}class Ou extends Qd{constructor(e){super(),this.elements=e}}function Xh(i,e){const n=tf(e);for(const o of i.elements)n.some(c=>co(c,o))||n.push(o);return{arrayValue:{values:n}}}class ru extends Qd{constructor(e){super(),this.elements=e}}function Zh(i,e){let n=tf(e);for(const o of i.elements)n=n.filter(c=>!co(c,o));return{arrayValue:{values:n}}}class xu extends Qd{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function ef(i){return ps(i.integerValue||i.doubleValue)}function tf(i){return Ua(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class lc{constructor(e,n){this.field=e,this.transform=n}}class nf{constructor(e,n){this.version=e,this.transformResults=n}}class Ki{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ki}static exists(e){return new Ki(void 0,e)}static updateTime(e){return new Ki(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uo(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Xd{}function Mc(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new xc(i.key,Ki.none()):new Oc(i.key,i.data,Ki.none());{const n=i.data,o=Zi.empty();let c=new cr(Ii.comparator);for(let h of e.fields)if(!c.has(h)){let g=n.field(h);null===g&&h.length>1&&(h=h.popLast(),g=n.field(h)),null===g?o.delete(h):o.set(h,g),c=c.add(h)}return new dc(i.key,o,new ao(c.toArray()),Ki.none())}}function Zd(i,e,n){i instanceof Oc?function(c,h,g){const R=c.value.clone(),k=Sl(c.fieldTransforms,h,g.transformResults);R.setAll(k),h.convertToFoundDocument(g.version,R).setHasCommittedMutations()}(i,e,n):i instanceof dc?function(c,h,g){if(!Uo(c.precondition,h))return void h.convertToUnknownDocument(g.version);const R=Sl(c.fieldTransforms,h,g.transformResults),k=h.data;k.setAll(su(c)),k.setAll(R),h.convertToFoundDocument(g.version,k).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function iu(i,e,n,o){return i instanceof Oc?function(h,g,R,k){if(!Uo(h.precondition,g))return R;const B=h.value.clone(),Y=_p(h.fieldTransforms,k,g);return B.setAll(Y),g.convertToFoundDocument(g.version,B).setHasLocalMutations(),null}(i,e,n,o):i instanceof dc?function(h,g,R,k){if(!Uo(h.precondition,g))return R;const B=_p(h.fieldTransforms,k,g),Y=g.data;return Y.setAll(su(h)),Y.setAll(B),g.convertToFoundDocument(g.version,Y).setHasLocalMutations(),null===R?null:R.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(ce=>ce.field))}(i,e,n,o):(R=n,Uo(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):R);var g,R}function eh(i,e){let n=null;for(const o of i.fieldTransforms){const c=e.data.field(o.field),h=Jd(o.transform,c||null);null!=h&&(null===n&&(n=Zi.empty()),n.set(o.field,h))}return n||null}function th(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(c=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===c||o&&c&&Ea(o,c,(h,g)=>function Nu(i,e){return i.field.isEqual(e.field)&&(c=e.transform,(o=i.transform)instanceof Ou&&c instanceof Ou||o instanceof ru&&c instanceof ru?Ea(o.elements,c.elements,co):o instanceof xu&&c instanceof xu?co(o.Ie,c.Ie):o instanceof nu&&c instanceof nu);var o,c}(h,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,c}class Oc extends Xd{constructor(e,n,o,c=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class dc extends Xd{constructor(e,n,o,c,h=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=c,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function su(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Sl(i,e,n){const o=new Map;hn(i.length===n.length);for(let c=0;c<n.length;c++){const h=i[c],g=h.transform,R=e.data.field(h.field);o.set(h.field,lm(g,R,n[c]))}return o}function _p(i,e,n){const o=new Map;for(const c of i){const h=c.transform,g=n.data.field(c.field);o.set(c.field,Jh(h,g,e))}return o}class xc extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rf extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nh{constructor(e,n,o,c){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=c}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let c=0;c<this.mutations.length;c++){const h=this.mutations[c];h.key.isEqual(e.key)&&Zd(h,e,o[c])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=iu(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=iu(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=bc();return this.mutations.forEach(c=>{const h=e.get(c.key),g=h.overlayedDocument;let R=this.applyToLocalView(g,h.mutatedFields);R=n.has(c.key)?null:R;const k=Mc(g,R);null!==k&&o.set(c.key,k),g.isValidDocument()||g.convertToNoDocument(mn.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),nr())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(n,o)=>th(n,o))&&Ea(this.baseMutations,e.baseMutations,(n,o)=>th(n,o))}}class sf{constructor(e,n,o,c){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=c}static from(e,n,o){hn(e.mutations.length===o.length);let c=function(){return gd}();const h=e.mutations;for(let g=0;g<h.length;g++)c=c.insert(h[g].key,o[g].version);return new sf(e,n,o,c)}}class af{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class _d{constructor(e,n){this.count=e,this.unchangedNames=n}}var us,ur;function ou(i){switch(i){default:return on();case ot.CANCELLED:case ot.UNKNOWN:case ot.DEADLINE_EXCEEDED:case ot.RESOURCE_EXHAUSTED:case ot.INTERNAL:case ot.UNAVAILABLE:case ot.UNAUTHENTICATED:return!1;case ot.INVALID_ARGUMENT:case ot.NOT_FOUND:case ot.ALREADY_EXISTS:case ot.PERMISSION_DENIED:case ot.FAILED_PRECONDITION:case ot.ABORTED:case ot.OUT_OF_RANGE:case ot.UNIMPLEMENTED:case ot.DATA_LOSS:return!0}}function hc(i){if(void 0===i)return Jr("GRPC error has no .code"),ot.UNKNOWN;switch(i){case us.OK:return ot.OK;case us.CANCELLED:return ot.CANCELLED;case us.UNKNOWN:return ot.UNKNOWN;case us.DEADLINE_EXCEEDED:return ot.DEADLINE_EXCEEDED;case us.RESOURCE_EXHAUSTED:return ot.RESOURCE_EXHAUSTED;case us.INTERNAL:return ot.INTERNAL;case us.UNAVAILABLE:return ot.UNAVAILABLE;case us.UNAUTHENTICATED:return ot.UNAUTHENTICATED;case us.INVALID_ARGUMENT:return ot.INVALID_ARGUMENT;case us.NOT_FOUND:return ot.NOT_FOUND;case us.ALREADY_EXISTS:return ot.ALREADY_EXISTS;case us.PERMISSION_DENIED:return ot.PERMISSION_DENIED;case us.FAILED_PRECONDITION:return ot.FAILED_PRECONDITION;case us.ABORTED:return ot.ABORTED;case us.OUT_OF_RANGE:return ot.OUT_OF_RANGE;case us.UNIMPLEMENTED:return ot.UNIMPLEMENTED;case us.DATA_LOSS:return ot.DATA_LOSS;default:return on()}}(ur=us||(us={}))[ur.OK=0]="OK",ur[ur.CANCELLED=1]="CANCELLED",ur[ur.UNKNOWN=2]="UNKNOWN",ur[ur.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ur[ur.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ur[ur.NOT_FOUND=5]="NOT_FOUND",ur[ur.ALREADY_EXISTS=6]="ALREADY_EXISTS",ur[ur.PERMISSION_DENIED=7]="PERMISSION_DENIED",ur[ur.UNAUTHENTICATED=16]="UNAUTHENTICATED",ur[ur.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ur[ur.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ur[ur.ABORTED=10]="ABORTED",ur[ur.OUT_OF_RANGE=11]="OUT_OF_RANGE",ur[ur.UNIMPLEMENTED=12]="UNIMPLEMENTED",ur[ur.INTERNAL=13]="INTERNAL",ur[ur.UNAVAILABLE=14]="UNAVAILABLE",ur[ur.DATA_LOSS=15]="DATA_LOSS";function fc(){return new TextEncoder}const ku=new zi([4294967295,4294967295],0);function cf(i){const e=fc().encode(i),n=new ko;return n.update(e),new Uint8Array(n.digest())}function hm(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),c=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new zi([n,o],0),new zi([c,h],0)]}class Po{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new rh(`Invalid padding: ${n}`);if(o<0)throw new rh(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new rh(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new rh(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=zi.fromNumber(this.Te)}de(e,n,o){let c=e.add(n.multiply(zi.fromNumber(o)));return 1===c.compare(ku)&&(c=new zi([c.getBits(0),c.getBits(1)],0)),c.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=cf(e),[o,c]=hm(n);for(let h=0;h<this.hashCount;h++){const g=this.de(o,c,h);if(!this.Ae(g))return!1}return!0}static create(e,n,o){const c=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),g=new Po(h,c,n);return o.forEach(R=>g.insert(R)),g}insert(e){if(0===this.Te)return;const n=cf(e),[o,c]=hm(n);for(let h=0;h<this.hashCount;h++){const g=this.de(o,c,h);this.Re(g)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class rh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zu{constructor(e,n,o,c,h){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=c,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const c=new Map;return c.set(e,Pl.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Zu(mn.min(),c,new Ci(Sn),yo(),nr())}}class Pl{constructor(e,n,o,c,h){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=c,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Pl(o,n,nr(),nr(),nr())}}class bl{constructor(e,n,o,c){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=c}}class ih{constructor(e,n){this.targetId=e,this.fe=n}}class uf{constructor(e,n,o=ws.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=c}}class fm{constructor(){this.ge=0,this.pe=Rl(),this.ye=ws.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=nr(),n=nr(),o=nr();return this.pe.forEach((c,h)=>{switch(h){case 0:e=e.add(c);break;case 2:n=n.add(c);break;case 1:o=o.add(c);break;default:on()}}),new Pl(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=Rl()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,hn(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class pm{constructor(e){this.Le=e,this.ke=new Map,this.qe=yo(),this.Qe=el(),this.Ke=new Ci(Sn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:on()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,c)=>{this.je(c)&&n(c)})}Je(e){const n=e.targetId,o=e.fe.count,c=this.Ye(n);if(c){const h=c.target;if(Xu(h))if(0===o){const g=new Jt(h.path);this.We(n,g,Vi.newNoDocument(g,mn.min()))}else hn(1===o);else{const g=this.Ze(n);if(g!==o){const R=this.Xe(e),k=R?this.et(R,e,g):1;0!==k&&(this.He(n),this.Ke=this.Ke.insert(n,2===k?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:c=0},hashCount:h=0}=n;let g,R;try{g=aa(o).toUint8Array()}catch(k){if(k instanceof Qc)return no("Decoding the base64 bloom filter in existence filter failed ("+k.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw k}try{R=new Po(g,c,h)}catch(k){return no(k instanceof rh?"BloomFilter error: ":"Applying bloom filter failed: ",k),null}return 0===R.Te?null:R}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let c=0;return o.forEach(h=>{const g=this.Le.nt(),R=`projects/${g.projectId}/databases/${g.database}/documents/${h.path.canonicalString()}`;e.mightContain(R)||(this.We(n,h,null),c++)}),c}it(e){const n=new Map;this.ke.forEach((h,g)=>{const R=this.Ye(g);if(R){if(h.current&&Xu(R.target)){const k=new Jt(R.target.path);null!==this.qe.get(k)||this.st(g,k)||this.We(g,k,Vi.newNoDocument(k,e))}h.De&&(n.set(g,h.ve()),h.Fe())}});let o=nr();this.Qe.forEach((h,g)=>{let R=!0;g.forEachWhile(k=>{const B=this.Ye(k);return!B||"TargetPurposeLimboResolution"===B.purpose||(R=!1,!1)}),R&&(o=o.add(h))}),this.qe.forEach((h,g)=>g.setReadTime(e));const c=new Zu(e,n,this.Ke,this.qe,o);return this.qe=yo(),this.Qe=el(),this.Ke=new Ci(Sn),c}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const c=this.ze(e);this.st(e,n)?c.Me(n,1):c.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new fm,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new cr(Sn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Lt("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new fm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function el(){return new Ci(Jt.comparator)}function Rl(){return new Ci(Jt.comparator)}const Ml={asc:"ASCENDING",desc:"DESCENDING"},gm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lf={and:"AND",or:"OR"};class Ol{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yp(i,e){return i.useProto3Json||jt(e)?e:{value:e}}function xl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vp(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Bo(i,e){return xl(i,e.toTimestamp())}function Ui(i){return hn(!!i),mn.fromTimestamp(function(n){const o=Ic(n);return new gi(o.seconds,o.nanos)}(i))}function Ws(i,e){return df(i,e).canonicalString()}function df(i,e){const n=(c=i,new Ur(["projects",c.projectId,"databases",c.database])).child("documents");var c;return void 0===e?n:n.child(e)}function Ep(i){const e=Ur.fromString(i);return hn(gf(e)),e}function Fu(i,e){return Ws(i.databaseId,e.path)}function au(i,e){const n=Ep(e);if(n.get(1)!==i.databaseId.projectId)throw new Pt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Pt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Jt(Ip(n))}function hf(i,e){return Ws(i.databaseId,e)}function ff(i){const e=Ep(i);return 4===e.length?Ur.emptyPath():Ip(e)}function pf(i){return new Ur(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ip(i){return hn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function sh(i,e,n){return{name:Fu(i,e),fields:n.value.mapValue.fields}}function oh(i,e,n){const o=au(i,e.name),c=Ui(e.updateTime),h=e.createTime?Ui(e.createTime):mn.min(),g=new Zi({mapValue:{fields:e.fields}}),R=Vi.newFoundDocument(o,c,h,g);return n&&R.setHasCommittedMutations(),n?R.setHasCommittedMutations():R}function yd(i,e){let n;if(e instanceof Oc)n={update:sh(i,e.key,e.value)};else if(e instanceof xc)n={delete:Fu(i,e.key)};else if(e instanceof dc)n={update:sh(i,e.key,e.data),updateMask:Lu(e.fieldMask)};else{if(!(e instanceof rf))return on();n={verify:Fu(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(h,g){const R=g.transform;if(R instanceof nu)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(R instanceof Ou)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:R.elements}};if(R instanceof ru)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:R.elements}};if(R instanceof xu)return{fieldPath:g.field.canonicalString(),increment:R.Ie};throw on()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Bo(i,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:on()),n;var h}function wp(i,e){const n=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Ki.updateTime(Ui(h.updateTime)):void 0!==h.exists?Ki.exists(h.exists):Ki.none():Ki.none(),o=e.updateTransforms?e.updateTransforms.map(c=>function(g,R){let k=null;"setToServerValue"in R?(hn("REQUEST_TIME"===R.setToServerValue),k=new nu):"appendMissingElements"in R?k=new Ou(R.appendMissingElements.values||[]):"removeAllFromArray"in R?k=new ru(R.removeAllFromArray.values||[]):"increment"in R?k=new xu(g,R.increment):on();const B=Ii.fromServerFormat(R.fieldPath);return new lc(B,k)}(i,c)):[];var h;if(e.update){const c=au(i,e.update.name),h=new Zi({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new ao((e.updateMask.fieldPaths||[]).map(Y=>Ii.fromServerFormat(Y)));return new dc(c,h,g,n,o)}return new Oc(c,h,n,o)}if(e.delete){const c=au(i,e.delete);return new xc(c,n)}if(e.verify){const c=au(i,e.verify);return new rf(c,n)}return on()}function mm(i,e){return{documents:[hf(i,e.path)]}}function ah(i,e){const n={structuredQuery:{}},o=e.path;let c;null!==e.collectionGroup?(c=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=hf(i,c);const h=function(B){if(0!==B.length)return Ed(Wr.create(B,"and"))}(e.filters);h&&(n.structuredQuery.where=h);const g=function(B){if(0!==B.length)return B.map(Y=>{return{field:kc((Ae=Y).field),direction:vm(Ae.dir)};var Ae})}(e.orderBy);g&&(n.structuredQuery.orderBy=g);const R=yp(i,e.limit);return null!==R&&(n.structuredQuery.limit=R),e.startAt&&(n.structuredQuery.startAt={before:(B=e.startAt).inclusive,values:B.position}),e.endAt&&(n.structuredQuery.endAt=function(B){return{before:!B.inclusive,values:B.position}}(e.endAt)),{ut:n,parent:c};var B}function _m(i){let e=ff(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let c=null;if(o>0){hn(1===o);const Y=n.from[0];Y.allDescendants?c=Y.collectionId:e=e.child(Y.collectionId)}let h=[];n.where&&(h=function(ce){const Ae=ay(ce);return Ae instanceof Wr&&Sc(Ae)?Ae.getFilters():[Ae]}(n.where));let g=[];n.orderBy&&(g=n.orderBy.map(Ae=>{return new ic(vd((Wt=Ae).field),function(tn){switch(tn){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Wt.direction));var Wt}));let R=null;n.limit&&(R=function(ce){let Ae;return Ae="object"==typeof ce?ce.value:ce,jt(Ae)?null:Ae}(n.limit));let k=null;var ce;n.startAt&&(k=new Ao((ce=n.startAt).values||[],!!ce.before));let B=null;return n.endAt&&(B=function(ce){return new Ao(ce.values||[],!ce.before)}(n.endAt)),Dl(e,c,g,h,R,"F",k,B)}function ay(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=vd(n.unaryFilter.field);return br.create(o,"==",{doubleValue:NaN});case"IS_NULL":const c=vd(n.unaryFilter.field);return br.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=vd(n.unaryFilter.field);return br.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=vd(n.unaryFilter.field);return br.create(g,"!=",{nullValue:"NULL_VALUE"});default:return on()}}(i):void 0!==i.fieldFilter?br.create(vd((n=i).fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return on()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return Wr.create(n.compositeFilter.filters.map(o=>ay(o)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return on()}}(n.compositeFilter.op))}(i):on();var n}function vm(i){return Ml[i]}function Dp(i){return gm[i]}function la(i){return lf[i]}function kc(i){return{fieldPath:i.canonicalString()}}function vd(i){return Ii.fromServerFormat(i.fieldPath)}function Ed(i){return i instanceof br?function(n){if("=="===n.op){if(ud(n.value))return{unaryFilter:{field:kc(n.field),op:"IS_NAN"}};if(zd(n.value))return{unaryFilter:{field:kc(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(ud(n.value))return{unaryFilter:{field:kc(n.field),op:"IS_NOT_NAN"}};if(zd(n.value))return{unaryFilter:{field:kc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kc(n.field),op:Dp(n.op),value:n.value}}}(i):i instanceof Wr?function(n){const o=n.getFilters().map(c=>Ed(c));return 1===o.length?o[0]:{compositeFilter:{op:la(n.op),filters:o}}}(i):on()}function Lu(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Ga{constructor(e,n,o,c,h=mn.min(),g=mn.min(),R=ws.EMPTY_BYTE_STRING,k=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=c,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=R,this.expectedCount=k}withSequenceNumber(e){return new Ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mf{constructor(e){this.ct=e}}function ch(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Id(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Fu(h=i.ct,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:xl(h,g.version.toTimestamp()),createTime:xl(h,g.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Wa(e.version)};else{if(!e.isUnknownDocument())return on();o.unknownDocument={path:n.path.toArray(),version:Wa(e.version)}}var h,g;return o}function Id(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Wa(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function tl(i){const e=new gi(i.seconds,i.nanoseconds);return mn.fromTimestamp(e)}function Nl(i,e){const n=(e.baseMutations||[]).map(h=>wp(i.ct,h));for(let h=0;h<e.mutations.length-1;++h)h+1<e.mutations.length&&void 0!==e.mutations[h+1].transform&&(e.mutations[h].updateTransforms=e.mutations[h+1].transform.fieldTransforms,e.mutations.splice(h+1,1),++h);const o=e.mutations.map(h=>wp(i.ct,h)),c=gi.fromMillis(e.localWriteTimeMs);return new nh(e.batchId,c,n,o)}function yf(i){const e=tl(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?tl(i.lastLimboFreeSnapshotVersion):mn.min();let o;return o=void 0!==i.query.documents?(hn(1===(h=i.query).documents.length),v(cc(ff(h.documents[0])))):function(h){return v(_m(h))}(i.query),new Ga(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,ws.fromBase64String(i.resumeToken));var h}function uh(i,e){const n=Wa(e.snapshotVersion),o=Wa(e.lastLimboFreeSnapshotVersion);let c;c=Xu(e.target)?mm(i.ct,e.target):ah(i.ct,e.target).ut;const h=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Aa(e.target),readTime:n,resumeToken:h,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:c}}function Cd(i){const e=_m({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?ne(e,e.limit,"L"):e}function lh(i,e){return new af(e.largestBatchId,wp(i.ct,e.overlayMutation))}function Ap(i,e){const n=e.path.lastSegment();return[i,qi(e.path.popLast()),n]}function Sp(i,e,n,o){return{indexId:i,uid:e,sequenceNumber:n,readTime:Wa(o.readTime),documentKey:qi(o.documentKey.path),largestBatchId:o.largestBatchId}}class Pp{getBundleMetadata(e,n){return Em(e).get(n).next(o=>{if(o)return{id:(h=o).bundleId,createTime:tl(h.createTime),version:h.version};var h})}saveBundleMetadata(e,n){return Em(e).put({bundleId:(c=n).id,createTime:Wa(Ui(c.createTime)),version:c.version});var c}getNamedQuery(e,n){return Im(e).get(n).next(o=>{if(o)return{name:(h=o).name,query:Cd(h.bundledQuery),readTime:tl(h.readTime)};var h})}saveNamedQuery(e,n){return Im(e).put({name:(c=n).name,readTime:Wa(Ui(c.readTime)),bundledQuery:c.bundledQuery});var c}}function Em(i){return Gs(i,"bundles")}function Im(i){return Gs(i,"namedQueries")}class vf{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new vf(e,n.uid||"")}getOverlay(e,n){return dh(e).get(Ap(this.userId,n)).next(o=>o?lh(this.serializer,o):null)}getOverlays(e,n){const o=So();return Ke.forEach(n,c=>this.getOverlay(e,c).next(h=>{null!==h&&o.set(c,h)})).next(()=>o)}saveOverlays(e,n,o){const c=[];return o.forEach((h,g)=>{const R=new af(n,g);c.push(this.ht(e,R))}),Ke.waitFor(c)}removeOverlaysForBatchId(e,n,o){const c=new Set;n.forEach(g=>c.add(qi(g.getCollectionPath())));const h=[];return c.forEach(g=>{const R=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);h.push(dh(e).H("collectionPathOverlayIndex",R))}),Ke.waitFor(h)}getOverlaysForCollection(e,n,o){const c=So(),h=qi(n),g=IDBKeyRange.bound([this.userId,h,o],[this.userId,h,Number.POSITIVE_INFINITY],!0);return dh(e).W("collectionPathOverlayIndex",g).next(R=>{for(const k of R){const B=lh(this.serializer,k);c.set(B.getKey(),B)}return c})}getOverlaysForCollectionGroup(e,n,o,c){const h=So();let g;const R=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return dh(e).Y({index:"collectionGroupOverlayIndex",range:R},(k,B,Y)=>{const ce=lh(this.serializer,B);h.size()<c||ce.largestBatchId===g?(h.set(ce.getKey(),ce),g=ce.largestBatchId):Y.done()}).next(()=>h)}ht(e,n){return dh(e).put(function(c,h,g){const[R,k,B]=Ap(h,g.mutation.key);return{userId:h,collectionPath:k,documentId:B,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:yd(c.ct,g.mutation)}}(this.serializer,this.userId,n))}}function dh(i){return Gs(i,"documentOverlays")}class cu{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(ps(e.integerValue));else if("doubleValue"in e){const o=ps(e.doubleValue);isNaN(o)?this.Et(n,13):(this.Et(n,15),Xn(o)?n.dt(0):n.dt(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Et(n,20),"string"==typeof o?n.At(o):(n.At(`${o.seconds||""}`),n.dt(o.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(aa(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Et(n,45),n.dt(o.latitude||0),n.dt(o.longitude||0)}else"mapValue"in e?ld(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):on()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const o=e.fields||{};this.Et(n,55);for(const c of Object.keys(o))this.Rt(c,n),this.It(o[c],n)}wt(e,n){const o=e.values||[];this.Et(n,50);for(const c of o)this.It(c,n)}gt(e,n){this.Et(n,37),Jt.fromName(e).path.forEach(o=>{this.Et(n,60),this.St(o,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function uu(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function kl(i){const e=64-function(o){let c=0;for(let h=0;h<8;++h){const g=uu(255&o[h]);if(c+=g,8!==g)break}return c}(i);return Math.ceil(e/8)}cu.bt=new cu;class cy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ct(o.value),o=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Mt(o.value),o=n.next();this.xt()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ct(o);else if(o<2048)this.Ct(960|o>>>6),this.Ct(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|o>>>12),this.Ct(128|63&o>>>6),this.Ct(128|63&o);else{const c=n.codePointAt(0);this.Ct(240|c>>>18),this.Ct(128|63&c>>>12),this.Ct(128|63&c>>>6),this.Ct(128|63&c)}}this.vt()}Nt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Mt(o);else if(o<2048)this.Mt(960|o>>>6),this.Mt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|o>>>12),this.Mt(128|63&o>>>6),this.Mt(128|63&o);else{const c=n.codePointAt(0);this.Mt(240|c>>>18),this.Mt(128|63&c>>>12),this.Mt(128|63&c>>>6),this.Mt(128|63&c)}}this.xt()}Bt(e){const n=this.Lt(e),o=kl(n);this.kt(1+o),this.buffer[this.position++]=255&o;for(let c=n.length-o;c<n.length;++c)this.buffer[this.position++]=255&n[c]}qt(e){const n=this.Lt(e),o=kl(n);this.kt(1+o),this.buffer[this.position++]=~(255&o);for(let c=n.length-o;c<n.length;++c)this.buffer[this.position++]=~(255&n[c])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const n=function(h){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,h,!1),new Uint8Array(g.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let c=1;c<n.length;++c)n[c]^=o?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const c=new Uint8Array(o);c.set(this.buffer),this.buffer=c}}class bp{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class uy{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class hh{constructor(){this.Gt=new cy,this.zt=new bp(this.Gt),this.jt=new uy(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Fl{constructor(e,n,o,c){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=c}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Fl(this.indexId,this.documentKey,this.arrayValue,o)}}function nl(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=Ef(i.arrayValue,e.arrayValue),0!==n?n:(n=Ef(i.directionalValue,e.directionalValue),0!==n?n:Jt.comparator(i.documentKey,e.documentKey)))}function Ef(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Rp{constructor(e){this.Yt=new cr((n,o)=>Ii.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Yt=this.Yt.add(o):this.Xt.push(o)}}get en(){return this.Yt.size>1}tn(e){if(hn(e.collectionGroup===this.collectionId),this.en)return!1;const n=ka(e);if(void 0!==n&&!this.nn(n))return!1;const o=Qo(e);let c=new Set,h=0,g=0;for(;h<o.length&&this.nn(o[h]);++h)c=c.add(o[h].fieldPath.canonicalString());if(h===o.length)return!0;if(this.Yt.size>0){const R=this.Yt.getIterator().getNext();if(!c.has(R.field.canonicalString())){const k=o[h];if(!this.rn(R,k)||!this.sn(this.Zt[g++],k))return!1}++h}for(;h<o.length;++h)if(g>=this.Zt.length||!this.sn(this.Zt[g++],o[h]))return!1;return!0}on(){if(this.en)return null;let e=new cr(Ii.comparator);const n=[];for(const o of this.Xt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new pr(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new pr(o.field,0))}for(const o of this.Zt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new pr(o.field,"asc"===o.dir?0:1)));return new io(io.UNKNOWN_ID,this.collectionId,n,Jo.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Cm(i){var e,n;if(hn(i instanceof br||i instanceof Wr),i instanceof br){if(i instanceof Ba){const c=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(h=>br.create(i.field,"==",h)))||[];return Wr.create(c,"or")}return i}const o=i.filters.map(c=>Cm(c));return Wr.create(o,i.op)}function ly(i){if(0===i.getFilters().length)return[];const e=Ll(Cm(i));return hn(lu(e)),Mp(e)||fh(e)?[e]:e.getFilters()}function Mp(i){return i instanceof br}function fh(i){return i instanceof Wr&&Sc(i)}function lu(i){return Mp(i)||fh(i)||function(n){if(n instanceof Wr&&Ac(n)){for(const o of n.getFilters())if(!Mp(o)&&!fh(o))return!1;return!0}return!1}(i)}function Ll(i){if(hn(i instanceof br||i instanceof Wr),i instanceof br)return i;if(1===i.filters.length)return Ll(i.filters[0]);const e=i.filters.map(o=>Ll(o));let n=Wr.create(e,i.op);return n=ph(n),lu(n)?n:(hn(n instanceof Wr),hn(Da(n)),hn(n.filters.length>1),n.filters.reduce((o,c)=>If(o,c)))}function If(i,e){let n;return hn(i instanceof br||i instanceof Wr),hn(e instanceof br||e instanceof Wr),n=i instanceof br?e instanceof br?Wr.create([i,e],"and"):Op(i,e):e instanceof br?Op(e,i):function(c,h){if(hn(c.filters.length>0&&h.filters.length>0),Da(c)&&Da(h))return Kd(c,h.getFilters());const g=Ac(c)?c:h,R=Ac(c)?h:c,k=g.filters.map(B=>If(B,R));return Wr.create(k,"or")}(i,e),ph(n)}function Op(i,e){if(Da(e))return Kd(e,i.getFilters());{const n=e.filters.map(o=>If(i,o));return Wr.create(n,"or")}}function ph(i){if(hn(i instanceof br||i instanceof Wr),i instanceof br)return i;const e=i.getFilters();if(1===e.length)return ph(e[0]);if(Ju(i))return i;const n=e.map(c=>ph(c)),o=[];return n.forEach(c=>{c instanceof br?o.push(c):c instanceof Wr&&(c.op===i.op?o.push(...c.filters):o.push(c))}),1===o.length?o[0]:Wr.create(o,i.op)}class RE{constructor(){this._n=new wm}addToCollectionParentIndex(e,n){return this._n.add(n),Ke.resolve()}getCollectionParents(e,n){return Ke.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return Ke.resolve()}deleteFieldIndex(e,n){return Ke.resolve()}deleteAllFieldIndexes(e){return Ke.resolve()}createTargetIndexes(e,n){return Ke.resolve()}getDocumentsMatchingTarget(e,n){return Ke.resolve(null)}getIndexType(e,n){return Ke.resolve(0)}getFieldIndexes(e,n){return Ke.resolve([])}getNextCollectionGroupToUpdate(e){return Ke.resolve(null)}getMinOffset(e,n){return Ke.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,n){return Ke.resolve(Cs.min())}updateCollectionGroup(e,n,o){return Ke.resolve()}updateIndexEntries(e,n){return Ke.resolve()}}class wm{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),c=this.index[n]||new cr(Ur.comparator),h=!c.has(o);return this.index[n]=c.add(o),h}has(e){const n=e.lastSegment(),o=e.popLast(),c=this.index[n];return c&&c.has(o)}getEntries(e){return(this.index[e]||new cr(Ur.comparator)).toArray()}}const xp=new Uint8Array(0);class Np{constructor(e,n){this.databaseId=n,this.an=new wm,this.un=new ms(o=>Aa(o),(o,c)=>eu(o,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const o=n.lastSegment(),c=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const h={collectionId:o,parent:qi(c)};return Cf(e).put(h)}return Ke.resolve()}getCollectionParents(e,n){const o=[],c=IDBKeyRange.bound([n,""],[Yo(n),""],!1,!0);return Cf(e).W(c).next(h=>{for(const g of h){if(g.collectionId!==n)break;o.push(mo(g.parent))}return o})}addFieldIndex(e,n){const o=wf(e),c={indexId:(R=n).indexId,collectionGroup:R.collectionGroup,fields:R.fields.map(k=>[k.fieldPath.canonicalString(),k.kind])};var R;delete c.indexId;const h=o.add(c);if(n.indexState){const g=Vl(e);return h.next(R=>{g.put(Sp(R,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return h.next()}deleteFieldIndex(e,n){const o=wf(e),c=Vl(e),h=gh(e);return o.delete(n.indexId).next(()=>c.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>h.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=wf(e),o=gh(e),c=Vl(e);return n.H().next(()=>o.H()).next(()=>c.H())}createTargetIndexes(e,n){return Ke.forEach(this.cn(n),o=>this.getIndexType(e,o).next(c=>{if(0===c||1===c){const h=new Rp(o).on();if(null!=h)return this.addFieldIndex(e,h)}}))}getDocumentsMatchingTarget(e,n){const o=gh(e);let c=!0;const h=new Map;return Ke.forEach(this.cn(n),g=>this.ln(e,g).next(R=>{c&&(c=!!R),h.set(g,R)})).next(()=>{if(c){let g=nr();const R=[];return Ke.forEach(h,(k,B)=>{var Nn;Lt("IndexedDbIndexManager",`Using index ${Nn=k,`id=${Nn.indexId}|cg=${Nn.collectionGroup}|f=${Nn.fields.map(Dn=>`${Dn.fieldPath}:${Dn.kind}`).join(",")}`} to execute ${Aa(n)}`);const Y=function(Nn,Dn){const _i=ka(Dn);if(void 0===_i)return null;for(const Mi of Sa(Nn,_i.fieldPath))switch(Mi.op){case"array-contains-any":return Mi.value.arrayValue.values||[];case"array-contains":return[Mi.value]}return null}(B,k),ce=function(Nn,Dn){const _i=new Map;for(const Mi of Qo(Dn))for(const Hr of Sa(Nn,Mi.fieldPath))switch(Hr.op){case"==":case"in":_i.set(Mi.fieldPath.canonicalString(),Hr.value);break;case"not-in":case"!=":return _i.set(Mi.fieldPath.canonicalString(),Hr.value),Array.from(_i.values())}return null}(B,k),Ae=function(Nn,Dn){const _i=[];let Mi=!0;for(const Hr of Qo(Dn)){const ha=0===Hr.kind?fd(Nn,Hr.fieldPath,Nn.startAt):Tl(Nn,Hr.fieldPath,Nn.startAt);_i.push(ha.value),Mi&&(Mi=ha.inclusive)}return new Ao(_i,Mi)}(B,k),Ye=function(Nn,Dn){const _i=[];let Mi=!0;for(const Hr of Qo(Dn)){const ha=0===Hr.kind?Tl(Nn,Hr.fieldPath,Nn.endAt):fd(Nn,Hr.fieldPath,Nn.endAt);_i.push(ha.value),Mi&&(Mi=ha.inclusive)}return new Ao(_i,Mi)}(B,k),Wt=this.hn(k,B,Ae),nn=this.hn(k,B,Ye),tn=this.Pn(k,B,ce),xn=this.In(k.indexId,Y,Wt,Ae.inclusive,nn,Ye.inclusive,tn);return Ke.forEach(xn,_r=>o.j(_r,n.limit).next(Nn=>{Nn.forEach(Dn=>{const _i=Jt.fromSegments(Dn.documentKey);g.has(_i)||(g=g.add(_i),R.push(_i))})}))}).next(()=>R)}return Ke.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:ly(Wr.create(e.filters,"and")).map(o=>Zc(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,o,c,h,g,R){const k=(null!=n?n.length:1)*Math.max(o.length,h.length),B=k/(null!=n?n.length:1),Y=[];for(let ce=0;ce<k;++ce){const Ae=n?this.Tn(n[ce/B]):xp,Ye=this.En(e,Ae,o[ce%B],c),Wt=this.dn(e,Ae,h[ce%B],g),nn=R.map(tn=>this.En(e,Ae,tn,!0));Y.push(...this.createRange(Ye,Wt,nn))}return Y}En(e,n,o,c){const h=new Fl(e,Jt.empty(),n,o);return c?h:h.Jt()}dn(e,n,o,c){const h=new Fl(e,Jt.empty(),n,o);return c?h.Jt():h}ln(e,n){const o=new Rp(n),c=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,c).next(h=>{let g=null;for(const R of h)o.tn(R)&&(!g||R.fields.length>g.fields.length)&&(g=R);return g})}getIndexType(e,n){let o=2;const c=this.cn(n);return Ke.forEach(c,h=>this.ln(e,h).next(g=>{g?0!==o&&g.fields.length<function(k){let B=new cr(Ii.comparator),Y=!1;for(const ce of k.filters)for(const Ae of ce.getFlattenedFilters())Ae.field.isKeyField()||("array-contains"===Ae.op||"array-contains-any"===Ae.op?Y=!0:B=B.add(Ae.field));for(const ce of k.orderBy)ce.field.isKeyField()||(B=B.add(ce.field));return B.size+(Y?1:0)}(h)&&(o=1):o=0})).next(()=>null!==n.limit&&c.length>1&&2===o?1:o)}An(e,n){const o=new hh;for(const c of Qo(e)){const h=n.data.field(c.fieldPath);if(null==h)return null;const g=o.Ht(c.kind);cu.bt.Pt(h,g)}return o.Wt()}Tn(e){const n=new hh;return cu.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const o=new hh;return cu.bt.Pt(Ta(this.databaseId,n),o.Ht(function(h){const g=Qo(h);return 0===g.length?0:g[g.length-1].kind}(e))),o.Wt()}Pn(e,n,o){if(null===o)return[];let c=[];c.push(new hh);let h=0;for(const g of Qo(e)){const R=o[h++];for(const k of c)if(this.Vn(n,g.fieldPath)&&Ua(R))c=this.mn(c,g,R);else{const B=k.Ht(g.kind);cu.bt.Pt(R,B)}}return this.fn(c)}hn(e,n,o){return this.Pn(e,n,o.position)}fn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Wt();return n}mn(e,n,o){const c=[...e],h=[];for(const g of o.arrayValue.values||[])for(const R of c){const k=new hh;k.seed(R.Wt()),cu.bt.Pt(g,k.Ht(n.kind)),h.push(k)}return h}Vn(e,n){return!!e.filters.find(o=>o instanceof br&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=wf(e),c=Vl(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(h=>{const g=[];return Ke.forEach(h,R=>c.get([R.indexId,this.uid]).next(k=>{g.push(function(Y,ce){const Ae=ce?new Jo(ce.sequenceNumber,new Cs(tl(ce.readTime),new Jt(mo(ce.documentKey)),ce.largestBatchId)):Jo.empty(),Ye=Y.fields.map(([Wt,nn])=>new pr(Ii.fromServerFormat(Wt),nn));return new io(Y.indexId,Y.collectionGroup,Ye,Ae)}(R,k))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,c)=>{const h=o.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==h?h:Sn(o.collectionGroup,c.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const c=wf(e),h=Vl(e);return this.gn(e).next(g=>c.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(R=>Ke.forEach(R,k=>h.put(Sp(k.indexId,this.uid,g,o)))))}updateIndexEntries(e,n){const o=new Map;return Ke.forEach(n,(c,h)=>{const g=o.get(c.collectionGroup);return(g?Ke.resolve(g):this.getFieldIndexes(e,c.collectionGroup)).next(R=>(o.set(c.collectionGroup,R),Ke.forEach(R,k=>this.pn(e,c,k).next(B=>{const Y=this.yn(h,k);return B.isEqual(Y)?Ke.resolve():this.wn(e,h,k,B,Y)}))))})}Sn(e,n,o,c){return gh(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.Rn(o,n.key),documentKey:n.key.path.toArray()})}bn(e,n,o,c){return gh(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.Rn(o,n.key),n.key.path.toArray()])}pn(e,n,o){const c=gh(e);let h=new cr(nl);return c.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.Rn(o,n)])},(g,R)=>{h=h.add(new Fl(o.indexId,n,R.arrayValue,R.directionalValue))}).next(()=>h)}yn(e,n){let o=new cr(nl);const c=this.An(n,e);if(null==c)return o;const h=ka(n);if(null!=h){const g=e.data.field(h.fieldPath);if(Ua(g))for(const R of g.arrayValue.values||[])o=o.add(new Fl(n.indexId,e.key,this.Tn(R),c))}else o=o.add(new Fl(n.indexId,e.key,xp,c));return o}wn(e,n,o,c,h){Lt("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const g=[];return function(k,B,Y,ce,Ae){const Ye=k.getIterator(),Wt=B.getIterator();let nn=mr(Ye),tn=mr(Wt);for(;nn||tn;){let xn=!1,_r=!1;if(nn&&tn){const Nn=Y(nn,tn);Nn<0?_r=!0:Nn>0&&(xn=!0)}else null!=nn?_r=!0:xn=!0;xn?(ce(tn),tn=mr(Wt)):_r?(Ae(nn),nn=mr(Ye)):(nn=mr(Ye),tn=mr(Wt))}}(c,h,nl,R=>{g.push(this.Sn(e,n,o,R))},R=>{g.push(this.bn(e,n,o,R))}),Ke.waitFor(g)}gn(e){let n=1;return Vl(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,c,h)=>{h.done(),n=c.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((g,R)=>nl(g,R)).filter((g,R,k)=>!R||0!==nl(g,k[R-1]));const c=[];c.push(e);for(const g of o){const R=nl(g,e),k=nl(g,n);if(0===R)c[0]=e.Jt();else if(R>0&&k<0)c.push(g),c.push(g.Jt());else if(k>0)break}c.push(n);const h=[];for(let g=0;g<c.length;g+=2){if(this.Dn(c[g],c[g+1]))return[];h.push(IDBKeyRange.bound([c[g].indexId,this.uid,c[g].arrayValue,c[g].directionalValue,xp,[]],[c[g+1].indexId,this.uid,c[g+1].arrayValue,c[g+1].directionalValue,xp,[]]))}return h}Dn(e,n){return nl(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(kp)}getMinOffset(e,n){return Ke.mapArray(this.cn(n),o=>this.ln(e,o).next(c=>c||on())).next(kp)}}function Cf(i){return Gs(i,"collectionParents")}function gh(i){return Gs(i,"indexEntries")}function wf(i){return Gs(i,"indexConfiguration")}function Vl(i){return Gs(i,"indexState")}function kp(i){hn(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const c=i[o].indexState.offset;Hc(c,e)<0&&(e=c),n<c.largestBatchId&&(n=c.largestBatchId)}return new Cs(e.readTime,e.documentKey,n)}const Tm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zo{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Zo(e,Zo.DEFAULT_COLLECTION_PERCENTILE,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Dm(i,e,n){const o=i.store("mutations"),c=i.store("documentMutations"),h=[],g=IDBKeyRange.only(n.batchId);let R=0;const k=o.Y({range:g},(Y,ce,Ae)=>(R++,Ae.delete()));h.push(k.next(()=>{hn(1===R)}));const B=[];for(const Y of n.mutations){const ce=Wu(e,Y.key.path,n.batchId);h.push(c.delete(ce)),B.push(Y.key)}return Ke.waitFor(h).next(()=>B)}function mh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw on();e=i.noDocument}return JSON.stringify(e).length}Zo.DEFAULT_COLLECTION_PERCENTILE=10,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zo.DEFAULT=new Zo(41943040,Zo.DEFAULT_COLLECTION_PERCENTILE,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zo.DISABLED=new Zo(-1,0,0);class Ul{constructor(e,n,o,c){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=c,this.Cn={}}static lt(e,n,o,c){hn(""!==e.uid);const h=e.isAuthenticated()?e.uid:"";return new Ul(h,n,o,c)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return du(e).Y({index:"userMutationsIndex",range:o},(c,h,g)=>{n=!1,g.done()}).next(()=>n)}addMutationBatch(e,n,o,c){const h=wd(e),g=du(e);return g.add({}).next(R=>{hn("number"==typeof R);const k=new nh(R,n,o,c),B=function(Ye,Wt,nn){const tn=nn.baseMutations.map(_r=>yd(Ye.ct,_r)),xn=nn.mutations.map(_r=>yd(Ye.ct,_r));return{userId:Wt,batchId:nn.batchId,localWriteTimeMs:nn.localWriteTime.toMillis(),baseMutations:tn,mutations:xn}}(this.serializer,this.userId,k),Y=[];let ce=new cr((Ae,Ye)=>Sn(Ae.canonicalString(),Ye.canonicalString()));for(const Ae of c){const Ye=Wu(this.userId,Ae.key.path,R);ce=ce.add(Ae.key.path.popLast()),Y.push(g.put(B)),Y.push(h.put(Ye,Hu))}return ce.forEach(Ae=>{Y.push(this.indexManager.addToCollectionParentIndex(e,Ae))}),e.addOnCommittedListener(()=>{this.Cn[R]=k.keys()}),Ke.waitFor(Y).next(()=>k)})}lookupMutationBatch(e,n){return du(e).get(n).next(o=>o?(hn(o.userId===this.userId),Nl(this.serializer,o)):null)}vn(e,n){return this.Cn[n]?Ke.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const c=o.keys();return this.Cn[n]=c,c}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,c=IDBKeyRange.lowerBound([this.userId,o]);let h=null;return du(e).Y({index:"userMutationsIndex",range:c},(g,R,k)=>{R.userId===this.userId&&(hn(R.batchId>=o),h=Nl(this.serializer,R)),k.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return du(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(c,h,g)=>{o=h.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return du(e).W("userMutationsIndex",n).next(o=>o.map(c=>Nl(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=zc(this.userId,n.path),c=IDBKeyRange.lowerBound(o),h=[];return wd(e).Y({range:c},(g,R,k)=>{const[B,Y,ce]=g,Ae=mo(Y);if(B===this.userId&&n.path.isEqual(Ae))return du(e).get(ce).next(Ye=>{if(!Ye)throw on();hn(Ye.userId===this.userId),h.push(Nl(this.serializer,Ye))});k.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new cr(Sn);const c=[];return n.forEach(h=>{const g=zc(this.userId,h.path),R=IDBKeyRange.lowerBound(g),k=wd(e).Y({range:R},(B,Y,ce)=>{const[Ae,Ye,Wt]=B,nn=mo(Ye);Ae===this.userId&&h.path.isEqual(nn)?o=o.add(Wt):ce.done()});c.push(k)}),Ke.waitFor(c).next(()=>this.Fn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,c=o.length+1,h=zc(this.userId,o),g=IDBKeyRange.lowerBound(h);let R=new cr(Sn);return wd(e).Y({range:g},(k,B,Y)=>{const[ce,Ae,Ye]=k,Wt=mo(Ae);ce===this.userId&&o.isPrefixOf(Wt)?Wt.length===c&&(R=R.add(Ye)):Y.done()}).next(()=>this.Fn(e,R))}Fn(e,n){const o=[],c=[];return n.forEach(h=>{c.push(du(e).get(h).next(g=>{if(null===g)throw on();hn(g.userId===this.userId),o.push(Nl(this.serializer,g))}))}),Ke.waitFor(c).next(()=>o)}removeMutationBatch(e,n){return Dm(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),Ke.forEach(o,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Ke.resolve();const o=IDBKeyRange.lowerBound(function(g){return[g]}(this.userId)),c=[];return wd(e).Y({range:o},(h,g,R)=>{if(h[0]===this.userId){const k=mo(h[1]);c.push(k)}else R.done()}).next(()=>{hn(0===c.length)})})}containsKey(e,n){return Am(e,this.userId,n)}xn(e){return Bl(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Am(i,e,n){const o=zc(e,n.path),c=o[1],h=IDBKeyRange.lowerBound(o);let g=!1;return wd(i).Y({range:h,J:!0},(R,k,B)=>{const[Y,ce,Ae]=R;Y===e&&ce===c&&(g=!0),B.done()}).next(()=>g)}function du(i){return Gs(i,"mutations")}function wd(i){return Gs(i,"documentMutations")}function Bl(i){return Gs(i,"mutationQueues")}class jl{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new jl(0)}static Bn(){return new jl(-1)}}class dy{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{const o=new jl(n.highestTargetId);return n.highestTargetId=o.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>mn.fromTimestamp(new gi(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Ln(e).next(c=>(c.highestListenSequenceNumber=n,o&&(c.lastRemoteSnapshotVersion=o.toTimestamp()),n>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=n),this.kn(e,c)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(o=>(o.targetCount+=1,this.Qn(n,o),this.kn(e,o))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>rl(e).delete(n.targetId)).next(()=>this.Ln(e)).next(o=>(hn(o.targetCount>0),o.targetCount-=1,this.kn(e,o)))}removeTargets(e,n,o){let c=0;const h=[];return rl(e).Y((g,R)=>{const k=yf(R);k.sequenceNumber<=n&&null===o.get(k.targetId)&&(c++,h.push(this.removeTargetData(e,k)))}).next(()=>Ke.waitFor(h)).next(()=>c)}forEachTarget(e,n){return rl(e).Y((o,c)=>{const h=yf(c);n(h)})}Ln(e){return Fp(e).get("targetGlobalKey").next(n=>(hn(null!==n),n))}kn(e,n){return Fp(e).put("targetGlobalKey",n)}qn(e,n){return rl(e).put(uh(this.serializer,n))}Qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){const o=Aa(n),c=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let h=null;return rl(e).Y({range:c,index:"queryTargetsIndex"},(g,R,k)=>{const B=yf(R);eu(n,B.target)&&(h=B,k.done())}).next(()=>h)}addMatchingKeys(e,n,o){const c=[],h=il(e);return n.forEach(g=>{const R=qi(g.path);c.push(h.put({targetId:o,path:R})),c.push(this.referenceDelegate.addReference(e,o,g))}),Ke.waitFor(c)}removeMatchingKeys(e,n,o){const c=il(e);return Ke.forEach(n,h=>{const g=qi(h.path);return Ke.waitFor([c.delete([o,g]),this.referenceDelegate.removeReference(e,o,h)])})}removeMatchingKeysForTargetId(e,n){const o=il(e),c=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(c)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),c=il(e);let h=nr();return c.Y({range:o,J:!0},(g,R,k)=>{const B=mo(g[1]),Y=new Jt(B);h=h.add(Y)}).next(()=>h)}containsKey(e,n){const o=qi(n.path),c=IDBKeyRange.bound([o],[Yo(o)],!1,!0);let h=0;return il(e).Y({index:"documentTargetsIndex",J:!0,range:c},([g,R],k,B)=>{0!==g&&(h++,B.done())}).next(()=>h>0)}_t(e,n){return rl(e).get(n).next(o=>o?yf(o):null)}}function rl(i){return Gs(i,"targets")}function Fp(i){return Gs(i,"targetGlobal")}function il(i){return Gs(i,"targetDocuments")}function Sm([i,e],[n,o]){const c=Sn(i,n);return 0===c?Sn(e,o):c}class hy{constructor(e){this.Kn=e,this.buffer=new cr(Sm),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Sm(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Pm{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;Lt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.c)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){D(o)?Lt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield so(o)}yield n.zn(3e5)}))}}class bm{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return Ke.resolve(Gt._e);const o=new hy(n);return this.jn.forEachTarget(e,c=>o.Wn(c.sequenceNumber)).next(()=>this.jn.Jn(e,c=>o.Wn(c))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.jn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector","Garbage collection skipped; disabled"),Ke.resolve(Tm)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tm):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let o,c,h,g,R,k,B;const Y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ce=>(ce>this.params.maximumSequenceNumbersToCollect?(Lt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ce}`),c=this.params.maximumSequenceNumbersToCollect):c=ce,g=Date.now(),this.nthSequenceNumber(e,c))).next(ce=>(o=ce,R=Date.now(),this.removeTargets(e,o,n))).next(ce=>(h=ce,k=Date.now(),this.removeOrphanedDocuments(e,o))).next(ce=>(B=Date.now(),To()<=Me.Ge.DEBUG&&Lt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-Y}ms\n\tDetermined least recently used ${c} in `+(R-g)+`ms\n\tRemoved ${h} targets in `+(k-R)+`ms\n\tRemoved ${ce} documents in `+(B-k)+`ms\nTotal Duration: ${B-Y}ms`),Ke.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:h,documentsRemoved:ce})))}}class ME{constructor(e,n){this.db=e,this.garbageCollector=function fy(i,e){return new bm(i,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(c=>o+c))}Zn(e){let n=0;return this.Jn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(o,c)=>n(c))}addReference(e,n,o){return sl(e,o)}removeReference(e,n,o){return sl(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return sl(e,n)}er(e,n){return function(c,h){let g=!1;return Bl(c).Z(R=>Am(c,R,h).next(k=>(k&&(g=!0),Ke.resolve(!k)))).next(()=>g)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let h=0;return this.Xn(e,(g,R)=>{if(R<=n){const k=this.er(e,g).next(B=>{if(!B)return h++,o.getEntry(e,g).next(()=>(o.removeEntry(g,mn.min()),il(e).delete([0,qi(g.path)])))});c.push(k)}}).next(()=>Ke.waitFor(c)).next(()=>o.apply(e)).next(()=>h)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return sl(e,n)}Xn(e,n){const o=il(e);let c,h=Gt._e;return o.Y({index:"documentTargetsIndex"},([g,R],{path:k,sequenceNumber:B})=>{0===g?(h!==Gt._e&&n(new Jt(mo(c)),h),h=B,c=k):h=Gt._e}).next(()=>{h!==Gt._e&&n(new Jt(mo(c)),h)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sl(i,e){return il(i).put((c=i.currentSequenceNumber,{targetId:0,path:qi(e.path),sequenceNumber:c}));var c}class Rm{constructor(){this.changes=new ms(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?Ke.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class py{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return $l(e).put(o)}removeEntry(e,n,o){return $l(e).delete(function(h,g){const R=h.path.toArray();return[R.slice(0,R.length-2),R[R.length-2],Id(g),R[R.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.tr(e,o)))}getEntry(e,n){let o=Vi.newInvalidDocument(n);return $l(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_h(n))},(c,h)=>{o=this.nr(n,h)}).next(()=>o)}rr(e,n){let o={size:0,document:Vi.newInvalidDocument(n)};return $l(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_h(n))},(c,h)=>{o={document:this.nr(n,h),size:mh(h)}}).next(()=>o)}getEntries(e,n){let o=yo();return this.ir(e,n,(c,h)=>{const g=this.nr(c,h);o=o.insert(c,g)}).next(()=>o)}sr(e,n){let o=yo(),c=new Ci(Jt.comparator);return this.ir(e,n,(h,g)=>{const R=this.nr(h,g);o=o.insert(h,R),c=c.insert(h,mh(g))}).next(()=>({documents:o,_r:c}))}ir(e,n,o){if(n.isEmpty())return Ke.resolve();let c=new cr(yh);n.forEach(k=>c=c.add(k));const h=IDBKeyRange.bound(_h(c.first()),_h(c.last())),g=c.getIterator();let R=g.getNext();return $l(e).Y({index:"documentKeyIndex",range:h},(k,B,Y)=>{const ce=Jt.fromSegments([...B.prefixPath,B.collectionGroup,B.documentId]);for(;R&&yh(R,ce)<0;)o(R,null),R=g.getNext();R&&R.isEqual(ce)&&(o(R,B),R=g.hasNext()?g.getNext():null),R?Y.U(_h(R)):Y.done()}).next(()=>{for(;R;)o(R,null),R=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,n,o,c,h){const g=n.path,R=[g.popLast().toArray(),g.lastSegment(),Id(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],k=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $l(e).W(IDBKeyRange.bound(R,k,!0)).next(B=>{h?.incrementDocumentReadCount(B.length);let Y=yo();for(const ce of B){const Ae=this.nr(Jt.fromSegments(ce.prefixPath.concat(ce.collectionGroup,ce.documentId)),ce);Ae.isFoundDocument()&&(dn(n,Ae)||c.has(Ae.key))&&(Y=Y.insert(Ae.key,Ae))}return Y})}getAllFromCollectionGroup(e,n,o,c){let h=yo();const g=Nm(n,o),R=Nm(n,Cs.max());return $l(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,R,!0)},(k,B,Y)=>{const ce=this.nr(Jt.fromSegments(B.prefixPath.concat(B.collectionGroup,B.documentId)),B);h=h.insert(ce.key,ce),h.size===c&&Y.done()}).next(()=>h)}newChangeBuffer(e){return new Om(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return xm(e).get("remoteDocumentGlobalKey").next(n=>(hn(!!n),n))}tr(e,n){return xm(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const o=function _f(i,e){let n;if(e.document)n=oh(i.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Jt.fromSegments(e.noDocument.path),c=tl(e.noDocument.readTime);n=Vi.newNoDocument(o,c),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return on();{const o=Jt.fromSegments(e.unknownDocument.path),c=tl(e.unknownDocument.version);n=Vi.newUnknownDocument(o,c)}}return e.readTime&&n.setReadTime(function(c){const h=new gi(c[0],c[1]);return mn.fromTimestamp(h)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(mn.min()))return o}return Vi.newInvalidDocument(e)}}function Mm(i){return new py(i)}class Om extends Rm{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new ms(o=>o.toString(),(o,c)=>o.isEqual(c))}applyChanges(e){const n=[];let o=0,c=new cr((h,g)=>Sn(h.canonicalString(),g.canonicalString()));return this.changes.forEach((h,g)=>{const R=this.ur.get(h);if(n.push(this.ar.removeEntry(e,h,R.readTime)),g.isValidDocument()){const k=ch(this.ar.serializer,g);c=c.add(h.path.popLast());const B=mh(k);o+=B-R.size,n.push(this.ar.addEntry(e,h,k))}else if(o-=R.size,this.trackRemovals){const k=ch(this.ar.serializer,g.convertToNoDocument(mn.min()));n.push(this.ar.addEntry(e,h,k))}}),c.forEach(h=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,h))}),n.push(this.ar.updateMetadata(e,o)),Ke.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(o=>(this.ur.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:o,_r:c})=>(c.forEach((h,g)=>{this.ur.set(h,{size:g,readTime:o.get(h).readTime})}),o))}}function xm(i){return Gs(i,"remoteDocumentGlobal")}function $l(i){return Gs(i,"remoteDocumentsV14")}function _h(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Nm(i,e){const n=e.documentKey.path.toArray();return[i,Id(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function yh(i,e){const n=i.path.toArray(),o=e.path.toArray();let c=0;for(let h=0;h<n.length-2&&h<o.length-2;++h)if(c=Sn(n[h],o[h]),c)return c;return c=Sn(n.length,o.length),c||(c=Sn(n[n.length-2],o[o.length-2]),c||Sn(n[n.length-1],o[o.length-1]))}class km{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Lp{constructor(e,n,o,c){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=c}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(c=>(o=c,this.remoteDocumentCache.getEntry(e,n))).next(c=>(null!==o&&iu(o.mutation,c,ao.empty(),gi.now()),c))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,nr()).next(()=>o))}getLocalViewOfDocuments(e,n,o=nr()){const c=So();return this.populateOverlays(e,c,n).next(()=>this.computeViews(e,n,c,o).next(h=>{let g=uc();return h.forEach((R,k)=>{g=g.insert(R,k.overlayedDocument)}),g}))}getOverlayedDocuments(e,n){const o=So();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,nr()))}populateOverlays(e,n,o){const c=[];return o.forEach(h=>{n.has(h)||c.push(h)}),this.documentOverlayCache.getOverlays(e,c).next(h=>{h.forEach((g,R)=>{n.set(g,R)})})}computeViews(e,n,o,c){let h=yo();const g=Mu(),R=Mu();return n.forEach((k,B)=>{const Y=o.get(B.key);c.has(B.key)&&(void 0===Y||Y.mutation instanceof dc)?h=h.insert(B.key,B):void 0!==Y?(g.set(B.key,Y.mutation.getFieldMask()),iu(Y.mutation,B,Y.mutation.getFieldMask(),gi.now())):g.set(B.key,ao.empty())}),this.recalculateAndSaveOverlays(e,h).next(k=>(k.forEach((B,Y)=>g.set(B,Y)),n.forEach((B,Y)=>{var ce;return R.set(B,new km(Y,null!==(ce=g.get(B))&&void 0!==ce?ce:null))}),R))}recalculateAndSaveOverlays(e,n){const o=Mu();let c=new Ci((g,R)=>g-R),h=nr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(g=>{for(const R of g)R.keys().forEach(k=>{const B=n.get(k);if(null===B)return;let Y=o.get(k)||ao.empty();Y=R.applyToLocalView(B,Y),o.set(k,Y);const ce=(c.get(R.batchId)||nr()).add(k);c=c.insert(R.batchId,ce)})}).next(()=>{const g=[],R=c.getReverseIterator();for(;R.hasNext();){const k=R.getNext(),B=k.key,Y=k.value,ce=bc();Y.forEach(Ae=>{if(!h.has(Ae)){const Ye=Mc(n.get(Ae),o.get(Ae));null!==Ye&&ce.set(Ae,Ye),h=h.add(Ae)}}),g.push(this.documentOverlayCache.saveOverlays(e,B,ce))}return Ke.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,c){return Jt.isDocumentKey((g=n).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):T(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,c):this.getDocumentsMatchingCollectionQuery(e,n,o,c);var g}getNextDocuments(e,n,o,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,c).next(h=>{const g=c-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,c-h.size):Ke.resolve(So());let R=-1,k=h;return g.next(B=>Ke.forEach(B,(Y,ce)=>(R<ce.largestBatchId&&(R=ce.largestBatchId),h.get(Y)?Ke.resolve():this.remoteDocumentCache.getEntry(e,Y).next(Ae=>{k=k.insert(Y,Ae)}))).next(()=>this.populateOverlays(e,B,h)).next(()=>this.computeViews(e,k,B,nr())).next(Y=>({batchId:R,changes:pd(Y)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Jt(n)).next(o=>{let c=uc();return o.isFoundDocument()&&(c=c.insert(o.key,o)),c})}getDocumentsMatchingCollectionGroupQuery(e,n,o,c){const h=n.collectionGroup;let g=uc();return this.indexManager.getCollectionParents(e,h).next(R=>Ke.forEach(R,k=>{const B=(ce=n,Ae=k.child(h),new $a(Ae,null,ce.explicitOrderBy.slice(),ce.filters.slice(),ce.limit,ce.limitType,ce.startAt,ce.endAt));var ce,Ae;return this.getDocumentsMatchingCollectionQuery(e,B,o,c).next(Y=>{Y.forEach((ce,Ae)=>{g=g.insert(ce,Ae)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,n,o,c){let h;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(g=>(h=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,h,c))).next(g=>{h.forEach((k,B)=>{const Y=B.getKey();null===g.get(Y)&&(g=g.insert(Y,Vi.newInvalidDocument(Y)))});let R=uc();return g.forEach((k,B)=>{const Y=h.get(k);void 0!==Y&&iu(Y.mutation,B,ao.empty(),gi.now()),dn(n,B)&&(R=R.insert(k,B))}),R})}}class Fm{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return Ke.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(c=n).id,version:c.version,createTime:Ui(c.createTime)}),Ke.resolve();var c}getNamedQuery(e,n){return Ke.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(c=n).name,query:Cd(c.bundledQuery),readTime:Ui(c.readTime)}),Ke.resolve();var c}}class Vp{constructor(){this.overlays=new Ci(Jt.comparator),this.hr=new Map}getOverlay(e,n){return Ke.resolve(this.overlays.get(n))}getOverlays(e,n){const o=So();return Ke.forEach(n,c=>this.getOverlay(e,c).next(h=>{null!==h&&o.set(c,h)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((c,h)=>{this.ht(e,n,h)}),Ke.resolve()}removeOverlaysForBatchId(e,n,o){const c=this.hr.get(o);return void 0!==c&&(c.forEach(h=>this.overlays=this.overlays.remove(h)),this.hr.delete(o)),Ke.resolve()}getOverlaysForCollection(e,n,o){const c=So(),h=n.length+1,g=new Jt(n.child("")),R=this.overlays.getIteratorFrom(g);for(;R.hasNext();){const k=R.getNext().value,B=k.getKey();if(!n.isPrefixOf(B.path))break;B.path.length===h&&k.largestBatchId>o&&c.set(k.getKey(),k)}return Ke.resolve(c)}getOverlaysForCollectionGroup(e,n,o,c){let h=new Ci((B,Y)=>B-Y);const g=this.overlays.getIterator();for(;g.hasNext();){const B=g.getNext().value;if(B.getKey().getCollectionGroup()===n&&B.largestBatchId>o){let Y=h.get(B.largestBatchId);null===Y&&(Y=So(),h=h.insert(B.largestBatchId,Y)),Y.set(B.getKey(),B)}}const R=So(),k=h.getIterator();for(;k.hasNext()&&(k.getNext().value.forEach((B,Y)=>R.set(B,Y)),!(R.size()>=c)););return Ke.resolve(R)}ht(e,n,o){const c=this.overlays.get(o.key);if(null!==c){const g=this.hr.get(c.largestBatchId).delete(o.key);this.hr.set(c.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new af(n,o));let h=this.hr.get(n);void 0===h&&(h=nr(),this.hr.set(n,h)),this.hr.set(n,h.add(o.key))}}class Tf{constructor(){this.Pr=new cr(Eo.Ir),this.Tr=new cr(Eo.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const o=new Eo(e,n);this.Pr=this.Pr.add(o),this.Tr=this.Tr.add(o)}dr(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.Ar(new Eo(e,n))}Rr(e,n){e.forEach(o=>this.removeReference(o,n))}Vr(e){const n=new Jt(new Ur([])),o=new Eo(n,e),c=new Eo(n,e+1),h=[];return this.Tr.forEachInRange([o,c],g=>{this.Ar(g),h.push(g.key)}),h}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Jt(new Ur([])),o=new Eo(n,e),c=new Eo(n,e+1);let h=nr();return this.Tr.forEachInRange([o,c],g=>{h=h.add(g.key)}),h}containsKey(e){const n=new Eo(e,0),o=this.Pr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Eo{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Jt.comparator(e.key,n.key)||Sn(e.pr,n.pr)}static Er(e,n){return Sn(e.pr,n.pr)||Jt.comparator(e.key,n.key)}}class da{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new cr(Eo.Ir)}checkEmpty(e){return Ke.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,c){const h=this.yr;this.yr++;const g=new nh(h,n,o,c);this.mutationQueue.push(g);for(const R of c)this.wr=this.wr.add(new Eo(R.key,h)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return Ke.resolve(g)}lookupMutationBatch(e,n){return Ke.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const c=this.br(n+1),h=c<0?0:c;return Ke.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Eo(n,0),c=new Eo(n,Number.POSITIVE_INFINITY),h=[];return this.wr.forEachInRange([o,c],g=>{const R=this.Sr(g.pr);h.push(R)}),Ke.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new cr(Sn);return n.forEach(c=>{const h=new Eo(c,0),g=new Eo(c,Number.POSITIVE_INFINITY);this.wr.forEachInRange([h,g],R=>{o=o.add(R.pr)})}),Ke.resolve(this.Dr(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,c=o.length+1;let h=o;Jt.isDocumentKey(h)||(h=h.child(""));const g=new Eo(new Jt(h),0);let R=new cr(Sn);return this.wr.forEachWhile(k=>{const B=k.key.path;return!!o.isPrefixOf(B)&&(B.length===c&&(R=R.add(k.pr)),!0)},g),Ke.resolve(this.Dr(R))}Dr(e){const n=[];return e.forEach(o=>{const c=this.Sr(o);null!==c&&n.push(c)}),n}removeMutationBatch(e,n){hn(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.wr;return Ke.forEach(n.mutations,c=>{const h=new Eo(c.key,n.batchId);return o=o.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.wr=o})}Mn(e){}containsKey(e,n){const o=new Eo(n,0),c=this.wr.firstAfterOrEqual(o);return Ke.resolve(n.isEqual(c&&c.key))}performConsistencyCheck(e){return Ke.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Df{constructor(e){this.vr=e,this.docs=new Ci(Jt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,c=this.docs.get(o),h=c?c.size:0,g=this.vr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:g}),this.size+=g-h,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Ke.resolve(o?o.document.mutableCopy():Vi.newInvalidDocument(n))}getEntries(e,n){let o=yo();return n.forEach(c=>{const h=this.docs.get(c);o=o.insert(c,h?h.document.mutableCopy():Vi.newInvalidDocument(c))}),Ke.resolve(o)}getDocumentsMatchingQuery(e,n,o,c){let h=yo();const g=n.path,R=new Jt(g.child("")),k=this.docs.getIteratorFrom(R);for(;k.hasNext();){const{key:B,value:{document:Y}}=k.getNext();if(!g.isPrefixOf(B.path))break;B.path.length>g.length+1||Hc(Lo(Y),o)<=0||(c.has(Y.key)||dn(n,Y))&&(h=h.insert(Y.key,Y.mutableCopy()))}return Ke.resolve(h)}getAllFromCollectionGroup(e,n,o,c){on()}Fr(e,n){return Ke.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new p(this)}getSize(e){return Ke.resolve(this.size)}}class p extends Rm{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((o,c)=>{c.isValidDocument()?n.push(this.ar.addEntry(e,c)):this.ar.removeEntry(o)}),Ke.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class d{constructor(e){this.persistence=e,this.Mr=new ms(n=>Aa(n),eu),this.lastRemoteSnapshotVersion=mn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Tf,this.targetCount=0,this.Br=jl.Nn()}forEachTarget(e,n){return this.Mr.forEach((o,c)=>n(c)),Ke.resolve()}getLastRemoteSnapshotVersion(e){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ke.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Or&&(this.Or=n),Ke.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new jl(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,Ke.resolve()}updateTargetData(e,n){return this.qn(n),Ke.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(e,n,o){let c=0;const h=[];return this.Mr.forEach((g,R)=>{R.sequenceNumber<=n&&null===o.get(R.targetId)&&(this.Mr.delete(g),h.push(this.removeMatchingKeysForTargetId(e,R.targetId)),c++)}),Ke.waitFor(h).next(()=>c)}getTargetCount(e){return Ke.resolve(this.targetCount)}getTargetData(e,n){const o=this.Mr.get(n)||null;return Ke.resolve(o)}addMatchingKeys(e,n,o){return this.Nr.dr(n,o),Ke.resolve()}removeMatchingKeys(e,n,o){this.Nr.Rr(n,o);const c=this.persistence.referenceDelegate,h=[];return c&&n.forEach(g=>{h.push(c.markPotentiallyOrphaned(e,g))}),Ke.waitFor(h)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),Ke.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Nr.gr(n);return Ke.resolve(o)}containsKey(e,n){return Ke.resolve(this.Nr.containsKey(n))}}class l{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Gt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new d(this),this.indexManager=new RE,this.remoteDocumentCache=new Df(o=>this.referenceDelegate.Kr(o)),this.serializer=new mf(n),this.$r=new Fm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Vp,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Lr[e.toKey()];return o||(o=new da(n,this.referenceDelegate),this.Lr[e.toKey()]=o),o}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,o){Lt("MemoryPersistence","Starting transaction:",e);const c=new y(this.kr.next());return this.referenceDelegate.Ur(),o(c).next(h=>this.referenceDelegate.Wr(c).next(()=>h)).toPromise().then(h=>(c.raiseOnCommittedEvent(),h))}Gr(e,n){return Ke.or(Object.values(this.Lr).map(o=>()=>o.containsKey(e,n)))}}class y extends yc{constructor(e){super(),this.currentSequenceNumber=e}}class b{constructor(e){this.persistence=e,this.zr=new Tf,this.jr=null}static Hr(e){return new b(e)}get Jr(){if(this.jr)return this.jr;throw on()}addReference(e,n,o){return this.zr.addReference(o,n),this.Jr.delete(o.toString()),Ke.resolve()}removeReference(e,n,o){return this.zr.removeReference(o,n),this.Jr.add(o.toString()),Ke.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),Ke.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(c=>this.Jr.add(c.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(c=>{c.forEach(h=>this.Jr.add(h.toString()))}).next(()=>o.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.Jr,o=>{const c=Jt.fromPath(o);return this.Yr(e,c).next(h=>{h||n.removeEntry(c,mn.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(o=>{o?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return Ke.or([()=>Ke.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class ${constructor(e){this.serializer=e}N(e,n,o,c){const h=new gr("createOrUpgrade",n);var k;o<1&&c>=1&&(e.createObjectStore("owner"),(k=e).createObjectStore("mutationQueues",{keyPath:"userId"}),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Do,{unique:!0}),k.createObjectStore("documentMutations"),ie(e),function(k){k.createObjectStore("remoteDocuments")}(e));let g=Ke.resolve();return o<3&&c>=3&&(0!==o&&(function(k){k.deleteObjectStore("targetDocuments"),k.deleteObjectStore("targets"),k.deleteObjectStore("targetGlobal")}(e),ie(e)),g=g.next(()=>function(k){const B=k.store("targetGlobal"),Y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mn.min().toTimestamp(),targetCount:0};return B.put("targetGlobalKey",Y)}(h))),o<4&&c>=4&&(0!==o&&(g=g.next(()=>function(k,B){return B.store("mutations").W().next(Y=>{k.deleteObjectStore("mutations"),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Do,{unique:!0});const ce=B.store("mutations"),Ae=Y.map(Ye=>ce.put(Ye));return Ke.waitFor(Ae)})}(e,h))),g=g.next(()=>{!function(k){k.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&c>=5&&(g=g.next(()=>this.Xr(h))),o<6&&c>=6&&(g=g.next(()=>(function(k){k.createObjectStore("remoteDocumentGlobal")}(e),this.ei(h)))),o<7&&c>=7&&(g=g.next(()=>this.ti(h))),o<8&&c>=8&&(g=g.next(()=>this.ni(e,h))),o<9&&c>=9&&(g=g.next(()=>{!function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&c>=10&&(g=g.next(()=>this.ri(h))),o<11&&c>=11&&(g=g.next(()=>{(function(k){k.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(k){k.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&c>=12&&(g=g.next(()=>{!function(k){const B=k.createObjectStore("documentOverlays",{keyPath:Wd});B.createIndex("collectionPathOverlayIndex",oo,{unique:!1}),B.createIndex("collectionGroupOverlayIndex",zu,{unique:!1})}(e)})),o<13&&c>=13&&(g=g.next(()=>function(k){const B=k.createObjectStore("remoteDocumentsV14",{keyPath:gp});B.createIndex("documentKeyIndex",qc),B.createIndex("collectionGroupIndex",ir)}(e)).next(()=>this.ii(e,h)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&c>=14&&(g=g.next(()=>this.si(e,h))),o<15&&c>=15&&(g=g.next(()=>function(k){k.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),k.createObjectStore("indexState",{keyPath:Gd}).createIndex("sequenceNumberIndex",sd,{unique:!1}),k.createObjectStore("indexEntries",{keyPath:El}).createIndex("documentKeyIndex",od,{unique:!1})}(e))),g}ei(e){let n=0;return e.store("remoteDocuments").Y((o,c)=>{n+=mh(c)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Xr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(c=>Ke.forEach(c,h=>{const g=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(R=>Ke.forEach(R,k=>{hn(k.userId===h.userId);const B=Nl(this.serializer,k);return Dm(e,h.userId,B).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const h=[];return o.Y((g,R)=>{const k=new Ur(g),B=[0,qi(k)];h.push(n.get(B).next(Y=>Y?Ke.resolve():n.put({targetId:0,path:qi(k),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>Ke.waitFor(h))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:$d});const o=n.store("collectionParents"),c=new wm,h=g=>{if(c.add(g)){const R=g.lastSegment(),k=g.popLast();return o.put({collectionId:R,parent:qi(k)})}};return n.store("remoteDocuments").Y({J:!0},(g,R)=>{const k=new Ur(g);return h(k.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([g,R,k],B)=>{const Y=mo(R);return h(Y.popLast())}))}ri(e){const n=e.store("targets");return n.Y((o,c)=>{const h=yf(c),g=uh(this.serializer,h);return n.put(g)})}ii(e,n){const o=n.store("remoteDocuments"),c=[];return o.Y((h,g)=>{const R=n.store("remoteDocumentsV14"),k=(ce=g,ce.document?new Jt(Ur.fromString(ce.document.name).popFirst(5)):ce.noDocument?Jt.fromSegments(ce.noDocument.path):ce.unknownDocument?Jt.fromSegments(ce.unknownDocument.path):on()).path.toArray(),B={prefixPath:k.slice(0,k.length-2),collectionGroup:k[k.length-2],documentId:k[k.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var ce;c.push(R.put(B))}).next(()=>Ke.waitFor(c))}si(e,n){const o=n.store("mutations"),c=Mm(this.serializer),h=new l(b.Hr,this.serializer.ct);return o.W().next(g=>{const R=new Map;return g.forEach(k=>{var B;let Y=null!==(B=R.get(k.userId))&&void 0!==B?B:nr();Nl(this.serializer,k).keys().forEach(ce=>Y=Y.add(ce)),R.set(k.userId,Y)}),Ke.forEach(R,(k,B)=>{const Y=new Jn(B),ce=vf.lt(this.serializer,Y),Ae=h.getIndexManager(Y),Ye=Ul.lt(Y,this.serializer,Ae,h.referenceDelegate);return new Lp(c,Ye,ce,Ae).recalculateAndSaveOverlaysForDocumentKeys(new Yc(n,Gt._e),k).next()})})}}function ie(i){i.createObjectStore("targetDocuments",{keyPath:jd}).createIndex("documentTargetsIndex",Kh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xr,{unique:!0}),i.createObjectStore("targetGlobal")}const pe="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class we{constructor(e,n,o,c,h,g,R,k,B,Y,ce=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.oi=h,this.window=g,this.document=R,this._i=B,this.ai=Y,this.ui=ce,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=Ae=>Promise.resolve(),!we.D())throw new Pt(ot.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ME(this,c),this.Ti=n+"main",this.serializer=new mf(k),this.Ei=new cs(this.Ti,this.ui,new $(this.serializer)),this.Qr=new dy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Mm(this.serializer),this.$r=new Pp,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===Y&&Jr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pt(ot.FAILED_PRECONDITION,pe);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Gt(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var o=(0,me.c)(function*(c){if(n.started)return e(c)});return function(c){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var n=(0,me.c)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,me.c)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>It(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(D(e))return Lt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Lt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Et(e).get("owner").next(n=>Ke.resolve(this.Si(n)))}bi(e){return It(e).delete(this.clientId)}Di(){var e=this;return(0,me.c)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const c=Gs(o,"clientMetadata");return c.W().next(h=>{const g=e.vi(h,18e5),R=h.filter(k=>-1===g.indexOf(k));return Ke.forEach(R,k=>c.delete(k.clientId)).next(()=>R)})}).catch(()=>[]);if(e.di)for(const o of n)e.di.removeItem(e.Fi(o.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Ke.resolve(!0):Et(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new Pt(ot.FAILED_PRECONDITION,pe);return!1}}return!(!this.networkEnabled||!this.inForeground)||It(e).W().next(o=>void 0===this.vi(o,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Lt("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,me.c)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Yc(n,Gt._e);return e.yi(o).next(()=>e.bi(o))}),e.Ei.close(),e.Bi()})()}vi(e,n){return e.filter(o=>this.Ci(o.updateTimeMs,n)&&!this.Mi(o.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>It(e).W().next(n=>this.vi(n,18e5).map(o=>o.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Ul.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Np(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return vf.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,o){Lt("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===n?"readonly":"readwrite",h=15===(k=this.ui)?Cu:14===k?Kc:13===k?vc:12===k?Yh:11===k?qu:void on();var k;let g;return this.Ei.runTransaction(e,c,h,R=>(g=new Yc(R,this.kr?this.kr.next():Gt._e),"readwrite-primary"===n?this.gi(g).next(k=>!!k||this.pi(g)).next(k=>{if(!k)throw Jr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Pt(ot.FAILED_PRECONDITION,tc);return o(g)}).next(k=>this.wi(g).next(()=>k)):this.ki(g).next(()=>o(g)))).then(R=>(g.raiseOnCommittedEvent(),R))}ki(e){return Et(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Pt(ot.FAILED_PRECONDITION,pe)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Et(e).put("owner",n)}static D(){return cs.D()}yi(e){const n=Et(e);return n.get("owner").next(o=>this.Si(o)?(Lt("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ke.resolve())}Ci(e,n){const o=Date.now();return!(e<o-n||e>o&&(Jr(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,Ct.qk)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const o=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return Lt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Jr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Jr("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Et(i){return Gs(i,"owner")}function It(i){return Gs(i,"clientMetadata")}function Mt(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class _n{constructor(e,n,o,c){this.targetId=e,this.fromCache=n,this.qi=o,this.Qi=c}static Ki(e,n){let o=nr(),c=nr();for(const h of n.docChanges)switch(h.type){case 0:o=o.add(h.doc.key);break;case 1:c=c.add(h.doc.key)}return new _n(e,n.fromCache,o,c)}}class jn{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mi{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,Ct.qk)()?8:cs.v((0,Ct.Su)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,o,c){const h={result:null};return this.ji(e,n).next(g=>{h.result=g}).next(()=>{if(!h.result)return this.Hi(e,n,c,o).next(g=>{h.result=g})}).next(()=>{if(h.result)return;const g=new jn;return this.Ji(e,n,g).next(R=>{if(h.result=R,this.Ui)return this.Yi(e,n,g,R.size)})}).next(()=>h.result)}Yi(e,n,o,c){return o.documentReadCount<this.Wi?(To()<=Me.Ge.DEBUG&&Lt("QueryEngine","SDK will not create cache indexes for query:",St(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ke.resolve()):(To()<=Me.Ge.DEBUG&&Lt("QueryEngine","Query:",St(n),"scans",o.documentReadCount,"local documents and returns",c,"documents as results."),o.documentReadCount>this.Gi*c?(To()<=Me.Ge.DEBUG&&Lt("QueryEngine","The SDK decides to create cache indexes for query:",St(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,v(n))):Ke.resolve())}ji(e,n){if(Ru(n))return Ke.resolve(null);let o=v(n);return this.indexManager.getIndexType(e,o).next(c=>0===c?null:(null!==n.limit&&1===c&&(n=ne(n,null,"F"),o=v(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(h=>{const g=nr(...h);return this.zi.getDocuments(e,g).next(R=>this.indexManager.getMinOffset(e,o).next(k=>{const B=this.Zi(n,R);return this.Xi(n,B,g,k.readTime)?this.ji(e,ne(n,null,"F")):this.es(e,B,n,k)}))})))}Hi(e,n,o,c){return Ru(n)||c.isEqual(mn.min())?Ke.resolve(null):this.zi.getDocuments(e,o).next(h=>{const g=this.Zi(n,h);return this.Xi(n,g,o,c)?Ke.resolve(null):(To()<=Me.Ge.DEBUG&&Lt("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),St(n)),this.es(e,g,n,ri(c,-1)).next(R=>R))})}Zi(e,n){let o=new cr(tr(e));return n.forEach((c,h)=>{dn(e,h)&&(o=o.add(h))}),o}Xi(e,n,o,c){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const h="F"===e.limitType?n.last():n.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(c)>0)}Ji(e,n,o){return To()<=Me.Ge.DEBUG&&Lt("QueryEngine","Using full collection scan to execute query:",St(n)),this.zi.getDocumentsMatchingQuery(e,n,Cs.min(),o)}es(e,n,o,c){return this.zi.getDocumentsMatchingQuery(e,o,c).next(h=>(n.forEach(g=>{h=h.insert(g.key,g)}),h))}}class uo{constructor(e,n,o,c){this.persistence=e,this.ts=n,this.serializer=c,this.ns=new Ci(Sn),this.rs=new ms(h=>Aa(h),eu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(o)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function Gl(i,e,n,o){return new uo(i,e,n,o)}function vh(i,e){return ol.apply(this,arguments)}function ol(){return ol=(0,me.c)(function*(i,e){const n=zt(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let c;return n.mutationQueue.getAllMutationBatches(o).next(h=>(c=h,n._s(e),n.mutationQueue.getAllMutationBatches(o))).next(h=>{const g=[],R=[];let k=nr();for(const B of c){g.push(B.batchId);for(const Y of B.mutations)k=k.add(Y.key)}for(const B of h){R.push(B.batchId);for(const Y of B.mutations)k=k.add(Y.key)}return n.localDocuments.getDocuments(o,k).next(B=>({us:B,removedBatchIds:g,addedBatchIds:R}))})})}),ol.apply(this,arguments)}function OE(i){const e=zt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function xE(i,e,n){let o=nr(),c=nr();return n.forEach(h=>o=o.add(h)),e.getEntries(i,o).next(h=>{let g=yo();return n.forEach((R,k)=>{const B=h.get(R);k.isFoundDocument()!==B.isFoundDocument()&&(c=c.add(R)),k.isNoDocument()&&k.version.isEqual(mn.min())?(e.removeEntry(R,k.readTime),g=g.insert(R,k)):!B.isValidDocument()||k.version.compareTo(B.version)>0||0===k.version.compareTo(B.version)&&B.hasPendingWrites?(e.addEntry(k),g=g.insert(R,k)):Lt("LocalStore","Ignoring outdated watch update for ",R,". Current version:",B.version," Watch version:",k.version)}),{cs:g,ls:c}})}function t0(i,e){const n=zt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Eh(i,e){const n=zt(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let c;return n.Qr.getTargetData(o,e).next(h=>h?(c=h,Ke.resolve(c)):n.Qr.allocateTargetId(o).next(g=>(c=new Ga(e,g,"TargetPurposeListen",o.currentSequenceNumber),n.Qr.addTargetData(o,c).next(()=>c))))}).then(o=>{const c=n.ns.get(o.targetId);return(null===c||o.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(n.ns=n.ns.insert(o.targetId,o),n.rs.set(e,o.targetId)),o})}function al(i,e,n){return Ih.apply(this,arguments)}function Ih(){return Ih=(0,me.c)(function*(i,e,n){const o=zt(i),c=o.ns.get(e),h=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",h,g=>o.persistence.referenceDelegate.removeTarget(g,c)))}catch(g){if(!D(g))throw g;Lt("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.ns=o.ns.remove(e),o.rs.delete(c.target)}),Ih.apply(this,arguments)}function Ch(i,e,n){const o=zt(i);let c=mn.min(),h=nr();return o.persistence.runTransaction("Execute query","readwrite",g=>function(k,B,Y){const ce=zt(k),Ae=ce.rs.get(Y);return void 0!==Ae?Ke.resolve(ce.ns.get(Ae)):ce.Qr.getTargetData(B,Y)}(o,g,v(e)).next(R=>{if(R)return c=R.lastLimboFreeSnapshotVersion,o.Qr.getMatchingKeysForTargetId(g,R.targetId).next(k=>{h=k})}).next(()=>o.ts.getDocumentsMatchingQuery(g,e,n?c:mn.min(),n?h:nr())).next(R=>(my(o,Pn(e),R),{documents:R,hs:h})))}function Lm(i,e){const n=zt(i),o=zt(n.Qr),c=n.ns.get(e);return c?Promise.resolve(c.target):n.persistence.runTransaction("Get target data","readonly",h=>o._t(h,e).next(g=>g?g.target:null))}function Vm(i,e){const n=zt(i),o=n.ss.get(e)||mn.min();return n.persistence.runTransaction("Get new document changes","readonly",c=>n.os.getAllFromCollectionGroup(c,e,ri(o,-1),Number.MAX_SAFE_INTEGER)).then(c=>(my(n,e,c),c))}function my(i,e,n){let o=i.ss.get(e)||mn.min();n.forEach((c,h)=>{h.readTime.compareTo(o)>0&&(o=h.readTime)}),i.ss.set(e,o)}function Up(){return Up=(0,me.c)(function*(i,e,n,o){const c=zt(i);let h=nr(),g=yo();for(const B of n){const Y=e.Ps(B.metadata.name);B.document&&(h=h.add(Y));const ce=e.Is(B);ce.setReadTime(e.Ts(B.metadata.readTime)),g=g.insert(Y,ce)}const R=c.os.newChangeBuffer({trackRemovals:!0}),k=yield Eh(c,(Y=o,v(cc(Ur.fromString(`__bundle__/docs/${Y}`)))));var Y;return c.persistence.runTransaction("Apply bundle documents","readwrite",B=>xE(B,R,g).next(Y=>(R.apply(B),Y)).next(Y=>c.Qr.removeMatchingKeysForTargetId(B,k.targetId).next(()=>c.Qr.addMatchingKeys(B,h,k.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(B,Y.cs,Y.ls)).next(()=>Y.cs)))}),Up.apply(this,arguments)}function wh(i,e){return Pa.apply(this,arguments)}function Pa(){return Pa=(0,me.c)(function*(i,e,n=nr()){const o=yield Eh(i,v(Cd(e.bundledQuery))),c=zt(i);return c.persistence.runTransaction("Save named query","readwrite",h=>{const g=Ui(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return c.$r.saveNamedQuery(h,e);const R=o.withResumeToken(ws.EMPTY_BYTE_STRING,g);return c.ns=c.ns.insert(R.targetId,R),c.Qr.updateTargetData(h,R).next(()=>c.Qr.removeMatchingKeysForTargetId(h,o.targetId)).next(()=>c.Qr.addMatchingKeys(h,n,o.targetId)).next(()=>c.$r.saveNamedQuery(h,e))})}),Pa.apply(this,arguments)}function cl(i,e){return`firestore_clients_${i}_${e}`}function Um(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function _y(i,e){return`firestore_targets_${i}_${e}`}class Bp{constructor(e,n,o,c){this.user=e,this.batchId=n,this.state=o,this.error=c}static Es(e,n,o){const c=JSON.parse(o);let h,g="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return g&&c.error&&(g="string"==typeof c.error.message&&"string"==typeof c.error.code,g&&(h=new Pt(c.error.code,c.error.message))),g?new Bp(e,n,c.state,h):(Jr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jp{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Es(e,n){const o=JSON.parse(n);let c,h="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(c=new Pt(o.error.code,o.error.message))),h?new jp(e,o.state,c):(Jr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bm{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const o=JSON.parse(n);let c="object"==typeof o&&o.activeTargetIds instanceof Array,h=Rc();for(let g=0;c&&g<o.activeTargetIds.length;++g)c=Ri(o.activeTargetIds[g]),h=h.add(o.activeTargetIds[g]);return c?new Bm(e,h):(Jr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class $p{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new $p(n.clientId,n.onlineState):(Jr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Gp{constructor(){this.activeTargetIds=Rc()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yy{constructor(e,n,o,c,h){this.window=e,this.oi=n,this.persistenceKey=o,this.Vs=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ci(Sn),this.started=!1,this.ys=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.ws=cl(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new Gp),this.bs=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(k){return`firestore_bundle_loaded_v2_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.c)(function*(){const n=yield e.syncEngine.Li();for(const c of n){if(c===e.Vs)continue;const h=e.getItem(cl(e.persistenceKey,c));if(h){const g=Bm.Es(c,h);g&&(e.ps=e.ps.insert(g.clientId,g))}}e.Ms();const o=e.storage.getItem(e.vs);if(o){const c=e.xs(o);c&&e.Os(c)}for(const c of e.ys)e.gs(c);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((o,c)=>{c.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,o){this.Bs(e,n,o),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(_y(this.persistenceKey,e));if(o){const c=jp.Es(e,o);c&&(n=c.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_y(this.persistenceKey,e))}updateQueryState(e,n,o){this.qs(e,n,o)}handleUserChange(e,n,o){n.forEach(c=>{this.Ls(c)}),this.currentUser=e,o.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Lt("SharedClientState","READ",e,n),n}setItem(e,n){Lt("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Lt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(Lt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ws)return void Jr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,me.c)(function*(){if(n.started){if(null!==o.key)if(n.bs.test(o.key)){if(null==o.newValue){const c=n.$s(o.key);return n.Us(c,null)}{const c=n.Ws(o.key,o.newValue);if(c)return n.Us(c.clientId,c)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const c=n.Gs(o.key,o.newValue);if(c)return n.zs(c)}}else if(n.Cs.test(o.key)){if(null!==o.newValue){const c=n.js(o.key,o.newValue);if(c)return n.Hs(c)}}else if(o.key===n.vs){if(null!==o.newValue){const c=n.xs(o.newValue);if(c)return n.Os(c)}}else if(o.key===n.Ss){const c=function(g){let R=Gt._e;if(null!=g)try{const k=JSON.parse(g);hn("number"==typeof k),R=k}catch(k){Jr("SharedClientState","Failed to read sequence number from WebStorage",k)}return R}(o.newValue);c!==Gt._e&&n.sequenceNumberHandler(c)}else if(o.key===n.Fs){const c=n.Js(o.newValue);yield Promise.all(c.map(h=>n.syncEngine.Ys(h)))}}else n.ys.push(o)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,o){const c=new Bp(this.currentUser,e,n,o),h=Um(this.persistenceKey,this.currentUser,e);this.setItem(h,c.ds())}Ls(e){const n=Um(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,o){const c=_y(this.persistenceKey,e),h=new jp(e,n,o);this.setItem(c,h.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const o=this.$s(e);return Bm.Es(o,n)}Gs(e,n){const o=this.Ds.exec(e),c=Number(o[1]);return Bp.Es(new Jn(void 0!==o[2]?o[2]:null),c,n)}js(e,n){const o=this.Cs.exec(e),c=Number(o[1]);return jp.Es(c,n)}xs(e){return $p.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,me.c)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);Lt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const o=n?this.ps.insert(e,n):this.ps.remove(e),c=this.Ns(this.ps),h=this.Ns(o),g=[],R=[];return h.forEach(k=>{c.has(k)||g.push(k)}),c.forEach(k=>{h.has(k)||R.push(k)}),this.syncEngine.eo(g,R).then(()=>{this.ps=o})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Rc();return e.forEach((o,c)=>{n=n.unionWith(c.activeTargetIds)}),n}}class Af{constructor(){this.no=new Gp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,o){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Gp,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jm{io(e){}shutdown(){}}class Wp{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Lt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Lt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Hp=null;function Wl(){return null===Hp?Hp=268435456+Math.round(2147483648*Math.random()):Hp++,"0x"+Hp.toString(16)}const zp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vy{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const jo="WebChannelConnection";class qp extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",c=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.fo=o+"://"+n.host,this.po=`projects/${c}/databases/${h}`,this.yo="(default)"===this.databaseId.database?`project_id=${c}`:`project_id=${c}&database_id=${h}`}get wo(){return!1}So(n,o,c,h,g){const R=Wl(),k=this.bo(n,o.toUriEncodedString());Lt("RestConnection",`Sending RPC '${n}' ${R}:`,k,c);const B={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(B,h,g),this.Co(n,k,B,c).then(Y=>(Lt("RestConnection",`Received RPC '${n}' ${R}: `,Y),Y),Y=>{throw no("RestConnection",`RPC '${n}' ${R} failed with error: `,Y,"url: ",k,"request:",c),Y})}vo(n,o,c,h,g,R){return this.So(n,o,c,h,g)}Do(n,o,c){n["X-Goog-Api-Client"]="gl-js/ fire/"+ui,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((h,g)=>n[g]=h),c&&c.headers.forEach((h,g)=>n[g]=h)}bo(n,o){return`${this.fo}/v1/${o}:${zp[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,o,c){const h=Wl();return new Promise((g,R)=>{const k=new as;k.setWithCredentials(!0),k.listenOnce(Gr.COMPLETE,()=>{try{switch(k.getLastErrorCode()){case Xr.NO_ERROR:const Y=k.getResponseJson();Lt(jo,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(Y)),g(Y);break;case Xr.TIMEOUT:Lt(jo,`RPC '${e}' ${h} timed out`),R(new Pt(ot.DEADLINE_EXCEEDED,"Request time out"));break;case Xr.HTTP_ERROR:const ce=k.getStatus();if(Lt(jo,`RPC '${e}' ${h} failed with status:`,ce,"response text:",k.getResponseText()),ce>0){let Ae=k.getResponseJson();Array.isArray(Ae)&&(Ae=Ae[0]);const Ye=Ae?.error;if(Ye&&Ye.status&&Ye.message){const Wt=function(tn){const xn=tn.toLowerCase().replace(/_/g,"-");return Object.values(ot).indexOf(xn)>=0?xn:ot.UNKNOWN}(Ye.status);R(new Pt(Wt,Ye.message))}else R(new Pt(ot.UNKNOWN,"Server responded with status "+k.getStatus()))}else R(new Pt(ot.UNAVAILABLE,"Connection failed."));break;default:on()}}finally{Lt(jo,`RPC '${e}' ${h} completed.`)}});const B=JSON.stringify(c);Lt(jo,`RPC '${e}' ${h} sending request:`,c),k.send(n,"POST",B,o,15)})}Fo(e,n,o){const c=Wl(),h=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=pt(),R=ln(),k={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},B=this.longPollingOptions.timeoutSeconds;void 0!==B&&(k.longPollingTimeout=Math.round(1e3*B)),this.useFetchStreams&&(k.useFetchStreams=!0),this.Do(k.initMessageHeaders,n,o),k.encodeInitMessageHeaders=!0;const Y=h.join("");Lt(jo,`Creating RPC '${e}' stream ${c}: ${Y}`,k);const ce=g.createWebChannel(Y,k);let Ae=!1,Ye=!1;const Wt=new vy({lo:tn=>{Ye?Lt(jo,`Not sending because RPC '${e}' stream ${c} is closed:`,tn):(Ae||(Lt(jo,`Opening RPC '${e}' stream ${c} transport.`),ce.open(),Ae=!0),Lt(jo,`RPC '${e}' stream ${c} sending:`,tn),ce.send(tn))},ho:()=>ce.close()}),nn=(tn,xn,_r)=>{tn.listen(xn,Nn=>{try{_r(Nn)}catch(Dn){setTimeout(()=>{throw Dn},0)}})};return nn(ce,Pr.EventType.OPEN,()=>{Ye||Lt(jo,`RPC '${e}' stream ${c} transport opened.`)}),nn(ce,Pr.EventType.CLOSE,()=>{Ye||(Ye=!0,Lt(jo,`RPC '${e}' stream ${c} transport closed`),Wt.Vo())}),nn(ce,Pr.EventType.ERROR,tn=>{Ye||(Ye=!0,no(jo,`RPC '${e}' stream ${c} transport errored:`,tn),Wt.Vo(new Pt(ot.UNAVAILABLE,"The operation could not be completed")))}),nn(ce,Pr.EventType.MESSAGE,tn=>{var xn;if(!Ye){const _r=tn.data[0];hn(!!_r);const Dn=_r.error||(null===(xn=_r[0])||void 0===xn?void 0:xn.error);if(Dn){Lt(jo,`RPC '${e}' stream ${c} received error:`,Dn);const _i=Dn.status;let Mi=function(Wh){const up=us[Wh];if(void 0!==up)return hc(up)}(_i),Hr=Dn.message;void 0===Mi&&(Mi=ot.INTERNAL,Hr="Unknown error status: "+_i+" with message "+Dn.message),Ye=!0,Wt.Vo(new Pt(Mi,Hr)),ce.close()}else Lt(jo,`RPC '${e}' stream ${c} received:`,_r),Wt.mo(_r)}}),nn(R,ni.STAT_EVENT,tn=>{tn.stat===Kn.PROXY?Lt(jo,`RPC '${e}' stream ${c} detected buffering proxy`):tn.stat===Kn.NOPROXY&&Lt(jo,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{Wt.Ro()},0),Wt}}function Ey(){return typeof window<"u"?window:null}function Kp(){return typeof document<"u"?document:null}function Th(i){return new Ol(i,!0)}class $m{constructor(e,n,o=1e3,c=1.5,h=6e4){this.oi=e,this.timerId=n,this.Mo=o,this.xo=c,this.Oo=h,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),o=Math.max(0,Date.now()-this.Lo),c=Math.max(0,n-o);c>0&&Lt("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,c,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Iy{constructor(e,n,o,c,h,g,R,k){this.oi=e,this.$o=o,this.Uo=c,this.connection=h,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=R,this.listener=k,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new $m(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,me.c)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,me.c)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var o=this;return(0,me.c)(function*(){o.n_(),o.r_(),o.jo.cancel(),o.Wo++,4!==e?o.jo.reset():n&&n.code===ot.RESOURCE_EXHAUSTED?(Jr(n.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),o.jo.ko()):n&&n.code===ot.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.i_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,c])=>{this.Wo===n&&this.o_(o,c)},o=>{e(()=>{const c=new Pt(ot.UNKNOWN,"Fetching auth token failed: "+o.message);return this.__(c)})})}o_(e,n){const o=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{o(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(c=>{o(()=>this.__(c))}),this.stream.onMessage(c=>{o(()=>this.onMessage(c))})}Yo(){var e=this;this.state=5,this.jo.qo((0,me.c)(function*(){e.state=0,e.start()}))}__(e){return Lt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(Lt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kE extends Iy{constructor(e,n,o,c,h,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,c,g),this.serializer=h}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function oy(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(B=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:on(),c=e.targetChange.targetIds||[],h=function(B,Y){return B.useProto3Json?(hn(void 0===Y||"string"==typeof Y),ws.fromBase64String(Y||"")):(hn(void 0===Y||Y instanceof Uint8Array),ws.fromUint8Array(Y||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,R=g&&function(B){const Y=void 0===B.code?ot.UNKNOWN:hc(B.code);return new Pt(Y,B.message||"")}(g);n=new uf(o,c,h,R||null)}else if("documentChange"in e){const o=e.documentChange,c=au(i,o.document.name),h=Ui(o.document.updateTime),g=o.document.createTime?Ui(o.document.createTime):mn.min(),R=new Zi({mapValue:{fields:o.document.fields}}),k=Vi.newFoundDocument(c,h,g,R);n=new bl(o.targetIds||[],o.removedTargetIds||[],k.key,k)}else if("documentDelete"in e){const o=e.documentDelete,c=au(i,o.document),h=o.readTime?Ui(o.readTime):mn.min(),g=Vi.newNoDocument(c,h);n=new bl([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,c=au(i,o.document);n=new bl([],o.removedTargetIds||[],c,null)}else{if(!("filter"in e))return on();{const o=e.filter,{count:c=0,unchangedNames:h}=o,g=new _d(c,h);n=new ih(o.targetId,g)}}var B;return n}(this.serializer,e),o=function(h){if(!("targetChange"in h))return mn.min();const g=h.targetChange;return g.targetIds&&g.targetIds.length?mn.min():g.readTime?Ui(g.readTime):mn.min()}(e);return this.listener.u_(n,o)}c_(e){const n={};n.database=pf(this.serializer),n.addTarget=function(h,g){let R;const k=g.target;if(R=Xu(k)?{documents:mm(h,k)}:{query:ah(h,k).ut},R.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){R.resumeToken=vp(h,g.resumeToken);const B=yp(h,g.expectedCount);null!==B&&(R.expectedCount=B)}else if(g.snapshotVersion.compareTo(mn.min())>0){R.readTime=xl(h,g.snapshotVersion.toTimestamp());const B=yp(h,g.expectedCount);null!==B&&(R.expectedCount=B)}return R}(this.serializer,e);const o=function ym(i,e){const n=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return on()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.t_(n)}l_(e){const n={};n.database=pf(this.serializer),n.removeTarget=e,this.t_(n)}}class Cy extends Iy{constructor(e,n,o,c,h,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,c,g),this.serializer=h,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(hn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function Tp(i,e){return i&&i.length>0?(hn(void 0!==e),i.map(n=>function(c,h){let g=Ui(c.updateTime?c.updateTime:h);return g.isEqual(mn.min())&&(g=Ui(h)),new nf(g,c.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=Ui(e.commitTime);return this.listener.T_(o,n)}return hn(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=pf(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>yd(this.serializer,o))};this.t_(n)}}class Sf extends class{}{constructor(e,n,o,c){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=c,this.A_=!1}R_(){if(this.A_)throw new Pt(ot.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,o,c){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,g])=>this.connection.So(e,df(n,o),c,h,g)).catch(h=>{throw"FirebaseError"===h.name?(h.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Pt(ot.UNKNOWN,h.toString())})}vo(e,n,o,c,h){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,R])=>this.connection.vo(e,df(n,o),c,g,R,h)).catch(g=>{throw"FirebaseError"===g.name?(g.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new Pt(ot.UNKNOWN,g.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class FE{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Jr(n),this.g_=!1):Lt("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class LE{constructor(e,n,o,c,h){var g=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=h,this.M_.io(R=>{o.enqueueAndForget((0,me.c)(function*(){var k;ul(g)&&(Lt("RemoteStore","Restarting streams for network reachability change."),yield(k=(0,me.c)(function*(Y){const ce=zt(Y);ce.v_.add(4),yield Fc(ce),ce.x_.set("Unknown"),ce.v_.delete(4),yield Td(ce)}),function B(Y){return k.apply(this,arguments)})(g))}))}),this.x_=new FE(o,c)}}function Td(i){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,me.c)(function*(i){if(ul(i))for(const e of i.F_)yield e(!0)}),Qp.apply(this,arguments)}function Fc(i){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,me.c)(function*(i){for(const e of i.F_)yield e(!1)}),Jp.apply(this,arguments)}function bf(i,e){const n=zt(i);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Xp(n)?Gm(n):Vu(n).Jo()&&wy(n,e))}function Rf(i,e){const n=zt(i),o=Vu(n);n.C_.delete(e),o.Jo()&&Mf(n,e),0===n.C_.size&&(o.Jo()?o.Xo():ul(n)&&n.x_.set("Unknown"))}function wy(i,e){if(i.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mn.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vu(i).c_(e)}function Mf(i,e){i.O_.Oe(e),Vu(i).l_(e)}function Gm(i){i.O_=new pm({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.C_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Vu(i).start(),i.x_.p_()}function Xp(i){return ul(i)&&!Vu(i).Ho()&&i.C_.size>0}function ul(i){return 0===zt(i).v_.size}function Wm(i){i.O_=void 0}function Hm(i){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,me.c)(function*(i){i.C_.forEach((e,n)=>{wy(i,e)})}),Zp.apply(this,arguments)}function eg(i,e){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,me.c)(function*(i,e){Wm(i),Xp(i)?(i.x_.S_(e),Gm(i)):i.x_.set("Unknown")}),Dd.apply(this,arguments)}function Ty(i,e,n){return Of.apply(this,arguments)}function Of(){return Of=(0,me.c)(function*(i,e,n){if(i.x_.set("Online"),e instanceof uf&&2===e.state&&e.cause)try{yield(o=(0,me.c)(function*(h,g){const R=g.cause;for(const k of g.targetIds)h.C_.has(k)&&(yield h.remoteSyncer.rejectListen(k,R),h.C_.delete(k),h.O_.removeTarget(k))}),function c(h,g){return o.apply(this,arguments)})(i,e)}catch(o){Lt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Ad(i,o)}else if(e instanceof bl?i.O_.$e(e):e instanceof ih?i.O_.Je(e):i.O_.Ge(e),!n.isEqual(mn.min()))try{const o=yield OE(i.localStore);n.compareTo(o)>=0&&(yield function(h,g){const R=h.O_.it(g);return R.targetChanges.forEach((k,B)=>{if(k.resumeToken.approximateByteSize()>0){const Y=h.C_.get(B);Y&&h.C_.set(B,Y.withResumeToken(k.resumeToken,g))}}),R.targetMismatches.forEach((k,B)=>{const Y=h.C_.get(k);if(!Y)return;h.C_.set(k,Y.withResumeToken(ws.EMPTY_BYTE_STRING,Y.snapshotVersion)),Mf(h,k);const ce=new Ga(Y.target,k,B,Y.sequenceNumber);wy(h,ce)}),h.remoteSyncer.applyRemoteEvent(R)}(i,n))}catch(o){Lt("RemoteStore","Failed to raise snapshot:",o),yield Ad(i,o)}var o}),Of.apply(this,arguments)}function Ad(i,e,n){return tg.apply(this,arguments)}function tg(){return tg=(0,me.c)(function*(i,e,n){if(!D(e))throw e;i.v_.add(1),yield Fc(i),i.x_.set("Offline"),n||(n=()=>OE(i.localStore)),i.asyncQueue.enqueueRetryable((0,me.c)(function*(){Lt("RemoteStore","Retrying IndexedDB access"),yield n(),i.v_.delete(1),yield Td(i)}))}),tg.apply(this,arguments)}function ng(i,e){return e().catch(n=>Ad(i,n,e))}function ll(i){return zm.apply(this,arguments)}function zm(){return zm=(0,me.c)(function*(i){const e=zt(i),n=dl(e);let o=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Dy(e);)try{const c=yield t0(e.localStore,o);if(null===c){0===e.D_.length&&n.Xo();break}o=c.batchId,VE(e,c)}catch(c){yield Ad(e,c)}Ay(e)&&Sy(e)}),zm.apply(this,arguments)}function Dy(i){return ul(i)&&i.D_.length<10}function VE(i,e){i.D_.push(e);const n=dl(i);n.Jo()&&n.P_&&n.I_(e.mutations)}function Ay(i){return ul(i)&&!dl(i).Ho()&&i.D_.length>0}function Sy(i){dl(i).start()}function Py(i){return rg.apply(this,arguments)}function rg(){return rg=(0,me.c)(function*(i){dl(i).d_()}),rg.apply(this,arguments)}function Ir(i){return ig.apply(this,arguments)}function ig(){return ig=(0,me.c)(function*(i){const e=dl(i);for(const n of i.D_)e.I_(n.mutations)}),ig.apply(this,arguments)}function by(i,e,n){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,me.c)(function*(i,e,n){const o=i.D_.shift(),c=sf.from(o,e,n);yield ng(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),yield ll(i)}),Hl.apply(this,arguments)}function Ry(i,e){return sg.apply(this,arguments)}function sg(){return sg=(0,me.c)(function*(i,e){var n;e&&dl(i).P_&&(yield(n=(0,me.c)(function*(c,h){if(ou(R=h.code)&&R!==ot.ABORTED){const g=c.D_.shift();dl(c).Zo(),yield ng(c,()=>c.remoteSyncer.rejectFailedWrite(g.batchId,h)),yield ll(c)}var R}),function o(c,h){return n.apply(this,arguments)})(i,e)),Ay(i)&&Sy(i)}),sg.apply(this,arguments)}function My(i,e){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,me.c)(function*(i,e){const n=zt(i);n.asyncQueue.verifyOperationInProgress(),Lt("RemoteStore","RemoteStore received new credentials");const o=ul(n);n.v_.add(3),yield Fc(n),o&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Td(n)}),Dh.apply(this,arguments)}function zl(i,e){return xf.apply(this,arguments)}function xf(){return xf=(0,me.c)(function*(i,e){const n=zt(i);e?(n.v_.delete(2),yield Td(n)):e||(n.v_.add(2),yield Fc(n),n.x_.set("Unknown"))}),xf.apply(this,arguments)}function Vu(i){return i.N_||(i.N_=function(n,o,c){const h=zt(n);return h.R_(),new kE(o,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)}(i.datastore,i.asyncQueue,{Po:Hm.bind(null,i),To:eg.bind(null,i),u_:Ty.bind(null,i)}),i.F_.push(function(){var e=(0,me.c)(function*(n){n?(i.N_.Zo(),Xp(i)?Gm(i):i.x_.set("Unknown")):(yield i.N_.stop(),Wm(i))});return function(n){return e.apply(this,arguments)}}())),i.N_}function dl(i){return i.B_||(i.B_=function(n,o,c){const h=zt(n);return h.R_(),new Cy(o,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)}(i.datastore,i.asyncQueue,{Po:Py.bind(null,i),To:Ry.bind(null,i),E_:Ir.bind(null,i),T_:by.bind(null,i)}),i.F_.push(function(){var e=(0,me.c)(function*(n){n?(i.B_.Zo(),yield ll(i)):(yield i.B_.stop(),i.D_.length>0&&(Lt("RemoteStore",`Stopping write stream with ${i.D_.length} pending writes`),i.D_=[]))});return function(n){return e.apply(this,arguments)}}())),i.B_}class Nf{constructor(e,n,o,c,h){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=c,this.removalCallback=h,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,c,h){const g=Date.now()+o,R=new Nf(e,n,g,c,h);return R.start(o),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pt(ot.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ql(i,e){if(Jr("AsyncQueue",`${e}: ${i}`),D(i))return new Pt(ot.UNAVAILABLE,`${e}: ${i}`);throw i}class Kl{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Jt.comparator(n.key,o.key):(n,o)=>Jt.comparator(n.key,o.key),this.keyedMap=uc(),this.sortedSet=new Ci(this.comparator)}static emptySet(e){return new Kl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Kl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const c=n.getNext().key,h=o.getNext().key;if(!c.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new Kl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class qm{constructor(){this.L_=new Ci(Jt.comparator)}track(e){const n=e.doc.key,o=this.L_.get(n);o?0!==e.type&&3===o.type?this.L_=this.L_.insert(n,e):3===e.type&&1!==o.type?this.L_=this.L_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.L_=this.L_.remove(n):1===e.type&&2===o.type?this.L_=this.L_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):on():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,o)=>{e.push(o)}),e}}class Yl{constructor(e,n,o,c,h,g,R,k,B){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=c,this.mutatedKeys=h,this.fromCache=g,this.syncStateChanged=R,this.excludesMetadataChanges=k,this.hasCachedResults=B}static fromInitialDocuments(e,n,o,c,h){const g=[];return n.forEach(R=>{g.push({type:0,doc:R})}),new Yl(e,n,Kl.emptySet(n),g,o,c,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&be(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let c=0;c<n.length;c++)if(n[c].type!==o[c].type||!n[c].doc.isEqual(o[c].doc))return!1;return!0}}class UE{constructor(){this.q_=void 0,this.Q_=[]}}class BE{constructor(){this.queries=new ms(e=>nt(e),be),this.onlineState="Unknown",this.K_=new Set}}function Km(i,e){return og.apply(this,arguments)}function og(){return og=(0,me.c)(function*(i,e){const n=zt(i),o=e.query;let c=!1,h=n.queries.get(o);if(h||(c=!0,h=new UE),c)try{h.q_=yield n.onListen(o)}catch(g){const R=ql(g,`Initialization of query '${St(e.query)}' failed`);return void e.onError(R)}n.queries.set(o,h),h.Q_.push(e),e.U_(n.onlineState),h.q_&&e.W_(h.q_)&&ag(n)}),og.apply(this,arguments)}function Ym(i,e){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,me.c)(function*(i,e){const n=zt(i),o=e.query;let c=!1;const h=n.queries.get(o);if(h){const g=h.Q_.indexOf(e);g>=0&&(h.Q_.splice(g,1),c=0===h.Q_.length)}if(c)return n.queries.delete(o),n.onUnlisten(o)}),Qm.apply(this,arguments)}function jE(i,e){const n=zt(i);let o=!1;for(const c of e){const g=n.queries.get(c.query);if(g){for(const R of g.Q_)R.W_(c)&&(o=!0);g.q_=c}}o&&ag(n)}function $E(i,e,n){const o=zt(i),c=o.queries.get(e);if(c)for(const h of c.Q_)h.onError(n);o.queries.delete(e)}function ag(i){i.K_.forEach(e=>{e.next()})}class cg{constructor(e,n,o){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=o||{}}W_(e){if(!this.options.includeMetadataChanges){const o=[];for(const c of e.docChanges)3!==c.type&&o.push(c);e=new Yl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){return!e.fromCache||(!this.options.Z_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class GE{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}}class Oy{constructor(e){this.serializer=e}Ps(e){return au(this.serializer,e)}Is(e){return e.metadata.exists?oh(this.serializer,e.document,!1):Vi.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ui(e)}}class Ha{constructor(e,n,o){this.ta=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xy(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;const o=Ur.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){const n=new Map,o=new Oy(this.serializer);for(const c of e)if(c.metadata.queries){const h=o.Ps(c.metadata.name);for(const g of c.metadata.queries){const R=(n.get(g)||nr()).add(h);n.set(g,R)}}return n}complete(){var e=this;return(0,me.c)(function*(){const n=yield function NE(i,e,n,o){return Up.apply(this,arguments)}(e.localStore,new Oy(e.serializer),e.documents,e.ta.id),o=e.ra(e.documents);for(const c of e.queries)yield wh(e.localStore,c,o.get(c.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:n}})()}}function xy(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Ny{constructor(e){this.key=e}}class WE{constructor(e){this.key=e}}class ug{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=nr(),this.mutatedKeys=nr(),this.ua=tr(e),this.ca=new Kl(this.ua)}get la(){return this.oa}ha(e,n){const o=n?n.Pa:new qm,c=n?n.ca:this.ca;let h=n?n.mutatedKeys:this.mutatedKeys,g=c,R=!1;const k="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,B="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((Y,ce)=>{const Ae=c.get(Y),Ye=dn(this.query,ce)?ce:null,Wt=!!Ae&&this.mutatedKeys.has(Ae.key),nn=!!Ye&&(Ye.hasLocalMutations||this.mutatedKeys.has(Ye.key)&&Ye.hasCommittedMutations);let tn=!1;Ae&&Ye?Ae.data.isEqual(Ye.data)?Wt!==nn&&(o.track({type:3,doc:Ye}),tn=!0):this.Ia(Ae,Ye)||(o.track({type:2,doc:Ye}),tn=!0,(k&&this.ua(Ye,k)>0||B&&this.ua(Ye,B)<0)&&(R=!0)):!Ae&&Ye?(o.track({type:0,doc:Ye}),tn=!0):Ae&&!Ye&&(o.track({type:1,doc:Ae}),tn=!0,(k||B)&&(R=!0)),tn&&(Ye?(g=g.add(Ye),h=nn?h.add(Y):h.delete(Y)):(g=g.delete(Y),h=h.delete(Y)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const Y="F"===this.query.limitType?g.last():g.first();g=g.delete(Y.key),h=h.delete(Y.key),o.track({type:1,doc:Y})}return{ca:g,Pa:o,Xi:R,mutatedKeys:h}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,c){const h=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const g=e.Pa.k_();g.sort((Y,ce)=>function(Ye,Wt){const nn=tn=>{switch(tn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return on()}};return nn(Ye)-nn(Wt)}(Y.type,ce.type)||this.ua(Y.doc,ce.doc)),this.Ta(o),c=null!=c&&c;const R=n&&!c?this.Ea():[],k=0===this.aa.size&&this.current&&!c?1:0,B=k!==this._a;return this._a=k,0!==g.length||B?{snapshot:new Yl(this.query,e.ca,h,g,e.mutatedKeys,0===k,B,!1,!!o&&o.resumeToken.approximateByteSize()>0),da:R}:{da:R}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new qm,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=nr(),this.ca.forEach(o=>{this.Aa(o.key)&&(this.aa=this.aa.add(o.key))});const n=[];return e.forEach(o=>{this.aa.has(o)||n.push(new WE(o))}),this.aa.forEach(o=>{e.has(o)||n.push(new Ny(o))}),n}Ra(e){this.oa=e.hs,this.aa=nr();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Yl.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class ky{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class HE{constructor(e){this.key=e,this.ma=!1}}class zE{constructor(e,n,o,c,h,g){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=c,this.currentUser=h,this.maxConcurrentLimboResolutions=g,this.fa={},this.ga=new ms(R=>nt(R),be),this.pa=new Map,this.ya=new Set,this.wa=new Ci(Jt.comparator),this.Sa=new Map,this.ba=new Tf,this.Da={},this.Ca=new Map,this.va=jl.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function qE(i,e){return lg.apply(this,arguments)}function lg(){return lg=(0,me.c)(function*(i,e){const n=Ph(i);let o,c;const h=n.ga.get(e);if(h)o=h.targetId,n.sharedClientState.addLocalQueryTarget(o),c=h.view.Va();else{const g=yield Eh(n.localStore,v(e)),R=n.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,c=yield Jm(n,e,o,"current"===R,g.resumeToken),n.isPrimaryClient&&bf(n.remoteStore,g)}return c}),lg.apply(this,arguments)}function Jm(i,e,n,o,c){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,me.c)(function*(i,e,n,o,c){i.Ma=(ce,Ae,Ye)=>{return(Wt=(0,me.c)(function*(tn,xn,_r,Nn){let Dn=xn.view.ha(_r);Dn.Xi&&(Dn=yield Ch(tn.localStore,xn.query,!1).then(({documents:ha})=>xn.view.ha(ha,Dn)));const _i=Nn&&Nn.targetChanges.get(xn.targetId),Mi=Nn&&null!=Nn.targetMismatches.get(xn.targetId),Hr=xn.view.applyChanges(Dn,tn.isPrimaryClient,_i,Mi);return Ff(tn,xn.targetId,Hr.da),Hr.snapshot}),function nn(tn,xn,_r,Nn){return Wt.apply(this,arguments)})(i,ce,Ae,Ye);var Wt};const h=yield Ch(i.localStore,e,!0),g=new ug(e,h.hs),R=g.ha(h.documents),k=Pl.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,c),B=g.applyChanges(R,i.isPrimaryClient,k);Ff(i,n,B.da);const Y=new ky(e,n,g);return i.ga.set(e,Y),i.pa.has(n)?i.pa.get(n).push(e):i.pa.set(n,[e]),B.snapshot}),Xm.apply(this,arguments)}function Zm(i,e){return e_.apply(this,arguments)}function e_(){return e_=(0,me.c)(function*(i,e){const n=zt(i),o=n.ga.get(e),c=n.pa.get(o.targetId);if(c.length>1)return n.pa.set(o.targetId,c.filter(h=>!be(h,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield al(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),Rf(n.remoteStore,o.targetId),Sd(n,o.targetId)}).catch(so))):(Sd(n,o.targetId),yield al(n.localStore,o.targetId,!0))}),e_.apply(this,arguments)}function t_(){return t_=(0,me.c)(function*(i,e,n){const o=l_(i);try{const c=yield function(g,R){const k=zt(g),B=gi.now(),Y=R.reduce((Ye,Wt)=>Ye.add(Wt.key),nr());let ce,Ae;return k.persistence.runTransaction("Locally write mutations","readwrite",Ye=>{let Wt=yo(),nn=nr();return k.os.getEntries(Ye,Y).next(tn=>{Wt=tn,Wt.forEach((xn,_r)=>{_r.isValidDocument()||(nn=nn.add(xn))})}).next(()=>k.localDocuments.getOverlayedDocuments(Ye,Wt)).next(tn=>{ce=tn;const xn=[];for(const _r of R){const Nn=eh(_r,ce.get(_r.key).overlayedDocument);null!=Nn&&xn.push(new dc(_r.key,Nn,qd(Nn.value.mapValue),Ki.exists(!0)))}return k.mutationQueue.addMutationBatch(Ye,B,xn,R)}).next(tn=>{Ae=tn;const xn=tn.applyToLocalDocumentSet(ce,nn);return k.documentOverlayCache.saveOverlays(Ye,tn.batchId,xn)})}).then(()=>({batchId:Ae.batchId,changes:pd(ce)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(c.batchId),function(g,R,k){let B=g.Da[g.currentUser.toKey()];B||(B=new Ci(Sn)),B=B.insert(R,k),g.Da[g.currentUser.toKey()]=B}(o,c.batchId,n),yield fl(o,c.changes),yield ll(o.remoteStore)}catch(c){const h=ql(c,"Failed to persist write");n.reject(h)}}),t_.apply(this,arguments)}function Fy(i,e){return n_.apply(this,arguments)}function n_(){return n_=(0,me.c)(function*(i,e){const n=zt(i);try{const o=yield function e0(i,e){const n=zt(i),o=e.snapshotVersion;let c=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const g=n.os.newChangeBuffer({trackRemovals:!0});c=n.ns;const R=[];e.targetChanges.forEach((Y,ce)=>{const Ae=c.get(ce);if(!Ae)return;R.push(n.Qr.removeMatchingKeys(h,Y.removedDocuments,ce).next(()=>n.Qr.addMatchingKeys(h,Y.addedDocuments,ce)));let Ye=Ae.withSequenceNumber(h.currentSequenceNumber);var nn,tn,xn;null!==e.targetMismatches.get(ce)?Ye=Ye.withResumeToken(ws.EMPTY_BYTE_STRING,mn.min()).withLastLimboFreeSnapshotVersion(mn.min()):Y.resumeToken.approximateByteSize()>0&&(Ye=Ye.withResumeToken(Y.resumeToken,o)),c=c.insert(ce,Ye),tn=Ye,xn=Y,(0===(nn=Ae).resumeToken.approximateByteSize()||tn.snapshotVersion.toMicroseconds()-nn.snapshotVersion.toMicroseconds()>=3e8||xn.addedDocuments.size+xn.modifiedDocuments.size+xn.removedDocuments.size>0)&&R.push(n.Qr.updateTargetData(h,Ye))});let k=yo(),B=nr();if(e.documentUpdates.forEach(Y=>{e.resolvedLimboDocuments.has(Y)&&R.push(n.persistence.referenceDelegate.updateLimboDocument(h,Y))}),R.push(xE(h,g,e.documentUpdates).next(Y=>{k=Y.cs,B=Y.ls})),!o.isEqual(mn.min())){const Y=n.Qr.getLastRemoteSnapshotVersion(h).next(ce=>n.Qr.setTargetsMetadata(h,h.currentSequenceNumber,o));R.push(Y)}return Ke.waitFor(R).next(()=>g.apply(h)).next(()=>n.localDocuments.getLocalViewOfDocuments(h,k,B)).next(()=>k)}).then(h=>(n.ns=c,h))}(n.localStore,e);e.targetChanges.forEach((c,h)=>{const g=n.Sa.get(h);g&&(hn(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?g.ma=!0:c.modifiedDocuments.size>0?hn(g.ma):c.removedDocuments.size>0&&(hn(g.ma),g.ma=!1))}),yield fl(n,o,e)}catch(o){yield so(o)}}),n_.apply(this,arguments)}function hu(i,e,n){const o=zt(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const c=[];o.ga.forEach((h,g)=>{const R=g.view.U_(e);R.snapshot&&c.push(R.snapshot)}),function(g,R){const k=zt(g);k.onlineState=R;let B=!1;k.queries.forEach((Y,ce)=>{for(const Ae of ce.Q_)Ae.U_(R)&&(B=!0)}),B&&ag(k)}(o.eventManager,e),c.length&&o.fa.u_(c),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function r_(i,e,n){return i_.apply(this,arguments)}function i_(){return i_=(0,me.c)(function*(i,e,n){const o=zt(i);o.sharedClientState.updateQueryState(e,"rejected",n);const c=o.Sa.get(e),h=c&&c.key;if(h){let g=new Ci(Jt.comparator);g=g.insert(h,Vi.newNoDocument(h,mn.min()));const R=nr().add(h),k=new Zu(mn.min(),new Map,new Ci(Sn),g,R);yield Fy(o,k),o.wa=o.wa.remove(h),o.Sa.delete(e),o_(o)}else yield al(o.localStore,e,!1).then(()=>Sd(o,e,n)).catch(so)}),i_.apply(this,arguments)}function YE(i,e){return dg.apply(this,arguments)}function dg(){return dg=(0,me.c)(function*(i,e){const n=zt(i),o=e.batch.batchId;try{const c=yield function gy(i,e){const n=zt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const c=e.batch.keys(),h=n.os.newChangeBuffer({trackRemovals:!0});return function(R,k,B,Y){const ce=B.batch,Ae=ce.keys();let Ye=Ke.resolve();return Ae.forEach(Wt=>{Ye=Ye.next(()=>Y.getEntry(k,Wt)).next(nn=>{const tn=B.docVersions.get(Wt);hn(null!==tn),nn.version.compareTo(tn)<0&&(ce.applyToRemoteDocument(nn,B),nn.isValidDocument()&&(nn.setReadTime(B.commitVersion),Y.addEntry(nn)))})}),Ye.next(()=>R.mutationQueue.removeMutationBatch(k,ce))}(n,o,e,h).next(()=>h.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,c,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(R){let k=nr();for(let B=0;B<R.mutationResults.length;++B)R.mutationResults[B].transformResults.length>0&&(k=k.add(R.batch.mutations[B].key));return k}(e))).next(()=>n.localDocuments.getDocuments(o,c))})}(n.localStore,e);fg(n,o,null),hg(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield fl(n,c)}catch(c){yield so(c)}}),dg.apply(this,arguments)}function Ly(i,e,n){return Ah.apply(this,arguments)}function Ah(){return Ah=(0,me.c)(function*(i,e,n){const o=zt(i);try{const c=yield function(g,R){const k=zt(g);return k.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let Y;return k.mutationQueue.lookupMutationBatch(B,R).next(ce=>(hn(null!==ce),Y=ce.keys(),k.mutationQueue.removeMutationBatch(B,ce))).next(()=>k.mutationQueue.performConsistencyCheck(B)).next(()=>k.documentOverlayCache.removeOverlaysForBatchId(B,Y,R)).next(()=>k.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(B,Y)).next(()=>k.localDocuments.getDocuments(B,Y))})}(o.localStore,e);fg(o,e,n),hg(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield fl(o,c)}catch(c){yield so(c)}}),Ah.apply(this,arguments)}function Vy(){return Vy=(0,me.c)(function*(i,e){const n=zt(i);ul(n.remoteStore)||Lt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(g){const R=zt(g);return R.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>R.mutationQueue.getHighestUnacknowledgedBatchId(k))}(n.localStore);if(-1===o)return void e.resolve();const c=n.Ca.get(o)||[];c.push(e),n.Ca.set(o,c)}catch(o){const c=ql(o,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),Vy.apply(this,arguments)}function hg(i,e){(i.Ca.get(e)||[]).forEach(n=>{n.resolve()}),i.Ca.delete(e)}function fg(i,e,n){const o=zt(i);let c=o.Da[o.currentUser.toKey()];if(c){const h=c.get(e);h&&(n?h.reject(n):h.resolve(),c=c.remove(e)),o.Da[o.currentUser.toKey()]=c}}function Sd(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.pa.get(e))i.ga.delete(o),n&&i.fa.xa(o,n);i.pa.delete(e),i.isPrimaryClient&&i.ba.Vr(e).forEach(o=>{i.ba.containsKey(o)||kf(i,o)})}function kf(i,e){i.ya.delete(e.path.canonicalString());const n=i.wa.get(e);null!==n&&(Rf(i.remoteStore,n),i.wa=i.wa.remove(e),i.Sa.delete(n),o_(i))}function Ff(i,e,n){for(const o of n)o instanceof Ny?(i.ba.addReference(o.key,e),hl(i,o)):o instanceof WE?(Lt("SyncEngine","Document no longer in limbo: "+o.key),i.ba.removeReference(o.key,e),i.ba.containsKey(o.key)||kf(i,o.key)):on()}function hl(i,e){const n=e.key,o=n.path.canonicalString();i.wa.get(n)||i.ya.has(o)||(Lt("SyncEngine","New document in limbo: "+n),i.ya.add(o),o_(i))}function o_(i){for(;i.ya.size>0&&i.wa.size<i.maxConcurrentLimboResolutions;){const e=i.ya.values().next().value;i.ya.delete(e);const n=new Jt(Ur.fromString(e)),o=i.va.next();i.Sa.set(o,new HE(n)),i.wa=i.wa.insert(n,o),bf(i.remoteStore,new Ga(v(cc(n.path)),o,"TargetPurposeLimboResolution",Gt._e))}}function fl(i,e,n){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,me.c)(function*(i,e,n){const o=zt(i),c=[],h=[],g=[];var R;o.ga.isEmpty()||(o.ga.forEach((R,k)=>{g.push(o.Ma(k,e,n).then(B=>{if((B||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(k.targetId,B?.fromCache?"not-current":"current"),B){c.push(B);const Y=_n.Ki(k.targetId,B);h.push(Y)}}))}),yield Promise.all(g),o.fa.u_(c),yield(R=(0,me.c)(function*(B,Y){const ce=zt(B);try{yield ce.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ae=>Ke.forEach(Y,Ye=>Ke.forEach(Ye.qi,Wt=>ce.persistence.referenceDelegate.addReference(Ae,Ye.targetId,Wt)).next(()=>Ke.forEach(Ye.Qi,Wt=>ce.persistence.referenceDelegate.removeReference(Ae,Ye.targetId,Wt)))))}catch(Ae){if(!D(Ae))throw Ae;Lt("LocalStore","Failed to update sequence numbers: "+Ae)}for(const Ae of Y){const Ye=Ae.targetId;if(!Ae.fromCache){const Wt=ce.ns.get(Ye),tn=Wt.withLastLimboFreeSnapshotVersion(Wt.snapshotVersion);ce.ns=ce.ns.insert(Ye,tn)}}}),function k(B,Y){return R.apply(this,arguments)})(o.localStore,h))}),Lf.apply(this,arguments)}function QE(i,e){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,me.c)(function*(i,e){const n=zt(i);if(!n.currentUser.isEqual(e)){Lt("SyncEngine","User change. New user:",e.toKey());const o=yield vh(n.localStore,e);n.currentUser=e,(h=n).Ca.forEach(R=>{R.forEach(k=>{k.reject(new Pt(ot.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.Ca.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield fl(n,o.us)}var h}),Pd.apply(this,arguments)}function Uy(i,e){const n=zt(i),o=n.Sa.get(e);if(o&&o.ma)return nr().add(o.key);{let c=nr();const h=n.pa.get(e);if(!h)return c;for(const g of h){const R=n.ga.get(g);c=c.unionWith(R.view.la)}return c}}function Sh(i,e){return bd.apply(this,arguments)}function bd(){return bd=(0,me.c)(function*(i,e){const n=zt(i),o=yield Ch(n.localStore,e.query,!0),c=e.view.Ra(o);return n.isPrimaryClient&&Ff(n,e.targetId,c.da),c}),bd.apply(this,arguments)}function a_(i,e){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,me.c)(function*(i,e){const n=zt(i);return Vm(n.localStore,e).then(o=>fl(n,o))}),Rd.apply(this,arguments)}function By(i,e,n,o){return pg.apply(this,arguments)}function pg(){return pg=(0,me.c)(function*(i,e,n,o){const c=zt(i),h=yield function(R,k){const B=zt(R),Y=zt(B.mutationQueue);return B.persistence.runTransaction("Lookup mutation documents","readonly",ce=>Y.vn(ce,k).next(Ae=>Ae?B.localDocuments.getDocuments(ce,Ae):Ke.resolve(null)))}(c.localStore,e);var k;null!==h?("pending"===n?yield ll(c.remoteStore):"acknowledged"===n||"rejected"===n?(fg(c,e,o||null),hg(c,e),k=e,zt(zt(c.localStore).mutationQueue).Mn(k)):on(),yield fl(c,h)):Lt("SyncEngine","Cannot apply mutation batch with id: "+e)}),pg.apply(this,arguments)}function c_(){return c_=(0,me.c)(function*(i,e){const n=zt(i);if(Ph(n),l_(n),!0===e&&!0!==n.Fa){const o=n.sharedClientState.getAllActiveQueryTargets(),c=yield jy(n,o.toArray());n.Fa=!0,yield zl(n.remoteStore,!0);for(const h of c)bf(n.remoteStore,h)}else if(!1===e&&!1!==n.Fa){const o=[];let c=Promise.resolve();n.pa.forEach((h,g)=>{n.sharedClientState.isLocalQueryTarget(g)?o.push(g):c=c.then(()=>(Sd(n,g),al(n.localStore,g,!0))),Rf(n.remoteStore,g)}),yield c,yield jy(n,o),function(g){const R=zt(g);R.Sa.forEach((k,B)=>{Rf(R.remoteStore,B)}),R.ba.mr(),R.Sa=new Map,R.wa=new Ci(Jt.comparator)}(n),n.Fa=!1,yield zl(n.remoteStore,!1)}}),c_.apply(this,arguments)}function jy(i,e,n){return u_.apply(this,arguments)}function u_(){return u_=(0,me.c)(function*(i,e,n){const o=zt(i),c=[],h=[];for(const g of e){let R;const k=o.pa.get(g);if(k&&0!==k.length){R=yield Eh(o.localStore,v(k[0]));for(const B of k){const Y=o.ga.get(B),ce=yield Sh(o,Y);ce.snapshot&&h.push(ce.snapshot)}}else{const B=yield Lm(o.localStore,g);R=yield Eh(o.localStore,B),yield Jm(o,$y(B),g,!1,R.resumeToken)}c.push(R)}return o.fa.u_(h),c}),u_.apply(this,arguments)}function $y(i){return Dl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function XE(i){return n=zt(i).localStore,zt(zt(n).persistence).Li();var n}function Gy(i,e,n,o){return gg.apply(this,arguments)}function gg(){return gg=(0,me.c)(function*(i,e,n,o){const c=zt(i);if(c.Fa)return void Lt("SyncEngine","Ignoring unexpected query state notification.");const h=c.pa.get(e);if(h&&h.length>0)switch(n){case"current":case"not-current":{const g=yield Vm(c.localStore,Pn(h[0])),R=Zu.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,ws.EMPTY_BYTE_STRING);yield fl(c,g,R);break}case"rejected":yield al(c.localStore,e,!0),Sd(c,e,o);break;default:on()}}),gg.apply(this,arguments)}function Wy(i,e,n){return mg.apply(this,arguments)}function mg(){return mg=(0,me.c)(function*(i,e,n){const o=Ph(i);if(o.Fa){for(const c of e){if(o.pa.has(c)){Lt("SyncEngine","Adding an already active target "+c);continue}const h=yield Lm(o.localStore,c),g=yield Eh(o.localStore,h);yield Jm(o,$y(h),g.targetId,!1,g.resumeToken),bf(o.remoteStore,g)}for(const c of n)o.pa.has(c)&&(yield al(o.localStore,c,!1).then(()=>{Rf(o.remoteStore,c),Sd(o,c)}).catch(so))}}),mg.apply(this,arguments)}function Ph(i){const e=zt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r_.bind(null,e),e.fa.u_=jE.bind(null,e.eventManager),e.fa.xa=$E.bind(null,e.eventManager),e}function l_(i){const e=zt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ly.bind(null,e),e}class bh{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,me.c)(function*(){n.serializer=Th(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Gl(this.persistence,new mi,e.initialUser,this.serializer)}createPersistence(e){return new l(b.Hr,this.serializer)}createSharedClientState(e){return new Af}terminate(){var e=this;return(0,me.c)(function*(){var n,o;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(o=e.indexBackfillerScheduler)||void 0===o||o.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _g extends bh{constructor(e,n,o){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,me.c)(function*(){yield n().call(o,e),yield o.Na.initialize(o,e),yield l_(o.Na.syncEngine),yield ll(o.Na.remoteStore),yield o.persistence.fi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Gl(this.persistence,new mi,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new Pm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new Je(n,this.persistence);return new it(e.asyncQueue,o)}createPersistence(e){const n=Mt(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Zo.withCacheSize(this.cacheSizeBytes):Zo.DEFAULT;return new we(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,Ey(),Kp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Af}}class Hy extends _g{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,me.c)(function*(){yield n().call(o,e);const c=o.Na.syncEngine;o.sharedClientState instanceof yy&&(o.sharedClientState.syncEngine={Zs:By.bind(null,c),Xs:Gy.bind(null,c),eo:Wy.bind(null,c),Li:XE.bind(null,c),Ys:a_.bind(null,c)},yield o.sharedClientState.start()),yield o.persistence.fi(function(){var h=(0,me.c)(function*(g){yield function JE(i,e){return c_.apply(this,arguments)}(o.Na.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return h.apply(this,arguments)}}())})()}createSharedClientState(e){const n=Ey();if(!yy.D(n))throw new Pt(ot.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Mt(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yy(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class Rh{initialize(e,n){var o=this;return(0,me.c)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=c=>hu(o.syncEngine,c,1),o.remoteStore.remoteSyncer.handleCredentialChange=QE.bind(null,o.syncEngine),yield zl(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new BE}createDatastore(e){const n=Th(e.databaseInfo.databaseId),o=new qp(e.databaseInfo);return new Sf(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,c=this.datastore,h=e.asyncQueue,g=n=>hu(this.syncEngine,n,0),R=Wp.D()?new Wp:new jm,new LE(o,c,h,g,R);var o,c,h,g,R}createSyncEngine(e,n){return function(c,h,g,R,k,B,Y){const ce=new zE(c,h,g,R,k,B);return Y&&(ce.Fa=!0),ce}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,me.c)(function*(){var n,o;yield(o=(0,me.c)(function*(h){const g=zt(h);Lt("RemoteStore","RemoteStore shutting down."),g.v_.add(5),yield Fc(g),g.M_.shutdown(),g.x_.set("Unknown")}),function c(h){return o.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function d_(i,e=10240){let n=0;return{read:()=>(0,me.c)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,me.c)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Mh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class zy{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new Xi,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(o=>{o&&o.ea()?this.metadata.resolve(o.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.X_)}`))},o=>this.metadata.reject(o))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,me.c)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,me.c)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,me.c)(function*(){const n=yield e.Ka();if(null===n)return null;const o=e.qa.decode(n),c=Number(o);isNaN(c)&&e.$a(`length string (${o}) is not valid number`);const h=yield e.Ua(c);return new GE(JSON.parse(h),n.length+c)})()}Wa(){return this.buffer.findIndex(e=>123===e)}Ka(){var e=this;return(0,me.c)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const n=e.Wa();n<0&&e.$a("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Ua(e){var n=this;return(0,me.c)(function*(){for(;n.buffer.length<e;)(yield n.Ga())&&n.$a("Reached the end of bundle when more is expected.");const o=n.qa.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,me.c)(function*(){const n=yield e.ka.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class Vf{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,me.c)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new Pt(ot.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const o=yield(c=(0,me.c)(function*(g,R){const k=zt(g),B={documents:R.map(Ye=>Fu(k.serializer,Ye))},Y=yield k.vo("BatchGetDocuments",k.serializer.databaseId,Ur.emptyPath(),B,R.length),ce=new Map;Y.forEach(Ye=>{const Wt=function Cp(i,e){return"found"in e?function(o,c){hn(!!c.found);const h=au(o,c.found.name),g=Ui(c.found.updateTime),R=c.found.createTime?Ui(c.found.createTime):mn.min(),k=new Zi({mapValue:{fields:c.found.fields}});return Vi.newFoundDocument(h,g,R,k)}(i,e):"missing"in e?function(o,c){hn(!!c.missing),hn(!!c.readTime);const h=au(o,c.missing),g=Ui(c.readTime);return Vi.newNoDocument(h,g)}(i,e):on()}(k.serializer,Ye);ce.set(Wt.key.toString(),Wt)});const Ae=[];return R.forEach(Ye=>{const Wt=ce.get(Ye.toString());hn(!!Wt),Ae.push(Wt)}),Ae}),function h(g,R){return c.apply(this,arguments)})(n.datastore,e);var c;return o.forEach(c=>n.recordVersion(c)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new xc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.c)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,c)=>{const h=Jt.fromPath(c);e.mutations.push(new rf(h,e.precondition(h)))}),yield(o=(0,me.c)(function*(h,g){const R=zt(h),k={writes:g.map(B=>yd(R.serializer,B))};yield R.So("Commit",R.serializer.databaseId,Ur.emptyPath(),k)}),function c(h,g){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw on();n=mn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new Pt(ot.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(mn.min())?Ki.exists(!1):Ki.updateTime(n):Ki.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(mn.min()))throw new Pt(ot.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ki.updateTime(n)}return Ki.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Uf{constructor(e,n,o,c,h){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=c,this.deferred=h,this.za=o.maxAttempts,this.jo=new $m(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,me.c)(function*(){const n=new Vf(e.datastore),o=e.Ja(n);o&&o.then(c=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(c)}).catch(h=>{e.Ya(h)}))}).catch(c=>{e.Ya(c)})}))}Ja(e){try{const n=this.updateFunction(e);return!jt(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!ou(n)}return!1}}class Bf{constructor(e,n,o,c){var h=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=c,this.user=Jn.UNAUTHENTICATED,this.clientId=ec.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,me.c)(function*(R){Lt("FirestoreClient","Received user=",R.uid),yield h.authCredentialListener(R),h.user=R});return function(R){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(Lt("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pt(ot.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.c)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const c=ql(o,"Failed to shutdown persistence");n.reject(c)}})),n.promise}}function yg(i,e){return h_.apply(this,arguments)}function h_(){return h_=(0,me.c)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Lt("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var c=(0,me.c)(function*(h){o.isEqual(h)||(yield vh(e.localStore,h),o=h)});return function(h){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),h_.apply(this,arguments)}function f_(i,e){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,me.c)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield p_(i);Lt("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,i.configuration),i.setCredentialChangeListener(o=>My(e.remoteStore,o)),i.setAppCheckTokenChangeListener((o,c)=>My(e.remoteStore,c)),i._onlineComponents=e}),Oh.apply(this,arguments)}function vg(i){return"FirebaseError"===i.name?i.code===ot.FAILED_PRECONDITION||i.code===ot.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function p_(i){return qy.apply(this,arguments)}function qy(){return qy=(0,me.c)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Lt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield yg(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!vg(n))throw n;no("Error using user provided cache. Falling back to memory cache: "+n),yield yg(i,new bh)}}else Lt("FirestoreClient","Using default OfflineComponentProvider"),yield yg(i,new bh);return i._offlineComponents}),qy.apply(this,arguments)}function g_(i){return m_.apply(this,arguments)}function m_(){return m_=(0,me.c)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Lt("FirestoreClient","Using user provided OnlineComponentProvider"),yield f_(i,i._uninitializedComponentsProvider._online)):(Lt("FirestoreClient","Using default OnlineComponentProvider"),yield f_(i,new Rh))),i._onlineComponents}),m_.apply(this,arguments)}function Ky(i){return p_(i).then(e=>e.persistence)}function jf(i){return p_(i).then(e=>e.localStore)}function Yy(i){return g_(i).then(e=>e.remoteStore)}function Qy(i){return g_(i).then(e=>e.syncEngine)}function xh(i){return __.apply(this,arguments)}function __(){return __=(0,me.c)(function*(i){const e=yield g_(i),n=e.eventManager;return n.onListen=qE.bind(null,e.syncEngine),n.onUnlisten=Zm.bind(null,e.syncEngine),n}),__.apply(this,arguments)}function Gf(i,e,n={}){const o=new Xi;return i.asyncQueue.enqueueAndForget((0,me.c)(function*(){return function(h,g,R,k,B){const Y=new Mh({next:Ae=>{g.enqueueAndForget(()=>Ym(h,ce));const Ye=Ae.docs.has(R);!Ye&&Ae.fromCache?B.reject(new Pt(ot.UNAVAILABLE,"Failed to get document because the client is offline.")):Ye&&Ae.fromCache&&k&&"server"===k.source?B.reject(new Pt(ot.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(Ae)},error:Ae=>B.reject(Ae)}),ce=new cg(cc(R.path),Y,{includeMetadataChanges:!0,Z_:!0});return Km(h,ce)}(yield xh(i),i.asyncQueue,e,n,o)})),o.promise}function Nh(i,e,n={}){const o=new Xi;return i.asyncQueue.enqueueAndForget((0,me.c)(function*(){return function(h,g,R,k,B){const Y=new Mh({next:Ae=>{g.enqueueAndForget(()=>Ym(h,ce)),Ae.fromCache&&"server"===k.source?B.reject(new Pt(ot.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(Ae)},error:Ae=>B.reject(Ae)}),ce=new cg(R,Y,{includeMetadataChanges:!0,Z_:!0});return Km(h,ce)}(yield xh(i),i.asyncQueue,e,n,o)})),o.promise}function Hf(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const nv=new Map;function E_(i,e,n){if(!n)throw new Pt(ot.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function rv(i,e,n,o){if(!0===e&&!0===o)throw new Pt(ot.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function iv(i){if(!Jt.isDocumentKey(i))throw new Pt(ot.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function sv(i){if(Jt.isDocumentKey(i))throw new Pt(ot.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function kh(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":on()}function Br(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Pt(ot.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kh(i);throw new Pt(ot.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function zf(i,e){if(e<=0)throw new Pt(ot.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class qf{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new Pt(ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pt(ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Hf(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(h){if(void 0!==h.timeoutSeconds){if(isNaN(h.timeoutSeconds))throw new Pt(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new Pt(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new Pt(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eg{constructor(e,n,o,c){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pt(ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pt(ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qf(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new _c;switch(o.type){case"firstParty":return new Gu(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Pt(ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=nv.get(n);o&&(Lt("ComponentProvider","Removing Datastore"),nv.delete(n),o.terminate())}(this),Promise.resolve()}}class ea{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ea(this.firestore,e,this._query)}}class es{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new es(this.firestore,e,this._key)}}class Uu extends ea{constructor(e,n,o){super(e,n,cc(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new es(this.firestore,null,new Jt(e))}withConverter(e){return new Uu(this.firestore,e,this._path)}}function I_(i,e,...n){if(i=(0,Ct.Yj)(i),E_("collection","path",e),i instanceof Eg){const o=Ur.fromString(e,...n);return sv(o),new Uu(i,null,o)}{if(!(i instanceof es||i instanceof Uu))throw new Pt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Ur.fromString(e,...n));return sv(o),new Uu(i.firestore,null,o)}}function Ig(i,e,...n){if(i=(0,Ct.Yj)(i),1===arguments.length&&(e=ec.newId()),E_("doc","path",e),i instanceof Eg){const o=Ur.fromString(e,...n);return iv(o),new es(i,null,new Jt(o))}{if(!(i instanceof es||i instanceof Uu))throw new Pt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Ur.fromString(e,...n));return iv(o),new es(i.firestore,i instanceof Uu?i.converter:null,new Jt(o))}}function C_(i,e){return i=(0,Ct.Yj)(i),e=(0,Ct.Yj)(e),(i instanceof es||i instanceof Uu)&&(e instanceof es||e instanceof Uu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function w_(i,e){return i=(0,Ct.Yj)(i),e=(0,Ct.Yj)(e),i instanceof ea&&e instanceof ea&&i.firestore===e.firestore&&be(i._query,e._query)&&i.converter===e.converter}class rI{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new $m(this,"async_queue_retry"),this._u=()=>{const n=Kp();n&&Lt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Kp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=Kp();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new Xi;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,me.c)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(n){if(!D(n))throw n;Lt("AsyncQueue","Operation failed with retryable error: "+n)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(o=>{throw this.ru=o,this.iu=!1,Jr("INTERNAL UNHANDLED ERROR: ",function(g){let R=g.message||"";return g.stack&&(R=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),R}(o)),o}).then(o=>(this.iu=!1,o))));return this.Xa=n,n}enqueueAfterDelay(e,n,o){this.au(),this.ou.indexOf(e)>-1&&(n=0);const c=Nf.createAndSchedule(this,e,n,o,h=>this.lu(h));return this.nu.push(c),c}au(){this.ru&&on()}verifyOperationInProgress(){}hu(){var e=this;return(0,me.c)(function*(){let n;do{n=e.Xa,yield n}while(n!==e.Xa)})()}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}function Ql(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const c=n;for(const h of["next","error","complete"])if(h in c&&"function"==typeof c[h])return!0;return!1}(i)}class av{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ts extends Eg{constructor(e,n,o,c){super(e,n,o,c),this.type="firestore",this._queue=new rI,this._persistenceKey=c?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cv(this),this._firestoreClient.terminate()}}function lo(i){return i._firestoreClient||cv(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function cv(i){var e,n,o;const c=i._freezeSettings(),h=(k=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Tu(i._databaseId,k,i._persistenceKey,(Y=c).host,Y.ssl,Y.experimentalForceLongPolling,Y.experimentalAutoDetectLongPolling,Hf(Y.experimentalLongPollingOptions),Y.useFetchStreams));var k,Y;i._firestoreClient=new Bf(i._authCredentials,i._appCheckCredentials,i._queue,h),null!==(n=c.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=c.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.localCache.kind,_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider})}function lv(i,e,n){const o=new Xi;return i.asyncQueue.enqueue((0,me.c)(function*(){try{yield yg(i,n),yield f_(i,e),o.resolve()}catch(c){const h=c;if(!vg(h))throw h;no("Error enabling indexeddb cache. Falling back to memory cache: "+h),o.reject(h)}})).then(()=>o.promise)}function hv(i){if(i._initialized||i._terminated)throw new Pt(ot.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Bu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bu(ws.fromBase64String(e))}catch(n){throw new Pt(ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bu(ws.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Jl{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Pt(ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Md{constructor(e){this._methodName=e}}class wg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Pt(ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Pt(ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Sn(this._lat,e._lat)||Sn(this._long,e._long)}}const A_=/^__.*__$/;class pv{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new dc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Oc(e,this.data,n,this.fieldTransforms)}}class gv{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new dc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mv(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw on()}}class Tg{constructor(e,n,o,c,h,g){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=c,void 0===h&&this.Eu(),this.fieldTransforms=h||[],this.fieldMask=g||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Tg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),c=this.Au({path:o,Vu:!1});return c.mu(e),c}fu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),c=this.Au({path:o,Vu:!1});return c.Eu(),c}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Od(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(mv(this.du)&&A_.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class cI{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Th(e)}Su(e,n,o,c=!1){return new Tg({du:e,methodName:n,wu:o,path:Ii.emptyPath(),Vu:!1,yu:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xl(i){const e=i._freezeSettings(),n=Th(i._databaseId);return new cI(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Yf(i,e,n,o,c,h={}){const g=i.Su(h.merge||h.mergeFields?2:0,e,n,c);P_("Data must be an object, but it was:",g,o);const R=Ev(o,g);let k,B;if(h.merge)k=new ao(g.fieldMask),B=g.fieldTransforms;else if(h.mergeFields){const Y=[];for(const ce of h.mergeFields){const Ae=Xf(e,ce,n);if(!g.contains(Ae))throw new Pt(ot.INVALID_ARGUMENT,`Field '${Ae}' is specified in your field mask but missing from your input data.`);Cv(Y,Ae)||Y.push(Ae)}k=new ao(Y),B=g.fieldTransforms.filter(ce=>k.covers(ce.field))}else k=null,B=g.fieldTransforms;return new pv(new Zi(R),k,B)}class Fh extends Md{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fh}}function _v(i,e,n){return new Tg({du:3,wu:e.settings.wu,methodName:i._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class S_ extends Md{_toFieldTransform(e){return new lc(e.path,new nu)}isEqual(e){return e instanceof S_}}class Dg extends Md{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=_v(this,e,!0),o=this.bu.map(h=>Zl(h,n)),c=new Ou(o);return new lc(e.path,c)}isEqual(e){return e instanceof Dg&&(0,Ct.IN)(this.bu,e.bu)}}class Qf extends Md{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=_v(this,e,!0),o=this.bu.map(h=>Zl(h,n)),c=new ru(o);return new lc(e.path,c)}isEqual(e){return e instanceof Qf&&(0,Ct.IN)(this.bu,e.bu)}}class yv extends Md{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){const n=new xu(e.serializer,md(e.serializer,this.Du));return new lc(e.path,n)}isEqual(e){return e instanceof yv&&this.Du===e.Du}}function Ag(i,e,n,o){const c=i.Su(1,e,n);P_("Data must be an object, but it was:",c,o);const h=[],g=Zi.empty();Ia(o,(k,B)=>{const Y=b_(e,k,n);B=(0,Ct.Yj)(B);const ce=c.fu(Y);if(B instanceof Fh)h.push(Y);else{const Ae=Zl(B,ce);null!=Ae&&(h.push(Y),g.set(Y,Ae))}});const R=new ao(h);return new gv(g,R,c.fieldTransforms)}function Jf(i,e,n,o,c,h){const g=i.Su(1,e,n),R=[Xf(e,o,n)],k=[c];if(h.length%2!=0)throw new Pt(ot.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ae=0;Ae<h.length;Ae+=2)R.push(Xf(e,h[Ae])),k.push(h[Ae+1]);const B=[],Y=Zi.empty();for(let Ae=R.length-1;Ae>=0;--Ae)if(!Cv(B,R[Ae])){const Ye=R[Ae];let Wt=k[Ae];Wt=(0,Ct.Yj)(Wt);const nn=g.fu(Ye);if(Wt instanceof Fh)B.push(Ye);else{const tn=Zl(Wt,nn);null!=tn&&(B.push(Ye),Y.set(Ye,tn))}}const ce=new ao(B);return new gv(Y,ce,g.fieldTransforms)}function vv(i,e,n,o=!1){return Zl(n,i.Su(o?4:3,e))}function Zl(i,e){if(Iv(i=(0,Ct.Yj)(i)))return P_("Unsupported field value:",e,i),Ev(i,e);if(i instanceof Md)return function(o,c){if(!mv(c.du))throw c.pu(`${o._methodName}() can only be used with update() and set()`);if(!c.path)throw c.pu(`${o._methodName}() is not currently supported inside arrays`);const h=o._toFieldTransform(c);h&&c.fieldTransforms.push(h)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(o,c){const h=[];let g=0;for(const R of o){let k=Zl(R,c.gu(g));null==k&&(k={nullValue:"NULL_VALUE"}),h.push(k),g++}return{arrayValue:{values:h}}}(i,e)}return function(o,c){if(null===(o=(0,Ct.Yj)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return md(c.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const h=gi.fromDate(o);return{timestampValue:xl(c.serializer,h)}}if(o instanceof gi){const h=new gi(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:xl(c.serializer,h)}}if(o instanceof wg)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Bu)return{bytesValue:vp(c.serializer,o._byteString)};if(o instanceof es){const h=c.databaseId,g=o.firestore._databaseId;if(!g.isEqual(h))throw c.pu(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Ws(o.firestore._databaseId||c.databaseId,o._key.path)}}throw c.pu(`Unsupported field value: ${kh(o)}`)}(i,e)}function Ev(i,e){const n={};return nc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(i,(o,c)=>{const h=Zl(c,e.Ru(o));null!=h&&(n[o]=h)}),{mapValue:{fields:n}}}function Iv(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof gi||i instanceof wg||i instanceof Bu||i instanceof es||i instanceof Md)}function P_(i,e,n){if(!Iv(n)||"object"!=typeof(c=n)||null===c||Object.getPrototypeOf(c)!==Object.prototype&&null!==Object.getPrototypeOf(c)){const o=kh(n);throw e.pu("an object"===o?i+" a custom object":i+" "+o)}var c}function Xf(i,e,n){if((e=(0,Ct.Yj)(e))instanceof Jl)return e._internalPath;if("string"==typeof e)return b_(i,e);throw Od("Field path arguments must be of type string or ",i,!1,void 0,n)}const a0=new RegExp("[~\\*/\\[\\]]");function b_(i,e,n){if(e.search(a0)>=0)throw Od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Jl(...e.split("."))._internalPath}catch{throw Od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Od(i,e,n,o,c){const h=o&&!o.isEmpty(),g=void 0!==c;let R=`Function ${e}() called with invalid data`;n&&(R+=" (via `toFirestore()`)"),R+=". ";let k="";return(h||g)&&(k+=" (found",h&&(k+=` in field ${o}`),g&&(k+=` in document ${c}`),k+=")"),new Pt(ot.INVALID_ARGUMENT,R+i+k)}function Cv(i,e){return i.some(n=>n.isEqual(e))}class Zf{constructor(e,n,o,c,h){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=c,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new es(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new c0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class c0 extends Zf{data(){return super.data()}}function Sg(i,e){return"string"==typeof e?b_(i,e):e instanceof Jl?e._internalPath:e._delegate._internalPath}function wv(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Pt(ot.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class R_{}class ep extends R_{}function ed(i,e,...n){let o=[];e instanceof R_&&o.push(e),o=o.concat(n),function(h){const g=h.filter(k=>k instanceof Nd).length,R=h.filter(k=>k instanceof Lh).length;if(g>1||g>0&&R>0)throw new Pt(ot.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const c of o)i=c._apply(i);return i}class Lh extends ep{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Lh(e,n,o)}_apply(e){const n=this._parse(e);return Av(e._query,n),new ea(e.firestore,e.converter,H(e._query,n))}_parse(e){const n=Xl(e.firestore);return function(h,g,R,k,B,Y,ce){let Ae;if(B.isKeyField()){if("array-contains"===Y||"array-contains-any"===Y)throw new Pt(ot.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Y}' queries on documentId().`);if("in"===Y||"not-in"===Y){O_(ce,Y);const Ye=[];for(const Wt of ce)Ye.push(M_(k,h,Wt));Ae={arrayValue:{values:Ye}}}else Ae=M_(k,h,ce)}else"in"!==Y&&"not-in"!==Y&&"array-contains-any"!==Y||O_(ce,Y),Ae=vv(R,"where",ce,"in"===Y||"not-in"===Y);return br.create(B,Y,Ae)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Nd extends R_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nd(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:Wr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(c,h){let g=c;const R=h.getFlattenedFilters();for(const k of R)Av(g,k),g=H(g,k)}(e._query,n),new ea(e.firestore,e.converter,H(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Us extends ep{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Us(e,n)}_apply(e){const n=function(c,h,g){if(null!==c.startAt)throw new Pt(ot.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==c.endAt)throw new Pt(ot.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ic(h,g)}(e._query,this._field,this._direction);return new ea(e.firestore,e.converter,function(c,h){const g=c.explicitOrderBy.concat([h]);return new $a(c.path,c.collectionGroup,g,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(e._query,n))}}class Vh extends ep{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new Vh(e,n,o)}_apply(e){return new ea(e.firestore,e.converter,ne(e._query,this._limit,this._limitType))}}class Uh extends ep{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Uh(e,n,o)}_apply(e){const n=td(e,this.type,this._docOrFields,this._inclusive);return new ea(e.firestore,e.converter,(h=n,new $a((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,h,c.endAt)));var c,h}}class tp extends ep{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new tp(e,n,o)}_apply(e){const n=td(e,this.type,this._docOrFields,this._inclusive);return new ea(e.firestore,e.converter,(h=n,new $a((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,h)));var c,h}}function td(i,e,n,o){if(n[0]=(0,Ct.Yj)(n[0]),n[0]instanceof Zf)return function(h,g,R,k,B){if(!k)throw new Pt(ot.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${R}().`);const Y=[];for(const ce of m(h))if(ce.field.isKeyField())Y.push(Ta(g,k.key));else{const Ae=k.data.field(ce.field);if(Cc(Ae))throw new Pt(ot.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ce.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ae){const Ye=ce.field.canonicalString();throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ye}' (used as the orderBy) does not exist.`)}Y.push(Ae)}return new Ao(Y,B)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const c=Xl(i.firestore);return function(g,R,k,B,Y,ce){const Ae=g.explicitOrderBy;if(Y.length>Ae.length)throw new Pt(ot.INVALID_ARGUMENT,`Too many arguments provided to ${B}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ye=[];for(let Wt=0;Wt<Y.length;Wt++){const nn=Y[Wt];if(Ae[Wt].field.isKeyField()){if("string"!=typeof nn)throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${B}(), but got a ${typeof nn}`);if(!T(g)&&-1!==nn.indexOf("/"))throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${B}() must be a plain document ID, but '${nn}' contains a slash.`);const tn=g.path.child(Ur.fromString(nn));if(!Jt.isDocumentKey(tn))throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${B}() must result in a valid document path, but '${tn}' is not because it contains an odd number of segments.`);const xn=new Jt(tn);Ye.push(Ta(R,xn))}else{const tn=vv(k,B,nn);Ye.push(tn)}}return new Ao(Ye,ce)}(i._query,i.firestore._databaseId,c,e,n,o)}}function M_(i,e,n){if("string"==typeof(n=(0,Ct.Yj)(n))){if(""===n)throw new Pt(ot.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!T(e)&&-1!==n.indexOf("/"))throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Ur.fromString(n));if(!Jt.isDocumentKey(o))throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ta(i,new Jt(o))}if(n instanceof es)return Ta(i,n._key);throw new Pt(ot.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kh(n)}.`)}function O_(i,e){if(!Array.isArray(i)||0===i.length)throw new Pt(ot.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Av(i,e){const n=function(c,h){for(const g of c)for(const R of g.getFlattenedFilters())if(h.indexOf(R.op)>=0)return R.op;return null}(i.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Pt(ot.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Pg{convertValue(e,n="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ps(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw on()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Ia(e,(c,h)=>{o[c]=this.convertValue(h,n)}),o}convertGeoPoint(e){return new wg(ps(e.latitude),ps(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=wu(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const n=Ic(e);return new gi(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Ur.fromString(e);hn(gf(o));const c=new gs(o.get(1),o.get(3)),h=new Jt(o.popFirst(5));return c.isEqual(n)||Jr(`Document ${h} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),h}}function np(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class rp extends Pg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new es(this.firestore,null,n)}}class Fd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pl extends Zf{constructor(e,n,o,c,h,g){super(e,n,o,c,g),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(Sg("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Ld extends pl{data(e={}){return super.data(e)}}class gl{constructor(e,n,o,c){this._firestore=e,this._userDataWriter=n,this._snapshot=c,this.metadata=new Fd(c.hasPendingWrites,c.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Ld(this._firestore,this._userDataWriter,o.key,o,new Fd(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Pt(ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(c,h){if(c._snapshot.oldDocs.isEmpty()){let g=0;return c._snapshot.docChanges.map(R=>({type:"added",doc:new Ld(c._firestore,c._userDataWriter,R.doc.key,R.doc,new Fd(c._snapshot.mutatedKeys.has(R.doc.key),c._snapshot.fromCache),c.query.converter),oldIndex:-1,newIndex:g++}))}{let g=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(R=>h||3!==R.type).map(R=>{const k=new Ld(c._firestore,c._userDataWriter,R.doc.key,R.doc,new Fd(c._snapshot.mutatedKeys.has(R.doc.key),c._snapshot.fromCache),c.query.converter);let B=-1,Y=-1;return 0!==R.type&&(B=g.indexOf(R.doc.key),g=g.delete(R.doc.key)),1!==R.type&&(g=g.add(R.doc),Y=g.indexOf(R.doc.key)),{type:nd(R.type),doc:k,oldIndex:B,newIndex:Y}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nd(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return on()}}function Bh(i,e){return i instanceof pl&&e instanceof pl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof gl&&e instanceof gl&&i._firestore===e._firestore&&w_(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class fu extends Pg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new es(this.firestore,null,n)}}function Rv(i,e,n){i=Br(i,es);const o=Br(i.firestore,ts),c=np(i.converter,e,n);return jh(o,[Yf(Xl(o),"setDoc",i._key,c,null!==i.converter,n).toMutation(i._key,Ki.none())])}function Mv(i,e,n,...o){i=Br(i,es);const c=Br(i.firestore,ts),h=Xl(c);let g;return g="string"==typeof(e=(0,Ct.Yj)(e))||e instanceof Jl?Jf(h,"updateDoc",i._key,e,n,o):Ag(h,"updateDoc",i._key,e),jh(c,[g.toMutation(i._key,Ki.exists(!0))])}function Ov(i,...e){var n,o,c;i=(0,Ct.Yj)(i);let h={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||Ql(e[g])||(h=e[g],g++);const R={includeMetadataChanges:h.includeMetadataChanges};if(Ql(e[g])){const ce=e[g];e[g]=null===(n=ce.next)||void 0===n?void 0:n.bind(ce),e[g+1]=null===(o=ce.error)||void 0===o?void 0:o.bind(ce),e[g+2]=null===(c=ce.complete)||void 0===c?void 0:c.bind(ce)}let k,B,Y;if(i instanceof es)B=Br(i.firestore,ts),Y=cc(i._key.path),k={next:ce=>{e[g]&&e[g](N_(B,i,ce))},error:e[g+1],complete:e[g+2]};else{const ce=Br(i,ea);B=Br(ce.firestore,ts),Y=ce._query;const Ae=new fu(B);k={next:Ye=>{e[g]&&e[g](new gl(B,Ae,ce,Ye))},error:e[g+1],complete:e[g+2]},wv(i._query)}return function(Ae,Ye,Wt,nn){const tn=new Mh(nn),xn=new cg(Ye,tn,Wt);return Ae.asyncQueue.enqueueAndForget((0,me.c)(function*(){return Km(yield xh(Ae),xn)})),()=>{tn.La(),Ae.asyncQueue.enqueueAndForget((0,me.c)(function*(){return Ym(yield xh(Ae),xn)}))}}(lo(B),Y,R,k)}function jh(i,e){return function(o,c){const h=new Xi;return o.asyncQueue.enqueueAndForget((0,me.c)(function*(){return function KE(i,e,n){return t_.apply(this,arguments)}(yield Qy(o),c,h)})),h.promise}(lo(i),e)}function N_(i,e,n){const o=n.docs.get(e._key),c=new fu(i);return new pl(i,c,e._key,o,new Fd(n.hasPendingWrites,n.fromCache),e.converter)}const DI={maxAttempts:5};class Mg{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Xl(e)}set(e,n,o){this._verifyNotCommitted();const c=ju(e,this._firestore),h=np(c.converter,n,o),g=Yf(this._dataReader,"WriteBatch.set",c._key,h,null!==c.converter,o);return this._mutations.push(g.toMutation(c._key,Ki.none())),this}update(e,n,o,...c){this._verifyNotCommitted();const h=ju(e,this._firestore);let g;return g="string"==typeof(n=(0,Ct.Yj)(n))||n instanceof Jl?Jf(this._dataReader,"WriteBatch.update",h._key,n,o,c):Ag(this._dataReader,"WriteBatch.update",h._key,n),this._mutations.push(g.toMutation(h._key,Ki.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ju(e,this._firestore);return this._mutations=this._mutations.concat(new xc(n._key,Ki.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pt(ot.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ju(i,e){if((i=(0,Ct.Yj)(i)).firestore!==e)throw new Pt(ot.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Vv extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=Xl(n)}get(n){const o=ju(n,this._firestore),c=new rp(this._firestore);return this._transaction.lookup([o._key]).then(h=>{if(!h||1!==h.length)return on();const g=h[0];if(g.isFoundDocument())return new Zf(this._firestore,c,g.key,g,o.converter);if(g.isNoDocument())return new Zf(this._firestore,c,o._key,null,o.converter);throw on()})}set(n,o,c){const h=ju(n,this._firestore),g=np(h.converter,o,c),R=Yf(this._dataReader,"Transaction.set",h._key,g,null!==h.converter,c);return this._transaction.set(h._key,R),this}update(n,o,c,...h){const g=ju(n,this._firestore);let R;return R="string"==typeof(o=(0,Ct.Yj)(o))||o instanceof Jl?Jf(this._dataReader,"Transaction.update",g._key,o,c,h):Ag(this._dataReader,"Transaction.update",g._key,o),this._transaction.update(g._key,R),this}delete(n){const o=ju(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ju(e,this._firestore),o=new fu(this._firestore);return super.get(e).then(c=>new pl(this._firestore,o,n._key,c._document,new Fd(!1,!1),n.converter))}}function Ng(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Wv(){if(typeof Uint8Array>"u")throw new Pt("unimplemented","Uint8Arrays are not available in this environment.")}function kI(){if(!function Ec(){return typeof atob<"u"}())throw new Pt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){ui=Ot.SDK_VERSION,(0,Ot._registerComponent)(new At.Yl("firestore",(o,{instanceIdentifier:c,options:h})=>{const g=o.getProvider("app").getImmediate(),R=new ts(new Wc(o.getProvider("auth-internal")),new go(o.getProvider("app-check-internal")),function(B,Y){if(!Object.prototype.hasOwnProperty.apply(B.options,["projectId"]))throw new Pt(ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gs(B.options.projectId,Y)}(g,c),g);return h=Object.assign({useFetchStreams:n},h),R._setSettings(h),R},"PUBLIC").setMultipleInstances(!0)),(0,Ot.registerVersion)(va,"4.4.2",e),(0,Ot.registerVersion)(va,"4.4.2","esm2017")}();class kg{constructor(e){this._delegate=e}static fromBase64String(e){return kI(),new kg(Bu.fromBase64String(e))}static fromUint8Array(e){return Wv(),new kg(Bu.fromUint8Array(e))}toBase64(){return kI(),this._delegate.toBase64()}toUint8Array(){return Wv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Hv(i){return function p0(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const o of e)if(o in n&&"function"==typeof n[o])return!0;return!1}(i,["next","error","complete"])}class g0{enableIndexedDbPersistence(e,n){return function Cg(i,e){hv(i=Br(i,ts));const n=lo(i);if(n._uninitializedComponentsProvider)throw new Pt(ot.FAILED_PRECONDITION,"SDK cache is already specified.");no("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),c=new Rh;return lv(n,c,new _g(c,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function uv(i){hv(i=Br(i,ts));const e=lo(i);if(e._uninitializedComponentsProvider)throw new Pt(ot.FAILED_PRECONDITION,"SDK cache is already specified.");no("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new Rh;return lv(e,o,new Hy(o,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function oI(i){if(i._initialized&&!i._terminated)throw new Pt(ot.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,me.c)(function*(){try{yield(n=(0,me.c)(function*(c){if(!cs.D())return Promise.resolve();const h=c+"main";yield cs.delete(h)}),function o(c){return n.apply(this,arguments)})(Mt(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class FI{constructor(e,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof gs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&no("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,o={}){!function ov(i,e,n,o={}){var c;const h=(i=Br(i,Eg))._getSettings(),g=`${e}:${n}`;if("firestore.googleapis.com"!==h.host&&h.host!==g&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},h),{host:g,ssl:!1})),o.mockUserToken){let R,k;if("string"==typeof o.mockUserToken)R=o.mockUserToken,k=Jn.MOCK_USER;else{R=(0,Ct.YD)(o.mockUserToken,null===(c=i._app)||void 0===c?void 0:c.options.projectId);const B=o.mockUserToken.sub||o.mockUserToken.user_id;if(!B)throw new Pt(ot.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new Jn(B)}i._authCredentials=new yl(new fs(R,k))}}(this._delegate,e,n,o)}enableNetwork(){return function T_(i){return function y_(i){return i.asyncQueue.enqueue((0,me.c)(function*(){const e=yield Ky(i),n=yield Yy(i);return e.setNetworkEnabled(!0),function(c){const h=zt(c);return h.v_.delete(0),Td(h)}(n)}))}(lo(i=Br(i,ts)))}(this._delegate)}disableNetwork(){return function dv(i){return function $f(i){return i.asyncQueue.enqueue((0,me.c)(function*(){const e=yield Ky(i),n=yield Yy(i);return e.setNetworkEnabled(!1),(o=(0,me.c)(function*(h){const g=zt(h);g.v_.add(0),yield Fc(g),g.x_.set("Offline")}),function c(h){return o.apply(this,arguments)})(n);var o}))}(lo(i=Br(i,ts)))}(this._delegate)}enablePersistence(e){let n=!1,o=!1;return e&&(n=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,rv("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function aI(i){return function(n){const o=new Xi;return n.asyncQueue.enqueueAndForget((0,me.c)(function*(){return function s_(i,e){return Vy.apply(this,arguments)}(yield Qy(n),o)})),o.promise}(lo(i=Br(i,ts)))}(this._delegate)}onSnapshotsInSync(e){return function vI(i,e){return function Zy(i,e){const n=new Mh(e);return i.asyncQueue.enqueueAndForget((0,me.c)(function*(){return c=yield xh(i),h=n,zt(c).K_.add(h),void h.next();var c,h})),()=>{n.La(),i.asyncQueue.enqueueAndForget((0,me.c)(function*(){return c=yield xh(i),h=n,void zt(c).K_.delete(h);var c,h}))}}(lo(i=Br(i,ts)),Ql(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gu(this,I_(this._delegate,e))}catch(n){throw za(n,"collection()","Firestore.collection()")}}doc(e){try{return new pu(this,Ig(this._delegate,e))}catch(n){throw za(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qa(this,function nI(i,e){if(i=Br(i,Eg),E_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pt(ot.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ea(i,null,(o=e,new $a(Ur.emptyPath(),o)));var o}(this._delegate,e))}catch(n){throw za(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function L_(i,e,n){i=Br(i,ts);const o=Object.assign(Object.assign({},DI),n);return function(h){if(h.maxAttempts<1)throw new Pt(ot.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(h,g,R){const k=new Xi;return h.asyncQueue.enqueueAndForget((0,me.c)(function*(){const B=yield function Jy(i){return g_(i).then(e=>e.datastore)}(h);new Uf(h.asyncQueue,B,R,g,k).ja()})),k.promise}(lo(i),c=>e(new Vv(i,c)),o)}(this._delegate,n=>e(new B_(this,n)))}batch(){return lo(this._delegate),new j_(new Mg(this._delegate,e=>jh(this._delegate,e)))}loadBundle(e){return function s0(i,e){const n=lo(i=Br(i,ts)),o=new av;return function eI(i,e,n,o){const c=function(g,R){let k;return k="string"==typeof g?fc().encode(g):g,Y=function(Y,ce){if(Y instanceof Uint8Array)return d_(Y,void 0);if(Y instanceof ArrayBuffer)return d_(new Uint8Array(Y),void 0);if(Y instanceof ReadableStream)return Y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new zy(Y,R);var Y}(n,Th(e));i.asyncQueue.enqueueAndForget((0,me.c)(function*(){!function n0(i,e,n){const o=zt(i);var c;(c=(0,me.c)(function*(g,R,k){try{const B=yield R.getMetadata();if(yield function(Wt,nn){const tn=zt(Wt),xn=Ui(nn.createTime);return tn.persistence.runTransaction("hasNewerBundle","readonly",_r=>tn.$r.getBundleMetadata(_r,nn.id)).then(_r=>!!_r&&_r.createTime.compareTo(xn)>=0)}(g.localStore,B))return yield R.close(),k._completeWith({taskState:"Success",documentsLoaded:(Wt=B).totalDocuments,bytesLoaded:Wt.totalBytes,totalDocuments:Wt.totalDocuments,totalBytes:Wt.totalBytes}),Promise.resolve(new Set);k._updateProgress(xy(B));const Y=new Ha(B,g.localStore,R.serializer);let ce=yield R.Oa();for(;ce;){const Ye=yield Y.na(ce);Ye&&k._updateProgress(Ye),ce=yield R.Oa()}const Ae=yield Y.complete();return yield fl(g,Ae.sa,void 0),yield function(Wt,nn){const tn=zt(Wt);return tn.persistence.runTransaction("Save bundle","readwrite",xn=>tn.$r.saveBundleMetadata(xn,nn))}(g.localStore,B),k._completeWith(Ae.progress),Promise.resolve(Ae.ia)}catch(B){return no("SyncEngine",`Loading bundle failed with ${B}`),k._failWith(B),Promise.resolve(new Set)}var Wt}),function h(g,R,k){return c.apply(this,arguments)})(o,e,n).then(c=>{o.sharedClientState.notifyBundleLoaded(c)})}(yield Qy(i),c,o)}))}(n,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function o0(i,e){return function Wf(i,e){return i.asyncQueue.enqueue((0,me.c)(function*(){return function(o,c){const h=zt(o);return h.persistence.runTransaction("Get named query","readonly",g=>h.$r.getNamedQuery(g,c))}(yield jf(i),e)}))}(lo(i=Br(i,ts)),e).then(n=>n?new ea(i,null,n.query):null)}(this._delegate,e).then(n=>n?new qa(this,n):null)}}class U_ extends Pg{constructor(e){super(),this.firestore=e}convertBytes(e){return new kg(new Bu(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return pu.forKey(n,this.firestore,null)}}class B_{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new U_(e)}get(e){const n=mu(e);return this._delegate.get(n).then(o=>new Fg(this._firestore,new pl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(e,n,o){const c=mu(e);return o?(Ng("Transaction.set",o),this._delegate.set(c,n,o)):this._delegate.set(c,n),this}update(e,n,o,...c){const h=mu(e);return 2===arguments.length?this._delegate.update(h,n):this._delegate.update(h,n,o,...c),this}delete(e){const n=mu(e);return this._delegate.delete(n),this}}class j_{constructor(e){this._delegate=e}set(e,n,o){const c=mu(e);return o?(Ng("WriteBatch.set",o),this._delegate.set(c,n,o)):this._delegate.set(c,n),this}update(e,n,o,...c){const h=mu(e);return 2===arguments.length?this._delegate.update(h,n):this._delegate.update(h,n,o,...c),this}delete(e){const n=mu(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class $h{constructor(e,n,o){this._firestore=e,this._userDataWriter=n,this._delegate=o}fromFirestore(e,n){const o=new Ld(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Lg(this._firestore,o),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const o=$h.INSTANCES;let c=o.get(e);c||(c=new WeakMap,o.set(e,c));let h=c.get(n);return h||(h=new $h(e,new U_(e),n),c.set(n,h)),h}}$h.INSTANCES=new WeakMap;class pu{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new U_(e)}static forPath(e,n,o){if(e.length%2!=0)throw new Pt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pu(n,new es(n._delegate,o,new Jt(e)))}static forKey(e,n,o){return new pu(n,new es(n._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new gu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gu(this.firestore,I_(this._delegate,e))}catch(n){throw za(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ct.Yj)(e))instanceof es&&C_(this._delegate,e)}set(e,n){n=Ng("DocumentReference.set",n);try{return n?Rv(this._delegate,e,n):Rv(this._delegate,e)}catch(o){throw za(o,"setDoc()","DocumentReference.set()")}}update(e,n,...o){try{return 1===arguments.length?Mv(this._delegate,e):Mv(this._delegate,e,n,...o)}catch(c){throw za(c,"updateDoc()","DocumentReference.update()")}}delete(){return function _I(i){return jh(Br(i.firestore,ts),[new xc(i._key,Ki.none())])}(this._delegate)}onSnapshot(...e){const n=LI(e),o=VI(e,c=>new Fg(this.firestore,new pl(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return Ov(this._delegate,n,o)}get(e){let n;return n="cache"===e?.source?function Pv(i){i=Br(i,es);const e=Br(i.firestore,ts),n=lo(e),o=new fu(e);return function v_(i,e){const n=new Xi;return i.asyncQueue.enqueueAndForget((0,me.c)(function*(){return(o=(0,me.c)(function*(h,g,R){try{const k=yield function(Y,ce){const Ae=zt(Y);return Ae.persistence.runTransaction("read document","readonly",Ye=>Ae.localDocuments.getDocument(Ye,ce))}(h,g);k.isFoundDocument()?R.resolve(k):k.isNoDocument()?R.resolve(null):R.reject(new Pt(ot.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const B=ql(k,`Failed to get document '${g} from cache`);R.reject(B)}}),function c(h,g,R){return o.apply(this,arguments)})(yield jf(i),e,n);var o})),n.promise}(n,i._key).then(c=>new pl(e,o,i._key,c,new Fd(null!==c&&c.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function bv(i){i=Br(i,es);const e=Br(i.firestore,ts);return Gf(lo(e),i._key,{source:"server"}).then(n=>N_(e,i,n))}(this._delegate):function l0(i){i=Br(i,es);const e=Br(i.firestore,ts);return Gf(lo(e),i._key).then(n=>N_(e,i,n))}(this._delegate),n.then(o=>new Fg(this.firestore,new pl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new pu(this.firestore,this._delegate.withConverter(e?$h.getInstance(this.firestore,e):null))}}function za(i,e,n){return i.message=i.message.replace(e,n),i}function LI(i){for(const e of i)if("object"==typeof e&&!Hv(e))return e;return{}}function VI(i,e){var n,o;let c;return c=Hv(i[0])?i[0]:Hv(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:h=>{c.next&&c.next(e(h))},error:null===(n=c.error)||void 0===n?void 0:n.bind(c),complete:null===(o=c.complete)||void 0===o?void 0:o.bind(c)}}class Fg{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new pu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Bh(this._delegate,e._delegate)}}class Lg extends Fg{data(e){const n=this._delegate.data(e);return this._delegate._converter||function Eu(i,e){i||on()}(void 0!==n),n}}class qa{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new U_(e)}where(e,n,o){try{return new qa(this.firestore,ed(this._delegate,function xd(i,e,n){const o=e,c=Sg("where",i);return Lh._create(c,o,n)}(e,n,o)))}catch(c){throw za(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new qa(this.firestore,ed(this._delegate,function uI(i,e="asc"){const n=e,o=Sg("orderBy",i);return Us._create(o,n)}(e,n)))}catch(o){throw za(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new qa(this.firestore,ed(this._delegate,function lI(i){return zf("limit",i),Vh._create("limit",i,"F")}(e)))}catch(n){throw za(n,"limit()","Query.limit()")}}limitToLast(e){try{return new qa(this.firestore,ed(this._delegate,function dI(i){return zf("limitToLast",i),Vh._create("limitToLast",i,"L")}(e)))}catch(n){throw za(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new qa(this.firestore,ed(this._delegate,function Tv(...i){return Uh._create("startAt",i,!0)}(...e)))}catch(n){throw za(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new qa(this.firestore,ed(this._delegate,function Dv(...i){return Uh._create("startAfter",i,!1)}(...e)))}catch(n){throw za(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new qa(this.firestore,ed(this._delegate,function hI(...i){return tp._create("endBefore",i,!1)}(...e)))}catch(n){throw za(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new qa(this.firestore,ed(this._delegate,function fI(...i){return tp._create("endAt",i,!0)}(...e)))}catch(n){throw za(n,"endAt()","Query.endAt()")}}isEqual(e){return w_(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function mI(i){i=Br(i,ea);const e=Br(i.firestore,ts),n=lo(e),o=new fu(e);return function Xy(i,e){const n=new Xi;return i.asyncQueue.enqueueAndForget((0,me.c)(function*(){return(o=(0,me.c)(function*(h,g,R){try{const k=yield Ch(h,g,!0),B=new ug(g,k.hs),Y=B.ha(k.documents),ce=B.applyChanges(Y,!1);R.resolve(ce.snapshot)}catch(k){const B=ql(k,`Failed to execute query '${g} against cache`);R.reject(B)}}),function c(h,g,R){return o.apply(this,arguments)})(yield jf(i),e,n);var o})),n.promise}(n,i._query).then(c=>new gl(e,o,i,c))}(this._delegate):"server"===e?.source?function ip(i){i=Br(i,ea);const e=Br(i.firestore,ts),n=lo(e),o=new fu(e);return Nh(n,i._query,{source:"server"}).then(c=>new gl(e,o,i,c))}(this._delegate):function gI(i){i=Br(i,ea);const e=Br(i.firestore,ts),n=lo(e),o=new fu(e);return wv(i._query),Nh(n,i._query).then(c=>new gl(e,o,i,c))}(this._delegate),n.then(o=>new $_(this.firestore,new gl(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const n=LI(e),o=VI(e,c=>new $_(this.firestore,new gl(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return Ov(this._delegate,n,o)}withConverter(e){return new qa(this.firestore,this._delegate.withConverter(e?$h.getInstance(this.firestore,e):null))}}class _0{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Lg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $_{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new qa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Lg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new _0(this._firestore,n))}forEach(e,n){this._delegate.forEach(o=>{e.call(n,new Lg(this._firestore,o))})}isEqual(e){return Bh(this._delegate,e._delegate)}}class gu extends qa{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pu(this.firestore,e):null}doc(e){try{return new pu(this.firestore,void 0===e?Ig(this._delegate):Ig(this._delegate,e))}catch(n){throw za(n,"doc()","CollectionReference.doc()")}}add(e){return function yI(i,e){const n=Br(i.firestore,ts),o=Ig(i),c=np(i.converter,e);return jh(n,[Yf(Xl(i.firestore),"addDoc",o._key,c,null!==i.converter,{}).toMutation(o._key,Ki.exists(!1))]).then(()=>o)}(this._delegate,e).then(n=>new pu(this.firestore,n))}isEqual(e){return C_(this._delegate,e._delegate)}withConverter(e){return new gu(this.firestore,this._delegate.withConverter(e?$h.getInstance(this.firestore,e):null))}}function mu(i){return Br(i,es)}class G_{constructor(...e){this._delegate=new Jl(...e)}static documentId(){return new G_(Ii.keyField().canonicalString())}isEqual(e){return(e=(0,Ct.Yj)(e))instanceof Jl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function AI(){return new S_("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Gh(e)}static delete(){const e=function V_(){return new Fh("deleteField")}();return e._methodName="FieldValue.delete",new Gh(e)}static arrayUnion(...e){const n=function SI(...i){return new Dg("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new Gh(n)}static arrayRemove(...e){const n=function PI(...i){return new Qf("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new Gh(n)}static increment(e){const n=function bI(i){return new yv("increment",i)}(e);return n._methodName="FieldValue.increment",new Gh(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const zv={Firestore:FI,GeoPoint:wg,Timestamp:gi,Blob:kg,Transaction:B_,WriteBatch:j_,DocumentReference:pu,DocumentSnapshot:Fg,Query:qa,QueryDocumentSnapshot:Lg,QuerySnapshot:$_,CollectionReference:gu,FieldPath:G_,FieldValue:Gh,setLogLevel:function m0(i){!function Xa(i){er.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function y0(i){(function UI(i,e){i.INTERNAL.registerComponent(new At.Yl("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),c=n.getProvider("firestore").getImmediate();return e(o,c)},"PUBLIC").setServiceProps(Object.assign({},zv)))})(i,(e,n)=>new FI(e,n,new g0)),i.registerVersion("@firebase/firestore-compat","0.3.25")}(rt.c);var BI=V(9252);function qv(i,e){return function jI(i,e=Ie.M){return new Be._(n=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},n)}):o=i.onSnapshot({includeMetadataChanges:!0},n),()=>{o?.()}})}(i,e)}function Ug(i,e){return qv(i,e).pipe((0,We.k)(n=>({payload:n,type:"query"})))}class Kv{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const o=this.ref.collection(e),{ref:c,query:h}=Xv(o,n);return new Bg(c,h,this.afs)}snapshotChanges(){return function Vg(i,e){return qv(i,e).pipe((0,ue.W)(void 0),Le(),(0,We.k)(n=>{const[o,c]=n;return c.exists?o?.exists?{payload:c,type:"modified"}:{payload:c,type:"added"}:{payload:c,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ge.wH)}valueChanges(e={}){return this.snapshotChanges().pipe((0,We.k)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,je.Q)(this.ref.get(e)).pipe(ge.wH)}}function ap(i,e){return Ug(i,e).pipe((0,ue.W)(void 0),Le(),(0,We.k)(n=>{const[o,c]=n,h=c.payload.docChanges(),g=h.map(R=>({type:R.type,payload:R}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(c.payload.metadata)&&c.payload.docs.forEach((R,k)=>{const B=h.find(ce=>ce.doc.ref.isEqual(R.ref)),Y=o?.payload.docs.find(ce=>ce.ref.isEqual(R.ref));B&&JSON.stringify(B.doc.metadata)===JSON.stringify(R.metadata)||!B&&Y&&JSON.stringify(Y.metadata)===JSON.stringify(R.metadata)||g.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:R}})}),g}))}function $I(i,e,n){return ap(i,n).pipe((0,Ve.K)((o,c)=>function Yv(i,e,n){return e.forEach(o=>{n.indexOf(o.type)>-1&&(i=function GI(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Qv(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Qv(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Qv(i,e.oldIndex,1)}return i}(i,o))}),i}(o,c.map(h=>h.payload),e),[]),function Ce(i,e=Xe.Z){return i=i??ht,(0,Oe.i)((n,o)=>{let c,h=!0;n.subscribe((0,Se.e)(o,g=>{const R=e(g);(h||!i(c,R))&&(h=!1,c=R,o.next(g))}))})}(),(0,We.k)(o=>o.map(c=>({type:c.type,payload:c}))))}function Qv(i,e,n,...o){const c=i.slice();return c.splice(e,n,...o),c}function W_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Bg{ref;query;afs;constructor(e,n,o){this.ref=e,this.query=n,this.afs=o}stateChanges(e){let n=ap(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,We.k)(o=>o.filter(c=>e.indexOf(c.type)>-1)))),n.pipe((0,ue.W)(void 0),Le(),(0,_t.I)(([o,c])=>c.length>0||!o),(0,We.k)(([,o])=>o),ge.wH)}auditTrail(e){return this.stateChanges(e).pipe((0,Ve.K)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=W_(e);return $I(this.query,n,this.afs.schedulers.outsideAngular).pipe(ge.wH)}valueChanges(e={}){return Ug(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.k)(n=>n.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),ge.wH)}get(e){return(0,je.Q)(this.query.get(e)).pipe(ge.wH)}add(e){return this.ref.add(e)}doc(e){return new Kv(this.ref.doc(e),this.afs)}}class WI{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?ap(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.k)(n=>n.filter(o=>e.indexOf(o.type)>-1)),(0,_t.I)(n=>n.length>0),ge.wH):ap(this.query,this.afs.schedulers.outsideAngular).pipe(ge.wH)}auditTrail(e){return this.stateChanges(e).pipe((0,Ve.K)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=W_(e);return $I(this.query,n,this.afs.schedulers.outsideAngular).pipe(ge.wH)}valueChanges(e={}){return Ug(this.query,this.afs.schedulers.outsideAngular).pipe((0,We.k)(o=>o.payload.docs.map(c=>e.idField?{[e.idField]:c.id,...c.data()}:c.data())),ge.wH)}get(e){return(0,je.Q)(this.query.get(e)).pipe(ge.wH)}}const Jv=new O.UbH("angularfire2.enableFirestorePersistence"),cp=new O.UbH("angularfire2.firestore.persistenceSettings"),HI=new O.UbH("angularfire2.firestore.settings"),zI=new O.UbH("angularfire2.firestore.use-emulator");function Xv(i,e=(n=>n)){return{query:e(i),ref:i}}let qI=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,o,c,h,g,R,k,B,Y,ce,Ae,Ye,Wt,nn,tn,xn,_r){this.schedulers=k;const Nn=(0,Ee._G)(n,R,o),Dn=Y;ce&&(0,I.CU)(Nn,R,Ae,Wt,nn,tn,Ye,xn),[this.firestore,this.persistenceEnabled$]=(0,Ee.PQ)(`${Nn.name}.firestore`,"AngularFirestore",Nn.name,()=>{const _i=R.runOutsideAngular(()=>Nn.firestore());if(h&&_i.settings(h),Dn&&_i.useEmulator(...Dn),c&&!(0,_.uf)(g)){const Mi=()=>{try{return(0,je.Q)(_i.enablePersistence(B||void 0).then(()=>!0,()=>!1))}catch(Hr){return typeof console<"u"&&console.warn(Hr),(0,le.of)(!1)}};return[_i,R.runOutsideAngular(Mi)]}return[_i,(0,le.of)(!1)]},[h,Dn,c])}collection(n,o){let c;c="string"==typeof n?this.firestore.collection(n):n;const{ref:h,query:g}=Xv(c,o),R=this.schedulers.ngZone.run(()=>h);return new Bg(R,g,this)}collectionGroup(n,o){const c=o||(g=>g),h=this.firestore.collectionGroup(n);return new WI(c(h),this)}doc(n){let o;o="string"==typeof n?this.firestore.doc(n):n;const c=this.schedulers.ngZone.run(()=>o);return new Kv(c,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||i)(O.CoB(Ee.E9),O.CoB(Ee.Ml,8),O.CoB(Jv,8),O.CoB(HI,8),O.CoB(O.AHE),O.CoB(O.WW2),O.CoB(ge.u),O.CoB(cp,8),O.CoB(zI,8),O.CoB(I._o,8),O.CoB(I.GW,8),O.CoB(I.mq,8),O.CoB(I.ox,8),O.CoB(I.cd,8),O.CoB(I._8,8),O.CoB(I.Ev,8),O.CoB(ge.gJ,8))};static \u0275prov=O.wxM({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),KI=(()=>{class i{constructor(){BI.c.registerVersion("angularfire",ge.j1.full,"fst-compat")}static enablePersistence(n){return{ngModule:i,providers:[{provide:Jv,useValue:!0},{provide:cp,useValue:n}]}}static \u0275fac=function(o){return new(o||i)};static \u0275mod=O.a4G({type:i});static \u0275inj=O.s3X({providers:[qI]})}return i})();var YI=V(8836),H_=V(4856),Zv=V(788);function eE(i,e){1&i&&(O.I0R(0,"span",12),O.OEk(1,"email is required"),O.C$Y())}function QI(i,e){1&i&&(O.I0R(0,"span",12),O.OEk(1," password is required "),O.C$Y())}function v0(i,e){1&i&&O.wR5(0,"input",13)}function tE(i,e){1&i&&(O.I0R(0,"span",12),O.OEk(1," confirm password is required "),O.C$Y())}function nE(i,e){if(1&i){const n=O.KQA();O.I0R(0,"button",14),O.qCj("click",function(){O.usT(n);const c=O.GaO();return O.CGJ(c.googleLogin())}),O.OEk(1," Sing in with Google "),O.wR5(2,"img",15),O.C$Y()}}function jg(i,e){if(1&i){const n=O.KQA();O.I0R(0,"button",14),O.qCj("click",function(){O.usT(n);const c=O.GaO();return O.CGJ(c.emailAndPasswordLogin())}),O.OEk(1," Sign in "),O.C$Y()}}function E0(i,e){if(1&i){const n=O.KQA();O.I0R(0,"button",16),O.qCj("click",function(){O.usT(n);const c=O.GaO();return O.CGJ(c.registration())}),O.OEk(1," Register "),O.C$Y()}if(2&i){const n=O.GaO();O.E7m("disabled",!n.form.valid)}}const JI=[{path:"",component:(()=>{class i{constructor(n,o){this.fb=n,this.logInService=o,this.selected=!0,this.form=this.fb.group({email:["",[J.AQ.required,J.AQ.email]],password:["",J.AQ.required],confirmPassword:["",J.AQ.required]})}ngOnInit(){}select(){this.selected=!this.selected,this.clearInputs()}googleLogin(){this.logInService.loginWithGoogle()}emailAndPasswordLogin(){const n=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.loginWithEmailAndPassword(n,o)}registration(){let n=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.registration(n,o),this.clearInputs(),this.selected=!0}clearInputs(){this.form.get("email")?.setValue(""),this.form.get("password")?.setValue(""),this.form.get("email")?.markAsUntouched(),this.form.get("password")?.markAsUntouched()}static#e=this.\u0275fac=function(o){return new(o||i)(O.GI1(J.im),O.GI1(Zv.e))};static#t=this.\u0275cmp=O.In1({type:i,selectors:[["app-login"]],decls:22,vars:10,consts:[[1,"loginContainer"],[1,"container"],[3,"ngClass","click"],[3,"formGroup"],[1,"inputs"],["formControlName","email","placeholder","Email"],["class","error-message",4,"ngIf"],["type","password","formControlName","password","placeholder","Password"],["type","password","formControlName","confirmPassword","placeholder","Confirm Password",4,"ngIf"],[3,"click",4,"ngIf"],[3,"disabled","click",4,"ngIf"],["routerLink","/products"],[1,"error-message"],["type","password","formControlName","confirmPassword","placeholder","Confirm Password"],[3,"click"],["src","assets/google.png","alt","img"],[3,"disabled","click"]],template:function(o,c){if(1&o&&(O.I0R(0,"div",0)(1,"div",1)(2,"div")(3,"p",2),O.qCj("click",function(){return c.select()}),O.OEk(4,"LOG IN"),O.C$Y(),O.I0R(5,"p",2),O.qCj("click",function(){return c.select()}),O.OEk(6,"SIGN UP"),O.C$Y()(),O.I0R(7,"form",3)(8,"div",4),O.wR5(9,"input",5),O.yuY(10,eE,2,0,"span",6),O.C$Y(),O.I0R(11,"div",4),O.wR5(12,"input",7),O.yuY(13,QI,2,0,"span",6),O.C$Y(),O.I0R(14,"div",4),O.yuY(15,v0,1,0,"input",8)(16,tE,2,0,"span",6),O.C$Y(),O.yuY(17,nE,3,0,"button",9)(18,jg,2,0,"button",9)(19,E0,2,1,"button",10),O.I0R(20,"button",11),O.OEk(21,"Guest Mode"),O.C$Y()()()()),2&o){let h,g,R;O.yG2(3),O.E7m("ngClass",c.selected?"selected":""),O.yG2(2),O.E7m("ngClass",c.selected?"":"selected"),O.yG2(2),O.E7m("formGroup",c.form),O.yG2(3),O.E7m("ngIf",(null==(h=c.form.get("email"))?null:h.invalid)&&(null==(h=c.form.get("email"))?null:h.touched)),O.yG2(3),O.E7m("ngIf",(null==(g=c.form.get("password"))?null:g.invalid)&&(null==(g=c.form.get("password"))?null:g.touched)),O.yG2(2),O.E7m("ngIf",!c.selected),O.yG2(),O.E7m("ngIf",(null==(R=c.form.get("confirmPassword"))?null:R.invalid)&&(null==(R=c.form.get("confirmPassword"))?null:R.touched)&&!c.selected),O.yG2(),O.E7m("ngIf",c.selected),O.yG2(),O.E7m("ngIf",c.selected),O.yG2(),O.E7m("ngIf",!c.selected)}},dependencies:[_.QF,_.u_,J.sz,J.ot,J.ue,J.u,J.uW,J.Wo,H_.ER],styles:[".loginContainer[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:400px;height:400px;background-color:#62dfdf;border-radius:4px;background-image:url(background.05b7e6a7f70c58a5.webp);background-size:cover}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;gap:20px;padding:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{cursor:pointer;font-size:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{width:100%;height:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:200px;height:30px;border-radius:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#13afc7;color:#fff;display:flex;justify-content:center;align-items:center;cursor:pointer}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:5px}.selected[_ngcontent-%COMP%]{color:#fff;border-bottom:1px solid white}.error-message[_ngcontent-%COMP%]{font-size:14px;color:red}.button-disabled[_ngcontent-%COMP%]{background-color:#8ac9d3}"],changeDetection:0})}return i})()}];let Vd=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=O.a4G({type:i});static#n=this.\u0275inj=O.s3X({imports:[H_.qQ.forChild(JI),H_.qQ]})}return i})();var rE=V(7048);let XI=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=O.a4G({type:i});static#n=this.\u0275inj=O.s3X({providers:[YI.wR],imports:[_.MD,J.y,J.sl,KI,I.Q$,Vd,rE.SU]})}return i})()},788:(Xt,$e,V)=>{V.d($e,{e:()=>le});var _=V(8836),J=V(6700),I=V(4704),O=V(9144),ge=V(2700),Ee=V(4496),Ie=V(2740),Be=V(7048),je=V(4856);let le=(()=>{class ue{constructor(Se,Le,We){this.auth=Se,this.http=Le,this.router=We,this.loggedUser=new J.g(void 0),this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app/musicShopUsers",this.likedProducts=new J.g([])}loginWithGoogle(){this.auth.signInWithPopup(new _.wR).then(Se=>{localStorage.setItem("token",JSON.stringify(Se.user?.uid)),this.findUser(Se.user?.email).subscribe(Le=>{void 0===Le?this.addUserTodatabase(Se.user?.email,Se.user?.photoURL):this.findUser(Se.user?.email).subscribe(We=>{this.loggedUser.next(We),this.likedProducts.next(We?.user.likedProducts),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(We))})})},Se=>{alert(Se.mesasage)})}loginWithEmailAndPassword(Se,Le){this.auth.signInWithEmailAndPassword(Se,Le).then(We=>{this.findUser(We.user?.email).subscribe(Ve=>{this.loggedUser.next(Ve),this.likedProducts.next(Ve?.user.likedProducts),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(Ve))})},We=>{alert(We.message),console.log(We.mesasage)})}registration(Se,Le){this.auth.createUserWithEmailAndPassword(Se,Le).then(We=>{this.addUserTodatabase(We.user?.email)},We=>{alert(We.message)})}addUserTodatabase(Se,Le){this.http.post(`${this.url}.json`,{email:Se,isAdmin:!1,photoUrl:Le,address:"",likedProducts:[{key:"none",category:"other"}],purchasedProducts:[{email:Se,userId:Se,date:new Date,totalPrice:0,products:[{quantity:-1,product:{key:"unknown",product:{category:"other",model:"none",price:-1,quantity:-1,discount:-1,photoUrl:["none"]}}}]}]}).subscribe(()=>{console.log("User created succesfully")},Ve=>{alert(Ve.message)})}findUser(Se){return this.http.get(`${this.url}.json`).pipe((0,I.k)(Le=>{let We,Ve="";if(Object.entries(Le).find(([Xe,Ce])=>{Ce.email===Se&&(We=Ce,Ve=Xe)}),Ve&&We)return{user:We,key:Ve}}),(0,O.a)(Le=>(console.error(Le),(0,ge.of)(void 0))))}findUserById(Se){return this.http.get(`${this.url}/${Se}.json`).pipe((0,I.k)(Le=>Le.email))}checkIfLoggedIn(){if(localStorage.getItem("currentUser")){let Se=JSON.parse(localStorage.getItem("currentUser"));this.loggedUser.next(Se),console.log(Se)}}logOut(){localStorage.removeItem("currentUser"),this.likedProducts.next([]),this.loggedUser.next(void 0)}static#e=this.\u0275fac=function(Le){return new(Le||ue)(Ee.CoB(Ie._o),Ee.CoB(Be.KK),Ee.CoB(je.E5))};static#t=this.\u0275prov=Ee.wxM({token:ue,factory:ue.\u0275fac,providedIn:"root"})}return ue})()},6180:(Xt,$e,V)=>{V.r($e),V.d($e,{ProductPageModule:()=>Dt});var _=V(1368),J=V(4856),I=V(4496),O=V(3804),ge=V(788),Ee=V(6940),Ie=V(1092),Be=V(112),je=V(3252),le=V(3048);let Le=(()=>{class ze{constructor(De){this.cdr=De,this.index=0,this.imgUrls=["assets/guitar1.jpg","assets/piano.png","assets/drum.avif","assets/bass.webp"],this.img=this.imgUrls[0]}ngOnInit(){this.startTimeChangeInterval()}startTimeChangeInterval(){this.intervalSubscription=function Se(ze=0,xt=Be.M){return ze<0&&(ze=0),function Oe(ze=0,xt,De=Be.a){let dt=-1;return null!=xt&&((0,le.G)(xt)?De=xt:dt=xt),new je._(yt=>{let ut=function ue(ze){return ze instanceof Date&&!isNaN(ze)}(ze)?+ze-De.now():ze;ut<0&&(ut=0);let Yt=0;return De.schedule(function(){yt.closed||(yt.next(Yt++),0<=dt?this.schedule(void 0,dt):yt.complete())},ut)})}(ze,ze,xt)}(4e3).subscribe(()=>{this.changeImgUp(),this.cdr.detectChanges()})}changeImgUp(){3===this.index?(this.index=0,this.img=this.imgUrls[this.index]):(this.img=this.imgUrls[this.index+1],this.index++),this.clearInterval()}changeImgDown(){0===this.index?(this.index=3,this.img=this.imgUrls[this.index]):(this.img=this.imgUrls[this.index-1],this.index--),this.clearInterval()}changeIndex(De){this.index=De,this.img=this.imgUrls[De],this.clearInterval()}clearInterval(){this.intervalSubscription&&this.intervalSubscription?.unsubscribe(),this.startTimeChangeInterval()}static#e=this.\u0275fac=function(dt){return new(dt||ze)(I.GI1(I.kD9))};static#t=this.\u0275cmp=I.In1({type:ze,selectors:[["app-top-products"]],decls:12,vars:5,consts:[[1,"topProducts-container"],[3,"ngClass","click"],[1,"arrows"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"images"],["alt","img",3,"src"]],template:function(dt,yt){1&dt&&(I.I0R(0,"div",0)(1,"div")(2,"div")(3,"div",1),I.qCj("click",function(){return yt.changeIndex(0)}),I.C$Y(),I.I0R(4,"div",1),I.qCj("click",function(){return yt.changeIndex(1)}),I.C$Y(),I.I0R(5,"div",1),I.qCj("click",function(){return yt.changeIndex(2)}),I.C$Y(),I.I0R(6,"div",1),I.qCj("click",function(){return yt.changeIndex(3)}),I.C$Y()(),I.I0R(7,"div",2)(8,"img",3),I.qCj("click",function(){return yt.changeImgDown()}),I.C$Y(),I.I0R(9,"img",4),I.qCj("click",function(){return yt.changeImgUp()}),I.C$Y()()(),I.I0R(10,"div",5),I.wR5(11,"img",6),I.C$Y()()),2&dt&&(I.yG2(3),I.E7m("ngClass",0===yt.index?"highlight":""),I.yG2(),I.E7m("ngClass",1===yt.index?"highlight":""),I.yG2(),I.E7m("ngClass",2===yt.index?"highlight":""),I.yG2(),I.E7m("ngClass",3===yt.index?"highlight":""),I.yG2(5),I.E7m("src",yt.img,I.K6U))},dependencies:[_.QF],styles:[".topProducts-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0 auto 100px;gap:20px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;flex-direction:column;align-items:center;gap:10px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child{display:flex;gap:10px;width:100%}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]{width:10px;height:10px;border:.4px solid #ffc107;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]{display:flex}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:600px;height:300px}.highlight[_ngcontent-%COMP%]{background-color:#ffc107}"],changeDetection:0})}return ze})();function We(ze,xt){1&ze&&(I.I0R(0,"div",2),I.wR5(1,"div",3),I.I0R(2,"p"),I.OEk(3,"Loading..."),I.C$Y()())}function Ve(ze,xt){if(1&ze){const De=I.KQA();I.I0R(0,"img",18),I.qCj("click",function(){I.usT(De);const yt=I.GaO().$implicit,ut=I.GaO(2);return I.CGJ(ut.likeUnlikeProduct(yt.key,yt.product.category))}),I.C$Y()}}function Xe(ze,xt){if(1&ze){const De=I.KQA();I.I0R(0,"img",19),I.qCj("click",function(){I.usT(De);const yt=I.GaO().$implicit,ut=I.GaO(2);return I.CGJ(ut.likeUnlikeProduct(yt.key,yt.product.category))}),I.C$Y()}}function Ce(ze,xt){if(1&ze&&(I.I0R(0,"div",20),I.OEk(1),I.C$Y()),2&ze){const De=I.GaO().$implicit;I.yG2(),I.oRS(" ",De.product.discount," ")}}function ht(ze,xt){if(1&ze&&(I.I0R(0,"div",21)(1,"span"),I.OEk(2),I.C$Y(),I.I0R(3,"span"),I.OEk(4),I.C$Y()()),2&ze){const De=I.GaO().$implicit,dt=I.GaO(2);I.yG2(2),I.oRS(" ",De.product.price,"$ "),I.yG2(2),I.oRS("",dt.calculateDiscount(De.product.price,De.product.discount),"$")}}function _t(ze,xt){if(1&ze){const De=I.KQA();I.I0R(0,"div",9)(1,"div",10)(2,"button",6),I.qCj("click",function(){const ut=I.usT(De).$implicit,Yt=I.GaO(2);return I.CGJ(Yt.addInCart(ut))}),I.OEk(3,"Add to cart"),I.C$Y(),I.I0R(4,"div")(5,"span",6),I.qCj("click",function(){const ut=I.usT(De).$implicit,Yt=I.GaO(2);return I.CGJ(Yt.navigation(ut.key,ut.product.category))}),I.OEk(6,"See Product"),I.C$Y(),I.I0R(7,"span",6),I.qCj("click",function(){const ut=I.usT(De).$implicit,Yt=I.GaO(2);return I.CGJ(Yt.likeUnlikeProduct(ut.key,ut.product.category))}),I.yuY(8,Ve,1,0,"img",11)(9,Xe,1,0,"img",12),I.C$Y()()(),I.I0R(10,"div",13),I.yuY(11,Ce,2,1,"div",14),I.wR5(12,"img",15),I.C$Y(),I.I0R(13,"div",16)(14,"span"),I.OEk(15),I.C$Y(),I.I0R(16,"span"),I.OEk(17),I.C$Y(),I.yuY(18,ht,5,2,"div",17),I.C$Y()()}if(2&ze){const De=xt.$implicit,dt=I.GaO(2);I.yG2(8),I.E7m("ngIf",!dt.checkIfliked(De.key)),I.yG2(),I.E7m("ngIf",dt.checkIfliked(De.key)),I.yG2(2),I.E7m("ngIf",De.product.discount>0),I.yG2(),I.E7m("src",De.product.photoUrl[0],I.K6U),I.yG2(3),I.cNF(De.product.category),I.yG2(2),I.cNF(De.product.model),I.yG2(),I.E7m("ngIf",De.product.discount>0)}}function Ze(ze,xt){if(1&ze){const De=I.KQA();I.I0R(0,"img",18),I.qCj("click",function(){I.usT(De);const yt=I.GaO().$implicit,ut=I.GaO(2);return I.CGJ(ut.likeUnlikeProduct(yt.key,yt.product.category))}),I.C$Y()}}function rt(ze,xt){if(1&ze){const De=I.KQA();I.I0R(0,"img",19),I.qCj("click",function(){I.usT(De);const yt=I.GaO().$implicit,ut=I.GaO(2);return I.CGJ(ut.likeUnlikeProduct(yt.key,yt.product.category))}),I.C$Y()}}function me(ze,xt){if(1&ze&&(I.I0R(0,"div",20),I.OEk(1),I.C$Y()),2&ze){const De=I.GaO().$implicit;I.yG2(),I.oRS(" ",De.product.discount," ")}}function Ot(ze,xt){if(1&ze&&(I.I0R(0,"div",21)(1,"span"),I.OEk(2),I.C$Y(),I.I0R(3,"span"),I.OEk(4),I.C$Y()()),2&ze){const De=I.GaO().$implicit,dt=I.GaO(2);I.yG2(2),I.oRS(" ",De.product.price,"$ "),I.yG2(2),I.oRS("",dt.calculateDiscount(De.product.price,De.product.discount),"$")}}function At(ze,xt){if(1&ze){const De=I.KQA();I.I0R(0,"div",9)(1,"div",10)(2,"button",6),I.qCj("click",function(){const ut=I.usT(De).$implicit,Yt=I.GaO(2);return I.CGJ(Yt.addInCart(ut))}),I.OEk(3,"Add to cart"),I.C$Y(),I.I0R(4,"div")(5,"span",6),I.qCj("click",function(){const ut=I.usT(De).$implicit,Yt=I.GaO(2);return I.CGJ(Yt.navigation(ut.key,ut.product.category))}),I.OEk(6,"See Product"),I.C$Y(),I.I0R(7,"span",6),I.qCj("click",function(){const ut=I.usT(De).$implicit,Yt=I.GaO(2);return I.CGJ(Yt.likeUnlikeProduct(ut.key,ut.product.category))}),I.yuY(8,Ze,1,0,"img",11)(9,rt,1,0,"img",12),I.C$Y()()(),I.I0R(10,"div",13),I.yuY(11,me,2,1,"div",14),I.wR5(12,"img",15),I.C$Y(),I.I0R(13,"div",16)(14,"span"),I.OEk(15),I.C$Y(),I.I0R(16,"span"),I.OEk(17),I.C$Y(),I.yuY(18,Ot,5,2,"div",17),I.C$Y()()}if(2&ze){const De=xt.$implicit,dt=I.GaO(2);I.yG2(8),I.E7m("ngIf",!dt.checkIfliked(De.key)),I.yG2(),I.E7m("ngIf",dt.checkIfliked(De.key)),I.yG2(2),I.E7m("ngIf",De.product.discount>0),I.yG2(),I.E7m("src",De.product.photoUrl[0],I.K6U),I.yG2(3),I.cNF(De.product.category),I.yG2(2),I.cNF(De.product.model),I.yG2(),I.E7m("ngIf",De.product.discount>0)}}function Me(ze,xt){if(1&ze){const De=I.KQA();I.I0R(0,"img",18),I.qCj("click",function(){I.usT(De);const yt=I.GaO().$implicit,ut=I.GaO(2);return I.CGJ(ut.likeUnlikeProduct(yt.key,yt.product.category))}),I.C$Y()}}function Ct(ze,xt){if(1&ze){const De=I.KQA();I.I0R(0,"img",19),I.qCj("click",function(){I.usT(De);const yt=I.GaO().$implicit,ut=I.GaO(2);return I.CGJ(ut.likeUnlikeProduct(yt.key,yt.product.category))}),I.C$Y()}}function bt(ze,xt){if(1&ze&&(I.I0R(0,"div",20),I.OEk(1),I.C$Y()),2&ze){const De=I.GaO().$implicit;I.yG2(),I.oRS(" ",De.product.discount," ")}}function Ut(ze,xt){if(1&ze&&(I.I0R(0,"div",21)(1,"span"),I.OEk(2),I.C$Y(),I.I0R(3,"span"),I.OEk(4),I.C$Y()()),2&ze){const De=I.GaO().$implicit,dt=I.GaO(2);I.yG2(2),I.oRS(" ",De.product.price,"$ "),I.yG2(2),I.oRS("",dt.calculateDiscount(De.product.price,De.product.discount),"$")}}function ke(ze,xt){if(1&ze){const De=I.KQA();I.I0R(0,"div",9)(1,"div",10)(2,"button",6),I.qCj("click",function(){const ut=I.usT(De).$implicit,Yt=I.GaO(2);return I.CGJ(Yt.addInCart(ut))}),I.OEk(3,"Add to cart"),I.C$Y(),I.I0R(4,"div")(5,"span",6),I.qCj("click",function(){const ut=I.usT(De).$implicit,Yt=I.GaO(2);return I.CGJ(Yt.navigation(ut.key,ut.product.category))}),I.OEk(6,"See Product"),I.C$Y(),I.I0R(7,"span",6),I.qCj("click",function(){const ut=I.usT(De).$implicit,Yt=I.GaO(2);return I.CGJ(Yt.likeUnlikeProduct(ut.key,ut.product.category))}),I.yuY(8,Me,1,0,"img",11)(9,Ct,1,0,"img",12),I.C$Y()()(),I.I0R(10,"div",13),I.yuY(11,bt,2,1,"div",14),I.wR5(12,"img",15),I.C$Y(),I.I0R(13,"div",16)(14,"span"),I.OEk(15),I.C$Y(),I.I0R(16,"span"),I.OEk(17),I.C$Y(),I.yuY(18,Ut,5,2,"div",17),I.C$Y()()}if(2&ze){const De=xt.$implicit,dt=I.GaO(2);I.yG2(8),I.E7m("ngIf",!dt.checkIfliked(De.key)),I.yG2(),I.E7m("ngIf",dt.checkIfliked(De.key)),I.yG2(2),I.E7m("ngIf",De.product.discount>0),I.yG2(),I.E7m("src",De.product.photoUrl[0],I.K6U),I.yG2(3),I.cNF(De.product.category),I.yG2(2),I.cNF(De.product.model),I.yG2(),I.E7m("ngIf",De.product.discount>0)}}function Rt(ze,xt){if(1&ze){const De=I.KQA();I.I0R(0,"img",18),I.qCj("click",function(){I.usT(De);const yt=I.GaO().$implicit,ut=I.GaO(2);return I.CGJ(ut.likeUnlikeProduct(yt.key,yt.product.category))}),I.C$Y()}}function ct(ze,xt){if(1&ze){const De=I.KQA();I.I0R(0,"img",19),I.qCj("click",function(){I.usT(De);const yt=I.GaO().$implicit,ut=I.GaO(2);return I.CGJ(ut.likeUnlikeProduct(yt.key,yt.product.category))}),I.C$Y()}}function Nt(ze,xt){if(1&ze&&(I.I0R(0,"div",20),I.OEk(1),I.C$Y()),2&ze){const De=I.GaO().$implicit;I.yG2(),I.oRS(" -",De.product.discount,"% ")}}function Kt(ze,xt){if(1&ze&&(I.I0R(0,"span"),I.OEk(1),I.C$Y()),2&ze){const De=I.GaO().$implicit;I.yG2(),I.cNF(De.product.price)}}function sn(ze,xt){if(1&ze&&(I.I0R(0,"div",21)(1,"span"),I.OEk(2),I.C$Y(),I.I0R(3,"span"),I.OEk(4),I.C$Y()()),2&ze){const De=I.GaO().$implicit,dt=I.GaO(2);I.yG2(2),I.oRS(" ",De.product.price,"$ "),I.yG2(2),I.oRS("",dt.calculateDiscount(De.product.price,De.product.discount),"$")}}function Re(ze,xt){if(1&ze){const De=I.KQA();I.I0R(0,"div",9)(1,"div",10)(2,"button",6),I.qCj("click",function(){const ut=I.usT(De).$implicit,Yt=I.GaO(2);return I.CGJ(Yt.addInCart(ut))}),I.OEk(3,"Add to cart"),I.C$Y(),I.I0R(4,"div")(5,"span",6),I.qCj("click",function(){const ut=I.usT(De).$implicit,Yt=I.GaO(2);return I.CGJ(Yt.navigation(ut.key,ut.product.category))}),I.OEk(6,"See Product"),I.C$Y(),I.I0R(7,"span",6),I.qCj("click",function(){const ut=I.usT(De).$implicit,Yt=I.GaO(2);return I.CGJ(Yt.likeUnlikeProduct(ut.key,ut.product.category))}),I.yuY(8,Rt,1,0,"img",11)(9,ct,1,0,"img",12),I.C$Y()()(),I.I0R(10,"div",13),I.yuY(11,Nt,2,1,"div",14),I.wR5(12,"img",15),I.C$Y(),I.I0R(13,"div",16)(14,"span"),I.OEk(15),I.C$Y(),I.I0R(16,"span"),I.OEk(17),I.C$Y(),I.yuY(18,Kt,2,1,"span",22)(19,sn,5,2,"div",17),I.C$Y()()}if(2&ze){const De=xt.$implicit,dt=I.GaO(2);I.yG2(8),I.E7m("ngIf",!dt.checkIfliked(De.key)),I.yG2(),I.E7m("ngIf",dt.checkIfliked(De.key)),I.yG2(2),I.E7m("ngIf",De.product.discount>0),I.yG2(),I.E7m("src",De.product.photoUrl[0],I.K6U),I.yG2(3),I.cNF(De.product.category),I.yG2(2),I.cNF(De.product.model),I.yG2(),I.E7m("ngIf",0===De.product.discount),I.yG2(),I.E7m("ngIf",De.product.discount>0)}}function He(ze,xt){if(1&ze){const De=I.KQA();I.I0R(0,"div",4)(1,"div",5)(2,"p",6),I.qCj("click",function(){I.usT(De);const yt=I.GaO();return I.CGJ(yt.navigateToCategotyPage("guitar"))}),I.OEk(3,"Guitars"),I.C$Y(),I.I0R(4,"div",7),I.yuY(5,_t,19,7,"div",8),I.C$Y()(),I.I0R(6,"div",5)(7,"p",6),I.qCj("click",function(){I.usT(De);const yt=I.GaO();return I.CGJ(yt.navigateToCategotyPage("drum"))}),I.OEk(8,"Drums"),I.C$Y(),I.I0R(9,"div",7),I.yuY(10,At,19,7,"div",8),I.C$Y()(),I.I0R(11,"div",5)(12,"p",6),I.qCj("click",function(){I.usT(De);const yt=I.GaO();return I.CGJ(yt.navigateToCategotyPage("piano"))}),I.OEk(13,"Pianos"),I.C$Y(),I.I0R(14,"div",7),I.yuY(15,ke,19,7,"div",8),I.C$Y()(),I.I0R(16,"div",5)(17,"p",6),I.qCj("click",function(){I.usT(De);const yt=I.GaO();return I.CGJ(yt.navigateToCategotyPage("bass"))}),I.OEk(18,"Basses"),I.C$Y(),I.I0R(19,"div",7),I.yuY(20,Re,20,8,"div",8),I.C$Y()()()}if(2&ze){const De=I.GaO();I.yG2(5),I.E7m("ngForOf",De.guitarProducts),I.yG2(5),I.E7m("ngForOf",De.drumProducts),I.yG2(5),I.E7m("ngForOf",De.pianoProducts),I.yG2(5),I.E7m("ngForOf",De.bassProducts)}}const Ue=[{path:"",component:(()=>{class ze{constructor(De,dt,yt,ut){this.sharedService=De,this.cd=dt,this.authService=yt,this.router=ut,this.guitarProducts=[],this.pianoProducts=[],this.bassProducts=[],this.drumProducts=[],this.otherProducts=[],this.loading=!0,this.likedProducts=[]}ngOnInit(){this.sharedService.getAllTypeOfProduct().subscribe(De=>{this.authService.checkIfLoggedIn();for(let dt=0;dt<De.length;dt++)Object.entries(De[dt]).forEach(([yt,ut])=>{0===dt?this.guitarProducts.push({key:yt,product:ut}):1===dt?this.pianoProducts.push({key:yt,product:ut}):2===dt?this.bassProducts.push({key:yt,product:ut}):3===dt&&this.drumProducts.push({key:yt,product:ut})}),this.loading=!1,this.authService.likedProducts.subscribe(yt=>{this.likedProducts=yt}),this.cd.detectChanges()})}likeUnlikeProduct(De,dt){this.authService.loggedUser.subscribe(yt=>{void 0!==yt&&this.sharedService.likeUnlikeProduct(De,yt.key,dt).subscribe()})}navigation(De,dt){this.router.navigate([`single-product/${De}`],{queryParams:{type:dt,prod:De}})}addInCart(De){this.sharedService.cartOperations("add",De)}checkIfliked(De){return this.likedProducts.some(dt=>dt.key===De)}navigateToCategotyPage(De){this.router.navigate([`categoty/${De}`])}calculateDiscount(De,dt){return De-Math.round(De*dt/100)}static#e=this.\u0275fac=function(dt){return new(dt||ze)(I.GI1(O.Y),I.GI1(I.kD9),I.GI1(ge.e),I.GI1(J.E5))};static#t=this.\u0275cmp=I.In1({type:ze,selectors:[["app-product-page"]],decls:7,vars:2,consts:[["class","loading-container",4,"ngIf"],["class","products",4,"ngIf"],[1,"loading-container"],[1,"loader"],[1,"products"],[1,"products-container"],[3,"click"],[1,"product"],["class","single-product",4,"ngFor","ngForOf"],[1,"single-product"],[1,"hover"],["src","assets/heart.png","alt","img",3,"click",4,"ngIf"],["src","assets/heart-red.png","alt","img",3,"click",4,"ngIf"],[1,"img-placeholder"],["class","discount",4,"ngIf"],["alt","img",3,"src"],[1,"info"],["class","if-discount",4,"ngIf"],["src","assets/heart.png","alt","img",3,"click"],["src","assets/heart-red.png","alt","img",3,"click"],[1,"discount"],[1,"if-discount"],[4,"ngIf"]],template:function(dt,yt){1&dt&&(I.wR5(0,"app-header")(1,"app-top-products"),I.I0R(2,"h1"),I.OEk(3,"Our Products"),I.C$Y(),I.yuY(4,We,4,0,"div",0)(5,He,21,4,"div",1),I.wR5(6,"app-footer")),2&dt&&(I.yG2(4),I.E7m("ngIf",yt.loading),I.yG2(),I.E7m("ngIf",!yt.loading))},dependencies:[_.ay,_.u_,Ee.W,Ie.k,Le],styles:["h1[_ngcontent-%COMP%]{display:flex;justify-content:center}.loading-container[_ngcontent-%COMP%]{margin:0 auto;width:300px;height:300px;display:flex;flex-direction:column;justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%] > .loader[_ngcontent-%COMP%]{width:60px;aspect-ratio:1;border-radius:50%;border:8px solid lightblue;border-right-color:orange;animation:_ngcontent-%COMP%_l2 1s infinite linear}@keyframes _ngcontent-%COMP%_l2{to{transform:rotate(1turn)}}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:3%}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:20px;font-weight:700;text-decoration:underline;text-decoration-color:#be0404;text-underline-offset:6px}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .single-product[_ngcontent-%COMP%]{width:180px;height:390px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:20%;z-index:1}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{display:flex;gap:10px;justify-content:center;width:140px;height:40px;color:#fff}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{width:100%;height:260px;position:relative}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:260px}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{width:100%;height:120px;display:flex;flex-direction:column;justify-content:space-around}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{text-decoration:line-through}.if-discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:last-child{font-size:20px}"],changeDetection:0})}return ze})()}];let at=(()=>{class ze{static#e=this.\u0275fac=function(dt){return new(dt||ze)};static#t=this.\u0275mod=I.a4G({type:ze});static#n=this.\u0275inj=I.s3X({imports:[J.qQ.forChild(Ue),J.qQ]})}return ze})();var st=V(1680);let Dt=(()=>{class ze{static#e=this.\u0275fac=function(dt){return new(dt||ze)};static#t=this.\u0275mod=I.a4G({type:ze});static#n=this.\u0275inj=I.s3X({imports:[_.MD,at,Ie.k,st.w,J.qQ]})}return ze})()},2448:(Xt,$e,V)=>{V.r($e),V.d($e,{ProfileModuleModule:()=>Ct});var _=V(1368),J=V(4856),I=V(6504),O=V(4496),ge=V(788),Ee=V(3804),Ie=V(1092),Be=V(6940);function je(bt,Ut){if(1&bt){const ke=O.KQA();O.I0R(0,"button",11),O.qCj("click",function(){O.usT(ke);const ct=O.GaO();return O.CGJ(ct.addingProd())}),O.OEk(1," Add New Product "),O.C$Y()}}function le(bt,Ut){if(1&bt){const ke=O.KQA();O.I0R(0,"div"),O.wR5(1,"img",28),O.I0R(2,"img",29),O.qCj("click",function(){const Nt=O.usT(ke).$implicit,Kt=O.GaO(2);return O.CGJ(Kt.removeImg(Nt))}),O.C$Y()()}if(2&bt){const ke=Ut.$implicit;O.yG2(),O.E7m("src",ke,O.K6U)}}function ue(bt,Ut){if(1&bt){const ke=O.KQA();O.I0R(0,"form",12)(1,"select",13)(2,"option",14),O.OEk(3,"Guitar"),O.C$Y(),O.I0R(4,"option",15),O.OEk(5,"Drum"),O.C$Y(),O.I0R(6,"option",16),O.OEk(7,"Bass"),O.C$Y(),O.I0R(8,"option",17),O.OEk(9,"Piano"),O.C$Y(),O.I0R(10,"option",18),O.OEk(11,"Other"),O.C$Y()(),O.wR5(12,"input",19)(13,"input",20)(14,"input",21)(15,"input",22)(16,"input",23),O.I0R(17,"input",24),O.qCj("change",function(ct){O.usT(ke);const Nt=O.GaO();return O.CGJ(Nt.onFileChange(ct))}),O.C$Y(),O.I0R(18,"button",25),O.qCj("click",function(){O.usT(ke);const ct=O.GaO();return O.CGJ(ct.addNewProduct())}),O.OEk(19," add product "),O.C$Y(),O.I0R(20,"div",26),O.yuY(21,le,3,1,"div",27),O.C$Y()()}if(2&bt){const ke=O.GaO();O.E7m("formGroup",ke.form),O.yG2(18),O.E7m("disabled",ke.form.invalid),O.yG2(3),O.E7m("ngForOf",ke.photos)}}function Oe(bt,Ut){if(1&bt){const ke=O.KQA();O.I0R(0,"img",36),O.qCj("click",function(){O.usT(ke);const ct=O.GaO().index,Nt=O.GaO();return O.CGJ(Nt.showMoreItems[ct]=!Nt.showMoreItems[ct])})("click",function(){O.usT(ke);const ct=O.GaO().index,Nt=O.GaO();return O.CGJ(Nt.changeArrow[ct]=!Nt.changeArrow[ct])}),O.C$Y()}}function Se(bt,Ut){if(1&bt){const ke=O.KQA();O.I0R(0,"img",37),O.qCj("click",function(){O.usT(ke);const ct=O.GaO().index,Nt=O.GaO();return O.CGJ(Nt.showMoreItems[ct]=!Nt.showMoreItems[ct]&&!Nt.changeArrow)})("click",function(){O.usT(ke);const ct=O.GaO().index,Nt=O.GaO();return O.CGJ(Nt.changeArrow[ct]=!Nt.changeArrow[ct])}),O.C$Y()}}function Le(bt,Ut){if(1&bt&&(O.I0R(0,"div",38)(1,"div"),O.wR5(2,"img",28),O.C$Y(),O.I0R(3,"div",39)(4,"span"),O.OEk(5),O.C$Y(),O.I0R(6,"span"),O.OEk(7),O.C$Y(),O.I0R(8,"span"),O.OEk(9),O.C$Y(),O.I0R(10,"span"),O.OEk(11),O.C$Y(),O.I0R(12,"span"),O.OEk(13),O.C$Y()()()),2&bt){const ke=Ut.$implicit,Rt=O.GaO().$implicit,ct=O.GaO();O.yG2(2),O.E7m("src",ke.product.product.photoUrl[0],O.K6U),O.yG2(3),O.cNF(Rt.email?Rt.email:"unknown"),O.yG2(2),O.cNF(ct.upperCaseFirstLetter(ke.product.product.category)),O.yG2(2),O.cNF(ke.product.product.model),O.yG2(2),O.oRS("Price: ",ke.product.product.price,"$"),O.yG2(2),O.oRS("Dicsount: ",ke.product.product.discount,"%")}}function We(bt,Ut){if(1&bt&&(O.I0R(0,"div",41)(1,"div"),O.wR5(2,"img",28),O.C$Y(),O.I0R(3,"div",39)(4,"span"),O.OEk(5),O.C$Y(),O.I0R(6,"span"),O.OEk(7),O.C$Y(),O.I0R(8,"span"),O.OEk(9),O.C$Y(),O.I0R(10,"span"),O.OEk(11),O.C$Y(),O.I0R(12,"span"),O.OEk(13),O.C$Y()()()),2&bt){const ke=Ut.$implicit,Rt=O.GaO(2).$implicit,ct=O.GaO();O.yG2(2),O.E7m("src",ke.product.product.photoUrl[0],O.K6U),O.yG2(3),O.cNF(Rt.email?Rt.email:"unknown"),O.yG2(2),O.cNF(ct.upperCaseFirstLetter(ke.product.product.category)),O.yG2(2),O.cNF(ke.product.product.model),O.yG2(2),O.oRS("Price: ",ke.product.product.price,""),O.yG2(2),O.oRS("Dicsount: ",ke.product.product.discount,"%")}}function Ve(bt,Ut){if(1&bt&&(O.I0R(0,"div"),O.yuY(1,We,14,6,"div",40),O.wVc(2,"slice"),O.C$Y()),2&bt){const ke=O.GaO().$implicit;O.yG2(),O.E7m("ngForOf",O.g7$(2,1,ke.products,1))}}function Xe(bt,Ut){if(1&bt&&(O.I0R(0,"div",30)(1,"div",31)(2,"span"),O.OEk(3),O.C$Y(),O.I0R(4,"span"),O.OEk(5),O.C$Y(),O.I0R(6,"div",32),O.yuY(7,Oe,1,0,"img",33)(8,Se,1,0,"img",34),O.C$Y(),O.yuY(9,Le,14,6,"div",35),O.wVc(10,"slice"),O.yuY(11,Ve,3,4,"div",8),O.C$Y()()),2&bt){const ke=Ut.$implicit,Rt=Ut.index,ct=O.GaO();O.yG2(3),O.cNF(ct.convertDate(ke.date)),O.yG2(2),O.oRS("total price: ",ke.totalPrice,""),O.yG2(2),O.E7m("ngIf",!ct.changeArrow[Rt]),O.yG2(),O.E7m("ngIf",ct.changeArrow[Rt]),O.yG2(),O.E7m("ngForOf",O.I7O(10,6,ke.products,0,1)),O.yG2(2),O.E7m("ngIf",ct.showMoreItems[Rt])}}function Ce(bt,Ut){1&bt&&(O.I0R(0,"p"),O.OEk(1,"Liked Products:"),O.C$Y())}function ht(bt,Ut){if(1&bt&&(O.I0R(0,"div",47),O.OEk(1),O.C$Y()),2&bt){const ke=O.GaO().$implicit;O.yG2(),O.oRS(" ",ke.discount," ")}}function _t(bt,Ut){if(1&bt){const ke=O.KQA();O.I0R(0,"div",42)(1,"div",43)(2,"button"),O.OEk(3,"Add to cart"),O.C$Y(),O.I0R(4,"div")(5,"span"),O.OEk(6,"See Product"),O.C$Y(),O.I0R(7,"span",11),O.qCj("click",function(){const Nt=O.usT(ke).index,Kt=O.GaO();return O.CGJ(Kt.likeUnlikeProduct(Kt.likedProductsKeys[Nt].key,Kt.likedProductsKeys[Nt].category))}),O.I0R(8,"img",44),O.qCj("click",function(){const Nt=O.usT(ke).index,Kt=O.GaO();return O.CGJ(Kt.likeUnlikeProduct(Kt.likedProductsKeys[Nt].key,Kt.likedProductsKeys[Nt].category))}),O.C$Y(),O.OEk(9," Like"),O.C$Y()()(),O.I0R(10,"div",45),O.yuY(11,ht,2,1,"div",46),O.wR5(12,"img",28),O.C$Y(),O.I0R(13,"div",3)(14,"span"),O.OEk(15),O.C$Y(),O.I0R(16,"span"),O.OEk(17),O.C$Y(),O.I0R(18,"span"),O.OEk(19),O.C$Y()()()}if(2&bt){const ke=Ut.$implicit;O.yG2(11),O.E7m("ngIf",ke.discount>0),O.yG2(),O.E7m("src",ke.photoUrl[0],O.K6U),O.yG2(3),O.cNF(ke.category),O.yG2(2),O.cNF(ke.model),O.yG2(2),O.oRS("",ke.price,"$")}}let Ze=(()=>{class bt{constructor(ke,Rt,ct,Nt){this.authService=ke,this.cd=Rt,this.fb=ct,this.sharedService=Nt,this.likedProductsKeys=[],this.photos=[],this.addingProduct=!1,this.showMoreItems=[],this.changeArrow=[],this.form=this.fb.group({category:["",[I.AQ.required]],model:["",I.AQ.required],price:["",I.AQ.required],quantity:["",I.AQ.required],discount:["",I.AQ.required],description:["",I.AQ.required]})}ngOnInit(){this.authService.loggedUser.subscribe(ke=>{this.user=ke,this.likedProductsKeys=ke?.user.likedProducts.slice(1),this.getLikedProducts(ke.key),this.form.patchValue({category:"guitar"}),this.cd.detectChanges()})}update(){if(!this.user?.user.email)throw new Error("no user email found");this.authService.findUser(this.user?.user.email).subscribe(ke=>{this.user=ke,this.cd.detectChanges()})}onFileChange(ke){const Rt=ke.target.files[0];if(Rt){const ct=new FileReader;ct.onload=Nt=>{this.photos.push(Nt.target?.result),this.cd.detectChanges()},ct.readAsDataURL(Rt)}}addingProd(){this.addingProduct=!this.addingProduct}removeImg(ke){const Rt=this.photos.findIndex(ct=>ct===ke);this.photos.splice(Rt,Rt),console.log(this.photos)}addNewProduct(){const ke=this.form.get("category")?.getRawValue(),Rt=this.form.get("model")?.getRawValue(),ct=this.form.get("price")?.getRawValue(),Nt=this.form.get("discount")?.getRawValue(),Kt=this.form.get("quantity")?.getRawValue(),sn=this.form.get("description")?.getRawValue();this.sharedService.addProduct(ke,Rt,ct,Kt,Nt,this.photos,sn).subscribe({next:()=>{this.form.get("category")?.setValue(""),this.form.get("model")?.setValue(""),this.form.get("price")?.setValue(""),this.form.get("discount")?.setValue(""),this.form.get("quantity")?.setValue(""),this.form.get("description")?.setValue(""),alert("Product was added successfully")},error:Re=>{console.log("add product error: "+Re.message)},complete:()=>{console.log("Subscription completed")}})}getLikedProducts(ke){this.sharedService.getAllLikedProducts(ke).subscribe(Rt=>{this.likedProducts=Rt.slice(1),this.cd.detectChanges()})}likeUnlikeProduct(ke,Rt){this.authService.loggedUser.subscribe(ct=>{void 0!==ct&&this.sharedService.likeUnlikeProduct(ke,ct.key,Rt).subscribe(()=>{this.getLikedProducts(ct.key),this.update()})})}convertDate(ke){let Rt=new Date(ke);return`${Rt.getDate()}/${Rt.getMonth()+1}/${Rt.getFullYear()}`}upperCaseFirstLetter(ke){return ke.charAt(0).toUpperCase()+ke.slice(1)}static#e=this.\u0275fac=function(Rt){return new(Rt||bt)(O.GI1(ge.e),O.GI1(O.kD9),O.GI1(I.im),O.GI1(Ee.Y))};static#t=this.\u0275cmp=O.In1({type:bt,selectors:[["app-profile"]],decls:24,vars:10,consts:[[1,"container"],[1,"wrapper"],[1,"box"],[1,"info"],[3,"click",4,"ngIf"],[3,"formGroup",4,"ngIf"],["class","purchased-products",4,"ngFor","ngForOf"],[1,"liked-products"],[4,"ngIf"],[1,"products"],["class","single-product",4,"ngFor","ngForOf"],[3,"click"],[3,"formGroup"],["formControlName","category"],["value","guitar"],["value","drum"],["value","bass"],["value","piano"],["value","other"],["placeholder","Model","formControlName","model"],["placeholder","Price","formControlName","price"],["placeholder","Discount","formControlName","discount"],["placeholder","Quantity","formControlName","quantity"],["placeholder","Description","formControlName","description"],["type","file",3,"change"],[3,"disabled","click"],[1,"photos"],[4,"ngFor","ngForOf"],["alt","img",3,"src"],["src","assets/remove.png","alt","img",3,"click"],[1,"purchased-products"],[1,"purchase-wrapper"],[1,"see-more-arrow"],["src","assets/arrow-down.png","alt","img",3,"click",4,"ngIf"],["src","assets/arrow-up.png","alt","img",3,"click",4,"ngIf"],["class","purchase",4,"ngFor","ngForOf"],["src","assets/arrow-down.png","alt","img",3,"click"],["src","assets/arrow-up.png","alt","img",3,"click"],[1,"purchase"],[1,"grid-container"],["class","other-items purchase",4,"ngFor","ngForOf"],[1,"other-items","purchase"],[1,"single-product"],[1,"hover"],["src","assets/heart.png","alt","img",3,"click"],[1,"img-placeholder"],["class","discount",4,"ngIf"],[1,"discount"]],template:function(Rt,ct){1&Rt&&(O.wR5(0,"app-header"),O.I0R(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"p")(6,"span"),O.OEk(7," Email:"),O.C$Y(),O.OEk(8),O.C$Y(),O.I0R(9,"p")(10,"span"),O.OEk(11,"Address:"),O.C$Y(),O.OEk(12),O.C$Y(),O.I0R(13,"button"),O.OEk(14,"Change Password"),O.C$Y(),O.yuY(15,je,2,0,"button",4),O.C$Y(),O.yuY(16,ue,22,3,"form",5),O.C$Y(),O.yuY(17,Xe,12,10,"div",6),O.wVc(18,"slice"),O.I0R(19,"div",7),O.yuY(20,Ce,2,0,"p",8),O.I0R(21,"div",9),O.yuY(22,_t,20,5,"div",10),O.C$Y()()()(),O.wR5(23,"app-footer")),2&Rt&&(O.yG2(8),O.oRS(" ",null==ct.user||null==ct.user.user?null:ct.user.user.email,""),O.yG2(4),O.oRS(" ",null==ct.user||null==ct.user.user?null:ct.user.user.address,"Some Adrress"),O.yG2(3),O.E7m("ngIf",null==ct.user||null==ct.user.user?null:ct.user.user.isAdmin),O.yG2(),O.E7m("ngIf",(null==ct.user||null==ct.user.user?null:ct.user.user.isAdmin)&&ct.addingProduct),O.yG2(),O.E7m("ngForOf",O.g7$(18,7,null==ct.user||null==ct.user.user?null:ct.user.user.purchasedProducts,1)),O.yG2(3),O.E7m("ngIf",ct.likedProducts),O.yG2(2),O.E7m("ngForOf",ct.likedProducts))},dependencies:[_.ay,_.u_,I.sz,I.wd,I.GO,I.ot,I.GC,I.ue,I.u,I.uW,I.Wo,Ie.k,Be.W,_.qq],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:85%;background-color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]{display:flex;gap:60px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:8%;display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-size:18px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:200px;height:50px;cursor:pointer;--b: 2px;--s: .45em;--color: #373b44;padding:calc(.5em + var(--s)) calc(.9em + var(--s));color:var(--color);--_p: var(--s);background:conic-gradient(from 90deg at var(--b) var(--b),rgba(0,0,0,0) 90deg,var(--color) 0) var(--_p) var(--_p)/calc(100% - var(--b) - 2 * var(--_p)) calc(100% - var(--b) - 2 * var(--_p));transition:.3s linear,color 0s,background-color 0s;outline:var(--b) solid rgba(0,0,0,0);outline-offset:.6em;font-size:16px;border:0;user-select:none;-webkit-user-select:none;touch-action:manipulation}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus-visible{--_p: 0px;outline-color:var(--color);outline-offset:.05em}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background:var(--color);color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,200px);grid-template-rows:repeat(5,30px);padding-top:13%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%]{padding-left:90px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;padding-top:10px;background-color:#7daecf;width:520px;margin-bottom:30px;position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]{position:absolute;bottom:-8px;width:35px;height:35px;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%]{display:flex;gap:3%;border:1px solid rgb(84,145,185);width:500px;height:120px;padding:10px;margin-bottom:36px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:13%;height:100%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:70px;height:100%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]{display:grid;width:100%;gap:7px;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(3,1fr);text-align:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{align-self:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-self:center;border:none;background-color:#373b44;color:#fff;width:120px;height:20px;cursor:pointer}.liked-products[_ngcontent-%COMP%]{padding:40px}.liked-products[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:20px;font-weight:700;padding:40px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;gap:20px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%]{width:150px;height:380px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:20%;z-index:1}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{display:flex;gap:10px;justify-content:center;width:140px;height:40px;color:#fff}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{width:100%;height:260px;position:relative}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:260px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{width:100%;height:120px;display:flex;flex-direction:column;justify-content:space-around}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}"],changeDetection:0})}return bt})();var rt=V(4704),me=V(9212);const At=[{path:"",component:Ze,canActivate:[(()=>{class bt{constructor(){this.authService=(0,O.uUt)(ge.e),this.router=(0,O.uUt)(J.E5)}canActivate(ke){return this.authService.findUserById(ke.params.id).pipe((0,rt.k)(ct=>this.authService.loggedUser.value?.user.email===ct),(0,me.y)(ct=>{ct||(alert("Access Denied!"),this.router.navigate(["/products"]))}))}static#e=this.\u0275fac=function(Rt){return new(Rt||bt)};static#t=this.\u0275prov=O.wxM({token:bt,factory:bt.\u0275fac,providedIn:"root"})}return bt})()]}];let Me=(()=>{class bt{static#e=this.\u0275fac=function(Rt){return new(Rt||bt)};static#t=this.\u0275mod=O.a4G({type:bt});static#n=this.\u0275inj=O.s3X({imports:[J.qQ.forChild(At),J.qQ]})}return bt})(),Ct=(()=>{class bt{static#e=this.\u0275fac=function(Rt){return new(Rt||bt)};static#t=this.\u0275mod=O.a4G({type:bt});static#n=this.\u0275inj=O.s3X({imports:[_.MD,Me,I.sl,Ie.k]})}return bt})()},3804:(Xt,$e,V)=>{V.d($e,{Y:()=>le});var _=V(6700),J=V(4704),I=V(9336),O=V(9212),ge=V(7368),Ee=V(9144),Ie=V(2700),Be=V(4496),je=V(7048);let le=(()=>{class ue{constructor(Se){this.http=Se,this.detectChanges=new _.g(!1),this.cart=new _.g([]),this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app"}addProduct(Se,Le,We,Ve,Xe,Ce,ht){const _t={category:Se,model:Le,price:parseInt(We),quantity:parseInt(Ve),discount:parseInt(Xe),photoUrl:Ce,description:ht};return this.http.post(`${this.url}/products/${Se}.json`,_t)}ifDetectChanges(){return this.detectChanges.next(!this.detectChanges.value),this.detectChanges.value}getTypeOfProduct(Se){return this.http.get(`${this.url}/products/${Se}.json`).pipe((0,J.k)(Le=>{let We=[];return Object.entries(Le).forEach(([Ve,Xe])=>We.push({key:Ve,product:Xe})),We}))}getAllTypeOfProduct(){const Se=this.http.get(`${this.url}/products/guitar.json`),Le=this.http.get(`${this.url}/products/piano.json`),We=this.http.get(`${this.url}/products/bass.json`),Ve=this.http.get(`${this.url}/products/drum.json`);return(0,I.y)([Se,Le,We,Ve]).pipe((0,J.k)(Xe=>Xe))}likeUnlikeProduct(Se,Le,We){return this.http.get(`${this.url}/musicShopUsers/${Le}.json`).pipe((0,O.y)(Ve=>{let Xe=[],Ce={email:Ve.email,address:Ve.address,isAdmin:Ve.isAdmin,photoUrl:Ve.photoUrl,likedProducts:Ve.likedProducts,purchasedProducts:Ve.purchasedProducts};Ce.likedProducts.find(_t=>_t.key===Se)?(Xe=Ve.likedProducts.filter(_t=>_t.key!==Se),Ce.likedProducts=Xe):(Xe=[...Ve.likedProducts,{key:Se,category:We}],Ce.likedProducts=Xe),this.http.patch(`${this.url}/musicShopUsers/${Le}.json`,Ce).subscribe()}))}getAllLikedProducts(Se){return this.http.get(`${this.url}/musicShopUsers/${Se}.json`).pipe((0,ge.G)(Le=>{const We=Le.likedProducts.map(Ve=>this.getProductById(Ve.key,Ve.category));return(0,I.y)(We)}))}getProductById(Se,Le){return this.http.get(`${this.url}/products/${Le}/${Se}.json`)}cartOperations(Se,Le){let We=this.cart.getValue();const Ve=We.findIndex(Ce=>Ce.product.key===Le.key);let Xe=[...We];-1!==Ve?"add"===Se?Xe[Ve].quantity++:Xe.splice(Ve,1):"add"===Se&&Xe.push({quantity:1,product:Le}),this.cart.next(Xe)}buyProducts(Se,Le,We,Ve){const Xe={userId:Ve,email:We,date:new Date,totalPrice:Le,products:Se},Ce=this.http.get(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`).pipe((0,ge.G)(_t=>(_t.purchasedProducts=[..._t.purchasedProducts,Xe],this.http.patch(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`,_t))),(0,Ee.a)(_t=>(console.error("Error in adminUpdate$",_t),(0,Ie.of)(null))));let ht=(0,Ie.of)(null);Ve&&(ht=this.http.get(`${this.url}/musicShopUsers/${Ve}.json`).pipe((0,ge.G)(_t=>(_t.purchasedProducts=[..._t.purchasedProducts,Xe],this.http.patch(`${this.url}/musicShopUsers/${Ve}.json`,_t))),(0,Ee.a)(_t=>(console.error("Error in userUpdate$",_t),(0,Ie.of)(null))))),(0,I.y)([Ce,ht]).subscribe()}static#e=this.\u0275fac=function(Le){return new(Le||ue)(Be.CoB(je.KK))};static#t=this.\u0275prov=Be.wxM({token:ue,factory:ue.\u0275fac,providedIn:"root"})}return ue})()},2080:(Xt,$e,V)=>{V.r($e),V.d($e,{SingleProductPageModule:()=>Oe});var _=V(1368),J=V(4856),I=V(4496),O=V(3804),ge=V(1092),Ee=V(6940);function Ie(Se,Le){if(1&Se&&I.wR5(0,"img",10),2&Se){const We=I.GaO();I.E7m("src",We.images[We.cuurentIndex],I.K6U)}}function Be(Se,Le){if(1&Se){const We=I.KQA();I.I0R(0,"div")(1,"img",11),I.qCj("click",function(){const Ce=I.usT(We).index,ht=I.GaO();return I.CGJ(ht.switchImage(Ce))}),I.C$Y()()}if(2&Se){const We=Le.index,Ve=I.GaO();I.yG2(),I.E7m("src",Ve.images[We],I.K6U)}}const le=[{path:"",component:(()=>{class Se{constructor(We,Ve,Xe,Ce){this.sharedService=We,this.router=Ve,this.route=Xe,this.cd=Ce,this.cuurentIndex=0}ngOnInit(){this.getProductInfo()}getProductInfo(){this.route.queryParams.subscribe(We=>{this.sharedService.getProductById(We.prod,We.type).subscribe(Ve=>{this.product=Ve,this.images=Ve.photoUrl,this.cd.detectChanges()})})}switchImage(We){this.cuurentIndex=We}scroll(We){if("right"===We){const Ve=[this.images[this.images.length-1]],Xe=this.images.slice(0,this.images.length-1);this.images=[...Ve,...Xe]}else{const Ve=[this.images[0]],Xe=this.images.slice(1,this.images.length);this.images=[...Xe,...Ve]}}static#e=this.\u0275fac=function(Ve){return new(Ve||Se)(I.GI1(O.Y),I.GI1(J.E5),I.GI1(J.gV),I.GI1(I.kD9))};static#t=this.\u0275cmp=I.In1({type:Se,selectors:[["app-single-product-page"]],decls:31,vars:9,consts:[[1,"container"],[1,"content"],[1,"images"],[1,"focused-img"],["alt","img",3,"src",4,"ngIf"],[1,"otherPhotos"],["src","assets/left.png","alt","img",3,"click"],[4,"ngFor","ngForOf"],["src","assets/right.png","alt","img",3,"click"],[1,"description","payment"],["alt","img",3,"src"],["alt","img",3,"src","click"]],template:function(Ve,Xe){1&Ve&&(I.wR5(0,"app-header"),I.I0R(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),I.yuY(5,Ie,1,1,"img",4),I.C$Y(),I.I0R(6,"div",5)(7,"div")(8,"img",6),I.qCj("click",function(){return Xe.scroll("left")}),I.C$Y()(),I.yuY(9,Be,2,1,"div",7),I.wVc(10,"slice"),I.I0R(11,"div")(12,"img",8),I.qCj("click",function(){return Xe.scroll("right")}),I.C$Y()()()(),I.I0R(13,"div",9)(14,"p")(15,"span"),I.OEk(16,"Categoty:"),I.C$Y(),I.OEk(17),I.C$Y(),I.I0R(18,"p")(19,"span"),I.OEk(20,"Model:"),I.C$Y(),I.OEk(21),I.C$Y(),I.I0R(22,"p")(23,"span"),I.OEk(24,"Description: "),I.C$Y(),I.OEk(25),I.C$Y(),I.I0R(26,"p")(27,"span"),I.OEk(28,"Price:"),I.C$Y(),I.OEk(29),I.C$Y()()()(),I.wR5(30,"app-footer")),2&Ve&&(I.yG2(5),I.E7m("ngIf",Xe.images),I.yG2(4),I.E7m("ngForOf",I.g7$(10,6,Xe.images,2)),I.yG2(8),I.oRS(" ",null==Xe.product?null:Xe.product.category,""),I.yG2(4),I.oRS(" ",null==Xe.product?null:Xe.product.model,""),I.yG2(4),I.oRS(" ",null==Xe.product?null:Xe.product.description," some shit description which i do not know what is over and over again some shit description which i do not know what is over and over again some shit description which i do not know what is over and over againsome shit description which i do not know what is over and over again some shit description which i do not know what is over and over again "),I.yG2(4),I.oRS(" ",null==Xe.product?null:Xe.product.price,"$"))},dependencies:[_.ay,_.u_,ge.k,Ee.W,_.qq],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;gap:6%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]{display:flex;justify-content:center;width:400px;height:400px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{max-width:400px;max-height:400px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]{display:flex;gap:4px;justify-content:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child, .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > img[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]{width:40px;height:40px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;width:400px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{word-wrap:break-word;font-size:20px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}"],changeDetection:0})}return Se})()}];let ue=(()=>{class Se{static#e=this.\u0275fac=function(Ve){return new(Ve||Se)};static#t=this.\u0275mod=I.a4G({type:Se});static#n=this.\u0275inj=I.s3X({imports:[J.qQ.forChild(le),J.qQ]})}return Se})(),Oe=(()=>{class Se{static#e=this.\u0275fac=function(Ve){return new(Ve||Se)};static#t=this.\u0275mod=I.a4G({type:Se});static#n=this.\u0275inj=I.s3X({imports:[_.MD,ge.k,ue]})}return Se})()},2736:(Xt,$e,V)=>{var _=V(4476),J=V(4856),I=V(4496);const O=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.resolve().then(V.bind(V,3960)).then(p=>p.LoginAndRegistrationModule)},{path:"products",loadChildren:()=>Promise.resolve().then(V.bind(V,6180)).then(p=>p.ProductPageModule)},{path:"profile/:id",loadChildren:()=>Promise.resolve().then(V.bind(V,2448)).then(p=>p.ProfileModuleModule)},{path:"single-product/:id",loadChildren:()=>Promise.resolve().then(V.bind(V,2080)).then(p=>p.SingleProductPageModule)},{path:"categoty/:category",loadChildren:()=>V.e(644).then(V.bind(V,5644)).then(p=>p.SinleCategoryPageModuleModule)}];let ge=(()=>{class p{static#e=this.\u0275fac=function(y){return new(y||p)};static#t=this.\u0275mod=I.a4G({type:p});static#n=this.\u0275inj=I.s3X({imports:[J.qQ.forRoot(O),J.qQ]})}return p})(),Ee=(()=>{class p{constructor(){this.title="musicShop"}static#e=this.\u0275fac=function(y){return new(y||p)};static#t=this.\u0275cmp=I.In1({type:p,selectors:[["app-root"]],decls:1,vars:0,template:function(y,b){1&y&&I.wR5(0,"router-outlet")},dependencies:[J.cP]})}return p})();var Ie=V(6176),Be=V(3680);class je{constructor(d){return d}}class le{constructor(){return(0,Be.UH)()}}var Me=V(8836);class bt{constructor(d){return d}}class Ut{constructor(){return(0,Ie.S_)("auth")}}const Rt=new I.UbH("angularfire2.auth-instances");function Nt(p){return(d,l)=>{const y=d.runOutsideAngular(()=>p(l));return new bt(y)}}const Kt={provide:Ut,deps:[[new I.T7N,Rt]]},sn={provide:bt,useFactory:function ct(p,d){const l=(0,Ie.UN)("auth",p,d);return l&&new bt(l)},deps:[[new I.T7N,Rt],je]};let Re=(()=>{class p{constructor(){(0,Be.Kk)("angularfire",Ie.j1.full,"auth")}static \u0275fac=function(y){return new(y||p)};static \u0275mod=I.a4G({type:p});static \u0275inj=I.s3X({providers:[sn,Kt]})}return p})();function He(p,...d){return{ngModule:Re,providers:[{provide:Rt,useFactory:Nt(p),multi:!0,deps:[I.WW2,I.zZn,Ie.u,le,[new I.T7N,Ie.gJ],...d]}]}}const Wn=(0,Ie.qo)(Me.Iv,!0);var Dr=V(1528),fn=V(9360),Ln=V(4920),Pe=V(7144),qe=V(5976);const Qe="@firebase/database";let rn="";class Hn{constructor(d){this.domStorage_=d,this.prefix_="firebase:"}set(d,l){null==l?this.domStorage_.removeItem(this.prefixedName_(d)):this.domStorage_.setItem(this.prefixedName_(d),(0,Pe.i)(l))}get(d){const l=this.domStorage_.getItem(this.prefixedName_(d));return null==l?null:(0,Pe.GI)(l)}remove(d){this.domStorage_.removeItem(this.prefixedName_(d))}prefixedName_(d){return this.prefix_+d}toString(){return this.domStorage_.toString()}}class Yn{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(d,l){null==l?delete this.cache_[d]:this.cache_[d]=l}get(d){return(0,Pe.Y7)(this.cache_,d)?this.cache_[d]:null}remove(d){delete this.cache_[d]}}const Kr=function(p){try{if(typeof window<"u"&&typeof window[p]<"u"){const d=window[p];return d.setItem("firebase:sentinel","cache"),d.removeItem("firebase:sentinel"),new Hn(d)}}catch{}return new Yn},lr=Kr("localStorage"),se=Kr("sessionStorage"),_e=new qe.YJ("@firebase/database"),ye=function(){let p=1;return function(){return p++}}(),ft=function(p){const d=(0,Pe.OS)(p),l=new Pe.qS;l.update(d);const y=l.digest();return Pe.Al.encodeByteArray(y)},wt=function(...p){let d="";for(let l=0;l<p.length;l++){const y=p[l];Array.isArray(y)||y&&"object"==typeof y&&"number"==typeof y.length?d+=wt.apply(null,y):d+="object"==typeof y?(0,Pe.i)(y):y,d+=" "}return d};let Vt=null,qt=!0;const an=function(...p){if(!0===qt&&(qt=!1,null===Vt&&!0===se.get("logging_enabled")&&function(p,d){(0,Pe.Uc)(!d||!0===p||!1===p,"Can't turn on custom loggers persistently."),!0===p?(_e.logLevel=qe.Ge.VERBOSE,Vt=_e.log.bind(_e),d&&se.set("logging_enabled",!0)):"function"==typeof p?Vt=p:(Vt=null,se.remove("logging_enabled"))}(!0)),Vt){const d=wt.apply(null,p);Vt(d)}},zn=function(p){return function(...d){an(p,...d)}},vr=function(...p){const d="FIREBASE INTERNAL ERROR: "+wt(...p);_e.error(d)},sr=function(...p){const d=`FIREBASE FATAL ERROR: ${wt(...p)}`;throw _e.error(d),new Error(d)},Vn=function(...p){const d="FIREBASE WARNING: "+wt(...p);_e.warn(d)},Ti=function(p){return"number"==typeof p&&(p!=p||p===Number.POSITIVE_INFINITY||p===Number.NEGATIVE_INFINITY)},qn="[MIN_NAME]",ei="[MAX_NAME]",$n=function(p,d){if(p===d)return 0;if(p===qn||d===ei)return-1;if(d===qn||p===ei)return 1;{const l=Si(p),y=Si(d);return null!==l?null!==y?l-y==0?p.length-d.length:l-y:-1:null!==y?1:p<d?-1:1}},fr=function(p,d){return p===d?0:p<d?-1:1},rs=function(p,d){if(d&&p in d)return d[p];throw new Error("Missing required key ("+p+") in object: "+(0,Pe.i)(d))},Di=function(p){if("object"!=typeof p||null===p)return(0,Pe.i)(p);const d=[];for(const y in p)d.push(y);d.sort();let l="{";for(let y=0;y<d.length;y++)0!==y&&(l+=","),l+=(0,Pe.i)(d[y]),l+=":",l+=Di(p[d[y]]);return l+="}",l},si=function(p,d){const l=p.length;if(l<=d)return[p];const y=[];for(let b=0;b<l;b+=d)y.push(p.substring(b,b+d>l?l:b+d));return y};function Yr(p,d){for(const l in p)p.hasOwnProperty(l)&&d(l,p[l])}const As=function(p){(0,Pe.Uc)(!Ti(p),"Invalid JSON number");const y=1023;let b,L,$,ie,pe;0===p?(L=0,$=0,b=1/p==-1/0?1:0):(b=p<0,(p=Math.abs(p))>=Math.pow(2,1-y)?(ie=Math.min(Math.floor(Math.log(p)/Math.LN2),y),L=ie+y,$=Math.round(p*Math.pow(2,52-ie)-Math.pow(2,52))):(L=0,$=Math.round(p/Math.pow(2,-1074))));const we=[];for(pe=52;pe;pe-=1)we.push($%2?1:0),$=Math.floor($/2);for(pe=11;pe;pe-=1)we.push(L%2?1:0),L=Math.floor(L/2);we.push(b?1:0),we.reverse();const Et=we.join("");let It="";for(pe=0;pe<64;pe+=8){let Mt=parseInt(Et.substr(pe,8),2).toString(16);1===Mt.length&&(Mt="0"+Mt),It+=Mt}return It.toLowerCase()},Go=new RegExp("^-?(0*)\\d{1,10}$"),Si=function(p){if(Go.test(p)){const d=Number(p);if(d>=-2147483648&&d<=2147483647)return d}return null},$r=function(p){try{p()}catch(d){setTimeout(()=>{throw Vn("Exception was thrown by user callback.",d.stack||""),d},Math.floor(0))}},oi=function(p,d){const l=setTimeout(p,d);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class ra{constructor(d,l){this.appName_=d,this.appCheckProvider=l,this.appCheck=l?.getImmediate({optional:!0}),this.appCheck||l?.get().then(y=>this.appCheck=y)}getToken(d){return this.appCheck?this.appCheck.getToken(d):new Promise((l,y)=>{setTimeout(()=>{this.appCheck?this.getToken(d).then(l,y):l(null)},0)})}addTokenChangeListener(d){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(y=>y.addTokenListener(d))}notifyForInvalidToken(){Vn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ia{constructor(d,l,y){this.appName_=d,this.firebaseOptions_=l,this.authProvider_=y,this.auth_=null,this.auth_=y.getImmediate({optional:!0}),this.auth_||y.onInit(b=>this.auth_=b)}getToken(d){return this.auth_?this.auth_.getToken(d).catch(l=>l&&"auth/token-not-initialized"===l.code?(an("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,y)=>{setTimeout(()=>{this.auth_?this.getToken(d).then(l,y):l(null)},0)})}addTokenChangeListener(d){this.auth_?this.auth_.addAuthTokenListener(d):this.authProvider_.get().then(l=>l.addAuthTokenListener(d))}removeTokenChangeListener(d){this.authProvider_.get().then(l=>l.removeAuthTokenListener(d))}notifyForInvalidToken(){let d='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';d+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vn(d)}}let Bs=(()=>{class p{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return p.OWNER="owner",p})();const Ar=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$i="websocket",or="long_polling";class ki{constructor(d,l,y,b,L=!1,$="",ie=!1,pe=!1){this.secure=l,this.namespace=y,this.webSocketOnly=b,this.nodeAdmin=L,this.persistenceKey=$,this.includeNamespaceInQueryParams=ie,this.isUsingEmulator=pe,this._host=d.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=lr.get("host:"+d)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(d){d!==this.internalHost&&(this.internalHost=d,this.isCacheableHost()&&lr.set("host:"+this._host,this.internalHost))}toString(){let d=this.toURLString();return this.persistenceKey&&(d+="<"+this.persistenceKey+">"),d}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function An(p,d,l){let y;if((0,Pe.Uc)("string"==typeof d,"typeof type must == string"),(0,Pe.Uc)("object"==typeof l,"typeof params must == object"),d===$i)y=(p.secure?"wss://":"ws://")+p.internalHost+"/.ws?";else{if(d!==or)throw new Error("Unknown connection type: "+d);y=(p.secure?"https://":"http://")+p.internalHost+"/.lp?"}(function Gi(p){return p.host!==p.internalHost||p.isCustomHost()||p.includeNamespaceInQueryParams})(p)&&(l.ns=p.namespace);const b=[];return Yr(l,(L,$)=>{b.push(L+"="+$)}),y+b.join("&")}class Pi{constructor(){this.counters_={}}incrementCounter(d,l=1){(0,Pe.Y7)(this.counters_,d)||(this.counters_[d]=0),this.counters_[d]+=l}get(){return(0,Pe.O0)(this.counters_)}}const ho={},qs={};function li(p){const d=p.toString();return ho[d]||(ho[d]=new Pi),ho[d]}class bs{constructor(d){this.onMessage_=d,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(d,l){this.closeAfterResponse=d,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(d,l){for(this.pendingResponses[d]=l;this.pendingResponses[this.currentResponseNum];){const y=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let b=0;b<y.length;++b)y[b]&&$r(()=>{this.onMessage_(y[b])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Fi{constructor(d,l,y,b,L,$,ie){this.connId=d,this.repoInfo=l,this.applicationId=y,this.appCheckToken=b,this.authToken=L,this.transportSessionId=$,this.lastSessionId=ie,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zn(d),this.stats_=li(l),this.urlFn=pe=>(this.appCheckToken&&(pe.ac=this.appCheckToken),An(l,or,pe))}open(d,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new bs(d),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(p){if((0,Pe.iw)()||"complete"===document.readyState)p();else{let d=!1;const l=function(){document.body?d||(d=!0,p()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xs((...L)=>{const[$,ie,pe,we,Et]=L;if(this.incrementIncomingBytes_(L),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===$)this.id=ie,this.password=pe;else{if("close"!==$)throw new Error("Unrecognized command received: "+$);ie?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ie,()=>{this.onClosed_()})):this.onClosed_()}},(...L)=>{const[$,ie]=L;this.incrementIncomingBytes_(L),this.myPacketOrderer.handleResponse($,ie)},()=>{this.onClosed_()},this.urlFn);const y={start:"t"};y.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(y.cb=this.scriptTagHolder.uniqueCallbackIdentifier),y.v="5",this.transportSessionId&&(y.s=this.transportSessionId),this.lastSessionId&&(y.ls=this.lastSessionId),this.applicationId&&(y.p=this.applicationId),this.appCheckToken&&(y.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Ar.test(location.hostname)&&(y.r="f");const b=this.urlFn(y);this.log_("Connecting via long-poll to "+b),this.scriptTagHolder.addTag(b,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fi.forceAllow_=!0}static forceDisallow(){Fi.forceDisallow_=!0}static isAvailable(){return!((0,Pe.iw)()||!Fi.forceAllow_&&(Fi.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(d){const l=(0,Pe.i)(d);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const y=(0,Pe.c9)(l),b=si(y,1840);for(let L=0;L<b.length;L++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,b.length,b[L]),this.curSegmentNum++}addDisconnectPingFrame(d,l){if((0,Pe.iw)())return;this.myDisconnFrame=document.createElement("iframe");const y={dframe:"t"};y.id=d,y.pw=l,this.myDisconnFrame.src=this.urlFn(y),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(d){const l=(0,Pe.i)(d).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class xs{constructor(d,l,y,b){if(this.onDisconnect=y,this.urlFn=b,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Pe.iw)())this.commandCB=d,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=ye(),window["pLPCommand"+this.uniqueCallbackIdentifier]=d,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=xs.createIFrame_();let L="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(L='<script>document.domain="'+document.domain+'";<\/script>');const $="<html><body>"+L+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write($),this.myIFrame.doc.close()}catch(ie){an("frame writing exception"),ie.stack&&an(ie.stack),an(ie)}}}static createIFrame_(){const d=document.createElement("iframe");if(d.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(d);try{d.contentWindow.document||an("No IE domain setting required")}catch{const y=document.domain;d.src="javascript:void((function(){document.open();document.domain='"+y+"';document.close();})())"}return d.contentDocument?d.doc=d.contentDocument:d.contentWindow?d.doc=d.contentWindow.document:d.document&&(d.doc=d.document),d}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const d=this.onDisconnect;d&&(this.onDisconnect=null,d())}startLongPoll(d,l){for(this.myID=d,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const d={};d.id=this.myID,d.pw=this.myPW,d.ser=this.currentSerial;let l=this.urlFn(d),y="",b=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+y.length<=1870;){const $=this.pendingSegs.shift();y=y+"&seg"+b+"="+$.seg+"&ts"+b+"="+$.ts+"&d"+b+"="+$.d,b++}return l+=y,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(d,l,y){this.pendingSegs.push({seg:d,ts:l,d:y}),this.alive&&this.newRequest_()}addLongPollTag_(d,l){this.outstandingRequests.add(l);const y=()=>{this.outstandingRequests.delete(l),this.newRequest_()},b=setTimeout(y,Math.floor(25e3));this.addTag(d,()=>{clearTimeout(b),y()})}addTag(d,l){(0,Pe.iw)()?this.doNodeLongPoll(d,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const y=this.myIFrame.doc.createElement("script");y.type="text/javascript",y.async=!0,y.src=d,y.onload=y.onreadystatechange=function(){const b=y.readyState;(!b||"loaded"===b||"complete"===b)&&(y.onload=y.onreadystatechange=null,y.parentNode&&y.parentNode.removeChild(y),l())},y.onerror=()=>{an("Long-poll script failed to load: "+d),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(y)}catch{}},Math.floor(1))}}let Ks=null;typeof MozWebSocket<"u"?Ks=MozWebSocket:typeof WebSocket<"u"&&(Ks=WebSocket);let Wo=(()=>{class p{constructor(l,y,b,L,$,ie,pe){this.connId=l,this.applicationId=b,this.appCheckToken=L,this.authToken=$,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zn(this.connId),this.stats_=li(y),this.connURL=p.connectionURL_(y,ie,pe,L,b),this.nodeAdmin=y.nodeAdmin}static connectionURL_(l,y,b,L,$){const ie={v:"5"};return!(0,Pe.iw)()&&typeof location<"u"&&location.hostname&&Ar.test(location.hostname)&&(ie.r="f"),y&&(ie.s=y),b&&(ie.ls=b),L&&(ie.ac=L),$&&(ie.p=$),An(l,$i,ie)}open(l,y){this.onDisconnect=y,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,lr.set("previous_websocket_failure",!0);try{let b;if((0,Pe.iw)()){b={headers:{"User-Agent":`Firebase/5/${rn}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(b.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(b.headers["X-Firebase-AppCheck"]=this.appCheckToken);const $=process.env,ie=0===this.connURL.indexOf("wss://")?$.HTTPS_PROXY||$.https_proxy:$.HTTP_PROXY||$.http_proxy;ie&&(b.proxy={origin:ie})}this.mySock=new Ks(this.connURL,[],b)}catch(b){this.log_("Error instantiating WebSocket.");const L=b.message||b.data;return L&&this.log_(L),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=b=>{this.handleIncomingFrame(b)},this.mySock.onerror=b=>{this.log_("WebSocket error.  Closing connection.");const L=b.message||b.data;L&&this.log_(L),this.onClosed_()}}start(){}static forceDisallow(){p.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&b.length>1&&parseFloat(b[1])<4.4&&(l=!0)}return!l&&null!==Ks&&!p.forceDisallow_}static previouslyFailed(){return lr.isInMemoryStorage||!0===lr.get("previous_websocket_failure")}markConnectionHealthy(){lr.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const y=this.frames.join("");this.frames=null;const b=(0,Pe.GI)(y);this.onMessage(b)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,Pe.Uc)(null===this.frames,"We already have a frame buffer"),l.length<=6){const y=Number(l);if(!isNaN(y))return this.handleNewFrameCount_(y),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const y=l.data;if(this.bytesReceived+=y.length,this.stats_.incrementCounter("bytes_received",y.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(y);else{const b=this.extractFrameCount_(y);null!==b&&this.appendFrame_(b)}}send(l){this.resetKeepAlive();const y=(0,Pe.i)(l);this.bytesSent+=y.length,this.stats_.incrementCounter("bytes_sent",y.length);const b=si(y,16384);b.length>1&&this.sendString_(String(b.length));for(let L=0;L<b.length;L++)this.sendString_(b[L])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(y){this.log_("Exception thrown from WebSocket.send():",y.message||y.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return p.responsesRequiredToBeHealthy=2,p.healthyTimeout=3e4,p})(),Ya=(()=>{class p{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Fi,Wo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const y=Wo&&Wo.isAvailable();let b=y&&!Wo.previouslyFailed();if(l.webSocketOnly&&(y||Vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),b=!0),b)this.transports_=[Wo];else{const L=this.transports_=[];for(const $ of p.ALL_TRANSPORTS)$&&$.isAvailable()&&L.push($);p.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return p.globalTransportInitialized_=!1,p})();class un{constructor(d,l,y,b,L,$,ie,pe,we,Et){this.id=d,this.repoInfo_=l,this.applicationId_=y,this.appCheckToken_=b,this.authToken_=L,this.onMessage_=$,this.onReady_=ie,this.onDisconnect_=pe,this.onKill_=we,this.lastSessionId=Et,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zn("c:"+this.id+":"),this.transportManager_=new Ya(l),this.log_("Connection created"),this.start_()}start_(){const d=this.transportManager_.initialTransport();this.conn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),y=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,y)},Math.floor(0));const b=d.healthyTimeout||0;b>0&&(this.healthyTimeout_=oi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(b)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(d){return l=>{d===this.conn_?this.onConnectionLost_(l):d===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(d){return l=>{2!==this.state_&&(d===this.rx_?this.onPrimaryMessageReceived_(l):d===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(d){this.sendData_({t:"d",d})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(d){if("t"in d){const l=d.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(d){const l=rs("t",d),y=rs("d",d);if("c"===l)this.onSecondaryControl_(y);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(y)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(d){const l=rs("t",d),y=rs("d",d);"c"===l?this.onControl_(y):"d"===l&&this.onDataMessage_(y)}onDataMessage_(d){this.onPrimaryResponse_(),this.onMessage_(d)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(d){const l=rs("t",d);if("d"in d){const y=d.d;if("h"===l){const b=Object.assign({},y);this.repoInfo_.isUsingEmulator&&(b.h=this.repoInfo_.host),this.onHandshake_(b)}else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let b=0;b<this.pendingDataMessages.length;++b)this.onDataMessage_(this.pendingDataMessages[b]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(y):"r"===l?this.onReset_(y):"e"===l?vr("Server Error: "+y):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vr("Unknown control packet command: "+l)}}onHandshake_(d){const l=d.ts,y=d.v,b=d.h;this.sessionId=d.s,this.repoInfo_.host=b,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==y&&Vn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const d=this.transportManager_.upgradeTransport();d&&this.startUpgrade_(d)}startUpgrade_(d){this.secondaryConn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),y=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,y),oi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(d){this.log_("Reset packet received.  New host: "+d),this.repoInfo_.host=d,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(d,l){this.log_("Realtime connection established."),this.conn_=d,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):oi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const d=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===d||this.rx_===d)&&this.close()}onConnectionLost_(d){this.conn_=null,d||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(lr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(d){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(d),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(d){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(d)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Qn{put(d,l,y,b){}merge(d,l,y,b){}refreshAuthToken(d){}refreshAppCheckToken(d){}onDisconnectPut(d,l,y){}onDisconnectMerge(d,l,y){}onDisconnectCancel(d,l){}reportStats(d){}}class vs{constructor(d){this.allowedEvents_=d,this.listeners_={},(0,Pe.Uc)(Array.isArray(d)&&d.length>0,"Requires a non-empty array")}trigger(d,...l){if(Array.isArray(this.listeners_[d])){const y=[...this.listeners_[d]];for(let b=0;b<y.length;b++)y[b].callback.apply(y[b].context,l)}}on(d,l,y){this.validateEventType_(d),this.listeners_[d]=this.listeners_[d]||[],this.listeners_[d].push({callback:l,context:y});const b=this.getInitialEvent(d);b&&l.apply(y,b)}off(d,l,y){this.validateEventType_(d);const b=this.listeners_[d]||[];for(let L=0;L<b.length;L++)if(b[L].callback===l&&(!y||y===b[L].context))return void b.splice(L,1)}validateEventType_(d){(0,Pe.Uc)(this.allowedEvents_.find(l=>l===d),"Unknown event: "+d)}}class os extends vs{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,Pe.AV)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new os}getInitialEvent(d){return(0,Pe.Uc)("online"===d,"Unknown event type: "+d),[this.online_]}currentlyOnline(){return this.online_}}class Rn{constructor(d,l){if(void 0===l){this.pieces_=d.split("/");let y=0;for(let b=0;b<this.pieces_.length;b++)this.pieces_[b].length>0&&(this.pieces_[y]=this.pieces_[b],y++);this.pieces_.length=y,this.pieceNum_=0}else this.pieces_=d,this.pieceNum_=l}toString(){let d="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(d+="/"+this.pieces_[l]);return d||"/"}}function Sr(){return new Rn("")}function gn(p){return p.pieceNum_>=p.pieces_.length?null:p.pieces_[p.pieceNum_]}function Ho(p){return p.pieces_.length-p.pieceNum_}function ai(p){let d=p.pieceNum_;return d<p.pieces_.length&&d++,new Rn(p.pieces_,d)}function Ma(p){return p.pieceNum_<p.pieces_.length?p.pieces_[p.pieces_.length-1]:null}function Qs(p,d=0){return p.pieces_.slice(p.pieceNum_+d)}function xo(p){if(p.pieceNum_>=p.pieces_.length)return null;const d=[];for(let l=p.pieceNum_;l<p.pieces_.length-1;l++)d.push(p.pieces_[l]);return new Rn(d,0)}function dr(p,d){const l=[];for(let y=p.pieceNum_;y<p.pieces_.length;y++)l.push(p.pieces_[y]);if(d instanceof Rn)for(let y=d.pieceNum_;y<d.pieces_.length;y++)l.push(d.pieces_[y]);else{const y=d.split("/");for(let b=0;b<y.length;b++)y[b].length>0&&l.push(y[b])}return new Rn(l,0)}function Un(p){return p.pieceNum_>=p.pieces_.length}function Ji(p,d){const l=gn(p),y=gn(d);if(null===l)return d;if(l===y)return Ji(ai(p),ai(d));throw new Error("INTERNAL ERROR: innerPath ("+d+") is not within outerPath ("+p+")")}function ks(p,d){if(Ho(p)!==Ho(d))return!1;for(let l=p.pieceNum_,y=d.pieceNum_;l<=p.pieces_.length;l++,y++)if(p.pieces_[l]!==d.pieces_[y])return!1;return!0}function ls(p,d){let l=p.pieceNum_,y=d.pieceNum_;if(Ho(p)>Ho(d))return!1;for(;l<p.pieces_.length;){if(p.pieces_[l]!==d.pieces_[y])return!1;++l,++y}return!0}class Io{constructor(d,l){this.errorPrefix_=l,this.parts_=Qs(d,0),this.byteLength_=Math.max(1,this.parts_.length);for(let y=0;y<this.parts_.length;y++)this.byteLength_+=(0,Pe.Uj)(this.parts_[y]);Js(this)}}function Js(p){if(p.byteLength_>768)throw new Error(p.errorPrefix_+"has a key path longer than 768 bytes ("+p.byteLength_+").");if(p.parts_.length>32)throw new Error(p.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Co(p))}function Co(p){return 0===p.parts_.length?"":"in property '"+p.parts_.join(".")+"'"}class No extends vs{constructor(){let d,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",d="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",d="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",d="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",d="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const y=!document[d];y!==this.visible_&&(this.visible_=y,this.trigger("visible",y))},!1)}static getInstance(){return new No}getInitialEvent(d){return(0,Pe.Uc)("visible"===d,"Unknown event type: "+d),[this.visible_]}}const Xs=1e3;let mc,Zs=(()=>{class p extends Qn{constructor(l,y,b,L,$,ie,pe,we){if(super(),this.repoInfo_=l,this.applicationId_=y,this.onDataUpdate_=b,this.onConnectStatus_=L,this.onServerInfoUpdate_=$,this.authTokenProvider_=ie,this.appCheckTokenProvider_=pe,this.authOverride_=we,this.id=p.nextPersistentConnectionId_++,this.log_=zn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xs,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,we&&!(0,Pe.iw)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");No.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&os.getInstance().on("online",this.onOnline_,this)}sendRequest(l,y,b){const L=++this.requestNumber_,$={r:L,a:l,b:y};this.log_((0,Pe.i)($)),(0,Pe.Uc)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest($),b&&(this.requestCBHash_[L]=b)}get(l){this.initConnection_();const y=new Pe.o9,L={action:"g",request:{p:l._path.toString(),q:l._queryObject},onComplete:ie=>{const pe=ie.d;"ok"===ie.s?y.resolve(pe):y.reject(pe)}};return this.outstandingGets_.push(L),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),y.promise}listen(l,y,b,L){this.initConnection_();const $=l._queryIdentifier,ie=l._path.toString();this.log_("Listen called for "+ie+" "+$),this.listens.has(ie)||this.listens.set(ie,new Map),(0,Pe.Uc)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Pe.Uc)(!this.listens.get(ie).has($),"listen() called twice for same path/queryId.");const pe={onComplete:L,hashFn:y,query:l,tag:b};this.listens.get(ie).set($,pe),this.connected_&&this.sendListen_(pe)}sendGet_(l){const y=this.outstandingGets_[l];this.sendRequest("g",y.request,b=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),y.onComplete&&y.onComplete(b)})}sendListen_(l){const y=l.query,b=y._path.toString(),L=y._queryIdentifier;this.log_("Listen on "+b+" for "+L);const $={p:b};l.tag&&($.q=y._queryObject,$.t=l.tag),$.h=l.hashFn(),this.sendRequest("q",$,pe=>{const we=pe.d,Et=pe.s;p.warnOnListenWarnings_(we,y),(this.listens.get(b)&&this.listens.get(b).get(L))===l&&(this.log_("listen response",pe),"ok"!==Et&&this.removeListen_(b,L),l.onComplete&&l.onComplete(Et,we))})}static warnOnListenWarnings_(l,y){if(l&&"object"==typeof l&&(0,Pe.Y7)(l,"w")){const b=(0,Pe.o5)(l,"w");if(Array.isArray(b)&&~b.indexOf("no_index")){const L='".indexOn": "'+y._queryParams.getIndex().toString()+'"',$=y._path.toString();Vn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${L} at ${$} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,Pe.L0)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,y=(0,Pe.AX)(l)?"auth":"gauth",b={cred:l};null===this.authOverride_?b.noauth=!0:"object"==typeof this.authOverride_&&(b.authvar=this.authOverride_),this.sendRequest(y,b,L=>{const $=L.s,ie=L.d||"error";this.authToken_===l&&("ok"===$?this.invalidAuthTokenCount_=0:this.onAuthRevoked_($,ie))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const y=l.s,b=l.d||"error";"ok"===y?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(y,b)})}unlisten(l,y){const b=l._path.toString(),L=l._queryIdentifier;this.log_("Unlisten called for "+b+" "+L),(0,Pe.Uc)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(b,L)&&this.connected_&&this.sendUnlisten_(b,L,l._queryObject,y)}sendUnlisten_(l,y,b,L){this.log_("Unlisten on "+l+" for "+y);const $={p:l};L&&($.q=b,$.t=L),this.sendRequest("n",$)}onDisconnectPut(l,y,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,y,b):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:y,onComplete:b})}onDisconnectMerge(l,y,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,y,b):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:y,onComplete:b})}onDisconnectCancel(l,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,y):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:y})}sendOnDisconnect_(l,y,b,L){const $={p:y,d:b};this.log_("onDisconnect "+l,$),this.sendRequest(l,$,ie=>{L&&setTimeout(()=>{L(ie.s,ie.d)},Math.floor(0))})}put(l,y,b,L){this.putInternal("p",l,y,b,L)}merge(l,y,b,L){this.putInternal("m",l,y,b,L)}putInternal(l,y,b,L,$){this.initConnection_();const ie={p:y,d:b};void 0!==$&&(ie.h=$),this.outstandingPuts_.push({action:l,request:ie,onComplete:L}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+y)}sendPut_(l){const y=this.outstandingPuts_[l].action,b=this.outstandingPuts_[l].request,L=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(y,b,$=>{this.log_(y+" response",$),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),L&&L($.s,$.d)})}reportStats(l){if(this.connected_){const y={c:l};this.log_("reportStats",y),this.sendRequest("s",y,b=>{"ok"!==b.s&&this.log_("reportStats","Error sending stats: "+b.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,Pe.i)(l));const y=l.r,b=this.requestCBHash_[y];b&&(delete this.requestCBHash_[y],b(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,y){this.log_("handleServerMessage",l,y),"d"===l?this.onDataUpdate_(y.p,y.d,!1,y.t):"m"===l?this.onDataUpdate_(y.p,y.d,!0,y.t):"c"===l?this.onListenRevoked_(y.p,y.q):"ac"===l?this.onAuthRevoked_(y.s,y.d):"apc"===l?this.onAppCheckRevoked_(y.s,y.d):"sd"===l?this.onSecurityDebugPacket_(y):vr("Unrecognized action received from server: "+(0,Pe.i)(l)+"\nAre you using the latest client?")}onReady_(l,y){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=y,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,Pe.Uc)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let y=Math.max(0,this.reconnectDelay_-l);y=Math.random()*y,this.log_("Trying to reconnect in "+y+"ms"),this.scheduleConnect_(y),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,Dr.c)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const y=l.onDataMessage_.bind(l),b=l.onReady_.bind(l),L=l.onRealtimeDisconnect_.bind(l),$=l.id+":"+p.nextConnectionId_++,ie=l.lastSessionId;let pe=!1,we=null;const Et=function(){we?we.close():(pe=!0,L())};l.realtime_={close:Et,sendRequest:function(_n){(0,Pe.Uc)(we,"sendRequest call when we're not connected not allowed."),we.sendRequest(_n)}};const Mt=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[_n,jn]=yield Promise.all([l.authTokenProvider_.getToken(Mt),l.appCheckTokenProvider_.getToken(Mt)]);pe?an("getToken() completed but was canceled"):(an("getToken() completed. Creating connection."),l.authToken_=_n&&_n.accessToken,l.appCheckToken_=jn&&jn.token,we=new un($,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,y,b,L,mi=>{Vn(mi+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},ie))}catch(_n){l.log_("Failed to get token: "+_n),pe||(l.repoInfo_.nodeAdmin&&Vn(_n),Et())}}})()}interrupt(l){an("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){an("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,Pe.t7)(this.interruptReasons_)&&(this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const y=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:y})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const y=this.outstandingPuts_[l];y&&"h"in y.request&&y.queued&&(y.onComplete&&y.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,y){let b;b=y?y.map($=>Di($)).join("$"):"default";const L=this.removeListen_(l,b);L&&L.onComplete&&L.onComplete("permission_denied")}removeListen_(l,y){const b=new Rn(l).toString();let L;if(this.listens.has(b)){const $=this.listens.get(b);L=$.get(y),$.delete(y),0===$.size&&this.listens.delete(b)}else L=void 0;return L}onAuthRevoked_(l,y){an("Auth token revoked: "+l+"/"+y),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,y){an("App check token revoked: "+l+"/"+y),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const y of l.values())this.sendListen_(y);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let y="js";(0,Pe.iw)()&&(y=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+y+"."+rn.replace(/\./g,"-")]=1,(0,Pe.AV)()?l["framework.cordova"]=1:(0,Pe.AL)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=os.getInstance().currentlyOnline();return(0,Pe.t7)(this.interruptReasons_)&&l}}return p.nextPersistentConnectionId_=0,p.nextConnectionId_=0,p})();class hr{constructor(d,l){this.name=d,this.node=l}static Wrap(d,l){return new hr(d,l)}}class _a{getCompare(){return this.compare.bind(this)}indexedValueChanged(d,l){const y=new hr(qn,d),b=new hr(qn,l);return 0!==this.compare(y,b)}minPost(){return hr.MIN}}class qo extends _a{static get __EMPTY_NODE(){return mc}static set __EMPTY_NODE(d){mc=d}compare(d,l){return $n(d.name,l.name)}isDefinedOn(d){throw(0,Pe.Y9)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(d,l){return!1}minPost(){return hr.MIN}maxPost(){return new hr(ei,mc)}makePost(d,l){return(0,Pe.Uc)("string"==typeof d,"KeyIndex indexValue must always be a string."),new hr(d,mc)}toString(){return".key"}}const wo=new qo;class Ko{constructor(d,l,y,b,L=null){this.isReverse_=b,this.resultGenerator_=L,this.nodeStack_=[];let $=1;for(;!d.isEmpty();)if($=l?y(d.key,l):1,b&&($*=-1),$<0)d=this.isReverse_?d.left:d.right;else{if(0===$){this.nodeStack_.push(d);break}this.nodeStack_.push(d),d=this.isReverse_?d.right:d.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,d=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value},this.isReverse_)for(d=d.left;!d.isEmpty();)this.nodeStack_.push(d),d=d.right;else for(d=d.right;!d.isEmpty();)this.nodeStack_.push(d),d=d.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const d=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value}}}let vt,Es=(()=>{class p{constructor(l,y,b,L,$){this.key=l,this.value=y,this.color=b??p.RED,this.left=L??hs.EMPTY_NODE,this.right=$??hs.EMPTY_NODE}copy(l,y,b,L,$){return new p(l??this.key,y??this.value,b??this.color,L??this.left,$??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,y,b){let L=this;const $=b(l,L.key);return L=$<0?L.copy(null,null,null,L.left.insert(l,y,b),null):0===$?L.copy(null,y,null,null,null):L.copy(null,null,null,null,L.right.insert(l,y,b)),L.fixUp_()}removeMin_(){if(this.left.isEmpty())return hs.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,y){let b,L;if(b=this,y(l,b.key)<0)!b.left.isEmpty()&&!b.left.isRed_()&&!b.left.left.isRed_()&&(b=b.moveRedLeft_()),b=b.copy(null,null,null,b.left.remove(l,y),null);else{if(b.left.isRed_()&&(b=b.rotateRight_()),!b.right.isEmpty()&&!b.right.isRed_()&&!b.right.left.isRed_()&&(b=b.moveRedRight_()),0===y(l,b.key)){if(b.right.isEmpty())return hs.EMPTY_NODE;L=b.right.min_(),b=b.copy(L.key,L.value,null,null,b.right.removeMin_())}b=b.copy(null,null,null,null,b.right.remove(l,y))}return b.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,p.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,p.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),y=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,y)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return p.RED=!0,p.BLACK=!1,p})();class hs{constructor(d,l=hs.EMPTY_NODE){this.comparator_=d,this.root_=l}insert(d,l){return new hs(this.comparator_,this.root_.insert(d,l,this.comparator_).copy(null,null,Es.BLACK,null,null))}remove(d){return new hs(this.comparator_,this.root_.remove(d,this.comparator_).copy(null,null,Es.BLACK,null,null))}get(d){let l,y=this.root_;for(;!y.isEmpty();){if(l=this.comparator_(d,y.key),0===l)return y.value;l<0?y=y.left:l>0&&(y=y.right)}return null}getPredecessorKey(d){let l,y=this.root_,b=null;for(;!y.isEmpty();){if(l=this.comparator_(d,y.key),0===l){if(y.left.isEmpty())return b?b.key:null;for(y=y.left;!y.right.isEmpty();)y=y.right;return y.key}l<0?y=y.left:l>0&&(b=y,y=y.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(d){return this.root_.inorderTraversal(d)}reverseTraversal(d){return this.root_.reverseTraversal(d)}getIterator(d){return new Ko(this.root_,null,this.comparator_,!1,d)}getIteratorFrom(d,l){return new Ko(this.root_,d,this.comparator_,!1,l)}getReverseIteratorFrom(d,l){return new Ko(this.root_,d,this.comparator_,!0,l)}getReverseIterator(d){return new Ko(this.root_,null,this.comparator_,!0,d)}}function Fs(p,d){return $n(p.name,d.name)}function jc(p,d){return $n(p,d)}hs.EMPTY_NODE=new class vu{copy(d,l,y,b,L){return this}insert(d,l,y){return new Es(d,l,null)}remove(d,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(d){return!1}reverseTraversal(d){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Qa=function(p){return"number"==typeof p?"number:"+As(p):"string:"+p},eo=function(p){if(p.isLeafNode()){const d=p.val();(0,Pe.Uc)("string"==typeof d||"number"==typeof d||"object"==typeof d&&(0,Pe.Y7)(d,".sv"),"Priority must be a string or number.")}else(0,Pe.Uc)(p===vt||p.isEmpty(),"priority of unexpected type.");(0,Pe.Uc)(p===vt||p.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Or,ya,po,Lr=(()=>{class p{constructor(l,y=p.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=y,this.lazyHash_=null,(0,Pe.Uc)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),eo(this.priorityNode_)}static set __childrenNodeConstructor(l){Or=l}static get __childrenNodeConstructor(){return Or}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new p(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:p.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Un(l)?this:".priority"===gn(l)?this.priorityNode_:p.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,y){return null}updateImmediateChild(l,y){return".priority"===l?this.updatePriority(y):y.isEmpty()&&".priority"!==l?this:p.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,y).updatePriority(this.priorityNode_)}updateChild(l,y){const b=gn(l);return null===b?y:y.isEmpty()&&".priority"!==b?this:((0,Pe.Uc)(".priority"!==b||1===Ho(l),".priority must be the last token in a path"),this.updateImmediateChild(b,p.__childrenNodeConstructor.EMPTY_NODE.updateChild(ai(l),y)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,y){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Qa(this.priorityNode_.val())+":");const y=typeof this.value_;l+=y+":",l+="number"===y?As(this.value_):this.value_,this.lazyHash_=ft(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===p.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof p.__childrenNodeConstructor?-1:((0,Pe.Uc)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const y=typeof l.value_,b=typeof this.value_,L=p.VALUE_TYPE_ORDER.indexOf(y),$=p.VALUE_TYPE_ORDER.indexOf(b);return(0,Pe.Uc)(L>=0,"Unknown leaf type: "+y),(0,Pe.Uc)($>=0,"Unknown leaf type: "+b),L===$?"object"===b?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:$-L}withIndex(){return this}isIndexed(){return!0}equals(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))}}return p.VALUE_TYPE_ORDER=["object","boolean","number","string"],p})();const ti=new class Ja extends _a{compare(d,l){const y=d.node.getPriority(),b=l.node.getPriority(),L=y.compareTo(b);return 0===L?$n(d.name,l.name):L}isDefinedOn(d){return!d.getPriority().isEmpty()}indexedValueChanged(d,l){return!d.getPriority().equals(l.getPriority())}minPost(){return hr.MIN}maxPost(){return new hr(ei,new Lr("[PRIORITY-POST]",po))}makePost(d,l){const y=ya(d);return new hr(l,new Lr("[PRIORITY-POST]",y))}toString(){return".priority"}},Gc=Math.log(2);class Is{constructor(d){this.count=parseInt(Math.log(d+1)/Gc,10),this.current_=this.count-1;const b=(L=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=d+1&b}nextBitIsOne(){const d=!(this.bits_&1<<this.current_);return this.current_--,d}}const hi=function(p,d,l,y){p.sort(d);const b=function(pe,we){const Et=we-pe;let It,Mt;if(0===Et)return null;if(1===Et)return It=p[pe],Mt=l?l(It):It,new Es(Mt,It.node,Es.BLACK,null,null);{const _n=parseInt(Et/2,10)+pe,jn=b(pe,_n),mi=b(_n+1,we);return It=p[_n],Mt=l?l(It):It,new Es(Mt,It.node,Es.BLACK,jn,mi)}},ie=function(pe){let we=null,Et=null,It=p.length;const Mt=function(jn,mi){const uo=It-jn,Gl=It;It-=jn;const vh=b(uo+1,Gl),ol=p[uo],gy=l?l(ol):ol;_n(new Es(gy,ol.node,mi,null,vh))},_n=function(jn){we?(we.left=jn,we=jn):(Et=jn,we=jn)};for(let jn=0;jn<pe.count;++jn){const mi=pe.nextBitIsOne(),uo=Math.pow(2,pe.count-(jn+1));mi?Mt(uo,Es.BLACK):(Mt(uo,Es.BLACK),Mt(uo,Es.RED))}return Et}(new Is(p.length));return new hs(y||d,ie)};let Ls;const Er={};class A{constructor(d,l){this.indexes_=d,this.indexSet_=l}static get Default(){return(0,Pe.Uc)(Er&&ti,"ChildrenNode.ts has not been loaded"),Ls=Ls||new A({".priority":Er},{".priority":ti}),Ls}get(d){const l=(0,Pe.o5)(this.indexes_,d);if(!l)throw new Error("No index defined for "+d);return l instanceof hs?l:null}hasIndex(d){return(0,Pe.Y7)(this.indexSet_,d.toString())}addIndex(d,l){(0,Pe.Uc)(d!==wo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const y=[];let b=!1;const L=l.getIterator(hr.Wrap);let ie,$=L.getNext();for(;$;)b=b||d.isDefinedOn($.node),y.push($),$=L.getNext();ie=b?hi(y,d.getCompare()):Er;const pe=d.toString(),we=Object.assign({},this.indexSet_);we[pe]=d;const Et=Object.assign({},this.indexes_);return Et[pe]=ie,new A(Et,we)}addToIndexes(d,l){const y=(0,Pe.kH)(this.indexes_,(b,L)=>{const $=(0,Pe.o5)(this.indexSet_,L);if((0,Pe.Uc)($,"Missing index implementation for "+L),b===Er){if($.isDefinedOn(d.node)){const ie=[],pe=l.getIterator(hr.Wrap);let we=pe.getNext();for(;we;)we.name!==d.name&&ie.push(we),we=pe.getNext();return ie.push(d),hi(ie,$.getCompare())}return Er}{const ie=l.get(d.name);let pe=b;return ie&&(pe=pe.remove(new hr(d.name,ie))),pe.insert(d,d.node)}});return new A(y,this.indexSet_)}removeFromIndexes(d,l){const y=(0,Pe.kH)(this.indexes_,b=>{if(b===Er)return b;{const L=l.get(d.name);return L?b.remove(new hr(d.name,L)):b}});return new A(y,this.indexSet_)}}let q,N=(()=>{class p{constructor(l,y,b){this.children_=l,this.priorityNode_=y,this.indexMap_=b,this.lazyHash_=null,this.priorityNode_&&eo(this.priorityNode_),this.children_.isEmpty()&&(0,Pe.Uc)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return q||(q=new p(new hs(jc),null,A.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||q}updatePriority(l){return this.children_.isEmpty()?this:new p(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const y=this.children_.get(l);return null===y?q:y}}getChild(l){const y=gn(l);return null===y?this:this.getImmediateChild(y).getChild(ai(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,y){if((0,Pe.Uc)(y,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(y);{const b=new hr(l,y);let L,$;y.isEmpty()?(L=this.children_.remove(l),$=this.indexMap_.removeFromIndexes(b,this.children_)):(L=this.children_.insert(l,y),$=this.indexMap_.addToIndexes(b,this.children_));const ie=L.isEmpty()?q:this.priorityNode_;return new p(L,ie,$)}}updateChild(l,y){const b=gn(l);if(null===b)return y;{(0,Pe.Uc)(".priority"!==gn(l)||1===Ho(l),".priority must be the last token in a path");const L=this.getImmediateChild(b).updateChild(ai(l),y);return this.updateImmediateChild(b,L)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const y={};let b=0,L=0,$=!0;if(this.forEachChild(ti,(ie,pe)=>{y[ie]=pe.val(l),b++,$&&p.INTEGER_REGEXP_.test(ie)?L=Math.max(L,Number(ie)):$=!1}),!l&&$&&L<2*b){const ie=[];for(const pe in y)ie[pe]=y[pe];return ie}return l&&!this.getPriority().isEmpty()&&(y[".priority"]=this.getPriority().val()),y}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Qa(this.getPriority().val())+":"),this.forEachChild(ti,(y,b)=>{const L=b.hash();""!==L&&(l+=":"+y+":"+L)}),this.lazyHash_=""===l?"":ft(l)}return this.lazyHash_}getPredecessorChildName(l,y,b){const L=this.resolveIndex_(b);if(L){const $=L.getPredecessorKey(new hr(l,y));return $?$.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const y=this.resolveIndex_(l);if(y){const b=y.minKey();return b&&b.name}return this.children_.minKey()}getFirstChild(l){const y=this.getFirstChildName(l);return y?new hr(y,this.children_.get(y)):null}getLastChildName(l){const y=this.resolveIndex_(l);if(y){const b=y.maxKey();return b&&b.name}return this.children_.maxKey()}getLastChild(l){const y=this.getLastChildName(l);return y?new hr(y,this.children_.get(y)):null}forEachChild(l,y){const b=this.resolveIndex_(l);return b?b.inorderTraversal(L=>y(L.name,L.node)):this.children_.inorderTraversal(y)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,y){const b=this.resolveIndex_(y);if(b)return b.getIteratorFrom(l,L=>L);{const L=this.children_.getIteratorFrom(l.name,hr.Wrap);let $=L.peek();for(;null!=$&&y.compare($,l)<0;)L.getNext(),$=L.peek();return L}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,y){const b=this.resolveIndex_(y);if(b)return b.getReverseIteratorFrom(l,L=>L);{const L=this.children_.getReverseIteratorFrom(l.name,hr.Wrap);let $=L.peek();for(;null!=$&&y.compare($,l)>0;)L.getNext(),$=L.peek();return L}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===de?-1:0}withIndex(l){if(l===wo||this.indexMap_.hasIndex(l))return this;{const y=this.indexMap_.addIndex(l,this.children_);return new p(this.children_,this.priorityNode_,y)}}isIndexed(l){return l===wo||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const y=l;if(this.getPriority().equals(y.getPriority())){if(this.children_.count()===y.children_.count()){const b=this.getIterator(ti),L=y.getIterator(ti);let $=b.getNext(),ie=L.getNext();for(;$&&ie;){if($.name!==ie.name||!$.node.equals(ie.node))return!1;$=b.getNext(),ie=L.getNext()}return null===$&&null===ie}return!1}return!1}}resolveIndex_(l){return l===wo?null:this.indexMap_.get(l.toString())}}return p.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,p})();const de=new class W extends N{constructor(){super(new hs(jc),N.EMPTY_NODE,A.Default)}compareTo(d){return d===this?0:1}equals(d){return d===this}getPriority(){return this}getImmediateChild(d){return N.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(hr,{MIN:{value:new hr(qn,N.EMPTY_NODE)},MAX:{value:new hr(ei,de)}}),qo.__EMPTY_NODE=N.EMPTY_NODE,Lr.__childrenNodeConstructor=N,function ar(p){vt=p}(de),function $c(p){po=p}(de);const et=!0;function pt(p,d=null){if(null===p)return N.EMPTY_NODE;if("object"==typeof p&&".priority"in p&&(d=p[".priority"]),(0,Pe.Uc)(null===d||"string"==typeof d||"number"==typeof d||"object"==typeof d&&".sv"in d,"Invalid priority type found: "+typeof d),"object"==typeof p&&".value"in p&&null!==p[".value"]&&(p=p[".value"]),"object"!=typeof p||".sv"in p)return new Lr(p,pt(d));if(p instanceof Array||!et){let l=N.EMPTY_NODE;return Yr(p,(y,b)=>{if((0,Pe.Y7)(p,y)&&"."!==y.substring(0,1)){const L=pt(b);(L.isLeafNode()||!L.isEmpty())&&(l=l.updateImmediateChild(y,L))}}),l.updatePriority(pt(d))}{const l=[];let y=!1;if(Yr(p,($,ie)=>{if("."!==$.substring(0,1)){const pe=pt(ie);pe.isEmpty()||(y=y||!pe.getPriority().isEmpty(),l.push(new hr($,pe)))}}),0===l.length)return N.EMPTY_NODE;const L=hi(l,Fs,$=>$.name,jc);if(y){const $=hi(l,ti.getCompare());return new N(L,pt(d),new A({".priority":$},{".priority":ti}))}return new N(L,pt(d),A.Default)}}!function to(p){ya=p}(pt);class ln extends _a{constructor(d){super(),this.indexPath_=d,(0,Pe.Uc)(!Un(d)&&".priority"!==gn(d),"Can't create PathIndex with empty path or .priority key")}extractChild(d){return d.getChild(this.indexPath_)}isDefinedOn(d){return!d.getChild(this.indexPath_).isEmpty()}compare(d,l){const y=this.extractChild(d.node),b=this.extractChild(l.node),L=y.compareTo(b);return 0===L?$n(d.name,l.name):L}makePost(d,l){const y=pt(d),b=N.EMPTY_NODE.updateChild(this.indexPath_,y);return new hr(l,b)}maxPost(){const d=N.EMPTY_NODE.updateChild(this.indexPath_,de);return new hr(ei,d)}toString(){return Qs(this.indexPath_,0).join("/")}}const Gr=new class Xr extends _a{compare(d,l){const y=d.node.compareTo(l.node);return 0===y?$n(d.name,l.name):y}isDefinedOn(d){return!0}indexedValueChanged(d,l){return!d.equals(l)}minPost(){return hr.MIN}maxPost(){return hr.MAX}makePost(d,l){const y=pt(d);return new hr(l,y)}toString(){return".value"}};function Pr(p,d,l){return{type:"child_changed",snapshotNode:d,childName:p,oldSnap:l}}class Jn{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ti}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Pe.Uc)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Pe.Uc)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qn}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Pe.Uc)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Pe.Uc)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ei}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Pe.Uc)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ti}copy(){const d=new Jn;return d.limitSet_=this.limitSet_,d.limit_=this.limit_,d.startSet_=this.startSet_,d.startAfterSet_=this.startAfterSet_,d.indexStartValue_=this.indexStartValue_,d.startNameSet_=this.startNameSet_,d.indexStartName_=this.indexStartName_,d.endSet_=this.endSet_,d.endBeforeSet_=this.endBeforeSet_,d.indexEndValue_=this.indexEndValue_,d.endNameSet_=this.endNameSet_,d.indexEndName_=this.indexEndName_,d.index_=this.index_,d.viewFrom_=this.viewFrom_,d}}function on(p){const d={};if(p.isDefault())return d;let l;if(p.index_===ti?l="$priority":p.index_===Gr?l="$value":p.index_===wo?l="$key":((0,Pe.Uc)(p.index_ instanceof ln,"Unrecognized index type!"),l=p.index_.toString()),d.orderBy=(0,Pe.i)(l),p.startSet_){const y=p.startAfterSet_?"startAfter":"startAt";d[y]=(0,Pe.i)(p.indexStartValue_),p.startNameSet_&&(d[y]+=","+(0,Pe.i)(p.indexStartName_))}if(p.endSet_){const y=p.endBeforeSet_?"endBefore":"endAt";d[y]=(0,Pe.i)(p.indexEndValue_),p.endNameSet_&&(d[y]+=","+(0,Pe.i)(p.indexEndName_))}return p.limitSet_&&(p.isViewFromLeft()?d.limitToFirst=p.limit_:d.limitToLast=p.limit_),d}function hn(p){const d={};if(p.startSet_&&(d.sp=p.indexStartValue_,p.startNameSet_&&(d.sn=p.indexStartName_),d.sin=!p.startAfterSet_),p.endSet_&&(d.ep=p.indexEndValue_,p.endNameSet_&&(d.en=p.indexEndName_),d.ein=!p.endBeforeSet_),p.limitSet_){d.l=p.limit_;let l=p.viewFrom_;""===l&&(l=p.isViewFromLeft()?"l":"r"),d.vf=l}return p.index_!==ti&&(d.i=p.index_.toString()),d}class Eu extends Qn{constructor(d,l,y,b){super(),this.repoInfo_=d,this.onDataUpdate_=l,this.authTokenProvider_=y,this.appCheckTokenProvider_=b,this.log_=zn("p:rest:"),this.listens_={}}reportStats(d){throw new Error("Method not implemented.")}static getListenId_(d,l){return void 0!==l?"tag$"+l:((0,Pe.Uc)(d._queryParams.isDefault(),"should have a tag if it's not a default query."),d._path.toString())}listen(d,l,y,b){const L=d._path.toString();this.log_("Listen called for "+L+" "+d._queryIdentifier);const $=Eu.getListenId_(d,y),ie={};this.listens_[$]=ie;const pe=on(d._queryParams);this.restRequest_(L+".json",pe,(we,Et)=>{let It=Et;if(404===we&&(It=null,we=null),null===we&&this.onDataUpdate_(L,It,!1,y),(0,Pe.o5)(this.listens_,$)===ie){let Mt;Mt=we?401===we?"permission_denied":"rest_error:"+we:"ok",b(Mt,null)}})}unlisten(d,l){const y=Eu.getListenId_(d,l);delete this.listens_[y]}get(d){const l=on(d._queryParams),y=d._path.toString(),b=new Pe.o9;return this.restRequest_(y+".json",l,(L,$)=>{let ie=$;404===L&&(ie=null,L=null),null===L?(this.onDataUpdate_(y,ie,!1,null),b.resolve(ie)):b.reject(new Error(ie))}),b.promise}refreshAuthToken(d){}restRequest_(d,l={},y){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([b,L])=>{b&&b.accessToken&&(l.auth=b.accessToken),L&&L.token&&(l.ac=L.token);const $=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+d+"?ns="+this.repoInfo_.namespace+(0,Pe.ik)(l);this.log_("Sending REST request for "+$);const ie=new XMLHttpRequest;ie.onreadystatechange=()=>{if(y&&4===ie.readyState){this.log_("REST Response for "+$+" received. status:",ie.status,"response:",ie.responseText);let pe=null;if(ie.status>=200&&ie.status<300){try{pe=(0,Pe.GI)(ie.responseText)}catch{Vn("Failed to parse JSON response for "+$+": "+ie.responseText)}y(null,pe)}else 401!==ie.status&&404!==ie.status&&Vn("Got unsuccessful REST response for "+$+" Status: "+ie.status),y(ie.status);y=null}},ie.open("GET",$,!0),ie.send()})}}class zt{constructor(){this.rootNode_=N.EMPTY_NODE}getNode(d){return this.rootNode_.getChild(d)}updateSnapshot(d,l){this.rootNode_=this.rootNode_.updateChild(d,l)}}function ot(){return{value:null,children:new Map}}function Pt(p,d,l){if(Un(d))p.value=l,p.children.clear();else if(null!==p.value)p.value=p.value.updateChild(d,l);else{const y=gn(d);p.children.has(y)||p.children.set(y,ot()),Pt(p.children.get(y),d=ai(d),l)}}function fs(p,d,l){null!==p.value?l(d,p.value):function _c(p,d){p.children.forEach((l,y)=>{d(y,l)})}(p,(y,b)=>{fs(b,new Rn(d.toString()+"/"+y),l)})}class yl{constructor(d){this.collection_=d,this.last_=null}get(){const d=this.collection_.get(),l=Object.assign({},d);return this.last_&&Yr(this.last_,(y,b)=>{l[y]=l[y]-b}),this.last_=d,l}}class Ud{constructor(d,l){this.server_=l,this.statsToReport_={},this.statsListener_=new yl(d);const y=1e4+2e4*Math.random();oi(this.reportStats_.bind(this),Math.floor(y))}reportStats_(){const d=this.statsListener_.get(),l={};let y=!1;Yr(d,(b,L)=>{L>0&&(0,Pe.Y7)(this.statsToReport_,b)&&(l[b]=L,y=!0)}),y&&this.server_.reportStats(l),oi(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var go=function(p){return p[p.OVERWRITE=0]="OVERWRITE",p[p.MERGE=1]="MERGE",p[p.ACK_USER_WRITE=2]="ACK_USER_WRITE",p[p.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",p}(go||{});function ec(p){return{fromUser:!1,fromServer:!0,queryId:p,tagged:!0}}class Sn{constructor(d,l,y){this.path=d,this.affectedTree=l,this.revert=y,this.type=go.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(d){if(Un(this.path)){if(null!=this.affectedTree.value)return(0,Pe.Uc)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new Rn(d));return new Sn(Sr(),l,this.revert)}}return(0,Pe.Uc)(gn(this.path)===d,"operationForChild called for unrelated child."),new Sn(ai(this.path),this.affectedTree,this.revert)}}class Yo{constructor(d,l,y){this.source=d,this.path=l,this.snap=y,this.type=go.OVERWRITE}operationForChild(d){return Un(this.path)?new Yo(this.source,Sr(),this.snap.getImmediateChild(d)):new Yo(this.source,ai(this.path),this.snap)}}class gi{constructor(d,l,y){this.source=d,this.path=l,this.children=y,this.type=go.MERGE}operationForChild(d){if(Un(this.path)){const l=this.children.subtree(new Rn(d));return l.isEmpty()?null:l.value?new Yo(this.source,Sr(),l.value):new gi(this.source,Sr(),l)}return(0,Pe.Uc)(gn(this.path)===d,"Can't get a merge for a child not on the path of the operation"),new gi(this.source,ai(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class mn{constructor(d,l,y){this.node_=d,this.fullyInitialized_=l,this.filtered_=y}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(d){if(Un(d))return this.isFullyInitialized()&&!this.filtered_;const l=gn(d);return this.isCompleteForChild(l)}isCompleteForChild(d){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(d)}getNode(){return this.node_}}function Na(p,d,l,y,b,L){const $=y.filter(ie=>ie.type===l);$.sort((ie,pe)=>function Jt(p,d,l){if(null==d.childName||null==l.childName)throw(0,Pe.Y9)("Should only compare child_ events.");const y=new hr(d.childName,d.snapshotNode),b=new hr(l.childName,l.snapshotNode);return p.index_.compare(y,b)}(p,ie,pe)),$.forEach(ie=>{const pe=function Ii(p,d,l){return"value"===d.type||"child_removed"===d.type||(d.prevName=l.getPredecessorChildName(d.childName,d.snapshotNode,p.index_)),d}(p,ie,L);b.forEach(we=>{we.respondsTo(ie.type)&&d.push(we.createEvent(pe,p.query_))})})}function io(p,d){return{eventCache:p,serverCache:d}}function ka(p,d,l,y){return io(new mn(d,l,y),p.serverCache)}function Qo(p,d,l,y){return io(p.eventCache,new mn(d,l,y))}function Fo(p){return p.eventCache.isFullyInitialized()?p.eventCache.getNode():null}function pr(p){return p.serverCache.isFullyInitialized()?p.serverCache.getNode():null}let vl;class ri{constructor(d,l=(()=>(vl||(vl=new hs(fr)),vl))()){this.value=d,this.children=l}static fromObject(d){let l=new ri(null);return Yr(d,(y,b)=>{l=l.set(new Rn(y),b)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(d,l){if(null!=this.value&&l(this.value))return{path:Sr(),value:this.value};if(Un(d))return null;{const y=gn(d),b=this.children.get(y);if(null!==b){const L=b.findRootMostMatchingPathAndValue(ai(d),l);return null!=L?{path:dr(new Rn(y),L.path),value:L.value}:null}return null}}findRootMostValueAndPath(d){return this.findRootMostMatchingPathAndValue(d,()=>!0)}subtree(d){if(Un(d))return this;{const l=gn(d),y=this.children.get(l);return null!==y?y.subtree(ai(d)):new ri(null)}}set(d,l){if(Un(d))return new ri(l,this.children);{const y=gn(d),L=(this.children.get(y)||new ri(null)).set(ai(d),l),$=this.children.insert(y,L);return new ri(this.value,$)}}remove(d){if(Un(d))return this.children.isEmpty()?new ri(null):new ri(null,this.children);{const l=gn(d),y=this.children.get(l);if(y){const b=y.remove(ai(d));let L;return L=b.isEmpty()?this.children.remove(l):this.children.insert(l,b),null===this.value&&L.isEmpty()?new ri(null):new ri(this.value,L)}return this}}get(d){if(Un(d))return this.value;{const l=gn(d),y=this.children.get(l);return y?y.get(ai(d)):null}}setTree(d,l){if(Un(d))return l;{const y=gn(d),L=(this.children.get(y)||new ri(null)).setTree(ai(d),l);let $;return $=L.isEmpty()?this.children.remove(y):this.children.insert(y,L),new ri(this.value,$)}}fold(d){return this.fold_(Sr(),d)}fold_(d,l){const y={};return this.children.inorderTraversal((b,L)=>{y[b]=L.fold_(dr(d,b),l)}),l(d,this.value,y)}findOnPath(d,l){return this.findOnPath_(d,Sr(),l)}findOnPath_(d,l,y){const b=!!this.value&&y(l,this.value);if(b)return b;if(Un(d))return null;{const L=gn(d),$=this.children.get(L);return $?$.findOnPath_(ai(d),dr(l,L),y):null}}foreachOnPath(d,l){return this.foreachOnPath_(d,Sr(),l)}foreachOnPath_(d,l,y){if(Un(d))return this;{this.value&&y(l,this.value);const b=gn(d),L=this.children.get(b);return L?L.foreachOnPath_(ai(d),dr(l,b),y):new ri(null)}}foreach(d){this.foreach_(Sr(),d)}foreach_(d,l){this.children.inorderTraversal((y,b)=>{b.foreach_(dr(d,y),l)}),this.value&&l(d,this.value)}foreachChild(d){this.children.inorderTraversal((l,y)=>{y.value&&d(l,y.value)})}}class Lo{constructor(d){this.writeTree_=d}static empty(){return new Lo(new ri(null))}}function Cs(p,d,l){if(Un(d))return new Lo(new ri(l));{const y=p.writeTree_.findRootMostValueAndPath(d);if(null!=y){const b=y.path;let L=y.value;const $=Ji(b,d);return L=L.updateChild($,l),new Lo(p.writeTree_.set(b,L))}{const b=new ri(l),L=p.writeTree_.setTree(d,b);return new Lo(L)}}}function Hc(p,d,l){let y=p;return Yr(l,(b,L)=>{y=Cs(y,dr(d,b),L)}),y}function tc(p,d){if(Un(d))return Lo.empty();{const l=p.writeTree_.setTree(d,new ri(null));return new Lo(l)}}function yc(p,d){return null!=so(p,d)}function so(p,d){const l=p.writeTree_.findRootMostValueAndPath(d);return null!=l?p.writeTree_.get(l.path).getChild(Ji(l.path,d)):null}function Iu(p){const d=[],l=p.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(ti,(y,b)=>{d.push(new hr(y,b))}):p.writeTree_.children.inorderTraversal((y,b)=>{null!=b.value&&d.push(new hr(y,b.value))}),d}function Ke(p,d){if(Un(d))return p;{const l=so(p,d);return new Lo(null!=l?new ri(l):p.writeTree_.subtree(d))}}function gr(p){return p.writeTree_.isEmpty()}function cs(p,d){return w(Sr(),p.writeTree_,d)}function w(p,d,l){if(null!=d.value)return l.updateChild(p,d.value);{let y=null;return d.children.inorderTraversal((b,L)=>{".priority"===b?((0,Pe.Uc)(null!==L.value,"Priority writes must always be leaf nodes"),y=L.value):l=w(dr(p,b),L,l)}),!l.getChild(p).isEmpty()&&null!==y&&(l=l.updateChild(dr(p,".priority"),y)),l}}function M(p,d){return xr(d,p)}function fe(p,d){if(p.snap)return ls(p.path,d);for(const l in p.children)if(p.children.hasOwnProperty(l)&&ls(dr(p.path,l),d))return!0;return!1}function Je(p){return p.visible}function Gt(p,d,l){let y=Lo.empty();for(let b=0;b<p.length;++b){const L=p[b];if(d(L)){const $=L.path;let ie;if(L.snap)ls(l,$)?(ie=Ji(l,$),y=Cs(y,ie,L.snap)):ls($,l)&&(ie=Ji($,l),y=Cs(y,Sr(),L.snap.getChild(ie)));else{if(!L.children)throw(0,Pe.Y9)("WriteRecord should have .snap or .children");if(ls(l,$))ie=Ji(l,$),y=Hc(y,ie,L.children);else if(ls($,l))if(ie=Ji($,l),Un(ie))y=Hc(y,Sr(),L.children);else{const pe=(0,Pe.o5)(L.children,gn(ie));if(pe){const we=pe.getChild(ai(ie));y=Cs(y,Sr(),we)}}}}}return y}function jt(p,d,l,y,b){if(y||b){const L=Ke(p.visibleWrites,d);return!b&&gr(L)?l:b||null!=l||yc(L,Sr())?cs(Gt(p.allWrites,function(we){return(we.visible||b)&&(!y||!~y.indexOf(we.writeId))&&(ls(we.path,d)||ls(d,we.path))},d),l||N.EMPTY_NODE):null}{const L=so(p.visibleWrites,d);if(null!=L)return L;{const $=Ke(p.visibleWrites,d);return gr($)?l:null!=l||yc($,Sr())?cs($,l||N.EMPTY_NODE):null}}}function Do(p,d,l,y){return jt(p.writeTree,p.treePath,d,l,y)}function zc(p,d){return function Xn(p,d,l){let y=N.EMPTY_NODE;const b=so(p.visibleWrites,d);if(b)return b.isLeafNode()||b.forEachChild(ti,(L,$)=>{y=y.updateImmediateChild(L,$)}),y;if(l){const L=Ke(p.visibleWrites,d);return l.forEachChild(ti,($,ie)=>{const pe=cs(Ke(L,new Rn($)),ie);y=y.updateImmediateChild($,pe)}),Iu(L).forEach($=>{y=y.updateImmediateChild($.name,$.node)}),y}return Iu(Ke(p.visibleWrites,d)).forEach($=>{y=y.updateImmediateChild($.name,$.node)}),y}(p.writeTree,p.treePath,d)}function Wu(p,d,l,y){return function Ri(p,d,l,y,b){(0,Pe.Uc)(y||b,"Either existingEventSnap or existingServerSnap must exist");const L=dr(d,l);if(yc(p.visibleWrites,L))return null;{const $=Ke(p.visibleWrites,L);return gr($)?b.getChild(l):cs($,b.getChild(l))}}(p.writeTree,p.treePath,d,l,y)}function Hu(p,d){return function Fa(p,d){return so(p.visibleWrites,d)}(p.writeTree,dr(p.treePath,d))}function qc(p,d,l){return function qi(p,d,l,y){const b=dr(d,l),L=so(p.visibleWrites,b);return null!=L?L:y.isCompleteForChild(l)?cs(Ke(p.visibleWrites,b),y.getNode().getImmediateChild(l)):null}(p.writeTree,p.treePath,d,l)}function ir(p,d){return xr(dr(p.treePath,d),p.writeTree)}function xr(p,d){return{treePath:p,writeTree:d}}class jd{constructor(){this.changeMap=new Map}trackChildChange(d){const l=d.type,y=d.childName;(0,Pe.Uc)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,Pe.Uc)(".priority"!==y,"Only non-priority child changes can be tracked.");const b=this.changeMap.get(y);if(b){const L=b.type;if("child_added"===l&&"child_removed"===L)this.changeMap.set(y,Pr(y,d.snapshotNode,b.snapshotNode));else if("child_removed"===l&&"child_added"===L)this.changeMap.delete(y);else if("child_removed"===l&&"child_changed"===L)this.changeMap.set(y,function ci(p,d){return{type:"child_removed",snapshotNode:d,childName:p}}(y,b.oldSnap));else if("child_changed"===l&&"child_added"===L)this.changeMap.set(y,function Kn(p,d){return{type:"child_added",snapshotNode:d,childName:p}}(y,d.snapshotNode));else{if("child_changed"!==l||"child_changed"!==L)throw(0,Pe.Y9)("Illegal combination of changes: "+d+" occurred after "+b);this.changeMap.set(y,Pr(y,d.snapshotNode,b.oldSnap))}}else this.changeMap.set(y,d)}getChanges(){return Array.from(this.changeMap.values())}}const $d=new class Kh{getCompleteChild(d){return null}getChildAfterChild(d,l,y){return null}};class Gd{constructor(d,l,y=null){this.writes_=d,this.viewCache_=l,this.optCompleteServerCache_=y}getCompleteChild(d){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(d))return l.getNode().getImmediateChild(d);{const y=null!=this.optCompleteServerCache_?new mn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return qc(this.writes_,d,y)}}getChildAfterChild(d,l,y){const b=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:pr(this.viewCache_),L=function gp(p,d,l,y,b,L){return function La(p,d,l,y,b,L,$){let ie;const pe=Ke(p.visibleWrites,d),we=so(pe,Sr());if(null!=we)ie=we;else{if(null==l)return[];ie=cs(pe,l)}if(ie=ie.withIndex($),ie.isEmpty()||ie.isLeafNode())return[];{const Et=[],It=$.getCompare(),Mt=L?ie.getReverseIteratorFrom(y,$):ie.getIteratorFrom(y,$);let _n=Mt.getNext();for(;_n&&Et.length<b;)0!==It(_n,y)&&Et.push(_n),_n=Mt.getNext();return Et}}(p.writeTree,p.treePath,d,l,y,b,L)}(this.writes_,b,l,1,y,d);return 0===L.length?null:L[0]}}function oo(p,d,l,y,b,L){const $=d.eventCache;if(null!=Hu(y,l))return d;{let ie,pe;if(Un(l))if((0,Pe.Uc)(d.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),d.serverCache.isFiltered()){const we=pr(d),It=zc(y,we instanceof N?we:N.EMPTY_NODE);ie=p.filter.updateFullNode(d.eventCache.getNode(),It,L)}else{const we=Do(y,pr(d));ie=p.filter.updateFullNode(d.eventCache.getNode(),we,L)}else{const we=gn(l);if(".priority"===we){(0,Pe.Uc)(1===Ho(l),"Can't have a priority with additional path components");const Et=$.getNode();pe=d.serverCache.getNode();const It=Wu(y,l,Et,pe);ie=null!=It?p.filter.updatePriority(Et,It):$.getNode()}else{const Et=ai(l);let It;if($.isCompleteForChild(we)){pe=d.serverCache.getNode();const Mt=Wu(y,l,$.getNode(),pe);It=null!=Mt?$.getNode().getImmediateChild(we).updateChild(Et,Mt):$.getNode().getImmediateChild(we)}else It=qc(y,we,d.serverCache);ie=null!=It?p.filter.updateChild($.getNode(),we,It,Et,b,L):$.getNode()}}return ka(d,ie,$.isFullyInitialized()||Un(l),p.filter.filtersNodes())}}function zu(p,d,l,y,b,L,$,ie){const pe=d.serverCache;let we;const Et=$?p.filter:p.filter.getIndexedFilter();if(Un(l))we=Et.updateFullNode(pe.getNode(),y,null);else if(Et.filtersNodes()&&!pe.isFiltered()){const _n=pe.getNode().updateChild(l,y);we=Et.updateFullNode(pe.getNode(),_n,null)}else{const _n=gn(l);if(!pe.isCompleteForPath(l)&&Ho(l)>1)return d;const jn=ai(l),uo=pe.getNode().getImmediateChild(_n).updateChild(jn,y);we=".priority"===_n?Et.updatePriority(pe.getNode(),uo):Et.updateChild(pe.getNode(),_n,uo,jn,$d,null)}const It=Qo(d,we,pe.isFullyInitialized()||Un(l),Et.filtersNodes());return oo(p,It,l,b,new Gd(b,It,L),ie)}function qu(p,d,l,y,b,L,$){const ie=d.eventCache;let pe,we;const Et=new Gd(b,d,L);if(Un(l))we=p.filter.updateFullNode(d.eventCache.getNode(),y,$),pe=ka(d,we,!0,p.filter.filtersNodes());else{const It=gn(l);if(".priority"===It)we=p.filter.updatePriority(d.eventCache.getNode(),y),pe=ka(d,we,ie.isFullyInitialized(),ie.isFiltered());else{const Mt=ai(l),_n=ie.getNode().getImmediateChild(It);let jn;if(Un(Mt))jn=y;else{const mi=Et.getCompleteChild(It);jn=null!=mi?".priority"===Ma(Mt)&&mi.getChild(xo(Mt)).isEmpty()?mi:mi.updateChild(Mt,y):N.EMPTY_NODE}pe=_n.equals(jn)?d:ka(d,p.filter.updateChild(ie.getNode(),It,jn,Mt,Et,$),ie.isFullyInitialized(),p.filter.filtersNodes())}}return pe}function Yh(p,d){return p.eventCache.isCompleteForChild(d)}function Kc(p,d,l){return l.foreach((y,b)=>{d=d.updateChild(y,b)}),d}function Cu(p,d,l,y,b,L,$,ie){if(d.serverCache.getNode().isEmpty()&&!d.serverCache.isFullyInitialized())return d;let we,pe=d;we=Un(l)?y:new ri(null).setTree(l,y);const Et=d.serverCache.getNode();return we.children.inorderTraversal((It,Mt)=>{if(Et.hasChild(It)){const jn=Kc(0,d.serverCache.getNode().getImmediateChild(It),Mt);pe=zu(p,pe,new Rn(It),jn,b,L,$,ie)}}),we.children.inorderTraversal((It,Mt)=>{const _n=!d.serverCache.isCompleteForChild(It)&&null===Mt.value;if(!Et.hasChild(It)&&!_n){const mi=Kc(0,d.serverCache.getNode().getImmediateChild(It),Mt);pe=zu(p,pe,new Rn(It),mi,b,L,$,ie)}}),pe}function Ca(p,d){const l=pr(p.viewCache_);return l&&(p.query._queryParams.loadsAllData()||!Un(d)&&!l.getImmediateChild(gn(d)).isEmpty())?l.getChild(d):null}function mr(p,d,l,y){d.type===go.MERGE&&null!==d.source.queryId&&((0,Pe.Uc)(pr(p.viewCache_),"We should always have a full cache before handling merges"),(0,Pe.Uc)(Fo(p.viewCache_),"Missing event cache, even though we have a server cache"));const b=p.viewCache_,L=function od(p,d,l,y,b){const L=new jd;let $,ie;if(l.type===go.OVERWRITE){const we=l;we.source.fromUser?$=qu(p,d,we.path,we.snap,y,b,L):((0,Pe.Uc)(we.source.fromServer,"Unknown source."),ie=we.source.tagged||d.serverCache.isFiltered()&&!Un(we.path),$=zu(p,d,we.path,we.snap,y,b,ie,L))}else if(l.type===go.MERGE){const we=l;we.source.fromUser?$=function vc(p,d,l,y,b,L,$){let ie=d;return y.foreach((pe,we)=>{const Et=dr(l,pe);Yh(d,gn(Et))&&(ie=qu(p,ie,Et,we,b,L,$))}),y.foreach((pe,we)=>{const Et=dr(l,pe);Yh(d,gn(Et))||(ie=qu(p,ie,Et,we,b,L,$))}),ie}(p,d,we.path,we.children,y,b,L):((0,Pe.Uc)(we.source.fromServer,"Unknown source."),ie=we.source.tagged||d.serverCache.isFiltered(),$=Cu(p,d,we.path,we.children,y,b,ie,L))}else if(l.type===go.ACK_USER_WRITE){const we=l;$=we.revert?function Hd(p,d,l,y,b,L){let $;if(null!=Hu(y,l))return d;{const ie=new Gd(y,d,b),pe=d.eventCache.getNode();let we;if(Un(l)||".priority"===gn(l)){let Et;if(d.serverCache.isFullyInitialized())Et=Do(y,pr(d));else{const It=d.serverCache.getNode();(0,Pe.Uc)(It instanceof N,"serverChildren would be complete if leaf node"),Et=zc(y,It)}we=p.filter.updateFullNode(pe,Et,L)}else{const Et=gn(l);let It=qc(y,Et,d.serverCache);null==It&&d.serverCache.isCompleteForChild(Et)&&(It=pe.getImmediateChild(Et)),we=null!=It?p.filter.updateChild(pe,Et,It,ai(l),ie,L):d.eventCache.getNode().hasChild(Et)?p.filter.updateChild(pe,Et,N.EMPTY_NODE,ai(l),ie,L):pe,we.isEmpty()&&d.serverCache.isFullyInitialized()&&($=Do(y,pr(d)),$.isLeafNode()&&(we=p.filter.updateFullNode(we,$,L)))}return $=d.serverCache.isFullyInitialized()||null!=Hu(y,Sr()),ka(d,we,$,p.filter.filtersNodes())}}(p,d,we.path,y,b,L):function Yc(p,d,l,y,b,L,$){if(null!=Hu(b,l))return d;const ie=d.serverCache.isFiltered(),pe=d.serverCache;if(null!=y.value){if(Un(l)&&pe.isFullyInitialized()||pe.isCompleteForPath(l))return zu(p,d,l,pe.getNode().getChild(l),b,L,ie,$);if(Un(l)){let we=new ri(null);return pe.getNode().forEachChild(wo,(Et,It)=>{we=we.set(new Rn(Et),It)}),Cu(p,d,l,we,b,L,ie,$)}return d}{let we=new ri(null);return y.foreach((Et,It)=>{const Mt=dr(l,Et);pe.isCompleteForPath(Mt)&&(we=we.set(Et,pe.getNode().getChild(Mt)))}),Cu(p,d,l,we,b,L,ie,$)}}(p,d,we.path,we.affectedTree,y,b,L)}else{if(l.type!==go.LISTEN_COMPLETE)throw(0,Pe.Y9)("Unknown operation type: "+l.type);$=function Gs(p,d,l,y,b){const L=d.serverCache;return oo(p,Qo(d,L.getNode(),L.isFullyInitialized()||Un(l),L.isFiltered()),l,y,$d,b)}(p,d,l.path,y,L)}const pe=L.getChanges();return function Wd(p,d,l){const y=d.eventCache;if(y.isFullyInitialized()){const b=y.getNode().isLeafNode()||y.getNode().isEmpty(),L=Fo(p);(l.length>0||!p.eventCache.isFullyInitialized()||b&&!y.getNode().equals(L)||!y.getNode().getPriority().equals(L.getPriority()))&&l.push(function ni(p){return{type:"value",snapshotNode:p}}(Fo(d)))}}(d,$,pe),{viewCache:$,changes:pe}}(p.processor_,b,d,l,y);return function El(p,d){(0,Pe.Uc)(d.eventCache.getNode().isIndexed(p.filter.getIndex()),"Event snap not indexed"),(0,Pe.Uc)(d.serverCache.getNode().isIndexed(p.filter.getIndex()),"Server snap not indexed")}(p.processor_,L.viewCache),(0,Pe.Uc)(L.viewCache.serverCache.isFullyInitialized()||!b.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),p.viewCache_=L.viewCache,function Qc(p,d,l,y){return function Ur(p,d,l,y){const b=[],L=[];return d.forEach($=>{"child_changed"===$.type&&p.index_.indexedValueChanged($.oldSnap,$.snapshotNode)&&L.push(function as(p,d){return{type:"child_moved",snapshotNode:d,childName:p}}($.childName,$.snapshotNode))}),Na(p,b,"child_removed",d,y,l),Na(p,b,"child_added",d,y,l),Na(p,b,"child_moved",L,y,l),Na(p,b,"child_changed",d,y,l),Na(p,b,"value",d,y,l),b}(p.eventGenerator_,d,l,y?[y]:p.eventRegistrations_)}(p,L.changes,L.viewCache.eventCache.getNode(),null)}let Ec,Vo;function aa(p,d,l,y){const b=d.source.queryId;if(null!==b){const L=p.views.get(b);return(0,Pe.Uc)(null!=L,"SyncTree gave us an op for an invalid query."),mr(L,d,l,y)}{let L=[];for(const $ of p.views.values())L=L.concat(mr($,d,l,y));return L}}function gs(p,d){let l=null;for(const y of p.views.values())l=l||Ca(y,d);return l}class cd{constructor(d){this.listenProvider_=d,this.syncPointTree_=new ri(null),this.pendingWriteTree_=function mo(){return{visibleWrites:Lo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wc(p,d,l,y,b){return function D(p,d,l,y,b){(0,Pe.Uc)(y>p.lastWriteId,"Stacking an older write on top of newer ones"),void 0===b&&(b=!0),p.allWrites.push({path:d,snap:l,writeId:y,visible:b}),b&&(p.visibleWrites=Cs(p.visibleWrites,d,l)),p.lastWriteId=y}(p.pendingWriteTree_,d,l,y,b),b?Zi(p,new Yo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,l)):[]}function ca(p,d,l=!1){const y=function j(p,d){for(let l=0;l<p.allWrites.length;l++){const y=p.allWrites[l];if(y.writeId===d)return y}return null}(p.pendingWriteTree_,d);if(function ee(p,d){const l=p.allWrites.findIndex(ie=>ie.writeId===d);(0,Pe.Uc)(l>=0,"removeWrite called with nonexistent writeId.");const y=p.allWrites[l];p.allWrites.splice(l,1);let b=y.visible,L=!1,$=p.allWrites.length-1;for(;b&&$>=0;){const ie=p.allWrites[$];ie.visible&&($>=l&&fe(ie,y.path)?b=!1:ls(y.path,ie.path)&&(L=!0)),$--}return!!b&&(L?(function it(p){p.visibleWrites=Gt(p.allWrites,Je,Sr()),p.lastWriteId=p.allWrites.length>0?p.allWrites[p.allWrites.length-1].writeId:-1}(p),!0):(y.snap?p.visibleWrites=tc(p.visibleWrites,y.path):Yr(y.children,pe=>{p.visibleWrites=tc(p.visibleWrites,dr(y.path,pe))}),!0))}(p.pendingWriteTree_,d)){let L=new ri(null);return null!=y.snap?L=L.set(Sr(),!0):Yr(y.children,$=>{L=L.set(new Rn($),!0)}),Zi(p,new Sn(y.path,L,l))}return[]}function Ua(p,d,l){return Zi(p,new Yo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,l))}function Au(p,d,l){const b=p.pendingWriteTree_,L=p.syncPointTree_.findOnPath(d,($,ie)=>{const we=gs(ie,Ji($,d));if(we)return we});return jt(b,d,L,l,!0)}function Zi(p,d){return qd(d,p.syncPointTree_,null,M(p.pendingWriteTree_,Sr()))}function qd(p,d,l,y){if(Un(p.path))return Vi(p,d,l,y);{const b=d.get(Sr());null==l&&null!=b&&(l=gs(b,Sr()));let L=[];const $=gn(p.path),ie=p.operationForChild($),pe=d.children.get($);if(pe&&ie){const we=l?l.getImmediateChild($):null,Et=ir(y,$);L=L.concat(qd(ie,pe,we,Et))}return b&&(L=L.concat(aa(b,p,y,l))),L}}function Vi(p,d,l,y){const b=d.get(Sr());null==l&&null!=b&&(l=gs(b,Sr()));let L=[];return d.children.inorderTraversal(($,ie)=>{const pe=l?l.getImmediateChild($):null,we=ir(y,$),Et=p.operationForChild($);Et&&(L=L.concat(Vi(Et,ie,pe,we)))}),b&&(L=L.concat(aa(b,p,y,l))),L}function ic(p,d){return p.tagToQueryMap.get(d)}function dd(p){const d=p.indexOf("$");return(0,Pe.Uc)(-1!==d&&d<p.length-1,"Bad queryKey."),{queryId:p.substr(d+1),path:new Rn(p.substr(0,d))}}function Qu(p,d,l){const y=p.syncPointTree_.get(d);return(0,Pe.Uc)(y,"Missing sync point for query tag that we're tracking"),aa(y,l,M(p.pendingWriteTree_,d),null)}class Ju{constructor(d){this.node_=d}getImmediateChild(d){const l=this.node_.getImmediateChild(d);return new Ju(l)}node(){return this.node_}}class sc{constructor(d,l){this.syncTree_=d,this.path_=l}getImmediateChild(d){const l=dr(this.path_,d);return new sc(this.syncTree_,l)}node(){return Au(this.syncTree_,this.path_)}}const oc=function(p){return(p=p||{}).timestamp=p.timestamp||(new Date).getTime(),p},Kd=function(p,d,l){return p&&"object"==typeof p?((0,Pe.Uc)(".sv"in p,"Unexpected leaf node or priority contents"),"string"==typeof p[".sv"]?Cl(p[".sv"],d,l):"object"==typeof p[".sv"]?wl(p[".sv"],d):void(0,Pe.Uc)(!1,"Unexpected server value: "+JSON.stringify(p,null,2))):p},Cl=function(p,d,l){if("timestamp"===p)return l.timestamp;(0,Pe.Uc)(!1,"Unexpected server value: "+p)},wl=function(p,d,l){p.hasOwnProperty("increment")||(0,Pe.Uc)(!1,"Unexpected server value: "+JSON.stringify(p,null,2));const y=p.increment;"number"!=typeof y&&(0,Pe.Uc)(!1,"Unexpected increment value: "+y);const b=d.node();if((0,Pe.Uc)(null!==b&&typeof b<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!b.isLeafNode())return y;const $=b.getValue();return"number"!=typeof $?y:$+y},hd=function(p,d,l,y){return Pu(d,new sc(l,p),y)},Xc=function(p,d,l){return Pu(p,new Ju(d),l)};function Pu(p,d,l){const y=p.getPriority().val(),b=Kd(y,d.getImmediateChild(".priority"),l);let L;if(p.isLeafNode()){const $=p,ie=Kd($.getValue(),d,l);return ie!==$.getValue()||b!==$.getPriority().val()?new Lr(ie,pt(b)):p}{const $=p;return L=$,b!==$.getPriority().val()&&(L=L.updatePriority(new Lr(b))),$.forEachChild(ti,(ie,pe)=>{const we=Pu(pe,d.getImmediateChild(ie),l);we!==pe&&(L=L.updateImmediateChild(ie,we))}),L}}class ac{constructor(d="",l=null,y={children:{},childCount:0}){this.name=d,this.parent=l,this.node=y}}function Ba(p,d){let l=d instanceof Rn?d:new Rn(d),y=p,b=gn(l);for(;null!==b;){const L=(0,Pe.o5)(y.node.children,b)||{children:{},childCount:0};y=new ac(b,y,L),l=ai(l),b=gn(l)}return y}function ja(p){return p.node.value}function bu(p,d){p.node.value=d,fd(p)}function Pc(p){return p.node.childCount>0}function Aa(p,d){Yr(p.node.children,(l,y)=>{d(new ac(l,p,y))})}function eu(p,d,l,y){l&&!y&&d(p),Aa(p,b=>{eu(b,d,!0,y)}),l&&y&&d(p)}function Sa(p){return new Rn(null===p.parent?p.name:Sa(p.parent)+"/"+p.name)}function fd(p){null!==p.parent&&function Tl(p,d,l){const y=function Zc(p){return void 0===ja(p)&&!Pc(p)}(l),b=(0,Pe.Y7)(p.node.children,d);y&&b?(delete p.node.children[d],p.node.childCount--,fd(p)):!y&&!b&&(p.node.children[d]=l.node,p.node.childCount++,fd(p))}(p.parent,p.name,p)}const $a=/[\[\].#$\/\u0000-\u001F\u007F]/,Dl=/[\[\].#$\u0000-\u001F\u007F]/,cc=10485760,Ru=function(p){return"string"==typeof p&&0!==p.length&&!$a.test(p)},H=function(p,d,l){const y=l instanceof Rn?new Io(l,p):l;if(void 0===d)throw new Error(p+"contains undefined "+Co(y));if("function"==typeof d)throw new Error(p+"contains a function "+Co(y)+" with contents = "+d.toString());if(Ti(d))throw new Error(p+"contains "+d.toString()+" "+Co(y));if("string"==typeof d&&d.length>cc/3&&(0,Pe.Uj)(d)>cc)throw new Error(p+"contains a string greater than "+cc+" utf8 bytes "+Co(y)+" ('"+d.substring(0,50)+"...')");if(d&&"object"==typeof d){let b=!1,L=!1;if(Yr(d,($,ie)=>{if(".value"===$)b=!0;else if(".priority"!==$&&".sv"!==$&&(L=!0,!Ru($)))throw new Error(p+" contains an invalid key ("+$+") "+Co(y)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function gc(p,d){p.parts_.length>0&&(p.byteLength_+=1),p.parts_.push(d),p.byteLength_+=(0,Pe.Uj)(d),Js(p)})(y,$),H(p,ie,y),function ds(p){const d=p.parts_.pop();p.byteLength_-=(0,Pe.Uj)(d),p.parts_.length>0&&(p.byteLength_-=1)}(y)}),b&&L)throw new Error(p+' contains ".value" child '+Co(y)+" in addition to actual children.")}},_o=function(p,d){const l=d.path.toString();if("string"!=typeof d.repoInfo.host||0===d.repoInfo.host.length||!Ru(d.repoInfo.namespace)&&"localhost"!==d.repoInfo.host.split(":")[0]||0!==l.length&&!function(p){return p&&(p=p.replace(/^\/*\.info(\/|$)/,"/")),function(p){return"string"==typeof p&&0!==p.length&&!Dl.test(p)}(p)}(l))throw new Error((0,Pe.iQ)(p,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ms{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function vo(p,d,l){(function tu(p,d){let l=null;for(let y=0;y<d.length;y++){const b=d[y],L=b.getPath();null!==l&&!ks(L,l.path)&&(p.eventLists_.push(l),l=null),null===l&&(l={events:[],path:L}),l.events.push(b)}l&&p.eventLists_.push(l)})(p,l),function uc(p,d){p.recursionDepth_++;let l=!0;for(let y=0;y<p.eventLists_.length;y++){const b=p.eventLists_[y];b&&(d(b.path)?(pd(p.eventLists_[y]),p.eventLists_[y]=null):l=!1)}l&&(p.eventLists_=[]),p.recursionDepth_--}(p,y=>ls(y,d)||ls(d,y))}function pd(p){for(let d=0;d<p.events.length;d++){const l=p.events[d];if(null!==l){p.events[d]=null;const y=l.getEventRunner();Vt&&an("event: "+l.toString()),$r(y)}}}const bc=25;class Mu{constructor(d,l,y,b){this.repoInfo_=d,this.forceRestClient_=l,this.authTokenProvider_=y,this.appCheckProvider_=b,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ms,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ot(),this.transactionQueueTree_=new ac,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function _s(p){const l=p.infoData_.getNode(new Rn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function nr(p){return oc({timestamp:_s(p)})}function Al(p,d,l,y,b){p.dataUpdateCount++;const L=new Rn(d);l=p.interceptServerDataCallback_?p.interceptServerDataCallback_(d,l):l;let $=[];if(b)if(y){const pe=(0,Pe.kH)(l,we=>pt(we));$=function Qh(p,d,l,y){const b=ic(p,y);if(b){const L=dd(b),$=L.path,ie=L.queryId,pe=Ji($,d),we=ri.fromObject(l);return Qu(p,$,new gi(ec(ie),pe,we))}return[]}(p.serverSyncTree_,L,pe,b)}else{const pe=pt(l);$=function ld(p,d,l,y){const b=ic(p,y);if(null!=b){const L=dd(b),$=L.path,ie=L.queryId,pe=Ji($,d);return Qu(p,$,new Yo(ec(ie),pe,l))}return[]}(p.serverSyncTree_,L,pe,b)}else if(y){const pe=(0,Pe.kH)(l,we=>pt(we));$=function zd(p,d,l){const y=ri.fromObject(l);return Zi(p,new gi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,y))}(p.serverSyncTree_,L,pe)}else{const pe=pt(l);$=Ua(p.serverSyncTree_,L,pe)}let ie=L;$.length>0&&(ie=Mc(p,L)),vo(p.eventQueue_,ie,$)}function Rc(p,d){Yd(p,"connected",d),!1===d&&function Jd(p){lc(p,"onDisconnectEvents");const d=nr(p),l=ot();fs(p.onDisconnect_,Sr(),(b,L)=>{const $=hd(b,L,p.serverSyncTree_,d);Pt(l,b,$)});let y=[];fs(l,Sr(),(b,L)=>{y=y.concat(Ua(p.serverSyncTree_,b,L));const $=function dc(p,d){const l=Sa(iu(p,d)),y=Ba(p.transactionQueueTree_,d);return function Xu(p,d,l){let y=l?p:p.parent;for(;null!==y;){if(d(y))return!0;y=y.parent}}(y,b=>{su(p,b)}),su(p,y),eu(y,b=>{su(p,b)}),l}(p,b);Mc(p,$)}),p.onDisconnect_=ot(),vo(p.eventQueue_,Sr(),y)}(p)}function Yd(p,d,l){const y=new Rn("/.info/"+d),b=pt(l);p.infoData_.updateSnapshot(y,b);const L=Ua(p.infoSyncTree_,y,b);vo(p.eventQueue_,y,L)}function md(p){return p.nextWriteId_++}function lc(p,...d){let l="";p.persistentConnection_&&(l=p.persistentConnection_.id+":"),an(l,...d)}function Ki(p,d,l){return Au(p.serverSyncTree_,d,l)||N.EMPTY_NODE}function Uo(p,d=p.transactionQueueTree_){if(d||Oc(p,d),ja(d)){const l=eh(p,d);(0,Pe.Uc)(l.length>0,"Sending zero length transaction queue"),l.every(b=>0===b.status)&&function Xd(p,d,l){const y=l.map(we=>we.currentWriteId),b=Ki(p,d,y);let L=b;const $=b.hash();for(let we=0;we<l.length;we++){const Et=l[we];(0,Pe.Uc)(0===Et.status,"tryToSendTransactionQueue_: items in queue should all be run."),Et.status=1,Et.retryCount++;const It=Ji(d,Et.path);L=L.updateChild(It,Et.currentOutputSnapshotRaw)}const ie=L.val(!0),pe=d;p.server_.put(pe.toString(),ie,we=>{lc(p,"transaction put response",{path:pe.toString(),status:we});let Et=[];if("ok"===we){const It=[];for(let Mt=0;Mt<l.length;Mt++)l[Mt].status=2,Et=Et.concat(ca(p.serverSyncTree_,l[Mt].currentWriteId)),l[Mt].onComplete&&It.push(()=>l[Mt].onComplete(null,!0,l[Mt].currentOutputSnapshotResolved)),l[Mt].unwatcher();Oc(p,Ba(p.transactionQueueTree_,d)),Uo(p,p.transactionQueueTree_),vo(p.eventQueue_,d,Et);for(let Mt=0;Mt<It.length;Mt++)$r(It[Mt])}else{if("datastale"===we)for(let It=0;It<l.length;It++)l[It].status=3===l[It].status?4:0;else{Vn("transaction at "+pe.toString()+" failed: "+we);for(let It=0;It<l.length;It++)l[It].status=4,l[It].abortReason=we}Mc(p,d)}},$)}(p,Sa(d),l)}else Pc(d)&&Aa(d,l=>{Uo(p,l)})}function Mc(p,d){const l=iu(p,d),y=Sa(l);return function Zd(p,d,l){if(0===d.length)return;const y=[];let b=[];const $=d.filter(ie=>0===ie.status).map(ie=>ie.currentWriteId);for(let ie=0;ie<d.length;ie++){const pe=d[ie],we=Ji(l,pe.path);let It,Et=!1;if((0,Pe.Uc)(null!==we,"rerunTransactionsUnderNode_: relativePath should not be null."),4===pe.status)Et=!0,It=pe.abortReason,b=b.concat(ca(p.serverSyncTree_,pe.currentWriteId,!0));else if(0===pe.status)if(pe.retryCount>=bc)Et=!0,It="maxretry",b=b.concat(ca(p.serverSyncTree_,pe.currentWriteId,!0));else{const Mt=Ki(p,pe.path,$);pe.currentInputSnapshot=Mt;const _n=d[ie].update(Mt.val());if(void 0!==_n){H("transaction failed: Data returned ",_n,pe.path);let jn=pt(_n);"object"==typeof _n&&null!=_n&&(0,Pe.Y7)(_n,".priority")||(jn=jn.updatePriority(Mt.getPriority()));const uo=pe.currentWriteId,Gl=nr(p),vh=Xc(jn,Mt,Gl);pe.currentOutputSnapshotRaw=jn,pe.currentOutputSnapshotResolved=vh,pe.currentWriteId=md(p),$.splice($.indexOf(uo),1),b=b.concat(wc(p.serverSyncTree_,pe.path,vh,pe.currentWriteId,pe.applyLocally)),b=b.concat(ca(p.serverSyncTree_,uo,!0))}else Et=!0,It="nodata",b=b.concat(ca(p.serverSyncTree_,pe.currentWriteId,!0))}vo(p.eventQueue_,l,b),b=[],Et&&(d[ie].status=2,setTimeout(d[ie].unwatcher,Math.floor(0)),d[ie].onComplete&&y.push("nodata"===It?()=>d[ie].onComplete(null,!1,d[ie].currentInputSnapshot):()=>d[ie].onComplete(new Error(It),!1,null)))}Oc(p,p.transactionQueueTree_);for(let ie=0;ie<y.length;ie++)$r(y[ie]);Uo(p,p.transactionQueueTree_)}(p,eh(p,l),y),y}function iu(p,d){let l,y=p.transactionQueueTree_;for(l=gn(d);null!==l&&void 0===ja(y);)y=Ba(y,l),l=gn(d=ai(d));return y}function eh(p,d){const l=[];return th(p,d,l),l.sort((y,b)=>y.order-b.order),l}function th(p,d,l){const y=ja(d);if(y)for(let b=0;b<y.length;b++)l.push(y[b]);Aa(d,b=>{th(p,b,l)})}function Oc(p,d){const l=ja(d);if(l){let y=0;for(let b=0;b<l.length;b++)2!==l[b].status&&(l[y]=l[b],y++);l.length=y,bu(d,l.length>0?l:void 0)}Aa(d,y=>{Oc(p,y)})}function su(p,d){const l=ja(d);if(l){const y=[];let b=[],L=-1;for(let $=0;$<l.length;$++)3===l[$].status||(1===l[$].status?((0,Pe.Uc)(L===$-1,"All SENT items should be at beginning of queue."),L=$,l[$].status=3,l[$].abortReason="set"):((0,Pe.Uc)(0===l[$].status,"Unexpected transaction status in abort"),l[$].unwatcher(),b=b.concat(ca(p.serverSyncTree_,l[$].currentWriteId,!0)),l[$].onComplete&&y.push(l[$].onComplete.bind(null,new Error("set"),!1,null))));-1===L?bu(d,void 0):l.length=L+1,vo(p.eventQueue_,Sa(d),b);for(let $=0;$<y.length;$++)$r(y[$])}}const xc=function(p,d){const l=rf(p),y=l.namespace;return"firebase.com"===l.domain&&sr(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!y||"undefined"===y)&&"localhost"!==l.domain&&sr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ki(l.host,l.secure,y,"ws"===l.scheme||"wss"===l.scheme,d,"",y!==l.subdomain),path:new Rn(l.pathString)}},rf=function(p){let d="",l="",y="",b="",L="",$=!0,ie="https",pe=443;if("string"==typeof p){let we=p.indexOf("//");we>=0&&(ie=p.substring(0,we-1),p=p.substring(we+2));let Et=p.indexOf("/");-1===Et&&(Et=p.length);let It=p.indexOf("?");-1===It&&(It=p.length),d=p.substring(0,Math.min(Et,It)),Et<It&&(b=function Sl(p){let d="";const l=p.split("/");for(let y=0;y<l.length;y++)if(l[y].length>0){let b=l[y];try{b=decodeURIComponent(b.replace(/\+/g," "))}catch{}d+="/"+b}return d}(p.substring(Et,It)));const Mt=function _p(p){const d={};"?"===p.charAt(0)&&(p=p.substring(1));for(const l of p.split("&")){if(0===l.length)continue;const y=l.split("=");2===y.length?d[decodeURIComponent(y[0])]=decodeURIComponent(y[1]):Vn(`Invalid query segment '${l}' in query '${p}'`)}return d}(p.substring(Math.min(p.length,It)));we=d.indexOf(":"),we>=0?($="https"===ie||"wss"===ie,pe=parseInt(d.substring(we+1),10)):we=d.length;const _n=d.slice(0,we);if("localhost"===_n.toLowerCase())l="localhost";else if(_n.split(".").length<=2)l=_n;else{const jn=d.indexOf(".");y=d.substring(0,jn).toLowerCase(),l=d.substring(jn+1),L=y}"ns"in Mt&&(L=Mt.ns)}return{host:d,port:pe,domain:l,subdomain:y,secure:$,scheme:ie,pathString:b,namespace:L}};class ur{constructor(d,l,y,b){this._repo=d,this._path=l,this._queryParams=y,this._orderByCalled=b}get key(){return Un(this._path)?null:Ma(this._path)}get ref(){return new fc(this._repo,this._path)}get _queryIdentifier(){const d=hn(this._queryParams),l=Di(d);return"{}"===l?"default":l}get _queryObject(){return hn(this._queryParams)}isEqual(d){if(!((d=(0,Pe.Yj)(d))instanceof ur))return!1;const l=this._repo===d._repo,y=ks(this._path,d._path);return l&&y&&this._queryIdentifier===d._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Fr(p){let d="";for(let l=p.pieceNum_;l<p.pieces_.length;l++)""!==p.pieces_[l]&&(d+="/"+encodeURIComponent(String(p.pieces_[l])));return d||"/"}(this._path)}}class fc extends ur{constructor(d,l){super(d,l,new Jn,!1)}get parent(){const d=xo(this._path);return null===d?null:new fc(this._repo,d)}get root(){let d=this;for(;null!==d.parent;)d=d.parent;return d}}(function ad(p){(0,Pe.Uc)(!Ec,"__referenceConstructor has already been defined"),Ec=p})(fc),function Va(p){(0,Pe.Uc)(!Vo,"__referenceConstructor has already been defined"),Vo=p}(fc);const la={};class mf{constructor(d,l){this._repoInternal=d,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function gd(p,d,l){if(p.stats_=li(p.repoInfo_),p.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)p.server_=new Eu(p.repoInfo_,(y,b,L,$)=>{Al(p,y,b,L,$)},p.authTokenProvider_,p.appCheckProvider_),setTimeout(()=>Rc(p,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Pe.i)(l)}catch(y){throw new Error("Invalid authOverride provided: "+y)}}p.persistentConnection_=new Zs(p.repoInfo_,d,(y,b,L,$)=>{Al(p,y,b,L,$)},y=>{Rc(p,y)},y=>{!function mp(p,d){Yr(d,(l,y)=>{Yd(p,l,y)})}(p,y)},p.authTokenProvider_,p.appCheckProvider_,l),p.server_=p.persistentConnection_}p.authTokenProvider_.addTokenChangeListener(y=>{p.server_.refreshAuthToken(y)}),p.appCheckProvider_.addTokenChangeListener(y=>{p.server_.refreshAppCheckToken(y.token)}),p.statsReporter_=function Ps(p,d){const l=p.toString();return qs[l]||(qs[l]=d()),qs[l]}(p.repoInfo_,()=>new Ud(p.stats_,p.server_)),p.infoData_=new zt,p.infoSyncTree_=new cd({startListening:(y,b,L,$)=>{let ie=[];const pe=p.infoData_.getNode(y._path);return pe.isEmpty()||(ie=Ua(p.infoSyncTree_,y._path,pe),setTimeout(()=>{$("ok")},0)),ie},stopListening:()=>{}}),Yd(p,"connected",!1),p.serverSyncTree_=new cd({startListening:(y,b,L,$)=>(p.server_.listen(y,L,b,(ie,pe)=>{const we=$(ie,pe);vo(p.eventQueue_,y._path,we)}),[]),stopListening:(y,b)=>{p.server_.unlisten(y,b)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fc(this._repo,Sr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Lu(p,d){const l=la[d];(!l||l[p.key]!==p)&&sr(`Database ${d}(${p.repoInfo_}) has already been deleted.`),function ef(p){p.persistentConnection_&&p.persistentConnection_.interrupt("repo_interrupt")}(p),delete l[p.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(d){null===this._rootInternal&&sr("Cannot call "+d+" on a deleted database.")}}function Wa(p=(0,fn.getApp)(),d){const l=(0,fn._getProvider)(p,"database").getImmediate({identifier:d});if(!l._instanceStarted){const y=(0,Pe.on)("database");y&&function tl(p,d,l,y={}){(p=(0,Pe.Yj)(p))._checkNotDeleted("useEmulator"),p._instanceStarted&&sr("Cannot call useEmulator() after instance has already been initialized.");const b=p._repoInternal;let L;if(b.repoInfo_.nodeAdmin)y.mockUserToken&&sr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),L=new Bs(Bs.OWNER);else if(y.mockUserToken){const $="string"==typeof y.mockUserToken?y.mockUserToken:(0,Pe.YD)(y.mockUserToken,p.app.options.projectId);L=new Bs($)}!function vd(p,d,l,y){p.repoInfo_=new ki(`${d}:${l}`,!1,p.repoInfo_.namespace,p.repoInfo_.webSocketOnly,p.repoInfo_.nodeAdmin,p.repoInfo_.persistenceKey,p.repoInfo_.includeNamespaceInQueryParams,!0),y&&(p.authTokenProvider_=y)}(b,d,l,L)}(l,...y)}return l}Zs.prototype.simpleListen=function(p,d){this.sendRequest("q",{p},d)},Zs.prototype.echo=function(p,d){this.sendRequest("echo",{d:p},d)},function Cd(p){(function Bn(p){rn=p})(fn.SDK_VERSION),(0,fn._registerComponent)(new Ln.Yl("database",(d,{instanceIdentifier:l})=>function Ed(p,d,l,y,b){let L=y||p.options.databaseURL;void 0===L&&(p.options.projectId||sr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),an("Using default host for project ",p.options.projectId),L=`${p.options.projectId}-default-rtdb.firebaseio.com`);let pe,we,$=xc(L,b),ie=$.repoInfo;typeof process<"u"&&process.env&&(we=process.env.FIREBASE_DATABASE_EMULATOR_HOST),we?(pe=!0,L=`http://${we}?ns=${ie.namespace}`,$=xc(L,b),ie=$.repoInfo):pe=!$.repoInfo.secure;const Et=b&&pe?new Bs(Bs.OWNER):new ia(p.name,p.options,d);_o("Invalid Firebase Database URL",$),Un($.path)||sr("Database URL must point to the root of a Firebase Database (not including a child path).");const It=function gf(p,d,l,y){let b=la[d.name];b||(b={},la[d.name]=b);let L=b[p.toURLString()];return L&&sr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),L=new Mu(p,!1,l,y),b[p.toURLString()]=L,L}(ie,p,Et,new ra(p.name,l));return new mf(It,p)}(d.getProvider("app").getImmediate(),d.getProvider("auth-internal"),d.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,fn.registerVersion)(Qe,"1.0.3",p),(0,fn.registerVersion)(Qe,"1.0.3","esm2017")}();class cu{constructor(d){return d}}const uu="database",bp=new I.UbH("angularfire2.database-instances");function hh(p){return(d,l)=>{const y=d.runOutsideAngular(()=>p(l));return new cu(y)}}const Fl={provide:class kl{constructor(){return(0,Ie.S_)(uu)}},deps:[[new I.T7N,bp]]},nl={provide:cu,useFactory:function uy(p,d){const l=(0,Ie.UN)(uu,p,d);return l&&new cu(l)},deps:[[new I.T7N,bp],je]};let Ef=(()=>{class p{constructor(){(0,Be.Kk)("angularfire",Ie.j1.full,"rtdb")}static \u0275fac=function(y){return new(y||p)};static \u0275mod=I.a4G({type:p});static \u0275inj=I.s3X({providers:[nl,Fl]})}return p})();function Rp(p,...d){return{ngModule:Ef,providers:[{provide:bp,useFactory:hh(p),multi:!0,deps:[I.WW2,I.zZn,Ie.u,le,[new I.T7N,Ut],[new I.T7N,Ie.gJ],...d]}]}}const kp=(0,Ie.qo)(Wa,!0),yh={apiKey:"AIzaSyCbQiRFo1MKF_WTEIwSMYg4rFL0CkKdTDI",authDomain:"exercise-app-9b873.firebaseapp.com",databaseURL:"https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app",projectId:"exercise-app-9b873",storageBucket:"exercise-app-9b873.appspot.com",messagingSenderId:"146569895533",appId:"1:146569895533:web:cfb4bca172cc29ee50a964",measurementId:"G-MW950TMVK5"};var km=V(6e3),Lp=V(3960),Fm=V(6180),Vp=V(2448),Tf=V(2080),Eo=V(1680),da=V(1368);let Df=(()=>{class p{static#e=this.\u0275fac=function(y){return new(y||p)};static#t=this.\u0275mod=I.a4G({type:p,bootstrap:[Ee]});static#n=this.\u0275inj=I.s3X({imports:[da.MD,_.iE,ge,Lp.LoginAndRegistrationModule,Fm.ProductPageModule,Vp.ProfileModuleModule,Tf.SingleProductPageModule,Eo.w,km.UN.initializeApp(yh),He(()=>Wn()),Rp(()=>kp())]})}return p})();_.o_().bootstrapModule(Df).catch(p=>console.error(p))},6700:(Xt,$e,V)=>{V.d($e,{g:()=>J});var _=V(5657);class J extends _.E{constructor(O){super(),this._value=O}get value(){return this.getValue()}_subscribe(O){const ge=super._subscribe(O);return!ge.closed&&O.next(this._value),ge}getValue(){const{hasError:O,thrownError:ge,_value:Ee}=this;if(O)throw ge;return this._throwIfClosed(),Ee}next(O){super.next(this._value=O)}}},3252:(Xt,$e,V)=>{V.d($e,{_:()=>Be});var _=V(1760),J=V(6928),I=V(472),O=V(3928),ge=V(4491),Ee=V(8880),Ie=V(2075);let Be=(()=>{class Oe{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const We=new Oe;return We.source=this,We.operator=Le,We}subscribe(Le,We,Ve){const Xe=function ue(Oe){return Oe&&Oe instanceof _.yR||function le(Oe){return Oe&&(0,Ee.m)(Oe.next)&&(0,Ee.m)(Oe.error)&&(0,Ee.m)(Oe.complete)}(Oe)&&(0,J.GI)(Oe)}(Le)?Le:new _.ot(Le,We,Ve);return(0,Ie.c)(()=>{const{operator:Ce,source:ht}=this;Xe.add(Ce?Ce.call(Xe,ht):ht?this._subscribe(Xe):this._trySubscribe(Xe))}),Xe}_trySubscribe(Le){try{return this._subscribe(Le)}catch(We){Le.error(We)}}forEach(Le,We){return new(We=je(We))((Ve,Xe)=>{const Ce=new _.ot({next:ht=>{try{Le(ht)}catch(_t){Xe(_t),Ce.unsubscribe()}},error:Xe,complete:Ve});this.subscribe(Ce)})}_subscribe(Le){var We;return null===(We=this.source)||void 0===We?void 0:We.subscribe(Le)}[I.a](){return this}pipe(...Le){return(0,O.Y)(Le)(this)}toPromise(Le){return new(Le=je(Le))((We,Ve)=>{let Xe;this.subscribe(Ce=>Xe=Ce,Ce=>Ve(Ce),()=>We(Xe))})}}return Oe.create=Se=>new Oe(Se),Oe})();function je(Oe){var Se;return null!==(Se=Oe??ge.config.Promise)&&void 0!==Se?Se:Promise}},5657:(Xt,$e,V)=>{V.d($e,{E:()=>Ie});var _=V(3252),J=V(6928);const O=(0,V(4912).w)(je=>function(){je(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=V(1248),Ee=V(2075);let Ie=(()=>{class je extends _._{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const Oe=new Be(this,this);return Oe.operator=ue,Oe}_throwIfClosed(){if(this.closed)throw new O}next(ue){(0,Ee.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Oe of this.currentObservers)Oe.next(ue)}})}error(ue){(0,Ee.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:Oe}=this;for(;Oe.length;)Oe.shift().error(ue)}})}complete(){(0,Ee.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:Oe,isStopped:Se,observers:Le}=this;return Oe||Se?J.au:(this.currentObservers=null,Le.push(ue),new J.wH(()=>{this.currentObservers=null,(0,ge.k)(Le,ue)}))}_checkFinalizedStatuses(ue){const{hasError:Oe,thrownError:Se,isStopped:Le}=this;Oe?ue.error(Se):Le&&ue.complete()}asObservable(){const ue=new _._;return ue.source=this,ue}}return je.create=(le,ue)=>new Be(le,ue),je})();class Be extends Ie{constructor(le,ue){super(),this.destination=le,this.source=ue}next(le){var ue,Oe;null===(Oe=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===Oe||Oe.call(ue,le)}error(le){var ue,Oe;null===(Oe=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===Oe||Oe.call(ue,le)}complete(){var le,ue;null===(ue=null===(le=this.destination)||void 0===le?void 0:le.complete)||void 0===ue||ue.call(le)}_subscribe(le){var ue,Oe;return null!==(Oe=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(le))&&void 0!==Oe?Oe:J.au}}},1760:(Xt,$e,V)=>{V.d($e,{ot:()=>Ve,yR:()=>Oe});var _=V(8880),J=V(6928),I=V(4491),O=V(1984),ge=V(308);const Ee=je("C",void 0,void 0);function je(Ze,rt,me){return{kind:Ze,value:rt,error:me}}var le=V(3376),ue=V(2075);class Oe extends J.wH{constructor(rt){super(),this.isStopped=!1,rt?(this.destination=rt,(0,J.GI)(rt)&&rt.add(this)):this.destination=_t}static create(rt,me,Ot){return new Ve(rt,me,Ot)}next(rt){this.isStopped?ht(function Be(Ze){return je("N",Ze,void 0)}(rt),this):this._next(rt)}error(rt){this.isStopped?ht(function Ie(Ze){return je("E",void 0,Ze)}(rt),this):(this.isStopped=!0,this._error(rt))}complete(){this.isStopped?ht(Ee,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(rt){this.destination.next(rt)}_error(rt){try{this.destination.error(rt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Se=Function.prototype.bind;function Le(Ze,rt){return Se.call(Ze,rt)}class We{constructor(rt){this.partialObserver=rt}next(rt){const{partialObserver:me}=this;if(me.next)try{me.next(rt)}catch(Ot){Xe(Ot)}}error(rt){const{partialObserver:me}=this;if(me.error)try{me.error(rt)}catch(Ot){Xe(Ot)}else Xe(rt)}complete(){const{partialObserver:rt}=this;if(rt.complete)try{rt.complete()}catch(me){Xe(me)}}}class Ve extends Oe{constructor(rt,me,Ot){let At;if(super(),(0,_.m)(rt)||!rt)At={next:rt??void 0,error:me??void 0,complete:Ot??void 0};else{let Me;this&&I.config.useDeprecatedNextContext?(Me=Object.create(rt),Me.unsubscribe=()=>this.unsubscribe(),At={next:rt.next&&Le(rt.next,Me),error:rt.error&&Le(rt.error,Me),complete:rt.complete&&Le(rt.complete,Me)}):At=rt}this.destination=new We(At)}}function Xe(Ze){I.config.useDeprecatedSynchronousErrorHandling?(0,ue.q)(Ze):(0,O.U)(Ze)}function ht(Ze,rt){const{onStoppedNotification:me}=I.config;me&&le.u.setTimeout(()=>me(Ze,rt))}const _t={closed:!0,next:ge.K,error:function Ce(Ze){throw Ze},complete:ge.K}},6928:(Xt,$e,V)=>{V.d($e,{au:()=>Ee,wH:()=>ge,GI:()=>Ie});var _=V(8880);const I=(0,V(4912).w)(je=>function(ue){je(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((Oe,Se)=>`${Se+1}) ${Oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var O=V(1248);class ge{constructor(le){this.initialTeardown=le,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let le;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const Le of ue)Le.remove(this);else ue.remove(this);const{initialTeardown:Oe}=this;if((0,_.m)(Oe))try{Oe()}catch(Le){le=Le instanceof I?Le.errors:[Le]}const{_finalizers:Se}=this;if(Se){this._finalizers=null;for(const Le of Se)try{Be(Le)}catch(We){le=le??[],We instanceof I?le=[...le,...We.errors]:le.push(We)}}if(le)throw new I(le)}}add(le){var ue;if(le&&le!==this)if(this.closed)Be(le);else{if(le instanceof ge){if(le.closed||le._hasParent(this))return;le._addParent(this)}(this._finalizers=null!==(ue=this._finalizers)&&void 0!==ue?ue:[]).push(le)}}_hasParent(le){const{_parentage:ue}=this;return ue===le||Array.isArray(ue)&&ue.includes(le)}_addParent(le){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(le),ue):ue?[ue,le]:le}_removeParent(le){const{_parentage:ue}=this;ue===le?this._parentage=null:Array.isArray(ue)&&(0,O.k)(ue,le)}remove(le){const{_finalizers:ue}=this;ue&&(0,O.k)(ue,le),le instanceof ge&&le._removeParent(this)}}ge.EMPTY=(()=>{const je=new ge;return je.closed=!0,je})();const Ee=ge.EMPTY;function Ie(je){return je instanceof ge||je&&"closed"in je&&(0,_.m)(je.remove)&&(0,_.m)(je.add)&&(0,_.m)(je.unsubscribe)}function Be(je){(0,_.m)(je)?je():je.unsubscribe()}},4491:(Xt,$e,V)=>{V.d($e,{config:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7228:(Xt,$e,V)=>{V.d($e,{W:()=>ge});var _=V(267),I=V(6624),O=V(9900);function ge(...Ee){return function J(){return(0,_.u)(1)}()((0,O.Q)(Ee,(0,I.e_)(Ee)))}},8960:(Xt,$e,V)=>{V.d($e,{k:()=>J});const J=new(V(3252)._)(ge=>ge.complete())},9336:(Xt,$e,V)=>{V.d($e,{y:()=>Be});var _=V(3252),J=V(4300),I=V(560),O=V(6624),ge=V(7773),Ee=V(4187),Ie=V(7904);function Be(...je){const le=(0,O.yu)(je),{args:ue,keys:Oe}=(0,J.Q)(je),Se=new _._(Le=>{const{length:We}=ue;if(!We)return void Le.complete();const Ve=new Array(We);let Xe=We,Ce=We;for(let ht=0;ht<We;ht++){let _t=!1;(0,I.Uv)(ue[ht]).subscribe((0,ge.e)(Le,Ze=>{_t||(_t=!0,Ce--),Ve[ht]=Ze},()=>Xe--,void 0,()=>{(!Xe||!_t)&&(Ce||Le.next(Oe?(0,Ie.q)(Oe,Ve):Ve),Le.complete())}))}});return le?Se.pipe((0,Ee.j)(le)):Se}},9900:(Xt,$e,V)=>{V.d($e,{Q:()=>rt});var _=V(560),J=V(3920),I=V(2924),Ee=V(3252),Be=V(3835),je=V(8880),le=V(9399);function Oe(me,Ot){if(!me)throw new Error("Iterable cannot be null");return new Ee._(At=>{(0,le._)(At,Ot,()=>{const Me=me[Symbol.asyncIterator]();(0,le._)(At,Ot,()=>{Me.next().then(Ct=>{Ct.done?At.complete():At.next(Ct.value)})},0,!0)})})}var Se=V(5099),Le=V(5432),We=V(5428),Ve=V(1688),Xe=V(376),Ce=V(8272),ht=V(5832);function rt(me,Ot){return Ot?function Ze(me,Ot){if(null!=me){if((0,Se.O)(me))return function O(me,Ot){return(0,_.Uv)(me).pipe((0,I.y)(Ot),(0,J.y)(Ot))}(me,Ot);if((0,We.G)(me))return function Ie(me,Ot){return new Ee._(At=>{let Me=0;return Ot.schedule(function(){Me===me.length?At.complete():(At.next(me[Me++]),At.closed||this.schedule())})})}(me,Ot);if((0,Le.u)(me))return function ge(me,Ot){return(0,_.Uv)(me).pipe((0,I.y)(Ot),(0,J.y)(Ot))}(me,Ot);if((0,Xe.E)(me))return Oe(me,Ot);if((0,Ve.i)(me))return function ue(me,Ot){return new Ee._(At=>{let Me;return(0,le._)(At,Ot,()=>{Me=me[Be.w](),(0,le._)(At,Ot,()=>{let Ct,bt;try{({value:Ct,done:bt}=Me.next())}catch(Ut){return void At.error(Ut)}bt?At.complete():At.next(Ct)},0,!0)}),()=>(0,je.m)(Me?.return)&&Me.return()})}(me,Ot);if((0,ht.K)(me))return function _t(me,Ot){return Oe((0,ht._)(me),Ot)}(me,Ot)}throw(0,Ce.W)(me)}(me,Ot):(0,_.Uv)(me)}},560:(Xt,$e,V)=>{V.d($e,{Uv:()=>Se});var _=V(1316),J=V(5428),I=V(5432),O=V(3252),ge=V(5099),Ee=V(376),Ie=V(8272),Be=V(1688),je=V(5832),le=V(8880),ue=V(1984),Oe=V(472);function Se(Ze){if(Ze instanceof O._)return Ze;if(null!=Ze){if((0,ge.O)(Ze))return function Le(Ze){return new O._(rt=>{const me=Ze[Oe.a]();if((0,le.m)(me.subscribe))return me.subscribe(rt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ze);if((0,J.G)(Ze))return function We(Ze){return new O._(rt=>{for(let me=0;me<Ze.length&&!rt.closed;me++)rt.next(Ze[me]);rt.complete()})}(Ze);if((0,I.u)(Ze))return function Ve(Ze){return new O._(rt=>{Ze.then(me=>{rt.closed||(rt.next(me),rt.complete())},me=>rt.error(me)).then(null,ue.U)})}(Ze);if((0,Ee.E)(Ze))return Ce(Ze);if((0,Be.i)(Ze))return function Xe(Ze){return new O._(rt=>{for(const me of Ze)if(rt.next(me),rt.closed)return;rt.complete()})}(Ze);if((0,je.K)(Ze))return function ht(Ze){return Ce((0,je._)(Ze))}(Ze)}throw(0,Ie.W)(Ze)}function Ce(Ze){return new O._(rt=>{(function _t(Ze,rt){var me,Ot,At,Me;return(0,_.kH)(this,void 0,void 0,function*(){try{for(me=(0,_.mA)(Ze);!(Ot=yield me.next()).done;)if(rt.next(Ot.value),rt.closed)return}catch(Ct){At={error:Ct}}finally{try{Ot&&!Ot.done&&(Me=me.return)&&(yield Me.call(me))}finally{if(At)throw At.error}}rt.complete()})})(Ze,rt).catch(me=>rt.error(me))})}},2700:(Xt,$e,V)=>{V.d($e,{of:()=>I});var _=V(6624),J=V(9900);function I(...O){const ge=(0,_.e_)(O);return(0,J.Q)(O,ge)}},7773:(Xt,$e,V)=>{V.d($e,{e:()=>J});var _=V(1760);function J(O,ge,Ee,Ie,Be){return new I(O,ge,Ee,Ie,Be)}class I extends _.yR{constructor(ge,Ee,Ie,Be,je,le){super(ge),this.onFinalize=je,this.shouldUnsubscribe=le,this._next=Ee?function(ue){try{Ee(ue)}catch(Oe){ge.error(Oe)}}:super._next,this._error=Be?function(ue){try{Be(ue)}catch(Oe){ge.error(Oe)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(ue){ge.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ee}=this;super.unsubscribe(),!Ee&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},9144:(Xt,$e,V)=>{V.d($e,{a:()=>O});var _=V(560),J=V(7773),I=V(5448);function O(ge){return(0,I.i)((Ee,Ie)=>{let le,Be=null,je=!1;Be=Ee.subscribe((0,J.e)(Ie,void 0,void 0,ue=>{le=(0,_.Uv)(ge(ue,O(ge)(Ee))),Be?(Be.unsubscribe(),Be=null,le.subscribe(Ie)):je=!0})),je&&(Be.unsubscribe(),Be=null,le.subscribe(Ie))})}},6020:(Xt,$e,V)=>{V.d($e,{m:()=>I});var _=V(7400),J=V(8880);function I(O,ge){return(0,J.m)(ge)?(0,_.O)(O,ge,1):(0,_.O)(O,1)}},2156:(Xt,$e,V)=>{V.d($e,{G:()=>I});var _=V(5448),J=V(7773);function I(O){return(0,_.i)((ge,Ee)=>{let Ie=!1;ge.subscribe((0,J.e)(Ee,Be=>{Ie=!0,Ee.next(Be)},()=>{Ie||Ee.next(O),Ee.complete()}))})}},6684:(Xt,$e,V)=>{V.d($e,{I:()=>I});var _=V(5448),J=V(7773);function I(O,ge){return(0,_.i)((Ee,Ie)=>{let Be=0;Ee.subscribe((0,J.e)(Ie,je=>O.call(ge,je,Be++)&&Ie.next(je)))})}},8824:(Xt,$e,V)=>{V.d($e,{U:()=>J});var _=V(5448);function J(I){return(0,_.i)((O,ge)=>{try{O.subscribe(ge)}finally{ge.add(I)}})}},5084:(Xt,$e,V)=>{V.d($e,{K:()=>Ie});var _=V(7696),J=V(6684),I=V(3992),O=V(2156),ge=V(8124),Ee=V(528);function Ie(Be,je){const le=arguments.length>=2;return ue=>ue.pipe(Be?(0,J.I)((Oe,Se)=>Be(Oe,Se,ue)):Ee.Z,(0,I.U)(1),le?(0,O.G)(je):(0,ge._)(()=>new _.G))}},4704:(Xt,$e,V)=>{V.d($e,{k:()=>I});var _=V(5448),J=V(7773);function I(O,ge){return(0,_.i)((Ee,Ie)=>{let Be=0;Ee.subscribe((0,J.e)(Ie,je=>{Ie.next(O.call(ge,je,Be++))}))})}},267:(Xt,$e,V)=>{V.d($e,{u:()=>I});var _=V(7400),J=V(528);function I(O=1/0){return(0,_.O)(J.Z,O)}},7400:(Xt,$e,V)=>{V.d($e,{O:()=>Be});var _=V(4704),J=V(560),I=V(5448),O=V(9399),ge=V(7773),Ie=V(8880);function Be(je,le,ue=1/0){return(0,Ie.m)(le)?Be((Oe,Se)=>(0,_.k)((Le,We)=>le(Oe,Le,Se,We))((0,J.Uv)(je(Oe,Se))),ue):("number"==typeof le&&(ue=le),(0,I.i)((Oe,Se)=>function Ee(je,le,ue,Oe,Se,Le,We,Ve){const Xe=[];let Ce=0,ht=0,_t=!1;const Ze=()=>{_t&&!Xe.length&&!Ce&&le.complete()},rt=Ot=>Ce<Oe?me(Ot):Xe.push(Ot),me=Ot=>{Le&&le.next(Ot),Ce++;let At=!1;(0,J.Uv)(ue(Ot,ht++)).subscribe((0,ge.e)(le,Me=>{Se?.(Me),Le?rt(Me):le.next(Me)},()=>{At=!0},void 0,()=>{if(At)try{for(Ce--;Xe.length&&Ce<Oe;){const Me=Xe.shift();We?(0,O._)(le,We,()=>me(Me)):me(Me)}Ze()}catch(Me){le.error(Me)}}))};return je.subscribe((0,ge.e)(le,rt,()=>{_t=!0,Ze()})),()=>{Ve?.()}}(Oe,Se,je,ue)))}},3920:(Xt,$e,V)=>{V.d($e,{y:()=>O});var _=V(9399),J=V(5448),I=V(7773);function O(ge,Ee=0){return(0,J.i)((Ie,Be)=>{Ie.subscribe((0,I.e)(Be,je=>(0,_._)(Be,ge,()=>Be.next(je),Ee),()=>(0,_._)(Be,ge,()=>Be.complete(),Ee),je=>(0,_._)(Be,ge,()=>Be.error(je),Ee)))})}},208:(Xt,$e,V)=>{V.d($e,{K:()=>O});var _=V(5448),J=V(7773);function O(ge,Ee){return(0,_.i)(function I(ge,Ee,Ie,Be,je){return(le,ue)=>{let Oe=Ie,Se=Ee,Le=0;le.subscribe((0,J.e)(ue,We=>{const Ve=Le++;Se=Oe?ge(Se,We,Ve):(Oe=!0,We),Be&&ue.next(Se)},je&&(()=>{Oe&&ue.next(Se),ue.complete()})))}}(ge,Ee,arguments.length>=2,!0))}},5568:(Xt,$e,V)=>{V.d($e,{W:()=>O});var _=V(7228),J=V(6624),I=V(5448);function O(...ge){const Ee=(0,J.e_)(ge);return(0,I.i)((Ie,Be)=>{(Ee?(0,_.W)(ge,Ie,Ee):(0,_.W)(ge,Ie)).subscribe(Be)})}},2924:(Xt,$e,V)=>{V.d($e,{y:()=>J});var _=V(5448);function J(I,O=0){return(0,_.i)((ge,Ee)=>{Ee.add(I.schedule(()=>ge.subscribe(Ee),O))})}},7368:(Xt,$e,V)=>{V.d($e,{G:()=>O});var _=V(560),J=V(5448),I=V(7773);function O(ge,Ee){return(0,J.i)((Ie,Be)=>{let je=null,le=0,ue=!1;const Oe=()=>ue&&!je&&Be.complete();Ie.subscribe((0,I.e)(Be,Se=>{je?.unsubscribe();let Le=0;const We=le++;(0,_.Uv)(ge(Se,We)).subscribe(je=(0,I.e)(Be,Ve=>Be.next(Ee?Ee(Se,Ve,We,Le++):Ve),()=>{je=null,Oe()}))},()=>{ue=!0,Oe()}))})}},3992:(Xt,$e,V)=>{V.d($e,{U:()=>O});var _=V(8960),J=V(5448),I=V(7773);function O(ge){return ge<=0?()=>_.k:(0,J.i)((Ee,Ie)=>{let Be=0;Ee.subscribe((0,I.e)(Ie,je=>{++Be<=ge&&(Ie.next(je),ge<=Be&&Ie.complete())}))})}},9212:(Xt,$e,V)=>{V.d($e,{y:()=>ge});var _=V(8880),J=V(5448),I=V(7773),O=V(528);function ge(Ee,Ie,Be){const je=(0,_.m)(Ee)||Ie||Be?{next:Ee,error:Ie,complete:Be}:Ee;return je?(0,J.i)((le,ue)=>{var Oe;null===(Oe=je.subscribe)||void 0===Oe||Oe.call(je);let Se=!0;le.subscribe((0,I.e)(ue,Le=>{var We;null===(We=je.next)||void 0===We||We.call(je,Le),ue.next(Le)},()=>{var Le;Se=!1,null===(Le=je.complete)||void 0===Le||Le.call(je),ue.complete()},Le=>{var We;Se=!1,null===(We=je.error)||void 0===We||We.call(je,Le),ue.error(Le)},()=>{var Le,We;Se&&(null===(Le=je.unsubscribe)||void 0===Le||Le.call(je)),null===(We=je.finalize)||void 0===We||We.call(je)}))}):O.Z}},8124:(Xt,$e,V)=>{V.d($e,{_:()=>O});var _=V(7696),J=V(5448),I=V(7773);function O(Ee=ge){return(0,J.i)((Ie,Be)=>{let je=!1;Ie.subscribe((0,I.e)(Be,le=>{je=!0,Be.next(le)},()=>je?Be.complete():Be.error(Ee())))})}function ge(){return new _.G}},1364:(Xt,$e,V)=>{V.d($e,{m:()=>ge});var _=V(6928);class J extends _.wH{constructor(Ie,Be){super()}schedule(Ie,Be=0){return this}}const I={setInterval(Ee,Ie,...Be){const{delegate:je}=I;return je?.setInterval?je.setInterval(Ee,Ie,...Be):setInterval(Ee,Ie,...Be)},clearInterval(Ee){const{delegate:Ie}=I;return(Ie?.clearInterval||clearInterval)(Ee)},delegate:void 0};var O=V(1248);class ge extends J{constructor(Ie,Be){super(Ie,Be),this.scheduler=Ie,this.work=Be,this.pending=!1}schedule(Ie,Be=0){var je;if(this.closed)return this;this.state=Ie;const le=this.id,ue=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(ue,le,Be)),this.pending=!0,this.delay=Be,this.id=null!==(je=this.id)&&void 0!==je?je:this.requestAsyncId(ue,this.id,Be),this}requestAsyncId(Ie,Be,je=0){return I.setInterval(Ie.flush.bind(Ie,this),je)}recycleAsyncId(Ie,Be,je=0){if(null!=je&&this.delay===je&&!1===this.pending)return Be;null!=Be&&I.clearInterval(Be)}execute(Ie,Be){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const je=this._execute(Ie,Be);if(je)return je;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ie,Be){let le,je=!1;try{this.work(Ie)}catch(ue){je=!0,le=ue||new Error("Scheduled action threw falsy error")}if(je)return this.unsubscribe(),le}unsubscribe(){if(!this.closed){const{id:Ie,scheduler:Be}=this,{actions:je}=Be;this.work=this.state=this.scheduler=null,this.pending=!1,(0,O.k)(je,this),null!=Ie&&(this.id=this.recycleAsyncId(Be,Ie,null)),this.delay=null,super.unsubscribe()}}}},9816:(Xt,$e,V)=>{V.d($e,{k:()=>I});var _=V(5960);class J{constructor(ge,Ee=J.now){this.schedulerActionCtor=ge,this.now=Ee}schedule(ge,Ee=0,Ie){return new this.schedulerActionCtor(this,ge).schedule(Ie,Ee)}}J.now=_.K.now;class I extends J{constructor(ge,Ee=J.now){super(ge,Ee),this.actions=[],this._active=!1}flush(ge){const{actions:Ee}=this;if(this._active)return void Ee.push(ge);let Ie;this._active=!0;do{if(Ie=ge.execute(ge.state,ge.delay))break}while(ge=Ee.shift());if(this._active=!1,Ie){for(;ge=Ee.shift();)ge.unsubscribe();throw Ie}}}},112:(Xt,$e,V)=>{V.d($e,{M:()=>I,a:()=>O});var _=V(1364);const I=new(V(9816).k)(_.m),O=I},5960:(Xt,$e,V)=>{V.d($e,{K:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3376:(Xt,$e,V)=>{V.d($e,{u:()=>_});const _={setTimeout(J,I,...O){const{delegate:ge}=_;return ge?.setTimeout?ge.setTimeout(J,I,...O):setTimeout(J,I,...O)},clearTimeout(J){const{delegate:I}=_;return(I?.clearTimeout||clearTimeout)(J)},delegate:void 0}},3835:(Xt,$e,V)=>{V.d($e,{w:()=>J});const J=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},472:(Xt,$e,V)=>{V.d($e,{a:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7696:(Xt,$e,V)=>{V.d($e,{G:()=>J});const J=(0,V(4912).w)(I=>function(){I(this),this.name="EmptyError",this.message="no elements in sequence"})},6624:(Xt,$e,V)=>{V.d($e,{_8:()=>Ee,e_:()=>ge,yu:()=>O});var _=V(8880),J=V(3048);function I(Ie){return Ie[Ie.length-1]}function O(Ie){return(0,_.m)(I(Ie))?Ie.pop():void 0}function ge(Ie){return(0,J.G)(I(Ie))?Ie.pop():void 0}function Ee(Ie,Be){return"number"==typeof I(Ie)?Ie.pop():Be}},4300:(Xt,$e,V)=>{V.d($e,{Q:()=>ge});const{isArray:_}=Array,{getPrototypeOf:J,prototype:I,keys:O}=Object;function ge(Ie){if(1===Ie.length){const Be=Ie[0];if(_(Be))return{args:Be,keys:null};if(function Ee(Ie){return Ie&&"object"==typeof Ie&&J(Ie)===I}(Be)){const je=O(Be);return{args:je.map(le=>Be[le]),keys:je}}}return{args:Ie,keys:null}}},1248:(Xt,$e,V)=>{function _(J,I){if(J){const O=J.indexOf(I);0<=O&&J.splice(O,1)}}V.d($e,{k:()=>_})},4912:(Xt,$e,V)=>{function _(J){const O=J(ge=>{Error.call(ge),ge.stack=(new Error).stack});return O.prototype=Object.create(Error.prototype),O.prototype.constructor=O,O}V.d($e,{w:()=>_})},7904:(Xt,$e,V)=>{function _(J,I){return J.reduce((O,ge,Ee)=>(O[ge]=I[Ee],O),{})}V.d($e,{q:()=>_})},2075:(Xt,$e,V)=>{V.d($e,{c:()=>I,q:()=>O});var _=V(4491);let J=null;function I(ge){if(_.config.useDeprecatedSynchronousErrorHandling){const Ee=!J;if(Ee&&(J={errorThrown:!1,error:null}),ge(),Ee){const{errorThrown:Ie,error:Be}=J;if(J=null,Ie)throw Be}}else ge()}function O(ge){_.config.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=ge)}},9399:(Xt,$e,V)=>{function _(J,I,O,ge=0,Ee=!1){const Ie=I.schedule(function(){O(),Ee?J.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(J.add(Ie),!Ee)return Ie}V.d($e,{_:()=>_})},528:(Xt,$e,V)=>{function _(J){return J}V.d($e,{Z:()=>_})},5428:(Xt,$e,V)=>{V.d($e,{G:()=>_});const _=J=>J&&"number"==typeof J.length&&"function"!=typeof J},376:(Xt,$e,V)=>{V.d($e,{E:()=>J});var _=V(8880);function J(I){return Symbol.asyncIterator&&(0,_.m)(I?.[Symbol.asyncIterator])}},8880:(Xt,$e,V)=>{function _(J){return"function"==typeof J}V.d($e,{m:()=>_})},5099:(Xt,$e,V)=>{V.d($e,{O:()=>I});var _=V(472),J=V(8880);function I(O){return(0,J.m)(O[_.a])}},1688:(Xt,$e,V)=>{V.d($e,{i:()=>I});var _=V(3835),J=V(8880);function I(O){return(0,J.m)(O?.[_.w])}},5432:(Xt,$e,V)=>{V.d($e,{u:()=>J});var _=V(8880);function J(I){return(0,_.m)(I?.then)}},5832:(Xt,$e,V)=>{V.d($e,{K:()=>O,_:()=>I});var _=V(1316),J=V(8880);function I(ge){return(0,_.o7)(this,arguments,function*(){const Ie=ge.getReader();try{for(;;){const{value:Be,done:je}=yield(0,_.U1)(Ie.read());if(je)return yield(0,_.U1)(void 0);yield yield(0,_.U1)(Be)}}finally{Ie.releaseLock()}})}function O(ge){return(0,J.m)(ge?.getReader)}},3048:(Xt,$e,V)=>{V.d($e,{G:()=>J});var _=V(8880);function J(I){return I&&(0,_.m)(I.schedule)}},5448:(Xt,$e,V)=>{V.d($e,{e:()=>J,i:()=>I});var _=V(8880);function J(O){return(0,_.m)(O?.lift)}function I(O){return ge=>{if(J(ge))return ge.lift(function(Ee){try{return O(Ee,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},4187:(Xt,$e,V)=>{V.d($e,{j:()=>O});var _=V(4704);const{isArray:J}=Array;function O(ge){return(0,_.k)(Ee=>function I(ge,Ee){return J(Ee)?ge(...Ee):ge(Ee)}(ge,Ee))}},308:(Xt,$e,V)=>{function _(){}V.d($e,{K:()=>_})},3928:(Xt,$e,V)=>{V.d($e,{W:()=>J,Y:()=>I});var _=V(528);function J(...O){return I(O)}function I(O){return 0===O.length?_.Z:1===O.length?O[0]:function(Ee){return O.reduce((Ie,Be)=>Be(Ie),Ee)}}},1984:(Xt,$e,V)=>{V.d($e,{U:()=>I});var _=V(4491),J=V(3376);function I(O){J.u.setTimeout(()=>{const{onUnhandledError:ge}=_.config;if(!ge)throw O;ge(O)})}},8272:(Xt,$e,V)=>{function _(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d($e,{W:()=>_})},1368:(Xt,$e,V)=>{V.d($e,{MD:()=>li,MP:()=>Xe,OM:()=>Oo,QF:()=>Vt,Qd:()=>Le,Sg:()=>ye,Ud:()=>Ie,YZ:()=>Mo,_k:()=>Ps,a:()=>$r,ay:()=>zn,mQ:()=>je,mg:()=>ge,oB:()=>Ce,qq:()=>ho,uC:()=>Ve,u_:()=>Vn,uf:()=>Ei,ug:()=>O,uy:()=>I});var _=V(4496);let J=null;function I(){return J}function O(A){J??=A}class ge{}const Ie=new _.UbH("");let Be=(()=>{class A{historyGo(N){throw new Error("")}static#e=this.\u0275fac=function(W){return new(W||A)};static#t=this.\u0275prov=_.wxM({token:A,factory:()=>(0,_.uUt)(le),providedIn:"platform"})}return A})();const je=new _.UbH("");let le=(()=>{class A extends Be{constructor(){super(),this._doc=(0,_.uUt)(Ie),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return I().getBaseHref(this._doc)}onPopState(N){const W=I().getGlobalEventTarget(this._doc,"window");return W.addEventListener("popstate",N,!1),()=>W.removeEventListener("popstate",N)}onHashChange(N){const W=I().getGlobalEventTarget(this._doc,"window");return W.addEventListener("hashchange",N,!1),()=>W.removeEventListener("hashchange",N)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(N){this._location.pathname=N}pushState(N,W,de){this._history.pushState(N,W,de)}replaceState(N,W,de){this._history.replaceState(N,W,de)}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}static#e=this.\u0275fac=function(W){return new(W||A)};static#t=this.\u0275prov=_.wxM({token:A,factory:()=>new A,providedIn:"platform"})}return A})();function ue(A,q){if(0==A.length)return q;if(0==q.length)return A;let N=0;return A.endsWith("/")&&N++,q.startsWith("/")&&N++,2==N?A+q.substring(1):1==N?A+q:A+"/"+q}function Oe(A){const q=A.match(/#|\?|$/),N=q&&q.index||A.length;return A.slice(0,N-("/"===A[N-1]?1:0))+A.slice(N)}function Se(A){return A&&"?"!==A[0]?"?"+A:A}let Le=(()=>{class A{historyGo(N){throw new Error("")}static#e=this.\u0275fac=function(W){return new(W||A)};static#t=this.\u0275prov=_.wxM({token:A,factory:()=>(0,_.uUt)(Ve),providedIn:"root"})}return A})();const We=new _.UbH("");let Ve=(()=>{class A extends Le{constructor(N,W){super(),this._platformLocation=N,this._removeListenerFns=[],this._baseHref=W??this._platformLocation.getBaseHrefFromDOM()??(0,_.uUt)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return ue(this._baseHref,N)}path(N=!1){const W=this._platformLocation.pathname+Se(this._platformLocation.search),de=this._platformLocation.hash;return de&&N?`${W}${de}`:W}pushState(N,W,de,et){const pt=this.prepareExternalUrl(de+Se(et));this._platformLocation.pushState(N,W,pt)}replaceState(N,W,de,et){const pt=this.prepareExternalUrl(de+Se(et));this._platformLocation.replaceState(N,W,pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}static#e=this.\u0275fac=function(W){return new(W||A)(_.CoB(Be),_.CoB(We,8))};static#t=this.\u0275prov=_.wxM({token:A,factory:A.\u0275fac,providedIn:"root"})}return A})(),Xe=(()=>{class A extends Le{constructor(N,W){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=W&&(this._baseHref=W)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){const W=this._platformLocation.hash??"#";return W.length>0?W.substring(1):W}prepareExternalUrl(N){const W=ue(this._baseHref,N);return W.length>0?"#"+W:W}pushState(N,W,de,et){let pt=this.prepareExternalUrl(de+Se(et));0==pt.length&&(pt=this._platformLocation.pathname),this._platformLocation.pushState(N,W,pt)}replaceState(N,W,de,et){let pt=this.prepareExternalUrl(de+Se(et));0==pt.length&&(pt=this._platformLocation.pathname),this._platformLocation.replaceState(N,W,pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}static#e=this.\u0275fac=function(W){return new(W||A)(_.CoB(Be),_.CoB(We,8))};static#t=this.\u0275prov=_.wxM({token:A,factory:A.\u0275fac})}return A})(),Ce=(()=>{class A{constructor(N){this._subject=new _._w7,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=N;const W=this._locationStrategy.getBaseHref();this._basePath=function rt(A){if(new RegExp("^(https?:)?//").test(A)){const[,N]=A.split(/\/\/[^\/]+/);return N}return A}(Oe(Ze(W))),this._locationStrategy.onPopState(de=>{this._subject.emit({url:this.path(!0),pop:!0,state:de.state,type:de.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(N=!1){return this.normalize(this._locationStrategy.path(N))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(N,W=""){return this.path()==this.normalize(N+Se(W))}normalize(N){return A.stripTrailingSlash(function _t(A,q){if(!A||!q.startsWith(A))return q;const N=q.substring(A.length);return""===N||["/",";","?","#"].includes(N[0])?N:q}(this._basePath,Ze(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._locationStrategy.prepareExternalUrl(N)}go(N,W="",de=null){this._locationStrategy.pushState(de,"",N,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Se(W)),de)}replaceState(N,W="",de=null){this._locationStrategy.replaceState(de,"",N,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Se(W)),de)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(N=0){this._locationStrategy.historyGo?.(N)}onUrlChange(N){return this._urlChangeListeners.push(N),this._urlChangeSubscription??=this.subscribe(W=>{this._notifyUrlChangeListeners(W.url,W.state)}),()=>{const W=this._urlChangeListeners.indexOf(N);this._urlChangeListeners.splice(W,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(N="",W){this._urlChangeListeners.forEach(de=>de(N,W))}subscribe(N,W,de){return this._subject.subscribe({next:N,error:W,complete:de})}static#e=this.normalizeQueryParams=Se;static#t=this.joinWithSlash=ue;static#n=this.stripTrailingSlash=Oe;static#r=this.\u0275fac=function(W){return new(W||A)(_.CoB(Le))};static#i=this.\u0275prov=_.wxM({token:A,factory:()=>function ht(){return new Ce((0,_.CoB)(Le))}(),providedIn:"root"})}return A})();function Ze(A){return A.replace(/\/index.html$/,"")}function ye(A,q){q=encodeURIComponent(q);for(const N of A.split(";")){const W=N.indexOf("="),[de,et]=-1==W?[N,""]:[N.slice(0,W),N.slice(W+1)];if(de.trim()===q)return decodeURIComponent(et)}return null}const ft=/\s+/,wt=[];let Vt=(()=>{class A{constructor(N,W){this._ngEl=N,this._renderer=W,this.initialClasses=wt,this.stateMap=new Map}set klass(N){this.initialClasses=null!=N?N.trim().split(ft):wt}set ngClass(N){this.rawClass="string"==typeof N?N.trim().split(ft):N}ngDoCheck(){for(const W of this.initialClasses)this._updateState(W,!0);const N=this.rawClass;if(Array.isArray(N)||N instanceof Set)for(const W of N)this._updateState(W,!0);else if(null!=N)for(const W of Object.keys(N))this._updateState(W,!!N[W]);this._applyStateDiff()}_updateState(N,W){const de=this.stateMap.get(N);void 0!==de?(de.enabled!==W&&(de.changed=!0,de.enabled=W),de.touched=!0):this.stateMap.set(N,{enabled:W,changed:!0,touched:!0})}_applyStateDiff(){for(const N of this.stateMap){const W=N[0],de=N[1];de.changed?(this._toggleClass(W,de.enabled),de.changed=!1):de.touched||(de.enabled&&this._toggleClass(W,!1),this.stateMap.delete(W)),de.touched=!1}}_toggleClass(N,W){(N=N.trim()).length>0&&N.split(ft).forEach(de=>{W?this._renderer.addClass(this._ngEl.nativeElement,de):this._renderer.removeClass(this._ngEl.nativeElement,de)})}static#e=this.\u0275fac=function(W){return new(W||A)(_.GI1(_.GMv),_.GI1(_.q87))};static#t=this.\u0275dir=_.Sc5({type:A,selectors:[["","ngClass",""]],inputs:{klass:[_.Wk5.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return A})();class an{constructor(q,N,W,de){this.$implicit=q,this.ngForOf=N,this.index=W,this.count=de}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zn=(()=>{class A{set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}constructor(N,W,de){this._viewContainer=N,this._template=W,this._differs=de,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;!this._differ&&N&&(this._differ=this._differs.find(N).create(this.ngForTrackBy))}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const W=this._viewContainer;N.forEachOperation((de,et,pt)=>{if(null==de.previousIndex)W.createEmbeddedView(this._template,new an(de.item,this._ngForOf,-1,-1),null===pt?void 0:pt);else if(null==pt)W.remove(null===et?void 0:et);else if(null!==et){const ln=W.get(et);W.move(ln,pt),vr(ln,de)}});for(let de=0,et=W.length;de<et;de++){const ln=W.get(de).context;ln.index=de,ln.count=et,ln.ngForOf=this._ngForOf}N.forEachIdentityChange(de=>{vr(W.get(de.currentIndex),de)})}static ngTemplateContextGuard(N,W){return!0}static#e=this.\u0275fac=function(W){return new(W||A)(_.GI1(_.y8U),_.GI1(_.Yw2),_.GI1(_.Uj7))};static#t=this.\u0275dir=_.Sc5({type:A,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return A})();function vr(A,q){A.context.$implicit=q.item}let Vn=(()=>{class A{constructor(N,W){this._viewContainer=N,this._context=new ns,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=W}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){Ti("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){Ti("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,W){return!0}static#e=this.\u0275fac=function(W){return new(W||A)(_.GI1(_.y8U),_.GI1(_.Yw2))};static#t=this.\u0275dir=_.Sc5({type:A,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return A})();class ns{constructor(){this.$implicit=null,this.ngIf=null}}function Ti(A,q){if(q&&!q.createEmbeddedView)throw new Error(`${A} must be a TemplateRef, but received '${(0,_.GEN)(q)}'.`)}function ji(A,q){return new _.OBp(2100,!1)}class Go{createSubscription(q,N){return(0,_.sRj)(()=>q.subscribe({next:N,error:W=>{throw W}}))}dispose(q){(0,_.sRj)(()=>q.unsubscribe())}}class Ka{createSubscription(q,N){return q.then(N,W=>{throw W})}dispose(q){}}const Zn=new Ka,Si=new Go;let $r=(()=>{class A{constructor(N){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=N}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(N){return this._obj?N!==this._obj?(this._dispose(),this.transform(N)):this._latestValue:(N&&this._subscribe(N),this._latestValue)}_subscribe(N){this._obj=N,this._strategy=this._selectStrategy(N),this._subscription=this._strategy.createSubscription(N,W=>this._updateLatestValue(N,W))}_selectStrategy(N){if((0,_.w5$)(N))return Zn;if((0,_.gX2)(N))return Si;throw ji()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(N,W){N===this._obj&&(this._latestValue=W,this._ref.markForCheck())}static#e=this.\u0275fac=function(W){return new(W||A)(_.GI1(_.kD9,16))};static#t=this.\u0275pipe=_.UTH({name:"async",type:A,pure:!1,standalone:!0})}return A})(),ho=(()=>{class A{transform(N,W,de){if(null==N)return null;if(!this.supports(N))throw ji();return N.slice(W,de)}supports(N){return"string"==typeof N||Array.isArray(N)}static#e=this.\u0275fac=function(W){return new(W||A)};static#t=this.\u0275pipe=_.UTH({name:"slice",type:A,pure:!1,standalone:!0})}return A})(),li=(()=>{class A{static#e=this.\u0275fac=function(W){return new(W||A)};static#t=this.\u0275mod=_.a4G({type:A});static#n=this.\u0275inj=_.s3X({})}return A})();const Ps="browser",bs="server";function Ei(A){return A===bs}let Mo=(()=>{class A{static#e=this.\u0275prov=(0,_.wxM)({token:A,providedIn:"root",factory:()=>function Qi(A){return A===Ps}((0,_.uUt)(_.AHE))?new Ms((0,_.uUt)(Ie),window):new fa})}return A})();class Ms{constructor(q,N){this.document=q,this.window=N,this.offset=()=>[0,0]}setOffset(q){this.offset=Array.isArray(q)?()=>q:q}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(q){this.window.scrollTo(q[0],q[1])}scrollToAnchor(q){const N=function Wi(A,q){const N=A.getElementById(q)||A.getElementsByName(q)[0];if(N)return N;if("function"==typeof A.createTreeWalker&&A.body&&"function"==typeof A.body.attachShadow){const W=A.createTreeWalker(A.body,NodeFilter.SHOW_ELEMENT);let de=W.currentNode;for(;de;){const et=de.shadowRoot;if(et){const pt=et.getElementById(q)||et.querySelector(`[name="${q}"]`);if(pt)return pt}de=W.nextNode()}}return null}(this.document,q);N&&(this.scrollToElement(N),N.focus())}setHistoryScrollRestoration(q){this.window.history.scrollRestoration=q}scrollToElement(q){const N=q.getBoundingClientRect(),W=N.left+this.window.pageXOffset,de=N.top+this.window.pageYOffset,et=this.offset();this.window.scrollTo(W-et[0],de-et[1])}}class fa{setOffset(q){}getScrollPosition(){return[0,0]}scrollToPosition(q){}scrollToAnchor(q){}setHistoryScrollRestoration(q){}}class Oo{}},7048:(Xt,$e,V)=>{V.d($e,{KK:()=>tt,SU:()=>Cn}),V(1528);var J=V(4496),I=V(2700),O=V(3252),ge=V(9900),Ee=V(6020),Ie=V(6684),Be=V(4704),je=V(8824),le=V(7368),ue=V(1368);class Oe{}class Se{}class Le{constructor(_e){this.normalizedNames=new Map,this.lazyUpdate=null,_e?"string"==typeof _e?this.lazyInit=()=>{this.headers=new Map,_e.split("\n").forEach(ye=>{const ft=ye.indexOf(":");if(ft>0){const wt=ye.slice(0,ft),Vt=wt.toLowerCase(),qt=ye.slice(ft+1).trim();this.maybeSetNormalizedName(wt,Vt),this.headers.has(Vt)?this.headers.get(Vt).push(qt):this.headers.set(Vt,[qt])}})}:typeof Headers<"u"&&_e instanceof Headers?(this.headers=new Map,_e.forEach((ye,ft)=>{this.setHeaderEntries(ft,ye)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(_e).forEach(([ye,ft])=>{this.setHeaderEntries(ye,ft)})}:this.headers=new Map}has(_e){return this.init(),this.headers.has(_e.toLowerCase())}get(_e){this.init();const ye=this.headers.get(_e.toLowerCase());return ye&&ye.length>0?ye[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(_e){return this.init(),this.headers.get(_e.toLowerCase())||null}append(_e,ye){return this.clone({name:_e,value:ye,op:"a"})}set(_e,ye){return this.clone({name:_e,value:ye,op:"s"})}delete(_e,ye){return this.clone({name:_e,value:ye,op:"d"})}maybeSetNormalizedName(_e,ye){this.normalizedNames.has(ye)||this.normalizedNames.set(ye,_e)}init(){this.lazyInit&&(this.lazyInit instanceof Le?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(_e=>this.applyUpdate(_e)),this.lazyUpdate=null))}copyFrom(_e){_e.init(),Array.from(_e.headers.keys()).forEach(ye=>{this.headers.set(ye,_e.headers.get(ye)),this.normalizedNames.set(ye,_e.normalizedNames.get(ye))})}clone(_e){const ye=new Le;return ye.lazyInit=this.lazyInit&&this.lazyInit instanceof Le?this.lazyInit:this,ye.lazyUpdate=(this.lazyUpdate||[]).concat([_e]),ye}applyUpdate(_e){const ye=_e.name.toLowerCase();switch(_e.op){case"a":case"s":let ft=_e.value;if("string"==typeof ft&&(ft=[ft]),0===ft.length)return;this.maybeSetNormalizedName(_e.name,ye);const wt=("a"===_e.op?this.headers.get(ye):void 0)||[];wt.push(...ft),this.headers.set(ye,wt);break;case"d":const Vt=_e.value;if(Vt){let qt=this.headers.get(ye);if(!qt)return;qt=qt.filter(pn=>-1===Vt.indexOf(pn)),0===qt.length?(this.headers.delete(ye),this.normalizedNames.delete(ye)):this.headers.set(ye,qt)}else this.headers.delete(ye),this.normalizedNames.delete(ye)}}setHeaderEntries(_e,ye){const ft=(Array.isArray(ye)?ye:[ye]).map(Vt=>Vt.toString()),wt=_e.toLowerCase();this.headers.set(wt,ft),this.maybeSetNormalizedName(_e,wt)}forEach(_e){this.init(),Array.from(this.normalizedNames.keys()).forEach(ye=>_e(this.normalizedNames.get(ye),this.headers.get(ye)))}}class Ve{encodeKey(_e){return _t(_e)}encodeValue(_e){return _t(_e)}decodeKey(_e){return decodeURIComponent(_e)}decodeValue(_e){return decodeURIComponent(_e)}}const Ce=/%(\d[a-f0-9])/gi,ht={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _t(se){return encodeURIComponent(se).replace(Ce,(_e,ye)=>ht[ye]??_e)}function Ze(se){return`${se}`}class rt{constructor(_e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=_e.encoder||new Ve,_e.fromString){if(_e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Xe(se,_e){const ye=new Map;return se.length>0&&se.replace(/^\?/,"").split("&").forEach(wt=>{const Vt=wt.indexOf("="),[qt,pn]=-1==Vt?[_e.decodeKey(wt),""]:[_e.decodeKey(wt.slice(0,Vt)),_e.decodeValue(wt.slice(Vt+1))],an=ye.get(qt)||[];an.push(pn),ye.set(qt,an)}),ye}(_e.fromString,this.encoder)}else _e.fromObject?(this.map=new Map,Object.keys(_e.fromObject).forEach(ye=>{const ft=_e.fromObject[ye],wt=Array.isArray(ft)?ft.map(Ze):[Ze(ft)];this.map.set(ye,wt)})):this.map=null}has(_e){return this.init(),this.map.has(_e)}get(_e){this.init();const ye=this.map.get(_e);return ye?ye[0]:null}getAll(_e){return this.init(),this.map.get(_e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(_e,ye){return this.clone({param:_e,value:ye,op:"a"})}appendAll(_e){const ye=[];return Object.keys(_e).forEach(ft=>{const wt=_e[ft];Array.isArray(wt)?wt.forEach(Vt=>{ye.push({param:ft,value:Vt,op:"a"})}):ye.push({param:ft,value:wt,op:"a"})}),this.clone(ye)}set(_e,ye){return this.clone({param:_e,value:ye,op:"s"})}delete(_e,ye){return this.clone({param:_e,value:ye,op:"d"})}toString(){return this.init(),this.keys().map(_e=>{const ye=this.encoder.encodeKey(_e);return this.map.get(_e).map(ft=>ye+"="+this.encoder.encodeValue(ft)).join("&")}).filter(_e=>""!==_e).join("&")}clone(_e){const ye=new rt({encoder:this.encoder});return ye.cloneFrom=this.cloneFrom||this,ye.updates=(this.updates||[]).concat(_e),ye}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(_e=>this.map.set(_e,this.cloneFrom.map.get(_e))),this.updates.forEach(_e=>{switch(_e.op){case"a":case"s":const ye=("a"===_e.op?this.map.get(_e.param):void 0)||[];ye.push(Ze(_e.value)),this.map.set(_e.param,ye);break;case"d":if(void 0===_e.value){this.map.delete(_e.param);break}{let ft=this.map.get(_e.param)||[];const wt=ft.indexOf(Ze(_e.value));-1!==wt&&ft.splice(wt,1),ft.length>0?this.map.set(_e.param,ft):this.map.delete(_e.param)}}}),this.cloneFrom=this.updates=null)}}class Ot{constructor(){this.map=new Map}set(_e,ye){return this.map.set(_e,ye),this}get(_e){return this.map.has(_e)||this.map.set(_e,_e.defaultValue()),this.map.get(_e)}delete(_e){return this.map.delete(_e),this}has(_e){return this.map.has(_e)}keys(){return this.map.keys()}}function Me(se){return typeof ArrayBuffer<"u"&&se instanceof ArrayBuffer}function Ct(se){return typeof Blob<"u"&&se instanceof Blob}function bt(se){return typeof FormData<"u"&&se instanceof FormData}class ke{constructor(_e,ye,ft,wt){let Vt;if(this.url=ye,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=_e.toUpperCase(),function At(se){switch(se){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||wt?(this.body=void 0!==ft?ft:null,Vt=wt):Vt=ft,Vt&&(this.reportProgress=!!Vt.reportProgress,this.withCredentials=!!Vt.withCredentials,Vt.responseType&&(this.responseType=Vt.responseType),Vt.headers&&(this.headers=Vt.headers),Vt.context&&(this.context=Vt.context),Vt.params&&(this.params=Vt.params),this.transferCache=Vt.transferCache),this.headers??=new Le,this.context??=new Ot,this.params){const qt=this.params.toString();if(0===qt.length)this.urlWithParams=ye;else{const pn=ye.indexOf("?");this.urlWithParams=ye+(-1===pn?"?":pn<ye.length-1?"&":"")+qt}}else this.params=new rt,this.urlWithParams=ye}serializeBody(){return null===this.body?null:Me(this.body)||Ct(this.body)||bt(this.body)||function Ut(se){return typeof URLSearchParams<"u"&&se instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof rt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bt(this.body)?null:Ct(this.body)?this.body.type||null:Me(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof rt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(_e={}){const ye=_e.method||this.method,ft=_e.url||this.url,wt=_e.responseType||this.responseType,Vt=void 0!==_e.body?_e.body:this.body,qt=void 0!==_e.withCredentials?_e.withCredentials:this.withCredentials,pn=void 0!==_e.reportProgress?_e.reportProgress:this.reportProgress;let an=_e.headers||this.headers,zn=_e.params||this.params;const vr=_e.context??this.context;return void 0!==_e.setHeaders&&(an=Object.keys(_e.setHeaders).reduce((sr,Vn)=>sr.set(Vn,_e.setHeaders[Vn]),an)),_e.setParams&&(zn=Object.keys(_e.setParams).reduce((sr,Vn)=>sr.set(Vn,_e.setParams[Vn]),zn)),new ke(ye,ft,Vt,{params:zn,headers:an,context:vr,reportProgress:pn,responseType:wt,withCredentials:qt})}}var Rt=function(se){return se[se.Sent=0]="Sent",se[se.UploadProgress=1]="UploadProgress",se[se.ResponseHeader=2]="ResponseHeader",se[se.DownloadProgress=3]="DownloadProgress",se[se.Response=4]="Response",se[se.User=5]="User",se}(Rt||{});class ct{constructor(_e,ye=Re.Ok,ft="OK"){this.headers=_e.headers||new Le,this.status=void 0!==_e.status?_e.status:ye,this.statusText=_e.statusText||ft,this.url=_e.url||null,this.ok=this.status>=200&&this.status<300}}class Nt extends ct{constructor(_e={}){super(_e),this.type=Rt.ResponseHeader}clone(_e={}){return new Nt({headers:_e.headers||this.headers,status:void 0!==_e.status?_e.status:this.status,statusText:_e.statusText||this.statusText,url:_e.url||this.url||void 0})}}class Kt extends ct{constructor(_e={}){super(_e),this.type=Rt.Response,this.body=void 0!==_e.body?_e.body:null}clone(_e={}){return new Kt({body:void 0!==_e.body?_e.body:this.body,headers:_e.headers||this.headers,status:void 0!==_e.status?_e.status:this.status,statusText:_e.statusText||this.statusText,url:_e.url||this.url||void 0})}}class sn extends ct{constructor(_e){super(_e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${_e.url||"(unknown url)"}`:`Http failure response for ${_e.url||"(unknown url)"}: ${_e.status} ${_e.statusText}`,this.error=_e.error||null}}var Re=function(se){return se[se.Continue=100]="Continue",se[se.SwitchingProtocols=101]="SwitchingProtocols",se[se.Processing=102]="Processing",se[se.EarlyHints=103]="EarlyHints",se[se.Ok=200]="Ok",se[se.Created=201]="Created",se[se.Accepted=202]="Accepted",se[se.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",se[se.NoContent=204]="NoContent",se[se.ResetContent=205]="ResetContent",se[se.PartialContent=206]="PartialContent",se[se.MultiStatus=207]="MultiStatus",se[se.AlreadyReported=208]="AlreadyReported",se[se.ImUsed=226]="ImUsed",se[se.MultipleChoices=300]="MultipleChoices",se[se.MovedPermanently=301]="MovedPermanently",se[se.Found=302]="Found",se[se.SeeOther=303]="SeeOther",se[se.NotModified=304]="NotModified",se[se.UseProxy=305]="UseProxy",se[se.Unused=306]="Unused",se[se.TemporaryRedirect=307]="TemporaryRedirect",se[se.PermanentRedirect=308]="PermanentRedirect",se[se.BadRequest=400]="BadRequest",se[se.Unauthorized=401]="Unauthorized",se[se.PaymentRequired=402]="PaymentRequired",se[se.Forbidden=403]="Forbidden",se[se.NotFound=404]="NotFound",se[se.MethodNotAllowed=405]="MethodNotAllowed",se[se.NotAcceptable=406]="NotAcceptable",se[se.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",se[se.RequestTimeout=408]="RequestTimeout",se[se.Conflict=409]="Conflict",se[se.Gone=410]="Gone",se[se.LengthRequired=411]="LengthRequired",se[se.PreconditionFailed=412]="PreconditionFailed",se[se.PayloadTooLarge=413]="PayloadTooLarge",se[se.UriTooLong=414]="UriTooLong",se[se.UnsupportedMediaType=415]="UnsupportedMediaType",se[se.RangeNotSatisfiable=416]="RangeNotSatisfiable",se[se.ExpectationFailed=417]="ExpectationFailed",se[se.ImATeapot=418]="ImATeapot",se[se.MisdirectedRequest=421]="MisdirectedRequest",se[se.UnprocessableEntity=422]="UnprocessableEntity",se[se.Locked=423]="Locked",se[se.FailedDependency=424]="FailedDependency",se[se.TooEarly=425]="TooEarly",se[se.UpgradeRequired=426]="UpgradeRequired",se[se.PreconditionRequired=428]="PreconditionRequired",se[se.TooManyRequests=429]="TooManyRequests",se[se.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",se[se.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",se[se.InternalServerError=500]="InternalServerError",se[se.NotImplemented=501]="NotImplemented",se[se.BadGateway=502]="BadGateway",se[se.ServiceUnavailable=503]="ServiceUnavailable",se[se.GatewayTimeout=504]="GatewayTimeout",se[se.HttpVersionNotSupported=505]="HttpVersionNotSupported",se[se.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",se[se.InsufficientStorage=507]="InsufficientStorage",se[se.LoopDetected=508]="LoopDetected",se[se.NotExtended=510]="NotExtended",se[se.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",se}(Re||{});function He(se,_e){return{body:_e,headers:se.headers,context:se.context,observe:se.observe,params:se.params,reportProgress:se.reportProgress,responseType:se.responseType,withCredentials:se.withCredentials,transferCache:se.transferCache}}let tt=(()=>{class se{constructor(ye){this.handler=ye}request(ye,ft,wt={}){let Vt;if(ye instanceof ke)Vt=ye;else{let an,zn;an=wt.headers instanceof Le?wt.headers:new Le(wt.headers),wt.params&&(zn=wt.params instanceof rt?wt.params:new rt({fromObject:wt.params})),Vt=new ke(ye,ft,void 0!==wt.body?wt.body:null,{headers:an,context:wt.context,params:zn,reportProgress:wt.reportProgress,responseType:wt.responseType||"json",withCredentials:wt.withCredentials,transferCache:wt.transferCache})}const qt=(0,I.of)(Vt).pipe((0,Ee.m)(an=>this.handler.handle(an)));if(ye instanceof ke||"events"===wt.observe)return qt;const pn=qt.pipe((0,Ie.I)(an=>an instanceof Kt));switch(wt.observe||"body"){case"body":switch(Vt.responseType){case"arraybuffer":return pn.pipe((0,Be.k)(an=>{if(null!==an.body&&!(an.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return an.body}));case"blob":return pn.pipe((0,Be.k)(an=>{if(null!==an.body&&!(an.body instanceof Blob))throw new Error("Response is not a Blob.");return an.body}));case"text":return pn.pipe((0,Be.k)(an=>{if(null!==an.body&&"string"!=typeof an.body)throw new Error("Response is not a string.");return an.body}));default:return pn.pipe((0,Be.k)(an=>an.body))}case"response":return pn;default:throw new Error(`Unreachable: unhandled observe type ${wt.observe}}`)}}delete(ye,ft={}){return this.request("DELETE",ye,ft)}get(ye,ft={}){return this.request("GET",ye,ft)}head(ye,ft={}){return this.request("HEAD",ye,ft)}jsonp(ye,ft){return this.request("JSONP",ye,{params:(new rt).append(ft,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ye,ft={}){return this.request("OPTIONS",ye,ft)}patch(ye,ft,wt={}){return this.request("PATCH",ye,He(wt,ft))}post(ye,ft,wt={}){return this.request("POST",ye,He(wt,ft))}put(ye,ft,wt={}){return this.request("PUT",ye,He(wt,ft))}static#e=this.\u0275fac=function(ft){return new(ft||se)(J.CoB(Oe))};static#t=this.\u0275prov=J.wxM({token:se,factory:se.\u0275fac})}return se})();function dt(se,_e){return _e(se)}function yt(se,_e){return(ye,ft)=>_e.intercept(ye,{handle:wt=>se(wt,ft)})}const Yt=new J.UbH(""),Wn=new J.UbH(""),Rr=new J.UbH(""),Ht=new J.UbH("");function wr(){let se=null;return(_e,ye)=>{null===se&&(se=((0,J.uUt)(Yt,{optional:!0})??[]).reduceRight(yt,dt));const ft=(0,J.uUt)(J.g9Y),wt=ft.add();return se(_e,ye).pipe((0,je.U)(()=>ft.remove(wt)))}}let kn=(()=>{class se extends Oe{constructor(ye,ft){super(),this.backend=ye,this.injector=ft,this.chain=null,this.pendingTasks=(0,J.uUt)(J.g9Y);const wt=(0,J.uUt)(Ht,{optional:!0});this.backend=wt??ye}handle(ye){if(null===this.chain){const wt=Array.from(new Set([...this.injector.get(Wn),...this.injector.get(Rr,[])]));this.chain=wt.reduceRight((Vt,qt)=>function ut(se,_e,ye){return(ft,wt)=>(0,J.SMS)(ye,()=>_e(ft,Vt=>se(Vt,wt)))}(Vt,qt,this.injector),dt)}const ft=this.pendingTasks.add();return this.chain(ye,wt=>this.backend.handle(wt)).pipe((0,je.U)(()=>this.pendingTasks.remove(ft)))}static#e=this.\u0275fac=function(ft){return new(ft||se)(J.CoB(Se),J.CoB(J.SIe))};static#t=this.\u0275prov=J.wxM({token:se,factory:se.\u0275fac})}return se})();const bn=/^\)\]\}',?\n/;let Tr=(()=>{class se{constructor(ye){this.xhrFactory=ye}handle(ye){if("JSONP"===ye.method)throw new J.OBp(-2800,!1);const ft=this.xhrFactory;return(ft.\u0275loadImpl?(0,ge.Q)(ft.\u0275loadImpl()):(0,I.of)(null)).pipe((0,le.G)(()=>new O._(Vt=>{const qt=ft.build();if(qt.open(ye.method,ye.urlWithParams),ye.withCredentials&&(qt.withCredentials=!0),ye.headers.forEach((kr,qn)=>qt.setRequestHeader(kr,qn.join(","))),ye.headers.has("Accept")||qt.setRequestHeader("Accept","application/json, text/plain, */*"),!ye.headers.has("Content-Type")){const kr=ye.detectContentTypeHeader();null!==kr&&qt.setRequestHeader("Content-Type",kr)}if(ye.responseType){const kr=ye.responseType.toLowerCase();qt.responseType="json"!==kr?kr:"text"}const pn=ye.serializeBody();let an=null;const zn=()=>{if(null!==an)return an;const kr=qt.statusText||"OK",qn=new Le(qt.getAllResponseHeaders()),ei=function Fn(se){return"responseURL"in se&&se.responseURL?se.responseURL:/^X-Request-URL:/m.test(se.getAllResponseHeaders())?se.getResponseHeader("X-Request-URL"):null}(qt)||ye.url;return an=new Nt({headers:qn,status:qt.status,statusText:kr,url:ei}),an},vr=()=>{let{headers:kr,status:qn,statusText:ei,url:$n}=zn(),fr=null;qn!==Re.NoContent&&(fr=typeof qt.response>"u"?qt.responseText:qt.response),0===qn&&(qn=fr?Re.Ok:0);let rs=qn>=200&&qn<300;if("json"===ye.responseType&&"string"==typeof fr){const Di=fr;fr=fr.replace(bn,"");try{fr=""!==fr?JSON.parse(fr):null}catch(si){fr=Di,rs&&(rs=!1,fr={error:si,text:fr})}}rs?(Vt.next(new Kt({body:fr,headers:kr,status:qn,statusText:ei,url:$n||void 0})),Vt.complete()):Vt.error(new sn({error:fr,headers:kr,status:qn,statusText:ei,url:$n||void 0}))},sr=kr=>{const{url:qn}=zn(),ei=new sn({error:kr,status:qt.status||0,statusText:qt.statusText||"Unknown Error",url:qn||void 0});Vt.error(ei)};let Vn=!1;const ns=kr=>{Vn||(Vt.next(zn()),Vn=!0);let qn={type:Rt.DownloadProgress,loaded:kr.loaded};kr.lengthComputable&&(qn.total=kr.total),"text"===ye.responseType&&qt.responseText&&(qn.partialText=qt.responseText),Vt.next(qn)},Ti=kr=>{let qn={type:Rt.UploadProgress,loaded:kr.loaded};kr.lengthComputable&&(qn.total=kr.total),Vt.next(qn)};return qt.addEventListener("load",vr),qt.addEventListener("error",sr),qt.addEventListener("timeout",sr),qt.addEventListener("abort",sr),ye.reportProgress&&(qt.addEventListener("progress",ns),null!==pn&&qt.upload&&qt.upload.addEventListener("progress",Ti)),qt.send(pn),Vt.next({type:Rt.Sent}),()=>{qt.removeEventListener("error",sr),qt.removeEventListener("abort",sr),qt.removeEventListener("load",vr),qt.removeEventListener("timeout",sr),ye.reportProgress&&(qt.removeEventListener("progress",ns),null!==pn&&qt.upload&&qt.upload.removeEventListener("progress",Ti)),qt.readyState!==qt.DONE&&qt.abort()}})))}static#e=this.\u0275fac=function(ft){return new(ft||se)(J.CoB(ue.OM))};static#t=this.\u0275prov=J.wxM({token:se,factory:se.\u0275fac})}return se})();const Tn=new J.UbH(""),Gn=new J.UbH("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),jr=new J.UbH("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Nr{}let Ds=(()=>{class se{constructor(ye,ft,wt){this.doc=ye,this.platform=ft,this.cookieName=wt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ye=this.doc.cookie||"";return ye!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,ue.Sg)(ye,this.cookieName),this.lastCookieString=ye),this.lastToken}static#e=this.\u0275fac=function(ft){return new(ft||se)(J.CoB(ue.Ud),J.CoB(J.AHE),J.CoB(Gn))};static#t=this.\u0275prov=J.wxM({token:se,factory:se.\u0275fac})}return se})();function pi(se,_e){const ye=se.url.toLowerCase();if(!(0,J.uUt)(Tn)||"GET"===se.method||"HEAD"===se.method||ye.startsWith("http://")||ye.startsWith("https://"))return _e(se);const ft=(0,J.uUt)(Nr).getToken(),wt=(0,J.uUt)(jr);return null!=ft&&!se.headers.has(wt)&&(se=se.clone({headers:se.headers.set(wt,ft)})),_e(se)}var Ge=function(se){return se[se.Interceptors=0]="Interceptors",se[se.LegacyInterceptors=1]="LegacyInterceptors",se[se.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",se[se.NoXsrfProtection=3]="NoXsrfProtection",se[se.JsonpSupport=4]="JsonpSupport",se[se.RequestsMadeViaParent=5]="RequestsMadeViaParent",se[se.Fetch=6]="Fetch",se}(Ge||{});function Fe(...se){const _e=[tt,Tr,kn,{provide:Oe,useExisting:kn},{provide:Se,useExisting:Tr},{provide:Wn,useValue:pi,multi:!0},{provide:Tn,useValue:!0},{provide:Nr,useClass:Ds}];for(const ye of se)_e.push(...ye.\u0275providers);return(0,J.AFj)(_e)}const ae=new J.UbH("");function X(){return function he(se,_e){return{\u0275kind:se,\u0275providers:_e}}(Ge.LegacyInterceptors,[{provide:ae,useFactory:wr},{provide:Wn,useExisting:ae,multi:!0}])}let Cn=(()=>{class se{static#e=this.\u0275fac=function(ft){return new(ft||se)};static#t=this.\u0275mod=J.a4G({type:se});static#n=this.\u0275inj=J.s3X({providers:[Fe(X())]})}return se})()},4496:(Xt,$e,V)=>{V.d($e,{qid:()=>HC,QHP:()=>cs,kZF:()=>ED,Ev2:()=>LR,Swk:()=>fp,YND:()=>ee,kD9:()=>Zl,ESV:()=>vR,ayF:()=>SR,syz:()=>Ba,GMv:()=>ot,SIe:()=>nt,eAe:()=>Lu,_w7:()=>ii,_6O:()=>bn,UbH:()=>gr,zZn:()=>la,Uj7:()=>Qf,YNh:()=>Jf,KYU:()=>CE,obV:()=>rE,oF$:()=>Vd,WW2:()=>Us,T7N:()=>wl,AHE:()=>D,crf:()=>M,q87:()=>lv,O8F:()=>uv,yzm:()=>Af,Qfh:()=>Xc,Yw2:()=>Bf,G4X:()=>pR,eOv:()=>yD,j1C:()=>$b,a8Z:()=>lD,y8U:()=>k_,K6R:()=>Cn,I44:()=>x_,cZD:()=>lM,SIz:()=>h,Gk1:()=>XI,grM:()=>RD,wd:()=>Gt,uUt:()=>mr,sPQ:()=>OR,_Ap:()=>Ss,AFj:()=>Zc,m4O:()=>FR,o9M:()=>hM,SMS:()=>pd,sRj:()=>Bu,oPY:()=>dD,i4S:()=>v,GUM:()=>im,g9Y:()=>R,OBp:()=>$t,aS5:()=>mD,Mn9:()=>_D,iMv:()=>wC,G58:()=>zr,y02:()=>vw,IHs:()=>en,K_M:()=>Lo,Guz:()=>kd,w5$:()=>GC,gX2:()=>vD,auf:()=>Qo,GEN:()=>Fn,eg9:()=>Bg,Wk5:()=>se,QJr:()=>nE,SYr:()=>ru,M5G:()=>RT,UHJ:()=>MT,yG2:()=>ig,e48:()=>cC,eAK:()=>pC,szK:()=>sT,In1:()=>Yr,Sc5:()=>Go,wxM:()=>pr,s3X:()=>Jo,a4G:()=>$o,UTH:()=>Ka,GI1:()=>Hl,wR5:()=>EC,C$Y:()=>dE,I0R:()=>lE,KQA:()=>mw,otF:()=>Ep,CoB:()=>cr,gJ8:()=>ff,KEo:()=>Ry,qCj:()=>AC,Gqi:()=>cT,GaO:()=>Yw,wVc:()=>HT,kDX:()=>zT,g7$:()=>qT,I7O:()=>KT,E7m:()=>hC,wto:()=>aT,CGJ:()=>eo,usT:()=>Qa,K6U:()=>rl,YFg:()=>bm,yuY:()=>nn,OEk:()=>yT,cNF:()=>bC,oRS:()=>mE,kNx:()=>PT,iHE:()=>MC,OKB:()=>RC,CC$:()=>oT}),V(1528);let I=null,ge=1;const Ee=Symbol("SIGNAL");function Ie(t){const r=I;return I=t,r}function Le(t){if((!Ot(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==ge)){if(!t.producerMustRecompute(t)&&!_t(t))return t.dirty=!1,void(t.lastCleanEpoch=ge);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ge}}function _t(t){At(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(Le(s),a!==s.version))return!0}return!1}function me(t,r){if(function Me(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),At(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)me(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],u=t.liveConsumerNode[r];At(u),u.producerIndexOfThis[a]=r}}function Ot(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function At(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Nt=null;var ut=V(5657),Yt=V(6928),Wn=V(6700),Rr=V(4704);const wr="https://g.co/ng/security#xss";class $t extends Error{constructor(r,s){super(zr(r,s)),this.code=r}}function zr(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}function yn(t){return r=>{setTimeout(t,void 0,r)}}const ii=class In extends ut.E{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let u=r,f=s||(()=>null),E=a;if(r&&"object"==typeof r){const P=r;u=P.next?.bind(P),f=P.error?.bind(P),E=P.complete?.bind(P)}this.__isAsync&&(f=yn(f),u&&(u=yn(u)),E&&(E=yn(E)));const C=super.subscribe({next:u,error:f,complete:E});return r instanceof Yt.wH&&r.add(C),C}};var bn=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(bn||{});function Fn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Fn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Tr(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}var En=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(En||{}),Cn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Cn||{});function On(t){return{toString:t}.toString()}const en=globalThis,Ln={},Pe=[];function qe(t){for(let r in t)if(t[r]===qe)return r;throw Error("Could not find renamed property on target object.")}function Qe(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}const Tt=qe({\u0275cmp:qe}),rn=qe({\u0275dir:qe}),Bn=qe({\u0275pipe:qe}),Hn=qe({\u0275mod:qe}),Yn=qe({\u0275fac:qe}),Kr=qe({__NG_ELEMENT_ID__:qe}),lr=qe({__NG_ENV_ID__:qe});var se=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(se||{});function _e(t,r,s){let a=t.length;for(;;){const u=t.indexOf(r,s);if(-1===u)return u;if(0===u||t.charCodeAt(u-1)<=32){const f=r.length;if(u+f===a||t.charCodeAt(u+f)<=32)return u}s=u+1}}function ye(t,r,s){let a=0;for(;a<s.length;){const u=s[a];if("number"==typeof u){if(0!==u)break;a++;const f=s[a++],E=s[a++],C=s[a++];t.setAttribute(r,E,C,f)}else{const f=u,E=s[++a];wt(f)?t.setProperty(r,f,E):t.setAttribute(r,f,E),a++}}return a}function ft(t){return 3===t||4===t||6===t}function wt(t){return 64===t.charCodeAt(0)}function Vt(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const u=r[a];"number"==typeof u?s=u:0===s||qt(t,s,u,null,-1===s||2===s?r[++a]:null)}}return t}function qt(t,r,s,a,u){let f=0,E=t.length;if(-1===r)E=-1;else for(;f<t.length;){const C=t[f++];if("number"==typeof C){if(C===r){E=-1;break}if(C>r){E=f-1;break}}}for(;f<t.length;){const C=t[f];if("number"==typeof C)break;if(C===s){if(null===a)return void(null!==u&&(t[f+1]=u));if(a===t[f+1])return void(t[f+2]=u)}f++,null!==a&&f++,null!==u&&f++}-1!==E&&(t.splice(E,0,r),f=E+1),t.splice(f++,0,s),null!==a&&t.splice(f++,0,a),null!==u&&t.splice(f++,0,u)}const pn="ng-template";function an(t,r,s){let a=0,u=!0;for(;a<t.length;){let f=t[a++];if("string"==typeof f&&u){const E=t[a++];if(s&&"class"===f&&-1!==_e(E.toLowerCase(),r,0))return!0}else{if(1===f){for(;a<t.length&&"string"==typeof(f=t[a++]);)if(f.toLowerCase()===r)return!0;return!1}"number"==typeof f&&(u=!1)}}return!1}function zn(t){return 4===t.type&&t.value!==pn}function vr(t,r,s){return r===(4!==t.type||s?t.value:pn)}function sr(t,r,s){let a=4;const u=t.attrs||[],f=function qn(t){for(let r=0;r<t.length;r++)if(ft(t[r]))return r;return t.length}(u);let E=!1;for(let C=0;C<r.length;C++){const P=r[C];if("number"!=typeof P){if(!E)if(4&a){if(a=2|1&a,""!==P&&!vr(t,P,s)||""===P&&1===r.length){if(Vn(a))return!1;E=!0}}else{const U=8&a?P:r[++C];if(8&a&&null!==t.attrs){if(!an(t.attrs,U,s)){if(Vn(a))return!1;E=!0}continue}const oe=ns(8&a?"class":P,u,zn(t),s);if(-1===oe){if(Vn(a))return!1;E=!0;continue}if(""!==U){let Te;Te=oe>f?"":u[oe+1].toLowerCase();const xe=8&a?Te:null;if(xe&&-1!==_e(xe,U,0)||2&a&&U!==Te){if(Vn(a))return!1;E=!0}}}}else{if(!E&&!Vn(a)&&!Vn(P))return!1;if(E&&Vn(P))continue;E=!1,a=P|1&a}}return Vn(a)||E}function Vn(t){return 0==(1&t)}function ns(t,r,s,a){if(null===r)return-1;let u=0;if(a||!s){let f=!1;for(;u<r.length;){const E=r[u];if(E===t)return u;if(3===E||6===E)f=!0;else{if(1===E||2===E){let C=r[++u];for(;"string"==typeof C;)C=r[++u];continue}if(4===E)break;if(0===E){u+=4;continue}}u+=f?1:2}return-1}return function ei(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function Ti(t,r,s=!1){for(let a=0;a<r.length;a++)if(sr(t,r[a],s))return!0;return!1}function fr(t,r){return t?":not("+r.trim()+")":r}function rs(t){let r=t[0],s=1,a=2,u="",f=!1;for(;s<t.length;){let E=t[s];if("string"==typeof E)if(2&a){const C=t[++s];u+="["+E+(C.length>0?'="'+C+'"':"")+"]"}else 8&a?u+="."+E:4&a&&(u+=" "+E);else""!==u&&!Vn(E)&&(r+=fr(f,u),u=""),a=E,f=f||!Vn(a);s++}return""!==u&&(r+=fr(f,u)),r}function Yr(t){return On(()=>{const r=ra(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===En.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Cn.Emulated,styles:t.styles||Pe,_:null,schemas:t.schemas||null,tView:null,id:""};ia(s);const a=t.dependencies;return s.directiveDefs=Bs(a,!1),s.pipeDefs=Bs(a,!0),s.id=function bo(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const u of s)r=Math.imul(31,r)+u.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function As(t){return Zn(t)||Si(t)}function Ai(t){return null!==t}function $o(t){return On(()=>({type:t.type,bootstrap:t.bootstrap||Pe,declarations:t.declarations||Pe,imports:t.imports||Pe,exports:t.exports||Pe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ji(t,r){if(null==t)return Ln;const s={};for(const a in t)if(t.hasOwnProperty(a)){const u=t[a];let f,E,C=se.None;Array.isArray(u)?(C=u[0],f=u[1],E=u[2]??f):(f=u,E=u),r?(s[f]=C!==se.None?[a,C]:a,r[f]=E):s[f]=a}return s}function Go(t){return On(()=>{const r=ra(t);return ia(r),r})}function Ka(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Zn(t){return t[Tt]||null}function Si(t){return t[rn]||null}function $r(t){return t[Bn]||null}function Ss(t){const r=Zn(t)||Si(t)||$r(t);return null!==r&&r.standalone}function oi(t,r){const s=t[Hn]||null;if(!s&&!0===r)throw new Error(`Type ${Fn(t)} does not have '\u0275mod' property.`);return s}function ra(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||Ln,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Pe,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ji(t.inputs,r),outputs:ji(t.outputs),debugInfo:null}}function ia(t){t.features?.forEach(r=>r(t))}function Bs(t,r){if(!t)return null;const s=r?$r:As;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(Ai)}const Qr=0,Bt=1,vn=2,Ar=3,Yi=4,xi=5,Ni=6,$i=7,or=8,ki=9,Gi=10,An=11,Pi=12,ho=13,qs=14,li=15,Ps=16,bs=17,bi=18,is=19,Qi=20,Ei=21,Ro=22,Rs=23,cn=25,Mo=1,Wi=7,Oo=9,di=10;var ys=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ys||{});function ss(t){return Array.isArray(t)&&"object"==typeof t[Mo]}function Hi(t){return Array.isArray(t)&&!0===t[Mo]}function Os(t){return 0!=(4&t.flags)}function Fi(t){return t.componentOffset>-1}function xs(t){return 1==(1&t.flags)}function Li(t){return!!t.template}function sa(t){return 0!=(512&t[vn])}let Ho=!1;function Fr(t){for(;Array.isArray(t);)t=t[Qr];return t}function xo(t,r){return Fr(r[t])}function dr(t,r){return Fr(r[t.index])}function Ji(t,r){return t.data[r]}function ma(t,r){return t[r]}function ks(t,r){const s=r[t];return ss(s)?s:s[Qr]}function Io(t){return 128==(128&t[vn])}function ds(t,r){return null==r?null:t[r]}function Js(t){t[bs]=0}function Co(t){1024&t[vn]||(t[vn]|=1024,Io(t)&&zo(t))}function Xs(t){return!!(9216&t[vn]||t[Rs]?.dirty)}function Oa(t){Xs(t)?zo(t):64&t[vn]&&(function ai(){return Ho}()?(t[vn]|=1024,zo(t)):t[Gi].changeDetectionScheduler?.notify())}function zo(t){t[Gi].changeDetectionScheduler?.notify();let r=$s(t);for(;null!==r&&!(8192&r[vn])&&(r[vn]|=8192,Io(r));)r=$s(r)}function xa(t,r){if(256==(256&t[vn]))throw new $t(911,!1);null===t[Ei]&&(t[Ei]=[]),t[Ei].push(r)}function $s(t){const r=t[Ar];return Hi(r)?r[Ar]:r}const Mn={lFrame:Pr(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wo(){return Mn.bindingsEnabled}function vt(){return Mn.lFrame.lView}function ar(){return Mn.lFrame.tView}function Qa(t){return Mn.lFrame.contextLView=t,t[or]}function eo(t){return Mn.lFrame.contextLView=null,t}function Or(){let t=Lr();for(;null!==t&&64===t.type;)t=t.parent;return t}function Lr(){return Mn.lFrame.currentTNode}function po(t,r){const s=Mn.lFrame;s.currentTNode=t,s.isParent=r}function to(){return Mn.lFrame.isParent}function Is(){const t=Mn.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function Er(){return Mn.lFrame.bindingIndex++}function W(t,r){const s=Mn.lFrame;s.bindingIndex=s.bindingRootIndex=t,et(r)}function et(t){Mn.lFrame.currentDirectiveIndex=t}function ln(){return Mn.lFrame.currentQueryIndex}function Xr(t){Mn.lFrame.currentQueryIndex=t}function Gr(t){const r=t[Bt];return 2===r.type?r.declTNode:1===r.type?t[xi]:null}function ni(t,r,s){if(s&bn.SkipSelf){let u=r,f=t;for(;!(u=u.parent,null!==u||s&bn.Host||(u=Gr(f),null===u||(f=f[qs],10&u.type))););if(null===u)return!1;r=u,t=f}const a=Mn.lFrame=ci();return a.currentTNode=r,a.lView=t,!0}function Kn(t){const r=ci(),s=t[Bt];Mn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function ci(){const t=Mn.lFrame,r=null===t?null:t.child;return null===r?Pr(t):r}function Pr(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function as(){const t=Mn.lFrame;return Mn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ko=as;function zi(){const t=as();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Jn(){return Mn.lFrame.selectedIndex}function ui(t){Mn.lFrame.selectedIndex=t}function er(){const t=Mn.lFrame;return Ji(t.tView,t.selectedIndex)}let Za=!0;function on(){return Za}function hn(t){Za=t}function Eu(){return zt(Or(),vt())}function zt(t,r){return new ot(dr(t,r))}let ka,ot=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=Eu}return t})();function Pt(t){return t instanceof ot?t.nativeElement:t}function _c(t,r){t.forEach(s=>Array.isArray(s)?_c(s,r):r(s))}function yl(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function Wc(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function Vr(t,r,s){let a=Sn(t,r);return a>=0?t[1|a]=s:(a=~a,function go(t,r,s,a){let u=t.length;if(u==r)t.push(s,a);else if(1===u)t.push(a,t[0]),t[0]=s;else{for(u--,t.push(t[u-1],t[u]);u>r;)t[u]=t[u-2],u--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function ec(t,r){const s=Sn(t,r);if(s>=0)return t[1|s]}function Sn(t,r){return function Yo(t,r,s){let a=0,u=t.length>>s;for(;u!==a;){const f=a+(u-a>>1),E=t[f<<s];if(r===E)return f<<s;E>r?u=f:a=f+1}return~(u<<s)}(t,r,1)}function gi(){return this._results[Symbol.iterator]()}class mn{static#e=Symbol.iterator;get changes(){return this._changes??=new ii}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const s=mn.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=gi)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){this.dirty=!1;const a=function fs(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Xi(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let u=t[a],f=r[a];if(s&&(u=s(u),f=s(f)),f!==u)return!1}return!0}(this._results,a,s))&&(this._results=a,this.length=a.length,this.last=a[this.length-1],this.first=a[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(r){this._onDirty=r}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Jt(t){return 128==(128&t.flags)}function Qo(t){ka=t}function pr(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Jo(t){return{providers:t.providers||[],imports:t.imports||[]}}function ri(t){return Cs(t,yc)||Cs(t,Iu)}function Lo(t){return null!==ri(t)}function Cs(t,r){return t.hasOwnProperty(r)?t[r]:null}function tc(t){return t&&(t.hasOwnProperty(so)||t.hasOwnProperty(Ke))?t[so]:null}const yc=qe({\u0275prov:qe}),so=qe({\u0275inj:qe}),Iu=qe({ngInjectableDef:qe}),Ke=qe({ngInjectorDef:qe});class gr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=pr({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const cs=new gr("",{providedIn:"root",factory:()=>w}),w="ng",M=new gr(""),D=new gr("",{providedIn:"platform",factory:()=>"unknown"}),ee=new gr("",{providedIn:"root",factory:()=>function Fo(){if(void 0!==ka)return ka;if(typeof document<"u")return document;throw new $t(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),Je=qe({__forward_ref__:qe});function Gt(t){return t.__forward_ref__=Gt,t.toString=function(){return Fn(this())},t}function jt(t){return Xn(t)?t():t}function Xn(t){return"function"==typeof t&&t.hasOwnProperty(Je)&&t.__forward_ref__===Gt}function qc(t){return t&&!!t.\u0275providers}function ir(t){return"string"==typeof t?t:null==t?"":String(t)}function El(t,r){throw new $t(-201,!1)}let od;function Wd(){return od}function oo(t){const r=od;return od=t,r}function zu(t,r,s){const a=ri(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&bn.Optional?null:void 0!==r?r:void El()}const vc={},Kc="__NG_DI_FLAG__",Cu="ngTempTokenPath",Gs=/\n/gm,Ia="__source";let nc;function Ca(t){const r=nc;return nc=t,r}function Vs(t,r=bn.Default){if(void 0===nc)throw new $t(-203,!1);return null===nc?zu(t,void 0,r):nc.get(t,r&bn.Optional?null:void 0,r)}function cr(t,r=bn.Default){return(Wd()||Vs)(jt(t),r)}function mr(t,r=bn.Default){return cr(t,ao(r))}function ao(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Qc(t){const r=[];for(let s=0;s<t.length;s++){const a=jt(t[s]);if(Array.isArray(a)){if(0===a.length)throw new $t(900,!1);let u,f=bn.Default;for(let E=0;E<a.length;E++){const C=a[E],P=ws(C);"number"==typeof P?-1===P?u=C.token:f|=P:u=C}r.push(cr(u,f))}else r.push(cr(a))}return r}function Ec(t,r){return t[Kc]=r,t.prototype[Kc]=r,t}function ws(t){return t[Kc]}let Ua=()=>null;function Du(t,r,s=!1){return Ua(t,r,s)}const Ac="__parameters__";function oc(t,r,s){return On(()=>{const a=function sc(t){return function(...s){if(t){const a=t(...s);for(const u in a)this[u]=a[u]}}}(r);function u(...f){if(this instanceof u)return a.apply(this,f),this;const E=new u(...f);return C.annotation=E,C;function C(P,U,K){const oe=P.hasOwnProperty(Ac)?P[Ac]:Object.defineProperty(P,Ac,{value:[]})[Ac];for(;oe.length<=K;)oe.push(null);return(oe[K]=oe[K]||[]).push(E),P}}return s&&(u.prototype=Object.create(s.prototype)),u.prototype.ngMetadataName=t,u.annotationCls=u,u})}const wl=Ec(oc("Optional"),8),Xc=Ec(oc("SkipSelf"),4);function ac(t,r){return t.hasOwnProperty(Yn)?t[Yn]:null}const Ba=new gr(""),ja=new gr("",-1),bu=new gr("");class Pc{get(r,s=vc){if(s===vc){const a=new Error(`NullInjectorError: No provider for ${Fn(r)}!`);throw a.name="NullInjectorError",a}return s}}function Zc(t){return{\u0275providers:t}}function Aa(...t){return{\u0275providers:eu(0,t),\u0275fromNgModule:!0}}function eu(t,...r){const s=[],a=new Set;let u;const f=E=>{s.push(E)};return _c(r,E=>{const C=E;Sa(C,f,[],a)&&(u||=[],u.push(C))}),void 0!==u&&Xu(u,f),s}function Xu(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:u}=t[s];Tl(u,f=>{r(f,a)})}}function Sa(t,r,s,a){if(!(t=jt(t)))return!1;let u=null,f=tc(t);const E=!f&&Zn(t);if(f||E){if(E&&!E.standalone)return!1;u=t}else{const P=t.ngModule;if(f=tc(P),!f)return!1;u=P}const C=a.has(u);if(E){if(C)return!1;if(a.add(u),E.dependencies){const P="function"==typeof E.dependencies?E.dependencies():E.dependencies;for(const U of P)Sa(U,r,s,a)}}else{if(!f)return!1;{if(null!=f.imports&&!C){let U;a.add(u);try{_c(f.imports,K=>{Sa(K,r,s,a)&&(U||=[],U.push(K))})}finally{}void 0!==U&&Xu(U,r)}if(!C){const U=ac(u)||(()=>new u);r({provide:u,useFactory:U,deps:Pe},u),r({provide:bu,useValue:u,multi:!0},u),r({provide:Ba,useValue:()=>cr(u),multi:!0},u)}const P=f.providers;if(null!=P&&!C){const U=t;Tl(P,K=>{r(K,U)})}}}return u!==t&&void 0!==t.providers}function Tl(t,r){for(let s of t)qc(s)&&(s=s.\u0275providers),Array.isArray(s)?Tl(s,r):r(s)}const $a=qe({provide:String,useValue:qe});function Dl(t){return null!==t&&"object"==typeof t&&$a in t}function T(t){return"function"==typeof t}const v=new gr(""),S={},H={};let ne;function be(){return void 0===ne&&(ne=new Pc),ne}class nt{}class St extends nt{get destroyed(){return this._destroyed}constructor(r,s,a,u){super(),this.parent=s,this.source=a,this.scopes=u,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,uc(r,E=>this.processProvider(E)),this.records.set(ja,ms(void 0,this)),u.has("environment")&&this.records.set(nt,ms(void 0,this));const f=this.records.get(v);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(bu,Pe,bn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=Ca(this),a=oo(void 0);try{return r()}finally{Ca(s),oo(a)}}get(r,s=vc,a=bn.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(lr))return r[lr](this);a=ao(a);const f=Ca(this),E=oo(void 0);try{if(!(a&bn.SkipSelf)){let P=this.records.get(r);if(void 0===P){const U=function vo(t){return"function"==typeof t||"object"==typeof t&&t instanceof gr}(r)&&ri(r);P=U&&this.injectableDefInScope(U)?ms(dn(r),S):null,this.records.set(r,P)}if(null!=P)return this.hydrate(r,P)}return(a&bn.Self?be():this.parent).get(r,s=a&bn.Optional&&s===vc?null:s)}catch(C){if("NullInjectorError"===C.name){if((C[Cu]=C[Cu]||[]).unshift(Fn(r)),f)throw C;return function ad(t,r,s,a){const u=t[Cu];throw r[Ia]&&u.unshift(r[Ia]),t.message=function Ic(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let u=Fn(r);if(Array.isArray(r))u=r.map(Fn).join(" -> ");else if("object"==typeof r){let f=[];for(let E in r)if(r.hasOwnProperty(E)){let C=r[E];f.push(E+":"+("string"==typeof C?JSON.stringify(C):Fn(C)))}u=`{${f.join(", ")}}`}return`${s}${a?"("+a+")":""}[${u}]: ${t.replace(Gs,"\n  ")}`}("\n"+t.message,u,s,a),t.ngTokenPath=u,t[Cu]=null,t}(C,r,"R3InjectorError",this.source)}throw C}finally{oo(E),Ca(f)}}resolveInjectorInitializers(){const r=Ca(this),s=oo(void 0);try{const u=this.get(Ba,Pe,bn.Self);for(const f of u)f()}finally{Ca(r),oo(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(Fn(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $t(205,!1)}processProvider(r){let s=T(r=jt(r))?r:jt(r&&r.provide);const a=function tr(t){return Dl(t)?ms(void 0,t.useValue):ms(_o(t),S)}(r);if(!T(r)&&!0===r.multi){let u=this.records.get(s);u||(u=ms(void 0,S,!0),u.factory=()=>Qc(u.multi),this.records.set(s,u)),s=r,u.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===S&&(s.value=H,s.value=s.factory()),"object"==typeof s.value&&s.value&&function yo(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=jt(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function dn(t){const r=ri(t),s=null!==r?r.factory:ac(t);if(null!==s)return s;if(t instanceof gr)throw new $t(204,!1);if(t instanceof Function)return function Pn(t){if(t.length>0)throw new $t(204,!1);const s=function Hc(t){return t&&(t[yc]||t[Iu])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new $t(204,!1)}function _o(t,r,s){let a;if(T(t)){const u=jt(t);return ac(u)||dn(u)}if(Dl(t))a=()=>jt(t.useValue);else if(function Ru(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Qc(t.deps||[]));else if(function cc(t){return!(!t||!t.useExisting)}(t))a=()=>cr(jt(t.useExisting));else{const u=jt(t&&(t.useClass||t.provide));if(!function tu(t){return!!t.deps}(t))return ac(u)||dn(u);a=()=>new u(...Qc(t.deps))}return a}function ms(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function uc(t,r){for(const s of t)Array.isArray(s)?uc(s,r):s&&qc(s)?uc(s.\u0275providers,r):r(s)}function pd(t,r){t instanceof St&&t.assertNotDestroyed();const a=Ca(t),u=oo(void 0);try{return r()}finally{Ca(a),oo(u)}}class Ou{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Xh(t,r,s,a){null!==r?r.applyValueToInputSignal(r,a):t[s]=a}function ru(){return Zh}function Zh(t){return t.type.prototype.ngOnChanges&&(t.setInput=ef),xu}function xu(){const t=lc(this),r=t?.current;if(r){const s=t.previous;if(s===Ln)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function ef(t,r,s,a,u){const f=this.declaredInputs[a],E=lc(t)||function Nu(t,r){return t[tf]=r}(t,{previous:Ln,current:null}),C=E.current||(E.current={}),P=E.previous,U=P[f];C[f]=new Ou(U&&U.currentValue,s,P===Ln),Xh(t,r,u,s)}ru.ngInherit=!0;const tf="__ngSimpleChanges__";function lc(t){return t[tf]||null}const Uo=function(t,r,s){};function Mc(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const f=t.data[s].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:C,ngAfterViewInit:P,ngAfterViewChecked:U,ngOnDestroy:K}=f;E&&(t.contentHooks??=[]).push(-s,E),C&&((t.contentHooks??=[]).push(s,C),(t.contentCheckHooks??=[]).push(s,C)),P&&(t.viewHooks??=[]).push(-s,P),U&&((t.viewHooks??=[]).push(s,U),(t.viewCheckHooks??=[]).push(s,U)),null!=K&&(t.destroyHooks??=[]).push(s,K)}}function Zd(t,r,s){th(t,r,3,s)}function iu(t,r,s,a){(3&t[vn])===s&&th(t,r,s,a)}function eh(t,r){let s=t[vn];(3&s)===r&&(s&=16383,s+=1,t[vn]=s)}function th(t,r,s,a){const f=a??-1,E=r.length-1;let C=0;for(let P=void 0!==a?65535&t[bs]:0;P<E;P++)if("number"==typeof r[P+1]){if(C=r[P],null!=a&&C>=a)break}else r[P]<0&&(t[bs]+=65536),(C<f||-1==f)&&(dc(t,s,r,P),t[bs]=(4294901760&t[bs])+P+2),P++}function Oc(t,r){Uo(4,t,r);const s=Ie(null);try{r.call(t)}finally{Ie(s),Uo(5,t,r)}}function dc(t,r,s,a){const u=s[a]<0,f=s[a+1],C=t[u?-s[a]:s[a]];u?t[vn]>>14<t[bs]>>16&&(3&t[vn])===r&&(t[vn]+=16384,Oc(C,f)):Oc(C,f)}const su=-1;class Sl{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function _d(t){return t!==su}function us(t){return 32767&t}function ou(t,r){let s=function ur(t){return t>>16}(t),a=r;for(;s>0;)a=a[qs],s--;return a}let hc=!0;function Nc(t){const r=hc;return hc=t,r}const ku=255,cf=5;let hm=0;const Po={};function Zu(t,r){const s=bl(t,r);if(-1!==s)return s;const a=r[Bt];a.firstCreatePass&&(t.injectorIndex=r.length,Pl(a.data,t),Pl(r,null),Pl(a.blueprint,null));const u=ih(t,r),f=t.injectorIndex;if(_d(u)){const E=us(u),C=ou(u,r),P=C[Bt].data;for(let U=0;U<8;U++)r[f+U]=C[E+U]|P[E+U]}return r[f+8]=u,f}function Pl(t,r){t.push(0,0,0,0,0,0,0,0,r)}function bl(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function ih(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,u=r;for(;null!==u;){if(a=hf(u),null===a)return su;if(s++,u=u[qs],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return su}function uf(t,r,s){!function rh(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Kr)&&(a=s[Kr]),null==a&&(a=s[Kr]=hm++);const u=a&ku;r.data[t+(u>>cf)]|=1<<u}(t,r,s)}function pm(t,r,s){if(s&bn.Optional||void 0!==t)return t;El()}function el(t,r,s,a){if(s&bn.Optional&&void 0===a&&(a=null),!(s&(bn.Self|bn.Host))){const u=t[ki],f=oo(void 0);try{return u?u.get(r,a,s&bn.Optional):zu(r,a,s&bn.Optional)}finally{oo(f)}}return pm(a,0,s)}function Rl(t,r,s,a=bn.Default,u){if(null!==t){if(2048&r[vn]&&!(a&bn.Self)){const E=function au(t,r,s,a,u){let f=t,E=r;for(;null!==f&&null!==E&&2048&E[vn]&&!(512&E[vn]);){const C=Ml(f,E,s,a|bn.Self,Po);if(C!==Po)return C;let P=f.parent;if(!P){const U=E[Qi];if(U){const K=U.get(s,Po,a);if(K!==Po)return K}P=hf(E),E=E[qs]}f=P}return u}(t,r,s,a,Po);if(E!==Po)return E}const f=Ml(t,r,s,a,Po);if(f!==Po)return f}return el(r,s,a,u)}function Ml(t,r,s,a,u){const f=function yp(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(Kr)?t[Kr]:void 0;return"number"==typeof r?r>=0?r&ku:df:r}(s);if("function"==typeof f){if(!ni(r,t,a))return a&bn.Host?pm(u,0,a):el(r,s,a,u);try{let E;if(E=f(a),null!=E||a&bn.Optional)return E;El()}finally{ko()}}else if("number"==typeof f){let E=null,C=bl(t,r),P=su,U=a&bn.Host?r[li][xi]:null;for((-1===C||a&bn.SkipSelf)&&(P=-1===C?ih(t,r):r[C+8],P!==su&&vp(a,!1)?(E=r[Bt],C=us(P),r=ou(P,r)):C=-1);-1!==C;){const K=r[Bt];if(xl(f,C,K.data)){const oe=gm(C,r,s,E,a,U);if(oe!==Po)return oe}P=r[C+8],P!==su&&vp(a,r[Bt].data[C+8]===U)&&xl(f,C,r)?(E=K,C=us(P),r=ou(P,r)):C=-1}}return u}function gm(t,r,s,a,u,f){const E=r[Bt],C=E.data[t+8],K=lf(C,E,s,null==a?Fi(C)&&hc:a!=E&&0!=(3&C.type),u&bn.Host&&f===C);return null!==K?Ol(r,E,K,C):Po}function lf(t,r,s,a,u){const f=t.providerIndexes,E=r.data,C=1048575&f,P=t.directiveStart,K=f>>20,Te=u?C+K:t.directiveEnd;for(let xe=a?C:C+K;xe<Te;xe++){const lt=E[xe];if(xe<P&&s===lt||xe>=P&&lt.type===s)return xe}if(u){const xe=E[P];if(xe&&Li(xe)&&xe.type===s)return P}return null}function Ol(t,r,s,a){let u=t[s];const f=r.data;if(function _p(t){return t instanceof Sl}(u)){const E=u;E.resolving&&function $d(t,r){throw r&&r.join(" > "),new $t(-200,t)}(function xr(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ir(t)}(f[s]));const C=Nc(E.canSeeViewProviders);E.resolving=!0;const U=E.injectImpl?oo(E.injectImpl):null;ni(t,a,bn.Default);try{u=t[s]=E.factory(void 0,f,t,a),r.firstCreatePass&&s>=a.directiveStart&&function Xd(t,r,s){const{ngOnChanges:a,ngOnInit:u,ngDoCheck:f}=r.type.prototype;if(a){const E=Zh(r);(s.preOrderHooks??=[]).push(t,E),(s.preOrderCheckHooks??=[]).push(t,E)}u&&(s.preOrderHooks??=[]).push(0-t,u),f&&((s.preOrderHooks??=[]).push(t,f),(s.preOrderCheckHooks??=[]).push(t,f))}(s,f[s],r)}finally{null!==U&&oo(U),Nc(C),E.resolving=!1,ko()}}return u}function xl(t,r,s){return!!(s[r+(t>>cf)]&1<<t)}function vp(t,r){return!(t&bn.Self||t&bn.Host&&r)}class Ws{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return Rl(this._tNode,this._lView,r,ao(a),s)}}function df(){return new Ws(Or(),vt())}function Ep(t){return On(()=>{const r=t.prototype.constructor,s=r[Yn]||Fu(r),a=Object.prototype;let u=Object.getPrototypeOf(t.prototype).constructor;for(;u&&u!==a;){const f=u[Yn]||Fu(u);if(f&&f!==s)return f;u=Object.getPrototypeOf(u)}return f=>new f})}function Fu(t){return Xn(t)?()=>{const r=Fu(jt(t));return r&&r()}:ac(t)}function hf(t){const r=t[Bt],s=r.type;return 2===s?r.declTNode:1===s?t[xi]:null}function ff(t){return function fm(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let u=0;for(;u<a;){const f=s[u];if(ft(f))break;if(0===f)u+=2;else if("number"==typeof f)for(u++;u<a&&"string"==typeof s[u];)u++;else{if(f===r)return s[u+1];u+=2}}}return null}(Or(),t)}function vm(t,r=null,s=null,a){const u=Dp(t,r,s,a);return u.resolveInjectorInitializers(),u}function Dp(t,r=null,s=null,a,u=new Set){const f=[s||Pe,Aa(t)];return a=a||("object"==typeof t?void 0:Fn(t)),new St(f,r||be(),a||null,u)}let la=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=vc;static#t=this.NULL=new Pc;static create(s,a){if(Array.isArray(s))return vm({name:""},a,s,"");{const u=s.name??"";return vm({name:u},s.parent,s.providers,u)}}static#n=this.\u0275prov=pr({token:t,providedIn:"any",factory:()=>cr(ja)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function Ed(t){return t.ngOriginalError}class Lu{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Ed(r);for(;s&&Ed(s);)s=Ed(s);return s||null}}const gf=new gr("",{providedIn:"root",factory:()=>mr(Lu).handleError.bind(void 0)}),_f=new gr("",{providedIn:"root",factory:()=>!1});let uh;function Sp(t){return function Cd(){if(void 0===uh&&(uh=null,en.trustedTypes))try{uh=en.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return uh}()?.createScriptURL(t)||t}class Pp{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wr})`}}function uu(t){return t instanceof Pp?t.changingThisBreaksApplicationSecurity:t}function kl(t,r){const s=function cy(t){return t instanceof Pp&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${wr})`)}return s===r}const Mp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Bl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Bl||{});function rl(t){const r=sl();return r?r.sanitize(Bl.URL,t)||"":kl(t,"URL")?uu(t):function fh(t){return(t=String(t)).match(Mp)?t:"unsafe:"+t}(ir(t))}function Fp(t){const r=sl();if(r)return Sp(r.sanitize(Bl.RESOURCE_URL,t)||"");if(kl(t,"ResourceURL"))return Sp(uu(t));throw new $t(904,!1)}function bm(t,r,s){return function Pm(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Fp:rl}(r,s)(t)}function sl(){const t=vt();return t&&t[Gi].sanitizer}const yh=new Map;let km=0;const d="__ngContext__";function l(t,r){ss(r)?(t[d]=r[is],function Fm(t){yh.set(t[is],t)}(r)):t[d]=r}function Pa(t){return t instanceof Function?t():t}var Af=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Af||{});let jm;function Wp(t,r){return jm(t,r)}function Wl(t,r,s,a,u){if(null!=a){let f,E=!1;Hi(a)?f=a:ss(a)&&(E=!0,a=a[Qr]);const C=Fr(a);0===t&&null!==s?null==u?Jp(r,s,C):Fc(r,s,C,u||null,!0):1===t&&null!==s?Fc(r,s,C,u||null,!0):2===t?function Ad(t,r,s){const a=Mf(t,r);a&&function Rf(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,C,E):3===t&&r.destroyNode(C),null!=f&&function VE(t,r,s,a,u){const f=s[Wi];f!==Fr(s)&&Wl(r,t,a,f,u);for(let C=di;C<s.length;C++){const P=s[C];ll(P[Bt],P,t,r,a,f)}}(r,t,f,s,u)}}function qp(t,r,s){return t.createElement(r,s)}function Th(t,r){ll(t,r,r[An],2,null,null)}function Cy(t,r){const s=t[Oo],a=s.indexOf(r);s.splice(a,1)}function Sf(t,r){if(t.length<=di)return;const s=di+r,a=t[s];if(a){const u=a[Ps];null!==u&&u!==t&&Cy(u,a),r>0&&(t[s-1][Yi]=a[Yi]);const f=Wc(t,di+r);!function Ey(t,r){Th(t,r),r[Qr]=null,r[xi]=null}(a[Bt],a);const E=f[bi];null!==E&&E.detachView(f[Bt]),a[Ar]=null,a[Yi]=null,a[vn]&=-129}return a}function Yp(t,r){if(!(256&r[vn])){const s=r[An];s.destroyNode&&ll(t,r,s,3,null,null),function $m(t){let r=t[Pi];if(!r)return Pf(t[Bt],t);for(;r;){let s=null;if(ss(r))s=r[Pi];else{const a=r[di];a&&(s=a)}if(!s){for(;r&&!r[Yi]&&r!==t;)ss(r)&&Pf(r[Bt],r),r=r[Ar];null===r&&(r=t),ss(r)&&Pf(r[Bt],r),s=r&&r[Yi]}r=s}}(r)}}function Pf(t,r){if(!(256&r[vn])){r[vn]&=-129,r[vn]|=256,r[Rs]&&function Ze(t){if(At(t),Ot(t))for(let r=0;r<t.producerNode.length;r++)me(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(r[Rs]),function LE(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const u=r[s[a]];if(!(u instanceof Sl)){const f=s[a+1];if(Array.isArray(f))for(let E=0;E<f.length;E+=2){const C=u[f[E]],P=f[E+1];Uo(4,C,P);try{P.call(C)}finally{Uo(5,C,P)}}else{Uo(4,u,f);try{f.call(u)}finally{Uo(5,u,f)}}}}}(t,r),function FE(t,r){const s=t.cleanup,a=r[$i];if(null!==s)for(let f=0;f<s.length-1;f+=2)if("string"==typeof s[f]){const E=s[f+3];E>=0?a[E]():a[-E].unsubscribe(),f+=2}else s[f].call(a[s[f+1]]);null!==a&&(r[$i]=null);const u=r[Ei];if(null!==u){r[Ei]=null;for(let f=0;f<u.length;f++)(0,u[f])()}}(t,r),1===r[Bt].type&&r[An].destroy();const s=r[Ps];if(null!==s&&Hi(r[Ar])){s!==r[Ar]&&Cy(s,r);const a=r[bi];null!==a&&a.detachView(t)}!function Tf(t){yh.delete(t[is])}(r)}}function Td(t,r,s){return function Qp(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[Qr];{const{componentOffset:u}=a;if(u>-1){const{encapsulation:f}=t.data[a.directiveStart+u];if(f===Cn.None||f===Cn.Emulated)return null}return dr(a,s)}}(t,r.parent,s)}function Fc(t,r,s,a,u){t.insertBefore(r,s,a,u)}function Jp(t,r,s){t.appendChild(r,s)}function bf(t,r,s,a,u){null!==a?Fc(t,r,s,a,u):Jp(t,r,s)}function Mf(t,r){return t.parentNode(r)}let Hm,Wm=function ul(t,r,s){return 40&t.type?dr(t,s):null};function eg(t,r,s,a){const u=Td(t,a,r),f=r[An],C=function Xp(t,r,s){return Wm(t,r,s)}(a.parent||r[xi],a,r);if(null!=u)if(Array.isArray(s))for(let P=0;P<s.length;P++)bf(f,u,s[P],C,!1);else bf(f,u,s,C,!1);void 0!==Hm&&Hm(f,a,r,s,u)}function Dd(t,r){if(null!==r){const s=r.type;if(3&s)return dr(r,t);if(4&s)return Of(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return Dd(t,a);{const u=t[r.index];return Hi(u)?Of(-1,u):Fr(u)}}if(32&s)return Wp(r,t)()||Fr(t[r.index]);{const a=Ty(t,r);return null!==a?Array.isArray(a)?a[0]:Dd($s(t[li]),a):Dd(t,r.next)}}return null}function Ty(t,r){return null!==r?t[li][xi].projection[r.projection]:null}function Of(t,r){const s=di+t+1;if(s<r.length){const a=r[s],u=a[Bt].firstChild;if(null!==u)return Dd(a,u)}return r[Wi]}function ng(t,r,s,a,u,f,E){for(;null!=s;){const C=a[s.index],P=s.type;if(E&&0===r&&(C&&l(Fr(C),a),s.flags|=2),32!=(32&s.flags))if(8&P)ng(t,r,s.child,a,u,f,!1),Wl(r,t,u,C,f);else if(32&P){const U=Wp(s,a);let K;for(;K=U();)Wl(r,t,u,K,f);Wl(r,t,u,C,f)}else 16&P?Dy(t,r,a,s,u,f):Wl(r,t,u,C,f);s=E?s.projectionNext:s.next}}function ll(t,r,s,a,u,f){ng(s,a,t.firstChild,r,u,f,!1)}function Dy(t,r,s,a,u,f){const E=s[li],P=E[xi].projection[a.projection];if(Array.isArray(P))for(let U=0;U<P.length;U++)Wl(r,t,u,P[U],f);else{let U=P;const K=E[Ar];Jt(a)&&(U.flags|=128),ng(t,r,U,K,u,f,!0)}}function Py(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function rg(t,r,s){const{mergedAttrs:a,classes:u,styles:f}=s;null!==a&&ye(t,r,a),null!==u&&Py(t,r,u),null!==f&&function Sy(t,r,s){t.setAttribute(r,"style",s)}(t,r,f)}const Ir={};function ig(t=1){by(ar(),vt(),Jn()+t,!1)}function by(t,r,s,a){if(!a)if(3==(3&r[vn])){const f=t.preOrderCheckHooks;null!==f&&Zd(r,f,s)}else{const f=t.preOrderHooks;null!==f&&iu(r,f,0,s)}ui(s)}function Hl(t,r=bn.Default){const s=vt();return null===s?cr(t,r):Rl(Or(),s,jt(t),r)}function Ry(){throw new Error("invalid")}function sg(t,r,s,a,u,f){const E=Ie(null);try{let C=null;u&se.SignalBased&&(C=r[a][Ee]),null!==C&&void 0!==C.transformFn&&(f=C.transformFn(f)),u&se.HasDecoratorInputTransform&&(f=t.inputTransforms[a].call(r,f)),null!==t.setInput?t.setInput(r,C,f,s,a):Xh(r,C,a,f)}finally{Ie(E)}}function Dh(t,r,s,a,u,f,E,C,P,U,K){const oe=r.blueprint.slice();return oe[Qr]=u,oe[vn]=204|a,(null!==U||t&&2048&t[vn])&&(oe[vn]|=2048),Js(oe),oe[Ar]=oe[qs]=t,oe[or]=s,oe[Gi]=E||t&&t[Gi],oe[An]=C||t&&t[An],oe[ki]=P||t&&t[ki]||null,oe[xi]=f,oe[is]=function Lp(){return km++}(),oe[Ni]=K,oe[Qi]=U,oe[li]=2==r.type?t[li]:oe,oe}function zl(t,r,s,a,u){let f=t.data[r];if(null===f)f=function xf(t,r,s,a,u){const f=Lr(),E=to(),P=t.data[r]=function $E(t,r,s,a,u,f){let E=r?r.injectorIndex:-1,C=0;return function Ko(){return null!==Mn.skipHydrationRootTNode}()&&(C|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:E,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:u,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?f:f&&f.parent,s,r,a,u);return null===t.firstChild&&(t.firstChild=P),null!==f&&(E?null==f.child&&null!==P.parent&&(f.child=P):null===f.next&&(f.next=P,P.prev=f)),P}(t,r,s,a,u),function q(){return Mn.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=s,f.value=a,f.attrs=u;const E=function ya(){const t=Mn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();f.injectorIndex=null===E?-1:E.injectorIndex}return po(f,!0),f}function Vu(t,r,s,a){if(0===s)return-1;const u=r.length;for(let f=0;f<s;f++)r.push(a),t.blueprint.push(a),t.data.push(null);return u}function dl(t,r,s,a,u){const f=Jn(),E=2&a;try{ui(-1),E&&r.length>cn&&by(t,r,cn,!1),Uo(E?2:0,u),s(a,u)}finally{ui(f),Uo(E?3:1,u)}}function Nf(t,r,s){if(Os(r)){const a=Ie(null);try{const f=r.directiveEnd;for(let E=r.directiveStart;E<f;E++){const C=t.data[E];C.contentQueries&&C.contentQueries(1,s[E],E)}}finally{Ie(a)}}}function ql(t,r,s){wo()&&(function qE(t,r,s,a){const u=s.directiveStart,f=s.directiveEnd;Fi(s)&&function n_(t,r,s){const a=dr(r,t),u=qm(s);let E=16;s.signals?E=4096:s.onPush&&(E=64);const C=Ah(t,Dh(t,u,null,E,a,r,null,t[Gi].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=C}(r,s,t.data[u+s.componentOffset]),t.firstCreatePass||Zu(s,r),l(a,r);const E=s.initialInputs;for(let C=u;C<f;C++){const P=t.data[C],U=Ol(r,t,C,s);l(U,r),null!==E&&i_(0,C-u,U,P,0,E),Li(P)&&(ks(s.index,r)[or]=Ol(r,t,C,s))}}(t,r,s,dr(s,r)),64==(64&s.flags)&&lg(t,r,s))}function Kl(t,r,s=dr){const a=r.localNames;if(null!==a){let u=r.index+1;for(let f=0;f<a.length;f+=2){const E=a[f+1],C=-1===E?s(r,t):t[E];t[u++]=C}}}function qm(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Yl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function Yl(t,r,s,a,u,f,E,C,P,U,K){const oe=cn+a,Te=oe+u,xe=function UE(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:Ir);return s}(oe,Te),lt="function"==typeof U?U():U;return xe[Bt]={type:t,blueprint:xe,template:s,queries:null,viewQuery:C,declTNode:r,data:xe.slice().fill(null,oe),bindingStartIndex:oe,expandoStartIndex:Te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:P,consts:lt,incompleteFirstPass:!1,ssrId:K}}let og=()=>null;function ag(t,r,s,a,u){for(let f in r){if(!r.hasOwnProperty(f))continue;const E=r[f];if(void 0===E)continue;a??={};let C,P=se.None;Array.isArray(E)?(C=E[0],P=E[1]):C=E;let U=f;if(null!==u){if(!u.hasOwnProperty(f))continue;U=u[f]}0===t?cg(a,s,U,C,P):cg(a,s,U,C)}return a}function cg(t,r,s,a,u){let f;t.hasOwnProperty(s)?(f=t[s]).push(r,a):f=t[s]=[r,a],void 0!==u&&f.push(u)}function Ha(t,r,s,a,u,f,E,C){const P=dr(r,s);let K,U=r.inputs;!C&&null!=U&&(K=U[a])?(Ff(t,s,K,a,u),Fi(r)&&function xy(t,r){const s=ks(r,t);16&s[vn]||(s[vn]|=64)}(s,r.index)):3&r.type&&(a=function Oy(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),u=null!=E?E(u,r.value||"",a):u,f.setProperty(P,a,u))}function ug(t,r,s,a){if(wo()){const u=null===a?null:{"":-1},f=function Xm(t,r){const s=t.directiveRegistry;let a=null,u=null;if(s)for(let f=0;f<s.length;f++){const E=s[f];if(Ti(r,E.selectors,!1))if(a||(a=[]),Li(E))if(null!==E.findHostDirectiveDefs){const C=[];u=u||new Map,E.findHostDirectiveDefs(E,C,u),a.unshift(...C,E),Zm(t,r,C.length)}else a.unshift(E),Zm(t,r,0);else u=u||new Map,E.findHostDirectiveDefs?.(E,a,u),a.push(E)}return null===a?null:[a,u]}(t,s);let E,C;null===f?E=C=null:[E,C]=f,null!==E&&ky(t,r,s,E,u,C),u&&function e_(t,r,s){if(r){const a=t.localNames=[];for(let u=0;u<r.length;u+=2){const f=s[r[u+1]];if(null==f)throw new $t(-301,!1);a.push(r[u],f)}}}(s,a,u)}s.mergedAttrs=Vt(s.mergedAttrs,s.attrs)}function ky(t,r,s,a,u,f){for(let U=0;U<a.length;U++)uf(Zu(s,r),t,a[U].type);!function t_(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let U=0;U<a.length;U++){const K=a[U];K.providersResolver&&K.providersResolver(K)}let E=!1,C=!1,P=Vu(t,r,a.length,null);for(let U=0;U<a.length;U++){const K=a[U];s.mergedAttrs=Vt(s.mergedAttrs,K.hostAttrs),Fy(t,s,r,P,K),KE(P,K,u),null!==K.contentQueries&&(s.flags|=4),(null!==K.hostBindings||null!==K.hostAttrs||0!==K.hostVars)&&(s.flags|=64);const oe=K.type.prototype;!E&&(oe.ngOnChanges||oe.ngOnInit||oe.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),E=!0),!C&&(oe.ngOnChanges||oe.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),C=!0),P++}!function GE(t,r,s){const u=r.directiveEnd,f=t.data,E=r.attrs,C=[];let P=null,U=null;for(let K=r.directiveStart;K<u;K++){const oe=f[K],Te=s?s.get(oe):null,lt=Te?Te.outputs:null;P=ag(0,oe.inputs,K,P,Te?Te.inputs:null),U=ag(1,oe.outputs,K,U,lt);const Ft=null===P||null===E||zn(r)?null:YE(P,K,E);C.push(Ft)}null!==P&&(P.hasOwnProperty("class")&&(r.flags|=8),P.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=C,r.inputs=P,r.outputs=U}(t,s,f)}function lg(t,r,s){const a=s.directiveStart,u=s.directiveEnd,f=s.index,E=function de(){return Mn.lFrame.currentDirectiveIndex}();try{ui(f);for(let C=a;C<u;C++){const P=t.data[C],U=r[C];et(C),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&Jm(P,U)}}finally{ui(-1),et(E)}}function Jm(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Zm(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function KE(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;Li(r)&&(s[""]=t)}}function Fy(t,r,s,a,u){t.data[a]=u;const f=u.factory||(u.factory=ac(u.type)),E=new Sl(f,Li(u),Hl);t.blueprint[a]=E,s[a]=E,function HE(t,r,s,a,u){const f=u.hostBindings;if(f){let E=t.hostBindingOpCodes;null===E&&(E=t.hostBindingOpCodes=[]);const C=~r.index;(function zE(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(E)!=C&&E.push(C),E.push(s,a,f)}}(t,r,a,Vu(t,s,u.hostVars,Ir),u)}function hu(t,r,s,a,u,f){const E=dr(t,r);!function r_(t,r,s,a,u,f,E){if(null==f)t.removeAttribute(r,u,s);else{const C=null==E?ir(f):E(f,a||"",u);t.setAttribute(r,u,C,s)}}(r[An],E,f,t.value,s,a,u)}function i_(t,r,s,a,u,f){const E=f[r];if(null!==E)for(let C=0;C<E.length;)sg(a,s,E[C++],E[C++],E[C++],E[C++])}function YE(t,r,s){let a=null,u=0;for(;u<s.length;){const f=s[u];if(0!==f)if(5!==f){if("number"==typeof f)break;if(t.hasOwnProperty(f)){null===a&&(a=[]);const E=t[f];for(let C=0;C<E.length;C+=3)if(E[C]===r){a.push(f,E[C+1],E[C+2],s[u+1]);break}}u+=2}else u+=2;else u+=4}return a}function dg(t,r,s,a){return[t,!0,0,r,null,a,null,s,null,null]}function Ly(t,r){const s=t.contentQueries;if(null!==s){const a=Ie(null);try{for(let u=0;u<s.length;u+=2){const E=s[u+1];if(-1!==E){const C=t.data[E];Xr(s[u]),C.contentQueries(2,r[E],E)}}}finally{Ie(a)}}}function Ah(t,r){return t[Pi]?t[ho][Yi]=r:t[Pi]=r,t[ho]=r,r}function s_(t,r,s){Xr(0);const a=Ie(null);try{r(t,s)}finally{Ie(a)}}function hg(t){return t[$i]||(t[$i]=[])}function fg(t){return t.cleanup||(t.cleanup=[])}function kf(t,r){const s=t[ki],a=s?s.get(Lu,null):null;a&&a.handleError(r)}function Ff(t,r,s,a,u){for(let f=0;f<s.length;){const E=s[f++],C=s[f++],P=s[f++];sg(t.data[E],r[E],a,C,P,u)}}function o_(t,r){const s=ks(r,t),a=s[Bt];!function fl(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const u=s[Qr];null!==u&&null===s[Ni]&&(s[Ni]=Du(u,s[ki])),Lf(a,s,s[or])}function Lf(t,r,s){Kn(r);try{const a=t.viewQuery;null!==a&&s_(1,a,s);const u=t.template;null!==u&&dl(t,r,u,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),r[bi]?.finishViewCreation(t),t.staticContentQueries&&Ly(t,r),t.staticViewQueries&&s_(2,t.viewQuery,s);const f=t.components;null!==f&&function QE(t,r){for(let s=0;s<r.length;s++)o_(t,r[s])}(r,f)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[vn]&=-5,zi()}}function Sh(t,r){return!r||null===r.firstChild||Jt(t)}function bd(t,r,s,a=!0){const u=r[Bt];if(function Iy(t,r,s,a){const u=di+a,f=s.length;a>0&&(s[u-1][Yi]=r),a<f-di?(r[Yi]=s[u],yl(s,di+a,r)):(s.push(r),r[Yi]=null),r[Ar]=s;const E=r[Ps];null!==E&&s!==E&&function kE(t,r){const s=t[Oo];r[li]!==r[Ar][Ar][li]&&(t[vn]|=ys.HasTransplantedViews),null===s?t[Oo]=[r]:s.push(r)}(E,r);const C=r[bi];null!==C&&C.insertView(t),Oa(r),r[vn]|=128}(u,r,t,s),a){const E=Of(s,t),C=r[An],P=Mf(C,t[Wi]);null!==P&&function Kp(t,r,s,a,u,f){a[Qr]=u,a[xi]=r,ll(t,a,s,1,u,f)}(u,t[xi],C,r,P,E)}const f=r[Ni];null!==f&&null!==f.firstChild&&(f.firstChild=null)}function Rd(t,r,s,a,u=!1){for(;null!==s;){const f=r[s.index];null!==f&&a.push(Fr(f)),Hi(f)&&By(f,a);const E=s.type;if(8&E)Rd(t,r,s.child,a);else if(32&E){const C=Wp(s,r);let P;for(;P=C();)a.push(P)}else if(16&E){const C=Ty(r,s);if(Array.isArray(C))a.push(...C);else{const P=$s(r[li]);Rd(P[Bt],P,C,a,!0)}}s=u?s.projectionNext:s.next}return a}function By(t,r){for(let s=di;s<t.length;s++){const a=t[s],u=a[Bt].firstChild;null!==u&&Rd(a[Bt],a,u,r)}t[Wi]!==t[Qr]&&r.push(t[Wi])}let pg=[];const u_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{zo(t.lView)},consumerOnSignalRead(){this.lView[Rs]=this}};function Gy(t){return Wy(t[Pi])}function gg(t){return Wy(t[Yi])}function Wy(t){for(;null!==t&&!Hi(t);)t=t[Yi];return t}function Ph(t,r=!0,s=0){const a=t[Gi],u=a.rendererFactory;u.begin?.();try{!function l_(t,r){Mh(t,r);let s=0;for(;Xs(t);){if(100===s)throw new $t(103,!1);s++,Mh(t,1)}}(t,s)}catch(E){throw r&&kf(t,E),E}finally{u.end?.(),a.inlineEffectRunner?.flush()}}function bh(t,r,s,a){const u=r[vn];if(256==(256&u))return;r[Gi].inlineEffectRunner?.flush(),Kn(r);let E=null,C=null;(function ZE(t){return 2!==t.type})(t)&&(C=function JE(t){return t[Rs]??function c_(t){const r=pg.pop()??Object.create(u_);return r.lView=t,r}(t)}(r),E=function Ce(t){return t&&(t.nextProducerIndex=0),Ie(t)}(C));try{Js(r),function Ls(t){return Mn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&dl(t,r,s,2,a);const P=3==(3&u);if(P){const oe=t.preOrderCheckHooks;null!==oe&&Zd(r,oe,null)}else{const oe=t.preOrderHooks;null!==oe&&iu(r,oe,0,null),eh(r,0)}if(function Hy(t){for(let r=Gy(t);null!==r;r=gg(r)){if(!(r[vn]&ys.HasTransplantedViews))continue;const s=r[Oo];for(let a=0;a<s.length;a++){Co(s[a])}}}(r),_g(r,0),null!==t.contentQueries&&Ly(t,r),P){const oe=t.contentCheckHooks;null!==oe&&Zd(r,oe)}else{const oe=t.contentHooks;null!==oe&&iu(r,oe,1),eh(r,1)}!function My(t,r){const s=t.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const u=s[a];if(u<0)ui(~u);else{const f=u,E=s[++a],C=s[++a];W(E,f),C(2,r[f])}}}finally{ui(-1)}}(t,r);const U=t.components;null!==U&&zy(r,U,0);const K=t.viewQuery;if(null!==K&&s_(2,K,a),P){const oe=t.viewCheckHooks;null!==oe&&Zd(r,oe)}else{const oe=t.viewHooks;null!==oe&&iu(r,oe,2),eh(r,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[Ro]){for(const oe of r[Ro])oe();r[Ro]=null}r[vn]&=-73}catch(P){throw zo(r),P}finally{null!==C&&(function ht(t,r){if(Ie(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ot(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)me(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(C,E),function jy(t){t.lView[Rs]!==t&&(t.lView=null,pg.push(t))}(C)),zi()}}function _g(t,r){for(let s=Gy(t);null!==s;s=gg(s))for(let a=di;a<s.length;a++)d_(s[a],r)}function Rh(t,r,s){d_(ks(r,t),s)}function d_(t,r){Io(t)&&Mh(t,r)}function Mh(t,r){const a=t[Bt],u=t[vn],f=t[Rs];let E=!!(0===r&&16&u);if(E||=!!(64&u&&0===r),E||=!!(1024&u),E||=!(!f?.dirty||!_t(f)),f&&(f.dirty=!1),t[vn]&=-9217,E)bh(a,t,a.template,t[or]);else if(8192&u){_g(t,1);const C=a.components;null!==C&&zy(t,C,1)}}function zy(t,r,s){for(let a=0;a<r.length;a++)Rh(t,r[a],s)}function Vf(t){for(t[Gi].changeDetectionScheduler?.notify();t;){t[vn]|=64;const r=$s(t);if(sa(t)&&!r)return t;t=r}return null}class Uf{get rootNodes(){const r=this._lView,s=r[Bt];return Rd(s,r,s.firstChild,[])}constructor(r,s,a=!0){this._lView=r,this._cdRefInjectingView=s,this.notifyErrorHandler=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[or]}set context(r){this._lView[or]=r}get destroyed(){return 256==(256&this._lView[vn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Ar];if(Hi(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Sf(r,a),Wc(s,a))}this._attachedToViewContainer=!1}Yp(this._lView[Bt],this._lView)}onDestroy(r){xa(this._lView,r)}markForCheck(){Vf(this._cdRefInjectingView||this._lView)}detach(){this._lView[vn]&=-129}reattach(){Oa(this._lView),this._lView[vn]|=128}detectChanges(){this._lView[vn]|=1024,Ph(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $t(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Th(this._lView[Bt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new $t(902,!1);this._appRef=r,Oa(this._lView)}}let Bf=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=f_}return t})();const yg=Bf,h_=class extends yg{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const u=function Pd(t,r,s,a){const u=r.tView,C=Dh(t,u,s,4096&t[vn]?4096:16,null,r,null,null,null,a?.injector??null,a?.dehydratedView??null);C[Ps]=t[r.index];const U=t[bi];return null!==U&&(C[bi]=U.createEmbeddedView(u)),Lf(u,C,s),C}(this._declarationLView,this._declarationTContainer,r,{injector:s,dehydratedView:a});return new Uf(u)}};function f_(){return Oh(Or(),vt())}function Oh(t,r){return 4&t.type?new h_(r,t,zt(t,r)):null}class av{}class iI{}class ts{}class cv{resolveComponentFactory(r){throw function r0(t){const r=Error(`No component factory found for ${Fn(t)}.`);return r.ngComponent=t,r}(r)}}let Cg=(()=>{class t{static#e=this.NULL=new cv}return t})();class uv{}let lv=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function oI(){const t=vt(),s=ks(Or().index,t);return(ss(s)?s:t)[An]}()}return t})(),aI=(()=>{class t{static#e=this.\u0275prov=pr({token:t,providedIn:"root",factory:()=>null})}return t})();const T_={};function fv(t){return function dv(t){return"function"==typeof t&&void 0!==t[Ee]}(t)&&"function"==typeof t.set}function Bu(t){const r=Ie(null);try{return t()}finally{Ie(r)}}function D_(t){return!!A_(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function A_(t){return null!==t&&("function"==typeof t||"object"==typeof t)}class pv{constructor(){}supports(r){return D_(r)}create(r){return new mv(r)}}const gv=(t,r)=>r;class mv{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||gv}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,u=0,f=null;for(;s||a;){const E=!a||s&&s.currentIndex<Yf(a,u,f)?s:a,C=Yf(E,u,f),P=E.currentIndex;if(E===a)u--,a=a._nextRemoved;else if(s=s._next,null==E.previousIndex)u++;else{f||(f=[]);const U=C-u,K=P-u;if(U!=K){for(let Te=0;Te<U;Te++){const xe=Te<f.length?f[Te]:f[Te]=0,lt=xe+Te;K<=lt&&lt<U&&(f[Te]=xe+1)}f[E.previousIndex]=K-U}}C!==P&&r(E,C,P)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!D_(r))throw new $t(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let u,f,E,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)f=r[C],E=this._trackByFn(C,f),null!==s&&Object.is(s.trackById,E)?(a&&(s=this._verifyReinsertion(s,f,E,C)),Object.is(s.item,f)||this._addIdentityChange(s,f)):(s=this._mismatch(s,f,E,C),a=!0),s=s._next}else u=0,function wg(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,C=>{E=this._trackByFn(u,C),null!==s&&Object.is(s.trackById,E)?(a&&(s=this._verifyReinsertion(s,C,E,u)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,E,u),a=!0),s=s._next,u++}),this.length=u;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,u){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,f,u)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,u))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,f,u)):r=this._addAfter(new Tg(s,a),f,u),r}_verifyReinsertion(r,s,a,u){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==f?r=this._reinsertAfter(f,r._prev,u):r.currentIndex!=u&&(r.currentIndex=u,this._addToMoves(r,u)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const u=r._prevRemoved,f=r._nextRemoved;return null===u?this._removalsHead=f:u._nextRemoved=f,null===f?this._removalsTail=u:f._prevRemoved=u,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const u=null===s?this._itHead:s._next;return r._next=u,r._prev=s,null===u?this._itTail=r:u._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new Xl),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Xl),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class Tg{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class Xl{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new cI,this.map.set(s,a)),a.add(r)}get(r,s){const u=this.map.get(r);return u?u.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yf(t,r,s){const a=t.previousIndex;if(null===a)return a;let u=0;return s&&a<s.length&&(u=s[a]),a+r+u}class Fh{constructor(){}supports(r){return r instanceof Map||A_(r)}create(){return new _v}}class _v{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||A_(r)))throw new $t(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,u)=>{if(s&&s.key===u)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const f=this._getOrCreateRecordForKey(u,a);s=this._insertBeforeOrAppend(s,f)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const u=this._records.get(r);this._maybeAddToChanges(u,s);const f=u._prev,E=u._next;return f&&(f._next=E),E&&(E._prev=f),u._next=null,u._prev=null,u}const a=new S_(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class S_{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Dg(){return new Qf([new pv])}let Qf=(()=>{class t{static#e=this.\u0275prov=pr({token:t,providedIn:"root",factory:Dg});constructor(s){this.factories=s}static create(s,a){if(null!=a){const u=a.factories.slice();s=s.concat(u)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||Dg()),deps:[[t,new Xc,new wl]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(null!=a)return a;throw new $t(901,!1)}}return t})();function Ag(){return new Jf([new Fh])}let Jf=(()=>{class t{static#e=this.\u0275prov=pr({token:t,providedIn:"root",factory:Ag});constructor(s){this.factories=s}static create(s,a){if(a){const u=a.factories.slice();s=s.concat(u)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||Ag()),deps:[[t,new Xc,new wl]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(a)return a;throw new $t(901,!1)}}return t})(),Zl=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Ev}return t})();function Ev(t){return function Iv(t,r,s){if(Fi(t)&&!s){const a=ks(t.index,r);return new Uf(a,a)}return 47&t.type?new Uf(r[li],r):null}(Or(),vt(),16==(16&t))}let Od=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Zf;static#t=this.__NG_ENV_ID__=s=>s}return t})();class Cv extends Od{constructor(r){super(),this._lView=r}onDestroy(r){return xa(this._lView,r),()=>function Bc(t,r){if(null===t[Ei])return;const s=t[Ei].indexOf(r);-1!==s&&t[Ei].splice(s,1)}(this._lView,r)}}function Zf(){return new Cv(vt())}const Lh=new Set;function xd(t){Lh.has(t)||(Lh.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Nd(...t){}class Us{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ii(!1),this.onMicrotaskEmpty=new ii(!1),this.onStable=new ii(!1),this.onError=new ii(!1),typeof Zone>"u")throw new $t(908,!1);Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!a&&s,u.shouldCoalesceRunChangeDetection=a,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function u0(){const t="function"==typeof en.requestAnimationFrame;let r=en[t?"requestAnimationFrame":"setTimeout"],s=en[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function dI(t){const r=()=>{!function lI(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(en,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Uh(t),t.isCheckStableRunning=!0,Vh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Uh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,u,f,E,C)=>{if(function hI(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(C))return s.invokeTask(u,f,E,C);try{return Tv(t),s.invokeTask(u,f,E,C)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&r(),Dv(t)}},onInvoke:(s,a,u,f,E,C,P)=>{try{return Tv(t),s.invoke(u,f,E,C,P)}finally{t.shouldCoalesceRunChangeDetection&&r(),Dv(t)}},onHasTask:(s,a,u,f)=>{s.hasTask(u,f),a===u&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,Uh(t),Vh(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(s,a,u,f)=>(s.handleError(u,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(u)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Us.isInAngularZone())throw new $t(909,!1)}static assertNotInAngularZone(){if(Us.isInAngularZone())throw new $t(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,u){const f=this._inner,E=f.scheduleEventTask("NgZoneEvent: "+u,r,uI,Nd,Nd);try{return f.runTask(E,s,a)}finally{f.cancelTask(E)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const uI={};function Vh(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Uh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Tv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Dv(t){t._nesting--,Vh(t)}class tp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ii,this.onMicrotaskEmpty=new ii,this.onStable=new ii,this.onError=new ii}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,u){return r.apply(s,a)}}var td=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(td||{});const M_={destroy(){}};function x_(t,r){!r&&function So(t){if(!Wd()&&!function Ci(){return nc}())throw new $t(-203,!1)}();const s=r?.injector??mr(la);if(!function cl(t){return"browser"===(t??mr(la)).get(D)}(s))return M_;xd("NgAfterNextRender");const a=s.get(rp),u=a.handler??=new np,f=r?.phase??td.MixedReadWrite,E=()=>{u.unregister(P),C()},C=s.get(Od).onDestroy(E),P=new Pg(s,f,()=>{E(),t()});return u.register(P),{destroy:E}}class Pg{constructor(r,s,a){this.phase=s,this.callbackFn=a,this.zone=r.get(Us),this.errorHandler=r.get(Lu,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(r){this.errorHandler?.handleError(r)}}}class np{constructor(){this.executingCallbacks=!1,this.buckets={[td.EarlyRead]:new Set,[td.Write]:new Set,[td.MixedReadWrite]:new Set,[td.Read]:new Set},this.deferredCallbacks=new Set}register(r){(this.executingCallbacks?this.deferredCallbacks:this.buckets[r.phase]).add(r)}unregister(r){this.buckets[r.phase].delete(r),this.deferredCallbacks.delete(r)}execute(){this.executingCallbacks=!0;for(const r of Object.values(this.buckets))for(const s of r)s.invoke();this.executingCallbacks=!1;for(const r of this.deferredCallbacks)this.buckets[r.phase].add(r);this.deferredCallbacks.clear()}destroy(){for(const r of Object.values(this.buckets))r.clear();this.deferredCallbacks.clear()}}let rp=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){const s=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const a of s)a();this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=pr({token:t,providedIn:"root",factory:()=>new t})}return t})();function kd(t){return!!oi(t)}function fu(t,r,s){let a=s?t.styles:null,u=s?t.classes:null,f=0;if(null!==r)for(let E=0;E<r.length;E++){const C=r[E];"number"==typeof C?f=C:1==f?u=Tr(u,C):2==f&&(a=Tr(a,C+": "+r[++E]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=u:t.classesWithoutHost=u}class Pv extends Cg{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Zn(r);return new ip(s,this.ngModule)}}function bv(t){const r=[];for(const s in t){if(!t.hasOwnProperty(s))continue;const a=t[s];void 0!==a&&r.push({propName:Array.isArray(a)?a[0]:a,templateName:s})}return r}class mI{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=ao(a);const u=this.injector.get(r,T_,a);return u!==T_||s===T_?u:this.parentInjector.get(r,s,a)}}class ip extends ts{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=bv(r.inputs);if(null!==s)for(const u of a)s.hasOwnProperty(u.propName)&&(u.transform=s[u.propName]);return a}get outputs(){return bv(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Di(t){return t.map(rs).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,u){let f=(u=u||this.ngModule)instanceof nt?u:u?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const E=f?new mI(r,f):r,C=E.get(uv,null);if(null===C)throw new $t(407,!1);const oe={rendererFactory:C,sanitizer:E.get(aI,null),inlineEffectRunner:null,afterRenderEventManager:E.get(rp,null),changeDetectionScheduler:E.get(av,null)},Te=C.createRenderer(null,this.componentDef),xe=this.componentDef.selectors[0][0]||"div",lt=a?function BE(t,r,s,a){const f=a.get(_f,!1)||s===Cn.ShadowDom,E=t.selectRootElement(r,f);return function Km(t){og(t)}(E),E}(Te,a,this.componentDef.encapsulation,E):qp(Te,xe,function gI(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(xe));let Ft=512;this.componentDef.signals?Ft|=4096:this.componentDef.onPush||(Ft|=16);let Zt=null;null!==lt&&(Zt=Du(lt,E,!0));const wn=Yl(0,null,null,1,0,null,null,null,null,null,null),kt=Dh(null,wn,null,Ft,null,null,oe,Te,E,null,Zt);let Cr,fi;Kn(kt);try{const yi=this.componentDef;let ba,um=null;yi.findHostDirectiveDefs?(ba=[],um=new Map,yi.findHostDirectiveDefs(yi,ba,um),ba.push(yi)):ba=[yi];const fM=function Mv(t,r){const s=t[Bt],a=cn;return t[a]=r,zl(s,a,2,"#host",null)}(kt,lt),pM=function _I(t,r,s,a,u,f,E){const C=u[Bt];!function yI(t,r,s,a){for(const u of t)r.mergedAttrs=Vt(r.mergedAttrs,u.hostAttrs);null!==r.mergedAttrs&&(fu(r,r.mergedAttrs,!0),null!==s&&rg(a,s,r))}(a,t,r,E);let P=null;null!==r&&(P=Du(r,u[ki]));const U=f.rendererFactory.createRenderer(r,s);let K=16;s.signals?K=4096:s.onPush&&(K=64);const oe=Dh(u,qm(s),null,K,u[t.index],t,f,U,null,null,P);return C.firstCreatePass&&Zm(C,t,a.length-1),Ah(u,oe),u[t.index]=oe}(fM,lt,yi,ba,kt,oe,Te);fi=Ji(wn,cn),lt&&function vI(t,r,s,a){if(a)ye(t,s,["ng-version","17.2.2"]);else{const{attrs:u,classes:f}=function si(t){const r=[],s=[];let a=1,u=2;for(;a<t.length;){let f=t[a];if("string"==typeof f)2===u?""!==f&&r.push(f,t[++a]):8===u&&s.push(f);else{if(!Vn(u))break;u=f}a++}return{attrs:r,classes:s}}(r.selectors[0]);u&&ye(t,s,u),f&&f.length>0&&Py(t,s,f.join(" "))}}(Te,yi,lt,a),void 0!==s&&function jh(t,r,s){const a=t.projection=[];for(let u=0;u<r.length;u++){const f=s[u];a.push(null!=f?Array.from(f):null)}}(fi,this.ngContentSelectors,s),Cr=function Ov(t,r,s,a,u,f){const E=Or(),C=u[Bt],P=dr(E,u);ky(C,u,E,s,null,a);for(let K=0;K<s.length;K++)l(Ol(u,C,E.directiveStart+K,E),u);lg(C,u,E),P&&l(P,u);const U=Ol(u,C,E.directiveStart+E.componentOffset,E);if(t[or]=u[or]=U,null!==f)for(const K of f)K(U,r);return Nf(C,E,u),U}(pM,yi,ba,um,kt,[N_]),Lf(wn,kt,null)}finally{zi()}return new Rv(this.componentType,Cr,zt(fi,kt),kt,fi)}}class Rv extends iI{constructor(r,s,a,u,f){super(),this.location=a,this._rootLView=u,this._tNode=f,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new Uf(u,void 0,!1),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let u;if(null!==a&&(u=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const f=this._rootLView;Ff(f[Bt],f,u,r,s),this.previousInputValues.set(r,s),Vf(ks(this._tNode.index,f))}}get injector(){return new Ws(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function N_(){const t=Or();Mc(vt()[Bt],t)}let k_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=EI}return t})();function EI(){return CI(Or(),vt())}const II=k_,xv=class extends II{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return zt(this._hostTNode,this._hostLView)}get injector(){return new Ws(this._hostTNode,this._hostLView)}get parentInjector(){const r=ih(this._hostTNode,this._hostLView);if(_d(r)){const s=ou(r,this._hostLView),a=us(r);return new Ws(s[Bt].data[a+8],s)}return new Ws(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Nv(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-di}createEmbeddedView(r,s,a){let u,f;"number"==typeof a?u=a:null!=a&&(u=a.index,f=a.injector);const C=r.createEmbeddedViewImpl(s||{},f,null);return this.insertImpl(C,u,Sh(this._hostTNode,null)),C}createComponent(r,s,a,u,f){const E=r&&!function Rc(t){return"function"==typeof t}(r);let C;if(E)C=s;else{const lt=s||{};C=lt.index,a=lt.injector,u=lt.projectableNodes,f=lt.environmentInjector||lt.ngModuleRef}const P=E?r:new ip(Zn(r)),U=a||this.parentInjector;if(!f&&null==P.ngModule){const Ft=(E?U:this.parentInjector).get(nt,null);Ft&&(f=Ft)}Zn(P.componentType??{});const xe=P.create(U,u,null,f);return this.insertImpl(xe.hostView,C,Sh(this._hostTNode,null)),xe}insert(r,s){return this.insertImpl(r,s,!0)}insertImpl(r,s,a){const u=r._lView;if(function gc(t){return Hi(t[Ar])}(u)){const C=this.indexOf(r);if(-1!==C)this.detach(C);else{const P=u[Ar],U=new xv(P,P[xi],P[Ar]);U.detach(U.indexOf(r))}}const f=this._adjustIndex(s),E=this._lContainer;return bd(E,u,f,a),r.attachToViewContainerRef(),yl(F_(E),f,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Nv(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Sf(this._lContainer,s);a&&(Wc(F_(this._lContainer),s),Yp(a[Bt],a))}detach(r){const s=this._adjustIndex(r,-1),a=Sf(this._lContainer,s);return a&&null!=Wc(F_(this._lContainer),s)?new Uf(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function Nv(t){return t[8]}function F_(t){return t[8]||(t[8]=[])}function CI(t,r){let s;const a=r[t.index];return Hi(a)?s=a:(s=dg(a,r,null,t),r[t.index]=s,Ah(r,s)),wI(s,r,t,a),new xv(s,t,r)}let wI=function Lv(t,r,s,a){if(t[Wi])return;let u;u=8&s.type?Fr(a):function d0(t,r){const s=t[An],a=s.createComment(""),u=dr(r,t);return Fc(s,Mf(s,u),a,function Gm(t,r){return t.nextSibling(r)}(s,u),!1),a}(r,s),t[Wi]=u},kv=()=>!1;class Mg{constructor(r){this.queryList=r,this.matches=null}clone(){return new Mg(this.queryList)}setDirty(){this.queryList.setDirty()}}class ju{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,u=[];for(let f=0;f<a;f++){const E=s.getByIndex(f);u.push(this.queries[E.indexInDeclarationView].clone())}return new ju(u)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}finishViewCreation(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==xg(r,s).matches&&this.queries[s].setDirty()}}class Vv{constructor(r,s,a=null){this.flags=s,this.read=a,this.predicate="string"==typeof r?function f0(t){return t.split(",").map(r=>r.trim())}(r):r}}class L_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const u=null!==s?s.length:0,f=this.getByIndex(a).embeddedTView(r,u);f&&(f.indexInDeclarationView=a,null!==s?s.push(f):s=[f])}return null!==s?new L_(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class V_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new V_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let u=0;u<a.length;u++){const f=a[u];this.matchTNodeWithReadOption(r,s,AI(s,f)),this.matchTNodeWithReadOption(r,s,lf(s,r,f,!1,!1))}else a===Bf?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,lf(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const u=this.metadata.read;if(null!==u)if(u===ot||u===k_||u===Bf&&4&s.type)this.addMatch(s.index,-2);else{const f=lf(s,r,u,!1,!1);null!==f&&this.addMatch(s.index,f)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function AI(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function PI(t,r,s,a){return-1===s?function SI(t,r){return 11&t.type?zt(t,r):4&t.type?Oh(t,r):null}(r,t):-2===s?function bI(t,r,s){return s===ot?zt(r,t):s===Bf?Oh(r,t):s===k_?CI(r,t):void 0}(t,r,a):Ol(t,t[Bt],s,r)}function RI(t,r,s,a){const u=r[bi].queries[a];if(null===u.matches){const f=t.data,E=s.matches,C=[];for(let P=0;null!==E&&P<E.length;P+=2){const U=E[P];C.push(U<0?null:PI(r,f[U],E[P+1],s.metadata.read))}u.matches=C}return u.matches}function Uv(t,r,s,a){const u=t.queries.getByIndex(s),f=u.matches;if(null!==f){const E=RI(t,r,u,s);for(let C=0;C<f.length;C+=2){const P=f[C];if(P>0)a.push(E[C/2]);else{const U=f[C+1],K=r[-P];for(let oe=di;oe<K.length;oe++){const Te=K[oe];Te[Ps]===Te[Ar]&&Uv(Te[Bt],Te,U,a)}if(null!==K[Oo]){const oe=K[Oo];for(let Te=0;Te<oe.length;Te++){const xe=oe[Te];Uv(xe[Bt],xe,U,a)}}}}}return a}function Bv(t,r,s){const a=new mn(4==(4&s));return function jE(t,r,s,a){const u=hg(r);u.push(s),t.firstCreatePass&&fg(t).push(a,u.length-1)}(t,r,a,a.destroy),(r[bi]??=new ju).queries.push(new Mg(a))-1}function xI(t,r,s){null===t.queries&&(t.queries=new L_),t.queries.track(new V_(r,s))}function xg(t,r){return t.queries.getByIndex(r)}function NI(t,r){const s=t[Bt],a=xg(s,r);return a.crossesNgTemplate?Uv(s,t,r,[]):RI(s,t,a,r)}function Bg(t){let r=function W_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let u;if(Li(t))u=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new $t(903,!1);u=r.\u0275dir}if(u){if(s){a.push(u);const E=t;E.inputs=cp(t.inputs),E.inputTransforms=cp(t.inputTransforms),E.declaredInputs=cp(t.declaredInputs),E.outputs=cp(t.outputs);const C=u.hostBindings;C&&Xv(t,C);const P=u.viewQuery,U=u.contentQueries;if(P&&HI(t,P),U&&zI(t,U),WI(t,u),Qe(t.outputs,u.outputs),Li(u)&&u.data.animation){const K=t.data;K.animation=(K.animation||[]).concat(u.data.animation)}}const f=u.features;if(f)for(let E=0;E<f.length;E++){const C=f[E];C&&C.ngInherit&&C(t),C===Bg&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Jv(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const u=t[a];u.hostVars=r+=u.hostVars,u.hostAttrs=Vt(u.hostAttrs,s=Vt(s,u.hostAttrs))}}(a)}function WI(t,r){for(const s in r.inputs){if(!r.inputs.hasOwnProperty(s)||t.inputs.hasOwnProperty(s))continue;const a=r.inputs[s];if(void 0!==a&&(t.inputs[s]=a,t.declaredInputs[s]=r.declaredInputs[s],null!==r.inputTransforms)){const u=Array.isArray(a)?a[0]:a;if(!r.inputTransforms.hasOwnProperty(u))continue;t.inputTransforms??={},t.inputTransforms[u]=r.inputTransforms[u]}}}function cp(t){return t===Ln?{}:t===Pe?[]:t}function HI(t,r){const s=t.viewQuery;t.viewQuery=s?(a,u)=>{r(a,u),s(a,u)}:r}function zI(t,r){const s=t.contentQueries;t.contentQueries=s?(a,u,f)=>{r(a,u,f),s(a,u,f)}:r}function Xv(t,r){const s=t.hostBindings;t.hostBindings=s?(a,u)=>{r(a,u),s(a,u)}:r}function nE(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const u=r[a];Array.isArray(u)&&u[3]&&(s[a]=u[3])}t.inputTransforms=s}class Vd{}class rE{}function XI(t,r){return new e(t,r??null,[])}class e extends Vd{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Pv(this);const u=oi(r);this._bootstrapComponents=Pa(u.bootstrap),this._r3Injector=Dp(r,s,[{provide:Vd,useValue:this},{provide:Cg,useValue:this.componentFactoryResolver},...a],Fn(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class n extends rE{constructor(r){super(),this.moduleType=r}create(r){return new e(this.moduleType,r,[])}}class c extends Vd{constructor(r){super(),this.componentFactoryResolver=new Pv(this),this.instance=null;const s=new St([...r.providers,{provide:Vd,useValue:this},{provide:Cg,useValue:this.componentFactoryResolver}],r.parent||be(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function h(t,r,s=null){return new c({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let R=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Wn.g(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function k(t,r,s){return t[r]=s}function Y(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function ce(t,r,s,a){const u=Y(t,r,s);return Y(t,r+1,a)||u}function nn(t,r,s,a,u,f,E,C){const P=vt(),U=ar(),K=t+cn,oe=U.firstCreatePass?function Wt(t,r,s,a,u,f,E,C,P){const U=r.consts,K=zl(r,t,4,E||null,ds(U,C));ug(r,s,K,ds(U,P)),Mc(r,K);const oe=K.tView=Yl(2,K,a,u,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,U,null);return null!==r.queries&&(r.queries.template(r,K),oe.queries=r.queries.embeddedTView(K)),K}(K,U,P,r,s,a,u,f,E):U.data[K];po(oe,!1);const Te=tn(U,P,oe,t);on()&&eg(U,P,Te,oe),l(Te,P);const xe=dg(Te,P,Te,oe);return P[K]=xe,Ah(P,xe),function Fv(t,r,s){return kv(t,r,s)}(xe,oe,P),xs(oe)&&ql(U,P,oe),null!=E&&Kl(P,oe,C),nn}let tn=function xn(t,r,s,a){return hn(!0),r[An].createComment("")};function cC(t,r,s,a){const u=vt();return Y(u,Er(),r)&&(ar(),hu(er(),u,t,r,s,a)),cC}function cE(t,r){return t<<17|r<<2}function zh(t){return t>>17&32767}function uC(t){return 2|t}function dp(t){return(131068&t)>>2}function lC(t,r){return-131069&t|r<<2}function dC(t){return 1|t}function Q0(t,r,s,a){const u=t[s+1],f=null===r;let E=a?zh(u):dp(u),C=!1;for(;0!==E&&(!1===C||f);){const U=t[E+1];BA(t[E],r)&&(C=!0,t[E+1]=a?dC(U):uC(U)),E=a?zh(U):dp(U)}C&&(t[s+1]=a?uC(u):dC(u))}function BA(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&Sn(t,r)>=0}function hC(t,r,s){const a=vt();return Y(a,Er(),r)&&Ha(ar(),er(),a,t,r,a[An],s,!1),hC}function fC(t,r,s,a,u){const E=u?"class":"style";Ff(t,s,r.inputs[E],E,a)}function pC(t,r){return function ml(t,r,s,a){const u=vt(),f=ar(),E=function A(t){const r=Mn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}(2);f.firstUpdatePass&&function sw(t,r,s,a){const u=t.data;if(null===u[s+1]){const f=u[Jn()],E=function iw(t,r){return r>=t.expandoStartIndex}(t,s);(function uw(t,r){return 0!=(t.flags&(r?8:16))})(f,a)&&null===r&&!E&&(r=!1),r=function YA(t,r,s,a){const u=function pt(t){const r=Mn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let f=a?r.residualClasses:r.residualStyles;if(null===u)0===(a?r.classBindings:r.styleBindings)&&(s=K_(s=gC(null,t,r,s,a),r.attrs,a),f=null);else{const E=r.directiveStylingLast;if(-1===E||t[E]!==u)if(s=gC(u,t,r,s,a),null===f){let P=function QA(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==dp(a))return t[zh(a)]}(t,r,a);void 0!==P&&Array.isArray(P)&&(P=gC(null,t,r,P[1],a),P=K_(P,r.attrs,a),function JA(t,r,s,a){t[zh(s?r.classBindings:r.styleBindings)]=a}(t,r,a,P))}else f=function XA(t,r,s){let a;const u=r.directiveEnd;for(let f=1+r.directiveStylingLast;f<u;f++)a=K_(a,t[f].hostAttrs,s);return K_(a,r.attrs,s)}(t,r,a)}return void 0!==f&&(a?r.residualClasses=f:r.residualStyles=f),s}(u,f,r,a),function VA(t,r,s,a,u,f){let E=f?r.classBindings:r.styleBindings,C=zh(E),P=dp(E);t[a]=s;let K,U=!1;if(Array.isArray(s)?(K=s[1],(null===K||Sn(s,K)>0)&&(U=!0)):K=s,u)if(0!==P){const Te=zh(t[C+1]);t[a+1]=cE(Te,C),0!==Te&&(t[Te+1]=lC(t[Te+1],a)),t[C+1]=function FA(t,r){return 131071&t|r<<17}(t[C+1],a)}else t[a+1]=cE(C,0),0!==C&&(t[C+1]=lC(t[C+1],a)),C=a;else t[a+1]=cE(P,0),0===C?C=a:t[P+1]=lC(t[P+1],a),P=a;U&&(t[a+1]=uC(t[a+1])),Q0(t,K,a,!0),Q0(t,K,a,!1),function UA(t,r,s,a,u){const f=u?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof r&&Sn(f,r)>=0&&(s[a+1]=dC(s[a+1]))}(r,K,t,a,f),E=cE(C,P),f?r.classBindings=E:r.styleBindings=E}(u,f,r,s,E,a)}}(f,t,E,a),r!==Ir&&Y(u,E,r)&&function aw(t,r,s,a,u,f,E,C){if(!(3&r.type))return;const P=t.data,U=P[C+1],K=function LA(t){return 1==(1&t)}(U)?cw(P,r,s,u,dp(U),E):void 0;uE(K)||(uE(f)||function kA(t){return 2==(2&t)}(U)&&(f=cw(P,null,s,u,C,E)),function Ay(t,r,s,a,u){if(r)u?t.addClass(s,a):t.removeClass(s,a);else{let f=-1===a.indexOf("-")?void 0:Af.DashCase;null==u?t.removeStyle(s,a,f):("string"==typeof u&&u.endsWith("!important")&&(u=u.slice(0,-10),f|=Af.Important),t.setStyle(s,a,u,f))}}(a,E,xo(Jn(),s),u,f))}(f,f.data[Jn()],u,u[An],t,u[E+1]=function nS(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Fn(uu(t)))),t}(r,s),a,E)}(t,r,null,!0),pC}function gC(t,r,s,a,u){let f=null;const E=s.directiveEnd;let C=s.directiveStylingLast;for(-1===C?C=s.directiveStart:C++;C<E&&(f=r[C],a=K_(a,f.hostAttrs,u),f!==t);)C++;return null!==t&&(s.directiveStylingLast=C),a}function K_(t,r,s){const a=s?1:2;let u=-1;if(null!==r)for(let f=0;f<r.length;f++){const E=r[f];"number"==typeof E?u=E:u===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Vr(t,E,!!s||r[++f]))}return void 0===t?null:t}function cw(t,r,s,a,u,f){const E=null===r;let C;for(;u>0;){const P=t[u],U=Array.isArray(P),K=U?P[1]:P,oe=null===K;let Te=s[u+1];Te===Ir&&(Te=oe?Pe:void 0);let xe=oe?ec(Te,a):K===a?Te:void 0;if(U&&!uE(xe)&&(xe=ec(P,a)),uE(xe)&&(C=xe,E))return C;const lt=t[u+1];u=E?zh(lt):dp(lt)}if(null!==r){let P=f?r.residualClasses:r.residualStyles;null!=P&&(C=ec(P,a))}return C}function uE(t){return void 0!==t}function lE(t,r,s,a){const u=vt(),f=ar(),E=cn+t,C=u[An],P=f.firstCreatePass?function DS(t,r,s,a,u,f){const E=r.consts,P=zl(r,t,2,a,ds(E,u));return ug(r,s,P,ds(E,f)),null!==P.attrs&&fu(P,P.attrs,!1),null!==P.mergedAttrs&&fu(P,P.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,P),P}(E,f,u,r,s,a):f.data[E],U=fw(f,u,P,C,r,t);u[E]=U;const K=xs(P);return po(P,!0),rg(C,U,P),32!=(32&P.flags)&&on()&&eg(f,u,U,P),0===function _a(){return Mn.lFrame.elementDepthCount}()&&l(U,u),function mc(){Mn.lFrame.elementDepthCount++}(),K&&(ql(f,u,P),Nf(f,P,u)),null!==a&&Kl(u,P),lE}function dE(){let t=Or();to()?function $c(){Mn.lFrame.isParent=!1}():(t=t.parent,po(t,!1));const r=t;(function Es(t){return Mn.skipHydrationRootTNode===t})(r)&&function jc(){Mn.skipHydrationRootTNode=null}(),function qo(){Mn.lFrame.elementDepthCount--}();const s=ar();return s.firstCreatePass&&(Mc(s,t),Os(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function nh(t){return 0!=(8&t.flags)}(r)&&fC(s,r,vt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function sf(t){return 0!=(16&t.flags)}(r)&&fC(s,r,vt(),r.stylesWithoutHost,!1),dE}function EC(t,r,s,a){return lE(t,r,s,a),dE(),EC}let fw=(t,r,s,a,u,f)=>(hn(!0),qp(a,u,function no(){return Mn.lFrame.currentNamespace}()));function mw(){return vt()}const hp=void 0;var OS=["en",[["a","p"],["AM","PM"],hp],[["AM","PM"],hp,hp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hp,"{1} 'at' {0}",hp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function MS(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let rm={};function wC(t){const r=function xS(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=Ew(r);if(s)return s;const a=r.split("-")[0];if(s=Ew(a),s)return s;if("en"===a)return OS;throw new $t(701,!1)}function vw(t){return wC(t)[im.PluralCase]}function Ew(t){return t in rm||(rm[t]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[t]),rm[t]}var im=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(im||{});const sm="en-US";let Iw=sm;function AC(t,r,s,a){const u=vt(),f=ar(),E=Or();return SC(f,u,u[An],E,t,r,a),AC}function SC(t,r,s,a,u,f,E){const C=xs(a),U=t.firstCreatePass&&fg(t),K=r[or],oe=hg(r);let Te=!0;if(3&a.type||E){const Ft=dr(a,r),Zt=E?E(Ft):Ft,wn=oe.length,kt=E?fi=>E(Fr(fi[a.index])):a.index;let Cr=null;if(!E&&C&&(Cr=function SP(t,r,s,a){const u=t.cleanup;if(null!=u)for(let f=0;f<u.length-1;f+=2){const E=u[f];if(E===s&&u[f+1]===a){const C=r[$i],P=u[f+2];return C.length>P?C[P]:null}"string"==typeof E&&(f+=2)}return null}(t,r,u,a.index)),null!==Cr)(Cr.__ngLastListenerFn__||Cr).__ngNextListenerFn__=f,Cr.__ngLastListenerFn__=f,Te=!1;else{f=Kw(a,r,K,f,!1);const fi=s.listen(Zt,u,f);oe.push(f,fi),U&&U.push(u,kt,wn,wn+1)}}else f=Kw(a,r,K,f,!1);const xe=a.outputs;let lt;if(Te&&null!==xe&&(lt=xe[u])){const Ft=lt.length;if(Ft)for(let Zt=0;Zt<Ft;Zt+=2){const yi=r[lt[Zt]][lt[Zt+1]].subscribe(f),ba=oe.length;oe.push(f,yi),U&&U.push(u,a.index,ba,"function"==typeof yi?ba+1:-(ba+1))}}}function qw(t,r,s,a){try{return Uo(6,r,s),!1!==s(a)}catch(u){return kf(t,u),!1}finally{Uo(7,r,s)}}function Kw(t,r,s,a,u){return function f(E){if(E===Function)return a;Vf(t.componentOffset>-1?ks(t.index,r):r);let P=qw(r,s,a,E),U=f.__ngNextListenerFn__;for(;U;)P=qw(r,s,U,E)&&P,U=U.__ngNextListenerFn__;return u&&!1===P&&E.preventDefault(),P}}function Yw(t=1){return function va(t){return(Mn.lFrame.contextLView=function No(t,r){for(;t>0;)r=r[qs],t--;return r}(t,Mn.lFrame.contextLView))[or]}(t)}function sT(t,r,s,a){!function OI(t,r,s,a){const u=ar();if(u.firstCreatePass){const f=Or();xI(u,new Vv(r,s,a),f.index),function jv(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(u,t),2==(2&s)&&(u.staticContentQueries=!0)}return Bv(u,vt(),s)}(t,r,s,a)}function oT(t,r,s){!function MI(t,r,s){const a=ar();return a.firstCreatePass&&(xI(a,new Vv(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),Bv(a,vt(),r)}(t,r,s)}function aT(t){const r=vt(),s=ar(),a=ln();Xr(a+1);const u=xg(s,a);if(t.dirty&&function ls(t){return 4==(4&t[vn])}(r)===(2==(2&u.metadata.flags))){if(null===u.matches)t.reset([]);else{const f=NI(r,a);t.reset(f,Pt),t.notifyOnChanges()}return!0}return!1}function cT(){return function Og(t,r){return t[bi].queries[r].queryList}(vt(),ln())}function yT(t,r=""){const s=vt(),a=ar(),u=t+cn,f=a.firstCreatePass?zl(a,u,1,r,null):a.data[u],E=vT(a,s,f,r,t);s[u]=E,on()&&eg(a,s,E,f),po(f,!1)}let vT=(t,r,s,a,u)=>(hn(!0),function zp(t,r){return t.createText(r)}(r[An],a));function bC(t){return mE("",t,""),bC}function mE(t,r,s){const a=vt(),u=function Kg(t,r,s,a){return Y(t,Er(),s)?r+ir(s)+a:Ir}(a,t,r,s);return u!==Ir&&function hl(t,r,s){const a=xo(r,t);!function vy(t,r,s){t.setValue(r,s)}(t[An],a,s)}(a,Jn(),u),mE}function RC(t,r,s){fv(r)&&(r=r());const a=vt();return Y(a,Er(),r)&&Ha(ar(),er(),a,t,r,a[An],s,!1),RC}function PT(t,r){const s=fv(t);return s&&t.set(r),s}function MC(t,r){const s=vt(),a=ar(),u=Or();return SC(a,s,s[An],u,t,r),MC}function OC(t,r,s,a,u){if(t=jt(t),Array.isArray(t))for(let f=0;f<t.length;f++)OC(t[f],r,s,a,u);else{const f=ar(),E=vt(),C=Or();let P=T(t)?t:jt(t.provide);const U=_o(t),K=1048575&C.providerIndexes,oe=C.directiveStart,Te=C.providerIndexes>>20;if(T(t)||!t.multi){const xe=new Sl(U,u,Hl),lt=NC(P,r,u?K:K+Te,oe);-1===lt?(uf(Zu(C,E),f,P),xC(f,t,r.length),r.push(P),C.directiveStart++,C.directiveEnd++,u&&(C.providerIndexes+=1048576),s.push(xe),E.push(xe)):(s[lt]=xe,E[lt]=xe)}else{const xe=NC(P,r,K+Te,oe),lt=NC(P,r,K,K+Te),Zt=lt>=0&&s[lt];if(u&&!Zt||!u&&!(xe>=0&&s[xe])){uf(Zu(C,E),f,P);const wn=function QP(t,r,s,a,u){const f=new Sl(t,s,Hl);return f.multi=[],f.index=r,f.componentProviders=0,bT(f,u,a&&!s),f}(u?YP:KP,s.length,u,a,U);!u&&Zt&&(s[lt].providerFactory=wn),xC(f,t,r.length,0),r.push(P),C.directiveStart++,C.directiveEnd++,u&&(C.providerIndexes+=1048576),s.push(wn),E.push(wn)}else xC(f,t,xe>-1?xe:lt,bT(s[u?lt:xe],U,!u&&a));!u&&a&&Zt&&s[lt].componentProviders++}}}function xC(t,r,s,a){const u=T(r),f=function m(t){return!!t.useClass}(r);if(u||f){const P=(f?jt(r.useClass):r).prototype.ngOnDestroy;if(P){const U=t.destroyHooks||(t.destroyHooks=[]);if(!u&&r.multi){const K=U.indexOf(s);-1===K?U.push(s,[a,P]):U[K+1].push(a,P)}else U.push(s,P)}}}function bT(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function NC(t,r,s,a){for(let u=s;u<a;u++)if(r[u]===t)return u;return-1}function KP(t,r,s,a){return kC(this.multi,[])}function YP(t,r,s,a){const u=this.multi;let f;if(this.providerFactory){const E=this.providerFactory.componentProviders,C=Ol(s,s[Bt],this.providerFactory.index,a);f=C.slice(0,E),kC(u,f);for(let P=E;P<C.length;P++)f.push(C[P])}else f=[],kC(u,f);return f}function kC(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function RT(t,r=[]){return s=>{s.providersResolver=(a,u)=>function qP(t,r,s){const a=ar();if(a.firstCreatePass){const u=Li(t);OC(s,a.data,a.blueprint,u,!0),OC(r,a.data,a.blueprint,u,!1)}}(a,u?u(t):t,r)}}let JP=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=eu(0,s.type),u=a.length>0?h([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,u)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=pr({token:t,providedIn:"environment",factory:()=>new t(cr(nt))})}return t})();function MT(t){xd("NgStandalone"),t.getStandaloneInjector=r=>r.get(JP).getOrCreateStandaloneInjector(t)}function ey(t,r){const s=t[r];return s===Ir?void 0:s}function $T(t,r,s,a,u,f,E,C){const P=r+s;return function Ae(t,r,s,a,u){const f=ce(t,r,s,a);return Y(t,r+2,u)||f}(t,P,u,f,E)?k(t,P+3,C?a.call(C,u,f,E):a(u,f,E)):ey(t,P+3)}function HT(t,r){const s=ar();let a;const u=t+cn;s.firstCreatePass?(a=function _b(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[u]=a,a.onDestroy&&(s.destroyHooks??=[]).push(u,a.onDestroy)):a=s.data[u];const f=a.factory||(a.factory=ac(a.type)),C=oo(Hl);try{const P=Nc(!1),U=f();return Nc(P),function NP(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,vt(),u,U),U}finally{oo(C)}}function zT(t,r,s){const a=t+cn,u=vt(),f=ma(u,a);return ty(u,a)?function BT(t,r,s,a,u,f){const E=r+s;return Y(t,E,u)?k(t,E+1,f?a.call(f,u):a(u)):ey(t,E+1)}(u,Is(),r,f.transform,s,f):f.transform(s)}function qT(t,r,s,a){const u=t+cn,f=vt(),E=ma(f,u);return ty(f,u)?function jT(t,r,s,a,u,f,E){const C=r+s;return ce(t,C,u,f)?k(t,C+2,E?a.call(E,u,f):a(u,f)):ey(t,C+2)}(f,Is(),r,E.transform,s,a,E):E.transform(s,a)}function KT(t,r,s,a,u){const f=t+cn,E=vt(),C=ma(E,f);return ty(E,f)?$T(E,Is(),r,C.transform,s,a,u,C):C.transform(s,a,u)}function ty(t,r){return t[Bt].data[r].pure}class lD{constructor(r){this.full=r;const s=r.split(".");this.major=s[0],this.minor=s[1],this.patch=s.slice(2).join(".")}}const $b=new lD("17.2.2");let dD=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const mD=new gr(""),_D=new gr("");let $C,pR=(()=>{class t{constructor(s,a,u){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,$C||(function gR(t){$C=t}(u),u.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Us.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb()}});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,u){let f=-1;a&&a>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==f),s()},a)),this._callbacks.push({doneCb:s,timeoutId:f,updateCb:u})}whenStable(s,a,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,u){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(cr(Us),cr(yD),cr(_D))};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac})}return t})(),yD=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return $C?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function GC(t){return!!t&&"function"==typeof t.then}function vD(t){return!!t&&"function"==typeof t.subscribe}const ED=new gr("");let WC=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=mr(ED,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const u of this.appInits){const f=u();if(GC(f))s.push(f);else if(vD(f)){const E=new Promise((C,P)=>{f.subscribe({complete:C,error:P})});s.push(E)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(u=>{this.reject(u)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const HC=new gr("");function wD(t,r){return Array.isArray(r)?r.reduce(wD,t):{...t,...r}}let fp=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=mr(gf),this.afterRenderEffectManager=mr(rp),this.componentTypes=[],this.components=[],this.isStable=mr(R).hasPendingTasks.pipe((0,Rr.k)(s=>!s)),this._injector=mr(nt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const u=s instanceof ts;if(!this._injector.get(WC).done)throw!u&&Ss(s),new $t(405,!1);let E;E=u?s:this._injector.get(Cg).resolveComponentFactory(s),this.componentTypes.push(E.componentType);const C=function mR(t){return t.isBoundToModule}(E)?void 0:this._injector.get(Vd),U=E.create(la.NULL,[],a||E.selector,C),K=U.location.nativeElement,oe=U.injector.get(mD,null);return oe?.registerApplication(K),U.onDestroy(()=>{this.detachView(U.hostView),EE(this.components,U),oe?.unregisterApplication(K)}),this._loadComponent(U),U}tick(){if(this._runningTick)throw new $t(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let s=0;do{if(100===s)throw new $t(103,!1);const a=0===s;for(let{_lView:u,notifyErrorHandler:f}of this._views)!a&&!TD(u)||this.detectChangesInView(u,f,a);this.afterRenderEffectManager.execute(),s++}while(this._views.some(({_lView:a})=>TD(a)))}detectChangesInView(s,a,u){let f;u?(f=0,s[vn]|=1024):f=64&s[vn]?0:1,Ph(s,a,f)}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;EE(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(HC,[]);[...this._bootstrapListeners,...a].forEach(u=>u(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>EE(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new $t(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function EE(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}function TD(t){return Xs(t)}class yR{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let vR=(()=>{class t{compileModuleSync(s){return new n(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),f=Pa(oi(s).declarations).reduce((E,C)=>{const P=Zn(C);return P&&E.push(new ip(P)),E},[]);return new yR(a,f)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),CR=(()=>{class t{constructor(){this.zone=mr(Us),this.applicationRef=mr(fp)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wR(){const t=mr(Us),r=mr(Lu);return s=>t.runOutsideAngular(()=>r.handleError(s))}let DR=(()=>{class t{constructor(){this.subscription=new Yt.wH,this.initialized=!1,this.zone=mr(Us),this.pendingTasks=mr(R)}initialize(){if(this.initialized)return;this.initialized=!0;let s=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(s=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Us.assertNotInAngularZone(),queueMicrotask(()=>{null!==s&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(s),s=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Us.assertInAngularZone(),s??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const CE=new gr("",{providedIn:"root",factory:()=>mr(CE,bn.Optional|bn.SkipSelf)||function AR(){return typeof $localize<"u"&&$localize.locale||sm}()}),SR=new gr("",{providedIn:"root",factory:()=>"USD"}),zC=new gr("");let PD=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const u=function fI(t="zone.js",r){return"noop"===t?new tp:"zone.js"===t?new Us(r):t}(a?.ngZone,function SD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return u.run(()=>{const f=function o(t,r,s){return new e(t,r,s)}(s.moduleType,this.injector,function AD(t){return[{provide:Us,useFactory:t},{provide:Ba,multi:!0,useFactory:()=>{const r=mr(CR,{optional:!0});return()=>r.initialize()}},{provide:Ba,multi:!0,useFactory:()=>{const r=mr(DR);return()=>{r.initialize()}}},{provide:gf,useFactory:wR}]}(()=>u)),E=f.injector.get(Lu,null);return u.runOutsideAngular(()=>{const C=u.onError.subscribe({next:P=>{E.handleError(P)}});f.onDestroy(()=>{EE(this._modules,f),C.unsubscribe()})}),function CD(t,r,s){try{const a=s();return GC(a)?a.catch(u=>{throw r.runOutsideAngular(()=>t.handleError(u)),u}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(E,u,()=>{const C=f.injector.get(WC);return C.runInitializers(),C.donePromise.then(()=>(function Cw(t){"string"==typeof t&&(Iw=t.toLowerCase().replace(/_/g,"-"))}(f.injector.get(CE,sm)||sm),this._moduleDoBootstrap(f),f))})})}bootstrapModule(s,a=[]){const u=wD({},a);return function IR(t,r,s){const a=new n(s);return Promise.resolve(a)}(0,0,s).then(f=>this.bootstrapModuleFactory(f,u))}_moduleDoBootstrap(s){const a=s.injector.get(fp);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(u=>a.bootstrap(u));else{if(!s.instance.ngDoBootstrap)throw new $t(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $t(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(zC,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(cr(la))};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),qh=null;const bD=new gr("");function RD(t,r,s=[]){const a=`Platform: ${r}`,u=new gr(a);return(f=[])=>{let E=qC();if(!E||E.injector.get(bD,!1)){const C=[...s,...f,{provide:u,useValue:!0}];t?t(C):function bR(t){if(qh&&!qh.get(bD,!1))throw new $t(400,!1);(function ID(){!function sn(t){Nt=t}(()=>{throw new $t(600,!1)})})(),qh=t;const r=t.get(PD);(function OD(t){t.get(M,null)?.forEach(s=>s())})(t)}(function MD(t=[],r){return la.create({name:r,providers:[{provide:v,useValue:"platform"},{provide:zC,useValue:new Set([()=>qh=null])},...t]})}(C,a))}return function RR(t){const r=qC();if(!r)throw new $t(401,!1);return r}()}}function qC(){return qh?.get(PD)??null}function OR(){return!1}const FR=RD(null,"core",[]);let LR=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(cr(fp))};static#t=this.\u0275mod=$o({type:t});static#n=this.\u0275inj=Jo({})}return t})();function lM(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function hM(t){const r=Zn(t);if(!r)return null;const s=new ip(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},2740:(Xt,$e,V)=>{V.d($e,{_o:()=>Ue,Q$:()=>at,cd:()=>sn,Ev:()=>He,mq:()=>Nt,ox:()=>Kt,_8:()=>Re,GW:()=>ct,CU:()=>tt}),V(6858);var J=V(1368),I=V(4496),O=V(6176),ge=V(6e3),Ee=V(5657),Ie=V(2700),Be=V(3252),je=V(9900),le=V(267),ue=V(560),Oe=V(8960),Se=V(6624),We=V(3920),Ve=V(7368),Xe=V(4704),Ce=V(5960);class ht extends Ee.E{constructor(Dt=1/0,ze=1/0,xt=Ce.K){super(),this._bufferSize=Dt,this._windowTime=ze,this._timestampProvider=xt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ze===1/0,this._bufferSize=Math.max(1,Dt),this._windowTime=Math.max(1,ze)}next(Dt){const{isStopped:ze,_buffer:xt,_infiniteTimeWindow:De,_timestampProvider:dt,_windowTime:yt}=this;ze||(xt.push(Dt),!De&&xt.push(dt.now()+yt)),this._trimBuffer(),super.next(Dt)}_subscribe(Dt){this._throwIfClosed(),this._trimBuffer();const ze=this._innerSubscribe(Dt),{_infiniteTimeWindow:xt,_buffer:De}=this,dt=De.slice();for(let yt=0;yt<dt.length&&!Dt.closed;yt+=xt?1:2)Dt.next(dt[yt]);return this._checkFinalizedStatuses(Dt),ze}_trimBuffer(){const{_bufferSize:Dt,_timestampProvider:ze,_buffer:xt,_infiniteTimeWindow:De}=this,dt=(De?1:2)*Dt;if(Dt<1/0&&dt<xt.length&&xt.splice(0,xt.length-dt),!De){const yt=ze.now();let ut=0;for(let Yt=1;Yt<xt.length&&xt[Yt]<=yt;Yt+=2)ut=Yt;ut&&xt.splice(0,ut+1)}}}var _t=V(1760),Ze=V(5448);function me(st,Dt,...ze){if(!0===Dt)return void st();if(!1===Dt)return;const xt=new _t.ot({next:()=>{xt.unsubscribe(),st()}});return(0,ue.Uv)(Dt(...ze)).subscribe(xt)}function Ot(st,Dt,ze){let xt,De=!1;return st&&"object"==typeof st?({bufferSize:xt=1/0,windowTime:Dt=1/0,refCount:De=!1,scheduler:ze}=st):xt=st??1/0,function rt(st={}){const{connector:Dt=(()=>new Ee.E),resetOnError:ze=!0,resetOnComplete:xt=!0,resetOnRefCountZero:De=!0}=st;return dt=>{let yt,ut,Yt,Wn=0,Rr=!1,Ht=!1;const wr=()=>{ut?.unsubscribe(),ut=void 0},$t=()=>{wr(),yt=Yt=void 0,Rr=Ht=!1},zr=()=>{const kn=yt;$t(),kn?.unsubscribe()};return(0,Ze.i)((kn,Zr)=>{Wn++,!Ht&&!Rr&&wr();const yr=Yt=Yt??Dt();Zr.add(()=>{Wn--,0===Wn&&!Ht&&!Rr&&(ut=me(zr,De))}),yr.subscribe(Zr),!yt&&Wn>0&&(yt=new _t.ot({next:vi=>yr.next(vi),error:vi=>{Ht=!0,wr(),ut=me($t,ze,vi),yr.error(vi)},complete:()=>{Rr=!0,wr(),ut=me($t,xt),yr.complete()}}),(0,ue.Uv)(kn).subscribe(yt))})(dt)}}({connector:()=>new ht(xt,Dt,ze),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:De})}var At=V(5084),Me=V(8880);function Ct(st,Dt){return(0,Me.m)(Dt)?(0,Ve.G)(()=>st,Dt):(0,Ve.G)(()=>st)}var bt=V(2924),Ut=V(6684),ke=V(9252);const ct=new I.UbH("angularfire2.auth.use-emulator"),Nt=new I.UbH("angularfire2.auth.settings"),Kt=new I.UbH("angularfire2.auth.tenant-id"),sn=new I.UbH("angularfire2.auth.langugage-code"),Re=new I.UbH("angularfire2.auth.use-device-language"),He=new I.UbH("angularfire.auth.persistence"),tt=(st,Dt,ze,xt,De,dt,yt,ut)=>(0,ge.PQ)(`${st.name}.auth`,"AngularFireAuth",st.name,()=>{const Yt=Dt.runOutsideAngular(()=>st.auth());if(ze&&Yt.useEmulator(...ze),xt&&(Yt.tenantId=xt),Yt.languageCode=De,dt&&Yt.useDeviceLanguage(),yt)for(const[Wn,Rr]of Object.entries(yt))Yt.settings[Wn]=Rr;return ut&&Yt.setPersistence(ut),Yt},[ze,xt,De,dt,yt,ut]);let Ue=(()=>{class st{authState;idToken;user;idTokenResult;credential;constructor(ze,xt,De,dt,yt,ut,Yt,Wn,Rr,Ht,wr,$t){const zr=new Ee.E,kn=(0,Ie.of)(void 0).pipe((0,We.y)(yt.outsideAngular),(0,Ve.G)(()=>dt.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,6858)))),(0,Xe.k)(()=>(0,ge._G)(ze,dt,xt)),(0,Xe.k)(Zr=>tt(Zr,dt,ut,Wn,Rr,Ht,Yt,wr)),Ot({bufferSize:1,refCount:!1}));if((0,J.uf)(De))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ie.of)(null);else{kn.pipe((0,At.K)()).subscribe();const Zr=kn.pipe((0,Ve.G)(rr=>rr.getRedirectResult().then(In=>In,()=>null)),O.wH,Ot({bufferSize:1,refCount:!1})),yr=kn.pipe((0,Ve.G)(rr=>new Be._(In=>({unsubscribe:dt.runOutsideAngular(()=>rr.onAuthStateChanged(yn=>In.next(yn),yn=>In.error(yn),()=>In.complete()))})))),vi=kn.pipe((0,Ve.G)(rr=>new Be._(In=>({unsubscribe:dt.runOutsideAngular(()=>rr.onIdTokenChanged(yn=>In.next(yn),yn=>In.error(yn),()=>In.complete()))}))));this.authState=Zr.pipe(Ct(yr),(0,bt.y)(yt.outsideAngular),(0,We.y)(yt.insideAngular)),this.user=Zr.pipe(Ct(vi),(0,bt.y)(yt.outsideAngular),(0,We.y)(yt.insideAngular)),this.idToken=this.user.pipe((0,Ve.G)(rr=>rr?(0,je.Q)(rr.getIdToken()):(0,Ie.of)(null))),this.idTokenResult=this.user.pipe((0,Ve.G)(rr=>rr?(0,je.Q)(rr.getIdTokenResult()):(0,Ie.of)(null))),this.credential=function Le(...st){const Dt=(0,Se.e_)(st),ze=(0,Se._8)(st,1/0),xt=st;return xt.length?1===xt.length?(0,ue.Uv)(xt[0]):(0,le.u)(ze)((0,je.Q)(xt,Dt)):Oe.k}(Zr,zr,this.authState.pipe((0,Ut.I)(rr=>!rr))).pipe((0,Xe.k)(rr=>rr?.user?rr:null),(0,bt.y)(yt.outsideAngular),(0,We.y)(yt.insideAngular))}return(0,ge._w)(this,kn,dt,{spy:{apply:(Zr,yr,vi)=>{(Zr.startsWith("signIn")||Zr.startsWith("createUser"))&&vi.then(rr=>zr.next(rr))}}})}static \u0275fac=function(xt){return new(xt||st)(I.CoB(ge.E9),I.CoB(ge.Ml,8),I.CoB(I.AHE),I.CoB(I.WW2),I.CoB(O.u),I.CoB(ct,8),I.CoB(Nt,8),I.CoB(Kt,8),I.CoB(sn,8),I.CoB(Re,8),I.CoB(He,8),I.CoB(O.gJ,8))};static \u0275prov=I.wxM({token:st,factory:st.\u0275fac,providedIn:"any"})}return st})(),at=(()=>{class st{constructor(){ke.c.registerVersion("angularfire",O.j1.full,"auth-compat")}static \u0275fac=function(xt){return new(xt||st)};static \u0275mod=I.a4G({type:st});static \u0275inj=I.s3X({providers:[Ue]})}return st})()},6e3:(Xt,$e,V)=>{V.d($e,{E9:()=>Be,Ml:()=>je,PQ:()=>Le,UN:()=>Se,_G:()=>le,_w:()=>ge,rh:()=>Ee});var _=V(4496),J=V(6176),I=V(9252);const O=["ngOnDestroy"],ge=(Ce,ht,_t,Ze={})=>new Proxy(Ce,{get:(rt,me)=>_t.runOutsideAngular(()=>{if(Ce[me])return Ze?.spy?.get&&Ze.spy.get(me,Ce[me]),Ce[me];if(O.indexOf(me)>-1)return()=>{};const Ot=ht.toPromise().then(At=>{const Me=At?.[me];return"function"==typeof Me?Me.bind(At):Me?.then?Me.then(Ct=>_t.run(()=>Ct)):_t.run(()=>Me)});return new Proxy(()=>{},{get:(At,Me)=>Ot[Me],apply:(At,Me,Ct)=>Ot.then(bt=>{const Ut=bt?.(...Ct);return Ze?.spy?.apply&&Ze.spy.apply(me,Ct,Ut),Ut})})})}),Ee=(Ce,ht)=>{ht.forEach(_t=>{Object.getOwnPropertyNames(_t.prototype||_t).forEach(Ze=>{Object.defineProperty(Ce.prototype,Ze,Object.getOwnPropertyDescriptor(_t.prototype||_t,Ze))})})};class Ie{constructor(ht){return ht}}const Be=new _.UbH("angularfire2.app.options"),je=new _.UbH("angularfire2.app.name");function le(Ce,ht,_t){const rt="object"==typeof _t&&_t||{};rt.name=rt.name||"string"==typeof _t&&_t||"[DEFAULT]";const Ot=I.c.apps.filter(At=>At&&At.name===rt.name)[0]||ht.runOutsideAngular(()=>I.c.initializeApp(Ce,rt));try{if(JSON.stringify(Ce)!==JSON.stringify(Ot.options)){const At=!!module.hot;ue("error",`${Ot.name} Firebase App already initialized with different options${At?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ie(Ot)}const ue=(Ce,...ht)=>{(0,_.sPQ)()&&typeof console<"u"&&console[Ce](...ht)},Oe={provide:Ie,useFactory:le,deps:[Be,_.WW2,[new _.T7N,je]]};let Se=(()=>{class Ce{static initializeApp(_t,Ze){return{ngModule:Ce,providers:[{provide:Be,useValue:_t},{provide:je,useValue:Ze}]}}constructor(_t){I.c.registerVersion("angularfire",J.j1.full,"core"),I.c.registerVersion("angularfire",J.j1.full,"app-compat"),I.c.registerVersion("angular",_.j1C.full,_t.toString())}static \u0275fac=function(Ze){return new(Ze||Ce)(_.CoB(_.AHE))};static \u0275mod=_.a4G({type:Ce});static \u0275inj=_.s3X({providers:[Oe]})}return Ce})();function Le(Ce,ht,_t,Ze,rt){const[,me,Ot]=globalThis.\u0275AngularfireInstanceCache.find(At=>At[0]===Ce)||[];if(me)return function We(Ce,ht){try{return Ce.toString()===ht.toString()}catch{return Ce===ht}}(rt,Ot)||(Xe("error",`${ht} was already initialized on the ${_t} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),Xe("warn",{is:rt,was:Ot})),me;{const At=Ze();return globalThis.\u0275AngularfireInstanceCache.push([Ce,At,rt]),At}}const Ve=typeof module<"u"&&!!module.hot,Xe=(Ce,...ht)=>{(0,_.sPQ)()&&typeof console<"u"&&console[Ce](...ht)};globalThis.\u0275AngularfireInstanceCache||=[]},6176:(Xt,$e,V)=>{V.d($e,{j1:()=>Le,wH:()=>Ut,u:()=>me,gJ:()=>Ce,S_:()=>Xe,UN:()=>Ve,qo:()=>ct});var _=V(4496),J=V(3680),I=V(1364),ge=V(9816);const Ie=new class Ee extends ge.k{}(class O extends I.m{constructor(Kt,sn){super(Kt,sn),this.scheduler=Kt,this.work=sn}schedule(Kt,sn=0){return sn>0?super.schedule(Kt,sn):(this.delay=sn,this.state=Kt,this.scheduler.flush(this),this)}execute(Kt,sn){return sn>0||this.closed?super.execute(Kt,sn):this._execute(Kt,sn)}requestAsyncId(Kt,sn,Re=0){return null!=Re&&Re>0||null==Re&&this.delay>0?super.requestAsyncId(Kt,sn,Re):(Kt.flush(this),0)}});var je=V(112),le=V(3252),ue=V(9212),Oe=V(2924),Se=V(3920);const Le=new _.a8Z("ANGULARFIRE2_VERSION");function Ve(Nt,Kt,sn){if(Kt){if(1===Kt.length)return Kt[0];const tt=Kt.filter(Ue=>Ue.app===sn);if(1===tt.length)return tt[0]}return sn.container.getProvider(Nt).getImmediate({optional:!0})}const Xe=(Nt,Kt)=>{const sn=Kt?[Kt]:(0,J.UH)(),Re=[];return sn.forEach(He=>{He.container.getProvider(Nt).instances.forEach(Ue=>{Re.includes(Ue)||Re.push(Ue)})}),Re};class Ce{constructor(){return Xe(ht)}}const ht="app-check";function _t(){}class Ze{zone;delegate;constructor(Kt,sn=Ie){this.zone=Kt,this.delegate=sn}now(){return this.delegate.now()}schedule(Kt,sn,Re){const He=this.zone;return this.delegate.schedule(function(Ue){He.runGuarded(()=>{Kt.apply(this,[Ue])})},sn,Re)}}class rt{zone;task=null;constructor(Kt){this.zone=Kt}call(Kt,sn){const Re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_t,{},_t,_t)),sn.pipe((0,ue.y)({next:Re,complete:Re,error:Re})).subscribe(Kt).add(Re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let me=(()=>{class Nt{ngZone;outsideAngular;insideAngular;constructor(sn){this.ngZone=sn,this.outsideAngular=sn.runOutsideAngular(()=>new Ze(Zone.current)),this.insideAngular=sn.run(()=>new Ze(Zone.current,je.M)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Re){return new(Re||Nt)(_.CoB(_.WW2))};static \u0275prov=_.wxM({token:Nt,factory:Nt.\u0275fac,providedIn:"root"})}return Nt})();function Ot(){const Nt=globalThis.\u0275AngularFireScheduler;if(!Nt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Nt}function Me(Nt){return Ot().ngZone.run(()=>Nt())}function Ut(Nt){return function ke(Nt){return function(sn){return(sn=sn.lift(new rt(Nt.ngZone))).pipe((0,Oe.y)(Nt.outsideAngular),(0,Se.y)(Nt.insideAngular))}}(Ot())(Nt)}const Rt=(Nt,Kt)=>function(){const Re=arguments;return Kt&&setTimeout(()=>{"scheduled"===Kt.state&&Kt.invoke()},10),Me(()=>Nt.apply(void 0,Re))},ct=(Nt,Kt)=>function(){let sn;const Re=arguments;for(let tt=0;tt<arguments.length;tt++)"function"==typeof Re[tt]&&(Kt&&(sn||=Me(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_t,{},_t,_t))),Re[tt]=Rt(Re[tt],sn));const He=function At(Nt){return Ot().ngZone.runOutsideAngular(()=>Nt())}(()=>Nt.apply(this,Re));if(!Kt){if(He instanceof le._){const tt=Ot();return He.pipe((0,Oe.y)(tt.outsideAngular),(0,Se.y)(tt.insideAngular))}return Me(()=>He)}return He instanceof le._?He.pipe(Ut):He instanceof Promise?Me(()=>new Promise((tt,Ue)=>He.then(at=>Me(()=>tt(at)),at=>Me(()=>Ue(at))))):"function"==typeof He&&sn?function(){return setTimeout(()=>{sn&&"scheduled"===sn.state&&sn.invoke()},10),He.apply(this,arguments)}:Me(()=>He)}},6504:(Xt,$e,V)=>{V.d($e,{AQ:()=>_t,GC:()=>Gi,GO:()=>bs,IT:()=>oi,Wo:()=>Ni,_G:()=>Ai,im:()=>fo,ot:()=>Le,sl:()=>Ys,sz:()=>$o,u:()=>$t,uW:()=>bo,ue:()=>wr,wd:()=>An,y:()=>Ra});var _=V(4496),J=V(1368),I=V(9900),O=V(9336),ge=V(4704);let Ee=(()=>{class G{constructor(F,te){this._renderer=F,this._elementRef=te,this.onChange=ve=>{},this.onTouched=()=>{}}setProperty(F,te){this._renderer.setProperty(this._elementRef.nativeElement,F,te)}registerOnTouched(F){this.onTouched=F}registerOnChange(F){this.onChange=F}setDisabledState(F){this.setProperty("disabled",F)}static#e=this.\u0275fac=function(te){return new(te||G)(_.GI1(_.q87),_.GI1(_.GMv))};static#t=this.\u0275dir=_.Sc5({type:G})}return G})(),Ie=(()=>{class G extends Ee{static#e=this.\u0275fac=(()=>{let F;return function(ve){return(F||(F=_.otF(G)))(ve||G)}})();static#t=this.\u0275dir=_.Sc5({type:G,features:[_.eg9]})}return G})();const Be=new _.UbH(""),ue={provide:Be,useExisting:(0,_.wd)(()=>Le),multi:!0},Se=new _.UbH("");let Le=(()=>{class G extends Ee{constructor(F,te,ve){super(F,te),this._compositionMode=ve,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Oe(){const G=(0,J.uy)()?(0,J.uy)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(F){this.setProperty("value",F??"")}_handleInput(F){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(F)}_compositionStart(){this._composing=!0}_compositionEnd(F){this._composing=!1,this._compositionMode&&this.onChange(F)}static#e=this.\u0275fac=function(te){return new(te||G)(_.GI1(_.q87),_.GI1(_.GMv),_.GI1(Se,8))};static#t=this.\u0275dir=_.Sc5({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(te,ve){1&te&&_.qCj("input",function(Qn){return ve._handleInput(Qn.target.value)})("blur",function(){return ve.onTouched()})("compositionstart",function(){return ve._compositionStart()})("compositionend",function(Qn){return ve._compositionEnd(Qn.target.value)})},features:[_.M5G([ue]),_.eg9]})}return G})();function We(G){return null==G||("string"==typeof G||Array.isArray(G))&&0===G.length}function Ve(G){return null!=G&&"number"==typeof G.length}const Xe=new _.UbH(""),Ce=new _.UbH(""),ht=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class _t{static min(z){return function Ze(G){return z=>{if(We(z.value)||We(G))return null;const F=parseFloat(z.value);return!isNaN(F)&&F<G?{min:{min:G,actual:z.value}}:null}}(z)}static max(z){return function rt(G){return z=>{if(We(z.value)||We(G))return null;const F=parseFloat(z.value);return!isNaN(F)&&F>G?{max:{max:G,actual:z.value}}:null}}(z)}static required(z){return function me(G){return We(G.value)?{required:!0}:null}(z)}static requiredTrue(z){return function Ot(G){return!0===G.value?null:{required:!0}}(z)}static email(z){return function At(G){return We(G.value)||ht.test(G.value)?null:{email:!0}}(z)}static minLength(z){return function Me(G){return z=>We(z.value)||!Ve(z.value)?null:z.value.length<G?{minlength:{requiredLength:G,actualLength:z.value.length}}:null}(z)}static maxLength(z){return function Ct(G){return z=>Ve(z.value)&&z.value.length>G?{maxlength:{requiredLength:G,actualLength:z.value.length}}:null}(z)}static pattern(z){return function bt(G){if(!G)return Ut;let z,F;return"string"==typeof G?(F="","^"!==G.charAt(0)&&(F+="^"),F+=G,"$"!==G.charAt(G.length-1)&&(F+="$"),z=new RegExp(F)):(F=G.toString(),z=G),te=>{if(We(te.value))return null;const ve=te.value;return z.test(ve)?null:{pattern:{requiredPattern:F,actualValue:ve}}}}(z)}static nullValidator(z){return null}static compose(z){return Re(z)}static composeAsync(z){return tt(z)}}function Ut(G){return null}function ke(G){return null!=G}function Rt(G){return(0,_.w5$)(G)?(0,I.Q)(G):G}function ct(G){let z={};return G.forEach(F=>{z=null!=F?{...z,...F}:z}),0===Object.keys(z).length?null:z}function Nt(G,z){return z.map(F=>F(G))}function sn(G){return G.map(z=>function Kt(G){return!G.validate}(z)?z:F=>z.validate(F))}function Re(G){if(!G)return null;const z=G.filter(ke);return 0==z.length?null:function(F){return ct(Nt(F,z))}}function He(G){return null!=G?Re(sn(G)):null}function tt(G){if(!G)return null;const z=G.filter(ke);return 0==z.length?null:function(F){const te=Nt(F,z).map(Rt);return(0,O.y)(te).pipe((0,ge.k)(ct))}}function Ue(G){return null!=G?tt(sn(G)):null}function at(G,z){return null===G?[z]:Array.isArray(G)?[...G,z]:[G,z]}function st(G){return G._rawValidators}function Dt(G){return G._rawAsyncValidators}function ze(G){return G?Array.isArray(G)?G:[G]:[]}function xt(G,z){return Array.isArray(G)?G.includes(z):G===z}function De(G,z){const F=ze(z);return ze(G).forEach(ve=>{xt(F,ve)||F.push(ve)}),F}function dt(G,z){return ze(z).filter(F=>!xt(G,F))}class yt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(z){this._rawValidators=z||[],this._composedValidatorFn=He(this._rawValidators)}_setAsyncValidators(z){this._rawAsyncValidators=z||[],this._composedAsyncValidatorFn=Ue(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(z){this._onDestroyCallbacks.push(z)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(z=>z()),this._onDestroyCallbacks=[]}reset(z=void 0){this.control&&this.control.reset(z)}hasError(z,F){return!!this.control&&this.control.hasError(z,F)}getError(z,F){return this.control?this.control.getError(z,F):null}}class ut extends yt{get formDirective(){return null}get path(){return null}}class Yt extends yt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Wn{constructor(z){this._cd=z}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let wr=(()=>{class G extends Wn{constructor(F){super(F)}static#e=this.\u0275fac=function(te){return new(te||G)(_.GI1(Yt,2))};static#t=this.\u0275dir=_.Sc5({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(te,ve){2&te&&_.eAK("ng-untouched",ve.isUntouched)("ng-touched",ve.isTouched)("ng-pristine",ve.isPristine)("ng-dirty",ve.isDirty)("ng-valid",ve.isValid)("ng-invalid",ve.isInvalid)("ng-pending",ve.isPending)},features:[_.eg9]})}return G})(),$t=(()=>{class G extends Wn{constructor(F){super(F)}static#e=this.\u0275fac=function(te){return new(te||G)(_.GI1(ut,10))};static#t=this.\u0275dir=_.Sc5({type:G,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(te,ve){2&te&&_.eAK("ng-untouched",ve.isUntouched)("ng-touched",ve.isTouched)("ng-pristine",ve.isPristine)("ng-dirty",ve.isDirty)("ng-valid",ve.isValid)("ng-invalid",ve.isInvalid)("ng-pending",ve.isPending)("ng-submitted",ve.isSubmitted)},features:[_.eg9]})}return G})();const Mr="VALID",Gn="INVALID",wi="PENDING",jr="DISABLED";function Nr(G){return(Ge(G)?G.validators:G)||null}function pi(G,z){return(Ge(z)?z.asyncValidators:G)||null}function Ge(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}function he(G,z,F){const te=G.controls;if(!(z?Object.keys(te):te).length)throw new _.OBp(1e3,"");if(!te[F])throw new _.OBp(1001,"")}function Fe(G,z,F){G._forEachChild((te,ve)=>{if(void 0===F[ve])throw new _.OBp(1002,"")})}class re{constructor(z,F){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(z),this._assignAsyncValidators(F)}get validator(){return this._composedValidatorFn}set validator(z){this._rawValidators=this._composedValidatorFn=z}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(z){this._rawAsyncValidators=this._composedAsyncValidatorFn=z}get parent(){return this._parent}get valid(){return this.status===Mr}get invalid(){return this.status===Gn}get pending(){return this.status==wi}get disabled(){return this.status===jr}get enabled(){return this.status!==jr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(z){this._assignValidators(z)}setAsyncValidators(z){this._assignAsyncValidators(z)}addValidators(z){this.setValidators(De(z,this._rawValidators))}addAsyncValidators(z){this.setAsyncValidators(De(z,this._rawAsyncValidators))}removeValidators(z){this.setValidators(dt(z,this._rawValidators))}removeAsyncValidators(z){this.setAsyncValidators(dt(z,this._rawAsyncValidators))}hasValidator(z){return xt(this._rawValidators,z)}hasAsyncValidator(z){return xt(this._rawAsyncValidators,z)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(z={}){this.touched=!0,this._parent&&!z.onlySelf&&this._parent.markAsTouched(z)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(z=>z.markAllAsTouched())}markAsUntouched(z={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(F=>{F.markAsUntouched({onlySelf:!0})}),this._parent&&!z.onlySelf&&this._parent._updateTouched(z)}markAsDirty(z={}){this.pristine=!1,this._parent&&!z.onlySelf&&this._parent.markAsDirty(z)}markAsPristine(z={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(F=>{F.markAsPristine({onlySelf:!0})}),this._parent&&!z.onlySelf&&this._parent._updatePristine(z)}markAsPending(z={}){this.status=wi,!1!==z.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!z.onlySelf&&this._parent.markAsPending(z)}disable(z={}){const F=this._parentMarkedDirty(z.onlySelf);this.status=jr,this.errors=null,this._forEachChild(te=>{te.disable({...z,onlySelf:!0})}),this._updateValue(),!1!==z.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...z,skipPristineCheck:F}),this._onDisabledChange.forEach(te=>te(!0))}enable(z={}){const F=this._parentMarkedDirty(z.onlySelf);this.status=Mr,this._forEachChild(te=>{te.enable({...z,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:z.emitEvent}),this._updateAncestors({...z,skipPristineCheck:F}),this._onDisabledChange.forEach(te=>te(!1))}_updateAncestors(z){this._parent&&!z.onlySelf&&(this._parent.updateValueAndValidity(z),z.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(z){this._parent=z}getRawValue(){return this.value}updateValueAndValidity(z={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mr||this.status===wi)&&this._runAsyncValidator(z.emitEvent)),!1!==z.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!z.onlySelf&&this._parent.updateValueAndValidity(z)}_updateTreeValidity(z={emitEvent:!0}){this._forEachChild(F=>F._updateTreeValidity(z)),this.updateValueAndValidity({onlySelf:!0,emitEvent:z.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jr:Mr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(z){if(this.asyncValidator){this.status=wi,this._hasOwnPendingAsyncValidator=!0;const F=Rt(this.asyncValidator(this));this._asyncValidationSubscription=F.subscribe(te=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(te,{emitEvent:z})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(z,F={}){this.errors=z,this._updateControlsErrors(!1!==F.emitEvent)}get(z){let F=z;return null==F||(Array.isArray(F)||(F=F.split(".")),0===F.length)?null:F.reduce((te,ve)=>te&&te._find(ve),this)}getError(z,F){const te=F?this.get(F):this;return te&&te.errors?te.errors[z]:null}hasError(z,F){return!!this.getError(z,F)}get root(){let z=this;for(;z._parent;)z=z._parent;return z}_updateControlsErrors(z){this.status=this._calculateStatus(),z&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(z)}_initObservables(){this.valueChanges=new _._w7,this.statusChanges=new _._w7}_calculateStatus(){return this._allControlsDisabled()?jr:this.errors?Gn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wi)?wi:this._anyControlsHaveStatus(Gn)?Gn:Mr}_anyControlsHaveStatus(z){return this._anyControls(F=>F.status===z)}_anyControlsDirty(){return this._anyControls(z=>z.dirty)}_anyControlsTouched(){return this._anyControls(z=>z.touched)}_updatePristine(z={}){this.pristine=!this._anyControlsDirty(),this._parent&&!z.onlySelf&&this._parent._updatePristine(z)}_updateTouched(z={}){this.touched=this._anyControlsTouched(),this._parent&&!z.onlySelf&&this._parent._updateTouched(z)}_registerOnCollectionChange(z){this._onCollectionChange=z}_setUpdateStrategy(z){Ge(z)&&null!=z.updateOn&&(this._updateOn=z.updateOn)}_parentMarkedDirty(z){return!z&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(z){return null}_assignValidators(z){this._rawValidators=Array.isArray(z)?z.slice():z,this._composedValidatorFn=function Ds(G){return Array.isArray(G)?He(G):G||null}(this._rawValidators)}_assignAsyncValidators(z){this._rawAsyncValidators=Array.isArray(z)?z.slice():z,this._composedAsyncValidatorFn=function gt(G){return Array.isArray(G)?Ue(G):G||null}(this._rawAsyncValidators)}}class ae extends re{constructor(z,F,te){super(Nr(F),pi(te,F)),this.controls=z,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(z,F){return this.controls[z]?this.controls[z]:(this.controls[z]=F,F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange),F)}addControl(z,F,te={}){this.registerControl(z,F),this.updateValueAndValidity({emitEvent:te.emitEvent}),this._onCollectionChange()}removeControl(z,F={}){this.controls[z]&&this.controls[z]._registerOnCollectionChange(()=>{}),delete this.controls[z],this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}setControl(z,F,te={}){this.controls[z]&&this.controls[z]._registerOnCollectionChange(()=>{}),delete this.controls[z],F&&this.registerControl(z,F),this.updateValueAndValidity({emitEvent:te.emitEvent}),this._onCollectionChange()}contains(z){return this.controls.hasOwnProperty(z)&&this.controls[z].enabled}setValue(z,F={}){Fe(this,0,z),Object.keys(z).forEach(te=>{he(this,!0,te),this.controls[te].setValue(z[te],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(z,F={}){null!=z&&(Object.keys(z).forEach(te=>{const ve=this.controls[te];ve&&ve.patchValue(z[te],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(z={},F={}){this._forEachChild((te,ve)=>{te.reset(z?z[ve]:null,{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this._reduceChildren({},(z,F,te)=>(z[te]=F.getRawValue(),z))}_syncPendingControls(){let z=this._reduceChildren(!1,(F,te)=>!!te._syncPendingControls()||F);return z&&this.updateValueAndValidity({onlySelf:!0}),z}_forEachChild(z){Object.keys(this.controls).forEach(F=>{const te=this.controls[F];te&&z(te,F)})}_setUpControls(){this._forEachChild(z=>{z.setParent(this),z._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(z){for(const[F,te]of Object.entries(this.controls))if(this.contains(F)&&z(te))return!0;return!1}_reduceValue(){return this._reduceChildren({},(F,te,ve)=>((te.enabled||this.disabled)&&(F[ve]=te.value),F))}_reduceChildren(z,F){let te=z;return this._forEachChild((ve,un)=>{te=F(te,ve,un)}),te}_allControlsDisabled(){for(const z of Object.keys(this.controls))if(this.controls[z].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(z){return this.controls.hasOwnProperty(z)?this.controls[z]:null}}class Ne extends ae{}const Qt=new _.UbH("CallSetDisabledState",{providedIn:"root",factory:()=>En}),En="always";function Cn(G,z){return[...z.path,G]}function On(G,z,F=En){Ln(G,z),z.valueAccessor.writeValue(G.value),(G.disabled||"always"===F)&&z.valueAccessor.setDisabledState?.(G.disabled),function qe(G,z){z.valueAccessor.registerOnChange(F=>{G._pendingValue=F,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&Tt(G,z)})}(G,z),function rn(G,z){const F=(te,ve)=>{z.valueAccessor.writeValue(te),ve&&z.viewToModelUpdate(te)};G.registerOnChange(F),z._registerOnDestroy(()=>{G._unregisterOnChange(F)})}(G,z),function Qe(G,z){z.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&Tt(G,z),"submit"!==G.updateOn&&G.markAsTouched()})}(G,z),function fn(G,z){if(z.valueAccessor.setDisabledState){const F=te=>{z.valueAccessor.setDisabledState(te)};G.registerOnDisabledChange(F),z._registerOnDestroy(()=>{G._unregisterOnDisabledChange(F)})}}(G,z)}function en(G,z,F=!0){const te=()=>{};z.valueAccessor&&(z.valueAccessor.registerOnChange(te),z.valueAccessor.registerOnTouched(te)),Pe(G,z),G&&(z._invokeOnDestroyCallbacks(),G._registerOnCollectionChange(()=>{}))}function Dr(G,z){G.forEach(F=>{F.registerOnValidatorChange&&F.registerOnValidatorChange(z)})}function Ln(G,z){const F=st(G);null!==z.validator?G.setValidators(at(F,z.validator)):"function"==typeof F&&G.setValidators([F]);const te=Dt(G);null!==z.asyncValidator?G.setAsyncValidators(at(te,z.asyncValidator)):"function"==typeof te&&G.setAsyncValidators([te]);const ve=()=>G.updateValueAndValidity();Dr(z._rawValidators,ve),Dr(z._rawAsyncValidators,ve)}function Pe(G,z){let F=!1;if(null!==G){if(null!==z.validator){const ve=st(G);if(Array.isArray(ve)&&ve.length>0){const un=ve.filter(Qn=>Qn!==z.validator);un.length!==ve.length&&(F=!0,G.setValidators(un))}}if(null!==z.asyncValidator){const ve=Dt(G);if(Array.isArray(ve)&&ve.length>0){const un=ve.filter(Qn=>Qn!==z.asyncValidator);un.length!==ve.length&&(F=!0,G.setAsyncValidators(un))}}}const te=()=>{};return Dr(z._rawValidators,te),Dr(z._rawAsyncValidators,te),F}function Tt(G,z){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),z.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function ye(G,z){if(!G.hasOwnProperty("model"))return!1;const F=G.model;return!!F.isFirstChange()||!Object.is(z,F.currentValue)}function Vt(G,z){if(!z)return null;let F,te,ve;return Array.isArray(z),z.forEach(un=>{un.constructor===Le?F=un:function ft(G){return Object.getPrototypeOf(G.constructor)===Ie}(un)?te=un:ve=un}),ve||te||F||null}function sr(G,z){const F=G.indexOf(z);F>-1&&G.splice(F,1)}function Vn(G){return"object"==typeof G&&null!==G&&2===Object.keys(G).length&&"value"in G&&"disabled"in G}Promise.resolve();const ns=class extends re{constructor(z=null,F,te){super(Nr(F),pi(te,F)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(z),this._setUpdateStrategy(F),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ge(F)&&(F.nonNullable||F.initialValueIsDefault)&&(this.defaultValue=Vn(z)?z.value:z)}setValue(z,F={}){this.value=this._pendingValue=z,this._onChange.length&&!1!==F.emitModelToViewChange&&this._onChange.forEach(te=>te(this.value,!1!==F.emitViewToModelChange)),this.updateValueAndValidity(F)}patchValue(z,F={}){this.setValue(z,F)}reset(z=this.defaultValue,F={}){this._applyFormState(z),this.markAsPristine(F),this.markAsUntouched(F),this.setValue(this.value,F),this._pendingChange=!1}_updateValue(){}_anyControls(z){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(z){this._onChange.push(z)}_unregisterOnChange(z){sr(this._onChange,z)}registerOnDisabledChange(z){this._onDisabledChange.push(z)}_unregisterOnDisabledChange(z){sr(this._onDisabledChange,z)}_forEachChild(z){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(z){Vn(z)?(this.value=this._pendingValue=z.value,z.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=z}},Yr={provide:Yt,useExisting:(0,_.wd)(()=>Ai)},As=Promise.resolve();let Ai=(()=>{class G extends Yt{constructor(F,te,ve,un,Qn,vs){super(),this._changeDetectorRef=Qn,this.callSetDisabledState=vs,this.control=new ns,this._registered=!1,this.name="",this.update=new _._w7,this._parent=F,this._setValidators(te),this._setAsyncValidators(ve),this.valueAccessor=Vt(0,un)}ngOnChanges(F){if(this._checkForErrors(),!this._registered||"name"in F){if(this._registered&&(this._checkName(),this.formDirective)){const te=F.name.previousValue;this.formDirective.removeControl({name:te,path:this._getPath(te)})}this._setUpControl()}"isDisabled"in F&&this._updateDisabled(F),ye(F,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){On(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(F){As.then(()=>{this.control.setValue(F,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(F){const te=F.isDisabled.currentValue,ve=0!==te&&(0,_.cZD)(te);As.then(()=>{ve&&!this.control.disabled?this.control.disable():!ve&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(F){return this._parent?Cn(F,this._parent):[F]}static#e=this.\u0275fac=function(te){return new(te||G)(_.GI1(ut,9),_.GI1(Xe,10),_.GI1(Ce,10),_.GI1(Be,10),_.GI1(_.kD9,8),_.GI1(Qt,8))};static#t=this.\u0275dir=_.Sc5({type:G,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[_.Wk5.None,"disabled","isDisabled"],model:[_.Wk5.None,"ngModel","model"],options:[_.Wk5.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_.M5G([Yr]),_.eg9,_.SYr]})}return G})(),$o=(()=>{class G{static#e=this.\u0275fac=function(te){return new(te||G)};static#t=this.\u0275dir=_.Sc5({type:G,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return G})();const Ss={provide:Be,useExisting:(0,_.wd)(()=>oi),multi:!0};let oi=(()=>{class G extends Ie{writeValue(F){this.setProperty("value",parseFloat(F))}registerOnChange(F){this.onChange=te=>{F(""==te?null:parseFloat(te))}}static#e=this.\u0275fac=(()=>{let F;return function(ve){return(F||(F=_.otF(G)))(ve||G)}})();static#t=this.\u0275dir=_.Sc5({type:G,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(te,ve){1&te&&_.qCj("change",function(Qn){return ve.onChange(Qn.target.value)})("input",function(Qn){return ve.onChange(Qn.target.value)})("blur",function(){return ve.onTouched()})},features:[_.M5G([Ss]),_.eg9]})}return G})();const ra=new _.UbH(""),zs={provide:ut,useExisting:(0,_.wd)(()=>bo)};let bo=(()=>{class G extends ut{constructor(F,te,ve){super(),this.callSetDisabledState=ve,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _._w7,this._setValidators(F),this._setAsyncValidators(te)}ngOnChanges(F){this._checkFormPresent(),F.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Pe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(F){const te=this.form.get(F.path);return On(te,F,this.callSetDisabledState),te.updateValueAndValidity({emitEvent:!1}),this.directives.push(F),te}getControl(F){return this.form.get(F.path)}removeControl(F){en(F.control||null,F,!1),function qt(G,z){const F=G.indexOf(z);F>-1&&G.splice(F,1)}(this.directives,F)}addFormGroup(F){this._setUpFormContainer(F)}removeFormGroup(F){this._cleanUpFormContainer(F)}getFormGroup(F){return this.form.get(F.path)}addFormArray(F){this._setUpFormContainer(F)}removeFormArray(F){this._cleanUpFormContainer(F)}getFormArray(F){return this.form.get(F.path)}updateModel(F,te){this.form.get(F.path).setValue(te)}onSubmit(F){return this.submitted=!0,function wt(G,z){G._syncPendingControls(),z.forEach(F=>{const te=F.control;"submit"===te.updateOn&&te._pendingChange&&(F.viewToModelUpdate(te._pendingValue),te._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(F),"dialog"===F?.target?.method}onReset(){this.resetForm()}resetForm(F=void 0){this.form.reset(F),this.submitted=!1}_updateDomValue(){this.directives.forEach(F=>{const te=F.control,ve=this.form.get(F.path);te!==ve&&(en(te||null,F),(G=>G instanceof ns)(ve)&&(On(ve,F,this.callSetDisabledState),F.control=ve))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(F){const te=this.form.get(F.path);(function Bn(G,z){Ln(G,z)})(te,F),te.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(F){if(this.form){const te=this.form.get(F.path);te&&function Hn(G,z){return Pe(G,z)}(te,F)&&te.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ln(this.form,this),this._oldForm&&Pe(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(te){return new(te||G)(_.GI1(Xe,10),_.GI1(Ce,10),_.GI1(Qt,8))};static#t=this.\u0275dir=_.Sc5({type:G,selectors:[["","formGroup",""]],hostBindings:function(te,ve){1&te&&_.qCj("submit",function(Qn){return ve.onSubmit(Qn)})("reset",function(){return ve.onReset()})},inputs:{form:[_.Wk5.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_.M5G([zs]),_.eg9,_.SYr]})}return G})();const xi={provide:Yt,useExisting:(0,_.wd)(()=>Ni)};let Ni=(()=>{class G extends Yt{set isDisabled(F){}static#e=this._ngModelWarningSentOnce=!1;constructor(F,te,ve,un,Qn){super(),this._ngModelWarningConfig=Qn,this._added=!1,this.name=null,this.update=new _._w7,this._ngModelWarningSent=!1,this._parent=F,this._setValidators(te),this._setAsyncValidators(ve),this.valueAccessor=Vt(0,un)}ngOnChanges(F){this._added||this._setUpControl(),ye(F,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}get path(){return Cn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(te){return new(te||G)(_.GI1(ut,13),_.GI1(Xe,10),_.GI1(Ce,10),_.GI1(Be,10),_.GI1(ra,8))};static#n=this.\u0275dir=_.Sc5({type:G,selectors:[["","formControlName",""]],inputs:{name:[_.Wk5.None,"formControlName","name"],isDisabled:[_.Wk5.None,"disabled","isDisabled"],model:[_.Wk5.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[_.M5G([xi]),_.eg9,_.SYr]})}return G})();const $i={provide:Be,useExisting:(0,_.wd)(()=>Gi),multi:!0};function or(G,z){return null==G?`${z}`:(z&&"object"==typeof z&&(z="Object"),`${G}: ${z}`.slice(0,50))}let Gi=(()=>{class G extends Ie{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(F){this._compareWith=F}writeValue(F){this.value=F;const ve=or(this._getOptionId(F),F);this.setProperty("value",ve)}registerOnChange(F){this.onChange=te=>{this.value=this._getOptionValue(te),F(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(F){for(const te of this._optionMap.keys())if(this._compareWith(this._optionMap.get(te),F))return te;return null}_getOptionValue(F){const te=function ki(G){return G.split(":")[0]}(F);return this._optionMap.has(te)?this._optionMap.get(te):F}static#e=this.\u0275fac=(()=>{let F;return function(ve){return(F||(F=_.otF(G)))(ve||G)}})();static#t=this.\u0275dir=_.Sc5({type:G,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(te,ve){1&te&&_.qCj("change",function(Qn){return ve.onChange(Qn.target.value)})("blur",function(){return ve.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.M5G([$i]),_.eg9]})}return G})(),An=(()=>{class G{constructor(F,te,ve){this._element=F,this._renderer=te,this._select=ve,this._select&&(this.id=this._select._registerOption())}set ngValue(F){null!=this._select&&(this._select._optionMap.set(this.id,F),this._setElementValue(or(this.id,F)),this._select.writeValue(this._select.value))}set value(F){this._setElementValue(F),this._select&&this._select.writeValue(this._select.value)}_setElementValue(F){this._renderer.setProperty(this._element.nativeElement,"value",F)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(te){return new(te||G)(_.GI1(_.GMv),_.GI1(_.q87),_.GI1(Gi,9))};static#t=this.\u0275dir=_.Sc5({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return G})();const Pi={provide:Be,useExisting:(0,_.wd)(()=>Ps),multi:!0};function ho(G,z){return null==G?`${z}`:("string"==typeof z&&(z=`'${z}'`),z&&"object"==typeof z&&(z="Object"),`${G}: ${z}`.slice(0,50))}let Ps=(()=>{class G extends Ie{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(F){this._compareWith=F}writeValue(F){let te;if(this.value=F,Array.isArray(F)){const ve=F.map(un=>this._getOptionId(un));te=(un,Qn)=>{un._setSelected(ve.indexOf(Qn.toString())>-1)}}else te=(ve,un)=>{ve._setSelected(!1)};this._optionMap.forEach(te)}registerOnChange(F){this.onChange=te=>{const ve=[],un=te.selectedOptions;if(void 0!==un){const Qn=un;for(let vs=0;vs<Qn.length;vs++){const Ns=this._getOptionValue(Qn[vs].value);ve.push(Ns)}}else{const Qn=te.options;for(let vs=0;vs<Qn.length;vs++){const os=Qn[vs];if(os.selected){const Ns=this._getOptionValue(os.value);ve.push(Ns)}}}this.value=ve,F(ve)}}_registerOption(F){const te=(this._idCounter++).toString();return this._optionMap.set(te,F),te}_getOptionId(F){for(const te of this._optionMap.keys())if(this._compareWith(this._optionMap.get(te)._value,F))return te;return null}_getOptionValue(F){const te=function qs(G){return G.split(":")[0]}(F);return this._optionMap.has(te)?this._optionMap.get(te)._value:F}static#e=this.\u0275fac=(()=>{let F;return function(ve){return(F||(F=_.otF(G)))(ve||G)}})();static#t=this.\u0275dir=_.Sc5({type:G,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(te,ve){1&te&&_.qCj("change",function(Qn){return ve.onChange(Qn.target)})("blur",function(){return ve.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.M5G([Pi]),_.eg9]})}return G})(),bs=(()=>{class G{constructor(F,te,ve){this._element=F,this._renderer=te,this._select=ve,this._select&&(this.id=this._select._registerOption(this))}set ngValue(F){null!=this._select&&(this._value=F,this._setElementValue(ho(this.id,F)),this._select.writeValue(this._select.value))}set value(F){this._select?(this._value=F,this._setElementValue(ho(this.id,F)),this._select.writeValue(this._select.value)):this._setElementValue(F)}_setElementValue(F){this._renderer.setProperty(this._element.nativeElement,"value",F)}_setSelected(F){this._renderer.setProperty(this._element.nativeElement,"selected",F)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(te){return new(te||G)(_.GI1(_.GMv),_.GI1(_.q87),_.GI1(Ps,9))};static#t=this.\u0275dir=_.Sc5({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return G})(),Wo=(()=>{class G{static#e=this.\u0275fac=function(te){return new(te||G)};static#t=this.\u0275mod=_.a4G({type:G});static#n=this.\u0275inj=_.s3X({})}return G})();class Ya extends re{constructor(z,F,te){super(Nr(F),pi(te,F)),this.controls=z,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(z){return this.controls[this._adjustIndex(z)]}push(z,F={}){this.controls.push(z),this._registerControl(z),this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}insert(z,F,te={}){this.controls.splice(z,0,F),this._registerControl(F),this.updateValueAndValidity({emitEvent:te.emitEvent})}removeAt(z,F={}){let te=this._adjustIndex(z);te<0&&(te=0),this.controls[te]&&this.controls[te]._registerOnCollectionChange(()=>{}),this.controls.splice(te,1),this.updateValueAndValidity({emitEvent:F.emitEvent})}setControl(z,F,te={}){let ve=this._adjustIndex(z);ve<0&&(ve=0),this.controls[ve]&&this.controls[ve]._registerOnCollectionChange(()=>{}),this.controls.splice(ve,1),F&&(this.controls.splice(ve,0,F),this._registerControl(F)),this.updateValueAndValidity({emitEvent:te.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(z,F={}){Fe(this,0,z),z.forEach((te,ve)=>{he(this,!1,ve),this.at(ve).setValue(te,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(z,F={}){null!=z&&(z.forEach((te,ve)=>{this.at(ve)&&this.at(ve).patchValue(te,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(z=[],F={}){this._forEachChild((te,ve)=>{te.reset(z[ve],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this.controls.map(z=>z.getRawValue())}clear(z={}){this.controls.length<1||(this._forEachChild(F=>F._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:z.emitEvent}))}_adjustIndex(z){return z<0?z+this.length:z}_syncPendingControls(){let z=this.controls.reduce((F,te)=>!!te._syncPendingControls()||F,!1);return z&&this.updateValueAndValidity({onlySelf:!0}),z}_forEachChild(z){this.controls.forEach((F,te)=>{z(F,te)})}_updateValue(){this.value=this.controls.filter(z=>z.enabled||this.disabled).map(z=>z.value)}_anyControls(z){return this.controls.some(F=>F.enabled&&z(F))}_setUpControls(){this._forEachChild(z=>this._registerControl(z))}_allControlsDisabled(){for(const z of this.controls)if(z.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(z){z.setParent(this),z._registerOnCollectionChange(this._onCollectionChange)}_find(z){return this.at(z)??null}}function js(G){return!!G&&(void 0!==G.asyncValidators||void 0!==G.validators||void 0!==G.updateOn)}let fo=(()=>{class G{constructor(){this.useNonNullable=!1}get nonNullable(){const F=new G;return F.useNonNullable=!0,F}group(F,te=null){const ve=this._reduceControls(F);let un={};return js(te)?un=te:null!==te&&(un.validators=te.validator,un.asyncValidators=te.asyncValidator),new ae(ve,un)}record(F,te=null){const ve=this._reduceControls(F);return new Ne(ve,te)}control(F,te,ve){let un={};return this.useNonNullable?(js(te)?un=te:(un.validators=te,un.asyncValidators=ve),new ns(F,{...un,nonNullable:!0})):new ns(F,te,ve)}array(F,te,ve){const un=F.map(Qn=>this._createControl(Qn));return new Ya(un,te,ve)}_reduceControls(F){const te={};return Object.keys(F).forEach(ve=>{te[ve]=this._createControl(F[ve])}),te}_createControl(F){return F instanceof ns||F instanceof re?F:Array.isArray(F)?this.control(F[0],F.length>1?F[1]:null,F.length>2?F[2]:null):this.control(F)}static#e=this.\u0275fac=function(te){return new(te||G)};static#t=this.\u0275prov=_.wxM({token:G,factory:G.\u0275fac,providedIn:"root"})}return G})(),Ra=(()=>{class G{static withConfig(F){return{ngModule:G,providers:[{provide:Qt,useValue:F.callSetDisabledState??En}]}}static#e=this.\u0275fac=function(te){return new(te||G)};static#t=this.\u0275mod=_.a4G({type:G});static#n=this.\u0275inj=_.s3X({imports:[Wo]})}return G})(),Ys=(()=>{class G{static withConfig(F){return{ngModule:G,providers:[{provide:ra,useValue:F.warnOnNgModelWithFormControl??"always"},{provide:Qt,useValue:F.callSetDisabledState??En}]}}static#e=this.\u0275fac=function(te){return new(te||G)};static#t=this.\u0275mod=_.a4G({type:G});static#n=this.\u0275inj=_.s3X({imports:[Wo]})}return G})()},4476:(Xt,$e,V)=>{V.d($e,{OY:()=>wr,iE:()=>Wn,o_:()=>dt});var _=V(4496),J=V(1368);class I extends J.mg{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class O extends I{static makeCurrent(){(0,J.ug)(new O)}onAndCancel(Ge,he,Fe){return Ge.addEventListener(he,Fe),()=>{Ge.removeEventListener(he,Fe)}}dispatchEvent(Ge,he){Ge.dispatchEvent(he)}remove(Ge){Ge.parentNode&&Ge.parentNode.removeChild(Ge)}createElement(Ge,he){return(he=he||this.getDefaultDocument()).createElement(Ge)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ge){return Ge.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ge){return Ge instanceof DocumentFragment}getGlobalEventTarget(Ge,he){return"window"===he?window:"document"===he?Ge:"body"===he?Ge.body:null}getBaseHref(Ge){const he=function Ee(){return ge=ge||document.querySelector("base"),ge?ge.getAttribute("href"):null}();return null==he?null:function Ie(gt){return new URL(gt,document.baseURI).pathname}(he)}resetBaseElement(){ge=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ge){return(0,J.Sg)(document.cookie,Ge)}}let ge=null,je=(()=>{class gt{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Fe){return new(Fe||gt)};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac})}return gt})();const le=new _.UbH("");let ue=(()=>{class gt{constructor(he,Fe){this._zone=Fe,this._eventNameToPlugin=new Map,he.forEach(re=>{re.manager=this}),this._plugins=he.slice().reverse()}addEventListener(he,Fe,re){return this._findPluginFor(Fe).addEventListener(he,Fe,re)}getZone(){return this._zone}_findPluginFor(he){let Fe=this._eventNameToPlugin.get(he);if(Fe)return Fe;if(Fe=this._plugins.find(ae=>ae.supports(he)),!Fe)throw new _.OBp(5101,!1);return this._eventNameToPlugin.set(he,Fe),Fe}static#e=this.\u0275fac=function(Fe){return new(Fe||gt)(_.CoB(le),_.CoB(_.WW2))};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac})}return gt})();class Oe{constructor(Ge){this._doc=Ge}}const Se="ng-app-id";let Le=(()=>{class gt{constructor(he,Fe,re,ae={}){this.doc=he,this.appId=Fe,this.nonce=re,this.platformId=ae,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,J.uf)(ae),this.resetHostNodes()}addStyles(he){for(const Fe of he)1===this.changeUsageCount(Fe,1)&&this.onStyleAdded(Fe)}removeStyles(he){for(const Fe of he)this.changeUsageCount(Fe,-1)<=0&&this.onStyleRemoved(Fe)}ngOnDestroy(){const he=this.styleNodesInDOM;he&&(he.forEach(Fe=>Fe.remove()),he.clear());for(const Fe of this.getAllStyles())this.onStyleRemoved(Fe);this.resetHostNodes()}addHost(he){this.hostNodes.add(he);for(const Fe of this.getAllStyles())this.addStyleToHost(he,Fe)}removeHost(he){this.hostNodes.delete(he)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(he){for(const Fe of this.hostNodes)this.addStyleToHost(Fe,he)}onStyleRemoved(he){const Fe=this.styleRef;Fe.get(he)?.elements?.forEach(re=>re.remove()),Fe.delete(he)}collectServerRenderedStyles(){const he=this.doc.head?.querySelectorAll(`style[${Se}="${this.appId}"]`);if(he?.length){const Fe=new Map;return he.forEach(re=>{null!=re.textContent&&Fe.set(re.textContent,re)}),Fe}return null}changeUsageCount(he,Fe){const re=this.styleRef;if(re.has(he)){const ae=re.get(he);return ae.usage+=Fe,ae.usage}return re.set(he,{usage:Fe,elements:[]}),Fe}getStyleElement(he,Fe){const re=this.styleNodesInDOM,ae=re?.get(Fe);if(ae?.parentNode===he)return re.delete(Fe),ae.removeAttribute(Se),ae;{const X=this.doc.createElement("style");return this.nonce&&X.setAttribute("nonce",this.nonce),X.textContent=Fe,this.platformIsServer&&X.setAttribute(Se,this.appId),he.appendChild(X),X}}addStyleToHost(he,Fe){const re=this.getStyleElement(he,Fe),ae=this.styleRef,X=ae.get(Fe)?.elements;X?X.push(re):ae.set(Fe,{elements:[re],usage:1})}resetHostNodes(){const he=this.hostNodes;he.clear(),he.add(this.doc.head)}static#e=this.\u0275fac=function(Fe){return new(Fe||gt)(_.CoB(J.Ud),_.CoB(_.QHP),_.CoB(_.YND,8),_.CoB(_.AHE))};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac})}return gt})();const We={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ve=/%COMP%/g,Ze=new _.UbH("",{providedIn:"root",factory:()=>!0});function Ot(gt,Ge){return Ge.map(he=>he.replace(Ve,gt))}let At=(()=>{class gt{constructor(he,Fe,re,ae,X,Q,Z,Ne=null){this.eventManager=he,this.sharedStylesHost=Fe,this.appId=re,this.removeStylesOnCompDestroy=ae,this.doc=X,this.platformId=Q,this.ngZone=Z,this.nonce=Ne,this.rendererByCompId=new Map,this.platformIsServer=(0,J.uf)(Q),this.defaultRenderer=new Me(he,X,Z,this.platformIsServer)}createRenderer(he,Fe){if(!he||!Fe)return this.defaultRenderer;this.platformIsServer&&Fe.encapsulation===_.K6R.ShadowDom&&(Fe={...Fe,encapsulation:_.K6R.Emulated});const re=this.getOrCreateRenderer(he,Fe);return re instanceof ct?re.applyToHost(he):re instanceof Rt&&re.applyStyles(),re}getOrCreateRenderer(he,Fe){const re=this.rendererByCompId;let ae=re.get(Fe.id);if(!ae){const X=this.doc,Q=this.ngZone,Z=this.eventManager,Ne=this.sharedStylesHost,mt=this.removeStylesOnCompDestroy,Qt=this.platformIsServer;switch(Fe.encapsulation){case _.K6R.Emulated:ae=new ct(Z,Ne,Fe,this.appId,mt,X,Q,Qt);break;case _.K6R.ShadowDom:return new ke(Z,Ne,he,Fe,X,Q,this.nonce,Qt);default:ae=new Rt(Z,Ne,Fe,mt,X,Q,Qt)}re.set(Fe.id,ae)}return ae}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Fe){return new(Fe||gt)(_.CoB(ue),_.CoB(Le),_.CoB(_.QHP),_.CoB(Ze),_.CoB(J.Ud),_.CoB(_.AHE),_.CoB(_.WW2),_.CoB(_.YND))};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac})}return gt})();class Me{constructor(Ge,he,Fe,re){this.eventManager=Ge,this.doc=he,this.ngZone=Fe,this.platformIsServer=re,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(Ge,he){return he?this.doc.createElementNS(We[he]||he,Ge):this.doc.createElement(Ge)}createComment(Ge){return this.doc.createComment(Ge)}createText(Ge){return this.doc.createTextNode(Ge)}appendChild(Ge,he){(Ut(Ge)?Ge.content:Ge).appendChild(he)}insertBefore(Ge,he,Fe){Ge&&(Ut(Ge)?Ge.content:Ge).insertBefore(he,Fe)}removeChild(Ge,he){Ge&&Ge.removeChild(he)}selectRootElement(Ge,he){let Fe="string"==typeof Ge?this.doc.querySelector(Ge):Ge;if(!Fe)throw new _.OBp(-5104,!1);return he||(Fe.textContent=""),Fe}parentNode(Ge){return Ge.parentNode}nextSibling(Ge){return Ge.nextSibling}setAttribute(Ge,he,Fe,re){if(re){he=re+":"+he;const ae=We[re];ae?Ge.setAttributeNS(ae,he,Fe):Ge.setAttribute(he,Fe)}else Ge.setAttribute(he,Fe)}removeAttribute(Ge,he,Fe){if(Fe){const re=We[Fe];re?Ge.removeAttributeNS(re,he):Ge.removeAttribute(`${Fe}:${he}`)}else Ge.removeAttribute(he)}addClass(Ge,he){Ge.classList.add(he)}removeClass(Ge,he){Ge.classList.remove(he)}setStyle(Ge,he,Fe,re){re&(_.yzm.DashCase|_.yzm.Important)?Ge.style.setProperty(he,Fe,re&_.yzm.Important?"important":""):Ge.style[he]=Fe}removeStyle(Ge,he,Fe){Fe&_.yzm.DashCase?Ge.style.removeProperty(he):Ge.style[he]=""}setProperty(Ge,he,Fe){null!=Ge&&(Ge[he]=Fe)}setValue(Ge,he){Ge.nodeValue=he}listen(Ge,he,Fe){if("string"==typeof Ge&&!(Ge=(0,J.uy)().getGlobalEventTarget(this.doc,Ge)))throw new Error(`Unsupported event target ${Ge} for event ${he}`);return this.eventManager.addEventListener(Ge,he,this.decoratePreventDefault(Fe))}decoratePreventDefault(Ge){return he=>{if("__ngUnwrap__"===he)return Ge;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Ge(he)):Ge(he))&&he.preventDefault()}}}function Ut(gt){return"TEMPLATE"===gt.tagName&&void 0!==gt.content}class ke extends Me{constructor(Ge,he,Fe,re,ae,X,Q,Z){super(Ge,ae,X,Z),this.sharedStylesHost=he,this.hostEl=Fe,this.shadowRoot=Fe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ne=Ot(re.id,re.styles);for(const mt of Ne){const Qt=document.createElement("style");Q&&Qt.setAttribute("nonce",Q),Qt.textContent=mt,this.shadowRoot.appendChild(Qt)}}nodeOrShadowRoot(Ge){return Ge===this.hostEl?this.shadowRoot:Ge}appendChild(Ge,he){return super.appendChild(this.nodeOrShadowRoot(Ge),he)}insertBefore(Ge,he,Fe){return super.insertBefore(this.nodeOrShadowRoot(Ge),he,Fe)}removeChild(Ge,he){return super.removeChild(this.nodeOrShadowRoot(Ge),he)}parentNode(Ge){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ge)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Rt extends Me{constructor(Ge,he,Fe,re,ae,X,Q,Z){super(Ge,ae,X,Q),this.sharedStylesHost=he,this.removeStylesOnCompDestroy=re,this.styles=Z?Ot(Z,Fe.styles):Fe.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class ct extends Rt{constructor(Ge,he,Fe,re,ae,X,Q,Z){const Ne=re+"-"+Fe.id;super(Ge,he,Fe,ae,X,Q,Z,Ne),this.contentAttr=function rt(gt){return"_ngcontent-%COMP%".replace(Ve,gt)}(Ne),this.hostAttr=function me(gt){return"_nghost-%COMP%".replace(Ve,gt)}(Ne)}applyToHost(Ge){this.applyStyles(),this.setAttribute(Ge,this.hostAttr,"")}createElement(Ge,he){const Fe=super.createElement(Ge,he);return super.setAttribute(Fe,this.contentAttr,""),Fe}}let Nt=(()=>{class gt extends Oe{constructor(he){super(he)}supports(he){return!0}addEventListener(he,Fe,re){return he.addEventListener(Fe,re,!1),()=>this.removeEventListener(he,Fe,re)}removeEventListener(he,Fe,re){return he.removeEventListener(Fe,re)}static#e=this.\u0275fac=function(Fe){return new(Fe||gt)(_.CoB(J.Ud))};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac})}return gt})();const Kt=["alt","control","meta","shift"],sn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Re={alt:gt=>gt.altKey,control:gt=>gt.ctrlKey,meta:gt=>gt.metaKey,shift:gt=>gt.shiftKey};let He=(()=>{class gt extends Oe{constructor(he){super(he)}supports(he){return null!=gt.parseEventName(he)}addEventListener(he,Fe,re){const ae=gt.parseEventName(Fe),X=gt.eventCallback(ae.fullKey,re,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,J.uy)().onAndCancel(he,ae.domEventName,X))}static parseEventName(he){const Fe=he.toLowerCase().split("."),re=Fe.shift();if(0===Fe.length||"keydown"!==re&&"keyup"!==re)return null;const ae=gt._normalizeKey(Fe.pop());let X="",Q=Fe.indexOf("code");if(Q>-1&&(Fe.splice(Q,1),X="code."),Kt.forEach(Ne=>{const mt=Fe.indexOf(Ne);mt>-1&&(Fe.splice(mt,1),X+=Ne+".")}),X+=ae,0!=Fe.length||0===ae.length)return null;const Z={};return Z.domEventName=re,Z.fullKey=X,Z}static matchEventFullKeyCode(he,Fe){let re=sn[he.key]||he.key,ae="";return Fe.indexOf("code.")>-1&&(re=he.code,ae="code."),!(null==re||!re)&&(re=re.toLowerCase()," "===re?re="space":"."===re&&(re="dot"),Kt.forEach(X=>{X!==re&&(0,Re[X])(he)&&(ae+=X+".")}),ae+=re,ae===Fe)}static eventCallback(he,Fe,re){return ae=>{gt.matchEventFullKeyCode(ae,he)&&re.runGuarded(()=>Fe(ae))}}static _normalizeKey(he){return"esc"===he?"escape":he}static#e=this.\u0275fac=function(Fe){return new(Fe||gt)(_.CoB(J.Ud))};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac})}return gt})();const dt=(0,_.grM)(_.m4O,"browser",[{provide:_.AHE,useValue:J._k},{provide:_.crf,useValue:function Dt(){O.makeCurrent()},multi:!0},{provide:J.Ud,useFactory:function xt(){return(0,_.auf)(document),document},deps:[]}]),yt=new _.UbH(""),ut=[{provide:_.Mn9,useClass:class Be{addToWindow(Ge){_.IHs.getAngularTestability=(Fe,re=!0)=>{const ae=Ge.findTestabilityInTree(Fe,re);if(null==ae)throw new _.OBp(5103,!1);return ae},_.IHs.getAllAngularTestabilities=()=>Ge.getAllTestabilities(),_.IHs.getAllAngularRootElements=()=>Ge.getAllRootElements(),_.IHs.frameworkStabilizers||(_.IHs.frameworkStabilizers=[]),_.IHs.frameworkStabilizers.push(Fe=>{const re=_.IHs.getAllAngularTestabilities();let ae=re.length;const X=function(){ae--,0==ae&&Fe()};re.forEach(Q=>{Q.whenStable(X)})})}findTestabilityInTree(Ge,he,Fe){return null==he?null:Ge.getTestability(he)??(Fe?(0,J.uy)().isShadowRoot(he)?this.findTestabilityInTree(Ge,he.host,!0):this.findTestabilityInTree(Ge,he.parentElement,!0):null)}},deps:[]},{provide:_.aS5,useClass:_.G4X,deps:[_.WW2,_.eOv,_.Mn9]},{provide:_.G4X,useClass:_.G4X,deps:[_.WW2,_.eOv,_.Mn9]}],Yt=[{provide:_.i4S,useValue:"root"},{provide:_.eAe,useFactory:function ze(){return new _.eAe},deps:[]},{provide:le,useClass:Nt,multi:!0,deps:[J.Ud,_.WW2,_.AHE]},{provide:le,useClass:He,multi:!0,deps:[J.Ud]},At,Le,ue,{provide:_.O8F,useExisting:At},{provide:J.OM,useClass:je,deps:[]},[]];let Wn=(()=>{class gt{constructor(he){}static withServerTransition(he){return{ngModule:gt,providers:[{provide:_.QHP,useValue:he.appId}]}}static#e=this.\u0275fac=function(Fe){return new(Fe||gt)(_.CoB(yt,12))};static#t=this.\u0275mod=_.a4G({type:gt});static#n=this.\u0275inj=_.s3X({providers:[...Yt,...ut],imports:[J.MD,_.Ev2]})}return gt})(),wr=(()=>{class gt{constructor(he){this._doc=he}getTitle(){return this._doc.title}setTitle(he){this._doc.title=he||""}static#e=this.\u0275fac=function(Fe){return new(Fe||gt)(_.CoB(J.Ud))};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac,providedIn:"root"})}return gt})()},4856:(Xt,$e,V)=>{V.d($e,{gV:()=>Pi,E5:()=>Jr,ER:()=>on,qQ:()=>pr,cP:()=>Ei});var _=V(4496),J=V(3252),I=V(8880),ge=V(9900),Ee=V(2700),Ie=V(6700),Be=V(4300),je=V(528),le=V(4187),ue=V(6624),Oe=V(7904),Se=V(7773),Le=V(9399);function We(...w){const M=(0,ue.e_)(w),D=(0,ue.yu)(w),{args:x,keys:j}=(0,Be.Q)(w);if(0===x.length)return(0,ge.Q)([],M);const ee=new J._(function Ve(w,M,D=je.Z){return x=>{Xe(M,()=>{const{length:j}=w,ee=new Array(j);let fe=j,it=j;for(let Je=0;Je<j;Je++)Xe(M,()=>{const Gt=(0,ge.Q)(w[Je],M);let jt=!1;Gt.subscribe((0,Se.e)(x,Xn=>{ee[Je]=Xn,jt||(jt=!0,it--),it||x.next(D(ee.slice()))},()=>{--fe||x.complete()}))},x)},x)}}(x,M,j?fe=>(0,Oe.q)(j,fe):je.Z));return D?ee.pipe((0,le.j)(D)):ee}function Xe(w,M,D){w?(0,Le._)(D,w,M):M()}var Ce=V(7696),ht=V(7228),_t=V(560);function Ze(w){return new J._(M=>{(0,_t.Uv)(w()).subscribe(M)})}var rt=V(3928);function me(w,M){const D=(0,I.m)(w)?w:()=>w,x=j=>j.error(D());return new J._(M?j=>M.schedule(x,0,j):x)}var Ot=V(8960),At=V(6928),Me=V(5448);function Ct(){return(0,Me.i)((w,M)=>{let D=null;w._refCount++;const x=(0,Se.e)(M,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(D=null);const j=w._connection,ee=D;D=null,j&&(!ee||j===ee)&&j.unsubscribe(),M.unsubscribe()});w.subscribe(x),x.closed||(D=w.connect())})}class bt extends J._{constructor(M,D){super(),this.source=M,this.subjectFactory=D,this._subject=null,this._refCount=0,this._connection=null,(0,Me.e)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,M?.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new At.wH;const D=this.getSubject();M.add(this.source.subscribe((0,Se.e)(D,void 0,()=>{this._teardown(),D.complete()},x=>{this._teardown(),D.error(x)},()=>this._teardown()))),M.closed&&(this._connection=null,M=At.wH.EMPTY)}return M}refCount(){return Ct()(this)}}var Ut=V(5657),ke=V(1368),Rt=V(4704),ct=V(7368),Nt=V(3992),Kt=V(5568),sn=V(6684),Re=V(7400),He=V(5084),tt=V(6020),Ue=V(9212),at=V(9144),st=V(208),Dt=V(2156);function ze(w){return w<=0?()=>Ot.k:(0,Me.i)((M,D)=>{let x=[];M.subscribe((0,Se.e)(D,j=>{x.push(j),w<x.length&&x.shift()},()=>{for(const j of x)D.next(j);D.complete()},void 0,()=>{x=null}))})}var xt=V(8124),yt=V(8824),ut=V(308),Wn=V(267),Rr=V(4476);const Ht="primary",wr=Symbol("RouteTitle");class $t{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const D=this.params[M];return Array.isArray(D)?D[0]:D}return null}getAll(M){if(this.has(M)){const D=this.params[M];return Array.isArray(D)?D:[D]}return[]}get keys(){return Object.keys(this.params)}}function zr(w){return new $t(w)}function kn(w,M,D){const x=D.path.split("/");if(x.length>w.length||"full"===D.pathMatch&&(M.hasChildren()||x.length<w.length))return null;const j={};for(let ee=0;ee<x.length;ee++){const fe=x[ee],it=w[ee];if(fe.startsWith(":"))j[fe.substring(1)]=it;else if(fe!==it.path)return null}return{consumed:w.slice(0,x.length),posParams:j}}function yr(w,M){const D=w?vi(w):void 0,x=M?vi(M):void 0;if(!D||!x||D.length!=x.length)return!1;let j;for(let ee=0;ee<D.length;ee++)if(j=D[ee],!rr(w[j],M[j]))return!1;return!0}function vi(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}function rr(w,M){if(Array.isArray(w)&&Array.isArray(M)){if(w.length!==M.length)return!1;const D=[...w].sort(),x=[...M].sort();return D.every((j,ee)=>x[ee]===j)}return w===M}function In(w){return w.length>0?w[w.length-1]:null}function yn(w){return function O(w){return!!w&&(w instanceof J._||(0,I.m)(w.lift)&&(0,I.m)(w.subscribe))}(w)?w:(0,_.w5$)(w)?(0,ge.Q)(Promise.resolve(w)):(0,Ee.of)(w)}const ii={exact:function Oi(w,M,D){if(!Nr(w.segments,M.segments)||!Tn(w.segments,M.segments,D)||w.numberOfChildren!==M.numberOfChildren)return!1;for(const x in M.children)if(!w.children[x]||!Oi(w.children[x],M.children[x],D))return!1;return!0},subset:Fn},Hs={exact:function Bi(w,M){return yr(w,M)},subset:function bn(w,M){return Object.keys(M).length<=Object.keys(w).length&&Object.keys(M).every(D=>rr(w[D],M[D]))},ignored:()=>!0};function qr(w,M,D){return ii[D.paths](w.root,M.root,D.matrixParams)&&Hs[D.queryParams](w.queryParams,M.queryParams)&&!("exact"===D.fragment&&w.fragment!==M.fragment)}function Fn(w,M,D){return Tr(w,M,M.segments,D)}function Tr(w,M,D,x){if(w.segments.length>D.length){const j=w.segments.slice(0,D.length);return!(!Nr(j,D)||M.hasChildren()||!Tn(j,D,x))}if(w.segments.length===D.length){if(!Nr(w.segments,D)||!Tn(w.segments,D,x))return!1;for(const j in M.children)if(!w.children[j]||!Fn(w.children[j],M.children[j],x))return!1;return!0}{const j=D.slice(0,w.segments.length),ee=D.slice(w.segments.length);return!!(Nr(w.segments,j)&&Tn(w.segments,j,x)&&w.children[Ht])&&Tr(w.children[Ht],M,ee,x)}}function Tn(w,M,D){return M.every((x,j)=>Hs[D](w[j].parameters,x.parameters))}class Mr{constructor(M=new Gn([],{}),D={},x=null){this.root=M,this.queryParams=D,this.fragment=x}get queryParamMap(){return this._queryParamMap??=zr(this.queryParams),this._queryParamMap}toString(){return Ge.serialize(this)}}class Gn{constructor(M,D){this.segments=M,this.children=D,this.parent=null,Object.values(D).forEach(x=>x.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return he(this)}}class wi{constructor(M,D){this.path=M,this.parameters=D}get parameterMap(){return this._parameterMap??=zr(this.parameters),this._parameterMap}toString(){return mt(this)}}function Nr(w,M){return w.length===M.length&&w.every((D,x)=>D.path===M[x].path)}let pi=(()=>{class w{static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=_.wxM({token:w,factory:()=>new gt,providedIn:"root"})}return w})();class gt{parse(M){const D=new Qe(M);return new Mr(D.parseRootSegment(),D.parseQueryParams(),D.parseFragment())}serialize(M){const D=`/${Fe(M.root,!0)}`,x=function En(w){const M=Object.entries(w).map(([D,x])=>Array.isArray(x)?x.map(j=>`${ae(D)}=${ae(j)}`).join("&"):`${ae(D)}=${ae(x)}`).filter(D=>D);return M.length?`?${M.join("&")}`:""}(M.queryParams);return`${D}${x}${"string"==typeof M.fragment?`#${function X(w){return encodeURI(w)}(M.fragment)}`:""}`}}const Ge=new gt;function he(w){return w.segments.map(M=>mt(M)).join("/")}function Fe(w,M){if(!w.hasChildren())return he(w);if(M){const D=w.children[Ht]?Fe(w.children[Ht],!1):"",x=[];return Object.entries(w.children).forEach(([j,ee])=>{j!==Ht&&x.push(`${j}:${Fe(ee,!1)}`)}),x.length>0?`${D}(${x.join("//")})`:D}{const D=function Ds(w,M){let D=[];return Object.entries(w.children).forEach(([x,j])=>{x===Ht&&(D=D.concat(M(j,x)))}),Object.entries(w.children).forEach(([x,j])=>{x!==Ht&&(D=D.concat(M(j,x)))}),D}(w,(x,j)=>j===Ht?[Fe(w.children[Ht],!1)]:[`${j}:${Fe(x,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[Ht]?`${he(w)}/${D[0]}`:`${he(w)}/(${D.join("//")})`}}function re(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ae(w){return re(w).replace(/%3B/gi,";")}function Q(w){return re(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Z(w){return decodeURIComponent(w)}function Ne(w){return Z(w.replace(/\+/g,"%20"))}function mt(w){return`${Q(w.path)}${function Qt(w){return Object.entries(w).map(([M,D])=>`;${Q(M)}=${Q(D)}`).join("")}(w.parameters)}`}const Cn=/^[^\/()?;#]+/;function On(w){const M=w.match(Cn);return M?M[0]:""}const en=/^[^\/()?;=#]+/,fn=/^[^=?&#]+/,Pe=/^[^&#]+/;class Qe{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gn([],{}):new Gn([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let D={};this.peekStartsWith("/(")&&(this.capture("/"),D=this.parseParens(!0));let x={};return this.peekStartsWith("(")&&(x=this.parseParens(!1)),(M.length>0||Object.keys(D).length>0)&&(x[Ht]=new Gn(M,D)),x}parseSegment(){const M=On(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new _.OBp(4009,!1);return this.capture(M),new wi(Z(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const D=function Dr(w){const M=w.match(en);return M?M[0]:""}(this.remaining);if(!D)return;this.capture(D);let x="";if(this.consumeOptional("=")){const j=On(this.remaining);j&&(x=j,this.capture(x))}M[Z(D)]=Z(x)}parseQueryParam(M){const D=function Ln(w){const M=w.match(fn);return M?M[0]:""}(this.remaining);if(!D)return;this.capture(D);let x="";if(this.consumeOptional("=")){const fe=function qe(w){const M=w.match(Pe);return M?M[0]:""}(this.remaining);fe&&(x=fe,this.capture(x))}const j=Ne(D),ee=Ne(x);if(M.hasOwnProperty(j)){let fe=M[j];Array.isArray(fe)||(fe=[fe],M[j]=fe),fe.push(ee)}else M[j]=ee}parseParens(M){const D={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const x=On(this.remaining),j=this.remaining[x.length];if("/"!==j&&")"!==j&&";"!==j)throw new _.OBp(4010,!1);let ee;x.indexOf(":")>-1?(ee=x.slice(0,x.indexOf(":")),this.capture(ee),this.capture(":")):M&&(ee=Ht);const fe=this.parseChildren();D[ee]=1===Object.keys(fe).length?fe[Ht]:new Gn([],fe),this.consumeOptional("//")}return D}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new _.OBp(4011,!1)}}function Tt(w){return w.segments.length>0?new Gn([],{[Ht]:w}):w}function rn(w){const M={};for(const[x,j]of Object.entries(w.children)){const ee=rn(j);if(x===Ht&&0===ee.segments.length&&ee.hasChildren())for(const[fe,it]of Object.entries(ee.children))M[fe]=it;else(ee.segments.length>0||ee.hasChildren())&&(M[x]=ee)}return function Bn(w){if(1===w.numberOfChildren&&w.children[Ht]){const M=w.children[Ht];return new Gn(w.segments.concat(M.segments),M.children)}return w}(new Gn(w.segments,M))}function Hn(w){return w instanceof Mr}function Kr(w){let M;const j=Tt(function D(ee){const fe={};for(const Je of ee.children){const Gt=D(Je);fe[Je.outlet]=Gt}const it=new Gn(ee.url,fe);return ee===w&&(M=it),it}(w.root));return M??j}function lr(w,M,D,x){let j=w;for(;j.parent;)j=j.parent;if(0===M.length)return ye(j,j,j,D,x);const ee=function Vt(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new wt(!0,0,w);let M=0,D=!1;const x=w.reduce((j,ee,fe)=>{if("object"==typeof ee&&null!=ee){if(ee.outlets){const it={};return Object.entries(ee.outlets).forEach(([Je,Gt])=>{it[Je]="string"==typeof Gt?Gt.split("/"):Gt}),[...j,{outlets:it}]}if(ee.segmentPath)return[...j,ee.segmentPath]}return"string"!=typeof ee?[...j,ee]:0===fe?(ee.split("/").forEach((it,Je)=>{0==Je&&"."===it||(0==Je&&""===it?D=!0:".."===it?M++:""!=it&&j.push(it))}),j):[...j,ee]},[]);return new wt(D,M,x)}(M);if(ee.toRoot())return ye(j,j,new Gn([],{}),D,x);const fe=function pn(w,M,D){if(w.isAbsolute)return new qt(M,!0,0);if(!D)return new qt(M,!1,NaN);if(null===D.parent)return new qt(D,!0,0);const x=se(w.commands[0])?0:1;return function an(w,M,D){let x=w,j=M,ee=D;for(;ee>j;){if(ee-=j,x=x.parent,!x)throw new _.OBp(4005,!1);j=x.segments.length}return new qt(x,!1,j-ee)}(D,D.segments.length-1+x,w.numberOfDoubleDots)}(ee,j,w),it=fe.processChildren?sr(fe.segmentGroup,fe.index,ee.commands):vr(fe.segmentGroup,fe.index,ee.commands);return ye(j,fe.segmentGroup,it,D,x)}function se(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function _e(w){return"object"==typeof w&&null!=w&&w.outlets}function ye(w,M,D,x,j){let fe,ee={};x&&Object.entries(x).forEach(([Je,Gt])=>{ee[Je]=Array.isArray(Gt)?Gt.map(jt=>`${jt}`):`${Gt}`}),fe=w===M?D:ft(w,M,D);const it=Tt(rn(fe));return new Mr(it,ee,j)}function ft(w,M,D){const x={};return Object.entries(w.children).forEach(([j,ee])=>{x[j]=ee===M?D:ft(ee,M,D)}),new Gn(w.segments,x)}class wt{constructor(M,D,x){if(this.isAbsolute=M,this.numberOfDoubleDots=D,this.commands=x,M&&x.length>0&&se(x[0]))throw new _.OBp(4003,!1);const j=x.find(_e);if(j&&j!==In(x))throw new _.OBp(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qt{constructor(M,D,x){this.segmentGroup=M,this.processChildren=D,this.index=x}}function vr(w,M,D){if(w??=new Gn([],{}),0===w.segments.length&&w.hasChildren())return sr(w,M,D);const x=function Vn(w,M,D){let x=0,j=M;const ee={match:!1,pathIndex:0,commandIndex:0};for(;j<w.segments.length;){if(x>=D.length)return ee;const fe=w.segments[j],it=D[x];if(_e(it))break;const Je=`${it}`,Gt=x<D.length-1?D[x+1]:null;if(j>0&&void 0===Je)break;if(Je&&Gt&&"object"==typeof Gt&&void 0===Gt.outlets){if(!qn(Je,Gt,fe))return ee;x+=2}else{if(!qn(Je,{},fe))return ee;x++}j++}return{match:!0,pathIndex:j,commandIndex:x}}(w,M,D),j=D.slice(x.commandIndex);if(x.match&&x.pathIndex<w.segments.length){const ee=new Gn(w.segments.slice(0,x.pathIndex),{});return ee.children[Ht]=new Gn(w.segments.slice(x.pathIndex),w.children),sr(ee,0,j)}return x.match&&0===j.length?new Gn(w.segments,{}):x.match&&!w.hasChildren()?ns(w,M,D):x.match?sr(w,0,j):ns(w,M,D)}function sr(w,M,D){if(0===D.length)return new Gn(w.segments,{});{const x=function zn(w){return _e(w[0])?w[0].outlets:{[Ht]:w}}(D),j={};if(Object.keys(x).some(ee=>ee!==Ht)&&w.children[Ht]&&1===w.numberOfChildren&&0===w.children[Ht].segments.length){const ee=sr(w.children[Ht],M,D);return new Gn(w.segments,ee.children)}return Object.entries(x).forEach(([ee,fe])=>{"string"==typeof fe&&(fe=[fe]),null!==fe&&(j[ee]=vr(w.children[ee],M,fe))}),Object.entries(w.children).forEach(([ee,fe])=>{void 0===x[ee]&&(j[ee]=fe)}),new Gn(w.segments,j)}}function ns(w,M,D){const x=w.segments.slice(0,M);let j=0;for(;j<D.length;){const ee=D[j];if(_e(ee)){const Je=Ti(ee.outlets);return new Gn(x,Je)}if(0===j&&se(D[0])){x.push(new wi(w.segments[M].path,kr(D[0]))),j++;continue}const fe=_e(ee)?ee.outlets[Ht]:`${ee}`,it=j<D.length-1?D[j+1]:null;fe&&it&&se(it)?(x.push(new wi(fe,kr(it))),j+=2):(x.push(new wi(fe,{})),j++)}return new Gn(x,{})}function Ti(w){const M={};return Object.entries(w).forEach(([D,x])=>{"string"==typeof x&&(x=[x]),null!==x&&(M[D]=ns(new Gn([],{}),0,x))}),M}function kr(w){const M={};return Object.entries(w).forEach(([D,x])=>M[D]=`${x}`),M}function qn(w,M,D){return w==D.path&&yr(M,D.parameters)}const ei="imperative";var $n=function(w){return w[w.NavigationStart=0]="NavigationStart",w[w.NavigationEnd=1]="NavigationEnd",w[w.NavigationCancel=2]="NavigationCancel",w[w.NavigationError=3]="NavigationError",w[w.RoutesRecognized=4]="RoutesRecognized",w[w.ResolveStart=5]="ResolveStart",w[w.ResolveEnd=6]="ResolveEnd",w[w.GuardsCheckStart=7]="GuardsCheckStart",w[w.GuardsCheckEnd=8]="GuardsCheckEnd",w[w.RouteConfigLoadStart=9]="RouteConfigLoadStart",w[w.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",w[w.ChildActivationStart=11]="ChildActivationStart",w[w.ChildActivationEnd=12]="ChildActivationEnd",w[w.ActivationStart=13]="ActivationStart",w[w.ActivationEnd=14]="ActivationEnd",w[w.Scroll=15]="Scroll",w[w.NavigationSkipped=16]="NavigationSkipped",w}($n||{});class fr{constructor(M,D){this.id=M,this.url=D}}class rs extends fr{constructor(M,D,x="imperative",j=null){super(M,D),this.type=$n.NavigationStart,this.navigationTrigger=x,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Di extends fr{constructor(M,D,x){super(M,D),this.urlAfterRedirects=x,this.type=$n.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var si=function(w){return w[w.Redirect=0]="Redirect",w[w.SupersededByNewNavigation=1]="SupersededByNewNavigation",w[w.NoDataFromResolver=2]="NoDataFromResolver",w[w.GuardRejected=3]="GuardRejected",w}(si||{}),Yr=function(w){return w[w.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",w[w.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",w}(Yr||{});class As extends fr{constructor(M,D,x,j){super(M,D),this.reason=x,this.code=j,this.type=$n.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ai extends fr{constructor(M,D,x,j){super(M,D),this.reason=x,this.code=j,this.type=$n.NavigationSkipped}}class $o extends fr{constructor(M,D,x,j){super(M,D),this.error=x,this.target=j,this.type=$n.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ji extends fr{constructor(M,D,x,j){super(M,D),this.urlAfterRedirects=x,this.state=j,this.type=$n.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Go extends fr{constructor(M,D,x,j){super(M,D),this.urlAfterRedirects=x,this.state=j,this.type=$n.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ka extends fr{constructor(M,D,x,j,ee){super(M,D),this.urlAfterRedirects=x,this.state=j,this.shouldActivate=ee,this.type=$n.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Zn extends fr{constructor(M,D,x,j){super(M,D),this.urlAfterRedirects=x,this.state=j,this.type=$n.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Si extends fr{constructor(M,D,x,j){super(M,D),this.urlAfterRedirects=x,this.state=j,this.type=$n.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $r{constructor(M){this.route=M,this.type=$n.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ss{constructor(M){this.route=M,this.type=$n.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oi{constructor(M){this.snapshot=M,this.type=$n.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ra{constructor(M){this.snapshot=M,this.type=$n.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ia{constructor(M){this.snapshot=M,this.type=$n.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bs{constructor(M){this.snapshot=M,this.type=$n.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zs{constructor(M,D,x){this.routerEvent=M,this.position=D,this.anchor=x,this.type=$n.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class bo{}class Qr{constructor(M){this.url=M}}class vn{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ar,this.attachRef=null}}let Ar=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(D,x){const j=this.getOrCreateContext(D);j.outlet=x,this.contexts.set(D,j)}onChildOutletDestroyed(D){const x=this.getContext(D);x&&(x.outlet=null,x.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let x=this.getContext(D);return x||(x=new vn,this.contexts.set(D,x)),x}getContext(D){return this.contexts.get(D)||null}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=_.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();class Yi{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const D=this.pathFromRoot(M);return D.length>1?D[D.length-2]:null}children(M){const D=xi(M,this._root);return D?D.children.map(x=>x.value):[]}firstChild(M){const D=xi(M,this._root);return D&&D.children.length>0?D.children[0].value:null}siblings(M){const D=Ni(M,this._root);return D.length<2?[]:D[D.length-2].children.map(j=>j.value).filter(j=>j!==M)}pathFromRoot(M){return Ni(M,this._root).map(D=>D.value)}}function xi(w,M){if(w===M.value)return M;for(const D of M.children){const x=xi(w,D);if(x)return x}return null}function Ni(w,M){if(w===M.value)return[M];for(const D of M.children){const x=Ni(w,D);if(x.length)return x.unshift(M),x}return[]}class $i{constructor(M,D){this.value=M,this.children=D}toString(){return`TreeNode(${this.value})`}}function or(w){const M={};return w&&w.children.forEach(D=>M[D.value.outlet]=D),M}class ki extends Yi{constructor(M,D){super(M),this.snapshot=D,Ps(this,M)}toString(){return this.snapshot.toString()}}function Gi(w){const M=function An(w){const ee=new qs([],{},{},"",{},Ht,w,null,{});return new li("",new $i(ee,[]))}(w),D=new Ie.g([new wi("",{})]),x=new Ie.g({}),j=new Ie.g({}),ee=new Ie.g({}),fe=new Ie.g(""),it=new Pi(D,x,ee,fe,j,Ht,w,M.root);return it.snapshot=M.root,new ki(new $i(it,[]),M)}class Pi{constructor(M,D,x,j,ee,fe,it,Je){this.urlSubject=M,this.paramsSubject=D,this.queryParamsSubject=x,this.fragmentSubject=j,this.dataSubject=ee,this.outlet=fe,this.component=it,this._futureSnapshot=Je,this.title=this.dataSubject?.pipe((0,Rt.k)(Gt=>Gt[wr]))??(0,Ee.of)(void 0),this.url=M,this.params=D,this.queryParams=x,this.fragment=j,this.data=ee}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Rt.k)(M=>zr(M))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Rt.k)(M=>zr(M))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ho(w,M,D="emptyOnly"){let x;const{routeConfig:j}=w;return x=null===M||"always"!==D&&""!==j?.path&&(M.component||M.routeConfig?.loadComponent)?{params:{...w.params},data:{...w.data},resolve:{...w.data,...w._resolvedData??{}}}:{params:{...M.params,...w.params},data:{...M.data,...w.data},resolve:{...w.data,...M.data,...j?.data,...w._resolvedData}},j&&Qi(j)&&(x.resolve[wr]=j.title),x}class qs{get title(){return this.data?.[wr]}constructor(M,D,x,j,ee,fe,it,Je,Gt){this.url=M,this.params=D,this.queryParams=x,this.fragment=j,this.data=ee,this.outlet=fe,this.component=it,this.routeConfig=Je,this._resolve=Gt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zr(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(x=>x.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class li extends Yi{constructor(M,D){super(D),this.url=M,Ps(this,D)}toString(){return bs(this._root)}}function Ps(w,M){M.value._routerState=w,M.children.forEach(D=>Ps(w,D))}function bs(w){const M=w.children.length>0?` { ${w.children.map(bs).join(", ")} } `:"";return`${w.value}${M}`}function bi(w){if(w.snapshot){const M=w.snapshot,D=w._futureSnapshot;w.snapshot=D,yr(M.queryParams,D.queryParams)||w.queryParamsSubject.next(D.queryParams),M.fragment!==D.fragment&&w.fragmentSubject.next(D.fragment),yr(M.params,D.params)||w.paramsSubject.next(D.params),function Zr(w,M){if(w.length!==M.length)return!1;for(let D=0;D<w.length;++D)if(!yr(w[D],M[D]))return!1;return!0}(M.url,D.url)||w.urlSubject.next(D.url),yr(M.data,D.data)||w.dataSubject.next(D.data)}else w.snapshot=w._futureSnapshot,w.dataSubject.next(w._futureSnapshot.data)}function is(w,M){const D=yr(w.params,M.params)&&function jr(w,M){return Nr(w,M)&&w.every((D,x)=>yr(D.parameters,M[x].parameters))}(w.url,M.url);return D&&!(!w.parent!=!M.parent)&&(!w.parent||is(w.parent,M.parent))}function Qi(w){return"string"==typeof w.title||null===w.title}let Ei=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ht,this.activateEvents=new _._w7,this.deactivateEvents=new _._w7,this.attachEvents=new _._w7,this.detachEvents=new _._w7,this.parentContexts=(0,_.uUt)(Ar),this.location=(0,_.uUt)(_.y8U),this.changeDetector=(0,_.uUt)(_.kD9),this.environmentInjector=(0,_.uUt)(_.SIe),this.inputBinder=(0,_.uUt)(Rs,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(D){if(D.name){const{firstChange:x,previousValue:j}=D.name;if(x)return;this.isTrackedInParentContexts(j)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(j)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(D){return this.parentContexts.getContext(D)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const D=this.parentContexts.getContext(this.name);D?.route&&(D.attachRef?this.attach(D.attachRef,D.route):this.activateWith(D.route,D.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.OBp(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.OBp(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.OBp(4012,!1);this.location.detach();const D=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(D.instance),D}attach(D,x){this.activated=D,this._activatedRoute=x,this.location.insert(D.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(D.instance)}deactivate(){if(this.activated){const D=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(D)}}activateWith(D,x){if(this.isActivated)throw new _.OBp(4013,!1);this._activatedRoute=D;const j=this.location,fe=D.snapshot.component,it=this.parentContexts.getOrCreateContext(this.name).children,Je=new Ro(D,it,j.injector);this.activated=j.createComponent(fe,{index:j.length,injector:Je,environmentInjector:x??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275dir=_.Sc5({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_.SYr]})}return w})();class Ro{constructor(M,D,x){this.route=M,this.childContexts=D,this.parent=x}get(M,D){return M===Pi?this.route:M===Ar?this.childContexts:this.parent.get(M,D)}}const Rs=new _.UbH("");let cn=(()=>{class w{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(D){this.unsubscribeFromRouteData(D),this.subscribeToRouteData(D)}unsubscribeFromRouteData(D){this.outletDataSubscriptions.get(D)?.unsubscribe(),this.outletDataSubscriptions.delete(D)}subscribeToRouteData(D){const{activatedRoute:x}=D,j=We([x.queryParams,x.params,x.data]).pipe((0,ct.G)(([ee,fe,it],Je)=>(it={...ee,...fe,...it},0===Je?(0,Ee.of)(it):Promise.resolve(it)))).subscribe(ee=>{if(!D.isActivated||!D.activatedComponentRef||D.activatedRoute!==x||null===x.component)return void this.unsubscribeFromRouteData(D);const fe=(0,_.o9M)(x.component);if(fe)for(const{templateName:it}of fe.inputs)D.activatedComponentRef.setInput(it,ee[it]);else this.unsubscribeFromRouteData(D)});this.outletDataSubscriptions.set(D,j)}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=_.wxM({token:w,factory:w.\u0275fac})}return w})();function Ms(w,M,D){if(D&&w.shouldReuseRoute(M.value,D.value.snapshot)){const x=D.value;x._futureSnapshot=M.value;const j=function Wi(w,M,D){return M.children.map(x=>{for(const j of D.children)if(w.shouldReuseRoute(x.value,j.value.snapshot))return Ms(w,x,j);return Ms(w,x)})}(w,M,D);return new $i(x,j)}{if(w.shouldAttach(M.value)){const ee=w.retrieve(M.value);if(null!==ee){const fe=ee.route;return fe.value._futureSnapshot=M.value,fe.children=M.children.map(it=>Ms(w,it)),fe}}const x=function fa(w){return new Pi(new Ie.g(w.url),new Ie.g(w.params),new Ie.g(w.queryParams),new Ie.g(w.fragment),new Ie.g(w.data),w.outlet,w.component,w)}(M.value),j=M.children.map(ee=>Ms(w,ee));return new $i(x,j)}}const Oo="ngNavigationCancelingError";function di(w,M){const{redirectTo:D,navigationBehaviorOptions:x}=Hn(M)?{redirectTo:M,navigationBehaviorOptions:void 0}:M,j=ys(!1,si.Redirect);return j.url=D,j.navigationBehaviorOptions=x,j}function ys(w,M){const D=new Error(`NavigationCancelingError: ${w||""}`);return D[Oo]=!0,D.cancellationCode=M,D}function Hi(w){return!!w&&w[Oo]}let Os=(()=>{class w{static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275cmp=_.In1({type:w,selectors:[["ng-component"]],standalone:!0,features:[_.UHJ],decls:1,vars:0,template:function(x,j){1&x&&_.wR5(0,"router-outlet")},dependencies:[Ei],encapsulation:2})}return w})();function js(w){const M=w.children&&w.children.map(js),D=M?{...w,children:M}:{...w};return!D.component&&!D.loadComponent&&(M||D.loadChildren)&&D.outlet&&D.outlet!==Ht&&(D.component=Os),D}function fo(w){return w.outlet||Ht}function ga(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let M=w.parent;M;M=M.parent){const D=M.routeConfig;if(D?._loadedInjector)return D._loadedInjector;if(D?._injector)return D._injector}return null}class Ys{constructor(M,D,x,j,ee){this.routeReuseStrategy=M,this.futureState=D,this.currState=x,this.forwardEvent=j,this.inputBindingEnabled=ee}activate(M){const D=this.futureState._root,x=this.currState?this.currState._root:null;this.deactivateChildRoutes(D,x,M),bi(this.futureState.root),this.activateChildRoutes(D,x,M)}deactivateChildRoutes(M,D,x){const j=or(D);M.children.forEach(ee=>{const fe=ee.value.outlet;this.deactivateRoutes(ee,j[fe],x),delete j[fe]}),Object.values(j).forEach(ee=>{this.deactivateRouteAndItsChildren(ee,x)})}deactivateRoutes(M,D,x){const j=M.value,ee=D?D.value:null;if(j===ee)if(j.component){const fe=x.getContext(j.outlet);fe&&this.deactivateChildRoutes(M,D,fe.children)}else this.deactivateChildRoutes(M,D,x);else ee&&this.deactivateRouteAndItsChildren(D,x)}deactivateRouteAndItsChildren(M,D){M.value.component&&this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,D):this.deactivateRouteAndOutlet(M,D)}detachAndStoreRouteSubtree(M,D){const x=D.getContext(M.value.outlet),j=x&&M.value.component?x.children:D,ee=or(M);for(const fe of Object.values(ee))this.deactivateRouteAndItsChildren(fe,j);if(x&&x.outlet){const fe=x.outlet.detach(),it=x.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:fe,route:M,contexts:it})}}deactivateRouteAndOutlet(M,D){const x=D.getContext(M.value.outlet),j=x&&M.value.component?x.children:D,ee=or(M);for(const fe of Object.values(ee))this.deactivateRouteAndItsChildren(fe,j);x&&(x.outlet&&(x.outlet.deactivate(),x.children.onOutletDeactivated()),x.attachRef=null,x.route=null)}activateChildRoutes(M,D,x){const j=or(D);M.children.forEach(ee=>{this.activateRoutes(ee,j[ee.value.outlet],x),this.forwardEvent(new Bs(ee.value.snapshot))}),M.children.length&&this.forwardEvent(new ra(M.value.snapshot))}activateRoutes(M,D,x){const j=M.value,ee=D?D.value:null;if(bi(j),j===ee)if(j.component){const fe=x.getOrCreateContext(j.outlet);this.activateChildRoutes(M,D,fe.children)}else this.activateChildRoutes(M,D,x);else if(j.component){const fe=x.getOrCreateContext(j.outlet);if(this.routeReuseStrategy.shouldAttach(j.snapshot)){const it=this.routeReuseStrategy.retrieve(j.snapshot);this.routeReuseStrategy.store(j.snapshot,null),fe.children.onOutletReAttached(it.contexts),fe.attachRef=it.componentRef,fe.route=it.route.value,fe.outlet&&fe.outlet.attach(it.componentRef,it.route.value),bi(it.route.value),this.activateChildRoutes(M,null,fe.children)}else{const it=ga(j.snapshot);fe.attachRef=null,fe.route=j,fe.injector=it,fe.outlet&&fe.outlet.activateWith(j,fe.injector),this.activateChildRoutes(M,null,fe.children)}}else this.activateChildRoutes(M,null,x)}}class G{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class z{constructor(M,D){this.component=M,this.route=D}}function F(w,M,D){const x=w._root;return un(x,M?M._root:null,D,[x.value])}function ve(w,M){const D=Symbol(),x=M.get(w,D);return x===D?"function"!=typeof w||(0,_.K_M)(w)?M.get(w):w:x}function un(w,M,D,x,j={canDeactivateChecks:[],canActivateChecks:[]}){const ee=or(M);return w.children.forEach(fe=>{(function Qn(w,M,D,x,j={canDeactivateChecks:[],canActivateChecks:[]}){const ee=w.value,fe=M?M.value:null,it=D?D.getContext(w.value.outlet):null;if(fe&&ee.routeConfig===fe.routeConfig){const Je=function vs(w,M,D){if("function"==typeof D)return D(w,M);switch(D){case"pathParamsChange":return!Nr(w.url,M.url);case"pathParamsOrQueryParamsChange":return!Nr(w.url,M.url)||!yr(w.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!is(w,M)||!yr(w.queryParams,M.queryParams);default:return!is(w,M)}}(fe,ee,ee.routeConfig.runGuardsAndResolvers);Je?j.canActivateChecks.push(new G(x)):(ee.data=fe.data,ee._resolvedData=fe._resolvedData),un(w,M,ee.component?it?it.children:null:D,x,j),Je&&it&&it.outlet&&it.outlet.isActivated&&j.canDeactivateChecks.push(new z(it.outlet.component,fe))}else fe&&os(M,it,j),j.canActivateChecks.push(new G(x)),un(w,null,ee.component?it?it.children:null:D,x,j)})(fe,ee[fe.value.outlet],D,x.concat([fe.value]),j),delete ee[fe.value.outlet]}),Object.entries(ee).forEach(([fe,it])=>os(it,D.getContext(fe),j)),j}function os(w,M,D){const x=or(w),j=w.value;Object.entries(x).forEach(([ee,fe])=>{os(fe,j.component?M?M.children.getContext(ee):null:M,D)}),D.canDeactivateChecks.push(new z(j.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,j))}function Ns(w){return"function"==typeof w}function Ma(w){return w instanceof Ce.G||"EmptyError"===w?.name}const Fr=Symbol("INITIAL_VALUE");function Qs(){return(0,ct.G)(w=>We(w.map(M=>M.pipe((0,Nt.U)(1),(0,Kt.W)(Fr)))).pipe((0,Rt.k)(M=>{for(const D of M)if(!0!==D){if(D===Fr)return Fr;if(!1===D||D instanceof Mr)return D}return!0}),(0,sn.I)(M=>M!==Fr),(0,Nt.U)(1)))}function ds(w){return(0,rt.W)((0,Ue.y)(M=>{if(Hn(M))throw di(0,M)}),(0,Rt.k)(M=>!0===M))}class Co{constructor(M){this.segmentGroup=M||null}}class No extends Error{constructor(M){super(),this.urlTree=M}}function Xs(w){return me(new Co(w))}class Bc{constructor(M,D){this.urlSerializer=M,this.urlTree=D}lineralizeSegments(M,D){let x=[],j=D.root;for(;;){if(x=x.concat(j.segments),0===j.numberOfChildren)return(0,Ee.of)(x);if(j.numberOfChildren>1||!j.children[Ht])return me(new _.OBp(4e3,!1));j=j.children[Ht]}}applyRedirectCommands(M,D,x){const j=this.applyRedirectCreateUrlTree(D,this.urlSerializer.parse(D),M,x);if(D.startsWith("/"))throw new No(j);return j}applyRedirectCreateUrlTree(M,D,x,j){const ee=this.createSegmentGroup(M,D.root,x,j);return new Mr(ee,this.createQueryParams(D.queryParams,this.urlTree.queryParams),D.fragment)}createQueryParams(M,D){const x={};return Object.entries(M).forEach(([j,ee])=>{if("string"==typeof ee&&ee.startsWith(":")){const it=ee.substring(1);x[j]=D[it]}else x[j]=ee}),x}createSegmentGroup(M,D,x,j){const ee=this.createSegments(M,D.segments,x,j);let fe={};return Object.entries(D.children).forEach(([it,Je])=>{fe[it]=this.createSegmentGroup(M,Je,x,j)}),new Gn(ee,fe)}createSegments(M,D,x,j){return D.map(ee=>ee.path.startsWith(":")?this.findPosParam(M,ee,j):this.findOrReturn(ee,x))}findPosParam(M,D,x){const j=x[D.path.substring(1)];if(!j)throw new _.OBp(4001,!1);return j}findOrReturn(M,D){let x=0;for(const j of D){if(j.path===M.path)return D.splice(x),j;x++}return M}}const $s={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Mn(w,M,D,x,j){const ee=Zs(w,M,D);return ee.matched?(x=function Fi(w,M){return w.providers&&!w._injector&&(w._injector=(0,_.SIz)(w.providers,M,`Route: ${w.path}`)),w._injector??M}(M,x),function Js(w,M,D,x){const j=M.canMatch;if(!j||0===j.length)return(0,Ee.of)(!0);const ee=j.map(fe=>{const it=ve(fe,w);return yn(function ai(w){return w&&Ns(w.canMatch)}(it)?it.canMatch(M,D):(0,_.SMS)(w,()=>it(M,D)))});return(0,Ee.of)(ee).pipe(Qs(),ds())}(x,M,D).pipe((0,Rt.k)(fe=>!0===fe?ee:{...$s}))):(0,Ee.of)(ee)}function Zs(w,M,D){if("**"===M.path)return function hr(w){return{matched:!0,parameters:w.length>0?In(w).parameters:{},consumedSegments:w,remainingSegments:[],positionalParamSegments:{}}}(D);if(""===M.path)return"full"===M.pathMatch&&(w.hasChildren()||D.length>0)?{...$s}:{matched:!0,consumedSegments:[],remainingSegments:D,parameters:{},positionalParamSegments:{}};const j=(M.matcher||kn)(D,w,M);if(!j)return{...$s};const ee={};Object.entries(j.posParams??{}).forEach(([it,Je])=>{ee[it]=Je.path});const fe=j.consumed.length>0?{...ee,...j.consumed[j.consumed.length-1].parameters}:ee;return{matched:!0,consumedSegments:j.consumed,remainingSegments:D.slice(j.consumed.length),parameters:fe,positionalParamSegments:j.posParams??{}}}function _a(w,M,D,x){return D.length>0&&function wo(w,M,D){return D.some(x=>Es(w,M,x)&&fo(x)!==Ht)}(w,D,x)?{segmentGroup:new Gn(M,qo(x,new Gn(D,w.children))),slicedSegments:[]}:0===D.length&&function Ko(w,M,D){return D.some(x=>Es(w,M,x))}(w,D,x)?{segmentGroup:new Gn(w.segments,mc(w,D,x,w.children)),slicedSegments:D}:{segmentGroup:new Gn(w.segments,w.children),slicedSegments:D}}function mc(w,M,D,x){const j={};for(const ee of D)if(Es(w,M,ee)&&!x[fo(ee)]){const fe=new Gn([],{});j[fo(ee)]=fe}return{...x,...j}}function qo(w,M){const D={};D[Ht]=M;for(const x of w)if(""===x.path&&fo(x)!==Ht){const j=new Gn([],{});D[fo(x)]=j}return D}function Es(w,M,D){return(!(w.hasChildren()||M.length>0)||"full"!==D.pathMatch)&&""===D.path}class Fs{}class ar{constructor(M,D,x,j,ee,fe,it){this.injector=M,this.configLoader=D,this.rootComponentType=x,this.config=j,this.urlTree=ee,this.paramsInheritanceStrategy=fe,this.urlSerializer=it,this.applyRedirects=new Bc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(M){return new _.OBp(4002,`'${M.segmentGroup}'`)}recognize(){const M=_a(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(M).pipe((0,Rt.k)(D=>{const x=new qs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ht,this.rootComponentType,null,{}),j=new $i(x,D),ee=new li("",j),fe=function Yn(w,M,D=null,x=null){return lr(Kr(w),M,D,x)}(x,[],this.urlTree.queryParams,this.urlTree.fragment);return fe.queryParams=this.urlTree.queryParams,ee.url=this.urlSerializer.serialize(fe),this.inheritParamsAndData(ee._root,null),{state:ee,tree:fe}}))}match(M){return this.processSegmentGroup(this.injector,this.config,M,Ht).pipe((0,at.a)(x=>{if(x instanceof No)return this.urlTree=x.urlTree,this.match(x.urlTree.root);throw x instanceof Co?this.noMatchError(x):x}))}inheritParamsAndData(M,D){const x=M.value,j=ho(x,D,this.paramsInheritanceStrategy);x.params=Object.freeze(j.params),x.data=Object.freeze(j.data),M.children.forEach(ee=>this.inheritParamsAndData(ee,x))}processSegmentGroup(M,D,x,j){return 0===x.segments.length&&x.hasChildren()?this.processChildren(M,D,x):this.processSegment(M,D,x,x.segments,j,!0).pipe((0,Rt.k)(ee=>ee instanceof $i?[ee]:[]))}processChildren(M,D,x){const j=[];for(const ee of Object.keys(x.children))"primary"===ee?j.unshift(ee):j.push(ee);return(0,ge.Q)(j).pipe((0,tt.m)(ee=>{const fe=x.children[ee],it=function pa(w,M){const D=w.filter(x=>fo(x)===M);return D.push(...w.filter(x=>fo(x)!==M)),D}(D,ee);return this.processSegmentGroup(M,it,fe,ee)}),(0,st.K)((ee,fe)=>(ee.push(...fe),ee)),(0,Dt.G)(null),function De(w,M){const D=arguments.length>=2;return x=>x.pipe(w?(0,sn.I)((j,ee)=>w(j,ee,x)):je.Z,ze(1),D?(0,Dt.G)(M):(0,xt._)(()=>new Ce.G))}(),(0,Re.O)(ee=>{if(null===ee)return Xs(x);const fe=Or(ee);return function Qa(w){w.sort((M,D)=>M.value.outlet===Ht?-1:D.value.outlet===Ht?1:M.value.outlet.localeCompare(D.value.outlet))}(fe),(0,Ee.of)(fe)}))}processSegment(M,D,x,j,ee,fe){return(0,ge.Q)(D).pipe((0,tt.m)(it=>this.processSegmentAgainstRoute(it._injector??M,D,it,x,j,ee,fe).pipe((0,at.a)(Je=>{if(Je instanceof Co)return(0,Ee.of)(null);throw Je}))),(0,He.K)(it=>!!it),(0,at.a)(it=>{if(Ma(it))return function hs(w,M,D){return 0===M.length&&!w.children[D]}(x,j,ee)?(0,Ee.of)(new Fs):Xs(x);throw it}))}processSegmentAgainstRoute(M,D,x,j,ee,fe,it){return function vu(w,M,D,x){return!!(fo(w)===x||x!==Ht&&Es(M,D,w))&&Zs(M,w,D).matched}(x,j,ee,fe)?void 0===x.redirectTo?this.matchSegmentAgainstRoute(M,j,x,ee,fe):this.allowRedirects&&it?this.expandSegmentAgainstRouteUsingRedirect(M,j,D,x,ee,fe):Xs(j):Xs(j)}expandSegmentAgainstRouteUsingRedirect(M,D,x,j,ee,fe){const{matched:it,consumedSegments:Je,positionalParamSegments:Gt,remainingSegments:jt}=Zs(D,j,ee);if(!it)return Xs(D);j.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Xn=this.applyRedirects.applyRedirectCommands(Je,j.redirectTo,Gt);return this.applyRedirects.lineralizeSegments(j,Xn).pipe((0,Re.O)(Ri=>this.processSegment(M,x,D,Ri.concat(jt),fe,!1)))}matchSegmentAgainstRoute(M,D,x,j,ee){const fe=Mn(D,x,j,M);return"**"===x.path&&(D.children={}),fe.pipe((0,ct.G)(it=>it.matched?this.getChildConfig(M=x._injector??M,x,j).pipe((0,ct.G)(({routes:Je})=>{const Gt=x._loadedInjector??M,{consumedSegments:jt,remainingSegments:Xn,parameters:Ri}=it,qi=new qs(jt,Ri,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function ya(w){return w.data||{}}(x),fo(x),x.component??x._loadedComponent??null,x,function po(w){return w.resolve||{}}(x)),{segmentGroup:Fa,slicedSegments:La}=_a(D,jt,Xn,Je);if(0===La.length&&Fa.hasChildren())return this.processChildren(Gt,Je,Fa).pipe((0,Rt.k)(Do=>null===Do?null:new $i(qi,Do)));if(0===Je.length&&0===La.length)return(0,Ee.of)(new $i(qi,[]));const mo=fo(x)===ee;return this.processSegment(Gt,Je,Fa,La,mo?Ht:ee,!0).pipe((0,Rt.k)(Do=>new $i(qi,Do instanceof $i?[Do]:[])))})):Xs(D)))}getChildConfig(M,D,x){return D.children?(0,Ee.of)({routes:D.children,injector:M}):D.loadChildren?void 0!==D._loadedRoutes?(0,Ee.of)({routes:D._loadedRoutes,injector:D._loadedInjector}):function gc(w,M,D,x){const j=M.canLoad;if(void 0===j||0===j.length)return(0,Ee.of)(!0);const ee=j.map(fe=>{const it=ve(fe,w);return yn(function Rn(w){return w&&Ns(w.canLoad)}(it)?it.canLoad(M,D):(0,_.SMS)(w,()=>it(M,D)))});return(0,Ee.of)(ee).pipe(Qs(),ds())}(M,D,x).pipe((0,Re.O)(j=>j?this.configLoader.loadChildren(M,D).pipe((0,Ue.y)(ee=>{D._loadedRoutes=ee.routes,D._loadedInjector=ee.injector})):function xa(w){return me(ys(!1,si.GuardRejected))}())):(0,Ee.of)({routes:[],injector:M})}}function eo(w){const M=w.value.routeConfig;return M&&""===M.path}function Or(w){const M=[],D=new Set;for(const x of w){if(!eo(x)){M.push(x);continue}const j=M.find(ee=>x.value.routeConfig===ee.value.routeConfig);void 0!==j?(j.children.push(...x.children),D.add(j)):M.push(x)}for(const x of D){const j=Or(x.children);M.push(new $i(x.value,j))}return M.filter(x=>!D.has(x))}function Ja(w){const M=w.children.map(D=>Ja(D)).flat();return[w,...M]}function hi(w){return(0,ct.G)(M=>{const D=w(M);return D?(0,ge.Q)(D).pipe((0,Rt.k)(()=>M)):(0,Ee.of)(M)})}let Ls=(()=>{class w{buildTitle(D){let x,j=D.root;for(;void 0!==j;)x=this.getResolvedTitleForRoute(j)??x,j=j.children.find(ee=>ee.outlet===Ht);return x}getResolvedTitleForRoute(D){return D.data[wr]}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=_.wxM({token:w,factory:()=>(0,_.uUt)(Er),providedIn:"root"})}return w})(),Er=(()=>{class w extends Ls{constructor(D){super(),this.title=D}updateTitle(D){const x=this.buildTitle(D);void 0!==x&&this.title.setTitle(x)}static#e=this.\u0275fac=function(x){return new(x||w)(_.CoB(Rr.OY))};static#t=this.\u0275prov=_.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const A=new _.UbH("",{providedIn:"root",factory:()=>({})}),q=new _.UbH("");let N=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,_.uUt)(_.ESV)}loadComponent(D){if(this.componentLoaders.get(D))return this.componentLoaders.get(D);if(D._loadedComponent)return(0,Ee.of)(D._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(D);const x=yn(D.loadComponent()).pipe((0,Rt.k)(et),(0,Ue.y)(ee=>{this.onLoadEndListener&&this.onLoadEndListener(D),D._loadedComponent=ee}),(0,yt.U)(()=>{this.componentLoaders.delete(D)})),j=new bt(x,()=>new Ut.E).pipe(Ct());return this.componentLoaders.set(D,j),j}loadChildren(D,x){if(this.childrenLoaders.get(x))return this.childrenLoaders.get(x);if(x._loadedRoutes)return(0,Ee.of)({routes:x._loadedRoutes,injector:x._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(x);const ee=function W(w,M,D,x){return yn(w.loadChildren()).pipe((0,Rt.k)(et),(0,Re.O)(j=>j instanceof _.obV||Array.isArray(j)?(0,Ee.of)(j):(0,ge.Q)(M.compileModuleAsync(j))),(0,Rt.k)(j=>{x&&x(w);let ee,fe,it=!1;return Array.isArray(j)?(fe=j,!0):(ee=j.create(D).injector,fe=ee.get(q,[],{optional:!0,self:!0}).flat()),{routes:fe.map(js),injector:ee}}))}(x,this.compiler,D,this.onLoadEndListener).pipe((0,yt.U)(()=>{this.childrenLoaders.delete(x)})),fe=new bt(ee,()=>new Ut.E).pipe(Ct());return this.childrenLoaders.set(x,fe),fe}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=_.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function et(w){return function de(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let pt=(()=>{class w{static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=_.wxM({token:w,factory:()=>(0,_.uUt)(ln),providedIn:"root"})}return w})(),ln=(()=>{class w{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,x){return D}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=_.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const Xr=new _.UbH(""),Gr=new _.UbH("");function ni(w,M,D){const x=w.get(Gr),j=w.get(ke.Ud);return w.get(_.WW2).runOutsideAngular(()=>{if(!j.startViewTransition||x.skipNextTransition)return x.skipNextTransition=!1,Promise.resolve();let ee;const fe=new Promise(Gt=>{ee=Gt}),it=j.startViewTransition(()=>(ee(),function Kn(w){return new Promise(M=>{(0,_.I44)(M,{injector:w})})}(w))),{onViewTransitionCreated:Je}=x;return Je&&(0,_.SMS)(w,()=>Je({transition:it,from:M,to:D})),fe})}let ci=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ut.E,this.transitionAbortSubject=new Ut.E,this.configLoader=(0,_.uUt)(N),this.environmentInjector=(0,_.uUt)(_.SIe),this.urlSerializer=(0,_.uUt)(pi),this.rootContexts=(0,_.uUt)(Ar),this.location=(0,_.uUt)(ke.oB),this.inputBindingEnabled=null!==(0,_.uUt)(Rs,{optional:!0}),this.titleStrategy=(0,_.uUt)(Ls),this.options=(0,_.uUt)(A,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,_.uUt)(pt),this.createViewTransition=(0,_.uUt)(Xr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,Ee.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=j=>this.events.next(new Ss(j)),this.configLoader.onLoadStartListener=j=>this.events.next(new $r(j))}complete(){this.transitions?.complete()}handleNavigationRequest(D){const x=++this.navigationId;this.transitions?.next({...this.transitions.value,...D,id:x})}setupNavigations(D,x,j){return this.transitions=new Ie.g({id:0,currentUrlTree:x,currentRawUrl:x,extractedUrl:this.urlHandlingStrategy.extract(x),urlAfterRedirects:this.urlHandlingStrategy.extract(x),rawUrl:x,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ei,restoredState:null,currentSnapshot:j.snapshot,targetSnapshot:null,currentRouterState:j,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,sn.I)(ee=>0!==ee.id),(0,Rt.k)(ee=>({...ee,extractedUrl:this.urlHandlingStrategy.extract(ee.rawUrl)})),(0,ct.G)(ee=>{this.currentTransition=ee;let fe=!1,it=!1;return(0,Ee.of)(ee).pipe((0,Ue.y)(Je=>{this.currentNavigation={id:Je.id,initialUrl:Je.rawUrl,extractedUrl:Je.extractedUrl,trigger:Je.source,extras:Je.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ct.G)(Je=>{const Gt=!D.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!Gt&&"reload"!==(Je.extras.onSameUrlNavigation??D.onSameUrlNavigation)){const Xn="";return this.events.next(new Ai(Je.id,this.urlSerializer.serialize(Je.rawUrl),Xn,Yr.IgnoredSameUrlNavigation)),Je.resolve(null),Ot.k}if(this.urlHandlingStrategy.shouldProcessUrl(Je.rawUrl))return(0,Ee.of)(Je).pipe((0,ct.G)(Xn=>{const Ri=this.transitions?.getValue();return this.events.next(new rs(Xn.id,this.urlSerializer.serialize(Xn.extractedUrl),Xn.source,Xn.restoredState)),Ri!==this.transitions?.getValue()?Ot.k:Promise.resolve(Xn)}),function to(w,M,D,x,j,ee){return(0,Re.O)(fe=>function jc(w,M,D,x,j,ee,fe="emptyOnly"){return new ar(w,M,D,x,j,fe,ee).recognize()}(w,M,D,x,fe.extractedUrl,j,ee).pipe((0,Rt.k)(({state:it,tree:Je})=>({...fe,targetSnapshot:it,urlAfterRedirects:Je}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,D.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Ue.y)(Xn=>{ee.targetSnapshot=Xn.targetSnapshot,ee.urlAfterRedirects=Xn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Xn.urlAfterRedirects};const Ri=new ji(Xn.id,this.urlSerializer.serialize(Xn.extractedUrl),this.urlSerializer.serialize(Xn.urlAfterRedirects),Xn.targetSnapshot);this.events.next(Ri)}));if(Gt&&this.urlHandlingStrategy.shouldProcessUrl(Je.currentRawUrl)){const{id:Xn,extractedUrl:Ri,source:qi,restoredState:Fa,extras:La}=Je,mo=new rs(Xn,this.urlSerializer.serialize(Ri),qi,Fa);this.events.next(mo);const Do=Gi(this.rootComponentType).snapshot;return this.currentTransition=ee={...Je,targetSnapshot:Do,urlAfterRedirects:Ri,extras:{...La,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Ri,(0,Ee.of)(ee)}{const Xn="";return this.events.next(new Ai(Je.id,this.urlSerializer.serialize(Je.extractedUrl),Xn,Yr.IgnoredByUrlHandlingStrategy)),Je.resolve(null),Ot.k}}),(0,Ue.y)(Je=>{const Gt=new Go(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects),Je.targetSnapshot);this.events.next(Gt)}),(0,Rt.k)(Je=>(this.currentTransition=ee={...Je,guards:F(Je.targetSnapshot,Je.currentSnapshot,this.rootContexts)},ee)),function xo(w,M){return(0,Re.O)(D=>{const{targetSnapshot:x,currentSnapshot:j,guards:{canActivateChecks:ee,canDeactivateChecks:fe}}=D;return 0===fe.length&&0===ee.length?(0,Ee.of)({...D,guardsResult:!0}):function dr(w,M,D,x){return(0,ge.Q)(w).pipe((0,Re.O)(j=>function Io(w,M,D,x,j){const ee=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!ee||0===ee.length)return(0,Ee.of)(!0);const fe=ee.map(it=>{const Je=ga(M)??j,Gt=ve(it,Je);return yn(function Ho(w){return w&&Ns(w.canDeactivate)}(Gt)?Gt.canDeactivate(w,M,D,x):(0,_.SMS)(Je,()=>Gt(w,M,D,x))).pipe((0,He.K)())});return(0,Ee.of)(fe).pipe(Qs())}(j.component,j.route,D,M,x)),(0,He.K)(j=>!0!==j,!0))}(fe,x,j,w).pipe((0,Re.O)(it=>it&&function Uc(w){return"boolean"==typeof w}(it)?function Un(w,M,D,x){return(0,ge.Q)(M).pipe((0,tt.m)(j=>(0,ht.W)(function ma(w,M){return null!==w&&M&&M(new oi(w)),(0,Ee.of)(!0)}(j.route.parent,x),function Ji(w,M){return null!==w&&M&&M(new ia(w)),(0,Ee.of)(!0)}(j.route,x),function ls(w,M,D){const x=M[M.length-1],ee=M.slice(0,M.length-1).reverse().map(fe=>function te(w){const M=w.routeConfig?w.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:w,guards:M}:null}(fe)).filter(fe=>null!==fe).map(fe=>Ze(()=>{const it=fe.guards.map(Je=>{const Gt=ga(fe.node)??D,jt=ve(Je,Gt);return yn(function gn(w){return w&&Ns(w.canActivateChild)}(jt)?jt.canActivateChild(x,w):(0,_.SMS)(Gt,()=>jt(x,w))).pipe((0,He.K)())});return(0,Ee.of)(it).pipe(Qs())}));return(0,Ee.of)(ee).pipe(Qs())}(w,j.path,D),function ks(w,M,D){const x=M.routeConfig?M.routeConfig.canActivate:null;if(!x||0===x.length)return(0,Ee.of)(!0);const j=x.map(ee=>Ze(()=>{const fe=ga(M)??D,it=ve(ee,fe);return yn(function Sr(w){return w&&Ns(w.canActivate)}(it)?it.canActivate(M,w):(0,_.SMS)(fe,()=>it(M,w))).pipe((0,He.K)())}));return(0,Ee.of)(j).pipe(Qs())}(w,j.route,D))),(0,He.K)(j=>!0!==j,!0))}(x,ee,w,M):(0,Ee.of)(it)),(0,Rt.k)(it=>({...D,guardsResult:it})))})}(this.environmentInjector,Je=>this.events.next(Je)),(0,Ue.y)(Je=>{if(ee.guardsResult=Je.guardsResult,Hn(Je.guardsResult))throw di(0,Je.guardsResult);const Gt=new Ka(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects),Je.targetSnapshot,!!Je.guardsResult);this.events.next(Gt)}),(0,sn.I)(Je=>!!Je.guardsResult||(this.cancelNavigationTransition(Je,"",si.GuardRejected),!1)),hi(Je=>{if(Je.guards.canActivateChecks.length)return(0,Ee.of)(Je).pipe((0,Ue.y)(Gt=>{const jt=new Zn(Gt.id,this.urlSerializer.serialize(Gt.extractedUrl),this.urlSerializer.serialize(Gt.urlAfterRedirects),Gt.targetSnapshot);this.events.next(jt)}),(0,ct.G)(Gt=>{let jt=!1;return(0,Ee.of)(Gt).pipe(function $c(w,M){return(0,Re.O)(D=>{const{targetSnapshot:x,guards:{canActivateChecks:j}}=D;if(!j.length)return(0,Ee.of)(D);const ee=new Set(j.map(Je=>Je.route)),fe=new Set;for(const Je of ee)if(!fe.has(Je))for(const Gt of Ja(Je))fe.add(Gt);let it=0;return(0,ge.Q)(fe).pipe((0,tt.m)(Je=>ee.has(Je)?function ti(w,M,D,x){const j=w.routeConfig,ee=w._resolve;return void 0!==j?.title&&!Qi(j)&&(ee[wr]=j.title),function Gc(w,M,D,x){const j=vi(w);if(0===j.length)return(0,Ee.of)({});const ee={};return(0,ge.Q)(j).pipe((0,Re.O)(fe=>function Is(w,M,D,x){const j=ga(M)??x,ee=ve(w,j);return yn(ee.resolve?ee.resolve(M,D):(0,_.SMS)(j,()=>ee(M,D)))}(w[fe],M,D,x).pipe((0,He.K)(),(0,Ue.y)(it=>{ee[fe]=it}))),ze(1),function dt(w){return(0,Rt.k)(()=>w)}(ee),(0,at.a)(fe=>Ma(fe)?Ot.k:me(fe)))}(ee,w,M,x).pipe((0,Rt.k)(fe=>(w._resolvedData=fe,w.data=ho(w,w.parent,D).resolve,null)))}(Je,x,w,M):(Je.data=ho(Je,Je.parent,w).resolve,(0,Ee.of)(void 0))),(0,Ue.y)(()=>it++),ze(1),(0,Re.O)(Je=>it===fe.size?(0,Ee.of)(D):Ot.k))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Ue.y)({next:()=>jt=!0,complete:()=>{jt||this.cancelNavigationTransition(Gt,"",si.NoDataFromResolver)}}))}),(0,Ue.y)(Gt=>{const jt=new Si(Gt.id,this.urlSerializer.serialize(Gt.extractedUrl),this.urlSerializer.serialize(Gt.urlAfterRedirects),Gt.targetSnapshot);this.events.next(jt)}))}),hi(Je=>{const Gt=jt=>{const Xn=[];jt.routeConfig?.loadComponent&&!jt.routeConfig._loadedComponent&&Xn.push(this.configLoader.loadComponent(jt.routeConfig).pipe((0,Ue.y)(Ri=>{jt.component=Ri}),(0,Rt.k)(()=>{})));for(const Ri of jt.children)Xn.push(...Gt(Ri));return Xn};return We(Gt(Je.targetSnapshot.root)).pipe((0,Dt.G)(null),(0,Nt.U)(1))}),hi(()=>this.afterPreactivation()),(0,ct.G)(()=>{const{currentSnapshot:Je,targetSnapshot:Gt}=ee,jt=this.createViewTransition?.(this.environmentInjector,Je.root,Gt.root);return jt?(0,ge.Q)(jt).pipe((0,Rt.k)(()=>ee)):(0,Ee.of)(ee)}),(0,Rt.k)(Je=>{const Gt=function Mo(w,M,D){const x=Ms(w,M._root,D?D._root:void 0);return new ki(x,M)}(D.routeReuseStrategy,Je.targetSnapshot,Je.currentRouterState);return this.currentTransition=ee={...Je,targetRouterState:Gt},this.currentNavigation.targetRouterState=Gt,ee}),(0,Ue.y)(()=>{this.events.next(new bo)}),((w,M,D,x)=>(0,Rt.k)(j=>(new Ys(M,j.targetRouterState,j.currentRouterState,D,x).activate(w),j)))(this.rootContexts,D.routeReuseStrategy,Je=>this.events.next(Je),this.inputBindingEnabled),(0,Nt.U)(1),(0,Ue.y)({next:Je=>{fe=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Di(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects))),this.titleStrategy?.updateTitle(Je.targetRouterState.snapshot),Je.resolve(!0)},complete:()=>{fe=!0}}),function Yt(w){return(0,Me.i)((M,D)=>{(0,_t.Uv)(w).subscribe((0,Se.e)(D,()=>D.complete(),ut.K)),!D.closed&&M.subscribe(D)})}(this.transitionAbortSubject.pipe((0,Ue.y)(Je=>{throw Je}))),(0,yt.U)(()=>{!fe&&!it&&this.cancelNavigationTransition(ee,"",si.SupersededByNewNavigation),this.currentTransition?.id===ee.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,at.a)(Je=>{if(it=!0,Hi(Je))this.events.next(new As(ee.id,this.urlSerializer.serialize(ee.extractedUrl),Je.message,Je.cancellationCode)),function ss(w){return Hi(w)&&Hn(w.url)}(Je)?this.events.next(new Qr(Je.url)):ee.resolve(!1);else{this.events.next(new $o(ee.id,this.urlSerializer.serialize(ee.extractedUrl),Je,ee.targetSnapshot??void 0));try{ee.resolve(D.errorHandler(Je))}catch(Gt){this.options.resolveNavigationPromiseOnError?ee.resolve(!1):ee.reject(Gt)}}return Ot.k}))}))}cancelNavigationTransition(D,x,j){const ee=new As(D.id,this.urlSerializer.serialize(D.extractedUrl),x,j);this.events.next(ee),D.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=_.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function Pr(w){return w!==ei}let as=(()=>{class w{static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=_.wxM({token:w,factory:()=>(0,_.uUt)(zi),providedIn:"root"})}return w})();class ko{shouldDetach(M){return!1}store(M,D){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,D){return M.routeConfig===D.routeConfig}}let zi=(()=>{class w extends ko{static#e=this.\u0275fac=(()=>{let D;return function(j){return(D||(D=_.otF(w)))(j||w)}})();static#t=this.\u0275prov=_.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),va=(()=>{class w{static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=_.wxM({token:w,factory:()=>(0,_.uUt)(Jn),providedIn:"root"})}return w})(),Jn=(()=>{class w extends va{constructor(){super(...arguments),this.location=(0,_.uUt)(ke.oB),this.urlSerializer=(0,_.uUt)(pi),this.options=(0,_.uUt)(A,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,_.uUt)(pt),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Mr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Gi(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(D){return this.location.subscribe(x=>{"popstate"===x.type&&D(x.url,x.state)})}handleRouterEvent(D,x){if(D instanceof rs)this.stateMemento=this.createStateMemento();else if(D instanceof Ai)this.rawUrlTree=x.initialUrl;else if(D instanceof ji){if("eager"===this.urlUpdateStrategy&&!x.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(x.finalUrl,x.initialUrl);this.setBrowserUrl(j,x)}}else D instanceof bo?(this.currentUrlTree=x.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(x.finalUrl,x.initialUrl),this.routerState=x.targetRouterState,"deferred"===this.urlUpdateStrategy&&(x.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,x))):D instanceof As&&(D.code===si.GuardRejected||D.code===si.NoDataFromResolver)?this.restoreHistory(x):D instanceof $o?this.restoreHistory(x,!0):D instanceof Di&&(this.lastSuccessfulId=D.id,this.currentPageId=this.browserPageId)}setBrowserUrl(D,x){const j=this.urlSerializer.serialize(D);if(this.location.isCurrentPathEqualTo(j)||x.extras.replaceUrl){const fe={...x.extras.state,...this.generateNgRouterState(x.id,this.browserPageId)};this.location.replaceState(j,"",fe)}else{const ee={...x.extras.state,...this.generateNgRouterState(x.id,this.browserPageId+1)};this.location.go(j,"",ee)}}restoreHistory(D,x=!1){if("computed"===this.canceledNavigationResolution){const ee=this.currentPageId-this.browserPageId;0!==ee?this.location.historyGo(ee):this.currentUrlTree===D.finalUrl&&0===ee&&(this.resetState(D),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(x&&this.resetState(D),this.resetUrlToCurrentUrlTree())}resetState(D){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,D.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(D,x){return"computed"===this.canceledNavigationResolution?{navigationId:D,\u0275routerPageId:x}:{navigationId:D}}static#e=this.\u0275fac=(()=>{let D;return function(j){return(D||(D=_.otF(w)))(j||w)}})();static#t=this.\u0275prov=_.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();var ui=function(w){return w[w.COMPLETE=0]="COMPLETE",w[w.FAILED=1]="FAILED",w[w.REDIRECTING=2]="REDIRECTING",w}(ui||{});function er(w,M){w.events.pipe((0,sn.I)(D=>D instanceof Di||D instanceof As||D instanceof $o||D instanceof Ai),(0,Rt.k)(D=>D instanceof Di||D instanceof Ai?ui.COMPLETE:D instanceof As&&(D.code===si.Redirect||D.code===si.SupersededByNewNavigation)?ui.REDIRECTING:ui.FAILED),(0,sn.I)(D=>D!==ui.REDIRECTING),(0,Nt.U)(1)).subscribe(()=>{M()})}function To(w){throw w}const Xa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Lt={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Jr=(()=>{class w{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,_.uUt)(_.oPY),this.stateManager=(0,_.uUt)(va),this.options=(0,_.uUt)(A,{optional:!0})||{},this.pendingTasks=(0,_.uUt)(_.g9Y),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,_.uUt)(ci),this.urlSerializer=(0,_.uUt)(pi),this.location=(0,_.uUt)(ke.oB),this.urlHandlingStrategy=(0,_.uUt)(pt),this._events=new Ut.E,this.errorHandler=this.options.errorHandler||To,this.navigated=!1,this.routeReuseStrategy=(0,_.uUt)(as),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,_.uUt)(q,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,_.uUt)(Rs,{optional:!0}),this.eventsSubscription=new At.wH,this.isNgZoneEnabled=(0,_.uUt)(_.WW2)instanceof _.WW2&&_.WW2.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:D=>{this.console.warn(D)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const D=this.navigationTransitions.events.subscribe(x=>{try{const j=this.navigationTransitions.currentTransition,ee=this.navigationTransitions.currentNavigation;if(null!==j&&null!==ee)if(this.stateManager.handleRouterEvent(x,ee),x instanceof As&&x.code!==si.Redirect&&x.code!==si.SupersededByNewNavigation)this.navigated=!0;else if(x instanceof Di)this.navigated=!0;else if(x instanceof Qr){const fe=this.urlHandlingStrategy.merge(x.url,j.currentRawUrl),it={info:j.extras.info,skipLocationChange:j.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Pr(j.source)};this.scheduleNavigation(fe,ei,null,it,{resolve:j.resolve,reject:j.reject,promise:j.promise})}(function Za(w){return!(w instanceof bo||w instanceof Qr)})(x)&&this._events.next(x)}catch(j){this.navigationTransitions.transitionAbortSubject.next(j)}});this.eventsSubscription.add(D)}resetRootComponentType(D){this.routerState.root.component=D,this.navigationTransitions.rootComponentType=D}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ei,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((D,x)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(D,"popstate",x)},0)})}navigateToSyncWithBrowser(D,x,j){const ee={replaceUrl:!0},fe=j?.navigationId?j:null;if(j){const Je={...j};delete Je.navigationId,delete Je.\u0275routerPageId,0!==Object.keys(Je).length&&(ee.state=Je)}const it=this.parseUrl(D);this.scheduleNavigation(it,x,fe,ee)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(D){this.config=D.map(js),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(D,x={}){const{relativeTo:j,queryParams:ee,fragment:fe,queryParamsHandling:it,preserveFragment:Je}=x,Gt=Je?this.currentUrlTree.fragment:fe;let Xn,jt=null;switch(it){case"merge":jt={...this.currentUrlTree.queryParams,...ee};break;case"preserve":jt=this.currentUrlTree.queryParams;break;default:jt=ee||null}null!==jt&&(jt=this.removeEmptyProps(jt));try{Xn=Kr(j?j.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof D[0]||!D[0].startsWith("/"))&&(D=[]),Xn=this.currentUrlTree.root}return lr(Xn,D,jt,Gt??null)}navigateByUrl(D,x={skipLocationChange:!1}){const j=Hn(D)?D:this.parseUrl(D),ee=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(ee,ei,null,x)}navigate(D,x={skipLocationChange:!1}){return function no(w){for(let M=0;M<w.length;M++)if(null==w[M])throw new _.OBp(4008,!1)}(D),this.navigateByUrl(this.createUrlTree(D,x),x)}serializeUrl(D){return this.urlSerializer.serialize(D)}parseUrl(D){try{return this.urlSerializer.parse(D)}catch{return this.urlSerializer.parse("/")}}isActive(D,x){let j;if(j=!0===x?{...Xa}:!1===x?{...Lt}:x,Hn(D))return qr(this.currentUrlTree,D,j);const ee=this.parseUrl(D);return qr(this.currentUrlTree,ee,j)}removeEmptyProps(D){return Object.entries(D).reduce((x,[j,ee])=>(null!=ee&&(x[j]=ee),x),{})}scheduleNavigation(D,x,j,ee,fe){if(this.disposed)return Promise.resolve(!1);let it,Je,Gt;fe?(it=fe.resolve,Je=fe.reject,Gt=fe.promise):Gt=new Promise((Xn,Ri)=>{it=Xn,Je=Ri});const jt=this.pendingTasks.add();return er(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(jt))}),this.navigationTransitions.handleNavigationRequest({source:x,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:D,extras:ee,resolve:it,reject:Je,promise:Gt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Gt.catch(Xn=>Promise.reject(Xn))}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=_.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),on=(()=>{class w{constructor(D,x,j,ee,fe,it){this.router=D,this.route=x,this.tabIndexAttribute=j,this.renderer=ee,this.el=fe,this.locationStrategy=it,this.href=null,this.commands=null,this.onChanges=new Ut.E,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Je=fe.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Je||"area"===Je,this.isAnchorElement?this.subscription=D.events.subscribe(Gt=>{Gt instanceof Di&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(D){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",D)}ngOnChanges(D){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(D){null!=D?(this.commands=Array.isArray(D)?D:[D],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(D,x,j,ee,fe){const it=this.urlTree;return!!(null===it||this.isAnchorElement&&(0!==D||x||j||ee||fe||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(it,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const D=this.urlTree;this.href=null!==D&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(D)):null;const x=null===this.href?null:(0,_.YFg)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",x)}applyAttributeValue(D,x){const j=this.renderer,ee=this.el.nativeElement;null!==x?j.setAttribute(ee,D,x):j.removeAttribute(ee,D)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(x){return new(x||w)(_.GI1(Jr),_.GI1(Pi),_.gJ8("tabindex"),_.GI1(_.q87),_.GI1(_.GMv),_.GI1(ke.Qd))};static#t=this.\u0275dir=_.Sc5({type:w,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(x,j){1&x&&_.qCj("click",function(fe){return j.onClick(fe.button,fe.ctrlKey,fe.shiftKey,fe.altKey,fe.metaKey)}),2&x&&_.e48("target",j.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[_.Wk5.HasDecoratorInputTransform,"preserveFragment","preserveFragment",_.cZD],skipLocationChange:[_.Wk5.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",_.cZD],replaceUrl:[_.Wk5.HasDecoratorInputTransform,"replaceUrl","replaceUrl",_.cZD],routerLink:"routerLink"},standalone:!0,features:[_.QJr,_.SYr]})}return w})();class zt{}let Xi=(()=>{class w{constructor(D,x,j,ee,fe){this.router=D,this.injector=j,this.preloadingStrategy=ee,this.loader=fe}setUpPreloading(){this.subscription=this.router.events.pipe((0,sn.I)(D=>D instanceof Di),(0,tt.m)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(D,x){const j=[];for(const ee of x){ee.providers&&!ee._injector&&(ee._injector=(0,_.SIz)(ee.providers,D,`Route: ${ee.path}`));const fe=ee._injector??D,it=ee._loadedInjector??fe;(ee.loadChildren&&!ee._loadedRoutes&&void 0===ee.canLoad||ee.loadComponent&&!ee._loadedComponent)&&j.push(this.preloadConfig(fe,ee)),(ee.children||ee._loadedRoutes)&&j.push(this.processRoutes(it,ee.children??ee._loadedRoutes))}return(0,ge.Q)(j).pipe((0,Wn.u)())}preloadConfig(D,x){return this.preloadingStrategy.preload(x,()=>{let j;j=x.loadChildren&&void 0===x.canLoad?this.loader.loadChildren(D,x):(0,Ee.of)(null);const ee=j.pipe((0,Re.O)(fe=>null===fe?(0,Ee.of)(void 0):(x._loadedRoutes=fe.routes,x._loadedInjector=fe.injector,this.processRoutes(fe.injector??D,fe.routes))));if(x.loadComponent&&!x._loadedComponent){const fe=this.loader.loadComponent(x);return(0,ge.Q)([ee,fe]).pipe((0,Wn.u)())}return ee})}static#e=this.\u0275fac=function(x){return new(x||w)(_.CoB(Jr),_.CoB(_.ESV),_.CoB(_.SIe),_.CoB(zt),_.CoB(N))};static#t=this.\u0275prov=_.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const fs=new _.UbH("");let _c=(()=>{class w{constructor(D,x,j,ee,fe={}){this.urlSerializer=D,this.transitions=x,this.viewportScroller=j,this.zone=ee,this.options=fe,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},fe.scrollPositionRestoration||="disabled",fe.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof rs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=D.navigationTrigger,this.restoredId=D.restoredState?D.restoredState.navigationId:0):D instanceof Di?(this.lastId=D.id,this.scheduleScrollEvent(D,this.urlSerializer.parse(D.urlAfterRedirects).fragment)):D instanceof Ai&&D.code===Yr.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(D,this.urlSerializer.parse(D.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(D=>{D instanceof zs&&(D.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(D.position):D.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(D.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(D,x){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new zs(D,"popstate"===this.lastSource?this.store[this.restoredId]:null,x))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(x){_.KEo()};static#t=this.\u0275prov=_.wxM({token:w,factory:w.\u0275fac})}return w})();function ro(w,M){return{\u0275kind:w,\u0275providers:M}}function Vr(){const w=(0,_.uUt)(_.zZn);return M=>{const D=w.get(_.Swk);if(M!==D.components[0])return;const x=w.get(Jr),j=w.get(ec);1===w.get(Sn)&&x.initialNavigation(),w.get(mn,null,_._6O.Optional)?.setUpPreloading(),w.get(fs,null,_._6O.Optional)?.init(),x.resetRootComponentType(D.componentTypes[0]),j.closed||(j.next(),j.complete(),j.unsubscribe())}}const ec=new _.UbH("",{factory:()=>new Ut.E}),Sn=new _.UbH("",{providedIn:"root",factory:()=>1}),mn=new _.UbH("");function oa(w){return ro(0,[{provide:mn,useExisting:Xi},{provide:zt,useExisting:w}])}function io(w){return ro(9,[{provide:Xr,useValue:ni},{provide:Gr,useValue:{skipNextTransition:!!w?.skipInitialTransition,...w}}])}const Qo=new _.UbH("ROUTER_FORROOT_GUARD"),Fo=[ke.oB,{provide:pi,useClass:gt},Jr,Ar,{provide:Pi,useFactory:function Wc(w){return w.routerState.root},deps:[Jr]},N,[]];let pr=(()=>{class w{constructor(D){}static forRoot(D,x){return{ngModule:w,providers:[Fo,[],{provide:q,multi:!0,useValue:D},{provide:Qo,useFactory:Lo,deps:[[Jr,new _.T7N,new _.Qfh]]},{provide:A,useValue:x||{}},x?.useHash?{provide:ke.Qd,useClass:ke.MP}:{provide:ke.Qd,useClass:ke.uC},{provide:fs,useFactory:()=>{const w=(0,_.uUt)(ke.YZ),M=(0,_.uUt)(_.WW2),D=(0,_.uUt)(A),x=(0,_.uUt)(ci),j=(0,_.uUt)(pi);return D.scrollOffset&&w.setOffset(D.scrollOffset),new _c(j,x,w,M,D)}},x?.preloadingStrategy?oa(x.preloadingStrategy).\u0275providers:[],x?.initialNavigation?Cs(x):[],x?.bindToComponentInputs?ro(8,[cn,{provide:Rs,useExisting:cn}]).\u0275providers:[],x?.enableViewTransitions?io().\u0275providers:[],[{provide:Hc,useFactory:Vr},{provide:_.qid,multi:!0,useExisting:Hc}]]}}static forChild(D){return{ngModule:w,providers:[{provide:q,multi:!0,useValue:D}]}}static#e=this.\u0275fac=function(x){return new(x||w)(_.CoB(Qo,8))};static#t=this.\u0275mod=_.a4G({type:w});static#n=this.\u0275inj=_.s3X({})}return w})();function Lo(w){return"guarded"}function Cs(w){return["disabled"===w.initialNavigation?ro(3,[{provide:_.kZF,multi:!0,useFactory:()=>{const M=(0,_.uUt)(Jr);return()=>{M.setUpLocationChangeListener()}}},{provide:Sn,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?ro(2,[{provide:Sn,useValue:0},{provide:_.kZF,multi:!0,deps:[_.zZn],useFactory:M=>{const D=M.get(ke.mQ,Promise.resolve());return()=>D.then(()=>new Promise(x=>{const j=M.get(Jr),ee=M.get(ec);er(j,()=>{x(!0)}),M.get(ci).afterPreactivation=()=>(x(!0),ee.closed?(0,Ee.of)(void 0):ee),j.initialNavigation()}))}}]).\u0275providers:[]]}const Hc=new _.UbH("")},8368:(Xt,$e,V)=>{V.d($e,{c:()=>We});var _=V(7144),J=V(4920),I=V(9360),O=V(5976);class ge{constructor(Xe,Ce){this._delegate=Xe,this.firebase=Ce,(0,I._addComponent)(Xe,new J.Yl("app-compat",()=>this,"PUBLIC")),this.container=Xe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xe){this._delegate.automaticDataCollectionEnabled=Xe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Xe=>{this._delegate.checkDestroyed(),Xe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,I.deleteApp)(this._delegate)))}_getService(Xe,Ce=I._DEFAULT_ENTRY_NAME){var ht;this._delegate.checkDestroyed();const _t=this._delegate.container.getProvider(Xe);return!_t.isInitialized()&&"EXPLICIT"===(null===(ht=_t.getComponent())||void 0===ht?void 0:ht.instantiationMode)&&_t.initialize(),_t.getImmediate({identifier:Ce})}_removeServiceInstance(Xe,Ce=I._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Xe).clearInstance(Ce)}_addComponent(Xe){(0,I._addComponent)(this._delegate,Xe)}_addOrOverwriteComponent(Xe){(0,I._addOrOverwriteComponent)(this._delegate,Xe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new _.UR("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function je(){const Ve=function Be(Ve){const Xe={},Ce={__esModule:!0,initializeApp:function Ze(At,Me={}){const Ct=I.initializeApp(At,Me);if((0,_.Y7)(Xe,Ct.name))return Xe[Ct.name];const bt=new Ve(Ct,Ce);return Xe[Ct.name]=bt,bt},app:_t,registerVersion:I.registerVersion,setLogLevel:I.setLogLevel,onLog:I.onLog,apps:null,SDK_VERSION:I.SDK_VERSION,INTERNAL:{registerComponent:function me(At){const Me=At.name,Ct=Me.replace("-compat","");if(I._registerComponent(At)&&"PUBLIC"===At.type){const bt=(Ut=_t())=>{if("function"!=typeof Ut[Ct])throw Ie.create("invalid-app-argument",{appName:Me});return Ut[Ct]()};void 0!==At.serviceProps&&(0,_.Ww)(bt,At.serviceProps),Ce[Ct]=bt,Ve.prototype[Ct]=function(...Ut){return this._getService.bind(this,Me).apply(this,At.multipleInstances?Ut:[])}}return"PUBLIC"===At.type?Ce[Ct]:null},removeApp:function ht(At){delete Xe[At]},useAsService:function Ot(At,Me){return"serverAuth"===Me?null:Me},modularAPIs:I}};function _t(At){if(!(0,_.Y7)(Xe,At=At||I._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:At});return Xe[At]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function rt(){return Object.keys(Xe).map(At=>Xe[At])}}),_t.App=Ve,Ce}(ge);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:je,extendNamespace:function Xe(Ce){(0,_.Ww)(Ve,Ce)},createSubscribe:_.my,ErrorFactory:_.UR,deepExtend:_.Ww}),Ve}(),ue=new O.YJ("@firebase/app-compat");if((0,_.uH)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const We=le;!function Le(Ve){(0,I.registerVersion)("@firebase/app-compat","0.2.27",Ve)}()},9360:(Xt,$e,V)=>{V.r($e),V.d($e,{FirebaseError:()=>O.kx,SDK_VERSION:()=>Mr,_DEFAULT_ENTRY_NAME:()=>vi,_addComponent:()=>ii,_addOrOverwriteComponent:()=>Hs,_apps:()=>In,_clearComponents:()=>bn,_components:()=>yn,_getProvider:()=>Bi,_registerComponent:()=>qr,_removeServiceInstance:()=>Oi,deleteApp:()=>Nr,getApp:()=>wi,getApps:()=>jr,initializeApp:()=>Gn,onLog:()=>gt,registerVersion:()=>pi,setLogLevel:()=>Ge});var _=V(1528),J=V(4920),I=V(5976),O=V(7144);const ge=(qe,Qe)=>Qe.some(Tt=>qe instanceof Tt);let Ee,Ie;const le=new WeakMap,ue=new WeakMap,Oe=new WeakMap,Se=new WeakMap,Le=new WeakMap;let Xe={get(qe,Qe,Tt){if(qe instanceof IDBTransaction){if("done"===Qe)return ue.get(qe);if("objectStoreNames"===Qe)return qe.objectStoreNames||Oe.get(qe);if("store"===Qe)return Tt.objectStoreNames[1]?void 0:Tt.objectStore(Tt.objectStoreNames[0])}return Ze(qe[Qe])},set:(qe,Qe,Tt)=>(qe[Qe]=Tt,!0),has:(qe,Qe)=>qe instanceof IDBTransaction&&("done"===Qe||"store"===Qe)||Qe in qe};function _t(qe){return"function"==typeof qe?function ht(qe){return qe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function je(){return Ie||(Ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(qe)?function(...Qe){return qe.apply(rt(this),Qe),Ze(le.get(this))}:function(...Qe){return Ze(qe.apply(rt(this),Qe))}:function(Qe,...Tt){const rn=qe.call(rt(this),Qe,...Tt);return Oe.set(rn,Qe.sort?Qe.sort():[Qe]),Ze(rn)}}(qe):(qe instanceof IDBTransaction&&function Ve(qe){if(ue.has(qe))return;const Qe=new Promise((Tt,rn)=>{const Bn=()=>{qe.removeEventListener("complete",Hn),qe.removeEventListener("error",Yn),qe.removeEventListener("abort",Yn)},Hn=()=>{Tt(),Bn()},Yn=()=>{rn(qe.error||new DOMException("AbortError","AbortError")),Bn()};qe.addEventListener("complete",Hn),qe.addEventListener("error",Yn),qe.addEventListener("abort",Yn)});ue.set(qe,Qe)}(qe),ge(qe,function Be(){return Ee||(Ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(qe,Xe):qe)}function Ze(qe){if(qe instanceof IDBRequest)return function We(qe){const Qe=new Promise((Tt,rn)=>{const Bn=()=>{qe.removeEventListener("success",Hn),qe.removeEventListener("error",Yn)},Hn=()=>{Tt(Ze(qe.result)),Bn()},Yn=()=>{rn(qe.error),Bn()};qe.addEventListener("success",Hn),qe.addEventListener("error",Yn)});return Qe.then(Tt=>{Tt instanceof IDBCursor&&le.set(Tt,qe)}).catch(()=>{}),Le.set(Qe,qe),Qe}(qe);if(Se.has(qe))return Se.get(qe);const Qe=_t(qe);return Qe!==qe&&(Se.set(qe,Qe),Le.set(Qe,qe)),Qe}const rt=qe=>Le.get(qe),At=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],Ct=new Map;function bt(qe,Qe){if(!(qe instanceof IDBDatabase)||Qe in qe||"string"!=typeof Qe)return;if(Ct.get(Qe))return Ct.get(Qe);const Tt=Qe.replace(/FromIndex$/,""),rn=Qe!==Tt,Bn=Me.includes(Tt);if(!(Tt in(rn?IDBIndex:IDBObjectStore).prototype)||!Bn&&!At.includes(Tt))return;const Hn=function(){var Yn=(0,_.c)(function*(Kr,...lr){const se=this.transaction(Kr,Bn?"readwrite":"readonly");let _e=se.store;return rn&&(_e=_e.index(lr.shift())),(yield Promise.all([_e[Tt](...lr),Bn&&se.done]))[0]});return function(lr){return Yn.apply(this,arguments)}}();return Ct.set(Qe,Hn),Hn}!function Ce(qe){Xe=qe(Xe)}(qe=>({...qe,get:(Qe,Tt,rn)=>bt(Qe,Tt)||qe.get(Qe,Tt,rn),has:(Qe,Tt)=>!!bt(Qe,Tt)||qe.has(Qe,Tt)}));class Ut{constructor(Qe){this.container=Qe}getPlatformInfoString(){return this.container.getProviders().map(Tt=>{if(function ke(qe){const Qe=qe.getComponent();return"VERSION"===Qe?.type}(Tt)){const rn=Tt.getImmediate();return`${rn.library}/${rn.version}`}return null}).filter(Tt=>Tt).join(" ")}}const Rt="@firebase/app",Nt=new I.YJ("@firebase/app"),vi="[DEFAULT]",rr={[Rt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},In=new Map,yn=new Map;function ii(qe,Qe){try{qe.container.addComponent(Qe)}catch(Tt){Nt.debug(`Component ${Qe.name} failed to register with FirebaseApp ${qe.name}`,Tt)}}function Hs(qe,Qe){qe.container.addOrOverwriteComponent(Qe)}function qr(qe){const Qe=qe.name;if(yn.has(Qe))return Nt.debug(`There were multiple attempts to register component ${Qe}.`),!1;yn.set(Qe,qe);for(const Tt of In.values())ii(Tt,qe);return!0}function Bi(qe,Qe){const Tt=qe.container.getProvider("heartbeat").getImmediate({optional:!0});return Tt&&Tt.triggerHeartbeat(),qe.container.getProvider(Qe)}function Oi(qe,Qe,Tt=vi){Bi(qe,Qe).clearInstance(Tt)}function bn(){yn.clear()}const Tr=new O.UR("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Tn{constructor(Qe,Tt,rn){this._isDeleted=!1,this._options=Object.assign({},Qe),this._config=Object.assign({},Tt),this._name=Tt.name,this._automaticDataCollectionEnabled=Tt.automaticDataCollectionEnabled,this._container=rn,this.container.addComponent(new J.Yl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Qe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Qe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Qe){this._isDeleted=Qe}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const Mr="10.8.0";function Gn(qe,Qe={}){let Tt=qe;"object"!=typeof Qe&&(Qe={name:Qe});const rn=Object.assign({name:vi,automaticDataCollectionEnabled:!1},Qe),Bn=rn.name;if("string"!=typeof Bn||!Bn)throw Tr.create("bad-app-name",{appName:String(Bn)});if(Tt||(Tt=(0,O.Yd)()),!Tt)throw Tr.create("no-options");const Hn=In.get(Bn);if(Hn){if((0,O.IN)(Tt,Hn.options)&&(0,O.IN)(rn,Hn.config))return Hn;throw Tr.create("duplicate-app",{appName:Bn})}const Yn=new J.op(Bn);for(const lr of yn.values())Yn.addComponent(lr);const Kr=new Tn(Tt,rn,Yn);return In.set(Bn,Kr),Kr}function wi(qe=vi){const Qe=In.get(qe);if(!Qe&&qe===vi&&(0,O.Yd)())return Gn();if(!Qe)throw Tr.create("no-app",{appName:qe});return Qe}function jr(){return Array.from(In.values())}function Nr(qe){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,_.c)(function*(qe){const Qe=qe.name;In.has(Qe)&&(In.delete(Qe),yield Promise.all(qe.container.getProviders().map(Tt=>Tt.delete())),qe.isDeleted=!0)})).apply(this,arguments)}function pi(qe,Qe,Tt){var rn;let Bn=null!==(rn=rr[qe])&&void 0!==rn?rn:qe;Tt&&(Bn+=`-${Tt}`);const Hn=Bn.match(/\s|\//),Yn=Qe.match(/\s|\//);if(Hn||Yn){const Kr=[`Unable to register library "${Bn}" with version "${Qe}":`];return Hn&&Kr.push(`library name "${Bn}" contains illegal characters (whitespace or "/")`),Hn&&Yn&&Kr.push("and"),Yn&&Kr.push(`version name "${Qe}" contains illegal characters (whitespace or "/")`),void Nt.warn(Kr.join(" "))}qr(new J.Yl(`${Bn}-version`,()=>({library:Bn,version:Qe}),"VERSION"))}function gt(qe,Qe){if(null!==qe&&"function"!=typeof qe)throw Tr.create("invalid-log-argument");(0,I.S2)(qe,Qe)}function Ge(qe){(0,I.QN)(qe)}const he="firebase-heartbeat-database",Fe=1,re="firebase-heartbeat-store";let ae=null;function X(){return ae||(ae=function me(qe,Qe,{blocked:Tt,upgrade:rn,blocking:Bn,terminated:Hn}={}){const Yn=indexedDB.open(qe,Qe),Kr=Ze(Yn);return rn&&Yn.addEventListener("upgradeneeded",lr=>{rn(Ze(Yn.result),lr.oldVersion,lr.newVersion,Ze(Yn.transaction),lr)}),Tt&&Yn.addEventListener("blocked",lr=>Tt(lr.oldVersion,lr.newVersion,lr)),Kr.then(lr=>{Hn&&lr.addEventListener("close",()=>Hn()),Bn&&lr.addEventListener("versionchange",se=>Bn(se.oldVersion,se.newVersion,se))}).catch(()=>{}),Kr}(he,Fe,{upgrade:(qe,Qe)=>{if(0===Qe)try{qe.createObjectStore(re)}catch(Tt){console.warn(Tt)}}}).catch(qe=>{throw Tr.create("idb-open",{originalErrorMessage:qe.message})})),ae}function Z(){return(Z=(0,_.c)(function*(qe){try{const Tt=(yield X()).transaction(re),rn=yield Tt.objectStore(re).get(Qt(qe));return yield Tt.done,rn}catch(Qe){if(Qe instanceof O.kx)Nt.warn(Qe.message);else{const Tt=Tr.create("idb-get",{originalErrorMessage:Qe?.message});Nt.warn(Tt.message)}}})).apply(this,arguments)}function Ne(qe,Qe){return mt.apply(this,arguments)}function mt(){return(mt=(0,_.c)(function*(qe,Qe){try{const rn=(yield X()).transaction(re,"readwrite");yield rn.objectStore(re).put(Qe,Qt(qe)),yield rn.done}catch(Tt){if(Tt instanceof O.kx)Nt.warn(Tt.message);else{const rn=Tr.create("idb-set",{originalErrorMessage:Tt?.message});Nt.warn(rn.message)}}})).apply(this,arguments)}function Qt(qe){return`${qe.name}!${qe.options.appId}`}class On{constructor(Qe){this.container=Qe,this._heartbeatsCache=null;const Tt=this.container.getProvider("app").getImmediate();this._storage=new fn(Tt),this._heartbeatsCachePromise=this._storage.read().then(rn=>(this._heartbeatsCache=rn,rn))}triggerHeartbeat(){var Qe=this;return(0,_.c)(function*(){var Tt,rn;const Hn=Qe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Yn=en();if((null!=(null===(Tt=Qe._heartbeatsCache)||void 0===Tt?void 0:Tt.heartbeats)||(Qe._heartbeatsCache=yield Qe._heartbeatsCachePromise,null!=(null===(rn=Qe._heartbeatsCache)||void 0===rn?void 0:rn.heartbeats)))&&Qe._heartbeatsCache.lastSentHeartbeatDate!==Yn&&!Qe._heartbeatsCache.heartbeats.some(Kr=>Kr.date===Yn))return Qe._heartbeatsCache.heartbeats.push({date:Yn,agent:Hn}),Qe._heartbeatsCache.heartbeats=Qe._heartbeatsCache.heartbeats.filter(Kr=>{const lr=new Date(Kr.date).valueOf();return Date.now()-lr<=2592e6}),Qe._storage.overwrite(Qe._heartbeatsCache)})()}getHeartbeatsHeader(){var Qe=this;return(0,_.c)(function*(){var Tt;if(null===Qe._heartbeatsCache&&(yield Qe._heartbeatsCachePromise),null==(null===(Tt=Qe._heartbeatsCache)||void 0===Tt?void 0:Tt.heartbeats)||0===Qe._heartbeatsCache.heartbeats.length)return"";const rn=en(),{heartbeatsToSend:Bn,unsentEntries:Hn}=function Dr(qe,Qe=1024){const Tt=[];let rn=qe.slice();for(const Bn of qe){const Hn=Tt.find(Yn=>Yn.agent===Bn.agent);if(Hn){if(Hn.dates.push(Bn.date),Ln(Tt)>Qe){Hn.dates.pop();break}}else if(Tt.push({agent:Bn.agent,dates:[Bn.date]}),Ln(Tt)>Qe){Tt.pop();break}rn=rn.slice(1)}return{heartbeatsToSend:Tt,unsentEntries:rn}}(Qe._heartbeatsCache.heartbeats),Yn=(0,O.Wg)(JSON.stringify({version:2,heartbeats:Bn}));return Qe._heartbeatsCache.lastSentHeartbeatDate=rn,Hn.length>0?(Qe._heartbeatsCache.heartbeats=Hn,yield Qe._storage.overwrite(Qe._heartbeatsCache)):(Qe._heartbeatsCache.heartbeats=[],Qe._storage.overwrite(Qe._heartbeatsCache)),Yn})()}}function en(){return(new Date).toISOString().substring(0,10)}class fn{constructor(Qe){this.app=Qe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.c)(function*(){return!!(0,O.yy)()&&(0,O.A3)().then(()=>!0).catch(()=>!1)})()}read(){var Qe=this;return(0,_.c)(function*(){if(yield Qe._canUseIndexedDBPromise){const rn=yield function Q(qe){return Z.apply(this,arguments)}(Qe.app);return rn?.heartbeats?rn:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Qe){var Tt=this;return(0,_.c)(function*(){var rn;if(yield Tt._canUseIndexedDBPromise){const Hn=yield Tt.read();return Ne(Tt.app,{lastSentHeartbeatDate:null!==(rn=Qe.lastSentHeartbeatDate)&&void 0!==rn?rn:Hn.lastSentHeartbeatDate,heartbeats:Qe.heartbeats})}})()}add(Qe){var Tt=this;return(0,_.c)(function*(){var rn;if(yield Tt._canUseIndexedDBPromise){const Hn=yield Tt.read();return Ne(Tt.app,{lastSentHeartbeatDate:null!==(rn=Qe.lastSentHeartbeatDate)&&void 0!==rn?rn:Hn.lastSentHeartbeatDate,heartbeats:[...Hn.heartbeats,...Qe.heartbeats]})}})()}}function Ln(qe){return(0,O.Wg)(JSON.stringify({version:2,heartbeats:qe})).length}!function Pe(qe){qr(new J.Yl("platform-logger",Qe=>new Ut(Qe),"PRIVATE")),qr(new J.Yl("heartbeat",Qe=>new On(Qe),"PRIVATE")),pi(Rt,"0.9.27",qe),pi(Rt,"0.9.27","esm2017"),pi("fire-js","")}("")},4920:(Xt,$e,V)=>{V.d($e,{Yl:()=>I,op:()=>Be});var _=V(1528),J=V(7144);class I{constructor(le,ue,Oe){this.name=le,this.instanceFactory=ue,this.type=Oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const O="[DEFAULT]";class ge{constructor(le,ue){this.name=le,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const ue=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(ue)){const Oe=new J.o9;if(this.instancesDeferred.set(ue,Oe),this.isInitialized(ue)||this.shouldAutoInitialize())try{const Se=this.getOrInitializeService({instanceIdentifier:ue});Se&&Oe.resolve(Se)}catch{}}return this.instancesDeferred.get(ue).promise}getImmediate(le){var ue;const Oe=this.normalizeInstanceIdentifier(le?.identifier),Se=null!==(ue=le?.optional)&&void 0!==ue&&ue;if(!this.isInitialized(Oe)&&!this.shouldAutoInitialize()){if(Se)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Oe})}catch(Le){if(Se)return null;throw Le}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function Ie(je){return"EAGER"===je.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:O})}catch{}for(const[ue,Oe]of this.instancesDeferred.entries()){const Se=this.normalizeInstanceIdentifier(ue);try{const Le=this.getOrInitializeService({instanceIdentifier:Se});Oe.resolve(Le)}catch{}}}}clearInstance(le=O){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,_.c)(function*(){const ue=Array.from(le.instances.values());yield Promise.all([...ue.filter(Oe=>"INTERNAL"in Oe).map(Oe=>Oe.INTERNAL.delete()),...ue.filter(Oe=>"_delete"in Oe).map(Oe=>Oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=O){return this.instances.has(le)}getOptions(le=O){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:ue={}}=le,Oe=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(Oe))throw Error(`${this.name}(${Oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Se=this.getOrInitializeService({instanceIdentifier:Oe,options:ue});for(const[Le,We]of this.instancesDeferred.entries())Oe===this.normalizeInstanceIdentifier(Le)&&We.resolve(Se);return Se}onInit(le,ue){var Oe;const Se=this.normalizeInstanceIdentifier(ue),Le=null!==(Oe=this.onInitCallbacks.get(Se))&&void 0!==Oe?Oe:new Set;Le.add(le),this.onInitCallbacks.set(Se,Le);const We=this.instances.get(Se);return We&&le(We,Se),()=>{Le.delete(le)}}invokeOnInitCallbacks(le,ue){const Oe=this.onInitCallbacks.get(ue);if(Oe)for(const Se of Oe)try{Se(le,ue)}catch{}}getOrInitializeService({instanceIdentifier:le,options:ue={}}){let Oe=this.instances.get(le);if(!Oe&&this.component&&(Oe=this.component.instanceFactory(this.container,{instanceIdentifier:(je=le,je===O?void 0:je),options:ue}),this.instances.set(le,Oe),this.instancesOptions.set(le,ue),this.invokeOnInitCallbacks(Oe,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,Oe)}catch{}var je;return Oe||null}normalizeInstanceIdentifier(le=O){return this.component?this.component.multipleInstances?le:O:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Be{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const ue=this.getProvider(le.name);if(ue.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);ue.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const ue=new ge(le,this);return this.providers.set(le,ue),ue}getProviders(){return Array.from(this.providers.values())}}},5976:(Xt,$e,V)=>{V.d($e,{Ge:()=>J,QN:()=>Be,S2:()=>je,YJ:()=>Ie});const _=[];var J=function(le){return le[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",le}(J||{});const I={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},O=J.INFO,ge={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},Ee=(le,ue,...Oe)=>{if(ue<le.logLevel)return;const Se=(new Date).toISOString(),Le=ge[ue];if(!Le)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[Le](`[${Se}]  ${le.name}:`,...Oe)};class Ie{constructor(ue){this.name=ue,this._logLevel=O,this._logHandler=Ee,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in J))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?I[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...ue),this._logHandler(this,J.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...ue),this._logHandler(this,J.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,J.INFO,...ue),this._logHandler(this,J.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,J.WARN,...ue),this._logHandler(this,J.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...ue),this._logHandler(this,J.ERROR,...ue)}}function Be(le){_.forEach(ue=>{ue.setLogLevel(le)})}function je(le,ue){for(const Oe of _){let Se=null;ue&&ue.level&&(Se=I[ue.level]),Oe.userLogHandler=null===le?null:(Le,We,...Ve)=>{const Xe=Ve.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch{return null}}).filter(Ce=>Ce).join(" ");We>=(Se??Le.logLevel)&&le({level:J[We].toLowerCase(),message:Xe,args:Ve,type:Le.name})}}}},3680:(Xt,$e,V)=>{V.d($e,{Kk:()=>_.registerVersion,UH:()=>_.getApps,WE:()=>_.getApp});var _=V(9360);(0,_.registerVersion)("firebase","10.8.0","app")},8836:(Xt,$e,V)=>{V.d($e,{wR:()=>_.X,Iv:()=>_.o});var _=V(1944);V(7144),V(9360),V(5976),V(4920)},9252:(Xt,$e,V)=>{V.d($e,{c:()=>_.c});var _=V(8368);_.c.registerVersion("firebase","10.8.0","app-compat")},6858:(Xt,$e,V)=>{V.r($e);var _=V(1528),J=V(8368),I=V(1944),O=V(7144),Ie=(V(9360),V(5976),V(4920));function Be(){return window}function ue(){return ue=(0,_.c)(function*(X,Q,Z){var Ne;const{BuildInfo:mt}=Be();(0,I.au)(Q.sessionId,"AuthEvent did not contain a session ID");const Qt=yield function Ce(X){return ht.apply(this,arguments)}(Q.sessionId),En={};return(0,I.av)()?En.ibi=mt.packageName:(0,I.aw)()?En.apn=mt.packageName:(0,I.ax)(X,"operation-not-supported-in-this-environment"),mt.displayName&&(En.appDisplayName=mt.displayName),En.sessionId=Qt,(0,I.ay)(X,Z,Q.type,void 0,null!==(Ne=Q.eventId)&&void 0!==Ne?Ne:void 0,En)}),ue.apply(this,arguments)}function Se(){return(Se=(0,_.c)(function*(X){const{BuildInfo:Q}=Be(),Z={};(0,I.av)()?Z.iosBundleId=Q.packageName:(0,I.aw)()?Z.androidPackageName=Q.packageName:(0,I.ax)(X,"operation-not-supported-in-this-environment"),yield(0,I.az)(X,Z)})).apply(this,arguments)}function Ve(){return(Ve=(0,_.c)(function*(X,Q,Z){const{cordova:Ne}=Be();let mt=()=>{};try{yield new Promise((Qt,En)=>{let Cn=null;function On(){var fn;Qt();const Ln=null===(fn=Ne.plugins.browsertab)||void 0===fn?void 0:fn.close;"function"==typeof Ln&&Ln(),"function"==typeof Z?.close&&Z.close()}function en(){Cn||(Cn=window.setTimeout(()=>{En((0,I.aB)(X,"redirect-cancelled-by-user"))},2e3))}function Dr(){"visible"===document?.visibilityState&&en()}Q.addPassiveListener(On),document.addEventListener("resume",en,!1),(0,I.aw)()&&document.addEventListener("visibilitychange",Dr,!1),mt=()=>{Q.removePassiveListener(On),document.removeEventListener("resume",en,!1),document.removeEventListener("visibilitychange",Dr,!1),Cn&&window.clearTimeout(Cn)}})}finally{mt()}})).apply(this,arguments)}function ht(){return(ht=(0,_.c)(function*(X){const Q=function _t(X){if((0,I.au)(/[0-9a-zA-Z]+/.test(X),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(X);const Q=new ArrayBuffer(X.length),Z=new Uint8Array(Q);for(let Ne=0;Ne<X.length;Ne++)Z[Ne]=X.charCodeAt(Ne);return Z}(X),Z=yield crypto.subtle.digest("SHA-256",Q);return Array.from(new Uint8Array(Z)).map(mt=>mt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class rt extends I.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Q=>{this.resolveInialized=Q})}addPassiveListener(Q){this.passiveListeners.add(Q)}removePassiveListener(Q){this.passiveListeners.delete(Q)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Q){return this.resolveInialized(),this.passiveListeners.forEach(Z=>Z(Q)),super.onEvent(Q)}initialized(){var Q=this;return(0,_.c)(function*(){yield Q.initPromise})()}}function At(X){return Me.apply(this,arguments)}function Me(){return(Me=(0,_.c)(function*(X){const Q=yield Ut()._get(ke(X));return Q&&(yield Ut()._remove(ke(X))),Q})).apply(this,arguments)}function bt(){const X=[];for(let Z=0;Z<20;Z++){const Ne=Math.floor(62*Math.random());X.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Ne))}return X.join("")}function Ut(){return(0,I.aE)(I.b)}function ke(X){return(0,I.aF)("authEvent",X.config.apiKey,X.name)}function Nt(X){if(!X?.includes("?"))return{};const[Q,...Z]=X.split("?");return(0,O.aw)(Z.join("?"))}const Re=class sn{constructor(){this._redirectPersistence=I.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=I.aG,this._overrideRedirectResult=I.aH}_initialize(Q){var Z=this;return(0,_.c)(function*(){const Ne=Q._key();let mt=Z.eventManagers.get(Ne);return mt||(mt=new rt(Q),Z.eventManagers.set(Ne,mt),Z.attachCallbackListeners(Q,mt)),mt})()}_openPopup(Q){(0,I.ax)(Q,"operation-not-supported-in-this-environment")}_openRedirect(Q,Z,Ne,mt){var Qt=this;return(0,_.c)(function*(){!function Xe(X){var Q,Z,Ne,mt,Qt,En,Cn,On,en,Dr;const fn=Be();(0,I.aC)("function"==typeof(null===(Q=fn?.universalLinks)||void 0===Q?void 0:Q.subscribe),X,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,I.aC)(typeof(null===(Z=fn?.BuildInfo)||void 0===Z?void 0:Z.packageName)<"u",X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,I.aC)("function"==typeof(null===(Qt=null===(mt=null===(Ne=fn?.cordova)||void 0===Ne?void 0:Ne.plugins)||void 0===mt?void 0:mt.browsertab)||void 0===Qt?void 0:Qt.openUrl),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,I.aC)("function"==typeof(null===(On=null===(Cn=null===(En=fn?.cordova)||void 0===En?void 0:En.plugins)||void 0===Cn?void 0:Cn.browsertab)||void 0===On?void 0:On.isAvailable),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,I.aC)("function"==typeof(null===(Dr=null===(en=fn?.cordova)||void 0===en?void 0:en.InAppBrowser)||void 0===Dr?void 0:Dr.open),X,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Q);const En=yield Qt._initialize(Q);yield En.initialized(),En.resetRedirect(),(0,I.aI)(),yield Qt._originValidation(Q);const Cn=function me(X,Q,Z=null){return{type:Q,eventId:Z,urlResponse:null,sessionId:bt(),postBody:null,tenantId:X.tenantId,error:(0,I.aB)(X,"no-auth-event")}}(Q,Ne,mt);yield function Ot(X,Q){return Ut()._set(ke(X),Q)}(Q,Cn);const On=yield function le(X,Q,Z){return ue.apply(this,arguments)}(Q,Cn,Z),en=yield function Le(X){const{cordova:Q}=Be();return new Promise(Z=>{Q.plugins.browsertab.isAvailable(Ne=>{let mt=null;Ne?Q.plugins.browsertab.openUrl(X):mt=Q.InAppBrowser.open(X,(0,I.aA)()?"_blank":"_system","location=yes"),Z(mt)})})}(On);return function We(X,Q,Z){return Ve.apply(this,arguments)}(Q,En,en)})()}_isIframeWebStorageSupported(Q,Z){throw new Error("Method not implemented.")}_originValidation(Q){const Z=Q._key();return this.originValidationPromises[Z]||(this.originValidationPromises[Z]=function Oe(X){return Se.apply(this,arguments)}(Q)),this.originValidationPromises[Z]}attachCallbackListeners(Q,Z){const{universalLinks:Ne,handleOpenURL:mt,BuildInfo:Qt}=Be(),En=setTimeout((0,_.c)(function*(){yield At(Q),Z.onEvent(He())}),500),Cn=function(){var Dr=(0,_.c)(function*(fn){clearTimeout(En);const Ln=yield At(Q);let Pe=null;Ln&&fn?.url&&(Pe=function Ct(X,Q){var Z,Ne;const mt=function ct(X){const Q=Nt(X),Z=Q.link?decodeURIComponent(Q.link):void 0,Ne=Nt(Z).link,mt=Q.deep_link_id?decodeURIComponent(Q.deep_link_id):void 0;return Nt(mt).link||mt||Ne||Z||X}(Q);if(mt.includes("/__/auth/callback")){const Qt=Nt(mt),En=Qt.firebaseError?function Rt(X){try{return JSON.parse(X)}catch{return null}}(decodeURIComponent(Qt.firebaseError)):null,Cn=null===(Ne=null===(Z=En?.code)||void 0===Z?void 0:Z.split("auth/"))||void 0===Ne?void 0:Ne[1],On=Cn?(0,I.aB)(Cn):null;return On?{type:X.type,eventId:X.eventId,tenantId:X.tenantId,error:On,urlResponse:null,sessionId:null,postBody:null}:{type:X.type,eventId:X.eventId,tenantId:X.tenantId,sessionId:X.sessionId,urlResponse:mt,postBody:null}}return null}(Ln,fn.url)),Z.onEvent(Pe||He())});return function(Ln){return Dr.apply(this,arguments)}}();typeof Ne<"u"&&"function"==typeof Ne.subscribe&&Ne.subscribe(null,Cn);const On=mt,en=`${Qt.packageName.toLowerCase()}://`;Be().handleOpenURL=function(){var Dr=(0,_.c)(function*(fn){if(fn.toLowerCase().startsWith(en)&&Cn({url:fn}),"function"==typeof On)try{On(fn)}catch(Ln){console.error(Ln)}});return function(fn){return Dr.apply(this,arguments)}}()}};function He(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,I.aB)("no-auth-event")}}function Dt(){var X;return(null===(X=self?.location)||void 0===X?void 0:X.protocol)||null}function xt(X=(0,O.Su)()){return!("file:"!==Dt()&&"ionic:"!==Dt()&&"capacitor:"!==Dt()||!X.toLowerCase().match(/iphone|ipad|ipod|android/))}function Yt(){try{const X=self.localStorage,Q=I.aN();if(X)return X.setItem(Q,"1"),X.removeItem(Q),!function ut(X=(0,O.Su)()){return function dt(){return(0,O.Uv)()&&11===document?.documentMode}()||function yt(X=(0,O.Su)()){return/Edge\/\d+/.test(X)}(X)}()||(0,O.yy)()}catch{return Wn()&&(0,O.yy)()}return!1}function Wn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rr(){return(function ze(){return"http:"===Dt()||"https:"===Dt()}()||(0,O.Cc)()||xt())&&!function De(){return(0,O.AL)()||(0,O.yW)()}()&&Yt()&&!Wn()}function Ht(){return xt()&&typeof document<"u"}function $t(){return($t=(0,_.c)(function*(){return!!Ht()&&new Promise(X=>{const Q=setTimeout(()=>{X(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Q),X(!0)})})})).apply(this,arguments)}const kn={LOCAL:"local",NONE:"none",SESSION:"session"},Zr=I.aC,yr="persistence";function rr(X){return In.apply(this,arguments)}function In(){return(In=(0,_.c)(function*(X){yield X._initializationPromise;const Q=ii(),Z=I.aF(yr,X.config.apiKey,X.name);Q&&Q.setItem(Z,X._getPersistence())})).apply(this,arguments)}function ii(){var X;try{return(null===(X=function zr(){return typeof window<"u"?window:null}())||void 0===X?void 0:X.sessionStorage)||null}catch{return null}}const Hs=I.aC;class qr{constructor(){this.browserResolver=I.aE(I.k),this.cordovaResolver=I.aE(Re),this.underlyingResolver=null,this._redirectPersistence=I.a,this._completeRedirectFn=I.aG,this._overrideRedirectResult=I.aH}_initialize(Q){var Z=this;return(0,_.c)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._initialize(Q)})()}_openPopup(Q,Z,Ne,mt){var Qt=this;return(0,_.c)(function*(){return yield Qt.selectUnderlyingResolver(),Qt.assertedUnderlyingResolver._openPopup(Q,Z,Ne,mt)})()}_openRedirect(Q,Z,Ne,mt){var Qt=this;return(0,_.c)(function*(){return yield Qt.selectUnderlyingResolver(),Qt.assertedUnderlyingResolver._openRedirect(Q,Z,Ne,mt)})()}_isIframeWebStorageSupported(Q,Z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Q,Z)}_originValidation(Q){return this.assertedUnderlyingResolver._originValidation(Q)}get _shouldInitProactively(){return Ht()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Hs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Q=this;return(0,_.c)(function*(){if(Q.underlyingResolver)return;const Z=yield function wr(){return $t.apply(this,arguments)}();Q.underlyingResolver=Z?Q.cordovaResolver:Q.browserResolver})()}}function Bi(X){return X.unwrap()}function bn(X){return Tr(X)}function Tr(X){const{_tokenResponse:Q}=X instanceof O.kx?X.customData:X;if(!Q)return null;if(!(X instanceof O.kx)&&"temporaryProof"in Q&&"phoneNumber"in Q)return I.P.credentialFromResult(X);const Z=Q.providerId;if(!Z||Z===I.p.PASSWORD)return null;let Ne;switch(Z){case I.p.GOOGLE:Ne=I.X;break;case I.p.FACEBOOK:Ne=I.W;break;case I.p.GITHUB:Ne=I.Y;break;case I.p.TWITTER:Ne=I.$;break;default:const{oauthIdToken:mt,oauthAccessToken:Qt,oauthTokenSecret:En,pendingToken:Cn,nonce:On}=Q;return Qt||En||mt||Cn?Cn?Z.startsWith("saml.")?I.aQ._create(Z,Cn):I.N._fromParams({providerId:Z,signInMethod:Z,pendingToken:Cn,idToken:mt,accessToken:Qt}):new I.Z(Z).credential({idToken:mt,accessToken:Qt,rawNonce:On}):null}return X instanceof O.kx?Ne.credentialFromError(X):Ne.credentialFromResult(X)}function Tn(X,Q){return Q.catch(Z=>{throw Z instanceof O.kx&&function Fn(X,Q){var Z;const Ne=null===(Z=Q.customData)||void 0===Z?void 0:Z._tokenResponse;if("auth/multi-factor-auth-required"===Q?.code)Q.resolver=new wi(X,I.as(X,Q));else if(Ne){const mt=Tr(Q),Qt=Q;mt&&(Qt.credential=mt,Qt.tenantId=Ne.tenantId||void 0,Qt.email=Ne.email||void 0,Qt.phoneNumber=Ne.phoneNumber||void 0)}}(X,Z),Z}).then(Z=>{const mt=Z.user;return{operationType:Z.operationType,credential:bn(Z),additionalUserInfo:I.aq(Z),user:jr.getOrCreate(mt)}})}function Mr(X,Q){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,_.c)(function*(X,Q){const Z=yield Q;return{verificationId:Z.verificationId,confirm:Ne=>Tn(X,Z.confirm(Ne))}})).apply(this,arguments)}class wi{constructor(Q,Z){this.resolver=Z,this.auth=function Oi(X){return X.wrapped()}(Q)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Q){return Tn(Bi(this.auth),this.resolver.resolveSignIn(Q))}}class jr{constructor(Q){this._delegate=Q,this.multiFactor=I.at(Q)}static getOrCreate(Q){return jr.USER_MAP.has(Q)||jr.USER_MAP.set(Q,new jr(Q)),jr.USER_MAP.get(Q)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Q){return this._delegate.getIdTokenResult(Q)}getIdToken(Q){return this._delegate.getIdToken(Q)}linkAndRetrieveDataWithCredential(Q){return this.linkWithCredential(Q)}linkWithCredential(Q){var Z=this;return(0,_.c)(function*(){return Tn(Z.auth,I.a2(Z._delegate,Q))})()}linkWithPhoneNumber(Q,Z){var Ne=this;return(0,_.c)(function*(){return Mr(Ne.auth,I.l(Ne._delegate,Q,Z))})()}linkWithPopup(Q){var Z=this;return(0,_.c)(function*(){return Tn(Z.auth,I.d(Z._delegate,Q,qr))})()}linkWithRedirect(Q){var Z=this;return(0,_.c)(function*(){return yield rr(I.aJ(Z.auth)),I.g(Z._delegate,Q,qr)})()}reauthenticateAndRetrieveDataWithCredential(Q){return this.reauthenticateWithCredential(Q)}reauthenticateWithCredential(Q){var Z=this;return(0,_.c)(function*(){return Tn(Z.auth,I.a3(Z._delegate,Q))})()}reauthenticateWithPhoneNumber(Q,Z){return Mr(this.auth,I.r(this._delegate,Q,Z))}reauthenticateWithPopup(Q){return Tn(this.auth,I.e(this._delegate,Q,qr))}reauthenticateWithRedirect(Q){var Z=this;return(0,_.c)(function*(){return yield rr(I.aJ(Z.auth)),I.h(Z._delegate,Q,qr)})()}sendEmailVerification(Q){return I.ag(this._delegate,Q)}unlink(Q){var Z=this;return(0,_.c)(function*(){return yield I.ap(Z._delegate,Q),Z})()}updateEmail(Q){return I.al(this._delegate,Q)}updatePassword(Q){return I.am(this._delegate,Q)}updatePhoneNumber(Q){return I.u(this._delegate,Q)}updateProfile(Q){return I.ak(this._delegate,Q)}verifyBeforeUpdateEmail(Q,Z){return I.ah(this._delegate,Q,Z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jr.USER_MAP=new WeakMap;const Nr=I.aC;let Ds=(()=>{class X{constructor(Z,Ne){if(this.app=Z,Ne.isInitialized())return this._delegate=Ne.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:mt}=Z.options;Nr(mt,"invalid-api-key",{appName:Z.name}),Nr(mt,"invalid-api-key",{appName:Z.name});const Qt=typeof window<"u"?qr:void 0;this._delegate=Ne.initialize({options:{persistence:gt(mt,Z.name),popupRedirectResolver:Qt}}),this._delegate._updateErrorMap(I.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Z){this._delegate.languageCode=Z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Z){this._delegate.tenantId=Z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Z,Ne){I.K(this._delegate,Z,Ne)}applyActionCode(Z){return I.a7(this._delegate,Z)}checkActionCode(Z){return I.a8(this._delegate,Z)}confirmPasswordReset(Z,Ne){return I.a6(this._delegate,Z,Ne)}createUserWithEmailAndPassword(Z,Ne){var mt=this;return(0,_.c)(function*(){return Tn(mt._delegate,I.aa(mt._delegate,Z,Ne))})()}fetchProvidersForEmail(Z){return this.fetchSignInMethodsForEmail(Z)}fetchSignInMethodsForEmail(Z){return I.af(this._delegate,Z)}isSignInWithEmailLink(Z){return I.ad(this._delegate,Z)}getRedirectResult(){var Z=this;return(0,_.c)(function*(){Nr(Rr(),Z._delegate,"operation-not-supported-in-this-environment");const Ne=yield I.j(Z._delegate,qr);return Ne?Tn(Z._delegate,Promise.resolve(Ne)):{credential:null,user:null}})()}addFrameworkForLogging(Z){!function tt(X,Q){(0,I.aJ)(X)._logFramework(Q)}(this._delegate,Z)}onAuthStateChanged(Z,Ne,mt){const{next:Qt,error:En,complete:Cn}=pi(Z,Ne,mt);return this._delegate.onAuthStateChanged(Qt,En,Cn)}onIdTokenChanged(Z,Ne,mt){const{next:Qt,error:En,complete:Cn}=pi(Z,Ne,mt);return this._delegate.onIdTokenChanged(Qt,En,Cn)}sendSignInLinkToEmail(Z,Ne){return I.ac(this._delegate,Z,Ne)}sendPasswordResetEmail(Z,Ne){return I.a5(this._delegate,Z,Ne||void 0)}setPersistence(Z){var Ne=this;return(0,_.c)(function*(){let mt;switch(function vi(X,Q){Zr(Object.values(kn).includes(Q),X,"invalid-persistence-type"),(0,O.AL)()?Zr(Q!==kn.SESSION,X,"unsupported-persistence-type"):(0,O.yW)()?Zr(Q===kn.NONE,X,"unsupported-persistence-type"):Wn()?Zr(Q===kn.NONE||Q===kn.LOCAL&&(0,O.yy)(),X,"unsupported-persistence-type"):Zr(Q===kn.NONE||Yt(),X,"unsupported-persistence-type")}(Ne._delegate,Z),Z){case kn.SESSION:mt=I.a;break;case kn.LOCAL:mt=(yield I.aE(I.i)._isAvailable())?I.i:I.b;break;case kn.NONE:mt=I.U;break;default:return I.ax("argument-error",{appName:Ne._delegate.name})}return Ne._delegate.setPersistence(mt)})()}signInAndRetrieveDataWithCredential(Z){return this.signInWithCredential(Z)}signInAnonymously(){return Tn(this._delegate,I.a0(this._delegate))}signInWithCredential(Z){return Tn(this._delegate,I.a1(this._delegate,Z))}signInWithCustomToken(Z){return Tn(this._delegate,I.a4(this._delegate,Z))}signInWithEmailAndPassword(Z,Ne){return Tn(this._delegate,I.ab(this._delegate,Z,Ne))}signInWithEmailLink(Z,Ne){return Tn(this._delegate,I.ae(this._delegate,Z,Ne))}signInWithPhoneNumber(Z,Ne){return Mr(this._delegate,I.s(this._delegate,Z,Ne))}signInWithPopup(Z){var Ne=this;return(0,_.c)(function*(){return Nr(Rr(),Ne._delegate,"operation-not-supported-in-this-environment"),Tn(Ne._delegate,I.c(Ne._delegate,Z,qr))})()}signInWithRedirect(Z){var Ne=this;return(0,_.c)(function*(){return Nr(Rr(),Ne._delegate,"operation-not-supported-in-this-environment"),yield rr(Ne._delegate),I.f(Ne._delegate,Z,qr)})()}updateCurrentUser(Z){return this._delegate.updateCurrentUser(Z)}verifyPasswordResetCode(Z){return I.a9(this._delegate,Z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return X.Persistence=kn,X})();function pi(X,Q,Z){let Ne=X;"function"!=typeof X&&({next:Ne,error:Q,complete:Z}=X);const mt=Ne;return{next:En=>mt(En&&jr.getOrCreate(En)),error:Q,complete:Z}}function gt(X,Q){const Z=function yn(X,Q){const Z=ii();if(!Z)return[];const Ne=I.aF(yr,X,Q);switch(Z.getItem(Ne)){case kn.NONE:return[I.U];case kn.LOCAL:return[I.i,I.a];case kn.SESSION:return[I.a];default:return[]}}(X,Q);if(typeof self<"u"&&!Z.includes(I.i)&&Z.push(I.i),typeof window<"u")for(const Ne of[I.b,I.a])Z.includes(Ne)||Z.push(Ne);return Z.includes(I.U)||Z.push(I.U),Z}class Ge{constructor(){this.providerId="phone",this._delegate=new I.P(Bi(J.c.auth()))}static credential(Q,Z){return I.P.credential(Q,Z)}verifyPhoneNumber(Q,Z){return this._delegate.verifyPhoneNumber(Q,Z)}unwrap(){return this._delegate}}Ge.PHONE_SIGN_IN_METHOD=I.P.PHONE_SIGN_IN_METHOD,Ge.PROVIDER_ID=I.P.PROVIDER_ID;const he=I.aC;class Fe{constructor(Q,Z,Ne=J.c.app()){var mt;he(null===(mt=Ne.options)||void 0===mt?void 0:mt.apiKey,"invalid-api-key",{appName:Ne.name}),this._delegate=new I.R(Ne.auth(),Q,Z),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ae(X){X.INTERNAL.registerComponent(new Ie.Yl("auth-compat",Q=>{const Z=Q.getProvider("app-compat").getImmediate(),Ne=Q.getProvider("auth");return new Ds(Z,Ne)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:I.A.EMAIL_SIGNIN,PASSWORD_RESET:I.A.PASSWORD_RESET,RECOVER_EMAIL:I.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:I.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:I.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:I.A.VERIFY_EMAIL}},EmailAuthProvider:I.V,FacebookAuthProvider:I.W,GithubAuthProvider:I.Y,GoogleAuthProvider:I.X,OAuthProvider:I.Z,SAMLAuthProvider:I._,PhoneAuthProvider:Ge,PhoneMultiFactorGenerator:I.m,RecaptchaVerifier:Fe,TwitterAuthProvider:I.$,Auth:Ds,AuthCredential:I.L,Error:O.kx}).setInstantiationMode("LAZY").setMultipleInstances(!1)),X.registerVersion("@firebase/auth-compat","0.5.2")}(J.c)},1528:(Xt,$e,V)=>{function _(I,O,ge,Ee,Ie,Be,je){try{var le=I[Be](je),ue=le.value}catch(Oe){return void ge(Oe)}le.done?O(ue):Promise.resolve(ue).then(Ee,Ie)}function J(I){return function(){var O=this,ge=arguments;return new Promise(function(Ee,Ie){var Be=I.apply(O,ge);function je(ue){_(Be,Ee,Ie,je,le,"next",ue)}function le(ue){_(Be,Ee,Ie,je,le,"throw",ue)}je(void 0)})}}V.d($e,{c:()=>J})},1316:(Xt,$e,V)=>{function O(Re,He){var tt={};for(var Ue in Re)Object.prototype.hasOwnProperty.call(Re,Ue)&&He.indexOf(Ue)<0&&(tt[Ue]=Re[Ue]);if(null!=Re&&"function"==typeof Object.getOwnPropertySymbols){var at=0;for(Ue=Object.getOwnPropertySymbols(Re);at<Ue.length;at++)He.indexOf(Ue[at])<0&&Object.prototype.propertyIsEnumerable.call(Re,Ue[at])&&(tt[Ue[at]]=Re[Ue[at]])}return tt}function Oe(Re,He,tt,Ue){return new(tt||(tt=Promise))(function(st,Dt){function ze(dt){try{De(Ue.next(dt))}catch(yt){Dt(yt)}}function xt(dt){try{De(Ue.throw(dt))}catch(yt){Dt(yt)}}function De(dt){dt.done?st(dt.value):function at(st){return st instanceof tt?st:new tt(function(Dt){Dt(st)})}(dt.value).then(ze,xt)}De((Ue=Ue.apply(Re,He||[])).next())})}function Ze(Re){return this instanceof Ze?(this.v=Re,this):new Ze(Re)}function rt(Re,He,tt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var at,Ue=tt.apply(Re,He||[]),st=[];return at={},Dt("next"),Dt("throw"),Dt("return"),at[Symbol.asyncIterator]=function(){return this},at;function Dt(ut){Ue[ut]&&(at[ut]=function(Yt){return new Promise(function(Wn,Rr){st.push([ut,Yt,Wn,Rr])>1||ze(ut,Yt)})})}function ze(ut,Yt){try{!function xt(ut){ut.value instanceof Ze?Promise.resolve(ut.value.v).then(De,dt):yt(st[0][2],ut)}(Ue[ut](Yt))}catch(Wn){yt(st[0][3],Wn)}}function De(ut){ze("next",ut)}function dt(ut){ze("throw",ut)}function yt(ut,Yt){ut(Yt),st.shift(),st.length&&ze(st[0][0],st[0][1])}}function Ot(Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var tt,He=Re[Symbol.asyncIterator];return He?He.call(Re):(Re=function Ve(Re){var He="function"==typeof Symbol&&Symbol.iterator,tt=He&&Re[He],Ue=0;if(tt)return tt.call(Re);if(Re&&"number"==typeof Re.length)return{next:function(){return Re&&Ue>=Re.length&&(Re=void 0),{value:Re&&Re[Ue++],done:!Re}}};throw new TypeError(He?"Object is not iterable.":"Symbol.iterator is not defined.")}(Re),tt={},Ue("next"),Ue("throw"),Ue("return"),tt[Symbol.asyncIterator]=function(){return this},tt);function Ue(st){tt[st]=Re[st]&&function(Dt){return new Promise(function(ze,xt){!function at(st,Dt,ze,xt){Promise.resolve(xt).then(function(De){st({value:De,done:ze})},Dt)}(ze,xt,(Dt=Re[st](Dt)).done,Dt.value)})}}}V.d($e,{U1:()=>Ze,kH:()=>Oe,mA:()=>Ot,o7:()=>rt,sX:()=>O}),"function"==typeof SuppressedError&&SuppressedError}},Xt=>{Xt(Xt.s=2736)}]);