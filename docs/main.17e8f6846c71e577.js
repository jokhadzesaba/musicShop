"use strict";(self.webpackChunkmusicshop=self.webpackChunkmusicshop||[]).push([[590],{1944:($t,We,V)=>{V.d(We,{$:()=>ga,A:()=>le,G:()=>Se,K:()=>ji,L:()=>$r,N:()=>Ei,P:()=>ir,R:()=>Ft,U:()=>yn,V:()=>xs,W:()=>Wo,X:()=>Ya,Y:()=>Vc,Z:()=>Ks,_:()=>pa,a:()=>ro,a0:()=>q,a1:()=>Ma,a2:()=>Qs,a3:()=>dr,a4:()=>ks,a5:()=>Xs,a6:()=>zo,a7:()=>Bc,a8:()=>Mn,a9:()=>hr,aA:()=>Bn,aB:()=>qe,aC:()=>xe,aD:()=>Ts,aE:()=>mt,aF:()=>En,aG:()=>rc,aH:()=>Vs,aI:()=>Ca,aJ:()=>dn,aN:()=>go,aQ:()=>js,aa:()=>mc,ab:()=>wo,ac:()=>Ko,ad:()=>vu,ae:()=>hs,af:()=>ar,ag:()=>eo,ah:()=>Lr,ak:()=>$c,al:()=>ti,am:()=>Gc,ap:()=>Qn,aq:()=>rt,as:()=>To,at:()=>Eu,au:()=>bt,av:()=>Xt,aw:()=>Ye,ax:()=>Ee,ay:()=>sc,az:()=>Yu,b:()=>yl,c:()=>Wd,d:()=>Yh,e:()=>zu,f:()=>mr,g:()=>Ic,h:()=>Ec,i:()=>tc,j:()=>Cc,k:()=>hd,l:()=>La,m:()=>ac,o:()=>cc,p:()=>je,r:()=>Do,s:()=>qi,u:()=>gp});var _=V(1528),Q=V(7144),A=V(9360),F=V(5976),ye=V(1316),G=V(4920);const je={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},le={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Se=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Ve=function we(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},be=new Q.UR("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),pe=new F.YJ("@firebase/auth");function Ke(w,...m){pe.logLevel<=F.Ge.ERROR&&pe.error(`Auth (${A.SDK_VERSION}): ${w}`,...m)}function Ee(w,...m){throw Dt(w,...m)}function qe(w,...m){return Dt(w,...m)}function de(w,m,v){const S=Object.assign(Object.assign({},Ve()),{[m]:v});return new Q.UR("auth","Firebase",S).create(m,{appName:w.name})}function wt(w,m,v){if(!(m instanceof v))throw v.name!==m.constructor.name&&Ee(w,"argument-error"),de(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dt(w,...m){if("string"!=typeof w){const v=m[0],S=[...m.slice(1)];return S[0]&&(S[0].appName=w.name),w._errorFactory.create(v,...S)}return be.create(w,...m)}function xe(w,m,...v){if(!w)throw Dt(m,...v)}function Et(w){const m="INTERNAL ASSERTION FAILED: "+w;throw Ke(m),new Error(m)}function bt(w,m){w||Et(m)}function ht(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Le(){return"http:"===et()||"https:"===et()}function et(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Nt{constructor(m,v){this.shortDelay=m,this.longDelay=v,bt(v>m,"Short delay should be less than long delay!"),this.isMobile=(0,Q.AV)()||(0,Q.AL)()}get(){return function tt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Le()||(0,Q.Cc)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function tn(w,m){bt(w.emulator,"Emulator should always be set here");const{url:v}=w.emulator;return m?`${v}${m.startsWith("/")?m.slice(1):m}`:v}class Oe{static initialize(m,v,S){this.fetchImpl=m,v&&(this.headersImpl=v),S&&(this.responseImpl=S)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ze={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},st=new Nt(3e4,6e4);function Ge(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function lt(w,m,v,S){return ut.apply(this,arguments)}function ut(){return(ut=(0,_.c)(function*(w,m,v,S,z={}){return Tt(w,z,(0,_.c)(function*(){let re={},Me={};S&&("GET"===m?Me=S:re={body:JSON.stringify(S)});const it=(0,Q.ik)(Object.assign({key:w.config.apiKey},Me)).slice(1),At=yield w._getAdditionalHeaders();return At["Content-Type"]="application/json",w.languageCode&&(At["X-Firebase-Locale"]=w.languageCode),Oe.fetch()(_n(w,w.config.apiHost,v,it),Object.assign({method:m,headers:At,referrerPolicy:"no-referrer"},re))}))})).apply(this,arguments)}function Tt(w,m,v){return qt.apply(this,arguments)}function qt(){return(qt=(0,_.c)(function*(w,m,v){w._canInitEmulator=!1;const S=Object.assign(Object.assign({},ze),m);try{const z=new Kt(w),re=yield Promise.race([v(),z.promise]);z.clearNetworkTimeout();const Me=yield re.json();if("needConfirmation"in Me)throw wn(w,"account-exists-with-different-credential",Me);if(re.ok&&!("errorMessage"in Me))return Me;{const it=re.ok?Me.errorMessage:Me.error.message,[At,cn]=it.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===At)throw wn(w,"credential-already-in-use",Me);if("EMAIL_EXISTS"===At)throw wn(w,"email-already-in-use",Me);if("USER_DISABLED"===At)throw wn(w,"user-disabled",Me);const Pn=S[At]||At.toLowerCase().replace(/[_\s]+/g,"-");if(cn)throw de(w,Pn,cn);Ee(w,Pn)}}catch(z){if(z instanceof Q.kx)throw z;Ee(w,"network-request-failed",{message:String(z)})}})).apply(this,arguments)}function Zt(w,m,v,S){return en.apply(this,arguments)}function en(){return(en=(0,_.c)(function*(w,m,v,S,z={}){const re=yield lt(w,m,v,S,z);return"mfaPendingCredential"in re&&Ee(w,"multi-factor-auth-required",{_serverResponse:re}),re})).apply(this,arguments)}function _n(w,m,v,S){const z=`${m}${v}?${S}`;return w.config.emulator?tn(w.config,z):`${w.config.apiScheme}://${z}`}function Tn(w){switch(w){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Kt{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((v,S)=>{this.timer=setTimeout(()=>S(qe(this.auth,"network-request-failed")),st.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wn(w,m,v){const S={appName:w.name};v.email&&(S.email=v.email),v.phoneNumber&&(S.phoneNumber=v.phoneNumber);const z=qe(w,m,S);return z.customData._tokenResponse=v,z}function Wn(w){return void 0!==w&&void 0!==w.getResponse}function Rr(w){return void 0!==w&&void 0!==w.enterprise}class Bt{constructor(m){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=m.recaptchaEnforcementState}getProviderEnforcementState(m){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const v of this.recaptchaEnforcementState)if(v.provider&&v.provider===m)return Tn(v.enforcementState);return null}isProviderEnabled(m){return"ENFORCE"===this.getProviderEnforcementState(m)||"AUDIT"===this.getProviderEnforcementState(m)}}function Lt(){return(Lt=(0,_.c)(function*(w){return(yield lt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function zr(w,m){return kn.apply(this,arguments)}function kn(){return(kn=(0,_.c)(function*(w,m){return lt(w,"GET","/v2/recaptchaConfig",Ge(w,m))})).apply(this,arguments)}function yr(){return(yr=(0,_.c)(function*(w,m){return lt(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function rr(){return(rr=(0,_.c)(function*(w,m){return lt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function gn(){return(gn=(0,_.c)(function*(w,m){return lt(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function ii(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Bi(){return(Bi=(0,_.c)(function*(w,m=!1){const v=(0,Q.Yj)(w),S=yield v.getIdToken(m),z=bn(S);xe(z&&z.exp&&z.auth_time&&z.iat,v.auth,"internal-error");const re="object"==typeof z.firebase?z.firebase:void 0,Me=re?.sign_in_provider;return{claims:z,token:S,authTime:ii(Oi(z.auth_time)),issuedAtTime:ii(Oi(z.iat)),expirationTime:ii(Oi(z.exp)),signInProvider:Me||null,signInSecondFactor:re?.sign_in_second_factor||null}})).apply(this,arguments)}function Oi(w){return 1e3*Number(w)}function bn(w){const[m,v,S]=w.split(".");if(void 0===m||void 0===v||void 0===S)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const z=(0,Q.WW)(v);return z?JSON.parse(z):(Ke("Failed to decode base64 JWT payload"),null)}catch(z){return Ke("Caught error parsing JWT payload as JSON",z?.toString()),null}}function Tr(w,m){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,_.c)(function*(w,m,v=!1){if(v)return m;try{return yield m}catch(S){throw S instanceof Q.kx&&function Mr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}(S)&&w.auth.currentUser===w&&(yield w.auth.signOut()),S}})).apply(this,arguments)}class Gn{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var v;if(m){const S=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),S}{this.errorBackoff=3e4;const z=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,z)}}schedule(m=!1){var v=this;if(!this.isRunning)return;const S=this.getInterval(m);this.timerId=setTimeout((0,_.c)(function*(){yield v.iteration()}),S)}iteration(){var m=this;return(0,_.c)(function*(){try{yield m.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&m.schedule(!0))}m.schedule()})()}}class wi{constructor(m,v){this.createdAt=m,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=ii(this.lastLoginAt),this.creationTime=ii(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jr(w){return Nr.apply(this,arguments)}function Nr(){return Nr=(0,_.c)(function*(w){var m;const v=w.auth,S=yield w.getIdToken(),z=yield Tr(w,function vn(w,m){return gn.apply(this,arguments)}(v,{idToken:S}));xe(z?.users.length,v,"internal-error");const re=z.users[0];w._notifyReloadListener(re);const Me=null!==(m=re.providerUserInfo)&&void 0!==m&&m.length?function He(w){return w.map(m=>{var{providerId:v}=m,S=(0,ye.sX)(m,["providerId"]);return{providerId:v,uid:S.rawId||"",displayName:S.displayName||null,email:S.email||null,phoneNumber:S.phoneNumber||null,photoURL:S.photoUrl||null}})}(re.providerUserInfo):[],it=function gt(w,m){return[...w.filter(S=>!m.some(z=>z.providerId===S.providerId)),...m]}(w.providerData,Me),Pn=!!w.isAnonymous&&!(w.email&&re.passwordHash||it?.length),tr={uid:re.localId,displayName:re.displayName||null,photoURL:re.photoUrl||null,email:re.email||null,emailVerified:re.emailVerified||!1,phoneNumber:re.phoneNumber||null,tenantId:re.tenantId||null,providerData:it,metadata:new wi(re.createdAt,re.lastLoginAt),isAnonymous:Pn};Object.assign(w,tr)}),Nr.apply(this,arguments)}function pi(){return(pi=(0,_.c)(function*(w){const m=(0,Q.Yj)(w);yield jr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Be(){return(Be=(0,_.c)(function*(w,m){const v=yield Tt(w,{},(0,_.c)(function*(){const S=(0,Q.ik)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:z,apiKey:re}=w.config,Me=_n(w,z,"/v1/token",`key=${re}`),it=yield w._getAdditionalHeaders();return it["Content-Type"]="application/x-www-form-urlencoded",Oe.fetch()(Me,{method:"POST",headers:it,body:S})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}function ce(){return(ce=(0,_.c)(function*(w,m){return lt(w,"POST","/v2/accounts:revokeToken",Ge(w,m))})).apply(this,arguments)}class Z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){xe(m.idToken,"internal-error"),xe(typeof m.idToken<"u","internal-error"),xe(typeof m.refreshToken<"u","internal-error");const v="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Fn(w){const m=bn(w);return xe(m,"internal-error"),xe(typeof m.exp<"u","internal-error"),xe(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,v)}getToken(m,v=!1){var S=this;return(0,_.c)(function*(){return xe(!S.accessToken||S.refreshToken,m,"user-token-expired"),v||!S.accessToken||S.isExpired?S.refreshToken?(yield S.refresh(m,S.refreshToken),S.accessToken):null:S.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,v){var S=this;return(0,_.c)(function*(){const{accessToken:z,refreshToken:re,expiresIn:Me}=yield function ge(w,m){return Be.apply(this,arguments)}(m,v);S.updateTokensAndExpiration(z,re,Number(Me))})()}updateTokensAndExpiration(m,v,S){this.refreshToken=v||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*S}static fromJSON(m,v){const{refreshToken:S,accessToken:z,expirationTime:re}=v,Me=new Z;return S&&(xe("string"==typeof S,"internal-error",{appName:m}),Me.refreshToken=S),z&&(xe("string"==typeof z,"internal-error",{appName:m}),Me.accessToken=z),re&&(xe("number"==typeof re,"internal-error",{appName:m}),Me.expirationTime=re),Me}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Z,this.toJSON())}_performRefresh(){return Et("not implemented")}}function X(w,m){xe("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class ee{constructor(m){var{uid:v,auth:S,stsTokenManager:z}=m,re=(0,ye.sX)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=S,this.stsTokenManager=z,this.accessToken=z.accessToken,this.displayName=re.displayName||null,this.email=re.email||null,this.emailVerified=re.emailVerified||!1,this.phoneNumber=re.phoneNumber||null,this.photoURL=re.photoURL||null,this.isAnonymous=re.isAnonymous||!1,this.tenantId=re.tenantId||null,this.providerData=re.providerData?[...re.providerData]:[],this.metadata=new wi(re.createdAt||void 0,re.lastLoginAt||void 0)}getIdToken(m){var v=this;return(0,_.c)(function*(){const S=yield Tr(v,v.stsTokenManager.getToken(v.auth,m));return xe(S,v.auth,"internal-error"),v.accessToken!==S&&(v.accessToken=S,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),S})()}getIdTokenResult(m){return function qr(w){return Bi.apply(this,arguments)}(this,m)}reload(){return function Ds(w){return pi.apply(this,arguments)}(this)}_assign(m){this!==m&&(xe(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(v=>Object.assign({},v)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const v=new ee(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(m){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,v=!1){var S=this;return(0,_.c)(function*(){let z=!1;m.idToken&&m.idToken!==S.stsTokenManager.accessToken&&(S.stsTokenManager.updateFromServerResponse(m),z=!0),v&&(yield jr(S)),yield S.auth._persistUserIfCurrent(S),z&&S.auth._notifyListenersIfCurrent(S)})()}delete(){var m=this;return(0,_.c)(function*(){const v=yield m.getIdToken();return yield Tr(m,function Zr(w,m){return yr.apply(this,arguments)}(m.auth,{idToken:v})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,v){var S,z,re,Me,it,At,cn,Pn;const tr=null!==(S=v.displayName)&&void 0!==S?S:void 0,_o=null!==(z=v.email)&&void 0!==z?z:void 0,ms=null!==(re=v.phoneNumber)&&void 0!==re?re:void 0,tu=null!==(Me=v.photoURL)&&void 0!==Me?Me:void 0,yo=null!==(it=v.tenantId)&&void 0!==it?it:void 0,vo=null!==(At=v._redirectEventId)&&void 0!==At?At:void 0,uc=null!==(cn=v.createdAt)&&void 0!==cn?cn:void 0,pd=null!==(Pn=v.lastLoginAt)&&void 0!==Pn?Pn:void 0,{uid:So,emailVerified:bc,isAnonymous:Mu,providerData:gd,stsTokenManager:_s}=v;xe(So&&_s,m,"internal-error");const nr=Z.fromJSON(this.name,_s);xe("string"==typeof So,m,"internal-error"),X(tr,m.name),X(_o,m.name),xe("boolean"==typeof bc,m,"internal-error"),xe("boolean"==typeof Mu,m,"internal-error"),X(ms,m.name),X(tu,m.name),X(yo,m.name),X(vo,m.name),X(uc,m.name),X(pd,m.name);const Al=new ee({uid:So,auth:m,email:_o,emailVerified:bc,displayName:tr,isAnonymous:Mu,photoURL:tu,phoneNumber:ms,tenantId:yo,stsTokenManager:nr,createdAt:uc,lastLoginAt:pd});return gd&&Array.isArray(gd)&&(Al.providerData=gd.map(Rc=>Object.assign({},Rc))),vo&&(Al._redirectEventId=vo),Al}static _fromIdTokenResponse(m,v,S=!1){return(0,_.c)(function*(){const z=new Z;z.updateFromServerResponse(v);const re=new ee({uid:v.localId,auth:m,stsTokenManager:z,isAnonymous:S});return yield jr(re),re})()}}const Fe=new Map;function mt(w){bt(w instanceof Function,"Expected a class definition");let m=Fe.get(w);return m?(bt(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,Fe.set(w,m),m)}const yn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.c)(function*(){return!0})()}_set(v,S){var z=this;return(0,_.c)(function*(){z.storage[v]=S})()}_get(v){var S=this;return(0,_.c)(function*(){const z=S.storage[v];return void 0===z?null:z})()}_remove(v){var S=this;return(0,_.c)(function*(){delete S.storage[v]})()}_addListener(v,S){}_removeListener(v,S){}}return w.type="NONE",w})();function En(w,m,v){return`firebase:${w}:${m}:${v}`}class On{constructor(m,v,S){this.persistence=m,this.auth=v,this.userKey=S;const{config:z,name:re}=this.auth;this.fullUserKey=En(this.userKey,z.apiKey,re),this.fullPersistenceKey=En("persistence",z.apiKey,re),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,_.c)(function*(){const v=yield m.persistence._get(m.fullUserKey);return v?ee._fromJSON(m.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var v=this;return(0,_.c)(function*(){if(v.persistence===m)return;const S=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=m,S?v.setCurrentUser(S):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,v,S="authUser"){return(0,_.c)(function*(){if(!v.length)return new On(mt(yn),m,S);const z=(yield Promise.all(v.map(function(){var cn=(0,_.c)(function*(Pn){if(yield Pn._isAvailable())return Pn});return function(Pn){return cn.apply(this,arguments)}}()))).filter(cn=>cn);let re=z[0]||mt(yn);const Me=En(S,m.config.apiKey,m.name);let it=null;for(const cn of v)try{const Pn=yield cn._get(Me);if(Pn){const tr=ee._fromJSON(m,Pn);cn!==re&&(it=tr),re=cn;break}}catch{}const At=z.filter(cn=>cn._shouldAllowMigration);return re._shouldAllowMigration&&At.length?(re=At[0],it&&(yield re._set(Me,it.toJSON())),yield Promise.all(v.map(function(){var cn=(0,_.c)(function*(Pn){if(Pn!==re)try{yield Pn._remove(Me)}catch{}});return function(Pn){return cn.apply(this,arguments)}}())),new On(re,m,S)):new On(re,m,S)})()}}function Yt(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Re(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Dr(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Xe(m))return"Blackberry";if(Ct(m))return"Webos";if(ln(m))return"Safari";if((m.includes("chrome/")||Ln(m))&&!m.includes("edge/"))return"Chrome";if(Ye(m))return"Android";{const S=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===S?.length)return S[1]}return"Other"}function Dr(w=(0,Q.Su)()){return/firefox\//i.test(w)}function ln(w=(0,Q.Su)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Ln(w=(0,Q.Su)()){return/crios\//i.test(w)}function Re(w=(0,Q.Su)()){return/iemobile/i.test(w)}function Ye(w=(0,Q.Su)()){return/android/i.test(w)}function Xe(w=(0,Q.Su)()){return/blackberry/i.test(w)}function Ct(w=(0,Q.Su)()){return/webos/i.test(w)}function Xt(w=(0,Q.Su)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function Bn(w=(0,Q.Su)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Kr(w=(0,Q.Su)()){return Xt(w)||Ye(w)||Ct(w)||Xe(w)||/windows phone/i.test(w)||Re(w)}function oe(w,m=[]){let v;switch(w){case"Browser":v=Yt((0,Q.Su)());break;case"Worker":v=`${Yt((0,Q.Su)())}-${w}`;break;default:v=w}const S=m.length?m.join(","):"FirebaseCore-web";return`${v}/JsCore/${A.SDK_VERSION}/${S}`}class ve{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,v){const S=re=>new Promise((Me,it)=>{try{Me(m(re))}catch(At){it(At)}});S.onAbort=v,this.queue.push(S);const z=this.queue.length-1;return()=>{this.queue[z]=()=>Promise.resolve()}}runMiddleware(m){var v=this;return(0,_.c)(function*(){if(v.auth.currentUser===m)return;const S=[];try{for(const z of v.queue)yield z(m),z.onAbort&&S.push(z.onAbort)}catch(z){S.reverse();for(const re of S)try{re()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:z?.message})}})()}}function ft(){return(ft=(0,_.c)(function*(w,m={}){return lt(w,"GET","/v2/passwordPolicy",Ge(w,m))})).apply(this,arguments)}class xt{constructor(m){var v,S,z,re;const Me=m.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(v=Me.minPasswordLength)&&void 0!==v?v:6,Me.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Me.maxPasswordLength),void 0!==Me.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Me.containsLowercaseCharacter),void 0!==Me.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Me.containsUppercaseCharacter),void 0!==Me.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Me.containsNumericCharacter),void 0!==Me.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Me.containsNonAlphanumericCharacter),this.enforcementState=m.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(z=null===(S=m.allowedNonAlphanumericCharacters)||void 0===S?void 0:S.join(""))&&void 0!==z?z:"",this.forceUpgradeOnSignin=null!==(re=m.forceUpgradeOnSignin)&&void 0!==re&&re,this.schemaVersion=m.schemaVersion}validatePassword(m){var v,S,z,re,Me,it;const At={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(m,At),this.validatePasswordCharacterOptions(m,At),At.isValid&&(At.isValid=null===(v=At.meetsMinPasswordLength)||void 0===v||v),At.isValid&&(At.isValid=null===(S=At.meetsMaxPasswordLength)||void 0===S||S),At.isValid&&(At.isValid=null===(z=At.containsLowercaseLetter)||void 0===z||z),At.isValid&&(At.isValid=null===(re=At.containsUppercaseLetter)||void 0===re||re),At.isValid&&(At.isValid=null===(Me=At.containsNumericCharacter)||void 0===Me||Me),At.isValid&&(At.isValid=null===(it=At.containsNonAlphanumericCharacter)||void 0===it||it),At}validatePasswordLengthOptions(m,v){const S=this.customStrengthOptions.minPasswordLength,z=this.customStrengthOptions.maxPasswordLength;S&&(v.meetsMinPasswordLength=m.length>=S),z&&(v.meetsMaxPasswordLength=m.length<=z)}validatePasswordCharacterOptions(m,v){let S;this.updatePasswordCharacterOptionsStatuses(v,!1,!1,!1,!1);for(let z=0;z<m.length;z++)S=m.charAt(z),this.updatePasswordCharacterOptionsStatuses(v,S>="a"&&S<="z",S>="A"&&S<="Z",S>="0"&&S<="9",this.allowedNonAlphanumericCharacters.includes(S))}updatePasswordCharacterOptionsStatuses(m,v,S,z,re){this.customStrengthOptions.containsLowercaseLetter&&(m.containsLowercaseLetter||(m.containsLowercaseLetter=v)),this.customStrengthOptions.containsUppercaseLetter&&(m.containsUppercaseLetter||(m.containsUppercaseLetter=S)),this.customStrengthOptions.containsNumericCharacter&&(m.containsNumericCharacter||(m.containsNumericCharacter=z)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(m.containsNonAlphanumericCharacter||(m.containsNonAlphanumericCharacter=re))}}class Gt{constructor(m,v,S,z){this.app=m,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=S,this.config=z,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rn(this),this.idTokenSubscription=new rn(this),this.beforeStateQueue=new ve(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=be,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=z.sdkClientVersion}_initializeWithPersistence(m,v){var S=this;return v&&(this._popupRedirectResolver=mt(v)),this._initializationPromise=this.queue((0,_.c)(function*(){var z,re;if(!S._deleted&&(S.persistenceManager=yield On.create(S,m),!S._deleted)){if(null!==(z=S._popupRedirectResolver)&&void 0!==z&&z._shouldInitProactively)try{yield S._popupRedirectResolver._initialize(S)}catch{}yield S.initializeCurrentUser(v),S.lastNotifiedUid=(null===(re=S.currentUser)||void 0===re?void 0:re.uid)||null,!S._deleted&&(S._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,_.c)(function*(){if(m._deleted)return;const v=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||v){if(m.currentUser&&v&&m.currentUser.uid===v.uid)return m._currentUser._assign(v),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(v,!0)}})()}initializeCurrentUser(m){var v=this;return(0,_.c)(function*(){var S;const z=yield v.assertedPersistence.getCurrentUser();let re=z,Me=!1;if(m&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const it=null===(S=v.redirectUser)||void 0===S?void 0:S._redirectEventId,At=re?._redirectEventId,cn=yield v.tryRedirectSignIn(m);(!it||it===At)&&cn?.user&&(re=cn.user,Me=!0)}if(!re)return v.directlySetCurrentUser(null);if(!re._redirectEventId){if(Me)try{yield v.beforeStateQueue.runMiddleware(re)}catch(it){re=z,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(it))}return re?v.reloadAndSetCurrentUserOrClear(re):v.directlySetCurrentUser(null)}return xe(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===re._redirectEventId?v.directlySetCurrentUser(re):v.reloadAndSetCurrentUserOrClear(re)})()}tryRedirectSignIn(m){var v=this;return(0,_.c)(function*(){let S=null;try{S=yield v._popupRedirectResolver._completeRedirectFn(v,m,!0)}catch{yield v._setRedirectUser(null)}return S})()}reloadAndSetCurrentUserOrClear(m){var v=this;return(0,_.c)(function*(){try{yield jr(m)}catch(S){if("auth/network-request-failed"!==S?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function nt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,_.c)(function*(){m._deleted=!0})()}updateCurrentUser(m){var v=this;return(0,_.c)(function*(){const S=m?(0,Q.Yj)(m):null;return S&&xe(S.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(S&&S._clone(v))})()}_updateCurrentUser(m,v=!1){var S=this;return(0,_.c)(function*(){if(!S._deleted)return m&&xe(S.tenantId===m.tenantId,S,"tenant-id-mismatch"),v||(yield S.beforeStateQueue.runMiddleware(m)),S.queue((0,_.c)(function*(){yield S.directlySetCurrentUser(m),S.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,_.c)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var v=this;return this.queue((0,_.c)(function*(){yield v.assertedPersistence.setPersistence(mt(m))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(m){var v=this;return(0,_.c)(function*(){v._getPasswordPolicyInternal()||(yield v._updatePasswordPolicy());const S=v._getPasswordPolicyInternal();return S.schemaVersion!==v.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(v._errorFactory.create("unsupported-password-policy-schema-version",{})):S.validatePassword(m)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var m=this;return(0,_.c)(function*(){const v=yield function Ce(w){return ft.apply(this,arguments)}(m),S=new xt(v);null===m.tenantId?m._projectPasswordPolicy=S:m._tenantPasswordPolicies[m.tenantId]=S})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new Q.UR("auth","Firebase",m())}onAuthStateChanged(m,v,S){return this.registerStateListener(this.authStateSubscription,m,v,S)}beforeAuthStateChanged(m,v){return this.beforeStateQueue.pushCallback(m,v)}onIdTokenChanged(m,v,S){return this.registerStateListener(this.idTokenSubscription,m,v,S)}authStateReady(){return new Promise((m,v)=>{if(this.currentUser)m();else{const S=this.onAuthStateChanged(()=>{S(),m()},v)}})}revokeAccessToken(m){var v=this;return(0,_.c)(function*(){if(v.currentUser){const S=yield v.currentUser.getIdToken(),z={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:m,idToken:S};null!=v.tenantId&&(z.tenantId=v.tenantId),yield function ie(w,m){return ce.apply(this,arguments)}(v,z)}})()}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,v){var S=this;return(0,_.c)(function*(){const z=yield S.getOrInitRedirectPersistenceManager(v);return null===m?z.removeCurrentUser():z.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var v=this;return(0,_.c)(function*(){if(!v.redirectPersistenceManager){const S=m&&mt(m)||v._popupRedirectResolver;xe(S,v,"argument-error"),v.redirectPersistenceManager=yield On.create(v,[mt(S._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(m){var v=this;return(0,_.c)(function*(){var S,z;return v._isInitialized&&(yield v.queue((0,_.c)(function*(){}))),(null===(S=v._currentUser)||void 0===S?void 0:S._redirectEventId)===m?v._currentUser:(null===(z=v.redirectUser)||void 0===z?void 0:z._redirectEventId)===m?v.redirectUser:null})()}_persistUserIfCurrent(m){var v=this;return(0,_.c)(function*(){if(m===v.currentUser)return v.queue((0,_.c)(function*(){return v.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const S=null!==(v=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==S&&(this.lastNotifiedUid=S,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,v,S,z){if(this._deleted)return()=>{};const re="function"==typeof v?v:v.next.bind(v);let Me=!1;const it=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(it,this,"internal-error"),it.then(()=>{Me||re(this.currentUser)}),"function"==typeof v){const At=m.addObserver(v,S,z);return()=>{Me=!0,At()}}{const At=m.addObserver(v);return()=>{Me=!0,At()}}}directlySetCurrentUser(m){var v=this;return(0,_.c)(function*(){v.currentUser&&v.currentUser!==m&&v._currentUser._stopProactiveRefresh(),m&&v.isProactiveRefreshEnabled&&m._startProactiveRefresh(),v.currentUser=m,m?yield v.assertedPersistence.setCurrentUser(m):yield v.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=oe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,_.c)(function*(){var v;const S={"X-Client-Version":m.clientVersion};m.app.options.appId&&(S["X-Firebase-gmpid"]=m.app.options.appId);const z=yield null===(v=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();z&&(S["X-Firebase-Client"]=z);const re=yield m._getAppCheckToken();return re&&(S["X-Firebase-AppCheck"]=re),S})()}_getAppCheckToken(){var m=this;return(0,_.c)(function*(){var v;const S=yield null===(v=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return S?.error&&function Ue(w,...m){pe.logLevel<=F.Ge.WARN&&pe.warn(`Auth (${A.SDK_VERSION}): ${w}`,...m)}(`Error while retrieving App Check token: ${S.error}`),S?.token})()}}function dn(w){return(0,Q.Yj)(w)}class rn{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,Q.my)(v=>this.observer=v)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let zn={loadJS:()=>(0,_.c)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sr(w){return zn.loadJS(w)}function kr(w){return`__${w}${Math.floor(1e6*Math.random())}`}class $n{constructor(m){this.type="recaptcha-enterprise",this.auth=dn(m)}verify(m="verify",v=!1){var S=this;return(0,_.c)(function*(){function re(){return re=(0,_.c)(function*(it){if(!v){if(null==it.tenantId&&null!=it._agentRecaptchaConfig)return it._agentRecaptchaConfig.siteKey;if(null!=it.tenantId&&void 0!==it._tenantRecaptchaConfigs[it.tenantId])return it._tenantRecaptchaConfigs[it.tenantId].siteKey}return new Promise(function(){var At=(0,_.c)(function*(cn,Pn){zr(it,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tr=>{if(void 0!==tr.recaptchaKey){const _o=new Bt(tr);return null==it.tenantId?it._agentRecaptchaConfig=_o:it._tenantRecaptchaConfigs[it.tenantId]=_o,cn(_o.siteKey)}Pn(new Error("recaptcha Enterprise site key undefined"))}).catch(tr=>{Pn(tr)})});return function(cn,Pn){return At.apply(this,arguments)}}())}),re.apply(this,arguments)}function Me(it,At,cn){const Pn=window.grecaptcha;Rr(Pn)?Pn.enterprise.ready(()=>{Pn.enterprise.execute(it,{action:m}).then(tr=>{At(tr)}).catch(()=>{At("NO_RECAPTCHA")})}):cn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((it,At)=>{(function z(it){return re.apply(this,arguments)})(S.auth).then(cn=>{if(!v&&Rr(window.grecaptcha))Me(cn,it,At);else{if(typeof window>"u")return void At(new Error("RecaptchaVerifier is only supported in browser"));let Pn=function ns(){return zn.recaptchaEnterpriseScript}();0!==Pn.length&&(Pn+=cn),sr(Pn).then(()=>{Me(cn,it,At)}).catch(tr=>{At(tr)})}}).catch(cn=>{At(cn)})})})()}}function fr(w,m,v){return rs.apply(this,arguments)}function rs(){return(rs=(0,_.c)(function*(w,m,v,S=!1){const z=new $n(w);let re;try{re=yield z.verify(v)}catch{re=yield z.verify(v,!0)}const Me=Object.assign({},m);return Object.assign(Me,S?{captchaResp:re}:{captchaResponse:re}),Object.assign(Me,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Me,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Me})).apply(this,arguments)}function Di(w,m,v,S){return si.apply(this,arguments)}function si(){return si=(0,_.c)(function*(w,m,v,S){var z;if(null!==(z=w._getRecaptchaConfig())&&void 0!==z&&z.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const re=yield fr(w,m,v,"getOobCode"===v);return S(w,re)}return S(w,m).catch(function(){var re=(0,_.c)(function*(Me){if("auth/missing-recaptcha-token"===Me.code){console.log(`${v} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const it=yield fr(w,m,v,"getOobCode"===v);return S(w,it)}return Promise.reject(Me)});return function(Me){return re.apply(this,arguments)}}())}),si.apply(this,arguments)}function ji(w,m,v){const S=dn(w);xe(S._canInitEmulator,S,"emulator-config-failed"),xe(/^https?:\/\//.test(m),S,"invalid-emulator-scheme");const z=!!v?.disableWarnings,re=Go(m),{host:Me,port:it}=function Ka(w){const m=Go(w),v=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!v)return{host:"",port:null};const S=v[2].split("@").pop()||"",z=/^(\[[^\]]+\])(:|$)/.exec(S);if(z){const re=z[1];return{host:re,port:Zn(S.substr(re.length+1))}}{const[re,Me]=S.split(":");return{host:re,port:Zn(Me)}}}(m);S.config.emulator={url:`${re}//${Me}${null===it?"":`:${it}`}/`},S.settings.appVerificationDisabledForTesting=!0,S.emulatorConfig=Object.freeze({host:Me,port:it,protocol:re.replace(":",""),options:Object.freeze({disableWarnings:z})}),z||function Si(){function w(){const m=document.createElement("p"),v=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Go(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function Zn(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class $r{constructor(m,v){this.providerId=m,this.signInMethod=v}toJSON(){return Et("not implemented")}_getIdTokenResponse(m){return Et("not implemented")}_linkToIdToken(m,v){return Et("not implemented")}_getReauthenticationResolver(m){return Et("not implemented")}}function Ss(w,m){return oi.apply(this,arguments)}function oi(){return(oi=(0,_.c)(function*(w,m){return lt(w,"POST","/v1/accounts:resetPassword",Ge(w,m))})).apply(this,arguments)}function ia(){return(ia=(0,_.c)(function*(w,m){return lt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Bs(w,m){return zs.apply(this,arguments)}function zs(){return(zs=(0,_.c)(function*(w,m){return lt(w,"POST","/v1/accounts:signUp",m)})).apply(this,arguments)}function Qr(){return(Qr=(0,_.c)(function*(w,m){return lt(w,"POST","/v1/accounts:update",Ge(w,m))})).apply(this,arguments)}function kt(w,m){return mn.apply(this,arguments)}function mn(){return(mn=(0,_.c)(function*(w,m){return Zt(w,"POST","/v1/accounts:signInWithPassword",Ge(w,m))})).apply(this,arguments)}function Ar(w,m){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,_.c)(function*(w,m){return lt(w,"POST","/v1/accounts:sendOobCode",Ge(w,m))})).apply(this,arguments)}function Ni(){return(Ni=(0,_.c)(function*(w,m){return Ar(w,m)})).apply(this,arguments)}function $i(w,m){return or.apply(this,arguments)}function or(){return(or=(0,_.c)(function*(w,m){return Ar(w,m)})).apply(this,arguments)}function ki(w,m){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,_.c)(function*(w,m){return Ar(w,m)})).apply(this,arguments)}function Pi(){return(Pi=(0,_.c)(function*(w,m){return Ar(w,m)})).apply(this,arguments)}function qs(){return(qs=(0,_.c)(function*(w,m){return Zt(w,"POST","/v1/accounts:signInWithEmailLink",Ge(w,m))})).apply(this,arguments)}function Ps(){return(Ps=(0,_.c)(function*(w,m){return Zt(w,"POST","/v1/accounts:signInWithEmailLink",Ge(w,m))})).apply(this,arguments)}class bs extends $r{constructor(m,v,S,z=null){super("password",S),this._email=m,this._password=v,this._tenantId=z}static _fromEmailAndPassword(m,v){return new bs(m,v,"password")}static _fromEmailAndCode(m,v,S=null){return new bs(m,v,"emailLink",S)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(m){var v=this;return(0,_.c)(function*(){switch(v.signInMethod){case"password":return Di(m,{returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",kt);case"emailLink":return function ho(w,m){return qs.apply(this,arguments)}(m,{email:v._email,oobCode:v._password});default:Ee(m,"internal-error")}})()}_linkToIdToken(m,v){var S=this;return(0,_.c)(function*(){switch(S.signInMethod){case"password":return Di(m,{idToken:v,returnSecureToken:!0,email:S._email,password:S._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bs);case"emailLink":return function li(w,m){return Ps.apply(this,arguments)}(m,{idToken:v,email:S._email,oobCode:S._password});default:Ee(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function bi(w,m){return is.apply(this,arguments)}function is(){return(is=(0,_.c)(function*(w,m){return Zt(w,"POST","/v1/accounts:signInWithIdp",Ge(w,m))})).apply(this,arguments)}class Ei extends $r{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const v=new Ei(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(v.idToken=m.idToken),m.accessToken&&(v.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(v.nonce=m.nonce),m.pendingToken&&(v.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(v.accessToken=m.oauthToken,v.secret=m.oauthTokenSecret):Ee("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m,{providerId:S,signInMethod:z}=v,re=(0,ye.sX)(v,["providerId","signInMethod"]);if(!S||!z)return null;const Me=new Ei(S,z);return Me.idToken=re.idToken||void 0,Me.accessToken=re.accessToken||void 0,Me.secret=re.secret,Me.nonce=re.nonce,Me.pendingToken=re.pendingToken||null,Me}_getIdTokenResponse(m){return bi(m,this.buildRequest())}_linkToIdToken(m,v){const S=this.buildRequest();return S.idToken=v,bi(m,S)}_getReauthenticationResolver(m){const v=this.buildRequest();return v.autoCreate=!1,bi(m,v)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),m.postBody=(0,Q.ik)(v)}return m}}function Rs(){return(Rs=(0,_.c)(function*(w,m){return lt(w,"POST","/v1/accounts:sendVerificationCode",Ge(w,m))})).apply(this,arguments)}function Mo(){return(Mo=(0,_.c)(function*(w,m){return Zt(w,"POST","/v1/accounts:signInWithPhoneNumber",Ge(w,m))})).apply(this,arguments)}function Wi(){return(Wi=(0,_.c)(function*(w,m){const v=yield Zt(w,"POST","/v1/accounts:signInWithPhoneNumber",Ge(w,m));if(v.temporaryProof)throw wn(w,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const fa={USER_NOT_FOUND:"user-not-found"};function di(){return(di=(0,_.c)(function*(w,m){return Zt(w,"POST","/v1/accounts:signInWithPhoneNumber",Ge(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),fa)})).apply(this,arguments)}class ys extends $r{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,v){return new ys({verificationId:m,verificationCode:v})}static _fromTokenResponse(m,v){return new ys({phoneNumber:m,temporaryProof:v})}_getIdTokenResponse(m){return function sn(w,m){return Mo.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,v){return function Ms(w,m){return Wi.apply(this,arguments)}(m,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Oo(w,m){return di.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:v,verificationId:S,verificationCode:z}=this.params;return m&&v?{temporaryProof:m,phoneNumber:v}:{sessionInfo:S,code:z}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:v,verificationCode:S,phoneNumber:z,temporaryProof:re}=m;return S||v||z||re?new ys({verificationId:v,verificationCode:S,phoneNumber:z,temporaryProof:re}):null}}class Os{constructor(m){var v,S,z,re,Me,it;const At=(0,Q.aw)((0,Q.kF)(m)),cn=null!==(v=At.apiKey)&&void 0!==v?v:null,Pn=null!==(S=At.oobCode)&&void 0!==S?S:null,tr=function ss(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(z=At.mode)&&void 0!==z?z:null);xe(cn&&Pn&&tr,"argument-error"),this.apiKey=cn,this.operation=tr,this.code=Pn,this.continueUrl=null!==(re=At.continueUrl)&&void 0!==re?re:null,this.languageCode=null!==(Me=At.languageCode)&&void 0!==Me?Me:null,this.tenantId=null!==(it=At.tenantId)&&void 0!==it?it:null}static parseLink(m){const v=function Hi(w){const m=(0,Q.aw)((0,Q.kF)(w)).link,v=m?(0,Q.aw)((0,Q.kF)(m)).deep_link_id:null,S=(0,Q.aw)((0,Q.kF)(w)).deep_link_id;return(S?(0,Q.aw)((0,Q.kF)(S)).link:null)||S||v||m||w}(m);try{return new Os(v)}catch{return null}}}let xs=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(v,S){return bs._fromEmailAndPassword(v,S)}static credentialWithLink(v,S){const z=Os.parseLink(S);return xe(z,"argument-error"),bs._fromEmailAndCode(v,z.code,z.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Li{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class sa extends Li{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Ks extends sa{static credentialFromJSON(m){const v="string"==typeof m?JSON.parse(m):m;return xe("providerId"in v&&"signInMethod"in v,"argument-error"),Ei._fromParams(v)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return xe(m.idToken||m.accessToken,"argument-error"),Ei._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Ks.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Ks.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:v,oauthAccessToken:S,oauthTokenSecret:z,pendingToken:re,nonce:Me,providerId:it}=m;if(!S&&!z&&!v&&!re||!it)return null;try{return new Ks(it)._credential({idToken:v,accessToken:S,nonce:Me,pendingToken:re})}catch{return null}}}let Wo=(()=>{class w extends sa{constructor(){super("facebook.com")}static credential(v){return Ei._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return w.credential(v.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Ya=(()=>{class w extends sa{constructor(){super("google.com"),this.addScope("profile")}static credential(v,S){return Ei._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:S})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:S,oauthAccessToken:z}=v;if(!S&&!z)return null;try{return w.credential(S,z)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Vc=(()=>{class w extends sa{constructor(){super("github.com")}static credential(v){return Ei._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return w.credential(v.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class js extends $r{constructor(m,v){super(m,m),this.pendingToken=v}_getIdTokenResponse(m){return bi(m,this.buildRequest())}_linkToIdToken(m,v){const S=this.buildRequest();return S.idToken=v,bi(m,S)}_getReauthenticationResolver(m){const v=this.buildRequest();return v.autoCreate=!1,bi(m,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const v="string"==typeof m?JSON.parse(m):m,{providerId:S,signInMethod:z,pendingToken:re}=v;return S&&z&&re&&S===z?new js(S,re):null}static _create(m,v){return new js(m,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class pa extends Li{constructor(m){xe(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return pa.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return pa.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const v=js.fromJSON(m);return xe(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:v,providerId:S}=m;if(!v||!S)return null;try{return js._create(S,v)}catch{return null}}}let ga=(()=>{class w extends sa{constructor(){super("twitter.com")}static credential(v,S){return Ei._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:S})}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:S,oauthTokenSecret:z}=v;if(!S||!z)return null;try{return w.credential(S,z)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function yu(w,m){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,_.c)(function*(w,m){return Zt(w,"POST","/v1/accounts:signUp",Ge(w,m))})).apply(this,arguments)}class Ys{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,v,S,z=!1){return(0,_.c)(function*(){const re=yield ee._fromIdTokenResponse(m,S,z),Me=W(S);return new Ys({user:re,providerId:Me,_tokenResponse:S,operationType:v})})()}static _forOperation(m,v,S){return(0,_.c)(function*(){yield m._updateTokensIfNecessary(S,!0);const z=W(S);return new Ys({user:m,providerId:z,_tokenResponse:S,operationType:v})})()}}function W(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function q(w){return k.apply(this,arguments)}function k(){return(k=(0,_.c)(function*(w){var m;const v=dn(w);if(yield v._initializationPromise,null!==(m=v.currentUser)&&void 0!==m&&m.isAnonymous)return new Ys({user:v.currentUser,providerId:null,operationType:"signIn"});const S=yield yu(v,{returnSecureToken:!0}),z=yield Ys._fromIdTokenResponse(v,"signIn",S,!0);return yield v._updateCurrentUser(z.user),z})).apply(this,arguments)}class ne extends Q.kx{constructor(m,v,S,z){var re;super(v.code,v.message),this.operationType=S,this.user=z,Object.setPrototypeOf(this,ne.prototype),this.customData={appName:m.name,tenantId:null!==(re=m.tenantId)&&void 0!==re?re:void 0,_serverResponse:v.customData._serverResponse,operationType:S}}static _fromErrorAndOperation(m,v,S,z){return new ne(m,v,S,z)}}function Te(w,m,v,S){return("reauthenticate"===m?v._getReauthenticationResolver(w):v._getIdTokenResponse(w)).catch(re=>{throw"auth/multi-factor-auth-required"===re.code?ne._fromErrorAndOperation(w,re,m,S):re})}function on(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Qn(w,m){return vs.apply(this,arguments)}function vs(){return vs=(0,_.c)(function*(w,m){const v=(0,Q.Yj)(w);yield Uc(!0,v,m);const{providerUserInfo:S}=yield function vi(w,m){return rr.apply(this,arguments)}(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[m]}),z=on(S||[]);return v.providerData=v.providerData.filter(re=>z.has(re.providerId)),z.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v}),vs.apply(this,arguments)}function os(w,m){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,_.c)(function*(w,m,v=!1){const S=yield Tr(w,m._linkToIdToken(w.auth,yield w.getIdToken()),v);return Ys._forOperation(w,"link",S)})).apply(this,arguments)}function Uc(w,m,v){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,_.c)(function*(w,m,v){yield jr(m);const z=!1===w?"provider-already-linked":"no-such-provider";xe(on(m.providerData).has(v)===w,m.auth,z)})).apply(this,arguments)}function Sr(w,m){return hn.apply(this,arguments)}function hn(){return(hn=(0,_.c)(function*(w,m,v=!1){const{auth:S}=w,z="reauthenticate";try{const re=yield Tr(w,Te(S,z,m,w),v);xe(re.idToken,S,"internal-error");const Me=bn(re.idToken);xe(Me,S,"internal-error");const{sub:it}=Me;return xe(w.uid===it,S,"user-mismatch"),Ys._forOperation(w,z,re)}catch(re){throw"auth/user-not-found"===re?.code&&Ee(S,"user-mismatch"),re}})).apply(this,arguments)}function Ho(w,m){return ai.apply(this,arguments)}function ai(){return(ai=(0,_.c)(function*(w,m,v=!1){const S="signIn",z=yield Te(w,S,m),re=yield Ys._fromIdTokenResponse(w,S,z);return v||(yield w._updateCurrentUser(re.user)),re})).apply(this,arguments)}function Ma(w,m){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,_.c)(function*(w,m){return Ho(dn(w),m)})).apply(this,arguments)}function Qs(w,m){return xo.apply(this,arguments)}function xo(){return(xo=(0,_.c)(function*(w,m){const v=(0,Q.Yj)(w);return yield Uc(!1,v,m.providerId),os(v,m)})).apply(this,arguments)}function dr(w,m){return Un.apply(this,arguments)}function Un(){return(Un=(0,_.c)(function*(w,m){return Sr((0,Q.Yj)(w),m)})).apply(this,arguments)}function ma(){return(ma=(0,_.c)(function*(w,m){return Zt(w,"POST","/v1/accounts:signInWithCustomToken",Ge(w,m))})).apply(this,arguments)}function ks(w,m){return ls.apply(this,arguments)}function ls(){return ls=(0,_.c)(function*(w,m){const v=dn(w),S=yield function Ji(w,m){return ma.apply(this,arguments)}(v,{token:m,returnSecureToken:!0}),z=yield Ys._fromIdTokenResponse(v,"signIn",S);return yield v._updateCurrentUser(z.user),z}),ls.apply(this,arguments)}class Io{constructor(m,v){this.factorId=m,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(m,v){return"phoneInfo"in v?gc._fromServerResponse(m,v):"totpInfo"in v?ds._fromServerResponse(m,v):Ee(m,"internal-error")}}class gc extends Io{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,v){return new gc(v)}}class ds extends Io{constructor(m){super("totp",m)}static _fromServerResponse(m,v){return new ds(v)}}function Js(w,m,v){var S;xe((null===(S=v.url)||void 0===S?void 0:S.length)>0,w,"invalid-continue-uri"),xe(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=v.url,m.dynamicLinkDomain=v.dynamicLinkDomain,m.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(xe(v.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=v.iOS.bundleId),v.android&&(xe(v.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=v.android.installApp,m.androidMinimumVersionCode=v.android.minimumVersion,m.androidPackageName=v.android.packageName)}function Co(w){return No.apply(this,arguments)}function No(){return(No=(0,_.c)(function*(w){const m=dn(w);m._getPasswordPolicyInternal()&&(yield m._updatePasswordPolicy())})).apply(this,arguments)}function Xs(w,m,v){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,_.c)(function*(w,m,v){const S=dn(w),z={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};v&&Js(S,z,v),yield Di(S,z,"getOobCode",$i)})).apply(this,arguments)}function zo(w,m,v){return xa.apply(this,arguments)}function xa(){return xa=(0,_.c)(function*(w,m,v){yield Ss((0,Q.Yj)(w),{oobCode:m,newPassword:v}).catch(function(){var S=(0,_.c)(function*(z){throw"auth/password-does-not-meet-requirements"===z.code&&Co(w),z});return function(z){return S.apply(this,arguments)}}())}),xa.apply(this,arguments)}function Bc(w,m){return $s.apply(this,arguments)}function $s(){return $s=(0,_.c)(function*(w,m){yield function bo(w,m){return Qr.apply(this,arguments)}((0,Q.Yj)(w),{oobCode:m})}),$s.apply(this,arguments)}function Mn(w,m){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,_.c)(function*(w,m){const v=(0,Q.Yj)(w),S=yield Ss(v,{oobCode:m}),z=S.requestType;switch(xe(z,v,"internal-error"),z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":xe(S.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":xe(S.mfaInfo,v,"internal-error");default:xe(S.email,v,"internal-error")}let re=null;return S.mfaInfo&&(re=Io._fromServerResponse(dn(v),S.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.newEmail:S.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===S.requestType?S.email:S.newEmail)||null,multiFactorInfo:re},operation:z}})).apply(this,arguments)}function hr(w,m){return _a.apply(this,arguments)}function _a(){return(_a=(0,_.c)(function*(w,m){const{data:v}=yield Mn((0,Q.Yj)(w),m);return v.email})).apply(this,arguments)}function mc(w,m,v){return qo.apply(this,arguments)}function qo(){return(qo=(0,_.c)(function*(w,m,v){const S=dn(w),Me=yield Di(S,{returnSecureToken:!0,email:m,password:v,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yu).catch(At=>{throw"auth/password-does-not-meet-requirements"===At.code&&Co(w),At}),it=yield Ys._fromIdTokenResponse(S,"signIn",Me);return yield S._updateCurrentUser(it.user),it})).apply(this,arguments)}function wo(w,m,v){return Ma((0,Q.Yj)(w),xs.credential(m,v)).catch(function(){var S=(0,_.c)(function*(z){throw"auth/password-does-not-meet-requirements"===z.code&&Co(w),z});return function(z){return S.apply(this,arguments)}}())}function Ko(w,m,v){return Es.apply(this,arguments)}function Es(){return(Es=(0,_.c)(function*(w,m,v){const S=dn(w),z={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};(function re(Me,it){xe(it.handleCodeInApp,S,"argument-error"),it&&Js(S,Me,it)})(z,v),yield Di(S,z,"getOobCode",ki)})).apply(this,arguments)}function vu(w,m){const v=Os.parseLink(m);return"EMAIL_SIGNIN"===v?.operation}function hs(w,m,v){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,_.c)(function*(w,m,v){const S=(0,Q.Yj)(w),z=xs.credentialWithLink(m,v||ht());return xe(z._tenantId===(S.tenantId||null),S,"tenant-id-mismatch"),Ma(S,z)})).apply(this,arguments)}function _t(){return(_t=(0,_.c)(function*(w,m){return lt(w,"POST","/v1/accounts:createAuthUri",Ge(w,m))})).apply(this,arguments)}function ar(w,m){return Qa.apply(this,arguments)}function Qa(){return Qa=(0,_.c)(function*(w,m){const S={identifier:m,continueUri:Le()?ht():"http://localhost"},{signinMethods:z}=yield function jc(w,m){return _t.apply(this,arguments)}((0,Q.Yj)(w),S);return z||[]}),Qa.apply(this,arguments)}function eo(w,m){return Or.apply(this,arguments)}function Or(){return Or=(0,_.c)(function*(w,m){const v=(0,Q.Yj)(w),z={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&Js(v.auth,z,m);const{email:re}=yield function xi(w,m){return Ni.apply(this,arguments)}(v.auth,z);re!==w.email&&(yield w.reload())}),Or.apply(this,arguments)}function Lr(w,m,v){return ya.apply(this,arguments)}function ya(){return ya=(0,_.c)(function*(w,m,v){const S=(0,Q.Yj)(w),re={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};v&&Js(S.auth,re,v);const{email:Me}=yield function An(w,m){return Pi.apply(this,arguments)}(S.auth,re);Me!==w.email&&(yield w.reload())}),ya.apply(this,arguments)}function to(){return(to=(0,_.c)(function*(w,m){return lt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function $c(w,m){return Ja.apply(this,arguments)}function Ja(){return Ja=(0,_.c)(function*(w,{displayName:m,photoURL:v}){if(void 0===m&&void 0===v)return;const S=(0,Q.Yj)(w),re={idToken:yield S.getIdToken(),displayName:m,photoUrl:v,returnSecureToken:!0},Me=yield Tr(S,function po(w,m){return to.apply(this,arguments)}(S.auth,re));S.displayName=Me.displayName||null,S.photoURL=Me.photoUrl||null;const it=S.providerData.find(({providerId:At})=>"password"===At);it&&(it.displayName=S.displayName,it.photoURL=S.photoURL),yield S._updateTokensIfNecessary(Me)}),Ja.apply(this,arguments)}function ti(w,m){return Is((0,Q.Yj)(w),m,null)}function Gc(w,m){return Is((0,Q.Yj)(w),null,m)}function Is(w,m,v){return hi.apply(this,arguments)}function hi(){return hi=(0,_.c)(function*(w,m,v){const{auth:S}=w,re={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(re.email=m),v&&(re.password=v);const Me=yield Tr(w,function ra(w,m){return ia.apply(this,arguments)}(S,re));yield w._updateTokensIfNecessary(Me,!0)}),hi.apply(this,arguments)}class Er{constructor(m,v,S={}){this.isNewUser=m,this.providerId=v,this.profile=S}}class D extends Er{constructor(m,v,S,z){super(m,v,S),this.username=z}}class K extends Er{constructor(m,v){super(m,"facebook.com",v)}}class x extends D{constructor(m,v){super(m,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class H extends Er{constructor(m,v){super(m,"google.com",v)}}class fe extends D{constructor(m,v,S){super(m,"twitter.com",v,S)}}function rt(w){const{user:m,_tokenResponse:v}=w;return m.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Ls(w){var m,v;if(!w)return null;const{providerId:S}=w,z=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},re=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!S&&w?.idToken){const Me=null===(v=null===(m=bn(w.idToken))||void 0===m?void 0:m.firebase)||void 0===v?void 0:v.sign_in_provider;if(Me)return new Er(re,"anonymous"!==Me&&"custom"!==Me?Me:null)}if(!S)return null;switch(S){case"facebook.com":return new K(re,z);case"github.com":return new x(re,z);case"google.com":return new H(re,z);case"twitter.com":return new fe(re,z,w.screenName||null);case"custom":case"anonymous":return new Er(re,null);default:return new Er(re,S,z)}}(v)}class ui{constructor(m,v,S){this.type=m,this.credential=v,this.user=S}static _fromIdtoken(m,v){return new ui("enroll",m,v)}static _fromMfaPendingCredential(m){return new ui("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var v,S;if(m?.multiFactorSession){if(null!==(v=m.multiFactorSession)&&void 0!==v&&v.pendingCredential)return ui._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(S=m.multiFactorSession)&&void 0!==S&&S.idToken)return ui._fromIdtoken(m.multiFactorSession.idToken)}return null}}class er{constructor(m,v,S){this.session=m,this.hints=v,this.signInResolver=S}static _fromError(m,v){const S=dn(m),z=v.customData._serverResponse,re=(z.mfaInfo||[]).map(it=>Io._fromServerResponse(S,it));xe(z.mfaPendingCredential,S,"internal-error");const Me=ui._fromMfaPendingCredential(z.mfaPendingCredential);return new er(Me,re,function(){var it=(0,_.c)(function*(At){const cn=yield At._process(S,Me);delete z.mfaInfo,delete z.mfaPendingCredential;const Pn=Object.assign(Object.assign({},z),{idToken:cn.idToken,refreshToken:cn.refreshToken});switch(v.operationType){case"signIn":const tr=yield Ys._fromIdTokenResponse(S,v.operationType,Pn);return yield S._updateCurrentUser(tr.user),tr;case"reauthenticate":return xe(v.user,S,"internal-error"),Ys._forOperation(v.user,v.operationType,Pn);default:Ee(S,"internal-error")}});return function(At){return it.apply(this,arguments)}}())}resolveSignIn(m){var v=this;return(0,_.c)(function*(){return v.signInResolver(m)})()}}function To(w,m){var v;const S=(0,Q.Yj)(w),z=m;return xe(m.customData.operationType,S,"argument-error"),xe(null===(v=z.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,S,"argument-error"),er._fromError(S,z)}class nn{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(S=>Io._fromServerResponse(m.auth,S)))})}static _fromUser(m){return new nn(m)}getSession(){var m=this;return(0,_.c)(function*(){return ui._fromIdtoken(yield m.user.getIdToken(),m.user)})()}enroll(m,v){var S=this;return(0,_.c)(function*(){const z=m,re=yield S.getSession(),Me=yield Tr(S.user,z._process(S.user.auth,re,v));return yield S.user._updateTokensIfNecessary(Me),S.user.reload()})()}unenroll(m){var v=this;return(0,_.c)(function*(){const S="string"==typeof m?m:m.uid,z=yield v.user.getIdToken();try{const re=yield Tr(v.user,function Za(w,m){return lt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ge(w,m))}(v.user.auth,{idToken:z,mfaEnrollmentId:S}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Me})=>Me!==S),yield v.user._updateTokensIfNecessary(re),yield v.user.reload()}catch(re){throw re}})()}}const un=new WeakMap;function Eu(w){const m=(0,Q.Yj)(w);return un.has(m)||un.set(m,nn._fromUser(m)),un.get(m)}const jt="__sak";class ct{constructor(m,v){this.storageRetriever=m,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(jt,"1"),this.storage.removeItem(jt),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,v){return this.storage.setItem(m,JSON.stringify(v)),Promise.resolve()}_get(m){const v=this.storage.getItem(m);return Promise.resolve(v?JSON.parse(v):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const yl=(()=>{class w extends ct{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,S)=>this.onStorageEvent(v,S),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function St(){const w=(0,Q.Su)();return ln(w)||Xt(w)}()&&function lr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Kr(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const S of Object.keys(this.listeners)){const z=this.storage.getItem(S),re=this.localCache[S];z!==re&&v(S,re,z)}}onStorageEvent(v,S=!1){if(!v.key)return void this.forAllChangedKeys((it,At,cn)=>{this.notifyListeners(it,cn)});const z=v.key;if(S?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const it=this.storage.getItem(z);if(v.newValue!==it)null!==v.newValue?this.storage.setItem(z,v.newValue):this.storage.removeItem(z);else if(this.localCache[z]===v.newValue&&!S)return}const re=()=>{const it=this.storage.getItem(z);!S&&this.localCache[z]===it||this.notifyListeners(z,it)},Me=this.storage.getItem(z);!function Yn(){return(0,Q.Uv)()&&10===document.documentMode}()||Me===v.newValue||v.newValue===v.oldValue?re():setTimeout(re,10)}notifyListeners(v,S){this.localCache[v]=S;const z=this.listeners[v];if(z)for(const re of Array.from(z))re(S&&JSON.parse(S))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,S,z)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:S,newValue:z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,S){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(S)}_removeListener(v,S){this.listeners[v]&&(this.listeners[v].delete(S),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,S){var z=()=>super._set,re=this;return(0,_.c)(function*(){yield z().call(re,v,S),re.localCache[v]=JSON.stringify(S)})()}_get(v){var S=()=>super._get,z=this;return(0,_.c)(function*(){const re=yield S().call(z,v);return z.localCache[v]=JSON.stringify(re),re})()}_remove(v){var S=()=>super._remove,z=this;return(0,_.c)(function*(){yield S().call(z,v),delete z.localCache[v]})()}}return w.type="LOCAL",w})(),ro=(()=>{class w extends ct{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,S){}_removeListener(v,S){}}return w.type="SESSION",w})();let Ud=(()=>{class w{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const S=this.receivers.find(re=>re.isListeningto(v));if(S)return S;const z=new w(v);return this.receivers.push(z),z}isListeningto(v){return this.eventTarget===v}handleEvent(v){var S=this;return(0,_.c)(function*(){const z=v,{eventId:re,eventType:Me,data:it}=z.data,At=S.handlersMap[Me];if(!At?.size)return;z.ports[0].postMessage({status:"ack",eventId:re,eventType:Me});const cn=Array.from(At).map(function(){var tr=(0,_.c)(function*(_o){return _o(z.origin,it)});return function(_o){return tr.apply(this,arguments)}}()),Pn=yield function Gu(w){return Promise.all(w.map(function(){var m=(0,_.c)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(S){return{fulfilled:!1,reason:S}}});return function(v){return m.apply(this,arguments)}}()))}(cn);z.ports[0].postMessage({status:"done",eventId:re,eventType:Me,response:Pn})})()}_subscribe(v,S){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(S)}_unsubscribe(v,S){this.handlersMap[v]&&S&&this.handlersMap[v].delete(S),(!S||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function go(w="",m=10){let v="";for(let S=0;S<m;S++)v+=Math.floor(10*Math.random());return w+v}class Bd{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,v,S=50){var z=this;return(0,_.c)(function*(){const re=typeof MessageChannel<"u"?new MessageChannel:null;if(!re)throw new Error("connection_unavailable");let Me,it;return new Promise((At,cn)=>{const Pn=go("",20);re.port1.start();const tr=setTimeout(()=>{cn(new Error("unsupported_event"))},S);it={messageChannel:re,onMessage(_o){const ms=_o;if(ms.data.eventId===Pn)switch(ms.data.status){case"ack":clearTimeout(tr),Me=setTimeout(()=>{cn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Me),At(ms.data.response);break;default:clearTimeout(tr),clearTimeout(Me),cn(new Error("invalid_response"))}}},z.handlers.add(it),re.port1.addEventListener("message",it.onMessage),z.target.postMessage({eventType:m,eventId:Pn,data:v},[re.port2])}).finally(()=>{it&&z.removeMessageHandler(it)})})()}}function Vr(){return window}function Sn(){return typeof Vr().WorkerGlobalScope<"u"&&"function"==typeof Vr().importScripts}function Yo(){return(Yo=(0,_.c)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const oa="firebaseLocalStorageDb",Na="firebaseLocalStorage",Ii="fbase_key";class Ht{constructor(m){this.request=m}toPromise(){return new Promise((m,v)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function io(w,m){return w.transaction([Na],m?"readwrite":"readonly").objectStore(Na)}function Qo(){const w=indexedDB.open(oa,1);return new Promise((m,v)=>{w.addEventListener("error",()=>{v(w.error)}),w.addEventListener("upgradeneeded",()=>{const S=w.result;try{S.createObjectStore(Na,{keyPath:Ii})}catch(z){v(z)}}),w.addEventListener("success",(0,_.c)(function*(){const S=w.result;S.objectStoreNames.contains(Na)?m(S):(S.close(),yield function ka(){const w=indexedDB.deleteDatabase(oa);return new Ht(w).toPromise()}(),m(yield Qo()))}))})}function Fo(w,m,v){return pr.apply(this,arguments)}function pr(){return(pr=(0,_.c)(function*(w,m,v){const S=io(w,!0).put({[Ii]:m,value:v});return new Ht(S).toPromise()})).apply(this,arguments)}function Jo(){return(Jo=(0,_.c)(function*(w,m){const v=io(w,!1).get(m),S=yield new Ht(v).toPromise();return void 0===S?null:S.value})).apply(this,arguments)}function ri(w,m){const v=io(w,!0).delete(m);return new Ht(v).toPromise()}const tc=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,_.c)(function*(){return v.db||(v.db=yield Qo()),v.db})()}_withRetries(v){var S=this;return(0,_.c)(function*(){let z=0;for(;;)try{const re=yield S._openDb();return yield v(re)}catch(re){if(z++>3)throw re;S.db&&(S.db.close(),S.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,_.c)(function*(){return Sn()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,_.c)(function*(){v.receiver=Ud._getInstance(function fn(){return Sn()?self:null}()),v.receiver._subscribe("keyChanged",function(){var S=(0,_.c)(function*(z,re){return{keyProcessed:(yield v._poll()).includes(re.key)}});return function(z,re){return S.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var S=(0,_.c)(function*(z,re){return["keyChanged"]});return function(z,re){return S.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,_.c)(function*(){var S,z;if(v.activeServiceWorker=yield function Ea(){return Yo.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Bd(v.activeServiceWorker);const re=yield v.sender._send("ping",{},800);re&&null!==(S=re[0])&&void 0!==S&&S.fulfilled&&null!==(z=re[0])&&void 0!==z&&z.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var S=this;return(0,_.c)(function*(){if(S.sender&&S.activeServiceWorker&&function gi(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===S.activeServiceWorker)try{yield S.sender._send("keyChanged",{key:v},S.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.c)(function*(){try{if(!indexedDB)return!1;const v=yield Qo();return yield Fo(v,jt,"1"),yield ri(v,jt),!0}catch{}return!1})()}_withPendingWrite(v){var S=this;return(0,_.c)(function*(){S.pendingWrites++;try{yield v()}finally{S.pendingWrites--}})()}_set(v,S){var z=this;return(0,_.c)(function*(){return z._withPendingWrite((0,_.c)(function*(){return yield z._withRetries(re=>Fo(re,v,S)),z.localCache[v]=S,z.notifyServiceWorker(v)}))})()}_get(v){var S=this;return(0,_.c)(function*(){const z=yield S._withRetries(re=>function vl(w,m){return Jo.apply(this,arguments)}(re,v));return S.localCache[v]=z,z})()}_remove(v){var S=this;return(0,_.c)(function*(){return S._withPendingWrite((0,_.c)(function*(){return yield S._withRetries(z=>ri(z,v)),delete S.localCache[v],S.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,_.c)(function*(){const S=yield v._withRetries(Me=>{const it=io(Me,!1).getAll();return new Ht(it).toPromise()});if(!S)return[];if(0!==v.pendingWrites)return[];const z=[],re=new Set;if(0!==S.length)for(const{fbase_key:Me,value:it}of S)re.add(Me),JSON.stringify(v.localCache[Me])!==JSON.stringify(it)&&(v.notifyListeners(Me,it),z.push(Me));for(const Me of Object.keys(v.localCache))v.localCache[Me]&&!re.has(Me)&&(v.notifyListeners(Me,null),z.push(Me));return z})()}notifyListeners(v,S){this.localCache[v]=S;const z=this.listeners[v];if(z)for(const re of Array.from(z))re(S)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,_.c)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,S){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(S)}_removeListener(v,S){this.listeners[v]&&(this.listeners[v].delete(S),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})(),cs=1e12;class C{constructor(m){this.auth=m,this.counter=cs,this._widgets=new Map}render(m,v){const S=this.counter;return this._widgets.set(S,new M(m,this.auth.name,v||{})),this.counter++,S}reset(m){var v;const S=m||cs;null===(v=this._widgets.get(S))||void 0===v||v.delete(),this._widgets.delete(S)}getResponse(m){var v;return(null===(v=this._widgets.get(m||cs))||void 0===v?void 0:v.getResponse())||""}execute(m){var v=this;return(0,_.c)(function*(){var S;return null===(S=v._widgets.get(m||cs))||void 0===S||S.execute(),""})()}}class M{constructor(m,v,S){this.params=S,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const z="string"==typeof m?document.getElementById(m):m;xe(z,"argument-error",{appName:v}),this.container=z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function T(w){const m=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let S=0;S<w;S++)m.push(v.charAt(Math.floor(62*Math.random())));return m.join("")}(50);const{callback:m,"expired-callback":v}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const O=kr("rcb"),j=new Nt(3e4,6e4);class te{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Vr().grecaptcha)||void 0===m||!m.render)}load(m,v=""){return xe(function me(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(v),m,"argument-error"),this.shouldResolveImmediately(v)&&Wn(Vr().grecaptcha)?Promise.resolve(Vr().grecaptcha):new Promise((S,z)=>{const re=Vr().setTimeout(()=>{z(qe(m,"network-request-failed"))},j.get());Vr()[O]=()=>{Vr().clearTimeout(re),delete Vr()[O];const it=Vr().grecaptcha;if(!it||!Wn(it))return void z(qe(m,"internal-error"));const At=it.render;it.render=(cn,Pn)=>{const tr=At(cn,Pn);return this.counter++,tr},this.hostLanguage=v,S(it)},sr(`${function Vn(){return zn.recaptchaV2Script}()}?${(0,Q.ik)({onload:O,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(re),z(qe(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var v;return!(null===(v=Vr().grecaptcha)||void 0===v||!v.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class at{load(m){return(0,_.c)(function*(){return new C(m)})()}clearedOneInstance(){}}const Ze="recaptcha",Vt={theme:"light",type:"image"};class Ft{constructor(m,v,S=Object.assign({},Vt)){this.parameters=S,this.type=Ze,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dn(m),this.isInvisible="invisible"===this.parameters.size,xe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const z="string"==typeof v?document.getElementById(v):v;xe(z,this.auth,"argument-error"),this.container=z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new at:new te,this.validateStartingState()}verify(){var m=this;return(0,_.c)(function*(){m.assertNotDestroyed();const v=yield m.render(),S=m.getAssertedRecaptcha();return S.getResponse(v)||new Promise(re=>{const Me=it=>{it&&(m.tokenChangeListeners.delete(Me),re(it))};m.tokenChangeListeners.add(Me),m.isInvisible&&S.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){xe(!this.parameters.sitekey,this.auth,"argument-error"),xe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),xe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return v=>{if(this.tokenChangeListeners.forEach(S=>S(v)),"function"==typeof m)m(v);else if("string"==typeof m){const S=Vr()[m];"function"==typeof S&&S(v)}}}assertNotDestroyed(){xe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,_.c)(function*(){if(yield m.init(),!m.widgetId){let v=m.container;if(!m.isInvisible){const S=document.createElement("div");v.appendChild(S),v=S}m.widgetId=m.getAssertedRecaptcha().render(v,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,_.c)(function*(){xe(Le()&&!Sn(),m.auth,"internal-error"),yield function Xn(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const v=yield function wr(w){return Lt.apply(this,arguments)}(m.auth);xe(v,m.auth,"internal-error"),m.parameters.sitekey=v})()}getAssertedRecaptcha(){return xe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ri{constructor(m,v){this.verificationId=m,this.onConfirmation=v}confirm(m){const v=ys._fromVerification(this.verificationId,m);return this.onConfirmation(v)}}function qi(w,m,v){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,_.c)(function*(w,m,v){const S=dn(w),z=yield Wu(S,m,(0,Q.Yj)(v));return new Ri(z,re=>Ma(S,re))})).apply(this,arguments)}function La(w,m,v){return mo.apply(this,arguments)}function mo(){return(mo=(0,_.c)(function*(w,m,v){const S=(0,Q.Yj)(w);yield Uc(!1,S,"phone");const z=yield Wu(S.auth,m,(0,Q.Yj)(v));return new Ri(z,re=>Qs(S,re))})).apply(this,arguments)}function Do(w,m,v){return zc.apply(this,arguments)}function zc(){return(zc=(0,_.c)(function*(w,m,v){const S=(0,Q.Yj)(w),z=yield Wu(S.auth,m,(0,Q.Yj)(v));return new Ri(z,re=>dr(S,re))})).apply(this,arguments)}function Wu(w,m,v){return Hu.apply(this,arguments)}function Hu(){return Hu=(0,_.c)(function*(w,m,v){var S;const z=yield v.verify();try{let re;if(xe("string"==typeof z,w,"argument-error"),xe(v.type===Ze,w,"argument-error"),re="string"==typeof m?{phoneNumber:m}:m,"session"in re){const Me=re.session;if("phoneNumber"in re)return xe("enroll"===Me.type,w,"internal-error"),(yield function Xa(w,m){return lt(w,"POST","/v2/accounts/mfaEnrollment:start",Ge(w,m))}(w,{idToken:Me.credential,phoneEnrollmentInfo:{phoneNumber:re.phoneNumber,recaptchaToken:z}})).phoneSessionInfo.sessionInfo;{xe("signin"===Me.type,w,"internal-error");const it=(null===(S=re.multiFactorHint)||void 0===S?void 0:S.uid)||re.multiFactorUid;return xe(it,w,"missing-multi-factor-info"),(yield function yc(w,m){return lt(w,"POST","/v2/accounts/mfaSignIn:start",Ge(w,m))}(w,{mfaPendingCredential:Me.credential,mfaEnrollmentId:it,phoneSignInInfo:{recaptchaToken:z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Me}=yield function Ro(w,m){return Rs.apply(this,arguments)}(w,{phoneNumber:re.phoneNumber,recaptchaToken:z});return Me}}finally{v._reset()}}),Hu.apply(this,arguments)}function gp(w,m){return qc.apply(this,arguments)}function qc(){return(qc=(0,_.c)(function*(w,m){yield os((0,Q.Yj)(w),m)})).apply(this,arguments)}let ir=(()=>{class w{constructor(v){this.providerId=w.PROVIDER_ID,this.auth=dn(v)}verifyPhoneNumber(v,S){return Wu(this.auth,v,(0,Q.Yj)(S))}static credential(v,S){return ys._fromVerification(v,S)}static credentialFromResult(v){return w.credentialFromTaggedObject(v)}static credentialFromError(v){return w.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:S,temporaryProof:z}=v;return S&&z?ys._fromTokenResponse(S,z):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function xr(w,m){return m?mt(m):(xe(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class jd extends $r{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return bi(m,this._buildIdpRequest())}_linkToIdToken(m,v){return bi(m,this._buildIdpRequest(v))}_getReauthenticationResolver(m){return bi(m,this._buildIdpRequest())}_buildIdpRequest(m){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(v.idToken=m),v}}function Kh(w){return Ho(w.auth,new jd(w),w.bypassAuthState)}function $d(w){const{auth:m,user:v}=w;return xe(v,m,"internal-error"),Sr(v,new jd(w),w.bypassAuthState)}function Gd(w){return sd.apply(this,arguments)}function sd(){return(sd=(0,_.c)(function*(w){const{auth:m,user:v}=w;return xe(v,m,"internal-error"),os(v,new jd(w),w.bypassAuthState)})).apply(this,arguments)}class El{constructor(m,v,S,z,re=!1){this.auth=m,this.resolver=S,this.user=z,this.bypassAuthState=re,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var m=this;return new Promise(function(){var v=(0,_.c)(function*(S,z){m.pendingPromise={resolve:S,reject:z};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(re){m.reject(re)}});return function(S,z){return v.apply(this,arguments)}}())}onAuthEvent(m){var v=this;return(0,_.c)(function*(){const{urlResponse:S,sessionId:z,postBody:re,tenantId:Me,error:it,type:At}=m;if(it)return void v.reject(it);const cn={auth:v.auth,requestUri:S,sessionId:z,tenantId:Me||void 0,postBody:re||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(At)(cn))}catch(Pn){v.reject(Pn)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Kh;case"linkViaPopup":case"linkViaRedirect":return Gd;case"reauthViaPopup":case"reauthViaRedirect":return $d;default:Ee(this.auth,"internal-error")}}resolve(m){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const od=new Nt(2e3,1e4);function Wd(w,m,v){return oo.apply(this,arguments)}function oo(){return(oo=(0,_.c)(function*(w,m,v){const S=dn(w);wt(w,m,Li);const z=xr(S,v);return new Kc(S,"signInViaPopup",m,z).executeNotNull()})).apply(this,arguments)}function zu(w,m,v){return qu.apply(this,arguments)}function qu(){return(qu=(0,_.c)(function*(w,m,v){const S=(0,Q.Yj)(w);wt(S.auth,m,Li);const z=xr(S.auth,v);return new Kc(S.auth,"reauthViaPopup",m,z,S).executeNotNull()})).apply(this,arguments)}function Yh(w,m,v){return vc.apply(this,arguments)}function vc(){return(vc=(0,_.c)(function*(w,m,v){const S=(0,Q.Yj)(w);wt(S.auth,m,Li);const z=xr(S.auth,v);return new Kc(S.auth,"linkViaPopup",m,z,S).executeNotNull()})).apply(this,arguments)}let Kc=(()=>{class w extends El{constructor(v,S,z,re,Me){super(v,S,re,Me),this.provider=z,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var v=this;return(0,_.c)(function*(){const S=yield v.execute();return xe(S,v.auth,"internal-error"),S})()}onExecution(){var v=this;return(0,_.c)(function*(){bt(1===v.filter.length,"Popup operations only handle one event");const S=go();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],S),v.authWindow.associatedEvent=S,v.resolver._originValidation(v.auth).catch(z=>{v.reject(z)}),v.resolver._isIframeWebStorageSupported(v.auth,z=>{z||v.reject(qe(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(qe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const v=()=>{var S,z;this.pollId=null!==(z=null===(S=this.authWindow)||void 0===S?void 0:S.window)&&void 0!==z&&z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(qe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,od.get())};v()}}return w.currentPopupAction=null,w})();const Cu="pendingRedirect",Yc=new Map;class Gs extends El{constructor(m,v,S=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,S),this.eventId=null}execute(){var m=()=>super.execute,v=this;return(0,_.c)(function*(){let S=Yc.get(v.auth._key());if(!S){try{const re=(yield function Hd(w,m){return Ia.apply(this,arguments)}(v.resolver,v.auth))?yield m().call(v):null;S=()=>Promise.resolve(re)}catch(z){S=()=>Promise.reject(z)}Yc.set(v.auth._key(),S)}return v.bypassAuthState||Yc.set(v.auth._key(),()=>Promise.resolve(null)),S()})()}onAuthEvent(m){var v=()=>super.onAuthEvent,S=this;return(0,_.c)(function*(){if("signInViaRedirect"===m.type)return v().call(S,m);if("unknown"!==m.type){if(m.eventId){const z=yield S.auth._redirectUserForId(m.eventId);if(z)return S.user=z,v().call(S,m);S.resolve(null)}}else S.resolve(null)})()}onExecution(){return(0,_.c)(function*(){})()}cleanUp(){}}function Ia(){return(Ia=(0,_.c)(function*(w,m){const v=Ku(m),S=cr(w);if(!(yield S._isAvailable()))return!1;const z="true"===(yield S._get(v));return yield S._remove(v),z})).apply(this,arguments)}function nc(w,m){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,_.c)(function*(w,m){return cr(w)._set(Ku(m),"true")})).apply(this,arguments)}function Ca(){Yc.clear()}function Vs(w,m){Yc.set(w._key(),m)}function cr(w){return mt(w._redirectPersistence)}function Ku(w){return En(Cu,w.config.apiKey,w.name)}function mr(w,m,v){return function ao(w,m,v){return Qc.apply(this,arguments)}(w,m,v)}function Qc(){return(Qc=(0,_.c)(function*(w,m,v){const S=dn(w);wt(w,m,Li),yield S._initializationPromise;const z=xr(S,v);return yield nc(z,S),z._openRedirect(S,m,"signInViaRedirect")})).apply(this,arguments)}function Ec(w,m,v){return function ws(w,m,v){return ad.apply(this,arguments)}(w,m,v)}function ad(){return(ad=(0,_.c)(function*(w,m,v){const S=(0,Q.Yj)(w);wt(S.auth,m,Li),yield S.auth._initializationPromise;const z=xr(S.auth,v);yield nc(z,S.auth);const re=yield gs(S);return z._openRedirect(S.auth,m,"reauthViaRedirect",re)})).apply(this,arguments)}function Ic(w,m,v){return function ps(w,m,v){return aa.apply(this,arguments)}(w,m,v)}function aa(){return(aa=(0,_.c)(function*(w,m,v){const S=(0,Q.Yj)(w);wt(S.auth,m,Li),yield S.auth._initializationPromise;const z=xr(S.auth,v);yield Uc(!1,S,m.providerId),yield nc(z,S.auth);const re=yield gs(S);return z._openRedirect(S.auth,m,"linkViaRedirect",re)})).apply(this,arguments)}function Cc(w,m){return wu.apply(this,arguments)}function wu(){return(wu=(0,_.c)(function*(w,m){return yield dn(w)._initializationPromise,rc(w,m,!1)})).apply(this,arguments)}function rc(w,m){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,_.c)(function*(w,m,v=!1){const S=dn(w),z=xr(S,m),Me=yield new Gs(S,z,v).execute();return Me&&!v&&(delete Me.user._redirectEventId,yield S._persistUserIfCurrent(Me.user),yield S._setRedirectUser(null,m)),Me})).apply(this,arguments)}function gs(w){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,_.c)(function*(w){const m=go(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class Ts{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let v=!1;return this.consumers.forEach(S=>{this.isEventForConsumer(m,S)&&(v=!0,this.sendToConsumer(m,S),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Va(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vo(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=m,v=!0)),v}sendToConsumer(m,v){var S;if(m.error&&!Vo(m)){const z=(null===(S=m.error.code)||void 0===S?void 0:S.split("auth/")[1])||"internal-error";v.onError(qe(this.auth,z))}else v.onAuthEvent(m)}isEventForConsumer(m,v){const S=null===v.eventId||!!m.eventId&&m.eventId===v.eventId;return v.filter.includes(m.type)&&S}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(co(m))}saveEventToCache(m){this.cachedEventUids.add(co(m)),this.lastProcessedEventTime=Date.now()}}function co(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Vo({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function Yu(w){return wa.apply(this,arguments)}function wa(){return(wa=(0,_.c)(function*(w,m={}){return lt(w,"GET","/v1/projects",m)})).apply(this,arguments)}const cd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wc=/^https?/;function ca(){return(ca=(0,_.c)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Yu(w);for(const v of m)try{if(Ua(v))return}catch{}Ee(w,"unauthorized-domain")})).apply(this,arguments)}function Ua(w){const m=ht(),{protocol:v,hostname:S}=new URL(m);if(w.startsWith("chrome-extension://")){const Me=new URL(w);return""===Me.hostname&&""===S?"chrome-extension:"===v&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===v&&Me.hostname===S}if(!wc.test(v))return!1;if(cd.test(w))return S===w;const z=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+z+"|"+z+")$","i").test(S)}const zd=new Nt(3e4,6e4);function ud(){const w=Vr().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let v=0;v<w.CP.length;v++)w.CP[v]=null}let ua=null;const Qh=new Nt(5e3,15e3),Tc="__/auth/iframe",Au="emulator/auth/iframe",Il={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qd(w){const m=w.config;xe(m.authDomain,w,"auth-domain-config-required");const v=m.emulator?tn(m,Au):`https://${w.config.authDomain}/${Tc}`,S={apiKey:m.apiKey,appName:w.name,v:A.SDK_VERSION},z=Zi.get(w.config.apiHost);z&&(S.eid=z);const re=w._getFrameworks();return re.length&&(S.fw=re.join(",")),`${v}?${(0,Q.ik)(S).slice(1)}`}function Ao(){return Ao=(0,_.c)(function*(w){const m=yield function ld(w){return ua=ua||function Du(w){return new Promise((m,v)=>{var S,z,re;function Me(){ud(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{ud(),v(qe(w,"network-request-failed"))},timeout:zd.get()})}if(null!==(z=null===(S=Vr().gapi)||void 0===S?void 0:S.iframes)&&void 0!==z&&z.Iframe)m(gapi.iframes.getContext());else{if(null===(re=Vr().gapi)||void 0===re||!re.load){const it=kr("iframefcb");return Vr()[it]=()=>{gapi.load?Me():v(qe(w,"network-request-failed"))},sr(`${function Ti(){return zn.gapiScript}()}?onload=${it}`).catch(At=>v(At))}Me()}}).catch(m=>{throw ua=null,m})}(w),ua}(w),v=Vr().gapi;return xe(v,w,"internal-error"),m.open({where:document.body,url:qd(w),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Il,dontclear:!0},S=>new Promise(function(){var z=(0,_.c)(function*(re,Me){yield S.restyle({setHideOnLeave:!1});const it=qe(w,"network-request-failed"),At=Vr().setTimeout(()=>{Me(it)},Qh.get());function cn(){Vr().clearTimeout(At),re(S)}S.ping(cn).then(cn,()=>{Me(it)})});return function(re,Me){return z.apply(this,arguments)}}()))}),Ao.apply(this,arguments)}const Su={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class br{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ac="__/auth/handler",Sc="emulator/auth/handler",Ju=encodeURIComponent("fac");function sc(w,m,v,S,z,re){return oc.apply(this,arguments)}function oc(){return(oc=(0,_.c)(function*(w,m,v,S,z,re){xe(w.config.authDomain,w,"auth-domain-config-required"),xe(w.config.apiKey,w,"invalid-api-key");const Me={apiKey:w.config.apiKey,appName:w.name,authType:v,redirectUrl:S,v:A.SDK_VERSION,eventId:z};if(m instanceof Li){m.setDefaultLanguage(w.languageCode),Me.providerId=m.providerId||"",(0,Q.t7)(m.getCustomParameters())||(Me.customParameters=JSON.stringify(m.getCustomParameters()));for(const[Pn,tr]of Object.entries(re||{}))Me[Pn]=tr}if(m instanceof sa){const Pn=m.getScopes().filter(tr=>""!==tr);Pn.length>0&&(Me.scopes=Pn.join(","))}w.tenantId&&(Me.tid=w.tenantId);const it=Me;for(const Pn of Object.keys(it))void 0===it[Pn]&&delete it[Pn];const At=yield w._getAppCheckToken(),cn=At?`#${Ju}=${encodeURIComponent(At)}`:"";return`${function Kd({config:w}){return w.emulator?tn(w,Sc):`https://${w.authDomain}/${Ac}`}(w)}?${(0,Q.ik)(it).slice(1)}${cn}`})).apply(this,arguments)}const Cl="webStorageSupport",hd=class wl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ro,this._completeRedirectFn=rc,this._overrideRedirectResult=Vs}_openPopup(m,v,S,z){var re=this;return(0,_.c)(function*(){var Me;bt(null===(Me=re.eventManagers[m._key()])||void 0===Me?void 0:Me.manager,"_initialize() not called before _openPopup()");const it=yield sc(m,v,S,ht(),z);return function Wr(w,m,v,S=500,z=600){const re=Math.max((window.screen.availHeight-z)/2,0).toString(),Me=Math.max((window.screen.availWidth-S)/2,0).toString();let it="";const At=Object.assign(Object.assign({},Su),{width:S.toString(),height:z.toString(),top:re,left:Me}),cn=(0,Q.Su)().toLowerCase();v&&(it=Ln(cn)?"_blank":v),Dr(cn)&&(m=m||"http://localhost",At.scrollbars="yes");const Pn=Object.entries(At).reduce((_o,[ms,tu])=>`${_o}${ms}=${tu},`,"");if(function Hn(w=(0,Q.Su)()){var m;return Xt(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(cn)&&"_self"!==it)return function Da(w,m){const v=document.createElement("a");v.href=w,v.target=m;const S=document.createEvent("MouseEvent");S.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(S)}(m||"",it),new br(null);const tr=window.open(m||"",it,Pn);xe(tr,w,"popup-blocked");try{tr.focus()}catch{}return new br(tr)}(m,it,go())})()}_openRedirect(m,v,S,z){var re=this;return(0,_.c)(function*(){return yield re._originValidation(m),function ec(w){Vr().location.href=w}(yield sc(m,v,S,ht(),z)),new Promise(()=>{})})()}_initialize(m){const v=m._key();if(this.eventManagers[v]){const{manager:z,promise:re}=this.eventManagers[v];return z?Promise.resolve(z):(bt(re,"If manager is not set, promise should be"),re)}const S=this.initAndGetManager(m);return this.eventManagers[v]={promise:S},S.catch(()=>{delete this.eventManagers[v]}),S}initAndGetManager(m){var v=this;return(0,_.c)(function*(){const S=yield function Vi(w){return Ao.apply(this,arguments)}(m),z=new Ts(m);return S.register("authEvent",re=>(xe(re?.authEvent,m,"invalid-auth-event"),{status:z.onEvent(re.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[m._key()]={manager:z},v.iframes[m._key()]=S,z})()}_isIframeWebStorageSupported(m,v){this.iframes[m._key()].send(Cl,{type:Cl},z=>{var re;const Me=null===(re=z?.[0])||void 0===re?void 0:re[Cl];void 0!==Me&&v(!!Me),Ee(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const v=m._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function Ta(w){return ca.apply(this,arguments)}(m)),this.originValidationPromises[v]}get _shouldInitProactively(){return Kr()||ln()||Xt()}};class Xc{constructor(m){this.factorId=m}_process(m,v,S){switch(v.type){case"enroll":return this._finalizeEnroll(m,v.credential,S);case"signin":return this._finalizeSignIn(m,v.credential);default:return Et("unexpected MultiFactorSessionType")}}}class Pu extends Xc{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Pu(m)}_finalizeEnroll(m,v,S){return function Ot(w,m){return lt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ge(w,m))}(m,{idToken:v,displayName:S,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,v){return function so(w,m){return lt(w,"POST","/v2/accounts/mfaSignIn:finalize",Ge(w,m))}(m,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ac=(()=>{class w{constructor(){}static assertion(v){return Pu._fromCredential(v)}}return w.FACTOR_ID="phone",w})();var Zc="@firebase/auth";class eu{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var v=this;return(0,_.c)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const v=this.auth.onIdTokenChanged(S=>{m(S?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,v),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const v=this.internalListeners.get(m);v&&(this.internalListeners.delete(m),v(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Tl=(0,Q.sX)("authIdTokenMaxAge")||300;let $a=null;const Dl=w=>function(){var m=(0,_.c)(function*(v){const S=v&&(yield v.getIdTokenResult()),z=S&&((new Date).getTime()-Date.parse(S.issuedAtTime))/1e3;if(z&&z>Tl)return;const re=S?.token;$a!==re&&($a=re,yield fetch(w,{method:re?"POST":"DELETE",headers:re?{Authorization:`Bearer ${re}`}:{}}))});return function(v){return m.apply(this,arguments)}}();function cc(w=(0,A.getApp)()){const m=(0,A._getProvider)(w,"auth");if(m.isInitialized())return m.getImmediate();const v=function Ai(w,m){const v=(0,A._getProvider)(w,"auth");if(v.isInitialized()){const z=v.getImmediate(),re=v.getOptions();if((0,Q.IN)(re,m??{}))return z;Ee(z,"already-initialized")}return v.initialize({options:m})}(w,{popupRedirectResolver:hd,persistence:[tc,yl,ro]}),S=(0,Q.sX)("authTokenSyncURL");if(S){const re=Dl(S);(function Kn(w,m,v){(0,Q.Yj)(w).beforeAuthStateChanged(m,v)})(v,re,()=>re(v.currentUser)),function ni(w,m,v,S){(0,Q.Yj)(w).onIdTokenChanged(m,v,S)}(v,Me=>re(Me))}const z=(0,Q.EB)("auth");return z&&ji(v,`http://${z}`),v}(function vr(w){zn=w})({loadJS:w=>new Promise((m,v)=>{const S=document.createElement("script");S.setAttribute("src",w),S.onload=m,S.onerror=z=>{const re=qe("internal-error");re.customData=z,v(re)},S.type="text/javascript",S.charset="UTF-8",function Ru(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(S)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Sa(w){(0,A._registerComponent)(new G.Yl("auth",(m,{options:v})=>{const S=m.getProvider("app").getImmediate(),z=m.getProvider("heartbeat"),re=m.getProvider("app-check-internal"),{apiKey:Me,authDomain:it}=S.options;xe(Me&&!Me.includes(":"),"invalid-api-key",{appName:S.name});const At={apiKey:Me,authDomain:it,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oe(w)},cn=new Gt(S,z,re,At);return function $o(w,m){const v=m?.persistence||[],S=(Array.isArray(v)?v:[v]).map(mt);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(S,m?.popupRedirectResolver)}(cn,v),cn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,v,S)=>{m.getProvider("auth-internal").initialize()})),(0,A._registerComponent)(new G.Yl("auth-internal",m=>{const v=dn(m.getProvider("auth").getImmediate());return new eu(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,A.registerVersion)(Zc,"1.6.0",function Xu(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(w)),(0,A.registerVersion)(Zc,"1.6.0","esm2017")}("Browser")},7144:($t,We,V)=>{V.d(We,{A3:()=>ze,AL:()=>Le,AV:()=>xe,AX:()=>wn,Al:()=>G,Cc:()=>ht,EB:()=>Ue,GI:()=>Zt,IN:()=>zr,L0:()=>Wn,O0:()=>le,OS:()=>Mr,Su:()=>Dt,UR:()=>ut,Uc:()=>Q,Uj:()=>Gn,Uv:()=>tt,WW:()=>he,Wg:()=>Ne,Ww:()=>$e,Y7:()=>Rr,Y9:()=>A,YD:()=>wt,Yd:()=>Ee,Yj:()=>Be,aw:()=>vi,c9:()=>je,i:()=>en,iQ:()=>bn,ik:()=>yr,iw:()=>Nt,kF:()=>rr,kH:()=>Lt,kx:()=>lt,my:()=>gn,o5:()=>Bt,o9:()=>de,on:()=>Ke,qS:()=>vn,qk:()=>tn,sX:()=>qe,t7:()=>wr,uH:()=>bt,yW:()=>Et,yy:()=>Oe});const _={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Q=function(ie,ce){if(!ie)throw A(ce)},A=function(ie){return new Error("Firebase Database ("+_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ie)},F=function(ie){const ce=[];let Z=0;for(let X=0;X<ie.length;X++){let ee=ie.charCodeAt(X);ee<128?ce[Z++]=ee:ee<2048?(ce[Z++]=ee>>6|192,ce[Z++]=63&ee|128):55296==(64512&ee)&&X+1<ie.length&&56320==(64512&ie.charCodeAt(X+1))?(ee=65536+((1023&ee)<<10)+(1023&ie.charCodeAt(++X)),ce[Z++]=ee>>18|240,ce[Z++]=ee>>12&63|128,ce[Z++]=ee>>6&63|128,ce[Z++]=63&ee|128):(ce[Z++]=ee>>12|224,ce[Z++]=ee>>6&63|128,ce[Z++]=63&ee|128)}return ce},G={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ie,ce){if(!Array.isArray(ie))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=ce?this.byteToCharMapWebSafe_:this.byteToCharMap_,X=[];for(let ee=0;ee<ie.length;ee+=3){const Fe=ie[ee],mt=ee+1<ie.length,Wt=mt?ie[ee+1]:0,yn=ee+2<ie.length,En=yn?ie[ee+2]:0;let Dr=(15&Wt)<<2|En>>6,ln=63&En;yn||(ln=64,mt||(Dr=64)),X.push(Z[Fe>>2],Z[(3&Fe)<<4|Wt>>4],Z[Dr],Z[ln])}return X.join("")},encodeString(ie,ce){return this.HAS_NATIVE_SUPPORT&&!ce?btoa(ie):this.encodeByteArray(F(ie),ce)},decodeString(ie,ce){return this.HAS_NATIVE_SUPPORT&&!ce?atob(ie):function(ie){const ce=[];let Z=0,X=0;for(;Z<ie.length;){const ee=ie[Z++];if(ee<128)ce[X++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const Fe=ie[Z++];ce[X++]=String.fromCharCode((31&ee)<<6|63&Fe)}else if(ee>239&&ee<365){const yn=((7&ee)<<18|(63&ie[Z++])<<12|(63&ie[Z++])<<6|63&ie[Z++])-65536;ce[X++]=String.fromCharCode(55296+(yn>>10)),ce[X++]=String.fromCharCode(56320+(1023&yn))}else{const Fe=ie[Z++],mt=ie[Z++];ce[X++]=String.fromCharCode((15&ee)<<12|(63&Fe)<<6|63&mt)}}return ce.join("")}(this.decodeStringToByteArray(ie,ce))},decodeStringToByteArray(ie,ce){this.init_();const Z=ce?this.charToByteMapWebSafe_:this.charToByteMap_,X=[];for(let ee=0;ee<ie.length;){const Fe=Z[ie.charAt(ee++)],Wt=ee<ie.length?Z[ie.charAt(ee)]:0;++ee;const En=ee<ie.length?Z[ie.charAt(ee)]:64;++ee;const Yt=ee<ie.length?Z[ie.charAt(ee)]:64;if(++ee,null==Fe||null==Wt||null==En||null==Yt)throw new Ie;X.push(Fe<<2|Wt>>4),64!==En&&(X.push(Wt<<4&240|En>>2),64!==Yt&&X.push(En<<6&192|Yt))}return X},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ie=0;ie<this.ENCODED_VALS.length;ie++)this.byteToCharMap_[ie]=this.ENCODED_VALS.charAt(ie),this.charToByteMap_[this.byteToCharMap_[ie]]=ie,this.byteToCharMapWebSafe_[ie]=this.ENCODED_VALS_WEBSAFE.charAt(ie),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ie]]=ie,ie>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ie)]=ie,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ie)]=ie)}}};class Ie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const je=function(ie){const ce=F(ie);return G.encodeByteArray(ce,!0)},Ne=function(ie){return je(ie).replace(/\./g,"")},he=function(ie){try{return G.decodeString(ie,!0)}catch(ce){console.error("base64Decode failed: ",ce)}return null};function le(ie){return $e(void 0,ie)}function $e(ie,ce){if(!(ce instanceof Object))return ce;switch(ce.constructor){case Date:return new Date(ce.getTime());case Object:void 0===ie&&(ie={});break;case Array:ie=[];break;default:return ce}for(const Z in ce)!ce.hasOwnProperty(Z)||!we(Z)||(ie[Z]=$e(ie[Z],ce[Z]));return ie}function we(ie){return"__proto__"!==ie}const pe=()=>{try{return function Se(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ie=process.env.__FIREBASE_DEFAULTS__;return ie?JSON.parse(ie):void 0})()||(()=>{if(typeof document>"u")return;let ie;try{ie=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const ce=ie&&he(ie[1]);return ce&&JSON.parse(ce)})()}catch(ie){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ie}`)}},Ue=ie=>{var ce,Z;return null===(Z=null===(ce=pe())||void 0===ce?void 0:ce.emulatorHosts)||void 0===Z?void 0:Z[ie]},Ke=ie=>{const ce=Ue(ie);if(!ce)return;const Z=ce.lastIndexOf(":");if(Z<=0||Z+1===ce.length)throw new Error(`Invalid host ${ce} with no separate hostname and port!`);const X=parseInt(ce.substring(Z+1),10);return"["===ce[0]?[ce.substring(1,Z-1),X]:[ce.substring(0,Z),X]},Ee=()=>{var ie;return null===(ie=pe())||void 0===ie?void 0:ie.config},qe=ie=>{var ce;return null===(ce=pe())||void 0===ce?void 0:ce[`_${ie}`]};class de{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ce,Z)=>{this.resolve=ce,this.reject=Z})}wrapCallback(ce){return(Z,X)=>{Z?this.reject(Z):this.resolve(X),"function"==typeof ce&&(this.promise.catch(()=>{}),1===ce.length?ce(Z):ce(Z,X))}}}function wt(ie,ce){if(ie.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const X=ce||"demo-project",ee=ie.iat||0,Fe=ie.sub||ie.user_id;if(!Fe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${X}`,aud:X,iat:ee,exp:ee+3600,auth_time:ee,sub:Fe,user_id:Fe,firebase:{sign_in_provider:"custom",identities:{}}},ie);return[Ne(JSON.stringify({alg:"none",type:"JWT"})),Ne(JSON.stringify(mt)),""].join(".")}function Dt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function Et(){var ie;const ce=null===(ie=pe())||void 0===ie?void 0:ie.forceEnvironment;if("node"===ce)return!0;if("browser"===ce)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function bt(){return"object"==typeof self&&self.self===self}function ht(){const ie="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ie&&void 0!==ie.id}function Le(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function tt(){const ie=Dt();return ie.indexOf("MSIE ")>=0||ie.indexOf("Trident/")>=0}function Nt(){return!0===_.NODE_CLIENT||!0===_.NODE_ADMIN}function tn(){return!Et()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oe(){try{return"object"==typeof indexedDB}catch{return!1}}function ze(){return new Promise((ie,ce)=>{try{let Z=!0;const X="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(X);ee.onsuccess=()=>{ee.result.close(),Z||self.indexedDB.deleteDatabase(X),ie(!0)},ee.onupgradeneeded=()=>{Z=!1},ee.onerror=()=>{var Fe;ce((null===(Fe=ee.error)||void 0===Fe?void 0:Fe.message)||"")}}catch(Z){ce(Z)}})}class lt extends Error{constructor(ce,Z,X){super(Z),this.code=ce,this.customData=X,this.name="FirebaseError",Object.setPrototypeOf(this,lt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ut.prototype.create)}}class ut{constructor(ce,Z,X){this.service=ce,this.serviceName=Z,this.errors=X}create(ce,...Z){const X=Z[0]||{},ee=`${this.service}/${ce}`,Fe=this.errors[ce],mt=Fe?function Tt(ie,ce){return ie.replace(qt,(Z,X)=>{const ee=ce[X];return null!=ee?String(ee):`<${X}?>`})}(Fe,X):"Error";return new lt(ee,`${this.serviceName}: ${mt} (${ee}).`,X)}}const qt=/\{\$([^}]+)}/g;function Zt(ie){return JSON.parse(ie)}function en(ie){return JSON.stringify(ie)}const _n=function(ie){let ce={},Z={},X={},ee="";try{const Fe=ie.split(".");ce=Zt(he(Fe[0])||""),Z=Zt(he(Fe[1])||""),ee=Fe[2],X=Z.d||{},delete Z.d}catch{}return{header:ce,claims:Z,data:X,signature:ee}},wn=function(ie){const Z=_n(ie).claims;return!!Z&&"object"==typeof Z&&Z.hasOwnProperty("iat")},Wn=function(ie){const ce=_n(ie).claims;return"object"==typeof ce&&!0===ce.admin};function Rr(ie,ce){return Object.prototype.hasOwnProperty.call(ie,ce)}function Bt(ie,ce){if(Object.prototype.hasOwnProperty.call(ie,ce))return ie[ce]}function wr(ie){for(const ce in ie)if(Object.prototype.hasOwnProperty.call(ie,ce))return!1;return!0}function Lt(ie,ce,Z){const X={};for(const ee in ie)Object.prototype.hasOwnProperty.call(ie,ee)&&(X[ee]=ce.call(Z,ie[ee],ee,ie));return X}function zr(ie,ce){if(ie===ce)return!0;const Z=Object.keys(ie),X=Object.keys(ce);for(const ee of Z){if(!X.includes(ee))return!1;const Fe=ie[ee],mt=ce[ee];if(kn(Fe)&&kn(mt)){if(!zr(Fe,mt))return!1}else if(Fe!==mt)return!1}for(const ee of X)if(!Z.includes(ee))return!1;return!0}function kn(ie){return null!==ie&&"object"==typeof ie}function yr(ie){const ce=[];for(const[Z,X]of Object.entries(ie))Array.isArray(X)?X.forEach(ee=>{ce.push(encodeURIComponent(Z)+"="+encodeURIComponent(ee))}):ce.push(encodeURIComponent(Z)+"="+encodeURIComponent(X));return ce.length?"&"+ce.join("&"):""}function vi(ie){const ce={};return ie.replace(/^\?/,"").split("&").forEach(X=>{if(X){const[ee,Fe]=X.split("=");ce[decodeURIComponent(ee)]=decodeURIComponent(Fe)}}),ce}function rr(ie){const ce=ie.indexOf("?");if(!ce)return"";const Z=ie.indexOf("#",ce);return ie.substring(ce,Z>0?Z:void 0)}class vn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ce=1;ce<this.blockSize;++ce)this.pad_[ce]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ce,Z){Z||(Z=0);const X=this.W_;if("string"==typeof ce)for(let Yt=0;Yt<16;Yt++)X[Yt]=ce.charCodeAt(Z)<<24|ce.charCodeAt(Z+1)<<16|ce.charCodeAt(Z+2)<<8|ce.charCodeAt(Z+3),Z+=4;else for(let Yt=0;Yt<16;Yt++)X[Yt]=ce[Z]<<24|ce[Z+1]<<16|ce[Z+2]<<8|ce[Z+3],Z+=4;for(let Yt=16;Yt<80;Yt++){const Dr=X[Yt-3]^X[Yt-8]^X[Yt-14]^X[Yt-16];X[Yt]=4294967295&(Dr<<1|Dr>>>31)}let En,On,ee=this.chain_[0],Fe=this.chain_[1],mt=this.chain_[2],Wt=this.chain_[3],yn=this.chain_[4];for(let Yt=0;Yt<80;Yt++){Yt<40?Yt<20?(En=Wt^Fe&(mt^Wt),On=1518500249):(En=Fe^mt^Wt,On=1859775393):Yt<60?(En=Fe&mt|Wt&(Fe|mt),On=2400959708):(En=Fe^mt^Wt,On=3395469782);const Dr=(ee<<5|ee>>>27)+En+yn+On+X[Yt]&4294967295;yn=Wt,Wt=mt,mt=4294967295&(Fe<<30|Fe>>>2),Fe=ee,ee=Dr}this.chain_[0]=this.chain_[0]+ee&4294967295,this.chain_[1]=this.chain_[1]+Fe&4294967295,this.chain_[2]=this.chain_[2]+mt&4294967295,this.chain_[3]=this.chain_[3]+Wt&4294967295,this.chain_[4]=this.chain_[4]+yn&4294967295}update(ce,Z){if(null==ce)return;void 0===Z&&(Z=ce.length);const X=Z-this.blockSize;let ee=0;const Fe=this.buf_;let mt=this.inbuf_;for(;ee<Z;){if(0===mt)for(;ee<=X;)this.compress_(ce,ee),ee+=this.blockSize;if("string"==typeof ce){for(;ee<Z;)if(Fe[mt]=ce.charCodeAt(ee),++mt,++ee,mt===this.blockSize){this.compress_(Fe),mt=0;break}}else for(;ee<Z;)if(Fe[mt]=ce[ee],++mt,++ee,mt===this.blockSize){this.compress_(Fe),mt=0;break}}this.inbuf_=mt,this.total_+=Z}digest(){const ce=[];let Z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ee=this.blockSize-1;ee>=56;ee--)this.buf_[ee]=255&Z,Z/=256;this.compress_(this.buf_);let X=0;for(let ee=0;ee<5;ee++)for(let Fe=24;Fe>=0;Fe-=8)ce[X]=this.chain_[ee]>>Fe&255,++X;return ce}}function gn(ie,ce){const Z=new ii(ie,ce);return Z.subscribe.bind(Z)}class ii{constructor(ce,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{ce(this)}).catch(X=>{this.error(X)})}next(ce){this.forEachObserver(Z=>{Z.next(ce)})}error(ce){this.forEachObserver(Z=>{Z.error(ce)}),this.close(ce)}complete(){this.forEachObserver(ce=>{ce.complete()}),this.close()}subscribe(ce,Z,X){let ee;if(void 0===ce&&void 0===Z&&void 0===X)throw new Error("Missing Observer.");ee=function qr(ie,ce){if("object"!=typeof ie||null===ie)return!1;for(const Z of ce)if(Z in ie&&"function"==typeof ie[Z])return!0;return!1}(ce,["next","error","complete"])?ce:{next:ce,error:Z,complete:X},void 0===ee.next&&(ee.next=Bi),void 0===ee.error&&(ee.error=Bi),void 0===ee.complete&&(ee.complete=Bi);const Fe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch{}}),this.observers.push(ee),Fe}unsubscribeOne(ce){void 0===this.observers||void 0===this.observers[ce]||(delete this.observers[ce],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ce){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,ce)}sendOne(ce,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ce])try{Z(this.observers[ce])}catch(X){typeof console<"u"&&console.error&&console.error(X)}})}close(ce){this.finalized||(this.finalized=!0,void 0!==ce&&(this.finalError=ce),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Bi(){}function bn(ie,ce){return`${ie} failed: ${ce} argument `}const Mr=function(ie){const ce=[];let Z=0;for(let X=0;X<ie.length;X++){let ee=ie.charCodeAt(X);if(ee>=55296&&ee<=56319){const Fe=ee-55296;X++,Q(X<ie.length,"Surrogate pair missing trail surrogate."),ee=65536+(Fe<<10)+(ie.charCodeAt(X)-56320)}ee<128?ce[Z++]=ee:ee<2048?(ce[Z++]=ee>>6|192,ce[Z++]=63&ee|128):ee<65536?(ce[Z++]=ee>>12|224,ce[Z++]=ee>>6&63|128,ce[Z++]=63&ee|128):(ce[Z++]=ee>>18|240,ce[Z++]=ee>>12&63|128,ce[Z++]=ee>>6&63|128,ce[Z++]=63&ee|128)}return ce},Gn=function(ie){let ce=0;for(let Z=0;Z<ie.length;Z++){const X=ie.charCodeAt(Z);X<128?ce++:X<2048?ce+=2:X>=55296&&X<=56319?(ce+=4,Z++):ce+=3}return ce};function Be(ie){return ie&&ie._delegate?ie._delegate:ie}},4320:($t,We,V)=>{V.d(We,{u:()=>pe});var _=V(1368),Q=V(6504),A=V(6736),F=V(4496),ye=V(3804),G=V(788),Ie=V(4856);function je(Ue,Ke){if(1&Ue){const Ee=F.KQA();F.I0R(0,"img",15),F.qCj("click",function(){F.usT(Ee);const de=F.GaO(3);return F.CGJ(de.editing())}),F.C$Y()}}function Ne(Ue,Ke){if(1&Ue){const Ee=F.KQA();F.I0R(0,"img",15),F.qCj("click",function(){F.usT(Ee);const de=F.GaO(3);return F.CGJ(de.cancelEditing())}),F.C$Y()}}function he(Ue,Ke){if(1&Ue){const Ee=F.KQA();F.I0R(0,"div",12)(1,"img",13),F.qCj("click",function(){F.usT(Ee);const de=F.GaO(2);return F.CGJ(de.removeProduct())}),F.C$Y(),F.yuY(2,je,1,0,"img",14)(3,Ne,1,0,"img",14),F.C$Y()}if(2&Ue){const Ee=F.GaO(2);F.yG2(2),F.E7m("ngIf",""===Ee.isEditing),F.yG2(),F.E7m("ngIf",""!==Ee.isEditing)}}function le(Ue,Ke){if(1&Ue){const Ee=F.KQA();F.I0R(0,"img",16),F.qCj("click",function(){F.usT(Ee);const de=F.GaO(2);return F.CGJ(de.likeUnlikeProduct())}),F.C$Y()}}function $e(Ue,Ke){if(1&Ue){const Ee=F.KQA();F.I0R(0,"img",17),F.qCj("click",function(){F.usT(Ee);const de=F.GaO(2);return F.CGJ(de.likeUnlikeProduct())}),F.C$Y()}}function we(Ue,Ke){if(1&Ue){const Ee=F.KQA();F.I0R(0,"div",18)(1,"app-reusable-form",19),F.qCj("formSubmitted",function(de){F.usT(Ee);const wt=F.GaO(2);return F.CGJ(wt.onFormSubmit(de))}),F.C$Y(),F.I0R(2,"div")(3,"button",4),F.qCj("click",function(){F.usT(Ee);const de=F.GaO(2);return F.CGJ(de.cancelEditing())}),F.OEk(4,"Cancel"),F.C$Y()()()}}function Se(Ue,Ke){if(1&Ue&&(F.I0R(0,"div",20),F.OEk(1),F.C$Y()),2&Ue){const Ee=F.GaO(2);F.yG2(),F.oRS(" -",Ee.product.product.discount,"% ")}}function Ve(Ue,Ke){if(1&Ue&&(F.I0R(0,"span"),F.OEk(1),F.C$Y()),2&Ue){const Ee=F.GaO(2);F.yG2(),F.cNF(Ee.product.product.price)}}function be(Ue,Ke){if(1&Ue&&(F.I0R(0,"div",21)(1,"span"),F.OEk(2),F.C$Y(),F.I0R(3,"span"),F.OEk(4),F.C$Y()()),2&Ue){const Ee=F.GaO(2);F.yG2(2),F.oRS(" ",Ee.product.product.price,"$ "),F.yG2(2),F.oRS(" ",Ee.calculateDiscount(),"$ ")}}function ot(Ue,Ke){if(1&Ue){const Ee=F.KQA();F.I0R(0,"div")(1,"div",1),F.yuY(2,he,4,2,"div",2),F.I0R(3,"div",3)(4,"button",4),F.qCj("click",function(){F.usT(Ee);const de=F.GaO();return F.CGJ(de.addInCart())}),F.OEk(5,"Add to cart"),F.C$Y(),F.I0R(6,"div")(7,"span",4),F.qCj("click",function(){F.usT(Ee);const de=F.GaO();return F.CGJ(de.navigation())}),F.OEk(8,"See Product"),F.C$Y(),F.I0R(9,"span",4),F.qCj("click",function(){F.usT(Ee);const de=F.GaO();return F.CGJ(de.likeUnlikeProduct())}),F.yuY(10,le,1,0,"img",5)(11,$e,1,0,"img",6),F.C$Y()()(),F.yuY(12,we,5,0,"div",7),F.I0R(13,"div",3),F.yuY(14,Se,2,1,"div",8),F.wR5(15,"img",9),F.C$Y(),F.I0R(16,"div",10)(17,"span"),F.OEk(18),F.C$Y(),F.I0R(19,"span"),F.OEk(20),F.C$Y(),F.yuY(21,Ve,2,1,"span",0)(22,be,5,2,"div",11),F.C$Y()()()}if(2&Ue){const Ee=F.GaO();F.yG2(2),F.E7m("ngIf",Ee.isAdmin),F.yG2(),F.E7m("ngClass",Ee.isEditing?"display-none":"hover"),F.yG2(7),F.E7m("ngIf",!Ee.checkIfliked()),F.yG2(),F.E7m("ngIf",Ee.checkIfliked()),F.yG2(),F.E7m("ngIf",Ee.isEditing===Ee.product.key),F.yG2(),F.E7m("ngClass",Ee.isEditing===Ee.product.key?"display-none":"img-placeholder"),F.yG2(),F.E7m("ngIf",null==Ee.product||null==Ee.product.product?null:Ee.product.product.discount),F.yG2(),F.E7m("src",Ee.product.product.photoUrl[0],F.K6U),F.yG2(3),F.cNF(Ee.product.product.category),F.yG2(2),F.cNF(Ee.product.product.model),F.yG2(),F.E7m("ngIf",!Ee.product.product.discount),F.yG2(),F.E7m("ngIf",Ee.product.product.discount)}}let pe=(()=>{class Ue{constructor(Ee,qe,de,wt){this.sharedService=Ee,this.authService=qe,this.router=de,this.cd=wt,this.removeEvent=new F._w7,this.editEvent=new F._w7,this.isAdmin=!1,this.likeProducts=[],this.isEditing=""}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.likedProducts.subscribe(Ee=>{this.likeProducts=Ee}),this.isAdmin=this.authService.loggedUser.value?.user.isAdmin}removeProduct(){this.sharedService.removeProduct(this.product?.product.category,this.product?.key).subscribe(()=>{this.removeEvent.emit({prodId:this.product?.key,prodCategory:this.product?.product.category}),this.cd.detectChanges()})}likeUnlikeProduct(){this.authService.loggedUser.subscribe(Ee=>{void 0!==Ee&&this.sharedService.likeUnlikeProduct(this.product?.key,Ee.key,this.product?.product.category).subscribe()})}navigation(){this.router.navigate([`single-product/${this.product?.key}`],{queryParams:{type:this.product?.product.category,prod:this.product?.key}})}addInCart(){this.sharedService.cartOperations("add",this.product)}checkIfliked(){return this.likeProducts.some(Ee=>Ee.key===this.product?.key)}navigateToCategotyPage(){this.router.navigate([`categoty/${this.product?.product.category}`])}calculateDiscount(){return this.product?.product.price-Math.round(this.product?.product.price*this.product?.product.discount/100)}editing(){this.isEditing=this.product?.key}cancelEditing(){this.isEditing=""}onFormSubmit(Ee){this.editEvent.emit({form:Ee,prodId:this.product?.key,prodCategory:this.product?.product?.category}),Ee.model&&(this.product.product.model=Ee.model),Ee.price&&(this.product.product.price=Ee.price),Ee.discount&&(this.product.product.discount=Ee.discount),Ee.quantity&&(this.product.product.quantity=Ee.quantity),Ee.description&&(this.product.product.description=Ee.description),this.cancelEditing()}static#e=this.\u0275fac=function(qe){return new(qe||Ue)(F.GI1(ye.Y),F.GI1(G.e),F.GI1(Ie.E5),F.GI1(F.kD9))};static#t=this.\u0275cmp=F.In1({type:Ue,selectors:[["app-card"]],inputs:{product:"product"},outputs:{removeEvent:"removeEvent",editEvent:"editEvent"},standalone:!0,features:[F.UHJ],decls:1,vars:1,consts:[[4,"ngIf"],[1,"single-product"],["class","delete-button",4,"ngIf"],[3,"ngClass"],[3,"click"],["src","assets/heart.png","alt","img",3,"click",4,"ngIf"],["src","assets/heart-red.png","alt","img",3,"click",4,"ngIf"],["class","edit",4,"ngIf"],["class","discount",4,"ngIf"],["alt","img",3,"src"],[1,"info"],["class","if-discount",4,"ngIf"],[1,"delete-button"],["src","assets/remove.png","alt","img",3,"click"],["src","assets/pen.png","alt","img",3,"click",4,"ngIf"],["src","assets/pen.png","alt","img",3,"click"],["src","assets/heart.png","alt","img",3,"click"],["src","assets/heart-red.png","alt","img",3,"click"],[1,"edit"],[3,"formSubmitted"],[1,"discount"],[1,"if-discount"]],template:function(qe,de){1&qe&&F.yuY(0,ot,23,12,"div",0),2&qe&&F.E7m("ngIf",de.product&&de.product.product)},dependencies:[Q.y,_.MD,_.QF,_.u_,A.o],styles:[".single-product[_ngcontent-%COMP%]{width:180px;height:390px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%]{position:absolute;z-index:1}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:2px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:10%;z-index:1}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{display:flex;gap:10px;justify-content:center;width:140px;height:40px;color:#fff}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{width:100%;height:260px;position:relative}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:260px}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{width:100%;height:120px;display:flex;flex-direction:column;justify-content:space-around}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{text-decoration:line-through}.if-discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:20px}.display-none[_ngcontent-%COMP%]{display:none}"]})}return Ue})()},1680:($t,We,V)=>{V.d(We,{w:()=>Ve});var _=V(1368),Q=V(4856),A=V(4496);let ye=(()=>{class be{constructor(pe){this.zone=pe}registerScript(pe,Ue,Ke){const Ee=window[Ue];if(Ee)return void this.zone.run(()=>{Ke(Ee)});const qe=document.createElement("script");qe.id=this.getElemId(Ue),qe.innerHTML="",qe.onload=()=>{this.zone.run(()=>{Ke(window[Ue])})},qe.src=pe,qe.async=!0,qe.defer=!0,document.getElementsByTagName("head")[0].appendChild(qe)}cleanup(pe){const Ue=document.getElementById(this.getElemId(pe));Ue&&Ue.remove()}getElemId(pe){return`ngx-paypal-script-elem-${pe}`}}return be.\u0275fac=function(pe){return new(pe||be)(A.CoB(A.WW2))},be.\u0275prov=A.wxM({token:be,factory:be.\u0275fac}),be})(),G=(()=>{class be{constructor(pe){this.scriptService=pe,this.paypalWindowName="paypal"}registerPayPalScript(pe,Ue){this.scriptService.registerScript(this.getUrlForConfig(pe),this.paypalWindowName,Ue)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(pe){const Ue=[{name:"client-id",value:pe.clientId}];return pe.locale&&Ue.push({name:"locale",value:pe.locale}),pe.currency&&Ue.push({name:"currency",value:pe.currency}),pe.commit&&Ue.push({name:"commit",value:pe.commit}),pe.vault&&Ue.push({name:"vault",value:pe.vault}),pe.intent&&Ue.push({name:"intent",value:pe.intent}),pe.funding&&Ue.push({name:"components",value:"buttons,funding-eligibility"}),pe.extraParams&&Ue.push(...pe.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(Ue)}`}getQueryString(pe){let Ue="";for(let Ke=0;Ke<pe.length;Ke++){const Ee=pe[Ke];Ue+=0===Ke?"?":"&",Ue+=`${Ee.name}=${Ee.value}`}return Ue}}return be.\u0275fac=function(pe){return new(pe||be)(A.CoB(ye))},be.\u0275prov=A.wxM({token:be,factory:be.\u0275fac}),be})(),je=(()=>{class be{}return be.\u0275fac=function(pe){return new(pe||be)},be.\u0275mod=A.a4G({type:be}),be.\u0275inj=A.s3X({providers:[ye,G],imports:[_.MD]}),be})();var Ne=V(3804),he=V(788);const le=["paymentRef"];function $e(be,ot){if(1&be){const pe=A.KQA();A.I0R(0,"div",5)(1,"div",6)(2,"img",7),A.qCj("click",function(){const Ee=A.usT(pe).$implicit,qe=A.GaO(2);return A.CGJ(qe.removeFromCart(Ee.product))}),A.C$Y()(),A.I0R(3,"div"),A.wR5(4,"img",8),A.C$Y(),A.I0R(5,"div",9)(6,"span"),A.OEk(7),A.C$Y(),A.I0R(8,"span"),A.OEk(9),A.C$Y(),A.I0R(10,"span"),A.OEk(11),A.C$Y(),A.I0R(12,"button",10),A.qCj("click",function(){const Ee=A.usT(pe).$implicit,qe=A.GaO(2);return A.CGJ(qe.nav(Ee.product.key,Ee.product.product.category))}),A.OEk(13," See Product "),A.C$Y(),A.I0R(14,"p"),A.OEk(15),A.C$Y(),A.I0R(16,"p")(17,"img",11),A.qCj("click",function(){const Ee=A.usT(pe).$implicit,qe=A.GaO(2);return A.CGJ(qe.plus(Ee.product.key,"minus"))}),A.C$Y(),A.OEk(18),A.I0R(19,"img",12),A.qCj("click",function(){const Ee=A.usT(pe).$implicit,qe=A.GaO(2);return A.CGJ(qe.plus(Ee.product.key,"plus"))}),A.C$Y()()()()}if(2&be){const pe=ot.$implicit;A.yG2(4),A.E7m("src",pe.product.product.photoUrl[0],A.K6U),A.yG2(3),A.oRS("Type: ",pe.product.product.category,""),A.yG2(2),A.oRS("Model: ",pe.product.product.model,""),A.yG2(2),A.oRS("Price: ",pe.product.product.price,"$"),A.yG2(4),A.oRS("Discount -",pe.product.product.discount,"%"),A.yG2(3),A.oRS("",pe.quantity," ")}}function we(be,ot){if(1&be){const pe=A.KQA();A.I0R(0,"div",13)(1,"h2"),A.OEk(2),A.C$Y(),A.I0R(3,"div")(4,"div")(5,"button",10),A.qCj("click",function(){A.usT(pe);const Ke=A.GaO(2);return A.CGJ(Ke.makePayment())}),A.OEk(6,"Buy Now"),A.C$Y()()()()}if(2&be){const pe=A.GaO(2);A.yG2(2),A.oRS("Total Price: ",pe.calculateTotalPrice(),"$")}}function Se(be,ot){if(1&be&&(A.I0R(0,"div",1)(1,"div")(2,"h2"),A.OEk(3,"Cart"),A.C$Y()(),A.I0R(4,"div",2),A.yuY(5,$e,20,6,"div",3),A.wVc(6,"async"),A.C$Y(),A.yuY(7,we,7,1,"div",4),A.C$Y()),2&be){const pe=A.GaO();A.yG2(5),A.E7m("ngForOf",A.kDX(6,2,pe.cart$)),A.yG2(2),A.E7m("ngIf",pe.calculateTotalPrice()>0)}}let Ve=(()=>{class be{constructor(pe,Ue,Ke,Ee){this.sharedService=pe,this.router=Ue,this.authService=Ke,this.cd=Ee,this.showCart=!0}ngOnInit(){this.cart$=this.sharedService.cart.asObservable()}makePayment(){this.sharedService.buyProducts(this.sharedService.cart.getValue(),this.calculateTotalPrice(),this.authService.loggedUser.getValue()?.user.email,this.authService.loggedUser.getValue()?.key)}removeFromCart(pe){this.sharedService.cartOperations("remove",pe),this.calculateTotalPrice()}nav(pe,Ue){this.router.navigate([`single-product/${pe}`],{queryParams:{type:Ue,prod:pe}})}plus(pe,Ue){let Ke=this.sharedService.cart.getValue();const Ee=Ke.findIndex(qe=>qe.product.key===pe);"plus"===Ue?Ke[Ee].quantity++:Ke[Ee].quantity>1&&Ke[Ee].quantity--,this.sharedService.cart.next(Ke)}calculateTotalPrice(){let pe=0;return this.sharedService.cart.getValue().forEach(Ue=>{if(Ue.product.product.discount>0){const Ke=Ue.quantity*(Ue.product.product.price-this.calculateDiscount(Ue.product.product.price,Ue.product.product.discount));pe+=Ke}else pe+=Ue.quantity*Ue.product.product.price}),pe}calculateDiscount(pe,Ue){return Math.round(pe*Ue/100)}static#e=this.\u0275fac=function(Ue){return new(Ue||be)(A.GI1(Ne.Y),A.GI1(Q.E5),A.GI1(he.e),A.GI1(A.kD9))};static#t=this.\u0275cmp=A.In1({type:be,selectors:[["app-cart"]],viewQuery:function(Ue,Ke){if(1&Ue&&A.CC$(le,7),2&Ue){let Ee;A.wto(Ee=A.Gqi())&&(Ke.paymentRef=Ee.first)}},inputs:{showCart:"showCart",userEmail:"userEmail"},standalone:!0,features:[A.UHJ],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"products"],["class","product",4,"ngFor","ngForOf"],["class","payment",4,"ngIf"],[1,"product"],[1,"remove"],["src","assets/remove.png","alt","img",3,"click"],["alt","img",3,"src"],[1,"description"],[3,"click"],["src","assets/minus.png","alt","img",3,"click"],["src","assets/plus.png","alt","img",3,"click"],[1,"payment"]],template:function(Ue,Ke){1&Ue&&A.yuY(0,Se,8,4,"div",0),2&Ue&&A.E7m("ngIf",Ke.showCart)},dependencies:[_.MD,_.ay,_.u_,_.a,Q.qQ,je],styles:[".container[_ngcontent-%COMP%]{width:600px;height:400px;background-color:#98c0e0;overflow-y:scroll}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{text-align:center;padding:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]{display:flex;gap:5px;height:110px;width:80%;border:1px solid rgb(118,153,218);border-radius:8px;position:relative}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{position:absolute;right:0}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:20%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > img[_ngcontent-%COMP%]{width:100%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:repeat(2,190px);grid-template-rows:repeat(3,34px);align-content:center;align-items:center}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:14px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px;cursor:pointer}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:not(:last-child){font-size:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:24px;width:130px;border:none;color:#fff;background-color:#7699da;border-radius:3px;cursor:pointer}.container[_ngcontent-%COMP%]   .payment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}"],changeDetection:0})}return be})()},6940:($t,We,V)=>{V.d(We,{W:()=>ye});var _=V(6504),Q=V(4856),A=V(4496),F=V(788);let ye=(()=>{class G{constructor(je,Ne){this.service=je,this.router=Ne,this.email=""}sendEmail(){this.email=""}navigate(je){if("profile"===je){const Ne=this.service.loggedUser.getValue()?.key;this.router.navigate([`profile/${Ne}`])}}static#e=this.\u0275fac=function(Ne){return new(Ne||G)(A.GI1(F.e),A.GI1(Q.E5))};static#t=this.\u0275cmp=A.In1({type:G,selectors:[["app-footer"]],standalone:!0,features:[A.UHJ],decls:33,vars:1,consts:[[1,"container"],[1,"flex-container"],["src","assets/placeholder.png","alt","img"],["src","assets/phone.png","alt","img"],["routerLink","/login"],["routerLink","/products"],[3,"click"],["placeholder","Enter your Email",3,"ngModel","ngModelChange"],["src","assets/send.png","alt","img",3,"click"]],template:function(Ne,he){1&Ne&&(A.I0R(0,"div",0),A.wR5(1,"div"),A.I0R(2,"div",1)(3,"div")(4,"h3"),A.OEk(5,"SABAMUSIC."),A.C$Y(),A.I0R(6,"p"),A.OEk(7,"Music Shop over 1000 brand. we sell quality product on our website"),A.C$Y(),A.I0R(8,"p"),A.wR5(9,"img",2),A.OEk(10,"Mindeli's street 7B"),A.C$Y(),A.I0R(11,"p"),A.wR5(12,"img",3),A.OEk(13,"+995 555 542 034"),A.C$Y()(),A.I0R(14,"div")(15,"h3"),A.OEk(16,"Menu"),A.C$Y(),A.I0R(17,"p",4),A.OEk(18,"Login"),A.C$Y(),A.I0R(19,"p",5),A.OEk(20,"Products"),A.C$Y(),A.I0R(21,"p"),A.OEk(22,"About Us"),A.C$Y(),A.I0R(23,"p"),A.OEk(24,"Terms & Policy"),A.C$Y(),A.I0R(25,"p",6),A.qCj("click",function(){return he.navigate("profile")}),A.OEk(26,"My Account"),A.C$Y()(),A.I0R(27,"div")(28,"h3"),A.OEk(29,"Stay Updated"),A.C$Y(),A.I0R(30,"div")(31,"input",7),A.iHE("ngModelChange",function($e){return A.kNx(he.email,$e)||(he.email=$e),$e}),A.C$Y(),A.I0R(32,"img",8),A.qCj("click",function(){return he.sendEmail()}),A.C$Y()()()()()),2&Ne&&(A.yG2(31),A.OKB("ngModel",he.email))},dependencies:[_.y,_.ot,_.ue,_._G,Q.qQ,Q.ER],styles:[".container[_ngcontent-%COMP%]{width:90%;height:220px;margin:100px auto;display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;height:2px;background-color:#000}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;height:100%}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:7px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:4px;cursor:pointer}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-size:14px;color:#616161}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > p[_ngcontent-%COMP%]{width:190px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{border:none;border-radius:2px;width:200px;height:20px;background-color:#e9dbdb}"],changeDetection:0})}return G})()},1092:($t,We,V)=>{V.d(We,{k:()=>he});var _=V(4856),Q=V(1368),A=V(1680),F=V(4496),ye=V(788);function G(le,$e){if(1&le){const we=F.KQA();F.I0R(0,"div",11)(1,"span",3),F.qCj("click",function(){F.usT(we);const Ve=F.GaO();return F.CGJ(Ve.navigateToCategotyPage("guitar"))}),F.OEk(2,"Guitar"),F.C$Y(),F.I0R(3,"span",3),F.qCj("click",function(){F.usT(we);const Ve=F.GaO();return F.CGJ(Ve.navigateToCategotyPage("drum"))}),F.OEk(4,"Drums"),F.C$Y(),F.I0R(5,"span",3),F.qCj("click",function(){F.usT(we);const Ve=F.GaO();return F.CGJ(Ve.navigateToCategotyPage("bass"))}),F.OEk(6,"Bass "),F.C$Y(),F.I0R(7,"span",3),F.qCj("click",function(){F.usT(we);const Ve=F.GaO();return F.CGJ(Ve.navigateToCategotyPage("piano"))}),F.OEk(8,"Piano"),F.C$Y(),F.I0R(9,"span",3),F.qCj("click",function(){F.usT(we);const Ve=F.GaO();return F.CGJ(Ve.navigateToCategotyPage("other"))}),F.OEk(10,"Other"),F.C$Y()()}}function Ie(le,$e){if(1&le){const we=F.KQA();F.I0R(0,"span",3),F.qCj("click",function(){F.usT(we);const Ve=F.GaO();return F.CGJ(Ve.navigate("login"))}),F.OEk(1,"Log In"),F.C$Y()}}function je(le,$e){if(1&le){const we=F.KQA();F.I0R(0,"img",12),F.qCj("click",function(){F.usT(we);const Ve=F.GaO();return F.CGJ(Ve.logOut())}),F.C$Y()}}function Ne(le,$e){if(1&le){const we=F.KQA();F.I0R(0,"img",13),F.qCj("click",function(){F.usT(we);const Ve=F.GaO();return F.CGJ(Ve.navigateToProfile())}),F.C$Y()}}let he=(()=>{class le{constructor(we,Se,Ve){this.router=we,this.loginService=Se,this.cd=Ve,this.dropDown=!1,this.cart=!1}ngOnInit(){this.loginService.loggedUser.subscribe(we=>{this.user=we,this.profilePicture=this.user?.user.photoUrl,this.cd.detectChanges()})}changeDropDown(){this.dropDown=!this.dropDown}navigateToProfile(){this.router.navigate([`profile/${this.user?.key}`])}navigateToCategotyPage(we){this.router.navigate([`categoty/${we}`])}openCloseCart(){this.cart=!this.cart}logOut(){this.loginService.logOut(),this.router.navigate(["/products"])}navigate(we){this.router.navigate([`/${we}`])}static#e=this.\u0275fac=function(Se){return new(Se||le)(F.GI1(_.E5),F.GI1(ye.e),F.GI1(F.kD9))};static#t=this.\u0275cmp=F.In1({type:le,selectors:[["app-header"]],standalone:!0,features:[F.UHJ],decls:19,vars:6,consts:[[1,"header-container"],["routerLink","/products"],[1,"dropdown-container"],[3,"click"],["class","dropdown",4,"ngIf"],["src","assets/down-arrow.png","alt","img",3,"click"],[3,"click",4,"ngIf"],[1,"cart",3,"userEmail","showCart"],["src","assets/logout.png","alt","img",3,"click",4,"ngIf"],["src","assets/shopping-cart.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click",4,"ngIf"],[1,"dropdown"],["src","assets/logout.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click"]],template:function(Se,Ve){1&Se&&(F.I0R(0,"div",0)(1,"div")(2,"span",1),F.OEk(3,"SABAMUSIC."),F.C$Y(),F.I0R(4,"div",2)(5,"span",3),F.qCj("click",function(){return Ve.changeDropDown()}),F.OEk(6,"Products "),F.yuY(7,G,11,0,"div",4),F.C$Y(),F.I0R(8,"img",5),F.qCj("click",function(){return Ve.changeDropDown()}),F.C$Y()(),F.I0R(9,"span",3),F.qCj("click",function(){return Ve.navigate("contact")}),F.OEk(10,"Contact"),F.C$Y(),F.I0R(11,"span",3),F.qCj("click",function(){return Ve.navigate("about-us")}),F.OEk(12,"About Us"),F.C$Y(),F.yuY(13,Ie,2,0,"span",6),F.wR5(14,"app-cart",7),F.C$Y(),F.I0R(15,"div"),F.yuY(16,je,1,0,"img",8),F.I0R(17,"img",9),F.qCj("click",function(){return Ve.openCloseCart()}),F.C$Y(),F.yuY(18,Ne,1,0,"img",10),F.C$Y()()),2&Se&&(F.yG2(7),F.E7m("ngIf",Ve.dropDown),F.yG2(6),F.E7m("ngIf",!Ve.user),F.yG2(),F.E7m("userEmail",null==Ve.user||null==Ve.user.user?null:Ve.user.user.email)("showCart",Ve.cart),F.yG2(2),F.E7m("ngIf",Ve.user),F.yG2(2),F.E7m("ngIf",Ve.user))},dependencies:[Q.MD,Q.u_,_.qQ,_.ER,A.w],styles:[".header-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:160px;margin-bottom:40px;position:sticky;top:5px;z-index:2}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:60%;display:flex;justify-content:space-between;align-items:center}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child{display:flex;align-items:center;gap:10px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child > input[_ngcontent-%COMP%]{height:20px;border:none;background-color:#f3ecec;border-radius:3px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   .cart[_ngcontent-%COMP%]{position:absolute;top:80px;right:100px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:26px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:relative;font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%]{z-index:3;display:flex;flex-direction:column;position:absolute;top:30px;gap:5px;z-index:1}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:flex;gap:20px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   img[_ngcontent-%COMP%]{width:26px;height:26px;cursor:pointer}"],changeDetection:0})}return le})()},3960:($t,We,V)=>{V.r(We),V.d(We,{LoginAndRegistrationModule:()=>XI});var _=V(1368),Q=V(6504),A=V(2740),F=V(4496),ye=V(6176),G=V(6e3),Ie=V(112),je=V(3252),Ne=V(9900),he=V(2700),le=V(5568),$e=V(5448),we=V(7773);function Se(){return(0,$e.i)((i,e)=>{let n,o=!1;i.subscribe((0,we.e)(e,c=>{const h=n;n=c,o&&e.next([h,c]),o=!0}))})}var Ve=V(4704),be=V(208),ot=V(528);function Ue(i,e){return i===e}var Le,Ke=V(6684),qe=(V(6858),V(8368)),de=V(1528),wt=V(9360),Dt=V(4920),xe=V(5976),Et=V(7144),bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ht={},et=et||{},tt=bt||self;function nt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Nt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Oe="closure_uid_"+(1e9*Math.random()>>>0),ze=0;function st(i,e,n){return i.call.apply(i.bind,arguments)}function Ge(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,o),i.apply(e,c)}}return function(){return i.apply(e,arguments)}}function lt(i,e,n){return(lt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?st:Ge).apply(null,arguments)}function ut(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Tt(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,c,h){for(var g=Array(arguments.length-2),R=2;R<arguments.length;R++)g[R-2]=arguments[R];return e.prototype[c].apply(o,g)}}function qt(){this.s=this.s,this.o=this.o}qt.prototype.s=!1,qt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function tn(i){Object.prototype.hasOwnProperty.call(i,Oe)&&i[Oe]||(i[Oe]=++ze)}(this)},qt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const en=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function _n(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function Tn(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(nt(o)){const c=i.length||0,h=o.length||0;i.length=c+h;for(let g=0;g<h;g++)i[c+g]=o[g]}else i.push(o)}}function Kt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Kt.prototype.h=function(){this.defaultPrevented=!0};var wn=function(){if(!tt.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const n=()=>{};tt.addEventListener("test",n,e),tt.removeEventListener("test",n,e)}catch{}return i}();function Wn(i){return/^[\s\xa0]*$/.test(i)}function Rr(){var i=tt.navigator;return i&&(i=i.userAgent)?i:""}function Bt(i){return-1!=Rr().indexOf(i)}function wr(i){return wr[" "](i),i}wr[" "]=function(){};var gn,i,zr=Bt("Opera"),kn=Bt("Trident")||Bt("MSIE"),Zr=Bt("Edge"),yr=Zr||kn,vi=Bt("Gecko")&&!(-1!=Rr().toLowerCase().indexOf("webkit")&&!Bt("Edge"))&&!(Bt("Trident")||Bt("MSIE"))&&!Bt("Edge"),rr=-1!=Rr().toLowerCase().indexOf("webkit")&&!Bt("Edge");function vn(){var i=tt.document;return i?i.documentMode:void 0}e:{var ii="",Hs=(i=Rr(),vi?/rv:([^\);]+)(\)|;)/.exec(i):Zr?/Edge\/([\d\.]+)/.exec(i):kn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):rr?/WebKit\/(\S+)/.exec(i):zr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Hs&&(ii=Hs?Hs[1]:""),kn){var qr=vn();if(null!=qr&&qr>parseFloat(ii)){gn=String(qr);break e}}gn=ii}var bn=tt.document&&kn&&(vn()||parseInt(gn,10))||void 0;function Fn(i,e){if(Kt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(vi){e:{try{wr(e.nodeName);var c=!0;break e}catch{}c=!1}c||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Tr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Fn.$.h.call(this)}}Tt(Fn,Kt);var Tr={2:"touch",3:"pen",4:"mouse"};Fn.prototype.h=function(){Fn.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Cn="closure_listenable_"+(1e6*Math.random()|0),Mr=0;function Gn(i,e,n,o,c){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=c,this.key=++Mr,this.fa=this.ia=!1}function wi(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function jr(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function Ds(i){const e={};for(const n in i)e[n]=i[n];return e}const pi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(i,e){let n,o;for(let c=1;c<arguments.length;c++){for(n in o=arguments[c],o)i[n]=o[n];for(let h=0;h<pi.length;h++)n=pi[h],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function He(i){this.src=i,this.g={},this.h=0}function ge(i,e){var n=e.type;if(n in i.g){var h,o=i.g[n],c=en(o,e);(h=0<=c)&&Array.prototype.splice.call(o,c,1),h&&(wi(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Be(i,e,n,o){for(var c=0;c<i.length;++c){var h=i[c];if(!h.fa&&h.listener==e&&h.capture==!!n&&h.la==o)return c}return-1}He.prototype.add=function(i,e,n,o,c){var h=i.toString();(i=this.g[h])||(i=this.g[h]=[],this.h++);var g=Be(i,e,o,c);return-1<g?(e=i[g],n||(e.ia=!1)):((e=new Gn(e,this.src,h,!!o,c)).ia=n,i.push(e)),e};var ie="closure_lm_"+(1e6*Math.random()|0),ce={};function Z(i,e,n,o,c){if(o&&o.once)return Fe(i,e,n,o,c);if(Array.isArray(e)){for(var h=0;h<e.length;h++)Z(i,e[h],n,o,c);return null}return n=Dr(n),i&&i[Cn]?i.O(e,n,Nt(o)?!!o.capture:!!o,c):X(i,e,n,!1,o,c)}function X(i,e,n,o,c,h){if(!e)throw Error("Invalid event type");var g=Nt(c)?!!c.capture:!!c,R=On(i);if(R||(i[ie]=R=new He(i)),(n=R.add(e,n,o,g,h)).proxy)return n;if(o=function ee(){const e=En;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)wn||(c=g),void 0===c&&(c=!1),i.addEventListener(e.toString(),o,c);else if(i.attachEvent)i.attachEvent(yn(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function Fe(i,e,n,o,c){if(Array.isArray(e)){for(var h=0;h<e.length;h++)Fe(i,e[h],n,o,c);return null}return n=Dr(n),i&&i[Cn]?i.P(e,n,Nt(o)?!!o.capture:!!o,c):X(i,e,n,!0,o,c)}function mt(i,e,n,o,c){if(Array.isArray(e))for(var h=0;h<e.length;h++)mt(i,e[h],n,o,c);else o=Nt(o)?!!o.capture:!!o,n=Dr(n),i&&i[Cn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Be(h=i.g[e],n,o,c))&&(wi(h[n]),Array.prototype.splice.call(h,n,1),0==h.length&&(delete i.g[e],i.h--))):i&&(i=On(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Be(e,n,o,c)),(n=-1<i?e[i]:null)&&Wt(n))}function Wt(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Cn])ge(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(yn(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=On(e))?(ge(n,i),0==n.h&&(n.src=null,e[ie]=null)):wi(i)}}}function yn(i){return i in ce?ce[i]:ce[i]="on"+i}function En(i,e){if(i.fa)i=!0;else{e=new Fn(e,this);var n=i.listener,o=i.la||i.src;i.ia&&Wt(i),i=n.call(o,e)}return i}function On(i){return(i=i[ie])instanceof He?i:null}var Yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dr(i){return"function"==typeof i?i:(i[Yt]||(i[Yt]=function(e){return i.handleEvent(e)}),i[Yt])}function ln(){qt.call(this),this.i=new He(this),this.S=this,this.J=null}function Ln(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new Kt(e,i);else if(e instanceof Kt)e.target=e.target||i;else{var c=e;gt(e=new Kt(o,i),c)}if(c=!0,n)for(var h=n.length-1;0<=h;h--){var g=e.g=n[h];c=Re(g,o,!0,e)&&c}if(c=Re(g=e.g=i,o,!0,e)&&c,c=Re(g,o,!1,e)&&c,n)for(h=0;h<n.length;h++)c=Re(g=e.g=n[h],o,!1,e)&&c}function Re(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,h=0;h<e.length;++h){var g=e[h];if(g&&!g.fa&&g.capture==n){var R=g.listener,N=g.la||g.src;g.ia&&ge(i.i,g),c=!1!==R.call(N,o)&&c}}return c&&!o.defaultPrevented}Tt(ln,qt),ln.prototype[Cn]=!0,ln.prototype.removeEventListener=function(i,e,n,o){mt(this,i,e,n,o)},ln.prototype.N=function(){if(ln.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)wi(n[o]);delete i.g[e],i.h--}}this.J=null},ln.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},ln.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var Ye=tt.JSON.stringify;function Ct(){var i=ve;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Bn=new class Xe{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Hn,i=>i.reset());class Hn{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Yn(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function Kr(i){tt.setTimeout(()=>{throw i},0)}let lr,oe=!1,ve=new class Xt{constructor(){this.h=this.g=null}add(e,n){const o=Bn.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},Ce=()=>{const i=tt.Promise.resolve(void 0);lr=()=>{i.then(ft)}};var ft=()=>{for(var i;i=Ct();){try{i.h.call(i.g)}catch(n){Kr(n)}var e=Bn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}oe=!1};function It(i,e){ln.call(this),this.h=i||1,this.g=e||tt,this.j=lt(this.qb,this),this.l=Date.now()}function xt(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Gt(i,e,n){if("function"==typeof i)n&&(i=lt(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=lt(i.handleEvent,i)}return 2147483647<Number(e)?-1:tt.setTimeout(i,e||0)}function dn(i){i.g=Gt(()=>{i.g=null,i.i&&(i.i=!1,dn(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Tt(It,ln),(Le=It.prototype).ga=!1,Le.T=null,Le.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ln(this,"tick"),this.ga&&(xt(this),this.start()))}},Le.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Le.N=function(){It.$.N.call(this),xt(this),delete this.g};class rn extends qt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:dn(this)}N(){super.N(),this.g&&(tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zn(i){qt.call(this),this.h=i,this.g={}}Tt(zn,qt);var vr=[];function sr(i,e,n,o){Array.isArray(n)||(n&&(vr[0]=n.toString()),n=vr);for(var c=0;c<n.length;c++){var h=Z(e,n[c],o||i.handleEvent,!1,i.h||i);if(!h)break;i.g[h.key]=h}}function Vn(i){jr(i.g,function(e,n){this.g.hasOwnProperty(n)&&Wt(e)},i),i.g={}}function ns(){this.g=!0}function qn(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function $n(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var c=o[1];if(Array.isArray(c)&&!(1>c.length)){var h=c[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var g=1;g<c.length;g++)c[g]=""}}}return Ye(n)}catch{return e}}(i,n)+(o?" "+o:"")})}zn.prototype.N=function(){zn.$.N.call(this),Vn(this)},zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ns.prototype.Ea=function(){this.g=!1},ns.prototype.info=function(){};var fr={},rs=null;function Di(){return rs=rs||new ln}function si(i){Kt.call(this,fr.Ta,i)}function Yr(i){const e=Di();Ln(e,new si(e))}function As(i,e){Kt.call(this,fr.STAT_EVENT,i),this.stat=e}function Ai(i){const e=Di();Ln(e,new As(e,i))}function $o(i,e){Kt.call(this,fr.Ua,i),this.size=e}function ji(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return tt.setTimeout(function(){i()},e)}fr.Ta="serverreachability",Tt(si,Kt),fr.STAT_EVENT="statevent",Tt(As,Kt),fr.Ua="timingevent",Tt($o,Kt);var Go={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ka={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zn(){}function $r(){}Zn.prototype.h=null;var ia,Ss={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function oi(){Kt.call(this,"d")}function ra(){Kt.call(this,"c")}function Bs(){}function zs(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new zn(this),this.P=Qr,this.V=new It(i=yr?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bo}function bo(){this.i=null,this.g="",this.h=!1}Tt(oi,Kt),Tt(ra,Kt),Tt(Bs,Zn),Bs.prototype.g=function(){return new XMLHttpRequest},Bs.prototype.i=function(){return{}},ia=new Bs;var Qr=45e3,kt={},mn={};function Ar(i,e,n){i.L=1,i.A=Mo(Qi(e)),i.u=n,i.S=!0,Yi(i,null)}function Yi(i,e){i.G=Date.now(),or(i),i.B=Qi(i.A);var n=i.B,o=i.W;Array.isArray(o)||(o=[String(o)]),sa(n.i,"t",o),i.o=0,n=i.l.J,i.h=new bo,i.g=Es(i.l,n?e:null,!i.u),0<i.O&&(i.M=new rn(lt(i.Pa,i,i.g),i.O)),sr(i.U,i.g,"readystatechange",i.nb),e=i.I?Ds(i.I):{},i.u?(i.v||(i.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.B,i.v,i.u,e)):(i.v="GET",i.g.ha(i.B,i.v,null,e)),Yr(),function Ti(i,e,n,o,c,h){i.info(function(){if(i.g)if(h)for(var g="",R=h.split("&"),N=0;N<R.length;N++){var B=R[N].split("=");if(1<B.length){var J=B[0];B=B[1];var ue=J.split("_");g=2<=ue.length&&"type"==ue[1]?g+(J+"=")+B+"&":g+(J+"=redacted&")}}else g=null;else g=h;return"XMLHTTP REQ ("+o+") [attempt "+c+"]: "+e+"\n"+n+"\n"+g})}(i.j,i.v,i.B,i.m,i.W,i.u)}function xi(i){return!!i.g&&"GET"==i.v&&2!=i.L&&i.l.Ha}function Ni(i,e,n){let c,o=!0;for(;!i.J&&i.o<n.length;){if(c=$i(i,n),c==mn){4==e&&(i.s=4,Ai(14),o=!1),qn(i.j,i.m,null,"[Incomplete Response]");break}if(c==kt){i.s=4,Ai(15),qn(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}qn(i.j,i.m,c,null),ho(i,c)}xi(i)&&0!=i.o&&(i.h.g=i.h.g.slice(i.o),i.o=0),4!=e||0!=n.length||i.h.h||(i.s=1,Ai(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Mn(e),e.M=!0,Ai(11))):(qn(i.j,i.m,n,"[Invalid Chunked Response]"),Pi(i),An(i))}function $i(i,e){var n=i.o,o=e.indexOf("\n",n);return-1==o?mn:(n=Number(e.substring(n,o)),isNaN(n)?kt:(o+=1)+n>e.length?mn:(e=e.slice(o,o+n),i.o=o+n,e))}function or(i){i.Y=Date.now()+i.P,ki(i,i.P)}function ki(i,e){if(null!=i.C)throw Error("WatchDog timer not null");i.C=ji(lt(i.lb,i),e)}function Gi(i){i.C&&(tt.clearTimeout(i.C),i.C=null)}function An(i){0==i.l.H||i.J||_a(i.l,i)}function Pi(i){Gi(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,xt(i.V),Vn(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function ho(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||pa(n.i,i)))if(!i.K&&pa(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var c=o;if(0==c[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;hr(n),Js(n)}$s(n),Ai(18)}}else n.Fa=c[1],0<n.Fa-n.V&&37500>c[2]&&n.G&&0==n.A&&!n.v&&(n.v=ji(lt(n.ib,n),6e3));if(1>=fo(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else qo(n,11)}else if((i.K||n.g==i)&&hr(n),!Wn(e))for(c=n.Ja.g.parse(e),e=0;e<c.length;e++){let B=c[e];if(n.V=B[0],B=B[1],2==n.H)if("c"==B[0]){n.K=B[1],n.pa=B[2];const J=B[3];null!=J&&(n.ra=J,n.l.info("VER="+n.ra));const ue=B[4];null!=ue&&(n.Ga=ue,n.l.info("SVER="+n.Ga));const Pe=B[5];null!=Pe&&"number"==typeof Pe&&0<Pe&&(n.L=o=1.5*Pe,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const Je=i.g;if(Je){const Ut=Je.g?Je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ut){var h=o.i;h.g||-1==Ut.indexOf("spdy")&&-1==Ut.indexOf("quic")&&-1==Ut.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(ga(h,h.h),h.h=null))}if(o.F){const Jt=Je.g?Je.g.getResponseHeader("X-HTTP-Session-Id"):null;Jt&&(o.Da=Jt,sn(o.I,o.F,Jt))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var g=i;if((o=n).wa=Ko(o,o.J?o.pa:null,o.Y),g.K){yu(o.i,g);var R=g,N=o.L;N&&R.setTimeout(N),R.C&&(Gi(R),or(R)),o.g=g}else Bc(o);0<n.j.length&&No(n)}else"stop"!=B[0]&&"close"!=B[0]||qo(n,7);else 3==n.H&&("stop"==B[0]||"close"==B[0]?"stop"==B[0]?qo(n,7):ds(n):"noop"!=B[0]&&n.h&&n.h.Aa(B),n.A=0)}Yr()}catch{}}function Ps(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(nt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function li(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(nt(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function qs(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(nt(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),c=o.length,h=0;h<c;h++)e.call(void 0,o[h],n&&n[h],i)}(Le=zs.prototype).setTimeout=function(i){this.P=i},Le.nb=function(i){i=i.target;const e=this.M;e&&3==Un(i)?e.l():this.Pa(i)},Le.Pa=function(i){try{if(i==this.g)e:{const J=Un(this.g);var e=this.g.Ia();if(this.g.da(),!(3>J)&&(3!=J||yr||this.g&&(this.h.h||this.g.ja()||Ji(this.g)))){this.J||4!=J||7==e||Yr(),Gi(this);var n=this.g.da();this.ca=n;t:if(xi(this)){var o=Ji(this.g);i="";var c=o.length,h=4==Un(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Pi(this),An(this);var g="";break t}this.h.i=new tt.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:h&&e==c-1});o.length=0,this.h.g+=i,this.o=0,g=this.h.g}else g=this.g.ja();if(this.i=200==n,function kr(i,e,n,o,c,h,g){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+c+"]: "+e+"\n"+n+"\n"+h+" "+g})}(this.j,this.v,this.B,this.m,this.W,J,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var R,N=this.g;if((R=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wn(R)){var B=R;break t}}B=null}if(!(n=B)){this.i=!1,this.s=3,Ai(12),Pi(this),An(this);break e}qn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ho(this,n)}this.S?(Ni(this,J,g),yr&&this.i&&3==J&&(sr(this.U,this.V,"tick",this.mb),this.V.start())):(qn(this.j,this.m,g,null),ho(this,g)),4==J&&Pi(this),this.i&&!this.J&&(4==J?_a(this.l,this):(this.i=!1,or(this)))}else(function ma(i){const e={};i=(i.g&&2<=Un(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(Wn(i[o]))continue;var n=Yn(i[o]);const c=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const h=e[c]||[];e[c]=h,h.push(n)}!function Nr(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<g.indexOf("Unknown SID")?(this.s=3,Ai(12)):(this.s=0,Ai(13)),Pi(this),An(this)}}}catch{}},Le.mb=function(){if(this.g){var i=Un(this.g),e=this.g.ja();this.o<e.length&&(Gi(this),Ni(this,i,e),this.i&&4!=i&&or(this))}},Le.cancel=function(){this.J=!0,Pi(this)},Le.lb=function(){this.C=null;const i=Date.now();0<=i-this.Y?(function ei(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Yr(),Ai(17)),Pi(this),this.s=2,An(this)):ki(this,this.Y-i)};var bs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function is(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof is){this.h=i.h,Ei(this,i.j),this.s=i.s,this.g=i.g,Ro(this,i.m),this.l=i.l;var e=i.i,n=new Os;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Rs(this,n),this.o=i.o}else i&&(e=String(i).match(bs))?(this.h=!1,Ei(this,e[1]||"",!0),this.s=Ms(e[2]||""),this.g=Ms(e[3]||"",!0),Ro(this,e[4]),this.l=Ms(e[5]||"",!0),Rs(this,e[6]||"",!0),this.o=Ms(e[7]||"")):(this.h=!1,this.i=new Os(null,this.h))}function Qi(i){return new is(i)}function Ei(i,e,n){i.j=n?Ms(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ro(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Rs(i,e,n){e instanceof Os?(i.i=e,function Wo(i,e){e&&!i.j&&(Fi(i),i.i=null,i.g.forEach(function(n,o){var c=o.toLowerCase();o!=c&&(xs(this,o),sa(this,c,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Wi(e,ss)),i.i=new Os(e,i.h))}function sn(i,e,n){i.i.set(e,n)}function Mo(i){return sn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Ms(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Wi(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,fa),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function fa(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}is.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Wi(e,Oo,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Wi(e,Oo,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Wi(n,"/"==n.charAt(0)?ys:di,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Wi(n,Hi)),i.join("")};var Oo=/[#\/\?@]/g,di=/[#\?:]/g,ys=/[#\?]/g,ss=/[#\?@]/g,Hi=/#/g;function Os(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Fi(i){i.g||(i.g=new Map,i.h=0,i.i&&function bi(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),c=null;if(0<=o){var h=i[n].substring(0,o);c=i[n].substring(o+1)}else h=i[n];e(h,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function xs(i,e){Fi(i),e=Ks(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Li(i,e){return Fi(i),e=Ks(i,e),i.g.has(e)}function sa(i,e,n){xs(i,e),0<n.length&&(i.i=null,i.g.set(Ks(i,e),_n(n)),i.h+=n.length)}function Ks(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}(Le=Os.prototype).add=function(i,e){Fi(this),this.i=null,i=Ks(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},Le.forEach=function(i,e){Fi(this),this.g.forEach(function(n,o){n.forEach(function(c){i.call(e,c,o,this)},this)},this)},Le.ta=function(){Fi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const c=i[o];for(let h=0;h<c.length;h++)n.push(e[o])}return n},Le.Z=function(i){Fi(this);let e=[];if("string"==typeof i)Li(this,i)&&(e=e.concat(this.g.get(Ks(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},Le.set=function(i,e){return Fi(this),this.i=null,Li(this,i=Ks(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Le.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},Le.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const h=encodeURIComponent(String(o)),g=this.Z(o);for(o=0;o<g.length;o++){var c=h;""!==g[o]&&(c+="="+encodeURIComponent(String(g[o]))),i.push(c)}}return this.i=i.join("&")};var Ya=class{constructor(i,e){this.g=i,this.map=e}};function Vc(i){this.l=i||_u,i=tt.PerformanceNavigationTiming?0<(i=tt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(tt.g&&tt.g.Ka&&tt.g.Ka()&&tt.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var _u=10;function js(i){return!!i.h||!!i.g&&i.g.size>=i.j}function fo(i){return i.h?1:i.g?i.g.size:0}function pa(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ga(i,e){i.g?i.g.add(e):i.h=e}function yu(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ra(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return _n(i.i)}Vc.prototype.cancel=function(){if(this.i=Ra(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var Ys=class{stringify(i){return tt.JSON.stringify(i,void 0)}parse(i){return tt.JSON.parse(i,void 0)}};function W(){this.g=new Ys}function q(i,e,n){const o=n||"";try{Ps(i,function(c,h){let g=c;Nt(c)&&(g=Ye(c)),e.push(o+h+"="+encodeURIComponent(g))})}catch(c){throw e.push(o+"type="+encodeURIComponent("_badmap")),c}}function ne(i,e,n,o,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(o)}catch{}}function Te(i){this.l=i.ec||null,this.j=i.ob||!1}function on(i,e){ln.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=Qn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tt(Te,Zn),Te.prototype.g=function(){return new on(this.l,this.j)},Te.prototype.i=function(i){return function(){return i}}({}),Tt(on,ln);var Qn=0;function vs(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function os(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Ns(i)}function Ns(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Le=on.prototype).open=function(i,e){if(this.readyState!=Qn)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Ns(this)},Le.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||tt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Le.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,os(this)),this.readyState=Qn},Le.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Ns(this)),this.g&&(this.readyState=3,Ns(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof tt.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;vs(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},Le.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?os(this):Ns(this),3==this.readyState&&vs(this)}},Le.Za=function(i){this.g&&(this.response=this.responseText=i,os(this))},Le.Ya=function(i){this.g&&(this.response=i,os(this))},Le.ka=function(){this.g&&os(this)},Le.setRequestHeader=function(i,e){this.v.append(i,e)},Le.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Le.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(on.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Uc=tt.JSON.parse;function Rn(i){ln.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Sr,this.L=this.M=!1}Tt(Rn,ln);var Sr="",hn=/^https?$/i,Ho=["POST","PUT"];function Ma(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Fr(i),xo(i)}function Fr(i){i.F||(i.F=!0,Ln(i,"complete"),Ln(i,"error"))}function Qs(i){if(i.h&&typeof et<"u"&&(!i.C[1]||4!=Un(i)||2!=i.da()))if(i.v&&4==Un(i))Gt(i.La,0,i);else if(Ln(i,"readystatechange"),4==Un(i)){i.h=!1;try{const g=i.da();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===g){var c=String(i.I).match(bs)[1]||null;!c&&tt.self&&tt.self.location&&(c=tt.self.location.protocol.slice(0,-1)),o=!hn.test(c?c.toLowerCase():"")}n=o}if(n)Ln(i,"complete"),Ln(i,"success");else{i.m=6;try{var h=2<Un(i)?i.g.statusText:""}catch{h=""}i.j=h+" ["+i.da()+"]",Fr(i)}}finally{xo(i)}}}function xo(i,e){if(i.g){dr(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||Ln(i,"ready");try{n.onreadystatechange=o}catch{}}}function dr(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(tt.clearTimeout(i.A),i.A=null)}function Un(i){return i.g?i.g.readyState:0}function Ji(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case Sr:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function ks(i){let e="";return jr(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function ls(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=ks(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):sn(i,e,n))}function Io(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function gc(i){this.Ga=0,this.j=[],this.l=new ns,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Io("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Io("baseRetryDelayMs",5e3,i),this.hb=Io("retryDelaySeedMs",1e4,i),this.eb=Io("forwardChannelMaxRetries",2,i),this.xa=Io("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new Vc(i&&i.concurrentRequestLimit),this.Ja=new W,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ds(i){if(Co(i),3==i.H){var e=i.W++,n=Qi(i.I);if(sn(n,"SID",i.K),sn(n,"RID",e),sn(n,"TYPE","terminate"),zo(i,n),(e=new zs(i,i.l,e)).L=2,e.A=Mo(Qi(n)),n=!1,tt.navigator&&tt.navigator.sendBeacon)try{n=tt.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&tt.Image&&((new Image).src=e.A,n=!0),n||(e.g=Es(e.l,null),e.g.ha(e.A)),e.G=Date.now(),or(e)}wo(i)}function Js(i){i.g&&(Mn(i),i.g.cancel(),i.g=null)}function Co(i){Js(i),i.u&&(tt.clearTimeout(i.u),i.u=null),hr(i),i.i.cancel(),i.m&&("number"==typeof i.m&&tt.clearTimeout(i.m),i.m=null)}function No(i){if(!js(i.i)&&!i.m){i.m=!0;var e=i.Na;lr||Ce(),oe||(lr(),oe=!0),ve.add(e,i),i.C=0}}function Oa(i,e){var n;n=e?e.m:i.W++;const o=Qi(i.I);sn(o,"SID",i.K),sn(o,"RID",n),sn(o,"AID",i.V),zo(i,o),i.o&&i.s&&ls(o,i.o,i.s),n=new zs(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=xa(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),ga(i.i,n),Ar(n,o,e)}function zo(i,e){i.na&&jr(i.na,function(n,o){sn(e,o,n)}),i.h&&Ps({},function(n,o){sn(e,o,n)})}function xa(i,e,n){n=Math.min(i.j.length,n);var o=i.h?lt(i.h.Va,i.h,i):null;e:{var c=i.j;let h=-1;for(;;){const g=["count="+n];-1==h?0<n?(h=c[0].g,g.push("ofs="+h)):h=0:g.push("ofs="+h);let R=!0;for(let N=0;N<n;N++){let B=c[N].g;const J=c[N].map;if(B-=h,0>B)h=Math.max(0,c[N].g-100),R=!1;else try{q(J,g,"req"+B+"_")}catch{o&&o(J)}}if(R){o=g.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function Bc(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;lr||Ce(),oe||(lr(),oe=!0),ve.add(e,i),i.A=0}}function $s(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=ji(lt(i.Ma,i),mc(i,i.A)),i.A++,0))}function Mn(i){null!=i.B&&(tt.clearTimeout(i.B),i.B=null)}function Zs(i){i.g=new zs(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Qi(i.wa);sn(e,"RID","rpc"),sn(e,"SID",i.K),sn(e,"AID",i.V),sn(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&sn(e,"TO",i.qa),sn(e,"TYPE","xmlhttp"),zo(i,e),i.o&&i.s&&ls(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.A=Mo(Qi(e)),n.u=null,n.S=!0,Yi(n,i)}function hr(i){null!=i.v&&(tt.clearTimeout(i.v),i.v=null)}function _a(i,e){var n=null;if(i.g==e){hr(i),Mn(i),i.g=null;var o=2}else{if(!pa(i.i,e))return;n=e.F,yu(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.u?e.u.length:0,e=Date.now()-e.G;var c=i.C;Ln(o=Di(),new $o(o,n)),No(i)}else Bc(i);else if(3==(c=e.s)||0==c&&0<e.ca||!(1==o&&function Xs(i,e){return!(fo(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=ji(lt(i.Na,i,e),mc(i,i.C)),i.C++,0)))}(i,e)||2==o&&$s(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),c){case 1:qo(i,5);break;case 4:qo(i,10);break;case 3:qo(i,6);break;default:qo(i,2)}}function mc(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function qo(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=lt(i.pb,i);n||(n=new is("//www.google.com/images/cleardot.gif"),tt.location&&"http"==tt.location.protocol||Ei(n,"https"),Mo(n)),function k(i,e){const n=new ns;if(tt.Image){const o=new Image;o.onload=ut(ne,n,o,"TestLoadImage: loaded",!0,e),o.onerror=ut(ne,n,o,"TestLoadImage: error",!1,e),o.onabort=ut(ne,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=ut(ne,n,o,"TestLoadImage: timeout",!1,e),tt.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else Ai(2);i.H=0,i.h&&i.h.za(e),wo(i),Co(i)}function wo(i){if(i.H=0,i.ma=[],i.h){const e=Ra(i.i);(0!=e.length||0!=i.j.length)&&(Tn(i.ma,e),Tn(i.ma,i.j),i.i.i.length=0,_n(i.j),i.j.length=0),i.h.ya()}}function Ko(i,e,n){var o=n instanceof is?Qi(n):new is(n);if(""!=o.g)e&&(o.g=e+"."+o.g),Ro(o,o.m);else{var c=tt.location;o=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var h=new is(null);o&&Ei(h,o),e&&(h.g=e),c&&Ro(h,c),n&&(h.l=n),o=h}return e=i.Da,(n=i.F)&&e&&sn(o,n,e),sn(o,"VER",i.ra),zo(i,o),o}function Es(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Rn(i.Ha&&!i.va?new Te({ob:n}):i.va)).Oa(i.J),e}function vu(){}function hs(){if(kn&&!(10<=Number(bn)))throw Error("Environmental error: no available transport.")}function Fs(i,e){ln.call(this),this.g=new gc(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!Wn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Wn(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ar(this)}function jc(i){oi.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function _t(){ra.call(this),this.status=1}function ar(i){this.g=i}function eo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Or(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var c=0;16>c;++c)o[c]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(c=0;16>c;++c)o[c]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var h=i.g[3],g=(e=i.g[0])+(h^(n=i.g[1])&((c=i.g[2])^h))+o[0]+3614090360&4294967295;g=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=(n=(c=(h=(e=n+(g<<7&4294967295|g>>>25))+((g=h+(c^e&(n^c))+o[1]+3905402710&4294967295)<<12&4294967295|g>>>20))+((g=c+(n^h&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^c&(h^e))+o[3]+3250441966&4294967295)<<22&4294967295|g>>>10))+((g=e+(h^n&(c^h))+o[4]+4118548399&4294967295)<<7&4294967295|g>>>25))+((g=h+(c^e&(n^c))+o[5]+1200080426&4294967295)<<12&4294967295|g>>>20))+((g=c+(n^h&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^c&(h^e))+o[7]+4249261313&4294967295)<<22&4294967295|g>>>10))+((g=e+(h^n&(c^h))+o[8]+1770035416&4294967295)<<7&4294967295|g>>>25))+((g=h+(c^e&(n^c))+o[9]+2336552879&4294967295)<<12&4294967295|g>>>20))+((g=c+(n^h&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^c&(h^e))+o[11]+2304563134&4294967295)<<22&4294967295|g>>>10))+((g=e+(h^n&(c^h))+o[12]+1804603682&4294967295)<<7&4294967295|g>>>25))+((g=h+(c^e&(n^c))+o[13]+4254626195&4294967295)<<12&4294967295|g>>>20))+((g=c+(n^h&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|g>>>15))+((g=n+(e^c&(h^e))+o[15]+1236535329&4294967295)<<22&4294967295|g>>>10))+((g=e+(c^h&(n^c))+o[1]+4129170786&4294967295)<<5&4294967295|g>>>27))+((g=h+(n^c&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|g>>>23))+((g=c+(e^n&(h^e))+o[11]+643717713&4294967295)<<14&4294967295|g>>>18))+((g=n+(h^e&(c^h))+o[0]+3921069994&4294967295)<<20&4294967295|g>>>12))+((g=e+(c^h&(n^c))+o[5]+3593408605&4294967295)<<5&4294967295|g>>>27))+((g=h+(n^c&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|g>>>23))+((g=c+(e^n&(h^e))+o[15]+3634488961&4294967295)<<14&4294967295|g>>>18))+((g=n+(h^e&(c^h))+o[4]+3889429448&4294967295)<<20&4294967295|g>>>12))+((g=e+(c^h&(n^c))+o[9]+568446438&4294967295)<<5&4294967295|g>>>27))+((g=h+(n^c&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|g>>>23))+((g=c+(e^n&(h^e))+o[3]+4107603335&4294967295)<<14&4294967295|g>>>18))+((g=n+(h^e&(c^h))+o[8]+1163531501&4294967295)<<20&4294967295|g>>>12))+((g=e+(c^h&(n^c))+o[13]+2850285829&4294967295)<<5&4294967295|g>>>27))+((g=h+(n^c&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|g>>>23))+((g=c+(e^n&(h^e))+o[7]+1735328473&4294967295)<<14&4294967295|g>>>18))+((g=n+(h^e&(c^h))+o[12]+2368359562&4294967295)<<20&4294967295|g>>>12))+((g=e+(n^c^h)+o[5]+4294588738&4294967295)<<4&4294967295|g>>>28))+((g=h+(e^n^c)+o[8]+2272392833&4294967295)<<11&4294967295|g>>>21))+((g=c+(h^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|g>>>16))+((g=n+(c^h^e)+o[14]+4259657740&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^c^h)+o[1]+2763975236&4294967295)<<4&4294967295|g>>>28))+((g=h+(e^n^c)+o[4]+1272893353&4294967295)<<11&4294967295|g>>>21))+((g=c+(h^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|g>>>16))+((g=n+(c^h^e)+o[10]+3200236656&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^c^h)+o[13]+681279174&4294967295)<<4&4294967295|g>>>28))+((g=h+(e^n^c)+o[0]+3936430074&4294967295)<<11&4294967295|g>>>21))+((g=c+(h^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|g>>>16))+((g=n+(c^h^e)+o[6]+76029189&4294967295)<<23&4294967295|g>>>9))+((g=e+(n^c^h)+o[9]+3654602809&4294967295)<<4&4294967295|g>>>28))+((g=h+(e^n^c)+o[12]+3873151461&4294967295)<<11&4294967295|g>>>21))+((g=c+(h^e^n)+o[15]+530742520&4294967295)<<16&4294967295|g>>>16))+((g=n+(c^h^e)+o[2]+3299628645&4294967295)<<23&4294967295|g>>>9))+((g=e+(c^(n|~h))+o[0]+4096336452&4294967295)<<6&4294967295|g>>>26))+((g=h+(n^(e|~c))+o[7]+1126891415&4294967295)<<10&4294967295|g>>>22))+((g=c+(e^(h|~n))+o[14]+2878612391&4294967295)<<15&4294967295|g>>>17))+((g=n+(h^(c|~e))+o[5]+4237533241&4294967295)<<21&4294967295|g>>>11))+((g=e+(c^(n|~h))+o[12]+1700485571&4294967295)<<6&4294967295|g>>>26))+((g=h+(n^(e|~c))+o[3]+2399980690&4294967295)<<10&4294967295|g>>>22))+((g=c+(e^(h|~n))+o[10]+4293915773&4294967295)<<15&4294967295|g>>>17))+((g=n+(h^(c|~e))+o[1]+2240044497&4294967295)<<21&4294967295|g>>>11))+((g=e+(c^(n|~h))+o[8]+1873313359&4294967295)<<6&4294967295|g>>>26))+((g=h+(n^(e|~c))+o[15]+4264355552&4294967295)<<10&4294967295|g>>>22))+((g=c+(e^(h|~n))+o[6]+2734768916&4294967295)<<15&4294967295|g>>>17))+((g=n+(h^(c|~e))+o[13]+1309151649&4294967295)<<21&4294967295|g>>>11))+((h=(e=n+((g=e+(c^(n|~h))+o[4]+4149444226&4294967295)<<6&4294967295|g>>>26))+((g=h+(n^(e|~c))+o[11]+3174756917&4294967295)<<10&4294967295|g>>>22))^((c=h+((g=c+(e^(h|~n))+o[2]+718787259&4294967295)<<15&4294967295|g>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(c+(g<<21&4294967295|g>>>11))&4294967295,i.g[2]=i.g[2]+c&4294967295,i.g[3]=i.g[3]+h&4294967295}function Lr(i,e){this.h=e;for(var n=[],o=!0,c=i.length-1;0<=c;c--){var h=0|i[c];o&&h==e||(n[c]=h,o=!1)}this.g=n}(Le=Rn.prototype).Oa=function(i){this.M=i},Le.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ia.g(),this.C=function Si(i){return i.h||(i.h=i.i())}(this.u?this.u:ia),this.g.onreadystatechange=lt(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(h){return void Ma(this,h)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var c in o)n.set(c,o[c]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const h of o.keys())n.set(h,o.get(h))}o=Array.from(n.keys()).find(h=>"content-type"==h.toLowerCase()),c=tt.FormData&&i instanceof tt.FormData,!(0<=en(Ho,e))||o||c||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[h,g]of n)this.g.setRequestHeader(h,g);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{dr(this),0<this.B&&((this.L=function ai(i){return kn&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lt(this.ua,this)):this.A=Gt(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(h){Ma(this,h)}},Le.ua=function(){typeof et<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ln(this,"timeout"),this.abort(8))},Le.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Ln(this,"complete"),Ln(this,"abort"),xo(this))},Le.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xo(this,!0)),Rn.$.N.call(this)},Le.La=function(){this.s||(this.G||this.v||this.l?Qs(this):this.kb())},Le.kb=function(){Qs(this)},Le.isActive=function(){return!!this.g},Le.da=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},Le.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Le.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Uc(e)}},Le.Ia=function(){return this.m},Le.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Le=gc.prototype).ra=8,Le.H=1,Le.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const c=new zs(this,this.l,i);let h=this.s;if(this.U&&(h?(h=Ds(h),gt(h,this.U)):h=this.U),null!==this.o||this.O||(c.I=h,h=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=xa(this,c,e),sn(n=Qi(this.I),"RID",i),sn(n,"CVER",22),this.F&&sn(n,"X-HTTP-Session-Id",this.F),zo(this,n),h&&(this.O?e="headers="+encodeURIComponent(String(ks(h)))+"&"+e:this.o&&ls(n,this.o,h)),ga(this.i,c),this.bb&&sn(n,"TYPE","init"),this.P?(sn(n,"$req",e),sn(n,"SID","null"),c.aa=!0,Ar(c,n,null)):Ar(c,n,e),this.H=2}}else 3==this.H&&(i?Oa(this,i):0==this.j.length||js(this.i)||Oa(this))},Le.Ma=function(){if(this.u=null,Zs(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=ji(lt(this.jb,this),i)}},Le.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ai(10),Js(this),Zs(this))},Le.ib=function(){null!=this.v&&(this.v=null,Js(this),$s(this),Ai(19))},Le.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Ai(2)):(this.l.info("Failed to ping google.com"),Ai(1))},Le.isActive=function(){return!!this.h&&this.h.isActive(this)},(Le=vu.prototype).Ba=function(){},Le.Aa=function(){},Le.za=function(){},Le.ya=function(){},Le.isActive=function(){return!0},Le.Va=function(){},hs.prototype.g=function(i,e){return new Fs(i,e)},Tt(Fs,ln),Fs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;Ai(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=Ko(i,null,i.Y),No(i)},Fs.prototype.close=function(){ds(this.g)},Fs.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=Ye(i),i=n);e.j.push(new Ya(e.fb++,i)),3==e.H&&No(e)},Fs.prototype.N=function(){this.g.h=null,delete this.j,ds(this.g),delete this.g,Fs.$.N.call(this)},Tt(jc,oi),Tt(_t,ra),Tt(ar,vu),ar.prototype.Ba=function(){Ln(this.g,"a")},ar.prototype.Aa=function(i){Ln(this.g,new jc(i))},ar.prototype.za=function(i){Ln(this.g,new _t)},ar.prototype.ya=function(){Ln(this.g,"b")},Tt(eo,function Qa(){this.blockSize=-1}),eo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},eo.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,c=this.h,h=0;h<e;){if(0==c)for(;h<=n;)Or(this,i,h),h+=this.blockSize;if("string"==typeof i){for(;h<e;)if(o[c++]=i.charCodeAt(h++),c==this.blockSize){Or(this,o),c=0;break}}else for(;h<e;)if(o[c++]=i[h++],c==this.blockSize){Or(this,o),c=0;break}}this.h=c,this.i+=e},eo.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var ya={};function po(i){return-128<=i&&128>i?function Lt(i,e){var n=ya;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new Lr([0|e],0>e?-1:0)}):new Lr([0|i],0>i?-1:0)}function to(i){if(isNaN(i)||!isFinite(i))return ti;if(0>i)return Er(to(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=Ja;return new Lr(e,0)}var Ja=4294967296,ti=po(0),Gc=po(1),Is=po(16777216);function hi(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Ls(i){return-1==i.h}function Er(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new Lr(n,~i.h).add(Gc)}function D(i,e){return i.add(Er(e))}function K(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function x(i,e){this.g=i,this.h=e}function H(i,e){if(hi(e))throw Error("division by zero");if(hi(i))return new x(ti,ti);if(Ls(i))return e=H(Er(i),e),new x(Er(e.g),Er(e.h));if(Ls(e))return e=H(i,Er(e)),new x(Er(e.g),e.h);if(30<i.g.length){if(Ls(i)||Ls(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Gc,o=e;0>=o.X(i);)n=fe(n),o=fe(o);var c=rt(n,1),h=rt(o,1);for(o=rt(o,2),n=rt(n,2);!hi(o);){var g=h.add(o);0>=g.X(i)&&(c=c.add(n),h=g),o=rt(o,1),n=rt(n,1)}return e=D(i,c.R(e)),new x(c,e)}for(c=ti;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),g=(h=to(n)).R(e);Ls(g)||0<g.X(i);)g=(h=to(n-=o)).R(e);hi(h)&&(h=Gc),c=c.add(h),i=D(i,g)}return new x(c,i)}function fe(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new Lr(n,i.h)}function rt(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,c=[],h=0;h<o;h++)c[h]=0<e?i.D(h+n)>>>e|i.D(h+n+1)<<32-e:i.D(h+n);return new Lr(c,i.h)}(Le=Lr.prototype).ea=function(){if(Ls(this))return-Er(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:Ja+o)*e,e*=Ja}return i},Le.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(hi(this))return"0";if(Ls(this))return"-"+Er(this).toString(i);for(var e=to(Math.pow(i,6)),n=this,o="";;){var c=H(n,e).g,h=((0<(n=D(n,c.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(hi(n=c))return h+o;for(;6>h.length;)h="0"+h;o=h+o}},Le.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},Le.X=function(i){return Ls(i=D(this,i))?-1:hi(i)?0:1},Le.abs=function(){return Ls(this)?Er(this):this},Le.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,c=0;c<=e;c++){var h=o+(65535&this.D(c))+(65535&i.D(c)),g=(h>>>16)+(this.D(c)>>>16)+(i.D(c)>>>16);o=g>>>16,n[c]=(g&=65535)<<16|(h&=65535)}return new Lr(n,-2147483648&n[n.length-1]?-1:0)},Le.R=function(i){if(hi(this)||hi(i))return ti;if(Ls(this))return Ls(i)?Er(this).R(Er(i)):Er(Er(this).R(i));if(Ls(i))return Er(this.R(Er(i)));if(0>this.X(Is)&&0>i.X(Is))return to(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var c=0;c<i.g.length;c++){var h=this.D(o)>>>16,g=65535&this.D(o),R=i.D(c)>>>16,N=65535&i.D(c);n[2*o+2*c]+=g*N,K(n,2*o+2*c),n[2*o+2*c+1]+=h*N,K(n,2*o+2*c+1),n[2*o+2*c+1]+=g*R,K(n,2*o+2*c+1),n[2*o+2*c+2]+=h*R,K(n,2*o+2*c+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new Lr(n,0)},Le.gb=function(i){return H(this,i).h},Le.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new Lr(n,this.h&i.h)},Le.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new Lr(n,this.h|i.h)},Le.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new Lr(n,this.h^i.h)},hs.prototype.createWebChannel=hs.prototype.g,Fs.prototype.send=Fs.prototype.u,Fs.prototype.open=Fs.prototype.m,Fs.prototype.close=Fs.prototype.close,Go.NO_ERROR=0,Go.TIMEOUT=8,Go.HTTP_ERROR=6,Ka.COMPLETE="complete",$r.EventType=Ss,Ss.OPEN="a",Ss.CLOSE="b",Ss.ERROR="c",Ss.MESSAGE="d",ln.prototype.listen=ln.prototype.O,Rn.prototype.listenOnce=Rn.prototype.P,Rn.prototype.getLastError=Rn.prototype.Sa,Rn.prototype.getLastErrorCode=Rn.prototype.Ia,Rn.prototype.getStatus=Rn.prototype.da,Rn.prototype.getResponseJson=Rn.prototype.Wa,Rn.prototype.getResponseText=Rn.prototype.ja,Rn.prototype.send=Rn.prototype.ha,Rn.prototype.setWithCredentials=Rn.prototype.Oa,eo.prototype.digest=eo.prototype.l,eo.prototype.reset=eo.prototype.reset,eo.prototype.update=eo.prototype.j,Lr.prototype.add=Lr.prototype.add,Lr.prototype.multiply=Lr.prototype.R,Lr.prototype.modulo=Lr.prototype.gb,Lr.prototype.compare=Lr.prototype.X,Lr.prototype.toNumber=Lr.prototype.ea,Lr.prototype.toString=Lr.prototype.toString,Lr.prototype.getBits=Lr.prototype.D,Lr.fromNumber=to,Lr.fromString=function $c(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Er($c(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=to(Math.pow(e,8)),o=ti,c=0;c<i.length;c+=8){var h=Math.min(8,i.length-c),g=parseInt(i.substring(c,c+h),e);8>h?(h=to(Math.pow(e,h)),o=o.R(h).add(to(g))):o=(o=o.R(n)).add(to(g))}return o};var pt=ht.createWebChannelTransport=function(){return new hs},an=ht.getStatEventTarget=function(){return Di()},Xr=ht.ErrorCode=Go,Gr=ht.EventType=Ka,ni=ht.Event=fr,Kn=ht.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Pr=(ht.FetchXmlHttpFactory=Te,ht.WebChannel=$r),as=ht.XhrIo=Rn,ko=ht.Md5=eo,zi=ht.Integer=Lr;const va="@firebase/firestore";class Jn{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");let ui="10.8.0";const er=new xe.YJ("@firebase/firestore");function To(){return er.logLevel}function Ot(i,...e){if(er.logLevel<=xe.Ge.DEBUG){const n=e.map(Za);er.debug(`Firestore (${ui}): ${i}`,...n)}}function Jr(i,...e){if(er.logLevel<=xe.Ge.ERROR){const n=e.map(Za);er.error(`Firestore (${ui}): ${i}`,...n)}}function no(i,...e){if(er.logLevel<=xe.Ge.WARN){const n=e.map(Za);er.warn(`Firestore (${ui}): ${i}`,...n)}}function Za(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function nn(i="Unexpected state"){const e=`FIRESTORE (${ui}) INTERNAL ASSERTION FAILED: `+i;throw Jr(e),new Error(e)}function un(i,e){i||nn()}function jt(i,e){return i}const ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends Et.kx{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class fs{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _c{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jn.UNAUTHENTICATED))}shutdown(){}}class yl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Wc{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let c=this.i;const h=B=>this.i!==c?(c=this.i,n(B)):Promise.resolve();let g=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Xi,e.enqueueRetryable(()=>h(this.currentUser))};const R=()=>{const B=g;e.enqueueRetryable((0,de.c)(function*(){yield B.promise,yield h(o.currentUser)}))},N=B=>{Ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=B,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(B=>N(B)),setTimeout(()=>{if(!this.auth){const B=this.t.getImmediate({optional:!0});B?N(B):(Ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Xi)}},0),R()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(Ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(un("string"==typeof o.accessToken),new fs(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return un(null===e||"string"==typeof e),new Jn(e)}}class ro{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Gu{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new ro(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ud{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class go{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=h=>{null!=h.error&&Ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const g=h.token!==this.R;return this.R=h.token,Ot("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?n(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>o(h))};const c=h=>{Ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.appCheck.addTokenListener(this.o)};this.A.onInit(h=>c(h)),setTimeout(()=>{if(!this.appCheck){const h=this.A.getImmediate({optional:!0});h?c(h):Ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(un("string"==typeof n.token),this.R=n.token,new Ud(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Vr(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class ec{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const c=Vr(40);for(let h=0;h<c.length;++h)o.length<20&&c[h]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(c[h]%62))}return o}}function Sn(i,e){return i<e?-1:i>e?1:0}function Ea(i,e,n){return i.length===e.length&&i.every((o,c)=>n(o,e[c]))}function Yo(i){return i+"\0"}class gi{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new St(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new St(ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new St(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new St(ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return gi.fromMillis(Date.now())}static fromDate(e){return gi.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new gi(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Sn(this.nanoseconds,e.nanoseconds):Sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fn(e)}static min(){return new fn(new gi(0,0))}static max(){return new fn(new gi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class oa{constructor(e,n,o){void 0===n?n=0:n>e.length&&nn(),void 0===o?o=e.length-n:o>e.length-n&&nn(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===oa.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oa?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let c=0;c<o;c++){const h=e.get(c),g=n.get(c);if(h<g)return-1;if(h>g)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ur extends oa{construct(e,n,o){return new Ur(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new St(ct.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(c=>c.length>0))}return new Ur(n)}static emptyPath(){return new Ur([])}}const Na=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ii extends oa{construct(e,n,o){return new Ii(e,n,o)}static isValidIdentifier(e){return Na.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ii.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ii(["__name__"])}static fromServerFormat(e){const n=[];let o="",c=0;const h=()=>{if(0===o.length)throw new St(ct.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let g=!1;for(;c<e.length;){const R=e[c];if("\\"===R){if(c+1===e.length)throw new St(ct.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const N=e[c+1];if("\\"!==N&&"."!==N&&"`"!==N)throw new St(ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=N,c+=2}else"`"===R?(g=!g,c++):"."!==R||g?(o+=R,c++):(h(),c++)}if(h(),g)throw new St(ct.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ii(n)}static emptyPath(){return new Ii([])}}class Ht{constructor(e){this.path=e}static fromPath(e){return new Ht(Ur.fromString(e))}static fromName(e){return new Ht(Ur.fromString(e).popFirst(5))}static empty(){return new Ht(Ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ur.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Ur.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ht(new Ur(e.slice()))}}class io{constructor(e,n,o,c){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=c}}function ka(i){return i.fields.find(e=>2===e.kind)}function Qo(i){return i.fields.filter(e=>2!==e.kind)}io.UNKNOWN_ID=-1;class pr{constructor(e,n){this.fieldPath=e,this.kind=n}}class Jo{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Jo(0,Cs.min())}}function ri(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,c=fn.fromTimestamp(1e9===o?new gi(n+1,0):new gi(n,o));return new Cs(c,Ht.empty(),e)}function Lo(i){return new Cs(i.readTime,i.key,-1)}class Cs{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Cs(fn.min(),Ht.empty(),-1)}static max(){return new Cs(fn.max(),Ht.empty(),-1)}}function Hc(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Ht.comparator(i.documentKey,e.documentKey),0!==n?n:Sn(i.largestBatchId,e.largestBatchId))}const tc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function so(i){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,de.c)(function*(i){if(i.code!==ct.FAILED_PRECONDITION||i.message!==tc)throw i;Ot("LocalStore","Unexpectedly lost primary lease")}),Iu.apply(this,arguments)}class Qe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&nn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Qe((o,c)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(o,c)},this.catchCallback=h=>{this.wrapFailure(n,h).next(o,c)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Qe?n:Qe.resolve(n)}catch(n){return Qe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Qe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Qe.reject(n)}static resolve(e){return new Qe((n,o)=>{n(e)})}static reject(e){return new Qe((n,o)=>{o(e)})}static waitFor(e){return new Qe((n,o)=>{let c=0,h=0,g=!1;e.forEach(R=>{++c,R.next(()=>{++h,g&&h===c&&n()},N=>o(N))}),g=!0,h===c&&n()})}static or(e){let n=Qe.resolve(!1);for(const o of e)n=n.next(c=>c?Qe.resolve(c):o());return n}static forEach(e,n){const o=[];return e.forEach((c,h)=>{o.push(n.call(this,c,h))}),this.waitFor(o)}static mapArray(e,n){return new Qe((o,c)=>{const h=e.length,g=new Array(h);let R=0;for(let N=0;N<h;N++){const B=N;n(e[B]).next(J=>{g[B]=J,++R,R===h&&o(g)},J=>c(J))}})}static doWhile(e,n){return new Qe((o,c)=>{const h=()=>{!0===e()?n().next(()=>{h()},c):o()};h()})}}class gr{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Xi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new M(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const c=me(o.target.error);this.V.reject(new M(e,c))}}static open(e,n,o,c){try{return new gr(n,e.transaction(c,o))}catch(h){throw new M(n,h)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ot("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new O(n)}}class cs{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===cs.S((0,Et.Su)())&&Jr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ot("SimpleDb","Removing database:",e),j(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Et.yy)())return!1;if(cs.C())return!0;const e=(0,Et.Su)(),n=cs.S(e),o=0<n&&n<10,c=cs.v(e),h=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||h)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,de.c)(function*(){return n.db||(Ot("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,c)=>{const h=indexedDB.open(n.name,n.version);h.onsuccess=g=>{o(g.target.result)},h.onblocked=()=>{c(new M(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=g=>{const R=g.target.error;c("VersionError"===R.name?new St(ct.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new St(ct.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new M(e,R))},h.onupgradeneeded=g=>{Ot("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',g.oldVersion),n.p.N(g.target.result,h.transaction,g.oldVersion,n.version).next(()=>{Ot("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,c){var h=this;return(0,de.c)(function*(){const g="readonly"===n;let R=0;for(;;){++R;try{h.db=yield h.O(e);const N=gr.open(h.db,e,g?"readonly":"readwrite",o),B=c(N).next(J=>(N.g(),J)).catch(J=>(N.abort(J),Qe.reject(J))).toPromise();return B.catch(()=>{}),yield N.m,B}catch(N){const B=N,J="FirebaseError"!==B.name&&R<3;if(Ot("SimpleDb","Transaction failed with error:",B.message,"Retrying:",J),h.close(),!J)return Promise.reject(B)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class C{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return j(this.k.delete())}}class M extends St{constructor(e,n){super(ct.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function T(i){return"IndexedDbTransactionError"===i.name}class O{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(Ot("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(Ot("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),j(o)}add(e){return Ot("SimpleDb","ADD",this.store.name,e,e),j(this.store.add(e))}get(e){return j(this.store.get(e)).next(n=>(void 0===n&&(n=null),Ot("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Ot("SimpleDb","DELETE",this.store.name,e),j(this.store.delete(e))}count(){return Ot("SimpleDb","COUNT",this.store.name),j(this.store.count())}W(e,n){const o=this.options(e,n),c=o.index?this.store.index(o.index):this.store;if("function"==typeof c.getAll){const h=c.getAll(o.range);return new Qe((g,R)=>{h.onerror=N=>{R(N.target.error)},h.onsuccess=N=>{g(N.target.result)}})}{const h=this.cursor(o),g=[];return this.G(h,(R,N)=>{g.push(N)}).next(()=>g)}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new Qe((c,h)=>{o.onerror=g=>{h(g.target.error)},o.onsuccess=g=>{c(g.target.result)}})}H(e,n){Ot("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const c=this.cursor(o);return this.G(c,(h,g,R)=>R.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const c=this.cursor(o);return this.G(c,n)}Z(e){const n=this.cursor({});return new Qe((o,c)=>{n.onerror=h=>{const g=me(h.target.error);c(g)},n.onsuccess=h=>{const g=h.target.result;g?e(g.primaryKey,g.value).next(R=>{R?g.continue():o()}):o()}})}G(e,n){const o=[];return new Qe((c,h)=>{e.onerror=g=>{h(g.target.error)},e.onsuccess=g=>{const R=g.target.result;if(!R)return void c();const N=new C(R),B=n(R.primaryKey,R.value,N);if(B instanceof Qe){const J=B.catch(ue=>(N.done(),Qe.reject(ue)));o.push(J)}N.isDone?c():null===N.$?R.continue():R.continue(N.$)}}).next(()=>Qe.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function j(i){return new Qe((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const c=me(o.target.error);n(c)}})}let te=!1;function me(i){const e=cs.S((0,Et.Su)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new St("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return te||(te=!0,setTimeout(()=>{throw o},0)),o}}return i}class at{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Ot("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,de.c)(function*(){n.task=null;try{Ot("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(o){T(o)?Ot("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield so(o)}yield n.ee(6e4)}))}}class Ze{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,de.c)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let c=n,h=!0;return Qe.doWhile(()=>!0===h&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!o.has(g))return Ot("IndexBackfiller",`Processing collection: ${g}`),this.re(e,g,c).next(R=>{c-=R,o.add(g)});h=!1})).next(()=>n-c)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(c=>this.localStore.localDocuments.getNextDocuments(e,n,c,o).next(h=>{const g=h.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.ie(c,h)).next(R=>(Ot("IndexBackfiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,n,R))).next(()=>g.size)}))}ie(e,n){let o=e;return n.changes.forEach((c,h)=>{const g=Lo(h);Hc(g,o)>0&&(o=g)}),new Cs(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Vt=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=c=>this.se(c),this.oe=c=>o.writeSequenceNumber(c))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function Ft(i){return null==i}function Xn(i){return 0===i&&1/i==-1/0}function Ri(i){return"number"==typeof i&&Number.isInteger(i)&&!Xn(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function qi(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=La(e)),e=Fa(i.get(n),e);return La(e)}function Fa(i,e){let n=e;const o=i.length;for(let c=0;c<o;c++){const h=i.charAt(c);switch(h){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=h}}return n}function La(i){return i+"\x01\x01"}function mo(i){const e=i.length;if(un(e>=2),2===e)return un("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Ur.emptyPath();const n=e-2,o=[];let c="";for(let h=0;h<e;){const g=i.indexOf("\x01",h);switch((g<0||g>n)&&nn(),i.charAt(g+1)){case"\x01":const R=i.substring(h,g);let N;0===c.length?N=R:(c+=R,N=c,c=""),o.push(N);break;case"\x10":c+=i.substring(h,g),c+="\0";break;case"\x11":c+=i.substring(h,g+1);break;default:nn()}h=g+2}return new Ur(o)}const Do=["userId","batchId"];function zc(i,e){return[i,qi(e)]}function Wu(i,e,n){return[i,qi(e),n]}const Hu={},gp=["prefixPath","collectionGroup","readTime","documentId"],qc=["prefixPath","collectionGroup","documentId"],ir=["collectionGroup","readTime","prefixPath","documentId"],xr=["canonicalId","targetId"],jd=["targetId","path"],Kh=["path","targetId"],$d=["collectionId","parent"],Gd=["indexId","uid"],sd=["uid","sequenceNumber"],El=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],od=["indexId","uid","orderedDocumentKey"],Wd=["userId","collectionPath","documentId"],oo=["userId","collectionPath","largestBatchId"],zu=["userId","collectionGroup","largestBatchId"],qu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Yh=[...qu,"documentOverlays"],vc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Kc=vc,Cu=[...Kc,"indexConfiguration","indexState","indexEntries"];class Yc extends yc{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Gs(i,e){const n=jt(i);return cs.M(n.ae,e)}function Hd(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ia(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function nc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Ci{constructor(e,n){this.comparator=e,this.root=n||Vs.EMPTY}insert(e,n){return new Ci(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Vs.BLACK,null,null))}remove(e){return new Ci(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const c=this.comparator(e,o.key);if(0===c)return n+o.left.size;c<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ca(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ca(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ca(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ca(this.root,e,this.comparator,!0)}}class Ca{constructor(e,n,o,c){this.isReverse=c,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=n?o(e.key,n):1,n&&c&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(0===h){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vs{constructor(e,n,o,c,h){this.key=e,this.value=n,this.color=o??Vs.RED,this.left=c??Vs.EMPTY,this.right=h??Vs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,c,h){return new Vs(e??this.key,n??this.value,o??this.color,c??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let c=this;const h=o(e,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(e,n,o),null):0===h?c.copy(null,n,null,null,null):c.copy(null,null,null,null,c.right.insert(e,n,o)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Vs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,c=this;if(n(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,n),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===n(e,c.key)){if(c.right.isEmpty())return Vs.EMPTY;o=c.right.min(),c=c.copy(o.key,o.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,n))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nn();const e=this.left.check();if(e!==this.right.check())throw nn();return e+(this.isRed()?0:1)}}Vs.EMPTY=null,Vs.RED=!0,Vs.BLACK=!1,Vs.EMPTY=new class{constructor(){this.size=0}get key(){throw nn()}get value(){throw nn()}get color(){throw nn()}get left(){throw nn()}get right(){throw nn()}copy(e,n,o,c,h){return this}insert(e,n,o){return new Vs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cr{constructor(e){this.comparator=e,this.data=new Ci(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const c=o.getNext();if(this.comparator(c.key,e[1])>=0)return;n(c.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ku(this.data.getIterator())}getIteratorFrom(e){return new Ku(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const c=n.getNext().key,h=o.getNext().key;if(0!==this.comparator(c,h))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new cr(this.comparator);return n.data=e,n}}class Ku{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mr(i){return i.hasNext()?i.getNext():void 0}class ao{constructor(e){this.fields=e,e.sort(Ii.comparator)}static empty(){return new ao([])}unionWith(e){let n=new cr(Ii.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new ao(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class Qc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ws{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(c){try{return atob(c)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new Qc("Invalid base64 string: "+h):h}}(e);return new ws(n)}static fromUint8Array(e){const n=function(c){let h="";for(let g=0;g<c.length;++g)h+=String.fromCharCode(c[g]);return h}(e);return new ws(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let c=0;c<n.length;c++)o[c]=n.charCodeAt(c);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ws.EMPTY_BYTE_STRING=new ws("");const ad=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ic(i){if(un(!!i),"string"==typeof i){let e=0;const n=ad.exec(i);if(un(!!n),n[1]){let c=n[1];c=(c+"000000000").substr(0,9),e=Number(c)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:ps(i.seconds),nanos:ps(i.nanos)}}function ps(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function aa(i){return"string"==typeof i?ws.fromBase64String(i):ws.fromUint8Array(i)}function Cc(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wu(i){const e=i.mapValue.fields.__previous_value__;return Cc(e)?wu(e):e}function rc(i){const e=Ic(i.mapValue.fields.__local_write_time__.timestampValue);return new gi(e.seconds,e.nanos)}class Tu{constructor(e,n,o,c,h,g,R,N,B){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=c,this.ssl=h,this.forceLongPolling=g,this.autoDetectLongPolling=R,this.longPollingOptions=N,this.useFetchStreams=B}}class gs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new gs("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gs&&e.projectId===this.projectId&&e.database===this.database}}const Xo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Jc={nullValue:"NULL_VALUE"};function Ts(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Cc(i)?4:ld(i)?9007199254740991:10:nn()}function co(i,e){if(i===e)return!0;const n=Ts(i);if(n!==Ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return rc(i).isEqual(rc(e));case 3:return function(c,h){if("string"==typeof c.timestampValue&&"string"==typeof h.timestampValue&&c.timestampValue.length===h.timestampValue.length)return c.timestampValue===h.timestampValue;const g=Ic(c.timestampValue),R=Ic(h.timestampValue);return g.seconds===R.seconds&&g.nanos===R.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return h=e,aa(i.bytesValue).isEqual(aa(h.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(c,h){return ps(c.geoPointValue.latitude)===ps(h.geoPointValue.latitude)&&ps(c.geoPointValue.longitude)===ps(h.geoPointValue.longitude)}(i,e);case 2:return function(c,h){if("integerValue"in c&&"integerValue"in h)return ps(c.integerValue)===ps(h.integerValue);if("doubleValue"in c&&"doubleValue"in h){const g=ps(c.doubleValue),R=ps(h.doubleValue);return g===R?Xn(g)===Xn(R):isNaN(g)&&isNaN(R)}return!1}(i,e);case 9:return Ea(i.arrayValue.values||[],e.arrayValue.values||[],co);case 10:return function(c,h){const g=c.mapValue.fields||{},R=h.mapValue.fields||{};if(Hd(g)!==Hd(R))return!1;for(const N in g)if(g.hasOwnProperty(N)&&(void 0===R[N]||!co(g[N],R[N])))return!1;return!0}(i,e);default:return nn()}var h}function Vo(i,e){return void 0!==(i.values||[]).find(n=>co(n,e))}function Va(i,e){if(i===e)return 0;const n=Ts(i),o=Ts(e);if(n!==o)return Sn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return Sn(i.booleanValue,e.booleanValue);case 2:return function(h,g){const R=ps(h.integerValue||h.doubleValue),N=ps(g.integerValue||g.doubleValue);return R<N?-1:R>N?1:R===N?0:isNaN(R)?isNaN(N)?0:-1:1}(i,e);case 3:return Yu(i.timestampValue,e.timestampValue);case 4:return Yu(rc(i),rc(e));case 5:return Sn(i.stringValue,e.stringValue);case 6:return function(h,g){const R=aa(h),N=aa(g);return R.compareTo(N)}(i.bytesValue,e.bytesValue);case 7:return function(h,g){const R=h.split("/"),N=g.split("/");for(let B=0;B<R.length&&B<N.length;B++){const J=Sn(R[B],N[B]);if(0!==J)return J}return Sn(R.length,N.length)}(i.referenceValue,e.referenceValue);case 8:return function(h,g){const R=Sn(ps(h.latitude),ps(g.latitude));return 0!==R?R:Sn(ps(h.longitude),ps(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(h,g){const R=h.values||[],N=g.values||[];for(let B=0;B<R.length&&B<N.length;++B){const J=Va(R[B],N[B]);if(J)return J}return Sn(R.length,N.length)}(i.arrayValue,e.arrayValue);case 10:return function(h,g){if(h===Xo.mapValue&&g===Xo.mapValue)return 0;if(h===Xo.mapValue)return 1;if(g===Xo.mapValue)return-1;const R=h.fields||{},N=Object.keys(R),B=g.fields||{},J=Object.keys(B);N.sort(),J.sort();for(let ue=0;ue<N.length&&ue<J.length;++ue){const Pe=Sn(N[ue],J[ue]);if(0!==Pe)return Pe;const Je=Va(R[N[ue]],B[J[ue]]);if(0!==Je)return Je}return Sn(N.length,J.length)}(i.mapValue,e.mapValue);default:throw nn()}}function Yu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Sn(i,e);const n=Ic(i),o=Ic(e),c=Sn(n.seconds,o.seconds);return 0!==c?c:Sn(n.nanos,o.nanos)}function wa(i){return cd(i)}function cd(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=Ic(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?aa(i.bytesValue).toBase64():"referenceValue"in i?Ht.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",c=!0;for(const h of n.values||[])c?c=!1:o+=",",o+=cd(h);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let c="{",h=!0;for(const g of o)h?h=!1:c+=",",c+=`${g}:${cd(n.fields[g])}`;return c+"}"}(i.mapValue):nn()}function Ta(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ca(i){return!!i&&"integerValue"in i}function Ua(i){return!!i&&"arrayValue"in i}function zd(i){return!!i&&"nullValue"in i}function ud(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Du(i){return!!i&&"mapValue"in i}function ua(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ia(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=ua(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ua(i.arrayValue.values[n]);return e}return Object.assign({},i)}function ld(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Qh(i){return"nullValue"in i?Jc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ta(gs.empty(),Ht.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:nn()}function Tc(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ta(gs.empty(),Ht.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Xo:nn()}function Au(i,e){const n=Va(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Il(i,e){const n=Va(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Zi{constructor(e){this.value=e}static empty(){return new Zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Du(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ua(n)}setAll(e){let n=Ii.emptyPath(),o={},c=[];e.forEach((g,R)=>{if(!n.isImmediateParentOf(R)){const N=this.getFieldsMap(n);this.applyChanges(N,o,c),o={},c=[],n=R.popLast()}g?o[R.lastSegment()]=ua(g):c.push(R.lastSegment())});const h=this.getFieldsMap(n);this.applyChanges(h,o,c)}delete(e){const n=this.field(e.popLast());Du(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return co(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let c=n.mapValue.fields[e.get(o)];Du(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=c),n=c}return n.mapValue.fields}applyChanges(e,n,o){Ia(n,(c,h)=>e[c]=h);for(const c of o)delete e[c]}clone(){return new Zi(ua(this.value))}}function qd(i){const e=[];return Ia(i.fields,(n,o)=>{const c=new Ii([n]);if(Du(o)){const h=qd(o.mapValue).fields;if(0===h.length)e.push(c);else for(const g of h)e.push(c.child(g))}else e.push(c)}),new ao(e)}class Vi{constructor(e,n,o,c,h,g,R){this.key=e,this.documentType=n,this.version=o,this.readTime=c,this.createTime=h,this.data=g,this.documentState=R}static newInvalidDocument(e){return new Vi(e,0,fn.min(),fn.min(),fn.min(),Zi.empty(),0)}static newFoundDocument(e,n,o,c){return new Vi(e,1,n,fn.min(),o,c,0)}static newNoDocument(e,n){return new Vi(e,2,n,fn.min(),fn.min(),Zi.empty(),0)}static newUnknownDocument(e,n){return new Vi(e,3,n,fn.min(),fn.min(),Zi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ao{constructor(e,n){this.position=e,this.inclusive=n}}function Su(i,e,n){let o=0;for(let c=0;c<i.position.length;c++){const h=e[c],g=i.position[c];if(o=h.field.isKeyField()?Ht.comparator(Ht.fromName(g.referenceValue),n.key):Va(g,n.data.field(h.field)),"desc"===h.dir&&(o*=-1),0!==o)break}return o}function Dc(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!co(i.position[n],e.position[n]))return!1;return!0}class ic{constructor(e,n="asc"){this.field=e,this.dir=n}}function dd(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Qu{}class br extends Qu{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new wl(e,n,o):"array-contains"===n?new ac(e,o):"in"===n?new Ba(e,o):"not-in"===n?new ja(e,o):"array-contains-any"===n?new bu(e,o):new br(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new hd(e,o):new Xc(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Va(n,this.value)):null!==n&&Ts(this.value)===Ts(n)&&this.matchesComparison(Va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wr extends Qu{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Wr(e,n)}matches(e){return Da(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Da(i){return"and"===i.op}function Ac(i){return"or"===i.op}function Sc(i){return Ju(i)&&Da(i)}function Ju(i){for(const e of i.filters)if(e instanceof Wr)return!1;return!0}function sc(i){if(i instanceof br)return i.field.canonicalString()+i.op.toString()+wa(i.value);if(Sc(i))return i.filters.map(e=>sc(e)).join(",");{const e=i.filters.map(n=>sc(n)).join(",");return`${i.op}(${e})`}}function oc(i,e){return i instanceof br?(o=i,(c=e)instanceof br&&o.op===c.op&&o.field.isEqual(c.field)&&co(o.value,c.value)):i instanceof Wr?function(o,c){return c instanceof Wr&&o.op===c.op&&o.filters.length===c.filters.length&&o.filters.reduce((h,g,R)=>h&&oc(g,c.filters[R]),!0)}(i,e):void nn();var o,c}function Kd(i,e){const n=i.filters.concat(e);return Wr.create(n,i.op)}function Cl(i){return i instanceof br?`${(n=i).field.canonicalString()} ${n.op} ${wa(n.value)}`:i instanceof Wr?function(n){return n.op.toString()+" {"+n.getFilters().map(Cl).join(" ,")+"}"}(i):"Filter";var n}class wl extends br{constructor(e,n,o){super(e,n,o),this.key=Ht.fromName(o.referenceValue)}matches(e){const n=Ht.comparator(e.key,this.key);return this.matchesComparison(n)}}class hd extends br{constructor(e,n){super(e,"in",n),this.keys=Pu(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Xc extends br{constructor(e,n){super(e,"not-in",n),this.keys=Pu(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Pu(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>Ht.fromName(o.referenceValue))}class ac extends br{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ua(n)&&Vo(n.arrayValue,this.value)}}class Ba extends br{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Vo(this.value.arrayValue,n)}}class ja extends br{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Vo(this.value.arrayValue,n)}}class bu extends br{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ua(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Vo(this.value.arrayValue,o))}}class Pc{constructor(e,n=null,o=[],c=[],h=null,g=null,R=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=c,this.limit=h,this.startAt=g,this.endAt=R,this.ce=null}}function Zc(i,e=null,n=[],o=[],c=null,h=null,g=null){return new Pc(i,e,n,o,c,h,g)}function Aa(i){const e=jt(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>sc(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(h=o).field.canonicalString()+h.dir;var h}).join(","),Ft(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>wa(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>wa(o)).join(",")),e.ce=n}return e.ce}function eu(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!dd(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!oc(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Dc(i.startAt,e.startAt)&&Dc(i.endAt,e.endAt)}function Xu(i){return Ht.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Sa(i,e){return i.filters.filter(n=>n instanceof br&&n.field.isEqual(e))}function fd(i,e,n){let o=Jc,c=!0;for(const h of Sa(i,e)){let g=Jc,R=!0;switch(h.op){case"<":case"<=":g=Qh(h.value);break;case"==":case"in":case">=":g=h.value;break;case">":g=h.value,R=!1;break;case"!=":case"not-in":g=Jc}Au({value:o,inclusive:c},{value:g,inclusive:R})<0&&(o=g,c=R)}if(null!==n)for(let h=0;h<i.orderBy.length;++h)if(i.orderBy[h].field.isEqual(e)){const g=n.position[h];Au({value:o,inclusive:c},{value:g,inclusive:n.inclusive})<0&&(o=g,c=n.inclusive);break}return{value:o,inclusive:c}}function Tl(i,e,n){let o=Xo,c=!0;for(const h of Sa(i,e)){let g=Xo,R=!0;switch(h.op){case">=":case">":g=Tc(h.value),R=!1;break;case"==":case"in":case"<=":g=h.value;break;case"<":g=h.value,R=!1;break;case"!=":case"not-in":g=Xo}Il({value:o,inclusive:c},{value:g,inclusive:R})>0&&(o=g,c=R)}if(null!==n)for(let h=0;h<i.orderBy.length;++h)if(i.orderBy[h].field.isEqual(e)){const g=n.position[h];Il({value:o,inclusive:c},{value:g,inclusive:n.inclusive})>0&&(o=g,c=n.inclusive);break}return{value:o,inclusive:c}}class $a{constructor(e,n=null,o=[],c=[],h=null,g="F",R=null,N=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=c,this.limit=h,this.limitType=g,this.startAt=R,this.endAt=N,this.le=null,this.he=null,this.Pe=null}}function Dl(i,e,n,o,c,h,g,R){return new $a(i,e,n,o,c,h,g,R)}function cc(i){return new $a(i)}function Ru(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function w(i){return null!==i.collectionGroup}function m(i){const e=jt(i);if(null===e.le){e.le=[];const n=new Set;for(const h of e.explicitOrderBy)e.le.push(h),n.add(h.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let R=new cr(Ii.comparator);return g.filters.forEach(N=>{N.getFlattenedFilters().forEach(B=>{B.isInequality()&&(R=R.add(B.field))})}),R})(e).forEach(h=>{n.has(h.canonicalString())||h.isKeyField()||e.le.push(new ic(h,o))}),n.has(Ii.keyField().canonicalString())||e.le.push(new ic(Ii.keyField(),o))}return e.le}function v(i){const e=jt(i);return e.he||(e.he=function S(i,e){if("F"===i.limitType)return Zc(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(c=>new ic(c.field,"desc"===c.dir?"asc":"desc"));const n=i.endAt?new Ao(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new Ao(i.startAt.position,i.startAt.inclusive):null;return Zc(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,m(i))),e.he}function z(i,e){const n=i.filters.concat([e]);return new $a(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function re(i,e,n){return new $a(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Me(i,e){return eu(v(i),v(e))&&i.limitType===e.limitType}function it(i){return`${Aa(v(i))}|lt:${i.limitType}`}function At(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(c=>Cl(c)).join(", ")}]`),Ft(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(c=>{return`${(g=c).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(c=>wa(c)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(c=>wa(c)).join(",")),`Target(${o})`}(v(i))}; limitType=${i.limitType})`}function cn(i,e){return e.isFoundDocument()&&function(o,c){const h=c.key.path;return null!==o.collectionGroup?c.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(h):Ht.isDocumentKey(o.path)?o.path.isEqual(h):o.path.isImmediateParentOf(h)}(i,e)&&function(o,c){for(const h of m(o))if(!h.field.isKeyField()&&null===c.data.field(h.field))return!1;return!0}(i,e)&&function(o,c){for(const h of o.filters)if(!h.matches(c))return!1;return!0}(i,e)&&(c=e,!((o=i).startAt&&!function(g,R,N){const B=Su(g,R,N);return g.inclusive?B<=0:B<0}(o.startAt,m(o),c)||o.endAt&&!function(g,R,N){const B=Su(g,R,N);return g.inclusive?B>=0:B>0}(o.endAt,m(o),c)));var o,c}function Pn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function tr(i){return(e,n)=>{let o=!1;for(const c of m(i)){const h=_o(c,e,n);if(0!==h)return h;o=o||c.field.isKeyField()}return 0}}function _o(i,e,n){const o=i.field.isKeyField()?Ht.comparator(e.key,n.key):function(h,g,R){const N=g.data.field(h),B=R.data.field(h);return null!==N&&null!==B?Va(N,B):nn()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return nn()}}class ms{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[c,h]of o)if(this.equalsFn(c,e))return h}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),c=this.inner[o];if(void 0===c)return this.inner[o]=[[e,n]],void this.innerSize++;for(let h=0;h<c.length;h++)if(this.equalsFn(c[h][0],e))return void(c[h]=[e,n]);c.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return 1===o.length?delete this.inner[n]:o.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Ia(this.inner,(n,o)=>{for(const[c,h]of o)e(c,h)})}isEmpty(){return nc(this.inner)}size(){return this.innerSize}}const tu=new Ci(Ht.comparator);function yo(){return tu}const vo=new Ci(Ht.comparator);function uc(...i){let e=vo;for(const n of i)e=e.insert(n.key,n);return e}function pd(i){let e=vo;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function So(){return Mu()}function bc(){return Mu()}function Mu(){return new ms(i=>i.toString(),(i,e)=>i.isEqual(e))}const gd=new Ci(Ht.comparator),_s=new cr(Ht.comparator);function nr(...i){let e=_s;for(const n of i)e=e.add(n);return e}const Al=new cr(Sn);function Rc(){return Al}function mp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xn(e)?"-0":e}}function Yd(i){return{integerValue:""+i}}function md(i,e){return Ri(e)?Yd(e):mp(i,e)}class Qd{constructor(){this._=void 0}}function Jh(i,e,n){return i instanceof nu?function(c,h){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return h&&Cc(h)&&(h=wu(h)),h&&(g.fields.__previous_value__=h),{mapValue:g}}(n,e):i instanceof Ou?Xh(i,e):i instanceof ru?Zh(i,e):function(c,h){const g=Jd(c,h),R=ef(g)+ef(c.Ie);return ca(g)&&ca(c.Ie)?Yd(R):mp(c.serializer,R)}(i,e)}function lm(i,e,n){return i instanceof Ou?Xh(i,e):i instanceof ru?Zh(i,e):n}function Jd(i,e){return i instanceof xu?ca(o=e)||(h=o)&&"doubleValue"in h?e:{integerValue:0}:null;var o,h}class nu extends Qd{}class Ou extends Qd{constructor(e){super(),this.elements=e}}function Xh(i,e){const n=tf(e);for(const o of i.elements)n.some(c=>co(c,o))||n.push(o);return{arrayValue:{values:n}}}class ru extends Qd{constructor(e){super(),this.elements=e}}function Zh(i,e){let n=tf(e);for(const o of i.elements)n=n.filter(c=>!co(c,o));return{arrayValue:{values:n}}}class xu extends Qd{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function ef(i){return ps(i.integerValue||i.doubleValue)}function tf(i){return Ua(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class lc{constructor(e,n){this.field=e,this.transform=n}}class nf{constructor(e,n){this.version=e,this.transformResults=n}}class Ki{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ki}static exists(e){return new Ki(void 0,e)}static updateTime(e){return new Ki(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uo(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Xd{}function Mc(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new xc(i.key,Ki.none()):new Oc(i.key,i.data,Ki.none());{const n=i.data,o=Zi.empty();let c=new cr(Ii.comparator);for(let h of e.fields)if(!c.has(h)){let g=n.field(h);null===g&&h.length>1&&(h=h.popLast(),g=n.field(h)),null===g?o.delete(h):o.set(h,g),c=c.add(h)}return new dc(i.key,o,new ao(c.toArray()),Ki.none())}}function Zd(i,e,n){i instanceof Oc?function(c,h,g){const R=c.value.clone(),N=Sl(c.fieldTransforms,h,g.transformResults);R.setAll(N),h.convertToFoundDocument(g.version,R).setHasCommittedMutations()}(i,e,n):i instanceof dc?function(c,h,g){if(!Uo(c.precondition,h))return void h.convertToUnknownDocument(g.version);const R=Sl(c.fieldTransforms,h,g.transformResults),N=h.data;N.setAll(su(c)),N.setAll(R),h.convertToFoundDocument(g.version,N).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function iu(i,e,n,o){return i instanceof Oc?function(h,g,R,N){if(!Uo(h.precondition,g))return R;const B=h.value.clone(),J=_p(h.fieldTransforms,N,g);return B.setAll(J),g.convertToFoundDocument(g.version,B).setHasLocalMutations(),null}(i,e,n,o):i instanceof dc?function(h,g,R,N){if(!Uo(h.precondition,g))return R;const B=_p(h.fieldTransforms,N,g),J=g.data;return J.setAll(su(h)),J.setAll(B),g.convertToFoundDocument(g.version,J).setHasLocalMutations(),null===R?null:R.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(ue=>ue.field))}(i,e,n,o):(R=n,Uo(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):R);var g,R}function eh(i,e){let n=null;for(const o of i.fieldTransforms){const c=e.data.field(o.field),h=Jd(o.transform,c||null);null!=h&&(null===n&&(n=Zi.empty()),n.set(o.field,h))}return n||null}function th(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(c=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===c||o&&c&&Ea(o,c,(h,g)=>function Nu(i,e){return i.field.isEqual(e.field)&&(c=e.transform,(o=i.transform)instanceof Ou&&c instanceof Ou||o instanceof ru&&c instanceof ru?Ea(o.elements,c.elements,co):o instanceof xu&&c instanceof xu?co(o.Ie,c.Ie):o instanceof nu&&c instanceof nu);var o,c}(h,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,c}class Oc extends Xd{constructor(e,n,o,c=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class dc extends Xd{constructor(e,n,o,c,h=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=c,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function su(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Sl(i,e,n){const o=new Map;un(i.length===n.length);for(let c=0;c<n.length;c++){const h=i[c],g=h.transform,R=e.data.field(h.field);o.set(h.field,lm(g,R,n[c]))}return o}function _p(i,e,n){const o=new Map;for(const c of i){const h=c.transform,g=n.data.field(c.field);o.set(c.field,Jh(h,g,e))}return o}class xc extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rf extends Xd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nh{constructor(e,n,o,c){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=c}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let c=0;c<this.mutations.length;c++){const h=this.mutations[c];h.key.isEqual(e.key)&&Zd(h,e,o[c])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=iu(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=iu(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=bc();return this.mutations.forEach(c=>{const h=e.get(c.key),g=h.overlayedDocument;let R=this.applyToLocalView(g,h.mutatedFields);R=n.has(c.key)?null:R;const N=Mc(g,R);null!==N&&o.set(c.key,N),g.isValidDocument()||g.convertToNoDocument(fn.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),nr())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(n,o)=>th(n,o))&&Ea(this.baseMutations,e.baseMutations,(n,o)=>th(n,o))}}class sf{constructor(e,n,o,c){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=c}static from(e,n,o){un(e.mutations.length===o.length);let c=function(){return gd}();const h=e.mutations;for(let g=0;g<h.length;g++)c=c.insert(h[g].key,o[g].version);return new sf(e,n,o,c)}}class af{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class _d{constructor(e,n){this.count=e,this.unchangedNames=n}}var us,ur;function ou(i){switch(i){default:return nn();case ct.CANCELLED:case ct.UNKNOWN:case ct.DEADLINE_EXCEEDED:case ct.RESOURCE_EXHAUSTED:case ct.INTERNAL:case ct.UNAVAILABLE:case ct.UNAUTHENTICATED:return!1;case ct.INVALID_ARGUMENT:case ct.NOT_FOUND:case ct.ALREADY_EXISTS:case ct.PERMISSION_DENIED:case ct.FAILED_PRECONDITION:case ct.ABORTED:case ct.OUT_OF_RANGE:case ct.UNIMPLEMENTED:case ct.DATA_LOSS:return!0}}function hc(i){if(void 0===i)return Jr("GRPC error has no .code"),ct.UNKNOWN;switch(i){case us.OK:return ct.OK;case us.CANCELLED:return ct.CANCELLED;case us.UNKNOWN:return ct.UNKNOWN;case us.DEADLINE_EXCEEDED:return ct.DEADLINE_EXCEEDED;case us.RESOURCE_EXHAUSTED:return ct.RESOURCE_EXHAUSTED;case us.INTERNAL:return ct.INTERNAL;case us.UNAVAILABLE:return ct.UNAVAILABLE;case us.UNAUTHENTICATED:return ct.UNAUTHENTICATED;case us.INVALID_ARGUMENT:return ct.INVALID_ARGUMENT;case us.NOT_FOUND:return ct.NOT_FOUND;case us.ALREADY_EXISTS:return ct.ALREADY_EXISTS;case us.PERMISSION_DENIED:return ct.PERMISSION_DENIED;case us.FAILED_PRECONDITION:return ct.FAILED_PRECONDITION;case us.ABORTED:return ct.ABORTED;case us.OUT_OF_RANGE:return ct.OUT_OF_RANGE;case us.UNIMPLEMENTED:return ct.UNIMPLEMENTED;case us.DATA_LOSS:return ct.DATA_LOSS;default:return nn()}}(ur=us||(us={}))[ur.OK=0]="OK",ur[ur.CANCELLED=1]="CANCELLED",ur[ur.UNKNOWN=2]="UNKNOWN",ur[ur.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ur[ur.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ur[ur.NOT_FOUND=5]="NOT_FOUND",ur[ur.ALREADY_EXISTS=6]="ALREADY_EXISTS",ur[ur.PERMISSION_DENIED=7]="PERMISSION_DENIED",ur[ur.UNAUTHENTICATED=16]="UNAUTHENTICATED",ur[ur.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ur[ur.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ur[ur.ABORTED=10]="ABORTED",ur[ur.OUT_OF_RANGE=11]="OUT_OF_RANGE",ur[ur.UNIMPLEMENTED=12]="UNIMPLEMENTED",ur[ur.INTERNAL=13]="INTERNAL",ur[ur.UNAVAILABLE=14]="UNAVAILABLE",ur[ur.DATA_LOSS=15]="DATA_LOSS";function fc(){return new TextEncoder}const ku=new zi([4294967295,4294967295],0);function cf(i){const e=fc().encode(i),n=new ko;return n.update(e),new Uint8Array(n.digest())}function hm(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),c=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new zi([n,o],0),new zi([c,h],0)]}class Po{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new rh(`Invalid padding: ${n}`);if(o<0)throw new rh(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new rh(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new rh(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=zi.fromNumber(this.Te)}de(e,n,o){let c=e.add(n.multiply(zi.fromNumber(o)));return 1===c.compare(ku)&&(c=new zi([c.getBits(0),c.getBits(1)],0)),c.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=cf(e),[o,c]=hm(n);for(let h=0;h<this.hashCount;h++){const g=this.de(o,c,h);if(!this.Ae(g))return!1}return!0}static create(e,n,o){const c=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),g=new Po(h,c,n);return o.forEach(R=>g.insert(R)),g}insert(e){if(0===this.Te)return;const n=cf(e),[o,c]=hm(n);for(let h=0;h<this.hashCount;h++){const g=this.de(o,c,h);this.Re(g)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class rh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zu{constructor(e,n,o,c,h){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=c,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const c=new Map;return c.set(e,Pl.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Zu(fn.min(),c,new Ci(Sn),yo(),nr())}}class Pl{constructor(e,n,o,c,h){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=c,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Pl(o,n,nr(),nr(),nr())}}class bl{constructor(e,n,o,c){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=c}}class ih{constructor(e,n){this.targetId=e,this.fe=n}}class uf{constructor(e,n,o=ws.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=c}}class fm{constructor(){this.ge=0,this.pe=Rl(),this.ye=ws.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=nr(),n=nr(),o=nr();return this.pe.forEach((c,h)=>{switch(h){case 0:e=e.add(c);break;case 2:n=n.add(c);break;case 1:o=o.add(c);break;default:nn()}}),new Pl(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=Rl()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,un(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class pm{constructor(e){this.Le=e,this.ke=new Map,this.qe=yo(),this.Qe=el(),this.Ke=new Ci(Sn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:nn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,c)=>{this.je(c)&&n(c)})}Je(e){const n=e.targetId,o=e.fe.count,c=this.Ye(n);if(c){const h=c.target;if(Xu(h))if(0===o){const g=new Ht(h.path);this.We(n,g,Vi.newNoDocument(g,fn.min()))}else un(1===o);else{const g=this.Ze(n);if(g!==o){const R=this.Xe(e),N=R?this.et(R,e,g):1;0!==N&&(this.He(n),this.Ke=this.Ke.insert(n,2===N?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:c=0},hashCount:h=0}=n;let g,R;try{g=aa(o).toUint8Array()}catch(N){if(N instanceof Qc)return no("Decoding the base64 bloom filter in existence filter failed ("+N.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw N}try{R=new Po(g,c,h)}catch(N){return no(N instanceof rh?"BloomFilter error: ":"Applying bloom filter failed: ",N),null}return 0===R.Te?null:R}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let c=0;return o.forEach(h=>{const g=this.Le.nt(),R=`projects/${g.projectId}/databases/${g.database}/documents/${h.path.canonicalString()}`;e.mightContain(R)||(this.We(n,h,null),c++)}),c}it(e){const n=new Map;this.ke.forEach((h,g)=>{const R=this.Ye(g);if(R){if(h.current&&Xu(R.target)){const N=new Ht(R.target.path);null!==this.qe.get(N)||this.st(g,N)||this.We(g,N,Vi.newNoDocument(N,e))}h.De&&(n.set(g,h.ve()),h.Fe())}});let o=nr();this.Qe.forEach((h,g)=>{let R=!0;g.forEachWhile(N=>{const B=this.Ye(N);return!B||"TargetPurposeLimboResolution"===B.purpose||(R=!1,!1)}),R&&(o=o.add(h))}),this.qe.forEach((h,g)=>g.setReadTime(e));const c=new Zu(e,n,this.Ke,this.qe,o);return this.qe=yo(),this.Qe=el(),this.Ke=new Ci(Sn),c}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const c=this.ze(e);this.st(e,n)?c.Me(n,1):c.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new fm,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new cr(Sn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Ot("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new fm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function el(){return new Ci(Ht.comparator)}function Rl(){return new Ci(Ht.comparator)}const Ml={asc:"ASCENDING",desc:"DESCENDING"},gm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lf={and:"AND",or:"OR"};class Ol{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yp(i,e){return i.useProto3Json||Ft(e)?e:{value:e}}function xl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vp(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Bo(i,e){return xl(i,e.toTimestamp())}function Ui(i){return un(!!i),fn.fromTimestamp(function(n){const o=Ic(n);return new gi(o.seconds,o.nanos)}(i))}function Ws(i,e){return df(i,e).canonicalString()}function df(i,e){const n=(c=i,new Ur(["projects",c.projectId,"databases",c.database])).child("documents");var c;return void 0===e?n:n.child(e)}function Ep(i){const e=Ur.fromString(i);return un(gf(e)),e}function Fu(i,e){return Ws(i.databaseId,e.path)}function au(i,e){const n=Ep(e);if(n.get(1)!==i.databaseId.projectId)throw new St(ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new St(ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ht(Ip(n))}function hf(i,e){return Ws(i.databaseId,e)}function ff(i){const e=Ep(i);return 4===e.length?Ur.emptyPath():Ip(e)}function pf(i){return new Ur(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ip(i){return un(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function sh(i,e,n){return{name:Fu(i,e),fields:n.value.mapValue.fields}}function oh(i,e,n){const o=au(i,e.name),c=Ui(e.updateTime),h=e.createTime?Ui(e.createTime):fn.min(),g=new Zi({mapValue:{fields:e.fields}}),R=Vi.newFoundDocument(o,c,h,g);return n&&R.setHasCommittedMutations(),n?R.setHasCommittedMutations():R}function yd(i,e){let n;if(e instanceof Oc)n={update:sh(i,e.key,e.value)};else if(e instanceof xc)n={delete:Fu(i,e.key)};else if(e instanceof dc)n={update:sh(i,e.key,e.data),updateMask:Lu(e.fieldMask)};else{if(!(e instanceof rf))return nn();n={verify:Fu(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(h,g){const R=g.transform;if(R instanceof nu)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(R instanceof Ou)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:R.elements}};if(R instanceof ru)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:R.elements}};if(R instanceof xu)return{fieldPath:g.field.canonicalString(),increment:R.Ie};throw nn()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Bo(i,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:nn()),n;var h}function wp(i,e){const n=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?Ki.updateTime(Ui(h.updateTime)):void 0!==h.exists?Ki.exists(h.exists):Ki.none():Ki.none(),o=e.updateTransforms?e.updateTransforms.map(c=>function(g,R){let N=null;"setToServerValue"in R?(un("REQUEST_TIME"===R.setToServerValue),N=new nu):"appendMissingElements"in R?N=new Ou(R.appendMissingElements.values||[]):"removeAllFromArray"in R?N=new ru(R.removeAllFromArray.values||[]):"increment"in R?N=new xu(g,R.increment):nn();const B=Ii.fromServerFormat(R.fieldPath);return new lc(B,N)}(i,c)):[];var h;if(e.update){const c=au(i,e.update.name),h=new Zi({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new ao((e.updateMask.fieldPaths||[]).map(J=>Ii.fromServerFormat(J)));return new dc(c,h,g,n,o)}return new Oc(c,h,n,o)}if(e.delete){const c=au(i,e.delete);return new xc(c,n)}if(e.verify){const c=au(i,e.verify);return new rf(c,n)}return nn()}function mm(i,e){return{documents:[hf(i,e.path)]}}function ah(i,e){const n={structuredQuery:{}},o=e.path;let c;null!==e.collectionGroup?(c=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=hf(i,c);const h=function(B){if(0!==B.length)return Ed(Wr.create(B,"and"))}(e.filters);h&&(n.structuredQuery.where=h);const g=function(B){if(0!==B.length)return B.map(J=>{return{field:kc((Pe=J).field),direction:vm(Pe.dir)};var Pe})}(e.orderBy);g&&(n.structuredQuery.orderBy=g);const R=yp(i,e.limit);return null!==R&&(n.structuredQuery.limit=R),e.startAt&&(n.structuredQuery.startAt={before:(B=e.startAt).inclusive,values:B.position}),e.endAt&&(n.structuredQuery.endAt=function(B){return{before:!B.inclusive,values:B.position}}(e.endAt)),{ut:n,parent:c};var B}function _m(i){let e=ff(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let c=null;if(o>0){un(1===o);const J=n.from[0];J.allDescendants?c=J.collectionId:e=e.child(J.collectionId)}let h=[];n.where&&(h=function(ue){const Pe=ay(ue);return Pe instanceof Wr&&Sc(Pe)?Pe.getFilters():[Pe]}(n.where));let g=[];n.orderBy&&(g=n.orderBy.map(Pe=>{return new ic(vd((Ut=Pe).field),function(Qt){switch(Qt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ut.direction));var Ut}));let R=null;n.limit&&(R=function(ue){let Pe;return Pe="object"==typeof ue?ue.value:ue,Ft(Pe)?null:Pe}(n.limit));let N=null;var ue;n.startAt&&(N=new Ao((ue=n.startAt).values||[],!!ue.before));let B=null;return n.endAt&&(B=function(ue){return new Ao(ue.values||[],!ue.before)}(n.endAt)),Dl(e,c,g,h,R,"F",N,B)}function ay(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=vd(n.unaryFilter.field);return br.create(o,"==",{doubleValue:NaN});case"IS_NULL":const c=vd(n.unaryFilter.field);return br.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=vd(n.unaryFilter.field);return br.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=vd(n.unaryFilter.field);return br.create(g,"!=",{nullValue:"NULL_VALUE"});default:return nn()}}(i):void 0!==i.fieldFilter?br.create(vd((n=i).fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nn()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return Wr.create(n.compositeFilter.filters.map(o=>ay(o)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return nn()}}(n.compositeFilter.op))}(i):nn();var n}function vm(i){return Ml[i]}function Dp(i){return gm[i]}function la(i){return lf[i]}function kc(i){return{fieldPath:i.canonicalString()}}function vd(i){return Ii.fromServerFormat(i.fieldPath)}function Ed(i){return i instanceof br?function(n){if("=="===n.op){if(ud(n.value))return{unaryFilter:{field:kc(n.field),op:"IS_NAN"}};if(zd(n.value))return{unaryFilter:{field:kc(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(ud(n.value))return{unaryFilter:{field:kc(n.field),op:"IS_NOT_NAN"}};if(zd(n.value))return{unaryFilter:{field:kc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kc(n.field),op:Dp(n.op),value:n.value}}}(i):i instanceof Wr?function(n){const o=n.getFilters().map(c=>Ed(c));return 1===o.length?o[0]:{compositeFilter:{op:la(n.op),filters:o}}}(i):nn()}function Lu(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function gf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Ga{constructor(e,n,o,c,h=fn.min(),g=fn.min(),R=ws.EMPTY_BYTE_STRING,N=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=c,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=R,this.expectedCount=N}withSequenceNumber(e){return new Ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class mf{constructor(e){this.ct=e}}function ch(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Id(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Fu(h=i.ct,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:xl(h,g.version.toTimestamp()),createTime:xl(h,g.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Wa(e.version)};else{if(!e.isUnknownDocument())return nn();o.unknownDocument={path:n.path.toArray(),version:Wa(e.version)}}var h,g;return o}function Id(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Wa(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function tl(i){const e=new gi(i.seconds,i.nanoseconds);return fn.fromTimestamp(e)}function Nl(i,e){const n=(e.baseMutations||[]).map(h=>wp(i.ct,h));for(let h=0;h<e.mutations.length-1;++h)h+1<e.mutations.length&&void 0!==e.mutations[h+1].transform&&(e.mutations[h].updateTransforms=e.mutations[h+1].transform.fieldTransforms,e.mutations.splice(h+1,1),++h);const o=e.mutations.map(h=>wp(i.ct,h)),c=gi.fromMillis(e.localWriteTimeMs);return new nh(e.batchId,c,n,o)}function yf(i){const e=tl(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?tl(i.lastLimboFreeSnapshotVersion):fn.min();let o;return o=void 0!==i.query.documents?(un(1===(h=i.query).documents.length),v(cc(ff(h.documents[0])))):function(h){return v(_m(h))}(i.query),new Ga(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,ws.fromBase64String(i.resumeToken));var h}function uh(i,e){const n=Wa(e.snapshotVersion),o=Wa(e.lastLimboFreeSnapshotVersion);let c;c=Xu(e.target)?mm(i.ct,e.target):ah(i.ct,e.target).ut;const h=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Aa(e.target),readTime:n,resumeToken:h,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:c}}function Cd(i){const e=_m({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?re(e,e.limit,"L"):e}function lh(i,e){return new af(e.largestBatchId,wp(i.ct,e.overlayMutation))}function Ap(i,e){const n=e.path.lastSegment();return[i,qi(e.path.popLast()),n]}function Sp(i,e,n,o){return{indexId:i,uid:e,sequenceNumber:n,readTime:Wa(o.readTime),documentKey:qi(o.documentKey.path),largestBatchId:o.largestBatchId}}class Pp{getBundleMetadata(e,n){return Em(e).get(n).next(o=>{if(o)return{id:(h=o).bundleId,createTime:tl(h.createTime),version:h.version};var h})}saveBundleMetadata(e,n){return Em(e).put({bundleId:(c=n).id,createTime:Wa(Ui(c.createTime)),version:c.version});var c}getNamedQuery(e,n){return Im(e).get(n).next(o=>{if(o)return{name:(h=o).name,query:Cd(h.bundledQuery),readTime:tl(h.readTime)};var h})}saveNamedQuery(e,n){return Im(e).put({name:(c=n).name,readTime:Wa(Ui(c.readTime)),bundledQuery:c.bundledQuery});var c}}function Em(i){return Gs(i,"bundles")}function Im(i){return Gs(i,"namedQueries")}class vf{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new vf(e,n.uid||"")}getOverlay(e,n){return dh(e).get(Ap(this.userId,n)).next(o=>o?lh(this.serializer,o):null)}getOverlays(e,n){const o=So();return Qe.forEach(n,c=>this.getOverlay(e,c).next(h=>{null!==h&&o.set(c,h)})).next(()=>o)}saveOverlays(e,n,o){const c=[];return o.forEach((h,g)=>{const R=new af(n,g);c.push(this.ht(e,R))}),Qe.waitFor(c)}removeOverlaysForBatchId(e,n,o){const c=new Set;n.forEach(g=>c.add(qi(g.getCollectionPath())));const h=[];return c.forEach(g=>{const R=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,o+1],!1,!0);h.push(dh(e).H("collectionPathOverlayIndex",R))}),Qe.waitFor(h)}getOverlaysForCollection(e,n,o){const c=So(),h=qi(n),g=IDBKeyRange.bound([this.userId,h,o],[this.userId,h,Number.POSITIVE_INFINITY],!0);return dh(e).W("collectionPathOverlayIndex",g).next(R=>{for(const N of R){const B=lh(this.serializer,N);c.set(B.getKey(),B)}return c})}getOverlaysForCollectionGroup(e,n,o,c){const h=So();let g;const R=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return dh(e).Y({index:"collectionGroupOverlayIndex",range:R},(N,B,J)=>{const ue=lh(this.serializer,B);h.size()<c||ue.largestBatchId===g?(h.set(ue.getKey(),ue),g=ue.largestBatchId):J.done()}).next(()=>h)}ht(e,n){return dh(e).put(function(c,h,g){const[R,N,B]=Ap(h,g.mutation.key);return{userId:h,collectionPath:N,documentId:B,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:yd(c.ct,g.mutation)}}(this.serializer,this.userId,n))}}function dh(i){return Gs(i,"documentOverlays")}class cu{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(ps(e.integerValue));else if("doubleValue"in e){const o=ps(e.doubleValue);isNaN(o)?this.Et(n,13):(this.Et(n,15),Xn(o)?n.dt(0):n.dt(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Et(n,20),"string"==typeof o?n.At(o):(n.At(`${o.seconds||""}`),n.dt(o.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(aa(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Et(n,45),n.dt(o.latitude||0),n.dt(o.longitude||0)}else"mapValue"in e?ld(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):nn()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const o=e.fields||{};this.Et(n,55);for(const c of Object.keys(o))this.Rt(c,n),this.It(o[c],n)}wt(e,n){const o=e.values||[];this.Et(n,50);for(const c of o)this.It(c,n)}gt(e,n){this.Et(n,37),Ht.fromName(e).path.forEach(o=>{this.Et(n,60),this.St(o,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function uu(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function kl(i){const e=64-function(o){let c=0;for(let h=0;h<8;++h){const g=uu(255&o[h]);if(c+=g,8!==g)break}return c}(i);return Math.ceil(e/8)}cu.bt=new cu;class cy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ct(o.value),o=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Mt(o.value),o=n.next();this.xt()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ct(o);else if(o<2048)this.Ct(960|o>>>6),this.Ct(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|o>>>12),this.Ct(128|63&o>>>6),this.Ct(128|63&o);else{const c=n.codePointAt(0);this.Ct(240|c>>>18),this.Ct(128|63&c>>>12),this.Ct(128|63&c>>>6),this.Ct(128|63&c)}}this.vt()}Nt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Mt(o);else if(o<2048)this.Mt(960|o>>>6),this.Mt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|o>>>12),this.Mt(128|63&o>>>6),this.Mt(128|63&o);else{const c=n.codePointAt(0);this.Mt(240|c>>>18),this.Mt(128|63&c>>>12),this.Mt(128|63&c>>>6),this.Mt(128|63&c)}}this.xt()}Bt(e){const n=this.Lt(e),o=kl(n);this.kt(1+o),this.buffer[this.position++]=255&o;for(let c=n.length-o;c<n.length;++c)this.buffer[this.position++]=255&n[c]}qt(e){const n=this.Lt(e),o=kl(n);this.kt(1+o),this.buffer[this.position++]=~(255&o);for(let c=n.length-o;c<n.length;++c)this.buffer[this.position++]=~(255&n[c])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const n=function(h){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,h,!1),new Uint8Array(g.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let c=1;c<n.length;++c)n[c]^=o?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const c=new Uint8Array(o);c.set(this.buffer),this.buffer=c}}class bp{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class uy{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class hh{constructor(){this.Gt=new cy,this.zt=new bp(this.Gt),this.jt=new uy(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Fl{constructor(e,n,o,c){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=c}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Fl(this.indexId,this.documentKey,this.arrayValue,o)}}function nl(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=Ef(i.arrayValue,e.arrayValue),0!==n?n:(n=Ef(i.directionalValue,e.directionalValue),0!==n?n:Ht.comparator(i.documentKey,e.documentKey)))}function Ef(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Rp{constructor(e){this.Yt=new cr((n,o)=>Ii.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Yt=this.Yt.add(o):this.Xt.push(o)}}get en(){return this.Yt.size>1}tn(e){if(un(e.collectionGroup===this.collectionId),this.en)return!1;const n=ka(e);if(void 0!==n&&!this.nn(n))return!1;const o=Qo(e);let c=new Set,h=0,g=0;for(;h<o.length&&this.nn(o[h]);++h)c=c.add(o[h].fieldPath.canonicalString());if(h===o.length)return!0;if(this.Yt.size>0){const R=this.Yt.getIterator().getNext();if(!c.has(R.field.canonicalString())){const N=o[h];if(!this.rn(R,N)||!this.sn(this.Zt[g++],N))return!1}++h}for(;h<o.length;++h)if(g>=this.Zt.length||!this.sn(this.Zt[g++],o[h]))return!1;return!0}on(){if(this.en)return null;let e=new cr(Ii.comparator);const n=[];for(const o of this.Xt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new pr(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new pr(o.field,0))}for(const o of this.Zt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new pr(o.field,"asc"===o.dir?0:1)));return new io(io.UNKNOWN_ID,this.collectionId,n,Jo.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function Cm(i){var e,n;if(un(i instanceof br||i instanceof Wr),i instanceof br){if(i instanceof Ba){const c=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(h=>br.create(i.field,"==",h)))||[];return Wr.create(c,"or")}return i}const o=i.filters.map(c=>Cm(c));return Wr.create(o,i.op)}function ly(i){if(0===i.getFilters().length)return[];const e=Ll(Cm(i));return un(lu(e)),Mp(e)||fh(e)?[e]:e.getFilters()}function Mp(i){return i instanceof br}function fh(i){return i instanceof Wr&&Sc(i)}function lu(i){return Mp(i)||fh(i)||function(n){if(n instanceof Wr&&Ac(n)){for(const o of n.getFilters())if(!Mp(o)&&!fh(o))return!1;return!0}return!1}(i)}function Ll(i){if(un(i instanceof br||i instanceof Wr),i instanceof br)return i;if(1===i.filters.length)return Ll(i.filters[0]);const e=i.filters.map(o=>Ll(o));let n=Wr.create(e,i.op);return n=ph(n),lu(n)?n:(un(n instanceof Wr),un(Da(n)),un(n.filters.length>1),n.filters.reduce((o,c)=>If(o,c)))}function If(i,e){let n;return un(i instanceof br||i instanceof Wr),un(e instanceof br||e instanceof Wr),n=i instanceof br?e instanceof br?Wr.create([i,e],"and"):Op(i,e):e instanceof br?Op(e,i):function(c,h){if(un(c.filters.length>0&&h.filters.length>0),Da(c)&&Da(h))return Kd(c,h.getFilters());const g=Ac(c)?c:h,R=Ac(c)?h:c,N=g.filters.map(B=>If(B,R));return Wr.create(N,"or")}(i,e),ph(n)}function Op(i,e){if(Da(e))return Kd(e,i.getFilters());{const n=e.filters.map(o=>If(i,o));return Wr.create(n,"or")}}function ph(i){if(un(i instanceof br||i instanceof Wr),i instanceof br)return i;const e=i.getFilters();if(1===e.length)return ph(e[0]);if(Ju(i))return i;const n=e.map(c=>ph(c)),o=[];return n.forEach(c=>{c instanceof br?o.push(c):c instanceof Wr&&(c.op===i.op?o.push(...c.filters):o.push(c))}),1===o.length?o[0]:Wr.create(o,i.op)}class RE{constructor(){this._n=new wm}addToCollectionParentIndex(e,n){return this._n.add(n),Qe.resolve()}getCollectionParents(e,n){return Qe.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return Qe.resolve()}deleteFieldIndex(e,n){return Qe.resolve()}deleteAllFieldIndexes(e){return Qe.resolve()}createTargetIndexes(e,n){return Qe.resolve()}getDocumentsMatchingTarget(e,n){return Qe.resolve(null)}getIndexType(e,n){return Qe.resolve(0)}getFieldIndexes(e,n){return Qe.resolve([])}getNextCollectionGroupToUpdate(e){return Qe.resolve(null)}getMinOffset(e,n){return Qe.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,n){return Qe.resolve(Cs.min())}updateCollectionGroup(e,n,o){return Qe.resolve()}updateIndexEntries(e,n){return Qe.resolve()}}class wm{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),c=this.index[n]||new cr(Ur.comparator),h=!c.has(o);return this.index[n]=c.add(o),h}has(e){const n=e.lastSegment(),o=e.popLast(),c=this.index[n];return c&&c.has(o)}getEntries(e){return(this.index[e]||new cr(Ur.comparator)).toArray()}}const xp=new Uint8Array(0);class Np{constructor(e,n){this.databaseId=n,this.an=new wm,this.un=new ms(o=>Aa(o),(o,c)=>eu(o,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const o=n.lastSegment(),c=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const h={collectionId:o,parent:qi(c)};return Cf(e).put(h)}return Qe.resolve()}getCollectionParents(e,n){const o=[],c=IDBKeyRange.bound([n,""],[Yo(n),""],!1,!0);return Cf(e).W(c).next(h=>{for(const g of h){if(g.collectionId!==n)break;o.push(mo(g.parent))}return o})}addFieldIndex(e,n){const o=wf(e),c={indexId:(R=n).indexId,collectionGroup:R.collectionGroup,fields:R.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var R;delete c.indexId;const h=o.add(c);if(n.indexState){const g=Vl(e);return h.next(R=>{g.put(Sp(R,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return h.next()}deleteFieldIndex(e,n){const o=wf(e),c=Vl(e),h=gh(e);return o.delete(n.indexId).next(()=>c.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>h.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=wf(e),o=gh(e),c=Vl(e);return n.H().next(()=>o.H()).next(()=>c.H())}createTargetIndexes(e,n){return Qe.forEach(this.cn(n),o=>this.getIndexType(e,o).next(c=>{if(0===c||1===c){const h=new Rp(o).on();if(null!=h)return this.addFieldIndex(e,h)}}))}getDocumentsMatchingTarget(e,n){const o=gh(e);let c=!0;const h=new Map;return Qe.forEach(this.cn(n),g=>this.ln(e,g).next(R=>{c&&(c=!!R),h.set(g,R)})).next(()=>{if(c){let g=nr();const R=[];return Qe.forEach(h,(N,B)=>{var Nn;Ot("IndexedDbIndexManager",`Using index ${Nn=N,`id=${Nn.indexId}|cg=${Nn.collectionGroup}|f=${Nn.fields.map(Dn=>`${Dn.fieldPath}:${Dn.kind}`).join(",")}`} to execute ${Aa(n)}`);const J=function(Nn,Dn){const _i=ka(Dn);if(void 0===_i)return null;for(const Mi of Sa(Nn,_i.fieldPath))switch(Mi.op){case"array-contains-any":return Mi.value.arrayValue.values||[];case"array-contains":return[Mi.value]}return null}(B,N),ue=function(Nn,Dn){const _i=new Map;for(const Mi of Qo(Dn))for(const Hr of Sa(Nn,Mi.fieldPath))switch(Hr.op){case"==":case"in":_i.set(Mi.fieldPath.canonicalString(),Hr.value);break;case"not-in":case"!=":return _i.set(Mi.fieldPath.canonicalString(),Hr.value),Array.from(_i.values())}return null}(B,N),Pe=function(Nn,Dn){const _i=[];let Mi=!0;for(const Hr of Qo(Dn)){const ha=0===Hr.kind?fd(Nn,Hr.fieldPath,Nn.startAt):Tl(Nn,Hr.fieldPath,Nn.startAt);_i.push(ha.value),Mi&&(Mi=ha.inclusive)}return new Ao(_i,Mi)}(B,N),Je=function(Nn,Dn){const _i=[];let Mi=!0;for(const Hr of Qo(Dn)){const ha=0===Hr.kind?Tl(Nn,Hr.fieldPath,Nn.endAt):fd(Nn,Hr.fieldPath,Nn.endAt);_i.push(ha.value),Mi&&(Mi=ha.inclusive)}return new Ao(_i,Mi)}(B,N),Ut=this.hn(N,B,Pe),Jt=this.hn(N,B,Je),Qt=this.Pn(N,B,ue),xn=this.In(N.indexId,J,Ut,Pe.inclusive,Jt,Je.inclusive,Qt);return Qe.forEach(xn,_r=>o.j(_r,n.limit).next(Nn=>{Nn.forEach(Dn=>{const _i=Ht.fromSegments(Dn.documentKey);g.has(_i)||(g=g.add(_i),R.push(_i))})}))}).next(()=>R)}return Qe.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:ly(Wr.create(e.filters,"and")).map(o=>Zc(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,o,c,h,g,R){const N=(null!=n?n.length:1)*Math.max(o.length,h.length),B=N/(null!=n?n.length:1),J=[];for(let ue=0;ue<N;++ue){const Pe=n?this.Tn(n[ue/B]):xp,Je=this.En(e,Pe,o[ue%B],c),Ut=this.dn(e,Pe,h[ue%B],g),Jt=R.map(Qt=>this.En(e,Pe,Qt,!0));J.push(...this.createRange(Je,Ut,Jt))}return J}En(e,n,o,c){const h=new Fl(e,Ht.empty(),n,o);return c?h:h.Jt()}dn(e,n,o,c){const h=new Fl(e,Ht.empty(),n,o);return c?h.Jt():h}ln(e,n){const o=new Rp(n),c=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,c).next(h=>{let g=null;for(const R of h)o.tn(R)&&(!g||R.fields.length>g.fields.length)&&(g=R);return g})}getIndexType(e,n){let o=2;const c=this.cn(n);return Qe.forEach(c,h=>this.ln(e,h).next(g=>{g?0!==o&&g.fields.length<function(N){let B=new cr(Ii.comparator),J=!1;for(const ue of N.filters)for(const Pe of ue.getFlattenedFilters())Pe.field.isKeyField()||("array-contains"===Pe.op||"array-contains-any"===Pe.op?J=!0:B=B.add(Pe.field));for(const ue of N.orderBy)ue.field.isKeyField()||(B=B.add(ue.field));return B.size+(J?1:0)}(h)&&(o=1):o=0})).next(()=>null!==n.limit&&c.length>1&&2===o?1:o)}An(e,n){const o=new hh;for(const c of Qo(e)){const h=n.data.field(c.fieldPath);if(null==h)return null;const g=o.Ht(c.kind);cu.bt.Pt(h,g)}return o.Wt()}Tn(e){const n=new hh;return cu.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const o=new hh;return cu.bt.Pt(Ta(this.databaseId,n),o.Ht(function(h){const g=Qo(h);return 0===g.length?0:g[g.length-1].kind}(e))),o.Wt()}Pn(e,n,o){if(null===o)return[];let c=[];c.push(new hh);let h=0;for(const g of Qo(e)){const R=o[h++];for(const N of c)if(this.Vn(n,g.fieldPath)&&Ua(R))c=this.mn(c,g,R);else{const B=N.Ht(g.kind);cu.bt.Pt(R,B)}}return this.fn(c)}hn(e,n,o){return this.Pn(e,n,o.position)}fn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Wt();return n}mn(e,n,o){const c=[...e],h=[];for(const g of o.arrayValue.values||[])for(const R of c){const N=new hh;N.seed(R.Wt()),cu.bt.Pt(g,N.Ht(n.kind)),h.push(N)}return h}Vn(e,n){return!!e.filters.find(o=>o instanceof br&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=wf(e),c=Vl(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(h=>{const g=[];return Qe.forEach(h,R=>c.get([R.indexId,this.uid]).next(N=>{g.push(function(J,ue){const Pe=ue?new Jo(ue.sequenceNumber,new Cs(tl(ue.readTime),new Ht(mo(ue.documentKey)),ue.largestBatchId)):Jo.empty(),Je=J.fields.map(([Ut,Jt])=>new pr(Ii.fromServerFormat(Ut),Jt));return new io(J.indexId,J.collectionGroup,Je,Pe)}(R,N))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,c)=>{const h=o.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==h?h:Sn(o.collectionGroup,c.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const c=wf(e),h=Vl(e);return this.gn(e).next(g=>c.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(R=>Qe.forEach(R,N=>h.put(Sp(N.indexId,this.uid,g,o)))))}updateIndexEntries(e,n){const o=new Map;return Qe.forEach(n,(c,h)=>{const g=o.get(c.collectionGroup);return(g?Qe.resolve(g):this.getFieldIndexes(e,c.collectionGroup)).next(R=>(o.set(c.collectionGroup,R),Qe.forEach(R,N=>this.pn(e,c,N).next(B=>{const J=this.yn(h,N);return B.isEqual(J)?Qe.resolve():this.wn(e,h,N,B,J)}))))})}Sn(e,n,o,c){return gh(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.Rn(o,n.key),documentKey:n.key.path.toArray()})}bn(e,n,o,c){return gh(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.Rn(o,n.key),n.key.path.toArray()])}pn(e,n,o){const c=gh(e);let h=new cr(nl);return c.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.Rn(o,n)])},(g,R)=>{h=h.add(new Fl(o.indexId,n,R.arrayValue,R.directionalValue))}).next(()=>h)}yn(e,n){let o=new cr(nl);const c=this.An(n,e);if(null==c)return o;const h=ka(n);if(null!=h){const g=e.data.field(h.fieldPath);if(Ua(g))for(const R of g.arrayValue.values||[])o=o.add(new Fl(n.indexId,e.key,this.Tn(R),c))}else o=o.add(new Fl(n.indexId,e.key,xp,c));return o}wn(e,n,o,c,h){Ot("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const g=[];return function(N,B,J,ue,Pe){const Je=N.getIterator(),Ut=B.getIterator();let Jt=mr(Je),Qt=mr(Ut);for(;Jt||Qt;){let xn=!1,_r=!1;if(Jt&&Qt){const Nn=J(Jt,Qt);Nn<0?_r=!0:Nn>0&&(xn=!0)}else null!=Jt?_r=!0:xn=!0;xn?(ue(Qt),Qt=mr(Ut)):_r?(Pe(Jt),Jt=mr(Je)):(Jt=mr(Je),Qt=mr(Ut))}}(c,h,nl,R=>{g.push(this.Sn(e,n,o,R))},R=>{g.push(this.bn(e,n,o,R))}),Qe.waitFor(g)}gn(e){let n=1;return Vl(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,c,h)=>{h.done(),n=c.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((g,R)=>nl(g,R)).filter((g,R,N)=>!R||0!==nl(g,N[R-1]));const c=[];c.push(e);for(const g of o){const R=nl(g,e),N=nl(g,n);if(0===R)c[0]=e.Jt();else if(R>0&&N<0)c.push(g),c.push(g.Jt());else if(N>0)break}c.push(n);const h=[];for(let g=0;g<c.length;g+=2){if(this.Dn(c[g],c[g+1]))return[];h.push(IDBKeyRange.bound([c[g].indexId,this.uid,c[g].arrayValue,c[g].directionalValue,xp,[]],[c[g+1].indexId,this.uid,c[g+1].arrayValue,c[g+1].directionalValue,xp,[]]))}return h}Dn(e,n){return nl(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(kp)}getMinOffset(e,n){return Qe.mapArray(this.cn(n),o=>this.ln(e,o).next(c=>c||nn())).next(kp)}}function Cf(i){return Gs(i,"collectionParents")}function gh(i){return Gs(i,"indexEntries")}function wf(i){return Gs(i,"indexConfiguration")}function Vl(i){return Gs(i,"indexState")}function kp(i){un(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const c=i[o].indexState.offset;Hc(c,e)<0&&(e=c),n<c.largestBatchId&&(n=c.largestBatchId)}return new Cs(e.readTime,e.documentKey,n)}const Tm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zo{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Zo(e,Zo.DEFAULT_COLLECTION_PERCENTILE,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Dm(i,e,n){const o=i.store("mutations"),c=i.store("documentMutations"),h=[],g=IDBKeyRange.only(n.batchId);let R=0;const N=o.Y({range:g},(J,ue,Pe)=>(R++,Pe.delete()));h.push(N.next(()=>{un(1===R)}));const B=[];for(const J of n.mutations){const ue=Wu(e,J.key.path,n.batchId);h.push(c.delete(ue)),B.push(J.key)}return Qe.waitFor(h).next(()=>B)}function mh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw nn();e=i.noDocument}return JSON.stringify(e).length}Zo.DEFAULT_COLLECTION_PERCENTILE=10,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zo.DEFAULT=new Zo(41943040,Zo.DEFAULT_COLLECTION_PERCENTILE,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zo.DISABLED=new Zo(-1,0,0);class Ul{constructor(e,n,o,c){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=c,this.Cn={}}static lt(e,n,o,c){un(""!==e.uid);const h=e.isAuthenticated()?e.uid:"";return new Ul(h,n,o,c)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return du(e).Y({index:"userMutationsIndex",range:o},(c,h,g)=>{n=!1,g.done()}).next(()=>n)}addMutationBatch(e,n,o,c){const h=wd(e),g=du(e);return g.add({}).next(R=>{un("number"==typeof R);const N=new nh(R,n,o,c),B=function(Je,Ut,Jt){const Qt=Jt.baseMutations.map(_r=>yd(Je.ct,_r)),xn=Jt.mutations.map(_r=>yd(Je.ct,_r));return{userId:Ut,batchId:Jt.batchId,localWriteTimeMs:Jt.localWriteTime.toMillis(),baseMutations:Qt,mutations:xn}}(this.serializer,this.userId,N),J=[];let ue=new cr((Pe,Je)=>Sn(Pe.canonicalString(),Je.canonicalString()));for(const Pe of c){const Je=Wu(this.userId,Pe.key.path,R);ue=ue.add(Pe.key.path.popLast()),J.push(g.put(B)),J.push(h.put(Je,Hu))}return ue.forEach(Pe=>{J.push(this.indexManager.addToCollectionParentIndex(e,Pe))}),e.addOnCommittedListener(()=>{this.Cn[R]=N.keys()}),Qe.waitFor(J).next(()=>N)})}lookupMutationBatch(e,n){return du(e).get(n).next(o=>o?(un(o.userId===this.userId),Nl(this.serializer,o)):null)}vn(e,n){return this.Cn[n]?Qe.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const c=o.keys();return this.Cn[n]=c,c}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,c=IDBKeyRange.lowerBound([this.userId,o]);let h=null;return du(e).Y({index:"userMutationsIndex",range:c},(g,R,N)=>{R.userId===this.userId&&(un(R.batchId>=o),h=Nl(this.serializer,R)),N.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return du(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(c,h,g)=>{o=h.batchId,g.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return du(e).W("userMutationsIndex",n).next(o=>o.map(c=>Nl(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=zc(this.userId,n.path),c=IDBKeyRange.lowerBound(o),h=[];return wd(e).Y({range:c},(g,R,N)=>{const[B,J,ue]=g,Pe=mo(J);if(B===this.userId&&n.path.isEqual(Pe))return du(e).get(ue).next(Je=>{if(!Je)throw nn();un(Je.userId===this.userId),h.push(Nl(this.serializer,Je))});N.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new cr(Sn);const c=[];return n.forEach(h=>{const g=zc(this.userId,h.path),R=IDBKeyRange.lowerBound(g),N=wd(e).Y({range:R},(B,J,ue)=>{const[Pe,Je,Ut]=B,Jt=mo(Je);Pe===this.userId&&h.path.isEqual(Jt)?o=o.add(Ut):ue.done()});c.push(N)}),Qe.waitFor(c).next(()=>this.Fn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,c=o.length+1,h=zc(this.userId,o),g=IDBKeyRange.lowerBound(h);let R=new cr(Sn);return wd(e).Y({range:g},(N,B,J)=>{const[ue,Pe,Je]=N,Ut=mo(Pe);ue===this.userId&&o.isPrefixOf(Ut)?Ut.length===c&&(R=R.add(Je)):J.done()}).next(()=>this.Fn(e,R))}Fn(e,n){const o=[],c=[];return n.forEach(h=>{c.push(du(e).get(h).next(g=>{if(null===g)throw nn();un(g.userId===this.userId),o.push(Nl(this.serializer,g))}))}),Qe.waitFor(c).next(()=>o)}removeMutationBatch(e,n){return Dm(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),Qe.forEach(o,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Qe.resolve();const o=IDBKeyRange.lowerBound(function(g){return[g]}(this.userId)),c=[];return wd(e).Y({range:o},(h,g,R)=>{if(h[0]===this.userId){const N=mo(h[1]);c.push(N)}else R.done()}).next(()=>{un(0===c.length)})})}containsKey(e,n){return Am(e,this.userId,n)}xn(e){return Bl(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Am(i,e,n){const o=zc(e,n.path),c=o[1],h=IDBKeyRange.lowerBound(o);let g=!1;return wd(i).Y({range:h,J:!0},(R,N,B)=>{const[J,ue,Pe]=R;J===e&&ue===c&&(g=!0),B.done()}).next(()=>g)}function du(i){return Gs(i,"mutations")}function wd(i){return Gs(i,"documentMutations")}function Bl(i){return Gs(i,"mutationQueues")}class jl{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new jl(0)}static Bn(){return new jl(-1)}}class dy{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{const o=new jl(n.highestTargetId);return n.highestTargetId=o.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>fn.fromTimestamp(new gi(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Ln(e).next(c=>(c.highestListenSequenceNumber=n,o&&(c.lastRemoteSnapshotVersion=o.toTimestamp()),n>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=n),this.kn(e,c)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(o=>(o.targetCount+=1,this.Qn(n,o),this.kn(e,o))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>rl(e).delete(n.targetId)).next(()=>this.Ln(e)).next(o=>(un(o.targetCount>0),o.targetCount-=1,this.kn(e,o)))}removeTargets(e,n,o){let c=0;const h=[];return rl(e).Y((g,R)=>{const N=yf(R);N.sequenceNumber<=n&&null===o.get(N.targetId)&&(c++,h.push(this.removeTargetData(e,N)))}).next(()=>Qe.waitFor(h)).next(()=>c)}forEachTarget(e,n){return rl(e).Y((o,c)=>{const h=yf(c);n(h)})}Ln(e){return Fp(e).get("targetGlobalKey").next(n=>(un(null!==n),n))}kn(e,n){return Fp(e).put("targetGlobalKey",n)}qn(e,n){return rl(e).put(uh(this.serializer,n))}Qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){const o=Aa(n),c=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let h=null;return rl(e).Y({range:c,index:"queryTargetsIndex"},(g,R,N)=>{const B=yf(R);eu(n,B.target)&&(h=B,N.done())}).next(()=>h)}addMatchingKeys(e,n,o){const c=[],h=il(e);return n.forEach(g=>{const R=qi(g.path);c.push(h.put({targetId:o,path:R})),c.push(this.referenceDelegate.addReference(e,o,g))}),Qe.waitFor(c)}removeMatchingKeys(e,n,o){const c=il(e);return Qe.forEach(n,h=>{const g=qi(h.path);return Qe.waitFor([c.delete([o,g]),this.referenceDelegate.removeReference(e,o,h)])})}removeMatchingKeysForTargetId(e,n){const o=il(e),c=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(c)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),c=il(e);let h=nr();return c.Y({range:o,J:!0},(g,R,N)=>{const B=mo(g[1]),J=new Ht(B);h=h.add(J)}).next(()=>h)}containsKey(e,n){const o=qi(n.path),c=IDBKeyRange.bound([o],[Yo(o)],!1,!0);let h=0;return il(e).Y({index:"documentTargetsIndex",J:!0,range:c},([g,R],N,B)=>{0!==g&&(h++,B.done())}).next(()=>h>0)}_t(e,n){return rl(e).get(n).next(o=>o?yf(o):null)}}function rl(i){return Gs(i,"targets")}function Fp(i){return Gs(i,"targetGlobal")}function il(i){return Gs(i,"targetDocuments")}function Sm([i,e],[n,o]){const c=Sn(i,n);return 0===c?Sn(e,o):c}class hy{constructor(e){this.Kn=e,this.buffer=new cr(Sm),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Sm(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Pm{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;Ot("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,de.c)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){T(o)?Ot("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield so(o)}yield n.zn(3e5)}))}}class bm{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return Qe.resolve(Vt._e);const o=new hy(n);return this.jn.forEachTarget(e,c=>o.Wn(c.sequenceNumber)).next(()=>this.jn.Jn(e,c=>o.Wn(c))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.jn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Ot("LruGarbageCollector","Garbage collection skipped; disabled"),Qe.resolve(Tm)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tm):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let o,c,h,g,R,N,B;const J=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ue=>(ue>this.params.maximumSequenceNumbersToCollect?(Ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ue}`),c=this.params.maximumSequenceNumbersToCollect):c=ue,g=Date.now(),this.nthSequenceNumber(e,c))).next(ue=>(o=ue,R=Date.now(),this.removeTargets(e,o,n))).next(ue=>(h=ue,N=Date.now(),this.removeOrphanedDocuments(e,o))).next(ue=>(B=Date.now(),To()<=xe.Ge.DEBUG&&Ot("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-J}ms\n\tDetermined least recently used ${c} in `+(R-g)+`ms\n\tRemoved ${h} targets in `+(N-R)+`ms\n\tRemoved ${ue} documents in `+(B-N)+`ms\nTotal Duration: ${B-J}ms`),Qe.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:h,documentsRemoved:ue})))}}class ME{constructor(e,n){this.db=e,this.garbageCollector=function fy(i,e){return new bm(i,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(c=>o+c))}Zn(e){let n=0;return this.Jn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(o,c)=>n(c))}addReference(e,n,o){return sl(e,o)}removeReference(e,n,o){return sl(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return sl(e,n)}er(e,n){return function(c,h){let g=!1;return Bl(c).Z(R=>Am(c,R,h).next(N=>(N&&(g=!0),Qe.resolve(!N)))).next(()=>g)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let h=0;return this.Xn(e,(g,R)=>{if(R<=n){const N=this.er(e,g).next(B=>{if(!B)return h++,o.getEntry(e,g).next(()=>(o.removeEntry(g,fn.min()),il(e).delete([0,qi(g.path)])))});c.push(N)}}).next(()=>Qe.waitFor(c)).next(()=>o.apply(e)).next(()=>h)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return sl(e,n)}Xn(e,n){const o=il(e);let c,h=Vt._e;return o.Y({index:"documentTargetsIndex"},([g,R],{path:N,sequenceNumber:B})=>{0===g?(h!==Vt._e&&n(new Ht(mo(c)),h),h=B,c=N):h=Vt._e}).next(()=>{h!==Vt._e&&n(new Ht(mo(c)),h)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function sl(i,e){return il(i).put((c=i.currentSequenceNumber,{targetId:0,path:qi(e.path),sequenceNumber:c}));var c}class Rm{constructor(){this.changes=new ms(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?Qe.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class py{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return $l(e).put(o)}removeEntry(e,n,o){return $l(e).delete(function(h,g){const R=h.path.toArray();return[R.slice(0,R.length-2),R[R.length-2],Id(g),R[R.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.tr(e,o)))}getEntry(e,n){let o=Vi.newInvalidDocument(n);return $l(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_h(n))},(c,h)=>{o=this.nr(n,h)}).next(()=>o)}rr(e,n){let o={size:0,document:Vi.newInvalidDocument(n)};return $l(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_h(n))},(c,h)=>{o={document:this.nr(n,h),size:mh(h)}}).next(()=>o)}getEntries(e,n){let o=yo();return this.ir(e,n,(c,h)=>{const g=this.nr(c,h);o=o.insert(c,g)}).next(()=>o)}sr(e,n){let o=yo(),c=new Ci(Ht.comparator);return this.ir(e,n,(h,g)=>{const R=this.nr(h,g);o=o.insert(h,R),c=c.insert(h,mh(g))}).next(()=>({documents:o,_r:c}))}ir(e,n,o){if(n.isEmpty())return Qe.resolve();let c=new cr(yh);n.forEach(N=>c=c.add(N));const h=IDBKeyRange.bound(_h(c.first()),_h(c.last())),g=c.getIterator();let R=g.getNext();return $l(e).Y({index:"documentKeyIndex",range:h},(N,B,J)=>{const ue=Ht.fromSegments([...B.prefixPath,B.collectionGroup,B.documentId]);for(;R&&yh(R,ue)<0;)o(R,null),R=g.getNext();R&&R.isEqual(ue)&&(o(R,B),R=g.hasNext()?g.getNext():null),R?J.U(_h(R)):J.done()}).next(()=>{for(;R;)o(R,null),R=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,n,o,c,h){const g=n.path,R=[g.popLast().toArray(),g.lastSegment(),Id(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],N=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $l(e).W(IDBKeyRange.bound(R,N,!0)).next(B=>{h?.incrementDocumentReadCount(B.length);let J=yo();for(const ue of B){const Pe=this.nr(Ht.fromSegments(ue.prefixPath.concat(ue.collectionGroup,ue.documentId)),ue);Pe.isFoundDocument()&&(cn(n,Pe)||c.has(Pe.key))&&(J=J.insert(Pe.key,Pe))}return J})}getAllFromCollectionGroup(e,n,o,c){let h=yo();const g=Nm(n,o),R=Nm(n,Cs.max());return $l(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,R,!0)},(N,B,J)=>{const ue=this.nr(Ht.fromSegments(B.prefixPath.concat(B.collectionGroup,B.documentId)),B);h=h.insert(ue.key,ue),h.size===c&&J.done()}).next(()=>h)}newChangeBuffer(e){return new Om(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return xm(e).get("remoteDocumentGlobalKey").next(n=>(un(!!n),n))}tr(e,n){return xm(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const o=function _f(i,e){let n;if(e.document)n=oh(i.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Ht.fromSegments(e.noDocument.path),c=tl(e.noDocument.readTime);n=Vi.newNoDocument(o,c),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return nn();{const o=Ht.fromSegments(e.unknownDocument.path),c=tl(e.unknownDocument.version);n=Vi.newUnknownDocument(o,c)}}return e.readTime&&n.setReadTime(function(c){const h=new gi(c[0],c[1]);return fn.fromTimestamp(h)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(fn.min()))return o}return Vi.newInvalidDocument(e)}}function Mm(i){return new py(i)}class Om extends Rm{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new ms(o=>o.toString(),(o,c)=>o.isEqual(c))}applyChanges(e){const n=[];let o=0,c=new cr((h,g)=>Sn(h.canonicalString(),g.canonicalString()));return this.changes.forEach((h,g)=>{const R=this.ur.get(h);if(n.push(this.ar.removeEntry(e,h,R.readTime)),g.isValidDocument()){const N=ch(this.ar.serializer,g);c=c.add(h.path.popLast());const B=mh(N);o+=B-R.size,n.push(this.ar.addEntry(e,h,N))}else if(o-=R.size,this.trackRemovals){const N=ch(this.ar.serializer,g.convertToNoDocument(fn.min()));n.push(this.ar.addEntry(e,h,N))}}),c.forEach(h=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,h))}),n.push(this.ar.updateMetadata(e,o)),Qe.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(o=>(this.ur.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:o,_r:c})=>(c.forEach((h,g)=>{this.ur.set(h,{size:g,readTime:o.get(h).readTime})}),o))}}function xm(i){return Gs(i,"remoteDocumentGlobal")}function $l(i){return Gs(i,"remoteDocumentsV14")}function _h(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Nm(i,e){const n=e.documentKey.path.toArray();return[i,Id(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function yh(i,e){const n=i.path.toArray(),o=e.path.toArray();let c=0;for(let h=0;h<n.length-2&&h<o.length-2;++h)if(c=Sn(n[h],o[h]),c)return c;return c=Sn(n.length,o.length),c||(c=Sn(n[n.length-2],o[o.length-2]),c||Sn(n[n.length-1],o[o.length-1]))}class km{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Lp{constructor(e,n,o,c){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=c}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(c=>(o=c,this.remoteDocumentCache.getEntry(e,n))).next(c=>(null!==o&&iu(o.mutation,c,ao.empty(),gi.now()),c))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,nr()).next(()=>o))}getLocalViewOfDocuments(e,n,o=nr()){const c=So();return this.populateOverlays(e,c,n).next(()=>this.computeViews(e,n,c,o).next(h=>{let g=uc();return h.forEach((R,N)=>{g=g.insert(R,N.overlayedDocument)}),g}))}getOverlayedDocuments(e,n){const o=So();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,nr()))}populateOverlays(e,n,o){const c=[];return o.forEach(h=>{n.has(h)||c.push(h)}),this.documentOverlayCache.getOverlays(e,c).next(h=>{h.forEach((g,R)=>{n.set(g,R)})})}computeViews(e,n,o,c){let h=yo();const g=Mu(),R=Mu();return n.forEach((N,B)=>{const J=o.get(B.key);c.has(B.key)&&(void 0===J||J.mutation instanceof dc)?h=h.insert(B.key,B):void 0!==J?(g.set(B.key,J.mutation.getFieldMask()),iu(J.mutation,B,J.mutation.getFieldMask(),gi.now())):g.set(B.key,ao.empty())}),this.recalculateAndSaveOverlays(e,h).next(N=>(N.forEach((B,J)=>g.set(B,J)),n.forEach((B,J)=>{var ue;return R.set(B,new km(J,null!==(ue=g.get(B))&&void 0!==ue?ue:null))}),R))}recalculateAndSaveOverlays(e,n){const o=Mu();let c=new Ci((g,R)=>g-R),h=nr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(g=>{for(const R of g)R.keys().forEach(N=>{const B=n.get(N);if(null===B)return;let J=o.get(N)||ao.empty();J=R.applyToLocalView(B,J),o.set(N,J);const ue=(c.get(R.batchId)||nr()).add(N);c=c.insert(R.batchId,ue)})}).next(()=>{const g=[],R=c.getReverseIterator();for(;R.hasNext();){const N=R.getNext(),B=N.key,J=N.value,ue=bc();J.forEach(Pe=>{if(!h.has(Pe)){const Je=Mc(n.get(Pe),o.get(Pe));null!==Je&&ue.set(Pe,Je),h=h.add(Pe)}}),g.push(this.documentOverlayCache.saveOverlays(e,B,ue))}return Qe.waitFor(g)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,c){return Ht.isDocumentKey((g=n).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):w(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,c):this.getDocumentsMatchingCollectionQuery(e,n,o,c);var g}getNextDocuments(e,n,o,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,c).next(h=>{const g=c-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,c-h.size):Qe.resolve(So());let R=-1,N=h;return g.next(B=>Qe.forEach(B,(J,ue)=>(R<ue.largestBatchId&&(R=ue.largestBatchId),h.get(J)?Qe.resolve():this.remoteDocumentCache.getEntry(e,J).next(Pe=>{N=N.insert(J,Pe)}))).next(()=>this.populateOverlays(e,B,h)).next(()=>this.computeViews(e,N,B,nr())).next(J=>({batchId:R,changes:pd(J)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ht(n)).next(o=>{let c=uc();return o.isFoundDocument()&&(c=c.insert(o.key,o)),c})}getDocumentsMatchingCollectionGroupQuery(e,n,o,c){const h=n.collectionGroup;let g=uc();return this.indexManager.getCollectionParents(e,h).next(R=>Qe.forEach(R,N=>{const B=(ue=n,Pe=N.child(h),new $a(Pe,null,ue.explicitOrderBy.slice(),ue.filters.slice(),ue.limit,ue.limitType,ue.startAt,ue.endAt));var ue,Pe;return this.getDocumentsMatchingCollectionQuery(e,B,o,c).next(J=>{J.forEach((ue,Pe)=>{g=g.insert(ue,Pe)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,n,o,c){let h;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(g=>(h=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,h,c))).next(g=>{h.forEach((N,B)=>{const J=B.getKey();null===g.get(J)&&(g=g.insert(J,Vi.newInvalidDocument(J)))});let R=uc();return g.forEach((N,B)=>{const J=h.get(N);void 0!==J&&iu(J.mutation,B,ao.empty(),gi.now()),cn(n,B)&&(R=R.insert(N,B))}),R})}}class Fm{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return Qe.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(c=n).id,version:c.version,createTime:Ui(c.createTime)}),Qe.resolve();var c}getNamedQuery(e,n){return Qe.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(c=n).name,query:Cd(c.bundledQuery),readTime:Ui(c.readTime)}),Qe.resolve();var c}}class Vp{constructor(){this.overlays=new Ci(Ht.comparator),this.hr=new Map}getOverlay(e,n){return Qe.resolve(this.overlays.get(n))}getOverlays(e,n){const o=So();return Qe.forEach(n,c=>this.getOverlay(e,c).next(h=>{null!==h&&o.set(c,h)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((c,h)=>{this.ht(e,n,h)}),Qe.resolve()}removeOverlaysForBatchId(e,n,o){const c=this.hr.get(o);return void 0!==c&&(c.forEach(h=>this.overlays=this.overlays.remove(h)),this.hr.delete(o)),Qe.resolve()}getOverlaysForCollection(e,n,o){const c=So(),h=n.length+1,g=new Ht(n.child("")),R=this.overlays.getIteratorFrom(g);for(;R.hasNext();){const N=R.getNext().value,B=N.getKey();if(!n.isPrefixOf(B.path))break;B.path.length===h&&N.largestBatchId>o&&c.set(N.getKey(),N)}return Qe.resolve(c)}getOverlaysForCollectionGroup(e,n,o,c){let h=new Ci((B,J)=>B-J);const g=this.overlays.getIterator();for(;g.hasNext();){const B=g.getNext().value;if(B.getKey().getCollectionGroup()===n&&B.largestBatchId>o){let J=h.get(B.largestBatchId);null===J&&(J=So(),h=h.insert(B.largestBatchId,J)),J.set(B.getKey(),B)}}const R=So(),N=h.getIterator();for(;N.hasNext()&&(N.getNext().value.forEach((B,J)=>R.set(B,J)),!(R.size()>=c)););return Qe.resolve(R)}ht(e,n,o){const c=this.overlays.get(o.key);if(null!==c){const g=this.hr.get(c.largestBatchId).delete(o.key);this.hr.set(c.largestBatchId,g)}this.overlays=this.overlays.insert(o.key,new af(n,o));let h=this.hr.get(n);void 0===h&&(h=nr(),this.hr.set(n,h)),this.hr.set(n,h.add(o.key))}}class Tf{constructor(){this.Pr=new cr(Eo.Ir),this.Tr=new cr(Eo.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const o=new Eo(e,n);this.Pr=this.Pr.add(o),this.Tr=this.Tr.add(o)}dr(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.Ar(new Eo(e,n))}Rr(e,n){e.forEach(o=>this.removeReference(o,n))}Vr(e){const n=new Ht(new Ur([])),o=new Eo(n,e),c=new Eo(n,e+1),h=[];return this.Tr.forEachInRange([o,c],g=>{this.Ar(g),h.push(g.key)}),h}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Ht(new Ur([])),o=new Eo(n,e),c=new Eo(n,e+1);let h=nr();return this.Tr.forEachInRange([o,c],g=>{h=h.add(g.key)}),h}containsKey(e){const n=new Eo(e,0),o=this.Pr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Eo{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Ht.comparator(e.key,n.key)||Sn(e.pr,n.pr)}static Er(e,n){return Sn(e.pr,n.pr)||Ht.comparator(e.key,n.key)}}class da{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new cr(Eo.Ir)}checkEmpty(e){return Qe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,c){const h=this.yr;this.yr++;const g=new nh(h,n,o,c);this.mutationQueue.push(g);for(const R of c)this.wr=this.wr.add(new Eo(R.key,h)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return Qe.resolve(g)}lookupMutationBatch(e,n){return Qe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const c=this.br(n+1),h=c<0?0:c;return Qe.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Eo(n,0),c=new Eo(n,Number.POSITIVE_INFINITY),h=[];return this.wr.forEachInRange([o,c],g=>{const R=this.Sr(g.pr);h.push(R)}),Qe.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new cr(Sn);return n.forEach(c=>{const h=new Eo(c,0),g=new Eo(c,Number.POSITIVE_INFINITY);this.wr.forEachInRange([h,g],R=>{o=o.add(R.pr)})}),Qe.resolve(this.Dr(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,c=o.length+1;let h=o;Ht.isDocumentKey(h)||(h=h.child(""));const g=new Eo(new Ht(h),0);let R=new cr(Sn);return this.wr.forEachWhile(N=>{const B=N.key.path;return!!o.isPrefixOf(B)&&(B.length===c&&(R=R.add(N.pr)),!0)},g),Qe.resolve(this.Dr(R))}Dr(e){const n=[];return e.forEach(o=>{const c=this.Sr(o);null!==c&&n.push(c)}),n}removeMutationBatch(e,n){un(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.wr;return Qe.forEach(n.mutations,c=>{const h=new Eo(c.key,n.batchId);return o=o.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.wr=o})}Mn(e){}containsKey(e,n){const o=new Eo(n,0),c=this.wr.firstAfterOrEqual(o);return Qe.resolve(n.isEqual(c&&c.key))}performConsistencyCheck(e){return Qe.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Df{constructor(e){this.vr=e,this.docs=new Ci(Ht.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,c=this.docs.get(o),h=c?c.size:0,g=this.vr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:g}),this.size+=g-h,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Qe.resolve(o?o.document.mutableCopy():Vi.newInvalidDocument(n))}getEntries(e,n){let o=yo();return n.forEach(c=>{const h=this.docs.get(c);o=o.insert(c,h?h.document.mutableCopy():Vi.newInvalidDocument(c))}),Qe.resolve(o)}getDocumentsMatchingQuery(e,n,o,c){let h=yo();const g=n.path,R=new Ht(g.child("")),N=this.docs.getIteratorFrom(R);for(;N.hasNext();){const{key:B,value:{document:J}}=N.getNext();if(!g.isPrefixOf(B.path))break;B.path.length>g.length+1||Hc(Lo(J),o)<=0||(c.has(J.key)||cn(n,J))&&(h=h.insert(J.key,J.mutableCopy()))}return Qe.resolve(h)}getAllFromCollectionGroup(e,n,o,c){nn()}Fr(e,n){return Qe.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new p(this)}getSize(e){return Qe.resolve(this.size)}}class p extends Rm{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((o,c)=>{c.isValidDocument()?n.push(this.ar.addEntry(e,c)):this.ar.removeEntry(o)}),Qe.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class d{constructor(e){this.persistence=e,this.Mr=new ms(n=>Aa(n),eu),this.lastRemoteSnapshotVersion=fn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Tf,this.targetCount=0,this.Br=jl.Nn()}forEachTarget(e,n){return this.Mr.forEach((o,c)=>n(c)),Qe.resolve()}getLastRemoteSnapshotVersion(e){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Qe.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Or&&(this.Or=n),Qe.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new jl(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,Qe.resolve()}updateTargetData(e,n){return this.qn(n),Qe.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(e,n,o){let c=0;const h=[];return this.Mr.forEach((g,R)=>{R.sequenceNumber<=n&&null===o.get(R.targetId)&&(this.Mr.delete(g),h.push(this.removeMatchingKeysForTargetId(e,R.targetId)),c++)}),Qe.waitFor(h).next(()=>c)}getTargetCount(e){return Qe.resolve(this.targetCount)}getTargetData(e,n){const o=this.Mr.get(n)||null;return Qe.resolve(o)}addMatchingKeys(e,n,o){return this.Nr.dr(n,o),Qe.resolve()}removeMatchingKeys(e,n,o){this.Nr.Rr(n,o);const c=this.persistence.referenceDelegate,h=[];return c&&n.forEach(g=>{h.push(c.markPotentiallyOrphaned(e,g))}),Qe.waitFor(h)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),Qe.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Nr.gr(n);return Qe.resolve(o)}containsKey(e,n){return Qe.resolve(this.Nr.containsKey(n))}}class l{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Vt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new d(this),this.indexManager=new RE,this.remoteDocumentCache=new Df(o=>this.referenceDelegate.Kr(o)),this.serializer=new mf(n),this.$r=new Fm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Vp,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Lr[e.toKey()];return o||(o=new da(n,this.referenceDelegate),this.Lr[e.toKey()]=o),o}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,o){Ot("MemoryPersistence","Starting transaction:",e);const c=new y(this.kr.next());return this.referenceDelegate.Ur(),o(c).next(h=>this.referenceDelegate.Wr(c).next(()=>h)).toPromise().then(h=>(c.raiseOnCommittedEvent(),h))}Gr(e,n){return Qe.or(Object.values(this.Lr).map(o=>()=>o.containsKey(e,n)))}}class y extends yc{constructor(e){super(),this.currentSequenceNumber=e}}class b{constructor(e){this.persistence=e,this.zr=new Tf,this.jr=null}static Hr(e){return new b(e)}get Jr(){if(this.jr)return this.jr;throw nn()}addReference(e,n,o){return this.zr.addReference(o,n),this.Jr.delete(o.toString()),Qe.resolve()}removeReference(e,n,o){return this.zr.removeReference(o,n),this.Jr.add(o.toString()),Qe.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),Qe.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(c=>this.Jr.add(c.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(c=>{c.forEach(h=>this.Jr.add(h.toString()))}).next(()=>o.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Jr,o=>{const c=Ht.fromPath(o);return this.Yr(e,c).next(h=>{h||n.removeEntry(c,fn.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(o=>{o?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return Qe.or([()=>Qe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class ${constructor(e){this.serializer=e}N(e,n,o,c){const h=new gr("createOrUpgrade",n);var N;o<1&&c>=1&&(e.createObjectStore("owner"),(N=e).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Do,{unique:!0}),N.createObjectStore("documentMutations"),se(e),function(N){N.createObjectStore("remoteDocuments")}(e));let g=Qe.resolve();return o<3&&c>=3&&(0!==o&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(e),se(e)),g=g.next(()=>function(N){const B=N.store("targetGlobal"),J={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fn.min().toTimestamp(),targetCount:0};return B.put("targetGlobalKey",J)}(h))),o<4&&c>=4&&(0!==o&&(g=g.next(()=>function(N,B){return B.store("mutations").W().next(J=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Do,{unique:!0});const ue=B.store("mutations"),Pe=J.map(Je=>ue.put(Je));return Qe.waitFor(Pe)})}(e,h))),g=g.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&c>=5&&(g=g.next(()=>this.Xr(h))),o<6&&c>=6&&(g=g.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(e),this.ei(h)))),o<7&&c>=7&&(g=g.next(()=>this.ti(h))),o<8&&c>=8&&(g=g.next(()=>this.ni(e,h))),o<9&&c>=9&&(g=g.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&c>=10&&(g=g.next(()=>this.ri(h))),o<11&&c>=11&&(g=g.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&c>=12&&(g=g.next(()=>{!function(N){const B=N.createObjectStore("documentOverlays",{keyPath:Wd});B.createIndex("collectionPathOverlayIndex",oo,{unique:!1}),B.createIndex("collectionGroupOverlayIndex",zu,{unique:!1})}(e)})),o<13&&c>=13&&(g=g.next(()=>function(N){const B=N.createObjectStore("remoteDocumentsV14",{keyPath:gp});B.createIndex("documentKeyIndex",qc),B.createIndex("collectionGroupIndex",ir)}(e)).next(()=>this.ii(e,h)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&c>=14&&(g=g.next(()=>this.si(e,h))),o<15&&c>=15&&(g=g.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:Gd}).createIndex("sequenceNumberIndex",sd,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:El}).createIndex("documentKeyIndex",od,{unique:!1})}(e))),g}ei(e){let n=0;return e.store("remoteDocuments").Y((o,c)=>{n+=mh(c)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Xr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(c=>Qe.forEach(c,h=>{const g=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",g).next(R=>Qe.forEach(R,N=>{un(N.userId===h.userId);const B=Nl(this.serializer,N);return Dm(e,h.userId,B).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const h=[];return o.Y((g,R)=>{const N=new Ur(g),B=[0,qi(N)];h.push(n.get(B).next(J=>J?Qe.resolve():n.put({targetId:0,path:qi(N),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>Qe.waitFor(h))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:$d});const o=n.store("collectionParents"),c=new wm,h=g=>{if(c.add(g)){const R=g.lastSegment(),N=g.popLast();return o.put({collectionId:R,parent:qi(N)})}};return n.store("remoteDocuments").Y({J:!0},(g,R)=>{const N=new Ur(g);return h(N.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([g,R,N],B)=>{const J=mo(R);return h(J.popLast())}))}ri(e){const n=e.store("targets");return n.Y((o,c)=>{const h=yf(c),g=uh(this.serializer,h);return n.put(g)})}ii(e,n){const o=n.store("remoteDocuments"),c=[];return o.Y((h,g)=>{const R=n.store("remoteDocumentsV14"),N=(ue=g,ue.document?new Ht(Ur.fromString(ue.document.name).popFirst(5)):ue.noDocument?Ht.fromSegments(ue.noDocument.path):ue.unknownDocument?Ht.fromSegments(ue.unknownDocument.path):nn()).path.toArray(),B={prefixPath:N.slice(0,N.length-2),collectionGroup:N[N.length-2],documentId:N[N.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var ue;c.push(R.put(B))}).next(()=>Qe.waitFor(c))}si(e,n){const o=n.store("mutations"),c=Mm(this.serializer),h=new l(b.Hr,this.serializer.ct);return o.W().next(g=>{const R=new Map;return g.forEach(N=>{var B;let J=null!==(B=R.get(N.userId))&&void 0!==B?B:nr();Nl(this.serializer,N).keys().forEach(ue=>J=J.add(ue)),R.set(N.userId,J)}),Qe.forEach(R,(N,B)=>{const J=new Jn(B),ue=vf.lt(this.serializer,J),Pe=h.getIndexManager(J),Je=Ul.lt(J,this.serializer,Pe,h.referenceDelegate);return new Lp(c,Je,ue,Pe).recalculateAndSaveOverlaysForDocumentKeys(new Yc(n,Vt._e),N).next()})})}}function se(i){i.createObjectStore("targetDocuments",{keyPath:jd}).createIndex("documentTargetsIndex",Kh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xr,{unique:!0}),i.createObjectStore("targetGlobal")}const _e="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class De{constructor(e,n,o,c,h,g,R,N,B,J,ue=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.oi=h,this.window=g,this.document=R,this._i=B,this.ai=J,this.ui=ue,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=Pe=>Promise.resolve(),!De.D())throw new St(ct.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ME(this,c),this.Ti=n+"main",this.serializer=new mf(N),this.Ei=new cs(this.Ti,this.ui,new $(this.serializer)),this.Qr=new dy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Mm(this.serializer),this.$r=new Pp,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===J&&Jr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new St(ct.FAILED_PRECONDITION,_e);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Vt(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var o=(0,de.c)(function*(c){if(n.started)return e(c)});return function(c){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var n=(0,de.c)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,de.c)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>vt(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(T(e))return Ot("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ot("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return yt(e).get("owner").next(n=>Qe.resolve(this.Si(n)))}bi(e){return vt(e).delete(this.clientId)}Di(){var e=this;return(0,de.c)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const c=Gs(o,"clientMetadata");return c.W().next(h=>{const g=e.vi(h,18e5),R=h.filter(N=>-1===g.indexOf(N));return Qe.forEach(R,N=>c.delete(N.clientId)).next(()=>R)})}).catch(()=>[]);if(e.di)for(const o of n)e.di.removeItem(e.Fi(o.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Qe.resolve(!0):yt(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new St(ct.FAILED_PRECONDITION,_e);return!1}}return!(!this.networkEnabled||!this.inForeground)||vt(e).W().next(o=>void 0===this.vi(o,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Ot("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,de.c)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Yc(n,Vt._e);return e.yi(o).next(()=>e.bi(o))}),e.Ei.close(),e.Bi()})()}vi(e,n){return e.filter(o=>this.Ci(o.updateTimeMs,n)&&!this.Mi(o.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>vt(e).W().next(n=>this.vi(n,18e5).map(o=>o.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Ul.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Np(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return vf.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,o){Ot("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===n?"readonly":"readwrite",h=15===(N=this.ui)?Cu:14===N?Kc:13===N?vc:12===N?Yh:11===N?qu:void nn();var N;let g;return this.Ei.runTransaction(e,c,h,R=>(g=new Yc(R,this.kr?this.kr.next():Vt._e),"readwrite-primary"===n?this.gi(g).next(N=>!!N||this.pi(g)).next(N=>{if(!N)throw Jr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new St(ct.FAILED_PRECONDITION,tc);return o(g)}).next(N=>this.wi(g).next(()=>N)):this.ki(g).next(()=>o(g)))).then(R=>(g.raiseOnCommittedEvent(),R))}ki(e){return yt(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new St(ct.FAILED_PRECONDITION,_e)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yt(e).put("owner",n)}static D(){return cs.D()}yi(e){const n=yt(e);return n.get("owner").next(o=>this.Si(o)?(Ot("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Qe.resolve())}Ci(e,n){const o=Date.now();return!(e<o-n||e>o&&(Jr(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,Et.qk)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const o=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return Ot("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Jr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Jr("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yt(i){return Gs(i,"owner")}function vt(i){return Gs(i,"clientMetadata")}function Pt(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class pn{constructor(e,n,o,c){this.targetId=e,this.fromCache=n,this.qi=o,this.Qi=c}static Ki(e,n){let o=nr(),c=nr();for(const h of n.docChanges)switch(h.type){case 0:o=o.add(h.doc.key);break;case 1:c=c.add(h.doc.key)}return new pn(e,n.fromCache,o,c)}}class jn{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mi{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,Et.qk)()?8:cs.v((0,Et.Su)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,o,c){const h={result:null};return this.ji(e,n).next(g=>{h.result=g}).next(()=>{if(!h.result)return this.Hi(e,n,c,o).next(g=>{h.result=g})}).next(()=>{if(h.result)return;const g=new jn;return this.Ji(e,n,g).next(R=>{if(h.result=R,this.Ui)return this.Yi(e,n,g,R.size)})}).next(()=>h.result)}Yi(e,n,o,c){return o.documentReadCount<this.Wi?(To()<=xe.Ge.DEBUG&&Ot("QueryEngine","SDK will not create cache indexes for query:",At(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Qe.resolve()):(To()<=xe.Ge.DEBUG&&Ot("QueryEngine","Query:",At(n),"scans",o.documentReadCount,"local documents and returns",c,"documents as results."),o.documentReadCount>this.Gi*c?(To()<=xe.Ge.DEBUG&&Ot("QueryEngine","The SDK decides to create cache indexes for query:",At(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,v(n))):Qe.resolve())}ji(e,n){if(Ru(n))return Qe.resolve(null);let o=v(n);return this.indexManager.getIndexType(e,o).next(c=>0===c?null:(null!==n.limit&&1===c&&(n=re(n,null,"F"),o=v(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(h=>{const g=nr(...h);return this.zi.getDocuments(e,g).next(R=>this.indexManager.getMinOffset(e,o).next(N=>{const B=this.Zi(n,R);return this.Xi(n,B,g,N.readTime)?this.ji(e,re(n,null,"F")):this.es(e,B,n,N)}))})))}Hi(e,n,o,c){return Ru(n)||c.isEqual(fn.min())?Qe.resolve(null):this.zi.getDocuments(e,o).next(h=>{const g=this.Zi(n,h);return this.Xi(n,g,o,c)?Qe.resolve(null):(To()<=xe.Ge.DEBUG&&Ot("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),At(n)),this.es(e,g,n,ri(c,-1)).next(R=>R))})}Zi(e,n){let o=new cr(tr(e));return n.forEach((c,h)=>{cn(e,h)&&(o=o.add(h))}),o}Xi(e,n,o,c){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const h="F"===e.limitType?n.last():n.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(c)>0)}Ji(e,n,o){return To()<=xe.Ge.DEBUG&&Ot("QueryEngine","Using full collection scan to execute query:",At(n)),this.zi.getDocumentsMatchingQuery(e,n,Cs.min(),o)}es(e,n,o,c){return this.zi.getDocumentsMatchingQuery(e,o,c).next(h=>(n.forEach(g=>{h=h.insert(g.key,g)}),h))}}class uo{constructor(e,n,o,c){this.persistence=e,this.ts=n,this.serializer=c,this.ns=new Ci(Sn),this.rs=new ms(h=>Aa(h),eu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(o)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function Gl(i,e,n,o){return new uo(i,e,n,o)}function vh(i,e){return ol.apply(this,arguments)}function ol(){return ol=(0,de.c)(function*(i,e){const n=jt(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let c;return n.mutationQueue.getAllMutationBatches(o).next(h=>(c=h,n._s(e),n.mutationQueue.getAllMutationBatches(o))).next(h=>{const g=[],R=[];let N=nr();for(const B of c){g.push(B.batchId);for(const J of B.mutations)N=N.add(J.key)}for(const B of h){R.push(B.batchId);for(const J of B.mutations)N=N.add(J.key)}return n.localDocuments.getDocuments(o,N).next(B=>({us:B,removedBatchIds:g,addedBatchIds:R}))})})}),ol.apply(this,arguments)}function OE(i){const e=jt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function xE(i,e,n){let o=nr(),c=nr();return n.forEach(h=>o=o.add(h)),e.getEntries(i,o).next(h=>{let g=yo();return n.forEach((R,N)=>{const B=h.get(R);N.isFoundDocument()!==B.isFoundDocument()&&(c=c.add(R)),N.isNoDocument()&&N.version.isEqual(fn.min())?(e.removeEntry(R,N.readTime),g=g.insert(R,N)):!B.isValidDocument()||N.version.compareTo(B.version)>0||0===N.version.compareTo(B.version)&&B.hasPendingWrites?(e.addEntry(N),g=g.insert(R,N)):Ot("LocalStore","Ignoring outdated watch update for ",R,". Current version:",B.version," Watch version:",N.version)}),{cs:g,ls:c}})}function t0(i,e){const n=jt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Eh(i,e){const n=jt(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let c;return n.Qr.getTargetData(o,e).next(h=>h?(c=h,Qe.resolve(c)):n.Qr.allocateTargetId(o).next(g=>(c=new Ga(e,g,"TargetPurposeListen",o.currentSequenceNumber),n.Qr.addTargetData(o,c).next(()=>c))))}).then(o=>{const c=n.ns.get(o.targetId);return(null===c||o.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(n.ns=n.ns.insert(o.targetId,o),n.rs.set(e,o.targetId)),o})}function al(i,e,n){return Ih.apply(this,arguments)}function Ih(){return Ih=(0,de.c)(function*(i,e,n){const o=jt(i),c=o.ns.get(e),h=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",h,g=>o.persistence.referenceDelegate.removeTarget(g,c)))}catch(g){if(!T(g))throw g;Ot("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}o.ns=o.ns.remove(e),o.rs.delete(c.target)}),Ih.apply(this,arguments)}function Ch(i,e,n){const o=jt(i);let c=fn.min(),h=nr();return o.persistence.runTransaction("Execute query","readwrite",g=>function(N,B,J){const ue=jt(N),Pe=ue.rs.get(J);return void 0!==Pe?Qe.resolve(ue.ns.get(Pe)):ue.Qr.getTargetData(B,J)}(o,g,v(e)).next(R=>{if(R)return c=R.lastLimboFreeSnapshotVersion,o.Qr.getMatchingKeysForTargetId(g,R.targetId).next(N=>{h=N})}).next(()=>o.ts.getDocumentsMatchingQuery(g,e,n?c:fn.min(),n?h:nr())).next(R=>(my(o,Pn(e),R),{documents:R,hs:h})))}function Lm(i,e){const n=jt(i),o=jt(n.Qr),c=n.ns.get(e);return c?Promise.resolve(c.target):n.persistence.runTransaction("Get target data","readonly",h=>o._t(h,e).next(g=>g?g.target:null))}function Vm(i,e){const n=jt(i),o=n.ss.get(e)||fn.min();return n.persistence.runTransaction("Get new document changes","readonly",c=>n.os.getAllFromCollectionGroup(c,e,ri(o,-1),Number.MAX_SAFE_INTEGER)).then(c=>(my(n,e,c),c))}function my(i,e,n){let o=i.ss.get(e)||fn.min();n.forEach((c,h)=>{h.readTime.compareTo(o)>0&&(o=h.readTime)}),i.ss.set(e,o)}function Up(){return Up=(0,de.c)(function*(i,e,n,o){const c=jt(i);let h=nr(),g=yo();for(const B of n){const J=e.Ps(B.metadata.name);B.document&&(h=h.add(J));const ue=e.Is(B);ue.setReadTime(e.Ts(B.metadata.readTime)),g=g.insert(J,ue)}const R=c.os.newChangeBuffer({trackRemovals:!0}),N=yield Eh(c,(J=o,v(cc(Ur.fromString(`__bundle__/docs/${J}`)))));var J;return c.persistence.runTransaction("Apply bundle documents","readwrite",B=>xE(B,R,g).next(J=>(R.apply(B),J)).next(J=>c.Qr.removeMatchingKeysForTargetId(B,N.targetId).next(()=>c.Qr.addMatchingKeys(B,h,N.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(B,J.cs,J.ls)).next(()=>J.cs)))}),Up.apply(this,arguments)}function wh(i,e){return Pa.apply(this,arguments)}function Pa(){return Pa=(0,de.c)(function*(i,e,n=nr()){const o=yield Eh(i,v(Cd(e.bundledQuery))),c=jt(i);return c.persistence.runTransaction("Save named query","readwrite",h=>{const g=Ui(e.readTime);if(o.snapshotVersion.compareTo(g)>=0)return c.$r.saveNamedQuery(h,e);const R=o.withResumeToken(ws.EMPTY_BYTE_STRING,g);return c.ns=c.ns.insert(R.targetId,R),c.Qr.updateTargetData(h,R).next(()=>c.Qr.removeMatchingKeysForTargetId(h,o.targetId)).next(()=>c.Qr.addMatchingKeys(h,n,o.targetId)).next(()=>c.$r.saveNamedQuery(h,e))})}),Pa.apply(this,arguments)}function cl(i,e){return`firestore_clients_${i}_${e}`}function Um(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function _y(i,e){return`firestore_targets_${i}_${e}`}class Bp{constructor(e,n,o,c){this.user=e,this.batchId=n,this.state=o,this.error=c}static Es(e,n,o){const c=JSON.parse(o);let h,g="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return g&&c.error&&(g="string"==typeof c.error.message&&"string"==typeof c.error.code,g&&(h=new St(c.error.code,c.error.message))),g?new Bp(e,n,c.state,h):(Jr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jp{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Es(e,n){const o=JSON.parse(n);let c,h="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(c=new St(o.error.code,o.error.message))),h?new jp(e,o.state,c):(Jr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bm{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const o=JSON.parse(n);let c="object"==typeof o&&o.activeTargetIds instanceof Array,h=Rc();for(let g=0;c&&g<o.activeTargetIds.length;++g)c=Ri(o.activeTargetIds[g]),h=h.add(o.activeTargetIds[g]);return c?new Bm(e,h):(Jr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class $p{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new $p(n.clientId,n.onlineState):(Jr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Gp{constructor(){this.activeTargetIds=Rc()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yy{constructor(e,n,o,c,h){this.window=e,this.oi=n,this.persistenceKey=o,this.Vs=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ci(Sn),this.started=!1,this.ys=[];const g=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.ws=cl(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new Gp),this.bs=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,de.c)(function*(){const n=yield e.syncEngine.Li();for(const c of n){if(c===e.Vs)continue;const h=e.getItem(cl(e.persistenceKey,c));if(h){const g=Bm.Es(c,h);g&&(e.ps=e.ps.insert(g.clientId,g))}}e.Ms();const o=e.storage.getItem(e.vs);if(o){const c=e.xs(o);c&&e.Os(c)}for(const c of e.ys)e.gs(c);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((o,c)=>{c.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,o){this.Bs(e,n,o),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(_y(this.persistenceKey,e));if(o){const c=jp.Es(e,o);c&&(n=c.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_y(this.persistenceKey,e))}updateQueryState(e,n,o){this.qs(e,n,o)}handleUserChange(e,n,o){n.forEach(c=>{this.Ls(c)}),this.currentUser=e,o.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ot("SharedClientState","READ",e,n),n}setItem(e,n){Ot("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ot("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(Ot("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ws)return void Jr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,de.c)(function*(){if(n.started){if(null!==o.key)if(n.bs.test(o.key)){if(null==o.newValue){const c=n.$s(o.key);return n.Us(c,null)}{const c=n.Ws(o.key,o.newValue);if(c)return n.Us(c.clientId,c)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const c=n.Gs(o.key,o.newValue);if(c)return n.zs(c)}}else if(n.Cs.test(o.key)){if(null!==o.newValue){const c=n.js(o.key,o.newValue);if(c)return n.Hs(c)}}else if(o.key===n.vs){if(null!==o.newValue){const c=n.xs(o.newValue);if(c)return n.Os(c)}}else if(o.key===n.Ss){const c=function(g){let R=Vt._e;if(null!=g)try{const N=JSON.parse(g);un("number"==typeof N),R=N}catch(N){Jr("SharedClientState","Failed to read sequence number from WebStorage",N)}return R}(o.newValue);c!==Vt._e&&n.sequenceNumberHandler(c)}else if(o.key===n.Fs){const c=n.Js(o.newValue);yield Promise.all(c.map(h=>n.syncEngine.Ys(h)))}}else n.ys.push(o)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,o){const c=new Bp(this.currentUser,e,n,o),h=Um(this.persistenceKey,this.currentUser,e);this.setItem(h,c.ds())}Ls(e){const n=Um(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,o){const c=_y(this.persistenceKey,e),h=new jp(e,n,o);this.setItem(c,h.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const o=this.$s(e);return Bm.Es(o,n)}Gs(e,n){const o=this.Ds.exec(e),c=Number(o[1]);return Bp.Es(new Jn(void 0!==o[2]?o[2]:null),c,n)}js(e,n){const o=this.Cs.exec(e),c=Number(o[1]);return jp.Es(c,n)}xs(e){return $p.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,de.c)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);Ot("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const o=n?this.ps.insert(e,n):this.ps.remove(e),c=this.Ns(this.ps),h=this.Ns(o),g=[],R=[];return h.forEach(N=>{c.has(N)||g.push(N)}),c.forEach(N=>{h.has(N)||R.push(N)}),this.syncEngine.eo(g,R).then(()=>{this.ps=o})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Rc();return e.forEach((o,c)=>{n=n.unionWith(c.activeTargetIds)}),n}}class Af{constructor(){this.no=new Gp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,o){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Gp,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jm{io(e){}shutdown(){}}class Wp{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Hp=null;function Wl(){return null===Hp?Hp=268435456+Math.round(2147483648*Math.random()):Hp++,"0x"+Hp.toString(16)}const zp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vy{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const jo="WebChannelConnection";class qp extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",c=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.fo=o+"://"+n.host,this.po=`projects/${c}/databases/${h}`,this.yo="(default)"===this.databaseId.database?`project_id=${c}`:`project_id=${c}&database_id=${h}`}get wo(){return!1}So(n,o,c,h,g){const R=Wl(),N=this.bo(n,o.toUriEncodedString());Ot("RestConnection",`Sending RPC '${n}' ${R}:`,N,c);const B={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(B,h,g),this.Co(n,N,B,c).then(J=>(Ot("RestConnection",`Received RPC '${n}' ${R}: `,J),J),J=>{throw no("RestConnection",`RPC '${n}' ${R} failed with error: `,J,"url: ",N,"request:",c),J})}vo(n,o,c,h,g,R){return this.So(n,o,c,h,g)}Do(n,o,c){n["X-Goog-Api-Client"]="gl-js/ fire/"+ui,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((h,g)=>n[g]=h),c&&c.headers.forEach((h,g)=>n[g]=h)}bo(n,o){return`${this.fo}/v1/${o}:${zp[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,o,c){const h=Wl();return new Promise((g,R)=>{const N=new as;N.setWithCredentials(!0),N.listenOnce(Gr.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case Xr.NO_ERROR:const J=N.getResponseJson();Ot(jo,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(J)),g(J);break;case Xr.TIMEOUT:Ot(jo,`RPC '${e}' ${h} timed out`),R(new St(ct.DEADLINE_EXCEEDED,"Request time out"));break;case Xr.HTTP_ERROR:const ue=N.getStatus();if(Ot(jo,`RPC '${e}' ${h} failed with status:`,ue,"response text:",N.getResponseText()),ue>0){let Pe=N.getResponseJson();Array.isArray(Pe)&&(Pe=Pe[0]);const Je=Pe?.error;if(Je&&Je.status&&Je.message){const Ut=function(Qt){const xn=Qt.toLowerCase().replace(/_/g,"-");return Object.values(ct).indexOf(xn)>=0?xn:ct.UNKNOWN}(Je.status);R(new St(Ut,Je.message))}else R(new St(ct.UNKNOWN,"Server responded with status "+N.getStatus()))}else R(new St(ct.UNAVAILABLE,"Connection failed."));break;default:nn()}}finally{Ot(jo,`RPC '${e}' ${h} completed.`)}});const B=JSON.stringify(c);Ot(jo,`RPC '${e}' ${h} sending request:`,c),N.send(n,"POST",B,o,15)})}Fo(e,n,o){const c=Wl(),h=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=pt(),R=an(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},B=this.longPollingOptions.timeoutSeconds;void 0!==B&&(N.longPollingTimeout=Math.round(1e3*B)),this.useFetchStreams&&(N.useFetchStreams=!0),this.Do(N.initMessageHeaders,n,o),N.encodeInitMessageHeaders=!0;const J=h.join("");Ot(jo,`Creating RPC '${e}' stream ${c}: ${J}`,N);const ue=g.createWebChannel(J,N);let Pe=!1,Je=!1;const Ut=new vy({lo:Qt=>{Je?Ot(jo,`Not sending because RPC '${e}' stream ${c} is closed:`,Qt):(Pe||(Ot(jo,`Opening RPC '${e}' stream ${c} transport.`),ue.open(),Pe=!0),Ot(jo,`RPC '${e}' stream ${c} sending:`,Qt),ue.send(Qt))},ho:()=>ue.close()}),Jt=(Qt,xn,_r)=>{Qt.listen(xn,Nn=>{try{_r(Nn)}catch(Dn){setTimeout(()=>{throw Dn},0)}})};return Jt(ue,Pr.EventType.OPEN,()=>{Je||Ot(jo,`RPC '${e}' stream ${c} transport opened.`)}),Jt(ue,Pr.EventType.CLOSE,()=>{Je||(Je=!0,Ot(jo,`RPC '${e}' stream ${c} transport closed`),Ut.Vo())}),Jt(ue,Pr.EventType.ERROR,Qt=>{Je||(Je=!0,no(jo,`RPC '${e}' stream ${c} transport errored:`,Qt),Ut.Vo(new St(ct.UNAVAILABLE,"The operation could not be completed")))}),Jt(ue,Pr.EventType.MESSAGE,Qt=>{var xn;if(!Je){const _r=Qt.data[0];un(!!_r);const Dn=_r.error||(null===(xn=_r[0])||void 0===xn?void 0:xn.error);if(Dn){Ot(jo,`RPC '${e}' stream ${c} received error:`,Dn);const _i=Dn.status;let Mi=function(Wh){const up=us[Wh];if(void 0!==up)return hc(up)}(_i),Hr=Dn.message;void 0===Mi&&(Mi=ct.INTERNAL,Hr="Unknown error status: "+_i+" with message "+Dn.message),Je=!0,Ut.Vo(new St(Mi,Hr)),ue.close()}else Ot(jo,`RPC '${e}' stream ${c} received:`,_r),Ut.mo(_r)}}),Jt(R,ni.STAT_EVENT,Qt=>{Qt.stat===Kn.PROXY?Ot(jo,`RPC '${e}' stream ${c} detected buffering proxy`):Qt.stat===Kn.NOPROXY&&Ot(jo,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{Ut.Ro()},0),Ut}}function Ey(){return typeof window<"u"?window:null}function Kp(){return typeof document<"u"?document:null}function Th(i){return new Ol(i,!0)}class $m{constructor(e,n,o=1e3,c=1.5,h=6e4){this.oi=e,this.timerId=n,this.Mo=o,this.xo=c,this.Oo=h,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),o=Math.max(0,Date.now()-this.Lo),c=Math.max(0,n-o);c>0&&Ot("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,c,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Iy{constructor(e,n,o,c,h,g,R,N){this.oi=e,this.$o=o,this.Uo=c,this.connection=h,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=R,this.listener=N,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new $m(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,de.c)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,de.c)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var o=this;return(0,de.c)(function*(){o.n_(),o.r_(),o.jo.cancel(),o.Wo++,4!==e?o.jo.reset():n&&n.code===ct.RESOURCE_EXHAUSTED?(Jr(n.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),o.jo.ko()):n&&n.code===ct.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.i_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,c])=>{this.Wo===n&&this.o_(o,c)},o=>{e(()=>{const c=new St(ct.UNKNOWN,"Fetching auth token failed: "+o.message);return this.__(c)})})}o_(e,n){const o=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{o(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(c=>{o(()=>this.__(c))}),this.stream.onMessage(c=>{o(()=>this.onMessage(c))})}Yo(){var e=this;this.state=5,this.jo.qo((0,de.c)(function*(){e.state=0,e.start()}))}__(e){return Ot("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(Ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kE extends Iy{constructor(e,n,o,c,h,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,c,g),this.serializer=h}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function oy(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(B=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:nn(),c=e.targetChange.targetIds||[],h=function(B,J){return B.useProto3Json?(un(void 0===J||"string"==typeof J),ws.fromBase64String(J||"")):(un(void 0===J||J instanceof Uint8Array),ws.fromUint8Array(J||new Uint8Array))}(i,e.targetChange.resumeToken),g=e.targetChange.cause,R=g&&function(B){const J=void 0===B.code?ct.UNKNOWN:hc(B.code);return new St(J,B.message||"")}(g);n=new uf(o,c,h,R||null)}else if("documentChange"in e){const o=e.documentChange,c=au(i,o.document.name),h=Ui(o.document.updateTime),g=o.document.createTime?Ui(o.document.createTime):fn.min(),R=new Zi({mapValue:{fields:o.document.fields}}),N=Vi.newFoundDocument(c,h,g,R);n=new bl(o.targetIds||[],o.removedTargetIds||[],N.key,N)}else if("documentDelete"in e){const o=e.documentDelete,c=au(i,o.document),h=o.readTime?Ui(o.readTime):fn.min(),g=Vi.newNoDocument(c,h);n=new bl([],o.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const o=e.documentRemove,c=au(i,o.document);n=new bl([],o.removedTargetIds||[],c,null)}else{if(!("filter"in e))return nn();{const o=e.filter,{count:c=0,unchangedNames:h}=o,g=new _d(c,h);n=new ih(o.targetId,g)}}var B;return n}(this.serializer,e),o=function(h){if(!("targetChange"in h))return fn.min();const g=h.targetChange;return g.targetIds&&g.targetIds.length?fn.min():g.readTime?Ui(g.readTime):fn.min()}(e);return this.listener.u_(n,o)}c_(e){const n={};n.database=pf(this.serializer),n.addTarget=function(h,g){let R;const N=g.target;if(R=Xu(N)?{documents:mm(h,N)}:{query:ah(h,N).ut},R.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){R.resumeToken=vp(h,g.resumeToken);const B=yp(h,g.expectedCount);null!==B&&(R.expectedCount=B)}else if(g.snapshotVersion.compareTo(fn.min())>0){R.readTime=xl(h,g.snapshotVersion.toTimestamp());const B=yp(h,g.expectedCount);null!==B&&(R.expectedCount=B)}return R}(this.serializer,e);const o=function ym(i,e){const n=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nn()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.t_(n)}l_(e){const n={};n.database=pf(this.serializer),n.removeTarget=e,this.t_(n)}}class Cy extends Iy{constructor(e,n,o,c,h,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,c,g),this.serializer=h,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(un(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function Tp(i,e){return i&&i.length>0?(un(void 0!==e),i.map(n=>function(c,h){let g=Ui(c.updateTime?c.updateTime:h);return g.isEqual(fn.min())&&(g=Ui(h)),new nf(g,c.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=Ui(e.commitTime);return this.listener.T_(o,n)}return un(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=pf(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>yd(this.serializer,o))};this.t_(n)}}class Sf extends class{}{constructor(e,n,o,c){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=c,this.A_=!1}R_(){if(this.A_)throw new St(ct.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,o,c){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,g])=>this.connection.So(e,df(n,o),c,h,g)).catch(h=>{throw"FirebaseError"===h.name?(h.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new St(ct.UNKNOWN,h.toString())})}vo(e,n,o,c,h){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,R])=>this.connection.vo(e,df(n,o),c,g,R,h)).catch(g=>{throw"FirebaseError"===g.name?(g.code===ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new St(ct.UNKNOWN,g.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class FE{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Jr(n),this.g_=!1):Ot("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class LE{constructor(e,n,o,c,h){var g=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=h,this.M_.io(R=>{o.enqueueAndForget((0,de.c)(function*(){var N;ul(g)&&(Ot("RemoteStore","Restarting streams for network reachability change."),yield(N=(0,de.c)(function*(J){const ue=jt(J);ue.v_.add(4),yield Fc(ue),ue.x_.set("Unknown"),ue.v_.delete(4),yield Td(ue)}),function B(J){return N.apply(this,arguments)})(g))}))}),this.x_=new FE(o,c)}}function Td(i){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,de.c)(function*(i){if(ul(i))for(const e of i.F_)yield e(!0)}),Qp.apply(this,arguments)}function Fc(i){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,de.c)(function*(i){for(const e of i.F_)yield e(!1)}),Jp.apply(this,arguments)}function bf(i,e){const n=jt(i);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Xp(n)?Gm(n):Vu(n).Jo()&&wy(n,e))}function Rf(i,e){const n=jt(i),o=Vu(n);n.C_.delete(e),o.Jo()&&Mf(n,e),0===n.C_.size&&(o.Jo()?o.Xo():ul(n)&&n.x_.set("Unknown"))}function wy(i,e){if(i.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fn.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vu(i).c_(e)}function Mf(i,e){i.O_.Oe(e),Vu(i).l_(e)}function Gm(i){i.O_=new pm({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.C_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Vu(i).start(),i.x_.p_()}function Xp(i){return ul(i)&&!Vu(i).Ho()&&i.C_.size>0}function ul(i){return 0===jt(i).v_.size}function Wm(i){i.O_=void 0}function Hm(i){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,de.c)(function*(i){i.C_.forEach((e,n)=>{wy(i,e)})}),Zp.apply(this,arguments)}function eg(i,e){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,de.c)(function*(i,e){Wm(i),Xp(i)?(i.x_.S_(e),Gm(i)):i.x_.set("Unknown")}),Dd.apply(this,arguments)}function Ty(i,e,n){return Of.apply(this,arguments)}function Of(){return Of=(0,de.c)(function*(i,e,n){if(i.x_.set("Online"),e instanceof uf&&2===e.state&&e.cause)try{yield(o=(0,de.c)(function*(h,g){const R=g.cause;for(const N of g.targetIds)h.C_.has(N)&&(yield h.remoteSyncer.rejectListen(N,R),h.C_.delete(N),h.O_.removeTarget(N))}),function c(h,g){return o.apply(this,arguments)})(i,e)}catch(o){Ot("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Ad(i,o)}else if(e instanceof bl?i.O_.$e(e):e instanceof ih?i.O_.Je(e):i.O_.Ge(e),!n.isEqual(fn.min()))try{const o=yield OE(i.localStore);n.compareTo(o)>=0&&(yield function(h,g){const R=h.O_.it(g);return R.targetChanges.forEach((N,B)=>{if(N.resumeToken.approximateByteSize()>0){const J=h.C_.get(B);J&&h.C_.set(B,J.withResumeToken(N.resumeToken,g))}}),R.targetMismatches.forEach((N,B)=>{const J=h.C_.get(N);if(!J)return;h.C_.set(N,J.withResumeToken(ws.EMPTY_BYTE_STRING,J.snapshotVersion)),Mf(h,N);const ue=new Ga(J.target,N,B,J.sequenceNumber);wy(h,ue)}),h.remoteSyncer.applyRemoteEvent(R)}(i,n))}catch(o){Ot("RemoteStore","Failed to raise snapshot:",o),yield Ad(i,o)}var o}),Of.apply(this,arguments)}function Ad(i,e,n){return tg.apply(this,arguments)}function tg(){return tg=(0,de.c)(function*(i,e,n){if(!T(e))throw e;i.v_.add(1),yield Fc(i),i.x_.set("Offline"),n||(n=()=>OE(i.localStore)),i.asyncQueue.enqueueRetryable((0,de.c)(function*(){Ot("RemoteStore","Retrying IndexedDB access"),yield n(),i.v_.delete(1),yield Td(i)}))}),tg.apply(this,arguments)}function ng(i,e){return e().catch(n=>Ad(i,n,e))}function ll(i){return zm.apply(this,arguments)}function zm(){return zm=(0,de.c)(function*(i){const e=jt(i),n=dl(e);let o=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Dy(e);)try{const c=yield t0(e.localStore,o);if(null===c){0===e.D_.length&&n.Xo();break}o=c.batchId,VE(e,c)}catch(c){yield Ad(e,c)}Ay(e)&&Sy(e)}),zm.apply(this,arguments)}function Dy(i){return ul(i)&&i.D_.length<10}function VE(i,e){i.D_.push(e);const n=dl(i);n.Jo()&&n.P_&&n.I_(e.mutations)}function Ay(i){return ul(i)&&!dl(i).Ho()&&i.D_.length>0}function Sy(i){dl(i).start()}function Py(i){return rg.apply(this,arguments)}function rg(){return rg=(0,de.c)(function*(i){dl(i).d_()}),rg.apply(this,arguments)}function Ir(i){return ig.apply(this,arguments)}function ig(){return ig=(0,de.c)(function*(i){const e=dl(i);for(const n of i.D_)e.I_(n.mutations)}),ig.apply(this,arguments)}function by(i,e,n){return Hl.apply(this,arguments)}function Hl(){return Hl=(0,de.c)(function*(i,e,n){const o=i.D_.shift(),c=sf.from(o,e,n);yield ng(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),yield ll(i)}),Hl.apply(this,arguments)}function Ry(i,e){return sg.apply(this,arguments)}function sg(){return sg=(0,de.c)(function*(i,e){var n;e&&dl(i).P_&&(yield(n=(0,de.c)(function*(c,h){if(ou(R=h.code)&&R!==ct.ABORTED){const g=c.D_.shift();dl(c).Zo(),yield ng(c,()=>c.remoteSyncer.rejectFailedWrite(g.batchId,h)),yield ll(c)}var R}),function o(c,h){return n.apply(this,arguments)})(i,e)),Ay(i)&&Sy(i)}),sg.apply(this,arguments)}function My(i,e){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,de.c)(function*(i,e){const n=jt(i);n.asyncQueue.verifyOperationInProgress(),Ot("RemoteStore","RemoteStore received new credentials");const o=ul(n);n.v_.add(3),yield Fc(n),o&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Td(n)}),Dh.apply(this,arguments)}function zl(i,e){return xf.apply(this,arguments)}function xf(){return xf=(0,de.c)(function*(i,e){const n=jt(i);e?(n.v_.delete(2),yield Td(n)):e||(n.v_.add(2),yield Fc(n),n.x_.set("Unknown"))}),xf.apply(this,arguments)}function Vu(i){return i.N_||(i.N_=function(n,o,c){const h=jt(n);return h.R_(),new kE(o,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)}(i.datastore,i.asyncQueue,{Po:Hm.bind(null,i),To:eg.bind(null,i),u_:Ty.bind(null,i)}),i.F_.push(function(){var e=(0,de.c)(function*(n){n?(i.N_.Zo(),Xp(i)?Gm(i):i.x_.set("Unknown")):(yield i.N_.stop(),Wm(i))});return function(n){return e.apply(this,arguments)}}())),i.N_}function dl(i){return i.B_||(i.B_=function(n,o,c){const h=jt(n);return h.R_(),new Cy(o,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)}(i.datastore,i.asyncQueue,{Po:Py.bind(null,i),To:Ry.bind(null,i),E_:Ir.bind(null,i),T_:by.bind(null,i)}),i.F_.push(function(){var e=(0,de.c)(function*(n){n?(i.B_.Zo(),yield ll(i)):(yield i.B_.stop(),i.D_.length>0&&(Ot("RemoteStore",`Stopping write stream with ${i.D_.length} pending writes`),i.D_=[]))});return function(n){return e.apply(this,arguments)}}())),i.B_}class Nf{constructor(e,n,o,c,h){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=c,this.removalCallback=h,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,c,h){const g=Date.now()+o,R=new Nf(e,n,g,c,h);return R.start(o),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new St(ct.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ql(i,e){if(Jr("AsyncQueue",`${e}: ${i}`),T(i))return new St(ct.UNAVAILABLE,`${e}: ${i}`);throw i}class Kl{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Ht.comparator(n.key,o.key):(n,o)=>Ht.comparator(n.key,o.key),this.keyedMap=uc(),this.sortedSet=new Ci(this.comparator)}static emptySet(e){return new Kl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Kl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const c=n.getNext().key,h=o.getNext().key;if(!c.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new Kl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class qm{constructor(){this.L_=new Ci(Ht.comparator)}track(e){const n=e.doc.key,o=this.L_.get(n);o?0!==e.type&&3===o.type?this.L_=this.L_.insert(n,e):3===e.type&&1!==o.type?this.L_=this.L_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.L_=this.L_.remove(n):1===e.type&&2===o.type?this.L_=this.L_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):nn():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,o)=>{e.push(o)}),e}}class Yl{constructor(e,n,o,c,h,g,R,N,B){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=c,this.mutatedKeys=h,this.fromCache=g,this.syncStateChanged=R,this.excludesMetadataChanges=N,this.hasCachedResults=B}static fromInitialDocuments(e,n,o,c,h){const g=[];return n.forEach(R=>{g.push({type:0,doc:R})}),new Yl(e,n,Kl.emptySet(n),g,o,c,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Me(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let c=0;c<n.length;c++)if(n[c].type!==o[c].type||!n[c].doc.isEqual(o[c].doc))return!1;return!0}}class UE{constructor(){this.q_=void 0,this.Q_=[]}}class BE{constructor(){this.queries=new ms(e=>it(e),Me),this.onlineState="Unknown",this.K_=new Set}}function Km(i,e){return og.apply(this,arguments)}function og(){return og=(0,de.c)(function*(i,e){const n=jt(i),o=e.query;let c=!1,h=n.queries.get(o);if(h||(c=!0,h=new UE),c)try{h.q_=yield n.onListen(o)}catch(g){const R=ql(g,`Initialization of query '${At(e.query)}' failed`);return void e.onError(R)}n.queries.set(o,h),h.Q_.push(e),e.U_(n.onlineState),h.q_&&e.W_(h.q_)&&ag(n)}),og.apply(this,arguments)}function Ym(i,e){return Qm.apply(this,arguments)}function Qm(){return Qm=(0,de.c)(function*(i,e){const n=jt(i),o=e.query;let c=!1;const h=n.queries.get(o);if(h){const g=h.Q_.indexOf(e);g>=0&&(h.Q_.splice(g,1),c=0===h.Q_.length)}if(c)return n.queries.delete(o),n.onUnlisten(o)}),Qm.apply(this,arguments)}function jE(i,e){const n=jt(i);let o=!1;for(const c of e){const g=n.queries.get(c.query);if(g){for(const R of g.Q_)R.W_(c)&&(o=!0);g.q_=c}}o&&ag(n)}function $E(i,e,n){const o=jt(i),c=o.queries.get(e);if(c)for(const h of c.Q_)h.onError(n);o.queries.delete(e)}function ag(i){i.K_.forEach(e=>{e.next()})}class cg{constructor(e,n,o){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=o||{}}W_(e){if(!this.options.includeMetadataChanges){const o=[];for(const c of e.docChanges)3!==c.type&&o.push(c);e=new Yl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){return!e.fromCache||(!this.options.Z_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class GE{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}}class Oy{constructor(e){this.serializer=e}Ps(e){return au(this.serializer,e)}Is(e){return e.metadata.exists?oh(this.serializer,e.document,!1):Vi.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ui(e)}}class Ha{constructor(e,n,o){this.ta=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xy(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;const o=Ur.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){const n=new Map,o=new Oy(this.serializer);for(const c of e)if(c.metadata.queries){const h=o.Ps(c.metadata.name);for(const g of c.metadata.queries){const R=(n.get(g)||nr()).add(h);n.set(g,R)}}return n}complete(){var e=this;return(0,de.c)(function*(){const n=yield function NE(i,e,n,o){return Up.apply(this,arguments)}(e.localStore,new Oy(e.serializer),e.documents,e.ta.id),o=e.ra(e.documents);for(const c of e.queries)yield wh(e.localStore,c,o.get(c.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:n}})()}}function xy(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Ny{constructor(e){this.key=e}}class WE{constructor(e){this.key=e}}class ug{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=nr(),this.mutatedKeys=nr(),this.ua=tr(e),this.ca=new Kl(this.ua)}get la(){return this.oa}ha(e,n){const o=n?n.Pa:new qm,c=n?n.ca:this.ca;let h=n?n.mutatedKeys:this.mutatedKeys,g=c,R=!1;const N="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,B="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((J,ue)=>{const Pe=c.get(J),Je=cn(this.query,ue)?ue:null,Ut=!!Pe&&this.mutatedKeys.has(Pe.key),Jt=!!Je&&(Je.hasLocalMutations||this.mutatedKeys.has(Je.key)&&Je.hasCommittedMutations);let Qt=!1;Pe&&Je?Pe.data.isEqual(Je.data)?Ut!==Jt&&(o.track({type:3,doc:Je}),Qt=!0):this.Ia(Pe,Je)||(o.track({type:2,doc:Je}),Qt=!0,(N&&this.ua(Je,N)>0||B&&this.ua(Je,B)<0)&&(R=!0)):!Pe&&Je?(o.track({type:0,doc:Je}),Qt=!0):Pe&&!Je&&(o.track({type:1,doc:Pe}),Qt=!0,(N||B)&&(R=!0)),Qt&&(Je?(g=g.add(Je),h=Jt?h.add(J):h.delete(J)):(g=g.delete(J),h=h.delete(J)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const J="F"===this.query.limitType?g.last():g.first();g=g.delete(J.key),h=h.delete(J.key),o.track({type:1,doc:J})}return{ca:g,Pa:o,Xi:R,mutatedKeys:h}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,c){const h=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const g=e.Pa.k_();g.sort((J,ue)=>function(Je,Ut){const Jt=Qt=>{switch(Qt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nn()}};return Jt(Je)-Jt(Ut)}(J.type,ue.type)||this.ua(J.doc,ue.doc)),this.Ta(o),c=null!=c&&c;const R=n&&!c?this.Ea():[],N=0===this.aa.size&&this.current&&!c?1:0,B=N!==this._a;return this._a=N,0!==g.length||B?{snapshot:new Yl(this.query,e.ca,h,g,e.mutatedKeys,0===N,B,!1,!!o&&o.resumeToken.approximateByteSize()>0),da:R}:{da:R}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new qm,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=nr(),this.ca.forEach(o=>{this.Aa(o.key)&&(this.aa=this.aa.add(o.key))});const n=[];return e.forEach(o=>{this.aa.has(o)||n.push(new WE(o))}),this.aa.forEach(o=>{e.has(o)||n.push(new Ny(o))}),n}Ra(e){this.oa=e.hs,this.aa=nr();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Yl.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class ky{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class HE{constructor(e){this.key=e,this.ma=!1}}class zE{constructor(e,n,o,c,h,g){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=c,this.currentUser=h,this.maxConcurrentLimboResolutions=g,this.fa={},this.ga=new ms(R=>it(R),Me),this.pa=new Map,this.ya=new Set,this.wa=new Ci(Ht.comparator),this.Sa=new Map,this.ba=new Tf,this.Da={},this.Ca=new Map,this.va=jl.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function qE(i,e){return lg.apply(this,arguments)}function lg(){return lg=(0,de.c)(function*(i,e){const n=Ph(i);let o,c;const h=n.ga.get(e);if(h)o=h.targetId,n.sharedClientState.addLocalQueryTarget(o),c=h.view.Va();else{const g=yield Eh(n.localStore,v(e)),R=n.sharedClientState.addLocalQueryTarget(g.targetId);o=g.targetId,c=yield Jm(n,e,o,"current"===R,g.resumeToken),n.isPrimaryClient&&bf(n.remoteStore,g)}return c}),lg.apply(this,arguments)}function Jm(i,e,n,o,c){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,de.c)(function*(i,e,n,o,c){i.Ma=(ue,Pe,Je)=>{return(Ut=(0,de.c)(function*(Qt,xn,_r,Nn){let Dn=xn.view.ha(_r);Dn.Xi&&(Dn=yield Ch(Qt.localStore,xn.query,!1).then(({documents:ha})=>xn.view.ha(ha,Dn)));const _i=Nn&&Nn.targetChanges.get(xn.targetId),Mi=Nn&&null!=Nn.targetMismatches.get(xn.targetId),Hr=xn.view.applyChanges(Dn,Qt.isPrimaryClient,_i,Mi);return Ff(Qt,xn.targetId,Hr.da),Hr.snapshot}),function Jt(Qt,xn,_r,Nn){return Ut.apply(this,arguments)})(i,ue,Pe,Je);var Ut};const h=yield Ch(i.localStore,e,!0),g=new ug(e,h.hs),R=g.ha(h.documents),N=Pl.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,c),B=g.applyChanges(R,i.isPrimaryClient,N);Ff(i,n,B.da);const J=new ky(e,n,g);return i.ga.set(e,J),i.pa.has(n)?i.pa.get(n).push(e):i.pa.set(n,[e]),B.snapshot}),Xm.apply(this,arguments)}function Zm(i,e){return e_.apply(this,arguments)}function e_(){return e_=(0,de.c)(function*(i,e){const n=jt(i),o=n.ga.get(e),c=n.pa.get(o.targetId);if(c.length>1)return n.pa.set(o.targetId,c.filter(h=>!Me(h,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield al(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),Rf(n.remoteStore,o.targetId),Sd(n,o.targetId)}).catch(so))):(Sd(n,o.targetId),yield al(n.localStore,o.targetId,!0))}),e_.apply(this,arguments)}function t_(){return t_=(0,de.c)(function*(i,e,n){const o=l_(i);try{const c=yield function(g,R){const N=jt(g),B=gi.now(),J=R.reduce((Je,Ut)=>Je.add(Ut.key),nr());let ue,Pe;return N.persistence.runTransaction("Locally write mutations","readwrite",Je=>{let Ut=yo(),Jt=nr();return N.os.getEntries(Je,J).next(Qt=>{Ut=Qt,Ut.forEach((xn,_r)=>{_r.isValidDocument()||(Jt=Jt.add(xn))})}).next(()=>N.localDocuments.getOverlayedDocuments(Je,Ut)).next(Qt=>{ue=Qt;const xn=[];for(const _r of R){const Nn=eh(_r,ue.get(_r.key).overlayedDocument);null!=Nn&&xn.push(new dc(_r.key,Nn,qd(Nn.value.mapValue),Ki.exists(!0)))}return N.mutationQueue.addMutationBatch(Je,B,xn,R)}).next(Qt=>{Pe=Qt;const xn=Qt.applyToLocalDocumentSet(ue,Jt);return N.documentOverlayCache.saveOverlays(Je,Qt.batchId,xn)})}).then(()=>({batchId:Pe.batchId,changes:pd(ue)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(c.batchId),function(g,R,N){let B=g.Da[g.currentUser.toKey()];B||(B=new Ci(Sn)),B=B.insert(R,N),g.Da[g.currentUser.toKey()]=B}(o,c.batchId,n),yield fl(o,c.changes),yield ll(o.remoteStore)}catch(c){const h=ql(c,"Failed to persist write");n.reject(h)}}),t_.apply(this,arguments)}function Fy(i,e){return n_.apply(this,arguments)}function n_(){return n_=(0,de.c)(function*(i,e){const n=jt(i);try{const o=yield function e0(i,e){const n=jt(i),o=e.snapshotVersion;let c=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const g=n.os.newChangeBuffer({trackRemovals:!0});c=n.ns;const R=[];e.targetChanges.forEach((J,ue)=>{const Pe=c.get(ue);if(!Pe)return;R.push(n.Qr.removeMatchingKeys(h,J.removedDocuments,ue).next(()=>n.Qr.addMatchingKeys(h,J.addedDocuments,ue)));let Je=Pe.withSequenceNumber(h.currentSequenceNumber);var Jt,Qt,xn;null!==e.targetMismatches.get(ue)?Je=Je.withResumeToken(ws.EMPTY_BYTE_STRING,fn.min()).withLastLimboFreeSnapshotVersion(fn.min()):J.resumeToken.approximateByteSize()>0&&(Je=Je.withResumeToken(J.resumeToken,o)),c=c.insert(ue,Je),Qt=Je,xn=J,(0===(Jt=Pe).resumeToken.approximateByteSize()||Qt.snapshotVersion.toMicroseconds()-Jt.snapshotVersion.toMicroseconds()>=3e8||xn.addedDocuments.size+xn.modifiedDocuments.size+xn.removedDocuments.size>0)&&R.push(n.Qr.updateTargetData(h,Je))});let N=yo(),B=nr();if(e.documentUpdates.forEach(J=>{e.resolvedLimboDocuments.has(J)&&R.push(n.persistence.referenceDelegate.updateLimboDocument(h,J))}),R.push(xE(h,g,e.documentUpdates).next(J=>{N=J.cs,B=J.ls})),!o.isEqual(fn.min())){const J=n.Qr.getLastRemoteSnapshotVersion(h).next(ue=>n.Qr.setTargetsMetadata(h,h.currentSequenceNumber,o));R.push(J)}return Qe.waitFor(R).next(()=>g.apply(h)).next(()=>n.localDocuments.getLocalViewOfDocuments(h,N,B)).next(()=>N)}).then(h=>(n.ns=c,h))}(n.localStore,e);e.targetChanges.forEach((c,h)=>{const g=n.Sa.get(h);g&&(un(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?g.ma=!0:c.modifiedDocuments.size>0?un(g.ma):c.removedDocuments.size>0&&(un(g.ma),g.ma=!1))}),yield fl(n,o,e)}catch(o){yield so(o)}}),n_.apply(this,arguments)}function hu(i,e,n){const o=jt(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const c=[];o.ga.forEach((h,g)=>{const R=g.view.U_(e);R.snapshot&&c.push(R.snapshot)}),function(g,R){const N=jt(g);N.onlineState=R;let B=!1;N.queries.forEach((J,ue)=>{for(const Pe of ue.Q_)Pe.U_(R)&&(B=!0)}),B&&ag(N)}(o.eventManager,e),c.length&&o.fa.u_(c),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function r_(i,e,n){return i_.apply(this,arguments)}function i_(){return i_=(0,de.c)(function*(i,e,n){const o=jt(i);o.sharedClientState.updateQueryState(e,"rejected",n);const c=o.Sa.get(e),h=c&&c.key;if(h){let g=new Ci(Ht.comparator);g=g.insert(h,Vi.newNoDocument(h,fn.min()));const R=nr().add(h),N=new Zu(fn.min(),new Map,new Ci(Sn),g,R);yield Fy(o,N),o.wa=o.wa.remove(h),o.Sa.delete(e),o_(o)}else yield al(o.localStore,e,!1).then(()=>Sd(o,e,n)).catch(so)}),i_.apply(this,arguments)}function YE(i,e){return dg.apply(this,arguments)}function dg(){return dg=(0,de.c)(function*(i,e){const n=jt(i),o=e.batch.batchId;try{const c=yield function gy(i,e){const n=jt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const c=e.batch.keys(),h=n.os.newChangeBuffer({trackRemovals:!0});return function(R,N,B,J){const ue=B.batch,Pe=ue.keys();let Je=Qe.resolve();return Pe.forEach(Ut=>{Je=Je.next(()=>J.getEntry(N,Ut)).next(Jt=>{const Qt=B.docVersions.get(Ut);un(null!==Qt),Jt.version.compareTo(Qt)<0&&(ue.applyToRemoteDocument(Jt,B),Jt.isValidDocument()&&(Jt.setReadTime(B.commitVersion),J.addEntry(Jt)))})}),Je.next(()=>R.mutationQueue.removeMutationBatch(N,ue))}(n,o,e,h).next(()=>h.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,c,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(R){let N=nr();for(let B=0;B<R.mutationResults.length;++B)R.mutationResults[B].transformResults.length>0&&(N=N.add(R.batch.mutations[B].key));return N}(e))).next(()=>n.localDocuments.getDocuments(o,c))})}(n.localStore,e);fg(n,o,null),hg(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield fl(n,c)}catch(c){yield so(c)}}),dg.apply(this,arguments)}function Ly(i,e,n){return Ah.apply(this,arguments)}function Ah(){return Ah=(0,de.c)(function*(i,e,n){const o=jt(i);try{const c=yield function(g,R){const N=jt(g);return N.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let J;return N.mutationQueue.lookupMutationBatch(B,R).next(ue=>(un(null!==ue),J=ue.keys(),N.mutationQueue.removeMutationBatch(B,ue))).next(()=>N.mutationQueue.performConsistencyCheck(B)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(B,J,R)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(B,J)).next(()=>N.localDocuments.getDocuments(B,J))})}(o.localStore,e);fg(o,e,n),hg(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield fl(o,c)}catch(c){yield so(c)}}),Ah.apply(this,arguments)}function Vy(){return Vy=(0,de.c)(function*(i,e){const n=jt(i);ul(n.remoteStore)||Ot("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(g){const R=jt(g);return R.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>R.mutationQueue.getHighestUnacknowledgedBatchId(N))}(n.localStore);if(-1===o)return void e.resolve();const c=n.Ca.get(o)||[];c.push(e),n.Ca.set(o,c)}catch(o){const c=ql(o,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),Vy.apply(this,arguments)}function hg(i,e){(i.Ca.get(e)||[]).forEach(n=>{n.resolve()}),i.Ca.delete(e)}function fg(i,e,n){const o=jt(i);let c=o.Da[o.currentUser.toKey()];if(c){const h=c.get(e);h&&(n?h.reject(n):h.resolve(),c=c.remove(e)),o.Da[o.currentUser.toKey()]=c}}function Sd(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.pa.get(e))i.ga.delete(o),n&&i.fa.xa(o,n);i.pa.delete(e),i.isPrimaryClient&&i.ba.Vr(e).forEach(o=>{i.ba.containsKey(o)||kf(i,o)})}function kf(i,e){i.ya.delete(e.path.canonicalString());const n=i.wa.get(e);null!==n&&(Rf(i.remoteStore,n),i.wa=i.wa.remove(e),i.Sa.delete(n),o_(i))}function Ff(i,e,n){for(const o of n)o instanceof Ny?(i.ba.addReference(o.key,e),hl(i,o)):o instanceof WE?(Ot("SyncEngine","Document no longer in limbo: "+o.key),i.ba.removeReference(o.key,e),i.ba.containsKey(o.key)||kf(i,o.key)):nn()}function hl(i,e){const n=e.key,o=n.path.canonicalString();i.wa.get(n)||i.ya.has(o)||(Ot("SyncEngine","New document in limbo: "+n),i.ya.add(o),o_(i))}function o_(i){for(;i.ya.size>0&&i.wa.size<i.maxConcurrentLimboResolutions;){const e=i.ya.values().next().value;i.ya.delete(e);const n=new Ht(Ur.fromString(e)),o=i.va.next();i.Sa.set(o,new HE(n)),i.wa=i.wa.insert(n,o),bf(i.remoteStore,new Ga(v(cc(n.path)),o,"TargetPurposeLimboResolution",Vt._e))}}function fl(i,e,n){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,de.c)(function*(i,e,n){const o=jt(i),c=[],h=[],g=[];var R;o.ga.isEmpty()||(o.ga.forEach((R,N)=>{g.push(o.Ma(N,e,n).then(B=>{if((B||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(N.targetId,B?.fromCache?"not-current":"current"),B){c.push(B);const J=pn.Ki(N.targetId,B);h.push(J)}}))}),yield Promise.all(g),o.fa.u_(c),yield(R=(0,de.c)(function*(B,J){const ue=jt(B);try{yield ue.persistence.runTransaction("notifyLocalViewChanges","readwrite",Pe=>Qe.forEach(J,Je=>Qe.forEach(Je.qi,Ut=>ue.persistence.referenceDelegate.addReference(Pe,Je.targetId,Ut)).next(()=>Qe.forEach(Je.Qi,Ut=>ue.persistence.referenceDelegate.removeReference(Pe,Je.targetId,Ut)))))}catch(Pe){if(!T(Pe))throw Pe;Ot("LocalStore","Failed to update sequence numbers: "+Pe)}for(const Pe of J){const Je=Pe.targetId;if(!Pe.fromCache){const Ut=ue.ns.get(Je),Qt=Ut.withLastLimboFreeSnapshotVersion(Ut.snapshotVersion);ue.ns=ue.ns.insert(Je,Qt)}}}),function N(B,J){return R.apply(this,arguments)})(o.localStore,h))}),Lf.apply(this,arguments)}function QE(i,e){return Pd.apply(this,arguments)}function Pd(){return Pd=(0,de.c)(function*(i,e){const n=jt(i);if(!n.currentUser.isEqual(e)){Ot("SyncEngine","User change. New user:",e.toKey());const o=yield vh(n.localStore,e);n.currentUser=e,(h=n).Ca.forEach(R=>{R.forEach(N=>{N.reject(new St(ct.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.Ca.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield fl(n,o.us)}var h}),Pd.apply(this,arguments)}function Uy(i,e){const n=jt(i),o=n.Sa.get(e);if(o&&o.ma)return nr().add(o.key);{let c=nr();const h=n.pa.get(e);if(!h)return c;for(const g of h){const R=n.ga.get(g);c=c.unionWith(R.view.la)}return c}}function Sh(i,e){return bd.apply(this,arguments)}function bd(){return bd=(0,de.c)(function*(i,e){const n=jt(i),o=yield Ch(n.localStore,e.query,!0),c=e.view.Ra(o);return n.isPrimaryClient&&Ff(n,e.targetId,c.da),c}),bd.apply(this,arguments)}function a_(i,e){return Rd.apply(this,arguments)}function Rd(){return Rd=(0,de.c)(function*(i,e){const n=jt(i);return Vm(n.localStore,e).then(o=>fl(n,o))}),Rd.apply(this,arguments)}function By(i,e,n,o){return pg.apply(this,arguments)}function pg(){return pg=(0,de.c)(function*(i,e,n,o){const c=jt(i),h=yield function(R,N){const B=jt(R),J=jt(B.mutationQueue);return B.persistence.runTransaction("Lookup mutation documents","readonly",ue=>J.vn(ue,N).next(Pe=>Pe?B.localDocuments.getDocuments(ue,Pe):Qe.resolve(null)))}(c.localStore,e);var N;null!==h?("pending"===n?yield ll(c.remoteStore):"acknowledged"===n||"rejected"===n?(fg(c,e,o||null),hg(c,e),N=e,jt(jt(c.localStore).mutationQueue).Mn(N)):nn(),yield fl(c,h)):Ot("SyncEngine","Cannot apply mutation batch with id: "+e)}),pg.apply(this,arguments)}function c_(){return c_=(0,de.c)(function*(i,e){const n=jt(i);if(Ph(n),l_(n),!0===e&&!0!==n.Fa){const o=n.sharedClientState.getAllActiveQueryTargets(),c=yield jy(n,o.toArray());n.Fa=!0,yield zl(n.remoteStore,!0);for(const h of c)bf(n.remoteStore,h)}else if(!1===e&&!1!==n.Fa){const o=[];let c=Promise.resolve();n.pa.forEach((h,g)=>{n.sharedClientState.isLocalQueryTarget(g)?o.push(g):c=c.then(()=>(Sd(n,g),al(n.localStore,g,!0))),Rf(n.remoteStore,g)}),yield c,yield jy(n,o),function(g){const R=jt(g);R.Sa.forEach((N,B)=>{Rf(R.remoteStore,B)}),R.ba.mr(),R.Sa=new Map,R.wa=new Ci(Ht.comparator)}(n),n.Fa=!1,yield zl(n.remoteStore,!1)}}),c_.apply(this,arguments)}function jy(i,e,n){return u_.apply(this,arguments)}function u_(){return u_=(0,de.c)(function*(i,e,n){const o=jt(i),c=[],h=[];for(const g of e){let R;const N=o.pa.get(g);if(N&&0!==N.length){R=yield Eh(o.localStore,v(N[0]));for(const B of N){const J=o.ga.get(B),ue=yield Sh(o,J);ue.snapshot&&h.push(ue.snapshot)}}else{const B=yield Lm(o.localStore,g);R=yield Eh(o.localStore,B),yield Jm(o,$y(B),g,!1,R.resumeToken)}c.push(R)}return o.fa.u_(h),c}),u_.apply(this,arguments)}function $y(i){return Dl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function XE(i){return n=jt(i).localStore,jt(jt(n).persistence).Li();var n}function Gy(i,e,n,o){return gg.apply(this,arguments)}function gg(){return gg=(0,de.c)(function*(i,e,n,o){const c=jt(i);if(c.Fa)return void Ot("SyncEngine","Ignoring unexpected query state notification.");const h=c.pa.get(e);if(h&&h.length>0)switch(n){case"current":case"not-current":{const g=yield Vm(c.localStore,Pn(h[0])),R=Zu.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,ws.EMPTY_BYTE_STRING);yield fl(c,g,R);break}case"rejected":yield al(c.localStore,e,!0),Sd(c,e,o);break;default:nn()}}),gg.apply(this,arguments)}function Wy(i,e,n){return mg.apply(this,arguments)}function mg(){return mg=(0,de.c)(function*(i,e,n){const o=Ph(i);if(o.Fa){for(const c of e){if(o.pa.has(c)){Ot("SyncEngine","Adding an already active target "+c);continue}const h=yield Lm(o.localStore,c),g=yield Eh(o.localStore,h);yield Jm(o,$y(h),g.targetId,!1,g.resumeToken),bf(o.remoteStore,g)}for(const c of n)o.pa.has(c)&&(yield al(o.localStore,c,!1).then(()=>{Rf(o.remoteStore,c),Sd(o,c)}).catch(so))}}),mg.apply(this,arguments)}function Ph(i){const e=jt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r_.bind(null,e),e.fa.u_=jE.bind(null,e.eventManager),e.fa.xa=$E.bind(null,e.eventManager),e}function l_(i){const e=jt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ly.bind(null,e),e}class bh{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,de.c)(function*(){n.serializer=Th(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Gl(this.persistence,new mi,e.initialUser,this.serializer)}createPersistence(e){return new l(b.Hr,this.serializer)}createSharedClientState(e){return new Af}terminate(){var e=this;return(0,de.c)(function*(){var n,o;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(o=e.indexBackfillerScheduler)||void 0===o||o.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class _g extends bh{constructor(e,n,o){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,de.c)(function*(){yield n().call(o,e),yield o.Na.initialize(o,e),yield l_(o.Na.syncEngine),yield ll(o.Na.remoteStore),yield o.persistence.fi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Gl(this.persistence,new mi,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new Pm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new Ze(n,this.persistence);return new at(e.asyncQueue,o)}createPersistence(e){const n=Pt(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Zo.withCacheSize(this.cacheSizeBytes):Zo.DEFAULT;return new De(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,Ey(),Kp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Af}}class Hy extends _g{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,de.c)(function*(){yield n().call(o,e);const c=o.Na.syncEngine;o.sharedClientState instanceof yy&&(o.sharedClientState.syncEngine={Zs:By.bind(null,c),Xs:Gy.bind(null,c),eo:Wy.bind(null,c),Li:XE.bind(null,c),Ys:a_.bind(null,c)},yield o.sharedClientState.start()),yield o.persistence.fi(function(){var h=(0,de.c)(function*(g){yield function JE(i,e){return c_.apply(this,arguments)}(o.Na.syncEngine,g),o.gcScheduler&&(g&&!o.gcScheduler.started?o.gcScheduler.start():g||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(g&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():g||o.indexBackfillerScheduler.stop())});return function(g){return h.apply(this,arguments)}}())})()}createSharedClientState(e){const n=Ey();if(!yy.D(n))throw new St(ct.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Pt(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yy(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class Rh{initialize(e,n){var o=this;return(0,de.c)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=c=>hu(o.syncEngine,c,1),o.remoteStore.remoteSyncer.handleCredentialChange=QE.bind(null,o.syncEngine),yield zl(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new BE}createDatastore(e){const n=Th(e.databaseInfo.databaseId),o=new qp(e.databaseInfo);return new Sf(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,c=this.datastore,h=e.asyncQueue,g=n=>hu(this.syncEngine,n,0),R=Wp.D()?new Wp:new jm,new LE(o,c,h,g,R);var o,c,h,g,R}createSyncEngine(e,n){return function(c,h,g,R,N,B,J){const ue=new zE(c,h,g,R,N,B);return J&&(ue.Fa=!0),ue}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,de.c)(function*(){var n,o;yield(o=(0,de.c)(function*(h){const g=jt(h);Ot("RemoteStore","RemoteStore shutting down."),g.v_.add(5),yield Fc(g),g.M_.shutdown(),g.x_.set("Unknown")}),function c(h){return o.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function d_(i,e=10240){let n=0;return{read:()=>(0,de.c)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,de.c)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Mh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class zy{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new Xi,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(o=>{o&&o.ea()?this.metadata.resolve(o.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.X_)}`))},o=>this.metadata.reject(o))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,de.c)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,de.c)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,de.c)(function*(){const n=yield e.Ka();if(null===n)return null;const o=e.qa.decode(n),c=Number(o);isNaN(c)&&e.$a(`length string (${o}) is not valid number`);const h=yield e.Ua(c);return new GE(JSON.parse(h),n.length+c)})()}Wa(){return this.buffer.findIndex(e=>123===e)}Ka(){var e=this;return(0,de.c)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const n=e.Wa();n<0&&e.$a("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Ua(e){var n=this;return(0,de.c)(function*(){for(;n.buffer.length<e;)(yield n.Ga())&&n.$a("Reached the end of bundle when more is expected.");const o=n.qa.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,de.c)(function*(){const n=yield e.ka.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class Vf{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,de.c)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new St(ct.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const o=yield(c=(0,de.c)(function*(g,R){const N=jt(g),B={documents:R.map(Je=>Fu(N.serializer,Je))},J=yield N.vo("BatchGetDocuments",N.serializer.databaseId,Ur.emptyPath(),B,R.length),ue=new Map;J.forEach(Je=>{const Ut=function Cp(i,e){return"found"in e?function(o,c){un(!!c.found);const h=au(o,c.found.name),g=Ui(c.found.updateTime),R=c.found.createTime?Ui(c.found.createTime):fn.min(),N=new Zi({mapValue:{fields:c.found.fields}});return Vi.newFoundDocument(h,g,R,N)}(i,e):"missing"in e?function(o,c){un(!!c.missing),un(!!c.readTime);const h=au(o,c.missing),g=Ui(c.readTime);return Vi.newNoDocument(h,g)}(i,e):nn()}(N.serializer,Je);ue.set(Ut.key.toString(),Ut)});const Pe=[];return R.forEach(Je=>{const Ut=ue.get(Je.toString());un(!!Ut),Pe.push(Ut)}),Pe}),function h(g,R){return c.apply(this,arguments)})(n.datastore,e);var c;return o.forEach(c=>n.recordVersion(c)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new xc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,de.c)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,c)=>{const h=Ht.fromPath(c);e.mutations.push(new rf(h,e.precondition(h)))}),yield(o=(0,de.c)(function*(h,g){const R=jt(h),N={writes:g.map(B=>yd(R.serializer,B))};yield R.So("Commit",R.serializer.databaseId,Ur.emptyPath(),N)}),function c(h,g){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw nn();n=fn.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new St(ct.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(fn.min())?Ki.exists(!1):Ki.updateTime(n):Ki.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(fn.min()))throw new St(ct.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ki.updateTime(n)}return Ki.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Uf{constructor(e,n,o,c,h){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=c,this.deferred=h,this.za=o.maxAttempts,this.jo=new $m(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,de.c)(function*(){const n=new Vf(e.datastore),o=e.Ja(n);o&&o.then(c=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(c)}).catch(h=>{e.Ya(h)}))}).catch(c=>{e.Ya(c)})}))}Ja(e){try{const n=this.updateFunction(e);return!Ft(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!ou(n)}return!1}}class Bf{constructor(e,n,o,c){var h=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=c,this.user=Jn.UNAUTHENTICATED,this.clientId=ec.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var g=(0,de.c)(function*(R){Ot("FirestoreClient","Received user=",R.uid),yield h.authCredentialListener(R),h.user=R});return function(R){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(o,g=>(Ot("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new St(ct.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,de.c)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const c=ql(o,"Failed to shutdown persistence");n.reject(c)}})),n.promise}}function yg(i,e){return h_.apply(this,arguments)}function h_(){return h_=(0,de.c)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Ot("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var c=(0,de.c)(function*(h){o.isEqual(h)||(yield vh(e.localStore,h),o=h)});return function(h){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),h_.apply(this,arguments)}function f_(i,e){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,de.c)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield p_(i);Ot("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,i.configuration),i.setCredentialChangeListener(o=>My(e.remoteStore,o)),i.setAppCheckTokenChangeListener((o,c)=>My(e.remoteStore,c)),i._onlineComponents=e}),Oh.apply(this,arguments)}function vg(i){return"FirebaseError"===i.name?i.code===ct.FAILED_PRECONDITION||i.code===ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function p_(i){return qy.apply(this,arguments)}function qy(){return qy=(0,de.c)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ot("FirestoreClient","Using user provided OfflineComponentProvider");try{yield yg(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!vg(n))throw n;no("Error using user provided cache. Falling back to memory cache: "+n),yield yg(i,new bh)}}else Ot("FirestoreClient","Using default OfflineComponentProvider"),yield yg(i,new bh);return i._offlineComponents}),qy.apply(this,arguments)}function g_(i){return m_.apply(this,arguments)}function m_(){return m_=(0,de.c)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ot("FirestoreClient","Using user provided OnlineComponentProvider"),yield f_(i,i._uninitializedComponentsProvider._online)):(Ot("FirestoreClient","Using default OnlineComponentProvider"),yield f_(i,new Rh))),i._onlineComponents}),m_.apply(this,arguments)}function Ky(i){return p_(i).then(e=>e.persistence)}function jf(i){return p_(i).then(e=>e.localStore)}function Yy(i){return g_(i).then(e=>e.remoteStore)}function Qy(i){return g_(i).then(e=>e.syncEngine)}function xh(i){return __.apply(this,arguments)}function __(){return __=(0,de.c)(function*(i){const e=yield g_(i),n=e.eventManager;return n.onListen=qE.bind(null,e.syncEngine),n.onUnlisten=Zm.bind(null,e.syncEngine),n}),__.apply(this,arguments)}function Gf(i,e,n={}){const o=new Xi;return i.asyncQueue.enqueueAndForget((0,de.c)(function*(){return function(h,g,R,N,B){const J=new Mh({next:Pe=>{g.enqueueAndForget(()=>Ym(h,ue));const Je=Pe.docs.has(R);!Je&&Pe.fromCache?B.reject(new St(ct.UNAVAILABLE,"Failed to get document because the client is offline.")):Je&&Pe.fromCache&&N&&"server"===N.source?B.reject(new St(ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(Pe)},error:Pe=>B.reject(Pe)}),ue=new cg(cc(R.path),J,{includeMetadataChanges:!0,Z_:!0});return Km(h,ue)}(yield xh(i),i.asyncQueue,e,n,o)})),o.promise}function Nh(i,e,n={}){const o=new Xi;return i.asyncQueue.enqueueAndForget((0,de.c)(function*(){return function(h,g,R,N,B){const J=new Mh({next:Pe=>{g.enqueueAndForget(()=>Ym(h,ue)),Pe.fromCache&&"server"===N.source?B.reject(new St(ct.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(Pe)},error:Pe=>B.reject(Pe)}),ue=new cg(R,J,{includeMetadataChanges:!0,Z_:!0});return Km(h,ue)}(yield xh(i),i.asyncQueue,e,n,o)})),o.promise}function Hf(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const nv=new Map;function E_(i,e,n){if(!n)throw new St(ct.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function rv(i,e,n,o){if(!0===e&&!0===o)throw new St(ct.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function iv(i){if(!Ht.isDocumentKey(i))throw new St(ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function sv(i){if(Ht.isDocumentKey(i))throw new St(ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function kh(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":nn()}function Br(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new St(ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kh(i);throw new St(ct.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function zf(i,e){if(e<=0)throw new St(ct.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class qf{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new St(ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new St(ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Hf(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(h){if(void 0!==h.timeoutSeconds){if(isNaN(h.timeoutSeconds))throw new St(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new St(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new St(ct.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eg{constructor(e,n,o,c){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new St(ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new St(ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qf(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new _c;switch(o.type){case"firstParty":return new Gu(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new St(ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=nv.get(n);o&&(Ot("ComponentProvider","Removing Datastore"),nv.delete(n),o.terminate())}(this),Promise.resolve()}}class ea{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ea(this.firestore,e,this._query)}}class es{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new es(this.firestore,e,this._key)}}class Uu extends ea{constructor(e,n,o){super(e,n,cc(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new es(this.firestore,null,new Ht(e))}withConverter(e){return new Uu(this.firestore,e,this._path)}}function I_(i,e,...n){if(i=(0,Et.Yj)(i),E_("collection","path",e),i instanceof Eg){const o=Ur.fromString(e,...n);return sv(o),new Uu(i,null,o)}{if(!(i instanceof es||i instanceof Uu))throw new St(ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Ur.fromString(e,...n));return sv(o),new Uu(i.firestore,null,o)}}function Ig(i,e,...n){if(i=(0,Et.Yj)(i),1===arguments.length&&(e=ec.newId()),E_("doc","path",e),i instanceof Eg){const o=Ur.fromString(e,...n);return iv(o),new es(i,null,new Ht(o))}{if(!(i instanceof es||i instanceof Uu))throw new St(ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Ur.fromString(e,...n));return iv(o),new es(i.firestore,i instanceof Uu?i.converter:null,new Ht(o))}}function C_(i,e){return i=(0,Et.Yj)(i),e=(0,Et.Yj)(e),(i instanceof es||i instanceof Uu)&&(e instanceof es||e instanceof Uu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function w_(i,e){return i=(0,Et.Yj)(i),e=(0,Et.Yj)(e),i instanceof ea&&e instanceof ea&&i.firestore===e.firestore&&Me(i._query,e._query)&&i.converter===e.converter}class rI{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new $m(this,"async_queue_retry"),this._u=()=>{const n=Kp();n&&Ot("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Kp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=Kp();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new Xi;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,de.c)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(n){if(!T(n))throw n;Ot("AsyncQueue","Operation failed with retryable error: "+n)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(o=>{throw this.ru=o,this.iu=!1,Jr("INTERNAL UNHANDLED ERROR: ",function(g){let R=g.message||"";return g.stack&&(R=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),R}(o)),o}).then(o=>(this.iu=!1,o))));return this.Xa=n,n}enqueueAfterDelay(e,n,o){this.au(),this.ou.indexOf(e)>-1&&(n=0);const c=Nf.createAndSchedule(this,e,n,o,h=>this.lu(h));return this.nu.push(c),c}au(){this.ru&&nn()}verifyOperationInProgress(){}hu(){var e=this;return(0,de.c)(function*(){let n;do{n=e.Xa,yield n}while(n!==e.Xa)})()}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}function Ql(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const c=n;for(const h of["next","error","complete"])if(h in c&&"function"==typeof c[h])return!0;return!1}(i)}class av{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ts extends Eg{constructor(e,n,o,c){super(e,n,o,c),this.type="firestore",this._queue=new rI,this._persistenceKey=c?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cv(this),this._firestoreClient.terminate()}}function lo(i){return i._firestoreClient||cv(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function cv(i){var e,n,o;const c=i._freezeSettings(),h=(N=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Tu(i._databaseId,N,i._persistenceKey,(J=c).host,J.ssl,J.experimentalForceLongPolling,J.experimentalAutoDetectLongPolling,Hf(J.experimentalLongPollingOptions),J.useFetchStreams));var N,J;i._firestoreClient=new Bf(i._authCredentials,i._appCheckCredentials,i._queue,h),null!==(n=c.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=c.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.localCache.kind,_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider})}function lv(i,e,n){const o=new Xi;return i.asyncQueue.enqueue((0,de.c)(function*(){try{yield yg(i,n),yield f_(i,e),o.resolve()}catch(c){const h=c;if(!vg(h))throw h;no("Error enabling indexeddb cache. Falling back to memory cache: "+h),o.reject(h)}})).then(()=>o.promise)}function hv(i){if(i._initialized||i._terminated)throw new St(ct.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Bu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bu(ws.fromBase64String(e))}catch(n){throw new St(ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Bu(ws.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Jl{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new St(ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Md{constructor(e){this._methodName=e}}class wg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new St(ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new St(ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Sn(this._lat,e._lat)||Sn(this._long,e._long)}}const A_=/^__.*__$/;class pv{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new dc(e,this.data,this.fieldMask,n,this.fieldTransforms):new Oc(e,this.data,n,this.fieldTransforms)}}class gv{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new dc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mv(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nn()}}class Tg{constructor(e,n,o,c,h,g){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=c,void 0===h&&this.Eu(),this.fieldTransforms=h||[],this.fieldMask=g||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Tg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),c=this.Au({path:o,Vu:!1});return c.mu(e),c}fu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),c=this.Au({path:o,Vu:!1});return c.Eu(),c}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Od(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(mv(this.du)&&A_.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class cI{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Th(e)}Su(e,n,o,c=!1){return new Tg({du:e,methodName:n,wu:o,path:Ii.emptyPath(),Vu:!1,yu:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xl(i){const e=i._freezeSettings(),n=Th(i._databaseId);return new cI(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Yf(i,e,n,o,c,h={}){const g=i.Su(h.merge||h.mergeFields?2:0,e,n,c);P_("Data must be an object, but it was:",g,o);const R=Ev(o,g);let N,B;if(h.merge)N=new ao(g.fieldMask),B=g.fieldTransforms;else if(h.mergeFields){const J=[];for(const ue of h.mergeFields){const Pe=Xf(e,ue,n);if(!g.contains(Pe))throw new St(ct.INVALID_ARGUMENT,`Field '${Pe}' is specified in your field mask but missing from your input data.`);Cv(J,Pe)||J.push(Pe)}N=new ao(J),B=g.fieldTransforms.filter(ue=>N.covers(ue.field))}else N=null,B=g.fieldTransforms;return new pv(new Zi(R),N,B)}class Fh extends Md{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fh}}function _v(i,e,n){return new Tg({du:3,wu:e.settings.wu,methodName:i._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class S_ extends Md{_toFieldTransform(e){return new lc(e.path,new nu)}isEqual(e){return e instanceof S_}}class Dg extends Md{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=_v(this,e,!0),o=this.bu.map(h=>Zl(h,n)),c=new Ou(o);return new lc(e.path,c)}isEqual(e){return e instanceof Dg&&(0,Et.IN)(this.bu,e.bu)}}class Qf extends Md{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=_v(this,e,!0),o=this.bu.map(h=>Zl(h,n)),c=new ru(o);return new lc(e.path,c)}isEqual(e){return e instanceof Qf&&(0,Et.IN)(this.bu,e.bu)}}class yv extends Md{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){const n=new xu(e.serializer,md(e.serializer,this.Du));return new lc(e.path,n)}isEqual(e){return e instanceof yv&&this.Du===e.Du}}function Ag(i,e,n,o){const c=i.Su(1,e,n);P_("Data must be an object, but it was:",c,o);const h=[],g=Zi.empty();Ia(o,(N,B)=>{const J=b_(e,N,n);B=(0,Et.Yj)(B);const ue=c.fu(J);if(B instanceof Fh)h.push(J);else{const Pe=Zl(B,ue);null!=Pe&&(h.push(J),g.set(J,Pe))}});const R=new ao(h);return new gv(g,R,c.fieldTransforms)}function Jf(i,e,n,o,c,h){const g=i.Su(1,e,n),R=[Xf(e,o,n)],N=[c];if(h.length%2!=0)throw new St(ct.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Pe=0;Pe<h.length;Pe+=2)R.push(Xf(e,h[Pe])),N.push(h[Pe+1]);const B=[],J=Zi.empty();for(let Pe=R.length-1;Pe>=0;--Pe)if(!Cv(B,R[Pe])){const Je=R[Pe];let Ut=N[Pe];Ut=(0,Et.Yj)(Ut);const Jt=g.fu(Je);if(Ut instanceof Fh)B.push(Je);else{const Qt=Zl(Ut,Jt);null!=Qt&&(B.push(Je),J.set(Je,Qt))}}const ue=new ao(B);return new gv(J,ue,g.fieldTransforms)}function vv(i,e,n,o=!1){return Zl(n,i.Su(o?4:3,e))}function Zl(i,e){if(Iv(i=(0,Et.Yj)(i)))return P_("Unsupported field value:",e,i),Ev(i,e);if(i instanceof Md)return function(o,c){if(!mv(c.du))throw c.pu(`${o._methodName}() can only be used with update() and set()`);if(!c.path)throw c.pu(`${o._methodName}() is not currently supported inside arrays`);const h=o._toFieldTransform(c);h&&c.fieldTransforms.push(h)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(o,c){const h=[];let g=0;for(const R of o){let N=Zl(R,c.gu(g));null==N&&(N={nullValue:"NULL_VALUE"}),h.push(N),g++}return{arrayValue:{values:h}}}(i,e)}return function(o,c){if(null===(o=(0,Et.Yj)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return md(c.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const h=gi.fromDate(o);return{timestampValue:xl(c.serializer,h)}}if(o instanceof gi){const h=new gi(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:xl(c.serializer,h)}}if(o instanceof wg)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Bu)return{bytesValue:vp(c.serializer,o._byteString)};if(o instanceof es){const h=c.databaseId,g=o.firestore._databaseId;if(!g.isEqual(h))throw c.pu(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Ws(o.firestore._databaseId||c.databaseId,o._key.path)}}throw c.pu(`Unsupported field value: ${kh(o)}`)}(i,e)}function Ev(i,e){const n={};return nc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ia(i,(o,c)=>{const h=Zl(c,e.Ru(o));null!=h&&(n[o]=h)}),{mapValue:{fields:n}}}function Iv(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof gi||i instanceof wg||i instanceof Bu||i instanceof es||i instanceof Md)}function P_(i,e,n){if(!Iv(n)||"object"!=typeof(c=n)||null===c||Object.getPrototypeOf(c)!==Object.prototype&&null!==Object.getPrototypeOf(c)){const o=kh(n);throw e.pu("an object"===o?i+" a custom object":i+" "+o)}var c}function Xf(i,e,n){if((e=(0,Et.Yj)(e))instanceof Jl)return e._internalPath;if("string"==typeof e)return b_(i,e);throw Od("Field path arguments must be of type string or ",i,!1,void 0,n)}const a0=new RegExp("[~\\*/\\[\\]]");function b_(i,e,n){if(e.search(a0)>=0)throw Od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Jl(...e.split("."))._internalPath}catch{throw Od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Od(i,e,n,o,c){const h=o&&!o.isEmpty(),g=void 0!==c;let R=`Function ${e}() called with invalid data`;n&&(R+=" (via `toFirestore()`)"),R+=". ";let N="";return(h||g)&&(N+=" (found",h&&(N+=` in field ${o}`),g&&(N+=` in document ${c}`),N+=")"),new St(ct.INVALID_ARGUMENT,R+i+N)}function Cv(i,e){return i.some(n=>n.isEqual(e))}class Zf{constructor(e,n,o,c,h){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=c,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new es(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new c0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Sg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class c0 extends Zf{data(){return super.data()}}function Sg(i,e){return"string"==typeof e?b_(i,e):e instanceof Jl?e._internalPath:e._delegate._internalPath}function wv(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new St(ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class R_{}class ep extends R_{}function ed(i,e,...n){let o=[];e instanceof R_&&o.push(e),o=o.concat(n),function(h){const g=h.filter(N=>N instanceof Nd).length,R=h.filter(N=>N instanceof Lh).length;if(g>1||g>0&&R>0)throw new St(ct.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const c of o)i=c._apply(i);return i}class Lh extends ep{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new Lh(e,n,o)}_apply(e){const n=this._parse(e);return Av(e._query,n),new ea(e.firestore,e.converter,z(e._query,n))}_parse(e){const n=Xl(e.firestore);return function(h,g,R,N,B,J,ue){let Pe;if(B.isKeyField()){if("array-contains"===J||"array-contains-any"===J)throw new St(ct.INVALID_ARGUMENT,`Invalid Query. You can't perform '${J}' queries on documentId().`);if("in"===J||"not-in"===J){O_(ue,J);const Je=[];for(const Ut of ue)Je.push(M_(N,h,Ut));Pe={arrayValue:{values:Je}}}else Pe=M_(N,h,ue)}else"in"!==J&&"not-in"!==J&&"array-contains-any"!==J||O_(ue,J),Pe=vv(R,"where",ue,"in"===J||"not-in"===J);return br.create(B,J,Pe)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Nd extends R_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Nd(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:Wr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(c,h){let g=c;const R=h.getFlattenedFilters();for(const N of R)Av(g,N),g=z(g,N)}(e._query,n),new ea(e.firestore,e.converter,z(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Us extends ep{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Us(e,n)}_apply(e){const n=function(c,h,g){if(null!==c.startAt)throw new St(ct.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==c.endAt)throw new St(ct.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ic(h,g)}(e._query,this._field,this._direction);return new ea(e.firestore,e.converter,function(c,h){const g=c.explicitOrderBy.concat([h]);return new $a(c.path,c.collectionGroup,g,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(e._query,n))}}class Vh extends ep{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new Vh(e,n,o)}_apply(e){return new ea(e.firestore,e.converter,re(e._query,this._limit,this._limitType))}}class Uh extends ep{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Uh(e,n,o)}_apply(e){const n=td(e,this.type,this._docOrFields,this._inclusive);return new ea(e.firestore,e.converter,(h=n,new $a((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,h,c.endAt)));var c,h}}class tp extends ep{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new tp(e,n,o)}_apply(e){const n=td(e,this.type,this._docOrFields,this._inclusive);return new ea(e.firestore,e.converter,(h=n,new $a((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,h)));var c,h}}function td(i,e,n,o){if(n[0]=(0,Et.Yj)(n[0]),n[0]instanceof Zf)return function(h,g,R,N,B){if(!N)throw new St(ct.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${R}().`);const J=[];for(const ue of m(h))if(ue.field.isKeyField())J.push(Ta(g,N.key));else{const Pe=N.data.field(ue.field);if(Cc(Pe))throw new St(ct.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ue.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Pe){const Je=ue.field.canonicalString();throw new St(ct.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Je}' (used as the orderBy) does not exist.`)}J.push(Pe)}return new Ao(J,B)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const c=Xl(i.firestore);return function(g,R,N,B,J,ue){const Pe=g.explicitOrderBy;if(J.length>Pe.length)throw new St(ct.INVALID_ARGUMENT,`Too many arguments provided to ${B}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Je=[];for(let Ut=0;Ut<J.length;Ut++){const Jt=J[Ut];if(Pe[Ut].field.isKeyField()){if("string"!=typeof Jt)throw new St(ct.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${B}(), but got a ${typeof Jt}`);if(!w(g)&&-1!==Jt.indexOf("/"))throw new St(ct.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${B}() must be a plain document ID, but '${Jt}' contains a slash.`);const Qt=g.path.child(Ur.fromString(Jt));if(!Ht.isDocumentKey(Qt))throw new St(ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${B}() must result in a valid document path, but '${Qt}' is not because it contains an odd number of segments.`);const xn=new Ht(Qt);Je.push(Ta(R,xn))}else{const Qt=vv(N,B,Jt);Je.push(Qt)}}return new Ao(Je,ue)}(i._query,i.firestore._databaseId,c,e,n,o)}}function M_(i,e,n){if("string"==typeof(n=(0,Et.Yj)(n))){if(""===n)throw new St(ct.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!w(e)&&-1!==n.indexOf("/"))throw new St(ct.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Ur.fromString(n));if(!Ht.isDocumentKey(o))throw new St(ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ta(i,new Ht(o))}if(n instanceof es)return Ta(i,n._key);throw new St(ct.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kh(n)}.`)}function O_(i,e){if(!Array.isArray(i)||0===i.length)throw new St(ct.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Av(i,e){const n=function(c,h){for(const g of c)for(const R of g.getFlattenedFilters())if(h.indexOf(R.op)>=0)return R.op;return null}(i.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new St(ct.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Pg{convertValue(e,n="none"){switch(Ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ps(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(aa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw nn()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Ia(e,(c,h)=>{o[c]=this.convertValue(h,n)}),o}convertGeoPoint(e){return new wg(ps(e.latitude),ps(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=wu(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(rc(e));default:return null}}convertTimestamp(e){const n=Ic(e);return new gi(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Ur.fromString(e);un(gf(o));const c=new gs(o.get(1),o.get(3)),h=new Ht(o.popFirst(5));return c.isEqual(n)||Jr(`Document ${h} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),h}}function np(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class rp extends Pg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new es(this.firestore,null,n)}}class Fd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pl extends Zf{constructor(e,n,o,c,h,g){super(e,n,o,c,g),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(Sg("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class Ld extends pl{data(e={}){return super.data(e)}}class gl{constructor(e,n,o,c){this._firestore=e,this._userDataWriter=n,this._snapshot=c,this.metadata=new Fd(c.hasPendingWrites,c.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new Ld(this._firestore,this._userDataWriter,o.key,o,new Fd(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new St(ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(c,h){if(c._snapshot.oldDocs.isEmpty()){let g=0;return c._snapshot.docChanges.map(R=>({type:"added",doc:new Ld(c._firestore,c._userDataWriter,R.doc.key,R.doc,new Fd(c._snapshot.mutatedKeys.has(R.doc.key),c._snapshot.fromCache),c.query.converter),oldIndex:-1,newIndex:g++}))}{let g=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(R=>h||3!==R.type).map(R=>{const N=new Ld(c._firestore,c._userDataWriter,R.doc.key,R.doc,new Fd(c._snapshot.mutatedKeys.has(R.doc.key),c._snapshot.fromCache),c.query.converter);let B=-1,J=-1;return 0!==R.type&&(B=g.indexOf(R.doc.key),g=g.delete(R.doc.key)),1!==R.type&&(g=g.add(R.doc),J=g.indexOf(R.doc.key)),{type:nd(R.type),doc:N,oldIndex:B,newIndex:J}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nd(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nn()}}function Bh(i,e){return i instanceof pl&&e instanceof pl?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof gl&&e instanceof gl&&i._firestore===e._firestore&&w_(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class fu extends Pg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new es(this.firestore,null,n)}}function Rv(i,e,n){i=Br(i,es);const o=Br(i.firestore,ts),c=np(i.converter,e,n);return jh(o,[Yf(Xl(o),"setDoc",i._key,c,null!==i.converter,n).toMutation(i._key,Ki.none())])}function Mv(i,e,n,...o){i=Br(i,es);const c=Br(i.firestore,ts),h=Xl(c);let g;return g="string"==typeof(e=(0,Et.Yj)(e))||e instanceof Jl?Jf(h,"updateDoc",i._key,e,n,o):Ag(h,"updateDoc",i._key,e),jh(c,[g.toMutation(i._key,Ki.exists(!0))])}function Ov(i,...e){var n,o,c;i=(0,Et.Yj)(i);let h={includeMetadataChanges:!1},g=0;"object"!=typeof e[g]||Ql(e[g])||(h=e[g],g++);const R={includeMetadataChanges:h.includeMetadataChanges};if(Ql(e[g])){const ue=e[g];e[g]=null===(n=ue.next)||void 0===n?void 0:n.bind(ue),e[g+1]=null===(o=ue.error)||void 0===o?void 0:o.bind(ue),e[g+2]=null===(c=ue.complete)||void 0===c?void 0:c.bind(ue)}let N,B,J;if(i instanceof es)B=Br(i.firestore,ts),J=cc(i._key.path),N={next:ue=>{e[g]&&e[g](N_(B,i,ue))},error:e[g+1],complete:e[g+2]};else{const ue=Br(i,ea);B=Br(ue.firestore,ts),J=ue._query;const Pe=new fu(B);N={next:Je=>{e[g]&&e[g](new gl(B,Pe,ue,Je))},error:e[g+1],complete:e[g+2]},wv(i._query)}return function(Pe,Je,Ut,Jt){const Qt=new Mh(Jt),xn=new cg(Je,Qt,Ut);return Pe.asyncQueue.enqueueAndForget((0,de.c)(function*(){return Km(yield xh(Pe),xn)})),()=>{Qt.La(),Pe.asyncQueue.enqueueAndForget((0,de.c)(function*(){return Ym(yield xh(Pe),xn)}))}}(lo(B),J,R,N)}function jh(i,e){return function(o,c){const h=new Xi;return o.asyncQueue.enqueueAndForget((0,de.c)(function*(){return function KE(i,e,n){return t_.apply(this,arguments)}(yield Qy(o),c,h)})),h.promise}(lo(i),e)}function N_(i,e,n){const o=n.docs.get(e._key),c=new fu(i);return new pl(i,c,e._key,o,new Fd(n.hasPendingWrites,n.fromCache),e.converter)}const DI={maxAttempts:5};class Mg{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Xl(e)}set(e,n,o){this._verifyNotCommitted();const c=ju(e,this._firestore),h=np(c.converter,n,o),g=Yf(this._dataReader,"WriteBatch.set",c._key,h,null!==c.converter,o);return this._mutations.push(g.toMutation(c._key,Ki.none())),this}update(e,n,o,...c){this._verifyNotCommitted();const h=ju(e,this._firestore);let g;return g="string"==typeof(n=(0,Et.Yj)(n))||n instanceof Jl?Jf(this._dataReader,"WriteBatch.update",h._key,n,o,c):Ag(this._dataReader,"WriteBatch.update",h._key,n),this._mutations.push(g.toMutation(h._key,Ki.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ju(e,this._firestore);return this._mutations=this._mutations.concat(new xc(n._key,Ki.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new St(ct.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ju(i,e){if((i=(0,Et.Yj)(i)).firestore!==e)throw new St(ct.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Vv extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=Xl(n)}get(n){const o=ju(n,this._firestore),c=new rp(this._firestore);return this._transaction.lookup([o._key]).then(h=>{if(!h||1!==h.length)return nn();const g=h[0];if(g.isFoundDocument())return new Zf(this._firestore,c,g.key,g,o.converter);if(g.isNoDocument())return new Zf(this._firestore,c,o._key,null,o.converter);throw nn()})}set(n,o,c){const h=ju(n,this._firestore),g=np(h.converter,o,c),R=Yf(this._dataReader,"Transaction.set",h._key,g,null!==h.converter,c);return this._transaction.set(h._key,R),this}update(n,o,c,...h){const g=ju(n,this._firestore);let R;return R="string"==typeof(o=(0,Et.Yj)(o))||o instanceof Jl?Jf(this._dataReader,"Transaction.update",g._key,o,c,h):Ag(this._dataReader,"Transaction.update",g._key,o),this._transaction.update(g._key,R),this}delete(n){const o=ju(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ju(e,this._firestore),o=new fu(this._firestore);return super.get(e).then(c=>new pl(this._firestore,o,n._key,c._document,new Fd(!1,!1),n.converter))}}function Ng(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new St("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Wv(){if(typeof Uint8Array>"u")throw new St("unimplemented","Uint8Arrays are not available in this environment.")}function kI(){if(!function Ec(){return typeof atob<"u"}())throw new St("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){ui=wt.SDK_VERSION,(0,wt._registerComponent)(new Dt.Yl("firestore",(o,{instanceIdentifier:c,options:h})=>{const g=o.getProvider("app").getImmediate(),R=new ts(new Wc(o.getProvider("auth-internal")),new go(o.getProvider("app-check-internal")),function(B,J){if(!Object.prototype.hasOwnProperty.apply(B.options,["projectId"]))throw new St(ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gs(B.options.projectId,J)}(g,c),g);return h=Object.assign({useFetchStreams:n},h),R._setSettings(h),R},"PUBLIC").setMultipleInstances(!0)),(0,wt.registerVersion)(va,"4.4.2",e),(0,wt.registerVersion)(va,"4.4.2","esm2017")}();class kg{constructor(e){this._delegate=e}static fromBase64String(e){return kI(),new kg(Bu.fromBase64String(e))}static fromUint8Array(e){return Wv(),new kg(Bu.fromUint8Array(e))}toBase64(){return kI(),this._delegate.toBase64()}toUint8Array(){return Wv(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Hv(i){return function p0(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const o of e)if(o in n&&"function"==typeof n[o])return!0;return!1}(i,["next","error","complete"])}class g0{enableIndexedDbPersistence(e,n){return function Cg(i,e){hv(i=Br(i,ts));const n=lo(i);if(n._uninitializedComponentsProvider)throw new St(ct.FAILED_PRECONDITION,"SDK cache is already specified.");no("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),c=new Rh;return lv(n,c,new _g(c,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function uv(i){hv(i=Br(i,ts));const e=lo(i);if(e._uninitializedComponentsProvider)throw new St(ct.FAILED_PRECONDITION,"SDK cache is already specified.");no("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new Rh;return lv(e,o,new Hy(o,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function oI(i){if(i._initialized&&!i._terminated)throw new St(ct.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,de.c)(function*(){try{yield(n=(0,de.c)(function*(c){if(!cs.D())return Promise.resolve();const h=c+"main";yield cs.delete(h)}),function o(c){return n.apply(this,arguments)})(Pt(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class FI{constructor(e,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof gs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&no("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,o={}){!function ov(i,e,n,o={}){var c;const h=(i=Br(i,Eg))._getSettings(),g=`${e}:${n}`;if("firestore.googleapis.com"!==h.host&&h.host!==g&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},h),{host:g,ssl:!1})),o.mockUserToken){let R,N;if("string"==typeof o.mockUserToken)R=o.mockUserToken,N=Jn.MOCK_USER;else{R=(0,Et.YD)(o.mockUserToken,null===(c=i._app)||void 0===c?void 0:c.options.projectId);const B=o.mockUserToken.sub||o.mockUserToken.user_id;if(!B)throw new St(ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new Jn(B)}i._authCredentials=new yl(new fs(R,N))}}(this._delegate,e,n,o)}enableNetwork(){return function T_(i){return function y_(i){return i.asyncQueue.enqueue((0,de.c)(function*(){const e=yield Ky(i),n=yield Yy(i);return e.setNetworkEnabled(!0),function(c){const h=jt(c);return h.v_.delete(0),Td(h)}(n)}))}(lo(i=Br(i,ts)))}(this._delegate)}disableNetwork(){return function dv(i){return function $f(i){return i.asyncQueue.enqueue((0,de.c)(function*(){const e=yield Ky(i),n=yield Yy(i);return e.setNetworkEnabled(!1),(o=(0,de.c)(function*(h){const g=jt(h);g.v_.add(0),yield Fc(g),g.x_.set("Offline")}),function c(h){return o.apply(this,arguments)})(n);var o}))}(lo(i=Br(i,ts)))}(this._delegate)}enablePersistence(e){let n=!1,o=!1;return e&&(n=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,rv("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function aI(i){return function(n){const o=new Xi;return n.asyncQueue.enqueueAndForget((0,de.c)(function*(){return function s_(i,e){return Vy.apply(this,arguments)}(yield Qy(n),o)})),o.promise}(lo(i=Br(i,ts)))}(this._delegate)}onSnapshotsInSync(e){return function vI(i,e){return function Zy(i,e){const n=new Mh(e);return i.asyncQueue.enqueueAndForget((0,de.c)(function*(){return c=yield xh(i),h=n,jt(c).K_.add(h),void h.next();var c,h})),()=>{n.La(),i.asyncQueue.enqueueAndForget((0,de.c)(function*(){return c=yield xh(i),h=n,void jt(c).K_.delete(h);var c,h}))}}(lo(i=Br(i,ts)),Ql(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new St("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gu(this,I_(this._delegate,e))}catch(n){throw za(n,"collection()","Firestore.collection()")}}doc(e){try{return new pu(this,Ig(this._delegate,e))}catch(n){throw za(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qa(this,function nI(i,e){if(i=Br(i,Eg),E_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new St(ct.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ea(i,null,(o=e,new $a(Ur.emptyPath(),o)));var o}(this._delegate,e))}catch(n){throw za(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function L_(i,e,n){i=Br(i,ts);const o=Object.assign(Object.assign({},DI),n);return function(h){if(h.maxAttempts<1)throw new St(ct.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(h,g,R){const N=new Xi;return h.asyncQueue.enqueueAndForget((0,de.c)(function*(){const B=yield function Jy(i){return g_(i).then(e=>e.datastore)}(h);new Uf(h.asyncQueue,B,R,g,N).ja()})),N.promise}(lo(i),c=>e(new Vv(i,c)),o)}(this._delegate,n=>e(new B_(this,n)))}batch(){return lo(this._delegate),new j_(new Mg(this._delegate,e=>jh(this._delegate,e)))}loadBundle(e){return function s0(i,e){const n=lo(i=Br(i,ts)),o=new av;return function eI(i,e,n,o){const c=function(g,R){let N;return N="string"==typeof g?fc().encode(g):g,J=function(J,ue){if(J instanceof Uint8Array)return d_(J,void 0);if(J instanceof ArrayBuffer)return d_(new Uint8Array(J),void 0);if(J instanceof ReadableStream)return J.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new zy(J,R);var J}(n,Th(e));i.asyncQueue.enqueueAndForget((0,de.c)(function*(){!function n0(i,e,n){const o=jt(i);var c;(c=(0,de.c)(function*(g,R,N){try{const B=yield R.getMetadata();if(yield function(Ut,Jt){const Qt=jt(Ut),xn=Ui(Jt.createTime);return Qt.persistence.runTransaction("hasNewerBundle","readonly",_r=>Qt.$r.getBundleMetadata(_r,Jt.id)).then(_r=>!!_r&&_r.createTime.compareTo(xn)>=0)}(g.localStore,B))return yield R.close(),N._completeWith({taskState:"Success",documentsLoaded:(Ut=B).totalDocuments,bytesLoaded:Ut.totalBytes,totalDocuments:Ut.totalDocuments,totalBytes:Ut.totalBytes}),Promise.resolve(new Set);N._updateProgress(xy(B));const J=new Ha(B,g.localStore,R.serializer);let ue=yield R.Oa();for(;ue;){const Je=yield J.na(ue);Je&&N._updateProgress(Je),ue=yield R.Oa()}const Pe=yield J.complete();return yield fl(g,Pe.sa,void 0),yield function(Ut,Jt){const Qt=jt(Ut);return Qt.persistence.runTransaction("Save bundle","readwrite",xn=>Qt.$r.saveBundleMetadata(xn,Jt))}(g.localStore,B),N._completeWith(Pe.progress),Promise.resolve(Pe.ia)}catch(B){return no("SyncEngine",`Loading bundle failed with ${B}`),N._failWith(B),Promise.resolve(new Set)}var Ut}),function h(g,R,N){return c.apply(this,arguments)})(o,e,n).then(c=>{o.sharedClientState.notifyBundleLoaded(c)})}(yield Qy(i),c,o)}))}(n,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function o0(i,e){return function Wf(i,e){return i.asyncQueue.enqueue((0,de.c)(function*(){return function(o,c){const h=jt(o);return h.persistence.runTransaction("Get named query","readonly",g=>h.$r.getNamedQuery(g,c))}(yield jf(i),e)}))}(lo(i=Br(i,ts)),e).then(n=>n?new ea(i,null,n.query):null)}(this._delegate,e).then(n=>n?new qa(this,n):null)}}class U_ extends Pg{constructor(e){super(),this.firestore=e}convertBytes(e){return new kg(new Bu(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return pu.forKey(n,this.firestore,null)}}class B_{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new U_(e)}get(e){const n=mu(e);return this._delegate.get(n).then(o=>new Fg(this._firestore,new pl(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(e,n,o){const c=mu(e);return o?(Ng("Transaction.set",o),this._delegate.set(c,n,o)):this._delegate.set(c,n),this}update(e,n,o,...c){const h=mu(e);return 2===arguments.length?this._delegate.update(h,n):this._delegate.update(h,n,o,...c),this}delete(e){const n=mu(e);return this._delegate.delete(n),this}}class j_{constructor(e){this._delegate=e}set(e,n,o){const c=mu(e);return o?(Ng("WriteBatch.set",o),this._delegate.set(c,n,o)):this._delegate.set(c,n),this}update(e,n,o,...c){const h=mu(e);return 2===arguments.length?this._delegate.update(h,n):this._delegate.update(h,n,o,...c),this}delete(e){const n=mu(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class $h{constructor(e,n,o){this._firestore=e,this._userDataWriter=n,this._delegate=o}fromFirestore(e,n){const o=new Ld(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Lg(this._firestore,o),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const o=$h.INSTANCES;let c=o.get(e);c||(c=new WeakMap,o.set(e,c));let h=c.get(n);return h||(h=new $h(e,new U_(e),n),c.set(n,h)),h}}$h.INSTANCES=new WeakMap;class pu{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new U_(e)}static forPath(e,n,o){if(e.length%2!=0)throw new St("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new pu(n,new es(n._delegate,o,new Ht(e)))}static forKey(e,n,o){return new pu(n,new es(n._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new gu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gu(this.firestore,I_(this._delegate,e))}catch(n){throw za(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Et.Yj)(e))instanceof es&&C_(this._delegate,e)}set(e,n){n=Ng("DocumentReference.set",n);try{return n?Rv(this._delegate,e,n):Rv(this._delegate,e)}catch(o){throw za(o,"setDoc()","DocumentReference.set()")}}update(e,n,...o){try{return 1===arguments.length?Mv(this._delegate,e):Mv(this._delegate,e,n,...o)}catch(c){throw za(c,"updateDoc()","DocumentReference.update()")}}delete(){return function _I(i){return jh(Br(i.firestore,ts),[new xc(i._key,Ki.none())])}(this._delegate)}onSnapshot(...e){const n=LI(e),o=VI(e,c=>new Fg(this.firestore,new pl(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return Ov(this._delegate,n,o)}get(e){let n;return n="cache"===e?.source?function Pv(i){i=Br(i,es);const e=Br(i.firestore,ts),n=lo(e),o=new fu(e);return function v_(i,e){const n=new Xi;return i.asyncQueue.enqueueAndForget((0,de.c)(function*(){return(o=(0,de.c)(function*(h,g,R){try{const N=yield function(J,ue){const Pe=jt(J);return Pe.persistence.runTransaction("read document","readonly",Je=>Pe.localDocuments.getDocument(Je,ue))}(h,g);N.isFoundDocument()?R.resolve(N):N.isNoDocument()?R.resolve(null):R.reject(new St(ct.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const B=ql(N,`Failed to get document '${g} from cache`);R.reject(B)}}),function c(h,g,R){return o.apply(this,arguments)})(yield jf(i),e,n);var o})),n.promise}(n,i._key).then(c=>new pl(e,o,i._key,c,new Fd(null!==c&&c.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function bv(i){i=Br(i,es);const e=Br(i.firestore,ts);return Gf(lo(e),i._key,{source:"server"}).then(n=>N_(e,i,n))}(this._delegate):function l0(i){i=Br(i,es);const e=Br(i.firestore,ts);return Gf(lo(e),i._key).then(n=>N_(e,i,n))}(this._delegate),n.then(o=>new Fg(this.firestore,new pl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new pu(this.firestore,this._delegate.withConverter(e?$h.getInstance(this.firestore,e):null))}}function za(i,e,n){return i.message=i.message.replace(e,n),i}function LI(i){for(const e of i)if("object"==typeof e&&!Hv(e))return e;return{}}function VI(i,e){var n,o;let c;return c=Hv(i[0])?i[0]:Hv(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:h=>{c.next&&c.next(e(h))},error:null===(n=c.error)||void 0===n?void 0:n.bind(c),complete:null===(o=c.complete)||void 0===o?void 0:o.bind(c)}}class Fg{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new pu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Bh(this._delegate,e._delegate)}}class Lg extends Fg{data(e){const n=this._delegate.data(e);return this._delegate._converter||function Eu(i,e){i||nn()}(void 0!==n),n}}class qa{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new U_(e)}where(e,n,o){try{return new qa(this.firestore,ed(this._delegate,function xd(i,e,n){const o=e,c=Sg("where",i);return Lh._create(c,o,n)}(e,n,o)))}catch(c){throw za(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new qa(this.firestore,ed(this._delegate,function uI(i,e="asc"){const n=e,o=Sg("orderBy",i);return Us._create(o,n)}(e,n)))}catch(o){throw za(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new qa(this.firestore,ed(this._delegate,function lI(i){return zf("limit",i),Vh._create("limit",i,"F")}(e)))}catch(n){throw za(n,"limit()","Query.limit()")}}limitToLast(e){try{return new qa(this.firestore,ed(this._delegate,function dI(i){return zf("limitToLast",i),Vh._create("limitToLast",i,"L")}(e)))}catch(n){throw za(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new qa(this.firestore,ed(this._delegate,function Tv(...i){return Uh._create("startAt",i,!0)}(...e)))}catch(n){throw za(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new qa(this.firestore,ed(this._delegate,function Dv(...i){return Uh._create("startAfter",i,!1)}(...e)))}catch(n){throw za(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new qa(this.firestore,ed(this._delegate,function hI(...i){return tp._create("endBefore",i,!1)}(...e)))}catch(n){throw za(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new qa(this.firestore,ed(this._delegate,function fI(...i){return tp._create("endAt",i,!0)}(...e)))}catch(n){throw za(n,"endAt()","Query.endAt()")}}isEqual(e){return w_(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function mI(i){i=Br(i,ea);const e=Br(i.firestore,ts),n=lo(e),o=new fu(e);return function Xy(i,e){const n=new Xi;return i.asyncQueue.enqueueAndForget((0,de.c)(function*(){return(o=(0,de.c)(function*(h,g,R){try{const N=yield Ch(h,g,!0),B=new ug(g,N.hs),J=B.ha(N.documents),ue=B.applyChanges(J,!1);R.resolve(ue.snapshot)}catch(N){const B=ql(N,`Failed to execute query '${g} against cache`);R.reject(B)}}),function c(h,g,R){return o.apply(this,arguments)})(yield jf(i),e,n);var o})),n.promise}(n,i._query).then(c=>new gl(e,o,i,c))}(this._delegate):"server"===e?.source?function ip(i){i=Br(i,ea);const e=Br(i.firestore,ts),n=lo(e),o=new fu(e);return Nh(n,i._query,{source:"server"}).then(c=>new gl(e,o,i,c))}(this._delegate):function gI(i){i=Br(i,ea);const e=Br(i.firestore,ts),n=lo(e),o=new fu(e);return wv(i._query),Nh(n,i._query).then(c=>new gl(e,o,i,c))}(this._delegate),n.then(o=>new $_(this.firestore,new gl(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const n=LI(e),o=VI(e,c=>new $_(this.firestore,new gl(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return Ov(this._delegate,n,o)}withConverter(e){return new qa(this.firestore,this._delegate.withConverter(e?$h.getInstance(this.firestore,e):null))}}class _0{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Lg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $_{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new qa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Lg(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new _0(this._firestore,n))}forEach(e,n){this._delegate.forEach(o=>{e.call(n,new Lg(this._firestore,o))})}isEqual(e){return Bh(this._delegate,e._delegate)}}class gu extends qa{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new pu(this.firestore,e):null}doc(e){try{return new pu(this.firestore,void 0===e?Ig(this._delegate):Ig(this._delegate,e))}catch(n){throw za(n,"doc()","CollectionReference.doc()")}}add(e){return function yI(i,e){const n=Br(i.firestore,ts),o=Ig(i),c=np(i.converter,e);return jh(n,[Yf(Xl(i.firestore),"addDoc",o._key,c,null!==i.converter,{}).toMutation(o._key,Ki.exists(!1))]).then(()=>o)}(this._delegate,e).then(n=>new pu(this.firestore,n))}isEqual(e){return C_(this._delegate,e._delegate)}withConverter(e){return new gu(this.firestore,this._delegate.withConverter(e?$h.getInstance(this.firestore,e):null))}}function mu(i){return Br(i,es)}class G_{constructor(...e){this._delegate=new Jl(...e)}static documentId(){return new G_(Ii.keyField().canonicalString())}isEqual(e){return(e=(0,Et.Yj)(e))instanceof Jl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function AI(){return new S_("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Gh(e)}static delete(){const e=function V_(){return new Fh("deleteField")}();return e._methodName="FieldValue.delete",new Gh(e)}static arrayUnion(...e){const n=function SI(...i){return new Dg("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new Gh(n)}static arrayRemove(...e){const n=function PI(...i){return new Qf("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new Gh(n)}static increment(e){const n=function bI(i){return new yv("increment",i)}(e);return n._methodName="FieldValue.increment",new Gh(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const zv={Firestore:FI,GeoPoint:wg,Timestamp:gi,Blob:kg,Transaction:B_,WriteBatch:j_,DocumentReference:pu,DocumentSnapshot:Fg,Query:qa,QueryDocumentSnapshot:Lg,QuerySnapshot:$_,CollectionReference:gu,FieldPath:G_,FieldValue:Gh,setLogLevel:function m0(i){!function Xa(i){er.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function y0(i){(function UI(i,e){i.INTERNAL.registerComponent(new Dt.Yl("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),c=n.getProvider("firestore").getImmediate();return e(o,c)},"PUBLIC").setServiceProps(Object.assign({},zv)))})(i,(e,n)=>new FI(e,n,new g0)),i.registerVersion("@firebase/firestore-compat","0.3.25")}(qe.c);var BI=V(9252);function qv(i,e){return function jI(i,e=Ie.M){return new je._(n=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},n)}):o=i.onSnapshot({includeMetadataChanges:!0},n),()=>{o?.()}})}(i,e)}function Ug(i,e){return qv(i,e).pipe((0,Ve.k)(n=>({payload:n,type:"query"})))}class Kv{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const o=this.ref.collection(e),{ref:c,query:h}=Xv(o,n);return new Bg(c,h,this.afs)}snapshotChanges(){return function Vg(i,e){return qv(i,e).pipe((0,le.W)(void 0),Se(),(0,Ve.k)(n=>{const[o,c]=n;return c.exists?o?.exists?{payload:c,type:"modified"}:{payload:c,type:"added"}:{payload:c,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ye.wH)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ve.k)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,Ne.Q)(this.ref.get(e)).pipe(ye.wH)}}function ap(i,e){return Ug(i,e).pipe((0,le.W)(void 0),Se(),(0,Ve.k)(n=>{const[o,c]=n,h=c.payload.docChanges(),g=h.map(R=>({type:R.type,payload:R}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(c.payload.metadata)&&c.payload.docs.forEach((R,N)=>{const B=h.find(ue=>ue.doc.ref.isEqual(R.ref)),J=o?.payload.docs.find(ue=>ue.ref.isEqual(R.ref));B&&JSON.stringify(B.doc.metadata)===JSON.stringify(R.metadata)||!B&&J&&JSON.stringify(J.metadata)===JSON.stringify(R.metadata)||g.push({type:"modified",payload:{oldIndex:N,newIndex:N,type:"modified",doc:R}})}),g}))}function $I(i,e,n){return ap(i,n).pipe((0,be.K)((o,c)=>function Yv(i,e,n){return e.forEach(o=>{n.indexOf(o.type)>-1&&(i=function GI(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Qv(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Qv(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Qv(i,e.oldIndex,1)}return i}(i,o))}),i}(o,c.map(h=>h.payload),e),[]),function pe(i,e=ot.Z){return i=i??Ue,(0,$e.i)((n,o)=>{let c,h=!0;n.subscribe((0,we.e)(o,g=>{const R=e(g);(h||!i(c,R))&&(h=!1,c=R,o.next(g))}))})}(),(0,Ve.k)(o=>o.map(c=>({type:c.type,payload:c}))))}function Qv(i,e,n,...o){const c=i.slice();return c.splice(e,n,...o),c}function W_(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Bg{ref;query;afs;constructor(e,n,o){this.ref=e,this.query=n,this.afs=o}stateChanges(e){let n=ap(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Ve.k)(o=>o.filter(c=>e.indexOf(c.type)>-1)))),n.pipe((0,le.W)(void 0),Se(),(0,Ke.I)(([o,c])=>c.length>0||!o),(0,Ve.k)(([,o])=>o),ye.wH)}auditTrail(e){return this.stateChanges(e).pipe((0,be.K)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=W_(e);return $I(this.query,n,this.afs.schedulers.outsideAngular).pipe(ye.wH)}valueChanges(e={}){return Ug(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ve.k)(n=>n.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),ye.wH)}get(e){return(0,Ne.Q)(this.query.get(e)).pipe(ye.wH)}add(e){return this.ref.add(e)}doc(e){return new Kv(this.ref.doc(e),this.afs)}}class WI{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?ap(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ve.k)(n=>n.filter(o=>e.indexOf(o.type)>-1)),(0,Ke.I)(n=>n.length>0),ye.wH):ap(this.query,this.afs.schedulers.outsideAngular).pipe(ye.wH)}auditTrail(e){return this.stateChanges(e).pipe((0,be.K)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=W_(e);return $I(this.query,n,this.afs.schedulers.outsideAngular).pipe(ye.wH)}valueChanges(e={}){return Ug(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ve.k)(o=>o.payload.docs.map(c=>e.idField?{[e.idField]:c.id,...c.data()}:c.data())),ye.wH)}get(e){return(0,Ne.Q)(this.query.get(e)).pipe(ye.wH)}}const Jv=new F.UbH("angularfire2.enableFirestorePersistence"),cp=new F.UbH("angularfire2.firestore.persistenceSettings"),HI=new F.UbH("angularfire2.firestore.settings"),zI=new F.UbH("angularfire2.firestore.use-emulator");function Xv(i,e=(n=>n)){return{query:e(i),ref:i}}let qI=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,o,c,h,g,R,N,B,J,ue,Pe,Je,Ut,Jt,Qt,xn,_r){this.schedulers=N;const Nn=(0,G._G)(n,R,o),Dn=J;ue&&(0,A.CU)(Nn,R,Pe,Ut,Jt,Qt,Je,xn),[this.firestore,this.persistenceEnabled$]=(0,G.PQ)(`${Nn.name}.firestore`,"AngularFirestore",Nn.name,()=>{const _i=R.runOutsideAngular(()=>Nn.firestore());if(h&&_i.settings(h),Dn&&_i.useEmulator(...Dn),c&&!(0,_.uf)(g)){const Mi=()=>{try{return(0,Ne.Q)(_i.enablePersistence(B||void 0).then(()=>!0,()=>!1))}catch(Hr){return typeof console<"u"&&console.warn(Hr),(0,he.of)(!1)}};return[_i,R.runOutsideAngular(Mi)]}return[_i,(0,he.of)(!1)]},[h,Dn,c])}collection(n,o){let c;c="string"==typeof n?this.firestore.collection(n):n;const{ref:h,query:g}=Xv(c,o),R=this.schedulers.ngZone.run(()=>h);return new Bg(R,g,this)}collectionGroup(n,o){const c=o||(g=>g),h=this.firestore.collectionGroup(n);return new WI(c(h),this)}doc(n){let o;o="string"==typeof n?this.firestore.doc(n):n;const c=this.schedulers.ngZone.run(()=>o);return new Kv(c,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||i)(F.CoB(G.E9),F.CoB(G.Ml,8),F.CoB(Jv,8),F.CoB(HI,8),F.CoB(F.AHE),F.CoB(F.WW2),F.CoB(ye.u),F.CoB(cp,8),F.CoB(zI,8),F.CoB(A._o,8),F.CoB(A.GW,8),F.CoB(A.mq,8),F.CoB(A.ox,8),F.CoB(A.cd,8),F.CoB(A._8,8),F.CoB(A.Ev,8),F.CoB(ye.gJ,8))};static \u0275prov=F.wxM({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),KI=(()=>{class i{constructor(){BI.c.registerVersion("angularfire",ye.j1.full,"fst-compat")}static enablePersistence(n){return{ngModule:i,providers:[{provide:Jv,useValue:!0},{provide:cp,useValue:n}]}}static \u0275fac=function(o){return new(o||i)};static \u0275mod=F.a4G({type:i});static \u0275inj=F.s3X({providers:[qI]})}return i})();var YI=V(8836),H_=V(4856),Zv=V(788);function eE(i,e){1&i&&(F.I0R(0,"span",12),F.OEk(1,"email is required"),F.C$Y())}function QI(i,e){1&i&&(F.I0R(0,"span",12),F.OEk(1," password is required "),F.C$Y())}function v0(i,e){1&i&&F.wR5(0,"input",13)}function tE(i,e){1&i&&(F.I0R(0,"span",12),F.OEk(1," confirm password is required "),F.C$Y())}function nE(i,e){if(1&i){const n=F.KQA();F.I0R(0,"button",14),F.qCj("click",function(){F.usT(n);const c=F.GaO();return F.CGJ(c.googleLogin())}),F.OEk(1," Sing in with Google "),F.wR5(2,"img",15),F.C$Y()}}function jg(i,e){if(1&i){const n=F.KQA();F.I0R(0,"button",14),F.qCj("click",function(){F.usT(n);const c=F.GaO();return F.CGJ(c.emailAndPasswordLogin())}),F.OEk(1," Sign in "),F.C$Y()}}function E0(i,e){if(1&i){const n=F.KQA();F.I0R(0,"button",16),F.qCj("click",function(){F.usT(n);const c=F.GaO();return F.CGJ(c.registration())}),F.OEk(1," Register "),F.C$Y()}if(2&i){const n=F.GaO();F.E7m("disabled",!n.form.valid)}}const JI=[{path:"",component:(()=>{class i{constructor(n,o){this.fb=n,this.logInService=o,this.selected=!0,this.form=this.fb.group({email:["",[Q.AQ.required,Q.AQ.email]],password:["",Q.AQ.required],confirmPassword:["",Q.AQ.required]})}ngOnInit(){}select(){this.selected=!this.selected,this.clearInputs()}googleLogin(){this.logInService.loginWithGoogle()}emailAndPasswordLogin(){const n=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.loginWithEmailAndPassword(n,o)}registration(){let n=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.registration(n,o),this.clearInputs(),this.selected=!0}clearInputs(){this.form.get("email")?.setValue(""),this.form.get("password")?.setValue(""),this.form.get("email")?.markAsUntouched(),this.form.get("password")?.markAsUntouched()}static#e=this.\u0275fac=function(o){return new(o||i)(F.GI1(Q.im),F.GI1(Zv.e))};static#t=this.\u0275cmp=F.In1({type:i,selectors:[["app-login"]],decls:22,vars:10,consts:[[1,"loginContainer"],[1,"container"],[3,"ngClass","click"],[3,"formGroup"],[1,"inputs"],["formControlName","email","placeholder","Email"],["class","error-message",4,"ngIf"],["type","password","formControlName","password","placeholder","Password"],["type","password","formControlName","confirmPassword","placeholder","Confirm Password",4,"ngIf"],[3,"click",4,"ngIf"],[3,"disabled","click",4,"ngIf"],["routerLink","/products"],[1,"error-message"],["type","password","formControlName","confirmPassword","placeholder","Confirm Password"],[3,"click"],["src","assets/google.png","alt","img"],[3,"disabled","click"]],template:function(o,c){if(1&o&&(F.I0R(0,"div",0)(1,"div",1)(2,"div")(3,"p",2),F.qCj("click",function(){return c.select()}),F.OEk(4,"LOG IN"),F.C$Y(),F.I0R(5,"p",2),F.qCj("click",function(){return c.select()}),F.OEk(6,"SIGN UP"),F.C$Y()(),F.I0R(7,"form",3)(8,"div",4),F.wR5(9,"input",5),F.yuY(10,eE,2,0,"span",6),F.C$Y(),F.I0R(11,"div",4),F.wR5(12,"input",7),F.yuY(13,QI,2,0,"span",6),F.C$Y(),F.I0R(14,"div",4),F.yuY(15,v0,1,0,"input",8)(16,tE,2,0,"span",6),F.C$Y(),F.yuY(17,nE,3,0,"button",9)(18,jg,2,0,"button",9)(19,E0,2,1,"button",10),F.I0R(20,"button",11),F.OEk(21,"Guest Mode"),F.C$Y()()()()),2&o){let h,g,R;F.yG2(3),F.E7m("ngClass",c.selected?"selected":""),F.yG2(2),F.E7m("ngClass",c.selected?"":"selected"),F.yG2(2),F.E7m("formGroup",c.form),F.yG2(3),F.E7m("ngIf",(null==(h=c.form.get("email"))?null:h.invalid)&&(null==(h=c.form.get("email"))?null:h.touched)),F.yG2(3),F.E7m("ngIf",(null==(g=c.form.get("password"))?null:g.invalid)&&(null==(g=c.form.get("password"))?null:g.touched)),F.yG2(2),F.E7m("ngIf",!c.selected),F.yG2(),F.E7m("ngIf",(null==(R=c.form.get("confirmPassword"))?null:R.invalid)&&(null==(R=c.form.get("confirmPassword"))?null:R.touched)&&!c.selected),F.yG2(),F.E7m("ngIf",c.selected),F.yG2(),F.E7m("ngIf",c.selected),F.yG2(),F.E7m("ngIf",!c.selected)}},dependencies:[_.QF,_.u_,Q.sz,Q.ot,Q.ue,Q.u,Q.uW,Q.Wo,H_.ER],styles:[".loginContainer[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:400px;height:400px;background-color:#62dfdf;border-radius:4px;background-image:url(background.05b7e6a7f70c58a5.webp);background-size:cover}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;gap:20px;padding:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{cursor:pointer;font-size:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{width:100%;height:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:200px;height:30px;border-radius:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#13afc7;color:#fff;display:flex;justify-content:center;align-items:center;cursor:pointer}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:5px}.selected[_ngcontent-%COMP%]{color:#fff;border-bottom:1px solid white}.error-message[_ngcontent-%COMP%]{font-size:14px;color:red}.button-disabled[_ngcontent-%COMP%]{background-color:#8ac9d3}"],changeDetection:0})}return i})()}];let Vd=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=F.a4G({type:i});static#n=this.\u0275inj=F.s3X({imports:[H_.qQ.forChild(JI),H_.qQ]})}return i})();var rE=V(7048);let XI=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=F.a4G({type:i});static#n=this.\u0275inj=F.s3X({providers:[YI.wR],imports:[_.MD,Q.y,Q.sl,KI,A.Q$,Vd,rE.SU]})}return i})()},788:($t,We,V)=>{V.d(We,{e:()=>he});var _=V(8836),Q=V(6700),A=V(4704),F=V(9144),ye=V(2700),G=V(4496),Ie=V(2740),je=V(7048),Ne=V(4856);let he=(()=>{class le{constructor(we,Se,Ve){this.auth=we,this.http=Se,this.router=Ve,this.loggedUser=new Q.g(void 0),this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app/musicShopUsers",this.likedProducts=new Q.g([])}loginWithGoogle(){this.auth.signInWithPopup(new _.wR).then(we=>{localStorage.setItem("token",JSON.stringify(we.user?.uid)),this.findUser(we.user?.email).subscribe(Se=>{void 0===Se?this.addUserTodatabase(we.user?.email,we.user?.photoURL):this.findUser(we.user?.email).subscribe(Ve=>{this.loggedUser.next(Ve),this.likedProducts.next(Ve?.user.likedProducts),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(Ve))})})},we=>{alert(we.mesasage)})}loginWithEmailAndPassword(we,Se){this.auth.signInWithEmailAndPassword(we,Se).then(Ve=>{this.findUser(Ve.user?.email).subscribe(be=>{this.loggedUser.next(be),this.likedProducts.next(be?.user.likedProducts),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(be))})},Ve=>{alert(Ve.message),console.log(Ve.mesasage)})}registration(we,Se){this.auth.createUserWithEmailAndPassword(we,Se).then(Ve=>{this.addUserTodatabase(Ve.user?.email)},Ve=>{alert(Ve.message)})}addUserTodatabase(we,Se){this.http.post(`${this.url}.json`,{email:we,isAdmin:!1,photoUrl:Se,address:"",likedProducts:[{key:"none",category:"other"}],purchasedProducts:[{email:we,userId:we,date:new Date,totalPrice:0,products:[{quantity:-1,product:{key:"unknown",product:{category:"other",model:"none",price:-1,quantity:-1,discount:-1,photoUrl:["none"]}}}]}]}).subscribe(()=>{console.log("User created succesfully")},be=>{alert(be.message)})}findUser(we){return this.http.get(`${this.url}.json`).pipe((0,A.k)(Se=>{let Ve,be="";if(Object.entries(Se).find(([ot,pe])=>{pe.email===we&&(Ve=pe,be=ot)}),be&&Ve)return{user:Ve,key:be}}),(0,F.a)(Se=>(console.error(Se),(0,ye.of)(void 0))))}findUserById(we){return this.http.get(`${this.url}/${we}.json`).pipe((0,A.k)(Se=>Se.email))}checkIfLoggedIn(){if(localStorage.getItem("currentUser")){let we=JSON.parse(localStorage.getItem("currentUser"));this.loggedUser.next(we)}}logOut(){localStorage.removeItem("currentUser"),this.likedProducts.next([]),this.loggedUser.next(void 0)}static#e=this.\u0275fac=function(Se){return new(Se||le)(G.CoB(Ie._o),G.CoB(je.KK),G.CoB(Ne.E5))};static#t=this.\u0275prov=G.wxM({token:le,factory:le.\u0275fac,providedIn:"root"})}return le})()},6180:($t,We,V)=>{V.r(We),V.d(We,{ProductPageModule:()=>Et});var _=V(1368),Q=V(4856),A=V(4496),F=V(3804),ye=V(788),G=V(6940),Ie=V(1092),je=V(4320),Ne=V(112),he=V(3252),le=V(3048);let Ve=(()=>{class bt{constructor(Le){this.cdr=Le,this.index=0,this.imgUrls=["assets/guitar1.jpg","assets/piano.png","assets/drum.avif","assets/bass.webp"],this.img=this.imgUrls[0]}ngOnInit(){this.startTimeChangeInterval()}startTimeChangeInterval(){this.intervalSubscription=function Se(bt=0,ht=Ne.M){return bt<0&&(bt=0),function we(bt=0,ht,Le=Ne.a){let et=-1;return null!=ht&&((0,le.G)(ht)?Le=ht:et=ht),new he._(tt=>{let nt=function $e(bt){return bt instanceof Date&&!isNaN(bt)}(bt)?+bt-Le.now():bt;nt<0&&(nt=0);let Nt=0;return Le.schedule(function(){tt.closed||(tt.next(Nt++),0<=et?this.schedule(void 0,et):tt.complete())},nt)})}(bt,bt,ht)}(4e3).subscribe(()=>{this.changeImgUp(),this.cdr.detectChanges()})}changeImgUp(){3===this.index?(this.index=0,this.img=this.imgUrls[this.index]):(this.img=this.imgUrls[this.index+1],this.index++),this.clearInterval()}changeImgDown(){0===this.index?(this.index=3,this.img=this.imgUrls[this.index]):(this.img=this.imgUrls[this.index-1],this.index--),this.clearInterval()}changeIndex(Le){this.index=Le,this.img=this.imgUrls[Le],this.clearInterval()}clearInterval(){this.intervalSubscription&&this.intervalSubscription?.unsubscribe(),this.startTimeChangeInterval()}static#e=this.\u0275fac=function(et){return new(et||bt)(A.GI1(A.kD9))};static#t=this.\u0275cmp=A.In1({type:bt,selectors:[["app-top-products"]],decls:12,vars:5,consts:[[1,"topProducts-container"],[3,"ngClass","click"],[1,"arrows"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"images"],["alt","img",3,"src"]],template:function(et,tt){1&et&&(A.I0R(0,"div",0)(1,"div")(2,"div")(3,"div",1),A.qCj("click",function(){return tt.changeIndex(0)}),A.C$Y(),A.I0R(4,"div",1),A.qCj("click",function(){return tt.changeIndex(1)}),A.C$Y(),A.I0R(5,"div",1),A.qCj("click",function(){return tt.changeIndex(2)}),A.C$Y(),A.I0R(6,"div",1),A.qCj("click",function(){return tt.changeIndex(3)}),A.C$Y()(),A.I0R(7,"div",2)(8,"img",3),A.qCj("click",function(){return tt.changeImgDown()}),A.C$Y(),A.I0R(9,"img",4),A.qCj("click",function(){return tt.changeImgUp()}),A.C$Y()()(),A.I0R(10,"div",5),A.wR5(11,"img",6),A.C$Y()()),2&et&&(A.yG2(3),A.E7m("ngClass",0===tt.index?"highlight":""),A.yG2(),A.E7m("ngClass",1===tt.index?"highlight":""),A.yG2(),A.E7m("ngClass",2===tt.index?"highlight":""),A.yG2(),A.E7m("ngClass",3===tt.index?"highlight":""),A.yG2(5),A.E7m("src",tt.img,A.K6U))},dependencies:[_.QF],styles:[".topProducts-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0 auto 100px;gap:20px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;flex-direction:column;align-items:center;gap:10px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child{display:flex;gap:10px;width:100%}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]{width:10px;height:10px;border:.4px solid #ffc107;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]{display:flex}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:600px;height:300px}.highlight[_ngcontent-%COMP%]{background-color:#ffc107}"],changeDetection:0})}return bt})();function be(bt,ht){1&bt&&(A.I0R(0,"div",2),A.wR5(1,"div",3),A.I0R(2,"p"),A.OEk(3,"Loading..."),A.C$Y()())}function ot(bt,ht){if(1&bt){const Le=A.KQA();A.I0R(0,"app-card",9),A.qCj("editEvent",function(tt){A.usT(Le);const nt=A.GaO(2);return A.CGJ(nt.onFormSubmitted(tt))})("removeEvent",function(tt){A.usT(Le);const nt=A.GaO(2);return A.CGJ(nt.removeHandler(tt))}),A.C$Y()}2&bt&&A.E7m("product",ht.$implicit)}function pe(bt,ht){1&bt&&A.wR5(0,"app-card",10),2&bt&&A.E7m("product",ht.$implicit)}function Ue(bt,ht){1&bt&&A.wR5(0,"app-card",10),2&bt&&A.E7m("product",ht.$implicit)}function Ke(bt,ht){1&bt&&A.wR5(0,"app-card",10),2&bt&&A.E7m("product",ht.$implicit)}function Ee(bt,ht){if(1&bt&&(A.I0R(0,"div",4)(1,"div",5)(2,"p"),A.OEk(3,"Guitars"),A.C$Y(),A.I0R(4,"div",6),A.yuY(5,ot,1,1,"app-card",7),A.C$Y()(),A.I0R(6,"div",5)(7,"p"),A.OEk(8,"Drums"),A.C$Y(),A.I0R(9,"div",6),A.yuY(10,pe,1,1,"app-card",8),A.C$Y()(),A.I0R(11,"div",5)(12,"p"),A.OEk(13,"Pianos"),A.C$Y(),A.I0R(14,"div",6),A.yuY(15,Ue,1,1,"app-card",8),A.C$Y()(),A.I0R(16,"div",5)(17,"p"),A.OEk(18,"Basses"),A.C$Y(),A.I0R(19,"div",6),A.yuY(20,Ke,1,1,"app-card",8),A.C$Y()()()),2&bt){const Le=A.GaO();A.yG2(5),A.E7m("ngForOf",Le.guitarProducts),A.yG2(5),A.E7m("ngForOf",Le.drumProducts),A.yG2(5),A.E7m("ngForOf",Le.pianoProducts),A.yG2(5),A.E7m("ngForOf",Le.bassProducts)}}const de=[{path:"",component:(()=>{class bt{constructor(Le,et,tt,nt){this.sharedService=Le,this.cd=et,this.authService=tt,this.router=nt,this.guitarProducts=[],this.pianoProducts=[],this.bassProducts=[],this.drumProducts=[],this.otherProducts=[],this.loading=!0,this.isAdmin=!1,this.isEditing="",this.likedProducts=[]}ngOnInit(){this.authService.checkIfLoggedIn(),this.getAllTypeOfProduct()}getAllTypeOfProduct(){this.sharedService.getAllTypeOfProduct().subscribe(Le=>{for(let et=0;et<Le.length;et++)Object.entries(Le[et]).forEach(([tt,nt])=>{0===et?this.guitarProducts.push({key:tt,product:nt}):1===et?this.pianoProducts.push({key:tt,product:nt}):2===et?this.bassProducts.push({key:tt,product:nt}):3===et&&this.drumProducts.push({key:tt,product:nt})}),this.loading=!1,this.authService.likedProducts.subscribe(tt=>{this.likedProducts=tt}),this.authService.loggedUser.subscribe(tt=>{this.isAdmin=tt?.user.isAdmin}),this.cd.detectChanges()})}onFormSubmitted(Le){this.sharedService.editProduct(Le.form,Le.prodId,Le.prodCategory).subscribe(()=>{"guitar"===Le.prodCategory?this.sharedService.updateProductArray(Le.form,this.guitarProducts,Le.prodId):"bass"===Le.prodCategory?this.sharedService.updateProductArray(Le.form,this.bassProducts,Le.prodId):"piano"===Le.prodCategory?this.sharedService.updateProductArray(Le.form,this.pianoProducts,Le.prodId):"drum"===Le.prodCategory&&this.sharedService.updateProductArray(Le.form,this.drumProducts,Le.prodId),this.cd.detectChanges()})}removeHandler(Le){"guitar"===Le.prodCategory?this.guitarProducts=this.guitarProducts.filter(et=>et.key!==Le.prodId):"bass"===Le.prodCategory?this.bassProducts=this.bassProducts.filter(et=>et.key!==Le.prodId):"piano"===Le.prodCategory?this.pianoProducts=this.pianoProducts.filter(et=>et.key!==Le.prodId):"drum"===Le.prodCategory?this.drumProducts=this.drumProducts.filter(et=>et.key!==Le.prodId):"other"===Le.prodCategory&&(this.otherProducts=this.otherProducts.filter(et=>et.key!==Le.prodId)),this.cd.detectChanges()}static#e=this.\u0275fac=function(et){return new(et||bt)(A.GI1(F.Y),A.GI1(A.kD9),A.GI1(ye.e),A.GI1(Q.E5))};static#t=this.\u0275cmp=A.In1({type:bt,selectors:[["app-product-page"]],decls:7,vars:2,consts:[["class","loading-container",4,"ngIf"],["class","products",4,"ngIf"],[1,"loading-container"],[1,"loader"],[1,"products"],[1,"products-container"],[1,"product"],[3,"product","editEvent","removeEvent",4,"ngFor","ngForOf"],["class","single-product",3,"product",4,"ngFor","ngForOf"],[3,"product","editEvent","removeEvent"],[1,"single-product",3,"product"]],template:function(et,tt){1&et&&(A.wR5(0,"app-header")(1,"app-top-products"),A.I0R(2,"h1"),A.OEk(3,"Our Products"),A.C$Y(),A.yuY(4,be,4,0,"div",0)(5,Ee,21,4,"div",1),A.wR5(6,"app-footer")),2&et&&(A.yG2(4),A.E7m("ngIf",tt.loading),A.yG2(),A.E7m("ngIf",!tt.loading))},dependencies:[_.ay,_.u_,G.W,Ie.k,je.u,Ve],styles:["h1[_ngcontent-%COMP%]{display:flex;justify-content:center}.loading-container[_ngcontent-%COMP%]{margin:0 auto;width:300px;height:300px;display:flex;flex-direction:column;justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%] > .loader[_ngcontent-%COMP%]{width:60px;aspect-ratio:1;border-radius:50%;border:8px solid lightblue;border-right-color:orange;animation:_ngcontent-%COMP%_l2 1s infinite linear}@keyframes _ngcontent-%COMP%_l2{to{transform:rotate(1turn)}}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:3%}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:20px;font-weight:700;text-decoration:underline;text-decoration-color:#be0404;text-underline-offset:6px}.products[_ngcontent-%COMP%] > .products-container[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;position:relative}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{text-decoration:line-through}.if-discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:20px}.display-none[_ngcontent-%COMP%]{display:none}"],changeDetection:0})}return bt})()}];let wt=(()=>{class bt{static#e=this.\u0275fac=function(et){return new(et||bt)};static#t=this.\u0275mod=A.a4G({type:bt});static#n=this.\u0275inj=A.s3X({imports:[Q.qQ.forChild(de),Q.qQ]})}return bt})();var Dt=V(1680),xe=V(6736);let Et=(()=>{class bt{static#e=this.\u0275fac=function(et){return new(et||bt)};static#t=this.\u0275mod=A.a4G({type:bt});static#n=this.\u0275inj=A.s3X({imports:[_.MD,wt,G.W,Ie.k,Dt.w,Q.qQ,xe.o,je.u]})}return bt})()},2448:($t,We,V)=>{V.r(We),V.d(We,{ProfileModuleModule:()=>bt});var _=V(1368),Q=V(4856),A=V(6504),F=V(4704),ye=V(9336),G=V(4496),Ie=V(788),je=V(3804),Ne=V(1092),he=V(6940),le=V(4320);function $e(ht,Le){if(1&ht){const et=G.KQA();G.I0R(0,"button",11),G.qCj("click",function(){G.usT(et);const nt=G.GaO();return G.CGJ(nt.addingProd())}),G.OEk(1," Add New Product "),G.C$Y()}}function we(ht,Le){if(1&ht){const et=G.KQA();G.I0R(0,"div"),G.wR5(1,"img",28),G.I0R(2,"img",29),G.qCj("click",function(){const Nt=G.usT(et).$implicit,tn=G.GaO(2);return G.CGJ(tn.removeImg(Nt))}),G.C$Y()()}if(2&ht){const et=Le.$implicit;G.yG2(),G.E7m("src",et,G.K6U)}}function Se(ht,Le){if(1&ht){const et=G.KQA();G.I0R(0,"form",12)(1,"select",13)(2,"option",14),G.OEk(3,"Guitar"),G.C$Y(),G.I0R(4,"option",15),G.OEk(5,"Drum"),G.C$Y(),G.I0R(6,"option",16),G.OEk(7,"Bass"),G.C$Y(),G.I0R(8,"option",17),G.OEk(9,"Piano"),G.C$Y(),G.I0R(10,"option",18),G.OEk(11,"Other"),G.C$Y()(),G.wR5(12,"input",19)(13,"input",20)(14,"input",21)(15,"input",22)(16,"input",23),G.I0R(17,"input",24),G.qCj("change",function(nt){G.usT(et);const Nt=G.GaO();return G.CGJ(Nt.onFileChange(nt))}),G.C$Y(),G.I0R(18,"button",25),G.qCj("click",function(){G.usT(et);const nt=G.GaO();return G.CGJ(nt.addNewProduct())}),G.OEk(19," add product "),G.C$Y(),G.I0R(20,"div",26),G.yuY(21,we,3,1,"div",27),G.C$Y()()}if(2&ht){const et=G.GaO();G.E7m("formGroup",et.form),G.yG2(18),G.E7m("disabled",et.form.invalid),G.yG2(3),G.E7m("ngForOf",et.photos)}}function Ve(ht,Le){if(1&ht){const et=G.KQA();G.I0R(0,"img",36),G.qCj("click",function(){G.usT(et);const nt=G.GaO().index,Nt=G.GaO();return G.CGJ(Nt.showMoreItems[nt]=!Nt.showMoreItems[nt])})("click",function(){G.usT(et);const nt=G.GaO().index,Nt=G.GaO();return G.CGJ(Nt.changeArrow[nt]=!Nt.changeArrow[nt])}),G.C$Y()}}function be(ht,Le){if(1&ht){const et=G.KQA();G.I0R(0,"img",37),G.qCj("click",function(){G.usT(et);const nt=G.GaO().index,Nt=G.GaO();return G.CGJ(Nt.showMoreItems[nt]=!Nt.showMoreItems[nt]&&!Nt.changeArrow)})("click",function(){G.usT(et);const nt=G.GaO().index,Nt=G.GaO();return G.CGJ(Nt.changeArrow[nt]=!Nt.changeArrow[nt])}),G.C$Y()}}function ot(ht,Le){if(1&ht&&(G.I0R(0,"div",38)(1,"div"),G.wR5(2,"img",28),G.C$Y(),G.I0R(3,"div",39)(4,"span"),G.OEk(5),G.C$Y(),G.I0R(6,"span"),G.OEk(7),G.C$Y(),G.I0R(8,"span"),G.OEk(9),G.C$Y(),G.I0R(10,"span"),G.OEk(11),G.C$Y(),G.I0R(12,"span"),G.OEk(13),G.C$Y()()()),2&ht){const et=Le.$implicit,tt=G.GaO().$implicit,nt=G.GaO();G.yG2(2),G.E7m("src",et.product.product.photoUrl[0],G.K6U),G.yG2(3),G.cNF(tt.email?tt.email:"unknown"),G.yG2(2),G.cNF(nt.upperCaseFirstLetter(et.product.product.category)),G.yG2(2),G.cNF(et.product.product.model),G.yG2(2),G.oRS("Price: ",et.product.product.price,"$"),G.yG2(2),G.oRS("Dicsount: ",et.product.product.discount,"%")}}function pe(ht,Le){if(1&ht&&(G.I0R(0,"div",41)(1,"div"),G.wR5(2,"img",28),G.C$Y(),G.I0R(3,"div",39)(4,"span"),G.OEk(5),G.C$Y(),G.I0R(6,"span"),G.OEk(7),G.C$Y(),G.I0R(8,"span"),G.OEk(9),G.C$Y(),G.I0R(10,"span"),G.OEk(11),G.C$Y(),G.I0R(12,"span"),G.OEk(13),G.C$Y()()()),2&ht){const et=Le.$implicit,tt=G.GaO(2).$implicit,nt=G.GaO();G.yG2(2),G.E7m("src",et.product.product.photoUrl[0],G.K6U),G.yG2(3),G.cNF(tt.email?tt.email:"unknown"),G.yG2(2),G.cNF(nt.upperCaseFirstLetter(et.product.product.category)),G.yG2(2),G.cNF(et.product.product.model),G.yG2(2),G.oRS("Price: ",et.product.product.price,""),G.yG2(2),G.oRS("Dicsount: ",et.product.product.discount,"%")}}function Ue(ht,Le){if(1&ht&&(G.I0R(0,"div"),G.yuY(1,pe,14,6,"div",40),G.wVc(2,"slice"),G.C$Y()),2&ht){const et=G.GaO().$implicit;G.yG2(),G.E7m("ngForOf",G.g7$(2,1,et.products,1))}}function Ke(ht,Le){if(1&ht&&(G.I0R(0,"div",30)(1,"div",31)(2,"span"),G.OEk(3),G.C$Y(),G.I0R(4,"span"),G.OEk(5),G.C$Y(),G.I0R(6,"div",32),G.yuY(7,Ve,1,0,"img",33)(8,be,1,0,"img",34),G.C$Y(),G.yuY(9,ot,14,6,"div",35),G.wVc(10,"slice"),G.yuY(11,Ue,3,4,"div",8),G.C$Y()()),2&ht){const et=Le.$implicit,tt=Le.index,nt=G.GaO();G.yG2(3),G.cNF(nt.convertDate(et.date)),G.yG2(2),G.oRS("total price: ",et.totalPrice,""),G.yG2(2),G.E7m("ngIf",!nt.changeArrow[tt]),G.yG2(),G.E7m("ngIf",nt.changeArrow[tt]),G.yG2(),G.E7m("ngForOf",G.I7O(10,6,et.products,0,1)),G.yG2(2),G.E7m("ngIf",nt.showMoreItems[tt])}}function Ee(ht,Le){1&ht&&(G.I0R(0,"p"),G.OEk(1,"Liked Products:"),G.C$Y())}function qe(ht,Le){1&ht&&G.wR5(0,"app-card",42),2&ht&&G.E7m("product",Le.$implicit)}let de=(()=>{class ht{constructor(et,tt,nt,Nt){this.authService=et,this.cd=tt,this.fb=nt,this.sharedService=Nt,this.photos=[],this.addingProduct=!1,this.showMoreItems=[],this.changeArrow=[],this.form=this.fb.group({category:["",[A.AQ.required]],model:["",A.AQ.required],price:["",A.AQ.required],quantity:["",A.AQ.required],discount:["",A.AQ.required],description:["",A.AQ.required]})}ngOnInit(){this.authService.loggedUser.subscribe(et=>{this.user=et,this.form.patchValue({category:"guitar"}),this.getLikedProducts(),this.cd.detectChanges()})}update(){if(!this.user?.user.email)throw new Error("no user email found");this.authService.findUser(this.user?.user.email).subscribe(et=>{this.user=et,this.cd.detectChanges()})}onFileChange(et){const tt=et.target.files[0];if(tt){const nt=new FileReader;nt.onload=Nt=>{this.photos.push(Nt.target?.result),this.cd.detectChanges()},nt.readAsDataURL(tt)}}addingProd(){this.addingProduct=!this.addingProduct}removeImg(et){const tt=this.photos.findIndex(nt=>nt===et);this.photos.splice(tt,tt),console.log(this.photos)}addNewProduct(){const et=this.form.get("category")?.getRawValue(),tt=this.form.get("model")?.getRawValue(),nt=this.form.get("price")?.getRawValue(),Nt=this.form.get("discount")?.getRawValue(),tn=this.form.get("quantity")?.getRawValue(),Oe=this.form.get("description")?.getRawValue();this.sharedService.addProduct(et,tt,nt,tn,Nt,this.photos,Oe).subscribe({next:()=>{this.form.get("category")?.setValue(""),this.form.get("model")?.setValue(""),this.form.get("price")?.setValue(""),this.form.get("discount")?.setValue(""),this.form.get("quantity")?.setValue(""),this.form.get("description")?.setValue(""),alert("Product was added successfully")},error:ze=>{console.log("add product error: "+ze.message)},complete:()=>{console.log("Subscription completed")}})}getLikedProducts(){if(this.user&&this.user.user.likedProducts&&this.user.user.likedProducts.length){const et=this.user.user.likedProducts.map(tt=>this.sharedService.getProduct(tt.key,tt.category).pipe((0,F.k)(nt=>({key:tt.key,product:nt}))));(0,ye.y)(et).subscribe(tt=>{this.likedProducts=tt,console.log("Liked Products:",this.likedProducts),this.cd.detectChanges()})}}convertDate(et){let tt=new Date(et);return`${tt.getDate()}/${tt.getMonth()+1}/${tt.getFullYear()}`}upperCaseFirstLetter(et){return et.charAt(0).toUpperCase()+et.slice(1)}static#e=this.\u0275fac=function(tt){return new(tt||ht)(G.GI1(Ie.e),G.GI1(G.kD9),G.GI1(A.im),G.GI1(je.Y))};static#t=this.\u0275cmp=G.In1({type:ht,selectors:[["app-profile"]],decls:25,vars:13,consts:[[1,"container"],[1,"wrapper"],[1,"box"],[1,"info"],[3,"click",4,"ngIf"],[3,"formGroup",4,"ngIf"],["class","purchased-products",4,"ngFor","ngForOf"],[1,"liked-products"],[4,"ngIf"],[1,"products"],["class","single-product",3,"product",4,"ngFor","ngForOf"],[3,"click"],[3,"formGroup"],["formControlName","category"],["value","guitar"],["value","drum"],["value","bass"],["value","piano"],["value","other"],["placeholder","Model","formControlName","model"],["placeholder","Price","formControlName","price"],["placeholder","Discount","formControlName","discount"],["placeholder","Quantity","formControlName","quantity"],["placeholder","Description","formControlName","description"],["type","file",3,"change"],[3,"disabled","click"],[1,"photos"],[4,"ngFor","ngForOf"],["alt","img",3,"src"],["src","assets/remove.png","alt","img",3,"click"],[1,"purchased-products"],[1,"purchase-wrapper"],[1,"see-more-arrow"],["src","assets/arrow-down.png","alt","img",3,"click",4,"ngIf"],["src","assets/arrow-up.png","alt","img",3,"click",4,"ngIf"],["class","purchase",4,"ngFor","ngForOf"],["src","assets/arrow-down.png","alt","img",3,"click"],["src","assets/arrow-up.png","alt","img",3,"click"],[1,"purchase"],[1,"grid-container"],["class","other-items purchase",4,"ngFor","ngForOf"],[1,"other-items","purchase"],[1,"single-product",3,"product"]],template:function(tt,nt){1&tt&&(G.wR5(0,"app-header"),G.I0R(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"p")(6,"span"),G.OEk(7," Email:"),G.C$Y(),G.OEk(8),G.C$Y(),G.I0R(9,"p")(10,"span"),G.OEk(11,"Address:"),G.C$Y(),G.OEk(12),G.C$Y(),G.I0R(13,"button"),G.OEk(14,"Change Password"),G.C$Y(),G.yuY(15,$e,2,0,"button",4),G.C$Y(),G.yuY(16,Se,22,3,"form",5),G.C$Y(),G.yuY(17,Ke,12,10,"div",6),G.wVc(18,"slice"),G.I0R(19,"div",7),G.yuY(20,Ee,2,0,"p",8),G.I0R(21,"div",9),G.yuY(22,qe,1,1,"app-card",10),G.wVc(23,"slice"),G.C$Y()()()(),G.wR5(24,"app-footer")),2&tt&&(G.yG2(8),G.oRS(" ",null==nt.user||null==nt.user.user?null:nt.user.user.email,""),G.yG2(4),G.oRS(" ",null==nt.user||null==nt.user.user?null:nt.user.user.address,"Some Adrress"),G.yG2(3),G.E7m("ngIf",null==nt.user||null==nt.user.user?null:nt.user.user.isAdmin),G.yG2(),G.E7m("ngIf",(null==nt.user||null==nt.user.user?null:nt.user.user.isAdmin)&&nt.addingProduct),G.yG2(),G.E7m("ngForOf",G.g7$(18,7,null==nt.user||null==nt.user.user?null:nt.user.user.purchasedProducts,1)),G.yG2(3),G.E7m("ngIf",nt.likedProducts),G.yG2(2),G.E7m("ngForOf",G.g7$(23,10,nt.likedProducts,1)))},dependencies:[_.ay,_.u_,A.sz,A.wd,A.GO,A.ot,A.GC,A.ue,A.u,A.uW,A.Wo,Ne.k,he.W,le.u,_.qq],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:85%;background-color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]{display:flex;gap:60px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:8%;display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-size:18px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:200px;height:50px;cursor:pointer;--b: 2px;--s: .45em;--color: #373b44;padding:calc(.5em + var(--s)) calc(.9em + var(--s));color:var(--color);--_p: var(--s);background:conic-gradient(from 90deg at var(--b) var(--b),rgba(0,0,0,0) 90deg,var(--color) 0) var(--_p) var(--_p)/calc(100% - var(--b) - 2 * var(--_p)) calc(100% - var(--b) - 2 * var(--_p));transition:.3s linear,color 0s,background-color 0s;outline:var(--b) solid rgba(0,0,0,0);outline-offset:.6em;font-size:16px;border:0;user-select:none;-webkit-user-select:none;touch-action:manipulation}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus-visible{--_p: 0px;outline-color:var(--color);outline-offset:.05em}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background:var(--color);color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,200px);grid-template-rows:repeat(5,30px);padding-top:13%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%]{padding-left:90px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;padding-top:10px;background-color:#7daecf;width:520px;margin-bottom:30px;position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]{position:absolute;bottom:-8px;width:35px;height:35px;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%]{display:flex;gap:3%;border:1px solid rgb(84,145,185);width:500px;height:120px;padding:10px;margin-bottom:36px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:13%;height:100%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:70px;height:100%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]{display:grid;width:100%;gap:7px;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(3,1fr);text-align:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{align-self:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-self:center;border:none;background-color:#373b44;color:#fff;width:120px;height:20px;cursor:pointer}.liked-products[_ngcontent-%COMP%]{padding:40px}.liked-products[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:20px;font-weight:700;padding:40px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;gap:20px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%]{width:150px;height:380px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:20%;z-index:1}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{display:flex;gap:10px;justify-content:center;width:140px;height:40px;color:#fff}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{width:100%;height:260px;position:relative}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:260px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{width:100%;height:120px;display:flex;flex-direction:column;justify-content:space-around}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}"],changeDetection:0})}return ht})();var wt=V(9212);const xe=[{path:"",component:de,canActivate:[(()=>{class ht{constructor(){this.authService=(0,G.uUt)(Ie.e),this.router=(0,G.uUt)(Q.E5)}canActivate(et){return this.authService.findUserById(et.params.id).pipe((0,F.k)(nt=>this.authService.loggedUser.value?.user.email===nt),(0,wt.y)(nt=>{nt||(alert("Access Denied!"),this.router.navigate(["/products"]))}))}static#e=this.\u0275fac=function(tt){return new(tt||ht)};static#t=this.\u0275prov=G.wxM({token:ht,factory:ht.\u0275fac,providedIn:"root"})}return ht})()]}];let Et=(()=>{class ht{static#e=this.\u0275fac=function(tt){return new(tt||ht)};static#t=this.\u0275mod=G.a4G({type:ht});static#n=this.\u0275inj=G.s3X({imports:[Q.qQ.forChild(xe),Q.qQ]})}return ht})(),bt=(()=>{class ht{static#e=this.\u0275fac=function(tt){return new(tt||ht)};static#t=this.\u0275mod=G.a4G({type:ht});static#n=this.\u0275inj=G.s3X({imports:[_.MD,Et,A.sl,Ne.k,he.W,le.u]})}return ht})()},6736:($t,We,V)=>{V.d(We,{o:()=>A});var _=V(4496),Q=V(6504);let A=(()=>{class F{constructor(G){this.fb=G,this.formSubmitted=new _._w7,this.productForm=this.fb.group({model:[""],price:["",Q.AQ.pattern("^[0-9]*$")],discount:["",Q.AQ.pattern("^[0-9]*$")],quantity:["",Q.AQ.pattern("^[0-9]*$")],description:[""]})}onSubmit(){this.formSubmitted.emit(this.productForm.value)}static#e=this.\u0275fac=function(Ie){return new(Ie||F)(_.GI1(Q.im))};static#t=this.\u0275cmp=_.In1({type:F,selectors:[["app-reusable-form"]],outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[_.UHJ],decls:8,vars:1,consts:[[1,"edit",3,"formGroup"],["formControlName","model","type","text","placeholder","New model-name"],["formControlName","price","type","text","placeholder","New price"],["formControlName","discount","type","text","placeholder","New Discount"],["formControlName","quantity","type","text","placeholder","New Quantity"],["formControlName","description","placeholder","New Description"],[3,"click"]],template:function(Ie,je){1&Ie&&(_.I0R(0,"form",0),_.wR5(1,"input",1)(2,"input",2)(3,"input",3)(4,"input",4)(5,"textarea",5),_.I0R(6,"button",6),_.qCj("click",function(){return je.onSubmit()}),_.OEk(7,"Confirm Changes"),_.C$Y()()),2&Ie&&_.E7m("formGroup",je.productForm)},dependencies:[Q.sl,Q.sz,Q.ot,Q.ue,Q.u,Q.uW,Q.Wo],styles:[".edit[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;gap:6px;margin-top:60px}.edit[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .edit[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:80%;height:26px}"]})}return F})()},3804:($t,We,V)=>{V.d(We,{Y:()=>he});var _=V(6700),Q=V(4704),A=V(9336),F=V(9212),ye=V(7368),G=V(9144),Ie=V(2700),je=V(4496),Ne=V(7048);let he=(()=>{class le{constructor(we){this.http=we,this.detectChanges=new _.g(!1),this.likedProducts=new _.g([]),this.cart=new _.g([]),this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app"}addProduct(we,Se,Ve,be,ot,pe,Ue){const Ke={category:we,model:Se,price:parseInt(Ve),quantity:parseInt(be),discount:parseInt(ot),photoUrl:pe,description:Ue};return this.http.post(`${this.url}/products/${we}.json`,Ke)}ifDetectChanges(){return this.detectChanges.next(!this.detectChanges.value),this.detectChanges.value}getTypeOfProduct(we){return this.http.get(`${this.url}/products/${we}.json`).pipe((0,Q.k)(Se=>{let Ve=[];return Object.entries(Se).forEach(([be,ot])=>Ve.push({key:be,product:ot})),Ve}))}getAllTypeOfProduct(){const we=this.http.get(`${this.url}/products/guitar.json`),Se=this.http.get(`${this.url}/products/piano.json`),Ve=this.http.get(`${this.url}/products/bass.json`),be=this.http.get(`${this.url}/products/drum.json`);return(0,A.y)([we,Se,Ve,be]).pipe((0,Q.k)(ot=>ot))}likeUnlikeProduct(we,Se,Ve){return this.http.get(`${this.url}/musicShopUsers/${Se}.json`).pipe((0,F.y)(be=>{let ot=[],pe={email:be.email,address:be.address,isAdmin:be.isAdmin,photoUrl:be.photoUrl,likedProducts:be.likedProducts,purchasedProducts:be.purchasedProducts};pe.likedProducts.find(Ke=>Ke.key===we)?(ot=be.likedProducts.filter(Ke=>Ke.key!==we),pe.likedProducts=ot):(ot=[...be.likedProducts,{key:we,category:Ve}],pe.likedProducts=ot),this.http.patch(`${this.url}/musicShopUsers/${Se}.json`,pe).subscribe()}))}getAllLikedProducts(we){}getProduct(we,Se){return this.http.get(`${this.url}/products/${Se}/${we}.json`)}getProductById(we,Se){return this.http.get(`${this.url}/products/${Se}/${we}.json`)}cartOperations(we,Se){let Ve=this.cart.getValue();const be=Ve.findIndex(pe=>pe.product.key===Se.key);let ot=[...Ve];-1!==be?"add"===we?ot[be].quantity++:ot.splice(be,1):"add"===we&&ot.push({quantity:1,product:Se}),this.cart.next(ot)}buyProducts(we,Se,Ve,be){const ot={userId:be,email:Ve,date:new Date,totalPrice:Se,products:we},pe=this.http.get(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`).pipe((0,ye.G)(Ke=>(Ke.purchasedProducts=[...Ke.purchasedProducts,ot],this.http.patch(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`,Ke))),(0,G.a)(Ke=>(console.error("Error in adminUpdate$",Ke),(0,Ie.of)(null))));let Ue=(0,Ie.of)(null);be&&(Ue=this.http.get(`${this.url}/musicShopUsers/${be}.json`).pipe((0,ye.G)(Ke=>(Ke.purchasedProducts=[...Ke.purchasedProducts,ot],this.http.patch(`${this.url}/musicShopUsers/${be}.json`,Ke))),(0,G.a)(Ke=>(console.error("Error in userUpdate$",Ke),(0,Ie.of)(null))))),(0,A.y)([pe,Ue]).subscribe()}removeProduct(we,Se){return this.http.delete(`${this.url}/products/${we}/${Se}.json`)}editProduct(we,Se,Ve){return this.http.get(`${this.url}/products/${Ve}/${Se}.json`).pipe((0,F.y)(be=>{we.model&&(be.model=we.model),we.price&&(be.price=we.price),we.discount&&(be.discount=we.discount),we.quantity&&(be.quantity=we.quantity),we.description&&(be.description=we.description),this.http.patch(`${this.url}/products/${Ve}/${Se}.json`,be).subscribe()}))}updateProductArray(we,Se,Ve){let be=Se.findIndex(ot=>ot.key===Ve);we.discount&&(Se[be].product.discount=we.discount,we.model&&(Se[be].product.model=we.model),we.price&&(Se[be].product.price=we.price),we.description&&(Se[be].product.description=we.description),we.quantity&&(Se[be].product.quantity=we.quantity))}static#e=this.\u0275fac=function(Se){return new(Se||le)(je.CoB(Ne.KK))};static#t=this.\u0275prov=je.wxM({token:le,factory:le.\u0275fac,providedIn:"root"})}return le})()},2080:($t,We,V)=>{V.r(We),V.d(We,{SingleProductPageModule:()=>Ve});var _=V(1368),Q=V(4856),A=V(4496),F=V(3804),ye=V(788),G=V(1092),Ie=V(6940);function je(be,ot){if(1&be&&A.wR5(0,"img",13,14),2&be){const pe=A.GaO();A.E7m("src",pe.images[pe.cuurentIndex],A.K6U)}}function Ne(be,ot){if(1&be){const pe=A.KQA();A.I0R(0,"div")(1,"img",15),A.qCj("click",function(){const Ee=A.usT(pe).index,qe=A.GaO();return A.CGJ(qe.switchImage(Ee))}),A.C$Y()()}if(2&be){const pe=ot.index,Ue=A.GaO();A.yG2(),A.E7m("src",Ue.images[pe],A.K6U)}}function he(be,ot){if(1&be){const pe=A.KQA();A.I0R(0,"div",12),A.qCj("click",function(){A.usT(pe);const Ke=A.GaO();return A.CGJ(Ke.likeUnlikeProduct())}),A.wR5(1,"img",16),A.C$Y()}}function le(be,ot){if(1&be){const pe=A.KQA();A.I0R(0,"div")(1,"img",17),A.qCj("click",function(){A.usT(pe);const Ke=A.GaO();return A.CGJ(Ke.likeUnlikeProduct())}),A.C$Y()()}}const we=[{path:"",component:(()=>{class be{constructor(pe,Ue,Ke,Ee,qe){this.sharedService=pe,this.authService=Ue,this.router=Ke,this.route=Ee,this.cd=qe,this.cuurentIndex=0,this.minSize=0,this.maxSize=0,this.focusedImg=this.product?.photoUrl[0],this.likeProducts=[],this.prodId=""}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.likedProducts.subscribe(pe=>{this.likeProducts=pe}),this.getProductInfo()}getProductInfo(){this.route.queryParams.subscribe(pe=>{this.sharedService.getProductById(pe.prod,pe.type).subscribe(Ue=>{this.product=Ue,this.images=Ue.photoUrl,this.prodId=pe.prod,this.cd.detectChanges()})})}switchImage(pe){this.cuurentIndex=pe}scroll(pe){if("right"===pe){const Ue=[this.images[this.images.length-1]],Ke=this.images.slice(0,this.images.length-1);this.images=[...Ue,...Ke]}else{const Ue=[this.images[0]],Ke=this.images.slice(1,this.images.length);this.images=[...Ke,...Ue]}}addInCart(){this.sharedService.cartOperations("add",{key:this.prodId,product:this.product})}checkIfliked(){return this.likeProducts.some(pe=>pe.key===this.prodId)}likeUnlikeProduct(){this.authService.loggedUser.subscribe(pe=>{void 0!==pe&&this.sharedService.likeUnlikeProduct(this.prodId,pe.key,this.product?.category).subscribe()}),this.cd.detectChanges()}static#e=this.\u0275fac=function(Ue){return new(Ue||be)(A.GI1(F.Y),A.GI1(ye.e),A.GI1(Q.E5),A.GI1(Q.gV),A.GI1(A.kD9))};static#t=this.\u0275cmp=A.In1({type:be,selectors:[["app-single-product-page"]],decls:37,vars:11,consts:[[1,"container"],[1,"content"],[1,"images"],[1,"focused-img"],["alt","img",3,"src",4,"ngIf"],[1,"otherPhotos"],["src","assets/left.png","alt","img",3,"click"],[4,"ngFor","ngForOf"],["src","assets/right.png","alt","img",3,"click"],[1,"description","payment"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],["alt","img",3,"src"],["myImage",""],["alt","img",3,"src","click"],["src","assets/heart.png","alt","img"],["src","assets/heart-red.png","alt","img",3,"click"]],template:function(Ue,Ke){1&Ue&&(A.wR5(0,"app-header"),A.I0R(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),A.yuY(5,je,2,1,"img",4),A.C$Y(),A.I0R(6,"div",5)(7,"div")(8,"img",6),A.qCj("click",function(){return Ke.scroll("left")}),A.C$Y()(),A.yuY(9,Ne,2,1,"div",7),A.wVc(10,"slice"),A.I0R(11,"div")(12,"img",8),A.qCj("click",function(){return Ke.scroll("right")}),A.C$Y()()()(),A.I0R(13,"div",9)(14,"div")(15,"p")(16,"span"),A.OEk(17,"Categoty:"),A.C$Y(),A.OEk(18),A.C$Y(),A.yuY(19,he,2,0,"div",10)(20,le,2,0,"div",11),A.C$Y(),A.I0R(21,"div")(22,"p")(23,"span"),A.OEk(24,"Model:"),A.C$Y(),A.OEk(25),A.C$Y(),A.I0R(26,"p")(27,"span"),A.OEk(28,"Description: "),A.C$Y(),A.OEk(29),A.C$Y(),A.I0R(30,"p")(31,"span"),A.OEk(32,"Price:"),A.C$Y(),A.OEk(33),A.C$Y(),A.I0R(34,"button",12),A.qCj("click",function(){return Ke.addInCart()}),A.OEk(35,"Add to Cart"),A.C$Y()()()()(),A.wR5(36,"app-footer")),2&Ue&&(A.yG2(5),A.E7m("ngIf",Ke.images),A.yG2(4),A.E7m("ngForOf",A.g7$(10,8,Ke.images,2)),A.yG2(9),A.oRS(" ",null==Ke.product?null:Ke.product.category,""),A.yG2(),A.E7m("ngIf",Ke.checkIfliked()),A.yG2(),A.E7m("ngIf",!Ke.checkIfliked()),A.yG2(5),A.oRS(" ",null==Ke.product?null:Ke.product.model,""),A.yG2(4),A.oRS(" ",null==Ke.product?null:Ke.product.description," some shit description which i do not know what is over and over again some shit description which i do not know what is over and over again some shit description which i do not know what is over and over againsome shit description which i do not know what is over and over again some shit description which i do not know what is over and over again "),A.yG2(4),A.oRS(" ",null==Ke.product?null:Ke.product.price,"$"))},dependencies:[_.ay,_.u_,G.k,Ie.W,_.qq],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;gap:6%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:350px;height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px;max-height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]{display:flex;gap:4px;justify-content:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child, .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > img[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]{width:40px;height:40px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;width:400px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:23px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{word-wrap:break-word;font-size:20px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px;height:30px;border:none;text-align:center;color:#fff;background-color:#7a7af0;border-radius:3px;cursor:pointer}"],changeDetection:0})}return be})()}];let Se=(()=>{class be{static#e=this.\u0275fac=function(Ue){return new(Ue||be)};static#t=this.\u0275mod=A.a4G({type:be});static#n=this.\u0275inj=A.s3X({imports:[Q.qQ.forChild(we),Q.qQ]})}return be})(),Ve=(()=>{class be{static#e=this.\u0275fac=function(Ue){return new(Ue||be)};static#t=this.\u0275mod=A.a4G({type:be});static#n=this.\u0275inj=A.s3X({imports:[_.MD,G.k,Ie.W,Se]})}return be})()},2736:($t,We,V)=>{var _=V(4476),Q=V(4856),A=V(4496);const F=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.resolve().then(V.bind(V,3960)).then(p=>p.LoginAndRegistrationModule)},{path:"about-us",loadComponent:()=>V.e(760).then(V.bind(V,4760)).then(p=>p.AboutUsComponent)},{path:"contact",loadComponent:()=>V.e(104).then(V.bind(V,5104)).then(p=>p.ContanctComponent)},{path:"products",loadChildren:()=>Promise.resolve().then(V.bind(V,6180)).then(p=>p.ProductPageModule)},{path:"profile/:id",loadChildren:()=>Promise.resolve().then(V.bind(V,2448)).then(p=>p.ProfileModuleModule)},{path:"single-product/:id",loadChildren:()=>Promise.resolve().then(V.bind(V,2080)).then(p=>p.SingleProductPageModule)},{path:"categoty/:category",loadChildren:()=>V.e(644).then(V.bind(V,5644)).then(p=>p.SinleCategoryPageModuleModule)}];let ye=(()=>{class p{static#e=this.\u0275fac=function(y){return new(y||p)};static#t=this.\u0275mod=A.a4G({type:p});static#n=this.\u0275inj=A.s3X({imports:[Q.qQ.forRoot(F),Q.qQ]})}return p})(),G=(()=>{class p{constructor(){this.title="musicShop"}static#e=this.\u0275fac=function(y){return new(y||p)};static#t=this.\u0275cmp=A.In1({type:p,selectors:[["app-root"]],decls:1,vars:0,template:function(y,b){1&y&&A.wR5(0,"router-outlet")},dependencies:[Q.cP]})}return p})();var Ie=V(6176),je=V(3680);class Ne{constructor(d){return d}}class he{constructor(){return(0,je.UH)()}}var xe=V(8836);class bt{constructor(d){return d}}class ht{constructor(){return(0,Ie.S_)("auth")}}const et=new A.UbH("angularfire2.auth-instances");function nt(p){return(d,l)=>{const y=d.runOutsideAngular(()=>p(l));return new bt(y)}}const Nt={provide:ht,deps:[[new A.T7N,et]]},tn={provide:bt,useFactory:function tt(p,d){const l=(0,Ie.UN)("auth",p,d);return l&&new bt(l)},deps:[[new A.T7N,et],Ne]};let Oe=(()=>{class p{constructor(){(0,je.Kk)("angularfire",Ie.j1.full,"auth")}static \u0275fac=function(y){return new(y||p)};static \u0275mod=A.a4G({type:p});static \u0275inj=A.s3X({providers:[tn,Nt]})}return p})();function ze(p,...d){return{ngModule:Oe,providers:[{provide:et,useFactory:nt(p),multi:!0,deps:[A.WW2,A.zZn,Ie.u,he,[new A.T7N,Ie.gJ],...d]}]}}const Wn=(0,Ie.qo)(xe.Iv,!0);var Dr=V(1528),ln=V(9360),Ln=V(4920),Re=V(7144),Ye=V(5976);const Xe="@firebase/database";let Xt="";class Hn{constructor(d){this.domStorage_=d,this.prefix_="firebase:"}set(d,l){null==l?this.domStorage_.removeItem(this.prefixedName_(d)):this.domStorage_.setItem(this.prefixedName_(d),(0,Re.i)(l))}get(d){const l=this.domStorage_.getItem(this.prefixedName_(d));return null==l?null:(0,Re.GI)(l)}remove(d){this.domStorage_.removeItem(this.prefixedName_(d))}prefixedName_(d){return this.prefix_+d}toString(){return this.domStorage_.toString()}}class Yn{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(d,l){null==l?delete this.cache_[d]:this.cache_[d]=l}get(d){return(0,Re.Y7)(this.cache_,d)?this.cache_[d]:null}remove(d){delete this.cache_[d]}}const Kr=function(p){try{if(typeof window<"u"&&typeof window[p]<"u"){const d=window[p];return d.setItem("firebase:sentinel","cache"),d.removeItem("firebase:sentinel"),new Hn(d)}}catch{}return new Yn},lr=Kr("localStorage"),oe=Kr("sessionStorage"),ve=new Ye.YJ("@firebase/database"),Ce=function(){let p=1;return function(){return p++}}(),ft=function(p){const d=(0,Re.OS)(p),l=new Re.qS;l.update(d);const y=l.digest();return Re.Al.encodeByteArray(y)},It=function(...p){let d="";for(let l=0;l<p.length;l++){const y=p[l];Array.isArray(y)||y&&"object"==typeof y&&"number"==typeof y.length?d+=It.apply(null,y):d+="object"==typeof y?(0,Re.i)(y):y,d+=" "}return d};let xt=null,Gt=!0;const rn=function(...p){if(!0===Gt&&(Gt=!1,null===xt&&!0===oe.get("logging_enabled")&&function(p,d){(0,Re.Uc)(!d||!0===p||!1===p,"Can't turn on custom loggers persistently."),!0===p?(ve.logLevel=Ye.Ge.VERBOSE,xt=ve.log.bind(ve),d&&oe.set("logging_enabled",!0)):"function"==typeof p?xt=p:(xt=null,oe.remove("logging_enabled"))}(!0)),xt){const d=It.apply(null,p);xt(d)}},zn=function(p){return function(...d){rn(p,...d)}},vr=function(...p){const d="FIREBASE INTERNAL ERROR: "+It(...p);ve.error(d)},sr=function(...p){const d=`FIREBASE FATAL ERROR: ${It(...p)}`;throw ve.error(d),new Error(d)},Vn=function(...p){const d="FIREBASE WARNING: "+It(...p);ve.warn(d)},Ti=function(p){return"number"==typeof p&&(p!=p||p===Number.POSITIVE_INFINITY||p===Number.NEGATIVE_INFINITY)},qn="[MIN_NAME]",ei="[MAX_NAME]",$n=function(p,d){if(p===d)return 0;if(p===qn||d===ei)return-1;if(d===qn||p===ei)return 1;{const l=Si(p),y=Si(d);return null!==l?null!==y?l-y==0?p.length-d.length:l-y:-1:null!==y?1:p<d?-1:1}},fr=function(p,d){return p===d?0:p<d?-1:1},rs=function(p,d){if(d&&p in d)return d[p];throw new Error("Missing required key ("+p+") in object: "+(0,Re.i)(d))},Di=function(p){if("object"!=typeof p||null===p)return(0,Re.i)(p);const d=[];for(const y in p)d.push(y);d.sort();let l="{";for(let y=0;y<d.length;y++)0!==y&&(l+=","),l+=(0,Re.i)(d[y]),l+=":",l+=Di(p[d[y]]);return l+="}",l},si=function(p,d){const l=p.length;if(l<=d)return[p];const y=[];for(let b=0;b<l;b+=d)y.push(p.substring(b,b+d>l?l:b+d));return y};function Yr(p,d){for(const l in p)p.hasOwnProperty(l)&&d(l,p[l])}const As=function(p){(0,Re.Uc)(!Ti(p),"Invalid JSON number");const y=1023;let b,L,$,se,_e;0===p?(L=0,$=0,b=1/p==-1/0?1:0):(b=p<0,(p=Math.abs(p))>=Math.pow(2,1-y)?(se=Math.min(Math.floor(Math.log(p)/Math.LN2),y),L=se+y,$=Math.round(p*Math.pow(2,52-se)-Math.pow(2,52))):(L=0,$=Math.round(p/Math.pow(2,-1074))));const De=[];for(_e=52;_e;_e-=1)De.push($%2?1:0),$=Math.floor($/2);for(_e=11;_e;_e-=1)De.push(L%2?1:0),L=Math.floor(L/2);De.push(b?1:0),De.reverse();const yt=De.join("");let vt="";for(_e=0;_e<64;_e+=8){let Pt=parseInt(yt.substr(_e,8),2).toString(16);1===Pt.length&&(Pt="0"+Pt),vt+=Pt}return vt.toLowerCase()},Go=new RegExp("^-?(0*)\\d{1,10}$"),Si=function(p){if(Go.test(p)){const d=Number(p);if(d>=-2147483648&&d<=2147483647)return d}return null},$r=function(p){try{p()}catch(d){setTimeout(()=>{throw Vn("Exception was thrown by user callback.",d.stack||""),d},Math.floor(0))}},oi=function(p,d){const l=setTimeout(p,d);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class ra{constructor(d,l){this.appName_=d,this.appCheckProvider=l,this.appCheck=l?.getImmediate({optional:!0}),this.appCheck||l?.get().then(y=>this.appCheck=y)}getToken(d){return this.appCheck?this.appCheck.getToken(d):new Promise((l,y)=>{setTimeout(()=>{this.appCheck?this.getToken(d).then(l,y):l(null)},0)})}addTokenChangeListener(d){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(y=>y.addTokenListener(d))}notifyForInvalidToken(){Vn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ia{constructor(d,l,y){this.appName_=d,this.firebaseOptions_=l,this.authProvider_=y,this.auth_=null,this.auth_=y.getImmediate({optional:!0}),this.auth_||y.onInit(b=>this.auth_=b)}getToken(d){return this.auth_?this.auth_.getToken(d).catch(l=>l&&"auth/token-not-initialized"===l.code?(rn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,y)=>{setTimeout(()=>{this.auth_?this.getToken(d).then(l,y):l(null)},0)})}addTokenChangeListener(d){this.auth_?this.auth_.addAuthTokenListener(d):this.authProvider_.get().then(l=>l.addAuthTokenListener(d))}removeTokenChangeListener(d){this.authProvider_.get().then(l=>l.removeAuthTokenListener(d))}notifyForInvalidToken(){let d='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';d+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Vn(d)}}let Bs=(()=>{class p{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return p.OWNER="owner",p})();const Ar=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$i="websocket",or="long_polling";class ki{constructor(d,l,y,b,L=!1,$="",se=!1,_e=!1){this.secure=l,this.namespace=y,this.webSocketOnly=b,this.nodeAdmin=L,this.persistenceKey=$,this.includeNamespaceInQueryParams=se,this.isUsingEmulator=_e,this._host=d.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=lr.get("host:"+d)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(d){d!==this.internalHost&&(this.internalHost=d,this.isCacheableHost()&&lr.set("host:"+this._host,this.internalHost))}toString(){let d=this.toURLString();return this.persistenceKey&&(d+="<"+this.persistenceKey+">"),d}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function An(p,d,l){let y;if((0,Re.Uc)("string"==typeof d,"typeof type must == string"),(0,Re.Uc)("object"==typeof l,"typeof params must == object"),d===$i)y=(p.secure?"wss://":"ws://")+p.internalHost+"/.ws?";else{if(d!==or)throw new Error("Unknown connection type: "+d);y=(p.secure?"https://":"http://")+p.internalHost+"/.lp?"}(function Gi(p){return p.host!==p.internalHost||p.isCustomHost()||p.includeNamespaceInQueryParams})(p)&&(l.ns=p.namespace);const b=[];return Yr(l,(L,$)=>{b.push(L+"="+$)}),y+b.join("&")}class Pi{constructor(){this.counters_={}}incrementCounter(d,l=1){(0,Re.Y7)(this.counters_,d)||(this.counters_[d]=0),this.counters_[d]+=l}get(){return(0,Re.O0)(this.counters_)}}const ho={},qs={};function li(p){const d=p.toString();return ho[d]||(ho[d]=new Pi),ho[d]}class bs{constructor(d){this.onMessage_=d,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(d,l){this.closeAfterResponse=d,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(d,l){for(this.pendingResponses[d]=l;this.pendingResponses[this.currentResponseNum];){const y=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let b=0;b<y.length;++b)y[b]&&$r(()=>{this.onMessage_(y[b])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Fi{constructor(d,l,y,b,L,$,se){this.connId=d,this.repoInfo=l,this.applicationId=y,this.appCheckToken=b,this.authToken=L,this.transportSessionId=$,this.lastSessionId=se,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zn(d),this.stats_=li(l),this.urlFn=_e=>(this.appCheckToken&&(_e.ac=this.appCheckToken),An(l,or,_e))}open(d,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new bs(d),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(p){if((0,Re.iw)()||"complete"===document.readyState)p();else{let d=!1;const l=function(){document.body?d||(d=!0,p()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xs((...L)=>{const[$,se,_e,De,yt]=L;if(this.incrementIncomingBytes_(L),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===$)this.id=se,this.password=_e;else{if("close"!==$)throw new Error("Unrecognized command received: "+$);se?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(se,()=>{this.onClosed_()})):this.onClosed_()}},(...L)=>{const[$,se]=L;this.incrementIncomingBytes_(L),this.myPacketOrderer.handleResponse($,se)},()=>{this.onClosed_()},this.urlFn);const y={start:"t"};y.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(y.cb=this.scriptTagHolder.uniqueCallbackIdentifier),y.v="5",this.transportSessionId&&(y.s=this.transportSessionId),this.lastSessionId&&(y.ls=this.lastSessionId),this.applicationId&&(y.p=this.applicationId),this.appCheckToken&&(y.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Ar.test(location.hostname)&&(y.r="f");const b=this.urlFn(y);this.log_("Connecting via long-poll to "+b),this.scriptTagHolder.addTag(b,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fi.forceAllow_=!0}static forceDisallow(){Fi.forceDisallow_=!0}static isAvailable(){return!((0,Re.iw)()||!Fi.forceAllow_&&(Fi.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(d){const l=(0,Re.i)(d);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const y=(0,Re.c9)(l),b=si(y,1840);for(let L=0;L<b.length;L++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,b.length,b[L]),this.curSegmentNum++}addDisconnectPingFrame(d,l){if((0,Re.iw)())return;this.myDisconnFrame=document.createElement("iframe");const y={dframe:"t"};y.id=d,y.pw=l,this.myDisconnFrame.src=this.urlFn(y),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(d){const l=(0,Re.i)(d).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class xs{constructor(d,l,y,b){if(this.onDisconnect=y,this.urlFn=b,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Re.iw)())this.commandCB=d,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Ce(),window["pLPCommand"+this.uniqueCallbackIdentifier]=d,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=xs.createIFrame_();let L="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(L='<script>document.domain="'+document.domain+'";<\/script>');const $="<html><body>"+L+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write($),this.myIFrame.doc.close()}catch(se){rn("frame writing exception"),se.stack&&rn(se.stack),rn(se)}}}static createIFrame_(){const d=document.createElement("iframe");if(d.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(d);try{d.contentWindow.document||rn("No IE domain setting required")}catch{const y=document.domain;d.src="javascript:void((function(){document.open();document.domain='"+y+"';document.close();})())"}return d.contentDocument?d.doc=d.contentDocument:d.contentWindow?d.doc=d.contentWindow.document:d.document&&(d.doc=d.document),d}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const d=this.onDisconnect;d&&(this.onDisconnect=null,d())}startLongPoll(d,l){for(this.myID=d,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const d={};d.id=this.myID,d.pw=this.myPW,d.ser=this.currentSerial;let l=this.urlFn(d),y="",b=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+y.length<=1870;){const $=this.pendingSegs.shift();y=y+"&seg"+b+"="+$.seg+"&ts"+b+"="+$.ts+"&d"+b+"="+$.d,b++}return l+=y,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(d,l,y){this.pendingSegs.push({seg:d,ts:l,d:y}),this.alive&&this.newRequest_()}addLongPollTag_(d,l){this.outstandingRequests.add(l);const y=()=>{this.outstandingRequests.delete(l),this.newRequest_()},b=setTimeout(y,Math.floor(25e3));this.addTag(d,()=>{clearTimeout(b),y()})}addTag(d,l){(0,Re.iw)()?this.doNodeLongPoll(d,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const y=this.myIFrame.doc.createElement("script");y.type="text/javascript",y.async=!0,y.src=d,y.onload=y.onreadystatechange=function(){const b=y.readyState;(!b||"loaded"===b||"complete"===b)&&(y.onload=y.onreadystatechange=null,y.parentNode&&y.parentNode.removeChild(y),l())},y.onerror=()=>{rn("Long-poll script failed to load: "+d),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(y)}catch{}},Math.floor(1))}}let Ks=null;typeof MozWebSocket<"u"?Ks=MozWebSocket:typeof WebSocket<"u"&&(Ks=WebSocket);let Wo=(()=>{class p{constructor(l,y,b,L,$,se,_e){this.connId=l,this.applicationId=b,this.appCheckToken=L,this.authToken=$,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zn(this.connId),this.stats_=li(y),this.connURL=p.connectionURL_(y,se,_e,L,b),this.nodeAdmin=y.nodeAdmin}static connectionURL_(l,y,b,L,$){const se={v:"5"};return!(0,Re.iw)()&&typeof location<"u"&&location.hostname&&Ar.test(location.hostname)&&(se.r="f"),y&&(se.s=y),b&&(se.ls=b),L&&(se.ac=L),$&&(se.p=$),An(l,$i,se)}open(l,y){this.onDisconnect=y,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,lr.set("previous_websocket_failure",!0);try{let b;if((0,Re.iw)()){b={headers:{"User-Agent":`Firebase/5/${Xt}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(b.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(b.headers["X-Firebase-AppCheck"]=this.appCheckToken);const $=process.env,se=0===this.connURL.indexOf("wss://")?$.HTTPS_PROXY||$.https_proxy:$.HTTP_PROXY||$.http_proxy;se&&(b.proxy={origin:se})}this.mySock=new Ks(this.connURL,[],b)}catch(b){this.log_("Error instantiating WebSocket.");const L=b.message||b.data;return L&&this.log_(L),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=b=>{this.handleIncomingFrame(b)},this.mySock.onerror=b=>{this.log_("WebSocket error.  Closing connection.");const L=b.message||b.data;L&&this.log_(L),this.onClosed_()}}start(){}static forceDisallow(){p.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&b.length>1&&parseFloat(b[1])<4.4&&(l=!0)}return!l&&null!==Ks&&!p.forceDisallow_}static previouslyFailed(){return lr.isInMemoryStorage||!0===lr.get("previous_websocket_failure")}markConnectionHealthy(){lr.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const y=this.frames.join("");this.frames=null;const b=(0,Re.GI)(y);this.onMessage(b)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,Re.Uc)(null===this.frames,"We already have a frame buffer"),l.length<=6){const y=Number(l);if(!isNaN(y))return this.handleNewFrameCount_(y),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const y=l.data;if(this.bytesReceived+=y.length,this.stats_.incrementCounter("bytes_received",y.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(y);else{const b=this.extractFrameCount_(y);null!==b&&this.appendFrame_(b)}}send(l){this.resetKeepAlive();const y=(0,Re.i)(l);this.bytesSent+=y.length,this.stats_.incrementCounter("bytes_sent",y.length);const b=si(y,16384);b.length>1&&this.sendString_(String(b.length));for(let L=0;L<b.length;L++)this.sendString_(b[L])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(y){this.log_("Exception thrown from WebSocket.send():",y.message||y.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return p.responsesRequiredToBeHealthy=2,p.healthyTimeout=3e4,p})(),Ya=(()=>{class p{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Fi,Wo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const y=Wo&&Wo.isAvailable();let b=y&&!Wo.previouslyFailed();if(l.webSocketOnly&&(y||Vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),b=!0),b)this.transports_=[Wo];else{const L=this.transports_=[];for(const $ of p.ALL_TRANSPORTS)$&&$.isAvailable()&&L.push($);p.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return p.globalTransportInitialized_=!1,p})();class on{constructor(d,l,y,b,L,$,se,_e,De,yt){this.id=d,this.repoInfo_=l,this.applicationId_=y,this.appCheckToken_=b,this.authToken_=L,this.onMessage_=$,this.onReady_=se,this.onDisconnect_=_e,this.onKill_=De,this.lastSessionId=yt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zn("c:"+this.id+":"),this.transportManager_=new Ya(l),this.log_("Connection created"),this.start_()}start_(){const d=this.transportManager_.initialTransport();this.conn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),y=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,y)},Math.floor(0));const b=d.healthyTimeout||0;b>0&&(this.healthyTimeout_=oi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(b)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(d){return l=>{d===this.conn_?this.onConnectionLost_(l):d===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(d){return l=>{2!==this.state_&&(d===this.rx_?this.onPrimaryMessageReceived_(l):d===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(d){this.sendData_({t:"d",d})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(d){if("t"in d){const l=d.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(d){const l=rs("t",d),y=rs("d",d);if("c"===l)this.onSecondaryControl_(y);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(y)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(d){const l=rs("t",d),y=rs("d",d);"c"===l?this.onControl_(y):"d"===l&&this.onDataMessage_(y)}onDataMessage_(d){this.onPrimaryResponse_(),this.onMessage_(d)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(d){const l=rs("t",d);if("d"in d){const y=d.d;if("h"===l){const b=Object.assign({},y);this.repoInfo_.isUsingEmulator&&(b.h=this.repoInfo_.host),this.onHandshake_(b)}else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let b=0;b<this.pendingDataMessages.length;++b)this.onDataMessage_(this.pendingDataMessages[b]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(y):"r"===l?this.onReset_(y):"e"===l?vr("Server Error: "+y):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):vr("Unknown control packet command: "+l)}}onHandshake_(d){const l=d.ts,y=d.v,b=d.h;this.sessionId=d.s,this.repoInfo_.host=b,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==y&&Vn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const d=this.transportManager_.upgradeTransport();d&&this.startUpgrade_(d)}startUpgrade_(d){this.secondaryConn_=new d(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=d.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),y=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,y),oi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(d){this.log_("Reset packet received.  New host: "+d),this.repoInfo_.host=d,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(d,l){this.log_("Realtime connection established."),this.conn_=d,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):oi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const d=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===d||this.rx_===d)&&this.close()}onConnectionLost_(d){this.conn_=null,d||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(lr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(d){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(d),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(d){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(d)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Qn{put(d,l,y,b){}merge(d,l,y,b){}refreshAuthToken(d){}refreshAppCheckToken(d){}onDisconnectPut(d,l,y){}onDisconnectMerge(d,l,y){}onDisconnectCancel(d,l){}reportStats(d){}}class vs{constructor(d){this.allowedEvents_=d,this.listeners_={},(0,Re.Uc)(Array.isArray(d)&&d.length>0,"Requires a non-empty array")}trigger(d,...l){if(Array.isArray(this.listeners_[d])){const y=[...this.listeners_[d]];for(let b=0;b<y.length;b++)y[b].callback.apply(y[b].context,l)}}on(d,l,y){this.validateEventType_(d),this.listeners_[d]=this.listeners_[d]||[],this.listeners_[d].push({callback:l,context:y});const b=this.getInitialEvent(d);b&&l.apply(y,b)}off(d,l,y){this.validateEventType_(d);const b=this.listeners_[d]||[];for(let L=0;L<b.length;L++)if(b[L].callback===l&&(!y||y===b[L].context))return void b.splice(L,1)}validateEventType_(d){(0,Re.Uc)(this.allowedEvents_.find(l=>l===d),"Unknown event: "+d)}}class os extends vs{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,Re.AV)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new os}getInitialEvent(d){return(0,Re.Uc)("online"===d,"Unknown event type: "+d),[this.online_]}currentlyOnline(){return this.online_}}class Rn{constructor(d,l){if(void 0===l){this.pieces_=d.split("/");let y=0;for(let b=0;b<this.pieces_.length;b++)this.pieces_[b].length>0&&(this.pieces_[y]=this.pieces_[b],y++);this.pieces_.length=y,this.pieceNum_=0}else this.pieces_=d,this.pieceNum_=l}toString(){let d="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(d+="/"+this.pieces_[l]);return d||"/"}}function Sr(){return new Rn("")}function hn(p){return p.pieceNum_>=p.pieces_.length?null:p.pieces_[p.pieceNum_]}function Ho(p){return p.pieces_.length-p.pieceNum_}function ai(p){let d=p.pieceNum_;return d<p.pieces_.length&&d++,new Rn(p.pieces_,d)}function Ma(p){return p.pieceNum_<p.pieces_.length?p.pieces_[p.pieces_.length-1]:null}function Qs(p,d=0){return p.pieces_.slice(p.pieceNum_+d)}function xo(p){if(p.pieceNum_>=p.pieces_.length)return null;const d=[];for(let l=p.pieceNum_;l<p.pieces_.length-1;l++)d.push(p.pieces_[l]);return new Rn(d,0)}function dr(p,d){const l=[];for(let y=p.pieceNum_;y<p.pieces_.length;y++)l.push(p.pieces_[y]);if(d instanceof Rn)for(let y=d.pieceNum_;y<d.pieces_.length;y++)l.push(d.pieces_[y]);else{const y=d.split("/");for(let b=0;b<y.length;b++)y[b].length>0&&l.push(y[b])}return new Rn(l,0)}function Un(p){return p.pieceNum_>=p.pieces_.length}function Ji(p,d){const l=hn(p),y=hn(d);if(null===l)return d;if(l===y)return Ji(ai(p),ai(d));throw new Error("INTERNAL ERROR: innerPath ("+d+") is not within outerPath ("+p+")")}function ks(p,d){if(Ho(p)!==Ho(d))return!1;for(let l=p.pieceNum_,y=d.pieceNum_;l<=p.pieces_.length;l++,y++)if(p.pieces_[l]!==d.pieces_[y])return!1;return!0}function ls(p,d){let l=p.pieceNum_,y=d.pieceNum_;if(Ho(p)>Ho(d))return!1;for(;l<p.pieces_.length;){if(p.pieces_[l]!==d.pieces_[y])return!1;++l,++y}return!0}class Io{constructor(d,l){this.errorPrefix_=l,this.parts_=Qs(d,0),this.byteLength_=Math.max(1,this.parts_.length);for(let y=0;y<this.parts_.length;y++)this.byteLength_+=(0,Re.Uj)(this.parts_[y]);Js(this)}}function Js(p){if(p.byteLength_>768)throw new Error(p.errorPrefix_+"has a key path longer than 768 bytes ("+p.byteLength_+").");if(p.parts_.length>32)throw new Error(p.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Co(p))}function Co(p){return 0===p.parts_.length?"":"in property '"+p.parts_.join(".")+"'"}class No extends vs{constructor(){let d,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",d="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",d="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",d="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",d="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const y=!document[d];y!==this.visible_&&(this.visible_=y,this.trigger("visible",y))},!1)}static getInstance(){return new No}getInitialEvent(d){return(0,Re.Uc)("visible"===d,"Unknown event type: "+d),[this.visible_]}}const Xs=1e3;let mc,Zs=(()=>{class p extends Qn{constructor(l,y,b,L,$,se,_e,De){if(super(),this.repoInfo_=l,this.applicationId_=y,this.onDataUpdate_=b,this.onConnectStatus_=L,this.onServerInfoUpdate_=$,this.authTokenProvider_=se,this.appCheckTokenProvider_=_e,this.authOverride_=De,this.id=p.nextPersistentConnectionId_++,this.log_=zn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xs,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,De&&!(0,Re.iw)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");No.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&os.getInstance().on("online",this.onOnline_,this)}sendRequest(l,y,b){const L=++this.requestNumber_,$={r:L,a:l,b:y};this.log_((0,Re.i)($)),(0,Re.Uc)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest($),b&&(this.requestCBHash_[L]=b)}get(l){this.initConnection_();const y=new Re.o9,L={action:"g",request:{p:l._path.toString(),q:l._queryObject},onComplete:se=>{const _e=se.d;"ok"===se.s?y.resolve(_e):y.reject(_e)}};return this.outstandingGets_.push(L),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),y.promise}listen(l,y,b,L){this.initConnection_();const $=l._queryIdentifier,se=l._path.toString();this.log_("Listen called for "+se+" "+$),this.listens.has(se)||this.listens.set(se,new Map),(0,Re.Uc)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Re.Uc)(!this.listens.get(se).has($),"listen() called twice for same path/queryId.");const _e={onComplete:L,hashFn:y,query:l,tag:b};this.listens.get(se).set($,_e),this.connected_&&this.sendListen_(_e)}sendGet_(l){const y=this.outstandingGets_[l];this.sendRequest("g",y.request,b=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),y.onComplete&&y.onComplete(b)})}sendListen_(l){const y=l.query,b=y._path.toString(),L=y._queryIdentifier;this.log_("Listen on "+b+" for "+L);const $={p:b};l.tag&&($.q=y._queryObject,$.t=l.tag),$.h=l.hashFn(),this.sendRequest("q",$,_e=>{const De=_e.d,yt=_e.s;p.warnOnListenWarnings_(De,y),(this.listens.get(b)&&this.listens.get(b).get(L))===l&&(this.log_("listen response",_e),"ok"!==yt&&this.removeListen_(b,L),l.onComplete&&l.onComplete(yt,De))})}static warnOnListenWarnings_(l,y){if(l&&"object"==typeof l&&(0,Re.Y7)(l,"w")){const b=(0,Re.o5)(l,"w");if(Array.isArray(b)&&~b.indexOf("no_index")){const L='".indexOn": "'+y._queryParams.getIndex().toString()+'"',$=y._path.toString();Vn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${L} at ${$} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,Re.L0)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,y=(0,Re.AX)(l)?"auth":"gauth",b={cred:l};null===this.authOverride_?b.noauth=!0:"object"==typeof this.authOverride_&&(b.authvar=this.authOverride_),this.sendRequest(y,b,L=>{const $=L.s,se=L.d||"error";this.authToken_===l&&("ok"===$?this.invalidAuthTokenCount_=0:this.onAuthRevoked_($,se))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const y=l.s,b=l.d||"error";"ok"===y?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(y,b)})}unlisten(l,y){const b=l._path.toString(),L=l._queryIdentifier;this.log_("Unlisten called for "+b+" "+L),(0,Re.Uc)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(b,L)&&this.connected_&&this.sendUnlisten_(b,L,l._queryObject,y)}sendUnlisten_(l,y,b,L){this.log_("Unlisten on "+l+" for "+y);const $={p:l};L&&($.q=b,$.t=L),this.sendRequest("n",$)}onDisconnectPut(l,y,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,y,b):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:y,onComplete:b})}onDisconnectMerge(l,y,b){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,y,b):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:y,onComplete:b})}onDisconnectCancel(l,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,y):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:y})}sendOnDisconnect_(l,y,b,L){const $={p:y,d:b};this.log_("onDisconnect "+l,$),this.sendRequest(l,$,se=>{L&&setTimeout(()=>{L(se.s,se.d)},Math.floor(0))})}put(l,y,b,L){this.putInternal("p",l,y,b,L)}merge(l,y,b,L){this.putInternal("m",l,y,b,L)}putInternal(l,y,b,L,$){this.initConnection_();const se={p:y,d:b};void 0!==$&&(se.h=$),this.outstandingPuts_.push({action:l,request:se,onComplete:L}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+y)}sendPut_(l){const y=this.outstandingPuts_[l].action,b=this.outstandingPuts_[l].request,L=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(y,b,$=>{this.log_(y+" response",$),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),L&&L($.s,$.d)})}reportStats(l){if(this.connected_){const y={c:l};this.log_("reportStats",y),this.sendRequest("s",y,b=>{"ok"!==b.s&&this.log_("reportStats","Error sending stats: "+b.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,Re.i)(l));const y=l.r,b=this.requestCBHash_[y];b&&(delete this.requestCBHash_[y],b(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,y){this.log_("handleServerMessage",l,y),"d"===l?this.onDataUpdate_(y.p,y.d,!1,y.t):"m"===l?this.onDataUpdate_(y.p,y.d,!0,y.t):"c"===l?this.onListenRevoked_(y.p,y.q):"ac"===l?this.onAuthRevoked_(y.s,y.d):"apc"===l?this.onAppCheckRevoked_(y.s,y.d):"sd"===l?this.onSecurityDebugPacket_(y):vr("Unrecognized action received from server: "+(0,Re.i)(l)+"\nAre you using the latest client?")}onReady_(l,y){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=y,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,Re.Uc)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Xs),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let y=Math.max(0,this.reconnectDelay_-l);y=Math.random()*y,this.log_("Trying to reconnect in "+y+"ms"),this.scheduleConnect_(y),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,Dr.c)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const y=l.onDataMessage_.bind(l),b=l.onReady_.bind(l),L=l.onRealtimeDisconnect_.bind(l),$=l.id+":"+p.nextConnectionId_++,se=l.lastSessionId;let _e=!1,De=null;const yt=function(){De?De.close():(_e=!0,L())};l.realtime_={close:yt,sendRequest:function(pn){(0,Re.Uc)(De,"sendRequest call when we're not connected not allowed."),De.sendRequest(pn)}};const Pt=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[pn,jn]=yield Promise.all([l.authTokenProvider_.getToken(Pt),l.appCheckTokenProvider_.getToken(Pt)]);_e?rn("getToken() completed but was canceled"):(rn("getToken() completed. Creating connection."),l.authToken_=pn&&pn.accessToken,l.appCheckToken_=jn&&jn.token,De=new on($,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,y,b,L,mi=>{Vn(mi+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},se))}catch(pn){l.log_("Failed to get token: "+pn),_e||(l.repoInfo_.nodeAdmin&&Vn(pn),yt())}}})()}interrupt(l){rn("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){rn("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,Re.t7)(this.interruptReasons_)&&(this.reconnectDelay_=Xs,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const y=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:y})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const y=this.outstandingPuts_[l];y&&"h"in y.request&&y.queued&&(y.onComplete&&y.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,y){let b;b=y?y.map($=>Di($)).join("$"):"default";const L=this.removeListen_(l,b);L&&L.onComplete&&L.onComplete("permission_denied")}removeListen_(l,y){const b=new Rn(l).toString();let L;if(this.listens.has(b)){const $=this.listens.get(b);L=$.get(y),$.delete(y),0===$.size&&this.listens.delete(b)}else L=void 0;return L}onAuthRevoked_(l,y){rn("Auth token revoked: "+l+"/"+y),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,y){rn("App check token revoked: "+l+"/"+y),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const y of l.values())this.sendListen_(y);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let y="js";(0,Re.iw)()&&(y=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+y+"."+Xt.replace(/\./g,"-")]=1,(0,Re.AV)()?l["framework.cordova"]=1:(0,Re.AL)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=os.getInstance().currentlyOnline();return(0,Re.t7)(this.interruptReasons_)&&l}}return p.nextPersistentConnectionId_=0,p.nextConnectionId_=0,p})();class hr{constructor(d,l){this.name=d,this.node=l}static Wrap(d,l){return new hr(d,l)}}class _a{getCompare(){return this.compare.bind(this)}indexedValueChanged(d,l){const y=new hr(qn,d),b=new hr(qn,l);return 0!==this.compare(y,b)}minPost(){return hr.MIN}}class qo extends _a{static get __EMPTY_NODE(){return mc}static set __EMPTY_NODE(d){mc=d}compare(d,l){return $n(d.name,l.name)}isDefinedOn(d){throw(0,Re.Y9)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(d,l){return!1}minPost(){return hr.MIN}maxPost(){return new hr(ei,mc)}makePost(d,l){return(0,Re.Uc)("string"==typeof d,"KeyIndex indexValue must always be a string."),new hr(d,mc)}toString(){return".key"}}const wo=new qo;class Ko{constructor(d,l,y,b,L=null){this.isReverse_=b,this.resultGenerator_=L,this.nodeStack_=[];let $=1;for(;!d.isEmpty();)if($=l?y(d.key,l):1,b&&($*=-1),$<0)d=this.isReverse_?d.left:d.right;else{if(0===$){this.nodeStack_.push(d);break}this.nodeStack_.push(d),d=this.isReverse_?d.right:d.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,d=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value},this.isReverse_)for(d=d.left;!d.isEmpty();)this.nodeStack_.push(d),d=d.right;else for(d=d.right;!d.isEmpty();)this.nodeStack_.push(d),d=d.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const d=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(d.key,d.value):{key:d.key,value:d.value}}}let _t,Es=(()=>{class p{constructor(l,y,b,L,$){this.key=l,this.value=y,this.color=b??p.RED,this.left=L??hs.EMPTY_NODE,this.right=$??hs.EMPTY_NODE}copy(l,y,b,L,$){return new p(l??this.key,y??this.value,b??this.color,L??this.left,$??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,y,b){let L=this;const $=b(l,L.key);return L=$<0?L.copy(null,null,null,L.left.insert(l,y,b),null):0===$?L.copy(null,y,null,null,null):L.copy(null,null,null,null,L.right.insert(l,y,b)),L.fixUp_()}removeMin_(){if(this.left.isEmpty())return hs.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,y){let b,L;if(b=this,y(l,b.key)<0)!b.left.isEmpty()&&!b.left.isRed_()&&!b.left.left.isRed_()&&(b=b.moveRedLeft_()),b=b.copy(null,null,null,b.left.remove(l,y),null);else{if(b.left.isRed_()&&(b=b.rotateRight_()),!b.right.isEmpty()&&!b.right.isRed_()&&!b.right.left.isRed_()&&(b=b.moveRedRight_()),0===y(l,b.key)){if(b.right.isEmpty())return hs.EMPTY_NODE;L=b.right.min_(),b=b.copy(L.key,L.value,null,null,b.right.removeMin_())}b=b.copy(null,null,null,null,b.right.remove(l,y))}return b.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,p.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,p.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),y=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,y)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return p.RED=!0,p.BLACK=!1,p})();class hs{constructor(d,l=hs.EMPTY_NODE){this.comparator_=d,this.root_=l}insert(d,l){return new hs(this.comparator_,this.root_.insert(d,l,this.comparator_).copy(null,null,Es.BLACK,null,null))}remove(d){return new hs(this.comparator_,this.root_.remove(d,this.comparator_).copy(null,null,Es.BLACK,null,null))}get(d){let l,y=this.root_;for(;!y.isEmpty();){if(l=this.comparator_(d,y.key),0===l)return y.value;l<0?y=y.left:l>0&&(y=y.right)}return null}getPredecessorKey(d){let l,y=this.root_,b=null;for(;!y.isEmpty();){if(l=this.comparator_(d,y.key),0===l){if(y.left.isEmpty())return b?b.key:null;for(y=y.left;!y.right.isEmpty();)y=y.right;return y.key}l<0?y=y.left:l>0&&(b=y,y=y.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(d){return this.root_.inorderTraversal(d)}reverseTraversal(d){return this.root_.reverseTraversal(d)}getIterator(d){return new Ko(this.root_,null,this.comparator_,!1,d)}getIteratorFrom(d,l){return new Ko(this.root_,d,this.comparator_,!1,l)}getReverseIteratorFrom(d,l){return new Ko(this.root_,d,this.comparator_,!0,l)}getReverseIterator(d){return new Ko(this.root_,null,this.comparator_,!0,d)}}function Fs(p,d){return $n(p.name,d.name)}function jc(p,d){return $n(p,d)}hs.EMPTY_NODE=new class vu{copy(d,l,y,b,L){return this}insert(d,l,y){return new Es(d,l,null)}remove(d,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(d){return!1}reverseTraversal(d){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Qa=function(p){return"number"==typeof p?"number:"+As(p):"string:"+p},eo=function(p){if(p.isLeafNode()){const d=p.val();(0,Re.Uc)("string"==typeof d||"number"==typeof d||"object"==typeof d&&(0,Re.Y7)(d,".sv"),"Priority must be a string or number.")}else(0,Re.Uc)(p===_t||p.isEmpty(),"priority of unexpected type.");(0,Re.Uc)(p===_t||p.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Or,ya,po,Lr=(()=>{class p{constructor(l,y=p.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=y,this.lazyHash_=null,(0,Re.Uc)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),eo(this.priorityNode_)}static set __childrenNodeConstructor(l){Or=l}static get __childrenNodeConstructor(){return Or}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new p(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:p.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Un(l)?this:".priority"===hn(l)?this.priorityNode_:p.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,y){return null}updateImmediateChild(l,y){return".priority"===l?this.updatePriority(y):y.isEmpty()&&".priority"!==l?this:p.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,y).updatePriority(this.priorityNode_)}updateChild(l,y){const b=hn(l);return null===b?y:y.isEmpty()&&".priority"!==b?this:((0,Re.Uc)(".priority"!==b||1===Ho(l),".priority must be the last token in a path"),this.updateImmediateChild(b,p.__childrenNodeConstructor.EMPTY_NODE.updateChild(ai(l),y)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,y){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Qa(this.priorityNode_.val())+":");const y=typeof this.value_;l+=y+":",l+="number"===y?As(this.value_):this.value_,this.lazyHash_=ft(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===p.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof p.__childrenNodeConstructor?-1:((0,Re.Uc)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const y=typeof l.value_,b=typeof this.value_,L=p.VALUE_TYPE_ORDER.indexOf(y),$=p.VALUE_TYPE_ORDER.indexOf(b);return(0,Re.Uc)(L>=0,"Unknown leaf type: "+y),(0,Re.Uc)($>=0,"Unknown leaf type: "+b),L===$?"object"===b?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:$-L}withIndex(){return this}isIndexed(){return!0}equals(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))}}return p.VALUE_TYPE_ORDER=["object","boolean","number","string"],p})();const ti=new class Ja extends _a{compare(d,l){const y=d.node.getPriority(),b=l.node.getPriority(),L=y.compareTo(b);return 0===L?$n(d.name,l.name):L}isDefinedOn(d){return!d.getPriority().isEmpty()}indexedValueChanged(d,l){return!d.getPriority().equals(l.getPriority())}minPost(){return hr.MIN}maxPost(){return new hr(ei,new Lr("[PRIORITY-POST]",po))}makePost(d,l){const y=ya(d);return new hr(l,new Lr("[PRIORITY-POST]",y))}toString(){return".priority"}},Gc=Math.log(2);class Is{constructor(d){this.count=parseInt(Math.log(d+1)/Gc,10),this.current_=this.count-1;const b=(L=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=d+1&b}nextBitIsOne(){const d=!(this.bits_&1<<this.current_);return this.current_--,d}}const hi=function(p,d,l,y){p.sort(d);const b=function(_e,De){const yt=De-_e;let vt,Pt;if(0===yt)return null;if(1===yt)return vt=p[_e],Pt=l?l(vt):vt,new Es(Pt,vt.node,Es.BLACK,null,null);{const pn=parseInt(yt/2,10)+_e,jn=b(_e,pn),mi=b(pn+1,De);return vt=p[pn],Pt=l?l(vt):vt,new Es(Pt,vt.node,Es.BLACK,jn,mi)}},se=function(_e){let De=null,yt=null,vt=p.length;const Pt=function(jn,mi){const uo=vt-jn,Gl=vt;vt-=jn;const vh=b(uo+1,Gl),ol=p[uo],gy=l?l(ol):ol;pn(new Es(gy,ol.node,mi,null,vh))},pn=function(jn){De?(De.left=jn,De=jn):(yt=jn,De=jn)};for(let jn=0;jn<_e.count;++jn){const mi=_e.nextBitIsOne(),uo=Math.pow(2,_e.count-(jn+1));mi?Pt(uo,Es.BLACK):(Pt(uo,Es.BLACK),Pt(uo,Es.RED))}return yt}(new Is(p.length));return new hs(y||d,se)};let Ls;const Er={};class D{constructor(d,l){this.indexes_=d,this.indexSet_=l}static get Default(){return(0,Re.Uc)(Er&&ti,"ChildrenNode.ts has not been loaded"),Ls=Ls||new D({".priority":Er},{".priority":ti}),Ls}get(d){const l=(0,Re.o5)(this.indexes_,d);if(!l)throw new Error("No index defined for "+d);return l instanceof hs?l:null}hasIndex(d){return(0,Re.Y7)(this.indexSet_,d.toString())}addIndex(d,l){(0,Re.Uc)(d!==wo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const y=[];let b=!1;const L=l.getIterator(hr.Wrap);let se,$=L.getNext();for(;$;)b=b||d.isDefinedOn($.node),y.push($),$=L.getNext();se=b?hi(y,d.getCompare()):Er;const _e=d.toString(),De=Object.assign({},this.indexSet_);De[_e]=d;const yt=Object.assign({},this.indexes_);return yt[_e]=se,new D(yt,De)}addToIndexes(d,l){const y=(0,Re.kH)(this.indexes_,(b,L)=>{const $=(0,Re.o5)(this.indexSet_,L);if((0,Re.Uc)($,"Missing index implementation for "+L),b===Er){if($.isDefinedOn(d.node)){const se=[],_e=l.getIterator(hr.Wrap);let De=_e.getNext();for(;De;)De.name!==d.name&&se.push(De),De=_e.getNext();return se.push(d),hi(se,$.getCompare())}return Er}{const se=l.get(d.name);let _e=b;return se&&(_e=_e.remove(new hr(d.name,se))),_e.insert(d,d.node)}});return new D(y,this.indexSet_)}removeFromIndexes(d,l){const y=(0,Re.kH)(this.indexes_,b=>{if(b===Er)return b;{const L=l.get(d.name);return L?b.remove(new hr(d.name,L)):b}});return new D(y,this.indexSet_)}}let K,x=(()=>{class p{constructor(l,y,b){this.children_=l,this.priorityNode_=y,this.indexMap_=b,this.lazyHash_=null,this.priorityNode_&&eo(this.priorityNode_),this.children_.isEmpty()&&(0,Re.Uc)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return K||(K=new p(new hs(jc),null,D.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||K}updatePriority(l){return this.children_.isEmpty()?this:new p(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const y=this.children_.get(l);return null===y?K:y}}getChild(l){const y=hn(l);return null===y?this:this.getImmediateChild(y).getChild(ai(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,y){if((0,Re.Uc)(y,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(y);{const b=new hr(l,y);let L,$;y.isEmpty()?(L=this.children_.remove(l),$=this.indexMap_.removeFromIndexes(b,this.children_)):(L=this.children_.insert(l,y),$=this.indexMap_.addToIndexes(b,this.children_));const se=L.isEmpty()?K:this.priorityNode_;return new p(L,se,$)}}updateChild(l,y){const b=hn(l);if(null===b)return y;{(0,Re.Uc)(".priority"!==hn(l)||1===Ho(l),".priority must be the last token in a path");const L=this.getImmediateChild(b).updateChild(ai(l),y);return this.updateImmediateChild(b,L)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const y={};let b=0,L=0,$=!0;if(this.forEachChild(ti,(se,_e)=>{y[se]=_e.val(l),b++,$&&p.INTEGER_REGEXP_.test(se)?L=Math.max(L,Number(se)):$=!1}),!l&&$&&L<2*b){const se=[];for(const _e in y)se[_e]=y[_e];return se}return l&&!this.getPriority().isEmpty()&&(y[".priority"]=this.getPriority().val()),y}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Qa(this.getPriority().val())+":"),this.forEachChild(ti,(y,b)=>{const L=b.hash();""!==L&&(l+=":"+y+":"+L)}),this.lazyHash_=""===l?"":ft(l)}return this.lazyHash_}getPredecessorChildName(l,y,b){const L=this.resolveIndex_(b);if(L){const $=L.getPredecessorKey(new hr(l,y));return $?$.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const y=this.resolveIndex_(l);if(y){const b=y.minKey();return b&&b.name}return this.children_.minKey()}getFirstChild(l){const y=this.getFirstChildName(l);return y?new hr(y,this.children_.get(y)):null}getLastChildName(l){const y=this.resolveIndex_(l);if(y){const b=y.maxKey();return b&&b.name}return this.children_.maxKey()}getLastChild(l){const y=this.getLastChildName(l);return y?new hr(y,this.children_.get(y)):null}forEachChild(l,y){const b=this.resolveIndex_(l);return b?b.inorderTraversal(L=>y(L.name,L.node)):this.children_.inorderTraversal(y)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,y){const b=this.resolveIndex_(y);if(b)return b.getIteratorFrom(l,L=>L);{const L=this.children_.getIteratorFrom(l.name,hr.Wrap);let $=L.peek();for(;null!=$&&y.compare($,l)<0;)L.getNext(),$=L.peek();return L}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,y){const b=this.resolveIndex_(y);if(b)return b.getReverseIteratorFrom(l,L=>L);{const L=this.children_.getReverseIteratorFrom(l.name,hr.Wrap);let $=L.peek();for(;null!=$&&y.compare($,l)>0;)L.getNext(),$=L.peek();return L}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===fe?-1:0}withIndex(l){if(l===wo||this.indexMap_.hasIndex(l))return this;{const y=this.indexMap_.addIndex(l,this.children_);return new p(this.children_,this.priorityNode_,y)}}isIndexed(l){return l===wo||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const y=l;if(this.getPriority().equals(y.getPriority())){if(this.children_.count()===y.children_.count()){const b=this.getIterator(ti),L=y.getIterator(ti);let $=b.getNext(),se=L.getNext();for(;$&&se;){if($.name!==se.name||!$.node.equals(se.node))return!1;$=b.getNext(),se=L.getNext()}return null===$&&null===se}return!1}return!1}}resolveIndex_(l){return l===wo?null:this.indexMap_.get(l.toString())}}return p.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,p})();const fe=new class H extends x{constructor(){super(new hs(jc),x.EMPTY_NODE,D.Default)}compareTo(d){return d===this?0:1}equals(d){return d===this}getPriority(){return this}getImmediateChild(d){return x.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(hr,{MIN:{value:new hr(qn,x.EMPTY_NODE)},MAX:{value:new hr(ei,fe)}}),qo.__EMPTY_NODE=x.EMPTY_NODE,Lr.__childrenNodeConstructor=x,function ar(p){_t=p}(fe),function $c(p){po=p}(fe);const rt=!0;function pt(p,d=null){if(null===p)return x.EMPTY_NODE;if("object"==typeof p&&".priority"in p&&(d=p[".priority"]),(0,Re.Uc)(null===d||"string"==typeof d||"number"==typeof d||"object"==typeof d&&".sv"in d,"Invalid priority type found: "+typeof d),"object"==typeof p&&".value"in p&&null!==p[".value"]&&(p=p[".value"]),"object"!=typeof p||".sv"in p)return new Lr(p,pt(d));if(p instanceof Array||!rt){let l=x.EMPTY_NODE;return Yr(p,(y,b)=>{if((0,Re.Y7)(p,y)&&"."!==y.substring(0,1)){const L=pt(b);(L.isLeafNode()||!L.isEmpty())&&(l=l.updateImmediateChild(y,L))}}),l.updatePriority(pt(d))}{const l=[];let y=!1;if(Yr(p,($,se)=>{if("."!==$.substring(0,1)){const _e=pt(se);_e.isEmpty()||(y=y||!_e.getPriority().isEmpty(),l.push(new hr($,_e)))}}),0===l.length)return x.EMPTY_NODE;const L=hi(l,Fs,$=>$.name,jc);if(y){const $=hi(l,ti.getCompare());return new x(L,pt(d),new D({".priority":$},{".priority":ti}))}return new x(L,pt(d),D.Default)}}!function to(p){ya=p}(pt);class an extends _a{constructor(d){super(),this.indexPath_=d,(0,Re.Uc)(!Un(d)&&".priority"!==hn(d),"Can't create PathIndex with empty path or .priority key")}extractChild(d){return d.getChild(this.indexPath_)}isDefinedOn(d){return!d.getChild(this.indexPath_).isEmpty()}compare(d,l){const y=this.extractChild(d.node),b=this.extractChild(l.node),L=y.compareTo(b);return 0===L?$n(d.name,l.name):L}makePost(d,l){const y=pt(d),b=x.EMPTY_NODE.updateChild(this.indexPath_,y);return new hr(l,b)}maxPost(){const d=x.EMPTY_NODE.updateChild(this.indexPath_,fe);return new hr(ei,d)}toString(){return Qs(this.indexPath_,0).join("/")}}const Gr=new class Xr extends _a{compare(d,l){const y=d.node.compareTo(l.node);return 0===y?$n(d.name,l.name):y}isDefinedOn(d){return!0}indexedValueChanged(d,l){return!d.equals(l)}minPost(){return hr.MIN}maxPost(){return hr.MAX}makePost(d,l){const y=pt(d);return new hr(l,y)}toString(){return".value"}};function Pr(p,d,l){return{type:"child_changed",snapshotNode:d,childName:p,oldSnap:l}}class Jn{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ti}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Re.Uc)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Re.Uc)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qn}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Re.Uc)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Re.Uc)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ei}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Re.Uc)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ti}copy(){const d=new Jn;return d.limitSet_=this.limitSet_,d.limit_=this.limit_,d.startSet_=this.startSet_,d.startAfterSet_=this.startAfterSet_,d.indexStartValue_=this.indexStartValue_,d.startNameSet_=this.startNameSet_,d.indexStartName_=this.indexStartName_,d.endSet_=this.endSet_,d.endBeforeSet_=this.endBeforeSet_,d.indexEndValue_=this.indexEndValue_,d.endNameSet_=this.endNameSet_,d.indexEndName_=this.indexEndName_,d.index_=this.index_,d.viewFrom_=this.viewFrom_,d}}function nn(p){const d={};if(p.isDefault())return d;let l;if(p.index_===ti?l="$priority":p.index_===Gr?l="$value":p.index_===wo?l="$key":((0,Re.Uc)(p.index_ instanceof an,"Unrecognized index type!"),l=p.index_.toString()),d.orderBy=(0,Re.i)(l),p.startSet_){const y=p.startAfterSet_?"startAfter":"startAt";d[y]=(0,Re.i)(p.indexStartValue_),p.startNameSet_&&(d[y]+=","+(0,Re.i)(p.indexStartName_))}if(p.endSet_){const y=p.endBeforeSet_?"endBefore":"endAt";d[y]=(0,Re.i)(p.indexEndValue_),p.endNameSet_&&(d[y]+=","+(0,Re.i)(p.indexEndName_))}return p.limitSet_&&(p.isViewFromLeft()?d.limitToFirst=p.limit_:d.limitToLast=p.limit_),d}function un(p){const d={};if(p.startSet_&&(d.sp=p.indexStartValue_,p.startNameSet_&&(d.sn=p.indexStartName_),d.sin=!p.startAfterSet_),p.endSet_&&(d.ep=p.indexEndValue_,p.endNameSet_&&(d.en=p.indexEndName_),d.ein=!p.endBeforeSet_),p.limitSet_){d.l=p.limit_;let l=p.viewFrom_;""===l&&(l=p.isViewFromLeft()?"l":"r"),d.vf=l}return p.index_!==ti&&(d.i=p.index_.toString()),d}class Eu extends Qn{constructor(d,l,y,b){super(),this.repoInfo_=d,this.onDataUpdate_=l,this.authTokenProvider_=y,this.appCheckTokenProvider_=b,this.log_=zn("p:rest:"),this.listens_={}}reportStats(d){throw new Error("Method not implemented.")}static getListenId_(d,l){return void 0!==l?"tag$"+l:((0,Re.Uc)(d._queryParams.isDefault(),"should have a tag if it's not a default query."),d._path.toString())}listen(d,l,y,b){const L=d._path.toString();this.log_("Listen called for "+L+" "+d._queryIdentifier);const $=Eu.getListenId_(d,y),se={};this.listens_[$]=se;const _e=nn(d._queryParams);this.restRequest_(L+".json",_e,(De,yt)=>{let vt=yt;if(404===De&&(vt=null,De=null),null===De&&this.onDataUpdate_(L,vt,!1,y),(0,Re.o5)(this.listens_,$)===se){let Pt;Pt=De?401===De?"permission_denied":"rest_error:"+De:"ok",b(Pt,null)}})}unlisten(d,l){const y=Eu.getListenId_(d,l);delete this.listens_[y]}get(d){const l=nn(d._queryParams),y=d._path.toString(),b=new Re.o9;return this.restRequest_(y+".json",l,(L,$)=>{let se=$;404===L&&(se=null,L=null),null===L?(this.onDataUpdate_(y,se,!1,null),b.resolve(se)):b.reject(new Error(se))}),b.promise}refreshAuthToken(d){}restRequest_(d,l={},y){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([b,L])=>{b&&b.accessToken&&(l.auth=b.accessToken),L&&L.token&&(l.ac=L.token);const $=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+d+"?ns="+this.repoInfo_.namespace+(0,Re.ik)(l);this.log_("Sending REST request for "+$);const se=new XMLHttpRequest;se.onreadystatechange=()=>{if(y&&4===se.readyState){this.log_("REST Response for "+$+" received. status:",se.status,"response:",se.responseText);let _e=null;if(se.status>=200&&se.status<300){try{_e=(0,Re.GI)(se.responseText)}catch{Vn("Failed to parse JSON response for "+$+": "+se.responseText)}y(null,_e)}else 401!==se.status&&404!==se.status&&Vn("Got unsuccessful REST response for "+$+" Status: "+se.status),y(se.status);y=null}},se.open("GET",$,!0),se.send()})}}class jt{constructor(){this.rootNode_=x.EMPTY_NODE}getNode(d){return this.rootNode_.getChild(d)}updateSnapshot(d,l){this.rootNode_=this.rootNode_.updateChild(d,l)}}function ct(){return{value:null,children:new Map}}function St(p,d,l){if(Un(d))p.value=l,p.children.clear();else if(null!==p.value)p.value=p.value.updateChild(d,l);else{const y=hn(d);p.children.has(y)||p.children.set(y,ct()),St(p.children.get(y),d=ai(d),l)}}function fs(p,d,l){null!==p.value?l(d,p.value):function _c(p,d){p.children.forEach((l,y)=>{d(y,l)})}(p,(y,b)=>{fs(b,new Rn(d.toString()+"/"+y),l)})}class yl{constructor(d){this.collection_=d,this.last_=null}get(){const d=this.collection_.get(),l=Object.assign({},d);return this.last_&&Yr(this.last_,(y,b)=>{l[y]=l[y]-b}),this.last_=d,l}}class Ud{constructor(d,l){this.server_=l,this.statsToReport_={},this.statsListener_=new yl(d);const y=1e4+2e4*Math.random();oi(this.reportStats_.bind(this),Math.floor(y))}reportStats_(){const d=this.statsListener_.get(),l={};let y=!1;Yr(d,(b,L)=>{L>0&&(0,Re.Y7)(this.statsToReport_,b)&&(l[b]=L,y=!0)}),y&&this.server_.reportStats(l),oi(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var go=function(p){return p[p.OVERWRITE=0]="OVERWRITE",p[p.MERGE=1]="MERGE",p[p.ACK_USER_WRITE=2]="ACK_USER_WRITE",p[p.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",p}(go||{});function ec(p){return{fromUser:!1,fromServer:!0,queryId:p,tagged:!0}}class Sn{constructor(d,l,y){this.path=d,this.affectedTree=l,this.revert=y,this.type=go.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(d){if(Un(this.path)){if(null!=this.affectedTree.value)return(0,Re.Uc)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new Rn(d));return new Sn(Sr(),l,this.revert)}}return(0,Re.Uc)(hn(this.path)===d,"operationForChild called for unrelated child."),new Sn(ai(this.path),this.affectedTree,this.revert)}}class Yo{constructor(d,l,y){this.source=d,this.path=l,this.snap=y,this.type=go.OVERWRITE}operationForChild(d){return Un(this.path)?new Yo(this.source,Sr(),this.snap.getImmediateChild(d)):new Yo(this.source,ai(this.path),this.snap)}}class gi{constructor(d,l,y){this.source=d,this.path=l,this.children=y,this.type=go.MERGE}operationForChild(d){if(Un(this.path)){const l=this.children.subtree(new Rn(d));return l.isEmpty()?null:l.value?new Yo(this.source,Sr(),l.value):new gi(this.source,Sr(),l)}return(0,Re.Uc)(hn(this.path)===d,"Can't get a merge for a child not on the path of the operation"),new gi(this.source,ai(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class fn{constructor(d,l,y){this.node_=d,this.fullyInitialized_=l,this.filtered_=y}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(d){if(Un(d))return this.isFullyInitialized()&&!this.filtered_;const l=hn(d);return this.isCompleteForChild(l)}isCompleteForChild(d){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(d)}getNode(){return this.node_}}function Na(p,d,l,y,b,L){const $=y.filter(se=>se.type===l);$.sort((se,_e)=>function Ht(p,d,l){if(null==d.childName||null==l.childName)throw(0,Re.Y9)("Should only compare child_ events.");const y=new hr(d.childName,d.snapshotNode),b=new hr(l.childName,l.snapshotNode);return p.index_.compare(y,b)}(p,se,_e)),$.forEach(se=>{const _e=function Ii(p,d,l){return"value"===d.type||"child_removed"===d.type||(d.prevName=l.getPredecessorChildName(d.childName,d.snapshotNode,p.index_)),d}(p,se,L);b.forEach(De=>{De.respondsTo(se.type)&&d.push(De.createEvent(_e,p.query_))})})}function io(p,d){return{eventCache:p,serverCache:d}}function ka(p,d,l,y){return io(new fn(d,l,y),p.serverCache)}function Qo(p,d,l,y){return io(p.eventCache,new fn(d,l,y))}function Fo(p){return p.eventCache.isFullyInitialized()?p.eventCache.getNode():null}function pr(p){return p.serverCache.isFullyInitialized()?p.serverCache.getNode():null}let vl;class ri{constructor(d,l=(()=>(vl||(vl=new hs(fr)),vl))()){this.value=d,this.children=l}static fromObject(d){let l=new ri(null);return Yr(d,(y,b)=>{l=l.set(new Rn(y),b)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(d,l){if(null!=this.value&&l(this.value))return{path:Sr(),value:this.value};if(Un(d))return null;{const y=hn(d),b=this.children.get(y);if(null!==b){const L=b.findRootMostMatchingPathAndValue(ai(d),l);return null!=L?{path:dr(new Rn(y),L.path),value:L.value}:null}return null}}findRootMostValueAndPath(d){return this.findRootMostMatchingPathAndValue(d,()=>!0)}subtree(d){if(Un(d))return this;{const l=hn(d),y=this.children.get(l);return null!==y?y.subtree(ai(d)):new ri(null)}}set(d,l){if(Un(d))return new ri(l,this.children);{const y=hn(d),L=(this.children.get(y)||new ri(null)).set(ai(d),l),$=this.children.insert(y,L);return new ri(this.value,$)}}remove(d){if(Un(d))return this.children.isEmpty()?new ri(null):new ri(null,this.children);{const l=hn(d),y=this.children.get(l);if(y){const b=y.remove(ai(d));let L;return L=b.isEmpty()?this.children.remove(l):this.children.insert(l,b),null===this.value&&L.isEmpty()?new ri(null):new ri(this.value,L)}return this}}get(d){if(Un(d))return this.value;{const l=hn(d),y=this.children.get(l);return y?y.get(ai(d)):null}}setTree(d,l){if(Un(d))return l;{const y=hn(d),L=(this.children.get(y)||new ri(null)).setTree(ai(d),l);let $;return $=L.isEmpty()?this.children.remove(y):this.children.insert(y,L),new ri(this.value,$)}}fold(d){return this.fold_(Sr(),d)}fold_(d,l){const y={};return this.children.inorderTraversal((b,L)=>{y[b]=L.fold_(dr(d,b),l)}),l(d,this.value,y)}findOnPath(d,l){return this.findOnPath_(d,Sr(),l)}findOnPath_(d,l,y){const b=!!this.value&&y(l,this.value);if(b)return b;if(Un(d))return null;{const L=hn(d),$=this.children.get(L);return $?$.findOnPath_(ai(d),dr(l,L),y):null}}foreachOnPath(d,l){return this.foreachOnPath_(d,Sr(),l)}foreachOnPath_(d,l,y){if(Un(d))return this;{this.value&&y(l,this.value);const b=hn(d),L=this.children.get(b);return L?L.foreachOnPath_(ai(d),dr(l,b),y):new ri(null)}}foreach(d){this.foreach_(Sr(),d)}foreach_(d,l){this.children.inorderTraversal((y,b)=>{b.foreach_(dr(d,y),l)}),this.value&&l(d,this.value)}foreachChild(d){this.children.inorderTraversal((l,y)=>{y.value&&d(l,y.value)})}}class Lo{constructor(d){this.writeTree_=d}static empty(){return new Lo(new ri(null))}}function Cs(p,d,l){if(Un(d))return new Lo(new ri(l));{const y=p.writeTree_.findRootMostValueAndPath(d);if(null!=y){const b=y.path;let L=y.value;const $=Ji(b,d);return L=L.updateChild($,l),new Lo(p.writeTree_.set(b,L))}{const b=new ri(l),L=p.writeTree_.setTree(d,b);return new Lo(L)}}}function Hc(p,d,l){let y=p;return Yr(l,(b,L)=>{y=Cs(y,dr(d,b),L)}),y}function tc(p,d){if(Un(d))return Lo.empty();{const l=p.writeTree_.setTree(d,new ri(null));return new Lo(l)}}function yc(p,d){return null!=so(p,d)}function so(p,d){const l=p.writeTree_.findRootMostValueAndPath(d);return null!=l?p.writeTree_.get(l.path).getChild(Ji(l.path,d)):null}function Iu(p){const d=[],l=p.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(ti,(y,b)=>{d.push(new hr(y,b))}):p.writeTree_.children.inorderTraversal((y,b)=>{null!=b.value&&d.push(new hr(y,b.value))}),d}function Qe(p,d){if(Un(d))return p;{const l=so(p,d);return new Lo(null!=l?new ri(l):p.writeTree_.subtree(d))}}function gr(p){return p.writeTree_.isEmpty()}function cs(p,d){return C(Sr(),p.writeTree_,d)}function C(p,d,l){if(null!=d.value)return l.updateChild(p,d.value);{let y=null;return d.children.inorderTraversal((b,L)=>{".priority"===b?((0,Re.Uc)(null!==L.value,"Priority writes must always be leaf nodes"),y=L.value):l=C(dr(p,b),L,l)}),!l.getChild(p).isEmpty()&&null!==y&&(l=l.updateChild(dr(p,".priority"),y)),l}}function M(p,d){return xr(d,p)}function me(p,d){if(p.snap)return ls(p.path,d);for(const l in p.children)if(p.children.hasOwnProperty(l)&&ls(dr(p.path,l),d))return!0;return!1}function Ze(p){return p.visible}function Vt(p,d,l){let y=Lo.empty();for(let b=0;b<p.length;++b){const L=p[b];if(d(L)){const $=L.path;let se;if(L.snap)ls(l,$)?(se=Ji(l,$),y=Cs(y,se,L.snap)):ls($,l)&&(se=Ji($,l),y=Cs(y,Sr(),L.snap.getChild(se)));else{if(!L.children)throw(0,Re.Y9)("WriteRecord should have .snap or .children");if(ls(l,$))se=Ji(l,$),y=Hc(y,se,L.children);else if(ls($,l))if(se=Ji($,l),Un(se))y=Hc(y,Sr(),L.children);else{const _e=(0,Re.o5)(L.children,hn(se));if(_e){const De=_e.getChild(ai(se));y=Cs(y,Sr(),De)}}}}}return y}function Ft(p,d,l,y,b){if(y||b){const L=Qe(p.visibleWrites,d);return!b&&gr(L)?l:b||null!=l||yc(L,Sr())?cs(Vt(p.allWrites,function(De){return(De.visible||b)&&(!y||!~y.indexOf(De.writeId))&&(ls(De.path,d)||ls(d,De.path))},d),l||x.EMPTY_NODE):null}{const L=so(p.visibleWrites,d);if(null!=L)return L;{const $=Qe(p.visibleWrites,d);return gr($)?l:null!=l||yc($,Sr())?cs($,l||x.EMPTY_NODE):null}}}function Do(p,d,l,y){return Ft(p.writeTree,p.treePath,d,l,y)}function zc(p,d){return function Xn(p,d,l){let y=x.EMPTY_NODE;const b=so(p.visibleWrites,d);if(b)return b.isLeafNode()||b.forEachChild(ti,(L,$)=>{y=y.updateImmediateChild(L,$)}),y;if(l){const L=Qe(p.visibleWrites,d);return l.forEachChild(ti,($,se)=>{const _e=cs(Qe(L,new Rn($)),se);y=y.updateImmediateChild($,_e)}),Iu(L).forEach($=>{y=y.updateImmediateChild($.name,$.node)}),y}return Iu(Qe(p.visibleWrites,d)).forEach($=>{y=y.updateImmediateChild($.name,$.node)}),y}(p.writeTree,p.treePath,d)}function Wu(p,d,l,y){return function Ri(p,d,l,y,b){(0,Re.Uc)(y||b,"Either existingEventSnap or existingServerSnap must exist");const L=dr(d,l);if(yc(p.visibleWrites,L))return null;{const $=Qe(p.visibleWrites,L);return gr($)?b.getChild(l):cs($,b.getChild(l))}}(p.writeTree,p.treePath,d,l,y)}function Hu(p,d){return function Fa(p,d){return so(p.visibleWrites,d)}(p.writeTree,dr(p.treePath,d))}function qc(p,d,l){return function qi(p,d,l,y){const b=dr(d,l),L=so(p.visibleWrites,b);return null!=L?L:y.isCompleteForChild(l)?cs(Qe(p.visibleWrites,b),y.getNode().getImmediateChild(l)):null}(p.writeTree,p.treePath,d,l)}function ir(p,d){return xr(dr(p.treePath,d),p.writeTree)}function xr(p,d){return{treePath:p,writeTree:d}}class jd{constructor(){this.changeMap=new Map}trackChildChange(d){const l=d.type,y=d.childName;(0,Re.Uc)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,Re.Uc)(".priority"!==y,"Only non-priority child changes can be tracked.");const b=this.changeMap.get(y);if(b){const L=b.type;if("child_added"===l&&"child_removed"===L)this.changeMap.set(y,Pr(y,d.snapshotNode,b.snapshotNode));else if("child_removed"===l&&"child_added"===L)this.changeMap.delete(y);else if("child_removed"===l&&"child_changed"===L)this.changeMap.set(y,function ci(p,d){return{type:"child_removed",snapshotNode:d,childName:p}}(y,b.oldSnap));else if("child_changed"===l&&"child_added"===L)this.changeMap.set(y,function Kn(p,d){return{type:"child_added",snapshotNode:d,childName:p}}(y,d.snapshotNode));else{if("child_changed"!==l||"child_changed"!==L)throw(0,Re.Y9)("Illegal combination of changes: "+d+" occurred after "+b);this.changeMap.set(y,Pr(y,d.snapshotNode,b.oldSnap))}}else this.changeMap.set(y,d)}getChanges(){return Array.from(this.changeMap.values())}}const $d=new class Kh{getCompleteChild(d){return null}getChildAfterChild(d,l,y){return null}};class Gd{constructor(d,l,y=null){this.writes_=d,this.viewCache_=l,this.optCompleteServerCache_=y}getCompleteChild(d){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(d))return l.getNode().getImmediateChild(d);{const y=null!=this.optCompleteServerCache_?new fn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return qc(this.writes_,d,y)}}getChildAfterChild(d,l,y){const b=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:pr(this.viewCache_),L=function gp(p,d,l,y,b,L){return function La(p,d,l,y,b,L,$){let se;const _e=Qe(p.visibleWrites,d),De=so(_e,Sr());if(null!=De)se=De;else{if(null==l)return[];se=cs(_e,l)}if(se=se.withIndex($),se.isEmpty()||se.isLeafNode())return[];{const yt=[],vt=$.getCompare(),Pt=L?se.getReverseIteratorFrom(y,$):se.getIteratorFrom(y,$);let pn=Pt.getNext();for(;pn&&yt.length<b;)0!==vt(pn,y)&&yt.push(pn),pn=Pt.getNext();return yt}}(p.writeTree,p.treePath,d,l,y,b,L)}(this.writes_,b,l,1,y,d);return 0===L.length?null:L[0]}}function oo(p,d,l,y,b,L){const $=d.eventCache;if(null!=Hu(y,l))return d;{let se,_e;if(Un(l))if((0,Re.Uc)(d.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),d.serverCache.isFiltered()){const De=pr(d),vt=zc(y,De instanceof x?De:x.EMPTY_NODE);se=p.filter.updateFullNode(d.eventCache.getNode(),vt,L)}else{const De=Do(y,pr(d));se=p.filter.updateFullNode(d.eventCache.getNode(),De,L)}else{const De=hn(l);if(".priority"===De){(0,Re.Uc)(1===Ho(l),"Can't have a priority with additional path components");const yt=$.getNode();_e=d.serverCache.getNode();const vt=Wu(y,l,yt,_e);se=null!=vt?p.filter.updatePriority(yt,vt):$.getNode()}else{const yt=ai(l);let vt;if($.isCompleteForChild(De)){_e=d.serverCache.getNode();const Pt=Wu(y,l,$.getNode(),_e);vt=null!=Pt?$.getNode().getImmediateChild(De).updateChild(yt,Pt):$.getNode().getImmediateChild(De)}else vt=qc(y,De,d.serverCache);se=null!=vt?p.filter.updateChild($.getNode(),De,vt,yt,b,L):$.getNode()}}return ka(d,se,$.isFullyInitialized()||Un(l),p.filter.filtersNodes())}}function zu(p,d,l,y,b,L,$,se){const _e=d.serverCache;let De;const yt=$?p.filter:p.filter.getIndexedFilter();if(Un(l))De=yt.updateFullNode(_e.getNode(),y,null);else if(yt.filtersNodes()&&!_e.isFiltered()){const pn=_e.getNode().updateChild(l,y);De=yt.updateFullNode(_e.getNode(),pn,null)}else{const pn=hn(l);if(!_e.isCompleteForPath(l)&&Ho(l)>1)return d;const jn=ai(l),uo=_e.getNode().getImmediateChild(pn).updateChild(jn,y);De=".priority"===pn?yt.updatePriority(_e.getNode(),uo):yt.updateChild(_e.getNode(),pn,uo,jn,$d,null)}const vt=Qo(d,De,_e.isFullyInitialized()||Un(l),yt.filtersNodes());return oo(p,vt,l,b,new Gd(b,vt,L),se)}function qu(p,d,l,y,b,L,$){const se=d.eventCache;let _e,De;const yt=new Gd(b,d,L);if(Un(l))De=p.filter.updateFullNode(d.eventCache.getNode(),y,$),_e=ka(d,De,!0,p.filter.filtersNodes());else{const vt=hn(l);if(".priority"===vt)De=p.filter.updatePriority(d.eventCache.getNode(),y),_e=ka(d,De,se.isFullyInitialized(),se.isFiltered());else{const Pt=ai(l),pn=se.getNode().getImmediateChild(vt);let jn;if(Un(Pt))jn=y;else{const mi=yt.getCompleteChild(vt);jn=null!=mi?".priority"===Ma(Pt)&&mi.getChild(xo(Pt)).isEmpty()?mi:mi.updateChild(Pt,y):x.EMPTY_NODE}_e=pn.equals(jn)?d:ka(d,p.filter.updateChild(se.getNode(),vt,jn,Pt,yt,$),se.isFullyInitialized(),p.filter.filtersNodes())}}return _e}function Yh(p,d){return p.eventCache.isCompleteForChild(d)}function Kc(p,d,l){return l.foreach((y,b)=>{d=d.updateChild(y,b)}),d}function Cu(p,d,l,y,b,L,$,se){if(d.serverCache.getNode().isEmpty()&&!d.serverCache.isFullyInitialized())return d;let De,_e=d;De=Un(l)?y:new ri(null).setTree(l,y);const yt=d.serverCache.getNode();return De.children.inorderTraversal((vt,Pt)=>{if(yt.hasChild(vt)){const jn=Kc(0,d.serverCache.getNode().getImmediateChild(vt),Pt);_e=zu(p,_e,new Rn(vt),jn,b,L,$,se)}}),De.children.inorderTraversal((vt,Pt)=>{const pn=!d.serverCache.isCompleteForChild(vt)&&null===Pt.value;if(!yt.hasChild(vt)&&!pn){const mi=Kc(0,d.serverCache.getNode().getImmediateChild(vt),Pt);_e=zu(p,_e,new Rn(vt),mi,b,L,$,se)}}),_e}function Ca(p,d){const l=pr(p.viewCache_);return l&&(p.query._queryParams.loadsAllData()||!Un(d)&&!l.getImmediateChild(hn(d)).isEmpty())?l.getChild(d):null}function mr(p,d,l,y){d.type===go.MERGE&&null!==d.source.queryId&&((0,Re.Uc)(pr(p.viewCache_),"We should always have a full cache before handling merges"),(0,Re.Uc)(Fo(p.viewCache_),"Missing event cache, even though we have a server cache"));const b=p.viewCache_,L=function od(p,d,l,y,b){const L=new jd;let $,se;if(l.type===go.OVERWRITE){const De=l;De.source.fromUser?$=qu(p,d,De.path,De.snap,y,b,L):((0,Re.Uc)(De.source.fromServer,"Unknown source."),se=De.source.tagged||d.serverCache.isFiltered()&&!Un(De.path),$=zu(p,d,De.path,De.snap,y,b,se,L))}else if(l.type===go.MERGE){const De=l;De.source.fromUser?$=function vc(p,d,l,y,b,L,$){let se=d;return y.foreach((_e,De)=>{const yt=dr(l,_e);Yh(d,hn(yt))&&(se=qu(p,se,yt,De,b,L,$))}),y.foreach((_e,De)=>{const yt=dr(l,_e);Yh(d,hn(yt))||(se=qu(p,se,yt,De,b,L,$))}),se}(p,d,De.path,De.children,y,b,L):((0,Re.Uc)(De.source.fromServer,"Unknown source."),se=De.source.tagged||d.serverCache.isFiltered(),$=Cu(p,d,De.path,De.children,y,b,se,L))}else if(l.type===go.ACK_USER_WRITE){const De=l;$=De.revert?function Hd(p,d,l,y,b,L){let $;if(null!=Hu(y,l))return d;{const se=new Gd(y,d,b),_e=d.eventCache.getNode();let De;if(Un(l)||".priority"===hn(l)){let yt;if(d.serverCache.isFullyInitialized())yt=Do(y,pr(d));else{const vt=d.serverCache.getNode();(0,Re.Uc)(vt instanceof x,"serverChildren would be complete if leaf node"),yt=zc(y,vt)}De=p.filter.updateFullNode(_e,yt,L)}else{const yt=hn(l);let vt=qc(y,yt,d.serverCache);null==vt&&d.serverCache.isCompleteForChild(yt)&&(vt=_e.getImmediateChild(yt)),De=null!=vt?p.filter.updateChild(_e,yt,vt,ai(l),se,L):d.eventCache.getNode().hasChild(yt)?p.filter.updateChild(_e,yt,x.EMPTY_NODE,ai(l),se,L):_e,De.isEmpty()&&d.serverCache.isFullyInitialized()&&($=Do(y,pr(d)),$.isLeafNode()&&(De=p.filter.updateFullNode(De,$,L)))}return $=d.serverCache.isFullyInitialized()||null!=Hu(y,Sr()),ka(d,De,$,p.filter.filtersNodes())}}(p,d,De.path,y,b,L):function Yc(p,d,l,y,b,L,$){if(null!=Hu(b,l))return d;const se=d.serverCache.isFiltered(),_e=d.serverCache;if(null!=y.value){if(Un(l)&&_e.isFullyInitialized()||_e.isCompleteForPath(l))return zu(p,d,l,_e.getNode().getChild(l),b,L,se,$);if(Un(l)){let De=new ri(null);return _e.getNode().forEachChild(wo,(yt,vt)=>{De=De.set(new Rn(yt),vt)}),Cu(p,d,l,De,b,L,se,$)}return d}{let De=new ri(null);return y.foreach((yt,vt)=>{const Pt=dr(l,yt);_e.isCompleteForPath(Pt)&&(De=De.set(yt,_e.getNode().getChild(Pt)))}),Cu(p,d,l,De,b,L,se,$)}}(p,d,De.path,De.affectedTree,y,b,L)}else{if(l.type!==go.LISTEN_COMPLETE)throw(0,Re.Y9)("Unknown operation type: "+l.type);$=function Gs(p,d,l,y,b){const L=d.serverCache;return oo(p,Qo(d,L.getNode(),L.isFullyInitialized()||Un(l),L.isFiltered()),l,y,$d,b)}(p,d,l.path,y,L)}const _e=L.getChanges();return function Wd(p,d,l){const y=d.eventCache;if(y.isFullyInitialized()){const b=y.getNode().isLeafNode()||y.getNode().isEmpty(),L=Fo(p);(l.length>0||!p.eventCache.isFullyInitialized()||b&&!y.getNode().equals(L)||!y.getNode().getPriority().equals(L.getPriority()))&&l.push(function ni(p){return{type:"value",snapshotNode:p}}(Fo(d)))}}(d,$,_e),{viewCache:$,changes:_e}}(p.processor_,b,d,l,y);return function El(p,d){(0,Re.Uc)(d.eventCache.getNode().isIndexed(p.filter.getIndex()),"Event snap not indexed"),(0,Re.Uc)(d.serverCache.getNode().isIndexed(p.filter.getIndex()),"Server snap not indexed")}(p.processor_,L.viewCache),(0,Re.Uc)(L.viewCache.serverCache.isFullyInitialized()||!b.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),p.viewCache_=L.viewCache,function Qc(p,d,l,y){return function Ur(p,d,l,y){const b=[],L=[];return d.forEach($=>{"child_changed"===$.type&&p.index_.indexedValueChanged($.oldSnap,$.snapshotNode)&&L.push(function as(p,d){return{type:"child_moved",snapshotNode:d,childName:p}}($.childName,$.snapshotNode))}),Na(p,b,"child_removed",d,y,l),Na(p,b,"child_added",d,y,l),Na(p,b,"child_moved",L,y,l),Na(p,b,"child_changed",d,y,l),Na(p,b,"value",d,y,l),b}(p.eventGenerator_,d,l,y?[y]:p.eventRegistrations_)}(p,L.changes,L.viewCache.eventCache.getNode(),null)}let Ec,Vo;function aa(p,d,l,y){const b=d.source.queryId;if(null!==b){const L=p.views.get(b);return(0,Re.Uc)(null!=L,"SyncTree gave us an op for an invalid query."),mr(L,d,l,y)}{let L=[];for(const $ of p.views.values())L=L.concat(mr($,d,l,y));return L}}function gs(p,d){let l=null;for(const y of p.views.values())l=l||Ca(y,d);return l}class cd{constructor(d){this.listenProvider_=d,this.syncPointTree_=new ri(null),this.pendingWriteTree_=function mo(){return{visibleWrites:Lo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wc(p,d,l,y,b){return function T(p,d,l,y,b){(0,Re.Uc)(y>p.lastWriteId,"Stacking an older write on top of newer ones"),void 0===b&&(b=!0),p.allWrites.push({path:d,snap:l,writeId:y,visible:b}),b&&(p.visibleWrites=Cs(p.visibleWrites,d,l)),p.lastWriteId=y}(p.pendingWriteTree_,d,l,y,b),b?Zi(p,new Yo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},d,l)):[]}function ca(p,d,l=!1){const y=function j(p,d){for(let l=0;l<p.allWrites.length;l++){const y=p.allWrites[l];if(y.writeId===d)return y}return null}(p.pendingWriteTree_,d);if(function te(p,d){const l=p.allWrites.findIndex(se=>se.writeId===d);(0,Re.Uc)(l>=0,"removeWrite called with nonexistent writeId.");const y=p.allWrites[l];p.allWrites.splice(l,1);let b=y.visible,L=!1,$=p.allWrites.length-1;for(;b&&$>=0;){const se=p.allWrites[$];se.visible&&($>=l&&me(se,y.path)?b=!1:ls(y.path,se.path)&&(L=!0)),$--}return!!b&&(L?(function at(p){p.visibleWrites=Vt(p.allWrites,Ze,Sr()),p.lastWriteId=p.allWrites.length>0?p.allWrites[p.allWrites.length-1].writeId:-1}(p),!0):(y.snap?p.visibleWrites=tc(p.visibleWrites,y.path):Yr(y.children,_e=>{p.visibleWrites=tc(p.visibleWrites,dr(y.path,_e))}),!0))}(p.pendingWriteTree_,d)){let L=new ri(null);return null!=y.snap?L=L.set(Sr(),!0):Yr(y.children,$=>{L=L.set(new Rn($),!0)}),Zi(p,new Sn(y.path,L,l))}return[]}function Ua(p,d,l){return Zi(p,new Yo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,l))}function Au(p,d,l){const b=p.pendingWriteTree_,L=p.syncPointTree_.findOnPath(d,($,se)=>{const De=gs(se,Ji($,d));if(De)return De});return Ft(b,d,L,l,!0)}function Zi(p,d){return qd(d,p.syncPointTree_,null,M(p.pendingWriteTree_,Sr()))}function qd(p,d,l,y){if(Un(p.path))return Vi(p,d,l,y);{const b=d.get(Sr());null==l&&null!=b&&(l=gs(b,Sr()));let L=[];const $=hn(p.path),se=p.operationForChild($),_e=d.children.get($);if(_e&&se){const De=l?l.getImmediateChild($):null,yt=ir(y,$);L=L.concat(qd(se,_e,De,yt))}return b&&(L=L.concat(aa(b,p,y,l))),L}}function Vi(p,d,l,y){const b=d.get(Sr());null==l&&null!=b&&(l=gs(b,Sr()));let L=[];return d.children.inorderTraversal(($,se)=>{const _e=l?l.getImmediateChild($):null,De=ir(y,$),yt=p.operationForChild($);yt&&(L=L.concat(Vi(yt,se,_e,De)))}),b&&(L=L.concat(aa(b,p,y,l))),L}function ic(p,d){return p.tagToQueryMap.get(d)}function dd(p){const d=p.indexOf("$");return(0,Re.Uc)(-1!==d&&d<p.length-1,"Bad queryKey."),{queryId:p.substr(d+1),path:new Rn(p.substr(0,d))}}function Qu(p,d,l){const y=p.syncPointTree_.get(d);return(0,Re.Uc)(y,"Missing sync point for query tag that we're tracking"),aa(y,l,M(p.pendingWriteTree_,d),null)}class Ju{constructor(d){this.node_=d}getImmediateChild(d){const l=this.node_.getImmediateChild(d);return new Ju(l)}node(){return this.node_}}class sc{constructor(d,l){this.syncTree_=d,this.path_=l}getImmediateChild(d){const l=dr(this.path_,d);return new sc(this.syncTree_,l)}node(){return Au(this.syncTree_,this.path_)}}const oc=function(p){return(p=p||{}).timestamp=p.timestamp||(new Date).getTime(),p},Kd=function(p,d,l){return p&&"object"==typeof p?((0,Re.Uc)(".sv"in p,"Unexpected leaf node or priority contents"),"string"==typeof p[".sv"]?Cl(p[".sv"],d,l):"object"==typeof p[".sv"]?wl(p[".sv"],d):void(0,Re.Uc)(!1,"Unexpected server value: "+JSON.stringify(p,null,2))):p},Cl=function(p,d,l){if("timestamp"===p)return l.timestamp;(0,Re.Uc)(!1,"Unexpected server value: "+p)},wl=function(p,d,l){p.hasOwnProperty("increment")||(0,Re.Uc)(!1,"Unexpected server value: "+JSON.stringify(p,null,2));const y=p.increment;"number"!=typeof y&&(0,Re.Uc)(!1,"Unexpected increment value: "+y);const b=d.node();if((0,Re.Uc)(null!==b&&typeof b<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!b.isLeafNode())return y;const $=b.getValue();return"number"!=typeof $?y:$+y},hd=function(p,d,l,y){return Pu(d,new sc(l,p),y)},Xc=function(p,d,l){return Pu(p,new Ju(d),l)};function Pu(p,d,l){const y=p.getPriority().val(),b=Kd(y,d.getImmediateChild(".priority"),l);let L;if(p.isLeafNode()){const $=p,se=Kd($.getValue(),d,l);return se!==$.getValue()||b!==$.getPriority().val()?new Lr(se,pt(b)):p}{const $=p;return L=$,b!==$.getPriority().val()&&(L=L.updatePriority(new Lr(b))),$.forEachChild(ti,(se,_e)=>{const De=Pu(_e,d.getImmediateChild(se),l);De!==_e&&(L=L.updateImmediateChild(se,De))}),L}}class ac{constructor(d="",l=null,y={children:{},childCount:0}){this.name=d,this.parent=l,this.node=y}}function Ba(p,d){let l=d instanceof Rn?d:new Rn(d),y=p,b=hn(l);for(;null!==b;){const L=(0,Re.o5)(y.node.children,b)||{children:{},childCount:0};y=new ac(b,y,L),l=ai(l),b=hn(l)}return y}function ja(p){return p.node.value}function bu(p,d){p.node.value=d,fd(p)}function Pc(p){return p.node.childCount>0}function Aa(p,d){Yr(p.node.children,(l,y)=>{d(new ac(l,p,y))})}function eu(p,d,l,y){l&&!y&&d(p),Aa(p,b=>{eu(b,d,!0,y)}),l&&y&&d(p)}function Sa(p){return new Rn(null===p.parent?p.name:Sa(p.parent)+"/"+p.name)}function fd(p){null!==p.parent&&function Tl(p,d,l){const y=function Zc(p){return void 0===ja(p)&&!Pc(p)}(l),b=(0,Re.Y7)(p.node.children,d);y&&b?(delete p.node.children[d],p.node.childCount--,fd(p)):!y&&!b&&(p.node.children[d]=l.node,p.node.childCount++,fd(p))}(p.parent,p.name,p)}const $a=/[\[\].#$\/\u0000-\u001F\u007F]/,Dl=/[\[\].#$\u0000-\u001F\u007F]/,cc=10485760,Ru=function(p){return"string"==typeof p&&0!==p.length&&!$a.test(p)},z=function(p,d,l){const y=l instanceof Rn?new Io(l,p):l;if(void 0===d)throw new Error(p+"contains undefined "+Co(y));if("function"==typeof d)throw new Error(p+"contains a function "+Co(y)+" with contents = "+d.toString());if(Ti(d))throw new Error(p+"contains "+d.toString()+" "+Co(y));if("string"==typeof d&&d.length>cc/3&&(0,Re.Uj)(d)>cc)throw new Error(p+"contains a string greater than "+cc+" utf8 bytes "+Co(y)+" ('"+d.substring(0,50)+"...')");if(d&&"object"==typeof d){let b=!1,L=!1;if(Yr(d,($,se)=>{if(".value"===$)b=!0;else if(".priority"!==$&&".sv"!==$&&(L=!0,!Ru($)))throw new Error(p+" contains an invalid key ("+$+") "+Co(y)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function gc(p,d){p.parts_.length>0&&(p.byteLength_+=1),p.parts_.push(d),p.byteLength_+=(0,Re.Uj)(d),Js(p)})(y,$),z(p,se,y),function ds(p){const d=p.parts_.pop();p.byteLength_-=(0,Re.Uj)(d),p.parts_.length>0&&(p.byteLength_-=1)}(y)}),b&&L)throw new Error(p+' contains ".value" child '+Co(y)+" in addition to actual children.")}},_o=function(p,d){const l=d.path.toString();if("string"!=typeof d.repoInfo.host||0===d.repoInfo.host.length||!Ru(d.repoInfo.namespace)&&"localhost"!==d.repoInfo.host.split(":")[0]||0!==l.length&&!function(p){return p&&(p=p.replace(/^\/*\.info(\/|$)/,"/")),function(p){return"string"==typeof p&&0!==p.length&&!Dl.test(p)}(p)}(l))throw new Error((0,Re.iQ)(p,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ms{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function vo(p,d,l){(function tu(p,d){let l=null;for(let y=0;y<d.length;y++){const b=d[y],L=b.getPath();null!==l&&!ks(L,l.path)&&(p.eventLists_.push(l),l=null),null===l&&(l={events:[],path:L}),l.events.push(b)}l&&p.eventLists_.push(l)})(p,l),function uc(p,d){p.recursionDepth_++;let l=!0;for(let y=0;y<p.eventLists_.length;y++){const b=p.eventLists_[y];b&&(d(b.path)?(pd(p.eventLists_[y]),p.eventLists_[y]=null):l=!1)}l&&(p.eventLists_=[]),p.recursionDepth_--}(p,y=>ls(y,d)||ls(d,y))}function pd(p){for(let d=0;d<p.events.length;d++){const l=p.events[d];if(null!==l){p.events[d]=null;const y=l.getEventRunner();xt&&rn("event: "+l.toString()),$r(y)}}}const bc=25;class Mu{constructor(d,l,y,b){this.repoInfo_=d,this.forceRestClient_=l,this.authTokenProvider_=y,this.appCheckProvider_=b,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ms,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ct(),this.transactionQueueTree_=new ac,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function _s(p){const l=p.infoData_.getNode(new Rn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function nr(p){return oc({timestamp:_s(p)})}function Al(p,d,l,y,b){p.dataUpdateCount++;const L=new Rn(d);l=p.interceptServerDataCallback_?p.interceptServerDataCallback_(d,l):l;let $=[];if(b)if(y){const _e=(0,Re.kH)(l,De=>pt(De));$=function Qh(p,d,l,y){const b=ic(p,y);if(b){const L=dd(b),$=L.path,se=L.queryId,_e=Ji($,d),De=ri.fromObject(l);return Qu(p,$,new gi(ec(se),_e,De))}return[]}(p.serverSyncTree_,L,_e,b)}else{const _e=pt(l);$=function ld(p,d,l,y){const b=ic(p,y);if(null!=b){const L=dd(b),$=L.path,se=L.queryId,_e=Ji($,d);return Qu(p,$,new Yo(ec(se),_e,l))}return[]}(p.serverSyncTree_,L,_e,b)}else if(y){const _e=(0,Re.kH)(l,De=>pt(De));$=function zd(p,d,l){const y=ri.fromObject(l);return Zi(p,new gi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},d,y))}(p.serverSyncTree_,L,_e)}else{const _e=pt(l);$=Ua(p.serverSyncTree_,L,_e)}let se=L;$.length>0&&(se=Mc(p,L)),vo(p.eventQueue_,se,$)}function Rc(p,d){Yd(p,"connected",d),!1===d&&function Jd(p){lc(p,"onDisconnectEvents");const d=nr(p),l=ct();fs(p.onDisconnect_,Sr(),(b,L)=>{const $=hd(b,L,p.serverSyncTree_,d);St(l,b,$)});let y=[];fs(l,Sr(),(b,L)=>{y=y.concat(Ua(p.serverSyncTree_,b,L));const $=function dc(p,d){const l=Sa(iu(p,d)),y=Ba(p.transactionQueueTree_,d);return function Xu(p,d,l){let y=l?p:p.parent;for(;null!==y;){if(d(y))return!0;y=y.parent}}(y,b=>{su(p,b)}),su(p,y),eu(y,b=>{su(p,b)}),l}(p,b);Mc(p,$)}),p.onDisconnect_=ct(),vo(p.eventQueue_,Sr(),y)}(p)}function Yd(p,d,l){const y=new Rn("/.info/"+d),b=pt(l);p.infoData_.updateSnapshot(y,b);const L=Ua(p.infoSyncTree_,y,b);vo(p.eventQueue_,y,L)}function md(p){return p.nextWriteId_++}function lc(p,...d){let l="";p.persistentConnection_&&(l=p.persistentConnection_.id+":"),rn(l,...d)}function Ki(p,d,l){return Au(p.serverSyncTree_,d,l)||x.EMPTY_NODE}function Uo(p,d=p.transactionQueueTree_){if(d||Oc(p,d),ja(d)){const l=eh(p,d);(0,Re.Uc)(l.length>0,"Sending zero length transaction queue"),l.every(b=>0===b.status)&&function Xd(p,d,l){const y=l.map(De=>De.currentWriteId),b=Ki(p,d,y);let L=b;const $=b.hash();for(let De=0;De<l.length;De++){const yt=l[De];(0,Re.Uc)(0===yt.status,"tryToSendTransactionQueue_: items in queue should all be run."),yt.status=1,yt.retryCount++;const vt=Ji(d,yt.path);L=L.updateChild(vt,yt.currentOutputSnapshotRaw)}const se=L.val(!0),_e=d;p.server_.put(_e.toString(),se,De=>{lc(p,"transaction put response",{path:_e.toString(),status:De});let yt=[];if("ok"===De){const vt=[];for(let Pt=0;Pt<l.length;Pt++)l[Pt].status=2,yt=yt.concat(ca(p.serverSyncTree_,l[Pt].currentWriteId)),l[Pt].onComplete&&vt.push(()=>l[Pt].onComplete(null,!0,l[Pt].currentOutputSnapshotResolved)),l[Pt].unwatcher();Oc(p,Ba(p.transactionQueueTree_,d)),Uo(p,p.transactionQueueTree_),vo(p.eventQueue_,d,yt);for(let Pt=0;Pt<vt.length;Pt++)$r(vt[Pt])}else{if("datastale"===De)for(let vt=0;vt<l.length;vt++)l[vt].status=3===l[vt].status?4:0;else{Vn("transaction at "+_e.toString()+" failed: "+De);for(let vt=0;vt<l.length;vt++)l[vt].status=4,l[vt].abortReason=De}Mc(p,d)}},$)}(p,Sa(d),l)}else Pc(d)&&Aa(d,l=>{Uo(p,l)})}function Mc(p,d){const l=iu(p,d),y=Sa(l);return function Zd(p,d,l){if(0===d.length)return;const y=[];let b=[];const $=d.filter(se=>0===se.status).map(se=>se.currentWriteId);for(let se=0;se<d.length;se++){const _e=d[se],De=Ji(l,_e.path);let vt,yt=!1;if((0,Re.Uc)(null!==De,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_e.status)yt=!0,vt=_e.abortReason,b=b.concat(ca(p.serverSyncTree_,_e.currentWriteId,!0));else if(0===_e.status)if(_e.retryCount>=bc)yt=!0,vt="maxretry",b=b.concat(ca(p.serverSyncTree_,_e.currentWriteId,!0));else{const Pt=Ki(p,_e.path,$);_e.currentInputSnapshot=Pt;const pn=d[se].update(Pt.val());if(void 0!==pn){z("transaction failed: Data returned ",pn,_e.path);let jn=pt(pn);"object"==typeof pn&&null!=pn&&(0,Re.Y7)(pn,".priority")||(jn=jn.updatePriority(Pt.getPriority()));const uo=_e.currentWriteId,Gl=nr(p),vh=Xc(jn,Pt,Gl);_e.currentOutputSnapshotRaw=jn,_e.currentOutputSnapshotResolved=vh,_e.currentWriteId=md(p),$.splice($.indexOf(uo),1),b=b.concat(wc(p.serverSyncTree_,_e.path,vh,_e.currentWriteId,_e.applyLocally)),b=b.concat(ca(p.serverSyncTree_,uo,!0))}else yt=!0,vt="nodata",b=b.concat(ca(p.serverSyncTree_,_e.currentWriteId,!0))}vo(p.eventQueue_,l,b),b=[],yt&&(d[se].status=2,setTimeout(d[se].unwatcher,Math.floor(0)),d[se].onComplete&&y.push("nodata"===vt?()=>d[se].onComplete(null,!1,d[se].currentInputSnapshot):()=>d[se].onComplete(new Error(vt),!1,null)))}Oc(p,p.transactionQueueTree_);for(let se=0;se<y.length;se++)$r(y[se]);Uo(p,p.transactionQueueTree_)}(p,eh(p,l),y),y}function iu(p,d){let l,y=p.transactionQueueTree_;for(l=hn(d);null!==l&&void 0===ja(y);)y=Ba(y,l),l=hn(d=ai(d));return y}function eh(p,d){const l=[];return th(p,d,l),l.sort((y,b)=>y.order-b.order),l}function th(p,d,l){const y=ja(d);if(y)for(let b=0;b<y.length;b++)l.push(y[b]);Aa(d,b=>{th(p,b,l)})}function Oc(p,d){const l=ja(d);if(l){let y=0;for(let b=0;b<l.length;b++)2!==l[b].status&&(l[y]=l[b],y++);l.length=y,bu(d,l.length>0?l:void 0)}Aa(d,y=>{Oc(p,y)})}function su(p,d){const l=ja(d);if(l){const y=[];let b=[],L=-1;for(let $=0;$<l.length;$++)3===l[$].status||(1===l[$].status?((0,Re.Uc)(L===$-1,"All SENT items should be at beginning of queue."),L=$,l[$].status=3,l[$].abortReason="set"):((0,Re.Uc)(0===l[$].status,"Unexpected transaction status in abort"),l[$].unwatcher(),b=b.concat(ca(p.serverSyncTree_,l[$].currentWriteId,!0)),l[$].onComplete&&y.push(l[$].onComplete.bind(null,new Error("set"),!1,null))));-1===L?bu(d,void 0):l.length=L+1,vo(p.eventQueue_,Sa(d),b);for(let $=0;$<y.length;$++)$r(y[$])}}const xc=function(p,d){const l=rf(p),y=l.namespace;return"firebase.com"===l.domain&&sr(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!y||"undefined"===y)&&"localhost"!==l.domain&&sr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ki(l.host,l.secure,y,"ws"===l.scheme||"wss"===l.scheme,d,"",y!==l.subdomain),path:new Rn(l.pathString)}},rf=function(p){let d="",l="",y="",b="",L="",$=!0,se="https",_e=443;if("string"==typeof p){let De=p.indexOf("//");De>=0&&(se=p.substring(0,De-1),p=p.substring(De+2));let yt=p.indexOf("/");-1===yt&&(yt=p.length);let vt=p.indexOf("?");-1===vt&&(vt=p.length),d=p.substring(0,Math.min(yt,vt)),yt<vt&&(b=function Sl(p){let d="";const l=p.split("/");for(let y=0;y<l.length;y++)if(l[y].length>0){let b=l[y];try{b=decodeURIComponent(b.replace(/\+/g," "))}catch{}d+="/"+b}return d}(p.substring(yt,vt)));const Pt=function _p(p){const d={};"?"===p.charAt(0)&&(p=p.substring(1));for(const l of p.split("&")){if(0===l.length)continue;const y=l.split("=");2===y.length?d[decodeURIComponent(y[0])]=decodeURIComponent(y[1]):Vn(`Invalid query segment '${l}' in query '${p}'`)}return d}(p.substring(Math.min(p.length,vt)));De=d.indexOf(":"),De>=0?($="https"===se||"wss"===se,_e=parseInt(d.substring(De+1),10)):De=d.length;const pn=d.slice(0,De);if("localhost"===pn.toLowerCase())l="localhost";else if(pn.split(".").length<=2)l=pn;else{const jn=d.indexOf(".");y=d.substring(0,jn).toLowerCase(),l=d.substring(jn+1),L=y}"ns"in Pt&&(L=Pt.ns)}return{host:d,port:_e,domain:l,subdomain:y,secure:$,scheme:se,pathString:b,namespace:L}};class ur{constructor(d,l,y,b){this._repo=d,this._path=l,this._queryParams=y,this._orderByCalled=b}get key(){return Un(this._path)?null:Ma(this._path)}get ref(){return new fc(this._repo,this._path)}get _queryIdentifier(){const d=un(this._queryParams),l=Di(d);return"{}"===l?"default":l}get _queryObject(){return un(this._queryParams)}isEqual(d){if(!((d=(0,Re.Yj)(d))instanceof ur))return!1;const l=this._repo===d._repo,y=ks(this._path,d._path);return l&&y&&this._queryIdentifier===d._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Fr(p){let d="";for(let l=p.pieceNum_;l<p.pieces_.length;l++)""!==p.pieces_[l]&&(d+="/"+encodeURIComponent(String(p.pieces_[l])));return d||"/"}(this._path)}}class fc extends ur{constructor(d,l){super(d,l,new Jn,!1)}get parent(){const d=xo(this._path);return null===d?null:new fc(this._repo,d)}get root(){let d=this;for(;null!==d.parent;)d=d.parent;return d}}(function ad(p){(0,Re.Uc)(!Ec,"__referenceConstructor has already been defined"),Ec=p})(fc),function Va(p){(0,Re.Uc)(!Vo,"__referenceConstructor has already been defined"),Vo=p}(fc);const la={};class mf{constructor(d,l){this._repoInternal=d,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function gd(p,d,l){if(p.stats_=li(p.repoInfo_),p.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)p.server_=new Eu(p.repoInfo_,(y,b,L,$)=>{Al(p,y,b,L,$)},p.authTokenProvider_,p.appCheckProvider_),setTimeout(()=>Rc(p,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Re.i)(l)}catch(y){throw new Error("Invalid authOverride provided: "+y)}}p.persistentConnection_=new Zs(p.repoInfo_,d,(y,b,L,$)=>{Al(p,y,b,L,$)},y=>{Rc(p,y)},y=>{!function mp(p,d){Yr(d,(l,y)=>{Yd(p,l,y)})}(p,y)},p.authTokenProvider_,p.appCheckProvider_,l),p.server_=p.persistentConnection_}p.authTokenProvider_.addTokenChangeListener(y=>{p.server_.refreshAuthToken(y)}),p.appCheckProvider_.addTokenChangeListener(y=>{p.server_.refreshAppCheckToken(y.token)}),p.statsReporter_=function Ps(p,d){const l=p.toString();return qs[l]||(qs[l]=d()),qs[l]}(p.repoInfo_,()=>new Ud(p.stats_,p.server_)),p.infoData_=new jt,p.infoSyncTree_=new cd({startListening:(y,b,L,$)=>{let se=[];const _e=p.infoData_.getNode(y._path);return _e.isEmpty()||(se=Ua(p.infoSyncTree_,y._path,_e),setTimeout(()=>{$("ok")},0)),se},stopListening:()=>{}}),Yd(p,"connected",!1),p.serverSyncTree_=new cd({startListening:(y,b,L,$)=>(p.server_.listen(y,L,b,(se,_e)=>{const De=$(se,_e);vo(p.eventQueue_,y._path,De)}),[]),stopListening:(y,b)=>{p.server_.unlisten(y,b)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fc(this._repo,Sr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Lu(p,d){const l=la[d];(!l||l[p.key]!==p)&&sr(`Database ${d}(${p.repoInfo_}) has already been deleted.`),function ef(p){p.persistentConnection_&&p.persistentConnection_.interrupt("repo_interrupt")}(p),delete l[p.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(d){null===this._rootInternal&&sr("Cannot call "+d+" on a deleted database.")}}function Wa(p=(0,ln.getApp)(),d){const l=(0,ln._getProvider)(p,"database").getImmediate({identifier:d});if(!l._instanceStarted){const y=(0,Re.on)("database");y&&function tl(p,d,l,y={}){(p=(0,Re.Yj)(p))._checkNotDeleted("useEmulator"),p._instanceStarted&&sr("Cannot call useEmulator() after instance has already been initialized.");const b=p._repoInternal;let L;if(b.repoInfo_.nodeAdmin)y.mockUserToken&&sr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),L=new Bs(Bs.OWNER);else if(y.mockUserToken){const $="string"==typeof y.mockUserToken?y.mockUserToken:(0,Re.YD)(y.mockUserToken,p.app.options.projectId);L=new Bs($)}!function vd(p,d,l,y){p.repoInfo_=new ki(`${d}:${l}`,!1,p.repoInfo_.namespace,p.repoInfo_.webSocketOnly,p.repoInfo_.nodeAdmin,p.repoInfo_.persistenceKey,p.repoInfo_.includeNamespaceInQueryParams,!0),y&&(p.authTokenProvider_=y)}(b,d,l,L)}(l,...y)}return l}Zs.prototype.simpleListen=function(p,d){this.sendRequest("q",{p},d)},Zs.prototype.echo=function(p,d){this.sendRequest("echo",{d:p},d)},function Cd(p){(function Bn(p){Xt=p})(ln.SDK_VERSION),(0,ln._registerComponent)(new Ln.Yl("database",(d,{instanceIdentifier:l})=>function Ed(p,d,l,y,b){let L=y||p.options.databaseURL;void 0===L&&(p.options.projectId||sr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rn("Using default host for project ",p.options.projectId),L=`${p.options.projectId}-default-rtdb.firebaseio.com`);let _e,De,$=xc(L,b),se=$.repoInfo;typeof process<"u"&&process.env&&(De=process.env.FIREBASE_DATABASE_EMULATOR_HOST),De?(_e=!0,L=`http://${De}?ns=${se.namespace}`,$=xc(L,b),se=$.repoInfo):_e=!$.repoInfo.secure;const yt=b&&_e?new Bs(Bs.OWNER):new ia(p.name,p.options,d);_o("Invalid Firebase Database URL",$),Un($.path)||sr("Database URL must point to the root of a Firebase Database (not including a child path).");const vt=function gf(p,d,l,y){let b=la[d.name];b||(b={},la[d.name]=b);let L=b[p.toURLString()];return L&&sr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),L=new Mu(p,!1,l,y),b[p.toURLString()]=L,L}(se,p,yt,new ra(p.name,l));return new mf(vt,p)}(d.getProvider("app").getImmediate(),d.getProvider("auth-internal"),d.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,ln.registerVersion)(Xe,"1.0.3",p),(0,ln.registerVersion)(Xe,"1.0.3","esm2017")}();class cu{constructor(d){return d}}const uu="database",bp=new A.UbH("angularfire2.database-instances");function hh(p){return(d,l)=>{const y=d.runOutsideAngular(()=>p(l));return new cu(y)}}const Fl={provide:class kl{constructor(){return(0,Ie.S_)(uu)}},deps:[[new A.T7N,bp]]},nl={provide:cu,useFactory:function uy(p,d){const l=(0,Ie.UN)(uu,p,d);return l&&new cu(l)},deps:[[new A.T7N,bp],Ne]};let Ef=(()=>{class p{constructor(){(0,je.Kk)("angularfire",Ie.j1.full,"rtdb")}static \u0275fac=function(y){return new(y||p)};static \u0275mod=A.a4G({type:p});static \u0275inj=A.s3X({providers:[nl,Fl]})}return p})();function Rp(p,...d){return{ngModule:Ef,providers:[{provide:bp,useFactory:hh(p),multi:!0,deps:[A.WW2,A.zZn,Ie.u,he,[new A.T7N,ht],[new A.T7N,Ie.gJ],...d]}]}}const kp=(0,Ie.qo)(Wa,!0),yh={apiKey:"AIzaSyCbQiRFo1MKF_WTEIwSMYg4rFL0CkKdTDI",authDomain:"exercise-app-9b873.firebaseapp.com",databaseURL:"https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app",projectId:"exercise-app-9b873",storageBucket:"exercise-app-9b873.appspot.com",messagingSenderId:"146569895533",appId:"1:146569895533:web:cfb4bca172cc29ee50a964",measurementId:"G-MW950TMVK5"};var km=V(6e3),Lp=V(3960),Fm=V(6180),Vp=V(2448),Tf=V(2080),Eo=V(1680),da=V(1368);let Df=(()=>{class p{static#e=this.\u0275fac=function(y){return new(y||p)};static#t=this.\u0275mod=A.a4G({type:p,bootstrap:[G]});static#n=this.\u0275inj=A.s3X({imports:[da.MD,_.iE,ye,Lp.LoginAndRegistrationModule,Fm.ProductPageModule,Vp.ProfileModuleModule,Tf.SingleProductPageModule,Eo.w,km.UN.initializeApp(yh),ze(()=>Wn()),Rp(()=>kp())]})}return p})();_.o_().bootstrapModule(Df).catch(p=>console.error(p))},6700:($t,We,V)=>{V.d(We,{g:()=>Q});var _=V(5657);class Q extends _.E{constructor(F){super(),this._value=F}get value(){return this.getValue()}_subscribe(F){const ye=super._subscribe(F);return!ye.closed&&F.next(this._value),ye}getValue(){const{hasError:F,thrownError:ye,_value:G}=this;if(F)throw ye;return this._throwIfClosed(),G}next(F){super.next(this._value=F)}}},3252:($t,We,V)=>{V.d(We,{_:()=>je});var _=V(1760),Q=V(6928),A=V(472),F=V(3928),ye=V(4491),G=V(8880),Ie=V(2075);let je=(()=>{class $e{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const Ve=new $e;return Ve.source=this,Ve.operator=Se,Ve}subscribe(Se,Ve,be){const ot=function le($e){return $e&&$e instanceof _.yR||function he($e){return $e&&(0,G.m)($e.next)&&(0,G.m)($e.error)&&(0,G.m)($e.complete)}($e)&&(0,Q.GI)($e)}(Se)?Se:new _.ot(Se,Ve,be);return(0,Ie.c)(()=>{const{operator:pe,source:Ue}=this;ot.add(pe?pe.call(ot,Ue):Ue?this._subscribe(ot):this._trySubscribe(ot))}),ot}_trySubscribe(Se){try{return this._subscribe(Se)}catch(Ve){Se.error(Ve)}}forEach(Se,Ve){return new(Ve=Ne(Ve))((be,ot)=>{const pe=new _.ot({next:Ue=>{try{Se(Ue)}catch(Ke){ot(Ke),pe.unsubscribe()}},error:ot,complete:be});this.subscribe(pe)})}_subscribe(Se){var Ve;return null===(Ve=this.source)||void 0===Ve?void 0:Ve.subscribe(Se)}[A.a](){return this}pipe(...Se){return(0,F.Y)(Se)(this)}toPromise(Se){return new(Se=Ne(Se))((Ve,be)=>{let ot;this.subscribe(pe=>ot=pe,pe=>be(pe),()=>Ve(ot))})}}return $e.create=we=>new $e(we),$e})();function Ne($e){var we;return null!==(we=$e??ye.config.Promise)&&void 0!==we?we:Promise}},5657:($t,We,V)=>{V.d(We,{E:()=>Ie});var _=V(3252),Q=V(6928);const F=(0,V(4912).w)(Ne=>function(){Ne(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ye=V(1248),G=V(2075);let Ie=(()=>{class Ne extends _._{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(le){const $e=new je(this,this);return $e.operator=le,$e}_throwIfClosed(){if(this.closed)throw new F}next(le){(0,G.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const $e of this.currentObservers)$e.next(le)}})}error(le){(0,G.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=le;const{observers:$e}=this;for(;$e.length;)$e.shift().error(le)}})}complete(){(0,G.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:le}=this;for(;le.length;)le.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var le;return(null===(le=this.observers)||void 0===le?void 0:le.length)>0}_trySubscribe(le){return this._throwIfClosed(),super._trySubscribe(le)}_subscribe(le){return this._throwIfClosed(),this._checkFinalizedStatuses(le),this._innerSubscribe(le)}_innerSubscribe(le){const{hasError:$e,isStopped:we,observers:Se}=this;return $e||we?Q.au:(this.currentObservers=null,Se.push(le),new Q.wH(()=>{this.currentObservers=null,(0,ye.k)(Se,le)}))}_checkFinalizedStatuses(le){const{hasError:$e,thrownError:we,isStopped:Se}=this;$e?le.error(we):Se&&le.complete()}asObservable(){const le=new _._;return le.source=this,le}}return Ne.create=(he,le)=>new je(he,le),Ne})();class je extends Ie{constructor(he,le){super(),this.destination=he,this.source=le}next(he){var le,$e;null===($e=null===(le=this.destination)||void 0===le?void 0:le.next)||void 0===$e||$e.call(le,he)}error(he){var le,$e;null===($e=null===(le=this.destination)||void 0===le?void 0:le.error)||void 0===$e||$e.call(le,he)}complete(){var he,le;null===(le=null===(he=this.destination)||void 0===he?void 0:he.complete)||void 0===le||le.call(he)}_subscribe(he){var le,$e;return null!==($e=null===(le=this.source)||void 0===le?void 0:le.subscribe(he))&&void 0!==$e?$e:Q.au}}},1760:($t,We,V)=>{V.d(We,{ot:()=>be,yR:()=>$e});var _=V(8880),Q=V(6928),A=V(4491),F=V(1984),ye=V(308);const G=Ne("C",void 0,void 0);function Ne(Ee,qe,de){return{kind:Ee,value:qe,error:de}}var he=V(3376),le=V(2075);class $e extends Q.wH{constructor(qe){super(),this.isStopped=!1,qe?(this.destination=qe,(0,Q.GI)(qe)&&qe.add(this)):this.destination=Ke}static create(qe,de,wt){return new be(qe,de,wt)}next(qe){this.isStopped?Ue(function je(Ee){return Ne("N",Ee,void 0)}(qe),this):this._next(qe)}error(qe){this.isStopped?Ue(function Ie(Ee){return Ne("E",void 0,Ee)}(qe),this):(this.isStopped=!0,this._error(qe))}complete(){this.isStopped?Ue(G,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(qe){this.destination.next(qe)}_error(qe){try{this.destination.error(qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const we=Function.prototype.bind;function Se(Ee,qe){return we.call(Ee,qe)}class Ve{constructor(qe){this.partialObserver=qe}next(qe){const{partialObserver:de}=this;if(de.next)try{de.next(qe)}catch(wt){ot(wt)}}error(qe){const{partialObserver:de}=this;if(de.error)try{de.error(qe)}catch(wt){ot(wt)}else ot(qe)}complete(){const{partialObserver:qe}=this;if(qe.complete)try{qe.complete()}catch(de){ot(de)}}}class be extends $e{constructor(qe,de,wt){let Dt;if(super(),(0,_.m)(qe)||!qe)Dt={next:qe??void 0,error:de??void 0,complete:wt??void 0};else{let xe;this&&A.config.useDeprecatedNextContext?(xe=Object.create(qe),xe.unsubscribe=()=>this.unsubscribe(),Dt={next:qe.next&&Se(qe.next,xe),error:qe.error&&Se(qe.error,xe),complete:qe.complete&&Se(qe.complete,xe)}):Dt=qe}this.destination=new Ve(Dt)}}function ot(Ee){A.config.useDeprecatedSynchronousErrorHandling?(0,le.q)(Ee):(0,F.U)(Ee)}function Ue(Ee,qe){const{onStoppedNotification:de}=A.config;de&&he.u.setTimeout(()=>de(Ee,qe))}const Ke={closed:!0,next:ye.K,error:function pe(Ee){throw Ee},complete:ye.K}},6928:($t,We,V)=>{V.d(We,{au:()=>G,wH:()=>ye,GI:()=>Ie});var _=V(8880);const A=(0,V(4912).w)(Ne=>function(le){Ne(this),this.message=le?`${le.length} errors occurred during unsubscription:\n${le.map(($e,we)=>`${we+1}) ${$e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=le});var F=V(1248);class ye{constructor(he){this.initialTeardown=he,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let he;if(!this.closed){this.closed=!0;const{_parentage:le}=this;if(le)if(this._parentage=null,Array.isArray(le))for(const Se of le)Se.remove(this);else le.remove(this);const{initialTeardown:$e}=this;if((0,_.m)($e))try{$e()}catch(Se){he=Se instanceof A?Se.errors:[Se]}const{_finalizers:we}=this;if(we){this._finalizers=null;for(const Se of we)try{je(Se)}catch(Ve){he=he??[],Ve instanceof A?he=[...he,...Ve.errors]:he.push(Ve)}}if(he)throw new A(he)}}add(he){var le;if(he&&he!==this)if(this.closed)je(he);else{if(he instanceof ye){if(he.closed||he._hasParent(this))return;he._addParent(this)}(this._finalizers=null!==(le=this._finalizers)&&void 0!==le?le:[]).push(he)}}_hasParent(he){const{_parentage:le}=this;return le===he||Array.isArray(le)&&le.includes(he)}_addParent(he){const{_parentage:le}=this;this._parentage=Array.isArray(le)?(le.push(he),le):le?[le,he]:he}_removeParent(he){const{_parentage:le}=this;le===he?this._parentage=null:Array.isArray(le)&&(0,F.k)(le,he)}remove(he){const{_finalizers:le}=this;le&&(0,F.k)(le,he),he instanceof ye&&he._removeParent(this)}}ye.EMPTY=(()=>{const Ne=new ye;return Ne.closed=!0,Ne})();const G=ye.EMPTY;function Ie(Ne){return Ne instanceof ye||Ne&&"closed"in Ne&&(0,_.m)(Ne.remove)&&(0,_.m)(Ne.add)&&(0,_.m)(Ne.unsubscribe)}function je(Ne){(0,_.m)(Ne)?Ne():Ne.unsubscribe()}},4491:($t,We,V)=>{V.d(We,{config:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7228:($t,We,V)=>{V.d(We,{W:()=>ye});var _=V(267),A=V(6624),F=V(9900);function ye(...G){return function Q(){return(0,_.u)(1)}()((0,F.Q)(G,(0,A.e_)(G)))}},8960:($t,We,V)=>{V.d(We,{k:()=>Q});const Q=new(V(3252)._)(ye=>ye.complete())},9336:($t,We,V)=>{V.d(We,{y:()=>je});var _=V(3252),Q=V(4300),A=V(560),F=V(6624),ye=V(7773),G=V(4187),Ie=V(7904);function je(...Ne){const he=(0,F.yu)(Ne),{args:le,keys:$e}=(0,Q.Q)(Ne),we=new _._(Se=>{const{length:Ve}=le;if(!Ve)return void Se.complete();const be=new Array(Ve);let ot=Ve,pe=Ve;for(let Ue=0;Ue<Ve;Ue++){let Ke=!1;(0,A.Uv)(le[Ue]).subscribe((0,ye.e)(Se,Ee=>{Ke||(Ke=!0,pe--),be[Ue]=Ee},()=>ot--,void 0,()=>{(!ot||!Ke)&&(pe||Se.next($e?(0,Ie.q)($e,be):be),Se.complete())}))}});return he?we.pipe((0,G.j)(he)):we}},9900:($t,We,V)=>{V.d(We,{Q:()=>qe});var _=V(560),Q=V(3920),A=V(2924),G=V(3252),je=V(3835),Ne=V(8880),he=V(9399);function $e(de,wt){if(!de)throw new Error("Iterable cannot be null");return new G._(Dt=>{(0,he._)(Dt,wt,()=>{const xe=de[Symbol.asyncIterator]();(0,he._)(Dt,wt,()=>{xe.next().then(Et=>{Et.done?Dt.complete():Dt.next(Et.value)})},0,!0)})})}var we=V(5099),Se=V(5432),Ve=V(5428),be=V(1688),ot=V(376),pe=V(8272),Ue=V(5832);function qe(de,wt){return wt?function Ee(de,wt){if(null!=de){if((0,we.O)(de))return function F(de,wt){return(0,_.Uv)(de).pipe((0,A.y)(wt),(0,Q.y)(wt))}(de,wt);if((0,Ve.G)(de))return function Ie(de,wt){return new G._(Dt=>{let xe=0;return wt.schedule(function(){xe===de.length?Dt.complete():(Dt.next(de[xe++]),Dt.closed||this.schedule())})})}(de,wt);if((0,Se.u)(de))return function ye(de,wt){return(0,_.Uv)(de).pipe((0,A.y)(wt),(0,Q.y)(wt))}(de,wt);if((0,ot.E)(de))return $e(de,wt);if((0,be.i)(de))return function le(de,wt){return new G._(Dt=>{let xe;return(0,he._)(Dt,wt,()=>{xe=de[je.w](),(0,he._)(Dt,wt,()=>{let Et,bt;try{({value:Et,done:bt}=xe.next())}catch(ht){return void Dt.error(ht)}bt?Dt.complete():Dt.next(Et)},0,!0)}),()=>(0,Ne.m)(xe?.return)&&xe.return()})}(de,wt);if((0,Ue.K)(de))return function Ke(de,wt){return $e((0,Ue._)(de),wt)}(de,wt)}throw(0,pe.W)(de)}(de,wt):(0,_.Uv)(de)}},560:($t,We,V)=>{V.d(We,{Uv:()=>we});var _=V(1316),Q=V(5428),A=V(5432),F=V(3252),ye=V(5099),G=V(376),Ie=V(8272),je=V(1688),Ne=V(5832),he=V(8880),le=V(1984),$e=V(472);function we(Ee){if(Ee instanceof F._)return Ee;if(null!=Ee){if((0,ye.O)(Ee))return function Se(Ee){return new F._(qe=>{const de=Ee[$e.a]();if((0,he.m)(de.subscribe))return de.subscribe(qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ee);if((0,Q.G)(Ee))return function Ve(Ee){return new F._(qe=>{for(let de=0;de<Ee.length&&!qe.closed;de++)qe.next(Ee[de]);qe.complete()})}(Ee);if((0,A.u)(Ee))return function be(Ee){return new F._(qe=>{Ee.then(de=>{qe.closed||(qe.next(de),qe.complete())},de=>qe.error(de)).then(null,le.U)})}(Ee);if((0,G.E)(Ee))return pe(Ee);if((0,je.i)(Ee))return function ot(Ee){return new F._(qe=>{for(const de of Ee)if(qe.next(de),qe.closed)return;qe.complete()})}(Ee);if((0,Ne.K)(Ee))return function Ue(Ee){return pe((0,Ne._)(Ee))}(Ee)}throw(0,Ie.W)(Ee)}function pe(Ee){return new F._(qe=>{(function Ke(Ee,qe){var de,wt,Dt,xe;return(0,_.kH)(this,void 0,void 0,function*(){try{for(de=(0,_.mA)(Ee);!(wt=yield de.next()).done;)if(qe.next(wt.value),qe.closed)return}catch(Et){Dt={error:Et}}finally{try{wt&&!wt.done&&(xe=de.return)&&(yield xe.call(de))}finally{if(Dt)throw Dt.error}}qe.complete()})})(Ee,qe).catch(de=>qe.error(de))})}},2700:($t,We,V)=>{V.d(We,{of:()=>A});var _=V(6624),Q=V(9900);function A(...F){const ye=(0,_.e_)(F);return(0,Q.Q)(F,ye)}},7773:($t,We,V)=>{V.d(We,{e:()=>Q});var _=V(1760);function Q(F,ye,G,Ie,je){return new A(F,ye,G,Ie,je)}class A extends _.yR{constructor(ye,G,Ie,je,Ne,he){super(ye),this.onFinalize=Ne,this.shouldUnsubscribe=he,this._next=G?function(le){try{G(le)}catch($e){ye.error($e)}}:super._next,this._error=je?function(le){try{je(le)}catch($e){ye.error($e)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(le){ye.error(le)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ye;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:G}=this;super.unsubscribe(),!G&&(null===(ye=this.onFinalize)||void 0===ye||ye.call(this))}}}},9144:($t,We,V)=>{V.d(We,{a:()=>F});var _=V(560),Q=V(7773),A=V(5448);function F(ye){return(0,A.i)((G,Ie)=>{let he,je=null,Ne=!1;je=G.subscribe((0,Q.e)(Ie,void 0,void 0,le=>{he=(0,_.Uv)(ye(le,F(ye)(G))),je?(je.unsubscribe(),je=null,he.subscribe(Ie)):Ne=!0})),Ne&&(je.unsubscribe(),je=null,he.subscribe(Ie))})}},6020:($t,We,V)=>{V.d(We,{m:()=>A});var _=V(7400),Q=V(8880);function A(F,ye){return(0,Q.m)(ye)?(0,_.O)(F,ye,1):(0,_.O)(F,1)}},2156:($t,We,V)=>{V.d(We,{G:()=>A});var _=V(5448),Q=V(7773);function A(F){return(0,_.i)((ye,G)=>{let Ie=!1;ye.subscribe((0,Q.e)(G,je=>{Ie=!0,G.next(je)},()=>{Ie||G.next(F),G.complete()}))})}},6684:($t,We,V)=>{V.d(We,{I:()=>A});var _=V(5448),Q=V(7773);function A(F,ye){return(0,_.i)((G,Ie)=>{let je=0;G.subscribe((0,Q.e)(Ie,Ne=>F.call(ye,Ne,je++)&&Ie.next(Ne)))})}},8824:($t,We,V)=>{V.d(We,{U:()=>Q});var _=V(5448);function Q(A){return(0,_.i)((F,ye)=>{try{F.subscribe(ye)}finally{ye.add(A)}})}},5084:($t,We,V)=>{V.d(We,{K:()=>Ie});var _=V(7696),Q=V(6684),A=V(3992),F=V(2156),ye=V(8124),G=V(528);function Ie(je,Ne){const he=arguments.length>=2;return le=>le.pipe(je?(0,Q.I)(($e,we)=>je($e,we,le)):G.Z,(0,A.U)(1),he?(0,F.G)(Ne):(0,ye._)(()=>new _.G))}},4704:($t,We,V)=>{V.d(We,{k:()=>A});var _=V(5448),Q=V(7773);function A(F,ye){return(0,_.i)((G,Ie)=>{let je=0;G.subscribe((0,Q.e)(Ie,Ne=>{Ie.next(F.call(ye,Ne,je++))}))})}},267:($t,We,V)=>{V.d(We,{u:()=>A});var _=V(7400),Q=V(528);function A(F=1/0){return(0,_.O)(Q.Z,F)}},7400:($t,We,V)=>{V.d(We,{O:()=>je});var _=V(4704),Q=V(560),A=V(5448),F=V(9399),ye=V(7773),Ie=V(8880);function je(Ne,he,le=1/0){return(0,Ie.m)(he)?je(($e,we)=>(0,_.k)((Se,Ve)=>he($e,Se,we,Ve))((0,Q.Uv)(Ne($e,we))),le):("number"==typeof he&&(le=he),(0,A.i)(($e,we)=>function G(Ne,he,le,$e,we,Se,Ve,be){const ot=[];let pe=0,Ue=0,Ke=!1;const Ee=()=>{Ke&&!ot.length&&!pe&&he.complete()},qe=wt=>pe<$e?de(wt):ot.push(wt),de=wt=>{Se&&he.next(wt),pe++;let Dt=!1;(0,Q.Uv)(le(wt,Ue++)).subscribe((0,ye.e)(he,xe=>{we?.(xe),Se?qe(xe):he.next(xe)},()=>{Dt=!0},void 0,()=>{if(Dt)try{for(pe--;ot.length&&pe<$e;){const xe=ot.shift();Ve?(0,F._)(he,Ve,()=>de(xe)):de(xe)}Ee()}catch(xe){he.error(xe)}}))};return Ne.subscribe((0,ye.e)(he,qe,()=>{Ke=!0,Ee()})),()=>{be?.()}}($e,we,Ne,le)))}},3920:($t,We,V)=>{V.d(We,{y:()=>F});var _=V(9399),Q=V(5448),A=V(7773);function F(ye,G=0){return(0,Q.i)((Ie,je)=>{Ie.subscribe((0,A.e)(je,Ne=>(0,_._)(je,ye,()=>je.next(Ne),G),()=>(0,_._)(je,ye,()=>je.complete(),G),Ne=>(0,_._)(je,ye,()=>je.error(Ne),G)))})}},208:($t,We,V)=>{V.d(We,{K:()=>F});var _=V(5448),Q=V(7773);function F(ye,G){return(0,_.i)(function A(ye,G,Ie,je,Ne){return(he,le)=>{let $e=Ie,we=G,Se=0;he.subscribe((0,Q.e)(le,Ve=>{const be=Se++;we=$e?ye(we,Ve,be):($e=!0,Ve),je&&le.next(we)},Ne&&(()=>{$e&&le.next(we),le.complete()})))}}(ye,G,arguments.length>=2,!0))}},5568:($t,We,V)=>{V.d(We,{W:()=>F});var _=V(7228),Q=V(6624),A=V(5448);function F(...ye){const G=(0,Q.e_)(ye);return(0,A.i)((Ie,je)=>{(G?(0,_.W)(ye,Ie,G):(0,_.W)(ye,Ie)).subscribe(je)})}},2924:($t,We,V)=>{V.d(We,{y:()=>Q});var _=V(5448);function Q(A,F=0){return(0,_.i)((ye,G)=>{G.add(A.schedule(()=>ye.subscribe(G),F))})}},7368:($t,We,V)=>{V.d(We,{G:()=>F});var _=V(560),Q=V(5448),A=V(7773);function F(ye,G){return(0,Q.i)((Ie,je)=>{let Ne=null,he=0,le=!1;const $e=()=>le&&!Ne&&je.complete();Ie.subscribe((0,A.e)(je,we=>{Ne?.unsubscribe();let Se=0;const Ve=he++;(0,_.Uv)(ye(we,Ve)).subscribe(Ne=(0,A.e)(je,be=>je.next(G?G(we,be,Ve,Se++):be),()=>{Ne=null,$e()}))},()=>{le=!0,$e()}))})}},3992:($t,We,V)=>{V.d(We,{U:()=>F});var _=V(8960),Q=V(5448),A=V(7773);function F(ye){return ye<=0?()=>_.k:(0,Q.i)((G,Ie)=>{let je=0;G.subscribe((0,A.e)(Ie,Ne=>{++je<=ye&&(Ie.next(Ne),ye<=je&&Ie.complete())}))})}},9212:($t,We,V)=>{V.d(We,{y:()=>ye});var _=V(8880),Q=V(5448),A=V(7773),F=V(528);function ye(G,Ie,je){const Ne=(0,_.m)(G)||Ie||je?{next:G,error:Ie,complete:je}:G;return Ne?(0,Q.i)((he,le)=>{var $e;null===($e=Ne.subscribe)||void 0===$e||$e.call(Ne);let we=!0;he.subscribe((0,A.e)(le,Se=>{var Ve;null===(Ve=Ne.next)||void 0===Ve||Ve.call(Ne,Se),le.next(Se)},()=>{var Se;we=!1,null===(Se=Ne.complete)||void 0===Se||Se.call(Ne),le.complete()},Se=>{var Ve;we=!1,null===(Ve=Ne.error)||void 0===Ve||Ve.call(Ne,Se),le.error(Se)},()=>{var Se,Ve;we&&(null===(Se=Ne.unsubscribe)||void 0===Se||Se.call(Ne)),null===(Ve=Ne.finalize)||void 0===Ve||Ve.call(Ne)}))}):F.Z}},8124:($t,We,V)=>{V.d(We,{_:()=>F});var _=V(7696),Q=V(5448),A=V(7773);function F(G=ye){return(0,Q.i)((Ie,je)=>{let Ne=!1;Ie.subscribe((0,A.e)(je,he=>{Ne=!0,je.next(he)},()=>Ne?je.complete():je.error(G())))})}function ye(){return new _.G}},1364:($t,We,V)=>{V.d(We,{m:()=>ye});var _=V(6928);class Q extends _.wH{constructor(Ie,je){super()}schedule(Ie,je=0){return this}}const A={setInterval(G,Ie,...je){const{delegate:Ne}=A;return Ne?.setInterval?Ne.setInterval(G,Ie,...je):setInterval(G,Ie,...je)},clearInterval(G){const{delegate:Ie}=A;return(Ie?.clearInterval||clearInterval)(G)},delegate:void 0};var F=V(1248);class ye extends Q{constructor(Ie,je){super(Ie,je),this.scheduler=Ie,this.work=je,this.pending=!1}schedule(Ie,je=0){var Ne;if(this.closed)return this;this.state=Ie;const he=this.id,le=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(le,he,je)),this.pending=!0,this.delay=je,this.id=null!==(Ne=this.id)&&void 0!==Ne?Ne:this.requestAsyncId(le,this.id,je),this}requestAsyncId(Ie,je,Ne=0){return A.setInterval(Ie.flush.bind(Ie,this),Ne)}recycleAsyncId(Ie,je,Ne=0){if(null!=Ne&&this.delay===Ne&&!1===this.pending)return je;null!=je&&A.clearInterval(je)}execute(Ie,je){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ne=this._execute(Ie,je);if(Ne)return Ne;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ie,je){let he,Ne=!1;try{this.work(Ie)}catch(le){Ne=!0,he=le||new Error("Scheduled action threw falsy error")}if(Ne)return this.unsubscribe(),he}unsubscribe(){if(!this.closed){const{id:Ie,scheduler:je}=this,{actions:Ne}=je;this.work=this.state=this.scheduler=null,this.pending=!1,(0,F.k)(Ne,this),null!=Ie&&(this.id=this.recycleAsyncId(je,Ie,null)),this.delay=null,super.unsubscribe()}}}},9816:($t,We,V)=>{V.d(We,{k:()=>A});var _=V(5960);class Q{constructor(ye,G=Q.now){this.schedulerActionCtor=ye,this.now=G}schedule(ye,G=0,Ie){return new this.schedulerActionCtor(this,ye).schedule(Ie,G)}}Q.now=_.K.now;class A extends Q{constructor(ye,G=Q.now){super(ye,G),this.actions=[],this._active=!1}flush(ye){const{actions:G}=this;if(this._active)return void G.push(ye);let Ie;this._active=!0;do{if(Ie=ye.execute(ye.state,ye.delay))break}while(ye=G.shift());if(this._active=!1,Ie){for(;ye=G.shift();)ye.unsubscribe();throw Ie}}}},112:($t,We,V)=>{V.d(We,{M:()=>A,a:()=>F});var _=V(1364);const A=new(V(9816).k)(_.m),F=A},5960:($t,We,V)=>{V.d(We,{K:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3376:($t,We,V)=>{V.d(We,{u:()=>_});const _={setTimeout(Q,A,...F){const{delegate:ye}=_;return ye?.setTimeout?ye.setTimeout(Q,A,...F):setTimeout(Q,A,...F)},clearTimeout(Q){const{delegate:A}=_;return(A?.clearTimeout||clearTimeout)(Q)},delegate:void 0}},3835:($t,We,V)=>{V.d(We,{w:()=>Q});const Q=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},472:($t,We,V)=>{V.d(We,{a:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},7696:($t,We,V)=>{V.d(We,{G:()=>Q});const Q=(0,V(4912).w)(A=>function(){A(this),this.name="EmptyError",this.message="no elements in sequence"})},6624:($t,We,V)=>{V.d(We,{_8:()=>G,e_:()=>ye,yu:()=>F});var _=V(8880),Q=V(3048);function A(Ie){return Ie[Ie.length-1]}function F(Ie){return(0,_.m)(A(Ie))?Ie.pop():void 0}function ye(Ie){return(0,Q.G)(A(Ie))?Ie.pop():void 0}function G(Ie,je){return"number"==typeof A(Ie)?Ie.pop():je}},4300:($t,We,V)=>{V.d(We,{Q:()=>ye});const{isArray:_}=Array,{getPrototypeOf:Q,prototype:A,keys:F}=Object;function ye(Ie){if(1===Ie.length){const je=Ie[0];if(_(je))return{args:je,keys:null};if(function G(Ie){return Ie&&"object"==typeof Ie&&Q(Ie)===A}(je)){const Ne=F(je);return{args:Ne.map(he=>je[he]),keys:Ne}}}return{args:Ie,keys:null}}},1248:($t,We,V)=>{function _(Q,A){if(Q){const F=Q.indexOf(A);0<=F&&Q.splice(F,1)}}V.d(We,{k:()=>_})},4912:($t,We,V)=>{function _(Q){const F=Q(ye=>{Error.call(ye),ye.stack=(new Error).stack});return F.prototype=Object.create(Error.prototype),F.prototype.constructor=F,F}V.d(We,{w:()=>_})},7904:($t,We,V)=>{function _(Q,A){return Q.reduce((F,ye,G)=>(F[ye]=A[G],F),{})}V.d(We,{q:()=>_})},2075:($t,We,V)=>{V.d(We,{c:()=>A,q:()=>F});var _=V(4491);let Q=null;function A(ye){if(_.config.useDeprecatedSynchronousErrorHandling){const G=!Q;if(G&&(Q={errorThrown:!1,error:null}),ye(),G){const{errorThrown:Ie,error:je}=Q;if(Q=null,Ie)throw je}}else ye()}function F(ye){_.config.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=ye)}},9399:($t,We,V)=>{function _(Q,A,F,ye=0,G=!1){const Ie=A.schedule(function(){F(),G?Q.add(this.schedule(null,ye)):this.unsubscribe()},ye);if(Q.add(Ie),!G)return Ie}V.d(We,{_:()=>_})},528:($t,We,V)=>{function _(Q){return Q}V.d(We,{Z:()=>_})},5428:($t,We,V)=>{V.d(We,{G:()=>_});const _=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},376:($t,We,V)=>{V.d(We,{E:()=>Q});var _=V(8880);function Q(A){return Symbol.asyncIterator&&(0,_.m)(A?.[Symbol.asyncIterator])}},8880:($t,We,V)=>{function _(Q){return"function"==typeof Q}V.d(We,{m:()=>_})},5099:($t,We,V)=>{V.d(We,{O:()=>A});var _=V(472),Q=V(8880);function A(F){return(0,Q.m)(F[_.a])}},1688:($t,We,V)=>{V.d(We,{i:()=>A});var _=V(3835),Q=V(8880);function A(F){return(0,Q.m)(F?.[_.w])}},5432:($t,We,V)=>{V.d(We,{u:()=>Q});var _=V(8880);function Q(A){return(0,_.m)(A?.then)}},5832:($t,We,V)=>{V.d(We,{K:()=>F,_:()=>A});var _=V(1316),Q=V(8880);function A(ye){return(0,_.o7)(this,arguments,function*(){const Ie=ye.getReader();try{for(;;){const{value:je,done:Ne}=yield(0,_.U1)(Ie.read());if(Ne)return yield(0,_.U1)(void 0);yield yield(0,_.U1)(je)}}finally{Ie.releaseLock()}})}function F(ye){return(0,Q.m)(ye?.getReader)}},3048:($t,We,V)=>{V.d(We,{G:()=>Q});var _=V(8880);function Q(A){return A&&(0,_.m)(A.schedule)}},5448:($t,We,V)=>{V.d(We,{e:()=>Q,i:()=>A});var _=V(8880);function Q(F){return(0,_.m)(F?.lift)}function A(F){return ye=>{if(Q(ye))return ye.lift(function(G){try{return F(G,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},4187:($t,We,V)=>{V.d(We,{j:()=>F});var _=V(4704);const{isArray:Q}=Array;function F(ye){return(0,_.k)(G=>function A(ye,G){return Q(G)?ye(...G):ye(G)}(ye,G))}},308:($t,We,V)=>{function _(){}V.d(We,{K:()=>_})},3928:($t,We,V)=>{V.d(We,{W:()=>Q,Y:()=>A});var _=V(528);function Q(...F){return A(F)}function A(F){return 0===F.length?_.Z:1===F.length?F[0]:function(G){return F.reduce((Ie,je)=>je(Ie),G)}}},1984:($t,We,V)=>{V.d(We,{U:()=>A});var _=V(4491),Q=V(3376);function A(F){Q.u.setTimeout(()=>{const{onUnhandledError:ye}=_.config;if(!ye)throw F;ye(F)})}},8272:($t,We,V)=>{function _(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(We,{W:()=>_})},1368:($t,We,V)=>{V.d(We,{MD:()=>li,MP:()=>ot,OM:()=>Oo,QF:()=>xt,Qd:()=>Se,Sg:()=>Ce,Ud:()=>Ie,YZ:()=>Mo,_k:()=>Ps,a:()=>$r,ay:()=>zn,mQ:()=>Ne,mg:()=>ye,oB:()=>pe,qq:()=>ho,uC:()=>be,u_:()=>Vn,uf:()=>Ei,ug:()=>F,uy:()=>A});var _=V(4496);let Q=null;function A(){return Q}function F(D){Q??=D}class ye{}const Ie=new _.UbH("");let je=(()=>{class D{historyGo(x){throw new Error("")}static#e=this.\u0275fac=function(H){return new(H||D)};static#t=this.\u0275prov=_.wxM({token:D,factory:()=>(0,_.uUt)(he),providedIn:"platform"})}return D})();const Ne=new _.UbH("");let he=(()=>{class D extends je{constructor(){super(),this._doc=(0,_.uUt)(Ie),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return A().getBaseHref(this._doc)}onPopState(x){const H=A().getGlobalEventTarget(this._doc,"window");return H.addEventListener("popstate",x,!1),()=>H.removeEventListener("popstate",x)}onHashChange(x){const H=A().getGlobalEventTarget(this._doc,"window");return H.addEventListener("hashchange",x,!1),()=>H.removeEventListener("hashchange",x)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(x){this._location.pathname=x}pushState(x,H,fe){this._history.pushState(x,H,fe)}replaceState(x,H,fe){this._history.replaceState(x,H,fe)}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}static#e=this.\u0275fac=function(H){return new(H||D)};static#t=this.\u0275prov=_.wxM({token:D,factory:()=>new D,providedIn:"platform"})}return D})();function le(D,K){if(0==D.length)return K;if(0==K.length)return D;let x=0;return D.endsWith("/")&&x++,K.startsWith("/")&&x++,2==x?D+K.substring(1):1==x?D+K:D+"/"+K}function $e(D){const K=D.match(/#|\?|$/),x=K&&K.index||D.length;return D.slice(0,x-("/"===D[x-1]?1:0))+D.slice(x)}function we(D){return D&&"?"!==D[0]?"?"+D:D}let Se=(()=>{class D{historyGo(x){throw new Error("")}static#e=this.\u0275fac=function(H){return new(H||D)};static#t=this.\u0275prov=_.wxM({token:D,factory:()=>(0,_.uUt)(be),providedIn:"root"})}return D})();const Ve=new _.UbH("");let be=(()=>{class D extends Se{constructor(x,H){super(),this._platformLocation=x,this._removeListenerFns=[],this._baseHref=H??this._platformLocation.getBaseHrefFromDOM()??(0,_.uUt)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return le(this._baseHref,x)}path(x=!1){const H=this._platformLocation.pathname+we(this._platformLocation.search),fe=this._platformLocation.hash;return fe&&x?`${H}${fe}`:H}pushState(x,H,fe,rt){const pt=this.prepareExternalUrl(fe+we(rt));this._platformLocation.pushState(x,H,pt)}replaceState(x,H,fe,rt){const pt=this.prepareExternalUrl(fe+we(rt));this._platformLocation.replaceState(x,H,pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}static#e=this.\u0275fac=function(H){return new(H||D)(_.CoB(je),_.CoB(Ve,8))};static#t=this.\u0275prov=_.wxM({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})(),ot=(()=>{class D extends Se{constructor(x,H){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=H&&(this._baseHref=H)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){const H=this._platformLocation.hash??"#";return H.length>0?H.substring(1):H}prepareExternalUrl(x){const H=le(this._baseHref,x);return H.length>0?"#"+H:H}pushState(x,H,fe,rt){let pt=this.prepareExternalUrl(fe+we(rt));0==pt.length&&(pt=this._platformLocation.pathname),this._platformLocation.pushState(x,H,pt)}replaceState(x,H,fe,rt){let pt=this.prepareExternalUrl(fe+we(rt));0==pt.length&&(pt=this._platformLocation.pathname),this._platformLocation.replaceState(x,H,pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}static#e=this.\u0275fac=function(H){return new(H||D)(_.CoB(je),_.CoB(Ve,8))};static#t=this.\u0275prov=_.wxM({token:D,factory:D.\u0275fac})}return D})(),pe=(()=>{class D{constructor(x){this._subject=new _._w7,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=x;const H=this._locationStrategy.getBaseHref();this._basePath=function qe(D){if(new RegExp("^(https?:)?//").test(D)){const[,x]=D.split(/\/\/[^\/]+/);return x}return D}($e(Ee(H))),this._locationStrategy.onPopState(fe=>{this._subject.emit({url:this.path(!0),pop:!0,state:fe.state,type:fe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(x=!1){return this.normalize(this._locationStrategy.path(x))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(x,H=""){return this.path()==this.normalize(x+we(H))}normalize(x){return D.stripTrailingSlash(function Ke(D,K){if(!D||!K.startsWith(D))return K;const x=K.substring(D.length);return""===x||["/",";","?","#"].includes(x[0])?x:K}(this._basePath,Ee(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._locationStrategy.prepareExternalUrl(x)}go(x,H="",fe=null){this._locationStrategy.pushState(fe,"",x,H),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+we(H)),fe)}replaceState(x,H="",fe=null){this._locationStrategy.replaceState(fe,"",x,H),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+we(H)),fe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(x=0){this._locationStrategy.historyGo?.(x)}onUrlChange(x){return this._urlChangeListeners.push(x),this._urlChangeSubscription??=this.subscribe(H=>{this._notifyUrlChangeListeners(H.url,H.state)}),()=>{const H=this._urlChangeListeners.indexOf(x);this._urlChangeListeners.splice(H,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(x="",H){this._urlChangeListeners.forEach(fe=>fe(x,H))}subscribe(x,H,fe){return this._subject.subscribe({next:x,error:H,complete:fe})}static#e=this.normalizeQueryParams=we;static#t=this.joinWithSlash=le;static#n=this.stripTrailingSlash=$e;static#r=this.\u0275fac=function(H){return new(H||D)(_.CoB(Se))};static#i=this.\u0275prov=_.wxM({token:D,factory:()=>function Ue(){return new pe((0,_.CoB)(Se))}(),providedIn:"root"})}return D})();function Ee(D){return D.replace(/\/index.html$/,"")}function Ce(D,K){K=encodeURIComponent(K);for(const x of D.split(";")){const H=x.indexOf("="),[fe,rt]=-1==H?[x,""]:[x.slice(0,H),x.slice(H+1)];if(fe.trim()===K)return decodeURIComponent(rt)}return null}const ft=/\s+/,It=[];let xt=(()=>{class D{constructor(x,H){this._ngEl=x,this._renderer=H,this.initialClasses=It,this.stateMap=new Map}set klass(x){this.initialClasses=null!=x?x.trim().split(ft):It}set ngClass(x){this.rawClass="string"==typeof x?x.trim().split(ft):x}ngDoCheck(){for(const H of this.initialClasses)this._updateState(H,!0);const x=this.rawClass;if(Array.isArray(x)||x instanceof Set)for(const H of x)this._updateState(H,!0);else if(null!=x)for(const H of Object.keys(x))this._updateState(H,!!x[H]);this._applyStateDiff()}_updateState(x,H){const fe=this.stateMap.get(x);void 0!==fe?(fe.enabled!==H&&(fe.changed=!0,fe.enabled=H),fe.touched=!0):this.stateMap.set(x,{enabled:H,changed:!0,touched:!0})}_applyStateDiff(){for(const x of this.stateMap){const H=x[0],fe=x[1];fe.changed?(this._toggleClass(H,fe.enabled),fe.changed=!1):fe.touched||(fe.enabled&&this._toggleClass(H,!1),this.stateMap.delete(H)),fe.touched=!1}}_toggleClass(x,H){(x=x.trim()).length>0&&x.split(ft).forEach(fe=>{H?this._renderer.addClass(this._ngEl.nativeElement,fe):this._renderer.removeClass(this._ngEl.nativeElement,fe)})}static#e=this.\u0275fac=function(H){return new(H||D)(_.GI1(_.GMv),_.GI1(_.q87))};static#t=this.\u0275dir=_.Sc5({type:D,selectors:[["","ngClass",""]],inputs:{klass:[_.Wk5.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return D})();class rn{constructor(K,x,H,fe){this.$implicit=K,this.ngForOf=x,this.index=H,this.count=fe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zn=(()=>{class D{set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}constructor(x,H,fe){this._viewContainer=x,this._template=H,this._differs=fe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const H=this._viewContainer;x.forEachOperation((fe,rt,pt)=>{if(null==fe.previousIndex)H.createEmbeddedView(this._template,new rn(fe.item,this._ngForOf,-1,-1),null===pt?void 0:pt);else if(null==pt)H.remove(null===rt?void 0:rt);else if(null!==rt){const an=H.get(rt);H.move(an,pt),vr(an,fe)}});for(let fe=0,rt=H.length;fe<rt;fe++){const an=H.get(fe).context;an.index=fe,an.count=rt,an.ngForOf=this._ngForOf}x.forEachIdentityChange(fe=>{vr(H.get(fe.currentIndex),fe)})}static ngTemplateContextGuard(x,H){return!0}static#e=this.\u0275fac=function(H){return new(H||D)(_.GI1(_.y8U),_.GI1(_.Yw2),_.GI1(_.Uj7))};static#t=this.\u0275dir=_.Sc5({type:D,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return D})();function vr(D,K){D.context.$implicit=K.item}let Vn=(()=>{class D{constructor(x,H){this._viewContainer=x,this._context=new ns,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=H}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){Ti("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){Ti("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,H){return!0}static#e=this.\u0275fac=function(H){return new(H||D)(_.GI1(_.y8U),_.GI1(_.Yw2))};static#t=this.\u0275dir=_.Sc5({type:D,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return D})();class ns{constructor(){this.$implicit=null,this.ngIf=null}}function Ti(D,K){if(K&&!K.createEmbeddedView)throw new Error(`${D} must be a TemplateRef, but received '${(0,_.GEN)(K)}'.`)}function ji(D,K){return new _.OBp(2100,!1)}class Go{createSubscription(K,x){return(0,_.sRj)(()=>K.subscribe({next:x,error:H=>{throw H}}))}dispose(K){(0,_.sRj)(()=>K.unsubscribe())}}class Ka{createSubscription(K,x){return K.then(x,H=>{throw H})}dispose(K){}}const Zn=new Ka,Si=new Go;let $r=(()=>{class D{constructor(x){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=x}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(x){return this._obj?x!==this._obj?(this._dispose(),this.transform(x)):this._latestValue:(x&&this._subscribe(x),this._latestValue)}_subscribe(x){this._obj=x,this._strategy=this._selectStrategy(x),this._subscription=this._strategy.createSubscription(x,H=>this._updateLatestValue(x,H))}_selectStrategy(x){if((0,_.w5$)(x))return Zn;if((0,_.gX2)(x))return Si;throw ji()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(x,H){x===this._obj&&(this._latestValue=H,this._ref.markForCheck())}static#e=this.\u0275fac=function(H){return new(H||D)(_.GI1(_.kD9,16))};static#t=this.\u0275pipe=_.UTH({name:"async",type:D,pure:!1,standalone:!0})}return D})(),ho=(()=>{class D{transform(x,H,fe){if(null==x)return null;if(!this.supports(x))throw ji();return x.slice(H,fe)}supports(x){return"string"==typeof x||Array.isArray(x)}static#e=this.\u0275fac=function(H){return new(H||D)};static#t=this.\u0275pipe=_.UTH({name:"slice",type:D,pure:!1,standalone:!0})}return D})(),li=(()=>{class D{static#e=this.\u0275fac=function(H){return new(H||D)};static#t=this.\u0275mod=_.a4G({type:D});static#n=this.\u0275inj=_.s3X({})}return D})();const Ps="browser",bs="server";function Ei(D){return D===bs}let Mo=(()=>{class D{static#e=this.\u0275prov=(0,_.wxM)({token:D,providedIn:"root",factory:()=>function Qi(D){return D===Ps}((0,_.uUt)(_.AHE))?new Ms((0,_.uUt)(Ie),window):new fa})}return D})();class Ms{constructor(K,x){this.document=K,this.window=x,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(K){this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){const x=function Wi(D,K){const x=D.getElementById(K)||D.getElementsByName(K)[0];if(x)return x;if("function"==typeof D.createTreeWalker&&D.body&&"function"==typeof D.body.attachShadow){const H=D.createTreeWalker(D.body,NodeFilter.SHOW_ELEMENT);let fe=H.currentNode;for(;fe;){const rt=fe.shadowRoot;if(rt){const pt=rt.getElementById(K)||rt.querySelector(`[name="${K}"]`);if(pt)return pt}fe=H.nextNode()}}return null}(this.document,K);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration(K){this.window.history.scrollRestoration=K}scrollToElement(K){const x=K.getBoundingClientRect(),H=x.left+this.window.pageXOffset,fe=x.top+this.window.pageYOffset,rt=this.offset();this.window.scrollTo(H-rt[0],fe-rt[1])}}class fa{setOffset(K){}getScrollPosition(){return[0,0]}scrollToPosition(K){}scrollToAnchor(K){}setHistoryScrollRestoration(K){}}class Oo{}},7048:($t,We,V)=>{V.d(We,{KK:()=>st,SU:()=>En}),V(1528);var Q=V(4496),A=V(2700),F=V(3252),ye=V(9900),G=V(6020),Ie=V(6684),je=V(4704),Ne=V(8824),he=V(7368),le=V(1368);class $e{}class we{}class Se{constructor(ve){this.normalizedNames=new Map,this.lazyUpdate=null,ve?"string"==typeof ve?this.lazyInit=()=>{this.headers=new Map,ve.split("\n").forEach(Ce=>{const ft=Ce.indexOf(":");if(ft>0){const It=Ce.slice(0,ft),xt=It.toLowerCase(),Gt=Ce.slice(ft+1).trim();this.maybeSetNormalizedName(It,xt),this.headers.has(xt)?this.headers.get(xt).push(Gt):this.headers.set(xt,[Gt])}})}:typeof Headers<"u"&&ve instanceof Headers?(this.headers=new Map,ve.forEach((Ce,ft)=>{this.setHeaderEntries(ft,Ce)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(ve).forEach(([Ce,ft])=>{this.setHeaderEntries(Ce,ft)})}:this.headers=new Map}has(ve){return this.init(),this.headers.has(ve.toLowerCase())}get(ve){this.init();const Ce=this.headers.get(ve.toLowerCase());return Ce&&Ce.length>0?Ce[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ve){return this.init(),this.headers.get(ve.toLowerCase())||null}append(ve,Ce){return this.clone({name:ve,value:Ce,op:"a"})}set(ve,Ce){return this.clone({name:ve,value:Ce,op:"s"})}delete(ve,Ce){return this.clone({name:ve,value:Ce,op:"d"})}maybeSetNormalizedName(ve,Ce){this.normalizedNames.has(Ce)||this.normalizedNames.set(Ce,ve)}init(){this.lazyInit&&(this.lazyInit instanceof Se?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ve=>this.applyUpdate(ve)),this.lazyUpdate=null))}copyFrom(ve){ve.init(),Array.from(ve.headers.keys()).forEach(Ce=>{this.headers.set(Ce,ve.headers.get(Ce)),this.normalizedNames.set(Ce,ve.normalizedNames.get(Ce))})}clone(ve){const Ce=new Se;return Ce.lazyInit=this.lazyInit&&this.lazyInit instanceof Se?this.lazyInit:this,Ce.lazyUpdate=(this.lazyUpdate||[]).concat([ve]),Ce}applyUpdate(ve){const Ce=ve.name.toLowerCase();switch(ve.op){case"a":case"s":let ft=ve.value;if("string"==typeof ft&&(ft=[ft]),0===ft.length)return;this.maybeSetNormalizedName(ve.name,Ce);const It=("a"===ve.op?this.headers.get(Ce):void 0)||[];It.push(...ft),this.headers.set(Ce,It);break;case"d":const xt=ve.value;if(xt){let Gt=this.headers.get(Ce);if(!Gt)return;Gt=Gt.filter(dn=>-1===xt.indexOf(dn)),0===Gt.length?(this.headers.delete(Ce),this.normalizedNames.delete(Ce)):this.headers.set(Ce,Gt)}else this.headers.delete(Ce),this.normalizedNames.delete(Ce)}}setHeaderEntries(ve,Ce){const ft=(Array.isArray(Ce)?Ce:[Ce]).map(xt=>xt.toString()),It=ve.toLowerCase();this.headers.set(It,ft),this.maybeSetNormalizedName(ve,It)}forEach(ve){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ce=>ve(this.normalizedNames.get(Ce),this.headers.get(Ce)))}}class be{encodeKey(ve){return Ke(ve)}encodeValue(ve){return Ke(ve)}decodeKey(ve){return decodeURIComponent(ve)}decodeValue(ve){return decodeURIComponent(ve)}}const pe=/%(\d[a-f0-9])/gi,Ue={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ke(oe){return encodeURIComponent(oe).replace(pe,(ve,Ce)=>Ue[Ce]??ve)}function Ee(oe){return`${oe}`}class qe{constructor(ve={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ve.encoder||new be,ve.fromString){if(ve.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function ot(oe,ve){const Ce=new Map;return oe.length>0&&oe.replace(/^\?/,"").split("&").forEach(It=>{const xt=It.indexOf("="),[Gt,dn]=-1==xt?[ve.decodeKey(It),""]:[ve.decodeKey(It.slice(0,xt)),ve.decodeValue(It.slice(xt+1))],rn=Ce.get(Gt)||[];rn.push(dn),Ce.set(Gt,rn)}),Ce}(ve.fromString,this.encoder)}else ve.fromObject?(this.map=new Map,Object.keys(ve.fromObject).forEach(Ce=>{const ft=ve.fromObject[Ce],It=Array.isArray(ft)?ft.map(Ee):[Ee(ft)];this.map.set(Ce,It)})):this.map=null}has(ve){return this.init(),this.map.has(ve)}get(ve){this.init();const Ce=this.map.get(ve);return Ce?Ce[0]:null}getAll(ve){return this.init(),this.map.get(ve)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ve,Ce){return this.clone({param:ve,value:Ce,op:"a"})}appendAll(ve){const Ce=[];return Object.keys(ve).forEach(ft=>{const It=ve[ft];Array.isArray(It)?It.forEach(xt=>{Ce.push({param:ft,value:xt,op:"a"})}):Ce.push({param:ft,value:It,op:"a"})}),this.clone(Ce)}set(ve,Ce){return this.clone({param:ve,value:Ce,op:"s"})}delete(ve,Ce){return this.clone({param:ve,value:Ce,op:"d"})}toString(){return this.init(),this.keys().map(ve=>{const Ce=this.encoder.encodeKey(ve);return this.map.get(ve).map(ft=>Ce+"="+this.encoder.encodeValue(ft)).join("&")}).filter(ve=>""!==ve).join("&")}clone(ve){const Ce=new qe({encoder:this.encoder});return Ce.cloneFrom=this.cloneFrom||this,Ce.updates=(this.updates||[]).concat(ve),Ce}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ve=>this.map.set(ve,this.cloneFrom.map.get(ve))),this.updates.forEach(ve=>{switch(ve.op){case"a":case"s":const Ce=("a"===ve.op?this.map.get(ve.param):void 0)||[];Ce.push(Ee(ve.value)),this.map.set(ve.param,Ce);break;case"d":if(void 0===ve.value){this.map.delete(ve.param);break}{let ft=this.map.get(ve.param)||[];const It=ft.indexOf(Ee(ve.value));-1!==It&&ft.splice(It,1),ft.length>0?this.map.set(ve.param,ft):this.map.delete(ve.param)}}}),this.cloneFrom=this.updates=null)}}class wt{constructor(){this.map=new Map}set(ve,Ce){return this.map.set(ve,Ce),this}get(ve){return this.map.has(ve)||this.map.set(ve,ve.defaultValue()),this.map.get(ve)}delete(ve){return this.map.delete(ve),this}has(ve){return this.map.has(ve)}keys(){return this.map.keys()}}function xe(oe){return typeof ArrayBuffer<"u"&&oe instanceof ArrayBuffer}function Et(oe){return typeof Blob<"u"&&oe instanceof Blob}function bt(oe){return typeof FormData<"u"&&oe instanceof FormData}class Le{constructor(ve,Ce,ft,It){let xt;if(this.url=Ce,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ve.toUpperCase(),function Dt(oe){switch(oe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||It?(this.body=void 0!==ft?ft:null,xt=It):xt=ft,xt&&(this.reportProgress=!!xt.reportProgress,this.withCredentials=!!xt.withCredentials,xt.responseType&&(this.responseType=xt.responseType),xt.headers&&(this.headers=xt.headers),xt.context&&(this.context=xt.context),xt.params&&(this.params=xt.params),this.transferCache=xt.transferCache),this.headers??=new Se,this.context??=new wt,this.params){const Gt=this.params.toString();if(0===Gt.length)this.urlWithParams=Ce;else{const dn=Ce.indexOf("?");this.urlWithParams=Ce+(-1===dn?"?":dn<Ce.length-1?"&":"")+Gt}}else this.params=new qe,this.urlWithParams=Ce}serializeBody(){return null===this.body?null:xe(this.body)||Et(this.body)||bt(this.body)||function ht(oe){return typeof URLSearchParams<"u"&&oe instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof qe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bt(this.body)?null:Et(this.body)?this.body.type||null:xe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof qe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ve={}){const Ce=ve.method||this.method,ft=ve.url||this.url,It=ve.responseType||this.responseType,xt=void 0!==ve.body?ve.body:this.body,Gt=void 0!==ve.withCredentials?ve.withCredentials:this.withCredentials,dn=void 0!==ve.reportProgress?ve.reportProgress:this.reportProgress;let rn=ve.headers||this.headers,zn=ve.params||this.params;const vr=ve.context??this.context;return void 0!==ve.setHeaders&&(rn=Object.keys(ve.setHeaders).reduce((sr,Vn)=>sr.set(Vn,ve.setHeaders[Vn]),rn)),ve.setParams&&(zn=Object.keys(ve.setParams).reduce((sr,Vn)=>sr.set(Vn,ve.setParams[Vn]),zn)),new Le(Ce,ft,xt,{params:zn,headers:rn,context:vr,reportProgress:dn,responseType:It,withCredentials:Gt})}}var et=function(oe){return oe[oe.Sent=0]="Sent",oe[oe.UploadProgress=1]="UploadProgress",oe[oe.ResponseHeader=2]="ResponseHeader",oe[oe.DownloadProgress=3]="DownloadProgress",oe[oe.Response=4]="Response",oe[oe.User=5]="User",oe}(et||{});class tt{constructor(ve,Ce=Oe.Ok,ft="OK"){this.headers=ve.headers||new Se,this.status=void 0!==ve.status?ve.status:Ce,this.statusText=ve.statusText||ft,this.url=ve.url||null,this.ok=this.status>=200&&this.status<300}}class nt extends tt{constructor(ve={}){super(ve),this.type=et.ResponseHeader}clone(ve={}){return new nt({headers:ve.headers||this.headers,status:void 0!==ve.status?ve.status:this.status,statusText:ve.statusText||this.statusText,url:ve.url||this.url||void 0})}}class Nt extends tt{constructor(ve={}){super(ve),this.type=et.Response,this.body=void 0!==ve.body?ve.body:null}clone(ve={}){return new Nt({body:void 0!==ve.body?ve.body:this.body,headers:ve.headers||this.headers,status:void 0!==ve.status?ve.status:this.status,statusText:ve.statusText||this.statusText,url:ve.url||this.url||void 0})}}class tn extends tt{constructor(ve){super(ve,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ve.url||"(unknown url)"}`:`Http failure response for ${ve.url||"(unknown url)"}: ${ve.status} ${ve.statusText}`,this.error=ve.error||null}}var Oe=function(oe){return oe[oe.Continue=100]="Continue",oe[oe.SwitchingProtocols=101]="SwitchingProtocols",oe[oe.Processing=102]="Processing",oe[oe.EarlyHints=103]="EarlyHints",oe[oe.Ok=200]="Ok",oe[oe.Created=201]="Created",oe[oe.Accepted=202]="Accepted",oe[oe.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",oe[oe.NoContent=204]="NoContent",oe[oe.ResetContent=205]="ResetContent",oe[oe.PartialContent=206]="PartialContent",oe[oe.MultiStatus=207]="MultiStatus",oe[oe.AlreadyReported=208]="AlreadyReported",oe[oe.ImUsed=226]="ImUsed",oe[oe.MultipleChoices=300]="MultipleChoices",oe[oe.MovedPermanently=301]="MovedPermanently",oe[oe.Found=302]="Found",oe[oe.SeeOther=303]="SeeOther",oe[oe.NotModified=304]="NotModified",oe[oe.UseProxy=305]="UseProxy",oe[oe.Unused=306]="Unused",oe[oe.TemporaryRedirect=307]="TemporaryRedirect",oe[oe.PermanentRedirect=308]="PermanentRedirect",oe[oe.BadRequest=400]="BadRequest",oe[oe.Unauthorized=401]="Unauthorized",oe[oe.PaymentRequired=402]="PaymentRequired",oe[oe.Forbidden=403]="Forbidden",oe[oe.NotFound=404]="NotFound",oe[oe.MethodNotAllowed=405]="MethodNotAllowed",oe[oe.NotAcceptable=406]="NotAcceptable",oe[oe.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",oe[oe.RequestTimeout=408]="RequestTimeout",oe[oe.Conflict=409]="Conflict",oe[oe.Gone=410]="Gone",oe[oe.LengthRequired=411]="LengthRequired",oe[oe.PreconditionFailed=412]="PreconditionFailed",oe[oe.PayloadTooLarge=413]="PayloadTooLarge",oe[oe.UriTooLong=414]="UriTooLong",oe[oe.UnsupportedMediaType=415]="UnsupportedMediaType",oe[oe.RangeNotSatisfiable=416]="RangeNotSatisfiable",oe[oe.ExpectationFailed=417]="ExpectationFailed",oe[oe.ImATeapot=418]="ImATeapot",oe[oe.MisdirectedRequest=421]="MisdirectedRequest",oe[oe.UnprocessableEntity=422]="UnprocessableEntity",oe[oe.Locked=423]="Locked",oe[oe.FailedDependency=424]="FailedDependency",oe[oe.TooEarly=425]="TooEarly",oe[oe.UpgradeRequired=426]="UpgradeRequired",oe[oe.PreconditionRequired=428]="PreconditionRequired",oe[oe.TooManyRequests=429]="TooManyRequests",oe[oe.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",oe[oe.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",oe[oe.InternalServerError=500]="InternalServerError",oe[oe.NotImplemented=501]="NotImplemented",oe[oe.BadGateway=502]="BadGateway",oe[oe.ServiceUnavailable=503]="ServiceUnavailable",oe[oe.GatewayTimeout=504]="GatewayTimeout",oe[oe.HttpVersionNotSupported=505]="HttpVersionNotSupported",oe[oe.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",oe[oe.InsufficientStorage=507]="InsufficientStorage",oe[oe.LoopDetected=508]="LoopDetected",oe[oe.NotExtended=510]="NotExtended",oe[oe.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",oe}(Oe||{});function ze(oe,ve){return{body:ve,headers:oe.headers,context:oe.context,observe:oe.observe,params:oe.params,reportProgress:oe.reportProgress,responseType:oe.responseType,withCredentials:oe.withCredentials,transferCache:oe.transferCache}}let st=(()=>{class oe{constructor(Ce){this.handler=Ce}request(Ce,ft,It={}){let xt;if(Ce instanceof Le)xt=Ce;else{let rn,zn;rn=It.headers instanceof Se?It.headers:new Se(It.headers),It.params&&(zn=It.params instanceof qe?It.params:new qe({fromObject:It.params})),xt=new Le(Ce,ft,void 0!==It.body?It.body:null,{headers:rn,context:It.context,params:zn,reportProgress:It.reportProgress,responseType:It.responseType||"json",withCredentials:It.withCredentials,transferCache:It.transferCache})}const Gt=(0,A.of)(xt).pipe((0,G.m)(rn=>this.handler.handle(rn)));if(Ce instanceof Le||"events"===It.observe)return Gt;const dn=Gt.pipe((0,Ie.I)(rn=>rn instanceof Nt));switch(It.observe||"body"){case"body":switch(xt.responseType){case"arraybuffer":return dn.pipe((0,je.k)(rn=>{if(null!==rn.body&&!(rn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return rn.body}));case"blob":return dn.pipe((0,je.k)(rn=>{if(null!==rn.body&&!(rn.body instanceof Blob))throw new Error("Response is not a Blob.");return rn.body}));case"text":return dn.pipe((0,je.k)(rn=>{if(null!==rn.body&&"string"!=typeof rn.body)throw new Error("Response is not a string.");return rn.body}));default:return dn.pipe((0,je.k)(rn=>rn.body))}case"response":return dn;default:throw new Error(`Unreachable: unhandled observe type ${It.observe}}`)}}delete(Ce,ft={}){return this.request("DELETE",Ce,ft)}get(Ce,ft={}){return this.request("GET",Ce,ft)}head(Ce,ft={}){return this.request("HEAD",Ce,ft)}jsonp(Ce,ft){return this.request("JSONP",Ce,{params:(new qe).append(ft,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ce,ft={}){return this.request("OPTIONS",Ce,ft)}patch(Ce,ft,It={}){return this.request("PATCH",Ce,ze(It,ft))}post(Ce,ft,It={}){return this.request("POST",Ce,ze(It,ft))}put(Ce,ft,It={}){return this.request("PUT",Ce,ze(It,ft))}static#e=this.\u0275fac=function(ft){return new(ft||oe)(Q.CoB($e))};static#t=this.\u0275prov=Q.wxM({token:oe,factory:oe.\u0275fac})}return oe})();function _n(oe,ve){return ve(oe)}function Tn(oe,ve){return(Ce,ft)=>ve.intercept(Ce,{handle:It=>oe(It,ft)})}const wn=new Q.UbH(""),Wn=new Q.UbH(""),Rr=new Q.UbH(""),Bt=new Q.UbH("");function wr(){let oe=null;return(ve,Ce)=>{null===oe&&(oe=((0,Q.uUt)(wn,{optional:!0})??[]).reduceRight(Tn,_n));const ft=(0,Q.uUt)(Q.g9Y),It=ft.add();return oe(ve,Ce).pipe((0,Ne.U)(()=>ft.remove(It)))}}let kn=(()=>{class oe extends $e{constructor(Ce,ft){super(),this.backend=Ce,this.injector=ft,this.chain=null,this.pendingTasks=(0,Q.uUt)(Q.g9Y);const It=(0,Q.uUt)(Bt,{optional:!0});this.backend=It??Ce}handle(Ce){if(null===this.chain){const It=Array.from(new Set([...this.injector.get(Wn),...this.injector.get(Rr,[])]));this.chain=It.reduceRight((xt,Gt)=>function Kt(oe,ve,Ce){return(ft,It)=>(0,Q.SMS)(Ce,()=>ve(ft,xt=>oe(xt,It)))}(xt,Gt,this.injector),_n)}const ft=this.pendingTasks.add();return this.chain(Ce,It=>this.backend.handle(It)).pipe((0,Ne.U)(()=>this.pendingTasks.remove(ft)))}static#e=this.\u0275fac=function(ft){return new(ft||oe)(Q.CoB(we),Q.CoB(Q.SIe))};static#t=this.\u0275prov=Q.wxM({token:oe,factory:oe.\u0275fac})}return oe})();const bn=/^\)\]\}',?\n/;let Tr=(()=>{class oe{constructor(Ce){this.xhrFactory=Ce}handle(Ce){if("JSONP"===Ce.method)throw new Q.OBp(-2800,!1);const ft=this.xhrFactory;return(ft.\u0275loadImpl?(0,ye.Q)(ft.\u0275loadImpl()):(0,A.of)(null)).pipe((0,he.G)(()=>new F._(xt=>{const Gt=ft.build();if(Gt.open(Ce.method,Ce.urlWithParams),Ce.withCredentials&&(Gt.withCredentials=!0),Ce.headers.forEach((kr,qn)=>Gt.setRequestHeader(kr,qn.join(","))),Ce.headers.has("Accept")||Gt.setRequestHeader("Accept","application/json, text/plain, */*"),!Ce.headers.has("Content-Type")){const kr=Ce.detectContentTypeHeader();null!==kr&&Gt.setRequestHeader("Content-Type",kr)}if(Ce.responseType){const kr=Ce.responseType.toLowerCase();Gt.responseType="json"!==kr?kr:"text"}const dn=Ce.serializeBody();let rn=null;const zn=()=>{if(null!==rn)return rn;const kr=Gt.statusText||"OK",qn=new Se(Gt.getAllResponseHeaders()),ei=function Fn(oe){return"responseURL"in oe&&oe.responseURL?oe.responseURL:/^X-Request-URL:/m.test(oe.getAllResponseHeaders())?oe.getResponseHeader("X-Request-URL"):null}(Gt)||Ce.url;return rn=new nt({headers:qn,status:Gt.status,statusText:kr,url:ei}),rn},vr=()=>{let{headers:kr,status:qn,statusText:ei,url:$n}=zn(),fr=null;qn!==Oe.NoContent&&(fr=typeof Gt.response>"u"?Gt.responseText:Gt.response),0===qn&&(qn=fr?Oe.Ok:0);let rs=qn>=200&&qn<300;if("json"===Ce.responseType&&"string"==typeof fr){const Di=fr;fr=fr.replace(bn,"");try{fr=""!==fr?JSON.parse(fr):null}catch(si){fr=Di,rs&&(rs=!1,fr={error:si,text:fr})}}rs?(xt.next(new Nt({body:fr,headers:kr,status:qn,statusText:ei,url:$n||void 0})),xt.complete()):xt.error(new tn({error:fr,headers:kr,status:qn,statusText:ei,url:$n||void 0}))},sr=kr=>{const{url:qn}=zn(),ei=new tn({error:kr,status:Gt.status||0,statusText:Gt.statusText||"Unknown Error",url:qn||void 0});xt.error(ei)};let Vn=!1;const ns=kr=>{Vn||(xt.next(zn()),Vn=!0);let qn={type:et.DownloadProgress,loaded:kr.loaded};kr.lengthComputable&&(qn.total=kr.total),"text"===Ce.responseType&&Gt.responseText&&(qn.partialText=Gt.responseText),xt.next(qn)},Ti=kr=>{let qn={type:et.UploadProgress,loaded:kr.loaded};kr.lengthComputable&&(qn.total=kr.total),xt.next(qn)};return Gt.addEventListener("load",vr),Gt.addEventListener("error",sr),Gt.addEventListener("timeout",sr),Gt.addEventListener("abort",sr),Ce.reportProgress&&(Gt.addEventListener("progress",ns),null!==dn&&Gt.upload&&Gt.upload.addEventListener("progress",Ti)),Gt.send(dn),xt.next({type:et.Sent}),()=>{Gt.removeEventListener("error",sr),Gt.removeEventListener("abort",sr),Gt.removeEventListener("load",vr),Gt.removeEventListener("timeout",sr),Ce.reportProgress&&(Gt.removeEventListener("progress",ns),null!==dn&&Gt.upload&&Gt.upload.removeEventListener("progress",Ti)),Gt.readyState!==Gt.DONE&&Gt.abort()}})))}static#e=this.\u0275fac=function(ft){return new(ft||oe)(Q.CoB(le.OM))};static#t=this.\u0275prov=Q.wxM({token:oe,factory:oe.\u0275fac})}return oe})();const Cn=new Q.UbH(""),Gn=new Q.UbH("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),jr=new Q.UbH("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Nr{}let Ds=(()=>{class oe{constructor(Ce,ft,It){this.doc=Ce,this.platform=ft,this.cookieName=It,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ce=this.doc.cookie||"";return Ce!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,le.Sg)(Ce,this.cookieName),this.lastCookieString=Ce),this.lastToken}static#e=this.\u0275fac=function(ft){return new(ft||oe)(Q.CoB(le.Ud),Q.CoB(Q.AHE),Q.CoB(Gn))};static#t=this.\u0275prov=Q.wxM({token:oe,factory:oe.\u0275fac})}return oe})();function pi(oe,ve){const Ce=oe.url.toLowerCase();if(!(0,Q.uUt)(Cn)||"GET"===oe.method||"HEAD"===oe.method||Ce.startsWith("http://")||Ce.startsWith("https://"))return ve(oe);const ft=(0,Q.uUt)(Nr).getToken(),It=(0,Q.uUt)(jr);return null!=ft&&!oe.headers.has(It)&&(oe=oe.clone({headers:oe.headers.set(It,ft)})),ve(oe)}var He=function(oe){return oe[oe.Interceptors=0]="Interceptors",oe[oe.LegacyInterceptors=1]="LegacyInterceptors",oe[oe.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",oe[oe.NoXsrfProtection=3]="NoXsrfProtection",oe[oe.JsonpSupport=4]="JsonpSupport",oe[oe.RequestsMadeViaParent=5]="RequestsMadeViaParent",oe[oe.Fetch=6]="Fetch",oe}(He||{});function Be(...oe){const ve=[st,Tr,kn,{provide:$e,useExisting:kn},{provide:we,useExisting:Tr},{provide:Wn,useValue:pi,multi:!0},{provide:Cn,useValue:!0},{provide:Nr,useClass:Ds}];for(const Ce of oe)ve.push(...Ce.\u0275providers);return(0,Q.AFj)(ve)}const ce=new Q.UbH("");function Z(){return function ge(oe,ve){return{\u0275kind:oe,\u0275providers:ve}}(He.LegacyInterceptors,[{provide:ce,useFactory:wr},{provide:Wn,useExisting:ce,multi:!0}])}let En=(()=>{class oe{static#e=this.\u0275fac=function(ft){return new(ft||oe)};static#t=this.\u0275mod=Q.a4G({type:oe});static#n=this.\u0275inj=Q.s3X({providers:[Be(Z())]})}return oe})()},4496:($t,We,V)=>{V.d(We,{qid:()=>HC,QHP:()=>cs,kZF:()=>ED,Ev2:()=>LR,Swk:()=>fp,YND:()=>te,kD9:()=>Zl,ESV:()=>vR,ayF:()=>SR,syz:()=>Ba,GMv:()=>ct,SIe:()=>it,eAe:()=>Lu,_w7:()=>ii,_6O:()=>bn,UbH:()=>gr,zZn:()=>la,Uj7:()=>Qf,YNh:()=>Jf,KYU:()=>CE,obV:()=>rE,oF$:()=>Vd,WW2:()=>Us,T7N:()=>wl,AHE:()=>T,crf:()=>M,q87:()=>lv,O8F:()=>uv,yzm:()=>Af,Qfh:()=>Xc,Yw2:()=>Bf,G4X:()=>pR,eOv:()=>yD,j1C:()=>$b,a8Z:()=>lD,y8U:()=>k_,K6R:()=>En,I44:()=>x_,cZD:()=>lM,SIz:()=>h,Gk1:()=>XI,grM:()=>RD,wd:()=>Vt,uUt:()=>mr,sPQ:()=>OR,_Ap:()=>Ss,AFj:()=>Zc,m4O:()=>FR,o9M:()=>hM,SMS:()=>pd,sRj:()=>Bu,oPY:()=>dD,i4S:()=>v,GUM:()=>im,g9Y:()=>R,OBp:()=>Lt,aS5:()=>mD,Mn9:()=>_D,iMv:()=>wC,G58:()=>zr,y02:()=>vw,IHs:()=>Yt,K_M:()=>Lo,Guz:()=>kd,w5$:()=>GC,gX2:()=>vD,auf:()=>Qo,GEN:()=>Fn,eg9:()=>Bg,Wk5:()=>oe,QJr:()=>nE,SYr:()=>ru,M5G:()=>RT,UHJ:()=>MT,yG2:()=>ig,e48:()=>cC,eAK:()=>pC,szK:()=>sT,In1:()=>Yr,Sc5:()=>Go,wxM:()=>pr,s3X:()=>Jo,a4G:()=>$o,UTH:()=>Ka,GI1:()=>Hl,wR5:()=>EC,C$Y:()=>dE,I0R:()=>lE,KQA:()=>mw,otF:()=>Ep,CoB:()=>cr,gJ8:()=>ff,KEo:()=>Ry,qCj:()=>AC,Gqi:()=>cT,GaO:()=>Yw,wVc:()=>HT,kDX:()=>zT,g7$:()=>qT,I7O:()=>KT,E7m:()=>hC,wto:()=>aT,CGJ:()=>eo,usT:()=>Qa,K6U:()=>rl,YFg:()=>bm,yuY:()=>Jt,OEk:()=>yT,cNF:()=>bC,oRS:()=>mE,kNx:()=>PT,iHE:()=>MC,OKB:()=>RC,CC$:()=>oT}),V(1528);let A=null,ye=1;const G=Symbol("SIGNAL");function Ie(t){const r=A;return A=t,r}function Se(t){if((!wt(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==ye)){if(!t.producerMustRecompute(t)&&!Ke(t))return t.dirty=!1,void(t.lastCleanEpoch=ye);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ye}}function Ke(t){Dt(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(Se(s),a!==s.version))return!0}return!1}function de(t,r){if(function xe(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Dt(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)de(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],u=t.liveConsumerNode[r];Dt(u),u.producerIndexOfThis[a]=r}}function wt(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Dt(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let nt=null;var Kt=V(5657),wn=V(6928),Wn=V(6700),Rr=V(4704);const wr="https://g.co/ng/security#xss";class Lt extends Error{constructor(r,s){super(zr(r,s)),this.code=r}}function zr(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}function gn(t){return r=>{setTimeout(t,void 0,r)}}const ii=class vn extends Kt.E{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let u=r,f=s||(()=>null),E=a;if(r&&"object"==typeof r){const P=r;u=P.next?.bind(P),f=P.error?.bind(P),E=P.complete?.bind(P)}this.__isAsync&&(f=gn(f),u&&(u=gn(u)),E&&(E=gn(E)));const I=super.subscribe({next:u,error:f,complete:E});return r instanceof wn.wH&&r.add(I),I}};var bn=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(bn||{});function Fn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Fn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Tr(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}var yn=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(yn||{}),En=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(En||{});function On(t){return{toString:t}.toString()}const Yt=globalThis,Ln={},Re=[];function Ye(t){for(let r in t)if(t[r]===Ye)return r;throw Error("Could not find renamed property on target object.")}function Xe(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}const Ct=Ye({\u0275cmp:Ye}),Xt=Ye({\u0275dir:Ye}),Bn=Ye({\u0275pipe:Ye}),Hn=Ye({\u0275mod:Ye}),Yn=Ye({\u0275fac:Ye}),Kr=Ye({__NG_ELEMENT_ID__:Ye}),lr=Ye({__NG_ENV_ID__:Ye});var oe=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(oe||{});function ve(t,r,s){let a=t.length;for(;;){const u=t.indexOf(r,s);if(-1===u)return u;if(0===u||t.charCodeAt(u-1)<=32){const f=r.length;if(u+f===a||t.charCodeAt(u+f)<=32)return u}s=u+1}}function Ce(t,r,s){let a=0;for(;a<s.length;){const u=s[a];if("number"==typeof u){if(0!==u)break;a++;const f=s[a++],E=s[a++],I=s[a++];t.setAttribute(r,E,I,f)}else{const f=u,E=s[++a];It(f)?t.setProperty(r,f,E):t.setAttribute(r,f,E),a++}}return a}function ft(t){return 3===t||4===t||6===t}function It(t){return 64===t.charCodeAt(0)}function xt(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const u=r[a];"number"==typeof u?s=u:0===s||Gt(t,s,u,null,-1===s||2===s?r[++a]:null)}}return t}function Gt(t,r,s,a,u){let f=0,E=t.length;if(-1===r)E=-1;else for(;f<t.length;){const I=t[f++];if("number"==typeof I){if(I===r){E=-1;break}if(I>r){E=f-1;break}}}for(;f<t.length;){const I=t[f];if("number"==typeof I)break;if(I===s){if(null===a)return void(null!==u&&(t[f+1]=u));if(a===t[f+1])return void(t[f+2]=u)}f++,null!==a&&f++,null!==u&&f++}-1!==E&&(t.splice(E,0,r),f=E+1),t.splice(f++,0,s),null!==a&&t.splice(f++,0,a),null!==u&&t.splice(f++,0,u)}const dn="ng-template";function rn(t,r,s){let a=0,u=!0;for(;a<t.length;){let f=t[a++];if("string"==typeof f&&u){const E=t[a++];if(s&&"class"===f&&-1!==ve(E.toLowerCase(),r,0))return!0}else{if(1===f){for(;a<t.length&&"string"==typeof(f=t[a++]);)if(f.toLowerCase()===r)return!0;return!1}"number"==typeof f&&(u=!1)}}return!1}function zn(t){return 4===t.type&&t.value!==dn}function vr(t,r,s){return r===(4!==t.type||s?t.value:dn)}function sr(t,r,s){let a=4;const u=t.attrs||[],f=function qn(t){for(let r=0;r<t.length;r++)if(ft(t[r]))return r;return t.length}(u);let E=!1;for(let I=0;I<r.length;I++){const P=r[I];if("number"!=typeof P){if(!E)if(4&a){if(a=2|1&a,""!==P&&!vr(t,P,s)||""===P&&1===r.length){if(Vn(a))return!1;E=!0}}else{const U=8&a?P:r[++I];if(8&a&&null!==t.attrs){if(!rn(t.attrs,U,s)){if(Vn(a))return!1;E=!0}continue}const ae=ns(8&a?"class":P,u,zn(t),s);if(-1===ae){if(Vn(a))return!1;E=!0;continue}if(""!==U){let Ae;Ae=ae>f?"":u[ae+1].toLowerCase();const ke=8&a?Ae:null;if(ke&&-1!==ve(ke,U,0)||2&a&&U!==Ae){if(Vn(a))return!1;E=!0}}}}else{if(!E&&!Vn(a)&&!Vn(P))return!1;if(E&&Vn(P))continue;E=!1,a=P|1&a}}return Vn(a)||E}function Vn(t){return 0==(1&t)}function ns(t,r,s,a){if(null===r)return-1;let u=0;if(a||!s){let f=!1;for(;u<r.length;){const E=r[u];if(E===t)return u;if(3===E||6===E)f=!0;else{if(1===E||2===E){let I=r[++u];for(;"string"==typeof I;)I=r[++u];continue}if(4===E)break;if(0===E){u+=4;continue}}u+=f?1:2}return-1}return function ei(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function Ti(t,r,s=!1){for(let a=0;a<r.length;a++)if(sr(t,r[a],s))return!0;return!1}function fr(t,r){return t?":not("+r.trim()+")":r}function rs(t){let r=t[0],s=1,a=2,u="",f=!1;for(;s<t.length;){let E=t[s];if("string"==typeof E)if(2&a){const I=t[++s];u+="["+E+(I.length>0?'="'+I+'"':"")+"]"}else 8&a?u+="."+E:4&a&&(u+=" "+E);else""!==u&&!Vn(E)&&(r+=fr(f,u),u=""),a=E,f=f||!Vn(a);s++}return""!==u&&(r+=fr(f,u)),r}function Yr(t){return On(()=>{const r=ra(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===yn.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||En.Emulated,styles:t.styles||Re,_:null,schemas:t.schemas||null,tView:null,id:""};ia(s);const a=t.dependencies;return s.directiveDefs=Bs(a,!1),s.pipeDefs=Bs(a,!0),s.id=function bo(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const u of s)r=Math.imul(31,r)+u.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function As(t){return Zn(t)||Si(t)}function Ai(t){return null!==t}function $o(t){return On(()=>({type:t.type,bootstrap:t.bootstrap||Re,declarations:t.declarations||Re,imports:t.imports||Re,exports:t.exports||Re,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ji(t,r){if(null==t)return Ln;const s={};for(const a in t)if(t.hasOwnProperty(a)){const u=t[a];let f,E,I=oe.None;Array.isArray(u)?(I=u[0],f=u[1],E=u[2]??f):(f=u,E=u),r?(s[f]=I!==oe.None?[a,I]:a,r[f]=E):s[f]=a}return s}function Go(t){return On(()=>{const r=ra(t);return ia(r),r})}function Ka(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Zn(t){return t[Ct]||null}function Si(t){return t[Xt]||null}function $r(t){return t[Bn]||null}function Ss(t){const r=Zn(t)||Si(t)||$r(t);return null!==r&&r.standalone}function oi(t,r){const s=t[Hn]||null;if(!s&&!0===r)throw new Error(`Type ${Fn(t)} does not have '\u0275mod' property.`);return s}function ra(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||Ln,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Re,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ji(t.inputs,r),outputs:ji(t.outputs),debugInfo:null}}function ia(t){t.features?.forEach(r=>r(t))}function Bs(t,r){if(!t)return null;const s=r?$r:As;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(Ai)}const Qr=0,kt=1,mn=2,Ar=3,Yi=4,xi=5,Ni=6,$i=7,or=8,ki=9,Gi=10,An=11,Pi=12,ho=13,qs=14,li=15,Ps=16,bs=17,bi=18,is=19,Qi=20,Ei=21,Ro=22,Rs=23,sn=25,Mo=1,Wi=7,Oo=9,di=10;var ys=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ys||{});function ss(t){return Array.isArray(t)&&"object"==typeof t[Mo]}function Hi(t){return Array.isArray(t)&&!0===t[Mo]}function Os(t){return 0!=(4&t.flags)}function Fi(t){return t.componentOffset>-1}function xs(t){return 1==(1&t.flags)}function Li(t){return!!t.template}function sa(t){return 0!=(512&t[mn])}let Ho=!1;function Fr(t){for(;Array.isArray(t);)t=t[Qr];return t}function xo(t,r){return Fr(r[t])}function dr(t,r){return Fr(r[t.index])}function Ji(t,r){return t.data[r]}function ma(t,r){return t[r]}function ks(t,r){const s=r[t];return ss(s)?s:s[Qr]}function Io(t){return 128==(128&t[mn])}function ds(t,r){return null==r?null:t[r]}function Js(t){t[bs]=0}function Co(t){1024&t[mn]||(t[mn]|=1024,Io(t)&&zo(t))}function Xs(t){return!!(9216&t[mn]||t[Rs]?.dirty)}function Oa(t){Xs(t)?zo(t):64&t[mn]&&(function ai(){return Ho}()?(t[mn]|=1024,zo(t)):t[Gi].changeDetectionScheduler?.notify())}function zo(t){t[Gi].changeDetectionScheduler?.notify();let r=$s(t);for(;null!==r&&!(8192&r[mn])&&(r[mn]|=8192,Io(r));)r=$s(r)}function xa(t,r){if(256==(256&t[mn]))throw new Lt(911,!1);null===t[Ei]&&(t[Ei]=[]),t[Ei].push(r)}function $s(t){const r=t[Ar];return Hi(r)?r[Ar]:r}const Mn={lFrame:Pr(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wo(){return Mn.bindingsEnabled}function _t(){return Mn.lFrame.lView}function ar(){return Mn.lFrame.tView}function Qa(t){return Mn.lFrame.contextLView=t,t[or]}function eo(t){return Mn.lFrame.contextLView=null,t}function Or(){let t=Lr();for(;null!==t&&64===t.type;)t=t.parent;return t}function Lr(){return Mn.lFrame.currentTNode}function po(t,r){const s=Mn.lFrame;s.currentTNode=t,s.isParent=r}function to(){return Mn.lFrame.isParent}function Is(){const t=Mn.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function Er(){return Mn.lFrame.bindingIndex++}function H(t,r){const s=Mn.lFrame;s.bindingIndex=s.bindingRootIndex=t,rt(r)}function rt(t){Mn.lFrame.currentDirectiveIndex=t}function an(){return Mn.lFrame.currentQueryIndex}function Xr(t){Mn.lFrame.currentQueryIndex=t}function Gr(t){const r=t[kt];return 2===r.type?r.declTNode:1===r.type?t[xi]:null}function ni(t,r,s){if(s&bn.SkipSelf){let u=r,f=t;for(;!(u=u.parent,null!==u||s&bn.Host||(u=Gr(f),null===u||(f=f[qs],10&u.type))););if(null===u)return!1;r=u,t=f}const a=Mn.lFrame=ci();return a.currentTNode=r,a.lView=t,!0}function Kn(t){const r=ci(),s=t[kt];Mn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function ci(){const t=Mn.lFrame,r=null===t?null:t.child;return null===r?Pr(t):r}function Pr(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function as(){const t=Mn.lFrame;return Mn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ko=as;function zi(){const t=as();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Jn(){return Mn.lFrame.selectedIndex}function ui(t){Mn.lFrame.selectedIndex=t}function er(){const t=Mn.lFrame;return Ji(t.tView,t.selectedIndex)}let Za=!0;function nn(){return Za}function un(t){Za=t}function Eu(){return jt(Or(),_t())}function jt(t,r){return new ct(dr(t,r))}let ka,ct=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=Eu}return t})();function St(t){return t instanceof ct?t.nativeElement:t}function _c(t,r){t.forEach(s=>Array.isArray(s)?_c(s,r):r(s))}function yl(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function Wc(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function Vr(t,r,s){let a=Sn(t,r);return a>=0?t[1|a]=s:(a=~a,function go(t,r,s,a){let u=t.length;if(u==r)t.push(s,a);else if(1===u)t.push(a,t[0]),t[0]=s;else{for(u--,t.push(t[u-1],t[u]);u>r;)t[u]=t[u-2],u--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function ec(t,r){const s=Sn(t,r);if(s>=0)return t[1|s]}function Sn(t,r){return function Yo(t,r,s){let a=0,u=t.length>>s;for(;u!==a;){const f=a+(u-a>>1),E=t[f<<s];if(r===E)return f<<s;E>r?u=f:a=f+1}return~(u<<s)}(t,r,1)}function gi(){return this._results[Symbol.iterator]()}class fn{static#e=Symbol.iterator;get changes(){return this._changes??=new ii}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const s=fn.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=gi)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){this.dirty=!1;const a=function fs(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Xi(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let u=t[a],f=r[a];if(s&&(u=s(u),f=s(f)),f!==u)return!1}return!0}(this._results,a,s))&&(this._results=a,this.length=a.length,this.last=a[this.length-1],this.first=a[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(r){this._onDirty=r}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Ht(t){return 128==(128&t.flags)}function Qo(t){ka=t}function pr(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Jo(t){return{providers:t.providers||[],imports:t.imports||[]}}function ri(t){return Cs(t,yc)||Cs(t,Iu)}function Lo(t){return null!==ri(t)}function Cs(t,r){return t.hasOwnProperty(r)?t[r]:null}function tc(t){return t&&(t.hasOwnProperty(so)||t.hasOwnProperty(Qe))?t[so]:null}const yc=Ye({\u0275prov:Ye}),so=Ye({\u0275inj:Ye}),Iu=Ye({ngInjectableDef:Ye}),Qe=Ye({ngInjectorDef:Ye});class gr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=pr({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const cs=new gr("",{providedIn:"root",factory:()=>C}),C="ng",M=new gr(""),T=new gr("",{providedIn:"platform",factory:()=>"unknown"}),te=new gr("",{providedIn:"root",factory:()=>function Fo(){if(void 0!==ka)return ka;if(typeof document<"u")return document;throw new Lt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),Ze=Ye({__forward_ref__:Ye});function Vt(t){return t.__forward_ref__=Vt,t.toString=function(){return Fn(this())},t}function Ft(t){return Xn(t)?t():t}function Xn(t){return"function"==typeof t&&t.hasOwnProperty(Ze)&&t.__forward_ref__===Vt}function qc(t){return t&&!!t.\u0275providers}function ir(t){return"string"==typeof t?t:null==t?"":String(t)}function El(t,r){throw new Lt(-201,!1)}let od;function Wd(){return od}function oo(t){const r=od;return od=t,r}function zu(t,r,s){const a=ri(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&bn.Optional?null:void 0!==r?r:void El()}const vc={},Kc="__NG_DI_FLAG__",Cu="ngTempTokenPath",Gs=/\n/gm,Ia="__source";let nc;function Ca(t){const r=nc;return nc=t,r}function Vs(t,r=bn.Default){if(void 0===nc)throw new Lt(-203,!1);return null===nc?zu(t,void 0,r):nc.get(t,r&bn.Optional?null:void 0,r)}function cr(t,r=bn.Default){return(Wd()||Vs)(Ft(t),r)}function mr(t,r=bn.Default){return cr(t,ao(r))}function ao(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Qc(t){const r=[];for(let s=0;s<t.length;s++){const a=Ft(t[s]);if(Array.isArray(a)){if(0===a.length)throw new Lt(900,!1);let u,f=bn.Default;for(let E=0;E<a.length;E++){const I=a[E],P=ws(I);"number"==typeof P?-1===P?u=I.token:f|=P:u=I}r.push(cr(u,f))}else r.push(cr(a))}return r}function Ec(t,r){return t[Kc]=r,t.prototype[Kc]=r,t}function ws(t){return t[Kc]}let Ua=()=>null;function Du(t,r,s=!1){return Ua(t,r,s)}const Ac="__parameters__";function oc(t,r,s){return On(()=>{const a=function sc(t){return function(...s){if(t){const a=t(...s);for(const u in a)this[u]=a[u]}}}(r);function u(...f){if(this instanceof u)return a.apply(this,f),this;const E=new u(...f);return I.annotation=E,I;function I(P,U,Y){const ae=P.hasOwnProperty(Ac)?P[Ac]:Object.defineProperty(P,Ac,{value:[]})[Ac];for(;ae.length<=Y;)ae.push(null);return(ae[Y]=ae[Y]||[]).push(E),P}}return s&&(u.prototype=Object.create(s.prototype)),u.prototype.ngMetadataName=t,u.annotationCls=u,u})}const wl=Ec(oc("Optional"),8),Xc=Ec(oc("SkipSelf"),4);function ac(t,r){return t.hasOwnProperty(Yn)?t[Yn]:null}const Ba=new gr(""),ja=new gr("",-1),bu=new gr("");class Pc{get(r,s=vc){if(s===vc){const a=new Error(`NullInjectorError: No provider for ${Fn(r)}!`);throw a.name="NullInjectorError",a}return s}}function Zc(t){return{\u0275providers:t}}function Aa(...t){return{\u0275providers:eu(0,t),\u0275fromNgModule:!0}}function eu(t,...r){const s=[],a=new Set;let u;const f=E=>{s.push(E)};return _c(r,E=>{const I=E;Sa(I,f,[],a)&&(u||=[],u.push(I))}),void 0!==u&&Xu(u,f),s}function Xu(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:u}=t[s];Tl(u,f=>{r(f,a)})}}function Sa(t,r,s,a){if(!(t=Ft(t)))return!1;let u=null,f=tc(t);const E=!f&&Zn(t);if(f||E){if(E&&!E.standalone)return!1;u=t}else{const P=t.ngModule;if(f=tc(P),!f)return!1;u=P}const I=a.has(u);if(E){if(I)return!1;if(a.add(u),E.dependencies){const P="function"==typeof E.dependencies?E.dependencies():E.dependencies;for(const U of P)Sa(U,r,s,a)}}else{if(!f)return!1;{if(null!=f.imports&&!I){let U;a.add(u);try{_c(f.imports,Y=>{Sa(Y,r,s,a)&&(U||=[],U.push(Y))})}finally{}void 0!==U&&Xu(U,r)}if(!I){const U=ac(u)||(()=>new u);r({provide:u,useFactory:U,deps:Re},u),r({provide:bu,useValue:u,multi:!0},u),r({provide:Ba,useValue:()=>cr(u),multi:!0},u)}const P=f.providers;if(null!=P&&!I){const U=t;Tl(P,Y=>{r(Y,U)})}}}return u!==t&&void 0!==t.providers}function Tl(t,r){for(let s of t)qc(s)&&(s=s.\u0275providers),Array.isArray(s)?Tl(s,r):r(s)}const $a=Ye({provide:String,useValue:Ye});function Dl(t){return null!==t&&"object"==typeof t&&$a in t}function w(t){return"function"==typeof t}const v=new gr(""),S={},z={};let re;function Me(){return void 0===re&&(re=new Pc),re}class it{}class At extends it{get destroyed(){return this._destroyed}constructor(r,s,a,u){super(),this.parent=s,this.source=a,this.scopes=u,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,uc(r,E=>this.processProvider(E)),this.records.set(ja,ms(void 0,this)),u.has("environment")&&this.records.set(it,ms(void 0,this));const f=this.records.get(v);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(bu,Re,bn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=Ca(this),a=oo(void 0);try{return r()}finally{Ca(s),oo(a)}}get(r,s=vc,a=bn.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(lr))return r[lr](this);a=ao(a);const f=Ca(this),E=oo(void 0);try{if(!(a&bn.SkipSelf)){let P=this.records.get(r);if(void 0===P){const U=function vo(t){return"function"==typeof t||"object"==typeof t&&t instanceof gr}(r)&&ri(r);P=U&&this.injectableDefInScope(U)?ms(cn(r),S):null,this.records.set(r,P)}if(null!=P)return this.hydrate(r,P)}return(a&bn.Self?Me():this.parent).get(r,s=a&bn.Optional&&s===vc?null:s)}catch(I){if("NullInjectorError"===I.name){if((I[Cu]=I[Cu]||[]).unshift(Fn(r)),f)throw I;return function ad(t,r,s,a){const u=t[Cu];throw r[Ia]&&u.unshift(r[Ia]),t.message=function Ic(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let u=Fn(r);if(Array.isArray(r))u=r.map(Fn).join(" -> ");else if("object"==typeof r){let f=[];for(let E in r)if(r.hasOwnProperty(E)){let I=r[E];f.push(E+":"+("string"==typeof I?JSON.stringify(I):Fn(I)))}u=`{${f.join(", ")}}`}return`${s}${a?"("+a+")":""}[${u}]: ${t.replace(Gs,"\n  ")}`}("\n"+t.message,u,s,a),t.ngTokenPath=u,t[Cu]=null,t}(I,r,"R3InjectorError",this.source)}throw I}finally{oo(E),Ca(f)}}resolveInjectorInitializers(){const r=Ca(this),s=oo(void 0);try{const u=this.get(Ba,Re,bn.Self);for(const f of u)f()}finally{Ca(r),oo(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(Fn(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Lt(205,!1)}processProvider(r){let s=w(r=Ft(r))?r:Ft(r&&r.provide);const a=function tr(t){return Dl(t)?ms(void 0,t.useValue):ms(_o(t),S)}(r);if(!w(r)&&!0===r.multi){let u=this.records.get(s);u||(u=ms(void 0,S,!0),u.factory=()=>Qc(u.multi),this.records.set(s,u)),s=r,u.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===S&&(s.value=z,s.value=s.factory()),"object"==typeof s.value&&s.value&&function yo(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Ft(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function cn(t){const r=ri(t),s=null!==r?r.factory:ac(t);if(null!==s)return s;if(t instanceof gr)throw new Lt(204,!1);if(t instanceof Function)return function Pn(t){if(t.length>0)throw new Lt(204,!1);const s=function Hc(t){return t&&(t[yc]||t[Iu])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new Lt(204,!1)}function _o(t,r,s){let a;if(w(t)){const u=Ft(t);return ac(u)||cn(u)}if(Dl(t))a=()=>Ft(t.useValue);else if(function Ru(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...Qc(t.deps||[]));else if(function cc(t){return!(!t||!t.useExisting)}(t))a=()=>cr(Ft(t.useExisting));else{const u=Ft(t&&(t.useClass||t.provide));if(!function tu(t){return!!t.deps}(t))return ac(u)||cn(u);a=()=>new u(...Qc(t.deps))}return a}function ms(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function uc(t,r){for(const s of t)Array.isArray(s)?uc(s,r):s&&qc(s)?uc(s.\u0275providers,r):r(s)}function pd(t,r){t instanceof At&&t.assertNotDestroyed();const a=Ca(t),u=oo(void 0);try{return r()}finally{Ca(a),oo(u)}}class Ou{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Xh(t,r,s,a){null!==r?r.applyValueToInputSignal(r,a):t[s]=a}function ru(){return Zh}function Zh(t){return t.type.prototype.ngOnChanges&&(t.setInput=ef),xu}function xu(){const t=lc(this),r=t?.current;if(r){const s=t.previous;if(s===Ln)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function ef(t,r,s,a,u){const f=this.declaredInputs[a],E=lc(t)||function Nu(t,r){return t[tf]=r}(t,{previous:Ln,current:null}),I=E.current||(E.current={}),P=E.previous,U=P[f];I[f]=new Ou(U&&U.currentValue,s,P===Ln),Xh(t,r,u,s)}ru.ngInherit=!0;const tf="__ngSimpleChanges__";function lc(t){return t[tf]||null}const Uo=function(t,r,s){};function Mc(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const f=t.data[s].type.prototype,{ngAfterContentInit:E,ngAfterContentChecked:I,ngAfterViewInit:P,ngAfterViewChecked:U,ngOnDestroy:Y}=f;E&&(t.contentHooks??=[]).push(-s,E),I&&((t.contentHooks??=[]).push(s,I),(t.contentCheckHooks??=[]).push(s,I)),P&&(t.viewHooks??=[]).push(-s,P),U&&((t.viewHooks??=[]).push(s,U),(t.viewCheckHooks??=[]).push(s,U)),null!=Y&&(t.destroyHooks??=[]).push(s,Y)}}function Zd(t,r,s){th(t,r,3,s)}function iu(t,r,s,a){(3&t[mn])===s&&th(t,r,s,a)}function eh(t,r){let s=t[mn];(3&s)===r&&(s&=16383,s+=1,t[mn]=s)}function th(t,r,s,a){const f=a??-1,E=r.length-1;let I=0;for(let P=void 0!==a?65535&t[bs]:0;P<E;P++)if("number"==typeof r[P+1]){if(I=r[P],null!=a&&I>=a)break}else r[P]<0&&(t[bs]+=65536),(I<f||-1==f)&&(dc(t,s,r,P),t[bs]=(4294901760&t[bs])+P+2),P++}function Oc(t,r){Uo(4,t,r);const s=Ie(null);try{r.call(t)}finally{Ie(s),Uo(5,t,r)}}function dc(t,r,s,a){const u=s[a]<0,f=s[a+1],I=t[u?-s[a]:s[a]];u?t[mn]>>14<t[bs]>>16&&(3&t[mn])===r&&(t[mn]+=16384,Oc(I,f)):Oc(I,f)}const su=-1;class Sl{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function _d(t){return t!==su}function us(t){return 32767&t}function ou(t,r){let s=function ur(t){return t>>16}(t),a=r;for(;s>0;)a=a[qs],s--;return a}let hc=!0;function Nc(t){const r=hc;return hc=t,r}const ku=255,cf=5;let hm=0;const Po={};function Zu(t,r){const s=bl(t,r);if(-1!==s)return s;const a=r[kt];a.firstCreatePass&&(t.injectorIndex=r.length,Pl(a.data,t),Pl(r,null),Pl(a.blueprint,null));const u=ih(t,r),f=t.injectorIndex;if(_d(u)){const E=us(u),I=ou(u,r),P=I[kt].data;for(let U=0;U<8;U++)r[f+U]=I[E+U]|P[E+U]}return r[f+8]=u,f}function Pl(t,r){t.push(0,0,0,0,0,0,0,0,r)}function bl(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function ih(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,u=r;for(;null!==u;){if(a=hf(u),null===a)return su;if(s++,u=u[qs],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return su}function uf(t,r,s){!function rh(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(Kr)&&(a=s[Kr]),null==a&&(a=s[Kr]=hm++);const u=a&ku;r.data[t+(u>>cf)]|=1<<u}(t,r,s)}function pm(t,r,s){if(s&bn.Optional||void 0!==t)return t;El()}function el(t,r,s,a){if(s&bn.Optional&&void 0===a&&(a=null),!(s&(bn.Self|bn.Host))){const u=t[ki],f=oo(void 0);try{return u?u.get(r,a,s&bn.Optional):zu(r,a,s&bn.Optional)}finally{oo(f)}}return pm(a,0,s)}function Rl(t,r,s,a=bn.Default,u){if(null!==t){if(2048&r[mn]&&!(a&bn.Self)){const E=function au(t,r,s,a,u){let f=t,E=r;for(;null!==f&&null!==E&&2048&E[mn]&&!(512&E[mn]);){const I=Ml(f,E,s,a|bn.Self,Po);if(I!==Po)return I;let P=f.parent;if(!P){const U=E[Qi];if(U){const Y=U.get(s,Po,a);if(Y!==Po)return Y}P=hf(E),E=E[qs]}f=P}return u}(t,r,s,a,Po);if(E!==Po)return E}const f=Ml(t,r,s,a,Po);if(f!==Po)return f}return el(r,s,a,u)}function Ml(t,r,s,a,u){const f=function yp(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(Kr)?t[Kr]:void 0;return"number"==typeof r?r>=0?r&ku:df:r}(s);if("function"==typeof f){if(!ni(r,t,a))return a&bn.Host?pm(u,0,a):el(r,s,a,u);try{let E;if(E=f(a),null!=E||a&bn.Optional)return E;El()}finally{ko()}}else if("number"==typeof f){let E=null,I=bl(t,r),P=su,U=a&bn.Host?r[li][xi]:null;for((-1===I||a&bn.SkipSelf)&&(P=-1===I?ih(t,r):r[I+8],P!==su&&vp(a,!1)?(E=r[kt],I=us(P),r=ou(P,r)):I=-1);-1!==I;){const Y=r[kt];if(xl(f,I,Y.data)){const ae=gm(I,r,s,E,a,U);if(ae!==Po)return ae}P=r[I+8],P!==su&&vp(a,r[kt].data[I+8]===U)&&xl(f,I,r)?(E=Y,I=us(P),r=ou(P,r)):I=-1}}return u}function gm(t,r,s,a,u,f){const E=r[kt],I=E.data[t+8],Y=lf(I,E,s,null==a?Fi(I)&&hc:a!=E&&0!=(3&I.type),u&bn.Host&&f===I);return null!==Y?Ol(r,E,Y,I):Po}function lf(t,r,s,a,u){const f=t.providerIndexes,E=r.data,I=1048575&f,P=t.directiveStart,Y=f>>20,Ae=u?I+Y:t.directiveEnd;for(let ke=a?I:I+Y;ke<Ae;ke++){const dt=E[ke];if(ke<P&&s===dt||ke>=P&&dt.type===s)return ke}if(u){const ke=E[P];if(ke&&Li(ke)&&ke.type===s)return P}return null}function Ol(t,r,s,a){let u=t[s];const f=r.data;if(function _p(t){return t instanceof Sl}(u)){const E=u;E.resolving&&function $d(t,r){throw r&&r.join(" > "),new Lt(-200,t)}(function xr(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ir(t)}(f[s]));const I=Nc(E.canSeeViewProviders);E.resolving=!0;const U=E.injectImpl?oo(E.injectImpl):null;ni(t,a,bn.Default);try{u=t[s]=E.factory(void 0,f,t,a),r.firstCreatePass&&s>=a.directiveStart&&function Xd(t,r,s){const{ngOnChanges:a,ngOnInit:u,ngDoCheck:f}=r.type.prototype;if(a){const E=Zh(r);(s.preOrderHooks??=[]).push(t,E),(s.preOrderCheckHooks??=[]).push(t,E)}u&&(s.preOrderHooks??=[]).push(0-t,u),f&&((s.preOrderHooks??=[]).push(t,f),(s.preOrderCheckHooks??=[]).push(t,f))}(s,f[s],r)}finally{null!==U&&oo(U),Nc(I),E.resolving=!1,ko()}}return u}function xl(t,r,s){return!!(s[r+(t>>cf)]&1<<t)}function vp(t,r){return!(t&bn.Self||t&bn.Host&&r)}class Ws{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return Rl(this._tNode,this._lView,r,ao(a),s)}}function df(){return new Ws(Or(),_t())}function Ep(t){return On(()=>{const r=t.prototype.constructor,s=r[Yn]||Fu(r),a=Object.prototype;let u=Object.getPrototypeOf(t.prototype).constructor;for(;u&&u!==a;){const f=u[Yn]||Fu(u);if(f&&f!==s)return f;u=Object.getPrototypeOf(u)}return f=>new f})}function Fu(t){return Xn(t)?()=>{const r=Fu(Ft(t));return r&&r()}:ac(t)}function hf(t){const r=t[kt],s=r.type;return 2===s?r.declTNode:1===s?t[xi]:null}function ff(t){return function fm(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let u=0;for(;u<a;){const f=s[u];if(ft(f))break;if(0===f)u+=2;else if("number"==typeof f)for(u++;u<a&&"string"==typeof s[u];)u++;else{if(f===r)return s[u+1];u+=2}}}return null}(Or(),t)}function vm(t,r=null,s=null,a){const u=Dp(t,r,s,a);return u.resolveInjectorInitializers(),u}function Dp(t,r=null,s=null,a,u=new Set){const f=[s||Re,Aa(t)];return a=a||("object"==typeof t?void 0:Fn(t)),new At(f,r||Me(),a||null,u)}let la=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=vc;static#t=this.NULL=new Pc;static create(s,a){if(Array.isArray(s))return vm({name:""},a,s,"");{const u=s.name??"";return vm({name:u},s.parent,s.providers,u)}}static#n=this.\u0275prov=pr({token:t,providedIn:"any",factory:()=>cr(ja)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function Ed(t){return t.ngOriginalError}class Lu{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Ed(r);for(;s&&Ed(s);)s=Ed(s);return s||null}}const gf=new gr("",{providedIn:"root",factory:()=>mr(Lu).handleError.bind(void 0)}),_f=new gr("",{providedIn:"root",factory:()=>!1});let uh;function Sp(t){return function Cd(){if(void 0===uh&&(uh=null,Yt.trustedTypes))try{uh=Yt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return uh}()?.createScriptURL(t)||t}class Pp{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wr})`}}function uu(t){return t instanceof Pp?t.changingThisBreaksApplicationSecurity:t}function kl(t,r){const s=function cy(t){return t instanceof Pp&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${wr})`)}return s===r}const Mp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Bl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Bl||{});function rl(t){const r=sl();return r?r.sanitize(Bl.URL,t)||"":kl(t,"URL")?uu(t):function fh(t){return(t=String(t)).match(Mp)?t:"unsafe:"+t}(ir(t))}function Fp(t){const r=sl();if(r)return Sp(r.sanitize(Bl.RESOURCE_URL,t)||"");if(kl(t,"ResourceURL"))return Sp(uu(t));throw new Lt(904,!1)}function bm(t,r,s){return function Pm(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Fp:rl}(r,s)(t)}function sl(){const t=_t();return t&&t[Gi].sanitizer}const yh=new Map;let km=0;const d="__ngContext__";function l(t,r){ss(r)?(t[d]=r[is],function Fm(t){yh.set(t[is],t)}(r)):t[d]=r}function Pa(t){return t instanceof Function?t():t}var Af=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Af||{});let jm;function Wp(t,r){return jm(t,r)}function Wl(t,r,s,a,u){if(null!=a){let f,E=!1;Hi(a)?f=a:ss(a)&&(E=!0,a=a[Qr]);const I=Fr(a);0===t&&null!==s?null==u?Jp(r,s,I):Fc(r,s,I,u||null,!0):1===t&&null!==s?Fc(r,s,I,u||null,!0):2===t?function Ad(t,r,s){const a=Mf(t,r);a&&function Rf(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,I,E):3===t&&r.destroyNode(I),null!=f&&function VE(t,r,s,a,u){const f=s[Wi];f!==Fr(s)&&Wl(r,t,a,f,u);for(let I=di;I<s.length;I++){const P=s[I];ll(P[kt],P,t,r,a,f)}}(r,t,f,s,u)}}function qp(t,r,s){return t.createElement(r,s)}function Th(t,r){ll(t,r,r[An],2,null,null)}function Cy(t,r){const s=t[Oo],a=s.indexOf(r);s.splice(a,1)}function Sf(t,r){if(t.length<=di)return;const s=di+r,a=t[s];if(a){const u=a[Ps];null!==u&&u!==t&&Cy(u,a),r>0&&(t[s-1][Yi]=a[Yi]);const f=Wc(t,di+r);!function Ey(t,r){Th(t,r),r[Qr]=null,r[xi]=null}(a[kt],a);const E=f[bi];null!==E&&E.detachView(f[kt]),a[Ar]=null,a[Yi]=null,a[mn]&=-129}return a}function Yp(t,r){if(!(256&r[mn])){const s=r[An];s.destroyNode&&ll(t,r,s,3,null,null),function $m(t){let r=t[Pi];if(!r)return Pf(t[kt],t);for(;r;){let s=null;if(ss(r))s=r[Pi];else{const a=r[di];a&&(s=a)}if(!s){for(;r&&!r[Yi]&&r!==t;)ss(r)&&Pf(r[kt],r),r=r[Ar];null===r&&(r=t),ss(r)&&Pf(r[kt],r),s=r&&r[Yi]}r=s}}(r)}}function Pf(t,r){if(!(256&r[mn])){r[mn]&=-129,r[mn]|=256,r[Rs]&&function Ee(t){if(Dt(t),wt(t))for(let r=0;r<t.producerNode.length;r++)de(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(r[Rs]),function LE(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const u=r[s[a]];if(!(u instanceof Sl)){const f=s[a+1];if(Array.isArray(f))for(let E=0;E<f.length;E+=2){const I=u[f[E]],P=f[E+1];Uo(4,I,P);try{P.call(I)}finally{Uo(5,I,P)}}else{Uo(4,u,f);try{f.call(u)}finally{Uo(5,u,f)}}}}}(t,r),function FE(t,r){const s=t.cleanup,a=r[$i];if(null!==s)for(let f=0;f<s.length-1;f+=2)if("string"==typeof s[f]){const E=s[f+3];E>=0?a[E]():a[-E].unsubscribe(),f+=2}else s[f].call(a[s[f+1]]);null!==a&&(r[$i]=null);const u=r[Ei];if(null!==u){r[Ei]=null;for(let f=0;f<u.length;f++)(0,u[f])()}}(t,r),1===r[kt].type&&r[An].destroy();const s=r[Ps];if(null!==s&&Hi(r[Ar])){s!==r[Ar]&&Cy(s,r);const a=r[bi];null!==a&&a.detachView(t)}!function Tf(t){yh.delete(t[is])}(r)}}function Td(t,r,s){return function Qp(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[Qr];{const{componentOffset:u}=a;if(u>-1){const{encapsulation:f}=t.data[a.directiveStart+u];if(f===En.None||f===En.Emulated)return null}return dr(a,s)}}(t,r.parent,s)}function Fc(t,r,s,a,u){t.insertBefore(r,s,a,u)}function Jp(t,r,s){t.appendChild(r,s)}function bf(t,r,s,a,u){null!==a?Fc(t,r,s,a,u):Jp(t,r,s)}function Mf(t,r){return t.parentNode(r)}let Hm,Wm=function ul(t,r,s){return 40&t.type?dr(t,s):null};function eg(t,r,s,a){const u=Td(t,a,r),f=r[An],I=function Xp(t,r,s){return Wm(t,r,s)}(a.parent||r[xi],a,r);if(null!=u)if(Array.isArray(s))for(let P=0;P<s.length;P++)bf(f,u,s[P],I,!1);else bf(f,u,s,I,!1);void 0!==Hm&&Hm(f,a,r,s,u)}function Dd(t,r){if(null!==r){const s=r.type;if(3&s)return dr(r,t);if(4&s)return Of(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return Dd(t,a);{const u=t[r.index];return Hi(u)?Of(-1,u):Fr(u)}}if(32&s)return Wp(r,t)()||Fr(t[r.index]);{const a=Ty(t,r);return null!==a?Array.isArray(a)?a[0]:Dd($s(t[li]),a):Dd(t,r.next)}}return null}function Ty(t,r){return null!==r?t[li][xi].projection[r.projection]:null}function Of(t,r){const s=di+t+1;if(s<r.length){const a=r[s],u=a[kt].firstChild;if(null!==u)return Dd(a,u)}return r[Wi]}function ng(t,r,s,a,u,f,E){for(;null!=s;){const I=a[s.index],P=s.type;if(E&&0===r&&(I&&l(Fr(I),a),s.flags|=2),32!=(32&s.flags))if(8&P)ng(t,r,s.child,a,u,f,!1),Wl(r,t,u,I,f);else if(32&P){const U=Wp(s,a);let Y;for(;Y=U();)Wl(r,t,u,Y,f);Wl(r,t,u,I,f)}else 16&P?Dy(t,r,a,s,u,f):Wl(r,t,u,I,f);s=E?s.projectionNext:s.next}}function ll(t,r,s,a,u,f){ng(s,a,t.firstChild,r,u,f,!1)}function Dy(t,r,s,a,u,f){const E=s[li],P=E[xi].projection[a.projection];if(Array.isArray(P))for(let U=0;U<P.length;U++)Wl(r,t,u,P[U],f);else{let U=P;const Y=E[Ar];Ht(a)&&(U.flags|=128),ng(t,r,U,Y,u,f,!0)}}function Py(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function rg(t,r,s){const{mergedAttrs:a,classes:u,styles:f}=s;null!==a&&Ce(t,r,a),null!==u&&Py(t,r,u),null!==f&&function Sy(t,r,s){t.setAttribute(r,"style",s)}(t,r,f)}const Ir={};function ig(t=1){by(ar(),_t(),Jn()+t,!1)}function by(t,r,s,a){if(!a)if(3==(3&r[mn])){const f=t.preOrderCheckHooks;null!==f&&Zd(r,f,s)}else{const f=t.preOrderHooks;null!==f&&iu(r,f,0,s)}ui(s)}function Hl(t,r=bn.Default){const s=_t();return null===s?cr(t,r):Rl(Or(),s,Ft(t),r)}function Ry(){throw new Error("invalid")}function sg(t,r,s,a,u,f){const E=Ie(null);try{let I=null;u&oe.SignalBased&&(I=r[a][G]),null!==I&&void 0!==I.transformFn&&(f=I.transformFn(f)),u&oe.HasDecoratorInputTransform&&(f=t.inputTransforms[a].call(r,f)),null!==t.setInput?t.setInput(r,I,f,s,a):Xh(r,I,a,f)}finally{Ie(E)}}function Dh(t,r,s,a,u,f,E,I,P,U,Y){const ae=r.blueprint.slice();return ae[Qr]=u,ae[mn]=204|a,(null!==U||t&&2048&t[mn])&&(ae[mn]|=2048),Js(ae),ae[Ar]=ae[qs]=t,ae[or]=s,ae[Gi]=E||t&&t[Gi],ae[An]=I||t&&t[An],ae[ki]=P||t&&t[ki]||null,ae[xi]=f,ae[is]=function Lp(){return km++}(),ae[Ni]=Y,ae[Qi]=U,ae[li]=2==r.type?t[li]:ae,ae}function zl(t,r,s,a,u){let f=t.data[r];if(null===f)f=function xf(t,r,s,a,u){const f=Lr(),E=to(),P=t.data[r]=function $E(t,r,s,a,u,f){let E=r?r.injectorIndex:-1,I=0;return function Ko(){return null!==Mn.skipHydrationRootTNode}()&&(I|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:E,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:I,providerIndexes:0,value:u,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,E?f:f&&f.parent,s,r,a,u);return null===t.firstChild&&(t.firstChild=P),null!==f&&(E?null==f.child&&null!==P.parent&&(f.child=P):null===f.next&&(f.next=P,P.prev=f)),P}(t,r,s,a,u),function K(){return Mn.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=s,f.value=a,f.attrs=u;const E=function ya(){const t=Mn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();f.injectorIndex=null===E?-1:E.injectorIndex}return po(f,!0),f}function Vu(t,r,s,a){if(0===s)return-1;const u=r.length;for(let f=0;f<s;f++)r.push(a),t.blueprint.push(a),t.data.push(null);return u}function dl(t,r,s,a,u){const f=Jn(),E=2&a;try{ui(-1),E&&r.length>sn&&by(t,r,sn,!1),Uo(E?2:0,u),s(a,u)}finally{ui(f),Uo(E?3:1,u)}}function Nf(t,r,s){if(Os(r)){const a=Ie(null);try{const f=r.directiveEnd;for(let E=r.directiveStart;E<f;E++){const I=t.data[E];I.contentQueries&&I.contentQueries(1,s[E],E)}}finally{Ie(a)}}}function ql(t,r,s){wo()&&(function qE(t,r,s,a){const u=s.directiveStart,f=s.directiveEnd;Fi(s)&&function n_(t,r,s){const a=dr(r,t),u=qm(s);let E=16;s.signals?E=4096:s.onPush&&(E=64);const I=Ah(t,Dh(t,u,null,E,a,r,null,t[Gi].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=I}(r,s,t.data[u+s.componentOffset]),t.firstCreatePass||Zu(s,r),l(a,r);const E=s.initialInputs;for(let I=u;I<f;I++){const P=t.data[I],U=Ol(r,t,I,s);l(U,r),null!==E&&i_(0,I-u,U,P,0,E),Li(P)&&(ks(s.index,r)[or]=Ol(r,t,I,s))}}(t,r,s,dr(s,r)),64==(64&s.flags)&&lg(t,r,s))}function Kl(t,r,s=dr){const a=r.localNames;if(null!==a){let u=r.index+1;for(let f=0;f<a.length;f+=2){const E=a[f+1],I=-1===E?s(r,t):t[E];t[u++]=I}}}function qm(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Yl(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function Yl(t,r,s,a,u,f,E,I,P,U,Y){const ae=sn+a,Ae=ae+u,ke=function UE(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:Ir);return s}(ae,Ae),dt="function"==typeof U?U():U;return ke[kt]={type:t,blueprint:ke,template:s,queries:null,viewQuery:I,declTNode:r,data:ke.slice().fill(null,ae),bindingStartIndex:ae,expandoStartIndex:Ae,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof E?E():E,firstChild:null,schemas:P,consts:dt,incompleteFirstPass:!1,ssrId:Y}}let og=()=>null;function ag(t,r,s,a,u){for(let f in r){if(!r.hasOwnProperty(f))continue;const E=r[f];if(void 0===E)continue;a??={};let I,P=oe.None;Array.isArray(E)?(I=E[0],P=E[1]):I=E;let U=f;if(null!==u){if(!u.hasOwnProperty(f))continue;U=u[f]}0===t?cg(a,s,U,I,P):cg(a,s,U,I)}return a}function cg(t,r,s,a,u){let f;t.hasOwnProperty(s)?(f=t[s]).push(r,a):f=t[s]=[r,a],void 0!==u&&f.push(u)}function Ha(t,r,s,a,u,f,E,I){const P=dr(r,s);let Y,U=r.inputs;!I&&null!=U&&(Y=U[a])?(Ff(t,s,Y,a,u),Fi(r)&&function xy(t,r){const s=ks(r,t);16&s[mn]||(s[mn]|=64)}(s,r.index)):3&r.type&&(a=function Oy(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),u=null!=E?E(u,r.value||"",a):u,f.setProperty(P,a,u))}function ug(t,r,s,a){if(wo()){const u=null===a?null:{"":-1},f=function Xm(t,r){const s=t.directiveRegistry;let a=null,u=null;if(s)for(let f=0;f<s.length;f++){const E=s[f];if(Ti(r,E.selectors,!1))if(a||(a=[]),Li(E))if(null!==E.findHostDirectiveDefs){const I=[];u=u||new Map,E.findHostDirectiveDefs(E,I,u),a.unshift(...I,E),Zm(t,r,I.length)}else a.unshift(E),Zm(t,r,0);else u=u||new Map,E.findHostDirectiveDefs?.(E,a,u),a.push(E)}return null===a?null:[a,u]}(t,s);let E,I;null===f?E=I=null:[E,I]=f,null!==E&&ky(t,r,s,E,u,I),u&&function e_(t,r,s){if(r){const a=t.localNames=[];for(let u=0;u<r.length;u+=2){const f=s[r[u+1]];if(null==f)throw new Lt(-301,!1);a.push(r[u],f)}}}(s,a,u)}s.mergedAttrs=xt(s.mergedAttrs,s.attrs)}function ky(t,r,s,a,u,f){for(let U=0;U<a.length;U++)uf(Zu(s,r),t,a[U].type);!function t_(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let U=0;U<a.length;U++){const Y=a[U];Y.providersResolver&&Y.providersResolver(Y)}let E=!1,I=!1,P=Vu(t,r,a.length,null);for(let U=0;U<a.length;U++){const Y=a[U];s.mergedAttrs=xt(s.mergedAttrs,Y.hostAttrs),Fy(t,s,r,P,Y),KE(P,Y,u),null!==Y.contentQueries&&(s.flags|=4),(null!==Y.hostBindings||null!==Y.hostAttrs||0!==Y.hostVars)&&(s.flags|=64);const ae=Y.type.prototype;!E&&(ae.ngOnChanges||ae.ngOnInit||ae.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),E=!0),!I&&(ae.ngOnChanges||ae.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),I=!0),P++}!function GE(t,r,s){const u=r.directiveEnd,f=t.data,E=r.attrs,I=[];let P=null,U=null;for(let Y=r.directiveStart;Y<u;Y++){const ae=f[Y],Ae=s?s.get(ae):null,dt=Ae?Ae.outputs:null;P=ag(0,ae.inputs,Y,P,Ae?Ae.inputs:null),U=ag(1,ae.outputs,Y,U,dt);const Mt=null===P||null===E||zn(r)?null:YE(P,Y,E);I.push(Mt)}null!==P&&(P.hasOwnProperty("class")&&(r.flags|=8),P.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=I,r.inputs=P,r.outputs=U}(t,s,f)}function lg(t,r,s){const a=s.directiveStart,u=s.directiveEnd,f=s.index,E=function fe(){return Mn.lFrame.currentDirectiveIndex}();try{ui(f);for(let I=a;I<u;I++){const P=t.data[I],U=r[I];rt(I),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&Jm(P,U)}}finally{ui(-1),rt(E)}}function Jm(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Zm(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function KE(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;Li(r)&&(s[""]=t)}}function Fy(t,r,s,a,u){t.data[a]=u;const f=u.factory||(u.factory=ac(u.type)),E=new Sl(f,Li(u),Hl);t.blueprint[a]=E,s[a]=E,function HE(t,r,s,a,u){const f=u.hostBindings;if(f){let E=t.hostBindingOpCodes;null===E&&(E=t.hostBindingOpCodes=[]);const I=~r.index;(function zE(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(E)!=I&&E.push(I),E.push(s,a,f)}}(t,r,a,Vu(t,s,u.hostVars,Ir),u)}function hu(t,r,s,a,u,f){const E=dr(t,r);!function r_(t,r,s,a,u,f,E){if(null==f)t.removeAttribute(r,u,s);else{const I=null==E?ir(f):E(f,a||"",u);t.setAttribute(r,u,I,s)}}(r[An],E,f,t.value,s,a,u)}function i_(t,r,s,a,u,f){const E=f[r];if(null!==E)for(let I=0;I<E.length;)sg(a,s,E[I++],E[I++],E[I++],E[I++])}function YE(t,r,s){let a=null,u=0;for(;u<s.length;){const f=s[u];if(0!==f)if(5!==f){if("number"==typeof f)break;if(t.hasOwnProperty(f)){null===a&&(a=[]);const E=t[f];for(let I=0;I<E.length;I+=3)if(E[I]===r){a.push(f,E[I+1],E[I+2],s[u+1]);break}}u+=2}else u+=2;else u+=4}return a}function dg(t,r,s,a){return[t,!0,0,r,null,a,null,s,null,null]}function Ly(t,r){const s=t.contentQueries;if(null!==s){const a=Ie(null);try{for(let u=0;u<s.length;u+=2){const E=s[u+1];if(-1!==E){const I=t.data[E];Xr(s[u]),I.contentQueries(2,r[E],E)}}}finally{Ie(a)}}}function Ah(t,r){return t[Pi]?t[ho][Yi]=r:t[Pi]=r,t[ho]=r,r}function s_(t,r,s){Xr(0);const a=Ie(null);try{r(t,s)}finally{Ie(a)}}function hg(t){return t[$i]||(t[$i]=[])}function fg(t){return t.cleanup||(t.cleanup=[])}function kf(t,r){const s=t[ki],a=s?s.get(Lu,null):null;a&&a.handleError(r)}function Ff(t,r,s,a,u){for(let f=0;f<s.length;){const E=s[f++],I=s[f++],P=s[f++];sg(t.data[E],r[E],a,I,P,u)}}function o_(t,r){const s=ks(r,t),a=s[kt];!function fl(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const u=s[Qr];null!==u&&null===s[Ni]&&(s[Ni]=Du(u,s[ki])),Lf(a,s,s[or])}function Lf(t,r,s){Kn(r);try{const a=t.viewQuery;null!==a&&s_(1,a,s);const u=t.template;null!==u&&dl(t,r,u,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),r[bi]?.finishViewCreation(t),t.staticContentQueries&&Ly(t,r),t.staticViewQueries&&s_(2,t.viewQuery,s);const f=t.components;null!==f&&function QE(t,r){for(let s=0;s<r.length;s++)o_(t,r[s])}(r,f)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[mn]&=-5,zi()}}function Sh(t,r){return!r||null===r.firstChild||Ht(t)}function bd(t,r,s,a=!0){const u=r[kt];if(function Iy(t,r,s,a){const u=di+a,f=s.length;a>0&&(s[u-1][Yi]=r),a<f-di?(r[Yi]=s[u],yl(s,di+a,r)):(s.push(r),r[Yi]=null),r[Ar]=s;const E=r[Ps];null!==E&&s!==E&&function kE(t,r){const s=t[Oo];r[li]!==r[Ar][Ar][li]&&(t[mn]|=ys.HasTransplantedViews),null===s?t[Oo]=[r]:s.push(r)}(E,r);const I=r[bi];null!==I&&I.insertView(t),Oa(r),r[mn]|=128}(u,r,t,s),a){const E=Of(s,t),I=r[An],P=Mf(I,t[Wi]);null!==P&&function Kp(t,r,s,a,u,f){a[Qr]=u,a[xi]=r,ll(t,a,s,1,u,f)}(u,t[xi],I,r,P,E)}const f=r[Ni];null!==f&&null!==f.firstChild&&(f.firstChild=null)}function Rd(t,r,s,a,u=!1){for(;null!==s;){const f=r[s.index];null!==f&&a.push(Fr(f)),Hi(f)&&By(f,a);const E=s.type;if(8&E)Rd(t,r,s.child,a);else if(32&E){const I=Wp(s,r);let P;for(;P=I();)a.push(P)}else if(16&E){const I=Ty(r,s);if(Array.isArray(I))a.push(...I);else{const P=$s(r[li]);Rd(P[kt],P,I,a,!0)}}s=u?s.projectionNext:s.next}return a}function By(t,r){for(let s=di;s<t.length;s++){const a=t[s],u=a[kt].firstChild;null!==u&&Rd(a[kt],a,u,r)}t[Wi]!==t[Qr]&&r.push(t[Wi])}let pg=[];const u_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{zo(t.lView)},consumerOnSignalRead(){this.lView[Rs]=this}};function Gy(t){return Wy(t[Pi])}function gg(t){return Wy(t[Yi])}function Wy(t){for(;null!==t&&!Hi(t);)t=t[Yi];return t}function Ph(t,r=!0,s=0){const a=t[Gi],u=a.rendererFactory;u.begin?.();try{!function l_(t,r){Mh(t,r);let s=0;for(;Xs(t);){if(100===s)throw new Lt(103,!1);s++,Mh(t,1)}}(t,s)}catch(E){throw r&&kf(t,E),E}finally{u.end?.(),a.inlineEffectRunner?.flush()}}function bh(t,r,s,a){const u=r[mn];if(256==(256&u))return;r[Gi].inlineEffectRunner?.flush(),Kn(r);let E=null,I=null;(function ZE(t){return 2!==t.type})(t)&&(I=function JE(t){return t[Rs]??function c_(t){const r=pg.pop()??Object.create(u_);return r.lView=t,r}(t)}(r),E=function pe(t){return t&&(t.nextProducerIndex=0),Ie(t)}(I));try{Js(r),function Ls(t){return Mn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&dl(t,r,s,2,a);const P=3==(3&u);if(P){const ae=t.preOrderCheckHooks;null!==ae&&Zd(r,ae,null)}else{const ae=t.preOrderHooks;null!==ae&&iu(r,ae,0,null),eh(r,0)}if(function Hy(t){for(let r=Gy(t);null!==r;r=gg(r)){if(!(r[mn]&ys.HasTransplantedViews))continue;const s=r[Oo];for(let a=0;a<s.length;a++){Co(s[a])}}}(r),_g(r,0),null!==t.contentQueries&&Ly(t,r),P){const ae=t.contentCheckHooks;null!==ae&&Zd(r,ae)}else{const ae=t.contentHooks;null!==ae&&iu(r,ae,1),eh(r,1)}!function My(t,r){const s=t.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const u=s[a];if(u<0)ui(~u);else{const f=u,E=s[++a],I=s[++a];H(E,f),I(2,r[f])}}}finally{ui(-1)}}(t,r);const U=t.components;null!==U&&zy(r,U,0);const Y=t.viewQuery;if(null!==Y&&s_(2,Y,a),P){const ae=t.viewCheckHooks;null!==ae&&Zd(r,ae)}else{const ae=t.viewHooks;null!==ae&&iu(r,ae,2),eh(r,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[Ro]){for(const ae of r[Ro])ae();r[Ro]=null}r[mn]&=-73}catch(P){throw zo(r),P}finally{null!==I&&(function Ue(t,r){if(Ie(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(wt(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)de(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(I,E),function jy(t){t.lView[Rs]!==t&&(t.lView=null,pg.push(t))}(I)),zi()}}function _g(t,r){for(let s=Gy(t);null!==s;s=gg(s))for(let a=di;a<s.length;a++)d_(s[a],r)}function Rh(t,r,s){d_(ks(r,t),s)}function d_(t,r){Io(t)&&Mh(t,r)}function Mh(t,r){const a=t[kt],u=t[mn],f=t[Rs];let E=!!(0===r&&16&u);if(E||=!!(64&u&&0===r),E||=!!(1024&u),E||=!(!f?.dirty||!Ke(f)),f&&(f.dirty=!1),t[mn]&=-9217,E)bh(a,t,a.template,t[or]);else if(8192&u){_g(t,1);const I=a.components;null!==I&&zy(t,I,1)}}function zy(t,r,s){for(let a=0;a<r.length;a++)Rh(t,r[a],s)}function Vf(t){for(t[Gi].changeDetectionScheduler?.notify();t;){t[mn]|=64;const r=$s(t);if(sa(t)&&!r)return t;t=r}return null}class Uf{get rootNodes(){const r=this._lView,s=r[kt];return Rd(s,r,s.firstChild,[])}constructor(r,s,a=!0){this._lView=r,this._cdRefInjectingView=s,this.notifyErrorHandler=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[or]}set context(r){this._lView[or]=r}get destroyed(){return 256==(256&this._lView[mn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Ar];if(Hi(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Sf(r,a),Wc(s,a))}this._attachedToViewContainer=!1}Yp(this._lView[kt],this._lView)}onDestroy(r){xa(this._lView,r)}markForCheck(){Vf(this._cdRefInjectingView||this._lView)}detach(){this._lView[mn]&=-129}reattach(){Oa(this._lView),this._lView[mn]|=128}detectChanges(){this._lView[mn]|=1024,Ph(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Lt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Th(this._lView[kt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Lt(902,!1);this._appRef=r,Oa(this._lView)}}let Bf=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=f_}return t})();const yg=Bf,h_=class extends yg{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const u=function Pd(t,r,s,a){const u=r.tView,I=Dh(t,u,s,4096&t[mn]?4096:16,null,r,null,null,null,a?.injector??null,a?.dehydratedView??null);I[Ps]=t[r.index];const U=t[bi];return null!==U&&(I[bi]=U.createEmbeddedView(u)),Lf(u,I,s),I}(this._declarationLView,this._declarationTContainer,r,{injector:s,dehydratedView:a});return new Uf(u)}};function f_(){return Oh(Or(),_t())}function Oh(t,r){return 4&t.type?new h_(r,t,jt(t,r)):null}class av{}class iI{}class ts{}class cv{resolveComponentFactory(r){throw function r0(t){const r=Error(`No component factory found for ${Fn(t)}.`);return r.ngComponent=t,r}(r)}}let Cg=(()=>{class t{static#e=this.NULL=new cv}return t})();class uv{}let lv=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function oI(){const t=_t(),s=ks(Or().index,t);return(ss(s)?s:t)[An]}()}return t})(),aI=(()=>{class t{static#e=this.\u0275prov=pr({token:t,providedIn:"root",factory:()=>null})}return t})();const T_={};function fv(t){return function dv(t){return"function"==typeof t&&void 0!==t[G]}(t)&&"function"==typeof t.set}function Bu(t){const r=Ie(null);try{return t()}finally{Ie(r)}}function D_(t){return!!A_(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function A_(t){return null!==t&&("function"==typeof t||"object"==typeof t)}class pv{constructor(){}supports(r){return D_(r)}create(r){return new mv(r)}}const gv=(t,r)=>r;class mv{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||gv}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,u=0,f=null;for(;s||a;){const E=!a||s&&s.currentIndex<Yf(a,u,f)?s:a,I=Yf(E,u,f),P=E.currentIndex;if(E===a)u--,a=a._nextRemoved;else if(s=s._next,null==E.previousIndex)u++;else{f||(f=[]);const U=I-u,Y=P-u;if(U!=Y){for(let Ae=0;Ae<U;Ae++){const ke=Ae<f.length?f[Ae]:f[Ae]=0,dt=ke+Ae;Y<=dt&&dt<U&&(f[Ae]=ke+1)}f[E.previousIndex]=Y-U}}I!==P&&r(E,I,P)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!D_(r))throw new Lt(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let u,f,E,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let I=0;I<this.length;I++)f=r[I],E=this._trackByFn(I,f),null!==s&&Object.is(s.trackById,E)?(a&&(s=this._verifyReinsertion(s,f,E,I)),Object.is(s.item,f)||this._addIdentityChange(s,f)):(s=this._mismatch(s,f,E,I),a=!0),s=s._next}else u=0,function wg(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,I=>{E=this._trackByFn(u,I),null!==s&&Object.is(s.trackById,E)?(a&&(s=this._verifyReinsertion(s,I,E,u)),Object.is(s.item,I)||this._addIdentityChange(s,I)):(s=this._mismatch(s,I,E,u),a=!0),s=s._next,u++}),this.length=u;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,u){let f;return null===r?f=this._itTail:(f=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,f,u)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,u))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,f,u)):r=this._addAfter(new Tg(s,a),f,u),r}_verifyReinsertion(r,s,a,u){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==f?r=this._reinsertAfter(f,r._prev,u):r.currentIndex!=u&&(r.currentIndex=u,this._addToMoves(r,u)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const u=r._prevRemoved,f=r._nextRemoved;return null===u?this._removalsHead=f:u._nextRemoved=f,null===f?this._removalsTail=u:f._prevRemoved=u,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const u=null===s?this._itHead:s._next;return r._next=u,r._prev=s,null===u?this._itTail=r:u._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new Xl),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Xl),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class Tg{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class Xl{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new cI,this.map.set(s,a)),a.add(r)}get(r,s){const u=this.map.get(r);return u?u.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yf(t,r,s){const a=t.previousIndex;if(null===a)return a;let u=0;return s&&a<s.length&&(u=s[a]),a+r+u}class Fh{constructor(){}supports(r){return r instanceof Map||A_(r)}create(){return new _v}}class _v{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||A_(r)))throw new Lt(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,u)=>{if(s&&s.key===u)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const f=this._getOrCreateRecordForKey(u,a);s=this._insertBeforeOrAppend(s,f)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const u=this._records.get(r);this._maybeAddToChanges(u,s);const f=u._prev,E=u._next;return f&&(f._next=E),E&&(E._prev=f),u._next=null,u._prev=null,u}const a=new S_(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class S_{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Dg(){return new Qf([new pv])}let Qf=(()=>{class t{static#e=this.\u0275prov=pr({token:t,providedIn:"root",factory:Dg});constructor(s){this.factories=s}static create(s,a){if(null!=a){const u=a.factories.slice();s=s.concat(u)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||Dg()),deps:[[t,new Xc,new wl]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(null!=a)return a;throw new Lt(901,!1)}}return t})();function Ag(){return new Jf([new Fh])}let Jf=(()=>{class t{static#e=this.\u0275prov=pr({token:t,providedIn:"root",factory:Ag});constructor(s){this.factories=s}static create(s,a){if(a){const u=a.factories.slice();s=s.concat(u)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||Ag()),deps:[[t,new Xc,new wl]]}}find(s){const a=this.factories.find(u=>u.supports(s));if(a)return a;throw new Lt(901,!1)}}return t})(),Zl=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Ev}return t})();function Ev(t){return function Iv(t,r,s){if(Fi(t)&&!s){const a=ks(t.index,r);return new Uf(a,a)}return 47&t.type?new Uf(r[li],r):null}(Or(),_t(),16==(16&t))}let Od=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Zf;static#t=this.__NG_ENV_ID__=s=>s}return t})();class Cv extends Od{constructor(r){super(),this._lView=r}onDestroy(r){return xa(this._lView,r),()=>function Bc(t,r){if(null===t[Ei])return;const s=t[Ei].indexOf(r);-1!==s&&t[Ei].splice(s,1)}(this._lView,r)}}function Zf(){return new Cv(_t())}const Lh=new Set;function xd(t){Lh.has(t)||(Lh.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Nd(...t){}class Us{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ii(!1),this.onMicrotaskEmpty=new ii(!1),this.onStable=new ii(!1),this.onError=new ii(!1),typeof Zone>"u")throw new Lt(908,!1);Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!a&&s,u.shouldCoalesceRunChangeDetection=a,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function u0(){const t="function"==typeof Yt.requestAnimationFrame;let r=Yt[t?"requestAnimationFrame":"setTimeout"],s=Yt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function dI(t){const r=()=>{!function lI(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Yt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Uh(t),t.isCheckStableRunning=!0,Vh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Uh(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,u,f,E,I)=>{if(function hI(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(I))return s.invokeTask(u,f,E,I);try{return Tv(t),s.invokeTask(u,f,E,I)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||t.shouldCoalesceRunChangeDetection)&&r(),Dv(t)}},onInvoke:(s,a,u,f,E,I,P)=>{try{return Tv(t),s.invoke(u,f,E,I,P)}finally{t.shouldCoalesceRunChangeDetection&&r(),Dv(t)}},onHasTask:(s,a,u,f)=>{s.hasTask(u,f),a===u&&("microTask"==f.change?(t._hasPendingMicrotasks=f.microTask,Uh(t),Vh(t)):"macroTask"==f.change&&(t.hasPendingMacrotasks=f.macroTask))},onHandleError:(s,a,u,f)=>(s.handleError(u,f),t.runOutsideAngular(()=>t.onError.emit(f)),!1)})}(u)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Us.isInAngularZone())throw new Lt(909,!1)}static assertNotInAngularZone(){if(Us.isInAngularZone())throw new Lt(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,u){const f=this._inner,E=f.scheduleEventTask("NgZoneEvent: "+u,r,uI,Nd,Nd);try{return f.runTask(E,s,a)}finally{f.cancelTask(E)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const uI={};function Vh(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Uh(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Tv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Dv(t){t._nesting--,Vh(t)}class tp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ii,this.onMicrotaskEmpty=new ii,this.onStable=new ii,this.onError=new ii}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,u){return r.apply(s,a)}}var td=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(td||{});const M_={destroy(){}};function x_(t,r){!r&&function So(t){if(!Wd()&&!function Ci(){return nc}())throw new Lt(-203,!1)}();const s=r?.injector??mr(la);if(!function cl(t){return"browser"===(t??mr(la)).get(T)}(s))return M_;xd("NgAfterNextRender");const a=s.get(rp),u=a.handler??=new np,f=r?.phase??td.MixedReadWrite,E=()=>{u.unregister(P),I()},I=s.get(Od).onDestroy(E),P=new Pg(s,f,()=>{E(),t()});return u.register(P),{destroy:E}}class Pg{constructor(r,s,a){this.phase=s,this.callbackFn=a,this.zone=r.get(Us),this.errorHandler=r.get(Lu,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(r){this.errorHandler?.handleError(r)}}}class np{constructor(){this.executingCallbacks=!1,this.buckets={[td.EarlyRead]:new Set,[td.Write]:new Set,[td.MixedReadWrite]:new Set,[td.Read]:new Set},this.deferredCallbacks=new Set}register(r){(this.executingCallbacks?this.deferredCallbacks:this.buckets[r.phase]).add(r)}unregister(r){this.buckets[r.phase].delete(r),this.deferredCallbacks.delete(r)}execute(){this.executingCallbacks=!0;for(const r of Object.values(this.buckets))for(const s of r)s.invoke();this.executingCallbacks=!1;for(const r of this.deferredCallbacks)this.buckets[r.phase].add(r);this.deferredCallbacks.clear()}destroy(){for(const r of Object.values(this.buckets))r.clear();this.deferredCallbacks.clear()}}let rp=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){const s=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const a of s)a();this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=pr({token:t,providedIn:"root",factory:()=>new t})}return t})();function kd(t){return!!oi(t)}function fu(t,r,s){let a=s?t.styles:null,u=s?t.classes:null,f=0;if(null!==r)for(let E=0;E<r.length;E++){const I=r[E];"number"==typeof I?f=I:1==f?u=Tr(u,I):2==f&&(a=Tr(a,I+": "+r[++E]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=u:t.classesWithoutHost=u}class Pv extends Cg{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Zn(r);return new ip(s,this.ngModule)}}function bv(t){const r=[];for(const s in t){if(!t.hasOwnProperty(s))continue;const a=t[s];void 0!==a&&r.push({propName:Array.isArray(a)?a[0]:a,templateName:s})}return r}class mI{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=ao(a);const u=this.injector.get(r,T_,a);return u!==T_||s===T_?u:this.parentInjector.get(r,s,a)}}class ip extends ts{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=bv(r.inputs);if(null!==s)for(const u of a)s.hasOwnProperty(u.propName)&&(u.transform=s[u.propName]);return a}get outputs(){return bv(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Di(t){return t.map(rs).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,u){let f=(u=u||this.ngModule)instanceof it?u:u?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const E=f?new mI(r,f):r,I=E.get(uv,null);if(null===I)throw new Lt(407,!1);const ae={rendererFactory:I,sanitizer:E.get(aI,null),inlineEffectRunner:null,afterRenderEventManager:E.get(rp,null),changeDetectionScheduler:E.get(av,null)},Ae=I.createRenderer(null,this.componentDef),ke=this.componentDef.selectors[0][0]||"div",dt=a?function BE(t,r,s,a){const f=a.get(_f,!1)||s===En.ShadowDom,E=t.selectRootElement(r,f);return function Km(t){og(t)}(E),E}(Ae,a,this.componentDef.encapsulation,E):qp(Ae,ke,function gI(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(ke));let Mt=512;this.componentDef.signals?Mt|=4096:this.componentDef.onPush||(Mt|=16);let zt=null;null!==dt&&(zt=Du(dt,E,!0));const In=Yl(0,null,null,1,0,null,null,null,null,null,null),Rt=Dh(null,In,null,Mt,null,null,ae,Ae,E,null,zt);let Cr,fi;Kn(Rt);try{const yi=this.componentDef;let ba,um=null;yi.findHostDirectiveDefs?(ba=[],um=new Map,yi.findHostDirectiveDefs(yi,ba,um),ba.push(yi)):ba=[yi];const fM=function Mv(t,r){const s=t[kt],a=sn;return t[a]=r,zl(s,a,2,"#host",null)}(Rt,dt),pM=function _I(t,r,s,a,u,f,E){const I=u[kt];!function yI(t,r,s,a){for(const u of t)r.mergedAttrs=xt(r.mergedAttrs,u.hostAttrs);null!==r.mergedAttrs&&(fu(r,r.mergedAttrs,!0),null!==s&&rg(a,s,r))}(a,t,r,E);let P=null;null!==r&&(P=Du(r,u[ki]));const U=f.rendererFactory.createRenderer(r,s);let Y=16;s.signals?Y=4096:s.onPush&&(Y=64);const ae=Dh(u,qm(s),null,Y,u[t.index],t,f,U,null,null,P);return I.firstCreatePass&&Zm(I,t,a.length-1),Ah(u,ae),u[t.index]=ae}(fM,dt,yi,ba,Rt,ae,Ae);fi=Ji(In,sn),dt&&function vI(t,r,s,a){if(a)Ce(t,s,["ng-version","17.2.2"]);else{const{attrs:u,classes:f}=function si(t){const r=[],s=[];let a=1,u=2;for(;a<t.length;){let f=t[a];if("string"==typeof f)2===u?""!==f&&r.push(f,t[++a]):8===u&&s.push(f);else{if(!Vn(u))break;u=f}a++}return{attrs:r,classes:s}}(r.selectors[0]);u&&Ce(t,s,u),f&&f.length>0&&Py(t,s,f.join(" "))}}(Ae,yi,dt,a),void 0!==s&&function jh(t,r,s){const a=t.projection=[];for(let u=0;u<r.length;u++){const f=s[u];a.push(null!=f?Array.from(f):null)}}(fi,this.ngContentSelectors,s),Cr=function Ov(t,r,s,a,u,f){const E=Or(),I=u[kt],P=dr(E,u);ky(I,u,E,s,null,a);for(let Y=0;Y<s.length;Y++)l(Ol(u,I,E.directiveStart+Y,E),u);lg(I,u,E),P&&l(P,u);const U=Ol(u,I,E.directiveStart+E.componentOffset,E);if(t[or]=u[or]=U,null!==f)for(const Y of f)Y(U,r);return Nf(I,E,u),U}(pM,yi,ba,um,Rt,[N_]),Lf(In,Rt,null)}finally{zi()}return new Rv(this.componentType,Cr,jt(fi,Rt),Rt,fi)}}class Rv extends iI{constructor(r,s,a,u,f){super(),this.location=a,this._rootLView=u,this._tNode=f,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new Uf(u,void 0,!1),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let u;if(null!==a&&(u=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const f=this._rootLView;Ff(f[kt],f,u,r,s),this.previousInputValues.set(r,s),Vf(ks(this._tNode.index,f))}}get injector(){return new Ws(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function N_(){const t=Or();Mc(_t()[kt],t)}let k_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=EI}return t})();function EI(){return CI(Or(),_t())}const II=k_,xv=class extends II{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return jt(this._hostTNode,this._hostLView)}get injector(){return new Ws(this._hostTNode,this._hostLView)}get parentInjector(){const r=ih(this._hostTNode,this._hostLView);if(_d(r)){const s=ou(r,this._hostLView),a=us(r);return new Ws(s[kt].data[a+8],s)}return new Ws(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Nv(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-di}createEmbeddedView(r,s,a){let u,f;"number"==typeof a?u=a:null!=a&&(u=a.index,f=a.injector);const I=r.createEmbeddedViewImpl(s||{},f,null);return this.insertImpl(I,u,Sh(this._hostTNode,null)),I}createComponent(r,s,a,u,f){const E=r&&!function Rc(t){return"function"==typeof t}(r);let I;if(E)I=s;else{const dt=s||{};I=dt.index,a=dt.injector,u=dt.projectableNodes,f=dt.environmentInjector||dt.ngModuleRef}const P=E?r:new ip(Zn(r)),U=a||this.parentInjector;if(!f&&null==P.ngModule){const Mt=(E?U:this.parentInjector).get(it,null);Mt&&(f=Mt)}Zn(P.componentType??{});const ke=P.create(U,u,null,f);return this.insertImpl(ke.hostView,I,Sh(this._hostTNode,null)),ke}insert(r,s){return this.insertImpl(r,s,!0)}insertImpl(r,s,a){const u=r._lView;if(function gc(t){return Hi(t[Ar])}(u)){const I=this.indexOf(r);if(-1!==I)this.detach(I);else{const P=u[Ar],U=new xv(P,P[xi],P[Ar]);U.detach(U.indexOf(r))}}const f=this._adjustIndex(s),E=this._lContainer;return bd(E,u,f,a),r.attachToViewContainerRef(),yl(F_(E),f,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Nv(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Sf(this._lContainer,s);a&&(Wc(F_(this._lContainer),s),Yp(a[kt],a))}detach(r){const s=this._adjustIndex(r,-1),a=Sf(this._lContainer,s);return a&&null!=Wc(F_(this._lContainer),s)?new Uf(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function Nv(t){return t[8]}function F_(t){return t[8]||(t[8]=[])}function CI(t,r){let s;const a=r[t.index];return Hi(a)?s=a:(s=dg(a,r,null,t),r[t.index]=s,Ah(r,s)),wI(s,r,t,a),new xv(s,t,r)}let wI=function Lv(t,r,s,a){if(t[Wi])return;let u;u=8&s.type?Fr(a):function d0(t,r){const s=t[An],a=s.createComment(""),u=dr(r,t);return Fc(s,Mf(s,u),a,function Gm(t,r){return t.nextSibling(r)}(s,u),!1),a}(r,s),t[Wi]=u},kv=()=>!1;class Mg{constructor(r){this.queryList=r,this.matches=null}clone(){return new Mg(this.queryList)}setDirty(){this.queryList.setDirty()}}class ju{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,u=[];for(let f=0;f<a;f++){const E=s.getByIndex(f);u.push(this.queries[E.indexInDeclarationView].clone())}return new ju(u)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}finishViewCreation(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==xg(r,s).matches&&this.queries[s].setDirty()}}class Vv{constructor(r,s,a=null){this.flags=s,this.read=a,this.predicate="string"==typeof r?function f0(t){return t.split(",").map(r=>r.trim())}(r):r}}class L_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const u=null!==s?s.length:0,f=this.getByIndex(a).embeddedTView(r,u);f&&(f.indexInDeclarationView=a,null!==s?s.push(f):s=[f])}return null!==s?new L_(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class V_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new V_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let u=0;u<a.length;u++){const f=a[u];this.matchTNodeWithReadOption(r,s,AI(s,f)),this.matchTNodeWithReadOption(r,s,lf(s,r,f,!1,!1))}else a===Bf?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,lf(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const u=this.metadata.read;if(null!==u)if(u===ct||u===k_||u===Bf&&4&s.type)this.addMatch(s.index,-2);else{const f=lf(s,r,u,!1,!1);null!==f&&this.addMatch(s.index,f)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function AI(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function PI(t,r,s,a){return-1===s?function SI(t,r){return 11&t.type?jt(t,r):4&t.type?Oh(t,r):null}(r,t):-2===s?function bI(t,r,s){return s===ct?jt(r,t):s===Bf?Oh(r,t):s===k_?CI(r,t):void 0}(t,r,a):Ol(t,t[kt],s,r)}function RI(t,r,s,a){const u=r[bi].queries[a];if(null===u.matches){const f=t.data,E=s.matches,I=[];for(let P=0;null!==E&&P<E.length;P+=2){const U=E[P];I.push(U<0?null:PI(r,f[U],E[P+1],s.metadata.read))}u.matches=I}return u.matches}function Uv(t,r,s,a){const u=t.queries.getByIndex(s),f=u.matches;if(null!==f){const E=RI(t,r,u,s);for(let I=0;I<f.length;I+=2){const P=f[I];if(P>0)a.push(E[I/2]);else{const U=f[I+1],Y=r[-P];for(let ae=di;ae<Y.length;ae++){const Ae=Y[ae];Ae[Ps]===Ae[Ar]&&Uv(Ae[kt],Ae,U,a)}if(null!==Y[Oo]){const ae=Y[Oo];for(let Ae=0;Ae<ae.length;Ae++){const ke=ae[Ae];Uv(ke[kt],ke,U,a)}}}}}return a}function Bv(t,r,s){const a=new fn(4==(4&s));return function jE(t,r,s,a){const u=hg(r);u.push(s),t.firstCreatePass&&fg(t).push(a,u.length-1)}(t,r,a,a.destroy),(r[bi]??=new ju).queries.push(new Mg(a))-1}function xI(t,r,s){null===t.queries&&(t.queries=new L_),t.queries.track(new V_(r,s))}function xg(t,r){return t.queries.getByIndex(r)}function NI(t,r){const s=t[kt],a=xg(s,r);return a.crossesNgTemplate?Uv(s,t,r,[]):RI(s,t,a,r)}function Bg(t){let r=function W_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let u;if(Li(t))u=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Lt(903,!1);u=r.\u0275dir}if(u){if(s){a.push(u);const E=t;E.inputs=cp(t.inputs),E.inputTransforms=cp(t.inputTransforms),E.declaredInputs=cp(t.declaredInputs),E.outputs=cp(t.outputs);const I=u.hostBindings;I&&Xv(t,I);const P=u.viewQuery,U=u.contentQueries;if(P&&HI(t,P),U&&zI(t,U),WI(t,u),Xe(t.outputs,u.outputs),Li(u)&&u.data.animation){const Y=t.data;Y.animation=(Y.animation||[]).concat(u.data.animation)}}const f=u.features;if(f)for(let E=0;E<f.length;E++){const I=f[E];I&&I.ngInherit&&I(t),I===Bg&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Jv(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const u=t[a];u.hostVars=r+=u.hostVars,u.hostAttrs=xt(u.hostAttrs,s=xt(s,u.hostAttrs))}}(a)}function WI(t,r){for(const s in r.inputs){if(!r.inputs.hasOwnProperty(s)||t.inputs.hasOwnProperty(s))continue;const a=r.inputs[s];if(void 0!==a&&(t.inputs[s]=a,t.declaredInputs[s]=r.declaredInputs[s],null!==r.inputTransforms)){const u=Array.isArray(a)?a[0]:a;if(!r.inputTransforms.hasOwnProperty(u))continue;t.inputTransforms??={},t.inputTransforms[u]=r.inputTransforms[u]}}}function cp(t){return t===Ln?{}:t===Re?[]:t}function HI(t,r){const s=t.viewQuery;t.viewQuery=s?(a,u)=>{r(a,u),s(a,u)}:r}function zI(t,r){const s=t.contentQueries;t.contentQueries=s?(a,u,f)=>{r(a,u,f),s(a,u,f)}:r}function Xv(t,r){const s=t.hostBindings;t.hostBindings=s?(a,u)=>{r(a,u),s(a,u)}:r}function nE(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const u=r[a];Array.isArray(u)&&u[3]&&(s[a]=u[3])}t.inputTransforms=s}class Vd{}class rE{}function XI(t,r){return new e(t,r??null,[])}class e extends Vd{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Pv(this);const u=oi(r);this._bootstrapComponents=Pa(u.bootstrap),this._r3Injector=Dp(r,s,[{provide:Vd,useValue:this},{provide:Cg,useValue:this.componentFactoryResolver},...a],Fn(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class n extends rE{constructor(r){super(),this.moduleType=r}create(r){return new e(this.moduleType,r,[])}}class c extends Vd{constructor(r){super(),this.componentFactoryResolver=new Pv(this),this.instance=null;const s=new At([...r.providers,{provide:Vd,useValue:this},{provide:Cg,useValue:this.componentFactoryResolver}],r.parent||Me(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function h(t,r,s=null){return new c({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let R=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Wn.g(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function N(t,r,s){return t[r]=s}function J(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function ue(t,r,s,a){const u=J(t,r,s);return J(t,r+1,a)||u}function Jt(t,r,s,a,u,f,E,I){const P=_t(),U=ar(),Y=t+sn,ae=U.firstCreatePass?function Ut(t,r,s,a,u,f,E,I,P){const U=r.consts,Y=zl(r,t,4,E||null,ds(U,I));ug(r,s,Y,ds(U,P)),Mc(r,Y);const ae=Y.tView=Yl(2,Y,a,u,f,r.directiveRegistry,r.pipeRegistry,null,r.schemas,U,null);return null!==r.queries&&(r.queries.template(r,Y),ae.queries=r.queries.embeddedTView(Y)),Y}(Y,U,P,r,s,a,u,f,E):U.data[Y];po(ae,!1);const Ae=Qt(U,P,ae,t);nn()&&eg(U,P,Ae,ae),l(Ae,P);const ke=dg(Ae,P,Ae,ae);return P[Y]=ke,Ah(P,ke),function Fv(t,r,s){return kv(t,r,s)}(ke,ae,P),xs(ae)&&ql(U,P,ae),null!=E&&Kl(P,ae,I),Jt}let Qt=function xn(t,r,s,a){return un(!0),r[An].createComment("")};function cC(t,r,s,a){const u=_t();return J(u,Er(),r)&&(ar(),hu(er(),u,t,r,s,a)),cC}function cE(t,r){return t<<17|r<<2}function zh(t){return t>>17&32767}function uC(t){return 2|t}function dp(t){return(131068&t)>>2}function lC(t,r){return-131069&t|r<<2}function dC(t){return 1|t}function Q0(t,r,s,a){const u=t[s+1],f=null===r;let E=a?zh(u):dp(u),I=!1;for(;0!==E&&(!1===I||f);){const U=t[E+1];BA(t[E],r)&&(I=!0,t[E+1]=a?dC(U):uC(U)),E=a?zh(U):dp(U)}I&&(t[s+1]=a?uC(u):dC(u))}function BA(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&Sn(t,r)>=0}function hC(t,r,s){const a=_t();return J(a,Er(),r)&&Ha(ar(),er(),a,t,r,a[An],s,!1),hC}function fC(t,r,s,a,u){const E=u?"class":"style";Ff(t,s,r.inputs[E],E,a)}function pC(t,r){return function ml(t,r,s,a){const u=_t(),f=ar(),E=function D(t){const r=Mn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}(2);f.firstUpdatePass&&function sw(t,r,s,a){const u=t.data;if(null===u[s+1]){const f=u[Jn()],E=function iw(t,r){return r>=t.expandoStartIndex}(t,s);(function uw(t,r){return 0!=(t.flags&(r?8:16))})(f,a)&&null===r&&!E&&(r=!1),r=function YA(t,r,s,a){const u=function pt(t){const r=Mn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let f=a?r.residualClasses:r.residualStyles;if(null===u)0===(a?r.classBindings:r.styleBindings)&&(s=K_(s=gC(null,t,r,s,a),r.attrs,a),f=null);else{const E=r.directiveStylingLast;if(-1===E||t[E]!==u)if(s=gC(u,t,r,s,a),null===f){let P=function QA(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==dp(a))return t[zh(a)]}(t,r,a);void 0!==P&&Array.isArray(P)&&(P=gC(null,t,r,P[1],a),P=K_(P,r.attrs,a),function JA(t,r,s,a){t[zh(s?r.classBindings:r.styleBindings)]=a}(t,r,a,P))}else f=function XA(t,r,s){let a;const u=r.directiveEnd;for(let f=1+r.directiveStylingLast;f<u;f++)a=K_(a,t[f].hostAttrs,s);return K_(a,r.attrs,s)}(t,r,a)}return void 0!==f&&(a?r.residualClasses=f:r.residualStyles=f),s}(u,f,r,a),function VA(t,r,s,a,u,f){let E=f?r.classBindings:r.styleBindings,I=zh(E),P=dp(E);t[a]=s;let Y,U=!1;if(Array.isArray(s)?(Y=s[1],(null===Y||Sn(s,Y)>0)&&(U=!0)):Y=s,u)if(0!==P){const Ae=zh(t[I+1]);t[a+1]=cE(Ae,I),0!==Ae&&(t[Ae+1]=lC(t[Ae+1],a)),t[I+1]=function FA(t,r){return 131071&t|r<<17}(t[I+1],a)}else t[a+1]=cE(I,0),0!==I&&(t[I+1]=lC(t[I+1],a)),I=a;else t[a+1]=cE(P,0),0===I?I=a:t[P+1]=lC(t[P+1],a),P=a;U&&(t[a+1]=uC(t[a+1])),Q0(t,Y,a,!0),Q0(t,Y,a,!1),function UA(t,r,s,a,u){const f=u?t.residualClasses:t.residualStyles;null!=f&&"string"==typeof r&&Sn(f,r)>=0&&(s[a+1]=dC(s[a+1]))}(r,Y,t,a,f),E=cE(I,P),f?r.classBindings=E:r.styleBindings=E}(u,f,r,s,E,a)}}(f,t,E,a),r!==Ir&&J(u,E,r)&&function aw(t,r,s,a,u,f,E,I){if(!(3&r.type))return;const P=t.data,U=P[I+1],Y=function LA(t){return 1==(1&t)}(U)?cw(P,r,s,u,dp(U),E):void 0;uE(Y)||(uE(f)||function kA(t){return 2==(2&t)}(U)&&(f=cw(P,null,s,u,I,E)),function Ay(t,r,s,a,u){if(r)u?t.addClass(s,a):t.removeClass(s,a);else{let f=-1===a.indexOf("-")?void 0:Af.DashCase;null==u?t.removeStyle(s,a,f):("string"==typeof u&&u.endsWith("!important")&&(u=u.slice(0,-10),f|=Af.Important),t.setStyle(s,a,u,f))}}(a,E,xo(Jn(),s),u,f))}(f,f.data[Jn()],u,u[An],t,u[E+1]=function nS(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Fn(uu(t)))),t}(r,s),a,E)}(t,r,null,!0),pC}function gC(t,r,s,a,u){let f=null;const E=s.directiveEnd;let I=s.directiveStylingLast;for(-1===I?I=s.directiveStart:I++;I<E&&(f=r[I],a=K_(a,f.hostAttrs,u),f!==t);)I++;return null!==t&&(s.directiveStylingLast=I),a}function K_(t,r,s){const a=s?1:2;let u=-1;if(null!==r)for(let f=0;f<r.length;f++){const E=r[f];"number"==typeof E?u=E:u===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Vr(t,E,!!s||r[++f]))}return void 0===t?null:t}function cw(t,r,s,a,u,f){const E=null===r;let I;for(;u>0;){const P=t[u],U=Array.isArray(P),Y=U?P[1]:P,ae=null===Y;let Ae=s[u+1];Ae===Ir&&(Ae=ae?Re:void 0);let ke=ae?ec(Ae,a):Y===a?Ae:void 0;if(U&&!uE(ke)&&(ke=ec(P,a)),uE(ke)&&(I=ke,E))return I;const dt=t[u+1];u=E?zh(dt):dp(dt)}if(null!==r){let P=f?r.residualClasses:r.residualStyles;null!=P&&(I=ec(P,a))}return I}function uE(t){return void 0!==t}function lE(t,r,s,a){const u=_t(),f=ar(),E=sn+t,I=u[An],P=f.firstCreatePass?function DS(t,r,s,a,u,f){const E=r.consts,P=zl(r,t,2,a,ds(E,u));return ug(r,s,P,ds(E,f)),null!==P.attrs&&fu(P,P.attrs,!1),null!==P.mergedAttrs&&fu(P,P.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,P),P}(E,f,u,r,s,a):f.data[E],U=fw(f,u,P,I,r,t);u[E]=U;const Y=xs(P);return po(P,!0),rg(I,U,P),32!=(32&P.flags)&&nn()&&eg(f,u,U,P),0===function _a(){return Mn.lFrame.elementDepthCount}()&&l(U,u),function mc(){Mn.lFrame.elementDepthCount++}(),Y&&(ql(f,u,P),Nf(f,P,u)),null!==a&&Kl(u,P),lE}function dE(){let t=Or();to()?function $c(){Mn.lFrame.isParent=!1}():(t=t.parent,po(t,!1));const r=t;(function Es(t){return Mn.skipHydrationRootTNode===t})(r)&&function jc(){Mn.skipHydrationRootTNode=null}(),function qo(){Mn.lFrame.elementDepthCount--}();const s=ar();return s.firstCreatePass&&(Mc(s,t),Os(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function nh(t){return 0!=(8&t.flags)}(r)&&fC(s,r,_t(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function sf(t){return 0!=(16&t.flags)}(r)&&fC(s,r,_t(),r.stylesWithoutHost,!1),dE}function EC(t,r,s,a){return lE(t,r,s,a),dE(),EC}let fw=(t,r,s,a,u,f)=>(un(!0),qp(a,u,function no(){return Mn.lFrame.currentNamespace}()));function mw(){return _t()}const hp=void 0;var OS=["en",[["a","p"],["AM","PM"],hp],[["AM","PM"],hp,hp],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hp,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hp,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hp,"{1} 'at' {0}",hp],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function MS(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let rm={};function wC(t){const r=function xS(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=Ew(r);if(s)return s;const a=r.split("-")[0];if(s=Ew(a),s)return s;if("en"===a)return OS;throw new Lt(701,!1)}function vw(t){return wC(t)[im.PluralCase]}function Ew(t){return t in rm||(rm[t]=Yt.ng&&Yt.ng.common&&Yt.ng.common.locales&&Yt.ng.common.locales[t]),rm[t]}var im=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(im||{});const sm="en-US";let Iw=sm;function AC(t,r,s,a){const u=_t(),f=ar(),E=Or();return SC(f,u,u[An],E,t,r,a),AC}function SC(t,r,s,a,u,f,E){const I=xs(a),U=t.firstCreatePass&&fg(t),Y=r[or],ae=hg(r);let Ae=!0;if(3&a.type||E){const Mt=dr(a,r),zt=E?E(Mt):Mt,In=ae.length,Rt=E?fi=>E(Fr(fi[a.index])):a.index;let Cr=null;if(!E&&I&&(Cr=function SP(t,r,s,a){const u=t.cleanup;if(null!=u)for(let f=0;f<u.length-1;f+=2){const E=u[f];if(E===s&&u[f+1]===a){const I=r[$i],P=u[f+2];return I.length>P?I[P]:null}"string"==typeof E&&(f+=2)}return null}(t,r,u,a.index)),null!==Cr)(Cr.__ngLastListenerFn__||Cr).__ngNextListenerFn__=f,Cr.__ngLastListenerFn__=f,Ae=!1;else{f=Kw(a,r,Y,f,!1);const fi=s.listen(zt,u,f);ae.push(f,fi),U&&U.push(u,Rt,In,In+1)}}else f=Kw(a,r,Y,f,!1);const ke=a.outputs;let dt;if(Ae&&null!==ke&&(dt=ke[u])){const Mt=dt.length;if(Mt)for(let zt=0;zt<Mt;zt+=2){const yi=r[dt[zt]][dt[zt+1]].subscribe(f),ba=ae.length;ae.push(f,yi),U&&U.push(u,a.index,ba,"function"==typeof yi?ba+1:-(ba+1))}}}function qw(t,r,s,a){try{return Uo(6,r,s),!1!==s(a)}catch(u){return kf(t,u),!1}finally{Uo(7,r,s)}}function Kw(t,r,s,a,u){return function f(E){if(E===Function)return a;Vf(t.componentOffset>-1?ks(t.index,r):r);let P=qw(r,s,a,E),U=f.__ngNextListenerFn__;for(;U;)P=qw(r,s,U,E)&&P,U=U.__ngNextListenerFn__;return u&&!1===P&&E.preventDefault(),P}}function Yw(t=1){return function va(t){return(Mn.lFrame.contextLView=function No(t,r){for(;t>0;)r=r[qs],t--;return r}(t,Mn.lFrame.contextLView))[or]}(t)}function sT(t,r,s,a){!function OI(t,r,s,a){const u=ar();if(u.firstCreatePass){const f=Or();xI(u,new Vv(r,s,a),f.index),function jv(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(u,t),2==(2&s)&&(u.staticContentQueries=!0)}return Bv(u,_t(),s)}(t,r,s,a)}function oT(t,r,s){!function MI(t,r,s){const a=ar();return a.firstCreatePass&&(xI(a,new Vv(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),Bv(a,_t(),r)}(t,r,s)}function aT(t){const r=_t(),s=ar(),a=an();Xr(a+1);const u=xg(s,a);if(t.dirty&&function ls(t){return 4==(4&t[mn])}(r)===(2==(2&u.metadata.flags))){if(null===u.matches)t.reset([]);else{const f=NI(r,a);t.reset(f,St),t.notifyOnChanges()}return!0}return!1}function cT(){return function Og(t,r){return t[bi].queries[r].queryList}(_t(),an())}function yT(t,r=""){const s=_t(),a=ar(),u=t+sn,f=a.firstCreatePass?zl(a,u,1,r,null):a.data[u],E=vT(a,s,f,r,t);s[u]=E,nn()&&eg(a,s,E,f),po(f,!1)}let vT=(t,r,s,a,u)=>(un(!0),function zp(t,r){return t.createText(r)}(r[An],a));function bC(t){return mE("",t,""),bC}function mE(t,r,s){const a=_t(),u=function Kg(t,r,s,a){return J(t,Er(),s)?r+ir(s)+a:Ir}(a,t,r,s);return u!==Ir&&function hl(t,r,s){const a=xo(r,t);!function vy(t,r,s){t.setValue(r,s)}(t[An],a,s)}(a,Jn(),u),mE}function RC(t,r,s){fv(r)&&(r=r());const a=_t();return J(a,Er(),r)&&Ha(ar(),er(),a,t,r,a[An],s,!1),RC}function PT(t,r){const s=fv(t);return s&&t.set(r),s}function MC(t,r){const s=_t(),a=ar(),u=Or();return SC(a,s,s[An],u,t,r),MC}function OC(t,r,s,a,u){if(t=Ft(t),Array.isArray(t))for(let f=0;f<t.length;f++)OC(t[f],r,s,a,u);else{const f=ar(),E=_t(),I=Or();let P=w(t)?t:Ft(t.provide);const U=_o(t),Y=1048575&I.providerIndexes,ae=I.directiveStart,Ae=I.providerIndexes>>20;if(w(t)||!t.multi){const ke=new Sl(U,u,Hl),dt=NC(P,r,u?Y:Y+Ae,ae);-1===dt?(uf(Zu(I,E),f,P),xC(f,t,r.length),r.push(P),I.directiveStart++,I.directiveEnd++,u&&(I.providerIndexes+=1048576),s.push(ke),E.push(ke)):(s[dt]=ke,E[dt]=ke)}else{const ke=NC(P,r,Y+Ae,ae),dt=NC(P,r,Y,Y+Ae),zt=dt>=0&&s[dt];if(u&&!zt||!u&&!(ke>=0&&s[ke])){uf(Zu(I,E),f,P);const In=function QP(t,r,s,a,u){const f=new Sl(t,s,Hl);return f.multi=[],f.index=r,f.componentProviders=0,bT(f,u,a&&!s),f}(u?YP:KP,s.length,u,a,U);!u&&zt&&(s[dt].providerFactory=In),xC(f,t,r.length,0),r.push(P),I.directiveStart++,I.directiveEnd++,u&&(I.providerIndexes+=1048576),s.push(In),E.push(In)}else xC(f,t,ke>-1?ke:dt,bT(s[u?dt:ke],U,!u&&a));!u&&a&&zt&&s[dt].componentProviders++}}}function xC(t,r,s,a){const u=w(r),f=function m(t){return!!t.useClass}(r);if(u||f){const P=(f?Ft(r.useClass):r).prototype.ngOnDestroy;if(P){const U=t.destroyHooks||(t.destroyHooks=[]);if(!u&&r.multi){const Y=U.indexOf(s);-1===Y?U.push(s,[a,P]):U[Y+1].push(a,P)}else U.push(s,P)}}}function bT(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function NC(t,r,s,a){for(let u=s;u<a;u++)if(r[u]===t)return u;return-1}function KP(t,r,s,a){return kC(this.multi,[])}function YP(t,r,s,a){const u=this.multi;let f;if(this.providerFactory){const E=this.providerFactory.componentProviders,I=Ol(s,s[kt],this.providerFactory.index,a);f=I.slice(0,E),kC(u,f);for(let P=E;P<I.length;P++)f.push(I[P])}else f=[],kC(u,f);return f}function kC(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function RT(t,r=[]){return s=>{s.providersResolver=(a,u)=>function qP(t,r,s){const a=ar();if(a.firstCreatePass){const u=Li(t);OC(s,a.data,a.blueprint,u,!0),OC(r,a.data,a.blueprint,u,!1)}}(a,u?u(t):t,r)}}let JP=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=eu(0,s.type),u=a.length>0?h([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,u)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=pr({token:t,providedIn:"environment",factory:()=>new t(cr(it))})}return t})();function MT(t){xd("NgStandalone"),t.getStandaloneInjector=r=>r.get(JP).getOrCreateStandaloneInjector(t)}function ey(t,r){const s=t[r];return s===Ir?void 0:s}function $T(t,r,s,a,u,f,E,I){const P=r+s;return function Pe(t,r,s,a,u){const f=ue(t,r,s,a);return J(t,r+2,u)||f}(t,P,u,f,E)?N(t,P+3,I?a.call(I,u,f,E):a(u,f,E)):ey(t,P+3)}function HT(t,r){const s=ar();let a;const u=t+sn;s.firstCreatePass?(a=function _b(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[u]=a,a.onDestroy&&(s.destroyHooks??=[]).push(u,a.onDestroy)):a=s.data[u];const f=a.factory||(a.factory=ac(a.type)),I=oo(Hl);try{const P=Nc(!1),U=f();return Nc(P),function NP(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,_t(),u,U),U}finally{oo(I)}}function zT(t,r,s){const a=t+sn,u=_t(),f=ma(u,a);return ty(u,a)?function BT(t,r,s,a,u,f){const E=r+s;return J(t,E,u)?N(t,E+1,f?a.call(f,u):a(u)):ey(t,E+1)}(u,Is(),r,f.transform,s,f):f.transform(s)}function qT(t,r,s,a){const u=t+sn,f=_t(),E=ma(f,u);return ty(f,u)?function jT(t,r,s,a,u,f,E){const I=r+s;return ue(t,I,u,f)?N(t,I+2,E?a.call(E,u,f):a(u,f)):ey(t,I+2)}(f,Is(),r,E.transform,s,a,E):E.transform(s,a)}function KT(t,r,s,a,u){const f=t+sn,E=_t(),I=ma(E,f);return ty(E,f)?$T(E,Is(),r,I.transform,s,a,u,I):I.transform(s,a,u)}function ty(t,r){return t[kt].data[r].pure}class lD{constructor(r){this.full=r;const s=r.split(".");this.major=s[0],this.minor=s[1],this.patch=s.slice(2).join(".")}}const $b=new lD("17.2.2");let dD=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const mD=new gr(""),_D=new gr("");let $C,pR=(()=>{class t{constructor(s,a,u){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,$C||(function gR(t){$C=t}(u),u.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Us.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb()}});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,u){let f=-1;a&&a>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(E=>E.timeoutId!==f),s()},a)),this._callbacks.push({doneCb:s,timeoutId:f,updateCb:u})}whenStable(s,a,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,u){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(cr(Us),cr(yD),cr(_D))};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac})}return t})(),yD=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return $C?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function GC(t){return!!t&&"function"==typeof t.then}function vD(t){return!!t&&"function"==typeof t.subscribe}const ED=new gr("");let WC=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=mr(ED,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const u of this.appInits){const f=u();if(GC(f))s.push(f);else if(vD(f)){const E=new Promise((I,P)=>{f.subscribe({complete:I,error:P})});s.push(E)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(u=>{this.reject(u)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const HC=new gr("");function wD(t,r){return Array.isArray(r)?r.reduce(wD,t):{...t,...r}}let fp=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=mr(gf),this.afterRenderEffectManager=mr(rp),this.componentTypes=[],this.components=[],this.isStable=mr(R).hasPendingTasks.pipe((0,Rr.k)(s=>!s)),this._injector=mr(it)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const u=s instanceof ts;if(!this._injector.get(WC).done)throw!u&&Ss(s),new Lt(405,!1);let E;E=u?s:this._injector.get(Cg).resolveComponentFactory(s),this.componentTypes.push(E.componentType);const I=function mR(t){return t.isBoundToModule}(E)?void 0:this._injector.get(Vd),U=E.create(la.NULL,[],a||E.selector,I),Y=U.location.nativeElement,ae=U.injector.get(mD,null);return ae?.registerApplication(Y),U.onDestroy(()=>{this.detachView(U.hostView),EE(this.components,U),ae?.unregisterApplication(Y)}),this._loadComponent(U),U}tick(){if(this._runningTick)throw new Lt(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let s=0;do{if(100===s)throw new Lt(103,!1);const a=0===s;for(let{_lView:u,notifyErrorHandler:f}of this._views)!a&&!TD(u)||this.detectChangesInView(u,f,a);this.afterRenderEffectManager.execute(),s++}while(this._views.some(({_lView:a})=>TD(a)))}detectChangesInView(s,a,u){let f;u?(f=0,s[mn]|=1024):f=64&s[mn]?0:1,Ph(s,a,f)}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;EE(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(HC,[]);[...this._bootstrapListeners,...a].forEach(u=>u(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>EE(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Lt(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function EE(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}function TD(t){return Xs(t)}class yR{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let vR=(()=>{class t{compileModuleSync(s){return new n(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),f=Pa(oi(s).declarations).reduce((E,I)=>{const P=Zn(I);return P&&E.push(new ip(P)),E},[]);return new yR(a,f)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),CR=(()=>{class t{constructor(){this.zone=mr(Us),this.applicationRef=mr(fp)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wR(){const t=mr(Us),r=mr(Lu);return s=>t.runOutsideAngular(()=>r.handleError(s))}let DR=(()=>{class t{constructor(){this.subscription=new wn.wH,this.initialized=!1,this.zone=mr(Us),this.pendingTasks=mr(R)}initialize(){if(this.initialized)return;this.initialized=!0;let s=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(s=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Us.assertNotInAngularZone(),queueMicrotask(()=>{null!==s&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(s),s=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Us.assertInAngularZone(),s??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const CE=new gr("",{providedIn:"root",factory:()=>mr(CE,bn.Optional|bn.SkipSelf)||function AR(){return typeof $localize<"u"&&$localize.locale||sm}()}),SR=new gr("",{providedIn:"root",factory:()=>"USD"}),zC=new gr("");let PD=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const u=function fI(t="zone.js",r){return"noop"===t?new tp:"zone.js"===t?new Us(r):t}(a?.ngZone,function SD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return u.run(()=>{const f=function o(t,r,s){return new e(t,r,s)}(s.moduleType,this.injector,function AD(t){return[{provide:Us,useFactory:t},{provide:Ba,multi:!0,useFactory:()=>{const r=mr(CR,{optional:!0});return()=>r.initialize()}},{provide:Ba,multi:!0,useFactory:()=>{const r=mr(DR);return()=>{r.initialize()}}},{provide:gf,useFactory:wR}]}(()=>u)),E=f.injector.get(Lu,null);return u.runOutsideAngular(()=>{const I=u.onError.subscribe({next:P=>{E.handleError(P)}});f.onDestroy(()=>{EE(this._modules,f),I.unsubscribe()})}),function CD(t,r,s){try{const a=s();return GC(a)?a.catch(u=>{throw r.runOutsideAngular(()=>t.handleError(u)),u}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(E,u,()=>{const I=f.injector.get(WC);return I.runInitializers(),I.donePromise.then(()=>(function Cw(t){"string"==typeof t&&(Iw=t.toLowerCase().replace(/_/g,"-"))}(f.injector.get(CE,sm)||sm),this._moduleDoBootstrap(f),f))})})}bootstrapModule(s,a=[]){const u=wD({},a);return function IR(t,r,s){const a=new n(s);return Promise.resolve(a)}(0,0,s).then(f=>this.bootstrapModuleFactory(f,u))}_moduleDoBootstrap(s){const a=s.injector.get(fp);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(u=>a.bootstrap(u));else{if(!s.instance.ngDoBootstrap)throw new Lt(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Lt(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(zC,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(cr(la))};static#t=this.\u0275prov=pr({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),qh=null;const bD=new gr("");function RD(t,r,s=[]){const a=`Platform: ${r}`,u=new gr(a);return(f=[])=>{let E=qC();if(!E||E.injector.get(bD,!1)){const I=[...s,...f,{provide:u,useValue:!0}];t?t(I):function bR(t){if(qh&&!qh.get(bD,!1))throw new Lt(400,!1);(function ID(){!function tn(t){nt=t}(()=>{throw new Lt(600,!1)})})(),qh=t;const r=t.get(PD);(function OD(t){t.get(M,null)?.forEach(s=>s())})(t)}(function MD(t=[],r){return la.create({name:r,providers:[{provide:v,useValue:"platform"},{provide:zC,useValue:new Set([()=>qh=null])},...t]})}(I,a))}return function RR(t){const r=qC();if(!r)throw new Lt(401,!1);return r}()}}function qC(){return qh?.get(PD)??null}function OR(){return!1}const FR=RD(null,"core",[]);let LR=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(cr(fp))};static#t=this.\u0275mod=$o({type:t});static#n=this.\u0275inj=Jo({})}return t})();function lM(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function hM(t){const r=Zn(t);if(!r)return null;const s=new ip(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},2740:($t,We,V)=>{V.d(We,{_o:()=>Ge,Q$:()=>lt,cd:()=>tn,Ev:()=>ze,mq:()=>nt,ox:()=>Nt,_8:()=>Oe,GW:()=>tt,CU:()=>st}),V(6858);var Q=V(1368),A=V(4496),F=V(6176),ye=V(6e3),G=V(5657),Ie=V(2700),je=V(3252),Ne=V(9900),he=V(267),le=V(560),$e=V(8960),we=V(6624),Ve=V(3920),be=V(7368),ot=V(4704),pe=V(5960);class Ue extends G.E{constructor(Tt=1/0,qt=1/0,Zt=pe.K){super(),this._bufferSize=Tt,this._windowTime=qt,this._timestampProvider=Zt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=qt===1/0,this._bufferSize=Math.max(1,Tt),this._windowTime=Math.max(1,qt)}next(Tt){const{isStopped:qt,_buffer:Zt,_infiniteTimeWindow:en,_timestampProvider:_n,_windowTime:Tn}=this;qt||(Zt.push(Tt),!en&&Zt.push(_n.now()+Tn)),this._trimBuffer(),super.next(Tt)}_subscribe(Tt){this._throwIfClosed(),this._trimBuffer();const qt=this._innerSubscribe(Tt),{_infiniteTimeWindow:Zt,_buffer:en}=this,_n=en.slice();for(let Tn=0;Tn<_n.length&&!Tt.closed;Tn+=Zt?1:2)Tt.next(_n[Tn]);return this._checkFinalizedStatuses(Tt),qt}_trimBuffer(){const{_bufferSize:Tt,_timestampProvider:qt,_buffer:Zt,_infiniteTimeWindow:en}=this,_n=(en?1:2)*Tt;if(Tt<1/0&&_n<Zt.length&&Zt.splice(0,Zt.length-_n),!en){const Tn=qt.now();let Kt=0;for(let wn=1;wn<Zt.length&&Zt[wn]<=Tn;wn+=2)Kt=wn;Kt&&Zt.splice(0,Kt+1)}}}var Ke=V(1760),Ee=V(5448);function de(ut,Tt,...qt){if(!0===Tt)return void ut();if(!1===Tt)return;const Zt=new Ke.ot({next:()=>{Zt.unsubscribe(),ut()}});return(0,le.Uv)(Tt(...qt)).subscribe(Zt)}function wt(ut,Tt,qt){let Zt,en=!1;return ut&&"object"==typeof ut?({bufferSize:Zt=1/0,windowTime:Tt=1/0,refCount:en=!1,scheduler:qt}=ut):Zt=ut??1/0,function qe(ut={}){const{connector:Tt=(()=>new G.E),resetOnError:qt=!0,resetOnComplete:Zt=!0,resetOnRefCountZero:en=!0}=ut;return _n=>{let Tn,Kt,wn,Wn=0,Rr=!1,Bt=!1;const wr=()=>{Kt?.unsubscribe(),Kt=void 0},Lt=()=>{wr(),Tn=wn=void 0,Rr=Bt=!1},zr=()=>{const kn=Tn;Lt(),kn?.unsubscribe()};return(0,Ee.i)((kn,Zr)=>{Wn++,!Bt&&!Rr&&wr();const yr=wn=wn??Tt();Zr.add(()=>{Wn--,0===Wn&&!Bt&&!Rr&&(Kt=de(zr,en))}),yr.subscribe(Zr),!Tn&&Wn>0&&(Tn=new Ke.ot({next:vi=>yr.next(vi),error:vi=>{Bt=!0,wr(),Kt=de(Lt,qt,vi),yr.error(vi)},complete:()=>{Rr=!0,wr(),Kt=de(Lt,Zt),yr.complete()}}),(0,le.Uv)(kn).subscribe(Tn))})(_n)}}({connector:()=>new Ue(Zt,Tt,qt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:en})}var Dt=V(5084),xe=V(8880);function Et(ut,Tt){return(0,xe.m)(Tt)?(0,be.G)(()=>ut,Tt):(0,be.G)(()=>ut)}var bt=V(2924),ht=V(6684),Le=V(9252);const tt=new A.UbH("angularfire2.auth.use-emulator"),nt=new A.UbH("angularfire2.auth.settings"),Nt=new A.UbH("angularfire2.auth.tenant-id"),tn=new A.UbH("angularfire2.auth.langugage-code"),Oe=new A.UbH("angularfire2.auth.use-device-language"),ze=new A.UbH("angularfire.auth.persistence"),st=(ut,Tt,qt,Zt,en,_n,Tn,Kt)=>(0,ye.PQ)(`${ut.name}.auth`,"AngularFireAuth",ut.name,()=>{const wn=Tt.runOutsideAngular(()=>ut.auth());if(qt&&wn.useEmulator(...qt),Zt&&(wn.tenantId=Zt),wn.languageCode=en,_n&&wn.useDeviceLanguage(),Tn)for(const[Wn,Rr]of Object.entries(Tn))wn.settings[Wn]=Rr;return Kt&&wn.setPersistence(Kt),wn},[qt,Zt,en,_n,Tn,Kt]);let Ge=(()=>{class ut{authState;idToken;user;idTokenResult;credential;constructor(qt,Zt,en,_n,Tn,Kt,wn,Wn,Rr,Bt,wr,Lt){const zr=new G.E,kn=(0,Ie.of)(void 0).pipe((0,Ve.y)(Tn.outsideAngular),(0,be.G)(()=>_n.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,6858)))),(0,ot.k)(()=>(0,ye._G)(qt,_n,Zt)),(0,ot.k)(Zr=>st(Zr,_n,Kt,Wn,Rr,Bt,wn,wr)),wt({bufferSize:1,refCount:!1}));if((0,Q.uf)(en))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ie.of)(null);else{kn.pipe((0,Dt.K)()).subscribe();const Zr=kn.pipe((0,be.G)(rr=>rr.getRedirectResult().then(vn=>vn,()=>null)),F.wH,wt({bufferSize:1,refCount:!1})),yr=kn.pipe((0,be.G)(rr=>new je._(vn=>({unsubscribe:_n.runOutsideAngular(()=>rr.onAuthStateChanged(gn=>vn.next(gn),gn=>vn.error(gn),()=>vn.complete()))})))),vi=kn.pipe((0,be.G)(rr=>new je._(vn=>({unsubscribe:_n.runOutsideAngular(()=>rr.onIdTokenChanged(gn=>vn.next(gn),gn=>vn.error(gn),()=>vn.complete()))}))));this.authState=Zr.pipe(Et(yr),(0,bt.y)(Tn.outsideAngular),(0,Ve.y)(Tn.insideAngular)),this.user=Zr.pipe(Et(vi),(0,bt.y)(Tn.outsideAngular),(0,Ve.y)(Tn.insideAngular)),this.idToken=this.user.pipe((0,be.G)(rr=>rr?(0,Ne.Q)(rr.getIdToken()):(0,Ie.of)(null))),this.idTokenResult=this.user.pipe((0,be.G)(rr=>rr?(0,Ne.Q)(rr.getIdTokenResult()):(0,Ie.of)(null))),this.credential=function Se(...ut){const Tt=(0,we.e_)(ut),qt=(0,we._8)(ut,1/0),Zt=ut;return Zt.length?1===Zt.length?(0,le.Uv)(Zt[0]):(0,he.u)(qt)((0,Ne.Q)(Zt,Tt)):$e.k}(Zr,zr,this.authState.pipe((0,ht.I)(rr=>!rr))).pipe((0,ot.k)(rr=>rr?.user?rr:null),(0,bt.y)(Tn.outsideAngular),(0,Ve.y)(Tn.insideAngular))}return(0,ye._w)(this,kn,_n,{spy:{apply:(Zr,yr,vi)=>{(Zr.startsWith("signIn")||Zr.startsWith("createUser"))&&vi.then(rr=>zr.next(rr))}}})}static \u0275fac=function(Zt){return new(Zt||ut)(A.CoB(ye.E9),A.CoB(ye.Ml,8),A.CoB(A.AHE),A.CoB(A.WW2),A.CoB(F.u),A.CoB(tt,8),A.CoB(nt,8),A.CoB(Nt,8),A.CoB(tn,8),A.CoB(Oe,8),A.CoB(ze,8),A.CoB(F.gJ,8))};static \u0275prov=A.wxM({token:ut,factory:ut.\u0275fac,providedIn:"any"})}return ut})(),lt=(()=>{class ut{constructor(){Le.c.registerVersion("angularfire",F.j1.full,"auth-compat")}static \u0275fac=function(Zt){return new(Zt||ut)};static \u0275mod=A.a4G({type:ut});static \u0275inj=A.s3X({providers:[Ge]})}return ut})()},6e3:($t,We,V)=>{V.d(We,{E9:()=>je,Ml:()=>Ne,PQ:()=>Se,UN:()=>we,_G:()=>he,_w:()=>ye,rh:()=>G});var _=V(4496),Q=V(6176),A=V(9252);const F=["ngOnDestroy"],ye=(pe,Ue,Ke,Ee={})=>new Proxy(pe,{get:(qe,de)=>Ke.runOutsideAngular(()=>{if(pe[de])return Ee?.spy?.get&&Ee.spy.get(de,pe[de]),pe[de];if(F.indexOf(de)>-1)return()=>{};const wt=Ue.toPromise().then(Dt=>{const xe=Dt?.[de];return"function"==typeof xe?xe.bind(Dt):xe?.then?xe.then(Et=>Ke.run(()=>Et)):Ke.run(()=>xe)});return new Proxy(()=>{},{get:(Dt,xe)=>wt[xe],apply:(Dt,xe,Et)=>wt.then(bt=>{const ht=bt?.(...Et);return Ee?.spy?.apply&&Ee.spy.apply(de,Et,ht),ht})})})}),G=(pe,Ue)=>{Ue.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(Ee=>{Object.defineProperty(pe.prototype,Ee,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,Ee))})})};class Ie{constructor(Ue){return Ue}}const je=new _.UbH("angularfire2.app.options"),Ne=new _.UbH("angularfire2.app.name");function he(pe,Ue,Ke){const qe="object"==typeof Ke&&Ke||{};qe.name=qe.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const wt=A.c.apps.filter(Dt=>Dt&&Dt.name===qe.name)[0]||Ue.runOutsideAngular(()=>A.c.initializeApp(pe,qe));try{if(JSON.stringify(pe)!==JSON.stringify(wt.options)){const Dt=!!module.hot;le("error",`${wt.name} Firebase App already initialized with different options${Dt?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ie(wt)}const le=(pe,...Ue)=>{(0,_.sPQ)()&&typeof console<"u"&&console[pe](...Ue)},$e={provide:Ie,useFactory:he,deps:[je,_.WW2,[new _.T7N,Ne]]};let we=(()=>{class pe{static initializeApp(Ke,Ee){return{ngModule:pe,providers:[{provide:je,useValue:Ke},{provide:Ne,useValue:Ee}]}}constructor(Ke){A.c.registerVersion("angularfire",Q.j1.full,"core"),A.c.registerVersion("angularfire",Q.j1.full,"app-compat"),A.c.registerVersion("angular",_.j1C.full,Ke.toString())}static \u0275fac=function(Ee){return new(Ee||pe)(_.CoB(_.AHE))};static \u0275mod=_.a4G({type:pe});static \u0275inj=_.s3X({providers:[$e]})}return pe})();function Se(pe,Ue,Ke,Ee,qe){const[,de,wt]=globalThis.\u0275AngularfireInstanceCache.find(Dt=>Dt[0]===pe)||[];if(de)return function Ve(pe,Ue){try{return pe.toString()===Ue.toString()}catch{return pe===Ue}}(qe,wt)||(ot("error",`${Ue} was already initialized on the ${Ke} Firebase App with different settings.${be?" You may need to reload as Firebase is not HMR aware.":""}`),ot("warn",{is:qe,was:wt})),de;{const Dt=Ee();return globalThis.\u0275AngularfireInstanceCache.push([pe,Dt,qe]),Dt}}const be=typeof module<"u"&&!!module.hot,ot=(pe,...Ue)=>{(0,_.sPQ)()&&typeof console<"u"&&console[pe](...Ue)};globalThis.\u0275AngularfireInstanceCache||=[]},6176:($t,We,V)=>{V.d(We,{j1:()=>Se,wH:()=>ht,u:()=>de,gJ:()=>pe,S_:()=>ot,UN:()=>be,qo:()=>tt});var _=V(4496),Q=V(3680),A=V(1364),ye=V(9816);const Ie=new class G extends ye.k{}(class F extends A.m{constructor(Nt,tn){super(Nt,tn),this.scheduler=Nt,this.work=tn}schedule(Nt,tn=0){return tn>0?super.schedule(Nt,tn):(this.delay=tn,this.state=Nt,this.scheduler.flush(this),this)}execute(Nt,tn){return tn>0||this.closed?super.execute(Nt,tn):this._execute(Nt,tn)}requestAsyncId(Nt,tn,Oe=0){return null!=Oe&&Oe>0||null==Oe&&this.delay>0?super.requestAsyncId(Nt,tn,Oe):(Nt.flush(this),0)}});var Ne=V(112),he=V(3252),le=V(9212),$e=V(2924),we=V(3920);const Se=new _.a8Z("ANGULARFIRE2_VERSION");function be(nt,Nt,tn){if(Nt){if(1===Nt.length)return Nt[0];const st=Nt.filter(Ge=>Ge.app===tn);if(1===st.length)return st[0]}return tn.container.getProvider(nt).getImmediate({optional:!0})}const ot=(nt,Nt)=>{const tn=Nt?[Nt]:(0,Q.UH)(),Oe=[];return tn.forEach(ze=>{ze.container.getProvider(nt).instances.forEach(Ge=>{Oe.includes(Ge)||Oe.push(Ge)})}),Oe};class pe{constructor(){return ot(Ue)}}const Ue="app-check";function Ke(){}class Ee{zone;delegate;constructor(Nt,tn=Ie){this.zone=Nt,this.delegate=tn}now(){return this.delegate.now()}schedule(Nt,tn,Oe){const ze=this.zone;return this.delegate.schedule(function(Ge){ze.runGuarded(()=>{Nt.apply(this,[Ge])})},tn,Oe)}}class qe{zone;task=null;constructor(Nt){this.zone=Nt}call(Nt,tn){const Oe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ke,{},Ke,Ke)),tn.pipe((0,le.y)({next:Oe,complete:Oe,error:Oe})).subscribe(Nt).add(Oe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let de=(()=>{class nt{ngZone;outsideAngular;insideAngular;constructor(tn){this.ngZone=tn,this.outsideAngular=tn.runOutsideAngular(()=>new Ee(Zone.current)),this.insideAngular=tn.run(()=>new Ee(Zone.current,Ne.M)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Oe){return new(Oe||nt)(_.CoB(_.WW2))};static \u0275prov=_.wxM({token:nt,factory:nt.\u0275fac,providedIn:"root"})}return nt})();function wt(){const nt=globalThis.\u0275AngularFireScheduler;if(!nt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return nt}function xe(nt){return wt().ngZone.run(()=>nt())}function ht(nt){return function Le(nt){return function(tn){return(tn=tn.lift(new qe(nt.ngZone))).pipe((0,$e.y)(nt.outsideAngular),(0,we.y)(nt.insideAngular))}}(wt())(nt)}const et=(nt,Nt)=>function(){const Oe=arguments;return Nt&&setTimeout(()=>{"scheduled"===Nt.state&&Nt.invoke()},10),xe(()=>nt.apply(void 0,Oe))},tt=(nt,Nt)=>function(){let tn;const Oe=arguments;for(let st=0;st<arguments.length;st++)"function"==typeof Oe[st]&&(Nt&&(tn||=xe(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ke,{},Ke,Ke))),Oe[st]=et(Oe[st],tn));const ze=function Dt(nt){return wt().ngZone.runOutsideAngular(()=>nt())}(()=>nt.apply(this,Oe));if(!Nt){if(ze instanceof he._){const st=wt();return ze.pipe((0,$e.y)(st.outsideAngular),(0,we.y)(st.insideAngular))}return xe(()=>ze)}return ze instanceof he._?ze.pipe(ht):ze instanceof Promise?xe(()=>new Promise((st,Ge)=>ze.then(lt=>xe(()=>st(lt)),lt=>xe(()=>Ge(lt))))):"function"==typeof ze&&tn?function(){return setTimeout(()=>{tn&&"scheduled"===tn.state&&tn.invoke()},10),ze.apply(this,arguments)}:xe(()=>ze)}},6504:($t,We,V)=>{V.d(We,{AQ:()=>Ke,GC:()=>Gi,GO:()=>bs,IT:()=>oi,Wo:()=>Ni,_G:()=>Ai,im:()=>fo,ot:()=>Se,sl:()=>Ys,sz:()=>$o,u:()=>Lt,uW:()=>bo,ue:()=>wr,wd:()=>An,y:()=>Ra});var _=V(4496),Q=V(1368),A=V(9900),F=V(9336),ye=V(4704);let G=(()=>{class W{constructor(k,ne){this._renderer=k,this._elementRef=ne,this.onChange=Te=>{},this.onTouched=()=>{}}setProperty(k,ne){this._renderer.setProperty(this._elementRef.nativeElement,k,ne)}registerOnTouched(k){this.onTouched=k}registerOnChange(k){this.onChange=k}setDisabledState(k){this.setProperty("disabled",k)}static#e=this.\u0275fac=function(ne){return new(ne||W)(_.GI1(_.q87),_.GI1(_.GMv))};static#t=this.\u0275dir=_.Sc5({type:W})}return W})(),Ie=(()=>{class W extends G{static#e=this.\u0275fac=(()=>{let k;return function(Te){return(k||(k=_.otF(W)))(Te||W)}})();static#t=this.\u0275dir=_.Sc5({type:W,features:[_.eg9]})}return W})();const je=new _.UbH(""),le={provide:je,useExisting:(0,_.wd)(()=>Se),multi:!0},we=new _.UbH("");let Se=(()=>{class W extends G{constructor(k,ne,Te){super(k,ne),this._compositionMode=Te,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $e(){const W=(0,Q.uy)()?(0,Q.uy)().getUserAgent():"";return/android (\d+)/.test(W.toLowerCase())}())}writeValue(k){this.setProperty("value",k??"")}_handleInput(k){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(k)}_compositionStart(){this._composing=!0}_compositionEnd(k){this._composing=!1,this._compositionMode&&this.onChange(k)}static#e=this.\u0275fac=function(ne){return new(ne||W)(_.GI1(_.q87),_.GI1(_.GMv),_.GI1(we,8))};static#t=this.\u0275dir=_.Sc5({type:W,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(ne,Te){1&ne&&_.qCj("input",function(Qn){return Te._handleInput(Qn.target.value)})("blur",function(){return Te.onTouched()})("compositionstart",function(){return Te._compositionStart()})("compositionend",function(Qn){return Te._compositionEnd(Qn.target.value)})},features:[_.M5G([le]),_.eg9]})}return W})();function Ve(W){return null==W||("string"==typeof W||Array.isArray(W))&&0===W.length}function be(W){return null!=W&&"number"==typeof W.length}const ot=new _.UbH(""),pe=new _.UbH(""),Ue=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ke{static min(q){return function Ee(W){return q=>{if(Ve(q.value)||Ve(W))return null;const k=parseFloat(q.value);return!isNaN(k)&&k<W?{min:{min:W,actual:q.value}}:null}}(q)}static max(q){return function qe(W){return q=>{if(Ve(q.value)||Ve(W))return null;const k=parseFloat(q.value);return!isNaN(k)&&k>W?{max:{max:W,actual:q.value}}:null}}(q)}static required(q){return function de(W){return Ve(W.value)?{required:!0}:null}(q)}static requiredTrue(q){return function wt(W){return!0===W.value?null:{required:!0}}(q)}static email(q){return function Dt(W){return Ve(W.value)||Ue.test(W.value)?null:{email:!0}}(q)}static minLength(q){return function xe(W){return q=>Ve(q.value)||!be(q.value)?null:q.value.length<W?{minlength:{requiredLength:W,actualLength:q.value.length}}:null}(q)}static maxLength(q){return function Et(W){return q=>be(q.value)&&q.value.length>W?{maxlength:{requiredLength:W,actualLength:q.value.length}}:null}(q)}static pattern(q){return function bt(W){if(!W)return ht;let q,k;return"string"==typeof W?(k="","^"!==W.charAt(0)&&(k+="^"),k+=W,"$"!==W.charAt(W.length-1)&&(k+="$"),q=new RegExp(k)):(k=W.toString(),q=W),ne=>{if(Ve(ne.value))return null;const Te=ne.value;return q.test(Te)?null:{pattern:{requiredPattern:k,actualValue:Te}}}}(q)}static nullValidator(q){return null}static compose(q){return Oe(q)}static composeAsync(q){return st(q)}}function ht(W){return null}function Le(W){return null!=W}function et(W){return(0,_.w5$)(W)?(0,A.Q)(W):W}function tt(W){let q={};return W.forEach(k=>{q=null!=k?{...q,...k}:q}),0===Object.keys(q).length?null:q}function nt(W,q){return q.map(k=>k(W))}function tn(W){return W.map(q=>function Nt(W){return!W.validate}(q)?q:k=>q.validate(k))}function Oe(W){if(!W)return null;const q=W.filter(Le);return 0==q.length?null:function(k){return tt(nt(k,q))}}function ze(W){return null!=W?Oe(tn(W)):null}function st(W){if(!W)return null;const q=W.filter(Le);return 0==q.length?null:function(k){const ne=nt(k,q).map(et);return(0,F.y)(ne).pipe((0,ye.k)(tt))}}function Ge(W){return null!=W?st(tn(W)):null}function lt(W,q){return null===W?[q]:Array.isArray(W)?[...W,q]:[W,q]}function ut(W){return W._rawValidators}function Tt(W){return W._rawAsyncValidators}function qt(W){return W?Array.isArray(W)?W:[W]:[]}function Zt(W,q){return Array.isArray(W)?W.includes(q):W===q}function en(W,q){const k=qt(q);return qt(W).forEach(Te=>{Zt(k,Te)||k.push(Te)}),k}function _n(W,q){return qt(q).filter(k=>!Zt(W,k))}class Tn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(q){this._rawValidators=q||[],this._composedValidatorFn=ze(this._rawValidators)}_setAsyncValidators(q){this._rawAsyncValidators=q||[],this._composedAsyncValidatorFn=Ge(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(q){this._onDestroyCallbacks.push(q)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(q=>q()),this._onDestroyCallbacks=[]}reset(q=void 0){this.control&&this.control.reset(q)}hasError(q,k){return!!this.control&&this.control.hasError(q,k)}getError(q,k){return this.control?this.control.getError(q,k):null}}class Kt extends Tn{get formDirective(){return null}get path(){return null}}class wn extends Tn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Wn{constructor(q){this._cd=q}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let wr=(()=>{class W extends Wn{constructor(k){super(k)}static#e=this.\u0275fac=function(ne){return new(ne||W)(_.GI1(wn,2))};static#t=this.\u0275dir=_.Sc5({type:W,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(ne,Te){2&ne&&_.eAK("ng-untouched",Te.isUntouched)("ng-touched",Te.isTouched)("ng-pristine",Te.isPristine)("ng-dirty",Te.isDirty)("ng-valid",Te.isValid)("ng-invalid",Te.isInvalid)("ng-pending",Te.isPending)},features:[_.eg9]})}return W})(),Lt=(()=>{class W extends Wn{constructor(k){super(k)}static#e=this.\u0275fac=function(ne){return new(ne||W)(_.GI1(Kt,10))};static#t=this.\u0275dir=_.Sc5({type:W,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(ne,Te){2&ne&&_.eAK("ng-untouched",Te.isUntouched)("ng-touched",Te.isTouched)("ng-pristine",Te.isPristine)("ng-dirty",Te.isDirty)("ng-valid",Te.isValid)("ng-invalid",Te.isInvalid)("ng-pending",Te.isPending)("ng-submitted",Te.isSubmitted)},features:[_.eg9]})}return W})();const Mr="VALID",Gn="INVALID",wi="PENDING",jr="DISABLED";function Nr(W){return(He(W)?W.validators:W)||null}function pi(W,q){return(He(q)?q.asyncValidators:W)||null}function He(W){return null!=W&&!Array.isArray(W)&&"object"==typeof W}function ge(W,q,k){const ne=W.controls;if(!(q?Object.keys(ne):ne).length)throw new _.OBp(1e3,"");if(!ne[k])throw new _.OBp(1001,"")}function Be(W,q,k){W._forEachChild((ne,Te)=>{if(void 0===k[Te])throw new _.OBp(1002,"")})}class ie{constructor(q,k){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(q),this._assignAsyncValidators(k)}get validator(){return this._composedValidatorFn}set validator(q){this._rawValidators=this._composedValidatorFn=q}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(q){this._rawAsyncValidators=this._composedAsyncValidatorFn=q}get parent(){return this._parent}get valid(){return this.status===Mr}get invalid(){return this.status===Gn}get pending(){return this.status==wi}get disabled(){return this.status===jr}get enabled(){return this.status!==jr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(q){this._assignValidators(q)}setAsyncValidators(q){this._assignAsyncValidators(q)}addValidators(q){this.setValidators(en(q,this._rawValidators))}addAsyncValidators(q){this.setAsyncValidators(en(q,this._rawAsyncValidators))}removeValidators(q){this.setValidators(_n(q,this._rawValidators))}removeAsyncValidators(q){this.setAsyncValidators(_n(q,this._rawAsyncValidators))}hasValidator(q){return Zt(this._rawValidators,q)}hasAsyncValidator(q){return Zt(this._rawAsyncValidators,q)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(q={}){this.touched=!0,this._parent&&!q.onlySelf&&this._parent.markAsTouched(q)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(q=>q.markAllAsTouched())}markAsUntouched(q={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(k=>{k.markAsUntouched({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}markAsDirty(q={}){this.pristine=!1,this._parent&&!q.onlySelf&&this._parent.markAsDirty(q)}markAsPristine(q={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(k=>{k.markAsPristine({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}markAsPending(q={}){this.status=wi,!1!==q.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!q.onlySelf&&this._parent.markAsPending(q)}disable(q={}){const k=this._parentMarkedDirty(q.onlySelf);this.status=jr,this.errors=null,this._forEachChild(ne=>{ne.disable({...q,onlySelf:!0})}),this._updateValue(),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...q,skipPristineCheck:k}),this._onDisabledChange.forEach(ne=>ne(!0))}enable(q={}){const k=this._parentMarkedDirty(q.onlySelf);this.status=Mr,this._forEachChild(ne=>{ne.enable({...q,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent}),this._updateAncestors({...q,skipPristineCheck:k}),this._onDisabledChange.forEach(ne=>ne(!1))}_updateAncestors(q){this._parent&&!q.onlySelf&&(this._parent.updateValueAndValidity(q),q.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(q){this._parent=q}getRawValue(){return this.value}updateValueAndValidity(q={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mr||this.status===wi)&&this._runAsyncValidator(q.emitEvent)),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!q.onlySelf&&this._parent.updateValueAndValidity(q)}_updateTreeValidity(q={emitEvent:!0}){this._forEachChild(k=>k._updateTreeValidity(q)),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?jr:Mr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(q){if(this.asyncValidator){this.status=wi,this._hasOwnPendingAsyncValidator=!0;const k=et(this.asyncValidator(this));this._asyncValidationSubscription=k.subscribe(ne=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ne,{emitEvent:q})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(q,k={}){this.errors=q,this._updateControlsErrors(!1!==k.emitEvent)}get(q){let k=q;return null==k||(Array.isArray(k)||(k=k.split(".")),0===k.length)?null:k.reduce((ne,Te)=>ne&&ne._find(Te),this)}getError(q,k){const ne=k?this.get(k):this;return ne&&ne.errors?ne.errors[q]:null}hasError(q,k){return!!this.getError(q,k)}get root(){let q=this;for(;q._parent;)q=q._parent;return q}_updateControlsErrors(q){this.status=this._calculateStatus(),q&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(q)}_initObservables(){this.valueChanges=new _._w7,this.statusChanges=new _._w7}_calculateStatus(){return this._allControlsDisabled()?jr:this.errors?Gn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wi)?wi:this._anyControlsHaveStatus(Gn)?Gn:Mr}_anyControlsHaveStatus(q){return this._anyControls(k=>k.status===q)}_anyControlsDirty(){return this._anyControls(q=>q.dirty)}_anyControlsTouched(){return this._anyControls(q=>q.touched)}_updatePristine(q={}){this.pristine=!this._anyControlsDirty(),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}_updateTouched(q={}){this.touched=this._anyControlsTouched(),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}_registerOnCollectionChange(q){this._onCollectionChange=q}_setUpdateStrategy(q){He(q)&&null!=q.updateOn&&(this._updateOn=q.updateOn)}_parentMarkedDirty(q){return!q&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(q){return null}_assignValidators(q){this._rawValidators=Array.isArray(q)?q.slice():q,this._composedValidatorFn=function Ds(W){return Array.isArray(W)?ze(W):W||null}(this._rawValidators)}_assignAsyncValidators(q){this._rawAsyncValidators=Array.isArray(q)?q.slice():q,this._composedAsyncValidatorFn=function gt(W){return Array.isArray(W)?Ge(W):W||null}(this._rawAsyncValidators)}}class ce extends ie{constructor(q,k,ne){super(Nr(k),pi(ne,k)),this.controls=q,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(q,k){return this.controls[q]?this.controls[q]:(this.controls[q]=k,k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange),k)}addControl(q,k,ne={}){this.registerControl(q,k),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}removeControl(q,k={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}setControl(q,k,ne={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],k&&this.registerControl(q,k),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}contains(q){return this.controls.hasOwnProperty(q)&&this.controls[q].enabled}setValue(q,k={}){Be(this,0,q),Object.keys(q).forEach(ne=>{ge(this,!0,ne),this.controls[ne].setValue(q[ne],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(q,k={}){null!=q&&(Object.keys(q).forEach(ne=>{const Te=this.controls[ne];Te&&Te.patchValue(q[ne],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(q={},k={}){this._forEachChild((ne,Te)=>{ne.reset(q?q[Te]:null,{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this._reduceChildren({},(q,k,ne)=>(q[ne]=k.getRawValue(),q))}_syncPendingControls(){let q=this._reduceChildren(!1,(k,ne)=>!!ne._syncPendingControls()||k);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_forEachChild(q){Object.keys(this.controls).forEach(k=>{const ne=this.controls[k];ne&&q(ne,k)})}_setUpControls(){this._forEachChild(q=>{q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(q){for(const[k,ne]of Object.entries(this.controls))if(this.contains(k)&&q(ne))return!0;return!1}_reduceValue(){return this._reduceChildren({},(k,ne,Te)=>((ne.enabled||this.disabled)&&(k[Te]=ne.value),k))}_reduceChildren(q,k){let ne=q;return this._forEachChild((Te,on)=>{ne=k(ne,Te,on)}),ne}_allControlsDisabled(){for(const q of Object.keys(this.controls))if(this.controls[q].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(q){return this.controls.hasOwnProperty(q)?this.controls[q]:null}}class Fe extends ce{}const Wt=new _.UbH("CallSetDisabledState",{providedIn:"root",factory:()=>yn}),yn="always";function En(W,q){return[...q.path,W]}function On(W,q,k=yn){Ln(W,q),q.valueAccessor.writeValue(W.value),(W.disabled||"always"===k)&&q.valueAccessor.setDisabledState?.(W.disabled),function Ye(W,q){q.valueAccessor.registerOnChange(k=>{W._pendingValue=k,W._pendingChange=!0,W._pendingDirty=!0,"change"===W.updateOn&&Ct(W,q)})}(W,q),function Xt(W,q){const k=(ne,Te)=>{q.valueAccessor.writeValue(ne),Te&&q.viewToModelUpdate(ne)};W.registerOnChange(k),q._registerOnDestroy(()=>{W._unregisterOnChange(k)})}(W,q),function Xe(W,q){q.valueAccessor.registerOnTouched(()=>{W._pendingTouched=!0,"blur"===W.updateOn&&W._pendingChange&&Ct(W,q),"submit"!==W.updateOn&&W.markAsTouched()})}(W,q),function ln(W,q){if(q.valueAccessor.setDisabledState){const k=ne=>{q.valueAccessor.setDisabledState(ne)};W.registerOnDisabledChange(k),q._registerOnDestroy(()=>{W._unregisterOnDisabledChange(k)})}}(W,q)}function Yt(W,q,k=!0){const ne=()=>{};q.valueAccessor&&(q.valueAccessor.registerOnChange(ne),q.valueAccessor.registerOnTouched(ne)),Re(W,q),W&&(q._invokeOnDestroyCallbacks(),W._registerOnCollectionChange(()=>{}))}function Dr(W,q){W.forEach(k=>{k.registerOnValidatorChange&&k.registerOnValidatorChange(q)})}function Ln(W,q){const k=ut(W);null!==q.validator?W.setValidators(lt(k,q.validator)):"function"==typeof k&&W.setValidators([k]);const ne=Tt(W);null!==q.asyncValidator?W.setAsyncValidators(lt(ne,q.asyncValidator)):"function"==typeof ne&&W.setAsyncValidators([ne]);const Te=()=>W.updateValueAndValidity();Dr(q._rawValidators,Te),Dr(q._rawAsyncValidators,Te)}function Re(W,q){let k=!1;if(null!==W){if(null!==q.validator){const Te=ut(W);if(Array.isArray(Te)&&Te.length>0){const on=Te.filter(Qn=>Qn!==q.validator);on.length!==Te.length&&(k=!0,W.setValidators(on))}}if(null!==q.asyncValidator){const Te=Tt(W);if(Array.isArray(Te)&&Te.length>0){const on=Te.filter(Qn=>Qn!==q.asyncValidator);on.length!==Te.length&&(k=!0,W.setAsyncValidators(on))}}}const ne=()=>{};return Dr(q._rawValidators,ne),Dr(q._rawAsyncValidators,ne),k}function Ct(W,q){W._pendingDirty&&W.markAsDirty(),W.setValue(W._pendingValue,{emitModelToViewChange:!1}),q.viewToModelUpdate(W._pendingValue),W._pendingChange=!1}function Ce(W,q){if(!W.hasOwnProperty("model"))return!1;const k=W.model;return!!k.isFirstChange()||!Object.is(q,k.currentValue)}function xt(W,q){if(!q)return null;let k,ne,Te;return Array.isArray(q),q.forEach(on=>{on.constructor===Se?k=on:function ft(W){return Object.getPrototypeOf(W.constructor)===Ie}(on)?ne=on:Te=on}),Te||ne||k||null}function sr(W,q){const k=W.indexOf(q);k>-1&&W.splice(k,1)}function Vn(W){return"object"==typeof W&&null!==W&&2===Object.keys(W).length&&"value"in W&&"disabled"in W}Promise.resolve();const ns=class extends ie{constructor(q=null,k,ne){super(Nr(k),pi(ne,k)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(q),this._setUpdateStrategy(k),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),He(k)&&(k.nonNullable||k.initialValueIsDefault)&&(this.defaultValue=Vn(q)?q.value:q)}setValue(q,k={}){this.value=this._pendingValue=q,this._onChange.length&&!1!==k.emitModelToViewChange&&this._onChange.forEach(ne=>ne(this.value,!1!==k.emitViewToModelChange)),this.updateValueAndValidity(k)}patchValue(q,k={}){this.setValue(q,k)}reset(q=this.defaultValue,k={}){this._applyFormState(q),this.markAsPristine(k),this.markAsUntouched(k),this.setValue(this.value,k),this._pendingChange=!1}_updateValue(){}_anyControls(q){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(q){this._onChange.push(q)}_unregisterOnChange(q){sr(this._onChange,q)}registerOnDisabledChange(q){this._onDisabledChange.push(q)}_unregisterOnDisabledChange(q){sr(this._onDisabledChange,q)}_forEachChild(q){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(q){Vn(q)?(this.value=this._pendingValue=q.value,q.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=q}},Yr={provide:wn,useExisting:(0,_.wd)(()=>Ai)},As=Promise.resolve();let Ai=(()=>{class W extends wn{constructor(k,ne,Te,on,Qn,vs){super(),this._changeDetectorRef=Qn,this.callSetDisabledState=vs,this.control=new ns,this._registered=!1,this.name="",this.update=new _._w7,this._parent=k,this._setValidators(ne),this._setAsyncValidators(Te),this.valueAccessor=xt(0,on)}ngOnChanges(k){if(this._checkForErrors(),!this._registered||"name"in k){if(this._registered&&(this._checkName(),this.formDirective)){const ne=k.name.previousValue;this.formDirective.removeControl({name:ne,path:this._getPath(ne)})}this._setUpControl()}"isDisabled"in k&&this._updateDisabled(k),Ce(k,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){On(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(k){As.then(()=>{this.control.setValue(k,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(k){const ne=k.isDisabled.currentValue,Te=0!==ne&&(0,_.cZD)(ne);As.then(()=>{Te&&!this.control.disabled?this.control.disable():!Te&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(k){return this._parent?En(k,this._parent):[k]}static#e=this.\u0275fac=function(ne){return new(ne||W)(_.GI1(Kt,9),_.GI1(ot,10),_.GI1(pe,10),_.GI1(je,10),_.GI1(_.kD9,8),_.GI1(Wt,8))};static#t=this.\u0275dir=_.Sc5({type:W,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[_.Wk5.None,"disabled","isDisabled"],model:[_.Wk5.None,"ngModel","model"],options:[_.Wk5.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_.M5G([Yr]),_.eg9,_.SYr]})}return W})(),$o=(()=>{class W{static#e=this.\u0275fac=function(ne){return new(ne||W)};static#t=this.\u0275dir=_.Sc5({type:W,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return W})();const Ss={provide:je,useExisting:(0,_.wd)(()=>oi),multi:!0};let oi=(()=>{class W extends Ie{writeValue(k){this.setProperty("value",parseFloat(k))}registerOnChange(k){this.onChange=ne=>{k(""==ne?null:parseFloat(ne))}}static#e=this.\u0275fac=(()=>{let k;return function(Te){return(k||(k=_.otF(W)))(Te||W)}})();static#t=this.\u0275dir=_.Sc5({type:W,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(ne,Te){1&ne&&_.qCj("change",function(Qn){return Te.onChange(Qn.target.value)})("input",function(Qn){return Te.onChange(Qn.target.value)})("blur",function(){return Te.onTouched()})},features:[_.M5G([Ss]),_.eg9]})}return W})();const ra=new _.UbH(""),zs={provide:Kt,useExisting:(0,_.wd)(()=>bo)};let bo=(()=>{class W extends Kt{constructor(k,ne,Te){super(),this.callSetDisabledState=Te,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _._w7,this._setValidators(k),this._setAsyncValidators(ne)}ngOnChanges(k){this._checkFormPresent(),k.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Re(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(k){const ne=this.form.get(k.path);return On(ne,k,this.callSetDisabledState),ne.updateValueAndValidity({emitEvent:!1}),this.directives.push(k),ne}getControl(k){return this.form.get(k.path)}removeControl(k){Yt(k.control||null,k,!1),function Gt(W,q){const k=W.indexOf(q);k>-1&&W.splice(k,1)}(this.directives,k)}addFormGroup(k){this._setUpFormContainer(k)}removeFormGroup(k){this._cleanUpFormContainer(k)}getFormGroup(k){return this.form.get(k.path)}addFormArray(k){this._setUpFormContainer(k)}removeFormArray(k){this._cleanUpFormContainer(k)}getFormArray(k){return this.form.get(k.path)}updateModel(k,ne){this.form.get(k.path).setValue(ne)}onSubmit(k){return this.submitted=!0,function It(W,q){W._syncPendingControls(),q.forEach(k=>{const ne=k.control;"submit"===ne.updateOn&&ne._pendingChange&&(k.viewToModelUpdate(ne._pendingValue),ne._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(k),"dialog"===k?.target?.method}onReset(){this.resetForm()}resetForm(k=void 0){this.form.reset(k),this.submitted=!1}_updateDomValue(){this.directives.forEach(k=>{const ne=k.control,Te=this.form.get(k.path);ne!==Te&&(Yt(ne||null,k),(W=>W instanceof ns)(Te)&&(On(Te,k,this.callSetDisabledState),k.control=Te))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(k){const ne=this.form.get(k.path);(function Bn(W,q){Ln(W,q)})(ne,k),ne.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(k){if(this.form){const ne=this.form.get(k.path);ne&&function Hn(W,q){return Re(W,q)}(ne,k)&&ne.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ln(this.form,this),this._oldForm&&Re(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(ne){return new(ne||W)(_.GI1(ot,10),_.GI1(pe,10),_.GI1(Wt,8))};static#t=this.\u0275dir=_.Sc5({type:W,selectors:[["","formGroup",""]],hostBindings:function(ne,Te){1&ne&&_.qCj("submit",function(Qn){return Te.onSubmit(Qn)})("reset",function(){return Te.onReset()})},inputs:{form:[_.Wk5.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_.M5G([zs]),_.eg9,_.SYr]})}return W})();const xi={provide:wn,useExisting:(0,_.wd)(()=>Ni)};let Ni=(()=>{class W extends wn{set isDisabled(k){}static#e=this._ngModelWarningSentOnce=!1;constructor(k,ne,Te,on,Qn){super(),this._ngModelWarningConfig=Qn,this._added=!1,this.name=null,this.update=new _._w7,this._ngModelWarningSent=!1,this._parent=k,this._setValidators(ne),this._setAsyncValidators(Te),this.valueAccessor=xt(0,on)}ngOnChanges(k){this._added||this._setUpControl(),Ce(k,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}get path(){return En(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(ne){return new(ne||W)(_.GI1(Kt,13),_.GI1(ot,10),_.GI1(pe,10),_.GI1(je,10),_.GI1(ra,8))};static#n=this.\u0275dir=_.Sc5({type:W,selectors:[["","formControlName",""]],inputs:{name:[_.Wk5.None,"formControlName","name"],isDisabled:[_.Wk5.None,"disabled","isDisabled"],model:[_.Wk5.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[_.M5G([xi]),_.eg9,_.SYr]})}return W})();const $i={provide:je,useExisting:(0,_.wd)(()=>Gi),multi:!0};function or(W,q){return null==W?`${q}`:(q&&"object"==typeof q&&(q="Object"),`${W}: ${q}`.slice(0,50))}let Gi=(()=>{class W extends Ie{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(k){this._compareWith=k}writeValue(k){this.value=k;const Te=or(this._getOptionId(k),k);this.setProperty("value",Te)}registerOnChange(k){this.onChange=ne=>{this.value=this._getOptionValue(ne),k(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(k){for(const ne of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ne),k))return ne;return null}_getOptionValue(k){const ne=function ki(W){return W.split(":")[0]}(k);return this._optionMap.has(ne)?this._optionMap.get(ne):k}static#e=this.\u0275fac=(()=>{let k;return function(Te){return(k||(k=_.otF(W)))(Te||W)}})();static#t=this.\u0275dir=_.Sc5({type:W,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(ne,Te){1&ne&&_.qCj("change",function(Qn){return Te.onChange(Qn.target.value)})("blur",function(){return Te.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.M5G([$i]),_.eg9]})}return W})(),An=(()=>{class W{constructor(k,ne,Te){this._element=k,this._renderer=ne,this._select=Te,this._select&&(this.id=this._select._registerOption())}set ngValue(k){null!=this._select&&(this._select._optionMap.set(this.id,k),this._setElementValue(or(this.id,k)),this._select.writeValue(this._select.value))}set value(k){this._setElementValue(k),this._select&&this._select.writeValue(this._select.value)}_setElementValue(k){this._renderer.setProperty(this._element.nativeElement,"value",k)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(ne){return new(ne||W)(_.GI1(_.GMv),_.GI1(_.q87),_.GI1(Gi,9))};static#t=this.\u0275dir=_.Sc5({type:W,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return W})();const Pi={provide:je,useExisting:(0,_.wd)(()=>Ps),multi:!0};function ho(W,q){return null==W?`${q}`:("string"==typeof q&&(q=`'${q}'`),q&&"object"==typeof q&&(q="Object"),`${W}: ${q}`.slice(0,50))}let Ps=(()=>{class W extends Ie{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(k){this._compareWith=k}writeValue(k){let ne;if(this.value=k,Array.isArray(k)){const Te=k.map(on=>this._getOptionId(on));ne=(on,Qn)=>{on._setSelected(Te.indexOf(Qn.toString())>-1)}}else ne=(Te,on)=>{Te._setSelected(!1)};this._optionMap.forEach(ne)}registerOnChange(k){this.onChange=ne=>{const Te=[],on=ne.selectedOptions;if(void 0!==on){const Qn=on;for(let vs=0;vs<Qn.length;vs++){const Ns=this._getOptionValue(Qn[vs].value);Te.push(Ns)}}else{const Qn=ne.options;for(let vs=0;vs<Qn.length;vs++){const os=Qn[vs];if(os.selected){const Ns=this._getOptionValue(os.value);Te.push(Ns)}}}this.value=Te,k(Te)}}_registerOption(k){const ne=(this._idCounter++).toString();return this._optionMap.set(ne,k),ne}_getOptionId(k){for(const ne of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ne)._value,k))return ne;return null}_getOptionValue(k){const ne=function qs(W){return W.split(":")[0]}(k);return this._optionMap.has(ne)?this._optionMap.get(ne)._value:k}static#e=this.\u0275fac=(()=>{let k;return function(Te){return(k||(k=_.otF(W)))(Te||W)}})();static#t=this.\u0275dir=_.Sc5({type:W,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(ne,Te){1&ne&&_.qCj("change",function(Qn){return Te.onChange(Qn.target)})("blur",function(){return Te.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.M5G([Pi]),_.eg9]})}return W})(),bs=(()=>{class W{constructor(k,ne,Te){this._element=k,this._renderer=ne,this._select=Te,this._select&&(this.id=this._select._registerOption(this))}set ngValue(k){null!=this._select&&(this._value=k,this._setElementValue(ho(this.id,k)),this._select.writeValue(this._select.value))}set value(k){this._select?(this._value=k,this._setElementValue(ho(this.id,k)),this._select.writeValue(this._select.value)):this._setElementValue(k)}_setElementValue(k){this._renderer.setProperty(this._element.nativeElement,"value",k)}_setSelected(k){this._renderer.setProperty(this._element.nativeElement,"selected",k)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(ne){return new(ne||W)(_.GI1(_.GMv),_.GI1(_.q87),_.GI1(Ps,9))};static#t=this.\u0275dir=_.Sc5({type:W,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return W})(),Wo=(()=>{class W{static#e=this.\u0275fac=function(ne){return new(ne||W)};static#t=this.\u0275mod=_.a4G({type:W});static#n=this.\u0275inj=_.s3X({})}return W})();class Ya extends ie{constructor(q,k,ne){super(Nr(k),pi(ne,k)),this.controls=q,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(q){return this.controls[this._adjustIndex(q)]}push(q,k={}){this.controls.push(q),this._registerControl(q),this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}insert(q,k,ne={}){this.controls.splice(q,0,k),this._registerControl(k),this.updateValueAndValidity({emitEvent:ne.emitEvent})}removeAt(q,k={}){let ne=this._adjustIndex(q);ne<0&&(ne=0),this.controls[ne]&&this.controls[ne]._registerOnCollectionChange(()=>{}),this.controls.splice(ne,1),this.updateValueAndValidity({emitEvent:k.emitEvent})}setControl(q,k,ne={}){let Te=this._adjustIndex(q);Te<0&&(Te=0),this.controls[Te]&&this.controls[Te]._registerOnCollectionChange(()=>{}),this.controls.splice(Te,1),k&&(this.controls.splice(Te,0,k),this._registerControl(k)),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(q,k={}){Be(this,0,q),q.forEach((ne,Te)=>{ge(this,!1,Te),this.at(Te).setValue(ne,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(q,k={}){null!=q&&(q.forEach((ne,Te)=>{this.at(Te)&&this.at(Te).patchValue(ne,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(q=[],k={}){this._forEachChild((ne,Te)=>{ne.reset(q[Te],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this.controls.map(q=>q.getRawValue())}clear(q={}){this.controls.length<1||(this._forEachChild(k=>k._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:q.emitEvent}))}_adjustIndex(q){return q<0?q+this.length:q}_syncPendingControls(){let q=this.controls.reduce((k,ne)=>!!ne._syncPendingControls()||k,!1);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_forEachChild(q){this.controls.forEach((k,ne)=>{q(k,ne)})}_updateValue(){this.value=this.controls.filter(q=>q.enabled||this.disabled).map(q=>q.value)}_anyControls(q){return this.controls.some(k=>k.enabled&&q(k))}_setUpControls(){this._forEachChild(q=>this._registerControl(q))}_allControlsDisabled(){for(const q of this.controls)if(q.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(q){q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)}_find(q){return this.at(q)??null}}function js(W){return!!W&&(void 0!==W.asyncValidators||void 0!==W.validators||void 0!==W.updateOn)}let fo=(()=>{class W{constructor(){this.useNonNullable=!1}get nonNullable(){const k=new W;return k.useNonNullable=!0,k}group(k,ne=null){const Te=this._reduceControls(k);let on={};return js(ne)?on=ne:null!==ne&&(on.validators=ne.validator,on.asyncValidators=ne.asyncValidator),new ce(Te,on)}record(k,ne=null){const Te=this._reduceControls(k);return new Fe(Te,ne)}control(k,ne,Te){let on={};return this.useNonNullable?(js(ne)?on=ne:(on.validators=ne,on.asyncValidators=Te),new ns(k,{...on,nonNullable:!0})):new ns(k,ne,Te)}array(k,ne,Te){const on=k.map(Qn=>this._createControl(Qn));return new Ya(on,ne,Te)}_reduceControls(k){const ne={};return Object.keys(k).forEach(Te=>{ne[Te]=this._createControl(k[Te])}),ne}_createControl(k){return k instanceof ns||k instanceof ie?k:Array.isArray(k)?this.control(k[0],k.length>1?k[1]:null,k.length>2?k[2]:null):this.control(k)}static#e=this.\u0275fac=function(ne){return new(ne||W)};static#t=this.\u0275prov=_.wxM({token:W,factory:W.\u0275fac,providedIn:"root"})}return W})(),Ra=(()=>{class W{static withConfig(k){return{ngModule:W,providers:[{provide:Wt,useValue:k.callSetDisabledState??yn}]}}static#e=this.\u0275fac=function(ne){return new(ne||W)};static#t=this.\u0275mod=_.a4G({type:W});static#n=this.\u0275inj=_.s3X({imports:[Wo]})}return W})(),Ys=(()=>{class W{static withConfig(k){return{ngModule:W,providers:[{provide:ra,useValue:k.warnOnNgModelWithFormControl??"always"},{provide:Wt,useValue:k.callSetDisabledState??yn}]}}static#e=this.\u0275fac=function(ne){return new(ne||W)};static#t=this.\u0275mod=_.a4G({type:W});static#n=this.\u0275inj=_.s3X({imports:[Wo]})}return W})()},4476:($t,We,V)=>{V.d(We,{OY:()=>wr,iE:()=>Wn,o_:()=>_n});var _=V(4496),Q=V(1368);class A extends Q.mg{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class F extends A{static makeCurrent(){(0,Q.ug)(new F)}onAndCancel(He,ge,Be){return He.addEventListener(ge,Be),()=>{He.removeEventListener(ge,Be)}}dispatchEvent(He,ge){He.dispatchEvent(ge)}remove(He){He.parentNode&&He.parentNode.removeChild(He)}createElement(He,ge){return(ge=ge||this.getDefaultDocument()).createElement(He)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(He){return He.nodeType===Node.ELEMENT_NODE}isShadowRoot(He){return He instanceof DocumentFragment}getGlobalEventTarget(He,ge){return"window"===ge?window:"document"===ge?He:"body"===ge?He.body:null}getBaseHref(He){const ge=function G(){return ye=ye||document.querySelector("base"),ye?ye.getAttribute("href"):null}();return null==ge?null:function Ie(gt){return new URL(gt,document.baseURI).pathname}(ge)}resetBaseElement(){ye=null}getUserAgent(){return window.navigator.userAgent}getCookie(He){return(0,Q.Sg)(document.cookie,He)}}let ye=null,Ne=(()=>{class gt{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Be){return new(Be||gt)};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac})}return gt})();const he=new _.UbH("");let le=(()=>{class gt{constructor(ge,Be){this._zone=Be,this._eventNameToPlugin=new Map,ge.forEach(ie=>{ie.manager=this}),this._plugins=ge.slice().reverse()}addEventListener(ge,Be,ie){return this._findPluginFor(Be).addEventListener(ge,Be,ie)}getZone(){return this._zone}_findPluginFor(ge){let Be=this._eventNameToPlugin.get(ge);if(Be)return Be;if(Be=this._plugins.find(ce=>ce.supports(ge)),!Be)throw new _.OBp(5101,!1);return this._eventNameToPlugin.set(ge,Be),Be}static#e=this.\u0275fac=function(Be){return new(Be||gt)(_.CoB(he),_.CoB(_.WW2))};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac})}return gt})();class $e{constructor(He){this._doc=He}}const we="ng-app-id";let Se=(()=>{class gt{constructor(ge,Be,ie,ce={}){this.doc=ge,this.appId=Be,this.nonce=ie,this.platformId=ce,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,Q.uf)(ce),this.resetHostNodes()}addStyles(ge){for(const Be of ge)1===this.changeUsageCount(Be,1)&&this.onStyleAdded(Be)}removeStyles(ge){for(const Be of ge)this.changeUsageCount(Be,-1)<=0&&this.onStyleRemoved(Be)}ngOnDestroy(){const ge=this.styleNodesInDOM;ge&&(ge.forEach(Be=>Be.remove()),ge.clear());for(const Be of this.getAllStyles())this.onStyleRemoved(Be);this.resetHostNodes()}addHost(ge){this.hostNodes.add(ge);for(const Be of this.getAllStyles())this.addStyleToHost(ge,Be)}removeHost(ge){this.hostNodes.delete(ge)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(ge){for(const Be of this.hostNodes)this.addStyleToHost(Be,ge)}onStyleRemoved(ge){const Be=this.styleRef;Be.get(ge)?.elements?.forEach(ie=>ie.remove()),Be.delete(ge)}collectServerRenderedStyles(){const ge=this.doc.head?.querySelectorAll(`style[${we}="${this.appId}"]`);if(ge?.length){const Be=new Map;return ge.forEach(ie=>{null!=ie.textContent&&Be.set(ie.textContent,ie)}),Be}return null}changeUsageCount(ge,Be){const ie=this.styleRef;if(ie.has(ge)){const ce=ie.get(ge);return ce.usage+=Be,ce.usage}return ie.set(ge,{usage:Be,elements:[]}),Be}getStyleElement(ge,Be){const ie=this.styleNodesInDOM,ce=ie?.get(Be);if(ce?.parentNode===ge)return ie.delete(Be),ce.removeAttribute(we),ce;{const Z=this.doc.createElement("style");return this.nonce&&Z.setAttribute("nonce",this.nonce),Z.textContent=Be,this.platformIsServer&&Z.setAttribute(we,this.appId),ge.appendChild(Z),Z}}addStyleToHost(ge,Be){const ie=this.getStyleElement(ge,Be),ce=this.styleRef,Z=ce.get(Be)?.elements;Z?Z.push(ie):ce.set(Be,{elements:[ie],usage:1})}resetHostNodes(){const ge=this.hostNodes;ge.clear(),ge.add(this.doc.head)}static#e=this.\u0275fac=function(Be){return new(Be||gt)(_.CoB(Q.Ud),_.CoB(_.QHP),_.CoB(_.YND,8),_.CoB(_.AHE))};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac})}return gt})();const Ve={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},be=/%COMP%/g,Ee=new _.UbH("",{providedIn:"root",factory:()=>!0});function wt(gt,He){return He.map(ge=>ge.replace(be,gt))}let Dt=(()=>{class gt{constructor(ge,Be,ie,ce,Z,X,ee,Fe=null){this.eventManager=ge,this.sharedStylesHost=Be,this.appId=ie,this.removeStylesOnCompDestroy=ce,this.doc=Z,this.platformId=X,this.ngZone=ee,this.nonce=Fe,this.rendererByCompId=new Map,this.platformIsServer=(0,Q.uf)(X),this.defaultRenderer=new xe(ge,Z,ee,this.platformIsServer)}createRenderer(ge,Be){if(!ge||!Be)return this.defaultRenderer;this.platformIsServer&&Be.encapsulation===_.K6R.ShadowDom&&(Be={...Be,encapsulation:_.K6R.Emulated});const ie=this.getOrCreateRenderer(ge,Be);return ie instanceof tt?ie.applyToHost(ge):ie instanceof et&&ie.applyStyles(),ie}getOrCreateRenderer(ge,Be){const ie=this.rendererByCompId;let ce=ie.get(Be.id);if(!ce){const Z=this.doc,X=this.ngZone,ee=this.eventManager,Fe=this.sharedStylesHost,mt=this.removeStylesOnCompDestroy,Wt=this.platformIsServer;switch(Be.encapsulation){case _.K6R.Emulated:ce=new tt(ee,Fe,Be,this.appId,mt,Z,X,Wt);break;case _.K6R.ShadowDom:return new Le(ee,Fe,ge,Be,Z,X,this.nonce,Wt);default:ce=new et(ee,Fe,Be,mt,Z,X,Wt)}ie.set(Be.id,ce)}return ce}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Be){return new(Be||gt)(_.CoB(le),_.CoB(Se),_.CoB(_.QHP),_.CoB(Ee),_.CoB(Q.Ud),_.CoB(_.AHE),_.CoB(_.WW2),_.CoB(_.YND))};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac})}return gt})();class xe{constructor(He,ge,Be,ie){this.eventManager=He,this.doc=ge,this.ngZone=Be,this.platformIsServer=ie,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(He,ge){return ge?this.doc.createElementNS(Ve[ge]||ge,He):this.doc.createElement(He)}createComment(He){return this.doc.createComment(He)}createText(He){return this.doc.createTextNode(He)}appendChild(He,ge){(ht(He)?He.content:He).appendChild(ge)}insertBefore(He,ge,Be){He&&(ht(He)?He.content:He).insertBefore(ge,Be)}removeChild(He,ge){He&&He.removeChild(ge)}selectRootElement(He,ge){let Be="string"==typeof He?this.doc.querySelector(He):He;if(!Be)throw new _.OBp(-5104,!1);return ge||(Be.textContent=""),Be}parentNode(He){return He.parentNode}nextSibling(He){return He.nextSibling}setAttribute(He,ge,Be,ie){if(ie){ge=ie+":"+ge;const ce=Ve[ie];ce?He.setAttributeNS(ce,ge,Be):He.setAttribute(ge,Be)}else He.setAttribute(ge,Be)}removeAttribute(He,ge,Be){if(Be){const ie=Ve[Be];ie?He.removeAttributeNS(ie,ge):He.removeAttribute(`${Be}:${ge}`)}else He.removeAttribute(ge)}addClass(He,ge){He.classList.add(ge)}removeClass(He,ge){He.classList.remove(ge)}setStyle(He,ge,Be,ie){ie&(_.yzm.DashCase|_.yzm.Important)?He.style.setProperty(ge,Be,ie&_.yzm.Important?"important":""):He.style[ge]=Be}removeStyle(He,ge,Be){Be&_.yzm.DashCase?He.style.removeProperty(ge):He.style[ge]=""}setProperty(He,ge,Be){null!=He&&(He[ge]=Be)}setValue(He,ge){He.nodeValue=ge}listen(He,ge,Be){if("string"==typeof He&&!(He=(0,Q.uy)().getGlobalEventTarget(this.doc,He)))throw new Error(`Unsupported event target ${He} for event ${ge}`);return this.eventManager.addEventListener(He,ge,this.decoratePreventDefault(Be))}decoratePreventDefault(He){return ge=>{if("__ngUnwrap__"===ge)return He;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>He(ge)):He(ge))&&ge.preventDefault()}}}function ht(gt){return"TEMPLATE"===gt.tagName&&void 0!==gt.content}class Le extends xe{constructor(He,ge,Be,ie,ce,Z,X,ee){super(He,ce,Z,ee),this.sharedStylesHost=ge,this.hostEl=Be,this.shadowRoot=Be.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Fe=wt(ie.id,ie.styles);for(const mt of Fe){const Wt=document.createElement("style");X&&Wt.setAttribute("nonce",X),Wt.textContent=mt,this.shadowRoot.appendChild(Wt)}}nodeOrShadowRoot(He){return He===this.hostEl?this.shadowRoot:He}appendChild(He,ge){return super.appendChild(this.nodeOrShadowRoot(He),ge)}insertBefore(He,ge,Be){return super.insertBefore(this.nodeOrShadowRoot(He),ge,Be)}removeChild(He,ge){return super.removeChild(this.nodeOrShadowRoot(He),ge)}parentNode(He){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(He)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class et extends xe{constructor(He,ge,Be,ie,ce,Z,X,ee){super(He,ce,Z,X),this.sharedStylesHost=ge,this.removeStylesOnCompDestroy=ie,this.styles=ee?wt(ee,Be.styles):Be.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class tt extends et{constructor(He,ge,Be,ie,ce,Z,X,ee){const Fe=ie+"-"+Be.id;super(He,ge,Be,ce,Z,X,ee,Fe),this.contentAttr=function qe(gt){return"_ngcontent-%COMP%".replace(be,gt)}(Fe),this.hostAttr=function de(gt){return"_nghost-%COMP%".replace(be,gt)}(Fe)}applyToHost(He){this.applyStyles(),this.setAttribute(He,this.hostAttr,"")}createElement(He,ge){const Be=super.createElement(He,ge);return super.setAttribute(Be,this.contentAttr,""),Be}}let nt=(()=>{class gt extends $e{constructor(ge){super(ge)}supports(ge){return!0}addEventListener(ge,Be,ie){return ge.addEventListener(Be,ie,!1),()=>this.removeEventListener(ge,Be,ie)}removeEventListener(ge,Be,ie){return ge.removeEventListener(Be,ie)}static#e=this.\u0275fac=function(Be){return new(Be||gt)(_.CoB(Q.Ud))};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac})}return gt})();const Nt=["alt","control","meta","shift"],tn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Oe={alt:gt=>gt.altKey,control:gt=>gt.ctrlKey,meta:gt=>gt.metaKey,shift:gt=>gt.shiftKey};let ze=(()=>{class gt extends $e{constructor(ge){super(ge)}supports(ge){return null!=gt.parseEventName(ge)}addEventListener(ge,Be,ie){const ce=gt.parseEventName(Be),Z=gt.eventCallback(ce.fullKey,ie,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,Q.uy)().onAndCancel(ge,ce.domEventName,Z))}static parseEventName(ge){const Be=ge.toLowerCase().split("."),ie=Be.shift();if(0===Be.length||"keydown"!==ie&&"keyup"!==ie)return null;const ce=gt._normalizeKey(Be.pop());let Z="",X=Be.indexOf("code");if(X>-1&&(Be.splice(X,1),Z="code."),Nt.forEach(Fe=>{const mt=Be.indexOf(Fe);mt>-1&&(Be.splice(mt,1),Z+=Fe+".")}),Z+=ce,0!=Be.length||0===ce.length)return null;const ee={};return ee.domEventName=ie,ee.fullKey=Z,ee}static matchEventFullKeyCode(ge,Be){let ie=tn[ge.key]||ge.key,ce="";return Be.indexOf("code.")>-1&&(ie=ge.code,ce="code."),!(null==ie||!ie)&&(ie=ie.toLowerCase()," "===ie?ie="space":"."===ie&&(ie="dot"),Nt.forEach(Z=>{Z!==ie&&(0,Oe[Z])(ge)&&(ce+=Z+".")}),ce+=ie,ce===Be)}static eventCallback(ge,Be,ie){return ce=>{gt.matchEventFullKeyCode(ce,ge)&&ie.runGuarded(()=>Be(ce))}}static _normalizeKey(ge){return"esc"===ge?"escape":ge}static#e=this.\u0275fac=function(Be){return new(Be||gt)(_.CoB(Q.Ud))};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac})}return gt})();const _n=(0,_.grM)(_.m4O,"browser",[{provide:_.AHE,useValue:Q._k},{provide:_.crf,useValue:function Tt(){F.makeCurrent()},multi:!0},{provide:Q.Ud,useFactory:function Zt(){return(0,_.auf)(document),document},deps:[]}]),Tn=new _.UbH(""),Kt=[{provide:_.Mn9,useClass:class je{addToWindow(He){_.IHs.getAngularTestability=(Be,ie=!0)=>{const ce=He.findTestabilityInTree(Be,ie);if(null==ce)throw new _.OBp(5103,!1);return ce},_.IHs.getAllAngularTestabilities=()=>He.getAllTestabilities(),_.IHs.getAllAngularRootElements=()=>He.getAllRootElements(),_.IHs.frameworkStabilizers||(_.IHs.frameworkStabilizers=[]),_.IHs.frameworkStabilizers.push(Be=>{const ie=_.IHs.getAllAngularTestabilities();let ce=ie.length;const Z=function(){ce--,0==ce&&Be()};ie.forEach(X=>{X.whenStable(Z)})})}findTestabilityInTree(He,ge,Be){return null==ge?null:He.getTestability(ge)??(Be?(0,Q.uy)().isShadowRoot(ge)?this.findTestabilityInTree(He,ge.host,!0):this.findTestabilityInTree(He,ge.parentElement,!0):null)}},deps:[]},{provide:_.aS5,useClass:_.G4X,deps:[_.WW2,_.eOv,_.Mn9]},{provide:_.G4X,useClass:_.G4X,deps:[_.WW2,_.eOv,_.Mn9]}],wn=[{provide:_.i4S,useValue:"root"},{provide:_.eAe,useFactory:function qt(){return new _.eAe},deps:[]},{provide:he,useClass:nt,multi:!0,deps:[Q.Ud,_.WW2,_.AHE]},{provide:he,useClass:ze,multi:!0,deps:[Q.Ud]},Dt,Se,le,{provide:_.O8F,useExisting:Dt},{provide:Q.OM,useClass:Ne,deps:[]},[]];let Wn=(()=>{class gt{constructor(ge){}static withServerTransition(ge){return{ngModule:gt,providers:[{provide:_.QHP,useValue:ge.appId}]}}static#e=this.\u0275fac=function(Be){return new(Be||gt)(_.CoB(Tn,12))};static#t=this.\u0275mod=_.a4G({type:gt});static#n=this.\u0275inj=_.s3X({providers:[...wn,...Kt],imports:[Q.MD,_.Ev2]})}return gt})(),wr=(()=>{class gt{constructor(ge){this._doc=ge}getTitle(){return this._doc.title}setTitle(ge){this._doc.title=ge||""}static#e=this.\u0275fac=function(Be){return new(Be||gt)(_.CoB(Q.Ud))};static#t=this.\u0275prov=_.wxM({token:gt,factory:gt.\u0275fac,providedIn:"root"})}return gt})()},4856:($t,We,V)=>{V.d(We,{gV:()=>Pi,E5:()=>Jr,ER:()=>nn,qQ:()=>pr,cP:()=>Ei});var _=V(4496),Q=V(3252),A=V(8880),ye=V(9900),G=V(2700),Ie=V(6700),je=V(4300),Ne=V(528),he=V(4187),le=V(6624),$e=V(7904),we=V(7773),Se=V(9399);function Ve(...C){const M=(0,le.e_)(C),T=(0,le.yu)(C),{args:O,keys:j}=(0,je.Q)(C);if(0===O.length)return(0,ye.Q)([],M);const te=new Q._(function be(C,M,T=Ne.Z){return O=>{ot(M,()=>{const{length:j}=C,te=new Array(j);let me=j,at=j;for(let Ze=0;Ze<j;Ze++)ot(M,()=>{const Vt=(0,ye.Q)(C[Ze],M);let Ft=!1;Vt.subscribe((0,we.e)(O,Xn=>{te[Ze]=Xn,Ft||(Ft=!0,at--),at||O.next(T(te.slice()))},()=>{--me||O.complete()}))},O)},O)}}(O,M,j?me=>(0,$e.q)(j,me):Ne.Z));return T?te.pipe((0,he.j)(T)):te}function ot(C,M,T){C?(0,Se._)(T,C,M):M()}var pe=V(7696),Ue=V(7228),Ke=V(560);function Ee(C){return new Q._(M=>{(0,Ke.Uv)(C()).subscribe(M)})}var qe=V(3928);function de(C,M){const T=(0,A.m)(C)?C:()=>C,O=j=>j.error(T());return new Q._(M?j=>M.schedule(O,0,j):O)}var wt=V(8960),Dt=V(6928),xe=V(5448);function Et(){return(0,xe.i)((C,M)=>{let T=null;C._refCount++;const O=(0,we.e)(M,void 0,void 0,void 0,()=>{if(!C||C._refCount<=0||0<--C._refCount)return void(T=null);const j=C._connection,te=T;T=null,j&&(!te||j===te)&&j.unsubscribe(),M.unsubscribe()});C.subscribe(O),O.closed||(T=C.connect())})}class bt extends Q._{constructor(M,T){super(),this.source=M,this.subjectFactory=T,this._subject=null,this._refCount=0,this._connection=null,(0,xe.e)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,M?.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new Dt.wH;const T=this.getSubject();M.add(this.source.subscribe((0,we.e)(T,void 0,()=>{this._teardown(),T.complete()},O=>{this._teardown(),T.error(O)},()=>this._teardown()))),M.closed&&(this._connection=null,M=Dt.wH.EMPTY)}return M}refCount(){return Et()(this)}}var ht=V(5657),Le=V(1368),et=V(4704),tt=V(7368),nt=V(3992),Nt=V(5568),tn=V(6684),Oe=V(7400),ze=V(5084),st=V(6020),Ge=V(9212),lt=V(9144),ut=V(208),Tt=V(2156);function qt(C){return C<=0?()=>wt.k:(0,xe.i)((M,T)=>{let O=[];M.subscribe((0,we.e)(T,j=>{O.push(j),C<O.length&&O.shift()},()=>{for(const j of O)T.next(j);T.complete()},void 0,()=>{O=null}))})}var Zt=V(8124),Tn=V(8824),Kt=V(308),Wn=V(267),Rr=V(4476);const Bt="primary",wr=Symbol("RouteTitle");class Lt{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const T=this.params[M];return Array.isArray(T)?T[0]:T}return null}getAll(M){if(this.has(M)){const T=this.params[M];return Array.isArray(T)?T:[T]}return[]}get keys(){return Object.keys(this.params)}}function zr(C){return new Lt(C)}function kn(C,M,T){const O=T.path.split("/");if(O.length>C.length||"full"===T.pathMatch&&(M.hasChildren()||O.length<C.length))return null;const j={};for(let te=0;te<O.length;te++){const me=O[te],at=C[te];if(me.startsWith(":"))j[me.substring(1)]=at;else if(me!==at.path)return null}return{consumed:C.slice(0,O.length),posParams:j}}function yr(C,M){const T=C?vi(C):void 0,O=M?vi(M):void 0;if(!T||!O||T.length!=O.length)return!1;let j;for(let te=0;te<T.length;te++)if(j=T[te],!rr(C[j],M[j]))return!1;return!0}function vi(C){return[...Object.keys(C),...Object.getOwnPropertySymbols(C)]}function rr(C,M){if(Array.isArray(C)&&Array.isArray(M)){if(C.length!==M.length)return!1;const T=[...C].sort(),O=[...M].sort();return T.every((j,te)=>O[te]===j)}return C===M}function vn(C){return C.length>0?C[C.length-1]:null}function gn(C){return function F(C){return!!C&&(C instanceof Q._||(0,A.m)(C.lift)&&(0,A.m)(C.subscribe))}(C)?C:(0,_.w5$)(C)?(0,ye.Q)(Promise.resolve(C)):(0,G.of)(C)}const ii={exact:function Oi(C,M,T){if(!Nr(C.segments,M.segments)||!Cn(C.segments,M.segments,T)||C.numberOfChildren!==M.numberOfChildren)return!1;for(const O in M.children)if(!C.children[O]||!Oi(C.children[O],M.children[O],T))return!1;return!0},subset:Fn},Hs={exact:function Bi(C,M){return yr(C,M)},subset:function bn(C,M){return Object.keys(M).length<=Object.keys(C).length&&Object.keys(M).every(T=>rr(C[T],M[T]))},ignored:()=>!0};function qr(C,M,T){return ii[T.paths](C.root,M.root,T.matrixParams)&&Hs[T.queryParams](C.queryParams,M.queryParams)&&!("exact"===T.fragment&&C.fragment!==M.fragment)}function Fn(C,M,T){return Tr(C,M,M.segments,T)}function Tr(C,M,T,O){if(C.segments.length>T.length){const j=C.segments.slice(0,T.length);return!(!Nr(j,T)||M.hasChildren()||!Cn(j,T,O))}if(C.segments.length===T.length){if(!Nr(C.segments,T)||!Cn(C.segments,T,O))return!1;for(const j in M.children)if(!C.children[j]||!Fn(C.children[j],M.children[j],O))return!1;return!0}{const j=T.slice(0,C.segments.length),te=T.slice(C.segments.length);return!!(Nr(C.segments,j)&&Cn(C.segments,j,O)&&C.children[Bt])&&Tr(C.children[Bt],M,te,O)}}function Cn(C,M,T){return M.every((O,j)=>Hs[T](C[j].parameters,O.parameters))}class Mr{constructor(M=new Gn([],{}),T={},O=null){this.root=M,this.queryParams=T,this.fragment=O}get queryParamMap(){return this._queryParamMap??=zr(this.queryParams),this._queryParamMap}toString(){return He.serialize(this)}}class Gn{constructor(M,T){this.segments=M,this.children=T,this.parent=null,Object.values(T).forEach(O=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ge(this)}}class wi{constructor(M,T){this.path=M,this.parameters=T}get parameterMap(){return this._parameterMap??=zr(this.parameters),this._parameterMap}toString(){return mt(this)}}function Nr(C,M){return C.length===M.length&&C.every((T,O)=>T.path===M[O].path)}let pi=(()=>{class C{static#e=this.\u0275fac=function(O){return new(O||C)};static#t=this.\u0275prov=_.wxM({token:C,factory:()=>new gt,providedIn:"root"})}return C})();class gt{parse(M){const T=new Xe(M);return new Mr(T.parseRootSegment(),T.parseQueryParams(),T.parseFragment())}serialize(M){const T=`/${Be(M.root,!0)}`,O=function yn(C){const M=Object.entries(C).map(([T,O])=>Array.isArray(O)?O.map(j=>`${ce(T)}=${ce(j)}`).join("&"):`${ce(T)}=${ce(O)}`).filter(T=>T);return M.length?`?${M.join("&")}`:""}(M.queryParams);return`${T}${O}${"string"==typeof M.fragment?`#${function Z(C){return encodeURI(C)}(M.fragment)}`:""}`}}const He=new gt;function ge(C){return C.segments.map(M=>mt(M)).join("/")}function Be(C,M){if(!C.hasChildren())return ge(C);if(M){const T=C.children[Bt]?Be(C.children[Bt],!1):"",O=[];return Object.entries(C.children).forEach(([j,te])=>{j!==Bt&&O.push(`${j}:${Be(te,!1)}`)}),O.length>0?`${T}(${O.join("//")})`:T}{const T=function Ds(C,M){let T=[];return Object.entries(C.children).forEach(([O,j])=>{O===Bt&&(T=T.concat(M(j,O)))}),Object.entries(C.children).forEach(([O,j])=>{O!==Bt&&(T=T.concat(M(j,O)))}),T}(C,(O,j)=>j===Bt?[Be(C.children[Bt],!1)]:[`${j}:${Be(O,!1)}`]);return 1===Object.keys(C.children).length&&null!=C.children[Bt]?`${ge(C)}/${T[0]}`:`${ge(C)}/(${T.join("//")})`}}function ie(C){return encodeURIComponent(C).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ce(C){return ie(C).replace(/%3B/gi,";")}function X(C){return ie(C).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ee(C){return decodeURIComponent(C)}function Fe(C){return ee(C.replace(/\+/g,"%20"))}function mt(C){return`${X(C.path)}${function Wt(C){return Object.entries(C).map(([M,T])=>`;${X(M)}=${X(T)}`).join("")}(C.parameters)}`}const En=/^[^\/()?;#]+/;function On(C){const M=C.match(En);return M?M[0]:""}const Yt=/^[^\/()?;=#]+/,ln=/^[^=?&#]+/,Re=/^[^&#]+/;class Xe{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Gn([],{}):new Gn([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let T={};this.peekStartsWith("/(")&&(this.capture("/"),T=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(M.length>0||Object.keys(T).length>0)&&(O[Bt]=new Gn(M,T)),O}parseSegment(){const M=On(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new _.OBp(4009,!1);return this.capture(M),new wi(ee(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const T=function Dr(C){const M=C.match(Yt);return M?M[0]:""}(this.remaining);if(!T)return;this.capture(T);let O="";if(this.consumeOptional("=")){const j=On(this.remaining);j&&(O=j,this.capture(O))}M[ee(T)]=ee(O)}parseQueryParam(M){const T=function Ln(C){const M=C.match(ln);return M?M[0]:""}(this.remaining);if(!T)return;this.capture(T);let O="";if(this.consumeOptional("=")){const me=function Ye(C){const M=C.match(Re);return M?M[0]:""}(this.remaining);me&&(O=me,this.capture(O))}const j=Fe(T),te=Fe(O);if(M.hasOwnProperty(j)){let me=M[j];Array.isArray(me)||(me=[me],M[j]=me),me.push(te)}else M[j]=te}parseParens(M){const T={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=On(this.remaining),j=this.remaining[O.length];if("/"!==j&&")"!==j&&";"!==j)throw new _.OBp(4010,!1);let te;O.indexOf(":")>-1?(te=O.slice(0,O.indexOf(":")),this.capture(te),this.capture(":")):M&&(te=Bt);const me=this.parseChildren();T[te]=1===Object.keys(me).length?me[Bt]:new Gn([],me),this.consumeOptional("//")}return T}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new _.OBp(4011,!1)}}function Ct(C){return C.segments.length>0?new Gn([],{[Bt]:C}):C}function Xt(C){const M={};for(const[O,j]of Object.entries(C.children)){const te=Xt(j);if(O===Bt&&0===te.segments.length&&te.hasChildren())for(const[me,at]of Object.entries(te.children))M[me]=at;else(te.segments.length>0||te.hasChildren())&&(M[O]=te)}return function Bn(C){if(1===C.numberOfChildren&&C.children[Bt]){const M=C.children[Bt];return new Gn(C.segments.concat(M.segments),M.children)}return C}(new Gn(C.segments,M))}function Hn(C){return C instanceof Mr}function Kr(C){let M;const j=Ct(function T(te){const me={};for(const Ze of te.children){const Vt=T(Ze);me[Ze.outlet]=Vt}const at=new Gn(te.url,me);return te===C&&(M=at),at}(C.root));return M??j}function lr(C,M,T,O){let j=C;for(;j.parent;)j=j.parent;if(0===M.length)return Ce(j,j,j,T,O);const te=function xt(C){if("string"==typeof C[0]&&1===C.length&&"/"===C[0])return new It(!0,0,C);let M=0,T=!1;const O=C.reduce((j,te,me)=>{if("object"==typeof te&&null!=te){if(te.outlets){const at={};return Object.entries(te.outlets).forEach(([Ze,Vt])=>{at[Ze]="string"==typeof Vt?Vt.split("/"):Vt}),[...j,{outlets:at}]}if(te.segmentPath)return[...j,te.segmentPath]}return"string"!=typeof te?[...j,te]:0===me?(te.split("/").forEach((at,Ze)=>{0==Ze&&"."===at||(0==Ze&&""===at?T=!0:".."===at?M++:""!=at&&j.push(at))}),j):[...j,te]},[]);return new It(T,M,O)}(M);if(te.toRoot())return Ce(j,j,new Gn([],{}),T,O);const me=function dn(C,M,T){if(C.isAbsolute)return new Gt(M,!0,0);if(!T)return new Gt(M,!1,NaN);if(null===T.parent)return new Gt(T,!0,0);const O=oe(C.commands[0])?0:1;return function rn(C,M,T){let O=C,j=M,te=T;for(;te>j;){if(te-=j,O=O.parent,!O)throw new _.OBp(4005,!1);j=O.segments.length}return new Gt(O,!1,j-te)}(T,T.segments.length-1+O,C.numberOfDoubleDots)}(te,j,C),at=me.processChildren?sr(me.segmentGroup,me.index,te.commands):vr(me.segmentGroup,me.index,te.commands);return Ce(j,me.segmentGroup,at,T,O)}function oe(C){return"object"==typeof C&&null!=C&&!C.outlets&&!C.segmentPath}function ve(C){return"object"==typeof C&&null!=C&&C.outlets}function Ce(C,M,T,O,j){let me,te={};O&&Object.entries(O).forEach(([Ze,Vt])=>{te[Ze]=Array.isArray(Vt)?Vt.map(Ft=>`${Ft}`):`${Vt}`}),me=C===M?T:ft(C,M,T);const at=Ct(Xt(me));return new Mr(at,te,j)}function ft(C,M,T){const O={};return Object.entries(C.children).forEach(([j,te])=>{O[j]=te===M?T:ft(te,M,T)}),new Gn(C.segments,O)}class It{constructor(M,T,O){if(this.isAbsolute=M,this.numberOfDoubleDots=T,this.commands=O,M&&O.length>0&&oe(O[0]))throw new _.OBp(4003,!1);const j=O.find(ve);if(j&&j!==vn(O))throw new _.OBp(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gt{constructor(M,T,O){this.segmentGroup=M,this.processChildren=T,this.index=O}}function vr(C,M,T){if(C??=new Gn([],{}),0===C.segments.length&&C.hasChildren())return sr(C,M,T);const O=function Vn(C,M,T){let O=0,j=M;const te={match:!1,pathIndex:0,commandIndex:0};for(;j<C.segments.length;){if(O>=T.length)return te;const me=C.segments[j],at=T[O];if(ve(at))break;const Ze=`${at}`,Vt=O<T.length-1?T[O+1]:null;if(j>0&&void 0===Ze)break;if(Ze&&Vt&&"object"==typeof Vt&&void 0===Vt.outlets){if(!qn(Ze,Vt,me))return te;O+=2}else{if(!qn(Ze,{},me))return te;O++}j++}return{match:!0,pathIndex:j,commandIndex:O}}(C,M,T),j=T.slice(O.commandIndex);if(O.match&&O.pathIndex<C.segments.length){const te=new Gn(C.segments.slice(0,O.pathIndex),{});return te.children[Bt]=new Gn(C.segments.slice(O.pathIndex),C.children),sr(te,0,j)}return O.match&&0===j.length?new Gn(C.segments,{}):O.match&&!C.hasChildren()?ns(C,M,T):O.match?sr(C,0,j):ns(C,M,T)}function sr(C,M,T){if(0===T.length)return new Gn(C.segments,{});{const O=function zn(C){return ve(C[0])?C[0].outlets:{[Bt]:C}}(T),j={};if(Object.keys(O).some(te=>te!==Bt)&&C.children[Bt]&&1===C.numberOfChildren&&0===C.children[Bt].segments.length){const te=sr(C.children[Bt],M,T);return new Gn(C.segments,te.children)}return Object.entries(O).forEach(([te,me])=>{"string"==typeof me&&(me=[me]),null!==me&&(j[te]=vr(C.children[te],M,me))}),Object.entries(C.children).forEach(([te,me])=>{void 0===O[te]&&(j[te]=me)}),new Gn(C.segments,j)}}function ns(C,M,T){const O=C.segments.slice(0,M);let j=0;for(;j<T.length;){const te=T[j];if(ve(te)){const Ze=Ti(te.outlets);return new Gn(O,Ze)}if(0===j&&oe(T[0])){O.push(new wi(C.segments[M].path,kr(T[0]))),j++;continue}const me=ve(te)?te.outlets[Bt]:`${te}`,at=j<T.length-1?T[j+1]:null;me&&at&&oe(at)?(O.push(new wi(me,kr(at))),j+=2):(O.push(new wi(me,{})),j++)}return new Gn(O,{})}function Ti(C){const M={};return Object.entries(C).forEach(([T,O])=>{"string"==typeof O&&(O=[O]),null!==O&&(M[T]=ns(new Gn([],{}),0,O))}),M}function kr(C){const M={};return Object.entries(C).forEach(([T,O])=>M[T]=`${O}`),M}function qn(C,M,T){return C==T.path&&yr(M,T.parameters)}const ei="imperative";var $n=function(C){return C[C.NavigationStart=0]="NavigationStart",C[C.NavigationEnd=1]="NavigationEnd",C[C.NavigationCancel=2]="NavigationCancel",C[C.NavigationError=3]="NavigationError",C[C.RoutesRecognized=4]="RoutesRecognized",C[C.ResolveStart=5]="ResolveStart",C[C.ResolveEnd=6]="ResolveEnd",C[C.GuardsCheckStart=7]="GuardsCheckStart",C[C.GuardsCheckEnd=8]="GuardsCheckEnd",C[C.RouteConfigLoadStart=9]="RouteConfigLoadStart",C[C.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",C[C.ChildActivationStart=11]="ChildActivationStart",C[C.ChildActivationEnd=12]="ChildActivationEnd",C[C.ActivationStart=13]="ActivationStart",C[C.ActivationEnd=14]="ActivationEnd",C[C.Scroll=15]="Scroll",C[C.NavigationSkipped=16]="NavigationSkipped",C}($n||{});class fr{constructor(M,T){this.id=M,this.url=T}}class rs extends fr{constructor(M,T,O="imperative",j=null){super(M,T),this.type=$n.NavigationStart,this.navigationTrigger=O,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Di extends fr{constructor(M,T,O){super(M,T),this.urlAfterRedirects=O,this.type=$n.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var si=function(C){return C[C.Redirect=0]="Redirect",C[C.SupersededByNewNavigation=1]="SupersededByNewNavigation",C[C.NoDataFromResolver=2]="NoDataFromResolver",C[C.GuardRejected=3]="GuardRejected",C}(si||{}),Yr=function(C){return C[C.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",C[C.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",C}(Yr||{});class As extends fr{constructor(M,T,O,j){super(M,T),this.reason=O,this.code=j,this.type=$n.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ai extends fr{constructor(M,T,O,j){super(M,T),this.reason=O,this.code=j,this.type=$n.NavigationSkipped}}class $o extends fr{constructor(M,T,O,j){super(M,T),this.error=O,this.target=j,this.type=$n.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ji extends fr{constructor(M,T,O,j){super(M,T),this.urlAfterRedirects=O,this.state=j,this.type=$n.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Go extends fr{constructor(M,T,O,j){super(M,T),this.urlAfterRedirects=O,this.state=j,this.type=$n.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ka extends fr{constructor(M,T,O,j,te){super(M,T),this.urlAfterRedirects=O,this.state=j,this.shouldActivate=te,this.type=$n.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Zn extends fr{constructor(M,T,O,j){super(M,T),this.urlAfterRedirects=O,this.state=j,this.type=$n.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Si extends fr{constructor(M,T,O,j){super(M,T),this.urlAfterRedirects=O,this.state=j,this.type=$n.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $r{constructor(M){this.route=M,this.type=$n.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ss{constructor(M){this.route=M,this.type=$n.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oi{constructor(M){this.snapshot=M,this.type=$n.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ra{constructor(M){this.snapshot=M,this.type=$n.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ia{constructor(M){this.snapshot=M,this.type=$n.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bs{constructor(M){this.snapshot=M,this.type=$n.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zs{constructor(M,T,O){this.routerEvent=M,this.position=T,this.anchor=O,this.type=$n.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class bo{}class Qr{constructor(M){this.url=M}}class mn{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ar,this.attachRef=null}}let Ar=(()=>{class C{constructor(){this.contexts=new Map}onChildOutletCreated(T,O){const j=this.getOrCreateContext(T);j.outlet=O,this.contexts.set(T,j)}onChildOutletDestroyed(T){const O=this.getContext(T);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const T=this.contexts;return this.contexts=new Map,T}onOutletReAttached(T){this.contexts=T}getOrCreateContext(T){let O=this.getContext(T);return O||(O=new mn,this.contexts.set(T,O)),O}getContext(T){return this.contexts.get(T)||null}static#e=this.\u0275fac=function(O){return new(O||C)};static#t=this.\u0275prov=_.wxM({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})();class Yi{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const T=this.pathFromRoot(M);return T.length>1?T[T.length-2]:null}children(M){const T=xi(M,this._root);return T?T.children.map(O=>O.value):[]}firstChild(M){const T=xi(M,this._root);return T&&T.children.length>0?T.children[0].value:null}siblings(M){const T=Ni(M,this._root);return T.length<2?[]:T[T.length-2].children.map(j=>j.value).filter(j=>j!==M)}pathFromRoot(M){return Ni(M,this._root).map(T=>T.value)}}function xi(C,M){if(C===M.value)return M;for(const T of M.children){const O=xi(C,T);if(O)return O}return null}function Ni(C,M){if(C===M.value)return[M];for(const T of M.children){const O=Ni(C,T);if(O.length)return O.unshift(M),O}return[]}class $i{constructor(M,T){this.value=M,this.children=T}toString(){return`TreeNode(${this.value})`}}function or(C){const M={};return C&&C.children.forEach(T=>M[T.value.outlet]=T),M}class ki extends Yi{constructor(M,T){super(M),this.snapshot=T,Ps(this,M)}toString(){return this.snapshot.toString()}}function Gi(C){const M=function An(C){const te=new qs([],{},{},"",{},Bt,C,null,{});return new li("",new $i(te,[]))}(C),T=new Ie.g([new wi("",{})]),O=new Ie.g({}),j=new Ie.g({}),te=new Ie.g({}),me=new Ie.g(""),at=new Pi(T,O,te,me,j,Bt,C,M.root);return at.snapshot=M.root,new ki(new $i(at,[]),M)}class Pi{constructor(M,T,O,j,te,me,at,Ze){this.urlSubject=M,this.paramsSubject=T,this.queryParamsSubject=O,this.fragmentSubject=j,this.dataSubject=te,this.outlet=me,this.component=at,this._futureSnapshot=Ze,this.title=this.dataSubject?.pipe((0,et.k)(Vt=>Vt[wr]))??(0,G.of)(void 0),this.url=M,this.params=T,this.queryParams=O,this.fragment=j,this.data=te}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,et.k)(M=>zr(M))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,et.k)(M=>zr(M))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ho(C,M,T="emptyOnly"){let O;const{routeConfig:j}=C;return O=null===M||"always"!==T&&""!==j?.path&&(M.component||M.routeConfig?.loadComponent)?{params:{...C.params},data:{...C.data},resolve:{...C.data,...C._resolvedData??{}}}:{params:{...M.params,...C.params},data:{...M.data,...C.data},resolve:{...C.data,...M.data,...j?.data,...C._resolvedData}},j&&Qi(j)&&(O.resolve[wr]=j.title),O}class qs{get title(){return this.data?.[wr]}constructor(M,T,O,j,te,me,at,Ze,Vt){this.url=M,this.params=T,this.queryParams=O,this.fragment=j,this.data=te,this.outlet=me,this.component=at,this.routeConfig=Ze,this._resolve=Vt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zr(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class li extends Yi{constructor(M,T){super(T),this.url=M,Ps(this,T)}toString(){return bs(this._root)}}function Ps(C,M){M.value._routerState=C,M.children.forEach(T=>Ps(C,T))}function bs(C){const M=C.children.length>0?` { ${C.children.map(bs).join(", ")} } `:"";return`${C.value}${M}`}function bi(C){if(C.snapshot){const M=C.snapshot,T=C._futureSnapshot;C.snapshot=T,yr(M.queryParams,T.queryParams)||C.queryParamsSubject.next(T.queryParams),M.fragment!==T.fragment&&C.fragmentSubject.next(T.fragment),yr(M.params,T.params)||C.paramsSubject.next(T.params),function Zr(C,M){if(C.length!==M.length)return!1;for(let T=0;T<C.length;++T)if(!yr(C[T],M[T]))return!1;return!0}(M.url,T.url)||C.urlSubject.next(T.url),yr(M.data,T.data)||C.dataSubject.next(T.data)}else C.snapshot=C._futureSnapshot,C.dataSubject.next(C._futureSnapshot.data)}function is(C,M){const T=yr(C.params,M.params)&&function jr(C,M){return Nr(C,M)&&C.every((T,O)=>yr(T.parameters,M[O].parameters))}(C.url,M.url);return T&&!(!C.parent!=!M.parent)&&(!C.parent||is(C.parent,M.parent))}function Qi(C){return"string"==typeof C.title||null===C.title}let Ei=(()=>{class C{constructor(){this.activated=null,this._activatedRoute=null,this.name=Bt,this.activateEvents=new _._w7,this.deactivateEvents=new _._w7,this.attachEvents=new _._w7,this.detachEvents=new _._w7,this.parentContexts=(0,_.uUt)(Ar),this.location=(0,_.uUt)(_.y8U),this.changeDetector=(0,_.uUt)(_.kD9),this.environmentInjector=(0,_.uUt)(_.SIe),this.inputBinder=(0,_.uUt)(Rs,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(T){if(T.name){const{firstChange:O,previousValue:j}=T.name;if(O)return;this.isTrackedInParentContexts(j)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(j)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(T){return this.parentContexts.getContext(T)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const T=this.parentContexts.getContext(this.name);T?.route&&(T.attachRef?this.attach(T.attachRef,T.route):this.activateWith(T.route,T.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.OBp(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.OBp(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.OBp(4012,!1);this.location.detach();const T=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(T.instance),T}attach(T,O){this.activated=T,this._activatedRoute=O,this.location.insert(T.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(T.instance)}deactivate(){if(this.activated){const T=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,O){if(this.isActivated)throw new _.OBp(4013,!1);this._activatedRoute=T;const j=this.location,me=T.snapshot.component,at=this.parentContexts.getOrCreateContext(this.name).children,Ze=new Ro(T,at,j.injector);this.activated=j.createComponent(me,{index:j.length,injector:Ze,environmentInjector:O??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(O){return new(O||C)};static#t=this.\u0275dir=_.Sc5({type:C,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_.SYr]})}return C})();class Ro{constructor(M,T,O){this.route=M,this.childContexts=T,this.parent=O}get(M,T){return M===Pi?this.route:M===Ar?this.childContexts:this.parent.get(M,T)}}const Rs=new _.UbH("");let sn=(()=>{class C{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(T){this.unsubscribeFromRouteData(T),this.subscribeToRouteData(T)}unsubscribeFromRouteData(T){this.outletDataSubscriptions.get(T)?.unsubscribe(),this.outletDataSubscriptions.delete(T)}subscribeToRouteData(T){const{activatedRoute:O}=T,j=Ve([O.queryParams,O.params,O.data]).pipe((0,tt.G)(([te,me,at],Ze)=>(at={...te,...me,...at},0===Ze?(0,G.of)(at):Promise.resolve(at)))).subscribe(te=>{if(!T.isActivated||!T.activatedComponentRef||T.activatedRoute!==O||null===O.component)return void this.unsubscribeFromRouteData(T);const me=(0,_.o9M)(O.component);if(me)for(const{templateName:at}of me.inputs)T.activatedComponentRef.setInput(at,te[at]);else this.unsubscribeFromRouteData(T)});this.outletDataSubscriptions.set(T,j)}static#e=this.\u0275fac=function(O){return new(O||C)};static#t=this.\u0275prov=_.wxM({token:C,factory:C.\u0275fac})}return C})();function Ms(C,M,T){if(T&&C.shouldReuseRoute(M.value,T.value.snapshot)){const O=T.value;O._futureSnapshot=M.value;const j=function Wi(C,M,T){return M.children.map(O=>{for(const j of T.children)if(C.shouldReuseRoute(O.value,j.value.snapshot))return Ms(C,O,j);return Ms(C,O)})}(C,M,T);return new $i(O,j)}{if(C.shouldAttach(M.value)){const te=C.retrieve(M.value);if(null!==te){const me=te.route;return me.value._futureSnapshot=M.value,me.children=M.children.map(at=>Ms(C,at)),me}}const O=function fa(C){return new Pi(new Ie.g(C.url),new Ie.g(C.params),new Ie.g(C.queryParams),new Ie.g(C.fragment),new Ie.g(C.data),C.outlet,C.component,C)}(M.value),j=M.children.map(te=>Ms(C,te));return new $i(O,j)}}const Oo="ngNavigationCancelingError";function di(C,M){const{redirectTo:T,navigationBehaviorOptions:O}=Hn(M)?{redirectTo:M,navigationBehaviorOptions:void 0}:M,j=ys(!1,si.Redirect);return j.url=T,j.navigationBehaviorOptions=O,j}function ys(C,M){const T=new Error(`NavigationCancelingError: ${C||""}`);return T[Oo]=!0,T.cancellationCode=M,T}function Hi(C){return!!C&&C[Oo]}let Os=(()=>{class C{static#e=this.\u0275fac=function(O){return new(O||C)};static#t=this.\u0275cmp=_.In1({type:C,selectors:[["ng-component"]],standalone:!0,features:[_.UHJ],decls:1,vars:0,template:function(O,j){1&O&&_.wR5(0,"router-outlet")},dependencies:[Ei],encapsulation:2})}return C})();function js(C){const M=C.children&&C.children.map(js),T=M?{...C,children:M}:{...C};return!T.component&&!T.loadComponent&&(M||T.loadChildren)&&T.outlet&&T.outlet!==Bt&&(T.component=Os),T}function fo(C){return C.outlet||Bt}function ga(C){if(!C)return null;if(C.routeConfig?._injector)return C.routeConfig._injector;for(let M=C.parent;M;M=M.parent){const T=M.routeConfig;if(T?._loadedInjector)return T._loadedInjector;if(T?._injector)return T._injector}return null}class Ys{constructor(M,T,O,j,te){this.routeReuseStrategy=M,this.futureState=T,this.currState=O,this.forwardEvent=j,this.inputBindingEnabled=te}activate(M){const T=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(T,O,M),bi(this.futureState.root),this.activateChildRoutes(T,O,M)}deactivateChildRoutes(M,T,O){const j=or(T);M.children.forEach(te=>{const me=te.value.outlet;this.deactivateRoutes(te,j[me],O),delete j[me]}),Object.values(j).forEach(te=>{this.deactivateRouteAndItsChildren(te,O)})}deactivateRoutes(M,T,O){const j=M.value,te=T?T.value:null;if(j===te)if(j.component){const me=O.getContext(j.outlet);me&&this.deactivateChildRoutes(M,T,me.children)}else this.deactivateChildRoutes(M,T,O);else te&&this.deactivateRouteAndItsChildren(T,O)}deactivateRouteAndItsChildren(M,T){M.value.component&&this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,T):this.deactivateRouteAndOutlet(M,T)}detachAndStoreRouteSubtree(M,T){const O=T.getContext(M.value.outlet),j=O&&M.value.component?O.children:T,te=or(M);for(const me of Object.values(te))this.deactivateRouteAndItsChildren(me,j);if(O&&O.outlet){const me=O.outlet.detach(),at=O.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:me,route:M,contexts:at})}}deactivateRouteAndOutlet(M,T){const O=T.getContext(M.value.outlet),j=O&&M.value.component?O.children:T,te=or(M);for(const me of Object.values(te))this.deactivateRouteAndItsChildren(me,j);O&&(O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated()),O.attachRef=null,O.route=null)}activateChildRoutes(M,T,O){const j=or(T);M.children.forEach(te=>{this.activateRoutes(te,j[te.value.outlet],O),this.forwardEvent(new Bs(te.value.snapshot))}),M.children.length&&this.forwardEvent(new ra(M.value.snapshot))}activateRoutes(M,T,O){const j=M.value,te=T?T.value:null;if(bi(j),j===te)if(j.component){const me=O.getOrCreateContext(j.outlet);this.activateChildRoutes(M,T,me.children)}else this.activateChildRoutes(M,T,O);else if(j.component){const me=O.getOrCreateContext(j.outlet);if(this.routeReuseStrategy.shouldAttach(j.snapshot)){const at=this.routeReuseStrategy.retrieve(j.snapshot);this.routeReuseStrategy.store(j.snapshot,null),me.children.onOutletReAttached(at.contexts),me.attachRef=at.componentRef,me.route=at.route.value,me.outlet&&me.outlet.attach(at.componentRef,at.route.value),bi(at.route.value),this.activateChildRoutes(M,null,me.children)}else{const at=ga(j.snapshot);me.attachRef=null,me.route=j,me.injector=at,me.outlet&&me.outlet.activateWith(j,me.injector),this.activateChildRoutes(M,null,me.children)}}else this.activateChildRoutes(M,null,O)}}class W{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class q{constructor(M,T){this.component=M,this.route=T}}function k(C,M,T){const O=C._root;return on(O,M?M._root:null,T,[O.value])}function Te(C,M){const T=Symbol(),O=M.get(C,T);return O===T?"function"!=typeof C||(0,_.K_M)(C)?M.get(C):C:O}function on(C,M,T,O,j={canDeactivateChecks:[],canActivateChecks:[]}){const te=or(M);return C.children.forEach(me=>{(function Qn(C,M,T,O,j={canDeactivateChecks:[],canActivateChecks:[]}){const te=C.value,me=M?M.value:null,at=T?T.getContext(C.value.outlet):null;if(me&&te.routeConfig===me.routeConfig){const Ze=function vs(C,M,T){if("function"==typeof T)return T(C,M);switch(T){case"pathParamsChange":return!Nr(C.url,M.url);case"pathParamsOrQueryParamsChange":return!Nr(C.url,M.url)||!yr(C.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!is(C,M)||!yr(C.queryParams,M.queryParams);default:return!is(C,M)}}(me,te,te.routeConfig.runGuardsAndResolvers);Ze?j.canActivateChecks.push(new W(O)):(te.data=me.data,te._resolvedData=me._resolvedData),on(C,M,te.component?at?at.children:null:T,O,j),Ze&&at&&at.outlet&&at.outlet.isActivated&&j.canDeactivateChecks.push(new q(at.outlet.component,me))}else me&&os(M,at,j),j.canActivateChecks.push(new W(O)),on(C,null,te.component?at?at.children:null:T,O,j)})(me,te[me.value.outlet],T,O.concat([me.value]),j),delete te[me.value.outlet]}),Object.entries(te).forEach(([me,at])=>os(at,T.getContext(me),j)),j}function os(C,M,T){const O=or(C),j=C.value;Object.entries(O).forEach(([te,me])=>{os(me,j.component?M?M.children.getContext(te):null:M,T)}),T.canDeactivateChecks.push(new q(j.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,j))}function Ns(C){return"function"==typeof C}function Ma(C){return C instanceof pe.G||"EmptyError"===C?.name}const Fr=Symbol("INITIAL_VALUE");function Qs(){return(0,tt.G)(C=>Ve(C.map(M=>M.pipe((0,nt.U)(1),(0,Nt.W)(Fr)))).pipe((0,et.k)(M=>{for(const T of M)if(!0!==T){if(T===Fr)return Fr;if(!1===T||T instanceof Mr)return T}return!0}),(0,tn.I)(M=>M!==Fr),(0,nt.U)(1)))}function ds(C){return(0,qe.W)((0,Ge.y)(M=>{if(Hn(M))throw di(0,M)}),(0,et.k)(M=>!0===M))}class Co{constructor(M){this.segmentGroup=M||null}}class No extends Error{constructor(M){super(),this.urlTree=M}}function Xs(C){return de(new Co(C))}class Bc{constructor(M,T){this.urlSerializer=M,this.urlTree=T}lineralizeSegments(M,T){let O=[],j=T.root;for(;;){if(O=O.concat(j.segments),0===j.numberOfChildren)return(0,G.of)(O);if(j.numberOfChildren>1||!j.children[Bt])return de(new _.OBp(4e3,!1));j=j.children[Bt]}}applyRedirectCommands(M,T,O){const j=this.applyRedirectCreateUrlTree(T,this.urlSerializer.parse(T),M,O);if(T.startsWith("/"))throw new No(j);return j}applyRedirectCreateUrlTree(M,T,O,j){const te=this.createSegmentGroup(M,T.root,O,j);return new Mr(te,this.createQueryParams(T.queryParams,this.urlTree.queryParams),T.fragment)}createQueryParams(M,T){const O={};return Object.entries(M).forEach(([j,te])=>{if("string"==typeof te&&te.startsWith(":")){const at=te.substring(1);O[j]=T[at]}else O[j]=te}),O}createSegmentGroup(M,T,O,j){const te=this.createSegments(M,T.segments,O,j);let me={};return Object.entries(T.children).forEach(([at,Ze])=>{me[at]=this.createSegmentGroup(M,Ze,O,j)}),new Gn(te,me)}createSegments(M,T,O,j){return T.map(te=>te.path.startsWith(":")?this.findPosParam(M,te,j):this.findOrReturn(te,O))}findPosParam(M,T,O){const j=O[T.path.substring(1)];if(!j)throw new _.OBp(4001,!1);return j}findOrReturn(M,T){let O=0;for(const j of T){if(j.path===M.path)return T.splice(O),j;O++}return M}}const $s={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Mn(C,M,T,O,j){const te=Zs(C,M,T);return te.matched?(O=function Fi(C,M){return C.providers&&!C._injector&&(C._injector=(0,_.SIz)(C.providers,M,`Route: ${C.path}`)),C._injector??M}(M,O),function Js(C,M,T,O){const j=M.canMatch;if(!j||0===j.length)return(0,G.of)(!0);const te=j.map(me=>{const at=Te(me,C);return gn(function ai(C){return C&&Ns(C.canMatch)}(at)?at.canMatch(M,T):(0,_.SMS)(C,()=>at(M,T)))});return(0,G.of)(te).pipe(Qs(),ds())}(O,M,T).pipe((0,et.k)(me=>!0===me?te:{...$s}))):(0,G.of)(te)}function Zs(C,M,T){if("**"===M.path)return function hr(C){return{matched:!0,parameters:C.length>0?vn(C).parameters:{},consumedSegments:C,remainingSegments:[],positionalParamSegments:{}}}(T);if(""===M.path)return"full"===M.pathMatch&&(C.hasChildren()||T.length>0)?{...$s}:{matched:!0,consumedSegments:[],remainingSegments:T,parameters:{},positionalParamSegments:{}};const j=(M.matcher||kn)(T,C,M);if(!j)return{...$s};const te={};Object.entries(j.posParams??{}).forEach(([at,Ze])=>{te[at]=Ze.path});const me=j.consumed.length>0?{...te,...j.consumed[j.consumed.length-1].parameters}:te;return{matched:!0,consumedSegments:j.consumed,remainingSegments:T.slice(j.consumed.length),parameters:me,positionalParamSegments:j.posParams??{}}}function _a(C,M,T,O){return T.length>0&&function wo(C,M,T){return T.some(O=>Es(C,M,O)&&fo(O)!==Bt)}(C,T,O)?{segmentGroup:new Gn(M,qo(O,new Gn(T,C.children))),slicedSegments:[]}:0===T.length&&function Ko(C,M,T){return T.some(O=>Es(C,M,O))}(C,T,O)?{segmentGroup:new Gn(C.segments,mc(C,T,O,C.children)),slicedSegments:T}:{segmentGroup:new Gn(C.segments,C.children),slicedSegments:T}}function mc(C,M,T,O){const j={};for(const te of T)if(Es(C,M,te)&&!O[fo(te)]){const me=new Gn([],{});j[fo(te)]=me}return{...O,...j}}function qo(C,M){const T={};T[Bt]=M;for(const O of C)if(""===O.path&&fo(O)!==Bt){const j=new Gn([],{});T[fo(O)]=j}return T}function Es(C,M,T){return(!(C.hasChildren()||M.length>0)||"full"!==T.pathMatch)&&""===T.path}class Fs{}class ar{constructor(M,T,O,j,te,me,at){this.injector=M,this.configLoader=T,this.rootComponentType=O,this.config=j,this.urlTree=te,this.paramsInheritanceStrategy=me,this.urlSerializer=at,this.applyRedirects=new Bc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(M){return new _.OBp(4002,`'${M.segmentGroup}'`)}recognize(){const M=_a(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(M).pipe((0,et.k)(T=>{const O=new qs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Bt,this.rootComponentType,null,{}),j=new $i(O,T),te=new li("",j),me=function Yn(C,M,T=null,O=null){return lr(Kr(C),M,T,O)}(O,[],this.urlTree.queryParams,this.urlTree.fragment);return me.queryParams=this.urlTree.queryParams,te.url=this.urlSerializer.serialize(me),this.inheritParamsAndData(te._root,null),{state:te,tree:me}}))}match(M){return this.processSegmentGroup(this.injector,this.config,M,Bt).pipe((0,lt.a)(O=>{if(O instanceof No)return this.urlTree=O.urlTree,this.match(O.urlTree.root);throw O instanceof Co?this.noMatchError(O):O}))}inheritParamsAndData(M,T){const O=M.value,j=ho(O,T,this.paramsInheritanceStrategy);O.params=Object.freeze(j.params),O.data=Object.freeze(j.data),M.children.forEach(te=>this.inheritParamsAndData(te,O))}processSegmentGroup(M,T,O,j){return 0===O.segments.length&&O.hasChildren()?this.processChildren(M,T,O):this.processSegment(M,T,O,O.segments,j,!0).pipe((0,et.k)(te=>te instanceof $i?[te]:[]))}processChildren(M,T,O){const j=[];for(const te of Object.keys(O.children))"primary"===te?j.unshift(te):j.push(te);return(0,ye.Q)(j).pipe((0,st.m)(te=>{const me=O.children[te],at=function pa(C,M){const T=C.filter(O=>fo(O)===M);return T.push(...C.filter(O=>fo(O)!==M)),T}(T,te);return this.processSegmentGroup(M,at,me,te)}),(0,ut.K)((te,me)=>(te.push(...me),te)),(0,Tt.G)(null),function en(C,M){const T=arguments.length>=2;return O=>O.pipe(C?(0,tn.I)((j,te)=>C(j,te,O)):Ne.Z,qt(1),T?(0,Tt.G)(M):(0,Zt._)(()=>new pe.G))}(),(0,Oe.O)(te=>{if(null===te)return Xs(O);const me=Or(te);return function Qa(C){C.sort((M,T)=>M.value.outlet===Bt?-1:T.value.outlet===Bt?1:M.value.outlet.localeCompare(T.value.outlet))}(me),(0,G.of)(me)}))}processSegment(M,T,O,j,te,me){return(0,ye.Q)(T).pipe((0,st.m)(at=>this.processSegmentAgainstRoute(at._injector??M,T,at,O,j,te,me).pipe((0,lt.a)(Ze=>{if(Ze instanceof Co)return(0,G.of)(null);throw Ze}))),(0,ze.K)(at=>!!at),(0,lt.a)(at=>{if(Ma(at))return function hs(C,M,T){return 0===M.length&&!C.children[T]}(O,j,te)?(0,G.of)(new Fs):Xs(O);throw at}))}processSegmentAgainstRoute(M,T,O,j,te,me,at){return function vu(C,M,T,O){return!!(fo(C)===O||O!==Bt&&Es(M,T,C))&&Zs(M,C,T).matched}(O,j,te,me)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(M,j,O,te,me):this.allowRedirects&&at?this.expandSegmentAgainstRouteUsingRedirect(M,j,T,O,te,me):Xs(j):Xs(j)}expandSegmentAgainstRouteUsingRedirect(M,T,O,j,te,me){const{matched:at,consumedSegments:Ze,positionalParamSegments:Vt,remainingSegments:Ft}=Zs(T,j,te);if(!at)return Xs(T);j.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Xn=this.applyRedirects.applyRedirectCommands(Ze,j.redirectTo,Vt);return this.applyRedirects.lineralizeSegments(j,Xn).pipe((0,Oe.O)(Ri=>this.processSegment(M,O,T,Ri.concat(Ft),me,!1)))}matchSegmentAgainstRoute(M,T,O,j,te){const me=Mn(T,O,j,M);return"**"===O.path&&(T.children={}),me.pipe((0,tt.G)(at=>at.matched?this.getChildConfig(M=O._injector??M,O,j).pipe((0,tt.G)(({routes:Ze})=>{const Vt=O._loadedInjector??M,{consumedSegments:Ft,remainingSegments:Xn,parameters:Ri}=at,qi=new qs(Ft,Ri,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function ya(C){return C.data||{}}(O),fo(O),O.component??O._loadedComponent??null,O,function po(C){return C.resolve||{}}(O)),{segmentGroup:Fa,slicedSegments:La}=_a(T,Ft,Xn,Ze);if(0===La.length&&Fa.hasChildren())return this.processChildren(Vt,Ze,Fa).pipe((0,et.k)(Do=>null===Do?null:new $i(qi,Do)));if(0===Ze.length&&0===La.length)return(0,G.of)(new $i(qi,[]));const mo=fo(O)===te;return this.processSegment(Vt,Ze,Fa,La,mo?Bt:te,!0).pipe((0,et.k)(Do=>new $i(qi,Do instanceof $i?[Do]:[])))})):Xs(T)))}getChildConfig(M,T,O){return T.children?(0,G.of)({routes:T.children,injector:M}):T.loadChildren?void 0!==T._loadedRoutes?(0,G.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):function gc(C,M,T,O){const j=M.canLoad;if(void 0===j||0===j.length)return(0,G.of)(!0);const te=j.map(me=>{const at=Te(me,C);return gn(function Rn(C){return C&&Ns(C.canLoad)}(at)?at.canLoad(M,T):(0,_.SMS)(C,()=>at(M,T)))});return(0,G.of)(te).pipe(Qs(),ds())}(M,T,O).pipe((0,Oe.O)(j=>j?this.configLoader.loadChildren(M,T).pipe((0,Ge.y)(te=>{T._loadedRoutes=te.routes,T._loadedInjector=te.injector})):function xa(C){return de(ys(!1,si.GuardRejected))}())):(0,G.of)({routes:[],injector:M})}}function eo(C){const M=C.value.routeConfig;return M&&""===M.path}function Or(C){const M=[],T=new Set;for(const O of C){if(!eo(O)){M.push(O);continue}const j=M.find(te=>O.value.routeConfig===te.value.routeConfig);void 0!==j?(j.children.push(...O.children),T.add(j)):M.push(O)}for(const O of T){const j=Or(O.children);M.push(new $i(O.value,j))}return M.filter(O=>!T.has(O))}function Ja(C){const M=C.children.map(T=>Ja(T)).flat();return[C,...M]}function hi(C){return(0,tt.G)(M=>{const T=C(M);return T?(0,ye.Q)(T).pipe((0,et.k)(()=>M)):(0,G.of)(M)})}let Ls=(()=>{class C{buildTitle(T){let O,j=T.root;for(;void 0!==j;)O=this.getResolvedTitleForRoute(j)??O,j=j.children.find(te=>te.outlet===Bt);return O}getResolvedTitleForRoute(T){return T.data[wr]}static#e=this.\u0275fac=function(O){return new(O||C)};static#t=this.\u0275prov=_.wxM({token:C,factory:()=>(0,_.uUt)(Er),providedIn:"root"})}return C})(),Er=(()=>{class C extends Ls{constructor(T){super(),this.title=T}updateTitle(T){const O=this.buildTitle(T);void 0!==O&&this.title.setTitle(O)}static#e=this.\u0275fac=function(O){return new(O||C)(_.CoB(Rr.OY))};static#t=this.\u0275prov=_.wxM({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})();const D=new _.UbH("",{providedIn:"root",factory:()=>({})}),K=new _.UbH("");let x=(()=>{class C{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,_.uUt)(_.ESV)}loadComponent(T){if(this.componentLoaders.get(T))return this.componentLoaders.get(T);if(T._loadedComponent)return(0,G.of)(T._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(T);const O=gn(T.loadComponent()).pipe((0,et.k)(rt),(0,Ge.y)(te=>{this.onLoadEndListener&&this.onLoadEndListener(T),T._loadedComponent=te}),(0,Tn.U)(()=>{this.componentLoaders.delete(T)})),j=new bt(O,()=>new ht.E).pipe(Et());return this.componentLoaders.set(T,j),j}loadChildren(T,O){if(this.childrenLoaders.get(O))return this.childrenLoaders.get(O);if(O._loadedRoutes)return(0,G.of)({routes:O._loadedRoutes,injector:O._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(O);const te=function H(C,M,T,O){return gn(C.loadChildren()).pipe((0,et.k)(rt),(0,Oe.O)(j=>j instanceof _.obV||Array.isArray(j)?(0,G.of)(j):(0,ye.Q)(M.compileModuleAsync(j))),(0,et.k)(j=>{O&&O(C);let te,me,at=!1;return Array.isArray(j)?(me=j,!0):(te=j.create(T).injector,me=te.get(K,[],{optional:!0,self:!0}).flat()),{routes:me.map(js),injector:te}}))}(O,this.compiler,T,this.onLoadEndListener).pipe((0,Tn.U)(()=>{this.childrenLoaders.delete(O)})),me=new bt(te,()=>new ht.E).pipe(Et());return this.childrenLoaders.set(O,me),me}static#e=this.\u0275fac=function(O){return new(O||C)};static#t=this.\u0275prov=_.wxM({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})();function rt(C){return function fe(C){return C&&"object"==typeof C&&"default"in C}(C)?C.default:C}let pt=(()=>{class C{static#e=this.\u0275fac=function(O){return new(O||C)};static#t=this.\u0275prov=_.wxM({token:C,factory:()=>(0,_.uUt)(an),providedIn:"root"})}return C})(),an=(()=>{class C{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,O){return T}static#e=this.\u0275fac=function(O){return new(O||C)};static#t=this.\u0275prov=_.wxM({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})();const Xr=new _.UbH(""),Gr=new _.UbH("");function ni(C,M,T){const O=C.get(Gr),j=C.get(Le.Ud);return C.get(_.WW2).runOutsideAngular(()=>{if(!j.startViewTransition||O.skipNextTransition)return O.skipNextTransition=!1,Promise.resolve();let te;const me=new Promise(Vt=>{te=Vt}),at=j.startViewTransition(()=>(te(),function Kn(C){return new Promise(M=>{(0,_.I44)(M,{injector:C})})}(C))),{onViewTransitionCreated:Ze}=O;return Ze&&(0,_.SMS)(C,()=>Ze({transition:at,from:M,to:T})),me})}let ci=(()=>{class C{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ht.E,this.transitionAbortSubject=new ht.E,this.configLoader=(0,_.uUt)(x),this.environmentInjector=(0,_.uUt)(_.SIe),this.urlSerializer=(0,_.uUt)(pi),this.rootContexts=(0,_.uUt)(Ar),this.location=(0,_.uUt)(Le.oB),this.inputBindingEnabled=null!==(0,_.uUt)(Rs,{optional:!0}),this.titleStrategy=(0,_.uUt)(Ls),this.options=(0,_.uUt)(D,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,_.uUt)(pt),this.createViewTransition=(0,_.uUt)(Xr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,G.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=j=>this.events.next(new Ss(j)),this.configLoader.onLoadStartListener=j=>this.events.next(new $r(j))}complete(){this.transitions?.complete()}handleNavigationRequest(T){const O=++this.navigationId;this.transitions?.next({...this.transitions.value,...T,id:O})}setupNavigations(T,O,j){return this.transitions=new Ie.g({id:0,currentUrlTree:O,currentRawUrl:O,extractedUrl:this.urlHandlingStrategy.extract(O),urlAfterRedirects:this.urlHandlingStrategy.extract(O),rawUrl:O,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ei,restoredState:null,currentSnapshot:j.snapshot,targetSnapshot:null,currentRouterState:j,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,tn.I)(te=>0!==te.id),(0,et.k)(te=>({...te,extractedUrl:this.urlHandlingStrategy.extract(te.rawUrl)})),(0,tt.G)(te=>{this.currentTransition=te;let me=!1,at=!1;return(0,G.of)(te).pipe((0,Ge.y)(Ze=>{this.currentNavigation={id:Ze.id,initialUrl:Ze.rawUrl,extractedUrl:Ze.extractedUrl,trigger:Ze.source,extras:Ze.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,tt.G)(Ze=>{const Vt=!T.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!Vt&&"reload"!==(Ze.extras.onSameUrlNavigation??T.onSameUrlNavigation)){const Xn="";return this.events.next(new Ai(Ze.id,this.urlSerializer.serialize(Ze.rawUrl),Xn,Yr.IgnoredSameUrlNavigation)),Ze.resolve(null),wt.k}if(this.urlHandlingStrategy.shouldProcessUrl(Ze.rawUrl))return(0,G.of)(Ze).pipe((0,tt.G)(Xn=>{const Ri=this.transitions?.getValue();return this.events.next(new rs(Xn.id,this.urlSerializer.serialize(Xn.extractedUrl),Xn.source,Xn.restoredState)),Ri!==this.transitions?.getValue()?wt.k:Promise.resolve(Xn)}),function to(C,M,T,O,j,te){return(0,Oe.O)(me=>function jc(C,M,T,O,j,te,me="emptyOnly"){return new ar(C,M,T,O,j,me,te).recognize()}(C,M,T,O,me.extractedUrl,j,te).pipe((0,et.k)(({state:at,tree:Ze})=>({...me,targetSnapshot:at,urlAfterRedirects:Ze}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,T.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Ge.y)(Xn=>{te.targetSnapshot=Xn.targetSnapshot,te.urlAfterRedirects=Xn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Xn.urlAfterRedirects};const Ri=new ji(Xn.id,this.urlSerializer.serialize(Xn.extractedUrl),this.urlSerializer.serialize(Xn.urlAfterRedirects),Xn.targetSnapshot);this.events.next(Ri)}));if(Vt&&this.urlHandlingStrategy.shouldProcessUrl(Ze.currentRawUrl)){const{id:Xn,extractedUrl:Ri,source:qi,restoredState:Fa,extras:La}=Ze,mo=new rs(Xn,this.urlSerializer.serialize(Ri),qi,Fa);this.events.next(mo);const Do=Gi(this.rootComponentType).snapshot;return this.currentTransition=te={...Ze,targetSnapshot:Do,urlAfterRedirects:Ri,extras:{...La,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Ri,(0,G.of)(te)}{const Xn="";return this.events.next(new Ai(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),Xn,Yr.IgnoredByUrlHandlingStrategy)),Ze.resolve(null),wt.k}}),(0,Ge.y)(Ze=>{const Vt=new Go(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),this.urlSerializer.serialize(Ze.urlAfterRedirects),Ze.targetSnapshot);this.events.next(Vt)}),(0,et.k)(Ze=>(this.currentTransition=te={...Ze,guards:k(Ze.targetSnapshot,Ze.currentSnapshot,this.rootContexts)},te)),function xo(C,M){return(0,Oe.O)(T=>{const{targetSnapshot:O,currentSnapshot:j,guards:{canActivateChecks:te,canDeactivateChecks:me}}=T;return 0===me.length&&0===te.length?(0,G.of)({...T,guardsResult:!0}):function dr(C,M,T,O){return(0,ye.Q)(C).pipe((0,Oe.O)(j=>function Io(C,M,T,O,j){const te=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!te||0===te.length)return(0,G.of)(!0);const me=te.map(at=>{const Ze=ga(M)??j,Vt=Te(at,Ze);return gn(function Ho(C){return C&&Ns(C.canDeactivate)}(Vt)?Vt.canDeactivate(C,M,T,O):(0,_.SMS)(Ze,()=>Vt(C,M,T,O))).pipe((0,ze.K)())});return(0,G.of)(me).pipe(Qs())}(j.component,j.route,T,M,O)),(0,ze.K)(j=>!0!==j,!0))}(me,O,j,C).pipe((0,Oe.O)(at=>at&&function Uc(C){return"boolean"==typeof C}(at)?function Un(C,M,T,O){return(0,ye.Q)(M).pipe((0,st.m)(j=>(0,Ue.W)(function ma(C,M){return null!==C&&M&&M(new oi(C)),(0,G.of)(!0)}(j.route.parent,O),function Ji(C,M){return null!==C&&M&&M(new ia(C)),(0,G.of)(!0)}(j.route,O),function ls(C,M,T){const O=M[M.length-1],te=M.slice(0,M.length-1).reverse().map(me=>function ne(C){const M=C.routeConfig?C.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:C,guards:M}:null}(me)).filter(me=>null!==me).map(me=>Ee(()=>{const at=me.guards.map(Ze=>{const Vt=ga(me.node)??T,Ft=Te(Ze,Vt);return gn(function hn(C){return C&&Ns(C.canActivateChild)}(Ft)?Ft.canActivateChild(O,C):(0,_.SMS)(Vt,()=>Ft(O,C))).pipe((0,ze.K)())});return(0,G.of)(at).pipe(Qs())}));return(0,G.of)(te).pipe(Qs())}(C,j.path,T),function ks(C,M,T){const O=M.routeConfig?M.routeConfig.canActivate:null;if(!O||0===O.length)return(0,G.of)(!0);const j=O.map(te=>Ee(()=>{const me=ga(M)??T,at=Te(te,me);return gn(function Sr(C){return C&&Ns(C.canActivate)}(at)?at.canActivate(M,C):(0,_.SMS)(me,()=>at(M,C))).pipe((0,ze.K)())}));return(0,G.of)(j).pipe(Qs())}(C,j.route,T))),(0,ze.K)(j=>!0!==j,!0))}(O,te,C,M):(0,G.of)(at)),(0,et.k)(at=>({...T,guardsResult:at})))})}(this.environmentInjector,Ze=>this.events.next(Ze)),(0,Ge.y)(Ze=>{if(te.guardsResult=Ze.guardsResult,Hn(Ze.guardsResult))throw di(0,Ze.guardsResult);const Vt=new Ka(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),this.urlSerializer.serialize(Ze.urlAfterRedirects),Ze.targetSnapshot,!!Ze.guardsResult);this.events.next(Vt)}),(0,tn.I)(Ze=>!!Ze.guardsResult||(this.cancelNavigationTransition(Ze,"",si.GuardRejected),!1)),hi(Ze=>{if(Ze.guards.canActivateChecks.length)return(0,G.of)(Ze).pipe((0,Ge.y)(Vt=>{const Ft=new Zn(Vt.id,this.urlSerializer.serialize(Vt.extractedUrl),this.urlSerializer.serialize(Vt.urlAfterRedirects),Vt.targetSnapshot);this.events.next(Ft)}),(0,tt.G)(Vt=>{let Ft=!1;return(0,G.of)(Vt).pipe(function $c(C,M){return(0,Oe.O)(T=>{const{targetSnapshot:O,guards:{canActivateChecks:j}}=T;if(!j.length)return(0,G.of)(T);const te=new Set(j.map(Ze=>Ze.route)),me=new Set;for(const Ze of te)if(!me.has(Ze))for(const Vt of Ja(Ze))me.add(Vt);let at=0;return(0,ye.Q)(me).pipe((0,st.m)(Ze=>te.has(Ze)?function ti(C,M,T,O){const j=C.routeConfig,te=C._resolve;return void 0!==j?.title&&!Qi(j)&&(te[wr]=j.title),function Gc(C,M,T,O){const j=vi(C);if(0===j.length)return(0,G.of)({});const te={};return(0,ye.Q)(j).pipe((0,Oe.O)(me=>function Is(C,M,T,O){const j=ga(M)??O,te=Te(C,j);return gn(te.resolve?te.resolve(M,T):(0,_.SMS)(j,()=>te(M,T)))}(C[me],M,T,O).pipe((0,ze.K)(),(0,Ge.y)(at=>{te[me]=at}))),qt(1),function _n(C){return(0,et.k)(()=>C)}(te),(0,lt.a)(me=>Ma(me)?wt.k:de(me)))}(te,C,M,O).pipe((0,et.k)(me=>(C._resolvedData=me,C.data=ho(C,C.parent,T).resolve,null)))}(Ze,O,C,M):(Ze.data=ho(Ze,Ze.parent,C).resolve,(0,G.of)(void 0))),(0,Ge.y)(()=>at++),qt(1),(0,Oe.O)(Ze=>at===me.size?(0,G.of)(T):wt.k))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Ge.y)({next:()=>Ft=!0,complete:()=>{Ft||this.cancelNavigationTransition(Vt,"",si.NoDataFromResolver)}}))}),(0,Ge.y)(Vt=>{const Ft=new Si(Vt.id,this.urlSerializer.serialize(Vt.extractedUrl),this.urlSerializer.serialize(Vt.urlAfterRedirects),Vt.targetSnapshot);this.events.next(Ft)}))}),hi(Ze=>{const Vt=Ft=>{const Xn=[];Ft.routeConfig?.loadComponent&&!Ft.routeConfig._loadedComponent&&Xn.push(this.configLoader.loadComponent(Ft.routeConfig).pipe((0,Ge.y)(Ri=>{Ft.component=Ri}),(0,et.k)(()=>{})));for(const Ri of Ft.children)Xn.push(...Vt(Ri));return Xn};return Ve(Vt(Ze.targetSnapshot.root)).pipe((0,Tt.G)(null),(0,nt.U)(1))}),hi(()=>this.afterPreactivation()),(0,tt.G)(()=>{const{currentSnapshot:Ze,targetSnapshot:Vt}=te,Ft=this.createViewTransition?.(this.environmentInjector,Ze.root,Vt.root);return Ft?(0,ye.Q)(Ft).pipe((0,et.k)(()=>te)):(0,G.of)(te)}),(0,et.k)(Ze=>{const Vt=function Mo(C,M,T){const O=Ms(C,M._root,T?T._root:void 0);return new ki(O,M)}(T.routeReuseStrategy,Ze.targetSnapshot,Ze.currentRouterState);return this.currentTransition=te={...Ze,targetRouterState:Vt},this.currentNavigation.targetRouterState=Vt,te}),(0,Ge.y)(()=>{this.events.next(new bo)}),((C,M,T,O)=>(0,et.k)(j=>(new Ys(M,j.targetRouterState,j.currentRouterState,T,O).activate(C),j)))(this.rootContexts,T.routeReuseStrategy,Ze=>this.events.next(Ze),this.inputBindingEnabled),(0,nt.U)(1),(0,Ge.y)({next:Ze=>{me=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Di(Ze.id,this.urlSerializer.serialize(Ze.extractedUrl),this.urlSerializer.serialize(Ze.urlAfterRedirects))),this.titleStrategy?.updateTitle(Ze.targetRouterState.snapshot),Ze.resolve(!0)},complete:()=>{me=!0}}),function wn(C){return(0,xe.i)((M,T)=>{(0,Ke.Uv)(C).subscribe((0,we.e)(T,()=>T.complete(),Kt.K)),!T.closed&&M.subscribe(T)})}(this.transitionAbortSubject.pipe((0,Ge.y)(Ze=>{throw Ze}))),(0,Tn.U)(()=>{!me&&!at&&this.cancelNavigationTransition(te,"",si.SupersededByNewNavigation),this.currentTransition?.id===te.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,lt.a)(Ze=>{if(at=!0,Hi(Ze))this.events.next(new As(te.id,this.urlSerializer.serialize(te.extractedUrl),Ze.message,Ze.cancellationCode)),function ss(C){return Hi(C)&&Hn(C.url)}(Ze)?this.events.next(new Qr(Ze.url)):te.resolve(!1);else{this.events.next(new $o(te.id,this.urlSerializer.serialize(te.extractedUrl),Ze,te.targetSnapshot??void 0));try{te.resolve(T.errorHandler(Ze))}catch(Vt){this.options.resolveNavigationPromiseOnError?te.resolve(!1):te.reject(Vt)}}return wt.k}))}))}cancelNavigationTransition(T,O,j){const te=new As(T.id,this.urlSerializer.serialize(T.extractedUrl),O,j);this.events.next(te),T.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(O){return new(O||C)};static#t=this.\u0275prov=_.wxM({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})();function Pr(C){return C!==ei}let as=(()=>{class C{static#e=this.\u0275fac=function(O){return new(O||C)};static#t=this.\u0275prov=_.wxM({token:C,factory:()=>(0,_.uUt)(zi),providedIn:"root"})}return C})();class ko{shouldDetach(M){return!1}store(M,T){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,T){return M.routeConfig===T.routeConfig}}let zi=(()=>{class C extends ko{static#e=this.\u0275fac=(()=>{let T;return function(j){return(T||(T=_.otF(C)))(j||C)}})();static#t=this.\u0275prov=_.wxM({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})(),va=(()=>{class C{static#e=this.\u0275fac=function(O){return new(O||C)};static#t=this.\u0275prov=_.wxM({token:C,factory:()=>(0,_.uUt)(Jn),providedIn:"root"})}return C})(),Jn=(()=>{class C extends va{constructor(){super(...arguments),this.location=(0,_.uUt)(Le.oB),this.urlSerializer=(0,_.uUt)(pi),this.options=(0,_.uUt)(D,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,_.uUt)(pt),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Mr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Gi(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(T){return this.location.subscribe(O=>{"popstate"===O.type&&T(O.url,O.state)})}handleRouterEvent(T,O){if(T instanceof rs)this.stateMemento=this.createStateMemento();else if(T instanceof Ai)this.rawUrlTree=O.initialUrl;else if(T instanceof ji){if("eager"===this.urlUpdateStrategy&&!O.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(O.finalUrl,O.initialUrl);this.setBrowserUrl(j,O)}}else T instanceof bo?(this.currentUrlTree=O.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(O.finalUrl,O.initialUrl),this.routerState=O.targetRouterState,"deferred"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,O))):T instanceof As&&(T.code===si.GuardRejected||T.code===si.NoDataFromResolver)?this.restoreHistory(O):T instanceof $o?this.restoreHistory(O,!0):T instanceof Di&&(this.lastSuccessfulId=T.id,this.currentPageId=this.browserPageId)}setBrowserUrl(T,O){const j=this.urlSerializer.serialize(T);if(this.location.isCurrentPathEqualTo(j)||O.extras.replaceUrl){const me={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId)};this.location.replaceState(j,"",me)}else{const te={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId+1)};this.location.go(j,"",te)}}restoreHistory(T,O=!1){if("computed"===this.canceledNavigationResolution){const te=this.currentPageId-this.browserPageId;0!==te?this.location.historyGo(te):this.currentUrlTree===T.finalUrl&&0===te&&(this.resetState(T),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(T),this.resetUrlToCurrentUrlTree())}resetState(T){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,T.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(T,O){return"computed"===this.canceledNavigationResolution?{navigationId:T,\u0275routerPageId:O}:{navigationId:T}}static#e=this.\u0275fac=(()=>{let T;return function(j){return(T||(T=_.otF(C)))(j||C)}})();static#t=this.\u0275prov=_.wxM({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})();var ui=function(C){return C[C.COMPLETE=0]="COMPLETE",C[C.FAILED=1]="FAILED",C[C.REDIRECTING=2]="REDIRECTING",C}(ui||{});function er(C,M){C.events.pipe((0,tn.I)(T=>T instanceof Di||T instanceof As||T instanceof $o||T instanceof Ai),(0,et.k)(T=>T instanceof Di||T instanceof Ai?ui.COMPLETE:T instanceof As&&(T.code===si.Redirect||T.code===si.SupersededByNewNavigation)?ui.REDIRECTING:ui.FAILED),(0,tn.I)(T=>T!==ui.REDIRECTING),(0,nt.U)(1)).subscribe(()=>{M()})}function To(C){throw C}const Xa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ot={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Jr=(()=>{class C{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,_.uUt)(_.oPY),this.stateManager=(0,_.uUt)(va),this.options=(0,_.uUt)(D,{optional:!0})||{},this.pendingTasks=(0,_.uUt)(_.g9Y),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,_.uUt)(ci),this.urlSerializer=(0,_.uUt)(pi),this.location=(0,_.uUt)(Le.oB),this.urlHandlingStrategy=(0,_.uUt)(pt),this._events=new ht.E,this.errorHandler=this.options.errorHandler||To,this.navigated=!1,this.routeReuseStrategy=(0,_.uUt)(as),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,_.uUt)(K,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,_.uUt)(Rs,{optional:!0}),this.eventsSubscription=new Dt.wH,this.isNgZoneEnabled=(0,_.uUt)(_.WW2)instanceof _.WW2&&_.WW2.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:T=>{this.console.warn(T)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const T=this.navigationTransitions.events.subscribe(O=>{try{const j=this.navigationTransitions.currentTransition,te=this.navigationTransitions.currentNavigation;if(null!==j&&null!==te)if(this.stateManager.handleRouterEvent(O,te),O instanceof As&&O.code!==si.Redirect&&O.code!==si.SupersededByNewNavigation)this.navigated=!0;else if(O instanceof Di)this.navigated=!0;else if(O instanceof Qr){const me=this.urlHandlingStrategy.merge(O.url,j.currentRawUrl),at={info:j.extras.info,skipLocationChange:j.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Pr(j.source)};this.scheduleNavigation(me,ei,null,at,{resolve:j.resolve,reject:j.reject,promise:j.promise})}(function Za(C){return!(C instanceof bo||C instanceof Qr)})(O)&&this._events.next(O)}catch(j){this.navigationTransitions.transitionAbortSubject.next(j)}});this.eventsSubscription.add(T)}resetRootComponentType(T){this.routerState.root.component=T,this.navigationTransitions.rootComponentType=T}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ei,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((T,O)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(T,"popstate",O)},0)})}navigateToSyncWithBrowser(T,O,j){const te={replaceUrl:!0},me=j?.navigationId?j:null;if(j){const Ze={...j};delete Ze.navigationId,delete Ze.\u0275routerPageId,0!==Object.keys(Ze).length&&(te.state=Ze)}const at=this.parseUrl(T);this.scheduleNavigation(at,O,me,te)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(T){this.config=T.map(js),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(T,O={}){const{relativeTo:j,queryParams:te,fragment:me,queryParamsHandling:at,preserveFragment:Ze}=O,Vt=Ze?this.currentUrlTree.fragment:me;let Xn,Ft=null;switch(at){case"merge":Ft={...this.currentUrlTree.queryParams,...te};break;case"preserve":Ft=this.currentUrlTree.queryParams;break;default:Ft=te||null}null!==Ft&&(Ft=this.removeEmptyProps(Ft));try{Xn=Kr(j?j.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof T[0]||!T[0].startsWith("/"))&&(T=[]),Xn=this.currentUrlTree.root}return lr(Xn,T,Ft,Vt??null)}navigateByUrl(T,O={skipLocationChange:!1}){const j=Hn(T)?T:this.parseUrl(T),te=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(te,ei,null,O)}navigate(T,O={skipLocationChange:!1}){return function no(C){for(let M=0;M<C.length;M++)if(null==C[M])throw new _.OBp(4008,!1)}(T),this.navigateByUrl(this.createUrlTree(T,O),O)}serializeUrl(T){return this.urlSerializer.serialize(T)}parseUrl(T){try{return this.urlSerializer.parse(T)}catch{return this.urlSerializer.parse("/")}}isActive(T,O){let j;if(j=!0===O?{...Xa}:!1===O?{...Ot}:O,Hn(T))return qr(this.currentUrlTree,T,j);const te=this.parseUrl(T);return qr(this.currentUrlTree,te,j)}removeEmptyProps(T){return Object.entries(T).reduce((O,[j,te])=>(null!=te&&(O[j]=te),O),{})}scheduleNavigation(T,O,j,te,me){if(this.disposed)return Promise.resolve(!1);let at,Ze,Vt;me?(at=me.resolve,Ze=me.reject,Vt=me.promise):Vt=new Promise((Xn,Ri)=>{at=Xn,Ze=Ri});const Ft=this.pendingTasks.add();return er(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Ft))}),this.navigationTransitions.handleNavigationRequest({source:O,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:T,extras:te,resolve:at,reject:Ze,promise:Vt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Vt.catch(Xn=>Promise.reject(Xn))}static#e=this.\u0275fac=function(O){return new(O||C)};static#t=this.\u0275prov=_.wxM({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})(),nn=(()=>{class C{constructor(T,O,j,te,me,at){this.router=T,this.route=O,this.tabIndexAttribute=j,this.renderer=te,this.el=me,this.locationStrategy=at,this.href=null,this.commands=null,this.onChanges=new ht.E,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const Ze=me.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Ze||"area"===Ze,this.isAnchorElement?this.subscription=T.events.subscribe(Vt=>{Vt instanceof Di&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(T){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",T)}ngOnChanges(T){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(T){null!=T?(this.commands=Array.isArray(T)?T:[T],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(T,O,j,te,me){const at=this.urlTree;return!!(null===at||this.isAnchorElement&&(0!==T||O||j||te||me||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(at,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const T=this.urlTree;this.href=null!==T&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(T)):null;const O=null===this.href?null:(0,_.YFg)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",O)}applyAttributeValue(T,O){const j=this.renderer,te=this.el.nativeElement;null!==O?j.setAttribute(te,T,O):j.removeAttribute(te,T)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(O){return new(O||C)(_.GI1(Jr),_.GI1(Pi),_.gJ8("tabindex"),_.GI1(_.q87),_.GI1(_.GMv),_.GI1(Le.Qd))};static#t=this.\u0275dir=_.Sc5({type:C,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(O,j){1&O&&_.qCj("click",function(me){return j.onClick(me.button,me.ctrlKey,me.shiftKey,me.altKey,me.metaKey)}),2&O&&_.e48("target",j.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[_.Wk5.HasDecoratorInputTransform,"preserveFragment","preserveFragment",_.cZD],skipLocationChange:[_.Wk5.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",_.cZD],replaceUrl:[_.Wk5.HasDecoratorInputTransform,"replaceUrl","replaceUrl",_.cZD],routerLink:"routerLink"},standalone:!0,features:[_.QJr,_.SYr]})}return C})();class jt{}let Xi=(()=>{class C{constructor(T,O,j,te,me){this.router=T,this.injector=j,this.preloadingStrategy=te,this.loader=me}setUpPreloading(){this.subscription=this.router.events.pipe((0,tn.I)(T=>T instanceof Di),(0,st.m)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(T,O){const j=[];for(const te of O){te.providers&&!te._injector&&(te._injector=(0,_.SIz)(te.providers,T,`Route: ${te.path}`));const me=te._injector??T,at=te._loadedInjector??me;(te.loadChildren&&!te._loadedRoutes&&void 0===te.canLoad||te.loadComponent&&!te._loadedComponent)&&j.push(this.preloadConfig(me,te)),(te.children||te._loadedRoutes)&&j.push(this.processRoutes(at,te.children??te._loadedRoutes))}return(0,ye.Q)(j).pipe((0,Wn.u)())}preloadConfig(T,O){return this.preloadingStrategy.preload(O,()=>{let j;j=O.loadChildren&&void 0===O.canLoad?this.loader.loadChildren(T,O):(0,G.of)(null);const te=j.pipe((0,Oe.O)(me=>null===me?(0,G.of)(void 0):(O._loadedRoutes=me.routes,O._loadedInjector=me.injector,this.processRoutes(me.injector??T,me.routes))));if(O.loadComponent&&!O._loadedComponent){const me=this.loader.loadComponent(O);return(0,ye.Q)([te,me]).pipe((0,Wn.u)())}return te})}static#e=this.\u0275fac=function(O){return new(O||C)(_.CoB(Jr),_.CoB(_.ESV),_.CoB(_.SIe),_.CoB(jt),_.CoB(x))};static#t=this.\u0275prov=_.wxM({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})();const fs=new _.UbH("");let _c=(()=>{class C{constructor(T,O,j,te,me={}){this.urlSerializer=T,this.transitions=O,this.viewportScroller=j,this.zone=te,this.options=me,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},me.scrollPositionRestoration||="disabled",me.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof rs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=T.navigationTrigger,this.restoredId=T.restoredState?T.restoredState.navigationId:0):T instanceof Di?(this.lastId=T.id,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.urlAfterRedirects).fragment)):T instanceof Ai&&T.code===Yr.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(T,this.urlSerializer.parse(T.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(T=>{T instanceof zs&&(T.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(T.position):T.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(T.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(T,O){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new zs(T,"popstate"===this.lastSource?this.store[this.restoredId]:null,O))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(O){_.KEo()};static#t=this.\u0275prov=_.wxM({token:C,factory:C.\u0275fac})}return C})();function ro(C,M){return{\u0275kind:C,\u0275providers:M}}function Vr(){const C=(0,_.uUt)(_.zZn);return M=>{const T=C.get(_.Swk);if(M!==T.components[0])return;const O=C.get(Jr),j=C.get(ec);1===C.get(Sn)&&O.initialNavigation(),C.get(fn,null,_._6O.Optional)?.setUpPreloading(),C.get(fs,null,_._6O.Optional)?.init(),O.resetRootComponentType(T.componentTypes[0]),j.closed||(j.next(),j.complete(),j.unsubscribe())}}const ec=new _.UbH("",{factory:()=>new ht.E}),Sn=new _.UbH("",{providedIn:"root",factory:()=>1}),fn=new _.UbH("");function oa(C){return ro(0,[{provide:fn,useExisting:Xi},{provide:jt,useExisting:C}])}function io(C){return ro(9,[{provide:Xr,useValue:ni},{provide:Gr,useValue:{skipNextTransition:!!C?.skipInitialTransition,...C}}])}const Qo=new _.UbH("ROUTER_FORROOT_GUARD"),Fo=[Le.oB,{provide:pi,useClass:gt},Jr,Ar,{provide:Pi,useFactory:function Wc(C){return C.routerState.root},deps:[Jr]},x,[]];let pr=(()=>{class C{constructor(T){}static forRoot(T,O){return{ngModule:C,providers:[Fo,[],{provide:K,multi:!0,useValue:T},{provide:Qo,useFactory:Lo,deps:[[Jr,new _.T7N,new _.Qfh]]},{provide:D,useValue:O||{}},O?.useHash?{provide:Le.Qd,useClass:Le.MP}:{provide:Le.Qd,useClass:Le.uC},{provide:fs,useFactory:()=>{const C=(0,_.uUt)(Le.YZ),M=(0,_.uUt)(_.WW2),T=(0,_.uUt)(D),O=(0,_.uUt)(ci),j=(0,_.uUt)(pi);return T.scrollOffset&&C.setOffset(T.scrollOffset),new _c(j,O,C,M,T)}},O?.preloadingStrategy?oa(O.preloadingStrategy).\u0275providers:[],O?.initialNavigation?Cs(O):[],O?.bindToComponentInputs?ro(8,[sn,{provide:Rs,useExisting:sn}]).\u0275providers:[],O?.enableViewTransitions?io().\u0275providers:[],[{provide:Hc,useFactory:Vr},{provide:_.qid,multi:!0,useExisting:Hc}]]}}static forChild(T){return{ngModule:C,providers:[{provide:K,multi:!0,useValue:T}]}}static#e=this.\u0275fac=function(O){return new(O||C)(_.CoB(Qo,8))};static#t=this.\u0275mod=_.a4G({type:C});static#n=this.\u0275inj=_.s3X({})}return C})();function Lo(C){return"guarded"}function Cs(C){return["disabled"===C.initialNavigation?ro(3,[{provide:_.kZF,multi:!0,useFactory:()=>{const M=(0,_.uUt)(Jr);return()=>{M.setUpLocationChangeListener()}}},{provide:Sn,useValue:2}]).\u0275providers:[],"enabledBlocking"===C.initialNavigation?ro(2,[{provide:Sn,useValue:0},{provide:_.kZF,multi:!0,deps:[_.zZn],useFactory:M=>{const T=M.get(Le.mQ,Promise.resolve());return()=>T.then(()=>new Promise(O=>{const j=M.get(Jr),te=M.get(ec);er(j,()=>{O(!0)}),M.get(ci).afterPreactivation=()=>(O(!0),te.closed?(0,G.of)(void 0):te),j.initialNavigation()}))}}]).\u0275providers:[]]}const Hc=new _.UbH("")},8368:($t,We,V)=>{V.d(We,{c:()=>Ve});var _=V(7144),Q=V(4920),A=V(9360),F=V(5976);class ye{constructor(ot,pe){this._delegate=ot,this.firebase=pe,(0,A._addComponent)(ot,new Q.Yl("app-compat",()=>this,"PUBLIC")),this.container=ot.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ot){this._delegate.automaticDataCollectionEnabled=ot}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ot=>{this._delegate.checkDestroyed(),ot()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,A.deleteApp)(this._delegate)))}_getService(ot,pe=A._DEFAULT_ENTRY_NAME){var Ue;this._delegate.checkDestroyed();const Ke=this._delegate.container.getProvider(ot);return!Ke.isInitialized()&&"EXPLICIT"===(null===(Ue=Ke.getComponent())||void 0===Ue?void 0:Ue.instantiationMode)&&Ke.initialize(),Ke.getImmediate({identifier:pe})}_removeServiceInstance(ot,pe=A._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ot).clearInstance(pe)}_addComponent(ot){(0,A._addComponent)(this._delegate,ot)}_addOrOverwriteComponent(ot){(0,A._addOrOverwriteComponent)(this._delegate,ot)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new _.UR("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),he=function Ne(){const be=function je(be){const ot={},pe={__esModule:!0,initializeApp:function Ee(Dt,xe={}){const Et=A.initializeApp(Dt,xe);if((0,_.Y7)(ot,Et.name))return ot[Et.name];const bt=new be(Et,pe);return ot[Et.name]=bt,bt},app:Ke,registerVersion:A.registerVersion,setLogLevel:A.setLogLevel,onLog:A.onLog,apps:null,SDK_VERSION:A.SDK_VERSION,INTERNAL:{registerComponent:function de(Dt){const xe=Dt.name,Et=xe.replace("-compat","");if(A._registerComponent(Dt)&&"PUBLIC"===Dt.type){const bt=(ht=Ke())=>{if("function"!=typeof ht[Et])throw Ie.create("invalid-app-argument",{appName:xe});return ht[Et]()};void 0!==Dt.serviceProps&&(0,_.Ww)(bt,Dt.serviceProps),pe[Et]=bt,be.prototype[Et]=function(...ht){return this._getService.bind(this,xe).apply(this,Dt.multipleInstances?ht:[])}}return"PUBLIC"===Dt.type?pe[Et]:null},removeApp:function Ue(Dt){delete ot[Dt]},useAsService:function wt(Dt,xe){return"serverAuth"===xe?null:xe},modularAPIs:A}};function Ke(Dt){if(!(0,_.Y7)(ot,Dt=Dt||A._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:Dt});return ot[Dt]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function qe(){return Object.keys(ot).map(Dt=>ot[Dt])}}),Ke.App=be,pe}(ye);return be.INTERNAL=Object.assign(Object.assign({},be.INTERNAL),{createFirebaseNamespace:Ne,extendNamespace:function ot(pe){(0,_.Ww)(be,pe)},createSubscribe:_.my,ErrorFactory:_.UR,deepExtend:_.Ww}),be}(),le=new F.YJ("@firebase/app-compat");if((0,_.uH)()&&void 0!==self.firebase){le.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const be=self.firebase.SDK_VERSION;be&&be.indexOf("LITE")>=0&&le.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=he;!function Se(be){(0,A.registerVersion)("@firebase/app-compat","0.2.27",be)}()},9360:($t,We,V)=>{V.r(We),V.d(We,{FirebaseError:()=>F.kx,SDK_VERSION:()=>Mr,_DEFAULT_ENTRY_NAME:()=>vi,_addComponent:()=>ii,_addOrOverwriteComponent:()=>Hs,_apps:()=>vn,_clearComponents:()=>bn,_components:()=>gn,_getProvider:()=>Bi,_registerComponent:()=>qr,_removeServiceInstance:()=>Oi,deleteApp:()=>Nr,getApp:()=>wi,getApps:()=>jr,initializeApp:()=>Gn,onLog:()=>gt,registerVersion:()=>pi,setLogLevel:()=>He});var _=V(1528),Q=V(4920),A=V(5976),F=V(7144);const ye=(Ye,Xe)=>Xe.some(Ct=>Ye instanceof Ct);let G,Ie;const he=new WeakMap,le=new WeakMap,$e=new WeakMap,we=new WeakMap,Se=new WeakMap;let ot={get(Ye,Xe,Ct){if(Ye instanceof IDBTransaction){if("done"===Xe)return le.get(Ye);if("objectStoreNames"===Xe)return Ye.objectStoreNames||$e.get(Ye);if("store"===Xe)return Ct.objectStoreNames[1]?void 0:Ct.objectStore(Ct.objectStoreNames[0])}return Ee(Ye[Xe])},set:(Ye,Xe,Ct)=>(Ye[Xe]=Ct,!0),has:(Ye,Xe)=>Ye instanceof IDBTransaction&&("done"===Xe||"store"===Xe)||Xe in Ye};function Ke(Ye){return"function"==typeof Ye?function Ue(Ye){return Ye!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ne(){return Ie||(Ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ye)?function(...Xe){return Ye.apply(qe(this),Xe),Ee(he.get(this))}:function(...Xe){return Ee(Ye.apply(qe(this),Xe))}:function(Xe,...Ct){const Xt=Ye.call(qe(this),Xe,...Ct);return $e.set(Xt,Xe.sort?Xe.sort():[Xe]),Ee(Xt)}}(Ye):(Ye instanceof IDBTransaction&&function be(Ye){if(le.has(Ye))return;const Xe=new Promise((Ct,Xt)=>{const Bn=()=>{Ye.removeEventListener("complete",Hn),Ye.removeEventListener("error",Yn),Ye.removeEventListener("abort",Yn)},Hn=()=>{Ct(),Bn()},Yn=()=>{Xt(Ye.error||new DOMException("AbortError","AbortError")),Bn()};Ye.addEventListener("complete",Hn),Ye.addEventListener("error",Yn),Ye.addEventListener("abort",Yn)});le.set(Ye,Xe)}(Ye),ye(Ye,function je(){return G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ye,ot):Ye)}function Ee(Ye){if(Ye instanceof IDBRequest)return function Ve(Ye){const Xe=new Promise((Ct,Xt)=>{const Bn=()=>{Ye.removeEventListener("success",Hn),Ye.removeEventListener("error",Yn)},Hn=()=>{Ct(Ee(Ye.result)),Bn()},Yn=()=>{Xt(Ye.error),Bn()};Ye.addEventListener("success",Hn),Ye.addEventListener("error",Yn)});return Xe.then(Ct=>{Ct instanceof IDBCursor&&he.set(Ct,Ye)}).catch(()=>{}),Se.set(Xe,Ye),Xe}(Ye);if(we.has(Ye))return we.get(Ye);const Xe=Ke(Ye);return Xe!==Ye&&(we.set(Ye,Xe),Se.set(Xe,Ye)),Xe}const qe=Ye=>Se.get(Ye),Dt=["get","getKey","getAll","getAllKeys","count"],xe=["put","add","delete","clear"],Et=new Map;function bt(Ye,Xe){if(!(Ye instanceof IDBDatabase)||Xe in Ye||"string"!=typeof Xe)return;if(Et.get(Xe))return Et.get(Xe);const Ct=Xe.replace(/FromIndex$/,""),Xt=Xe!==Ct,Bn=xe.includes(Ct);if(!(Ct in(Xt?IDBIndex:IDBObjectStore).prototype)||!Bn&&!Dt.includes(Ct))return;const Hn=function(){var Yn=(0,_.c)(function*(Kr,...lr){const oe=this.transaction(Kr,Bn?"readwrite":"readonly");let ve=oe.store;return Xt&&(ve=ve.index(lr.shift())),(yield Promise.all([ve[Ct](...lr),Bn&&oe.done]))[0]});return function(lr){return Yn.apply(this,arguments)}}();return Et.set(Xe,Hn),Hn}!function pe(Ye){ot=Ye(ot)}(Ye=>({...Ye,get:(Xe,Ct,Xt)=>bt(Xe,Ct)||Ye.get(Xe,Ct,Xt),has:(Xe,Ct)=>!!bt(Xe,Ct)||Ye.has(Xe,Ct)}));class ht{constructor(Xe){this.container=Xe}getPlatformInfoString(){return this.container.getProviders().map(Ct=>{if(function Le(Ye){const Xe=Ye.getComponent();return"VERSION"===Xe?.type}(Ct)){const Xt=Ct.getImmediate();return`${Xt.library}/${Xt.version}`}return null}).filter(Ct=>Ct).join(" ")}}const et="@firebase/app",nt=new A.YJ("@firebase/app"),vi="[DEFAULT]",rr={[et]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vn=new Map,gn=new Map;function ii(Ye,Xe){try{Ye.container.addComponent(Xe)}catch(Ct){nt.debug(`Component ${Xe.name} failed to register with FirebaseApp ${Ye.name}`,Ct)}}function Hs(Ye,Xe){Ye.container.addOrOverwriteComponent(Xe)}function qr(Ye){const Xe=Ye.name;if(gn.has(Xe))return nt.debug(`There were multiple attempts to register component ${Xe}.`),!1;gn.set(Xe,Ye);for(const Ct of vn.values())ii(Ct,Ye);return!0}function Bi(Ye,Xe){const Ct=Ye.container.getProvider("heartbeat").getImmediate({optional:!0});return Ct&&Ct.triggerHeartbeat(),Ye.container.getProvider(Xe)}function Oi(Ye,Xe,Ct=vi){Bi(Ye,Xe).clearInstance(Ct)}function bn(){gn.clear()}const Tr=new F.UR("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Cn{constructor(Xe,Ct,Xt){this._isDeleted=!1,this._options=Object.assign({},Xe),this._config=Object.assign({},Ct),this._name=Ct.name,this._automaticDataCollectionEnabled=Ct.automaticDataCollectionEnabled,this._container=Xt,this.container.addComponent(new Q.Yl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Xe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Xe){this._isDeleted=Xe}checkDestroyed(){if(this.isDeleted)throw Tr.create("app-deleted",{appName:this._name})}}const Mr="10.8.0";function Gn(Ye,Xe={}){let Ct=Ye;"object"!=typeof Xe&&(Xe={name:Xe});const Xt=Object.assign({name:vi,automaticDataCollectionEnabled:!1},Xe),Bn=Xt.name;if("string"!=typeof Bn||!Bn)throw Tr.create("bad-app-name",{appName:String(Bn)});if(Ct||(Ct=(0,F.Yd)()),!Ct)throw Tr.create("no-options");const Hn=vn.get(Bn);if(Hn){if((0,F.IN)(Ct,Hn.options)&&(0,F.IN)(Xt,Hn.config))return Hn;throw Tr.create("duplicate-app",{appName:Bn})}const Yn=new Q.op(Bn);for(const lr of gn.values())Yn.addComponent(lr);const Kr=new Cn(Ct,Xt,Yn);return vn.set(Bn,Kr),Kr}function wi(Ye=vi){const Xe=vn.get(Ye);if(!Xe&&Ye===vi&&(0,F.Yd)())return Gn();if(!Xe)throw Tr.create("no-app",{appName:Ye});return Xe}function jr(){return Array.from(vn.values())}function Nr(Ye){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,_.c)(function*(Ye){const Xe=Ye.name;vn.has(Xe)&&(vn.delete(Xe),yield Promise.all(Ye.container.getProviders().map(Ct=>Ct.delete())),Ye.isDeleted=!0)})).apply(this,arguments)}function pi(Ye,Xe,Ct){var Xt;let Bn=null!==(Xt=rr[Ye])&&void 0!==Xt?Xt:Ye;Ct&&(Bn+=`-${Ct}`);const Hn=Bn.match(/\s|\//),Yn=Xe.match(/\s|\//);if(Hn||Yn){const Kr=[`Unable to register library "${Bn}" with version "${Xe}":`];return Hn&&Kr.push(`library name "${Bn}" contains illegal characters (whitespace or "/")`),Hn&&Yn&&Kr.push("and"),Yn&&Kr.push(`version name "${Xe}" contains illegal characters (whitespace or "/")`),void nt.warn(Kr.join(" "))}qr(new Q.Yl(`${Bn}-version`,()=>({library:Bn,version:Xe}),"VERSION"))}function gt(Ye,Xe){if(null!==Ye&&"function"!=typeof Ye)throw Tr.create("invalid-log-argument");(0,A.S2)(Ye,Xe)}function He(Ye){(0,A.QN)(Ye)}const ge="firebase-heartbeat-database",Be=1,ie="firebase-heartbeat-store";let ce=null;function Z(){return ce||(ce=function de(Ye,Xe,{blocked:Ct,upgrade:Xt,blocking:Bn,terminated:Hn}={}){const Yn=indexedDB.open(Ye,Xe),Kr=Ee(Yn);return Xt&&Yn.addEventListener("upgradeneeded",lr=>{Xt(Ee(Yn.result),lr.oldVersion,lr.newVersion,Ee(Yn.transaction),lr)}),Ct&&Yn.addEventListener("blocked",lr=>Ct(lr.oldVersion,lr.newVersion,lr)),Kr.then(lr=>{Hn&&lr.addEventListener("close",()=>Hn()),Bn&&lr.addEventListener("versionchange",oe=>Bn(oe.oldVersion,oe.newVersion,oe))}).catch(()=>{}),Kr}(ge,Be,{upgrade:(Ye,Xe)=>{if(0===Xe)try{Ye.createObjectStore(ie)}catch(Ct){console.warn(Ct)}}}).catch(Ye=>{throw Tr.create("idb-open",{originalErrorMessage:Ye.message})})),ce}function ee(){return(ee=(0,_.c)(function*(Ye){try{const Ct=(yield Z()).transaction(ie),Xt=yield Ct.objectStore(ie).get(Wt(Ye));return yield Ct.done,Xt}catch(Xe){if(Xe instanceof F.kx)nt.warn(Xe.message);else{const Ct=Tr.create("idb-get",{originalErrorMessage:Xe?.message});nt.warn(Ct.message)}}})).apply(this,arguments)}function Fe(Ye,Xe){return mt.apply(this,arguments)}function mt(){return(mt=(0,_.c)(function*(Ye,Xe){try{const Xt=(yield Z()).transaction(ie,"readwrite");yield Xt.objectStore(ie).put(Xe,Wt(Ye)),yield Xt.done}catch(Ct){if(Ct instanceof F.kx)nt.warn(Ct.message);else{const Xt=Tr.create("idb-set",{originalErrorMessage:Ct?.message});nt.warn(Xt.message)}}})).apply(this,arguments)}function Wt(Ye){return`${Ye.name}!${Ye.options.appId}`}class On{constructor(Xe){this.container=Xe,this._heartbeatsCache=null;const Ct=this.container.getProvider("app").getImmediate();this._storage=new ln(Ct),this._heartbeatsCachePromise=this._storage.read().then(Xt=>(this._heartbeatsCache=Xt,Xt))}triggerHeartbeat(){var Xe=this;return(0,_.c)(function*(){var Ct,Xt;const Hn=Xe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Yn=Yt();if((null!=(null===(Ct=Xe._heartbeatsCache)||void 0===Ct?void 0:Ct.heartbeats)||(Xe._heartbeatsCache=yield Xe._heartbeatsCachePromise,null!=(null===(Xt=Xe._heartbeatsCache)||void 0===Xt?void 0:Xt.heartbeats)))&&Xe._heartbeatsCache.lastSentHeartbeatDate!==Yn&&!Xe._heartbeatsCache.heartbeats.some(Kr=>Kr.date===Yn))return Xe._heartbeatsCache.heartbeats.push({date:Yn,agent:Hn}),Xe._heartbeatsCache.heartbeats=Xe._heartbeatsCache.heartbeats.filter(Kr=>{const lr=new Date(Kr.date).valueOf();return Date.now()-lr<=2592e6}),Xe._storage.overwrite(Xe._heartbeatsCache)})()}getHeartbeatsHeader(){var Xe=this;return(0,_.c)(function*(){var Ct;if(null===Xe._heartbeatsCache&&(yield Xe._heartbeatsCachePromise),null==(null===(Ct=Xe._heartbeatsCache)||void 0===Ct?void 0:Ct.heartbeats)||0===Xe._heartbeatsCache.heartbeats.length)return"";const Xt=Yt(),{heartbeatsToSend:Bn,unsentEntries:Hn}=function Dr(Ye,Xe=1024){const Ct=[];let Xt=Ye.slice();for(const Bn of Ye){const Hn=Ct.find(Yn=>Yn.agent===Bn.agent);if(Hn){if(Hn.dates.push(Bn.date),Ln(Ct)>Xe){Hn.dates.pop();break}}else if(Ct.push({agent:Bn.agent,dates:[Bn.date]}),Ln(Ct)>Xe){Ct.pop();break}Xt=Xt.slice(1)}return{heartbeatsToSend:Ct,unsentEntries:Xt}}(Xe._heartbeatsCache.heartbeats),Yn=(0,F.Wg)(JSON.stringify({version:2,heartbeats:Bn}));return Xe._heartbeatsCache.lastSentHeartbeatDate=Xt,Hn.length>0?(Xe._heartbeatsCache.heartbeats=Hn,yield Xe._storage.overwrite(Xe._heartbeatsCache)):(Xe._heartbeatsCache.heartbeats=[],Xe._storage.overwrite(Xe._heartbeatsCache)),Yn})()}}function Yt(){return(new Date).toISOString().substring(0,10)}class ln{constructor(Xe){this.app=Xe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.c)(function*(){return!!(0,F.yy)()&&(0,F.A3)().then(()=>!0).catch(()=>!1)})()}read(){var Xe=this;return(0,_.c)(function*(){if(yield Xe._canUseIndexedDBPromise){const Xt=yield function X(Ye){return ee.apply(this,arguments)}(Xe.app);return Xt?.heartbeats?Xt:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Xe){var Ct=this;return(0,_.c)(function*(){var Xt;if(yield Ct._canUseIndexedDBPromise){const Hn=yield Ct.read();return Fe(Ct.app,{lastSentHeartbeatDate:null!==(Xt=Xe.lastSentHeartbeatDate)&&void 0!==Xt?Xt:Hn.lastSentHeartbeatDate,heartbeats:Xe.heartbeats})}})()}add(Xe){var Ct=this;return(0,_.c)(function*(){var Xt;if(yield Ct._canUseIndexedDBPromise){const Hn=yield Ct.read();return Fe(Ct.app,{lastSentHeartbeatDate:null!==(Xt=Xe.lastSentHeartbeatDate)&&void 0!==Xt?Xt:Hn.lastSentHeartbeatDate,heartbeats:[...Hn.heartbeats,...Xe.heartbeats]})}})()}}function Ln(Ye){return(0,F.Wg)(JSON.stringify({version:2,heartbeats:Ye})).length}!function Re(Ye){qr(new Q.Yl("platform-logger",Xe=>new ht(Xe),"PRIVATE")),qr(new Q.Yl("heartbeat",Xe=>new On(Xe),"PRIVATE")),pi(et,"0.9.27",Ye),pi(et,"0.9.27","esm2017"),pi("fire-js","")}("")},4920:($t,We,V)=>{V.d(We,{Yl:()=>A,op:()=>je});var _=V(1528),Q=V(7144);class A{constructor(he,le,$e){this.name=he,this.instanceFactory=le,this.type=$e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(he){return this.instantiationMode=he,this}setMultipleInstances(he){return this.multipleInstances=he,this}setServiceProps(he){return this.serviceProps=he,this}setInstanceCreatedCallback(he){return this.onInstanceCreated=he,this}}const F="[DEFAULT]";class ye{constructor(he,le){this.name=he,this.container=le,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(he){const le=this.normalizeInstanceIdentifier(he);if(!this.instancesDeferred.has(le)){const $e=new Q.o9;if(this.instancesDeferred.set(le,$e),this.isInitialized(le)||this.shouldAutoInitialize())try{const we=this.getOrInitializeService({instanceIdentifier:le});we&&$e.resolve(we)}catch{}}return this.instancesDeferred.get(le).promise}getImmediate(he){var le;const $e=this.normalizeInstanceIdentifier(he?.identifier),we=null!==(le=he?.optional)&&void 0!==le&&le;if(!this.isInitialized($e)&&!this.shouldAutoInitialize()){if(we)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:$e})}catch(Se){if(we)return null;throw Se}}getComponent(){return this.component}setComponent(he){if(he.name!==this.name)throw Error(`Mismatching Component ${he.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=he,this.shouldAutoInitialize()){if(function Ie(Ne){return"EAGER"===Ne.instantiationMode}(he))try{this.getOrInitializeService({instanceIdentifier:F})}catch{}for(const[le,$e]of this.instancesDeferred.entries()){const we=this.normalizeInstanceIdentifier(le);try{const Se=this.getOrInitializeService({instanceIdentifier:we});$e.resolve(Se)}catch{}}}}clearInstance(he=F){this.instancesDeferred.delete(he),this.instancesOptions.delete(he),this.instances.delete(he)}delete(){var he=this;return(0,_.c)(function*(){const le=Array.from(he.instances.values());yield Promise.all([...le.filter($e=>"INTERNAL"in $e).map($e=>$e.INTERNAL.delete()),...le.filter($e=>"_delete"in $e).map($e=>$e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(he=F){return this.instances.has(he)}getOptions(he=F){return this.instancesOptions.get(he)||{}}initialize(he={}){const{options:le={}}=he,$e=this.normalizeInstanceIdentifier(he.instanceIdentifier);if(this.isInitialized($e))throw Error(`${this.name}(${$e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const we=this.getOrInitializeService({instanceIdentifier:$e,options:le});for(const[Se,Ve]of this.instancesDeferred.entries())$e===this.normalizeInstanceIdentifier(Se)&&Ve.resolve(we);return we}onInit(he,le){var $e;const we=this.normalizeInstanceIdentifier(le),Se=null!==($e=this.onInitCallbacks.get(we))&&void 0!==$e?$e:new Set;Se.add(he),this.onInitCallbacks.set(we,Se);const Ve=this.instances.get(we);return Ve&&he(Ve,we),()=>{Se.delete(he)}}invokeOnInitCallbacks(he,le){const $e=this.onInitCallbacks.get(le);if($e)for(const we of $e)try{we(he,le)}catch{}}getOrInitializeService({instanceIdentifier:he,options:le={}}){let $e=this.instances.get(he);if(!$e&&this.component&&($e=this.component.instanceFactory(this.container,{instanceIdentifier:(Ne=he,Ne===F?void 0:Ne),options:le}),this.instances.set(he,$e),this.instancesOptions.set(he,le),this.invokeOnInitCallbacks($e,he),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,he,$e)}catch{}var Ne;return $e||null}normalizeInstanceIdentifier(he=F){return this.component?this.component.multipleInstances?he:F:he}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class je{constructor(he){this.name=he,this.providers=new Map}addComponent(he){const le=this.getProvider(he.name);if(le.isComponentSet())throw new Error(`Component ${he.name} has already been registered with ${this.name}`);le.setComponent(he)}addOrOverwriteComponent(he){this.getProvider(he.name).isComponentSet()&&this.providers.delete(he.name),this.addComponent(he)}getProvider(he){if(this.providers.has(he))return this.providers.get(he);const le=new ye(he,this);return this.providers.set(he,le),le}getProviders(){return Array.from(this.providers.values())}}},5976:($t,We,V)=>{V.d(We,{Ge:()=>Q,QN:()=>je,S2:()=>Ne,YJ:()=>Ie});const _=[];var Q=function(he){return he[he.DEBUG=0]="DEBUG",he[he.VERBOSE=1]="VERBOSE",he[he.INFO=2]="INFO",he[he.WARN=3]="WARN",he[he.ERROR=4]="ERROR",he[he.SILENT=5]="SILENT",he}(Q||{});const A={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},F=Q.INFO,ye={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},G=(he,le,...$e)=>{if(le<he.logLevel)return;const we=(new Date).toISOString(),Se=ye[le];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${le})`);console[Se](`[${we}]  ${he.name}:`,...$e)};class Ie{constructor(le){this.name=le,this._logLevel=F,this._logHandler=G,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(le){if(!(le in Q))throw new TypeError(`Invalid value "${le}" assigned to \`logLevel\``);this._logLevel=le}setLogLevel(le){this._logLevel="string"==typeof le?A[le]:le}get logHandler(){return this._logHandler}set logHandler(le){if("function"!=typeof le)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=le}get userLogHandler(){return this._userLogHandler}set userLogHandler(le){this._userLogHandler=le}debug(...le){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...le),this._logHandler(this,Q.DEBUG,...le)}log(...le){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...le),this._logHandler(this,Q.VERBOSE,...le)}info(...le){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...le),this._logHandler(this,Q.INFO,...le)}warn(...le){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...le),this._logHandler(this,Q.WARN,...le)}error(...le){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...le),this._logHandler(this,Q.ERROR,...le)}}function je(he){_.forEach(le=>{le.setLogLevel(he)})}function Ne(he,le){for(const $e of _){let we=null;le&&le.level&&(we=A[le.level]),$e.userLogHandler=null===he?null:(Se,Ve,...be)=>{const ot=be.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");Ve>=(we??Se.logLevel)&&he({level:Q[Ve].toLowerCase(),message:ot,args:be,type:Se.name})}}}},3680:($t,We,V)=>{V.d(We,{Kk:()=>_.registerVersion,UH:()=>_.getApps,WE:()=>_.getApp});var _=V(9360);(0,_.registerVersion)("firebase","10.8.0","app")},8836:($t,We,V)=>{V.d(We,{wR:()=>_.X,Iv:()=>_.o});var _=V(1944);V(7144),V(9360),V(5976),V(4920)},9252:($t,We,V)=>{V.d(We,{c:()=>_.c});var _=V(8368);_.c.registerVersion("firebase","10.8.0","app-compat")},6858:($t,We,V)=>{V.r(We);var _=V(1528),Q=V(8368),A=V(1944),F=V(7144),Ie=(V(9360),V(5976),V(4920));function je(){return window}function le(){return le=(0,_.c)(function*(Z,X,ee){var Fe;const{BuildInfo:mt}=je();(0,A.au)(X.sessionId,"AuthEvent did not contain a session ID");const Wt=yield function pe(Z){return Ue.apply(this,arguments)}(X.sessionId),yn={};return(0,A.av)()?yn.ibi=mt.packageName:(0,A.aw)()?yn.apn=mt.packageName:(0,A.ax)(Z,"operation-not-supported-in-this-environment"),mt.displayName&&(yn.appDisplayName=mt.displayName),yn.sessionId=Wt,(0,A.ay)(Z,ee,X.type,void 0,null!==(Fe=X.eventId)&&void 0!==Fe?Fe:void 0,yn)}),le.apply(this,arguments)}function we(){return(we=(0,_.c)(function*(Z){const{BuildInfo:X}=je(),ee={};(0,A.av)()?ee.iosBundleId=X.packageName:(0,A.aw)()?ee.androidPackageName=X.packageName:(0,A.ax)(Z,"operation-not-supported-in-this-environment"),yield(0,A.az)(Z,ee)})).apply(this,arguments)}function be(){return(be=(0,_.c)(function*(Z,X,ee){const{cordova:Fe}=je();let mt=()=>{};try{yield new Promise((Wt,yn)=>{let En=null;function On(){var ln;Wt();const Ln=null===(ln=Fe.plugins.browsertab)||void 0===ln?void 0:ln.close;"function"==typeof Ln&&Ln(),"function"==typeof ee?.close&&ee.close()}function Yt(){En||(En=window.setTimeout(()=>{yn((0,A.aB)(Z,"redirect-cancelled-by-user"))},2e3))}function Dr(){"visible"===document?.visibilityState&&Yt()}X.addPassiveListener(On),document.addEventListener("resume",Yt,!1),(0,A.aw)()&&document.addEventListener("visibilitychange",Dr,!1),mt=()=>{X.removePassiveListener(On),document.removeEventListener("resume",Yt,!1),document.removeEventListener("visibilitychange",Dr,!1),En&&window.clearTimeout(En)}})}finally{mt()}})).apply(this,arguments)}function Ue(){return(Ue=(0,_.c)(function*(Z){const X=function Ke(Z){if((0,A.au)(/[0-9a-zA-Z]+/.test(Z),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Z);const X=new ArrayBuffer(Z.length),ee=new Uint8Array(X);for(let Fe=0;Fe<Z.length;Fe++)ee[Fe]=Z.charCodeAt(Fe);return ee}(Z),ee=yield crypto.subtle.digest("SHA-256",X);return Array.from(new Uint8Array(ee)).map(mt=>mt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class qe extends A.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(X=>{this.resolveInialized=X})}addPassiveListener(X){this.passiveListeners.add(X)}removePassiveListener(X){this.passiveListeners.delete(X)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(X){return this.resolveInialized(),this.passiveListeners.forEach(ee=>ee(X)),super.onEvent(X)}initialized(){var X=this;return(0,_.c)(function*(){yield X.initPromise})()}}function Dt(Z){return xe.apply(this,arguments)}function xe(){return(xe=(0,_.c)(function*(Z){const X=yield ht()._get(Le(Z));return X&&(yield ht()._remove(Le(Z))),X})).apply(this,arguments)}function bt(){const Z=[];for(let ee=0;ee<20;ee++){const Fe=Math.floor(62*Math.random());Z.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Fe))}return Z.join("")}function ht(){return(0,A.aE)(A.b)}function Le(Z){return(0,A.aF)("authEvent",Z.config.apiKey,Z.name)}function nt(Z){if(!Z?.includes("?"))return{};const[X,...ee]=Z.split("?");return(0,F.aw)(ee.join("?"))}const Oe=class tn{constructor(){this._redirectPersistence=A.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=A.aG,this._overrideRedirectResult=A.aH}_initialize(X){var ee=this;return(0,_.c)(function*(){const Fe=X._key();let mt=ee.eventManagers.get(Fe);return mt||(mt=new qe(X),ee.eventManagers.set(Fe,mt),ee.attachCallbackListeners(X,mt)),mt})()}_openPopup(X){(0,A.ax)(X,"operation-not-supported-in-this-environment")}_openRedirect(X,ee,Fe,mt){var Wt=this;return(0,_.c)(function*(){!function ot(Z){var X,ee,Fe,mt,Wt,yn,En,On,Yt,Dr;const ln=je();(0,A.aC)("function"==typeof(null===(X=ln?.universalLinks)||void 0===X?void 0:X.subscribe),Z,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,A.aC)(typeof(null===(ee=ln?.BuildInfo)||void 0===ee?void 0:ee.packageName)<"u",Z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,A.aC)("function"==typeof(null===(Wt=null===(mt=null===(Fe=ln?.cordova)||void 0===Fe?void 0:Fe.plugins)||void 0===mt?void 0:mt.browsertab)||void 0===Wt?void 0:Wt.openUrl),Z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,A.aC)("function"==typeof(null===(On=null===(En=null===(yn=ln?.cordova)||void 0===yn?void 0:yn.plugins)||void 0===En?void 0:En.browsertab)||void 0===On?void 0:On.isAvailable),Z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,A.aC)("function"==typeof(null===(Dr=null===(Yt=ln?.cordova)||void 0===Yt?void 0:Yt.InAppBrowser)||void 0===Dr?void 0:Dr.open),Z,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(X);const yn=yield Wt._initialize(X);yield yn.initialized(),yn.resetRedirect(),(0,A.aI)(),yield Wt._originValidation(X);const En=function de(Z,X,ee=null){return{type:X,eventId:ee,urlResponse:null,sessionId:bt(),postBody:null,tenantId:Z.tenantId,error:(0,A.aB)(Z,"no-auth-event")}}(X,Fe,mt);yield function wt(Z,X){return ht()._set(Le(Z),X)}(X,En);const On=yield function he(Z,X,ee){return le.apply(this,arguments)}(X,En,ee),Yt=yield function Se(Z){const{cordova:X}=je();return new Promise(ee=>{X.plugins.browsertab.isAvailable(Fe=>{let mt=null;Fe?X.plugins.browsertab.openUrl(Z):mt=X.InAppBrowser.open(Z,(0,A.aA)()?"_blank":"_system","location=yes"),ee(mt)})})}(On);return function Ve(Z,X,ee){return be.apply(this,arguments)}(X,yn,Yt)})()}_isIframeWebStorageSupported(X,ee){throw new Error("Method not implemented.")}_originValidation(X){const ee=X._key();return this.originValidationPromises[ee]||(this.originValidationPromises[ee]=function $e(Z){return we.apply(this,arguments)}(X)),this.originValidationPromises[ee]}attachCallbackListeners(X,ee){const{universalLinks:Fe,handleOpenURL:mt,BuildInfo:Wt}=je(),yn=setTimeout((0,_.c)(function*(){yield Dt(X),ee.onEvent(ze())}),500),En=function(){var Dr=(0,_.c)(function*(ln){clearTimeout(yn);const Ln=yield Dt(X);let Re=null;Ln&&ln?.url&&(Re=function Et(Z,X){var ee,Fe;const mt=function tt(Z){const X=nt(Z),ee=X.link?decodeURIComponent(X.link):void 0,Fe=nt(ee).link,mt=X.deep_link_id?decodeURIComponent(X.deep_link_id):void 0;return nt(mt).link||mt||Fe||ee||Z}(X);if(mt.includes("/__/auth/callback")){const Wt=nt(mt),yn=Wt.firebaseError?function et(Z){try{return JSON.parse(Z)}catch{return null}}(decodeURIComponent(Wt.firebaseError)):null,En=null===(Fe=null===(ee=yn?.code)||void 0===ee?void 0:ee.split("auth/"))||void 0===Fe?void 0:Fe[1],On=En?(0,A.aB)(En):null;return On?{type:Z.type,eventId:Z.eventId,tenantId:Z.tenantId,error:On,urlResponse:null,sessionId:null,postBody:null}:{type:Z.type,eventId:Z.eventId,tenantId:Z.tenantId,sessionId:Z.sessionId,urlResponse:mt,postBody:null}}return null}(Ln,ln.url)),ee.onEvent(Re||ze())});return function(Ln){return Dr.apply(this,arguments)}}();typeof Fe<"u"&&"function"==typeof Fe.subscribe&&Fe.subscribe(null,En);const On=mt,Yt=`${Wt.packageName.toLowerCase()}://`;je().handleOpenURL=function(){var Dr=(0,_.c)(function*(ln){if(ln.toLowerCase().startsWith(Yt)&&En({url:ln}),"function"==typeof On)try{On(ln)}catch(Ln){console.error(Ln)}});return function(ln){return Dr.apply(this,arguments)}}()}};function ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,A.aB)("no-auth-event")}}function Tt(){var Z;return(null===(Z=self?.location)||void 0===Z?void 0:Z.protocol)||null}function Zt(Z=(0,F.Su)()){return!("file:"!==Tt()&&"ionic:"!==Tt()&&"capacitor:"!==Tt()||!Z.toLowerCase().match(/iphone|ipad|ipod|android/))}function wn(){try{const Z=self.localStorage,X=A.aN();if(Z)return Z.setItem(X,"1"),Z.removeItem(X),!function Kt(Z=(0,F.Su)()){return function _n(){return(0,F.Uv)()&&11===document?.documentMode}()||function Tn(Z=(0,F.Su)()){return/Edge\/\d+/.test(Z)}(Z)}()||(0,F.yy)()}catch{return Wn()&&(0,F.yy)()}return!1}function Wn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rr(){return(function qt(){return"http:"===Tt()||"https:"===Tt()}()||(0,F.Cc)()||Zt())&&!function en(){return(0,F.AL)()||(0,F.yW)()}()&&wn()&&!Wn()}function Bt(){return Zt()&&typeof document<"u"}function Lt(){return(Lt=(0,_.c)(function*(){return!!Bt()&&new Promise(Z=>{const X=setTimeout(()=>{Z(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(X),Z(!0)})})})).apply(this,arguments)}const kn={LOCAL:"local",NONE:"none",SESSION:"session"},Zr=A.aC,yr="persistence";function rr(Z){return vn.apply(this,arguments)}function vn(){return(vn=(0,_.c)(function*(Z){yield Z._initializationPromise;const X=ii(),ee=A.aF(yr,Z.config.apiKey,Z.name);X&&X.setItem(ee,Z._getPersistence())})).apply(this,arguments)}function ii(){var Z;try{return(null===(Z=function zr(){return typeof window<"u"?window:null}())||void 0===Z?void 0:Z.sessionStorage)||null}catch{return null}}const Hs=A.aC;class qr{constructor(){this.browserResolver=A.aE(A.k),this.cordovaResolver=A.aE(Oe),this.underlyingResolver=null,this._redirectPersistence=A.a,this._completeRedirectFn=A.aG,this._overrideRedirectResult=A.aH}_initialize(X){var ee=this;return(0,_.c)(function*(){return yield ee.selectUnderlyingResolver(),ee.assertedUnderlyingResolver._initialize(X)})()}_openPopup(X,ee,Fe,mt){var Wt=this;return(0,_.c)(function*(){return yield Wt.selectUnderlyingResolver(),Wt.assertedUnderlyingResolver._openPopup(X,ee,Fe,mt)})()}_openRedirect(X,ee,Fe,mt){var Wt=this;return(0,_.c)(function*(){return yield Wt.selectUnderlyingResolver(),Wt.assertedUnderlyingResolver._openRedirect(X,ee,Fe,mt)})()}_isIframeWebStorageSupported(X,ee){this.assertedUnderlyingResolver._isIframeWebStorageSupported(X,ee)}_originValidation(X){return this.assertedUnderlyingResolver._originValidation(X)}get _shouldInitProactively(){return Bt()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Hs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var X=this;return(0,_.c)(function*(){if(X.underlyingResolver)return;const ee=yield function wr(){return Lt.apply(this,arguments)}();X.underlyingResolver=ee?X.cordovaResolver:X.browserResolver})()}}function Bi(Z){return Z.unwrap()}function bn(Z){return Tr(Z)}function Tr(Z){const{_tokenResponse:X}=Z instanceof F.kx?Z.customData:Z;if(!X)return null;if(!(Z instanceof F.kx)&&"temporaryProof"in X&&"phoneNumber"in X)return A.P.credentialFromResult(Z);const ee=X.providerId;if(!ee||ee===A.p.PASSWORD)return null;let Fe;switch(ee){case A.p.GOOGLE:Fe=A.X;break;case A.p.FACEBOOK:Fe=A.W;break;case A.p.GITHUB:Fe=A.Y;break;case A.p.TWITTER:Fe=A.$;break;default:const{oauthIdToken:mt,oauthAccessToken:Wt,oauthTokenSecret:yn,pendingToken:En,nonce:On}=X;return Wt||yn||mt||En?En?ee.startsWith("saml.")?A.aQ._create(ee,En):A.N._fromParams({providerId:ee,signInMethod:ee,pendingToken:En,idToken:mt,accessToken:Wt}):new A.Z(ee).credential({idToken:mt,accessToken:Wt,rawNonce:On}):null}return Z instanceof F.kx?Fe.credentialFromError(Z):Fe.credentialFromResult(Z)}function Cn(Z,X){return X.catch(ee=>{throw ee instanceof F.kx&&function Fn(Z,X){var ee;const Fe=null===(ee=X.customData)||void 0===ee?void 0:ee._tokenResponse;if("auth/multi-factor-auth-required"===X?.code)X.resolver=new wi(Z,A.as(Z,X));else if(Fe){const mt=Tr(X),Wt=X;mt&&(Wt.credential=mt,Wt.tenantId=Fe.tenantId||void 0,Wt.email=Fe.email||void 0,Wt.phoneNumber=Fe.phoneNumber||void 0)}}(Z,ee),ee}).then(ee=>{const mt=ee.user;return{operationType:ee.operationType,credential:bn(ee),additionalUserInfo:A.aq(ee),user:jr.getOrCreate(mt)}})}function Mr(Z,X){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,_.c)(function*(Z,X){const ee=yield X;return{verificationId:ee.verificationId,confirm:Fe=>Cn(Z,ee.confirm(Fe))}})).apply(this,arguments)}class wi{constructor(X,ee){this.resolver=ee,this.auth=function Oi(Z){return Z.wrapped()}(X)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(X){return Cn(Bi(this.auth),this.resolver.resolveSignIn(X))}}class jr{constructor(X){this._delegate=X,this.multiFactor=A.at(X)}static getOrCreate(X){return jr.USER_MAP.has(X)||jr.USER_MAP.set(X,new jr(X)),jr.USER_MAP.get(X)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(X){return this._delegate.getIdTokenResult(X)}getIdToken(X){return this._delegate.getIdToken(X)}linkAndRetrieveDataWithCredential(X){return this.linkWithCredential(X)}linkWithCredential(X){var ee=this;return(0,_.c)(function*(){return Cn(ee.auth,A.a2(ee._delegate,X))})()}linkWithPhoneNumber(X,ee){var Fe=this;return(0,_.c)(function*(){return Mr(Fe.auth,A.l(Fe._delegate,X,ee))})()}linkWithPopup(X){var ee=this;return(0,_.c)(function*(){return Cn(ee.auth,A.d(ee._delegate,X,qr))})()}linkWithRedirect(X){var ee=this;return(0,_.c)(function*(){return yield rr(A.aJ(ee.auth)),A.g(ee._delegate,X,qr)})()}reauthenticateAndRetrieveDataWithCredential(X){return this.reauthenticateWithCredential(X)}reauthenticateWithCredential(X){var ee=this;return(0,_.c)(function*(){return Cn(ee.auth,A.a3(ee._delegate,X))})()}reauthenticateWithPhoneNumber(X,ee){return Mr(this.auth,A.r(this._delegate,X,ee))}reauthenticateWithPopup(X){return Cn(this.auth,A.e(this._delegate,X,qr))}reauthenticateWithRedirect(X){var ee=this;return(0,_.c)(function*(){return yield rr(A.aJ(ee.auth)),A.h(ee._delegate,X,qr)})()}sendEmailVerification(X){return A.ag(this._delegate,X)}unlink(X){var ee=this;return(0,_.c)(function*(){return yield A.ap(ee._delegate,X),ee})()}updateEmail(X){return A.al(this._delegate,X)}updatePassword(X){return A.am(this._delegate,X)}updatePhoneNumber(X){return A.u(this._delegate,X)}updateProfile(X){return A.ak(this._delegate,X)}verifyBeforeUpdateEmail(X,ee){return A.ah(this._delegate,X,ee)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}jr.USER_MAP=new WeakMap;const Nr=A.aC;let Ds=(()=>{class Z{constructor(ee,Fe){if(this.app=ee,Fe.isInitialized())return this._delegate=Fe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:mt}=ee.options;Nr(mt,"invalid-api-key",{appName:ee.name}),Nr(mt,"invalid-api-key",{appName:ee.name});const Wt=typeof window<"u"?qr:void 0;this._delegate=Fe.initialize({options:{persistence:gt(mt,ee.name),popupRedirectResolver:Wt}}),this._delegate._updateErrorMap(A.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(ee){this._delegate.languageCode=ee}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(ee){this._delegate.tenantId=ee}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(ee,Fe){A.K(this._delegate,ee,Fe)}applyActionCode(ee){return A.a7(this._delegate,ee)}checkActionCode(ee){return A.a8(this._delegate,ee)}confirmPasswordReset(ee,Fe){return A.a6(this._delegate,ee,Fe)}createUserWithEmailAndPassword(ee,Fe){var mt=this;return(0,_.c)(function*(){return Cn(mt._delegate,A.aa(mt._delegate,ee,Fe))})()}fetchProvidersForEmail(ee){return this.fetchSignInMethodsForEmail(ee)}fetchSignInMethodsForEmail(ee){return A.af(this._delegate,ee)}isSignInWithEmailLink(ee){return A.ad(this._delegate,ee)}getRedirectResult(){var ee=this;return(0,_.c)(function*(){Nr(Rr(),ee._delegate,"operation-not-supported-in-this-environment");const Fe=yield A.j(ee._delegate,qr);return Fe?Cn(ee._delegate,Promise.resolve(Fe)):{credential:null,user:null}})()}addFrameworkForLogging(ee){!function st(Z,X){(0,A.aJ)(Z)._logFramework(X)}(this._delegate,ee)}onAuthStateChanged(ee,Fe,mt){const{next:Wt,error:yn,complete:En}=pi(ee,Fe,mt);return this._delegate.onAuthStateChanged(Wt,yn,En)}onIdTokenChanged(ee,Fe,mt){const{next:Wt,error:yn,complete:En}=pi(ee,Fe,mt);return this._delegate.onIdTokenChanged(Wt,yn,En)}sendSignInLinkToEmail(ee,Fe){return A.ac(this._delegate,ee,Fe)}sendPasswordResetEmail(ee,Fe){return A.a5(this._delegate,ee,Fe||void 0)}setPersistence(ee){var Fe=this;return(0,_.c)(function*(){let mt;switch(function vi(Z,X){Zr(Object.values(kn).includes(X),Z,"invalid-persistence-type"),(0,F.AL)()?Zr(X!==kn.SESSION,Z,"unsupported-persistence-type"):(0,F.yW)()?Zr(X===kn.NONE,Z,"unsupported-persistence-type"):Wn()?Zr(X===kn.NONE||X===kn.LOCAL&&(0,F.yy)(),Z,"unsupported-persistence-type"):Zr(X===kn.NONE||wn(),Z,"unsupported-persistence-type")}(Fe._delegate,ee),ee){case kn.SESSION:mt=A.a;break;case kn.LOCAL:mt=(yield A.aE(A.i)._isAvailable())?A.i:A.b;break;case kn.NONE:mt=A.U;break;default:return A.ax("argument-error",{appName:Fe._delegate.name})}return Fe._delegate.setPersistence(mt)})()}signInAndRetrieveDataWithCredential(ee){return this.signInWithCredential(ee)}signInAnonymously(){return Cn(this._delegate,A.a0(this._delegate))}signInWithCredential(ee){return Cn(this._delegate,A.a1(this._delegate,ee))}signInWithCustomToken(ee){return Cn(this._delegate,A.a4(this._delegate,ee))}signInWithEmailAndPassword(ee,Fe){return Cn(this._delegate,A.ab(this._delegate,ee,Fe))}signInWithEmailLink(ee,Fe){return Cn(this._delegate,A.ae(this._delegate,ee,Fe))}signInWithPhoneNumber(ee,Fe){return Mr(this._delegate,A.s(this._delegate,ee,Fe))}signInWithPopup(ee){var Fe=this;return(0,_.c)(function*(){return Nr(Rr(),Fe._delegate,"operation-not-supported-in-this-environment"),Cn(Fe._delegate,A.c(Fe._delegate,ee,qr))})()}signInWithRedirect(ee){var Fe=this;return(0,_.c)(function*(){return Nr(Rr(),Fe._delegate,"operation-not-supported-in-this-environment"),yield rr(Fe._delegate),A.f(Fe._delegate,ee,qr)})()}updateCurrentUser(ee){return this._delegate.updateCurrentUser(ee)}verifyPasswordResetCode(ee){return A.a9(this._delegate,ee)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Z.Persistence=kn,Z})();function pi(Z,X,ee){let Fe=Z;"function"!=typeof Z&&({next:Fe,error:X,complete:ee}=Z);const mt=Fe;return{next:yn=>mt(yn&&jr.getOrCreate(yn)),error:X,complete:ee}}function gt(Z,X){const ee=function gn(Z,X){const ee=ii();if(!ee)return[];const Fe=A.aF(yr,Z,X);switch(ee.getItem(Fe)){case kn.NONE:return[A.U];case kn.LOCAL:return[A.i,A.a];case kn.SESSION:return[A.a];default:return[]}}(Z,X);if(typeof self<"u"&&!ee.includes(A.i)&&ee.push(A.i),typeof window<"u")for(const Fe of[A.b,A.a])ee.includes(Fe)||ee.push(Fe);return ee.includes(A.U)||ee.push(A.U),ee}class He{constructor(){this.providerId="phone",this._delegate=new A.P(Bi(Q.c.auth()))}static credential(X,ee){return A.P.credential(X,ee)}verifyPhoneNumber(X,ee){return this._delegate.verifyPhoneNumber(X,ee)}unwrap(){return this._delegate}}He.PHONE_SIGN_IN_METHOD=A.P.PHONE_SIGN_IN_METHOD,He.PROVIDER_ID=A.P.PROVIDER_ID;const ge=A.aC;class Be{constructor(X,ee,Fe=Q.c.app()){var mt;ge(null===(mt=Fe.options)||void 0===mt?void 0:mt.apiKey,"invalid-api-key",{appName:Fe.name}),this._delegate=new A.R(Fe.auth(),X,ee),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ce(Z){Z.INTERNAL.registerComponent(new Ie.Yl("auth-compat",X=>{const ee=X.getProvider("app-compat").getImmediate(),Fe=X.getProvider("auth");return new Ds(ee,Fe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:A.A.EMAIL_SIGNIN,PASSWORD_RESET:A.A.PASSWORD_RESET,RECOVER_EMAIL:A.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:A.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:A.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:A.A.VERIFY_EMAIL}},EmailAuthProvider:A.V,FacebookAuthProvider:A.W,GithubAuthProvider:A.Y,GoogleAuthProvider:A.X,OAuthProvider:A.Z,SAMLAuthProvider:A._,PhoneAuthProvider:He,PhoneMultiFactorGenerator:A.m,RecaptchaVerifier:Be,TwitterAuthProvider:A.$,Auth:Ds,AuthCredential:A.L,Error:F.kx}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Z.registerVersion("@firebase/auth-compat","0.5.2")}(Q.c)},1528:($t,We,V)=>{function _(A,F,ye,G,Ie,je,Ne){try{var he=A[je](Ne),le=he.value}catch($e){return void ye($e)}he.done?F(le):Promise.resolve(le).then(G,Ie)}function Q(A){return function(){var F=this,ye=arguments;return new Promise(function(G,Ie){var je=A.apply(F,ye);function Ne(le){_(je,G,Ie,Ne,he,"next",le)}function he(le){_(je,G,Ie,Ne,he,"throw",le)}Ne(void 0)})}}V.d(We,{c:()=>Q})},1316:($t,We,V)=>{function F(Oe,ze){var st={};for(var Ge in Oe)Object.prototype.hasOwnProperty.call(Oe,Ge)&&ze.indexOf(Ge)<0&&(st[Ge]=Oe[Ge]);if(null!=Oe&&"function"==typeof Object.getOwnPropertySymbols){var lt=0;for(Ge=Object.getOwnPropertySymbols(Oe);lt<Ge.length;lt++)ze.indexOf(Ge[lt])<0&&Object.prototype.propertyIsEnumerable.call(Oe,Ge[lt])&&(st[Ge[lt]]=Oe[Ge[lt]])}return st}function $e(Oe,ze,st,Ge){return new(st||(st=Promise))(function(ut,Tt){function qt(_n){try{en(Ge.next(_n))}catch(Tn){Tt(Tn)}}function Zt(_n){try{en(Ge.throw(_n))}catch(Tn){Tt(Tn)}}function en(_n){_n.done?ut(_n.value):function lt(ut){return ut instanceof st?ut:new st(function(Tt){Tt(ut)})}(_n.value).then(qt,Zt)}en((Ge=Ge.apply(Oe,ze||[])).next())})}function Ee(Oe){return this instanceof Ee?(this.v=Oe,this):new Ee(Oe)}function qe(Oe,ze,st){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lt,Ge=st.apply(Oe,ze||[]),ut=[];return lt={},Tt("next"),Tt("throw"),Tt("return"),lt[Symbol.asyncIterator]=function(){return this},lt;function Tt(Kt){Ge[Kt]&&(lt[Kt]=function(wn){return new Promise(function(Wn,Rr){ut.push([Kt,wn,Wn,Rr])>1||qt(Kt,wn)})})}function qt(Kt,wn){try{!function Zt(Kt){Kt.value instanceof Ee?Promise.resolve(Kt.value.v).then(en,_n):Tn(ut[0][2],Kt)}(Ge[Kt](wn))}catch(Wn){Tn(ut[0][3],Wn)}}function en(Kt){qt("next",Kt)}function _n(Kt){qt("throw",Kt)}function Tn(Kt,wn){Kt(wn),ut.shift(),ut.length&&qt(ut[0][0],ut[0][1])}}function wt(Oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st,ze=Oe[Symbol.asyncIterator];return ze?ze.call(Oe):(Oe=function be(Oe){var ze="function"==typeof Symbol&&Symbol.iterator,st=ze&&Oe[ze],Ge=0;if(st)return st.call(Oe);if(Oe&&"number"==typeof Oe.length)return{next:function(){return Oe&&Ge>=Oe.length&&(Oe=void 0),{value:Oe&&Oe[Ge++],done:!Oe}}};throw new TypeError(ze?"Object is not iterable.":"Symbol.iterator is not defined.")}(Oe),st={},Ge("next"),Ge("throw"),Ge("return"),st[Symbol.asyncIterator]=function(){return this},st);function Ge(ut){st[ut]=Oe[ut]&&function(Tt){return new Promise(function(qt,Zt){!function lt(ut,Tt,qt,Zt){Promise.resolve(Zt).then(function(en){ut({value:en,done:qt})},Tt)}(qt,Zt,(Tt=Oe[ut](Tt)).done,Tt.value)})}}}V.d(We,{U1:()=>Ee,kH:()=>$e,mA:()=>wt,o7:()=>qe,sX:()=>F}),"function"==typeof SuppressedError&&SuppressedError}},$t=>{$t($t.s=2736)}]);