"use strict";(self.webpackChunkmusicshop=self.webpackChunkmusicshop||[]).push([[792],{576:(en,Qe,k)=>{k.d(Qe,{$:()=>us,A:()=>ye,G:()=>Ae,K:()=>zi,L:()=>nr,N:()=>ji,P:()=>Yc,R:()=>lt,U:()=>Bn,V:()=>Ls,W:()=>Ti,X:()=>gr,Y:()=>Us,Z:()=>Yo,_:()=>sr,a:()=>ea,a0:()=>q,a1:()=>fa,a2:()=>La,a3:()=>Ua,a4:()=>Aa,a5:()=>ga,a6:()=>qi,a7:()=>Tc,a8:()=>J,a9:()=>T,aA:()=>ri,aB:()=>ie,aC:()=>de,aD:()=>Lu,aE:()=>Lt,aF:()=>zn,aG:()=>Vu,aH:()=>nf,aI:()=>Cd,aJ:()=>Bt,aN:()=>Kn,aQ:()=>Zr,aa:()=>X,ab:()=>Pe,ac:()=>je,ad:()=>Pt,ae:()=>nn,af:()=>Dn,ag:()=>Vr,ah:()=>pi,ak:()=>Os,al:()=>ls,am:()=>lo,ap:()=>Xn,aq:()=>_e,as:()=>gi,at:()=>El,au:()=>Mt,av:()=>Gi,aw:()=>cs,ax:()=>ce,ay:()=>nu,az:()=>eu,b:()=>_a,c:()=>ef,d:()=>tf,e:()=>Dl,f:()=>Td,g:()=>Rl,h:()=>Dd,i:()=>wl,j:()=>Mr,k:()=>Bu,l:()=>Ac,m:()=>$u,p:()=>Le,r:()=>fo,s:()=>lr,u:()=>ku});var _=k(467),L=k(7852),M=k(1076),C=k(8041),se=k(1635),Me=k(1362);const Le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ye={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ae=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Fe=function Ct(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},wt=new M.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Tt=new C.Vy("@firebase/auth");function mt(E,...h){Tt.logLevel<=C.$b.ERROR&&Tt.error(`Auth (${L.SDK_VERSION}): ${E}`,...h)}function ce(E,...h){throw ze(E,...h)}function ie(E,...h){return ze(E,...h)}function ue(E,h,f){const D=Object.assign(Object.assign({},Fe()),{[h]:f});return new M.FA("auth","Firebase",D).create(h,{appName:E.name})}function Ce(E){return ue(E,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qe(E,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&ce(E,"argument-error"),ue(E,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(E,...h){if("string"!=typeof E){const f=h[0],D=[...h.slice(1)];return D[0]&&(D[0].appName=E.name),E._errorFactory.create(f,...D)}return wt.create(E,...h)}function de(E,h,...f){if(!E)throw ze(h,...f)}function Ue(E){const h="INTERNAL ASSERTION FAILED: "+E;throw mt(h),new Error(h)}function Mt(E,h){E||Ue(h)}function pn(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Pn(){return"http:"===Fn()||"https:"===Fn()}function Fn(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Tn{constructor(h,f){this.shortDelay=h,this.longDelay=f,Mt(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,M.jZ)()||(0,M.lV)()}get(){return function On(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pn()||(0,M.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ke(E,h){Mt(E.emulator,"Emulator should always be set here");const{url:f}=E.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class Xe{static initialize(h,f,D){this.fetchImpl=h,f&&(this.headersImpl=f),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ue("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ue("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ue("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ct={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},gt=new Tn(3e4,6e4);function yt(E,h){return E.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:E.tenantId}):h}function Ze(E,h,f,D){return zt.apply(this,arguments)}function zt(){return(zt=(0,_.A)(function*(E,h,f,D,K={}){return ln(E,K,(0,_.A)(function*(){let ae={},Ve={};D&&("GET"===h?Ve=D:ae={body:JSON.stringify(D)});const Dt=(0,M.Am)(Object.assign({key:E.config.apiKey},Ve)).slice(1),$t=yield E._getAdditionalHeaders();return $t["Content-Type"]="application/json",E.languageCode&&($t["X-Firebase-Locale"]=E.languageCode),Xe.fetch()(Cn(E,E.config.apiHost,f,Dt),Object.assign({method:h,headers:$t,referrerPolicy:"no-referrer"},ae))}))})).apply(this,arguments)}function ln(E,h,f){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,_.A)(function*(E,h,f){E._canInitEmulator=!1;const D=Object.assign(Object.assign({},ct),h);try{const K=new rt(E),ae=yield Promise.race([f(),K.promise]);K.clearNetworkTimeout();const Ve=yield ae.json();if("needConfirmation"in Ve)throw yn(E,"account-exists-with-different-credential",Ve);if(ae.ok&&!("errorMessage"in Ve))return Ve;{const Dt=ae.ok?Ve.errorMessage:Ve.error.message,[$t,In]=Dt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$t)throw yn(E,"credential-already-in-use",Ve);if("EMAIL_EXISTS"===$t)throw yn(E,"email-already-in-use",Ve);if("USER_DISABLED"===$t)throw yn(E,"user-disabled",Ve);const $n=D[$t]||$t.toLowerCase().replace(/[_\s]+/g,"-");if(In)throw ue(E,$n,In);ce(E,$n)}}catch(K){if(K instanceof M.g)throw K;ce(E,"network-request-failed",{message:String(K)})}})).apply(this,arguments)}function tn(E,h,f,D){return vn.apply(this,arguments)}function vn(){return(vn=(0,_.A)(function*(E,h,f,D,K={}){const ae=yield Ze(E,h,f,D,K);return"mfaPendingCredential"in ae&&ce(E,"multi-factor-auth-required",{_serverResponse:ae}),ae})).apply(this,arguments)}function Cn(E,h,f,D){const K=`${h}${f}?${D}`;return E.config.emulator?ke(E.config,K):`${E.config.apiScheme}://${K}`}function Ln(E){switch(E){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rt{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,D)=>{this.timer=setTimeout(()=>D(ie(this.auth,"network-request-failed")),gt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yn(E,h,f){const D={appName:E.name};f.email&&(D.email=f.email),f.phoneNumber&&(D.phoneNumber=f.phoneNumber);const K=ie(E,h,D);return K.customData._tokenResponse=f,K}function Gn(E){return void 0!==E&&void 0!==E.getResponse}function rr(E){return void 0!==E&&void 0!==E.enterprise}class bt{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===h)return Ln(f.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function ti(){return(ti=(0,_.A)(function*(E){return(yield Ze(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nt(E,h){return tt.apply(this,arguments)}function tt(){return(tt=(0,_.A)(function*(E,h){return Ze(E,"GET","/v2/recaptchaConfig",yt(E,h))})).apply(this,arguments)}function Qn(){return(Qn=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function wn(){return(wn=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function An(E,h){return kr.apply(this,arguments)}function kr(){return(kr=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function qr(E){if(E)try{const h=new Date(Number(E));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Rr(){return(Rr=(0,_.A)(function*(E,h=!1){const f=(0,M.Ku)(E),D=yield f.getIdToken(h),K=Nn(D);de(K&&K.exp&&K.auth_time&&K.iat,f.auth,"internal-error");const ae="object"==typeof K.firebase?K.firebase:void 0,Ve=ae?.sign_in_provider;return{claims:K,token:D,authTime:qr(hs(K.auth_time)),issuedAtTime:qr(hs(K.iat)),expirationTime:qr(hs(K.exp)),signInProvider:Ve||null,signInSecondFactor:ae?.sign_in_second_factor||null}})).apply(this,arguments)}function hs(E){return 1e3*Number(E)}function Nn(E){const[h,f,D]=E.split(".");if(void 0===h||void 0===f||void 0===D)return mt("JWT malformed, contained fewer than 3 sections"),null;try{const K=(0,M.u)(f);return K?JSON.parse(K):(mt("Failed to decode base64 JWT payload"),null)}catch(K){return mt("Caught error parsing JWT payload as JSON",K?.toString()),null}}function Ui(E){const h=Nn(E);return de(h,"internal-error"),de(typeof h.exp<"u","internal-error"),de(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}function Ht(E,h){return Un.apply(this,arguments)}function Un(){return(Un=(0,_.A)(function*(E,h,f=!1){if(f)return h;try{return yield h}catch(D){throw D instanceof M.g&&function Or({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(D)&&E.auth.currentUser===E&&(yield E.auth.signOut()),D}})).apply(this,arguments)}class Xt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const K=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const D=this.getInterval(h);this.timerId=setTimeout((0,_.A)(function*(){yield f.iteration()}),D)}iteration(){var h=this;return(0,_.A)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class Yt{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=qr(this.lastLoginAt),this.creationTime=qr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qr(E){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,_.A)(function*(E){var h;const f=E.auth,D=yield E.getIdToken(),K=yield Ht(E,An(f,{idToken:D}));de(K?.users.length,f,"internal-error");const ae=K.users[0];E._notifyReloadListener(ae);const Ve=null!==(h=ae.providerUserInfo)&&void 0!==h&&h.length?we(ae.providerUserInfo):[],Dt=function Te(E,h){return[...E.filter(D=>!h.some(K=>K.providerId===D.providerId)),...h]}(E.providerData,Ve),$n=!!E.isAnonymous&&!(E.email&&ae.passwordHash||Dt?.length),Dr={uid:ae.localId,displayName:ae.displayName||null,photoURL:ae.photoUrl||null,email:ae.email||null,emailVerified:ae.emailVerified||!1,phoneNumber:ae.phoneNumber||null,tenantId:ae.tenantId||null,providerData:Dt,metadata:new Yt(ae.createdAt,ae.lastLoginAt),isAnonymous:$n};Object.assign(E,Dr)})).apply(this,arguments)}function xe(){return(xe=(0,_.A)(function*(E){const h=(0,M.Ku)(E);yield Qr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function we(E){return E.map(h=>{var{providerId:f}=h,D=(0,se.Tt)(h,["providerId"]);return{providerId:f,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function St(){return(St=(0,_.A)(function*(E,h){const f=yield ln(E,{},(0,_.A)(function*(){const D=(0,M.Am)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:K,apiKey:ae}=E.config,Ve=Cn(E,K,"/v1/token",`key=${ae}`),Dt=yield E._getAdditionalHeaders();return Dt["Content-Type"]="application/x-www-form-urlencoded",Xe.fetch()(Ve,{method:"POST",headers:Dt,body:D})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function Q(){return(Q=(0,_.A)(function*(E,h){return Ze(E,"POST","/v2/accounts:revokeToken",yt(E,h))})).apply(this,arguments)}class Z{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){de(h.idToken,"internal-error"),de(typeof h.idToken<"u","internal-error"),de(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):Ui(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}updateFromIdToken(h){de(0!==h.length,"internal-error");const f=Ui(h);this.updateTokensAndExpiration(h,null,f)}getToken(h,f=!1){var D=this;return(0,_.A)(function*(){return f||!D.accessToken||D.isExpired?(de(D.refreshToken,h,"user-token-expired"),D.refreshToken?(yield D.refresh(h,D.refreshToken),D.accessToken):null):D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var D=this;return(0,_.A)(function*(){const{accessToken:K,refreshToken:ae,expiresIn:Ve}=yield function Ke(E,h){return St.apply(this,arguments)}(h,f);D.updateTokensAndExpiration(K,ae,Number(Ve))})()}updateTokensAndExpiration(h,f,D){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(h,f){const{refreshToken:D,accessToken:K,expirationTime:ae}=f,Ve=new Z;return D&&(de("string"==typeof D,"internal-error",{appName:h}),Ve.refreshToken=D),K&&(de("string"==typeof K,"internal-error",{appName:h}),Ve.accessToken=K),ae&&(de("number"==typeof ae,"internal-error",{appName:h}),Ve.expirationTime=ae),Ve}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Z,this.toJSON())}_performRefresh(){return Ue("not implemented")}}function oe(E,h){de("string"==typeof E||typeof E>"u","internal-error",{appName:h})}class me{constructor(h){var{uid:f,auth:D,stsTokenManager:K}=h,ae=(0,se.Tt)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=D,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=ae.displayName||null,this.email=ae.email||null,this.emailVerified=ae.emailVerified||!1,this.phoneNumber=ae.phoneNumber||null,this.photoURL=ae.photoURL||null,this.isAnonymous=ae.isAnonymous||!1,this.tenantId=ae.tenantId||null,this.providerData=ae.providerData?[...ae.providerData]:[],this.metadata=new Yt(ae.createdAt||void 0,ae.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,_.A)(function*(){const D=yield Ht(f,f.stsTokenManager.getToken(f.auth,h));return de(D,f.auth,"internal-error"),f.accessToken!==D&&(f.accessToken=D,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),D})()}getIdTokenResult(h){return function Li(E){return Rr.apply(this,arguments)}(this,h)}reload(){return function Nr(E){return xe.apply(this,arguments)}(this)}_assign(h){this!==h&&(de(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new me(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var D=this;return(0,_.A)(function*(){let K=!1;h.idToken&&h.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(h),K=!0),f&&(yield Qr(D)),yield D.auth._persistUserIfCurrent(D),K&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var h=this;return(0,_.A)(function*(){if((0,L._isFirebaseServerApp)(h.auth.app))return Promise.reject(Ce(h.auth));const f=yield h.getIdToken();return yield Ht(h,function Rt(E,h){return Qn.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var D,K,ae,Ve,Dt,$t,In,$n;const Dr=null!==(D=f.displayName)&&void 0!==D?D:void 0,io=null!==(K=f.email)&&void 0!==K?K:void 0,Ra=null!==(ae=f.phoneNumber)&&void 0!==ae?ae:void 0,Hu=null!==(Ve=f.photoURL)&&void 0!==Ve?Ve:void 0,Gu=null!==(Dt=f.tenantId)&&void 0!==Dt?Dt:void 0,zu=null!==($t=f._redirectEventId)&&void 0!==$t?$t:void 0,jl=null!==(In=f.createdAt)&&void 0!==In?In:void 0,$l=null!==($n=f.lastLoginAt)&&void 0!==$n?$n:void 0,{uid:Ka,emailVerified:sa,isAnonymous:Wu,providerData:iu,stsTokenManager:Ku}=f;de(Ka&&Ku,h,"internal-error");const dc=Z.fromJSON(this.name,Ku);de("string"==typeof Ka,h,"internal-error"),oe(Dr,h.name),oe(io,h.name),de("boolean"==typeof sa,h,"internal-error"),de("boolean"==typeof Wu,h,"internal-error"),oe(Ra,h.name),oe(Hu,h.name),oe(Gu,h.name),oe(zu,h.name),oe(jl,h.name),oe($l,h.name);const qa=new me({uid:Ka,auth:h,email:io,emailVerified:sa,displayName:Dr,isAnonymous:Wu,photoURL:Hu,phoneNumber:Ra,tenantId:Gu,stsTokenManager:dc,createdAt:jl,lastLoginAt:$l});return iu&&Array.isArray(iu)&&(qa.providerData=iu.map(Ss=>Object.assign({},Ss))),zu&&(qa._redirectEventId=zu),qa}static _fromIdTokenResponse(h,f,D=!1){return(0,_.A)(function*(){const K=new Z;K.updateFromServerResponse(f);const ae=new me({uid:f.localId,auth:h,stsTokenManager:K,isAnonymous:D});return yield Qr(ae),ae})()}static _fromGetAccountInfoResponse(h,f,D){return(0,_.A)(function*(){const K=f.users[0];de(void 0!==K.localId,"internal-error");const ae=void 0!==K.providerUserInfo?we(K.providerUserInfo):[],Ve=!(K.email&&K.passwordHash||ae?.length),Dt=new Z;Dt.updateFromIdToken(D);const $t=new me({uid:K.localId,auth:h,stsTokenManager:Dt,isAnonymous:Ve}),In={uid:K.localId,displayName:K.displayName||null,photoURL:K.photoUrl||null,email:K.email||null,emailVerified:K.emailVerified||!1,phoneNumber:K.phoneNumber||null,tenantId:K.tenantId||null,providerData:ae,metadata:new Yt(K.createdAt,K.lastLoginAt),isAnonymous:!(K.email&&K.passwordHash||ae?.length)};return Object.assign($t,In),$t})()}}const Et=new Map;function Lt(E){Mt(E instanceof Function,"Expected a class definition");let h=Et.get(E);return h?(Mt(h instanceof E,"Instance stored in cache mismatched with class"),h):(h=new E,Et.set(E,h),h)}const Bn=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.A)(function*(){return!0})()}_set(f,D){var K=this;return(0,_.A)(function*(){K.storage[f]=D})()}_get(f){var D=this;return(0,_.A)(function*(){const K=D.storage[f];return void 0===K?null:K})()}_remove(f){var D=this;return(0,_.A)(function*(){delete D.storage[f]})()}_addListener(f,D){}_removeListener(f,D){}}return E.type="NONE",E})();function zn(E,h,f){return`firebase:${E}:${h}:${f}`}class bn{constructor(h,f,D){this.persistence=h,this.auth=f,this.userKey=D;const{config:K,name:ae}=this.auth;this.fullUserKey=zn(this.userKey,K.apiKey,ae),this.fullPersistenceKey=zn("persistence",K.apiKey,ae),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,_.A)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?me._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,_.A)(function*(){if(f.persistence===h)return;const D=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,D?f.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,D="authUser"){return(0,_.A)(function*(){if(!f.length)return new bn(Lt(Bn),h,D);const K=(yield Promise.all(f.map(function(){var In=(0,_.A)(function*($n){if(yield $n._isAvailable())return $n});return function($n){return In.apply(this,arguments)}}()))).filter(In=>In);let ae=K[0]||Lt(Bn);const Ve=zn(D,h.config.apiKey,h.name);let Dt=null;for(const In of f)try{const $n=yield In._get(Ve);if($n){const Dr=me._fromJSON(h,$n);In!==ae&&(Dt=Dr),ae=In;break}}catch{}const $t=K.filter(In=>In._shouldAllowMigration);return ae._shouldAllowMigration&&$t.length?(ae=$t[0],Dt&&(yield ae._set(Ve,Dt.toJSON())),yield Promise.all(f.map(function(){var In=(0,_.A)(function*($n){if($n!==ae)try{yield $n._remove(Ve)}catch{}});return function($n){return In.apply(this,arguments)}}())),new bn(ae,h,D)):new bn(ae,h,D)})()}}function Gt(E){const h=E.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ms(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Oe(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(ir(h))return"Blackberry";if(is(h))return"Webos";if(Gr(h))return"Safari";if((h.includes("chrome/")||Yr(h))&&!h.includes("edge/"))return"Chrome";if(cs(h))return"Android";{const D=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===D?.length)return D[1]}return"Other"}function Oe(E=(0,M.ZQ)()){return/firefox\//i.test(E)}function Gr(E=(0,M.ZQ)()){const h=E.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Yr(E=(0,M.ZQ)()){return/crios\//i.test(E)}function Ms(E=(0,M.ZQ)()){return/iemobile/i.test(E)}function cs(E=(0,M.ZQ)()){return/android/i.test(E)}function ir(E=(0,M.ZQ)()){return/blackberry/i.test(E)}function is(E=(0,M.ZQ)()){return/webos/i.test(E)}function Gi(E=(0,M.ZQ)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function ri(E=(0,M.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function kt(E=(0,M.ZQ)()){return Gi(E)||cs(E)||is(E)||ir(E)||/windows phone/i.test(E)||Ms(E)}function sn(E,h=[]){let f;switch(E){case"Browser":f=Gt((0,M.ZQ)());break;case"Worker":f=`${Gt((0,M.ZQ)())}-${E}`;break;default:f=E}const D=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${L.SDK_VERSION}/${D}`}class ne{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const D=ae=>new Promise((Ve,Dt)=>{try{Ve(h(ae))}catch($t){Dt($t)}});D.onAbort=f,this.queue.push(D);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,_.A)(function*(){if(f.auth.currentUser===h)return;const D=[];try{for(const K of f.queue)yield K(h),K.onAbort&&D.push(K.onAbort)}catch(K){D.reverse();for(const ae of D)try{ae()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:K?.message})}})()}}function Ie(){return(Ie=(0,_.A)(function*(E,h={}){return Ze(E,"GET","/v2/passwordPolicy",yt(E,h))})).apply(this,arguments)}class Ye{constructor(h){var f,D,K,ae;const Ve=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=Ve.minPasswordLength)&&void 0!==f?f:6,Ve.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Ve.maxPasswordLength),void 0!==Ve.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Ve.containsLowercaseCharacter),void 0!==Ve.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Ve.containsUppercaseCharacter),void 0!==Ve.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Ve.containsNumericCharacter),void 0!==Ve.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Ve.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(K=null===(D=h.allowedNonAlphanumericCharacters)||void 0===D?void 0:D.join(""))&&void 0!==K?K:"",this.forceUpgradeOnSignin=null!==(ae=h.forceUpgradeOnSignin)&&void 0!==ae&&ae,this.schemaVersion=h.schemaVersion}validatePassword(h){var f,D,K,ae,Ve,Dt;const $t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,$t),this.validatePasswordCharacterOptions(h,$t),$t.isValid&&($t.isValid=null===(f=$t.meetsMinPasswordLength)||void 0===f||f),$t.isValid&&($t.isValid=null===(D=$t.meetsMaxPasswordLength)||void 0===D||D),$t.isValid&&($t.isValid=null===(K=$t.containsLowercaseLetter)||void 0===K||K),$t.isValid&&($t.isValid=null===(ae=$t.containsUppercaseLetter)||void 0===ae||ae),$t.isValid&&($t.isValid=null===(Ve=$t.containsNumericCharacter)||void 0===Ve||Ve),$t.isValid&&($t.isValid=null===(Dt=$t.containsNonAlphanumericCharacter)||void 0===Dt||Dt),$t}validatePasswordLengthOptions(h,f){const D=this.customStrengthOptions.minPasswordLength,K=this.customStrengthOptions.maxPasswordLength;D&&(f.meetsMinPasswordLength=h.length>=D),K&&(f.meetsMaxPasswordLength=h.length<=K)}validatePasswordCharacterOptions(h,f){let D;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let K=0;K<h.length;K++)D=h.charAt(K),this.updatePasswordCharacterOptionsStatuses(f,D>="a"&&D<="z",D>="A"&&D<="Z",D>="0"&&D<="9",this.allowedNonAlphanumericCharacters.includes(D))}updatePasswordCharacterOptionsStatuses(h,f,D,K,ae){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=D)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=K)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=ae))}}class qt{constructor(h,f,D,K){this.app=h,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=D,this.config=K,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sn(this),this.idTokenSubscription=new Sn(this),this.beforeStateQueue=new ne(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=K.sdkClientVersion}_initializeWithPersistence(h,f){var D=this;return f&&(this._popupRedirectResolver=Lt(f)),this._initializationPromise=this.queue((0,_.A)(function*(){var K,ae;if(!D._deleted&&(D.persistenceManager=yield bn.create(D,h),!D._deleted)){if(null!==(K=D._popupRedirectResolver)&&void 0!==K&&K._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(f),D.lastNotifiedUid=(null===(ae=D.currentUser)||void 0===ae?void 0:ae.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,_.A)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(h){var f=this;return(0,_.A)(function*(){try{const D=yield An(f,{idToken:h}),K=yield me._fromGetAccountInfoResponse(f,D,h);yield f.directlySetCurrentUser(K)}catch(D){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",D),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(h){var f=this;return(0,_.A)(function*(){var D;if((0,L._isFirebaseServerApp)(f.app)){const Dt=f.app.settings.authIdToken;return Dt?new Promise($t=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(Dt).then($t,$t))}):f.directlySetCurrentUser(null)}const K=yield f.assertedPersistence.getCurrentUser();let ae=K,Ve=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Dt=null===(D=f.redirectUser)||void 0===D?void 0:D._redirectEventId,$t=ae?._redirectEventId,In=yield f.tryRedirectSignIn(h);(!Dt||Dt===$t)&&In?.user&&(ae=In.user,Ve=!0)}if(!ae)return f.directlySetCurrentUser(null);if(!ae._redirectEventId){if(Ve)try{yield f.beforeStateQueue.runMiddleware(ae)}catch(Dt){ae=K,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Dt))}return ae?f.reloadAndSetCurrentUserOrClear(ae):f.directlySetCurrentUser(null)}return de(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===ae._redirectEventId?f.directlySetCurrentUser(ae):f.reloadAndSetCurrentUserOrClear(ae)})()}tryRedirectSignIn(h){var f=this;return(0,_.A)(function*(){let D=null;try{D=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch{yield f._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,_.A)(function*(){try{yield Qr(h)}catch(D){if("auth/network-request-failed"!==D?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ft(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var h=this;return(0,_.A)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,_.A)(function*(){if((0,L._isFirebaseServerApp)(f.app))return Promise.reject(Ce(f));const D=h?(0,M.Ku)(h):null;return D&&de(D.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(D&&D._clone(f))})()}_updateCurrentUser(h,f=!1){var D=this;return(0,_.A)(function*(){if(!D._deleted)return h&&de(D.tenantId===h.tenantId,D,"tenant-id-mismatch"),f||(yield D.beforeStateQueue.runMiddleware(h)),D.queue((0,_.A)(function*(){yield D.directlySetCurrentUser(h),D.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,_.A)(function*(){return(0,L._isFirebaseServerApp)(h.app)?Promise.reject(Ce(h)):(yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0))})()}setPersistence(h){var f=this;return(0,L._isFirebaseServerApp)(this.app)?Promise.reject(Ce(this)):this.queue((0,_.A)(function*(){yield f.assertedPersistence.setPersistence(Lt(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var f=this;return(0,_.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const D=f._getPasswordPolicyInternal();return D.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):D.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,_.A)(function*(){const f=yield function ve(E){return Ie.apply(this,arguments)}(h),D=new Ye(f);null===h.tenantId?h._projectPasswordPolicy=D:h._tenantPasswordPolicies[h.tenantId]=D})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new M.FA("auth","Firebase",h())}onAuthStateChanged(h,f,D){return this.registerStateListener(this.authStateSubscription,h,f,D)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,D){return this.registerStateListener(this.idTokenSubscription,h,f,D)}authStateReady(){return new Promise((h,f)=>{if(this.currentUser)h();else{const D=this.onAuthStateChanged(()=>{D(),h()},f)}})}revokeAccessToken(h){var f=this;return(0,_.A)(function*(){if(f.currentUser){const D=yield f.currentUser.getIdToken(),K={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:h,idToken:D};null!=f.tenantId&&(K.tenantId=f.tenantId),yield function ge(E,h){return Q.apply(this,arguments)}(f,K)}})()}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var D=this;return(0,_.A)(function*(){const K=yield D.getOrInitRedirectPersistenceManager(f);return null===h?K.removeCurrentUser():K.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,_.A)(function*(){if(!f.redirectPersistenceManager){const D=h&&Lt(h)||f._popupRedirectResolver;de(D,f,"argument-error"),f.redirectPersistenceManager=yield bn.create(f,[Lt(D._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,_.A)(function*(){var D,K;return f._isInitialized&&(yield f.queue((0,_.A)(function*(){}))),(null===(D=f._currentUser)||void 0===D?void 0:D._redirectEventId)===h?f._currentUser:(null===(K=f.redirectUser)||void 0===K?void 0:K._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,_.A)(function*(){if(h===f.currentUser)return f.queue((0,_.A)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,D,K){if(this._deleted)return()=>{};const ae="function"==typeof f?f:f.next.bind(f);let Ve=!1;const Dt=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(Dt,this,"internal-error"),Dt.then(()=>{Ve||ae(this.currentUser)}),"function"==typeof f){const $t=h.addObserver(f,D,K);return()=>{Ve=!0,$t()}}{const $t=h.addObserver(f);return()=>{Ve=!0,$t()}}}directlySetCurrentUser(h){var f=this;return(0,_.A)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=sn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,_.A)(function*(){var f;const D={"X-Client-Version":h.clientVersion};h.app.options.appId&&(D["X-Firebase-gmpid"]=h.app.options.appId);const K=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();K&&(D["X-Firebase-Client"]=K);const ae=yield h._getAppCheckToken();return ae&&(D["X-Firebase-AppCheck"]=ae),D})()}_getAppCheckToken(){var h=this;return(0,_.A)(function*(){var f;const D=yield null===(f=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return D?.error&&function At(E,...h){Tt.logLevel<=C.$b.WARN&&Tt.warn(`Auth (${L.SDK_VERSION}): ${E}`,...h)}(`Error while retrieving App Check token: ${D.error}`),D?.token})()}}function Bt(E){return(0,M.Ku)(E)}class Sn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,M.tD)(f=>this.observer=f)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let En={loadJS:()=>(0,_.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function si(E){return En.loadJS(E)}function Mi(E){return`__${E}${Math.floor(1e6*Math.random())}`}class li{constructor(h){this.type="recaptcha-enterprise",this.auth=Bt(h)}verify(h="verify",f=!1){var D=this;return(0,_.A)(function*(){function ae(){return ae=(0,_.A)(function*(Dt){if(!f){if(null==Dt.tenantId&&null!=Dt._agentRecaptchaConfig)return Dt._agentRecaptchaConfig.siteKey;if(null!=Dt.tenantId&&void 0!==Dt._tenantRecaptchaConfigs[Dt.tenantId])return Dt._tenantRecaptchaConfigs[Dt.tenantId].siteKey}return new Promise(function(){var $t=(0,_.A)(function*(In,$n){Nt(Dt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Dr=>{if(void 0!==Dr.recaptchaKey){const io=new bt(Dr);return null==Dt.tenantId?Dt._agentRecaptchaConfig=io:Dt._tenantRecaptchaConfigs[Dt.tenantId]=io,In(io.siteKey)}$n(new Error("recaptcha Enterprise site key undefined"))}).catch(Dr=>{$n(Dr)})});return function(In,$n){return $t.apply(this,arguments)}}())}),ae.apply(this,arguments)}function Ve(Dt,$t,In){const $n=window.grecaptcha;rr($n)?$n.enterprise.ready(()=>{$n.enterprise.execute(Dt,{action:h}).then(Dr=>{$t(Dr)}).catch(()=>{$t("NO_RECAPTCHA")})}):In(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Dt,$t)=>{(function K(Dt){return ae.apply(this,arguments)})(D.auth).then(In=>{if(!f&&rr(window.grecaptcha))Ve(In,Dt,$t);else{if(typeof window>"u")return void $t(new Error("RecaptchaVerifier is only supported in browser"));let $n=function ui(){return En.recaptchaEnterpriseScript}();0!==$n.length&&($n+=In),si($n).then(()=>{Ve(In,Dt,$t)}).catch(Dr=>{$t(Dr)})}}).catch(In=>{$t(In)})})})()}}function tr(E,h,f){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,_.A)(function*(E,h,f,D=!1){const K=new li(E);let ae;try{ae=yield K.verify(f)}catch{ae=yield K.verify(f,!0)}const Ve=Object.assign({},h);return Object.assign(Ve,D?{captchaResp:ae}:{captchaResponse:ae}),Object.assign(Ve,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Ve,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Ve})).apply(this,arguments)}function di(E,h,f,D){return Ei.apply(this,arguments)}function Ei(){return Ei=(0,_.A)(function*(E,h,f,D){var K;if(null!==(K=E._getRecaptchaConfig())&&void 0!==K&&K.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const ae=yield tr(E,h,f,"getOobCode"===f);return D(E,ae)}return D(E,h).catch(function(){var ae=(0,_.A)(function*(Ve){if("auth/missing-recaptcha-token"===Ve.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Dt=yield tr(E,h,f,"getOobCode"===f);return D(E,Dt)}return Promise.reject(Ve)});return function(Ve){return ae.apply(this,arguments)}}())}),Ei.apply(this,arguments)}function zi(E,h,f){const D=Bt(E);de(D._canInitEmulator,D,"emulator-config-failed"),de(/^https?:\/\//.test(h),D,"invalid-emulator-scheme");const K=!!f?.disableWarnings,ae=oo(h),{host:Ve,port:Dt}=function Qo(E){const h=oo(E),f=/(\/\/)?([^?#/]+)/.exec(E.substr(h.length));if(!f)return{host:"",port:null};const D=f[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(D);if(K){const ae=K[1];return{host:ae,port:ua(D.substr(ae.length+1))}}{const[ae,Ve]=D.split(":");return{host:ae,port:ua(Ve)}}}(h);D.config.emulator={url:`${ae}//${Ve}${null===Dt?"":`:${Dt}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:Ve,port:Dt,protocol:ae.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function vo(){function E(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function oo(E){const h=E.indexOf(":");return h<0?"":E.substr(0,h+1)}function ua(E){if(!E)return null;const h=Number(E);return isNaN(h)?null:h}class nr{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return Ue("not implemented")}_getIdTokenResponse(h){return Ue("not implemented")}_linkToIdToken(h,f){return Ue("not implemented")}_getReauthenticationResolver(h){return Ue("not implemented")}}function Eo(E,h){return xs.apply(this,arguments)}function xs(){return(xs=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:resetPassword",yt(E,h))})).apply(this,arguments)}function Vo(){return(Vo=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Qs(E,h){return la.apply(this,arguments)}function la(){return(la=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:signUp",h)})).apply(this,arguments)}function Sr(){return(Sr=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:update",yt(E,h))})).apply(this,arguments)}function Bi(E,h){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,_.A)(function*(E,h){return tn(E,"POST","/v1/accounts:signInWithPassword",yt(E,h))})).apply(this,arguments)}function vr(E,h){return fs.apply(this,arguments)}function fs(){return(fs=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:sendOobCode",yt(E,h))})).apply(this,arguments)}function Jr(){return(Jr=(0,_.A)(function*(E,h){return vr(E,h)})).apply(this,arguments)}function Lo(E,h){return hi.apply(this,arguments)}function hi(){return(hi=(0,_.A)(function*(E,h){return vr(E,h)})).apply(this,arguments)}function zr(E,h){return ni.apply(this,arguments)}function ni(){return(ni=(0,_.A)(function*(E,h){return vr(E,h)})).apply(this,arguments)}function cn(){return(cn=(0,_.A)(function*(E,h){return vr(E,h)})).apply(this,arguments)}function ps(){return(ps=(0,_.A)(function*(E,h){return tn(E,"POST","/v1/accounts:signInWithEmailLink",yt(E,h))})).apply(this,arguments)}function gs(){return(gs=(0,_.A)(function*(E,h){return tn(E,"POST","/v1/accounts:signInWithEmailLink",yt(E,h))})).apply(this,arguments)}class Ys extends nr{constructor(h,f,D,K=null){super("password",D),this._email=h,this._password=f,this._tenantId=K}static _fromEmailAndPassword(h,f){return new Ys(h,f,"password")}static _fromEmailAndCode(h,f,D=null){return new Ys(h,f,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,_.A)(function*(){switch(f.signInMethod){case"password":return di(h,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Bi);case"emailLink":return function oi(E,h){return ps.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:ce(h,"internal-error")}})()}_linkToIdToken(h,f){var D=this;return(0,_.A)(function*(){switch(D.signInMethod){case"password":return di(h,{idToken:f,returnSecureToken:!0,email:D._email,password:D._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qs);case"emailLink":return function ks(E,h){return gs.apply(this,arguments)}(h,{idToken:f,email:D._email,oobCode:D._password});default:ce(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ri(E,h){return es.apply(this,arguments)}function es(){return(es=(0,_.A)(function*(E,h){return tn(E,"POST","/v1/accounts:signInWithIdp",yt(E,h))})).apply(this,arguments)}class ji extends nr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new ji(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):ce("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:D,signInMethod:K}=f,ae=(0,se.Tt)(f,["providerId","signInMethod"]);if(!D||!K)return null;const Ve=new ji(D,K);return Ve.idToken=ae.idToken||void 0,Ve.accessToken=ae.accessToken||void 0,Ve.secret=ae.secret,Ve.nonce=ae.nonce,Ve.pendingToken=ae.pendingToken||null,Ve}_getIdTokenResponse(h){return Ri(h,this.buildRequest())}_linkToIdToken(h,f){const D=this.buildRequest();return D.idToken=f,Ri(h,D)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Ri(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,M.Am)(f)}return h}}function Fs(){return(Fs=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:sendVerificationCode",yt(E,h))})).apply(this,arguments)}function Uo(){return(Uo=(0,_.A)(function*(E,h){return tn(E,"POST","/v1/accounts:signInWithPhoneNumber",yt(E,h))})).apply(this,arguments)}function Oi(){return(Oi=(0,_.A)(function*(E,h){const f=yield tn(E,"POST","/v1/accounts:signInWithPhoneNumber",yt(E,h));if(f.temporaryProof)throw yn(E,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Io={USER_NOT_FOUND:"user-not-found"};function Hi(){return(Hi=(0,_.A)(function*(E,h){return tn(E,"POST","/v1/accounts:signInWithPhoneNumber",yt(E,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Io)})).apply(this,arguments)}class ms extends nr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new ms({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new ms({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function $i(E,h){return Uo.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function ns(E,h){return Oi.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ao(E,h){return Hi.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:D,verificationCode:K}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:D,code:K}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:D,phoneNumber:K,temporaryProof:ae}=h;return D||f||K||ae?new ms({verificationId:f,verificationCode:D,phoneNumber:K,temporaryProof:ae}):null}}class Js{constructor(h){var f,D,K,ae,Ve,Dt;const $t=(0,M.I9)((0,M.hp)(h)),In=null!==(f=$t.apiKey)&&void 0!==f?f:null,$n=null!==(D=$t.oobCode)&&void 0!==D?D:null,Dr=function Vs(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=$t.mode)&&void 0!==K?K:null);de(In&&$n&&Dr,"argument-error"),this.apiKey=In,this.operation=Dr,this.code=$n,this.continueUrl=null!==(ae=$t.continueUrl)&&void 0!==ae?ae:null,this.languageCode=null!==(Ve=$t.languageCode)&&void 0!==Ve?Ve:null,this.tenantId=null!==(Dt=$t.tenantId)&&void 0!==Dt?Dt:null}static parseLink(h){const f=function Xo(E){const h=(0,M.I9)((0,M.hp)(E)).link,f=h?(0,M.I9)((0,M.hp)(h)).deep_link_id:null,D=(0,M.I9)((0,M.hp)(E)).deep_link_id;return(D?(0,M.I9)((0,M.hp)(D)).link:null)||D||f||h||E}(h);try{return new Js(f)}catch{return null}}}let Ls=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(f,D){return Ys._fromEmailAndPassword(f,D)}static credentialWithLink(f,D){const K=Js.parseLink(D);return de(K,"argument-error"),Ys._fromEmailAndCode(f,K.code,K.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class wi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Co extends wi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Yo extends Co{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return de("providerId"in f&&"signInMethod"in f,"argument-error"),ji._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return de(h.idToken||h.accessToken,"argument-error"),ji._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Yo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Yo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:D,oauthTokenSecret:K,pendingToken:ae,nonce:Ve,providerId:Dt}=h;if(!D&&!K&&!f&&!ae||!Dt)return null;try{return new Yo(Dt)._credential({idToken:f,accessToken:D,nonce:Ve,pendingToken:ae})}catch{return null}}}let Ti=(()=>{class E extends Co{constructor(){super("facebook.com")}static credential(f){return ji._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return E.credential(f.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),gr=(()=>{class E extends Co{constructor(){super("google.com"),this.addScope("profile")}static credential(f,D){return ji._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:D})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:D,oauthAccessToken:K}=f;if(!D&&!K)return null;try{return E.credential(D,K)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),Us=(()=>{class E extends Co{constructor(){super("github.com")}static credential(f){return ji._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return E.credential(f.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Zr extends nr{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Ri(h,this.buildRequest())}_linkToIdToken(h,f){const D=this.buildRequest();return D.idToken=f,Ri(h,D)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Ri(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:D,signInMethod:K,pendingToken:ae}=f;return D&&K&&ae&&D===K?new Zr(D,ae):null}static _create(h,f){return new Zr(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class sr extends wi{constructor(h){de(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return sr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return sr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=Zr.fromJSON(h);return de(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:D}=h;if(!f||!D)return null;try{return Zr._create(D,f)}catch{return null}}}let us=(()=>{class E extends Co{constructor(){super("twitter.com")}static credential(f,D){return ji._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:D})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:D,oauthTokenSecret:K}=f;if(!D||!K)return null;try{return E.credential(D,K)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function _s(E,h){return wo.apply(this,arguments)}function wo(){return(wo=(0,_.A)(function*(E,h){return tn(E,"POST","/v1/accounts:signUp",yt(E,h))})).apply(this,arguments)}class Fi{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,D,K=!1){return(0,_.A)(function*(){const ae=yield me._fromIdTokenResponse(h,D,K),Ve=z(D);return new Fi({user:ae,providerId:Ve,_tokenResponse:D,operationType:f})})()}static _forOperation(h,f,D){return(0,_.A)(function*(){yield h._updateTokensIfNecessary(D,!0);const K=z(D);return new Fi({user:h,providerId:K,_tokenResponse:D,operationType:f})})()}}function z(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function q(E){return O.apply(this,arguments)}function O(){return(O=(0,_.A)(function*(E){var h;if((0,L._isFirebaseServerApp)(E.app))return Promise.reject(Ce(E));const f=Bt(E);if(yield f._initializationPromise,null!==(h=f.currentUser)&&void 0!==h&&h.isAnonymous)return new Fi({user:f.currentUser,providerId:null,operationType:"signIn"});const D=yield _s(f,{returnSecureToken:!0}),K=yield Fi._fromIdTokenResponse(f,"signIn",D,!0);return yield f._updateCurrentUser(K.user),K})).apply(this,arguments)}class ee extends M.g{constructor(h,f,D,K){var ae;super(f.code,f.message),this.operationType=D,this.user=K,Object.setPrototypeOf(this,ee.prototype),this.customData={appName:h.name,tenantId:null!==(ae=h.tenantId)&&void 0!==ae?ae:void 0,_serverResponse:f.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(h,f,D,K){return new ee(h,f,D,K)}}function be(E,h,f,D){return("reauthenticate"===h?f._getReauthenticationResolver(E):f._getIdTokenResponse(E)).catch(ae=>{throw"auth/multi-factor-auth-required"===ae.code?ee._fromErrorAndOperation(E,ae,h,D):ae})}function un(E){return new Set(E.map(({providerId:h})=>h).filter(h=>!!h))}function Xn(E,h){return ys.apply(this,arguments)}function ys(){return ys=(0,_.A)(function*(E,h){const f=(0,M.Ku)(E);yield Ts(!0,f,h);const{providerUserInfo:D}=yield function Zn(E,h){return wn.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),K=un(D||[]);return f.providerData=f.providerData.filter(ae=>K.has(ae.providerId)),K.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),ys.apply(this,arguments)}function Zs(E,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,_.A)(function*(E,h,f=!1){const D=yield Ht(E,h._linkToIdToken(E.auth,yield E.getIdToken()),f);return Fi._forOperation(E,"link",D)})).apply(this,arguments)}function Ts(E,h,f){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,_.A)(function*(E,h,f){yield Qr(h);const K=!1===E?"provider-already-linked":"no-such-provider";de(un(h.providerData).has(f)===E,h.auth,K)})).apply(this,arguments)}function Bo(E,h){return ha.apply(this,arguments)}function ha(){return(ha=(0,_.A)(function*(E,h,f=!1){const{auth:D}=E;if((0,L._isFirebaseServerApp)(D.app))return Promise.reject(Ce(D));const K="reauthenticate";try{const ae=yield Ht(E,be(D,K,h,E),f);de(ae.idToken,D,"internal-error");const Ve=Nn(ae.idToken);de(Ve,D,"internal-error");const{sub:Dt}=Ve;return de(E.uid===Dt,D,"user-mismatch"),Fi._forOperation(E,K,ae)}catch(ae){throw"auth/user-not-found"===ae?.code&&ce(D,"user-mismatch"),ae}})).apply(this,arguments)}function ei(E,h){return Da.apply(this,arguments)}function Da(){return(Da=(0,_.A)(function*(E,h,f=!1){if((0,L._isFirebaseServerApp)(E.app))return Promise.reject(Ce(E));const D="signIn",K=yield be(E,D,h),ae=yield Fi._fromIdTokenResponse(E,D,K);return f||(yield E._updateCurrentUser(ae.user)),ae})).apply(this,arguments)}function fa(E,h){return Va.apply(this,arguments)}function Va(){return(Va=(0,_.A)(function*(E,h){return ei(Bt(E),h)})).apply(this,arguments)}function La(E,h){return eo.apply(this,arguments)}function eo(){return(eo=(0,_.A)(function*(E,h){const f=(0,M.Ku)(E);return yield Ts(!1,f,h.providerId),Zs(f,h)})).apply(this,arguments)}function Ua(E,h){return pa.apply(this,arguments)}function pa(){return(pa=(0,_.A)(function*(E,h){return Bo((0,M.Ku)(E),h)})).apply(this,arguments)}function To(){return(To=(0,_.A)(function*(E,h){return tn(E,"POST","/v1/accounts:signInWithCustomToken",yt(E,h))})).apply(this,arguments)}function Aa(E,h){return Jo.apply(this,arguments)}function Jo(){return Jo=(0,_.A)(function*(E,h){if((0,L._isFirebaseServerApp)(E.app))return Promise.reject(Ce(E));const f=Bt(E),D=yield function jo(E,h){return To.apply(this,arguments)}(f,{token:h,returnSecureToken:!0}),K=yield Fi._fromIdTokenResponse(f,"signIn",D);return yield f._updateCurrentUser(K.user),K}),Jo.apply(this,arguments)}class Do{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?cr._fromServerResponse(h,f):"totpInfo"in f?Wr._fromServerResponse(h,f):ce(h,"internal-error")}}class cr extends Do{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new cr(f)}}class Wr extends Do{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new Wr(f)}}function ii(E,h,f){var D;de((null===(D=f.url)||void 0===D?void 0:D.length)>0,E,"invalid-continue-uri"),de(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(de(f.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(de(f.android.packageName.length>0,E,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function Ni(E){return xi.apply(this,arguments)}function xi(){return(xi=(0,_.A)(function*(E){const h=Bt(E);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function ga(E,h,f){return vs.apply(this,arguments)}function vs(){return(vs=(0,_.A)(function*(E,h,f){const D=Bt(E),K={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};f&&ii(D,K,f),yield di(D,K,"getOobCode",Lo)})).apply(this,arguments)}function qi(E,h,f){return ec.apply(this,arguments)}function ec(){return ec=(0,_.A)(function*(E,h,f){yield Eo((0,M.Ku)(E),{oobCode:h,newPassword:f}).catch(function(){var D=(0,_.A)(function*(K){throw"auth/password-does-not-meet-requirements"===K.code&&Ni(E),K});return function(K){return D.apply(this,arguments)}}())}),ec.apply(this,arguments)}function Tc(E,h){return Ao.apply(this,arguments)}function Ao(){return Ao=(0,_.A)(function*(E,h){yield function Rs(E,h){return Sr.apply(this,arguments)}((0,M.Ku)(E),{oobCode:h})}),Ao.apply(this,arguments)}function J(E,h){return I.apply(this,arguments)}function I(){return(I=(0,_.A)(function*(E,h){const f=(0,M.Ku)(E),D=yield Eo(f,{oobCode:h}),K=D.requestType;switch(de(K,f,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":de(D.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":de(D.mfaInfo,f,"internal-error");default:de(D.email,f,"internal-error")}let ae=null;return D.mfaInfo&&(ae=Do._fromServerResponse(Bt(f),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:ae},operation:K}})).apply(this,arguments)}function T(E,h){return V.apply(this,arguments)}function V(){return(V=(0,_.A)(function*(E,h){const{data:f}=yield J((0,M.Ku)(E),h);return f.email})).apply(this,arguments)}function X(E,h,f){return fe.apply(this,arguments)}function fe(){return(fe=(0,_.A)(function*(E,h,f){if((0,L._isFirebaseServerApp)(E.app))return Promise.reject(Ce(E));const D=Bt(E),Ve=yield di(D,{returnSecureToken:!0,email:h,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_s).catch($t=>{throw"auth/password-does-not-meet-requirements"===$t.code&&Ni(E),$t}),Dt=yield Fi._fromIdTokenResponse(D,"signIn",Ve);return yield D._updateCurrentUser(Dt.user),Dt})).apply(this,arguments)}function Pe(E,h,f){return(0,L._isFirebaseServerApp)(E.app)?Promise.reject(Ce(E)):fa((0,M.Ku)(E),Ls.credential(h,f)).catch(function(){var D=(0,_.A)(function*(K){throw"auth/password-does-not-meet-requirements"===K.code&&Ni(E),K});return function(K){return D.apply(this,arguments)}}())}function je(E,h,f){return ut.apply(this,arguments)}function ut(){return(ut=(0,_.A)(function*(E,h,f){const D=Bt(E),K={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function ae(Ve,Dt){de(Dt.handleCodeInApp,D,"argument-error"),Dt&&ii(D,Ve,Dt)})(K,f),yield di(D,K,"getOobCode",zr)})).apply(this,arguments)}function Pt(E,h){const f=Js.parseLink(h);return"EMAIL_SIGNIN"===f?.operation}function nn(E,h,f){return gn.apply(this,arguments)}function gn(){return(gn=(0,_.A)(function*(E,h,f){if((0,L._isFirebaseServerApp)(E.app))return Promise.reject(Ce(E));const D=(0,M.Ku)(E),K=Ls.credentialWithLink(h,f||pn());return de(K._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),fa(D,K)})).apply(this,arguments)}function er(){return(er=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:createAuthUri",yt(E,h))})).apply(this,arguments)}function Dn(E,h){return Wn.apply(this,arguments)}function Wn(){return Wn=(0,_.A)(function*(E,h){const D={identifier:h,continueUri:Pn()?pn():"http://localhost"},{signinMethods:K}=yield function ur(E,h){return er.apply(this,arguments)}((0,M.Ku)(E),D);return K||[]}),Wn.apply(this,arguments)}function Vr(E,h){return Lr.apply(this,arguments)}function Lr(){return Lr=(0,_.A)(function*(E,h){const f=(0,M.Ku)(E),K={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};h&&ii(f.auth,K,h);const{email:ae}=yield function Xs(E,h){return Jr.apply(this,arguments)}(f.auth,K);ae!==E.email&&(yield E.reload())}),Lr.apply(this,arguments)}function pi(E,h,f){return xn.apply(this,arguments)}function xn(){return xn=(0,_.A)(function*(E,h,f){const D=(0,M.Ku)(E),ae={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:h};f&&ii(D.auth,ae,f);const{email:Ve}=yield function ss(E,h){return cn.apply(this,arguments)}(D.auth,ae);Ve!==E.email&&(yield E.reload())}),xn.apply(this,arguments)}function uo(){return(uo=(0,_.A)(function*(E,h){return Ze(E,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Os(E,h){return Di.apply(this,arguments)}function Di(){return Di=(0,_.A)(function*(E,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const D=(0,M.Ku)(E),ae={idToken:yield D.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},Ve=yield Ht(D,function os(E,h){return uo.apply(this,arguments)}(D.auth,ae));D.displayName=Ve.displayName||null,D.photoURL=Ve.photoUrl||null;const Dt=D.providerData.find(({providerId:$t})=>"password"===$t);Dt&&(Dt.displayName=D.displayName,Dt.photoURL=D.photoURL),yield D._updateTokensIfNecessary(Ve)}),Di.apply(this,arguments)}function ls(E,h){const f=(0,M.Ku)(E);return(0,L._isFirebaseServerApp)(f.auth.app)?Promise.reject(Ce(f.auth)):Zo(f,h,null)}function lo(E,h){return Zo((0,M.Ku)(E),null,h)}function Zo(E,h,f){return ma.apply(this,arguments)}function ma(){return ma=(0,_.A)(function*(E,h,f){const{auth:D}=E,ae={idToken:yield E.getIdToken(),returnSecureToken:!0};h&&(ae.email=h),f&&(ae.password=f);const Ve=yield Ht(E,function Er(E,h){return Vo.apply(this,arguments)}(D,ae));yield E._updateTokensIfNecessary(Ve,!0)}),ma.apply(this,arguments)}class Es{constructor(h,f,D={}){this.isNewUser=h,this.providerId=f,this.profile=D}}class Bs extends Es{constructor(h,f,D,K){super(h,f,D),this.username=K}}class S extends Es{constructor(h,f){super(h,"facebook.com",f)}}class H extends Bs{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class N extends Es{constructor(h,f){super(h,"google.com",f)}}class j extends Bs{constructor(h,f,D){super(h,"twitter.com",f,D)}}function _e(E){const{user:h,_tokenResponse:f}=E;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function ds(E){var h,f;if(!E)return null;const{providerId:D}=E,K=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},ae=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!D&&E?.idToken){const Ve=null===(f=null===(h=Nn(E.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(Ve)return new Es(ae,"anonymous"!==Ve&&"custom"!==Ve?Ve:null)}if(!D)return null;switch(D){case"facebook.com":return new S(ae,K);case"github.com":return new H(ae,K);case"google.com":return new N(ae,K);case"twitter.com":return new j(ae,K,E.screenName||null);case"custom":case"anonymous":return new Es(ae,null);default:return new Es(ae,D,K)}}(f)}class pr{constructor(h,f,D){this.type=h,this.credential=f,this.user=D}static _fromIdtoken(h,f){return new pr("enroll",h,f)}static _fromMfaPendingCredential(h){return new pr("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,D;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return pr._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(D=h.multiFactorSession)&&void 0!==D&&D.idToken)return pr._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Ai{constructor(h,f,D){this.session=h,this.hints=f,this.signInResolver=D}static _fromError(h,f){const D=Bt(h),K=f.customData._serverResponse,ae=(K.mfaInfo||[]).map(Dt=>Do._fromServerResponse(D,Dt));de(K.mfaPendingCredential,D,"internal-error");const Ve=pr._fromMfaPendingCredential(K.mfaPendingCredential);return new Ai(Ve,ae,function(){var Dt=(0,_.A)(function*($t){const In=yield $t._process(D,Ve);delete K.mfaInfo,delete K.mfaPendingCredential;const $n=Object.assign(Object.assign({},K),{idToken:In.idToken,refreshToken:In.refreshToken});switch(f.operationType){case"signIn":const Dr=yield Fi._fromIdTokenResponse(D,f.operationType,$n);return yield D._updateCurrentUser(Dr.user),Dr;case"reauthenticate":return de(f.user,D,"internal-error"),Fi._forOperation(f.user,f.operationType,$n);default:ce(D,"internal-error")}});return function($t){return Dt.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,_.A)(function*(){return f.signInResolver(h)})()}}function gi(E,h){var f;const D=(0,M.Ku)(E),K=h;return de(h.customData.operationType,D,"argument-error"),de(null===(f=K.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,D,"argument-error"),Ai._fromError(D,K)}class Yn{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(D=>Do._fromServerResponse(h.auth,D)))})}static _fromUser(h){return new Yn(h)}getSession(){var h=this;return(0,_.A)(function*(){return pr._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,f){var D=this;return(0,_.A)(function*(){const K=h,ae=yield D.getSession(),Ve=yield Ht(D.user,K._process(D.user.auth,ae,f));return yield D.user._updateTokensIfNecessary(Ve),D.user.reload()})()}unenroll(h){var f=this;return(0,_.A)(function*(){const D="string"==typeof h?h:h.uid,K=yield f.user.getIdToken();try{const ae=yield Ht(f.user,function ho(E,h){return Ze(E,"POST","/v2/accounts/mfaEnrollment:withdraw",yt(E,h))}(f.user.auth,{idToken:K,mfaEnrollmentId:D}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Ve})=>Ve!==D),yield f.user._updateTokensIfNecessary(ae),yield f.user.reload()}catch(ae){throw ae}})()}}const $o=new WeakMap;function El(E){const h=(0,M.Ku)(E);return $o.has(h)||$o.set(h,Yn._fromUser(h)),$o.get(h)}const ai="__sak";class jn{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ai,"1"),this.storage.removeItem(ai),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const _a=(()=>{class E extends jn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,D)=>this.onStorageEvent(f,D),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kt(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const D of Object.keys(this.listeners)){const K=this.storage.getItem(D),ae=this.localCache[D];K!==ae&&f(D,ae,K)}}onStorageEvent(f,D=!1){if(!f.key)return void this.forAllChangedKeys((Dt,$t,In)=>{this.notifyListeners(Dt,In)});const K=f.key;D?this.detachListener():this.stopPolling();const ae=()=>{const Dt=this.storage.getItem(K);!D&&this.localCache[K]===Dt||this.notifyListeners(K,Dt)},Ve=this.storage.getItem(K);!function Je(){return(0,M.lT)()&&10===document.documentMode}()||Ve===f.newValue||f.newValue===f.oldValue?ae():setTimeout(ae,10)}notifyListeners(f,D){this.localCache[f]=D;const K=this.listeners[f];if(K)for(const ae of Array.from(K))ae(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,D,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:D,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(D)}_removeListener(f,D){this.listeners[f]&&(this.listeners[f].delete(D),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,D){var K=()=>super._set,ae=this;return(0,_.A)(function*(){yield K().call(ae,f,D),ae.localCache[f]=JSON.stringify(D)})()}_get(f){var D=()=>super._get,K=this;return(0,_.A)(function*(){const ae=yield D().call(K,f);return K.localCache[f]=JSON.stringify(ae),ae})()}_remove(f){var D=()=>super._remove,K=this;return(0,_.A)(function*(){yield D().call(K,f),delete K.localCache[f]})()}}return E.type="LOCAL",E})(),ea=(()=>{class E extends jn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,D){}_removeListener(f,D){}}return E.type="SESSION",E})();let Is=(()=>{class E{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const D=this.receivers.find(ae=>ae.isListeningto(f));if(D)return D;const K=new E(f);return this.receivers.push(K),K}isListeningto(f){return this.eventTarget===f}handleEvent(f){var D=this;return(0,_.A)(function*(){const K=f,{eventId:ae,eventType:Ve,data:Dt}=K.data,$t=D.handlersMap[Ve];if(!$t?.size)return;K.ports[0].postMessage({status:"ack",eventId:ae,eventType:Ve});const In=Array.from($t).map(function(){var Dr=(0,_.A)(function*(io){return io(K.origin,Dt)});return function(io){return Dr.apply(this,arguments)}}()),$n=yield function nc(E){return Promise.all(E.map(function(){var h=(0,_.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(D){return{fulfilled:!1,reason:D}}});return function(f){return h.apply(this,arguments)}}()))}(In);K.ports[0].postMessage({status:"done",eventId:ae,eventType:Ve,response:$n})})()}_subscribe(f,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(D)}_unsubscribe(f,D){this.handlersMap[f]&&D&&this.handlersMap[f].delete(D),(!D||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Kn(E="",h=10){let f="";for(let D=0;D<h;D++)f+=Math.floor(10*Math.random());return E+f}class rc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,D=50){var K=this;return(0,_.A)(function*(){const ae=typeof MessageChannel<"u"?new MessageChannel:null;if(!ae)throw new Error("connection_unavailable");let Ve,Dt;return new Promise(($t,In)=>{const $n=Kn("",20);ae.port1.start();const Dr=setTimeout(()=>{In(new Error("unsupported_event"))},D);Dt={messageChannel:ae,onMessage(io){const Ra=io;if(Ra.data.eventId===$n)switch(Ra.data.status){case"ack":clearTimeout(Dr),Ve=setTimeout(()=>{In(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ve),$t(Ra.data.response);break;default:clearTimeout(Dr),clearTimeout(Ve),In(new Error("invalid_response"))}}},K.handlers.add(Dt),ae.port1.addEventListener("message",Dt.onMessage),K.target.postMessage({eventType:h,eventId:$n,data:f},[ae.port2])}).finally(()=>{Dt&&K.removeMessageHandler(Dt)})})()}}function _i(){return window}function ba(){return typeof _i().WorkerGlobalScope<"u"&&"function"==typeof _i().importScripts}function bi(){return(bi=(0,_.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const As="firebaseLocalStorageDb",ta="firebaseLocalStorage",qc="fbase_key";class to{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Ba(E,h){return E.transaction([ta],h?"readwrite":"readonly").objectStore(ta)}function Qc(){const E=indexedDB.open(As,1);return new Promise((h,f)=>{E.addEventListener("error",()=>{f(E.error)}),E.addEventListener("upgradeneeded",()=>{const D=E.result;try{D.createObjectStore(ta,{keyPath:qc})}catch(K){f(K)}}),E.addEventListener("success",(0,_.A)(function*(){const D=E.result;D.objectStoreNames.contains(ta)?h(D):(D.close(),yield function ic(){const E=indexedDB.deleteDatabase(As);return new to(E).toPromise()}(),h(yield Qc()))}))})}function Pu(E,h,f){return ki.apply(this,arguments)}function ki(){return(ki=(0,_.A)(function*(E,h,f){const D=Ba(E,!0).put({[qc]:h,value:f});return new to(D).toPromise()})).apply(this,arguments)}function ja(){return(ja=(0,_.A)(function*(E,h){const f=Ba(E,!1).get(h),D=yield new to(f).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function Cl(E,h){const f=Ba(E,!0).delete(h);return new to(f).toPromise()}const wl=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,_.A)(function*(){return f.db||(f.db=yield Qc()),f.db})()}_withRetries(f){var D=this;return(0,_.A)(function*(){let K=0;for(;;)try{const ae=yield D._openDb();return yield f(ae)}catch(ae){if(K++>3)throw ae;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,_.A)(function*(){return ba()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,_.A)(function*(){f.receiver=Is._getInstance(function Ds(){return ba()?self:null}()),f.receiver._subscribe("keyChanged",function(){var D=(0,_.A)(function*(K,ae){return{keyProcessed:(yield f._poll()).includes(ae.key)}});return function(K,ae){return D.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var D=(0,_.A)(function*(K,ae){return["keyChanged"]});return function(K,ae){return D.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,_.A)(function*(){var D,K;if(f.activeServiceWorker=yield function Sa(){return bi.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new rc(f.activeServiceWorker);const ae=yield f.sender._send("ping",{},800);ae&&null!==(D=ae[0])&&void 0!==D&&D.fulfilled&&null!==(K=ae[0])&&void 0!==K&&K.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var D=this;return(0,_.A)(function*(){if(D.sender&&D.activeServiceWorker&&function Su(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:f},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.A)(function*(){try{if(!indexedDB)return!1;const f=yield Qc();return yield Pu(f,ai,"1"),yield Cl(f,ai),!0}catch{}return!1})()}_withPendingWrite(f){var D=this;return(0,_.A)(function*(){D.pendingWrites++;try{yield f()}finally{D.pendingWrites--}})()}_set(f,D){var K=this;return(0,_.A)(function*(){return K._withPendingWrite((0,_.A)(function*(){return yield K._withRetries(ae=>Pu(ae,f,D)),K.localCache[f]=D,K.notifyServiceWorker(f)}))})()}_get(f){var D=this;return(0,_.A)(function*(){const K=yield D._withRetries(ae=>function Mu(E,h){return ja.apply(this,arguments)}(ae,f));return D.localCache[f]=K,K})()}_remove(f){var D=this;return(0,_.A)(function*(){return D._withPendingWrite((0,_.A)(function*(){return yield D._withRetries(K=>Cl(K,f)),delete D.localCache[f],D.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,_.A)(function*(){const D=yield f._withRetries(Ve=>{const Dt=Ba(Ve,!1).getAll();return new to(Dt).toPromise()});if(!D)return[];if(0!==f.pendingWrites)return[];const K=[],ae=new Set;if(0!==D.length)for(const{fbase_key:Ve,value:Dt}of D)ae.add(Ve),JSON.stringify(f.localCache[Ve])!==JSON.stringify(Dt)&&(f.notifyListeners(Ve,Dt),K.push(Ve));for(const Ve of Object.keys(f.localCache))f.localCache[Ve]&&!ae.has(Ve)&&(f.notifyListeners(Ve,null),K.push(Ve));return K})()}notifyListeners(f,D){this.localCache[f]=D;const K=this.listeners[f];if(K)for(const ae of Array.from(K))ae(D)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,_.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(D)}_removeListener(f,D){this.listeners[f]&&(this.listeners[f].delete(D),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),Tl=1e12;class Ou{constructor(h){this.auth=h,this.counter=Tl,this._widgets=new Map}render(h,f){const D=this.counter;return this._widgets.set(D,new Nu(h,this.auth.name,f||{})),this.counter++,D}reset(h){var f;const D=h||Tl;null===(f=this._widgets.get(D))||void 0===f||f.delete(),this._widgets.delete(D)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Tl))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,_.A)(function*(){var D;return null===(D=f._widgets.get(h||Tl))||void 0===D||D.execute(),""})()}}class Nu{constructor(h,f,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof h?document.getElementById(h):h;de(K,"argument-error",{appName:f}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function v(E){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<E;D++)h.push(f.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const P=Mi("rcb"),w=new Tn(3e4,6e4);class R{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=_i().grecaptcha)||void 0===h||!h.render)}load(h,f=""){return de(function $(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(f),h,"argument-error"),this.shouldResolveImmediately(f)&&Gn(_i().grecaptcha)?Promise.resolve(_i().grecaptcha):new Promise((D,K)=>{const ae=_i().setTimeout(()=>{K(ie(h,"network-request-failed"))},w.get());_i()[P]=()=>{_i().clearTimeout(ae),delete _i()[P];const Dt=_i().grecaptcha;if(!Dt||!Gn(Dt))return void K(ie(h,"internal-error"));const $t=Dt.render;Dt.render=(In,$n)=>{const Dr=$t(In,$n);return this.counter++,Dr},this.hostLanguage=f,D(Dt)},si(`${function _r(){return En.recaptchaV2Script}()}?${(0,M.Am)({onload:P,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(ae),K(ie(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!(null===(f=_i().grecaptcha)||void 0===f||!f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class te{load(h){return(0,_.A)(function*(){return new Ou(h)})()}clearedOneInstance(){}}const De="recaptcha",It={theme:"light",type:"image"};class lt{constructor(h,f,D=Object.assign({},It)){this.parameters=D,this.type=De,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bt(h),this.isInvisible="invisible"===this.parameters.size,de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof f?document.getElementById(f):f;de(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new te:new R,this.validateStartingState()}verify(){var h=this;return(0,_.A)(function*(){h.assertNotDestroyed();const f=yield h.render(),D=h.getAssertedRecaptcha();return D.getResponse(f)||new Promise(ae=>{const Ve=Dt=>{Dt&&(h.tokenChangeListeners.delete(Ve),ae(Dt))};h.tokenChangeListeners.add(Ve),h.isInvisible&&D.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){de(!this.parameters.sitekey,this.auth,"argument-error"),de(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),de(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(D=>D(f)),"function"==typeof h)h(f);else if("string"==typeof h){const D=_i()[h];"function"==typeof D&&D(f)}}}assertNotDestroyed(){de(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,_.A)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const D=document.createElement("div");f.appendChild(D),f=D}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,_.A)(function*(){de(Pn()&&!ba(),h.auth,"internal-error"),yield function hn(){let E=null;return new Promise(h=>{"complete"!==document.readyState?(E=()=>h(),window.addEventListener("load",E)):h()}).catch(h=>{throw E&&window.removeEventListener("load",E),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function ft(E){return ti.apply(this,arguments)}(h.auth);de(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return de(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jn{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=ms._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function lr(E,h,f){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,_.A)(function*(E,h,f){if((0,L._isFirebaseServerApp)(E.app))return Promise.reject(Ce(E));const D=Bt(E),K=yield Go(D,h,(0,M.Ku)(f));return new Jn(K,ae=>fa(D,ae))})).apply(this,arguments)}function Ac(E,h,f){return na.apply(this,arguments)}function na(){return(na=(0,_.A)(function*(E,h,f){const D=(0,M.Ku)(E);yield Ts(!1,D,"phone");const K=yield Go(D.auth,h,(0,M.Ku)(f));return new Jn(K,ae=>La(D,ae))})).apply(this,arguments)}function fo(E,h,f){return $s.apply(this,arguments)}function $s(){return($s=(0,_.A)(function*(E,h,f){const D=(0,M.Ku)(E);if((0,L._isFirebaseServerApp)(D.auth.app))return Promise.reject(Ce(D.auth));const K=yield Go(D.auth,h,(0,M.Ku)(f));return new Jn(K,ae=>Ua(D,ae))})).apply(this,arguments)}function Go(E,h,f){return xu.apply(this,arguments)}function xu(){return xu=(0,_.A)(function*(E,h,f){var D;const K=yield f.verify();try{let ae;if(de("string"==typeof K,E,"argument-error"),de(f.type===De,E,"argument-error"),ae="string"==typeof h?{phoneNumber:h}:h,"session"in ae){const Ve=ae.session;if("phoneNumber"in ae)return de("enroll"===Ve.type,E,"internal-error"),(yield function rs(E,h){return Ze(E,"POST","/v2/accounts/mfaEnrollment:start",yt(E,h))}(E,{idToken:Ve.credential,phoneEnrollmentInfo:{phoneNumber:ae.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{de("signin"===Ve.type,E,"internal-error");const Dt=(null===(D=ae.multiFactorHint)||void 0===D?void 0:D.uid)||ae.multiFactorUid;return de(Dt,E,"missing-multi-factor-info"),(yield function Ru(E,h){return Ze(E,"POST","/v2/accounts/mfaSignIn:start",yt(E,h))}(E,{mfaPendingCredential:Ve.credential,mfaEnrollmentId:Dt,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ve}=yield function ts(E,h){return Fs.apply(this,arguments)}(E,{phoneNumber:ae.phoneNumber,recaptchaToken:K});return Ve}}finally{f._reset()}}),xu.apply(this,arguments)}function ku(E,h){return $a.apply(this,arguments)}function $a(){return($a=(0,_.A)(function*(E,h){const f=(0,M.Ku)(E);if((0,L._isFirebaseServerApp)(f.auth.app))return Promise.reject(Ce(f.auth));yield Zs(f,h)})).apply(this,arguments)}let Yc=(()=>{class E{constructor(f){this.providerId=E.PROVIDER_ID,this.auth=Bt(f)}verifyPhoneNumber(f,D){return Go(this.auth,f,(0,M.Ku)(D))}static credential(f,D){return ms._fromVerification(f,D)}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:D,temporaryProof:K}=f;return D&&K?ms._fromTokenResponse(D,K):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Pr(E,h){return h?Lt(h):(de(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Ha extends nr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ri(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Ri(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Ri(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function Jc(E){return ei(E.auth,new Ha(E),E.bypassAuthState)}function Hs(E){const{auth:h,user:f}=E;return de(f,h,"internal-error"),Bo(f,new Ha(E),E.bypassAuthState)}function Id(E){return sc.apply(this,arguments)}function sc(){return(sc=(0,_.A)(function*(E){const{auth:h,user:f}=E;return de(f,h,"internal-error"),Zs(f,new Ha(E),E.bypassAuthState)})).apply(this,arguments)}class oc{constructor(h,f,D,K,ae=!1){this.auth=h,this.resolver=D,this.user=K,this.bypassAuthState=ae,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,_.A)(function*(D,K){h.pendingPromise={resolve:D,reject:K};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(ae){h.reject(ae)}});return function(D,K){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,_.A)(function*(){const{urlResponse:D,sessionId:K,postBody:ae,tenantId:Ve,error:Dt,type:$t}=h;if(Dt)return void f.reject(Dt);const In={auth:f.auth,requestUri:D,sessionId:K,tenantId:Ve||void 0,postBody:ae||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask($t)(In))}catch($n){f.reject($n)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Jc;case"linkViaPopup":case"linkViaRedirect":return Id;case"reauthViaPopup":case"reauthViaRedirect":return Hs;default:ce(this.auth,"internal-error")}}resolve(h){Mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zo=new Tn(2e3,1e4);function ef(E,h,f){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,_.A)(function*(E,h,f){if((0,L._isFirebaseServerApp)(E.app))return Promise.reject(ie(E,"operation-not-supported-in-this-environment"));const D=Bt(E);qe(E,h,wi);const K=Pr(D,f);return new Al(D,"signInViaPopup",h,K).executeNotNull()})).apply(this,arguments)}function Dl(E,h,f){return no.apply(this,arguments)}function no(){return(no=(0,_.A)(function*(E,h,f){const D=(0,M.Ku)(E);if((0,L._isFirebaseServerApp)(D.auth.app))return Promise.reject(ie(D.auth,"operation-not-supported-in-this-environment"));qe(D.auth,h,wi);const K=Pr(D.auth,f);return new Al(D.auth,"reauthViaPopup",h,K,D).executeNotNull()})).apply(this,arguments)}function tf(E,h,f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,_.A)(function*(E,h,f){const D=(0,M.Ku)(E);qe(D.auth,h,wi);const K=Pr(D.auth,f);return new Al(D.auth,"linkViaPopup",h,K,D).executeNotNull()})).apply(this,arguments)}let Al=(()=>{class E extends oc{constructor(f,D,K,ae,Ve){super(f,D,ae,Ve),this.provider=K,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var f=this;return(0,_.A)(function*(){const D=yield f.execute();return de(D,f.auth,"internal-error"),D})()}onExecution(){var f=this;return(0,_.A)(function*(){Mt(1===f.filter.length,"Popup operations only handle one event");const D=Kn();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],D),f.authWindow.associatedEvent=D,f.resolver._originValidation(f.auth).catch(K=>{f.reject(K)}),f.resolver._isIframeWebStorageSupported(f.auth,K=>{K||f.reject(ie(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const f=()=>{var D,K;this.pollId=null!==(K=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==K&&K.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ie(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,zo.get())};f()}}return E.currentPopupAction=null,E})();const bl="pendingRedirect",bc=new Map;class Fu extends oc{constructor(h,f,D=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,D),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,_.A)(function*(){let D=bc.get(f.auth._key());if(!D){try{const ae=(yield function Sl(E,h){return za.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;D=()=>Promise.resolve(ae)}catch(K){D=()=>Promise.reject(K)}bc.set(f.auth._key(),D)}return f.bypassAuthState||bc.set(f.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,D=this;return(0,_.A)(function*(){if("signInViaRedirect"===h.type)return f().call(D,h);if("unknown"!==h.type){if(h.eventId){const K=yield D.auth._redirectUserForId(h.eventId);if(K)return D.user=K,f().call(D,h);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,_.A)(function*(){})()}cleanUp(){}}function za(){return(za=(0,_.A)(function*(E,h){const f=rf(h),D=wd(E);if(!(yield D._isAvailable()))return!1;const K="true"===(yield D._get(f));return yield D._remove(f),K})).apply(this,arguments)}function po(E,h){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,_.A)(function*(E,h){return wd(E)._set(rf(h),"true")})).apply(this,arguments)}function Cd(){bc.clear()}function nf(E,h){bc.set(E._key(),h)}function wd(E){return Lt(E._redirectPersistence)}function rf(E){return zn(bl,E.config.apiKey,E.name)}function Td(E,h,f){return function Pl(E,h,f){return Wa.apply(this,arguments)}(E,h,f)}function Wa(){return(Wa=(0,_.A)(function*(E,h,f){if((0,L._isFirebaseServerApp)(E.app))return Promise.reject(Ce(E));const D=Bt(E);qe(E,h,wi),yield D._initializationPromise;const K=Pr(D,f);return yield po(K,D),K._openRedirect(D,h,"signInViaRedirect")})).apply(this,arguments)}function Dd(E,h,f){return function Ad(E,h,f){return Ml.apply(this,arguments)}(E,h,f)}function Ml(){return(Ml=(0,_.A)(function*(E,h,f){const D=(0,M.Ku)(E);if(qe(D.auth,h,wi),(0,L._isFirebaseServerApp)(D.auth.app))return Promise.reject(Ce(D.auth));yield D.auth._initializationPromise;const K=Pr(D.auth,f);yield po(K,D.auth);const ae=yield Sc(D);return K._openRedirect(D.auth,h,"reauthViaRedirect",ae)})).apply(this,arguments)}function Rl(E,h,f){return function Kp(E,h,f){return Vt.apply(this,arguments)}(E,h,f)}function Vt(){return(Vt=(0,_.A)(function*(E,h,f){const D=(0,M.Ku)(E);qe(D.auth,h,wi),yield D.auth._initializationPromise;const K=Pr(D.auth,f);yield Ts(!1,D,h.providerId),yield po(K,D.auth);const ae=yield Sc(D);return K._openRedirect(D.auth,h,"linkViaRedirect",ae)})).apply(this,arguments)}function Mr(E,h){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,_.A)(function*(E,h){return yield Bt(E)._initializationPromise,Vu(E,h,!1)})).apply(this,arguments)}function Vu(E,h){return Br.apply(this,arguments)}function Br(){return(Br=(0,_.A)(function*(E,h,f=!1){if((0,L._isFirebaseServerApp)(E.app))return Promise.reject(Ce(E));const D=Bt(E),K=Pr(D,h),Ve=yield new Fu(D,K,f).execute();return Ve&&!f&&(delete Ve.user._redirectEventId,yield D._persistUserIfCurrent(Ve.user),yield D._setRedirectUser(null,h)),Ve})).apply(this,arguments)}function Sc(E){return ra.apply(this,arguments)}function ra(){return(ra=(0,_.A)(function*(E){const h=Kn(`${E.uid}:::`);return E._redirectEventId=h,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),h})).apply(this,arguments)}class Lu{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(h,D)&&(f=!0,this.sendToConsumer(h,D),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Sd(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bd(E);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var D;if(h.error&&!bd(h)){const K=(null===(D=h.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";f.onError(ie(this.auth,K))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const D=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&D}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bs(h))}saveEventToCache(h){this.cachedEventUids.add(bs(h)),this.lastProcessedEventTime=Date.now()}}function bs(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(h=>h).join("-")}function bd({type:E,error:h}){return"unknown"===E&&"auth/no-auth-event"===h?.code}function eu(E){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,_.A)(function*(E,h={}){return Ze(E,"GET","/v1/projects",h)})).apply(this,arguments)}const ro=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pc=/^https?/;function Gs(){return(Gs=(0,_.A)(function*(E){if(E.config.emulator)return;const{authorizedDomains:h}=yield eu(E);for(const f of h)try{if(qp(f))return}catch{}ce(E,"unauthorized-domain")})).apply(this,arguments)}function qp(E){const h=pn(),{protocol:f,hostname:D}=new URL(h);if(E.startsWith("chrome-extension://")){const Ve=new URL(E);return""===Ve.hostname&&""===D?"chrome-extension:"===f&&E.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&Ve.hostname===D}if(!Pc.test(f))return!1;if(ro.test(E))return D===E;const K=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(D)}const Mc=new Tn(3e4,6e4);function Pd(){const E=_i().___jsl;if(E?.H)for(const h of Object.keys(E.H))if(E.H[h].r=E.H[h].r||[],E.H[h].L=E.H[h].L||[],E.H[h].r=[...E.H[h].L],E.CP)for(let f=0;f<E.CP.length;f++)E.CP[f]=null}let Rc=null;const Nl=new Tn(5e3,15e3),xl="__/auth/iframe",sf="emulator/auth/iframe",af={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rd(E){const h=E.config;de(h.authDomain,E,"auth-domain-config-required");const f=h.emulator?ke(h,sf):`https://${E.config.authDomain}/${xl}`,D={apiKey:h.apiKey,appName:E.name,v:L.SDK_VERSION},K=tu.get(E.config.apiHost);K&&(D.eid=K);const ae=E._getFrameworks();return ae.length&&(D.fw=ae.join(",")),`${f}?${(0,M.Am)(D).slice(1)}`}function Uu(){return Uu=(0,_.A)(function*(E){const h=yield function Md(E){return Rc=Rc||function ac(E){return new Promise((h,f)=>{var D,K,ae;function Ve(){Pd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Pd(),f(ie(E,"network-request-failed"))},timeout:Mc.get()})}if(null!==(K=null===(D=_i().gapi)||void 0===D?void 0:D.iframes)&&void 0!==K&&K.Iframe)h(gapi.iframes.getContext());else{if(null===(ae=_i().gapi)||void 0===ae||!ae.load){const Dt=Mi("iframefcb");return _i()[Dt]=()=>{gapi.load?Ve():f(ie(E,"network-request-failed"))},si(`${function Xr(){return En.gapiScript}()}?onload=${Dt}`).catch($t=>f($t))}Ve()}}).catch(h=>{throw Rc=null,h})}(E),Rc}(E),f=_i().gapi;return de(f,E,"internal-error"),h.open({where:document.body,url:Rd(E),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:af,dontclear:!0},D=>new Promise(function(){var K=(0,_.A)(function*(ae,Ve){yield D.restyle({setHideOnLeave:!1});const Dt=ie(E,"network-request-failed"),$t=_i().setTimeout(()=>{Ve(Dt)},Nl.get());function In(){_i().clearTimeout($t),ae(D)}D.ping(In).then(In,()=>{Ve(Dt)})});return function(ae,Ve){return K.apply(this,arguments)}}()))}),Uu.apply(this,arguments)}const uf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Si{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Xp="__/auth/handler",Yp="emulator/auth/handler",df=encodeURIComponent("fac");function nu(E,h,f,D,K,ae){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,_.A)(function*(E,h,f,D,K,ae){de(E.config.authDomain,E,"auth-domain-config-required"),de(E.config.apiKey,E,"invalid-api-key");const Ve={apiKey:E.config.apiKey,appName:E.name,authType:f,redirectUrl:D,v:L.SDK_VERSION,eventId:K};if(h instanceof wi){h.setDefaultLanguage(E.languageCode),Ve.providerId=h.providerId||"",(0,M.Im)(h.getCustomParameters())||(Ve.customParameters=JSON.stringify(h.getCustomParameters()));for(const[$n,Dr]of Object.entries(ae||{}))Ve[$n]=Dr}if(h instanceof Co){const $n=h.getScopes().filter(Dr=>""!==Dr);$n.length>0&&(Ve.scopes=$n.join(","))}E.tenantId&&(Ve.tid=E.tenantId);const Dt=Ve;for(const $n of Object.keys(Dt))void 0===Dt[$n]&&delete Dt[$n];const $t=yield E._getAppCheckToken(),In=$t?`#${df}=${encodeURIComponent($t)}`:"";return`${function Pa({config:E}){return E.emulator?ke(E,Yp):`https://${E.authDomain}/${Xp}`}(E)}?${(0,M.Am)(Dt).slice(1)}${In}`})).apply(this,arguments)}const Od="webStorageSupport",Bu=class Fl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ea,this._completeRedirectFn=Vu,this._overrideRedirectResult=nf}_openPopup(h,f,D,K){var ae=this;return(0,_.A)(function*(){var Ve;Mt(null===(Ve=ae.eventManagers[h._key()])||void 0===Ve?void 0:Ve.manager,"_initialize() not called before _openPopup()");const Dt=yield nu(h,f,D,pn(),K);return function Qp(E,h,f,D=500,K=600){const ae=Math.max((window.screen.availHeight-K)/2,0).toString(),Ve=Math.max((window.screen.availWidth-D)/2,0).toString();let Dt="";const $t=Object.assign(Object.assign({},uf),{width:D.toString(),height:K.toString(),top:ae,left:Ve}),In=(0,M.ZQ)().toLowerCase();f&&(Dt=Yr(In)?"_blank":f),Oe(In)&&(h=h||"http://localhost",$t.scrollbars="yes");const $n=Object.entries($t).reduce((io,[Ra,Hu])=>`${io}${Ra}=${Hu},`,"");if(function _t(E=(0,M.ZQ)()){var h;return Gi(E)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(In)&&"_self"!==Dt)return function lf(E,h){const f=document.createElement("a");f.href=E,f.target=h;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(D)}(h||"",Dt),new Si(null);const Dr=window.open(h||"",Dt,$n);de(Dr,E,"popup-blocked");try{Dr.focus()}catch{}return new Si(Dr)}(h,Dt,Kn())})()}_openRedirect(h,f,D,K){var ae=this;return(0,_.A)(function*(){return yield ae._originValidation(h),function bo(E){_i().location.href=E}(yield nu(h,f,D,pn(),K)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:K,promise:ae}=this.eventManagers[f];return K?Promise.resolve(K):(Mt(ae,"If manager is not set, promise should be"),ae)}const D=this.initAndGetManager(h);return this.eventManagers[f]={promise:D},D.catch(()=>{delete this.eventManagers[f]}),D}initAndGetManager(h){var f=this;return(0,_.A)(function*(){const D=yield function cf(E){return Uu.apply(this,arguments)}(h),K=new Lu(h);return D.register("authEvent",ae=>(de(ae?.authEvent,h,"invalid-auth-event"),{status:K.onEvent(ae.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:K},f.iframes[h._key()]=D,K})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(Od,{type:Od},K=>{var ae;const Ve=null===(ae=K?.[0])||void 0===ae?void 0:ae[Od];void 0!==Ve&&f(!!Ve),ce(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function ia(E){return Gs.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return kt()||Gr()||Gi()}};class Nc{constructor(h){this.factorId=h}_process(h,f,D){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,D);case"signin":return this._finalizeSignIn(h,f.credential);default:return Ue("unexpected MultiFactorSessionType")}}}class ju extends Nc{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new ju(h)}_finalizeEnroll(h,f,D){return function js(E,h){return Ze(E,"POST","/v2/accounts/mfaEnrollment:finalize",yt(E,h))}(h,{idToken:f,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function Ed(E,h){return Ze(E,"POST","/v2/accounts/mfaSignIn:finalize",yt(E,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $u=(()=>{class E{constructor(){}static assertion(f){return ju._fromCredential(f)}}return E.FACTOR_ID="phone",E})();var Ll="@firebase/auth";class Ul{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,_.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(D=>{h(D?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);f&&(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,M.XA)("authIdTokenMaxAge"),function br(E){En=E}({loadJS:E=>new Promise((h,f)=>{const D=document.createElement("script");D.setAttribute("src",E),D.onload=h,D.onerror=K=>{const ae=ie("internal-error");ae.customData=K,f(ae)},D.type="text/javascript",D.charset="UTF-8",function xc(){var E,h;return null!==(h=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==h?h:document}().appendChild(D)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function kd(E){(0,L._registerComponent)(new Me.uA("auth",(h,{options:f})=>{const D=h.getProvider("app").getImmediate(),K=h.getProvider("heartbeat"),ae=h.getProvider("app-check-internal"),{apiKey:Ve,authDomain:Dt}=D.options;de(Ve&&!Ve.includes(":"),"invalid-api-key",{appName:D.name});const $t={apiKey:Ve,authDomain:Dt,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sn(E)},In=new qt(D,K,ae,$t);return function Fo(E,h){const f=h?.persistence||[],D=(Array.isArray(f)?f:[f]).map(Lt);h?.errorMap&&E._updateErrorMap(h.errorMap),E._initializeWithPersistence(D,h?.popupRedirectResolver)}(In,f),In},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,D)=>{h.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new Me.uA("auth-internal",h=>{const f=Bt(h.getProvider("auth").getImmediate());return new Ul(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(Ll,"1.7.8",function xd(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(E)),(0,L.registerVersion)(Ll,"1.7.8","esm2017")}("Browser")},1076:(en,Qe,k)=>{k.d(Qe,{Am:()=>Qn,Bd:()=>Ue,FA:()=>zt,Fy:()=>Ce,I9:()=>Zn,Im:()=>ft,Ku:()=>St,Ll:()=>de,T9:()=>ce,Uj:()=>$e,XA:()=>ie,ZQ:()=>qe,bD:()=>Nt,cY:()=>ue,eX:()=>ct,g:()=>Ze,gR:()=>rr,hp:()=>wn,jZ:()=>ze,lT:()=>On,lV:()=>Pn,mS:()=>Ae,nr:()=>ke,p7:()=>Mt,sr:()=>pn,tD:()=>kr,u:()=>Ee,zW:()=>Xe,zw:()=>He});const C=function(ge){const Q=[];let Z=0;for(let oe=0;oe<ge.length;oe++){let me=ge.charCodeAt(oe);me<128?Q[Z++]=me:me<2048?(Q[Z++]=me>>6|192,Q[Z++]=63&me|128):55296==(64512&me)&&oe+1<ge.length&&56320==(64512&ge.charCodeAt(oe+1))?(me=65536+((1023&me)<<10)+(1023&ge.charCodeAt(++oe)),Q[Z++]=me>>18|240,Q[Z++]=me>>12&63|128,Q[Z++]=me>>6&63|128,Q[Z++]=63&me|128):(Q[Z++]=me>>12|224,Q[Z++]=me>>6&63|128,Q[Z++]=63&me|128)}return Q},Me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ge,Q){if(!Array.isArray(ge))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=Q?this.byteToCharMapWebSafe_:this.byteToCharMap_,oe=[];for(let me=0;me<ge.length;me+=3){const Et=ge[me],Lt=me+1<ge.length,mn=Lt?ge[me+1]:0,Bn=me+2<ge.length,zn=Bn?ge[me+2]:0;let Oe=(15&mn)<<2|zn>>6,Gr=63&zn;Bn||(Gr=64,Lt||(Oe=64)),oe.push(Z[Et>>2],Z[(3&Et)<<4|mn>>4],Z[Oe],Z[Gr])}return oe.join("")},encodeString(ge,Q){return this.HAS_NATIVE_SUPPORT&&!Q?btoa(ge):this.encodeByteArray(C(ge),Q)},decodeString(ge,Q){return this.HAS_NATIVE_SUPPORT&&!Q?atob(ge):function(ge){const Q=[];let Z=0,oe=0;for(;Z<ge.length;){const me=ge[Z++];if(me<128)Q[oe++]=String.fromCharCode(me);else if(me>191&&me<224){const Et=ge[Z++];Q[oe++]=String.fromCharCode((31&me)<<6|63&Et)}else if(me>239&&me<365){const Bn=((7&me)<<18|(63&ge[Z++])<<12|(63&ge[Z++])<<6|63&ge[Z++])-65536;Q[oe++]=String.fromCharCode(55296+(Bn>>10)),Q[oe++]=String.fromCharCode(56320+(1023&Bn))}else{const Et=ge[Z++],Lt=ge[Z++];Q[oe++]=String.fromCharCode((15&me)<<12|(63&Et)<<6|63&Lt)}}return Q.join("")}(this.decodeStringToByteArray(ge,Q))},decodeStringToByteArray(ge,Q){this.init_();const Z=Q?this.charToByteMapWebSafe_:this.charToByteMap_,oe=[];for(let me=0;me<ge.length;){const Et=Z[ge.charAt(me++)],mn=me<ge.length?Z[ge.charAt(me)]:0;++me;const zn=me<ge.length?Z[ge.charAt(me)]:64;++me;const Gt=me<ge.length?Z[ge.charAt(me)]:64;if(++me,null==Et||null==mn||null==zn||null==Gt)throw new U;oe.push(Et<<2|mn>>4),64!==zn&&(oe.push(mn<<4&240|zn>>2),64!==Gt&&oe.push(zn<<6&192|Gt))}return oe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ge=0;ge<this.ENCODED_VALS.length;ge++)this.byteToCharMap_[ge]=this.ENCODED_VALS.charAt(ge),this.charToByteMap_[this.byteToCharMap_[ge]]=ge,this.byteToCharMapWebSafe_[ge]=this.ENCODED_VALS_WEBSAFE.charAt(ge),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ge]]=ge,ge>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ge)]=ge,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ge)]=ge)}}};class U extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $e=function(ge){return function(ge){const Q=C(ge);return Me.encodeByteArray(Q,!0)}(ge).replace(/\./g,"")},Ee=function(ge){try{return Me.decodeString(ge,!0)}catch(Q){console.error("base64Decode failed: ",Q)}return null};function He(ge,Q){if(!(Q instanceof Object))return Q;switch(Q.constructor){case Date:return new Date(Q.getTime());case Object:void 0===ge&&(ge={});break;case Array:ge=[];break;default:return Q}for(const Z in Q)!Q.hasOwnProperty(Z)||!Ct(Z)||(ge[Z]=He(ge[Z],Q[Z]));return ge}function Ct(ge){return"__proto__"!==ge}function Ae(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Tt=()=>{try{return Ae().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ge=process.env.__FIREBASE_DEFAULTS__;return ge?JSON.parse(ge):void 0})()||(()=>{if(typeof document>"u")return;let ge;try{ge=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Q=ge&&Ee(ge[1]);return Q&&JSON.parse(Q)})()}catch(ge){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ge}`)}},ce=()=>{var ge;return null===(ge=Tt())||void 0===ge?void 0:ge.config},ie=ge=>{var Q;return null===(Q=Tt())||void 0===Q?void 0:Q[`_${ge}`]};class ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Q,Z)=>{this.resolve=Q,this.reject=Z})}wrapCallback(Q){return(Z,oe)=>{Z?this.reject(Z):this.resolve(oe),"function"==typeof Q&&(this.promise.catch(()=>{}),1===Q.length?Q(Z):Q(Z,oe))}}}function Ce(ge,Q){if(ge.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const oe=Q||"demo-project",me=ge.iat||0,Et=ge.sub||ge.user_id;if(!Et)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Lt=Object.assign({iss:`https://securetoken.google.com/${oe}`,aud:oe,iat:me,exp:me+3600,auth_time:me,sub:Et,user_id:Et,firebase:{sign_in_provider:"custom",identities:{}}},ge);return[$e(JSON.stringify({alg:"none",type:"JWT"})),$e(JSON.stringify(Lt)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ze(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function de(){var ge;const Q=null===(ge=Tt())||void 0===ge?void 0:ge.forceEnvironment;if("node"===Q)return!0;if("browser"===Q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ue(){return typeof window<"u"||Mt()}function Mt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function pn(){const ge="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ge&&void 0!==ge.id}function Pn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function On(){const ge=qe();return ge.indexOf("MSIE ")>=0||ge.indexOf("Trident/")>=0}function ke(){return!de()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xe(){try{return"object"==typeof indexedDB}catch{return!1}}function ct(){return new Promise((ge,Q)=>{try{let Z=!0;const oe="validate-browser-context-for-indexeddb-analytics-module",me=self.indexedDB.open(oe);me.onsuccess=()=>{me.result.close(),Z||self.indexedDB.deleteDatabase(oe),ge(!0)},me.onupgradeneeded=()=>{Z=!1},me.onerror=()=>{var Et;Q((null===(Et=me.error)||void 0===Et?void 0:Et.message)||"")}}catch(Z){Q(Z)}})}class Ze extends Error{constructor(Q,Z,oe){super(Z),this.code=Q,this.customData=oe,this.name="FirebaseError",Object.setPrototypeOf(this,Ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zt.prototype.create)}}class zt{constructor(Q,Z,oe){this.service=Q,this.serviceName=Z,this.errors=oe}create(Q,...Z){const oe=Z[0]||{},me=`${this.service}/${Q}`,Et=this.errors[Q],Lt=Et?function ln(ge,Q){return ge.replace(Zt,(Z,oe)=>{const me=Q[oe];return null!=me?String(me):`<${oe}?>`})}(Et,oe):"Error";return new Ze(me,`${this.serviceName}: ${Lt} (${me}).`,oe)}}const Zt=/\{\$([^}]+)}/g;function rr(ge,Q){return Object.prototype.hasOwnProperty.call(ge,Q)}function ft(ge){for(const Q in ge)if(Object.prototype.hasOwnProperty.call(ge,Q))return!1;return!0}function Nt(ge,Q){if(ge===Q)return!0;const Z=Object.keys(ge),oe=Object.keys(Q);for(const me of Z){if(!oe.includes(me))return!1;const Et=ge[me],Lt=Q[me];if(tt(Et)&&tt(Lt)){if(!Nt(Et,Lt))return!1}else if(Et!==Lt)return!1}for(const me of oe)if(!Z.includes(me))return!1;return!0}function tt(ge){return null!==ge&&"object"==typeof ge}function Qn(ge){const Q=[];for(const[Z,oe]of Object.entries(ge))Array.isArray(oe)?oe.forEach(me=>{Q.push(encodeURIComponent(Z)+"="+encodeURIComponent(me))}):Q.push(encodeURIComponent(Z)+"="+encodeURIComponent(oe));return Q.length?"&"+Q.join("&"):""}function Zn(ge){const Q={};return ge.replace(/^\?/,"").split("&").forEach(oe=>{if(oe){const[me,Et]=oe.split("=");Q[decodeURIComponent(me)]=decodeURIComponent(Et)}}),Q}function wn(ge){const Q=ge.indexOf("?");if(!Q)return"";const Z=ge.indexOf("#",Q);return ge.substring(Q,Z>0?Z:void 0)}function kr(ge,Q){const Z=new qr(ge,Q);return Z.subscribe.bind(Z)}class qr{constructor(Q,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{Q(this)}).catch(oe=>{this.error(oe)})}next(Q){this.forEachObserver(Z=>{Z.next(Q)})}error(Q){this.forEachObserver(Z=>{Z.error(Q)}),this.close(Q)}complete(){this.forEachObserver(Q=>{Q.complete()}),this.close()}subscribe(Q,Z,oe){let me;if(void 0===Q&&void 0===Z&&void 0===oe)throw new Error("Missing Observer.");me=function Li(ge,Q){if("object"!=typeof ge||null===ge)return!1;for(const Z of Q)if(Z in ge&&"function"==typeof ge[Z])return!0;return!1}(Q,["next","error","complete"])?Q:{next:Q,error:Z,complete:oe},void 0===me.next&&(me.next=Rr),void 0===me.error&&(me.error=Rr),void 0===me.complete&&(me.complete=Rr);const Et=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?me.error(this.finalError):me.complete()}catch{}}),this.observers.push(me),Et}unsubscribeOne(Q){void 0===this.observers||void 0===this.observers[Q]||(delete this.observers[Q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Q){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,Q)}sendOne(Q,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Q])try{Z(this.observers[Q])}catch(oe){typeof console<"u"&&console.error&&console.error(oe)}})}close(Q){this.finalized||(this.finalized=!0,void 0!==Q&&(this.finalError=Q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rr(){}function St(ge){return ge&&ge._delegate?ge._delegate:ge}},3227:(en,Qe,k)=>{k.d(Qe,{K:()=>Tt});var _=k(177),L=k(4454),M=k(4438),C=k(1413);const se=["payPalButtonContainer"];let Me=(()=>{class At{constructor(ce){this.zone=ce}registerScript(ce,ie,ue){const Ce=window[ie];if(Ce)return void this.zone.run(()=>{ue(Ce)});const qe=document.createElement("script");qe.id=this.getElemId(ie),qe.innerHTML="",qe.onload=()=>{this.zone.run(()=>{ue(window[ie])})},qe.src=ce,qe.async=!0,qe.defer=!0,document.getElementsByTagName("head")[0].appendChild(qe)}cleanup(ce){const ie=document.getElementById(this.getElemId(ce));ie&&ie.remove()}getElemId(ce){return`ngx-paypal-script-elem-${ce}`}}return At.\u0275fac=function(ce){return new(ce||At)(M.KVO(M.SKi))},At.\u0275prov=M.jDH({token:At,factory:At.\u0275fac}),At})(),U=(()=>{class At{constructor(ce){this.scriptService=ce,this.paypalWindowName="paypal"}registerPayPalScript(ce,ie){this.scriptService.registerScript(this.getUrlForConfig(ce),this.paypalWindowName,ie)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(ce){const ie=[{name:"client-id",value:ce.clientId}];return ce.locale&&ie.push({name:"locale",value:ce.locale}),ce.currency&&ie.push({name:"currency",value:ce.currency}),ce.commit&&ie.push({name:"commit",value:ce.commit}),ce.vault&&ie.push({name:"vault",value:ce.vault}),ce.intent&&ie.push({name:"intent",value:ce.intent}),ce.funding&&ie.push({name:"components",value:"buttons,funding-eligibility"}),ce.extraParams&&ie.push(...ce.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(ie)}`}getQueryString(ce){let ie="";for(let ue=0;ue<ce.length;ue++){const Ce=ce[ue];ie+=0===ue?"?":"&",ie+=`${Ce.name}=${Ce.value}`}return ie}}return At.\u0275fac=function(ce){return new(ce||At)(M.KVO(Me))},At.\u0275prov=M.jDH({token:At,factory:At.\u0275fac}),At})(),Le=(()=>{class At{constructor(ce,ie,ue){this.paypalScriptService=ce,this.cdr=ie,this.ngZone=ue,this.registerScript=!0,this.scriptLoaded=new M.bkB,this.ngUnsubscribe=new C.B,this.initializePayPal=!0}set payPalButtonContainer(ce){this.payPalButtonContainerElem=ce}ngOnChanges(ce){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());const ie=this.config;ce.config.isFirstChange()&&ie&&this.registerScript&&this.initPayPalScript(ie,ue=>{this.payPal=ue,this.doPayPalCheck()}),ce.config.isFirstChange()||this.reinitialize(ie)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(ce){this.payPal=ce,this.doPayPalCheck()}reinitialize(ce){if(this.config=ce,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)try{for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild)}catch(ie){console.error(ie)}this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,ie=>{this.payPal=ie,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(ce,ie){this.paypalScriptService.registerPayPalScript({clientId:ce.clientId,locale:ce.advanced?.locale,commit:ce.advanced&&ce.advanced.commit?ce.advanced.commit:void 0,currency:ce.currency,vault:ce.vault,intent:ce.intent,funding:null!=ce.fundingSource||null!=ce.fundingSource,extraParams:ce.advanced&&ce.advanced.extraQueryParams?ce.advanced.extraQueryParams:[]},ue=>{this.scriptLoaded.next(ue),ie(ue)})}generateElementId(){return`ngx-captcha-id-${this.generateGuid()}`}initPayPal(ce,ie){this.ngZone.runOutsideAngular(()=>{const ze={style:ce.style,fundingSource:void 0,onApprove:(Ue,Mt)=>this.ngZone.run(()=>{if(ce.onApprove&&ce.onApprove(Ue,Mt),ce.authorizeOnServer)return ce.authorizeOnServer(Ue,Mt);const pn=ce.onClientAuthorization;pn&&Mt.order.capture().then(Pn=>{this.ngZone.run(()=>{pn(Pn)})})}),onError:Ue=>{this.ngZone.run(()=>{ce.onError&&ce.onError(Ue)})},onCancel:(Ue,Mt)=>{this.ngZone.run(()=>{ce.onCancel&&ce.onCancel(Ue,Mt)})},onClick:(Ue,Mt)=>{this.ngZone.run(()=>{ce.onClick&&ce.onClick(Ue,Mt)})},onInit:(Ue,Mt)=>{this.ngZone.run(()=>{ce.onInit&&ce.onInit(Ue,Mt)})},...(ce.createOrderOnClient||ce.createOrderOnServer)&&{createOrder:(Ue,Mt)=>this.ngZone.run(()=>{if(ce.createOrderOnClient&&ce.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!ce.createOrderOnClient&&!ce.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(ce.createOrderOnClient)return Mt.order.create(ce.createOrderOnClient(Ue));if(ce.createOrderOnServer)return ce.createOrderOnServer(Ue);throw Error("Invalid state for 'createOrder'.")})},...ce.createSubscriptionOnClient&&{createSubscription:(Ue,Mt)=>this.ngZone.run(()=>{if(ce.createSubscriptionOnClient)return Mt.subscription.create(ce.createSubscriptionOnClient(Ue))})},...ce.onShippingChange&&{onShippingChange:(Ue,Mt)=>this.ngZone.run(()=>{if(ce.onShippingChange)return ce.onShippingChange(Ue,Mt)})}};let de;switch(ce.fundingSource){case"PAYPAL":de=ie.FUNDING.PAYPAL;break;case"CARD":de=ie.FUNDING.CARD;break;case"PAYLATER":de=ie.FUNDING.PAYLATER;break;case"CREDIT":de=ie.FUNDING.CREDIT;break;case"VENMO":de=ie.FUNDING.VENMO}null!=de&&(ze.fundingSource=de,"PAYPAL"!==ce.fundingSource&&delete ze.style?.color),ie.Buttons(ze).render(`#${this.payPalButtonContainerId}`)})}generateGuid(){let ce=(new Date).getTime(),ie=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,ue=>{let Ce=16*Math.random();return ce>0?(Ce=(ce+Ce)%16|0,ce=Math.floor(ce/16)):(Ce=(ie+Ce)%16|0,ie=Math.floor(ie/16)),("x"==ue?Ce:7&Ce|8).toString(16)})}}return At.\u0275fac=function(ce){return new(ce||At)(M.rXU(U),M.rXU(M.gRc),M.rXU(M.SKi))},At.\u0275cmp=M.VBU({type:At,selectors:[["ngx-paypal"]],viewQuery:function(ce,ie){if(1&ce&&M.GBs(se,5),2&ce){let ue;M.mGM(ue=M.lsd())&&(ie.payPalButtonContainer=ue.first)}},inputs:{config:"config",registerScript:"registerScript"},outputs:{scriptLoaded:"scriptLoaded"},features:[M.OA$],decls:2,vars:1,consts:[["payPalButtonContainer",""],[3,"id"]],template:function(ce,ie){1&ce&&M.nrm(0,"div",1,0),2&ce&&M.Y8G("id",ie.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),At})(),$e=(()=>{class At{}return At.\u0275fac=function(ce){return new(ce||At)},At.\u0275mod=M.$C({type:At}),At.\u0275inj=M.G2t({providers:[Me,U],imports:[_.MD]}),At})();var Ee=k(5435),ye=k(6569);let He=(()=>{class At{constructor(ce,ie){this.sharedService=ce,this.authService=ie,this.userId="",this.userEmail=""}ngOnInit(){this.authService.loggedUser.subscribe(ce=>{ce&&ce.user.email&&(this.userId=ce?.key,this.userEmail=ce?.user.email)}),this.cartArr$?.subscribe(ce=>{this.cartArr=ce}),this.initConfig()}update(){if(!this.userEmail)throw new Error("no user email found");this.authService.findUser(this.userEmail).subscribe(ce=>{this.authService.loggedUser.next(ce)})}initConfig(){this.paypalConfig={currency:"USD",clientId:"AQ7YdqsTpxT_ouN31zRUyhQFvr1mMuO8rfcrWINg6SE5BFQ0l67cIFOhsNjIMdaxDU2RU42hI8yx2IxG",createOrderOnClient:ce=>({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:this.totalPrice?.toString(),breakdown:{item_total:{currency_code:"USD",value:this.totalPrice?.toString()}}},items:[{name:"Music Shop Products",quantity:"1",category:"PHYSICAL_GOODS",unit_amount:{currency_code:"USD",value:this.totalPrice?.toString()}}]}]}),advanced:{commit:"true"},style:{label:"paypal",layout:"vertical"},onApprove:(ce,ie)=>{this.cartArr&&this.totalPrice&&(this.sharedService.buyProducts(this.cartArr,this.totalPrice,this.userEmail,this.userId),this.update(),console.log("payment approved: ",ce,ie))},onCancel:(ce,ie)=>{console.log("payment cancelled: ",ce,ie)},onClick:(ce,ie)=>{console.log("Onclick: ",ce,ie)}}}static#e=this.\u0275fac=function(ie){return new(ie||At)(M.rXU(Ee.m),M.rXU(ye.p))};static#t=this.\u0275cmp=M.VBU({type:At,selectors:[["app-paypal"]],inputs:{totalPrice:"totalPrice",cartArr$:"cartArr$"},standalone:!0,features:[M.aNF],decls:1,vars:1,consts:[[3,"config"]],template:function(ie,ue){1&ie&&M.nrm(0,"ngx-paypal",0),2&ie&&M.Y8G("config",ue.paypalConfig)},dependencies:[$e,Le]})}return At})();var Ct=k(2906);const Ae=["paymentRef"];function Fe(At,mt){if(1&At){const ce=M.RV6();M.j41(0,"div",5)(1,"div",6)(2,"img",7),M.bIt("click",function(){const ue=M.eBV(ce).$implicit,Ce=M.XpG(2);return M.Njj(Ce.removeFromCart(ue.product))}),M.k0s()(),M.j41(3,"div"),M.nrm(4,"img",8),M.k0s(),M.j41(5,"div",9)(6,"span"),M.EFF(7),M.k0s(),M.j41(8,"span"),M.EFF(9),M.nI1(10,"slice"),M.k0s(),M.j41(11,"span"),M.EFF(12),M.k0s(),M.j41(13,"p"),M.EFF(14),M.k0s(),M.j41(15,"p")(16,"img",10),M.bIt("click",function(){const ue=M.eBV(ce).$implicit,Ce=M.XpG(2);return M.Njj(Ce.plus(ue.product.key,"minus"))}),M.k0s(),M.EFF(17),M.j41(18,"img",11),M.bIt("click",function(){const ue=M.eBV(ce).$implicit,Ce=M.XpG(2);return M.Njj(Ce.plus(ue.product.key,"plus"))}),M.k0s()(),M.j41(19,"button",12),M.bIt("click",function(){const ue=M.eBV(ce).$implicit,Ce=M.XpG(2);return M.Njj(Ce.nav(ue.product.key,ue.product.product.category))}),M.EFF(20," See Product "),M.k0s()()()}if(2&At){const ce=mt.$implicit;M.R7$(4),M.Y8G("src",ce.product.product.photoUrl[0],M.B4B),M.R7$(3),M.SpI("Type: ",ce.product.product.category,""),M.R7$(2),M.SpI("Model: ",M.brH(10,6,ce.product.product.model,0,60),"..."),M.R7$(3),M.SpI("Price: ",ce.product.product.price,"$"),M.R7$(2),M.SpI("Discount -",ce.product.product.discount,"%"),M.R7$(3),M.SpI("",ce.quantity," ")}}function wt(At,mt){if(1&At&&(M.j41(0,"div",13)(1,"h2"),M.EFF(2),M.k0s(),M.j41(3,"div")(4,"div"),M.nrm(5,"app-paypal",14),M.k0s()()()),2&At){const ce=M.XpG(2);M.R7$(2),M.SpI("Total Price: ",ce.calculateTotalPrice(),"$"),M.R7$(3),M.Y8G("cartArr$",ce.cart$)("totalPrice",ce.calculateTotalPrice())}}function pt(At,mt){if(1&At&&(M.j41(0,"div",1)(1,"div")(2,"h2"),M.EFF(3,"Cart"),M.k0s()(),M.j41(4,"div",2),M.DNE(5,Fe,21,10,"div",3),M.nI1(6,"async"),M.k0s(),M.DNE(7,wt,6,3,"div",4),M.k0s()),2&At){const ce=M.XpG();M.R7$(5),M.Y8G("ngForOf",M.bMT(6,2,ce.cart$)),M.R7$(2),M.Y8G("ngIf",ce.calculateTotalPrice()>0)}}let Tt=(()=>{class At{constructor(ce,ie,ue,Ce,qe){this.sharedService=ce,this.router=ie,this.authService=ue,this.cd=Ce,this.cartService=qe,this.showCart=!0}ngOnInit(){this.authService.checkIfLoggedIn(),this.cart$=this.cartService.cart.asObservable(),this.cd.detectChanges()}makePayment(){this.sharedService.buyProducts(this.cartService.cart.getValue(),this.calculateTotalPrice(),this.authService.loggedUser.getValue()?.user.email,this.authService.loggedUser.getValue()?.key)}removeFromCart(ce){this.cartService.cartOperations("remove",ce),this.calculateTotalPrice()}nav(ce,ie){this.router.navigate([`single-product/${ce}`],{queryParams:{type:ie,prod:ce}})}plus(ce,ie){let ue=this.cartService.cart.getValue();const Ce=ue.findIndex(qe=>qe.product.key===ce);"plus"===ie?ue[Ce].quantity++:ue[Ce].quantity>1&&ue[Ce].quantity--,this.cartService.cart.next(ue)}calculateTotalPrice(){let ce=0;return this.cartService.cart.getValue().forEach(ie=>{if(ie.product.product.discount>0){const ue=ie.quantity*(ie.product.product.price-this.calculateDiscount(ie.product.product.price,ie.product.product.discount));ce+=ue}else ce+=ie.quantity*ie.product.product.price}),ce}calculateDiscount(ce,ie){return Math.round(ce*ie/100)}static#e=this.\u0275fac=function(ie){return new(ie||At)(M.rXU(Ee.m),M.rXU(L.Ix),M.rXU(ye.p),M.rXU(M.gRc),M.rXU(Ct.m))};static#t=this.\u0275cmp=M.VBU({type:At,selectors:[["app-cart"]],viewQuery:function(ie,ue){if(1&ie&&M.GBs(Ae,7),2&ie){let Ce;M.mGM(Ce=M.lsd())&&(ue.paymentRef=Ce.first)}},inputs:{showCart:"showCart",userEmail:"userEmail"},standalone:!0,features:[M.aNF],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"products"],["class","product",4,"ngFor","ngForOf"],["class","payment",4,"ngIf"],[1,"product"],[1,"remove"],["src","assets/remove.png","alt","img",3,"click"],["alt","img",3,"src"],[1,"description"],["src","assets/minus.png","alt","img",3,"click"],["src","assets/plus.png","alt","img",3,"click"],[3,"click"],[1,"payment"],[3,"cartArr$","totalPrice"]],template:function(ie,ue){1&ie&&M.DNE(0,pt,8,4,"div",0),2&ie&&M.Y8G("ngIf",ue.showCart)},dependencies:[_.MD,_.Sq,_.bT,_.Jj,_.P9,L.iI,He],styles:[".container[_ngcontent-%COMP%]{width:600px;height:600px;background-color:#98c0e0;overflow-y:scroll}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{text-align:center;padding:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]{display:flex;gap:5px;height:150px;width:80%;border:1px solid rgb(118,153,218);border-radius:8px;position:relative}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{position:absolute;right:0}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:20%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > img[_ngcontent-%COMP%]{width:100%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:repeat(2,190px);grid-template-rows:repeat(3,46px);align-content:center;align-items:center}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:14px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px;cursor:pointer}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:not(:last-child){font-size:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:24px;width:130px;border:none;color:#fff;background-color:#7699da;border-radius:3px;cursor:pointer}.container[_ngcontent-%COMP%]   .payment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}"],changeDetection:0})}return At})()},2906:(en,Qe,k)=>{k.d(Qe,{m:()=>M});var _=k(4438),L=k(4412);let M=(()=>{class C{constructor(){this.cart=new L.t([]),this.cartArr=new _.bkB}cartOperations(Me,U){let Le=this.cart.getValue();const $e=Le.findIndex(ye=>ye.product.key===U.key);let Ee=[...Le];-1!==$e?"add"===Me?Ee[$e].quantity++:Ee.splice($e,1):"add"===Me&&Ee.push({quantity:1,product:U}),this.cart.next(Ee),localStorage.setItem("cart",JSON.stringify(this.cart.value))}static#e=this.\u0275fac=function(U){return new(U||C)};static#t=this.\u0275prov=_.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}return C})()},708:(en,Qe,k)=>{k.d(Qe,{n:()=>se});var _=k(9417),L=k(4454),M=k(4438),C=k(6569);let se=(()=>{class Me{constructor(Le,$e){this.service=Le,this.router=$e,this.email=""}sendEmail(){this.email=""}navigate(Le){if("profile"===Le){const $e=this.service.loggedUser.getValue()?.key;this.router.navigate([`profile/${$e}`])}}static#e=this.\u0275fac=function($e){return new($e||Me)(M.rXU(C.p),M.rXU(L.Ix))};static#t=this.\u0275cmp=M.VBU({type:Me,selectors:[["app-footer"]],standalone:!0,features:[M.aNF],decls:33,vars:1,consts:[[1,"container"],[1,"flex-container"],["src","assets/placeholder.png","alt","img"],["src","assets/phone.png","alt","img"],["routerLink","/login"],["routerLink","/products"],[3,"click"],["placeholder","Enter your Email",3,"ngModelChange","ngModel"],["src","assets/send.png","alt","img",3,"click"]],template:function($e,Ee){1&$e&&(M.j41(0,"div",0),M.nrm(1,"div"),M.j41(2,"div",1)(3,"div")(4,"h3"),M.EFF(5,"SABAMUSIC."),M.k0s(),M.j41(6,"p"),M.EFF(7,"Music Shop over 1000 brand. we sell quality product on our website"),M.k0s(),M.j41(8,"p"),M.nrm(9,"img",2),M.EFF(10,"Mindeli's street 7B"),M.k0s(),M.j41(11,"p"),M.nrm(12,"img",3),M.EFF(13,"+995 555 542 034"),M.k0s()(),M.j41(14,"div")(15,"h3"),M.EFF(16,"Menu"),M.k0s(),M.j41(17,"p",4),M.EFF(18,"Login"),M.k0s(),M.j41(19,"p",5),M.EFF(20,"Products"),M.k0s(),M.j41(21,"p"),M.EFF(22,"About Us"),M.k0s(),M.j41(23,"p"),M.EFF(24,"Terms & Policy"),M.k0s(),M.j41(25,"p",6),M.bIt("click",function(){return Ee.navigate("profile")}),M.EFF(26,"My Account"),M.k0s()(),M.j41(27,"div")(28,"h3"),M.EFF(29,"Stay Updated"),M.k0s(),M.j41(30,"div")(31,"input",7),M.mxI("ngModelChange",function(He){return M.DH7(Ee.email,He)||(Ee.email=He),He}),M.k0s(),M.j41(32,"img",8),M.bIt("click",function(){return Ee.sendEmail()}),M.k0s()()()()()),2&$e&&(M.R7$(31),M.R50("ngModel",Ee.email))},dependencies:[_.YN,_.me,_.BC,_.vS,L.iI,L.Wk],styles:[".container[_ngcontent-%COMP%]{width:90%;height:220px;margin:100px auto;display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;height:2px;background-color:#000}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;height:100%}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:7px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:4px;cursor:pointer}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-size:14px;color:#616161}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > p[_ngcontent-%COMP%]{width:190px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{border:none;border-radius:2px;width:200px;height:20px;background-color:#e9dbdb}"],changeDetection:0})}return Me})()},2152:(en,Qe,k)=>{k.d(Qe,{l:()=>Ee});var _=k(4454),L=k(177),M=k(3227),C=k(4438),se=k(6569);function Me(ye,He){if(1&ye){const Ct=C.RV6();C.j41(0,"div",11)(1,"span",3),C.bIt("click",function(){C.eBV(Ct);const Fe=C.XpG();return C.Njj(Fe.navigateToCategotyPage("guitar"))}),C.EFF(2,"Guitar"),C.k0s(),C.j41(3,"span",3),C.bIt("click",function(){C.eBV(Ct);const Fe=C.XpG();return C.Njj(Fe.navigateToCategotyPage("drum"))}),C.EFF(4,"Drums"),C.k0s(),C.j41(5,"span",3),C.bIt("click",function(){C.eBV(Ct);const Fe=C.XpG();return C.Njj(Fe.navigateToCategotyPage("bass"))}),C.EFF(6,"Bass "),C.k0s(),C.j41(7,"span",3),C.bIt("click",function(){C.eBV(Ct);const Fe=C.XpG();return C.Njj(Fe.navigateToCategotyPage("piano"))}),C.EFF(8,"Piano"),C.k0s(),C.j41(9,"span",3),C.bIt("click",function(){C.eBV(Ct);const Fe=C.XpG();return C.Njj(Fe.navigateToCategotyPage("other"))}),C.EFF(10,"Other"),C.k0s()()}}function U(ye,He){if(1&ye){const Ct=C.RV6();C.j41(0,"span",3),C.bIt("click",function(){C.eBV(Ct);const Fe=C.XpG();return C.Njj(Fe.navigate("login"))}),C.EFF(1,"Log In"),C.k0s()}}function Le(ye,He){if(1&ye){const Ct=C.RV6();C.j41(0,"img",12),C.bIt("click",function(){C.eBV(Ct);const Fe=C.XpG();return C.Njj(Fe.logOut())}),C.k0s()}}function $e(ye,He){if(1&ye){const Ct=C.RV6();C.j41(0,"img",13),C.bIt("click",function(){C.eBV(Ct);const Fe=C.XpG();return C.Njj(Fe.navigateToProfile())}),C.k0s()}}let Ee=(()=>{class ye{constructor(Ct,Ae,Fe){this.router=Ct,this.loginService=Ae,this.cd=Fe,this.dropDown=!1,this.cart=!1}ngOnInit(){this.loginService.loggedUser.subscribe(Ct=>{this.user=Ct,this.profilePicture=this.user?.user.photoUrl,this.cd.detectChanges()})}changeDropDown(){this.dropDown=!this.dropDown}navigateToProfile(){this.router.navigate([`profile/${this.user?.key}`])}navigateToCategotyPage(Ct){this.router.navigate([`categoty/${Ct}`])}openCloseCart(){this.cart=!this.cart}logOut(){this.loginService.logOut(),this.router.navigate(["/products"])}navigate(Ct){this.router.navigate([`/${Ct}`])}static#e=this.\u0275fac=function(Ae){return new(Ae||ye)(C.rXU(_.Ix),C.rXU(se.p),C.rXU(C.gRc))};static#t=this.\u0275cmp=C.VBU({type:ye,selectors:[["app-header"]],standalone:!0,features:[C.aNF],decls:19,vars:6,consts:[[1,"header-container"],["routerLink","/products"],[1,"dropdown-container"],[3,"click"],["class","dropdown",4,"ngIf"],["src","assets/down-arrow.png","alt","img",3,"click"],[3,"click",4,"ngIf"],[1,"cart",3,"userEmail","showCart"],["src","assets/logout.png","alt","img",3,"click",4,"ngIf"],["src","assets/shopping-cart.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click",4,"ngIf"],[1,"dropdown"],["src","assets/logout.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click"]],template:function(Ae,Fe){1&Ae&&(C.j41(0,"div",0)(1,"div")(2,"span",1),C.EFF(3,"SABAMUSIC."),C.k0s(),C.j41(4,"div",2)(5,"span",3),C.bIt("click",function(){return Fe.changeDropDown()}),C.EFF(6,"Products "),C.DNE(7,Me,11,0,"div",4),C.k0s(),C.j41(8,"img",5),C.bIt("click",function(){return Fe.changeDropDown()}),C.k0s()(),C.j41(9,"span",3),C.bIt("click",function(){return Fe.navigate("contact")}),C.EFF(10,"Contact"),C.k0s(),C.j41(11,"span",3),C.bIt("click",function(){return Fe.navigate("about-us")}),C.EFF(12,"About Us"),C.k0s(),C.DNE(13,U,2,0,"span",6),C.nrm(14,"app-cart",7),C.k0s(),C.j41(15,"div"),C.DNE(16,Le,1,0,"img",8),C.j41(17,"img",9),C.bIt("click",function(){return Fe.openCloseCart()}),C.k0s(),C.DNE(18,$e,1,0,"img",10),C.k0s()()),2&Ae&&(C.R7$(7),C.Y8G("ngIf",Fe.dropDown),C.R7$(6),C.Y8G("ngIf",!Fe.user),C.R7$(),C.Y8G("userEmail",null==Fe.user||null==Fe.user.user?null:Fe.user.user.email)("showCart",Fe.cart),C.R7$(2),C.Y8G("ngIf",Fe.user),C.R7$(2),C.Y8G("ngIf",Fe.user))},dependencies:[L.MD,L.bT,_.iI,_.Wk,M.K],styles:[".header-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:160px;margin-bottom:40px;position:sticky;top:5px;z-index:2}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:60%;display:flex;justify-content:space-between;align-items:center}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child{display:flex;align-items:center;gap:10px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child > input[_ngcontent-%COMP%]{height:20px;border:none;background-color:#f3ecec;border-radius:3px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   .cart[_ngcontent-%COMP%]{position:absolute;top:80px;right:100px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:26px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:relative;font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%]{z-index:3;display:flex;flex-direction:column;position:absolute;top:30px;gap:5px;z-index:1}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:flex;gap:20px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   img[_ngcontent-%COMP%]{width:26px;height:26px;cursor:pointer}"],changeDetection:0})}return ye})()},513:(en,Qe,k)=>{k.r(Qe),k.d(Qe,{LoginAndRegistrationModule:()=>Ky});var _=k(177),L=k(9417),M=k(1182),C=k(4438),se=k(1825),Me=k(9253),U=k(3236),Le=k(1985),$e=k(8455),Ee=k(7673),ye=k(9172),He=k(9974),Ct=k(4360);function Ae(){return(0,He.N)((a,t)=>{let r,o=!1;a.subscribe((0,Ct._)(t,u=>{const d=r;r=u,o&&t.next([d,u]),o=!0}))})}var Fe=k(6354),wt=k(2816),pt=k(3669);function At(a,t){return a===t}var pn,Pn,mt=k(5964),ie=(k(2438),k(3345)),ue=k(467),Ce=k(7852),qe=k(1362),ze=k(8041),de=k(1076),Ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mt={};(function(){var a;function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(et,Se,Ge){Ge||(Ge=0);var nt=Array(16);if("string"==typeof Se)for(var ot=0;16>ot;++ot)nt[ot]=Se.charCodeAt(Ge++)|Se.charCodeAt(Ge++)<<8|Se.charCodeAt(Ge++)<<16|Se.charCodeAt(Ge++)<<24;else for(ot=0;16>ot;++ot)nt[ot]=Se[Ge++]|Se[Ge++]<<8|Se[Ge++]<<16|Se[Ge++]<<24;var vt=et.g[3],Be=(Se=et.g[0])+(vt^(Ge=et.g[1])&((ot=et.g[2])^vt))+nt[0]+3614090360&4294967295;Be=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=(Ge=(ot=(vt=(Se=Ge+(Be<<7&4294967295|Be>>>25))+((Be=vt+(ot^Se&(Ge^ot))+nt[1]+3905402710&4294967295)<<12&4294967295|Be>>>20))+((Be=ot+(Ge^vt&(Se^Ge))+nt[2]+606105819&4294967295)<<17&4294967295|Be>>>15))+((Be=Ge+(Se^ot&(vt^Se))+nt[3]+3250441966&4294967295)<<22&4294967295|Be>>>10))+((Be=Se+(vt^Ge&(ot^vt))+nt[4]+4118548399&4294967295)<<7&4294967295|Be>>>25))+((Be=vt+(ot^Se&(Ge^ot))+nt[5]+1200080426&4294967295)<<12&4294967295|Be>>>20))+((Be=ot+(Ge^vt&(Se^Ge))+nt[6]+2821735955&4294967295)<<17&4294967295|Be>>>15))+((Be=Ge+(Se^ot&(vt^Se))+nt[7]+4249261313&4294967295)<<22&4294967295|Be>>>10))+((Be=Se+(vt^Ge&(ot^vt))+nt[8]+1770035416&4294967295)<<7&4294967295|Be>>>25))+((Be=vt+(ot^Se&(Ge^ot))+nt[9]+2336552879&4294967295)<<12&4294967295|Be>>>20))+((Be=ot+(Ge^vt&(Se^Ge))+nt[10]+4294925233&4294967295)<<17&4294967295|Be>>>15))+((Be=Ge+(Se^ot&(vt^Se))+nt[11]+2304563134&4294967295)<<22&4294967295|Be>>>10))+((Be=Se+(vt^Ge&(ot^vt))+nt[12]+1804603682&4294967295)<<7&4294967295|Be>>>25))+((Be=vt+(ot^Se&(Ge^ot))+nt[13]+4254626195&4294967295)<<12&4294967295|Be>>>20))+((Be=ot+(Ge^vt&(Se^Ge))+nt[14]+2792965006&4294967295)<<17&4294967295|Be>>>15))+((Be=Ge+(Se^ot&(vt^Se))+nt[15]+1236535329&4294967295)<<22&4294967295|Be>>>10))+((Be=Se+(ot^vt&(Ge^ot))+nt[1]+4129170786&4294967295)<<5&4294967295|Be>>>27))+((Be=vt+(Ge^ot&(Se^Ge))+nt[6]+3225465664&4294967295)<<9&4294967295|Be>>>23))+((Be=ot+(Se^Ge&(vt^Se))+nt[11]+643717713&4294967295)<<14&4294967295|Be>>>18))+((Be=Ge+(vt^Se&(ot^vt))+nt[0]+3921069994&4294967295)<<20&4294967295|Be>>>12))+((Be=Se+(ot^vt&(Ge^ot))+nt[5]+3593408605&4294967295)<<5&4294967295|Be>>>27))+((Be=vt+(Ge^ot&(Se^Ge))+nt[10]+38016083&4294967295)<<9&4294967295|Be>>>23))+((Be=ot+(Se^Ge&(vt^Se))+nt[15]+3634488961&4294967295)<<14&4294967295|Be>>>18))+((Be=Ge+(vt^Se&(ot^vt))+nt[4]+3889429448&4294967295)<<20&4294967295|Be>>>12))+((Be=Se+(ot^vt&(Ge^ot))+nt[9]+568446438&4294967295)<<5&4294967295|Be>>>27))+((Be=vt+(Ge^ot&(Se^Ge))+nt[14]+3275163606&4294967295)<<9&4294967295|Be>>>23))+((Be=ot+(Se^Ge&(vt^Se))+nt[3]+4107603335&4294967295)<<14&4294967295|Be>>>18))+((Be=Ge+(vt^Se&(ot^vt))+nt[8]+1163531501&4294967295)<<20&4294967295|Be>>>12))+((Be=Se+(ot^vt&(Ge^ot))+nt[13]+2850285829&4294967295)<<5&4294967295|Be>>>27))+((Be=vt+(Ge^ot&(Se^Ge))+nt[2]+4243563512&4294967295)<<9&4294967295|Be>>>23))+((Be=ot+(Se^Ge&(vt^Se))+nt[7]+1735328473&4294967295)<<14&4294967295|Be>>>18))+((Be=Ge+(vt^Se&(ot^vt))+nt[12]+2368359562&4294967295)<<20&4294967295|Be>>>12))+((Be=Se+(Ge^ot^vt)+nt[5]+4294588738&4294967295)<<4&4294967295|Be>>>28))+((Be=vt+(Se^Ge^ot)+nt[8]+2272392833&4294967295)<<11&4294967295|Be>>>21))+((Be=ot+(vt^Se^Ge)+nt[11]+1839030562&4294967295)<<16&4294967295|Be>>>16))+((Be=Ge+(ot^vt^Se)+nt[14]+4259657740&4294967295)<<23&4294967295|Be>>>9))+((Be=Se+(Ge^ot^vt)+nt[1]+2763975236&4294967295)<<4&4294967295|Be>>>28))+((Be=vt+(Se^Ge^ot)+nt[4]+1272893353&4294967295)<<11&4294967295|Be>>>21))+((Be=ot+(vt^Se^Ge)+nt[7]+4139469664&4294967295)<<16&4294967295|Be>>>16))+((Be=Ge+(ot^vt^Se)+nt[10]+3200236656&4294967295)<<23&4294967295|Be>>>9))+((Be=Se+(Ge^ot^vt)+nt[13]+681279174&4294967295)<<4&4294967295|Be>>>28))+((Be=vt+(Se^Ge^ot)+nt[0]+3936430074&4294967295)<<11&4294967295|Be>>>21))+((Be=ot+(vt^Se^Ge)+nt[3]+3572445317&4294967295)<<16&4294967295|Be>>>16))+((Be=Ge+(ot^vt^Se)+nt[6]+76029189&4294967295)<<23&4294967295|Be>>>9))+((Be=Se+(Ge^ot^vt)+nt[9]+3654602809&4294967295)<<4&4294967295|Be>>>28))+((Be=vt+(Se^Ge^ot)+nt[12]+3873151461&4294967295)<<11&4294967295|Be>>>21))+((Be=ot+(vt^Se^Ge)+nt[15]+530742520&4294967295)<<16&4294967295|Be>>>16))+((Be=Ge+(ot^vt^Se)+nt[2]+3299628645&4294967295)<<23&4294967295|Be>>>9))+((Be=Se+(ot^(Ge|~vt))+nt[0]+4096336452&4294967295)<<6&4294967295|Be>>>26))+((Be=vt+(Ge^(Se|~ot))+nt[7]+1126891415&4294967295)<<10&4294967295|Be>>>22))+((Be=ot+(Se^(vt|~Ge))+nt[14]+2878612391&4294967295)<<15&4294967295|Be>>>17))+((Be=Ge+(vt^(ot|~Se))+nt[5]+4237533241&4294967295)<<21&4294967295|Be>>>11))+((Be=Se+(ot^(Ge|~vt))+nt[12]+1700485571&4294967295)<<6&4294967295|Be>>>26))+((Be=vt+(Ge^(Se|~ot))+nt[3]+2399980690&4294967295)<<10&4294967295|Be>>>22))+((Be=ot+(Se^(vt|~Ge))+nt[10]+4293915773&4294967295)<<15&4294967295|Be>>>17))+((Be=Ge+(vt^(ot|~Se))+nt[1]+2240044497&4294967295)<<21&4294967295|Be>>>11))+((Be=Se+(ot^(Ge|~vt))+nt[8]+1873313359&4294967295)<<6&4294967295|Be>>>26))+((Be=vt+(Ge^(Se|~ot))+nt[15]+4264355552&4294967295)<<10&4294967295|Be>>>22))+((Be=ot+(Se^(vt|~Ge))+nt[6]+2734768916&4294967295)<<15&4294967295|Be>>>17))+((Be=Ge+(vt^(ot|~Se))+nt[13]+1309151649&4294967295)<<21&4294967295|Be>>>11))+((vt=(Se=Ge+((Be=Se+(ot^(Ge|~vt))+nt[4]+4149444226&4294967295)<<6&4294967295|Be>>>26))+((Be=vt+(Ge^(Se|~ot))+nt[11]+3174756917&4294967295)<<10&4294967295|Be>>>22))^((ot=vt+((Be=ot+(Se^(vt|~Ge))+nt[2]+718787259&4294967295)<<15&4294967295|Be>>>17))|~Se))+nt[9]+3951481745&4294967295,et.g[0]=et.g[0]+Se&4294967295,et.g[1]=et.g[1]+(ot+(Be<<21&4294967295|Be>>>11))&4294967295,et.g[2]=et.g[2]+ot&4294967295,et.g[3]=et.g[3]+vt&4294967295}function m(et,Se){this.h=Se;for(var Ge=[],nt=!0,ot=et.length-1;0<=ot;ot--){var vt=0|et[ot];nt&&vt==Se||(Ge[ot]=vt,nt=!1)}this.g=Ge}(function t(et,Se){function Ge(){}Ge.prototype=Se.prototype,et.D=Se.prototype,et.prototype=new Ge,et.prototype.constructor=et,et.C=function(nt,ot,vt){for(var Be=Array(arguments.length-2),Bc=2;Bc<arguments.length;Bc++)Be[Bc-2]=arguments[Bc];return Se.prototype[ot].apply(nt,Be)}})(o,function r(){this.blockSize=-1}),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},o.prototype.u=function(et,Se){void 0===Se&&(Se=et.length);for(var Ge=Se-this.blockSize,nt=this.B,ot=this.h,vt=0;vt<Se;){if(0==ot)for(;vt<=Ge;)u(this,et,vt),vt+=this.blockSize;if("string"==typeof et){for(;vt<Se;)if(nt[ot++]=et.charCodeAt(vt++),ot==this.blockSize){u(this,nt),ot=0;break}}else for(;vt<Se;)if(nt[ot++]=et[vt++],ot==this.blockSize){u(this,nt),ot=0;break}}this.h=ot,this.o+=Se},o.prototype.v=function(){var et=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);et[0]=128;for(var Se=1;Se<et.length-8;++Se)et[Se]=0;var Ge=8*this.o;for(Se=et.length-8;Se<et.length;++Se)et[Se]=255&Ge,Ge/=256;for(this.u(et),et=Array(16),Se=Ge=0;4>Se;++Se)for(var nt=0;32>nt;nt+=8)et[Ge++]=this.g[Se]>>>nt&255;return et};var A={};function x(et){return-128<=et&&128>et?function d(et,Se){var Ge=A;return Object.prototype.hasOwnProperty.call(Ge,et)?Ge[et]:Ge[et]=Se(et)}(et,function(Se){return new m([0|Se],0>Se?-1:0)}):new m([0|et],0>et?-1:0)}function G(et){if(isNaN(et)||!isFinite(et))return pe;if(0>et)return Kt(G(-et));for(var Se=[],Ge=1,nt=0;et>=Ge;nt++)Se[nt]=et/Ge|0,Ge*=4294967296;return new m(Se,0)}var pe=x(0),Re=x(1),st=x(16777216);function jt(et){if(0!=et.h)return!1;for(var Se=0;Se<et.g.length;Se++)if(0!=et.g[Se])return!1;return!0}function Jt(et){return-1==et.h}function Kt(et){for(var Se=et.g.length,Ge=[],nt=0;nt<Se;nt++)Ge[nt]=~et.g[nt];return new m(Ge,~et.h).add(Re)}function Vn(et,Se){return et.add(Kt(Se))}function qn(et,Se){for(;(65535&et[Se])!=et[Se];)et[Se+1]+=et[Se]>>>16,et[Se]&=65535,Se++}function kn(et,Se){this.g=et,this.h=Se}function or(et,Se){if(jt(Se))throw Error("division by zero");if(jt(et))return new kn(pe,pe);if(Jt(et))return Se=or(Kt(et),Se),new kn(Kt(Se.g),Kt(Se.h));if(Jt(Se))return Se=or(et,Kt(Se)),new kn(Kt(Se.g),Se.h);if(30<et.g.length){if(Jt(et)||Jt(Se))throw Error("slowDivide_ only works with positive integers.");for(var Ge=Re,nt=Se;0>=nt.l(et);)Ge=$r(Ge),nt=$r(nt);var ot=Ar(Ge,1),vt=Ar(nt,1);for(nt=Ar(nt,2),Ge=Ar(Ge,2);!jt(nt);){var Be=vt.add(nt);0>=Be.l(et)&&(ot=ot.add(Ge),vt=Be),nt=Ar(nt,1),Ge=Ar(Ge,1)}return Se=Vn(et,ot.j(Se)),new kn(ot,Se)}for(ot=pe;0<=et.l(Se);){for(Ge=Math.max(1,Math.floor(et.m()/Se.m())),nt=48>=(nt=Math.ceil(Math.log(Ge)/Math.LN2))?1:Math.pow(2,nt-48),Be=(vt=G(Ge)).j(Se);Jt(Be)||0<Be.l(et);)Be=(vt=G(Ge-=nt)).j(Se);jt(vt)&&(vt=Re),ot=ot.add(vt),et=Vn(et,Be)}return new kn(ot,et)}function $r(et){for(var Se=et.g.length+1,Ge=[],nt=0;nt<Se;nt++)Ge[nt]=et.i(nt)<<1|et.i(nt-1)>>>31;return new m(Ge,et.h)}function Ar(et,Se){var Ge=Se>>5;Se%=32;for(var nt=et.g.length-Ge,ot=[],vt=0;vt<nt;vt++)ot[vt]=0<Se?et.i(vt+Ge)>>>Se|et.i(vt+Ge+1)<<32-Se:et.i(vt+Ge);return new m(ot,et.h)}(a=m.prototype).m=function(){if(Jt(this))return-Kt(this).m();for(var et=0,Se=1,Ge=0;Ge<this.g.length;Ge++){var nt=this.i(Ge);et+=(0<=nt?nt:4294967296+nt)*Se,Se*=4294967296}return et},a.toString=function(et){if(2>(et=et||10)||36<et)throw Error("radix out of range: "+et);if(jt(this))return"0";if(Jt(this))return"-"+Kt(this).toString(et);for(var Se=G(Math.pow(et,6)),Ge=this,nt="";;){var ot=or(Ge,Se).g,vt=((0<(Ge=Vn(Ge,ot.j(Se))).g.length?Ge.g[0]:Ge.h)>>>0).toString(et);if(jt(Ge=ot))return vt+nt;for(;6>vt.length;)vt="0"+vt;nt=vt+nt}},a.i=function(et){return 0>et?0:et<this.g.length?this.g[et]:this.h},a.l=function(et){return Jt(et=Vn(this,et))?-1:jt(et)?0:1},a.abs=function(){return Jt(this)?Kt(this):this},a.add=function(et){for(var Se=Math.max(this.g.length,et.g.length),Ge=[],nt=0,ot=0;ot<=Se;ot++){var vt=nt+(65535&this.i(ot))+(65535&et.i(ot)),Be=(vt>>>16)+(this.i(ot)>>>16)+(et.i(ot)>>>16);nt=Be>>>16,Ge[ot]=(Be&=65535)<<16|(vt&=65535)}return new m(Ge,-2147483648&Ge[Ge.length-1]?-1:0)},a.j=function(et){if(jt(this)||jt(et))return pe;if(Jt(this))return Jt(et)?Kt(this).j(Kt(et)):Kt(Kt(this).j(et));if(Jt(et))return Kt(this.j(Kt(et)));if(0>this.l(st)&&0>et.l(st))return G(this.m()*et.m());for(var Se=this.g.length+et.g.length,Ge=[],nt=0;nt<2*Se;nt++)Ge[nt]=0;for(nt=0;nt<this.g.length;nt++)for(var ot=0;ot<et.g.length;ot++){var vt=this.i(nt)>>>16,Be=65535&this.i(nt),Bc=et.i(ot)>>>16,sd=65535&et.i(ot);Ge[2*nt+2*ot]+=Be*sd,qn(Ge,2*nt+2*ot),Ge[2*nt+2*ot+1]+=vt*sd,qn(Ge,2*nt+2*ot+1),Ge[2*nt+2*ot+1]+=Be*Bc,qn(Ge,2*nt+2*ot+1),Ge[2*nt+2*ot+2]+=vt*Bc,qn(Ge,2*nt+2*ot+2)}for(nt=0;nt<Se;nt++)Ge[nt]=Ge[2*nt+1]<<16|Ge[2*nt];for(nt=Se;nt<2*Se;nt++)Ge[nt]=0;return new m(Ge,0)},a.A=function(et){return or(this,et).h},a.and=function(et){for(var Se=Math.max(this.g.length,et.g.length),Ge=[],nt=0;nt<Se;nt++)Ge[nt]=this.i(nt)&et.i(nt);return new m(Ge,this.h&et.h)},a.or=function(et){for(var Se=Math.max(this.g.length,et.g.length),Ge=[],nt=0;nt<Se;nt++)Ge[nt]=this.i(nt)|et.i(nt);return new m(Ge,this.h|et.h)},a.xor=function(et){for(var Se=Math.max(this.g.length,et.g.length),Ge=[],nt=0;nt<Se;nt++)Ge[nt]=this.i(nt)^et.i(nt);return new m(Ge,this.h^et.h)},o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Pn=Mt.Md5=o,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.A,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=G,m.fromString=function re(et,Se){if(0==et.length)throw Error("number format error: empty string");if(2>(Se=Se||10)||36<Se)throw Error("radix out of range: "+Se);if("-"==et.charAt(0))return Kt(re(et.substring(1),Se));if(0<=et.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ge=G(Math.pow(Se,8)),nt=pe,ot=0;ot<et.length;ot+=8){var vt=Math.min(8,et.length-ot),Be=parseInt(et.substring(ot,ot+vt),Se);8>vt?(vt=G(Math.pow(Se,vt)),nt=nt.j(vt).add(G(Be))):nt=(nt=nt.j(Ge)).add(G(Be))}return nt},pn=Mt.Integer=m}).apply(typeof Ue<"u"?Ue:typeof self<"u"?self:typeof window<"u"?window:{});var Ft,Tn,ke,Xe,ct,gt,yt,Ze,zt,Fn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},On={};(function(){var a,t="function"==typeof Object.defineProperties?Object.defineProperty:function(g,F,W){return g==Array.prototype||g==Object.prototype||(g[F]=W.value),g},o=function r(g){g=["object"==typeof globalThis&&globalThis,g,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Fn&&Fn];for(var F=0;F<g.length;++F){var W=g[F];if(W&&W.Math==Math)return W}throw Error("Cannot find global object")}(this);!function u(g,F){if(F)e:{var W=o;g=g.split(".");for(var he=0;he<g.length-1;he++){var dt=g[he];if(!(dt in W))break e;W=W[dt]}(F=F(he=W[g=g[g.length-1]]))!=he&&null!=F&&t(W,g,{configurable:!0,writable:!0,value:F})}}("Array.prototype.values",function(g){return g||function(){return function d(g,F){g instanceof String&&(g+="");var W=0,he=!1,dt={next:function(){if(!he&&W<g.length){var Ot=W++;return{value:F(Ot,g[Ot]),done:!1}}return he=!0,{done:!0,value:void 0}}};return dt[Symbol.iterator]=function(){return dt},dt}(this,function(F,W){return W})}});var m=m||{},A=this||self;function x(g){var F=typeof g;return"array"==(F="object"!=F?F:g?Array.isArray(g)?"array":F:"null")||"object"==F&&"number"==typeof g.length}function G(g){var F=typeof g;return"object"==F&&null!=g||"function"==F}function re(g,F,W){return g.call.apply(g.bind,arguments)}function pe(g,F,W){if(!g)throw Error();if(2<arguments.length){var he=Array.prototype.slice.call(arguments,2);return function(){var dt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(dt,he),g.apply(F,dt)}}return function(){return g.apply(F,arguments)}}function Re(g,F,W){return(Re=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?re:pe).apply(null,arguments)}function st(g,F){var W=Array.prototype.slice.call(arguments,1);return function(){var he=W.slice();return he.push.apply(he,arguments),g.apply(this,he)}}function jt(g,F){function W(){}W.prototype=F.prototype,g.aa=F.prototype,g.prototype=new W,g.prototype.constructor=g,g.Qb=function(he,dt,Ot){for(var fn=Array(arguments.length-2),Pi=2;Pi<arguments.length;Pi++)fn[Pi-2]=arguments[Pi];return F.prototype[dt].apply(he,fn)}}function Jt(g){const F=g.length;if(0<F){const W=Array(F);for(let he=0;he<F;he++)W[he]=g[he];return W}return[]}function Kt(g,F){for(let W=1;W<arguments.length;W++){const he=arguments[W];if(x(he)){const dt=g.length||0,Ot=he.length||0;g.length=dt+Ot;for(let fn=0;fn<Ot;fn++)g[dt+fn]=he[fn]}else g.push(he)}}function qn(g){return/^[\s\xa0]*$/.test(g)}function kn(){var g=A.navigator;return g&&(g=g.userAgent)?g:""}function or(g){return or[" "](g),g}or[" "]=function(){};var $r=!(-1==kn().indexOf("Gecko")||-1!=kn().toLowerCase().indexOf("webkit")&&-1==kn().indexOf("Edge")||-1!=kn().indexOf("Trident")||-1!=kn().indexOf("MSIE")||-1!=kn().indexOf("Edge"));function Ar(g,F,W){for(const he in g)F.call(W,g[he],he,g)}function Se(g){const F={};for(const W in g)F[W]=g[W];return F}const Ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nt(g,F){let W,he;for(let dt=1;dt<arguments.length;dt++){for(W in he=arguments[dt],he)g[W]=he[W];for(let Ot=0;Ot<Ge.length;Ot++)W=Ge[Ot],Object.prototype.hasOwnProperty.call(he,W)&&(g[W]=he[W])}}function ot(g){var F=1;g=g.split(":");const W=[];for(;0<F&&g.length;)W.push(g.shift()),F--;return g.length&&W.push(g.join(":")),W}function vt(g){A.setTimeout(()=>{throw g},0)}function Be(){var g=Am;let F=null;return g.g&&(F=g.g,g.g=g.g.next,g.g||(g.h=null),F.next=null),F}var sd=new class Vn{constructor(F,W){this.i=F,this.j=W,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}(()=>new vI,g=>g.reset());class vI{constructor(){this.next=this.g=this.h=null}set(F,W){this.h=F,this.g=W,this.next=null}reset(){this.next=this.g=this.h=null}}let od,tp=!1,Am=new class Bc{constructor(){this.h=this.g=null}add(F,W){const he=sd.get();he.set(F,W),this.h?this.h.next=he:this.g=he,this.h=he}},Ah=()=>{const g=A.Promise.resolve(void 0);od=()=>{g.then(qy)}};var qy=()=>{for(var g;g=Be();){try{g.h.call(g.g)}catch(W){vt(W)}var F=sd;F.j(g),100>F.h&&(F.h++,g.next=F.g,F.g=g)}tp=!1};function _u(){this.s=this.s,this.C=this.C}function Oo(g,F){this.type=g,this.g=this.target=F,this.defaultPrevented=!1}_u.prototype.s=!1,_u.prototype.ma=function(){this.s||(this.s=!0,this.N())},_u.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Oo.prototype.h=function(){this.defaultPrevented=!0};var EI=function(){if(!A.addEventListener||!Object.defineProperty)return!1;var g=!1,F=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const W=()=>{};A.addEventListener("test",W,F),A.removeEventListener("test",W,F)}catch{}return g}();function dl(g,F){if(Oo.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var W=this.type=g.type,he=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=F,F=g.relatedTarget){if($r){e:{try{or(F.nodeName);var dt=!0;break e}catch{}dt=!1}dt||(F=null)}}else"mouseover"==W?F=g.fromElement:"mouseout"==W&&(F=g.toElement);this.relatedTarget=F,he?(this.clientX=void 0!==he.clientX?he.clientX:he.pageX,this.clientY=void 0!==he.clientY?he.clientY:he.pageY,this.screenX=he.screenX||0,this.screenY=he.screenY||0):(this.clientX=void 0!==g.clientX?g.clientX:g.pageX,this.clientY=void 0!==g.clientY?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType="string"==typeof g.pointerType?g.pointerType:pC[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&dl.aa.h.call(this)}}jt(dl,Oo);var pC={2:"touch",3:"pen",4:"mouse"};dl.prototype.h=function(){dl.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ad="closure_listenable_"+(1e6*Math.random()|0),Ec=0;function Qy(g,F,W,he,dt){this.listener=g,this.proxy=null,this.src=F,this.type=W,this.capture=!!he,this.ha=dt,this.key=++Ec,this.da=this.fa=!1}function np(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function bm(g){this.src=g,this.g={},this.h=0}function ws(g,F){var W=F.type;if(W in g.g){var Ot,he=g.g[W],dt=Array.prototype.indexOf.call(he,F,void 0);(Ot=0<=dt)&&Array.prototype.splice.call(he,dt,1),Ot&&(np(F),0==g.g[W].length&&(delete g.g[W],g.h--))}}function Sm(g,F,W,he){for(var dt=0;dt<g.length;++dt){var Ot=g[dt];if(!Ot.da&&Ot.listener==F&&Ot.capture==!!W&&Ot.ha==he)return dt}return-1}bm.prototype.add=function(g,F,W,he,dt){var Ot=g.toString();(g=this.g[Ot])||(g=this.g[Ot]=[],this.h++);var fn=Sm(g,F,he,dt);return-1<fn?(F=g[fn],W||(F.fa=!1)):((F=new Qy(F,this.src,Ot,!!he,dt)).fa=W,g.push(F)),F};var bh="closure_lm_"+(1e6*Math.random()|0),Pm={};function Xy(g,F,W,he,dt){if(he&&he.once)return Mm(g,F,W,he,dt);if(Array.isArray(F)){for(var Ot=0;Ot<F.length;Ot++)Xy(g,F[Ot],W,he,dt);return null}return W=Nm(W),g&&g[ad]?g.K(F,W,G(he)?!!he.capture:!!he,dt):rp(g,F,W,!1,he,dt)}function rp(g,F,W,he,dt,Ot){if(!F)throw Error("Invalid event type");var fn=G(dt)?!!dt.capture:!!dt,Pi=ip(g);if(Pi||(g[bh]=Pi=new bm(g)),(W=Pi.add(F,W,he,fn,Ot)).proxy)return W;if(he=function Yy(){const F=hl;return function g(W){return F.call(g.src,g.listener,W)}}(),W.proxy=he,he.src=g,he.listener=W,g.addEventListener)EI||(dt=fn),void 0===dt&&(dt=!1),g.addEventListener(F.toString(),he,dt);else if(g.attachEvent)g.attachEvent(Jy(F.toString()),he);else{if(!g.addListener||!g.removeListener)throw Error("addEventListener and attachEvent are unavailable.");g.addListener(he)}return W}function Mm(g,F,W,he,dt){if(Array.isArray(F)){for(var Ot=0;Ot<F.length;Ot++)Mm(g,F[Ot],W,he,dt);return null}return W=Nm(W),g&&g[ad]?g.L(F,W,G(he)?!!he.capture:!!he,dt):rp(g,F,W,!0,he,dt)}function Rm(g,F,W,he,dt){if(Array.isArray(F))for(var Ot=0;Ot<F.length;Ot++)Rm(g,F[Ot],W,he,dt);else he=G(he)?!!he.capture:!!he,W=Nm(W),g&&g[ad]?(g=g.i,(F=String(F).toString())in g.g&&-1<(W=Sm(Ot=g.g[F],W,he,dt))&&(np(Ot[W]),Array.prototype.splice.call(Ot,W,1),0==Ot.length&&(delete g.g[F],g.h--))):g&&(g=ip(g))&&(F=g.g[F.toString()],g=-1,F&&(g=Sm(F,W,he,dt)),(W=-1<g?F[g]:null)&&Om(W))}function Om(g){if("number"!=typeof g&&g&&!g.da){var F=g.src;if(F&&F[ad])ws(F.i,g);else{var W=g.type,he=g.proxy;F.removeEventListener?F.removeEventListener(W,he,g.capture):F.detachEvent?F.detachEvent(Jy(W),he):F.addListener&&F.removeListener&&F.removeListener(he),(W=ip(F))?(ws(W,g),0==W.h&&(W.src=null,F[bh]=null)):np(g)}}}function Jy(g){return g in Pm?Pm[g]:Pm[g]="on"+g}function hl(g,F){if(g.da)g=!0;else{F=new dl(F,this);var W=g.listener,he=g.ha||g.src;g.fa&&Om(g),g=W.call(he,F)}return g}function ip(g){return(g=g[bh])instanceof bm?g:null}var Sh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nm(g){return"function"==typeof g?g:(g[Sh]||(g[Sh]=function(F){return g.handleEvent(F)}),g[Sh])}function go(){_u.call(this),this.i=new bm(this),this.M=this,this.F=null}function No(g,F){var W,he=g.F;if(he)for(W=[];he;he=he.F)W.push(he);if(g=g.M,he=F.type||F,"string"==typeof F)F=new Oo(F,g);else if(F instanceof Oo)F.target=F.target||g;else{var dt=F;nt(F=new Oo(he,g),dt)}if(dt=!0,W)for(var Ot=W.length-1;0<=Ot;Ot--){var fn=F.g=W[Ot];dt=Ph(fn,he,!0,F)&&dt}if(dt=Ph(fn=F.g=g,he,!0,F)&&dt,dt=Ph(fn,he,!1,F)&&dt,W)for(Ot=0;Ot<W.length;Ot++)dt=Ph(fn=F.g=W[Ot],he,!1,F)&&dt}function Ph(g,F,W,he){if(!(F=g.i.g[String(F)]))return!0;F=F.concat();for(var dt=!0,Ot=0;Ot<F.length;++Ot){var fn=F[Ot];if(fn&&!fn.da&&fn.capture==W){var Pi=fn.listener,xo=fn.ha||fn.src;fn.fa&&ws(g.i,fn),dt=!1!==Pi.call(xo,he)&&dt}}return dt&&!he.defaultPrevented}function cd(g,F,W){if("function"==typeof g)W&&(g=Re(g,W));else{if(!g||"function"!=typeof g.handleEvent)throw Error("Invalid listener argument");g=Re(g.handleEvent,g)}return 2147483647<Number(F)?-1:A.setTimeout(g,F||0)}function sp(g){g.g=cd(()=>{g.g=null,g.i&&(g.i=!1,sp(g))},g.l);const F=g.h;g.h=null,g.m.apply(null,F)}jt(go,_u),go.prototype[ad]=!0,go.prototype.removeEventListener=function(g,F,W,he){Rm(this,g,F,W,he)},go.prototype.N=function(){if(go.aa.N.call(this),this.i){var F,g=this.i;for(F in g.g){for(var W=g.g[F],he=0;he<W.length;he++)np(W[he]);delete g.g[F],g.h--}}this.F=null},go.prototype.K=function(g,F,W,he){return this.i.add(String(g),F,!1,W,he)},go.prototype.L=function(g,F,W,he){return this.i.add(String(g),F,!0,W,he)};class yu extends _u{constructor(F,W){super(),this.m=F,this.l=W,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:sp(this)}N(){super.N(),this.g&&(A.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vu(g){_u.call(this),this.h=g,this.g={}}jt(vu,_u);var xm=[];function ud(g){Ar(g.g,function(F,W){this.g.hasOwnProperty(W)&&Om(F)},g),g.g={}}vu.prototype.N=function(){vu.aa.N.call(this),ud(this)},vu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var km=A.JSON.stringify,II=A.JSON.parse,Fm=class{stringify(g){return A.JSON.stringify(g,void 0)}parse(g){return A.JSON.parse(g,void 0)}};function op(){}function ld(){}op.prototype.h=null;var ap={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dd(){Oo.call(this,"d")}function cp(){Oo.call(this,"c")}jt(dd,Oo),jt(cp,Oo);var Eu={},Zy=null;function fl(){return Zy=Zy||new go}function hd(g){Oo.call(this,Eu.La,g)}function Mh(g){const F=fl();No(F,new hd(F))}function ev(g,F){Oo.call(this,Eu.STAT_EVENT,g),this.stat=F}function Ko(g){const F=fl();No(F,new ev(F,g))}function tv(g,F){Oo.call(this,Eu.Ma,g),this.size=F}function Rh(g,F){if("function"!=typeof g)throw Error("Fn must not be null and must be a function");return A.setTimeout(function(){g()},F)}function Oh(){this.g=!0}function $c(g,F,W,he){g.info(function(){return"XMLHTTP TEXT ("+F+"): "+function DI(g,F){if(!g.g)return F;if(!F)return null;try{var W=JSON.parse(F);if(W)for(g=0;g<W.length;g++)if(Array.isArray(W[g])){var he=W[g];if(!(2>he.length)){var dt=he[1];if(Array.isArray(dt)&&!(1>dt.length)){var Ot=dt[0];if("noop"!=Ot&&"stop"!=Ot&&"close"!=Ot)for(var fn=1;fn<dt.length;fn++)dt[fn]=""}}}return km(W)}catch{return F}}(g,W)+(he?" "+he:"")})}Eu.La="serverreachability",jt(hd,Oo),Eu.STAT_EVENT="statevent",jt(ev,Oo),Eu.Ma="timingevent",jt(tv,Oo),Oh.prototype.xa=function(){this.g=!1},Oh.prototype.info=function(){};var xh,Nh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function kh(){}function Iu(g,F,W,he){this.j=g,this.i=F,this.l=W,this.R=he||1,this.U=new vu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lm}function Lm(){this.i=null,this.g="",this.h=!1}jt(kh,op),kh.prototype.g=function(){return new XMLHttpRequest},kh.prototype.i=function(){return{}},xh=new kh;var up={},lp={};function dp(g,F,W){g.L=1,g.v=Lh(Ic(F)),g.m=W,g.P=!0,nv(g,null)}function nv(g,F){g.F=Date.now(),fd(g),g.A=Ic(g.v);var W=g.A,he=g.R;Array.isArray(he)||(he=[String(he)]),OI(W.i,"t",he),g.C=0,W=g.j.J,g.h=new Lm,g.g=wv(g.j,W?F:null,!g.m),0<g.O&&(g.M=new yu(Re(g.Y,g,g.g),g.O)),F=g.U,W=g.g,he=g.ca;var dt="readystatechange";Array.isArray(dt)||(dt&&(xm[0]=dt.toString()),dt=xm);for(var Ot=0;Ot<dt.length;Ot++){var fn=Xy(W,dt[Ot],he||F.handleEvent,!1,F.h||F);if(!fn)break;F.g[fn.key]=fn}F=g.H?Se(g.H):{},g.m?(g.u||(g.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,F)):(g.u="GET",g.g.ea(g.A,g.u,null,F)),Mh(),function CI(g,F,W,he,dt,Ot){g.info(function(){if(g.g)if(Ot)for(var fn="",Pi=Ot.split("&"),xo=0;xo<Pi.length;xo++){var vi=Pi[xo].split("=");if(1<vi.length){var ko=vi[0];vi=vi[1];var qo=ko.split("_");fn=2<=qo.length&&"type"==qo[1]?fn+(ko+"=")+vi+"&":fn+(ko+"=redacted&")}}else fn=null;else fn=Ot;return"XMLHTTP REQ ("+he+") [attempt "+dt+"]: "+F+"\n"+W+"\n"+fn})}(g.i,g.u,g.A,g.l,g.R,g.m)}function rv(g){return!!g.g&&"GET"==g.u&&2!=g.L&&g.j.Ca}function AI(g,F){var W=g.C,he=F.indexOf("\n",W);return-1==he?lp:(W=Number(F.substring(W,he)),isNaN(W)?up:(he+=1)+W>F.length?lp:(F=F.slice(he,he+W),g.C=he+W,F))}function fd(g){g.S=Date.now()+g.I,hp(g,g.I)}function hp(g,F){if(null!=g.B)throw Error("WatchDog timer not null");g.B=Rh(Re(g.ba,g),F)}function fp(g){g.B&&(A.clearTimeout(g.B),g.B=null)}function pl(g){0==g.j.G||g.J||Iv(g.j,g)}function Hc(g){fp(g);var F=g.M;F&&"function"==typeof F.ma&&F.ma(),g.M=null,ud(g.U),g.g&&(F=g.g,g.g=null,F.abort(),F.ma())}function Um(g,F){try{var W=g.j;if(0!=W.G&&(W.g==g||Fh(W.h,g)))if(!g.K&&Fh(W.h,g)&&3==W.G){try{var he=W.Da.g.parse(F)}catch{he=null}if(Array.isArray(he)&&3==he.length){var dt=he;if(0==dt[0]){e:if(!W.u){if(W.g){if(!(W.g.F+3e3<g.F))break e;Ip(W),$h(W)}Ym(W),Ko(18)}}else W.za=dt[1],0<W.za-W.T&&37500>dt[2]&&W.F&&0==W.v&&!W.C&&(W.C=Rh(Re(W.Za,W),6e3));if(1>=Bm(W.h)&&W.ca){try{W.ca()}catch{}W.ca=void 0}}else yl(W,11)}else if((g.K||W.g==g)&&Ip(W),!qn(F))for(dt=W.Da.g.parse(F),F=0;F<dt.length;F++){let vi=dt[F];if(W.T=vi[0],vi=vi[1],2==W.G)if("c"==vi[0]){W.K=vi[1],W.ia=vi[2];const ko=vi[3];null!=ko&&(W.la=ko,W.j.info("VER="+W.la));const qo=vi[4];null!=qo&&(W.Aa=qo,W.j.info("SVER="+W.Aa));const Ja=vi[5];null!=Ja&&"number"==typeof Ja&&0<Ja&&(W.L=he=1.5*Ja,W.j.info("backChannelRequestTimeoutMs_="+he)),he=W;const Cc=g.g;if(Cc){const vl=Cc.g?Cc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vl){var Ot=he.h;Ot.g||-1==vl.indexOf("spdy")&&-1==vl.indexOf("quic")&&-1==vl.indexOf("h2")||(Ot.j=Ot.l,Ot.g=new Set,Ot.h&&(Vh(Ot,Ot.h),Ot.h=null))}if(he.D){const n_=Cc.g?Cc.g.getResponseHeader("X-HTTP-Session-Id"):null;n_&&(he.ya=n_,Yi(he.I,he.D,n_))}}W.G=3,W.l&&W.l.ua(),W.ba&&(W.R=Date.now()-g.F,W.j.info("Handshake RTT: "+W.R+"ms"));var fn=g;if((he=W).qa=e_(he,he.J?he.ia:null,he.W),fn.K){jm(he.h,fn);var Pi=fn,xo=he.L;xo&&(Pi.I=xo),Pi.B&&(fp(Pi),fd(Pi)),he.g=fn}else Gh(he);0<W.i.length&&vp(W)}else"stop"!=vi[0]&&"close"!=vi[0]||yl(W,7);else 3==W.G&&("stop"==vi[0]||"close"==vi[0]?"stop"==vi[0]?yl(W,7):_v(W):"noop"!=vi[0]&&W.l&&W.l.ta(vi),W.v=0)}Mh()}catch{}}Iu.prototype.ca=function(g){g=g.target;const F=this.M;F&&3==Gc(g)?F.j():this.Y(g)},Iu.prototype.Y=function(g){try{if(g==this.g)e:{const qo=Gc(this.g);var F=this.g.Ba();if(this.g.Z(),!(3>qo)&&(3!=qo||this.g&&(this.h.h||this.g.oa()||Bh(this.g)))){this.J||4!=qo||7==F||Mh(),fp(this);var W=this.g.Z();this.X=W;t:if(rv(this)){var he=Bh(this.g);g="";var dt=he.length,Ot=4==Gc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hc(this),pl(this);var fn="";break t}this.h.i=new A.TextDecoder}for(F=0;F<dt;F++)this.h.h=!0,g+=this.h.i.decode(he[F],{stream:!(Ot&&F==dt-1)});he.length=0,this.h.g+=g,this.C=0,fn=this.h.g}else fn=this.g.oa();if(this.o=200==W,function wI(g,F,W,he,dt,Ot,fn){g.info(function(){return"XMLHTTP RESP ("+he+") [ attempt "+dt+"]: "+F+"\n"+W+"\n"+Ot+" "+fn})}(this.i,this.u,this.A,this.l,this.R,qo,W),this.o){if(this.T&&!this.K){t:{if(this.g){var Pi,xo=this.g;if((Pi=xo.g?xo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qn(Pi)){var vi=Pi;break t}}vi=null}if(!(W=vi)){this.o=!1,this.s=3,Ko(12),Hc(this),pl(this);break e}$c(this.i,this.l,W,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Um(this,W)}if(this.P){let Cc;for(W=!0;!this.J&&this.C<fn.length;){if(Cc=AI(this,fn),Cc==lp){4==qo&&(this.s=4,Ko(14),W=!1),$c(this.i,this.l,null,"[Incomplete Response]");break}if(Cc==up){this.s=4,Ko(15),$c(this.i,this.l,fn,"[Invalid Chunk]"),W=!1;break}$c(this.i,this.l,Cc,null),Um(this,Cc)}if(rv(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=qo||0!=fn.length||this.h.h||(this.s=1,Ko(16),W=!1),this.o=this.o&&W,W){if(0<fn.length&&!this.W){this.W=!0;var ko=this.j;ko.g==this&&ko.ba&&!ko.M&&(ko.j.info("Great, no buffering proxy detected. Bytes received: "+fn.length),Jm(ko),ko.M=!0,Ko(11))}}else $c(this.i,this.l,fn,"[Invalid Chunked Response]"),Hc(this),pl(this)}else $c(this.i,this.l,fn,null),Um(this,fn);4==qo&&Hc(this),this.o&&!this.J&&(4==qo?Iv(this.j,this):(this.o=!1,fd(this)))}else(function mv(g){const F={};g=(g.g&&2<=Gc(g)&&g.g.getAllResponseHeaders()||"").split("\r\n");for(let he=0;he<g.length;he++){if(qn(g[he]))continue;var W=ot(g[he]);const dt=W[0];if("string"!=typeof(W=W[1]))continue;W=W.trim();const Ot=F[dt]||[];F[dt]=Ot,Ot.push(W)}!function et(g,F){for(const W in g)F.call(void 0,g[W],W,g)}(F,function(he){return he.join(", ")})})(this.g),400==W&&0<fn.indexOf("Unknown SID")?(this.s=3,Ko(12)):(this.s=0,Ko(13)),Hc(this),pl(this)}}}catch{}},Iu.prototype.cancel=function(){this.J=!0,Hc(this)},Iu.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(function TI(g,F){g.info(function(){return"TIMEOUT: "+F})}(this.i,this.A),2!=this.L&&(Mh(),Ko(17)),Hc(this),this.s=2,pl(this)):hp(this,this.S-g)};var bI=class{constructor(g,F){this.g=g,this.map=F}};function iv(g){this.l=g||10,g=A.PerformanceNavigationTiming?0<(g=A.performance.getEntriesByType("navigation")).length&&("hq"==g[0].nextHopProtocol||"h2"==g[0].nextHopProtocol):!!(A.chrome&&A.chrome.loadTimes&&A.chrome.loadTimes()&&A.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sv(g){return!!g.h||!!g.g&&g.g.size>=g.j}function Bm(g){return g.h?1:g.g?g.g.size:0}function Fh(g,F){return g.h?g.h==F:!!g.g&&g.g.has(F)}function Vh(g,F){g.g?g.g.add(F):g.h=F}function jm(g,F){g.h&&g.h==F?g.h=null:g.g&&g.g.has(F)&&g.g.delete(F)}function $m(g){if(null!=g.h)return g.i.concat(g.h.D);if(null!=g.g&&0!==g.g.size){let F=g.i;for(const W of g.g.values())F=F.concat(W.D);return F}return Jt(g.i)}function Hm(g,F){if(g.forEach&&"function"==typeof g.forEach)g.forEach(F,void 0);else if(x(g)||"string"==typeof g)Array.prototype.forEach.call(g,F,void 0);else for(var W=function SI(g){if(g.na&&"function"==typeof g.na)return g.na();if(!g.V||"function"!=typeof g.V){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(x(g)||"string"==typeof g){var F=[];g=g.length;for(var W=0;W<g;W++)F.push(W);return F}F=[],W=0;for(const he in g)F[W++]=he;return F}}}(g),he=function ov(g){if(g.V&&"function"==typeof g.V)return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if("string"==typeof g)return g.split("");if(x(g)){for(var F=[],W=g.length,he=0;he<W;he++)F.push(g[he]);return F}for(he in F=[],W=0,g)F[W++]=g[he];return F}(g),dt=he.length,Ot=0;Ot<dt;Ot++)F.call(void 0,he[Ot],W&&W[Ot],g)}iv.prototype.cancel=function(){if(this.i=$m(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const g of this.g.values())g.cancel();this.g.clear()}};var av=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cu(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Cu){this.h=g.h,zm(this,g.j),this.o=g.o,this.g=g.g,Wm(this,g.s),this.l=g.l;var F=g.i,W=new pp;W.i=F.i,F.g&&(W.g=new Map(F.g),W.h=F.h),cv(this,W),this.m=g.m}else g&&(F=String(g).match(av))?(this.h=!1,zm(this,F[1]||"",!0),this.o=gl(F[2]||""),this.g=gl(F[3]||"",!0),Wm(this,F[4]),this.l=gl(F[5]||"",!0),cv(this,F[6]||"",!0),this.m=gl(F[7]||"")):(this.h=!1,this.i=new pp(null,this.h))}function Ic(g){return new Cu(g)}function zm(g,F,W){g.j=W?gl(F,!0):F,g.j&&(g.j=g.j.replace(/:$/,""))}function Wm(g,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);g.s=F}else g.s=null}function cv(g,F,W){F instanceof pp?(g.i=F,function dv(g,F){F&&!g.j&&(ml(g),g.i=null,g.g.forEach(function(W,he){var dt=he.toLowerCase();he!=dt&&(MI(this,he),OI(this,dt,W))},g)),g.j=F}(g.i,g.h)):(W||(F=pd(F,gC)),g.i=new pp(F,g.h))}function Yi(g,F,W){g.i.set(F,W)}function Lh(g){return Yi(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function gl(g,F){return g?F?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function pd(g,F,W){return"string"==typeof g?(g=encodeURI(g).replace(F,uv),W&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function uv(g){return"%"+((g=g.charCodeAt(0))>>4&15).toString(16)+(15&g).toString(16)}Cu.prototype.toString=function(){var g=[],F=this.j;F&&g.push(pd(F,Km,!0),":");var W=this.g;return(W||"file"==F)&&(g.push("//"),(F=this.o)&&g.push(pd(F,Km,!0),"@"),g.push(encodeURIComponent(String(W)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(W=this.s)&&g.push(":",String(W))),(W=this.l)&&(this.g&&"/"!=W.charAt(0)&&g.push("/"),g.push(pd(W,"/"==W.charAt(0)?PI:lv,!0))),(W=this.i.toString())&&g.push("?",W),(W=this.m)&&g.push("#",pd(W,mC)),g.join("")};var Km=/[#\/\?@]/g,lv=/[#\?:]/g,PI=/[#\?]/g,gC=/[#\?@]/g,mC=/#/g;function pp(g,F){this.h=this.g=null,this.i=g||null,this.j=!!F}function ml(g){g.g||(g.g=new Map,g.h=0,g.i&&function Gm(g,F){if(g){g=g.split("&");for(var W=0;W<g.length;W++){var he=g[W].indexOf("="),dt=null;if(0<=he){var Ot=g[W].substring(0,he);dt=g[W].substring(he+1)}else Ot=g[W];F(Ot,dt?decodeURIComponent(dt.replace(/\+/g," ")):"")}}}(g.i,function(F,W){g.add(decodeURIComponent(F.replace(/\+/g," ")),W)}))}function MI(g,F){ml(g),F=Uh(g,F),g.g.has(F)&&(g.i=null,g.h-=g.g.get(F).length,g.g.delete(F))}function RI(g,F){return ml(g),F=Uh(g,F),g.g.has(F)}function OI(g,F,W){MI(g,F),0<W.length&&(g.i=null,g.g.set(Uh(g,F),Jt(W)),g.h+=W.length)}function Uh(g,F){return F=String(F),g.j&&(F=F.toLowerCase()),F}function _l(g,F,W,he,dt){try{dt&&(dt.onload=null,dt.onerror=null,dt.onabort=null,dt.ontimeout=null),he(W)}catch{}}function yC(){this.g=new Fm}function vC(g,F,W){const he=W||"";try{Hm(g,function(dt,Ot){let fn=dt;G(dt)&&(fn=km(dt)),F.push(he+Ot+"="+encodeURIComponent(fn))})}catch(dt){throw F.push(he+"type="+encodeURIComponent("_badmap")),dt}}function gp(g){this.l=g.Ub||null,this.j=g.eb||!1}function qm(g,F){go.call(this),this.D=g,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function NI(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}function mp(g){g.readyState=4,g.l=null,g.j=null,g.v=null,_p(g)}function _p(g){g.onreadystatechange&&g.onreadystatechange.call(g)}function fv(g){let F="";return Ar(g,function(W,he){F+=he,F+=":",F+=W,F+="\r\n"}),F}function wu(g,F,W){e:{for(he in W){var he=!1;break e}he=!0}he||(W=fv(W),"string"==typeof g?null!=W&&encodeURIComponent(String(W)):Yi(g,F,W))}function Ji(g){go.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=pp.prototype).add=function(g,F){ml(this),this.i=null,g=Uh(this,g);var W=this.g.get(g);return W||this.g.set(g,W=[]),W.push(F),this.h+=1,this},a.forEach=function(g,F){ml(this),this.g.forEach(function(W,he){W.forEach(function(dt){g.call(F,dt,he,this)},this)},this)},a.na=function(){ml(this);const g=Array.from(this.g.values()),F=Array.from(this.g.keys()),W=[];for(let he=0;he<F.length;he++){const dt=g[he];for(let Ot=0;Ot<dt.length;Ot++)W.push(F[he])}return W},a.V=function(g){ml(this);let F=[];if("string"==typeof g)RI(this,g)&&(F=F.concat(this.g.get(Uh(this,g))));else{g=Array.from(this.g.values());for(let W=0;W<g.length;W++)F=F.concat(g[W])}return F},a.set=function(g,F){return ml(this),this.i=null,RI(this,g=Uh(this,g))&&(this.h-=this.g.get(g).length),this.g.set(g,[F]),this.h+=1,this},a.get=function(g,F){return g&&0<(g=this.V(g)).length?String(g[0]):F},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],F=Array.from(this.g.keys());for(var W=0;W<F.length;W++){var he=F[W];const Ot=encodeURIComponent(String(he)),fn=this.V(he);for(he=0;he<fn.length;he++){var dt=Ot;""!==fn[he]&&(dt+="="+encodeURIComponent(String(fn[he]))),g.push(dt)}}return this.i=g.join("&")},jt(gp,op),gp.prototype.g=function(){return new qm(this.l,this.j)},gp.prototype.i=function(g){return function(){return g}}({}),jt(qm,go),(a=qm.prototype).open=function(g,F){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=F,this.readyState=1,_p(this)},a.send=function(g){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(F.body=g),(this.D||A).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mp(this)),this.readyState=0},a.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,_p(this)),this.g&&(this.readyState=3,_p(this),this.g)))if("arraybuffer"===this.responseType)g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof A.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;NI(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var F=g.value?g.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!g.done}))&&(this.response=this.responseText+=F)}g.done?mp(this):_p(this),3==this.readyState&&NI(this)}},a.Ra=function(g){this.g&&(this.response=this.responseText=g,mp(this))},a.Qa=function(g){this.g&&(this.response=g,mp(this))},a.ga=function(){this.g&&mp(this)},a.setRequestHeader=function(g,F){this.u.append(g,F)},a.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],F=this.h.entries();for(var W=F.next();!W.done;)g.push((W=W.value)[0]+": "+W[1]),W=F.next();return g.join("\r\n")},Object.defineProperty(qm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(g){this.m=g?"include":"same-origin"}}),jt(Ji,go);var xI=/^https?$/i,EC=["POST","PUT"];function Qm(g,F){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=F,g.m=5,pv(g),yp(g)}function pv(g){g.A||(g.A=!0,No(g,"complete"),No(g,"error"))}function kI(g){if(g.h&&typeof m<"u"&&(!g.v[1]||4!=Gc(g)||2!=g.Z()))if(g.u&&4==Gc(g))cd(g.Ea,0,g);else if(No(g,"readystatechange"),4==Gc(g)){g.h=!1;try{const fn=g.Z();e:switch(fn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var W;if(!(W=F)){var he;if(he=0===fn){var dt=String(g.D).match(av)[1]||null;!dt&&A.self&&A.self.location&&(dt=A.self.location.protocol.slice(0,-1)),he=!xI.test(dt?dt.toLowerCase():"")}W=he}if(W)No(g,"complete"),No(g,"success");else{g.m=6;try{var Ot=2<Gc(g)?g.g.statusText:""}catch{Ot=""}g.l=Ot+" ["+g.Z()+"]",pv(g)}}finally{yp(g)}}}function yp(g,F){if(g.g){gv(g);const W=g.g,he=g.v[0]?()=>{}:null;g.g=null,g.v=null,F||No(g,"ready");try{W.onreadystatechange=he}catch{}}}function gv(g){g.I&&(A.clearTimeout(g.I),g.I=null)}function Gc(g){return g.g?g.g.readyState:0}function Bh(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function jh(g,F,W){return W&&W.internalChannelParams&&W.internalChannelParams[g]||F}function Xm(g){this.Aa=0,this.i=[],this.j=new Oh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jh("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jh("baseRetryDelayMs",5e3,g),this.cb=jh("retryDelaySeedMs",1e4,g),this.Wa=jh("forwardChannelMaxRetries",2,g),this.wa=jh("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new iv(g&&g.concurrentRequestLimit),this.Da=new yC,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function _v(g){if(FI(g),3==g.G){var F=g.U++,W=Ic(g.I);if(Yi(W,"SID",g.K),Yi(W,"RID",F),Yi(W,"TYPE","terminate"),Hh(g,W),(F=new Iu(g,g.j,F)).L=2,F.v=Lh(Ic(W)),W=!1,A.navigator&&A.navigator.sendBeacon)try{W=A.navigator.sendBeacon(F.v.toString(),"")}catch{}!W&&A.Image&&((new Image).src=F.v,W=!0),W||(F.g=wv(F.j,null),F.g.ea(F.v)),F.F=Date.now(),fd(F)}Zm(g)}function $h(g){g.g&&(Jm(g),g.g.cancel(),g.g=null)}function FI(g){$h(g),g.u&&(A.clearTimeout(g.u),g.u=null),Ip(g),g.h.cancel(),g.s&&("number"==typeof g.s&&A.clearTimeout(g.s),g.s=null)}function vp(g){if(!sv(g.h)&&!g.s){g.s=!0;var F=g.Ga;od||Ah(),tp||(od(),tp=!0),Am.add(F,g),g.B=0}}function Ep(g,F){var W;W=F?F.l:g.U++;const he=Ic(g.I);Yi(he,"SID",g.K),Yi(he,"RID",W),Yi(he,"AID",g.T),Hh(g,he),g.m&&g.o&&wu(he,g.m,g.o),W=new Iu(g,g.j,W,g.B+1),null===g.m&&(W.H=g.o),F&&(g.i=F.D.concat(g.i)),F=vv(g,W,1e3),W.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Vh(g.h,W),dp(W,he,F)}function Hh(g,F){g.H&&Ar(g.H,function(W,he){Yi(F,he,W)}),g.l&&Hm({},function(W,he){Yi(F,he,W)})}function vv(g,F,W){W=Math.min(g.i.length,W);var he=g.l?Re(g.l.Na,g.l,g):null;e:{var dt=g.i;let Ot=-1;for(;;){const fn=["count="+W];-1==Ot?0<W?(Ot=dt[0].g,fn.push("ofs="+Ot)):Ot=0:fn.push("ofs="+Ot);let Pi=!0;for(let xo=0;xo<W;xo++){let vi=dt[xo].g;const ko=dt[xo].map;if(vi-=Ot,0>vi)Ot=Math.max(0,dt[xo].g-100),Pi=!1;else try{vC(ko,fn,"req"+vi+"_")}catch{he&&he(ko)}}if(Pi){he=fn.join("&");break e}}}return g=g.i.splice(0,W),F.D=g,he}function Gh(g){if(!g.g&&!g.u){g.Y=1;var F=g.Fa;od||Ah(),tp||(od(),tp=!0),Am.add(F,g),g.v=0}}function Ym(g){return!(g.g||g.u||3<=g.v||(g.Y++,g.u=Rh(Re(g.Fa,g),Cv(g,g.v)),g.v++,0))}function Jm(g){null!=g.A&&(A.clearTimeout(g.A),g.A=null)}function Ev(g){g.g=new Iu(g,g.j,"rpc",g.Y),null===g.m&&(g.g.H=g.o),g.g.O=0;var F=Ic(g.qa);Yi(F,"RID","rpc"),Yi(F,"SID",g.K),Yi(F,"AID",g.T),Yi(F,"CI",g.F?"0":"1"),!g.F&&g.ja&&Yi(F,"TO",g.ja),Yi(F,"TYPE","xmlhttp"),Hh(g,F),g.m&&g.o&&wu(F,g.m,g.o),g.L&&(g.g.I=g.L);var W=g.g;g=g.ia,W.L=1,W.v=Lh(Ic(F)),W.m=null,W.P=!0,nv(W,g)}function Ip(g){null!=g.C&&(A.clearTimeout(g.C),g.C=null)}function Iv(g,F){var W=null;if(g.g==F){Ip(g),Jm(g),g.g=null;var he=2}else{if(!Fh(g.h,F))return;W=F.D,jm(g.h,F),he=1}if(0!=g.G)if(F.o)if(1==he){W=F.m?F.m.length:0,F=Date.now()-F.F;var dt=g.B;No(he=fl(),new tv(he,W)),vp(g)}else Gh(g);else if(3==(dt=F.s)||0==dt&&0<F.X||!(1==he&&function yv(g,F){return!(Bm(g.h)>=g.h.j-(g.s?1:0)||(g.s?(g.i=F.D.concat(g.i),0):1==g.G||2==g.G||g.B>=(g.Va?0:g.Wa)||(g.s=Rh(Re(g.Ga,g,F),Cv(g,g.B)),g.B++,0)))}(g,F)||2==he&&Ym(g)))switch(W&&0<W.length&&(F=g.h,F.i=F.i.concat(W)),dt){case 1:yl(g,5);break;case 4:yl(g,10);break;case 3:yl(g,6);break;default:yl(g,2)}}function Cv(g,F){let W=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(W*=2),W*F}function yl(g,F){if(g.j.info("Error code "+F),2==F){var W=Re(g.fb,g),he=g.Xa;const dt=!he;he=new Cu(he||"//www.google.com/images/cleardot.gif"),A.location&&"http"==A.location.protocol||zm(he,"https"),Lh(he),dt?function hv(g,F){const W=new Oh;if(A.Image){const he=new Image;he.onload=st(_l,W,"TestLoadImage: loaded",!0,F,he),he.onerror=st(_l,W,"TestLoadImage: error",!1,F,he),he.onabort=st(_l,W,"TestLoadImage: abort",!1,F,he),he.ontimeout=st(_l,W,"TestLoadImage: timeout",!1,F,he),A.setTimeout(function(){he.ontimeout&&he.ontimeout()},1e4),he.src=g}else F(!1)}(he.toString(),W):function _C(g,F){new Oh;const he=new AbortController,dt=setTimeout(()=>{he.abort(),_l(0,0,!1,F)},1e4);fetch(g,{signal:he.signal}).then(Ot=>{clearTimeout(dt),_l(0,0,!!Ot.ok,F)}).catch(()=>{clearTimeout(dt),_l(0,0,!1,F)})}(he.toString(),W)}else Ko(2);g.G=0,g.l&&g.l.sa(F),Zm(g),FI(g)}function Zm(g){if(g.G=0,g.ka=[],g.l){const F=$m(g.h);(0!=F.length||0!=g.i.length)&&(Kt(g.ka,F),Kt(g.ka,g.i),g.h.i.length=0,Jt(g.i),g.i.length=0),g.l.ra()}}function e_(g,F,W){var he=W instanceof Cu?Ic(W):new Cu(W);if(""!=he.g)F&&(he.g=F+"."+he.g),Wm(he,he.s);else{var dt=A.location;he=dt.protocol,F=F?F+"."+dt.hostname:dt.hostname,dt=+dt.port;var Ot=new Cu(null);he&&zm(Ot,he),F&&(Ot.g=F),dt&&Wm(Ot,dt),W&&(Ot.l=W),he=Ot}return F=g.ya,(W=g.D)&&F&&Yi(he,W,F),Yi(he,"VER",g.la),Hh(g,he),he}function wv(g,F,W){if(F&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return(F=new Ji(g.Ca&&!g.pa?new gp({eb:W}):g.pa)).Ha(g.J),F}function VI(){}function zh(){}function ca(g,F){go.call(this),this.g=new Xm(F),this.l=g,this.h=F&&F.messageUrlParams||null,g=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(g?g["X-WebChannel-Content-Type"]=F.messageContentType:g={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(g?g["X-WebChannel-Client-Profile"]=F.va:g={"X-WebChannel-Client-Profile":F.va}),this.g.S=g,(g=F&&F.Sb)&&!qn(g)&&(this.g.m=g),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!qn(F)&&(this.g.D=F,null!==(g=this.h)&&F in g&&F in(g=this.h)&&delete g[F]),this.j=new gd(this)}function Tu(g){dd.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var F=g.__sm__;if(F){e:{for(const W in F){g=W;break e}g=void 0}(this.i=g)&&(g=this.i,F=null!==F&&g in F?F[g]:void 0),this.data=F}else this.data=g}function t_(){cp.call(this),this.status=1}function gd(g){this.g=g}(a=Ji.prototype).Ha=function(g){this.J=g},a.ea=function(g,F,W,he){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);F=F?F.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xh.g(),this.v=function jc(g){return g.h||(g.h=g.i())}(this.o?this.o:xh),this.g.onreadystatechange=Re(this.Ea,this);try{this.B=!0,this.g.open(F,String(g),!0),this.B=!1}catch(Ot){return void Qm(this,Ot)}if(g=W||"",W=new Map(this.headers),he)if(Object.getPrototypeOf(he)===Object.prototype)for(var dt in he)W.set(dt,he[dt]);else{if("function"!=typeof he.keys||"function"!=typeof he.get)throw Error("Unknown input type for opt_headers: "+String(he));for(const Ot of he.keys())W.set(Ot,he.get(Ot))}he=Array.from(W.keys()).find(Ot=>"content-type"==Ot.toLowerCase()),dt=A.FormData&&g instanceof A.FormData,!(0<=Array.prototype.indexOf.call(EC,F,void 0))||he||dt||W.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ot,fn]of W)this.g.setRequestHeader(Ot,fn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gv(this),this.u=!0,this.g.send(g),this.u=!1}catch(Ot){Qm(this,Ot)}},a.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,No(this,"complete"),No(this,"abort"),yp(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yp(this,!0)),Ji.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?kI(this):this.bb())},a.bb=function(){kI(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<Gc(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(g){if(this.g){var F=this.g.responseText;return g&&0==F.indexOf(g)&&(F=F.substring(g.length)),II(F)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=Xm.prototype).la=8,a.G=1,a.connect=function(g,F,W,he){Ko(0),this.W=g,this.H=F||{},W&&void 0!==he&&(this.H.OSID=W,this.H.OAID=he),this.F=this.X,this.I=e_(this,null,this.W),vp(this)},a.Ga=function(g){if(this.s)if(this.s=null,1==this.G){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const dt=new Iu(this,this.j,g);let Ot=this.o;if(this.S&&(Ot?(Ot=Se(Ot),nt(Ot,this.S)):Ot=this.S),null!==this.m||this.O||(dt.H=Ot,Ot=null),this.P)e:{for(var F=0,W=0;W<this.i.length;W++){var he=this.i[W];if(void 0===(he="__data__"in he.map&&"string"==typeof(he=he.map.__data__)?he.length:void 0))break;if(4096<(F+=he)){F=W;break e}if(4096===F||W===this.i.length-1){F=W+1;break e}}F=1e3}else F=1e3;F=vv(this,dt,F),Yi(W=Ic(this.I),"RID",g),Yi(W,"CVER",22),this.D&&Yi(W,"X-HTTP-Session-Id",this.D),Hh(this,W),Ot&&(this.O?F="headers="+encodeURIComponent(String(fv(Ot)))+"&"+F:this.m&&wu(W,this.m,Ot)),Vh(this.h,dt),this.Ua&&Yi(W,"TYPE","init"),this.P?(Yi(W,"$req",F),Yi(W,"SID","null"),dt.T=!0,dp(dt,W,null)):dp(dt,W,F),this.G=2}}else 3==this.G&&(g?Ep(this,g):0==this.i.length||sv(this.h)||Ep(this))},a.Fa=function(){if(this.u=null,Ev(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Rh(Re(this.ab,this),g)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ko(10),$h(this),Ev(this))},a.Za=function(){null!=this.C&&(this.C=null,$h(this),Ym(this),Ko(19))},a.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Ko(2)):(this.j.info("Failed to ping google.com"),Ko(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=VI.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},zh.prototype.g=function(g,F){return new ca(g,F)},jt(ca,go),ca.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ca.prototype.close=function(){_v(this.g)},ca.prototype.o=function(g){var F=this.g;if("string"==typeof g){var W={};W.__data__=g,g=W}else this.u&&((W={}).__data__=km(g),g=W);F.i.push(new bI(F.Ya++,g)),3==F.G&&vp(F)},ca.prototype.N=function(){this.g.l=null,delete this.j,_v(this.g),delete this.g,ca.aa.N.call(this)},jt(Tu,dd),jt(t_,cp),jt(gd,VI),gd.prototype.ua=function(){No(this.g,"a")},gd.prototype.ta=function(g){No(this.g,new Tu(g))},gd.prototype.sa=function(g){No(this.g,new t_)},gd.prototype.ra=function(){No(this.g,"b")},zh.prototype.createWebChannel=zh.prototype.g,ca.prototype.send=ca.prototype.o,ca.prototype.open=ca.prototype.m,ca.prototype.close=ca.prototype.close,zt=On.createWebChannelTransport=function(){return new zh},Ze=On.getStatEventTarget=function(){return fl()},yt=On.Event=Eu,gt=On.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nh.NO_ERROR=0,Nh.TIMEOUT=8,Nh.HTTP_ERROR=6,ct=On.ErrorCode=Nh,Vm.COMPLETE="complete",Xe=On.EventType=Vm,ld.EventType=ap,ap.OPEN="a",ap.CLOSE="b",ap.ERROR="c",ap.MESSAGE="d",go.prototype.listen=go.prototype.K,ke=On.WebChannel=ld,Tn=On.FetchXmlHttpFactory=gp,Ji.prototype.listenOnce=Ji.prototype.L,Ji.prototype.getLastError=Ji.prototype.Ka,Ji.prototype.getLastErrorCode=Ji.prototype.Ba,Ji.prototype.getStatus=Ji.prototype.Z,Ji.prototype.getResponseJson=Ji.prototype.Oa,Ji.prototype.getResponseText=Ji.prototype.oa,Ji.prototype.send=Ji.prototype.ea,Ji.prototype.setWithCredentials=Ji.prototype.Ha,Ft=On.XhrIo=Ji}).apply(typeof Fn<"u"?Fn:typeof self<"u"?self:typeof window<"u"?window:{});const ln="@firebase/firestore";class Zt{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");let tn="10.13.1";const vn=new ze.Vy("@firebase/firestore");function Cn(){return vn.logLevel}function rt(a,...t){if(vn.logLevel<=ze.$b.DEBUG){const r=t.map(rr);vn.debug(`Firestore (${tn}): ${a}`,...r)}}function yn(a,...t){if(vn.logLevel<=ze.$b.ERROR){const r=t.map(rr);vn.error(`Firestore (${tn}): ${a}`,...r)}}function Gn(a,...t){if(vn.logLevel<=ze.$b.WARN){const r=t.map(rr);vn.warn(`Firestore (${tn}): ${a}`,...r)}}function rr(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function bt(a="Unexpected state"){const t=`FIRESTORE (${tn}) INTERNAL ASSERTION FAILED: `+a;throw yn(t),new Error(t)}function ft(a,t){a||bt()}function Nt(a,t){return a}const tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rt extends de.g{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qn{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}class Zn{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class wn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Zt.UNAUTHENTICATED))}shutdown(){}}class An{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class kr{constructor(t){this.t=t,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){var o=this;let u=this.i;const d=G=>this.i!==u?(u=this.i,r(G)):Promise.resolve();let m=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new Qn,t.enqueueRetryable(()=>d(this.currentUser))};const A=()=>{const G=m;t.enqueueRetryable((0,ue.A)(function*(){yield G.promise,yield d(o.currentUser)}))},x=G=>{rt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=G,this.auth.addAuthTokenListener(this.o),A()};this.t.onInit(G=>x(G)),setTimeout(()=>{if(!this.auth){const G=this.t.getImmediate({optional:!0});G?x(G):(rt("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new Qn)}},0),A()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(o=>this.i!==t?(rt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(ft("string"==typeof o.accessToken),new Zn(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ft(null===t||"string"==typeof t),new Zt(t)}}class qr{constructor(t,r,o){this.l=t,this.h=r,this.P=o,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Hr{constructor(t,r,o){this.l=t,this.h=r,this.P=o}getToken(){return Promise.resolve(new qr(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Li{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rr{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){const o=d=>{null!=d.error&&rt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.R;return this.R=d.token,rt("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?r(d.token):Promise.resolve()};this.o=d=>{t.enqueueRetryable(()=>o(d))};const u=d=>{rt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.A.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.A.getImmediate({optional:!0});d?u(d):rt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(ft("string"==typeof r.token),this.R=r.token,new Li(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Nn(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let o=0;o<a;o++)r[o]=Math.floor(256*Math.random());return r}class Ui{static newId(){const r=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=Nn(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<r&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[d]%62))}return o}}function Ht(a,t){return a<t?-1:a>t?1:0}function Un(a,t,r){return a.length===t.length&&a.every((o,u)=>r(o,t[u]))}function Or(a){return a+"\0"}class Xt{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Rt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Rt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new Rt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Rt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Xt.fromMillis(Date.now())}static fromDate(t){return Xt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*r));return new Xt(r,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ht(this.nanoseconds,t.nanoseconds):Ht(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Yt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Yt(t)}static min(){return new Yt(new Xt(0,0))}static max(){return new Yt(new Xt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qr{constructor(t,r,o){void 0===r?r=0:r>t.length&&bt(),void 0===o?o=t.length-r:o>t.length-r&&bt(),this.segments=t,this.offset=r,this.len=o}get length(){return this.len}isEqual(t){return 0===Qr.comparator(this,t)}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Qr?t.forEach(o=>{r.push(o)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,o=this.limit();r<o;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const o=Math.min(t.length,r.length);for(let u=0;u<o;u++){const d=t.get(u),m=r.get(u);if(d<m)return-1;if(d>m)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class Mn extends Qr{construct(t,r,o){return new Mn(t,r,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const o of t){if(o.indexOf("//")>=0)throw new Rt(tt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);r.push(...o.split("/").filter(u=>u.length>0))}return new Mn(r)}static emptyPath(){return new Mn([])}}const Nr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xe extends Qr{construct(t,r,o){return new xe(t,r,o)}static isValidIdentifier(t){return Nr.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new xe(["__name__"])}static fromServerFormat(t){const r=[];let o="",u=0;const d=()=>{if(0===o.length)throw new Rt(tt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(o),o=""};let m=!1;for(;u<t.length;){const A=t[u];if("\\"===A){if(u+1===t.length)throw new Rt(tt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const x=t[u+1];if("\\"!==x&&"."!==x&&"`"!==x)throw new Rt(tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=x,u+=2}else"`"===A?(m=!m,u++):"."!==A||m?(o+=A,u++):(d(),u++)}if(d(),m)throw new Rt(tt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new xe(r)}static emptyPath(){return new xe([])}}class Te{constructor(t){this.path=t}static fromPath(t){return new Te(Mn.fromString(t))}static fromName(t){return new Te(Mn.fromString(t).popFirst(5))}static empty(){return new Te(Mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Mn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,r){return Mn.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Te(new Mn(t.slice()))}}class we{constructor(t,r,o,u){this.indexId=t,this.collectionGroup=r,this.fields=o,this.indexState=u}}function Ke(a){return a.fields.find(t=>2===t.kind)}function St(a){return a.fields.filter(t=>2!==t.kind)}we.UNKNOWN_ID=-1;class Q{constructor(t,r){this.fieldPath=t,this.kind=r}}class oe{constructor(t,r){this.sequenceNumber=t,this.offset=r}static empty(){return new oe(0,Lt.min())}}function me(a,t){const r=a.toTimestamp().seconds,o=a.toTimestamp().nanoseconds+1,u=Yt.fromTimestamp(1e9===o?new Xt(r+1,0):new Xt(r,o));return new Lt(u,Te.empty(),t)}function Et(a){return new Lt(a.readTime,a.key,-1)}class Lt{constructor(t,r,o){this.readTime=t,this.documentKey=r,this.largestBatchId=o}static min(){return new Lt(Yt.min(),Te.empty(),-1)}static max(){return new Lt(Yt.max(),Te.empty(),-1)}}function mn(a,t){let r=a.readTime.compareTo(t.readTime);return 0!==r?r:(r=Te.comparator(a.documentKey,t.documentKey),0!==r?r:Ht(a.largestBatchId,t.largestBatchId))}const Bn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function bn(a){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,ue.A)(function*(a){if(a.code!==tt.FAILED_PRECONDITION||a.message!==Bn)throw a;rt("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Oe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Oe((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(t,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(r,d).next(o,u)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Oe?r:Oe.resolve(r)}catch(r){return Oe.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Oe.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Oe.reject(r)}static resolve(t){return new Oe((r,o)=>{r(t)})}static reject(t){return new Oe((r,o)=>{o(t)})}static waitFor(t){return new Oe((r,o)=>{let u=0,d=0,m=!1;t.forEach(A=>{++u,A.next(()=>{++d,m&&d===u&&r()},x=>o(x))}),m=!0,d===u&&r()})}static or(t){let r=Oe.resolve(!1);for(const o of t)r=r.next(u=>u?Oe.resolve(u):o());return r}static forEach(t,r){const o=[];return t.forEach((u,d)=>{o.push(r.call(this,u,d))}),this.waitFor(o)}static mapArray(t,r){return new Oe((o,u)=>{const d=t.length,m=new Array(d);let A=0;for(let x=0;x<d;x++){const G=x;r(t[G]).next(re=>{m[G]=re,++A,A===d&&o(m)},re=>u(re))}})}static doWhile(t,r){return new Oe((o,u)=>{const d=()=>{!0===t()?r().next(()=>{d()},u):o()};d()})}}class Gr{constructor(t,r){this.action=t,this.transaction=r,this.aborted=!1,this.V=new Qn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new ir(t,r.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=Je(o.target.error);this.V.reject(new ir(t,u))}}static open(t,r,o,u){try{return new Gr(r,t.transaction(u,o))}catch(d){throw new ir(r,d)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(rt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const r=this.transaction.objectStore(t);return new Gi(r)}}class Yr{constructor(t,r,o){this.name=t,this.version=r,this.p=o,12.2===Yr.S((0,de.ZQ)())&&yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return rt("SimpleDb","Removing database:",t),ri(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,de.zW)())return!1;if(Yr.v())return!0;const t=(0,de.ZQ)(),r=Yr.S(t),o=0<r&&r<10,u=Ms(t),d=0<u&&u<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||o||d)}static v(){var t;return typeof process<"u"&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.C)}static F(t,r){return t.store(r)}static S(t){const r=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(o)}M(t){var r=this;return(0,ue.A)(function*(){return r.db||(rt("SimpleDb","Opening database:",r.name),r.db=yield new Promise((o,u)=>{const d=indexedDB.open(r.name,r.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new ir(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const A=m.target.error;u("VersionError"===A.name?new Rt(tt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===A.name?new Rt(tt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+A):new ir(t,A))},d.onupgradeneeded=m=>{rt("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',m.oldVersion),r.p.O(m.target.result,d.transaction,m.oldVersion,r.version).next(()=>{rt("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=o=>r.N(o)),r.db})()}L(t){this.N=t,this.db&&(this.db.onversionchange=r=>t(r))}runTransaction(t,r,o,u){var d=this;return(0,ue.A)(function*(){const m="readonly"===r;let A=0;for(;;){++A;try{d.db=yield d.M(t);const x=Gr.open(d.db,t,m?"readonly":"readwrite",o),G=u(x).next(re=>(x.g(),re)).catch(re=>(x.abort(re),Oe.reject(re))).toPromise();return G.catch(()=>{}),yield x.m,G}catch(x){const G=x,re="FirebaseError"!==G.name&&A<3;if(rt("SimpleDb","Transaction failed with error:",G.message,"Retrying:",re),d.close(),!re)return Promise.reject(G)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function Ms(a){const t=a.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class cs{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return ri(this.B.delete())}}class ir extends Rt{constructor(t,r){super(tt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function is(a){return"IndexedDbTransactionError"===a.name}class Gi{constructor(t){this.store=t}put(t,r){let o;return void 0!==r?(rt("SimpleDb","PUT",this.store.name,t,r),o=this.store.put(r,t)):(rt("SimpleDb","PUT",this.store.name,"<auto-key>",t),o=this.store.put(t)),ri(o)}add(t){return rt("SimpleDb","ADD",this.store.name,t,t),ri(this.store.add(t))}get(t){return ri(this.store.get(t)).next(r=>(void 0===r&&(r=null),rt("SimpleDb","GET",this.store.name,t,r),r))}delete(t){return rt("SimpleDb","DELETE",this.store.name,t),ri(this.store.delete(t))}count(){return rt("SimpleDb","COUNT",this.store.name),ri(this.store.count())}U(t,r){const o=this.options(t,r),u=o.index?this.store.index(o.index):this.store;if("function"==typeof u.getAll){const d=u.getAll(o.range);return new Oe((m,A)=>{d.onerror=x=>{A(x.target.error)},d.onsuccess=x=>{m(x.target.result)}})}{const d=this.cursor(o),m=[];return this.W(d,(A,x)=>{m.push(x)}).next(()=>m)}}G(t,r){const o=this.store.getAll(t,null===r?void 0:r);return new Oe((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}j(t,r){rt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(t,r);o.H=!1;const u=this.cursor(o);return this.W(u,(d,m,A)=>A.delete())}J(t,r){let o;r?o=t:(o={},r=t);const u=this.cursor(o);return this.W(u,r)}Y(t){const r=this.cursor({});return new Oe((o,u)=>{r.onerror=d=>{const m=Je(d.target.error);u(m)},r.onsuccess=d=>{const m=d.target.result;m?t(m.primaryKey,m.value).next(A=>{A?m.continue():o()}):o()}})}W(t,r){const o=[];return new Oe((u,d)=>{t.onerror=m=>{d(m.target.error)},t.onsuccess=m=>{const A=m.target.result;if(!A)return void u();const x=new cs(A),G=r(A.primaryKey,A.value,x);if(G instanceof Oe){const re=G.catch(pe=>(x.done(),Oe.reject(pe)));o.push(re)}x.isDone?u():null===x.K?A.continue():A.continue(x.K)}}).next(()=>Oe.waitFor(o))}options(t,r){let o;return void 0!==t&&("string"==typeof t?o=t:r=t),{index:o,range:r}}cursor(t){let r="next";if(t.reverse&&(r="prev"),t.index){const o=this.store.index(t.index);return t.H?o.openKeyCursor(t.range,r):o.openCursor(t.range,r)}return this.store.openCursor(t.range,r)}}function ri(a){return new Oe((t,r)=>{a.onsuccess=o=>{t(o.target.result)},a.onerror=o=>{const u=Je(o.target.error);r(u)}})}let _t=!1;function Je(a){const t=Yr.S((0,de.ZQ)());if(t>=12.2&&t<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const o=new Rt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _t||(_t=!0,setTimeout(()=>{throw o},0)),o}}return a}class kt{constructor(t,r){this.asyncQueue=t,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(t){var r=this;rt("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,ue.A)(function*(){r.task=null;try{rt("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(o){is(o)?rt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield bn(o)}yield r.X(6e4)}))}}class sn{constructor(t,r){this.localStore=t,this.persistence=r}ee(t=50){var r=this;return(0,ue.A)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>r.te(o,t))})()}te(t,r){const o=new Set;let u=r,d=!0;return Oe.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(m=>{if(null!==m&&!o.has(m))return rt("IndexBackfiller",`Processing collection: ${m}`),this.ne(t,m,u).next(A=>{u-=A,o.add(m)});d=!1})).next(()=>r-u)}ne(t,r,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,r).next(u=>this.localStore.localDocuments.getNextDocuments(t,r,u,o).next(d=>{const m=d.changes;return this.localStore.indexManager.updateIndexEntries(t,m).next(()=>this.re(u,d)).next(A=>(rt("IndexBackfiller",`Updating offset: ${A}`),this.localStore.indexManager.updateCollectionGroup(t,r,A))).next(()=>m.size)}))}re(t,r){let o=t;return r.changes.forEach((u,d)=>{const m=Et(d);mn(m,o)>0&&(o=m)}),new Lt(o.readTime,o.documentKey,Math.max(r.batchId,t.largestBatchId))}}let ne=(()=>{class a{constructor(r,o){this.previousValue=r,o&&(o.sequenceNumberHandler=u=>this.ie(u),this.se=u=>o.writeSequenceNumber(u))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function ve(a){return null==a}function Ie(a){return 0===a&&1/a==-1/0}function at(a){return"number"==typeof a&&Number.isInteger(a)&&!Ie(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function Ye(a){let t="";for(let r=0;r<a.length;r++)t.length>0&&(t=Bt(t)),t=qt(a.get(r),t);return Bt(t)}function qt(a,t){let r=t;const o=a.length;for(let u=0;u<o;u++){const d=a.charAt(u);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function Bt(a){return a+"\x01\x01"}function Sn(a){const t=a.length;if(ft(t>=2),2===t)return ft("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),Mn.emptyPath();const r=t-2,o=[];let u="";for(let d=0;d<t;){const m=a.indexOf("\x01",d);switch((m<0||m>r)&&bt(),a.charAt(m+1)){case"\x01":const A=a.substring(d,m);let x;0===u.length?x=A:(u+=A,x=u,u=""),o.push(x);break;case"\x10":u+=a.substring(d,m),u+="\0";break;case"\x11":u+=a.substring(d,m+1);break;default:bt()}d=m+2}return new Mn(o)}const En=["userId","batchId"];function br(a,t){return[a,Ye(t)]}function si(a,t,r){return[a,Ye(t),r]}const _r={},ui=["prefixPath","collectionGroup","readTime","documentId"],Xr=["prefixPath","collectionGroup","documentId"],Mi=["collectionGroup","readTime","prefixPath","documentId"],yr=["canonicalId","targetId"],Ir=["targetId","path"],li=["path","targetId"],tr=["collectionId","parent"],Fr=["indexId","uid"],di=["uid","sequenceNumber"],Ei=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ii=["indexId","uid","orderedDocumentKey"],Rn=["userId","collectionPath","documentId"],ar=["userId","collectionPath","largestBatchId"],Fo=["userId","collectionGroup","largestBatchId"],zi=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oo=[...zi,"documentOverlays"],Qo=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ua=Qo,vo=[...ua,"indexConfiguration","indexState","indexEntries"],nr=vo,Eo=[...vo,"globals"];class xs extends zn{constructor(t,r){super(),this._e=t,this.currentSequenceNumber=r}}function Er(a,t){const r=Nt(a);return Yr.F(r._e,t)}function Vo(a){let t=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t++;return t}function Qs(a,t){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t(r,a[r])}function Rs(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}class Sr{constructor(t,r){this.comparator=t,this.root=r||Ci.EMPTY}insert(t,r){return new Sr(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(t){return new Sr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(0===o)return r.value;o<0?r=r.left:o>0&&(r=r.right)}return null}indexOf(t){let r=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(t,o.key);if(0===u)return r+o.left.size;u<0?o=o.left:(r+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,o)=>(t(r,o),!1))}toString(){const t=[];return this.inorderTraversal((r,o)=>(t.push(`${r}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Bi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Bi(this.root,t,this.comparator,!1)}getReverseIterator(){return new Bi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Bi(this.root,t,this.comparator,!0)}}class Bi{constructor(t,r,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!t.isEmpty();)if(d=r?o(t.key,r):1,r&&u&&(d*=-1),d<0)t=this.isReverse?t.left:t.right;else{if(0===d){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ci{constructor(t,r,o,u,d){this.key=t,this.value=r,this.color=o??Ci.RED,this.left=u??Ci.EMPTY,this.right=d??Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,o,u,d){return new Ci(t??this.key,r??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const d=o(t,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===d?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let o,u=this;if(r(t,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(t,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(t,u.key)){if(u.right.isEmpty())return Ci.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(t,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bt();const t=this.left.check();if(t!==this.right.check())throw bt();return t+(this.isRed()?0:1)}}Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1,Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw bt()}get value(){throw bt()}get color(){throw bt()}get left(){throw bt()}get right(){throw bt()}copy(t,r,o,u,d){return this}insert(t,r,o){return new Ci(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vr{constructor(t){this.comparator=t,this.data=new Sr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,o)=>(t(r),!1))}forEachInRange(t,r){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,t[1])>=0)return;r(u.key)}}forEachWhile(t,r){let o;for(o=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new fs(this.data.getIterator())}getIteratorFrom(t){return new fs(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(o=>{r=r.add(o)}),r}isEqual(t){if(!(t instanceof vr)||this.size!==t.size)return!1;const r=this.data.getIterator(),o=t.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new vr(this.comparator);return r.data=t,r}}class fs{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xs(a){return a.hasNext()?a.getNext():void 0}class Jr{constructor(t){this.fields=t,t.sort(xe.comparator)}static empty(){return new Jr([])}unionWith(t){let r=new vr(xe.comparator);for(const o of this.fields)r=r.add(o);for(const o of t)r=r.add(o);return new Jr(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Un(this.fields,t.fields,(r,o)=>r.isEqual(o))}}class Lo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class zr{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Lo("Invalid base64 string: "+d):d}}(t);return new zr(r)}static fromUint8Array(t){const r=function(u){let d="";for(let m=0;m<u.length;++m)d+=String.fromCharCode(u[m]);return d}(t);return new zr(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const o=new Uint8Array(r.length);for(let u=0;u<r.length;u++)o[u]=r.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ht(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}zr.EMPTY_BYTE_STRING=new zr("");const ni=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(a){if(ft(!!a),"string"==typeof a){let t=0;const r=ni.exec(a);if(ft(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),t=Number(u)}const o=new Date(a);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:cn(a.seconds),nanos:cn(a.nanos)}}function cn(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function oi(a){return"string"==typeof a?zr.fromBase64String(a):zr.fromUint8Array(a)}function ps(a){var t,r;return"server_timestamp"===(null===(r=((null===(t=a?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function ks(a){const t=a.mapValue.fields.__previous_value__;return ps(t)?ks(t):t}function gs(a){const t=ss(a.mapValue.fields.__local_write_time__.timestampValue);return new Xt(t.seconds,t.nanos)}class Ys{constructor(t,r,o,u,d,m,A,x,G){this.databaseId=t,this.appId=r,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=A,this.longPollingOptions=x,this.useFetchStreams=G}}class Ri{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new Ri("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Ri&&t.projectId===this.projectId&&t.database===this.database}}const es={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wi={nullValue:"NULL_VALUE"};function ji(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?ps(a)?4:Co(a)?9007199254740991:Ls(a)?10:11:bt()}function ts(a,t){if(a===t)return!0;const r=ji(a);if(r!==ji(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return gs(a).isEqual(gs(t));case 3:return function(u,d){if("string"==typeof u.timestampValue&&"string"==typeof d.timestampValue&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const m=ss(u.timestampValue),A=ss(d.timestampValue);return m.seconds===A.seconds&&m.nanos===A.nanos}(a,t);case 5:return a.stringValue===t.stringValue;case 6:return d=t,oi(a.bytesValue).isEqual(oi(d.bytesValue));case 7:return a.referenceValue===t.referenceValue;case 8:return function(u,d){return cn(u.geoPointValue.latitude)===cn(d.geoPointValue.latitude)&&cn(u.geoPointValue.longitude)===cn(d.geoPointValue.longitude)}(a,t);case 2:return function(u,d){if("integerValue"in u&&"integerValue"in d)return cn(u.integerValue)===cn(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const m=cn(u.doubleValue),A=cn(d.doubleValue);return m===A?Ie(m)===Ie(A):isNaN(m)&&isNaN(A)}return!1}(a,t);case 9:return Un(a.arrayValue.values||[],t.arrayValue.values||[],ts);case 10:case 11:return function(u,d){const m=u.mapValue.fields||{},A=d.mapValue.fields||{};if(Vo(m)!==Vo(A))return!1;for(const x in m)if(m.hasOwnProperty(x)&&(void 0===A[x]||!ts(m[x],A[x])))return!1;return!0}(a,t);default:return bt()}var d}function Fs(a,t){return void 0!==(a.values||[]).find(r=>ts(r,t))}function $i(a,t){if(a===t)return 0;const r=ji(a),o=ji(t);if(r!==o)return Ht(r,o);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ht(a.booleanValue,t.booleanValue);case 2:return function(d,m){const A=cn(d.integerValue||d.doubleValue),x=cn(m.integerValue||m.doubleValue);return A<x?-1:A>x?1:A===x?0:isNaN(A)?isNaN(x)?0:-1:1}(a,t);case 3:return Uo(a.timestampValue,t.timestampValue);case 4:return Uo(gs(a),gs(t));case 5:return Ht(a.stringValue,t.stringValue);case 6:return function(d,m){const A=oi(d),x=oi(m);return A.compareTo(x)}(a.bytesValue,t.bytesValue);case 7:return function(d,m){const A=d.split("/"),x=m.split("/");for(let G=0;G<A.length&&G<x.length;G++){const re=Ht(A[G],x[G]);if(0!==re)return re}return Ht(A.length,x.length)}(a.referenceValue,t.referenceValue);case 8:return function(d,m){const A=Ht(cn(d.latitude),cn(m.latitude));return 0!==A?A:Ht(cn(d.longitude),cn(m.longitude))}(a.geoPointValue,t.geoPointValue);case 9:return ns(a.arrayValue,t.arrayValue);case 10:return function(d,m){var A,x,G,re;const st=null===(A=(d.fields||{}).value)||void 0===A?void 0:A.arrayValue,jt=null===(x=(m.fields||{}).value)||void 0===x?void 0:x.arrayValue,Jt=Ht((null===(G=st?.values)||void 0===G?void 0:G.length)||0,(null===(re=jt?.values)||void 0===re?void 0:re.length)||0);return 0!==Jt?Jt:ns(st,jt)}(a.mapValue,t.mapValue);case 11:return function(d,m){if(d===es.mapValue&&m===es.mapValue)return 0;if(d===es.mapValue)return 1;if(m===es.mapValue)return-1;const A=d.fields||{},x=Object.keys(A),G=m.fields||{},re=Object.keys(G);x.sort(),re.sort();for(let pe=0;pe<x.length&&pe<re.length;++pe){const Re=Ht(x[pe],re[pe]);if(0!==Re)return Re;const st=$i(A[x[pe]],G[re[pe]]);if(0!==st)return st}return Ht(x.length,re.length)}(a.mapValue,t.mapValue);default:throw bt()}}function Uo(a,t){if("string"==typeof a&&"string"==typeof t&&a.length===t.length)return Ht(a,t);const r=ss(a),o=ss(t),u=Ht(r.seconds,o.seconds);return 0!==u?u:Ht(r.nanos,o.nanos)}function ns(a,t){const r=a.values||[],o=t.values||[];for(let u=0;u<r.length&&u<o.length;++u){const d=$i(r[u],o[u]);if(d)return d}return Ht(r.length,o.length)}function Oi(a){return Io(a)}function Io(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const o=ss(r);return`time(${o.seconds},${o.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?oi(a.bytesValue).toBase64():"referenceValue"in a?Te.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Io(d);return o+"]"}(a.arrayValue):"mapValue"in a?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Io(r.fields[m])}`;return u+"}"}(a.mapValue):bt()}function Hi(a,t){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${t.path.canonicalString()}`}}function ms(a){return!!a&&"integerValue"in a}function Vs(a){return!!a&&"arrayValue"in a}function Xo(a){return!!a&&"nullValue"in a}function Js(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Ki(a){return!!a&&"mapValue"in a}function Ls(a){var t,r;return"__vector__"===(null===(r=((null===(t=a?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function wi(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const t={mapValue:{fields:{}}};return Qs(a.mapValue.fields,(r,o)=>t.mapValue.fields[r]=wi(o)),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=wi(a.arrayValue.values[r]);return t}return Object.assign({},a)}function Co(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}const Yo={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Ti(a){return"nullValue"in a?Wi:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?Hi(Ri.empty(),Te.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?Ls(a)?Yo:{mapValue:{}}:bt()}function gr(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?Hi(Ri.empty(),Te.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?Yo:"mapValue"in a?Ls(a)?{mapValue:{}}:es:bt()}function Us(a,t){const r=$i(a.value,t.value);return 0!==r?r:a.inclusive&&!t.inclusive?-1:!a.inclusive&&t.inclusive?1:0}function da(a,t){const r=$i(a.value,t.value);return 0!==r?r:a.inclusive&&!t.inclusive?1:!a.inclusive&&t.inclusive?-1:0}class Zr{constructor(t){this.value=t}static empty(){return new Zr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let o=0;o<t.length-1;++o)if(r=(r.mapValue.fields||{})[t.get(o)],!Ki(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=wi(r)}setAll(t){let r=xe.emptyPath(),o={},u=[];t.forEach((m,A)=>{if(!r.isImmediateParentOf(A)){const x=this.getFieldsMap(r);this.applyChanges(x,o,u),o={},u=[],r=A.popLast()}m?o[A.lastSegment()]=wi(m):u.push(A.lastSegment())});const d=this.getFieldsMap(r);this.applyChanges(d,o,u)}delete(t){const r=this.field(t.popLast());Ki(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return ts(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let o=0;o<t.length;++o){let u=r.mapValue.fields[t.get(o)];Ki(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[t.get(o)]=u),r=u}return r.mapValue.fields}applyChanges(t,r,o){Qs(r,(u,d)=>t[u]=d);for(const u of o)delete t[u]}clone(){return new Zr(wi(this.value))}}function co(a){const t=[];return Qs(a.fields,(r,o)=>{const u=new xe([r]);if(Ki(o)){const d=co(o.mapValue).fields;if(0===d.length)t.push(u);else for(const m of d)t.push(u.child(m))}else t.push(u)}),new Jr(t)}class sr{constructor(t,r,o,u,d,m,A){this.key=t,this.documentType=r,this.version=o,this.readTime=u,this.createTime=d,this.data=m,this.documentState=A}static newInvalidDocument(t){return new sr(t,0,Yt.min(),Yt.min(),Yt.min(),Zr.empty(),0)}static newFoundDocument(t,r,o,u){return new sr(t,1,r,Yt.min(),o,u,0)}static newNoDocument(t,r){return new sr(t,2,r,Yt.min(),Yt.min(),Zr.empty(),0)}static newUnknownDocument(t,r){return new sr(t,3,r,Yt.min(),Yt.min(),Zr.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Yt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof sr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new sr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class us{constructor(t,r){this.position=t,this.inclusive=r}}function _s(a,t,r){let o=0;for(let u=0;u<a.position.length;u++){const d=t[u],m=a.position[u];if(o=d.field.isKeyField()?Te.comparator(Te.fromName(m.referenceValue),r.key):$i(m,r.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function wo(a,t){if(null===a)return null===t;if(null===t||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!ts(a.position[r],t.position[r]))return!1;return!0}class Fi{constructor(t,r="asc"){this.field=t,this.dir=r}}function z(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}class q{}class O extends q{constructor(t,r,o){super(),this.field=t,this.op=r,this.value=o}static create(t,r,o){return t.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(t,r,o):new Bo(t,r,o):"array-contains"===r?new fa(t,o):"in"===r?new Va(t,o):"not-in"===r?new La(t,o):"array-contains-any"===r?new eo(t,o):new O(t,r,o)}static createKeyFieldInFilter(t,r,o){return"in"===r?new ha(t,o):new ei(t,o)}matches(t){const r=t.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison($i(r,this.value)):null!==r&&ji(this.value)===ji(r)&&this.matchesComparison($i(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ee extends q{constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new ee(t,r)}matches(t){return be(this)?void 0===this.filters.find(r=>!r.matches(t)):void 0!==this.filters.find(r=>r.matches(t))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function be(a){return"and"===a.op}function un(a){return"or"===a.op}function Xn(a){return ys(a)&&be(a)}function ys(a){for(const t of a.filters)if(t instanceof ee)return!1;return!0}function Zs(a){if(a instanceof O)return a.field.canonicalString()+a.op.toString()+Oi(a.value);if(Xn(a))return a.filters.map(t=>Zs(t)).join(",");{const t=a.filters.map(r=>Zs(r)).join(",");return`${a.op}(${t})`}}function fi(a,t){return a instanceof O?(o=a,(u=t)instanceof O&&o.op===u.op&&o.field.isEqual(u.field)&&ts(o.value,u.value)):a instanceof ee?function(o,u){return u instanceof ee&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((d,m,A)=>d&&fi(m,u.filters[A]),!0)}(a,t):void bt();var o,u}function Ts(a,t){const r=a.filters.concat(t);return ee.create(r,a.op)}function Ta(a){return a instanceof O?`${(r=a).field.canonicalString()} ${r.op} ${Oi(r.value)}`:a instanceof ee?function(r){return r.op.toString()+" {"+r.getFilters().map(Ta).join(" ,")+"}"}(a):"Filter";var r}class Bo extends O{constructor(t,r,o){super(t,r,o),this.key=Te.fromName(o.referenceValue)}matches(t){const r=Te.comparator(t.key,this.key);return this.matchesComparison(r)}}class ha extends O{constructor(t,r){super(t,"in",r),this.keys=Da(0,r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class ei extends O{constructor(t,r){super(t,"not-in",r),this.keys=Da(0,r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function Da(a,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map(o=>Te.fromName(o.referenceValue))}class fa extends O{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Vs(r)&&Fs(r.arrayValue,this.value)}}class Va extends O{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return null!==r&&Fs(this.value.arrayValue,r)}}class La extends O{constructor(t,r){super(t,"not-in",r)}matches(t){if(Fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return null!==r&&!Fs(this.value.arrayValue,r)}}class eo extends O{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Vs(r)||!r.arrayValue.values)&&r.arrayValue.values.some(o=>Fs(this.value.arrayValue,o))}}class Ua{constructor(t,r=null,o=[],u=[],d=null,m=null,A=null){this.path=t,this.collectionGroup=r,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=A,this.ue=null}}function pa(a,t=null,r=[],o=[],u=null,d=null,m=null){return new Ua(a,t,r,o,u,d,m)}function jo(a){const t=Nt(a);if(null===t.ue){let r=t.path.canonicalString();null!==t.collectionGroup&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(o=>Zs(o)).join(","),r+="|ob:",r+=t.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),ve(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>Oi(o)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>Oi(o)).join(",")),t.ue=r}return t.ue}function To(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!z(a.orderBy[r],t.orderBy[r]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!fi(a.filters[r],t.filters[r]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!wo(a.startAt,t.startAt)&&wo(a.endAt,t.endAt)}function Aa(a){return Te.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function Jo(a,t){return a.filters.filter(r=>r instanceof O&&r.field.isEqual(t))}function Do(a,t,r){let o=Wi,u=!0;for(const d of Jo(a,t)){let m=Wi,A=!0;switch(d.op){case"<":case"<=":m=Ti(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,A=!1;break;case"!=":case"not-in":m=Wi}Us({value:o,inclusive:u},{value:m,inclusive:A})<0&&(o=m,u=A)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(t)){const m=r.position[d];Us({value:o,inclusive:u},{value:m,inclusive:r.inclusive})<0&&(o=m,u=r.inclusive);break}return{value:o,inclusive:u}}function cr(a,t,r){let o=es,u=!0;for(const d of Jo(a,t)){let m=es,A=!0;switch(d.op){case">=":case">":m=gr(d.value),A=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,A=!1;break;case"!=":case"not-in":m=es}da({value:o,inclusive:u},{value:m,inclusive:A})>0&&(o=m,u=A)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(t)){const m=r.position[d];da({value:o,inclusive:u},{value:m,inclusive:r.inclusive})>0&&(o=m,u=r.inclusive);break}return{value:o,inclusive:u}}class Wr{constructor(t,r=null,o=[],u=[],d=null,m="F",A=null,x=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=A,this.endAt=x,this.ce=null,this.le=null,this.he=null}}function ii(a,t,r,o,u,d,m,A){return new Wr(a,t,r,o,u,d,m,A)}function Ni(a){return new Wr(a)}function xi(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function ga(a){return null!==a.collectionGroup}function vs(a){const t=Nt(a);if(null===t.ce){t.ce=[];const r=new Set;for(const d of t.explicitOrderBy)t.ce.push(d),r.add(d.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let A=new vr(xe.comparator);return m.filters.forEach(x=>{x.getFlattenedFilters().forEach(G=>{G.isInequality()&&(A=A.add(G.field))})}),A})(t).forEach(d=>{r.has(d.canonicalString())||d.isKeyField()||t.ce.push(new Fi(d,o))}),r.has(xe.keyField().canonicalString())||t.ce.push(new Fi(xe.keyField(),o))}return t.ce}function qi(a){const t=Nt(a);return t.le||(t.le=function Tc(a,t){if("F"===a.limitType)return pa(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map(u=>new Fi(u.field,"desc"===u.dir?"asc":"desc"));const r=a.endAt?new us(a.endAt.position,a.endAt.inclusive):null,o=a.startAt?new us(a.startAt.position,a.startAt.inclusive):null;return pa(a.path,a.collectionGroup,t,a.filters,a.limit,r,o)}}(t,vs(a))),t.le}function Ao(a,t){const r=a.filters.concat([t]);return new Wr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function J(a,t,r){return new Wr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,r,a.startAt,a.endAt)}function I(a,t){return To(qi(a),qi(t))&&a.limitType===t.limitType}function T(a){return`${jo(qi(a))}|lt:${a.limitType}`}function V(a){return`Query(target=${function(r){let o=r.path.canonicalString();return null!==r.collectionGroup&&(o+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(o+=`, filters: [${r.filters.map(u=>Ta(u)).join(", ")}]`),ve(r.limit)||(o+=", limit: "+r.limit),r.orderBy.length>0&&(o+=`, orderBy: [${r.orderBy.map(u=>{return`${(m=u).field.canonicalString()} (${m.dir})`;var m}).join(", ")}]`),r.startAt&&(o+=", startAt: ",o+=r.startAt.inclusive?"b:":"a:",o+=r.startAt.position.map(u=>Oi(u)).join(",")),r.endAt&&(o+=", endAt: ",o+=r.endAt.inclusive?"a:":"b:",o+=r.endAt.position.map(u=>Oi(u)).join(",")),`Target(${o})`}(qi(a))}; limitType=${a.limitType})`}function X(a,t){return t.isFoundDocument()&&function(o,u){const d=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(d):Te.isDocumentKey(o.path)?o.path.isEqual(d):o.path.isImmediateParentOf(d)}(a,t)&&function(o,u){for(const d of vs(o))if(!d.field.isKeyField()&&null===u.data.field(d.field))return!1;return!0}(a,t)&&function(o,u){for(const d of o.filters)if(!d.matches(u))return!1;return!0}(a,t)&&(u=t,!((o=a).startAt&&!function(m,A,x){const G=_s(m,A,x);return m.inclusive?G<=0:G<0}(o.startAt,vs(o),u)||o.endAt&&!function(m,A,x){const G=_s(m,A,x);return m.inclusive?G>=0:G>0}(o.endAt,vs(o),u)));var o,u}function fe(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function Pe(a){return(t,r)=>{let o=!1;for(const u of vs(a)){const d=je(u,t,r);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function je(a,t,r){const o=a.field.isKeyField()?Te.comparator(t.key,r.key):function(d,m,A){const x=m.data.field(d),G=A.data.field(d);return null!==x&&null!==G?$i(x,G):bt()}(a.field,t,r);switch(a.dir){case"asc":return o;case"desc":return-1*o;default:return bt()}}class ut{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),o=this.inner[r];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,t))return d}has(t){return void 0!==this.get(t)}set(t,r){const o=this.mapKeyFn(t),u=this.inner[o];if(void 0===u)return this.inner[o]=[[t,r]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],t))return void(u[d]=[t,r]);u.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),o=this.inner[r];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return 1===o.length?delete this.inner[r]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(t){Qs(this.inner,(r,o)=>{for(const[u,d]of o)t(u,d)})}isEmpty(){return Rs(this.inner)}size(){return this.innerSize}}const Pt=new Sr(Te.comparator);function nn(){return Pt}const gn=new Sr(Te.comparator);function ur(...a){let t=gn;for(const r of a)t=t.insert(r.key,r);return t}function er(a){let t=gn;return a.forEach((r,o)=>t=t.insert(r,o.overlayedDocument)),t}function Dn(){return Vr()}function Wn(){return Vr()}function Vr(){return new ut(a=>a.toString(),(a,t)=>a.isEqual(t))}const Lr=new Sr(Te.comparator),pi=new vr(Te.comparator);function xn(...a){let t=pi;for(const r of a)t=t.add(r);return t}const os=new vr(Ht);function uo(){return os}function Os(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ie(t)?"-0":t}}function Di(a){return{integerValue:""+a}}function ls(a,t){return at(t)?Di(t):Os(a,t)}class lo{constructor(){this._=void 0}}function Zo(a,t,r){return a instanceof Es?function(u,d){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&ps(d)&&(d=ks(d)),d&&(m.fields.__previous_value__=d),{mapValue:m}}(r,t):a instanceof Bs?S(a,t):a instanceof H?N(a,t):function(u,d){const m=ds(u,d),A=_e(m)+_e(u.Pe);return ms(m)&&ms(u.Pe)?Di(A):Os(u.serializer,A)}(a,t)}function ma(a,t,r){return a instanceof Bs?S(a,t):a instanceof H?N(a,t):r}function ds(a,t){return a instanceof j?ms(o=t)||(d=o)&&"doubleValue"in d?t:{integerValue:0}:null;var o,d}class Es extends lo{}class Bs extends lo{constructor(t){super(),this.elements=t}}function S(a,t){const r=it(t);for(const o of a.elements)r.some(u=>ts(u,o))||r.push(o);return{arrayValue:{values:r}}}class H extends lo{constructor(t){super(),this.elements=t}}function N(a,t){let r=it(t);for(const o of a.elements)r=r.filter(u=>!ts(u,o));return{arrayValue:{values:r}}}class j extends lo{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function _e(a){return cn(a.integerValue||a.doubleValue)}function it(a){return Vs(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class xt{constructor(t,r){this.field=t,this.transform=r}}class Cr{constructor(t,r){this.version=t,this.transformResults=r}}class dn{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new dn}static exists(t){return new dn(void 0,t)}static updateTime(t){return new dn(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ur(a,t){return void 0!==a.updateTime?t.isFoundDocument()&&t.version.isEqual(a.updateTime):void 0===a.exists||a.exists===t.isFoundDocument()}class hr{}function fr(a,t){if(!a.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return a.isNoDocument()?new js(a.key,dn.none()):new _n(a.key,a.data,dn.none());{const r=a.data,o=Zr.empty();let u=new vr(xe.comparator);for(let d of t.fields)if(!u.has(d)){let m=r.field(d);null===m&&d.length>1&&(d=d.popLast(),m=r.field(d)),null===m?o.delete(d):o.set(d,m),u=u.add(d)}return new pr(a.key,o,new Jr(u.toArray()),dn.none())}}function wr(a,t,r){a instanceof _n?function(u,d,m){const A=u.value.clone(),x=gi(u.fieldTransforms,d,m.transformResults);A.setAll(x),d.convertToFoundDocument(m.version,A).setHasCommittedMutations()}(a,t,r):a instanceof pr?function(u,d,m){if(!Ur(u.precondition,d))return void d.convertToUnknownDocument(m.version);const A=gi(u.fieldTransforms,d,m.transformResults),x=d.data;x.setAll(Ai(u)),x.setAll(A),d.convertToFoundDocument(m.version,x).setHasCommittedMutations()}(a,t,r):t.convertToNoDocument(r.version).setHasCommittedMutations()}function Tr(a,t,r,o){return a instanceof _n?function(d,m,A,x){if(!Ur(d.precondition,m))return A;const G=d.value.clone(),re=rs(d.fieldTransforms,x,m);return G.setAll(re),m.convertToFoundDocument(m.version,G).setHasLocalMutations(),null}(a,t,r,o):a instanceof pr?function(d,m,A,x){if(!Ur(d.precondition,m))return A;const G=rs(d.fieldTransforms,x,m),re=m.data;return re.setAll(Ai(d)),re.setAll(G),m.convertToFoundDocument(m.version,re).setHasLocalMutations(),null===A?null:A.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(pe=>pe.field))}(a,t,r,o):(A=r,Ur(a.precondition,m=t)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):A);var m,A}function xr(a,t){let r=null;for(const o of a.fieldTransforms){const u=t.data.field(o.field),d=ds(o.transform,u||null);null!=d&&(null===r&&(r=Zr.empty()),r.set(o.field,d))}return r||null}function Qt(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&(u=t.fieldTransforms,!!(void 0===(o=a.fieldTransforms)&&void 0===u||o&&u&&Un(o,u,(d,m)=>function on(a,t){return a.field.isEqual(t.field)&&(u=t.transform,(o=a.transform)instanceof Bs&&u instanceof Bs||o instanceof H&&u instanceof H?Un(o.elements,u.elements,ts):o instanceof j&&u instanceof j?ts(o.Pe,u.Pe):o instanceof Es&&u instanceof Es);var o,u}(d,m))))&&(0===a.type?a.value.isEqual(t.value):1!==a.type||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask));var o,u}class _n extends hr{constructor(t,r,o,u=[]){super(),this.key=t,this.value=r,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class pr extends hr{constructor(t,r,o,u,d=[]){super(),this.key=t,this.data=r,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function Ai(a){const t=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const o=a.data.field(r);t.set(r,o)}}),t}function gi(a,t,r){const o=new Map;ft(a.length===r.length);for(let u=0;u<r.length;u++){const d=a[u],m=d.transform,A=t.data.field(d.field);o.set(d.field,ma(m,A,r[u]))}return o}function rs(a,t,r){const o=new Map;for(const u of a){const d=u.transform,m=r.data.field(u.field);o.set(u.field,Zo(d,m,t))}return o}class js extends hr{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mi extends hr{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Kr{constructor(t,r,o,u){this.batchId=t,this.localWriteTime=r,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(t,r){const o=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(t.key)&&wr(d,t,o[u])}}applyToLocalView(t,r){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(r=Tr(o,t,r,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(r=Tr(o,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const o=Wn();return this.mutations.forEach(u=>{const d=t.get(u.key),m=d.overlayedDocument;let A=this.applyToLocalView(m,d.mutatedFields);A=r.has(u.key)?null:A;const x=fr(m,A);null!==x&&o.set(u.key,x),m.isValidDocument()||m.convertToNoDocument(Yt.min())}),o}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),xn())}isEqual(t){return this.batchId===t.batchId&&Un(this.mutations,t.mutations,(r,o)=>Qt(r,o))&&Un(this.baseMutations,t.baseMutations,(r,o)=>Qt(r,o))}}class ho{constructor(t,r,o,u){this.batch=t,this.commitVersion=r,this.mutationResults=o,this.docVersions=u}static from(t,r,o){ft(t.mutations.length===o.length);let u=function(){return Lr}();const d=t.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new ho(t,r,o,u)}}class Yn{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class El{constructor(t,r){this.count=t,this.unchangedNames=r}}var ai,jn;function Dc(a){switch(a){default:return bt();case tt.CANCELLED:case tt.UNKNOWN:case tt.DEADLINE_EXCEEDED:case tt.RESOURCE_EXHAUSTED:case tt.INTERNAL:case tt.UNAVAILABLE:case tt.UNAUTHENTICATED:return!1;case tt.INVALID_ARGUMENT:case tt.NOT_FOUND:case tt.ALREADY_EXISTS:case tt.PERMISSION_DENIED:case tt.FAILED_PRECONDITION:case tt.ABORTED:case tt.OUT_OF_RANGE:case tt.UNIMPLEMENTED:case tt.DATA_LOSS:return!0}}function tc(a){if(void 0===a)return yn("GRPC error has no .code"),tt.UNKNOWN;switch(a){case ai.OK:return tt.OK;case ai.CANCELLED:return tt.CANCELLED;case ai.UNKNOWN:return tt.UNKNOWN;case ai.DEADLINE_EXCEEDED:return tt.DEADLINE_EXCEEDED;case ai.RESOURCE_EXHAUSTED:return tt.RESOURCE_EXHAUSTED;case ai.INTERNAL:return tt.INTERNAL;case ai.UNAVAILABLE:return tt.UNAVAILABLE;case ai.UNAUTHENTICATED:return tt.UNAUTHENTICATED;case ai.INVALID_ARGUMENT:return tt.INVALID_ARGUMENT;case ai.NOT_FOUND:return tt.NOT_FOUND;case ai.ALREADY_EXISTS:return tt.ALREADY_EXISTS;case ai.PERMISSION_DENIED:return tt.PERMISSION_DENIED;case ai.FAILED_PRECONDITION:return tt.FAILED_PRECONDITION;case ai.ABORTED:return tt.ABORTED;case ai.OUT_OF_RANGE:return tt.OUT_OF_RANGE;case ai.UNIMPLEMENTED:return tt.UNIMPLEMENTED;case ai.DATA_LOSS:return tt.DATA_LOSS;default:return bt()}}(jn=ai||(ai={}))[jn.OK=0]="OK",jn[jn.CANCELLED=1]="CANCELLED",jn[jn.UNKNOWN=2]="UNKNOWN",jn[jn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jn[jn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jn[jn.NOT_FOUND=5]="NOT_FOUND",jn[jn.ALREADY_EXISTS=6]="ALREADY_EXISTS",jn[jn.PERMISSION_DENIED=7]="PERMISSION_DENIED",jn[jn.UNAUTHENTICATED=16]="UNAUTHENTICATED",jn[jn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jn[jn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jn[jn.ABORTED=10]="ABORTED",jn[jn.OUT_OF_RANGE=11]="OUT_OF_RANGE",jn[jn.UNIMPLEMENTED=12]="UNIMPLEMENTED",jn[jn.INTERNAL=13]="INTERNAL",jn[jn.UNAVAILABLE=14]="UNAVAILABLE",jn[jn.DATA_LOSS=15]="DATA_LOSS";function _a(){return new TextEncoder}const Il=new pn([4294967295,4294967295],0);function ea(a){const t=_a().encode(a),r=new Pn;return r.update(t),new Uint8Array(r.digest())}function nc(a){const t=new DataView(a.buffer),r=t.getUint32(0,!0),o=t.getUint32(4,!0),u=t.getUint32(8,!0),d=t.getUint32(12,!0);return[new pn([r,o],0),new pn([u,d],0)]}class Is{constructor(t,r,o){if(this.bitmap=t,this.padding=r,this.hashCount=o,r<0||r>=8)throw new Kn(`Invalid padding: ${r}`);if(o<0)throw new Kn(`Invalid hash count: ${o}`);if(t.length>0&&0===this.hashCount)throw new Kn(`Invalid hash count: ${o}`);if(0===t.length&&0!==r)throw new Kn(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*t.length-r,this.Te=pn.fromNumber(this.Ie)}Ee(t,r,o){let u=t.add(r.multiply(pn.fromNumber(o)));return 1===u.compare(Il)&&(u=new pn([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const r=ea(t),[o,u]=nc(r);for(let d=0;d<this.hashCount;d++){const m=this.Ee(o,u,d);if(!this.de(m))return!1}return!0}static create(t,r,o){const u=t%8==0?0:8-t%8,d=new Uint8Array(Math.ceil(t/8)),m=new Is(d,u,r);return o.forEach(A=>m.insert(A)),m}insert(t){if(0===this.Ie)return;const r=ea(t),[o,u]=nc(r);for(let d=0;d<this.hashCount;d++){const m=this.Ee(o,u,d);this.Ae(m)}}Ae(t){const r=Math.floor(t/8);this.bitmap[r]|=1<<t%8}}class Kn extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rc{constructor(t,r,o,u,d){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(t,r,o){const u=new Map;return u.set(t,_i.createSynthesizedTargetChangeForCurrentChange(t,r,o)),new rc(Yt.min(),u,new Sr(Ht),nn(),xn())}}class _i{constructor(t,r,o,u,d){this.resumeToken=t,this.current=r,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(t,r,o){return new _i(o,r,xn(),xn(),xn())}}class bo{constructor(t,r,o,u){this.Re=t,this.removedTargetIds=r,this.key=o,this.Ve=u}}class ba{constructor(t,r){this.targetId=t,this.me=r}}class Sa{constructor(t,r,o=zr.EMPTY_BYTE_STRING,u=null){this.state=t,this.targetIds=r,this.resumeToken=o,this.cause=u}}class bi{constructor(){this.fe=0,this.ge=As(),this.pe=zr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=xn(),r=xn(),o=xn();return this.ge.forEach((u,d)=>{switch(d){case 0:t=t.add(u);break;case 2:r=r.add(u);break;case 1:o=o.add(u);break;default:bt()}}),new _i(this.pe,this.ye,t,r,o)}Ce(){this.we=!1,this.ge=As()}Fe(t,r){this.we=!0,this.ge=this.ge.insert(t,r)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ft(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Su{constructor(t){this.Le=t,this.Be=new Map,this.ke=nn(),this.qe=Ds(),this.Qe=new Sr(Ht)}Ke(t){for(const r of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(r,t.Ve):this.Ue(r,t.key,t.Ve);for(const r of t.removedTargetIds)this.Ue(r,t.key,t.Ve)}We(t){this.forEachTarget(t,r=>{const o=this.Ge(r);switch(t.state){case 0:this.ze(r)&&o.De(t.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(t.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(o.Ne(),o.De(t.resumeToken));break;case 4:this.ze(r)&&(this.je(r),o.De(t.resumeToken));break;default:bt()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.Be.forEach((o,u)=>{this.ze(u)&&r(u)})}He(t){const r=t.targetId,o=t.me.count,u=this.Je(r);if(u){const d=u.target;if(Aa(d))if(0===o){const m=new Te(d.path);this.Ue(r,m,sr.newNoDocument(m,Yt.min()))}else ft(1===o);else{const m=this.Ye(r);if(m!==o){const A=this.Ze(t),x=A?this.Xe(A,t,m):1;0!==x&&(this.je(r),this.Qe=this.Qe.insert(r,2===x?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(t){const r=t.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:d=0}=r;let m,A;try{m=oi(o).toUint8Array()}catch(x){if(x instanceof Lo)return Gn("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{A=new Is(m,u,d)}catch(x){return Gn(x instanceof Kn?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return 0===A.Ie?null:A}Xe(t,r,o){return r.me.count===o-this.nt(t,r.targetId)?0:2}nt(t,r){const o=this.Le.getRemoteKeysForTarget(r);let u=0;return o.forEach(d=>{const m=this.Le.tt(),A=`projects/${m.projectId}/databases/${m.database}/documents/${d.path.canonicalString()}`;t.mightContain(A)||(this.Ue(r,d,null),u++)}),u}rt(t){const r=new Map;this.Be.forEach((d,m)=>{const A=this.Je(m);if(A){if(d.current&&Aa(A.target)){const x=new Te(A.target.path);null!==this.ke.get(x)||this.it(m,x)||this.Ue(m,x,sr.newNoDocument(x,t))}d.be&&(r.set(m,d.ve()),d.Ce())}});let o=xn();this.qe.forEach((d,m)=>{let A=!0;m.forEachWhile(x=>{const G=this.Je(x);return!G||"TargetPurposeLimboResolution"===G.purpose||(A=!1,!1)}),A&&(o=o.add(d))}),this.ke.forEach((d,m)=>m.setReadTime(t));const u=new rc(t,r,this.Qe,this.ke,o);return this.ke=nn(),this.qe=Ds(),this.Qe=new Sr(Ht),u}$e(t,r){if(!this.ze(t))return;const o=this.it(t,r.key)?2:0;this.Ge(t).Fe(r.key,o),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(t))}Ue(t,r,o){if(!this.ze(t))return;const u=this.Ge(t);this.it(t,r)?u.Fe(r,1):u.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(t)),o&&(this.ke=this.ke.insert(r,o))}removeTarget(t){this.Be.delete(t)}Ye(t){const r=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let r=this.Be.get(t);return r||(r=new bi,this.Be.set(t,r)),r}st(t){let r=this.qe.get(t);return r||(r=new vr(Ht),this.qe=this.qe.insert(t,r)),r}ze(t){const r=null!==this.Je(t);return r||rt("WatchChangeAggregator","Detected inactive target",t),r}Je(t){const r=this.Be.get(t);return r&&r.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new bi),this.Le.getRemoteKeysForTarget(t).forEach(r=>{this.Ue(t,r,null)})}it(t,r){return this.Le.getRemoteKeysForTarget(t).has(r)}}function Ds(){return new Sr(Te.comparator)}function As(){return new Sr(Te.comparator)}const Kc={asc:"ASCENDING",desc:"DESCENDING"},ta={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qc={and:"AND",or:"OR"};class to{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Ba(a,t){return a.useProto3Json||ve(t)?t:{value:t}}function ic(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qc(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function Pu(a,t){return ic(a,t.toTimestamp())}function ki(a){return ft(!!a),Yt.fromTimestamp(function(r){const o=ss(r);return new Xt(o.seconds,o.nanos)}(a))}function Mu(a,t){return ja(a,t).canonicalString()}function ja(a,t){const r=(u=a,new Mn(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===t?r:r.child(t)}function Cl(a){const t=Mn.fromString(a);return ft(na(t)),t}function Xc(a,t){return Mu(a.databaseId,t.path)}function ya(a,t){const r=Cl(t);if(r.get(1)!==a.databaseId.projectId)throw new Rt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Rt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new Te(Ed(r))}function Yh(a,t){return Mu(a.databaseId,t)}function wl(a){const t=Cl(a);return 4===t.length?Mn.emptyPath():Ed(t)}function Ru(a){return new Mn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Ed(a){return ft(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function Jh(a,t,r){return{name:Xc(a,t),fields:r.value.mapValue.fields}}function Zh(a,t,r){const o=ya(a,t.name),u=ki(t.updateTime),d=t.createTime?ki(t.createTime):Yt.min(),m=new Zr({mapValue:{fields:t.fields}}),A=sr.newFoundDocument(o,u,d,m);return r&&A.setHasCommittedMutations(),r?A.setHasCommittedMutations():A}function Ou(a,t){let r;if(t instanceof _n)r={update:Jh(a,t.key,t.value)};else if(t instanceof js)r={delete:Xc(a,t.key)};else if(t instanceof pr)r={update:Jh(a,t.key,t.data),updateMask:Ac(t.fieldMask)};else{if(!(t instanceof mi))return bt();r={verify:Xc(a,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(o=>function(d,m){const A=m.transform;if(A instanceof Es)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(A instanceof Bs)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:A.elements}};if(A instanceof H)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:A.elements}};if(A instanceof j)return{fieldPath:m.field.canonicalString(),increment:A.Pe};throw bt()}(0,o))),t.precondition.isNone||(r.currentDocument=void 0!==(d=t.precondition).updateTime?{updateTime:Pu(a,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:bt()),r;var d}function Nu(a,t){const r=t.currentDocument?void 0!==(d=t.currentDocument).updateTime?dn.updateTime(ki(d.updateTime)):void 0!==d.exists?dn.exists(d.exists):dn.none():dn.none(),o=t.updateTransforms?t.updateTransforms.map(u=>function(m,A){let x=null;"setToServerValue"in A?(ft("REQUEST_TIME"===A.setToServerValue),x=new Es):"appendMissingElements"in A?x=new Bs(A.appendMissingElements.values||[]):"removeAllFromArray"in A?x=new H(A.removeAllFromArray.values||[]):"increment"in A?x=new j(m,A.increment):bt();const G=xe.fromServerFormat(A.fieldPath);return new xt(G,x)}(a,u)):[];var d;if(t.update){const u=ya(a,t.update.name),d=new Zr({mapValue:{fields:t.update.fields}});if(t.updateMask){const m=new Jr((t.updateMask.fieldPaths||[]).map(re=>xe.fromServerFormat(re)));return new pr(u,d,m,r,o)}return new _n(u,d,r,o)}if(t.delete){const u=ya(a,t.delete);return new js(u,r)}if(t.verify){const u=ya(a,t.verify);return new mi(u,r)}return bt()}function P(a,t){return{documents:[Yh(a,t.path)]}}function w(a,t){const r={structuredQuery:{}},o=t.path;let u;null!==t.collectionGroup?(u=o,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(u=o.popLast(),r.structuredQuery.from=[{collectionId:o.lastSegment()}]),r.parent=Yh(a,u);const d=function(G){if(0!==G.length)return Vi(ee.create(G,"and"))}(t.filters);d&&(r.structuredQuery.where=d);const m=function(G){if(0!==G.length)return G.map(re=>{return{field:Jn((Re=re).field),direction:It(Re.dir)};var Re})}(t.orderBy);m&&(r.structuredQuery.orderBy=m);const A=Ba(a,t.limit);return null!==A&&(r.structuredQuery.limit=A),t.startAt&&(r.structuredQuery.startAt={before:(G=t.startAt).inclusive,values:G.position}),t.endAt&&(r.structuredQuery.endAt=function(G){return{before:!G.inclusive,values:G.position}}(t.endAt)),{_t:r,parent:u};var G}function $(a){let t=wl(a.parent);const r=a.structuredQuery,o=r.from?r.from.length:0;let u=null;if(o>0){ft(1===o);const re=r.from[0];re.allDescendants?u=re.collectionId:t=t.child(re.collectionId)}let d=[];r.where&&(d=function(pe){const Re=De(pe);return Re instanceof ee&&Xn(Re)?Re.getFilters():[Re]}(r.where));let m=[];r.orderBy&&(m=r.orderBy.map(Re=>{return new Fi(lr((jt=Re).field),function(Kt){switch(Kt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(jt.direction));var jt}));let A=null;r.limit&&(A=function(pe){let Re;return Re="object"==typeof pe?pe.value:pe,ve(Re)?null:Re}(r.limit));let x=null;var pe;r.startAt&&(x=new us((pe=r.startAt).values||[],!!pe.before));let G=null;return r.endAt&&(G=function(pe){return new us(pe.values||[],!pe.before)}(r.endAt)),ii(t,u,m,d,A,"F",x,G)}function De(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const o=lr(r.unaryFilter.field);return O.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=lr(r.unaryFilter.field);return O.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=lr(r.unaryFilter.field);return O.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=lr(r.unaryFilter.field);return O.create(m,"!=",{nullValue:"NULL_VALUE"});default:return bt()}}(a):void 0!==a.fieldFilter?O.create(lr((r=a).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bt()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return ee.create(r.compositeFilter.filters.map(o=>De(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return bt()}}(r.compositeFilter.op))}(a):bt();var r}function It(a){return Kc[a]}function lt(a){return ta[a]}function hn(a){return qc[a]}function Jn(a){return{fieldPath:a.canonicalString()}}function lr(a){return xe.fromServerFormat(a.fieldPath)}function Vi(a){return a instanceof O?function(r){if("=="===r.op){if(Js(r.value))return{unaryFilter:{field:Jn(r.field),op:"IS_NAN"}};if(Xo(r.value))return{unaryFilter:{field:Jn(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(Js(r.value))return{unaryFilter:{field:Jn(r.field),op:"IS_NOT_NAN"}};if(Xo(r.value))return{unaryFilter:{field:Jn(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jn(r.field),op:lt(r.op),value:r.value}}}(a):a instanceof ee?function(r){const o=r.getFilters().map(u=>Vi(u));return 1===o.length?o[0]:{compositeFilter:{op:hn(r.op),filters:o}}}(a):bt()}function Ac(a){const t=[];return a.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function na(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class fo{constructor(t,r,o,u,d=Yt.min(),m=Yt.min(),A=zr.EMPTY_BYTE_STRING,x=null){this.target=t,this.targetId=r,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=A,this.expectedCount=x}withSequenceNumber(t){return new fo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class $s{constructor(t){this.ct=t}}function xu(a,t){const r=t.key,o={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:ku(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())o.document={name:Xc(d=a.ct,(m=t).key),fields:m.data.value.mapValue.fields,updateTime:ic(d,m.version.toTimestamp()),createTime:ic(d,m.createTime.toTimestamp())};else if(t.isNoDocument())o.noDocument={path:r.path.toArray(),readTime:$a(t.version)};else{if(!t.isUnknownDocument())return bt();o.unknownDocument={path:r.path.toArray(),version:$a(t.version)}}var d,m;return o}function ku(a){const t=a.toTimestamp();return[t.seconds,t.nanoseconds]}function $a(a){const t=a.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Yc(a){const t=new Xt(a.seconds,a.nanoseconds);return Yt.fromTimestamp(t)}function Pr(a,t){const r=(t.baseMutations||[]).map(d=>Nu(a.ct,d));for(let d=0;d<t.mutations.length-1;++d)d+1<t.mutations.length&&void 0!==t.mutations[d+1].transform&&(t.mutations[d].updateTransforms=t.mutations[d+1].transform.fieldTransforms,t.mutations.splice(d+1,1),++d);const o=t.mutations.map(d=>Nu(a.ct,d)),u=Xt.fromMillis(t.localWriteTimeMs);return new Kr(t.batchId,u,r,o)}function Ha(a){const t=Yc(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?Yc(a.lastLimboFreeSnapshotVersion):Yt.min();let o;return o=void 0!==a.query.documents?(ft(1===(d=a.query).documents.length),qi(Ni(wl(d.documents[0])))):function(d){return qi($(d))}(a.query),new fo(o,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,t,r,zr.fromBase64String(a.resumeToken));var d}function Jc(a,t){const r=$a(t.snapshotVersion),o=$a(t.lastLimboFreeSnapshotVersion);let u;u=Aa(t.target)?P(a.ct,t.target):w(a.ct,t.target)._t;const d=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:jo(t.target),readTime:r,resumeToken:d,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Hs(a){const t=$({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?J(t,t.limit,"L"):t}function Id(a,t){return new Yn(t.largestBatchId,Nu(a.ct,t.overlayMutation))}function sc(a,t){const r=t.path.lastSegment();return[a,Ye(t.path.popLast()),r]}function oc(a,t,r,o){return{indexId:a,uid:t,sequenceNumber:r,readTime:$a(o.readTime),documentKey:Ye(o.documentKey.path),largestBatchId:o.largestBatchId}}class zo{getBundleMetadata(t,r){return ef(t).get(r).next(o=>{if(o)return{id:(d=o).bundleId,createTime:Yc(d.createTime),version:d.version};var d})}saveBundleMetadata(t,r){return ef(t).put({bundleId:(u=r).id,createTime:$a(ki(u.createTime)),version:u.version});var u}getNamedQuery(t,r){return Zc(t).get(r).next(o=>{if(o)return{name:(d=o).name,query:Hs(d.bundledQuery),readTime:Yc(d.readTime)};var d})}saveNamedQuery(t,r){return Zc(t).put({name:(u=r).name,readTime:$a(ki(u.readTime)),bundledQuery:u.bundledQuery});var u}}function ef(a){return Er(a,"bundles")}function Zc(a){return Er(a,"namedQueries")}class Dl{constructor(t,r){this.serializer=t,this.userId=r}static lt(t,r){return new Dl(t,r.uid||"")}getOverlay(t,r){return no(t).get(sc(this.userId,r)).next(o=>o?Id(this.serializer,o):null)}getOverlays(t,r){const o=Dn();return Oe.forEach(r,u=>this.getOverlay(t,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(t,r,o){const u=[];return o.forEach((d,m)=>{const A=new Yn(r,m);u.push(this.ht(t,A))}),Oe.waitFor(u)}removeOverlaysForBatchId(t,r,o){const u=new Set;r.forEach(m=>u.add(Ye(m.getCollectionPath())));const d=[];return u.forEach(m=>{const A=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(no(t).j("collectionPathOverlayIndex",A))}),Oe.waitFor(d)}getOverlaysForCollection(t,r,o){const u=Dn(),d=Ye(r),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return no(t).U("collectionPathOverlayIndex",m).next(A=>{for(const x of A){const G=Id(this.serializer,x);u.set(G.getKey(),G)}return u})}getOverlaysForCollectionGroup(t,r,o,u){const d=Dn();let m;const A=IDBKeyRange.bound([this.userId,r,o],[this.userId,r,Number.POSITIVE_INFINITY],!0);return no(t).J({index:"collectionGroupOverlayIndex",range:A},(x,G,re)=>{const pe=Id(this.serializer,G);d.size()<u||pe.largestBatchId===m?(d.set(pe.getKey(),pe),m=pe.largestBatchId):re.done()}).next(()=>d)}ht(t,r){return no(t).put(function(u,d,m){const[A,x,G]=sc(d,m.mutation.key);return{userId:d,collectionPath:x,documentId:G,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Ou(u.ct,m.mutation)}}(this.serializer,this.userId,r))}}function no(a){return Er(a,"documentOverlays")}class tf{Pt(t){return Er(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(r=>{const o=r?.value;return o?zr.fromUint8Array(o):zr.EMPTY_BYTE_STRING})}setSessionToken(t,r){return this.Pt(t).put({name:"sessionToken",value:r.toUint8Array()})}}class Ga{constructor(){}It(t,r){this.Tt(t,r),r.Et()}Tt(t,r){if("nullValue"in t)this.dt(r,5);else if("booleanValue"in t)this.dt(r,10),r.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(r,15),r.At(cn(t.integerValue));else if("doubleValue"in t){const o=cn(t.doubleValue);isNaN(o)?this.dt(r,13):(this.dt(r,15),Ie(o)?r.At(0):r.At(o))}else if("timestampValue"in t){let o=t.timestampValue;this.dt(r,20),"string"==typeof o&&(o=ss(o)),r.Rt(`${o.seconds||""}`),r.At(o.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,r),this.ft(r);else if("bytesValue"in t)this.dt(r,30),r.gt(oi(t.bytesValue)),this.ft(r);else if("referenceValue"in t)this.yt(t.referenceValue,r);else if("geoPointValue"in t){const o=t.geoPointValue;this.dt(r,45),r.At(o.latitude||0),r.At(o.longitude||0)}else"mapValue"in t?Co(t)?this.dt(r,Number.MAX_SAFE_INTEGER):Ls(t)?this.wt(t.mapValue,r):(this.St(t.mapValue,r),this.ft(r)):"arrayValue"in t?(this.bt(t.arrayValue,r),this.ft(r)):bt()}Vt(t,r){this.dt(r,25),this.Dt(t,r)}Dt(t,r){r.Rt(t)}St(t,r){const o=t.fields||{};this.dt(r,55);for(const u of Object.keys(o))this.Vt(u,r),this.Tt(o[u],r)}wt(t,r){var o,u;const d=t.fields||{};this.dt(r,53);const m="value",A=(null===(u=null===(o=d[m].arrayValue)||void 0===o?void 0:o.values)||void 0===u?void 0:u.length)||0;this.dt(r,15),r.At(cn(A)),this.Vt(m,r),this.Tt(d[m],r)}bt(t,r){const o=t.values||[];this.dt(r,50);for(const u of o)this.Tt(u,r)}yt(t,r){this.dt(r,37),Te.fromName(t).path.forEach(o=>{this.dt(r,60),this.Dt(o,r)})}dt(t,r){t.At(r)}ft(t){t.At(2)}}function Al(a){if(0===a)return 8;let t=0;return!(a>>4)&&(t+=4,a<<=4),!(a>>6)&&(t+=2,a<<=2),!(a>>7)&&(t+=1),t}function bl(a){const t=64-function(o){let u=0;for(let d=0;d<8;++d){const m=Al(255&o[d]);if(u+=m,8!==m)break}return u}(a);return Math.ceil(t/8)}Ga.vt=new Ga;class bc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){const r=t[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Ft(o.value),o=r.next();this.Mt()}xt(t){const r=t[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Ot(o.value),o=r.next();this.Nt()}Lt(t){for(const r of t){const o=r.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=r.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Bt(t){for(const r of t){const o=r.charCodeAt(0);if(o<128)this.Ot(o);else if(o<2048)this.Ot(960|o>>>6),this.Ot(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|o>>>12),this.Ot(128|63&o>>>6),this.Ot(128|63&o);else{const u=r.codePointAt(0);this.Ot(240|u>>>18),this.Ot(128|63&u>>>12),this.Ot(128|63&u>>>6),this.Ot(128|63&u)}}this.Nt()}kt(t){const r=this.qt(t),o=bl(r);this.Qt(1+o),this.buffer[this.position++]=255&o;for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=255&r[u]}Kt(t){const r=this.qt(t),o=bl(r);this.Qt(1+o),this.buffer[this.position++]=~(255&o);for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){const r=function(d){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,d,!1),new Uint8Array(m.buffer)}(t),o=!!(128&r[0]);r[0]^=o?255:128;for(let u=1;u<r.length;++u)r[u]^=o?255:0;return r}Ft(t){const r=255&t;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(t){const r=255&t;0===r?(this.Gt(0),this.Gt(255)):255===r?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){const r=t+this.position;if(r<=this.buffer.length)return;let o=2*this.buffer.length;o<r&&(o=r);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Fu{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}}class Sl{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}}class za{constructor(){this.jt=new bc,this.Ht=new Fu(this.jt),this.Jt=new Sl(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return 0===t?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class po{constructor(t,r,o,u){this.indexId=t,this.documentKey=r,this.arrayValue=o,this.directionalValue=u}Zt(){const t=this.directionalValue.length,r=0===t||255===this.directionalValue[t-1]?t+1:t,o=new Uint8Array(r);return o.set(this.directionalValue,0),r!==t?o.set([0],this.directionalValue.length):++o[o.length-1],new po(this.indexId,this.documentKey,this.arrayValue,o)}}function Hn(a,t){let r=a.indexId-t.indexId;return 0!==r?r:(r=Cd(a.arrayValue,t.arrayValue),0!==r?r:(r=Cd(a.directionalValue,t.directionalValue),0!==r?r:Te.comparator(a.documentKey,t.documentKey)))}function Cd(a,t){for(let r=0;r<a.length&&r<t.length;++r){const o=a[r]-t[r];if(0!==o)return o}return a.length-t.length}class nf{constructor(t){this.Xt=new vr((r,o)=>xe.comparator(r.field,o.field)),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(const r of t.filters){const o=r;o.isInequality()?this.Xt=this.Xt.add(o):this.tn.push(o)}}get nn(){return this.Xt.size>1}rn(t){if(ft(t.collectionGroup===this.collectionId),this.nn)return!1;const r=Ke(t);if(void 0!==r&&!this.sn(r))return!1;const o=St(t);let u=new Set,d=0,m=0;for(;d<o.length&&this.sn(o[d]);++d)u=u.add(o[d].fieldPath.canonicalString());if(d===o.length)return!0;if(this.Xt.size>0){const A=this.Xt.getIterator().getNext();if(!u.has(A.field.canonicalString())){const x=o[d];if(!this.on(A,x)||!this._n(this.en[m++],x))return!1}++d}for(;d<o.length;++d)if(m>=this.en.length||!this._n(this.en[m++],o[d]))return!1;return!0}an(){if(this.nn)return null;let t=new vr(xe.comparator);const r=[];for(const o of this.tn)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)r.push(new Q(o.field,2));else{if(t.has(o.field))continue;t=t.add(o.field),r.push(new Q(o.field,0))}for(const o of this.en)o.field.isKeyField()||t.has(o.field)||(t=t.add(o.field),r.push(new Q(o.field,"asc"===o.dir?0:1)));return new we(we.UNKNOWN_ID,this.collectionId,r,oe.empty())}sn(t){for(const r of this.tn)if(this.on(r,t))return!0;return!1}on(t,r){return!(void 0===t||!t.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===t.op||"array-contains-any"===t.op)}_n(t,r){return!!t.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===t.dir||1===r.kind&&"desc"===t.dir)}}function wd(a){var t,r;if(ft(a instanceof O||a instanceof ee),a instanceof O){if(a instanceof Va){const u=(null===(r=null===(t=a.value.arrayValue)||void 0===t?void 0:t.values)||void 0===r?void 0:r.map(d=>O.create(a.field,"==",d)))||[];return ee.create(u,"or")}return a}const o=a.filters.map(u=>wd(u));return ee.create(o,a.op)}function rf(a){if(0===a.getFilters().length)return[];const t=Dd(wd(a));return ft(Wa(t)),Td(t)||Pl(t)?[t]:t.getFilters()}function Td(a){return a instanceof O}function Pl(a){return a instanceof ee&&Xn(a)}function Wa(a){return Td(a)||Pl(a)||function(r){if(r instanceof ee&&un(r)){for(const o of r.getFilters())if(!Td(o)&&!Pl(o))return!1;return!0}return!1}(a)}function Dd(a){if(ft(a instanceof O||a instanceof ee),a instanceof O)return a;if(1===a.filters.length)return Dd(a.filters[0]);const t=a.filters.map(o=>Dd(o));let r=ee.create(t,a.op);return r=Rl(r),Wa(r)?r:(ft(r instanceof ee),ft(be(r)),ft(r.filters.length>1),r.filters.reduce((o,u)=>Ad(o,u)))}function Ad(a,t){let r;return ft(a instanceof O||a instanceof ee),ft(t instanceof O||t instanceof ee),r=a instanceof O?t instanceof O?ee.create([a,t],"and"):Ml(a,t):t instanceof O?Ml(t,a):function(u,d){if(ft(u.filters.length>0&&d.filters.length>0),be(u)&&be(d))return Ts(u,d.getFilters());const m=un(u)?u:d,A=un(u)?d:u,x=m.filters.map(G=>Ad(G,A));return ee.create(x,"or")}(a,t),Rl(r)}function Ml(a,t){if(be(t))return Ts(t,a.getFilters());{const r=t.filters.map(o=>Ad(a,o));return ee.create(r,"or")}}function Rl(a){if(ft(a instanceof O||a instanceof ee),a instanceof O)return a;const t=a.getFilters();if(1===t.length)return Rl(t[0]);if(ys(a))return a;const r=t.map(u=>Rl(u)),o=[];return r.forEach(u=>{u instanceof O?o.push(u):u instanceof ee&&(u.op===a.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:ee.create(o,a.op)}class Kp{constructor(){this.un=new Vt}addToCollectionParentIndex(t,r){return this.un.add(r),Oe.resolve()}getCollectionParents(t,r){return Oe.resolve(this.un.getEntries(r))}addFieldIndex(t,r){return Oe.resolve()}deleteFieldIndex(t,r){return Oe.resolve()}deleteAllFieldIndexes(t){return Oe.resolve()}createTargetIndexes(t,r){return Oe.resolve()}getDocumentsMatchingTarget(t,r){return Oe.resolve(null)}getIndexType(t,r){return Oe.resolve(0)}getFieldIndexes(t,r){return Oe.resolve([])}getNextCollectionGroupToUpdate(t){return Oe.resolve(null)}getMinOffset(t,r){return Oe.resolve(Lt.min())}getMinOffsetFromCollectionGroup(t,r){return Oe.resolve(Lt.min())}updateCollectionGroup(t,r,o){return Oe.resolve()}updateIndexEntries(t,r){return Oe.resolve()}}class Vt{constructor(){this.index={}}add(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r]||new vr(Mn.comparator),d=!u.has(o);return this.index[r]=u.add(o),d}has(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r];return u&&u.has(o)}getEntries(t){return(this.index[t]||new vr(Mn.comparator)).toArray()}}const Mr=new Uint8Array(0);class Ol{constructor(t,r){this.databaseId=r,this.cn=new Vt,this.ln=new ut(o=>jo(o),(o,u)=>To(o,u)),this.uid=t.uid||""}addToCollectionParentIndex(t,r){if(!this.cn.has(r)){const o=r.lastSegment(),u=r.popLast();t.addOnCommittedListener(()=>{this.cn.add(r)});const d={collectionId:o,parent:Ye(u)};return Vu(t).put(d)}return Oe.resolve()}getCollectionParents(t,r){const o=[],u=IDBKeyRange.bound([r,""],[Or(r),""],!1,!0);return Vu(t).U(u).next(d=>{for(const m of d){if(m.collectionId!==r)break;o.push(Sn(m.parent))}return o})}addFieldIndex(t,r){const o=Sc(t),u={indexId:(A=r).indexId,collectionGroup:A.collectionGroup,fields:A.fields.map(x=>[x.fieldPath.canonicalString(),x.kind])};var A;delete u.indexId;const d=o.add(u);if(r.indexState){const m=ra(t);return d.next(A=>{m.put(oc(A,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return d.next()}deleteFieldIndex(t,r){const o=Sc(t),u=ra(t),d=Br(t);return o.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const r=Sc(t),o=Br(t),u=ra(t);return r.j().next(()=>o.j()).next(()=>u.j())}createTargetIndexes(t,r){return Oe.forEach(this.hn(r),o=>this.getIndexType(t,o).next(u=>{if(0===u||1===u){const d=new nf(o).an();if(null!=d)return this.addFieldIndex(t,d)}}))}getDocumentsMatchingTarget(t,r){const o=Br(t);let u=!0;const d=new Map;return Oe.forEach(this.hn(r),m=>this.Pn(t,m).next(A=>{u&&(u=!!A),d.set(m,A)})).next(()=>{if(u){let m=xn();const A=[];return Oe.forEach(d,(x,G)=>{var kn;rt("IndexedDbIndexManager",`Using index ${kn=x,`id=${kn.indexId}|cg=${kn.collectionGroup}|f=${kn.fields.map(or=>`${or.fieldPath}:${or.kind}`).join(",")}`} to execute ${jo(r)}`);const re=function(kn,or){const $r=Ke(or);if(void 0===$r)return null;for(const Ar of Jo(kn,$r.fieldPath))switch(Ar.op){case"array-contains-any":return Ar.value.arrayValue.values||[];case"array-contains":return[Ar.value]}return null}(G,x),pe=function(kn,or){const $r=new Map;for(const Ar of St(or))for(const et of Jo(kn,Ar.fieldPath))switch(et.op){case"==":case"in":$r.set(Ar.fieldPath.canonicalString(),et.value);break;case"not-in":case"!=":return $r.set(Ar.fieldPath.canonicalString(),et.value),Array.from($r.values())}return null}(G,x),Re=function(kn,or){const $r=[];let Ar=!0;for(const et of St(or)){const Se=0===et.kind?Do(kn,et.fieldPath,kn.startAt):cr(kn,et.fieldPath,kn.startAt);$r.push(Se.value),Ar&&(Ar=Se.inclusive)}return new us($r,Ar)}(G,x),st=function(kn,or){const $r=[];let Ar=!0;for(const et of St(or)){const Se=0===et.kind?cr(kn,et.fieldPath,kn.endAt):Do(kn,et.fieldPath,kn.endAt);$r.push(Se.value),Ar&&(Ar=Se.inclusive)}return new us($r,Ar)}(G,x),jt=this.In(x,G,Re),Jt=this.In(x,G,st),Kt=this.Tn(x,G,pe),Vn=this.En(x.indexId,re,jt,Re.inclusive,Jt,st.inclusive,Kt);return Oe.forEach(Vn,qn=>o.G(qn,r.limit).next(kn=>{kn.forEach(or=>{const $r=Te.fromSegments(or.documentKey);m.has($r)||(m=m.add($r),A.push($r))})}))}).next(()=>A)}return Oe.resolve(null)})}hn(t){let r=this.ln.get(t);return r||(r=0===t.filters.length?[t]:rf(ee.create(t.filters,"and")).map(o=>pa(t.path,t.collectionGroup,t.orderBy,o.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,r),r)}En(t,r,o,u,d,m,A){const x=(null!=r?r.length:1)*Math.max(o.length,d.length),G=x/(null!=r?r.length:1),re=[];for(let pe=0;pe<x;++pe){const Re=r?this.dn(r[pe/G]):Mr,st=this.An(t,Re,o[pe%G],u),jt=this.Rn(t,Re,d[pe%G],m),Jt=A.map(Kt=>this.An(t,Re,Kt,!0));re.push(...this.createRange(st,jt,Jt))}return re}An(t,r,o,u){const d=new po(t,Te.empty(),r,o);return u?d:d.Zt()}Rn(t,r,o,u){const d=new po(t,Te.empty(),r,o);return u?d.Zt():d}Pn(t,r){const o=new nf(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(t,u).next(d=>{let m=null;for(const A of d)o.rn(A)&&(!m||A.fields.length>m.fields.length)&&(m=A);return m})}getIndexType(t,r){let o=2;const u=this.hn(r);return Oe.forEach(u,d=>this.Pn(t,d).next(m=>{m?0!==o&&m.fields.length<function(x){let G=new vr(xe.comparator),re=!1;for(const pe of x.filters)for(const Re of pe.getFlattenedFilters())Re.field.isKeyField()||("array-contains"===Re.op||"array-contains-any"===Re.op?re=!0:G=G.add(Re.field));for(const pe of x.orderBy)pe.field.isKeyField()||(G=G.add(pe.field));return G.size+(re?1:0)}(d)&&(o=1):o=0})).next(()=>null!==r.limit&&u.length>1&&2===o?1:o)}Vn(t,r){const o=new za;for(const u of St(t)){const d=r.data.field(u.fieldPath);if(null==d)return null;const m=o.Yt(u.kind);Ga.vt.It(d,m)}return o.zt()}dn(t){const r=new za;return Ga.vt.It(t,r.Yt(0)),r.zt()}mn(t,r){const o=new za;return Ga.vt.It(Hi(this.databaseId,r),o.Yt(function(d){const m=St(d);return 0===m.length?0:m[m.length-1].kind}(t))),o.zt()}Tn(t,r,o){if(null===o)return[];let u=[];u.push(new za);let d=0;for(const m of St(t)){const A=o[d++];for(const x of u)if(this.fn(r,m.fieldPath)&&Vs(A))u=this.gn(u,m,A);else{const G=x.Yt(m.kind);Ga.vt.It(A,G)}}return this.pn(u)}In(t,r,o){return this.Tn(t,r,o.position)}pn(t){const r=[];for(let o=0;o<t.length;++o)r[o]=t[o].zt();return r}gn(t,r,o){const u=[...t],d=[];for(const m of o.arrayValue.values||[])for(const A of u){const x=new za;x.seed(A.zt()),Ga.vt.It(m,x.Yt(r.kind)),d.push(x)}return d}fn(t,r){return!!t.filters.find(o=>o instanceof O&&o.field.isEqual(r)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(t,r){const o=Sc(t),u=ra(t);return(r?o.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):o.U()).next(d=>{const m=[];return Oe.forEach(d,A=>u.get([A.indexId,this.uid]).next(x=>{m.push(function(re,pe){const Re=pe?new oe(pe.sequenceNumber,new Lt(Yc(pe.readTime),new Te(Sn(pe.documentKey)),pe.largestBatchId)):oe.empty(),st=re.fields.map(([jt,Jt])=>new Q(xe.fromServerFormat(jt),Jt));return new we(re.indexId,re.collectionGroup,st,Re)}(A,x))})).next(()=>m)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(r=>0===r.length?null:(r.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:Ht(o.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(t,r,o){const u=Sc(t),d=ra(t);return this.yn(t).next(m=>u.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(A=>Oe.forEach(A,x=>d.put(oc(x.indexId,this.uid,m,o)))))}updateIndexEntries(t,r){const o=new Map;return Oe.forEach(r,(u,d)=>{const m=o.get(u.collectionGroup);return(m?Oe.resolve(m):this.getFieldIndexes(t,u.collectionGroup)).next(A=>(o.set(u.collectionGroup,A),Oe.forEach(A,x=>this.wn(t,u,x).next(G=>{const re=this.Sn(d,x);return G.isEqual(re)?Oe.resolve():this.bn(t,d,x,G,re)}))))})}Dn(t,r,o,u){return Br(t).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.mn(o,r.key),documentKey:r.key.path.toArray()})}vn(t,r,o,u){return Br(t).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.mn(o,r.key),r.key.path.toArray()])}wn(t,r,o){const u=Br(t);let d=new vr(Hn);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.mn(o,r)])},(m,A)=>{d=d.add(new po(o.indexId,r,A.arrayValue,A.directionalValue))}).next(()=>d)}Sn(t,r){let o=new vr(Hn);const u=this.Vn(r,t);if(null==u)return o;const d=Ke(r);if(null!=d){const m=t.data.field(d.fieldPath);if(Vs(m))for(const A of m.arrayValue.values||[])o=o.add(new po(r.indexId,t.key,this.dn(A),u))}else o=o.add(new po(r.indexId,t.key,Mr,u));return o}bn(t,r,o,u,d){rt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const m=[];return function(x,G,re,pe,Re){const st=x.getIterator(),jt=G.getIterator();let Jt=Xs(st),Kt=Xs(jt);for(;Jt||Kt;){let Vn=!1,qn=!1;if(Jt&&Kt){const kn=re(Jt,Kt);kn<0?qn=!0:kn>0&&(Vn=!0)}else null!=Jt?qn=!0:Vn=!0;Vn?(pe(Kt),Kt=Xs(jt)):qn?(Re(Jt),Jt=Xs(st)):(Jt=Xs(st),Kt=Xs(jt))}}(u,d,Hn,A=>{m.push(this.Dn(t,r,o,A))},A=>{m.push(this.vn(t,r,o,A))}),Oe.waitFor(m)}yn(t){let r=1;return ra(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(t,r,o){o=o.sort((m,A)=>Hn(m,A)).filter((m,A,x)=>!A||0!==Hn(m,x[A-1]));const u=[];u.push(t);for(const m of o){const A=Hn(m,t),x=Hn(m,r);if(0===A)u[0]=t.Zt();else if(A>0&&x<0)u.push(m),u.push(m.Zt());else if(x>0)break}u.push(r);const d=[];for(let m=0;m<u.length;m+=2){if(this.Cn(u[m],u[m+1]))return[];d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Mr,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Mr,[]]))}return d}Cn(t,r){return Hn(t,r)>0}getMinOffsetFromCollectionGroup(t,r){return this.getFieldIndexes(t,r).next(va)}getMinOffset(t,r){return Oe.mapArray(this.hn(r),o=>this.Pn(t,o).next(u=>u||bt())).next(va)}}function Vu(a){return Er(a,"collectionParents")}function Br(a){return Er(a,"indexEntries")}function Sc(a){return Er(a,"indexConfiguration")}function ra(a){return Er(a,"indexState")}function va(a){ft(0!==a.length);let t=a[0].indexState.offset,r=t.largestBatchId;for(let o=1;o<a.length;o++){const u=a[o].indexState.offset;mn(u,t)<0&&(t=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new Lt(t.readTime,t.documentKey,r)}const Lu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bs{constructor(t,r,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=o}static withCacheSize(t){return new bs(t,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function bd(a,t,r){const o=a.store("mutations"),u=a.store("documentMutations"),d=[],m=IDBKeyRange.only(r.batchId);let A=0;const x=o.J({range:m},(re,pe,Re)=>(A++,Re.delete()));d.push(x.next(()=>{ft(1===A)}));const G=[];for(const re of r.mutations){const pe=si(t,re.key.path,r.batchId);d.push(u.delete(pe)),G.push(re.key)}return Oe.waitFor(d).next(()=>G)}function Sd(a){if(!a)return 0;let t;if(a.document)t=a.document;else if(a.unknownDocument)t=a.unknownDocument;else{if(!a.noDocument)throw bt();t=a.noDocument}return JSON.stringify(t).length}bs.DEFAULT_COLLECTION_PERCENTILE=10,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bs.DEFAULT=new bs(41943040,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bs.DISABLED=new bs(-1,0,0);class eu{constructor(t,r,o,u){this.userId=t,this.serializer=r,this.indexManager=o,this.referenceDelegate=u,this.Fn={}}static lt(t,r,o,u){ft(""!==t.uid);const d=t.isAuthenticated()?t.uid:"";return new eu(d,r,o,u)}checkEmpty(t){let r=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ro(t).J({index:"userMutationsIndex",range:o},(u,d,m)=>{r=!1,m.done()}).next(()=>r)}addMutationBatch(t,r,o,u){const d=Pc(t),m=ro(t);return m.add({}).next(A=>{ft("number"==typeof A);const x=new Kr(A,r,o,u),G=function(st,jt,Jt){const Kt=Jt.baseMutations.map(qn=>Ou(st.ct,qn)),Vn=Jt.mutations.map(qn=>Ou(st.ct,qn));return{userId:jt,batchId:Jt.batchId,localWriteTimeMs:Jt.localWriteTime.toMillis(),baseMutations:Kt,mutations:Vn}}(this.serializer,this.userId,x),re=[];let pe=new vr((Re,st)=>Ht(Re.canonicalString(),st.canonicalString()));for(const Re of u){const st=si(this.userId,Re.key.path,A);pe=pe.add(Re.key.path.popLast()),re.push(m.put(G)),re.push(d.put(st,_r))}return pe.forEach(Re=>{re.push(this.indexManager.addToCollectionParentIndex(t,Re))}),t.addOnCommittedListener(()=>{this.Fn[A]=x.keys()}),Oe.waitFor(re).next(()=>x)})}lookupMutationBatch(t,r){return ro(t).get(r).next(o=>o?(ft(o.userId===this.userId),Pr(this.serializer,o)):null)}Mn(t,r){return this.Fn[r]?Oe.resolve(this.Fn[r]):this.lookupMutationBatch(t,r).next(o=>{if(o){const u=o.keys();return this.Fn[r]=u,u}return null})}getNextMutationBatchAfterBatchId(t,r){const o=r+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return ro(t).J({index:"userMutationsIndex",range:u},(m,A,x)=>{A.userId===this.userId&&(ft(A.batchId>=o),d=Pr(this.serializer,A)),x.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(t){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return ro(t).J({index:"userMutationsIndex",range:r,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(t){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ro(t).U("userMutationsIndex",r).next(o=>o.map(u=>Pr(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(t,r){const o=br(this.userId,r.path),u=IDBKeyRange.lowerBound(o),d=[];return Pc(t).J({range:u},(m,A,x)=>{const[G,re,pe]=m,Re=Sn(re);if(G===this.userId&&r.path.isEqual(Re))return ro(t).get(pe).next(st=>{if(!st)throw bt();ft(st.userId===this.userId),d.push(Pr(this.serializer,st))});x.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(t,r){let o=new vr(Ht);const u=[];return r.forEach(d=>{const m=br(this.userId,d.path),A=IDBKeyRange.lowerBound(m),x=Pc(t).J({range:A},(G,re,pe)=>{const[Re,st,jt]=G,Jt=Sn(st);Re===this.userId&&d.path.isEqual(Jt)?o=o.add(jt):pe.done()});u.push(x)}),Oe.waitFor(u).next(()=>this.xn(t,o))}getAllMutationBatchesAffectingQuery(t,r){const o=r.path,u=o.length+1,d=br(this.userId,o),m=IDBKeyRange.lowerBound(d);let A=new vr(Ht);return Pc(t).J({range:m},(x,G,re)=>{const[pe,Re,st]=x,jt=Sn(Re);pe===this.userId&&o.isPrefixOf(jt)?jt.length===u&&(A=A.add(st)):re.done()}).next(()=>this.xn(t,A))}xn(t,r){const o=[],u=[];return r.forEach(d=>{u.push(ro(t).get(d).next(m=>{if(null===m)throw bt();ft(m.userId===this.userId),o.push(Pr(this.serializer,m))}))}),Oe.waitFor(u).next(()=>o)}removeMutationBatch(t,r){return bd(t._e,this.userId,r).next(o=>(t.addOnCommittedListener(()=>{this.On(r.batchId)}),Oe.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(t,u))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(r=>{if(!r)return Oe.resolve();const o=IDBKeyRange.lowerBound(function(m){return[m]}(this.userId)),u=[];return Pc(t).J({range:o},(d,m,A)=>{if(d[0]===this.userId){const x=Sn(d[1]);u.push(x)}else A.done()}).next(()=>{ft(0===u.length)})})}containsKey(t,r){return Ns(t,this.userId,r)}Nn(t){return ia(t).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ns(a,t,r){const o=br(t,r.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return Pc(a).J({range:d,H:!0},(A,x,G)=>{const[re,pe,Re]=A;re===t&&pe===u&&(m=!0),G.done()}).next(()=>m)}function ro(a){return Er(a,"mutations")}function Pc(a){return Er(a,"documentMutations")}function ia(a){return Er(a,"mutationQueues")}class Gs{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Gs(0)}static kn(){return new Gs(-1)}}class qp{constructor(t,r){this.referenceDelegate=t,this.serializer=r}allocateTargetId(t){return this.qn(t).next(r=>{const o=new Gs(r.highestTargetId);return r.highestTargetId=o.next(),this.Qn(t,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(r=>Yt.fromTimestamp(new Xt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(t,r,o){return this.qn(t).next(u=>(u.highestListenSequenceNumber=r,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.Qn(t,u)))}addTargetData(t,r){return this.Kn(t,r).next(()=>this.qn(t).next(o=>(o.targetCount+=1,this.$n(r,o),this.Qn(t,o))))}updateTargetData(t,r){return this.Kn(t,r)}removeTargetData(t,r){return this.removeMatchingKeysForTargetId(t,r.targetId).next(()=>Mc(t).delete(r.targetId)).next(()=>this.qn(t)).next(o=>(ft(o.targetCount>0),o.targetCount-=1,this.Qn(t,o)))}removeTargets(t,r,o){let u=0;const d=[];return Mc(t).J((m,A)=>{const x=Ha(A);x.sequenceNumber<=r&&null===o.get(x.targetId)&&(u++,d.push(this.removeTargetData(t,x)))}).next(()=>Oe.waitFor(d)).next(()=>u)}forEachTarget(t,r){return Mc(t).J((o,u)=>{const d=Ha(u);r(d)})}qn(t){return Pd(t).get("targetGlobalKey").next(r=>(ft(null!==r),r))}Qn(t,r){return Pd(t).put("targetGlobalKey",r)}Kn(t,r){return Mc(t).put(Jc(this.serializer,r))}$n(t,r){let o=!1;return t.targetId>r.highestTargetId&&(r.highestTargetId=t.targetId,o=!0),t.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t.sequenceNumber,o=!0),o}getTargetCount(t){return this.qn(t).next(r=>r.targetCount)}getTargetData(t,r){const o=jo(r),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Mc(t).J({range:u,index:"queryTargetsIndex"},(m,A,x)=>{const G=Ha(A);To(r,G.target)&&(d=G,x.done())}).next(()=>d)}addMatchingKeys(t,r,o){const u=[],d=ac(t);return r.forEach(m=>{const A=Ye(m.path);u.push(d.put({targetId:o,path:A})),u.push(this.referenceDelegate.addReference(t,o,m))}),Oe.waitFor(u)}removeMatchingKeys(t,r,o){const u=ac(t);return Oe.forEach(r,d=>{const m=Ye(d.path);return Oe.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(t,o,d)])})}removeMatchingKeysForTargetId(t,r){const o=ac(t),u=IDBKeyRange.bound([r],[r+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(t,r){const o=IDBKeyRange.bound([r],[r+1],!1,!0),u=ac(t);let d=xn();return u.J({range:o,H:!0},(m,A,x)=>{const G=Sn(m[1]),re=new Te(G);d=d.add(re)}).next(()=>d)}containsKey(t,r){const o=Ye(r.path),u=IDBKeyRange.bound([o],[Or(o)],!1,!0);let d=0;return ac(t).J({index:"documentTargetsIndex",H:!0,range:u},([m,A],x,G)=>{0!==m&&(d++,G.done())}).next(()=>d>0)}ot(t,r){return Mc(t).get(r).next(o=>o?Ha(o):null)}}function Mc(a){return Er(a,"targets")}function Pd(a){return Er(a,"targetGlobal")}function ac(a){return Er(a,"targetDocuments")}function Rc([a,t],[r,o]){const u=Ht(a,r);return 0===u?Ht(t,o):u}class Md{constructor(t){this.Un=t,this.buffer=new vr(Rc),this.Wn=0}Gn(){return++this.Wn}zn(t){const r=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const o=this.buffer.last();Rc(r,o)<0&&(this.buffer=this.buffer.delete(o).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Nl{constructor(t,r,o){this.garbageCollector=t,this.asyncQueue=r,this.localStore=o,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(t){var r=this;rt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,ue.A)(function*(){r.jn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(o){is(o)?rt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield bn(o)}yield r.Hn(3e5)}))}}class xl{constructor(t,r){this.Jn=t,this.params=r}calculateTargetCount(t,r){return this.Jn.Yn(t).next(o=>Math.floor(r/100*o))}nthSequenceNumber(t,r){if(0===r)return Oe.resolve(ne.oe);const o=new Md(r);return this.Jn.forEachTarget(t,u=>o.zn(u.sequenceNumber)).next(()=>this.Jn.Zn(t,u=>o.zn(u))).next(()=>o.maxValue)}removeTargets(t,r,o){return this.Jn.removeTargets(t,r,o)}removeOrphanedDocuments(t,r){return this.Jn.removeOrphanedDocuments(t,r)}collect(t,r){return-1===this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector","Garbage collection skipped; disabled"),Oe.resolve(Lu)):this.getCacheSize(t).next(o=>o<this.params.cacheSizeCollectionThreshold?(rt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lu):this.Xn(t,r))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,r){let o,u,d,m,A,x,G;const re=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(pe=>(pe>this.params.maximumSequenceNumbersToCollect?(rt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${pe}`),u=this.params.maximumSequenceNumbersToCollect):u=pe,m=Date.now(),this.nthSequenceNumber(t,u))).next(pe=>(o=pe,A=Date.now(),this.removeTargets(t,o,r))).next(pe=>(d=pe,x=Date.now(),this.removeOrphanedDocuments(t,o))).next(pe=>(G=Date.now(),Cn()<=ze.$b.DEBUG&&rt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-re}ms\n\tDetermined least recently used ${u} in `+(A-m)+`ms\n\tRemoved ${d} targets in `+(x-A)+`ms\n\tRemoved ${pe} documents in `+(G-x)+`ms\nTotal Duration: ${G-re}ms`),Oe.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:pe})))}}class af{constructor(t,r){this.db=t,this.garbageCollector=function sf(a,t){return new xl(a,t)}(this,r)}Yn(t){const r=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(o=>r.next(u=>o+u))}er(t){let r=0;return this.Zn(t,o=>{r++}).next(()=>r)}forEachTarget(t,r){return this.db.getTargetCache().forEachTarget(t,r)}Zn(t,r){return this.tr(t,(o,u)=>r(u))}addReference(t,r,o){return tu(t,o)}removeReference(t,r,o){return tu(t,o)}removeTargets(t,r,o){return this.db.getTargetCache().removeTargets(t,r,o)}markPotentiallyOrphaned(t,r){return tu(t,r)}nr(t,r){return function(u,d){let m=!1;return ia(u).Y(A=>Ns(u,A,d).next(x=>(x&&(m=!0),Oe.resolve(!x)))).next(()=>m)}(t,r)}removeOrphanedDocuments(t,r){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.tr(t,(m,A)=>{if(A<=r){const x=this.nr(t,m).next(G=>{if(!G)return d++,o.getEntry(t,m).next(()=>(o.removeEntry(m,Yt.min()),ac(t).delete([0,Ye(m.path)])))});u.push(x)}}).next(()=>Oe.waitFor(u)).next(()=>o.apply(t)).next(()=>d)}removeTarget(t,r){const o=r.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,o)}updateLimboDocument(t,r){return tu(t,r)}tr(t,r){const o=ac(t);let u,d=ne.oe;return o.J({index:"documentTargetsIndex"},([m,A],{path:x,sequenceNumber:G})=>{0===m?(d!==ne.oe&&r(new Te(Sn(u)),d),d=G,u=x):d=ne.oe}).next(()=>{d!==ne.oe&&r(new Te(Sn(u)),d)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function tu(a,t){return ac(a).put((u=a.currentSequenceNumber,{targetId:0,path:Ye(t.path),sequenceNumber:u}));var u}class Rd{constructor(){this.changes=new ut(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,sr.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const o=this.changes.get(r);return void 0!==o?Oe.resolve(o):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class cf{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,r,o){return Oc(t).put(o)}removeEntry(t,r,o){return Oc(t).delete(function(d,m){const A=d.path.toArray();return[A.slice(0,A.length-2),A[A.length-2],ku(m),A[A.length-1]]}(r,o))}updateMetadata(t,r){return this.getMetadata(t).next(o=>(o.byteSize+=r,this.rr(t,o)))}getEntry(t,r){let o=sr.newInvalidDocument(r);return Oc(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cs(r))},(u,d)=>{o=this.ir(r,d)}).next(()=>o)}sr(t,r){let o={size:0,document:sr.newInvalidDocument(r)};return Oc(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cs(r))},(u,d)=>{o={document:this.ir(r,d),size:Sd(d)}}).next(()=>o)}getEntries(t,r){let o=nn();return this._r(t,r,(u,d)=>{const m=this.ir(u,d);o=o.insert(u,m)}).next(()=>o)}ar(t,r){let o=nn(),u=new Sr(Te.comparator);return this._r(t,r,(d,m)=>{const A=this.ir(d,m);o=o.insert(d,A),u=u.insert(d,Sd(m))}).next(()=>({documents:o,ur:u}))}_r(t,r,o){if(r.isEmpty())return Oe.resolve();let u=new vr(Si);r.forEach(x=>u=u.add(x));const d=IDBKeyRange.bound(Cs(u.first()),Cs(u.last())),m=u.getIterator();let A=m.getNext();return Oc(t).J({index:"documentKeyIndex",range:d},(x,G,re)=>{const pe=Te.fromSegments([...G.prefixPath,G.collectionGroup,G.documentId]);for(;A&&Si(A,pe)<0;)o(A,null),A=m.getNext();A&&A.isEqual(pe)&&(o(A,G),A=m.hasNext()?m.getNext():null),A?re.$(Cs(A)):re.done()}).next(()=>{for(;A;)o(A,null),A=m.hasNext()?m.getNext():null})}getDocumentsMatchingQuery(t,r,o,u,d){const m=r.path,A=[m.popLast().toArray(),m.lastSegment(),ku(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],x=[m.popLast().toArray(),m.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oc(t).U(IDBKeyRange.bound(A,x,!0)).next(G=>{d?.incrementDocumentReadCount(G.length);let re=nn();for(const pe of G){const Re=this.ir(Te.fromSegments(pe.prefixPath.concat(pe.collectionGroup,pe.documentId)),pe);Re.isFoundDocument()&&(X(r,Re)||u.has(Re.key))&&(re=re.insert(Re.key,Re))}return re})}getAllFromCollectionGroup(t,r,o,u){let d=nn();const m=cc(r,o),A=cc(r,Lt.max());return Oc(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,A,!0)},(x,G,re)=>{const pe=this.ir(Te.fromSegments(G.prefixPath.concat(G.collectionGroup,G.documentId)),G);d=d.insert(pe.key,pe),d.size===u&&re.done()}).next(()=>d)}newChangeBuffer(t){return new uf(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(r=>r.byteSize)}getMetadata(t){return kl(t).get("remoteDocumentGlobalKey").next(r=>(ft(!!r),r))}rr(t,r){return kl(t).put("remoteDocumentGlobalKey",r)}ir(t,r){if(r){const o=function Go(a,t){let r;if(t.document)r=Zh(a.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const o=Te.fromSegments(t.noDocument.path),u=Yc(t.noDocument.readTime);r=sr.newNoDocument(o,u),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return bt();{const o=Te.fromSegments(t.unknownDocument.path),u=Yc(t.unknownDocument.version);r=sr.newUnknownDocument(o,u)}}return t.readTime&&r.setReadTime(function(u){const d=new Xt(u[0],u[1]);return Yt.fromTimestamp(d)}(t.readTime)),r}(this.serializer,r);if(!o.isNoDocument()||!o.version.isEqual(Yt.min()))return o}return sr.newInvalidDocument(t)}}function Uu(a){return new cf(a)}class uf extends Rd{constructor(t,r){super(),this.cr=t,this.trackRemovals=r,this.lr=new ut(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(t){const r=[];let o=0,u=new vr((d,m)=>Ht(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const A=this.lr.get(d);if(r.push(this.cr.removeEntry(t,d,A.readTime)),m.isValidDocument()){const x=xu(this.cr.serializer,m);u=u.add(d.path.popLast());const G=Sd(x);o+=G-A.size,r.push(this.cr.addEntry(t,d,x))}else if(o-=A.size,this.trackRemovals){const x=xu(this.cr.serializer,m.convertToNoDocument(Yt.min()));r.push(this.cr.addEntry(t,d,x))}}),u.forEach(d=>{r.push(this.cr.indexManager.addToCollectionParentIndex(t,d))}),r.push(this.cr.updateMetadata(t,o)),Oe.waitFor(r)}getFromCache(t,r){return this.cr.sr(t,r).next(o=>(this.lr.set(r,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(t,r){return this.cr.ar(t,r).next(({documents:o,ur:u})=>(u.forEach((d,m)=>{this.lr.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function kl(a){return Er(a,"remoteDocumentGlobal")}function Oc(a){return Er(a,"remoteDocumentsV14")}function Cs(a){const t=a.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cc(a,t){const r=t.documentKey.path.toArray();return[a,ku(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Si(a,t){const r=a.path.toArray(),o=t.path.toArray();let u=0;for(let d=0;d<r.length-2&&d<o.length-2;++d)if(u=Ht(r[d],o[d]),u)return u;return u=Ht(r.length,o.length),u||(u=Ht(r[r.length-2],o[o.length-2]),u||Ht(r[r.length-1],o[o.length-1]))}class Qp{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}class lf{constructor(t,r,o,u){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=o,this.indexManager=u}getDocument(t,r){let o=null;return this.documentOverlayCache.getOverlay(t,r).next(u=>(o=u,this.remoteDocumentCache.getEntry(t,r))).next(u=>(null!==o&&Tr(o.mutation,u,Jr.empty(),Xt.now()),u))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.getLocalViewOfDocuments(t,o,xn()).next(()=>o))}getLocalViewOfDocuments(t,r,o=xn()){const u=Dn();return this.populateOverlays(t,u,r).next(()=>this.computeViews(t,r,u,o).next(d=>{let m=ur();return d.forEach((A,x)=>{m=m.insert(A,x.overlayedDocument)}),m}))}getOverlayedDocuments(t,r){const o=Dn();return this.populateOverlays(t,o,r).next(()=>this.computeViews(t,r,o,xn()))}populateOverlays(t,r,o){const u=[];return o.forEach(d=>{r.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(t,u).next(d=>{d.forEach((m,A)=>{r.set(m,A)})})}computeViews(t,r,o,u){let d=nn();const m=Vr(),A=Vr();return r.forEach((x,G)=>{const re=o.get(G.key);u.has(G.key)&&(void 0===re||re.mutation instanceof pr)?d=d.insert(G.key,G):void 0!==re?(m.set(G.key,re.mutation.getFieldMask()),Tr(re.mutation,G,re.mutation.getFieldMask(),Xt.now())):m.set(G.key,Jr.empty())}),this.recalculateAndSaveOverlays(t,d).next(x=>(x.forEach((G,re)=>m.set(G,re)),r.forEach((G,re)=>{var pe;return A.set(G,new Qp(re,null!==(pe=m.get(G))&&void 0!==pe?pe:null))}),A))}recalculateAndSaveOverlays(t,r){const o=Vr();let u=new Sr((m,A)=>m-A),d=xn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(m=>{for(const A of m)A.keys().forEach(x=>{const G=r.get(x);if(null===G)return;let re=o.get(x)||Jr.empty();re=A.applyToLocalView(G,re),o.set(x,re);const pe=(u.get(A.batchId)||xn()).add(x);u=u.insert(A.batchId,pe)})}).next(()=>{const m=[],A=u.getReverseIterator();for(;A.hasNext();){const x=A.getNext(),G=x.key,re=x.value,pe=Wn();re.forEach(Re=>{if(!d.has(Re)){const st=fr(r.get(Re),o.get(Re));null!==st&&pe.set(Re,st),d=d.add(Re)}}),m.push(this.documentOverlayCache.saveOverlays(t,G,pe))}return Oe.waitFor(m)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,r,o,u){return Te.isDocumentKey((m=r).path)&&null===m.collectionGroup&&0===m.filters.length?this.getDocumentsMatchingDocumentQuery(t,r.path):ga(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,o,u):this.getDocumentsMatchingCollectionQuery(t,r,o,u);var m}getNextDocuments(t,r,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,o,u).next(d=>{const m=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,o.largestBatchId,u-d.size):Oe.resolve(Dn());let A=-1,x=d;return m.next(G=>Oe.forEach(G,(re,pe)=>(A<pe.largestBatchId&&(A=pe.largestBatchId),d.get(re)?Oe.resolve():this.remoteDocumentCache.getEntry(t,re).next(Re=>{x=x.insert(re,Re)}))).next(()=>this.populateOverlays(t,G,d)).next(()=>this.computeViews(t,x,G,xn())).next(re=>({batchId:A,changes:er(re)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new Te(r)).next(o=>{let u=ur();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(t,r,o,u){const d=r.collectionGroup;let m=ur();return this.indexManager.getCollectionParents(t,d).next(A=>Oe.forEach(A,x=>{const G=(pe=r,Re=x.child(d),new Wr(Re,null,pe.explicitOrderBy.slice(),pe.filters.slice(),pe.limit,pe.limitType,pe.startAt,pe.endAt));var pe,Re;return this.getDocumentsMatchingCollectionQuery(t,G,o,u).next(re=>{re.forEach((pe,Re)=>{m=m.insert(pe,Re)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(t,r,o,u){let d;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,o.largestBatchId).next(m=>(d=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,o,d,u))).next(m=>{d.forEach((x,G)=>{const re=G.getKey();null===m.get(re)&&(m=m.insert(re,sr.newInvalidDocument(re)))});let A=ur();return m.forEach((x,G)=>{const re=d.get(x);void 0!==re&&Tr(re.mutation,G,Jr.empty(),Xt.now()),X(r,G)&&(A=A.insert(x,G))}),A})}}class Xp{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,r){return Oe.resolve(this.hr.get(r))}saveBundleMetadata(t,r){return this.hr.set(r.id,{id:(u=r).id,version:u.version,createTime:ki(u.createTime)}),Oe.resolve();var u}getNamedQuery(t,r){return Oe.resolve(this.Pr.get(r))}saveNamedQuery(t,r){return this.Pr.set(r.name,{name:(u=r).name,query:Hs(u.bundledQuery),readTime:ki(u.readTime)}),Oe.resolve();var u}}class Yp{constructor(){this.overlays=new Sr(Te.comparator),this.Ir=new Map}getOverlay(t,r){return Oe.resolve(this.overlays.get(r))}getOverlays(t,r){const o=Dn();return Oe.forEach(r,u=>this.getOverlay(t,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(t,r,o){return o.forEach((u,d)=>{this.ht(t,r,d)}),Oe.resolve()}removeOverlaysForBatchId(t,r,o){const u=this.Ir.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.Ir.delete(o)),Oe.resolve()}getOverlaysForCollection(t,r,o){const u=Dn(),d=r.length+1,m=new Te(r.child("")),A=this.overlays.getIteratorFrom(m);for(;A.hasNext();){const x=A.getNext().value,G=x.getKey();if(!r.isPrefixOf(G.path))break;G.path.length===d&&x.largestBatchId>o&&u.set(x.getKey(),x)}return Oe.resolve(u)}getOverlaysForCollectionGroup(t,r,o,u){let d=new Sr((G,re)=>G-re);const m=this.overlays.getIterator();for(;m.hasNext();){const G=m.getNext().value;if(G.getKey().getCollectionGroup()===r&&G.largestBatchId>o){let re=d.get(G.largestBatchId);null===re&&(re=Dn(),d=d.insert(G.largestBatchId,re)),re.set(G.getKey(),G)}}const A=Dn(),x=d.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach((G,re)=>A.set(G,re)),!(A.size()>=u)););return Oe.resolve(A)}ht(t,r,o){const u=this.overlays.get(o.key);if(null!==u){const m=this.Ir.get(u.largestBatchId).delete(o.key);this.Ir.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new Yn(r,o));let d=this.Ir.get(r);void 0===d&&(d=xn(),this.Ir.set(r,d)),this.Ir.set(r,d.add(o.key))}}class df{constructor(){this.sessionToken=zr.EMPTY_BYTE_STRING}getSessionToken(t){return Oe.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Oe.resolve()}}class nu{constructor(){this.Tr=new vr(Qi.Er),this.dr=new vr(Qi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,r){const o=new Qi(t,r);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(t,r){t.forEach(o=>this.addReference(o,r))}removeReference(t,r){this.Vr(new Qi(t,r))}mr(t,r){t.forEach(o=>this.removeReference(o,r))}gr(t){const r=new Te(new Mn([])),o=new Qi(r,t),u=new Qi(r,t+1),d=[];return this.dr.forEachInRange([o,u],m=>{this.Vr(m),d.push(m.key)}),d}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const r=new Te(new Mn([])),o=new Qi(r,t),u=new Qi(r,t+1);let d=xn();return this.dr.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(t){const r=new Qi(t,0),o=this.Tr.firstAfterOrEqual(r);return null!==o&&t.isEqual(o.key)}}class Qi{constructor(t,r){this.key=t,this.wr=r}static Er(t,r){return Te.comparator(t.key,r.key)||Ht(t.wr,r.wr)}static Ar(t,r){return Ht(t.wr,r.wr)||Te.comparator(t.key,r.key)}}class Pa{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new vr(Qi.Er)}checkEmpty(t){return Oe.resolve(0===this.mutationQueue.length)}addMutationBatch(t,r,o,u){const d=this.Sr;this.Sr++;const m=new Kr(d,r,o,u);this.mutationQueue.push(m);for(const A of u)this.br=this.br.add(new Qi(A.key,d)),this.indexManager.addToCollectionParentIndex(t,A.key.path.popLast());return Oe.resolve(m)}lookupMutationBatch(t,r){return Oe.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(t,r){const u=this.vr(r+1),d=u<0?0:u;return Oe.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return Oe.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return Oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const o=new Qi(r,0),u=new Qi(r,Number.POSITIVE_INFINITY),d=[];return this.br.forEachInRange([o,u],m=>{const A=this.Dr(m.wr);d.push(A)}),Oe.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(t,r){let o=new vr(Ht);return r.forEach(u=>{const d=new Qi(u,0),m=new Qi(u,Number.POSITIVE_INFINITY);this.br.forEachInRange([d,m],A=>{o=o.add(A.wr)})}),Oe.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,r){const o=r.path,u=o.length+1;let d=o;Te.isDocumentKey(d)||(d=d.child(""));const m=new Qi(new Te(d),0);let A=new vr(Ht);return this.br.forEachWhile(x=>{const G=x.key.path;return!!o.isPrefixOf(G)&&(G.length===u&&(A=A.add(x.wr)),!0)},m),Oe.resolve(this.Cr(A))}Cr(t){const r=[];return t.forEach(o=>{const u=this.Dr(o);null!==u&&r.push(u)}),r}removeMutationBatch(t,r){ft(0===this.Fr(r.batchId,"removed")),this.mutationQueue.shift();let o=this.br;return Oe.forEach(r.mutations,u=>{const d=new Qi(u.key,r.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(()=>{this.br=o})}On(t){}containsKey(t,r){const o=new Qi(r,0),u=this.br.firstAfterOrEqual(o);return Oe.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(t){return Oe.resolve()}Fr(t,r){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){const r=this.vr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Od{constructor(t){this.Mr=t,this.docs=new Sr(Te.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const o=r.key,u=this.docs.get(o),d=u?u.size:0,m=this.Mr(r);return this.docs=this.docs.insert(o,{document:r.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const o=this.docs.get(r);return Oe.resolve(o?o.document.mutableCopy():sr.newInvalidDocument(r))}getEntries(t,r){let o=nn();return r.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():sr.newInvalidDocument(u))}),Oe.resolve(o)}getDocumentsMatchingQuery(t,r,o,u){let d=nn();const m=r.path,A=new Te(m.child("")),x=this.docs.getIteratorFrom(A);for(;x.hasNext();){const{key:G,value:{document:re}}=x.getNext();if(!m.isPrefixOf(G.path))break;G.path.length>m.length+1||mn(Et(re),o)<=0||(u.has(re.key)||X(r,re))&&(d=d.insert(re.key,re.mutableCopy()))}return Oe.resolve(d)}getAllFromCollectionGroup(t,r,o,u){bt()}Or(t,r){return Oe.forEach(this.docs,o=>r(o))}newChangeBuffer(t){return new Fl(this)}getSize(t){return Oe.resolve(this.size)}}class Fl extends Rd{constructor(t){super(),this.cr=t}applyChanges(t){const r=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?r.push(this.cr.addEntry(t,u)):this.cr.removeEntry(o)}),Oe.waitFor(r)}getFromCache(t,r){return this.cr.getEntry(t,r)}getAllFromCache(t,r){return this.cr.getEntries(t,r)}}class Bu{constructor(t){this.persistence=t,this.Nr=new ut(r=>jo(r),To),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new nu,this.targetCount=0,this.kr=Gs.Bn()}forEachTarget(t,r){return this.Nr.forEach((o,u)=>r(u)),Oe.resolve()}getLastRemoteSnapshotVersion(t){return Oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Oe.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Oe.resolve(this.highestTargetId)}setTargetsMetadata(t,r,o){return o&&(this.lastRemoteSnapshotVersion=o),r>this.Lr&&(this.Lr=r),Oe.resolve()}Kn(t){this.Nr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.kr=new Gs(r),this.highestTargetId=r),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,r){return this.Kn(r),this.targetCount+=1,Oe.resolve()}updateTargetData(t,r){return this.Kn(r),Oe.resolve()}removeTargetData(t,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Oe.resolve()}removeTargets(t,r,o){let u=0;const d=[];return this.Nr.forEach((m,A)=>{A.sequenceNumber<=r&&null===o.get(A.targetId)&&(this.Nr.delete(m),d.push(this.removeMatchingKeysForTargetId(t,A.targetId)),u++)}),Oe.waitFor(d).next(()=>u)}getTargetCount(t){return Oe.resolve(this.targetCount)}getTargetData(t,r){const o=this.Nr.get(r)||null;return Oe.resolve(o)}addMatchingKeys(t,r,o){return this.Br.Rr(r,o),Oe.resolve()}removeMatchingKeys(t,r,o){this.Br.mr(r,o);const u=this.persistence.referenceDelegate,d=[];return u&&r.forEach(m=>{d.push(u.markPotentiallyOrphaned(t,m))}),Oe.waitFor(d)}removeMatchingKeysForTargetId(t,r){return this.Br.gr(r),Oe.resolve()}getMatchingKeysForTargetId(t,r){const o=this.Br.yr(r);return Oe.resolve(o)}containsKey(t,r){return Oe.resolve(this.Br.containsKey(r))}}class Nc{constructor(t,r){this.qr={},this.overlays={},this.Qr=new ne(0),this.Kr=!1,this.Kr=!0,this.$r=new df,this.referenceDelegate=t(this),this.Ur=new Bu(this),this.indexManager=new Kp,this.remoteDocumentCache=new Od(o=>this.referenceDelegate.Wr(o)),this.serializer=new $s(r),this.Gr=new Xp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Yp,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let o=this.qr[t.toKey()];return o||(o=new Pa(r,this.referenceDelegate),this.qr[t.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,r,o){rt("MemoryPersistence","Starting transaction:",t);const u=new ju(this.Qr.next());return this.referenceDelegate.zr(),o(u).next(d=>this.referenceDelegate.jr(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Hr(t,r){return Oe.or(Object.values(this.qr).map(o=>()=>o.containsKey(t,r)))}}class ju extends zn{constructor(t){super(),this.currentSequenceNumber=t}}class $u{constructor(t){this.persistence=t,this.Jr=new nu,this.Yr=null}static Zr(t){return new $u(t)}get Xr(){if(this.Yr)return this.Yr;throw bt()}addReference(t,r,o){return this.Jr.addReference(o,r),this.Xr.delete(o.toString()),Oe.resolve()}removeReference(t,r,o){return this.Jr.removeReference(o,r),this.Xr.add(o.toString()),Oe.resolve()}markPotentiallyOrphaned(t,r){return this.Xr.add(r.toString()),Oe.resolve()}removeTarget(t,r){this.Jr.gr(r.targetId).forEach(u=>this.Xr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,r.targetId).next(u=>{u.forEach(d=>this.Xr.add(d.toString()))}).next(()=>o.removeTargetData(t,r))}zr(){this.Yr=new Set}jr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Oe.forEach(this.Xr,o=>{const u=Te.fromPath(o);return this.ei(t,u).next(d=>{d||r.removeEntry(u,Yt.min())})}).next(()=>(this.Yr=null,r.apply(t)))}updateLimboDocument(t,r){return this.ei(t,r).next(o=>{o?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(t){return 0}ei(t,r){return Oe.or([()=>Oe.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Hr(t,r)])}}class Nd{constructor(t){this.serializer=t}O(t,r,o,u){const d=new Gr("createOrUpgrade",r);var x;o<1&&u>=1&&(t.createObjectStore("owner"),(x=t).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",En,{unique:!0}),x.createObjectStore("documentMutations"),uc(t),function(x){x.createObjectStore("remoteDocuments")}(t));let m=Oe.resolve();return o<3&&u>=3&&(0!==o&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(t),uc(t)),m=m.next(()=>function(x){const G=x.store("targetGlobal"),re={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Yt.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",re)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(x,G){return G.store("mutations").U().next(re=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",En,{unique:!0});const pe=G.store("mutations"),Re=re.map(st=>pe.put(st));return Oe.waitFor(Re)})}(t,d))),m=m.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),o<5&&u>=5&&(m=m.next(()=>this.ni(d))),o<6&&u>=6&&(m=m.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(t),this.ri(d)))),o<7&&u>=7&&(m=m.next(()=>this.ii(d))),o<8&&u>=8&&(m=m.next(()=>this.si(t,d))),o<9&&u>=9&&(m=m.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(t)})),o<10&&u>=10&&(m=m.next(()=>this.oi(d))),o<11&&u>=11&&(m=m.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),o<12&&u>=12&&(m=m.next(()=>{!function(x){const G=x.createObjectStore("documentOverlays",{keyPath:Rn});G.createIndex("collectionPathOverlayIndex",ar,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",Fo,{unique:!1})}(t)})),o<13&&u>=13&&(m=m.next(()=>function(x){const G=x.createObjectStore("remoteDocumentsV14",{keyPath:ui});G.createIndex("documentKeyIndex",Xr),G.createIndex("collectionGroupIndex",Mi)}(t)).next(()=>this._i(t,d)).next(()=>t.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>this.ai(t,d))),o<15&&u>=15&&(m=m.next(()=>function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:Fr}).createIndex("sequenceNumberIndex",di,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:Ei}).createIndex("documentKeyIndex",Ii,{unique:!1})}(t))),o<16&&u>=16&&(m=m.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),o<17&&u>=17&&(m=m.next(()=>{!function(x){x.createObjectStore("globals",{keyPath:"name"})}(t)})),m}ri(t){let r=0;return t.store("remoteDocuments").J((o,u)=>{r+=Sd(u)}).next(()=>{const o={byteSize:r};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}ni(t){const r=t.store("mutationQueues"),o=t.store("mutations");return r.U().next(u=>Oe.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.U("userMutationsIndex",m).next(A=>Oe.forEach(A,x=>{ft(x.userId===d.userId);const G=Pr(this.serializer,x);return bd(t,d.userId,G).next(()=>{})}))}))}ii(t){const r=t.store("targetDocuments"),o=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.J((m,A)=>{const x=new Mn(m),G=[0,Ye(x)];d.push(r.get(G).next(re=>re?Oe.resolve():r.put({targetId:0,path:Ye(x),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Oe.waitFor(d))})}si(t,r){t.createObjectStore("collectionParents",{keyPath:tr});const o=r.store("collectionParents"),u=new Vt,d=m=>{if(u.add(m)){const A=m.lastSegment(),x=m.popLast();return o.put({collectionId:A,parent:Ye(x)})}};return r.store("remoteDocuments").J({H:!0},(m,A)=>{const x=new Mn(m);return d(x.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([m,A,x],G)=>{const re=Sn(A);return d(re.popLast())}))}oi(t){const r=t.store("targets");return r.J((o,u)=>{const d=Ha(u),m=Jc(this.serializer,d);return r.put(m)})}_i(t,r){const o=r.store("remoteDocuments"),u=[];return o.J((d,m)=>{const A=r.store("remoteDocumentsV14"),x=(pe=m,pe.document?new Te(Mn.fromString(pe.document.name).popFirst(5)):pe.noDocument?Te.fromSegments(pe.noDocument.path):pe.unknownDocument?Te.fromSegments(pe.unknownDocument.path):bt()).path.toArray(),G={prefixPath:x.slice(0,x.length-2),collectionGroup:x[x.length-2],documentId:x[x.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};var pe;u.push(A.put(G))}).next(()=>Oe.waitFor(u))}ai(t,r){const o=r.store("mutations"),u=Uu(this.serializer),d=new Nc($u.Zr,this.serializer.ct);return o.U().next(m=>{const A=new Map;return m.forEach(x=>{var G;let re=null!==(G=A.get(x.userId))&&void 0!==G?G:xn();Pr(this.serializer,x).keys().forEach(pe=>re=re.add(pe)),A.set(x.userId,re)}),Oe.forEach(A,(x,G)=>{const re=new Zt(G),pe=Dl.lt(this.serializer,re),Re=d.getIndexManager(re),st=eu.lt(re,this.serializer,Re,d.referenceDelegate);return new lf(u,st,pe,Re).recalculateAndSaveOverlaysForDocumentKeys(new xs(r,ne.oe),x).next()})})}}function uc(a){a.createObjectStore("targetDocuments",{keyPath:Ir}).createIndex("documentTargetsIndex",li,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yr,{unique:!0}),a.createObjectStore("targetGlobal")}const Ma="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ll{constructor(t,r,o,u,d,m,A,x,G,re,pe=17){if(this.allowTabSynchronization=t,this.persistenceKey=r,this.clientId=o,this.ui=d,this.window=m,this.document=A,this.ci=G,this.li=re,this.hi=pe,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=Re=>Promise.resolve(),!Ll.D())throw new Rt(tt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new af(this,u),this.Ai=r+"main",this.serializer=new $s(x),this.Ri=new Yr(this.Ai,this.hi,new Nd(this.serializer)),this.$r=new tf,this.Ur=new qp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Uu(this.serializer),this.Gr=new zo,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===re&&yn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Rt(tt.FAILED_PRECONDITION,Ma);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new ne(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){var r=this;return this.di=function(){var o=(0,ue.A)(function*(u){if(r.started)return t(u)});return function(u){return o.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(function(){var r=(0,ue.A)(function*(o){null===o.newVersion&&(yield t())});return function(o){return r.apply(this,arguments)}}())}setNetworkEnabled(t){var r=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget((0,ue.A)(function*(){r.started&&(yield r.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Ul(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(r=>this.isPrimary&&!r?this.bi(t).next(()=>!1):!!r&&this.Di(t).next(()=>!0))).catch(t=>{if(is(t))return rt("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return rt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return lc(t).get("owner").next(r=>Oe.resolve(this.vi(r)))}Ci(t){return Ul(t).delete(this.clientId)}Fi(){var t=this;return(0,ue.A)(function*(){if(t.isPrimary&&!t.Mi(t.Ei,18e5)){t.Ei=Date.now();const r=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Er(o,"clientMetadata");return u.U().next(d=>{const m=t.xi(d,18e5),A=d.filter(x=>-1===m.indexOf(x));return Oe.forEach(A,x=>u.delete(x.clientId)).next(()=>A)})}).catch(()=>[]);if(t.Vi)for(const o of r)t.Vi.removeItem(t.Oi(o.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?Oe.resolve(!0):lc(t).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Rt(tt.FAILED_PRECONDITION,Ma);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ul(t).U().next(o=>void 0===this.xi(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(r=>(this.isPrimary!==r&&rt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var t=this;return(0,ue.A)(function*(){t.Kr=!1,t.Li(),t.Ti&&(t.Ti.cancel(),t.Ti=null),t.Bi(),t.ki(),yield t.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const o=new xs(r,ne.oe);return t.bi(o).next(()=>t.Ci(o))}),t.Ri.close(),t.qi()})()}xi(t,r){return t.filter(o=>this.Mi(o.updateTimeMs,r)&&!this.Ni(o.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>Ul(t).U().next(r=>this.xi(r,18e5).map(o=>o.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,r){return eu.lt(t,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Ol(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return Dl.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,r,o){rt("IndexedDbPersistence","Starting transaction:",t);const u="readonly"===r?"readonly":"readwrite",d=17===(x=this.hi)?Eo:16===x?nr:15===x?vo:14===x?ua:13===x?Qo:12===x?oo:11===x?zi:void bt();var x;let m;return this.Ri.runTransaction(t,u,d,A=>(m=new xs(A,this.Qr?this.Qr.next():ne.oe),"readwrite-primary"===r?this.wi(m).next(x=>!!x||this.Si(m)).next(x=>{if(!x)throw yn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Rt(tt.FAILED_PRECONDITION,Bn);return o(m)}).next(x=>this.Di(m).next(()=>x)):this.Ki(m).next(()=>o(m)))).then(A=>(m.raiseOnCommittedEvent(),A))}Ki(t){return lc(t).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Rt(tt.FAILED_PRECONDITION,Ma)})}Di(t){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lc(t).put("owner",r)}static D(){return Yr.D()}bi(t){const r=lc(t);return r.get("owner").next(o=>this.vi(o)?(rt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Oe.resolve())}Mi(t,r){const o=Date.now();return!(t<o-r||t>o&&(yn(`Detected an update time that is in the future: ${t} > ${o}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;(0,de.nr)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var r;try{const o=null!==(null===(r=this.Vi)||void 0===r?void 0:r.getItem(this.Oi(t)));return rt("IndexedDbPersistence",`Client '${t}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return yn("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){yn("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function lc(a){return Er(a,"owner")}function Ul(a){return Er(a,"clientMetadata")}function xd(a,t){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+t+"/"+r+"/"}class kd{constructor(t,r,o,u){this.targetId=t,this.fromCache=r,this.$i=o,this.Ui=u}static Wi(t,r){let o=xn(),u=xn();for(const d of r.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new kd(t,r.fromCache,o,u)}}class I_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Jp{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,de.nr)()?8:Ms((0,de.ZQ)())>0?6:4}initialize(t,r){this.Ji=t,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(t,r,o,u){const d={result:null};return this.Yi(t,r).next(m=>{d.result=m}).next(()=>{if(!d.result)return this.Zi(t,r,u,o).next(m=>{d.result=m})}).next(()=>{if(d.result)return;const m=new I_;return this.Xi(t,r,m).next(A=>{if(d.result=A,this.zi)return this.es(t,r,m,A.size)})}).next(()=>d.result)}es(t,r,o,u){return o.documentReadCount<this.ji?(Cn()<=ze.$b.DEBUG&&rt("QueryEngine","SDK will not create cache indexes for query:",V(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Oe.resolve()):(Cn()<=ze.$b.DEBUG&&rt("QueryEngine","Query:",V(r),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Hi*u?(Cn()<=ze.$b.DEBUG&&rt("QueryEngine","The SDK decides to create cache indexes for query:",V(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,qi(r))):Oe.resolve())}Yi(t,r){if(xi(r))return Oe.resolve(null);let o=qi(r);return this.indexManager.getIndexType(t,o).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=J(r,null,"F"),o=qi(r)),this.indexManager.getDocumentsMatchingTarget(t,o).next(d=>{const m=xn(...d);return this.Ji.getDocuments(t,m).next(A=>this.indexManager.getMinOffset(t,o).next(x=>{const G=this.ts(r,A);return this.ns(r,G,m,x.readTime)?this.Yi(t,J(r,null,"F")):this.rs(t,G,r,x)}))})))}Zi(t,r,o,u){return xi(r)||u.isEqual(Yt.min())?Oe.resolve(null):this.Ji.getDocuments(t,o).next(d=>{const m=this.ts(r,d);return this.ns(r,m,o,u)?Oe.resolve(null):(Cn()<=ze.$b.DEBUG&&rt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),V(r)),this.rs(t,m,r,me(u,-1)).next(A=>A))})}ts(t,r){let o=new vr(Pe(t));return r.forEach((u,d)=>{X(t,d)&&(o=o.add(d))}),o}ns(t,r,o,u){if(null===t.limit)return!1;if(o.size!==r.size)return!0;const d="F"===t.limitType?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Xi(t,r,o){return Cn()<=ze.$b.DEBUG&&rt("QueryEngine","Using full collection scan to execute query:",V(r)),this.Ji.getDocumentsMatchingQuery(t,r,Lt.min(),o)}rs(t,r,o,u){return this.Ji.getDocumentsMatchingQuery(t,o,u).next(d=>(r.forEach(m=>{d=d.insert(m.key,m)}),d))}}class Bl{constructor(t,r,o,u){this.persistence=t,this.ss=r,this.serializer=u,this.os=new Sr(Ht),this._s=new ut(d=>jo(d),To),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(o)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.os))}}function ru(a,t,r,o){return new Bl(a,t,r,o)}function Zp(a,t){return xc.apply(this,arguments)}function xc(){return(xc=(0,ue.A)(function*(a,t){const r=Nt(a);return yield r.persistence.runTransaction("Handle user change","readonly",o=>{let u;return r.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,r.ls(t),r.mutationQueue.getAllMutationBatches(o))).next(d=>{const m=[],A=[];let x=xn();for(const G of u){m.push(G.batchId);for(const re of G.mutations)x=x.add(re.key)}for(const G of d){A.push(G.batchId);for(const re of G.mutations)x=x.add(re.key)}return r.localDocuments.getDocuments(o,x).next(G=>({hs:G,removedBatchIds:m,addedBatchIds:A}))})})})).apply(this,arguments)}function h(a){const t=Nt(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Ur.getLastRemoteSnapshotVersion(r))}function D(a,t,r){let o=xn(),u=xn();return r.forEach(d=>o=o.add(d)),t.getEntries(a,o).next(d=>{let m=nn();return r.forEach((A,x)=>{const G=d.get(A);x.isFoundDocument()!==G.isFoundDocument()&&(u=u.add(A)),x.isNoDocument()&&x.version.isEqual(Yt.min())?(t.removeEntry(A,x.readTime),m=m.insert(A,x)):!G.isValidDocument()||x.version.compareTo(G.version)>0||0===x.version.compareTo(G.version)&&G.hasPendingWrites?(t.addEntry(x),m=m.insert(A,x)):rt("LocalStore","Ignoring outdated watch update for ",A,". Current version:",G.version," Watch version:",x.version)}),{Ps:m,Is:u}})}function K(a,t){const r=Nt(a);return r.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===t&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}function ae(a,t){const r=Nt(a);return r.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return r.Ur.getTargetData(o,t).next(d=>d?(u=d,Oe.resolve(u)):r.Ur.allocateTargetId(o).next(m=>(u=new fo(t,m,"TargetPurposeListen",o.currentSequenceNumber),r.Ur.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=r.os.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.os=r.os.insert(o.targetId,o),r._s.set(t,o.targetId)),o})}function Ve(a,t,r){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,ue.A)(function*(a,t,r){const o=Nt(a),u=o.os.get(t),d=r?"readwrite":"readwrite-primary";try{r||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!is(m))throw m;rt("LocalStore",`Failed to update sequence numbers for target ${t}: ${m}`)}o.os=o.os.remove(t),o._s.delete(u.target)})).apply(this,arguments)}function $t(a,t,r){const o=Nt(a);let u=Yt.min(),d=xn();return o.persistence.runTransaction("Execute query","readwrite",m=>function(x,G,re){const pe=Nt(x),Re=pe._s.get(re);return void 0!==Re?Oe.resolve(pe.os.get(Re)):pe.Ur.getTargetData(G,re)}(o,m,qi(t)).next(A=>{if(A)return u=A.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(m,A.targetId).next(x=>{d=x})}).next(()=>o.ss.getDocumentsMatchingQuery(m,t,r?u:Yt.min(),r?d:xn())).next(A=>(Dr(o,fe(t),A),{documents:A,Ts:d})))}function In(a,t){const r=Nt(a),o=Nt(r.Ur),u=r.os.get(t);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",d=>o.ot(d,t).next(m=>m?m.target:null))}function $n(a,t){const r=Nt(a),o=r.us.get(t)||Yt.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.cs.getAllFromCollectionGroup(u,t,me(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Dr(r,t,u),u))}function Dr(a,t,r){let o=a.us.get(t)||Yt.min();r.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),a.us.set(t,o)}function Ra(){return(Ra=(0,ue.A)(function*(a,t,r,o){const u=Nt(a);let d=xn(),m=nn();for(const G of r){const re=t.Es(G.metadata.name);G.document&&(d=d.add(re));const pe=t.ds(G);pe.setReadTime(t.As(G.metadata.readTime)),m=m.insert(re,pe)}const A=u.cs.newChangeBuffer({trackRemovals:!0}),x=yield ae(u,(re=o,qi(Ni(Mn.fromString(`__bundle__/docs/${re}`)))));var re;return u.persistence.runTransaction("Apply bundle documents","readwrite",G=>D(G,A,m).next(re=>(A.apply(G),re)).next(re=>u.Ur.removeMatchingKeysForTargetId(G,x.targetId).next(()=>u.Ur.addMatchingKeys(G,d,x.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(G,re.Ps,re.Is)).next(()=>re.Ps)))})).apply(this,arguments)}function Hu(a,t){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,ue.A)(function*(a,t,r=xn()){const o=yield ae(a,qi(Hs(t.bundledQuery))),u=Nt(a);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=ki(t.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u.Gr.saveNamedQuery(d,t);const A=o.withResumeToken(zr.EMPTY_BYTE_STRING,m);return u.os=u.os.insert(A.targetId,A),u.Ur.updateTargetData(d,A).next(()=>u.Ur.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Ur.addMatchingKeys(d,r,o.targetId)).next(()=>u.Gr.saveNamedQuery(d,t))})})).apply(this,arguments)}function zu(a,t){return`firestore_clients_${a}_${t}`}function jl(a,t,r){let o=`firestore_mutations_${a}_${r}`;return t.isAuthenticated()&&(o+=`_${t.uid}`),o}function $l(a,t){return`firestore_targets_${a}_${t}`}class Ka{constructor(t,r,o,u){this.user=t,this.batchId=r,this.state=o,this.error=u}static Rs(t,r,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new Rt(u.error.code,u.error.message))),m?new Ka(t,r,u.state,d):(yn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${o}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class sa{constructor(t,r,o){this.targetId=t,this.state=r,this.error=o}static Rs(t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Rt(o.error.code,o.error.message))),d?new sa(t,o.state,u):(yn("SharedClientState",`Failed to parse target state for ID '${t}': ${r}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Wu{constructor(t,r){this.clientId=t,this.activeTargetIds=r}static Rs(t,r){const o=JSON.parse(r);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=uo();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=at(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new Wu(t,d):(yn("SharedClientState",`Failed to parse client data for instance '${t}': ${r}`),null)}}class iu{constructor(t,r){this.clientId=t,this.onlineState=r}static Rs(t){const r=JSON.parse(t);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new iu(r.clientId,r.onlineState):(yn("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Ku{constructor(){this.activeTargetIds=uo()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class dc{constructor(t,r,o,u,d){this.window=t,this.ui=r,this.persistenceKey=o,this.ps=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Sr(Ht),this.started=!1,this.bs=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.Ds=zu(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new Ku),this.Cs=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,ue.A)(function*(){const r=yield t.syncEngine.Qi();for(const u of r){if(u===t.ps)continue;const d=t.getItem(zu(t.persistenceKey,u));if(d){const m=Wu.Rs(u,d);m&&(t.Ss=t.Ss.insert(m.clientId,m))}}t.Ns();const o=t.storage.getItem(t.xs);if(o){const u=t.Ls(o);u&&t.Bs(u)}for(const u of t.bs)t.ws(u);t.bs=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.vs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(t){let r=!1;return this.Ss.forEach((o,u)=>{u.activeTargetIds.has(t)&&(r=!0)}),r}addPendingMutation(t){this.qs(t,"pending")}updateMutationState(t,r,o){this.qs(t,r,o),this.Qs(t)}addLocalQueryTarget(t){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem($l(this.persistenceKey,t));if(o){const u=sa.Rs(t,o);u&&(r=u.state)}}return this.Ks.fs(t),this.Ns(),r}removeLocalQueryTarget(t){this.Ks.gs(t),this.Ns()}isLocalQueryTarget(t){return this.Ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem($l(this.persistenceKey,t))}updateQueryState(t,r,o){this.$s(t,r,o)}handleUserChange(t,r,o){r.forEach(u=>{this.Qs(u)}),this.currentUser=t,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(t){this.Us(t)}notifyBundleLoaded(t){this.Ws(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(t){const r=this.storage.getItem(t);return rt("SharedClientState","READ",t,r),r}setItem(t,r){rt("SharedClientState","SET",t,r),this.storage.setItem(t,r)}removeItem(t){rt("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ws(t){var r=this;const o=t;if(o.storageArea===this.storage){if(rt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Ds)return void yn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,ue.A)(function*(){if(r.started){if(null!==o.key)if(r.Cs.test(o.key)){if(null==o.newValue){const u=r.Gs(o.key);return r.zs(u,null)}{const u=r.js(o.key,o.newValue);if(u)return r.zs(u.clientId,u)}}else if(r.Fs.test(o.key)){if(null!==o.newValue){const u=r.Hs(o.key,o.newValue);if(u)return r.Js(u)}}else if(r.Ms.test(o.key)){if(null!==o.newValue){const u=r.Ys(o.key,o.newValue);if(u)return r.Zs(u)}}else if(o.key===r.xs){if(null!==o.newValue){const u=r.Ls(o.newValue);if(u)return r.Bs(u)}}else if(o.key===r.vs){const u=function(m){let A=ne.oe;if(null!=m)try{const x=JSON.parse(m);ft("number"==typeof x),A=x}catch(x){yn("SharedClientState","Failed to read sequence number from WebStorage",x)}return A}(o.newValue);u!==ne.oe&&r.sequenceNumberHandler(u)}else if(o.key===r.Os){const u=r.Xs(o.newValue);yield Promise.all(u.map(d=>r.syncEngine.eo(d)))}}else r.bs.push(o)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(t,r,o){const u=new Ka(this.currentUser,t,r,o),d=jl(this.persistenceKey,this.currentUser,t);this.setItem(d,u.Vs())}Qs(t){const r=jl(this.persistenceKey,this.currentUser,t);this.removeItem(r)}Us(t){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:t}))}$s(t,r,o){const u=$l(this.persistenceKey,t),d=new sa(t,r,o);this.setItem(u,d.Vs())}Ws(t){const r=JSON.stringify(Array.from(t));this.setItem(this.Os,r)}Gs(t){const r=this.Cs.exec(t);return r?r[1]:null}js(t,r){const o=this.Gs(t);return Wu.Rs(o,r)}Hs(t,r){const o=this.Fs.exec(t),u=Number(o[1]);return Ka.Rs(new Zt(void 0!==o[2]?o[2]:null),u,r)}Ys(t,r){const o=this.Ms.exec(t),u=Number(o[1]);return sa.Rs(u,r)}Ls(t){return iu.Rs(t)}Xs(t){return JSON.parse(t)}Js(t){var r=this;return(0,ue.A)(function*(){if(t.user.uid===r.currentUser.uid)return r.syncEngine.no(t.batchId,t.state,t.error);rt("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Zs(t){return this.syncEngine.ro(t.targetId,t.state,t.error)}zs(t,r){const o=r?this.Ss.insert(t,r):this.Ss.remove(t),u=this.ks(this.Ss),d=this.ks(o),m=[],A=[];return d.forEach(x=>{u.has(x)||m.push(x)}),u.forEach(x=>{d.has(x)||A.push(x)}),this.syncEngine.io(m,A).then(()=>{this.Ss=o})}Bs(t){this.Ss.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ks(t){let r=uo();return t.forEach((o,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class qa{constructor(){this.so=new Ku,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,o){}addLocalQueryTarget(t){return this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,r,o){this.oo[t]=r}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Ku,Promise.resolve()}handleUserChange(t,r,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Ss{_o(t){}shutdown(){}}class C_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){rt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){rt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Fd=null;function Vd(){return null===Fd?Fd=268435456+Math.round(2147483648*Math.random()):Fd++,"0x"+Fd.toString(16)}const Jv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class w_{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}const zs="WebChannelConnection";class Zv extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const o=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+r.host,this.vo=`projects/${u}/databases/${d}`,this.Co="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${d}`}get Fo(){return!1}Mo(r,o,u,d,m){const A=Vd(),x=this.xo(r,o.toUriEncodedString());rt("RestConnection",`Sending RPC '${r}' ${A}:`,x,u);const G={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(G,d,m),this.No(r,x,G,u).then(re=>(rt("RestConnection",`Received RPC '${r}' ${A}: `,re),re),re=>{throw Gn("RestConnection",`RPC '${r}' ${A} failed with error: `,re,"url: ",x,"request:",u),re})}Lo(r,o,u,d,m,A){return this.Mo(r,o,u,d,m)}Oo(r,o,u){r["X-Goog-Api-Client"]="gl-js/ fire/"+tn,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((d,m)=>r[m]=d),u&&u.headers.forEach((d,m)=>r[m]=d)}xo(r,o){return`${this.Do}/v1/${o}:${Jv[r]}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,r,o,u){const d=Vd();return new Promise((m,A)=>{const x=new Ft;x.setWithCredentials(!0),x.listenOnce(Xe.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case ct.NO_ERROR:const re=x.getResponseJson();rt(zs,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(re)),m(re);break;case ct.TIMEOUT:rt(zs,`RPC '${t}' ${d} timed out`),A(new Rt(tt.DEADLINE_EXCEEDED,"Request time out"));break;case ct.HTTP_ERROR:const pe=x.getStatus();if(rt(zs,`RPC '${t}' ${d} failed with status:`,pe,"response text:",x.getResponseText()),pe>0){let Re=x.getResponseJson();Array.isArray(Re)&&(Re=Re[0]);const st=Re?.error;if(st&&st.status&&st.message){const jt=function(Kt){const Vn=Kt.toLowerCase().replace(/_/g,"-");return Object.values(tt).indexOf(Vn)>=0?Vn:tt.UNKNOWN}(st.status);A(new Rt(jt,st.message))}else A(new Rt(tt.UNKNOWN,"Server responded with status "+x.getStatus()))}else A(new Rt(tt.UNAVAILABLE,"Connection failed."));break;default:bt()}}finally{rt(zs,`RPC '${t}' ${d} completed.`)}});const G=JSON.stringify(u);rt(zs,`RPC '${t}' ${d} sending request:`,u),x.send(r,"POST",G,o,15)})}Bo(t,r,o){const u=Vd(),d=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=zt(),A=Ze(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},G=this.longPollingOptions.timeoutSeconds;void 0!==G&&(x.longPollingTimeout=Math.round(1e3*G)),this.useFetchStreams&&(x.xmlHttpFactory=new Tn({})),this.Oo(x.initMessageHeaders,r,o),x.encodeInitMessageHeaders=!0;const re=d.join("");rt(zs,`Creating RPC '${t}' stream ${u}: ${re}`,x);const pe=m.createWebChannel(re,x);let Re=!1,st=!1;const jt=new w_({Io:Kt=>{st?rt(zs,`Not sending because RPC '${t}' stream ${u} is closed:`,Kt):(Re||(rt(zs,`Opening RPC '${t}' stream ${u} transport.`),pe.open(),Re=!0),rt(zs,`RPC '${t}' stream ${u} sending:`,Kt),pe.send(Kt))},To:()=>pe.close()}),Jt=(Kt,Vn,qn)=>{Kt.listen(Vn,kn=>{try{qn(kn)}catch(or){setTimeout(()=>{throw or},0)}})};return Jt(pe,ke.EventType.OPEN,()=>{st||(rt(zs,`RPC '${t}' stream ${u} transport opened.`),jt.yo())}),Jt(pe,ke.EventType.CLOSE,()=>{st||(st=!0,rt(zs,`RPC '${t}' stream ${u} transport closed`),jt.So())}),Jt(pe,ke.EventType.ERROR,Kt=>{st||(st=!0,Gn(zs,`RPC '${t}' stream ${u} transport errored:`,Kt),jt.So(new Rt(tt.UNAVAILABLE,"The operation could not be completed")))}),Jt(pe,ke.EventType.MESSAGE,Kt=>{var Vn;if(!st){const qn=Kt.data[0];ft(!!qn);const or=qn.error||(null===(Vn=qn[0])||void 0===Vn?void 0:Vn.error);if(or){rt(zs,`RPC '${t}' stream ${u} received error:`,or);const $r=or.status;let Ar=function(Ge){const nt=ai[Ge];if(void 0!==nt)return tc(nt)}($r),et=or.message;void 0===Ar&&(Ar=tt.INTERNAL,et="Unknown error status: "+$r+" with message "+or.message),st=!0,jt.So(new Rt(Ar,et)),pe.close()}else rt(zs,`RPC '${t}' stream ${u} received:`,qn),jt.bo(qn)}}),Jt(A,yt.STAT_EVENT,Kt=>{Kt.stat===gt.PROXY?rt(zs,`RPC '${t}' stream ${u} detected buffering proxy`):Kt.stat===gt.NOPROXY&&rt(zs,`RPC '${t}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{jt.wo()},0),jt}}function eg(){return typeof window<"u"?window:null}function Hl(){return typeof document<"u"?document:null}function su(a){return new to(a,!0)}class hf{constructor(t,r,o=1e3,u=1.5,d=6e4){this.ui=t,this.timerId=r,this.ko=o,this.qo=u,this.Qo=d,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const r=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),u=Math.max(0,r-o);u>0&&rt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,u,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class T_{constructor(t,r,o,u,d,m,A,x){this.ui=t,this.Ho=o,this.Jo=u,this.connection=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=A,this.listener=x,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hf(t,r)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var t=this;return(0,ue.A)(function*(){t.n_()&&(yield t.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){var t=this;return(0,ue.A)(function*(){if(t.r_())return t.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,r){var o=this;return(0,ue.A)(function*(){o.u_(),o.c_(),o.t_.cancel(),o.Yo++,4!==t?o.t_.reset():r&&r.code===tt.RESOURCE_EXHAUSTED?(yn(r.toString()),yn("Using maximum backoff delay to prevent overloading the backend."),o.t_.Wo()):r&&r.code===tt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.l_(),o.stream.close(),o.stream=null),o.state=t,yield o.listener.mo(r)})()}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Yo===r&&this.P_(o,u)},o=>{t(()=>{const u=new Rt(tt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(u)})})}P_(t,r){const o=this.h_(this.Yo);this.stream=this.T_(t,r),this.stream.Eo(()=>{o(()=>this.listener.Eo())}),this.stream.Ro(()=>{o(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(u=>{o(()=>this.I_(u))}),this.stream.onMessage(u=>{o(()=>1==++this.e_?this.E_(u):this.onNext(u))})}i_(){var t=this;this.state=5,this.t_.Go((0,ue.A)(function*(){t.state=0,t.start()}))}I_(t){return rt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return r=>{this.ui.enqueueAndForget(()=>this.Yo===t?r():(rt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eE extends T_{constructor(t,r,o,u,d,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,o,u,m),this.serializer=d}T_(t,r){return this.connection.Bo("Listen",t,r)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const r=function Tl(a,t){let r;if("targetChange"in t){const o="NO_CHANGE"===(G=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:bt(),u=t.targetChange.targetIds||[],d=function(G,re){return G.useProto3Json?(ft(void 0===re||"string"==typeof re),zr.fromBase64String(re||"")):(ft(void 0===re||re instanceof Buffer||re instanceof Uint8Array),zr.fromUint8Array(re||new Uint8Array))}(a,t.targetChange.resumeToken),m=t.targetChange.cause,A=m&&function(G){const re=void 0===G.code?tt.UNKNOWN:tc(G.code);return new Rt(re,G.message||"")}(m);r=new Sa(o,u,d,A||null)}else if("documentChange"in t){const o=t.documentChange,u=ya(a,o.document.name),d=ki(o.document.updateTime),m=o.document.createTime?ki(o.document.createTime):Yt.min(),A=new Zr({mapValue:{fields:o.document.fields}}),x=sr.newFoundDocument(u,d,m,A);r=new bo(o.targetIds||[],o.removedTargetIds||[],x.key,x)}else if("documentDelete"in t){const o=t.documentDelete,u=ya(a,o.document),d=o.readTime?ki(o.readTime):Yt.min(),m=sr.newNoDocument(u,d);r=new bo([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in t){const o=t.documentRemove,u=ya(a,o.document);r=new bo([],o.removedTargetIds||[],u,null)}else{if(!("filter"in t))return bt();{const o=t.filter,{count:u=0,unchangedNames:d}=o,m=new El(u,d);r=new ba(o.targetId,m)}}var G;return r}(this.serializer,t),o=function(d){if(!("targetChange"in d))return Yt.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?Yt.min():m.readTime?ki(m.readTime):Yt.min()}(t);return this.listener.d_(r,o)}A_(t){const r={};r.database=Ru(this.serializer),r.addTarget=function(d,m){let A;const x=m.target;if(A=Aa(x)?{documents:P(d,x)}:{query:w(d,x)._t},A.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){A.resumeToken=Qc(d,m.resumeToken);const G=Ba(d,m.expectedCount);null!==G&&(A.expectedCount=G)}else if(m.snapshotVersion.compareTo(Yt.min())>0){A.readTime=ic(d,m.snapshotVersion.toTimestamp());const G=Ba(d,m.expectedCount);null!==G&&(A.expectedCount=G)}return A}(this.serializer,t);const o=function te(a,t){const r=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt()}}(t.purpose);return null==r?null:{"goog-listen-tags":r}}(0,t);o&&(r.labels=o),this.a_(r)}R_(t){const r={};r.database=Ru(this.serializer),r.removeTarget=t,this.a_(r)}}class tE extends T_{constructor(t,r,o,u,d,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,o,u,m),this.serializer=d}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,r){return this.connection.Bo("Write",t,r)}E_(t){return ft(!!t.streamToken),this.lastStreamToken=t.streamToken,ft(!t.writeResults||0===t.writeResults.length),this.listener.f_()}onNext(t){ft(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const r=function v(a,t){return a&&a.length>0?(ft(void 0!==t),a.map(r=>function(u,d){let m=ki(u.updateTime?u.updateTime:d);return m.isEqual(Yt.min())&&(m=ki(d)),new Cr(m,u.transformResults||[])}(r,t))):[]}(t.writeResults,t.commitTime),o=ki(t.commitTime);return this.listener.g_(o,r)}p_(){const t={};t.database=Ru(this.serializer),this.a_(t)}m_(t){const r={streamToken:this.lastStreamToken,writes:t.map(o=>Ou(this.serializer,o))};this.a_(r)}}class D_ extends class{}{constructor(t,r,o,u){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=o,this.serializer=u,this.y_=!1}w_(){if(this.y_)throw new Rt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,r,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Mo(t,ja(r,o),u,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Rt(tt.UNKNOWN,d.toString())})}Lo(t,r,o,u,d){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,A])=>this.connection.Lo(t,ja(r,o),u,m,A,d)).catch(m=>{throw"FirebaseError"===m.name?(m.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Rt(tt.UNKNOWN,m.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class nE{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const r=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(yn(r),this.D_=!1):rt("OnlineStateTracker",r)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class A_{constructor(t,r,o,u,d){var m=this;this.localStore=t,this.datastore=r,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=d,this.k_._o(A=>{o.enqueueAndForget((0,ue.A)(function*(){var x;So(m)&&(rt("RemoteStore","Restarting streams for network reachability change."),yield(x=(0,ue.A)(function*(re){const pe=Nt(re);pe.L_.add(4),yield Ud(pe),pe.q_.set("Unknown"),pe.L_.delete(4),yield Ld(pe)}),function G(re){return x.apply(this,arguments)})(m))}))}),this.q_=new nE(o,u)}}function Ld(a){return tg.apply(this,arguments)}function tg(){return(tg=(0,ue.A)(function*(a){if(So(a))for(const t of a.B_)yield t(!0)})).apply(this,arguments)}function Ud(a){return ff.apply(this,arguments)}function ff(){return(ff=(0,ue.A)(function*(a){for(const t of a.B_)yield t(!1)})).apply(this,arguments)}function Bd(a,t){const r=Nt(a);r.N_.has(t.targetId)||(r.N_.set(t.targetId,t),jd(r)?S_(r):Wl(r).r_()&&b_(r,t))}function so(a,t){const r=Nt(a),o=Wl(r);r.N_.delete(t),o.r_()&&ng(r,t),0===r.N_.size&&(o.r_()?o.o_():So(r)&&r.q_.set("Unknown"))}function b_(a,t){if(a.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Yt.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Wl(a).A_(t)}function ng(a,t){a.Q_.xe(t),Wl(a).R_(t)}function S_(a){a.Q_=new Su({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>a.N_.get(t)||null,tt:()=>a.datastore.serializer.databaseId}),Wl(a).start(),a.q_.v_()}function jd(a){return So(a)&&!Wl(a).n_()&&a.N_.size>0}function So(a){return 0===Nt(a).L_.size}function rg(a){a.Q_=void 0}function Gl(a){return ig.apply(this,arguments)}function ig(){return(ig=(0,ue.A)(function*(a){a.q_.set("Online")})).apply(this,arguments)}function rE(a){return pf.apply(this,arguments)}function pf(){return(pf=(0,ue.A)(function*(a){a.N_.forEach((t,r)=>{b_(a,t)})})).apply(this,arguments)}function H0(a,t){return P_.apply(this,arguments)}function P_(){return(P_=(0,ue.A)(function*(a,t){rg(a),jd(a)?(a.q_.M_(t),S_(a)):a.q_.set("Unknown")})).apply(this,arguments)}function G0(a,t,r){return M_.apply(this,arguments)}function M_(){return M_=(0,ue.A)(function*(a,t,r){if(a.q_.set("Online"),t instanceof Sa&&2===t.state&&t.cause)try{yield(o=(0,ue.A)(function*(d,m){const A=m.cause;for(const x of m.targetIds)d.N_.has(x)&&(yield d.remoteSyncer.rejectListen(x,A),d.N_.delete(x),d.Q_.removeTarget(x))}),function u(d,m){return o.apply(this,arguments)})(a,t)}catch(o){rt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),yield sg(a,o)}else if(t instanceof bo?a.Q_.Ke(t):t instanceof ba?a.Q_.He(t):a.Q_.We(t),!r.isEqual(Yt.min()))try{const o=yield h(a.localStore);r.compareTo(o)>=0&&(yield function(d,m){const A=d.Q_.rt(m);return A.targetChanges.forEach((x,G)=>{if(x.resumeToken.approximateByteSize()>0){const re=d.N_.get(G);re&&d.N_.set(G,re.withResumeToken(x.resumeToken,m))}}),A.targetMismatches.forEach((x,G)=>{const re=d.N_.get(x);if(!re)return;d.N_.set(x,re.withResumeToken(zr.EMPTY_BYTE_STRING,re.snapshotVersion)),ng(d,x);const pe=new fo(re.target,x,G,re.sequenceNumber);b_(d,pe)}),d.remoteSyncer.applyRemoteEvent(A)}(a,r))}catch(o){rt("RemoteStore","Failed to raise snapshot:",o),yield sg(a,o)}var o}),M_.apply(this,arguments)}function sg(a,t,r){return og.apply(this,arguments)}function og(){return(og=(0,ue.A)(function*(a,t,r){if(!is(t))throw t;a.L_.add(1),yield Ud(a),a.q_.set("Offline"),r||(r=()=>h(a.localStore)),a.asyncQueue.enqueueRetryable((0,ue.A)(function*(){rt("RemoteStore","Retrying IndexedDB access"),yield r(),a.L_.delete(1),yield Ld(a)}))})).apply(this,arguments)}function qu(a,t){return t().catch(r=>sg(a,r,t))}function hc(a){return gf.apply(this,arguments)}function gf(){return(gf=(0,ue.A)(function*(a){const t=Nt(a),r=ou(t);let o=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;iE(t);)try{const u=yield K(t.localStore,o);if(null===u){0===t.O_.length&&r.o_();break}o=u.batchId,ag(t,u)}catch(u){yield sg(t,u)}Qa(t)&&R_(t)})).apply(this,arguments)}function iE(a){return So(a)&&a.O_.length<10}function ag(a,t){a.O_.push(t);const r=ou(a);r.r_()&&r.V_&&r.m_(t.mutations)}function Qa(a){return So(a)&&!ou(a).n_()&&a.O_.length>0}function R_(a){ou(a).start()}function cg(a){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,ue.A)(function*(a){ou(a).p_()})).apply(this,arguments)}function sE(a){return mf.apply(this,arguments)}function mf(){return(mf=(0,ue.A)(function*(a){const t=ou(a);for(const r of a.O_)t.m_(r.mutations)})).apply(this,arguments)}function O_(a,t,r){return zl.apply(this,arguments)}function zl(){return(zl=(0,ue.A)(function*(a,t,r){const o=a.O_.shift(),u=ho.from(o,t,r);yield qu(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),yield hc(a)})).apply(this,arguments)}function _f(a,t){return $d.apply(this,arguments)}function $d(){return $d=(0,ue.A)(function*(a,t){var r;t&&ou(a).V_&&(yield(r=(0,ue.A)(function*(u,d){if(Dc(A=d.code)&&A!==tt.ABORTED){const m=u.O_.shift();ou(u).s_(),yield qu(u,()=>u.remoteSyncer.rejectFailedWrite(m.batchId,d)),yield hc(u)}var A}),function o(u,d){return r.apply(this,arguments)})(a,t)),Qa(a)&&R_(a)}),$d.apply(this,arguments)}function N_(a,t){return ug.apply(this,arguments)}function ug(){return(ug=(0,ue.A)(function*(a,t){const r=Nt(a);r.asyncQueue.verifyOperationInProgress(),rt("RemoteStore","RemoteStore received new credentials");const o=So(r);r.L_.add(3),yield Ud(r),o&&r.q_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(t),r.L_.delete(3),yield Ld(r)})).apply(this,arguments)}function lg(a,t){return yf.apply(this,arguments)}function yf(){return(yf=(0,ue.A)(function*(a,t){const r=Nt(a);t?(r.L_.delete(2),yield Ld(r)):t||(r.L_.add(2),yield Ud(r),r.q_.set("Unknown"))})).apply(this,arguments)}function Wl(a){return a.K_||(a.K_=function(r,o,u){const d=Nt(r);return d.w_(),new eE(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:Gl.bind(null,a),Ro:rE.bind(null,a),mo:H0.bind(null,a),d_:G0.bind(null,a)}),a.B_.push(function(){var t=(0,ue.A)(function*(r){r?(a.K_.s_(),jd(a)?S_(a):a.q_.set("Unknown")):(yield a.K_.stop(),rg(a))});return function(r){return t.apply(this,arguments)}}())),a.K_}function ou(a){return a.U_||(a.U_=function(r,o,u){const d=Nt(r);return d.w_(),new tE(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:()=>Promise.resolve(),Ro:cg.bind(null,a),mo:_f.bind(null,a),f_:sE.bind(null,a),g_:O_.bind(null,a)}),a.B_.push(function(){var t=(0,ue.A)(function*(r){r?(a.U_.s_(),yield hc(a)):(yield a.U_.stop(),a.O_.length>0&&(rt("RemoteStore",`Stopping write stream with ${a.O_.length} pending writes`),a.O_=[]))});return function(r){return t.apply(this,arguments)}}())),a.U_}class Po{constructor(t,r,o,u,d){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,o,u,d){const m=Date.now()+o,A=new Po(t,r,m,u,d);return A.start(o),A}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Rt(tt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function au(a,t){if(yn("AsyncQueue",`${t}: ${a}`),is(a))return new Rt(tt.UNAVAILABLE,`${t}: ${a}`);throw a}class Xu{constructor(t){this.comparator=t?(r,o)=>t(r,o)||Te.comparator(r.key,o.key):(r,o)=>Te.comparator(r.key,o.key),this.keyedMap=ur(),this.sortedSet=new Sr(this.comparator)}static emptySet(t){return new Xu(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,o)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Xu)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,r){const o=new Xu;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=r,o}}class vf{constructor(){this.W_=new Sr(Te.comparator)}track(t){const r=t.doc.key,o=this.W_.get(r);o?0!==t.type&&3===o.type?this.W_=this.W_.insert(r,t):3===t.type&&1!==o.type?this.W_=this.W_.insert(r,{type:o.type,doc:t.doc}):2===t.type&&2===o.type?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):2===t.type&&0===o.type?this.W_=this.W_.insert(r,{type:0,doc:t.doc}):1===t.type&&0===o.type?this.W_=this.W_.remove(r):1===t.type&&2===o.type?this.W_=this.W_.insert(r,{type:1,doc:o.doc}):0===t.type&&1===o.type?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):bt():this.W_=this.W_.insert(r,t)}G_(){const t=[];return this.W_.inorderTraversal((r,o)=>{t.push(o)}),t}}class Ps{constructor(t,r,o,u,d,m,A,x,G){this.query=t,this.docs=r,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=A,this.excludesMetadataChanges=x,this.hasCachedResults=G}static fromInitialDocuments(t,r,o,u,d){const m=[];return r.forEach(A=>{m.push({type:0,doc:A})}),new Ps(t,r,Xu.emptySet(r),m,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&I(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,o=t.docChanges;if(r.length!==o.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==o[u].type||!r[u].doc.isEqual(o[u].doc))return!1;return!0}}class Hd{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class x_{constructor(){this.queries=dg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(r,o){const u=Nt(r),d=u.queries;u.queries=dg(),d.forEach((m,A)=>{for(const x of A.j_)x.onError(o)})}(this,new Rt(tt.ABORTED,"Firestore shutting down"))}}function dg(){return new ut(a=>T(a),I)}function hg(a,t){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,ue.A)(function*(a,t){const r=Nt(a);let o=3;const u=t.query;let d=r.queries.get(u);d?!d.H_()&&t.J_()&&(o=2):(d=new Hd,o=t.J_()?0:1);try{switch(o){case 0:d.z_=yield r.onListen(u,!0);break;case 1:d.z_=yield r.onListen(u,!1);break;case 2:yield r.onFirstRemoteStoreListen(u)}}catch(m){const A=au(m,`Initialization of query '${V(t.query)}' failed`);return void t.onError(A)}r.queries.set(u,d),d.j_.push(t),t.Z_(r.onlineState),d.z_&&t.X_(d.z_)&&pg(r)})).apply(this,arguments)}function fg(a,t){return If.apply(this,arguments)}function If(){return(If=(0,ue.A)(function*(a,t){const r=Nt(a),o=t.query;let u=3;const d=r.queries.get(o);if(d){const m=d.j_.indexOf(t);m>=0&&(d.j_.splice(m,1),0===d.j_.length?u=t.J_()?0:1:!d.H_()&&t.J_()&&(u=2))}switch(u){case 0:return r.queries.delete(o),r.onUnlisten(o,!0);case 1:return r.queries.delete(o),r.onUnlisten(o,!1);case 2:return r.onLastRemoteStoreUnlisten(o);default:return}})).apply(this,arguments)}function oE(a,t){const r=Nt(a);let o=!1;for(const u of t){const m=r.queries.get(u.query);if(m){for(const A of m.j_)A.X_(u)&&(o=!0);m.z_=u}}o&&pg(r)}function k_(a,t,r){const o=Nt(a),u=o.queries.get(t);if(u)for(const d of u.j_)d.onError(r);o.queries.delete(t)}function pg(a){a.Y_.forEach(t=>{t.next()})}var gg,F_;(F_=gg||(gg={})).ea="default",F_.Cache="cache";class mg{constructor(t,r,o){this.query=t,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(t){if(!this.options.includeMetadataChanges){const o=[];for(const u of t.docChanges)3!==u.type&&o.push(u);t=new Ps(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.na?this.ia(t)&&(this.ta.next(t),r=!0):this.sa(t,this.onlineState)&&(this.oa(t),r=!0),this.ra=t,r}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),r=!0),r}sa(t,r){return!t.fromCache||!this.J_()||(!this.options._a||!("Offline"!==r))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===r)}ia(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(t){t=Ps.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==gg.Cache}}class V_{constructor(t,r){this.aa=t,this.byteLength=r}ua(){return"metadata"in this.aa}}class _g{constructor(t){this.serializer=t}Es(t){return ya(this.serializer,t)}ds(t){return t.metadata.exists?Zh(this.serializer,t.document,!1):sr.newNoDocument(this.Es(t.metadata.name),this.As(t.metadata.readTime))}As(t){return ki(t)}}class L_{constructor(t,r,o){this.ca=t,this.localStore=r,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gd(t)}la(t){this.progress.bytesLoaded+=t.byteLength;let r=this.progress.documentsLoaded;if(t.aa.namedQuery)this.queries.push(t.aa.namedQuery);else if(t.aa.documentMetadata){this.documents.push({metadata:t.aa.documentMetadata}),t.aa.documentMetadata.exists||++r;const o=Mn.fromString(t.aa.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else t.aa.document&&(this.documents[this.documents.length-1].document=t.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(t){const r=new Map,o=new _g(this.serializer);for(const u of t)if(u.metadata.queries){const d=o.Es(u.metadata.name);for(const m of u.metadata.queries){const A=(r.get(m)||xn()).add(d);r.set(m,A)}}return r}complete(){var t=this;return(0,ue.A)(function*(){const r=yield function io(a,t,r,o){return Ra.apply(this,arguments)}(t.localStore,new _g(t.serializer),t.documents,t.ca.id),o=t.ha(t.documents);for(const u of t.queries)yield Hu(t.localStore,u,o.get(u.name));return t.progress.taskState="Success",{progress:t.progress,Pa:t.collectionGroups,Ia:r}})()}}function Gd(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class yg{constructor(t){this.key=t}}class vg{constructor(t){this.key=t}}class Eg{constructor(t,r){this.query=t,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xn(),this.mutatedKeys=xn(),this.Aa=Pe(t),this.Ra=new Xu(this.Aa)}get Va(){return this.Ta}ma(t,r){const o=r?r.fa:new vf,u=r?r.Ra:this.Ra;let d=r?r.mutatedKeys:this.mutatedKeys,m=u,A=!1;const x="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,G="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal((re,pe)=>{const Re=u.get(re),st=X(this.query,pe)?pe:null,jt=!!Re&&this.mutatedKeys.has(Re.key),Jt=!!st&&(st.hasLocalMutations||this.mutatedKeys.has(st.key)&&st.hasCommittedMutations);let Kt=!1;Re&&st?Re.data.isEqual(st.data)?jt!==Jt&&(o.track({type:3,doc:st}),Kt=!0):this.ga(Re,st)||(o.track({type:2,doc:st}),Kt=!0,(x&&this.Aa(st,x)>0||G&&this.Aa(st,G)<0)&&(A=!0)):!Re&&st?(o.track({type:0,doc:st}),Kt=!0):Re&&!st&&(o.track({type:1,doc:Re}),Kt=!0,(x||G)&&(A=!0)),Kt&&(st?(m=m.add(st),d=Jt?d.add(re):d.delete(re)):(m=m.delete(re),d=d.delete(re)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const re="F"===this.query.limitType?m.last():m.first();m=m.delete(re.key),d=d.delete(re.key),o.track({type:1,doc:re})}return{Ra:m,fa:o,ns:A,mutatedKeys:d}}ga(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,o,u){const d=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const m=t.fa.G_();m.sort((re,pe)=>function(st,jt){const Jt=Kt=>{switch(Kt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt()}};return Jt(st)-Jt(jt)}(re.type,pe.type)||this.Aa(re.doc,pe.doc)),this.pa(o),u=null!=u&&u;const A=r&&!u?this.ya():[],x=0===this.da.size&&this.current&&!u?1:0,G=x!==this.Ea;return this.Ea=x,0!==m.length||G?{snapshot:new Ps(this.query,t.Ra,d,m,t.mutatedKeys,0===x,G,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:A}:{wa:A}}Z_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=xn(),this.Ra.forEach(o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))});const r=[];return t.forEach(o=>{this.da.has(o)||r.push(new vg(o))}),this.da.forEach(o=>{t.has(o)||r.push(new yg(o))}),r}ba(t){this.Ta=t.Ts,this.da=xn();const r=this.ma(t.documents);return this.applyChanges(r,!0)}Da(){return Ps.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class U_{constructor(t,r,o){this.query=t,this.targetId=r,this.view=o}}class aE{constructor(t){this.key=t,this.va=!1}}class cE{constructor(t,r,o,u,d,m){this.localStore=t,this.remoteStore=r,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.Ca={},this.Fa=new ut(A=>T(A),I),this.Ma=new Map,this.xa=new Set,this.Oa=new Sr(Te.comparator),this.Na=new Map,this.La=new nu,this.Ba={},this.ka=new Map,this.qa=Gs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function uE(a,t){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,ue.A)(function*(a,t,r=!0){const o=Fg(a);let u;const d=o.Fa.get(t);return d?(o.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.Da()):u=yield Cg(o,t,r,!0),u})).apply(this,arguments)}function B_(a,t){return j_.apply(this,arguments)}function j_(){return(j_=(0,ue.A)(function*(a,t){const r=Fg(a);yield Cg(r,t,!0,!1)})).apply(this,arguments)}function Cg(a,t,r,o){return wg.apply(this,arguments)}function wg(){return(wg=(0,ue.A)(function*(a,t,r,o){const u=yield ae(a.localStore,qi(t)),d=u.targetId,m=r?a.sharedClientState.addLocalQueryTarget(d):"not-current";let A;return o&&(A=yield Tg(a,t,d,"current"===m,u.resumeToken)),a.isPrimaryClient&&r&&Bd(a.remoteStore,u),A})).apply(this,arguments)}function Tg(a,t,r,o,u){return $_.apply(this,arguments)}function $_(){return $_=(0,ue.A)(function*(a,t,r,o,u){a.Ka=(pe,Re,st)=>{return(jt=(0,ue.A)(function*(Kt,Vn,qn,kn){let or=Vn.view.ma(qn);or.ns&&(or=yield $t(Kt.localStore,Vn.query,!1).then(({documents:Se})=>Vn.view.ma(Se,or)));const $r=kn&&kn.targetChanges.get(Vn.targetId),Ar=kn&&null!=kn.targetMismatches.get(Vn.targetId),et=Vn.view.applyChanges(or,Kt.isPrimaryClient,$r,Ar);return Wd(Kt,Vn.targetId,et.wa),et.snapshot}),function Jt(Kt,Vn,qn,kn){return jt.apply(this,arguments)})(a,pe,Re,st);var jt};const d=yield $t(a.localStore,t,!0),m=new Eg(t,d.Ts),A=m.ma(d.documents),x=_i.createSynthesizedTargetChangeForCurrentChange(r,o&&"Offline"!==a.onlineState,u),G=m.applyChanges(A,a.isPrimaryClient,x);Wd(a,r,G.wa);const re=new U_(t,r,m);return a.Fa.set(t,re),a.Ma.has(r)?a.Ma.get(r).push(t):a.Ma.set(r,[t]),G.snapshot}),$_.apply(this,arguments)}function lE(a,t,r){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,ue.A)(function*(a,t,r){const o=Nt(a),u=o.Fa.get(t),d=o.Ma.get(u.targetId);if(d.length>1)return o.Ma.set(u.targetId,d.filter(m=>!I(m,t))),void o.Fa.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Ve(o.localStore,u.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(u.targetId),r&&so(o.remoteStore,u.targetId),uu(o,u.targetId)}).catch(bn))):(uu(o,u.targetId),yield Ve(o.localStore,u.targetId,!0))})).apply(this,arguments)}function Dg(a,t){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,ue.A)(function*(a,t){const r=Nt(a),o=r.Fa.get(t),u=r.Ma.get(o.targetId);r.isPrimaryClient&&1===u.length&&(r.sharedClientState.removeLocalQueryTarget(o.targetId),so(r.remoteStore,o.targetId))})).apply(this,arguments)}function wf(){return(wf=(0,ue.A)(function*(a,t,r){const o=Zu(a);try{const u=yield function(m,A){const x=Nt(m),G=Xt.now(),re=A.reduce((st,jt)=>st.add(jt.key),xn());let pe,Re;return x.persistence.runTransaction("Locally write mutations","readwrite",st=>{let jt=nn(),Jt=xn();return x.cs.getEntries(st,re).next(Kt=>{jt=Kt,jt.forEach((Vn,qn)=>{qn.isValidDocument()||(Jt=Jt.add(Vn))})}).next(()=>x.localDocuments.getOverlayedDocuments(st,jt)).next(Kt=>{pe=Kt;const Vn=[];for(const qn of A){const kn=xr(qn,pe.get(qn.key).overlayedDocument);null!=kn&&Vn.push(new pr(qn.key,kn,co(kn.value.mapValue),dn.exists(!0)))}return x.mutationQueue.addMutationBatch(st,G,Vn,A)}).next(Kt=>{Re=Kt;const Vn=Kt.applyToLocalDocumentSet(pe,Jt);return x.documentOverlayCache.saveOverlays(st,Kt.batchId,Vn)})}).then(()=>({batchId:Re.batchId,changes:er(pe)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(u.batchId),function(m,A,x){let G=m.Ba[m.currentUser.toKey()];G||(G=new Sr(Ht)),G=G.insert(A,x),m.Ba[m.currentUser.toKey()]=G}(o,u.batchId,r),yield Oa(o,u.changes),yield hc(o.remoteStore)}catch(u){const d=au(u,"Failed to persist write");r.reject(d)}})).apply(this,arguments)}function H_(a,t){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,ue.A)(function*(a,t){const r=Nt(a);try{const o=yield function f(a,t){const r=Nt(a),o=t.snapshotVersion;let u=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=r.cs.newChangeBuffer({trackRemovals:!0});u=r.os;const A=[];t.targetChanges.forEach((re,pe)=>{const Re=u.get(pe);if(!Re)return;A.push(r.Ur.removeMatchingKeys(d,re.removedDocuments,pe).next(()=>r.Ur.addMatchingKeys(d,re.addedDocuments,pe)));let st=Re.withSequenceNumber(d.currentSequenceNumber);var Jt,Kt,Vn;null!==t.targetMismatches.get(pe)?st=st.withResumeToken(zr.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):re.resumeToken.approximateByteSize()>0&&(st=st.withResumeToken(re.resumeToken,o)),u=u.insert(pe,st),Kt=st,Vn=re,(0===(Jt=Re).resumeToken.approximateByteSize()||Kt.snapshotVersion.toMicroseconds()-Jt.snapshotVersion.toMicroseconds()>=3e8||Vn.addedDocuments.size+Vn.modifiedDocuments.size+Vn.removedDocuments.size>0)&&A.push(r.Ur.updateTargetData(d,st))});let x=nn(),G=xn();if(t.documentUpdates.forEach(re=>{t.resolvedLimboDocuments.has(re)&&A.push(r.persistence.referenceDelegate.updateLimboDocument(d,re))}),A.push(D(d,m,t.documentUpdates).next(re=>{x=re.Ps,G=re.Is})),!o.isEqual(Yt.min())){const re=r.Ur.getLastRemoteSnapshotVersion(d).next(pe=>r.Ur.setTargetsMetadata(d,d.currentSequenceNumber,o));A.push(re)}return Oe.waitFor(A).next(()=>m.apply(d)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,x,G)).next(()=>x)}).then(d=>(r.os=u,d))}(r.localStore,t);t.targetChanges.forEach((u,d)=>{const m=r.Na.get(d);m&&(ft(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.va=!0:u.modifiedDocuments.size>0?ft(m.va):u.removedDocuments.size>0&&(ft(m.va),m.va=!1))}),yield Oa(r,o,t)}catch(o){yield bn(o)}})).apply(this,arguments)}function Df(a,t,r){const o=Nt(a);if(o.isPrimaryClient&&0===r||!o.isPrimaryClient&&1===r){const u=[];o.Fa.forEach((d,m)=>{const A=m.view.Z_(t);A.snapshot&&u.push(A.snapshot)}),function(m,A){const x=Nt(m);x.onlineState=A;let G=!1;x.queries.forEach((re,pe)=>{for(const Re of pe.j_)Re.Z_(A)&&(G=!0)}),G&&pg(x)}(o.eventManager,t),u.length&&o.Ca.d_(u),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}function z0(a,t,r){return bg.apply(this,arguments)}function bg(){return(bg=(0,ue.A)(function*(a,t,r){const o=Nt(a);o.sharedClientState.updateQueryState(t,"rejected",r);const u=o.Na.get(t),d=u&&u.key;if(d){let m=new Sr(Te.comparator);m=m.insert(d,sr.newNoDocument(d,Yt.min()));const A=xn().add(d),x=new rc(Yt.min(),new Map,new Sr(Ht),m,A);yield H_(o,x),o.Oa=o.Oa.remove(d),o.Na.delete(t),Ju(o)}else yield Ve(o.localStore,t,!1).then(()=>uu(o,t,r)).catch(bn)})).apply(this,arguments)}function dE(a,t){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,ue.A)(function*(a,t){const r=Nt(a),o=t.batch.batchId;try{const u=yield function E(a,t){const r=Nt(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=t.batch.keys(),d=r.cs.newChangeBuffer({trackRemovals:!0});return function(A,x,G,re){const pe=G.batch,Re=pe.keys();let st=Oe.resolve();return Re.forEach(jt=>{st=st.next(()=>re.getEntry(x,jt)).next(Jt=>{const Kt=G.docVersions.get(jt);ft(null!==Kt),Jt.version.compareTo(Kt)<0&&(pe.applyToRemoteDocument(Jt,G),Jt.isValidDocument()&&(Jt.setReadTime(G.commitVersion),re.addEntry(Jt)))})}),st.next(()=>A.mutationQueue.removeMutationBatch(x,pe))}(r,o,t,d).next(()=>d.apply(o)).next(()=>r.mutationQueue.performConsistencyCheck(o)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(o,u,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(A){let x=xn();for(let G=0;G<A.mutationResults.length;++G)A.mutationResults[G].transformResults.length>0&&(x=x.add(A.batch.mutations[G].key));return x}(t))).next(()=>r.localDocuments.getDocuments(o,u))})}(r.localStore,t);zd(r,o,null),Pg(r,o),r.sharedClientState.updateMutationState(o,"acknowledged"),yield Oa(r,u)}catch(u){yield bn(u)}})).apply(this,arguments)}function hE(a,t,r){return G_.apply(this,arguments)}function G_(){return(G_=(0,ue.A)(function*(a,t,r){const o=Nt(a);try{const u=yield function(m,A){const x=Nt(m);return x.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let re;return x.mutationQueue.lookupMutationBatch(G,A).next(pe=>(ft(null!==pe),re=pe.keys(),x.mutationQueue.removeMutationBatch(G,pe))).next(()=>x.mutationQueue.performConsistencyCheck(G)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(G,re,A)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,re)).next(()=>x.localDocuments.getDocuments(G,re))})}(o.localStore,t);zd(o,t,r),Pg(o,t),o.sharedClientState.updateMutationState(t,"rejected",r),yield Oa(o,u)}catch(u){yield bn(u)}})).apply(this,arguments)}function Kl(){return(Kl=(0,ue.A)(function*(a,t){const r=Nt(a);So(r.remoteStore)||rt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const A=Nt(m);return A.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>A.mutationQueue.getHighestUnacknowledgedBatchId(x))}(r.localStore);if(-1===o)return void t.resolve();const u=r.ka.get(o)||[];u.push(t),r.ka.set(o,u)}catch(o){const u=au(o,"Initialization of waitForPendingWrites() operation failed");t.reject(u)}})).apply(this,arguments)}function Pg(a,t){(a.ka.get(t)||[]).forEach(r=>{r.resolve()}),a.ka.delete(t)}function zd(a,t,r){const o=Nt(a);let u=o.Ba[o.currentUser.toKey()];if(u){const d=u.get(t);d&&(r?d.reject(r):d.resolve(),u=u.remove(t)),o.Ba[o.currentUser.toKey()]=u}}function uu(a,t,r=null){a.sharedClientState.removeLocalQueryTarget(t);for(const o of a.Ma.get(t))a.Fa.delete(o),r&&a.Ca.$a(o,r);a.Ma.delete(t),a.isPrimaryClient&&a.La.gr(t).forEach(o=>{a.La.containsKey(o)||Yu(a,o)})}function Yu(a,t){a.xa.delete(t.path.canonicalString());const r=a.Oa.get(t);null!==r&&(so(a.remoteStore,r),a.Oa=a.Oa.remove(t),a.Na.delete(r),Ju(a))}function Wd(a,t,r){for(const o of r)o instanceof yg?(a.La.addReference(o.key,t),Mg(a,o)):o instanceof vg?(rt("SyncEngine","Document no longer in limbo: "+o.key),a.La.removeReference(o.key,t),a.La.containsKey(o.key)||Yu(a,o.key)):bt()}function Mg(a,t){const r=t.key,o=r.path.canonicalString();a.Oa.get(r)||a.xa.has(o)||(rt("SyncEngine","New document in limbo: "+r),a.xa.add(o),Ju(a))}function Ju(a){for(;a.xa.size>0&&a.Oa.size<a.maxConcurrentLimboResolutions;){const t=a.xa.values().next().value;a.xa.delete(t);const r=new Te(Mn.fromString(t)),o=a.qa.next();a.Na.set(o,new aE(r)),a.Oa=a.Oa.insert(r,o),Bd(a.remoteStore,new fo(qi(Ni(r.path)),o,"TargetPurposeLimboResolution",ne.oe))}}function Oa(a,t,r){return lu.apply(this,arguments)}function lu(){return lu=(0,ue.A)(function*(a,t,r){const o=Nt(a),u=[],d=[],m=[];var A;o.Fa.isEmpty()||(o.Fa.forEach((A,x)=>{m.push(o.Ka(x,t,r).then(G=>{var re;if((G||r)&&o.isPrimaryClient){const pe=G?!G.fromCache:null===(re=r?.targetChanges.get(x.targetId))||void 0===re?void 0:re.current;o.sharedClientState.updateQueryState(x.targetId,pe?"current":"not-current")}if(G){u.push(G);const pe=kd.Wi(x.targetId,G);d.push(pe)}}))}),yield Promise.all(m),o.Ca.d_(u),yield(A=(0,ue.A)(function*(G,re){const pe=Nt(G);try{yield pe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Re=>Oe.forEach(re,st=>Oe.forEach(st.$i,jt=>pe.persistence.referenceDelegate.addReference(Re,st.targetId,jt)).next(()=>Oe.forEach(st.Ui,jt=>pe.persistence.referenceDelegate.removeReference(Re,st.targetId,jt)))))}catch(Re){if(!is(Re))throw Re;rt("LocalStore","Failed to update sequence numbers: "+Re)}for(const Re of re){const st=Re.targetId;if(!Re.fromCache){const jt=pe.os.get(st),Kt=jt.withLastLimboFreeSnapshotVersion(jt.snapshotVersion);pe.os=pe.os.insert(st,Kt)}}}),function x(G,re){return A.apply(this,arguments)})(o.localStore,d))}),lu.apply(this,arguments)}function Rg(a,t){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,ue.A)(function*(a,t){const r=Nt(a);if(!r.currentUser.isEqual(t)){rt("SyncEngine","User change. New user:",t.toKey());const o=yield Zp(r.localStore,t);r.currentUser=t,(d=r).ka.forEach(A=>{A.forEach(x=>{x.reject(new Rt(tt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.ka.clear(),r.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),yield Oa(r,o.hs)}var d})).apply(this,arguments)}function Af(a,t){const r=Nt(a),o=r.Na.get(t);if(o&&o.va)return xn().add(o.key);{let u=xn();const d=r.Ma.get(t);if(!d)return u;for(const m of d){const A=r.Fa.get(m);u=u.unionWith(A.view.Va)}return u}}function K0(a,t){return qd.apply(this,arguments)}function qd(){return(qd=(0,ue.A)(function*(a,t){const r=Nt(a),o=yield $t(r.localStore,t.query,!0),u=t.view.ba(o);return r.isPrimaryClient&&Wd(r,t.targetId,u.wa),u})).apply(this,arguments)}function Qd(a,t){return Og.apply(this,arguments)}function Og(){return(Og=(0,ue.A)(function*(a,t){const r=Nt(a);return $n(r.localStore,t).then(o=>Oa(r,o))})).apply(this,arguments)}function z_(a,t,r,o){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,ue.A)(function*(a,t,r,o){const u=Nt(a),d=yield function(A,x){const G=Nt(A),re=Nt(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",pe=>re.Mn(pe,x).next(Re=>Re?G.localDocuments.getDocuments(pe,Re):Oe.resolve(null)))}(u.localStore,t);var x;null!==d?("pending"===r?yield hc(u.remoteStore):"acknowledged"===r||"rejected"===r?(zd(u,t,o||null),Pg(u,t),x=t,Nt(Nt(u.localStore).mutationQueue).On(x)):bt(),yield Oa(u,d)):rt("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function Xd(){return(Xd=(0,ue.A)(function*(a,t){const r=Nt(a);if(Fg(r),Zu(r),!0===t&&!0!==r.Qa){const o=r.sharedClientState.getAllActiveQueryTargets(),u=yield xg(r,o.toArray());r.Qa=!0,yield lg(r.remoteStore,!0);for(const d of u)Bd(r.remoteStore,d)}else if(!1===t&&!1!==r.Qa){const o=[];let u=Promise.resolve();r.Ma.forEach((d,m)=>{r.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(uu(r,m),Ve(r.localStore,m,!0))),so(r.remoteStore,m)}),yield u,yield xg(r,o),function(m){const A=Nt(m);A.Na.forEach((x,G)=>{so(A.remoteStore,G)}),A.La.pr(),A.Na=new Map,A.Oa=new Sr(Te.comparator)}(r),r.Qa=!1,yield lg(r.remoteStore,!1)}})).apply(this,arguments)}function xg(a,t,r){return kg.apply(this,arguments)}function kg(){return(kg=(0,ue.A)(function*(a,t,r){const o=Nt(a),u=[],d=[];for(const m of t){let A;const x=o.Ma.get(m);if(x&&0!==x.length){A=yield ae(o.localStore,qi(x[0]));for(const G of x){const re=o.Fa.get(G),pe=yield K0(o,re);pe.snapshot&&d.push(pe.snapshot)}}else{const G=yield In(o.localStore,m);A=yield ae(o.localStore,G),yield Tg(o,W_(G),m,!1,A.resumeToken)}u.push(A)}return o.Ca.d_(d),u})).apply(this,arguments)}function W_(a){return ii(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function Yd(a){return r=Nt(a).localStore,Nt(Nt(r).persistence).Qi();var r}function K_(a,t,r,o){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,ue.A)(function*(a,t,r,o){const u=Nt(a);if(u.Qa)return void rt("SyncEngine","Ignoring unexpected query state notification.");const d=u.Ma.get(t);if(d&&d.length>0)switch(r){case"current":case"not-current":{const m=yield $n(u.localStore,fe(d[0])),A=rc.createSynthesizedRemoteEventForCurrentChange(t,"current"===r,zr.EMPTY_BYTE_STRING);yield Oa(u,m,A);break}case"rejected":yield Ve(u.localStore,t,!0),uu(u,t,o);break;default:bt()}})).apply(this,arguments)}function pE(a,t,r){return q_.apply(this,arguments)}function q_(){return(q_=(0,ue.A)(function*(a,t,r){const o=Fg(a);if(o.Qa){for(const u of t){if(o.Ma.has(u)&&o.sharedClientState.isActiveQueryTarget(u)){rt("SyncEngine","Adding an already active target "+u);continue}const d=yield In(o.localStore,u),m=yield ae(o.localStore,d);yield Tg(o,W_(d),m.targetId,!1,m.resumeToken),Bd(o.remoteStore,m)}for(const u of r)o.Ma.has(u)&&(yield Ve(o.localStore,u,!1).then(()=>{so(o.remoteStore,u),uu(o,u)}).catch(bn))}})).apply(this,arguments)}function Fg(a){const t=Nt(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=H_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Af.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=z0.bind(null,t),t.Ca.d_=oE.bind(null,t.eventManager),t.Ca.$a=k_.bind(null,t.eventManager),t}function Zu(a){const t=Nt(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hE.bind(null,t),t}class kc{constructor(){this.synchronizeTabs=!1}initialize(t){var r=this;return(0,ue.A)(function*(){r.serializer=su(t.databaseInfo.databaseId),r.sharedClientState=r.createSharedClientState(t),r.persistence=r.createPersistence(t),yield r.persistence.start(),r.localStore=r.createLocalStore(t),r.gcScheduler=r.createGarbageCollectionScheduler(t,r.localStore),r.indexBackfillerScheduler=r.createIndexBackfillerScheduler(t,r.localStore)})()}createGarbageCollectionScheduler(t,r){return null}createIndexBackfillerScheduler(t,r){return null}createLocalStore(t){return ru(this.persistence,new Jp,t.initialUser,this.serializer)}createPersistence(t){return new Nc($u.Zr,this.serializer)}createSharedClientState(t){return new qa}terminate(){var t=this;return(0,ue.A)(function*(){var r,o;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(o=t.indexBackfillerScheduler)||void 0===o||o.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class Lg extends kc{constructor(t,r,o){super(),this.Wa=t,this.cacheSizeBytes=r,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(t){var r=()=>super.initialize,o=this;return(0,ue.A)(function*(){yield r().call(o,t),yield o.Wa.initialize(o,t),yield Zu(o.Wa.syncEngine),yield hc(o.Wa.remoteStore),yield o.persistence.yi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return ru(this.persistence,new Jp,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,r){return new Nl(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,r)}createIndexBackfillerScheduler(t,r){const o=new sn(r,this.persistence);return new kt(t.asyncQueue,o)}createPersistence(t){const r=xd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?bs.withCacheSize(this.cacheSizeBytes):bs.DEFAULT;return new Ll(this.synchronizeTabs,r,t.clientId,o,t.asyncQueue,eg(),Hl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new qa}}class Ug extends Lg{constructor(t,r){super(t,r,!1),this.Wa=t,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(t){var r=()=>super.initialize,o=this;return(0,ue.A)(function*(){yield r().call(o,t);const u=o.Wa.syncEngine;o.sharedClientState instanceof dc&&(o.sharedClientState.syncEngine={no:z_.bind(null,u),ro:K_.bind(null,u),io:pE.bind(null,u),Qi:Yd.bind(null,u),eo:Qd.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.yi(function(){var d=(0,ue.A)(function*(m){yield function fE(a,t){return Xd.apply(this,arguments)}(o.Wa.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start():m||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(m&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():m||o.indexBackfillerScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}createSharedClientState(t){const r=eg();if(!dc.D(r))throw new Rt(tt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=xd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new dc(r,t.asyncQueue,o,t.clientId,t.initialUser)}}class du{initialize(t,r){var o=this;return(0,ue.A)(function*(){o.localStore||(o.localStore=t.localStore,o.sharedClientState=t.sharedClientState,o.datastore=o.createDatastore(r),o.remoteStore=o.createRemoteStore(r),o.eventManager=o.createEventManager(r),o.syncEngine=o.createSyncEngine(r,!t.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Df(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Rg.bind(null,o.syncEngine),yield lg(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(t){return new x_}createDatastore(t){const r=su(t.databaseInfo.databaseId),o=new Zv(t.databaseInfo);return new D_(t.authCredentials,t.appCheckCredentials,o,r)}createRemoteStore(t){return o=this.localStore,u=this.datastore,d=t.asyncQueue,m=r=>Df(this.syncEngine,r,0),A=C_.D()?new C_:new Ss,new A_(o,u,d,m,A);var o,u,d,m,A}createSyncEngine(t,r){return function(u,d,m,A,x,G,re){const pe=new cE(u,d,m,A,x,G);return re&&(pe.Qa=!0),pe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,ue.A)(function*(){var r,o,u;yield(u=(0,ue.A)(function*(m){const A=Nt(m);rt("RemoteStore","RemoteStore shutting down."),A.L_.add(5),yield Ud(A),A.k_.shutdown(),A.q_.set("Unknown")}),function d(m){return u.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(o=t.eventManager)||void 0===o||o.terminate()})()}}function Zd(a,t=10240){let r=0;return{read:()=>(0,ue.A)(function*(){if(r<a.byteLength){const o={value:a.slice(r,r+t),done:!1};return r+=t,o}return{done:!0}})(),cancel:()=>(0,ue.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class el{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):yn("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,r){this.muted||setTimeout(()=>{this.muted||t(r)},0)}}class Q_{constructor(t,r){this.ja=t,this.serializer=r,this.metadata=new Qn,this.buffer=new Uint8Array,this.Ha=new TextDecoder("utf-8"),this.Ja().then(o=>{o&&o.ua()?this.metadata.resolve(o.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.aa)}`))},o=>this.metadata.reject(o))}close(){return this.ja.cancel()}getMetadata(){var t=this;return(0,ue.A)(function*(){return t.metadata.promise})()}Ua(){var t=this;return(0,ue.A)(function*(){return yield t.getMetadata(),t.Ja()})()}Ja(){var t=this;return(0,ue.A)(function*(){const r=yield t.Ya();if(null===r)return null;const o=t.Ha.decode(r),u=Number(o);isNaN(u)&&t.Za(`length string (${o}) is not valid number`);const d=yield t.Xa(u);return new V_(JSON.parse(d),r.length+u)})()}eu(){return this.buffer.findIndex(t=>123===t)}Ya(){var t=this;return(0,ue.A)(function*(){for(;t.eu()<0&&!(yield t.tu()););if(0===t.buffer.length)return null;const r=t.eu();r<0&&t.Za("Reached the end of bundle when a length string is expected.");const o=t.buffer.slice(0,r);return t.buffer=t.buffer.slice(r),o})()}Xa(t){var r=this;return(0,ue.A)(function*(){for(;r.buffer.length<t;)(yield r.tu())&&r.Za("Reached the end of bundle when more is expected.");const o=r.Ha.decode(r.buffer.slice(0,t));return r.buffer=r.buffer.slice(t),o})()}Za(t){throw this.ja.cancel(),new Error(`Invalid bundle format: ${t}`)}tu(){var t=this;return(0,ue.A)(function*(){const r=yield t.ja.read();if(!r.done){const o=new Uint8Array(t.buffer.length+r.value.length);o.set(t.buffer),o.set(r.value,t.buffer.length),t.buffer=o}return r.done})()}}class X_{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){var r=this;return(0,ue.A)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new Rt(tt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const o=yield(u=(0,ue.A)(function*(m,A){const x=Nt(m),G={documents:A.map(st=>Xc(x.serializer,st))},re=yield x.Lo("BatchGetDocuments",x.serializer.databaseId,Mn.emptyPath(),G,A.length),pe=new Map;re.forEach(st=>{const jt=function Wp(a,t){return"found"in t?function(o,u){ft(!!u.found);const d=ya(o,u.found.name),m=ki(u.found.updateTime),A=u.found.createTime?ki(u.found.createTime):Yt.min(),x=new Zr({mapValue:{fields:u.found.fields}});return sr.newFoundDocument(d,m,A,x)}(a,t):"missing"in t?function(o,u){ft(!!u.missing),ft(!!u.readTime);const d=ya(o,u.missing),m=ki(u.readTime);return sr.newNoDocument(d,m)}(a,t):bt()}(x.serializer,st);pe.set(jt.key.toString(),jt)});const Re=[];return A.forEach(st=>{const jt=pe.get(st.toString());ft(!!jt),Re.push(jt)}),Re}),function d(m,A){return u.apply(this,arguments)})(r.datastore,t);var u;return o.forEach(u=>r.recordVersion(u)),o})()}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(t.toString())}delete(t){this.write(new js(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,ue.A)(function*(){if(t.ensureCommitNotCalled(),t.lastTransactionError)throw t.lastTransactionError;const r=t.readVersions;var o;t.mutations.forEach(o=>{r.delete(o.key.toString())}),r.forEach((o,u)=>{const d=Te.fromPath(u);t.mutations.push(new mi(d,t.precondition(d)))}),yield(o=(0,ue.A)(function*(d,m){const A=Nt(d),x={writes:m.map(G=>Ou(A.serializer,G))};yield A.Mo("Commit",A.serializer.databaseId,Mn.emptyPath(),x)}),function u(d,m){return o.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw bt();r=Yt.min()}const o=this.readVersions.get(t.key.toString());if(o){if(!r.isEqual(o))throw new Rt(tt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(Yt.min())?dn.exists(!1):dn.updateTime(r):dn.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(Yt.min()))throw new Rt(tt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dn.updateTime(r)}return dn.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class Y_{constructor(t,r,o,u,d){this.asyncQueue=t,this.datastore=r,this.options=o,this.updateFunction=u,this.deferred=d,this.nu=o.maxAttempts,this.t_=new hf(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){var t=this;this.t_.Go((0,ue.A)(function*(){const r=new X_(t.datastore),o=t.su(r);o&&o.then(u=>{t.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{t.deferred.resolve(u)}).catch(d=>{t.ou(d)}))}).catch(u=>{t.ou(u)})}))}su(t){try{const r=this.updateFunction(t);return!ve(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ou(t){this.nu>0&&this._u(t)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(t)}_u(t){if("FirebaseError"===t.name){const r=t.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!Dc(r)}return!1}}class bf{constructor(t,r,o,u){var d=this;this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=o,this.databaseInfo=u,this.user=Zt.UNAUTHENTICATED,this.clientId=Ui.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,ue.A)(function*(A){rt("FirestoreClient","Received user=",A.uid),yield d.authCredentialListener(A),d.user=A});return function(A){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(rt("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Rt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const r=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ue.A)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),r.resolve()}catch(o){const u=au(o,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function ql(a,t){return hu.apply(this,arguments)}function hu(){return hu=(0,ue.A)(function*(a,t){a.asyncQueue.verifyOperationInProgress(),rt("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield t.initialize(r);let o=r.initialUser;a.setCredentialChangeListener(function(){var u=(0,ue.A)(function*(d){o.isEqual(d)||(yield Zp(t.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=t}),hu.apply(this,arguments)}function Bg(a,t){return jg.apply(this,arguments)}function jg(){return(jg=(0,ue.A)(function*(a,t){a.asyncQueue.verifyOperationInProgress();const r=yield Ql(a);rt("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(r,a.configuration),a.setCredentialChangeListener(o=>N_(t.remoteStore,o)),a.setAppCheckTokenChangeListener((o,u)=>N_(t.remoteStore,u)),a._onlineComponents=t})).apply(this,arguments)}function mE(a){return"FirebaseError"===a.name?a.code===tt.FAILED_PRECONDITION||a.code===tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code}function Ql(a){return eh.apply(this,arguments)}function eh(){return(eh=(0,ue.A)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){rt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ql(a,a._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!mE(r))throw r;Gn("Error using user provided cache. Falling back to memory cache: "+r),yield ql(a,new kc)}}else rt("FirestoreClient","Using default OfflineComponentProvider"),yield ql(a,new kc);return a._offlineComponents})).apply(this,arguments)}function th(a){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,ue.A)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(rt("FirestoreClient","Using user provided OnlineComponentProvider"),yield Bg(a,a._uninitializedComponentsProvider._online)):(rt("FirestoreClient","Using default OnlineComponentProvider"),yield Bg(a,new du))),a._onlineComponents})).apply(this,arguments)}function $g(a){return Ql(a).then(t=>t.persistence)}function tl(a){return Ql(a).then(t=>t.localStore)}function J_(a){return th(a).then(t=>t.remoteStore)}function Hg(a){return th(a).then(t=>t.syncEngine)}function Xl(a){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,ue.A)(function*(a){const t=yield th(a),r=t.eventManager;return r.onListen=uE.bind(null,t.syncEngine),r.onUnlisten=lE.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=B_.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Dg.bind(null,t.syncEngine),r})).apply(this,arguments)}function yE(a,t,r={}){const o=new Qn;return a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return function(d,m,A,x,G){const re=new el({next:Re=>{m.enqueueAndForget(()=>fg(d,pe));const st=Re.docs.has(A);!st&&Re.fromCache?G.reject(new Rt(tt.UNAVAILABLE,"Failed to get document because the client is offline.")):st&&Re.fromCache&&x&&"server"===x.source?G.reject(new Rt(tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(Re)},error:Re=>G.reject(Re)}),pe=new mg(Ni(A.path),re,{includeMetadataChanges:!0,_a:!0});return hg(d,pe)}(yield Xl(a),a.asyncQueue,t,r,o)})),o.promise}function vE(a,t,r={}){const o=new Qn;return a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return function(d,m,A,x,G){const re=new el({next:Re=>{m.enqueueAndForget(()=>fg(d,pe)),Re.fromCache&&"server"===x.source?G.reject(new Rt(tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(Re)},error:Re=>G.reject(Re)}),pe=new mg(A,re,{includeMetadataChanges:!0,_a:!0});return hg(d,pe)}(yield Xl(a),a.asyncQueue,t,r,o)})),o.promise}function Pf(a){const t={};return void 0!==a.timeoutSeconds&&(t.timeoutSeconds=a.timeoutSeconds),t}const fc=new Map;function nl(a,t,r){if(!r)throw new Rt(tt.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function zg(a,t,r,o){if(!0===t&&!0===o)throw new Rt(tt.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function Wg(a){if(!Te.isDocumentKey(a))throw new Rt(tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Kg(a){if(Te.isDocumentKey(a))throw new Rt(tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function qg(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const t=(o=a).constructor?o.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var o;return"function"==typeof a?"a function":bt()}function jr(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new Rt(tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=qg(a);throw new Rt(tt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return a}function TE(a,t){if(t<=0)throw new Rt(tt.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${t}.`)}class Mf{constructor(t){var r,o;if(void 0===t.host){if(void 0!==t.ssl)throw new Rt(tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(r=t.ssl)||void 0===r||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Rt(tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Pf(null!==(o=t.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new Rt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new Rt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new Rt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rl{constructor(t,r,o,u){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Rt(tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Rt(tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mf(t),void 0!==t.credentials&&(this._authCredentials=function(o){if(!o)return new wn;switch(o.type){case"firstParty":return new Hr(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Rt(tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const o=fc.get(r);o&&(rt("ComponentProvider","Removing Datastore"),fc.delete(r),o.terminate())}(this),Promise.resolve()}}class Mo{constructor(t,r,o){this.converter=r,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new Mo(this.firestore,t,this._query)}}class Xi{constructor(t,r,o){this.converter=r,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Xi(this.firestore,t,this._key)}}class pc extends Mo{constructor(t,r,o){super(t,r,Ni(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Xi(this.firestore,null,new Te(t))}withConverter(t){return new pc(this.firestore,t,this._path)}}function ty(a,t,...r){if(a=(0,de.Ku)(a),nl("collection","path",t),a instanceof rl){const o=Mn.fromString(t,...r);return Kg(o),new pc(a,null,o)}{if(!(a instanceof Xi||a instanceof pc))throw new Rt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Mn.fromString(t,...r));return Kg(o),new pc(a.firestore,null,o)}}function Rf(a,t,...r){if(a=(0,de.Ku)(a),1===arguments.length&&(t=Ui.newId()),nl("doc","path",t),a instanceof rl){const o=Mn.fromString(t,...r);return Wg(o),new Xi(a,null,new Te(o))}{if(!(a instanceof Xi||a instanceof pc))throw new Rt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Mn.fromString(t,...r));return Wg(o),new Xi(a.firestore,a instanceof pc?a.converter:null,new Te(o))}}function ny(a,t){return a=(0,de.Ku)(a),t=(0,de.Ku)(t),(a instanceof Xi||a instanceof pc)&&(t instanceof Xi||t instanceof pc)&&a.firestore===t.firestore&&a.path===t.path&&a.converter===t.converter}function Of(a,t){return a=(0,de.Ku)(a),t=(0,de.Ku)(t),a instanceof Mo&&t instanceof Mo&&a.firestore===t.firestore&&I(a._query,t._query)&&a.converter===t.converter}class ry{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new hf(this,"async_queue_retry"),this.Eu=()=>{const r=Hl();r&&rt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()};const t=Hl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;const r=Hl();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise(()=>{});const r=new Qn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.uu.push(t),this.Ru()))}Ru(){var t=this;return(0,ue.A)(function*(){if(0!==t.uu.length){try{yield t.uu[0](),t.uu.shift(),t.t_.reset()}catch(r){if(!is(r))throw r;rt("AsyncQueue","Operation failed with retryable error: "+r)}t.uu.length>0&&t.t_.Go(()=>t.Ru())}})()}Au(t){const r=this.au.then(()=>(this.Pu=!0,t().catch(o=>{throw this.hu=o,this.Pu=!1,yn("INTERNAL UNHANDLED ERROR: ",function(m){let A=m.message||"";return m.stack&&(A=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),A}(o)),o}).then(o=>(this.Pu=!1,o))));return this.au=r,r}enqueueAfterDelay(t,r,o){this.du(),this.Tu.indexOf(t)>-1&&(r=0);const u=Po.createAndSchedule(this,t,r,o,d=>this.Vu(d));return this.lu.push(u),u}du(){this.hu&&bt()}verifyOperationInProgress(){}mu(){var t=this;return(0,ue.A)(function*(){let r;do{r=t.au,yield r}while(r!==t.au)})()}fu(t){for(const r of this.lu)if(r.timerId===t)return!0;return!1}gu(t){return this.mu().then(()=>{this.lu.sort((r,o)=>r.targetTimeMs-o.targetTimeMs);for(const r of this.lu)if(r.skipDelay(),"all"!==t&&r.timerId===t)break;return this.mu()})}pu(t){this.Tu.push(t)}Vu(t){const r=this.lu.indexOf(t);this.lu.splice(r,1)}}function Qg(a){return function(r,o){if("object"!=typeof r||null===r)return!1;const u=r;for(const d of["next","error","complete"])if(d in u&&"function"==typeof u[d])return!0;return!1}(a)}class bE{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,r,o){this._progressObserver={next:t,error:r,complete:o}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,r){return this._taskCompletionResolver.promise.then(t,r)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class yi extends rl{constructor(t,r,o,u){super(t,r,o,u),this.type="firestore",this._queue=new ry,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||il(this),this._firestoreClient.terminate()}}function as(a){return a._firestoreClient||il(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function il(a){var t,r,o;const u=a._freezeSettings(),d=(x=(null===(t=a._app)||void 0===t?void 0:t.options.appId)||"",new Ys(a._databaseId,x,a._persistenceKey,(re=u).host,re.ssl,re.experimentalForceLongPolling,re.experimentalAutoDetectLongPolling,Pf(re.experimentalLongPollingOptions),re.useFetchStreams));var x,re;a._firestoreClient=new bf(a._authCredentials,a._appCheckCredentials,a._queue,d),null!==(r=u.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(a._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Nf(a,t,r){const o=new Qn;return a.asyncQueue.enqueue((0,ue.A)(function*(){try{yield ql(a,r),yield Bg(a,t),o.resolve()}catch(u){const d=u;if(!mE(d))throw d;Gn("Error enabling indexeddb cache. Falling back to memory cache: "+d),o.reject(d)}})).then(()=>o.promise)}function NE(a){if(a._initialized||a._terminated)throw new Rt(tt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gc(zr.fromBase64String(t))}catch(r){throw new Rt(tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new gc(zr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Vc{constructor(...t){for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Rt(tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class sl{constructor(t){this._methodName=t}}class xf{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Rt(tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Rt(tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ht(this._lat,t._lat)||Ht(this._long,t._long)}}class kf{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(o,u){if(o.length!==u.length)return!1;for(let d=0;d<o.length;++d)if(o[d]!==u[d])return!1;return!0}(this._values,t._values)}}const FE=/^__.*__$/;class VE{constructor(t,r,o){this.data=t,this.fieldMask=r,this.fieldTransforms=o}toMutation(t,r){return null!==this.fieldMask?new pr(t,this.data,this.fieldMask,r,this.fieldTransforms):new _n(t,this.data,r,this.fieldTransforms)}}class cy{constructor(t,r,o){this.data=t,this.fieldMask=r,this.fieldTransforms=o}toMutation(t,r){return new pr(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Ff(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt()}}class Xg{constructor(t,r,o,u,d,m){this.settings=t,this.databaseId=r,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===d&&this.yu(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new Xg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(t),u=this.Su({path:o,Du:!1});return u.vu(t),u}Cu(t){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(t),u=this.Su({path:o,Du:!1});return u.yu(),u}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return ih(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return void 0!==this.fieldMask.find(r=>t.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>t.isPrefixOf(r.field))}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(0===t.length)throw this.Mu("Document fields must not be empty");if(Ff(this.wu)&&FE.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}}class eC{constructor(t,r,o){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=o||su(t)}Nu(t,r,o,u=!1){return new Xg({wu:t,methodName:r,Ou:o,path:xe.emptyPath(),Du:!1,xu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lc(a){const t=a._freezeSettings(),r=su(a._databaseId);return new eC(a._databaseId,!!t.ignoreUndefinedProperties,r)}function Yg(a,t,r,o,u,d={}){const m=a.Nu(d.merge||d.mergeFields?2:0,t,r,u);Lf("Data must be an object, but it was:",m,o);const A=dy(o,m);let x,G;if(d.merge)x=new Jr(m.fieldMask),G=m.fieldTransforms;else if(d.mergeFields){const re=[];for(const pe of d.mergeFields){const Re=mc(t,pe,r);if(!m.contains(Re))throw new Rt(tt.INVALID_ARGUMENT,`Field '${Re}' is specified in your field mask but missing from your input data.`);UE(re,Re)||re.push(Re)}x=new Jr(re),G=m.fieldTransforms.filter(pe=>x.covers(pe.field))}else x=null,G=m.fieldTransforms;return new VE(new Zr(A),x,G)}class Vf extends sl{_toFieldTransform(t){if(2!==t.wu)throw t.Mu(1===t.wu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Vf}}function LE(a,t,r){return new Xg({wu:3,Ou:t.settings.Ou,methodName:a._methodName,Du:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class uy extends sl{_toFieldTransform(t){return new xt(t.path,new Es)}isEqual(t){return t instanceof uy}}class ly extends sl{constructor(t,r){super(t),this.Lu=r}_toFieldTransform(t){const r=LE(this,t,!0),o=this.Lu.map(d=>pu(d,r)),u=new Bs(o);return new xt(t.path,u)}isEqual(t){return t instanceof ly&&(0,de.bD)(this.Lu,t.Lu)}}class Jg extends sl{constructor(t,r){super(t),this.Lu=r}_toFieldTransform(t){const r=LE(this,t,!0),o=this.Lu.map(d=>pu(d,r)),u=new H(o);return new xt(t.path,u)}isEqual(t){return t instanceof Jg&&(0,de.bD)(this.Lu,t.Lu)}}class Yl extends sl{constructor(t,r){super(t),this.Bu=r}_toFieldTransform(t){const r=new j(t.serializer,ls(t.serializer,this.Bu));return new xt(t.path,r)}isEqual(t){return t instanceof Yl&&this.Bu===t.Bu}}function Jl(a,t,r,o){const u=a.Nu(1,t,r);Lf("Data must be an object, but it was:",u,o);const d=[],m=Zr.empty();Qs(o,(x,G)=>{const re=oa(t,x,r);G=(0,de.Ku)(G);const pe=u.Cu(re);if(G instanceof Vf)d.push(re);else{const Re=pu(G,pe);null!=Re&&(d.push(re),m.set(re,Re))}});const A=new Jr(d);return new cy(m,A,u.fieldTransforms)}function rh(a,t,r,o,u,d){const m=a.Nu(1,t,r),A=[mc(t,o,r)],x=[u];if(d.length%2!=0)throw new Rt(tt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Re=0;Re<d.length;Re+=2)A.push(mc(t,d[Re])),x.push(d[Re+1]);const G=[],re=Zr.empty();for(let Re=A.length-1;Re>=0;--Re)if(!UE(G,A[Re])){const st=A[Re];let jt=x[Re];jt=(0,de.Ku)(jt);const Jt=m.Cu(st);if(jt instanceof Vf)G.push(st);else{const Kt=pu(jt,Jt);null!=Kt&&(G.push(st),re.set(st,Kt))}}const pe=new Jr(G);return new cy(re,pe,m.fieldTransforms)}function Zg(a,t,r,o=!1){return pu(r,a.Nu(o?4:3,t))}function pu(a,t){if(hy(a=(0,de.Ku)(a)))return Lf("Unsupported field value:",t,a),dy(a,t);if(a instanceof sl)return function(o,u){if(!Ff(u.wu))throw u.Mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Mu(`${o._methodName}() is not currently supported inside arrays`);const d=o._toFieldTransform(u);d&&u.fieldTransforms.push(d)}(a,t),null;if(void 0===a&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.Du&&4!==t.wu)throw t.Mu("Nested arrays are not supported");return function(o,u){const d=[];let m=0;for(const A of o){let x=pu(A,u.Fu(m));null==x&&(x={nullValue:"NULL_VALUE"}),d.push(x),m++}return{arrayValue:{values:d}}}(a,t)}return function(o,u){if(null===(o=(0,de.Ku)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return ls(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const d=Xt.fromDate(o);return{timestampValue:ic(u.serializer,d)}}if(o instanceof Xt){const d=new Xt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:ic(u.serializer,d)}}if(o instanceof xf)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof gc)return{bytesValue:Qc(u.serializer,o._byteString)};if(o instanceof Xi){const d=u.databaseId,m=o.firestore._databaseId;if(!m.isEqual(d))throw u.Mu(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Mu(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof kf)return A=u,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(x=>{if("number"!=typeof x)throw A.Mu("VectorValues must only contain numeric values.");return Os(A.serializer,x)})}}}}};var A;throw u.Mu(`Unsupported field value: ${qg(o)}`)}(a,t)}function dy(a,t){const r={};return Rs(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qs(a,(o,u)=>{const d=pu(u,t.bu(o));null!=d&&(r[o]=d)}),{mapValue:{fields:r}}}function hy(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof Xt||a instanceof xf||a instanceof gc||a instanceof Xi||a instanceof sl||a instanceof kf)}function Lf(a,t,r){if(!hy(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=qg(r);throw t.Mu("an object"===o?a+" a custom object":a+" "+o)}var u}function mc(a,t,r){if((t=(0,de.Ku)(t))instanceof Vc)return t._internalPath;if("string"==typeof t)return oa(a,t);throw ih("Field path arguments must be of type string or ",a,!1,void 0,r)}const Ea=new RegExp("[~\\*/\\[\\]]");function oa(a,t,r){if(t.search(Ea)>=0)throw ih(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new Vc(...t.split("."))._internalPath}catch{throw ih(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function ih(a,t,r,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let A=`Function ${t}() called with invalid data`;r&&(A+=" (via `toFirestore()`)"),A+=". ";let x="";return(d||m)&&(x+=" (found",d&&(x+=` in field ${o}`),m&&(x+=` in document ${u}`),x+=")"),new Rt(tt.INVALID_ARGUMENT,A+a+x)}function UE(a,t){return a.some(r=>r.isEqual(t))}class sh{constructor(t,r,o,u,d){this._firestore=t,this._userDataWriter=r,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Xi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new tC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(em("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r)}}}class tC extends sh{data(){return super.data()}}function em(a,t){return"string"==typeof t?oa(a,t):t instanceof Vc?t._internalPath:t._delegate._internalPath}function tm(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new Rt(tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class Bf extends Uf{}function Xa(a,t,...r){let o=[];t instanceof Uf&&o.push(t),o=o.concat(r),function(d){const m=d.filter(x=>x instanceof Zl).length,A=d.filter(x=>x instanceof ol).length;if(m>1||m>0&&A>0)throw new Rt(tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)a=u._apply(a);return a}class ol extends Bf{constructor(t,r,o){super(),this._field=t,this._op=r,this._value=o,this.type="where"}static _create(t,r,o){return new ol(t,r,o)}_apply(t){const r=this._parse(t);return my(t._query,r),new Mo(t.firestore,t.converter,Ao(t._query,r))}_parse(t){const r=Lc(t.firestore);return function(d,m,A,x,G,re,pe){let Re;if(G.isKeyField()){if("array-contains"===re||"array-contains-any"===re)throw new Rt(tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${re}' queries on documentId().`);if("in"===re||"not-in"===re){gy(pe,re);const st=[];for(const jt of pe)st.push(Hf(x,d,jt));Re={arrayValue:{values:st}}}else Re=Hf(x,d,pe)}else"in"!==re&&"not-in"!==re&&"array-contains-any"!==re||gy(pe,re),Re=Zg(A,"where",pe,"in"===re||"not-in"===re);return O.create(G,re,Re)}(t._query,0,r,t.firestore._databaseId,this._field,this._op,this._value)}}class Zl extends Uf{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Zl(t,r)}_parse(t){const r=this._queryConstraints.map(o=>o._parse(t)).filter(o=>o.getFilters().length>0);return 1===r.length?r[0]:ee.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return 0===r.getFilters().length?t:(function(u,d){let m=u;const A=d.getFlattenedFilters();for(const x of A)my(m,x),m=Ao(m,x)}(t._query,r),new Mo(t.firestore,t.converter,Ao(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class jf extends Bf{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new jf(t,r)}_apply(t){const r=function(u,d,m){if(null!==u.startAt)throw new Rt(tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Rt(tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fi(d,m)}(t._query,this._field,this._direction);return new Mo(t.firestore,t.converter,function(u,d){const m=u.explicitOrderBy.concat([d]);return new Wr(u.path,u.collectionGroup,m,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(t._query,r))}}class al extends Bf{constructor(t,r,o){super(),this.type=t,this._limit=r,this._limitType=o}static _create(t,r,o){return new al(t,r,o)}_apply(t){return new Mo(t.firestore,t.converter,J(t._query,this._limit,this._limitType))}}class ah extends Bf{constructor(t,r,o){super(),this.type=t,this._docOrFields=r,this._inclusive=o}static _create(t,r,o){return new ah(t,r,o)}_apply(t){const r=uh(t,this.type,this._docOrFields,this._inclusive);return new Mo(t.firestore,t.converter,(d=r,new Wr((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,d,u.endAt)));var u,d}}class $f extends Bf{constructor(t,r,o){super(),this.type=t,this._docOrFields=r,this._inclusive=o}static _create(t,r,o){return new $f(t,r,o)}_apply(t){const r=uh(t,this.type,this._docOrFields,this._inclusive);return new Mo(t.firestore,t.converter,(d=r,new Wr((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,d)));var u,d}}function uh(a,t,r,o){if(r[0]=(0,de.Ku)(r[0]),r[0]instanceof sh)return function(d,m,A,x,G){if(!x)throw new Rt(tt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${A}().`);const re=[];for(const pe of vs(d))if(pe.field.isKeyField())re.push(Hi(m,x.key));else{const Re=x.data.field(pe.field);if(ps(Re))throw new Rt(tt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+pe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Re){const st=pe.field.canonicalString();throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${st}' (used as the orderBy) does not exist.`)}re.push(Re)}return new us(re,G)}(a._query,a.firestore._databaseId,t,r[0]._document,o);{const u=Lc(a.firestore);return function(m,A,x,G,re,pe){const Re=m.explicitOrderBy;if(re.length>Re.length)throw new Rt(tt.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const st=[];for(let jt=0;jt<re.length;jt++){const Jt=re[jt];if(Re[jt].field.isKeyField()){if("string"!=typeof Jt)throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof Jt}`);if(!ga(m)&&-1!==Jt.indexOf("/"))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${Jt}' contains a slash.`);const Kt=m.path.child(Mn.fromString(Jt));if(!Te.isDocumentKey(Kt))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${Kt}' is not because it contains an odd number of segments.`);const Vn=new Te(Kt);st.push(Hi(A,Vn))}else{const Kt=Zg(x,G,Jt);st.push(Kt)}}return new us(st,pe)}(a._query,a.firestore._databaseId,u,t,r,o)}}function Hf(a,t,r){if("string"==typeof(r=(0,de.Ku)(r))){if(""===r)throw new Rt(tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ga(t)&&-1!==r.indexOf("/"))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const o=t.path.child(Mn.fromString(r));if(!Te.isDocumentKey(o))throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Hi(a,new Te(o))}if(r instanceof Xi)return Hi(a,r._key);throw new Rt(tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qg(r)}.`)}function gy(a,t){if(!Array.isArray(a)||0===a.length)throw new Rt(tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function my(a,t){const r=function(u,d){for(const m of u)for(const A of m.getFlattenedFilters())if(d.indexOf(A.op)>=0)return A.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw new Rt(tt.INVALID_ARGUMENT,r===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class zf{convertValue(t,r="none"){switch(ji(t)){case 0:return null;case 1:return t.booleanValue;case 2:return cn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(oi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw bt()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const o={};return Qs(t,(u,d)=>{o[u]=this.convertValue(d,r)}),o}convertVectorValue(t){var r,o,u;const d=null===(u=null===(o=null===(r=t.fields)||void 0===r?void 0:r.value.arrayValue)||void 0===o?void 0:o.values)||void 0===u?void 0:u.map(m=>cn(m.doubleValue));return new kf(d)}convertGeoPoint(t){return new xf(cn(t.latitude),cn(t.longitude))}convertArray(t,r){return(t.values||[]).map(o=>this.convertValue(o,r))}convertServerTimestamp(t,r){switch(r){case"previous":const o=ks(t);return null==o?null:this.convertValue(o,r);case"estimate":return this.convertTimestamp(gs(t));default:return null}}convertTimestamp(t){const r=ss(t);return new Xt(r.seconds,r.nanos)}convertDocumentKey(t,r){const o=Mn.fromString(t);ft(na(o));const u=new Ri(o.get(1),o.get(3)),d=new Te(o.popFirst(5));return u.isEqual(r)||yn(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),d}}function _c(a,t,r){let o;return o=a?r&&(r.merge||r.mergeFields)?a.toFirestore(t,r):a.toFirestore(t):t,o}class _y extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new gc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Xi(this.firestore,null,r)}}class gu{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class yc extends sh{constructor(t,r,o,u,d,m){super(t,r,o,u,m),this._firestore=t,this._firestoreImpl=t,this.metadata=d}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const o=this._document.data.field(em("DocumentSnapshot.get",t));if(null!==o)return this._userDataWriter.convertValue(o,r.serverTimestamps)}}}class ed extends yc{data(t={}){return super.data(t)}}class vc{constructor(t,r,o,u){this._firestore=t,this._userDataWriter=r,this._snapshot=u,this.metadata=new gu(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,r){this._snapshot.docs.forEach(o=>{t.call(r,new ed(this._firestore,this._userDataWriter,o.key,o,new gu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Rt(tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,d){if(u._snapshot.oldDocs.isEmpty()){let m=0;return u._snapshot.docChanges.map(A=>({type:"added",doc:new ed(u._firestore,u._userDataWriter,A.doc.key,A.doc,new gu(u._snapshot.mutatedKeys.has(A.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:m++}))}{let m=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(A=>d||3!==A.type).map(A=>{const x=new ed(u._firestore,u._userDataWriter,A.doc.key,A.doc,new gu(u._snapshot.mutatedKeys.has(A.doc.key),u._snapshot.fromCache),u.query.converter);let G=-1,re=-1;return 0!==A.type&&(G=m.indexOf(A.doc.key),m=m.delete(A.doc.key)),1!==A.type&&(m=m.add(A.doc),re=m.indexOf(A.doc.key)),{type:yy(A.type),doc:x,oldIndex:G,newIndex:re}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function yy(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt()}}function lh(a,t){return a instanceof yc&&t instanceof yc?a._firestore===t._firestore&&a._key.isEqual(t._key)&&(null===a._document?null===t._document:a._document.isEqual(t._document))&&a._converter===t._converter:a instanceof vc&&t instanceof vc&&a._firestore===t._firestore&&Of(a.query,t.query)&&a.metadata.isEqual(t.metadata)&&a._snapshot.isEqual(t._snapshot)}class Uc extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new gc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Xi(this.firestore,null,r)}}function Ey(a,t,r){a=jr(a,Xi);const o=jr(a.firestore,yi),u=_c(a.converter,t,r);return cl(o,[Yg(Lc(o),"setDoc",a._key,u,null!==a.converter,r).toMutation(a._key,dn.none())])}function am(a,t,r,...o){a=jr(a,Xi);const u=jr(a.firestore,yi),d=Lc(u);let m;return m="string"==typeof(t=(0,de.Ku)(t))||t instanceof Vc?rh(d,"updateDoc",a._key,t,r,o):Jl(d,"updateDoc",a._key,t),cl(u,[m.toMutation(a._key,dn.exists(!0))])}function Iy(a,...t){var r,o,u;a=(0,de.Ku)(a);let d={includeMetadataChanges:!1,source:"default"},m=0;"object"!=typeof t[m]||Qg(t[m])||(d=t[m],m++);const A={includeMetadataChanges:d.includeMetadataChanges,source:d.source};if(Qg(t[m])){const pe=t[m];t[m]=null===(r=pe.next)||void 0===r?void 0:r.bind(pe),t[m+1]=null===(o=pe.error)||void 0===o?void 0:o.bind(pe),t[m+2]=null===(u=pe.complete)||void 0===u?void 0:u.bind(pe)}let x,G,re;if(a instanceof Xi)G=jr(a.firestore,yi),re=Ni(a._key.path),x={next:pe=>{t[m]&&t[m](mr(G,a,pe))},error:t[m+1],complete:t[m+2]};else{const pe=jr(a,Mo);G=jr(pe.firestore,yi),re=pe._query;const Re=new Uc(G);x={next:st=>{t[m]&&t[m](new vc(G,Re,pe,st))},error:t[m+1],complete:t[m+2]},tm(a._query)}return function(Re,st,jt,Jt){const Kt=new el(Jt),Vn=new mg(st,Kt,jt);return Re.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return hg(yield Xl(Re),Vn)})),()=>{Kt.za(),Re.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return fg(yield Xl(Re),Vn)}))}}(as(G),re,A,x)}function cl(a,t){return function(o,u){const d=new Qn;return o.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return function cu(a,t,r){return wf.apply(this,arguments)}(yield Hg(o),u,d)})),d.promise}(as(a),t)}function mr(a,t,r){const o=r.docs.get(t._key),u=new Uc(a);return new yc(a,u,t._key,o,new gu(r.hasPendingWrites,r.fromCache),t.converter)}const Py={maxAttempts:5};class qf{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Lc(t)}set(t,r,o){this._verifyNotCommitted();const u=mu(t,this._firestore),d=_c(u.converter,r,o),m=Yg(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,dn.none())),this}update(t,r,o,...u){this._verifyNotCommitted();const d=mu(t,this._firestore);let m;return m="string"==typeof(r=(0,de.Ku)(r))||r instanceof Vc?rh(this._dataReader,"WriteBatch.update",d._key,r,o,u):Jl(this._dataReader,"WriteBatch.update",d._key,r),this._mutations.push(m.toMutation(d._key,dn.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=mu(t,this._firestore);return this._mutations=this._mutations.concat(new js(r._key,dn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Rt(tt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mu(a,t){if((a=(0,de.Ku)(a)).firestore!==t)throw new Rt(tt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class QE extends class{constructor(r,o){this._firestore=r,this._transaction=o,this._dataReader=Lc(r)}get(r){const o=mu(r,this._firestore),u=new _y(this._firestore);return this._transaction.lookup([o._key]).then(d=>{if(!d||1!==d.length)return bt();const m=d[0];if(m.isFoundDocument())return new sh(this._firestore,u,m.key,m,o.converter);if(m.isNoDocument())return new sh(this._firestore,u,o._key,null,o.converter);throw bt()})}set(r,o,u){const d=mu(r,this._firestore),m=_c(d.converter,o,u),A=Yg(this._dataReader,"Transaction.set",d._key,m,null!==d.converter,u);return this._transaction.set(d._key,A),this}update(r,o,u,...d){const m=mu(r,this._firestore);let A;return A="string"==typeof(o=(0,de.Ku)(o))||o instanceof Vc?rh(this._dataReader,"Transaction.update",m._key,o,u,d):Jl(this._dataReader,"Transaction.update",m._key,o),this._transaction.update(m._key,A),this}delete(r){const o=mu(r,this._firestore);return this._transaction.delete(o._key),this}}{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=mu(t,this._firestore),o=new Uc(this._firestore);return super.get(t).then(u=>new yc(this._firestore,o,r._key,u._document,new gu(!1,!1),r.converter))}}function pm(a,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Rt("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return t}function xy(){if(typeof Uint8Array>"u")throw new Rt("unimplemented","Uint8Arrays are not available in this environment.")}function ky(){if(!function hi(){return typeof atob<"u"}())throw new Rt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,r=!0){tn=Ce.SDK_VERSION,(0,Ce._registerComponent)(new qe.uA("firestore",(o,{instanceIdentifier:u,options:d})=>{const m=o.getProvider("app").getImmediate(),A=new yi(new kr(o.getProvider("auth-internal")),new Rr(o.getProvider("app-check-internal")),function(G,re){if(!Object.prototype.hasOwnProperty.apply(G.options,["projectId"]))throw new Rt(tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ri(G.options.projectId,re)}(m,u),m);return d=Object.assign({useFetchStreams:r},d),A._setSettings(d),A},"PUBLIC").setMultipleInstances(!0)),(0,Ce.registerVersion)(ln,"4.7.1",t),(0,Ce.registerVersion)(ln,"4.7.1","esm2017")}();class ph{constructor(t){this._delegate=t}static fromBase64String(t){return ky(),new ph(gc.fromBase64String(t))}static fromUint8Array(t){return xy(),new ph(gc.fromUint8Array(t))}toBase64(){return ky(),this._delegate.toBase64()}toUint8Array(){return xy(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Na(a){return function gm(a,t){if("object"!=typeof a||null===a)return!1;const r=a;for(const o of t)if(o in r&&"function"==typeof r[o])return!0;return!1}(a,["next","error","complete"])}class sI{enableIndexedDbPersistence(t,r){return function SE(a,t){NE(a=jr(a,yi));const r=as(a);if(r._uninitializedComponentsProvider)throw new Rt(tt.FAILED_PRECONDITION,"SDK cache is already specified.");Gn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=a._freezeSettings(),u=new du;return Nf(r,u,new Lg(u,o.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(t){return function PE(a){NE(a=jr(a,yi));const t=as(a);if(t._uninitializedComponentsProvider)throw new Rt(tt.FAILED_PRECONDITION,"SDK cache is already specified.");Gn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings(),o=new du;return Nf(t,o,new Ug(o,r.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function oy(a){if(a._initialized&&!a._terminated)throw new Rt(tt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Qn;return a._queue.enqueueAndForgetEvenWhileRestricted((0,ue.A)(function*(){try{yield(r=(0,ue.A)(function*(u){if(!Yr.D())return Promise.resolve();const d=u+"main";yield Yr.delete(d)}),function o(u){return r.apply(this,arguments)})(xd(a._databaseId,a._persistenceKey)),t.resolve()}catch(r){t.reject(r)}var r})),t.promise}(t._delegate)}}class Fy{constructor(t,r,o){this._delegate=r,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},t instanceof Ri||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const r=this._delegate._getSettings();!t.merge&&r.host!==t.host&&Gn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},r),t)).merge,this._delegate._setSettings(t)}useEmulator(t,r,o={}){!function DE(a,t,r,o={}){var u;const d=(a=jr(a,rl))._getSettings(),m=`${t}:${r}`;if("firestore.googleapis.com"!==d.host&&d.host!==m&&Gn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},d),{host:m,ssl:!1})),o.mockUserToken){let A,x;if("string"==typeof o.mockUserToken)A=o.mockUserToken,x=Zt.MOCK_USER;else{A=(0,de.Fy)(o.mockUserToken,null===(u=a._app)||void 0===u?void 0:u.options.projectId);const G=o.mockUserToken.sub||o.mockUserToken.user_id;if(!G)throw new Rt(tt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Zt(G)}a._authCredentials=new An(new Zn(A,x))}}(this._delegate,t,r,o)}enableNetwork(){return function RE(a){return function fu(a){return a.asyncQueue.enqueue((0,ue.A)(function*(){const t=yield $g(a),r=yield J_(a);return t.setNetworkEnabled(!0),function(u){const d=Nt(u);return d.L_.delete(0),Ld(d)}(r)}))}(as(a=jr(a,yi)))}(this._delegate)}disableNetwork(){return function OE(a){return function nh(a){return a.asyncQueue.enqueue((0,ue.A)(function*(){const t=yield $g(a),r=yield J_(a);return t.setNetworkEnabled(!1),(o=(0,ue.A)(function*(d){const m=Nt(d);m.L_.add(0),yield Ud(m),m.q_.set("Offline")}),function u(d){return o.apply(this,arguments)})(r);var o}))}(as(a=jr(a,yi)))}(this._delegate)}enablePersistence(t){let r=!1,o=!1;return t&&(r=!!t.synchronizeTabs,o=!!t.experimentalForceOwningTab,zg("synchronizeTabs",r,"experimentalForceOwningTab",o)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ME(a){return function(r){const o=new Qn;return r.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return function W0(a,t){return Kl.apply(this,arguments)}(yield Hg(r),o)})),o.promise}(as(a=jr(a,yi)))}(this._delegate)}onSnapshotsInSync(t){return function Cy(a,t){return function X0(a,t){const r=new el(t);return a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return u=yield Xl(a),d=r,Nt(u).Y_.add(d),void d.next();var u,d})),()=>{r.za(),a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return u=yield Xl(a),d=r,void Nt(u).Y_.delete(d);var u,d}))}}(as(a=jr(a,yi)),Qg(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Rt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new rd(this,ty(this._delegate,t))}catch(r){throw Ro(r,"collection()","Firestore.collection()")}}doc(t){try{return new Ia(this,Rf(this._delegate,t))}catch(r){throw Ro(r,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Wo(this,function AE(a,t){if(a=jr(a,rl),nl("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Rt(tt.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mo(a,null,(o=t,new Wr(Mn.emptyPath(),o)));var o}(this._delegate,t))}catch(r){throw Ro(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function XE(a,t,r){a=jr(a,yi);const o=Object.assign(Object.assign({},Py),r);return function(d){if(d.maxAttempts<1)throw new Rt(tt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(d,m,A){const x=new Qn;return d.asyncQueue.enqueueAndForget((0,ue.A)(function*(){const G=yield function Z_(a){return th(a).then(t=>t.datastore)}(d);new Y_(d.asyncQueue,G,A,m,x).ru()})),x.promise}(as(a),u=>t(new QE(a,u)),o)}(this._delegate,r=>t(new mh(this,r)))}batch(){return as(this._delegate),new Xf(new qf(this._delegate,t=>cl(this._delegate,t)))}loadBundle(t){return function ay(a,t){const r=as(a=jr(a,yi)),o=new bE;return function ey(a,t,r,o){const u=function(m,A){let x;return x="string"==typeof m?_a().encode(m):m,re=function(re,pe){if(re instanceof Uint8Array)return Zd(re,void 0);if(re instanceof ArrayBuffer)return Zd(new Uint8Array(re),void 0);if(re instanceof ReadableStream)return re.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new Q_(re,A);var re}(r,su(t));a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){!function gE(a,t,r){const o=Nt(a);var u;(u=(0,ue.A)(function*(m,A,x){try{const G=yield A.getMetadata();if(yield function(jt,Jt){const Kt=Nt(jt),Vn=ki(Jt.createTime);return Kt.persistence.runTransaction("hasNewerBundle","readonly",qn=>Kt.Gr.getBundleMetadata(qn,Jt.id)).then(qn=>!!qn&&qn.createTime.compareTo(Vn)>=0)}(m.localStore,G))return yield A.close(),x._completeWith({taskState:"Success",documentsLoaded:(jt=G).totalDocuments,bytesLoaded:jt.totalBytes,totalDocuments:jt.totalDocuments,totalBytes:jt.totalBytes}),Promise.resolve(new Set);x._updateProgress(Gd(G));const re=new L_(G,m.localStore,A.serializer);let pe=yield A.Ua();for(;pe;){const st=yield re.la(pe);st&&x._updateProgress(st),pe=yield A.Ua()}const Re=yield re.complete();return yield Oa(m,Re.Ia,void 0),yield function(jt,Jt){const Kt=Nt(jt);return Kt.persistence.runTransaction("Save bundle","readwrite",Vn=>Kt.Gr.saveBundleMetadata(Vn,Jt))}(m.localStore,G),x._completeWith(Re.progress),Promise.resolve(Re.Pa)}catch(G){return Gn("SyncEngine",`Loading bundle failed with ${G}`),x._failWith(G),Promise.resolve(new Set)}var jt}),function d(m,A,x){return u.apply(this,arguments)})(o,t,r).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Hg(a),u,o)}))}(r,a._databaseId,t,o),o}(this._delegate,t)}namedQuery(t){return function Z0(a,t){return function EE(a,t){return a.asyncQueue.enqueue((0,ue.A)(function*(){return function(o,u){const d=Nt(o);return d.persistence.runTransaction("Get named query","readonly",m=>d.Gr.getNamedQuery(m,u))}(yield tl(a),t)}))}(as(a=jr(a,yi)),t).then(r=>r?new Mo(a,null,r.query):null)}(this._delegate,t).then(r=>r?new Wo(this,r):null)}}class gh extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new ph(new gc(t))}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return Ia.forKey(r,this.firestore,null)}}class mh{constructor(t,r){this._firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}get(t){const r=Ya(t);return this._delegate.get(r).then(o=>new ul(this._firestore,new yc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,r.converter)))}set(t,r,o){const u=Ya(t);return o?(pm("Transaction.set",o),this._delegate.set(u,r,o)):this._delegate.set(u,r),this}update(t,r,o,...u){const d=Ya(t);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...u),this}delete(t){const r=Ya(t);return this._delegate.delete(r),this}}class Xf{constructor(t){this._delegate=t}set(t,r,o){const u=Ya(t);return o?(pm("WriteBatch.set",o),this._delegate.set(u,r,o)):this._delegate.set(u,r),this}update(t,r,o,...u){const d=Ya(t);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...u),this}delete(t){const r=Ya(t);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class nd{constructor(t,r,o){this._firestore=t,this._userDataWriter=r,this._delegate=o}fromFirestore(t,r){const o=new ed(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Ca(this._firestore,o),r??{})}toFirestore(t,r){return r?this._delegate.toFirestore(t,r):this._delegate.toFirestore(t)}static getInstance(t,r){const o=nd.INSTANCES;let u=o.get(t);u||(u=new WeakMap,o.set(t,u));let d=u.get(r);return d||(d=new nd(t,new gh(t),r),u.set(r,d)),d}}nd.INSTANCES=new WeakMap;class Ia{constructor(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}static forPath(t,r,o){if(t.length%2!=0)throw new Rt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Ia(r,new Xi(r._delegate,o,new Te(t)))}static forKey(t,r,o){return new Ia(r,new Xi(r._delegate,o,t))}get id(){return this._delegate.id}get parent(){return new rd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new rd(this.firestore,ty(this._delegate,t))}catch(r){throw Ro(r,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,de.Ku)(t))instanceof Xi&&ny(this._delegate,t)}set(t,r){r=pm("DocumentReference.set",r);try{return r?Ey(this._delegate,t,r):Ey(this._delegate,t)}catch(o){throw Ro(o,"setDoc()","DocumentReference.set()")}}update(t,r,...o){try{return 1===arguments.length?am(this._delegate,t):am(this._delegate,t,r,...o)}catch(u){throw Ro(u,"updateDoc()","DocumentReference.update()")}}delete(){return function zE(a){return cl(jr(a.firestore,yi),[new js(a._key,dn.none())])}(this._delegate)}onSnapshot(...t){const r=mm(t),o=_h(t,u=>new ul(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Iy(this._delegate,r,o)}get(t){let r;return r="cache"===t?.source?function sm(a){a=jr(a,Xi);const t=jr(a.firestore,yi),r=as(t),o=new Uc(t);return function _E(a,t){const r=new Qn;return a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return(o=(0,ue.A)(function*(d,m,A){try{const x=yield function(re,pe){const Re=Nt(re);return Re.persistence.runTransaction("read document","readonly",st=>Re.localDocuments.getDocument(st,pe))}(d,m);x.isFoundDocument()?A.resolve(x):x.isNoDocument()?A.resolve(null):A.reject(new Rt(tt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const G=au(x,`Failed to get document '${m} from cache`);A.reject(G)}}),function u(d,m,A){return o.apply(this,arguments)})(yield tl(a),t,r);var o})),r.promise}(r,a._key).then(u=>new yc(t,o,a._key,u,new gu(null!==u&&u.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===t?.source?function hh(a){a=jr(a,Xi);const t=jr(a.firestore,yi);return yE(as(t),a._key,{source:"server"}).then(r=>mr(t,a,r))}(this._delegate):function dh(a){a=jr(a,Xi);const t=jr(a.firestore,yi);return yE(as(t),a._key).then(r=>mr(t,a,r))}(this._delegate),r.then(o=>new ul(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(t){return new Ia(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}function Ro(a,t,r){return a.message=a.message.replace(t,r),a}function mm(a){for(const t of a)if("object"==typeof t&&!Na(t))return t;return{}}function _h(a,t){var r,o;let u;return u=Na(a[0])?a[0]:Na(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:d=>{u.next&&u.next(t(d))},error:null===(r=u.error)||void 0===r?void 0:r.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class ul{constructor(t,r){this._firestore=t,this._delegate=r}get ref(){return new Ia(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,r){return this._delegate.get(t,r)}isEqual(t){return lh(this._delegate,t._delegate)}}class Ca extends ul{data(t){const r=this._delegate.data(t);return this._delegate._converter||function ti(a,t){a||bt()}(void 0!==r),r}}class Wo{constructor(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}where(t,r,o){try{return new Wo(this.firestore,Xa(this._delegate,function nm(a,t,r){const o=t,u=em("where",a);return ol._create(u,o,r)}(t,r,o)))}catch(u){throw Ro(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,r){try{return new Wo(this.firestore,Xa(this._delegate,function rm(a,t="asc"){const r=t,o=em("orderBy",a);return jf._create(o,r)}(t,r)))}catch(o){throw Ro(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Wo(this.firestore,Xa(this._delegate,function BE(a){return TE("limit",a),al._create("limit",a,"F")}(t)))}catch(r){throw Ro(r,"limit()","Query.limit()")}}limitToLast(t){try{return new Wo(this.firestore,Xa(this._delegate,function jE(a){return TE("limitToLast",a),al._create("limitToLast",a,"L")}(t)))}catch(r){throw Ro(r,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Wo(this.firestore,Xa(this._delegate,function $E(...a){return ah._create("startAt",a,!0)}(...t)))}catch(r){throw Ro(r,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Wo(this.firestore,Xa(this._delegate,function HE(...a){return ah._create("startAfter",a,!1)}(...t)))}catch(r){throw Ro(r,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Wo(this.firestore,Xa(this._delegate,function py(...a){return $f._create("endBefore",a,!1)}(...t)))}catch(r){throw Ro(r,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Wo(this.firestore,Xa(this._delegate,function ch(...a){return $f._create("endAt",a,!0)}(...t)))}catch(r){throw Ro(r,"endAt()","Query.endAt()")}}isEqual(t){return Of(this._delegate,t._delegate)}get(t){let r;return r="cache"===t?.source?function om(a){a=jr(a,Mo);const t=jr(a.firestore,yi),r=as(t),o=new Uc(t);return function q0(a,t){const r=new Qn;return a.asyncQueue.enqueueAndForget((0,ue.A)(function*(){return(o=(0,ue.A)(function*(d,m,A){try{const x=yield $t(d,m,!0),G=new Eg(m,x.Ts),re=G.ma(x.documents),pe=G.applyChanges(re,!1);A.resolve(pe.snapshot)}catch(x){const G=au(x,`Failed to execute query '${m} against cache`);A.reject(G)}}),function u(d,m,A){return o.apply(this,arguments)})(yield tl(a),t,r);var o})),r.promise}(r,a._query).then(u=>new vc(t,o,a,u))}(this._delegate):"server"===t?.source?function Wf(a){a=jr(a,Mo);const t=jr(a.firestore,yi),r=as(t),o=new Uc(t);return vE(r,a._query,{source:"server"}).then(u=>new vc(t,o,a,u))}(this._delegate):function vy(a){a=jr(a,Mo);const t=jr(a.firestore,yi),r=as(t),o=new Uc(t);return tm(a._query),vE(r,a._query).then(u=>new vc(t,o,a,u))}(this._delegate),r.then(o=>new yh(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...t){const r=mm(t),o=_h(t,u=>new yh(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Iy(this._delegate,r,o)}withConverter(t){return new Wo(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}class oI{constructor(t,r){this._firestore=t,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Ca(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yh{constructor(t,r){this._firestore=t,this._delegate=r}get query(){return new Wo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Ca(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(r=>new oI(this._firestore,r))}forEach(t,r){this._delegate.forEach(o=>{t.call(r,new Ca(this._firestore,o))})}isEqual(t){return lh(this._delegate,t._delegate)}}class rd extends Wo{constructor(t,r){super(t,r),this.firestore=t,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Ia(this.firestore,t):null}doc(t){try{return new Ia(this.firestore,void 0===t?Rf(this._delegate):Rf(this._delegate,t))}catch(r){throw Ro(r,"doc()","CollectionReference.doc()")}}add(t){return function WE(a,t){const r=jr(a.firestore,yi),o=Rf(a),u=_c(a.converter,t);return cl(r,[Yg(Lc(a.firestore),"addDoc",o._key,u,null!==a.converter,{}).toMutation(o._key,dn.exists(!1))]).then(()=>o)}(this._delegate,t).then(r=>new Ia(this.firestore,r))}isEqual(t){return ny(this._delegate,t._delegate)}withConverter(t){return new rd(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}function Ya(a){return jr(a,Xi)}class Yf{constructor(...t){this._delegate=new Vc(...t)}static documentId(){return new Yf(xe.keyField().canonicalString())}isEqual(t){return(t=(0,de.Ku)(t))instanceof Vc&&this._delegate._internalPath.isEqual(t._internalPath)}}class xa{constructor(t){this._delegate=t}static serverTimestamp(){const t=function YE(){return new uy("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new xa(t)}static delete(){const t=function My(){return new Vf("deleteField")}();return t._methodName="FieldValue.delete",new xa(t)}static arrayUnion(...t){const r=function JE(...a){return new ly("arrayUnion",a)}(...t);return r._methodName="FieldValue.arrayUnion",new xa(r)}static arrayRemove(...t){const r=function ZE(...a){return new Jg("arrayRemove",a)}(...t);return r._methodName="FieldValue.arrayRemove",new xa(r)}static increment(t){const r=function eI(a){return new Yl("increment",a)}(t);return r._methodName="FieldValue.increment",new xa(r)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const vh={Firestore:Fy,GeoPoint:xf,Timestamp:Xt,Blob:ph,Transaction:mh,WriteBatch:Xf,DocumentReference:Ia,DocumentSnapshot:ul,Query:Wo,QueryDocumentSnapshot:Ca,QuerySnapshot:yh,CollectionReference:rd,FieldPath:Yf,FieldValue:xa,setLogLevel:function Vy(a){!function Ln(a){vn.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function Eh(a){(function _m(a,t){a.INTERNAL.registerComponent(new qe.uA("firestore-compat",r=>{const o=r.getProvider("app-compat").getImmediate(),u=r.getProvider("firestore").getImmediate();return t(o,u)},"PUBLIC").setServiceProps(Object.assign({},vh)))})(a,(t,r)=>new Fy(t,r,new sI)),a.registerVersion("@firebase/firestore-compat","0.3.36")}(ie.A);var Ly=k(7935);function By(a,t){return function Uy(a,t=U.E){return new Le.c(r=>{let o;return null!=t?t.schedule(()=>{o=a.onSnapshot({includeMetadataChanges:!0},r)}):o=a.onSnapshot({includeMetadataChanges:!0},r),()=>{o?.()}})}(a,t)}function ym(a,t){return By(a,t).pipe((0,Fe.T)(r=>({payload:r,type:"query"})))}class jy{ref;afs;constructor(t,r){this.ref=t,this.afs=r}set(t,r){return this.ref.set(t,r)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,r){const o=this.ref.collection(t),{ref:u,query:d}=id(o,r);return new vm(u,d,this.afs)}snapshotChanges(){return function aI(a,t){return By(a,t).pipe((0,ye.Z)(void 0),Ae(),(0,Fe.T)(r=>{const[o,u]=r;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(se.U0)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Fe.T)(({payload:r})=>t.idField?{...r.data(),[t.idField]:r.id}:r.data()))}get(t){return(0,$e.H)(this.ref.get(t)).pipe(se.U0)}}function Ih(a,t){return ym(a,t).pipe((0,ye.Z)(void 0),Ae(),(0,Fe.T)(r=>{const[o,u]=r,d=u.payload.docChanges(),m=d.map(A=>({type:A.type,payload:A}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((A,x)=>{const G=d.find(pe=>pe.doc.ref.isEqual(A.ref)),re=o?.payload.docs.find(pe=>pe.ref.isEqual(A.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(A.metadata)||!G&&re&&JSON.stringify(re.metadata)===JSON.stringify(A.metadata)||m.push({type:"modified",payload:{oldIndex:x,newIndex:x,type:"modified",doc:A}})}),m}))}function Ch(a,t,r){return Ih(a,r).pipe((0,wt.S)((o,u)=>function cI(a,t,r){return t.forEach(o=>{r.indexOf(o.type)>-1&&(a=function uI(a,t){switch(t.type){case"added":if(!a[t.newIndex]||!a[t.newIndex].doc.ref.isEqual(t.doc.ref))return $y(a,t.newIndex,0,t);break;case"modified":if(null==a[t.oldIndex]||a[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const r=a.slice();return r.splice(t.oldIndex,1),r.splice(t.newIndex,0,t),r}return $y(a,t.newIndex,1,t)}break;case"removed":if(a[t.oldIndex]&&a[t.oldIndex].doc.ref.isEqual(t.doc.ref))return $y(a,t.oldIndex,1)}return a}(a,o))}),a}(o,u.map(d=>d.payload),t),[]),function Tt(a,t=pt.D){return a=a??At,(0,He.N)((r,o)=>{let u,d=!0;r.subscribe((0,Ct._)(o,m=>{const A=t(m);(d||!a(u,A))&&(d=!1,u=A,o.next(m))}))})}(),(0,Fe.T)(o=>o.map(u=>({type:u.type,payload:u}))))}function $y(a,t,r,...o){const u=a.slice();return u.splice(t,r,...o),u}function Hy(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class vm{ref;query;afs;constructor(t,r,o){this.ref=t,this.query=r,this.afs=o}stateChanges(t){let r=Ih(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(r=r.pipe((0,Fe.T)(o=>o.filter(u=>t.indexOf(u.type)>-1)))),r.pipe((0,ye.Z)(void 0),Ae(),(0,mt.p)(([o,u])=>u.length>0||!o),(0,Fe.T)(([,o])=>o),se.U0)}auditTrail(t){return this.stateChanges(t).pipe((0,wt.S)((r,o)=>[...r,...o],[]))}snapshotChanges(t){const r=Hy(t);return Ch(this.query,r,this.afs.schedulers.outsideAngular).pipe(se.U0)}valueChanges(t={}){return ym(this.query,this.afs.schedulers.outsideAngular).pipe((0,Fe.T)(r=>r.payload.docs.map(o=>t.idField?{...o.data(),[t.idField]:o.id}:o.data())),se.U0)}get(t){return(0,$e.H)(this.query.get(t)).pipe(se.U0)}add(t){return this.ref.add(t)}doc(t){return new jy(this.ref.doc(t),this.afs)}}class lI{query;afs;constructor(t,r){this.query=t,this.afs=r}stateChanges(t){return t&&0!==t.length?Ih(this.query,this.afs.schedulers.outsideAngular).pipe((0,Fe.T)(r=>r.filter(o=>t.indexOf(o.type)>-1)),(0,mt.p)(r=>r.length>0),se.U0):Ih(this.query,this.afs.schedulers.outsideAngular).pipe(se.U0)}auditTrail(t){return this.stateChanges(t).pipe((0,wt.S)((r,o)=>[...r,...o],[]))}snapshotChanges(t){const r=Hy(t);return Ch(this.query,r,this.afs.schedulers.outsideAngular).pipe(se.U0)}valueChanges(t={}){return ym(this.query,this.afs.schedulers.outsideAngular).pipe((0,Fe.T)(o=>o.payload.docs.map(u=>t.idField?{[t.idField]:u.id,...u.data()}:u.data())),se.U0)}get(t){return(0,$e.H)(this.query.get(t)).pipe(se.U0)}}const Gy=new C.nKC("angularfire2.enableFirestorePersistence"),Em=new C.nKC("angularfire2.firestore.persistenceSettings"),Im=new C.nKC("angularfire2.firestore.settings"),zy=new C.nKC("angularfire2.firestore.use-emulator");function id(a,t=(r=>r)){return{query:t(a),ref:a}}let wh=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,o,u,d,m,A,x,G,re,pe,Re,st,jt,Jt,Kt,Vn,qn){this.schedulers=x;const kn=(0,Me.iB)(r,A,o),or=re;pe&&(0,M.gF)(kn,A,Re,jt,Jt,Kt,st,Vn),[this.firestore,this.persistenceEnabled$]=(0,Me.BM)(`${kn.name}.firestore`,"AngularFirestore",kn.name,()=>{const $r=A.runOutsideAngular(()=>kn.firestore());if(d&&$r.settings(d),or&&$r.useEmulator(...or),u&&!(0,_.Vy)(m)){const Ar=()=>{try{return(0,$e.H)($r.enablePersistence(G||void 0).then(()=>!0,()=>!1))}catch(et){return typeof console<"u"&&console.warn(et),(0,Ee.of)(!1)}};return[$r,A.runOutsideAngular(Ar)]}return[$r,(0,Ee.of)(!1)]},[d,or,u])}collection(r,o){let u;u="string"==typeof r?this.firestore.collection(r):r;const{ref:d,query:m}=id(u,o),A=this.schedulers.ngZone.run(()=>d);return new vm(A,m,this)}collectionGroup(r,o){const u=o||(m=>m),d=this.firestore.collectionGroup(r);return new lI(u(d),this)}doc(r){let o;o="string"==typeof r?this.firestore.doc(r):r;const u=this.schedulers.ngZone.run(()=>o);return new jy(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||a)(C.KVO(Me.rx),C.KVO(Me.uP,8),C.KVO(Gy,8),C.KVO(Im,8),C.KVO(C.Agw),C.KVO(C.SKi),C.KVO(se.u0),C.KVO(Em,8),C.KVO(zy,8),C.KVO(M.DS,8),C.KVO(M.CP,8),C.KVO(M.yy,8),C.KVO(M.ZP,8),C.KVO(M.$z,8),C.KVO(M.AU,8),C.KVO(M.UB,8),C.KVO(se.Jv,8))};static \u0275prov=C.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})(),Th=(()=>{class a{constructor(){Ly.A.registerVersion("angularfire",se.xv.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:Gy,useValue:!0},{provide:Em,useValue:r}]}}static \u0275fac=function(o){return new(o||a)};static \u0275mod=C.$C({type:a});static \u0275inj=C.G2t({providers:[wh]})}return a})();var dI=k(7231),Cm=k(4454),ll=k(9969),Jf=k(6569);function wm(a,t){1&a&&(C.j41(0,"span",13),C.EFF(1,"invalid Email format"),C.k0s())}function hI(a,t){1&a&&(C.j41(0,"span",13),C.EFF(1,"Email is required"),C.k0s())}function lC(a,t){if(1&a){const r=C.RV6();C.j41(0,"div",14)(1,"img",15),C.bIt("click",function(){C.eBV(r);const u=C.XpG();return C.Njj(u.togglePasswordVisibility("password"))}),C.k0s()()}}function dC(a,t){if(1&a){const r=C.RV6();C.j41(0,"div",14)(1,"img",16),C.bIt("click",function(){C.eBV(r);const u=C.XpG();return C.Njj(u.togglePasswordVisibility("password"))}),C.k0s()()}}function fI(a,t){1&a&&(C.j41(0,"span",13),C.EFF(1," Password is required "),C.k0s())}function pI(a,t){if(1&a){const r=C.RV6();C.j41(0,"div",14)(1,"img",15),C.bIt("click",function(){C.eBV(r);const u=C.XpG(2);return C.Njj(u.togglePasswordVisibility("confirmPassword"))}),C.k0s()()}}function hC(a,t){if(1&a){const r=C.RV6();C.j41(0,"div",14)(1,"img",16),C.bIt("click",function(){C.eBV(r);const u=C.XpG(2);return C.Njj(u.togglePasswordVisibility("confirmPassword"))}),C.k0s()()}}function gI(a,t){1&a&&(C.j41(0,"span",13),C.EFF(1," Confirm password is required "),C.k0s())}function fC(a,t){if(1&a&&(C.j41(0,"div",4)(1,"div",7),C.nrm(2,"input",17),C.DNE(3,pI,2,0,"div",9)(4,hC,2,0,"div",9),C.k0s(),C.DNE(5,gI,2,0,"span",6),C.k0s()),2&a){let r;const o=C.XpG();C.R7$(2),C.Y8G("type",o.showConfirmPassword),C.R7$(),C.Y8G("ngIf","password"!==o.showConfirmPassword),C.R7$(),C.Y8G("ngIf","password"===o.showConfirmPassword),C.R7$(),C.Y8G("ngIf",(null==(r=o.form.get("confirmPassword"))?null:r.hasError("required"))&&(null==(r=o.form.get("confirmPassword"))?null:r.touched))}}function mI(a,t){if(1&a){const r=C.RV6();C.j41(0,"button",18),C.bIt("click",function(){C.eBV(r);const u=C.XpG();return C.Njj(u.googleLogin())}),C.EFF(1," Sign in with Google "),C.nrm(2,"img",19),C.k0s()}}function _I(a,t){if(1&a){const r=C.RV6();C.j41(0,"button",18),C.bIt("click",function(){C.eBV(r);const u=C.XpG();return C.Njj(u.emailAndPasswordLogin())}),C.EFF(1," Sign in "),C.k0s()}}function yI(a,t){if(1&a){const r=C.RV6();C.j41(0,"button",18),C.bIt("click",function(){C.eBV(r);const u=C.XpG();return C.Njj(u.registration())}),C.EFF(1," Register "),C.k0s()}}const Tm=a=>{const t=a.get("password")?.value,r=a.get("confirmPassword")?.value;return t&&r&&t!==r?{passwordsMismatch:!0}:null},Dm=[{path:"",component:(()=>{class a{constructor(r,o){this.fb=r,this.logInService=o,this.selected=!0,this.showPassword="password",this.showConfirmPassword="password",this.form=this.fb.group({email:["",[L.k0.required,L.k0.email]],password:["",L.k0.required],confirmPassword:["",L.k0.required]},{validators:Tm})}ngOnInit(){}select(){this.selected=!this.selected,this.clearInputs()}togglePasswordVisibility(r){"password"===r?this.showPassword="password"===this.showPassword?"":"password":"confirmPassword"===r&&(this.showConfirmPassword="password"===this.showConfirmPassword?"":"password")}googleLogin(){this.logInService.loginWithGoogle()}emailAndPasswordLogin(){const r=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.loginWithEmailAndPassword(r,o)}registration(){if(this.form.hasError("passwordsMismatch"))return console.log("Password mismatch detected"),void alert("Password and confirm password do not match");console.log(this.form.get("password")?.getRawValue()),console.log(this.form.get("confirmPassword")?.getRawValue()),console.log("Form is valid, proceeding with registration");let r=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.registration(r,o),this.clearInputs(),this.selected=!0}clearInputs(){this.form.get("email")?.setValue(""),this.form.get("password")?.setValue(""),this.form.get("confirmPassword")?.setValue(""),this.form.get("email")?.markAsUntouched(),this.form.get("password")?.markAsUntouched(),this.form.get("confirmPassword")?.markAsUntouched()}static#e=this.\u0275fac=function(o){return new(o||a)(C.rXU(L.ok),C.rXU(Jf.p))};static#t=this.\u0275cmp=C.VBU({type:a,selectors:[["app-login"]],decls:24,vars:14,consts:[[1,"loginContainer"],[1,"container"],[3,"click","ngClass"],[3,"formGroup"],[1,"inputs"],["formControlName","email","placeholder","Email ex:sabadmin@gmail.com"],["class","error-message",4,"ngIf"],[1,"password-input"],["formControlName","password","placeholder","Password ex:123123123",3,"type"],["class","pass-img",4,"ngIf"],["class","inputs",4,"ngIf"],[3,"click",4,"ngIf"],["routerLink","/products"],[1,"error-message"],[1,"pass-img"],["src","assets/show.png","alt","img",3,"click"],["src","assets/hidden.png","alt","img",3,"click"],["formControlName","confirmPassword","placeholder","Confirm Password",3,"type"],[3,"click"],["src","assets/google.png","alt","img"]],template:function(o,u){if(1&o&&(C.j41(0,"div",0)(1,"div",1)(2,"div")(3,"p",2),C.bIt("click",function(){return u.select()}),C.EFF(4,"LOG IN"),C.k0s(),C.j41(5,"p",2),C.bIt("click",function(){return u.select()}),C.EFF(6,"SIGN UP"),C.k0s()(),C.j41(7,"form",3)(8,"div",4),C.nrm(9,"input",5),C.DNE(10,wm,2,0,"span",6)(11,hI,2,0,"span",6),C.k0s(),C.j41(12,"div",4)(13,"div",7),C.nrm(14,"input",8),C.DNE(15,lC,2,0,"div",9)(16,dC,2,0,"div",9),C.k0s(),C.DNE(17,fI,2,0,"span",6),C.k0s(),C.DNE(18,fC,6,4,"div",10)(19,mI,3,0,"button",11)(20,_I,2,0,"button",11)(21,yI,2,0,"button",11),C.j41(22,"button",12),C.EFF(23,"Guest Mode"),C.k0s()()()()),2&o){let d,m,A;C.R7$(3),C.Y8G("ngClass",u.selected?"selected":""),C.R7$(2),C.Y8G("ngClass",u.selected?"":"selected"),C.R7$(2),C.Y8G("formGroup",u.form)("@toggleState",u.selected?"login":"signup"),C.R7$(3),C.Y8G("ngIf",null==(d=u.form.get("email"))?null:d.hasError("email")),C.R7$(),C.Y8G("ngIf",(null==(m=u.form.get("email"))?null:m.hasError("required"))&&(null==(m=u.form.get("email"))?null:m.touched)),C.R7$(3),C.Y8G("type",u.showPassword),C.R7$(),C.Y8G("ngIf","password"!==u.showPassword),C.R7$(),C.Y8G("ngIf","password"===u.showPassword),C.R7$(),C.Y8G("ngIf",(null==(A=u.form.get("password"))?null:A.hasError("required"))&&(null==(A=u.form.get("password"))?null:A.touched)),C.R7$(),C.Y8G("ngIf",!u.selected),C.R7$(),C.Y8G("ngIf",u.selected),C.R7$(),C.Y8G("ngIf",u.selected),C.R7$(),C.Y8G("ngIf",!u.selected)}},dependencies:[_.YU,_.bT,L.qT,L.me,L.BC,L.cb,L.j4,L.JD,Cm.Wk],styles:[".loginContainer[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:400px;height:400px;background-color:#62dfdf;border-radius:4px;background-image:url(background.05b7e6a7f70c58a5.webp);background-size:cover;transition:transform .3s ease-in-out}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;gap:20px;padding:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{cursor:pointer;font-size:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]{position:relative}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:6px;right:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{width:100%;height:70%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:200px;height:30px;border-radius:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#13afc7;color:#fff;display:flex;justify-content:center;align-items:center;cursor:pointer}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:5px}.selected[_ngcontent-%COMP%]{color:#fff;border-bottom:1px solid white}.error-message[_ngcontent-%COMP%]{font-size:14px;color:red}.button-disabled[_ngcontent-%COMP%]{background-color:#8ac9d3}"],data:{animation:[(0,ll.hZ)("toggleState",[(0,ll.wk)("login",(0,ll.iF)({transform:"translateX(0)"})),(0,ll.wk)("signup",(0,ll.iF)({transform:"translateY(-10%)"})),(0,ll.kY)("login <=> signup",[(0,ll.i0)("0.4s ease-in-out")])])]},changeDetection:0})}return a})()}];let ep=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=C.$C({type:a});static#n=this.\u0275inj=C.G2t({imports:[Cm.iI.forChild(Dm),Cm.iI]})}return a})();var Wy=k(1626);const Dh={apiKey:"AIzaSyCbQiRFo1MKF_WTEIwSMYg4rFL0CkKdTDI",authDomain:"exercise-app-9b873.firebaseapp.com",databaseURL:"https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app",projectId:"exercise-app-9b873",storageBucket:"exercise-app-9b873.appspot.com",messagingSenderId:"146569895533",appId:"1:146569895533:web:cfb4bca172cc29ee50a964",measurementId:"G-MW950TMVK5"};let Ky=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=C.$C({type:a});static#n=this.\u0275inj=C.G2t({providers:[dI.HF],imports:[_.MD,L.YN,L.X1,Th,M.X8,ep,Wy.q1,Me.bf.initializeApp(Dh)]})}return a})()},6569:(en,Qe,k)=>{k.d(Qe,{p:()=>ye});var _=k(7231),L=k(4412),M=k(6354),C=k(9437),se=k(7673),Me=k(4438),U=k(1182),Le=k(1626),$e=k(4454),Ee=k(2906);let ye=(()=>{class He{constructor(Ae,Fe,wt,pt){this.auth=Ae,this.http=Fe,this.router=wt,this.cartService=pt,this.loggedUser=new L.t(void 0),this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app/musicShopUsers",this.isAdmin=new L.t(!1)}loginWithGoogle(){this.auth.signInWithPopup(new _.HF).then(Ae=>{localStorage.setItem("token",JSON.stringify(Ae.user?.uid)),this.findUser(Ae.user?.email).subscribe(Fe=>{void 0===Fe?this.addUserTodatabase(Ae.user?.email,Ae.user?.photoURL):this.findUser(Ae.user?.email).subscribe(wt=>{this.loggedUser.next(wt),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(wt))})})},Ae=>{alert(Ae.mesasage)})}loginWithEmailAndPassword(Ae,Fe){this.auth.signInWithEmailAndPassword(Ae,Fe).then(wt=>{this.findUser(wt.user?.email).subscribe(pt=>{this.loggedUser.next(pt),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(pt))})},wt=>{alert(wt.message),console.log(wt.mesasage)})}registration(Ae,Fe){this.auth.createUserWithEmailAndPassword(Ae,Fe).then(wt=>{this.addUserTodatabase(wt.user?.email)},wt=>{alert(wt.message)})}addUserTodatabase(Ae,Fe){this.http.post(`${this.url}.json`,{email:Ae,isAdmin:!1,photoUrl:Fe,address:"",likedProducts:[{key:"none",category:"other"}],purchasedProducts:[{email:Ae,userId:Ae,date:new Date,totalPrice:0,products:[{quantity:-1,product:{key:"unknown",product:{category:"other",model:"none",price:-1,quantity:-1,discount:-1,photoUrl:["none"]}}}]}]}).subscribe(()=>{console.log("User created succesfully")},pt=>{alert(pt.message)})}findUser(Ae){return this.http.get(`${this.url}.json`).pipe((0,M.T)(Fe=>{let wt,pt="";if(Object.entries(Fe).find(([Tt,At])=>{At.email===Ae&&(wt=At,pt=Tt)}),pt&&wt)return{user:wt,key:pt}}),(0,C.W)(Fe=>(console.error(Fe),(0,se.of)(void 0))))}findUserById(Ae){return this.http.get(`${this.url}/${Ae}.json`).pipe((0,M.T)(Fe=>Fe.email))}checkIfLoggedIn(){if(localStorage.getItem("currentUser")){let Ae=JSON.parse(localStorage.getItem("currentUser"));this.loggedUser.next(Ae),localStorage.getItem("cart")&&this.cartService.cart.next(JSON.parse(localStorage.getItem("cart")))}}logOut(){localStorage.removeItem("currentUser"),localStorage.removeItem("cart"),this.loggedUser.next(void 0),this.cartService.cart.next([])}static#e=this.\u0275fac=function(Fe){return new(Fe||He)(Me.KVO(U.DS),Me.KVO(Le.Qq),Me.KVO($e.Ix),Me.KVO(Ee.m))};static#t=this.\u0275prov=Me.jDH({token:He,factory:He.\u0275fac,providedIn:"root"})}return He})()},6483:(en,Qe,k)=>{k.d(Qe,{P:()=>L});var _=k(4438);let L=(()=>{class M{transform(se){return se.charAt(0).toUpperCase()+se.substring(1,se.length)}static#e=this.\u0275fac=function(Me){return new(Me||M)};static#t=this.\u0275pipe=_.EJ8({name:"upperCase",type:M,pure:!0,standalone:!0})}return M})()},6552:(en,Qe,k)=>{k.d(Qe,{u:()=>se});var _=k(4412),L=k(4438),M=k(6569);function C(Me,U){1&Me&&(L.j41(0,"div",2),L.nrm(1,"div",3),L.j41(2,"p"),L.EFF(3,"Loading..."),L.k0s()())}let se=(()=>{class Me{constructor(Le){this.authService=Le,this.isEditing="",this.loadingSubject=new _.t(!0),this.loading$=this.loadingSubject.asObservable()}ngOnInit(){this.authService.checkIfLoggedIn()}loadingValue(Le){this.loadingSubject.next(!Le)}static#e=this.\u0275fac=function($e){return new($e||Me)(L.rXU(M.p))};static#t=this.\u0275cmp=L.VBU({type:Me,selectors:[["app-product-page"]],decls:11,vars:7,consts:[["class","loading-container",4,"ngIf"],[3,"productsImported","category"],[1,"loading-container"],[1,"loader"]],template:function($e,Ee){1&$e&&(L.nrm(0,"app-header")(1,"app-top-products"),L.j41(2,"h1"),L.EFF(3,"Our Products"),L.k0s(),L.DNE(4,C,4,0,"div",0),L.nI1(5,"async"),L.j41(6,"app-product-page-single-category",1),L.bIt("productsImported",function(He){return Ee.loadingValue(He)}),L.k0s(),L.j41(7,"app-product-page-single-category",1),L.bIt("productsImported",function(He){return Ee.loadingValue(He)}),L.k0s(),L.j41(8,"app-product-page-single-category",1),L.bIt("productsImported",function(He){return Ee.loadingValue(He)}),L.k0s(),L.j41(9,"app-product-page-single-category",1),L.bIt("productsImported",function(He){return Ee.loadingValue(He)}),L.k0s(),L.nrm(10,"app-footer")),2&$e&&(L.R7$(4),L.Y8G("ngIf",L.bMT(5,5,Ee.loading$)),L.R7$(2),L.Y8G("category","guitar"),L.R7$(),L.Y8G("category","drum"),L.R7$(),L.Y8G("category","piano"),L.R7$(),L.Y8G("category","bass"))},styles:["h1[_ngcontent-%COMP%]{display:flex;justify-content:center}.loading-container[_ngcontent-%COMP%]{margin:0 auto;width:300px;height:300px;display:flex;flex-direction:column;justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%] > .loader[_ngcontent-%COMP%]{width:60px;aspect-ratio:1;border-radius:50%;border:8px solid lightblue;border-right-color:orange;animation:_ngcontent-%COMP%_l2 1s infinite linear}@keyframes _ngcontent-%COMP%_l2{to{transform:rotate(1turn)}}"],changeDetection:0})}return Me})()},8569:(en,Qe,k)=>{k.r(Qe),k.d(Qe,{ProductPageModule:()=>ue});var _=k(177),L=k(6552),M=k(4454),C=k(4438);const se=[{path:"",component:L.u}];let Me=(()=>{class Ce{static#e=this.\u0275fac=function(de){return new(de||Ce)};static#t=this.\u0275mod=C.$C({type:Ce});static#n=this.\u0275inj=C.G2t({imports:[M.iI.forChild(se),M.iI]})}return Ce})();var U=k(3236),Le=k(1985),$e=k(9470);let Ct=(()=>{class Ce{constructor(ze){this.cdr=ze,this.index=0,this.imgUrls=["assets/guitar1.jpg","assets/piano.png","assets/drum.avif","assets/bass.webp"],this.img=this.imgUrls[0]}ngOnInit(){this.startTimeChangeInterval()}startTimeChangeInterval(){this.intervalSubscription=function He(Ce=0,qe=U.E){return Ce<0&&(Ce=0),function ye(Ce=0,qe,ze=U.b){let de=-1;return null!=qe&&((0,$e.m)(qe)?ze=qe:de=qe),new Le.c(Ue=>{let Mt=function Ee(Ce){return Ce instanceof Date&&!isNaN(Ce)}(Ce)?+Ce-ze.now():Ce;Mt<0&&(Mt=0);let pn=0;return ze.schedule(function(){Ue.closed||(Ue.next(pn++),0<=de?this.schedule(void 0,de):Ue.complete())},Mt)})}(Ce,Ce,qe)}(4e3).subscribe(()=>{this.changeImgUp(),this.cdr.detectChanges()})}changeImgUp(){3===this.index?(this.index=0,this.img=this.imgUrls[this.index]):(this.img=this.imgUrls[this.index+1],this.index++),this.clearInterval()}changeImgDown(){0===this.index?(this.index=3,this.img=this.imgUrls[this.index]):(this.img=this.imgUrls[this.index-1],this.index--),this.clearInterval()}changeIndex(ze){this.index=ze,this.img=this.imgUrls[ze],this.clearInterval()}clearInterval(){this.intervalSubscription&&this.intervalSubscription?.unsubscribe(),this.startTimeChangeInterval()}static#e=this.\u0275fac=function(de){return new(de||Ce)(C.rXU(C.gRc))};static#t=this.\u0275cmp=C.VBU({type:Ce,selectors:[["app-top-products"]],decls:12,vars:5,consts:[[1,"topProducts-container"],[3,"click","ngClass"],[1,"arrows"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"images"],["alt","img",3,"src"]],template:function(de,Ue){1&de&&(C.j41(0,"div",0)(1,"div")(2,"div")(3,"div",1),C.bIt("click",function(){return Ue.changeIndex(0)}),C.k0s(),C.j41(4,"div",1),C.bIt("click",function(){return Ue.changeIndex(1)}),C.k0s(),C.j41(5,"div",1),C.bIt("click",function(){return Ue.changeIndex(2)}),C.k0s(),C.j41(6,"div",1),C.bIt("click",function(){return Ue.changeIndex(3)}),C.k0s()(),C.j41(7,"div",2)(8,"img",3),C.bIt("click",function(){return Ue.changeImgDown()}),C.k0s(),C.j41(9,"img",4),C.bIt("click",function(){return Ue.changeImgUp()}),C.k0s()()(),C.j41(10,"div",5),C.nrm(11,"img",6),C.k0s()()),2&de&&(C.R7$(3),C.Y8G("ngClass",0===Ue.index?"highlight":""),C.R7$(),C.Y8G("ngClass",1===Ue.index?"highlight":""),C.R7$(),C.Y8G("ngClass",2===Ue.index?"highlight":""),C.R7$(),C.Y8G("ngClass",3===Ue.index?"highlight":""),C.R7$(5),C.Y8G("src",Ue.img,C.B4B))},dependencies:[_.YU],styles:[".topProducts-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0 auto 100px;gap:20px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;flex-direction:column;align-items:center;gap:10px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child{display:flex;gap:10px;width:100%}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]{width:10px;height:10px;border:.4px solid #ffc107;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]{display:flex}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:600px;height:300px}.highlight[_ngcontent-%COMP%]{background-color:#ffc107}"],changeDetection:0})}return Ce})();var Ae=k(2152),Fe=k(708),wt=k(3227),pt=k(9156),Tt=k(3550),At=k(5435);function mt(Ce,qe){if(1&Ce){const ze=C.RV6();C.j41(0,"app-card",6),C.bIt("editEvent",function(Ue){C.eBV(ze);const Mt=C.XpG(2);return C.Njj(Mt.onFormSubmitted(Ue))})("removeEvent",function(Ue){C.eBV(ze);const Mt=C.XpG(2);return C.Njj(Mt.removeHandler(Ue))}),C.k0s()}if(2&Ce){const ze=qe.$implicit;C.Y8G("showSpecificContent",!0)("product",ze)}}function ce(Ce,qe){if(1&Ce){const ze=C.RV6();C.j41(0,"div",1)(1,"div")(2,"h2"),C.EFF(3),C.k0s(),C.j41(4,"div")(5,"img",2),C.bIt("click",function(){C.eBV(ze);const Ue=C.XpG();return C.Njj(Ue.shiftRight())}),C.k0s(),C.j41(6,"img",3),C.bIt("click",function(){C.eBV(ze);const Ue=C.XpG();return C.Njj(Ue.shiftLeft())}),C.k0s()()(),C.j41(7,"div",4),C.DNE(8,mt,1,2,"app-card",5),C.nI1(9,"slice"),C.k0s()()}if(2&Ce){const ze=C.XpG();C.R7$(3),C.SpI("",ze.modifyCatName(),":"),C.R7$(5),C.Y8G("ngForOf",C.brH(9,2,ze.productsArray,ze.sliceStart,ze.SliceEnd))}}let ie=(()=>{class Ce{constructor(ze,de){this.sharedService=ze,this.cd=de,this.productsArray=[],this.productsImported=new C.bkB(!0),this.loading=!0,this.sliceStart=0,this.SliceEnd=6,this.length=0}ngOnInit(){this.category&&this.sharedService.getTypeOfProduct(`${this.category}`).subscribe(ze=>{this.productsArray=ze,this.length=ze.length,this.loading=!1,this.productsImported.emit(!0),this.cd.detectChanges()})}shiftLeft(){this.SliceEnd<this.length&&(this.sliceStart+=1,this.SliceEnd+=1)}shiftRight(){this.sliceStart>0&&(this.sliceStart-=1,this.SliceEnd-=1)}onFormSubmitted(ze){this.sharedService.editProduct(ze.form,ze.prodId,ze.prodCategory).subscribe(()=>{"guitar"===ze.prodCategory&&this.sharedService.updateProductArray(ze.form,this.productsArray,ze.prodId),this.cd.detectChanges()})}removeHandler(ze){this.productsArray=this.productsArray.filter(de=>de.key!==ze.prodId),this.cd.detectChanges()}modifyCatName(){return this.category?this.category.charAt(0).toUpperCase()+this.category.substring(1,this.category.length)+"s":this.category}static#e=this.\u0275fac=function(de){return new(de||Ce)(C.rXU(At.m),C.rXU(C.gRc))};static#t=this.\u0275cmp=C.VBU({type:Ce,selectors:[["app-product-page-single-category"]],inputs:{category:"category"},outputs:{productsImported:"productsImported"},standalone:!0,features:[C.aNF],decls:1,vars:1,consts:[["class","products-container",4,"ngIf"],[1,"products-container"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"products"],[3,"showSpecificContent","product","editEvent","removeEvent",4,"ngFor","ngForOf"],[3,"editEvent","removeEvent","showSpecificContent","product"]],template:function(de,Ue){1&de&&C.DNE(0,ce,10,6,"div",0),2&de&&C.Y8G("ngIf",!Ue.loading)},dependencies:[_.MD,_.Sq,_.bT,_.P9,Tt.i],styles:[".products-container[_ngcontent-%COMP%]{padding:60px}.products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;display:flex;justify-content:space-between}.products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;cursor:pointer}.products-container[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{display:flex;gap:20px}"]})}return Ce})(),ue=(()=>{class Ce{static#e=this.\u0275fac=function(de){return new(de||Ce)};static#t=this.\u0275mod=C.$C({type:Ce});static#n=this.\u0275inj=C.G2t({imports:[_.MD,Me,Fe.n,Ae.l,wt.K,M.iI,pt.B,Tt.i,ie]})}return Ce})();C.wjB(L.u,[_.bT,Fe.n,Ae.l,ie,Ct],[_.Jj])},1343:(en,Qe,k)=>{k.r(Qe),k.d(Qe,{ProfileModuleModule:()=>ce});var _=k(177),L=k(4454),M=k(9417),C=k(6697),se=k(4438),Me=k(6569),U=k(5435),Le=k(2152),$e=k(708),Ee=k(3550);function ye(ie,ue){if(1&ie){const Ce=se.RV6();se.j41(0,"button",5),se.bIt("click",function(){se.eBV(Ce);const ze=se.XpG();return se.Njj(ze.addingProd())}),se.EFF(1," Add New Product "),se.k0s()}}function He(ie,ue){if(1&ie){const Ce=se.RV6();se.j41(0,"div",26)(1,"div"),se.nrm(2,"img",27),se.j41(3,"img",28),se.bIt("click",function(){const ze=se.eBV(Ce).$implicit,de=se.XpG(2);return se.Njj(de.removeImg(ze))}),se.k0s()()()}if(2&ie){const Ce=ue.$implicit;se.R7$(2),se.Y8G("src",Ce,se.B4B)}}function Ct(ie,ue){if(1&ie){const Ce=se.RV6();se.j41(0,"form",10)(1,"select",11)(2,"option",12),se.EFF(3,"Guitar"),se.k0s(),se.j41(4,"option",13),se.EFF(5,"Drum"),se.k0s(),se.j41(6,"option",14),se.EFF(7,"Bass"),se.k0s(),se.j41(8,"option",15),se.EFF(9,"Piano"),se.k0s(),se.j41(10,"option",16),se.EFF(11,"Other"),se.k0s()(),se.nrm(12,"input",17)(13,"input",18)(14,"input",19)(15,"input",20)(16,"input",21),se.j41(17,"input",22),se.bIt("change",function(ze){se.eBV(Ce);const de=se.XpG();return se.Njj(de.onFileChange(ze))}),se.k0s(),se.j41(18,"button",23),se.bIt("click",function(){se.eBV(Ce);const ze=se.XpG();return se.Njj(ze.addNewProduct())}),se.EFF(19," add product "),se.k0s(),se.j41(20,"div",24),se.DNE(21,He,4,1,"div",25),se.k0s()()}if(2&ie){const Ce=se.XpG();se.Y8G("formGroup",Ce.form),se.R7$(18),se.Y8G("disabled",Ce.form.invalid),se.R7$(3),se.Y8G("ngForOf",Ce.photos)}}function Ae(ie,ue){1&ie&&se.nrm(0,"app-card",29),2&ie&&se.Y8G("product",ue.$implicit)}let Fe=(()=>{class ie{constructor(Ce,qe,ze,de,Ue){this.authService=Ce,this.cd=qe,this.fb=ze,this.sharedService=de,this.router=Ue,this.photos=[],this.addingProduct=!1,this.purchasedProducts=[],this.form=this.fb.group({category:["",[M.k0.required]],model:["",M.k0.required],price:["",M.k0.required],quantity:["",M.k0.required],discount:["",M.k0.required],description:["",M.k0.required]})}ngOnInit(){this.authService.loggedUser.pipe((0,C.s)(1)).subscribe(Ce=>{Ce&&Ce.user.purchasedProducts&&(this.user=Ce,this.purchasedProducts=Ce?.user.purchasedProducts.slice(1)),this.getUserLikedProducts(),this.form.patchValue({category:"guitar"})})}onFileChange(Ce){const qe=Ce.target.files[0];if(qe){const ze=new FileReader;ze.onload=de=>{this.photos.push(de.target?.result),this.cd.detectChanges()},ze.readAsDataURL(qe)}}addingProd(){this.addingProduct=!this.addingProduct}removeImg(Ce){const qe=this.photos.findIndex(ze=>ze===Ce);this.photos.splice(qe,1)}addNewProduct(){const Ce=this.form.get("category")?.getRawValue(),qe=this.form.get("model")?.getRawValue(),ze=this.form.get("price")?.getRawValue(),de=this.form.get("discount")?.getRawValue(),Ue=this.form.get("quantity")?.getRawValue(),Mt=this.form.get("description")?.getRawValue();this.sharedService.addProduct(Ce,qe,ze,Ue,de,this.photos,Mt).subscribe({next:()=>{this.form.get("category")?.setValue(""),this.form.get("model")?.setValue(""),this.form.get("price")?.setValue(""),this.form.get("discount")?.setValue(""),this.form.get("quantity")?.setValue(""),this.form.get("description")?.setValue(""),this.photos=[],this.cd.detectChanges(),alert("Product was added successfully")},error:pn=>{console.log("add product error: "+pn.message)},complete:()=>{console.log("Subscription completed")}})}convertDate(Ce){let qe=new Date(Ce);return`${qe.getDate()}/${qe.getMonth()+1}/${qe.getFullYear()}`}navigate(Ce){this.router.navigate([`/${Ce}`])}getUserLikedProducts(){this.authService.loggedUser.pipe((0,C.s)(1)).subscribe(Ce=>{const qe=Ce?.user.likedProducts;qe&&qe.length>0&&this.sharedService.getLikedProductsByIdsAsKeyValue(qe).subscribe(ze=>{this.likedProducts=ze,this.cd.detectChanges()})})}static#e=this.\u0275fac=function(qe){return new(qe||ie)(se.rXU(Me.p),se.rXU(se.gRc),se.rXU(M.ok),se.rXU(U.m),se.rXU(L.Ix))};static#t=this.\u0275cmp=se.VBU({type:ie,selectors:[["app-profile"]],decls:28,vars:8,consts:[[1,"container"],[1,"wrapper"],[1,"box"],[1,"info"],[3,"click",4,"ngIf"],[3,"click"],[3,"formGroup",4,"ngIf"],[1,"liked-products"],[1,"products"],["class","single-product",3,"product",4,"ngFor","ngForOf"],[3,"formGroup"],["formControlName","category"],["value","guitar"],["value","drum"],["value","bass"],["value","piano"],["value","other"],["placeholder","Model","formControlName","model"],["placeholder","Price","formControlName","price"],["placeholder","Discount","formControlName","discount"],["placeholder","Quantity","formControlName","quantity"],["placeholder","Description","formControlName","description"],["type","file",3,"change"],[3,"click","disabled"],[1,"photos"],["class","pht",4,"ngFor","ngForOf"],[1,"pht"],["alt","img",3,"src"],["src","assets/remove.png","alt","img",3,"click"],[1,"single-product",3,"product"]],template:function(qe,ze){1&qe&&(se.nrm(0,"app-header"),se.j41(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"p")(6,"span"),se.EFF(7," Email:"),se.k0s(),se.EFF(8),se.k0s(),se.j41(9,"p")(10,"span"),se.EFF(11,"Address:"),se.k0s(),se.EFF(12),se.k0s(),se.j41(13,"button"),se.EFF(14,"Change Password"),se.k0s(),se.DNE(15,ye,2,0,"button",4),se.j41(16,"button",5),se.bIt("click",function(){return ze.navigate("purchasedProducts")}),se.EFF(17," See Your Purchases "),se.k0s(),se.j41(18,"button",5),se.bIt("click",function(){return ze.navigate("allPurchase")}),se.EFF(19,"See All Purchases"),se.k0s()(),se.DNE(20,Ct,22,3,"form",6),se.k0s(),se.j41(21,"div",7)(22,"h2"),se.EFF(23,"Liked Products:"),se.k0s(),se.j41(24,"div",8),se.DNE(25,Ae,1,1,"app-card",9),se.nI1(26,"slice"),se.k0s()()()(),se.nrm(27,"app-footer")),2&qe&&(se.R7$(8),se.SpI(" ",null==ze.user||null==ze.user.user?null:ze.user.user.email,""),se.R7$(4),se.SpI(" ",null==ze.user||null==ze.user.user?null:ze.user.user.address,"Some Adrress"),se.R7$(3),se.Y8G("ngIf",null==ze.user||null==ze.user.user?null:ze.user.user.isAdmin),se.R7$(5),se.Y8G("ngIf",(null==ze.user||null==ze.user.user?null:ze.user.user.isAdmin)&&ze.addingProduct),se.R7$(5),se.Y8G("ngForOf",se.i5U(26,5,ze.likedProducts,1)))},dependencies:[_.Sq,_.bT,M.qT,M.xH,M.y7,M.me,M.wz,M.BC,M.cb,M.j4,M.JD,Le.l,$e.n,Ee.i,_.P9],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:85%;background-color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:8%;display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-size:18px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:200px;height:50px;cursor:pointer;--b: 2px;--s: .45em;--color: #373b44;padding:calc(.5em + var(--s)) calc(.9em + var(--s));color:var(--color);--_p: var(--s);background:conic-gradient(from 90deg at var(--b) var(--b),rgba(0,0,0,0) 90deg,var(--color) 0) var(--_p) var(--_p)/calc(100% - var(--b) - 2 * var(--_p)) calc(100% - var(--b) - 2 * var(--_p));transition:.3s linear,color 0s,background-color 0s;outline:var(--b) solid rgba(0,0,0,0);outline-offset:.6em;font-size:16px;border:0;user-select:none;-webkit-user-select:none;touch-action:manipulation}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus-visible{--_p: 0px;outline-color:var(--color);outline-offset:.05em}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background:var(--color);color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,200px);grid-template-rows:repeat(5,30px);padding-left:8%;margin-bottom:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]{display:flex;gap:12px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]:last-of-type{width:8px;position:absolute;top:3px;right:-6px}.liked-products[_ngcontent-%COMP%]{padding:40px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:7px}"],changeDetection:0})}return ie})();var wt=k(6354),pt=k(8141);const At=[{path:"",component:Fe,canActivate:[(()=>{class ie{constructor(){this.authService=(0,se.WQX)(Me.p),this.router=(0,se.WQX)(L.Ix)}canActivate(Ce){return this.authService.findUserById(Ce.params.id).pipe((0,wt.T)(ze=>this.authService.loggedUser.value?.user.email===ze),(0,pt.M)(ze=>{ze||(alert("Access Denied!"),this.router.navigate(["/products"]))}))}static#e=this.\u0275fac=function(qe){return new(qe||ie)};static#t=this.\u0275prov=se.jDH({token:ie,factory:ie.\u0275fac,providedIn:"root"})}return ie})()]}];let mt=(()=>{class ie{static#e=this.\u0275fac=function(qe){return new(qe||ie)};static#t=this.\u0275mod=se.$C({type:ie});static#n=this.\u0275inj=se.G2t({imports:[L.iI.forChild(At),L.iI]})}return ie})(),ce=(()=>{class ie{static#e=this.\u0275fac=function(qe){return new(qe||ie)};static#t=this.\u0275mod=se.$C({type:ie});static#n=this.\u0275inj=se.G2t({imports:[_.MD,mt,M.X1,Le.l,$e.n,Ee.i]})}return ie})()},9156:(en,Qe,k)=>{k.d(Qe,{B:()=>M});var _=k(4438),L=k(9417);let M=(()=>{class C{constructor(Me){this.fb=Me,this.formSubmitted=new _.bkB,this.productForm=this.fb.group({model:[""],price:["",L.k0.pattern("^[0-9]*$")],discount:["",L.k0.pattern("^[0-9]*$")],quantity:["",L.k0.pattern("^[0-9]*$")],description:[""]})}onSubmit(){this.formSubmitted.emit(this.productForm.value)}static#e=this.\u0275fac=function(U){return new(U||C)(_.rXU(L.ok))};static#t=this.\u0275cmp=_.VBU({type:C,selectors:[["app-reusable-form"]],outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[_.aNF],decls:8,vars:1,consts:[[1,"edit",3,"formGroup"],["formControlName","model","type","text","placeholder","New model-name"],["formControlName","price","type","text","placeholder","New price"],["formControlName","discount","type","text","placeholder","New Discount"],["formControlName","quantity","type","text","placeholder","New Quantity"],["formControlName","description","placeholder","New Description"],[3,"click"]],template:function(U,Le){1&U&&(_.j41(0,"form",0),_.nrm(1,"input",1)(2,"input",2)(3,"input",3)(4,"input",4)(5,"textarea",5),_.j41(6,"button",6),_.bIt("click",function(){return Le.onSubmit()}),_.EFF(7,"Confirm Changes"),_.k0s()()),2&U&&_.Y8G("formGroup",Le.productForm)},dependencies:[L.X1,L.qT,L.me,L.BC,L.cb,L.j4,L.JD],styles:[".edit[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;gap:6px;margin-top:60px}.edit[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .edit[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:80%;height:26px}"]})}return C})()},3550:(en,Qe,k)=>{k.d(Qe,{i:()=>At});var _=k(177),L=k(9417),M=k(9156),C=k(4438),se=k(6483),Me=k(5435),U=k(6569),Le=k(4454),$e=k(2906),Ee=k(6552);function ye(mt,ce){if(1&mt){const ie=C.RV6();C.j41(0,"img",13),C.bIt("click",function(){C.eBV(ie);const Ce=C.XpG(3);return C.Njj(Ce.editing())}),C.k0s()}}function He(mt,ce){if(1&mt){const ie=C.RV6();C.j41(0,"img",13),C.bIt("click",function(){C.eBV(ie);const Ce=C.XpG(3);return C.Njj(Ce.cancelEditing())}),C.k0s()}}function Ct(mt,ce){if(1&mt){const ie=C.RV6();C.j41(0,"div",10)(1,"img",11),C.bIt("click",function(){C.eBV(ie);const Ce=C.XpG(2);return C.Njj(Ce.removeProduct())}),C.k0s(),C.DNE(2,ye,1,0,"img",12)(3,He,1,0,"img",12),C.k0s()}if(2&mt){const ie=C.XpG(2);C.R7$(2),C.Y8G("ngIf",""===ie.isEditing),C.R7$(),C.Y8G("ngIf",""!==ie.isEditing)}}function Ae(mt,ce){if(1&mt){const ie=C.RV6();C.j41(0,"div",14)(1,"app-reusable-form",15),C.bIt("formSubmitted",function(Ce){C.eBV(ie);const qe=C.XpG(2);return C.Njj(qe.onFormSubmit(Ce))}),C.k0s(),C.j41(2,"div")(3,"button",4),C.bIt("click",function(){C.eBV(ie);const Ce=C.XpG(2);return C.Njj(Ce.cancelEditing())}),C.EFF(4,"Cancel"),C.k0s()()()}}function Fe(mt,ce){if(1&mt&&(C.j41(0,"div",16),C.EFF(1),C.k0s()),2&mt){const ie=C.XpG(2);C.R7$(),C.SpI(" -",ie.product.product.discount,"% ")}}function wt(mt,ce){if(1&mt&&(C.j41(0,"span"),C.EFF(1),C.k0s()),2&mt){const ie=C.XpG(2);C.R7$(),C.SpI("",ie.product.product.price,"$")}}function pt(mt,ce){if(1&mt&&(C.j41(0,"div",17)(1,"span"),C.EFF(2),C.k0s(),C.j41(3,"span"),C.EFF(4),C.k0s()()),2&mt){const ie=C.XpG(2);C.R7$(2),C.SpI(" ",ie.product.product.price,"$ "),C.R7$(2),C.SpI(" ",ie.calculateDiscount(),"$ ")}}function Tt(mt,ce){if(1&mt){const ie=C.RV6();C.j41(0,"div")(1,"div",1),C.DNE(2,Ct,4,2,"div",2),C.nI1(3,"async"),C.j41(4,"div",3)(5,"button",4),C.bIt("click",function(){C.eBV(ie);const Ce=C.XpG();return C.Njj(Ce.addInCart())}),C.EFF(6,"Add to cart"),C.k0s(),C.j41(7,"div")(8,"span",4),C.bIt("click",function(){C.eBV(ie);const Ce=C.XpG();return C.Njj(Ce.navigation())}),C.EFF(9,"See Product"),C.k0s()()(),C.DNE(10,Ae,5,0,"div",5),C.j41(11,"div",3),C.DNE(12,Fe,2,1,"div",6),C.nrm(13,"img",7),C.k0s(),C.j41(14,"div",8)(15,"span"),C.EFF(16),C.nI1(17,"upperCase"),C.k0s(),C.j41(18,"span"),C.EFF(19),C.nI1(20,"slice"),C.nI1(21,"upperCase"),C.k0s(),C.DNE(22,wt,2,1,"span",0)(23,pt,5,2,"div",9),C.k0s()()()}if(2&mt){const ie=C.XpG();C.R7$(2),C.Y8G("ngIf",C.bMT(3,10,ie.isAdmin)),C.R7$(2),C.Y8G("ngClass",ie.isEditing?"display-none":"hover"),C.R7$(6),C.Y8G("ngIf",ie.isEditing===ie.product.key),C.R7$(),C.Y8G("ngClass",ie.isEditing===ie.product.key?"display-none":"img-placeholder"),C.R7$(),C.Y8G("ngIf",null==ie.product||null==ie.product.product?null:ie.product.product.discount),C.R7$(),C.Y8G("src",ie.product.product.photoUrl[0],C.B4B),C.R7$(3),C.JRh(C.bMT(17,12,ie.product.product.category)),C.R7$(3),C.JRh(C.bMT(21,18,C.brH(20,14,ie.product.product.model,0,150))),C.R7$(3),C.Y8G("ngIf",!ie.product.product.discount),C.R7$(),C.Y8G("ngIf",ie.product.product.discount)}}let At=(()=>{class mt{constructor(ie,ue,Ce,qe,ze,de){this.sharedService=ie,this.authService=ue,this.router=Ce,this.cd=qe,this.cartService=ze,this.specificParent=de,this.singleProdPage=!1,this.removeEvent=new C.bkB,this.editEvent=new C.bkB,this.isEditing="",this.isUsedInSpecificParent=!1,this.showSpecificContent=!1,this.specificParent&&(this.isUsedInSpecificParent=!0)}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.loggedUser.subscribe(ie=>{this.authService.isAdmin.next(ie?.user.isAdmin),this.isAdmin=this.authService.isAdmin.asObservable(),this.userID=ie?.key})}removeProduct(){this.sharedService.removeProduct(this.product?.product.category,this.product?.key).subscribe(()=>{this.removeEvent.emit({prodId:this.product?.key,prodCategory:this.product?.product.category}),this.cd.detectChanges()})}navigation(){this.router.navigate([`single-product/${this.product?.key}`],{queryParams:{type:this.product?.product.category,prod:this.product?.key}}),this.cd.detectChanges()}addInCart(){this.cartService.cartOperations("add",this.product)}navigateToCategotyPage(){this.router.navigate([`categoty/${this.product?.product.category}`])}calculateDiscount(){return this.product?.product.price-Math.round(this.product?.product.price*this.product?.product.discount/100)}editing(){this.isEditing=this.product?.key}cancelEditing(){this.isEditing=""}onFormSubmit(ie){this.editEvent.emit({form:ie,prodId:this.product?.key,prodCategory:this.product?.product?.category}),ie.model&&(this.product.product.model=ie.model),ie.price&&(this.product.product.price=ie.price),ie.discount&&(this.product.product.discount=ie.discount),ie.quantity&&(this.product.product.quantity=ie.quantity),ie.description&&(this.product.product.description=ie.description),this.cancelEditing()}firstLetterUpperCase(ie){return ie.charAt(0).toUpperCase()+ie.substring(1,ie.length)}static#e=this.\u0275fac=function(ue){return new(ue||mt)(C.rXU(Me.m),C.rXU(U.p),C.rXU(Le.Ix),C.rXU(C.gRc),C.rXU($e.m),C.rXU(Ee.u,8))};static#t=this.\u0275cmp=C.VBU({type:mt,selectors:[["app-card"]],inputs:{product:"product",singleProdPage:"singleProdPage",showSpecificContent:"showSpecificContent"},outputs:{removeEvent:"removeEvent",editEvent:"editEvent"},standalone:!0,features:[C.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[1,"single-product"],["class","delete-button",4,"ngIf"],[3,"ngClass"],[3,"click"],["class","edit",4,"ngIf"],["class","discount",4,"ngIf"],["alt","img",3,"src"],[1,"info"],["class","if-discount",4,"ngIf"],[1,"delete-button"],["src","assets/remove.png","alt","img",3,"click"],["src","assets/pen.png","alt","img",3,"click",4,"ngIf"],["src","assets/pen.png","alt","img",3,"click"],[1,"edit"],[3,"formSubmitted"],[1,"discount"],[1,"if-discount"]],template:function(ue,Ce){1&ue&&C.DNE(0,Tt,24,20,"div",0),2&ue&&C.Y8G("ngIf",Ce.product&&Ce.product.product)},dependencies:[L.YN,_.MD,_.YU,_.bT,_.Jj,_.P9,M.B,se.P],styles:[".single-product[_ngcontent-%COMP%]{width:200px;height:420px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%]{position:absolute;z-index:1}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:2px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:14%;z-index:1}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:20px;border-radius:4px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:35px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{color:red}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{display:flex;gap:10px;justify-content:center;width:140px;height:40px;color:#fff}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{height:260px;display:flex;justify-content:center;position:relative}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;min-height:50%;min-width:50%}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{height:155px;display:flex;flex-direction:column;justify-content:space-between}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{text-decoration:line-through}.if-discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;justify-self:flex-end}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:20px}.display-none[_ngcontent-%COMP%]{display:none}"],changeDetection:0})}return mt})()},5435:(en,Qe,k)=>{k.d(Qe,{m:()=>ye});var _=k(4412),L=k(6354),M=k(7468),C=k(8141),se=k(5558),Me=k(9437),U=k(7673),Le=k(4438),$e=k(1626),Ee=k(6569);let ye=(()=>{class He{constructor(Ae,Fe){this.http=Ae,this.service=Fe,this.detectChanges=new _.t(!1),this.userId=this.service.loggedUser.value?.key,this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app"}addProduct(Ae,Fe,wt,pt,Tt,At,mt){const ce={category:Ae,model:Fe,price:parseInt(wt),quantity:parseInt(pt),discount:parseInt(Tt),photoUrl:At,description:mt};return this.http.post(`${this.url}/products/${Ae}.json`,ce)}ifDetectChanges(){return this.detectChanges.next(!this.detectChanges.value),this.detectChanges.value}getTypeOfProduct(Ae){return this.http.get(`${this.url}/products/${Ae}.json`).pipe((0,L.T)(Fe=>{let wt=[];return Object.entries(Fe).forEach(([pt,Tt])=>wt.push({key:pt,product:Tt})),wt}))}getAllTypeOfProduct(){const Ae=this.http.get(`${this.url}/products/guitar.json`),Fe=this.http.get(`${this.url}/products/piano.json`),wt=this.http.get(`${this.url}/products/bass.json`),pt=this.http.get(`${this.url}/products/drum.json`);return(0,M.p)([Ae,Fe,wt,pt]).pipe((0,L.T)(Tt=>Tt))}likeUnlikeProduct(Ae,Fe,wt,pt){return this.http.get(`${this.url}/musicShopUsers/${wt}.json`).pipe((0,C.M)(Tt=>{let At=Tt;console.log(Tt);let mt=pt;At&&(At.likedProducts.find(ie=>ie.key===Ae)?(mt=Tt.likedProducts.filter(ie=>ie.key!==Ae),At.likedProducts=mt):(mt=[...Tt.likedProducts,{key:Ae,category:Fe}],At.likedProducts=mt)),this.http.patch(`${this.url}/musicShopUsers/${wt}.json`,At).subscribe()}))}getLikedProductsByIdsAsKeyValue(Ae){const Fe=Ae.map(wt=>this.getProductById(wt.key,wt.category).pipe((0,L.T)(pt=>({key:wt.key,product:pt}))));return(0,M.p)(Fe)}getProduct(Ae,Fe){return this.http.get(`${this.url}/products/${Fe}/${Ae}.json`)}getProductById(Ae,Fe){return this.http.get(`${this.url}/products/${Fe}/${Ae}.json`)}buyProducts(Ae,Fe,wt,pt){const Tt={userId:pt,email:wt,date:new Date,totalPrice:Fe,products:Ae},At=this.http.get(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`).pipe((0,se.n)(ce=>(ce.purchasedProducts=[...ce.purchasedProducts,Tt],this.http.patch(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`,ce))),(0,Me.W)(ce=>(console.error("Error in adminUpdate$",ce),(0,U.of)(null))));let mt=(0,U.of)(null);pt&&(mt=this.http.get(`${this.url}/musicShopUsers/${pt}.json`).pipe((0,se.n)(ce=>(ce.purchasedProducts=[...ce.purchasedProducts,Tt],this.http.patch(`${this.url}/musicShopUsers/${pt}.json`,ce))),(0,Me.W)(ce=>(console.error("Error in userUpdate$",ce),(0,U.of)(null))))),(0,M.p)([At,mt]).subscribe()}removeProduct(Ae,Fe){return this.http.delete(`${this.url}/products/${Ae}/${Fe}.json`)}editProduct(Ae,Fe,wt){return this.http.get(`${this.url}/products/${wt}/${Fe}.json`).pipe((0,C.M)(pt=>{Ae.model&&(pt.model=Ae.model),Ae.price&&(pt.price=Ae.price),Ae.discount&&(pt.discount=Ae.discount),Ae.quantity&&(pt.quantity=Ae.quantity),Ae.description&&(pt.description=Ae.description),this.http.patch(`${this.url}/products/${wt}/${Fe}.json`,pt).subscribe()}))}updateProductArray(Ae,Fe,wt){let pt=Fe.findIndex(Tt=>Tt.key===wt);Ae.discount&&(Fe[pt].product.discount=Ae.discount,Ae.model&&(Fe[pt].product.model=Ae.model),Ae.price&&(Fe[pt].product.price=Ae.price),Ae.description&&(Fe[pt].product.description=Ae.description),Ae.quantity&&(Fe[pt].product.quantity=Ae.quantity))}getRandomProducts(Ae){return this.getTypeOfProduct(Ae).pipe((0,L.T)(Fe=>{let wt=4;const pt=[],Tt=[];for(;0!==wt;){if(Fe.length<=wt)return Fe;const At=Math.floor(Math.random()*Fe.length);Tt.includes(At)||(pt.push(Fe[At]),Tt.push(At),wt--)}return pt}))}getLikedProductsArr(Ae){return this.http.get(`${this.url}/musicShopUsers/${Ae}.json`).pipe((0,L.T)(Fe=>Fe))}getAllClientPurchases(){return this.http.get(`${this.url}/musicShopUsers/.json`).pipe((0,L.T)(Ae=>Object.keys(Ae).map(Fe=>(Ae[Fe].purchasedProducts||[]).slice(1))),(0,L.T)(Ae=>Ae.flat()))}static#e=this.\u0275fac=function(Fe){return new(Fe||He)(Le.KVO($e.Qq),Le.KVO(Ee.p))};static#t=this.\u0275prov=Le.jDH({token:He,factory:He.\u0275fac,providedIn:"root"})}return He})()},2735:(en,Qe,k)=>{k.r(Qe),k.d(Qe,{SingleProductPageModule:()=>At});var _=k(177),L=k(4454),M=k(6697),C=k(4438),se=k(5435),Me=k(6569),U=k(2906),Le=k(2152),$e=k(708),Ee=k(8964);function ye(mt,ce){if(1&mt&&C.nrm(0,"img",15,0),2&mt){const ie=C.XpG();C.Y8G("src",ie.images[ie.cuurentIndex],C.B4B)}}function He(mt,ce){if(1&mt){const ie=C.RV6();C.j41(0,"div")(1,"img",16),C.bIt("click",function(){const Ce=C.eBV(ie).index,qe=C.XpG();return C.Njj(qe.switchImage(Ce))}),C.k0s()()}if(2&mt){const ie=ce.index,ue=C.XpG();C.R7$(),C.Y8G("src",ue.images[ie],C.B4B)}}function Ct(mt,ce){if(1&mt){const ie=C.RV6();C.j41(0,"img",17),C.bIt("click",function(){C.eBV(ie);const Ce=C.XpG();return C.Njj(Ce.likeProduct("unlike"))}),C.k0s()}}function Ae(mt,ce){if(1&mt){const ie=C.RV6();C.j41(0,"img",18),C.bIt("click",function(){C.eBV(ie);const Ce=C.XpG();return C.Njj(Ce.likeProduct("like"))}),C.k0s()}}function Fe(mt,ce){if(1&mt&&C.nrm(0,"app-suggestions",19),2&mt){const ie=C.XpG();C.Y8G("categoty",null==ie.product?null:ie.product.category)}}const pt=[{path:"",component:(()=>{class mt{constructor(ie,ue,Ce,qe,ze){this.sharedService=ie,this.authService=ue,this.route=Ce,this.cd=qe,this.cartService=ze,this.cuurentIndex=0,this.minSize=0,this.maxSize=0,this.focusedImg=this.product?.photoUrl?.[0],this.prodId="",this.userId="",this.isLiked=!1,this.userEmail=""}ngOnInit(){this.authService.checkIfLoggedIn(),this.route.queryParams.subscribe(()=>{this.getProductInfo(),this.getUserInfo()})}getUserInfo(){this.authService.loggedUser.subscribe(ie=>{this.userId=ie?.key,this.userEmail=ie?.user.email,this.likedProducts=ie?.user.likedProducts,this.checkIfliked()})}getProductInfo(){this.route.queryParams.pipe((0,M.s)(1)).subscribe(ie=>{this.sharedService.getProductById(ie.prod,ie.type).pipe((0,M.s)(1)).subscribe(ue=>{this.product=ue,this.images=ue.photoUrl,this.prodId=ie.prod,this.cuurentIndex=0,this.focusedImg=this.product?.photoUrl?.[0],this.cd.detectChanges()})})}switchImage(ie){this.cuurentIndex=ie}checkIfliked(){this.likedProducts&&(this.isLiked=!!this.likedProducts.find(ue=>ue.key===this.prodId))}likeProduct(ie){this.sharedService.likeUnlikeProduct(this.prodId,this.product?.category,this.userId,this.likedProducts).subscribe(()=>{this.likedProducts&&("unlike"===ie?this.isLiked=!1:"like"===ie&&(this.isLiked=!0),this.cd.detectChanges(),this.authService.findUser(this.userEmail).subscribe(ue=>{this.authService.loggedUser.next(ue),"unlike"===ie?(this.likedProducts=this.likedProducts?.filter(Ce=>Ce.key!==this.prodId),this.isLiked=!1):"like"===ie&&(this.likedProducts?.push({key:this.prodId,category:this.product?.category}),this.isLiked=!0),localStorage.setItem("currentUser",JSON.stringify(ue)),this.cd.detectChanges()}))})}scroll(ie){"right"===ie?this.images.unshift(this.images.pop()):this.images.push(this.images.shift())}addInCart(){this.cartService.cartOperations("add",{key:this.prodId,product:this.product})}static#e=this.\u0275fac=function(ue){return new(ue||mt)(C.rXU(se.m),C.rXU(Me.p),C.rXU(L.nX),C.rXU(C.gRc),C.rXU(U.m))};static#t=this.\u0275cmp=C.VBU({type:mt,selectors:[["app-single-product-page"]],decls:39,vars:12,consts:[["myImage",""],[1,"container"],[1,"content"],[1,"images"],[1,"focused-img"],["alt","img",3,"src",4,"ngIf"],[1,"otherPhotos"],["src","assets/left.png","alt","img",3,"click"],[4,"ngFor","ngForOf"],["src","assets/right.png","alt","img",3,"click"],[1,"description","payment"],["src","assets/heart-red.png","alt","img",3,"click",4,"ngIf"],["src","assets/heart.png","alt","img",3,"click",4,"ngIf"],[3,"click"],[3,"categoty",4,"ngIf"],["alt","img",3,"src"],["alt","img",3,"click","src"],["src","assets/heart-red.png","alt","img",3,"click"],["src","assets/heart.png","alt","img",3,"click"],[3,"categoty"]],template:function(ue,Ce){1&ue&&(C.nrm(0,"app-header"),C.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),C.DNE(5,ye,2,1,"img",5),C.k0s(),C.j41(6,"div",6)(7,"div")(8,"img",7),C.bIt("click",function(){return Ce.scroll("left")}),C.k0s()(),C.DNE(9,He,2,1,"div",8),C.nI1(10,"slice"),C.j41(11,"div")(12,"img",9),C.bIt("click",function(){return Ce.scroll("right")}),C.k0s()()()(),C.j41(13,"div",10)(14,"div")(15,"p")(16,"span"),C.EFF(17,"Categoty:"),C.k0s(),C.EFF(18),C.k0s(),C.j41(19,"div"),C.DNE(20,Ct,1,0,"img",11)(21,Ae,1,0,"img",12),C.k0s()(),C.j41(22,"div")(23,"p")(24,"span"),C.EFF(25,"Model:"),C.k0s(),C.EFF(26),C.k0s(),C.j41(27,"p")(28,"span"),C.EFF(29,"Description: "),C.k0s(),C.EFF(30),C.k0s(),C.j41(31,"p")(32,"span"),C.EFF(33,"Price:"),C.k0s(),C.EFF(34),C.k0s(),C.j41(35,"button",13),C.bIt("click",function(){return Ce.addInCart()}),C.EFF(36,"Add to Cart"),C.k0s()()(),C.DNE(37,Fe,1,1,"app-suggestions",14),C.nrm(38,"app-footer"),C.k0s()()),2&ue&&(C.R7$(5),C.Y8G("ngIf",Ce.images),C.R7$(4),C.Y8G("ngForOf",C.i5U(10,9,Ce.images,0)),C.R7$(9),C.SpI(" ",null==Ce.product?null:Ce.product.category,""),C.R7$(2),C.Y8G("ngIf",Ce.isLiked),C.R7$(),C.Y8G("ngIf",!Ce.isLiked),C.R7$(5),C.SpI(" ",null==Ce.product?null:Ce.product.model,""),C.R7$(4),C.SpI(" ",null==Ce.product?null:Ce.product.description,""),C.R7$(4),C.SpI(" ",null==Ce.product?null:Ce.product.price,"$"),C.R7$(3),C.Y8G("ngIf",null==Ce.product?null:Ce.product.category))},dependencies:[_.Sq,_.bT,Le.l,$e.n,Ee.x,_.P9],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6%;margin-top:4%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:350px;height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px;max-height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]{display:flex;gap:4px;justify-content:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child, .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{background-color:unset}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > img[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]{width:40px;height:40px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:40px;gap:20px;width:90%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:23px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:10px;word-wrap:break-word;font-size:20px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px;height:30px;border:none;text-align:center;color:#fff;background-color:#7a7af0;border-radius:3px;cursor:pointer}"],changeDetection:0})}return mt})()}];let Tt=(()=>{class mt{static#e=this.\u0275fac=function(ue){return new(ue||mt)};static#t=this.\u0275mod=C.$C({type:mt});static#n=this.\u0275inj=C.G2t({imports:[L.iI.forChild(pt),L.iI]})}return mt})(),At=(()=>{class mt{static#e=this.\u0275fac=function(ue){return new(ue||mt)};static#t=this.\u0275mod=C.$C({type:mt});static#n=this.\u0275inj=C.G2t({imports:[_.MD,Le.l,$e.n,Tt,Ee.x]})}return mt})()},8964:(en,Qe,k)=>{k.d(Qe,{x:()=>Me});var _=k(3550),L=k(177),M=k(4438),C=k(5435);function se(U,Le){1&U&&M.nrm(0,"app-card",2),2&U&&M.Y8G("product",Le.$implicit)}let Me=(()=>{class U{constructor($e,Ee){this.service=$e,this.cd=Ee,this.categoty="guitar"}ngOnInit(){this.service.getRandomProducts(this.categoty).subscribe($e=>{this.randomSuggestions=$e,this.cd.detectChanges()})}static#e=this.\u0275fac=function(Ee){return new(Ee||U)(M.rXU(C.m),M.rXU(M.gRc))};static#t=this.\u0275cmp=M.VBU({type:U,selectors:[["app-suggestions"]],inputs:{categoty:"categoty"},standalone:!0,features:[M.aNF],decls:4,vars:1,consts:[[1,"container"],[3,"product",4,"ngFor","ngForOf"],[3,"product"]],template:function(Ee,ye){1&Ee&&(M.j41(0,"h2"),M.EFF(1,"You might also like:"),M.k0s(),M.j41(2,"div",0),M.DNE(3,se,1,1,"app-card",1),M.k0s()),2&Ee&&(M.R7$(3),M.Y8G("ngForOf",ye.randomSuggestions))},dependencies:[_.i,L.MD,L.Sq],styles:["h2[_ngcontent-%COMP%]{color:#9191de;text-align:center}div[_ngcontent-%COMP%]{padding:3%;display:flex;gap:20px}"],changeDetection:0})}return U})()},7827:(en,Qe,k)=>{var _=k(345),L=k(4454),M=k(6697),C=k(177),se=k(2152),Me=k(708),U=k(4438);let Le=(()=>{class J{transform(T){let V=new Date(T);return`${V.getDate()}/${V.getMonth()+1}/${V.getFullYear()}`}static#e=this.\u0275fac=function(V){return new(V||J)};static#t=this.\u0275pipe=U.EJ8({name:"date",type:J,pure:!0,standalone:!0})}return J})();var $e=k(6483);function Ee(J,I){if(1&J){const T=U.RV6();U.j41(0,"img",7),U.bIt("click",function(){U.eBV(T);const X=U.XpG(2);return U.Njj(X.showMoreItems=!X.showMoreItems)})("click",function(){U.eBV(T);const X=U.XpG(2);return U.Njj(X.changeArrow=!X.changeArrow)}),U.k0s()}}function ye(J,I){if(1&J){const T=U.RV6();U.j41(0,"img",8),U.bIt("click",function(){U.eBV(T);const X=U.XpG(2);return U.Njj(X.showMoreItems=!X.showMoreItems&&!X.changeArrow)})("click",function(){U.eBV(T);const X=U.XpG(2);return U.Njj(X.changeArrow=!X.changeArrow)}),U.k0s()}}function He(J,I){if(1&J&&(U.j41(0,"div",9)(1,"div"),U.nrm(2,"img",10),U.k0s(),U.j41(3,"div",11)(4,"span"),U.EFF(5),U.k0s(),U.j41(6,"span"),U.EFF(7),U.k0s(),U.j41(8,"span"),U.EFF(9),U.k0s(),U.j41(10,"span"),U.EFF(11),U.k0s(),U.j41(12,"span"),U.EFF(13),U.k0s()()()),2&J){const T=I.$implicit,V=U.XpG(2);U.R7$(2),U.Y8G("src",T.product.product.photoUrl[0],U.B4B),U.R7$(3),U.JRh(V.purchase.email?V.purchase.email:"unknown"),U.R7$(2),U.JRh(T.product.product.category),U.R7$(2),U.JRh(T.product.product.model),U.R7$(2),U.SpI("Price: ",T.product.product.price,"$"),U.R7$(2),U.SpI("Dicsount: ",T.product.product.discount,"%")}}function Ct(J,I){if(1&J&&(U.j41(0,"div",13)(1,"div"),U.nrm(2,"img",10),U.k0s(),U.j41(3,"div",11)(4,"span"),U.EFF(5),U.k0s(),U.j41(6,"span"),U.EFF(7),U.nI1(8,"upperCase"),U.k0s(),U.j41(9,"span"),U.EFF(10),U.nI1(11,"upperCase"),U.k0s(),U.j41(12,"span"),U.EFF(13),U.k0s(),U.j41(14,"span"),U.EFF(15),U.k0s()()()),2&J){const T=I.$implicit,V=U.XpG(3);U.R7$(2),U.Y8G("src",T.product.product.photoUrl[0],U.B4B),U.R7$(3),U.JRh(V.purchase.email?V.purchase.email:"unknown"),U.R7$(2),U.JRh(U.bMT(8,6,T.product.product.category)),U.R7$(3),U.JRh(U.bMT(11,8,T.product.product.model)),U.R7$(3),U.SpI("Price: ",T.product.product.price,""),U.R7$(2),U.SpI("Dicsount: ",T.product.product.discount,"%")}}function Ae(J,I){if(1&J&&(U.j41(0,"div"),U.DNE(1,Ct,16,10,"div",12),U.nI1(2,"slice"),U.k0s()),2&J){const T=U.XpG(2);U.R7$(),U.Y8G("ngForOf",U.i5U(2,1,T.purchase.products,1))}}function Fe(J,I){if(1&J&&(U.j41(0,"div",1)(1,"span"),U.EFF(2),U.nI1(3,"date"),U.k0s(),U.j41(4,"span"),U.EFF(5),U.k0s(),U.j41(6,"div",2),U.DNE(7,Ee,1,0,"img",3)(8,ye,1,0,"img",4),U.k0s(),U.DNE(9,He,14,6,"div",5),U.nI1(10,"slice"),U.DNE(11,Ae,3,4,"div",6),U.k0s()),2&J){const T=U.XpG();U.R7$(2),U.JRh(U.bMT(3,6,T.purchase.date)),U.R7$(3),U.SpI("total price: ",T.purchase.totalPrice,""),U.R7$(2),U.Y8G("ngIf",!T.changeArrow),U.R7$(),U.Y8G("ngIf",T.changeArrow),U.R7$(),U.Y8G("ngForOf",U.brH(10,8,T.purchase.products,0,1)),U.R7$(2),U.Y8G("ngIf",T.showMoreItems)}}let wt=(()=>{class J{constructor(){this.showMoreItems=!1,this.changeArrow=!1}static#e=this.\u0275fac=function(V){return new(V||J)};static#t=this.\u0275cmp=U.VBU({type:J,selectors:[["app-purchased-product"]],inputs:{purchase:"purchase"},standalone:!0,features:[U.aNF],decls:1,vars:1,consts:[["class","purchase-wrapper",4,"ngIf"],[1,"purchase-wrapper"],[1,"see-more-arrow"],["src","assets/arrow-down.png","alt","img",3,"click",4,"ngIf"],["src","assets/arrow-up.png","alt","img",3,"click",4,"ngIf"],["class","purchase",4,"ngFor","ngForOf"],[4,"ngIf"],["src","assets/arrow-down.png","alt","img",3,"click"],["src","assets/arrow-up.png","alt","img",3,"click"],[1,"purchase"],["alt","img",3,"src"],[1,"grid-container"],["class","other-items purchase",4,"ngFor","ngForOf"],[1,"other-items","purchase"]],template:function(V,X){1&V&&U.DNE(0,Fe,12,12,"div",0),2&V&&U.Y8G("ngIf",X.purchase)},dependencies:[C.MD,C.Sq,C.bT,C.P9,$e.P,Le],styles:[".purchase-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;background-color:#7daecf;width:490px;position:relative}.purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]{position:absolute;bottom:-8px;width:35px;height:35px;display:flex;justify-content:center;align-items:center}.purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%]{display:flex;gap:3%;border:1px solid rgb(84,145,185);width:470px;height:120px;padding:10px;margin-bottom:36px}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:13%;height:100%}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:70px;height:100%}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]{display:grid;width:100%;gap:7px;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(3,1fr);text-align:center}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{align-self:center}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-self:center;border:none;background-color:#373b44;color:#fff;width:120px;height:20px;cursor:pointer}"]})}return J})();var pt=k(6569);function Tt(J,I){if(1&J&&(U.j41(0,"div"),U.nrm(1,"app-purchased-product",3),U.k0s()),2&J){const T=I.$implicit;U.R7$(),U.Y8G("purchase",T)}}function At(J,I){if(1&J&&(U.j41(0,"div"),U.nrm(1,"app-purchased-product",3),U.k0s()),2&J){const T=I.$implicit;U.R7$(),U.Y8G("purchase",T)}}let mt=(()=>{class J{constructor(T,V){this.authService=T,this.cd=V,this.purchasedProducts=[],this.halfLength=0,this.length=0}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.loggedUser.pipe((0,M.s)(1)).subscribe(T=>{T&&T.user.purchasedProducts?(this.user=T,this.purchasedProducts=T?.user.purchasedProducts.slice(1).sort((V,X)=>new Date(X.date).getTime()-new Date(V.date).getTime()),this.length=this.purchasedProducts.length,this.halfLength=Math.ceil(this.purchasedProducts.length/2),console.log("Purchased products:",this.purchasedProducts)):console.log("No user or purchased products found.")},T=>{console.error("Error fetching user data:",T)})}static#e=this.\u0275fac=function(V){return new(V||J)(U.rXU(pt.p),U.rXU(U.gRc))};static#t=this.\u0275cmp=U.VBU({type:J,selectors:[["app-purchased-products"]],standalone:!0,features:[U.aNF],decls:9,vars:10,consts:[[1,"container"],[1,"purchased-products"],[4,"ngFor","ngForOf"],[3,"purchase"]],template:function(V,X){1&V&&(U.nrm(0,"app-header"),U.j41(1,"div",0)(2,"div",1),U.DNE(3,Tt,2,1,"div",2),U.nI1(4,"slice"),U.k0s(),U.j41(5,"div",1),U.DNE(6,At,2,1,"div",2),U.nI1(7,"slice"),U.k0s()(),U.nrm(8,"app-footer")),2&V&&(U.R7$(3),U.Y8G("ngForOf",U.brH(4,2,X.purchasedProducts,0,X.halfLength)),U.R7$(3),U.Y8G("ngForOf",U.brH(7,6,X.purchasedProducts,X.halfLength,X.length)))},dependencies:[C.MD,C.Sq,C.P9,se.l,Me.n,wt],styles:[".container[_ngcontent-%COMP%]{padding:40px;display:flex;justify-content:center;gap:20px}.container[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0})}return J})();var ce=k(9417),ie=k(5435);function ue(J,I){if(1&J&&(U.j41(0,"div"),U.nrm(1,"app-purchased-product",6),U.k0s()),2&J){const T=I.$implicit;U.R7$(),U.Y8G("purchase",T)}}function Ce(J,I){if(1&J&&(U.j41(0,"div"),U.nrm(1,"app-purchased-product",6),U.k0s()),2&J){const T=I.$implicit;U.R7$(),U.Y8G("purchase",T)}}const ze=[{path:"",redirectTo:"products",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.resolve().then(k.bind(k,513)).then(J=>J.LoginAndRegistrationModule)},{path:"about-us",loadComponent:()=>k.e(70).then(k.bind(k,9070)).then(J=>J.AboutUsComponent)},{path:"contact",loadComponent:()=>k.e(222).then(k.bind(k,3222)).then(J=>J.ContanctComponent)},{path:"products",loadChildren:()=>Promise.resolve().then(k.bind(k,8569)).then(J=>J.ProductPageModule)},{path:"profile/:id",loadChildren:()=>Promise.resolve().then(k.bind(k,1343)).then(J=>J.ProfileModuleModule)},{path:"single-product/:id",loadChildren:()=>Promise.resolve().then(k.bind(k,2735)).then(J=>J.SingleProductPageModule)},{path:"categoty/:category",loadChildren:()=>k.e(456).then(k.bind(k,9456)).then(J=>J.SinleCategoryPageModuleModule)},{path:"purchasedProducts",component:mt},{path:"allPurchase",component:(()=>{class J{constructor(T){this.service=T,this.halfLength=0,this.length=0,this.email=""}ngOnInit(){this.service.getAllClientPurchases().subscribe(T=>{if(T){const V=T.sort((X,fe)=>new Date(fe.date).getTime()-new Date(X.date).getTime());this.allPurchasedProducts=V,this.searched=V,this.length=T.length,this.halfLength=Math.ceil(T.length/2)}})}search(){this.email&&(this.searched=this.allPurchasedProducts?.filter(T=>T.email===this.email).sort((T,V)=>new Date(V.date).getTime()-new Date(T.date).getTime()))}static#e=this.\u0275fac=function(V){return new(V||J)(U.rXU(ie.m))};static#t=this.\u0275cmp=U.VBU({type:J,selectors:[["app-all-client-purchases"]],standalone:!0,features:[U.aNF],decls:13,vars:11,consts:[[1,"search"],["type","email","placeholder","enter email",3,"ngModelChange","ngModel"],[3,"click"],[1,"container"],[1,"purchased-products"],[4,"ngFor","ngForOf"],[3,"purchase"]],template:function(V,X){1&V&&(U.nrm(0,"app-header"),U.j41(1,"div",0)(2,"input",1),U.mxI("ngModelChange",function(Pe){return U.DH7(X.email,Pe)||(X.email=Pe),Pe}),U.k0s(),U.j41(3,"button",2),U.bIt("click",function(){return X.search()}),U.EFF(4,"Search"),U.k0s()(),U.j41(5,"div",3)(6,"div",4),U.DNE(7,ue,2,1,"div",5),U.nI1(8,"slice"),U.k0s(),U.j41(9,"div",4),U.DNE(10,Ce,2,1,"div",5),U.nI1(11,"slice"),U.k0s()(),U.nrm(12,"app-footer")),2&V&&(U.R7$(2),U.R50("ngModel",X.email),U.R7$(5),U.Y8G("ngForOf",U.brH(8,3,X.searched,0,X.halfLength)),U.R7$(3),U.Y8G("ngForOf",U.brH(11,7,X.searched,X.halfLength,X.length)))},dependencies:[C.MD,C.Sq,C.P9,ce.YN,ce.me,ce.BC,ce.vS,wt,se.l,Me.n],styles:[".container[_ngcontent-%COMP%]{padding:40px;display:flex;justify-content:center;gap:20px}.container[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:10px}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:30px;gap:10px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;border:none;border-radius:4px}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#71bedb;color:#fff;cursor:pointer}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{color:green}"]})}return J})()}];let de=(()=>{class J{static#e=this.\u0275fac=function(V){return new(V||J)};static#t=this.\u0275mod=U.$C({type:J});static#n=this.\u0275inj=U.G2t({imports:[L.iI.forRoot(ze,{useHash:!0}),L.iI]})}return J})(),Ue=(()=>{class J{constructor(){this.title="musicShop"}static#e=this.\u0275fac=function(V){return new(V||J)};static#t=this.\u0275cmp=U.VBU({type:J,selectors:[["app-root"]],decls:1,vars:0,template:function(V,X){1&V&&U.nrm(0,"router-outlet")},dependencies:[L.n3]})}return J})();var Mt=k(513),pn=k(8569),Pn=k(1343),Fn=k(2735),On=k(3227),Ft=k(9969);function ke(J){return new U.wOt(3e3,!1)}function Or(J){switch(J.length){case 0:return new Ft.sf;case 1:return J[0];default:return new Ft.ui(J)}}function Xt(J,I,T=new Map,V=new Map){const X=[],fe=[];let Pe=-1,je=null;if(I.forEach(ut=>{const Pt=ut.get("offset"),nn=Pt==Pe,gn=nn&&je||new Map;ut.forEach((ur,er)=>{let Dn=er,Wn=ur;if("offset"!==er)switch(Dn=J.normalizePropertyName(Dn,X),Wn){case Ft.FX:Wn=T.get(er);break;case Ft.kp:Wn=V.get(er);break;default:Wn=J.normalizeStyleValue(er,Dn,Wn,X)}gn.set(Dn,Wn)}),nn||fe.push(gn),je=gn,Pe=Pt}),X.length)throw function Zn(J){return new U.wOt(3502,!1)}();return fe}function Yt(J,I,T,V){switch(I){case"start":J.onStart(()=>V(T&&Qr(T,"start",J)));break;case"done":J.onDone(()=>V(T&&Qr(T,"done",J)));break;case"destroy":J.onDestroy(()=>V(T&&Qr(T,"destroy",J)))}}function Qr(J,I,T){const fe=Mn(J.element,J.triggerName,J.fromState,J.toState,I||J.phaseName,T.totalTime??J.totalTime,!!T.disabled),Pe=J._data;return null!=Pe&&(fe._data=Pe),fe}function Mn(J,I,T,V,X="",fe=0,Pe){return{element:J,triggerName:I,fromState:T,toState:V,phaseName:X,totalTime:fe,disabled:!!Pe}}function Nr(J,I,T){let V=J.get(I);return V||J.set(I,V=T),V}function xe(J){const I=J.indexOf(":");return[J.substring(1,I),J.slice(I+1)]}const Te=typeof document>"u"?null:document.documentElement;function we(J){const I=J.parentNode||J.host||null;return I===Te?null:I}let St=null,ge=!1;function me(J,I){for(;I;){if(I===J)return!0;I=we(I)}return!1}function Et(J,I,T){if(T)return Array.from(J.querySelectorAll(I));const V=J.querySelector(I);return V?[V]:[]}let mn=(()=>{class J{validateStyleProperty(T){return function Q(J){St||(St=function oe(){return typeof document<"u"?document.body:null}()||{},ge=!!St.style&&"WebkitAppearance"in St.style);let I=!0;return St.style&&!function Ke(J){return"ebkit"==J.substring(1,6)}(J)&&(I=J in St.style,!I&&ge&&(I="Webkit"+J.charAt(0).toUpperCase()+J.slice(1)in St.style)),I}(T)}matchesElement(T,V){return!1}containsElement(T,V){return me(T,V)}getParentElement(T){return we(T)}query(T,V,X){return Et(T,V,X)}computeStyle(T,V,X){return X||""}animate(T,V,X,fe,Pe,je=[],ut){return new Ft.sf(X,fe)}static#e=this.\u0275fac=function(V){return new(V||J)};static#t=this.\u0275prov=U.jDH({token:J,factory:J.\u0275fac})}return J})();class Bn{static#e=this.NOOP=new mn}class zn{}const Gt=1e3,Yr="ng-enter",Ms="ng-leave",cs="ng-trigger",ir=".ng-trigger",is="ng-animating",Gi=".ng-animating";function ri(J){if("number"==typeof J)return J;const I=J.match(/^(-?[\.\d]+)(m?s)/);return!I||I.length<2?0:_t(parseFloat(I[1]),I[2])}function _t(J,I){return"s"===I?J*Gt:J}function Je(J,I,T){return J.hasOwnProperty("duration")?J:function kt(J,I,T){let X,fe=0,Pe="";if("string"==typeof J){const je=J.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===je)return I.push(ke()),{duration:0,delay:0,easing:""};X=_t(parseFloat(je[1]),je[2]);const ut=je[3];null!=ut&&(fe=_t(parseFloat(ut),je[4]));const Pt=je[5];Pt&&(Pe=Pt)}else X=J;if(!T){let je=!1,ut=I.length;X<0&&(I.push(function Xe(){return new U.wOt(3100,!1)}()),je=!0),fe<0&&(I.push(function ct(){return new U.wOt(3101,!1)}()),je=!0),je&&I.splice(ut,0,ke())}return{duration:X,delay:fe,easing:Pe}}(J,I,T)}function ve(J,I,T){I.forEach((V,X)=>{const fe=br(X);T&&!T.has(X)&&T.set(X,J.style[fe]),J.style[fe]=V})}function Ie(J,I){I.forEach((T,V)=>{const X=br(V);J.style[X]=""})}function at(J){return Array.isArray(J)?1==J.length?J[0]:(0,Ft.K2)(J):J}const qt=new RegExp("{{\\s*(.+?)\\s*}}","g");function Bt(J){let I=[];if("string"==typeof J){let T;for(;T=qt.exec(J);)I.push(T[1]);qt.lastIndex=0}return I}function Sn(J,I,T){const V=`${J}`,X=V.replace(qt,(fe,Pe)=>{let je=I[Pe];return null==je&&(T.push(function yt(J){return new U.wOt(3003,!1)}()),je=""),je.toString()});return X==V?J:X}const En=/-+([a-z0-9])/g;function br(J){return J.replace(En,(...I)=>I[1].toUpperCase())}function Xr(J,I,T){switch(I.type){case Ft.If.Trigger:return J.visitTrigger(I,T);case Ft.If.State:return J.visitState(I,T);case Ft.If.Transition:return J.visitTransition(I,T);case Ft.If.Sequence:return J.visitSequence(I,T);case Ft.If.Group:return J.visitGroup(I,T);case Ft.If.Animate:return J.visitAnimate(I,T);case Ft.If.Keyframes:return J.visitKeyframes(I,T);case Ft.If.Style:return J.visitStyle(I,T);case Ft.If.Reference:return J.visitReference(I,T);case Ft.If.AnimateChild:return J.visitAnimateChild(I,T);case Ft.If.AnimateRef:return J.visitAnimateRef(I,T);case Ft.If.Query:return J.visitQuery(I,T);case Ft.If.Stagger:return J.visitStagger(I,T);default:throw function Ze(J){return new U.wOt(3004,!1)}()}}function Mi(J,I){return window.getComputedStyle(J)[I]}const yr=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ir extends zn{normalizePropertyName(I,T){return br(I)}normalizeStyleValue(I,T,V,X){let fe="";const Pe=V.toString().trim();if(yr.has(T)&&0!==V&&"0"!==V)if("number"==typeof V)fe="px";else{const je=V.match(/^[+-]?[\d\.]+([a-z]*)$/);je&&0==je[1].length&&X.push(function zt(J,I){return new U.wOt(3005,!1)}())}return Pe+fe}}const Rn="*";const oo=new Set(["true","1"]),Qo=new Set(["false","0"]);function ua(J,I){const T=oo.has(J)||Qo.has(J),V=oo.has(I)||Qo.has(I);return(X,fe)=>{let Pe=J==Rn||J==X,je=I==Rn||I==fe;return!Pe&&T&&"boolean"==typeof X&&(Pe=X?oo.has(J):Qo.has(J)),!je&&V&&"boolean"==typeof fe&&(je=fe?oo.has(I):Qo.has(I)),Pe&&je}}const nr=new RegExp("s*:selfs*,?","g");function Eo(J,I,T,V){return new Er(J).build(I,T,V)}class Er{constructor(I){this._driver=I}build(I,T,V){const X=new la(T);return this._resetContextStyleTimingState(X),Xr(this,at(I),X)}_resetContextStyleTimingState(I){I.currentQuerySelector="",I.collectedStyles=new Map,I.collectedStyles.set("",new Map),I.currentTime=0}visitTrigger(I,T){let V=T.queryCount=0,X=T.depCount=0;const fe=[],Pe=[];return"@"==I.name.charAt(0)&&T.errors.push(function ln(){return new U.wOt(3006,!1)}()),I.definitions.forEach(je=>{if(this._resetContextStyleTimingState(T),je.type==Ft.If.State){const ut=je,Pt=ut.name;Pt.toString().split(/\s*,\s*/).forEach(nn=>{ut.name=nn,fe.push(this.visitState(ut,T))}),ut.name=Pt}else if(je.type==Ft.If.Transition){const ut=this.visitTransition(je,T);V+=ut.queryCount,X+=ut.depCount,Pe.push(ut)}else T.errors.push(function Zt(){return new U.wOt(3007,!1)}())}),{type:Ft.If.Trigger,name:I.name,states:fe,transitions:Pe,queryCount:V,depCount:X,options:null}}visitState(I,T){const V=this.visitStyle(I.styles,T),X=I.options&&I.options.params||null;if(V.containsDynamicStyles){const fe=new Set,Pe=X||{};V.styles.forEach(je=>{je instanceof Map&&je.forEach(ut=>{Bt(ut).forEach(Pt=>{Pe.hasOwnProperty(Pt)||fe.add(Pt)})})}),fe.size&&T.errors.push(function tn(J,I){return new U.wOt(3008,!1)}(0,fe.values()))}return{type:Ft.If.State,name:I.name,style:V,options:X?{params:X}:null}}visitTransition(I,T){T.queryCount=0,T.depCount=0;const V=Xr(this,at(I.animation),T),X=function ar(J,I){const T=[];return"string"==typeof J?J.split(/\s*,\s*/).forEach(V=>function Fo(J,I,T){if(":"==J[0]){const ut=function zi(J,I){switch(J){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(T,V)=>parseFloat(V)>parseFloat(T);case":decrement":return(T,V)=>parseFloat(V)<parseFloat(T);default:return I.push(function Nt(J){return new U.wOt(3016,!1)}()),"* => *"}}(J,T);if("function"==typeof ut)return void I.push(ut);J=ut}const V=J.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==V||V.length<4)return T.push(function ti(J){return new U.wOt(3015,!1)}()),I;const X=V[1],fe=V[2],Pe=V[3];I.push(ua(X,Pe)),"<"==fe[0]&&(X!=Rn||Pe!=Rn)&&I.push(ua(Pe,X))}(V,T,I)):T.push(J),T}(I.expr,T.errors);return{type:Ft.If.Transition,matchers:X,animation:V,queryCount:T.queryCount,depCount:T.depCount,options:Bi(I.options)}}visitSequence(I,T){return{type:Ft.If.Sequence,steps:I.steps.map(V=>Xr(this,V,T)),options:Bi(I.options)}}visitGroup(I,T){const V=T.currentTime;let X=0;const fe=I.steps.map(Pe=>{T.currentTime=V;const je=Xr(this,Pe,T);return X=Math.max(X,T.currentTime),je});return T.currentTime=X,{type:Ft.If.Group,steps:fe,options:Bi(I.options)}}visitAnimate(I,T){const V=function Sr(J,I){if(J.hasOwnProperty("duration"))return J;if("number"==typeof J)return Ci(Je(J,I).duration,0,"");const T=J;if(T.split(/\s+/).some(fe=>"{"==fe.charAt(0)&&"{"==fe.charAt(1))){const fe=Ci(0,0,"");return fe.dynamic=!0,fe.strValue=T,fe}const X=Je(T,I);return Ci(X.duration,X.delay,X.easing)}(I.timings,T.errors);T.currentAnimateTimings=V;let X,fe=I.styles?I.styles:(0,Ft.iF)({});if(fe.type==Ft.If.Keyframes)X=this.visitKeyframes(fe,T);else{let Pe=I.styles,je=!1;if(!Pe){je=!0;const Pt={};V.easing&&(Pt.easing=V.easing),Pe=(0,Ft.iF)(Pt)}T.currentTime+=V.duration+V.delay;const ut=this.visitStyle(Pe,T);ut.isEmptyStep=je,X=ut}return T.currentAnimateTimings=null,{type:Ft.If.Animate,timings:V,style:X,options:null}}visitStyle(I,T){const V=this._makeStyleAst(I,T);return this._validateStyleAst(V,T),V}_makeStyleAst(I,T){const V=[],X=Array.isArray(I.styles)?I.styles:[I.styles];for(let je of X)"string"==typeof je?je===Ft.kp?V.push(je):T.errors.push(new U.wOt(3002,!1)):V.push(new Map(Object.entries(je)));let fe=!1,Pe=null;return V.forEach(je=>{if(je instanceof Map&&(je.has("easing")&&(Pe=je.get("easing"),je.delete("easing")),!fe))for(let ut of je.values())if(ut.toString().indexOf("{{")>=0){fe=!0;break}}),{type:Ft.If.Style,styles:V,easing:Pe,offset:I.offset,containsDynamicStyles:fe,options:null}}_validateStyleAst(I,T){const V=T.currentAnimateTimings;let X=T.currentTime,fe=T.currentTime;V&&fe>0&&(fe-=V.duration+V.delay),I.styles.forEach(Pe=>{"string"!=typeof Pe&&Pe.forEach((je,ut)=>{const Pt=T.collectedStyles.get(T.currentQuerySelector),nn=Pt.get(ut);let gn=!0;nn&&(fe!=X&&fe>=nn.startTime&&X<=nn.endTime&&(T.errors.push(function Ln(J,I,T,V,X){return new U.wOt(3010,!1)}()),gn=!1),fe=nn.startTime),gn&&Pt.set(ut,{startTime:fe,endTime:X}),T.options&&function Ye(J,I,T){const V=I.params||{},X=Bt(J);X.length&&X.forEach(fe=>{V.hasOwnProperty(fe)||T.push(function gt(J){return new U.wOt(3001,!1)}())})}(je,T.options,T.errors)})})}visitKeyframes(I,T){const V={type:Ft.If.Keyframes,styles:[],options:null};if(!T.currentAnimateTimings)return T.errors.push(function rt(){return new U.wOt(3011,!1)}()),V;let fe=0;const Pe=[];let je=!1,ut=!1,Pt=0;const nn=I.steps.map(Lr=>{const pi=this._makeStyleAst(Lr,T);let xn=null!=pi.offset?pi.offset:function Rs(J){if("string"==typeof J)return null;let I=null;if(Array.isArray(J))J.forEach(T=>{if(T instanceof Map&&T.has("offset")){const V=T;I=parseFloat(V.get("offset")),V.delete("offset")}});else if(J instanceof Map&&J.has("offset")){const T=J;I=parseFloat(T.get("offset")),T.delete("offset")}return I}(pi.styles),os=0;return null!=xn&&(fe++,os=pi.offset=xn),ut=ut||os<0||os>1,je=je||os<Pt,Pt=os,Pe.push(os),pi});ut&&T.errors.push(function yn(){return new U.wOt(3012,!1)}()),je&&T.errors.push(function Gn(){return new U.wOt(3200,!1)}());const gn=I.steps.length;let ur=0;fe>0&&fe<gn?T.errors.push(function rr(){return new U.wOt(3202,!1)}()):0==fe&&(ur=1/(gn-1));const er=gn-1,Dn=T.currentTime,Wn=T.currentAnimateTimings,Vr=Wn.duration;return nn.forEach((Lr,pi)=>{const xn=ur>0?pi==er?1:ur*pi:Pe[pi],os=xn*Vr;T.currentTime=Dn+Wn.delay+os,Wn.duration=os,this._validateStyleAst(Lr,T),Lr.offset=xn,V.styles.push(Lr)}),V}visitReference(I,T){return{type:Ft.If.Reference,animation:Xr(this,at(I.animation),T),options:Bi(I.options)}}visitAnimateChild(I,T){return T.depCount++,{type:Ft.If.AnimateChild,options:Bi(I.options)}}visitAnimateRef(I,T){return{type:Ft.If.AnimateRef,animation:this.visitReference(I.animation,T),options:Bi(I.options)}}visitQuery(I,T){const V=T.currentQuerySelector,X=I.options||{};T.queryCount++,T.currentQuery=I;const[fe,Pe]=function Vo(J){const I=!!J.split(/\s*,\s*/).find(T=>":self"==T);return I&&(J=J.replace(nr,"")),J=J.replace(/@\*/g,ir).replace(/@\w+/g,T=>ir+"-"+T.slice(1)).replace(/:animating/g,Gi),[J,I]}(I.selector);T.currentQuerySelector=V.length?V+" "+fe:fe,Nr(T.collectedStyles,T.currentQuerySelector,new Map);const je=Xr(this,at(I.animation),T);return T.currentQuery=null,T.currentQuerySelector=V,{type:Ft.If.Query,selector:fe,limit:X.limit||0,optional:!!X.optional,includeSelf:Pe,animation:je,originalSelector:I.selector,options:Bi(I.options)}}visitStagger(I,T){T.currentQuery||T.errors.push(function bt(){return new U.wOt(3013,!1)}());const V="full"===I.timings?{duration:0,delay:0,easing:"full"}:Je(I.timings,T.errors,!0);return{type:Ft.If.Stagger,animation:Xr(this,at(I.animation),T),timings:V,options:null}}}class la{constructor(I){this.errors=I,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Bi(J){return J?(J={...J}).params&&(J.params=function Qs(J){return J?{...J}:null}(J.params)):J={},J}function Ci(J,I,T){return{duration:J,delay:I,easing:T}}function vr(J,I,T,V,X,fe,Pe=null,je=!1){return{type:1,element:J,keyframes:I,preStyleProps:T,postStyleProps:V,duration:X,delay:fe,totalTime:X+fe,easing:Pe,subTimeline:je}}class fs{constructor(){this._map=new Map}get(I){return this._map.get(I)||[]}append(I,T){let V=this._map.get(I);V||this._map.set(I,V=[]),V.push(...T)}has(I){return this._map.has(I)}clear(){this._map.clear()}}const Lo=new RegExp(":enter","g"),zr=new RegExp(":leave","g");function ni(J,I,T,V,X,fe=new Map,Pe=new Map,je,ut,Pt=[]){return(new ss).buildKeyframes(J,I,T,V,X,fe,Pe,je,ut,Pt)}class ss{buildKeyframes(I,T,V,X,fe,Pe,je,ut,Pt,nn=[]){Pt=Pt||new fs;const gn=new oi(I,T,Pt,X,fe,nn,[]);gn.options=ut;const ur=ut.delay?ri(ut.delay):0;gn.currentTimeline.delayNextStep(ur),gn.currentTimeline.setStyles([Pe],null,gn.errors,ut),Xr(this,V,gn);const er=gn.timelines.filter(Dn=>Dn.containsAnimation());if(er.length&&je.size){let Dn;for(let Wn=er.length-1;Wn>=0;Wn--){const Vr=er[Wn];if(Vr.element===T){Dn=Vr;break}}Dn&&!Dn.allowOnlyTimelineStyles()&&Dn.setStyles([je],null,gn.errors,ut)}return er.length?er.map(Dn=>Dn.buildKeyframes()):[vr(T,[],[],[],0,ur,"",!1)]}visitTrigger(I,T){}visitState(I,T){}visitTransition(I,T){}visitAnimateChild(I,T){const V=T.subInstructions.get(T.element);if(V){const X=T.createSubContext(I.options),fe=T.currentTimeline.currentTime,Pe=this._visitSubInstructions(V,X,X.options);fe!=Pe&&T.transformIntoNewTimeline(Pe)}T.previousNode=I}visitAnimateRef(I,T){const V=T.createSubContext(I.options);V.transformIntoNewTimeline(),this._applyAnimationRefDelays([I.options,I.animation.options],T,V),this.visitReference(I.animation,V),T.transformIntoNewTimeline(V.currentTimeline.currentTime),T.previousNode=I}_applyAnimationRefDelays(I,T,V){for(const X of I){const fe=X?.delay;if(fe){const Pe="number"==typeof fe?fe:ri(Sn(fe,X?.params??{},T.errors));V.delayNextStep(Pe)}}}_visitSubInstructions(I,T,V){let fe=T.currentTimeline.currentTime;const Pe=null!=V.duration?ri(V.duration):null,je=null!=V.delay?ri(V.delay):null;return 0!==Pe&&I.forEach(ut=>{const Pt=T.appendInstructionToTimeline(ut,Pe,je);fe=Math.max(fe,Pt.duration+Pt.delay)}),fe}visitReference(I,T){T.updateOptions(I.options,!0),Xr(this,I.animation,T),T.previousNode=I}visitSequence(I,T){const V=T.subContextCount;let X=T;const fe=I.options;if(fe&&(fe.params||fe.delay)&&(X=T.createSubContext(fe),X.transformIntoNewTimeline(),null!=fe.delay)){X.previousNode.type==Ft.If.Style&&(X.currentTimeline.snapshotCurrentStyles(),X.previousNode=cn);const Pe=ri(fe.delay);X.delayNextStep(Pe)}I.steps.length&&(I.steps.forEach(Pe=>Xr(this,Pe,X)),X.currentTimeline.applyStylesToKeyframe(),X.subContextCount>V&&X.transformIntoNewTimeline()),T.previousNode=I}visitGroup(I,T){const V=[];let X=T.currentTimeline.currentTime;const fe=I.options&&I.options.delay?ri(I.options.delay):0;I.steps.forEach(Pe=>{const je=T.createSubContext(I.options);fe&&je.delayNextStep(fe),Xr(this,Pe,je),X=Math.max(X,je.currentTimeline.currentTime),V.push(je.currentTimeline)}),V.forEach(Pe=>T.currentTimeline.mergeTimelineCollectedStyles(Pe)),T.transformIntoNewTimeline(X),T.previousNode=I}_visitTiming(I,T){if(I.dynamic){const V=I.strValue;return Je(T.params?Sn(V,T.params,T.errors):V,T.errors)}return{duration:I.duration,delay:I.delay,easing:I.easing}}visitAnimate(I,T){const V=T.currentAnimateTimings=this._visitTiming(I.timings,T),X=T.currentTimeline;V.delay&&(T.incrementTime(V.delay),X.snapshotCurrentStyles());const fe=I.style;fe.type==Ft.If.Keyframes?this.visitKeyframes(fe,T):(T.incrementTime(V.duration),this.visitStyle(fe,T),X.applyStylesToKeyframe()),T.currentAnimateTimings=null,T.previousNode=I}visitStyle(I,T){const V=T.currentTimeline,X=T.currentAnimateTimings;!X&&V.hasCurrentStyleProperties()&&V.forwardFrame();const fe=X&&X.easing||I.easing;I.isEmptyStep?V.applyEmptyStep(fe):V.setStyles(I.styles,fe,T.errors,T.options),T.previousNode=I}visitKeyframes(I,T){const V=T.currentAnimateTimings,X=T.currentTimeline.duration,fe=V.duration,je=T.createSubContext().currentTimeline;je.easing=V.easing,I.styles.forEach(ut=>{je.forwardTime((ut.offset||0)*fe),je.setStyles(ut.styles,ut.easing,T.errors,T.options),je.applyStylesToKeyframe()}),T.currentTimeline.mergeTimelineCollectedStyles(je),T.transformIntoNewTimeline(X+fe),T.previousNode=I}visitQuery(I,T){const V=T.currentTimeline.currentTime,X=I.options||{},fe=X.delay?ri(X.delay):0;fe&&(T.previousNode.type===Ft.If.Style||0==V&&T.currentTimeline.hasCurrentStyleProperties())&&(T.currentTimeline.snapshotCurrentStyles(),T.previousNode=cn);let Pe=V;const je=T.invokeQuery(I.selector,I.originalSelector,I.limit,I.includeSelf,!!X.optional,T.errors);T.currentQueryTotal=je.length;let ut=null;je.forEach((Pt,nn)=>{T.currentQueryIndex=nn;const gn=T.createSubContext(I.options,Pt);fe&&gn.delayNextStep(fe),Pt===T.element&&(ut=gn.currentTimeline),Xr(this,I.animation,gn),gn.currentTimeline.applyStylesToKeyframe(),Pe=Math.max(Pe,gn.currentTimeline.currentTime)}),T.currentQueryIndex=0,T.currentQueryTotal=0,T.transformIntoNewTimeline(Pe),ut&&(T.currentTimeline.mergeTimelineCollectedStyles(ut),T.currentTimeline.snapshotCurrentStyles()),T.previousNode=I}visitStagger(I,T){const V=T.parentContext,X=T.currentTimeline,fe=I.timings,Pe=Math.abs(fe.duration),je=Pe*(T.currentQueryTotal-1);let ut=Pe*T.currentQueryIndex;switch(fe.duration<0?"reverse":fe.easing){case"reverse":ut=je-ut;break;case"full":ut=V.currentStaggerTime}const nn=T.currentTimeline;ut&&nn.delayNextStep(ut);const gn=nn.currentTime;Xr(this,I.animation,T),T.previousNode=I,V.currentStaggerTime=X.currentTime-gn+(X.startTime-V.currentTimeline.startTime)}}const cn={};class oi{constructor(I,T,V,X,fe,Pe,je,ut){this._driver=I,this.element=T,this.subInstructions=V,this._enterClassName=X,this._leaveClassName=fe,this.errors=Pe,this.timelines=je,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=cn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ut||new ps(this._driver,T,0),je.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(I,T){if(!I)return;const V=I;let X=this.options;null!=V.duration&&(X.duration=ri(V.duration)),null!=V.delay&&(X.delay=ri(V.delay));const fe=V.params;if(fe){let Pe=X.params;Pe||(Pe=this.options.params={}),Object.keys(fe).forEach(je=>{(!T||!Pe.hasOwnProperty(je))&&(Pe[je]=Sn(fe[je],Pe,this.errors))})}}_copyOptions(){const I={};if(this.options){const T=this.options.params;if(T){const V=I.params={};Object.keys(T).forEach(X=>{V[X]=T[X]})}}return I}createSubContext(I=null,T,V){const X=T||this.element,fe=new oi(this._driver,X,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(X,V||0));return fe.previousNode=this.previousNode,fe.currentAnimateTimings=this.currentAnimateTimings,fe.options=this._copyOptions(),fe.updateOptions(I),fe.currentQueryIndex=this.currentQueryIndex,fe.currentQueryTotal=this.currentQueryTotal,fe.parentContext=this,this.subContextCount++,fe}transformIntoNewTimeline(I){return this.previousNode=cn,this.currentTimeline=this.currentTimeline.fork(this.element,I),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(I,T,V){const X={duration:T??I.duration,delay:this.currentTimeline.currentTime+(V??0)+I.delay,easing:""},fe=new ks(this._driver,I.element,I.keyframes,I.preStyleProps,I.postStyleProps,X,I.stretchStartingKeyframe);return this.timelines.push(fe),X}incrementTime(I){this.currentTimeline.forwardTime(this.currentTimeline.duration+I)}delayNextStep(I){I>0&&this.currentTimeline.delayNextStep(I)}invokeQuery(I,T,V,X,fe,Pe){let je=[];if(X&&je.push(this.element),I.length>0){I=(I=I.replace(Lo,"."+this._enterClassName)).replace(zr,"."+this._leaveClassName);let Pt=this._driver.query(this.element,I,1!=V);0!==V&&(Pt=V<0?Pt.slice(Pt.length+V,Pt.length):Pt.slice(0,V)),je.push(...Pt)}return!fe&&0==je.length&&Pe.push(function ft(J){return new U.wOt(3014,!1)}()),je}}class ps{constructor(I,T,V,X){this._driver=I,this.element=T,this.startTime=V,this._elementTimelineStylesLookup=X,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(T),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(T,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(I){const T=1===this._keyframes.size&&this._pendingStyles.size;this.duration||T?(this.forwardTime(this.currentTime+I),T&&this.snapshotCurrentStyles()):this.startTime+=I}fork(I,T){return this.applyStylesToKeyframe(),new ps(this._driver,I,T||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(I){this.applyStylesToKeyframe(),this.duration=I,this._loadKeyframe()}_updateStyle(I,T){this._localTimelineStyles.set(I,T),this._globalTimelineStyles.set(I,T),this._styleSummary.set(I,{time:this.currentTime,value:T})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(I){I&&this._previousKeyframe.set("easing",I);for(let[T,V]of this._globalTimelineStyles)this._backFill.set(T,V||Ft.kp),this._currentKeyframe.set(T,Ft.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(I,T,V,X){T&&this._previousKeyframe.set("easing",T);const fe=X&&X.params||{},Pe=function Ys(J,I){const T=new Map;let V;return J.forEach(X=>{if("*"===X){V??=I.keys();for(let fe of V)T.set(fe,Ft.kp)}else for(let[fe,Pe]of X)T.set(fe,Pe)}),T}(I,this._globalTimelineStyles);for(let[je,ut]of Pe){const Pt=Sn(ut,fe,V);this._pendingStyles.set(je,Pt),this._localTimelineStyles.has(je)||this._backFill.set(je,this._globalTimelineStyles.get(je)??Ft.kp),this._updateStyle(je,Pt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((I,T)=>{this._currentKeyframe.set(T,I)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((I,T)=>{this._currentKeyframe.has(T)||this._currentKeyframe.set(T,I)}))}snapshotCurrentStyles(){for(let[I,T]of this._localTimelineStyles)this._pendingStyles.set(I,T),this._updateStyle(I,T)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const I=[];for(let T in this._currentKeyframe)I.push(T);return I}mergeTimelineCollectedStyles(I){I._styleSummary.forEach((T,V)=>{const X=this._styleSummary.get(V);(!X||T.time>X.time)&&this._updateStyle(V,T.value)})}buildKeyframes(){this.applyStylesToKeyframe();const I=new Set,T=new Set,V=1===this._keyframes.size&&0===this.duration;let X=[];this._keyframes.forEach((je,ut)=>{const Pt=new Map([...this._backFill,...je]);Pt.forEach((nn,gn)=>{nn===Ft.FX?I.add(gn):nn===Ft.kp&&T.add(gn)}),V||Pt.set("offset",ut/this.duration),X.push(Pt)});const fe=[...I.values()],Pe=[...T.values()];if(V){const je=X[0],ut=new Map(je);je.set("offset",0),ut.set("offset",1),X=[je,ut]}return vr(this.element,X,fe,Pe,this.duration,this.startTime,this.easing,!1)}}class ks extends ps{constructor(I,T,V,X,fe,Pe,je=!1){super(I,T,Pe.delay),this.keyframes=V,this.preStyleProps=X,this.postStyleProps=fe,this._stretchStartingKeyframe=je,this.timings={duration:Pe.duration,delay:Pe.delay,easing:Pe.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let I=this.keyframes,{delay:T,duration:V,easing:X}=this.timings;if(this._stretchStartingKeyframe&&T){const fe=[],Pe=V+T,je=T/Pe,ut=new Map(I[0]);ut.set("offset",0),fe.push(ut);const Pt=new Map(I[0]);Pt.set("offset",gs(je)),fe.push(Pt);const nn=I.length-1;for(let gn=1;gn<=nn;gn++){let ur=new Map(I[gn]);const er=ur.get("offset");ur.set("offset",gs((T+er*V)/Pe)),fe.push(ur)}V=Pe,T=0,X="",I=fe}return vr(this.element,I,this.preStyleProps,this.postStyleProps,V,T,X,!0)}}function gs(J,I=3){const T=Math.pow(10,I-1);return Math.round(J*T)/T}function Ri(J,I,T,V,X,fe,Pe,je,ut,Pt,nn,gn,ur){return{type:0,element:J,triggerName:I,isRemovalTransition:X,fromState:T,fromStyles:fe,toState:V,toStyles:Pe,timelines:je,queriedElements:ut,preStyleProps:Pt,postStyleProps:nn,totalTime:gn,errors:ur}}const es={};class Wi{constructor(I,T,V){this._triggerName=I,this.ast=T,this._stateStyles=V}match(I,T,V,X){return function ts(J,I,T,V,X){return J.some(fe=>fe(I,T,V,X))}(this.ast.matchers,I,T,V,X)}buildStyles(I,T,V){let X=this._stateStyles.get("*");return void 0!==I&&(X=this._stateStyles.get(I?.toString())||X),X?X.buildStyles(T,V):new Map}build(I,T,V,X,fe,Pe,je,ut,Pt,nn){const gn=[],ur=this.ast.options&&this.ast.options.params||es,Dn=this.buildStyles(V,je&&je.params||es,gn),Wn=ut&&ut.params||es,Vr=this.buildStyles(X,Wn,gn),Lr=new Set,pi=new Map,xn=new Map,os="void"===X,uo={params:Fs(Wn,ur),delay:this.ast.options?.delay},Os=nn?[]:ni(I,T,this.ast.animation,fe,Pe,Dn,Vr,uo,Pt,gn);let Di=0;return Os.forEach(ls=>{Di=Math.max(ls.duration+ls.delay,Di)}),gn.length?Ri(T,this._triggerName,V,X,os,Dn,Vr,[],[],pi,xn,Di,gn):(Os.forEach(ls=>{const lo=ls.element,Zo=Nr(pi,lo,new Set);ls.preStyleProps.forEach(ds=>Zo.add(ds));const ma=Nr(xn,lo,new Set);ls.postStyleProps.forEach(ds=>ma.add(ds)),lo!==T&&Lr.add(lo)}),Ri(T,this._triggerName,V,X,os,Dn,Vr,Os,[...Lr.values()],pi,xn,Di))}}function Fs(J,I){const T={...I};return Object.entries(J).forEach(([V,X])=>{null!=X&&(T[V]=X)}),T}class $i{constructor(I,T,V){this.styles=I,this.defaultParams=T,this.normalizer=V}buildStyles(I,T){const V=new Map,X=Fs(I,this.defaultParams);return this.styles.styles.forEach(fe=>{"string"!=typeof fe&&fe.forEach((Pe,je)=>{Pe&&(Pe=Sn(Pe,X,T));const ut=this.normalizer.normalizePropertyName(je,T);Pe=this.normalizer.normalizeStyleValue(je,ut,Pe,T),V.set(je,Pe)})}),V}}class ns{constructor(I,T,V){this.name=I,this.ast=T,this._normalizer=V,this.transitionFactories=[],this.states=new Map,T.states.forEach(X=>{this.states.set(X.name,new $i(X.style,X.options&&X.options.params||{},V))}),Io(this.states,"true","1"),Io(this.states,"false","0"),T.transitions.forEach(X=>{this.transitionFactories.push(new Wi(I,X,this.states))}),this.fallbackTransition=function Oi(J,I,T){return new Wi(J,{type:Ft.If.Transition,animation:{type:Ft.If.Sequence,steps:[],options:null},matchers:[(Pe,je)=>!0],options:null,queryCount:0,depCount:0},I)}(I,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(I,T,V,X){return this.transitionFactories.find(Pe=>Pe.match(I,T,V,X))||null}matchStyles(I,T,V){return this.fallbackTransition.buildStyles(I,T,V)}}function Io(J,I,T){J.has(I)?J.has(T)||J.set(T,J.get(I)):J.has(T)&&J.set(I,J.get(T))}const ao=new fs;class Hi{constructor(I,T,V){this.bodyNode=I,this._driver=T,this._normalizer=V,this._animations=new Map,this._playersById=new Map,this.players=[]}register(I,T){const V=[],fe=Eo(this._driver,T,V,[]);if(V.length)throw function wn(J){return new U.wOt(3503,!1)}();this._animations.set(I,fe)}_buildPlayer(I,T,V){const X=I.element,fe=Xt(this._normalizer,I.keyframes,T,V);return this._driver.animate(X,fe,I.duration,I.delay,I.easing,[],!0)}create(I,T,V={}){const X=[],fe=this._animations.get(I);let Pe;const je=new Map;if(fe?(Pe=ni(this._driver,T,fe,Yr,Ms,new Map,new Map,V,ao,X),Pe.forEach(nn=>{const gn=Nr(je,nn.element,new Map);nn.postStyleProps.forEach(ur=>gn.set(ur,null))})):(X.push(function An(){return new U.wOt(3300,!1)}()),Pe=[]),X.length)throw function kr(J){return new U.wOt(3504,!1)}();je.forEach((nn,gn)=>{nn.forEach((ur,er)=>{nn.set(er,this._driver.computeStyle(gn,er,Ft.kp))})});const Pt=Or(Pe.map(nn=>{const gn=je.get(nn.element);return this._buildPlayer(nn,new Map,gn)}));return this._playersById.set(I,Pt),Pt.onDestroy(()=>this.destroy(I)),this.players.push(Pt),Pt}destroy(I){const T=this._getPlayer(I);T.destroy(),this._playersById.delete(I);const V=this.players.indexOf(T);V>=0&&this.players.splice(V,1)}_getPlayer(I){const T=this._playersById.get(I);if(!T)throw function qr(J){return new U.wOt(3301,!1)}();return T}listen(I,T,V,X){const fe=Mn(T,"","","");return Yt(this._getPlayer(I),V,fe,X),()=>{}}command(I,T,V,X){if("register"==V)return void this.register(I,X[0]);if("create"==V)return void this.create(I,T,X[0]||{});const fe=this._getPlayer(I);switch(V){case"play":fe.play();break;case"pause":fe.pause();break;case"reset":fe.reset();break;case"restart":fe.restart();break;case"finish":fe.finish();break;case"init":fe.init();break;case"setPosition":fe.setPosition(parseFloat(X[0]));break;case"destroy":this.destroy(I)}}}const ms="ng-animate-queued",Xo="ng-animate-disabled",wi=[],Co={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Yo={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ti="__ng_removed";class gr{get params(){return this.options.params}constructor(I,T=""){this.namespaceId=T;const V=I&&I.hasOwnProperty("value");if(this.value=function _s(J){return J??null}(V?I.value:I),V){const{value:fe,...Pe}=I;this.options=Pe}else this.options={};this.options.params||(this.options.params={})}absorbOptions(I){const T=I.params;if(T){const V=this.options.params;Object.keys(T).forEach(X=>{null==V[X]&&(V[X]=T[X])})}}}const Us="void",da=new gr(Us);class Zr{constructor(I,T,V){this.id=I,this.hostElement=T,this._engine=V,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+I,ee(T,this._hostClassName)}listen(I,T,V,X){if(!this._triggers.has(T))throw function Hr(J,I){return new U.wOt(3302,!1)}();if(null==V||0==V.length)throw function Li(J){return new U.wOt(3303,!1)}();if(!function Fi(J){return"start"==J||"done"==J}(V))throw function Rr(J,I){return new U.wOt(3400,!1)}();const fe=Nr(this._elementListeners,I,[]),Pe={name:T,phase:V,callback:X};fe.push(Pe);const je=Nr(this._engine.statesByElement,I,new Map);return je.has(T)||(ee(I,cs),ee(I,cs+"-"+T),je.set(T,da)),()=>{this._engine.afterFlush(()=>{const ut=fe.indexOf(Pe);ut>=0&&fe.splice(ut,1),this._triggers.has(T)||je.delete(T)})}}register(I,T){return!this._triggers.has(I)&&(this._triggers.set(I,T),!0)}_getTrigger(I){const T=this._triggers.get(I);if(!T)throw function hs(J){return new U.wOt(3401,!1)}();return T}trigger(I,T,V,X=!0){const fe=this._getTrigger(T),Pe=new sr(this.id,T,I);let je=this._engine.statesByElement.get(I);je||(ee(I,cs),ee(I,cs+"-"+T),this._engine.statesByElement.set(I,je=new Map));let ut=je.get(T);const Pt=new gr(V,this.id);if(!(V&&V.hasOwnProperty("value"))&&ut&&Pt.absorbOptions(ut.options),je.set(T,Pt),ut||(ut=da),Pt.value!==Us&&ut.value===Pt.value){if(!function Zs(J,I){const T=Object.keys(J),V=Object.keys(I);if(T.length!=V.length)return!1;for(let X=0;X<T.length;X++){const fe=T[X];if(!I.hasOwnProperty(fe)||J[fe]!==I[fe])return!1}return!0}(ut.params,Pt.params)){const Wn=[],Vr=fe.matchStyles(ut.value,ut.params,Wn),Lr=fe.matchStyles(Pt.value,Pt.params,Wn);Wn.length?this._engine.reportError(Wn):this._engine.afterFlush(()=>{Ie(I,Vr),ve(I,Lr)})}return}const ur=Nr(this._engine.playersByElement,I,[]);ur.forEach(Wn=>{Wn.namespaceId==this.id&&Wn.triggerName==T&&Wn.queued&&Wn.destroy()});let er=fe.matchTransition(ut.value,Pt.value,I,Pt.params),Dn=!1;if(!er){if(!X)return;er=fe.fallbackTransition,Dn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:I,triggerName:T,transition:er,fromState:ut,toState:Pt,player:Pe,isFallbackTransition:Dn}),Dn||(ee(I,ms),Pe.onStart(()=>{be(I,ms)})),Pe.onDone(()=>{let Wn=this.players.indexOf(Pe);Wn>=0&&this.players.splice(Wn,1);const Vr=this._engine.playersByElement.get(I);if(Vr){let Lr=Vr.indexOf(Pe);Lr>=0&&Vr.splice(Lr,1)}}),this.players.push(Pe),ur.push(Pe),Pe}deregister(I){this._triggers.delete(I),this._engine.statesByElement.forEach(T=>T.delete(I)),this._elementListeners.forEach((T,V)=>{this._elementListeners.set(V,T.filter(X=>X.name!=I))})}clearElementCache(I){this._engine.statesByElement.delete(I),this._elementListeners.delete(I);const T=this._engine.playersByElement.get(I);T&&(T.forEach(V=>V.destroy()),this._engine.playersByElement.delete(I))}_signalRemovalForInnerTriggers(I,T){const V=this._engine.driver.query(I,ir,!0);V.forEach(X=>{if(X[Ti])return;const fe=this._engine.fetchNamespacesByElement(X);fe.size?fe.forEach(Pe=>Pe.triggerLeaveAnimation(X,T,!1,!0)):this.clearElementCache(X)}),this._engine.afterFlushAnimationsDone(()=>V.forEach(X=>this.clearElementCache(X)))}triggerLeaveAnimation(I,T,V,X){const fe=this._engine.statesByElement.get(I),Pe=new Map;if(fe){const je=[];if(fe.forEach((ut,Pt)=>{if(Pe.set(Pt,ut.value),this._triggers.has(Pt)){const nn=this.trigger(I,Pt,Us,X);nn&&je.push(nn)}}),je.length)return this._engine.markElementAsRemoved(this.id,I,!0,T,Pe),V&&Or(je).onDone(()=>this._engine.processLeaveNode(I)),!0}return!1}prepareLeaveAnimationListeners(I){const T=this._elementListeners.get(I),V=this._engine.statesByElement.get(I);if(T&&V){const X=new Set;T.forEach(fe=>{const Pe=fe.name;if(X.has(Pe))return;X.add(Pe);const ut=this._triggers.get(Pe).fallbackTransition,Pt=V.get(Pe)||da,nn=new gr(Us),gn=new sr(this.id,Pe,I);this._engine.totalQueuedPlayers++,this._queue.push({element:I,triggerName:Pe,transition:ut,fromState:Pt,toState:nn,player:gn,isFallbackTransition:!0})})}}removeNode(I,T){const V=this._engine;if(I.childElementCount&&this._signalRemovalForInnerTriggers(I,T),this.triggerLeaveAnimation(I,T,!0))return;let X=!1;if(V.totalAnimations){const fe=V.players.length?V.playersByQueriedElement.get(I):[];if(fe&&fe.length)X=!0;else{let Pe=I;for(;Pe=Pe.parentNode;)if(V.statesByElement.get(Pe)){X=!0;break}}}if(this.prepareLeaveAnimationListeners(I),X)V.markElementAsRemoved(this.id,I,!1,T);else{const fe=I[Ti];(!fe||fe===Co)&&(V.afterFlush(()=>this.clearElementCache(I)),V.destroyInnerAnimations(I),V._onRemovalComplete(I,T))}}insertNode(I,T){ee(I,this._hostClassName)}drainQueuedTransitions(I){const T=[];return this._queue.forEach(V=>{const X=V.player;if(X.destroyed)return;const fe=V.element,Pe=this._elementListeners.get(fe);Pe&&Pe.forEach(je=>{if(je.name==V.triggerName){const ut=Mn(fe,V.triggerName,V.fromState.value,V.toState.value);ut._data=I,Yt(V.player,je.phase,ut,je.callback)}}),X.markedForDestroy?this._engine.afterFlush(()=>{X.destroy()}):T.push(V)}),this._queue=[],T.sort((V,X)=>{const fe=V.transition.ast.depCount,Pe=X.transition.ast.depCount;return 0==fe||0==Pe?fe-Pe:this._engine.driver.containsElement(V.element,X.element)?1:-1})}destroy(I){this.players.forEach(T=>T.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,I)}}class co{_onRemovalComplete(I,T){this.onRemovalComplete(I,T)}constructor(I,T,V,X){this.bodyNode=I,this.driver=T,this._normalizer=V,this.scheduler=X,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(fe,Pe)=>{}}get queuedPlayers(){const I=[];return this._namespaceList.forEach(T=>{T.players.forEach(V=>{V.queued&&I.push(V)})}),I}createNamespace(I,T){const V=new Zr(I,T,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,T)?this._balanceNamespaceList(V,T):(this.newHostElements.set(T,V),this.collectEnterElement(T)),this._namespaceLookup[I]=V}_balanceNamespaceList(I,T){const V=this._namespaceList,X=this.namespacesByHostElement;if(V.length-1>=0){let Pe=!1,je=this.driver.getParentElement(T);for(;je;){const ut=X.get(je);if(ut){const Pt=V.indexOf(ut);V.splice(Pt+1,0,I),Pe=!0;break}je=this.driver.getParentElement(je)}Pe||V.unshift(I)}else V.push(I);return X.set(T,I),I}register(I,T){let V=this._namespaceLookup[I];return V||(V=this.createNamespace(I,T)),V}registerTrigger(I,T,V){let X=this._namespaceLookup[I];X&&X.register(T,V)&&this.totalAnimations++}destroy(I,T){I&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const V=this._fetchNamespace(I);this.namespacesByHostElement.delete(V.hostElement);const X=this._namespaceList.indexOf(V);X>=0&&this._namespaceList.splice(X,1),V.destroy(T),delete this._namespaceLookup[I]}))}_fetchNamespace(I){return this._namespaceLookup[I]}fetchNamespacesByElement(I){const T=new Set,V=this.statesByElement.get(I);if(V)for(let X of V.values())if(X.namespaceId){const fe=this._fetchNamespace(X.namespaceId);fe&&T.add(fe)}return T}trigger(I,T,V,X){if(wo(T)){const fe=this._fetchNamespace(I);if(fe)return fe.trigger(T,V,X),!0}return!1}insertNode(I,T,V,X){if(!wo(T))return;const fe=T[Ti];if(fe&&fe.setForRemoval){fe.setForRemoval=!1,fe.setForMove=!0;const Pe=this.collectedLeaveElements.indexOf(T);Pe>=0&&this.collectedLeaveElements.splice(Pe,1)}if(I){const Pe=this._fetchNamespace(I);Pe&&Pe.insertNode(T,V)}X&&this.collectEnterElement(T)}collectEnterElement(I){this.collectedEnterElements.push(I)}markElementAsDisabled(I,T){T?this.disabledNodes.has(I)||(this.disabledNodes.add(I),ee(I,Xo)):this.disabledNodes.has(I)&&(this.disabledNodes.delete(I),be(I,Xo))}removeNode(I,T,V){if(wo(T)){this.scheduler?.notify();const X=I?this._fetchNamespace(I):null;X?X.removeNode(T,V):this.markElementAsRemoved(I,T,!1,V);const fe=this.namespacesByHostElement.get(T);fe&&fe.id!==I&&fe.removeNode(T,V)}else this._onRemovalComplete(T,V)}markElementAsRemoved(I,T,V,X,fe){this.collectedLeaveElements.push(T),T[Ti]={namespaceId:I,setForRemoval:X,hasAnimation:V,removedBeforeQueried:!1,previousTriggersValues:fe}}listen(I,T,V,X,fe){return wo(T)?this._fetchNamespace(I).listen(T,V,X,fe):()=>{}}_buildInstruction(I,T,V,X,fe){return I.transition.build(this.driver,I.element,I.fromState.value,I.toState.value,V,X,I.fromState.options,I.toState.options,T,fe)}destroyInnerAnimations(I){let T=this.driver.query(I,ir,!0);T.forEach(V=>this.destroyActiveAnimationsForElement(V)),0!=this.playersByQueriedElement.size&&(T=this.driver.query(I,Gi,!0),T.forEach(V=>this.finishActiveQueriedAnimationOnElement(V)))}destroyActiveAnimationsForElement(I){const T=this.playersByElement.get(I);T&&T.forEach(V=>{V.queued?V.markedForDestroy=!0:V.destroy()})}finishActiveQueriedAnimationOnElement(I){const T=this.playersByQueriedElement.get(I);T&&T.forEach(V=>V.finish())}whenRenderingDone(){return new Promise(I=>{if(this.players.length)return Or(this.players).onDone(()=>I());I()})}processLeaveNode(I){const T=I[Ti];if(T&&T.setForRemoval){if(I[Ti]=Co,T.namespaceId){this.destroyInnerAnimations(I);const V=this._fetchNamespace(T.namespaceId);V&&V.clearElementCache(I)}this._onRemovalComplete(I,T.setForRemoval)}I.classList?.contains(Xo)&&this.markElementAsDisabled(I,!1),this.driver.query(I,".ng-animate-disabled",!0).forEach(V=>{this.markElementAsDisabled(V,!1)})}flush(I=-1){let T=[];if(this.newHostElements.size&&(this.newHostElements.forEach((V,X)=>this._balanceNamespaceList(V,X)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let V=0;V<this.collectedEnterElements.length;V++)ee(this.collectedEnterElements[V],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const V=[];try{T=this._flushAnimations(V,I)}finally{for(let X=0;X<V.length;X++)V[X]()}}else for(let V=0;V<this.collectedLeaveElements.length;V++)this.processLeaveNode(this.collectedLeaveElements[V]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(V=>V()),this._flushFns=[],this._whenQuietFns.length){const V=this._whenQuietFns;this._whenQuietFns=[],T.length?Or(T).onDone(()=>{V.forEach(X=>X())}):V.forEach(X=>X())}}reportError(I){throw function Nn(J){return new U.wOt(3402,!1)}()}_flushAnimations(I,T){const V=new fs,X=[],fe=new Map,Pe=[],je=new Map,ut=new Map,Pt=new Map,nn=new Set;this.disabledNodes.forEach(H=>{nn.add(H);const N=this.driver.query(H,".ng-animate-queued",!0);for(let j=0;j<N.length;j++)nn.add(N[j])});const gn=this.bodyNode,ur=Array.from(this.statesByElement.keys()),er=O(ur,this.collectedEnterElements),Dn=new Map;let Wn=0;er.forEach((H,N)=>{const j=Yr+Wn++;Dn.set(N,j),H.forEach(_e=>ee(_e,j))});const Vr=[],Lr=new Set,pi=new Set;for(let H=0;H<this.collectedLeaveElements.length;H++){const N=this.collectedLeaveElements[H],j=N[Ti];j&&j.setForRemoval&&(Vr.push(N),Lr.add(N),j.hasAnimation?this.driver.query(N,".ng-star-inserted",!0).forEach(_e=>Lr.add(_e)):pi.add(N))}const xn=new Map,os=O(ur,Array.from(Lr));os.forEach((H,N)=>{const j=Ms+Wn++;xn.set(N,j),H.forEach(_e=>ee(_e,j))}),I.push(()=>{er.forEach((H,N)=>{const j=Dn.get(N);H.forEach(_e=>be(_e,j))}),os.forEach((H,N)=>{const j=xn.get(N);H.forEach(_e=>be(_e,j))}),Vr.forEach(H=>{this.processLeaveNode(H)})});const uo=[],Os=[];for(let H=this._namespaceList.length-1;H>=0;H--)this._namespaceList[H].drainQueuedTransitions(T).forEach(j=>{const _e=j.player,it=j.element;if(uo.push(_e),this.collectedEnterElements.length){const fr=it[Ti];if(fr&&fr.setForMove){if(fr.previousTriggersValues&&fr.previousTriggersValues.has(j.triggerName)){const wr=fr.previousTriggersValues.get(j.triggerName),Tr=this.statesByElement.get(j.element);if(Tr&&Tr.has(j.triggerName)){const xr=Tr.get(j.triggerName);xr.value=wr,Tr.set(j.triggerName,xr)}}return void _e.destroy()}}const xt=!gn||!this.driver.containsElement(gn,it),on=xn.get(it),Cr=Dn.get(it),dn=this._buildInstruction(j,V,Cr,on,xt);if(dn.errors&&dn.errors.length)return void Os.push(dn);if(xt)return _e.onStart(()=>Ie(it,dn.fromStyles)),_e.onDestroy(()=>ve(it,dn.toStyles)),void X.push(_e);if(j.isFallbackTransition)return _e.onStart(()=>Ie(it,dn.fromStyles)),_e.onDestroy(()=>ve(it,dn.toStyles)),void X.push(_e);const Ur=[];dn.timelines.forEach(fr=>{fr.stretchStartingKeyframe=!0,this.disabledNodes.has(fr.element)||Ur.push(fr)}),dn.timelines=Ur,V.append(it,dn.timelines),Pe.push({instruction:dn,player:_e,element:it}),dn.queriedElements.forEach(fr=>Nr(je,fr,[]).push(_e)),dn.preStyleProps.forEach((fr,wr)=>{if(fr.size){let Tr=ut.get(wr);Tr||ut.set(wr,Tr=new Set),fr.forEach((xr,Qt)=>Tr.add(Qt))}}),dn.postStyleProps.forEach((fr,wr)=>{let Tr=Pt.get(wr);Tr||Pt.set(wr,Tr=new Set),fr.forEach((xr,Qt)=>Tr.add(Qt))})});if(Os.length){const H=[];Os.forEach(N=>{H.push(function Ht(J,I){return new U.wOt(3505,!1)}())}),uo.forEach(N=>N.destroy()),this.reportError(H)}const Di=new Map,ls=new Map;Pe.forEach(H=>{const N=H.element;V.has(N)&&(ls.set(N,N),this._beforeAnimationBuild(H.player.namespaceId,H.instruction,Di))}),X.forEach(H=>{const N=H.element;this._getPreviousPlayers(N,!1,H.namespaceId,H.triggerName,null).forEach(_e=>{Nr(Di,N,[]).push(_e),_e.destroy()})});const lo=Vr.filter(H=>fi(H,ut,Pt)),Zo=new Map;q(Zo,this.driver,pi,Pt,Ft.kp).forEach(H=>{fi(H,ut,Pt)&&lo.push(H)});const ds=new Map;er.forEach((H,N)=>{q(ds,this.driver,new Set(H),ut,Ft.FX)}),lo.forEach(H=>{const N=Zo.get(H),j=ds.get(H);Zo.set(H,new Map([...N?.entries()??[],...j?.entries()??[]]))});const Es=[],Bs=[],S={};Pe.forEach(H=>{const{element:N,player:j,instruction:_e}=H;if(V.has(N)){if(nn.has(N))return j.onDestroy(()=>ve(N,_e.toStyles)),j.disabled=!0,j.overrideTotalTime(_e.totalTime),void X.push(j);let it=S;if(ls.size>1){let on=N;const Cr=[];for(;on=on.parentNode;){const dn=ls.get(on);if(dn){it=dn;break}Cr.push(on)}Cr.forEach(dn=>ls.set(dn,it))}const xt=this._buildAnimation(j.namespaceId,_e,Di,fe,ds,Zo);if(j.setRealPlayer(xt),it===S)Es.push(j);else{const on=this.playersByElement.get(it);on&&on.length&&(j.parentPlayer=Or(on)),X.push(j)}}else Ie(N,_e.fromStyles),j.onDestroy(()=>ve(N,_e.toStyles)),Bs.push(j),nn.has(N)&&X.push(j)}),Bs.forEach(H=>{const N=fe.get(H.element);if(N&&N.length){const j=Or(N);H.setRealPlayer(j)}}),X.forEach(H=>{H.parentPlayer?H.syncPlayerEvents(H.parentPlayer):H.destroy()});for(let H=0;H<Vr.length;H++){const N=Vr[H],j=N[Ti];if(be(N,Ms),j&&j.hasAnimation)continue;let _e=[];if(je.size){let xt=je.get(N);xt&&xt.length&&_e.push(...xt);let on=this.driver.query(N,Gi,!0);for(let Cr=0;Cr<on.length;Cr++){let dn=je.get(on[Cr]);dn&&dn.length&&_e.push(...dn)}}const it=_e.filter(xt=>!xt.destroyed);it.length?un(this,N,it):this.processLeaveNode(N)}return Vr.length=0,Es.forEach(H=>{this.players.push(H),H.onDone(()=>{H.destroy();const N=this.players.indexOf(H);this.players.splice(N,1)}),H.play()}),Es}afterFlush(I){this._flushFns.push(I)}afterFlushAnimationsDone(I){this._whenQuietFns.push(I)}_getPreviousPlayers(I,T,V,X,fe){let Pe=[];if(T){const je=this.playersByQueriedElement.get(I);je&&(Pe=je)}else{const je=this.playersByElement.get(I);if(je){const ut=!fe||fe==Us;je.forEach(Pt=>{Pt.queued||!ut&&Pt.triggerName!=X||Pe.push(Pt)})}}return(V||X)&&(Pe=Pe.filter(je=>!(V&&V!=je.namespaceId||X&&X!=je.triggerName))),Pe}_beforeAnimationBuild(I,T,V){const fe=T.element,Pe=T.isRemovalTransition?void 0:I,je=T.isRemovalTransition?void 0:T.triggerName;for(const ut of T.timelines){const Pt=ut.element,nn=Pt!==fe,gn=Nr(V,Pt,[]);this._getPreviousPlayers(Pt,nn,Pe,je,T.toState).forEach(er=>{const Dn=er.getRealPlayer();Dn.beforeDestroy&&Dn.beforeDestroy(),er.destroy(),gn.push(er)})}Ie(fe,T.fromStyles)}_buildAnimation(I,T,V,X,fe,Pe){const je=T.triggerName,ut=T.element,Pt=[],nn=new Set,gn=new Set,ur=T.timelines.map(Dn=>{const Wn=Dn.element;nn.add(Wn);const Vr=Wn[Ti];if(Vr&&Vr.removedBeforeQueried)return new Ft.sf(Dn.duration,Dn.delay);const Lr=Wn!==ut,pi=function Xn(J){const I=[];return ys(J,I),I}((V.get(Wn)||wi).map(Di=>Di.getRealPlayer())).filter(Di=>!!Di.element&&Di.element===Wn),xn=fe.get(Wn),os=Pe.get(Wn),uo=Xt(this._normalizer,Dn.keyframes,xn,os),Os=this._buildPlayer(Dn,uo,pi);if(Dn.subTimeline&&X&&gn.add(Wn),Lr){const Di=new sr(I,je,Wn);Di.setRealPlayer(Os),Pt.push(Di)}return Os});Pt.forEach(Dn=>{Nr(this.playersByQueriedElement,Dn.element,[]).push(Dn),Dn.onDone(()=>function us(J,I,T){let V=J.get(I);if(V){if(V.length){const X=V.indexOf(T);V.splice(X,1)}0==V.length&&J.delete(I)}return V}(this.playersByQueriedElement,Dn.element,Dn))}),nn.forEach(Dn=>ee(Dn,is));const er=Or(ur);return er.onDestroy(()=>{nn.forEach(Dn=>be(Dn,is)),ve(ut,T.toStyles)}),gn.forEach(Dn=>{Nr(X,Dn,[]).push(er)}),er}_buildPlayer(I,T,V){return T.length>0?this.driver.animate(I.element,T,I.duration,I.delay,I.easing,V):new Ft.sf(I.duration,I.delay)}}class sr{constructor(I,T,V){this.namespaceId=I,this.triggerName=T,this.element=V,this._player=new Ft.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(I){this._containsRealPlayer||(this._player=I,this._queuedCallbacks.forEach((T,V)=>{T.forEach(X=>Yt(I,V,void 0,X))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(I.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(I){this.totalTime=I}syncPlayerEvents(I){const T=this._player;T.triggerCallback&&I.onStart(()=>T.triggerCallback("start")),I.onDone(()=>this.finish()),I.onDestroy(()=>this.destroy())}_queueEvent(I,T){Nr(this._queuedCallbacks,I,[]).push(T)}onDone(I){this.queued&&this._queueEvent("done",I),this._player.onDone(I)}onStart(I){this.queued&&this._queueEvent("start",I),this._player.onStart(I)}onDestroy(I){this.queued&&this._queueEvent("destroy",I),this._player.onDestroy(I)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(I){this.queued||this._player.setPosition(I)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(I){const T=this._player;T.triggerCallback&&T.triggerCallback(I)}}function wo(J){return J&&1===J.nodeType}function z(J,I){const T=J.style.display;return J.style.display=I??"none",T}function q(J,I,T,V,X){const fe=[];T.forEach(ut=>fe.push(z(ut)));const Pe=[];V.forEach((ut,Pt)=>{const nn=new Map;ut.forEach(gn=>{const ur=I.computeStyle(Pt,gn,X);nn.set(gn,ur),(!ur||0==ur.length)&&(Pt[Ti]=Yo,Pe.push(Pt))}),J.set(Pt,nn)});let je=0;return T.forEach(ut=>z(ut,fe[je++])),Pe}function O(J,I){const T=new Map;if(J.forEach(je=>T.set(je,[])),0==I.length)return T;const X=new Set(I),fe=new Map;function Pe(je){if(!je)return 1;let ut=fe.get(je);if(ut)return ut;const Pt=je.parentNode;return ut=T.has(Pt)?Pt:X.has(Pt)?1:Pe(Pt),fe.set(je,ut),ut}return I.forEach(je=>{const ut=Pe(je);1!==ut&&T.get(ut).push(je)}),T}function ee(J,I){J.classList?.add(I)}function be(J,I){J.classList?.remove(I)}function un(J,I,T){Or(T).onDone(()=>J.processLeaveNode(I))}function ys(J,I){for(let T=0;T<J.length;T++){const V=J[T];V instanceof Ft.ui?ys(V.players,I):I.push(V)}}function fi(J,I,T){const V=T.get(J);if(!V)return!1;let X=I.get(J);return X?V.forEach(fe=>X.add(fe)):I.set(J,V),T.delete(J),!0}class Ts{constructor(I,T,V,X){this._driver=T,this._normalizer=V,this._triggerCache={},this.onRemovalComplete=(fe,Pe)=>{},this._transitionEngine=new co(I.body,T,V,X),this._timelineEngine=new Hi(I.body,T,V),this._transitionEngine.onRemovalComplete=(fe,Pe)=>this.onRemovalComplete(fe,Pe)}registerTrigger(I,T,V,X,fe){const Pe=I+"-"+X;let je=this._triggerCache[Pe];if(!je){const ut=[],nn=Eo(this._driver,fe,ut,[]);if(ut.length)throw function Qn(J,I){return new U.wOt(3404,!1)}();je=function Uo(J,I,T){return new ns(J,I,T)}(X,nn,this._normalizer),this._triggerCache[Pe]=je}this._transitionEngine.registerTrigger(T,X,je)}register(I,T){this._transitionEngine.register(I,T)}destroy(I,T){this._transitionEngine.destroy(I,T)}onInsert(I,T,V,X){this._transitionEngine.insertNode(I,T,V,X)}onRemove(I,T,V){this._transitionEngine.removeNode(I,T,V)}disableAnimations(I,T){this._transitionEngine.markElementAsDisabled(I,T)}process(I,T,V,X){if("@"==V.charAt(0)){const[fe,Pe]=xe(V);this._timelineEngine.command(fe,T,Pe,X)}else this._transitionEngine.trigger(I,T,V,X)}listen(I,T,V,X,fe){if("@"==V.charAt(0)){const[Pe,je]=xe(V);return this._timelineEngine.listen(Pe,T,je,fe)}return this._transitionEngine.listen(I,T,V,X,fe)}flush(I=-1){this._transitionEngine.flush(I)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(I){this._transitionEngine.afterFlushAnimationsDone(I)}}class Bo{static#e=this.initialStylesByElement=new WeakMap;constructor(I,T,V){this._element=I,this._startStyles=T,this._endStyles=V,this._state=0;let X=Bo.initialStylesByElement.get(I);X||Bo.initialStylesByElement.set(I,X=new Map),this._initialStyles=X}start(){this._state<1&&(this._startStyles&&ve(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ve(this._element,this._initialStyles),this._endStyles&&(ve(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Bo.initialStylesByElement.delete(this._element),this._startStyles&&(Ie(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ie(this._element,this._endStyles),this._endStyles=null),ve(this._element,this._initialStyles),this._state=3)}}function ha(J){let I=null;return J.forEach((T,V)=>{(function ei(J){return"display"===J||"position"===J})(V)&&(I=I||new Map,I.set(V,T))}),I}class Da{constructor(I,T,V,X){this.element=I,this.keyframes=T,this.options=V,this._specialStyles=X,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=V.duration,this._delay=V.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(I=>I()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const I=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,I,this.options),this._finalKeyframe=I.length?I[I.length-1]:new Map;const T=()=>this._onFinish();this.domPlayer.addEventListener("finish",T),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",T)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(I){const T=[];return I.forEach(V=>{T.push(Object.fromEntries(V))}),T}_triggerWebAnimation(I,T,V){return I.animate(this._convertKeyframesToObject(T),V)}onStart(I){this._originalOnStartFns.push(I),this._onStartFns.push(I)}onDone(I){this._originalOnDoneFns.push(I),this._onDoneFns.push(I)}onDestroy(I){this._onDestroyFns.push(I)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(I=>I()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(I=>I()),this._onDestroyFns=[])}setPosition(I){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=I*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const I=new Map;this.hasStarted()&&this._finalKeyframe.forEach((V,X)=>{"offset"!==X&&I.set(X,this._finished?V:Mi(this.element,X))}),this.currentSnapshot=I}triggerCallback(I){const T="start"===I?this._onStartFns:this._onDoneFns;T.forEach(V=>V()),T.length=0}}class fa{validateStyleProperty(I){return!0}validateAnimatableStyleProperty(I){return!0}matchesElement(I,T){return!1}containsElement(I,T){return me(I,T)}getParentElement(I){return we(I)}query(I,T,V){return Et(I,T,V)}computeStyle(I,T,V){return Mi(I,T)}animate(I,T,V,X,fe,Pe=[]){const ut={duration:V,delay:X,fill:0==X?"both":"forwards"};fe&&(ut.easing=fe);const Pt=new Map,nn=Pe.filter(er=>er instanceof Da);(function _r(J,I){return 0===J||0===I})(V,X)&&nn.forEach(er=>{er.currentSnapshot.forEach((Dn,Wn)=>Pt.set(Wn,Dn))});let gn=function sn(J){return J.length?J[0]instanceof Map?J:J.map(I=>new Map(Object.entries(I))):[]}(T).map(er=>new Map(er));gn=function ui(J,I,T){if(T.size&&I.length){let V=I[0],X=[];if(T.forEach((fe,Pe)=>{V.has(Pe)||X.push(Pe),V.set(Pe,fe)}),X.length)for(let fe=1;fe<I.length;fe++){let Pe=I[fe];X.forEach(je=>Pe.set(je,Mi(J,je)))}}return I}(I,gn,Pt);const ur=function Ta(J,I){let T=null,V=null;return Array.isArray(I)&&I.length?(T=ha(I[0]),I.length>1&&(V=ha(I[I.length-1]))):I instanceof Map&&(T=ha(I)),T||V?new Bo(J,T,V):null}(I,gn);return new Da(I,gn,ut,ur)}}const Ua="@.disabled";class pa{constructor(I,T,V,X){this.namespaceId=I,this.delegate=T,this.engine=V,this._onDestroy=X,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(I){this.delegate.destroyNode?.(I)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(I,T){return this.delegate.createElement(I,T)}createComment(I){return this.delegate.createComment(I)}createText(I){return this.delegate.createText(I)}appendChild(I,T){this.delegate.appendChild(I,T),this.engine.onInsert(this.namespaceId,T,I,!1)}insertBefore(I,T,V,X=!0){this.delegate.insertBefore(I,T,V),this.engine.onInsert(this.namespaceId,T,I,X)}removeChild(I,T,V){this.engine.onRemove(this.namespaceId,T,this.delegate)}selectRootElement(I,T){return this.delegate.selectRootElement(I,T)}parentNode(I){return this.delegate.parentNode(I)}nextSibling(I){return this.delegate.nextSibling(I)}setAttribute(I,T,V,X){this.delegate.setAttribute(I,T,V,X)}removeAttribute(I,T,V){this.delegate.removeAttribute(I,T,V)}addClass(I,T){this.delegate.addClass(I,T)}removeClass(I,T){this.delegate.removeClass(I,T)}setStyle(I,T,V,X){this.delegate.setStyle(I,T,V,X)}removeStyle(I,T,V){this.delegate.removeStyle(I,T,V)}setProperty(I,T,V){"@"==T.charAt(0)&&T==Ua?this.disableAnimations(I,!!V):this.delegate.setProperty(I,T,V)}setValue(I,T){this.delegate.setValue(I,T)}listen(I,T,V){return this.delegate.listen(I,T,V)}disableAnimations(I,T){this.engine.disableAnimations(I,T)}}class jo extends pa{constructor(I,T,V,X,fe){super(T,V,X,fe),this.factory=I,this.namespaceId=T}setProperty(I,T,V){"@"==T.charAt(0)?"."==T.charAt(1)&&T==Ua?this.disableAnimations(I,V=void 0===V||!!V):this.engine.process(this.namespaceId,I,T.slice(1),V):this.delegate.setProperty(I,T,V)}listen(I,T,V){if("@"==T.charAt(0)){const X=function To(J){switch(J){case"body":return document.body;case"document":return document;case"window":return window;default:return J}}(I);let fe=T.slice(1),Pe="";return"@"!=fe.charAt(0)&&([fe,Pe]=function Aa(J){const I=J.indexOf(".");return[J.substring(0,I),J.slice(I+1)]}(fe)),this.engine.listen(this.namespaceId,X,fe,Pe,je=>{this.factory.scheduleListenerCallback(je._data||-1,V,je)})}return this.delegate.listen(I,T,V)}}class Jo{constructor(I,T,V){this.delegate=I,this.engine=T,this._zone=V,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,T.onRemovalComplete=(X,fe)=>{const Pe=fe?.parentNode(X);Pe&&fe.removeChild(Pe,X)}}createRenderer(I,T){const X=this.delegate.createRenderer(I,T);if(!I||!T?.data?.animation){const Pt=this._rendererCache;let nn=Pt.get(X);return nn||(nn=new pa("",X,this.engine,()=>Pt.delete(X)),Pt.set(X,nn)),nn}const fe=T.id,Pe=T.id+"-"+this._currentId;this._currentId++,this.engine.register(Pe,I);const je=Pt=>{Array.isArray(Pt)?Pt.forEach(je):this.engine.registerTrigger(fe,Pe,I,Pt.name,Pt)};return T.data.animation.forEach(je),new jo(this,Pe,X,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(I,T,V){if(I>=0&&I<this._microtaskId)return void this._zone.run(()=>T(V));const X=this._animationCallbacksBuffer;0==X.length&&queueMicrotask(()=>{this._zone.run(()=>{X.forEach(fe=>{const[Pe,je]=fe;Pe(je)}),this._animationCallbacksBuffer=[]})}),X.push([T,V])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const ii=[{provide:zn,useFactory:function cr(){return new Ir}},{provide:Ts,useClass:(()=>{class J extends Ts{constructor(T,V,X){super(T,V,X,(0,U.WQX)(U.An2,{optional:!0}))}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(V){return new(V||J)(U.KVO(C.qQ),U.KVO(Bn),U.KVO(zn))};static#t=this.\u0275prov=U.jDH({token:J,factory:J.\u0275fac})}return J})()},{provide:U._9s,useFactory:function Wr(J,I,T){return new Jo(J,I,T)},deps:[_.B7,Ts,U.SKi]}],Ni=[{provide:Bn,useFactory:()=>new fa},{provide:U.bc$,useValue:"BrowserAnimations"},...ii],xi=[{provide:Bn,useClass:mn},{provide:U.bc$,useValue:"NoopAnimations"},...ii];let ga=(()=>{class J{static withConfig(T){return{ngModule:J,providers:T.disableAnimations?xi:Ni}}static#e=this.\u0275fac=function(V){return new(V||J)};static#t=this.\u0275mod=U.$C({type:J});static#n=this.\u0275inj=U.G2t({providers:Ni,imports:[_.Bb]})}return J})();var Tc=k(8964);let Ao=(()=>{class J{static#e=this.\u0275fac=function(V){return new(V||J)};static#t=this.\u0275mod=U.$C({type:J,bootstrap:[Ue]});static#n=this.\u0275inj=U.G2t({imports:[C.MD,_.Bb,de,Mt.LoginAndRegistrationModule,pn.ProductPageModule,Pn.ProfileModuleModule,Fn.SingleProductPageModule,ga,On.K,Tc.x]})}return J})();_.sG().bootstrapModule(Ao).catch(J=>console.error(J))},4412:(en,Qe,k)=>{k.d(Qe,{t:()=>L});var _=k(1413);class L extends _.B{constructor(C){super(),this._value=C}get value(){return this.getValue()}_subscribe(C){const se=super._subscribe(C);return!se.closed&&C.next(this._value),se}getValue(){const{hasError:C,thrownError:se,_value:Me}=this;if(C)throw se;return this._throwIfClosed(),Me}next(C){super.next(this._value=C)}}},1985:(en,Qe,k)=>{k.d(Qe,{c:()=>Le});var _=k(7707),L=k(8359),M=k(3494),C=k(1203),se=k(1026),Me=k(8071),U=k(9786);let Le=(()=>{class He{constructor(Ae){Ae&&(this._subscribe=Ae)}lift(Ae){const Fe=new He;return Fe.source=this,Fe.operator=Ae,Fe}subscribe(Ae,Fe,wt){const pt=function ye(He){return He&&He instanceof _.vU||function Ee(He){return He&&(0,Me.T)(He.next)&&(0,Me.T)(He.error)&&(0,Me.T)(He.complete)}(He)&&(0,L.Uv)(He)}(Ae)?Ae:new _.Ms(Ae,Fe,wt);return(0,U.Y)(()=>{const{operator:Tt,source:At}=this;pt.add(Tt?Tt.call(pt,At):At?this._subscribe(pt):this._trySubscribe(pt))}),pt}_trySubscribe(Ae){try{return this._subscribe(Ae)}catch(Fe){Ae.error(Fe)}}forEach(Ae,Fe){return new(Fe=$e(Fe))((wt,pt)=>{const Tt=new _.Ms({next:At=>{try{Ae(At)}catch(mt){pt(mt),Tt.unsubscribe()}},error:pt,complete:wt});this.subscribe(Tt)})}_subscribe(Ae){var Fe;return null===(Fe=this.source)||void 0===Fe?void 0:Fe.subscribe(Ae)}[M.s](){return this}pipe(...Ae){return(0,C.m)(Ae)(this)}toPromise(Ae){return new(Ae=$e(Ae))((Fe,wt)=>{let pt;this.subscribe(Tt=>pt=Tt,Tt=>wt(Tt),()=>Fe(pt))})}}return He.create=Ct=>new He(Ct),He})();function $e(He){var Ct;return null!==(Ct=He??se.$.Promise)&&void 0!==Ct?Ct:Promise}},1413:(en,Qe,k)=>{k.d(Qe,{B:()=>U});var _=k(1985),L=k(8359);const C=(0,k(1853).L)($e=>function(){$e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=k(7908),Me=k(9786);let U=(()=>{class $e extends _.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ye){const He=new Le(this,this);return He.operator=ye,He}_throwIfClosed(){if(this.closed)throw new C}next(ye){(0,Me.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const He of this.currentObservers)He.next(ye)}})}error(ye){(0,Me.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ye;const{observers:He}=this;for(;He.length;)He.shift().error(ye)}})}complete(){(0,Me.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ye}=this;for(;ye.length;)ye.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ye;return(null===(ye=this.observers)||void 0===ye?void 0:ye.length)>0}_trySubscribe(ye){return this._throwIfClosed(),super._trySubscribe(ye)}_subscribe(ye){return this._throwIfClosed(),this._checkFinalizedStatuses(ye),this._innerSubscribe(ye)}_innerSubscribe(ye){const{hasError:He,isStopped:Ct,observers:Ae}=this;return He||Ct?L.Kn:(this.currentObservers=null,Ae.push(ye),new L.yU(()=>{this.currentObservers=null,(0,se.o)(Ae,ye)}))}_checkFinalizedStatuses(ye){const{hasError:He,thrownError:Ct,isStopped:Ae}=this;He?ye.error(Ct):Ae&&ye.complete()}asObservable(){const ye=new _.c;return ye.source=this,ye}}return $e.create=(Ee,ye)=>new Le(Ee,ye),$e})();class Le extends U{constructor(Ee,ye){super(),this.destination=Ee,this.source=ye}next(Ee){var ye,He;null===(He=null===(ye=this.destination)||void 0===ye?void 0:ye.next)||void 0===He||He.call(ye,Ee)}error(Ee){var ye,He;null===(He=null===(ye=this.destination)||void 0===ye?void 0:ye.error)||void 0===He||He.call(ye,Ee)}complete(){var Ee,ye;null===(ye=null===(Ee=this.destination)||void 0===Ee?void 0:Ee.complete)||void 0===ye||ye.call(Ee)}_subscribe(Ee){var ye,He;return null!==(He=null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(Ee))&&void 0!==He?He:L.Kn}}},7707:(en,Qe,k)=>{k.d(Qe,{Ms:()=>wt,vU:()=>He});var _=k(8071),L=k(8359),M=k(1026),C=k(5334),se=k(5343);const Me=$e("C",void 0,void 0);function $e(ce,ie,ue){return{kind:ce,value:ie,error:ue}}var Ee=k(9270),ye=k(9786);class He extends L.yU{constructor(ie){super(),this.isStopped=!1,ie?(this.destination=ie,(0,L.Uv)(ie)&&ie.add(this)):this.destination=mt}static create(ie,ue,Ce){return new wt(ie,ue,Ce)}next(ie){this.isStopped?At(function Le(ce){return $e("N",ce,void 0)}(ie),this):this._next(ie)}error(ie){this.isStopped?At(function U(ce){return $e("E",void 0,ce)}(ie),this):(this.isStopped=!0,this._error(ie))}complete(){this.isStopped?At(Me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ie){this.destination.next(ie)}_error(ie){try{this.destination.error(ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ct=Function.prototype.bind;function Ae(ce,ie){return Ct.call(ce,ie)}class Fe{constructor(ie){this.partialObserver=ie}next(ie){const{partialObserver:ue}=this;if(ue.next)try{ue.next(ie)}catch(Ce){pt(Ce)}}error(ie){const{partialObserver:ue}=this;if(ue.error)try{ue.error(ie)}catch(Ce){pt(Ce)}else pt(ie)}complete(){const{partialObserver:ie}=this;if(ie.complete)try{ie.complete()}catch(ue){pt(ue)}}}class wt extends He{constructor(ie,ue,Ce){let qe;if(super(),(0,_.T)(ie)||!ie)qe={next:ie??void 0,error:ue??void 0,complete:Ce??void 0};else{let ze;this&&M.$.useDeprecatedNextContext?(ze=Object.create(ie),ze.unsubscribe=()=>this.unsubscribe(),qe={next:ie.next&&Ae(ie.next,ze),error:ie.error&&Ae(ie.error,ze),complete:ie.complete&&Ae(ie.complete,ze)}):qe=ie}this.destination=new Fe(qe)}}function pt(ce){M.$.useDeprecatedSynchronousErrorHandling?(0,ye.l)(ce):(0,C.m)(ce)}function At(ce,ie){const{onStoppedNotification:ue}=M.$;ue&&Ee.f.setTimeout(()=>ue(ce,ie))}const mt={closed:!0,next:se.l,error:function Tt(ce){throw ce},complete:se.l}},8359:(en,Qe,k)=>{k.d(Qe,{Kn:()=>Me,yU:()=>se,Uv:()=>U});var _=k(8071);const M=(0,k(1853).L)($e=>function(ye){$e(this),this.message=ye?`${ye.length} errors occurred during unsubscription:\n${ye.map((He,Ct)=>`${Ct+1}) ${He.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ye});var C=k(7908);class se{constructor(Ee){this.initialTeardown=Ee,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ee;if(!this.closed){this.closed=!0;const{_parentage:ye}=this;if(ye)if(this._parentage=null,Array.isArray(ye))for(const Ae of ye)Ae.remove(this);else ye.remove(this);const{initialTeardown:He}=this;if((0,_.T)(He))try{He()}catch(Ae){Ee=Ae instanceof M?Ae.errors:[Ae]}const{_finalizers:Ct}=this;if(Ct){this._finalizers=null;for(const Ae of Ct)try{Le(Ae)}catch(Fe){Ee=Ee??[],Fe instanceof M?Ee=[...Ee,...Fe.errors]:Ee.push(Fe)}}if(Ee)throw new M(Ee)}}add(Ee){var ye;if(Ee&&Ee!==this)if(this.closed)Le(Ee);else{if(Ee instanceof se){if(Ee.closed||Ee._hasParent(this))return;Ee._addParent(this)}(this._finalizers=null!==(ye=this._finalizers)&&void 0!==ye?ye:[]).push(Ee)}}_hasParent(Ee){const{_parentage:ye}=this;return ye===Ee||Array.isArray(ye)&&ye.includes(Ee)}_addParent(Ee){const{_parentage:ye}=this;this._parentage=Array.isArray(ye)?(ye.push(Ee),ye):ye?[ye,Ee]:Ee}_removeParent(Ee){const{_parentage:ye}=this;ye===Ee?this._parentage=null:Array.isArray(ye)&&(0,C.o)(ye,Ee)}remove(Ee){const{_finalizers:ye}=this;ye&&(0,C.o)(ye,Ee),Ee instanceof se&&Ee._removeParent(this)}}se.EMPTY=(()=>{const $e=new se;return $e.closed=!0,$e})();const Me=se.EMPTY;function U($e){return $e instanceof se||$e&&"closed"in $e&&(0,_.T)($e.remove)&&(0,_.T)($e.add)&&(0,_.T)($e.unsubscribe)}function Le($e){(0,_.T)($e)?$e():$e.unsubscribe()}},1026:(en,Qe,k)=>{k.d(Qe,{$:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(en,Qe,k)=>{k.d(Qe,{x:()=>se});var _=k(6365),M=k(9326),C=k(8455);function se(...Me){return function L(){return(0,_.U)(1)}()((0,C.H)(Me,(0,M.lI)(Me)))}},983:(en,Qe,k)=>{k.d(Qe,{w:()=>L});const L=new(k(1985).c)(se=>se.complete())},7468:(en,Qe,k)=>{k.d(Qe,{p:()=>Le});var _=k(1985),L=k(3073),M=k(8750),C=k(9326),se=k(4360),Me=k(6450),U=k(8496);function Le(...$e){const Ee=(0,C.ms)($e),{args:ye,keys:He}=(0,L.D)($e),Ct=new _.c(Ae=>{const{length:Fe}=ye;if(!Fe)return void Ae.complete();const wt=new Array(Fe);let pt=Fe,Tt=Fe;for(let At=0;At<Fe;At++){let mt=!1;(0,M.Tg)(ye[At]).subscribe((0,se._)(Ae,ce=>{mt||(mt=!0,Tt--),wt[At]=ce},()=>pt--,void 0,()=>{(!pt||!mt)&&(Tt||Ae.next(He?(0,U.e)(He,wt):wt),Ae.complete())}))}});return Ee?Ct.pipe((0,Me.I)(Ee)):Ct}},8455:(en,Qe,k)=>{k.d(Qe,{H:()=>ie});var _=k(8750),L=k(941),M=k(6745),Me=k(1985),Le=k(4761),$e=k(8071),Ee=k(5225);function He(ue,Ce){if(!ue)throw new Error("Iterable cannot be null");return new Me.c(qe=>{(0,Ee.N)(qe,Ce,()=>{const ze=ue[Symbol.asyncIterator]();(0,Ee.N)(qe,Ce,()=>{ze.next().then(de=>{de.done?qe.complete():qe.next(de.value)})},0,!0)})})}var Ct=k(5055),Ae=k(9858),Fe=k(7441),wt=k(5397),pt=k(7953),Tt=k(591),At=k(5196);function ie(ue,Ce){return Ce?function ce(ue,Ce){if(null!=ue){if((0,Ct.l)(ue))return function C(ue,Ce){return(0,_.Tg)(ue).pipe((0,M._)(Ce),(0,L.Q)(Ce))}(ue,Ce);if((0,Fe.X)(ue))return function U(ue,Ce){return new Me.c(qe=>{let ze=0;return Ce.schedule(function(){ze===ue.length?qe.complete():(qe.next(ue[ze++]),qe.closed||this.schedule())})})}(ue,Ce);if((0,Ae.y)(ue))return function se(ue,Ce){return(0,_.Tg)(ue).pipe((0,M._)(Ce),(0,L.Q)(Ce))}(ue,Ce);if((0,pt.T)(ue))return He(ue,Ce);if((0,wt.x)(ue))return function ye(ue,Ce){return new Me.c(qe=>{let ze;return(0,Ee.N)(qe,Ce,()=>{ze=ue[Le.l](),(0,Ee.N)(qe,Ce,()=>{let de,Ue;try{({value:de,done:Ue}=ze.next())}catch(Mt){return void qe.error(Mt)}Ue?qe.complete():qe.next(de)},0,!0)}),()=>(0,$e.T)(ze?.return)&&ze.return()})}(ue,Ce);if((0,At.U)(ue))return function mt(ue,Ce){return He((0,At.C)(ue),Ce)}(ue,Ce)}throw(0,Tt.L)(ue)}(ue,Ce):(0,_.Tg)(ue)}},8750:(en,Qe,k)=>{k.d(Qe,{Tg:()=>Ct});var _=k(1635),L=k(7441),M=k(9858),C=k(1985),se=k(5055),Me=k(7953),U=k(591),Le=k(5397),$e=k(5196),Ee=k(8071),ye=k(5334),He=k(3494);function Ct(ce){if(ce instanceof C.c)return ce;if(null!=ce){if((0,se.l)(ce))return function Ae(ce){return new C.c(ie=>{const ue=ce[He.s]();if((0,Ee.T)(ue.subscribe))return ue.subscribe(ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ce);if((0,L.X)(ce))return function Fe(ce){return new C.c(ie=>{for(let ue=0;ue<ce.length&&!ie.closed;ue++)ie.next(ce[ue]);ie.complete()})}(ce);if((0,M.y)(ce))return function wt(ce){return new C.c(ie=>{ce.then(ue=>{ie.closed||(ie.next(ue),ie.complete())},ue=>ie.error(ue)).then(null,ye.m)})}(ce);if((0,Me.T)(ce))return Tt(ce);if((0,Le.x)(ce))return function pt(ce){return new C.c(ie=>{for(const ue of ce)if(ie.next(ue),ie.closed)return;ie.complete()})}(ce);if((0,$e.U)(ce))return function At(ce){return Tt((0,$e.C)(ce))}(ce)}throw(0,U.L)(ce)}function Tt(ce){return new C.c(ie=>{(function mt(ce,ie){var ue,Ce,qe,ze;return(0,_.sH)(this,void 0,void 0,function*(){try{for(ue=(0,_.xN)(ce);!(Ce=yield ue.next()).done;)if(ie.next(Ce.value),ie.closed)return}catch(de){qe={error:de}}finally{try{Ce&&!Ce.done&&(ze=ue.return)&&(yield ze.call(ue))}finally{if(qe)throw qe.error}}ie.complete()})})(ce,ie).catch(ue=>ie.error(ue))})}},7673:(en,Qe,k)=>{k.d(Qe,{of:()=>M});var _=k(9326),L=k(8455);function M(...C){const se=(0,_.lI)(C);return(0,L.H)(C,se)}},4360:(en,Qe,k)=>{k.d(Qe,{_:()=>L});var _=k(7707);function L(C,se,Me,U,Le){return new M(C,se,Me,U,Le)}class M extends _.vU{constructor(se,Me,U,Le,$e,Ee){super(se),this.onFinalize=$e,this.shouldUnsubscribe=Ee,this._next=Me?function(ye){try{Me(ye)}catch(He){se.error(He)}}:super._next,this._error=Le?function(ye){try{Le(ye)}catch(He){se.error(He)}finally{this.unsubscribe()}}:super._error,this._complete=U?function(){try{U()}catch(ye){se.error(ye)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Me}=this;super.unsubscribe(),!Me&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},9437:(en,Qe,k)=>{k.d(Qe,{W:()=>C});var _=k(8750),L=k(4360),M=k(9974);function C(se){return(0,M.N)((Me,U)=>{let Ee,Le=null,$e=!1;Le=Me.subscribe((0,L._)(U,void 0,void 0,ye=>{Ee=(0,_.Tg)(se(ye,C(se)(Me))),Le?(Le.unsubscribe(),Le=null,Ee.subscribe(U)):$e=!0})),$e&&(Le.unsubscribe(),Le=null,Ee.subscribe(U))})}},274:(en,Qe,k)=>{k.d(Qe,{H:()=>M});var _=k(1397),L=k(8071);function M(C,se){return(0,L.T)(se)?(0,_.Z)(C,se,1):(0,_.Z)(C,1)}},9901:(en,Qe,k)=>{k.d(Qe,{U:()=>M});var _=k(9974),L=k(4360);function M(C){return(0,_.N)((se,Me)=>{let U=!1;se.subscribe((0,L._)(Me,Le=>{U=!0,Me.next(Le)},()=>{U||Me.next(C),Me.complete()}))})}},5964:(en,Qe,k)=>{k.d(Qe,{p:()=>M});var _=k(9974),L=k(4360);function M(C,se){return(0,_.N)((Me,U)=>{let Le=0;Me.subscribe((0,L._)(U,$e=>C.call(se,$e,Le++)&&U.next($e)))})}},980:(en,Qe,k)=>{k.d(Qe,{j:()=>L});var _=k(9974);function L(M){return(0,_.N)((C,se)=>{try{C.subscribe(se)}finally{se.add(M)}})}},1594:(en,Qe,k)=>{k.d(Qe,{$:()=>U});var _=k(9350),L=k(5964),M=k(6697),C=k(9901),se=k(3774),Me=k(3669);function U(Le,$e){const Ee=arguments.length>=2;return ye=>ye.pipe(Le?(0,L.p)((He,Ct)=>Le(He,Ct,ye)):Me.D,(0,M.s)(1),Ee?(0,C.U)($e):(0,se.v)(()=>new _.G))}},6354:(en,Qe,k)=>{k.d(Qe,{T:()=>M});var _=k(9974),L=k(4360);function M(C,se){return(0,_.N)((Me,U)=>{let Le=0;Me.subscribe((0,L._)(U,$e=>{U.next(C.call(se,$e,Le++))}))})}},6365:(en,Qe,k)=>{k.d(Qe,{U:()=>M});var _=k(1397),L=k(3669);function M(C=1/0){return(0,_.Z)(L.D,C)}},1397:(en,Qe,k)=>{k.d(Qe,{Z:()=>Le});var _=k(6354),L=k(8750),M=k(9974),C=k(5225),se=k(4360),U=k(8071);function Le($e,Ee,ye=1/0){return(0,U.T)(Ee)?Le((He,Ct)=>(0,_.T)((Ae,Fe)=>Ee(He,Ae,Ct,Fe))((0,L.Tg)($e(He,Ct))),ye):("number"==typeof Ee&&(ye=Ee),(0,M.N)((He,Ct)=>function Me($e,Ee,ye,He,Ct,Ae,Fe,wt){const pt=[];let Tt=0,At=0,mt=!1;const ce=()=>{mt&&!pt.length&&!Tt&&Ee.complete()},ie=Ce=>Tt<He?ue(Ce):pt.push(Ce),ue=Ce=>{Ae&&Ee.next(Ce),Tt++;let qe=!1;(0,L.Tg)(ye(Ce,At++)).subscribe((0,se._)(Ee,ze=>{Ct?.(ze),Ae?ie(ze):Ee.next(ze)},()=>{qe=!0},void 0,()=>{if(qe)try{for(Tt--;pt.length&&Tt<He;){const ze=pt.shift();Fe?(0,C.N)(Ee,Fe,()=>ue(ze)):ue(ze)}ce()}catch(ze){Ee.error(ze)}}))};return $e.subscribe((0,se._)(Ee,ie,()=>{mt=!0,ce()})),()=>{wt?.()}}(He,Ct,$e,ye)))}},941:(en,Qe,k)=>{k.d(Qe,{Q:()=>C});var _=k(5225),L=k(9974),M=k(4360);function C(se,Me=0){return(0,L.N)((U,Le)=>{U.subscribe((0,M._)(Le,$e=>(0,_.N)(Le,se,()=>Le.next($e),Me),()=>(0,_.N)(Le,se,()=>Le.complete(),Me),$e=>(0,_.N)(Le,se,()=>Le.error($e),Me)))})}},2816:(en,Qe,k)=>{k.d(Qe,{S:()=>C});var _=k(9974),L=k(4360);function C(se,Me){return(0,_.N)(function M(se,Me,U,Le,$e){return(Ee,ye)=>{let He=U,Ct=Me,Ae=0;Ee.subscribe((0,L._)(ye,Fe=>{const wt=Ae++;Ct=He?se(Ct,Fe,wt):(He=!0,Fe),Le&&ye.next(Ct)},$e&&(()=>{He&&ye.next(Ct),ye.complete()})))}}(se,Me,arguments.length>=2,!0))}},9172:(en,Qe,k)=>{k.d(Qe,{Z:()=>C});var _=k(8793),L=k(9326),M=k(9974);function C(...se){const Me=(0,L.lI)(se);return(0,M.N)((U,Le)=>{(Me?(0,_.x)(se,U,Me):(0,_.x)(se,U)).subscribe(Le)})}},6745:(en,Qe,k)=>{k.d(Qe,{_:()=>L});var _=k(9974);function L(M,C=0){return(0,_.N)((se,Me)=>{Me.add(M.schedule(()=>se.subscribe(Me),C))})}},5558:(en,Qe,k)=>{k.d(Qe,{n:()=>C});var _=k(8750),L=k(9974),M=k(4360);function C(se,Me){return(0,L.N)((U,Le)=>{let $e=null,Ee=0,ye=!1;const He=()=>ye&&!$e&&Le.complete();U.subscribe((0,M._)(Le,Ct=>{$e?.unsubscribe();let Ae=0;const Fe=Ee++;(0,_.Tg)(se(Ct,Fe)).subscribe($e=(0,M._)(Le,wt=>Le.next(Me?Me(Ct,wt,Fe,Ae++):wt),()=>{$e=null,He()}))},()=>{ye=!0,He()}))})}},6697:(en,Qe,k)=>{k.d(Qe,{s:()=>C});var _=k(983),L=k(9974),M=k(4360);function C(se){return se<=0?()=>_.w:(0,L.N)((Me,U)=>{let Le=0;Me.subscribe((0,M._)(U,$e=>{++Le<=se&&(U.next($e),se<=Le&&U.complete())}))})}},8141:(en,Qe,k)=>{k.d(Qe,{M:()=>se});var _=k(8071),L=k(9974),M=k(4360),C=k(3669);function se(Me,U,Le){const $e=(0,_.T)(Me)||U||Le?{next:Me,error:U,complete:Le}:Me;return $e?(0,L.N)((Ee,ye)=>{var He;null===(He=$e.subscribe)||void 0===He||He.call($e);let Ct=!0;Ee.subscribe((0,M._)(ye,Ae=>{var Fe;null===(Fe=$e.next)||void 0===Fe||Fe.call($e,Ae),ye.next(Ae)},()=>{var Ae;Ct=!1,null===(Ae=$e.complete)||void 0===Ae||Ae.call($e),ye.complete()},Ae=>{var Fe;Ct=!1,null===(Fe=$e.error)||void 0===Fe||Fe.call($e,Ae),ye.error(Ae)},()=>{var Ae,Fe;Ct&&(null===(Ae=$e.unsubscribe)||void 0===Ae||Ae.call($e)),null===(Fe=$e.finalize)||void 0===Fe||Fe.call($e)}))}):C.D}},3774:(en,Qe,k)=>{k.d(Qe,{v:()=>C});var _=k(9350),L=k(9974),M=k(4360);function C(Me=se){return(0,L.N)((U,Le)=>{let $e=!1;U.subscribe((0,M._)(Le,Ee=>{$e=!0,Le.next(Ee)},()=>$e?Le.complete():Le.error(Me())))})}function se(){return new _.G}},6780:(en,Qe,k)=>{k.d(Qe,{R:()=>se});var _=k(8359);class L extends _.yU{constructor(U,Le){super()}schedule(U,Le=0){return this}}const M={setInterval(Me,U,...Le){const{delegate:$e}=M;return $e?.setInterval?$e.setInterval(Me,U,...Le):setInterval(Me,U,...Le)},clearInterval(Me){const{delegate:U}=M;return(U?.clearInterval||clearInterval)(Me)},delegate:void 0};var C=k(7908);class se extends L{constructor(U,Le){super(U,Le),this.scheduler=U,this.work=Le,this.pending=!1}schedule(U,Le=0){var $e;if(this.closed)return this;this.state=U;const Ee=this.id,ye=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(ye,Ee,Le)),this.pending=!0,this.delay=Le,this.id=null!==($e=this.id)&&void 0!==$e?$e:this.requestAsyncId(ye,this.id,Le),this}requestAsyncId(U,Le,$e=0){return M.setInterval(U.flush.bind(U,this),$e)}recycleAsyncId(U,Le,$e=0){if(null!=$e&&this.delay===$e&&!1===this.pending)return Le;null!=Le&&M.clearInterval(Le)}execute(U,Le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const $e=this._execute(U,Le);if($e)return $e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(U,Le){let Ee,$e=!1;try{this.work(U)}catch(ye){$e=!0,Ee=ye||new Error("Scheduled action threw falsy error")}if($e)return this.unsubscribe(),Ee}unsubscribe(){if(!this.closed){const{id:U,scheduler:Le}=this,{actions:$e}=Le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,C.o)($e,this),null!=U&&(this.id=this.recycleAsyncId(Le,U,null)),this.delay=null,super.unsubscribe()}}}},9687:(en,Qe,k)=>{k.d(Qe,{q:()=>M});var _=k(6129);class L{constructor(se,Me=L.now){this.schedulerActionCtor=se,this.now=Me}schedule(se,Me=0,U){return new this.schedulerActionCtor(this,se).schedule(U,Me)}}L.now=_.U.now;class M extends L{constructor(se,Me=L.now){super(se,Me),this.actions=[],this._active=!1}flush(se){const{actions:Me}=this;if(this._active)return void Me.push(se);let U;this._active=!0;do{if(U=se.execute(se.state,se.delay))break}while(se=Me.shift());if(this._active=!1,U){for(;se=Me.shift();)se.unsubscribe();throw U}}}},3236:(en,Qe,k)=>{k.d(Qe,{E:()=>M,b:()=>C});var _=k(6780);const M=new(k(9687).q)(_.R),C=M},6129:(en,Qe,k)=>{k.d(Qe,{U:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},9270:(en,Qe,k)=>{k.d(Qe,{f:()=>_});const _={setTimeout(L,M,...C){const{delegate:se}=_;return se?.setTimeout?se.setTimeout(L,M,...C):setTimeout(L,M,...C)},clearTimeout(L){const{delegate:M}=_;return(M?.clearTimeout||clearTimeout)(L)},delegate:void 0}},4761:(en,Qe,k)=>{k.d(Qe,{l:()=>L});const L=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(en,Qe,k)=>{k.d(Qe,{s:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(en,Qe,k)=>{k.d(Qe,{G:()=>L});const L=(0,k(1853).L)(M=>function(){M(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(en,Qe,k)=>{k.d(Qe,{R0:()=>Me,lI:()=>se,ms:()=>C});var _=k(8071),L=k(9470);function M(U){return U[U.length-1]}function C(U){return(0,_.T)(M(U))?U.pop():void 0}function se(U){return(0,L.m)(M(U))?U.pop():void 0}function Me(U,Le){return"number"==typeof M(U)?U.pop():Le}},3073:(en,Qe,k)=>{k.d(Qe,{D:()=>se});const{isArray:_}=Array,{getPrototypeOf:L,prototype:M,keys:C}=Object;function se(U){if(1===U.length){const Le=U[0];if(_(Le))return{args:Le,keys:null};if(function Me(U){return U&&"object"==typeof U&&L(U)===M}(Le)){const $e=C(Le);return{args:$e.map(Ee=>Le[Ee]),keys:$e}}}return{args:U,keys:null}}},7908:(en,Qe,k)=>{function _(L,M){if(L){const C=L.indexOf(M);0<=C&&L.splice(C,1)}}k.d(Qe,{o:()=>_})},1853:(en,Qe,k)=>{function _(L){const C=L(se=>{Error.call(se),se.stack=(new Error).stack});return C.prototype=Object.create(Error.prototype),C.prototype.constructor=C,C}k.d(Qe,{L:()=>_})},8496:(en,Qe,k)=>{function _(L,M){return L.reduce((C,se,Me)=>(C[se]=M[Me],C),{})}k.d(Qe,{e:()=>_})},9786:(en,Qe,k)=>{k.d(Qe,{Y:()=>M,l:()=>C});var _=k(1026);let L=null;function M(se){if(_.$.useDeprecatedSynchronousErrorHandling){const Me=!L;if(Me&&(L={errorThrown:!1,error:null}),se(),Me){const{errorThrown:U,error:Le}=L;if(L=null,U)throw Le}}else se()}function C(se){_.$.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=se)}},5225:(en,Qe,k)=>{function _(L,M,C,se=0,Me=!1){const U=M.schedule(function(){C(),Me?L.add(this.schedule(null,se)):this.unsubscribe()},se);if(L.add(U),!Me)return U}k.d(Qe,{N:()=>_})},3669:(en,Qe,k)=>{function _(L){return L}k.d(Qe,{D:()=>_})},7441:(en,Qe,k)=>{k.d(Qe,{X:()=>_});const _=L=>L&&"number"==typeof L.length&&"function"!=typeof L},7953:(en,Qe,k)=>{k.d(Qe,{T:()=>L});var _=k(8071);function L(M){return Symbol.asyncIterator&&(0,_.T)(M?.[Symbol.asyncIterator])}},8071:(en,Qe,k)=>{function _(L){return"function"==typeof L}k.d(Qe,{T:()=>_})},5055:(en,Qe,k)=>{k.d(Qe,{l:()=>M});var _=k(3494),L=k(8071);function M(C){return(0,L.T)(C[_.s])}},5397:(en,Qe,k)=>{k.d(Qe,{x:()=>M});var _=k(4761),L=k(8071);function M(C){return(0,L.T)(C?.[_.l])}},9858:(en,Qe,k)=>{k.d(Qe,{y:()=>L});var _=k(8071);function L(M){return(0,_.T)(M?.then)}},5196:(en,Qe,k)=>{k.d(Qe,{C:()=>M,U:()=>C});var _=k(1635),L=k(8071);function M(se){return(0,_.AQ)(this,arguments,function*(){const U=se.getReader();try{for(;;){const{value:Le,done:$e}=yield(0,_.N3)(U.read());if($e)return yield(0,_.N3)(void 0);yield yield(0,_.N3)(Le)}}finally{U.releaseLock()}})}function C(se){return(0,L.T)(se?.getReader)}},9470:(en,Qe,k)=>{k.d(Qe,{m:()=>L});var _=k(8071);function L(M){return M&&(0,_.T)(M.schedule)}},9974:(en,Qe,k)=>{k.d(Qe,{N:()=>M,S:()=>L});var _=k(8071);function L(C){return(0,_.T)(C?.lift)}function M(C){return se=>{if(L(se))return se.lift(function(Me){try{return C(Me,this)}catch(U){this.error(U)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(en,Qe,k)=>{k.d(Qe,{I:()=>C});var _=k(6354);const{isArray:L}=Array;function C(se){return(0,_.T)(Me=>function M(se,Me){return L(Me)?se(...Me):se(Me)}(se,Me))}},5343:(en,Qe,k)=>{function _(){}k.d(Qe,{l:()=>_})},1203:(en,Qe,k)=>{k.d(Qe,{F:()=>L,m:()=>M});var _=k(3669);function L(...C){return M(C)}function M(C){return 0===C.length?_.D:1===C.length?C[0]:function(Me){return C.reduce((U,Le)=>Le(U),Me)}}},5334:(en,Qe,k)=>{k.d(Qe,{m:()=>M});var _=k(1026),L=k(9270);function M(C){L.f.setTimeout(()=>{const{onUnhandledError:se}=_.$;if(!se)throw C;se(C)})}},591:(en,Qe,k)=>{function _(L){return new TypeError(`You provided ${null!==L&&"object"==typeof L?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Qe,{L:()=>_})},9969:(en,Qe,k)=>{k.d(Qe,{FX:()=>ze,If:()=>_,K2:()=>Me,hZ:()=>M,i0:()=>C,iF:()=>U,kY:()=>Ee,kp:()=>L,sf:()=>Ce,ui:()=>qe,wk:()=>Le});var _=function(de){return de[de.State=0]="State",de[de.Transition=1]="Transition",de[de.Sequence=2]="Sequence",de[de.Group=3]="Group",de[de.Animate=4]="Animate",de[de.Keyframes=5]="Keyframes",de[de.Style=6]="Style",de[de.Trigger=7]="Trigger",de[de.Reference=8]="Reference",de[de.AnimateChild=9]="AnimateChild",de[de.AnimateRef=10]="AnimateRef",de[de.Query=11]="Query",de[de.Stagger=12]="Stagger",de}(_||{});const L="*";function M(de,Ue){return{type:_.Trigger,name:de,definitions:Ue,options:{}}}function C(de,Ue=null){return{type:_.Animate,styles:Ue,timings:de}}function Me(de,Ue=null){return{type:_.Sequence,steps:de,options:Ue}}function U(de){return{type:_.Style,styles:de,offset:null}}function Le(de,Ue,Mt){return{type:_.State,name:de,styles:Ue,options:Mt}}function Ee(de,Ue,Mt=null){return{type:_.Transition,expr:de,animation:Ue,options:Mt}}class Ce{constructor(Ue=0,Mt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ue+Mt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ue=>Ue()),this._onDoneFns=[])}onStart(Ue){this._originalOnStartFns.push(Ue),this._onStartFns.push(Ue)}onDone(Ue){this._originalOnDoneFns.push(Ue),this._onDoneFns.push(Ue)}onDestroy(Ue){this._onDestroyFns.push(Ue)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ue=>Ue()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ue=>Ue()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Ue){this._position=this.totalTime?Ue*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ue){const Mt="start"==Ue?this._onStartFns:this._onDoneFns;Mt.forEach(pn=>pn()),Mt.length=0}}class qe{constructor(Ue){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ue;let Mt=0,pn=0,Pn=0;const Fn=this.players.length;0==Fn?queueMicrotask(()=>this._onFinish()):this.players.forEach(On=>{On.onDone(()=>{++Mt==Fn&&this._onFinish()}),On.onDestroy(()=>{++pn==Fn&&this._onDestroy()}),On.onStart(()=>{++Pn==Fn&&this._onStart()})}),this.totalTime=this.players.reduce((On,Ft)=>Math.max(On,Ft.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ue=>Ue()),this._onDoneFns=[])}init(){this.players.forEach(Ue=>Ue.init())}onStart(Ue){this._onStartFns.push(Ue)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ue=>Ue()),this._onStartFns=[])}onDone(Ue){this._onDoneFns.push(Ue)}onDestroy(Ue){this._onDestroyFns.push(Ue)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ue=>Ue.play())}pause(){this.players.forEach(Ue=>Ue.pause())}restart(){this.players.forEach(Ue=>Ue.restart())}finish(){this._onFinish(),this.players.forEach(Ue=>Ue.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ue=>Ue.destroy()),this._onDestroyFns.forEach(Ue=>Ue()),this._onDestroyFns=[])}reset(){this.players.forEach(Ue=>Ue.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ue){const Mt=Ue*this.totalTime;this.players.forEach(pn=>{const Pn=pn.totalTime?Math.min(1,Mt/pn.totalTime):1;pn.setPosition(Pn)})}getPosition(){const Ue=this.players.reduce((Mt,pn)=>null===Mt||pn.totalTime>Mt.totalTime?pn:Mt,null);return null!=Ue?Ue.getPosition():0}beforeDestroy(){this.players.forEach(Ue=>{Ue.beforeDestroy&&Ue.beforeDestroy()})}triggerCallback(Ue){const Mt="start"==Ue?this._onStartFns:this._onDoneFns;Mt.forEach(pn=>pn()),Mt.length=0}}const ze="!"},177:(en,Qe,k)=>{k.d(Qe,{AJ:()=>gs,Jj:()=>nr,MD:()=>ks,N0:()=>ao,P9:()=>oi,QT:()=>M,Sm:()=>wt,Sq:()=>En,VF:()=>se,Vy:()=>ji,Xr:()=>Uo,YU:()=>Ye,ZD:()=>C,_b:()=>ve,aZ:()=>Tt,bT:()=>_r,fw:()=>pt,hb:()=>Ae,hj:()=>$e,qQ:()=>U});var _=k(4438);let L=null;function M(){return L}function C(S){L??=S}class se{}const U=new _.nKC("");let Le=(()=>{class S{historyGo(N){throw new Error("")}static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275prov=_.jDH({token:S,factory:()=>(0,_.WQX)(Ee),providedIn:"platform"})}return S})();const $e=new _.nKC("");let Ee=(()=>{class S extends Le{constructor(){super(),this._doc=(0,_.WQX)(U),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return M().getBaseHref(this._doc)}onPopState(N){const j=M().getGlobalEventTarget(this._doc,"window");return j.addEventListener("popstate",N,!1),()=>j.removeEventListener("popstate",N)}onHashChange(N){const j=M().getGlobalEventTarget(this._doc,"window");return j.addEventListener("hashchange",N,!1),()=>j.removeEventListener("hashchange",N)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(N){this._location.pathname=N}pushState(N,j,_e){this._history.pushState(N,j,_e)}replaceState(N,j,_e){this._history.replaceState(N,j,_e)}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275prov=_.jDH({token:S,factory:()=>new S,providedIn:"platform"})}return S})();function ye(S,H){if(0==S.length)return H;if(0==H.length)return S;let N=0;return S.endsWith("/")&&N++,H.startsWith("/")&&N++,2==N?S+H.substring(1):1==N?S+H:S+"/"+H}function He(S){const H=S.match(/#|\?|$/),N=H&&H.index||S.length;return S.slice(0,N-("/"===S[N-1]?1:0))+S.slice(N)}function Ct(S){return S&&"?"!==S[0]?"?"+S:S}let Ae=(()=>{class S{historyGo(N){throw new Error("")}static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275prov=_.jDH({token:S,factory:()=>(0,_.WQX)(wt),providedIn:"root"})}return S})();const Fe=new _.nKC("");let wt=(()=>{class S extends Ae{constructor(N,j){super(),this._platformLocation=N,this._removeListenerFns=[],this._baseHref=j??this._platformLocation.getBaseHrefFromDOM()??(0,_.WQX)(U).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return ye(this._baseHref,N)}path(N=!1){const j=this._platformLocation.pathname+Ct(this._platformLocation.search),_e=this._platformLocation.hash;return _e&&N?`${j}${_e}`:j}pushState(N,j,_e,it){const xt=this.prepareExternalUrl(_e+Ct(it));this._platformLocation.pushState(N,j,xt)}replaceState(N,j,_e,it){const xt=this.prepareExternalUrl(_e+Ct(it));this._platformLocation.replaceState(N,j,xt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}static#e=this.\u0275fac=function(j){return new(j||S)(_.KVO(Le),_.KVO(Fe,8))};static#t=this.\u0275prov=_.jDH({token:S,factory:S.\u0275fac,providedIn:"root"})}return S})(),pt=(()=>{class S extends Ae{constructor(N,j){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=j&&(this._baseHref=j)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){const j=this._platformLocation.hash??"#";return j.length>0?j.substring(1):j}prepareExternalUrl(N){const j=ye(this._baseHref,N);return j.length>0?"#"+j:j}pushState(N,j,_e,it){let xt=this.prepareExternalUrl(_e+Ct(it));0==xt.length&&(xt=this._platformLocation.pathname),this._platformLocation.pushState(N,j,xt)}replaceState(N,j,_e,it){let xt=this.prepareExternalUrl(_e+Ct(it));0==xt.length&&(xt=this._platformLocation.pathname),this._platformLocation.replaceState(N,j,xt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}static#e=this.\u0275fac=function(j){return new(j||S)(_.KVO(Le),_.KVO(Fe,8))};static#t=this.\u0275prov=_.jDH({token:S,factory:S.\u0275fac})}return S})(),Tt=(()=>{class S{constructor(N){this._subject=new _.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=N;const j=this._locationStrategy.getBaseHref();this._basePath=function ie(S){if(new RegExp("^(https?:)?//").test(S)){const[,N]=S.split(/\/\/[^\/]+/);return N}return S}(He(ce(j))),this._locationStrategy.onPopState(_e=>{this._subject.emit({url:this.path(!0),pop:!0,state:_e.state,type:_e.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(N=!1){return this.normalize(this._locationStrategy.path(N))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(N,j=""){return this.path()==this.normalize(N+Ct(j))}normalize(N){return S.stripTrailingSlash(function mt(S,H){if(!S||!H.startsWith(S))return H;const N=H.substring(S.length);return""===N||["/",";","?","#"].includes(N[0])?N:H}(this._basePath,ce(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._locationStrategy.prepareExternalUrl(N)}go(N,j="",_e=null){this._locationStrategy.pushState(_e,"",N,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Ct(j)),_e)}replaceState(N,j="",_e=null){this._locationStrategy.replaceState(_e,"",N,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+Ct(j)),_e)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(N=0){this._locationStrategy.historyGo?.(N)}onUrlChange(N){return this._urlChangeListeners.push(N),this._urlChangeSubscription??=this.subscribe(j=>{this._notifyUrlChangeListeners(j.url,j.state)}),()=>{const j=this._urlChangeListeners.indexOf(N);this._urlChangeListeners.splice(j,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(N="",j){this._urlChangeListeners.forEach(_e=>_e(N,j))}subscribe(N,j,_e){return this._subject.subscribe({next:N,error:j,complete:_e})}static#e=this.normalizeQueryParams=Ct;static#t=this.joinWithSlash=ye;static#n=this.stripTrailingSlash=He;static#r=this.\u0275fac=function(j){return new(j||S)(_.KVO(Ae))};static#i=this.\u0275prov=_.jDH({token:S,factory:()=>function At(){return new Tt((0,_.KVO)(Ae))}(),providedIn:"root"})}return S})();function ce(S){return S.replace(/\/index.html$/,"")}function ve(S,H){H=encodeURIComponent(H);for(const N of S.split(";")){const j=N.indexOf("="),[_e,it]=-1==j?[N,""]:[N.slice(0,j),N.slice(j+1)];if(_e.trim()===H)return decodeURIComponent(it)}return null}const Ie=/\s+/,at=[];let Ye=(()=>{class S{constructor(N,j){this._ngEl=N,this._renderer=j,this.initialClasses=at,this.stateMap=new Map}set klass(N){this.initialClasses=null!=N?N.trim().split(Ie):at}set ngClass(N){this.rawClass="string"==typeof N?N.trim().split(Ie):N}ngDoCheck(){for(const j of this.initialClasses)this._updateState(j,!0);const N=this.rawClass;if(Array.isArray(N)||N instanceof Set)for(const j of N)this._updateState(j,!0);else if(null!=N)for(const j of Object.keys(N))this._updateState(j,!!N[j]);this._applyStateDiff()}_updateState(N,j){const _e=this.stateMap.get(N);void 0!==_e?(_e.enabled!==j&&(_e.changed=!0,_e.enabled=j),_e.touched=!0):this.stateMap.set(N,{enabled:j,changed:!0,touched:!0})}_applyStateDiff(){for(const N of this.stateMap){const j=N[0],_e=N[1];_e.changed?(this._toggleClass(j,_e.enabled),_e.changed=!1):_e.touched||(_e.enabled&&this._toggleClass(j,!1),this.stateMap.delete(j)),_e.touched=!1}}_toggleClass(N,j){(N=N.trim()).length>0&&N.split(Ie).forEach(_e=>{j?this._renderer.addClass(this._ngEl.nativeElement,_e):this._renderer.removeClass(this._ngEl.nativeElement,_e)})}static#e=this.\u0275fac=function(j){return new(j||S)(_.rXU(_.aKT),_.rXU(_.sFG))};static#t=this.\u0275dir=_.FsC({type:S,selectors:[["","ngClass",""]],inputs:{klass:[_.Mj6.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return S})();class Sn{constructor(H,N,j,_e){this.$implicit=H,this.ngForOf=N,this.index=j,this.count=_e}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let En=(()=>{class S{set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}constructor(N,j,_e){this._viewContainer=N,this._template=j,this._differs=_e,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;!this._differ&&N&&(this._differ=this._differs.find(N).create(this.ngForTrackBy))}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const j=this._viewContainer;N.forEachOperation((_e,it,xt)=>{if(null==_e.previousIndex)j.createEmbeddedView(this._template,new Sn(_e.item,this._ngForOf,-1,-1),null===xt?void 0:xt);else if(null==xt)j.remove(null===it?void 0:it);else if(null!==it){const on=j.get(it);j.move(on,xt),br(on,_e)}});for(let _e=0,it=j.length;_e<it;_e++){const on=j.get(_e).context;on.index=_e,on.count=it,on.ngForOf=this._ngForOf}N.forEachIdentityChange(_e=>{br(j.get(_e.currentIndex),_e)})}static ngTemplateContextGuard(N,j){return!0}static#e=this.\u0275fac=function(j){return new(j||S)(_.rXU(_.c1b),_.rXU(_.C4Q),_.rXU(_._q3))};static#t=this.\u0275dir=_.FsC({type:S,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return S})();function br(S,H){S.context.$implicit=H.item}let _r=(()=>{class S{constructor(N,j){this._viewContainer=N,this._context=new ui,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=j}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){Xr("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){Xr("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,j){return!0}static#e=this.\u0275fac=function(j){return new(j||S)(_.rXU(_.c1b),_.rXU(_.C4Q))};static#t=this.\u0275dir=_.FsC({type:S,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return S})();class ui{constructor(){this.$implicit=null,this.ngIf=null}}function Xr(S,H){if(H&&!H.createEmbeddedView)throw new Error(`${S} must be a TemplateRef, but received '${(0,_.Tbb)(H)}'.`)}function zi(S,H){return new _.wOt(2100,!1)}class oo{createSubscription(H,N){return(0,_.O8t)(()=>H.subscribe({next:N,error:j=>{throw j}}))}dispose(H){(0,_.O8t)(()=>H.unsubscribe())}}class Qo{createSubscription(H,N){return H.then(N,j=>{throw j})}dispose(H){}}const ua=new Qo,vo=new oo;let nr=(()=>{class S{constructor(N){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=N}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(N){if(!this._obj){if(N)try{this.markForCheckOnValueUpdate=!1,this._subscribe(N)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return N!==this._obj?(this._dispose(),this.transform(N)):this._latestValue}_subscribe(N){this._obj=N,this._strategy=this._selectStrategy(N),this._subscription=this._strategy.createSubscription(N,j=>this._updateLatestValue(N,j))}_selectStrategy(N){if((0,_.jNT)(N))return ua;if((0,_.zjR)(N))return vo;throw zi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(N,j){N===this._obj&&(this._latestValue=j,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(j){return new(j||S)(_.rXU(_.gRc,16))};static#t=this.\u0275pipe=_.EJ8({name:"async",type:S,pure:!1,standalone:!0})}return S})(),oi=(()=>{class S{transform(N,j,_e){if(null==N)return null;if(!this.supports(N))throw zi();return N.slice(j,_e)}supports(N){return"string"==typeof N||Array.isArray(N)}static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275pipe=_.EJ8({name:"slice",type:S,pure:!1,standalone:!0})}return S})(),ks=(()=>{class S{static#e=this.\u0275fac=function(j){return new(j||S)};static#t=this.\u0275mod=_.$C({type:S});static#n=this.\u0275inj=_.G2t({})}return S})();const gs="browser",Ys="server";function ji(S){return S===Ys}let Uo=(()=>{class S{static#e=this.\u0275prov=(0,_.jDH)({token:S,providedIn:"root",factory:()=>function Wi(S){return S===gs}((0,_.WQX)(_.Agw))?new ns((0,_.WQX)(U),window):new Io})}return S})();class ns{constructor(H,N){this.document=H,this.window=N,this.offset=()=>[0,0]}setOffset(H){this.offset=Array.isArray(H)?()=>H:H}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(H){this.window.scrollTo(H[0],H[1])}scrollToAnchor(H){const N=function Oi(S,H){const N=S.getElementById(H)||S.getElementsByName(H)[0];if(N)return N;if("function"==typeof S.createTreeWalker&&S.body&&"function"==typeof S.body.attachShadow){const j=S.createTreeWalker(S.body,NodeFilter.SHOW_ELEMENT);let _e=j.currentNode;for(;_e;){const it=_e.shadowRoot;if(it){const xt=it.getElementById(H)||it.querySelector(`[name="${H}"]`);if(xt)return xt}_e=j.nextNode()}}return null}(this.document,H);N&&(this.scrollToElement(N),N.focus())}setHistoryScrollRestoration(H){this.window.history.scrollRestoration=H}scrollToElement(H){const N=H.getBoundingClientRect(),j=N.left+this.window.pageXOffset,_e=N.top+this.window.pageYOffset,it=this.offset();this.window.scrollTo(j-it[0],_e-it[1])}}class Io{setOffset(H){}getScrollPosition(){return[0,0]}scrollToPosition(H){}scrollToAnchor(H){}setHistoryScrollRestoration(H){}}class ao{}},1626:(en,Qe,k)=>{k.d(Qe,{Qq:()=>ct,q1:()=>Bn}),k(467);var L=k(4438),M=k(7673),C=k(1985),se=k(8455),Me=k(274),U=k(5964),Le=k(6354),$e=k(980),Ee=k(5558),ye=k(177);class He{}class Ct{}class Ae{constructor(ve){this.normalizedNames=new Map,this.lazyUpdate=null,ve?"string"==typeof ve?this.lazyInit=()=>{this.headers=new Map,ve.split("\n").forEach(Ie=>{const at=Ie.indexOf(":");if(at>0){const Ye=Ie.slice(0,at),qt=Ye.toLowerCase(),Bt=Ie.slice(at+1).trim();this.maybeSetNormalizedName(Ye,qt),this.headers.has(qt)?this.headers.get(qt).push(Bt):this.headers.set(qt,[Bt])}})}:typeof Headers<"u"&&ve instanceof Headers?(this.headers=new Map,ve.forEach((Ie,at)=>{this.setHeaderEntries(at,Ie)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(ve).forEach(([Ie,at])=>{this.setHeaderEntries(Ie,at)})}:this.headers=new Map}has(ve){return this.init(),this.headers.has(ve.toLowerCase())}get(ve){this.init();const Ie=this.headers.get(ve.toLowerCase());return Ie&&Ie.length>0?Ie[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ve){return this.init(),this.headers.get(ve.toLowerCase())||null}append(ve,Ie){return this.clone({name:ve,value:Ie,op:"a"})}set(ve,Ie){return this.clone({name:ve,value:Ie,op:"s"})}delete(ve,Ie){return this.clone({name:ve,value:Ie,op:"d"})}maybeSetNormalizedName(ve,Ie){this.normalizedNames.has(Ie)||this.normalizedNames.set(Ie,ve)}init(){this.lazyInit&&(this.lazyInit instanceof Ae?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ve=>this.applyUpdate(ve)),this.lazyUpdate=null))}copyFrom(ve){ve.init(),Array.from(ve.headers.keys()).forEach(Ie=>{this.headers.set(Ie,ve.headers.get(Ie)),this.normalizedNames.set(Ie,ve.normalizedNames.get(Ie))})}clone(ve){const Ie=new Ae;return Ie.lazyInit=this.lazyInit&&this.lazyInit instanceof Ae?this.lazyInit:this,Ie.lazyUpdate=(this.lazyUpdate||[]).concat([ve]),Ie}applyUpdate(ve){const Ie=ve.name.toLowerCase();switch(ve.op){case"a":case"s":let at=ve.value;if("string"==typeof at&&(at=[at]),0===at.length)return;this.maybeSetNormalizedName(ve.name,Ie);const Ye=("a"===ve.op?this.headers.get(Ie):void 0)||[];Ye.push(...at),this.headers.set(Ie,Ye);break;case"d":const qt=ve.value;if(qt){let Bt=this.headers.get(Ie);if(!Bt)return;Bt=Bt.filter(Sn=>-1===qt.indexOf(Sn)),0===Bt.length?(this.headers.delete(Ie),this.normalizedNames.delete(Ie)):this.headers.set(Ie,Bt)}else this.headers.delete(Ie),this.normalizedNames.delete(Ie)}}setHeaderEntries(ve,Ie){const at=(Array.isArray(Ie)?Ie:[Ie]).map(qt=>qt.toString()),Ye=ve.toLowerCase();this.headers.set(Ye,at),this.maybeSetNormalizedName(ve,Ye)}forEach(ve){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ie=>ve(this.normalizedNames.get(Ie),this.headers.get(Ie)))}}class wt{encodeKey(ve){return mt(ve)}encodeValue(ve){return mt(ve)}decodeKey(ve){return decodeURIComponent(ve)}decodeValue(ve){return decodeURIComponent(ve)}}const Tt=/%(\d[a-f0-9])/gi,At={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function mt(ne){return encodeURIComponent(ne).replace(Tt,(ve,Ie)=>At[Ie]??ve)}function ce(ne){return`${ne}`}class ie{constructor(ve={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ve.encoder||new wt,ve.fromString){if(ve.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function pt(ne,ve){const Ie=new Map;return ne.length>0&&ne.replace(/^\?/,"").split("&").forEach(Ye=>{const qt=Ye.indexOf("="),[Bt,Sn]=-1==qt?[ve.decodeKey(Ye),""]:[ve.decodeKey(Ye.slice(0,qt)),ve.decodeValue(Ye.slice(qt+1))],En=Ie.get(Bt)||[];En.push(Sn),Ie.set(Bt,En)}),Ie}(ve.fromString,this.encoder)}else ve.fromObject?(this.map=new Map,Object.keys(ve.fromObject).forEach(Ie=>{const at=ve.fromObject[Ie],Ye=Array.isArray(at)?at.map(ce):[ce(at)];this.map.set(Ie,Ye)})):this.map=null}has(ve){return this.init(),this.map.has(ve)}get(ve){this.init();const Ie=this.map.get(ve);return Ie?Ie[0]:null}getAll(ve){return this.init(),this.map.get(ve)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ve,Ie){return this.clone({param:ve,value:Ie,op:"a"})}appendAll(ve){const Ie=[];return Object.keys(ve).forEach(at=>{const Ye=ve[at];Array.isArray(Ye)?Ye.forEach(qt=>{Ie.push({param:at,value:qt,op:"a"})}):Ie.push({param:at,value:Ye,op:"a"})}),this.clone(Ie)}set(ve,Ie){return this.clone({param:ve,value:Ie,op:"s"})}delete(ve,Ie){return this.clone({param:ve,value:Ie,op:"d"})}toString(){return this.init(),this.keys().map(ve=>{const Ie=this.encoder.encodeKey(ve);return this.map.get(ve).map(at=>Ie+"="+this.encoder.encodeValue(at)).join("&")}).filter(ve=>""!==ve).join("&")}clone(ve){const Ie=new ie({encoder:this.encoder});return Ie.cloneFrom=this.cloneFrom||this,Ie.updates=(this.updates||[]).concat(ve),Ie}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ve=>this.map.set(ve,this.cloneFrom.map.get(ve))),this.updates.forEach(ve=>{switch(ve.op){case"a":case"s":const Ie=("a"===ve.op?this.map.get(ve.param):void 0)||[];Ie.push(ce(ve.value)),this.map.set(ve.param,Ie);break;case"d":if(void 0===ve.value){this.map.delete(ve.param);break}{let at=this.map.get(ve.param)||[];const Ye=at.indexOf(ce(ve.value));-1!==Ye&&at.splice(Ye,1),at.length>0?this.map.set(ve.param,at):this.map.delete(ve.param)}}}),this.cloneFrom=this.updates=null)}}class Ce{constructor(){this.map=new Map}set(ve,Ie){return this.map.set(ve,Ie),this}get(ve){return this.map.has(ve)||this.map.set(ve,ve.defaultValue()),this.map.get(ve)}delete(ve){return this.map.delete(ve),this}has(ve){return this.map.has(ve)}keys(){return this.map.keys()}}function ze(ne){return typeof ArrayBuffer<"u"&&ne instanceof ArrayBuffer}function de(ne){return typeof Blob<"u"&&ne instanceof Blob}function Ue(ne){return typeof FormData<"u"&&ne instanceof FormData}class pn{constructor(ve,Ie,at,Ye){let qt;if(this.url=Ie,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ve.toUpperCase(),function qe(ne){switch(ne){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Ye?(this.body=void 0!==at?at:null,qt=Ye):qt=at,qt&&(this.reportProgress=!!qt.reportProgress,this.withCredentials=!!qt.withCredentials,qt.responseType&&(this.responseType=qt.responseType),qt.headers&&(this.headers=qt.headers),qt.context&&(this.context=qt.context),qt.params&&(this.params=qt.params),this.transferCache=qt.transferCache),this.headers??=new Ae,this.context??=new Ce,this.params){const Bt=this.params.toString();if(0===Bt.length)this.urlWithParams=Ie;else{const Sn=Ie.indexOf("?");this.urlWithParams=Ie+(-1===Sn?"?":Sn<Ie.length-1?"&":"")+Bt}}else this.params=new ie,this.urlWithParams=Ie}serializeBody(){return null===this.body?null:"string"==typeof this.body||ze(this.body)||de(this.body)||Ue(this.body)||function Mt(ne){return typeof URLSearchParams<"u"&&ne instanceof URLSearchParams}(this.body)?this.body:this.body instanceof ie?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ue(this.body)?null:de(this.body)?this.body.type||null:ze(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ie?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ve={}){const Ie=ve.method||this.method,at=ve.url||this.url,Ye=ve.responseType||this.responseType,qt=ve.transferCache??this.transferCache,Bt=void 0!==ve.body?ve.body:this.body,Sn=ve.withCredentials??this.withCredentials,En=ve.reportProgress??this.reportProgress;let br=ve.headers||this.headers,si=ve.params||this.params;const _r=ve.context??this.context;return void 0!==ve.setHeaders&&(br=Object.keys(ve.setHeaders).reduce((ui,Xr)=>ui.set(Xr,ve.setHeaders[Xr]),br)),ve.setParams&&(si=Object.keys(ve.setParams).reduce((ui,Xr)=>ui.set(Xr,ve.setParams[Xr]),si)),new pn(Ie,at,Bt,{params:si,headers:br,context:_r,reportProgress:En,responseType:Ye,withCredentials:Sn,transferCache:qt})}}var Pn=function(ne){return ne[ne.Sent=0]="Sent",ne[ne.UploadProgress=1]="UploadProgress",ne[ne.ResponseHeader=2]="ResponseHeader",ne[ne.DownloadProgress=3]="DownloadProgress",ne[ne.Response=4]="Response",ne[ne.User=5]="User",ne}(Pn||{});class Fn{constructor(ve,Ie=ke.Ok,at="OK"){this.headers=ve.headers||new Ae,this.status=void 0!==ve.status?ve.status:Ie,this.statusText=ve.statusText||at,this.url=ve.url||null,this.ok=this.status>=200&&this.status<300}}class On extends Fn{constructor(ve={}){super(ve),this.type=Pn.ResponseHeader}clone(ve={}){return new On({headers:ve.headers||this.headers,status:void 0!==ve.status?ve.status:this.status,statusText:ve.statusText||this.statusText,url:ve.url||this.url||void 0})}}class Ft extends Fn{constructor(ve={}){super(ve),this.type=Pn.Response,this.body=void 0!==ve.body?ve.body:null}clone(ve={}){return new Ft({body:void 0!==ve.body?ve.body:this.body,headers:ve.headers||this.headers,status:void 0!==ve.status?ve.status:this.status,statusText:ve.statusText||this.statusText,url:ve.url||this.url||void 0})}}class Tn extends Fn{constructor(ve){super(ve,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ve.url||"(unknown url)"}`:`Http failure response for ${ve.url||"(unknown url)"}: ${ve.status} ${ve.statusText}`,this.error=ve.error||null}}var ke=function(ne){return ne[ne.Continue=100]="Continue",ne[ne.SwitchingProtocols=101]="SwitchingProtocols",ne[ne.Processing=102]="Processing",ne[ne.EarlyHints=103]="EarlyHints",ne[ne.Ok=200]="Ok",ne[ne.Created=201]="Created",ne[ne.Accepted=202]="Accepted",ne[ne.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",ne[ne.NoContent=204]="NoContent",ne[ne.ResetContent=205]="ResetContent",ne[ne.PartialContent=206]="PartialContent",ne[ne.MultiStatus=207]="MultiStatus",ne[ne.AlreadyReported=208]="AlreadyReported",ne[ne.ImUsed=226]="ImUsed",ne[ne.MultipleChoices=300]="MultipleChoices",ne[ne.MovedPermanently=301]="MovedPermanently",ne[ne.Found=302]="Found",ne[ne.SeeOther=303]="SeeOther",ne[ne.NotModified=304]="NotModified",ne[ne.UseProxy=305]="UseProxy",ne[ne.Unused=306]="Unused",ne[ne.TemporaryRedirect=307]="TemporaryRedirect",ne[ne.PermanentRedirect=308]="PermanentRedirect",ne[ne.BadRequest=400]="BadRequest",ne[ne.Unauthorized=401]="Unauthorized",ne[ne.PaymentRequired=402]="PaymentRequired",ne[ne.Forbidden=403]="Forbidden",ne[ne.NotFound=404]="NotFound",ne[ne.MethodNotAllowed=405]="MethodNotAllowed",ne[ne.NotAcceptable=406]="NotAcceptable",ne[ne.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",ne[ne.RequestTimeout=408]="RequestTimeout",ne[ne.Conflict=409]="Conflict",ne[ne.Gone=410]="Gone",ne[ne.LengthRequired=411]="LengthRequired",ne[ne.PreconditionFailed=412]="PreconditionFailed",ne[ne.PayloadTooLarge=413]="PayloadTooLarge",ne[ne.UriTooLong=414]="UriTooLong",ne[ne.UnsupportedMediaType=415]="UnsupportedMediaType",ne[ne.RangeNotSatisfiable=416]="RangeNotSatisfiable",ne[ne.ExpectationFailed=417]="ExpectationFailed",ne[ne.ImATeapot=418]="ImATeapot",ne[ne.MisdirectedRequest=421]="MisdirectedRequest",ne[ne.UnprocessableEntity=422]="UnprocessableEntity",ne[ne.Locked=423]="Locked",ne[ne.FailedDependency=424]="FailedDependency",ne[ne.TooEarly=425]="TooEarly",ne[ne.UpgradeRequired=426]="UpgradeRequired",ne[ne.PreconditionRequired=428]="PreconditionRequired",ne[ne.TooManyRequests=429]="TooManyRequests",ne[ne.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",ne[ne.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",ne[ne.InternalServerError=500]="InternalServerError",ne[ne.NotImplemented=501]="NotImplemented",ne[ne.BadGateway=502]="BadGateway",ne[ne.ServiceUnavailable=503]="ServiceUnavailable",ne[ne.GatewayTimeout=504]="GatewayTimeout",ne[ne.HttpVersionNotSupported=505]="HttpVersionNotSupported",ne[ne.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",ne[ne.InsufficientStorage=507]="InsufficientStorage",ne[ne.LoopDetected=508]="LoopDetected",ne[ne.NotExtended=510]="NotExtended",ne[ne.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",ne}(ke||{});function Xe(ne,ve){return{body:ve,headers:ne.headers,context:ne.context,observe:ne.observe,params:ne.params,reportProgress:ne.reportProgress,responseType:ne.responseType,withCredentials:ne.withCredentials,transferCache:ne.transferCache}}let ct=(()=>{class ne{constructor(Ie){this.handler=Ie}request(Ie,at,Ye={}){let qt;if(Ie instanceof pn)qt=Ie;else{let En,br;En=Ye.headers instanceof Ae?Ye.headers:new Ae(Ye.headers),Ye.params&&(br=Ye.params instanceof ie?Ye.params:new ie({fromObject:Ye.params})),qt=new pn(Ie,at,void 0!==Ye.body?Ye.body:null,{headers:En,context:Ye.context,params:br,reportProgress:Ye.reportProgress,responseType:Ye.responseType||"json",withCredentials:Ye.withCredentials,transferCache:Ye.transferCache})}const Bt=(0,M.of)(qt).pipe((0,Me.H)(En=>this.handler.handle(En)));if(Ie instanceof pn||"events"===Ye.observe)return Bt;const Sn=Bt.pipe((0,U.p)(En=>En instanceof Ft));switch(Ye.observe||"body"){case"body":switch(qt.responseType){case"arraybuffer":return Sn.pipe((0,Le.T)(En=>{if(null!==En.body&&!(En.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return En.body}));case"blob":return Sn.pipe((0,Le.T)(En=>{if(null!==En.body&&!(En.body instanceof Blob))throw new Error("Response is not a Blob.");return En.body}));case"text":return Sn.pipe((0,Le.T)(En=>{if(null!==En.body&&"string"!=typeof En.body)throw new Error("Response is not a string.");return En.body}));default:return Sn.pipe((0,Le.T)(En=>En.body))}case"response":return Sn;default:throw new Error(`Unreachable: unhandled observe type ${Ye.observe}}`)}}delete(Ie,at={}){return this.request("DELETE",Ie,at)}get(Ie,at={}){return this.request("GET",Ie,at)}head(Ie,at={}){return this.request("HEAD",Ie,at)}jsonp(Ie,at){return this.request("JSONP",Ie,{params:(new ie).append(at,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ie,at={}){return this.request("OPTIONS",Ie,at)}patch(Ie,at,Ye={}){return this.request("PATCH",Ie,Xe(Ye,at))}post(Ie,at,Ye={}){return this.request("POST",Ie,Xe(Ye,at))}put(Ie,at,Ye={}){return this.request("PUT",Ie,Xe(Ye,at))}static#e=this.\u0275fac=function(at){return new(at||ne)(L.KVO(He))};static#t=this.\u0275prov=L.jDH({token:ne,factory:ne.\u0275fac})}return ne})();function vn(ne,ve){return ve(ne)}function Cn(ne,ve){return(Ie,at)=>ve.intercept(Ie,{handle:Ye=>ne(Ye,at)})}const rt=new L.nKC(""),yn=new L.nKC(""),Gn=new L.nKC(""),rr=new L.nKC("");function bt(){let ne=null;return(ve,Ie)=>{null===ne&&(ne=((0,L.WQX)(rt,{optional:!0})??[]).reduceRight(Cn,vn));const at=(0,L.WQX)(L.TgB),Ye=at.add();return ne(ve,Ie).pipe((0,$e.j)(()=>at.remove(Ye)))}}let Nt=(()=>{class ne extends He{constructor(Ie,at){super(),this.backend=Ie,this.injector=at,this.chain=null,this.pendingTasks=(0,L.WQX)(L.TgB);const Ye=(0,L.WQX)(rr,{optional:!0});this.backend=Ye??Ie}handle(Ie){if(null===this.chain){const Ye=Array.from(new Set([...this.injector.get(yn),...this.injector.get(Gn,[])]));this.chain=Ye.reduceRight((qt,Bt)=>function Ln(ne,ve,Ie){return(at,Ye)=>(0,L.N4e)(Ie,()=>ve(at,qt=>ne(qt,Ye)))}(qt,Bt,this.injector),vn)}const at=this.pendingTasks.add();return this.chain(Ie,Ye=>this.backend.handle(Ye)).pipe((0,$e.j)(()=>this.pendingTasks.remove(at)))}static#e=this.\u0275fac=function(at){return new(at||ne)(L.KVO(Ct),L.KVO(L.uvJ))};static#t=this.\u0275prov=L.jDH({token:ne,factory:ne.\u0275fac})}return ne})();const hs=/^\)\]\}',?\n/;let Ui=(()=>{class ne{constructor(Ie){this.xhrFactory=Ie}handle(Ie){if("JSONP"===Ie.method)throw new L.wOt(-2800,!1);const at=this.xhrFactory;return(at.\u0275loadImpl?(0,se.H)(at.\u0275loadImpl()):(0,M.of)(null)).pipe((0,Ee.n)(()=>new C.c(qt=>{const Bt=at.build();if(Bt.open(Ie.method,Ie.urlWithParams),Ie.withCredentials&&(Bt.withCredentials=!0),Ie.headers.forEach((yr,Ir)=>Bt.setRequestHeader(yr,Ir.join(","))),Ie.headers.has("Accept")||Bt.setRequestHeader("Accept","application/json, text/plain, */*"),!Ie.headers.has("Content-Type")){const yr=Ie.detectContentTypeHeader();null!==yr&&Bt.setRequestHeader("Content-Type",yr)}if(Ie.responseType){const yr=Ie.responseType.toLowerCase();Bt.responseType="json"!==yr?yr:"text"}const Sn=Ie.serializeBody();let En=null;const br=()=>{if(null!==En)return En;const yr=Bt.statusText||"OK",Ir=new Ae(Bt.getAllResponseHeaders()),li=function Nn(ne){return"responseURL"in ne&&ne.responseURL?ne.responseURL:/^X-Request-URL:/m.test(ne.getAllResponseHeaders())?ne.getResponseHeader("X-Request-URL"):null}(Bt)||Ie.url;return En=new On({headers:Ir,status:Bt.status,statusText:yr,url:li}),En},si=()=>{let{headers:yr,status:Ir,statusText:li,url:tr}=br(),Fr=null;Ir!==ke.NoContent&&(Fr=typeof Bt.response>"u"?Bt.responseText:Bt.response),0===Ir&&(Ir=Fr?ke.Ok:0);let di=Ir>=200&&Ir<300;if("json"===Ie.responseType&&"string"==typeof Fr){const Ei=Fr;Fr=Fr.replace(hs,"");try{Fr=""!==Fr?JSON.parse(Fr):null}catch(Ii){Fr=Ei,di&&(di=!1,Fr={error:Ii,text:Fr})}}di?(qt.next(new Ft({body:Fr,headers:yr,status:Ir,statusText:li,url:tr||void 0})),qt.complete()):qt.error(new Tn({error:Fr,headers:yr,status:Ir,statusText:li,url:tr||void 0}))},_r=yr=>{const{url:Ir}=br(),li=new Tn({error:yr,status:Bt.status||0,statusText:Bt.statusText||"Unknown Error",url:Ir||void 0});qt.error(li)};let ui=!1;const Xr=yr=>{ui||(qt.next(br()),ui=!0);let Ir={type:Pn.DownloadProgress,loaded:yr.loaded};yr.lengthComputable&&(Ir.total=yr.total),"text"===Ie.responseType&&Bt.responseText&&(Ir.partialText=Bt.responseText),qt.next(Ir)},Mi=yr=>{let Ir={type:Pn.UploadProgress,loaded:yr.loaded};yr.lengthComputable&&(Ir.total=yr.total),qt.next(Ir)};return Bt.addEventListener("load",si),Bt.addEventListener("error",_r),Bt.addEventListener("timeout",_r),Bt.addEventListener("abort",_r),Ie.reportProgress&&(Bt.addEventListener("progress",Xr),null!==Sn&&Bt.upload&&Bt.upload.addEventListener("progress",Mi)),Bt.send(Sn),qt.next({type:Pn.Sent}),()=>{Bt.removeEventListener("error",_r),Bt.removeEventListener("abort",_r),Bt.removeEventListener("load",si),Bt.removeEventListener("timeout",_r),Ie.reportProgress&&(Bt.removeEventListener("progress",Xr),null!==Sn&&Bt.upload&&Bt.upload.removeEventListener("progress",Mi)),Bt.readyState!==Bt.DONE&&Bt.abort()}})))}static#e=this.\u0275fac=function(at){return new(at||ne)(L.KVO(ye.N0))};static#t=this.\u0275prov=L.jDH({token:ne,factory:ne.\u0275fac})}return ne})();const Ht=new L.nKC(""),Or=new L.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Yt=new L.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Qr{}let Mn=(()=>{class ne{constructor(Ie,at,Ye){this.doc=Ie,this.platform=at,this.cookieName=Ye,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ie=this.doc.cookie||"";return Ie!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,ye._b)(Ie,this.cookieName),this.lastCookieString=Ie),this.lastToken}static#e=this.\u0275fac=function(at){return new(at||ne)(L.KVO(ye.qQ),L.KVO(L.Agw),L.KVO(Or))};static#t=this.\u0275prov=L.jDH({token:ne,factory:ne.\u0275fac})}return ne})();function Nr(ne,ve){const Ie=ne.url.toLowerCase();if(!(0,L.WQX)(Ht)||"GET"===ne.method||"HEAD"===ne.method||Ie.startsWith("http://")||Ie.startsWith("https://"))return ve(ne);const at=(0,L.WQX)(Qr).getToken(),Ye=(0,L.WQX)(Yt);return null!=at&&!ne.headers.has(Ye)&&(ne=ne.clone({headers:ne.headers.set(Ye,at)})),ve(ne)}var Te=function(ne){return ne[ne.Interceptors=0]="Interceptors",ne[ne.LegacyInterceptors=1]="LegacyInterceptors",ne[ne.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ne[ne.NoXsrfProtection=3]="NoXsrfProtection",ne[ne.JsonpSupport=4]="JsonpSupport",ne[ne.RequestsMadeViaParent=5]="RequestsMadeViaParent",ne[ne.Fetch=6]="Fetch",ne}(Te||{});function Ke(...ne){const ve=[ct,Ui,Nt,{provide:He,useExisting:Nt},{provide:Ct,useExisting:Ui},{provide:yn,useValue:Nr,multi:!0},{provide:Ht,useValue:!0},{provide:Qr,useClass:Mn}];for(const Ie of ne)ve.push(...Ie.\u0275providers);return(0,L.EmA)(ve)}const ge=new L.nKC("");function Q(){return function we(ne,ve){return{\u0275kind:ne,\u0275providers:ve}}(Te.LegacyInterceptors,[{provide:ge,useFactory:bt},{provide:yn,useExisting:ge,multi:!0}])}let Bn=(()=>{class ne{static#e=this.\u0275fac=function(at){return new(at||ne)};static#t=this.\u0275mod=L.$C({type:ne});static#n=this.\u0275inj=L.G2t({providers:[Ke(Q())]})}return ne})()},4438:(en,Qe,k)=>{k.d(Qe,{bc$:()=>bg,iLQ:()=>R0,sZ2:()=>wf,hnV:()=>yD,Hbi:()=>tR,o8S:()=>yd,BIS:()=>dE,gRc:()=>RD,Ql9:()=>bM,Ocv:()=>kM,Z63:()=>Us,aKT:()=>hc,uvJ:()=>Lr,zcH:()=>So,bkB:()=>Qa,$GK:()=>nr,nKC:()=>Ye,zZn:()=>so,_q3:()=>U0,MKu:()=>B0,xe9:()=>Gv,Co$:()=>t_,Vns:()=>Tu,SKi:()=>ws,Xx1:()=>Wi,Agw:()=>Df,PLl:()=>Tf,sFG:()=>_u,_9s:()=>qy,czy:()=>Xa,kdw:()=>ts,C4Q:()=>Th,NYb:()=>EM,giA:()=>mD,xvI:()=>qP,RxE:()=>cD,c1b:()=>$c,gXe:()=>us,mal:()=>go,L39:()=>MR,Ol2:()=>Ot,w6W:()=>gd,oH4:()=>bD,Rfq:()=>Nr,WQX:()=>cn,naY:()=>BM,QuC:()=>Ni,EmA:()=>Ao,fpN:()=>eR,HJs:()=>LR,N4e:()=>ds,O8t:()=>OR,An2:()=>Be,H3F:()=>uD,H8p:()=>ur,KH2:()=>Bp,TgB:()=>Ja,wOt:()=>ft,WHO:()=>pD,e01:()=>gD,H5H:()=>l0,Zy3:()=>ti,mq5:()=>Cw,JZv:()=>Nn,LfX:()=>_t,plB:()=>yu,jNT:()=>P0,zjR:()=>_D,TL$:()=>Ag,Tbb:()=>Xt,Vt3:()=>Ep,Mj6:()=>_s,GFd:()=>ca,OA$:()=>It,Jv_:()=>xT,aNF:()=>kT,R7$:()=>KE,BMQ:()=>qI,AVh:()=>e0,wni:()=>uT,VBU:()=>Ua,FsC:()=>Jo,jDH:()=>ir,G2t:()=>Gi,$C:()=>To,EJ8:()=>Do,rXU:()=>td,nrm:()=>a0,k0s:()=>Nv,j41:()=>Ov,RV6:()=>vw,xGo:()=>Fd,KVO:()=>ni,kS0:()=>zs,QTQ:()=>Ty,bIt:()=>f0,lsd:()=>hT,XpG:()=>Zw,nI1:()=>HT,bMT:()=>GT,i5U:()=>zT,brH:()=>WT,Y8G:()=>JI,mGM:()=>dT,Njj:()=>Vu,eBV:()=>Ol,B4B:()=>Nf,n$t:()=>ay,wjB:()=>FT,DNE:()=>Cp,EFF:()=>CT,JRh:()=>m0,SpI:()=>Lv,DH7:()=>OT,mxI:()=>y0,R50:()=>_0,GBs:()=>lT}),k(467);let M=null,se=1;const Me=Symbol("SIGNAL");function U(e){const n=M;return M=e,n}function Ae(e){if((!Ce(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==se)){if(!e.producerMustRecompute(e)&&!mt(e))return e.dirty=!1,void(e.lastCleanEpoch=se);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=se}}function mt(e){qe(e);for(let n=0;n<e.producerNode.length;n++){const i=e.producerNode[n],s=e.producerLastReadVersion[n];if(s!==i.version||(Ae(i),s!==i.version))return!0}return!1}function ue(e,n){if(function ze(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),qe(e),1===e.liveConsumerNode.length)for(let s=0;s<e.producerNode.length;s++)ue(e.producerNode[s],e.producerIndexOfThis[s]);const i=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[i],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[i],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const s=e.liveConsumerIndexOfThis[n],c=e.liveConsumerNode[n];qe(c),c.producerIndexOfThis[s]=n}}function Ce(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function qe(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let On=null;var Ln=k(1413),rt=k(8359),yn=k(4412),Gn=k(6354);const bt="https://g.co/ng/security#xss";class ft extends Error{constructor(n,i){super(ti(n,i)),this.code=n}}function ti(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}function wn(e){return{toString:e}.toString()}const kr="__parameters__";function Rr(e,n,i){return wn(()=>{const s=function Li(e){return function(...i){if(e){const s=e(...i);for(const c in s)this[c]=s[c]}}}(n);function c(...l){if(this instanceof c)return s.apply(this,l),this;const p=new c(...l);return y.annotation=p,y;function y(b,B,Y){const le=b.hasOwnProperty(kr)?b[kr]:Object.defineProperty(b,kr,{value:[]})[kr];for(;le.length<=Y;)le.push(null);return(le[Y]=le[Y]||[]).push(p),b}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=e,c.annotationCls=c,c})}const Nn=globalThis;function Un(e){for(let n in e)if(e[n]===Un)return n;throw Error("Could not find renamed property on target object.")}function Or(e,n){for(const i in n)n.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=n[i])}function Xt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Xt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function Yt(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Mn=Un({__forward_ref__:Un});function Nr(e){return e.__forward_ref__=Nr,e.toString=function(){return Xt(this())},e}function xe(e){return Te(e)?e():e}function Te(e){return"function"==typeof e&&e.hasOwnProperty(Mn)&&e.__forward_ref__===Nr}function ir(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Gi(e){return{providers:e.providers||[],imports:e.imports||[]}}function ri(e){return Je(e,ne)||Je(e,Ie)}function _t(e){return null!==ri(e)}function Je(e,n){return e.hasOwnProperty(n)?e[n]:null}function sn(e){return e&&(e.hasOwnProperty(ve)||e.hasOwnProperty(at))?e[ve]:null}const ne=Un({\u0275prov:Un}),ve=Un({\u0275inj:Un}),Ie=Un({ngInjectableDef:Un}),at=Un({ngInjectorDef:Un});class Ye{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=ir({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function yr(e){return e&&!!e.\u0275providers}const Ir=Un({\u0275cmp:Un}),li=Un({\u0275dir:Un}),tr=Un({\u0275pipe:Un}),Fr=Un({\u0275mod:Un}),di=Un({\u0275fac:Un}),Ei=Un({__NG_ELEMENT_ID__:Un}),Ii=Un({__NG_ENV_ID__:Un});function Rn(e){return"string"==typeof e?e:null==e?"":String(e)}function vo(e,n){throw new ft(-201,!1)}var nr=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(nr||{});let Eo;function xs(){return Eo}function Er(e){const n=Eo;return Eo=e,n}function Vo(e,n,i){const s=ri(e);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:i&nr.Optional?null:void 0!==n?n:void vo()}const Rs={},Sr="__NG_DI_FLAG__",Bi="ngTempTokenPath",vr=/\n/gm,Xs="__source";let Jr;function hi(e){const n=Jr;return Jr=e,n}function zr(e,n=nr.Default){if(void 0===Jr)throw new ft(-203,!1);return null===Jr?Vo(e,void 0,n):Jr.get(e,n&nr.Optional?null:void 0,n)}function ni(e,n=nr.Default){return(xs()||zr)(xe(e),n)}function cn(e,n=nr.Default){return ni(e,oi(n))}function oi(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ps(e){const n=[];for(let i=0;i<e.length;i++){const s=xe(e[i]);if(Array.isArray(s)){if(0===s.length)throw new ft(900,!1);let c,l=nr.Default;for(let p=0;p<s.length;p++){const y=s[p],b=gs(y);"number"==typeof b?-1===b?c=y.token:l|=b:c=y}n.push(ni(c,l))}else n.push(ni(s))}return n}function ks(e,n){return e[Sr]=n,e.prototype[Sr]=n,e}function gs(e){return e[Sr]}const Wi=ks(Rr("Optional"),8),ts=ks(Rr("SkipSelf"),4);function $i(e,n){return e.hasOwnProperty(di)?e[di]:null}function Oi(e,n){e.forEach(i=>Array.isArray(i)?Oi(i,n):n(i))}function Io(e,n,i){n>=e.length?e.push(i):e.splice(n,0,i)}function ao(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Ki(e,n,i){let s=wi(e,n);return s>=0?e[1|s]=i:(s=~s,function Xo(e,n,i,s){let c=e.length;if(c==n)e.push(i,s);else if(1===c)e.push(s,e[0]),e[0]=i;else{for(c--,e.push(e[c-1],e[c]);c>n;)e[c]=e[c-2],c--;e[n]=i,e[n+1]=s}}(e,s,n,i)),s}function Ls(e,n){const i=wi(e,n);if(i>=0)return e[1|i]}function wi(e,n){return function Yo(e,n,i){let s=0,c=e.length>>i;for(;c!==s;){const l=s+(c-s>>1),p=e[l<<i];if(n===p)return l<<i;p>n?c=l:s=l+1}return~(c<<i)}(e,n,1)}const Ti={},gr=[],Us=new Ye(""),da=new Ye("",-1),Zr=new Ye("");class co{get(n,i=Rs){if(i===Rs){const s=new Error(`NullInjectorError: No provider for ${Xt(n)}!`);throw s.name="NullInjectorError",s}return i}}var sr=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(sr||{}),us=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(us||{}),_s=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(_s||{});function wo(e,n,i){let s=e.length;for(;;){const c=e.indexOf(n,i);if(-1===c)return c;if(0===c||e.charCodeAt(c-1)<=32){const l=n.length;if(c+l===s||e.charCodeAt(c+l)<=32)return c}i=c+1}}function Fi(e,n,i){let s=0;for(;s<i.length;){const c=i[s];if("number"==typeof c){if(0!==c)break;s++;const l=i[s++],p=i[s++],y=i[s++];e.setAttribute(n,p,y,l)}else{const l=c,p=i[++s];q(l)?e.setProperty(n,l,p):e.setAttribute(n,l,p),s++}}return s}function z(e){return 3===e||4===e||6===e}function q(e){return 64===e.charCodeAt(0)}function O(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let i=-1;for(let s=0;s<n.length;s++){const c=n[s];"number"==typeof c?i=c:0===i||ee(e,i,c,null,-1===i||2===i?n[++s]:null)}}return e}function ee(e,n,i,s,c){let l=0,p=e.length;if(-1===n)p=-1;else for(;l<e.length;){const y=e[l++];if("number"==typeof y){if(y===n){p=-1;break}if(y>n){p=l-1;break}}}for(;l<e.length;){const y=e[l];if("number"==typeof y)break;if(y===i){if(null===s)return void(null!==c&&(e[l+1]=c));if(s===e[l+1])return void(e[l+2]=c)}l++,null!==s&&l++,null!==c&&l++}-1!==p&&(e.splice(p,0,n),l=p+1),e.splice(l++,0,i),null!==s&&e.splice(l++,0,s),null!==c&&e.splice(l++,0,c)}const be="ng-template";function un(e,n,i,s){let c=0;if(s){for(;c<n.length&&"string"==typeof n[c];c+=2)if("class"===n[c]&&-1!==wo(n[c+1].toLowerCase(),i,0))return!0}else if(Xn(e))return!1;if(c=n.indexOf(1,c),c>-1){let l;for(;++c<n.length&&"string"==typeof(l=n[c]);)if(l.toLowerCase()===i)return!0}return!1}function Xn(e){return 4===e.type&&e.value!==be}function ys(e,n,i){return n===(4!==e.type||i?e.value:be)}function Zs(e,n,i){let s=4;const c=e.attrs,l=null!==c?function ha(e){for(let n=0;n<e.length;n++)if(z(e[n]))return n;return e.length}(c):0;let p=!1;for(let y=0;y<n.length;y++){const b=n[y];if("number"!=typeof b){if(!p)if(4&s){if(s=2|1&s,""!==b&&!ys(e,b,i)||""===b&&1===n.length){if(fi(s))return!1;p=!0}}else if(8&s){if(null===c||!un(e,c,b,i)){if(fi(s))return!1;p=!0}}else{const B=n[++y],Y=Ts(b,c,Xn(e),i);if(-1===Y){if(fi(s))return!1;p=!0;continue}if(""!==B){let le;if(le=Y>l?"":c[Y+1].toLowerCase(),2&s&&B!==le){if(fi(s))return!1;p=!0}}}}else{if(!p&&!fi(s)&&!fi(b))return!1;if(p&&fi(b))continue;p=!1,s=b|1&s}}return fi(s)||p}function fi(e){return!(1&e)}function Ts(e,n,i,s){if(null===n)return-1;let c=0;if(s||!i){let l=!1;for(;c<n.length;){const p=n[c];if(p===e)return c;if(3===p||6===p)l=!0;else{if(1===p||2===p){let y=n[++c];for(;"string"==typeof y;)y=n[++c];continue}if(4===p)break;if(0===p){c+=4;continue}}c+=l?1:2}return-1}return function ei(e,n){let i=e.indexOf(4);if(i>-1)for(i++;i<e.length;){const s=e[i];if("number"==typeof s)return-1;if(s===n)return i;i++}return-1}(n,e)}function Ta(e,n,i=!1){for(let s=0;s<n.length;s++)if(Zs(e,n[s],i))return!0;return!1}function fa(e,n){return e?":not("+n.trim()+")":n}function Va(e){let n=e[0],i=1,s=2,c="",l=!1;for(;i<e.length;){let p=e[i];if("string"==typeof p)if(2&s){const y=e[++i];c+="["+p+(y.length>0?'="'+y+'"':"")+"]"}else 8&s?c+="."+p:4&s&&(c+=" "+p);else""!==c&&!fi(p)&&(n+=fa(l,c),c=""),s=p,l=l||!fi(s);i++}return""!==c&&(n+=fa(l,c)),n}function Ua(e){return wn(()=>{const n=ga(e),i={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===sr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||us.Emulated,styles:e.styles||gr,_:null,schemas:e.schemas||null,tView:null,id:""};vs(i);const s=e.dependencies;return i.directiveDefs=qi(s,!1),i.pipeDefs=qi(s,!0),i.id=function Tc(e){let n=0;const i=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const c of i)n=Math.imul(31,n)+c.charCodeAt(0)|0;return n+=2147483648,"c"+n}(i),i})}function pa(e){return cr(e)||Wr(e)}function jo(e){return null!==e}function To(e){return wn(()=>({type:e.type,bootstrap:e.bootstrap||gr,declarations:e.declarations||gr,imports:e.imports||gr,exports:e.exports||gr,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Aa(e,n){if(null==e)return Ti;const i={};for(const s in e)if(e.hasOwnProperty(s)){const c=e[s];let l,p,y=_s.None;Array.isArray(c)?(y=c[0],l=c[1],p=c[2]??l):(l=c,p=c),n?(i[l]=y!==_s.None?[s,y]:s,n[l]=p):i[l]=s}return i}function Jo(e){return wn(()=>{const n=ga(e);return vs(n),n})}function Do(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function cr(e){return e[Ir]||null}function Wr(e){return e[li]||null}function ii(e){return e[tr]||null}function Ni(e){const n=cr(e)||Wr(e)||ii(e);return null!==n&&n.standalone}function xi(e,n){const i=e[Fr]||null;if(!i&&!0===n)throw new Error(`Type ${Xt(e)} does not have '\u0275mod' property.`);return i}function ga(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||Ti,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||gr,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Aa(e.inputs,n),outputs:Aa(e.outputs),debugInfo:null}}function vs(e){e.features?.forEach(n=>n(e))}function qi(e,n){if(!e)return null;const i=n?ii:pa;return()=>("function"==typeof e?e():e).map(s=>i(s)).filter(jo)}function Ao(e){return{\u0275providers:e}}function J(...e){return{\u0275providers:I(0,e),\u0275fromNgModule:!0}}function I(e,...n){const i=[],s=new Set;let c;const l=p=>{i.push(p)};return Oi(n,p=>{const y=p;V(y,l,[],s)&&(c||=[],c.push(y))}),void 0!==c&&T(c,l),i}function T(e,n){for(let i=0;i<e.length;i++){const{ngModule:s,providers:c}=e[i];fe(c,l=>{n(l,s)})}}function V(e,n,i,s){if(!(e=xe(e)))return!1;let c=null,l=sn(e);const p=!l&&cr(e);if(l||p){if(p&&!p.standalone)return!1;c=e}else{const b=e.ngModule;if(l=sn(b),!l)return!1;c=b}const y=s.has(c);if(p){if(y)return!1;if(s.add(c),p.dependencies){const b="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const B of b)V(B,n,i,s)}}else{if(!l)return!1;{if(null!=l.imports&&!y){let B;s.add(c);try{Oi(l.imports,Y=>{V(Y,n,i,s)&&(B||=[],B.push(Y))})}finally{}void 0!==B&&T(B,n)}if(!y){const B=$i(c)||(()=>new c);n({provide:c,useFactory:B,deps:gr},c),n({provide:Zr,useValue:c,multi:!0},c),n({provide:Us,useValue:()=>ni(c),multi:!0},c)}const b=l.providers;if(null!=b&&!y){const B=e;fe(b,Y=>{n(Y,B)})}}}return c!==e&&void 0!==e.providers}function fe(e,n){for(let i of e)yr(i)&&(i=i.\u0275providers),Array.isArray(i)?fe(i,n):n(i)}const Pe=Un({provide:String,useValue:Un});function je(e){return null!==e&&"object"==typeof e&&Pe in e}function nn(e){return"function"==typeof e}const ur=new Ye(""),er={},Dn={};let Wn;function Vr(){return void 0===Wn&&(Wn=new co),Wn}class Lr{}class pi extends Lr{get destroyed(){return this._destroyed}constructor(n,i,s,c){super(),this.parent=i,this.source=s,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ma(n,p=>this.processProvider(p)),this.records.set(da,Di(void 0,this)),c.has("environment")&&this.records.set(Lr,Di(void 0,this));const l=this.records.get(ur);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(Zr,gr,nr.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=U(null);try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const i=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of i)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),U(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=hi(this),s=Er(void 0);try{return n()}finally{hi(i),Er(s)}}get(n,i=Rs,s=nr.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Ii))return n[Ii](this);s=oi(s);const l=hi(this),p=Er(void 0);try{if(!(s&nr.SkipSelf)){let b=this.records.get(n);if(void 0===b){const B=function Zo(e){return"function"==typeof e||"object"==typeof e&&e instanceof Ye}(n)&&ri(n);b=B&&this.injectableDefInScope(B)?Di(xn(n),er):null,this.records.set(n,b)}if(null!=b)return this.hydrate(n,b)}return(s&nr.Self?Vr():this.parent).get(n,i=s&nr.Optional&&i===Rs?null:i)}catch(y){if("NullInjectorError"===y.name){if((y[Bi]=y[Bi]||[]).unshift(Xt(n)),l)throw y;return function Ys(e,n,i,s){const c=e[Bi];throw n[Xs]&&c.unshift(n[Xs]),e.message=function Ri(e,n,i,s=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let c=Xt(n);if(Array.isArray(n))c=n.map(Xt).join(" -> ");else if("object"==typeof n){let l=[];for(let p in n)if(n.hasOwnProperty(p)){let y=n[p];l.push(p+":"+("string"==typeof y?JSON.stringify(y):Xt(y)))}c=`{${l.join(", ")}}`}return`${i}${s?"("+s+")":""}[${c}]: ${e.replace(vr,"\n  ")}`}("\n"+e.message,c,i,s),e.ngTokenPath=c,e[Bi]=null,e}(y,n,"R3InjectorError",this.source)}throw y}finally{Er(p),hi(l)}}resolveInjectorInitializers(){const n=U(null),i=hi(this),s=Er(void 0);try{const l=this.get(Us,gr,nr.Self);for(const p of l)p()}finally{hi(i),Er(s),U(n)}}toString(){const n=[],i=this.records;for(const s of i.keys())n.push(Xt(s));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ft(205,!1)}processProvider(n){let i=nn(n=xe(n))?n:xe(n&&n.provide);const s=function uo(e){return je(e)?Di(void 0,e.useValue):Di(Os(e),er)}(n);if(!nn(n)&&!0===n.multi){let c=this.records.get(i);c||(c=Di(void 0,er,!0),c.factory=()=>ps(c.multi),this.records.set(i,c)),i=n,c.multi.push(n)}this.records.set(i,s)}hydrate(n,i){const s=U(null);try{return i.value===er&&(i.value=Dn,i.value=i.factory()),"object"==typeof i.value&&i.value&&function lo(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{U(s)}}injectableDefInScope(n){if(!n.providedIn)return!1;const i=xe(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function xn(e){const n=ri(e),i=null!==n?n.factory:$i(e);if(null!==i)return i;if(e instanceof Ye)throw new ft(204,!1);if(e instanceof Function)return function os(e){if(e.length>0)throw new ft(204,!1);const i=function kt(e){return e&&(e[ne]||e[Ie])||null}(e);return null!==i?()=>i.factory(e):()=>new e}(e);throw new ft(204,!1)}function Os(e,n,i){let s;if(nn(e)){const c=xe(e);return $i(c)||xn(c)}if(je(e))s=()=>xe(e.useValue);else if(function Pt(e){return!(!e||!e.useFactory)}(e))s=()=>e.useFactory(...ps(e.deps||[]));else if(function ut(e){return!(!e||!e.useExisting)}(e))s=()=>ni(xe(e.useExisting));else{const c=xe(e&&(e.useClass||e.provide));if(!function ls(e){return!!e.deps}(e))return $i(c)||xn(c);s=()=>new c(...ps(e.deps))}return s}function Di(e,n,i=!1){return{factory:e,value:n,multi:i?[]:void 0}}function ma(e,n){for(const i of e)Array.isArray(i)?ma(i,n):i&&yr(i)?ma(i.\u0275providers,n):n(i)}function ds(e,n){e instanceof pi&&e.assertNotDestroyed();const s=hi(e),c=Er(void 0);try{return n()}finally{hi(s),Er(c)}}function Es(){return void 0!==xs()||null!=function Lo(){return Jr}()}const xr=0,Qt=1,_n=2,pr=3,Ai=4,gi=5,rs=6,js=7,mi=8,Kr=9,ho=10,Yn=11,$o=12,El=13,ai=14,jn=15,Dc=16,tc=17,Ho=18,_a=19,Il=20,ea=21,nc=22,Is=23,Kn=25,rc=1,bo=7,Sa=9,bi=10;var Su=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Su||{});function Ds(e){return Array.isArray(e)&&"object"==typeof e[rc]}function As(e){return Array.isArray(e)&&!0===e[rc]}function Kc(e){return!!(4&e.flags)}function ta(e){return e.componentOffset>-1}function qc(e){return!(1&~e.flags)}function to(e){return!!e.template}function Ba(e){return!!(512&e[_n])}class te{constructor(n,i,s){this.previousValue=n,this.currentValue=i,this.firstChange=s}isFirstChange(){return this.firstChange}}function De(e,n,i,s){null!==n?n.applyValueToInputSignal(n,s):e[i]=s}function It(){return lt}function lt(e){return e.type.prototype.ngOnChanges&&(e.setInput=Jn),hn}function hn(){const e=Vi(this),n=e?.current;if(n){const i=e.previous;if(i===Ti)e.previous=n;else for(let s in n)i[s]=n[s];e.current=null,this.ngOnChanges(n)}}function Jn(e,n,i,s,c){const l=this.declaredInputs[s],p=Vi(e)||function Ac(e,n){return e[lr]=n}(e,{previous:Ti,current:null}),y=p.current||(p.current={}),b=p.previous,B=b[l];y[l]=new te(B&&B.currentValue,i,b===Ti),De(e,n,c,i)}It.ngInherit=!0;const lr="__ngSimpleChanges__";function Vi(e){return e[lr]||null}const $s=function(e,n,i){};let ku=!1;function Pr(e){for(;Array.isArray(e);)e=e[xr];return e}function Jc(e,n){return Pr(n[e])}function Hs(e,n){return Pr(n[e.index])}function sc(e,n){return e.data[n]}function oc(e,n){return e[n]}function zo(e,n){const i=n[e];return Ds(i)?i:i[xr]}function Zc(e){return!(128&~e[_n])}function no(e,n){return null==n?null:e[n]}function tf(e){e[tc]=0}function Ga(e){1024&e[_n]||(e[_n]|=1024,Zc(e)&&Fu(e))}function bl(e){return!!(9216&e[_n]||e[Is]?.dirty)}function bc(e){e[ho].changeDetectionScheduler?.notify(1),bl(e)?Fu(e):64&e[_n]&&(function $a(){return ku}()?(e[_n]|=1024,Fu(e)):e[ho].changeDetectionScheduler?.notify())}function Fu(e){e[ho].changeDetectionScheduler?.notify();let n=po(e);for(;null!==n&&!(8192&n[_n])&&(n[_n]|=8192,Zc(n));)n=po(n)}function Sl(e,n){if(!(256&~e[_n]))throw new ft(911,!1);null===e[ea]&&(e[ea]=[]),e[ea].push(n)}function po(e){const n=e[pr];return As(n)?n[pr]:n}const Hn={lFrame:cf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Pl(){return Hn.bindingsEnabled}function Vt(){return Hn.lFrame.lView}function Mr(){return Hn.lFrame.tView}function Ol(e){return Hn.lFrame.contextLView=e,e[mi]}function Vu(e){return Hn.lFrame.contextLView=null,e}function Br(){let e=Sc();for(;null!==e&&64===e.type;)e=e.parent;return e}function Sc(){return Hn.lFrame.currentTNode}function va(e,n){const i=Hn.lFrame;i.currentTNode=e,i.isParent=n}function Lu(){return Hn.lFrame.isParent}function Ns(){const e=Hn.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function ia(){return Hn.lFrame.bindingIndex++}function Pd(e,n){const i=Hn.lFrame;i.bindingIndex=i.bindingRootIndex=e,Rc(n)}function Rc(e){Hn.lFrame.currentDirectiveIndex=e}function Nl(){return Hn.lFrame.currentQueryIndex}function xl(e){Hn.lFrame.currentQueryIndex=e}function sf(e){const n=e[Qt];return 2===n.type?n.declTNode:1===n.type?e[gi]:null}function af(e,n,i){if(i&nr.SkipSelf){let c=n,l=e;for(;!(c=c.parent,null!==c||i&nr.Host||(c=sf(l),null===c||(l=l[ai],10&c.type))););if(null===c)return!1;n=c,e=l}const s=Hn.lFrame=Rd();return s.currentTNode=n,s.lView=e,!0}function tu(e){const n=Rd(),i=e[Qt];Hn.lFrame=n,n.currentTNode=i.firstChild,n.lView=e,n.tView=i,n.contextLView=e,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function Rd(){const e=Hn.lFrame,n=null===e?null:e.child;return null===n?cf(e):n}function cf(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Uu(){const e=Hn.lFrame;return Hn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const uf=Uu;function kl(){const e=Uu();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Cs(){return Hn.lFrame.selectedIndex}function cc(e){Hn.lFrame.selectedIndex=e}function Si(){const e=Hn.lFrame;return sc(e.tView,e.selectedIndex)}let nu=!0;function Qi(){return nu}function Pa(e){nu=e}function Fl(e,n){for(let i=n.directiveStart,s=n.directiveEnd;i<s;i++){const l=e.data[i].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:y,ngAfterViewInit:b,ngAfterViewChecked:B,ngOnDestroy:Y}=l;p&&(e.contentHooks??=[]).push(-i,p),y&&((e.contentHooks??=[]).push(i,y),(e.contentCheckHooks??=[]).push(i,y)),b&&(e.viewHooks??=[]).push(-i,b),B&&((e.viewHooks??=[]).push(i,B),(e.viewCheckHooks??=[]).push(i,B)),null!=Y&&(e.destroyHooks??=[]).push(i,Y)}}function Bu(e,n,i){$u(e,n,3,i)}function Nc(e,n,i,s){(3&e[_n])===i&&$u(e,n,i,s)}function ju(e,n){let i=e[_n];(3&i)===n&&(i&=16383,i+=1,e[_n]=i)}function $u(e,n,i,s){const l=s??-1,p=n.length-1;let y=0;for(let b=void 0!==s?65535&e[tc]:0;b<p;b++)if("number"==typeof n[b+1]){if(y=n[b],null!=s&&y>=s)break}else n[b]<0&&(e[tc]+=65536),(y<l||-1==l)&&(Nd(e,i,n,b),e[tc]=(4294901760&e[tc])+b+2),b++}function Vl(e,n){$s(4,e,n);const i=U(null);try{n.call(e)}finally{U(i),$s(5,e,n)}}function Nd(e,n,i,s){const c=i[s]<0,l=i[s+1],y=e[c?-i[s]:i[s]];c?e[_n]>>14<e[tc]>>16&&(3&e[_n])===n&&(e[_n]+=16384,Vl(y,l)):Vl(y,l)}const uc=-1;class Ma{constructor(n,i,s){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=s}}function Bl(e){return e!==uc}function ru(e){return 32767&e}function xc(e,n){let i=function Zp(e){return e>>16}(e),s=n;for(;i>0;)s=s[ai],i--;return s}let E=!0;function h(e){const n=E;return E=e,n}const D=255,K=5;let ae=0;const Ve={};function $t(e,n){const i=$n(e,n);if(-1!==i)return i;const s=n[Qt];s.firstCreatePass&&(e.injectorIndex=n.length,In(s.data,e),In(n,null),In(s.blueprint,null));const c=Dr(e,n),l=e.injectorIndex;if(Bl(c)){const p=ru(c),y=xc(c,n),b=y[Qt].data;for(let B=0;B<8;B++)n[l+B]=y[p+B]|b[p+B]}return n[l+8]=c,l}function In(e,n){e.push(0,0,0,0,0,0,0,0,n)}function $n(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Dr(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let i=0,s=null,c=n;for(;null!==c;){if(s=w_(c),null===s)return uc;if(i++,c=c[ai],-1!==s.injectorIndex)return s.injectorIndex|i<<16}return uc}function io(e,n,i){!function Dt(e,n,i){let s;"string"==typeof i?s=i.charCodeAt(0)||0:i.hasOwnProperty(Ei)&&(s=i[Ei]),null==s&&(s=i[Ei]=ae++);const c=s&D;n.data[e+(c>>K)]|=1<<c}(e,n,i)}function Hu(e,n,i){if(i&nr.Optional||void 0!==e)return e;vo()}function Gu(e,n,i,s){if(i&nr.Optional&&void 0===s&&(s=null),!(i&(nr.Self|nr.Host))){const c=e[Kr],l=Er(void 0);try{return c?c.get(n,s,i&nr.Optional):Vo(n,s,i&nr.Optional)}finally{Er(l)}}return Hu(s,0,i)}function zu(e,n,i,s=nr.Default,c){if(null!==e){if(2048&n[_n]&&!(s&nr.Self)){const p=function Jv(e,n,i,s,c){let l=e,p=n;for(;null!==l&&null!==p&&2048&p[_n]&&!(512&p[_n]);){const y=jl(l,p,i,s|nr.Self,Ve);if(y!==Ve)return y;let b=l.parent;if(!b){const B=p[Il];if(B){const Y=B.get(i,Ve,s);if(Y!==Ve)return Y}b=w_(p),p=p[ai]}l=b}return c}(e,n,i,s,Ve);if(p!==Ve)return p}const l=jl(e,n,i,s,Ve);if(l!==Ve)return l}return Gu(n,i,s,c)}function jl(e,n,i,s,c){const l=function Wu(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Ei)?e[Ei]:void 0;return"number"==typeof n?n>=0?n&D:C_:n}(i);if("function"==typeof l){if(!af(n,e,s))return s&nr.Host?Hu(c,0,s):Gu(n,i,s,c);try{let p;if(p=l(s),null!=p||s&nr.Optional)return p;vo()}finally{uf()}}else if("number"==typeof l){let p=null,y=$n(e,n),b=uc,B=s&nr.Host?n[jn][gi]:null;for((-1===y||s&nr.SkipSelf)&&(b=-1===y?Dr(e,n):n[y+8],b!==uc&&Ku(s,!1)?(p=n[Qt],y=ru(b),n=xc(b,n)):y=-1);-1!==y;){const Y=n[Qt];if(iu(l,y,Y.data)){const le=$l(y,n,i,p,s,B);if(le!==Ve)return le}b=n[y+8],b!==uc&&Ku(s,n[Qt].data[y+8]===B)&&iu(l,y,n)?(p=Y,y=ru(b),n=xc(b,n)):y=-1}}return c}function $l(e,n,i,s,c,l){const p=n[Qt],y=p.data[e+8],Y=Ka(y,p,i,null==s?ta(y)&&E:s!=p&&!!(3&y.type),c&nr.Host&&l===y);return null!==Y?sa(n,p,Y,y):Ve}function Ka(e,n,i,s,c){const l=e.providerIndexes,p=n.data,y=1048575&l,b=e.directiveStart,Y=l>>20,Ne=c?y+Y:e.directiveEnd;for(let We=s?y:y+Y;We<Ne;We++){const ht=p[We];if(We<b&&i===ht||We>=b&&ht.type===i)return We}if(c){const We=p[b];if(We&&to(We)&&We.type===i)return b}return null}function sa(e,n,i,s){let c=e[i];const l=n.data;if(function Ll(e){return e instanceof Ma}(c)){const p=c;p.resolving&&function oo(e,n){throw n&&n.join(" > "),new ft(-200,e)}(function ar(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Rn(e)}(l[i]));const y=h(p.canSeeViewProviders);p.resolving=!0;const B=p.injectImpl?Er(p.injectImpl):null;af(e,s,nr.Default);try{c=e[i]=p.factory(void 0,l,e,s),n.firstCreatePass&&i>=s.directiveStart&&function Od(e,n,i){const{ngOnChanges:s,ngOnInit:c,ngDoCheck:l}=n.type.prototype;if(s){const p=lt(n);(i.preOrderHooks??=[]).push(e,p),(i.preOrderCheckHooks??=[]).push(e,p)}c&&(i.preOrderHooks??=[]).push(0-e,c),l&&((i.preOrderHooks??=[]).push(e,l),(i.preOrderCheckHooks??=[]).push(e,l))}(i,l[i],n)}finally{null!==B&&Er(B),h(y),p.resolving=!1,uf()}}return c}function iu(e,n,i){return!!(i[n+(e>>K)]&1<<e)}function Ku(e,n){return!(e&nr.Self||e&nr.Host&&n)}class Ss{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,s){return zu(this._tNode,this._lView,n,oi(s),i)}}function C_(){return new Ss(Br(),Vt())}function Fd(e){return wn(()=>{const n=e.prototype.constructor,i=n[di]||Vd(n),s=Object.prototype;let c=Object.getPrototypeOf(e.prototype).constructor;for(;c&&c!==s;){const l=c[di]||Vd(c);if(l&&l!==i)return l;c=Object.getPrototypeOf(c)}return l=>new l})}function Vd(e){return Te(e)?()=>{const n=Vd(xe(e));return n&&n()}:$i(e)}function w_(e){const n=e[Qt],i=n.type;return 2===i?n.declTNode:1===i?e[gi]:null}function zs(e){return function Ra(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const i=e.attrs;if(i){const s=i.length;let c=0;for(;c<s;){const l=i[c];if(z(l))break;if(0===l)c+=2;else if("number"==typeof l)for(c++;c<s&&"string"==typeof i[c];)c++;else{if(l===n)return i[c+1];c+=2}}}return null}(Br(),e)}function ff(e,n=null,i=null,s){const c=Bd(e,n,i,s);return c.resolveInjectorInitializers(),c}function Bd(e,n=null,i=null,s,c=new Set){const l=[i||gr,J(e)];return s=s||("object"==typeof e?void 0:Xt(e)),new pi(l,n||Vr(),s||null,c)}let so=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Rs;static#t=this.NULL=new co;static create(i,s){if(Array.isArray(i))return ff({name:""},s,i,"");{const c=i.name??"";return ff({name:c},i.parent,i.providers,c)}}static#n=this.\u0275prov=ir({token:e,providedIn:"any",factory:()=>ni(da)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function jd(e){return e.ngOriginalError}class So{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&jd(n);for(;i&&jd(i);)i=jd(i);return i||null}}const rg=new Ye("",{providedIn:"root",factory:()=>cn(So).handleError.bind(void 0)});let Gl=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=rE;static#t=this.__NG_ENV_ID__=i=>i}return e})();class ig extends Gl{constructor(n){super(),this._lView=n}onDestroy(n){return Sl(this._lView,n),()=>function za(e,n){if(null===e[ea])return;const i=e[ea].indexOf(n);-1!==i&&e[ea].splice(i,1)}(this._lView,n)}}function rE(){return new ig(Vt())}function og(){return qu(Br(),Vt())}function qu(e,n){return new hc(Hs(e,n))}let hc=(()=>{class e{constructor(i){this.nativeElement=i}static#e=this.__NG_ELEMENT_ID__=og}return e})();function gf(e){return e instanceof hc?e.nativeElement:e}function ag(e){return n=>{setTimeout(e,void 0,n)}}const Qa=class iE extends Ln.B{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,Es()&&(this.destroyRef=cn(Gl,{optional:!0})??void 0)}emit(n){const i=U(null);try{super.next(n)}finally{U(i)}}subscribe(n,i,s){let c=n,l=i||(()=>null),p=s;if(n&&"object"==typeof n){const b=n;c=b.next?.bind(b),l=b.error?.bind(b),p=b.complete?.bind(b)}this.__isAsync&&(l=ag(l),c&&(c=ag(c)),p&&(p=ag(p)));const y=super.subscribe({next:c,error:l,complete:p});return n instanceof rt.yU&&n.add(y),y}};function R_(){return this._results[Symbol.iterator]()}class cg{static#e=Symbol.iterator;get changes(){return this._changes??=new Qa}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const i=cg.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=R_)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){this.dirty=!1;const s=function ns(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Uo(e,n,i){if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++){let c=e[s],l=n[s];if(i&&(c=i(c),l=i(l)),l!==c)return!1}return!0}(this._results,s,i))&&(this._results=s,this.length=s.length,this.last=s[this.length-1],this.first=s[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function zl(e){return!(128&~e.flags)}const $d=new Map;let N_=0;const vf="__ngContext__";function Ps(e,n){Ds(n)?(e[vf]=n[_a],function lg(e){$d.set(e[_a],e)}(n)):e[vf]=n}function V_(e){return L_(e[$o])}function _g(e){return L_(e[Ai])}function L_(e){for(;null!==e&&!As(e);)e=e[Ai];return e}let Dg;function Ag(e){Dg=e}const wf=new Ye("",{providedIn:"root",factory:()=>H_}),H_="ng",Tf=new Ye(""),Df=new Ye("",{providedIn:"platform",factory:()=>"unknown"}),bg=new Ye(""),dE=new Ye("",{providedIn:"root",factory:()=>function cu(){if(void 0!==Dg)return Dg;if(typeof document<"u")return document;throw new ft(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let z_=()=>null;function Xd(e,n,i=!1){return z_(e,n,i)}const X_=new Ye("",{providedIn:"root",factory:()=>!1});let Ql;function $g(e){return function eh(){if(void 0===Ql&&(Ql=null,Nn.trustedTypes))try{Ql=Nn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ql}()?.createScriptURL(e)||e}class tl{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bt})`}}function fu(e){return e instanceof tl?e.changingThisBreaksApplicationSecurity:e}function nh(e,n){const i=function _E(e){return e instanceof tl&&e.getTypeName()||null}(e);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${bt})`)}return i===n}const wE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var il=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(il||{});function Nf(e){const n=Fc();return n?n.sanitize(il.URL,e)||"":nh(e,"URL")?fu(e):function Pf(e){return(e=String(e)).match(wE)?e:"unsafe:"+e}(Rn(e))}function oy(e){const n=Fc();if(n)return $g(n.sanitize(il.RESOURCE_URL,e)||"");if(nh(e,"ResourceURL"))return $g(fu(e));throw new ft(904,!1)}function ay(e,n,i){return function J0(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?oy:Nf}(n,i)(e)}function Fc(){const e=Vt();return e&&e[ho].sanitizer}function Ea(e){return e instanceof Function?e():e}var Xa=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Xa||{});let ol;function nm(e,n){return ol(e,n)}function oh(e,n,i,s,c){if(null!=s){let l,p=!1;As(s)?l=s:Ds(s)&&(p=!0,s=s[xr]);const y=Pr(s);0===e&&null!==i?null==c?_y(n,i,y):_c(n,i,y,c||null,!0):1===e&&null!==i?_c(n,i,y,c||null,!0):2===e?function hh(e,n,i){const s=im(e,n);s&&function nC(e,n,i,s){e.removeChild(n,i,s)}(e,s,n,i)}(n,y,p):3===e&&n.destroyNode(y),null!=l&&function zE(e,n,i,s,c){const l=i[bo];l!==Pr(i)&&oh(n,e,s,l,c);for(let y=bi;y<i.length;y++){const b=i[y];Wf(b[Qt],b,e,n,s,l)}}(n,e,l,i,c)}}function al(e,n,i){return e.createElement(n,i)}function ah(e,n){n[ho].changeDetectionScheduler?.notify(1),Wf(e,n,n[Yn],2,null,null)}function py(e,n){const i=e[Sa],s=i.indexOf(n);i.splice(s,1)}function ch(e,n){if(e.length<=bi)return;const i=bi+n,s=e[i];if(s){const c=s[Dc];null!==c&&c!==e&&py(c,s),n>0&&(e[i-1][Ai]=s[Ai]);const l=ao(e,bi+n);!function BE(e,n){ah(e,n),n[xr]=null,n[gi]=null}(s[Qt],s);const p=l[Ho];null!==p&&p.detachView(l[Qt]),s[pr]=null,s[Ai]=null,s[_n]&=-129}return s}function uh(e,n){if(!(256&n[_n])){const i=n[Yn];i.destroyNode&&Wf(e,n,i,3,null,null),function $E(e){let n=e[$o];if(!n)return Hf(e[Qt],e);for(;n;){let i=null;if(Ds(n))i=n[$o];else{const s=n[bi];s&&(i=s)}if(!i){for(;n&&!n[Ai]&&n!==e;)Ds(n)&&Hf(n[Qt],n),n=n[pr];null===n&&(n=e),Ds(n)&&Hf(n[Qt],n),i=n&&n[Ai]}n=i}}(n)}}function Hf(e,n){if(256&n[_n])return;const i=U(null);try{n[_n]&=-129,n[_n]|=256,n[Is]&&function ce(e){if(qe(e),Ce(e))for(let n=0;n<e.producerNode.length;n++)ue(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}(n[Is]),function my(e,n){let i;if(null!=e&&null!=(i=e.destroyHooks))for(let s=0;s<i.length;s+=2){const c=n[i[s]];if(!(c instanceof Ma)){const l=i[s+1];if(Array.isArray(l))for(let p=0;p<l.length;p+=2){const y=c[l[p]],b=l[p+1];$s(4,y,b);try{b.call(y)}finally{$s(5,y,b)}}else{$s(4,c,l);try{l.call(c)}finally{$s(5,c,l)}}}}}(e,n),function gy(e,n){const i=e.cleanup,s=n[js];if(null!==i)for(let l=0;l<i.length-1;l+=2)if("string"==typeof i[l]){const p=i[l+3];p>=0?s[p]():s[-p].unsubscribe(),l+=2}else i[l].call(s[i[l+1]]);null!==s&&(n[js]=null);const c=n[ea];if(null!==c){n[ea]=null;for(let l=0;l<c.length;l++)(0,c[l])()}}(e,n),1===n[Qt].type&&n[Yn].destroy();const s=n[Dc];if(null!==s&&As(n[pr])){s!==n[pr]&&py(s,n);const c=n[Ho];null!==c&&c.detachView(e)}!function Wl(e){$d.delete(e[_a])}(n)}finally{U(i)}}function Gf(e,n,i){return function zf(e,n,i){let s=n;for(;null!==s&&40&s.type;)s=(n=s).parent;if(null===s)return i[xr];{const{componentOffset:c}=s;if(c>-1){const{encapsulation:l}=e.data[s.directiveStart+c];if(l===us.None||l===us.Emulated)return null}return Hs(s,i)}}(e,n.parent,i)}function _c(e,n,i,s,c){e.insertBefore(n,i,s,c)}function _y(e,n,i){e.appendChild(n,i)}function GE(e,n,i,s,c){null!==s?_c(e,n,i,s,c):_y(e,n,i)}function im(e,n){return e.parentNode(n)}let vc,ed=function yc(e,n,i){return 40&e.type?Hs(e,i):null};function lh(e,n,i,s){const c=Gf(e,s,n),l=n[Yn],y=function gu(e,n,i){return ed(e,n,i)}(s.parent||n[gi],s,n);if(null!=c)if(Array.isArray(i))for(let b=0;b<i.length;b++)GE(l,c,i[b],y,!1);else GE(l,c,i,y,!1);void 0!==vc&&vc(l,s,n,i,c)}function dh(e,n){if(null!==n){const i=n.type;if(3&i)return Hs(n,e);if(4&i)return sm(-1,e[n.index]);if(8&i){const s=n.child;if(null!==s)return dh(e,s);{const c=e[n.index];return As(c)?sm(-1,c):Pr(c)}}if(32&i)return nm(n,e)()||Pr(e[n.index]);{const s=Uc(e,n);return null!==s?Array.isArray(s)?s[0]:dh(po(e[jn]),s):dh(e,n.next)}}return null}function Uc(e,n){return null!==n?e[jn][gi].projection[n.projection]:null}function sm(e,n){const i=bi+e+1;if(i<n.length){const s=n[i],c=s[Qt].firstChild;if(null!==c)return dh(s,c)}return n[bo]}function om(e,n,i,s,c,l,p){for(;null!=i;){const y=s[i.index],b=i.type;if(p&&0===n&&(y&&Ps(Pr(y),s),i.flags|=2),32&~i.flags)if(8&b)om(e,n,i.child,s,c,l,!1),oh(n,e,c,y,l);else if(32&b){const B=nm(i,s);let Y;for(;Y=B();)oh(n,e,c,Y,l);oh(n,e,c,y,l)}else 16&b?am(e,n,s,i,c,l):oh(n,e,c,y,l);i=p?i.projectionNext:i.next}}function Wf(e,n,i,s,c,l){om(i,s,e.firstChild,n,c,l,!1)}function am(e,n,i,s,c,l){const p=i[jn],b=p[gi].projection[s.projection];if(Array.isArray(b))for(let B=0;B<b.length;B++)oh(n,e,c,b[B],l);else{let B=b;const Y=p[pr];zl(s)&&(B.flags|=128),om(e,n,B,Y,c,l,!0)}}function Cy(e,n,i){""===i?e.removeAttribute(n,"class"):e.setAttribute(n,"class",i)}function cl(e,n,i){const{mergedAttrs:s,classes:c,styles:l}=i;null!==s&&Fi(e,n,s),null!==c&&Cy(e,n,c),null!==l&&function Iy(e,n,i){e.setAttribute(n,"style",i)}(e,n,l)}const mr={};function KE(e=1){wy(Mr(),Vt(),Cs()+e,!1)}function wy(e,n,i,s){if(!s)if(3&~n[_n]){const l=e.preOrderHooks;null!==l&&Nc(n,l,0,i)}else{const l=e.preOrderCheckHooks;null!==l&&Bu(n,l,i)}cc(i)}function td(e,n=nr.Default){const i=Vt();return null===i?ni(e,n):zu(Br(),i,xe(e),n)}function Ty(){throw new Error("invalid")}function Dy(e,n,i,s,c,l){const p=U(null);try{let y=null;c&_s.SignalBased&&(y=n[s][Me]),null!==y&&void 0!==y.transformFn&&(l=y.transformFn(l)),c&_s.HasDecoratorInputTransform&&(l=e.inputTransforms[s].call(n,l)),null!==e.setInput?e.setInput(n,y,l,i,s):De(n,y,s,l)}finally{U(p)}}function cm(e,n,i,s,c,l,p,y,b,B,Y){const le=n.blueprint.slice();return le[xr]=c,le[_n]=204|s,(null!==B||e&&2048&e[_n])&&(le[_n]|=2048),tf(le),le[pr]=le[ai]=e,le[mi]=i,le[ho]=p||e&&e[ho],le[Yn]=y||e&&e[Yn],le[Kr]=b||e&&e[Kr]||null,le[gi]=l,le[_a]=function ug(){return N_++}(),le[rs]=Y,le[Il]=B,le[jn]=2==n.type?e[jn]:le,le}function fh(e,n,i,s,c){let l=e.data[n];if(null===l)l=function Ay(e,n,i,s,c){const l=Sc(),p=Lu(),b=e.data[n]=function eI(e,n,i,s,c,l){let p=n?n.injectorIndex:-1,y=0;return function Wa(){return null!==Hn.skipHydrationRootTNode}()&&(y|=128),{type:i,index:s,insertBeforeIndex:null,injectorIndex:p,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:y,providerIndexes:0,value:c,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?l:l&&l.parent,i,n,s,c);return null===e.firstChild&&(e.firstChild=b),null!==l&&(p?null==l.child&&null!==b.parent&&(l.child=b):null===l.next&&(l.next=b,b.prev=l)),b}(e,n,i,s,c),function qp(){return Hn.lFrame.inI18n}()&&(l.flags|=32);else if(64&l.type){l.type=i,l.value=s,l.attrs=c;const p=function ra(){const e=Hn.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();l.injectorIndex=null===p?-1:p.injectorIndex}return va(l,!0),l}function Kf(e,n,i,s){if(0===i)return-1;const c=n.length;for(let l=0;l<i;l++)n.push(s),e.blueprint.push(s),e.data.push(null);return c}function by(e,n,i,s,c){const l=Cs(),p=2&s;try{cc(-1),p&&n.length>Kn&&wy(e,n,Kn,!1),$s(p?2:0,c),i(s,c)}finally{cc(l),$s(p?3:1,c)}}function um(e,n,i){if(Kc(n)){const s=U(null);try{const l=n.directiveEnd;for(let p=n.directiveStart;p<l;p++){const y=e.data[p];y.contentQueries&&y.contentQueries(1,i[p],p)}}finally{U(s)}}}function lm(e,n,i){Pl()&&(function uC(e,n,i,s){const c=i.directiveStart,l=i.directiveEnd;ta(i)&&function ph(e,n,i){const s=Hs(n,e),c=Py(i);let p=16;i.signals?p=4096:i.onPush&&(p=64);const y=mh(e,cm(e,c,null,p,s,n,null,e[ho].rendererFactory.createRenderer(s,i),null,null,null));e[n.index]=y}(n,i,e.data[c+i.componentOffset]),e.firstCreatePass||$t(i,n),Ps(s,n);const p=i.initialInputs;for(let y=c;y<l;y++){const b=e.data[y],B=sa(n,e,y,i);Ps(B,n),null!==p&&sI(0,y-c,B,b,0,p),to(b)&&(zo(i.index,n)[mi]=sa(n,e,y,i))}}(e,n,i,Hs(i,n)),!(64&~i.flags)&&rI(e,n,i))}function Sy(e,n,i=Hs){const s=n.localNames;if(null!==s){let c=n.index+1;for(let l=0;l<s.length;l+=2){const p=s[l+1],y=-1===p?i(n,e):e[p];e[c++]=y}}}function Py(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=qf(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function qf(e,n,i,s,c,l,p,y,b,B,Y){const le=Kn+s,Ne=le+c,We=function mu(e,n){const i=[];for(let s=0;s<n;s++)i.push(s<e?null:mr);return i}(le,Ne),ht="function"==typeof B?B():B;return We[Qt]={type:e,blueprint:We,template:i,queries:null,viewQuery:y,declTNode:n,data:We.slice().fill(null,le),bindingStartIndex:le,expandoStartIndex:Ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:b,consts:ht,incompleteFirstPass:!1,ssrId:Y}}let My=()=>null;function tI(e,n,i,s,c){for(let l in n){if(!n.hasOwnProperty(l))continue;const p=n[l];if(void 0===p)continue;s??={};let y,b=_s.None;Array.isArray(p)?(y=p[0],b=p[1]):y=p;let B=l;if(null!==c){if(!c.hasOwnProperty(l))continue;B=c[l]}0===e?nI(s,i,B,y,b):nI(s,i,B,y)}return s}function nI(e,n,i,s,c){let l;e.hasOwnProperty(i)?(l=e[i]).push(n,s):l=e[i]=[n,s],void 0!==c&&l.push(c)}function aa(e,n,i,s,c,l,p,y){const b=Hs(n,i);let Y,B=n.inputs;!y&&null!=B&&(Y=B[s])?(ul(e,i,Y,s,c),ta(n)&&function oC(e,n){const i=zo(n,e);16&i[_n]||(i[_n]|=64)}(i,n.index)):3&n.type&&(s=function Ry(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(s),c=null!=p?p(c,n.value||"",s):c,l.setProperty(b,s,c))}function Oy(e,n,i,s){if(Pl()){const c=null===s?null:{"":-1},l=function Qf(e,n){const i=e.directiveRegistry;let s=null,c=null;if(i)for(let l=0;l<i.length;l++){const p=i[l];if(Ta(n,p.selectors,!1))if(s||(s=[]),to(p))if(null!==p.findHostDirectiveDefs){const y=[];c=c||new Map,p.findHostDirectiveDefs(p,y,c),s.unshift(...y,p),fm(e,n,y.length)}else s.unshift(p),fm(e,n,0);else c=c||new Map,p.findHostDirectiveDefs?.(p,s,c),s.push(p)}return null===s?null:[s,c]}(e,i);let p,y;null===l?p=y=null:[p,y]=l,null!==p&&dm(e,n,i,p,c,y),c&&function iI(e,n,i){if(n){const s=e.localNames=[];for(let c=0;c<n.length;c+=2){const l=i[n[c+1]];if(null==l)throw new ft(-301,!1);s.push(n[c],l)}}}(i,s,c)}i.mergedAttrs=O(i.mergedAttrs,i.attrs)}function dm(e,n,i,s,c,l){for(let B=0;B<s.length;B++)io($t(i,n),e,s[B].type);!function xy(e,n,i){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+i,e.providerIndexes=n}(i,e.data.length,s.length);for(let B=0;B<s.length;B++){const Y=s[B];Y.providersResolver&&Y.providersResolver(Y)}let p=!1,y=!1,b=Kf(e,n,s.length,null);for(let B=0;B<s.length;B++){const Y=s[B];i.mergedAttrs=O(i.mergedAttrs,Y.hostAttrs),ky(e,i,n,b,Y),pm(b,Y,c),null!==Y.contentQueries&&(i.flags|=4),(null!==Y.hostBindings||null!==Y.hostAttrs||0!==Y.hostVars)&&(i.flags|=64);const le=Y.type.prototype;!p&&(le.ngOnChanges||le.ngOnInit||le.ngDoCheck)&&((e.preOrderHooks??=[]).push(i.index),p=!0),!y&&(le.ngOnChanges||le.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(i.index),y=!0),b++}!function sC(e,n,i){const c=n.directiveEnd,l=e.data,p=n.attrs,y=[];let b=null,B=null;for(let Y=n.directiveStart;Y<c;Y++){const le=l[Y],Ne=i?i.get(le):null,ht=Ne?Ne.outputs:null;b=tI(0,le.inputs,Y,b,Ne?Ne.inputs:null),B=tI(1,le.outputs,Y,B,ht);const Ut=null===b||null===p||Xn(n)?null:Fy(b,Y,p);y.push(Ut)}null!==b&&(b.hasOwnProperty("class")&&(n.flags|=8),b.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=y,n.inputs=b,n.outputs=B}(e,i,l)}function rI(e,n,i){const s=i.directiveStart,c=i.directiveEnd,l=i.index,p=function ac(){return Hn.lFrame.currentDirectiveIndex}();try{cc(l);for(let y=s;y<c;y++){const b=e.data[y],B=n[y];Rc(y),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&hm(b,B)}}finally{cc(-1),Rc(p)}}function hm(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function fm(e,n,i){n.componentOffset=i,(e.components??=[]).push(n.index)}function pm(e,n,i){if(i){if(n.exportAs)for(let s=0;s<n.exportAs.length;s++)i[n.exportAs[s]]=e;to(n)&&(i[""]=e)}}function ky(e,n,i,s,c){e.data[s]=c;const l=c.factory||(c.factory=$i(c.type)),p=new Ma(l,to(c),td);e.blueprint[s]=p,i[s]=p,function Ny(e,n,i,s,c){const l=c.hostBindings;if(l){let p=e.hostBindingOpCodes;null===p&&(p=e.hostBindingOpCodes=[]);const y=~n.index;(function cC(e){let n=e.length;for(;n>0;){const i=e[--n];if("number"==typeof i&&i<0)return i}return 0})(p)!=y&&p.push(y),p.push(i,s,l)}}(e,n,s,Kf(e,i,c.hostVars,mr),c)}function Na(e,n,i,s,c,l){const p=Hs(e,n);!function gm(e,n,i,s,c,l,p){if(null==l)e.removeAttribute(n,c,i);else{const y=null==p?Rn(l):p(l,s||"",c);e.setAttribute(n,c,y,i)}}(n[Yn],p,l,e.value,i,s,c)}function sI(e,n,i,s,c,l){const p=l[n];if(null!==p)for(let y=0;y<p.length;)Dy(s,i,p[y++],p[y++],p[y++],p[y++])}function Fy(e,n,i){let s=null,c=0;for(;c<i.length;){const l=i[c];if(0!==l)if(5!==l){if("number"==typeof l)break;if(e.hasOwnProperty(l)){null===s&&(s=[]);const p=e[l];for(let y=0;y<p.length;y+=3)if(p[y]===n){s.push(l,p[y+1],p[y+2],i[c+1]);break}}c+=2}else c+=2;else c+=4}return s}function gh(e,n,i,s){return[e,!0,0,n,null,s,null,i,null,null]}function Vy(e,n){const i=e.contentQueries;if(null!==i){const s=U(null);try{for(let c=0;c<i.length;c+=2){const p=i[c+1];if(-1!==p){const y=e.data[p];xl(i[c]),y.contentQueries(2,n[p],p)}}}finally{U(s)}}}function mh(e,n){return e[$o]?e[El][Ai]=n:e[$o]=n,e[El]=n,n}function Xf(e,n,i){xl(0);const s=U(null);try{n(e,i)}finally{U(s)}}function Ia(e){return e[js]||(e[js]=[])}function Ro(e){return e.cleanup||(e.cleanup=[])}function _h(e,n){const i=e[Kr],s=i?i.get(So,null):null;s&&s.handleError(n)}function ul(e,n,i,s,c){for(let l=0;l<i.length;){const p=i[l++],y=i[l++],b=i[l++];Dy(e.data[p],n[p],s,y,b,c)}}function Wo(e,n){const i=zo(n,e),s=i[Qt];!function oI(e,n){for(let i=n.length;i<e.blueprint.length;i++)n.push(e.blueprint[i])}(s,i);const c=i[xr];null!==c&&null===i[rs]&&(i[rs]=Xd(c,i[Kr])),yh(s,i,i[mi])}function yh(e,n,i){tu(n);try{const s=e.viewQuery;null!==s&&Xf(1,s,i);const c=e.template;null!==c&&by(e,n,c,1,i),e.firstCreatePass&&(e.firstCreatePass=!1),n[Ho]?.finishViewCreation(e),e.staticContentQueries&&Vy(e,n),e.staticViewQueries&&Xf(2,e.viewQuery,i);const l=e.components;null!==l&&function rd(e,n){for(let i=0;i<n.length;i++)Wo(e,n[i])}(n,l)}catch(s){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),s}finally{n[_n]&=-5,kl()}}function xa(e,n){return!n||null===n.firstChild||zl(e)}function vh(e,n,i,s=!0){const c=n[Qt];if(function HE(e,n,i,s){const c=bi+s,l=i.length;s>0&&(i[c-1][Ai]=n),s<l-bi?(n[Ai]=i[c],Io(i,bi+s,n)):(i.push(n),n[Ai]=null),n[pr]=i;const p=n[Dc];null!==p&&i!==p&&function $f(e,n){const i=e[Sa];n[jn]!==n[pr][pr][jn]&&(e[_n]|=Su.HasTransplantedViews),null===i?e[Sa]=[n]:i.push(n)}(p,n);const y=n[Ho];null!==y&&y.insertView(e),bc(n),n[_n]|=128}(c,n,e,i),s){const p=sm(i,e),y=n[Yn],b=im(y,e[bo]);null!==b&&function jE(e,n,i,s,c,l){s[xr]=c,s[gi]=n,Wf(e,s,i,1,c,l)}(c,e[gi],y,n,b,p)}const l=n[rs];null!==l&&null!==l.firstChild&&(l.firstChild=null)}function Eh(e,n,i,s,c=!1){for(;null!==i;){const l=n[i.index];null!==l&&s.push(Pr(l)),As(l)&&Ly(l,s);const p=i.type;if(8&p)Eh(e,n,i.child,s);else if(32&p){const y=nm(i,n);let b;for(;b=y();)s.push(b)}else if(16&p){const y=Uc(n,i);if(Array.isArray(y))s.push(...y);else{const b=po(n[jn]);Eh(b[Qt],b,y,s,!0)}}i=c?i.projectionNext:i.next}return s}function Ly(e,n){for(let i=bi;i<e.length;i++){const s=e[i],c=s[Qt].firstChild;null!==c&&Eh(s[Qt],s,c,n)}e[bo]!==e[xr]&&n.push(e[bo])}let Uy=[];const jy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Fu(e.lView)},consumerOnSignalRead(){this.lView[Is]=this}},Ih=100;function Ch(e,n=!0,i=0){const s=e[ho],c=s.rendererFactory;c.begin?.();try{!function cI(e,n){Im(e,n);let i=0;for(;bl(e);){if(i===Ih)throw new ft(103,!1);i++,Im(e,1)}}(e,i)}catch(p){throw n&&_h(e,p),p}finally{c.end?.(),s.inlineEffectRunner?.flush()}}function uI(e,n,i,s){const c=n[_n];if(!(256&~c))return;n[ho].inlineEffectRunner?.flush(),tu(n);let p=null,y=null;(function Hy(e){return 2!==e.type})(e)&&(y=function By(e){return e[Is]??function aI(e){const n=Uy.pop()??Object.create(jy);return n.lView=e,n}(e)}(n),p=function Tt(e){return e&&(e.nextProducerIndex=0),U(e)}(y));try{tf(n),function Pc(e){return Hn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==i&&by(e,n,i,2,s);const b=!(3&~c);if(b){const le=e.preOrderCheckHooks;null!==le&&Bu(n,le,null)}else{const le=e.preOrderHooks;null!==le&&Nc(n,le,0,null),ju(n,0)}if(function lI(e){for(let n=V_(e);null!==n;n=_g(n)){if(!(n[_n]&Su.HasTransplantedViews))continue;const i=n[Sa];for(let s=0;s<i.length;s++){Ga(i[s])}}}(n),vm(n,0),null!==e.contentQueries&&Vy(e,n),b){const le=e.contentCheckHooks;null!==le&&Bu(n,le)}else{const le=e.contentHooks;null!==le&&Nc(n,le,1),ju(n,1)}!function qE(e,n){const i=e.hostBindingOpCodes;if(null!==i)try{for(let s=0;s<i.length;s++){const c=i[s];if(c<0)cc(~c);else{const l=c,p=i[++s],y=i[++s];Pd(p,l),y(2,n[l])}}}finally{cc(-1)}}(e,n);const B=e.components;null!==B&&zy(n,B,0);const Y=e.viewQuery;if(null!==Y&&Xf(2,Y,s),b){const le=e.viewCheckHooks;null!==le&&Bu(n,le)}else{const le=e.viewHooks;null!==le&&Nc(n,le,2),ju(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[nc]){for(const le of n[nc])le();n[nc]=null}n[_n]&=-73}catch(b){throw Fu(n),b}finally{null!==y&&(function At(e,n){if(U(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Ce(e))for(let i=e.nextProducerIndex;i<e.producerNode.length;i++)ue(e.producerNode[i],e.producerIndexOfThis[i]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}(y,p),function ym(e){e.lView[Is]!==e&&(e.lView=null,Uy.push(e))}(y)),kl()}}function vm(e,n){for(let i=V_(e);null!==i;i=_g(i))for(let s=bi;s<i.length;s++)Em(i[s],n)}function Gy(e,n,i){Em(zo(n,e),i)}function Em(e,n){Zc(e)&&Im(e,n)}function Im(e,n){const s=e[Qt],c=e[_n],l=e[Is];let p=!!(0===n&&16&c);if(p||=!!(64&c&&0===n),p||=!!(1024&c),p||=!(!l?.dirty||!mt(l)),l&&(l.dirty=!1),e[_n]&=-9217,p)uI(s,e,s.template,e[mi]);else if(8192&c){vm(e,1);const y=s.components;null!==y&&zy(e,y,1)}}function zy(e,n,i){for(let s=0;s<n.length;s++)Gy(e,n[s],i)}function id(e){for(e[ho].changeDetectionScheduler?.notify();e;){e[_n]|=64;const n=po(e);if(Ba(e)&&!n)return e;e=n}return null}class wh{get rootNodes(){const n=this._lView,i=n[Qt];return Eh(i,n,i.firstChild,[])}constructor(n,i,s=!0){this._lView=n,this._cdRefInjectingView=i,this.notifyErrorHandler=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[mi]}set context(n){this._lView[mi]=n}get destroyed(){return!(256&~this._lView[_n])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[pr];if(As(n)){const i=n[8],s=i?i.indexOf(this):-1;s>-1&&(ch(n,s),ao(i,s))}this._attachedToViewContainer=!1}uh(this._lView[Qt],this._lView)}onDestroy(n){Sl(this._lView,n)}markForCheck(){id(this._cdRefInjectingView||this._lView)}detach(){this._lView[_n]&=-129}reattach(){bc(this._lView),this._lView[_n]|=128}detectChanges(){this._lView[_n]|=1024,Ch(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ft(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ah(this._lView[Qt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new ft(902,!1);this._appRef=n,bc(this._lView)}}let Th=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=ll}return e})();const dI=Th,Cm=class extends dI{constructor(n,i,s){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=s}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,s){const c=function Ya(e,n,i,s){const c=U(null);try{const l=n.tView,b=cm(e,l,i,4096&e[_n]?4096:16,null,n,null,null,s?.injector??null,s?.embeddedViewInjector??null,s?.dehydratedView??null);b[Dc]=e[n.index];const Y=e[Ho];return null!==Y&&(b[Ho]=Y.createEmbeddedView(l)),yh(l,b,i),b}finally{U(c)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:s});return new wh(c)}};function ll(){return Jf(Br(),Vt())}function Jf(e,n){return 4&e.type?new Cm(n,e,qu(e,n)):null}class Be{}class Bc{}class sd{}class Am{resolveComponentFactory(n){throw function vI(e){const n=Error(`No component factory found for ${Xt(e)}.`);return n.ngComponent=e,n}(n)}}let Ah=(()=>{class e{static#e=this.NULL=new Am}return e})();class qy{}let _u=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Oo(){const e=Vt(),i=zo(Br().index,e);return(Ds(i)?i:e)[Yn]}()}return e})(),EI=(()=>{class e{static#e=this.\u0275prov=ir({token:e,providedIn:"root",factory:()=>null})}return e})();const dl={},ad=new Set;function Ec(e){ad.has(e)||(ad.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Qy(...e){}class ws{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qa(!1),this.onMicrotaskEmpty=new Qa(!1),this.onStable=new Qa(!1),this.onError=new Qa(!1),typeof Zone>"u")throw new ft(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!s&&i,c.shouldCoalesceRunChangeDetection=s,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function np(){const e="function"==typeof Nn.requestAnimationFrame;let n=Nn[e?"requestAnimationFrame":"setTimeout"],i=Nn[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const c=i[Zone.__symbol__("OriginalDelegate")];c&&(i=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Xy(e){const n=()=>{!function Pm(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Nn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,rp(e),e.isCheckStableRunning=!0,bh(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),rp(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,s,c,l,p,y)=>{if(function Om(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(y))return i.invokeTask(c,l,p,y);try{return Yy(e),i.invokeTask(c,l,p,y)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||e.shouldCoalesceRunChangeDetection)&&n(),Mm(e)}},onInvoke:(i,s,c,l,p,y,b)=>{try{return Yy(e),i.invoke(c,l,p,y,b)}finally{e.shouldCoalesceRunChangeDetection&&n(),Mm(e)}},onHasTask:(i,s,c,l)=>{i.hasTask(c,l),s===c&&("microTask"==l.change?(e._hasPendingMicrotasks=l.microTask,rp(e),bh(e)):"macroTask"==l.change&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(i,s,c,l)=>(i.handleError(c,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ws.isInAngularZone())throw new ft(909,!1)}static assertNotInAngularZone(){if(ws.isInAngularZone())throw new ft(909,!1)}run(n,i,s){return this._inner.run(n,i,s)}runTask(n,i,s,c){const l=this._inner,p=l.scheduleEventTask("NgZoneEvent: "+c,n,Sm,Qy,Qy);try{return l.runTask(p,i,s)}finally{l.cancelTask(p)}}runGuarded(n,i,s){return this._inner.runGuarded(n,i,s)}runOutsideAngular(n){return this._outer.run(n)}}const Sm={};function bh(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function rp(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Yy(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Mm(e){e._nesting--,bh(e)}class Rm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qa,this.onMicrotaskEmpty=new Qa,this.onStable=new Qa,this.onError=new Qa}run(n,i,s){return n.apply(i,s)}runGuarded(n,i,s){return n.apply(i,s)}runOutsideAngular(n){return n()}runTask(n,i,s,c){return n.apply(i,s)}}var hl=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(hl||{});const ip={destroy(){}};function go(e,n){!n&&function Bs(e){if(!Es())throw new ft(-203,!1)}();const i=n?.injector??cn(so);if(!function oa(e){return"browser"===(e??cn(so)).get(Df)}(i))return ip;Ec("NgAfterNextRender");const s=i.get(cd),c=s.handler??=new Ph,l=n?.phase??hl.MixedReadWrite,p=()=>{c.unregister(b),y()},y=i.get(Gl).onDestroy(p),b=ds(i,()=>new No(l,()=>{p(),e()}));return c.register(b),{destroy:p}}class No{constructor(n,i){this.phase=n,this.callbackFn=i,this.zone=cn(ws),this.errorHandler=cn(So,{optional:!0}),cn(Be,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){this.errorHandler?.handleError(n)}}}class Ph{constructor(){this.executingCallbacks=!1,this.buckets={[hl.EarlyRead]:new Set,[hl.Write]:new Set,[hl.MixedReadWrite]:new Set,[hl.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const i of n)i.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(const n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}}let cd=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const s of i)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=ir({token:e,providedIn:"root",factory:()=>new e})}return e})();function yu(e){return!!xi(e)}function dd(e,n,i){let s=i?e.styles:null,c=i?e.classes:null,l=0;if(null!==n)for(let p=0;p<n.length;p++){const y=n[p];"number"==typeof y?l=y:1==l?c=Yt(c,y):2==l&&(s=Yt(s,y+": "+n[++p]+";"))}i?e.styles=s:e.stylesWithoutHost=s,i?e.classes=c:e.classesWithoutHost=c}class cp extends Ah{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=cr(n);return new hd(i,this.ngModule)}}function Eu(e){const n=[];for(const i in e){if(!e.hasOwnProperty(i))continue;const s=e[i];void 0!==s&&n.push({propName:Array.isArray(s)?s[0]:s,templateName:i})}return n}class fl{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,s){s=oi(s);const c=this.injector.get(n,dl,s);return c!==dl||i===dl?c:this.parentInjector.get(n,i,s)}}class hd extends sd{get inputs(){const n=this.componentDef,i=n.inputTransforms,s=Eu(n.inputs);if(null!==i)for(const c of s)i.hasOwnProperty(c.propName)&&(c.transform=i[c.propName]);return s}get outputs(){return Eu(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function La(e){return e.map(Va).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,s,c){const l=U(null);try{let p=(c=c||this.ngModule)instanceof Lr?c:c?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new fl(n,p):n,b=y.get(qy,null);if(null===b)throw new ft(407,!1);const B=y.get(EI,null),Ne={rendererFactory:b,sanitizer:B,inlineEffectRunner:null,afterRenderEventManager:y.get(cd,null),changeDetectionScheduler:y.get(Be,null)},We=b.createRenderer(null,this.componentDef),ht=this.componentDef.selectors[0][0]||"div",Ut=s?function QE(e,n,i,s){const l=s.get(X_,!1)||i===us.ShadowDom,p=e.selectRootElement(n,l);return function XE(e){My(e)}(p),p}(We,s,this.componentDef.encapsulation,y):al(We,ht,function Zy(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(ht));let rn=512;this.componentDef.signals?rn|=4096:this.componentDef.onPush||(rn|=16);let an=null;null!==Ut&&(an=Xd(Ut,y,!0));const Wt=qf(0,null,null,1,0,null,null,null,null,null,null),dr=cm(null,Wt,null,rn,null,null,Ne,We,y,null,an);let ci,Zi;tu(dr);try{const yo=this.componentDef;let Fa,zp=null;yo.findHostDirectiveDefs?(Fa=[],zp=new Map,yo.findHostDirectiveDefs(yo,Fa,zp),Fa.push(yo)):Fa=[yo];const cA=function ev(e,n){const i=e[Qt],s=Kn;return e[s]=n,fh(i,s,2,"#host",null)}(dr,Ut),UR=function Ko(e,n,i,s,c,l,p){const y=c[Qt];!function tv(e,n,i,s){for(const c of e)n.mergedAttrs=O(n.mergedAttrs,c.hostAttrs);null!==n.mergedAttrs&&(dd(n,n.mergedAttrs,!0),null!==i&&cl(s,i,n))}(s,e,n,p);let b=null;null!==n&&(b=Xd(n,c[Kr]));const B=l.rendererFactory.createRenderer(n,i);let Y=16;i.signals?Y=4096:i.onPush&&(Y=64);const le=cm(c,Py(i),null,Y,c[e.index],e,l,B,null,null,b);return y.firstCreatePass&&fm(y,e,s.length-1),mh(c,le),c[e.index]=le}(cA,Ut,yo,Fa,dr,Ne,We);Zi=sc(Wt,Kn),Ut&&function Oh(e,n,i,s){if(s)Fi(e,i,["ng-version","17.3.12"]);else{const{attrs:c,classes:l}=function eo(e){const n=[],i=[];let s=1,c=2;for(;s<e.length;){let l=e[s];if("string"==typeof l)2===c?""!==l&&n.push(l,e[++s]):8===c&&i.push(l);else{if(!fi(c))break;c=l}s++}return{attrs:n,classes:i}}(n.selectors[0]);c&&Fi(e,i,c),l&&l.length>0&&Cy(e,i,l.join(" "))}}(We,yo,Ut,s),void 0!==i&&function CI(e,n,i){const s=e.projection=[];for(let c=0;c<n.length;c++){const l=i[c];s.push(null!=l?Array.from(l):null)}}(Zi,this.ngContentSelectors,i),ci=function Rh(e,n,i,s,c,l){const p=Br(),y=c[Qt],b=Hs(p,c);dm(y,c,p,i,null,s);for(let Y=0;Y<i.length;Y++)Ps(sa(c,y,p.directiveStart+Y,p),c);rI(y,c,p),b&&Ps(b,c);const B=sa(c,y,p.directiveStart+p.componentOffset,p);if(e[mi]=c[mi]=B,null!==l)for(const Y of l)Y(B,n);return um(y,p,c),B}(UR,yo,Fa,zp,dr,[wI]),yh(Wt,dr,null)}finally{kl()}return new Mh(this.componentType,ci,qu(Zi,dr),dr,Zi)}finally{U(l)}}}class Mh extends Bc{constructor(n,i,s,c,l){super(),this.location=s,this._rootLView=c,this._tNode=l,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new wh(c,void 0,!1),this.componentType=n}setInput(n,i){const s=this._tNode.inputs;let c;if(null!==s&&(c=s[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const l=this._rootLView;ul(l[Qt],l,c,n,i),this.previousInputValues.set(n,i),id(zo(this._tNode.index,l))}}get injector(){return new Ss(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function wI(){const e=Br();Fl(Vt()[Qt],e)}let $c=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=TI}return e})();function TI(){return kh(Br(),Vt())}const DI=$c,Nh=class extends DI{constructor(n,i,s){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=s}get element(){return qu(this._hostTNode,this._hostLView)}get injector(){return new Ss(this._hostTNode,this._hostLView)}get parentInjector(){const n=Dr(this._hostTNode,this._hostLView);if(Bl(n)){const i=xc(n,this._hostLView),s=ru(n);return new Ss(i[Qt].data[s+8],i)}return new Ss(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=Vm(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-bi}createEmbeddedView(n,i,s){let c,l;"number"==typeof s?c=s:null!=s&&(c=s.index,l=s.injector);const y=n.createEmbeddedViewImpl(i||{},l,null);return this.insertImpl(y,c,xa(this._hostTNode,null)),y}createComponent(n,i,s,c,l){const p=n&&!function xt(e){return"function"==typeof e}(n);let y;if(p)y=i;else{const ht=i||{};y=ht.index,s=ht.injector,c=ht.projectableNodes,l=ht.environmentInjector||ht.ngModuleRef}const b=p?n:new hd(cr(n)),B=s||this.parentInjector;if(!l&&null==b.ngModule){const Ut=(p?B:this.parentInjector).get(Lr,null);Ut&&(l=Ut)}cr(b.componentType??{});const We=b.create(B,c,null,l);return this.insertImpl(We.hostView,y,xa(this._hostTNode,null)),We}insert(n,i){return this.insertImpl(n,i,!0)}insertImpl(n,i,s){const c=n._lView;if(function Dl(e){return As(e[pr])}(c)){const y=this.indexOf(n);if(-1!==y)this.detach(y);else{const b=c[pr],B=new Nh(b,b[gi],b[pr]);B.detach(B.indexOf(n))}}const l=this._adjustIndex(i),p=this._lContainer;return vh(p,c,l,s),n.attachToViewContainerRef(),Io(xh(p),l,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=Vm(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),s=ch(this._lContainer,i);s&&(ao(xh(this._lContainer),i),uh(s[Qt],s))}detach(n){const i=this._adjustIndex(n,-1),s=ch(this._lContainer,i);return s&&null!=ao(xh(this._lContainer),i)?new wh(s):null}_adjustIndex(n,i=0){return n??this.length+i}};function Vm(e){return e[8]}function xh(e){return e[8]||(e[8]=[])}function kh(e,n){let i;const s=n[e.index];return As(s)?i=s:(i=gh(s,n,null,e),n[e.index]=i,mh(n,i)),Lm(i,n,e,s),new Nh(i,e,n)}let Lm=function dp(e,n,i,s){if(e[bo])return;let c;c=8&i.type?Pr(s):function Iu(e,n){const i=e[Yn],s=i.createComment(""),c=Hs(n,e);return _c(i,im(i,c),s,function iC(e,n){return e.nextSibling(n)}(i,c),!1),s}(n,i),e[bo]=c},up=()=>!1;class fd{constructor(n){this.queryList=n,this.matches=null}clone(){return new fd(this.queryList)}setDirty(){this.queryList.setDirty()}}class hp{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const s=null!==n.contentQueries?n.contentQueries[0]:i.length,c=[];for(let l=0;l<s;l++){const p=i.getByIndex(l);c.push(this.queries[p.indexInDeclarationView].clone())}return new hp(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==Gm(n,i).matches&&this.queries[i].setDirty()}}class fp{constructor(n,i,s=null){this.flags=i,this.read=s,this.predicate="string"==typeof n?function SI(e){return e.split(",").map(n=>n.trim())}(n):n}}class pl{constructor(n=[]){this.queries=n}elementStart(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let s=0;s<this.length;s++){const c=null!==i?i.length:0,l=this.getByIndex(s).embeddedTView(n,c);l&&(l.indexInDeclarationView=s,null!==i?i.push(l):i=[l])}return null!==i?new pl(i):null}template(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Hc{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Hc(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const i=this._declarationNodeIndex;let s=n.parent;for(;null!==s&&8&s.type&&s.index!==i;)s=s.parent;return i===(null!==s?s.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const s=this.metadata.predicate;if(Array.isArray(s))for(let c=0;c<s.length;c++){const l=s[c];this.matchTNodeWithReadOption(n,i,Um(i,l)),this.matchTNodeWithReadOption(n,i,Ka(i,n,l,!1,!1))}else s===Th?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Ka(i,n,s,!1,!1))}matchTNodeWithReadOption(n,i,s){if(null!==s){const c=this.metadata.read;if(null!==c)if(c===hc||c===$c||c===Th&&4&i.type)this.addMatch(i.index,-2);else{const l=Ka(i,n,c,!1,!1);null!==l&&this.addMatch(i.index,l)}else this.addMatch(i.index,s)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function Um(e,n){const i=e.localNames;if(null!==i)for(let s=0;s<i.length;s+=2)if(i[s]===n)return i[s+1];return null}function iv(e,n,i,s){return-1===i?function bI(e,n){return 11&e.type?qu(e,n):4&e.type?Jf(e,n):null}(n,e):-2===i?function sv(e,n,i){return i===hc?qu(n,e):i===Th?Jf(n,e):i===$c?kh(n,e):void 0}(e,n,s):sa(e,e[Qt],i,n)}function Bm(e,n,i,s){const c=n[Ho].queries[s];if(null===c.matches){const l=e.data,p=i.matches,y=[];for(let b=0;null!==p&&b<p.length;b+=2){const B=p[b];y.push(B<0?null:iv(n,l[B],p[b+1],i.metadata.read))}c.matches=y}return c.matches}function Fh(e,n,i,s){const c=e.queries.getByIndex(i),l=c.matches;if(null!==l){const p=Bm(e,n,c,i);for(let y=0;y<l.length;y+=2){const b=l[y];if(b>0)s.push(p[y/2]);else{const B=l[y+1],Y=n[-b];for(let le=bi;le<Y.length;le++){const Ne=Y[le];Ne[Dc]===Ne[pr]&&Fh(Ne[Qt],Ne,B,s)}if(null!==Y[Sa]){const le=Y[Sa];for(let Ne=0;Ne<le.length;Ne++){const We=le[Ne];Fh(We[Qt],We,B,s)}}}}}return s}function jm(e,n,i){const s=new cg(!(4&~i));return function ZE(e,n,i,s){const c=Ia(n);c.push(i),e.firstCreatePass&&Ro(e).push(s,c.length-1)}(e,n,s,s.destroy),(n[Ho]??=new hp).queries.push(new fd(s))-1}function Hm(e,n,i){null===e.queries&&(e.queries=new pl),e.queries.track(new Hc(n,i))}function Gm(e,n){return e.queries.getByIndex(n)}function Cu(e,n){const i=e[Qt],s=Gm(i,n);return s.crossesNgTemplate?Fh(i,e,n,[]):Bm(i,e,s,n)}function Lh(e){return function Ic(e){return"function"==typeof e&&void 0!==e[Me]}(e)&&"function"==typeof e.set}function Ep(e){let n=function yv(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),i=!0;const s=[e];for(;n;){let c;if(to(e))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new ft(903,!1);c=n.\u0275dir}if(c){if(i){s.push(c);const p=e;p.inputs=Gh(e.inputs),p.inputTransforms=Gh(e.inputTransforms),p.declaredInputs=Gh(e.declaredInputs),p.outputs=Gh(e.outputs);const y=c.hostBindings;y&&Ev(e,y);const b=c.viewQuery,B=c.contentQueries;if(b&&Ym(e,b),B&&Jm(e,B),Hh(e,c),Or(e.outputs,c.outputs),to(c)&&c.data.animation){const Y=e.data;Y.animation=(Y.animation||[]).concat(c.data.animation)}}const l=c.features;if(l)for(let p=0;p<l.length;p++){const y=l[p];y&&y.ngInherit&&y(e),y===Ep&&(i=!1)}}n=Object.getPrototypeOf(n)}!function vv(e){let n=0,i=null;for(let s=e.length-1;s>=0;s--){const c=e[s];c.hostVars=n+=c.hostVars,c.hostAttrs=O(c.hostAttrs,i=O(i,c.hostAttrs))}}(s)}function Hh(e,n){for(const i in n.inputs){if(!n.inputs.hasOwnProperty(i)||e.inputs.hasOwnProperty(i))continue;const s=n.inputs[i];if(void 0!==s&&(e.inputs[i]=s,e.declaredInputs[i]=n.declaredInputs[i],null!==n.inputTransforms)){const c=Array.isArray(s)?s[0]:s;if(!n.inputTransforms.hasOwnProperty(c))continue;e.inputTransforms??={},e.inputTransforms[c]=n.inputTransforms[c]}}}function Gh(e){return e===Ti?{}:e===gr?[]:e}function Ym(e,n){const i=e.viewQuery;e.viewQuery=i?(s,c)=>{n(s,c),i(s,c)}:n}function Jm(e,n){const i=e.contentQueries;e.contentQueries=i?(s,c,l)=>{n(s,c,l),i(s,c,l)}:n}function Ev(e,n){const i=e.hostBindings;e.hostBindings=i?(s,c)=>{n(s,c),i(s,c)}:n}function ca(e){const n=e.inputConfig,i={};for(const s in n)if(n.hasOwnProperty(s)){const c=n[s];Array.isArray(c)&&c[3]&&(i[s]=c[3])}e.inputTransforms=i}class Tu{}class t_{}function gd(e,n){return new F(e,n??null,[])}class F extends Tu{constructor(n,i,s){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cp(this);const c=xi(n);this._bootstrapComponents=Ea(c.bootstrap),this._r3Injector=Bd(n,i,[{provide:Tu,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver},...s],Xt(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class W extends t_{constructor(n){super(),this.moduleType=n}create(n){return new F(this.moduleType,n,[])}}class dt extends Tu{constructor(n){super(),this.componentFactoryResolver=new cp(this),this.instance=null;const i=new pi([...n.providers,{provide:Tu,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver}],n.parent||Vr(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Ot(e,n,i=null){return new dt({providers:e,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let Ja=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new yn.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vl(e){return!!LI(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function LI(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Du(e,n,i){return e[n]=i}function Ws(e,n,i){return!Object.is(e[n],i)&&(e[n]=i,!0)}function Wh(e,n,i,s){const c=Ws(e,n,i);return Ws(e,n+1,s)||c}function Cp(e,n,i,s,c,l,p,y){const b=Vt(),B=Mr(),Y=e+Kn,le=B.firstCreatePass?function hA(e,n,i,s,c,l,p,y,b){const B=n.consts,Y=fh(n,e,4,p||null,no(B,y));Oy(n,i,Y,no(B,b)),Fl(n,Y);const le=Y.tView=qf(2,Y,s,c,l,n.directiveRegistry,n.pipeRegistry,null,n.schemas,B,null);return null!==n.queries&&(n.queries.template(n,Y),le.queries=n.queries.embeddedTView(Y)),Y}(Y,B,b,n,i,s,c,l,p):B.data[Y];va(le,!1);const Ne=IC(B,b,le,e);Qi()&&lh(B,b,Ne,le),Ps(Ne,b);const We=gh(Ne,b,Ne,le);return b[Y]=We,mh(b,We),function lp(e,n,i){return up(e,n,i)}(We,le,b),qc(le)&&lm(B,b,le),null!=p&&Sy(b,le,y),Cp}let IC=function CC(e,n,i,s){return Pa(!0),n[Yn].createComment("")};function qI(e,n,i,s){const c=Vt();return Ws(c,ia(),n)&&(Mr(),Na(Si(),c,e,n,i,s)),qI}function Mv(e,n){return e<<17|n<<2}function _d(e){return e>>17&32767}function QI(e){return 2|e}function qh(e){return(131068&e)>>2}function XI(e,n){return-131069&e|n<<2}function YI(e){return 1|e}function ZC(e,n,i,s){const c=e[i+1],l=null===n;let p=s?_d(c):qh(c),y=!1;for(;0!==p&&(!1===y||l);){const B=e[p+1];JA(e[p],n)&&(y=!0,e[p+1]=s?YI(B):QI(B)),p=s?_d(B):qh(B)}y&&(e[i+1]=s?QI(c):YI(c))}function JA(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&wi(e,n)>=0}function JI(e,n,i){const s=Vt();return Ws(s,ia(),n)&&aa(Mr(),Si(),s,e,n,s[Yn],i,!1),JI}function ZI(e,n,i,s,c){const p=c?"class":"style";ul(e,i,n.inputs[p],p,s)}function e0(e,n){return function zc(e,n,i,s){const c=Vt(),l=Mr(),p=function Gs(e){const n=Hn.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,i}(2);l.firstUpdatePass&&function cw(e,n,i,s){const c=e.data;if(null===c[i+1]){const l=c[Cs()],p=function aw(e,n){return n>=e.expandoStartIndex}(e,i);(function hw(e,n){return!!(e.flags&(n?8:16))})(l,s)&&null===n&&!p&&(n=!1),n=function ab(e,n,i,s){const c=function Md(e){const n=Hn.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let l=s?n.residualClasses:n.residualStyles;if(null===c)0===(s?n.classBindings:n.styleBindings)&&(i=c_(i=t0(null,e,n,i,s),n.attrs,s),l=null);else{const p=n.directiveStylingLast;if(-1===p||e[p]!==c)if(i=t0(c,e,n,i,s),null===l){let b=function cb(e,n,i){const s=i?n.classBindings:n.styleBindings;if(0!==qh(s))return e[_d(s)]}(e,n,s);void 0!==b&&Array.isArray(b)&&(b=t0(null,e,n,b[1],s),b=c_(b,n.attrs,s),function ub(e,n,i,s){e[_d(i?n.classBindings:n.styleBindings)]=s}(e,n,s,b))}else l=function lb(e,n,i){let s;const c=n.directiveEnd;for(let l=1+n.directiveStylingLast;l<c;l++)s=c_(s,e[l].hostAttrs,i);return c_(s,n.attrs,i)}(e,n,s)}return void 0!==l&&(s?n.residualClasses=l:n.residualStyles=l),i}(c,l,n,s),function XA(e,n,i,s,c,l){let p=l?n.classBindings:n.styleBindings,y=_d(p),b=qh(p);e[s]=i;let Y,B=!1;if(Array.isArray(i)?(Y=i[1],(null===Y||wi(i,Y)>0)&&(B=!0)):Y=i,c)if(0!==b){const Ne=_d(e[y+1]);e[s+1]=Mv(Ne,y),0!==Ne&&(e[Ne+1]=XI(e[Ne+1],s)),e[y+1]=function qA(e,n){return 131071&e|n<<17}(e[y+1],s)}else e[s+1]=Mv(y,0),0!==y&&(e[y+1]=XI(e[y+1],s)),y=s;else e[s+1]=Mv(b,0),0===y?y=s:e[b+1]=XI(e[b+1],s),b=s;B&&(e[s+1]=QI(e[s+1])),ZC(e,Y,s,!0),ZC(e,Y,s,!1),function YA(e,n,i,s,c){const l=c?e.residualClasses:e.residualStyles;null!=l&&"string"==typeof n&&wi(l,n)>=0&&(i[s+1]=YI(i[s+1]))}(n,Y,e,s,l),p=Mv(y,b),l?n.classBindings=p:n.styleBindings=p}(c,l,n,i,p,s)}}(l,e,p,s),n!==mr&&Ws(c,p,n)&&function lw(e,n,i,s,c,l,p,y){if(!(3&n.type))return;const b=e.data,B=b[y+1],Y=function QA(e){return!(1&~e)}(B)?dw(b,n,i,c,qh(B),p):void 0;Rv(Y)||(Rv(l)||function KA(e){return!(2&~e)}(B)&&(l=dw(b,null,i,c,y,p)),function WE(e,n,i,s,c){if(n)c?e.addClass(i,s):e.removeClass(i,s);else{let l=-1===s.indexOf("-")?void 0:Xa.DashCase;null==c?e.removeStyle(i,s,l):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),l|=Xa.Important),e.setStyle(i,s,c,l))}}(s,p,Jc(Cs(),i),c,l))}(l,l.data[Cs()],c,c[Yn],e,c[p+1]=function pb(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Xt(fu(e)))),e}(n,i),s,p)}(e,n,null,!0),e0}function t0(e,n,i,s,c){let l=null;const p=i.directiveEnd;let y=i.directiveStylingLast;for(-1===y?y=i.directiveStart:y++;y<p&&(l=n[y],s=c_(s,l.hostAttrs,c),l!==e);)y++;return null!==e&&(i.directiveStylingLast=y),s}function c_(e,n,i){const s=i?1:2;let c=-1;if(null!==n)for(let l=0;l<n.length;l++){const p=n[l];"number"==typeof p?c=p:c===s&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Ki(e,p,!!i||n[++l]))}return void 0===e?null:e}function dw(e,n,i,s,c,l){const p=null===n;let y;for(;c>0;){const b=e[c],B=Array.isArray(b),Y=B?b[1]:b,le=null===Y;let Ne=i[c+1];Ne===mr&&(Ne=le?gr:void 0);let We=le?Ls(Ne,s):Y===s?Ne:void 0;if(B&&!Rv(We)&&(We=Ls(b,s)),Rv(We)&&(y=We,p))return y;const ht=e[c+1];c=p?_d(ht):qh(ht)}if(null!==n){let b=l?n.residualClasses:n.residualStyles;null!=b&&(y=Ls(b,s))}return y}function Rv(e){return void 0!==e}function Ov(e,n,i,s){const c=Vt(),l=Mr(),p=Kn+e,y=c[Yn],b=l.firstCreatePass?function Vb(e,n,i,s,c,l){const p=n.consts,b=fh(n,e,2,s,no(p,c));return Oy(n,i,b,no(p,l)),null!==b.attrs&&dd(b,b.attrs,!1),null!==b.mergedAttrs&&dd(b,b.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,b),b}(p,l,c,n,i,s):l.data[p],B=mw(l,c,b,y,n,e);c[p]=B;const Y=qc(b);return va(b,!0),cl(y,B,b),!function i_(e){return!(32&~e.flags)}(b)&&Qi()&&lh(l,c,B,b),0===function wd(){return Hn.lFrame.elementDepthCount}()&&Ps(B,c),function rf(){Hn.lFrame.elementDepthCount++}(),Y&&(lm(l,c,b),um(l,b,c)),null!==s&&Sy(c,b),Ov}function Nv(){let e=Br();Lu()?function bs(){Hn.lFrame.isParent=!1}():(e=e.parent,va(e,!1));const n=e;(function Dd(e){return Hn.skipHydrationRootTNode===e})(n)&&function Kp(){Hn.skipHydrationRootTNode=null}(),function Td(){Hn.lFrame.elementDepthCount--}();const i=Mr();return i.firstCreatePass&&(Fl(i,e),Kc(e)&&i.queries.elementEnd(e)),null!=n.classesWithoutHost&&function xd(e){return!!(8&e.flags)}(n)&&ZI(i,n,Vt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function kd(e){return!!(16&e.flags)}(n)&&ZI(i,n,Vt(),n.stylesWithoutHost,!1),Nv}function a0(e,n,i,s){return Ov(e,n,i,s),Nv(),a0}let mw=(e,n,i,s,c,l)=>(Pa(!0),al(s,c,function df(){return Hn.lFrame.currentNamespace}()));function vw(){return Vt()}const Qh=void 0;var Gb=["en",[["a","p"],["AM","PM"],Qh],[["AM","PM"],Qh,Qh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qh,"{1} 'at' {0}",Qh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Hb(e){const i=Math.floor(Math.abs(e)),s=e.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===s?1:5}];let Up={};function l0(e){const n=function zb(e){return e.toLowerCase().replace(/_/g,"-")}(e);let i=ww(n);if(i)return i;const s=n.split("-")[0];if(i=ww(s),i)return i;if("en"===s)return Gb;throw new ft(701,!1)}function Cw(e){return l0(e)[Bp.PluralCase]}function ww(e){return e in Up||(Up[e]=Nn.ng&&Nn.ng.common&&Nn.ng.common.locales&&Nn.ng.common.locales[e]),Up[e]}var Bp=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Bp||{});const jp="en-US";let Tw=jp;function f0(e,n,i,s){const c=Vt(),l=Mr(),p=Br();return p0(l,c,c[Yn],p,e,n,s),f0}function p0(e,n,i,s,c,l,p){const y=qc(s),B=e.firstCreatePass&&Ro(e),Y=n[mi],le=Ia(n);let Ne=!0;if(3&s.type||p){const Ut=Hs(s,n),rn=p?p(Ut):Ut,an=le.length,Wt=p?ci=>p(Pr(ci[s.index])):s.index;let dr=null;if(!p&&y&&(dr=function jS(e,n,i,s){const c=e.cleanup;if(null!=c)for(let l=0;l<c.length-1;l+=2){const p=c[l];if(p===i&&c[l+1]===s){const y=n[js],b=c[l+2];return y.length>b?y[b]:null}"string"==typeof p&&(l+=2)}return null}(e,n,c,s.index)),null!==dr)(dr.__ngLastListenerFn__||dr).__ngNextListenerFn__=l,dr.__ngLastListenerFn__=l,Ne=!1;else{l=Jw(s,n,Y,l,!1);const ci=i.listen(rn,c,l);le.push(l,ci),B&&B.push(c,Wt,an,an+1)}}else l=Jw(s,n,Y,l,!1);const We=s.outputs;let ht;if(Ne&&null!==We&&(ht=We[c])){const Ut=ht.length;if(Ut)for(let rn=0;rn<Ut;rn+=2){const Zi=n[ht[rn]][ht[rn+1]].subscribe(l),yo=le.length;le.push(l,Zi),B&&B.push(c,s.index,yo,-(yo+1))}}}function Yw(e,n,i,s){const c=U(null);try{return $s(6,n,i),!1!==i(s)}catch(l){return _h(e,l),!1}finally{$s(7,n,i),U(c)}}function Jw(e,n,i,s,c){return function l(p){if(p===Function)return s;id(e.componentOffset>-1?zo(e.index,n):n);let b=Yw(n,i,s,p),B=l.__ngNextListenerFn__;for(;B;)b=Yw(n,i,B,p)&&b,B=B.__ngNextListenerFn__;return c&&!1===b&&p.preventDefault(),b}}function Zw(e=1){return function Oc(e){return(Hn.lFrame.contextLView=function Al(e,n){for(;e>0;)n=n[ai],e--;return n}(e,Hn.lFrame.contextLView))[mi]}(e)}function uT(e,n,i,s){!function ov(e,n,i,s){const c=Mr();if(c.firstCreatePass){const l=Br();Hm(c,new fp(n,i,s),l.index),function av(e,n){const i=e.contentQueries||(e.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(e.queries.length-1,n)}(c,e),!(2&~i)&&(c.staticContentQueries=!0)}return jm(c,Vt(),i)}(e,n,i,s)}function lT(e,n,i){!function $m(e,n,i){const s=Mr();return s.firstCreatePass&&(Hm(s,new fp(e,n,i),-1),!(2&~n)&&(s.staticViewQueries=!0)),jm(s,Vt(),n)}(e,n,i)}function dT(e){const n=Vt(),i=Mr(),s=Nl();xl(s+1);const c=Gm(i,s);if(e.dirty&&function ef(e){return!(4&~e[_n])}(n)===!(2&~c.metadata.flags)){if(null===c.matches)e.reset([]);else{const l=Cu(n,s);e.reset(l,gf),e.notifyOnChanges()}return!0}return!1}function hT(){return function Vh(e,n){return e[Ho].queries[n].queryList}(Vt(),Nl())}function CT(e,n=""){const i=Vt(),s=Mr(),c=e+Kn,l=s.firstCreatePass?fh(s,c,1,n,null):s.data[c],p=wT(s,i,l,n,e);i[c]=p,Qi()&&lh(s,i,p,l),va(l,!1)}let wT=(e,n,i,s,c)=>(Pa(!0),function fy(e,n){return e.createText(n)}(n[Yn],s));function m0(e){return Lv("",e,""),m0}function Lv(e,n,i){const s=Vt(),c=function Mp(e,n,i,s){return Ws(e,ia(),i)?n+Rn(i)+s:mr}(s,e,n,i);return c!==mr&&function Ca(e,n,i){const s=Jc(n,e);!function jf(e,n,i){e.setValue(n,i)}(e[Yn],s,i)}(s,Cs(),c),Lv}function _0(e,n,i){Lh(n)&&(n=n());const s=Vt();return Ws(s,ia(),n)&&aa(Mr(),Si(),s,e,n,s[Yn],i,!1),_0}function OT(e,n){const i=Lh(e);return i&&e.set(n),i}function y0(e,n){const i=Vt(),s=Mr(),c=Br();return p0(s,i,i[Yn],c,e,n),y0}function v0(e,n,i,s,c){if(e=xe(e),Array.isArray(e))for(let l=0;l<e.length;l++)v0(e[l],n,i,s,c);else{const l=Mr(),p=Vt(),y=Br();let b=nn(e)?e:xe(e.provide);const B=Os(e),Y=1048575&y.providerIndexes,le=y.directiveStart,Ne=y.providerIndexes>>20;if(nn(e)||!e.multi){const We=new Ma(B,c,td),ht=I0(b,n,c?Y:Y+Ne,le);-1===ht?(io($t(y,p),l,b),E0(l,e,n.length),n.push(b),y.directiveStart++,y.directiveEnd++,c&&(y.providerIndexes+=1048576),i.push(We),p.push(We)):(i[ht]=We,p[ht]=We)}else{const We=I0(b,n,Y+Ne,le),ht=I0(b,n,Y,Y+Ne),rn=ht>=0&&i[ht];if(c&&!rn||!c&&!(We>=0&&i[We])){io($t(y,p),l,b);const an=function lP(e,n,i,s,c){const l=new Ma(e,i,td);return l.multi=[],l.index=n,l.componentProviders=0,NT(l,c,s&&!i),l}(c?uP:cP,i.length,c,s,B);!c&&rn&&(i[ht].providerFactory=an),E0(l,e,n.length,0),n.push(b),y.directiveStart++,y.directiveEnd++,c&&(y.providerIndexes+=1048576),i.push(an),p.push(an)}else E0(l,e,We>-1?We:ht,NT(i[c?ht:We],B,!c&&s));!c&&s&&rn&&i[ht].componentProviders++}}}function E0(e,n,i,s){const c=nn(n),l=function gn(e){return!!e.useClass}(n);if(c||l){const b=(l?xe(n.useClass):n).prototype.ngOnDestroy;if(b){const B=e.destroyHooks||(e.destroyHooks=[]);if(!c&&n.multi){const Y=B.indexOf(i);-1===Y?B.push(i,[s,b]):B[Y+1].push(s,b)}else B.push(i,b)}}}function NT(e,n,i){return i&&e.componentProviders++,e.multi.push(n)-1}function I0(e,n,i,s){for(let c=i;c<s;c++)if(n[c]===e)return c;return-1}function cP(e,n,i,s){return C0(this.multi,[])}function uP(e,n,i,s){const c=this.multi;let l;if(this.providerFactory){const p=this.providerFactory.componentProviders,y=sa(i,i[Qt],this.providerFactory.index,s);l=y.slice(0,p),C0(c,l);for(let b=p;b<y.length;b++)l.push(y[b])}else l=[],C0(c,l);return l}function C0(e,n){for(let i=0;i<e.length;i++)n.push((0,e[i])());return n}function xT(e,n=[]){return i=>{i.providersResolver=(s,c)=>function aP(e,n,i){const s=Mr();if(s.firstCreatePass){const c=to(e);v0(i,s.data,s.blueprint,c,!0),v0(n,s.data,s.blueprint,c,!1)}}(s,c?c(e):e,n)}}let dP=(()=>{class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const s=I(0,i.type),c=s.length>0?Ot([s],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,c)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ir({token:e,providedIn:"environment",factory:()=>new e(ni(Lr))})}return e})();function kT(e){Ec("NgStandalone"),e.getStandaloneInjector=n=>n.get(dP).getOrCreateStandaloneInjector(e)}function FT(e,n,i){const s=e.\u0275cmp;s.directiveDefs=qi(n,!1),s.pipeDefs=qi(i,!0)}function g_(e,n){const i=e[n];return i===mr?void 0:i}function BT(e,n,i,s,c,l,p,y){const b=n+i;return function Tv(e,n,i,s,c){const l=Wh(e,n,i,s);return Ws(e,n+2,c)||l}(e,b,c,l,p)?Du(e,b+3,y?s.call(y,c,l,p):s(c,l,p)):g_(e,b+3)}function HT(e,n){const i=Mr();let s;const c=e+Kn;i.firstCreatePass?(s=function wP(e,n){if(n)for(let i=n.length-1;i>=0;i--){const s=n[i];if(e===s.name)return s}}(n,i.pipeRegistry),i.data[c]=s,s.onDestroy&&(i.destroyHooks??=[]).push(c,s.onDestroy)):s=i.data[c];const l=s.factory||(s.factory=$i(s.type)),y=Er(td);try{const b=h(!1),B=l();return h(b),function qS(e,n,i,s){i>=e.data.length&&(e.data[i]=null,e.blueprint[i]=null),n[i]=s}(i,Vt(),c,B),B}finally{Er(y)}}function GT(e,n,i){const s=e+Kn,c=Vt(),l=oc(c,s);return m_(c,s)?function LT(e,n,i,s,c,l){const p=n+i;return Ws(e,p,c)?Du(e,p+1,l?s.call(l,c):s(c)):g_(e,p+1)}(c,Ns(),n,l.transform,i,l):l.transform(i)}function zT(e,n,i,s){const c=e+Kn,l=Vt(),p=oc(l,c);return m_(l,c)?function UT(e,n,i,s,c,l,p){const y=n+i;return Wh(e,y,c,l)?Du(e,y+2,p?s.call(p,c,l):s(c,l)):g_(e,y+2)}(l,Ns(),n,p.transform,i,s,p):p.transform(i,s)}function WT(e,n,i,s,c){const l=e+Kn,p=Vt(),y=oc(p,l);return m_(p,l)?BT(p,Ns(),n,y.transform,i,s,c,y):y.transform(i,s,c)}function m_(e,n){return e[Qt].data[n].pure}class cD{constructor(n){this.full=n;const i=n.split(".");this.major=i[0],this.minor=i[1],this.patch=i.slice(2).join(".")}}const qP=new cD("17.3.12");let uD=(()=>{class e{log(i){console.log(i)}warn(i){console.warn(i)}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const pD=new Ye(""),gD=new Ye("");let S0,EM=(()=>{class e{constructor(i,s,c){this._ngZone=i,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,S0||(function IM(e){S0=e}(c),c.addToWindow(s)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ws.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(i)||(clearTimeout(s.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,s,c){let l=-1;s&&s>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==l),i()},s)),this._callbacks.push({doneCb:i,timeoutId:l,updateCb:c})}whenStable(i,s,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,s,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,s,c){return[]}static#e=this.\u0275fac=function(s){return new(s||e)(ni(ws),ni(mD),ni(gD))};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac})}return e})(),mD=(()=>{class e{constructor(){this._applications=new Map}registerApplication(i,s){this._applications.set(i,s)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,s=!0){return S0?.findTestabilityInTree(this,i,s)??null}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function P0(e){return!!e&&"function"==typeof e.then}function _D(e){return!!e&&"function"==typeof e.subscribe}const yD=new Ye("");let M0=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s}),this.appInits=cn(yD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const c of this.appInits){const l=c();if(P0(l))i.push(l);else if(_D(l)){const p=new Promise((y,b)=>{l.subscribe({complete:y,error:b})});i.push(p)}}const s=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{s()}).catch(c=>{this.reject(c)}),0===i.length&&s(),this.initialized=!0}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const R0=new Ye("");function ID(e,n){return Array.isArray(n)?n.reduce(ID,e):{...e,...n}}let yd=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=cn(rg),this.afterRenderEffectManager=cn(cd),this.externalTestViews=new Set,this.beforeRender=new Ln.B,this.afterTick=new Ln.B,this.componentTypes=[],this.components=[],this.isStable=cn(Ja).hasPendingTasks.pipe((0,Gn.T)(i=>!i)),this._injector=cn(Lr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,s){const c=i instanceof sd;if(!this._injector.get(M0).done)throw!c&&Ni(i),new ft(405,!1);let p;p=c?i:this._injector.get(Ah).resolveComponentFactory(i),this.componentTypes.push(p.componentType);const y=function CM(e){return e.isBoundToModule}(p)?void 0:this._injector.get(Tu),B=p.create(so.NULL,[],s||p.selector,y),Y=B.location.nativeElement,le=B.injector.get(pD,null);return le?.registerApplication(Y),B.onDestroy(()=>{this.detachView(B.hostView),$v(this.components,B),le?.unregisterApplication(Y)}),this._loadComponent(B),B}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new ft(101,!1);const s=U(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(c){this.internalErrorHandler(c)}finally{this.afterTick.next(),this._runningTick=!1,U(s)}}detectChangesInAttachedViews(i){let s=0;const c=this.afterRenderEffectManager;for(;;){if(s===Ih)throw new ft(103,!1);if(i){const l=0===s;this.beforeRender.next(l);for(let{_lView:p,notifyErrorHandler:y}of this._views)TM(p,l,y)}if(s++,c.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>O0(l))&&(c.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>O0(l))))break}}attachView(i){const s=i;this._views.push(s),s.attachToAppRef(this)}detachView(i){const s=i;$v(this._views,s),s.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const s=this._injector.get(R0,[]);[...this._bootstrapListeners,...s].forEach(c=>c(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>$v(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new ft(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $v(e,n){const i=e.indexOf(n);i>-1&&e.splice(i,1)}function TM(e,n,i){!n&&!O0(e)||function DM(e,n,i){let s;i?(s=0,e[_n]|=1024):s=64&e[_n]?0:1,Ch(e,n,s)}(e,i,n)}function O0(e){return bl(e)}class AM{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let bM=(()=>{class e{compileModuleSync(i){return new W(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const s=this.compileModuleSync(i),l=Ea(xi(i).declarations).reduce((p,y)=>{const b=cr(y);return b&&p.push(new hd(b)),p},[]);return new AM(s,l)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),MM=(()=>{class e{constructor(){this.zone=cn(ws),this.applicationRef=cn(yd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function RM(){const e=cn(ws),n=cn(So);return i=>e.runOutsideAngular(()=>n.handleError(i))}let NM=(()=>{class e{constructor(){this.subscription=new rt.yU,this.initialized=!1,this.zone=cn(ws),this.pendingTasks=cn(Ja)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ws.assertNotInAngularZone(),queueMicrotask(()=>{null!==i&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ws.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Gv=new Ye("",{providedIn:"root",factory:()=>cn(Gv,nr.Optional|nr.SkipSelf)||function xM(){return typeof $localize<"u"&&$localize.locale||jp}()}),kM=new Ye("",{providedIn:"root",factory:()=>"USD"}),N0=new Ye("");let DD=(()=>{class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,s){const c=function Jy(e="zone.js",n){return"noop"===e?new Rm:"zone.js"===e?new ws(n):e}(s?.ngZone,function TD(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:s?.ngZoneEventCoalescing,runCoalescing:s?.ngZoneRunCoalescing}));return c.run(()=>{const l=function he(e,n,i){return new F(e,n,i)}(i.moduleType,this.injector,function wD(e){return[{provide:ws,useFactory:e},{provide:Us,multi:!0,useFactory:()=>{const n=cn(MM,{optional:!0});return()=>n.initialize()}},{provide:Us,multi:!0,useFactory:()=>{const n=cn(NM);return()=>{n.initialize()}}},{provide:rg,useFactory:RM}]}(()=>c)),p=l.injector.get(So,null);return c.runOutsideAngular(()=>{const y=c.onError.subscribe({next:b=>{p.handleError(b)}});l.onDestroy(()=>{$v(this._modules,l),y.unsubscribe()})}),function ED(e,n,i){try{const s=i();return P0(s)?s.catch(c=>{throw n.runOutsideAngular(()=>e.handleError(c)),c}):s}catch(s){throw n.runOutsideAngular(()=>e.handleError(s)),s}}(p,c,()=>{const y=l.injector.get(M0);return y.runInitializers(),y.donePromise.then(()=>(function Dw(e){"string"==typeof e&&(Tw=e.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Gv,jp)||jp),this._moduleDoBootstrap(l),l))})})}bootstrapModule(i,s=[]){const c=ID({},s);return function PM(e,n,i){const s=new W(i);return Promise.resolve(s)}(0,0,i).then(l=>this.bootstrapModuleFactory(l,c))}_moduleDoBootstrap(i){const s=i.injector.get(yd);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(c=>s.bootstrap(c));else{if(!i.instance.ngDoBootstrap)throw new ft(-403,!1);i.instance.ngDoBootstrap(s)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ft(404,!1);this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s());const i=this._injector.get(N0,null);i&&(i.forEach(s=>s()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(s){return new(s||e)(ni(so))};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),vd=null;const AD=new Ye("");function bD(e,n,i=[]){const s=`Platform: ${n}`,c=new Ye(s);return(l=[])=>{let p=x0();if(!p||p.injector.get(AD,!1)){const y=[...i,...l,{provide:c,useValue:!0}];e?e(y):function VM(e){if(vd&&!vd.get(AD,!1))throw new ft(400,!1);(function vD(){!function Tn(e){On=e}(()=>{throw new ft(600,!1)})})(),vd=e;const n=e.get(DD);(function PD(e){e.get(Tf,null)?.forEach(i=>i())})(e)}(function SD(e=[],n){return so.create({name:n,providers:[{provide:ur,useValue:"platform"},{provide:N0,useValue:new Set([()=>vd=null])},...e]})}(y,s))}return function LM(e){const n=x0();if(!n)throw new ft(401,!1);return n}()}}function x0(){return vd?.get(DD)??null}function BM(){return!1}let RD=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=jM}return e})();function jM(e){return function $M(e,n,i){if(ta(e)&&!i){const s=zo(e.index,n);return new wh(s,s)}return 47&e.type?new wh(n[jn],n):null}(Br(),Vt(),!(16&~e))}class kD{constructor(){}supports(n){return vl(n)}create(n){return new KM(n)}}const WM=(e,n)=>n;class KM{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||WM}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,s=this._removalsHead,c=0,l=null;for(;i||s;){const p=!s||i&&i.currentIndex<VD(s,c,l)?i:s,y=VD(p,c,l),b=p.currentIndex;if(p===s)c--,s=s._nextRemoved;else if(i=i._next,null==p.previousIndex)c++;else{l||(l=[]);const B=y-c,Y=b-c;if(B!=Y){for(let Ne=0;Ne<B;Ne++){const We=Ne<l.length?l[Ne]:l[Ne]=0,ht=We+Ne;Y<=ht&&ht<B&&(l[Ne]=We+1)}l[p.previousIndex]=Y-B}}y!==b&&n(p,y,b)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!vl(n))throw new ft(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,l,p,i=this._itHead,s=!1;if(Array.isArray(n)){this.length=n.length;for(let y=0;y<this.length;y++)l=n[y],p=this._trackByFn(y,l),null!==i&&Object.is(i.trackById,p)?(s&&(i=this._verifyReinsertion(i,l,p,y)),Object.is(i.item,l)||this._addIdentityChange(i,l)):(i=this._mismatch(i,l,p,y),s=!0),i=i._next}else c=0,function lA(e,n){if(Array.isArray(e))for(let i=0;i<e.length;i++)n(e[i]);else{const i=e[Symbol.iterator]();let s;for(;!(s=i.next()).done;)n(s.value)}}(n,y=>{p=this._trackByFn(c,y),null!==i&&Object.is(i.trackById,p)?(s&&(i=this._verifyReinsertion(i,y,p,c)),Object.is(i.item,y)||this._addIdentityChange(i,y)):(i=this._mismatch(i,y,p,c),s=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,s,c){let l;return null===n?l=this._itTail:(l=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,l,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(s,c))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,l,c)):n=this._addAfter(new qM(i,s),l,c),n}_verifyReinsertion(n,i,s,c){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==l?n=this._reinsertAfter(l,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,l=n._nextRemoved;return null===c?this._removalsHead=l:c._nextRemoved=l,null===l?this._removalsTail=c:l._prevRemoved=c,this._insertAfter(n,i,s),this._addToMoves(n,s),n}_moveAfter(n,i,s){return this._unlink(n),this._insertAfter(n,i,s),this._addToMoves(n,s),n}_addAfter(n,i,s){return this._insertAfter(n,i,s),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,s){const c=null===i?this._itHead:i._next;return n._next=c,n._prev=i,null===c?this._itTail=n:c._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new FD),this._linkedRecords.put(n),n.currentIndex=s,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,s=n._next;return null===i?this._itHead=s:i._next=s,null===s?this._itTail=i:s._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FD),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class qM{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QM{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===i||i<=s.currentIndex)&&Object.is(s.trackById,n))return s;return null}remove(n){const i=n._prevDup,s=n._nextDup;return null===i?this._head=s:i._nextDup=s,null===s?this._tail=i:s._prevDup=i,null===this._head}}class FD{constructor(){this.map=new Map}put(n){const i=n.trackById;let s=this.map.get(i);s||(s=new QM,this.map.set(i,s)),s.add(n)}get(n,i){const c=this.map.get(n);return c?c.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VD(e,n,i){const s=e.previousIndex;if(null===s)return s;let c=0;return i&&s<i.length&&(c=i[s]),s+n+c}class LD{constructor(){}supports(n){return n instanceof Map||LI(n)}create(){return new XM}}class XM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||LI(n)))throw new ft(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(s,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,s),this._appendAfter=i,i=i._next;else{const l=this._getOrCreateRecordForKey(c,s);i=this._insertBeforeOrAppend(i,l)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let s=i;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const s=n._prev;return i._next=n,i._prev=s,n._prev=i,s&&(s._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,i);const l=c._prev,p=c._next;return l&&(l._next=p),p&&(p._prev=l),c._next=null,c._prev=null,c}const s=new YM(n);return this._records.set(n,s),s.currentValue=i,this._addToAdditions(s),s}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(s=>i(n[s],s))}}class YM{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UD(){return new U0([new kD])}let U0=(()=>{class e{static#e=this.\u0275prov=ir({token:e,providedIn:"root",factory:UD});constructor(i){this.factories=i}static create(i,s){if(null!=s){const c=s.factories.slice();i=i.concat(c)}return new e(i)}static extend(i){return{provide:e,useFactory:s=>e.create(i,s||UD()),deps:[[e,new ts,new Wi]]}}find(i){const s=this.factories.find(c=>c.supports(i));if(null!=s)return s;throw new ft(901,!1)}}return e})();function BD(){return new B0([new LD])}let B0=(()=>{class e{static#e=this.\u0275prov=ir({token:e,providedIn:"root",factory:BD});constructor(i){this.factories=i}static create(i,s){if(s){const c=s.factories.slice();i=i.concat(c)}return new e(i)}static extend(i){return{provide:e,useFactory:s=>e.create(i,s||BD()),deps:[[e,new ts,new Wi]]}}find(i){const s=this.factories.find(c=>c.supports(i));if(s)return s;throw new ft(901,!1)}}return e})();const eR=bD(null,"core",[]);let tR=(()=>{class e{constructor(i){}static#e=this.\u0275fac=function(s){return new(s||e)(ni(yd))};static#t=this.\u0275mod=To({type:e});static#n=this.\u0275inj=Gi({})}return e})();function MR(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function OR(e){const n=U(null);try{return e()}finally{U(n)}}function LR(e){const n=cr(e);if(!n)return null;const i=new hd(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},1182:(en,Qe,k)=>{k.d(Qe,{DS:()=>gt,X8:()=>yt,$z:()=>Tn,UB:()=>Xe,yy:()=>On,ZP:()=>Ft,AU:()=>ke,CP:()=>Fn,gF:()=>ct}),k(2438);var L=k(177),M=k(4438),C=k(1825),se=k(9253),Me=k(1413),U=k(7673),Le=k(1985),$e=k(8455),Ee=k(6365),ye=k(8750),He=k(983),Ct=k(9326),Fe=k(941),wt=k(5558),pt=k(6354),Tt=k(6129);class At extends Me.B{constructor(zt=1/0,ln=1/0,Zt=Tt.U){super(),this._bufferSize=zt,this._windowTime=ln,this._timestampProvider=Zt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=ln===1/0,this._bufferSize=Math.max(1,zt),this._windowTime=Math.max(1,ln)}next(zt){const{isStopped:ln,_buffer:Zt,_infiniteTimeWindow:tn,_timestampProvider:vn,_windowTime:Cn}=this;ln||(Zt.push(zt),!tn&&Zt.push(vn.now()+Cn)),this._trimBuffer(),super.next(zt)}_subscribe(zt){this._throwIfClosed(),this._trimBuffer();const ln=this._innerSubscribe(zt),{_infiniteTimeWindow:Zt,_buffer:tn}=this,vn=tn.slice();for(let Cn=0;Cn<vn.length&&!zt.closed;Cn+=Zt?1:2)zt.next(vn[Cn]);return this._checkFinalizedStatuses(zt),ln}_trimBuffer(){const{_bufferSize:zt,_timestampProvider:ln,_buffer:Zt,_infiniteTimeWindow:tn}=this,vn=(tn?1:2)*zt;if(zt<1/0&&vn<Zt.length&&Zt.splice(0,Zt.length-vn),!tn){const Cn=ln.now();let Ln=0;for(let rt=1;rt<Zt.length&&Zt[rt]<=Cn;rt+=2)Ln=rt;Ln&&Zt.splice(0,Ln+1)}}}var mt=k(7707),ce=k(9974);function ue(Ze,zt,...ln){if(!0===zt)return void Ze();if(!1===zt)return;const Zt=new mt.Ms({next:()=>{Zt.unsubscribe(),Ze()}});return(0,ye.Tg)(zt(...ln)).subscribe(Zt)}function Ce(Ze,zt,ln){let Zt,tn=!1;return Ze&&"object"==typeof Ze?({bufferSize:Zt=1/0,windowTime:zt=1/0,refCount:tn=!1,scheduler:ln}=Ze):Zt=Ze??1/0,function ie(Ze={}){const{connector:zt=(()=>new Me.B),resetOnError:ln=!0,resetOnComplete:Zt=!0,resetOnRefCountZero:tn=!0}=Ze;return vn=>{let Cn,Ln,rt,yn=0,Gn=!1,rr=!1;const bt=()=>{Ln?.unsubscribe(),Ln=void 0},ft=()=>{bt(),Cn=rt=void 0,Gn=rr=!1},ti=()=>{const Nt=Cn;ft(),Nt?.unsubscribe()};return(0,ce.N)((Nt,tt)=>{yn++,!rr&&!Gn&&bt();const Rt=rt=rt??zt();tt.add(()=>{yn--,0===yn&&!rr&&!Gn&&(Ln=ue(ti,tn))}),Rt.subscribe(tt),!Cn&&yn>0&&(Cn=new mt.Ms({next:Qn=>Rt.next(Qn),error:Qn=>{rr=!0,bt(),Ln=ue(ft,ln,Qn),Rt.error(Qn)},complete:()=>{Gn=!0,bt(),Ln=ue(ft,Zt),Rt.complete()}}),(0,ye.Tg)(Nt).subscribe(Cn))})(vn)}}({connector:()=>new At(Zt,zt,ln),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:tn})}var qe=k(1594),ze=k(8071);function de(Ze,zt){return(0,ze.T)(zt)?(0,wt.n)(()=>Ze,zt):(0,wt.n)(()=>Ze)}var Ue=k(6745),Mt=k(5964),pn=k(7935);const Fn=new M.nKC("angularfire2.auth.use-emulator"),On=new M.nKC("angularfire2.auth.settings"),Ft=new M.nKC("angularfire2.auth.tenant-id"),Tn=new M.nKC("angularfire2.auth.langugage-code"),ke=new M.nKC("angularfire2.auth.use-device-language"),Xe=new M.nKC("angularfire.auth.persistence"),ct=(Ze,zt,ln,Zt,tn,vn,Cn,Ln)=>(0,se.BM)(`${Ze.name}.auth`,"AngularFireAuth",Ze.name,()=>{const rt=zt.runOutsideAngular(()=>Ze.auth());if(ln&&rt.useEmulator(...ln),Zt&&(rt.tenantId=Zt),rt.languageCode=tn,vn&&rt.useDeviceLanguage(),Cn)for(const[yn,Gn]of Object.entries(Cn))rt.settings[yn]=Gn;return Ln&&rt.setPersistence(Ln),rt},[ln,Zt,tn,vn,Cn,Ln]);let gt=(()=>{class Ze{authState;idToken;user;idTokenResult;credential;constructor(ln,Zt,tn,vn,Cn,Ln,rt,yn,Gn,rr,bt,ft){const ti=new Me.B,Nt=(0,U.of)(void 0).pipe((0,Fe.Q)(Cn.outsideAngular),(0,wt.n)(()=>vn.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2438)))),(0,pt.T)(()=>(0,se.iB)(ln,vn,Zt)),(0,pt.T)(tt=>ct(tt,vn,Ln,yn,Gn,rr,rt,bt)),Ce({bufferSize:1,refCount:!1}));if((0,L.Vy)(tn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,U.of)(null);else{Nt.pipe((0,qe.$)()).subscribe();const tt=Nt.pipe((0,wt.n)(Zn=>Zn.getRedirectResult().then(wn=>wn,()=>null)),C.U0,Ce({bufferSize:1,refCount:!1})),Rt=Nt.pipe((0,wt.n)(Zn=>new Le.c(wn=>({unsubscribe:vn.runOutsideAngular(()=>Zn.onAuthStateChanged(An=>wn.next(An),An=>wn.error(An),()=>wn.complete()))})))),Qn=Nt.pipe((0,wt.n)(Zn=>new Le.c(wn=>({unsubscribe:vn.runOutsideAngular(()=>Zn.onIdTokenChanged(An=>wn.next(An),An=>wn.error(An),()=>wn.complete()))}))));this.authState=tt.pipe(de(Rt),(0,Ue._)(Cn.outsideAngular),(0,Fe.Q)(Cn.insideAngular)),this.user=tt.pipe(de(Qn),(0,Ue._)(Cn.outsideAngular),(0,Fe.Q)(Cn.insideAngular)),this.idToken=this.user.pipe((0,wt.n)(Zn=>Zn?(0,$e.H)(Zn.getIdToken()):(0,U.of)(null))),this.idTokenResult=this.user.pipe((0,wt.n)(Zn=>Zn?(0,$e.H)(Zn.getIdTokenResult()):(0,U.of)(null))),this.credential=function Ae(...Ze){const zt=(0,Ct.lI)(Ze),ln=(0,Ct.R0)(Ze,1/0),Zt=Ze;return Zt.length?1===Zt.length?(0,ye.Tg)(Zt[0]):(0,Ee.U)(ln)((0,$e.H)(Zt,zt)):He.w}(tt,ti,this.authState.pipe((0,Mt.p)(Zn=>!Zn))).pipe((0,pt.T)(Zn=>Zn?.user?Zn:null),(0,Ue._)(Cn.outsideAngular),(0,Fe.Q)(Cn.insideAngular))}return(0,se.Gt)(this,Nt,vn,{spy:{apply:(tt,Rt,Qn)=>{(tt.startsWith("signIn")||tt.startsWith("createUser"))&&Qn.then(Zn=>ti.next(Zn))}}})}static \u0275fac=function(Zt){return new(Zt||Ze)(M.KVO(se.rx),M.KVO(se.uP,8),M.KVO(M.Agw),M.KVO(M.SKi),M.KVO(C.u0),M.KVO(Fn,8),M.KVO(On,8),M.KVO(Ft,8),M.KVO(Tn,8),M.KVO(ke,8),M.KVO(Xe,8),M.KVO(C.Jv,8))};static \u0275prov=M.jDH({token:Ze,factory:Ze.\u0275fac,providedIn:"any"})}return Ze})(),yt=(()=>{class Ze{constructor(){pn.A.registerVersion("angularfire",C.xv.full,"auth-compat")}static \u0275fac=function(Zt){return new(Zt||Ze)};static \u0275mod=M.$C({type:Ze});static \u0275inj=M.G2t({providers:[gt]})}return Ze})()},9253:(en,Qe,k)=>{k.d(Qe,{BM:()=>Ae,Gt:()=>se,bf:()=>Ct,e7:()=>Me,iB:()=>Ee,rx:()=>Le,uP:()=>$e});var _=k(4438),L=k(1825),M=k(7935);const C=["ngOnDestroy"],se=(Tt,At,mt,ce={})=>new Proxy(Tt,{get:(ie,ue)=>mt.runOutsideAngular(()=>{if(Tt[ue])return ce?.spy?.get&&ce.spy.get(ue,Tt[ue]),Tt[ue];if(C.indexOf(ue)>-1)return()=>{};const Ce=At.toPromise().then(qe=>{const ze=qe?.[ue];return"function"==typeof ze?ze.bind(qe):ze?.then?ze.then(de=>mt.run(()=>de)):mt.run(()=>ze)});return new Proxy(()=>{},{get:(qe,ze)=>Ce[ze],apply:(qe,ze,de)=>Ce.then(Ue=>{const Mt=Ue?.(...de);return ce?.spy?.apply&&ce.spy.apply(ue,de,Mt),Mt})})})}),Me=(Tt,At)=>{At.forEach(mt=>{Object.getOwnPropertyNames(mt.prototype||mt).forEach(ce=>{Object.defineProperty(Tt.prototype,ce,Object.getOwnPropertyDescriptor(mt.prototype||mt,ce))})})};class U{constructor(At){return At}}const Le=new _.nKC("angularfire2.app.options"),$e=new _.nKC("angularfire2.app.name");function Ee(Tt,At,mt){const ie="object"==typeof mt&&mt||{};ie.name=ie.name||"string"==typeof mt&&mt||"[DEFAULT]";const Ce=M.A.apps.filter(qe=>qe&&qe.name===ie.name)[0]||At.runOutsideAngular(()=>M.A.initializeApp(Tt,ie));try{if(JSON.stringify(Tt)!==JSON.stringify(Ce.options)){const qe=!!module.hot;ye("error",`${Ce.name} Firebase App already initialized with different options${qe?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new U(Ce)}const ye=(Tt,...At)=>{(0,_.naY)()&&typeof console<"u"&&console[Tt](...At)},He={provide:U,useFactory:Ee,deps:[Le,_.SKi,[new _.Xx1,$e]]};let Ct=(()=>{class Tt{static initializeApp(mt,ce){return{ngModule:Tt,providers:[{provide:Le,useValue:mt},{provide:$e,useValue:ce}]}}constructor(mt){M.A.registerVersion("angularfire",L.xv.full,"core"),M.A.registerVersion("angularfire",L.xv.full,"app-compat"),M.A.registerVersion("angular",_.xvI.full,mt.toString())}static \u0275fac=function(ce){return new(ce||Tt)(_.KVO(_.Agw))};static \u0275mod=_.$C({type:Tt});static \u0275inj=_.G2t({providers:[He]})}return Tt})();function Ae(Tt,At,mt,ce,ie){const[,ue,Ce]=globalThis.\u0275AngularfireInstanceCache.find(qe=>qe[0]===Tt)||[];if(ue)return function Fe(Tt,At){try{return Tt.toString()===At.toString()}catch{return Tt===At}}(ie,Ce)||(pt("error",`${At} was already initialized on the ${mt} Firebase App with different settings.${wt?" You may need to reload as Firebase is not HMR aware.":""}`),pt("warn",{is:ie,was:Ce})),ue;{const qe=ce();return globalThis.\u0275AngularfireInstanceCache.push([Tt,qe,ie]),qe}}const wt=typeof module<"u"&&!!module.hot,pt=(Tt,...At)=>{(0,_.naY)()&&typeof console<"u"&&console[Tt](...At)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:(en,Qe,k)=>{k.d(Qe,{xv:()=>Fe,U0:()=>pn,u0:()=>Ce,Jv:()=>At});var _=k(4438),L=k(7852);(0,L.registerVersion)("firebase","10.13.1","app");var se=k(6780),U=k(9687);const $e=new class Le extends U.q{}(class Me extends se.R{constructor(Tn,ke){super(Tn,ke),this.scheduler=Tn,this.work=ke}schedule(Tn,ke=0){return ke>0?super.schedule(Tn,ke):(this.delay=ke,this.state=Tn,this.scheduler.flush(this),this)}execute(Tn,ke){return ke>0||this.closed?super.execute(Tn,ke):this._execute(Tn,ke)}requestAsyncId(Tn,ke,Xe=0){return null!=Xe&&Xe>0||null==Xe&&this.delay>0?super.requestAsyncId(Tn,ke,Xe):(Tn.flush(this),0)}});var ye=k(3236),He=k(8141),Ct=k(6745),Ae=k(941);const Fe=new _.RxE("ANGULARFIRE2_VERSION");class At{constructor(){return((Ft,Tn)=>{const ke=(0,L.getApps)(),Xe=[];return ke.forEach(ct=>{ct.container.getProvider(Ft).instances.forEach(yt=>{Xe.includes(yt)||Xe.push(yt)})}),Xe})(mt)}}const mt="app-check";function ce(){}class ie{zone;delegate;constructor(Tn,ke=$e){this.zone=Tn,this.delegate=ke}now(){return this.delegate.now()}schedule(Tn,ke,Xe){const ct=this.zone;return this.delegate.schedule(function(yt){ct.runGuarded(()=>{Tn.apply(this,[yt])})},ke,Xe)}}class ue{zone;task=null;constructor(Tn){this.zone=Tn}call(Tn,ke){const Xe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ce,{},ce,ce)),ke.pipe((0,He.M)({next:Xe,complete:Xe,error:Xe})).subscribe(Tn).add(Xe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ce=(()=>{class Ft{ngZone;outsideAngular;insideAngular;constructor(ke){this.ngZone=ke,this.outsideAngular=ke.runOutsideAngular(()=>new ie(Zone.current)),this.insideAngular=ke.run(()=>new ie(Zone.current,ye.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Xe){return new(Xe||Ft)(_.KVO(_.SKi))};static \u0275prov=_.jDH({token:Ft,factory:Ft.\u0275fac,providedIn:"root"})}return Ft})();function pn(Ft){return function Pn(Ft){return function(ke){return(ke=ke.lift(new ue(Ft.ngZone))).pipe((0,Ct._)(Ft.outsideAngular),(0,Ae.Q)(Ft.insideAngular))}}(function qe(){const Ft=globalThis.\u0275AngularFireScheduler;if(!Ft)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Ft}())(Ft)}},9417:(en,Qe,k)=>{k.d(Qe,{BC:()=>bt,JD:()=>Jr,MR:()=>xs,X1:()=>Fi,YN:()=>wo,cb:()=>ft,j4:()=>Rs,k0:()=>mt,me:()=>Ae,ok:()=>co,qT:()=>Fo,vS:()=>ar,wz:()=>ni,xH:()=>ss,y7:()=>Ys});var _=k(4438),L=k(177),M=k(8455),C=k(7468),se=k(6354);let Me=(()=>{class z{constructor(O,ee){this._renderer=O,this._elementRef=ee,this.onChange=be=>{},this.onTouched=()=>{}}setProperty(O,ee){this._renderer.setProperty(this._elementRef.nativeElement,O,ee)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}static#e=this.\u0275fac=function(ee){return new(ee||z)(_.rXU(_.sFG),_.rXU(_.aKT))};static#t=this.\u0275dir=_.FsC({type:z})}return z})(),U=(()=>{class z extends Me{static#e=this.\u0275fac=(()=>{let O;return function(be){return(O||(O=_.xGo(z)))(be||z)}})();static#t=this.\u0275dir=_.FsC({type:z,features:[_.Vt3]})}return z})();const Le=new _.nKC(""),ye={provide:Le,useExisting:(0,_.Rfq)(()=>Ae),multi:!0},Ct=new _.nKC("");let Ae=(()=>{class z extends Me{constructor(O,ee,be){super(O,ee),this._compositionMode=be,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function He(){const z=(0,L.QT)()?(0,L.QT)().getUserAgent():"";return/android (\d+)/.test(z.toLowerCase())}())}writeValue(O){this.setProperty("value",O??"")}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}static#e=this.\u0275fac=function(ee){return new(ee||z)(_.rXU(_.sFG),_.rXU(_.aKT),_.rXU(Ct,8))};static#t=this.\u0275dir=_.FsC({type:z,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(ee,be){1&ee&&_.bIt("input",function(Xn){return be._handleInput(Xn.target.value)})("blur",function(){return be.onTouched()})("compositionstart",function(){return be._compositionStart()})("compositionend",function(Xn){return be._compositionEnd(Xn.target.value)})},features:[_.Jv_([ye]),_.Vt3]})}return z})();function Fe(z){return null==z||("string"==typeof z||Array.isArray(z))&&0===z.length}function wt(z){return null!=z&&"number"==typeof z.length}const pt=new _.nKC(""),Tt=new _.nKC(""),At=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class mt{static min(q){return function ce(z){return q=>{if(Fe(q.value)||Fe(z))return null;const O=parseFloat(q.value);return!isNaN(O)&&O<z?{min:{min:z,actual:q.value}}:null}}(q)}static max(q){return function ie(z){return q=>{if(Fe(q.value)||Fe(z))return null;const O=parseFloat(q.value);return!isNaN(O)&&O>z?{max:{max:z,actual:q.value}}:null}}(q)}static required(q){return function ue(z){return Fe(z.value)?{required:!0}:null}(q)}static requiredTrue(q){return function Ce(z){return!0===z.value?null:{required:!0}}(q)}static email(q){return function qe(z){return Fe(z.value)||At.test(z.value)?null:{email:!0}}(q)}static minLength(q){return function ze(z){return q=>Fe(q.value)||!wt(q.value)?null:q.value.length<z?{minlength:{requiredLength:z,actualLength:q.value.length}}:null}(q)}static maxLength(q){return function de(z){return q=>wt(q.value)&&q.value.length>z?{maxlength:{requiredLength:z,actualLength:q.value.length}}:null}(q)}static pattern(q){return function Ue(z){if(!z)return Mt;let q,O;return"string"==typeof z?(O="","^"!==z.charAt(0)&&(O+="^"),O+=z,"$"!==z.charAt(z.length-1)&&(O+="$"),q=new RegExp(O)):(O=z.toString(),q=z),ee=>{if(Fe(ee.value))return null;const be=ee.value;return q.test(be)?null:{pattern:{requiredPattern:O,actualValue:be}}}}(q)}static nullValidator(q){return null}static compose(q){return ke(q)}static composeAsync(q){return ct(q)}}function Mt(z){return null}function pn(z){return null!=z}function Pn(z){return(0,_.jNT)(z)?(0,M.H)(z):z}function Fn(z){let q={};return z.forEach(O=>{q=null!=O?{...q,...O}:q}),0===Object.keys(q).length?null:q}function On(z,q){return q.map(O=>O(z))}function Tn(z){return z.map(q=>function Ft(z){return!z.validate}(q)?q:O=>q.validate(O))}function ke(z){if(!z)return null;const q=z.filter(pn);return 0==q.length?null:function(O){return Fn(On(O,q))}}function Xe(z){return null!=z?ke(Tn(z)):null}function ct(z){if(!z)return null;const q=z.filter(pn);return 0==q.length?null:function(O){const ee=On(O,q).map(Pn);return(0,C.p)(ee).pipe((0,se.T)(Fn))}}function gt(z){return null!=z?ct(Tn(z)):null}function yt(z,q){return null===z?[q]:Array.isArray(z)?[...z,q]:[z,q]}function Ze(z){return z._rawValidators}function zt(z){return z._rawAsyncValidators}function ln(z){return z?Array.isArray(z)?z:[z]:[]}function Zt(z,q){return Array.isArray(z)?z.includes(q):z===q}function tn(z,q){const O=ln(q);return ln(z).forEach(be=>{Zt(O,be)||O.push(be)}),O}function vn(z,q){return ln(q).filter(O=>!Zt(z,O))}class Cn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(q){this._rawValidators=q||[],this._composedValidatorFn=Xe(this._rawValidators)}_setAsyncValidators(q){this._rawAsyncValidators=q||[],this._composedAsyncValidatorFn=gt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(q){this._onDestroyCallbacks.push(q)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(q=>q()),this._onDestroyCallbacks=[]}reset(q=void 0){this.control&&this.control.reset(q)}hasError(q,O){return!!this.control&&this.control.hasError(q,O)}getError(q,O){return this.control?this.control.getError(q,O):null}}class Ln extends Cn{get formDirective(){return null}get path(){return null}}class rt extends Cn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yn{constructor(q){this._cd=q}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let bt=(()=>{class z extends yn{constructor(O){super(O)}static#e=this.\u0275fac=function(ee){return new(ee||z)(_.rXU(rt,2))};static#t=this.\u0275dir=_.FsC({type:z,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(ee,be){2&ee&&_.AVh("ng-untouched",be.isUntouched)("ng-touched",be.isTouched)("ng-pristine",be.isPristine)("ng-dirty",be.isDirty)("ng-valid",be.isValid)("ng-invalid",be.isInvalid)("ng-pending",be.isPending)},features:[_.Vt3]})}return z})(),ft=(()=>{class z extends yn{constructor(O){super(O)}static#e=this.\u0275fac=function(ee){return new(ee||z)(_.rXU(Ln,10))};static#t=this.\u0275dir=_.FsC({type:z,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(ee,be){2&ee&&_.AVh("ng-untouched",be.isUntouched)("ng-touched",be.isTouched)("ng-pristine",be.isPristine)("ng-dirty",be.isDirty)("ng-valid",be.isValid)("ng-invalid",be.isInvalid)("ng-pending",be.isPending)("ng-submitted",be.isSubmitted)},features:[_.Vt3]})}return z})();const Un="VALID",Or="INVALID",Xt="PENDING",Yt="DISABLED";function Qr(z){return(Te(z)?z.validators:z)||null}function Nr(z,q){return(Te(q)?q.asyncValidators:z)||null}function Te(z){return null!=z&&!Array.isArray(z)&&"object"==typeof z}function we(z,q,O){const ee=z.controls;if(!(q?Object.keys(ee):ee).length)throw new _.wOt(1e3,"");if(!ee[O])throw new _.wOt(1001,"")}function Ke(z,q,O){z._forEachChild((ee,be)=>{if(void 0===O[be])throw new _.wOt(1002,"")})}class St{constructor(q,O){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(q),this._assignAsyncValidators(O)}get validator(){return this._composedValidatorFn}set validator(q){this._rawValidators=this._composedValidatorFn=q}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(q){this._rawAsyncValidators=this._composedAsyncValidatorFn=q}get parent(){return this._parent}get valid(){return this.status===Un}get invalid(){return this.status===Or}get pending(){return this.status==Xt}get disabled(){return this.status===Yt}get enabled(){return this.status!==Yt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(q){this._assignValidators(q)}setAsyncValidators(q){this._assignAsyncValidators(q)}addValidators(q){this.setValidators(tn(q,this._rawValidators))}addAsyncValidators(q){this.setAsyncValidators(tn(q,this._rawAsyncValidators))}removeValidators(q){this.setValidators(vn(q,this._rawValidators))}removeAsyncValidators(q){this.setAsyncValidators(vn(q,this._rawAsyncValidators))}hasValidator(q){return Zt(this._rawValidators,q)}hasAsyncValidator(q){return Zt(this._rawAsyncValidators,q)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(q={}){this.touched=!0,this._parent&&!q.onlySelf&&this._parent.markAsTouched(q)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(q=>q.markAllAsTouched())}markAsUntouched(q={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}markAsDirty(q={}){this.pristine=!1,this._parent&&!q.onlySelf&&this._parent.markAsDirty(q)}markAsPristine(q={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}markAsPending(q={}){this.status=Xt,!1!==q.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!q.onlySelf&&this._parent.markAsPending(q)}disable(q={}){const O=this._parentMarkedDirty(q.onlySelf);this.status=Yt,this.errors=null,this._forEachChild(ee=>{ee.disable({...q,onlySelf:!0})}),this._updateValue(),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...q,skipPristineCheck:O}),this._onDisabledChange.forEach(ee=>ee(!0))}enable(q={}){const O=this._parentMarkedDirty(q.onlySelf);this.status=Un,this._forEachChild(ee=>{ee.enable({...q,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent}),this._updateAncestors({...q,skipPristineCheck:O}),this._onDisabledChange.forEach(ee=>ee(!1))}_updateAncestors(q){this._parent&&!q.onlySelf&&(this._parent.updateValueAndValidity(q),q.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(q){this._parent=q}getRawValue(){return this.value}updateValueAndValidity(q={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Un||this.status===Xt)&&this._runAsyncValidator(q.emitEvent)),!1!==q.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!q.onlySelf&&this._parent.updateValueAndValidity(q)}_updateTreeValidity(q={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(q)),this.updateValueAndValidity({onlySelf:!0,emitEvent:q.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yt:Un}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(q){if(this.asyncValidator){this.status=Xt,this._hasOwnPendingAsyncValidator=!0;const O=Pn(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(ee=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ee,{emitEvent:q})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(q,O={}){this.errors=q,this._updateControlsErrors(!1!==O.emitEvent)}get(q){let O=q;return null==O||(Array.isArray(O)||(O=O.split(".")),0===O.length)?null:O.reduce((ee,be)=>ee&&ee._find(be),this)}getError(q,O){const ee=O?this.get(O):this;return ee&&ee.errors?ee.errors[q]:null}hasError(q,O){return!!this.getError(q,O)}get root(){let q=this;for(;q._parent;)q=q._parent;return q}_updateControlsErrors(q){this.status=this._calculateStatus(),q&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(q)}_initObservables(){this.valueChanges=new _.bkB,this.statusChanges=new _.bkB}_calculateStatus(){return this._allControlsDisabled()?Yt:this.errors?Or:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xt)?Xt:this._anyControlsHaveStatus(Or)?Or:Un}_anyControlsHaveStatus(q){return this._anyControls(O=>O.status===q)}_anyControlsDirty(){return this._anyControls(q=>q.dirty)}_anyControlsTouched(){return this._anyControls(q=>q.touched)}_updatePristine(q={}){this.pristine=!this._anyControlsDirty(),this._parent&&!q.onlySelf&&this._parent._updatePristine(q)}_updateTouched(q={}){this.touched=this._anyControlsTouched(),this._parent&&!q.onlySelf&&this._parent._updateTouched(q)}_registerOnCollectionChange(q){this._onCollectionChange=q}_setUpdateStrategy(q){Te(q)&&null!=q.updateOn&&(this._updateOn=q.updateOn)}_parentMarkedDirty(q){return!q&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(q){return null}_assignValidators(q){this._rawValidators=Array.isArray(q)?q.slice():q,this._composedValidatorFn=function Mn(z){return Array.isArray(z)?Xe(z):z||null}(this._rawValidators)}_assignAsyncValidators(q){this._rawAsyncValidators=Array.isArray(q)?q.slice():q,this._composedAsyncValidatorFn=function xe(z){return Array.isArray(z)?gt(z):z||null}(this._rawAsyncValidators)}}class ge extends St{constructor(q,O,ee){super(Qr(O),Nr(ee,O)),this.controls=q,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(q,O){return this.controls[q]?this.controls[q]:(this.controls[q]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(q,O,ee={}){this.registerControl(q,O),this.updateValueAndValidity({emitEvent:ee.emitEvent}),this._onCollectionChange()}removeControl(q,O={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(q,O,ee={}){this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),delete this.controls[q],O&&this.registerControl(q,O),this.updateValueAndValidity({emitEvent:ee.emitEvent}),this._onCollectionChange()}contains(q){return this.controls.hasOwnProperty(q)&&this.controls[q].enabled}setValue(q,O={}){Ke(this,0,q),Object.keys(q).forEach(ee=>{we(this,!0,ee),this.controls[ee].setValue(q[ee],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(q,O={}){null!=q&&(Object.keys(q).forEach(ee=>{const be=this.controls[ee];be&&be.patchValue(q[ee],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(q={},O={}){this._forEachChild((ee,be)=>{ee.reset(q?q[be]:null,{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(q,O,ee)=>(q[ee]=O.getRawValue(),q))}_syncPendingControls(){let q=this._reduceChildren(!1,(O,ee)=>!!ee._syncPendingControls()||O);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_forEachChild(q){Object.keys(this.controls).forEach(O=>{const ee=this.controls[O];ee&&q(ee,O)})}_setUpControls(){this._forEachChild(q=>{q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(q){for(const[O,ee]of Object.entries(this.controls))if(this.contains(O)&&q(ee))return!0;return!1}_reduceValue(){return this._reduceChildren({},(O,ee,be)=>((ee.enabled||this.disabled)&&(O[be]=ee.value),O))}_reduceChildren(q,O){let ee=q;return this._forEachChild((be,un)=>{ee=O(ee,be,un)}),ee}_allControlsDisabled(){for(const q of Object.keys(this.controls))if(this.controls[q].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(q){return this.controls.hasOwnProperty(q)?this.controls[q]:null}}class me extends ge{}const Lt=new _.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>mn}),mn="always";function Bn(z,q){return[...q.path,z]}function zn(z,q,O=mn){Gr(z,q),q.valueAccessor.writeValue(z.value),(z.disabled||"always"===O)&&q.valueAccessor.setDisabledState?.(z.disabled),function Ms(z,q){q.valueAccessor.registerOnChange(O=>{z._pendingValue=O,z._pendingChange=!0,z._pendingDirty=!0,"change"===z.updateOn&&ir(z,q)})}(z,q),function is(z,q){const O=(ee,be)=>{q.valueAccessor.writeValue(ee),be&&q.viewToModelUpdate(ee)};z.registerOnChange(O),q._registerOnDestroy(()=>{z._unregisterOnChange(O)})}(z,q),function cs(z,q){q.valueAccessor.registerOnTouched(()=>{z._pendingTouched=!0,"blur"===z.updateOn&&z._pendingChange&&ir(z,q),"submit"!==z.updateOn&&z.markAsTouched()})}(z,q),function Oe(z,q){if(q.valueAccessor.setDisabledState){const O=ee=>{q.valueAccessor.setDisabledState(ee)};z.registerOnDisabledChange(O),q._registerOnDestroy(()=>{z._unregisterOnDisabledChange(O)})}}(z,q)}function bn(z,q,O=!0){const ee=()=>{};q.valueAccessor&&(q.valueAccessor.registerOnChange(ee),q.valueAccessor.registerOnTouched(ee)),Yr(z,q),z&&(q._invokeOnDestroyCallbacks(),z._registerOnCollectionChange(()=>{}))}function Gt(z,q){z.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(q)})}function Gr(z,q){const O=Ze(z);null!==q.validator?z.setValidators(yt(O,q.validator)):"function"==typeof O&&z.setValidators([O]);const ee=zt(z);null!==q.asyncValidator?z.setAsyncValidators(yt(ee,q.asyncValidator)):"function"==typeof ee&&z.setAsyncValidators([ee]);const be=()=>z.updateValueAndValidity();Gt(q._rawValidators,be),Gt(q._rawAsyncValidators,be)}function Yr(z,q){let O=!1;if(null!==z){if(null!==q.validator){const be=Ze(z);if(Array.isArray(be)&&be.length>0){const un=be.filter(Xn=>Xn!==q.validator);un.length!==be.length&&(O=!0,z.setValidators(un))}}if(null!==q.asyncValidator){const be=zt(z);if(Array.isArray(be)&&be.length>0){const un=be.filter(Xn=>Xn!==q.asyncValidator);un.length!==be.length&&(O=!0,z.setAsyncValidators(un))}}}const ee=()=>{};return Gt(q._rawValidators,ee),Gt(q._rawAsyncValidators,ee),O}function ir(z,q){z._pendingDirty&&z.markAsDirty(),z.setValue(z._pendingValue,{emitModelToViewChange:!1}),q.viewToModelUpdate(z._pendingValue),z._pendingChange=!1}function ve(z,q){if(!z.hasOwnProperty("model"))return!1;const O=z.model;return!!O.isFirstChange()||!Object.is(q,O.currentValue)}function Ye(z,q){if(!q)return null;let O,ee,be;return Array.isArray(q),q.forEach(un=>{un.constructor===Ae?O=un:function Ie(z){return Object.getPrototypeOf(z.constructor)===U}(un)?ee=un:be=un}),be||ee||O||null}function si(z,q){const O=z.indexOf(q);O>-1&&z.splice(O,1)}function _r(z){return"object"==typeof z&&null!==z&&2===Object.keys(z).length&&"value"in z&&"disabled"in z}Promise.resolve();const ui=class extends St{constructor(q=null,O,ee){super(Qr(O),Nr(ee,O)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(q),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Te(O)&&(O.nonNullable||O.initialValueIsDefault)&&(this.defaultValue=_r(q)?q.value:q)}setValue(q,O={}){this.value=this._pendingValue=q,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(ee=>ee(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(q,O={}){this.setValue(q,O)}reset(q=this.defaultValue,O={}){this._applyFormState(q),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(q){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(q){this._onChange.push(q)}_unregisterOnChange(q){si(this._onChange,q)}registerOnDisabledChange(q){this._onDisabledChange.push(q)}_unregisterOnDisabledChange(q){si(this._onDisabledChange,q)}_forEachChild(q){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(q){_r(q)?(this.value=this._pendingValue=q.value,q.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=q}},Ii={provide:rt,useExisting:(0,_.Rfq)(()=>ar)},Rn=Promise.resolve();let ar=(()=>{class z extends rt{constructor(O,ee,be,un,Xn,ys){super(),this._changeDetectorRef=Xn,this.callSetDisabledState=ys,this.control=new ui,this._registered=!1,this.name="",this.update=new _.bkB,this._parent=O,this._setValidators(ee),this._setAsyncValidators(be),this.valueAccessor=Ye(0,un)}ngOnChanges(O){if(this._checkForErrors(),!this._registered||"name"in O){if(this._registered&&(this._checkName(),this.formDirective)){const ee=O.name.previousValue;this.formDirective.removeControl({name:ee,path:this._getPath(ee)})}this._setUpControl()}"isDisabled"in O&&this._updateDisabled(O),ve(O,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){zn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(O){Rn.then(()=>{this.control.setValue(O,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(O){const ee=O.isDisabled.currentValue,be=0!==ee&&(0,_.L39)(ee);Rn.then(()=>{be&&!this.control.disabled?this.control.disable():!be&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(O){return this._parent?Bn(O,this._parent):[O]}static#e=this.\u0275fac=function(ee){return new(ee||z)(_.rXU(Ln,9),_.rXU(pt,10),_.rXU(Tt,10),_.rXU(Le,10),_.rXU(_.gRc,8),_.rXU(Lt,8))};static#t=this.\u0275dir=_.FsC({type:z,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[_.Mj6.None,"disabled","isDisabled"],model:[_.Mj6.None,"ngModel","model"],options:[_.Mj6.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_.Jv_([Ii]),_.Vt3,_.OA$]})}return z})(),Fo=(()=>{class z{static#e=this.\u0275fac=function(ee){return new(ee||z)};static#t=this.\u0275dir=_.FsC({type:z,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return z})();const Eo={provide:Le,useExisting:(0,_.Rfq)(()=>xs),multi:!0};let xs=(()=>{class z extends U{writeValue(O){this.setProperty("value",parseFloat(O))}registerOnChange(O){this.onChange=ee=>{O(""==ee?null:parseFloat(ee))}}static#e=this.\u0275fac=(()=>{let O;return function(be){return(O||(O=_.xGo(z)))(be||z)}})();static#t=this.\u0275dir=_.FsC({type:z,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(ee,be){1&ee&&_.bIt("change",function(Xn){return be.onChange(Xn.target.value)})("input",function(Xn){return be.onChange(Xn.target.value)})("blur",function(){return be.onTouched()})},features:[_.Jv_([Eo]),_.Vt3]})}return z})();const Er=new _.nKC(""),la={provide:Ln,useExisting:(0,_.Rfq)(()=>Rs)};let Rs=(()=>{class z extends Ln{constructor(O,ee,be){super(),this.callSetDisabledState=be,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.bkB,this._setValidators(O),this._setAsyncValidators(ee)}ngOnChanges(O){this._checkFormPresent(),O.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Yr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(O){const ee=this.form.get(O.path);return zn(ee,O,this.callSetDisabledState),ee.updateValueAndValidity({emitEvent:!1}),this.directives.push(O),ee}getControl(O){return this.form.get(O.path)}removeControl(O){bn(O.control||null,O,!1),function qt(z,q){const O=z.indexOf(q);O>-1&&z.splice(O,1)}(this.directives,O)}addFormGroup(O){this._setUpFormContainer(O)}removeFormGroup(O){this._cleanUpFormContainer(O)}getFormGroup(O){return this.form.get(O.path)}addFormArray(O){this._setUpFormContainer(O)}removeFormArray(O){this._cleanUpFormContainer(O)}getFormArray(O){return this.form.get(O.path)}updateModel(O,ee){this.form.get(O.path).setValue(ee)}onSubmit(O){return this.submitted=!0,function at(z,q){z._syncPendingControls(),q.forEach(O=>{const ee=O.control;"submit"===ee.updateOn&&ee._pendingChange&&(O.viewToModelUpdate(ee._pendingValue),ee._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(O),"dialog"===O?.target?.method}onReset(){this.resetForm()}resetForm(O=void 0){this.form.reset(O),this.submitted=!1}_updateDomValue(){this.directives.forEach(O=>{const ee=O.control,be=this.form.get(O.path);ee!==be&&(bn(ee||null,O),(z=>z instanceof ui)(be)&&(zn(be,O,this.callSetDisabledState),O.control=be))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(O){const ee=this.form.get(O.path);(function Gi(z,q){Gr(z,q)})(ee,O),ee.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(O){if(this.form){const ee=this.form.get(O.path);ee&&function ri(z,q){return Yr(z,q)}(ee,O)&&ee.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Gr(this.form,this),this._oldForm&&Yr(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(ee){return new(ee||z)(_.rXU(pt,10),_.rXU(Tt,10),_.rXU(Lt,8))};static#t=this.\u0275dir=_.FsC({type:z,selectors:[["","formGroup",""]],hostBindings:function(ee,be){1&ee&&_.bIt("submit",function(Xn){return be.onSubmit(Xn)})("reset",function(){return be.onReset()})},inputs:{form:[_.Mj6.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_.Jv_([la]),_.Vt3,_.OA$]})}return z})();const Xs={provide:rt,useExisting:(0,_.Rfq)(()=>Jr)};let Jr=(()=>{class z extends rt{set isDisabled(O){}static#e=this._ngModelWarningSentOnce=!1;constructor(O,ee,be,un,Xn){super(),this._ngModelWarningConfig=Xn,this._added=!1,this.name=null,this.update=new _.bkB,this._ngModelWarningSent=!1,this._parent=O,this._setValidators(ee),this._setAsyncValidators(be),this.valueAccessor=Ye(0,un)}ngOnChanges(O){this._added||this._setUpControl(),ve(O,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}get path(){return Bn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(ee){return new(ee||z)(_.rXU(Ln,13),_.rXU(pt,10),_.rXU(Tt,10),_.rXU(Le,10),_.rXU(Er,8))};static#n=this.\u0275dir=_.FsC({type:z,selectors:[["","formControlName",""]],inputs:{name:[_.Mj6.None,"formControlName","name"],isDisabled:[_.Mj6.None,"disabled","isDisabled"],model:[_.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[_.Jv_([Xs]),_.Vt3,_.OA$]})}return z})();const Lo={provide:Le,useExisting:(0,_.Rfq)(()=>ni),multi:!0};function hi(z,q){return null==z?`${q}`:(q&&"object"==typeof q&&(q="Object"),`${z}: ${q}`.slice(0,50))}let ni=(()=>{class z extends U{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(O){this._compareWith=O}writeValue(O){this.value=O;const be=hi(this._getOptionId(O),O);this.setProperty("value",be)}registerOnChange(O){this.onChange=ee=>{this.value=this._getOptionValue(ee),O(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(O){for(const ee of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ee),O))return ee;return null}_getOptionValue(O){const ee=function zr(z){return z.split(":")[0]}(O);return this._optionMap.has(ee)?this._optionMap.get(ee):O}static#e=this.\u0275fac=(()=>{let O;return function(be){return(O||(O=_.xGo(z)))(be||z)}})();static#t=this.\u0275dir=_.FsC({type:z,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(ee,be){1&ee&&_.bIt("change",function(Xn){return be.onChange(Xn.target.value)})("blur",function(){return be.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.Jv_([Lo]),_.Vt3]})}return z})(),ss=(()=>{class z{constructor(O,ee,be){this._element=O,this._renderer=ee,this._select=be,this._select&&(this.id=this._select._registerOption())}set ngValue(O){null!=this._select&&(this._select._optionMap.set(this.id,O),this._setElementValue(hi(this.id,O)),this._select.writeValue(this._select.value))}set value(O){this._setElementValue(O),this._select&&this._select.writeValue(this._select.value)}_setElementValue(O){this._renderer.setProperty(this._element.nativeElement,"value",O)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(ee){return new(ee||z)(_.rXU(_.aKT),_.rXU(_.sFG),_.rXU(ni,9))};static#t=this.\u0275dir=_.FsC({type:z,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return z})();const cn={provide:Le,useExisting:(0,_.Rfq)(()=>gs),multi:!0};function oi(z,q){return null==z?`${q}`:("string"==typeof q&&(q=`'${q}'`),q&&"object"==typeof q&&(q="Object"),`${z}: ${q}`.slice(0,50))}let gs=(()=>{class z extends U{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(O){this._compareWith=O}writeValue(O){let ee;if(this.value=O,Array.isArray(O)){const be=O.map(un=>this._getOptionId(un));ee=(un,Xn)=>{un._setSelected(be.indexOf(Xn.toString())>-1)}}else ee=(be,un)=>{be._setSelected(!1)};this._optionMap.forEach(ee)}registerOnChange(O){this.onChange=ee=>{const be=[],un=ee.selectedOptions;if(void 0!==un){const Xn=un;for(let ys=0;ys<Xn.length;ys++){const fi=this._getOptionValue(Xn[ys].value);be.push(fi)}}else{const Xn=ee.options;for(let ys=0;ys<Xn.length;ys++){const Zs=Xn[ys];if(Zs.selected){const fi=this._getOptionValue(Zs.value);be.push(fi)}}}this.value=be,O(be)}}_registerOption(O){const ee=(this._idCounter++).toString();return this._optionMap.set(ee,O),ee}_getOptionId(O){for(const ee of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ee)._value,O))return ee;return null}_getOptionValue(O){const ee=function ps(z){return z.split(":")[0]}(O);return this._optionMap.has(ee)?this._optionMap.get(ee)._value:O}static#e=this.\u0275fac=(()=>{let O;return function(be){return(O||(O=_.xGo(z)))(be||z)}})();static#t=this.\u0275dir=_.FsC({type:z,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(ee,be){1&ee&&_.bIt("change",function(Xn){return be.onChange(Xn.target)})("blur",function(){return be.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.Jv_([cn]),_.Vt3]})}return z})(),Ys=(()=>{class z{constructor(O,ee,be){this._element=O,this._renderer=ee,this._select=be,this._select&&(this.id=this._select._registerOption(this))}set ngValue(O){null!=this._select&&(this._value=O,this._setElementValue(oi(this.id,O)),this._select.writeValue(this._select.value))}set value(O){this._select?(this._value=O,this._setElementValue(oi(this.id,O)),this._select.writeValue(this._select.value)):this._setElementValue(O)}_setElementValue(O){this._renderer.setProperty(this._element.nativeElement,"value",O)}_setSelected(O){this._renderer.setProperty(this._element.nativeElement,"selected",O)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(ee){return new(ee||z)(_.rXU(_.aKT),_.rXU(_.sFG),_.rXU(gs,9))};static#t=this.\u0275dir=_.FsC({type:z,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return z})(),Ti=(()=>{class z{static#e=this.\u0275fac=function(ee){return new(ee||z)};static#t=this.\u0275mod=_.$C({type:z});static#n=this.\u0275inj=_.G2t({})}return z})();class gr extends St{constructor(q,O,ee){super(Qr(O),Nr(ee,O)),this.controls=q,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(q){return this.controls[this._adjustIndex(q)]}push(q,O={}){this.controls.push(q),this._registerControl(q),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}insert(q,O,ee={}){this.controls.splice(q,0,O),this._registerControl(O),this.updateValueAndValidity({emitEvent:ee.emitEvent})}removeAt(q,O={}){let ee=this._adjustIndex(q);ee<0&&(ee=0),this.controls[ee]&&this.controls[ee]._registerOnCollectionChange(()=>{}),this.controls.splice(ee,1),this.updateValueAndValidity({emitEvent:O.emitEvent})}setControl(q,O,ee={}){let be=this._adjustIndex(q);be<0&&(be=0),this.controls[be]&&this.controls[be]._registerOnCollectionChange(()=>{}),this.controls.splice(be,1),O&&(this.controls.splice(be,0,O),this._registerControl(O)),this.updateValueAndValidity({emitEvent:ee.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(q,O={}){Ke(this,0,q),q.forEach((ee,be)=>{we(this,!1,be),this.at(be).setValue(ee,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(q,O={}){null!=q&&(q.forEach((ee,be)=>{this.at(be)&&this.at(be).patchValue(ee,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(q=[],O={}){this._forEachChild((ee,be)=>{ee.reset(q[be],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this.controls.map(q=>q.getRawValue())}clear(q={}){this.controls.length<1||(this._forEachChild(O=>O._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:q.emitEvent}))}_adjustIndex(q){return q<0?q+this.length:q}_syncPendingControls(){let q=this.controls.reduce((O,ee)=>!!ee._syncPendingControls()||O,!1);return q&&this.updateValueAndValidity({onlySelf:!0}),q}_forEachChild(q){this.controls.forEach((O,ee)=>{q(O,ee)})}_updateValue(){this.value=this.controls.filter(q=>q.enabled||this.disabled).map(q=>q.value)}_anyControls(q){return this.controls.some(O=>O.enabled&&q(O))}_setUpControls(){this._forEachChild(q=>this._registerControl(q))}_allControlsDisabled(){for(const q of this.controls)if(q.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(q){q.setParent(this),q._registerOnCollectionChange(this._onCollectionChange)}_find(q){return this.at(q)??null}}function Zr(z){return!!z&&(void 0!==z.asyncValidators||void 0!==z.validators||void 0!==z.updateOn)}let co=(()=>{class z{constructor(){this.useNonNullable=!1}get nonNullable(){const O=new z;return O.useNonNullable=!0,O}group(O,ee=null){const be=this._reduceControls(O);let un={};return Zr(ee)?un=ee:null!==ee&&(un.validators=ee.validator,un.asyncValidators=ee.asyncValidator),new ge(be,un)}record(O,ee=null){const be=this._reduceControls(O);return new me(be,ee)}control(O,ee,be){let un={};return this.useNonNullable?(Zr(ee)?un=ee:(un.validators=ee,un.asyncValidators=be),new ui(O,{...un,nonNullable:!0})):new ui(O,ee,be)}array(O,ee,be){const un=O.map(Xn=>this._createControl(Xn));return new gr(un,ee,be)}_reduceControls(O){const ee={};return Object.keys(O).forEach(be=>{ee[be]=this._createControl(O[be])}),ee}_createControl(O){return O instanceof ui||O instanceof St?O:Array.isArray(O)?this.control(O[0],O.length>1?O[1]:null,O.length>2?O[2]:null):this.control(O)}static#e=this.\u0275fac=function(ee){return new(ee||z)};static#t=this.\u0275prov=_.jDH({token:z,factory:z.\u0275fac,providedIn:"root"})}return z})(),wo=(()=>{class z{static withConfig(O){return{ngModule:z,providers:[{provide:Lt,useValue:O.callSetDisabledState??mn}]}}static#e=this.\u0275fac=function(ee){return new(ee||z)};static#t=this.\u0275mod=_.$C({type:z});static#n=this.\u0275inj=_.G2t({imports:[Ti]})}return z})(),Fi=(()=>{class z{static withConfig(O){return{ngModule:z,providers:[{provide:Er,useValue:O.warnOnNgModelWithFormControl??"always"},{provide:Lt,useValue:O.callSetDisabledState??mn}]}}static#e=this.\u0275fac=function(ee){return new(ee||z)};static#t=this.\u0275mod=_.$C({type:z});static#n=this.\u0275inj=_.G2t({imports:[Ti]})}return z})()},345:(en,Qe,k)=>{k.d(Qe,{B7:()=>qe,Bb:()=>yn,hE:()=>bt,sG:()=>vn});var _=k(4438),L=k(177);class M extends L.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class C extends M{static makeCurrent(){(0,L.ZD)(new C)}onAndCancel(Te,we,Ke){return Te.addEventListener(we,Ke),()=>{Te.removeEventListener(we,Ke)}}dispatchEvent(Te,we){Te.dispatchEvent(we)}remove(Te){Te.parentNode&&Te.parentNode.removeChild(Te)}createElement(Te,we){return(we=we||this.getDefaultDocument()).createElement(Te)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Te){return Te.nodeType===Node.ELEMENT_NODE}isShadowRoot(Te){return Te instanceof DocumentFragment}getGlobalEventTarget(Te,we){return"window"===we?window:"document"===we?Te:"body"===we?Te.body:null}getBaseHref(Te){const we=function Me(){return se=se||document.querySelector("base"),se?se.getAttribute("href"):null}();return null==we?null:function U(xe){return new URL(xe,document.baseURI).pathname}(we)}resetBaseElement(){se=null}getUserAgent(){return window.navigator.userAgent}getCookie(Te){return(0,L._b)(document.cookie,Te)}}let se=null,$e=(()=>{class xe{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac})}return xe})();const Ee=new _.nKC("");let ye=(()=>{class xe{constructor(we,Ke){this._zone=Ke,this._eventNameToPlugin=new Map,we.forEach(St=>{St.manager=this}),this._plugins=we.slice().reverse()}addEventListener(we,Ke,St){return this._findPluginFor(Ke).addEventListener(we,Ke,St)}getZone(){return this._zone}_findPluginFor(we){let Ke=this._eventNameToPlugin.get(we);if(Ke)return Ke;if(Ke=this._plugins.find(ge=>ge.supports(we)),!Ke)throw new _.wOt(5101,!1);return this._eventNameToPlugin.set(we,Ke),Ke}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(Ee),_.KVO(_.SKi))};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac})}return xe})();class He{constructor(Te){this._doc=Te}}const Ct="ng-app-id";let Ae=(()=>{class xe{constructor(we,Ke,St,ge={}){this.doc=we,this.appId=Ke,this.nonce=St,this.platformId=ge,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,L.Vy)(ge),this.resetHostNodes()}addStyles(we){for(const Ke of we)1===this.changeUsageCount(Ke,1)&&this.onStyleAdded(Ke)}removeStyles(we){for(const Ke of we)this.changeUsageCount(Ke,-1)<=0&&this.onStyleRemoved(Ke)}ngOnDestroy(){const we=this.styleNodesInDOM;we&&(we.forEach(Ke=>Ke.remove()),we.clear());for(const Ke of this.getAllStyles())this.onStyleRemoved(Ke);this.resetHostNodes()}addHost(we){this.hostNodes.add(we);for(const Ke of this.getAllStyles())this.addStyleToHost(we,Ke)}removeHost(we){this.hostNodes.delete(we)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(we){for(const Ke of this.hostNodes)this.addStyleToHost(Ke,we)}onStyleRemoved(we){const Ke=this.styleRef;Ke.get(we)?.elements?.forEach(St=>St.remove()),Ke.delete(we)}collectServerRenderedStyles(){const we=this.doc.head?.querySelectorAll(`style[${Ct}="${this.appId}"]`);if(we?.length){const Ke=new Map;return we.forEach(St=>{null!=St.textContent&&Ke.set(St.textContent,St)}),Ke}return null}changeUsageCount(we,Ke){const St=this.styleRef;if(St.has(we)){const ge=St.get(we);return ge.usage+=Ke,ge.usage}return St.set(we,{usage:Ke,elements:[]}),Ke}getStyleElement(we,Ke){const St=this.styleNodesInDOM,ge=St?.get(Ke);if(ge?.parentNode===we)return St.delete(Ke),ge.removeAttribute(Ct),ge;{const Q=this.doc.createElement("style");return this.nonce&&Q.setAttribute("nonce",this.nonce),Q.textContent=Ke,this.platformIsServer&&Q.setAttribute(Ct,this.appId),we.appendChild(Q),Q}}addStyleToHost(we,Ke){const St=this.getStyleElement(we,Ke),ge=this.styleRef,Q=ge.get(Ke)?.elements;Q?Q.push(St):ge.set(Ke,{elements:[St],usage:1})}resetHostNodes(){const we=this.hostNodes;we.clear(),we.add(this.doc.head)}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(L.qQ),_.KVO(_.sZ2),_.KVO(_.BIS,8),_.KVO(_.Agw))};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac})}return xe})();const Fe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},wt=/%COMP%/g,ce=new _.nKC("",{providedIn:"root",factory:()=>!0});function Ce(xe,Te){return Te.map(we=>we.replace(wt,xe))}let qe=(()=>{class xe{constructor(we,Ke,St,ge,Q,Z,oe,me=null){this.eventManager=we,this.sharedStylesHost=Ke,this.appId=St,this.removeStylesOnCompDestroy=ge,this.doc=Q,this.platformId=Z,this.ngZone=oe,this.nonce=me,this.rendererByCompId=new Map,this.platformIsServer=(0,L.Vy)(Z),this.defaultRenderer=new ze(we,Q,oe,this.platformIsServer)}createRenderer(we,Ke){if(!we||!Ke)return this.defaultRenderer;this.platformIsServer&&Ke.encapsulation===_.gXe.ShadowDom&&(Ke={...Ke,encapsulation:_.gXe.Emulated});const St=this.getOrCreateRenderer(we,Ke);return St instanceof Fn?St.applyToHost(we):St instanceof Pn&&St.applyStyles(),St}getOrCreateRenderer(we,Ke){const St=this.rendererByCompId;let ge=St.get(Ke.id);if(!ge){const Q=this.doc,Z=this.ngZone,oe=this.eventManager,me=this.sharedStylesHost,Et=this.removeStylesOnCompDestroy,Lt=this.platformIsServer;switch(Ke.encapsulation){case _.gXe.Emulated:ge=new Fn(oe,me,Ke,this.appId,Et,Q,Z,Lt);break;case _.gXe.ShadowDom:return new pn(oe,me,we,Ke,Q,Z,this.nonce,Lt);default:ge=new Pn(oe,me,Ke,Et,Q,Z,Lt)}St.set(Ke.id,ge)}return ge}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(ye),_.KVO(Ae),_.KVO(_.sZ2),_.KVO(ce),_.KVO(L.qQ),_.KVO(_.Agw),_.KVO(_.SKi),_.KVO(_.BIS))};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac})}return xe})();class ze{constructor(Te,we,Ke,St){this.eventManager=Te,this.doc=we,this.ngZone=Ke,this.platformIsServer=St,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(Te,we){return we?this.doc.createElementNS(Fe[we]||we,Te):this.doc.createElement(Te)}createComment(Te){return this.doc.createComment(Te)}createText(Te){return this.doc.createTextNode(Te)}appendChild(Te,we){(Mt(Te)?Te.content:Te).appendChild(we)}insertBefore(Te,we,Ke){Te&&(Mt(Te)?Te.content:Te).insertBefore(we,Ke)}removeChild(Te,we){Te&&Te.removeChild(we)}selectRootElement(Te,we){let Ke="string"==typeof Te?this.doc.querySelector(Te):Te;if(!Ke)throw new _.wOt(-5104,!1);return we||(Ke.textContent=""),Ke}parentNode(Te){return Te.parentNode}nextSibling(Te){return Te.nextSibling}setAttribute(Te,we,Ke,St){if(St){we=St+":"+we;const ge=Fe[St];ge?Te.setAttributeNS(ge,we,Ke):Te.setAttribute(we,Ke)}else Te.setAttribute(we,Ke)}removeAttribute(Te,we,Ke){if(Ke){const St=Fe[Ke];St?Te.removeAttributeNS(St,we):Te.removeAttribute(`${Ke}:${we}`)}else Te.removeAttribute(we)}addClass(Te,we){Te.classList.add(we)}removeClass(Te,we){Te.classList.remove(we)}setStyle(Te,we,Ke,St){St&(_.czy.DashCase|_.czy.Important)?Te.style.setProperty(we,Ke,St&_.czy.Important?"important":""):Te.style[we]=Ke}removeStyle(Te,we,Ke){Ke&_.czy.DashCase?Te.style.removeProperty(we):Te.style[we]=""}setProperty(Te,we,Ke){null!=Te&&(Te[we]=Ke)}setValue(Te,we){Te.nodeValue=we}listen(Te,we,Ke){if("string"==typeof Te&&!(Te=(0,L.QT)().getGlobalEventTarget(this.doc,Te)))throw new Error(`Unsupported event target ${Te} for event ${we}`);return this.eventManager.addEventListener(Te,we,this.decoratePreventDefault(Ke))}decoratePreventDefault(Te){return we=>{if("__ngUnwrap__"===we)return Te;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Te(we)):Te(we))&&we.preventDefault()}}}function Mt(xe){return"TEMPLATE"===xe.tagName&&void 0!==xe.content}class pn extends ze{constructor(Te,we,Ke,St,ge,Q,Z,oe){super(Te,ge,Q,oe),this.sharedStylesHost=we,this.hostEl=Ke,this.shadowRoot=Ke.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const me=Ce(St.id,St.styles);for(const Et of me){const Lt=document.createElement("style");Z&&Lt.setAttribute("nonce",Z),Lt.textContent=Et,this.shadowRoot.appendChild(Lt)}}nodeOrShadowRoot(Te){return Te===this.hostEl?this.shadowRoot:Te}appendChild(Te,we){return super.appendChild(this.nodeOrShadowRoot(Te),we)}insertBefore(Te,we,Ke){return super.insertBefore(this.nodeOrShadowRoot(Te),we,Ke)}removeChild(Te,we){return super.removeChild(this.nodeOrShadowRoot(Te),we)}parentNode(Te){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Te)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Pn extends ze{constructor(Te,we,Ke,St,ge,Q,Z,oe){super(Te,ge,Q,Z),this.sharedStylesHost=we,this.removeStylesOnCompDestroy=St,this.styles=oe?Ce(oe,Ke.styles):Ke.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Fn extends Pn{constructor(Te,we,Ke,St,ge,Q,Z,oe){const me=St+"-"+Ke.id;super(Te,we,Ke,ge,Q,Z,oe,me),this.contentAttr=function ie(xe){return"_ngcontent-%COMP%".replace(wt,xe)}(me),this.hostAttr=function ue(xe){return"_nghost-%COMP%".replace(wt,xe)}(me)}applyToHost(Te){this.applyStyles(),this.setAttribute(Te,this.hostAttr,"")}createElement(Te,we){const Ke=super.createElement(Te,we);return super.setAttribute(Ke,this.contentAttr,""),Ke}}let On=(()=>{class xe extends He{constructor(we){super(we)}supports(we){return!0}addEventListener(we,Ke,St){return we.addEventListener(Ke,St,!1),()=>this.removeEventListener(we,Ke,St)}removeEventListener(we,Ke,St){return we.removeEventListener(Ke,St)}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(L.qQ))};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac})}return xe})();const Ft=["alt","control","meta","shift"],Tn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ke={alt:xe=>xe.altKey,control:xe=>xe.ctrlKey,meta:xe=>xe.metaKey,shift:xe=>xe.shiftKey};let Xe=(()=>{class xe extends He{constructor(we){super(we)}supports(we){return null!=xe.parseEventName(we)}addEventListener(we,Ke,St){const ge=xe.parseEventName(Ke),Q=xe.eventCallback(ge.fullKey,St,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,L.QT)().onAndCancel(we,ge.domEventName,Q))}static parseEventName(we){const Ke=we.toLowerCase().split("."),St=Ke.shift();if(0===Ke.length||"keydown"!==St&&"keyup"!==St)return null;const ge=xe._normalizeKey(Ke.pop());let Q="",Z=Ke.indexOf("code");if(Z>-1&&(Ke.splice(Z,1),Q="code."),Ft.forEach(me=>{const Et=Ke.indexOf(me);Et>-1&&(Ke.splice(Et,1),Q+=me+".")}),Q+=ge,0!=Ke.length||0===ge.length)return null;const oe={};return oe.domEventName=St,oe.fullKey=Q,oe}static matchEventFullKeyCode(we,Ke){let St=Tn[we.key]||we.key,ge="";return Ke.indexOf("code.")>-1&&(St=we.code,ge="code."),!(null==St||!St)&&(St=St.toLowerCase()," "===St?St="space":"."===St&&(St="dot"),Ft.forEach(Q=>{Q!==St&&(0,ke[Q])(we)&&(ge+=Q+".")}),ge+=St,ge===Ke)}static eventCallback(we,Ke,St){return ge=>{xe.matchEventFullKeyCode(ge,we)&&St.runGuarded(()=>Ke(ge))}}static _normalizeKey(we){return"esc"===we?"escape":we}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(L.qQ))};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac})}return xe})();const vn=(0,_.oH4)(_.fpN,"browser",[{provide:_.Agw,useValue:L.AJ},{provide:_.PLl,useValue:function zt(){C.makeCurrent()},multi:!0},{provide:L.qQ,useFactory:function Zt(){return(0,_.TL$)(document),document},deps:[]}]),Cn=new _.nKC(""),Ln=[{provide:_.e01,useClass:class Le{addToWindow(Te){_.JZv.getAngularTestability=(Ke,St=!0)=>{const ge=Te.findTestabilityInTree(Ke,St);if(null==ge)throw new _.wOt(5103,!1);return ge},_.JZv.getAllAngularTestabilities=()=>Te.getAllTestabilities(),_.JZv.getAllAngularRootElements=()=>Te.getAllRootElements(),_.JZv.frameworkStabilizers||(_.JZv.frameworkStabilizers=[]),_.JZv.frameworkStabilizers.push(Ke=>{const St=_.JZv.getAllAngularTestabilities();let ge=St.length;const Q=function(){ge--,0==ge&&Ke()};St.forEach(Z=>{Z.whenStable(Q)})})}findTestabilityInTree(Te,we,Ke){return null==we?null:Te.getTestability(we)??(Ke?(0,L.QT)().isShadowRoot(we)?this.findTestabilityInTree(Te,we.host,!0):this.findTestabilityInTree(Te,we.parentElement,!0):null)}},deps:[]},{provide:_.WHO,useClass:_.NYb,deps:[_.SKi,_.giA,_.e01]},{provide:_.NYb,useClass:_.NYb,deps:[_.SKi,_.giA,_.e01]}],rt=[{provide:_.H8p,useValue:"root"},{provide:_.zcH,useFactory:function ln(){return new _.zcH},deps:[]},{provide:Ee,useClass:On,multi:!0,deps:[L.qQ,_.SKi,_.Agw]},{provide:Ee,useClass:Xe,multi:!0,deps:[L.qQ]},qe,Ae,ye,{provide:_._9s,useExisting:qe},{provide:L.N0,useClass:$e,deps:[]},[]];let yn=(()=>{class xe{constructor(we){}static withServerTransition(we){return{ngModule:xe,providers:[{provide:_.sZ2,useValue:we.appId}]}}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(Cn,12))};static#t=this.\u0275mod=_.$C({type:xe});static#n=this.\u0275inj=_.G2t({providers:[...rt,...Ln],imports:[L.MD,_.Hbi]})}return xe})(),bt=(()=>{class xe{constructor(we){this._doc=we}getTitle(){return this._doc.title}setTitle(we){this._doc.title=we||""}static#e=this.\u0275fac=function(Ke){return new(Ke||xe)(_.KVO(L.qQ))};static#t=this.\u0275prov=_.jDH({token:xe,factory:xe.\u0275fac,providedIn:"root"})}return xe})()},4454:(en,Qe,k)=>{k.d(Qe,{nX:()=>oi,Ix:()=>Kr,Wk:()=>$o,iI:()=>ja,n3:()=>ts});var _=k(467),L=k(4438),M=k(1985),C=k(8071),Me=k(8455),U=k(7673),Le=k(4412),$e=k(3073),Ee=k(3669),ye=k(6450),He=k(9326),Ct=k(8496),Ae=k(4360),Fe=k(5225);function wt(...v){const P=(0,He.lI)(v),w=(0,He.ms)(v),{args:R,keys:$}=(0,$e.D)(v);if(0===R.length)return(0,Me.H)([],P);const te=new M.c(function pt(v,P,w=Ee.D){return R=>{Tt(P,()=>{const{length:$}=v,te=new Array($);let De=$,It=$;for(let lt=0;lt<$;lt++)Tt(P,()=>{const hn=(0,Me.H)(v[lt],P);let Jn=!1;hn.subscribe((0,Ae._)(R,lr=>{te[lt]=lr,Jn||(Jn=!0,It--),It||R.next(w(te.slice()))},()=>{--De||R.complete()}))},R)},R)}}(R,P,$?De=>(0,Ct.e)($,De):Ee.D));return w?te.pipe((0,ye.I)(w)):te}function Tt(v,P,w){v?(0,Fe.N)(w,v,P):P()}var At=k(9350),mt=k(8793),ce=k(8750);function ie(v){return new M.c(P=>{(0,ce.Tg)(v()).subscribe(P)})}var ue=k(1203);function Ce(v,P){const w=(0,C.T)(v)?v:()=>v,R=$=>$.error(w());return new M.c(P?$=>P.schedule(R,0,$):R)}var qe=k(983),ze=k(8359),de=k(9974);function Ue(){return(0,de.N)((v,P)=>{let w=null;v._refCount++;const R=(0,Ae._)(P,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(w=null);const $=v._connection,te=w;w=null,$&&(!te||$===te)&&$.unsubscribe(),P.unsubscribe()});v.subscribe(R),R.closed||(w=v.connect())})}class Mt extends M.c{constructor(P,w){super(),this.source=P,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,de.S)(P)&&(this.lift=P.lift)}_subscribe(P){return this.getSubject().subscribe(P)}getSubject(){const P=this._subject;return(!P||P.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:P}=this;this._subject=this._connection=null,P?.unsubscribe()}connect(){let P=this._connection;if(!P){P=this._connection=new ze.yU;const w=this.getSubject();P.add(this.source.subscribe((0,Ae._)(w,void 0,()=>{this._teardown(),w.complete()},R=>{this._teardown(),w.error(R)},()=>this._teardown()))),P.closed&&(this._connection=null,P=ze.yU.EMPTY)}return P}refCount(){return Ue()(this)}}var pn=k(1413),Pn=k(177),Fn=k(6354),On=k(5558),Ft=k(6697),Tn=k(9172),ke=k(5964),Xe=k(1397),ct=k(1594),gt=k(274),yt=k(8141),Ze=k(9437),zt=k(2816),ln=k(9901);function Zt(v){return v<=0?()=>qe.w:(0,de.N)((P,w)=>{let R=[];P.subscribe((0,Ae._)(w,$=>{R.push($),v<R.length&&R.shift()},()=>{for(const $ of R)w.next($);w.complete()},void 0,()=>{R=null}))})}var tn=k(3774),Ln=k(980),rt=k(5343),Gn=k(6365),rr=k(345);const bt="primary",ft=Symbol("RouteTitle");class ti{constructor(P){this.params=P||{}}has(P){return Object.prototype.hasOwnProperty.call(this.params,P)}get(P){if(this.has(P)){const w=this.params[P];return Array.isArray(w)?w[0]:w}return null}getAll(P){if(this.has(P)){const w=this.params[P];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function Nt(v){return new ti(v)}function tt(v,P,w){const R=w.path.split("/");if(R.length>v.length||"full"===w.pathMatch&&(P.hasChildren()||R.length<v.length))return null;const $={};for(let te=0;te<R.length;te++){const De=R[te],It=v[te];if(De.startsWith(":"))$[De.substring(1)]=It;else if(De!==It.path)return null}return{consumed:v.slice(0,R.length),posParams:$}}function Qn(v,P){const w=v?Zn(v):void 0,R=P?Zn(P):void 0;if(!w||!R||w.length!=R.length)return!1;let $;for(let te=0;te<w.length;te++)if($=w[te],!wn(v[$],P[$]))return!1;return!0}function Zn(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}function wn(v,P){if(Array.isArray(v)&&Array.isArray(P)){if(v.length!==P.length)return!1;const w=[...v].sort(),R=[...P].sort();return w.every(($,te)=>R[te]===$)}return v===P}function An(v){return v.length>0?v[v.length-1]:null}function kr(v){return function se(v){return!!v&&(v instanceof M.c||(0,C.T)(v.lift)&&(0,C.T)(v.subscribe))}(v)?v:(0,L.jNT)(v)?(0,Me.H)(Promise.resolve(v)):(0,U.of)(v)}const qr={exact:function hs(v,P,w){if(!Mn(v.segments,P.segments)||!Un(v.segments,P.segments,w)||v.numberOfChildren!==P.numberOfChildren)return!1;for(const R in P.children)if(!v.children[R]||!hs(v.children[R],P.children[R],w))return!1;return!0},subset:Ui},Hr={exact:function Rr(v,P){return Qn(v,P)},subset:function Nn(v,P){return Object.keys(P).length<=Object.keys(v).length&&Object.keys(P).every(w=>wn(v[w],P[w]))},ignored:()=>!0};function Li(v,P,w){return qr[w.paths](v.root,P.root,w.matrixParams)&&Hr[w.queryParams](v.queryParams,P.queryParams)&&!("exact"===w.fragment&&v.fragment!==P.fragment)}function Ui(v,P,w){return Ht(v,P,P.segments,w)}function Ht(v,P,w,R){if(v.segments.length>w.length){const $=v.segments.slice(0,w.length);return!(!Mn($,w)||P.hasChildren()||!Un($,w,R))}if(v.segments.length===w.length){if(!Mn(v.segments,w)||!Un(v.segments,w,R))return!1;for(const $ in P.children)if(!v.children[$]||!Ui(v.children[$],P.children[$],R))return!1;return!0}{const $=w.slice(0,v.segments.length),te=w.slice(v.segments.length);return!!(Mn(v.segments,$)&&Un(v.segments,$,R)&&v.children[bt])&&Ht(v.children[bt],P,te,R)}}function Un(v,P,w){return P.every((R,$)=>Hr[w](v[$].parameters,R.parameters))}class Or{constructor(P=new Xt([],{}),w={},R=null){this.root=P,this.queryParams=w,this.fragment=R}get queryParamMap(){return this._queryParamMap??=Nt(this.queryParams),this._queryParamMap}toString(){return we.serialize(this)}}class Xt{constructor(P,w){this.segments=P,this.children=w,this.parent=null,Object.values(w).forEach(R=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ke(this)}}class Yt{constructor(P,w){this.path=P,this.parameters=w}get parameterMap(){return this._parameterMap??=Nt(this.parameters),this._parameterMap}toString(){return Lt(this)}}function Mn(v,P){return v.length===P.length&&v.every((w,R)=>w.path===P[R].path)}let xe=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=L.jDH({token:v,factory:()=>new Te,providedIn:"root"})}return v})();class Te{parse(P){const w=new ir(P);return new Or(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(P){const w=`/${St(P.root,!0)}`,R=function Bn(v){const P=Object.entries(v).map(([w,R])=>Array.isArray(R)?R.map($=>`${Q(w)}=${Q($)}`).join("&"):`${Q(w)}=${Q(R)}`).filter(w=>w);return P.length?`?${P.join("&")}`:""}(P.queryParams);return`${w}${R}${"string"==typeof P.fragment?`#${function Z(v){return encodeURI(v)}(P.fragment)}`:""}`}}const we=new Te;function Ke(v){return v.segments.map(P=>Lt(P)).join("/")}function St(v,P){if(!v.hasChildren())return Ke(v);if(P){const w=v.children[bt]?St(v.children[bt],!1):"",R=[];return Object.entries(v.children).forEach(([$,te])=>{$!==bt&&R.push(`${$}:${St(te,!1)}`)}),R.length>0?`${w}(${R.join("//")})`:w}{const w=function Nr(v,P){let w=[];return Object.entries(v.children).forEach(([R,$])=>{R===bt&&(w=w.concat(P($,R)))}),Object.entries(v.children).forEach(([R,$])=>{R!==bt&&(w=w.concat(P($,R)))}),w}(v,(R,$)=>$===bt?[St(v.children[bt],!1)]:[`${$}:${St(R,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[bt]?`${Ke(v)}/${w[0]}`:`${Ke(v)}/(${w.join("//")})`}}function ge(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Q(v){return ge(v).replace(/%3B/gi,";")}function oe(v){return ge(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function me(v){return decodeURIComponent(v)}function Et(v){return me(v.replace(/\+/g,"%20"))}function Lt(v){return`${oe(v.path)}${function mn(v){return Object.entries(v).map(([P,w])=>`;${oe(P)}=${oe(w)}`).join("")}(v.parameters)}`}const zn=/^[^\/()?;#]+/;function bn(v){const P=v.match(zn);return P?P[0]:""}const Gt=/^[^\/()?;=#]+/,Gr=/^[^=?&#]+/,Ms=/^[^&#]+/;class ir{constructor(P){this.url=P,this.remaining=P}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const P={};if(this.consumeOptional("?"))do{this.parseQueryParam(P)}while(this.consumeOptional("&"));return P}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const P=[];for(this.peekStartsWith("(")||P.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),P.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(P.length>0||Object.keys(w).length>0)&&(R[bt]=new Xt(P,w)),R}parseSegment(){const P=bn(this.remaining);if(""===P&&this.peekStartsWith(";"))throw new L.wOt(4009,!1);return this.capture(P),new Yt(me(P),this.parseMatrixParams())}parseMatrixParams(){const P={};for(;this.consumeOptional(";");)this.parseParam(P);return P}parseParam(P){const w=function Oe(v){const P=v.match(Gt);return P?P[0]:""}(this.remaining);if(!w)return;this.capture(w);let R="";if(this.consumeOptional("=")){const $=bn(this.remaining);$&&(R=$,this.capture(R))}P[me(w)]=me(R)}parseQueryParam(P){const w=function Yr(v){const P=v.match(Gr);return P?P[0]:""}(this.remaining);if(!w)return;this.capture(w);let R="";if(this.consumeOptional("=")){const De=function cs(v){const P=v.match(Ms);return P?P[0]:""}(this.remaining);De&&(R=De,this.capture(R))}const $=Et(w),te=Et(R);if(P.hasOwnProperty($)){let De=P[$];Array.isArray(De)||(De=[De],P[$]=De),De.push(te)}else P[$]=te}parseParens(P){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=bn(this.remaining),$=this.remaining[R.length];if("/"!==$&&")"!==$&&";"!==$)throw new L.wOt(4010,!1);let te;R.indexOf(":")>-1?(te=R.slice(0,R.indexOf(":")),this.capture(te),this.capture(":")):P&&(te=bt);const De=this.parseChildren();w[te]=1===Object.keys(De).length?De[bt]:new Xt([],De),this.consumeOptional("//")}return w}peekStartsWith(P){return this.remaining.startsWith(P)}consumeOptional(P){return!!this.peekStartsWith(P)&&(this.remaining=this.remaining.substring(P.length),!0)}capture(P){if(!this.consumeOptional(P))throw new L.wOt(4011,!1)}}function is(v){return v.segments.length>0?new Xt([],{[bt]:v}):v}function Gi(v){const P={};for(const[R,$]of Object.entries(v.children)){const te=Gi($);if(R===bt&&0===te.segments.length&&te.hasChildren())for(const[De,It]of Object.entries(te.children))P[De]=It;else(te.segments.length>0||te.hasChildren())&&(P[R]=te)}return function ri(v){if(1===v.numberOfChildren&&v.children[bt]){const P=v.children[bt];return new Xt(v.segments.concat(P.segments),P.children)}return v}(new Xt(v.segments,P))}function _t(v){return v instanceof Or}function kt(v){let P;const $=is(function w(te){const De={};for(const lt of te.children){const hn=w(lt);De[lt.outlet]=hn}const It=new Xt(te.url,De);return te===v&&(P=It),It}(v.root));return P??$}function sn(v,P,w,R){let $=v;for(;$.parent;)$=$.parent;if(0===P.length)return Ie($,$,$,w,R);const te=function qt(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new Ye(!0,0,v);let P=0,w=!1;const R=v.reduce(($,te,De)=>{if("object"==typeof te&&null!=te){if(te.outlets){const It={};return Object.entries(te.outlets).forEach(([lt,hn])=>{It[lt]="string"==typeof hn?hn.split("/"):hn}),[...$,{outlets:It}]}if(te.segmentPath)return[...$,te.segmentPath]}return"string"!=typeof te?[...$,te]:0===De?(te.split("/").forEach((It,lt)=>{0==lt&&"."===It||(0==lt&&""===It?w=!0:".."===It?P++:""!=It&&$.push(It))}),$):[...$,te]},[]);return new Ye(w,P,R)}(P);if(te.toRoot())return Ie($,$,new Xt([],{}),w,R);const De=function Sn(v,P,w){if(v.isAbsolute)return new Bt(P,!0,0);if(!w)return new Bt(P,!1,NaN);if(null===w.parent)return new Bt(w,!0,0);const R=ne(v.commands[0])?0:1;return function En(v,P,w){let R=v,$=P,te=w;for(;te>$;){if(te-=$,R=R.parent,!R)throw new L.wOt(4005,!1);$=R.segments.length}return new Bt(R,!1,$-te)}(w,w.segments.length-1+R,v.numberOfDoubleDots)}(te,$,v),It=De.processChildren?_r(De.segmentGroup,De.index,te.commands):si(De.segmentGroup,De.index,te.commands);return Ie($,De.segmentGroup,It,w,R)}function ne(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function ve(v){return"object"==typeof v&&null!=v&&v.outlets}function Ie(v,P,w,R,$){let De,te={};R&&Object.entries(R).forEach(([lt,hn])=>{te[lt]=Array.isArray(hn)?hn.map(Jn=>`${Jn}`):`${hn}`}),De=v===P?w:at(v,P,w);const It=is(Gi(De));return new Or(It,te,$)}function at(v,P,w){const R={};return Object.entries(v.children).forEach(([$,te])=>{R[$]=te===P?w:at(te,P,w)}),new Xt(v.segments,R)}class Ye{constructor(P,w,R){if(this.isAbsolute=P,this.numberOfDoubleDots=w,this.commands=R,P&&R.length>0&&ne(R[0]))throw new L.wOt(4003,!1);const $=R.find(ve);if($&&$!==An(R))throw new L.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Bt{constructor(P,w,R){this.segmentGroup=P,this.processChildren=w,this.index=R}}function si(v,P,w){if(v??=new Xt([],{}),0===v.segments.length&&v.hasChildren())return _r(v,P,w);const R=function ui(v,P,w){let R=0,$=P;const te={match:!1,pathIndex:0,commandIndex:0};for(;$<v.segments.length;){if(R>=w.length)return te;const De=v.segments[$],It=w[R];if(ve(It))break;const lt=`${It}`,hn=R<w.length-1?w[R+1]:null;if($>0&&void 0===lt)break;if(lt&&hn&&"object"==typeof hn&&void 0===hn.outlets){if(!Ir(lt,hn,De))return te;R+=2}else{if(!Ir(lt,{},De))return te;R++}$++}return{match:!0,pathIndex:$,commandIndex:R}}(v,P,w),$=w.slice(R.commandIndex);if(R.match&&R.pathIndex<v.segments.length){const te=new Xt(v.segments.slice(0,R.pathIndex),{});return te.children[bt]=new Xt(v.segments.slice(R.pathIndex),v.children),_r(te,0,$)}return R.match&&0===$.length?new Xt(v.segments,{}):R.match&&!v.hasChildren()?Xr(v,P,w):R.match?_r(v,0,$):Xr(v,P,w)}function _r(v,P,w){if(0===w.length)return new Xt(v.segments,{});{const R=function br(v){return ve(v[0])?v[0].outlets:{[bt]:v}}(w),$={};if(Object.keys(R).some(te=>te!==bt)&&v.children[bt]&&1===v.numberOfChildren&&0===v.children[bt].segments.length){const te=_r(v.children[bt],P,w);return new Xt(v.segments,te.children)}return Object.entries(R).forEach(([te,De])=>{"string"==typeof De&&(De=[De]),null!==De&&($[te]=si(v.children[te],P,De))}),Object.entries(v.children).forEach(([te,De])=>{void 0===R[te]&&($[te]=De)}),new Xt(v.segments,$)}}function Xr(v,P,w){const R=v.segments.slice(0,P);let $=0;for(;$<w.length;){const te=w[$];if(ve(te)){const lt=Mi(te.outlets);return new Xt(R,lt)}if(0===$&&ne(w[0])){R.push(new Yt(v.segments[P].path,yr(w[0]))),$++;continue}const De=ve(te)?te.outlets[bt]:`${te}`,It=$<w.length-1?w[$+1]:null;De&&It&&ne(It)?(R.push(new Yt(De,yr(It))),$+=2):(R.push(new Yt(De,{})),$++)}return new Xt(R,{})}function Mi(v){const P={};return Object.entries(v).forEach(([w,R])=>{"string"==typeof R&&(R=[R]),null!==R&&(P[w]=Xr(new Xt([],{}),0,R))}),P}function yr(v){const P={};return Object.entries(v).forEach(([w,R])=>P[w]=`${R}`),P}function Ir(v,P,w){return v==w.path&&Qn(P,w.parameters)}const li="imperative";var tr=function(v){return v[v.NavigationStart=0]="NavigationStart",v[v.NavigationEnd=1]="NavigationEnd",v[v.NavigationCancel=2]="NavigationCancel",v[v.NavigationError=3]="NavigationError",v[v.RoutesRecognized=4]="RoutesRecognized",v[v.ResolveStart=5]="ResolveStart",v[v.ResolveEnd=6]="ResolveEnd",v[v.GuardsCheckStart=7]="GuardsCheckStart",v[v.GuardsCheckEnd=8]="GuardsCheckEnd",v[v.RouteConfigLoadStart=9]="RouteConfigLoadStart",v[v.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",v[v.ChildActivationStart=11]="ChildActivationStart",v[v.ChildActivationEnd=12]="ChildActivationEnd",v[v.ActivationStart=13]="ActivationStart",v[v.ActivationEnd=14]="ActivationEnd",v[v.Scroll=15]="Scroll",v[v.NavigationSkipped=16]="NavigationSkipped",v}(tr||{});class Fr{constructor(P,w){this.id=P,this.url=w}}class di extends Fr{constructor(P,w,R="imperative",$=null){super(P,w),this.type=tr.NavigationStart,this.navigationTrigger=R,this.restoredState=$}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ei extends Fr{constructor(P,w,R){super(P,w),this.urlAfterRedirects=R,this.type=tr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Ii=function(v){return v[v.Redirect=0]="Redirect",v[v.SupersededByNewNavigation=1]="SupersededByNewNavigation",v[v.NoDataFromResolver=2]="NoDataFromResolver",v[v.GuardRejected=3]="GuardRejected",v}(Ii||{}),Rn=function(v){return v[v.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",v[v.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",v}(Rn||{});class ar extends Fr{constructor(P,w,R,$){super(P,w),this.reason=R,this.code=$,this.type=tr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Fo extends Fr{constructor(P,w,R,$){super(P,w),this.reason=R,this.code=$,this.type=tr.NavigationSkipped}}class zi extends Fr{constructor(P,w,R,$){super(P,w),this.error=R,this.target=$,this.type=tr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oo extends Fr{constructor(P,w,R,$){super(P,w),this.urlAfterRedirects=R,this.state=$,this.type=tr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qo extends Fr{constructor(P,w,R,$){super(P,w),this.urlAfterRedirects=R,this.state=$,this.type=tr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ua extends Fr{constructor(P,w,R,$,te){super(P,w),this.urlAfterRedirects=R,this.state=$,this.shouldActivate=te,this.type=tr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vo extends Fr{constructor(P,w,R,$){super(P,w),this.urlAfterRedirects=R,this.state=$,this.type=tr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nr extends Fr{constructor(P,w,R,$){super(P,w),this.urlAfterRedirects=R,this.state=$,this.type=tr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eo{constructor(P){this.route=P,this.type=tr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xs{constructor(P){this.route=P,this.type=tr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Er{constructor(P){this.snapshot=P,this.type=tr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vo{constructor(P){this.snapshot=P,this.type=tr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qs{constructor(P){this.snapshot=P,this.type=tr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class la{constructor(P){this.snapshot=P,this.type=tr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rs{constructor(P,w,R){this.routerEvent=P,this.position=w,this.anchor=R,this.type=tr.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Sr{}class Bi{constructor(P){this.url=P}}class vr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new fs,this.attachRef=null}}let fs=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(w,R){const $=this.getOrCreateContext(w);$.outlet=R,this.contexts.set(w,$)}onChildOutletDestroyed(w){const R=this.getContext(w);R&&(R.outlet=null,R.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let R=this.getContext(w);return R||(R=new vr,this.contexts.set(w,R)),R}getContext(w){return this.contexts.get(w)||null}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=L.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();class Xs{constructor(P){this._root=P}get root(){return this._root.value}parent(P){const w=this.pathFromRoot(P);return w.length>1?w[w.length-2]:null}children(P){const w=Jr(P,this._root);return w?w.children.map(R=>R.value):[]}firstChild(P){const w=Jr(P,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(P){const w=Lo(P,this._root);return w.length<2?[]:w[w.length-2].children.map($=>$.value).filter($=>$!==P)}pathFromRoot(P){return Lo(P,this._root).map(w=>w.value)}}function Jr(v,P){if(v===P.value)return P;for(const w of P.children){const R=Jr(v,w);if(R)return R}return null}function Lo(v,P){if(v===P.value)return[P];for(const w of P.children){const R=Lo(v,w);if(R.length)return R.unshift(P),R}return[]}class hi{constructor(P,w){this.value=P,this.children=w}toString(){return`TreeNode(${this.value})`}}function zr(v){const P={};return v&&v.children.forEach(w=>P[w.value.outlet]=w),P}class ni extends Xs{constructor(P,w){super(P),this.snapshot=w,Ys(this,P)}toString(){return this.snapshot.toString()}}function ss(v){const P=function cn(v){const te=new ks([],{},{},"",{},bt,v,null,{});return new gs("",new hi(te,[]))}(v),w=new Le.t([new Yt("",{})]),R=new Le.t({}),$=new Le.t({}),te=new Le.t({}),De=new Le.t(""),It=new oi(w,R,te,De,$,bt,v,P.root);return It.snapshot=P.root,new ni(new hi(It,[]),P)}class oi{constructor(P,w,R,$,te,De,It,lt){this.urlSubject=P,this.paramsSubject=w,this.queryParamsSubject=R,this.fragmentSubject=$,this.dataSubject=te,this.outlet=De,this.component=It,this._futureSnapshot=lt,this.title=this.dataSubject?.pipe((0,Fn.T)(hn=>hn[ft]))??(0,U.of)(void 0),this.url=P,this.params=w,this.queryParams=R,this.fragment=$,this.data=te}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Fn.T)(P=>Nt(P))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Fn.T)(P=>Nt(P))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ps(v,P,w="emptyOnly"){let R;const{routeConfig:$}=v;return R=null===P||"always"!==w&&""!==$?.path&&(P.component||P.routeConfig?.loadComponent)?{params:{...v.params},data:{...v.data},resolve:{...v.data,...v._resolvedData??{}}}:{params:{...P.params,...v.params},data:{...P.data,...v.data},resolve:{...v.data,...P.data,...$?.data,...v._resolvedData}},$&&ji($)&&(R.resolve[ft]=$.title),R}class ks{get title(){return this.data?.[ft]}constructor(P,w,R,$,te,De,It,lt,hn){this.url=P,this.params=w,this.queryParams=R,this.fragment=$,this.data=te,this.outlet=De,this.component=It,this.routeConfig=lt,this._resolve=hn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Nt(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Nt(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gs extends Xs{constructor(P,w){super(w),this.url=P,Ys(this,w)}toString(){return Ri(this._root)}}function Ys(v,P){P.value._routerState=v,P.children.forEach(w=>Ys(v,w))}function Ri(v){const P=v.children.length>0?` { ${v.children.map(Ri).join(", ")} } `:"";return`${v.value}${P}`}function es(v){if(v.snapshot){const P=v.snapshot,w=v._futureSnapshot;v.snapshot=w,Qn(P.queryParams,w.queryParams)||v.queryParamsSubject.next(w.queryParams),P.fragment!==w.fragment&&v.fragmentSubject.next(w.fragment),Qn(P.params,w.params)||v.paramsSubject.next(w.params),function Rt(v,P){if(v.length!==P.length)return!1;for(let w=0;w<v.length;++w)if(!Qn(v[w],P[w]))return!1;return!0}(P.url,w.url)||v.urlSubject.next(w.url),Qn(P.data,w.data)||v.dataSubject.next(w.data)}else v.snapshot=v._futureSnapshot,v.dataSubject.next(v._futureSnapshot.data)}function Wi(v,P){const w=Qn(v.params,P.params)&&function Qr(v,P){return Mn(v,P)&&v.every((w,R)=>Qn(w.parameters,P[R].parameters))}(v.url,P.url);return w&&!(!v.parent!=!P.parent)&&(!v.parent||Wi(v.parent,P.parent))}function ji(v){return"string"==typeof v.title||null===v.title}let ts=(()=>{class v{constructor(){this.activated=null,this._activatedRoute=null,this.name=bt,this.activateEvents=new L.bkB,this.deactivateEvents=new L.bkB,this.attachEvents=new L.bkB,this.detachEvents=new L.bkB,this.parentContexts=(0,L.WQX)(fs),this.location=(0,L.WQX)(L.c1b),this.changeDetector=(0,L.WQX)(L.gRc),this.environmentInjector=(0,L.WQX)(L.uvJ),this.inputBinder=(0,L.WQX)($i,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(w){if(w.name){const{firstChange:R,previousValue:$}=w.name;if(R)return;this.isTrackedInParentContexts($)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed($)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(w){return this.parentContexts.getContext(w)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);w?.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L.wOt(4012,!1);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,R){this.activated=w,this._activatedRoute=R,this.location.insert(w.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,R){if(this.isActivated)throw new L.wOt(4013,!1);this._activatedRoute=w;const $=this.location,De=w.snapshot.component,It=this.parentContexts.getOrCreateContext(this.name).children,lt=new Fs(w,It,$.injector);this.activated=$.createComponent(De,{index:$.length,injector:lt,environmentInjector:R??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275dir=L.FsC({type:v,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[L.OA$]})}return v})();class Fs{__ngOutletInjector(P){return new Fs(this.route,this.childContexts,P)}constructor(P,w,R){this.route=P,this.childContexts=w,this.parent=R}get(P,w){return P===oi?this.route:P===fs?this.childContexts:this.parent.get(P,w)}}const $i=new L.nKC("");let Uo=(()=>{class v{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(w){this.unsubscribeFromRouteData(w),this.subscribeToRouteData(w)}unsubscribeFromRouteData(w){this.outletDataSubscriptions.get(w)?.unsubscribe(),this.outletDataSubscriptions.delete(w)}subscribeToRouteData(w){const{activatedRoute:R}=w,$=wt([R.queryParams,R.params,R.data]).pipe((0,On.n)(([te,De,It],lt)=>(It={...te,...De,...It},0===lt?(0,U.of)(It):Promise.resolve(It)))).subscribe(te=>{if(!w.isActivated||!w.activatedComponentRef||w.activatedRoute!==R||null===R.component)return void this.unsubscribeFromRouteData(w);const De=(0,L.HJs)(R.component);if(De)for(const{templateName:It}of De.inputs)w.activatedComponentRef.setInput(It,te[It]);else this.unsubscribeFromRouteData(w)});this.outletDataSubscriptions.set(w,$)}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=L.jDH({token:v,factory:v.\u0275fac})}return v})();function Oi(v,P,w){if(w&&v.shouldReuseRoute(P.value,w.value.snapshot)){const R=w.value;R._futureSnapshot=P.value;const $=function Io(v,P,w){return P.children.map(R=>{for(const $ of w.children)if(v.shouldReuseRoute(R.value,$.value.snapshot))return Oi(v,R,$);return Oi(v,R)})}(v,P,w);return new hi(R,$)}{if(v.shouldAttach(P.value)){const te=v.retrieve(P.value);if(null!==te){const De=te.route;return De.value._futureSnapshot=P.value,De.children=P.children.map(It=>Oi(v,It)),De}}const R=function ao(v){return new oi(new Le.t(v.url),new Le.t(v.params),new Le.t(v.queryParams),new Le.t(v.fragment),new Le.t(v.data),v.outlet,v.component,v)}(P.value),$=P.children.map(te=>Oi(v,te));return new hi(R,$)}}const Hi="ngNavigationCancelingError";function ms(v,P){const{redirectTo:w,navigationBehaviorOptions:R}=_t(P)?{redirectTo:P,navigationBehaviorOptions:void 0}:P,$=Vs(!1,Ii.Redirect);return $.url=w,$.navigationBehaviorOptions=R,$}function Vs(v,P){const w=new Error(`NavigationCancelingError: ${v||""}`);return w[Hi]=!0,w.cancellationCode=P,w}function Js(v){return!!v&&v[Hi]}let Ki=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275cmp=L.VBU({type:v,selectors:[["ng-component"]],standalone:!0,features:[L.aNF],decls:1,vars:0,template:function(R,$){1&R&&L.nrm(0,"router-outlet")},dependencies:[ts],encapsulation:2})}return v})();function co(v){const P=v.children&&v.children.map(co),w=P?{...v,children:P}:{...v};return!w.component&&!w.loadComponent&&(P||w.loadChildren)&&w.outlet&&w.outlet!==bt&&(w.component=Ki),w}function sr(v){return v.outlet||bt}function _s(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let P=v.parent;P;P=P.parent){const w=P.routeConfig;if(w?._loadedInjector)return w._loadedInjector;if(w?._injector)return w._injector}return null}class z{constructor(P,w,R,$,te){this.routeReuseStrategy=P,this.futureState=w,this.currState=R,this.forwardEvent=$,this.inputBindingEnabled=te}activate(P){const w=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,R,P),es(this.futureState.root),this.activateChildRoutes(w,R,P)}deactivateChildRoutes(P,w,R){const $=zr(w);P.children.forEach(te=>{const De=te.value.outlet;this.deactivateRoutes(te,$[De],R),delete $[De]}),Object.values($).forEach(te=>{this.deactivateRouteAndItsChildren(te,R)})}deactivateRoutes(P,w,R){const $=P.value,te=w?w.value:null;if($===te)if($.component){const De=R.getContext($.outlet);De&&this.deactivateChildRoutes(P,w,De.children)}else this.deactivateChildRoutes(P,w,R);else te&&this.deactivateRouteAndItsChildren(w,R)}deactivateRouteAndItsChildren(P,w){P.value.component&&this.routeReuseStrategy.shouldDetach(P.value.snapshot)?this.detachAndStoreRouteSubtree(P,w):this.deactivateRouteAndOutlet(P,w)}detachAndStoreRouteSubtree(P,w){const R=w.getContext(P.value.outlet),$=R&&P.value.component?R.children:w,te=zr(P);for(const De of Object.values(te))this.deactivateRouteAndItsChildren(De,$);if(R&&R.outlet){const De=R.outlet.detach(),It=R.children.onOutletDeactivated();this.routeReuseStrategy.store(P.value.snapshot,{componentRef:De,route:P,contexts:It})}}deactivateRouteAndOutlet(P,w){const R=w.getContext(P.value.outlet),$=R&&P.value.component?R.children:w,te=zr(P);for(const De of Object.values(te))this.deactivateRouteAndItsChildren(De,$);R&&(R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated()),R.attachRef=null,R.route=null)}activateChildRoutes(P,w,R){const $=zr(w);P.children.forEach(te=>{this.activateRoutes(te,$[te.value.outlet],R),this.forwardEvent(new la(te.value.snapshot))}),P.children.length&&this.forwardEvent(new Vo(P.value.snapshot))}activateRoutes(P,w,R){const $=P.value,te=w?w.value:null;if(es($),$===te)if($.component){const De=R.getOrCreateContext($.outlet);this.activateChildRoutes(P,w,De.children)}else this.activateChildRoutes(P,w,R);else if($.component){const De=R.getOrCreateContext($.outlet);if(this.routeReuseStrategy.shouldAttach($.snapshot)){const It=this.routeReuseStrategy.retrieve($.snapshot);this.routeReuseStrategy.store($.snapshot,null),De.children.onOutletReAttached(It.contexts),De.attachRef=It.componentRef,De.route=It.route.value,De.outlet&&De.outlet.attach(It.componentRef,It.route.value),es(It.route.value),this.activateChildRoutes(P,null,De.children)}else{const It=_s($.snapshot);De.attachRef=null,De.route=$,De.injector=It,De.outlet&&De.outlet.activateWith($,De.injector),this.activateChildRoutes(P,null,De.children)}}else this.activateChildRoutes(P,null,R)}}class q{constructor(P){this.path=P,this.route=this.path[this.path.length-1]}}class O{constructor(P,w){this.component=P,this.route=w}}function ee(v,P,w){const R=v._root;return Xn(R,P?P._root:null,w,[R.value])}function un(v,P){const w=Symbol(),R=P.get(v,w);return R===w?"function"!=typeof v||(0,L.LfX)(v)?P.get(v):v:R}function Xn(v,P,w,R,$={canDeactivateChecks:[],canActivateChecks:[]}){const te=zr(P);return v.children.forEach(De=>{(function ys(v,P,w,R,$={canDeactivateChecks:[],canActivateChecks:[]}){const te=v.value,De=P?P.value:null,It=w?w.getContext(v.value.outlet):null;if(De&&te.routeConfig===De.routeConfig){const lt=function Zs(v,P,w){if("function"==typeof w)return w(v,P);switch(w){case"pathParamsChange":return!Mn(v.url,P.url);case"pathParamsOrQueryParamsChange":return!Mn(v.url,P.url)||!Qn(v.queryParams,P.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wi(v,P)||!Qn(v.queryParams,P.queryParams);default:return!Wi(v,P)}}(De,te,te.routeConfig.runGuardsAndResolvers);lt?$.canActivateChecks.push(new q(R)):(te.data=De.data,te._resolvedData=De._resolvedData),Xn(v,P,te.component?It?It.children:null:w,R,$),lt&&It&&It.outlet&&It.outlet.isActivated&&$.canDeactivateChecks.push(new O(It.outlet.component,De))}else De&&fi(P,It,$),$.canActivateChecks.push(new q(R)),Xn(v,null,te.component?It?It.children:null:w,R,$)})(De,te[De.value.outlet],w,R.concat([De.value]),$),delete te[De.value.outlet]}),Object.entries(te).forEach(([De,It])=>fi(It,w.getContext(De),$)),$}function fi(v,P,w){const R=zr(v),$=v.value;Object.entries(R).forEach(([te,De])=>{fi(De,$.component?P?P.children.getContext(te):null:P,w)}),w.canDeactivateChecks.push(new O($.component&&P&&P.outlet&&P.outlet.isActivated?P.outlet.component:null,$))}function Ts(v){return"function"==typeof v}function Va(v){return v instanceof At.G||"EmptyError"===v?.name}const La=Symbol("INITIAL_VALUE");function eo(){return(0,On.n)(v=>wt(v.map(P=>P.pipe((0,Ft.s)(1),(0,Tn.Z)(La)))).pipe((0,Fn.T)(P=>{for(const w of P)if(!0!==w){if(w===La)return La;if(!1===w||w instanceof Or)return w}return!0}),(0,ke.p)(P=>P!==La),(0,Ft.s)(1)))}function ii(v){return(0,ue.F)((0,yt.M)(P=>{if(_t(P))throw ms(0,P)}),(0,Fn.T)(P=>!0===P))}class xi{constructor(P){this.segmentGroup=P||null}}class ga extends Error{constructor(P){super(),this.urlTree=P}}function vs(v){return Ce(new xi(v))}class Ao{constructor(P,w){this.urlSerializer=P,this.urlTree=w}lineralizeSegments(P,w){let R=[],$=w.root;for(;;){if(R=R.concat($.segments),0===$.numberOfChildren)return(0,U.of)(R);if($.numberOfChildren>1||!$.children[bt])return Ce(new L.wOt(4e3,!1));$=$.children[bt]}}applyRedirectCommands(P,w,R){const $=this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),P,R);if(w.startsWith("/"))throw new ga($);return $}applyRedirectCreateUrlTree(P,w,R,$){const te=this.createSegmentGroup(P,w.root,R,$);return new Or(te,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(P,w){const R={};return Object.entries(P).forEach(([$,te])=>{if("string"==typeof te&&te.startsWith(":")){const It=te.substring(1);R[$]=w[It]}else R[$]=te}),R}createSegmentGroup(P,w,R,$){const te=this.createSegments(P,w.segments,R,$);let De={};return Object.entries(w.children).forEach(([It,lt])=>{De[It]=this.createSegmentGroup(P,lt,R,$)}),new Xt(te,De)}createSegments(P,w,R,$){return w.map(te=>te.path.startsWith(":")?this.findPosParam(P,te,$):this.findOrReturn(te,R))}findPosParam(P,w,R){const $=R[w.path.substring(1)];if(!$)throw new L.wOt(4001,!1);return $}findOrReturn(P,w){let R=0;for(const $ of w){if($.path===P.path)return w.splice(R),$;R++}return P}}const J={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function I(v,P,w,R,$){const te=T(v,P,w);return te.matched?(R=function Ls(v,P){return v.providers&&!v._injector&&(v._injector=(0,L.Ol2)(v.providers,P,`Route: ${v.path}`)),v._injector??P}(P,R),function Ni(v,P,w,R){const $=P.canMatch;if(!$||0===$.length)return(0,U.of)(!0);const te=$.map(De=>{const It=un(De,v);return kr(function fa(v){return v&&Ts(v.canMatch)}(It)?It.canMatch(P,w):(0,L.N4e)(v,()=>It(P,w)))});return(0,U.of)(te).pipe(eo(),ii())}(R,P,w).pipe((0,Fn.T)(De=>!0===De?te:{...J}))):(0,U.of)(te)}function T(v,P,w){if("**"===P.path)return function V(v){return{matched:!0,parameters:v.length>0?An(v).parameters:{},consumedSegments:v,remainingSegments:[],positionalParamSegments:{}}}(w);if(""===P.path)return"full"===P.pathMatch&&(v.hasChildren()||w.length>0)?{...J}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const $=(P.matcher||tt)(w,v,P);if(!$)return{...J};const te={};Object.entries($.posParams??{}).forEach(([It,lt])=>{te[It]=lt.path});const De=$.consumed.length>0?{...te,...$.consumed[$.consumed.length-1].parameters}:te;return{matched:!0,consumedSegments:$.consumed,remainingSegments:w.slice($.consumed.length),parameters:De,positionalParamSegments:$.posParams??{}}}function X(v,P,w,R){return w.length>0&&function je(v,P,w){return w.some(R=>Pt(v,P,R)&&sr(R)!==bt)}(v,w,R)?{segmentGroup:new Xt(P,Pe(R,new Xt(w,v.children))),slicedSegments:[]}:0===w.length&&function ut(v,P,w){return w.some(R=>Pt(v,P,R))}(v,w,R)?{segmentGroup:new Xt(v.segments,fe(v,w,R,v.children)),slicedSegments:w}:{segmentGroup:new Xt(v.segments,v.children),slicedSegments:w}}function fe(v,P,w,R){const $={};for(const te of w)if(Pt(v,P,te)&&!R[sr(te)]){const De=new Xt([],{});$[sr(te)]=De}return{...R,...$}}function Pe(v,P){const w={};w[bt]=P;for(const R of v)if(""===R.path&&sr(R)!==bt){const $=new Xt([],{});w[sr(R)]=$}return w}function Pt(v,P,w){return(!(v.hasChildren()||P.length>0)||"full"!==w.pathMatch)&&""===w.path}class ur{}class Wn{constructor(P,w,R,$,te,De,It){this.injector=P,this.configLoader=w,this.rootComponentType=R,this.config=$,this.urlTree=te,this.paramsInheritanceStrategy=De,this.urlSerializer=It,this.applyRedirects=new Ao(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(P){return new L.wOt(4002,`'${P.segmentGroup}'`)}recognize(){const P=X(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(P).pipe((0,Fn.T)(w=>{const R=new ks([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},bt,this.rootComponentType,null,{}),$=new hi(R,w),te=new gs("",$),De=function Je(v,P,w=null,R=null){return sn(kt(v),P,w,R)}(R,[],this.urlTree.queryParams,this.urlTree.fragment);return De.queryParams=this.urlTree.queryParams,te.url=this.urlSerializer.serialize(De),this.inheritParamsAndData(te._root,null),{state:te,tree:De}}))}match(P){return this.processSegmentGroup(this.injector,this.config,P,bt).pipe((0,Ze.W)(R=>{if(R instanceof ga)return this.urlTree=R.urlTree,this.match(R.urlTree.root);throw R instanceof xi?this.noMatchError(R):R}))}inheritParamsAndData(P,w){const R=P.value,$=ps(R,w,this.paramsInheritanceStrategy);R.params=Object.freeze($.params),R.data=Object.freeze($.data),P.children.forEach(te=>this.inheritParamsAndData(te,R))}processSegmentGroup(P,w,R,$){return 0===R.segments.length&&R.hasChildren()?this.processChildren(P,w,R):this.processSegment(P,w,R,R.segments,$,!0).pipe((0,Fn.T)(te=>te instanceof hi?[te]:[]))}processChildren(P,w,R){const $=[];for(const te of Object.keys(R.children))"primary"===te?$.unshift(te):$.push(te);return(0,Me.H)($).pipe((0,gt.H)(te=>{const De=R.children[te],It=function us(v,P){const w=v.filter(R=>sr(R)===P);return w.push(...v.filter(R=>sr(R)!==P)),w}(w,te);return this.processSegmentGroup(P,It,De,te)}),(0,zt.S)((te,De)=>(te.push(...De),te)),(0,ln.U)(null),function vn(v,P){const w=arguments.length>=2;return R=>R.pipe(v?(0,ke.p)(($,te)=>v($,te,R)):Ee.D,Zt(1),w?(0,ln.U)(P):(0,tn.v)(()=>new At.G))}(),(0,Xe.Z)(te=>{if(null===te)return vs(R);const De=pi(te);return function Vr(v){v.sort((P,w)=>P.value.outlet===bt?-1:w.value.outlet===bt?1:P.value.outlet.localeCompare(w.value.outlet))}(De),(0,U.of)(De)}))}processSegment(P,w,R,$,te,De){return(0,Me.H)(w).pipe((0,gt.H)(It=>this.processSegmentAgainstRoute(It._injector??P,w,It,R,$,te,De).pipe((0,Ze.W)(lt=>{if(lt instanceof xi)return(0,U.of)(null);throw lt}))),(0,ct.$)(It=>!!It),(0,Ze.W)(It=>{if(Va(It))return function gn(v,P,w){return 0===P.length&&!v.children[w]}(R,$,te)?(0,U.of)(new ur):vs(R);throw It}))}processSegmentAgainstRoute(P,w,R,$,te,De,It){return function nn(v,P,w,R){return!!(sr(v)===R||R!==bt&&Pt(P,w,v))&&T(P,v,w).matched}(R,$,te,De)?void 0===R.redirectTo?this.matchSegmentAgainstRoute(P,$,R,te,De):this.allowRedirects&&It?this.expandSegmentAgainstRouteUsingRedirect(P,$,w,R,te,De):vs($):vs($)}expandSegmentAgainstRouteUsingRedirect(P,w,R,$,te,De){const{matched:It,consumedSegments:lt,positionalParamSegments:hn,remainingSegments:Jn}=T(w,$,te);if(!It)return vs(w);$.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const lr=this.applyRedirects.applyRedirectCommands(lt,$.redirectTo,hn);return this.applyRedirects.lineralizeSegments($,lr).pipe((0,Xe.Z)(Vi=>this.processSegment(P,R,w,Vi.concat(Jn),De,!1)))}matchSegmentAgainstRoute(P,w,R,$,te){const De=I(w,R,$,P);return"**"===R.path&&(w.children={}),De.pipe((0,On.n)(It=>It.matched?this.getChildConfig(P=R._injector??P,R,$).pipe((0,On.n)(({routes:lt})=>{const hn=R._loadedInjector??P,{consumedSegments:Jn,remainingSegments:lr,parameters:Vi}=It,Ac=new ks(Jn,Vi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function os(v){return v.data||{}}(R),sr(R),R.component??R._loadedComponent??null,R,function uo(v){return v.resolve||{}}(R)),{segmentGroup:na,slicedSegments:fo}=X(w,Jn,lr,lt);if(0===fo.length&&na.hasChildren())return this.processChildren(hn,lt,na).pipe((0,Fn.T)(Go=>null===Go?null:new hi(Ac,Go)));if(0===lt.length&&0===fo.length)return(0,U.of)(new hi(Ac,[]));const $s=sr(R)===te;return this.processSegment(hn,lt,na,fo,$s?bt:te,!0).pipe((0,Fn.T)(Go=>new hi(Ac,Go instanceof hi?[Go]:[])))})):vs(w)))}getChildConfig(P,w,R){return w.children?(0,U.of)({routes:w.children,injector:P}):w.loadChildren?void 0!==w._loadedRoutes?(0,U.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function Wr(v,P,w,R){const $=P.canLoad;if(void 0===$||0===$.length)return(0,U.of)(!0);const te=$.map(De=>{const It=un(De,v);return kr(function Bo(v){return v&&Ts(v.canLoad)}(It)?It.canLoad(P,w):(0,L.N4e)(v,()=>It(P,w)))});return(0,U.of)(te).pipe(eo(),ii())}(P,w,R).pipe((0,Xe.Z)($=>$?this.configLoader.loadChildren(P,w).pipe((0,yt.M)(te=>{w._loadedRoutes=te.routes,w._loadedInjector=te.injector})):function Tc(v){return Ce(Vs(!1,Ii.GuardRejected))}())):(0,U.of)({routes:[],injector:P})}}function Lr(v){const P=v.value.routeConfig;return P&&""===P.path}function pi(v){const P=[],w=new Set;for(const R of v){if(!Lr(R)){P.push(R);continue}const $=P.find(te=>R.value.routeConfig===te.value.routeConfig);void 0!==$?($.children.push(...R.children),w.add($)):P.push(R)}for(const R of w){const $=pi(R.children);P.push(new hi(R.value,$))}return P.filter(R=>!w.has(R))}function ls(v){const P=v.children.map(w=>ls(w)).flat();return[v,...P]}function ds(v){return(0,On.n)(P=>{const w=v(P);return w?(0,Me.H)(w).pipe((0,Fn.T)(()=>P)):(0,U.of)(P)})}let Es=(()=>{class v{buildTitle(w){let R,$=w.root;for(;void 0!==$;)R=this.getResolvedTitleForRoute($)??R,$=$.children.find(te=>te.outlet===bt);return R}getResolvedTitleForRoute(w){return w.data[ft]}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=L.jDH({token:v,factory:()=>(0,L.WQX)(Bs),providedIn:"root"})}return v})(),Bs=(()=>{class v extends Es{constructor(w){super(),this.title=w}updateTitle(w){const R=this.buildTitle(w);void 0!==R&&this.title.setTitle(R)}static#e=this.\u0275fac=function(R){return new(R||v)(L.KVO(rr.hE))};static#t=this.\u0275prov=L.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const S=new L.nKC("",{providedIn:"root",factory:()=>({})}),H=new L.nKC("");let N=(()=>{class v{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,L.WQX)(L.Ql9)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,U.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const R=kr(w.loadComponent()).pipe((0,Fn.T)(it),(0,yt.M)(te=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=te}),(0,Ln.j)(()=>{this.componentLoaders.delete(w)})),$=new Mt(R,()=>new pn.B).pipe(Ue());return this.componentLoaders.set(w,$),$}loadChildren(w,R){if(this.childrenLoaders.get(R))return this.childrenLoaders.get(R);if(R._loadedRoutes)return(0,U.of)({routes:R._loadedRoutes,injector:R._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(R);const te=function j(v,P,w,R){return kr(v.loadChildren()).pipe((0,Fn.T)(it),(0,Xe.Z)($=>$ instanceof L.Co$||Array.isArray($)?(0,U.of)($):(0,Me.H)(P.compileModuleAsync($))),(0,Fn.T)($=>{R&&R(v);let te,De,It=!1;return Array.isArray($)?(De=$,!0):(te=$.create(w).injector,De=te.get(H,[],{optional:!0,self:!0}).flat()),{routes:De.map(co),injector:te}}))}(R,this.compiler,w,this.onLoadEndListener).pipe((0,Ln.j)(()=>{this.childrenLoaders.delete(R)})),De=new Mt(te,()=>new pn.B).pipe(Ue());return this.childrenLoaders.set(R,De),De}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=L.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function it(v){return function _e(v){return v&&"object"==typeof v&&"default"in v}(v)?v.default:v}let xt=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=L.jDH({token:v,factory:()=>(0,L.WQX)(on),providedIn:"root"})}return v})(),on=(()=>{class v{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,R){return w}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=L.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const Cr=new L.nKC(""),dn=new L.nKC("");function Ur(v,P,w){const R=v.get(dn),$=v.get(Pn.qQ);return v.get(L.SKi).runOutsideAngular(()=>{if(!$.startViewTransition||R.skipNextTransition)return R.skipNextTransition=!1,new Promise(hn=>setTimeout(hn));let te;const De=new Promise(hn=>{te=hn}),It=$.startViewTransition(()=>(te(),function hr(v){return new Promise(P=>{(0,L.mal)(P,{injector:v})})}(v))),{onViewTransitionCreated:lt}=R;return lt&&(0,L.N4e)(v,()=>lt({transition:It,from:P,to:w})),De})}let fr=(()=>{class v{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new pn.B,this.transitionAbortSubject=new pn.B,this.configLoader=(0,L.WQX)(N),this.environmentInjector=(0,L.WQX)(L.uvJ),this.urlSerializer=(0,L.WQX)(xe),this.rootContexts=(0,L.WQX)(fs),this.location=(0,L.WQX)(Pn.aZ),this.inputBindingEnabled=null!==(0,L.WQX)($i,{optional:!0}),this.titleStrategy=(0,L.WQX)(Es),this.options=(0,L.WQX)(S,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,L.WQX)(xt),this.createViewTransition=(0,L.WQX)(Cr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,U.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=$=>this.events.next(new xs($)),this.configLoader.onLoadStartListener=$=>this.events.next(new Eo($))}complete(){this.transitions?.complete()}handleNavigationRequest(w){const R=++this.navigationId;this.transitions?.next({...this.transitions.value,...w,id:R})}setupNavigations(w,R,$){return this.transitions=new Le.t({id:0,currentUrlTree:R,currentRawUrl:R,extractedUrl:this.urlHandlingStrategy.extract(R),urlAfterRedirects:this.urlHandlingStrategy.extract(R),rawUrl:R,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:li,restoredState:null,currentSnapshot:$.snapshot,targetSnapshot:null,currentRouterState:$,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,ke.p)(te=>0!==te.id),(0,Fn.T)(te=>({...te,extractedUrl:this.urlHandlingStrategy.extract(te.rawUrl)})),(0,On.n)(te=>{let De=!1,It=!1;return(0,U.of)(te).pipe((0,On.n)(lt=>{if(this.navigationId>te.id)return this.cancelNavigationTransition(te,"",Ii.SupersededByNewNavigation),qe.w;this.currentTransition=te,this.currentNavigation={id:lt.id,initialUrl:lt.rawUrl,extractedUrl:lt.extractedUrl,trigger:lt.source,extras:lt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const hn=!w.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!hn&&"reload"!==(lt.extras.onSameUrlNavigation??w.onSameUrlNavigation)){const lr="";return this.events.next(new Fo(lt.id,this.urlSerializer.serialize(lt.rawUrl),lr,Rn.IgnoredSameUrlNavigation)),lt.resolve(null),qe.w}if(this.urlHandlingStrategy.shouldProcessUrl(lt.rawUrl))return(0,U.of)(lt).pipe((0,On.n)(lr=>{const Vi=this.transitions?.getValue();return this.events.next(new di(lr.id,this.urlSerializer.serialize(lr.extractedUrl),lr.source,lr.restoredState)),Vi!==this.transitions?.getValue()?qe.w:Promise.resolve(lr)}),function Os(v,P,w,R,$,te){return(0,Xe.Z)(De=>function er(v,P,w,R,$,te,De="emptyOnly"){return new Wn(v,P,w,R,$,De,te).recognize()}(v,P,w,R,De.extractedUrl,$,te).pipe((0,Fn.T)(({state:It,tree:lt})=>({...De,targetSnapshot:It,urlAfterRedirects:lt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,w.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,yt.M)(lr=>{te.targetSnapshot=lr.targetSnapshot,te.urlAfterRedirects=lr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:lr.urlAfterRedirects};const Vi=new oo(lr.id,this.urlSerializer.serialize(lr.extractedUrl),this.urlSerializer.serialize(lr.urlAfterRedirects),lr.targetSnapshot);this.events.next(Vi)}));if(hn&&this.urlHandlingStrategy.shouldProcessUrl(lt.currentRawUrl)){const{id:lr,extractedUrl:Vi,source:Ac,restoredState:na,extras:fo}=lt,$s=new di(lr,this.urlSerializer.serialize(Vi),Ac,na);this.events.next($s);const Go=ss(this.rootComponentType).snapshot;return this.currentTransition=te={...lt,targetSnapshot:Go,urlAfterRedirects:Vi,extras:{...fo,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Vi,(0,U.of)(te)}{const lr="";return this.events.next(new Fo(lt.id,this.urlSerializer.serialize(lt.extractedUrl),lr,Rn.IgnoredByUrlHandlingStrategy)),lt.resolve(null),qe.w}}),(0,yt.M)(lt=>{const hn=new Qo(lt.id,this.urlSerializer.serialize(lt.extractedUrl),this.urlSerializer.serialize(lt.urlAfterRedirects),lt.targetSnapshot);this.events.next(hn)}),(0,Fn.T)(lt=>(this.currentTransition=te={...lt,guards:ee(lt.targetSnapshot,lt.currentSnapshot,this.rootContexts)},te)),function Ua(v,P){return(0,Xe.Z)(w=>{const{targetSnapshot:R,currentSnapshot:$,guards:{canActivateChecks:te,canDeactivateChecks:De}}=w;return 0===De.length&&0===te.length?(0,U.of)({...w,guardsResult:!0}):function pa(v,P,w,R){return(0,Me.H)(v).pipe((0,Xe.Z)($=>function cr(v,P,w,R,$){const te=P&&P.routeConfig?P.routeConfig.canDeactivate:null;if(!te||0===te.length)return(0,U.of)(!0);const De=te.map(It=>{const lt=_s(P)??$,hn=un(It,lt);return kr(function Da(v){return v&&Ts(v.canDeactivate)}(hn)?hn.canDeactivate(v,P,w,R):(0,L.N4e)(lt,()=>hn(v,P,w,R))).pipe((0,ct.$)())});return(0,U.of)(De).pipe(eo())}($.component,$.route,w,P,R)),(0,ct.$)($=>!0!==$,!0))}(De,R,$,v).pipe((0,Xe.Z)(It=>It&&function Ta(v){return"boolean"==typeof v}(It)?function jo(v,P,w,R){return(0,Me.H)(P).pipe((0,gt.H)($=>(0,mt.x)(function Aa(v,P){return null!==v&&P&&P(new Er(v)),(0,U.of)(!0)}($.route.parent,R),function To(v,P){return null!==v&&P&&P(new Qs(v)),(0,U.of)(!0)}($.route,R),function Do(v,P,w){const R=P[P.length-1],te=P.slice(0,P.length-1).reverse().map(De=>function be(v){const P=v.routeConfig?v.routeConfig.canActivateChild:null;return P&&0!==P.length?{node:v,guards:P}:null}(De)).filter(De=>null!==De).map(De=>ie(()=>{const It=De.guards.map(lt=>{const hn=_s(De.node)??w,Jn=un(lt,hn);return kr(function ei(v){return v&&Ts(v.canActivateChild)}(Jn)?Jn.canActivateChild(R,v):(0,L.N4e)(hn,()=>Jn(R,v))).pipe((0,ct.$)())});return(0,U.of)(It).pipe(eo())}));return(0,U.of)(te).pipe(eo())}(v,$.path,w),function Jo(v,P,w){const R=P.routeConfig?P.routeConfig.canActivate:null;if(!R||0===R.length)return(0,U.of)(!0);const $=R.map(te=>ie(()=>{const De=_s(P)??w,It=un(te,De);return kr(function ha(v){return v&&Ts(v.canActivate)}(It)?It.canActivate(P,v):(0,L.N4e)(De,()=>It(P,v))).pipe((0,ct.$)())}));return(0,U.of)($).pipe(eo())}(v,$.route,w))),(0,ct.$)($=>!0!==$,!0))}(R,te,v,P):(0,U.of)(It)),(0,Fn.T)(It=>({...w,guardsResult:It})))})}(this.environmentInjector,lt=>this.events.next(lt)),(0,yt.M)(lt=>{if(te.guardsResult=lt.guardsResult,_t(lt.guardsResult))throw ms(0,lt.guardsResult);const hn=new ua(lt.id,this.urlSerializer.serialize(lt.extractedUrl),this.urlSerializer.serialize(lt.urlAfterRedirects),lt.targetSnapshot,!!lt.guardsResult);this.events.next(hn)}),(0,ke.p)(lt=>!!lt.guardsResult||(this.cancelNavigationTransition(lt,"",Ii.GuardRejected),!1)),ds(lt=>{if(lt.guards.canActivateChecks.length)return(0,U.of)(lt).pipe((0,yt.M)(hn=>{const Jn=new vo(hn.id,this.urlSerializer.serialize(hn.extractedUrl),this.urlSerializer.serialize(hn.urlAfterRedirects),hn.targetSnapshot);this.events.next(Jn)}),(0,On.n)(hn=>{let Jn=!1;return(0,U.of)(hn).pipe(function Di(v,P){return(0,Xe.Z)(w=>{const{targetSnapshot:R,guards:{canActivateChecks:$}}=w;if(!$.length)return(0,U.of)(w);const te=new Set($.map(lt=>lt.route)),De=new Set;for(const lt of te)if(!De.has(lt))for(const hn of ls(lt))De.add(hn);let It=0;return(0,Me.H)(De).pipe((0,gt.H)(lt=>te.has(lt)?function lo(v,P,w,R){const $=v.routeConfig,te=v._resolve;return void 0!==$?.title&&!ji($)&&(te[ft]=$.title),function Zo(v,P,w,R){const $=Zn(v);if(0===$.length)return(0,U.of)({});const te={};return(0,Me.H)($).pipe((0,Xe.Z)(De=>function ma(v,P,w,R){const $=_s(P)??R,te=un(v,$);return kr(te.resolve?te.resolve(P,w):(0,L.N4e)($,()=>te(P,w)))}(v[De],P,w,R).pipe((0,ct.$)(),(0,yt.M)(It=>{te[De]=It}))),Zt(1),function Cn(v){return(0,Fn.T)(()=>v)}(te),(0,Ze.W)(De=>Va(De)?qe.w:Ce(De)))}(te,v,P,R).pipe((0,Fn.T)(De=>(v._resolvedData=De,v.data=ps(v,v.parent,w).resolve,null)))}(lt,R,v,P):(lt.data=ps(lt,lt.parent,v).resolve,(0,U.of)(void 0))),(0,yt.M)(()=>It++),Zt(1),(0,Xe.Z)(lt=>It===De.size?(0,U.of)(w):qe.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,yt.M)({next:()=>Jn=!0,complete:()=>{Jn||this.cancelNavigationTransition(hn,"",Ii.NoDataFromResolver)}}))}),(0,yt.M)(hn=>{const Jn=new nr(hn.id,this.urlSerializer.serialize(hn.extractedUrl),this.urlSerializer.serialize(hn.urlAfterRedirects),hn.targetSnapshot);this.events.next(Jn)}))}),ds(lt=>{const hn=Jn=>{const lr=[];Jn.routeConfig?.loadComponent&&!Jn.routeConfig._loadedComponent&&lr.push(this.configLoader.loadComponent(Jn.routeConfig).pipe((0,yt.M)(Vi=>{Jn.component=Vi}),(0,Fn.T)(()=>{})));for(const Vi of Jn.children)lr.push(...hn(Vi));return lr};return wt(hn(lt.targetSnapshot.root)).pipe((0,ln.U)(null),(0,Ft.s)(1))}),ds(()=>this.afterPreactivation()),(0,On.n)(()=>{const{currentSnapshot:lt,targetSnapshot:hn}=te,Jn=this.createViewTransition?.(this.environmentInjector,lt.root,hn.root);return Jn?(0,Me.H)(Jn).pipe((0,Fn.T)(()=>te)):(0,U.of)(te)}),(0,Fn.T)(lt=>{const hn=function ns(v,P,w){const R=Oi(v,P._root,w?w._root:void 0);return new ni(R,P)}(w.routeReuseStrategy,lt.targetSnapshot,lt.currentRouterState);return this.currentTransition=te={...lt,targetRouterState:hn},this.currentNavigation.targetRouterState=hn,te}),(0,yt.M)(()=>{this.events.next(new Sr)}),((v,P,w,R)=>(0,Fn.T)($=>(new z(P,$.targetRouterState,$.currentRouterState,w,R).activate(v),$)))(this.rootContexts,w.routeReuseStrategy,lt=>this.events.next(lt),this.inputBindingEnabled),(0,Ft.s)(1),(0,yt.M)({next:lt=>{De=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ei(lt.id,this.urlSerializer.serialize(lt.extractedUrl),this.urlSerializer.serialize(lt.urlAfterRedirects))),this.titleStrategy?.updateTitle(lt.targetRouterState.snapshot),lt.resolve(!0)},complete:()=>{De=!0}}),function yn(v){return(0,de.N)((P,w)=>{(0,ce.Tg)(v).subscribe((0,Ae._)(w,()=>w.complete(),rt.l)),!w.closed&&P.subscribe(w)})}(this.transitionAbortSubject.pipe((0,yt.M)(lt=>{throw lt}))),(0,Ln.j)(()=>{!De&&!It&&this.cancelNavigationTransition(te,"",Ii.SupersededByNewNavigation),this.currentTransition?.id===te.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,Ze.W)(lt=>{if(It=!0,Js(lt))this.events.next(new ar(te.id,this.urlSerializer.serialize(te.extractedUrl),lt.message,lt.cancellationCode)),function Xo(v){return Js(v)&&_t(v.url)}(lt)?this.events.next(new Bi(lt.url)):te.resolve(!1);else{this.events.next(new zi(te.id,this.urlSerializer.serialize(te.extractedUrl),lt,te.targetSnapshot??void 0));try{te.resolve(w.errorHandler(lt))}catch(hn){this.options.resolveNavigationPromiseOnError?te.resolve(!1):te.reject(hn)}}return qe.w}))}))}cancelNavigationTransition(w,R,$){const te=new ar(w.id,this.urlSerializer.serialize(w.extractedUrl),R,$);this.events.next(te),w.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=L.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function wr(v){return v!==li}let Tr=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=L.jDH({token:v,factory:()=>(0,L.WQX)(Qt),providedIn:"root"})}return v})();class xr{shouldDetach(P){return!1}store(P,w){}shouldAttach(P){return!1}retrieve(P){return null}shouldReuseRoute(P,w){return P.routeConfig===w.routeConfig}}let Qt=(()=>{class v extends xr{static#e=this.\u0275fac=(()=>{let w;return function($){return(w||(w=L.xGo(v)))($||v)}})();static#t=this.\u0275prov=L.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),_n=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=L.jDH({token:v,factory:()=>(0,L.WQX)(pr),providedIn:"root"})}return v})(),pr=(()=>{class v extends _n{constructor(){super(...arguments),this.location=(0,L.WQX)(Pn.aZ),this.urlSerializer=(0,L.WQX)(xe),this.options=(0,L.WQX)(S,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,L.WQX)(xt),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Or,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ss(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(w){return this.location.subscribe(R=>{"popstate"===R.type&&w(R.url,R.state)})}handleRouterEvent(w,R){if(w instanceof di)this.stateMemento=this.createStateMemento();else if(w instanceof Fo)this.rawUrlTree=R.initialUrl;else if(w instanceof oo){if("eager"===this.urlUpdateStrategy&&!R.extras.skipLocationChange){const $=this.urlHandlingStrategy.merge(R.finalUrl,R.initialUrl);this.setBrowserUrl($,R)}}else w instanceof Sr?(this.currentUrlTree=R.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(R.finalUrl,R.initialUrl),this.routerState=R.targetRouterState,"deferred"===this.urlUpdateStrategy&&(R.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,R))):w instanceof ar&&(w.code===Ii.GuardRejected||w.code===Ii.NoDataFromResolver)?this.restoreHistory(R):w instanceof zi?this.restoreHistory(R,!0):w instanceof Ei&&(this.lastSuccessfulId=w.id,this.currentPageId=this.browserPageId)}setBrowserUrl(w,R){const $=this.urlSerializer.serialize(w);if(this.location.isCurrentPathEqualTo($)||R.extras.replaceUrl){const De={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId)};this.location.replaceState($,"",De)}else{const te={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId+1)};this.location.go($,"",te)}}restoreHistory(w,R=!1){if("computed"===this.canceledNavigationResolution){const te=this.currentPageId-this.browserPageId;0!==te?this.location.historyGo(te):this.currentUrlTree===w.finalUrl&&0===te&&(this.resetState(w),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,R){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:R}:{navigationId:w}}static#e=this.\u0275fac=(()=>{let w;return function($){return(w||(w=L.xGo(v)))($||v)}})();static#t=this.\u0275prov=L.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();var Ai=function(v){return v[v.COMPLETE=0]="COMPLETE",v[v.FAILED=1]="FAILED",v[v.REDIRECTING=2]="REDIRECTING",v}(Ai||{});function gi(v,P){v.events.pipe((0,ke.p)(w=>w instanceof Ei||w instanceof ar||w instanceof zi||w instanceof Fo),(0,Fn.T)(w=>w instanceof Ei||w instanceof Fo?Ai.COMPLETE:w instanceof ar&&(w.code===Ii.Redirect||w.code===Ii.SupersededByNewNavigation)?Ai.REDIRECTING:Ai.FAILED),(0,ke.p)(w=>w!==Ai.REDIRECTING),(0,Ft.s)(1)).subscribe(()=>{P()})}function rs(v){throw v}const js={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Kr=(()=>{class v{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,L.WQX)(L.H3F),this.stateManager=(0,L.WQX)(_n),this.options=(0,L.WQX)(S,{optional:!0})||{},this.pendingTasks=(0,L.WQX)(L.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,L.WQX)(fr),this.urlSerializer=(0,L.WQX)(xe),this.location=(0,L.WQX)(Pn.aZ),this.urlHandlingStrategy=(0,L.WQX)(xt),this._events=new pn.B,this.errorHandler=this.options.errorHandler||rs,this.navigated=!1,this.routeReuseStrategy=(0,L.WQX)(Tr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,L.WQX)(H,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,L.WQX)($i,{optional:!0}),this.eventsSubscription=new ze.yU,this.isNgZoneEnabled=(0,L.WQX)(L.SKi)instanceof L.SKi&&L.SKi.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:w=>{this.console.warn(w)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const w=this.navigationTransitions.events.subscribe(R=>{try{const $=this.navigationTransitions.currentTransition,te=this.navigationTransitions.currentNavigation;if(null!==$&&null!==te)if(this.stateManager.handleRouterEvent(R,te),R instanceof ar&&R.code!==Ii.Redirect&&R.code!==Ii.SupersededByNewNavigation)this.navigated=!0;else if(R instanceof Ei)this.navigated=!0;else if(R instanceof Bi){const De=this.urlHandlingStrategy.merge(R.url,$.currentRawUrl),It={info:$.extras.info,skipLocationChange:$.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||wr($.source)};this.scheduleNavigation(De,li,null,It,{resolve:$.resolve,reject:$.reject,promise:$.promise})}(function Yn(v){return!(v instanceof Sr||v instanceof Bi)})(R)&&this._events.next(R)}catch($){this.navigationTransitions.transitionAbortSubject.next($)}});this.eventsSubscription.add(w)}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),li,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((w,R)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(w,"popstate",R)},0)})}navigateToSyncWithBrowser(w,R,$){const te={replaceUrl:!0},De=$?.navigationId?$:null;if($){const lt={...$};delete lt.navigationId,delete lt.\u0275routerPageId,0!==Object.keys(lt).length&&(te.state=lt)}const It=this.parseUrl(w);this.scheduleNavigation(It,R,De,te)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(w){this.config=w.map(co),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(w,R={}){const{relativeTo:$,queryParams:te,fragment:De,queryParamsHandling:It,preserveFragment:lt}=R,hn=lt?this.currentUrlTree.fragment:De;let lr,Jn=null;switch(It){case"merge":Jn={...this.currentUrlTree.queryParams,...te};break;case"preserve":Jn=this.currentUrlTree.queryParams;break;default:Jn=te||null}null!==Jn&&(Jn=this.removeEmptyProps(Jn));try{lr=kt($?$.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof w[0]||!w[0].startsWith("/"))&&(w=[]),lr=this.currentUrlTree.root}return sn(lr,w,Jn,hn??null)}navigateByUrl(w,R={skipLocationChange:!1}){const $=_t(w)?w:this.parseUrl(w),te=this.urlHandlingStrategy.merge($,this.rawUrlTree);return this.scheduleNavigation(te,li,null,R)}navigate(w,R={skipLocationChange:!1}){return function ho(v){for(let P=0;P<v.length;P++)if(null==v[P])throw new L.wOt(4008,!1)}(w),this.navigateByUrl(this.createUrlTree(w,R),R)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){try{return this.urlSerializer.parse(w)}catch{return this.urlSerializer.parse("/")}}isActive(w,R){let $;if($=!0===R?{...js}:!1===R?{...mi}:R,_t(w))return Li(this.currentUrlTree,w,$);const te=this.parseUrl(w);return Li(this.currentUrlTree,te,$)}removeEmptyProps(w){return Object.entries(w).reduce((R,[$,te])=>(null!=te&&(R[$]=te),R),{})}scheduleNavigation(w,R,$,te,De){if(this.disposed)return Promise.resolve(!1);let It,lt,hn;De?(It=De.resolve,lt=De.reject,hn=De.promise):hn=new Promise((lr,Vi)=>{It=lr,lt=Vi});const Jn=this.pendingTasks.add();return gi(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Jn))}),this.navigationTransitions.handleNavigationRequest({source:R,restoredState:$,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:te,resolve:It,reject:lt,promise:hn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),hn.catch(lr=>Promise.reject(lr))}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=L.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),$o=(()=>{class v{constructor(w,R,$,te,De,It){this.router=w,this.route=R,this.tabIndexAttribute=$,this.renderer=te,this.el=De,this.locationStrategy=It,this.href=null,this.commands=null,this.onChanges=new pn.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const lt=De.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===lt||"area"===lt,this.isAnchorElement?this.subscription=w.events.subscribe(hn=>{hn instanceof Ei&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,R,$,te,De){const It=this.urlTree;return!!(null===It||this.isAnchorElement&&(0!==w||R||$||te||De||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(It,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const w=this.urlTree;this.href=null!==w&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(w)):null;const R=null===this.href?null:(0,L.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",R)}applyAttributeValue(w,R){const $=this.renderer,te=this.el.nativeElement;null!==R?$.setAttribute(te,w,R):$.removeAttribute(te,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(R){return new(R||v)(L.rXU(Kr),L.rXU(oi),L.kS0("tabindex"),L.rXU(L.sFG),L.rXU(L.aKT),L.rXU(Pn.hb))};static#t=this.\u0275dir=L.FsC({type:v,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(R,$){1&R&&L.bIt("click",function(De){return $.onClick(De.button,De.ctrlKey,De.shiftKey,De.altKey,De.metaKey)}),2&R&&L.BMQ("target",$.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[L.Mj6.HasDecoratorInputTransform,"preserveFragment","preserveFragment",L.L39],skipLocationChange:[L.Mj6.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",L.L39],replaceUrl:[L.Mj6.HasDecoratorInputTransform,"replaceUrl","replaceUrl",L.L39],routerLink:"routerLink"},standalone:!0,features:[L.GFd,L.OA$]})}return v})();class jn{}let Ho=(()=>{class v{constructor(w,R,$,te,De){this.router=w,this.injector=$,this.preloadingStrategy=te,this.loader=De}setUpPreloading(){this.subscription=this.router.events.pipe((0,ke.p)(w=>w instanceof Ei),(0,gt.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,R){const $=[];for(const te of R){te.providers&&!te._injector&&(te._injector=(0,L.Ol2)(te.providers,w,`Route: ${te.path}`));const De=te._injector??w,It=te._loadedInjector??De;(te.loadChildren&&!te._loadedRoutes&&void 0===te.canLoad||te.loadComponent&&!te._loadedComponent)&&$.push(this.preloadConfig(De,te)),(te.children||te._loadedRoutes)&&$.push(this.processRoutes(It,te.children??te._loadedRoutes))}return(0,Me.H)($).pipe((0,Gn.U)())}preloadConfig(w,R){return this.preloadingStrategy.preload(R,()=>{let $;$=R.loadChildren&&void 0===R.canLoad?this.loader.loadChildren(w,R):(0,U.of)(null);const te=$.pipe((0,Xe.Z)(De=>null===De?(0,U.of)(void 0):(R._loadedRoutes=De.routes,R._loadedInjector=De.injector,this.processRoutes(De.injector??w,De.routes))));if(R.loadComponent&&!R._loadedComponent){const De=this.loader.loadComponent(R);return(0,Me.H)([te,De]).pipe((0,Gn.U)())}return te})}static#e=this.\u0275fac=function(R){return new(R||v)(L.KVO(Kr),L.KVO(L.Ql9),L.KVO(L.uvJ),L.KVO(jn),L.KVO(N))};static#t=this.\u0275prov=L.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const _a=new L.nKC("");let Il=(()=>{class v{constructor(w,R,$,te,De={}){this.urlSerializer=w,this.transitions=R,this.viewportScroller=$,this.zone=te,this.options=De,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,L.WQX)(L.uvJ),De.scrollPositionRestoration||="disabled",De.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof di?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof Ei?(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment)):w instanceof Fo&&w.code===Rn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Rs&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,R){var $=this;this.zone.runOutsideAngular((0,_.A)(function*(){yield new Promise(te=>{setTimeout(()=>{te()}),(0,L.mal)(()=>{te()},{injector:$.environmentInjector})}),$.zone.run(()=>{$.transitions.events.next(new Rs(w,"popstate"===$.lastSource?$.store[$.restoredId]:null,R))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(R){L.QTQ()};static#t=this.\u0275prov=L.jDH({token:v,factory:v.\u0275fac})}return v})();function Is(v,P){return{\u0275kind:v,\u0275providers:P}}function ba(){const v=(0,L.WQX)(L.zZn);return P=>{const w=v.get(L.o8S);if(P!==w.components[0])return;const R=v.get(Kr),$=v.get(Sa);1===v.get(bi)&&R.initialNavigation(),v.get(Kc,null,L.$GK.Optional)?.setUpPreloading(),v.get(_a,null,L.$GK.Optional)?.init(),R.resetRootComponentType(w.componentTypes[0]),$.closed||($.next(),$.complete(),$.unsubscribe())}}const Sa=new L.nKC("",{factory:()=>new pn.B}),bi=new L.nKC("",{providedIn:"root",factory:()=>1}),Kc=new L.nKC("");function ta(v){return Is(0,[{provide:Kc,useExisting:Ho},{provide:jn,useExisting:v}])}function Qc(v){return Is(9,[{provide:Cr,useValue:Ur},{provide:dn,useValue:{skipNextTransition:!!v?.skipInitialTransition,...v}}])}const ki=new L.nKC("ROUTER_FORROOT_GUARD"),Mu=[Pn.aZ,{provide:xe,useClass:Te},Kr,fs,{provide:oi,useFactory:function nc(v){return v.routerState.root},deps:[Kr]},N,[]];let ja=(()=>{class v{constructor(w){}static forRoot(w,R){return{ngModule:v,providers:[Mu,[],{provide:H,multi:!0,useValue:w},{provide:ki,useFactory:Yh,deps:[[Kr,new L.Xx1,new L.kdw]]},{provide:S,useValue:R||{}},R?.useHash?{provide:Pn.hb,useClass:Pn.fw}:{provide:Pn.hb,useClass:Pn.Sm},{provide:_a,useFactory:()=>{const v=(0,L.WQX)(Pn.Xr),P=(0,L.WQX)(L.SKi),w=(0,L.WQX)(S),R=(0,L.WQX)(fr),$=(0,L.WQX)(xe);return w.scrollOffset&&v.setOffset(w.scrollOffset),new Il($,R,v,P,w)}},R?.preloadingStrategy?ta(R.preloadingStrategy).\u0275providers:[],R?.initialNavigation?wl(R):[],R?.bindToComponentInputs?Is(8,[Uo,{provide:$i,useExisting:Uo}]).\u0275providers:[],R?.enableViewTransitions?Qc().\u0275providers:[],[{provide:Ru,useFactory:ba},{provide:L.iLQ,multi:!0,useExisting:Ru}]]}}static forChild(w){return{ngModule:v,providers:[{provide:H,multi:!0,useValue:w}]}}static#e=this.\u0275fac=function(R){return new(R||v)(L.KVO(ki,8))};static#t=this.\u0275mod=L.$C({type:v});static#n=this.\u0275inj=L.G2t({})}return v})();function Yh(v){return"guarded"}function wl(v){return["disabled"===v.initialNavigation?Is(3,[{provide:L.hnV,multi:!0,useFactory:()=>{const P=(0,L.WQX)(Kr);return()=>{P.setUpLocationChangeListener()}}},{provide:bi,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?Is(2,[{provide:bi,useValue:0},{provide:L.hnV,multi:!0,deps:[L.zZn],useFactory:P=>{const w=P.get(Pn.hj,Promise.resolve());return()=>w.then(()=>new Promise(R=>{const $=P.get(Kr),te=P.get(Sa);gi($,()=>{R(!0)}),P.get(fr).afterPreactivation=()=>(R(!0),te.closed?(0,U.of)(void 0):te),$.initialNavigation()}))}}]).\u0275providers:[]]}const Ru=new L.nKC("")},3345:(en,Qe,k)=>{k.d(Qe,{A:()=>Fe});var _=k(1076),L=k(1362),M=k(7852),C=k(8041);class se{constructor(pt,Tt){this._delegate=pt,this.firebase=Tt,(0,M._addComponent)(pt,new L.uA("app-compat",()=>this,"PUBLIC")),this.container=pt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pt){this._delegate.automaticDataCollectionEnabled=pt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pt=>{this._delegate.checkDestroyed(),pt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,M.deleteApp)(this._delegate)))}_getService(pt,Tt=M._DEFAULT_ENTRY_NAME){var At;this._delegate.checkDestroyed();const mt=this._delegate.container.getProvider(pt);return!mt.isInitialized()&&"EXPLICIT"===(null===(At=mt.getComponent())||void 0===At?void 0:At.instantiationMode)&&mt.initialize(),mt.getImmediate({identifier:Tt})}_removeServiceInstance(pt,Tt=M._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pt).clearInstance(Tt)}_addComponent(pt){(0,M._addComponent)(this._delegate,pt)}_addOrOverwriteComponent(pt){(0,M._addOrOverwriteComponent)(this._delegate,pt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const U=new _.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ee=function $e(){const wt=function Le(wt){const pt={},Tt={__esModule:!0,initializeApp:function ce(qe,ze={}){const de=M.initializeApp(qe,ze);if((0,_.gR)(pt,de.name))return pt[de.name];const Ue=new wt(de,Tt);return pt[de.name]=Ue,Ue},app:mt,registerVersion:M.registerVersion,setLogLevel:M.setLogLevel,onLog:M.onLog,apps:null,SDK_VERSION:M.SDK_VERSION,INTERNAL:{registerComponent:function ue(qe){const ze=qe.name,de=ze.replace("-compat","");if(M._registerComponent(qe)&&"PUBLIC"===qe.type){const Ue=(Mt=mt())=>{if("function"!=typeof Mt[de])throw U.create("invalid-app-argument",{appName:ze});return Mt[de]()};void 0!==qe.serviceProps&&(0,_.zw)(Ue,qe.serviceProps),Tt[de]=Ue,wt.prototype[de]=function(...Mt){return this._getService.bind(this,ze).apply(this,qe.multipleInstances?Mt:[])}}return"PUBLIC"===qe.type?Tt[de]:null},removeApp:function At(qe){delete pt[qe]},useAsService:function Ce(qe,ze){return"serverAuth"===ze?null:ze},modularAPIs:M}};function mt(qe){if(!(0,_.gR)(pt,qe=qe||M._DEFAULT_ENTRY_NAME))throw U.create("no-app",{appName:qe});return pt[qe]}return Tt.default=Tt,Object.defineProperty(Tt,"apps",{get:function ie(){return Object.keys(pt).map(qe=>pt[qe])}}),mt.App=wt,Tt}(se);return wt.INTERNAL=Object.assign(Object.assign({},wt.INTERNAL),{createFirebaseNamespace:$e,extendNamespace:function pt(Tt){(0,_.zw)(wt,Tt)},createSubscribe:_.tD,ErrorFactory:_.FA,deepExtend:_.zw}),wt}(),ye=new C.Vy("@firebase/app-compat");try{const wt=(0,_.mS)();if(void 0!==wt.firebase){ye.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const pt=wt.firebase.SDK_VERSION;pt&&pt.indexOf("LITE")>=0&&ye.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Fe=Ee;!function Ae(wt){(0,M.registerVersion)("@firebase/app-compat","0.2.40",wt)}()},7852:(en,Qe,k)=>{k.r(Qe),k.d(Qe,{FirebaseError:()=>C.g,SDK_VERSION:()=>Mn,_DEFAULT_ENTRY_NAME:()=>Zn,_addComponent:()=>Hr,_addOrOverwriteComponent:()=>Li,_apps:()=>An,_clearComponents:()=>Un,_components:()=>qr,_getProvider:()=>hs,_isFirebaseApp:()=>Ui,_isFirebaseServerApp:()=>Ht,_registerComponent:()=>Rr,_removeServiceInstance:()=>Nn,_serverApps:()=>kr,deleteApp:()=>Ke,getApp:()=>Te,getApps:()=>we,initializeApp:()=>Nr,initializeServerApp:()=>xe,onLog:()=>Q,registerVersion:()=>ge,setLogLevel:()=>Z});var _=k(467),L=k(1362),M=k(8041),C=k(1076);const se=(_t,Je)=>Je.some(kt=>_t instanceof kt);let Me,U;const Ee=new WeakMap,ye=new WeakMap,He=new WeakMap,Ct=new WeakMap,Ae=new WeakMap;let pt={get(_t,Je,kt){if(_t instanceof IDBTransaction){if("done"===Je)return ye.get(_t);if("objectStoreNames"===Je)return _t.objectStoreNames||He.get(_t);if("store"===Je)return kt.objectStoreNames[1]?void 0:kt.objectStore(kt.objectStoreNames[0])}return ce(_t[Je])},set:(_t,Je,kt)=>(_t[Je]=kt,!0),has:(_t,Je)=>_t instanceof IDBTransaction&&("done"===Je||"store"===Je)||Je in _t};function mt(_t){return"function"==typeof _t?function At(_t){return _t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function $e(){return U||(U=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(_t)?function(...Je){return _t.apply(ie(this),Je),ce(Ee.get(this))}:function(...Je){return ce(_t.apply(ie(this),Je))}:function(Je,...kt){const sn=_t.call(ie(this),Je,...kt);return He.set(sn,Je.sort?Je.sort():[Je]),ce(sn)}}(_t):(_t instanceof IDBTransaction&&function wt(_t){if(ye.has(_t))return;const Je=new Promise((kt,sn)=>{const ne=()=>{_t.removeEventListener("complete",ve),_t.removeEventListener("error",Ie),_t.removeEventListener("abort",Ie)},ve=()=>{kt(),ne()},Ie=()=>{sn(_t.error||new DOMException("AbortError","AbortError")),ne()};_t.addEventListener("complete",ve),_t.addEventListener("error",Ie),_t.addEventListener("abort",Ie)});ye.set(_t,Je)}(_t),se(_t,function Le(){return Me||(Me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(_t,pt):_t)}function ce(_t){if(_t instanceof IDBRequest)return function Fe(_t){const Je=new Promise((kt,sn)=>{const ne=()=>{_t.removeEventListener("success",ve),_t.removeEventListener("error",Ie)},ve=()=>{kt(ce(_t.result)),ne()},Ie=()=>{sn(_t.error),ne()};_t.addEventListener("success",ve),_t.addEventListener("error",Ie)});return Je.then(kt=>{kt instanceof IDBCursor&&Ee.set(kt,_t)}).catch(()=>{}),Ae.set(Je,_t),Je}(_t);if(Ct.has(_t))return Ct.get(_t);const Je=mt(_t);return Je!==_t&&(Ct.set(_t,Je),Ae.set(Je,_t)),Je}const ie=_t=>Ae.get(_t),qe=["get","getKey","getAll","getAllKeys","count"],ze=["put","add","delete","clear"],de=new Map;function Ue(_t,Je){if(!(_t instanceof IDBDatabase)||Je in _t||"string"!=typeof Je)return;if(de.get(Je))return de.get(Je);const kt=Je.replace(/FromIndex$/,""),sn=Je!==kt,ne=ze.includes(kt);if(!(kt in(sn?IDBIndex:IDBObjectStore).prototype)||!ne&&!qe.includes(kt))return;const ve=function(){var Ie=(0,_.A)(function*(at,...Ye){const qt=this.transaction(at,ne?"readwrite":"readonly");let Bt=qt.store;return sn&&(Bt=Bt.index(Ye.shift())),(yield Promise.all([Bt[kt](...Ye),ne&&qt.done]))[0]});return function(Ye){return Ie.apply(this,arguments)}}();return de.set(Je,ve),ve}!function Tt(_t){pt=_t(pt)}(_t=>({..._t,get:(Je,kt,sn)=>Ue(Je,kt)||_t.get(Je,kt,sn),has:(Je,kt)=>!!Ue(Je,kt)||_t.has(Je,kt)}));class Mt{constructor(Je){this.container=Je}getPlatformInfoString(){return this.container.getProviders().map(kt=>{if(function pn(_t){const Je=_t.getComponent();return"VERSION"===Je?.type}(kt)){const sn=kt.getImmediate();return`${sn.library}/${sn.version}`}return null}).filter(kt=>kt).join(" ")}}const Pn="@firebase/app",Fn="0.10.10",On=new M.Vy("@firebase/app"),Zn="[DEFAULT]",wn={[Pn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},An=new Map,kr=new Map,qr=new Map;function Hr(_t,Je){try{_t.container.addComponent(Je)}catch(kt){On.debug(`Component ${Je.name} failed to register with FirebaseApp ${_t.name}`,kt)}}function Li(_t,Je){_t.container.addOrOverwriteComponent(Je)}function Rr(_t){const Je=_t.name;if(qr.has(Je))return On.debug(`There were multiple attempts to register component ${Je}.`),!1;qr.set(Je,_t);for(const kt of An.values())Hr(kt,_t);for(const kt of kr.values())Hr(kt,_t);return!0}function hs(_t,Je){const kt=_t.container.getProvider("heartbeat").getImmediate({optional:!0});return kt&&kt.triggerHeartbeat(),_t.container.getProvider(Je)}function Nn(_t,Je,kt=Zn){hs(_t,Je).clearInstance(kt)}function Ui(_t){return void 0!==_t.options}function Ht(_t){return void 0!==_t.settings}function Un(){qr.clear()}const Xt=new C.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Yt{constructor(Je,kt,sn){this._isDeleted=!1,this._options=Object.assign({},Je),this._config=Object.assign({},kt),this._name=kt.name,this._automaticDataCollectionEnabled=kt.automaticDataCollectionEnabled,this._container=sn,this.container.addComponent(new L.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Je){this.checkDestroyed(),this._automaticDataCollectionEnabled=Je}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Je){this._isDeleted=Je}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}}class Qr extends Yt{constructor(Je,kt,sn,ne){const ve=void 0!==kt.automaticDataCollectionEnabled&&kt.automaticDataCollectionEnabled,Ie={name:sn,automaticDataCollectionEnabled:ve};super(void 0!==Je.apiKey?Je:Je.options,Ie,ne),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ve},kt),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,kt.releaseOnDeref=void 0,ge(Pn,Fn,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Je){this.isDeleted||(this._refCount++,void 0!==Je&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Je,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ke(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Xt.create("server-app-deleted")}}const Mn="10.13.1";function Nr(_t,Je={}){let kt=_t;"object"!=typeof Je&&(Je={name:Je});const sn=Object.assign({name:Zn,automaticDataCollectionEnabled:!1},Je),ne=sn.name;if("string"!=typeof ne||!ne)throw Xt.create("bad-app-name",{appName:String(ne)});if(kt||(kt=(0,C.T9)()),!kt)throw Xt.create("no-options");const ve=An.get(ne);if(ve){if((0,C.bD)(kt,ve.options)&&(0,C.bD)(sn,ve.config))return ve;throw Xt.create("duplicate-app",{appName:ne})}const Ie=new L.h1(ne);for(const Ye of qr.values())Ie.addComponent(Ye);const at=new Yt(kt,sn,Ie);return An.set(ne,at),at}function xe(_t,Je){if((0,C.Bd)()&&!(0,C.p7)())throw Xt.create("invalid-server-app-environment");let kt;void 0===Je.automaticDataCollectionEnabled&&(Je.automaticDataCollectionEnabled=!1),kt=Ui(_t)?_t.options:_t;const sn=Object.assign(Object.assign({},Je),kt);if(void 0!==sn.releaseOnDeref&&delete sn.releaseOnDeref,void 0!==Je.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Xt.create("finalization-registry-not-supported",{});const ve=""+(qt=JSON.stringify(sn),[...qt].reduce((Bt,Sn)=>Math.imul(31,Bt)+Sn.charCodeAt(0)|0,0)),Ie=kr.get(ve);var qt;if(Ie)return Ie.incRefCount(Je.releaseOnDeref),Ie;const at=new L.h1(ve);for(const qt of qr.values())at.addComponent(qt);const Ye=new Qr(kt,Je,ve,at);return kr.set(ve,Ye),Ye}function Te(_t=Zn){const Je=An.get(_t);if(!Je&&_t===Zn&&(0,C.T9)())return Nr();if(!Je)throw Xt.create("no-app",{appName:_t});return Je}function we(){return Array.from(An.values())}function Ke(_t){return St.apply(this,arguments)}function St(){return(St=(0,_.A)(function*(_t){let Je=!1;const kt=_t.name;An.has(kt)?(Je=!0,An.delete(kt)):kr.has(kt)&&_t.decRefCount()<=0&&(kr.delete(kt),Je=!0),Je&&(yield Promise.all(_t.container.getProviders().map(sn=>sn.delete())),_t.isDeleted=!0)})).apply(this,arguments)}function ge(_t,Je,kt){var sn;let ne=null!==(sn=wn[_t])&&void 0!==sn?sn:_t;kt&&(ne+=`-${kt}`);const ve=ne.match(/\s|\//),Ie=Je.match(/\s|\//);if(ve||Ie){const at=[`Unable to register library "${ne}" with version "${Je}":`];return ve&&at.push(`library name "${ne}" contains illegal characters (whitespace or "/")`),ve&&Ie&&at.push("and"),Ie&&at.push(`version name "${Je}" contains illegal characters (whitespace or "/")`),void On.warn(at.join(" "))}Rr(new L.uA(`${ne}-version`,()=>({library:ne,version:Je}),"VERSION"))}function Q(_t,Je){if(null!==_t&&"function"!=typeof _t)throw Xt.create("invalid-log-argument");(0,M.Ey)(_t,Je)}function Z(_t){(0,M.He)(_t)}const oe="firebase-heartbeat-database",me=1,Et="firebase-heartbeat-store";let Lt=null;function mn(){return Lt||(Lt=function ue(_t,Je,{blocked:kt,upgrade:sn,blocking:ne,terminated:ve}={}){const Ie=indexedDB.open(_t,Je),at=ce(Ie);return sn&&Ie.addEventListener("upgradeneeded",Ye=>{sn(ce(Ie.result),Ye.oldVersion,Ye.newVersion,ce(Ie.transaction),Ye)}),kt&&Ie.addEventListener("blocked",Ye=>kt(Ye.oldVersion,Ye.newVersion,Ye)),at.then(Ye=>{ve&&Ye.addEventListener("close",()=>ve()),ne&&Ye.addEventListener("versionchange",qt=>ne(qt.oldVersion,qt.newVersion,qt))}).catch(()=>{}),at}(oe,me,{upgrade:(_t,Je)=>{if(0===Je)try{_t.createObjectStore(Et)}catch(kt){console.warn(kt)}}}).catch(_t=>{throw Xt.create("idb-open",{originalErrorMessage:_t.message})})),Lt}function zn(){return(zn=(0,_.A)(function*(_t){try{const kt=(yield mn()).transaction(Et),sn=yield kt.objectStore(Et).get(Oe(_t));return yield kt.done,sn}catch(Je){if(Je instanceof C.g)On.warn(Je.message);else{const kt=Xt.create("idb-get",{originalErrorMessage:Je?.message});On.warn(kt.message)}}})).apply(this,arguments)}function bn(_t,Je){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,_.A)(function*(_t,Je){try{const sn=(yield mn()).transaction(Et,"readwrite");yield sn.objectStore(Et).put(Je,Oe(_t)),yield sn.done}catch(kt){if(kt instanceof C.g)On.warn(kt.message);else{const sn=Xt.create("idb-set",{originalErrorMessage:kt?.message});On.warn(sn.message)}}})).apply(this,arguments)}function Oe(_t){return`${_t.name}!${_t.options.appId}`}class Ms{constructor(Je){this.container=Je,this._heartbeatsCache=null;const kt=this.container.getProvider("app").getImmediate();this._storage=new is(kt),this._heartbeatsCachePromise=this._storage.read().then(sn=>(this._heartbeatsCache=sn,sn))}triggerHeartbeat(){var Je=this;return(0,_.A)(function*(){var kt,sn;try{const ve=Je.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ie=cs();return null==(null===(kt=Je._heartbeatsCache)||void 0===kt?void 0:kt.heartbeats)&&(Je._heartbeatsCache=yield Je._heartbeatsCachePromise,null==(null===(sn=Je._heartbeatsCache)||void 0===sn?void 0:sn.heartbeats))||Je._heartbeatsCache.lastSentHeartbeatDate===Ie||Je._heartbeatsCache.heartbeats.some(at=>at.date===Ie)?void 0:(Je._heartbeatsCache.heartbeats.push({date:Ie,agent:ve}),Je._heartbeatsCache.heartbeats=Je._heartbeatsCache.heartbeats.filter(at=>{const Ye=new Date(at.date).valueOf();return Date.now()-Ye<=2592e6}),Je._storage.overwrite(Je._heartbeatsCache))}catch(ne){On.warn(ne)}})()}getHeartbeatsHeader(){var Je=this;return(0,_.A)(function*(){var kt;try{if(null===Je._heartbeatsCache&&(yield Je._heartbeatsCachePromise),null==(null===(kt=Je._heartbeatsCache)||void 0===kt?void 0:kt.heartbeats)||0===Je._heartbeatsCache.heartbeats.length)return"";const sn=cs(),{heartbeatsToSend:ne,unsentEntries:ve}=function ir(_t,Je=1024){const kt=[];let sn=_t.slice();for(const ne of _t){const ve=kt.find(Ie=>Ie.agent===ne.agent);if(ve){if(ve.dates.push(ne.date),Gi(kt)>Je){ve.dates.pop();break}}else if(kt.push({agent:ne.agent,dates:[ne.date]}),Gi(kt)>Je){kt.pop();break}sn=sn.slice(1)}return{heartbeatsToSend:kt,unsentEntries:sn}}(Je._heartbeatsCache.heartbeats),Ie=(0,C.Uj)(JSON.stringify({version:2,heartbeats:ne}));return Je._heartbeatsCache.lastSentHeartbeatDate=sn,ve.length>0?(Je._heartbeatsCache.heartbeats=ve,yield Je._storage.overwrite(Je._heartbeatsCache)):(Je._heartbeatsCache.heartbeats=[],Je._storage.overwrite(Je._heartbeatsCache)),Ie}catch(sn){return On.warn(sn),""}})()}}function cs(){return(new Date).toISOString().substring(0,10)}class is{constructor(Je){this.app=Je,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.A)(function*(){return!!(0,C.zW)()&&(0,C.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Je=this;return(0,_.A)(function*(){if(yield Je._canUseIndexedDBPromise){const sn=yield function Bn(_t){return zn.apply(this,arguments)}(Je.app);return sn?.heartbeats?sn:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Je){var kt=this;return(0,_.A)(function*(){var sn;if(yield kt._canUseIndexedDBPromise){const ve=yield kt.read();return bn(kt.app,{lastSentHeartbeatDate:null!==(sn=Je.lastSentHeartbeatDate)&&void 0!==sn?sn:ve.lastSentHeartbeatDate,heartbeats:Je.heartbeats})}})()}add(Je){var kt=this;return(0,_.A)(function*(){var sn;if(yield kt._canUseIndexedDBPromise){const ve=yield kt.read();return bn(kt.app,{lastSentHeartbeatDate:null!==(sn=Je.lastSentHeartbeatDate)&&void 0!==sn?sn:ve.lastSentHeartbeatDate,heartbeats:[...ve.heartbeats,...Je.heartbeats]})}})()}}function Gi(_t){return(0,C.Uj)(JSON.stringify({version:2,heartbeats:_t})).length}!function ri(_t){Rr(new L.uA("platform-logger",Je=>new Mt(Je),"PRIVATE")),Rr(new L.uA("heartbeat",Je=>new Ms(Je),"PRIVATE")),ge(Pn,Fn,_t),ge(Pn,Fn,"esm2017"),ge("fire-js","")}("")},1362:(en,Qe,k)=>{k.d(Qe,{h1:()=>Le,uA:()=>M});var _=k(467),L=k(1076);class M{constructor(Ee,ye,He){this.name=Ee,this.instanceFactory=ye,this.type=He,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ee){return this.instantiationMode=Ee,this}setMultipleInstances(Ee){return this.multipleInstances=Ee,this}setServiceProps(Ee){return this.serviceProps=Ee,this}setInstanceCreatedCallback(Ee){return this.onInstanceCreated=Ee,this}}const C="[DEFAULT]";class se{constructor(Ee,ye){this.name=Ee,this.container=ye,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ee){const ye=this.normalizeInstanceIdentifier(Ee);if(!this.instancesDeferred.has(ye)){const He=new L.cY;if(this.instancesDeferred.set(ye,He),this.isInitialized(ye)||this.shouldAutoInitialize())try{const Ct=this.getOrInitializeService({instanceIdentifier:ye});Ct&&He.resolve(Ct)}catch{}}return this.instancesDeferred.get(ye).promise}getImmediate(Ee){var ye;const He=this.normalizeInstanceIdentifier(Ee?.identifier),Ct=null!==(ye=Ee?.optional)&&void 0!==ye&&ye;if(!this.isInitialized(He)&&!this.shouldAutoInitialize()){if(Ct)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:He})}catch(Ae){if(Ct)return null;throw Ae}}getComponent(){return this.component}setComponent(Ee){if(Ee.name!==this.name)throw Error(`Mismatching Component ${Ee.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ee,this.shouldAutoInitialize()){if(function U($e){return"EAGER"===$e.instantiationMode}(Ee))try{this.getOrInitializeService({instanceIdentifier:C})}catch{}for(const[ye,He]of this.instancesDeferred.entries()){const Ct=this.normalizeInstanceIdentifier(ye);try{const Ae=this.getOrInitializeService({instanceIdentifier:Ct});He.resolve(Ae)}catch{}}}}clearInstance(Ee=C){this.instancesDeferred.delete(Ee),this.instancesOptions.delete(Ee),this.instances.delete(Ee)}delete(){var Ee=this;return(0,_.A)(function*(){const ye=Array.from(Ee.instances.values());yield Promise.all([...ye.filter(He=>"INTERNAL"in He).map(He=>He.INTERNAL.delete()),...ye.filter(He=>"_delete"in He).map(He=>He._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ee=C){return this.instances.has(Ee)}getOptions(Ee=C){return this.instancesOptions.get(Ee)||{}}initialize(Ee={}){const{options:ye={}}=Ee,He=this.normalizeInstanceIdentifier(Ee.instanceIdentifier);if(this.isInitialized(He))throw Error(`${this.name}(${He}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ct=this.getOrInitializeService({instanceIdentifier:He,options:ye});for(const[Ae,Fe]of this.instancesDeferred.entries())He===this.normalizeInstanceIdentifier(Ae)&&Fe.resolve(Ct);return Ct}onInit(Ee,ye){var He;const Ct=this.normalizeInstanceIdentifier(ye),Ae=null!==(He=this.onInitCallbacks.get(Ct))&&void 0!==He?He:new Set;Ae.add(Ee),this.onInitCallbacks.set(Ct,Ae);const Fe=this.instances.get(Ct);return Fe&&Ee(Fe,Ct),()=>{Ae.delete(Ee)}}invokeOnInitCallbacks(Ee,ye){const He=this.onInitCallbacks.get(ye);if(He)for(const Ct of He)try{Ct(Ee,ye)}catch{}}getOrInitializeService({instanceIdentifier:Ee,options:ye={}}){let He=this.instances.get(Ee);if(!He&&this.component&&(He=this.component.instanceFactory(this.container,{instanceIdentifier:($e=Ee,$e===C?void 0:$e),options:ye}),this.instances.set(Ee,He),this.instancesOptions.set(Ee,ye),this.invokeOnInitCallbacks(He,Ee),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ee,He)}catch{}var $e;return He||null}normalizeInstanceIdentifier(Ee=C){return this.component?this.component.multipleInstances?Ee:C:Ee}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Le{constructor(Ee){this.name=Ee,this.providers=new Map}addComponent(Ee){const ye=this.getProvider(Ee.name);if(ye.isComponentSet())throw new Error(`Component ${Ee.name} has already been registered with ${this.name}`);ye.setComponent(Ee)}addOrOverwriteComponent(Ee){this.getProvider(Ee.name).isComponentSet()&&this.providers.delete(Ee.name),this.addComponent(Ee)}getProvider(Ee){if(this.providers.has(Ee))return this.providers.get(Ee);const ye=new se(Ee,this);return this.providers.set(Ee,ye),ye}getProviders(){return Array.from(this.providers.values())}}},8041:(en,Qe,k)=>{k.d(Qe,{$b:()=>L,Ey:()=>$e,He:()=>Le,Vy:()=>U});const _=[];var L=function(Ee){return Ee[Ee.DEBUG=0]="DEBUG",Ee[Ee.VERBOSE=1]="VERBOSE",Ee[Ee.INFO=2]="INFO",Ee[Ee.WARN=3]="WARN",Ee[Ee.ERROR=4]="ERROR",Ee[Ee.SILENT=5]="SILENT",Ee}(L||{});const M={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},C=L.INFO,se={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},Me=(Ee,ye,...He)=>{if(ye<Ee.logLevel)return;const Ct=(new Date).toISOString(),Ae=se[ye];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${ye})`);console[Ae](`[${Ct}]  ${Ee.name}:`,...He)};class U{constructor(ye){this.name=ye,this._logLevel=C,this._logHandler=Me,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(ye){if(!(ye in L))throw new TypeError(`Invalid value "${ye}" assigned to \`logLevel\``);this._logLevel=ye}setLogLevel(ye){this._logLevel="string"==typeof ye?M[ye]:ye}get logHandler(){return this._logHandler}set logHandler(ye){if("function"!=typeof ye)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ye}get userLogHandler(){return this._userLogHandler}set userLogHandler(ye){this._userLogHandler=ye}debug(...ye){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...ye),this._logHandler(this,L.DEBUG,...ye)}log(...ye){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...ye),this._logHandler(this,L.VERBOSE,...ye)}info(...ye){this._userLogHandler&&this._userLogHandler(this,L.INFO,...ye),this._logHandler(this,L.INFO,...ye)}warn(...ye){this._userLogHandler&&this._userLogHandler(this,L.WARN,...ye),this._logHandler(this,L.WARN,...ye)}error(...ye){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...ye),this._logHandler(this,L.ERROR,...ye)}}function Le(Ee){_.forEach(ye=>{ye.setLogLevel(Ee)})}function $e(Ee,ye){for(const He of _){let Ct=null;ye&&ye.level&&(Ct=M[ye.level]),He.userLogHandler=null===Ee?null:(Ae,Fe,...wt)=>{const pt=wt.map(Tt=>{if(null==Tt)return null;if("string"==typeof Tt)return Tt;if("number"==typeof Tt||"boolean"==typeof Tt)return Tt.toString();if(Tt instanceof Error)return Tt.message;try{return JSON.stringify(Tt)}catch{return null}}).filter(Tt=>Tt).join(" ");Fe>=(Ct??Ae.logLevel)&&Ee({level:L[Fe].toLowerCase(),message:pt,args:wt,type:Ae.name})}}}},7231:(en,Qe,k)=>{k.d(Qe,{HF:()=>_.X});var _=k(576);k(7852),k(1076),k(8041),k(1362)},7935:(en,Qe,k)=>{k.d(Qe,{A:()=>_.A});var _=k(3345);_.A.registerVersion("firebase","10.13.1","app-compat")},2438:(en,Qe,k)=>{var _=k(467),L=k(3345),M=k(576),C=k(1076),U=(k(7852),k(8041),k(1362));function Le(){return window}function ye(){return ye=(0,_.A)(function*(Q,Z,oe){var me;const{BuildInfo:Et}=Le();(0,M.au)(Z.sessionId,"AuthEvent did not contain a session ID");const Lt=yield function Tt(Q){return At.apply(this,arguments)}(Z.sessionId),mn={};return(0,M.av)()?mn.ibi=Et.packageName:(0,M.aw)()?mn.apn=Et.packageName:(0,M.ax)(Q,"operation-not-supported-in-this-environment"),Et.displayName&&(mn.appDisplayName=Et.displayName),mn.sessionId=Lt,(0,M.ay)(Q,oe,Z.type,void 0,null!==(me=Z.eventId)&&void 0!==me?me:void 0,mn)}),ye.apply(this,arguments)}function Ct(){return(Ct=(0,_.A)(function*(Q){const{BuildInfo:Z}=Le(),oe={};(0,M.av)()?oe.iosBundleId=Z.packageName:(0,M.aw)()?oe.androidPackageName=Z.packageName:(0,M.ax)(Q,"operation-not-supported-in-this-environment"),yield(0,M.az)(Q,oe)})).apply(this,arguments)}function wt(){return(wt=(0,_.A)(function*(Q,Z,oe){const{cordova:me}=Le();let Et=()=>{};try{yield new Promise((Lt,mn)=>{let Bn=null;function zn(){var Oe;Lt();const Gr=null===(Oe=me.plugins.browsertab)||void 0===Oe?void 0:Oe.close;"function"==typeof Gr&&Gr(),"function"==typeof oe?.close&&oe.close()}function bn(){Bn||(Bn=window.setTimeout(()=>{mn((0,M.aB)(Q,"redirect-cancelled-by-user"))},2e3))}function Gt(){"visible"===document?.visibilityState&&bn()}Z.addPassiveListener(zn),document.addEventListener("resume",bn,!1),(0,M.aw)()&&document.addEventListener("visibilitychange",Gt,!1),Et=()=>{Z.removePassiveListener(zn),document.removeEventListener("resume",bn,!1),document.removeEventListener("visibilitychange",Gt,!1),Bn&&window.clearTimeout(Bn)}})}finally{Et()}})).apply(this,arguments)}function At(){return(At=(0,_.A)(function*(Q){const Z=function mt(Q){if((0,M.au)(/[0-9a-zA-Z]+/.test(Q),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Q);const Z=new ArrayBuffer(Q.length),oe=new Uint8Array(Z);for(let me=0;me<Q.length;me++)oe[me]=Q.charCodeAt(me);return oe}(Q),oe=yield crypto.subtle.digest("SHA-256",Z);return Array.from(new Uint8Array(oe)).map(Et=>Et.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ie extends M.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Z=>{this.resolveInitialized=Z})}addPassiveListener(Z){this.passiveListeners.add(Z)}removePassiveListener(Z){this.passiveListeners.delete(Z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Z){return this.resolveInitialized(),this.passiveListeners.forEach(oe=>oe(Z)),super.onEvent(Z)}initialized(){var Z=this;return(0,_.A)(function*(){yield Z.initPromise})()}}function qe(Q){return ze.apply(this,arguments)}function ze(){return(ze=(0,_.A)(function*(Q){const Z=yield Mt()._get(pn(Q));return Z&&(yield Mt()._remove(pn(Q))),Z})).apply(this,arguments)}function Ue(){const Q=[];for(let oe=0;oe<20;oe++){const me=Math.floor(62*Math.random());Q.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(me))}return Q.join("")}function Mt(){return(0,M.aE)(M.b)}function pn(Q){return(0,M.aF)("authEvent",Q.config.apiKey,Q.name)}function On(Q){if(!Q?.includes("?"))return{};const[Z,...oe]=Q.split("?");return(0,C.I9)(oe.join("?"))}const ke=class Tn{constructor(){this._redirectPersistence=M.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=M.aG,this._overrideRedirectResult=M.aH}_initialize(Z){var oe=this;return(0,_.A)(function*(){const me=Z._key();let Et=oe.eventManagers.get(me);return Et||(Et=new ie(Z),oe.eventManagers.set(me,Et),oe.attachCallbackListeners(Z,Et)),Et})()}_openPopup(Z){(0,M.ax)(Z,"operation-not-supported-in-this-environment")}_openRedirect(Z,oe,me,Et){var Lt=this;return(0,_.A)(function*(){!function pt(Q){var Z,oe,me,Et,Lt,mn,Bn,zn,bn,Gt;const Oe=Le();(0,M.aC)("function"==typeof(null===(Z=Oe?.universalLinks)||void 0===Z?void 0:Z.subscribe),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,M.aC)(typeof(null===(oe=Oe?.BuildInfo)||void 0===oe?void 0:oe.packageName)<"u",Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,M.aC)("function"==typeof(null===(Lt=null===(Et=null===(me=Oe?.cordova)||void 0===me?void 0:me.plugins)||void 0===Et?void 0:Et.browsertab)||void 0===Lt?void 0:Lt.openUrl),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aC)("function"==typeof(null===(zn=null===(Bn=null===(mn=Oe?.cordova)||void 0===mn?void 0:mn.plugins)||void 0===Bn?void 0:Bn.browsertab)||void 0===zn?void 0:zn.isAvailable),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,M.aC)("function"==typeof(null===(Gt=null===(bn=Oe?.cordova)||void 0===bn?void 0:bn.InAppBrowser)||void 0===Gt?void 0:Gt.open),Q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Z);const mn=yield Lt._initialize(Z);yield mn.initialized(),mn.resetRedirect(),(0,M.aI)(),yield Lt._originValidation(Z);const Bn=function ue(Q,Z,oe=null){return{type:Z,eventId:oe,urlResponse:null,sessionId:Ue(),postBody:null,tenantId:Q.tenantId,error:(0,M.aB)(Q,"no-auth-event")}}(Z,me,Et);yield function Ce(Q,Z){return Mt()._set(pn(Q),Z)}(Z,Bn);const zn=yield function Ee(Q,Z,oe){return ye.apply(this,arguments)}(Z,Bn,oe),bn=yield function Ae(Q){const{cordova:Z}=Le();return new Promise(oe=>{Z.plugins.browsertab.isAvailable(me=>{let Et=null;me?Z.plugins.browsertab.openUrl(Q):Et=Z.InAppBrowser.open(Q,(0,M.aA)()?"_blank":"_system","location=yes"),oe(Et)})})}(zn);return function Fe(Q,Z,oe){return wt.apply(this,arguments)}(Z,mn,bn)})()}_isIframeWebStorageSupported(Z,oe){throw new Error("Method not implemented.")}_originValidation(Z){const oe=Z._key();return this.originValidationPromises[oe]||(this.originValidationPromises[oe]=function He(Q){return Ct.apply(this,arguments)}(Z)),this.originValidationPromises[oe]}attachCallbackListeners(Z,oe){const{universalLinks:me,handleOpenURL:Et,BuildInfo:Lt}=Le(),mn=setTimeout((0,_.A)(function*(){yield qe(Z),oe.onEvent(Xe())}),500),Bn=function(){var Gt=(0,_.A)(function*(Oe){clearTimeout(mn);const Gr=yield qe(Z);let Yr=null;Gr&&Oe?.url&&(Yr=function de(Q,Z){var oe,me;const Et=function Fn(Q){const Z=On(Q),oe=Z.link?decodeURIComponent(Z.link):void 0,me=On(oe).link,Et=Z.deep_link_id?decodeURIComponent(Z.deep_link_id):void 0;return On(Et).link||Et||me||oe||Q}(Z);if(Et.includes("/__/auth/callback")){const Lt=On(Et),mn=Lt.firebaseError?function Pn(Q){try{return JSON.parse(Q)}catch{return null}}(decodeURIComponent(Lt.firebaseError)):null,Bn=null===(me=null===(oe=mn?.code)||void 0===oe?void 0:oe.split("auth/"))||void 0===me?void 0:me[1],zn=Bn?(0,M.aB)(Bn):null;return zn?{type:Q.type,eventId:Q.eventId,tenantId:Q.tenantId,error:zn,urlResponse:null,sessionId:null,postBody:null}:{type:Q.type,eventId:Q.eventId,tenantId:Q.tenantId,sessionId:Q.sessionId,urlResponse:Et,postBody:null}}return null}(Gr,Oe.url)),oe.onEvent(Yr||Xe())});return function(Gr){return Gt.apply(this,arguments)}}();typeof me<"u"&&"function"==typeof me.subscribe&&me.subscribe(null,Bn);const zn=Et,bn=`${Lt.packageName.toLowerCase()}://`;Le().handleOpenURL=function(){var Gt=(0,_.A)(function*(Oe){if(Oe.toLowerCase().startsWith(bn)&&Bn({url:Oe}),"function"==typeof zn)try{zn(Oe)}catch(Gr){console.error(Gr)}});return function(Oe){return Gt.apply(this,arguments)}}()}};function Xe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,M.aB)("no-auth-event")}}function zt(){var Q;return(null===(Q=self?.location)||void 0===Q?void 0:Q.protocol)||null}function Zt(Q=(0,C.ZQ)()){return!("file:"!==zt()&&"ionic:"!==zt()&&"capacitor:"!==zt()||!Q.toLowerCase().match(/iphone|ipad|ipod|android/))}function rt(){try{const Q=self.localStorage,Z=M.aN();if(Q)return Q.setItem(Z,"1"),Q.removeItem(Z),!function Ln(Q=(0,C.ZQ)()){return function vn(){return(0,C.lT)()&&11===document?.documentMode}()||function Cn(Q=(0,C.ZQ)()){return/Edge\/\d+/.test(Q)}(Q)}()||(0,C.zW)()}catch{return yn()&&(0,C.zW)()}return!1}function yn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gn(){return(function ln(){return"http:"===zt()||"https:"===zt()}()||(0,C.sr)()||Zt())&&!function tn(){return(0,C.lV)()||(0,C.Ll)()}()&&rt()&&!yn()}function rr(){return Zt()&&typeof document<"u"}function ft(){return(ft=(0,_.A)(function*(){return!!rr()&&new Promise(Q=>{const Z=setTimeout(()=>{Q(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Z),Q(!0)})})})).apply(this,arguments)}const Nt={LOCAL:"local",NONE:"none",SESSION:"session"},tt=M.aC,Rt="persistence";function Zn(Q){return wn.apply(this,arguments)}function wn(){return(wn=(0,_.A)(function*(Q){yield Q._initializationPromise;const Z=kr(),oe=M.aF(Rt,Q.config.apiKey,Q.name);Z&&Z.setItem(oe,Q._getPersistence())})).apply(this,arguments)}function kr(){var Q;try{return(null===(Q=function ti(){return typeof window<"u"?window:null}())||void 0===Q?void 0:Q.sessionStorage)||null}catch{return null}}const qr=M.aC;class Hr{constructor(){this.browserResolver=M.aE(M.k),this.cordovaResolver=M.aE(ke),this.underlyingResolver=null,this._redirectPersistence=M.a,this._completeRedirectFn=M.aG,this._overrideRedirectResult=M.aH}_initialize(Z){var oe=this;return(0,_.A)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._initialize(Z)})()}_openPopup(Z,oe,me,Et){var Lt=this;return(0,_.A)(function*(){return yield Lt.selectUnderlyingResolver(),Lt.assertedUnderlyingResolver._openPopup(Z,oe,me,Et)})()}_openRedirect(Z,oe,me,Et){var Lt=this;return(0,_.A)(function*(){return yield Lt.selectUnderlyingResolver(),Lt.assertedUnderlyingResolver._openRedirect(Z,oe,me,Et)})()}_isIframeWebStorageSupported(Z,oe){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Z,oe)}_originValidation(Z){return this.assertedUnderlyingResolver._originValidation(Z)}get _shouldInitProactively(){return rr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Z=this;return(0,_.A)(function*(){if(Z.underlyingResolver)return;const oe=yield function bt(){return ft.apply(this,arguments)}();Z.underlyingResolver=oe?Z.cordovaResolver:Z.browserResolver})()}}function Li(Q){return Q.unwrap()}function hs(Q){return Ui(Q)}function Ui(Q){const{_tokenResponse:Z}=Q instanceof C.g?Q.customData:Q;if(!Z)return null;if(!(Q instanceof C.g)&&"temporaryProof"in Z&&"phoneNumber"in Z)return M.P.credentialFromResult(Q);const oe=Z.providerId;if(!oe||oe===M.p.PASSWORD)return null;let me;switch(oe){case M.p.GOOGLE:me=M.X;break;case M.p.FACEBOOK:me=M.W;break;case M.p.GITHUB:me=M.Y;break;case M.p.TWITTER:me=M.$;break;default:const{oauthIdToken:Et,oauthAccessToken:Lt,oauthTokenSecret:mn,pendingToken:Bn,nonce:zn}=Z;return Lt||mn||Et||Bn?Bn?oe.startsWith("saml.")?M.aQ._create(oe,Bn):M.N._fromParams({providerId:oe,signInMethod:oe,pendingToken:Bn,idToken:Et,accessToken:Lt}):new M.Z(oe).credential({idToken:Et,accessToken:Lt,rawNonce:zn}):null}return Q instanceof C.g?me.credentialFromError(Q):me.credentialFromResult(Q)}function Ht(Q,Z){return Z.catch(oe=>{throw oe instanceof C.g&&function Nn(Q,Z){var oe;const me=null===(oe=Z.customData)||void 0===oe?void 0:oe._tokenResponse;if("auth/multi-factor-auth-required"===Z?.code)Z.resolver=new Xt(Q,M.as(Q,Z));else if(me){const Et=Ui(Z),Lt=Z;Et&&(Lt.credential=Et,Lt.tenantId=me.tenantId||void 0,Lt.email=me.email||void 0,Lt.phoneNumber=me.phoneNumber||void 0)}}(Q,oe),oe}).then(oe=>{const Et=oe.user;return{operationType:oe.operationType,credential:hs(oe),additionalUserInfo:M.aq(oe),user:Yt.getOrCreate(Et)}})}function Un(Q,Z){return Or.apply(this,arguments)}function Or(){return(Or=(0,_.A)(function*(Q,Z){const oe=yield Z;return{verificationId:oe.verificationId,confirm:me=>Ht(Q,oe.confirm(me))}})).apply(this,arguments)}class Xt{constructor(Z,oe){this.resolver=oe,this.auth=function Rr(Q){return Q.wrapped()}(Z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Z){return Ht(Li(this.auth),this.resolver.resolveSignIn(Z))}}class Yt{constructor(Z){this._delegate=Z,this.multiFactor=M.at(Z)}static getOrCreate(Z){return Yt.USER_MAP.has(Z)||Yt.USER_MAP.set(Z,new Yt(Z)),Yt.USER_MAP.get(Z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Z){return this._delegate.getIdTokenResult(Z)}getIdToken(Z){return this._delegate.getIdToken(Z)}linkAndRetrieveDataWithCredential(Z){return this.linkWithCredential(Z)}linkWithCredential(Z){var oe=this;return(0,_.A)(function*(){return Ht(oe.auth,M.a2(oe._delegate,Z))})()}linkWithPhoneNumber(Z,oe){var me=this;return(0,_.A)(function*(){return Un(me.auth,M.l(me._delegate,Z,oe))})()}linkWithPopup(Z){var oe=this;return(0,_.A)(function*(){return Ht(oe.auth,M.d(oe._delegate,Z,Hr))})()}linkWithRedirect(Z){var oe=this;return(0,_.A)(function*(){return yield Zn(M.aJ(oe.auth)),M.g(oe._delegate,Z,Hr)})()}reauthenticateAndRetrieveDataWithCredential(Z){return this.reauthenticateWithCredential(Z)}reauthenticateWithCredential(Z){var oe=this;return(0,_.A)(function*(){return Ht(oe.auth,M.a3(oe._delegate,Z))})()}reauthenticateWithPhoneNumber(Z,oe){return Un(this.auth,M.r(this._delegate,Z,oe))}reauthenticateWithPopup(Z){return Ht(this.auth,M.e(this._delegate,Z,Hr))}reauthenticateWithRedirect(Z){var oe=this;return(0,_.A)(function*(){return yield Zn(M.aJ(oe.auth)),M.h(oe._delegate,Z,Hr)})()}sendEmailVerification(Z){return M.ag(this._delegate,Z)}unlink(Z){var oe=this;return(0,_.A)(function*(){return yield M.ap(oe._delegate,Z),oe})()}updateEmail(Z){return M.al(this._delegate,Z)}updatePassword(Z){return M.am(this._delegate,Z)}updatePhoneNumber(Z){return M.u(this._delegate,Z)}updateProfile(Z){return M.ak(this._delegate,Z)}verifyBeforeUpdateEmail(Z,oe){return M.ah(this._delegate,Z,oe)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Yt.USER_MAP=new WeakMap;const Qr=M.aC;let Mn=(()=>{class Q{constructor(oe,me){if(this.app=oe,me.isInitialized())return this._delegate=me.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Et}=oe.options;Qr(Et,"invalid-api-key",{appName:oe.name}),Qr(Et,"invalid-api-key",{appName:oe.name});const Lt=typeof window<"u"?Hr:void 0;this._delegate=me.initialize({options:{persistence:xe(Et,oe.name),popupRedirectResolver:Lt}}),this._delegate._updateErrorMap(M.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Yt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(oe){this._delegate.languageCode=oe}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(oe){this._delegate.tenantId=oe}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(oe,me){M.K(this._delegate,oe,me)}applyActionCode(oe){return M.a7(this._delegate,oe)}checkActionCode(oe){return M.a8(this._delegate,oe)}confirmPasswordReset(oe,me){return M.a6(this._delegate,oe,me)}createUserWithEmailAndPassword(oe,me){var Et=this;return(0,_.A)(function*(){return Ht(Et._delegate,M.aa(Et._delegate,oe,me))})()}fetchProvidersForEmail(oe){return this.fetchSignInMethodsForEmail(oe)}fetchSignInMethodsForEmail(oe){return M.af(this._delegate,oe)}isSignInWithEmailLink(oe){return M.ad(this._delegate,oe)}getRedirectResult(){var oe=this;return(0,_.A)(function*(){Qr(Gn(),oe._delegate,"operation-not-supported-in-this-environment");const me=yield M.j(oe._delegate,Hr);return me?Ht(oe._delegate,Promise.resolve(me)):{credential:null,user:null}})()}addFrameworkForLogging(oe){!function ct(Q,Z){(0,M.aJ)(Q)._logFramework(Z)}(this._delegate,oe)}onAuthStateChanged(oe,me,Et){const{next:Lt,error:mn,complete:Bn}=Nr(oe,me,Et);return this._delegate.onAuthStateChanged(Lt,mn,Bn)}onIdTokenChanged(oe,me,Et){const{next:Lt,error:mn,complete:Bn}=Nr(oe,me,Et);return this._delegate.onIdTokenChanged(Lt,mn,Bn)}sendSignInLinkToEmail(oe,me){return M.ac(this._delegate,oe,me)}sendPasswordResetEmail(oe,me){return M.a5(this._delegate,oe,me||void 0)}setPersistence(oe){var me=this;return(0,_.A)(function*(){let Et;switch(function Qn(Q,Z){tt(Object.values(Nt).includes(Z),Q,"invalid-persistence-type"),(0,C.lV)()?tt(Z!==Nt.SESSION,Q,"unsupported-persistence-type"):(0,C.Ll)()?tt(Z===Nt.NONE,Q,"unsupported-persistence-type"):yn()?tt(Z===Nt.NONE||Z===Nt.LOCAL&&(0,C.zW)(),Q,"unsupported-persistence-type"):tt(Z===Nt.NONE||rt(),Q,"unsupported-persistence-type")}(me._delegate,oe),oe){case Nt.SESSION:Et=M.a;break;case Nt.LOCAL:Et=(yield M.aE(M.i)._isAvailable())?M.i:M.b;break;case Nt.NONE:Et=M.U;break;default:return M.ax("argument-error",{appName:me._delegate.name})}return me._delegate.setPersistence(Et)})()}signInAndRetrieveDataWithCredential(oe){return this.signInWithCredential(oe)}signInAnonymously(){return Ht(this._delegate,M.a0(this._delegate))}signInWithCredential(oe){return Ht(this._delegate,M.a1(this._delegate,oe))}signInWithCustomToken(oe){return Ht(this._delegate,M.a4(this._delegate,oe))}signInWithEmailAndPassword(oe,me){return Ht(this._delegate,M.ab(this._delegate,oe,me))}signInWithEmailLink(oe,me){return Ht(this._delegate,M.ae(this._delegate,oe,me))}signInWithPhoneNumber(oe,me){return Un(this._delegate,M.s(this._delegate,oe,me))}signInWithPopup(oe){var me=this;return(0,_.A)(function*(){return Qr(Gn(),me._delegate,"operation-not-supported-in-this-environment"),Ht(me._delegate,M.c(me._delegate,oe,Hr))})()}signInWithRedirect(oe){var me=this;return(0,_.A)(function*(){return Qr(Gn(),me._delegate,"operation-not-supported-in-this-environment"),yield Zn(me._delegate),M.f(me._delegate,oe,Hr)})()}updateCurrentUser(oe){return this._delegate.updateCurrentUser(oe)}verifyPasswordResetCode(oe){return M.a9(this._delegate,oe)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Q.Persistence=Nt,Q})();function Nr(Q,Z,oe){let me=Q;"function"!=typeof Q&&({next:me,error:Z,complete:oe}=Q);const Et=me;return{next:mn=>Et(mn&&Yt.getOrCreate(mn)),error:Z,complete:oe}}function xe(Q,Z){const oe=function An(Q,Z){const oe=kr();if(!oe)return[];const me=M.aF(Rt,Q,Z);switch(oe.getItem(me)){case Nt.NONE:return[M.U];case Nt.LOCAL:return[M.i,M.a];case Nt.SESSION:return[M.a];default:return[]}}(Q,Z);if(typeof self<"u"&&!oe.includes(M.i)&&oe.push(M.i),typeof window<"u")for(const me of[M.b,M.a])oe.includes(me)||oe.push(me);return oe.includes(M.U)||oe.push(M.U),oe}class Te{constructor(){this.providerId="phone",this._delegate=new M.P(Li(L.A.auth()))}static credential(Z,oe){return M.P.credential(Z,oe)}verifyPhoneNumber(Z,oe){return this._delegate.verifyPhoneNumber(Z,oe)}unwrap(){return this._delegate}}Te.PHONE_SIGN_IN_METHOD=M.P.PHONE_SIGN_IN_METHOD,Te.PROVIDER_ID=M.P.PROVIDER_ID;const we=M.aC;class Ke{constructor(Z,oe,me=L.A.app()){var Et;we(null===(Et=me.options)||void 0===Et?void 0:Et.apiKey,"invalid-api-key",{appName:me.name}),this._delegate=new M.R(me.auth(),Z,oe),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ge(Q){Q.INTERNAL.registerComponent(new U.uA("auth-compat",Z=>{const oe=Z.getProvider("app-compat").getImmediate(),me=Z.getProvider("auth");return new Mn(oe,me)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:M.A.EMAIL_SIGNIN,PASSWORD_RESET:M.A.PASSWORD_RESET,RECOVER_EMAIL:M.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:M.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:M.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:M.A.VERIFY_EMAIL}},EmailAuthProvider:M.V,FacebookAuthProvider:M.W,GithubAuthProvider:M.Y,GoogleAuthProvider:M.X,OAuthProvider:M.Z,SAMLAuthProvider:M._,PhoneAuthProvider:Te,PhoneMultiFactorGenerator:M.m,RecaptchaVerifier:Ke,TwitterAuthProvider:M.$,Auth:Mn,AuthCredential:M.L,Error:C.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Q.registerVersion("@firebase/auth-compat","0.5.13")}(L.A)},467:(en,Qe,k)=>{function _(M,C,se,Me,U,Le,$e){try{var Ee=M[Le]($e),ye=Ee.value}catch(He){return void se(He)}Ee.done?C(ye):Promise.resolve(ye).then(Me,U)}function L(M){return function(){var C=this,se=arguments;return new Promise(function(Me,U){var Le=M.apply(C,se);function $e(ye){_(Le,Me,U,$e,Ee,"next",ye)}function Ee(ye){_(Le,Me,U,$e,Ee,"throw",ye)}$e(void 0)})}}k.d(Qe,{A:()=>L})},1635:(en,Qe,k)=>{function C(ke,Xe){var ct={};for(var gt in ke)Object.prototype.hasOwnProperty.call(ke,gt)&&Xe.indexOf(gt)<0&&(ct[gt]=ke[gt]);if(null!=ke&&"function"==typeof Object.getOwnPropertySymbols){var yt=0;for(gt=Object.getOwnPropertySymbols(ke);yt<gt.length;yt++)Xe.indexOf(gt[yt])<0&&Object.prototype.propertyIsEnumerable.call(ke,gt[yt])&&(ct[gt[yt]]=ke[gt[yt]])}return ct}function He(ke,Xe,ct,gt){return new(ct||(ct=Promise))(function(Ze,zt){function ln(vn){try{tn(gt.next(vn))}catch(Cn){zt(Cn)}}function Zt(vn){try{tn(gt.throw(vn))}catch(Cn){zt(Cn)}}function tn(vn){vn.done?Ze(vn.value):function yt(Ze){return Ze instanceof ct?Ze:new ct(function(zt){zt(Ze)})}(vn.value).then(ln,Zt)}tn((gt=gt.apply(ke,Xe||[])).next())})}function ce(ke){return this instanceof ce?(this.v=ke,this):new ce(ke)}function ie(ke,Xe,ct){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var yt,gt=ct.apply(ke,Xe||[]),Ze=[];return yt=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),ln("next"),ln("throw"),ln("return",function zt(rt){return function(yn){return Promise.resolve(yn).then(rt,Cn)}}),yt[Symbol.asyncIterator]=function(){return this},yt;function ln(rt,yn){gt[rt]&&(yt[rt]=function(Gn){return new Promise(function(rr,bt){Ze.push([rt,Gn,rr,bt])>1||Zt(rt,Gn)})},yn&&(yt[rt]=yn(yt[rt])))}function Zt(rt,yn){try{!function tn(rt){rt.value instanceof ce?Promise.resolve(rt.value.v).then(vn,Cn):Ln(Ze[0][2],rt)}(gt[rt](yn))}catch(Gn){Ln(Ze[0][3],Gn)}}function vn(rt){Zt("next",rt)}function Cn(rt){Zt("throw",rt)}function Ln(rt,yn){rt(yn),Ze.shift(),Ze.length&&Zt(Ze[0][0],Ze[0][1])}}function Ce(ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ct,Xe=ke[Symbol.asyncIterator];return Xe?Xe.call(ke):(ke=function wt(ke){var Xe="function"==typeof Symbol&&Symbol.iterator,ct=Xe&&ke[Xe],gt=0;if(ct)return ct.call(ke);if(ke&&"number"==typeof ke.length)return{next:function(){return ke&&gt>=ke.length&&(ke=void 0),{value:ke&&ke[gt++],done:!ke}}};throw new TypeError(Xe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ke),ct={},gt("next"),gt("throw"),gt("return"),ct[Symbol.asyncIterator]=function(){return this},ct);function gt(Ze){ct[Ze]=ke[Ze]&&function(zt){return new Promise(function(ln,Zt){!function yt(Ze,zt,ln,Zt){Promise.resolve(Zt).then(function(tn){Ze({value:tn,done:ln})},zt)}(ln,Zt,(zt=ke[Ze](zt)).done,zt.value)})}}}k.d(Qe,{AQ:()=>ie,N3:()=>ce,Tt:()=>C,sH:()=>He,xN:()=>Ce}),"function"==typeof SuppressedError&&SuppressedError}},en=>{en(en.s=7827)}]);