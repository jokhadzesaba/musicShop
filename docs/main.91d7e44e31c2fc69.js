"use strict";(self.webpackChunkmusicshop=self.webpackChunkmusicshop||[]).push([[792],{576:(rn,ze,k)=>{k.d(ze,{$:()=>us,A:()=>_e,G:()=>rt,K:()=>zi,L:()=>nr,N:()=>ji,P:()=>Yc,R:()=>ft,U:()=>Bn,V:()=>Ls,W:()=>Ti,X:()=>gr,Y:()=>Us,Z:()=>Yo,_:()=>sr,a:()=>ea,a0:()=>K,a1:()=>fa,a2:()=>La,a3:()=>Ua,a4:()=>Aa,a5:()=>ga,a6:()=>qi,a7:()=>Tc,a8:()=>Y,a9:()=>D,aA:()=>ri,aB:()=>le,aC:()=>ue,aD:()=>Lu,aE:()=>Vt,aF:()=>zn,aG:()=>Vu,aH:()=>nf,aI:()=>Cd,aJ:()=>jt,aN:()=>Kn,aQ:()=>Zr,aa:()=>Q,ab:()=>Pe,ac:()=>Ue,ad:()=>Mt,ae:()=>on,af:()=>Sn,ag:()=>Vr,ah:()=>pi,ak:()=>Os,al:()=>ls,am:()=>lo,ap:()=>Xn,aq:()=>ye,as:()=>gi,at:()=>El,au:()=>Lt,av:()=>Gi,aw:()=>cs,ax:()=>oe,ay:()=>nu,az:()=>eu,b:()=>_a,c:()=>ef,d:()=>tf,e:()=>Dl,f:()=>Td,g:()=>Rl,h:()=>Dd,i:()=>wl,j:()=>Mr,k:()=>Bu,l:()=>Ac,m:()=>$u,p:()=>Ve,r:()=>fo,s:()=>lr,u:()=>ku});var _=k(467),T=k(7852),R=k(1076),E=k(8041),ie=k(1635),Ae=k(1362);const Ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},_e={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const rt=function Ge(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},De=function lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},st=new R.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new E.Vy("@firebase/auth");function bt(I,...h){et.logLevel<=E.$b.ERROR&&et.error(`Auth (${T.SDK_VERSION}): ${I}`,...h)}function oe(I,...h){throw Ct(I,...h)}function le(I,...h){return Ct(I,...h)}function ee(I,h,f){const A=Object.assign(Object.assign({},De()),{[h]:f});return new R.FA("auth","Firebase",A).create(h,{appName:I.name})}function je(I){return ee(I,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ne(I,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&oe(I,"argument-error"),ee(I,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ct(I,...h){if("string"!=typeof I){const f=h[0],A=[...h.slice(1)];return A[0]&&(A[0].appName=I.name),I._errorFactory.create(f,...A)}return st.create(I,...h)}function ue(I,h,...f){if(!I)throw Ct(h,...f)}function He(I){const h="INTERNAL ASSERTION FAILED: "+I;throw bt(h),new Error(h)}function Lt(I,h){I||He(h)}function Ut(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.href)||""}function ln(){return"http:"===Ht()||"https:"===Ht()}function Ht(){var I;return typeof self<"u"&&(null===(I=self.location)||void 0===I?void 0:I.protocol)||null}class yn{constructor(h,f){this.shortDelay=h,this.longDelay=f,Lt(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,R.jZ)()||(0,R.lV)()}get(){return function en(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ln()||(0,R.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xe(I,h){Lt(I.emulator,"Emulator should always be set here");const{url:f}=I.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class qe{static initialize(h,f,A){this.fetchImpl=h,f&&(this.headersImpl=f),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void He("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void He("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void He("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},_t=new yn(3e4,6e4);function Et(I,h){return I.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:I.tenantId}):h}function Ye(I,h,f,A){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,_.A)(function*(I,h,f,A,W={}){return pn(I,W,(0,_.A)(function*(){let ae={},Fe={};A&&("GET"===h?Fe=A:ae={body:JSON.stringify(A)});const At=(0,R.Am)(Object.assign({key:I.config.apiKey},Fe)).slice(1),Gt=yield I._getAdditionalHeaders();return Gt["Content-Type"]="application/json",I.languageCode&&(Gt["X-Firebase-Locale"]=I.languageCode),qe.fetch()(An(I,I.config.apiHost,f,At),Object.assign({method:h,headers:Gt,referrerPolicy:"no-referrer"},ae))}))})).apply(this,arguments)}function pn(I,h,f){return nn.apply(this,arguments)}function nn(){return(nn=(0,_.A)(function*(I,h,f){I._canInitEmulator=!1;const A=Object.assign(Object.assign({},dt),h);try{const W=new nt(I),ae=yield Promise.race([f(),W.promise]);W.clearNetworkTimeout();const Fe=yield ae.json();if("needConfirmation"in Fe)throw Cn(I,"account-exists-with-different-credential",Fe);if(ae.ok&&!("errorMessage"in Fe))return Fe;{const At=ae.ok?Fe.errorMessage:Fe.error.message,[Gt,Dn]=At.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Gt)throw Cn(I,"credential-already-in-use",Fe);if("EMAIL_EXISTS"===Gt)throw Cn(I,"email-already-in-use",Fe);if("USER_DISABLED"===Gt)throw Cn(I,"user-disabled",Fe);const $n=A[Gt]||Gt.toLowerCase().replace(/[_\s]+/g,"-");if(Dn)throw ee(I,$n,Dn);oe(I,$n)}}catch(W){if(W instanceof R.g)throw W;oe(I,"network-request-failed",{message:String(W)})}})).apply(this,arguments)}function sn(I,h,f,A){return wn.apply(this,arguments)}function wn(){return(wn=(0,_.A)(function*(I,h,f,A,W={}){const ae=yield Ye(I,h,f,A,W);return"mfaPendingCredential"in ae&&oe(I,"multi-factor-auth-required",{_serverResponse:ae}),ae})).apply(this,arguments)}function An(I,h,f,A){const W=`${h}${f}?${A}`;return I.config.emulator?xe(I.config,W):`${I.config.apiScheme}://${W}`}function Ln(I){switch(I){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nt{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,A)=>{this.timer=setTimeout(()=>A(le(this.auth,"network-request-failed")),_t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cn(I,h,f){const A={appName:I.name};f.email&&(A.email=f.email),f.phoneNumber&&(A.phoneNumber=f.phoneNumber);const W=le(I,h,A);return W.customData._tokenResponse=f,W}function Gn(I){return void 0!==I&&void 0!==I.getResponse}function rr(I){return void 0!==I&&void 0!==I.enterprise}class St{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===h)return Ln(f.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function ti(){return(ti=(0,_.A)(function*(I){return(yield Ye(I,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nt(I,h){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,_.A)(function*(I,h){return Ye(I,"GET","/v2/recaptchaConfig",Et(I,h))})).apply(this,arguments)}function Qn(){return(Qn=(0,_.A)(function*(I,h){return Ye(I,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function bn(){return(bn=(0,_.A)(function*(I,h){return Ye(I,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Pn(I,h){return kr.apply(this,arguments)}function kr(){return(kr=(0,_.A)(function*(I,h){return Ye(I,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function qr(I){if(I)try{const h=new Date(Number(I));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Rr(){return(Rr=(0,_.A)(function*(I,h=!1){const f=(0,R.Ku)(I),A=yield f.getIdToken(h),W=xn(A);ue(W&&W.exp&&W.auth_time&&W.iat,f.auth,"internal-error");const ae="object"==typeof W.firebase?W.firebase:void 0,Fe=ae?.sign_in_provider;return{claims:W,token:A,authTime:qr(hs(W.auth_time)),issuedAtTime:qr(hs(W.iat)),expirationTime:qr(hs(W.exp)),signInProvider:Fe||null,signInSecondFactor:ae?.sign_in_second_factor||null}})).apply(this,arguments)}function hs(I){return 1e3*Number(I)}function xn(I){const[h,f,A]=I.split(".");if(void 0===h||void 0===f||void 0===A)return bt("JWT malformed, contained fewer than 3 sections"),null;try{const W=(0,R.u)(f);return W?JSON.parse(W):(bt("Failed to decode base64 JWT payload"),null)}catch(W){return bt("Caught error parsing JWT payload as JSON",W?.toString()),null}}function Ui(I){const h=xn(I);return ue(h,"internal-error"),ue(typeof h.exp<"u","internal-error"),ue(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}function zt(I,h){return Un.apply(this,arguments)}function Un(){return(Un=(0,_.A)(function*(I,h,f=!1){if(f)return h;try{return yield h}catch(A){throw A instanceof R.g&&function Or({code:I}){return"auth/user-disabled"===I||"auth/user-token-expired"===I}(A)&&I.auth.currentUser===I&&(yield I.auth.signOut()),A}})).apply(this,arguments)}class Jt{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const W=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,W)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const A=this.getInterval(h);this.timerId=setTimeout((0,_.A)(function*(){yield f.iteration()}),A)}iteration(){var h=this;return(0,_.A)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class Zt{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=qr(this.lastLoginAt),this.creationTime=qr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qr(I){return On.apply(this,arguments)}function On(){return(On=(0,_.A)(function*(I){var h;const f=I.auth,A=yield I.getIdToken(),W=yield zt(I,Pn(f,{idToken:A}));ue(W?.users.length,f,"internal-error");const ae=W.users[0];I._notifyReloadListener(ae);const Fe=null!==(h=ae.providerUserInfo)&&void 0!==h&&h.length?Ce(ae.providerUserInfo):[],At=function we(I,h){return[...I.filter(A=>!h.some(W=>W.providerId===A.providerId)),...h]}(I.providerData,Fe),$n=!!I.isAnonymous&&!(I.email&&ae.passwordHash||At?.length),Dr={uid:ae.localId,displayName:ae.displayName||null,photoURL:ae.photoUrl||null,email:ae.email||null,emailVerified:ae.emailVerified||!1,phoneNumber:ae.phoneNumber||null,tenantId:ae.tenantId||null,providerData:At,metadata:new Zt(ae.createdAt,ae.lastLoginAt),isAnonymous:$n};Object.assign(I,Dr)})).apply(this,arguments)}function ke(){return(ke=(0,_.A)(function*(I){const h=(0,R.Ku)(I);yield Qr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ce(I){return I.map(h=>{var{providerId:f}=h,A=(0,ie.Tt)(h,["providerId"]);return{providerId:f,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function Pt(){return(Pt=(0,_.A)(function*(I,h){const f=yield pn(I,{},(0,_.A)(function*(){const A=(0,R.Am)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:W,apiKey:ae}=I.config,Fe=An(I,W,"/v1/token",`key=${ae}`),At=yield I._getAdditionalHeaders();return At["Content-Type"]="application/x-www-form-urlencoded",qe.fetch()(Fe,{method:"POST",headers:At,body:A})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function q(){return(q=(0,_.A)(function*(I,h){return Ye(I,"POST","/v2/accounts:revokeToken",Et(I,h))})).apply(this,arguments)}class J{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ue(h.idToken,"internal-error"),ue(typeof h.idToken<"u","internal-error"),ue(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):Ui(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}updateFromIdToken(h){ue(0!==h.length,"internal-error");const f=Ui(h);this.updateTokensAndExpiration(h,null,f)}getToken(h,f=!1){var A=this;return(0,_.A)(function*(){return f||!A.accessToken||A.isExpired?(ue(A.refreshToken,h,"user-token-expired"),A.refreshToken?(yield A.refresh(h,A.refreshToken),A.accessToken):null):A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var A=this;return(0,_.A)(function*(){const{accessToken:W,refreshToken:ae,expiresIn:Fe}=yield function Ke(I,h){return Pt.apply(this,arguments)}(h,f);A.updateTokensAndExpiration(W,ae,Number(Fe))})()}updateTokensAndExpiration(h,f,A){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(h,f){const{refreshToken:A,accessToken:W,expirationTime:ae}=f,Fe=new J;return A&&(ue("string"==typeof A,"internal-error",{appName:h}),Fe.refreshToken=A),W&&(ue("string"==typeof W,"internal-error",{appName:h}),Fe.accessToken=W),ae&&(ue("number"==typeof ae,"internal-error",{appName:h}),Fe.expirationTime=ae),Fe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new J,this.toJSON())}_performRefresh(){return He("not implemented")}}function se(I,h){ue("string"==typeof I||typeof I>"u","internal-error",{appName:h})}class me{constructor(h){var{uid:f,auth:A,stsTokenManager:W}=h,ae=(0,ie.Tt)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=A,this.stsTokenManager=W,this.accessToken=W.accessToken,this.displayName=ae.displayName||null,this.email=ae.email||null,this.emailVerified=ae.emailVerified||!1,this.phoneNumber=ae.phoneNumber||null,this.photoURL=ae.photoURL||null,this.isAnonymous=ae.isAnonymous||!1,this.tenantId=ae.tenantId||null,this.providerData=ae.providerData?[...ae.providerData]:[],this.metadata=new Zt(ae.createdAt||void 0,ae.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,_.A)(function*(){const A=yield zt(f,f.stsTokenManager.getToken(f.auth,h));return ue(A,f.auth,"internal-error"),f.accessToken!==A&&(f.accessToken=A,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),A})()}getIdTokenResult(h){return function Li(I){return Rr.apply(this,arguments)}(this,h)}reload(){return function Nr(I){return ke.apply(this,arguments)}(this)}_assign(h){this!==h&&(ue(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new me(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var A=this;return(0,_.A)(function*(){let W=!1;h.idToken&&h.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(h),W=!0),f&&(yield Qr(A)),yield A.auth._persistUserIfCurrent(A),W&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var h=this;return(0,_.A)(function*(){if((0,T._isFirebaseServerApp)(h.auth.app))return Promise.reject(je(h.auth));const f=yield h.getIdToken();return yield zt(h,function Rt(I,h){return Qn.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var A,W,ae,Fe,At,Gt,Dn,$n;const Dr=null!==(A=f.displayName)&&void 0!==A?A:void 0,io=null!==(W=f.email)&&void 0!==W?W:void 0,Ra=null!==(ae=f.phoneNumber)&&void 0!==ae?ae:void 0,Hu=null!==(Fe=f.photoURL)&&void 0!==Fe?Fe:void 0,Gu=null!==(At=f.tenantId)&&void 0!==At?At:void 0,zu=null!==(Gt=f._redirectEventId)&&void 0!==Gt?Gt:void 0,jl=null!==(Dn=f.createdAt)&&void 0!==Dn?Dn:void 0,$l=null!==($n=f.lastLoginAt)&&void 0!==$n?$n:void 0,{uid:Ka,emailVerified:sa,isAnonymous:Wu,providerData:iu,stsTokenManager:Ku}=f;ue(Ka&&Ku,h,"internal-error");const dc=J.fromJSON(this.name,Ku);ue("string"==typeof Ka,h,"internal-error"),se(Dr,h.name),se(io,h.name),ue("boolean"==typeof sa,h,"internal-error"),ue("boolean"==typeof Wu,h,"internal-error"),se(Ra,h.name),se(Hu,h.name),se(Gu,h.name),se(zu,h.name),se(jl,h.name),se($l,h.name);const qa=new me({uid:Ka,auth:h,email:io,emailVerified:sa,displayName:Dr,isAnonymous:Wu,photoURL:Hu,phoneNumber:Ra,tenantId:Gu,stsTokenManager:dc,createdAt:jl,lastLoginAt:$l});return iu&&Array.isArray(iu)&&(qa.providerData=iu.map(Ss=>Object.assign({},Ss))),zu&&(qa._redirectEventId=zu),qa}static _fromIdTokenResponse(h,f,A=!1){return(0,_.A)(function*(){const W=new J;W.updateFromServerResponse(f);const ae=new me({uid:f.localId,auth:h,stsTokenManager:W,isAnonymous:A});return yield Qr(ae),ae})()}static _fromGetAccountInfoResponse(h,f,A){return(0,_.A)(function*(){const W=f.users[0];ue(void 0!==W.localId,"internal-error");const ae=void 0!==W.providerUserInfo?Ce(W.providerUserInfo):[],Fe=!(W.email&&W.passwordHash||ae?.length),At=new J;At.updateFromIdToken(A);const Gt=new me({uid:W.localId,auth:h,stsTokenManager:At,isAnonymous:Fe}),Dn={uid:W.localId,displayName:W.displayName||null,photoURL:W.photoUrl||null,email:W.email||null,emailVerified:W.emailVerified||!1,phoneNumber:W.phoneNumber||null,tenantId:W.tenantId||null,providerData:ae,metadata:new Zt(W.createdAt,W.lastLoginAt),isAnonymous:!(W.email&&W.passwordHash||ae?.length)};return Object.assign(Gt,Dn),Gt})()}}const wt=new Map;function Vt(I){Lt(I instanceof Function,"Expected a class definition");let h=wt.get(I);return h?(Lt(h instanceof I,"Instance stored in cache mismatched with class"),h):(h=new I,wt.set(I,h),h)}const Bn=(()=>{class I{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.A)(function*(){return!0})()}_set(f,A){var W=this;return(0,_.A)(function*(){W.storage[f]=A})()}_get(f){var A=this;return(0,_.A)(function*(){const W=A.storage[f];return void 0===W?null:W})()}_remove(f){var A=this;return(0,_.A)(function*(){delete A.storage[f]})()}_addListener(f,A){}_removeListener(f,A){}}return I.type="NONE",I})();function zn(I,h,f){return`firebase:${I}:${h}:${f}`}class Mn{constructor(h,f,A){this.persistence=h,this.auth=f,this.userKey=A;const{config:W,name:ae}=this.auth;this.fullUserKey=zn(this.userKey,W.apiKey,ae),this.fullPersistenceKey=zn("persistence",W.apiKey,ae),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,_.A)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?me._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,_.A)(function*(){if(f.persistence===h)return;const A=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,A?f.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,A="authUser"){return(0,_.A)(function*(){if(!f.length)return new Mn(Vt(Bn),h,A);const W=(yield Promise.all(f.map(function(){var Dn=(0,_.A)(function*($n){if(yield $n._isAvailable())return $n});return function($n){return Dn.apply(this,arguments)}}()))).filter(Dn=>Dn);let ae=W[0]||Vt(Bn);const Fe=zn(A,h.config.apiKey,h.name);let At=null;for(const Dn of f)try{const $n=yield Dn._get(Fe);if($n){const Dr=me._fromJSON(h,$n);Dn!==ae&&(At=Dr),ae=Dn;break}}catch{}const Gt=W.filter(Dn=>Dn._shouldAllowMigration);return ae._shouldAllowMigration&&Gt.length?(ae=Gt[0],At&&(yield ae._set(Fe,At.toJSON())),yield Promise.all(f.map(function(){var Dn=(0,_.A)(function*($n){if($n!==ae)try{yield $n._remove(Fe)}catch{}});return function($n){return Dn.apply(this,arguments)}}())),new Mn(ae,h,A)):new Mn(ae,h,A)})()}}function Wt(I){const h=I.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ms(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Re(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(ir(h))return"Blackberry";if(is(h))return"Webos";if(Gr(h))return"Safari";if((h.includes("chrome/")||Yr(h))&&!h.includes("edge/"))return"Chrome";if(cs(h))return"Android";{const A=I.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===A?.length)return A[1]}return"Other"}function Re(I=(0,R.ZQ)()){return/firefox\//i.test(I)}function Gr(I=(0,R.ZQ)()){const h=I.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Yr(I=(0,R.ZQ)()){return/crios\//i.test(I)}function Ms(I=(0,R.ZQ)()){return/iemobile/i.test(I)}function cs(I=(0,R.ZQ)()){return/android/i.test(I)}function ir(I=(0,R.ZQ)()){return/blackberry/i.test(I)}function is(I=(0,R.ZQ)()){return/webos/i.test(I)}function Gi(I=(0,R.ZQ)()){return/iphone|ipad|ipod/i.test(I)||/macintosh/i.test(I)&&/mobile/i.test(I)}function ri(I=(0,R.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(I)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(I)}function kt(I=(0,R.ZQ)()){return Gi(I)||cs(I)||is(I)||ir(I)||/windows phone/i.test(I)||Ms(I)}function cn(I,h=[]){let f;switch(I){case"Browser":f=Wt((0,R.ZQ)());break;case"Worker":f=`${Wt((0,R.ZQ)())}-${I}`;break;default:f=I}const A=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${T.SDK_VERSION}/${A}`}class ne{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const A=ae=>new Promise((Fe,At)=>{try{Fe(h(ae))}catch(Gt){At(Gt)}});A.onAbort=f,this.queue.push(A);const W=this.queue.length-1;return()=>{this.queue[W]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,_.A)(function*(){if(f.auth.currentUser===h)return;const A=[];try{for(const W of f.queue)yield W(h),W.onAbort&&A.push(W.onAbort)}catch(W){A.reverse();for(const ae of A)try{ae()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:W?.message})}})()}}function Ie(){return(Ie=(0,_.A)(function*(I,h={}){return Ye(I,"GET","/v2/passwordPolicy",Et(I,h))})).apply(this,arguments)}class Qe{constructor(h){var f,A,W,ae;const Fe=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=Fe.minPasswordLength)&&void 0!==f?f:6,Fe.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Fe.maxPasswordLength),void 0!==Fe.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Fe.containsLowercaseCharacter),void 0!==Fe.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Fe.containsUppercaseCharacter),void 0!==Fe.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Fe.containsNumericCharacter),void 0!==Fe.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Fe.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(W=null===(A=h.allowedNonAlphanumericCharacters)||void 0===A?void 0:A.join(""))&&void 0!==W?W:"",this.forceUpgradeOnSignin=null!==(ae=h.forceUpgradeOnSignin)&&void 0!==ae&&ae,this.schemaVersion=h.schemaVersion}validatePassword(h){var f,A,W,ae,Fe,At;const Gt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,Gt),this.validatePasswordCharacterOptions(h,Gt),Gt.isValid&&(Gt.isValid=null===(f=Gt.meetsMinPasswordLength)||void 0===f||f),Gt.isValid&&(Gt.isValid=null===(A=Gt.meetsMaxPasswordLength)||void 0===A||A),Gt.isValid&&(Gt.isValid=null===(W=Gt.containsLowercaseLetter)||void 0===W||W),Gt.isValid&&(Gt.isValid=null===(ae=Gt.containsUppercaseLetter)||void 0===ae||ae),Gt.isValid&&(Gt.isValid=null===(Fe=Gt.containsNumericCharacter)||void 0===Fe||Fe),Gt.isValid&&(Gt.isValid=null===(At=Gt.containsNonAlphanumericCharacter)||void 0===At||At),Gt}validatePasswordLengthOptions(h,f){const A=this.customStrengthOptions.minPasswordLength,W=this.customStrengthOptions.maxPasswordLength;A&&(f.meetsMinPasswordLength=h.length>=A),W&&(f.meetsMaxPasswordLength=h.length<=W)}validatePasswordCharacterOptions(h,f){let A;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let W=0;W<h.length;W++)A=h.charAt(W),this.updatePasswordCharacterOptionsStatuses(f,A>="a"&&A<="z",A>="A"&&A<="Z",A>="0"&&A<="9",this.allowedNonAlphanumericCharacters.includes(A))}updatePasswordCharacterOptionsStatuses(h,f,A,W,ae){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=A)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=W)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=ae))}}class Xt{constructor(h,f,A,W){this.app=h,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=A,this.config=W,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rn(this),this.idTokenSubscription=new Rn(this),this.beforeStateQueue=new ne(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=st,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=W.sdkClientVersion}_initializeWithPersistence(h,f){var A=this;return f&&(this._popupRedirectResolver=Vt(f)),this._initializationPromise=this.queue((0,_.A)(function*(){var W,ae;if(!A._deleted&&(A.persistenceManager=yield Mn.create(A,h),!A._deleted)){if(null!==(W=A._popupRedirectResolver)&&void 0!==W&&W._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch{}yield A.initializeCurrentUser(f),A.lastNotifiedUid=(null===(ae=A.currentUser)||void 0===ae?void 0:ae.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,_.A)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(h){var f=this;return(0,_.A)(function*(){try{const A=yield Pn(f,{idToken:h}),W=yield me._fromGetAccountInfoResponse(f,A,h);yield f.directlySetCurrentUser(W)}catch(A){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",A),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(h){var f=this;return(0,_.A)(function*(){var A;if((0,T._isFirebaseServerApp)(f.app)){const At=f.app.settings.authIdToken;return At?new Promise(Gt=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(At).then(Gt,Gt))}):f.directlySetCurrentUser(null)}const W=yield f.assertedPersistence.getCurrentUser();let ae=W,Fe=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const At=null===(A=f.redirectUser)||void 0===A?void 0:A._redirectEventId,Gt=ae?._redirectEventId,Dn=yield f.tryRedirectSignIn(h);(!At||At===Gt)&&Dn?.user&&(ae=Dn.user,Fe=!0)}if(!ae)return f.directlySetCurrentUser(null);if(!ae._redirectEventId){if(Fe)try{yield f.beforeStateQueue.runMiddleware(ae)}catch(At){ae=W,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(At))}return ae?f.reloadAndSetCurrentUserOrClear(ae):f.directlySetCurrentUser(null)}return ue(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===ae._redirectEventId?f.directlySetCurrentUser(ae):f.reloadAndSetCurrentUserOrClear(ae)})()}tryRedirectSignIn(h){var f=this;return(0,_.A)(function*(){let A=null;try{A=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch{yield f._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,_.A)(function*(){try{yield Qr(h)}catch(A){if("auth/network-request-failed"!==A?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function vt(){if(typeof navigator>"u")return null;const I=navigator;return I.languages&&I.languages[0]||I.language||null}()}_delete(){var h=this;return(0,_.A)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,_.A)(function*(){if((0,T._isFirebaseServerApp)(f.app))return Promise.reject(je(f));const A=h?(0,R.Ku)(h):null;return A&&ue(A.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(A&&A._clone(f))})()}_updateCurrentUser(h,f=!1){var A=this;return(0,_.A)(function*(){if(!A._deleted)return h&&ue(A.tenantId===h.tenantId,A,"tenant-id-mismatch"),f||(yield A.beforeStateQueue.runMiddleware(h)),A.queue((0,_.A)(function*(){yield A.directlySetCurrentUser(h),A.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,_.A)(function*(){return(0,T._isFirebaseServerApp)(h.app)?Promise.reject(je(h)):(yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0))})()}setPersistence(h){var f=this;return(0,T._isFirebaseServerApp)(this.app)?Promise.reject(je(this)):this.queue((0,_.A)(function*(){yield f.assertedPersistence.setPersistence(Vt(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var f=this;return(0,_.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const A=f._getPasswordPolicyInternal();return A.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):A.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,_.A)(function*(){const f=yield function ve(I){return Ie.apply(this,arguments)}(h),A=new Qe(f);null===h.tenantId?h._projectPasswordPolicy=A:h._tenantPasswordPolicies[h.tenantId]=A})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new R.FA("auth","Firebase",h())}onAuthStateChanged(h,f,A){return this.registerStateListener(this.authStateSubscription,h,f,A)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,A){return this.registerStateListener(this.idTokenSubscription,h,f,A)}authStateReady(){return new Promise((h,f)=>{if(this.currentUser)h();else{const A=this.onAuthStateChanged(()=>{A(),h()},f)}})}revokeAccessToken(h){var f=this;return(0,_.A)(function*(){if(f.currentUser){const A=yield f.currentUser.getIdToken(),W={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:h,idToken:A};null!=f.tenantId&&(W.tenantId=f.tenantId),yield function pe(I,h){return q.apply(this,arguments)}(f,W)}})()}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var A=this;return(0,_.A)(function*(){const W=yield A.getOrInitRedirectPersistenceManager(f);return null===h?W.removeCurrentUser():W.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,_.A)(function*(){if(!f.redirectPersistenceManager){const A=h&&Vt(h)||f._popupRedirectResolver;ue(A,f,"argument-error"),f.redirectPersistenceManager=yield Mn.create(f,[Vt(A._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,_.A)(function*(){var A,W;return f._isInitialized&&(yield f.queue((0,_.A)(function*(){}))),(null===(A=f._currentUser)||void 0===A?void 0:A._redirectEventId)===h?f._currentUser:(null===(W=f.redirectUser)||void 0===W?void 0:W._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,_.A)(function*(){if(h===f.currentUser)return f.queue((0,_.A)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,A,W){if(this._deleted)return()=>{};const ae="function"==typeof f?f:f.next.bind(f);let Fe=!1;const At=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(At,this,"internal-error"),At.then(()=>{Fe||ae(this.currentUser)}),"function"==typeof f){const Gt=h.addObserver(f,A,W);return()=>{Fe=!0,Gt()}}{const Gt=h.addObserver(f);return()=>{Fe=!0,Gt()}}}directlySetCurrentUser(h){var f=this;return(0,_.A)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=cn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,_.A)(function*(){var f;const A={"X-Client-Version":h.clientVersion};h.app.options.appId&&(A["X-Firebase-gmpid"]=h.app.options.appId);const W=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();W&&(A["X-Firebase-Client"]=W);const ae=yield h._getAppCheckToken();return ae&&(A["X-Firebase-AppCheck"]=ae),A})()}_getAppCheckToken(){var h=this;return(0,_.A)(function*(){var f;const A=yield null===(f=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return A?.error&&function Dt(I,...h){et.logLevel<=E.$b.WARN&&et.warn(`Auth (${T.SDK_VERSION}): ${I}`,...h)}(`Error while retrieving App Check token: ${A.error}`),A?.token})()}}function jt(I){return(0,R.Ku)(I)}class Rn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,R.tD)(f=>this.observer=f)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Tn={loadJS:()=>(0,_.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function si(I){return Tn.loadJS(I)}function Mi(I){return`__${I}${Math.floor(1e6*Math.random())}`}class li{constructor(h){this.type="recaptcha-enterprise",this.auth=jt(h)}verify(h="verify",f=!1){var A=this;return(0,_.A)(function*(){function ae(){return ae=(0,_.A)(function*(At){if(!f){if(null==At.tenantId&&null!=At._agentRecaptchaConfig)return At._agentRecaptchaConfig.siteKey;if(null!=At.tenantId&&void 0!==At._tenantRecaptchaConfigs[At.tenantId])return At._tenantRecaptchaConfigs[At.tenantId].siteKey}return new Promise(function(){var Gt=(0,_.A)(function*(Dn,$n){Nt(At,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Dr=>{if(void 0!==Dr.recaptchaKey){const io=new St(Dr);return null==At.tenantId?At._agentRecaptchaConfig=io:At._tenantRecaptchaConfigs[At.tenantId]=io,Dn(io.siteKey)}$n(new Error("recaptcha Enterprise site key undefined"))}).catch(Dr=>{$n(Dr)})});return function(Dn,$n){return Gt.apply(this,arguments)}}())}),ae.apply(this,arguments)}function Fe(At,Gt,Dn){const $n=window.grecaptcha;rr($n)?$n.enterprise.ready(()=>{$n.enterprise.execute(At,{action:h}).then(Dr=>{Gt(Dr)}).catch(()=>{Gt("NO_RECAPTCHA")})}):Dn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((At,Gt)=>{(function W(At){return ae.apply(this,arguments)})(A.auth).then(Dn=>{if(!f&&rr(window.grecaptcha))Fe(Dn,At,Gt);else{if(typeof window>"u")return void Gt(new Error("RecaptchaVerifier is only supported in browser"));let $n=function ui(){return Tn.recaptchaEnterpriseScript}();0!==$n.length&&($n+=Dn),si($n).then(()=>{Fe(Dn,At,Gt)}).catch(Dr=>{Gt(Dr)})}}).catch(Dn=>{Gt(Dn)})})})()}}function tr(I,h,f){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,_.A)(function*(I,h,f,A=!1){const W=new li(I);let ae;try{ae=yield W.verify(f)}catch{ae=yield W.verify(f,!0)}const Fe=Object.assign({},h);return Object.assign(Fe,A?{captchaResp:ae}:{captchaResponse:ae}),Object.assign(Fe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Fe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Fe})).apply(this,arguments)}function di(I,h,f,A){return Ei.apply(this,arguments)}function Ei(){return Ei=(0,_.A)(function*(I,h,f,A){var W;if(null!==(W=I._getRecaptchaConfig())&&void 0!==W&&W.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const ae=yield tr(I,h,f,"getOobCode"===f);return A(I,ae)}return A(I,h).catch(function(){var ae=(0,_.A)(function*(Fe){if("auth/missing-recaptcha-token"===Fe.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const At=yield tr(I,h,f,"getOobCode"===f);return A(I,At)}return Promise.reject(Fe)});return function(Fe){return ae.apply(this,arguments)}}())}),Ei.apply(this,arguments)}function zi(I,h,f){const A=jt(I);ue(A._canInitEmulator,A,"emulator-config-failed"),ue(/^https?:\/\//.test(h),A,"invalid-emulator-scheme");const W=!!f?.disableWarnings,ae=oo(h),{host:Fe,port:At}=function Qo(I){const h=oo(I),f=/(\/\/)?([^?#/]+)/.exec(I.substr(h.length));if(!f)return{host:"",port:null};const A=f[2].split("@").pop()||"",W=/^(\[[^\]]+\])(:|$)/.exec(A);if(W){const ae=W[1];return{host:ae,port:ua(A.substr(ae.length+1))}}{const[ae,Fe]=A.split(":");return{host:ae,port:ua(Fe)}}}(h);A.config.emulator={url:`${ae}//${Fe}${null===At?"":`:${At}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:Fe,port:At,protocol:ae.replace(":",""),options:Object.freeze({disableWarnings:W})}),W||function vo(){function I(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",I):I())}()}function oo(I){const h=I.indexOf(":");return h<0?"":I.substr(0,h+1)}function ua(I){if(!I)return null;const h=Number(I);return isNaN(h)?null:h}class nr{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return He("not implemented")}_getIdTokenResponse(h){return He("not implemented")}_linkToIdToken(h,f){return He("not implemented")}_getReauthenticationResolver(h){return He("not implemented")}}function Eo(I,h){return xs.apply(this,arguments)}function xs(){return(xs=(0,_.A)(function*(I,h){return Ye(I,"POST","/v1/accounts:resetPassword",Et(I,h))})).apply(this,arguments)}function Vo(){return(Vo=(0,_.A)(function*(I,h){return Ye(I,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Qs(I,h){return la.apply(this,arguments)}function la(){return(la=(0,_.A)(function*(I,h){return Ye(I,"POST","/v1/accounts:signUp",h)})).apply(this,arguments)}function Sr(){return(Sr=(0,_.A)(function*(I,h){return Ye(I,"POST","/v1/accounts:update",Et(I,h))})).apply(this,arguments)}function Bi(I,h){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithPassword",Et(I,h))})).apply(this,arguments)}function vr(I,h){return fs.apply(this,arguments)}function fs(){return(fs=(0,_.A)(function*(I,h){return Ye(I,"POST","/v1/accounts:sendOobCode",Et(I,h))})).apply(this,arguments)}function Jr(){return(Jr=(0,_.A)(function*(I,h){return vr(I,h)})).apply(this,arguments)}function Lo(I,h){return hi.apply(this,arguments)}function hi(){return(hi=(0,_.A)(function*(I,h){return vr(I,h)})).apply(this,arguments)}function zr(I,h){return ni.apply(this,arguments)}function ni(){return(ni=(0,_.A)(function*(I,h){return vr(I,h)})).apply(this,arguments)}function hn(){return(hn=(0,_.A)(function*(I,h){return vr(I,h)})).apply(this,arguments)}function ps(){return(ps=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithEmailLink",Et(I,h))})).apply(this,arguments)}function gs(){return(gs=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithEmailLink",Et(I,h))})).apply(this,arguments)}class Ys extends nr{constructor(h,f,A,W=null){super("password",A),this._email=h,this._password=f,this._tenantId=W}static _fromEmailAndPassword(h,f){return new Ys(h,f,"password")}static _fromEmailAndCode(h,f,A=null){return new Ys(h,f,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,_.A)(function*(){switch(f.signInMethod){case"password":return di(h,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Bi);case"emailLink":return function oi(I,h){return ps.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:oe(h,"internal-error")}})()}_linkToIdToken(h,f){var A=this;return(0,_.A)(function*(){switch(A.signInMethod){case"password":return di(h,{idToken:f,returnSecureToken:!0,email:A._email,password:A._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Qs);case"emailLink":return function ks(I,h){return gs.apply(this,arguments)}(h,{idToken:f,email:A._email,oobCode:A._password});default:oe(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ri(I,h){return es.apply(this,arguments)}function es(){return(es=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithIdp",Et(I,h))})).apply(this,arguments)}class ji extends nr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new ji(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):oe("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:A,signInMethod:W}=f,ae=(0,ie.Tt)(f,["providerId","signInMethod"]);if(!A||!W)return null;const Fe=new ji(A,W);return Fe.idToken=ae.idToken||void 0,Fe.accessToken=ae.accessToken||void 0,Fe.secret=ae.secret,Fe.nonce=ae.nonce,Fe.pendingToken=ae.pendingToken||null,Fe}_getIdTokenResponse(h){return Ri(h,this.buildRequest())}_linkToIdToken(h,f){const A=this.buildRequest();return A.idToken=f,Ri(h,A)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Ri(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,R.Am)(f)}return h}}function Fs(){return(Fs=(0,_.A)(function*(I,h){return Ye(I,"POST","/v1/accounts:sendVerificationCode",Et(I,h))})).apply(this,arguments)}function Uo(){return(Uo=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithPhoneNumber",Et(I,h))})).apply(this,arguments)}function Oi(){return(Oi=(0,_.A)(function*(I,h){const f=yield sn(I,"POST","/v1/accounts:signInWithPhoneNumber",Et(I,h));if(f.temporaryProof)throw Cn(I,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Io={USER_NOT_FOUND:"user-not-found"};function Hi(){return(Hi=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithPhoneNumber",Et(I,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Io)})).apply(this,arguments)}class ms extends nr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new ms({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new ms({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function $i(I,h){return Uo.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function ns(I,h){return Oi.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ao(I,h){return Hi.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:A,verificationCode:W}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:A,code:W}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:A,phoneNumber:W,temporaryProof:ae}=h;return A||f||W||ae?new ms({verificationId:f,verificationCode:A,phoneNumber:W,temporaryProof:ae}):null}}class Js{constructor(h){var f,A,W,ae,Fe,At;const Gt=(0,R.I9)((0,R.hp)(h)),Dn=null!==(f=Gt.apiKey)&&void 0!==f?f:null,$n=null!==(A=Gt.oobCode)&&void 0!==A?A:null,Dr=function Vs(I){switch(I){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(W=Gt.mode)&&void 0!==W?W:null);ue(Dn&&$n&&Dr,"argument-error"),this.apiKey=Dn,this.operation=Dr,this.code=$n,this.continueUrl=null!==(ae=Gt.continueUrl)&&void 0!==ae?ae:null,this.languageCode=null!==(Fe=Gt.languageCode)&&void 0!==Fe?Fe:null,this.tenantId=null!==(At=Gt.tenantId)&&void 0!==At?At:null}static parseLink(h){const f=function Xo(I){const h=(0,R.I9)((0,R.hp)(I)).link,f=h?(0,R.I9)((0,R.hp)(h)).deep_link_id:null,A=(0,R.I9)((0,R.hp)(I)).deep_link_id;return(A?(0,R.I9)((0,R.hp)(A)).link:null)||A||f||h||I}(h);try{return new Js(f)}catch{return null}}}let Ls=(()=>{class I{constructor(){this.providerId=I.PROVIDER_ID}static credential(f,A){return Ys._fromEmailAndPassword(f,A)}static credentialWithLink(f,A){const W=Js.parseLink(A);return ue(W,"argument-error"),Ys._fromEmailAndCode(f,W.code,W.tenantId)}}return I.PROVIDER_ID="password",I.EMAIL_PASSWORD_SIGN_IN_METHOD="password",I.EMAIL_LINK_SIGN_IN_METHOD="emailLink",I})();class wi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Co extends wi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Yo extends Co{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return ue("providerId"in f&&"signInMethod"in f,"argument-error"),ji._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ue(h.idToken||h.accessToken,"argument-error"),ji._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Yo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Yo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:A,oauthTokenSecret:W,pendingToken:ae,nonce:Fe,providerId:At}=h;if(!A&&!W&&!f&&!ae||!At)return null;try{return new Yo(At)._credential({idToken:f,accessToken:A,nonce:Fe,pendingToken:ae})}catch{return null}}}let Ti=(()=>{class I extends Co{constructor(){super("facebook.com")}static credential(f){return ji._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return I.credential(f.oauthAccessToken)}catch{return null}}}return I.FACEBOOK_SIGN_IN_METHOD="facebook.com",I.PROVIDER_ID="facebook.com",I})(),gr=(()=>{class I extends Co{constructor(){super("google.com"),this.addScope("profile")}static credential(f,A){return ji._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:A})}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:A,oauthAccessToken:W}=f;if(!A&&!W)return null;try{return I.credential(A,W)}catch{return null}}}return I.GOOGLE_SIGN_IN_METHOD="google.com",I.PROVIDER_ID="google.com",I})(),Us=(()=>{class I extends Co{constructor(){super("github.com")}static credential(f){return ji._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return I.credential(f.oauthAccessToken)}catch{return null}}}return I.GITHUB_SIGN_IN_METHOD="github.com",I.PROVIDER_ID="github.com",I})();class Zr extends nr{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Ri(h,this.buildRequest())}_linkToIdToken(h,f){const A=this.buildRequest();return A.idToken=f,Ri(h,A)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Ri(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:A,signInMethod:W,pendingToken:ae}=f;return A&&W&&ae&&A===W?new Zr(A,ae):null}static _create(h,f){return new Zr(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class sr extends wi{constructor(h){ue(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return sr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return sr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=Zr.fromJSON(h);return ue(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:A}=h;if(!f||!A)return null;try{return Zr._create(A,f)}catch{return null}}}let us=(()=>{class I extends Co{constructor(){super("twitter.com")}static credential(f,A){return ji._fromParams({providerId:I.PROVIDER_ID,signInMethod:I.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:A})}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:A,oauthTokenSecret:W}=f;if(!A||!W)return null;try{return I.credential(A,W)}catch{return null}}}return I.TWITTER_SIGN_IN_METHOD="twitter.com",I.PROVIDER_ID="twitter.com",I})();function _s(I,h){return wo.apply(this,arguments)}function wo(){return(wo=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signUp",Et(I,h))})).apply(this,arguments)}class Fi{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,A,W=!1){return(0,_.A)(function*(){const ae=yield me._fromIdTokenResponse(h,A,W),Fe=G(A);return new Fi({user:ae,providerId:Fe,_tokenResponse:A,operationType:f})})()}static _forOperation(h,f,A){return(0,_.A)(function*(){yield h._updateTokensIfNecessary(A,!0);const W=G(A);return new Fi({user:h,providerId:W,_tokenResponse:A,operationType:f})})()}}function G(I){return I.providerId?I.providerId:"phoneNumber"in I?"phone":null}function K(I){return N.apply(this,arguments)}function N(){return(N=(0,_.A)(function*(I){var h;if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const f=jt(I);if(yield f._initializationPromise,null!==(h=f.currentUser)&&void 0!==h&&h.isAnonymous)return new Fi({user:f.currentUser,providerId:null,operationType:"signIn"});const A=yield _s(f,{returnSecureToken:!0}),W=yield Fi._fromIdTokenResponse(f,"signIn",A,!0);return yield f._updateCurrentUser(W.user),W})).apply(this,arguments)}class Z extends R.g{constructor(h,f,A,W){var ae;super(f.code,f.message),this.operationType=A,this.user=W,Object.setPrototypeOf(this,Z.prototype),this.customData={appName:h.name,tenantId:null!==(ae=h.tenantId)&&void 0!==ae?ae:void 0,_serverResponse:f.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(h,f,A,W){return new Z(h,f,A,W)}}function be(I,h,f,A){return("reauthenticate"===h?f._getReauthenticationResolver(I):f._getIdTokenResponse(I)).catch(ae=>{throw"auth/multi-factor-auth-required"===ae.code?Z._fromErrorAndOperation(I,ae,h,A):ae})}function fn(I){return new Set(I.map(({providerId:h})=>h).filter(h=>!!h))}function Xn(I,h){return ys.apply(this,arguments)}function ys(){return ys=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I);yield Ts(!0,f,h);const{providerUserInfo:A}=yield function Zn(I,h){return bn.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),W=fn(A||[]);return f.providerData=f.providerData.filter(ae=>W.has(ae.providerId)),W.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),ys.apply(this,arguments)}function Zs(I,h){return fi.apply(this,arguments)}function fi(){return(fi=(0,_.A)(function*(I,h,f=!1){const A=yield zt(I,h._linkToIdToken(I.auth,yield I.getIdToken()),f);return Fi._forOperation(I,"link",A)})).apply(this,arguments)}function Ts(I,h,f){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,_.A)(function*(I,h,f){yield Qr(h);const W=!1===I?"provider-already-linked":"no-such-provider";ue(fn(h.providerData).has(f)===I,h.auth,W)})).apply(this,arguments)}function Bo(I,h){return ha.apply(this,arguments)}function ha(){return(ha=(0,_.A)(function*(I,h,f=!1){const{auth:A}=I;if((0,T._isFirebaseServerApp)(A.app))return Promise.reject(je(A));const W="reauthenticate";try{const ae=yield zt(I,be(A,W,h,I),f);ue(ae.idToken,A,"internal-error");const Fe=xn(ae.idToken);ue(Fe,A,"internal-error");const{sub:At}=Fe;return ue(I.uid===At,A,"user-mismatch"),Fi._forOperation(I,W,ae)}catch(ae){throw"auth/user-not-found"===ae?.code&&oe(A,"user-mismatch"),ae}})).apply(this,arguments)}function ei(I,h){return Da.apply(this,arguments)}function Da(){return(Da=(0,_.A)(function*(I,h,f=!1){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const A="signIn",W=yield be(I,A,h),ae=yield Fi._fromIdTokenResponse(I,A,W);return f||(yield I._updateCurrentUser(ae.user)),ae})).apply(this,arguments)}function fa(I,h){return Va.apply(this,arguments)}function Va(){return(Va=(0,_.A)(function*(I,h){return ei(jt(I),h)})).apply(this,arguments)}function La(I,h){return eo.apply(this,arguments)}function eo(){return(eo=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I);return yield Ts(!1,f,h.providerId),Zs(f,h)})).apply(this,arguments)}function Ua(I,h){return pa.apply(this,arguments)}function pa(){return(pa=(0,_.A)(function*(I,h){return Bo((0,R.Ku)(I),h)})).apply(this,arguments)}function To(){return(To=(0,_.A)(function*(I,h){return sn(I,"POST","/v1/accounts:signInWithCustomToken",Et(I,h))})).apply(this,arguments)}function Aa(I,h){return Jo.apply(this,arguments)}function Jo(){return Jo=(0,_.A)(function*(I,h){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const f=jt(I),A=yield function jo(I,h){return To.apply(this,arguments)}(f,{token:h,returnSecureToken:!0}),W=yield Fi._fromIdTokenResponse(f,"signIn",A);return yield f._updateCurrentUser(W.user),W}),Jo.apply(this,arguments)}class Do{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?cr._fromServerResponse(h,f):"totpInfo"in f?Wr._fromServerResponse(h,f):oe(h,"internal-error")}}class cr extends Do{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new cr(f)}}class Wr extends Do{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new Wr(f)}}function ii(I,h,f){var A;ue((null===(A=f.url)||void 0===A?void 0:A.length)>0,I,"invalid-continue-uri"),ue(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,I,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ue(f.iOS.bundleId.length>0,I,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(ue(f.android.packageName.length>0,I,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function Ni(I){return xi.apply(this,arguments)}function xi(){return(xi=(0,_.A)(function*(I){const h=jt(I);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function ga(I,h,f){return vs.apply(this,arguments)}function vs(){return(vs=(0,_.A)(function*(I,h,f){const A=jt(I),W={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};f&&ii(A,W,f),yield di(A,W,"getOobCode",Lo)})).apply(this,arguments)}function qi(I,h,f){return ec.apply(this,arguments)}function ec(){return ec=(0,_.A)(function*(I,h,f){yield Eo((0,R.Ku)(I),{oobCode:h,newPassword:f}).catch(function(){var A=(0,_.A)(function*(W){throw"auth/password-does-not-meet-requirements"===W.code&&Ni(I),W});return function(W){return A.apply(this,arguments)}}())}),ec.apply(this,arguments)}function Tc(I,h){return Ao.apply(this,arguments)}function Ao(){return Ao=(0,_.A)(function*(I,h){yield function Rs(I,h){return Sr.apply(this,arguments)}((0,R.Ku)(I),{oobCode:h})}),Ao.apply(this,arguments)}function Y(I,h){return C.apply(this,arguments)}function C(){return(C=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I),A=yield Eo(f,{oobCode:h}),W=A.requestType;switch(ue(W,f,"internal-error"),W){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(A.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(A.mfaInfo,f,"internal-error");default:ue(A.email,f,"internal-error")}let ae=null;return A.mfaInfo&&(ae=Do._fromServerResponse(jt(f),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:ae},operation:W}})).apply(this,arguments)}function D(I,h){return L.apply(this,arguments)}function L(){return(L=(0,_.A)(function*(I,h){const{data:f}=yield Y((0,R.Ku)(I),h);return f.email})).apply(this,arguments)}function Q(I,h,f){return he.apply(this,arguments)}function he(){return(he=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const A=jt(I),Fe=yield di(A,{returnSecureToken:!0,email:h,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_s).catch(Gt=>{throw"auth/password-does-not-meet-requirements"===Gt.code&&Ni(I),Gt}),At=yield Fi._fromIdTokenResponse(A,"signIn",Fe);return yield A._updateCurrentUser(At.user),At})).apply(this,arguments)}function Pe(I,h,f){return(0,T._isFirebaseServerApp)(I.app)?Promise.reject(je(I)):fa((0,R.Ku)(I),Ls.credential(h,f)).catch(function(){var A=(0,_.A)(function*(W){throw"auth/password-does-not-meet-requirements"===W.code&&Ni(I),W});return function(W){return A.apply(this,arguments)}}())}function Ue(I,h,f){return ht.apply(this,arguments)}function ht(){return(ht=(0,_.A)(function*(I,h,f){const A=jt(I),W={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function ae(Fe,At){ue(At.handleCodeInApp,A,"argument-error"),At&&ii(A,Fe,At)})(W,f),yield di(A,W,"getOobCode",zr)})).apply(this,arguments)}function Mt(I,h){const f=Js.parseLink(h);return"EMAIL_SIGNIN"===f?.operation}function on(I,h,f){return vn.apply(this,arguments)}function vn(){return(vn=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const A=(0,R.Ku)(I),W=Ls.credentialWithLink(h,f||Ut());return ue(W._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),fa(A,W)})).apply(this,arguments)}function er(){return(er=(0,_.A)(function*(I,h){return Ye(I,"POST","/v1/accounts:createAuthUri",Et(I,h))})).apply(this,arguments)}function Sn(I,h){return Wn.apply(this,arguments)}function Wn(){return Wn=(0,_.A)(function*(I,h){const A={identifier:h,continueUri:ln()?Ut():"http://localhost"},{signinMethods:W}=yield function ur(I,h){return er.apply(this,arguments)}((0,R.Ku)(I),A);return W||[]}),Wn.apply(this,arguments)}function Vr(I,h){return Lr.apply(this,arguments)}function Lr(){return Lr=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I),W={requestType:"VERIFY_EMAIL",idToken:yield I.getIdToken()};h&&ii(f.auth,W,h);const{email:ae}=yield function Xs(I,h){return Jr.apply(this,arguments)}(f.auth,W);ae!==I.email&&(yield I.reload())}),Lr.apply(this,arguments)}function pi(I,h,f){return kn.apply(this,arguments)}function kn(){return kn=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I),ae={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield I.getIdToken(),newEmail:h};f&&ii(A.auth,ae,f);const{email:Fe}=yield function ss(I,h){return hn.apply(this,arguments)}(A.auth,ae);Fe!==I.email&&(yield I.reload())}),kn.apply(this,arguments)}function uo(){return(uo=(0,_.A)(function*(I,h){return Ye(I,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Os(I,h){return Di.apply(this,arguments)}function Di(){return Di=(0,_.A)(function*(I,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const A=(0,R.Ku)(I),ae={idToken:yield A.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},Fe=yield zt(A,function os(I,h){return uo.apply(this,arguments)}(A.auth,ae));A.displayName=Fe.displayName||null,A.photoURL=Fe.photoUrl||null;const At=A.providerData.find(({providerId:Gt})=>"password"===Gt);At&&(At.displayName=A.displayName,At.photoURL=A.photoURL),yield A._updateTokensIfNecessary(Fe)}),Di.apply(this,arguments)}function ls(I,h){const f=(0,R.Ku)(I);return(0,T._isFirebaseServerApp)(f.auth.app)?Promise.reject(je(f.auth)):Zo(f,h,null)}function lo(I,h){return Zo((0,R.Ku)(I),null,h)}function Zo(I,h,f){return ma.apply(this,arguments)}function ma(){return ma=(0,_.A)(function*(I,h,f){const{auth:A}=I,ae={idToken:yield I.getIdToken(),returnSecureToken:!0};h&&(ae.email=h),f&&(ae.password=f);const Fe=yield zt(I,function Er(I,h){return Vo.apply(this,arguments)}(A,ae));yield I._updateTokensIfNecessary(Fe,!0)}),ma.apply(this,arguments)}class Es{constructor(h,f,A={}){this.isNewUser=h,this.providerId=f,this.profile=A}}class Bs extends Es{constructor(h,f,A,W){super(h,f,A),this.username=W}}class P extends Es{constructor(h,f){super(h,"facebook.com",f)}}class $ extends Bs{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class x extends Es{constructor(h,f){super(h,"google.com",f)}}class B extends Bs{constructor(h,f,A){super(h,"twitter.com",f,A)}}function ye(I){const{user:h,_tokenResponse:f}=I;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function ds(I){var h,f;if(!I)return null;const{providerId:A}=I,W=I.rawUserInfo?JSON.parse(I.rawUserInfo):{},ae=I.isNewUser||"identitytoolkit#SignupNewUserResponse"===I.kind;if(!A&&I?.idToken){const Fe=null===(f=null===(h=xn(I.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(Fe)return new Es(ae,"anonymous"!==Fe&&"custom"!==Fe?Fe:null)}if(!A)return null;switch(A){case"facebook.com":return new P(ae,W);case"github.com":return new $(ae,W);case"google.com":return new x(ae,W);case"twitter.com":return new B(ae,W,I.screenName||null);case"custom":case"anonymous":return new Es(ae,null);default:return new Es(ae,A,W)}}(f)}class pr{constructor(h,f,A){this.type=h,this.credential=f,this.user=A}static _fromIdtoken(h,f){return new pr("enroll",h,f)}static _fromMfaPendingCredential(h){return new pr("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,A;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return pr._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(A=h.multiFactorSession)&&void 0!==A&&A.idToken)return pr._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Ai{constructor(h,f,A){this.session=h,this.hints=f,this.signInResolver=A}static _fromError(h,f){const A=jt(h),W=f.customData._serverResponse,ae=(W.mfaInfo||[]).map(At=>Do._fromServerResponse(A,At));ue(W.mfaPendingCredential,A,"internal-error");const Fe=pr._fromMfaPendingCredential(W.mfaPendingCredential);return new Ai(Fe,ae,function(){var At=(0,_.A)(function*(Gt){const Dn=yield Gt._process(A,Fe);delete W.mfaInfo,delete W.mfaPendingCredential;const $n=Object.assign(Object.assign({},W),{idToken:Dn.idToken,refreshToken:Dn.refreshToken});switch(f.operationType){case"signIn":const Dr=yield Fi._fromIdTokenResponse(A,f.operationType,$n);return yield A._updateCurrentUser(Dr.user),Dr;case"reauthenticate":return ue(f.user,A,"internal-error"),Fi._forOperation(f.user,f.operationType,$n);default:oe(A,"internal-error")}});return function(Gt){return At.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,_.A)(function*(){return f.signInResolver(h)})()}}function gi(I,h){var f;const A=(0,R.Ku)(I),W=h;return ue(h.customData.operationType,A,"argument-error"),ue(null===(f=W.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,A,"argument-error"),Ai._fromError(A,W)}class Yn{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(A=>Do._fromServerResponse(h.auth,A)))})}static _fromUser(h){return new Yn(h)}getSession(){var h=this;return(0,_.A)(function*(){return pr._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,f){var A=this;return(0,_.A)(function*(){const W=h,ae=yield A.getSession(),Fe=yield zt(A.user,W._process(A.user.auth,ae,f));return yield A.user._updateTokensIfNecessary(Fe),A.user.reload()})()}unenroll(h){var f=this;return(0,_.A)(function*(){const A="string"==typeof h?h:h.uid,W=yield f.user.getIdToken();try{const ae=yield zt(f.user,function ho(I,h){return Ye(I,"POST","/v2/accounts/mfaEnrollment:withdraw",Et(I,h))}(f.user.auth,{idToken:W,mfaEnrollmentId:A}));f.enrolledFactors=f.enrolledFactors.filter(({uid:Fe})=>Fe!==A),yield f.user._updateTokensIfNecessary(ae),yield f.user.reload()}catch(ae){throw ae}})()}}const $o=new WeakMap;function El(I){const h=(0,R.Ku)(I);return $o.has(h)||$o.set(h,Yn._fromUser(h)),$o.get(h)}const ai="__sak";class jn{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ai,"1"),this.storage.removeItem(ai),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const _a=(()=>{class I extends jn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,A)=>this.onStorageEvent(f,A),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kt(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const A of Object.keys(this.listeners)){const W=this.storage.getItem(A),ae=this.localCache[A];W!==ae&&f(A,ae,W)}}onStorageEvent(f,A=!1){if(!f.key)return void this.forAllChangedKeys((At,Gt,Dn)=>{this.notifyListeners(At,Dn)});const W=f.key;A?this.detachListener():this.stopPolling();const ae=()=>{const At=this.storage.getItem(W);!A&&this.localCache[W]===At||this.notifyListeners(W,At)},Fe=this.storage.getItem(W);!function Xe(){return(0,R.lT)()&&10===document.documentMode}()||Fe===f.newValue||f.newValue===f.oldValue?ae():setTimeout(ae,10)}notifyListeners(f,A){this.localCache[f]=A;const W=this.listeners[f];if(W)for(const ae of Array.from(W))ae(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,A,W)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:A,newValue:W}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(A)}_removeListener(f,A){this.listeners[f]&&(this.listeners[f].delete(A),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,A){var W=()=>super._set,ae=this;return(0,_.A)(function*(){yield W().call(ae,f,A),ae.localCache[f]=JSON.stringify(A)})()}_get(f){var A=()=>super._get,W=this;return(0,_.A)(function*(){const ae=yield A().call(W,f);return W.localCache[f]=JSON.stringify(ae),ae})()}_remove(f){var A=()=>super._remove,W=this;return(0,_.A)(function*(){yield A().call(W,f),delete W.localCache[f]})()}}return I.type="LOCAL",I})(),ea=(()=>{class I extends jn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,A){}_removeListener(f,A){}}return I.type="SESSION",I})();let Is=(()=>{class I{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const A=this.receivers.find(ae=>ae.isListeningto(f));if(A)return A;const W=new I(f);return this.receivers.push(W),W}isListeningto(f){return this.eventTarget===f}handleEvent(f){var A=this;return(0,_.A)(function*(){const W=f,{eventId:ae,eventType:Fe,data:At}=W.data,Gt=A.handlersMap[Fe];if(!Gt?.size)return;W.ports[0].postMessage({status:"ack",eventId:ae,eventType:Fe});const Dn=Array.from(Gt).map(function(){var Dr=(0,_.A)(function*(io){return io(W.origin,At)});return function(io){return Dr.apply(this,arguments)}}()),$n=yield function nc(I){return Promise.all(I.map(function(){var h=(0,_.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(A){return{fulfilled:!1,reason:A}}});return function(f){return h.apply(this,arguments)}}()))}(Dn);W.ports[0].postMessage({status:"done",eventId:ae,eventType:Fe,response:$n})})()}_subscribe(f,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(A)}_unsubscribe(f,A){this.handlersMap[f]&&A&&this.handlersMap[f].delete(A),(!A||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return I.receivers=[],I})();function Kn(I="",h=10){let f="";for(let A=0;A<h;A++)f+=Math.floor(10*Math.random());return I+f}class rc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,A=50){var W=this;return(0,_.A)(function*(){const ae=typeof MessageChannel<"u"?new MessageChannel:null;if(!ae)throw new Error("connection_unavailable");let Fe,At;return new Promise((Gt,Dn)=>{const $n=Kn("",20);ae.port1.start();const Dr=setTimeout(()=>{Dn(new Error("unsupported_event"))},A);At={messageChannel:ae,onMessage(io){const Ra=io;if(Ra.data.eventId===$n)switch(Ra.data.status){case"ack":clearTimeout(Dr),Fe=setTimeout(()=>{Dn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Fe),Gt(Ra.data.response);break;default:clearTimeout(Dr),clearTimeout(Fe),Dn(new Error("invalid_response"))}}},W.handlers.add(At),ae.port1.addEventListener("message",At.onMessage),W.target.postMessage({eventType:h,eventId:$n,data:f},[ae.port2])}).finally(()=>{At&&W.removeMessageHandler(At)})})()}}function _i(){return window}function ba(){return typeof _i().WorkerGlobalScope<"u"&&"function"==typeof _i().importScripts}function bi(){return(bi=(0,_.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const As="firebaseLocalStorageDb",ta="firebaseLocalStorage",qc="fbase_key";class to{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Ba(I,h){return I.transaction([ta],h?"readwrite":"readonly").objectStore(ta)}function Qc(){const I=indexedDB.open(As,1);return new Promise((h,f)=>{I.addEventListener("error",()=>{f(I.error)}),I.addEventListener("upgradeneeded",()=>{const A=I.result;try{A.createObjectStore(ta,{keyPath:qc})}catch(W){f(W)}}),I.addEventListener("success",(0,_.A)(function*(){const A=I.result;A.objectStoreNames.contains(ta)?h(A):(A.close(),yield function ic(){const I=indexedDB.deleteDatabase(As);return new to(I).toPromise()}(),h(yield Qc()))}))})}function Pu(I,h,f){return ki.apply(this,arguments)}function ki(){return(ki=(0,_.A)(function*(I,h,f){const A=Ba(I,!0).put({[qc]:h,value:f});return new to(A).toPromise()})).apply(this,arguments)}function ja(){return(ja=(0,_.A)(function*(I,h){const f=Ba(I,!1).get(h),A=yield new to(f).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function Cl(I,h){const f=Ba(I,!0).delete(h);return new to(f).toPromise()}const wl=(()=>{class I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,_.A)(function*(){return f.db||(f.db=yield Qc()),f.db})()}_withRetries(f){var A=this;return(0,_.A)(function*(){let W=0;for(;;)try{const ae=yield A._openDb();return yield f(ae)}catch(ae){if(W++>3)throw ae;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,_.A)(function*(){return ba()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,_.A)(function*(){f.receiver=Is._getInstance(function Ds(){return ba()?self:null}()),f.receiver._subscribe("keyChanged",function(){var A=(0,_.A)(function*(W,ae){return{keyProcessed:(yield f._poll()).includes(ae.key)}});return function(W,ae){return A.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var A=(0,_.A)(function*(W,ae){return["keyChanged"]});return function(W,ae){return A.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,_.A)(function*(){var A,W;if(f.activeServiceWorker=yield function Sa(){return bi.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new rc(f.activeServiceWorker);const ae=yield f.sender._send("ping",{},800);ae&&null!==(A=ae[0])&&void 0!==A&&A.fulfilled&&null!==(W=ae[0])&&void 0!==W&&W.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var A=this;return(0,_.A)(function*(){if(A.sender&&A.activeServiceWorker&&function Su(){var I;return(null===(I=navigator?.serviceWorker)||void 0===I?void 0:I.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:f},A.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.A)(function*(){try{if(!indexedDB)return!1;const f=yield Qc();return yield Pu(f,ai,"1"),yield Cl(f,ai),!0}catch{}return!1})()}_withPendingWrite(f){var A=this;return(0,_.A)(function*(){A.pendingWrites++;try{yield f()}finally{A.pendingWrites--}})()}_set(f,A){var W=this;return(0,_.A)(function*(){return W._withPendingWrite((0,_.A)(function*(){return yield W._withRetries(ae=>Pu(ae,f,A)),W.localCache[f]=A,W.notifyServiceWorker(f)}))})()}_get(f){var A=this;return(0,_.A)(function*(){const W=yield A._withRetries(ae=>function Mu(I,h){return ja.apply(this,arguments)}(ae,f));return A.localCache[f]=W,W})()}_remove(f){var A=this;return(0,_.A)(function*(){return A._withPendingWrite((0,_.A)(function*(){return yield A._withRetries(W=>Cl(W,f)),delete A.localCache[f],A.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,_.A)(function*(){const A=yield f._withRetries(Fe=>{const At=Ba(Fe,!1).getAll();return new to(At).toPromise()});if(!A)return[];if(0!==f.pendingWrites)return[];const W=[],ae=new Set;if(0!==A.length)for(const{fbase_key:Fe,value:At}of A)ae.add(Fe),JSON.stringify(f.localCache[Fe])!==JSON.stringify(At)&&(f.notifyListeners(Fe,At),W.push(Fe));for(const Fe of Object.keys(f.localCache))f.localCache[Fe]&&!ae.has(Fe)&&(f.notifyListeners(Fe,null),W.push(Fe));return W})()}notifyListeners(f,A){this.localCache[f]=A;const W=this.listeners[f];if(W)for(const ae of Array.from(W))ae(A)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,_.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(A)}_removeListener(f,A){this.listeners[f]&&(this.listeners[f].delete(A),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return I.type="LOCAL",I})(),Tl=1e12;class Ou{constructor(h){this.auth=h,this.counter=Tl,this._widgets=new Map}render(h,f){const A=this.counter;return this._widgets.set(A,new Nu(h,this.auth.name,f||{})),this.counter++,A}reset(h){var f;const A=h||Tl;null===(f=this._widgets.get(A))||void 0===f||f.delete(),this._widgets.delete(A)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Tl))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,_.A)(function*(){var A;return null===(A=f._widgets.get(h||Tl))||void 0===A||A.execute(),""})()}}class Nu{constructor(h,f,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const W="string"==typeof h?document.getElementById(h):h;ue(W,"argument-error",{appName:f}),this.container=W,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function v(I){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<I;A++)h.push(f.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const M=Mi("rcb"),w=new yn(3e4,6e4);class O{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=_i().grecaptcha)||void 0===h||!h.render)}load(h,f=""){return ue(function j(I){return I.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(I)}(f),h,"argument-error"),this.shouldResolveImmediately(f)&&Gn(_i().grecaptcha)?Promise.resolve(_i().grecaptcha):new Promise((A,W)=>{const ae=_i().setTimeout(()=>{W(le(h,"network-request-failed"))},w.get());_i()[M]=()=>{_i().clearTimeout(ae),delete _i()[M];const At=_i().grecaptcha;if(!At||!Gn(At))return void W(le(h,"internal-error"));const Gt=At.render;At.render=(Dn,$n)=>{const Dr=Gt(Dn,$n);return this.counter++,Dr},this.hostLanguage=f,A(At)},si(`${function _r(){return Tn.recaptchaV2Script}()}?${(0,R.Am)({onload:M,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(ae),W(le(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!(null===(f=_i().grecaptcha)||void 0===f||!f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class te{load(h){return(0,_.A)(function*(){return new Ou(h)})()}clearedOneInstance(){}}const Te="recaptcha",Tt={theme:"light",type:"image"};class ft{constructor(h,f,A=Object.assign({},Tt)){this.parameters=A,this.type=Te,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=jt(h),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const W="string"==typeof f?document.getElementById(f):f;ue(W,this.auth,"argument-error"),this.container=W,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new te:new O,this.validateStartingState()}verify(){var h=this;return(0,_.A)(function*(){h.assertNotDestroyed();const f=yield h.render(),A=h.getAssertedRecaptcha();return A.getResponse(f)||new Promise(ae=>{const Fe=At=>{At&&(h.tokenChangeListeners.delete(Fe),ae(At))};h.tokenChangeListeners.add(Fe),h.isInvisible&&A.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(A=>A(f)),"function"==typeof h)h(f);else if("string"==typeof h){const A=_i()[h];"function"==typeof A&&A(f)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,_.A)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const A=document.createElement("div");f.appendChild(A),f=A}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,_.A)(function*(){ue(ln()&&!ba(),h.auth,"internal-error"),yield function mn(){let I=null;return new Promise(h=>{"complete"!==document.readyState?(I=()=>h(),window.addEventListener("load",I)):h()}).catch(h=>{throw I&&window.removeEventListener("load",I),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function mt(I){return ti.apply(this,arguments)}(h.auth);ue(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jn{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=ms._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function lr(I,h,f){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const A=jt(I),W=yield Go(A,h,(0,R.Ku)(f));return new Jn(W,ae=>fa(A,ae))})).apply(this,arguments)}function Ac(I,h,f){return na.apply(this,arguments)}function na(){return(na=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);yield Ts(!1,A,"phone");const W=yield Go(A.auth,h,(0,R.Ku)(f));return new Jn(W,ae=>La(A,ae))})).apply(this,arguments)}function fo(I,h,f){return $s.apply(this,arguments)}function $s(){return($s=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);if((0,T._isFirebaseServerApp)(A.auth.app))return Promise.reject(je(A.auth));const W=yield Go(A.auth,h,(0,R.Ku)(f));return new Jn(W,ae=>Ua(A,ae))})).apply(this,arguments)}function Go(I,h,f){return xu.apply(this,arguments)}function xu(){return xu=(0,_.A)(function*(I,h,f){var A;const W=yield f.verify();try{let ae;if(ue("string"==typeof W,I,"argument-error"),ue(f.type===Te,I,"argument-error"),ae="string"==typeof h?{phoneNumber:h}:h,"session"in ae){const Fe=ae.session;if("phoneNumber"in ae)return ue("enroll"===Fe.type,I,"internal-error"),(yield function rs(I,h){return Ye(I,"POST","/v2/accounts/mfaEnrollment:start",Et(I,h))}(I,{idToken:Fe.credential,phoneEnrollmentInfo:{phoneNumber:ae.phoneNumber,recaptchaToken:W}})).phoneSessionInfo.sessionInfo;{ue("signin"===Fe.type,I,"internal-error");const At=(null===(A=ae.multiFactorHint)||void 0===A?void 0:A.uid)||ae.multiFactorUid;return ue(At,I,"missing-multi-factor-info"),(yield function Ru(I,h){return Ye(I,"POST","/v2/accounts/mfaSignIn:start",Et(I,h))}(I,{mfaPendingCredential:Fe.credential,mfaEnrollmentId:At,phoneSignInInfo:{recaptchaToken:W}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Fe}=yield function ts(I,h){return Fs.apply(this,arguments)}(I,{phoneNumber:ae.phoneNumber,recaptchaToken:W});return Fe}}finally{f._reset()}}),xu.apply(this,arguments)}function ku(I,h){return $a.apply(this,arguments)}function $a(){return($a=(0,_.A)(function*(I,h){const f=(0,R.Ku)(I);if((0,T._isFirebaseServerApp)(f.auth.app))return Promise.reject(je(f.auth));yield Zs(f,h)})).apply(this,arguments)}let Yc=(()=>{class I{constructor(f){this.providerId=I.PROVIDER_ID,this.auth=jt(f)}verifyPhoneNumber(f,A){return Go(this.auth,f,(0,R.Ku)(A))}static credential(f,A){return ms._fromVerification(f,A)}static credentialFromResult(f){return I.credentialFromTaggedObject(f)}static credentialFromError(f){return I.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:A,temporaryProof:W}=f;return A&&W?ms._fromTokenResponse(A,W):null}}return I.PROVIDER_ID="phone",I.PHONE_SIGN_IN_METHOD="phone",I})();function Pr(I,h){return h?Vt(h):(ue(I._popupRedirectResolver,I,"argument-error"),I._popupRedirectResolver)}class Ha extends nr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ri(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Ri(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Ri(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function Jc(I){return ei(I.auth,new Ha(I),I.bypassAuthState)}function Hs(I){const{auth:h,user:f}=I;return ue(f,h,"internal-error"),Bo(f,new Ha(I),I.bypassAuthState)}function Id(I){return sc.apply(this,arguments)}function sc(){return(sc=(0,_.A)(function*(I){const{auth:h,user:f}=I;return ue(f,h,"internal-error"),Zs(f,new Ha(I),I.bypassAuthState)})).apply(this,arguments)}class oc{constructor(h,f,A,W,ae=!1){this.auth=h,this.resolver=A,this.user=W,this.bypassAuthState=ae,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,_.A)(function*(A,W){h.pendingPromise={resolve:A,reject:W};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(ae){h.reject(ae)}});return function(A,W){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,_.A)(function*(){const{urlResponse:A,sessionId:W,postBody:ae,tenantId:Fe,error:At,type:Gt}=h;if(At)return void f.reject(At);const Dn={auth:f.auth,requestUri:A,sessionId:W,tenantId:Fe||void 0,postBody:ae||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Gt)(Dn))}catch($n){f.reject($n)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Jc;case"linkViaPopup":case"linkViaRedirect":return Id;case"reauthViaPopup":case"reauthViaRedirect":return Hs;default:oe(this.auth,"internal-error")}}resolve(h){Lt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Lt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zo=new yn(2e3,1e4);function ef(I,h,f){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(le(I,"operation-not-supported-in-this-environment"));const A=jt(I);Ne(I,h,wi);const W=Pr(A,f);return new Al(A,"signInViaPopup",h,W).executeNotNull()})).apply(this,arguments)}function Dl(I,h,f){return no.apply(this,arguments)}function no(){return(no=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);if((0,T._isFirebaseServerApp)(A.auth.app))return Promise.reject(le(A.auth,"operation-not-supported-in-this-environment"));Ne(A.auth,h,wi);const W=Pr(A.auth,f);return new Al(A.auth,"reauthViaPopup",h,W,A).executeNotNull()})).apply(this,arguments)}function tf(I,h,f){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);Ne(A.auth,h,wi);const W=Pr(A.auth,f);return new Al(A.auth,"linkViaPopup",h,W,A).executeNotNull()})).apply(this,arguments)}let Al=(()=>{class I extends oc{constructor(f,A,W,ae,Fe){super(f,A,ae,Fe),this.provider=W,this.authWindow=null,this.pollId=null,I.currentPopupAction&&I.currentPopupAction.cancel(),I.currentPopupAction=this}executeNotNull(){var f=this;return(0,_.A)(function*(){const A=yield f.execute();return ue(A,f.auth,"internal-error"),A})()}onExecution(){var f=this;return(0,_.A)(function*(){Lt(1===f.filter.length,"Popup operations only handle one event");const A=Kn();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],A),f.authWindow.associatedEvent=A,f.resolver._originValidation(f.auth).catch(W=>{f.reject(W)}),f.resolver._isIframeWebStorageSupported(f.auth,W=>{W||f.reject(le(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,I.currentPopupAction=null}pollUserCancellation(){const f=()=>{var A,W;this.pollId=null!==(W=null===(A=this.authWindow)||void 0===A?void 0:A.window)&&void 0!==W&&W.closed?window.setTimeout(()=>{this.pollId=null,this.reject(le(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,zo.get())};f()}}return I.currentPopupAction=null,I})();const bl="pendingRedirect",bc=new Map;class Fu extends oc{constructor(h,f,A=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,A),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,_.A)(function*(){let A=bc.get(f.auth._key());if(!A){try{const ae=(yield function Sl(I,h){return za.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;A=()=>Promise.resolve(ae)}catch(W){A=()=>Promise.reject(W)}bc.set(f.auth._key(),A)}return f.bypassAuthState||bc.set(f.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,A=this;return(0,_.A)(function*(){if("signInViaRedirect"===h.type)return f().call(A,h);if("unknown"!==h.type){if(h.eventId){const W=yield A.auth._redirectUserForId(h.eventId);if(W)return A.user=W,f().call(A,h);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,_.A)(function*(){})()}cleanUp(){}}function za(){return(za=(0,_.A)(function*(I,h){const f=rf(h),A=wd(I);if(!(yield A._isAvailable()))return!1;const W="true"===(yield A._get(f));return yield A._remove(f),W})).apply(this,arguments)}function po(I,h){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,_.A)(function*(I,h){return wd(I)._set(rf(h),"true")})).apply(this,arguments)}function Cd(){bc.clear()}function nf(I,h){bc.set(I._key(),h)}function wd(I){return Vt(I._redirectPersistence)}function rf(I){return zn(bl,I.config.apiKey,I.name)}function Td(I,h,f){return function Pl(I,h,f){return Wa.apply(this,arguments)}(I,h,f)}function Wa(){return(Wa=(0,_.A)(function*(I,h,f){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const A=jt(I);Ne(I,h,wi),yield A._initializationPromise;const W=Pr(A,f);return yield po(W,A),W._openRedirect(A,h,"signInViaRedirect")})).apply(this,arguments)}function Dd(I,h,f){return function Ad(I,h,f){return Ml.apply(this,arguments)}(I,h,f)}function Ml(){return(Ml=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);if(Ne(A.auth,h,wi),(0,T._isFirebaseServerApp)(A.auth.app))return Promise.reject(je(A.auth));yield A.auth._initializationPromise;const W=Pr(A.auth,f);yield po(W,A.auth);const ae=yield Sc(A);return W._openRedirect(A.auth,h,"reauthViaRedirect",ae)})).apply(this,arguments)}function Rl(I,h,f){return function Kp(I,h,f){return Ft.apply(this,arguments)}(I,h,f)}function Ft(){return(Ft=(0,_.A)(function*(I,h,f){const A=(0,R.Ku)(I);Ne(A.auth,h,wi),yield A.auth._initializationPromise;const W=Pr(A.auth,f);yield Ts(!1,A,h.providerId),yield po(W,A.auth);const ae=yield Sc(A);return W._openRedirect(A.auth,h,"linkViaRedirect",ae)})).apply(this,arguments)}function Mr(I,h){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,_.A)(function*(I,h){return yield jt(I)._initializationPromise,Vu(I,h,!1)})).apply(this,arguments)}function Vu(I,h){return Br.apply(this,arguments)}function Br(){return(Br=(0,_.A)(function*(I,h,f=!1){if((0,T._isFirebaseServerApp)(I.app))return Promise.reject(je(I));const A=jt(I),W=Pr(A,h),Fe=yield new Fu(A,W,f).execute();return Fe&&!f&&(delete Fe.user._redirectEventId,yield A._persistUserIfCurrent(Fe.user),yield A._setRedirectUser(null,h)),Fe})).apply(this,arguments)}function Sc(I){return ra.apply(this,arguments)}function ra(){return(ra=(0,_.A)(function*(I){const h=Kn(`${I.uid}:::`);return I._redirectEventId=h,yield I.auth._setRedirectUser(I),yield I.auth._persistUserIfCurrent(I),h})).apply(this,arguments)}class Lu{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(h,A)&&(f=!0,this.sendToConsumer(h,A),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Sd(I){switch(I.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bd(I);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var A;if(h.error&&!bd(h)){const W=(null===(A=h.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";f.onError(le(this.auth,W))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const A=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&A}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bs(h))}saveEventToCache(h){this.cachedEventUids.add(bs(h)),this.lastProcessedEventTime=Date.now()}}function bs(I){return[I.type,I.eventId,I.sessionId,I.tenantId].filter(h=>h).join("-")}function bd({type:I,error:h}){return"unknown"===I&&"auth/no-auth-event"===h?.code}function eu(I){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,_.A)(function*(I,h={}){return Ye(I,"GET","/v1/projects",h)})).apply(this,arguments)}const ro=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pc=/^https?/;function Gs(){return(Gs=(0,_.A)(function*(I){if(I.config.emulator)return;const{authorizedDomains:h}=yield eu(I);for(const f of h)try{if(qp(f))return}catch{}oe(I,"unauthorized-domain")})).apply(this,arguments)}function qp(I){const h=Ut(),{protocol:f,hostname:A}=new URL(h);if(I.startsWith("chrome-extension://")){const Fe=new URL(I);return""===Fe.hostname&&""===A?"chrome-extension:"===f&&I.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&Fe.hostname===A}if(!Pc.test(f))return!1;if(ro.test(I))return A===I;const W=I.replace(/\./g,"\\.");return new RegExp("^(.+\\."+W+"|"+W+")$","i").test(A)}const Mc=new yn(3e4,6e4);function Pd(){const I=_i().___jsl;if(I?.H)for(const h of Object.keys(I.H))if(I.H[h].r=I.H[h].r||[],I.H[h].L=I.H[h].L||[],I.H[h].r=[...I.H[h].L],I.CP)for(let f=0;f<I.CP.length;f++)I.CP[f]=null}let Rc=null;const Nl=new yn(5e3,15e3),xl="__/auth/iframe",sf="emulator/auth/iframe",af={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rd(I){const h=I.config;ue(h.authDomain,I,"auth-domain-config-required");const f=h.emulator?xe(h,sf):`https://${I.config.authDomain}/${xl}`,A={apiKey:h.apiKey,appName:I.name,v:T.SDK_VERSION},W=tu.get(I.config.apiHost);W&&(A.eid=W);const ae=I._getFrameworks();return ae.length&&(A.fw=ae.join(",")),`${f}?${(0,R.Am)(A).slice(1)}`}function Uu(){return Uu=(0,_.A)(function*(I){const h=yield function Md(I){return Rc=Rc||function ac(I){return new Promise((h,f)=>{var A,W,ae;function Fe(){Pd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Pd(),f(le(I,"network-request-failed"))},timeout:Mc.get()})}if(null!==(W=null===(A=_i().gapi)||void 0===A?void 0:A.iframes)&&void 0!==W&&W.Iframe)h(gapi.iframes.getContext());else{if(null===(ae=_i().gapi)||void 0===ae||!ae.load){const At=Mi("iframefcb");return _i()[At]=()=>{gapi.load?Fe():f(le(I,"network-request-failed"))},si(`${function Xr(){return Tn.gapiScript}()}?onload=${At}`).catch(Gt=>f(Gt))}Fe()}}).catch(h=>{throw Rc=null,h})}(I),Rc}(I),f=_i().gapi;return ue(f,I,"internal-error"),h.open({where:document.body,url:Rd(I),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:af,dontclear:!0},A=>new Promise(function(){var W=(0,_.A)(function*(ae,Fe){yield A.restyle({setHideOnLeave:!1});const At=le(I,"network-request-failed"),Gt=_i().setTimeout(()=>{Fe(At)},Nl.get());function Dn(){_i().clearTimeout(Gt),ae(A)}A.ping(Dn).then(Dn,()=>{Fe(At)})});return function(ae,Fe){return W.apply(this,arguments)}}()))}),Uu.apply(this,arguments)}const uf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Si{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Xp="__/auth/handler",Yp="emulator/auth/handler",df=encodeURIComponent("fac");function nu(I,h,f,A,W,ae){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,_.A)(function*(I,h,f,A,W,ae){ue(I.config.authDomain,I,"auth-domain-config-required"),ue(I.config.apiKey,I,"invalid-api-key");const Fe={apiKey:I.config.apiKey,appName:I.name,authType:f,redirectUrl:A,v:T.SDK_VERSION,eventId:W};if(h instanceof wi){h.setDefaultLanguage(I.languageCode),Fe.providerId=h.providerId||"",(0,R.Im)(h.getCustomParameters())||(Fe.customParameters=JSON.stringify(h.getCustomParameters()));for(const[$n,Dr]of Object.entries(ae||{}))Fe[$n]=Dr}if(h instanceof Co){const $n=h.getScopes().filter(Dr=>""!==Dr);$n.length>0&&(Fe.scopes=$n.join(","))}I.tenantId&&(Fe.tid=I.tenantId);const At=Fe;for(const $n of Object.keys(At))void 0===At[$n]&&delete At[$n];const Gt=yield I._getAppCheckToken(),Dn=Gt?`#${df}=${encodeURIComponent(Gt)}`:"";return`${function Pa({config:I}){return I.emulator?xe(I,Yp):`https://${I.authDomain}/${Xp}`}(I)}?${(0,R.Am)(At).slice(1)}${Dn}`})).apply(this,arguments)}const Od="webStorageSupport",Bu=class Fl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ea,this._completeRedirectFn=Vu,this._overrideRedirectResult=nf}_openPopup(h,f,A,W){var ae=this;return(0,_.A)(function*(){var Fe;Lt(null===(Fe=ae.eventManagers[h._key()])||void 0===Fe?void 0:Fe.manager,"_initialize() not called before _openPopup()");const At=yield nu(h,f,A,Ut(),W);return function Qp(I,h,f,A=500,W=600){const ae=Math.max((window.screen.availHeight-W)/2,0).toString(),Fe=Math.max((window.screen.availWidth-A)/2,0).toString();let At="";const Gt=Object.assign(Object.assign({},uf),{width:A.toString(),height:W.toString(),top:ae,left:Fe}),Dn=(0,R.ZQ)().toLowerCase();f&&(At=Yr(Dn)?"_blank":f),Re(Dn)&&(h=h||"http://localhost",Gt.scrollbars="yes");const $n=Object.entries(Gt).reduce((io,[Ra,Hu])=>`${io}${Ra}=${Hu},`,"");if(function yt(I=(0,R.ZQ)()){var h;return Gi(I)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Dn)&&"_self"!==At)return function lf(I,h){const f=document.createElement("a");f.href=I,f.target=h;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(A)}(h||"",At),new Si(null);const Dr=window.open(h||"",At,$n);ue(Dr,I,"popup-blocked");try{Dr.focus()}catch{}return new Si(Dr)}(h,At,Kn())})()}_openRedirect(h,f,A,W){var ae=this;return(0,_.A)(function*(){return yield ae._originValidation(h),function bo(I){_i().location.href=I}(yield nu(h,f,A,Ut(),W)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:W,promise:ae}=this.eventManagers[f];return W?Promise.resolve(W):(Lt(ae,"If manager is not set, promise should be"),ae)}const A=this.initAndGetManager(h);return this.eventManagers[f]={promise:A},A.catch(()=>{delete this.eventManagers[f]}),A}initAndGetManager(h){var f=this;return(0,_.A)(function*(){const A=yield function cf(I){return Uu.apply(this,arguments)}(h),W=new Lu(h);return A.register("authEvent",ae=>(ue(ae?.authEvent,h,"invalid-auth-event"),{status:W.onEvent(ae.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:W},f.iframes[h._key()]=A,W})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(Od,{type:Od},W=>{var ae;const Fe=null===(ae=W?.[0])||void 0===ae?void 0:ae[Od];void 0!==Fe&&f(!!Fe),oe(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function ia(I){return Gs.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return kt()||Gr()||Gi()}};class Nc{constructor(h){this.factorId=h}_process(h,f,A){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,A);case"signin":return this._finalizeSignIn(h,f.credential);default:return He("unexpected MultiFactorSessionType")}}}class ju extends Nc{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new ju(h)}_finalizeEnroll(h,f,A){return function js(I,h){return Ye(I,"POST","/v2/accounts/mfaEnrollment:finalize",Et(I,h))}(h,{idToken:f,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function Ed(I,h){return Ye(I,"POST","/v2/accounts/mfaSignIn:finalize",Et(I,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $u=(()=>{class I{constructor(){}static assertion(f){return ju._fromCredential(f)}}return I.FACTOR_ID="phone",I})();var Ll="@firebase/auth";class Ul{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,_.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(A=>{h(A?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);f&&(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,R.XA)("authIdTokenMaxAge"),function br(I){Tn=I}({loadJS:I=>new Promise((h,f)=>{const A=document.createElement("script");A.setAttribute("src",I),A.onload=h,A.onerror=W=>{const ae=le("internal-error");ae.customData=W,f(ae)},A.type="text/javascript",A.charset="UTF-8",function xc(){var I,h;return null!==(h=null===(I=document.getElementsByTagName("head"))||void 0===I?void 0:I[0])&&void 0!==h?h:document}().appendChild(A)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function kd(I){(0,T._registerComponent)(new Ae.uA("auth",(h,{options:f})=>{const A=h.getProvider("app").getImmediate(),W=h.getProvider("heartbeat"),ae=h.getProvider("app-check-internal"),{apiKey:Fe,authDomain:At}=A.options;ue(Fe&&!Fe.includes(":"),"invalid-api-key",{appName:A.name});const Gt={apiKey:Fe,authDomain:At,clientPlatform:I,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cn(I)},Dn=new Xt(A,W,ae,Gt);return function Fo(I,h){const f=h?.persistence||[],A=(Array.isArray(f)?f:[f]).map(Vt);h?.errorMap&&I._updateErrorMap(h.errorMap),I._initializeWithPersistence(A,h?.popupRedirectResolver)}(Dn,f),Dn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,A)=>{h.getProvider("auth-internal").initialize()})),(0,T._registerComponent)(new Ae.uA("auth-internal",h=>{const f=jt(h.getProvider("auth").getImmediate());return new Ul(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,T.registerVersion)(Ll,"1.7.8",function xd(I){switch(I){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(I)),(0,T.registerVersion)(Ll,"1.7.8","esm2017")}("Browser")},1076:(rn,ze,k)=>{k.d(ze,{Am:()=>Qn,Bd:()=>He,FA:()=>Kt,Fy:()=>je,I9:()=>Zn,Im:()=>mt,Ku:()=>Pt,Ll:()=>ue,T9:()=>oe,Uj:()=>Be,XA:()=>le,ZQ:()=>Ne,bD:()=>Nt,cY:()=>ee,eX:()=>dt,g:()=>Ye,gR:()=>rr,hp:()=>bn,jZ:()=>Ct,lT:()=>en,lV:()=>ln,mS:()=>rt,nr:()=>xe,p7:()=>Lt,sr:()=>Ut,tD:()=>kr,u:()=>Ee,zW:()=>qe,zw:()=>Ge});const E=function(pe){const q=[];let J=0;for(let se=0;se<pe.length;se++){let me=pe.charCodeAt(se);me<128?q[J++]=me:me<2048?(q[J++]=me>>6|192,q[J++]=63&me|128):55296==(64512&me)&&se+1<pe.length&&56320==(64512&pe.charCodeAt(se+1))?(me=65536+((1023&me)<<10)+(1023&pe.charCodeAt(++se)),q[J++]=me>>18|240,q[J++]=me>>12&63|128,q[J++]=me>>6&63|128,q[J++]=63&me|128):(q[J++]=me>>12|224,q[J++]=me>>6&63|128,q[J++]=63&me|128)}return q},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(pe,q){if(!Array.isArray(pe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,se=[];for(let me=0;me<pe.length;me+=3){const wt=pe[me],Vt=me+1<pe.length,En=Vt?pe[me+1]:0,Bn=me+2<pe.length,zn=Bn?pe[me+2]:0;let Re=(15&En)<<2|zn>>6,Gr=63&zn;Bn||(Gr=64,Vt||(Re=64)),se.push(J[wt>>2],J[(3&wt)<<4|En>>4],J[Re],J[Gr])}return se.join("")},encodeString(pe,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(pe):this.encodeByteArray(E(pe),q)},decodeString(pe,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(pe):function(pe){const q=[];let J=0,se=0;for(;J<pe.length;){const me=pe[J++];if(me<128)q[se++]=String.fromCharCode(me);else if(me>191&&me<224){const wt=pe[J++];q[se++]=String.fromCharCode((31&me)<<6|63&wt)}else if(me>239&&me<365){const Bn=((7&me)<<18|(63&pe[J++])<<12|(63&pe[J++])<<6|63&pe[J++])-65536;q[se++]=String.fromCharCode(55296+(Bn>>10)),q[se++]=String.fromCharCode(56320+(1023&Bn))}else{const wt=pe[J++],Vt=pe[J++];q[se++]=String.fromCharCode((15&me)<<12|(63&wt)<<6|63&Vt)}}return q.join("")}(this.decodeStringToByteArray(pe,q))},decodeStringToByteArray(pe,q){this.init_();const J=q?this.charToByteMapWebSafe_:this.charToByteMap_,se=[];for(let me=0;me<pe.length;){const wt=J[pe.charAt(me++)],En=me<pe.length?J[pe.charAt(me)]:0;++me;const zn=me<pe.length?J[pe.charAt(me)]:64;++me;const Wt=me<pe.length?J[pe.charAt(me)]:64;if(++me,null==wt||null==En||null==zn||null==Wt)throw new ge;se.push(wt<<2|En>>4),64!==zn&&(se.push(En<<4&240|zn>>2),64!==Wt&&se.push(zn<<6&192|Wt))}return se},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let pe=0;pe<this.ENCODED_VALS.length;pe++)this.byteToCharMap_[pe]=this.ENCODED_VALS.charAt(pe),this.charToByteMap_[this.byteToCharMap_[pe]]=pe,this.byteToCharMapWebSafe_[pe]=this.ENCODED_VALS_WEBSAFE.charAt(pe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[pe]]=pe,pe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(pe)]=pe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(pe)]=pe)}}};class ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Be=function(pe){return function(pe){const q=E(pe);return Ae.encodeByteArray(q,!0)}(pe).replace(/\./g,"")},Ee=function(pe){try{return Ae.decodeString(pe,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function Ge(pe,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===pe&&(pe={});break;case Array:pe=[];break;default:return q}for(const J in q)!q.hasOwnProperty(J)||!lt(J)||(pe[J]=Ge(pe[J],q[J]));return pe}function lt(pe){return"__proto__"!==pe}function rt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const et=()=>{try{return rt().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const pe=process.env.__FIREBASE_DEFAULTS__;return pe?JSON.parse(pe):void 0})()||(()=>{if(typeof document>"u")return;let pe;try{pe=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const q=pe&&Ee(pe[1]);return q&&JSON.parse(q)})()}catch(pe){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${pe}`)}},oe=()=>{var pe;return null===(pe=et())||void 0===pe?void 0:pe.config},le=pe=>{var q;return null===(q=et())||void 0===q?void 0:q[`_${pe}`]};class ee{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,J)=>{this.resolve=q,this.reject=J})}wrapCallback(q){return(J,se)=>{J?this.reject(J):this.resolve(se),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(J):q(J,se))}}}function je(pe,q){if(pe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const se=q||"demo-project",me=pe.iat||0,wt=pe.sub||pe.user_id;if(!wt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Vt=Object.assign({iss:`https://securetoken.google.com/${se}`,aud:se,iat:me,exp:me+3600,auth_time:me,sub:wt,user_id:wt,firebase:{sign_in_provider:"custom",identities:{}}},pe);return[Be(JSON.stringify({alg:"none",type:"JWT"})),Be(JSON.stringify(Vt)),""].join(".")}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ct(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function ue(){var pe;const q=null===(pe=et())||void 0===pe?void 0:pe.forceEnvironment;if("node"===q)return!0;if("browser"===q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function He(){return typeof window<"u"||Lt()}function Lt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ut(){const pe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof pe&&void 0!==pe.id}function ln(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function en(){const pe=Ne();return pe.indexOf("MSIE ")>=0||pe.indexOf("Trident/")>=0}function xe(){return!ue()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){try{return"object"==typeof indexedDB}catch{return!1}}function dt(){return new Promise((pe,q)=>{try{let J=!0;const se="validate-browser-context-for-indexeddb-analytics-module",me=self.indexedDB.open(se);me.onsuccess=()=>{me.result.close(),J||self.indexedDB.deleteDatabase(se),pe(!0)},me.onupgradeneeded=()=>{J=!1},me.onerror=()=>{var wt;q((null===(wt=me.error)||void 0===wt?void 0:wt.message)||"")}}catch(J){q(J)}})}class Ye extends Error{constructor(q,J,se){super(J),this.code=q,this.customData=se,this.name="FirebaseError",Object.setPrototypeOf(this,Ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kt.prototype.create)}}class Kt{constructor(q,J,se){this.service=q,this.serviceName=J,this.errors=se}create(q,...J){const se=J[0]||{},me=`${this.service}/${q}`,wt=this.errors[q],Vt=wt?function pn(pe,q){return pe.replace(nn,(J,se)=>{const me=q[se];return null!=me?String(me):`<${se}?>`})}(wt,se):"Error";return new Ye(me,`${this.serviceName}: ${Vt} (${me}).`,se)}}const nn=/\{\$([^}]+)}/g;function rr(pe,q){return Object.prototype.hasOwnProperty.call(pe,q)}function mt(pe){for(const q in pe)if(Object.prototype.hasOwnProperty.call(pe,q))return!1;return!0}function Nt(pe,q){if(pe===q)return!0;const J=Object.keys(pe),se=Object.keys(q);for(const me of J){if(!se.includes(me))return!1;const wt=pe[me],Vt=q[me];if(Ze(wt)&&Ze(Vt)){if(!Nt(wt,Vt))return!1}else if(wt!==Vt)return!1}for(const me of se)if(!J.includes(me))return!1;return!0}function Ze(pe){return null!==pe&&"object"==typeof pe}function Qn(pe){const q=[];for(const[J,se]of Object.entries(pe))Array.isArray(se)?se.forEach(me=>{q.push(encodeURIComponent(J)+"="+encodeURIComponent(me))}):q.push(encodeURIComponent(J)+"="+encodeURIComponent(se));return q.length?"&"+q.join("&"):""}function Zn(pe){const q={};return pe.replace(/^\?/,"").split("&").forEach(se=>{if(se){const[me,wt]=se.split("=");q[decodeURIComponent(me)]=decodeURIComponent(wt)}}),q}function bn(pe){const q=pe.indexOf("?");if(!q)return"";const J=pe.indexOf("#",q);return pe.substring(q,J>0?J:void 0)}function kr(pe,q){const J=new qr(pe,q);return J.subscribe.bind(J)}class qr{constructor(q,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{q(this)}).catch(se=>{this.error(se)})}next(q){this.forEachObserver(J=>{J.next(q)})}error(q){this.forEachObserver(J=>{J.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,J,se){let me;if(void 0===q&&void 0===J&&void 0===se)throw new Error("Missing Observer.");me=function Li(pe,q){if("object"!=typeof pe||null===pe)return!1;for(const J of q)if(J in pe&&"function"==typeof pe[J])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:J,complete:se},void 0===me.next&&(me.next=Rr),void 0===me.error&&(me.error=Rr),void 0===me.complete&&(me.complete=Rr);const wt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?me.error(this.finalError):me.complete()}catch{}}),this.observers.push(me),wt}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,q)}sendOne(q,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{J(this.observers[q])}catch(se){typeof console<"u"&&console.error&&console.error(se)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rr(){}function Pt(pe){return pe&&pe._delegate?pe._delegate:pe}},3227:(rn,ze,k)=>{k.d(ze,{K:()=>et});var _=k(177),T=k(4454),R=k(4438),E=k(1413);const ie=["payPalButtonContainer"];let Ae=(()=>{class Dt{constructor(oe){this.zone=oe}registerScript(oe,le,ee){const je=window[le];if(je)return void this.zone.run(()=>{ee(je)});const Ne=document.createElement("script");Ne.id=this.getElemId(le),Ne.innerHTML="",Ne.onload=()=>{this.zone.run(()=>{ee(window[le])})},Ne.src=oe,Ne.async=!0,Ne.defer=!0,document.getElementsByTagName("head")[0].appendChild(Ne)}cleanup(oe){const le=document.getElementById(this.getElemId(oe));le&&le.remove()}getElemId(oe){return`ngx-paypal-script-elem-${oe}`}}return Dt.\u0275fac=function(oe){return new(oe||Dt)(R.KVO(R.SKi))},Dt.\u0275prov=R.jDH({token:Dt,factory:Dt.\u0275fac}),Dt})(),ge=(()=>{class Dt{constructor(oe){this.scriptService=oe,this.paypalWindowName="paypal"}registerPayPalScript(oe,le){this.scriptService.registerScript(this.getUrlForConfig(oe),this.paypalWindowName,le)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(oe){const le=[{name:"client-id",value:oe.clientId}];return oe.locale&&le.push({name:"locale",value:oe.locale}),oe.currency&&le.push({name:"currency",value:oe.currency}),oe.commit&&le.push({name:"commit",value:oe.commit}),oe.vault&&le.push({name:"vault",value:oe.vault}),oe.intent&&le.push({name:"intent",value:oe.intent}),oe.funding&&le.push({name:"components",value:"buttons,funding-eligibility"}),oe.extraParams&&le.push(...oe.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(le)}`}getQueryString(oe){let le="";for(let ee=0;ee<oe.length;ee++){const je=oe[ee];le+=0===ee?"?":"&",le+=`${je.name}=${je.value}`}return le}}return Dt.\u0275fac=function(oe){return new(oe||Dt)(R.KVO(Ae))},Dt.\u0275prov=R.jDH({token:Dt,factory:Dt.\u0275fac}),Dt})(),Ve=(()=>{class Dt{constructor(oe,le,ee){this.paypalScriptService=oe,this.cdr=le,this.ngZone=ee,this.registerScript=!0,this.scriptLoaded=new R.bkB,this.ngUnsubscribe=new E.B,this.initializePayPal=!0}set payPalButtonContainer(oe){this.payPalButtonContainerElem=oe}ngOnChanges(oe){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());const le=this.config;oe.config.isFirstChange()&&le&&this.registerScript&&this.initPayPalScript(le,ee=>{this.payPal=ee,this.doPayPalCheck()}),oe.config.isFirstChange()||this.reinitialize(le)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(oe){this.payPal=oe,this.doPayPalCheck()}reinitialize(oe){if(this.config=oe,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)try{for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild)}catch(le){console.error(le)}this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,le=>{this.payPal=le,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(oe,le){this.paypalScriptService.registerPayPalScript({clientId:oe.clientId,locale:oe.advanced?.locale,commit:oe.advanced&&oe.advanced.commit?oe.advanced.commit:void 0,currency:oe.currency,vault:oe.vault,intent:oe.intent,funding:null!=oe.fundingSource||null!=oe.fundingSource,extraParams:oe.advanced&&oe.advanced.extraQueryParams?oe.advanced.extraQueryParams:[]},ee=>{this.scriptLoaded.next(ee),le(ee)})}generateElementId(){return`ngx-captcha-id-${this.generateGuid()}`}initPayPal(oe,le){this.ngZone.runOutsideAngular(()=>{const Ct={style:oe.style,fundingSource:void 0,onApprove:(He,Lt)=>this.ngZone.run(()=>{if(oe.onApprove&&oe.onApprove(He,Lt),oe.authorizeOnServer)return oe.authorizeOnServer(He,Lt);const Ut=oe.onClientAuthorization;Ut&&Lt.order.capture().then(ln=>{this.ngZone.run(()=>{Ut(ln)})})}),onError:He=>{this.ngZone.run(()=>{oe.onError&&oe.onError(He)})},onCancel:(He,Lt)=>{this.ngZone.run(()=>{oe.onCancel&&oe.onCancel(He,Lt)})},onClick:(He,Lt)=>{this.ngZone.run(()=>{oe.onClick&&oe.onClick(He,Lt)})},onInit:(He,Lt)=>{this.ngZone.run(()=>{oe.onInit&&oe.onInit(He,Lt)})},...(oe.createOrderOnClient||oe.createOrderOnServer)&&{createOrder:(He,Lt)=>this.ngZone.run(()=>{if(oe.createOrderOnClient&&oe.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!oe.createOrderOnClient&&!oe.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(oe.createOrderOnClient)return Lt.order.create(oe.createOrderOnClient(He));if(oe.createOrderOnServer)return oe.createOrderOnServer(He);throw Error("Invalid state for 'createOrder'.")})},...oe.createSubscriptionOnClient&&{createSubscription:(He,Lt)=>this.ngZone.run(()=>{if(oe.createSubscriptionOnClient)return Lt.subscription.create(oe.createSubscriptionOnClient(He))})},...oe.onShippingChange&&{onShippingChange:(He,Lt)=>this.ngZone.run(()=>{if(oe.onShippingChange)return oe.onShippingChange(He,Lt)})}};let ue;switch(oe.fundingSource){case"PAYPAL":ue=le.FUNDING.PAYPAL;break;case"CARD":ue=le.FUNDING.CARD;break;case"PAYLATER":ue=le.FUNDING.PAYLATER;break;case"CREDIT":ue=le.FUNDING.CREDIT;break;case"VENMO":ue=le.FUNDING.VENMO}null!=ue&&(Ct.fundingSource=ue,"PAYPAL"!==oe.fundingSource&&delete Ct.style?.color),le.Buttons(Ct).render(`#${this.payPalButtonContainerId}`)})}generateGuid(){let oe=(new Date).getTime(),le=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,ee=>{let je=16*Math.random();return oe>0?(je=(oe+je)%16|0,oe=Math.floor(oe/16)):(je=(le+je)%16|0,le=Math.floor(le/16)),("x"==ee?je:7&je|8).toString(16)})}}return Dt.\u0275fac=function(oe){return new(oe||Dt)(R.rXU(ge),R.rXU(R.gRc),R.rXU(R.SKi))},Dt.\u0275cmp=R.VBU({type:Dt,selectors:[["ngx-paypal"]],viewQuery:function(oe,le){if(1&oe&&R.GBs(ie,5),2&oe){let ee;R.mGM(ee=R.lsd())&&(le.payPalButtonContainer=ee.first)}},inputs:{config:"config",registerScript:"registerScript"},outputs:{scriptLoaded:"scriptLoaded"},features:[R.OA$],decls:2,vars:1,consts:[["payPalButtonContainer",""],[3,"id"]],template:function(oe,le){1&oe&&R.nrm(0,"div",1,0),2&oe&&R.Y8G("id",le.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),Dt})(),Be=(()=>{class Dt{}return Dt.\u0275fac=function(oe){return new(oe||Dt)},Dt.\u0275mod=R.$C({type:Dt}),Dt.\u0275inj=R.G2t({providers:[Ae,ge],imports:[_.MD]}),Dt})();var Ee=k(5435),_e=k(6569);let Ge=(()=>{class Dt{constructor(oe,le){this.sharedService=oe,this.authService=le,this.userId="",this.userEmail=""}ngOnInit(){this.authService.loggedUser.subscribe(oe=>{oe&&oe.user.email&&(this.userId=oe?.key,this.userEmail=oe?.user.email)}),this.cartArr$?.subscribe(oe=>{this.cartArr=oe}),this.initConfig()}update(){if(!this.userEmail)throw new Error("no user email found");this.authService.findUser(this.userEmail).subscribe(oe=>{this.authService.loggedUser.next(oe)})}initConfig(){this.paypalConfig={currency:"USD",clientId:"AQ7YdqsTpxT_ouN31zRUyhQFvr1mMuO8rfcrWINg6SE5BFQ0l67cIFOhsNjIMdaxDU2RU42hI8yx2IxG",createOrderOnClient:oe=>({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:this.totalPrice?.toString(),breakdown:{item_total:{currency_code:"USD",value:this.totalPrice?.toString()}}},items:[{name:"Music Shop Products",quantity:"1",category:"PHYSICAL_GOODS",unit_amount:{currency_code:"USD",value:this.totalPrice?.toString()}}]}]}),advanced:{commit:"true"},style:{label:"paypal",layout:"vertical"},onApprove:(oe,le)=>{this.cartArr&&this.totalPrice&&(this.sharedService.buyProducts(this.cartArr,this.totalPrice,this.userEmail,this.userId),this.update(),console.log("payment approved: ",oe,le))},onCancel:(oe,le)=>{console.log("payment cancelled: ",oe,le)},onClick:(oe,le)=>{console.log("Onclick: ",oe,le)}}}static#e=this.\u0275fac=function(le){return new(le||Dt)(R.rXU(Ee.m),R.rXU(_e.p))};static#t=this.\u0275cmp=R.VBU({type:Dt,selectors:[["app-paypal"]],inputs:{totalPrice:"totalPrice",cartArr$:"cartArr$"},standalone:!0,features:[R.aNF],decls:1,vars:1,consts:[[3,"config"]],template:function(le,ee){1&le&&R.nrm(0,"ngx-paypal",0),2&le&&R.Y8G("config",ee.paypalConfig)},dependencies:[Be,Ve]})}return Dt})();var lt=k(2906);const rt=["paymentRef"];function De(Dt,bt){if(1&Dt){const oe=R.RV6();R.j41(0,"div",5)(1,"div",6)(2,"img",7),R.bIt("click",function(){const ee=R.eBV(oe).$implicit,je=R.XpG(2);return R.Njj(je.removeFromCart(ee.product))}),R.k0s()(),R.j41(3,"div"),R.nrm(4,"img",8),R.k0s(),R.j41(5,"div",9)(6,"span"),R.EFF(7),R.k0s(),R.j41(8,"span"),R.EFF(9),R.nI1(10,"slice"),R.k0s(),R.j41(11,"span"),R.EFF(12),R.k0s(),R.j41(13,"p"),R.EFF(14),R.k0s(),R.j41(15,"p")(16,"img",10),R.bIt("click",function(){const ee=R.eBV(oe).$implicit,je=R.XpG(2);return R.Njj(je.plus(ee.product.key,"minus"))}),R.k0s(),R.EFF(17),R.j41(18,"img",11),R.bIt("click",function(){const ee=R.eBV(oe).$implicit,je=R.XpG(2);return R.Njj(je.plus(ee.product.key,"plus"))}),R.k0s()(),R.j41(19,"button",12),R.bIt("click",function(){const ee=R.eBV(oe).$implicit,je=R.XpG(2);return R.Njj(je.nav(ee.product.key,ee.product.product.category))}),R.EFF(20," See Product "),R.k0s()()()}if(2&Dt){const oe=bt.$implicit;R.R7$(4),R.Y8G("src",oe.product.product.photoUrl[0],R.B4B),R.R7$(3),R.SpI("Type: ",oe.product.product.category,""),R.R7$(2),R.SpI("Model: ",R.brH(10,6,oe.product.product.model,0,60),"..."),R.R7$(3),R.SpI("Price: ",oe.product.product.price,"$"),R.R7$(2),R.SpI("Discount -",oe.product.product.discount,"%"),R.R7$(3),R.SpI("",oe.quantity," ")}}function st(Dt,bt){if(1&Dt&&(R.j41(0,"div",13)(1,"h2"),R.EFF(2),R.k0s(),R.j41(3,"div")(4,"div"),R.nrm(5,"app-paypal",14),R.k0s()()()),2&Dt){const oe=R.XpG(2);R.R7$(2),R.SpI("Total Price: ",oe.calculateTotalPrice(),"$"),R.R7$(3),R.Y8G("cartArr$",oe.cart$)("totalPrice",oe.calculateTotalPrice())}}function it(Dt,bt){if(1&Dt&&(R.j41(0,"div",1)(1,"div")(2,"h2"),R.EFF(3,"Cart"),R.k0s()(),R.j41(4,"div",2),R.DNE(5,De,21,10,"div",3),R.nI1(6,"async"),R.k0s(),R.DNE(7,st,6,3,"div",4),R.k0s()),2&Dt){const oe=R.XpG();R.R7$(5),R.Y8G("ngForOf",R.bMT(6,2,oe.cart$)),R.R7$(2),R.Y8G("ngIf",oe.calculateTotalPrice()>0)}}let et=(()=>{class Dt{constructor(oe,le,ee,je,Ne){this.sharedService=oe,this.router=le,this.authService=ee,this.cd=je,this.cartService=Ne,this.showCart=!0}ngOnInit(){this.authService.checkIfLoggedIn(),this.cart$=this.cartService.cart.asObservable(),this.cd.detectChanges()}makePayment(){this.sharedService.buyProducts(this.cartService.cart.getValue(),this.calculateTotalPrice(),this.authService.loggedUser.getValue()?.user.email,this.authService.loggedUser.getValue()?.key)}removeFromCart(oe){this.cartService.cartOperations("remove",oe),this.calculateTotalPrice()}nav(oe,le){this.router.navigate([`single-product/${oe}`],{queryParams:{type:le,prod:oe}})}plus(oe,le){let ee=this.cartService.cart.getValue();const je=ee.findIndex(Ne=>Ne.product.key===oe);"plus"===le?ee[je].quantity++:ee[je].quantity>1&&ee[je].quantity--,this.cartService.cart.next(ee)}calculateTotalPrice(){let oe=0;return this.cartService.cart.getValue().forEach(le=>{if(le.product.product.discount>0){const ee=le.quantity*(le.product.product.price-this.calculateDiscount(le.product.product.price,le.product.product.discount));oe+=ee}else oe+=le.quantity*le.product.product.price}),oe}calculateDiscount(oe,le){return Math.round(oe*le/100)}static#e=this.\u0275fac=function(le){return new(le||Dt)(R.rXU(Ee.m),R.rXU(T.Ix),R.rXU(_e.p),R.rXU(R.gRc),R.rXU(lt.m))};static#t=this.\u0275cmp=R.VBU({type:Dt,selectors:[["app-cart"]],viewQuery:function(le,ee){if(1&le&&R.GBs(rt,7),2&le){let je;R.mGM(je=R.lsd())&&(ee.paymentRef=je.first)}},inputs:{showCart:"showCart",userEmail:"userEmail"},standalone:!0,features:[R.aNF],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"products"],["class","product",4,"ngFor","ngForOf"],["class","payment",4,"ngIf"],[1,"product"],[1,"remove"],["src","assets/remove.png","alt","img",3,"click"],["alt","img",3,"src"],[1,"description"],["src","assets/minus.png","alt","img",3,"click"],["src","assets/plus.png","alt","img",3,"click"],[3,"click"],[1,"payment"],[3,"cartArr$","totalPrice"]],template:function(le,ee){1&le&&R.DNE(0,it,8,4,"div",0),2&le&&R.Y8G("ngIf",ee.showCart)},dependencies:[_.MD,_.Sq,_.bT,_.Jj,_.P9,T.iI,Ge],styles:[".container[_ngcontent-%COMP%]{width:600px;height:600px;background-color:#98c0e0;overflow-y:scroll}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{text-align:center;padding:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]{display:flex;gap:5px;height:150px;width:80%;border:1px solid rgb(118,153,218);border-radius:8px;position:relative}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{position:absolute;right:0}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:20%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > img[_ngcontent-%COMP%]{width:100%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:repeat(2,190px);grid-template-rows:repeat(3,46px);align-content:center;align-items:center}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:14px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px;cursor:pointer}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:not(:last-child){font-size:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:24px;width:130px;border:none;color:#fff;background-color:#7699da;border-radius:3px;cursor:pointer}.container[_ngcontent-%COMP%]   .payment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}"],changeDetection:0})}return Dt})()},2906:(rn,ze,k)=>{k.d(ze,{m:()=>R});var _=k(4438),T=k(4412);let R=(()=>{class E{constructor(){this.cart=new T.t([]),this.cartArr=new _.bkB}cartOperations(Ae,ge){let Ve=this.cart.getValue();const Be=Ve.findIndex(_e=>_e.product.key===ge.key);let Ee=[...Ve];-1!==Be?"add"===Ae?Ee[Be].quantity++:Ee.splice(Be,1):"add"===Ae&&Ee.push({quantity:1,product:ge}),this.cart.next(Ee),localStorage.setItem("cart",JSON.stringify(this.cart.value))}static#e=this.\u0275fac=function(ge){return new(ge||E)};static#t=this.\u0275prov=_.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},708:(rn,ze,k)=>{k.d(ze,{n:()=>ie});var _=k(9417),T=k(4454),R=k(4438),E=k(6569);let ie=(()=>{class Ae{constructor(Ve,Be){this.service=Ve,this.router=Be,this.email=""}sendEmail(){this.email=""}navigate(Ve){if("profile"===Ve){const Be=this.service.loggedUser.getValue()?.key;this.router.navigate([`profile/${Be}`])}}static#e=this.\u0275fac=function(Be){return new(Be||Ae)(R.rXU(E.p),R.rXU(T.Ix))};static#t=this.\u0275cmp=R.VBU({type:Ae,selectors:[["app-footer"]],standalone:!0,features:[R.aNF],decls:33,vars:1,consts:[[1,"container"],[1,"flex-container"],["src","assets/placeholder.png","alt","img"],["src","assets/phone.png","alt","img"],["routerLink","/login"],["routerLink","/products"],[3,"click"],["placeholder","Enter your Email",3,"ngModelChange","ngModel"],["src","assets/send.png","alt","img",3,"click"]],template:function(Be,Ee){1&Be&&(R.j41(0,"div",0),R.nrm(1,"div"),R.j41(2,"div",1)(3,"div")(4,"h3"),R.EFF(5,"SABAMUSIC."),R.k0s(),R.j41(6,"p"),R.EFF(7,"Music Shop over 1000 brand. we sell quality product on our website"),R.k0s(),R.j41(8,"p"),R.nrm(9,"img",2),R.EFF(10,"Mindeli's street 7B"),R.k0s(),R.j41(11,"p"),R.nrm(12,"img",3),R.EFF(13,"+995 555 542 034"),R.k0s()(),R.j41(14,"div")(15,"h3"),R.EFF(16,"Menu"),R.k0s(),R.j41(17,"p",4),R.EFF(18,"Login"),R.k0s(),R.j41(19,"p",5),R.EFF(20,"Products"),R.k0s(),R.j41(21,"p"),R.EFF(22,"About Us"),R.k0s(),R.j41(23,"p"),R.EFF(24,"Terms & Policy"),R.k0s(),R.j41(25,"p",6),R.bIt("click",function(){return Ee.navigate("profile")}),R.EFF(26,"My Account"),R.k0s()(),R.j41(27,"div")(28,"h3"),R.EFF(29,"Stay Updated"),R.k0s(),R.j41(30,"div")(31,"input",7),R.mxI("ngModelChange",function(Ge){return R.DH7(Ee.email,Ge)||(Ee.email=Ge),Ge}),R.k0s(),R.j41(32,"img",8),R.bIt("click",function(){return Ee.sendEmail()}),R.k0s()()()()()),2&Be&&(R.R7$(31),R.R50("ngModel",Ee.email))},dependencies:[_.YN,_.me,_.BC,_.vS,T.iI,T.Wk],styles:[".container[_ngcontent-%COMP%]{width:90%;height:220px;margin:100px auto;display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;height:2px;background-color:#000}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;height:100%}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:7px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:4px;cursor:pointer}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-size:14px;color:#616161}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > p[_ngcontent-%COMP%]{width:190px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{border:none;border-radius:2px;width:200px;height:20px;background-color:#e9dbdb}"],changeDetection:0})}return Ae})()},2152:(rn,ze,k)=>{k.d(ze,{l:()=>Ee});var _=k(4454),T=k(177),R=k(3227),E=k(4438),ie=k(6569);function Ae(_e,Ge){if(1&_e){const lt=E.RV6();E.j41(0,"div",11)(1,"span",3),E.bIt("click",function(){E.eBV(lt);const De=E.XpG();return E.Njj(De.navigateToCategotyPage("guitar"))}),E.EFF(2,"Guitar"),E.k0s(),E.j41(3,"span",3),E.bIt("click",function(){E.eBV(lt);const De=E.XpG();return E.Njj(De.navigateToCategotyPage("drum"))}),E.EFF(4,"Drums"),E.k0s(),E.j41(5,"span",3),E.bIt("click",function(){E.eBV(lt);const De=E.XpG();return E.Njj(De.navigateToCategotyPage("bass"))}),E.EFF(6,"Bass "),E.k0s(),E.j41(7,"span",3),E.bIt("click",function(){E.eBV(lt);const De=E.XpG();return E.Njj(De.navigateToCategotyPage("piano"))}),E.EFF(8,"Piano"),E.k0s(),E.j41(9,"span",3),E.bIt("click",function(){E.eBV(lt);const De=E.XpG();return E.Njj(De.navigateToCategotyPage("other"))}),E.EFF(10,"Other"),E.k0s()()}}function ge(_e,Ge){if(1&_e){const lt=E.RV6();E.j41(0,"span",3),E.bIt("click",function(){E.eBV(lt);const De=E.XpG();return E.Njj(De.navigate("login"))}),E.EFF(1,"Log In"),E.k0s()}}function Ve(_e,Ge){if(1&_e){const lt=E.RV6();E.j41(0,"img",12),E.bIt("click",function(){E.eBV(lt);const De=E.XpG();return E.Njj(De.logOut())}),E.k0s()}}function Be(_e,Ge){if(1&_e){const lt=E.RV6();E.j41(0,"img",13),E.bIt("click",function(){E.eBV(lt);const De=E.XpG();return E.Njj(De.navigateToProfile())}),E.k0s()}}let Ee=(()=>{class _e{constructor(lt,rt,De){this.router=lt,this.loginService=rt,this.cd=De,this.dropDown=!1,this.cart=!1}ngOnInit(){this.loginService.loggedUser.subscribe(lt=>{this.user=lt,this.profilePicture=this.user?.user.photoUrl,this.cd.detectChanges()})}changeDropDown(){this.dropDown=!this.dropDown}navigateToProfile(){this.router.navigate([`profile/${this.user?.key}`])}navigateToCategotyPage(lt){this.router.navigate([`categoty/${lt}`])}openCloseCart(){this.cart=!this.cart}logOut(){this.loginService.logOut(),this.router.navigate(["/products"])}navigate(lt){this.router.navigate([`/${lt}`])}static#e=this.\u0275fac=function(rt){return new(rt||_e)(E.rXU(_.Ix),E.rXU(ie.p),E.rXU(E.gRc))};static#t=this.\u0275cmp=E.VBU({type:_e,selectors:[["app-header"]],standalone:!0,features:[E.aNF],decls:19,vars:6,consts:[[1,"header-container"],["routerLink","/products"],[1,"dropdown-container"],[3,"click"],["class","dropdown",4,"ngIf"],["src","assets/down-arrow.png","alt","img",3,"click"],[3,"click",4,"ngIf"],[1,"cart",3,"userEmail","showCart"],["src","assets/logout.png","alt","img",3,"click",4,"ngIf"],["src","assets/shopping-cart.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click",4,"ngIf"],[1,"dropdown"],["src","assets/logout.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click"]],template:function(rt,De){1&rt&&(E.j41(0,"div",0)(1,"div")(2,"span",1),E.EFF(3,"SABAMUSIC."),E.k0s(),E.j41(4,"div",2)(5,"span",3),E.bIt("click",function(){return De.changeDropDown()}),E.EFF(6,"Products "),E.DNE(7,Ae,11,0,"div",4),E.k0s(),E.j41(8,"img",5),E.bIt("click",function(){return De.changeDropDown()}),E.k0s()(),E.j41(9,"span",3),E.bIt("click",function(){return De.navigate("contact")}),E.EFF(10,"Contact"),E.k0s(),E.j41(11,"span",3),E.bIt("click",function(){return De.navigate("about-us")}),E.EFF(12,"About Us"),E.k0s(),E.DNE(13,ge,2,0,"span",6),E.nrm(14,"app-cart",7),E.k0s(),E.j41(15,"div"),E.DNE(16,Ve,1,0,"img",8),E.j41(17,"img",9),E.bIt("click",function(){return De.openCloseCart()}),E.k0s(),E.DNE(18,Be,1,0,"img",10),E.k0s()()),2&rt&&(E.R7$(7),E.Y8G("ngIf",De.dropDown),E.R7$(6),E.Y8G("ngIf",!De.user),E.R7$(),E.Y8G("userEmail",null==De.user||null==De.user.user?null:De.user.user.email)("showCart",De.cart),E.R7$(2),E.Y8G("ngIf",De.user),E.R7$(2),E.Y8G("ngIf",De.user))},dependencies:[T.MD,T.bT,_.iI,_.Wk,R.K],styles:[".header-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:160px;margin-bottom:40px;position:sticky;top:5px;z-index:2}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:60%;display:flex;justify-content:space-between;align-items:center}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child{display:flex;align-items:center;gap:10px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child > input[_ngcontent-%COMP%]{height:20px;border:none;background-color:#f3ecec;border-radius:3px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   .cart[_ngcontent-%COMP%]{position:absolute;top:80px;right:100px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:26px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:relative;font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%]{z-index:3;display:flex;flex-direction:column;position:absolute;top:30px;gap:5px;z-index:1}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:flex;gap:20px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   img[_ngcontent-%COMP%]{width:26px;height:26px;cursor:pointer}"],changeDetection:0})}return _e})()},513:(rn,ze,k)=>{k.r(ze),k.d(ze,{LoginAndRegistrationModule:()=>Ky});var _=k(177),T=k(9417),R=k(1182),E=k(4438),ie=k(1825),Ae=k(9253),ge=k(3236),Ve=k(1985),Be=k(8455),Ee=k(7673),_e=k(9172),Ge=k(9974),lt=k(4360);function rt(){return(0,Ge.N)((a,t)=>{let r,o=!1;a.subscribe((0,lt._)(t,u=>{const d=r;r=u,o&&t.next([d,u]),o=!0}))})}var De=k(6354),st=k(2816),it=k(3669);function Dt(a,t){return a===t}var Ut,ln,bt=k(5964),le=(k(2438),k(3345)),ee=k(467),je=k(7852),Ne=k(1362),Ct=k(8041),ue=k(1076),He=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lt={};(function(){var a;function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(Je,Se,$e){$e||($e=0);var tt=Array(16);if("string"==typeof Se)for(var ct=0;16>ct;++ct)tt[ct]=Se.charCodeAt($e++)|Se.charCodeAt($e++)<<8|Se.charCodeAt($e++)<<16|Se.charCodeAt($e++)<<24;else for(ct=0;16>ct;++ct)tt[ct]=Se[$e++]|Se[$e++]<<8|Se[$e++]<<16|Se[$e++]<<24;var It=Je.g[3],Le=(Se=Je.g[0])+(It^($e=Je.g[1])&((ct=Je.g[2])^It))+tt[0]+3614090360&4294967295;Le=($e=(ct=(It=(Se=($e=(ct=(It=(Se=($e=(ct=(It=(Se=($e=(ct=(It=(Se=($e=(ct=(It=(Se=($e=(ct=(It=(Se=($e=(ct=(It=(Se=($e=(ct=(It=(Se=($e=(ct=(It=(Se=($e=(ct=(It=(Se=($e=(ct=(It=(Se=($e=(ct=(It=(Se=($e=(ct=(It=(Se=($e=(ct=(It=(Se=($e=(ct=(It=(Se=$e+(Le<<7&4294967295|Le>>>25))+((Le=It+(ct^Se&($e^ct))+tt[1]+3905402710&4294967295)<<12&4294967295|Le>>>20))+((Le=ct+($e^It&(Se^$e))+tt[2]+606105819&4294967295)<<17&4294967295|Le>>>15))+((Le=$e+(Se^ct&(It^Se))+tt[3]+3250441966&4294967295)<<22&4294967295|Le>>>10))+((Le=Se+(It^$e&(ct^It))+tt[4]+4118548399&4294967295)<<7&4294967295|Le>>>25))+((Le=It+(ct^Se&($e^ct))+tt[5]+1200080426&4294967295)<<12&4294967295|Le>>>20))+((Le=ct+($e^It&(Se^$e))+tt[6]+2821735955&4294967295)<<17&4294967295|Le>>>15))+((Le=$e+(Se^ct&(It^Se))+tt[7]+4249261313&4294967295)<<22&4294967295|Le>>>10))+((Le=Se+(It^$e&(ct^It))+tt[8]+1770035416&4294967295)<<7&4294967295|Le>>>25))+((Le=It+(ct^Se&($e^ct))+tt[9]+2336552879&4294967295)<<12&4294967295|Le>>>20))+((Le=ct+($e^It&(Se^$e))+tt[10]+4294925233&4294967295)<<17&4294967295|Le>>>15))+((Le=$e+(Se^ct&(It^Se))+tt[11]+2304563134&4294967295)<<22&4294967295|Le>>>10))+((Le=Se+(It^$e&(ct^It))+tt[12]+1804603682&4294967295)<<7&4294967295|Le>>>25))+((Le=It+(ct^Se&($e^ct))+tt[13]+4254626195&4294967295)<<12&4294967295|Le>>>20))+((Le=ct+($e^It&(Se^$e))+tt[14]+2792965006&4294967295)<<17&4294967295|Le>>>15))+((Le=$e+(Se^ct&(It^Se))+tt[15]+1236535329&4294967295)<<22&4294967295|Le>>>10))+((Le=Se+(ct^It&($e^ct))+tt[1]+4129170786&4294967295)<<5&4294967295|Le>>>27))+((Le=It+($e^ct&(Se^$e))+tt[6]+3225465664&4294967295)<<9&4294967295|Le>>>23))+((Le=ct+(Se^$e&(It^Se))+tt[11]+643717713&4294967295)<<14&4294967295|Le>>>18))+((Le=$e+(It^Se&(ct^It))+tt[0]+3921069994&4294967295)<<20&4294967295|Le>>>12))+((Le=Se+(ct^It&($e^ct))+tt[5]+3593408605&4294967295)<<5&4294967295|Le>>>27))+((Le=It+($e^ct&(Se^$e))+tt[10]+38016083&4294967295)<<9&4294967295|Le>>>23))+((Le=ct+(Se^$e&(It^Se))+tt[15]+3634488961&4294967295)<<14&4294967295|Le>>>18))+((Le=$e+(It^Se&(ct^It))+tt[4]+3889429448&4294967295)<<20&4294967295|Le>>>12))+((Le=Se+(ct^It&($e^ct))+tt[9]+568446438&4294967295)<<5&4294967295|Le>>>27))+((Le=It+($e^ct&(Se^$e))+tt[14]+3275163606&4294967295)<<9&4294967295|Le>>>23))+((Le=ct+(Se^$e&(It^Se))+tt[3]+4107603335&4294967295)<<14&4294967295|Le>>>18))+((Le=$e+(It^Se&(ct^It))+tt[8]+1163531501&4294967295)<<20&4294967295|Le>>>12))+((Le=Se+(ct^It&($e^ct))+tt[13]+2850285829&4294967295)<<5&4294967295|Le>>>27))+((Le=It+($e^ct&(Se^$e))+tt[2]+4243563512&4294967295)<<9&4294967295|Le>>>23))+((Le=ct+(Se^$e&(It^Se))+tt[7]+1735328473&4294967295)<<14&4294967295|Le>>>18))+((Le=$e+(It^Se&(ct^It))+tt[12]+2368359562&4294967295)<<20&4294967295|Le>>>12))+((Le=Se+($e^ct^It)+tt[5]+4294588738&4294967295)<<4&4294967295|Le>>>28))+((Le=It+(Se^$e^ct)+tt[8]+2272392833&4294967295)<<11&4294967295|Le>>>21))+((Le=ct+(It^Se^$e)+tt[11]+1839030562&4294967295)<<16&4294967295|Le>>>16))+((Le=$e+(ct^It^Se)+tt[14]+4259657740&4294967295)<<23&4294967295|Le>>>9))+((Le=Se+($e^ct^It)+tt[1]+2763975236&4294967295)<<4&4294967295|Le>>>28))+((Le=It+(Se^$e^ct)+tt[4]+1272893353&4294967295)<<11&4294967295|Le>>>21))+((Le=ct+(It^Se^$e)+tt[7]+4139469664&4294967295)<<16&4294967295|Le>>>16))+((Le=$e+(ct^It^Se)+tt[10]+3200236656&4294967295)<<23&4294967295|Le>>>9))+((Le=Se+($e^ct^It)+tt[13]+681279174&4294967295)<<4&4294967295|Le>>>28))+((Le=It+(Se^$e^ct)+tt[0]+3936430074&4294967295)<<11&4294967295|Le>>>21))+((Le=ct+(It^Se^$e)+tt[3]+3572445317&4294967295)<<16&4294967295|Le>>>16))+((Le=$e+(ct^It^Se)+tt[6]+76029189&4294967295)<<23&4294967295|Le>>>9))+((Le=Se+($e^ct^It)+tt[9]+3654602809&4294967295)<<4&4294967295|Le>>>28))+((Le=It+(Se^$e^ct)+tt[12]+3873151461&4294967295)<<11&4294967295|Le>>>21))+((Le=ct+(It^Se^$e)+tt[15]+530742520&4294967295)<<16&4294967295|Le>>>16))+((Le=$e+(ct^It^Se)+tt[2]+3299628645&4294967295)<<23&4294967295|Le>>>9))+((Le=Se+(ct^($e|~It))+tt[0]+4096336452&4294967295)<<6&4294967295|Le>>>26))+((Le=It+($e^(Se|~ct))+tt[7]+1126891415&4294967295)<<10&4294967295|Le>>>22))+((Le=ct+(Se^(It|~$e))+tt[14]+2878612391&4294967295)<<15&4294967295|Le>>>17))+((Le=$e+(It^(ct|~Se))+tt[5]+4237533241&4294967295)<<21&4294967295|Le>>>11))+((Le=Se+(ct^($e|~It))+tt[12]+1700485571&4294967295)<<6&4294967295|Le>>>26))+((Le=It+($e^(Se|~ct))+tt[3]+2399980690&4294967295)<<10&4294967295|Le>>>22))+((Le=ct+(Se^(It|~$e))+tt[10]+4293915773&4294967295)<<15&4294967295|Le>>>17))+((Le=$e+(It^(ct|~Se))+tt[1]+2240044497&4294967295)<<21&4294967295|Le>>>11))+((Le=Se+(ct^($e|~It))+tt[8]+1873313359&4294967295)<<6&4294967295|Le>>>26))+((Le=It+($e^(Se|~ct))+tt[15]+4264355552&4294967295)<<10&4294967295|Le>>>22))+((Le=ct+(Se^(It|~$e))+tt[6]+2734768916&4294967295)<<15&4294967295|Le>>>17))+((Le=$e+(It^(ct|~Se))+tt[13]+1309151649&4294967295)<<21&4294967295|Le>>>11))+((It=(Se=$e+((Le=Se+(ct^($e|~It))+tt[4]+4149444226&4294967295)<<6&4294967295|Le>>>26))+((Le=It+($e^(Se|~ct))+tt[11]+3174756917&4294967295)<<10&4294967295|Le>>>22))^((ct=It+((Le=ct+(Se^(It|~$e))+tt[2]+718787259&4294967295)<<15&4294967295|Le>>>17))|~Se))+tt[9]+3951481745&4294967295,Je.g[0]=Je.g[0]+Se&4294967295,Je.g[1]=Je.g[1]+(ct+(Le<<21&4294967295|Le>>>11))&4294967295,Je.g[2]=Je.g[2]+ct&4294967295,Je.g[3]=Je.g[3]+It&4294967295}function m(Je,Se){this.h=Se;for(var $e=[],tt=!0,ct=Je.length-1;0<=ct;ct--){var It=0|Je[ct];tt&&It==Se||($e[ct]=It,tt=!1)}this.g=$e}(function t(Je,Se){function $e(){}$e.prototype=Se.prototype,Je.D=Se.prototype,Je.prototype=new $e,Je.prototype.constructor=Je,Je.C=function(tt,ct,It){for(var Le=Array(arguments.length-2),Bc=2;Bc<arguments.length;Bc++)Le[Bc-2]=arguments[Bc];return Se.prototype[ct].apply(tt,Le)}})(o,function r(){this.blockSize=-1}),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},o.prototype.u=function(Je,Se){void 0===Se&&(Se=Je.length);for(var $e=Se-this.blockSize,tt=this.B,ct=this.h,It=0;It<Se;){if(0==ct)for(;It<=$e;)u(this,Je,It),It+=this.blockSize;if("string"==typeof Je){for(;It<Se;)if(tt[ct++]=Je.charCodeAt(It++),ct==this.blockSize){u(this,tt),ct=0;break}}else for(;It<Se;)if(tt[ct++]=Je[It++],ct==this.blockSize){u(this,tt),ct=0;break}}this.h=ct,this.o+=Se},o.prototype.v=function(){var Je=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Je[0]=128;for(var Se=1;Se<Je.length-8;++Se)Je[Se]=0;var $e=8*this.o;for(Se=Je.length-8;Se<Je.length;++Se)Je[Se]=255&$e,$e/=256;for(this.u(Je),Je=Array(16),Se=$e=0;4>Se;++Se)for(var tt=0;32>tt;tt+=8)Je[$e++]=this.g[Se]>>>tt&255;return Je};var b={};function F(Je){return-128<=Je&&128>Je?function d(Je,Se){var $e=b;return Object.prototype.hasOwnProperty.call($e,Je)?$e[Je]:$e[Je]=Se(Je)}(Je,function(Se){return new m([0|Se],0>Se?-1:0)}):new m([0|Je],0>Je?-1:0)}function H(Je){if(isNaN(Je)||!isFinite(Je))return fe;if(0>Je)return Qt(H(-Je));for(var Se=[],$e=1,tt=0;Je>=$e;tt++)Se[tt]=Je/$e|0,$e*=4294967296;return new m(Se,0)}var fe=F(0),Me=F(1),at=F(16777216);function $t(Je){if(0!=Je.h)return!1;for(var Se=0;Se<Je.g.length;Se++)if(0!=Je.g[Se])return!1;return!0}function tn(Je){return-1==Je.h}function Qt(Je){for(var Se=Je.g.length,$e=[],tt=0;tt<Se;tt++)$e[tt]=~Je.g[tt];return new m($e,~Je.h).add(Me)}function Vn(Je,Se){return Je.add(Qt(Se))}function qn(Je,Se){for(;(65535&Je[Se])!=Je[Se];)Je[Se+1]+=Je[Se]>>>16,Je[Se]&=65535,Se++}function Fn(Je,Se){this.g=Je,this.h=Se}function or(Je,Se){if($t(Se))throw Error("division by zero");if($t(Je))return new Fn(fe,fe);if(tn(Je))return Se=or(Qt(Je),Se),new Fn(Qt(Se.g),Qt(Se.h));if(tn(Se))return Se=or(Je,Qt(Se)),new Fn(Qt(Se.g),Se.h);if(30<Je.g.length){if(tn(Je)||tn(Se))throw Error("slowDivide_ only works with positive integers.");for(var $e=Me,tt=Se;0>=tt.l(Je);)$e=$r($e),tt=$r(tt);var ct=Ar($e,1),It=Ar(tt,1);for(tt=Ar(tt,2),$e=Ar($e,2);!$t(tt);){var Le=It.add(tt);0>=Le.l(Je)&&(ct=ct.add($e),It=Le),tt=Ar(tt,1),$e=Ar($e,1)}return Se=Vn(Je,ct.j(Se)),new Fn(ct,Se)}for(ct=fe;0<=Je.l(Se);){for($e=Math.max(1,Math.floor(Je.m()/Se.m())),tt=48>=(tt=Math.ceil(Math.log($e)/Math.LN2))?1:Math.pow(2,tt-48),Le=(It=H($e)).j(Se);tn(Le)||0<Le.l(Je);)Le=(It=H($e-=tt)).j(Se);$t(It)&&(It=Me),ct=ct.add(It),Je=Vn(Je,Le)}return new Fn(ct,Je)}function $r(Je){for(var Se=Je.g.length+1,$e=[],tt=0;tt<Se;tt++)$e[tt]=Je.i(tt)<<1|Je.i(tt-1)>>>31;return new m($e,Je.h)}function Ar(Je,Se){var $e=Se>>5;Se%=32;for(var tt=Je.g.length-$e,ct=[],It=0;It<tt;It++)ct[It]=0<Se?Je.i(It+$e)>>>Se|Je.i(It+$e+1)<<32-Se:Je.i(It+$e);return new m(ct,Je.h)}(a=m.prototype).m=function(){if(tn(this))return-Qt(this).m();for(var Je=0,Se=1,$e=0;$e<this.g.length;$e++){var tt=this.i($e);Je+=(0<=tt?tt:4294967296+tt)*Se,Se*=4294967296}return Je},a.toString=function(Je){if(2>(Je=Je||10)||36<Je)throw Error("radix out of range: "+Je);if($t(this))return"0";if(tn(this))return"-"+Qt(this).toString(Je);for(var Se=H(Math.pow(Je,6)),$e=this,tt="";;){var ct=or($e,Se).g,It=((0<($e=Vn($e,ct.j(Se))).g.length?$e.g[0]:$e.h)>>>0).toString(Je);if($t($e=ct))return It+tt;for(;6>It.length;)It="0"+It;tt=It+tt}},a.i=function(Je){return 0>Je?0:Je<this.g.length?this.g[Je]:this.h},a.l=function(Je){return tn(Je=Vn(this,Je))?-1:$t(Je)?0:1},a.abs=function(){return tn(this)?Qt(this):this},a.add=function(Je){for(var Se=Math.max(this.g.length,Je.g.length),$e=[],tt=0,ct=0;ct<=Se;ct++){var It=tt+(65535&this.i(ct))+(65535&Je.i(ct)),Le=(It>>>16)+(this.i(ct)>>>16)+(Je.i(ct)>>>16);tt=Le>>>16,$e[ct]=(Le&=65535)<<16|(It&=65535)}return new m($e,-2147483648&$e[$e.length-1]?-1:0)},a.j=function(Je){if($t(this)||$t(Je))return fe;if(tn(this))return tn(Je)?Qt(this).j(Qt(Je)):Qt(Qt(this).j(Je));if(tn(Je))return Qt(this.j(Qt(Je)));if(0>this.l(at)&&0>Je.l(at))return H(this.m()*Je.m());for(var Se=this.g.length+Je.g.length,$e=[],tt=0;tt<2*Se;tt++)$e[tt]=0;for(tt=0;tt<this.g.length;tt++)for(var ct=0;ct<Je.g.length;ct++){var It=this.i(tt)>>>16,Le=65535&this.i(tt),Bc=Je.i(ct)>>>16,sd=65535&Je.i(ct);$e[2*tt+2*ct]+=Le*sd,qn($e,2*tt+2*ct),$e[2*tt+2*ct+1]+=It*sd,qn($e,2*tt+2*ct+1),$e[2*tt+2*ct+1]+=Le*Bc,qn($e,2*tt+2*ct+1),$e[2*tt+2*ct+2]+=It*Bc,qn($e,2*tt+2*ct+2)}for(tt=0;tt<Se;tt++)$e[tt]=$e[2*tt+1]<<16|$e[2*tt];for(tt=Se;tt<2*Se;tt++)$e[tt]=0;return new m($e,0)},a.A=function(Je){return or(this,Je).h},a.and=function(Je){for(var Se=Math.max(this.g.length,Je.g.length),$e=[],tt=0;tt<Se;tt++)$e[tt]=this.i(tt)&Je.i(tt);return new m($e,this.h&Je.h)},a.or=function(Je){for(var Se=Math.max(this.g.length,Je.g.length),$e=[],tt=0;tt<Se;tt++)$e[tt]=this.i(tt)|Je.i(tt);return new m($e,this.h|Je.h)},a.xor=function(Je){for(var Se=Math.max(this.g.length,Je.g.length),$e=[],tt=0;tt<Se;tt++)$e[tt]=this.i(tt)^Je.i(tt);return new m($e,this.h^Je.h)},o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,ln=Lt.Md5=o,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.A,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=H,m.fromString=function re(Je,Se){if(0==Je.length)throw Error("number format error: empty string");if(2>(Se=Se||10)||36<Se)throw Error("radix out of range: "+Se);if("-"==Je.charAt(0))return Qt(re(Je.substring(1),Se));if(0<=Je.indexOf("-"))throw Error('number format error: interior "-" character');for(var $e=H(Math.pow(Se,8)),tt=fe,ct=0;ct<Je.length;ct+=8){var It=Math.min(8,Je.length-ct),Le=parseInt(Je.substring(ct,ct+It),Se);8>It?(It=H(Math.pow(Se,It)),tt=tt.j(It).add(H(Le))):tt=(tt=tt.j($e)).add(H(Le))}return tt},Ut=Lt.Integer=m}).apply(typeof He<"u"?He:typeof self<"u"?self:typeof window<"u"?window:{});var vt,yn,xe,qe,dt,_t,Et,Ye,Kt,Ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},en={};(function(){var a,t="function"==typeof Object.defineProperties?Object.defineProperty:function(g,V,z){return g==Array.prototype||g==Object.prototype||(g[V]=z.value),g},o=function r(g){g=["object"==typeof globalThis&&globalThis,g,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ht&&Ht];for(var V=0;V<g.length;++V){var z=g[V];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}(this);!function u(g,V){if(V)e:{var z=o;g=g.split(".");for(var de=0;de<g.length-1;de++){var pt=g[de];if(!(pt in z))break e;z=z[pt]}(V=V(de=z[g=g[g.length-1]]))!=de&&null!=V&&t(z,g,{configurable:!0,writable:!0,value:V})}}("Array.prototype.values",function(g){return g||function(){return function d(g,V){g instanceof String&&(g+="");var z=0,de=!1,pt={next:function(){if(!de&&z<g.length){var Ot=z++;return{value:V(Ot,g[Ot]),done:!1}}return de=!0,{done:!0,value:void 0}}};return pt[Symbol.iterator]=function(){return pt},pt}(this,function(V,z){return z})}});var m=m||{},b=this||self;function F(g){var V=typeof g;return"array"==(V="object"!=V?V:g?Array.isArray(g)?"array":V:"null")||"object"==V&&"number"==typeof g.length}function H(g){var V=typeof g;return"object"==V&&null!=g||"function"==V}function re(g,V,z){return g.call.apply(g.bind,arguments)}function fe(g,V,z){if(!g)throw Error();if(2<arguments.length){var de=Array.prototype.slice.call(arguments,2);return function(){var pt=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pt,de),g.apply(V,pt)}}return function(){return g.apply(V,arguments)}}function Me(g,V,z){return(Me=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?re:fe).apply(null,arguments)}function at(g,V){var z=Array.prototype.slice.call(arguments,1);return function(){var de=z.slice();return de.push.apply(de,arguments),g.apply(this,de)}}function $t(g,V){function z(){}z.prototype=V.prototype,g.aa=V.prototype,g.prototype=new z,g.prototype.constructor=g,g.Qb=function(de,pt,Ot){for(var _n=Array(arguments.length-2),Pi=2;Pi<arguments.length;Pi++)_n[Pi-2]=arguments[Pi];return V.prototype[pt].apply(de,_n)}}function tn(g){const V=g.length;if(0<V){const z=Array(V);for(let de=0;de<V;de++)z[de]=g[de];return z}return[]}function Qt(g,V){for(let z=1;z<arguments.length;z++){const de=arguments[z];if(F(de)){const pt=g.length||0,Ot=de.length||0;g.length=pt+Ot;for(let _n=0;_n<Ot;_n++)g[pt+_n]=de[_n]}else g.push(de)}}function qn(g){return/^[\s\xa0]*$/.test(g)}function Fn(){var g=b.navigator;return g&&(g=g.userAgent)?g:""}function or(g){return or[" "](g),g}or[" "]=function(){};var $r=!(-1==Fn().indexOf("Gecko")||-1!=Fn().toLowerCase().indexOf("webkit")&&-1==Fn().indexOf("Edge")||-1!=Fn().indexOf("Trident")||-1!=Fn().indexOf("MSIE")||-1!=Fn().indexOf("Edge"));function Ar(g,V,z){for(const de in g)V.call(z,g[de],de,g)}function Se(g){const V={};for(const z in g)V[z]=g[z];return V}const $e="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tt(g,V){let z,de;for(let pt=1;pt<arguments.length;pt++){for(z in de=arguments[pt],de)g[z]=de[z];for(let Ot=0;Ot<$e.length;Ot++)z=$e[Ot],Object.prototype.hasOwnProperty.call(de,z)&&(g[z]=de[z])}}function ct(g){var V=1;g=g.split(":");const z=[];for(;0<V&&g.length;)z.push(g.shift()),V--;return g.length&&z.push(g.join(":")),z}function It(g){b.setTimeout(()=>{throw g},0)}function Le(){var g=Am;let V=null;return g.g&&(V=g.g,g.g=g.g.next,g.g||(g.h=null),V.next=null),V}var sd=new class Vn{constructor(V,z){this.i=V,this.j=z,this.h=0,this.g=null}get(){let V;return 0<this.h?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}(()=>new vI,g=>g.reset());class vI{constructor(){this.next=this.g=this.h=null}set(V,z){this.h=V,this.g=z,this.next=null}reset(){this.next=this.g=this.h=null}}let od,tp=!1,Am=new class Bc{constructor(){this.h=this.g=null}add(V,z){const de=sd.get();de.set(V,z),this.h?this.h.next=de:this.g=de,this.h=de}},Ah=()=>{const g=b.Promise.resolve(void 0);od=()=>{g.then(qy)}};var qy=()=>{for(var g;g=Le();){try{g.h.call(g.g)}catch(z){It(z)}var V=sd;V.j(g),100>V.h&&(V.h++,g.next=V.g,V.g=g)}tp=!1};function _u(){this.s=this.s,this.C=this.C}function Oo(g,V){this.type=g,this.g=this.target=V,this.defaultPrevented=!1}_u.prototype.s=!1,_u.prototype.ma=function(){this.s||(this.s=!0,this.N())},_u.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Oo.prototype.h=function(){this.defaultPrevented=!0};var EI=function(){if(!b.addEventListener||!Object.defineProperty)return!1;var g=!1,V=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const z=()=>{};b.addEventListener("test",z,V),b.removeEventListener("test",z,V)}catch{}return g}();function dl(g,V){if(Oo.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var z=this.type=g.type,de=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=V,V=g.relatedTarget){if($r){e:{try{or(V.nodeName);var pt=!0;break e}catch{}pt=!1}pt||(V=null)}}else"mouseover"==z?V=g.fromElement:"mouseout"==z&&(V=g.toElement);this.relatedTarget=V,de?(this.clientX=void 0!==de.clientX?de.clientX:de.pageX,this.clientY=void 0!==de.clientY?de.clientY:de.pageY,this.screenX=de.screenX||0,this.screenY=de.screenY||0):(this.clientX=void 0!==g.clientX?g.clientX:g.pageX,this.clientY=void 0!==g.clientY?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType="string"==typeof g.pointerType?g.pointerType:pC[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&dl.aa.h.call(this)}}$t(dl,Oo);var pC={2:"touch",3:"pen",4:"mouse"};dl.prototype.h=function(){dl.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ad="closure_listenable_"+(1e6*Math.random()|0),Ec=0;function Qy(g,V,z,de,pt){this.listener=g,this.proxy=null,this.src=V,this.type=z,this.capture=!!de,this.ha=pt,this.key=++Ec,this.da=this.fa=!1}function np(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function bm(g){this.src=g,this.g={},this.h=0}function ws(g,V){var z=V.type;if(z in g.g){var Ot,de=g.g[z],pt=Array.prototype.indexOf.call(de,V,void 0);(Ot=0<=pt)&&Array.prototype.splice.call(de,pt,1),Ot&&(np(V),0==g.g[z].length&&(delete g.g[z],g.h--))}}function Sm(g,V,z,de){for(var pt=0;pt<g.length;++pt){var Ot=g[pt];if(!Ot.da&&Ot.listener==V&&Ot.capture==!!z&&Ot.ha==de)return pt}return-1}bm.prototype.add=function(g,V,z,de,pt){var Ot=g.toString();(g=this.g[Ot])||(g=this.g[Ot]=[],this.h++);var _n=Sm(g,V,de,pt);return-1<_n?(V=g[_n],z||(V.fa=!1)):((V=new Qy(V,this.src,Ot,!!de,pt)).fa=z,g.push(V)),V};var bh="closure_lm_"+(1e6*Math.random()|0),Pm={};function Xy(g,V,z,de,pt){if(de&&de.once)return Mm(g,V,z,de,pt);if(Array.isArray(V)){for(var Ot=0;Ot<V.length;Ot++)Xy(g,V[Ot],z,de,pt);return null}return z=Nm(z),g&&g[ad]?g.K(V,z,H(de)?!!de.capture:!!de,pt):rp(g,V,z,!1,de,pt)}function rp(g,V,z,de,pt,Ot){if(!V)throw Error("Invalid event type");var _n=H(pt)?!!pt.capture:!!pt,Pi=ip(g);if(Pi||(g[bh]=Pi=new bm(g)),(z=Pi.add(V,z,de,_n,Ot)).proxy)return z;if(de=function Yy(){const V=hl;return function g(z){return V.call(g.src,g.listener,z)}}(),z.proxy=de,de.src=g,de.listener=z,g.addEventListener)EI||(pt=_n),void 0===pt&&(pt=!1),g.addEventListener(V.toString(),de,pt);else if(g.attachEvent)g.attachEvent(Jy(V.toString()),de);else{if(!g.addListener||!g.removeListener)throw Error("addEventListener and attachEvent are unavailable.");g.addListener(de)}return z}function Mm(g,V,z,de,pt){if(Array.isArray(V)){for(var Ot=0;Ot<V.length;Ot++)Mm(g,V[Ot],z,de,pt);return null}return z=Nm(z),g&&g[ad]?g.L(V,z,H(de)?!!de.capture:!!de,pt):rp(g,V,z,!0,de,pt)}function Rm(g,V,z,de,pt){if(Array.isArray(V))for(var Ot=0;Ot<V.length;Ot++)Rm(g,V[Ot],z,de,pt);else de=H(de)?!!de.capture:!!de,z=Nm(z),g&&g[ad]?(g=g.i,(V=String(V).toString())in g.g&&-1<(z=Sm(Ot=g.g[V],z,de,pt))&&(np(Ot[z]),Array.prototype.splice.call(Ot,z,1),0==Ot.length&&(delete g.g[V],g.h--))):g&&(g=ip(g))&&(V=g.g[V.toString()],g=-1,V&&(g=Sm(V,z,de,pt)),(z=-1<g?V[g]:null)&&Om(z))}function Om(g){if("number"!=typeof g&&g&&!g.da){var V=g.src;if(V&&V[ad])ws(V.i,g);else{var z=g.type,de=g.proxy;V.removeEventListener?V.removeEventListener(z,de,g.capture):V.detachEvent?V.detachEvent(Jy(z),de):V.addListener&&V.removeListener&&V.removeListener(de),(z=ip(V))?(ws(z,g),0==z.h&&(z.src=null,V[bh]=null)):np(g)}}}function Jy(g){return g in Pm?Pm[g]:Pm[g]="on"+g}function hl(g,V){if(g.da)g=!0;else{V=new dl(V,this);var z=g.listener,de=g.ha||g.src;g.fa&&Om(g),g=z.call(de,V)}return g}function ip(g){return(g=g[bh])instanceof bm?g:null}var Sh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nm(g){return"function"==typeof g?g:(g[Sh]||(g[Sh]=function(V){return g.handleEvent(V)}),g[Sh])}function go(){_u.call(this),this.i=new bm(this),this.M=this,this.F=null}function No(g,V){var z,de=g.F;if(de)for(z=[];de;de=de.F)z.push(de);if(g=g.M,de=V.type||V,"string"==typeof V)V=new Oo(V,g);else if(V instanceof Oo)V.target=V.target||g;else{var pt=V;tt(V=new Oo(de,g),pt)}if(pt=!0,z)for(var Ot=z.length-1;0<=Ot;Ot--){var _n=V.g=z[Ot];pt=Ph(_n,de,!0,V)&&pt}if(pt=Ph(_n=V.g=g,de,!0,V)&&pt,pt=Ph(_n,de,!1,V)&&pt,z)for(Ot=0;Ot<z.length;Ot++)pt=Ph(_n=V.g=z[Ot],de,!1,V)&&pt}function Ph(g,V,z,de){if(!(V=g.i.g[String(V)]))return!0;V=V.concat();for(var pt=!0,Ot=0;Ot<V.length;++Ot){var _n=V[Ot];if(_n&&!_n.da&&_n.capture==z){var Pi=_n.listener,xo=_n.ha||_n.src;_n.fa&&ws(g.i,_n),pt=!1!==Pi.call(xo,de)&&pt}}return pt&&!de.defaultPrevented}function cd(g,V,z){if("function"==typeof g)z&&(g=Me(g,z));else{if(!g||"function"!=typeof g.handleEvent)throw Error("Invalid listener argument");g=Me(g.handleEvent,g)}return 2147483647<Number(V)?-1:b.setTimeout(g,V||0)}function sp(g){g.g=cd(()=>{g.g=null,g.i&&(g.i=!1,sp(g))},g.l);const V=g.h;g.h=null,g.m.apply(null,V)}$t(go,_u),go.prototype[ad]=!0,go.prototype.removeEventListener=function(g,V,z,de){Rm(this,g,V,z,de)},go.prototype.N=function(){if(go.aa.N.call(this),this.i){var V,g=this.i;for(V in g.g){for(var z=g.g[V],de=0;de<z.length;de++)np(z[de]);delete g.g[V],g.h--}}this.F=null},go.prototype.K=function(g,V,z,de){return this.i.add(String(g),V,!1,z,de)},go.prototype.L=function(g,V,z,de){return this.i.add(String(g),V,!0,z,de)};class yu extends _u{constructor(V,z){super(),this.m=V,this.l=z,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:sp(this)}N(){super.N(),this.g&&(b.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vu(g){_u.call(this),this.h=g,this.g={}}$t(vu,_u);var xm=[];function ud(g){Ar(g.g,function(V,z){this.g.hasOwnProperty(z)&&Om(V)},g),g.g={}}vu.prototype.N=function(){vu.aa.N.call(this),ud(this)},vu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var km=b.JSON.stringify,II=b.JSON.parse,Fm=class{stringify(g){return b.JSON.stringify(g,void 0)}parse(g){return b.JSON.parse(g,void 0)}};function op(){}function ld(){}op.prototype.h=null;var ap={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dd(){Oo.call(this,"d")}function cp(){Oo.call(this,"c")}$t(dd,Oo),$t(cp,Oo);var Eu={},Zy=null;function fl(){return Zy=Zy||new go}function hd(g){Oo.call(this,Eu.La,g)}function Mh(g){const V=fl();No(V,new hd(V))}function ev(g,V){Oo.call(this,Eu.STAT_EVENT,g),this.stat=V}function Ko(g){const V=fl();No(V,new ev(V,g))}function tv(g,V){Oo.call(this,Eu.Ma,g),this.size=V}function Rh(g,V){if("function"!=typeof g)throw Error("Fn must not be null and must be a function");return b.setTimeout(function(){g()},V)}function Oh(){this.g=!0}function $c(g,V,z,de){g.info(function(){return"XMLHTTP TEXT ("+V+"): "+function DI(g,V){if(!g.g)return V;if(!V)return null;try{var z=JSON.parse(V);if(z)for(g=0;g<z.length;g++)if(Array.isArray(z[g])){var de=z[g];if(!(2>de.length)){var pt=de[1];if(Array.isArray(pt)&&!(1>pt.length)){var Ot=pt[0];if("noop"!=Ot&&"stop"!=Ot&&"close"!=Ot)for(var _n=1;_n<pt.length;_n++)pt[_n]=""}}}return km(z)}catch{return V}}(g,z)+(de?" "+de:"")})}Eu.La="serverreachability",$t(hd,Oo),Eu.STAT_EVENT="statevent",$t(ev,Oo),Eu.Ma="timingevent",$t(tv,Oo),Oh.prototype.xa=function(){this.g=!1},Oh.prototype.info=function(){};var xh,Nh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function kh(){}function Iu(g,V,z,de){this.j=g,this.i=V,this.l=z,this.R=de||1,this.U=new vu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lm}function Lm(){this.i=null,this.g="",this.h=!1}$t(kh,op),kh.prototype.g=function(){return new XMLHttpRequest},kh.prototype.i=function(){return{}},xh=new kh;var up={},lp={};function dp(g,V,z){g.L=1,g.v=Lh(Ic(V)),g.m=z,g.P=!0,nv(g,null)}function nv(g,V){g.F=Date.now(),fd(g),g.A=Ic(g.v);var z=g.A,de=g.R;Array.isArray(de)||(de=[String(de)]),OI(z.i,"t",de),g.C=0,z=g.j.J,g.h=new Lm,g.g=wv(g.j,z?V:null,!g.m),0<g.O&&(g.M=new yu(Me(g.Y,g,g.g),g.O)),V=g.U,z=g.g,de=g.ca;var pt="readystatechange";Array.isArray(pt)||(pt&&(xm[0]=pt.toString()),pt=xm);for(var Ot=0;Ot<pt.length;Ot++){var _n=Xy(z,pt[Ot],de||V.handleEvent,!1,V.h||V);if(!_n)break;V.g[_n.key]=_n}V=g.H?Se(g.H):{},g.m?(g.u||(g.u="POST"),V["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,V)):(g.u="GET",g.g.ea(g.A,g.u,null,V)),Mh(),function CI(g,V,z,de,pt,Ot){g.info(function(){if(g.g)if(Ot)for(var _n="",Pi=Ot.split("&"),xo=0;xo<Pi.length;xo++){var vi=Pi[xo].split("=");if(1<vi.length){var ko=vi[0];vi=vi[1];var qo=ko.split("_");_n=2<=qo.length&&"type"==qo[1]?_n+(ko+"=")+vi+"&":_n+(ko+"=redacted&")}}else _n=null;else _n=Ot;return"XMLHTTP REQ ("+de+") [attempt "+pt+"]: "+V+"\n"+z+"\n"+_n})}(g.i,g.u,g.A,g.l,g.R,g.m)}function rv(g){return!!g.g&&"GET"==g.u&&2!=g.L&&g.j.Ca}function AI(g,V){var z=g.C,de=V.indexOf("\n",z);return-1==de?lp:(z=Number(V.substring(z,de)),isNaN(z)?up:(de+=1)+z>V.length?lp:(V=V.slice(de,de+z),g.C=de+z,V))}function fd(g){g.S=Date.now()+g.I,hp(g,g.I)}function hp(g,V){if(null!=g.B)throw Error("WatchDog timer not null");g.B=Rh(Me(g.ba,g),V)}function fp(g){g.B&&(b.clearTimeout(g.B),g.B=null)}function pl(g){0==g.j.G||g.J||Iv(g.j,g)}function Hc(g){fp(g);var V=g.M;V&&"function"==typeof V.ma&&V.ma(),g.M=null,ud(g.U),g.g&&(V=g.g,g.g=null,V.abort(),V.ma())}function Um(g,V){try{var z=g.j;if(0!=z.G&&(z.g==g||Fh(z.h,g)))if(!g.K&&Fh(z.h,g)&&3==z.G){try{var de=z.Da.g.parse(V)}catch{de=null}if(Array.isArray(de)&&3==de.length){var pt=de;if(0==pt[0]){e:if(!z.u){if(z.g){if(!(z.g.F+3e3<g.F))break e;Ip(z),$h(z)}Ym(z),Ko(18)}}else z.za=pt[1],0<z.za-z.T&&37500>pt[2]&&z.F&&0==z.v&&!z.C&&(z.C=Rh(Me(z.Za,z),6e3));if(1>=Bm(z.h)&&z.ca){try{z.ca()}catch{}z.ca=void 0}}else yl(z,11)}else if((g.K||z.g==g)&&Ip(z),!qn(V))for(pt=z.Da.g.parse(V),V=0;V<pt.length;V++){let vi=pt[V];if(z.T=vi[0],vi=vi[1],2==z.G)if("c"==vi[0]){z.K=vi[1],z.ia=vi[2];const ko=vi[3];null!=ko&&(z.la=ko,z.j.info("VER="+z.la));const qo=vi[4];null!=qo&&(z.Aa=qo,z.j.info("SVER="+z.Aa));const Ja=vi[5];null!=Ja&&"number"==typeof Ja&&0<Ja&&(z.L=de=1.5*Ja,z.j.info("backChannelRequestTimeoutMs_="+de)),de=z;const Cc=g.g;if(Cc){const vl=Cc.g?Cc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vl){var Ot=de.h;Ot.g||-1==vl.indexOf("spdy")&&-1==vl.indexOf("quic")&&-1==vl.indexOf("h2")||(Ot.j=Ot.l,Ot.g=new Set,Ot.h&&(Vh(Ot,Ot.h),Ot.h=null))}if(de.D){const n_=Cc.g?Cc.g.getResponseHeader("X-HTTP-Session-Id"):null;n_&&(de.ya=n_,Yi(de.I,de.D,n_))}}z.G=3,z.l&&z.l.ua(),z.ba&&(z.R=Date.now()-g.F,z.j.info("Handshake RTT: "+z.R+"ms"));var _n=g;if((de=z).qa=e_(de,de.J?de.ia:null,de.W),_n.K){jm(de.h,_n);var Pi=_n,xo=de.L;xo&&(Pi.I=xo),Pi.B&&(fp(Pi),fd(Pi)),de.g=_n}else Gh(de);0<z.i.length&&vp(z)}else"stop"!=vi[0]&&"close"!=vi[0]||yl(z,7);else 3==z.G&&("stop"==vi[0]||"close"==vi[0]?"stop"==vi[0]?yl(z,7):_v(z):"noop"!=vi[0]&&z.l&&z.l.ta(vi),z.v=0)}Mh()}catch{}}Iu.prototype.ca=function(g){g=g.target;const V=this.M;V&&3==Gc(g)?V.j():this.Y(g)},Iu.prototype.Y=function(g){try{if(g==this.g)e:{const qo=Gc(this.g);var V=this.g.Ba();if(this.g.Z(),!(3>qo)&&(3!=qo||this.g&&(this.h.h||this.g.oa()||Bh(this.g)))){this.J||4!=qo||7==V||Mh(),fp(this);var z=this.g.Z();this.X=z;t:if(rv(this)){var de=Bh(this.g);g="";var pt=de.length,Ot=4==Gc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hc(this),pl(this);var _n="";break t}this.h.i=new b.TextDecoder}for(V=0;V<pt;V++)this.h.h=!0,g+=this.h.i.decode(de[V],{stream:!(Ot&&V==pt-1)});de.length=0,this.h.g+=g,this.C=0,_n=this.h.g}else _n=this.g.oa();if(this.o=200==z,function wI(g,V,z,de,pt,Ot,_n){g.info(function(){return"XMLHTTP RESP ("+de+") [ attempt "+pt+"]: "+V+"\n"+z+"\n"+Ot+" "+_n})}(this.i,this.u,this.A,this.l,this.R,qo,z),this.o){if(this.T&&!this.K){t:{if(this.g){var Pi,xo=this.g;if((Pi=xo.g?xo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qn(Pi)){var vi=Pi;break t}}vi=null}if(!(z=vi)){this.o=!1,this.s=3,Ko(12),Hc(this),pl(this);break e}$c(this.i,this.l,z,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Um(this,z)}if(this.P){let Cc;for(z=!0;!this.J&&this.C<_n.length;){if(Cc=AI(this,_n),Cc==lp){4==qo&&(this.s=4,Ko(14),z=!1),$c(this.i,this.l,null,"[Incomplete Response]");break}if(Cc==up){this.s=4,Ko(15),$c(this.i,this.l,_n,"[Invalid Chunk]"),z=!1;break}$c(this.i,this.l,Cc,null),Um(this,Cc)}if(rv(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=qo||0!=_n.length||this.h.h||(this.s=1,Ko(16),z=!1),this.o=this.o&&z,z){if(0<_n.length&&!this.W){this.W=!0;var ko=this.j;ko.g==this&&ko.ba&&!ko.M&&(ko.j.info("Great, no buffering proxy detected. Bytes received: "+_n.length),Jm(ko),ko.M=!0,Ko(11))}}else $c(this.i,this.l,_n,"[Invalid Chunked Response]"),Hc(this),pl(this)}else $c(this.i,this.l,_n,null),Um(this,_n);4==qo&&Hc(this),this.o&&!this.J&&(4==qo?Iv(this.j,this):(this.o=!1,fd(this)))}else(function mv(g){const V={};g=(g.g&&2<=Gc(g)&&g.g.getAllResponseHeaders()||"").split("\r\n");for(let de=0;de<g.length;de++){if(qn(g[de]))continue;var z=ct(g[de]);const pt=z[0];if("string"!=typeof(z=z[1]))continue;z=z.trim();const Ot=V[pt]||[];V[pt]=Ot,Ot.push(z)}!function Je(g,V){for(const z in g)V.call(void 0,g[z],z,g)}(V,function(de){return de.join(", ")})})(this.g),400==z&&0<_n.indexOf("Unknown SID")?(this.s=3,Ko(12)):(this.s=0,Ko(13)),Hc(this),pl(this)}}}catch{}},Iu.prototype.cancel=function(){this.J=!0,Hc(this)},Iu.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(function TI(g,V){g.info(function(){return"TIMEOUT: "+V})}(this.i,this.A),2!=this.L&&(Mh(),Ko(17)),Hc(this),this.s=2,pl(this)):hp(this,this.S-g)};var bI=class{constructor(g,V){this.g=g,this.map=V}};function iv(g){this.l=g||10,g=b.PerformanceNavigationTiming?0<(g=b.performance.getEntriesByType("navigation")).length&&("hq"==g[0].nextHopProtocol||"h2"==g[0].nextHopProtocol):!!(b.chrome&&b.chrome.loadTimes&&b.chrome.loadTimes()&&b.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sv(g){return!!g.h||!!g.g&&g.g.size>=g.j}function Bm(g){return g.h?1:g.g?g.g.size:0}function Fh(g,V){return g.h?g.h==V:!!g.g&&g.g.has(V)}function Vh(g,V){g.g?g.g.add(V):g.h=V}function jm(g,V){g.h&&g.h==V?g.h=null:g.g&&g.g.has(V)&&g.g.delete(V)}function $m(g){if(null!=g.h)return g.i.concat(g.h.D);if(null!=g.g&&0!==g.g.size){let V=g.i;for(const z of g.g.values())V=V.concat(z.D);return V}return tn(g.i)}function Hm(g,V){if(g.forEach&&"function"==typeof g.forEach)g.forEach(V,void 0);else if(F(g)||"string"==typeof g)Array.prototype.forEach.call(g,V,void 0);else for(var z=function SI(g){if(g.na&&"function"==typeof g.na)return g.na();if(!g.V||"function"!=typeof g.V){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(F(g)||"string"==typeof g){var V=[];g=g.length;for(var z=0;z<g;z++)V.push(z);return V}V=[],z=0;for(const de in g)V[z++]=de;return V}}}(g),de=function ov(g){if(g.V&&"function"==typeof g.V)return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if("string"==typeof g)return g.split("");if(F(g)){for(var V=[],z=g.length,de=0;de<z;de++)V.push(g[de]);return V}for(de in V=[],z=0,g)V[z++]=g[de];return V}(g),pt=de.length,Ot=0;Ot<pt;Ot++)V.call(void 0,de[Ot],z&&z[Ot],g)}iv.prototype.cancel=function(){if(this.i=$m(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const g of this.g.values())g.cancel();this.g.clear()}};var av=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cu(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Cu){this.h=g.h,zm(this,g.j),this.o=g.o,this.g=g.g,Wm(this,g.s),this.l=g.l;var V=g.i,z=new pp;z.i=V.i,V.g&&(z.g=new Map(V.g),z.h=V.h),cv(this,z),this.m=g.m}else g&&(V=String(g).match(av))?(this.h=!1,zm(this,V[1]||"",!0),this.o=gl(V[2]||""),this.g=gl(V[3]||"",!0),Wm(this,V[4]),this.l=gl(V[5]||"",!0),cv(this,V[6]||"",!0),this.m=gl(V[7]||"")):(this.h=!1,this.i=new pp(null,this.h))}function Ic(g){return new Cu(g)}function zm(g,V,z){g.j=z?gl(V,!0):V,g.j&&(g.j=g.j.replace(/:$/,""))}function Wm(g,V){if(V){if(V=Number(V),isNaN(V)||0>V)throw Error("Bad port number "+V);g.s=V}else g.s=null}function cv(g,V,z){V instanceof pp?(g.i=V,function dv(g,V){V&&!g.j&&(ml(g),g.i=null,g.g.forEach(function(z,de){var pt=de.toLowerCase();de!=pt&&(MI(this,de),OI(this,pt,z))},g)),g.j=V}(g.i,g.h)):(z||(V=pd(V,gC)),g.i=new pp(V,g.h))}function Yi(g,V,z){g.i.set(V,z)}function Lh(g){return Yi(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function gl(g,V){return g?V?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function pd(g,V,z){return"string"==typeof g?(g=encodeURI(g).replace(V,uv),z&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function uv(g){return"%"+((g=g.charCodeAt(0))>>4&15).toString(16)+(15&g).toString(16)}Cu.prototype.toString=function(){var g=[],V=this.j;V&&g.push(pd(V,Km,!0),":");var z=this.g;return(z||"file"==V)&&(g.push("//"),(V=this.o)&&g.push(pd(V,Km,!0),"@"),g.push(encodeURIComponent(String(z)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(z=this.s)&&g.push(":",String(z))),(z=this.l)&&(this.g&&"/"!=z.charAt(0)&&g.push("/"),g.push(pd(z,"/"==z.charAt(0)?PI:lv,!0))),(z=this.i.toString())&&g.push("?",z),(z=this.m)&&g.push("#",pd(z,mC)),g.join("")};var Km=/[#\/\?@]/g,lv=/[#\?:]/g,PI=/[#\?]/g,gC=/[#\?@]/g,mC=/#/g;function pp(g,V){this.h=this.g=null,this.i=g||null,this.j=!!V}function ml(g){g.g||(g.g=new Map,g.h=0,g.i&&function Gm(g,V){if(g){g=g.split("&");for(var z=0;z<g.length;z++){var de=g[z].indexOf("="),pt=null;if(0<=de){var Ot=g[z].substring(0,de);pt=g[z].substring(de+1)}else Ot=g[z];V(Ot,pt?decodeURIComponent(pt.replace(/\+/g," ")):"")}}}(g.i,function(V,z){g.add(decodeURIComponent(V.replace(/\+/g," ")),z)}))}function MI(g,V){ml(g),V=Uh(g,V),g.g.has(V)&&(g.i=null,g.h-=g.g.get(V).length,g.g.delete(V))}function RI(g,V){return ml(g),V=Uh(g,V),g.g.has(V)}function OI(g,V,z){MI(g,V),0<z.length&&(g.i=null,g.g.set(Uh(g,V),tn(z)),g.h+=z.length)}function Uh(g,V){return V=String(V),g.j&&(V=V.toLowerCase()),V}function _l(g,V,z,de,pt){try{pt&&(pt.onload=null,pt.onerror=null,pt.onabort=null,pt.ontimeout=null),de(z)}catch{}}function yC(){this.g=new Fm}function vC(g,V,z){const de=z||"";try{Hm(g,function(pt,Ot){let _n=pt;H(pt)&&(_n=km(pt)),V.push(de+Ot+"="+encodeURIComponent(_n))})}catch(pt){throw V.push(de+"type="+encodeURIComponent("_badmap")),pt}}function gp(g){this.l=g.Ub||null,this.j=g.eb||!1}function qm(g,V){go.call(this),this.D=g,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function NI(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}function mp(g){g.readyState=4,g.l=null,g.j=null,g.v=null,_p(g)}function _p(g){g.onreadystatechange&&g.onreadystatechange.call(g)}function fv(g){let V="";return Ar(g,function(z,de){V+=de,V+=":",V+=z,V+="\r\n"}),V}function wu(g,V,z){e:{for(de in z){var de=!1;break e}de=!0}de||(z=fv(z),"string"==typeof g?null!=z&&encodeURIComponent(String(z)):Yi(g,V,z))}function Ji(g){go.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=pp.prototype).add=function(g,V){ml(this),this.i=null,g=Uh(this,g);var z=this.g.get(g);return z||this.g.set(g,z=[]),z.push(V),this.h+=1,this},a.forEach=function(g,V){ml(this),this.g.forEach(function(z,de){z.forEach(function(pt){g.call(V,pt,de,this)},this)},this)},a.na=function(){ml(this);const g=Array.from(this.g.values()),V=Array.from(this.g.keys()),z=[];for(let de=0;de<V.length;de++){const pt=g[de];for(let Ot=0;Ot<pt.length;Ot++)z.push(V[de])}return z},a.V=function(g){ml(this);let V=[];if("string"==typeof g)RI(this,g)&&(V=V.concat(this.g.get(Uh(this,g))));else{g=Array.from(this.g.values());for(let z=0;z<g.length;z++)V=V.concat(g[z])}return V},a.set=function(g,V){return ml(this),this.i=null,RI(this,g=Uh(this,g))&&(this.h-=this.g.get(g).length),this.g.set(g,[V]),this.h+=1,this},a.get=function(g,V){return g&&0<(g=this.V(g)).length?String(g[0]):V},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],V=Array.from(this.g.keys());for(var z=0;z<V.length;z++){var de=V[z];const Ot=encodeURIComponent(String(de)),_n=this.V(de);for(de=0;de<_n.length;de++){var pt=Ot;""!==_n[de]&&(pt+="="+encodeURIComponent(String(_n[de]))),g.push(pt)}}return this.i=g.join("&")},$t(gp,op),gp.prototype.g=function(){return new qm(this.l,this.j)},gp.prototype.i=function(g){return function(){return g}}({}),$t(qm,go),(a=qm.prototype).open=function(g,V){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=V,this.readyState=1,_p(this)},a.send=function(g){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const V={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(V.body=g),(this.D||b).fetch(new Request(this.A,V)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mp(this)),this.readyState=0},a.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,_p(this)),this.g&&(this.readyState=3,_p(this),this.g)))if("arraybuffer"===this.responseType)g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof b.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;NI(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var V=g.value?g.value:new Uint8Array(0);(V=this.v.decode(V,{stream:!g.done}))&&(this.response=this.responseText+=V)}g.done?mp(this):_p(this),3==this.readyState&&NI(this)}},a.Ra=function(g){this.g&&(this.response=this.responseText=g,mp(this))},a.Qa=function(g){this.g&&(this.response=g,mp(this))},a.ga=function(){this.g&&mp(this)},a.setRequestHeader=function(g,V){this.u.append(g,V)},a.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],V=this.h.entries();for(var z=V.next();!z.done;)g.push((z=z.value)[0]+": "+z[1]),z=V.next();return g.join("\r\n")},Object.defineProperty(qm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(g){this.m=g?"include":"same-origin"}}),$t(Ji,go);var xI=/^https?$/i,EC=["POST","PUT"];function Qm(g,V){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=V,g.m=5,pv(g),yp(g)}function pv(g){g.A||(g.A=!0,No(g,"complete"),No(g,"error"))}function kI(g){if(g.h&&typeof m<"u"&&(!g.v[1]||4!=Gc(g)||2!=g.Z()))if(g.u&&4==Gc(g))cd(g.Ea,0,g);else if(No(g,"readystatechange"),4==Gc(g)){g.h=!1;try{const _n=g.Z();e:switch(_n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var z;if(!(z=V)){var de;if(de=0===_n){var pt=String(g.D).match(av)[1]||null;!pt&&b.self&&b.self.location&&(pt=b.self.location.protocol.slice(0,-1)),de=!xI.test(pt?pt.toLowerCase():"")}z=de}if(z)No(g,"complete"),No(g,"success");else{g.m=6;try{var Ot=2<Gc(g)?g.g.statusText:""}catch{Ot=""}g.l=Ot+" ["+g.Z()+"]",pv(g)}}finally{yp(g)}}}function yp(g,V){if(g.g){gv(g);const z=g.g,de=g.v[0]?()=>{}:null;g.g=null,g.v=null,V||No(g,"ready");try{z.onreadystatechange=de}catch{}}}function gv(g){g.I&&(b.clearTimeout(g.I),g.I=null)}function Gc(g){return g.g?g.g.readyState:0}function Bh(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function jh(g,V,z){return z&&z.internalChannelParams&&z.internalChannelParams[g]||V}function Xm(g){this.Aa=0,this.i=[],this.j=new Oh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jh("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jh("baseRetryDelayMs",5e3,g),this.cb=jh("retryDelaySeedMs",1e4,g),this.Wa=jh("forwardChannelMaxRetries",2,g),this.wa=jh("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new iv(g&&g.concurrentRequestLimit),this.Da=new yC,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function _v(g){if(FI(g),3==g.G){var V=g.U++,z=Ic(g.I);if(Yi(z,"SID",g.K),Yi(z,"RID",V),Yi(z,"TYPE","terminate"),Hh(g,z),(V=new Iu(g,g.j,V)).L=2,V.v=Lh(Ic(z)),z=!1,b.navigator&&b.navigator.sendBeacon)try{z=b.navigator.sendBeacon(V.v.toString(),"")}catch{}!z&&b.Image&&((new Image).src=V.v,z=!0),z||(V.g=wv(V.j,null),V.g.ea(V.v)),V.F=Date.now(),fd(V)}Zm(g)}function $h(g){g.g&&(Jm(g),g.g.cancel(),g.g=null)}function FI(g){$h(g),g.u&&(b.clearTimeout(g.u),g.u=null),Ip(g),g.h.cancel(),g.s&&("number"==typeof g.s&&b.clearTimeout(g.s),g.s=null)}function vp(g){if(!sv(g.h)&&!g.s){g.s=!0;var V=g.Ga;od||Ah(),tp||(od(),tp=!0),Am.add(V,g),g.B=0}}function Ep(g,V){var z;z=V?V.l:g.U++;const de=Ic(g.I);Yi(de,"SID",g.K),Yi(de,"RID",z),Yi(de,"AID",g.T),Hh(g,de),g.m&&g.o&&wu(de,g.m,g.o),z=new Iu(g,g.j,z,g.B+1),null===g.m&&(z.H=g.o),V&&(g.i=V.D.concat(g.i)),V=vv(g,z,1e3),z.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Vh(g.h,z),dp(z,de,V)}function Hh(g,V){g.H&&Ar(g.H,function(z,de){Yi(V,de,z)}),g.l&&Hm({},function(z,de){Yi(V,de,z)})}function vv(g,V,z){z=Math.min(g.i.length,z);var de=g.l?Me(g.l.Na,g.l,g):null;e:{var pt=g.i;let Ot=-1;for(;;){const _n=["count="+z];-1==Ot?0<z?(Ot=pt[0].g,_n.push("ofs="+Ot)):Ot=0:_n.push("ofs="+Ot);let Pi=!0;for(let xo=0;xo<z;xo++){let vi=pt[xo].g;const ko=pt[xo].map;if(vi-=Ot,0>vi)Ot=Math.max(0,pt[xo].g-100),Pi=!1;else try{vC(ko,_n,"req"+vi+"_")}catch{de&&de(ko)}}if(Pi){de=_n.join("&");break e}}}return g=g.i.splice(0,z),V.D=g,de}function Gh(g){if(!g.g&&!g.u){g.Y=1;var V=g.Fa;od||Ah(),tp||(od(),tp=!0),Am.add(V,g),g.v=0}}function Ym(g){return!(g.g||g.u||3<=g.v||(g.Y++,g.u=Rh(Me(g.Fa,g),Cv(g,g.v)),g.v++,0))}function Jm(g){null!=g.A&&(b.clearTimeout(g.A),g.A=null)}function Ev(g){g.g=new Iu(g,g.j,"rpc",g.Y),null===g.m&&(g.g.H=g.o),g.g.O=0;var V=Ic(g.qa);Yi(V,"RID","rpc"),Yi(V,"SID",g.K),Yi(V,"AID",g.T),Yi(V,"CI",g.F?"0":"1"),!g.F&&g.ja&&Yi(V,"TO",g.ja),Yi(V,"TYPE","xmlhttp"),Hh(g,V),g.m&&g.o&&wu(V,g.m,g.o),g.L&&(g.g.I=g.L);var z=g.g;g=g.ia,z.L=1,z.v=Lh(Ic(V)),z.m=null,z.P=!0,nv(z,g)}function Ip(g){null!=g.C&&(b.clearTimeout(g.C),g.C=null)}function Iv(g,V){var z=null;if(g.g==V){Ip(g),Jm(g),g.g=null;var de=2}else{if(!Fh(g.h,V))return;z=V.D,jm(g.h,V),de=1}if(0!=g.G)if(V.o)if(1==de){z=V.m?V.m.length:0,V=Date.now()-V.F;var pt=g.B;No(de=fl(),new tv(de,z)),vp(g)}else Gh(g);else if(3==(pt=V.s)||0==pt&&0<V.X||!(1==de&&function yv(g,V){return!(Bm(g.h)>=g.h.j-(g.s?1:0)||(g.s?(g.i=V.D.concat(g.i),0):1==g.G||2==g.G||g.B>=(g.Va?0:g.Wa)||(g.s=Rh(Me(g.Ga,g,V),Cv(g,g.B)),g.B++,0)))}(g,V)||2==de&&Ym(g)))switch(z&&0<z.length&&(V=g.h,V.i=V.i.concat(z)),pt){case 1:yl(g,5);break;case 4:yl(g,10);break;case 3:yl(g,6);break;default:yl(g,2)}}function Cv(g,V){let z=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(z*=2),z*V}function yl(g,V){if(g.j.info("Error code "+V),2==V){var z=Me(g.fb,g),de=g.Xa;const pt=!de;de=new Cu(de||"//www.google.com/images/cleardot.gif"),b.location&&"http"==b.location.protocol||zm(de,"https"),Lh(de),pt?function hv(g,V){const z=new Oh;if(b.Image){const de=new Image;de.onload=at(_l,z,"TestLoadImage: loaded",!0,V,de),de.onerror=at(_l,z,"TestLoadImage: error",!1,V,de),de.onabort=at(_l,z,"TestLoadImage: abort",!1,V,de),de.ontimeout=at(_l,z,"TestLoadImage: timeout",!1,V,de),b.setTimeout(function(){de.ontimeout&&de.ontimeout()},1e4),de.src=g}else V(!1)}(de.toString(),z):function _C(g,V){new Oh;const de=new AbortController,pt=setTimeout(()=>{de.abort(),_l(0,0,!1,V)},1e4);fetch(g,{signal:de.signal}).then(Ot=>{clearTimeout(pt),_l(0,0,!!Ot.ok,V)}).catch(()=>{clearTimeout(pt),_l(0,0,!1,V)})}(de.toString(),z)}else Ko(2);g.G=0,g.l&&g.l.sa(V),Zm(g),FI(g)}function Zm(g){if(g.G=0,g.ka=[],g.l){const V=$m(g.h);(0!=V.length||0!=g.i.length)&&(Qt(g.ka,V),Qt(g.ka,g.i),g.h.i.length=0,tn(g.i),g.i.length=0),g.l.ra()}}function e_(g,V,z){var de=z instanceof Cu?Ic(z):new Cu(z);if(""!=de.g)V&&(de.g=V+"."+de.g),Wm(de,de.s);else{var pt=b.location;de=pt.protocol,V=V?V+"."+pt.hostname:pt.hostname,pt=+pt.port;var Ot=new Cu(null);de&&zm(Ot,de),V&&(Ot.g=V),pt&&Wm(Ot,pt),z&&(Ot.l=z),de=Ot}return V=g.ya,(z=g.D)&&V&&Yi(de,z,V),Yi(de,"VER",g.la),Hh(g,de),de}function wv(g,V,z){if(V&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return(V=new Ji(g.Ca&&!g.pa?new gp({eb:z}):g.pa)).Ha(g.J),V}function VI(){}function zh(){}function ca(g,V){go.call(this),this.g=new Xm(V),this.l=g,this.h=V&&V.messageUrlParams||null,g=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(g?g["X-WebChannel-Content-Type"]=V.messageContentType:g={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.va&&(g?g["X-WebChannel-Client-Profile"]=V.va:g={"X-WebChannel-Client-Profile":V.va}),this.g.S=g,(g=V&&V.Sb)&&!qn(g)&&(this.g.m=g),this.v=V&&V.supportsCrossDomainXhr||!1,this.u=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!qn(V)&&(this.g.D=V,null!==(g=this.h)&&V in g&&V in(g=this.h)&&delete g[V]),this.j=new gd(this)}function Tu(g){dd.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var V=g.__sm__;if(V){e:{for(const z in V){g=z;break e}g=void 0}(this.i=g)&&(g=this.i,V=null!==V&&g in V?V[g]:void 0),this.data=V}else this.data=g}function t_(){cp.call(this),this.status=1}function gd(g){this.g=g}(a=Ji.prototype).Ha=function(g){this.J=g},a.ea=function(g,V,z,de){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);V=V?V.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xh.g(),this.v=function jc(g){return g.h||(g.h=g.i())}(this.o?this.o:xh),this.g.onreadystatechange=Me(this.Ea,this);try{this.B=!0,this.g.open(V,String(g),!0),this.B=!1}catch(Ot){return void Qm(this,Ot)}if(g=z||"",z=new Map(this.headers),de)if(Object.getPrototypeOf(de)===Object.prototype)for(var pt in de)z.set(pt,de[pt]);else{if("function"!=typeof de.keys||"function"!=typeof de.get)throw Error("Unknown input type for opt_headers: "+String(de));for(const Ot of de.keys())z.set(Ot,de.get(Ot))}de=Array.from(z.keys()).find(Ot=>"content-type"==Ot.toLowerCase()),pt=b.FormData&&g instanceof b.FormData,!(0<=Array.prototype.indexOf.call(EC,V,void 0))||de||pt||z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ot,_n]of z)this.g.setRequestHeader(Ot,_n);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gv(this),this.u=!0,this.g.send(g),this.u=!1}catch(Ot){Qm(this,Ot)}},a.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,No(this,"complete"),No(this,"abort"),yp(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yp(this,!0)),Ji.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?kI(this):this.bb())},a.bb=function(){kI(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<Gc(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(g){if(this.g){var V=this.g.responseText;return g&&0==V.indexOf(g)&&(V=V.substring(g.length)),II(V)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=Xm.prototype).la=8,a.G=1,a.connect=function(g,V,z,de){Ko(0),this.W=g,this.H=V||{},z&&void 0!==de&&(this.H.OSID=z,this.H.OAID=de),this.F=this.X,this.I=e_(this,null,this.W),vp(this)},a.Ga=function(g){if(this.s)if(this.s=null,1==this.G){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const pt=new Iu(this,this.j,g);let Ot=this.o;if(this.S&&(Ot?(Ot=Se(Ot),tt(Ot,this.S)):Ot=this.S),null!==this.m||this.O||(pt.H=Ot,Ot=null),this.P)e:{for(var V=0,z=0;z<this.i.length;z++){var de=this.i[z];if(void 0===(de="__data__"in de.map&&"string"==typeof(de=de.map.__data__)?de.length:void 0))break;if(4096<(V+=de)){V=z;break e}if(4096===V||z===this.i.length-1){V=z+1;break e}}V=1e3}else V=1e3;V=vv(this,pt,V),Yi(z=Ic(this.I),"RID",g),Yi(z,"CVER",22),this.D&&Yi(z,"X-HTTP-Session-Id",this.D),Hh(this,z),Ot&&(this.O?V="headers="+encodeURIComponent(String(fv(Ot)))+"&"+V:this.m&&wu(z,this.m,Ot)),Vh(this.h,pt),this.Ua&&Yi(z,"TYPE","init"),this.P?(Yi(z,"$req",V),Yi(z,"SID","null"),pt.T=!0,dp(pt,z,null)):dp(pt,z,V),this.G=2}}else 3==this.G&&(g?Ep(this,g):0==this.i.length||sv(this.h)||Ep(this))},a.Fa=function(){if(this.u=null,Ev(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Rh(Me(this.ab,this),g)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ko(10),$h(this),Ev(this))},a.Za=function(){null!=this.C&&(this.C=null,$h(this),Ym(this),Ko(19))},a.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Ko(2)):(this.j.info("Failed to ping google.com"),Ko(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=VI.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},zh.prototype.g=function(g,V){return new ca(g,V)},$t(ca,go),ca.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ca.prototype.close=function(){_v(this.g)},ca.prototype.o=function(g){var V=this.g;if("string"==typeof g){var z={};z.__data__=g,g=z}else this.u&&((z={}).__data__=km(g),g=z);V.i.push(new bI(V.Ya++,g)),3==V.G&&vp(V)},ca.prototype.N=function(){this.g.l=null,delete this.j,_v(this.g),delete this.g,ca.aa.N.call(this)},$t(Tu,dd),$t(t_,cp),$t(gd,VI),gd.prototype.ua=function(){No(this.g,"a")},gd.prototype.ta=function(g){No(this.g,new Tu(g))},gd.prototype.sa=function(g){No(this.g,new t_)},gd.prototype.ra=function(){No(this.g,"b")},zh.prototype.createWebChannel=zh.prototype.g,ca.prototype.send=ca.prototype.o,ca.prototype.open=ca.prototype.m,ca.prototype.close=ca.prototype.close,Kt=en.createWebChannelTransport=function(){return new zh},Ye=en.getStatEventTarget=function(){return fl()},Et=en.Event=Eu,_t=en.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nh.NO_ERROR=0,Nh.TIMEOUT=8,Nh.HTTP_ERROR=6,dt=en.ErrorCode=Nh,Vm.COMPLETE="complete",qe=en.EventType=Vm,ld.EventType=ap,ap.OPEN="a",ap.CLOSE="b",ap.ERROR="c",ap.MESSAGE="d",go.prototype.listen=go.prototype.K,xe=en.WebChannel=ld,yn=en.FetchXmlHttpFactory=gp,Ji.prototype.listenOnce=Ji.prototype.L,Ji.prototype.getLastError=Ji.prototype.Ka,Ji.prototype.getLastErrorCode=Ji.prototype.Ba,Ji.prototype.getStatus=Ji.prototype.Z,Ji.prototype.getResponseJson=Ji.prototype.Oa,Ji.prototype.getResponseText=Ji.prototype.oa,Ji.prototype.send=Ji.prototype.ea,Ji.prototype.setWithCredentials=Ji.prototype.Ha,vt=en.XhrIo=Ji}).apply(typeof Ht<"u"?Ht:typeof self<"u"?self:typeof window<"u"?window:{});const pn="@firebase/firestore";class nn{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");let sn="10.13.1";const wn=new Ct.Vy("@firebase/firestore");function An(){return wn.logLevel}function nt(a,...t){if(wn.logLevel<=Ct.$b.DEBUG){const r=t.map(rr);wn.debug(`Firestore (${sn}): ${a}`,...r)}}function Cn(a,...t){if(wn.logLevel<=Ct.$b.ERROR){const r=t.map(rr);wn.error(`Firestore (${sn}): ${a}`,...r)}}function Gn(a,...t){if(wn.logLevel<=Ct.$b.WARN){const r=t.map(rr);wn.warn(`Firestore (${sn}): ${a}`,...r)}}function rr(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function St(a="Unexpected state"){const t=`FIRESTORE (${sn}) INTERNAL ASSERTION FAILED: `+a;throw Cn(t),new Error(t)}function mt(a,t){a||St()}function Nt(a,t){return a}const Ze={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rt extends ue.g{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qn{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}class Zn{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class bn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(nn.UNAUTHENTICATED))}shutdown(){}}class Pn{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class kr{constructor(t){this.t=t,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){var o=this;let u=this.i;const d=H=>this.i!==u?(u=this.i,r(H)):Promise.resolve();let m=new Qn;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new Qn,t.enqueueRetryable(()=>d(this.currentUser))};const b=()=>{const H=m;t.enqueueRetryable((0,ee.A)(function*(){yield H.promise,yield d(o.currentUser)}))},F=H=>{nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=H,this.auth.addAuthTokenListener(this.o),b()};this.t.onInit(H=>F(H)),setTimeout(()=>{if(!this.auth){const H=this.t.getImmediate({optional:!0});H?F(H):(nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new Qn)}},0),b()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(o=>this.i!==t?(nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(mt("string"==typeof o.accessToken),new Zn(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return mt(null===t||"string"==typeof t),new nn(t)}}class qr{constructor(t,r,o){this.l=t,this.h=r,this.P=o,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Hr{constructor(t,r,o){this.l=t,this.h=r,this.P=o}getToken(){return Promise.resolve(new qr(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Li{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rr{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){const o=d=>{null!=d.error&&nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.R;return this.R=d.token,nt("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?r(d.token):Promise.resolve()};this.o=d=>{t.enqueueRetryable(()=>o(d))};const u=d=>{nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.A.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.A.getImmediate({optional:!0});d?u(d):nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(mt("string"==typeof r.token),this.R=r.token,new Li(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function xn(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let o=0;o<a;o++)r[o]=Math.floor(256*Math.random());return r}class Ui{static newId(){const r=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=xn(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<r&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[d]%62))}return o}}function zt(a,t){return a<t?-1:a>t?1:0}function Un(a,t,r){return a.length===t.length&&a.every((o,u)=>r(o,t[u]))}function Or(a){return a+"\0"}class Jt{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Rt(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Rt(Ze.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new Rt(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Rt(Ze.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Jt.fromMillis(Date.now())}static fromDate(t){return Jt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*r));return new Jt(r,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?zt(this.nanoseconds,t.nanoseconds):zt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Zt(t)}static min(){return new Zt(new Jt(0,0))}static max(){return new Zt(new Jt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Qr{constructor(t,r,o){void 0===r?r=0:r>t.length&&St(),void 0===o?o=t.length-r:o>t.length-r&&St(),this.segments=t,this.offset=r,this.len=o}get length(){return this.len}isEqual(t){return 0===Qr.comparator(this,t)}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Qr?t.forEach(o=>{r.push(o)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,o=this.limit();r<o;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const o=Math.min(t.length,r.length);for(let u=0;u<o;u++){const d=t.get(u),m=r.get(u);if(d<m)return-1;if(d>m)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class On extends Qr{construct(t,r,o){return new On(t,r,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const o of t){if(o.indexOf("//")>=0)throw new Rt(Ze.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);r.push(...o.split("/").filter(u=>u.length>0))}return new On(r)}static emptyPath(){return new On([])}}const Nr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ke extends Qr{construct(t,r,o){return new ke(t,r,o)}static isValidIdentifier(t){return Nr.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ke.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ke(["__name__"])}static fromServerFormat(t){const r=[];let o="",u=0;const d=()=>{if(0===o.length)throw new Rt(Ze.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(o),o=""};let m=!1;for(;u<t.length;){const b=t[u];if("\\"===b){if(u+1===t.length)throw new Rt(Ze.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const F=t[u+1];if("\\"!==F&&"."!==F&&"`"!==F)throw new Rt(Ze.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=F,u+=2}else"`"===b?(m=!m,u++):"."!==b||m?(o+=b,u++):(d(),u++)}if(d(),m)throw new Rt(Ze.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ke(r)}static emptyPath(){return new ke([])}}class we{constructor(t){this.path=t}static fromPath(t){return new we(On.fromString(t))}static fromName(t){return new we(On.fromString(t).popFirst(5))}static empty(){return new we(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===On.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,r){return On.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new we(new On(t.slice()))}}class Ce{constructor(t,r,o,u){this.indexId=t,this.collectionGroup=r,this.fields=o,this.indexState=u}}function Ke(a){return a.fields.find(t=>2===t.kind)}function Pt(a){return a.fields.filter(t=>2!==t.kind)}Ce.UNKNOWN_ID=-1;class q{constructor(t,r){this.fieldPath=t,this.kind=r}}class se{constructor(t,r){this.sequenceNumber=t,this.offset=r}static empty(){return new se(0,Vt.min())}}function me(a,t){const r=a.toTimestamp().seconds,o=a.toTimestamp().nanoseconds+1,u=Zt.fromTimestamp(1e9===o?new Jt(r+1,0):new Jt(r,o));return new Vt(u,we.empty(),t)}function wt(a){return new Vt(a.readTime,a.key,-1)}class Vt{constructor(t,r,o){this.readTime=t,this.documentKey=r,this.largestBatchId=o}static min(){return new Vt(Zt.min(),we.empty(),-1)}static max(){return new Vt(Zt.max(),we.empty(),-1)}}function En(a,t){let r=a.readTime.compareTo(t.readTime);return 0!==r?r:(r=we.comparator(a.documentKey,t.documentKey),0!==r?r:zt(a.largestBatchId,t.largestBatchId))}const Bn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Mn(a){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,ee.A)(function*(a){if(a.code!==Ze.FAILED_PRECONDITION||a.message!==Bn)throw a;nt("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Re{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&St(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Re((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(t,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(r,d).next(o,u)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Re?r:Re.resolve(r)}catch(r){return Re.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Re.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Re.reject(r)}static resolve(t){return new Re((r,o)=>{r(t)})}static reject(t){return new Re((r,o)=>{o(t)})}static waitFor(t){return new Re((r,o)=>{let u=0,d=0,m=!1;t.forEach(b=>{++u,b.next(()=>{++d,m&&d===u&&r()},F=>o(F))}),m=!0,d===u&&r()})}static or(t){let r=Re.resolve(!1);for(const o of t)r=r.next(u=>u?Re.resolve(u):o());return r}static forEach(t,r){const o=[];return t.forEach((u,d)=>{o.push(r.call(this,u,d))}),this.waitFor(o)}static mapArray(t,r){return new Re((o,u)=>{const d=t.length,m=new Array(d);let b=0;for(let F=0;F<d;F++){const H=F;r(t[H]).next(re=>{m[H]=re,++b,b===d&&o(m)},re=>u(re))}})}static doWhile(t,r){return new Re((o,u)=>{const d=()=>{!0===t()?r().next(()=>{d()},u):o()};d()})}}class Gr{constructor(t,r){this.action=t,this.transaction=r,this.aborted=!1,this.V=new Qn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new ir(t,r.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=Xe(o.target.error);this.V.reject(new ir(t,u))}}static open(t,r,o,u){try{return new Gr(r,t.transaction(u,o))}catch(d){throw new ir(r,d)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(nt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const r=this.transaction.objectStore(t);return new Gi(r)}}class Yr{constructor(t,r,o){this.name=t,this.version=r,this.p=o,12.2===Yr.S((0,ue.ZQ)())&&Cn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return nt("SimpleDb","Removing database:",t),ri(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,ue.zW)())return!1;if(Yr.v())return!0;const t=(0,ue.ZQ)(),r=Yr.S(t),o=0<r&&r<10,u=Ms(t),d=0<u&&u<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||o||d)}static v(){var t;return typeof process<"u"&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.C)}static F(t,r){return t.store(r)}static S(t){const r=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(o)}M(t){var r=this;return(0,ee.A)(function*(){return r.db||(nt("SimpleDb","Opening database:",r.name),r.db=yield new Promise((o,u)=>{const d=indexedDB.open(r.name,r.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new ir(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const b=m.target.error;u("VersionError"===b.name?new Rt(Ze.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===b.name?new Rt(Ze.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+b):new ir(t,b))},d.onupgradeneeded=m=>{nt("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',m.oldVersion),r.p.O(m.target.result,d.transaction,m.oldVersion,r.version).next(()=>{nt("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=o=>r.N(o)),r.db})()}L(t){this.N=t,this.db&&(this.db.onversionchange=r=>t(r))}runTransaction(t,r,o,u){var d=this;return(0,ee.A)(function*(){const m="readonly"===r;let b=0;for(;;){++b;try{d.db=yield d.M(t);const F=Gr.open(d.db,t,m?"readonly":"readwrite",o),H=u(F).next(re=>(F.g(),re)).catch(re=>(F.abort(re),Re.reject(re))).toPromise();return H.catch(()=>{}),yield F.m,H}catch(F){const H=F,re="FirebaseError"!==H.name&&b<3;if(nt("SimpleDb","Transaction failed with error:",H.message,"Retrying:",re),d.close(),!re)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function Ms(a){const t=a.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class cs{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return ri(this.B.delete())}}class ir extends Rt{constructor(t,r){super(Ze.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function is(a){return"IndexedDbTransactionError"===a.name}class Gi{constructor(t){this.store=t}put(t,r){let o;return void 0!==r?(nt("SimpleDb","PUT",this.store.name,t,r),o=this.store.put(r,t)):(nt("SimpleDb","PUT",this.store.name,"<auto-key>",t),o=this.store.put(t)),ri(o)}add(t){return nt("SimpleDb","ADD",this.store.name,t,t),ri(this.store.add(t))}get(t){return ri(this.store.get(t)).next(r=>(void 0===r&&(r=null),nt("SimpleDb","GET",this.store.name,t,r),r))}delete(t){return nt("SimpleDb","DELETE",this.store.name,t),ri(this.store.delete(t))}count(){return nt("SimpleDb","COUNT",this.store.name),ri(this.store.count())}U(t,r){const o=this.options(t,r),u=o.index?this.store.index(o.index):this.store;if("function"==typeof u.getAll){const d=u.getAll(o.range);return new Re((m,b)=>{d.onerror=F=>{b(F.target.error)},d.onsuccess=F=>{m(F.target.result)}})}{const d=this.cursor(o),m=[];return this.W(d,(b,F)=>{m.push(F)}).next(()=>m)}}G(t,r){const o=this.store.getAll(t,null===r?void 0:r);return new Re((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}j(t,r){nt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(t,r);o.H=!1;const u=this.cursor(o);return this.W(u,(d,m,b)=>b.delete())}J(t,r){let o;r?o=t:(o={},r=t);const u=this.cursor(o);return this.W(u,r)}Y(t){const r=this.cursor({});return new Re((o,u)=>{r.onerror=d=>{const m=Xe(d.target.error);u(m)},r.onsuccess=d=>{const m=d.target.result;m?t(m.primaryKey,m.value).next(b=>{b?m.continue():o()}):o()}})}W(t,r){const o=[];return new Re((u,d)=>{t.onerror=m=>{d(m.target.error)},t.onsuccess=m=>{const b=m.target.result;if(!b)return void u();const F=new cs(b),H=r(b.primaryKey,b.value,F);if(H instanceof Re){const re=H.catch(fe=>(F.done(),Re.reject(fe)));o.push(re)}F.isDone?u():null===F.K?b.continue():b.continue(F.K)}}).next(()=>Re.waitFor(o))}options(t,r){let o;return void 0!==t&&("string"==typeof t?o=t:r=t),{index:o,range:r}}cursor(t){let r="next";if(t.reverse&&(r="prev"),t.index){const o=this.store.index(t.index);return t.H?o.openKeyCursor(t.range,r):o.openCursor(t.range,r)}return this.store.openCursor(t.range,r)}}function ri(a){return new Re((t,r)=>{a.onsuccess=o=>{t(o.target.result)},a.onerror=o=>{const u=Xe(o.target.error);r(u)}})}let yt=!1;function Xe(a){const t=Yr.S((0,ue.ZQ)());if(t>=12.2&&t<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const o=new Rt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yt||(yt=!0,setTimeout(()=>{throw o},0)),o}}return a}class kt{constructor(t,r){this.asyncQueue=t,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(t){var r=this;nt("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,ee.A)(function*(){r.task=null;try{nt("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(o){is(o)?nt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield Mn(o)}yield r.X(6e4)}))}}class cn{constructor(t,r){this.localStore=t,this.persistence=r}ee(t=50){var r=this;return(0,ee.A)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>r.te(o,t))})()}te(t,r){const o=new Set;let u=r,d=!0;return Re.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(m=>{if(null!==m&&!o.has(m))return nt("IndexBackfiller",`Processing collection: ${m}`),this.ne(t,m,u).next(b=>{u-=b,o.add(m)});d=!1})).next(()=>r-u)}ne(t,r,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,r).next(u=>this.localStore.localDocuments.getNextDocuments(t,r,u,o).next(d=>{const m=d.changes;return this.localStore.indexManager.updateIndexEntries(t,m).next(()=>this.re(u,d)).next(b=>(nt("IndexBackfiller",`Updating offset: ${b}`),this.localStore.indexManager.updateCollectionGroup(t,r,b))).next(()=>m.size)}))}re(t,r){let o=t;return r.changes.forEach((u,d)=>{const m=wt(d);En(m,o)>0&&(o=m)}),new Vt(o.readTime,o.documentKey,Math.max(r.batchId,t.largestBatchId))}}let ne=(()=>{class a{constructor(r,o){this.previousValue=r,o&&(o.sequenceNumberHandler=u=>this.ie(u),this.se=u=>o.writeSequenceNumber(u))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function ve(a){return null==a}function Ie(a){return 0===a&&1/a==-1/0}function ut(a){return"number"==typeof a&&Number.isInteger(a)&&!Ie(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function Qe(a){let t="";for(let r=0;r<a.length;r++)t.length>0&&(t=jt(t)),t=Xt(a.get(r),t);return jt(t)}function Xt(a,t){let r=t;const o=a.length;for(let u=0;u<o;u++){const d=a.charAt(u);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function jt(a){return a+"\x01\x01"}function Rn(a){const t=a.length;if(mt(t>=2),2===t)return mt("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),On.emptyPath();const r=t-2,o=[];let u="";for(let d=0;d<t;){const m=a.indexOf("\x01",d);switch((m<0||m>r)&&St(),a.charAt(m+1)){case"\x01":const b=a.substring(d,m);let F;0===u.length?F=b:(u+=b,F=u,u=""),o.push(F);break;case"\x10":u+=a.substring(d,m),u+="\0";break;case"\x11":u+=a.substring(d,m+1);break;default:St()}d=m+2}return new On(o)}const Tn=["userId","batchId"];function br(a,t){return[a,Qe(t)]}function si(a,t,r){return[a,Qe(t),r]}const _r={},ui=["prefixPath","collectionGroup","readTime","documentId"],Xr=["prefixPath","collectionGroup","documentId"],Mi=["collectionGroup","readTime","prefixPath","documentId"],yr=["canonicalId","targetId"],Ir=["targetId","path"],li=["path","targetId"],tr=["collectionId","parent"],Fr=["indexId","uid"],di=["uid","sequenceNumber"],Ei=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ii=["indexId","uid","orderedDocumentKey"],Nn=["userId","collectionPath","documentId"],ar=["userId","collectionPath","largestBatchId"],Fo=["userId","collectionGroup","largestBatchId"],zi=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oo=[...zi,"documentOverlays"],Qo=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ua=Qo,vo=[...ua,"indexConfiguration","indexState","indexEntries"],nr=vo,Eo=[...vo,"globals"];class xs extends zn{constructor(t,r){super(),this._e=t,this.currentSequenceNumber=r}}function Er(a,t){const r=Nt(a);return Yr.F(r._e,t)}function Vo(a){let t=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t++;return t}function Qs(a,t){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t(r,a[r])}function Rs(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}class Sr{constructor(t,r){this.comparator=t,this.root=r||Ci.EMPTY}insert(t,r){return new Sr(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(t){return new Sr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(0===o)return r.value;o<0?r=r.left:o>0&&(r=r.right)}return null}indexOf(t){let r=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(t,o.key);if(0===u)return r+o.left.size;u<0?o=o.left:(r+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,o)=>(t(r,o),!1))}toString(){const t=[];return this.inorderTraversal((r,o)=>(t.push(`${r}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Bi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Bi(this.root,t,this.comparator,!1)}getReverseIterator(){return new Bi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Bi(this.root,t,this.comparator,!0)}}class Bi{constructor(t,r,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!t.isEmpty();)if(d=r?o(t.key,r):1,r&&u&&(d*=-1),d<0)t=this.isReverse?t.left:t.right;else{if(0===d){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ci{constructor(t,r,o,u,d){this.key=t,this.value=r,this.color=o??Ci.RED,this.left=u??Ci.EMPTY,this.right=d??Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,o,u,d){return new Ci(t??this.key,r??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const d=o(t,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===d?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let o,u=this;if(r(t,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(t,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(t,u.key)){if(u.right.isEmpty())return Ci.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(t,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw St();const t=this.left.check();if(t!==this.right.check())throw St();return t+(this.isRed()?0:1)}}Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1,Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw St()}get value(){throw St()}get color(){throw St()}get left(){throw St()}get right(){throw St()}copy(t,r,o,u,d){return this}insert(t,r,o){return new Ci(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vr{constructor(t){this.comparator=t,this.data=new Sr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,o)=>(t(r),!1))}forEachInRange(t,r){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,t[1])>=0)return;r(u.key)}}forEachWhile(t,r){let o;for(o=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new fs(this.data.getIterator())}getIteratorFrom(t){return new fs(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(o=>{r=r.add(o)}),r}isEqual(t){if(!(t instanceof vr)||this.size!==t.size)return!1;const r=this.data.getIterator(),o=t.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new vr(this.comparator);return r.data=t,r}}class fs{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xs(a){return a.hasNext()?a.getNext():void 0}class Jr{constructor(t){this.fields=t,t.sort(ke.comparator)}static empty(){return new Jr([])}unionWith(t){let r=new vr(ke.comparator);for(const o of this.fields)r=r.add(o);for(const o of t)r=r.add(o);return new Jr(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Un(this.fields,t.fields,(r,o)=>r.isEqual(o))}}class Lo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class zr{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Lo("Invalid base64 string: "+d):d}}(t);return new zr(r)}static fromUint8Array(t){const r=function(u){let d="";for(let m=0;m<u.length;++m)d+=String.fromCharCode(u[m]);return d}(t);return new zr(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const o=new Uint8Array(r.length);for(let u=0;u<r.length;u++)o[u]=r.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return zt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}zr.EMPTY_BYTE_STRING=new zr("");const ni=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(a){if(mt(!!a),"string"==typeof a){let t=0;const r=ni.exec(a);if(mt(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),t=Number(u)}const o=new Date(a);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:hn(a.seconds),nanos:hn(a.nanos)}}function hn(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function oi(a){return"string"==typeof a?zr.fromBase64String(a):zr.fromUint8Array(a)}function ps(a){var t,r;return"server_timestamp"===(null===(r=((null===(t=a?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function ks(a){const t=a.mapValue.fields.__previous_value__;return ps(t)?ks(t):t}function gs(a){const t=ss(a.mapValue.fields.__local_write_time__.timestampValue);return new Jt(t.seconds,t.nanos)}class Ys{constructor(t,r,o,u,d,m,b,F,H){this.databaseId=t,this.appId=r,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=b,this.longPollingOptions=F,this.useFetchStreams=H}}class Ri{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new Ri("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Ri&&t.projectId===this.projectId&&t.database===this.database}}const es={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Wi={nullValue:"NULL_VALUE"};function ji(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?ps(a)?4:Co(a)?9007199254740991:Ls(a)?10:11:St()}function ts(a,t){if(a===t)return!0;const r=ji(a);if(r!==ji(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return gs(a).isEqual(gs(t));case 3:return function(u,d){if("string"==typeof u.timestampValue&&"string"==typeof d.timestampValue&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const m=ss(u.timestampValue),b=ss(d.timestampValue);return m.seconds===b.seconds&&m.nanos===b.nanos}(a,t);case 5:return a.stringValue===t.stringValue;case 6:return d=t,oi(a.bytesValue).isEqual(oi(d.bytesValue));case 7:return a.referenceValue===t.referenceValue;case 8:return function(u,d){return hn(u.geoPointValue.latitude)===hn(d.geoPointValue.latitude)&&hn(u.geoPointValue.longitude)===hn(d.geoPointValue.longitude)}(a,t);case 2:return function(u,d){if("integerValue"in u&&"integerValue"in d)return hn(u.integerValue)===hn(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const m=hn(u.doubleValue),b=hn(d.doubleValue);return m===b?Ie(m)===Ie(b):isNaN(m)&&isNaN(b)}return!1}(a,t);case 9:return Un(a.arrayValue.values||[],t.arrayValue.values||[],ts);case 10:case 11:return function(u,d){const m=u.mapValue.fields||{},b=d.mapValue.fields||{};if(Vo(m)!==Vo(b))return!1;for(const F in m)if(m.hasOwnProperty(F)&&(void 0===b[F]||!ts(m[F],b[F])))return!1;return!0}(a,t);default:return St()}var d}function Fs(a,t){return void 0!==(a.values||[]).find(r=>ts(r,t))}function $i(a,t){if(a===t)return 0;const r=ji(a),o=ji(t);if(r!==o)return zt(r,o);switch(r){case 0:case 9007199254740991:return 0;case 1:return zt(a.booleanValue,t.booleanValue);case 2:return function(d,m){const b=hn(d.integerValue||d.doubleValue),F=hn(m.integerValue||m.doubleValue);return b<F?-1:b>F?1:b===F?0:isNaN(b)?isNaN(F)?0:-1:1}(a,t);case 3:return Uo(a.timestampValue,t.timestampValue);case 4:return Uo(gs(a),gs(t));case 5:return zt(a.stringValue,t.stringValue);case 6:return function(d,m){const b=oi(d),F=oi(m);return b.compareTo(F)}(a.bytesValue,t.bytesValue);case 7:return function(d,m){const b=d.split("/"),F=m.split("/");for(let H=0;H<b.length&&H<F.length;H++){const re=zt(b[H],F[H]);if(0!==re)return re}return zt(b.length,F.length)}(a.referenceValue,t.referenceValue);case 8:return function(d,m){const b=zt(hn(d.latitude),hn(m.latitude));return 0!==b?b:zt(hn(d.longitude),hn(m.longitude))}(a.geoPointValue,t.geoPointValue);case 9:return ns(a.arrayValue,t.arrayValue);case 10:return function(d,m){var b,F,H,re;const at=null===(b=(d.fields||{}).value)||void 0===b?void 0:b.arrayValue,$t=null===(F=(m.fields||{}).value)||void 0===F?void 0:F.arrayValue,tn=zt((null===(H=at?.values)||void 0===H?void 0:H.length)||0,(null===(re=$t?.values)||void 0===re?void 0:re.length)||0);return 0!==tn?tn:ns(at,$t)}(a.mapValue,t.mapValue);case 11:return function(d,m){if(d===es.mapValue&&m===es.mapValue)return 0;if(d===es.mapValue)return 1;if(m===es.mapValue)return-1;const b=d.fields||{},F=Object.keys(b),H=m.fields||{},re=Object.keys(H);F.sort(),re.sort();for(let fe=0;fe<F.length&&fe<re.length;++fe){const Me=zt(F[fe],re[fe]);if(0!==Me)return Me;const at=$i(b[F[fe]],H[re[fe]]);if(0!==at)return at}return zt(F.length,re.length)}(a.mapValue,t.mapValue);default:throw St()}}function Uo(a,t){if("string"==typeof a&&"string"==typeof t&&a.length===t.length)return zt(a,t);const r=ss(a),o=ss(t),u=zt(r.seconds,o.seconds);return 0!==u?u:zt(r.nanos,o.nanos)}function ns(a,t){const r=a.values||[],o=t.values||[];for(let u=0;u<r.length&&u<o.length;++u){const d=$i(r[u],o[u]);if(d)return d}return zt(r.length,o.length)}function Oi(a){return Io(a)}function Io(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const o=ss(r);return`time(${o.seconds},${o.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?oi(a.bytesValue).toBase64():"referenceValue"in a?we.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=Io(d);return o+"]"}(a.arrayValue):"mapValue"in a?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${Io(r.fields[m])}`;return u+"}"}(a.mapValue):St()}function Hi(a,t){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${t.path.canonicalString()}`}}function ms(a){return!!a&&"integerValue"in a}function Vs(a){return!!a&&"arrayValue"in a}function Xo(a){return!!a&&"nullValue"in a}function Js(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Ki(a){return!!a&&"mapValue"in a}function Ls(a){var t,r;return"__vector__"===(null===(r=((null===(t=a?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function wi(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const t={mapValue:{fields:{}}};return Qs(a.mapValue.fields,(r,o)=>t.mapValue.fields[r]=wi(o)),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=wi(a.arrayValue.values[r]);return t}return Object.assign({},a)}function Co(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}const Yo={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function Ti(a){return"nullValue"in a?Wi:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?Hi(Ri.empty(),we.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?Ls(a)?Yo:{mapValue:{}}:St()}function gr(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?Hi(Ri.empty(),we.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?Yo:"mapValue"in a?Ls(a)?{mapValue:{}}:es:St()}function Us(a,t){const r=$i(a.value,t.value);return 0!==r?r:a.inclusive&&!t.inclusive?-1:!a.inclusive&&t.inclusive?1:0}function da(a,t){const r=$i(a.value,t.value);return 0!==r?r:a.inclusive&&!t.inclusive?1:!a.inclusive&&t.inclusive?-1:0}class Zr{constructor(t){this.value=t}static empty(){return new Zr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let o=0;o<t.length-1;++o)if(r=(r.mapValue.fields||{})[t.get(o)],!Ki(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=wi(r)}setAll(t){let r=ke.emptyPath(),o={},u=[];t.forEach((m,b)=>{if(!r.isImmediateParentOf(b)){const F=this.getFieldsMap(r);this.applyChanges(F,o,u),o={},u=[],r=b.popLast()}m?o[b.lastSegment()]=wi(m):u.push(b.lastSegment())});const d=this.getFieldsMap(r);this.applyChanges(d,o,u)}delete(t){const r=this.field(t.popLast());Ki(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return ts(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let o=0;o<t.length;++o){let u=r.mapValue.fields[t.get(o)];Ki(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[t.get(o)]=u),r=u}return r.mapValue.fields}applyChanges(t,r,o){Qs(r,(u,d)=>t[u]=d);for(const u of o)delete t[u]}clone(){return new Zr(wi(this.value))}}function co(a){const t=[];return Qs(a.fields,(r,o)=>{const u=new ke([r]);if(Ki(o)){const d=co(o.mapValue).fields;if(0===d.length)t.push(u);else for(const m of d)t.push(u.child(m))}else t.push(u)}),new Jr(t)}class sr{constructor(t,r,o,u,d,m,b){this.key=t,this.documentType=r,this.version=o,this.readTime=u,this.createTime=d,this.data=m,this.documentState=b}static newInvalidDocument(t){return new sr(t,0,Zt.min(),Zt.min(),Zt.min(),Zr.empty(),0)}static newFoundDocument(t,r,o,u){return new sr(t,1,r,Zt.min(),o,u,0)}static newNoDocument(t,r){return new sr(t,2,r,Zt.min(),Zt.min(),Zr.empty(),0)}static newUnknownDocument(t,r){return new sr(t,3,r,Zt.min(),Zt.min(),Zr.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Zt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof sr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new sr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class us{constructor(t,r){this.position=t,this.inclusive=r}}function _s(a,t,r){let o=0;for(let u=0;u<a.position.length;u++){const d=t[u],m=a.position[u];if(o=d.field.isKeyField()?we.comparator(we.fromName(m.referenceValue),r.key):$i(m,r.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function wo(a,t){if(null===a)return null===t;if(null===t||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!ts(a.position[r],t.position[r]))return!1;return!0}class Fi{constructor(t,r="asc"){this.field=t,this.dir=r}}function G(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}class K{}class N extends K{constructor(t,r,o){super(),this.field=t,this.op=r,this.value=o}static create(t,r,o){return t.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(t,r,o):new Bo(t,r,o):"array-contains"===r?new fa(t,o):"in"===r?new Va(t,o):"not-in"===r?new La(t,o):"array-contains-any"===r?new eo(t,o):new N(t,r,o)}static createKeyFieldInFilter(t,r,o){return"in"===r?new ha(t,o):new ei(t,o)}matches(t){const r=t.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison($i(r,this.value)):null!==r&&ji(this.value)===ji(r)&&this.matchesComparison($i(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return St()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Z extends K{constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new Z(t,r)}matches(t){return be(this)?void 0===this.filters.find(r=>!r.matches(t)):void 0!==this.filters.find(r=>r.matches(t))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function be(a){return"and"===a.op}function fn(a){return"or"===a.op}function Xn(a){return ys(a)&&be(a)}function ys(a){for(const t of a.filters)if(t instanceof Z)return!1;return!0}function Zs(a){if(a instanceof N)return a.field.canonicalString()+a.op.toString()+Oi(a.value);if(Xn(a))return a.filters.map(t=>Zs(t)).join(",");{const t=a.filters.map(r=>Zs(r)).join(",");return`${a.op}(${t})`}}function fi(a,t){return a instanceof N?(o=a,(u=t)instanceof N&&o.op===u.op&&o.field.isEqual(u.field)&&ts(o.value,u.value)):a instanceof Z?function(o,u){return u instanceof Z&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((d,m,b)=>d&&fi(m,u.filters[b]),!0)}(a,t):void St();var o,u}function Ts(a,t){const r=a.filters.concat(t);return Z.create(r,a.op)}function Ta(a){return a instanceof N?`${(r=a).field.canonicalString()} ${r.op} ${Oi(r.value)}`:a instanceof Z?function(r){return r.op.toString()+" {"+r.getFilters().map(Ta).join(" ,")+"}"}(a):"Filter";var r}class Bo extends N{constructor(t,r,o){super(t,r,o),this.key=we.fromName(o.referenceValue)}matches(t){const r=we.comparator(t.key,this.key);return this.matchesComparison(r)}}class ha extends N{constructor(t,r){super(t,"in",r),this.keys=Da(0,r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class ei extends N{constructor(t,r){super(t,"not-in",r),this.keys=Da(0,r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function Da(a,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map(o=>we.fromName(o.referenceValue))}class fa extends N{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Vs(r)&&Fs(r.arrayValue,this.value)}}class Va extends N{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return null!==r&&Fs(this.value.arrayValue,r)}}class La extends N{constructor(t,r){super(t,"not-in",r)}matches(t){if(Fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return null!==r&&!Fs(this.value.arrayValue,r)}}class eo extends N{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Vs(r)||!r.arrayValue.values)&&r.arrayValue.values.some(o=>Fs(this.value.arrayValue,o))}}class Ua{constructor(t,r=null,o=[],u=[],d=null,m=null,b=null){this.path=t,this.collectionGroup=r,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=b,this.ue=null}}function pa(a,t=null,r=[],o=[],u=null,d=null,m=null){return new Ua(a,t,r,o,u,d,m)}function jo(a){const t=Nt(a);if(null===t.ue){let r=t.path.canonicalString();null!==t.collectionGroup&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(o=>Zs(o)).join(","),r+="|ob:",r+=t.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),ve(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>Oi(o)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>Oi(o)).join(",")),t.ue=r}return t.ue}function To(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!G(a.orderBy[r],t.orderBy[r]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!fi(a.filters[r],t.filters[r]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!wo(a.startAt,t.startAt)&&wo(a.endAt,t.endAt)}function Aa(a){return we.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function Jo(a,t){return a.filters.filter(r=>r instanceof N&&r.field.isEqual(t))}function Do(a,t,r){let o=Wi,u=!0;for(const d of Jo(a,t)){let m=Wi,b=!0;switch(d.op){case"<":case"<=":m=Ti(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,b=!1;break;case"!=":case"not-in":m=Wi}Us({value:o,inclusive:u},{value:m,inclusive:b})<0&&(o=m,u=b)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(t)){const m=r.position[d];Us({value:o,inclusive:u},{value:m,inclusive:r.inclusive})<0&&(o=m,u=r.inclusive);break}return{value:o,inclusive:u}}function cr(a,t,r){let o=es,u=!0;for(const d of Jo(a,t)){let m=es,b=!0;switch(d.op){case">=":case">":m=gr(d.value),b=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,b=!1;break;case"!=":case"not-in":m=es}da({value:o,inclusive:u},{value:m,inclusive:b})>0&&(o=m,u=b)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(t)){const m=r.position[d];da({value:o,inclusive:u},{value:m,inclusive:r.inclusive})>0&&(o=m,u=r.inclusive);break}return{value:o,inclusive:u}}class Wr{constructor(t,r=null,o=[],u=[],d=null,m="F",b=null,F=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=b,this.endAt=F,this.ce=null,this.le=null,this.he=null}}function ii(a,t,r,o,u,d,m,b){return new Wr(a,t,r,o,u,d,m,b)}function Ni(a){return new Wr(a)}function xi(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function ga(a){return null!==a.collectionGroup}function vs(a){const t=Nt(a);if(null===t.ce){t.ce=[];const r=new Set;for(const d of t.explicitOrderBy)t.ce.push(d),r.add(d.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let b=new vr(ke.comparator);return m.filters.forEach(F=>{F.getFlattenedFilters().forEach(H=>{H.isInequality()&&(b=b.add(H.field))})}),b})(t).forEach(d=>{r.has(d.canonicalString())||d.isKeyField()||t.ce.push(new Fi(d,o))}),r.has(ke.keyField().canonicalString())||t.ce.push(new Fi(ke.keyField(),o))}return t.ce}function qi(a){const t=Nt(a);return t.le||(t.le=function Tc(a,t){if("F"===a.limitType)return pa(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map(u=>new Fi(u.field,"desc"===u.dir?"asc":"desc"));const r=a.endAt?new us(a.endAt.position,a.endAt.inclusive):null,o=a.startAt?new us(a.startAt.position,a.startAt.inclusive):null;return pa(a.path,a.collectionGroup,t,a.filters,a.limit,r,o)}}(t,vs(a))),t.le}function Ao(a,t){const r=a.filters.concat([t]);return new Wr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function Y(a,t,r){return new Wr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,r,a.startAt,a.endAt)}function C(a,t){return To(qi(a),qi(t))&&a.limitType===t.limitType}function D(a){return`${jo(qi(a))}|lt:${a.limitType}`}function L(a){return`Query(target=${function(r){let o=r.path.canonicalString();return null!==r.collectionGroup&&(o+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(o+=`, filters: [${r.filters.map(u=>Ta(u)).join(", ")}]`),ve(r.limit)||(o+=", limit: "+r.limit),r.orderBy.length>0&&(o+=`, orderBy: [${r.orderBy.map(u=>{return`${(m=u).field.canonicalString()} (${m.dir})`;var m}).join(", ")}]`),r.startAt&&(o+=", startAt: ",o+=r.startAt.inclusive?"b:":"a:",o+=r.startAt.position.map(u=>Oi(u)).join(",")),r.endAt&&(o+=", endAt: ",o+=r.endAt.inclusive?"a:":"b:",o+=r.endAt.position.map(u=>Oi(u)).join(",")),`Target(${o})`}(qi(a))}; limitType=${a.limitType})`}function Q(a,t){return t.isFoundDocument()&&function(o,u){const d=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(d):we.isDocumentKey(o.path)?o.path.isEqual(d):o.path.isImmediateParentOf(d)}(a,t)&&function(o,u){for(const d of vs(o))if(!d.field.isKeyField()&&null===u.data.field(d.field))return!1;return!0}(a,t)&&function(o,u){for(const d of o.filters)if(!d.matches(u))return!1;return!0}(a,t)&&(u=t,!((o=a).startAt&&!function(m,b,F){const H=_s(m,b,F);return m.inclusive?H<=0:H<0}(o.startAt,vs(o),u)||o.endAt&&!function(m,b,F){const H=_s(m,b,F);return m.inclusive?H>=0:H>0}(o.endAt,vs(o),u)));var o,u}function he(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function Pe(a){return(t,r)=>{let o=!1;for(const u of vs(a)){const d=Ue(u,t,r);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Ue(a,t,r){const o=a.field.isKeyField()?we.comparator(t.key,r.key):function(d,m,b){const F=m.data.field(d),H=b.data.field(d);return null!==F&&null!==H?$i(F,H):St()}(a.field,t,r);switch(a.dir){case"asc":return o;case"desc":return-1*o;default:return St()}}class ht{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),o=this.inner[r];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,t))return d}has(t){return void 0!==this.get(t)}set(t,r){const o=this.mapKeyFn(t),u=this.inner[o];if(void 0===u)return this.inner[o]=[[t,r]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],t))return void(u[d]=[t,r]);u.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),o=this.inner[r];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return 1===o.length?delete this.inner[r]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(t){Qs(this.inner,(r,o)=>{for(const[u,d]of o)t(u,d)})}isEmpty(){return Rs(this.inner)}size(){return this.innerSize}}const Mt=new Sr(we.comparator);function on(){return Mt}const vn=new Sr(we.comparator);function ur(...a){let t=vn;for(const r of a)t=t.insert(r.key,r);return t}function er(a){let t=vn;return a.forEach((r,o)=>t=t.insert(r,o.overlayedDocument)),t}function Sn(){return Vr()}function Wn(){return Vr()}function Vr(){return new ht(a=>a.toString(),(a,t)=>a.isEqual(t))}const Lr=new Sr(we.comparator),pi=new vr(we.comparator);function kn(...a){let t=pi;for(const r of a)t=t.add(r);return t}const os=new vr(zt);function uo(){return os}function Os(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ie(t)?"-0":t}}function Di(a){return{integerValue:""+a}}function ls(a,t){return ut(t)?Di(t):Os(a,t)}class lo{constructor(){this._=void 0}}function Zo(a,t,r){return a instanceof Es?function(u,d){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&ps(d)&&(d=ks(d)),d&&(m.fields.__previous_value__=d),{mapValue:m}}(r,t):a instanceof Bs?P(a,t):a instanceof $?x(a,t):function(u,d){const m=ds(u,d),b=ye(m)+ye(u.Pe);return ms(m)&&ms(u.Pe)?Di(b):Os(u.serializer,b)}(a,t)}function ma(a,t,r){return a instanceof Bs?P(a,t):a instanceof $?x(a,t):r}function ds(a,t){return a instanceof B?ms(o=t)||(d=o)&&"doubleValue"in d?t:{integerValue:0}:null;var o,d}class Es extends lo{}class Bs extends lo{constructor(t){super(),this.elements=t}}function P(a,t){const r=ot(t);for(const o of a.elements)r.some(u=>ts(u,o))||r.push(o);return{arrayValue:{values:r}}}class $ extends lo{constructor(t){super(),this.elements=t}}function x(a,t){let r=ot(t);for(const o of a.elements)r=r.filter(u=>!ts(u,o));return{arrayValue:{values:r}}}class B extends lo{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function ye(a){return hn(a.integerValue||a.doubleValue)}function ot(a){return Vs(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class xt{constructor(t,r){this.field=t,this.transform=r}}class Cr{constructor(t,r){this.version=t,this.transformResults=r}}class gn{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new gn}static exists(t){return new gn(void 0,t)}static updateTime(t){return new gn(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ur(a,t){return void 0!==a.updateTime?t.isFoundDocument()&&t.version.isEqual(a.updateTime):void 0===a.exists||a.exists===t.isFoundDocument()}class hr{}function fr(a,t){if(!a.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return a.isNoDocument()?new js(a.key,gn.none()):new In(a.key,a.data,gn.none());{const r=a.data,o=Zr.empty();let u=new vr(ke.comparator);for(let d of t.fields)if(!u.has(d)){let m=r.field(d);null===m&&d.length>1&&(d=d.popLast(),m=r.field(d)),null===m?o.delete(d):o.set(d,m),u=u.add(d)}return new pr(a.key,o,new Jr(u.toArray()),gn.none())}}function wr(a,t,r){a instanceof In?function(u,d,m){const b=u.value.clone(),F=gi(u.fieldTransforms,d,m.transformResults);b.setAll(F),d.convertToFoundDocument(m.version,b).setHasCommittedMutations()}(a,t,r):a instanceof pr?function(u,d,m){if(!Ur(u.precondition,d))return void d.convertToUnknownDocument(m.version);const b=gi(u.fieldTransforms,d,m.transformResults),F=d.data;F.setAll(Ai(u)),F.setAll(b),d.convertToFoundDocument(m.version,F).setHasCommittedMutations()}(a,t,r):t.convertToNoDocument(r.version).setHasCommittedMutations()}function Tr(a,t,r,o){return a instanceof In?function(d,m,b,F){if(!Ur(d.precondition,m))return b;const H=d.value.clone(),re=rs(d.fieldTransforms,F,m);return H.setAll(re),m.convertToFoundDocument(m.version,H).setHasLocalMutations(),null}(a,t,r,o):a instanceof pr?function(d,m,b,F){if(!Ur(d.precondition,m))return b;const H=rs(d.fieldTransforms,F,m),re=m.data;return re.setAll(Ai(d)),re.setAll(H),m.convertToFoundDocument(m.version,re).setHasLocalMutations(),null===b?null:b.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(fe=>fe.field))}(a,t,r,o):(b=r,Ur(a.precondition,m=t)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):b);var m,b}function xr(a,t){let r=null;for(const o of a.fieldTransforms){const u=t.data.field(o.field),d=ds(o.transform,u||null);null!=d&&(null===r&&(r=Zr.empty()),r.set(o.field,d))}return r||null}function Yt(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&(u=t.fieldTransforms,!!(void 0===(o=a.fieldTransforms)&&void 0===u||o&&u&&Un(o,u,(d,m)=>function un(a,t){return a.field.isEqual(t.field)&&(u=t.transform,(o=a.transform)instanceof Bs&&u instanceof Bs||o instanceof $&&u instanceof $?Un(o.elements,u.elements,ts):o instanceof B&&u instanceof B?ts(o.Pe,u.Pe):o instanceof Es&&u instanceof Es);var o,u}(d,m))))&&(0===a.type?a.value.isEqual(t.value):1!==a.type||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask));var o,u}class In extends hr{constructor(t,r,o,u=[]){super(),this.key=t,this.value=r,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class pr extends hr{constructor(t,r,o,u,d=[]){super(),this.key=t,this.data=r,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function Ai(a){const t=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const o=a.data.field(r);t.set(r,o)}}),t}function gi(a,t,r){const o=new Map;mt(a.length===r.length);for(let u=0;u<r.length;u++){const d=a[u],m=d.transform,b=t.data.field(d.field);o.set(d.field,ma(m,b,r[u]))}return o}function rs(a,t,r){const o=new Map;for(const u of a){const d=u.transform,m=r.data.field(u.field);o.set(u.field,Zo(d,m,t))}return o}class js extends hr{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mi extends hr{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Kr{constructor(t,r,o,u){this.batchId=t,this.localWriteTime=r,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(t,r){const o=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(t.key)&&wr(d,t,o[u])}}applyToLocalView(t,r){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(r=Tr(o,t,r,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(r=Tr(o,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const o=Wn();return this.mutations.forEach(u=>{const d=t.get(u.key),m=d.overlayedDocument;let b=this.applyToLocalView(m,d.mutatedFields);b=r.has(u.key)?null:b;const F=fr(m,b);null!==F&&o.set(u.key,F),m.isValidDocument()||m.convertToNoDocument(Zt.min())}),o}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),kn())}isEqual(t){return this.batchId===t.batchId&&Un(this.mutations,t.mutations,(r,o)=>Yt(r,o))&&Un(this.baseMutations,t.baseMutations,(r,o)=>Yt(r,o))}}class ho{constructor(t,r,o,u){this.batch=t,this.commitVersion=r,this.mutationResults=o,this.docVersions=u}static from(t,r,o){mt(t.mutations.length===o.length);let u=function(){return Lr}();const d=t.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new ho(t,r,o,u)}}class Yn{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class El{constructor(t,r){this.count=t,this.unchangedNames=r}}var ai,jn;function Dc(a){switch(a){default:return St();case Ze.CANCELLED:case Ze.UNKNOWN:case Ze.DEADLINE_EXCEEDED:case Ze.RESOURCE_EXHAUSTED:case Ze.INTERNAL:case Ze.UNAVAILABLE:case Ze.UNAUTHENTICATED:return!1;case Ze.INVALID_ARGUMENT:case Ze.NOT_FOUND:case Ze.ALREADY_EXISTS:case Ze.PERMISSION_DENIED:case Ze.FAILED_PRECONDITION:case Ze.ABORTED:case Ze.OUT_OF_RANGE:case Ze.UNIMPLEMENTED:case Ze.DATA_LOSS:return!0}}function tc(a){if(void 0===a)return Cn("GRPC error has no .code"),Ze.UNKNOWN;switch(a){case ai.OK:return Ze.OK;case ai.CANCELLED:return Ze.CANCELLED;case ai.UNKNOWN:return Ze.UNKNOWN;case ai.DEADLINE_EXCEEDED:return Ze.DEADLINE_EXCEEDED;case ai.RESOURCE_EXHAUSTED:return Ze.RESOURCE_EXHAUSTED;case ai.INTERNAL:return Ze.INTERNAL;case ai.UNAVAILABLE:return Ze.UNAVAILABLE;case ai.UNAUTHENTICATED:return Ze.UNAUTHENTICATED;case ai.INVALID_ARGUMENT:return Ze.INVALID_ARGUMENT;case ai.NOT_FOUND:return Ze.NOT_FOUND;case ai.ALREADY_EXISTS:return Ze.ALREADY_EXISTS;case ai.PERMISSION_DENIED:return Ze.PERMISSION_DENIED;case ai.FAILED_PRECONDITION:return Ze.FAILED_PRECONDITION;case ai.ABORTED:return Ze.ABORTED;case ai.OUT_OF_RANGE:return Ze.OUT_OF_RANGE;case ai.UNIMPLEMENTED:return Ze.UNIMPLEMENTED;case ai.DATA_LOSS:return Ze.DATA_LOSS;default:return St()}}(jn=ai||(ai={}))[jn.OK=0]="OK",jn[jn.CANCELLED=1]="CANCELLED",jn[jn.UNKNOWN=2]="UNKNOWN",jn[jn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jn[jn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jn[jn.NOT_FOUND=5]="NOT_FOUND",jn[jn.ALREADY_EXISTS=6]="ALREADY_EXISTS",jn[jn.PERMISSION_DENIED=7]="PERMISSION_DENIED",jn[jn.UNAUTHENTICATED=16]="UNAUTHENTICATED",jn[jn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jn[jn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jn[jn.ABORTED=10]="ABORTED",jn[jn.OUT_OF_RANGE=11]="OUT_OF_RANGE",jn[jn.UNIMPLEMENTED=12]="UNIMPLEMENTED",jn[jn.INTERNAL=13]="INTERNAL",jn[jn.UNAVAILABLE=14]="UNAVAILABLE",jn[jn.DATA_LOSS=15]="DATA_LOSS";function _a(){return new TextEncoder}const Il=new Ut([4294967295,4294967295],0);function ea(a){const t=_a().encode(a),r=new ln;return r.update(t),new Uint8Array(r.digest())}function nc(a){const t=new DataView(a.buffer),r=t.getUint32(0,!0),o=t.getUint32(4,!0),u=t.getUint32(8,!0),d=t.getUint32(12,!0);return[new Ut([r,o],0),new Ut([u,d],0)]}class Is{constructor(t,r,o){if(this.bitmap=t,this.padding=r,this.hashCount=o,r<0||r>=8)throw new Kn(`Invalid padding: ${r}`);if(o<0)throw new Kn(`Invalid hash count: ${o}`);if(t.length>0&&0===this.hashCount)throw new Kn(`Invalid hash count: ${o}`);if(0===t.length&&0!==r)throw new Kn(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*t.length-r,this.Te=Ut.fromNumber(this.Ie)}Ee(t,r,o){let u=t.add(r.multiply(Ut.fromNumber(o)));return 1===u.compare(Il)&&(u=new Ut([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const r=ea(t),[o,u]=nc(r);for(let d=0;d<this.hashCount;d++){const m=this.Ee(o,u,d);if(!this.de(m))return!1}return!0}static create(t,r,o){const u=t%8==0?0:8-t%8,d=new Uint8Array(Math.ceil(t/8)),m=new Is(d,u,r);return o.forEach(b=>m.insert(b)),m}insert(t){if(0===this.Ie)return;const r=ea(t),[o,u]=nc(r);for(let d=0;d<this.hashCount;d++){const m=this.Ee(o,u,d);this.Ae(m)}}Ae(t){const r=Math.floor(t/8);this.bitmap[r]|=1<<t%8}}class Kn extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rc{constructor(t,r,o,u,d){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(t,r,o){const u=new Map;return u.set(t,_i.createSynthesizedTargetChangeForCurrentChange(t,r,o)),new rc(Zt.min(),u,new Sr(zt),on(),kn())}}class _i{constructor(t,r,o,u,d){this.resumeToken=t,this.current=r,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(t,r,o){return new _i(o,r,kn(),kn(),kn())}}class bo{constructor(t,r,o,u){this.Re=t,this.removedTargetIds=r,this.key=o,this.Ve=u}}class ba{constructor(t,r){this.targetId=t,this.me=r}}class Sa{constructor(t,r,o=zr.EMPTY_BYTE_STRING,u=null){this.state=t,this.targetIds=r,this.resumeToken=o,this.cause=u}}class bi{constructor(){this.fe=0,this.ge=As(),this.pe=zr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=kn(),r=kn(),o=kn();return this.ge.forEach((u,d)=>{switch(d){case 0:t=t.add(u);break;case 2:r=r.add(u);break;case 1:o=o.add(u);break;default:St()}}),new _i(this.pe,this.ye,t,r,o)}Ce(){this.we=!1,this.ge=As()}Fe(t,r){this.we=!0,this.ge=this.ge.insert(t,r)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,mt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Su{constructor(t){this.Le=t,this.Be=new Map,this.ke=on(),this.qe=Ds(),this.Qe=new Sr(zt)}Ke(t){for(const r of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(r,t.Ve):this.Ue(r,t.key,t.Ve);for(const r of t.removedTargetIds)this.Ue(r,t.key,t.Ve)}We(t){this.forEachTarget(t,r=>{const o=this.Ge(r);switch(t.state){case 0:this.ze(r)&&o.De(t.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(t.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(o.Ne(),o.De(t.resumeToken));break;case 4:this.ze(r)&&(this.je(r),o.De(t.resumeToken));break;default:St()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.Be.forEach((o,u)=>{this.ze(u)&&r(u)})}He(t){const r=t.targetId,o=t.me.count,u=this.Je(r);if(u){const d=u.target;if(Aa(d))if(0===o){const m=new we(d.path);this.Ue(r,m,sr.newNoDocument(m,Zt.min()))}else mt(1===o);else{const m=this.Ye(r);if(m!==o){const b=this.Ze(t),F=b?this.Xe(b,t,m):1;0!==F&&(this.je(r),this.Qe=this.Qe.insert(r,2===F?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(t){const r=t.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:d=0}=r;let m,b;try{m=oi(o).toUint8Array()}catch(F){if(F instanceof Lo)return Gn("Decoding the base64 bloom filter in existence filter failed ("+F.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw F}try{b=new Is(m,u,d)}catch(F){return Gn(F instanceof Kn?"BloomFilter error: ":"Applying bloom filter failed: ",F),null}return 0===b.Ie?null:b}Xe(t,r,o){return r.me.count===o-this.nt(t,r.targetId)?0:2}nt(t,r){const o=this.Le.getRemoteKeysForTarget(r);let u=0;return o.forEach(d=>{const m=this.Le.tt(),b=`projects/${m.projectId}/databases/${m.database}/documents/${d.path.canonicalString()}`;t.mightContain(b)||(this.Ue(r,d,null),u++)}),u}rt(t){const r=new Map;this.Be.forEach((d,m)=>{const b=this.Je(m);if(b){if(d.current&&Aa(b.target)){const F=new we(b.target.path);null!==this.ke.get(F)||this.it(m,F)||this.Ue(m,F,sr.newNoDocument(F,t))}d.be&&(r.set(m,d.ve()),d.Ce())}});let o=kn();this.qe.forEach((d,m)=>{let b=!0;m.forEachWhile(F=>{const H=this.Je(F);return!H||"TargetPurposeLimboResolution"===H.purpose||(b=!1,!1)}),b&&(o=o.add(d))}),this.ke.forEach((d,m)=>m.setReadTime(t));const u=new rc(t,r,this.Qe,this.ke,o);return this.ke=on(),this.qe=Ds(),this.Qe=new Sr(zt),u}$e(t,r){if(!this.ze(t))return;const o=this.it(t,r.key)?2:0;this.Ge(t).Fe(r.key,o),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(t))}Ue(t,r,o){if(!this.ze(t))return;const u=this.Ge(t);this.it(t,r)?u.Fe(r,1):u.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(t)),o&&(this.ke=this.ke.insert(r,o))}removeTarget(t){this.Be.delete(t)}Ye(t){const r=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let r=this.Be.get(t);return r||(r=new bi,this.Be.set(t,r)),r}st(t){let r=this.qe.get(t);return r||(r=new vr(zt),this.qe=this.qe.insert(t,r)),r}ze(t){const r=null!==this.Je(t);return r||nt("WatchChangeAggregator","Detected inactive target",t),r}Je(t){const r=this.Be.get(t);return r&&r.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new bi),this.Le.getRemoteKeysForTarget(t).forEach(r=>{this.Ue(t,r,null)})}it(t,r){return this.Le.getRemoteKeysForTarget(t).has(r)}}function Ds(){return new Sr(we.comparator)}function As(){return new Sr(we.comparator)}const Kc={asc:"ASCENDING",desc:"DESCENDING"},ta={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qc={and:"AND",or:"OR"};class to{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Ba(a,t){return a.useProto3Json||ve(t)?t:{value:t}}function ic(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qc(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function Pu(a,t){return ic(a,t.toTimestamp())}function ki(a){return mt(!!a),Zt.fromTimestamp(function(r){const o=ss(r);return new Jt(o.seconds,o.nanos)}(a))}function Mu(a,t){return ja(a,t).canonicalString()}function ja(a,t){const r=(u=a,new On(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===t?r:r.child(t)}function Cl(a){const t=On.fromString(a);return mt(na(t)),t}function Xc(a,t){return Mu(a.databaseId,t.path)}function ya(a,t){const r=Cl(t);if(r.get(1)!==a.databaseId.projectId)throw new Rt(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Rt(Ze.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new we(Ed(r))}function Yh(a,t){return Mu(a.databaseId,t)}function wl(a){const t=Cl(a);return 4===t.length?On.emptyPath():Ed(t)}function Ru(a){return new On(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Ed(a){return mt(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function Jh(a,t,r){return{name:Xc(a,t),fields:r.value.mapValue.fields}}function Zh(a,t,r){const o=ya(a,t.name),u=ki(t.updateTime),d=t.createTime?ki(t.createTime):Zt.min(),m=new Zr({mapValue:{fields:t.fields}}),b=sr.newFoundDocument(o,u,d,m);return r&&b.setHasCommittedMutations(),r?b.setHasCommittedMutations():b}function Ou(a,t){let r;if(t instanceof In)r={update:Jh(a,t.key,t.value)};else if(t instanceof js)r={delete:Xc(a,t.key)};else if(t instanceof pr)r={update:Jh(a,t.key,t.data),updateMask:Ac(t.fieldMask)};else{if(!(t instanceof mi))return St();r={verify:Xc(a,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(o=>function(d,m){const b=m.transform;if(b instanceof Es)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(b instanceof Bs)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:b.elements}};if(b instanceof $)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:b.elements}};if(b instanceof B)return{fieldPath:m.field.canonicalString(),increment:b.Pe};throw St()}(0,o))),t.precondition.isNone||(r.currentDocument=void 0!==(d=t.precondition).updateTime?{updateTime:Pu(a,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:St()),r;var d}function Nu(a,t){const r=t.currentDocument?void 0!==(d=t.currentDocument).updateTime?gn.updateTime(ki(d.updateTime)):void 0!==d.exists?gn.exists(d.exists):gn.none():gn.none(),o=t.updateTransforms?t.updateTransforms.map(u=>function(m,b){let F=null;"setToServerValue"in b?(mt("REQUEST_TIME"===b.setToServerValue),F=new Es):"appendMissingElements"in b?F=new Bs(b.appendMissingElements.values||[]):"removeAllFromArray"in b?F=new $(b.removeAllFromArray.values||[]):"increment"in b?F=new B(m,b.increment):St();const H=ke.fromServerFormat(b.fieldPath);return new xt(H,F)}(a,u)):[];var d;if(t.update){const u=ya(a,t.update.name),d=new Zr({mapValue:{fields:t.update.fields}});if(t.updateMask){const m=new Jr((t.updateMask.fieldPaths||[]).map(re=>ke.fromServerFormat(re)));return new pr(u,d,m,r,o)}return new In(u,d,r,o)}if(t.delete){const u=ya(a,t.delete);return new js(u,r)}if(t.verify){const u=ya(a,t.verify);return new mi(u,r)}return St()}function M(a,t){return{documents:[Yh(a,t.path)]}}function w(a,t){const r={structuredQuery:{}},o=t.path;let u;null!==t.collectionGroup?(u=o,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(u=o.popLast(),r.structuredQuery.from=[{collectionId:o.lastSegment()}]),r.parent=Yh(a,u);const d=function(H){if(0!==H.length)return Vi(Z.create(H,"and"))}(t.filters);d&&(r.structuredQuery.where=d);const m=function(H){if(0!==H.length)return H.map(re=>{return{field:Jn((Me=re).field),direction:Tt(Me.dir)};var Me})}(t.orderBy);m&&(r.structuredQuery.orderBy=m);const b=Ba(a,t.limit);return null!==b&&(r.structuredQuery.limit=b),t.startAt&&(r.structuredQuery.startAt={before:(H=t.startAt).inclusive,values:H.position}),t.endAt&&(r.structuredQuery.endAt=function(H){return{before:!H.inclusive,values:H.position}}(t.endAt)),{_t:r,parent:u};var H}function j(a){let t=wl(a.parent);const r=a.structuredQuery,o=r.from?r.from.length:0;let u=null;if(o>0){mt(1===o);const re=r.from[0];re.allDescendants?u=re.collectionId:t=t.child(re.collectionId)}let d=[];r.where&&(d=function(fe){const Me=Te(fe);return Me instanceof Z&&Xn(Me)?Me.getFilters():[Me]}(r.where));let m=[];r.orderBy&&(m=r.orderBy.map(Me=>{return new Fi(lr(($t=Me).field),function(Qt){switch(Qt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($t.direction));var $t}));let b=null;r.limit&&(b=function(fe){let Me;return Me="object"==typeof fe?fe.value:fe,ve(Me)?null:Me}(r.limit));let F=null;var fe;r.startAt&&(F=new us((fe=r.startAt).values||[],!!fe.before));let H=null;return r.endAt&&(H=function(fe){return new us(fe.values||[],!fe.before)}(r.endAt)),ii(t,u,m,d,b,"F",F,H)}function Te(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const o=lr(r.unaryFilter.field);return N.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=lr(r.unaryFilter.field);return N.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=lr(r.unaryFilter.field);return N.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=lr(r.unaryFilter.field);return N.create(m,"!=",{nullValue:"NULL_VALUE"});default:return St()}}(a):void 0!==a.fieldFilter?N.create(lr((r=a).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return St()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return Z.create(r.compositeFilter.filters.map(o=>Te(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return St()}}(r.compositeFilter.op))}(a):St();var r}function Tt(a){return Kc[a]}function ft(a){return ta[a]}function mn(a){return qc[a]}function Jn(a){return{fieldPath:a.canonicalString()}}function lr(a){return ke.fromServerFormat(a.fieldPath)}function Vi(a){return a instanceof N?function(r){if("=="===r.op){if(Js(r.value))return{unaryFilter:{field:Jn(r.field),op:"IS_NAN"}};if(Xo(r.value))return{unaryFilter:{field:Jn(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(Js(r.value))return{unaryFilter:{field:Jn(r.field),op:"IS_NOT_NAN"}};if(Xo(r.value))return{unaryFilter:{field:Jn(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jn(r.field),op:ft(r.op),value:r.value}}}(a):a instanceof Z?function(r){const o=r.getFilters().map(u=>Vi(u));return 1===o.length?o[0]:{compositeFilter:{op:mn(r.op),filters:o}}}(a):St()}function Ac(a){const t=[];return a.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function na(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class fo{constructor(t,r,o,u,d=Zt.min(),m=Zt.min(),b=zr.EMPTY_BYTE_STRING,F=null){this.target=t,this.targetId=r,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=b,this.expectedCount=F}withSequenceNumber(t){return new fo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new fo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class $s{constructor(t){this.ct=t}}function xu(a,t){const r=t.key,o={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:ku(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())o.document={name:Xc(d=a.ct,(m=t).key),fields:m.data.value.mapValue.fields,updateTime:ic(d,m.version.toTimestamp()),createTime:ic(d,m.createTime.toTimestamp())};else if(t.isNoDocument())o.noDocument={path:r.path.toArray(),readTime:$a(t.version)};else{if(!t.isUnknownDocument())return St();o.unknownDocument={path:r.path.toArray(),version:$a(t.version)}}var d,m;return o}function ku(a){const t=a.toTimestamp();return[t.seconds,t.nanoseconds]}function $a(a){const t=a.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Yc(a){const t=new Jt(a.seconds,a.nanoseconds);return Zt.fromTimestamp(t)}function Pr(a,t){const r=(t.baseMutations||[]).map(d=>Nu(a.ct,d));for(let d=0;d<t.mutations.length-1;++d)d+1<t.mutations.length&&void 0!==t.mutations[d+1].transform&&(t.mutations[d].updateTransforms=t.mutations[d+1].transform.fieldTransforms,t.mutations.splice(d+1,1),++d);const o=t.mutations.map(d=>Nu(a.ct,d)),u=Jt.fromMillis(t.localWriteTimeMs);return new Kr(t.batchId,u,r,o)}function Ha(a){const t=Yc(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?Yc(a.lastLimboFreeSnapshotVersion):Zt.min();let o;return o=void 0!==a.query.documents?(mt(1===(d=a.query).documents.length),qi(Ni(wl(d.documents[0])))):function(d){return qi(j(d))}(a.query),new fo(o,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,t,r,zr.fromBase64String(a.resumeToken));var d}function Jc(a,t){const r=$a(t.snapshotVersion),o=$a(t.lastLimboFreeSnapshotVersion);let u;u=Aa(t.target)?M(a.ct,t.target):w(a.ct,t.target)._t;const d=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:jo(t.target),readTime:r,resumeToken:d,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Hs(a){const t=j({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?Y(t,t.limit,"L"):t}function Id(a,t){return new Yn(t.largestBatchId,Nu(a.ct,t.overlayMutation))}function sc(a,t){const r=t.path.lastSegment();return[a,Qe(t.path.popLast()),r]}function oc(a,t,r,o){return{indexId:a,uid:t,sequenceNumber:r,readTime:$a(o.readTime),documentKey:Qe(o.documentKey.path),largestBatchId:o.largestBatchId}}class zo{getBundleMetadata(t,r){return ef(t).get(r).next(o=>{if(o)return{id:(d=o).bundleId,createTime:Yc(d.createTime),version:d.version};var d})}saveBundleMetadata(t,r){return ef(t).put({bundleId:(u=r).id,createTime:$a(ki(u.createTime)),version:u.version});var u}getNamedQuery(t,r){return Zc(t).get(r).next(o=>{if(o)return{name:(d=o).name,query:Hs(d.bundledQuery),readTime:Yc(d.readTime)};var d})}saveNamedQuery(t,r){return Zc(t).put({name:(u=r).name,readTime:$a(ki(u.readTime)),bundledQuery:u.bundledQuery});var u}}function ef(a){return Er(a,"bundles")}function Zc(a){return Er(a,"namedQueries")}class Dl{constructor(t,r){this.serializer=t,this.userId=r}static lt(t,r){return new Dl(t,r.uid||"")}getOverlay(t,r){return no(t).get(sc(this.userId,r)).next(o=>o?Id(this.serializer,o):null)}getOverlays(t,r){const o=Sn();return Re.forEach(r,u=>this.getOverlay(t,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(t,r,o){const u=[];return o.forEach((d,m)=>{const b=new Yn(r,m);u.push(this.ht(t,b))}),Re.waitFor(u)}removeOverlaysForBatchId(t,r,o){const u=new Set;r.forEach(m=>u.add(Qe(m.getCollectionPath())));const d=[];return u.forEach(m=>{const b=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(no(t).j("collectionPathOverlayIndex",b))}),Re.waitFor(d)}getOverlaysForCollection(t,r,o){const u=Sn(),d=Qe(r),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return no(t).U("collectionPathOverlayIndex",m).next(b=>{for(const F of b){const H=Id(this.serializer,F);u.set(H.getKey(),H)}return u})}getOverlaysForCollectionGroup(t,r,o,u){const d=Sn();let m;const b=IDBKeyRange.bound([this.userId,r,o],[this.userId,r,Number.POSITIVE_INFINITY],!0);return no(t).J({index:"collectionGroupOverlayIndex",range:b},(F,H,re)=>{const fe=Id(this.serializer,H);d.size()<u||fe.largestBatchId===m?(d.set(fe.getKey(),fe),m=fe.largestBatchId):re.done()}).next(()=>d)}ht(t,r){return no(t).put(function(u,d,m){const[b,F,H]=sc(d,m.mutation.key);return{userId:d,collectionPath:F,documentId:H,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Ou(u.ct,m.mutation)}}(this.serializer,this.userId,r))}}function no(a){return Er(a,"documentOverlays")}class tf{Pt(t){return Er(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(r=>{const o=r?.value;return o?zr.fromUint8Array(o):zr.EMPTY_BYTE_STRING})}setSessionToken(t,r){return this.Pt(t).put({name:"sessionToken",value:r.toUint8Array()})}}class Ga{constructor(){}It(t,r){this.Tt(t,r),r.Et()}Tt(t,r){if("nullValue"in t)this.dt(r,5);else if("booleanValue"in t)this.dt(r,10),r.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(r,15),r.At(hn(t.integerValue));else if("doubleValue"in t){const o=hn(t.doubleValue);isNaN(o)?this.dt(r,13):(this.dt(r,15),Ie(o)?r.At(0):r.At(o))}else if("timestampValue"in t){let o=t.timestampValue;this.dt(r,20),"string"==typeof o&&(o=ss(o)),r.Rt(`${o.seconds||""}`),r.At(o.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,r),this.ft(r);else if("bytesValue"in t)this.dt(r,30),r.gt(oi(t.bytesValue)),this.ft(r);else if("referenceValue"in t)this.yt(t.referenceValue,r);else if("geoPointValue"in t){const o=t.geoPointValue;this.dt(r,45),r.At(o.latitude||0),r.At(o.longitude||0)}else"mapValue"in t?Co(t)?this.dt(r,Number.MAX_SAFE_INTEGER):Ls(t)?this.wt(t.mapValue,r):(this.St(t.mapValue,r),this.ft(r)):"arrayValue"in t?(this.bt(t.arrayValue,r),this.ft(r)):St()}Vt(t,r){this.dt(r,25),this.Dt(t,r)}Dt(t,r){r.Rt(t)}St(t,r){const o=t.fields||{};this.dt(r,55);for(const u of Object.keys(o))this.Vt(u,r),this.Tt(o[u],r)}wt(t,r){var o,u;const d=t.fields||{};this.dt(r,53);const m="value",b=(null===(u=null===(o=d[m].arrayValue)||void 0===o?void 0:o.values)||void 0===u?void 0:u.length)||0;this.dt(r,15),r.At(hn(b)),this.Vt(m,r),this.Tt(d[m],r)}bt(t,r){const o=t.values||[];this.dt(r,50);for(const u of o)this.Tt(u,r)}yt(t,r){this.dt(r,37),we.fromName(t).path.forEach(o=>{this.dt(r,60),this.Dt(o,r)})}dt(t,r){t.At(r)}ft(t){t.At(2)}}function Al(a){if(0===a)return 8;let t=0;return!(a>>4)&&(t+=4,a<<=4),!(a>>6)&&(t+=2,a<<=2),!(a>>7)&&(t+=1),t}function bl(a){const t=64-function(o){let u=0;for(let d=0;d<8;++d){const m=Al(255&o[d]);if(u+=m,8!==m)break}return u}(a);return Math.ceil(t/8)}Ga.vt=new Ga;class bc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){const r=t[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Ft(o.value),o=r.next();this.Mt()}xt(t){const r=t[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Ot(o.value),o=r.next();this.Nt()}Lt(t){for(const r of t){const o=r.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=r.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Bt(t){for(const r of t){const o=r.charCodeAt(0);if(o<128)this.Ot(o);else if(o<2048)this.Ot(960|o>>>6),this.Ot(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|o>>>12),this.Ot(128|63&o>>>6),this.Ot(128|63&o);else{const u=r.codePointAt(0);this.Ot(240|u>>>18),this.Ot(128|63&u>>>12),this.Ot(128|63&u>>>6),this.Ot(128|63&u)}}this.Nt()}kt(t){const r=this.qt(t),o=bl(r);this.Qt(1+o),this.buffer[this.position++]=255&o;for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=255&r[u]}Kt(t){const r=this.qt(t),o=bl(r);this.Qt(1+o),this.buffer[this.position++]=~(255&o);for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){const r=function(d){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,d,!1),new Uint8Array(m.buffer)}(t),o=!!(128&r[0]);r[0]^=o?255:128;for(let u=1;u<r.length;++u)r[u]^=o?255:0;return r}Ft(t){const r=255&t;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(t){const r=255&t;0===r?(this.Gt(0),this.Gt(255)):255===r?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){const r=t+this.position;if(r<=this.buffer.length)return;let o=2*this.buffer.length;o<r&&(o=r);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Fu{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}}class Sl{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}}class za{constructor(){this.jt=new bc,this.Ht=new Fu(this.jt),this.Jt=new Sl(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return 0===t?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class po{constructor(t,r,o,u){this.indexId=t,this.documentKey=r,this.arrayValue=o,this.directionalValue=u}Zt(){const t=this.directionalValue.length,r=0===t||255===this.directionalValue[t-1]?t+1:t,o=new Uint8Array(r);return o.set(this.directionalValue,0),r!==t?o.set([0],this.directionalValue.length):++o[o.length-1],new po(this.indexId,this.documentKey,this.arrayValue,o)}}function Hn(a,t){let r=a.indexId-t.indexId;return 0!==r?r:(r=Cd(a.arrayValue,t.arrayValue),0!==r?r:(r=Cd(a.directionalValue,t.directionalValue),0!==r?r:we.comparator(a.documentKey,t.documentKey)))}function Cd(a,t){for(let r=0;r<a.length&&r<t.length;++r){const o=a[r]-t[r];if(0!==o)return o}return a.length-t.length}class nf{constructor(t){this.Xt=new vr((r,o)=>ke.comparator(r.field,o.field)),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(const r of t.filters){const o=r;o.isInequality()?this.Xt=this.Xt.add(o):this.tn.push(o)}}get nn(){return this.Xt.size>1}rn(t){if(mt(t.collectionGroup===this.collectionId),this.nn)return!1;const r=Ke(t);if(void 0!==r&&!this.sn(r))return!1;const o=Pt(t);let u=new Set,d=0,m=0;for(;d<o.length&&this.sn(o[d]);++d)u=u.add(o[d].fieldPath.canonicalString());if(d===o.length)return!0;if(this.Xt.size>0){const b=this.Xt.getIterator().getNext();if(!u.has(b.field.canonicalString())){const F=o[d];if(!this.on(b,F)||!this._n(this.en[m++],F))return!1}++d}for(;d<o.length;++d)if(m>=this.en.length||!this._n(this.en[m++],o[d]))return!1;return!0}an(){if(this.nn)return null;let t=new vr(ke.comparator);const r=[];for(const o of this.tn)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)r.push(new q(o.field,2));else{if(t.has(o.field))continue;t=t.add(o.field),r.push(new q(o.field,0))}for(const o of this.en)o.field.isKeyField()||t.has(o.field)||(t=t.add(o.field),r.push(new q(o.field,"asc"===o.dir?0:1)));return new Ce(Ce.UNKNOWN_ID,this.collectionId,r,se.empty())}sn(t){for(const r of this.tn)if(this.on(r,t))return!0;return!1}on(t,r){return!(void 0===t||!t.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===t.op||"array-contains-any"===t.op)}_n(t,r){return!!t.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===t.dir||1===r.kind&&"desc"===t.dir)}}function wd(a){var t,r;if(mt(a instanceof N||a instanceof Z),a instanceof N){if(a instanceof Va){const u=(null===(r=null===(t=a.value.arrayValue)||void 0===t?void 0:t.values)||void 0===r?void 0:r.map(d=>N.create(a.field,"==",d)))||[];return Z.create(u,"or")}return a}const o=a.filters.map(u=>wd(u));return Z.create(o,a.op)}function rf(a){if(0===a.getFilters().length)return[];const t=Dd(wd(a));return mt(Wa(t)),Td(t)||Pl(t)?[t]:t.getFilters()}function Td(a){return a instanceof N}function Pl(a){return a instanceof Z&&Xn(a)}function Wa(a){return Td(a)||Pl(a)||function(r){if(r instanceof Z&&fn(r)){for(const o of r.getFilters())if(!Td(o)&&!Pl(o))return!1;return!0}return!1}(a)}function Dd(a){if(mt(a instanceof N||a instanceof Z),a instanceof N)return a;if(1===a.filters.length)return Dd(a.filters[0]);const t=a.filters.map(o=>Dd(o));let r=Z.create(t,a.op);return r=Rl(r),Wa(r)?r:(mt(r instanceof Z),mt(be(r)),mt(r.filters.length>1),r.filters.reduce((o,u)=>Ad(o,u)))}function Ad(a,t){let r;return mt(a instanceof N||a instanceof Z),mt(t instanceof N||t instanceof Z),r=a instanceof N?t instanceof N?Z.create([a,t],"and"):Ml(a,t):t instanceof N?Ml(t,a):function(u,d){if(mt(u.filters.length>0&&d.filters.length>0),be(u)&&be(d))return Ts(u,d.getFilters());const m=fn(u)?u:d,b=fn(u)?d:u,F=m.filters.map(H=>Ad(H,b));return Z.create(F,"or")}(a,t),Rl(r)}function Ml(a,t){if(be(t))return Ts(t,a.getFilters());{const r=t.filters.map(o=>Ad(a,o));return Z.create(r,"or")}}function Rl(a){if(mt(a instanceof N||a instanceof Z),a instanceof N)return a;const t=a.getFilters();if(1===t.length)return Rl(t[0]);if(ys(a))return a;const r=t.map(u=>Rl(u)),o=[];return r.forEach(u=>{u instanceof N?o.push(u):u instanceof Z&&(u.op===a.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:Z.create(o,a.op)}class Kp{constructor(){this.un=new Ft}addToCollectionParentIndex(t,r){return this.un.add(r),Re.resolve()}getCollectionParents(t,r){return Re.resolve(this.un.getEntries(r))}addFieldIndex(t,r){return Re.resolve()}deleteFieldIndex(t,r){return Re.resolve()}deleteAllFieldIndexes(t){return Re.resolve()}createTargetIndexes(t,r){return Re.resolve()}getDocumentsMatchingTarget(t,r){return Re.resolve(null)}getIndexType(t,r){return Re.resolve(0)}getFieldIndexes(t,r){return Re.resolve([])}getNextCollectionGroupToUpdate(t){return Re.resolve(null)}getMinOffset(t,r){return Re.resolve(Vt.min())}getMinOffsetFromCollectionGroup(t,r){return Re.resolve(Vt.min())}updateCollectionGroup(t,r,o){return Re.resolve()}updateIndexEntries(t,r){return Re.resolve()}}class Ft{constructor(){this.index={}}add(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r]||new vr(On.comparator),d=!u.has(o);return this.index[r]=u.add(o),d}has(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r];return u&&u.has(o)}getEntries(t){return(this.index[t]||new vr(On.comparator)).toArray()}}const Mr=new Uint8Array(0);class Ol{constructor(t,r){this.databaseId=r,this.cn=new Ft,this.ln=new ht(o=>jo(o),(o,u)=>To(o,u)),this.uid=t.uid||""}addToCollectionParentIndex(t,r){if(!this.cn.has(r)){const o=r.lastSegment(),u=r.popLast();t.addOnCommittedListener(()=>{this.cn.add(r)});const d={collectionId:o,parent:Qe(u)};return Vu(t).put(d)}return Re.resolve()}getCollectionParents(t,r){const o=[],u=IDBKeyRange.bound([r,""],[Or(r),""],!1,!0);return Vu(t).U(u).next(d=>{for(const m of d){if(m.collectionId!==r)break;o.push(Rn(m.parent))}return o})}addFieldIndex(t,r){const o=Sc(t),u={indexId:(b=r).indexId,collectionGroup:b.collectionGroup,fields:b.fields.map(F=>[F.fieldPath.canonicalString(),F.kind])};var b;delete u.indexId;const d=o.add(u);if(r.indexState){const m=ra(t);return d.next(b=>{m.put(oc(b,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return d.next()}deleteFieldIndex(t,r){const o=Sc(t),u=ra(t),d=Br(t);return o.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const r=Sc(t),o=Br(t),u=ra(t);return r.j().next(()=>o.j()).next(()=>u.j())}createTargetIndexes(t,r){return Re.forEach(this.hn(r),o=>this.getIndexType(t,o).next(u=>{if(0===u||1===u){const d=new nf(o).an();if(null!=d)return this.addFieldIndex(t,d)}}))}getDocumentsMatchingTarget(t,r){const o=Br(t);let u=!0;const d=new Map;return Re.forEach(this.hn(r),m=>this.Pn(t,m).next(b=>{u&&(u=!!b),d.set(m,b)})).next(()=>{if(u){let m=kn();const b=[];return Re.forEach(d,(F,H)=>{var Fn;nt("IndexedDbIndexManager",`Using index ${Fn=F,`id=${Fn.indexId}|cg=${Fn.collectionGroup}|f=${Fn.fields.map(or=>`${or.fieldPath}:${or.kind}`).join(",")}`} to execute ${jo(r)}`);const re=function(Fn,or){const $r=Ke(or);if(void 0===$r)return null;for(const Ar of Jo(Fn,$r.fieldPath))switch(Ar.op){case"array-contains-any":return Ar.value.arrayValue.values||[];case"array-contains":return[Ar.value]}return null}(H,F),fe=function(Fn,or){const $r=new Map;for(const Ar of Pt(or))for(const Je of Jo(Fn,Ar.fieldPath))switch(Je.op){case"==":case"in":$r.set(Ar.fieldPath.canonicalString(),Je.value);break;case"not-in":case"!=":return $r.set(Ar.fieldPath.canonicalString(),Je.value),Array.from($r.values())}return null}(H,F),Me=function(Fn,or){const $r=[];let Ar=!0;for(const Je of Pt(or)){const Se=0===Je.kind?Do(Fn,Je.fieldPath,Fn.startAt):cr(Fn,Je.fieldPath,Fn.startAt);$r.push(Se.value),Ar&&(Ar=Se.inclusive)}return new us($r,Ar)}(H,F),at=function(Fn,or){const $r=[];let Ar=!0;for(const Je of Pt(or)){const Se=0===Je.kind?cr(Fn,Je.fieldPath,Fn.endAt):Do(Fn,Je.fieldPath,Fn.endAt);$r.push(Se.value),Ar&&(Ar=Se.inclusive)}return new us($r,Ar)}(H,F),$t=this.In(F,H,Me),tn=this.In(F,H,at),Qt=this.Tn(F,H,fe),Vn=this.En(F.indexId,re,$t,Me.inclusive,tn,at.inclusive,Qt);return Re.forEach(Vn,qn=>o.G(qn,r.limit).next(Fn=>{Fn.forEach(or=>{const $r=we.fromSegments(or.documentKey);m.has($r)||(m=m.add($r),b.push($r))})}))}).next(()=>b)}return Re.resolve(null)})}hn(t){let r=this.ln.get(t);return r||(r=0===t.filters.length?[t]:rf(Z.create(t.filters,"and")).map(o=>pa(t.path,t.collectionGroup,t.orderBy,o.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,r),r)}En(t,r,o,u,d,m,b){const F=(null!=r?r.length:1)*Math.max(o.length,d.length),H=F/(null!=r?r.length:1),re=[];for(let fe=0;fe<F;++fe){const Me=r?this.dn(r[fe/H]):Mr,at=this.An(t,Me,o[fe%H],u),$t=this.Rn(t,Me,d[fe%H],m),tn=b.map(Qt=>this.An(t,Me,Qt,!0));re.push(...this.createRange(at,$t,tn))}return re}An(t,r,o,u){const d=new po(t,we.empty(),r,o);return u?d:d.Zt()}Rn(t,r,o,u){const d=new po(t,we.empty(),r,o);return u?d.Zt():d}Pn(t,r){const o=new nf(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(t,u).next(d=>{let m=null;for(const b of d)o.rn(b)&&(!m||b.fields.length>m.fields.length)&&(m=b);return m})}getIndexType(t,r){let o=2;const u=this.hn(r);return Re.forEach(u,d=>this.Pn(t,d).next(m=>{m?0!==o&&m.fields.length<function(F){let H=new vr(ke.comparator),re=!1;for(const fe of F.filters)for(const Me of fe.getFlattenedFilters())Me.field.isKeyField()||("array-contains"===Me.op||"array-contains-any"===Me.op?re=!0:H=H.add(Me.field));for(const fe of F.orderBy)fe.field.isKeyField()||(H=H.add(fe.field));return H.size+(re?1:0)}(d)&&(o=1):o=0})).next(()=>null!==r.limit&&u.length>1&&2===o?1:o)}Vn(t,r){const o=new za;for(const u of Pt(t)){const d=r.data.field(u.fieldPath);if(null==d)return null;const m=o.Yt(u.kind);Ga.vt.It(d,m)}return o.zt()}dn(t){const r=new za;return Ga.vt.It(t,r.Yt(0)),r.zt()}mn(t,r){const o=new za;return Ga.vt.It(Hi(this.databaseId,r),o.Yt(function(d){const m=Pt(d);return 0===m.length?0:m[m.length-1].kind}(t))),o.zt()}Tn(t,r,o){if(null===o)return[];let u=[];u.push(new za);let d=0;for(const m of Pt(t)){const b=o[d++];for(const F of u)if(this.fn(r,m.fieldPath)&&Vs(b))u=this.gn(u,m,b);else{const H=F.Yt(m.kind);Ga.vt.It(b,H)}}return this.pn(u)}In(t,r,o){return this.Tn(t,r,o.position)}pn(t){const r=[];for(let o=0;o<t.length;++o)r[o]=t[o].zt();return r}gn(t,r,o){const u=[...t],d=[];for(const m of o.arrayValue.values||[])for(const b of u){const F=new za;F.seed(b.zt()),Ga.vt.It(m,F.Yt(r.kind)),d.push(F)}return d}fn(t,r){return!!t.filters.find(o=>o instanceof N&&o.field.isEqual(r)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(t,r){const o=Sc(t),u=ra(t);return(r?o.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):o.U()).next(d=>{const m=[];return Re.forEach(d,b=>u.get([b.indexId,this.uid]).next(F=>{m.push(function(re,fe){const Me=fe?new se(fe.sequenceNumber,new Vt(Yc(fe.readTime),new we(Rn(fe.documentKey)),fe.largestBatchId)):se.empty(),at=re.fields.map(([$t,tn])=>new q(ke.fromServerFormat($t),tn));return new Ce(re.indexId,re.collectionGroup,at,Me)}(b,F))})).next(()=>m)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(r=>0===r.length?null:(r.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:zt(o.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(t,r,o){const u=Sc(t),d=ra(t);return this.yn(t).next(m=>u.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(b=>Re.forEach(b,F=>d.put(oc(F.indexId,this.uid,m,o)))))}updateIndexEntries(t,r){const o=new Map;return Re.forEach(r,(u,d)=>{const m=o.get(u.collectionGroup);return(m?Re.resolve(m):this.getFieldIndexes(t,u.collectionGroup)).next(b=>(o.set(u.collectionGroup,b),Re.forEach(b,F=>this.wn(t,u,F).next(H=>{const re=this.Sn(d,F);return H.isEqual(re)?Re.resolve():this.bn(t,d,F,H,re)}))))})}Dn(t,r,o,u){return Br(t).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.mn(o,r.key),documentKey:r.key.path.toArray()})}vn(t,r,o,u){return Br(t).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.mn(o,r.key),r.key.path.toArray()])}wn(t,r,o){const u=Br(t);let d=new vr(Hn);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.mn(o,r)])},(m,b)=>{d=d.add(new po(o.indexId,r,b.arrayValue,b.directionalValue))}).next(()=>d)}Sn(t,r){let o=new vr(Hn);const u=this.Vn(r,t);if(null==u)return o;const d=Ke(r);if(null!=d){const m=t.data.field(d.fieldPath);if(Vs(m))for(const b of m.arrayValue.values||[])o=o.add(new po(r.indexId,t.key,this.dn(b),u))}else o=o.add(new po(r.indexId,t.key,Mr,u));return o}bn(t,r,o,u,d){nt("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const m=[];return function(F,H,re,fe,Me){const at=F.getIterator(),$t=H.getIterator();let tn=Xs(at),Qt=Xs($t);for(;tn||Qt;){let Vn=!1,qn=!1;if(tn&&Qt){const Fn=re(tn,Qt);Fn<0?qn=!0:Fn>0&&(Vn=!0)}else null!=tn?qn=!0:Vn=!0;Vn?(fe(Qt),Qt=Xs($t)):qn?(Me(tn),tn=Xs(at)):(tn=Xs(at),Qt=Xs($t))}}(u,d,Hn,b=>{m.push(this.Dn(t,r,o,b))},b=>{m.push(this.vn(t,r,o,b))}),Re.waitFor(m)}yn(t){let r=1;return ra(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(t,r,o){o=o.sort((m,b)=>Hn(m,b)).filter((m,b,F)=>!b||0!==Hn(m,F[b-1]));const u=[];u.push(t);for(const m of o){const b=Hn(m,t),F=Hn(m,r);if(0===b)u[0]=t.Zt();else if(b>0&&F<0)u.push(m),u.push(m.Zt());else if(F>0)break}u.push(r);const d=[];for(let m=0;m<u.length;m+=2){if(this.Cn(u[m],u[m+1]))return[];d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Mr,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Mr,[]]))}return d}Cn(t,r){return Hn(t,r)>0}getMinOffsetFromCollectionGroup(t,r){return this.getFieldIndexes(t,r).next(va)}getMinOffset(t,r){return Re.mapArray(this.hn(r),o=>this.Pn(t,o).next(u=>u||St())).next(va)}}function Vu(a){return Er(a,"collectionParents")}function Br(a){return Er(a,"indexEntries")}function Sc(a){return Er(a,"indexConfiguration")}function ra(a){return Er(a,"indexState")}function va(a){mt(0!==a.length);let t=a[0].indexState.offset,r=t.largestBatchId;for(let o=1;o<a.length;o++){const u=a[o].indexState.offset;En(u,t)<0&&(t=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new Vt(t.readTime,t.documentKey,r)}const Lu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bs{constructor(t,r,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=o}static withCacheSize(t){return new bs(t,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function bd(a,t,r){const o=a.store("mutations"),u=a.store("documentMutations"),d=[],m=IDBKeyRange.only(r.batchId);let b=0;const F=o.J({range:m},(re,fe,Me)=>(b++,Me.delete()));d.push(F.next(()=>{mt(1===b)}));const H=[];for(const re of r.mutations){const fe=si(t,re.key.path,r.batchId);d.push(u.delete(fe)),H.push(re.key)}return Re.waitFor(d).next(()=>H)}function Sd(a){if(!a)return 0;let t;if(a.document)t=a.document;else if(a.unknownDocument)t=a.unknownDocument;else{if(!a.noDocument)throw St();t=a.noDocument}return JSON.stringify(t).length}bs.DEFAULT_COLLECTION_PERCENTILE=10,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bs.DEFAULT=new bs(41943040,bs.DEFAULT_COLLECTION_PERCENTILE,bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bs.DISABLED=new bs(-1,0,0);class eu{constructor(t,r,o,u){this.userId=t,this.serializer=r,this.indexManager=o,this.referenceDelegate=u,this.Fn={}}static lt(t,r,o,u){mt(""!==t.uid);const d=t.isAuthenticated()?t.uid:"";return new eu(d,r,o,u)}checkEmpty(t){let r=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ro(t).J({index:"userMutationsIndex",range:o},(u,d,m)=>{r=!1,m.done()}).next(()=>r)}addMutationBatch(t,r,o,u){const d=Pc(t),m=ro(t);return m.add({}).next(b=>{mt("number"==typeof b);const F=new Kr(b,r,o,u),H=function(at,$t,tn){const Qt=tn.baseMutations.map(qn=>Ou(at.ct,qn)),Vn=tn.mutations.map(qn=>Ou(at.ct,qn));return{userId:$t,batchId:tn.batchId,localWriteTimeMs:tn.localWriteTime.toMillis(),baseMutations:Qt,mutations:Vn}}(this.serializer,this.userId,F),re=[];let fe=new vr((Me,at)=>zt(Me.canonicalString(),at.canonicalString()));for(const Me of u){const at=si(this.userId,Me.key.path,b);fe=fe.add(Me.key.path.popLast()),re.push(m.put(H)),re.push(d.put(at,_r))}return fe.forEach(Me=>{re.push(this.indexManager.addToCollectionParentIndex(t,Me))}),t.addOnCommittedListener(()=>{this.Fn[b]=F.keys()}),Re.waitFor(re).next(()=>F)})}lookupMutationBatch(t,r){return ro(t).get(r).next(o=>o?(mt(o.userId===this.userId),Pr(this.serializer,o)):null)}Mn(t,r){return this.Fn[r]?Re.resolve(this.Fn[r]):this.lookupMutationBatch(t,r).next(o=>{if(o){const u=o.keys();return this.Fn[r]=u,u}return null})}getNextMutationBatchAfterBatchId(t,r){const o=r+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return ro(t).J({index:"userMutationsIndex",range:u},(m,b,F)=>{b.userId===this.userId&&(mt(b.batchId>=o),d=Pr(this.serializer,b)),F.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(t){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return ro(t).J({index:"userMutationsIndex",range:r,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(t){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ro(t).U("userMutationsIndex",r).next(o=>o.map(u=>Pr(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(t,r){const o=br(this.userId,r.path),u=IDBKeyRange.lowerBound(o),d=[];return Pc(t).J({range:u},(m,b,F)=>{const[H,re,fe]=m,Me=Rn(re);if(H===this.userId&&r.path.isEqual(Me))return ro(t).get(fe).next(at=>{if(!at)throw St();mt(at.userId===this.userId),d.push(Pr(this.serializer,at))});F.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(t,r){let o=new vr(zt);const u=[];return r.forEach(d=>{const m=br(this.userId,d.path),b=IDBKeyRange.lowerBound(m),F=Pc(t).J({range:b},(H,re,fe)=>{const[Me,at,$t]=H,tn=Rn(at);Me===this.userId&&d.path.isEqual(tn)?o=o.add($t):fe.done()});u.push(F)}),Re.waitFor(u).next(()=>this.xn(t,o))}getAllMutationBatchesAffectingQuery(t,r){const o=r.path,u=o.length+1,d=br(this.userId,o),m=IDBKeyRange.lowerBound(d);let b=new vr(zt);return Pc(t).J({range:m},(F,H,re)=>{const[fe,Me,at]=F,$t=Rn(Me);fe===this.userId&&o.isPrefixOf($t)?$t.length===u&&(b=b.add(at)):re.done()}).next(()=>this.xn(t,b))}xn(t,r){const o=[],u=[];return r.forEach(d=>{u.push(ro(t).get(d).next(m=>{if(null===m)throw St();mt(m.userId===this.userId),o.push(Pr(this.serializer,m))}))}),Re.waitFor(u).next(()=>o)}removeMutationBatch(t,r){return bd(t._e,this.userId,r).next(o=>(t.addOnCommittedListener(()=>{this.On(r.batchId)}),Re.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(t,u))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(r=>{if(!r)return Re.resolve();const o=IDBKeyRange.lowerBound(function(m){return[m]}(this.userId)),u=[];return Pc(t).J({range:o},(d,m,b)=>{if(d[0]===this.userId){const F=Rn(d[1]);u.push(F)}else b.done()}).next(()=>{mt(0===u.length)})})}containsKey(t,r){return Ns(t,this.userId,r)}Nn(t){return ia(t).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ns(a,t,r){const o=br(t,r.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return Pc(a).J({range:d,H:!0},(b,F,H)=>{const[re,fe,Me]=b;re===t&&fe===u&&(m=!0),H.done()}).next(()=>m)}function ro(a){return Er(a,"mutations")}function Pc(a){return Er(a,"documentMutations")}function ia(a){return Er(a,"mutationQueues")}class Gs{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Gs(0)}static kn(){return new Gs(-1)}}class qp{constructor(t,r){this.referenceDelegate=t,this.serializer=r}allocateTargetId(t){return this.qn(t).next(r=>{const o=new Gs(r.highestTargetId);return r.highestTargetId=o.next(),this.Qn(t,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(r=>Zt.fromTimestamp(new Jt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(t,r,o){return this.qn(t).next(u=>(u.highestListenSequenceNumber=r,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.Qn(t,u)))}addTargetData(t,r){return this.Kn(t,r).next(()=>this.qn(t).next(o=>(o.targetCount+=1,this.$n(r,o),this.Qn(t,o))))}updateTargetData(t,r){return this.Kn(t,r)}removeTargetData(t,r){return this.removeMatchingKeysForTargetId(t,r.targetId).next(()=>Mc(t).delete(r.targetId)).next(()=>this.qn(t)).next(o=>(mt(o.targetCount>0),o.targetCount-=1,this.Qn(t,o)))}removeTargets(t,r,o){let u=0;const d=[];return Mc(t).J((m,b)=>{const F=Ha(b);F.sequenceNumber<=r&&null===o.get(F.targetId)&&(u++,d.push(this.removeTargetData(t,F)))}).next(()=>Re.waitFor(d)).next(()=>u)}forEachTarget(t,r){return Mc(t).J((o,u)=>{const d=Ha(u);r(d)})}qn(t){return Pd(t).get("targetGlobalKey").next(r=>(mt(null!==r),r))}Qn(t,r){return Pd(t).put("targetGlobalKey",r)}Kn(t,r){return Mc(t).put(Jc(this.serializer,r))}$n(t,r){let o=!1;return t.targetId>r.highestTargetId&&(r.highestTargetId=t.targetId,o=!0),t.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t.sequenceNumber,o=!0),o}getTargetCount(t){return this.qn(t).next(r=>r.targetCount)}getTargetData(t,r){const o=jo(r),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Mc(t).J({range:u,index:"queryTargetsIndex"},(m,b,F)=>{const H=Ha(b);To(r,H.target)&&(d=H,F.done())}).next(()=>d)}addMatchingKeys(t,r,o){const u=[],d=ac(t);return r.forEach(m=>{const b=Qe(m.path);u.push(d.put({targetId:o,path:b})),u.push(this.referenceDelegate.addReference(t,o,m))}),Re.waitFor(u)}removeMatchingKeys(t,r,o){const u=ac(t);return Re.forEach(r,d=>{const m=Qe(d.path);return Re.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(t,o,d)])})}removeMatchingKeysForTargetId(t,r){const o=ac(t),u=IDBKeyRange.bound([r],[r+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(t,r){const o=IDBKeyRange.bound([r],[r+1],!1,!0),u=ac(t);let d=kn();return u.J({range:o,H:!0},(m,b,F)=>{const H=Rn(m[1]),re=new we(H);d=d.add(re)}).next(()=>d)}containsKey(t,r){const o=Qe(r.path),u=IDBKeyRange.bound([o],[Or(o)],!1,!0);let d=0;return ac(t).J({index:"documentTargetsIndex",H:!0,range:u},([m,b],F,H)=>{0!==m&&(d++,H.done())}).next(()=>d>0)}ot(t,r){return Mc(t).get(r).next(o=>o?Ha(o):null)}}function Mc(a){return Er(a,"targets")}function Pd(a){return Er(a,"targetGlobal")}function ac(a){return Er(a,"targetDocuments")}function Rc([a,t],[r,o]){const u=zt(a,r);return 0===u?zt(t,o):u}class Md{constructor(t){this.Un=t,this.buffer=new vr(Rc),this.Wn=0}Gn(){return++this.Wn}zn(t){const r=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const o=this.buffer.last();Rc(r,o)<0&&(this.buffer=this.buffer.delete(o).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Nl{constructor(t,r,o){this.garbageCollector=t,this.asyncQueue=r,this.localStore=o,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(t){var r=this;nt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,ee.A)(function*(){r.jn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(o){is(o)?nt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Mn(o)}yield r.Hn(3e5)}))}}class xl{constructor(t,r){this.Jn=t,this.params=r}calculateTargetCount(t,r){return this.Jn.Yn(t).next(o=>Math.floor(r/100*o))}nthSequenceNumber(t,r){if(0===r)return Re.resolve(ne.oe);const o=new Md(r);return this.Jn.forEachTarget(t,u=>o.zn(u.sequenceNumber)).next(()=>this.Jn.Zn(t,u=>o.zn(u))).next(()=>o.maxValue)}removeTargets(t,r,o){return this.Jn.removeTargets(t,r,o)}removeOrphanedDocuments(t,r){return this.Jn.removeOrphanedDocuments(t,r)}collect(t,r){return-1===this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(Lu)):this.getCacheSize(t).next(o=>o<this.params.cacheSizeCollectionThreshold?(nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lu):this.Xn(t,r))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,r){let o,u,d,m,b,F,H;const re=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(fe=>(fe>this.params.maximumSequenceNumbersToCollect?(nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${fe}`),u=this.params.maximumSequenceNumbersToCollect):u=fe,m=Date.now(),this.nthSequenceNumber(t,u))).next(fe=>(o=fe,b=Date.now(),this.removeTargets(t,o,r))).next(fe=>(d=fe,F=Date.now(),this.removeOrphanedDocuments(t,o))).next(fe=>(H=Date.now(),An()<=Ct.$b.DEBUG&&nt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-re}ms\n\tDetermined least recently used ${u} in `+(b-m)+`ms\n\tRemoved ${d} targets in `+(F-b)+`ms\n\tRemoved ${fe} documents in `+(H-F)+`ms\nTotal Duration: ${H-re}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:fe})))}}class af{constructor(t,r){this.db=t,this.garbageCollector=function sf(a,t){return new xl(a,t)}(this,r)}Yn(t){const r=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(o=>r.next(u=>o+u))}er(t){let r=0;return this.Zn(t,o=>{r++}).next(()=>r)}forEachTarget(t,r){return this.db.getTargetCache().forEachTarget(t,r)}Zn(t,r){return this.tr(t,(o,u)=>r(u))}addReference(t,r,o){return tu(t,o)}removeReference(t,r,o){return tu(t,o)}removeTargets(t,r,o){return this.db.getTargetCache().removeTargets(t,r,o)}markPotentiallyOrphaned(t,r){return tu(t,r)}nr(t,r){return function(u,d){let m=!1;return ia(u).Y(b=>Ns(u,b,d).next(F=>(F&&(m=!0),Re.resolve(!F)))).next(()=>m)}(t,r)}removeOrphanedDocuments(t,r){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.tr(t,(m,b)=>{if(b<=r){const F=this.nr(t,m).next(H=>{if(!H)return d++,o.getEntry(t,m).next(()=>(o.removeEntry(m,Zt.min()),ac(t).delete([0,Qe(m.path)])))});u.push(F)}}).next(()=>Re.waitFor(u)).next(()=>o.apply(t)).next(()=>d)}removeTarget(t,r){const o=r.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,o)}updateLimboDocument(t,r){return tu(t,r)}tr(t,r){const o=ac(t);let u,d=ne.oe;return o.J({index:"documentTargetsIndex"},([m,b],{path:F,sequenceNumber:H})=>{0===m?(d!==ne.oe&&r(new we(Rn(u)),d),d=H,u=F):d=ne.oe}).next(()=>{d!==ne.oe&&r(new we(Rn(u)),d)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function tu(a,t){return ac(a).put((u=a.currentSequenceNumber,{targetId:0,path:Qe(t.path),sequenceNumber:u}));var u}class Rd{constructor(){this.changes=new ht(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,sr.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const o=this.changes.get(r);return void 0!==o?Re.resolve(o):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class cf{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,r,o){return Oc(t).put(o)}removeEntry(t,r,o){return Oc(t).delete(function(d,m){const b=d.path.toArray();return[b.slice(0,b.length-2),b[b.length-2],ku(m),b[b.length-1]]}(r,o))}updateMetadata(t,r){return this.getMetadata(t).next(o=>(o.byteSize+=r,this.rr(t,o)))}getEntry(t,r){let o=sr.newInvalidDocument(r);return Oc(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cs(r))},(u,d)=>{o=this.ir(r,d)}).next(()=>o)}sr(t,r){let o={size:0,document:sr.newInvalidDocument(r)};return Oc(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cs(r))},(u,d)=>{o={document:this.ir(r,d),size:Sd(d)}}).next(()=>o)}getEntries(t,r){let o=on();return this._r(t,r,(u,d)=>{const m=this.ir(u,d);o=o.insert(u,m)}).next(()=>o)}ar(t,r){let o=on(),u=new Sr(we.comparator);return this._r(t,r,(d,m)=>{const b=this.ir(d,m);o=o.insert(d,b),u=u.insert(d,Sd(m))}).next(()=>({documents:o,ur:u}))}_r(t,r,o){if(r.isEmpty())return Re.resolve();let u=new vr(Si);r.forEach(F=>u=u.add(F));const d=IDBKeyRange.bound(Cs(u.first()),Cs(u.last())),m=u.getIterator();let b=m.getNext();return Oc(t).J({index:"documentKeyIndex",range:d},(F,H,re)=>{const fe=we.fromSegments([...H.prefixPath,H.collectionGroup,H.documentId]);for(;b&&Si(b,fe)<0;)o(b,null),b=m.getNext();b&&b.isEqual(fe)&&(o(b,H),b=m.hasNext()?m.getNext():null),b?re.$(Cs(b)):re.done()}).next(()=>{for(;b;)o(b,null),b=m.hasNext()?m.getNext():null})}getDocumentsMatchingQuery(t,r,o,u,d){const m=r.path,b=[m.popLast().toArray(),m.lastSegment(),ku(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],F=[m.popLast().toArray(),m.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oc(t).U(IDBKeyRange.bound(b,F,!0)).next(H=>{d?.incrementDocumentReadCount(H.length);let re=on();for(const fe of H){const Me=this.ir(we.fromSegments(fe.prefixPath.concat(fe.collectionGroup,fe.documentId)),fe);Me.isFoundDocument()&&(Q(r,Me)||u.has(Me.key))&&(re=re.insert(Me.key,Me))}return re})}getAllFromCollectionGroup(t,r,o,u){let d=on();const m=cc(r,o),b=cc(r,Vt.max());return Oc(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,b,!0)},(F,H,re)=>{const fe=this.ir(we.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);d=d.insert(fe.key,fe),d.size===u&&re.done()}).next(()=>d)}newChangeBuffer(t){return new uf(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(r=>r.byteSize)}getMetadata(t){return kl(t).get("remoteDocumentGlobalKey").next(r=>(mt(!!r),r))}rr(t,r){return kl(t).put("remoteDocumentGlobalKey",r)}ir(t,r){if(r){const o=function Go(a,t){let r;if(t.document)r=Zh(a.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const o=we.fromSegments(t.noDocument.path),u=Yc(t.noDocument.readTime);r=sr.newNoDocument(o,u),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return St();{const o=we.fromSegments(t.unknownDocument.path),u=Yc(t.unknownDocument.version);r=sr.newUnknownDocument(o,u)}}return t.readTime&&r.setReadTime(function(u){const d=new Jt(u[0],u[1]);return Zt.fromTimestamp(d)}(t.readTime)),r}(this.serializer,r);if(!o.isNoDocument()||!o.version.isEqual(Zt.min()))return o}return sr.newInvalidDocument(t)}}function Uu(a){return new cf(a)}class uf extends Rd{constructor(t,r){super(),this.cr=t,this.trackRemovals=r,this.lr=new ht(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(t){const r=[];let o=0,u=new vr((d,m)=>zt(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const b=this.lr.get(d);if(r.push(this.cr.removeEntry(t,d,b.readTime)),m.isValidDocument()){const F=xu(this.cr.serializer,m);u=u.add(d.path.popLast());const H=Sd(F);o+=H-b.size,r.push(this.cr.addEntry(t,d,F))}else if(o-=b.size,this.trackRemovals){const F=xu(this.cr.serializer,m.convertToNoDocument(Zt.min()));r.push(this.cr.addEntry(t,d,F))}}),u.forEach(d=>{r.push(this.cr.indexManager.addToCollectionParentIndex(t,d))}),r.push(this.cr.updateMetadata(t,o)),Re.waitFor(r)}getFromCache(t,r){return this.cr.sr(t,r).next(o=>(this.lr.set(r,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(t,r){return this.cr.ar(t,r).next(({documents:o,ur:u})=>(u.forEach((d,m)=>{this.lr.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function kl(a){return Er(a,"remoteDocumentGlobal")}function Oc(a){return Er(a,"remoteDocumentsV14")}function Cs(a){const t=a.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cc(a,t){const r=t.documentKey.path.toArray();return[a,ku(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Si(a,t){const r=a.path.toArray(),o=t.path.toArray();let u=0;for(let d=0;d<r.length-2&&d<o.length-2;++d)if(u=zt(r[d],o[d]),u)return u;return u=zt(r.length,o.length),u||(u=zt(r[r.length-2],o[o.length-2]),u||zt(r[r.length-1],o[o.length-1]))}class Qp{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}class lf{constructor(t,r,o,u){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=o,this.indexManager=u}getDocument(t,r){let o=null;return this.documentOverlayCache.getOverlay(t,r).next(u=>(o=u,this.remoteDocumentCache.getEntry(t,r))).next(u=>(null!==o&&Tr(o.mutation,u,Jr.empty(),Jt.now()),u))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.getLocalViewOfDocuments(t,o,kn()).next(()=>o))}getLocalViewOfDocuments(t,r,o=kn()){const u=Sn();return this.populateOverlays(t,u,r).next(()=>this.computeViews(t,r,u,o).next(d=>{let m=ur();return d.forEach((b,F)=>{m=m.insert(b,F.overlayedDocument)}),m}))}getOverlayedDocuments(t,r){const o=Sn();return this.populateOverlays(t,o,r).next(()=>this.computeViews(t,r,o,kn()))}populateOverlays(t,r,o){const u=[];return o.forEach(d=>{r.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(t,u).next(d=>{d.forEach((m,b)=>{r.set(m,b)})})}computeViews(t,r,o,u){let d=on();const m=Vr(),b=Vr();return r.forEach((F,H)=>{const re=o.get(H.key);u.has(H.key)&&(void 0===re||re.mutation instanceof pr)?d=d.insert(H.key,H):void 0!==re?(m.set(H.key,re.mutation.getFieldMask()),Tr(re.mutation,H,re.mutation.getFieldMask(),Jt.now())):m.set(H.key,Jr.empty())}),this.recalculateAndSaveOverlays(t,d).next(F=>(F.forEach((H,re)=>m.set(H,re)),r.forEach((H,re)=>{var fe;return b.set(H,new Qp(re,null!==(fe=m.get(H))&&void 0!==fe?fe:null))}),b))}recalculateAndSaveOverlays(t,r){const o=Vr();let u=new Sr((m,b)=>m-b),d=kn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(m=>{for(const b of m)b.keys().forEach(F=>{const H=r.get(F);if(null===H)return;let re=o.get(F)||Jr.empty();re=b.applyToLocalView(H,re),o.set(F,re);const fe=(u.get(b.batchId)||kn()).add(F);u=u.insert(b.batchId,fe)})}).next(()=>{const m=[],b=u.getReverseIterator();for(;b.hasNext();){const F=b.getNext(),H=F.key,re=F.value,fe=Wn();re.forEach(Me=>{if(!d.has(Me)){const at=fr(r.get(Me),o.get(Me));null!==at&&fe.set(Me,at),d=d.add(Me)}}),m.push(this.documentOverlayCache.saveOverlays(t,H,fe))}return Re.waitFor(m)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,r,o,u){return we.isDocumentKey((m=r).path)&&null===m.collectionGroup&&0===m.filters.length?this.getDocumentsMatchingDocumentQuery(t,r.path):ga(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,o,u):this.getDocumentsMatchingCollectionQuery(t,r,o,u);var m}getNextDocuments(t,r,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,o,u).next(d=>{const m=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,o.largestBatchId,u-d.size):Re.resolve(Sn());let b=-1,F=d;return m.next(H=>Re.forEach(H,(re,fe)=>(b<fe.largestBatchId&&(b=fe.largestBatchId),d.get(re)?Re.resolve():this.remoteDocumentCache.getEntry(t,re).next(Me=>{F=F.insert(re,Me)}))).next(()=>this.populateOverlays(t,H,d)).next(()=>this.computeViews(t,F,H,kn())).next(re=>({batchId:b,changes:er(re)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new we(r)).next(o=>{let u=ur();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(t,r,o,u){const d=r.collectionGroup;let m=ur();return this.indexManager.getCollectionParents(t,d).next(b=>Re.forEach(b,F=>{const H=(fe=r,Me=F.child(d),new Wr(Me,null,fe.explicitOrderBy.slice(),fe.filters.slice(),fe.limit,fe.limitType,fe.startAt,fe.endAt));var fe,Me;return this.getDocumentsMatchingCollectionQuery(t,H,o,u).next(re=>{re.forEach((fe,Me)=>{m=m.insert(fe,Me)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(t,r,o,u){let d;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,o.largestBatchId).next(m=>(d=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,o,d,u))).next(m=>{d.forEach((F,H)=>{const re=H.getKey();null===m.get(re)&&(m=m.insert(re,sr.newInvalidDocument(re)))});let b=ur();return m.forEach((F,H)=>{const re=d.get(F);void 0!==re&&Tr(re.mutation,H,Jr.empty(),Jt.now()),Q(r,H)&&(b=b.insert(F,H))}),b})}}class Xp{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,r){return Re.resolve(this.hr.get(r))}saveBundleMetadata(t,r){return this.hr.set(r.id,{id:(u=r).id,version:u.version,createTime:ki(u.createTime)}),Re.resolve();var u}getNamedQuery(t,r){return Re.resolve(this.Pr.get(r))}saveNamedQuery(t,r){return this.Pr.set(r.name,{name:(u=r).name,query:Hs(u.bundledQuery),readTime:ki(u.readTime)}),Re.resolve();var u}}class Yp{constructor(){this.overlays=new Sr(we.comparator),this.Ir=new Map}getOverlay(t,r){return Re.resolve(this.overlays.get(r))}getOverlays(t,r){const o=Sn();return Re.forEach(r,u=>this.getOverlay(t,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(t,r,o){return o.forEach((u,d)=>{this.ht(t,r,d)}),Re.resolve()}removeOverlaysForBatchId(t,r,o){const u=this.Ir.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.Ir.delete(o)),Re.resolve()}getOverlaysForCollection(t,r,o){const u=Sn(),d=r.length+1,m=new we(r.child("")),b=this.overlays.getIteratorFrom(m);for(;b.hasNext();){const F=b.getNext().value,H=F.getKey();if(!r.isPrefixOf(H.path))break;H.path.length===d&&F.largestBatchId>o&&u.set(F.getKey(),F)}return Re.resolve(u)}getOverlaysForCollectionGroup(t,r,o,u){let d=new Sr((H,re)=>H-re);const m=this.overlays.getIterator();for(;m.hasNext();){const H=m.getNext().value;if(H.getKey().getCollectionGroup()===r&&H.largestBatchId>o){let re=d.get(H.largestBatchId);null===re&&(re=Sn(),d=d.insert(H.largestBatchId,re)),re.set(H.getKey(),H)}}const b=Sn(),F=d.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach((H,re)=>b.set(H,re)),!(b.size()>=u)););return Re.resolve(b)}ht(t,r,o){const u=this.overlays.get(o.key);if(null!==u){const m=this.Ir.get(u.largestBatchId).delete(o.key);this.Ir.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new Yn(r,o));let d=this.Ir.get(r);void 0===d&&(d=kn(),this.Ir.set(r,d)),this.Ir.set(r,d.add(o.key))}}class df{constructor(){this.sessionToken=zr.EMPTY_BYTE_STRING}getSessionToken(t){return Re.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Re.resolve()}}class nu{constructor(){this.Tr=new vr(Qi.Er),this.dr=new vr(Qi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,r){const o=new Qi(t,r);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(t,r){t.forEach(o=>this.addReference(o,r))}removeReference(t,r){this.Vr(new Qi(t,r))}mr(t,r){t.forEach(o=>this.removeReference(o,r))}gr(t){const r=new we(new On([])),o=new Qi(r,t),u=new Qi(r,t+1),d=[];return this.dr.forEachInRange([o,u],m=>{this.Vr(m),d.push(m.key)}),d}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const r=new we(new On([])),o=new Qi(r,t),u=new Qi(r,t+1);let d=kn();return this.dr.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(t){const r=new Qi(t,0),o=this.Tr.firstAfterOrEqual(r);return null!==o&&t.isEqual(o.key)}}class Qi{constructor(t,r){this.key=t,this.wr=r}static Er(t,r){return we.comparator(t.key,r.key)||zt(t.wr,r.wr)}static Ar(t,r){return zt(t.wr,r.wr)||we.comparator(t.key,r.key)}}class Pa{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new vr(Qi.Er)}checkEmpty(t){return Re.resolve(0===this.mutationQueue.length)}addMutationBatch(t,r,o,u){const d=this.Sr;this.Sr++;const m=new Kr(d,r,o,u);this.mutationQueue.push(m);for(const b of u)this.br=this.br.add(new Qi(b.key,d)),this.indexManager.addToCollectionParentIndex(t,b.key.path.popLast());return Re.resolve(m)}lookupMutationBatch(t,r){return Re.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(t,r){const u=this.vr(r+1),d=u<0?0:u;return Re.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return Re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const o=new Qi(r,0),u=new Qi(r,Number.POSITIVE_INFINITY),d=[];return this.br.forEachInRange([o,u],m=>{const b=this.Dr(m.wr);d.push(b)}),Re.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(t,r){let o=new vr(zt);return r.forEach(u=>{const d=new Qi(u,0),m=new Qi(u,Number.POSITIVE_INFINITY);this.br.forEachInRange([d,m],b=>{o=o.add(b.wr)})}),Re.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,r){const o=r.path,u=o.length+1;let d=o;we.isDocumentKey(d)||(d=d.child(""));const m=new Qi(new we(d),0);let b=new vr(zt);return this.br.forEachWhile(F=>{const H=F.key.path;return!!o.isPrefixOf(H)&&(H.length===u&&(b=b.add(F.wr)),!0)},m),Re.resolve(this.Cr(b))}Cr(t){const r=[];return t.forEach(o=>{const u=this.Dr(o);null!==u&&r.push(u)}),r}removeMutationBatch(t,r){mt(0===this.Fr(r.batchId,"removed")),this.mutationQueue.shift();let o=this.br;return Re.forEach(r.mutations,u=>{const d=new Qi(u.key,r.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(()=>{this.br=o})}On(t){}containsKey(t,r){const o=new Qi(r,0),u=this.br.firstAfterOrEqual(o);return Re.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(t){return Re.resolve()}Fr(t,r){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){const r=this.vr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Od{constructor(t){this.Mr=t,this.docs=new Sr(we.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const o=r.key,u=this.docs.get(o),d=u?u.size:0,m=this.Mr(r);return this.docs=this.docs.insert(o,{document:r.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const o=this.docs.get(r);return Re.resolve(o?o.document.mutableCopy():sr.newInvalidDocument(r))}getEntries(t,r){let o=on();return r.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():sr.newInvalidDocument(u))}),Re.resolve(o)}getDocumentsMatchingQuery(t,r,o,u){let d=on();const m=r.path,b=new we(m.child("")),F=this.docs.getIteratorFrom(b);for(;F.hasNext();){const{key:H,value:{document:re}}=F.getNext();if(!m.isPrefixOf(H.path))break;H.path.length>m.length+1||En(wt(re),o)<=0||(u.has(re.key)||Q(r,re))&&(d=d.insert(re.key,re.mutableCopy()))}return Re.resolve(d)}getAllFromCollectionGroup(t,r,o,u){St()}Or(t,r){return Re.forEach(this.docs,o=>r(o))}newChangeBuffer(t){return new Fl(this)}getSize(t){return Re.resolve(this.size)}}class Fl extends Rd{constructor(t){super(),this.cr=t}applyChanges(t){const r=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?r.push(this.cr.addEntry(t,u)):this.cr.removeEntry(o)}),Re.waitFor(r)}getFromCache(t,r){return this.cr.getEntry(t,r)}getAllFromCache(t,r){return this.cr.getEntries(t,r)}}class Bu{constructor(t){this.persistence=t,this.Nr=new ht(r=>jo(r),To),this.lastRemoteSnapshotVersion=Zt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new nu,this.targetCount=0,this.kr=Gs.Bn()}forEachTarget(t,r){return this.Nr.forEach((o,u)=>r(u)),Re.resolve()}getLastRemoteSnapshotVersion(t){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Re.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(t,r,o){return o&&(this.lastRemoteSnapshotVersion=o),r>this.Lr&&(this.Lr=r),Re.resolve()}Kn(t){this.Nr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.kr=new Gs(r),this.highestTargetId=r),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,r){return this.Kn(r),this.targetCount+=1,Re.resolve()}updateTargetData(t,r){return this.Kn(r),Re.resolve()}removeTargetData(t,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Re.resolve()}removeTargets(t,r,o){let u=0;const d=[];return this.Nr.forEach((m,b)=>{b.sequenceNumber<=r&&null===o.get(b.targetId)&&(this.Nr.delete(m),d.push(this.removeMatchingKeysForTargetId(t,b.targetId)),u++)}),Re.waitFor(d).next(()=>u)}getTargetCount(t){return Re.resolve(this.targetCount)}getTargetData(t,r){const o=this.Nr.get(r)||null;return Re.resolve(o)}addMatchingKeys(t,r,o){return this.Br.Rr(r,o),Re.resolve()}removeMatchingKeys(t,r,o){this.Br.mr(r,o);const u=this.persistence.referenceDelegate,d=[];return u&&r.forEach(m=>{d.push(u.markPotentiallyOrphaned(t,m))}),Re.waitFor(d)}removeMatchingKeysForTargetId(t,r){return this.Br.gr(r),Re.resolve()}getMatchingKeysForTargetId(t,r){const o=this.Br.yr(r);return Re.resolve(o)}containsKey(t,r){return Re.resolve(this.Br.containsKey(r))}}class Nc{constructor(t,r){this.qr={},this.overlays={},this.Qr=new ne(0),this.Kr=!1,this.Kr=!0,this.$r=new df,this.referenceDelegate=t(this),this.Ur=new Bu(this),this.indexManager=new Kp,this.remoteDocumentCache=new Od(o=>this.referenceDelegate.Wr(o)),this.serializer=new $s(r),this.Gr=new Xp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Yp,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let o=this.qr[t.toKey()];return o||(o=new Pa(r,this.referenceDelegate),this.qr[t.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,r,o){nt("MemoryPersistence","Starting transaction:",t);const u=new ju(this.Qr.next());return this.referenceDelegate.zr(),o(u).next(d=>this.referenceDelegate.jr(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Hr(t,r){return Re.or(Object.values(this.qr).map(o=>()=>o.containsKey(t,r)))}}class ju extends zn{constructor(t){super(),this.currentSequenceNumber=t}}class $u{constructor(t){this.persistence=t,this.Jr=new nu,this.Yr=null}static Zr(t){return new $u(t)}get Xr(){if(this.Yr)return this.Yr;throw St()}addReference(t,r,o){return this.Jr.addReference(o,r),this.Xr.delete(o.toString()),Re.resolve()}removeReference(t,r,o){return this.Jr.removeReference(o,r),this.Xr.add(o.toString()),Re.resolve()}markPotentiallyOrphaned(t,r){return this.Xr.add(r.toString()),Re.resolve()}removeTarget(t,r){this.Jr.gr(r.targetId).forEach(u=>this.Xr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,r.targetId).next(u=>{u.forEach(d=>this.Xr.add(d.toString()))}).next(()=>o.removeTargetData(t,r))}zr(){this.Yr=new Set}jr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.Xr,o=>{const u=we.fromPath(o);return this.ei(t,u).next(d=>{d||r.removeEntry(u,Zt.min())})}).next(()=>(this.Yr=null,r.apply(t)))}updateLimboDocument(t,r){return this.ei(t,r).next(o=>{o?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(t){return 0}ei(t,r){return Re.or([()=>Re.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Hr(t,r)])}}class Nd{constructor(t){this.serializer=t}O(t,r,o,u){const d=new Gr("createOrUpgrade",r);var F;o<1&&u>=1&&(t.createObjectStore("owner"),(F=t).createObjectStore("mutationQueues",{keyPath:"userId"}),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Tn,{unique:!0}),F.createObjectStore("documentMutations"),uc(t),function(F){F.createObjectStore("remoteDocuments")}(t));let m=Re.resolve();return o<3&&u>=3&&(0!==o&&(function(F){F.deleteObjectStore("targetDocuments"),F.deleteObjectStore("targets"),F.deleteObjectStore("targetGlobal")}(t),uc(t)),m=m.next(()=>function(F){const H=F.store("targetGlobal"),re={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zt.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",re)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(F,H){return H.store("mutations").U().next(re=>{F.deleteObjectStore("mutations"),F.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Tn,{unique:!0});const fe=H.store("mutations"),Me=re.map(at=>fe.put(at));return Re.waitFor(Me)})}(t,d))),m=m.next(()=>{!function(F){F.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),o<5&&u>=5&&(m=m.next(()=>this.ni(d))),o<6&&u>=6&&(m=m.next(()=>(function(F){F.createObjectStore("remoteDocumentGlobal")}(t),this.ri(d)))),o<7&&u>=7&&(m=m.next(()=>this.ii(d))),o<8&&u>=8&&(m=m.next(()=>this.si(t,d))),o<9&&u>=9&&(m=m.next(()=>{!function(F){F.objectStoreNames.contains("remoteDocumentChanges")&&F.deleteObjectStore("remoteDocumentChanges")}(t)})),o<10&&u>=10&&(m=m.next(()=>this.oi(d))),o<11&&u>=11&&(m=m.next(()=>{(function(F){F.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(F){F.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),o<12&&u>=12&&(m=m.next(()=>{!function(F){const H=F.createObjectStore("documentOverlays",{keyPath:Nn});H.createIndex("collectionPathOverlayIndex",ar,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",Fo,{unique:!1})}(t)})),o<13&&u>=13&&(m=m.next(()=>function(F){const H=F.createObjectStore("remoteDocumentsV14",{keyPath:ui});H.createIndex("documentKeyIndex",Xr),H.createIndex("collectionGroupIndex",Mi)}(t)).next(()=>this._i(t,d)).next(()=>t.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>this.ai(t,d))),o<15&&u>=15&&(m=m.next(()=>function(F){F.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),F.createObjectStore("indexState",{keyPath:Fr}).createIndex("sequenceNumberIndex",di,{unique:!1}),F.createObjectStore("indexEntries",{keyPath:Ei}).createIndex("documentKeyIndex",Ii,{unique:!1})}(t))),o<16&&u>=16&&(m=m.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),o<17&&u>=17&&(m=m.next(()=>{!function(F){F.createObjectStore("globals",{keyPath:"name"})}(t)})),m}ri(t){let r=0;return t.store("remoteDocuments").J((o,u)=>{r+=Sd(u)}).next(()=>{const o={byteSize:r};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}ni(t){const r=t.store("mutationQueues"),o=t.store("mutations");return r.U().next(u=>Re.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.U("userMutationsIndex",m).next(b=>Re.forEach(b,F=>{mt(F.userId===d.userId);const H=Pr(this.serializer,F);return bd(t,d.userId,H).next(()=>{})}))}))}ii(t){const r=t.store("targetDocuments"),o=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.J((m,b)=>{const F=new On(m),H=[0,Qe(F)];d.push(r.get(H).next(re=>re?Re.resolve():r.put({targetId:0,path:Qe(F),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Re.waitFor(d))})}si(t,r){t.createObjectStore("collectionParents",{keyPath:tr});const o=r.store("collectionParents"),u=new Ft,d=m=>{if(u.add(m)){const b=m.lastSegment(),F=m.popLast();return o.put({collectionId:b,parent:Qe(F)})}};return r.store("remoteDocuments").J({H:!0},(m,b)=>{const F=new On(m);return d(F.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([m,b,F],H)=>{const re=Rn(b);return d(re.popLast())}))}oi(t){const r=t.store("targets");return r.J((o,u)=>{const d=Ha(u),m=Jc(this.serializer,d);return r.put(m)})}_i(t,r){const o=r.store("remoteDocuments"),u=[];return o.J((d,m)=>{const b=r.store("remoteDocumentsV14"),F=(fe=m,fe.document?new we(On.fromString(fe.document.name).popFirst(5)):fe.noDocument?we.fromSegments(fe.noDocument.path):fe.unknownDocument?we.fromSegments(fe.unknownDocument.path):St()).path.toArray(),H={prefixPath:F.slice(0,F.length-2),collectionGroup:F[F.length-2],documentId:F[F.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};var fe;u.push(b.put(H))}).next(()=>Re.waitFor(u))}ai(t,r){const o=r.store("mutations"),u=Uu(this.serializer),d=new Nc($u.Zr,this.serializer.ct);return o.U().next(m=>{const b=new Map;return m.forEach(F=>{var H;let re=null!==(H=b.get(F.userId))&&void 0!==H?H:kn();Pr(this.serializer,F).keys().forEach(fe=>re=re.add(fe)),b.set(F.userId,re)}),Re.forEach(b,(F,H)=>{const re=new nn(H),fe=Dl.lt(this.serializer,re),Me=d.getIndexManager(re),at=eu.lt(re,this.serializer,Me,d.referenceDelegate);return new lf(u,at,fe,Me).recalculateAndSaveOverlaysForDocumentKeys(new xs(r,ne.oe),F).next()})})}}function uc(a){a.createObjectStore("targetDocuments",{keyPath:Ir}).createIndex("documentTargetsIndex",li,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",yr,{unique:!0}),a.createObjectStore("targetGlobal")}const Ma="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ll{constructor(t,r,o,u,d,m,b,F,H,re,fe=17){if(this.allowTabSynchronization=t,this.persistenceKey=r,this.clientId=o,this.ui=d,this.window=m,this.document=b,this.ci=H,this.li=re,this.hi=fe,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=Me=>Promise.resolve(),!Ll.D())throw new Rt(Ze.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new af(this,u),this.Ai=r+"main",this.serializer=new $s(F),this.Ri=new Yr(this.Ai,this.hi,new Nd(this.serializer)),this.$r=new tf,this.Ur=new qp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Uu(this.serializer),this.Gr=new zo,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===re&&Cn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Rt(Ze.FAILED_PRECONDITION,Ma);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new ne(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){var r=this;return this.di=function(){var o=(0,ee.A)(function*(u){if(r.started)return t(u)});return function(u){return o.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(function(){var r=(0,ee.A)(function*(o){null===o.newVersion&&(yield t())});return function(o){return r.apply(this,arguments)}}())}setNetworkEnabled(t){var r=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget((0,ee.A)(function*(){r.started&&(yield r.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Ul(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(r=>this.isPrimary&&!r?this.bi(t).next(()=>!1):!!r&&this.Di(t).next(()=>!0))).catch(t=>{if(is(t))return nt("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return nt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return lc(t).get("owner").next(r=>Re.resolve(this.vi(r)))}Ci(t){return Ul(t).delete(this.clientId)}Fi(){var t=this;return(0,ee.A)(function*(){if(t.isPrimary&&!t.Mi(t.Ei,18e5)){t.Ei=Date.now();const r=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Er(o,"clientMetadata");return u.U().next(d=>{const m=t.xi(d,18e5),b=d.filter(F=>-1===m.indexOf(F));return Re.forEach(b,F=>u.delete(F.clientId)).next(()=>b)})}).catch(()=>[]);if(t.Vi)for(const o of r)t.Vi.removeItem(t.Oi(o.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?Re.resolve(!0):lc(t).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Rt(Ze.FAILED_PRECONDITION,Ma);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ul(t).U().next(o=>void 0===this.xi(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(r=>(this.isPrimary!==r&&nt("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var t=this;return(0,ee.A)(function*(){t.Kr=!1,t.Li(),t.Ti&&(t.Ti.cancel(),t.Ti=null),t.Bi(),t.ki(),yield t.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const o=new xs(r,ne.oe);return t.bi(o).next(()=>t.Ci(o))}),t.Ri.close(),t.qi()})()}xi(t,r){return t.filter(o=>this.Mi(o.updateTimeMs,r)&&!this.Ni(o.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>Ul(t).U().next(r=>this.xi(r,18e5).map(o=>o.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,r){return eu.lt(t,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Ol(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return Dl.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,r,o){nt("IndexedDbPersistence","Starting transaction:",t);const u="readonly"===r?"readonly":"readwrite",d=17===(F=this.hi)?Eo:16===F?nr:15===F?vo:14===F?ua:13===F?Qo:12===F?oo:11===F?zi:void St();var F;let m;return this.Ri.runTransaction(t,u,d,b=>(m=new xs(b,this.Qr?this.Qr.next():ne.oe),"readwrite-primary"===r?this.wi(m).next(F=>!!F||this.Si(m)).next(F=>{if(!F)throw Cn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Rt(Ze.FAILED_PRECONDITION,Bn);return o(m)}).next(F=>this.Di(m).next(()=>F)):this.Ki(m).next(()=>o(m)))).then(b=>(m.raiseOnCommittedEvent(),b))}Ki(t){return lc(t).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Rt(Ze.FAILED_PRECONDITION,Ma)})}Di(t){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lc(t).put("owner",r)}static D(){return Yr.D()}bi(t){const r=lc(t);return r.get("owner").next(o=>this.vi(o)?(nt("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Re.resolve())}Mi(t,r){const o=Date.now();return!(t<o-r||t>o&&(Cn(`Detected an update time that is in the future: ${t} > ${o}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;(0,ue.nr)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var r;try{const o=null!==(null===(r=this.Vi)||void 0===r?void 0:r.getItem(this.Oi(t)));return nt("IndexedDbPersistence",`Client '${t}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Cn("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){Cn("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function lc(a){return Er(a,"owner")}function Ul(a){return Er(a,"clientMetadata")}function xd(a,t){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+t+"/"+r+"/"}class kd{constructor(t,r,o,u){this.targetId=t,this.fromCache=r,this.$i=o,this.Ui=u}static Wi(t,r){let o=kn(),u=kn();for(const d of r.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new kd(t,r.fromCache,o,u)}}class I_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Jp{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,ue.nr)()?8:Ms((0,ue.ZQ)())>0?6:4}initialize(t,r){this.Ji=t,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(t,r,o,u){const d={result:null};return this.Yi(t,r).next(m=>{d.result=m}).next(()=>{if(!d.result)return this.Zi(t,r,u,o).next(m=>{d.result=m})}).next(()=>{if(d.result)return;const m=new I_;return this.Xi(t,r,m).next(b=>{if(d.result=b,this.zi)return this.es(t,r,m,b.size)})}).next(()=>d.result)}es(t,r,o,u){return o.documentReadCount<this.ji?(An()<=Ct.$b.DEBUG&&nt("QueryEngine","SDK will not create cache indexes for query:",L(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Re.resolve()):(An()<=Ct.$b.DEBUG&&nt("QueryEngine","Query:",L(r),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Hi*u?(An()<=Ct.$b.DEBUG&&nt("QueryEngine","The SDK decides to create cache indexes for query:",L(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,qi(r))):Re.resolve())}Yi(t,r){if(xi(r))return Re.resolve(null);let o=qi(r);return this.indexManager.getIndexType(t,o).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=Y(r,null,"F"),o=qi(r)),this.indexManager.getDocumentsMatchingTarget(t,o).next(d=>{const m=kn(...d);return this.Ji.getDocuments(t,m).next(b=>this.indexManager.getMinOffset(t,o).next(F=>{const H=this.ts(r,b);return this.ns(r,H,m,F.readTime)?this.Yi(t,Y(r,null,"F")):this.rs(t,H,r,F)}))})))}Zi(t,r,o,u){return xi(r)||u.isEqual(Zt.min())?Re.resolve(null):this.Ji.getDocuments(t,o).next(d=>{const m=this.ts(r,d);return this.ns(r,m,o,u)?Re.resolve(null):(An()<=Ct.$b.DEBUG&&nt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),L(r)),this.rs(t,m,r,me(u,-1)).next(b=>b))})}ts(t,r){let o=new vr(Pe(t));return r.forEach((u,d)=>{Q(t,d)&&(o=o.add(d))}),o}ns(t,r,o,u){if(null===t.limit)return!1;if(o.size!==r.size)return!0;const d="F"===t.limitType?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Xi(t,r,o){return An()<=Ct.$b.DEBUG&&nt("QueryEngine","Using full collection scan to execute query:",L(r)),this.Ji.getDocumentsMatchingQuery(t,r,Vt.min(),o)}rs(t,r,o,u){return this.Ji.getDocumentsMatchingQuery(t,o,u).next(d=>(r.forEach(m=>{d=d.insert(m.key,m)}),d))}}class Bl{constructor(t,r,o,u){this.persistence=t,this.ss=r,this.serializer=u,this.os=new Sr(zt),this._s=new ht(d=>jo(d),To),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(o)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.os))}}function ru(a,t,r,o){return new Bl(a,t,r,o)}function Zp(a,t){return xc.apply(this,arguments)}function xc(){return(xc=(0,ee.A)(function*(a,t){const r=Nt(a);return yield r.persistence.runTransaction("Handle user change","readonly",o=>{let u;return r.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,r.ls(t),r.mutationQueue.getAllMutationBatches(o))).next(d=>{const m=[],b=[];let F=kn();for(const H of u){m.push(H.batchId);for(const re of H.mutations)F=F.add(re.key)}for(const H of d){b.push(H.batchId);for(const re of H.mutations)F=F.add(re.key)}return r.localDocuments.getDocuments(o,F).next(H=>({hs:H,removedBatchIds:m,addedBatchIds:b}))})})})).apply(this,arguments)}function h(a){const t=Nt(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Ur.getLastRemoteSnapshotVersion(r))}function A(a,t,r){let o=kn(),u=kn();return r.forEach(d=>o=o.add(d)),t.getEntries(a,o).next(d=>{let m=on();return r.forEach((b,F)=>{const H=d.get(b);F.isFoundDocument()!==H.isFoundDocument()&&(u=u.add(b)),F.isNoDocument()&&F.version.isEqual(Zt.min())?(t.removeEntry(b,F.readTime),m=m.insert(b,F)):!H.isValidDocument()||F.version.compareTo(H.version)>0||0===F.version.compareTo(H.version)&&H.hasPendingWrites?(t.addEntry(F),m=m.insert(b,F)):nt("LocalStore","Ignoring outdated watch update for ",b,". Current version:",H.version," Watch version:",F.version)}),{Ps:m,Is:u}})}function W(a,t){const r=Nt(a);return r.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===t&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}function ae(a,t){const r=Nt(a);return r.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return r.Ur.getTargetData(o,t).next(d=>d?(u=d,Re.resolve(u)):r.Ur.allocateTargetId(o).next(m=>(u=new fo(t,m,"TargetPurposeListen",o.currentSequenceNumber),r.Ur.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=r.os.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.os=r.os.insert(o.targetId,o),r._s.set(t,o.targetId)),o})}function Fe(a,t,r){return At.apply(this,arguments)}function At(){return(At=(0,ee.A)(function*(a,t,r){const o=Nt(a),u=o.os.get(t),d=r?"readwrite":"readwrite-primary";try{r||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!is(m))throw m;nt("LocalStore",`Failed to update sequence numbers for target ${t}: ${m}`)}o.os=o.os.remove(t),o._s.delete(u.target)})).apply(this,arguments)}function Gt(a,t,r){const o=Nt(a);let u=Zt.min(),d=kn();return o.persistence.runTransaction("Execute query","readwrite",m=>function(F,H,re){const fe=Nt(F),Me=fe._s.get(re);return void 0!==Me?Re.resolve(fe.os.get(Me)):fe.Ur.getTargetData(H,re)}(o,m,qi(t)).next(b=>{if(b)return u=b.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(m,b.targetId).next(F=>{d=F})}).next(()=>o.ss.getDocumentsMatchingQuery(m,t,r?u:Zt.min(),r?d:kn())).next(b=>(Dr(o,he(t),b),{documents:b,Ts:d})))}function Dn(a,t){const r=Nt(a),o=Nt(r.Ur),u=r.os.get(t);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",d=>o.ot(d,t).next(m=>m?m.target:null))}function $n(a,t){const r=Nt(a),o=r.us.get(t)||Zt.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.cs.getAllFromCollectionGroup(u,t,me(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Dr(r,t,u),u))}function Dr(a,t,r){let o=a.us.get(t)||Zt.min();r.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),a.us.set(t,o)}function Ra(){return(Ra=(0,ee.A)(function*(a,t,r,o){const u=Nt(a);let d=kn(),m=on();for(const H of r){const re=t.Es(H.metadata.name);H.document&&(d=d.add(re));const fe=t.ds(H);fe.setReadTime(t.As(H.metadata.readTime)),m=m.insert(re,fe)}const b=u.cs.newChangeBuffer({trackRemovals:!0}),F=yield ae(u,(re=o,qi(Ni(On.fromString(`__bundle__/docs/${re}`)))));var re;return u.persistence.runTransaction("Apply bundle documents","readwrite",H=>A(H,b,m).next(re=>(b.apply(H),re)).next(re=>u.Ur.removeMatchingKeysForTargetId(H,F.targetId).next(()=>u.Ur.addMatchingKeys(H,d,F.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(H,re.Ps,re.Is)).next(()=>re.Ps)))})).apply(this,arguments)}function Hu(a,t){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,ee.A)(function*(a,t,r=kn()){const o=yield ae(a,qi(Hs(t.bundledQuery))),u=Nt(a);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=ki(t.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u.Gr.saveNamedQuery(d,t);const b=o.withResumeToken(zr.EMPTY_BYTE_STRING,m);return u.os=u.os.insert(b.targetId,b),u.Ur.updateTargetData(d,b).next(()=>u.Ur.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Ur.addMatchingKeys(d,r,o.targetId)).next(()=>u.Gr.saveNamedQuery(d,t))})})).apply(this,arguments)}function zu(a,t){return`firestore_clients_${a}_${t}`}function jl(a,t,r){let o=`firestore_mutations_${a}_${r}`;return t.isAuthenticated()&&(o+=`_${t.uid}`),o}function $l(a,t){return`firestore_targets_${a}_${t}`}class Ka{constructor(t,r,o,u){this.user=t,this.batchId=r,this.state=o,this.error=u}static Rs(t,r,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new Rt(u.error.code,u.error.message))),m?new Ka(t,r,u.state,d):(Cn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${o}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class sa{constructor(t,r,o){this.targetId=t,this.state=r,this.error=o}static Rs(t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Rt(o.error.code,o.error.message))),d?new sa(t,o.state,u):(Cn("SharedClientState",`Failed to parse target state for ID '${t}': ${r}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Wu{constructor(t,r){this.clientId=t,this.activeTargetIds=r}static Rs(t,r){const o=JSON.parse(r);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=uo();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=ut(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new Wu(t,d):(Cn("SharedClientState",`Failed to parse client data for instance '${t}': ${r}`),null)}}class iu{constructor(t,r){this.clientId=t,this.onlineState=r}static Rs(t){const r=JSON.parse(t);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new iu(r.clientId,r.onlineState):(Cn("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Ku{constructor(){this.activeTargetIds=uo()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class dc{constructor(t,r,o,u,d){this.window=t,this.ui=r,this.persistenceKey=o,this.ps=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Sr(zt),this.started=!1,this.bs=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.Ds=zu(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new Ku),this.Cs=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(F){return`firestore_bundle_loaded_v2_${F}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,ee.A)(function*(){const r=yield t.syncEngine.Qi();for(const u of r){if(u===t.ps)continue;const d=t.getItem(zu(t.persistenceKey,u));if(d){const m=Wu.Rs(u,d);m&&(t.Ss=t.Ss.insert(m.clientId,m))}}t.Ns();const o=t.storage.getItem(t.xs);if(o){const u=t.Ls(o);u&&t.Bs(u)}for(const u of t.bs)t.ws(u);t.bs=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.vs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(t){let r=!1;return this.Ss.forEach((o,u)=>{u.activeTargetIds.has(t)&&(r=!0)}),r}addPendingMutation(t){this.qs(t,"pending")}updateMutationState(t,r,o){this.qs(t,r,o),this.Qs(t)}addLocalQueryTarget(t){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem($l(this.persistenceKey,t));if(o){const u=sa.Rs(t,o);u&&(r=u.state)}}return this.Ks.fs(t),this.Ns(),r}removeLocalQueryTarget(t){this.Ks.gs(t),this.Ns()}isLocalQueryTarget(t){return this.Ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem($l(this.persistenceKey,t))}updateQueryState(t,r,o){this.$s(t,r,o)}handleUserChange(t,r,o){r.forEach(u=>{this.Qs(u)}),this.currentUser=t,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(t){this.Us(t)}notifyBundleLoaded(t){this.Ws(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(t){const r=this.storage.getItem(t);return nt("SharedClientState","READ",t,r),r}setItem(t,r){nt("SharedClientState","SET",t,r),this.storage.setItem(t,r)}removeItem(t){nt("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ws(t){var r=this;const o=t;if(o.storageArea===this.storage){if(nt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Ds)return void Cn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,ee.A)(function*(){if(r.started){if(null!==o.key)if(r.Cs.test(o.key)){if(null==o.newValue){const u=r.Gs(o.key);return r.zs(u,null)}{const u=r.js(o.key,o.newValue);if(u)return r.zs(u.clientId,u)}}else if(r.Fs.test(o.key)){if(null!==o.newValue){const u=r.Hs(o.key,o.newValue);if(u)return r.Js(u)}}else if(r.Ms.test(o.key)){if(null!==o.newValue){const u=r.Ys(o.key,o.newValue);if(u)return r.Zs(u)}}else if(o.key===r.xs){if(null!==o.newValue){const u=r.Ls(o.newValue);if(u)return r.Bs(u)}}else if(o.key===r.vs){const u=function(m){let b=ne.oe;if(null!=m)try{const F=JSON.parse(m);mt("number"==typeof F),b=F}catch(F){Cn("SharedClientState","Failed to read sequence number from WebStorage",F)}return b}(o.newValue);u!==ne.oe&&r.sequenceNumberHandler(u)}else if(o.key===r.Os){const u=r.Xs(o.newValue);yield Promise.all(u.map(d=>r.syncEngine.eo(d)))}}else r.bs.push(o)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(t,r,o){const u=new Ka(this.currentUser,t,r,o),d=jl(this.persistenceKey,this.currentUser,t);this.setItem(d,u.Vs())}Qs(t){const r=jl(this.persistenceKey,this.currentUser,t);this.removeItem(r)}Us(t){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:t}))}$s(t,r,o){const u=$l(this.persistenceKey,t),d=new sa(t,r,o);this.setItem(u,d.Vs())}Ws(t){const r=JSON.stringify(Array.from(t));this.setItem(this.Os,r)}Gs(t){const r=this.Cs.exec(t);return r?r[1]:null}js(t,r){const o=this.Gs(t);return Wu.Rs(o,r)}Hs(t,r){const o=this.Fs.exec(t),u=Number(o[1]);return Ka.Rs(new nn(void 0!==o[2]?o[2]:null),u,r)}Ys(t,r){const o=this.Ms.exec(t),u=Number(o[1]);return sa.Rs(u,r)}Ls(t){return iu.Rs(t)}Xs(t){return JSON.parse(t)}Js(t){var r=this;return(0,ee.A)(function*(){if(t.user.uid===r.currentUser.uid)return r.syncEngine.no(t.batchId,t.state,t.error);nt("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Zs(t){return this.syncEngine.ro(t.targetId,t.state,t.error)}zs(t,r){const o=r?this.Ss.insert(t,r):this.Ss.remove(t),u=this.ks(this.Ss),d=this.ks(o),m=[],b=[];return d.forEach(F=>{u.has(F)||m.push(F)}),u.forEach(F=>{d.has(F)||b.push(F)}),this.syncEngine.io(m,b).then(()=>{this.Ss=o})}Bs(t){this.Ss.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ks(t){let r=uo();return t.forEach((o,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class qa{constructor(){this.so=new Ku,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,o){}addLocalQueryTarget(t){return this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,r,o){this.oo[t]=r}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Ku,Promise.resolve()}handleUserChange(t,r,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class Ss{_o(t){}shutdown(){}}class C_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){nt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){nt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Fd=null;function Vd(){return null===Fd?Fd=268435456+Math.round(2147483648*Math.random()):Fd++,"0x"+Fd.toString(16)}const Jv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class w_{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}const zs="WebChannelConnection";class Zv extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const o=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+r.host,this.vo=`projects/${u}/databases/${d}`,this.Co="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${d}`}get Fo(){return!1}Mo(r,o,u,d,m){const b=Vd(),F=this.xo(r,o.toUriEncodedString());nt("RestConnection",`Sending RPC '${r}' ${b}:`,F,u);const H={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(H,d,m),this.No(r,F,H,u).then(re=>(nt("RestConnection",`Received RPC '${r}' ${b}: `,re),re),re=>{throw Gn("RestConnection",`RPC '${r}' ${b} failed with error: `,re,"url: ",F,"request:",u),re})}Lo(r,o,u,d,m,b){return this.Mo(r,o,u,d,m)}Oo(r,o,u){r["X-Goog-Api-Client"]="gl-js/ fire/"+sn,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((d,m)=>r[m]=d),u&&u.headers.forEach((d,m)=>r[m]=d)}xo(r,o){return`${this.Do}/v1/${o}:${Jv[r]}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,r,o,u){const d=Vd();return new Promise((m,b)=>{const F=new vt;F.setWithCredentials(!0),F.listenOnce(qe.COMPLETE,()=>{try{switch(F.getLastErrorCode()){case dt.NO_ERROR:const re=F.getResponseJson();nt(zs,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(re)),m(re);break;case dt.TIMEOUT:nt(zs,`RPC '${t}' ${d} timed out`),b(new Rt(Ze.DEADLINE_EXCEEDED,"Request time out"));break;case dt.HTTP_ERROR:const fe=F.getStatus();if(nt(zs,`RPC '${t}' ${d} failed with status:`,fe,"response text:",F.getResponseText()),fe>0){let Me=F.getResponseJson();Array.isArray(Me)&&(Me=Me[0]);const at=Me?.error;if(at&&at.status&&at.message){const $t=function(Qt){const Vn=Qt.toLowerCase().replace(/_/g,"-");return Object.values(Ze).indexOf(Vn)>=0?Vn:Ze.UNKNOWN}(at.status);b(new Rt($t,at.message))}else b(new Rt(Ze.UNKNOWN,"Server responded with status "+F.getStatus()))}else b(new Rt(Ze.UNAVAILABLE,"Connection failed."));break;default:St()}}finally{nt(zs,`RPC '${t}' ${d} completed.`)}});const H=JSON.stringify(u);nt(zs,`RPC '${t}' ${d} sending request:`,u),F.send(r,"POST",H,o,15)})}Bo(t,r,o){const u=Vd(),d=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=Kt(),b=Ye(),F={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},H=this.longPollingOptions.timeoutSeconds;void 0!==H&&(F.longPollingTimeout=Math.round(1e3*H)),this.useFetchStreams&&(F.xmlHttpFactory=new yn({})),this.Oo(F.initMessageHeaders,r,o),F.encodeInitMessageHeaders=!0;const re=d.join("");nt(zs,`Creating RPC '${t}' stream ${u}: ${re}`,F);const fe=m.createWebChannel(re,F);let Me=!1,at=!1;const $t=new w_({Io:Qt=>{at?nt(zs,`Not sending because RPC '${t}' stream ${u} is closed:`,Qt):(Me||(nt(zs,`Opening RPC '${t}' stream ${u} transport.`),fe.open(),Me=!0),nt(zs,`RPC '${t}' stream ${u} sending:`,Qt),fe.send(Qt))},To:()=>fe.close()}),tn=(Qt,Vn,qn)=>{Qt.listen(Vn,Fn=>{try{qn(Fn)}catch(or){setTimeout(()=>{throw or},0)}})};return tn(fe,xe.EventType.OPEN,()=>{at||(nt(zs,`RPC '${t}' stream ${u} transport opened.`),$t.yo())}),tn(fe,xe.EventType.CLOSE,()=>{at||(at=!0,nt(zs,`RPC '${t}' stream ${u} transport closed`),$t.So())}),tn(fe,xe.EventType.ERROR,Qt=>{at||(at=!0,Gn(zs,`RPC '${t}' stream ${u} transport errored:`,Qt),$t.So(new Rt(Ze.UNAVAILABLE,"The operation could not be completed")))}),tn(fe,xe.EventType.MESSAGE,Qt=>{var Vn;if(!at){const qn=Qt.data[0];mt(!!qn);const or=qn.error||(null===(Vn=qn[0])||void 0===Vn?void 0:Vn.error);if(or){nt(zs,`RPC '${t}' stream ${u} received error:`,or);const $r=or.status;let Ar=function($e){const tt=ai[$e];if(void 0!==tt)return tc(tt)}($r),Je=or.message;void 0===Ar&&(Ar=Ze.INTERNAL,Je="Unknown error status: "+$r+" with message "+or.message),at=!0,$t.So(new Rt(Ar,Je)),fe.close()}else nt(zs,`RPC '${t}' stream ${u} received:`,qn),$t.bo(qn)}}),tn(b,Et.STAT_EVENT,Qt=>{Qt.stat===_t.PROXY?nt(zs,`RPC '${t}' stream ${u} detected buffering proxy`):Qt.stat===_t.NOPROXY&&nt(zs,`RPC '${t}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{$t.wo()},0),$t}}function eg(){return typeof window<"u"?window:null}function Hl(){return typeof document<"u"?document:null}function su(a){return new to(a,!0)}class hf{constructor(t,r,o=1e3,u=1.5,d=6e4){this.ui=t,this.timerId=r,this.ko=o,this.qo=u,this.Qo=d,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const r=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),u=Math.max(0,r-o);u>0&&nt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,u,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class T_{constructor(t,r,o,u,d,m,b,F){this.ui=t,this.Ho=o,this.Jo=u,this.connection=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=b,this.listener=F,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hf(t,r)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var t=this;return(0,ee.A)(function*(){t.n_()&&(yield t.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){var t=this;return(0,ee.A)(function*(){if(t.r_())return t.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,r){var o=this;return(0,ee.A)(function*(){o.u_(),o.c_(),o.t_.cancel(),o.Yo++,4!==t?o.t_.reset():r&&r.code===Ze.RESOURCE_EXHAUSTED?(Cn(r.toString()),Cn("Using maximum backoff delay to prevent overloading the backend."),o.t_.Wo()):r&&r.code===Ze.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.l_(),o.stream.close(),o.stream=null),o.state=t,yield o.listener.mo(r)})()}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Yo===r&&this.P_(o,u)},o=>{t(()=>{const u=new Rt(Ze.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(u)})})}P_(t,r){const o=this.h_(this.Yo);this.stream=this.T_(t,r),this.stream.Eo(()=>{o(()=>this.listener.Eo())}),this.stream.Ro(()=>{o(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(u=>{o(()=>this.I_(u))}),this.stream.onMessage(u=>{o(()=>1==++this.e_?this.E_(u):this.onNext(u))})}i_(){var t=this;this.state=5,this.t_.Go((0,ee.A)(function*(){t.state=0,t.start()}))}I_(t){return nt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return r=>{this.ui.enqueueAndForget(()=>this.Yo===t?r():(nt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eE extends T_{constructor(t,r,o,u,d,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,o,u,m),this.serializer=d}T_(t,r){return this.connection.Bo("Listen",t,r)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const r=function Tl(a,t){let r;if("targetChange"in t){const o="NO_CHANGE"===(H=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:St(),u=t.targetChange.targetIds||[],d=function(H,re){return H.useProto3Json?(mt(void 0===re||"string"==typeof re),zr.fromBase64String(re||"")):(mt(void 0===re||re instanceof Buffer||re instanceof Uint8Array),zr.fromUint8Array(re||new Uint8Array))}(a,t.targetChange.resumeToken),m=t.targetChange.cause,b=m&&function(H){const re=void 0===H.code?Ze.UNKNOWN:tc(H.code);return new Rt(re,H.message||"")}(m);r=new Sa(o,u,d,b||null)}else if("documentChange"in t){const o=t.documentChange,u=ya(a,o.document.name),d=ki(o.document.updateTime),m=o.document.createTime?ki(o.document.createTime):Zt.min(),b=new Zr({mapValue:{fields:o.document.fields}}),F=sr.newFoundDocument(u,d,m,b);r=new bo(o.targetIds||[],o.removedTargetIds||[],F.key,F)}else if("documentDelete"in t){const o=t.documentDelete,u=ya(a,o.document),d=o.readTime?ki(o.readTime):Zt.min(),m=sr.newNoDocument(u,d);r=new bo([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in t){const o=t.documentRemove,u=ya(a,o.document);r=new bo([],o.removedTargetIds||[],u,null)}else{if(!("filter"in t))return St();{const o=t.filter,{count:u=0,unchangedNames:d}=o,m=new El(u,d);r=new ba(o.targetId,m)}}var H;return r}(this.serializer,t),o=function(d){if(!("targetChange"in d))return Zt.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?Zt.min():m.readTime?ki(m.readTime):Zt.min()}(t);return this.listener.d_(r,o)}A_(t){const r={};r.database=Ru(this.serializer),r.addTarget=function(d,m){let b;const F=m.target;if(b=Aa(F)?{documents:M(d,F)}:{query:w(d,F)._t},b.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){b.resumeToken=Qc(d,m.resumeToken);const H=Ba(d,m.expectedCount);null!==H&&(b.expectedCount=H)}else if(m.snapshotVersion.compareTo(Zt.min())>0){b.readTime=ic(d,m.snapshotVersion.toTimestamp());const H=Ba(d,m.expectedCount);null!==H&&(b.expectedCount=H)}return b}(this.serializer,t);const o=function te(a,t){const r=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return St()}}(t.purpose);return null==r?null:{"goog-listen-tags":r}}(0,t);o&&(r.labels=o),this.a_(r)}R_(t){const r={};r.database=Ru(this.serializer),r.removeTarget=t,this.a_(r)}}class tE extends T_{constructor(t,r,o,u,d,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,o,u,m),this.serializer=d}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,r){return this.connection.Bo("Write",t,r)}E_(t){return mt(!!t.streamToken),this.lastStreamToken=t.streamToken,mt(!t.writeResults||0===t.writeResults.length),this.listener.f_()}onNext(t){mt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const r=function v(a,t){return a&&a.length>0?(mt(void 0!==t),a.map(r=>function(u,d){let m=ki(u.updateTime?u.updateTime:d);return m.isEqual(Zt.min())&&(m=ki(d)),new Cr(m,u.transformResults||[])}(r,t))):[]}(t.writeResults,t.commitTime),o=ki(t.commitTime);return this.listener.g_(o,r)}p_(){const t={};t.database=Ru(this.serializer),this.a_(t)}m_(t){const r={streamToken:this.lastStreamToken,writes:t.map(o=>Ou(this.serializer,o))};this.a_(r)}}class D_ extends class{}{constructor(t,r,o,u){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=o,this.serializer=u,this.y_=!1}w_(){if(this.y_)throw new Rt(Ze.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,r,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Mo(t,ja(r,o),u,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Rt(Ze.UNKNOWN,d.toString())})}Lo(t,r,o,u,d){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,b])=>this.connection.Lo(t,ja(r,o),u,m,b,d)).catch(m=>{throw"FirebaseError"===m.name?(m.code===Ze.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Rt(Ze.UNKNOWN,m.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class nE{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const r=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Cn(r),this.D_=!1):nt("OnlineStateTracker",r)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class A_{constructor(t,r,o,u,d){var m=this;this.localStore=t,this.datastore=r,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=d,this.k_._o(b=>{o.enqueueAndForget((0,ee.A)(function*(){var F;So(m)&&(nt("RemoteStore","Restarting streams for network reachability change."),yield(F=(0,ee.A)(function*(re){const fe=Nt(re);fe.L_.add(4),yield Ud(fe),fe.q_.set("Unknown"),fe.L_.delete(4),yield Ld(fe)}),function H(re){return F.apply(this,arguments)})(m))}))}),this.q_=new nE(o,u)}}function Ld(a){return tg.apply(this,arguments)}function tg(){return(tg=(0,ee.A)(function*(a){if(So(a))for(const t of a.B_)yield t(!0)})).apply(this,arguments)}function Ud(a){return ff.apply(this,arguments)}function ff(){return(ff=(0,ee.A)(function*(a){for(const t of a.B_)yield t(!1)})).apply(this,arguments)}function Bd(a,t){const r=Nt(a);r.N_.has(t.targetId)||(r.N_.set(t.targetId,t),jd(r)?S_(r):Wl(r).r_()&&b_(r,t))}function so(a,t){const r=Nt(a),o=Wl(r);r.N_.delete(t),o.r_()&&ng(r,t),0===r.N_.size&&(o.r_()?o.o_():So(r)&&r.q_.set("Unknown"))}function b_(a,t){if(a.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zt.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Wl(a).A_(t)}function ng(a,t){a.Q_.xe(t),Wl(a).R_(t)}function S_(a){a.Q_=new Su({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>a.N_.get(t)||null,tt:()=>a.datastore.serializer.databaseId}),Wl(a).start(),a.q_.v_()}function jd(a){return So(a)&&!Wl(a).n_()&&a.N_.size>0}function So(a){return 0===Nt(a).L_.size}function rg(a){a.Q_=void 0}function Gl(a){return ig.apply(this,arguments)}function ig(){return(ig=(0,ee.A)(function*(a){a.q_.set("Online")})).apply(this,arguments)}function rE(a){return pf.apply(this,arguments)}function pf(){return(pf=(0,ee.A)(function*(a){a.N_.forEach((t,r)=>{b_(a,t)})})).apply(this,arguments)}function H0(a,t){return P_.apply(this,arguments)}function P_(){return(P_=(0,ee.A)(function*(a,t){rg(a),jd(a)?(a.q_.M_(t),S_(a)):a.q_.set("Unknown")})).apply(this,arguments)}function G0(a,t,r){return M_.apply(this,arguments)}function M_(){return M_=(0,ee.A)(function*(a,t,r){if(a.q_.set("Online"),t instanceof Sa&&2===t.state&&t.cause)try{yield(o=(0,ee.A)(function*(d,m){const b=m.cause;for(const F of m.targetIds)d.N_.has(F)&&(yield d.remoteSyncer.rejectListen(F,b),d.N_.delete(F),d.Q_.removeTarget(F))}),function u(d,m){return o.apply(this,arguments)})(a,t)}catch(o){nt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),yield sg(a,o)}else if(t instanceof bo?a.Q_.Ke(t):t instanceof ba?a.Q_.He(t):a.Q_.We(t),!r.isEqual(Zt.min()))try{const o=yield h(a.localStore);r.compareTo(o)>=0&&(yield function(d,m){const b=d.Q_.rt(m);return b.targetChanges.forEach((F,H)=>{if(F.resumeToken.approximateByteSize()>0){const re=d.N_.get(H);re&&d.N_.set(H,re.withResumeToken(F.resumeToken,m))}}),b.targetMismatches.forEach((F,H)=>{const re=d.N_.get(F);if(!re)return;d.N_.set(F,re.withResumeToken(zr.EMPTY_BYTE_STRING,re.snapshotVersion)),ng(d,F);const fe=new fo(re.target,F,H,re.sequenceNumber);b_(d,fe)}),d.remoteSyncer.applyRemoteEvent(b)}(a,r))}catch(o){nt("RemoteStore","Failed to raise snapshot:",o),yield sg(a,o)}var o}),M_.apply(this,arguments)}function sg(a,t,r){return og.apply(this,arguments)}function og(){return(og=(0,ee.A)(function*(a,t,r){if(!is(t))throw t;a.L_.add(1),yield Ud(a),a.q_.set("Offline"),r||(r=()=>h(a.localStore)),a.asyncQueue.enqueueRetryable((0,ee.A)(function*(){nt("RemoteStore","Retrying IndexedDB access"),yield r(),a.L_.delete(1),yield Ld(a)}))})).apply(this,arguments)}function qu(a,t){return t().catch(r=>sg(a,r,t))}function hc(a){return gf.apply(this,arguments)}function gf(){return(gf=(0,ee.A)(function*(a){const t=Nt(a),r=ou(t);let o=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;iE(t);)try{const u=yield W(t.localStore,o);if(null===u){0===t.O_.length&&r.o_();break}o=u.batchId,ag(t,u)}catch(u){yield sg(t,u)}Qa(t)&&R_(t)})).apply(this,arguments)}function iE(a){return So(a)&&a.O_.length<10}function ag(a,t){a.O_.push(t);const r=ou(a);r.r_()&&r.V_&&r.m_(t.mutations)}function Qa(a){return So(a)&&!ou(a).n_()&&a.O_.length>0}function R_(a){ou(a).start()}function cg(a){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,ee.A)(function*(a){ou(a).p_()})).apply(this,arguments)}function sE(a){return mf.apply(this,arguments)}function mf(){return(mf=(0,ee.A)(function*(a){const t=ou(a);for(const r of a.O_)t.m_(r.mutations)})).apply(this,arguments)}function O_(a,t,r){return zl.apply(this,arguments)}function zl(){return(zl=(0,ee.A)(function*(a,t,r){const o=a.O_.shift(),u=ho.from(o,t,r);yield qu(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),yield hc(a)})).apply(this,arguments)}function _f(a,t){return $d.apply(this,arguments)}function $d(){return $d=(0,ee.A)(function*(a,t){var r;t&&ou(a).V_&&(yield(r=(0,ee.A)(function*(u,d){if(Dc(b=d.code)&&b!==Ze.ABORTED){const m=u.O_.shift();ou(u).s_(),yield qu(u,()=>u.remoteSyncer.rejectFailedWrite(m.batchId,d)),yield hc(u)}var b}),function o(u,d){return r.apply(this,arguments)})(a,t)),Qa(a)&&R_(a)}),$d.apply(this,arguments)}function N_(a,t){return ug.apply(this,arguments)}function ug(){return(ug=(0,ee.A)(function*(a,t){const r=Nt(a);r.asyncQueue.verifyOperationInProgress(),nt("RemoteStore","RemoteStore received new credentials");const o=So(r);r.L_.add(3),yield Ud(r),o&&r.q_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(t),r.L_.delete(3),yield Ld(r)})).apply(this,arguments)}function lg(a,t){return yf.apply(this,arguments)}function yf(){return(yf=(0,ee.A)(function*(a,t){const r=Nt(a);t?(r.L_.delete(2),yield Ld(r)):t||(r.L_.add(2),yield Ud(r),r.q_.set("Unknown"))})).apply(this,arguments)}function Wl(a){return a.K_||(a.K_=function(r,o,u){const d=Nt(r);return d.w_(),new eE(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:Gl.bind(null,a),Ro:rE.bind(null,a),mo:H0.bind(null,a),d_:G0.bind(null,a)}),a.B_.push(function(){var t=(0,ee.A)(function*(r){r?(a.K_.s_(),jd(a)?S_(a):a.q_.set("Unknown")):(yield a.K_.stop(),rg(a))});return function(r){return t.apply(this,arguments)}}())),a.K_}function ou(a){return a.U_||(a.U_=function(r,o,u){const d=Nt(r);return d.w_(),new tE(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:()=>Promise.resolve(),Ro:cg.bind(null,a),mo:_f.bind(null,a),f_:sE.bind(null,a),g_:O_.bind(null,a)}),a.B_.push(function(){var t=(0,ee.A)(function*(r){r?(a.U_.s_(),yield hc(a)):(yield a.U_.stop(),a.O_.length>0&&(nt("RemoteStore",`Stopping write stream with ${a.O_.length} pending writes`),a.O_=[]))});return function(r){return t.apply(this,arguments)}}())),a.U_}class Po{constructor(t,r,o,u,d){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new Qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,o,u,d){const m=Date.now()+o,b=new Po(t,r,m,u,d);return b.start(o),b}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Rt(Ze.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function au(a,t){if(Cn("AsyncQueue",`${t}: ${a}`),is(a))return new Rt(Ze.UNAVAILABLE,`${t}: ${a}`);throw a}class Xu{constructor(t){this.comparator=t?(r,o)=>t(r,o)||we.comparator(r.key,o.key):(r,o)=>we.comparator(r.key,o.key),this.keyedMap=ur(),this.sortedSet=new Sr(this.comparator)}static emptySet(t){return new Xu(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,o)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Xu)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,r){const o=new Xu;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=r,o}}class vf{constructor(){this.W_=new Sr(we.comparator)}track(t){const r=t.doc.key,o=this.W_.get(r);o?0!==t.type&&3===o.type?this.W_=this.W_.insert(r,t):3===t.type&&1!==o.type?this.W_=this.W_.insert(r,{type:o.type,doc:t.doc}):2===t.type&&2===o.type?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):2===t.type&&0===o.type?this.W_=this.W_.insert(r,{type:0,doc:t.doc}):1===t.type&&0===o.type?this.W_=this.W_.remove(r):1===t.type&&2===o.type?this.W_=this.W_.insert(r,{type:1,doc:o.doc}):0===t.type&&1===o.type?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):St():this.W_=this.W_.insert(r,t)}G_(){const t=[];return this.W_.inorderTraversal((r,o)=>{t.push(o)}),t}}class Ps{constructor(t,r,o,u,d,m,b,F,H){this.query=t,this.docs=r,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=b,this.excludesMetadataChanges=F,this.hasCachedResults=H}static fromInitialDocuments(t,r,o,u,d){const m=[];return r.forEach(b=>{m.push({type:0,doc:b})}),new Ps(t,r,Xu.emptySet(r),m,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&C(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,o=t.docChanges;if(r.length!==o.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==o[u].type||!r[u].doc.isEqual(o[u].doc))return!1;return!0}}class Hd{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class x_{constructor(){this.queries=dg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(r,o){const u=Nt(r),d=u.queries;u.queries=dg(),d.forEach((m,b)=>{for(const F of b.j_)F.onError(o)})}(this,new Rt(Ze.ABORTED,"Firestore shutting down"))}}function dg(){return new ht(a=>D(a),C)}function hg(a,t){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,ee.A)(function*(a,t){const r=Nt(a);let o=3;const u=t.query;let d=r.queries.get(u);d?!d.H_()&&t.J_()&&(o=2):(d=new Hd,o=t.J_()?0:1);try{switch(o){case 0:d.z_=yield r.onListen(u,!0);break;case 1:d.z_=yield r.onListen(u,!1);break;case 2:yield r.onFirstRemoteStoreListen(u)}}catch(m){const b=au(m,`Initialization of query '${L(t.query)}' failed`);return void t.onError(b)}r.queries.set(u,d),d.j_.push(t),t.Z_(r.onlineState),d.z_&&t.X_(d.z_)&&pg(r)})).apply(this,arguments)}function fg(a,t){return If.apply(this,arguments)}function If(){return(If=(0,ee.A)(function*(a,t){const r=Nt(a),o=t.query;let u=3;const d=r.queries.get(o);if(d){const m=d.j_.indexOf(t);m>=0&&(d.j_.splice(m,1),0===d.j_.length?u=t.J_()?0:1:!d.H_()&&t.J_()&&(u=2))}switch(u){case 0:return r.queries.delete(o),r.onUnlisten(o,!0);case 1:return r.queries.delete(o),r.onUnlisten(o,!1);case 2:return r.onLastRemoteStoreUnlisten(o);default:return}})).apply(this,arguments)}function oE(a,t){const r=Nt(a);let o=!1;for(const u of t){const m=r.queries.get(u.query);if(m){for(const b of m.j_)b.X_(u)&&(o=!0);m.z_=u}}o&&pg(r)}function k_(a,t,r){const o=Nt(a),u=o.queries.get(t);if(u)for(const d of u.j_)d.onError(r);o.queries.delete(t)}function pg(a){a.Y_.forEach(t=>{t.next()})}var gg,F_;(F_=gg||(gg={})).ea="default",F_.Cache="cache";class mg{constructor(t,r,o){this.query=t,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(t){if(!this.options.includeMetadataChanges){const o=[];for(const u of t.docChanges)3!==u.type&&o.push(u);t=new Ps(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.na?this.ia(t)&&(this.ta.next(t),r=!0):this.sa(t,this.onlineState)&&(this.oa(t),r=!0),this.ra=t,r}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),r=!0),r}sa(t,r){return!t.fromCache||!this.J_()||(!this.options._a||!("Offline"!==r))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===r)}ia(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(t){t=Ps.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==gg.Cache}}class V_{constructor(t,r){this.aa=t,this.byteLength=r}ua(){return"metadata"in this.aa}}class _g{constructor(t){this.serializer=t}Es(t){return ya(this.serializer,t)}ds(t){return t.metadata.exists?Zh(this.serializer,t.document,!1):sr.newNoDocument(this.Es(t.metadata.name),this.As(t.metadata.readTime))}As(t){return ki(t)}}class L_{constructor(t,r,o){this.ca=t,this.localStore=r,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gd(t)}la(t){this.progress.bytesLoaded+=t.byteLength;let r=this.progress.documentsLoaded;if(t.aa.namedQuery)this.queries.push(t.aa.namedQuery);else if(t.aa.documentMetadata){this.documents.push({metadata:t.aa.documentMetadata}),t.aa.documentMetadata.exists||++r;const o=On.fromString(t.aa.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else t.aa.document&&(this.documents[this.documents.length-1].document=t.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(t){const r=new Map,o=new _g(this.serializer);for(const u of t)if(u.metadata.queries){const d=o.Es(u.metadata.name);for(const m of u.metadata.queries){const b=(r.get(m)||kn()).add(d);r.set(m,b)}}return r}complete(){var t=this;return(0,ee.A)(function*(){const r=yield function io(a,t,r,o){return Ra.apply(this,arguments)}(t.localStore,new _g(t.serializer),t.documents,t.ca.id),o=t.ha(t.documents);for(const u of t.queries)yield Hu(t.localStore,u,o.get(u.name));return t.progress.taskState="Success",{progress:t.progress,Pa:t.collectionGroups,Ia:r}})()}}function Gd(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class yg{constructor(t){this.key=t}}class vg{constructor(t){this.key=t}}class Eg{constructor(t,r){this.query=t,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=kn(),this.mutatedKeys=kn(),this.Aa=Pe(t),this.Ra=new Xu(this.Aa)}get Va(){return this.Ta}ma(t,r){const o=r?r.fa:new vf,u=r?r.Ra:this.Ra;let d=r?r.mutatedKeys:this.mutatedKeys,m=u,b=!1;const F="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,H="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal((re,fe)=>{const Me=u.get(re),at=Q(this.query,fe)?fe:null,$t=!!Me&&this.mutatedKeys.has(Me.key),tn=!!at&&(at.hasLocalMutations||this.mutatedKeys.has(at.key)&&at.hasCommittedMutations);let Qt=!1;Me&&at?Me.data.isEqual(at.data)?$t!==tn&&(o.track({type:3,doc:at}),Qt=!0):this.ga(Me,at)||(o.track({type:2,doc:at}),Qt=!0,(F&&this.Aa(at,F)>0||H&&this.Aa(at,H)<0)&&(b=!0)):!Me&&at?(o.track({type:0,doc:at}),Qt=!0):Me&&!at&&(o.track({type:1,doc:Me}),Qt=!0,(F||H)&&(b=!0)),Qt&&(at?(m=m.add(at),d=tn?d.add(re):d.delete(re)):(m=m.delete(re),d=d.delete(re)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const re="F"===this.query.limitType?m.last():m.first();m=m.delete(re.key),d=d.delete(re.key),o.track({type:1,doc:re})}return{Ra:m,fa:o,ns:b,mutatedKeys:d}}ga(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,o,u){const d=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const m=t.fa.G_();m.sort((re,fe)=>function(at,$t){const tn=Qt=>{switch(Qt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return St()}};return tn(at)-tn($t)}(re.type,fe.type)||this.Aa(re.doc,fe.doc)),this.pa(o),u=null!=u&&u;const b=r&&!u?this.ya():[],F=0===this.da.size&&this.current&&!u?1:0,H=F!==this.Ea;return this.Ea=F,0!==m.length||H?{snapshot:new Ps(this.query,t.Ra,d,m,t.mutatedKeys,0===F,H,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:b}:{wa:b}}Z_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=kn(),this.Ra.forEach(o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))});const r=[];return t.forEach(o=>{this.da.has(o)||r.push(new vg(o))}),this.da.forEach(o=>{t.has(o)||r.push(new yg(o))}),r}ba(t){this.Ta=t.Ts,this.da=kn();const r=this.ma(t.documents);return this.applyChanges(r,!0)}Da(){return Ps.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class U_{constructor(t,r,o){this.query=t,this.targetId=r,this.view=o}}class aE{constructor(t){this.key=t,this.va=!1}}class cE{constructor(t,r,o,u,d,m){this.localStore=t,this.remoteStore=r,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.Ca={},this.Fa=new ht(b=>D(b),C),this.Ma=new Map,this.xa=new Set,this.Oa=new Sr(we.comparator),this.Na=new Map,this.La=new nu,this.Ba={},this.ka=new Map,this.qa=Gs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function uE(a,t){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,ee.A)(function*(a,t,r=!0){const o=Fg(a);let u;const d=o.Fa.get(t);return d?(o.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.Da()):u=yield Cg(o,t,r,!0),u})).apply(this,arguments)}function B_(a,t){return j_.apply(this,arguments)}function j_(){return(j_=(0,ee.A)(function*(a,t){const r=Fg(a);yield Cg(r,t,!0,!1)})).apply(this,arguments)}function Cg(a,t,r,o){return wg.apply(this,arguments)}function wg(){return(wg=(0,ee.A)(function*(a,t,r,o){const u=yield ae(a.localStore,qi(t)),d=u.targetId,m=r?a.sharedClientState.addLocalQueryTarget(d):"not-current";let b;return o&&(b=yield Tg(a,t,d,"current"===m,u.resumeToken)),a.isPrimaryClient&&r&&Bd(a.remoteStore,u),b})).apply(this,arguments)}function Tg(a,t,r,o,u){return $_.apply(this,arguments)}function $_(){return $_=(0,ee.A)(function*(a,t,r,o,u){a.Ka=(fe,Me,at)=>{return($t=(0,ee.A)(function*(Qt,Vn,qn,Fn){let or=Vn.view.ma(qn);or.ns&&(or=yield Gt(Qt.localStore,Vn.query,!1).then(({documents:Se})=>Vn.view.ma(Se,or)));const $r=Fn&&Fn.targetChanges.get(Vn.targetId),Ar=Fn&&null!=Fn.targetMismatches.get(Vn.targetId),Je=Vn.view.applyChanges(or,Qt.isPrimaryClient,$r,Ar);return Wd(Qt,Vn.targetId,Je.wa),Je.snapshot}),function tn(Qt,Vn,qn,Fn){return $t.apply(this,arguments)})(a,fe,Me,at);var $t};const d=yield Gt(a.localStore,t,!0),m=new Eg(t,d.Ts),b=m.ma(d.documents),F=_i.createSynthesizedTargetChangeForCurrentChange(r,o&&"Offline"!==a.onlineState,u),H=m.applyChanges(b,a.isPrimaryClient,F);Wd(a,r,H.wa);const re=new U_(t,r,m);return a.Fa.set(t,re),a.Ma.has(r)?a.Ma.get(r).push(t):a.Ma.set(r,[t]),H.snapshot}),$_.apply(this,arguments)}function lE(a,t,r){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,ee.A)(function*(a,t,r){const o=Nt(a),u=o.Fa.get(t),d=o.Ma.get(u.targetId);if(d.length>1)return o.Ma.set(u.targetId,d.filter(m=>!C(m,t))),void o.Fa.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||(yield Fe(o.localStore,u.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(u.targetId),r&&so(o.remoteStore,u.targetId),uu(o,u.targetId)}).catch(Mn))):(uu(o,u.targetId),yield Fe(o.localStore,u.targetId,!0))})).apply(this,arguments)}function Dg(a,t){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,ee.A)(function*(a,t){const r=Nt(a),o=r.Fa.get(t),u=r.Ma.get(o.targetId);r.isPrimaryClient&&1===u.length&&(r.sharedClientState.removeLocalQueryTarget(o.targetId),so(r.remoteStore,o.targetId))})).apply(this,arguments)}function wf(){return(wf=(0,ee.A)(function*(a,t,r){const o=Zu(a);try{const u=yield function(m,b){const F=Nt(m),H=Jt.now(),re=b.reduce((at,$t)=>at.add($t.key),kn());let fe,Me;return F.persistence.runTransaction("Locally write mutations","readwrite",at=>{let $t=on(),tn=kn();return F.cs.getEntries(at,re).next(Qt=>{$t=Qt,$t.forEach((Vn,qn)=>{qn.isValidDocument()||(tn=tn.add(Vn))})}).next(()=>F.localDocuments.getOverlayedDocuments(at,$t)).next(Qt=>{fe=Qt;const Vn=[];for(const qn of b){const Fn=xr(qn,fe.get(qn.key).overlayedDocument);null!=Fn&&Vn.push(new pr(qn.key,Fn,co(Fn.value.mapValue),gn.exists(!0)))}return F.mutationQueue.addMutationBatch(at,H,Vn,b)}).next(Qt=>{Me=Qt;const Vn=Qt.applyToLocalDocumentSet(fe,tn);return F.documentOverlayCache.saveOverlays(at,Qt.batchId,Vn)})}).then(()=>({batchId:Me.batchId,changes:er(fe)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(u.batchId),function(m,b,F){let H=m.Ba[m.currentUser.toKey()];H||(H=new Sr(zt)),H=H.insert(b,F),m.Ba[m.currentUser.toKey()]=H}(o,u.batchId,r),yield Oa(o,u.changes),yield hc(o.remoteStore)}catch(u){const d=au(u,"Failed to persist write");r.reject(d)}})).apply(this,arguments)}function H_(a,t){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,ee.A)(function*(a,t){const r=Nt(a);try{const o=yield function f(a,t){const r=Nt(a),o=t.snapshotVersion;let u=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=r.cs.newChangeBuffer({trackRemovals:!0});u=r.os;const b=[];t.targetChanges.forEach((re,fe)=>{const Me=u.get(fe);if(!Me)return;b.push(r.Ur.removeMatchingKeys(d,re.removedDocuments,fe).next(()=>r.Ur.addMatchingKeys(d,re.addedDocuments,fe)));let at=Me.withSequenceNumber(d.currentSequenceNumber);var tn,Qt,Vn;null!==t.targetMismatches.get(fe)?at=at.withResumeToken(zr.EMPTY_BYTE_STRING,Zt.min()).withLastLimboFreeSnapshotVersion(Zt.min()):re.resumeToken.approximateByteSize()>0&&(at=at.withResumeToken(re.resumeToken,o)),u=u.insert(fe,at),Qt=at,Vn=re,(0===(tn=Me).resumeToken.approximateByteSize()||Qt.snapshotVersion.toMicroseconds()-tn.snapshotVersion.toMicroseconds()>=3e8||Vn.addedDocuments.size+Vn.modifiedDocuments.size+Vn.removedDocuments.size>0)&&b.push(r.Ur.updateTargetData(d,at))});let F=on(),H=kn();if(t.documentUpdates.forEach(re=>{t.resolvedLimboDocuments.has(re)&&b.push(r.persistence.referenceDelegate.updateLimboDocument(d,re))}),b.push(A(d,m,t.documentUpdates).next(re=>{F=re.Ps,H=re.Is})),!o.isEqual(Zt.min())){const re=r.Ur.getLastRemoteSnapshotVersion(d).next(fe=>r.Ur.setTargetsMetadata(d,d.currentSequenceNumber,o));b.push(re)}return Re.waitFor(b).next(()=>m.apply(d)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,F,H)).next(()=>F)}).then(d=>(r.os=u,d))}(r.localStore,t);t.targetChanges.forEach((u,d)=>{const m=r.Na.get(d);m&&(mt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.va=!0:u.modifiedDocuments.size>0?mt(m.va):u.removedDocuments.size>0&&(mt(m.va),m.va=!1))}),yield Oa(r,o,t)}catch(o){yield Mn(o)}})).apply(this,arguments)}function Df(a,t,r){const o=Nt(a);if(o.isPrimaryClient&&0===r||!o.isPrimaryClient&&1===r){const u=[];o.Fa.forEach((d,m)=>{const b=m.view.Z_(t);b.snapshot&&u.push(b.snapshot)}),function(m,b){const F=Nt(m);F.onlineState=b;let H=!1;F.queries.forEach((re,fe)=>{for(const Me of fe.j_)Me.Z_(b)&&(H=!0)}),H&&pg(F)}(o.eventManager,t),u.length&&o.Ca.d_(u),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}function z0(a,t,r){return bg.apply(this,arguments)}function bg(){return(bg=(0,ee.A)(function*(a,t,r){const o=Nt(a);o.sharedClientState.updateQueryState(t,"rejected",r);const u=o.Na.get(t),d=u&&u.key;if(d){let m=new Sr(we.comparator);m=m.insert(d,sr.newNoDocument(d,Zt.min()));const b=kn().add(d),F=new rc(Zt.min(),new Map,new Sr(zt),m,b);yield H_(o,F),o.Oa=o.Oa.remove(d),o.Na.delete(t),Ju(o)}else yield Fe(o.localStore,t,!1).then(()=>uu(o,t,r)).catch(Mn)})).apply(this,arguments)}function dE(a,t){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,ee.A)(function*(a,t){const r=Nt(a),o=t.batch.batchId;try{const u=yield function I(a,t){const r=Nt(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=t.batch.keys(),d=r.cs.newChangeBuffer({trackRemovals:!0});return function(b,F,H,re){const fe=H.batch,Me=fe.keys();let at=Re.resolve();return Me.forEach($t=>{at=at.next(()=>re.getEntry(F,$t)).next(tn=>{const Qt=H.docVersions.get($t);mt(null!==Qt),tn.version.compareTo(Qt)<0&&(fe.applyToRemoteDocument(tn,H),tn.isValidDocument()&&(tn.setReadTime(H.commitVersion),re.addEntry(tn)))})}),at.next(()=>b.mutationQueue.removeMutationBatch(F,fe))}(r,o,t,d).next(()=>d.apply(o)).next(()=>r.mutationQueue.performConsistencyCheck(o)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(o,u,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(b){let F=kn();for(let H=0;H<b.mutationResults.length;++H)b.mutationResults[H].transformResults.length>0&&(F=F.add(b.batch.mutations[H].key));return F}(t))).next(()=>r.localDocuments.getDocuments(o,u))})}(r.localStore,t);zd(r,o,null),Pg(r,o),r.sharedClientState.updateMutationState(o,"acknowledged"),yield Oa(r,u)}catch(u){yield Mn(u)}})).apply(this,arguments)}function hE(a,t,r){return G_.apply(this,arguments)}function G_(){return(G_=(0,ee.A)(function*(a,t,r){const o=Nt(a);try{const u=yield function(m,b){const F=Nt(m);return F.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let re;return F.mutationQueue.lookupMutationBatch(H,b).next(fe=>(mt(null!==fe),re=fe.keys(),F.mutationQueue.removeMutationBatch(H,fe))).next(()=>F.mutationQueue.performConsistencyCheck(H)).next(()=>F.documentOverlayCache.removeOverlaysForBatchId(H,re,b)).next(()=>F.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(H,re)).next(()=>F.localDocuments.getDocuments(H,re))})}(o.localStore,t);zd(o,t,r),Pg(o,t),o.sharedClientState.updateMutationState(t,"rejected",r),yield Oa(o,u)}catch(u){yield Mn(u)}})).apply(this,arguments)}function Kl(){return(Kl=(0,ee.A)(function*(a,t){const r=Nt(a);So(r.remoteStore)||nt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const b=Nt(m);return b.persistence.runTransaction("Get highest unacknowledged batch id","readonly",F=>b.mutationQueue.getHighestUnacknowledgedBatchId(F))}(r.localStore);if(-1===o)return void t.resolve();const u=r.ka.get(o)||[];u.push(t),r.ka.set(o,u)}catch(o){const u=au(o,"Initialization of waitForPendingWrites() operation failed");t.reject(u)}})).apply(this,arguments)}function Pg(a,t){(a.ka.get(t)||[]).forEach(r=>{r.resolve()}),a.ka.delete(t)}function zd(a,t,r){const o=Nt(a);let u=o.Ba[o.currentUser.toKey()];if(u){const d=u.get(t);d&&(r?d.reject(r):d.resolve(),u=u.remove(t)),o.Ba[o.currentUser.toKey()]=u}}function uu(a,t,r=null){a.sharedClientState.removeLocalQueryTarget(t);for(const o of a.Ma.get(t))a.Fa.delete(o),r&&a.Ca.$a(o,r);a.Ma.delete(t),a.isPrimaryClient&&a.La.gr(t).forEach(o=>{a.La.containsKey(o)||Yu(a,o)})}function Yu(a,t){a.xa.delete(t.path.canonicalString());const r=a.Oa.get(t);null!==r&&(so(a.remoteStore,r),a.Oa=a.Oa.remove(t),a.Na.delete(r),Ju(a))}function Wd(a,t,r){for(const o of r)o instanceof yg?(a.La.addReference(o.key,t),Mg(a,o)):o instanceof vg?(nt("SyncEngine","Document no longer in limbo: "+o.key),a.La.removeReference(o.key,t),a.La.containsKey(o.key)||Yu(a,o.key)):St()}function Mg(a,t){const r=t.key,o=r.path.canonicalString();a.Oa.get(r)||a.xa.has(o)||(nt("SyncEngine","New document in limbo: "+r),a.xa.add(o),Ju(a))}function Ju(a){for(;a.xa.size>0&&a.Oa.size<a.maxConcurrentLimboResolutions;){const t=a.xa.values().next().value;a.xa.delete(t);const r=new we(On.fromString(t)),o=a.qa.next();a.Na.set(o,new aE(r)),a.Oa=a.Oa.insert(r,o),Bd(a.remoteStore,new fo(qi(Ni(r.path)),o,"TargetPurposeLimboResolution",ne.oe))}}function Oa(a,t,r){return lu.apply(this,arguments)}function lu(){return lu=(0,ee.A)(function*(a,t,r){const o=Nt(a),u=[],d=[],m=[];var b;o.Fa.isEmpty()||(o.Fa.forEach((b,F)=>{m.push(o.Ka(F,t,r).then(H=>{var re;if((H||r)&&o.isPrimaryClient){const fe=H?!H.fromCache:null===(re=r?.targetChanges.get(F.targetId))||void 0===re?void 0:re.current;o.sharedClientState.updateQueryState(F.targetId,fe?"current":"not-current")}if(H){u.push(H);const fe=kd.Wi(F.targetId,H);d.push(fe)}}))}),yield Promise.all(m),o.Ca.d_(u),yield(b=(0,ee.A)(function*(H,re){const fe=Nt(H);try{yield fe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Me=>Re.forEach(re,at=>Re.forEach(at.$i,$t=>fe.persistence.referenceDelegate.addReference(Me,at.targetId,$t)).next(()=>Re.forEach(at.Ui,$t=>fe.persistence.referenceDelegate.removeReference(Me,at.targetId,$t)))))}catch(Me){if(!is(Me))throw Me;nt("LocalStore","Failed to update sequence numbers: "+Me)}for(const Me of re){const at=Me.targetId;if(!Me.fromCache){const $t=fe.os.get(at),Qt=$t.withLastLimboFreeSnapshotVersion($t.snapshotVersion);fe.os=fe.os.insert(at,Qt)}}}),function F(H,re){return b.apply(this,arguments)})(o.localStore,d))}),lu.apply(this,arguments)}function Rg(a,t){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,ee.A)(function*(a,t){const r=Nt(a);if(!r.currentUser.isEqual(t)){nt("SyncEngine","User change. New user:",t.toKey());const o=yield Zp(r.localStore,t);r.currentUser=t,(d=r).ka.forEach(b=>{b.forEach(F=>{F.reject(new Rt(Ze.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.ka.clear(),r.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),yield Oa(r,o.hs)}var d})).apply(this,arguments)}function Af(a,t){const r=Nt(a),o=r.Na.get(t);if(o&&o.va)return kn().add(o.key);{let u=kn();const d=r.Ma.get(t);if(!d)return u;for(const m of d){const b=r.Fa.get(m);u=u.unionWith(b.view.Va)}return u}}function K0(a,t){return qd.apply(this,arguments)}function qd(){return(qd=(0,ee.A)(function*(a,t){const r=Nt(a),o=yield Gt(r.localStore,t.query,!0),u=t.view.ba(o);return r.isPrimaryClient&&Wd(r,t.targetId,u.wa),u})).apply(this,arguments)}function Qd(a,t){return Og.apply(this,arguments)}function Og(){return(Og=(0,ee.A)(function*(a,t){const r=Nt(a);return $n(r.localStore,t).then(o=>Oa(r,o))})).apply(this,arguments)}function z_(a,t,r,o){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,ee.A)(function*(a,t,r,o){const u=Nt(a),d=yield function(b,F){const H=Nt(b),re=Nt(H.mutationQueue);return H.persistence.runTransaction("Lookup mutation documents","readonly",fe=>re.Mn(fe,F).next(Me=>Me?H.localDocuments.getDocuments(fe,Me):Re.resolve(null)))}(u.localStore,t);var F;null!==d?("pending"===r?yield hc(u.remoteStore):"acknowledged"===r||"rejected"===r?(zd(u,t,o||null),Pg(u,t),F=t,Nt(Nt(u.localStore).mutationQueue).On(F)):St(),yield Oa(u,d)):nt("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function Xd(){return(Xd=(0,ee.A)(function*(a,t){const r=Nt(a);if(Fg(r),Zu(r),!0===t&&!0!==r.Qa){const o=r.sharedClientState.getAllActiveQueryTargets(),u=yield xg(r,o.toArray());r.Qa=!0,yield lg(r.remoteStore,!0);for(const d of u)Bd(r.remoteStore,d)}else if(!1===t&&!1!==r.Qa){const o=[];let u=Promise.resolve();r.Ma.forEach((d,m)=>{r.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(uu(r,m),Fe(r.localStore,m,!0))),so(r.remoteStore,m)}),yield u,yield xg(r,o),function(m){const b=Nt(m);b.Na.forEach((F,H)=>{so(b.remoteStore,H)}),b.La.pr(),b.Na=new Map,b.Oa=new Sr(we.comparator)}(r),r.Qa=!1,yield lg(r.remoteStore,!1)}})).apply(this,arguments)}function xg(a,t,r){return kg.apply(this,arguments)}function kg(){return(kg=(0,ee.A)(function*(a,t,r){const o=Nt(a),u=[],d=[];for(const m of t){let b;const F=o.Ma.get(m);if(F&&0!==F.length){b=yield ae(o.localStore,qi(F[0]));for(const H of F){const re=o.Fa.get(H),fe=yield K0(o,re);fe.snapshot&&d.push(fe.snapshot)}}else{const H=yield Dn(o.localStore,m);b=yield ae(o.localStore,H),yield Tg(o,W_(H),m,!1,b.resumeToken)}u.push(b)}return o.Ca.d_(d),u})).apply(this,arguments)}function W_(a){return ii(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function Yd(a){return r=Nt(a).localStore,Nt(Nt(r).persistence).Qi();var r}function K_(a,t,r,o){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,ee.A)(function*(a,t,r,o){const u=Nt(a);if(u.Qa)return void nt("SyncEngine","Ignoring unexpected query state notification.");const d=u.Ma.get(t);if(d&&d.length>0)switch(r){case"current":case"not-current":{const m=yield $n(u.localStore,he(d[0])),b=rc.createSynthesizedRemoteEventForCurrentChange(t,"current"===r,zr.EMPTY_BYTE_STRING);yield Oa(u,m,b);break}case"rejected":yield Fe(u.localStore,t,!0),uu(u,t,o);break;default:St()}})).apply(this,arguments)}function pE(a,t,r){return q_.apply(this,arguments)}function q_(){return(q_=(0,ee.A)(function*(a,t,r){const o=Fg(a);if(o.Qa){for(const u of t){if(o.Ma.has(u)&&o.sharedClientState.isActiveQueryTarget(u)){nt("SyncEngine","Adding an already active target "+u);continue}const d=yield Dn(o.localStore,u),m=yield ae(o.localStore,d);yield Tg(o,W_(d),m.targetId,!1,m.resumeToken),Bd(o.remoteStore,m)}for(const u of r)o.Ma.has(u)&&(yield Fe(o.localStore,u,!1).then(()=>{so(o.remoteStore,u),uu(o,u)}).catch(Mn))}})).apply(this,arguments)}function Fg(a){const t=Nt(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=H_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Af.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=z0.bind(null,t),t.Ca.d_=oE.bind(null,t.eventManager),t.Ca.$a=k_.bind(null,t.eventManager),t}function Zu(a){const t=Nt(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hE.bind(null,t),t}class kc{constructor(){this.synchronizeTabs=!1}initialize(t){var r=this;return(0,ee.A)(function*(){r.serializer=su(t.databaseInfo.databaseId),r.sharedClientState=r.createSharedClientState(t),r.persistence=r.createPersistence(t),yield r.persistence.start(),r.localStore=r.createLocalStore(t),r.gcScheduler=r.createGarbageCollectionScheduler(t,r.localStore),r.indexBackfillerScheduler=r.createIndexBackfillerScheduler(t,r.localStore)})()}createGarbageCollectionScheduler(t,r){return null}createIndexBackfillerScheduler(t,r){return null}createLocalStore(t){return ru(this.persistence,new Jp,t.initialUser,this.serializer)}createPersistence(t){return new Nc($u.Zr,this.serializer)}createSharedClientState(t){return new qa}terminate(){var t=this;return(0,ee.A)(function*(){var r,o;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(o=t.indexBackfillerScheduler)||void 0===o||o.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class Lg extends kc{constructor(t,r,o){super(),this.Wa=t,this.cacheSizeBytes=r,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(t){var r=()=>super.initialize,o=this;return(0,ee.A)(function*(){yield r().call(o,t),yield o.Wa.initialize(o,t),yield Zu(o.Wa.syncEngine),yield hc(o.Wa.remoteStore),yield o.persistence.yi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return ru(this.persistence,new Jp,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,r){return new Nl(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,r)}createIndexBackfillerScheduler(t,r){const o=new cn(r,this.persistence);return new kt(t.asyncQueue,o)}createPersistence(t){const r=xd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?bs.withCacheSize(this.cacheSizeBytes):bs.DEFAULT;return new Ll(this.synchronizeTabs,r,t.clientId,o,t.asyncQueue,eg(),Hl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new qa}}class Ug extends Lg{constructor(t,r){super(t,r,!1),this.Wa=t,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(t){var r=()=>super.initialize,o=this;return(0,ee.A)(function*(){yield r().call(o,t);const u=o.Wa.syncEngine;o.sharedClientState instanceof dc&&(o.sharedClientState.syncEngine={no:z_.bind(null,u),ro:K_.bind(null,u),io:pE.bind(null,u),Qi:Yd.bind(null,u),eo:Qd.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.yi(function(){var d=(0,ee.A)(function*(m){yield function fE(a,t){return Xd.apply(this,arguments)}(o.Wa.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start():m||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(m&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():m||o.indexBackfillerScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}createSharedClientState(t){const r=eg();if(!dc.D(r))throw new Rt(Ze.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=xd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new dc(r,t.asyncQueue,o,t.clientId,t.initialUser)}}class du{initialize(t,r){var o=this;return(0,ee.A)(function*(){o.localStore||(o.localStore=t.localStore,o.sharedClientState=t.sharedClientState,o.datastore=o.createDatastore(r),o.remoteStore=o.createRemoteStore(r),o.eventManager=o.createEventManager(r),o.syncEngine=o.createSyncEngine(r,!t.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Df(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Rg.bind(null,o.syncEngine),yield lg(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(t){return new x_}createDatastore(t){const r=su(t.databaseInfo.databaseId),o=new Zv(t.databaseInfo);return new D_(t.authCredentials,t.appCheckCredentials,o,r)}createRemoteStore(t){return o=this.localStore,u=this.datastore,d=t.asyncQueue,m=r=>Df(this.syncEngine,r,0),b=C_.D()?new C_:new Ss,new A_(o,u,d,m,b);var o,u,d,m,b}createSyncEngine(t,r){return function(u,d,m,b,F,H,re){const fe=new cE(u,d,m,b,F,H);return re&&(fe.Qa=!0),fe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,ee.A)(function*(){var r,o,u;yield(u=(0,ee.A)(function*(m){const b=Nt(m);nt("RemoteStore","RemoteStore shutting down."),b.L_.add(5),yield Ud(b),b.k_.shutdown(),b.q_.set("Unknown")}),function d(m){return u.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(o=t.eventManager)||void 0===o||o.terminate()})()}}function Zd(a,t=10240){let r=0;return{read:()=>(0,ee.A)(function*(){if(r<a.byteLength){const o={value:a.slice(r,r+t),done:!1};return r+=t,o}return{done:!0}})(),cancel:()=>(0,ee.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class el{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):Cn("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,r){this.muted||setTimeout(()=>{this.muted||t(r)},0)}}class Q_{constructor(t,r){this.ja=t,this.serializer=r,this.metadata=new Qn,this.buffer=new Uint8Array,this.Ha=new TextDecoder("utf-8"),this.Ja().then(o=>{o&&o.ua()?this.metadata.resolve(o.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.aa)}`))},o=>this.metadata.reject(o))}close(){return this.ja.cancel()}getMetadata(){var t=this;return(0,ee.A)(function*(){return t.metadata.promise})()}Ua(){var t=this;return(0,ee.A)(function*(){return yield t.getMetadata(),t.Ja()})()}Ja(){var t=this;return(0,ee.A)(function*(){const r=yield t.Ya();if(null===r)return null;const o=t.Ha.decode(r),u=Number(o);isNaN(u)&&t.Za(`length string (${o}) is not valid number`);const d=yield t.Xa(u);return new V_(JSON.parse(d),r.length+u)})()}eu(){return this.buffer.findIndex(t=>123===t)}Ya(){var t=this;return(0,ee.A)(function*(){for(;t.eu()<0&&!(yield t.tu()););if(0===t.buffer.length)return null;const r=t.eu();r<0&&t.Za("Reached the end of bundle when a length string is expected.");const o=t.buffer.slice(0,r);return t.buffer=t.buffer.slice(r),o})()}Xa(t){var r=this;return(0,ee.A)(function*(){for(;r.buffer.length<t;)(yield r.tu())&&r.Za("Reached the end of bundle when more is expected.");const o=r.Ha.decode(r.buffer.slice(0,t));return r.buffer=r.buffer.slice(t),o})()}Za(t){throw this.ja.cancel(),new Error(`Invalid bundle format: ${t}`)}tu(){var t=this;return(0,ee.A)(function*(){const r=yield t.ja.read();if(!r.done){const o=new Uint8Array(t.buffer.length+r.value.length);o.set(t.buffer),o.set(r.value,t.buffer.length),t.buffer=o}return r.done})()}}class X_{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){var r=this;return(0,ee.A)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new Rt(Ze.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const o=yield(u=(0,ee.A)(function*(m,b){const F=Nt(m),H={documents:b.map(at=>Xc(F.serializer,at))},re=yield F.Lo("BatchGetDocuments",F.serializer.databaseId,On.emptyPath(),H,b.length),fe=new Map;re.forEach(at=>{const $t=function Wp(a,t){return"found"in t?function(o,u){mt(!!u.found);const d=ya(o,u.found.name),m=ki(u.found.updateTime),b=u.found.createTime?ki(u.found.createTime):Zt.min(),F=new Zr({mapValue:{fields:u.found.fields}});return sr.newFoundDocument(d,m,b,F)}(a,t):"missing"in t?function(o,u){mt(!!u.missing),mt(!!u.readTime);const d=ya(o,u.missing),m=ki(u.readTime);return sr.newNoDocument(d,m)}(a,t):St()}(F.serializer,at);fe.set($t.key.toString(),$t)});const Me=[];return b.forEach(at=>{const $t=fe.get(at.toString());mt(!!$t),Me.push($t)}),Me}),function d(m,b){return u.apply(this,arguments)})(r.datastore,t);var u;return o.forEach(u=>r.recordVersion(u)),o})()}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(t.toString())}delete(t){this.write(new js(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,ee.A)(function*(){if(t.ensureCommitNotCalled(),t.lastTransactionError)throw t.lastTransactionError;const r=t.readVersions;var o;t.mutations.forEach(o=>{r.delete(o.key.toString())}),r.forEach((o,u)=>{const d=we.fromPath(u);t.mutations.push(new mi(d,t.precondition(d)))}),yield(o=(0,ee.A)(function*(d,m){const b=Nt(d),F={writes:m.map(H=>Ou(b.serializer,H))};yield b.Mo("Commit",b.serializer.databaseId,On.emptyPath(),F)}),function u(d,m){return o.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw St();r=Zt.min()}const o=this.readVersions.get(t.key.toString());if(o){if(!r.isEqual(o))throw new Rt(Ze.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(Zt.min())?gn.exists(!1):gn.updateTime(r):gn.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(Zt.min()))throw new Rt(Ze.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gn.updateTime(r)}return gn.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class Y_{constructor(t,r,o,u,d){this.asyncQueue=t,this.datastore=r,this.options=o,this.updateFunction=u,this.deferred=d,this.nu=o.maxAttempts,this.t_=new hf(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){var t=this;this.t_.Go((0,ee.A)(function*(){const r=new X_(t.datastore),o=t.su(r);o&&o.then(u=>{t.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{t.deferred.resolve(u)}).catch(d=>{t.ou(d)}))}).catch(u=>{t.ou(u)})}))}su(t){try{const r=this.updateFunction(t);return!ve(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ou(t){this.nu>0&&this._u(t)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(t)}_u(t){if("FirebaseError"===t.name){const r=t.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!Dc(r)}return!1}}class bf{constructor(t,r,o,u){var d=this;this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=o,this.databaseInfo=u,this.user=nn.UNAUTHENTICATED,this.clientId=Ui.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,ee.A)(function*(b){nt("FirestoreClient","Received user=",b.uid),yield d.authCredentialListener(b),d.user=b});return function(b){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(nt("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Rt(Ze.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const r=new Qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ee.A)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),r.resolve()}catch(o){const u=au(o,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function ql(a,t){return hu.apply(this,arguments)}function hu(){return hu=(0,ee.A)(function*(a,t){a.asyncQueue.verifyOperationInProgress(),nt("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield t.initialize(r);let o=r.initialUser;a.setCredentialChangeListener(function(){var u=(0,ee.A)(function*(d){o.isEqual(d)||(yield Zp(t.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=t}),hu.apply(this,arguments)}function Bg(a,t){return jg.apply(this,arguments)}function jg(){return(jg=(0,ee.A)(function*(a,t){a.asyncQueue.verifyOperationInProgress();const r=yield Ql(a);nt("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(r,a.configuration),a.setCredentialChangeListener(o=>N_(t.remoteStore,o)),a.setAppCheckTokenChangeListener((o,u)=>N_(t.remoteStore,u)),a._onlineComponents=t})).apply(this,arguments)}function mE(a){return"FirebaseError"===a.name?a.code===Ze.FAILED_PRECONDITION||a.code===Ze.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code}function Ql(a){return eh.apply(this,arguments)}function eh(){return(eh=(0,ee.A)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){nt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ql(a,a._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!mE(r))throw r;Gn("Error using user provided cache. Falling back to memory cache: "+r),yield ql(a,new kc)}}else nt("FirestoreClient","Using default OfflineComponentProvider"),yield ql(a,new kc);return a._offlineComponents})).apply(this,arguments)}function th(a){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,ee.A)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(nt("FirestoreClient","Using user provided OnlineComponentProvider"),yield Bg(a,a._uninitializedComponentsProvider._online)):(nt("FirestoreClient","Using default OnlineComponentProvider"),yield Bg(a,new du))),a._onlineComponents})).apply(this,arguments)}function $g(a){return Ql(a).then(t=>t.persistence)}function tl(a){return Ql(a).then(t=>t.localStore)}function J_(a){return th(a).then(t=>t.remoteStore)}function Hg(a){return th(a).then(t=>t.syncEngine)}function Xl(a){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,ee.A)(function*(a){const t=yield th(a),r=t.eventManager;return r.onListen=uE.bind(null,t.syncEngine),r.onUnlisten=lE.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=B_.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Dg.bind(null,t.syncEngine),r})).apply(this,arguments)}function yE(a,t,r={}){const o=new Qn;return a.asyncQueue.enqueueAndForget((0,ee.A)(function*(){return function(d,m,b,F,H){const re=new el({next:Me=>{m.enqueueAndForget(()=>fg(d,fe));const at=Me.docs.has(b);!at&&Me.fromCache?H.reject(new Rt(Ze.UNAVAILABLE,"Failed to get document because the client is offline.")):at&&Me.fromCache&&F&&"server"===F.source?H.reject(new Rt(Ze.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(Me)},error:Me=>H.reject(Me)}),fe=new mg(Ni(b.path),re,{includeMetadataChanges:!0,_a:!0});return hg(d,fe)}(yield Xl(a),a.asyncQueue,t,r,o)})),o.promise}function vE(a,t,r={}){const o=new Qn;return a.asyncQueue.enqueueAndForget((0,ee.A)(function*(){return function(d,m,b,F,H){const re=new el({next:Me=>{m.enqueueAndForget(()=>fg(d,fe)),Me.fromCache&&"server"===F.source?H.reject(new Rt(Ze.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(Me)},error:Me=>H.reject(Me)}),fe=new mg(b,re,{includeMetadataChanges:!0,_a:!0});return hg(d,fe)}(yield Xl(a),a.asyncQueue,t,r,o)})),o.promise}function Pf(a){const t={};return void 0!==a.timeoutSeconds&&(t.timeoutSeconds=a.timeoutSeconds),t}const fc=new Map;function nl(a,t,r){if(!r)throw new Rt(Ze.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function zg(a,t,r,o){if(!0===t&&!0===o)throw new Rt(Ze.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function Wg(a){if(!we.isDocumentKey(a))throw new Rt(Ze.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Kg(a){if(we.isDocumentKey(a))throw new Rt(Ze.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function qg(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const t=(o=a).constructor?o.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var o;return"function"==typeof a?"a function":St()}function jr(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new Rt(Ze.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=qg(a);throw new Rt(Ze.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return a}function TE(a,t){if(t<=0)throw new Rt(Ze.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${t}.`)}class Mf{constructor(t){var r,o;if(void 0===t.host){if(void 0!==t.ssl)throw new Rt(Ze.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(r=t.ssl)||void 0===r||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Rt(Ze.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Pf(null!==(o=t.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new Rt(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new Rt(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new Rt(Ze.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rl{constructor(t,r,o,u){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Rt(Ze.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Rt(Ze.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mf(t),void 0!==t.credentials&&(this._authCredentials=function(o){if(!o)return new bn;switch(o.type){case"firstParty":return new Hr(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Rt(Ze.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const o=fc.get(r);o&&(nt("ComponentProvider","Removing Datastore"),fc.delete(r),o.terminate())}(this),Promise.resolve()}}class Mo{constructor(t,r,o){this.converter=r,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new Mo(this.firestore,t,this._query)}}class Xi{constructor(t,r,o){this.converter=r,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Xi(this.firestore,t,this._key)}}class pc extends Mo{constructor(t,r,o){super(t,r,Ni(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Xi(this.firestore,null,new we(t))}withConverter(t){return new pc(this.firestore,t,this._path)}}function ty(a,t,...r){if(a=(0,ue.Ku)(a),nl("collection","path",t),a instanceof rl){const o=On.fromString(t,...r);return Kg(o),new pc(a,null,o)}{if(!(a instanceof Xi||a instanceof pc))throw new Rt(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(On.fromString(t,...r));return Kg(o),new pc(a.firestore,null,o)}}function Rf(a,t,...r){if(a=(0,ue.Ku)(a),1===arguments.length&&(t=Ui.newId()),nl("doc","path",t),a instanceof rl){const o=On.fromString(t,...r);return Wg(o),new Xi(a,null,new we(o))}{if(!(a instanceof Xi||a instanceof pc))throw new Rt(Ze.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(On.fromString(t,...r));return Wg(o),new Xi(a.firestore,a instanceof pc?a.converter:null,new we(o))}}function ny(a,t){return a=(0,ue.Ku)(a),t=(0,ue.Ku)(t),(a instanceof Xi||a instanceof pc)&&(t instanceof Xi||t instanceof pc)&&a.firestore===t.firestore&&a.path===t.path&&a.converter===t.converter}function Of(a,t){return a=(0,ue.Ku)(a),t=(0,ue.Ku)(t),a instanceof Mo&&t instanceof Mo&&a.firestore===t.firestore&&C(a._query,t._query)&&a.converter===t.converter}class ry{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new hf(this,"async_queue_retry"),this.Eu=()=>{const r=Hl();r&&nt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()};const t=Hl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;const r=Hl();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise(()=>{});const r=new Qn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.uu.push(t),this.Ru()))}Ru(){var t=this;return(0,ee.A)(function*(){if(0!==t.uu.length){try{yield t.uu[0](),t.uu.shift(),t.t_.reset()}catch(r){if(!is(r))throw r;nt("AsyncQueue","Operation failed with retryable error: "+r)}t.uu.length>0&&t.t_.Go(()=>t.Ru())}})()}Au(t){const r=this.au.then(()=>(this.Pu=!0,t().catch(o=>{throw this.hu=o,this.Pu=!1,Cn("INTERNAL UNHANDLED ERROR: ",function(m){let b=m.message||"";return m.stack&&(b=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),b}(o)),o}).then(o=>(this.Pu=!1,o))));return this.au=r,r}enqueueAfterDelay(t,r,o){this.du(),this.Tu.indexOf(t)>-1&&(r=0);const u=Po.createAndSchedule(this,t,r,o,d=>this.Vu(d));return this.lu.push(u),u}du(){this.hu&&St()}verifyOperationInProgress(){}mu(){var t=this;return(0,ee.A)(function*(){let r;do{r=t.au,yield r}while(r!==t.au)})()}fu(t){for(const r of this.lu)if(r.timerId===t)return!0;return!1}gu(t){return this.mu().then(()=>{this.lu.sort((r,o)=>r.targetTimeMs-o.targetTimeMs);for(const r of this.lu)if(r.skipDelay(),"all"!==t&&r.timerId===t)break;return this.mu()})}pu(t){this.Tu.push(t)}Vu(t){const r=this.lu.indexOf(t);this.lu.splice(r,1)}}function Qg(a){return function(r,o){if("object"!=typeof r||null===r)return!1;const u=r;for(const d of["next","error","complete"])if(d in u&&"function"==typeof u[d])return!0;return!1}(a)}class bE{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,r,o){this._progressObserver={next:t,error:r,complete:o}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,r){return this._taskCompletionResolver.promise.then(t,r)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class yi extends rl{constructor(t,r,o,u){super(t,r,o,u),this.type="firestore",this._queue=new ry,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||il(this),this._firestoreClient.terminate()}}function as(a){return a._firestoreClient||il(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function il(a){var t,r,o;const u=a._freezeSettings(),d=(F=(null===(t=a._app)||void 0===t?void 0:t.options.appId)||"",new Ys(a._databaseId,F,a._persistenceKey,(re=u).host,re.ssl,re.experimentalForceLongPolling,re.experimentalAutoDetectLongPolling,Pf(re.experimentalLongPollingOptions),re.useFetchStreams));var F,re;a._firestoreClient=new bf(a._authCredentials,a._appCheckCredentials,a._queue,d),null!==(r=u.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(a._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Nf(a,t,r){const o=new Qn;return a.asyncQueue.enqueue((0,ee.A)(function*(){try{yield ql(a,r),yield Bg(a,t),o.resolve()}catch(u){const d=u;if(!mE(d))throw d;Gn("Error enabling indexeddb cache. Falling back to memory cache: "+d),o.reject(d)}})).then(()=>o.promise)}function NE(a){if(a._initialized||a._terminated)throw new Rt(Ze.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gc(zr.fromBase64String(t))}catch(r){throw new Rt(Ze.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new gc(zr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Vc{constructor(...t){for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Rt(Ze.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ke(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class sl{constructor(t){this._methodName=t}}class xf{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Rt(Ze.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Rt(Ze.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return zt(this._lat,t._lat)||zt(this._long,t._long)}}class kf{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(o,u){if(o.length!==u.length)return!1;for(let d=0;d<o.length;++d)if(o[d]!==u[d])return!1;return!0}(this._values,t._values)}}const FE=/^__.*__$/;class VE{constructor(t,r,o){this.data=t,this.fieldMask=r,this.fieldTransforms=o}toMutation(t,r){return null!==this.fieldMask?new pr(t,this.data,this.fieldMask,r,this.fieldTransforms):new In(t,this.data,r,this.fieldTransforms)}}class cy{constructor(t,r,o){this.data=t,this.fieldMask=r,this.fieldTransforms=o}toMutation(t,r){return new pr(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Ff(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw St()}}class Xg{constructor(t,r,o,u,d,m){this.settings=t,this.databaseId=r,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===d&&this.yu(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new Xg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(t),u=this.Su({path:o,Du:!1});return u.vu(t),u}Cu(t){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(t),u=this.Su({path:o,Du:!1});return u.yu(),u}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return ih(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return void 0!==this.fieldMask.find(r=>t.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>t.isPrefixOf(r.field))}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(0===t.length)throw this.Mu("Document fields must not be empty");if(Ff(this.wu)&&FE.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}}class eC{constructor(t,r,o){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=o||su(t)}Nu(t,r,o,u=!1){return new Xg({wu:t,methodName:r,Ou:o,path:ke.emptyPath(),Du:!1,xu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lc(a){const t=a._freezeSettings(),r=su(a._databaseId);return new eC(a._databaseId,!!t.ignoreUndefinedProperties,r)}function Yg(a,t,r,o,u,d={}){const m=a.Nu(d.merge||d.mergeFields?2:0,t,r,u);Lf("Data must be an object, but it was:",m,o);const b=dy(o,m);let F,H;if(d.merge)F=new Jr(m.fieldMask),H=m.fieldTransforms;else if(d.mergeFields){const re=[];for(const fe of d.mergeFields){const Me=mc(t,fe,r);if(!m.contains(Me))throw new Rt(Ze.INVALID_ARGUMENT,`Field '${Me}' is specified in your field mask but missing from your input data.`);UE(re,Me)||re.push(Me)}F=new Jr(re),H=m.fieldTransforms.filter(fe=>F.covers(fe.field))}else F=null,H=m.fieldTransforms;return new VE(new Zr(b),F,H)}class Vf extends sl{_toFieldTransform(t){if(2!==t.wu)throw t.Mu(1===t.wu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Vf}}function LE(a,t,r){return new Xg({wu:3,Ou:t.settings.Ou,methodName:a._methodName,Du:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class uy extends sl{_toFieldTransform(t){return new xt(t.path,new Es)}isEqual(t){return t instanceof uy}}class ly extends sl{constructor(t,r){super(t),this.Lu=r}_toFieldTransform(t){const r=LE(this,t,!0),o=this.Lu.map(d=>pu(d,r)),u=new Bs(o);return new xt(t.path,u)}isEqual(t){return t instanceof ly&&(0,ue.bD)(this.Lu,t.Lu)}}class Jg extends sl{constructor(t,r){super(t),this.Lu=r}_toFieldTransform(t){const r=LE(this,t,!0),o=this.Lu.map(d=>pu(d,r)),u=new $(o);return new xt(t.path,u)}isEqual(t){return t instanceof Jg&&(0,ue.bD)(this.Lu,t.Lu)}}class Yl extends sl{constructor(t,r){super(t),this.Bu=r}_toFieldTransform(t){const r=new B(t.serializer,ls(t.serializer,this.Bu));return new xt(t.path,r)}isEqual(t){return t instanceof Yl&&this.Bu===t.Bu}}function Jl(a,t,r,o){const u=a.Nu(1,t,r);Lf("Data must be an object, but it was:",u,o);const d=[],m=Zr.empty();Qs(o,(F,H)=>{const re=oa(t,F,r);H=(0,ue.Ku)(H);const fe=u.Cu(re);if(H instanceof Vf)d.push(re);else{const Me=pu(H,fe);null!=Me&&(d.push(re),m.set(re,Me))}});const b=new Jr(d);return new cy(m,b,u.fieldTransforms)}function rh(a,t,r,o,u,d){const m=a.Nu(1,t,r),b=[mc(t,o,r)],F=[u];if(d.length%2!=0)throw new Rt(Ze.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Me=0;Me<d.length;Me+=2)b.push(mc(t,d[Me])),F.push(d[Me+1]);const H=[],re=Zr.empty();for(let Me=b.length-1;Me>=0;--Me)if(!UE(H,b[Me])){const at=b[Me];let $t=F[Me];$t=(0,ue.Ku)($t);const tn=m.Cu(at);if($t instanceof Vf)H.push(at);else{const Qt=pu($t,tn);null!=Qt&&(H.push(at),re.set(at,Qt))}}const fe=new Jr(H);return new cy(re,fe,m.fieldTransforms)}function Zg(a,t,r,o=!1){return pu(r,a.Nu(o?4:3,t))}function pu(a,t){if(hy(a=(0,ue.Ku)(a)))return Lf("Unsupported field value:",t,a),dy(a,t);if(a instanceof sl)return function(o,u){if(!Ff(u.wu))throw u.Mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Mu(`${o._methodName}() is not currently supported inside arrays`);const d=o._toFieldTransform(u);d&&u.fieldTransforms.push(d)}(a,t),null;if(void 0===a&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.Du&&4!==t.wu)throw t.Mu("Nested arrays are not supported");return function(o,u){const d=[];let m=0;for(const b of o){let F=pu(b,u.Fu(m));null==F&&(F={nullValue:"NULL_VALUE"}),d.push(F),m++}return{arrayValue:{values:d}}}(a,t)}return function(o,u){if(null===(o=(0,ue.Ku)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return ls(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const d=Jt.fromDate(o);return{timestampValue:ic(u.serializer,d)}}if(o instanceof Jt){const d=new Jt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:ic(u.serializer,d)}}if(o instanceof xf)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof gc)return{bytesValue:Qc(u.serializer,o._byteString)};if(o instanceof Xi){const d=u.databaseId,m=o.firestore._databaseId;if(!m.isEqual(d))throw u.Mu(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Mu(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof kf)return b=u,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(F=>{if("number"!=typeof F)throw b.Mu("VectorValues must only contain numeric values.");return Os(b.serializer,F)})}}}}};var b;throw u.Mu(`Unsupported field value: ${qg(o)}`)}(a,t)}function dy(a,t){const r={};return Rs(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qs(a,(o,u)=>{const d=pu(u,t.bu(o));null!=d&&(r[o]=d)}),{mapValue:{fields:r}}}function hy(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof Jt||a instanceof xf||a instanceof gc||a instanceof Xi||a instanceof sl||a instanceof kf)}function Lf(a,t,r){if(!hy(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=qg(r);throw t.Mu("an object"===o?a+" a custom object":a+" "+o)}var u}function mc(a,t,r){if((t=(0,ue.Ku)(t))instanceof Vc)return t._internalPath;if("string"==typeof t)return oa(a,t);throw ih("Field path arguments must be of type string or ",a,!1,void 0,r)}const Ea=new RegExp("[~\\*/\\[\\]]");function oa(a,t,r){if(t.search(Ea)>=0)throw ih(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new Vc(...t.split("."))._internalPath}catch{throw ih(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function ih(a,t,r,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let b=`Function ${t}() called with invalid data`;r&&(b+=" (via `toFirestore()`)"),b+=". ";let F="";return(d||m)&&(F+=" (found",d&&(F+=` in field ${o}`),m&&(F+=` in document ${u}`),F+=")"),new Rt(Ze.INVALID_ARGUMENT,b+a+F)}function UE(a,t){return a.some(r=>r.isEqual(t))}class sh{constructor(t,r,o,u,d){this._firestore=t,this._userDataWriter=r,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Xi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new tC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(em("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r)}}}class tC extends sh{data(){return super.data()}}function em(a,t){return"string"==typeof t?oa(a,t):t instanceof Vc?t._internalPath:t._delegate._internalPath}function tm(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new Rt(Ze.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class Bf extends Uf{}function Xa(a,t,...r){let o=[];t instanceof Uf&&o.push(t),o=o.concat(r),function(d){const m=d.filter(F=>F instanceof Zl).length,b=d.filter(F=>F instanceof ol).length;if(m>1||m>0&&b>0)throw new Rt(Ze.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)a=u._apply(a);return a}class ol extends Bf{constructor(t,r,o){super(),this._field=t,this._op=r,this._value=o,this.type="where"}static _create(t,r,o){return new ol(t,r,o)}_apply(t){const r=this._parse(t);return my(t._query,r),new Mo(t.firestore,t.converter,Ao(t._query,r))}_parse(t){const r=Lc(t.firestore);return function(d,m,b,F,H,re,fe){let Me;if(H.isKeyField()){if("array-contains"===re||"array-contains-any"===re)throw new Rt(Ze.INVALID_ARGUMENT,`Invalid Query. You can't perform '${re}' queries on documentId().`);if("in"===re||"not-in"===re){gy(fe,re);const at=[];for(const $t of fe)at.push(Hf(F,d,$t));Me={arrayValue:{values:at}}}else Me=Hf(F,d,fe)}else"in"!==re&&"not-in"!==re&&"array-contains-any"!==re||gy(fe,re),Me=Zg(b,"where",fe,"in"===re||"not-in"===re);return N.create(H,re,Me)}(t._query,0,r,t.firestore._databaseId,this._field,this._op,this._value)}}class Zl extends Uf{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Zl(t,r)}_parse(t){const r=this._queryConstraints.map(o=>o._parse(t)).filter(o=>o.getFilters().length>0);return 1===r.length?r[0]:Z.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return 0===r.getFilters().length?t:(function(u,d){let m=u;const b=d.getFlattenedFilters();for(const F of b)my(m,F),m=Ao(m,F)}(t._query,r),new Mo(t.firestore,t.converter,Ao(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class jf extends Bf{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new jf(t,r)}_apply(t){const r=function(u,d,m){if(null!==u.startAt)throw new Rt(Ze.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Rt(Ze.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fi(d,m)}(t._query,this._field,this._direction);return new Mo(t.firestore,t.converter,function(u,d){const m=u.explicitOrderBy.concat([d]);return new Wr(u.path,u.collectionGroup,m,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(t._query,r))}}class al extends Bf{constructor(t,r,o){super(),this.type=t,this._limit=r,this._limitType=o}static _create(t,r,o){return new al(t,r,o)}_apply(t){return new Mo(t.firestore,t.converter,Y(t._query,this._limit,this._limitType))}}class ah extends Bf{constructor(t,r,o){super(),this.type=t,this._docOrFields=r,this._inclusive=o}static _create(t,r,o){return new ah(t,r,o)}_apply(t){const r=uh(t,this.type,this._docOrFields,this._inclusive);return new Mo(t.firestore,t.converter,(d=r,new Wr((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,d,u.endAt)));var u,d}}class $f extends Bf{constructor(t,r,o){super(),this.type=t,this._docOrFields=r,this._inclusive=o}static _create(t,r,o){return new $f(t,r,o)}_apply(t){const r=uh(t,this.type,this._docOrFields,this._inclusive);return new Mo(t.firestore,t.converter,(d=r,new Wr((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,d)));var u,d}}function uh(a,t,r,o){if(r[0]=(0,ue.Ku)(r[0]),r[0]instanceof sh)return function(d,m,b,F,H){if(!F)throw new Rt(Ze.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${b}().`);const re=[];for(const fe of vs(d))if(fe.field.isKeyField())re.push(Hi(m,F.key));else{const Me=F.data.field(fe.field);if(ps(Me))throw new Rt(Ze.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+fe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Me){const at=fe.field.canonicalString();throw new Rt(Ze.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${at}' (used as the orderBy) does not exist.`)}re.push(Me)}return new us(re,H)}(a._query,a.firestore._databaseId,t,r[0]._document,o);{const u=Lc(a.firestore);return function(m,b,F,H,re,fe){const Me=m.explicitOrderBy;if(re.length>Me.length)throw new Rt(Ze.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const at=[];for(let $t=0;$t<re.length;$t++){const tn=re[$t];if(Me[$t].field.isKeyField()){if("string"!=typeof tn)throw new Rt(Ze.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof tn}`);if(!ga(m)&&-1!==tn.indexOf("/"))throw new Rt(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${tn}' contains a slash.`);const Qt=m.path.child(On.fromString(tn));if(!we.isDocumentKey(Qt))throw new Rt(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${Qt}' is not because it contains an odd number of segments.`);const Vn=new we(Qt);at.push(Hi(b,Vn))}else{const Qt=Zg(F,H,tn);at.push(Qt)}}return new us(at,fe)}(a._query,a.firestore._databaseId,u,t,r,o)}}function Hf(a,t,r){if("string"==typeof(r=(0,ue.Ku)(r))){if(""===r)throw new Rt(Ze.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ga(t)&&-1!==r.indexOf("/"))throw new Rt(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const o=t.path.child(On.fromString(r));if(!we.isDocumentKey(o))throw new Rt(Ze.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Hi(a,new we(o))}if(r instanceof Xi)return Hi(a,r._key);throw new Rt(Ze.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qg(r)}.`)}function gy(a,t){if(!Array.isArray(a)||0===a.length)throw new Rt(Ze.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function my(a,t){const r=function(u,d){for(const m of u)for(const b of m.getFlattenedFilters())if(d.indexOf(b.op)>=0)return b.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw new Rt(Ze.INVALID_ARGUMENT,r===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class zf{convertValue(t,r="none"){switch(ji(t)){case 0:return null;case 1:return t.booleanValue;case 2:return hn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(oi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw St()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const o={};return Qs(t,(u,d)=>{o[u]=this.convertValue(d,r)}),o}convertVectorValue(t){var r,o,u;const d=null===(u=null===(o=null===(r=t.fields)||void 0===r?void 0:r.value.arrayValue)||void 0===o?void 0:o.values)||void 0===u?void 0:u.map(m=>hn(m.doubleValue));return new kf(d)}convertGeoPoint(t){return new xf(hn(t.latitude),hn(t.longitude))}convertArray(t,r){return(t.values||[]).map(o=>this.convertValue(o,r))}convertServerTimestamp(t,r){switch(r){case"previous":const o=ks(t);return null==o?null:this.convertValue(o,r);case"estimate":return this.convertTimestamp(gs(t));default:return null}}convertTimestamp(t){const r=ss(t);return new Jt(r.seconds,r.nanos)}convertDocumentKey(t,r){const o=On.fromString(t);mt(na(o));const u=new Ri(o.get(1),o.get(3)),d=new we(o.popFirst(5));return u.isEqual(r)||Cn(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),d}}function _c(a,t,r){let o;return o=a?r&&(r.merge||r.mergeFields)?a.toFirestore(t,r):a.toFirestore(t):t,o}class _y extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new gc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Xi(this.firestore,null,r)}}class gu{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class yc extends sh{constructor(t,r,o,u,d,m){super(t,r,o,u,m),this._firestore=t,this._firestoreImpl=t,this.metadata=d}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const o=this._document.data.field(em("DocumentSnapshot.get",t));if(null!==o)return this._userDataWriter.convertValue(o,r.serverTimestamps)}}}class ed extends yc{data(t={}){return super.data(t)}}class vc{constructor(t,r,o,u){this._firestore=t,this._userDataWriter=r,this._snapshot=u,this.metadata=new gu(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,r){this._snapshot.docs.forEach(o=>{t.call(r,new ed(this._firestore,this._userDataWriter,o.key,o,new gu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Rt(Ze.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,d){if(u._snapshot.oldDocs.isEmpty()){let m=0;return u._snapshot.docChanges.map(b=>({type:"added",doc:new ed(u._firestore,u._userDataWriter,b.doc.key,b.doc,new gu(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:m++}))}{let m=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(b=>d||3!==b.type).map(b=>{const F=new ed(u._firestore,u._userDataWriter,b.doc.key,b.doc,new gu(u._snapshot.mutatedKeys.has(b.doc.key),u._snapshot.fromCache),u.query.converter);let H=-1,re=-1;return 0!==b.type&&(H=m.indexOf(b.doc.key),m=m.delete(b.doc.key)),1!==b.type&&(m=m.add(b.doc),re=m.indexOf(b.doc.key)),{type:yy(b.type),doc:F,oldIndex:H,newIndex:re}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function yy(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return St()}}function lh(a,t){return a instanceof yc&&t instanceof yc?a._firestore===t._firestore&&a._key.isEqual(t._key)&&(null===a._document?null===t._document:a._document.isEqual(t._document))&&a._converter===t._converter:a instanceof vc&&t instanceof vc&&a._firestore===t._firestore&&Of(a.query,t.query)&&a.metadata.isEqual(t.metadata)&&a._snapshot.isEqual(t._snapshot)}class Uc extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new gc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Xi(this.firestore,null,r)}}function Ey(a,t,r){a=jr(a,Xi);const o=jr(a.firestore,yi),u=_c(a.converter,t,r);return cl(o,[Yg(Lc(o),"setDoc",a._key,u,null!==a.converter,r).toMutation(a._key,gn.none())])}function am(a,t,r,...o){a=jr(a,Xi);const u=jr(a.firestore,yi),d=Lc(u);let m;return m="string"==typeof(t=(0,ue.Ku)(t))||t instanceof Vc?rh(d,"updateDoc",a._key,t,r,o):Jl(d,"updateDoc",a._key,t),cl(u,[m.toMutation(a._key,gn.exists(!0))])}function Iy(a,...t){var r,o,u;a=(0,ue.Ku)(a);let d={includeMetadataChanges:!1,source:"default"},m=0;"object"!=typeof t[m]||Qg(t[m])||(d=t[m],m++);const b={includeMetadataChanges:d.includeMetadataChanges,source:d.source};if(Qg(t[m])){const fe=t[m];t[m]=null===(r=fe.next)||void 0===r?void 0:r.bind(fe),t[m+1]=null===(o=fe.error)||void 0===o?void 0:o.bind(fe),t[m+2]=null===(u=fe.complete)||void 0===u?void 0:u.bind(fe)}let F,H,re;if(a instanceof Xi)H=jr(a.firestore,yi),re=Ni(a._key.path),F={next:fe=>{t[m]&&t[m](mr(H,a,fe))},error:t[m+1],complete:t[m+2]};else{const fe=jr(a,Mo);H=jr(fe.firestore,yi),re=fe._query;const Me=new Uc(H);F={next:at=>{t[m]&&t[m](new vc(H,Me,fe,at))},error:t[m+1],complete:t[m+2]},tm(a._query)}return function(Me,at,$t,tn){const Qt=new el(tn),Vn=new mg(at,Qt,$t);return Me.asyncQueue.enqueueAndForget((0,ee.A)(function*(){return hg(yield Xl(Me),Vn)})),()=>{Qt.za(),Me.asyncQueue.enqueueAndForget((0,ee.A)(function*(){return fg(yield Xl(Me),Vn)}))}}(as(H),re,b,F)}function cl(a,t){return function(o,u){const d=new Qn;return o.asyncQueue.enqueueAndForget((0,ee.A)(function*(){return function cu(a,t,r){return wf.apply(this,arguments)}(yield Hg(o),u,d)})),d.promise}(as(a),t)}function mr(a,t,r){const o=r.docs.get(t._key),u=new Uc(a);return new yc(a,u,t._key,o,new gu(r.hasPendingWrites,r.fromCache),t.converter)}const Py={maxAttempts:5};class qf{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Lc(t)}set(t,r,o){this._verifyNotCommitted();const u=mu(t,this._firestore),d=_c(u.converter,r,o),m=Yg(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,gn.none())),this}update(t,r,o,...u){this._verifyNotCommitted();const d=mu(t,this._firestore);let m;return m="string"==typeof(r=(0,ue.Ku)(r))||r instanceof Vc?rh(this._dataReader,"WriteBatch.update",d._key,r,o,u):Jl(this._dataReader,"WriteBatch.update",d._key,r),this._mutations.push(m.toMutation(d._key,gn.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=mu(t,this._firestore);return this._mutations=this._mutations.concat(new js(r._key,gn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Rt(Ze.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mu(a,t){if((a=(0,ue.Ku)(a)).firestore!==t)throw new Rt(Ze.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class QE extends class{constructor(r,o){this._firestore=r,this._transaction=o,this._dataReader=Lc(r)}get(r){const o=mu(r,this._firestore),u=new _y(this._firestore);return this._transaction.lookup([o._key]).then(d=>{if(!d||1!==d.length)return St();const m=d[0];if(m.isFoundDocument())return new sh(this._firestore,u,m.key,m,o.converter);if(m.isNoDocument())return new sh(this._firestore,u,o._key,null,o.converter);throw St()})}set(r,o,u){const d=mu(r,this._firestore),m=_c(d.converter,o,u),b=Yg(this._dataReader,"Transaction.set",d._key,m,null!==d.converter,u);return this._transaction.set(d._key,b),this}update(r,o,u,...d){const m=mu(r,this._firestore);let b;return b="string"==typeof(o=(0,ue.Ku)(o))||o instanceof Vc?rh(this._dataReader,"Transaction.update",m._key,o,u,d):Jl(this._dataReader,"Transaction.update",m._key,o),this._transaction.update(m._key,b),this}delete(r){const o=mu(r,this._firestore);return this._transaction.delete(o._key),this}}{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=mu(t,this._firestore),o=new Uc(this._firestore);return super.get(t).then(u=>new yc(this._firestore,o,r._key,u._document,new gu(!1,!1),r.converter))}}function pm(a,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Rt("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return t}function xy(){if(typeof Uint8Array>"u")throw new Rt("unimplemented","Uint8Arrays are not available in this environment.")}function ky(){if(!function hi(){return typeof atob<"u"}())throw new Rt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,r=!0){sn=je.SDK_VERSION,(0,je._registerComponent)(new Ne.uA("firestore",(o,{instanceIdentifier:u,options:d})=>{const m=o.getProvider("app").getImmediate(),b=new yi(new kr(o.getProvider("auth-internal")),new Rr(o.getProvider("app-check-internal")),function(H,re){if(!Object.prototype.hasOwnProperty.apply(H.options,["projectId"]))throw new Rt(Ze.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ri(H.options.projectId,re)}(m,u),m);return d=Object.assign({useFetchStreams:r},d),b._setSettings(d),b},"PUBLIC").setMultipleInstances(!0)),(0,je.registerVersion)(pn,"4.7.1",t),(0,je.registerVersion)(pn,"4.7.1","esm2017")}();class ph{constructor(t){this._delegate=t}static fromBase64String(t){return ky(),new ph(gc.fromBase64String(t))}static fromUint8Array(t){return xy(),new ph(gc.fromUint8Array(t))}toBase64(){return ky(),this._delegate.toBase64()}toUint8Array(){return xy(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Na(a){return function gm(a,t){if("object"!=typeof a||null===a)return!1;const r=a;for(const o of t)if(o in r&&"function"==typeof r[o])return!0;return!1}(a,["next","error","complete"])}class sI{enableIndexedDbPersistence(t,r){return function SE(a,t){NE(a=jr(a,yi));const r=as(a);if(r._uninitializedComponentsProvider)throw new Rt(Ze.FAILED_PRECONDITION,"SDK cache is already specified.");Gn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=a._freezeSettings(),u=new du;return Nf(r,u,new Lg(u,o.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(t){return function PE(a){NE(a=jr(a,yi));const t=as(a);if(t._uninitializedComponentsProvider)throw new Rt(Ze.FAILED_PRECONDITION,"SDK cache is already specified.");Gn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings(),o=new du;return Nf(t,o,new Ug(o,r.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function oy(a){if(a._initialized&&!a._terminated)throw new Rt(Ze.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Qn;return a._queue.enqueueAndForgetEvenWhileRestricted((0,ee.A)(function*(){try{yield(r=(0,ee.A)(function*(u){if(!Yr.D())return Promise.resolve();const d=u+"main";yield Yr.delete(d)}),function o(u){return r.apply(this,arguments)})(xd(a._databaseId,a._persistenceKey)),t.resolve()}catch(r){t.reject(r)}var r})),t.promise}(t._delegate)}}class Fy{constructor(t,r,o){this._delegate=r,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},t instanceof Ri||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const r=this._delegate._getSettings();!t.merge&&r.host!==t.host&&Gn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},r),t)).merge,this._delegate._setSettings(t)}useEmulator(t,r,o={}){!function DE(a,t,r,o={}){var u;const d=(a=jr(a,rl))._getSettings(),m=`${t}:${r}`;if("firestore.googleapis.com"!==d.host&&d.host!==m&&Gn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},d),{host:m,ssl:!1})),o.mockUserToken){let b,F;if("string"==typeof o.mockUserToken)b=o.mockUserToken,F=nn.MOCK_USER;else{b=(0,ue.Fy)(o.mockUserToken,null===(u=a._app)||void 0===u?void 0:u.options.projectId);const H=o.mockUserToken.sub||o.mockUserToken.user_id;if(!H)throw new Rt(Ze.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");F=new nn(H)}a._authCredentials=new Pn(new Zn(b,F))}}(this._delegate,t,r,o)}enableNetwork(){return function RE(a){return function fu(a){return a.asyncQueue.enqueue((0,ee.A)(function*(){const t=yield $g(a),r=yield J_(a);return t.setNetworkEnabled(!0),function(u){const d=Nt(u);return d.L_.delete(0),Ld(d)}(r)}))}(as(a=jr(a,yi)))}(this._delegate)}disableNetwork(){return function OE(a){return function nh(a){return a.asyncQueue.enqueue((0,ee.A)(function*(){const t=yield $g(a),r=yield J_(a);return t.setNetworkEnabled(!1),(o=(0,ee.A)(function*(d){const m=Nt(d);m.L_.add(0),yield Ud(m),m.q_.set("Offline")}),function u(d){return o.apply(this,arguments)})(r);var o}))}(as(a=jr(a,yi)))}(this._delegate)}enablePersistence(t){let r=!1,o=!1;return t&&(r=!!t.synchronizeTabs,o=!!t.experimentalForceOwningTab,zg("synchronizeTabs",r,"experimentalForceOwningTab",o)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ME(a){return function(r){const o=new Qn;return r.asyncQueue.enqueueAndForget((0,ee.A)(function*(){return function W0(a,t){return Kl.apply(this,arguments)}(yield Hg(r),o)})),o.promise}(as(a=jr(a,yi)))}(this._delegate)}onSnapshotsInSync(t){return function Cy(a,t){return function X0(a,t){const r=new el(t);return a.asyncQueue.enqueueAndForget((0,ee.A)(function*(){return u=yield Xl(a),d=r,Nt(u).Y_.add(d),void d.next();var u,d})),()=>{r.za(),a.asyncQueue.enqueueAndForget((0,ee.A)(function*(){return u=yield Xl(a),d=r,void Nt(u).Y_.delete(d);var u,d}))}}(as(a=jr(a,yi)),Qg(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Rt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new rd(this,ty(this._delegate,t))}catch(r){throw Ro(r,"collection()","Firestore.collection()")}}doc(t){try{return new Ia(this,Rf(this._delegate,t))}catch(r){throw Ro(r,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Wo(this,function AE(a,t){if(a=jr(a,rl),nl("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Rt(Ze.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mo(a,null,(o=t,new Wr(On.emptyPath(),o)));var o}(this._delegate,t))}catch(r){throw Ro(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function XE(a,t,r){a=jr(a,yi);const o=Object.assign(Object.assign({},Py),r);return function(d){if(d.maxAttempts<1)throw new Rt(Ze.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(d,m,b){const F=new Qn;return d.asyncQueue.enqueueAndForget((0,ee.A)(function*(){const H=yield function Z_(a){return th(a).then(t=>t.datastore)}(d);new Y_(d.asyncQueue,H,b,m,F).ru()})),F.promise}(as(a),u=>t(new QE(a,u)),o)}(this._delegate,r=>t(new mh(this,r)))}batch(){return as(this._delegate),new Xf(new qf(this._delegate,t=>cl(this._delegate,t)))}loadBundle(t){return function ay(a,t){const r=as(a=jr(a,yi)),o=new bE;return function ey(a,t,r,o){const u=function(m,b){let F;return F="string"==typeof m?_a().encode(m):m,re=function(re,fe){if(re instanceof Uint8Array)return Zd(re,void 0);if(re instanceof ArrayBuffer)return Zd(new Uint8Array(re),void 0);if(re instanceof ReadableStream)return re.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(F),new Q_(re,b);var re}(r,su(t));a.asyncQueue.enqueueAndForget((0,ee.A)(function*(){!function gE(a,t,r){const o=Nt(a);var u;(u=(0,ee.A)(function*(m,b,F){try{const H=yield b.getMetadata();if(yield function($t,tn){const Qt=Nt($t),Vn=ki(tn.createTime);return Qt.persistence.runTransaction("hasNewerBundle","readonly",qn=>Qt.Gr.getBundleMetadata(qn,tn.id)).then(qn=>!!qn&&qn.createTime.compareTo(Vn)>=0)}(m.localStore,H))return yield b.close(),F._completeWith({taskState:"Success",documentsLoaded:($t=H).totalDocuments,bytesLoaded:$t.totalBytes,totalDocuments:$t.totalDocuments,totalBytes:$t.totalBytes}),Promise.resolve(new Set);F._updateProgress(Gd(H));const re=new L_(H,m.localStore,b.serializer);let fe=yield b.Ua();for(;fe;){const at=yield re.la(fe);at&&F._updateProgress(at),fe=yield b.Ua()}const Me=yield re.complete();return yield Oa(m,Me.Ia,void 0),yield function($t,tn){const Qt=Nt($t);return Qt.persistence.runTransaction("Save bundle","readwrite",Vn=>Qt.Gr.saveBundleMetadata(Vn,tn))}(m.localStore,H),F._completeWith(Me.progress),Promise.resolve(Me.Pa)}catch(H){return Gn("SyncEngine",`Loading bundle failed with ${H}`),F._failWith(H),Promise.resolve(new Set)}var $t}),function d(m,b,F){return u.apply(this,arguments)})(o,t,r).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Hg(a),u,o)}))}(r,a._databaseId,t,o),o}(this._delegate,t)}namedQuery(t){return function Z0(a,t){return function EE(a,t){return a.asyncQueue.enqueue((0,ee.A)(function*(){return function(o,u){const d=Nt(o);return d.persistence.runTransaction("Get named query","readonly",m=>d.Gr.getNamedQuery(m,u))}(yield tl(a),t)}))}(as(a=jr(a,yi)),t).then(r=>r?new Mo(a,null,r.query):null)}(this._delegate,t).then(r=>r?new Wo(this,r):null)}}class gh extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new ph(new gc(t))}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return Ia.forKey(r,this.firestore,null)}}class mh{constructor(t,r){this._firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}get(t){const r=Ya(t);return this._delegate.get(r).then(o=>new ul(this._firestore,new yc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,r.converter)))}set(t,r,o){const u=Ya(t);return o?(pm("Transaction.set",o),this._delegate.set(u,r,o)):this._delegate.set(u,r),this}update(t,r,o,...u){const d=Ya(t);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...u),this}delete(t){const r=Ya(t);return this._delegate.delete(r),this}}class Xf{constructor(t){this._delegate=t}set(t,r,o){const u=Ya(t);return o?(pm("WriteBatch.set",o),this._delegate.set(u,r,o)):this._delegate.set(u,r),this}update(t,r,o,...u){const d=Ya(t);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...u),this}delete(t){const r=Ya(t);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class nd{constructor(t,r,o){this._firestore=t,this._userDataWriter=r,this._delegate=o}fromFirestore(t,r){const o=new ed(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Ca(this._firestore,o),r??{})}toFirestore(t,r){return r?this._delegate.toFirestore(t,r):this._delegate.toFirestore(t)}static getInstance(t,r){const o=nd.INSTANCES;let u=o.get(t);u||(u=new WeakMap,o.set(t,u));let d=u.get(r);return d||(d=new nd(t,new gh(t),r),u.set(r,d)),d}}nd.INSTANCES=new WeakMap;class Ia{constructor(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}static forPath(t,r,o){if(t.length%2!=0)throw new Rt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Ia(r,new Xi(r._delegate,o,new we(t)))}static forKey(t,r,o){return new Ia(r,new Xi(r._delegate,o,t))}get id(){return this._delegate.id}get parent(){return new rd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new rd(this.firestore,ty(this._delegate,t))}catch(r){throw Ro(r,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,ue.Ku)(t))instanceof Xi&&ny(this._delegate,t)}set(t,r){r=pm("DocumentReference.set",r);try{return r?Ey(this._delegate,t,r):Ey(this._delegate,t)}catch(o){throw Ro(o,"setDoc()","DocumentReference.set()")}}update(t,r,...o){try{return 1===arguments.length?am(this._delegate,t):am(this._delegate,t,r,...o)}catch(u){throw Ro(u,"updateDoc()","DocumentReference.update()")}}delete(){return function zE(a){return cl(jr(a.firestore,yi),[new js(a._key,gn.none())])}(this._delegate)}onSnapshot(...t){const r=mm(t),o=_h(t,u=>new ul(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Iy(this._delegate,r,o)}get(t){let r;return r="cache"===t?.source?function sm(a){a=jr(a,Xi);const t=jr(a.firestore,yi),r=as(t),o=new Uc(t);return function _E(a,t){const r=new Qn;return a.asyncQueue.enqueueAndForget((0,ee.A)(function*(){return(o=(0,ee.A)(function*(d,m,b){try{const F=yield function(re,fe){const Me=Nt(re);return Me.persistence.runTransaction("read document","readonly",at=>Me.localDocuments.getDocument(at,fe))}(d,m);F.isFoundDocument()?b.resolve(F):F.isNoDocument()?b.resolve(null):b.reject(new Rt(Ze.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(F){const H=au(F,`Failed to get document '${m} from cache`);b.reject(H)}}),function u(d,m,b){return o.apply(this,arguments)})(yield tl(a),t,r);var o})),r.promise}(r,a._key).then(u=>new yc(t,o,a._key,u,new gu(null!==u&&u.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===t?.source?function hh(a){a=jr(a,Xi);const t=jr(a.firestore,yi);return yE(as(t),a._key,{source:"server"}).then(r=>mr(t,a,r))}(this._delegate):function dh(a){a=jr(a,Xi);const t=jr(a.firestore,yi);return yE(as(t),a._key).then(r=>mr(t,a,r))}(this._delegate),r.then(o=>new ul(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(t){return new Ia(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}function Ro(a,t,r){return a.message=a.message.replace(t,r),a}function mm(a){for(const t of a)if("object"==typeof t&&!Na(t))return t;return{}}function _h(a,t){var r,o;let u;return u=Na(a[0])?a[0]:Na(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:d=>{u.next&&u.next(t(d))},error:null===(r=u.error)||void 0===r?void 0:r.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class ul{constructor(t,r){this._firestore=t,this._delegate=r}get ref(){return new Ia(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,r){return this._delegate.get(t,r)}isEqual(t){return lh(this._delegate,t._delegate)}}class Ca extends ul{data(t){const r=this._delegate.data(t);return this._delegate._converter||function ti(a,t){a||St()}(void 0!==r),r}}class Wo{constructor(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}where(t,r,o){try{return new Wo(this.firestore,Xa(this._delegate,function nm(a,t,r){const o=t,u=em("where",a);return ol._create(u,o,r)}(t,r,o)))}catch(u){throw Ro(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,r){try{return new Wo(this.firestore,Xa(this._delegate,function rm(a,t="asc"){const r=t,o=em("orderBy",a);return jf._create(o,r)}(t,r)))}catch(o){throw Ro(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Wo(this.firestore,Xa(this._delegate,function BE(a){return TE("limit",a),al._create("limit",a,"F")}(t)))}catch(r){throw Ro(r,"limit()","Query.limit()")}}limitToLast(t){try{return new Wo(this.firestore,Xa(this._delegate,function jE(a){return TE("limitToLast",a),al._create("limitToLast",a,"L")}(t)))}catch(r){throw Ro(r,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Wo(this.firestore,Xa(this._delegate,function $E(...a){return ah._create("startAt",a,!0)}(...t)))}catch(r){throw Ro(r,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Wo(this.firestore,Xa(this._delegate,function HE(...a){return ah._create("startAfter",a,!1)}(...t)))}catch(r){throw Ro(r,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Wo(this.firestore,Xa(this._delegate,function py(...a){return $f._create("endBefore",a,!1)}(...t)))}catch(r){throw Ro(r,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Wo(this.firestore,Xa(this._delegate,function ch(...a){return $f._create("endAt",a,!0)}(...t)))}catch(r){throw Ro(r,"endAt()","Query.endAt()")}}isEqual(t){return Of(this._delegate,t._delegate)}get(t){let r;return r="cache"===t?.source?function om(a){a=jr(a,Mo);const t=jr(a.firestore,yi),r=as(t),o=new Uc(t);return function q0(a,t){const r=new Qn;return a.asyncQueue.enqueueAndForget((0,ee.A)(function*(){return(o=(0,ee.A)(function*(d,m,b){try{const F=yield Gt(d,m,!0),H=new Eg(m,F.Ts),re=H.ma(F.documents),fe=H.applyChanges(re,!1);b.resolve(fe.snapshot)}catch(F){const H=au(F,`Failed to execute query '${m} against cache`);b.reject(H)}}),function u(d,m,b){return o.apply(this,arguments)})(yield tl(a),t,r);var o})),r.promise}(r,a._query).then(u=>new vc(t,o,a,u))}(this._delegate):"server"===t?.source?function Wf(a){a=jr(a,Mo);const t=jr(a.firestore,yi),r=as(t),o=new Uc(t);return vE(r,a._query,{source:"server"}).then(u=>new vc(t,o,a,u))}(this._delegate):function vy(a){a=jr(a,Mo);const t=jr(a.firestore,yi),r=as(t),o=new Uc(t);return tm(a._query),vE(r,a._query).then(u=>new vc(t,o,a,u))}(this._delegate),r.then(o=>new yh(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...t){const r=mm(t),o=_h(t,u=>new yh(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Iy(this._delegate,r,o)}withConverter(t){return new Wo(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}class oI{constructor(t,r){this._firestore=t,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Ca(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yh{constructor(t,r){this._firestore=t,this._delegate=r}get query(){return new Wo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Ca(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(r=>new oI(this._firestore,r))}forEach(t,r){this._delegate.forEach(o=>{t.call(r,new Ca(this._firestore,o))})}isEqual(t){return lh(this._delegate,t._delegate)}}class rd extends Wo{constructor(t,r){super(t,r),this.firestore=t,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Ia(this.firestore,t):null}doc(t){try{return new Ia(this.firestore,void 0===t?Rf(this._delegate):Rf(this._delegate,t))}catch(r){throw Ro(r,"doc()","CollectionReference.doc()")}}add(t){return function WE(a,t){const r=jr(a.firestore,yi),o=Rf(a),u=_c(a.converter,t);return cl(r,[Yg(Lc(a.firestore),"addDoc",o._key,u,null!==a.converter,{}).toMutation(o._key,gn.exists(!1))]).then(()=>o)}(this._delegate,t).then(r=>new Ia(this.firestore,r))}isEqual(t){return ny(this._delegate,t._delegate)}withConverter(t){return new rd(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}function Ya(a){return jr(a,Xi)}class Yf{constructor(...t){this._delegate=new Vc(...t)}static documentId(){return new Yf(ke.keyField().canonicalString())}isEqual(t){return(t=(0,ue.Ku)(t))instanceof Vc&&this._delegate._internalPath.isEqual(t._internalPath)}}class xa{constructor(t){this._delegate=t}static serverTimestamp(){const t=function YE(){return new uy("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new xa(t)}static delete(){const t=function My(){return new Vf("deleteField")}();return t._methodName="FieldValue.delete",new xa(t)}static arrayUnion(...t){const r=function JE(...a){return new ly("arrayUnion",a)}(...t);return r._methodName="FieldValue.arrayUnion",new xa(r)}static arrayRemove(...t){const r=function ZE(...a){return new Jg("arrayRemove",a)}(...t);return r._methodName="FieldValue.arrayRemove",new xa(r)}static increment(t){const r=function eI(a){return new Yl("increment",a)}(t);return r._methodName="FieldValue.increment",new xa(r)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const vh={Firestore:Fy,GeoPoint:xf,Timestamp:Jt,Blob:ph,Transaction:mh,WriteBatch:Xf,DocumentReference:Ia,DocumentSnapshot:ul,Query:Wo,QueryDocumentSnapshot:Ca,QuerySnapshot:yh,CollectionReference:rd,FieldPath:Yf,FieldValue:xa,setLogLevel:function Vy(a){!function Ln(a){wn.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function Eh(a){(function _m(a,t){a.INTERNAL.registerComponent(new Ne.uA("firestore-compat",r=>{const o=r.getProvider("app-compat").getImmediate(),u=r.getProvider("firestore").getImmediate();return t(o,u)},"PUBLIC").setServiceProps(Object.assign({},vh)))})(a,(t,r)=>new Fy(t,r,new sI)),a.registerVersion("@firebase/firestore-compat","0.3.36")}(le.A);var Ly=k(7935);function By(a,t){return function Uy(a,t=ge.E){return new Ve.c(r=>{let o;return null!=t?t.schedule(()=>{o=a.onSnapshot({includeMetadataChanges:!0},r)}):o=a.onSnapshot({includeMetadataChanges:!0},r),()=>{o?.()}})}(a,t)}function ym(a,t){return By(a,t).pipe((0,De.T)(r=>({payload:r,type:"query"})))}class jy{ref;afs;constructor(t,r){this.ref=t,this.afs=r}set(t,r){return this.ref.set(t,r)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,r){const o=this.ref.collection(t),{ref:u,query:d}=id(o,r);return new vm(u,d,this.afs)}snapshotChanges(){return function aI(a,t){return By(a,t).pipe((0,_e.Z)(void 0),rt(),(0,De.T)(r=>{const[o,u]=r;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ie.U0)}valueChanges(t={}){return this.snapshotChanges().pipe((0,De.T)(({payload:r})=>t.idField?{...r.data(),[t.idField]:r.id}:r.data()))}get(t){return(0,Be.H)(this.ref.get(t)).pipe(ie.U0)}}function Ih(a,t){return ym(a,t).pipe((0,_e.Z)(void 0),rt(),(0,De.T)(r=>{const[o,u]=r,d=u.payload.docChanges(),m=d.map(b=>({type:b.type,payload:b}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((b,F)=>{const H=d.find(fe=>fe.doc.ref.isEqual(b.ref)),re=o?.payload.docs.find(fe=>fe.ref.isEqual(b.ref));H&&JSON.stringify(H.doc.metadata)===JSON.stringify(b.metadata)||!H&&re&&JSON.stringify(re.metadata)===JSON.stringify(b.metadata)||m.push({type:"modified",payload:{oldIndex:F,newIndex:F,type:"modified",doc:b}})}),m}))}function Ch(a,t,r){return Ih(a,r).pipe((0,st.S)((o,u)=>function cI(a,t,r){return t.forEach(o=>{r.indexOf(o.type)>-1&&(a=function uI(a,t){switch(t.type){case"added":if(!a[t.newIndex]||!a[t.newIndex].doc.ref.isEqual(t.doc.ref))return $y(a,t.newIndex,0,t);break;case"modified":if(null==a[t.oldIndex]||a[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const r=a.slice();return r.splice(t.oldIndex,1),r.splice(t.newIndex,0,t),r}return $y(a,t.newIndex,1,t)}break;case"removed":if(a[t.oldIndex]&&a[t.oldIndex].doc.ref.isEqual(t.doc.ref))return $y(a,t.oldIndex,1)}return a}(a,o))}),a}(o,u.map(d=>d.payload),t),[]),function et(a,t=it.D){return a=a??Dt,(0,Ge.N)((r,o)=>{let u,d=!0;r.subscribe((0,lt._)(o,m=>{const b=t(m);(d||!a(u,b))&&(d=!1,u=b,o.next(m))}))})}(),(0,De.T)(o=>o.map(u=>({type:u.type,payload:u}))))}function $y(a,t,r,...o){const u=a.slice();return u.splice(t,r,...o),u}function Hy(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class vm{ref;query;afs;constructor(t,r,o){this.ref=t,this.query=r,this.afs=o}stateChanges(t){let r=Ih(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(r=r.pipe((0,De.T)(o=>o.filter(u=>t.indexOf(u.type)>-1)))),r.pipe((0,_e.Z)(void 0),rt(),(0,bt.p)(([o,u])=>u.length>0||!o),(0,De.T)(([,o])=>o),ie.U0)}auditTrail(t){return this.stateChanges(t).pipe((0,st.S)((r,o)=>[...r,...o],[]))}snapshotChanges(t){const r=Hy(t);return Ch(this.query,r,this.afs.schedulers.outsideAngular).pipe(ie.U0)}valueChanges(t={}){return ym(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.T)(r=>r.payload.docs.map(o=>t.idField?{...o.data(),[t.idField]:o.id}:o.data())),ie.U0)}get(t){return(0,Be.H)(this.query.get(t)).pipe(ie.U0)}add(t){return this.ref.add(t)}doc(t){return new jy(this.ref.doc(t),this.afs)}}class lI{query;afs;constructor(t,r){this.query=t,this.afs=r}stateChanges(t){return t&&0!==t.length?Ih(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.T)(r=>r.filter(o=>t.indexOf(o.type)>-1)),(0,bt.p)(r=>r.length>0),ie.U0):Ih(this.query,this.afs.schedulers.outsideAngular).pipe(ie.U0)}auditTrail(t){return this.stateChanges(t).pipe((0,st.S)((r,o)=>[...r,...o],[]))}snapshotChanges(t){const r=Hy(t);return Ch(this.query,r,this.afs.schedulers.outsideAngular).pipe(ie.U0)}valueChanges(t={}){return ym(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.T)(o=>o.payload.docs.map(u=>t.idField?{[t.idField]:u.id,...u.data()}:u.data())),ie.U0)}get(t){return(0,Be.H)(this.query.get(t)).pipe(ie.U0)}}const Gy=new E.nKC("angularfire2.enableFirestorePersistence"),Em=new E.nKC("angularfire2.firestore.persistenceSettings"),Im=new E.nKC("angularfire2.firestore.settings"),zy=new E.nKC("angularfire2.firestore.use-emulator");function id(a,t=(r=>r)){return{query:t(a),ref:a}}let wh=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,o,u,d,m,b,F,H,re,fe,Me,at,$t,tn,Qt,Vn,qn){this.schedulers=F;const Fn=(0,Ae.iB)(r,b,o),or=re;fe&&(0,R.gF)(Fn,b,Me,$t,tn,Qt,at,Vn),[this.firestore,this.persistenceEnabled$]=(0,Ae.BM)(`${Fn.name}.firestore`,"AngularFirestore",Fn.name,()=>{const $r=b.runOutsideAngular(()=>Fn.firestore());if(d&&$r.settings(d),or&&$r.useEmulator(...or),u&&!(0,_.Vy)(m)){const Ar=()=>{try{return(0,Be.H)($r.enablePersistence(H||void 0).then(()=>!0,()=>!1))}catch(Je){return typeof console<"u"&&console.warn(Je),(0,Ee.of)(!1)}};return[$r,b.runOutsideAngular(Ar)]}return[$r,(0,Ee.of)(!1)]},[d,or,u])}collection(r,o){let u;u="string"==typeof r?this.firestore.collection(r):r;const{ref:d,query:m}=id(u,o),b=this.schedulers.ngZone.run(()=>d);return new vm(b,m,this)}collectionGroup(r,o){const u=o||(m=>m),d=this.firestore.collectionGroup(r);return new lI(u(d),this)}doc(r){let o;o="string"==typeof r?this.firestore.doc(r):r;const u=this.schedulers.ngZone.run(()=>o);return new jy(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||a)(E.KVO(Ae.rx),E.KVO(Ae.uP,8),E.KVO(Gy,8),E.KVO(Im,8),E.KVO(E.Agw),E.KVO(E.SKi),E.KVO(ie.u0),E.KVO(Em,8),E.KVO(zy,8),E.KVO(R.DS,8),E.KVO(R.CP,8),E.KVO(R.yy,8),E.KVO(R.ZP,8),E.KVO(R.$z,8),E.KVO(R.AU,8),E.KVO(R.UB,8),E.KVO(ie.Jv,8))};static \u0275prov=E.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})(),Th=(()=>{class a{constructor(){Ly.A.registerVersion("angularfire",ie.xv.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:Gy,useValue:!0},{provide:Em,useValue:r}]}}static \u0275fac=function(o){return new(o||a)};static \u0275mod=E.$C({type:a});static \u0275inj=E.G2t({providers:[wh]})}return a})();var dI=k(7231),Cm=k(4454),ll=k(9969),Jf=k(6569);function wm(a,t){1&a&&(E.j41(0,"span",13),E.EFF(1,"invalid Email format"),E.k0s())}function hI(a,t){1&a&&(E.j41(0,"span",13),E.EFF(1,"Email is required"),E.k0s())}function lC(a,t){if(1&a){const r=E.RV6();E.j41(0,"div",14)(1,"img",15),E.bIt("click",function(){E.eBV(r);const u=E.XpG();return E.Njj(u.togglePasswordVisibility("password"))}),E.k0s()()}}function dC(a,t){if(1&a){const r=E.RV6();E.j41(0,"div",14)(1,"img",16),E.bIt("click",function(){E.eBV(r);const u=E.XpG();return E.Njj(u.togglePasswordVisibility("password"))}),E.k0s()()}}function fI(a,t){1&a&&(E.j41(0,"span",13),E.EFF(1," Password is required "),E.k0s())}function pI(a,t){if(1&a){const r=E.RV6();E.j41(0,"div",14)(1,"img",15),E.bIt("click",function(){E.eBV(r);const u=E.XpG(2);return E.Njj(u.togglePasswordVisibility("confirmPassword"))}),E.k0s()()}}function hC(a,t){if(1&a){const r=E.RV6();E.j41(0,"div",14)(1,"img",16),E.bIt("click",function(){E.eBV(r);const u=E.XpG(2);return E.Njj(u.togglePasswordVisibility("confirmPassword"))}),E.k0s()()}}function gI(a,t){1&a&&(E.j41(0,"span",13),E.EFF(1," Confirm password is required "),E.k0s())}function fC(a,t){if(1&a&&(E.j41(0,"div",4)(1,"div",7),E.nrm(2,"input",17),E.DNE(3,pI,2,0,"div",9)(4,hC,2,0,"div",9),E.k0s(),E.DNE(5,gI,2,0,"span",6),E.k0s()),2&a){let r;const o=E.XpG();E.R7$(2),E.Y8G("type",o.showConfirmPassword),E.R7$(),E.Y8G("ngIf","password"!==o.showConfirmPassword),E.R7$(),E.Y8G("ngIf","password"===o.showConfirmPassword),E.R7$(),E.Y8G("ngIf",(null==(r=o.form.get("confirmPassword"))?null:r.hasError("required"))&&(null==(r=o.form.get("confirmPassword"))?null:r.touched))}}function mI(a,t){if(1&a){const r=E.RV6();E.j41(0,"button",18),E.bIt("click",function(){E.eBV(r);const u=E.XpG();return E.Njj(u.googleLogin())}),E.EFF(1," Sign in with Google "),E.nrm(2,"img",19),E.k0s()}}function _I(a,t){if(1&a){const r=E.RV6();E.j41(0,"button",18),E.bIt("click",function(){E.eBV(r);const u=E.XpG();return E.Njj(u.emailAndPasswordLogin())}),E.EFF(1," Sign in "),E.k0s()}}function yI(a,t){if(1&a){const r=E.RV6();E.j41(0,"button",18),E.bIt("click",function(){E.eBV(r);const u=E.XpG();return E.Njj(u.registration())}),E.EFF(1," Register "),E.k0s()}}const Tm=a=>{const t=a.get("password")?.value,r=a.get("confirmPassword")?.value;return t&&r&&t!==r?{passwordsMismatch:!0}:null},Dm=[{path:"",component:(()=>{class a{constructor(r,o){this.fb=r,this.logInService=o,this.selected=!0,this.showPassword="password",this.showConfirmPassword="password",this.form=this.fb.group({email:["",[T.k0.required,T.k0.email]],password:["",T.k0.required],confirmPassword:["",T.k0.required]},{validators:Tm})}ngOnInit(){}select(){this.selected=!this.selected,this.clearInputs()}togglePasswordVisibility(r){"password"===r?this.showPassword="password"===this.showPassword?"":"password":"confirmPassword"===r&&(this.showConfirmPassword="password"===this.showConfirmPassword?"":"password")}googleLogin(){this.logInService.loginWithGoogle()}emailAndPasswordLogin(){const r=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.loginWithEmailAndPassword(r,o)}registration(){if(this.form.hasError("passwordsMismatch"))return console.log("Password mismatch detected"),void alert("Password and confirm password do not match");let r=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.registration(r,o),this.clearInputs(),this.selected=!0}clearInputs(){this.form.get("email")?.setValue(""),this.form.get("password")?.setValue(""),this.form.get("confirmPassword")?.setValue(""),this.form.get("email")?.markAsUntouched(),this.form.get("password")?.markAsUntouched(),this.form.get("confirmPassword")?.markAsUntouched()}static#e=this.\u0275fac=function(o){return new(o||a)(E.rXU(T.ok),E.rXU(Jf.p))};static#t=this.\u0275cmp=E.VBU({type:a,selectors:[["app-login"]],decls:24,vars:14,consts:[[1,"loginContainer"],[1,"container"],[3,"click","ngClass"],[3,"formGroup"],[1,"inputs"],["formControlName","email","placeholder","Email ex:sabadmin@gmail.com"],["class","error-message",4,"ngIf"],[1,"password-input"],["formControlName","password","placeholder","Password ex:123123123",3,"type"],["class","pass-img",4,"ngIf"],["class","inputs",4,"ngIf"],[3,"click",4,"ngIf"],["routerLink","/products"],[1,"error-message"],[1,"pass-img"],["src","assets/show.png","alt","img",3,"click"],["src","assets/hidden.png","alt","img",3,"click"],["formControlName","confirmPassword","placeholder","Confirm Password",3,"type"],[3,"click"],["src","assets/google.png","alt","img"]],template:function(o,u){if(1&o&&(E.j41(0,"div",0)(1,"div",1)(2,"div")(3,"p",2),E.bIt("click",function(){return u.select()}),E.EFF(4,"LOG IN"),E.k0s(),E.j41(5,"p",2),E.bIt("click",function(){return u.select()}),E.EFF(6,"SIGN UP"),E.k0s()(),E.j41(7,"form",3)(8,"div",4),E.nrm(9,"input",5),E.DNE(10,wm,2,0,"span",6)(11,hI,2,0,"span",6),E.k0s(),E.j41(12,"div",4)(13,"div",7),E.nrm(14,"input",8),E.DNE(15,lC,2,0,"div",9)(16,dC,2,0,"div",9),E.k0s(),E.DNE(17,fI,2,0,"span",6),E.k0s(),E.DNE(18,fC,6,4,"div",10)(19,mI,3,0,"button",11)(20,_I,2,0,"button",11)(21,yI,2,0,"button",11),E.j41(22,"button",12),E.EFF(23,"Guest Mode"),E.k0s()()()()),2&o){let d,m,b;E.R7$(3),E.Y8G("ngClass",u.selected?"selected":""),E.R7$(2),E.Y8G("ngClass",u.selected?"":"selected"),E.R7$(2),E.Y8G("formGroup",u.form)("@toggleState",u.selected?"login":"signup"),E.R7$(3),E.Y8G("ngIf",null==(d=u.form.get("email"))?null:d.hasError("email")),E.R7$(),E.Y8G("ngIf",(null==(m=u.form.get("email"))?null:m.hasError("required"))&&(null==(m=u.form.get("email"))?null:m.touched)),E.R7$(3),E.Y8G("type",u.showPassword),E.R7$(),E.Y8G("ngIf","password"!==u.showPassword),E.R7$(),E.Y8G("ngIf","password"===u.showPassword),E.R7$(),E.Y8G("ngIf",(null==(b=u.form.get("password"))?null:b.hasError("required"))&&(null==(b=u.form.get("password"))?null:b.touched)),E.R7$(),E.Y8G("ngIf",!u.selected),E.R7$(),E.Y8G("ngIf",u.selected),E.R7$(),E.Y8G("ngIf",u.selected),E.R7$(),E.Y8G("ngIf",!u.selected)}},dependencies:[_.YU,_.bT,T.qT,T.me,T.BC,T.cb,T.j4,T.JD,Cm.Wk],styles:[".loginContainer[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:400px;height:400px;background-color:#62dfdf;border-radius:4px;background-image:url(background.05b7e6a7f70c58a5.webp);background-size:cover;transition:transform .3s ease-in-out}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;gap:20px;padding:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{cursor:pointer;font-size:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]{position:relative}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:6px;right:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{width:100%;height:70%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:200px;height:30px;border-radius:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#13afc7;color:#fff;display:flex;justify-content:center;align-items:center;cursor:pointer}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:5px}.selected[_ngcontent-%COMP%]{color:#fff;border-bottom:1px solid white}.error-message[_ngcontent-%COMP%]{font-size:14px;color:red}.button-disabled[_ngcontent-%COMP%]{background-color:#8ac9d3}"],data:{animation:[(0,ll.hZ)("toggleState",[(0,ll.wk)("login",(0,ll.iF)({transform:"translateX(0)"})),(0,ll.wk)("signup",(0,ll.iF)({transform:"translateY(-10%)"})),(0,ll.kY)("login <=> signup",[(0,ll.i0)("0.4s ease-in-out")])])]},changeDetection:0})}return a})()}];let ep=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=E.$C({type:a});static#n=this.\u0275inj=E.G2t({imports:[Cm.iI.forChild(Dm),Cm.iI]})}return a})();var Wy=k(1626);const Dh={apiKey:"AIzaSyCbQiRFo1MKF_WTEIwSMYg4rFL0CkKdTDI",authDomain:"exercise-app-9b873.firebaseapp.com",databaseURL:"https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app",projectId:"exercise-app-9b873",storageBucket:"exercise-app-9b873.appspot.com",messagingSenderId:"146569895533",appId:"1:146569895533:web:cfb4bca172cc29ee50a964",measurementId:"G-MW950TMVK5"};let Ky=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=E.$C({type:a});static#n=this.\u0275inj=E.G2t({providers:[dI.HF],imports:[_.MD,T.YN,T.X1,Th,R.X8,ep,Wy.q1,Ae.bf.initializeApp(Dh)]})}return a})()},6569:(rn,ze,k)=>{k.d(ze,{p:()=>Ge});var _=k(7231),T=k(4412),R=k(6354),E=k(9437),ie=k(7673),Ae=k(4438),ge=k(1182),Ve=k(1626),Be=k(4454),Ee=k(2906),_e=k(1996);let Ge=(()=>{class lt{constructor(De,st,it,et,Dt){this.auth=De,this.http=st,this.router=it,this.cartService=et,this.sng=Dt,this.loggedUser=new T.t(void 0),this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app/musicShopUsers",this.isAdmin=new T.t(!1),this.likedProducts=new T.t([])}loginWithGoogle(){this.auth.signInWithPopup(new _.HF).then(De=>{localStorage.setItem("token",JSON.stringify(De.user?.uid)),this.findUser(De.user?.email).subscribe(st=>{void 0===st?this.addUserTodatabase(De.user?.email,De.user?.photoURL):this.findUser(De.user?.email).subscribe(it=>{this.loggedUser.next(it),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(it))})})},De=>{alert(De.mesasage)})}loginWithEmailAndPassword(De,st){this.auth.signInWithEmailAndPassword(De,st).then(it=>{this.findUser(it.user?.email).subscribe(et=>{this.loggedUser.next(et),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(et)),et?.user.likedProducts&&(this.sng.prodId.next(et?.user.likedProducts),localStorage.setItem("prodKeyAndType",JSON.stringify(et?.user.likedProducts)))})},it=>{alert(it.message),console.log(it.mesasage)})}registration(De,st){this.auth.createUserWithEmailAndPassword(De,st).then(it=>{this.addUserTodatabase(it.user?.email)},it=>{alert(it.message)})}addUserTodatabase(De,st){this.http.post(`${this.url}.json`,{email:De,isAdmin:!1,photoUrl:st,address:"",likedProducts:[{key:"none",category:"other"}],purchasedProducts:[{email:De,userId:De,date:new Date,totalPrice:0,products:[{quantity:-1,product:{key:"unknown",product:{category:"other",isTopProduct:!1,model:"none",price:-1,quantity:-1,discount:-1,photoUrl:["none"]}}}]}]}).subscribe(()=>{console.log("User created succesfully")},et=>{alert(et.message)})}findUser(De){return this.http.get(`${this.url}.json`).pipe((0,R.T)(st=>{let it,et="";if(Object.entries(st).find(([Dt,bt])=>{bt.email===De&&(it=bt,et=Dt)}),et&&it)return{user:it,key:et}}),(0,E.W)(st=>(console.error(st),(0,ie.of)(void 0))))}findUserById(De){return this.http.get(`${this.url}/${De}.json`).pipe((0,R.T)(st=>st.email))}checkIfLoggedIn(){if(localStorage.getItem("currentUser")){let De=JSON.parse(localStorage.getItem("currentUser"));this.loggedUser.next(De),localStorage.getItem("cart")&&this.cartService.cart.next(JSON.parse(localStorage.getItem("cart"))),localStorage.getItem("prodKeyAndType")&&this.sng.prodId.next(JSON.parse(localStorage.getItem("prodKeyAndType")))}}logOut(){localStorage.removeItem("currentUser"),localStorage.removeItem("cart"),this.loggedUser.next(void 0),this.cartService.cart.next([])}static#e=this.\u0275fac=function(st){return new(st||lt)(Ae.KVO(ge.DS),Ae.KVO(Ve.Qq),Ae.KVO(Be.Ix),Ae.KVO(Ee.m),Ae.KVO(_e.f))};static#t=this.\u0275prov=Ae.jDH({token:lt,factory:lt.\u0275fac,providedIn:"root"})}return lt})()},6483:(rn,ze,k)=>{k.d(ze,{P:()=>T});var _=k(4438);let T=(()=>{class R{transform(ie){return ie.charAt(0).toUpperCase()+ie.substring(1,ie.length)}static#e=this.\u0275fac=function(Ae){return new(Ae||R)};static#t=this.\u0275pipe=_.EJ8({name:"upperCase",type:R,pure:!0,standalone:!0})}return R})()},6552:(rn,ze,k)=>{k.d(ze,{u:()=>ie});var _=k(4412),T=k(4438),R=k(6569);function E(Ae,ge){1&Ae&&(T.j41(0,"div",2),T.nrm(1,"div",3),T.j41(2,"p"),T.EFF(3,"Loading..."),T.k0s()())}let ie=(()=>{class Ae{constructor(Ve){this.authService=Ve,this.isEditing="",this.loadingSubject=new _.t(!0),this.loading$=this.loadingSubject.asObservable()}ngOnInit(){this.authService.checkIfLoggedIn()}loadingValue(Ve){this.loadingSubject.next(!Ve)}static#e=this.\u0275fac=function(Be){return new(Be||Ae)(T.rXU(R.p))};static#t=this.\u0275cmp=T.VBU({type:Ae,selectors:[["app-product-page"]],decls:11,vars:7,consts:[["class","loading-container",4,"ngIf"],[3,"productsImported","category"],[1,"loading-container"],[1,"loader"]],template:function(Be,Ee){1&Be&&(T.nrm(0,"app-header")(1,"app-top-products"),T.j41(2,"h1"),T.EFF(3,"Our Products"),T.k0s(),T.DNE(4,E,4,0,"div",0),T.nI1(5,"async"),T.j41(6,"app-product-page-single-category",1),T.bIt("productsImported",function(Ge){return Ee.loadingValue(Ge)}),T.k0s(),T.j41(7,"app-product-page-single-category",1),T.bIt("productsImported",function(Ge){return Ee.loadingValue(Ge)}),T.k0s(),T.j41(8,"app-product-page-single-category",1),T.bIt("productsImported",function(Ge){return Ee.loadingValue(Ge)}),T.k0s(),T.j41(9,"app-product-page-single-category",1),T.bIt("productsImported",function(Ge){return Ee.loadingValue(Ge)}),T.k0s(),T.nrm(10,"app-footer")),2&Be&&(T.R7$(4),T.Y8G("ngIf",T.bMT(5,5,Ee.loading$)),T.R7$(2),T.Y8G("category","guitar"),T.R7$(),T.Y8G("category","drum"),T.R7$(),T.Y8G("category","piano"),T.R7$(),T.Y8G("category","bass"))},styles:["h1[_ngcontent-%COMP%]{display:flex;justify-content:center}.loading-container[_ngcontent-%COMP%]{margin:0 auto;width:300px;height:300px;display:flex;flex-direction:column;justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%] > .loader[_ngcontent-%COMP%]{width:60px;aspect-ratio:1;border-radius:50%;border:8px solid lightblue;border-right-color:orange;animation:_ngcontent-%COMP%_l2 1s infinite linear}@keyframes _ngcontent-%COMP%_l2{to{transform:rotate(1turn)}}"],changeDetection:0})}return Ae})()},8569:(rn,ze,k)=>{k.r(ze),k.d(ze,{ProductPageModule:()=>Lt});var _=k(177),T=k(6552),R=k(4454),E=k(4438);const ie=[{path:"",component:T.u}];let Ae=(()=>{class Ut{static#e=this.\u0275fac=function(en){return new(en||Ut)};static#t=this.\u0275mod=E.$C({type:Ut});static#n=this.\u0275inj=E.G2t({imports:[R.iI.forChild(ie),R.iI]})}return Ut})();var ge=k(3236),Ve=k(1985),Be=k(9470);var lt=k(4390);function rt(Ut,ln){1&Ut&&(E.j41(0,"div",5),E.nrm(1,"div",6),E.j41(2,"p"),E.EFF(3,"Loading..."),E.k0s()())}function De(Ut,ln){if(1&Ut){const Ht=E.RV6();E.j41(0,"div",8),E.bIt("click",function(){const vt=E.eBV(Ht).index,yn=E.XpG(2);return E.Njj(yn.changeIndex(vt))}),E.k0s()}if(2&Ut){const Ht=ln.index,en=E.XpG(2);E.Y8G("ngClass",en.index===Ht?"highlight":"")}}function st(Ut,ln){if(1&Ut&&(E.j41(0,"div"),E.DNE(1,De,1,1,"div",7),E.k0s()),2&Ut){const Ht=E.XpG();E.R7$(),E.Y8G("ngForOf",Ht.imgUrls)}}function it(Ut,ln){if(1&Ut){const Ht=E.RV6();E.j41(0,"div",9)(1,"img",10),E.bIt("click",function(){E.eBV(Ht);const vt=E.XpG();return E.Njj(vt.changeImgDown())}),E.k0s(),E.j41(2,"img",11),E.bIt("click",function(){E.eBV(Ht);const vt=E.XpG();return E.Njj(vt.changeImgUp())}),E.k0s()()}}function et(Ut,ln){if(1&Ut&&(E.j41(0,"div",12),E.nrm(1,"img",13),E.k0s()),2&Ut){const Ht=E.XpG();E.R7$(),E.Y8G("src",Ht.img,E.B4B)}}let Dt=(()=>{class Ut{constructor(Ht,en){this.cdr=Ht,this.dataShareService=en,this.index=0,this.imgUrls=[],this.img="",this.key="",this.loading=!0}ngOnInit(){this.dataShareService.topProducts.subscribe(Ht=>{Ht.forEach(en=>{this.imgUrls.push({key:en.key,img:en.product.photoUrl[0]})}),this.imgUrls.length>0&&(this.img=this.imgUrls[0].img,this.key=this.imgUrls[0].key,this.loading=!1,this.startTimeChangeInterval(),this.cdr.detectChanges())})}startTimeChangeInterval(){this.intervalSubscription=function Ge(Ut=0,ln=ge.E){return Ut<0&&(Ut=0),function _e(Ut=0,ln,Ht=ge.b){let en=-1;return null!=ln&&((0,Be.m)(ln)?Ht=ln:en=ln),new Ve.c(vt=>{let yn=function Ee(Ut){return Ut instanceof Date&&!isNaN(Ut)}(Ut)?+Ut-Ht.now():Ut;yn<0&&(yn=0);let xe=0;return Ht.schedule(function(){vt.closed||(vt.next(xe++),0<=en?this.schedule(void 0,en):vt.complete())},yn)})}(Ut,Ut,ln)}(4e3).subscribe(()=>{this.changeImgUp(),this.cdr.detectChanges()})}changeImgUp(){this.index===this.imgUrls.length-1?(this.index=0,this.img=this.imgUrls[this.index].img,this.key=this.imgUrls[this.index].key):(this.img=this.imgUrls[this.index+1].img,this.index++),this.clearInterval()}changeImgDown(){0===this.index?(this.index=this.imgUrls.length-1,this.img=this.imgUrls[this.index].img):(this.img=this.imgUrls[this.index-1].img,this.index--),this.clearInterval()}changeIndex(Ht){this.index=Ht,this.img=this.imgUrls[Ht].img,this.key=this.imgUrls[Ht].key,this.clearInterval()}clearInterval(){this.intervalSubscription&&this.intervalSubscription?.unsubscribe(),this.startTimeChangeInterval()}static#e=this.\u0275fac=function(en){return new(en||Ut)(E.rXU(E.gRc),E.rXU(lt.L))};static#t=this.\u0275cmp=E.VBU({type:Ut,selectors:[["app-top-products"]],decls:6,vars:4,consts:[[1,"topProducts-container"],["class","loading-container",4,"ngIf"],[4,"ngIf"],["class","arrows",4,"ngIf"],["class","images",4,"ngIf"],[1,"loading-container"],[1,"loader"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"click","ngClass"],[1,"arrows"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"images"],["alt","img",3,"src"]],template:function(en,vt){1&en&&(E.j41(0,"div",0),E.DNE(1,rt,4,0,"div",1),E.j41(2,"div"),E.DNE(3,st,2,1,"div",2)(4,it,3,0,"div",3),E.k0s(),E.DNE(5,et,2,1,"div",4),E.k0s()),2&en&&(E.R7$(),E.Y8G("ngIf",vt.loading),E.R7$(2),E.Y8G("ngIf",!vt.loading),E.R7$(),E.Y8G("ngIf",!vt.loading&&vt.imgUrls.length>0),E.R7$(),E.Y8G("ngIf",!vt.loading))},dependencies:[_.YU,_.Sq,_.bT],styles:[".topProducts-container[_ngcontent-%COMP%]{background-color:#54cbb7;width:100%;height:450px;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0 auto 100px;gap:20px}.topProducts-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{margin:0 auto;width:60px;height:60px;display:flex;flex-direction:column;justify-content:center;align-items:center}.topProducts-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%] > .loader[_ngcontent-%COMP%]{width:20px;aspect-ratio:1;border-radius:50%;border:8px solid lightblue;border-right-color:orange;animation:_ngcontent-%COMP%_l2 1s infinite linear}@keyframes _ngcontent-%COMP%_l2{to{transform:rotate(1turn)}}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;flex-direction:column;align-items:center;gap:10px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child{display:flex;justify-content:center;gap:10px;width:100%}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]{width:10px;height:10px;border:.4px solid #ffc107;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]{display:flex}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:400px;height:300px}.highlight[_ngcontent-%COMP%]{background-color:#ffc107}"],changeDetection:0})}return Ut})();var bt=k(2152),oe=k(708),le=k(3227),ee=k(9156),je=k(3550),Ne=k(5435);function Ct(Ut,ln){if(1&Ut){const Ht=E.RV6();E.j41(0,"app-card",6),E.bIt("editEvent",function(vt){E.eBV(Ht);const yn=E.XpG(2);return E.Njj(yn.onFormSubmitted(vt))})("removeEvent",function(vt){E.eBV(Ht);const yn=E.XpG(2);return E.Njj(yn.removeHandler(vt))}),E.k0s()}if(2&Ut){const Ht=ln.$implicit;E.Y8G("showSpecificContent",!0)("product",Ht)}}function ue(Ut,ln){if(1&Ut){const Ht=E.RV6();E.j41(0,"div",1)(1,"div")(2,"h2"),E.EFF(3),E.k0s(),E.j41(4,"div")(5,"img",2),E.bIt("click",function(){E.eBV(Ht);const vt=E.XpG();return E.Njj(vt.shiftRight())}),E.k0s(),E.j41(6,"img",3),E.bIt("click",function(){E.eBV(Ht);const vt=E.XpG();return E.Njj(vt.shiftLeft())}),E.k0s()()(),E.j41(7,"div",4),E.DNE(8,Ct,1,2,"app-card",5),E.nI1(9,"slice"),E.k0s()()}if(2&Ut){const Ht=E.XpG();E.R7$(3),E.SpI("",Ht.modifyCatName(),":"),E.R7$(5),E.Y8G("ngForOf",E.brH(9,2,Ht.productsArray,Ht.sliceStart,Ht.SliceEnd))}}let He=(()=>{class Ut{constructor(Ht,en,vt){this.sharedService=Ht,this.cd=en,this.dataShareService=vt,this.productsArray=[],this.productsImported=new E.bkB(!0),this.loading=!0,this.sliceStart=0,this.SliceEnd=6,this.length=0}ngOnInit(){this.category&&this.dataShareService.getData(this.category).subscribe(Ht=>{this.productsArray=Ht,this.length=Ht.length,this.loading=!1,this.cd.detectChanges(),this.productsImported.emit(!0)})}shiftLeft(){this.SliceEnd<this.length&&(this.sliceStart+=1,this.SliceEnd+=1)}shiftRight(){this.sliceStart>0&&(this.sliceStart-=1,this.SliceEnd-=1)}onFormSubmitted(Ht){this.sharedService.editProduct(Ht.form,Ht.prodId,Ht.prodCategory).subscribe(()=>{"guitar"===Ht.prodCategory&&this.sharedService.updateProductArray(Ht.form,this.productsArray,Ht.prodId),this.cd.detectChanges()})}removeHandler(Ht){this.productsArray=this.productsArray.filter(en=>en.key!==Ht.prodId),this.cd.detectChanges()}modifyCatName(){return this.category?this.category.charAt(0).toUpperCase()+this.category.substring(1,this.category.length)+"s":this.category}static#e=this.\u0275fac=function(en){return new(en||Ut)(E.rXU(Ne.m),E.rXU(E.gRc),E.rXU(lt.L))};static#t=this.\u0275cmp=E.VBU({type:Ut,selectors:[["app-product-page-single-category"]],inputs:{category:"category"},outputs:{productsImported:"productsImported"},standalone:!0,features:[E.aNF],decls:1,vars:1,consts:[["class","products-container",4,"ngIf"],[1,"products-container"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"products"],[3,"showSpecificContent","product","editEvent","removeEvent",4,"ngFor","ngForOf"],[3,"editEvent","removeEvent","showSpecificContent","product"]],template:function(en,vt){1&en&&E.DNE(0,ue,10,6,"div",0),2&en&&E.Y8G("ngIf",!vt.loading)},dependencies:[_.MD,_.Sq,_.bT,_.P9,je.i],styles:[".products-container[_ngcontent-%COMP%]{padding:60px}.products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;display:flex;justify-content:space-between}.products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;cursor:pointer}.products-container[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{display:flex;gap:20px}"]})}return Ut})(),Lt=(()=>{class Ut{static#e=this.\u0275fac=function(en){return new(en||Ut)};static#t=this.\u0275mod=E.$C({type:Ut});static#n=this.\u0275inj=E.G2t({imports:[_.MD,Ae,oe.n,bt.l,le.K,R.iI,ee.B,je.i,He]})}return Ut})();E.wjB(T.u,[_.bT,oe.n,bt.l,He,Dt],[_.Jj])},1343:(rn,ze,k)=>{k.r(ze),k.d(ze,{ProfileModuleModule:()=>le});var _=k(177),T=k(4454),R=k(9417),E=k(6697),ie=k(4438),Ae=k(6569),ge=k(5435),Ve=k(1996),Be=k(2152),Ee=k(708),_e=k(3550);function Ge(ee,je){if(1&ee){const Ne=ie.RV6();ie.j41(0,"button",5),ie.bIt("click",function(){ie.eBV(Ne);const ue=ie.XpG();return ie.Njj(ue.addingProd())}),ie.EFF(1," Add New Product "),ie.k0s()}}function lt(ee,je){if(1&ee){const Ne=ie.RV6();ie.j41(0,"div",26)(1,"div"),ie.nrm(2,"img",27),ie.j41(3,"img",28),ie.bIt("click",function(){const ue=ie.eBV(Ne).$implicit,He=ie.XpG(2);return ie.Njj(He.removeImg(ue))}),ie.k0s()()()}if(2&ee){const Ne=je.$implicit;ie.R7$(2),ie.Y8G("src",Ne,ie.B4B)}}function rt(ee,je){if(1&ee){const Ne=ie.RV6();ie.j41(0,"form",10)(1,"select",11)(2,"option",12),ie.EFF(3,"Guitar"),ie.k0s(),ie.j41(4,"option",13),ie.EFF(5,"Drum"),ie.k0s(),ie.j41(6,"option",14),ie.EFF(7,"Bass"),ie.k0s(),ie.j41(8,"option",15),ie.EFF(9,"Piano"),ie.k0s(),ie.j41(10,"option",16),ie.EFF(11,"Other"),ie.k0s()(),ie.nrm(12,"input",17)(13,"input",18)(14,"input",19)(15,"input",20)(16,"input",21),ie.j41(17,"input",22),ie.bIt("change",function(ue){ie.eBV(Ne);const He=ie.XpG();return ie.Njj(He.onFileChange(ue))}),ie.k0s(),ie.j41(18,"button",23),ie.bIt("click",function(){ie.eBV(Ne);const ue=ie.XpG();return ie.Njj(ue.addNewProduct())}),ie.EFF(19," add product "),ie.k0s(),ie.j41(20,"div",24),ie.DNE(21,lt,4,1,"div",25),ie.k0s()()}if(2&ee){const Ne=ie.XpG();ie.Y8G("formGroup",Ne.form),ie.R7$(18),ie.Y8G("disabled",Ne.form.invalid),ie.R7$(3),ie.Y8G("ngForOf",Ne.photos)}}function De(ee,je){1&ee&&ie.nrm(0,"app-card",29),2&ee&&ie.Y8G("product",je.$implicit)}let st=(()=>{class ee{constructor(Ne,Ct,ue,He,Lt,Ut){this.authService=Ne,this.cd=Ct,this.fb=ue,this.sharedService=He,this.router=Lt,this.sngService=Ut,this.photos=[],this.addingProduct=!1,this.purchasedProducts=[],this.form=this.fb.group({category:["",[R.k0.required]],model:["",R.k0.required],price:["",R.k0.required],quantity:["",R.k0.required],discount:["",R.k0.required],description:["",R.k0.required]})}ngOnInit(){this.authService.loggedUser.pipe((0,E.s)(1)).subscribe(Ne=>{Ne&&Ne.user.purchasedProducts&&(this.user=Ne,this.purchasedProducts=Ne?.user.purchasedProducts.slice(1)),this.sngService.prodId.subscribe(Ct=>{this.keyandType=Ct}),this.getUserLikedProducts(),this.form.patchValue({category:"guitar"})})}onFileChange(Ne){const Ct=Ne.target.files[0];if(Ct){const ue=new FileReader;ue.onload=He=>{this.photos.push(He.target?.result),this.cd.detectChanges()},ue.readAsDataURL(Ct)}}addingProd(){this.addingProduct=!this.addingProduct}removeImg(Ne){const Ct=this.photos.findIndex(ue=>ue===Ne);this.photos.splice(Ct,1)}addNewProduct(){const Ne=this.form.get("category")?.getRawValue(),Ct=this.form.get("model")?.getRawValue(),ue=this.form.get("price")?.getRawValue(),He=this.form.get("discount")?.getRawValue(),Lt=this.form.get("quantity")?.getRawValue(),Ut=this.form.get("description")?.getRawValue();this.sharedService.addProduct(Ne,Ct,ue,Lt,He,this.photos,Ut).subscribe({next:()=>{this.form.get("category")?.setValue(""),this.form.get("model")?.setValue(""),this.form.get("price")?.setValue(""),this.form.get("discount")?.setValue(""),this.form.get("quantity")?.setValue(""),this.form.get("description")?.setValue(""),this.photos=[],this.cd.detectChanges(),alert("Product was added successfully")},error:ln=>{console.log("add product error: "+ln.message)},complete:()=>{console.log("Subscription completed")}})}convertDate(Ne){let Ct=new Date(Ne);return`${Ct.getDate()}/${Ct.getMonth()+1}/${Ct.getFullYear()}`}navigate(Ne){this.router.navigate([`/${Ne}`])}getUserLikedProducts(){this.authService.loggedUser.pipe((0,E.s)(1)).subscribe(Ne=>{this.keyandType&&this.keyandType.length>0&&this.sharedService.getLikedProductsByIdsAsKeyValue(this.keyandType).subscribe(Ct=>{this.likedProducts=Ct,this.cd.detectChanges()})})}static#e=this.\u0275fac=function(Ct){return new(Ct||ee)(ie.rXU(Ae.p),ie.rXU(ie.gRc),ie.rXU(R.ok),ie.rXU(ge.m),ie.rXU(T.Ix),ie.rXU(Ve.f))};static#t=this.\u0275cmp=ie.VBU({type:ee,selectors:[["app-profile"]],decls:27,vars:5,consts:[[1,"container"],[1,"wrapper"],[1,"box"],[1,"info"],[3,"click",4,"ngIf"],[3,"click"],[3,"formGroup",4,"ngIf"],[1,"liked-products"],[1,"products"],["class","single-product",3,"product",4,"ngFor","ngForOf"],[3,"formGroup"],["formControlName","category"],["value","guitar"],["value","drum"],["value","bass"],["value","piano"],["value","other"],["placeholder","Model","formControlName","model"],["placeholder","Price","formControlName","price"],["placeholder","Discount","formControlName","discount"],["placeholder","Quantity","formControlName","quantity"],["placeholder","Description","formControlName","description"],["type","file",3,"change"],[3,"click","disabled"],[1,"photos"],["class","pht",4,"ngFor","ngForOf"],[1,"pht"],["alt","img",3,"src"],["src","assets/remove.png","alt","img",3,"click"],[1,"single-product",3,"product"]],template:function(Ct,ue){1&Ct&&(ie.nrm(0,"app-header"),ie.j41(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"p")(6,"span"),ie.EFF(7," Email:"),ie.k0s(),ie.EFF(8),ie.k0s(),ie.j41(9,"p")(10,"span"),ie.EFF(11,"Address:"),ie.k0s(),ie.EFF(12),ie.k0s(),ie.j41(13,"button"),ie.EFF(14,"Change Password"),ie.k0s(),ie.DNE(15,Ge,2,0,"button",4),ie.j41(16,"button",5),ie.bIt("click",function(){return ue.navigate("purchasedProducts")}),ie.EFF(17," See Your Purchases "),ie.k0s(),ie.j41(18,"button",5),ie.bIt("click",function(){return ue.navigate("allPurchase")}),ie.EFF(19,"See All Purchases"),ie.k0s()(),ie.DNE(20,rt,22,3,"form",6),ie.k0s(),ie.j41(21,"div",7)(22,"h2"),ie.EFF(23,"Liked Products:"),ie.k0s(),ie.j41(24,"div",8),ie.DNE(25,De,1,1,"app-card",9),ie.k0s()()()(),ie.nrm(26,"app-footer")),2&Ct&&(ie.R7$(8),ie.SpI(" ",null==ue.user||null==ue.user.user?null:ue.user.user.email,""),ie.R7$(4),ie.SpI(" ",null==ue.user||null==ue.user.user?null:ue.user.user.address,"Some Adrress"),ie.R7$(3),ie.Y8G("ngIf",null==ue.user||null==ue.user.user?null:ue.user.user.isAdmin),ie.R7$(5),ie.Y8G("ngIf",(null==ue.user||null==ue.user.user?null:ue.user.user.isAdmin)&&ue.addingProduct),ie.R7$(5),ie.Y8G("ngForOf",ue.likedProducts))},dependencies:[_.Sq,_.bT,R.qT,R.xH,R.y7,R.me,R.wz,R.BC,R.cb,R.j4,R.JD,Be.l,Ee.n,_e.i],styles:[".container[_ngcontent-%COMP%]{width:100vw;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:90%;background-color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:8%;display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-size:18px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:200px;height:50px;cursor:pointer;--b: 2px;--s: .45em;--color: #373b44;padding:calc(.5em + var(--s)) calc(.9em + var(--s));color:var(--color);--_p: var(--s);background:conic-gradient(from 90deg at var(--b) var(--b),rgba(0,0,0,0) 90deg,var(--color) 0) var(--_p) var(--_p)/calc(100% - var(--b) - 2 * var(--_p)) calc(100% - var(--b) - 2 * var(--_p));transition:.3s linear,color 0s,background-color 0s;outline:var(--b) solid rgba(0,0,0,0);outline-offset:.6em;font-size:16px;border:0;user-select:none;-webkit-user-select:none;touch-action:manipulation}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus-visible{--_p: 0px;outline-color:var(--color);outline-offset:.05em}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background:var(--color);color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,200px);grid-template-rows:repeat(5,30px);padding-left:8%;margin-bottom:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]{display:flex;gap:12px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]:last-of-type{width:8px;position:absolute;top:3px;right:-6px}.liked-products[_ngcontent-%COMP%]{padding:20px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:4px}"],changeDetection:0})}return ee})();var it=k(6354),et=k(8141);const bt=[{path:"",component:st,canActivate:[(()=>{class ee{constructor(){this.authService=(0,ie.WQX)(Ae.p),this.router=(0,ie.WQX)(T.Ix)}canActivate(Ne){return this.authService.findUserById(Ne.params.id).pipe((0,it.T)(ue=>this.authService.loggedUser.value?.user.email===ue),(0,et.M)(ue=>{ue||(alert("Access Denied!"),this.router.navigate(["/products"]))}))}static#e=this.\u0275fac=function(Ct){return new(Ct||ee)};static#t=this.\u0275prov=ie.jDH({token:ee,factory:ee.\u0275fac,providedIn:"root"})}return ee})()]}];let oe=(()=>{class ee{static#e=this.\u0275fac=function(Ct){return new(Ct||ee)};static#t=this.\u0275mod=ie.$C({type:ee});static#n=this.\u0275inj=ie.G2t({imports:[T.iI.forChild(bt),T.iI]})}return ee})(),le=(()=>{class ee{static#e=this.\u0275fac=function(Ct){return new(Ct||ee)};static#t=this.\u0275mod=ie.$C({type:ee});static#n=this.\u0275inj=ie.G2t({imports:[_.MD,oe,R.X1,Be.l,Ee.n,_e.i]})}return ee})()},9156:(rn,ze,k)=>{k.d(ze,{B:()=>R});var _=k(4438),T=k(9417);let R=(()=>{class E{constructor(Ae){this.fb=Ae,this.formSubmitted=new _.bkB,this.productForm=this.fb.group({model:[""],price:["",T.k0.pattern("^[0-9]*$")],discount:["",T.k0.pattern("^[0-9]*$")],quantity:["",T.k0.pattern("^[0-9]*$")],description:[""]})}onSubmit(){this.formSubmitted.emit(this.productForm.value)}static#e=this.\u0275fac=function(ge){return new(ge||E)(_.rXU(T.ok))};static#t=this.\u0275cmp=_.VBU({type:E,selectors:[["app-reusable-form"]],outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[_.aNF],decls:8,vars:1,consts:[[1,"edit",3,"formGroup"],["formControlName","model","type","text","placeholder","New model-name"],["formControlName","price","type","text","placeholder","New price"],["formControlName","discount","type","text","placeholder","New Discount"],["formControlName","quantity","type","text","placeholder","New Quantity"],["formControlName","description","placeholder","New Description"],[3,"click"]],template:function(ge,Ve){1&ge&&(_.j41(0,"form",0),_.nrm(1,"input",1)(2,"input",2)(3,"input",3)(4,"input",4)(5,"textarea",5),_.j41(6,"button",6),_.bIt("click",function(){return Ve.onSubmit()}),_.EFF(7,"Confirm Changes"),_.k0s()()),2&ge&&_.Y8G("formGroup",Ve.productForm)},dependencies:[T.X1,T.qT,T.me,T.BC,T.cb,T.j4,T.JD],styles:[".edit[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;gap:6px;margin-top:60px}.edit[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .edit[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:80%;height:26px}"]})}return E})()},3550:(rn,ze,k)=>{k.d(ze,{i:()=>Dt});var _=k(177),T=k(9417),R=k(9156),E=k(4438),ie=k(6483),Ae=k(5435),ge=k(6569),Ve=k(4454),Be=k(2906),Ee=k(6552);function _e(bt,oe){if(1&bt){const le=E.RV6();E.j41(0,"img",13),E.bIt("click",function(){E.eBV(le);const je=E.XpG(3);return E.Njj(je.editing())}),E.k0s()}}function Ge(bt,oe){if(1&bt){const le=E.RV6();E.j41(0,"img",13),E.bIt("click",function(){E.eBV(le);const je=E.XpG(3);return E.Njj(je.cancelEditing())}),E.k0s()}}function lt(bt,oe){if(1&bt){const le=E.RV6();E.j41(0,"div",10)(1,"img",11),E.bIt("click",function(){E.eBV(le);const je=E.XpG(2);return E.Njj(je.removeProduct())}),E.k0s(),E.DNE(2,_e,1,0,"img",12)(3,Ge,1,0,"img",12),E.k0s()}if(2&bt){const le=E.XpG(2);E.R7$(2),E.Y8G("ngIf",""===le.isEditing),E.R7$(),E.Y8G("ngIf",""!==le.isEditing)}}function rt(bt,oe){if(1&bt){const le=E.RV6();E.j41(0,"div",14)(1,"app-reusable-form",15),E.bIt("formSubmitted",function(je){E.eBV(le);const Ne=E.XpG(2);return E.Njj(Ne.onFormSubmit(je))}),E.k0s(),E.j41(2,"div")(3,"button",4),E.bIt("click",function(){E.eBV(le);const je=E.XpG(2);return E.Njj(je.cancelEditing())}),E.EFF(4,"Cancel"),E.k0s()()()}}function De(bt,oe){if(1&bt&&(E.j41(0,"div",16),E.EFF(1),E.k0s()),2&bt){const le=E.XpG(2);E.R7$(),E.SpI(" -",le.product.product.discount,"% ")}}function st(bt,oe){if(1&bt&&(E.j41(0,"span"),E.EFF(1),E.k0s()),2&bt){const le=E.XpG(2);E.R7$(),E.SpI("",le.product.product.price,"$")}}function it(bt,oe){if(1&bt&&(E.j41(0,"div",17)(1,"span"),E.EFF(2),E.k0s(),E.j41(3,"span"),E.EFF(4),E.k0s()()),2&bt){const le=E.XpG(2);E.R7$(2),E.SpI(" ",le.product.product.price,"$ "),E.R7$(2),E.SpI(" ",le.calculateDiscount(),"$ ")}}function et(bt,oe){if(1&bt){const le=E.RV6();E.j41(0,"div")(1,"div",1),E.DNE(2,lt,4,2,"div",2),E.nI1(3,"async"),E.j41(4,"div",3)(5,"button",4),E.bIt("click",function(){E.eBV(le);const je=E.XpG();return E.Njj(je.addInCart())}),E.EFF(6,"Add to cart"),E.k0s(),E.j41(7,"div")(8,"span",4),E.bIt("click",function(){E.eBV(le);const je=E.XpG();return E.Njj(je.navigation())}),E.EFF(9,"See Product"),E.k0s()(),E.j41(10,"button",4),E.bIt("click",function(){E.eBV(le);const je=E.XpG();return E.Njj(je.makeItTop())}),E.EFF(11,"Add To Top Products"),E.k0s()(),E.DNE(12,rt,5,0,"div",5),E.j41(13,"div",3),E.DNE(14,De,2,1,"div",6),E.nrm(15,"img",7),E.k0s(),E.j41(16,"div",8)(17,"span"),E.EFF(18),E.nI1(19,"upperCase"),E.k0s(),E.j41(20,"span"),E.EFF(21),E.nI1(22,"slice"),E.nI1(23,"upperCase"),E.k0s(),E.DNE(24,st,2,1,"span",0)(25,it,5,2,"div",9),E.k0s()()()}if(2&bt){const le=E.XpG();E.R7$(2),E.Y8G("ngIf",E.bMT(3,10,le.isAdmin)),E.R7$(2),E.Y8G("ngClass",le.isEditing?"display-none":"hover"),E.R7$(8),E.Y8G("ngIf",le.isEditing===le.product.key),E.R7$(),E.Y8G("ngClass",le.isEditing===le.product.key?"display-none":"img-placeholder"),E.R7$(),E.Y8G("ngIf",null==le.product||null==le.product.product?null:le.product.product.discount),E.R7$(),E.Y8G("src",le.product.product.photoUrl[0],E.B4B),E.R7$(3),E.JRh(E.bMT(19,12,le.product.product.category)),E.R7$(3),E.JRh(E.bMT(23,18,E.brH(22,14,le.product.product.model,0,150))),E.R7$(3),E.Y8G("ngIf",!le.product.product.discount),E.R7$(),E.Y8G("ngIf",le.product.product.discount)}}let Dt=(()=>{class bt{constructor(le,ee,je,Ne,Ct,ue){this.sharedService=le,this.authService=ee,this.router=je,this.cd=Ne,this.cartService=Ct,this.specificParent=ue,this.singleProdPage=!1,this.removeEvent=new E.bkB,this.editEvent=new E.bkB,this.isEditing="",this.isUsedInSpecificParent=!1,this.showSpecificContent=!1,this.specificParent&&(this.isUsedInSpecificParent=!0)}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.loggedUser.subscribe(le=>{this.authService.isAdmin.next(le?.user.isAdmin),this.isAdmin=this.authService.isAdmin.asObservable(),this.userID=le?.key})}removeProduct(){this.sharedService.removeProduct(this.product?.product.category,this.product?.key).subscribe(()=>{this.removeEvent.emit({prodId:this.product?.key,prodCategory:this.product?.product.category}),this.cd.detectChanges()})}navigation(){this.router.navigate([`single-product/${this.product?.key}`],{queryParams:{type:this.product?.product.category,prod:this.product?.key}}),this.cd.detectChanges()}addInCart(){this.cartService.cartOperations("add",this.product)}navigateToCategotyPage(){this.router.navigate([`categoty/${this.product?.product.category}`])}calculateDiscount(){return this.product?.product.price-Math.round(this.product?.product.price*this.product?.product.discount/100)}editing(){this.isEditing=this.product?.key}cancelEditing(){this.isEditing=""}onFormSubmit(le){this.editEvent.emit({form:le,prodId:this.product?.key,prodCategory:this.product?.product?.category}),le.model&&(this.product.product.model=le.model),le.price&&(this.product.product.price=le.price),le.discount&&(this.product.product.discount=le.discount),le.quantity&&(this.product.product.quantity=le.quantity),le.description&&(this.product.product.description=le.description),this.cancelEditing()}firstLetterUpperCase(le){return le.charAt(0).toUpperCase()+le.substring(1,le.length)}makeItTop(){this.sharedService.makeTopProduct(this.product.key,this.product.product.category)}static#e=this.\u0275fac=function(ee){return new(ee||bt)(E.rXU(Ae.m),E.rXU(ge.p),E.rXU(Ve.Ix),E.rXU(E.gRc),E.rXU(Be.m),E.rXU(Ee.u,8))};static#t=this.\u0275cmp=E.VBU({type:bt,selectors:[["app-card"]],inputs:{product:"product",singleProdPage:"singleProdPage",showSpecificContent:"showSpecificContent"},outputs:{removeEvent:"removeEvent",editEvent:"editEvent"},standalone:!0,features:[E.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[1,"single-product"],["class","delete-button",4,"ngIf"],[3,"ngClass"],[3,"click"],["class","edit",4,"ngIf"],["class","discount",4,"ngIf"],["alt","img",3,"src"],[1,"info"],["class","if-discount",4,"ngIf"],[1,"delete-button"],["src","assets/remove.png","alt","img",3,"click"],["src","assets/pen.png","alt","img",3,"click",4,"ngIf"],["src","assets/pen.png","alt","img",3,"click"],[1,"edit"],[3,"formSubmitted"],[1,"discount"],[1,"if-discount"]],template:function(ee,je){1&ee&&E.DNE(0,et,26,20,"div",0),2&ee&&E.Y8G("ngIf",je.product&&je.product.product)},dependencies:[T.YN,_.MD,_.YU,_.bT,_.Jj,_.P9,R.B,ie.P],styles:[".single-product[_ngcontent-%COMP%]{width:200px;height:420px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%]{position:absolute;z-index:1}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:2px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:14%;z-index:1}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:20px;border-radius:4px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:35px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{color:red}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{display:flex;gap:10px;justify-content:center;width:140px;height:40px;color:#fff}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{height:260px;display:flex;justify-content:center;position:relative}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;min-height:50%;min-width:50%}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{height:155px;display:flex;flex-direction:column;justify-content:space-between}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{text-decoration:line-through}.if-discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;justify-self:flex-end}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:20px}.display-none[_ngcontent-%COMP%]{display:none}"],changeDetection:0})}return bt})()},4390:(rn,ze,k)=>{k.d(ze,{L:()=>R});var _=k(4412),T=k(4438);let R=(()=>{class E{constructor(){this.allProducts=new _.t([]),this.topProducts=new _.t([]),this.guitarProducts=new _.t([]),this.pianoProducts=new _.t([]),this.bassProducts=new _.t([]),this.drumProducts=new _.t([])}getData(Ae){return"guitar"===Ae?this.guitarProducts:"bass"===Ae?this.bassProducts:"drum"===Ae?this.drumProducts:"piano"===Ae?this.pianoProducts:this.allProducts}static#e=this.\u0275fac=function(ge){return new(ge||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},5435:(rn,ze,k)=>{k.d(ze,{m:()=>Ge});var _=k(4412),T=k(8141),R=k(7468),E=k(6354),ie=k(5558),Ae=k(9437),ge=k(7673),Ve=k(4438),Be=k(1626),Ee=k(6569),_e=k(4390);let Ge=(()=>{class lt{constructor(De,st,it){this.http=De,this.service=st,this.shareDataService=it,this.detectChanges=new _.t(!1),this.userId=this.service.loggedUser.value?.key,this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app"}addProduct(De,st,it,et,Dt,bt,oe){const le={category:De,model:st,price:parseInt(it),quantity:parseInt(et),discount:parseInt(Dt),photoUrl:bt,isTopProduct:!1,description:oe};return this.http.post(`${this.url}/products/${De}.json`,le)}ifDetectChanges(){return this.detectChanges.next(!this.detectChanges.value),this.detectChanges.value}makeTopProduct(De,st){this.http.get(`${this.url}/products/${st}/${De}.json`).pipe((0,T.M)(it=>{it.isTopProduct=!it.isTopProduct,this.http.patch(`${this.url}/products/${st}/${De}.json`,it).subscribe()})).subscribe()}getAllTopProduct(){this.shareDataService.allProducts.subscribe(De=>{const it=this.mapKeyValue(De).filter(et=>!0===et.product.isTopProduct);console.log(it),this.shareDataService.topProducts.next(it)})}mapKeyValue(De){return De.flatMap(it=>Object.entries(it).map(([et,Dt])=>({key:et,product:Dt})))}getAllTypeOfProduct(){const De=this.http.get(`${this.url}/products/guitar.json`),st=this.http.get(`${this.url}/products/piano.json`),it=this.http.get(`${this.url}/products/bass.json`),et=this.http.get(`${this.url}/products/drum.json`);return(0,R.p)([De,st,it,et]).pipe((0,E.T)(Dt=>{this.shareDataService.allProducts.next(Dt);const bt=this.mapKeyValue(Dt),oe=bt.filter(Ne=>"guitar"===Ne.product.category),le=bt.filter(Ne=>"piano"===Ne.product.category),ee=bt.filter(Ne=>"bass"===Ne.product.category),je=bt.filter(Ne=>"drum"===Ne.product.category);return this.shareDataService.guitarProducts.next(oe),this.shareDataService.pianoProducts.next(le),this.shareDataService.bassProducts.next(ee),this.shareDataService.drumProducts.next(je),this.getAllTopProduct(),Dt}))}likeUnlikeProduct(De,st,it,et){return this.http.get(`${this.url}/musicShopUsers/${it}.json`).pipe((0,T.M)(Dt=>{let bt=Dt;console.log(Dt);let oe=et;bt&&(bt.likedProducts.find(ee=>ee.key===De)?(oe=Dt.likedProducts.filter(ee=>ee.key!==De),bt.likedProducts=oe):(oe=[...Dt.likedProducts,{key:De,category:st}],bt.likedProducts=oe)),this.http.patch(`${this.url}/musicShopUsers/${it}.json`,bt).subscribe()}))}getLikedProductsByIdsAsKeyValue(De){const st=De.map(it=>this.getProductById(it.key,it.category).pipe((0,E.T)(et=>({key:it.key,product:et}))));return(0,R.p)(st)}getProduct(De,st){return this.http.get(`${this.url}/products/${st}/${De}.json`)}getProductById(De,st){return this.http.get(`${this.url}/products/${st}/${De}.json`)}buyProducts(De,st,it,et){const Dt={userId:et,email:it,date:new Date,totalPrice:st,products:De},bt=this.http.get(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`).pipe((0,ie.n)(le=>(le.purchasedProducts=[...le.purchasedProducts,Dt],this.http.patch(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`,le))),(0,Ae.W)(le=>(console.error("Error in adminUpdate$",le),(0,ge.of)(null))));let oe=(0,ge.of)(null);et&&(oe=this.http.get(`${this.url}/musicShopUsers/${et}.json`).pipe((0,ie.n)(le=>(le.purchasedProducts=[...le.purchasedProducts,Dt],this.http.patch(`${this.url}/musicShopUsers/${et}.json`,le))),(0,Ae.W)(le=>(console.error("Error in userUpdate$",le),(0,ge.of)(null))))),(0,R.p)([bt,oe]).subscribe()}removeProduct(De,st){return this.http.delete(`${this.url}/products/${De}/${st}.json`)}editProduct(De,st,it){return this.http.get(`${this.url}/products/${it}/${st}.json`).pipe((0,T.M)(et=>{De.model&&(et.model=De.model),De.price&&(et.price=De.price),De.discount&&(et.discount=De.discount),De.quantity&&(et.quantity=De.quantity),De.description&&(et.description=De.description),this.http.patch(`${this.url}/products/${it}/${st}.json`,et).subscribe()}))}updateProductArray(De,st,it){let et=st.findIndex(Dt=>Dt.key===it);De.discount&&(st[et].product.discount=De.discount,De.model&&(st[et].product.model=De.model),De.price&&(st[et].product.price=De.price),De.description&&(st[et].product.description=De.description),De.quantity&&(st[et].product.quantity=De.quantity))}getRandomProducts(De){return this.shareDataService.getData(De).pipe((0,E.T)(st=>{let it=4;const et=[],Dt=[];for(;0!==it;){if(st.length<=it)return st;const bt=Math.floor(Math.random()*st.length);Dt.includes(bt)||(et.push(st[bt]),Dt.push(bt),it--)}return et}))}getLikedProductsArr(De){return this.http.get(`${this.url}/musicShopUsers/${De}.json`).pipe((0,E.T)(st=>st))}getAllClientPurchases(){return this.http.get(`${this.url}/musicShopUsers/.json`).pipe((0,E.T)(De=>Object.keys(De).map(st=>(De[st].purchasedProducts||[]).slice(1))),(0,E.T)(De=>De.flat()))}static#e=this.\u0275fac=function(st){return new(st||lt)(Ve.KVO(Be.Qq),Ve.KVO(Ee.p),Ve.KVO(_e.L))};static#t=this.\u0275prov=Ve.jDH({token:lt,factory:lt.\u0275fac,providedIn:"root"})}return lt})()},1996:(rn,ze,k)=>{k.d(ze,{f:()=>R});var _=k(4412),T=k(4438);let R=(()=>{class E{constructor(){this.prodId=new _.t(void 0)}static#e=this.\u0275fac=function(ge){return new(ge||E)};static#t=this.\u0275prov=T.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}return E})()},2735:(rn,ze,k)=>{k.r(ze),k.d(ze,{SingleProductPageModule:()=>bt});var _=k(177),T=k(4454),R=k(6697),E=k(4438),ie=k(5435),Ae=k(6569),ge=k(2906),Ve=k(1996),Be=k(2152),Ee=k(708),_e=k(8964);function Ge(oe,le){if(1&oe&&E.nrm(0,"img",15,0),2&oe){const ee=E.XpG();E.Y8G("src",ee.images[ee.cuurentIndex],E.B4B)}}function lt(oe,le){if(1&oe){const ee=E.RV6();E.j41(0,"div")(1,"img",16),E.bIt("click",function(){const Ne=E.eBV(ee).index,Ct=E.XpG();return E.Njj(Ct.switchImage(Ne))}),E.k0s()()}if(2&oe){const ee=le.index,je=E.XpG();E.R7$(),E.Y8G("src",je.images[ee],E.B4B)}}function rt(oe,le){if(1&oe){const ee=E.RV6();E.j41(0,"img",17),E.bIt("click",function(){E.eBV(ee);const Ne=E.XpG();return E.Njj(Ne.likeProduct("unlike"))}),E.k0s()}}function De(oe,le){if(1&oe){const ee=E.RV6();E.j41(0,"img",18),E.bIt("click",function(){E.eBV(ee);const Ne=E.XpG();return E.Njj(Ne.likeProduct("like"))}),E.k0s()}}function st(oe,le){if(1&oe&&E.nrm(0,"app-suggestions",19),2&oe){const ee=E.XpG();E.Y8G("categoty",null==ee.product?null:ee.product.category)}}const et=[{path:"",component:(()=>{class oe{constructor(ee,je,Ne,Ct,ue,He){this.sharedService=ee,this.authService=je,this.route=Ne,this.cd=Ct,this.cartService=ue,this.sngService=He,this.cuurentIndex=0,this.minSize=0,this.maxSize=0,this.focusedImg=this.product?.photoUrl?.[0],this.prodId="",this.userId="",this.isLiked=!1,this.userEmail=""}ngOnInit(){this.authService.checkIfLoggedIn(),this.route.queryParams.subscribe(()=>{this.getProductInfo(),this.getUserInfo()})}getUserInfo(){this.authService.loggedUser.subscribe(ee=>{this.userId=ee?.key,this.userEmail=ee?.user.email})}getProductInfo(){this.route.queryParams.pipe((0,R.s)(1)).subscribe(ee=>{this.sharedService.getProductById(ee.prod,ee.type).pipe((0,R.s)(1)).subscribe(je=>{this.product=je,this.images=je.photoUrl,this.prodId=ee.prod,this.cuurentIndex=0,this.focusedImg=this.product?.photoUrl?.[0],this.likedProducts=this.sngService.prodId.value,this.checkIfliked(),this.cd.detectChanges()})})}switchImage(ee){this.cuurentIndex=ee}checkIfliked(){this.likedProducts&&(this.isLiked=!!this.likedProducts.find(je=>je.key===this.prodId))}likeProduct(ee){this.sharedService.likeUnlikeProduct(this.prodId,this.product?.category,this.userId,this.likedProducts).subscribe(()=>{this.likedProducts&&("unlike"===ee?this.isLiked=!1:"like"===ee&&(this.isLiked=!0),this.cd.detectChanges(),this.authService.findUser(this.userEmail).subscribe(je=>{this.authService.loggedUser.next(je),"unlike"===ee?(this.likedProducts=this.likedProducts?.filter(Ne=>Ne.key!==this.prodId),this.isLiked=!1):"like"===ee&&(this.likedProducts?.push({key:this.prodId,category:this.product?.category}),this.isLiked=!0),localStorage.setItem("currentUser",JSON.stringify(je)),this.cd.detectChanges()}))})}scroll(ee){"right"===ee?this.images.unshift(this.images.pop()):this.images.push(this.images.shift())}addInCart(){this.cartService.cartOperations("add",{key:this.prodId,product:this.product})}static#e=this.\u0275fac=function(je){return new(je||oe)(E.rXU(ie.m),E.rXU(Ae.p),E.rXU(T.nX),E.rXU(E.gRc),E.rXU(ge.m),E.rXU(Ve.f))};static#t=this.\u0275cmp=E.VBU({type:oe,selectors:[["app-single-product-page"]],decls:39,vars:12,consts:[["myImage",""],[1,"container"],[1,"content"],[1,"images"],[1,"focused-img"],["alt","img",3,"src",4,"ngIf"],[1,"otherPhotos"],["src","assets/left.png","alt","img",3,"click"],[4,"ngFor","ngForOf"],["src","assets/right.png","alt","img",3,"click"],[1,"description","payment"],["src","assets/heart-red.png","alt","img",3,"click",4,"ngIf"],["src","assets/heart.png","alt","img",3,"click",4,"ngIf"],[3,"click"],[3,"categoty",4,"ngIf"],["alt","img",3,"src"],["alt","img",3,"click","src"],["src","assets/heart-red.png","alt","img",3,"click"],["src","assets/heart.png","alt","img",3,"click"],[3,"categoty"]],template:function(je,Ne){1&je&&(E.nrm(0,"app-header"),E.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),E.DNE(5,Ge,2,1,"img",5),E.k0s(),E.j41(6,"div",6)(7,"div")(8,"img",7),E.bIt("click",function(){return Ne.scroll("left")}),E.k0s()(),E.DNE(9,lt,2,1,"div",8),E.nI1(10,"slice"),E.j41(11,"div")(12,"img",9),E.bIt("click",function(){return Ne.scroll("right")}),E.k0s()()()(),E.j41(13,"div",10)(14,"div")(15,"p")(16,"span"),E.EFF(17,"Categoty:"),E.k0s(),E.EFF(18),E.k0s(),E.j41(19,"div"),E.DNE(20,rt,1,0,"img",11)(21,De,1,0,"img",12),E.k0s()(),E.j41(22,"div")(23,"p")(24,"span"),E.EFF(25,"Model:"),E.k0s(),E.EFF(26),E.k0s(),E.j41(27,"p")(28,"span"),E.EFF(29,"Description: "),E.k0s(),E.EFF(30),E.k0s(),E.j41(31,"p")(32,"span"),E.EFF(33,"Price:"),E.k0s(),E.EFF(34),E.k0s(),E.j41(35,"button",13),E.bIt("click",function(){return Ne.addInCart()}),E.EFF(36,"Add to Cart"),E.k0s()()(),E.DNE(37,st,1,1,"app-suggestions",14),E.nrm(38,"app-footer"),E.k0s()()),2&je&&(E.R7$(5),E.Y8G("ngIf",null==Ne.images?null:Ne.images.length),E.R7$(4),E.Y8G("ngForOf",E.i5U(10,9,Ne.images,0)),E.R7$(9),E.SpI(" ",null==Ne.product?null:Ne.product.category,""),E.R7$(2),E.Y8G("ngIf",Ne.isLiked),E.R7$(),E.Y8G("ngIf",!Ne.isLiked),E.R7$(5),E.SpI(" ",null==Ne.product?null:Ne.product.model,""),E.R7$(4),E.SpI(" ",null==Ne.product?null:Ne.product.description,""),E.R7$(4),E.SpI(" ",null==Ne.product?null:Ne.product.price,"$"),E.R7$(3),E.Y8G("ngIf",null==Ne.product?null:Ne.product.category))},dependencies:[_.Sq,_.bT,Be.l,Ee.n,_e.x,_.P9],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6%;margin-top:4%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:350px;height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px;max-height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]{display:flex;gap:4px;justify-content:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child, .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{background-color:unset}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > img[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]{width:40px;height:40px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:40px;gap:20px;width:90%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:23px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:10px;word-wrap:break-word;font-size:20px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px;height:30px;border:none;text-align:center;color:#fff;background-color:#7a7af0;border-radius:3px;cursor:pointer}"],changeDetection:0})}return oe})()}];let Dt=(()=>{class oe{static#e=this.\u0275fac=function(je){return new(je||oe)};static#t=this.\u0275mod=E.$C({type:oe});static#n=this.\u0275inj=E.G2t({imports:[T.iI.forChild(et),T.iI]})}return oe})(),bt=(()=>{class oe{static#e=this.\u0275fac=function(je){return new(je||oe)};static#t=this.\u0275mod=E.$C({type:oe});static#n=this.\u0275inj=E.G2t({imports:[_.MD,Be.l,Ee.n,Dt,_e.x]})}return oe})()},8964:(rn,ze,k)=>{k.d(ze,{x:()=>Ae});var _=k(3550),T=k(177),R=k(4438),E=k(5435);function ie(ge,Ve){1&ge&&R.nrm(0,"app-card",2),2&ge&&R.Y8G("product",Ve.$implicit)}let Ae=(()=>{class ge{constructor(Be,Ee){this.service=Be,this.cd=Ee,this.categoty="guitar"}ngOnInit(){this.service.getRandomProducts(this.categoty).subscribe(Be=>{this.randomSuggestions=Be,this.cd.detectChanges()})}static#e=this.\u0275fac=function(Ee){return new(Ee||ge)(R.rXU(E.m),R.rXU(R.gRc))};static#t=this.\u0275cmp=R.VBU({type:ge,selectors:[["app-suggestions"]],inputs:{categoty:"categoty"},standalone:!0,features:[R.aNF],decls:4,vars:1,consts:[[1,"container"],[3,"product",4,"ngFor","ngForOf"],[3,"product"]],template:function(Ee,_e){1&Ee&&(R.j41(0,"h2"),R.EFF(1,"You might also like:"),R.k0s(),R.j41(2,"div",0),R.DNE(3,ie,1,1,"app-card",1),R.k0s()),2&Ee&&(R.R7$(3),R.Y8G("ngForOf",_e.randomSuggestions))},dependencies:[_.i,T.MD,T.Sq],styles:["h2[_ngcontent-%COMP%]{color:#9191de;text-align:center}div[_ngcontent-%COMP%]{padding:3%;display:flex;gap:20px}"],changeDetection:0})}return ge})()},7827:(rn,ze,k)=>{var _=k(345),T=k(4438),R=k(4454),E=k(6697),ie=k(177),Ae=k(2152),ge=k(708);let Ve=(()=>{class Y{transform(D){let L=new Date(D);return`${L.getDate()}/${L.getMonth()+1}/${L.getFullYear()}`}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275pipe=T.EJ8({name:"date",type:Y,pure:!0,standalone:!0})}return Y})();var Be=k(6483);function Ee(Y,C){if(1&Y){const D=T.RV6();T.j41(0,"img",7),T.bIt("click",function(){T.eBV(D);const Q=T.XpG(2);return T.Njj(Q.showMoreItems=!Q.showMoreItems)})("click",function(){T.eBV(D);const Q=T.XpG(2);return T.Njj(Q.changeArrow=!Q.changeArrow)}),T.k0s()}}function _e(Y,C){if(1&Y){const D=T.RV6();T.j41(0,"img",8),T.bIt("click",function(){T.eBV(D);const Q=T.XpG(2);return T.Njj(Q.showMoreItems=!Q.showMoreItems&&!Q.changeArrow)})("click",function(){T.eBV(D);const Q=T.XpG(2);return T.Njj(Q.changeArrow=!Q.changeArrow)}),T.k0s()}}function Ge(Y,C){if(1&Y&&(T.j41(0,"div",9)(1,"div"),T.nrm(2,"img",10),T.k0s(),T.j41(3,"div",11)(4,"span"),T.EFF(5),T.k0s(),T.j41(6,"span"),T.EFF(7),T.k0s(),T.j41(8,"span"),T.EFF(9),T.k0s(),T.j41(10,"span"),T.EFF(11),T.k0s(),T.j41(12,"span"),T.EFF(13),T.k0s()()()),2&Y){const D=C.$implicit,L=T.XpG(2);T.R7$(2),T.Y8G("src",D.product.product.photoUrl[0],T.B4B),T.R7$(3),T.JRh(L.purchase.email?L.purchase.email:"unknown"),T.R7$(2),T.JRh(D.product.product.category),T.R7$(2),T.JRh(D.product.product.model),T.R7$(2),T.SpI("Price: ",D.product.product.price,"$"),T.R7$(2),T.SpI("Dicsount: ",D.product.product.discount,"%")}}function lt(Y,C){if(1&Y&&(T.j41(0,"div",13)(1,"div"),T.nrm(2,"img",10),T.k0s(),T.j41(3,"div",11)(4,"span"),T.EFF(5),T.k0s(),T.j41(6,"span"),T.EFF(7),T.nI1(8,"upperCase"),T.k0s(),T.j41(9,"span"),T.EFF(10),T.nI1(11,"upperCase"),T.k0s(),T.j41(12,"span"),T.EFF(13),T.k0s(),T.j41(14,"span"),T.EFF(15),T.k0s()()()),2&Y){const D=C.$implicit,L=T.XpG(3);T.R7$(2),T.Y8G("src",D.product.product.photoUrl[0],T.B4B),T.R7$(3),T.JRh(L.purchase.email?L.purchase.email:"unknown"),T.R7$(2),T.JRh(T.bMT(8,6,D.product.product.category)),T.R7$(3),T.JRh(T.bMT(11,8,D.product.product.model)),T.R7$(3),T.SpI("Price: ",D.product.product.price,""),T.R7$(2),T.SpI("Dicsount: ",D.product.product.discount,"%")}}function rt(Y,C){if(1&Y&&(T.j41(0,"div"),T.DNE(1,lt,16,10,"div",12),T.nI1(2,"slice"),T.k0s()),2&Y){const D=T.XpG(2);T.R7$(),T.Y8G("ngForOf",T.i5U(2,1,D.purchase.products,1))}}function De(Y,C){if(1&Y&&(T.j41(0,"div",1)(1,"span"),T.EFF(2),T.nI1(3,"date"),T.k0s(),T.j41(4,"span"),T.EFF(5),T.k0s(),T.j41(6,"div",2),T.DNE(7,Ee,1,0,"img",3)(8,_e,1,0,"img",4),T.k0s(),T.DNE(9,Ge,14,6,"div",5),T.nI1(10,"slice"),T.DNE(11,rt,3,4,"div",6),T.k0s()),2&Y){const D=T.XpG();T.R7$(2),T.JRh(T.bMT(3,6,D.purchase.date)),T.R7$(3),T.SpI("total price: ",D.purchase.totalPrice,""),T.R7$(2),T.Y8G("ngIf",!D.changeArrow),T.R7$(),T.Y8G("ngIf",D.changeArrow),T.R7$(),T.Y8G("ngForOf",T.brH(10,8,D.purchase.products,0,1)),T.R7$(2),T.Y8G("ngIf",D.showMoreItems)}}let st=(()=>{class Y{constructor(){this.showMoreItems=!1,this.changeArrow=!1}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275cmp=T.VBU({type:Y,selectors:[["app-purchased-product"]],inputs:{purchase:"purchase"},standalone:!0,features:[T.aNF],decls:1,vars:1,consts:[["class","purchase-wrapper",4,"ngIf"],[1,"purchase-wrapper"],[1,"see-more-arrow"],["src","assets/arrow-down.png","alt","img",3,"click",4,"ngIf"],["src","assets/arrow-up.png","alt","img",3,"click",4,"ngIf"],["class","purchase",4,"ngFor","ngForOf"],[4,"ngIf"],["src","assets/arrow-down.png","alt","img",3,"click"],["src","assets/arrow-up.png","alt","img",3,"click"],[1,"purchase"],["alt","img",3,"src"],[1,"grid-container"],["class","other-items purchase",4,"ngFor","ngForOf"],[1,"other-items","purchase"]],template:function(L,Q){1&L&&T.DNE(0,De,12,12,"div",0),2&L&&T.Y8G("ngIf",Q.purchase)},dependencies:[ie.MD,ie.Sq,ie.bT,ie.P9,Be.P,Ve],styles:[".purchase-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;background-color:#7daecf;width:490px;position:relative}.purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]{position:absolute;bottom:-8px;width:35px;height:35px;display:flex;justify-content:center;align-items:center}.purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%]{display:flex;gap:3%;border:1px solid rgb(84,145,185);width:470px;height:120px;padding:10px;margin-bottom:36px}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:13%;height:100%}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:70px;height:100%}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]{display:grid;width:100%;gap:7px;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(3,1fr);text-align:center}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{align-self:center}.purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-self:center;border:none;background-color:#373b44;color:#fff;width:120px;height:20px;cursor:pointer}"]})}return Y})();var it=k(6569);function et(Y,C){if(1&Y&&(T.j41(0,"div"),T.nrm(1,"app-purchased-product",3),T.k0s()),2&Y){const D=C.$implicit;T.R7$(),T.Y8G("purchase",D)}}function Dt(Y,C){if(1&Y&&(T.j41(0,"div"),T.nrm(1,"app-purchased-product",3),T.k0s()),2&Y){const D=C.$implicit;T.R7$(),T.Y8G("purchase",D)}}let bt=(()=>{class Y{constructor(D,L){this.authService=D,this.cd=L,this.purchasedProducts=[],this.halfLength=0,this.length=0}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.loggedUser.pipe((0,E.s)(1)).subscribe(D=>{D&&D.user.purchasedProducts?(this.user=D,this.purchasedProducts=D?.user.purchasedProducts.slice(1).sort((L,Q)=>new Date(Q.date).getTime()-new Date(L.date).getTime()),this.length=this.purchasedProducts.length,this.halfLength=Math.ceil(this.purchasedProducts.length/2),console.log("Purchased products:",this.purchasedProducts)):console.log("No user or purchased products found.")},D=>{console.error("Error fetching user data:",D)})}static#e=this.\u0275fac=function(L){return new(L||Y)(T.rXU(it.p),T.rXU(T.gRc))};static#t=this.\u0275cmp=T.VBU({type:Y,selectors:[["app-purchased-products"]],standalone:!0,features:[T.aNF],decls:9,vars:10,consts:[[1,"container"],[1,"purchased-products"],[4,"ngFor","ngForOf"],[3,"purchase"]],template:function(L,Q){1&L&&(T.nrm(0,"app-header"),T.j41(1,"div",0)(2,"div",1),T.DNE(3,et,2,1,"div",2),T.nI1(4,"slice"),T.k0s(),T.j41(5,"div",1),T.DNE(6,Dt,2,1,"div",2),T.nI1(7,"slice"),T.k0s()(),T.nrm(8,"app-footer")),2&L&&(T.R7$(3),T.Y8G("ngForOf",T.brH(4,2,Q.purchasedProducts,0,Q.halfLength)),T.R7$(3),T.Y8G("ngForOf",T.brH(7,6,Q.purchasedProducts,Q.halfLength,Q.length)))},dependencies:[ie.MD,ie.Sq,ie.P9,Ae.l,ge.n,st],styles:[".container[_ngcontent-%COMP%]{padding:40px;display:flex;justify-content:center;gap:20px}.container[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:10px}"],changeDetection:0})}return Y})();var oe=k(9417),le=k(5435);function ee(Y,C){if(1&Y&&(T.j41(0,"div"),T.nrm(1,"app-purchased-product",6),T.k0s()),2&Y){const D=C.$implicit;T.R7$(),T.Y8G("purchase",D)}}function je(Y,C){if(1&Y&&(T.j41(0,"div"),T.nrm(1,"app-purchased-product",6),T.k0s()),2&Y){const D=C.$implicit;T.R7$(),T.Y8G("purchase",D)}}const Ct=[{path:"",redirectTo:"products",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.resolve().then(k.bind(k,513)).then(Y=>Y.LoginAndRegistrationModule)},{path:"about-us",loadComponent:()=>k.e(70).then(k.bind(k,9070)).then(Y=>Y.AboutUsComponent)},{path:"contact",loadComponent:()=>k.e(222).then(k.bind(k,3222)).then(Y=>Y.ContanctComponent)},{path:"products",loadChildren:()=>Promise.resolve().then(k.bind(k,8569)).then(Y=>Y.ProductPageModule)},{path:"profile/:id",loadChildren:()=>Promise.resolve().then(k.bind(k,1343)).then(Y=>Y.ProfileModuleModule)},{path:"single-product/:id",loadChildren:()=>Promise.resolve().then(k.bind(k,2735)).then(Y=>Y.SingleProductPageModule)},{path:"categoty/:category",loadChildren:()=>k.e(456).then(k.bind(k,9456)).then(Y=>Y.SinleCategoryPageModuleModule)},{path:"purchasedProducts",component:bt},{path:"allPurchase",component:(()=>{class Y{constructor(D){this.service=D,this.halfLength=0,this.length=0,this.email=""}ngOnInit(){this.service.getAllClientPurchases().subscribe(D=>{if(D){const L=D.sort((Q,he)=>new Date(he.date).getTime()-new Date(Q.date).getTime());this.allPurchasedProducts=L,this.searched=L,this.length=D.length,this.halfLength=Math.ceil(D.length/2)}})}search(){this.email&&(this.searched=this.allPurchasedProducts?.filter(D=>D.email===this.email).sort((D,L)=>new Date(L.date).getTime()-new Date(D.date).getTime()))}static#e=this.\u0275fac=function(L){return new(L||Y)(T.rXU(le.m))};static#t=this.\u0275cmp=T.VBU({type:Y,selectors:[["app-all-client-purchases"]],standalone:!0,features:[T.aNF],decls:13,vars:11,consts:[[1,"search"],["type","email","placeholder","enter email",3,"ngModelChange","ngModel"],[3,"click"],[1,"container"],[1,"purchased-products"],[4,"ngFor","ngForOf"],[3,"purchase"]],template:function(L,Q){1&L&&(T.nrm(0,"app-header"),T.j41(1,"div",0)(2,"input",1),T.mxI("ngModelChange",function(Pe){return T.DH7(Q.email,Pe)||(Q.email=Pe),Pe}),T.k0s(),T.j41(3,"button",2),T.bIt("click",function(){return Q.search()}),T.EFF(4,"Search"),T.k0s()(),T.j41(5,"div",3)(6,"div",4),T.DNE(7,ee,2,1,"div",5),T.nI1(8,"slice"),T.k0s(),T.j41(9,"div",4),T.DNE(10,je,2,1,"div",5),T.nI1(11,"slice"),T.k0s()(),T.nrm(12,"app-footer")),2&L&&(T.R7$(2),T.R50("ngModel",Q.email),T.R7$(5),T.Y8G("ngForOf",T.brH(8,3,Q.searched,0,Q.halfLength)),T.R7$(3),T.Y8G("ngForOf",T.brH(11,7,Q.searched,Q.halfLength,Q.length)))},dependencies:[ie.MD,ie.Sq,ie.P9,oe.YN,oe.me,oe.BC,oe.vS,st,Ae.l,ge.n],styles:[".container[_ngcontent-%COMP%]{padding:40px;display:flex;justify-content:center;gap:20px}.container[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:10px}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:30px;gap:10px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;border:none;border-radius:4px}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#71bedb;color:#fff;cursor:pointer}.search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{color:green}"]})}return Y})()}];let ue=(()=>{class Y{static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275mod=T.$C({type:Y});static#n=this.\u0275inj=T.G2t({imports:[R.iI.forRoot(Ct,{useHash:!0}),R.iI]})}return Y})(),He=(()=>{class Y{constructor(){this.title="musicShop"}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275cmp=T.VBU({type:Y,selectors:[["app-root"]],decls:1,vars:0,template:function(L,Q){1&L&&T.nrm(0,"router-outlet")},dependencies:[R.n3]})}return Y})();var Lt=k(513),Ut=k(8569),ln=k(1343),Ht=k(2735),en=k(3227),vt=k(9969);function xe(Y){return new T.wOt(3e3,!1)}function Or(Y){switch(Y.length){case 0:return new vt.sf;case 1:return Y[0];default:return new vt.ui(Y)}}function Jt(Y,C,D=new Map,L=new Map){const Q=[],he=[];let Pe=-1,Ue=null;if(C.forEach(ht=>{const Mt=ht.get("offset"),on=Mt==Pe,vn=on&&Ue||new Map;ht.forEach((ur,er)=>{let Sn=er,Wn=ur;if("offset"!==er)switch(Sn=Y.normalizePropertyName(Sn,Q),Wn){case vt.FX:Wn=D.get(er);break;case vt.kp:Wn=L.get(er);break;default:Wn=Y.normalizeStyleValue(er,Sn,Wn,Q)}vn.set(Sn,Wn)}),on||he.push(vn),Ue=vn,Pe=Mt}),Q.length)throw function Zn(Y){return new T.wOt(3502,!1)}();return he}function Zt(Y,C,D,L){switch(C){case"start":Y.onStart(()=>L(D&&Qr(D,"start",Y)));break;case"done":Y.onDone(()=>L(D&&Qr(D,"done",Y)));break;case"destroy":Y.onDestroy(()=>L(D&&Qr(D,"destroy",Y)))}}function Qr(Y,C,D){const he=On(Y.element,Y.triggerName,Y.fromState,Y.toState,C||Y.phaseName,D.totalTime??Y.totalTime,!!D.disabled),Pe=Y._data;return null!=Pe&&(he._data=Pe),he}function On(Y,C,D,L,Q="",he=0,Pe){return{element:Y,triggerName:C,fromState:D,toState:L,phaseName:Q,totalTime:he,disabled:!!Pe}}function Nr(Y,C,D){let L=Y.get(C);return L||Y.set(C,L=D),L}function ke(Y){const C=Y.indexOf(":");return[Y.substring(1,C),Y.slice(C+1)]}const we=typeof document>"u"?null:document.documentElement;function Ce(Y){const C=Y.parentNode||Y.host||null;return C===we?null:C}let Pt=null,pe=!1;function me(Y,C){for(;C;){if(C===Y)return!0;C=Ce(C)}return!1}function wt(Y,C,D){if(D)return Array.from(Y.querySelectorAll(C));const L=Y.querySelector(C);return L?[L]:[]}let En=(()=>{class Y{validateStyleProperty(D){return function q(Y){Pt||(Pt=function se(){return typeof document<"u"?document.body:null}()||{},pe=!!Pt.style&&"WebkitAppearance"in Pt.style);let C=!0;return Pt.style&&!function Ke(Y){return"ebkit"==Y.substring(1,6)}(Y)&&(C=Y in Pt.style,!C&&pe&&(C="Webkit"+Y.charAt(0).toUpperCase()+Y.slice(1)in Pt.style)),C}(D)}matchesElement(D,L){return!1}containsElement(D,L){return me(D,L)}getParentElement(D){return Ce(D)}query(D,L,Q){return wt(D,L,Q)}computeStyle(D,L,Q){return Q||""}animate(D,L,Q,he,Pe,Ue=[],ht){return new vt.sf(Q,he)}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275prov=T.jDH({token:Y,factory:Y.\u0275fac})}return Y})();class Bn{static#e=this.NOOP=new En}class zn{}const Wt=1e3,Yr="ng-enter",Ms="ng-leave",cs="ng-trigger",ir=".ng-trigger",is="ng-animating",Gi=".ng-animating";function ri(Y){if("number"==typeof Y)return Y;const C=Y.match(/^(-?[\.\d]+)(m?s)/);return!C||C.length<2?0:yt(parseFloat(C[1]),C[2])}function yt(Y,C){return"s"===C?Y*Wt:Y}function Xe(Y,C,D){return Y.hasOwnProperty("duration")?Y:function kt(Y,C,D){let Q,he=0,Pe="";if("string"==typeof Y){const Ue=Y.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Ue)return C.push(xe()),{duration:0,delay:0,easing:""};Q=yt(parseFloat(Ue[1]),Ue[2]);const ht=Ue[3];null!=ht&&(he=yt(parseFloat(ht),Ue[4]));const Mt=Ue[5];Mt&&(Pe=Mt)}else Q=Y;if(!D){let Ue=!1,ht=C.length;Q<0&&(C.push(function qe(){return new T.wOt(3100,!1)}()),Ue=!0),he<0&&(C.push(function dt(){return new T.wOt(3101,!1)}()),Ue=!0),Ue&&C.splice(ht,0,xe())}return{duration:Q,delay:he,easing:Pe}}(Y,C,D)}function ve(Y,C,D){C.forEach((L,Q)=>{const he=br(Q);D&&!D.has(Q)&&D.set(Q,Y.style[he]),Y.style[he]=L})}function Ie(Y,C){C.forEach((D,L)=>{const Q=br(L);Y.style[Q]=""})}function ut(Y){return Array.isArray(Y)?1==Y.length?Y[0]:(0,vt.K2)(Y):Y}const Xt=new RegExp("{{\\s*(.+?)\\s*}}","g");function jt(Y){let C=[];if("string"==typeof Y){let D;for(;D=Xt.exec(Y);)C.push(D[1]);Xt.lastIndex=0}return C}function Rn(Y,C,D){const L=`${Y}`,Q=L.replace(Xt,(he,Pe)=>{let Ue=C[Pe];return null==Ue&&(D.push(function Et(Y){return new T.wOt(3003,!1)}()),Ue=""),Ue.toString()});return Q==L?Y:Q}const Tn=/-+([a-z0-9])/g;function br(Y){return Y.replace(Tn,(...C)=>C[1].toUpperCase())}function Xr(Y,C,D){switch(C.type){case vt.If.Trigger:return Y.visitTrigger(C,D);case vt.If.State:return Y.visitState(C,D);case vt.If.Transition:return Y.visitTransition(C,D);case vt.If.Sequence:return Y.visitSequence(C,D);case vt.If.Group:return Y.visitGroup(C,D);case vt.If.Animate:return Y.visitAnimate(C,D);case vt.If.Keyframes:return Y.visitKeyframes(C,D);case vt.If.Style:return Y.visitStyle(C,D);case vt.If.Reference:return Y.visitReference(C,D);case vt.If.AnimateChild:return Y.visitAnimateChild(C,D);case vt.If.AnimateRef:return Y.visitAnimateRef(C,D);case vt.If.Query:return Y.visitQuery(C,D);case vt.If.Stagger:return Y.visitStagger(C,D);default:throw function Ye(Y){return new T.wOt(3004,!1)}()}}function Mi(Y,C){return window.getComputedStyle(Y)[C]}const yr=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ir extends zn{normalizePropertyName(C,D){return br(C)}normalizeStyleValue(C,D,L,Q){let he="";const Pe=L.toString().trim();if(yr.has(D)&&0!==L&&"0"!==L)if("number"==typeof L)he="px";else{const Ue=L.match(/^[+-]?[\d\.]+([a-z]*)$/);Ue&&0==Ue[1].length&&Q.push(function Kt(Y,C){return new T.wOt(3005,!1)}())}return Pe+he}}const Nn="*";const oo=new Set(["true","1"]),Qo=new Set(["false","0"]);function ua(Y,C){const D=oo.has(Y)||Qo.has(Y),L=oo.has(C)||Qo.has(C);return(Q,he)=>{let Pe=Y==Nn||Y==Q,Ue=C==Nn||C==he;return!Pe&&D&&"boolean"==typeof Q&&(Pe=Q?oo.has(Y):Qo.has(Y)),!Ue&&L&&"boolean"==typeof he&&(Ue=he?oo.has(C):Qo.has(C)),Pe&&Ue}}const nr=new RegExp("s*:selfs*,?","g");function Eo(Y,C,D,L){return new Er(Y).build(C,D,L)}class Er{constructor(C){this._driver=C}build(C,D,L){const Q=new la(D);return this._resetContextStyleTimingState(Q),Xr(this,ut(C),Q)}_resetContextStyleTimingState(C){C.currentQuerySelector="",C.collectedStyles=new Map,C.collectedStyles.set("",new Map),C.currentTime=0}visitTrigger(C,D){let L=D.queryCount=0,Q=D.depCount=0;const he=[],Pe=[];return"@"==C.name.charAt(0)&&D.errors.push(function pn(){return new T.wOt(3006,!1)}()),C.definitions.forEach(Ue=>{if(this._resetContextStyleTimingState(D),Ue.type==vt.If.State){const ht=Ue,Mt=ht.name;Mt.toString().split(/\s*,\s*/).forEach(on=>{ht.name=on,he.push(this.visitState(ht,D))}),ht.name=Mt}else if(Ue.type==vt.If.Transition){const ht=this.visitTransition(Ue,D);L+=ht.queryCount,Q+=ht.depCount,Pe.push(ht)}else D.errors.push(function nn(){return new T.wOt(3007,!1)}())}),{type:vt.If.Trigger,name:C.name,states:he,transitions:Pe,queryCount:L,depCount:Q,options:null}}visitState(C,D){const L=this.visitStyle(C.styles,D),Q=C.options&&C.options.params||null;if(L.containsDynamicStyles){const he=new Set,Pe=Q||{};L.styles.forEach(Ue=>{Ue instanceof Map&&Ue.forEach(ht=>{jt(ht).forEach(Mt=>{Pe.hasOwnProperty(Mt)||he.add(Mt)})})}),he.size&&D.errors.push(function sn(Y,C){return new T.wOt(3008,!1)}(0,he.values()))}return{type:vt.If.State,name:C.name,style:L,options:Q?{params:Q}:null}}visitTransition(C,D){D.queryCount=0,D.depCount=0;const L=Xr(this,ut(C.animation),D),Q=function ar(Y,C){const D=[];return"string"==typeof Y?Y.split(/\s*,\s*/).forEach(L=>function Fo(Y,C,D){if(":"==Y[0]){const ht=function zi(Y,C){switch(Y){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(D,L)=>parseFloat(L)>parseFloat(D);case":decrement":return(D,L)=>parseFloat(L)<parseFloat(D);default:return C.push(function Nt(Y){return new T.wOt(3016,!1)}()),"* => *"}}(Y,D);if("function"==typeof ht)return void C.push(ht);Y=ht}const L=Y.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==L||L.length<4)return D.push(function ti(Y){return new T.wOt(3015,!1)}()),C;const Q=L[1],he=L[2],Pe=L[3];C.push(ua(Q,Pe)),"<"==he[0]&&(Q!=Nn||Pe!=Nn)&&C.push(ua(Pe,Q))}(L,D,C)):D.push(Y),D}(C.expr,D.errors);return{type:vt.If.Transition,matchers:Q,animation:L,queryCount:D.queryCount,depCount:D.depCount,options:Bi(C.options)}}visitSequence(C,D){return{type:vt.If.Sequence,steps:C.steps.map(L=>Xr(this,L,D)),options:Bi(C.options)}}visitGroup(C,D){const L=D.currentTime;let Q=0;const he=C.steps.map(Pe=>{D.currentTime=L;const Ue=Xr(this,Pe,D);return Q=Math.max(Q,D.currentTime),Ue});return D.currentTime=Q,{type:vt.If.Group,steps:he,options:Bi(C.options)}}visitAnimate(C,D){const L=function Sr(Y,C){if(Y.hasOwnProperty("duration"))return Y;if("number"==typeof Y)return Ci(Xe(Y,C).duration,0,"");const D=Y;if(D.split(/\s+/).some(he=>"{"==he.charAt(0)&&"{"==he.charAt(1))){const he=Ci(0,0,"");return he.dynamic=!0,he.strValue=D,he}const Q=Xe(D,C);return Ci(Q.duration,Q.delay,Q.easing)}(C.timings,D.errors);D.currentAnimateTimings=L;let Q,he=C.styles?C.styles:(0,vt.iF)({});if(he.type==vt.If.Keyframes)Q=this.visitKeyframes(he,D);else{let Pe=C.styles,Ue=!1;if(!Pe){Ue=!0;const Mt={};L.easing&&(Mt.easing=L.easing),Pe=(0,vt.iF)(Mt)}D.currentTime+=L.duration+L.delay;const ht=this.visitStyle(Pe,D);ht.isEmptyStep=Ue,Q=ht}return D.currentAnimateTimings=null,{type:vt.If.Animate,timings:L,style:Q,options:null}}visitStyle(C,D){const L=this._makeStyleAst(C,D);return this._validateStyleAst(L,D),L}_makeStyleAst(C,D){const L=[],Q=Array.isArray(C.styles)?C.styles:[C.styles];for(let Ue of Q)"string"==typeof Ue?Ue===vt.kp?L.push(Ue):D.errors.push(new T.wOt(3002,!1)):L.push(new Map(Object.entries(Ue)));let he=!1,Pe=null;return L.forEach(Ue=>{if(Ue instanceof Map&&(Ue.has("easing")&&(Pe=Ue.get("easing"),Ue.delete("easing")),!he))for(let ht of Ue.values())if(ht.toString().indexOf("{{")>=0){he=!0;break}}),{type:vt.If.Style,styles:L,easing:Pe,offset:C.offset,containsDynamicStyles:he,options:null}}_validateStyleAst(C,D){const L=D.currentAnimateTimings;let Q=D.currentTime,he=D.currentTime;L&&he>0&&(he-=L.duration+L.delay),C.styles.forEach(Pe=>{"string"!=typeof Pe&&Pe.forEach((Ue,ht)=>{const Mt=D.collectedStyles.get(D.currentQuerySelector),on=Mt.get(ht);let vn=!0;on&&(he!=Q&&he>=on.startTime&&Q<=on.endTime&&(D.errors.push(function Ln(Y,C,D,L,Q){return new T.wOt(3010,!1)}()),vn=!1),he=on.startTime),vn&&Mt.set(ht,{startTime:he,endTime:Q}),D.options&&function Qe(Y,C,D){const L=C.params||{},Q=jt(Y);Q.length&&Q.forEach(he=>{L.hasOwnProperty(he)||D.push(function _t(Y){return new T.wOt(3001,!1)}())})}(Ue,D.options,D.errors)})})}visitKeyframes(C,D){const L={type:vt.If.Keyframes,styles:[],options:null};if(!D.currentAnimateTimings)return D.errors.push(function nt(){return new T.wOt(3011,!1)}()),L;let he=0;const Pe=[];let Ue=!1,ht=!1,Mt=0;const on=C.steps.map(Lr=>{const pi=this._makeStyleAst(Lr,D);let kn=null!=pi.offset?pi.offset:function Rs(Y){if("string"==typeof Y)return null;let C=null;if(Array.isArray(Y))Y.forEach(D=>{if(D instanceof Map&&D.has("offset")){const L=D;C=parseFloat(L.get("offset")),L.delete("offset")}});else if(Y instanceof Map&&Y.has("offset")){const D=Y;C=parseFloat(D.get("offset")),D.delete("offset")}return C}(pi.styles),os=0;return null!=kn&&(he++,os=pi.offset=kn),ht=ht||os<0||os>1,Ue=Ue||os<Mt,Mt=os,Pe.push(os),pi});ht&&D.errors.push(function Cn(){return new T.wOt(3012,!1)}()),Ue&&D.errors.push(function Gn(){return new T.wOt(3200,!1)}());const vn=C.steps.length;let ur=0;he>0&&he<vn?D.errors.push(function rr(){return new T.wOt(3202,!1)}()):0==he&&(ur=1/(vn-1));const er=vn-1,Sn=D.currentTime,Wn=D.currentAnimateTimings,Vr=Wn.duration;return on.forEach((Lr,pi)=>{const kn=ur>0?pi==er?1:ur*pi:Pe[pi],os=kn*Vr;D.currentTime=Sn+Wn.delay+os,Wn.duration=os,this._validateStyleAst(Lr,D),Lr.offset=kn,L.styles.push(Lr)}),L}visitReference(C,D){return{type:vt.If.Reference,animation:Xr(this,ut(C.animation),D),options:Bi(C.options)}}visitAnimateChild(C,D){return D.depCount++,{type:vt.If.AnimateChild,options:Bi(C.options)}}visitAnimateRef(C,D){return{type:vt.If.AnimateRef,animation:this.visitReference(C.animation,D),options:Bi(C.options)}}visitQuery(C,D){const L=D.currentQuerySelector,Q=C.options||{};D.queryCount++,D.currentQuery=C;const[he,Pe]=function Vo(Y){const C=!!Y.split(/\s*,\s*/).find(D=>":self"==D);return C&&(Y=Y.replace(nr,"")),Y=Y.replace(/@\*/g,ir).replace(/@\w+/g,D=>ir+"-"+D.slice(1)).replace(/:animating/g,Gi),[Y,C]}(C.selector);D.currentQuerySelector=L.length?L+" "+he:he,Nr(D.collectedStyles,D.currentQuerySelector,new Map);const Ue=Xr(this,ut(C.animation),D);return D.currentQuery=null,D.currentQuerySelector=L,{type:vt.If.Query,selector:he,limit:Q.limit||0,optional:!!Q.optional,includeSelf:Pe,animation:Ue,originalSelector:C.selector,options:Bi(C.options)}}visitStagger(C,D){D.currentQuery||D.errors.push(function St(){return new T.wOt(3013,!1)}());const L="full"===C.timings?{duration:0,delay:0,easing:"full"}:Xe(C.timings,D.errors,!0);return{type:vt.If.Stagger,animation:Xr(this,ut(C.animation),D),timings:L,options:null}}}class la{constructor(C){this.errors=C,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Bi(Y){return Y?(Y={...Y}).params&&(Y.params=function Qs(Y){return Y?{...Y}:null}(Y.params)):Y={},Y}function Ci(Y,C,D){return{duration:Y,delay:C,easing:D}}function vr(Y,C,D,L,Q,he,Pe=null,Ue=!1){return{type:1,element:Y,keyframes:C,preStyleProps:D,postStyleProps:L,duration:Q,delay:he,totalTime:Q+he,easing:Pe,subTimeline:Ue}}class fs{constructor(){this._map=new Map}get(C){return this._map.get(C)||[]}append(C,D){let L=this._map.get(C);L||this._map.set(C,L=[]),L.push(...D)}has(C){return this._map.has(C)}clear(){this._map.clear()}}const Lo=new RegExp(":enter","g"),zr=new RegExp(":leave","g");function ni(Y,C,D,L,Q,he=new Map,Pe=new Map,Ue,ht,Mt=[]){return(new ss).buildKeyframes(Y,C,D,L,Q,he,Pe,Ue,ht,Mt)}class ss{buildKeyframes(C,D,L,Q,he,Pe,Ue,ht,Mt,on=[]){Mt=Mt||new fs;const vn=new oi(C,D,Mt,Q,he,on,[]);vn.options=ht;const ur=ht.delay?ri(ht.delay):0;vn.currentTimeline.delayNextStep(ur),vn.currentTimeline.setStyles([Pe],null,vn.errors,ht),Xr(this,L,vn);const er=vn.timelines.filter(Sn=>Sn.containsAnimation());if(er.length&&Ue.size){let Sn;for(let Wn=er.length-1;Wn>=0;Wn--){const Vr=er[Wn];if(Vr.element===D){Sn=Vr;break}}Sn&&!Sn.allowOnlyTimelineStyles()&&Sn.setStyles([Ue],null,vn.errors,ht)}return er.length?er.map(Sn=>Sn.buildKeyframes()):[vr(D,[],[],[],0,ur,"",!1)]}visitTrigger(C,D){}visitState(C,D){}visitTransition(C,D){}visitAnimateChild(C,D){const L=D.subInstructions.get(D.element);if(L){const Q=D.createSubContext(C.options),he=D.currentTimeline.currentTime,Pe=this._visitSubInstructions(L,Q,Q.options);he!=Pe&&D.transformIntoNewTimeline(Pe)}D.previousNode=C}visitAnimateRef(C,D){const L=D.createSubContext(C.options);L.transformIntoNewTimeline(),this._applyAnimationRefDelays([C.options,C.animation.options],D,L),this.visitReference(C.animation,L),D.transformIntoNewTimeline(L.currentTimeline.currentTime),D.previousNode=C}_applyAnimationRefDelays(C,D,L){for(const Q of C){const he=Q?.delay;if(he){const Pe="number"==typeof he?he:ri(Rn(he,Q?.params??{},D.errors));L.delayNextStep(Pe)}}}_visitSubInstructions(C,D,L){let he=D.currentTimeline.currentTime;const Pe=null!=L.duration?ri(L.duration):null,Ue=null!=L.delay?ri(L.delay):null;return 0!==Pe&&C.forEach(ht=>{const Mt=D.appendInstructionToTimeline(ht,Pe,Ue);he=Math.max(he,Mt.duration+Mt.delay)}),he}visitReference(C,D){D.updateOptions(C.options,!0),Xr(this,C.animation,D),D.previousNode=C}visitSequence(C,D){const L=D.subContextCount;let Q=D;const he=C.options;if(he&&(he.params||he.delay)&&(Q=D.createSubContext(he),Q.transformIntoNewTimeline(),null!=he.delay)){Q.previousNode.type==vt.If.Style&&(Q.currentTimeline.snapshotCurrentStyles(),Q.previousNode=hn);const Pe=ri(he.delay);Q.delayNextStep(Pe)}C.steps.length&&(C.steps.forEach(Pe=>Xr(this,Pe,Q)),Q.currentTimeline.applyStylesToKeyframe(),Q.subContextCount>L&&Q.transformIntoNewTimeline()),D.previousNode=C}visitGroup(C,D){const L=[];let Q=D.currentTimeline.currentTime;const he=C.options&&C.options.delay?ri(C.options.delay):0;C.steps.forEach(Pe=>{const Ue=D.createSubContext(C.options);he&&Ue.delayNextStep(he),Xr(this,Pe,Ue),Q=Math.max(Q,Ue.currentTimeline.currentTime),L.push(Ue.currentTimeline)}),L.forEach(Pe=>D.currentTimeline.mergeTimelineCollectedStyles(Pe)),D.transformIntoNewTimeline(Q),D.previousNode=C}_visitTiming(C,D){if(C.dynamic){const L=C.strValue;return Xe(D.params?Rn(L,D.params,D.errors):L,D.errors)}return{duration:C.duration,delay:C.delay,easing:C.easing}}visitAnimate(C,D){const L=D.currentAnimateTimings=this._visitTiming(C.timings,D),Q=D.currentTimeline;L.delay&&(D.incrementTime(L.delay),Q.snapshotCurrentStyles());const he=C.style;he.type==vt.If.Keyframes?this.visitKeyframes(he,D):(D.incrementTime(L.duration),this.visitStyle(he,D),Q.applyStylesToKeyframe()),D.currentAnimateTimings=null,D.previousNode=C}visitStyle(C,D){const L=D.currentTimeline,Q=D.currentAnimateTimings;!Q&&L.hasCurrentStyleProperties()&&L.forwardFrame();const he=Q&&Q.easing||C.easing;C.isEmptyStep?L.applyEmptyStep(he):L.setStyles(C.styles,he,D.errors,D.options),D.previousNode=C}visitKeyframes(C,D){const L=D.currentAnimateTimings,Q=D.currentTimeline.duration,he=L.duration,Ue=D.createSubContext().currentTimeline;Ue.easing=L.easing,C.styles.forEach(ht=>{Ue.forwardTime((ht.offset||0)*he),Ue.setStyles(ht.styles,ht.easing,D.errors,D.options),Ue.applyStylesToKeyframe()}),D.currentTimeline.mergeTimelineCollectedStyles(Ue),D.transformIntoNewTimeline(Q+he),D.previousNode=C}visitQuery(C,D){const L=D.currentTimeline.currentTime,Q=C.options||{},he=Q.delay?ri(Q.delay):0;he&&(D.previousNode.type===vt.If.Style||0==L&&D.currentTimeline.hasCurrentStyleProperties())&&(D.currentTimeline.snapshotCurrentStyles(),D.previousNode=hn);let Pe=L;const Ue=D.invokeQuery(C.selector,C.originalSelector,C.limit,C.includeSelf,!!Q.optional,D.errors);D.currentQueryTotal=Ue.length;let ht=null;Ue.forEach((Mt,on)=>{D.currentQueryIndex=on;const vn=D.createSubContext(C.options,Mt);he&&vn.delayNextStep(he),Mt===D.element&&(ht=vn.currentTimeline),Xr(this,C.animation,vn),vn.currentTimeline.applyStylesToKeyframe(),Pe=Math.max(Pe,vn.currentTimeline.currentTime)}),D.currentQueryIndex=0,D.currentQueryTotal=0,D.transformIntoNewTimeline(Pe),ht&&(D.currentTimeline.mergeTimelineCollectedStyles(ht),D.currentTimeline.snapshotCurrentStyles()),D.previousNode=C}visitStagger(C,D){const L=D.parentContext,Q=D.currentTimeline,he=C.timings,Pe=Math.abs(he.duration),Ue=Pe*(D.currentQueryTotal-1);let ht=Pe*D.currentQueryIndex;switch(he.duration<0?"reverse":he.easing){case"reverse":ht=Ue-ht;break;case"full":ht=L.currentStaggerTime}const on=D.currentTimeline;ht&&on.delayNextStep(ht);const vn=on.currentTime;Xr(this,C.animation,D),D.previousNode=C,L.currentStaggerTime=Q.currentTime-vn+(Q.startTime-L.currentTimeline.startTime)}}const hn={};class oi{constructor(C,D,L,Q,he,Pe,Ue,ht){this._driver=C,this.element=D,this.subInstructions=L,this._enterClassName=Q,this._leaveClassName=he,this.errors=Pe,this.timelines=Ue,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=hn,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=ht||new ps(this._driver,D,0),Ue.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(C,D){if(!C)return;const L=C;let Q=this.options;null!=L.duration&&(Q.duration=ri(L.duration)),null!=L.delay&&(Q.delay=ri(L.delay));const he=L.params;if(he){let Pe=Q.params;Pe||(Pe=this.options.params={}),Object.keys(he).forEach(Ue=>{(!D||!Pe.hasOwnProperty(Ue))&&(Pe[Ue]=Rn(he[Ue],Pe,this.errors))})}}_copyOptions(){const C={};if(this.options){const D=this.options.params;if(D){const L=C.params={};Object.keys(D).forEach(Q=>{L[Q]=D[Q]})}}return C}createSubContext(C=null,D,L){const Q=D||this.element,he=new oi(this._driver,Q,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Q,L||0));return he.previousNode=this.previousNode,he.currentAnimateTimings=this.currentAnimateTimings,he.options=this._copyOptions(),he.updateOptions(C),he.currentQueryIndex=this.currentQueryIndex,he.currentQueryTotal=this.currentQueryTotal,he.parentContext=this,this.subContextCount++,he}transformIntoNewTimeline(C){return this.previousNode=hn,this.currentTimeline=this.currentTimeline.fork(this.element,C),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(C,D,L){const Q={duration:D??C.duration,delay:this.currentTimeline.currentTime+(L??0)+C.delay,easing:""},he=new ks(this._driver,C.element,C.keyframes,C.preStyleProps,C.postStyleProps,Q,C.stretchStartingKeyframe);return this.timelines.push(he),Q}incrementTime(C){this.currentTimeline.forwardTime(this.currentTimeline.duration+C)}delayNextStep(C){C>0&&this.currentTimeline.delayNextStep(C)}invokeQuery(C,D,L,Q,he,Pe){let Ue=[];if(Q&&Ue.push(this.element),C.length>0){C=(C=C.replace(Lo,"."+this._enterClassName)).replace(zr,"."+this._leaveClassName);let Mt=this._driver.query(this.element,C,1!=L);0!==L&&(Mt=L<0?Mt.slice(Mt.length+L,Mt.length):Mt.slice(0,L)),Ue.push(...Mt)}return!he&&0==Ue.length&&Pe.push(function mt(Y){return new T.wOt(3014,!1)}()),Ue}}class ps{constructor(C,D,L,Q){this._driver=C,this.element=D,this.startTime=L,this._elementTimelineStylesLookup=Q,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(D),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(D,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(C){const D=1===this._keyframes.size&&this._pendingStyles.size;this.duration||D?(this.forwardTime(this.currentTime+C),D&&this.snapshotCurrentStyles()):this.startTime+=C}fork(C,D){return this.applyStylesToKeyframe(),new ps(this._driver,C,D||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(C){this.applyStylesToKeyframe(),this.duration=C,this._loadKeyframe()}_updateStyle(C,D){this._localTimelineStyles.set(C,D),this._globalTimelineStyles.set(C,D),this._styleSummary.set(C,{time:this.currentTime,value:D})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(C){C&&this._previousKeyframe.set("easing",C);for(let[D,L]of this._globalTimelineStyles)this._backFill.set(D,L||vt.kp),this._currentKeyframe.set(D,vt.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(C,D,L,Q){D&&this._previousKeyframe.set("easing",D);const he=Q&&Q.params||{},Pe=function Ys(Y,C){const D=new Map;let L;return Y.forEach(Q=>{if("*"===Q){L??=C.keys();for(let he of L)D.set(he,vt.kp)}else for(let[he,Pe]of Q)D.set(he,Pe)}),D}(C,this._globalTimelineStyles);for(let[Ue,ht]of Pe){const Mt=Rn(ht,he,L);this._pendingStyles.set(Ue,Mt),this._localTimelineStyles.has(Ue)||this._backFill.set(Ue,this._globalTimelineStyles.get(Ue)??vt.kp),this._updateStyle(Ue,Mt)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((C,D)=>{this._currentKeyframe.set(D,C)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((C,D)=>{this._currentKeyframe.has(D)||this._currentKeyframe.set(D,C)}))}snapshotCurrentStyles(){for(let[C,D]of this._localTimelineStyles)this._pendingStyles.set(C,D),this._updateStyle(C,D)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const C=[];for(let D in this._currentKeyframe)C.push(D);return C}mergeTimelineCollectedStyles(C){C._styleSummary.forEach((D,L)=>{const Q=this._styleSummary.get(L);(!Q||D.time>Q.time)&&this._updateStyle(L,D.value)})}buildKeyframes(){this.applyStylesToKeyframe();const C=new Set,D=new Set,L=1===this._keyframes.size&&0===this.duration;let Q=[];this._keyframes.forEach((Ue,ht)=>{const Mt=new Map([...this._backFill,...Ue]);Mt.forEach((on,vn)=>{on===vt.FX?C.add(vn):on===vt.kp&&D.add(vn)}),L||Mt.set("offset",ht/this.duration),Q.push(Mt)});const he=[...C.values()],Pe=[...D.values()];if(L){const Ue=Q[0],ht=new Map(Ue);Ue.set("offset",0),ht.set("offset",1),Q=[Ue,ht]}return vr(this.element,Q,he,Pe,this.duration,this.startTime,this.easing,!1)}}class ks extends ps{constructor(C,D,L,Q,he,Pe,Ue=!1){super(C,D,Pe.delay),this.keyframes=L,this.preStyleProps=Q,this.postStyleProps=he,this._stretchStartingKeyframe=Ue,this.timings={duration:Pe.duration,delay:Pe.delay,easing:Pe.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let C=this.keyframes,{delay:D,duration:L,easing:Q}=this.timings;if(this._stretchStartingKeyframe&&D){const he=[],Pe=L+D,Ue=D/Pe,ht=new Map(C[0]);ht.set("offset",0),he.push(ht);const Mt=new Map(C[0]);Mt.set("offset",gs(Ue)),he.push(Mt);const on=C.length-1;for(let vn=1;vn<=on;vn++){let ur=new Map(C[vn]);const er=ur.get("offset");ur.set("offset",gs((D+er*L)/Pe)),he.push(ur)}L=Pe,D=0,Q="",C=he}return vr(this.element,C,this.preStyleProps,this.postStyleProps,L,D,Q,!0)}}function gs(Y,C=3){const D=Math.pow(10,C-1);return Math.round(Y*D)/D}function Ri(Y,C,D,L,Q,he,Pe,Ue,ht,Mt,on,vn,ur){return{type:0,element:Y,triggerName:C,isRemovalTransition:Q,fromState:D,fromStyles:he,toState:L,toStyles:Pe,timelines:Ue,queriedElements:ht,preStyleProps:Mt,postStyleProps:on,totalTime:vn,errors:ur}}const es={};class Wi{constructor(C,D,L){this._triggerName=C,this.ast=D,this._stateStyles=L}match(C,D,L,Q){return function ts(Y,C,D,L,Q){return Y.some(he=>he(C,D,L,Q))}(this.ast.matchers,C,D,L,Q)}buildStyles(C,D,L){let Q=this._stateStyles.get("*");return void 0!==C&&(Q=this._stateStyles.get(C?.toString())||Q),Q?Q.buildStyles(D,L):new Map}build(C,D,L,Q,he,Pe,Ue,ht,Mt,on){const vn=[],ur=this.ast.options&&this.ast.options.params||es,Sn=this.buildStyles(L,Ue&&Ue.params||es,vn),Wn=ht&&ht.params||es,Vr=this.buildStyles(Q,Wn,vn),Lr=new Set,pi=new Map,kn=new Map,os="void"===Q,uo={params:Fs(Wn,ur),delay:this.ast.options?.delay},Os=on?[]:ni(C,D,this.ast.animation,he,Pe,Sn,Vr,uo,Mt,vn);let Di=0;return Os.forEach(ls=>{Di=Math.max(ls.duration+ls.delay,Di)}),vn.length?Ri(D,this._triggerName,L,Q,os,Sn,Vr,[],[],pi,kn,Di,vn):(Os.forEach(ls=>{const lo=ls.element,Zo=Nr(pi,lo,new Set);ls.preStyleProps.forEach(ds=>Zo.add(ds));const ma=Nr(kn,lo,new Set);ls.postStyleProps.forEach(ds=>ma.add(ds)),lo!==D&&Lr.add(lo)}),Ri(D,this._triggerName,L,Q,os,Sn,Vr,Os,[...Lr.values()],pi,kn,Di))}}function Fs(Y,C){const D={...C};return Object.entries(Y).forEach(([L,Q])=>{null!=Q&&(D[L]=Q)}),D}class $i{constructor(C,D,L){this.styles=C,this.defaultParams=D,this.normalizer=L}buildStyles(C,D){const L=new Map,Q=Fs(C,this.defaultParams);return this.styles.styles.forEach(he=>{"string"!=typeof he&&he.forEach((Pe,Ue)=>{Pe&&(Pe=Rn(Pe,Q,D));const ht=this.normalizer.normalizePropertyName(Ue,D);Pe=this.normalizer.normalizeStyleValue(Ue,ht,Pe,D),L.set(Ue,Pe)})}),L}}class ns{constructor(C,D,L){this.name=C,this.ast=D,this._normalizer=L,this.transitionFactories=[],this.states=new Map,D.states.forEach(Q=>{this.states.set(Q.name,new $i(Q.style,Q.options&&Q.options.params||{},L))}),Io(this.states,"true","1"),Io(this.states,"false","0"),D.transitions.forEach(Q=>{this.transitionFactories.push(new Wi(C,Q,this.states))}),this.fallbackTransition=function Oi(Y,C,D){return new Wi(Y,{type:vt.If.Transition,animation:{type:vt.If.Sequence,steps:[],options:null},matchers:[(Pe,Ue)=>!0],options:null,queryCount:0,depCount:0},C)}(C,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(C,D,L,Q){return this.transitionFactories.find(Pe=>Pe.match(C,D,L,Q))||null}matchStyles(C,D,L){return this.fallbackTransition.buildStyles(C,D,L)}}function Io(Y,C,D){Y.has(C)?Y.has(D)||Y.set(D,Y.get(C)):Y.has(D)&&Y.set(C,Y.get(D))}const ao=new fs;class Hi{constructor(C,D,L){this.bodyNode=C,this._driver=D,this._normalizer=L,this._animations=new Map,this._playersById=new Map,this.players=[]}register(C,D){const L=[],he=Eo(this._driver,D,L,[]);if(L.length)throw function bn(Y){return new T.wOt(3503,!1)}();this._animations.set(C,he)}_buildPlayer(C,D,L){const Q=C.element,he=Jt(this._normalizer,C.keyframes,D,L);return this._driver.animate(Q,he,C.duration,C.delay,C.easing,[],!0)}create(C,D,L={}){const Q=[],he=this._animations.get(C);let Pe;const Ue=new Map;if(he?(Pe=ni(this._driver,D,he,Yr,Ms,new Map,new Map,L,ao,Q),Pe.forEach(on=>{const vn=Nr(Ue,on.element,new Map);on.postStyleProps.forEach(ur=>vn.set(ur,null))})):(Q.push(function Pn(){return new T.wOt(3300,!1)}()),Pe=[]),Q.length)throw function kr(Y){return new T.wOt(3504,!1)}();Ue.forEach((on,vn)=>{on.forEach((ur,er)=>{on.set(er,this._driver.computeStyle(vn,er,vt.kp))})});const Mt=Or(Pe.map(on=>{const vn=Ue.get(on.element);return this._buildPlayer(on,new Map,vn)}));return this._playersById.set(C,Mt),Mt.onDestroy(()=>this.destroy(C)),this.players.push(Mt),Mt}destroy(C){const D=this._getPlayer(C);D.destroy(),this._playersById.delete(C);const L=this.players.indexOf(D);L>=0&&this.players.splice(L,1)}_getPlayer(C){const D=this._playersById.get(C);if(!D)throw function qr(Y){return new T.wOt(3301,!1)}();return D}listen(C,D,L,Q){const he=On(D,"","","");return Zt(this._getPlayer(C),L,he,Q),()=>{}}command(C,D,L,Q){if("register"==L)return void this.register(C,Q[0]);if("create"==L)return void this.create(C,D,Q[0]||{});const he=this._getPlayer(C);switch(L){case"play":he.play();break;case"pause":he.pause();break;case"reset":he.reset();break;case"restart":he.restart();break;case"finish":he.finish();break;case"init":he.init();break;case"setPosition":he.setPosition(parseFloat(Q[0]));break;case"destroy":this.destroy(C)}}}const ms="ng-animate-queued",Xo="ng-animate-disabled",wi=[],Co={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Yo={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ti="__ng_removed";class gr{get params(){return this.options.params}constructor(C,D=""){this.namespaceId=D;const L=C&&C.hasOwnProperty("value");if(this.value=function _s(Y){return Y??null}(L?C.value:C),L){const{value:he,...Pe}=C;this.options=Pe}else this.options={};this.options.params||(this.options.params={})}absorbOptions(C){const D=C.params;if(D){const L=this.options.params;Object.keys(D).forEach(Q=>{null==L[Q]&&(L[Q]=D[Q])})}}}const Us="void",da=new gr(Us);class Zr{constructor(C,D,L){this.id=C,this.hostElement=D,this._engine=L,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+C,Z(D,this._hostClassName)}listen(C,D,L,Q){if(!this._triggers.has(D))throw function Hr(Y,C){return new T.wOt(3302,!1)}();if(null==L||0==L.length)throw function Li(Y){return new T.wOt(3303,!1)}();if(!function Fi(Y){return"start"==Y||"done"==Y}(L))throw function Rr(Y,C){return new T.wOt(3400,!1)}();const he=Nr(this._elementListeners,C,[]),Pe={name:D,phase:L,callback:Q};he.push(Pe);const Ue=Nr(this._engine.statesByElement,C,new Map);return Ue.has(D)||(Z(C,cs),Z(C,cs+"-"+D),Ue.set(D,da)),()=>{this._engine.afterFlush(()=>{const ht=he.indexOf(Pe);ht>=0&&he.splice(ht,1),this._triggers.has(D)||Ue.delete(D)})}}register(C,D){return!this._triggers.has(C)&&(this._triggers.set(C,D),!0)}_getTrigger(C){const D=this._triggers.get(C);if(!D)throw function hs(Y){return new T.wOt(3401,!1)}();return D}trigger(C,D,L,Q=!0){const he=this._getTrigger(D),Pe=new sr(this.id,D,C);let Ue=this._engine.statesByElement.get(C);Ue||(Z(C,cs),Z(C,cs+"-"+D),this._engine.statesByElement.set(C,Ue=new Map));let ht=Ue.get(D);const Mt=new gr(L,this.id);if(!(L&&L.hasOwnProperty("value"))&&ht&&Mt.absorbOptions(ht.options),Ue.set(D,Mt),ht||(ht=da),Mt.value!==Us&&ht.value===Mt.value){if(!function Zs(Y,C){const D=Object.keys(Y),L=Object.keys(C);if(D.length!=L.length)return!1;for(let Q=0;Q<D.length;Q++){const he=D[Q];if(!C.hasOwnProperty(he)||Y[he]!==C[he])return!1}return!0}(ht.params,Mt.params)){const Wn=[],Vr=he.matchStyles(ht.value,ht.params,Wn),Lr=he.matchStyles(Mt.value,Mt.params,Wn);Wn.length?this._engine.reportError(Wn):this._engine.afterFlush(()=>{Ie(C,Vr),ve(C,Lr)})}return}const ur=Nr(this._engine.playersByElement,C,[]);ur.forEach(Wn=>{Wn.namespaceId==this.id&&Wn.triggerName==D&&Wn.queued&&Wn.destroy()});let er=he.matchTransition(ht.value,Mt.value,C,Mt.params),Sn=!1;if(!er){if(!Q)return;er=he.fallbackTransition,Sn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:D,transition:er,fromState:ht,toState:Mt,player:Pe,isFallbackTransition:Sn}),Sn||(Z(C,ms),Pe.onStart(()=>{be(C,ms)})),Pe.onDone(()=>{let Wn=this.players.indexOf(Pe);Wn>=0&&this.players.splice(Wn,1);const Vr=this._engine.playersByElement.get(C);if(Vr){let Lr=Vr.indexOf(Pe);Lr>=0&&Vr.splice(Lr,1)}}),this.players.push(Pe),ur.push(Pe),Pe}deregister(C){this._triggers.delete(C),this._engine.statesByElement.forEach(D=>D.delete(C)),this._elementListeners.forEach((D,L)=>{this._elementListeners.set(L,D.filter(Q=>Q.name!=C))})}clearElementCache(C){this._engine.statesByElement.delete(C),this._elementListeners.delete(C);const D=this._engine.playersByElement.get(C);D&&(D.forEach(L=>L.destroy()),this._engine.playersByElement.delete(C))}_signalRemovalForInnerTriggers(C,D){const L=this._engine.driver.query(C,ir,!0);L.forEach(Q=>{if(Q[Ti])return;const he=this._engine.fetchNamespacesByElement(Q);he.size?he.forEach(Pe=>Pe.triggerLeaveAnimation(Q,D,!1,!0)):this.clearElementCache(Q)}),this._engine.afterFlushAnimationsDone(()=>L.forEach(Q=>this.clearElementCache(Q)))}triggerLeaveAnimation(C,D,L,Q){const he=this._engine.statesByElement.get(C),Pe=new Map;if(he){const Ue=[];if(he.forEach((ht,Mt)=>{if(Pe.set(Mt,ht.value),this._triggers.has(Mt)){const on=this.trigger(C,Mt,Us,Q);on&&Ue.push(on)}}),Ue.length)return this._engine.markElementAsRemoved(this.id,C,!0,D,Pe),L&&Or(Ue).onDone(()=>this._engine.processLeaveNode(C)),!0}return!1}prepareLeaveAnimationListeners(C){const D=this._elementListeners.get(C),L=this._engine.statesByElement.get(C);if(D&&L){const Q=new Set;D.forEach(he=>{const Pe=he.name;if(Q.has(Pe))return;Q.add(Pe);const ht=this._triggers.get(Pe).fallbackTransition,Mt=L.get(Pe)||da,on=new gr(Us),vn=new sr(this.id,Pe,C);this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:Pe,transition:ht,fromState:Mt,toState:on,player:vn,isFallbackTransition:!0})})}}removeNode(C,D){const L=this._engine;if(C.childElementCount&&this._signalRemovalForInnerTriggers(C,D),this.triggerLeaveAnimation(C,D,!0))return;let Q=!1;if(L.totalAnimations){const he=L.players.length?L.playersByQueriedElement.get(C):[];if(he&&he.length)Q=!0;else{let Pe=C;for(;Pe=Pe.parentNode;)if(L.statesByElement.get(Pe)){Q=!0;break}}}if(this.prepareLeaveAnimationListeners(C),Q)L.markElementAsRemoved(this.id,C,!1,D);else{const he=C[Ti];(!he||he===Co)&&(L.afterFlush(()=>this.clearElementCache(C)),L.destroyInnerAnimations(C),L._onRemovalComplete(C,D))}}insertNode(C,D){Z(C,this._hostClassName)}drainQueuedTransitions(C){const D=[];return this._queue.forEach(L=>{const Q=L.player;if(Q.destroyed)return;const he=L.element,Pe=this._elementListeners.get(he);Pe&&Pe.forEach(Ue=>{if(Ue.name==L.triggerName){const ht=On(he,L.triggerName,L.fromState.value,L.toState.value);ht._data=C,Zt(L.player,Ue.phase,ht,Ue.callback)}}),Q.markedForDestroy?this._engine.afterFlush(()=>{Q.destroy()}):D.push(L)}),this._queue=[],D.sort((L,Q)=>{const he=L.transition.ast.depCount,Pe=Q.transition.ast.depCount;return 0==he||0==Pe?he-Pe:this._engine.driver.containsElement(L.element,Q.element)?1:-1})}destroy(C){this.players.forEach(D=>D.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,C)}}class co{_onRemovalComplete(C,D){this.onRemovalComplete(C,D)}constructor(C,D,L,Q){this.bodyNode=C,this.driver=D,this._normalizer=L,this.scheduler=Q,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(he,Pe)=>{}}get queuedPlayers(){const C=[];return this._namespaceList.forEach(D=>{D.players.forEach(L=>{L.queued&&C.push(L)})}),C}createNamespace(C,D){const L=new Zr(C,D,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,D)?this._balanceNamespaceList(L,D):(this.newHostElements.set(D,L),this.collectEnterElement(D)),this._namespaceLookup[C]=L}_balanceNamespaceList(C,D){const L=this._namespaceList,Q=this.namespacesByHostElement;if(L.length-1>=0){let Pe=!1,Ue=this.driver.getParentElement(D);for(;Ue;){const ht=Q.get(Ue);if(ht){const Mt=L.indexOf(ht);L.splice(Mt+1,0,C),Pe=!0;break}Ue=this.driver.getParentElement(Ue)}Pe||L.unshift(C)}else L.push(C);return Q.set(D,C),C}register(C,D){let L=this._namespaceLookup[C];return L||(L=this.createNamespace(C,D)),L}registerTrigger(C,D,L){let Q=this._namespaceLookup[C];Q&&Q.register(D,L)&&this.totalAnimations++}destroy(C,D){C&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const L=this._fetchNamespace(C);this.namespacesByHostElement.delete(L.hostElement);const Q=this._namespaceList.indexOf(L);Q>=0&&this._namespaceList.splice(Q,1),L.destroy(D),delete this._namespaceLookup[C]}))}_fetchNamespace(C){return this._namespaceLookup[C]}fetchNamespacesByElement(C){const D=new Set,L=this.statesByElement.get(C);if(L)for(let Q of L.values())if(Q.namespaceId){const he=this._fetchNamespace(Q.namespaceId);he&&D.add(he)}return D}trigger(C,D,L,Q){if(wo(D)){const he=this._fetchNamespace(C);if(he)return he.trigger(D,L,Q),!0}return!1}insertNode(C,D,L,Q){if(!wo(D))return;const he=D[Ti];if(he&&he.setForRemoval){he.setForRemoval=!1,he.setForMove=!0;const Pe=this.collectedLeaveElements.indexOf(D);Pe>=0&&this.collectedLeaveElements.splice(Pe,1)}if(C){const Pe=this._fetchNamespace(C);Pe&&Pe.insertNode(D,L)}Q&&this.collectEnterElement(D)}collectEnterElement(C){this.collectedEnterElements.push(C)}markElementAsDisabled(C,D){D?this.disabledNodes.has(C)||(this.disabledNodes.add(C),Z(C,Xo)):this.disabledNodes.has(C)&&(this.disabledNodes.delete(C),be(C,Xo))}removeNode(C,D,L){if(wo(D)){this.scheduler?.notify();const Q=C?this._fetchNamespace(C):null;Q?Q.removeNode(D,L):this.markElementAsRemoved(C,D,!1,L);const he=this.namespacesByHostElement.get(D);he&&he.id!==C&&he.removeNode(D,L)}else this._onRemovalComplete(D,L)}markElementAsRemoved(C,D,L,Q,he){this.collectedLeaveElements.push(D),D[Ti]={namespaceId:C,setForRemoval:Q,hasAnimation:L,removedBeforeQueried:!1,previousTriggersValues:he}}listen(C,D,L,Q,he){return wo(D)?this._fetchNamespace(C).listen(D,L,Q,he):()=>{}}_buildInstruction(C,D,L,Q,he){return C.transition.build(this.driver,C.element,C.fromState.value,C.toState.value,L,Q,C.fromState.options,C.toState.options,D,he)}destroyInnerAnimations(C){let D=this.driver.query(C,ir,!0);D.forEach(L=>this.destroyActiveAnimationsForElement(L)),0!=this.playersByQueriedElement.size&&(D=this.driver.query(C,Gi,!0),D.forEach(L=>this.finishActiveQueriedAnimationOnElement(L)))}destroyActiveAnimationsForElement(C){const D=this.playersByElement.get(C);D&&D.forEach(L=>{L.queued?L.markedForDestroy=!0:L.destroy()})}finishActiveQueriedAnimationOnElement(C){const D=this.playersByQueriedElement.get(C);D&&D.forEach(L=>L.finish())}whenRenderingDone(){return new Promise(C=>{if(this.players.length)return Or(this.players).onDone(()=>C());C()})}processLeaveNode(C){const D=C[Ti];if(D&&D.setForRemoval){if(C[Ti]=Co,D.namespaceId){this.destroyInnerAnimations(C);const L=this._fetchNamespace(D.namespaceId);L&&L.clearElementCache(C)}this._onRemovalComplete(C,D.setForRemoval)}C.classList?.contains(Xo)&&this.markElementAsDisabled(C,!1),this.driver.query(C,".ng-animate-disabled",!0).forEach(L=>{this.markElementAsDisabled(L,!1)})}flush(C=-1){let D=[];if(this.newHostElements.size&&(this.newHostElements.forEach((L,Q)=>this._balanceNamespaceList(L,Q)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let L=0;L<this.collectedEnterElements.length;L++)Z(this.collectedEnterElements[L],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const L=[];try{D=this._flushAnimations(L,C)}finally{for(let Q=0;Q<L.length;Q++)L[Q]()}}else for(let L=0;L<this.collectedLeaveElements.length;L++)this.processLeaveNode(this.collectedLeaveElements[L]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(L=>L()),this._flushFns=[],this._whenQuietFns.length){const L=this._whenQuietFns;this._whenQuietFns=[],D.length?Or(D).onDone(()=>{L.forEach(Q=>Q())}):L.forEach(Q=>Q())}}reportError(C){throw function xn(Y){return new T.wOt(3402,!1)}()}_flushAnimations(C,D){const L=new fs,Q=[],he=new Map,Pe=[],Ue=new Map,ht=new Map,Mt=new Map,on=new Set;this.disabledNodes.forEach($=>{on.add($);const x=this.driver.query($,".ng-animate-queued",!0);for(let B=0;B<x.length;B++)on.add(x[B])});const vn=this.bodyNode,ur=Array.from(this.statesByElement.keys()),er=N(ur,this.collectedEnterElements),Sn=new Map;let Wn=0;er.forEach(($,x)=>{const B=Yr+Wn++;Sn.set(x,B),$.forEach(ye=>Z(ye,B))});const Vr=[],Lr=new Set,pi=new Set;for(let $=0;$<this.collectedLeaveElements.length;$++){const x=this.collectedLeaveElements[$],B=x[Ti];B&&B.setForRemoval&&(Vr.push(x),Lr.add(x),B.hasAnimation?this.driver.query(x,".ng-star-inserted",!0).forEach(ye=>Lr.add(ye)):pi.add(x))}const kn=new Map,os=N(ur,Array.from(Lr));os.forEach(($,x)=>{const B=Ms+Wn++;kn.set(x,B),$.forEach(ye=>Z(ye,B))}),C.push(()=>{er.forEach(($,x)=>{const B=Sn.get(x);$.forEach(ye=>be(ye,B))}),os.forEach(($,x)=>{const B=kn.get(x);$.forEach(ye=>be(ye,B))}),Vr.forEach($=>{this.processLeaveNode($)})});const uo=[],Os=[];for(let $=this._namespaceList.length-1;$>=0;$--)this._namespaceList[$].drainQueuedTransitions(D).forEach(B=>{const ye=B.player,ot=B.element;if(uo.push(ye),this.collectedEnterElements.length){const fr=ot[Ti];if(fr&&fr.setForMove){if(fr.previousTriggersValues&&fr.previousTriggersValues.has(B.triggerName)){const wr=fr.previousTriggersValues.get(B.triggerName),Tr=this.statesByElement.get(B.element);if(Tr&&Tr.has(B.triggerName)){const xr=Tr.get(B.triggerName);xr.value=wr,Tr.set(B.triggerName,xr)}}return void ye.destroy()}}const xt=!vn||!this.driver.containsElement(vn,ot),un=kn.get(ot),Cr=Sn.get(ot),gn=this._buildInstruction(B,L,Cr,un,xt);if(gn.errors&&gn.errors.length)return void Os.push(gn);if(xt)return ye.onStart(()=>Ie(ot,gn.fromStyles)),ye.onDestroy(()=>ve(ot,gn.toStyles)),void Q.push(ye);if(B.isFallbackTransition)return ye.onStart(()=>Ie(ot,gn.fromStyles)),ye.onDestroy(()=>ve(ot,gn.toStyles)),void Q.push(ye);const Ur=[];gn.timelines.forEach(fr=>{fr.stretchStartingKeyframe=!0,this.disabledNodes.has(fr.element)||Ur.push(fr)}),gn.timelines=Ur,L.append(ot,gn.timelines),Pe.push({instruction:gn,player:ye,element:ot}),gn.queriedElements.forEach(fr=>Nr(Ue,fr,[]).push(ye)),gn.preStyleProps.forEach((fr,wr)=>{if(fr.size){let Tr=ht.get(wr);Tr||ht.set(wr,Tr=new Set),fr.forEach((xr,Yt)=>Tr.add(Yt))}}),gn.postStyleProps.forEach((fr,wr)=>{let Tr=Mt.get(wr);Tr||Mt.set(wr,Tr=new Set),fr.forEach((xr,Yt)=>Tr.add(Yt))})});if(Os.length){const $=[];Os.forEach(x=>{$.push(function zt(Y,C){return new T.wOt(3505,!1)}())}),uo.forEach(x=>x.destroy()),this.reportError($)}const Di=new Map,ls=new Map;Pe.forEach($=>{const x=$.element;L.has(x)&&(ls.set(x,x),this._beforeAnimationBuild($.player.namespaceId,$.instruction,Di))}),Q.forEach($=>{const x=$.element;this._getPreviousPlayers(x,!1,$.namespaceId,$.triggerName,null).forEach(ye=>{Nr(Di,x,[]).push(ye),ye.destroy()})});const lo=Vr.filter($=>fi($,ht,Mt)),Zo=new Map;K(Zo,this.driver,pi,Mt,vt.kp).forEach($=>{fi($,ht,Mt)&&lo.push($)});const ds=new Map;er.forEach(($,x)=>{K(ds,this.driver,new Set($),ht,vt.FX)}),lo.forEach($=>{const x=Zo.get($),B=ds.get($);Zo.set($,new Map([...x?.entries()??[],...B?.entries()??[]]))});const Es=[],Bs=[],P={};Pe.forEach($=>{const{element:x,player:B,instruction:ye}=$;if(L.has(x)){if(on.has(x))return B.onDestroy(()=>ve(x,ye.toStyles)),B.disabled=!0,B.overrideTotalTime(ye.totalTime),void Q.push(B);let ot=P;if(ls.size>1){let un=x;const Cr=[];for(;un=un.parentNode;){const gn=ls.get(un);if(gn){ot=gn;break}Cr.push(un)}Cr.forEach(gn=>ls.set(gn,ot))}const xt=this._buildAnimation(B.namespaceId,ye,Di,he,ds,Zo);if(B.setRealPlayer(xt),ot===P)Es.push(B);else{const un=this.playersByElement.get(ot);un&&un.length&&(B.parentPlayer=Or(un)),Q.push(B)}}else Ie(x,ye.fromStyles),B.onDestroy(()=>ve(x,ye.toStyles)),Bs.push(B),on.has(x)&&Q.push(B)}),Bs.forEach($=>{const x=he.get($.element);if(x&&x.length){const B=Or(x);$.setRealPlayer(B)}}),Q.forEach($=>{$.parentPlayer?$.syncPlayerEvents($.parentPlayer):$.destroy()});for(let $=0;$<Vr.length;$++){const x=Vr[$],B=x[Ti];if(be(x,Ms),B&&B.hasAnimation)continue;let ye=[];if(Ue.size){let xt=Ue.get(x);xt&&xt.length&&ye.push(...xt);let un=this.driver.query(x,Gi,!0);for(let Cr=0;Cr<un.length;Cr++){let gn=Ue.get(un[Cr]);gn&&gn.length&&ye.push(...gn)}}const ot=ye.filter(xt=>!xt.destroyed);ot.length?fn(this,x,ot):this.processLeaveNode(x)}return Vr.length=0,Es.forEach($=>{this.players.push($),$.onDone(()=>{$.destroy();const x=this.players.indexOf($);this.players.splice(x,1)}),$.play()}),Es}afterFlush(C){this._flushFns.push(C)}afterFlushAnimationsDone(C){this._whenQuietFns.push(C)}_getPreviousPlayers(C,D,L,Q,he){let Pe=[];if(D){const Ue=this.playersByQueriedElement.get(C);Ue&&(Pe=Ue)}else{const Ue=this.playersByElement.get(C);if(Ue){const ht=!he||he==Us;Ue.forEach(Mt=>{Mt.queued||!ht&&Mt.triggerName!=Q||Pe.push(Mt)})}}return(L||Q)&&(Pe=Pe.filter(Ue=>!(L&&L!=Ue.namespaceId||Q&&Q!=Ue.triggerName))),Pe}_beforeAnimationBuild(C,D,L){const he=D.element,Pe=D.isRemovalTransition?void 0:C,Ue=D.isRemovalTransition?void 0:D.triggerName;for(const ht of D.timelines){const Mt=ht.element,on=Mt!==he,vn=Nr(L,Mt,[]);this._getPreviousPlayers(Mt,on,Pe,Ue,D.toState).forEach(er=>{const Sn=er.getRealPlayer();Sn.beforeDestroy&&Sn.beforeDestroy(),er.destroy(),vn.push(er)})}Ie(he,D.fromStyles)}_buildAnimation(C,D,L,Q,he,Pe){const Ue=D.triggerName,ht=D.element,Mt=[],on=new Set,vn=new Set,ur=D.timelines.map(Sn=>{const Wn=Sn.element;on.add(Wn);const Vr=Wn[Ti];if(Vr&&Vr.removedBeforeQueried)return new vt.sf(Sn.duration,Sn.delay);const Lr=Wn!==ht,pi=function Xn(Y){const C=[];return ys(Y,C),C}((L.get(Wn)||wi).map(Di=>Di.getRealPlayer())).filter(Di=>!!Di.element&&Di.element===Wn),kn=he.get(Wn),os=Pe.get(Wn),uo=Jt(this._normalizer,Sn.keyframes,kn,os),Os=this._buildPlayer(Sn,uo,pi);if(Sn.subTimeline&&Q&&vn.add(Wn),Lr){const Di=new sr(C,Ue,Wn);Di.setRealPlayer(Os),Mt.push(Di)}return Os});Mt.forEach(Sn=>{Nr(this.playersByQueriedElement,Sn.element,[]).push(Sn),Sn.onDone(()=>function us(Y,C,D){let L=Y.get(C);if(L){if(L.length){const Q=L.indexOf(D);L.splice(Q,1)}0==L.length&&Y.delete(C)}return L}(this.playersByQueriedElement,Sn.element,Sn))}),on.forEach(Sn=>Z(Sn,is));const er=Or(ur);return er.onDestroy(()=>{on.forEach(Sn=>be(Sn,is)),ve(ht,D.toStyles)}),vn.forEach(Sn=>{Nr(Q,Sn,[]).push(er)}),er}_buildPlayer(C,D,L){return D.length>0?this.driver.animate(C.element,D,C.duration,C.delay,C.easing,L):new vt.sf(C.duration,C.delay)}}class sr{constructor(C,D,L){this.namespaceId=C,this.triggerName=D,this.element=L,this._player=new vt.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(C){this._containsRealPlayer||(this._player=C,this._queuedCallbacks.forEach((D,L)=>{D.forEach(Q=>Zt(C,L,void 0,Q))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(C.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(C){this.totalTime=C}syncPlayerEvents(C){const D=this._player;D.triggerCallback&&C.onStart(()=>D.triggerCallback("start")),C.onDone(()=>this.finish()),C.onDestroy(()=>this.destroy())}_queueEvent(C,D){Nr(this._queuedCallbacks,C,[]).push(D)}onDone(C){this.queued&&this._queueEvent("done",C),this._player.onDone(C)}onStart(C){this.queued&&this._queueEvent("start",C),this._player.onStart(C)}onDestroy(C){this.queued&&this._queueEvent("destroy",C),this._player.onDestroy(C)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(C){this.queued||this._player.setPosition(C)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(C){const D=this._player;D.triggerCallback&&D.triggerCallback(C)}}function wo(Y){return Y&&1===Y.nodeType}function G(Y,C){const D=Y.style.display;return Y.style.display=C??"none",D}function K(Y,C,D,L,Q){const he=[];D.forEach(ht=>he.push(G(ht)));const Pe=[];L.forEach((ht,Mt)=>{const on=new Map;ht.forEach(vn=>{const ur=C.computeStyle(Mt,vn,Q);on.set(vn,ur),(!ur||0==ur.length)&&(Mt[Ti]=Yo,Pe.push(Mt))}),Y.set(Mt,on)});let Ue=0;return D.forEach(ht=>G(ht,he[Ue++])),Pe}function N(Y,C){const D=new Map;if(Y.forEach(Ue=>D.set(Ue,[])),0==C.length)return D;const Q=new Set(C),he=new Map;function Pe(Ue){if(!Ue)return 1;let ht=he.get(Ue);if(ht)return ht;const Mt=Ue.parentNode;return ht=D.has(Mt)?Mt:Q.has(Mt)?1:Pe(Mt),he.set(Ue,ht),ht}return C.forEach(Ue=>{const ht=Pe(Ue);1!==ht&&D.get(ht).push(Ue)}),D}function Z(Y,C){Y.classList?.add(C)}function be(Y,C){Y.classList?.remove(C)}function fn(Y,C,D){Or(D).onDone(()=>Y.processLeaveNode(C))}function ys(Y,C){for(let D=0;D<Y.length;D++){const L=Y[D];L instanceof vt.ui?ys(L.players,C):C.push(L)}}function fi(Y,C,D){const L=D.get(Y);if(!L)return!1;let Q=C.get(Y);return Q?L.forEach(he=>Q.add(he)):C.set(Y,L),D.delete(Y),!0}class Ts{constructor(C,D,L,Q){this._driver=D,this._normalizer=L,this._triggerCache={},this.onRemovalComplete=(he,Pe)=>{},this._transitionEngine=new co(C.body,D,L,Q),this._timelineEngine=new Hi(C.body,D,L),this._transitionEngine.onRemovalComplete=(he,Pe)=>this.onRemovalComplete(he,Pe)}registerTrigger(C,D,L,Q,he){const Pe=C+"-"+Q;let Ue=this._triggerCache[Pe];if(!Ue){const ht=[],on=Eo(this._driver,he,ht,[]);if(ht.length)throw function Qn(Y,C){return new T.wOt(3404,!1)}();Ue=function Uo(Y,C,D){return new ns(Y,C,D)}(Q,on,this._normalizer),this._triggerCache[Pe]=Ue}this._transitionEngine.registerTrigger(D,Q,Ue)}register(C,D){this._transitionEngine.register(C,D)}destroy(C,D){this._transitionEngine.destroy(C,D)}onInsert(C,D,L,Q){this._transitionEngine.insertNode(C,D,L,Q)}onRemove(C,D,L){this._transitionEngine.removeNode(C,D,L)}disableAnimations(C,D){this._transitionEngine.markElementAsDisabled(C,D)}process(C,D,L,Q){if("@"==L.charAt(0)){const[he,Pe]=ke(L);this._timelineEngine.command(he,D,Pe,Q)}else this._transitionEngine.trigger(C,D,L,Q)}listen(C,D,L,Q,he){if("@"==L.charAt(0)){const[Pe,Ue]=ke(L);return this._timelineEngine.listen(Pe,D,Ue,he)}return this._transitionEngine.listen(C,D,L,Q,he)}flush(C=-1){this._transitionEngine.flush(C)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(C){this._transitionEngine.afterFlushAnimationsDone(C)}}class Bo{static#e=this.initialStylesByElement=new WeakMap;constructor(C,D,L){this._element=C,this._startStyles=D,this._endStyles=L,this._state=0;let Q=Bo.initialStylesByElement.get(C);Q||Bo.initialStylesByElement.set(C,Q=new Map),this._initialStyles=Q}start(){this._state<1&&(this._startStyles&&ve(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ve(this._element,this._initialStyles),this._endStyles&&(ve(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Bo.initialStylesByElement.delete(this._element),this._startStyles&&(Ie(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ie(this._element,this._endStyles),this._endStyles=null),ve(this._element,this._initialStyles),this._state=3)}}function ha(Y){let C=null;return Y.forEach((D,L)=>{(function ei(Y){return"display"===Y||"position"===Y})(L)&&(C=C||new Map,C.set(L,D))}),C}class Da{constructor(C,D,L,Q){this.element=C,this.keyframes=D,this.options=L,this._specialStyles=Q,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=L.duration,this._delay=L.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(C=>C()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const C=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,C,this.options),this._finalKeyframe=C.length?C[C.length-1]:new Map;const D=()=>this._onFinish();this.domPlayer.addEventListener("finish",D),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",D)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(C){const D=[];return C.forEach(L=>{D.push(Object.fromEntries(L))}),D}_triggerWebAnimation(C,D,L){return C.animate(this._convertKeyframesToObject(D),L)}onStart(C){this._originalOnStartFns.push(C),this._onStartFns.push(C)}onDone(C){this._originalOnDoneFns.push(C),this._onDoneFns.push(C)}onDestroy(C){this._onDestroyFns.push(C)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(C=>C()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(C=>C()),this._onDestroyFns=[])}setPosition(C){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=C*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const C=new Map;this.hasStarted()&&this._finalKeyframe.forEach((L,Q)=>{"offset"!==Q&&C.set(Q,this._finished?L:Mi(this.element,Q))}),this.currentSnapshot=C}triggerCallback(C){const D="start"===C?this._onStartFns:this._onDoneFns;D.forEach(L=>L()),D.length=0}}class fa{validateStyleProperty(C){return!0}validateAnimatableStyleProperty(C){return!0}matchesElement(C,D){return!1}containsElement(C,D){return me(C,D)}getParentElement(C){return Ce(C)}query(C,D,L){return wt(C,D,L)}computeStyle(C,D,L){return Mi(C,D)}animate(C,D,L,Q,he,Pe=[]){const ht={duration:L,delay:Q,fill:0==Q?"both":"forwards"};he&&(ht.easing=he);const Mt=new Map,on=Pe.filter(er=>er instanceof Da);(function _r(Y,C){return 0===Y||0===C})(L,Q)&&on.forEach(er=>{er.currentSnapshot.forEach((Sn,Wn)=>Mt.set(Wn,Sn))});let vn=function cn(Y){return Y.length?Y[0]instanceof Map?Y:Y.map(C=>new Map(Object.entries(C))):[]}(D).map(er=>new Map(er));vn=function ui(Y,C,D){if(D.size&&C.length){let L=C[0],Q=[];if(D.forEach((he,Pe)=>{L.has(Pe)||Q.push(Pe),L.set(Pe,he)}),Q.length)for(let he=1;he<C.length;he++){let Pe=C[he];Q.forEach(Ue=>Pe.set(Ue,Mi(Y,Ue)))}}return C}(C,vn,Mt);const ur=function Ta(Y,C){let D=null,L=null;return Array.isArray(C)&&C.length?(D=ha(C[0]),C.length>1&&(L=ha(C[C.length-1]))):C instanceof Map&&(D=ha(C)),D||L?new Bo(Y,D,L):null}(C,vn);return new Da(C,vn,ht,ur)}}const Ua="@.disabled";class pa{constructor(C,D,L,Q){this.namespaceId=C,this.delegate=D,this.engine=L,this._onDestroy=Q,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(C){this.delegate.destroyNode?.(C)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(C,D){return this.delegate.createElement(C,D)}createComment(C){return this.delegate.createComment(C)}createText(C){return this.delegate.createText(C)}appendChild(C,D){this.delegate.appendChild(C,D),this.engine.onInsert(this.namespaceId,D,C,!1)}insertBefore(C,D,L,Q=!0){this.delegate.insertBefore(C,D,L),this.engine.onInsert(this.namespaceId,D,C,Q)}removeChild(C,D,L){this.engine.onRemove(this.namespaceId,D,this.delegate)}selectRootElement(C,D){return this.delegate.selectRootElement(C,D)}parentNode(C){return this.delegate.parentNode(C)}nextSibling(C){return this.delegate.nextSibling(C)}setAttribute(C,D,L,Q){this.delegate.setAttribute(C,D,L,Q)}removeAttribute(C,D,L){this.delegate.removeAttribute(C,D,L)}addClass(C,D){this.delegate.addClass(C,D)}removeClass(C,D){this.delegate.removeClass(C,D)}setStyle(C,D,L,Q){this.delegate.setStyle(C,D,L,Q)}removeStyle(C,D,L){this.delegate.removeStyle(C,D,L)}setProperty(C,D,L){"@"==D.charAt(0)&&D==Ua?this.disableAnimations(C,!!L):this.delegate.setProperty(C,D,L)}setValue(C,D){this.delegate.setValue(C,D)}listen(C,D,L){return this.delegate.listen(C,D,L)}disableAnimations(C,D){this.engine.disableAnimations(C,D)}}class jo extends pa{constructor(C,D,L,Q,he){super(D,L,Q,he),this.factory=C,this.namespaceId=D}setProperty(C,D,L){"@"==D.charAt(0)?"."==D.charAt(1)&&D==Ua?this.disableAnimations(C,L=void 0===L||!!L):this.engine.process(this.namespaceId,C,D.slice(1),L):this.delegate.setProperty(C,D,L)}listen(C,D,L){if("@"==D.charAt(0)){const Q=function To(Y){switch(Y){case"body":return document.body;case"document":return document;case"window":return window;default:return Y}}(C);let he=D.slice(1),Pe="";return"@"!=he.charAt(0)&&([he,Pe]=function Aa(Y){const C=Y.indexOf(".");return[Y.substring(0,C),Y.slice(C+1)]}(he)),this.engine.listen(this.namespaceId,Q,he,Pe,Ue=>{this.factory.scheduleListenerCallback(Ue._data||-1,L,Ue)})}return this.delegate.listen(C,D,L)}}class Jo{constructor(C,D,L){this.delegate=C,this.engine=D,this._zone=L,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,D.onRemovalComplete=(Q,he)=>{const Pe=he?.parentNode(Q);Pe&&he.removeChild(Pe,Q)}}createRenderer(C,D){const Q=this.delegate.createRenderer(C,D);if(!C||!D?.data?.animation){const Mt=this._rendererCache;let on=Mt.get(Q);return on||(on=new pa("",Q,this.engine,()=>Mt.delete(Q)),Mt.set(Q,on)),on}const he=D.id,Pe=D.id+"-"+this._currentId;this._currentId++,this.engine.register(Pe,C);const Ue=Mt=>{Array.isArray(Mt)?Mt.forEach(Ue):this.engine.registerTrigger(he,Pe,C,Mt.name,Mt)};return D.data.animation.forEach(Ue),new jo(this,Pe,Q,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(C,D,L){if(C>=0&&C<this._microtaskId)return void this._zone.run(()=>D(L));const Q=this._animationCallbacksBuffer;0==Q.length&&queueMicrotask(()=>{this._zone.run(()=>{Q.forEach(he=>{const[Pe,Ue]=he;Pe(Ue)}),this._animationCallbacksBuffer=[]})}),Q.push([D,L])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const ii=[{provide:zn,useFactory:function cr(){return new Ir}},{provide:Ts,useClass:(()=>{class Y extends Ts{constructor(D,L,Q){super(D,L,Q,(0,T.WQX)(T.An2,{optional:!0}))}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(L){return new(L||Y)(T.KVO(ie.qQ),T.KVO(Bn),T.KVO(zn))};static#t=this.\u0275prov=T.jDH({token:Y,factory:Y.\u0275fac})}return Y})()},{provide:T._9s,useFactory:function Wr(Y,C,D){return new Jo(Y,C,D)},deps:[_.B7,Ts,T.SKi]}],Ni=[{provide:Bn,useFactory:()=>new fa},{provide:T.bc$,useValue:"BrowserAnimations"},...ii],xi=[{provide:Bn,useClass:En},{provide:T.bc$,useValue:"NoopAnimations"},...ii];let ga=(()=>{class Y{static withConfig(D){return{ngModule:Y,providers:D.disableAnimations?xi:Ni}}static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275mod=T.$C({type:Y});static#n=this.\u0275inj=T.G2t({providers:Ni,imports:[_.Bb]})}return Y})();var Tc=k(8964);let Ao=(()=>{class Y{static#e=this.\u0275fac=function(L){return new(L||Y)};static#t=this.\u0275mod=T.$C({type:Y,bootstrap:[He]});static#n=this.\u0275inj=T.G2t({providers:[{provide:T.hnV,useFactory:D=>()=>D.getAllTypeOfProduct().subscribe(),deps:[le.m],multi:!0}],imports:[ie.MD,_.Bb,ue,Lt.LoginAndRegistrationModule,Ut.ProductPageModule,ln.ProfileModuleModule,Ht.SingleProductPageModule,ga,en.K,Tc.x]})}return Y})();_.sG().bootstrapModule(Ao).catch(Y=>console.error(Y))},4412:(rn,ze,k)=>{k.d(ze,{t:()=>T});var _=k(1413);class T extends _.B{constructor(E){super(),this._value=E}get value(){return this.getValue()}_subscribe(E){const ie=super._subscribe(E);return!ie.closed&&E.next(this._value),ie}getValue(){const{hasError:E,thrownError:ie,_value:Ae}=this;if(E)throw ie;return this._throwIfClosed(),Ae}next(E){super.next(this._value=E)}}},1985:(rn,ze,k)=>{k.d(ze,{c:()=>Ve});var _=k(7707),T=k(8359),R=k(3494),E=k(1203),ie=k(1026),Ae=k(8071),ge=k(9786);let Ve=(()=>{class Ge{constructor(rt){rt&&(this._subscribe=rt)}lift(rt){const De=new Ge;return De.source=this,De.operator=rt,De}subscribe(rt,De,st){const it=function _e(Ge){return Ge&&Ge instanceof _.vU||function Ee(Ge){return Ge&&(0,Ae.T)(Ge.next)&&(0,Ae.T)(Ge.error)&&(0,Ae.T)(Ge.complete)}(Ge)&&(0,T.Uv)(Ge)}(rt)?rt:new _.Ms(rt,De,st);return(0,ge.Y)(()=>{const{operator:et,source:Dt}=this;it.add(et?et.call(it,Dt):Dt?this._subscribe(it):this._trySubscribe(it))}),it}_trySubscribe(rt){try{return this._subscribe(rt)}catch(De){rt.error(De)}}forEach(rt,De){return new(De=Be(De))((st,it)=>{const et=new _.Ms({next:Dt=>{try{rt(Dt)}catch(bt){it(bt),et.unsubscribe()}},error:it,complete:st});this.subscribe(et)})}_subscribe(rt){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(rt)}[R.s](){return this}pipe(...rt){return(0,E.m)(rt)(this)}toPromise(rt){return new(rt=Be(rt))((De,st)=>{let it;this.subscribe(et=>it=et,et=>st(et),()=>De(it))})}}return Ge.create=lt=>new Ge(lt),Ge})();function Be(Ge){var lt;return null!==(lt=Ge??ie.$.Promise)&&void 0!==lt?lt:Promise}},1413:(rn,ze,k)=>{k.d(ze,{B:()=>ge});var _=k(1985),T=k(8359);const E=(0,k(1853).L)(Be=>function(){Be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=k(7908),Ae=k(9786);let ge=(()=>{class Be extends _.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(_e){const Ge=new Ve(this,this);return Ge.operator=_e,Ge}_throwIfClosed(){if(this.closed)throw new E}next(_e){(0,Ae.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ge of this.currentObservers)Ge.next(_e)}})}error(_e){(0,Ae.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=_e;const{observers:Ge}=this;for(;Ge.length;)Ge.shift().error(_e)}})}complete(){(0,Ae.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:_e}=this;for(;_e.length;)_e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var _e;return(null===(_e=this.observers)||void 0===_e?void 0:_e.length)>0}_trySubscribe(_e){return this._throwIfClosed(),super._trySubscribe(_e)}_subscribe(_e){return this._throwIfClosed(),this._checkFinalizedStatuses(_e),this._innerSubscribe(_e)}_innerSubscribe(_e){const{hasError:Ge,isStopped:lt,observers:rt}=this;return Ge||lt?T.Kn:(this.currentObservers=null,rt.push(_e),new T.yU(()=>{this.currentObservers=null,(0,ie.o)(rt,_e)}))}_checkFinalizedStatuses(_e){const{hasError:Ge,thrownError:lt,isStopped:rt}=this;Ge?_e.error(lt):rt&&_e.complete()}asObservable(){const _e=new _.c;return _e.source=this,_e}}return Be.create=(Ee,_e)=>new Ve(Ee,_e),Be})();class Ve extends ge{constructor(Ee,_e){super(),this.destination=Ee,this.source=_e}next(Ee){var _e,Ge;null===(Ge=null===(_e=this.destination)||void 0===_e?void 0:_e.next)||void 0===Ge||Ge.call(_e,Ee)}error(Ee){var _e,Ge;null===(Ge=null===(_e=this.destination)||void 0===_e?void 0:_e.error)||void 0===Ge||Ge.call(_e,Ee)}complete(){var Ee,_e;null===(_e=null===(Ee=this.destination)||void 0===Ee?void 0:Ee.complete)||void 0===_e||_e.call(Ee)}_subscribe(Ee){var _e,Ge;return null!==(Ge=null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(Ee))&&void 0!==Ge?Ge:T.Kn}}},7707:(rn,ze,k)=>{k.d(ze,{Ms:()=>st,vU:()=>Ge});var _=k(8071),T=k(8359),R=k(1026),E=k(5334),ie=k(5343);const Ae=Be("C",void 0,void 0);function Be(oe,le,ee){return{kind:oe,value:le,error:ee}}var Ee=k(9270),_e=k(9786);class Ge extends T.yU{constructor(le){super(),this.isStopped=!1,le?(this.destination=le,(0,T.Uv)(le)&&le.add(this)):this.destination=bt}static create(le,ee,je){return new st(le,ee,je)}next(le){this.isStopped?Dt(function Ve(oe){return Be("N",oe,void 0)}(le),this):this._next(le)}error(le){this.isStopped?Dt(function ge(oe){return Be("E",void 0,oe)}(le),this):(this.isStopped=!0,this._error(le))}complete(){this.isStopped?Dt(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(le){this.destination.next(le)}_error(le){try{this.destination.error(le)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const lt=Function.prototype.bind;function rt(oe,le){return lt.call(oe,le)}class De{constructor(le){this.partialObserver=le}next(le){const{partialObserver:ee}=this;if(ee.next)try{ee.next(le)}catch(je){it(je)}}error(le){const{partialObserver:ee}=this;if(ee.error)try{ee.error(le)}catch(je){it(je)}else it(le)}complete(){const{partialObserver:le}=this;if(le.complete)try{le.complete()}catch(ee){it(ee)}}}class st extends Ge{constructor(le,ee,je){let Ne;if(super(),(0,_.T)(le)||!le)Ne={next:le??void 0,error:ee??void 0,complete:je??void 0};else{let Ct;this&&R.$.useDeprecatedNextContext?(Ct=Object.create(le),Ct.unsubscribe=()=>this.unsubscribe(),Ne={next:le.next&&rt(le.next,Ct),error:le.error&&rt(le.error,Ct),complete:le.complete&&rt(le.complete,Ct)}):Ne=le}this.destination=new De(Ne)}}function it(oe){R.$.useDeprecatedSynchronousErrorHandling?(0,_e.l)(oe):(0,E.m)(oe)}function Dt(oe,le){const{onStoppedNotification:ee}=R.$;ee&&Ee.f.setTimeout(()=>ee(oe,le))}const bt={closed:!0,next:ie.l,error:function et(oe){throw oe},complete:ie.l}},8359:(rn,ze,k)=>{k.d(ze,{Kn:()=>Ae,yU:()=>ie,Uv:()=>ge});var _=k(8071);const R=(0,k(1853).L)(Be=>function(_e){Be(this),this.message=_e?`${_e.length} errors occurred during unsubscription:\n${_e.map((Ge,lt)=>`${lt+1}) ${Ge.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=_e});var E=k(7908);class ie{constructor(Ee){this.initialTeardown=Ee,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ee;if(!this.closed){this.closed=!0;const{_parentage:_e}=this;if(_e)if(this._parentage=null,Array.isArray(_e))for(const rt of _e)rt.remove(this);else _e.remove(this);const{initialTeardown:Ge}=this;if((0,_.T)(Ge))try{Ge()}catch(rt){Ee=rt instanceof R?rt.errors:[rt]}const{_finalizers:lt}=this;if(lt){this._finalizers=null;for(const rt of lt)try{Ve(rt)}catch(De){Ee=Ee??[],De instanceof R?Ee=[...Ee,...De.errors]:Ee.push(De)}}if(Ee)throw new R(Ee)}}add(Ee){var _e;if(Ee&&Ee!==this)if(this.closed)Ve(Ee);else{if(Ee instanceof ie){if(Ee.closed||Ee._hasParent(this))return;Ee._addParent(this)}(this._finalizers=null!==(_e=this._finalizers)&&void 0!==_e?_e:[]).push(Ee)}}_hasParent(Ee){const{_parentage:_e}=this;return _e===Ee||Array.isArray(_e)&&_e.includes(Ee)}_addParent(Ee){const{_parentage:_e}=this;this._parentage=Array.isArray(_e)?(_e.push(Ee),_e):_e?[_e,Ee]:Ee}_removeParent(Ee){const{_parentage:_e}=this;_e===Ee?this._parentage=null:Array.isArray(_e)&&(0,E.o)(_e,Ee)}remove(Ee){const{_finalizers:_e}=this;_e&&(0,E.o)(_e,Ee),Ee instanceof ie&&Ee._removeParent(this)}}ie.EMPTY=(()=>{const Be=new ie;return Be.closed=!0,Be})();const Ae=ie.EMPTY;function ge(Be){return Be instanceof ie||Be&&"closed"in Be&&(0,_.T)(Be.remove)&&(0,_.T)(Be.add)&&(0,_.T)(Be.unsubscribe)}function Ve(Be){(0,_.T)(Be)?Be():Be.unsubscribe()}},1026:(rn,ze,k)=>{k.d(ze,{$:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(rn,ze,k)=>{k.d(ze,{x:()=>ie});var _=k(6365),R=k(9326),E=k(8455);function ie(...Ae){return function T(){return(0,_.U)(1)}()((0,E.H)(Ae,(0,R.lI)(Ae)))}},983:(rn,ze,k)=>{k.d(ze,{w:()=>T});const T=new(k(1985).c)(ie=>ie.complete())},7468:(rn,ze,k)=>{k.d(ze,{p:()=>Ve});var _=k(1985),T=k(3073),R=k(8750),E=k(9326),ie=k(4360),Ae=k(6450),ge=k(8496);function Ve(...Be){const Ee=(0,E.ms)(Be),{args:_e,keys:Ge}=(0,T.D)(Be),lt=new _.c(rt=>{const{length:De}=_e;if(!De)return void rt.complete();const st=new Array(De);let it=De,et=De;for(let Dt=0;Dt<De;Dt++){let bt=!1;(0,R.Tg)(_e[Dt]).subscribe((0,ie._)(rt,oe=>{bt||(bt=!0,et--),st[Dt]=oe},()=>it--,void 0,()=>{(!it||!bt)&&(et||rt.next(Ge?(0,ge.e)(Ge,st):st),rt.complete())}))}});return Ee?lt.pipe((0,Ae.I)(Ee)):lt}},8455:(rn,ze,k)=>{k.d(ze,{H:()=>le});var _=k(8750),T=k(941),R=k(6745),Ae=k(1985),Ve=k(4761),Be=k(8071),Ee=k(5225);function Ge(ee,je){if(!ee)throw new Error("Iterable cannot be null");return new Ae.c(Ne=>{(0,Ee.N)(Ne,je,()=>{const Ct=ee[Symbol.asyncIterator]();(0,Ee.N)(Ne,je,()=>{Ct.next().then(ue=>{ue.done?Ne.complete():Ne.next(ue.value)})},0,!0)})})}var lt=k(5055),rt=k(9858),De=k(7441),st=k(5397),it=k(7953),et=k(591),Dt=k(5196);function le(ee,je){return je?function oe(ee,je){if(null!=ee){if((0,lt.l)(ee))return function E(ee,je){return(0,_.Tg)(ee).pipe((0,R._)(je),(0,T.Q)(je))}(ee,je);if((0,De.X)(ee))return function ge(ee,je){return new Ae.c(Ne=>{let Ct=0;return je.schedule(function(){Ct===ee.length?Ne.complete():(Ne.next(ee[Ct++]),Ne.closed||this.schedule())})})}(ee,je);if((0,rt.y)(ee))return function ie(ee,je){return(0,_.Tg)(ee).pipe((0,R._)(je),(0,T.Q)(je))}(ee,je);if((0,it.T)(ee))return Ge(ee,je);if((0,st.x)(ee))return function _e(ee,je){return new Ae.c(Ne=>{let Ct;return(0,Ee.N)(Ne,je,()=>{Ct=ee[Ve.l](),(0,Ee.N)(Ne,je,()=>{let ue,He;try{({value:ue,done:He}=Ct.next())}catch(Lt){return void Ne.error(Lt)}He?Ne.complete():Ne.next(ue)},0,!0)}),()=>(0,Be.T)(Ct?.return)&&Ct.return()})}(ee,je);if((0,Dt.U)(ee))return function bt(ee,je){return Ge((0,Dt.C)(ee),je)}(ee,je)}throw(0,et.L)(ee)}(ee,je):(0,_.Tg)(ee)}},8750:(rn,ze,k)=>{k.d(ze,{Tg:()=>lt});var _=k(1635),T=k(7441),R=k(9858),E=k(1985),ie=k(5055),Ae=k(7953),ge=k(591),Ve=k(5397),Be=k(5196),Ee=k(8071),_e=k(5334),Ge=k(3494);function lt(oe){if(oe instanceof E.c)return oe;if(null!=oe){if((0,ie.l)(oe))return function rt(oe){return new E.c(le=>{const ee=oe[Ge.s]();if((0,Ee.T)(ee.subscribe))return ee.subscribe(le);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(oe);if((0,T.X)(oe))return function De(oe){return new E.c(le=>{for(let ee=0;ee<oe.length&&!le.closed;ee++)le.next(oe[ee]);le.complete()})}(oe);if((0,R.y)(oe))return function st(oe){return new E.c(le=>{oe.then(ee=>{le.closed||(le.next(ee),le.complete())},ee=>le.error(ee)).then(null,_e.m)})}(oe);if((0,Ae.T)(oe))return et(oe);if((0,Ve.x)(oe))return function it(oe){return new E.c(le=>{for(const ee of oe)if(le.next(ee),le.closed)return;le.complete()})}(oe);if((0,Be.U)(oe))return function Dt(oe){return et((0,Be.C)(oe))}(oe)}throw(0,ge.L)(oe)}function et(oe){return new E.c(le=>{(function bt(oe,le){var ee,je,Ne,Ct;return(0,_.sH)(this,void 0,void 0,function*(){try{for(ee=(0,_.xN)(oe);!(je=yield ee.next()).done;)if(le.next(je.value),le.closed)return}catch(ue){Ne={error:ue}}finally{try{je&&!je.done&&(Ct=ee.return)&&(yield Ct.call(ee))}finally{if(Ne)throw Ne.error}}le.complete()})})(oe,le).catch(ee=>le.error(ee))})}},7673:(rn,ze,k)=>{k.d(ze,{of:()=>R});var _=k(9326),T=k(8455);function R(...E){const ie=(0,_.lI)(E);return(0,T.H)(E,ie)}},4360:(rn,ze,k)=>{k.d(ze,{_:()=>T});var _=k(7707);function T(E,ie,Ae,ge,Ve){return new R(E,ie,Ae,ge,Ve)}class R extends _.vU{constructor(ie,Ae,ge,Ve,Be,Ee){super(ie),this.onFinalize=Be,this.shouldUnsubscribe=Ee,this._next=Ae?function(_e){try{Ae(_e)}catch(Ge){ie.error(Ge)}}:super._next,this._error=Ve?function(_e){try{Ve(_e)}catch(Ge){ie.error(Ge)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(_e){ie.error(_e)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ae}=this;super.unsubscribe(),!Ae&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},9437:(rn,ze,k)=>{k.d(ze,{W:()=>E});var _=k(8750),T=k(4360),R=k(9974);function E(ie){return(0,R.N)((Ae,ge)=>{let Ee,Ve=null,Be=!1;Ve=Ae.subscribe((0,T._)(ge,void 0,void 0,_e=>{Ee=(0,_.Tg)(ie(_e,E(ie)(Ae))),Ve?(Ve.unsubscribe(),Ve=null,Ee.subscribe(ge)):Be=!0})),Be&&(Ve.unsubscribe(),Ve=null,Ee.subscribe(ge))})}},274:(rn,ze,k)=>{k.d(ze,{H:()=>R});var _=k(1397),T=k(8071);function R(E,ie){return(0,T.T)(ie)?(0,_.Z)(E,ie,1):(0,_.Z)(E,1)}},9901:(rn,ze,k)=>{k.d(ze,{U:()=>R});var _=k(9974),T=k(4360);function R(E){return(0,_.N)((ie,Ae)=>{let ge=!1;ie.subscribe((0,T._)(Ae,Ve=>{ge=!0,Ae.next(Ve)},()=>{ge||Ae.next(E),Ae.complete()}))})}},5964:(rn,ze,k)=>{k.d(ze,{p:()=>R});var _=k(9974),T=k(4360);function R(E,ie){return(0,_.N)((Ae,ge)=>{let Ve=0;Ae.subscribe((0,T._)(ge,Be=>E.call(ie,Be,Ve++)&&ge.next(Be)))})}},980:(rn,ze,k)=>{k.d(ze,{j:()=>T});var _=k(9974);function T(R){return(0,_.N)((E,ie)=>{try{E.subscribe(ie)}finally{ie.add(R)}})}},1594:(rn,ze,k)=>{k.d(ze,{$:()=>ge});var _=k(9350),T=k(5964),R=k(6697),E=k(9901),ie=k(3774),Ae=k(3669);function ge(Ve,Be){const Ee=arguments.length>=2;return _e=>_e.pipe(Ve?(0,T.p)((Ge,lt)=>Ve(Ge,lt,_e)):Ae.D,(0,R.s)(1),Ee?(0,E.U)(Be):(0,ie.v)(()=>new _.G))}},6354:(rn,ze,k)=>{k.d(ze,{T:()=>R});var _=k(9974),T=k(4360);function R(E,ie){return(0,_.N)((Ae,ge)=>{let Ve=0;Ae.subscribe((0,T._)(ge,Be=>{ge.next(E.call(ie,Be,Ve++))}))})}},6365:(rn,ze,k)=>{k.d(ze,{U:()=>R});var _=k(1397),T=k(3669);function R(E=1/0){return(0,_.Z)(T.D,E)}},1397:(rn,ze,k)=>{k.d(ze,{Z:()=>Ve});var _=k(6354),T=k(8750),R=k(9974),E=k(5225),ie=k(4360),ge=k(8071);function Ve(Be,Ee,_e=1/0){return(0,ge.T)(Ee)?Ve((Ge,lt)=>(0,_.T)((rt,De)=>Ee(Ge,rt,lt,De))((0,T.Tg)(Be(Ge,lt))),_e):("number"==typeof Ee&&(_e=Ee),(0,R.N)((Ge,lt)=>function Ae(Be,Ee,_e,Ge,lt,rt,De,st){const it=[];let et=0,Dt=0,bt=!1;const oe=()=>{bt&&!it.length&&!et&&Ee.complete()},le=je=>et<Ge?ee(je):it.push(je),ee=je=>{rt&&Ee.next(je),et++;let Ne=!1;(0,T.Tg)(_e(je,Dt++)).subscribe((0,ie._)(Ee,Ct=>{lt?.(Ct),rt?le(Ct):Ee.next(Ct)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(et--;it.length&&et<Ge;){const Ct=it.shift();De?(0,E.N)(Ee,De,()=>ee(Ct)):ee(Ct)}oe()}catch(Ct){Ee.error(Ct)}}))};return Be.subscribe((0,ie._)(Ee,le,()=>{bt=!0,oe()})),()=>{st?.()}}(Ge,lt,Be,_e)))}},941:(rn,ze,k)=>{k.d(ze,{Q:()=>E});var _=k(5225),T=k(9974),R=k(4360);function E(ie,Ae=0){return(0,T.N)((ge,Ve)=>{ge.subscribe((0,R._)(Ve,Be=>(0,_.N)(Ve,ie,()=>Ve.next(Be),Ae),()=>(0,_.N)(Ve,ie,()=>Ve.complete(),Ae),Be=>(0,_.N)(Ve,ie,()=>Ve.error(Be),Ae)))})}},2816:(rn,ze,k)=>{k.d(ze,{S:()=>E});var _=k(9974),T=k(4360);function E(ie,Ae){return(0,_.N)(function R(ie,Ae,ge,Ve,Be){return(Ee,_e)=>{let Ge=ge,lt=Ae,rt=0;Ee.subscribe((0,T._)(_e,De=>{const st=rt++;lt=Ge?ie(lt,De,st):(Ge=!0,De),Ve&&_e.next(lt)},Be&&(()=>{Ge&&_e.next(lt),_e.complete()})))}}(ie,Ae,arguments.length>=2,!0))}},9172:(rn,ze,k)=>{k.d(ze,{Z:()=>E});var _=k(8793),T=k(9326),R=k(9974);function E(...ie){const Ae=(0,T.lI)(ie);return(0,R.N)((ge,Ve)=>{(Ae?(0,_.x)(ie,ge,Ae):(0,_.x)(ie,ge)).subscribe(Ve)})}},6745:(rn,ze,k)=>{k.d(ze,{_:()=>T});var _=k(9974);function T(R,E=0){return(0,_.N)((ie,Ae)=>{Ae.add(R.schedule(()=>ie.subscribe(Ae),E))})}},5558:(rn,ze,k)=>{k.d(ze,{n:()=>E});var _=k(8750),T=k(9974),R=k(4360);function E(ie,Ae){return(0,T.N)((ge,Ve)=>{let Be=null,Ee=0,_e=!1;const Ge=()=>_e&&!Be&&Ve.complete();ge.subscribe((0,R._)(Ve,lt=>{Be?.unsubscribe();let rt=0;const De=Ee++;(0,_.Tg)(ie(lt,De)).subscribe(Be=(0,R._)(Ve,st=>Ve.next(Ae?Ae(lt,st,De,rt++):st),()=>{Be=null,Ge()}))},()=>{_e=!0,Ge()}))})}},6697:(rn,ze,k)=>{k.d(ze,{s:()=>E});var _=k(983),T=k(9974),R=k(4360);function E(ie){return ie<=0?()=>_.w:(0,T.N)((Ae,ge)=>{let Ve=0;Ae.subscribe((0,R._)(ge,Be=>{++Ve<=ie&&(ge.next(Be),ie<=Ve&&ge.complete())}))})}},8141:(rn,ze,k)=>{k.d(ze,{M:()=>ie});var _=k(8071),T=k(9974),R=k(4360),E=k(3669);function ie(Ae,ge,Ve){const Be=(0,_.T)(Ae)||ge||Ve?{next:Ae,error:ge,complete:Ve}:Ae;return Be?(0,T.N)((Ee,_e)=>{var Ge;null===(Ge=Be.subscribe)||void 0===Ge||Ge.call(Be);let lt=!0;Ee.subscribe((0,R._)(_e,rt=>{var De;null===(De=Be.next)||void 0===De||De.call(Be,rt),_e.next(rt)},()=>{var rt;lt=!1,null===(rt=Be.complete)||void 0===rt||rt.call(Be),_e.complete()},rt=>{var De;lt=!1,null===(De=Be.error)||void 0===De||De.call(Be,rt),_e.error(rt)},()=>{var rt,De;lt&&(null===(rt=Be.unsubscribe)||void 0===rt||rt.call(Be)),null===(De=Be.finalize)||void 0===De||De.call(Be)}))}):E.D}},3774:(rn,ze,k)=>{k.d(ze,{v:()=>E});var _=k(9350),T=k(9974),R=k(4360);function E(Ae=ie){return(0,T.N)((ge,Ve)=>{let Be=!1;ge.subscribe((0,R._)(Ve,Ee=>{Be=!0,Ve.next(Ee)},()=>Be?Ve.complete():Ve.error(Ae())))})}function ie(){return new _.G}},6780:(rn,ze,k)=>{k.d(ze,{R:()=>ie});var _=k(8359);class T extends _.yU{constructor(ge,Ve){super()}schedule(ge,Ve=0){return this}}const R={setInterval(Ae,ge,...Ve){const{delegate:Be}=R;return Be?.setInterval?Be.setInterval(Ae,ge,...Ve):setInterval(Ae,ge,...Ve)},clearInterval(Ae){const{delegate:ge}=R;return(ge?.clearInterval||clearInterval)(Ae)},delegate:void 0};var E=k(7908);class ie extends T{constructor(ge,Ve){super(ge,Ve),this.scheduler=ge,this.work=Ve,this.pending=!1}schedule(ge,Ve=0){var Be;if(this.closed)return this;this.state=ge;const Ee=this.id,_e=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(_e,Ee,Ve)),this.pending=!0,this.delay=Ve,this.id=null!==(Be=this.id)&&void 0!==Be?Be:this.requestAsyncId(_e,this.id,Ve),this}requestAsyncId(ge,Ve,Be=0){return R.setInterval(ge.flush.bind(ge,this),Be)}recycleAsyncId(ge,Ve,Be=0){if(null!=Be&&this.delay===Be&&!1===this.pending)return Ve;null!=Ve&&R.clearInterval(Ve)}execute(ge,Ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Be=this._execute(ge,Ve);if(Be)return Be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,Ve){let Ee,Be=!1;try{this.work(ge)}catch(_e){Be=!0,Ee=_e||new Error("Scheduled action threw falsy error")}if(Be)return this.unsubscribe(),Ee}unsubscribe(){if(!this.closed){const{id:ge,scheduler:Ve}=this,{actions:Be}=Ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,E.o)(Be,this),null!=ge&&(this.id=this.recycleAsyncId(Ve,ge,null)),this.delay=null,super.unsubscribe()}}}},9687:(rn,ze,k)=>{k.d(ze,{q:()=>R});var _=k(6129);class T{constructor(ie,Ae=T.now){this.schedulerActionCtor=ie,this.now=Ae}schedule(ie,Ae=0,ge){return new this.schedulerActionCtor(this,ie).schedule(ge,Ae)}}T.now=_.U.now;class R extends T{constructor(ie,Ae=T.now){super(ie,Ae),this.actions=[],this._active=!1}flush(ie){const{actions:Ae}=this;if(this._active)return void Ae.push(ie);let ge;this._active=!0;do{if(ge=ie.execute(ie.state,ie.delay))break}while(ie=Ae.shift());if(this._active=!1,ge){for(;ie=Ae.shift();)ie.unsubscribe();throw ge}}}},3236:(rn,ze,k)=>{k.d(ze,{E:()=>R,b:()=>E});var _=k(6780);const R=new(k(9687).q)(_.R),E=R},6129:(rn,ze,k)=>{k.d(ze,{U:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},9270:(rn,ze,k)=>{k.d(ze,{f:()=>_});const _={setTimeout(T,R,...E){const{delegate:ie}=_;return ie?.setTimeout?ie.setTimeout(T,R,...E):setTimeout(T,R,...E)},clearTimeout(T){const{delegate:R}=_;return(R?.clearTimeout||clearTimeout)(T)},delegate:void 0}},4761:(rn,ze,k)=>{k.d(ze,{l:()=>T});const T=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(rn,ze,k)=>{k.d(ze,{s:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(rn,ze,k)=>{k.d(ze,{G:()=>T});const T=(0,k(1853).L)(R=>function(){R(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(rn,ze,k)=>{k.d(ze,{R0:()=>Ae,lI:()=>ie,ms:()=>E});var _=k(8071),T=k(9470);function R(ge){return ge[ge.length-1]}function E(ge){return(0,_.T)(R(ge))?ge.pop():void 0}function ie(ge){return(0,T.m)(R(ge))?ge.pop():void 0}function Ae(ge,Ve){return"number"==typeof R(ge)?ge.pop():Ve}},3073:(rn,ze,k)=>{k.d(ze,{D:()=>ie});const{isArray:_}=Array,{getPrototypeOf:T,prototype:R,keys:E}=Object;function ie(ge){if(1===ge.length){const Ve=ge[0];if(_(Ve))return{args:Ve,keys:null};if(function Ae(ge){return ge&&"object"==typeof ge&&T(ge)===R}(Ve)){const Be=E(Ve);return{args:Be.map(Ee=>Ve[Ee]),keys:Be}}}return{args:ge,keys:null}}},7908:(rn,ze,k)=>{function _(T,R){if(T){const E=T.indexOf(R);0<=E&&T.splice(E,1)}}k.d(ze,{o:()=>_})},1853:(rn,ze,k)=>{function _(T){const E=T(ie=>{Error.call(ie),ie.stack=(new Error).stack});return E.prototype=Object.create(Error.prototype),E.prototype.constructor=E,E}k.d(ze,{L:()=>_})},8496:(rn,ze,k)=>{function _(T,R){return T.reduce((E,ie,Ae)=>(E[ie]=R[Ae],E),{})}k.d(ze,{e:()=>_})},9786:(rn,ze,k)=>{k.d(ze,{Y:()=>R,l:()=>E});var _=k(1026);let T=null;function R(ie){if(_.$.useDeprecatedSynchronousErrorHandling){const Ae=!T;if(Ae&&(T={errorThrown:!1,error:null}),ie(),Ae){const{errorThrown:ge,error:Ve}=T;if(T=null,ge)throw Ve}}else ie()}function E(ie){_.$.useDeprecatedSynchronousErrorHandling&&T&&(T.errorThrown=!0,T.error=ie)}},5225:(rn,ze,k)=>{function _(T,R,E,ie=0,Ae=!1){const ge=R.schedule(function(){E(),Ae?T.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(T.add(ge),!Ae)return ge}k.d(ze,{N:()=>_})},3669:(rn,ze,k)=>{function _(T){return T}k.d(ze,{D:()=>_})},7441:(rn,ze,k)=>{k.d(ze,{X:()=>_});const _=T=>T&&"number"==typeof T.length&&"function"!=typeof T},7953:(rn,ze,k)=>{k.d(ze,{T:()=>T});var _=k(8071);function T(R){return Symbol.asyncIterator&&(0,_.T)(R?.[Symbol.asyncIterator])}},8071:(rn,ze,k)=>{function _(T){return"function"==typeof T}k.d(ze,{T:()=>_})},5055:(rn,ze,k)=>{k.d(ze,{l:()=>R});var _=k(3494),T=k(8071);function R(E){return(0,T.T)(E[_.s])}},5397:(rn,ze,k)=>{k.d(ze,{x:()=>R});var _=k(4761),T=k(8071);function R(E){return(0,T.T)(E?.[_.l])}},9858:(rn,ze,k)=>{k.d(ze,{y:()=>T});var _=k(8071);function T(R){return(0,_.T)(R?.then)}},5196:(rn,ze,k)=>{k.d(ze,{C:()=>R,U:()=>E});var _=k(1635),T=k(8071);function R(ie){return(0,_.AQ)(this,arguments,function*(){const ge=ie.getReader();try{for(;;){const{value:Ve,done:Be}=yield(0,_.N3)(ge.read());if(Be)return yield(0,_.N3)(void 0);yield yield(0,_.N3)(Ve)}}finally{ge.releaseLock()}})}function E(ie){return(0,T.T)(ie?.getReader)}},9470:(rn,ze,k)=>{k.d(ze,{m:()=>T});var _=k(8071);function T(R){return R&&(0,_.T)(R.schedule)}},9974:(rn,ze,k)=>{k.d(ze,{N:()=>R,S:()=>T});var _=k(8071);function T(E){return(0,_.T)(E?.lift)}function R(E){return ie=>{if(T(ie))return ie.lift(function(Ae){try{return E(Ae,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(rn,ze,k)=>{k.d(ze,{I:()=>E});var _=k(6354);const{isArray:T}=Array;function E(ie){return(0,_.T)(Ae=>function R(ie,Ae){return T(Ae)?ie(...Ae):ie(Ae)}(ie,Ae))}},5343:(rn,ze,k)=>{function _(){}k.d(ze,{l:()=>_})},1203:(rn,ze,k)=>{k.d(ze,{F:()=>T,m:()=>R});var _=k(3669);function T(...E){return R(E)}function R(E){return 0===E.length?_.D:1===E.length?E[0]:function(Ae){return E.reduce((ge,Ve)=>Ve(ge),Ae)}}},5334:(rn,ze,k)=>{k.d(ze,{m:()=>R});var _=k(1026),T=k(9270);function R(E){T.f.setTimeout(()=>{const{onUnhandledError:ie}=_.$;if(!ie)throw E;ie(E)})}},591:(rn,ze,k)=>{function _(T){return new TypeError(`You provided ${null!==T&&"object"==typeof T?"an invalid object":`'${T}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(ze,{L:()=>_})},9969:(rn,ze,k)=>{k.d(ze,{FX:()=>Ct,If:()=>_,K2:()=>Ae,hZ:()=>R,i0:()=>E,iF:()=>ge,kY:()=>Ee,kp:()=>T,sf:()=>je,ui:()=>Ne,wk:()=>Ve});var _=function(ue){return ue[ue.State=0]="State",ue[ue.Transition=1]="Transition",ue[ue.Sequence=2]="Sequence",ue[ue.Group=3]="Group",ue[ue.Animate=4]="Animate",ue[ue.Keyframes=5]="Keyframes",ue[ue.Style=6]="Style",ue[ue.Trigger=7]="Trigger",ue[ue.Reference=8]="Reference",ue[ue.AnimateChild=9]="AnimateChild",ue[ue.AnimateRef=10]="AnimateRef",ue[ue.Query=11]="Query",ue[ue.Stagger=12]="Stagger",ue}(_||{});const T="*";function R(ue,He){return{type:_.Trigger,name:ue,definitions:He,options:{}}}function E(ue,He=null){return{type:_.Animate,styles:He,timings:ue}}function Ae(ue,He=null){return{type:_.Sequence,steps:ue,options:He}}function ge(ue){return{type:_.Style,styles:ue,offset:null}}function Ve(ue,He,Lt){return{type:_.State,name:ue,styles:He,options:Lt}}function Ee(ue,He,Lt=null){return{type:_.Transition,expr:ue,animation:He,options:Lt}}class je{constructor(He=0,Lt=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=He+Lt}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(He=>He()),this._onDoneFns=[])}onStart(He){this._originalOnStartFns.push(He),this._onStartFns.push(He)}onDone(He){this._originalOnDoneFns.push(He),this._onDoneFns.push(He)}onDestroy(He){this._onDestroyFns.push(He)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(He=>He()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(He=>He()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(He){this._position=this.totalTime?He*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(He){const Lt="start"==He?this._onStartFns:this._onDoneFns;Lt.forEach(Ut=>Ut()),Lt.length=0}}class Ne{constructor(He){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=He;let Lt=0,Ut=0,ln=0;const Ht=this.players.length;0==Ht?queueMicrotask(()=>this._onFinish()):this.players.forEach(en=>{en.onDone(()=>{++Lt==Ht&&this._onFinish()}),en.onDestroy(()=>{++Ut==Ht&&this._onDestroy()}),en.onStart(()=>{++ln==Ht&&this._onStart()})}),this.totalTime=this.players.reduce((en,vt)=>Math.max(en,vt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(He=>He()),this._onDoneFns=[])}init(){this.players.forEach(He=>He.init())}onStart(He){this._onStartFns.push(He)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(He=>He()),this._onStartFns=[])}onDone(He){this._onDoneFns.push(He)}onDestroy(He){this._onDestroyFns.push(He)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(He=>He.play())}pause(){this.players.forEach(He=>He.pause())}restart(){this.players.forEach(He=>He.restart())}finish(){this._onFinish(),this.players.forEach(He=>He.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(He=>He.destroy()),this._onDestroyFns.forEach(He=>He()),this._onDestroyFns=[])}reset(){this.players.forEach(He=>He.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(He){const Lt=He*this.totalTime;this.players.forEach(Ut=>{const ln=Ut.totalTime?Math.min(1,Lt/Ut.totalTime):1;Ut.setPosition(ln)})}getPosition(){const He=this.players.reduce((Lt,Ut)=>null===Lt||Ut.totalTime>Lt.totalTime?Ut:Lt,null);return null!=He?He.getPosition():0}beforeDestroy(){this.players.forEach(He=>{He.beforeDestroy&&He.beforeDestroy()})}triggerCallback(He){const Lt="start"==He?this._onStartFns:this._onDoneFns;Lt.forEach(Ut=>Ut()),Lt.length=0}}const Ct="!"},177:(rn,ze,k)=>{k.d(ze,{AJ:()=>gs,Jj:()=>nr,MD:()=>ks,N0:()=>ao,P9:()=>oi,QT:()=>R,Sm:()=>st,Sq:()=>Tn,VF:()=>ie,Vy:()=>ji,Xr:()=>Uo,YU:()=>Qe,ZD:()=>E,_b:()=>ve,aZ:()=>et,bT:()=>_r,fw:()=>it,hb:()=>rt,hj:()=>Be,qQ:()=>ge});var _=k(4438);let T=null;function R(){return T}function E(P){T??=P}class ie{}const ge=new _.nKC("");let Ve=(()=>{class P{historyGo(x){throw new Error("")}static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275prov=_.jDH({token:P,factory:()=>(0,_.WQX)(Ee),providedIn:"platform"})}return P})();const Be=new _.nKC("");let Ee=(()=>{class P extends Ve{constructor(){super(),this._doc=(0,_.WQX)(ge),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(x){const B=R().getGlobalEventTarget(this._doc,"window");return B.addEventListener("popstate",x,!1),()=>B.removeEventListener("popstate",x)}onHashChange(x){const B=R().getGlobalEventTarget(this._doc,"window");return B.addEventListener("hashchange",x,!1),()=>B.removeEventListener("hashchange",x)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(x){this._location.pathname=x}pushState(x,B,ye){this._history.pushState(x,B,ye)}replaceState(x,B,ye){this._history.replaceState(x,B,ye)}forward(){this._history.forward()}back(){this._history.back()}historyGo(x=0){this._history.go(x)}getState(){return this._history.state}static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275prov=_.jDH({token:P,factory:()=>new P,providedIn:"platform"})}return P})();function _e(P,$){if(0==P.length)return $;if(0==$.length)return P;let x=0;return P.endsWith("/")&&x++,$.startsWith("/")&&x++,2==x?P+$.substring(1):1==x?P+$:P+"/"+$}function Ge(P){const $=P.match(/#|\?|$/),x=$&&$.index||P.length;return P.slice(0,x-("/"===P[x-1]?1:0))+P.slice(x)}function lt(P){return P&&"?"!==P[0]?"?"+P:P}let rt=(()=>{class P{historyGo(x){throw new Error("")}static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275prov=_.jDH({token:P,factory:()=>(0,_.WQX)(st),providedIn:"root"})}return P})();const De=new _.nKC("");let st=(()=>{class P extends rt{constructor(x,B){super(),this._platformLocation=x,this._removeListenerFns=[],this._baseHref=B??this._platformLocation.getBaseHrefFromDOM()??(0,_.WQX)(ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}prepareExternalUrl(x){return _e(this._baseHref,x)}path(x=!1){const B=this._platformLocation.pathname+lt(this._platformLocation.search),ye=this._platformLocation.hash;return ye&&x?`${B}${ye}`:B}pushState(x,B,ye,ot){const xt=this.prepareExternalUrl(ye+lt(ot));this._platformLocation.pushState(x,B,xt)}replaceState(x,B,ye,ot){const xt=this.prepareExternalUrl(ye+lt(ot));this._platformLocation.replaceState(x,B,xt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}static#e=this.\u0275fac=function(B){return new(B||P)(_.KVO(Ve),_.KVO(De,8))};static#t=this.\u0275prov=_.jDH({token:P,factory:P.\u0275fac,providedIn:"root"})}return P})(),it=(()=>{class P extends rt{constructor(x,B){super(),this._platformLocation=x,this._baseHref="",this._removeListenerFns=[],null!=B&&(this._baseHref=B)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(x){this._removeListenerFns.push(this._platformLocation.onPopState(x),this._platformLocation.onHashChange(x))}getBaseHref(){return this._baseHref}path(x=!1){const B=this._platformLocation.hash??"#";return B.length>0?B.substring(1):B}prepareExternalUrl(x){const B=_e(this._baseHref,x);return B.length>0?"#"+B:B}pushState(x,B,ye,ot){let xt=this.prepareExternalUrl(ye+lt(ot));0==xt.length&&(xt=this._platformLocation.pathname),this._platformLocation.pushState(x,B,xt)}replaceState(x,B,ye,ot){let xt=this.prepareExternalUrl(ye+lt(ot));0==xt.length&&(xt=this._platformLocation.pathname),this._platformLocation.replaceState(x,B,xt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(x=0){this._platformLocation.historyGo?.(x)}static#e=this.\u0275fac=function(B){return new(B||P)(_.KVO(Ve),_.KVO(De,8))};static#t=this.\u0275prov=_.jDH({token:P,factory:P.\u0275fac})}return P})(),et=(()=>{class P{constructor(x){this._subject=new _.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=x;const B=this._locationStrategy.getBaseHref();this._basePath=function le(P){if(new RegExp("^(https?:)?//").test(P)){const[,x]=P.split(/\/\/[^\/]+/);return x}return P}(Ge(oe(B))),this._locationStrategy.onPopState(ye=>{this._subject.emit({url:this.path(!0),pop:!0,state:ye.state,type:ye.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(x=!1){return this.normalize(this._locationStrategy.path(x))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(x,B=""){return this.path()==this.normalize(x+lt(B))}normalize(x){return P.stripTrailingSlash(function bt(P,$){if(!P||!$.startsWith(P))return $;const x=$.substring(P.length);return""===x||["/",";","?","#"].includes(x[0])?x:$}(this._basePath,oe(x)))}prepareExternalUrl(x){return x&&"/"!==x[0]&&(x="/"+x),this._locationStrategy.prepareExternalUrl(x)}go(x,B="",ye=null){this._locationStrategy.pushState(ye,"",x,B),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+lt(B)),ye)}replaceState(x,B="",ye=null){this._locationStrategy.replaceState(ye,"",x,B),this._notifyUrlChangeListeners(this.prepareExternalUrl(x+lt(B)),ye)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(x=0){this._locationStrategy.historyGo?.(x)}onUrlChange(x){return this._urlChangeListeners.push(x),this._urlChangeSubscription??=this.subscribe(B=>{this._notifyUrlChangeListeners(B.url,B.state)}),()=>{const B=this._urlChangeListeners.indexOf(x);this._urlChangeListeners.splice(B,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(x="",B){this._urlChangeListeners.forEach(ye=>ye(x,B))}subscribe(x,B,ye){return this._subject.subscribe({next:x,error:B,complete:ye})}static#e=this.normalizeQueryParams=lt;static#t=this.joinWithSlash=_e;static#n=this.stripTrailingSlash=Ge;static#r=this.\u0275fac=function(B){return new(B||P)(_.KVO(rt))};static#i=this.\u0275prov=_.jDH({token:P,factory:()=>function Dt(){return new et((0,_.KVO)(rt))}(),providedIn:"root"})}return P})();function oe(P){return P.replace(/\/index.html$/,"")}function ve(P,$){$=encodeURIComponent($);for(const x of P.split(";")){const B=x.indexOf("="),[ye,ot]=-1==B?[x,""]:[x.slice(0,B),x.slice(B+1)];if(ye.trim()===$)return decodeURIComponent(ot)}return null}const Ie=/\s+/,ut=[];let Qe=(()=>{class P{constructor(x,B){this._ngEl=x,this._renderer=B,this.initialClasses=ut,this.stateMap=new Map}set klass(x){this.initialClasses=null!=x?x.trim().split(Ie):ut}set ngClass(x){this.rawClass="string"==typeof x?x.trim().split(Ie):x}ngDoCheck(){for(const B of this.initialClasses)this._updateState(B,!0);const x=this.rawClass;if(Array.isArray(x)||x instanceof Set)for(const B of x)this._updateState(B,!0);else if(null!=x)for(const B of Object.keys(x))this._updateState(B,!!x[B]);this._applyStateDiff()}_updateState(x,B){const ye=this.stateMap.get(x);void 0!==ye?(ye.enabled!==B&&(ye.changed=!0,ye.enabled=B),ye.touched=!0):this.stateMap.set(x,{enabled:B,changed:!0,touched:!0})}_applyStateDiff(){for(const x of this.stateMap){const B=x[0],ye=x[1];ye.changed?(this._toggleClass(B,ye.enabled),ye.changed=!1):ye.touched||(ye.enabled&&this._toggleClass(B,!1),this.stateMap.delete(B)),ye.touched=!1}}_toggleClass(x,B){(x=x.trim()).length>0&&x.split(Ie).forEach(ye=>{B?this._renderer.addClass(this._ngEl.nativeElement,ye):this._renderer.removeClass(this._ngEl.nativeElement,ye)})}static#e=this.\u0275fac=function(B){return new(B||P)(_.rXU(_.aKT),_.rXU(_.sFG))};static#t=this.\u0275dir=_.FsC({type:P,selectors:[["","ngClass",""]],inputs:{klass:[_.Mj6.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return P})();class Rn{constructor($,x,B,ye){this.$implicit=$,this.ngForOf=x,this.index=B,this.count=ye}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Tn=(()=>{class P{set ngForOf(x){this._ngForOf=x,this._ngForOfDirty=!0}set ngForTrackBy(x){this._trackByFn=x}get ngForTrackBy(){return this._trackByFn}constructor(x,B,ye){this._viewContainer=x,this._template=B,this._differs=ye,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(x){x&&(this._template=x)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const x=this._ngForOf;!this._differ&&x&&(this._differ=this._differs.find(x).create(this.ngForTrackBy))}if(this._differ){const x=this._differ.diff(this._ngForOf);x&&this._applyChanges(x)}}_applyChanges(x){const B=this._viewContainer;x.forEachOperation((ye,ot,xt)=>{if(null==ye.previousIndex)B.createEmbeddedView(this._template,new Rn(ye.item,this._ngForOf,-1,-1),null===xt?void 0:xt);else if(null==xt)B.remove(null===ot?void 0:ot);else if(null!==ot){const un=B.get(ot);B.move(un,xt),br(un,ye)}});for(let ye=0,ot=B.length;ye<ot;ye++){const un=B.get(ye).context;un.index=ye,un.count=ot,un.ngForOf=this._ngForOf}x.forEachIdentityChange(ye=>{br(B.get(ye.currentIndex),ye)})}static ngTemplateContextGuard(x,B){return!0}static#e=this.\u0275fac=function(B){return new(B||P)(_.rXU(_.c1b),_.rXU(_.C4Q),_.rXU(_._q3))};static#t=this.\u0275dir=_.FsC({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return P})();function br(P,$){P.context.$implicit=$.item}let _r=(()=>{class P{constructor(x,B){this._viewContainer=x,this._context=new ui,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=B}set ngIf(x){this._context.$implicit=this._context.ngIf=x,this._updateView()}set ngIfThen(x){Xr("ngIfThen",x),this._thenTemplateRef=x,this._thenViewRef=null,this._updateView()}set ngIfElse(x){Xr("ngIfElse",x),this._elseTemplateRef=x,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(x,B){return!0}static#e=this.\u0275fac=function(B){return new(B||P)(_.rXU(_.c1b),_.rXU(_.C4Q))};static#t=this.\u0275dir=_.FsC({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return P})();class ui{constructor(){this.$implicit=null,this.ngIf=null}}function Xr(P,$){if($&&!$.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,_.Tbb)($)}'.`)}function zi(P,$){return new _.wOt(2100,!1)}class oo{createSubscription($,x){return(0,_.O8t)(()=>$.subscribe({next:x,error:B=>{throw B}}))}dispose($){(0,_.O8t)(()=>$.unsubscribe())}}class Qo{createSubscription($,x){return $.then(x,B=>{throw B})}dispose($){}}const ua=new Qo,vo=new oo;let nr=(()=>{class P{constructor(x){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=x}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(x){if(!this._obj){if(x)try{this.markForCheckOnValueUpdate=!1,this._subscribe(x)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return x!==this._obj?(this._dispose(),this.transform(x)):this._latestValue}_subscribe(x){this._obj=x,this._strategy=this._selectStrategy(x),this._subscription=this._strategy.createSubscription(x,B=>this._updateLatestValue(x,B))}_selectStrategy(x){if((0,_.jNT)(x))return ua;if((0,_.zjR)(x))return vo;throw zi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(x,B){x===this._obj&&(this._latestValue=B,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(B){return new(B||P)(_.rXU(_.gRc,16))};static#t=this.\u0275pipe=_.EJ8({name:"async",type:P,pure:!1,standalone:!0})}return P})(),oi=(()=>{class P{transform(x,B,ye){if(null==x)return null;if(!this.supports(x))throw zi();return x.slice(B,ye)}supports(x){return"string"==typeof x||Array.isArray(x)}static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275pipe=_.EJ8({name:"slice",type:P,pure:!1,standalone:!0})}return P})(),ks=(()=>{class P{static#e=this.\u0275fac=function(B){return new(B||P)};static#t=this.\u0275mod=_.$C({type:P});static#n=this.\u0275inj=_.G2t({})}return P})();const gs="browser",Ys="server";function ji(P){return P===Ys}let Uo=(()=>{class P{static#e=this.\u0275prov=(0,_.jDH)({token:P,providedIn:"root",factory:()=>function Wi(P){return P===gs}((0,_.WQX)(_.Agw))?new ns((0,_.WQX)(ge),window):new Io})}return P})();class ns{constructor($,x){this.document=$,this.window=x,this.offset=()=>[0,0]}setOffset($){this.offset=Array.isArray($)?()=>$:$}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition($){this.window.scrollTo($[0],$[1])}scrollToAnchor($){const x=function Oi(P,$){const x=P.getElementById($)||P.getElementsByName($)[0];if(x)return x;if("function"==typeof P.createTreeWalker&&P.body&&"function"==typeof P.body.attachShadow){const B=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let ye=B.currentNode;for(;ye;){const ot=ye.shadowRoot;if(ot){const xt=ot.getElementById($)||ot.querySelector(`[name="${$}"]`);if(xt)return xt}ye=B.nextNode()}}return null}(this.document,$);x&&(this.scrollToElement(x),x.focus())}setHistoryScrollRestoration($){this.window.history.scrollRestoration=$}scrollToElement($){const x=$.getBoundingClientRect(),B=x.left+this.window.pageXOffset,ye=x.top+this.window.pageYOffset,ot=this.offset();this.window.scrollTo(B-ot[0],ye-ot[1])}}class Io{setOffset($){}getScrollPosition(){return[0,0]}scrollToPosition($){}scrollToAnchor($){}setHistoryScrollRestoration($){}}class ao{}},1626:(rn,ze,k)=>{k.d(ze,{Qq:()=>dt,q1:()=>Bn}),k(467);var T=k(4438),R=k(7673),E=k(1985),ie=k(8455),Ae=k(274),ge=k(5964),Ve=k(6354),Be=k(980),Ee=k(5558),_e=k(177);class Ge{}class lt{}class rt{constructor(ve){this.normalizedNames=new Map,this.lazyUpdate=null,ve?"string"==typeof ve?this.lazyInit=()=>{this.headers=new Map,ve.split("\n").forEach(Ie=>{const ut=Ie.indexOf(":");if(ut>0){const Qe=Ie.slice(0,ut),Xt=Qe.toLowerCase(),jt=Ie.slice(ut+1).trim();this.maybeSetNormalizedName(Qe,Xt),this.headers.has(Xt)?this.headers.get(Xt).push(jt):this.headers.set(Xt,[jt])}})}:typeof Headers<"u"&&ve instanceof Headers?(this.headers=new Map,ve.forEach((Ie,ut)=>{this.setHeaderEntries(ut,Ie)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(ve).forEach(([Ie,ut])=>{this.setHeaderEntries(Ie,ut)})}:this.headers=new Map}has(ve){return this.init(),this.headers.has(ve.toLowerCase())}get(ve){this.init();const Ie=this.headers.get(ve.toLowerCase());return Ie&&Ie.length>0?Ie[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ve){return this.init(),this.headers.get(ve.toLowerCase())||null}append(ve,Ie){return this.clone({name:ve,value:Ie,op:"a"})}set(ve,Ie){return this.clone({name:ve,value:Ie,op:"s"})}delete(ve,Ie){return this.clone({name:ve,value:Ie,op:"d"})}maybeSetNormalizedName(ve,Ie){this.normalizedNames.has(Ie)||this.normalizedNames.set(Ie,ve)}init(){this.lazyInit&&(this.lazyInit instanceof rt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ve=>this.applyUpdate(ve)),this.lazyUpdate=null))}copyFrom(ve){ve.init(),Array.from(ve.headers.keys()).forEach(Ie=>{this.headers.set(Ie,ve.headers.get(Ie)),this.normalizedNames.set(Ie,ve.normalizedNames.get(Ie))})}clone(ve){const Ie=new rt;return Ie.lazyInit=this.lazyInit&&this.lazyInit instanceof rt?this.lazyInit:this,Ie.lazyUpdate=(this.lazyUpdate||[]).concat([ve]),Ie}applyUpdate(ve){const Ie=ve.name.toLowerCase();switch(ve.op){case"a":case"s":let ut=ve.value;if("string"==typeof ut&&(ut=[ut]),0===ut.length)return;this.maybeSetNormalizedName(ve.name,Ie);const Qe=("a"===ve.op?this.headers.get(Ie):void 0)||[];Qe.push(...ut),this.headers.set(Ie,Qe);break;case"d":const Xt=ve.value;if(Xt){let jt=this.headers.get(Ie);if(!jt)return;jt=jt.filter(Rn=>-1===Xt.indexOf(Rn)),0===jt.length?(this.headers.delete(Ie),this.normalizedNames.delete(Ie)):this.headers.set(Ie,jt)}else this.headers.delete(Ie),this.normalizedNames.delete(Ie)}}setHeaderEntries(ve,Ie){const ut=(Array.isArray(Ie)?Ie:[Ie]).map(Xt=>Xt.toString()),Qe=ve.toLowerCase();this.headers.set(Qe,ut),this.maybeSetNormalizedName(ve,Qe)}forEach(ve){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ie=>ve(this.normalizedNames.get(Ie),this.headers.get(Ie)))}}class st{encodeKey(ve){return bt(ve)}encodeValue(ve){return bt(ve)}decodeKey(ve){return decodeURIComponent(ve)}decodeValue(ve){return decodeURIComponent(ve)}}const et=/%(\d[a-f0-9])/gi,Dt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function bt(ne){return encodeURIComponent(ne).replace(et,(ve,Ie)=>Dt[Ie]??ve)}function oe(ne){return`${ne}`}class le{constructor(ve={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ve.encoder||new st,ve.fromString){if(ve.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function it(ne,ve){const Ie=new Map;return ne.length>0&&ne.replace(/^\?/,"").split("&").forEach(Qe=>{const Xt=Qe.indexOf("="),[jt,Rn]=-1==Xt?[ve.decodeKey(Qe),""]:[ve.decodeKey(Qe.slice(0,Xt)),ve.decodeValue(Qe.slice(Xt+1))],Tn=Ie.get(jt)||[];Tn.push(Rn),Ie.set(jt,Tn)}),Ie}(ve.fromString,this.encoder)}else ve.fromObject?(this.map=new Map,Object.keys(ve.fromObject).forEach(Ie=>{const ut=ve.fromObject[Ie],Qe=Array.isArray(ut)?ut.map(oe):[oe(ut)];this.map.set(Ie,Qe)})):this.map=null}has(ve){return this.init(),this.map.has(ve)}get(ve){this.init();const Ie=this.map.get(ve);return Ie?Ie[0]:null}getAll(ve){return this.init(),this.map.get(ve)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ve,Ie){return this.clone({param:ve,value:Ie,op:"a"})}appendAll(ve){const Ie=[];return Object.keys(ve).forEach(ut=>{const Qe=ve[ut];Array.isArray(Qe)?Qe.forEach(Xt=>{Ie.push({param:ut,value:Xt,op:"a"})}):Ie.push({param:ut,value:Qe,op:"a"})}),this.clone(Ie)}set(ve,Ie){return this.clone({param:ve,value:Ie,op:"s"})}delete(ve,Ie){return this.clone({param:ve,value:Ie,op:"d"})}toString(){return this.init(),this.keys().map(ve=>{const Ie=this.encoder.encodeKey(ve);return this.map.get(ve).map(ut=>Ie+"="+this.encoder.encodeValue(ut)).join("&")}).filter(ve=>""!==ve).join("&")}clone(ve){const Ie=new le({encoder:this.encoder});return Ie.cloneFrom=this.cloneFrom||this,Ie.updates=(this.updates||[]).concat(ve),Ie}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ve=>this.map.set(ve,this.cloneFrom.map.get(ve))),this.updates.forEach(ve=>{switch(ve.op){case"a":case"s":const Ie=("a"===ve.op?this.map.get(ve.param):void 0)||[];Ie.push(oe(ve.value)),this.map.set(ve.param,Ie);break;case"d":if(void 0===ve.value){this.map.delete(ve.param);break}{let ut=this.map.get(ve.param)||[];const Qe=ut.indexOf(oe(ve.value));-1!==Qe&&ut.splice(Qe,1),ut.length>0?this.map.set(ve.param,ut):this.map.delete(ve.param)}}}),this.cloneFrom=this.updates=null)}}class je{constructor(){this.map=new Map}set(ve,Ie){return this.map.set(ve,Ie),this}get(ve){return this.map.has(ve)||this.map.set(ve,ve.defaultValue()),this.map.get(ve)}delete(ve){return this.map.delete(ve),this}has(ve){return this.map.has(ve)}keys(){return this.map.keys()}}function Ct(ne){return typeof ArrayBuffer<"u"&&ne instanceof ArrayBuffer}function ue(ne){return typeof Blob<"u"&&ne instanceof Blob}function He(ne){return typeof FormData<"u"&&ne instanceof FormData}class Ut{constructor(ve,Ie,ut,Qe){let Xt;if(this.url=Ie,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ve.toUpperCase(),function Ne(ne){switch(ne){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Qe?(this.body=void 0!==ut?ut:null,Xt=Qe):Xt=ut,Xt&&(this.reportProgress=!!Xt.reportProgress,this.withCredentials=!!Xt.withCredentials,Xt.responseType&&(this.responseType=Xt.responseType),Xt.headers&&(this.headers=Xt.headers),Xt.context&&(this.context=Xt.context),Xt.params&&(this.params=Xt.params),this.transferCache=Xt.transferCache),this.headers??=new rt,this.context??=new je,this.params){const jt=this.params.toString();if(0===jt.length)this.urlWithParams=Ie;else{const Rn=Ie.indexOf("?");this.urlWithParams=Ie+(-1===Rn?"?":Rn<Ie.length-1?"&":"")+jt}}else this.params=new le,this.urlWithParams=Ie}serializeBody(){return null===this.body?null:"string"==typeof this.body||Ct(this.body)||ue(this.body)||He(this.body)||function Lt(ne){return typeof URLSearchParams<"u"&&ne instanceof URLSearchParams}(this.body)?this.body:this.body instanceof le?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||He(this.body)?null:ue(this.body)?this.body.type||null:Ct(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof le?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ve={}){const Ie=ve.method||this.method,ut=ve.url||this.url,Qe=ve.responseType||this.responseType,Xt=ve.transferCache??this.transferCache,jt=void 0!==ve.body?ve.body:this.body,Rn=ve.withCredentials??this.withCredentials,Tn=ve.reportProgress??this.reportProgress;let br=ve.headers||this.headers,si=ve.params||this.params;const _r=ve.context??this.context;return void 0!==ve.setHeaders&&(br=Object.keys(ve.setHeaders).reduce((ui,Xr)=>ui.set(Xr,ve.setHeaders[Xr]),br)),ve.setParams&&(si=Object.keys(ve.setParams).reduce((ui,Xr)=>ui.set(Xr,ve.setParams[Xr]),si)),new Ut(Ie,ut,jt,{params:si,headers:br,context:_r,reportProgress:Tn,responseType:Qe,withCredentials:Rn,transferCache:Xt})}}var ln=function(ne){return ne[ne.Sent=0]="Sent",ne[ne.UploadProgress=1]="UploadProgress",ne[ne.ResponseHeader=2]="ResponseHeader",ne[ne.DownloadProgress=3]="DownloadProgress",ne[ne.Response=4]="Response",ne[ne.User=5]="User",ne}(ln||{});class Ht{constructor(ve,Ie=xe.Ok,ut="OK"){this.headers=ve.headers||new rt,this.status=void 0!==ve.status?ve.status:Ie,this.statusText=ve.statusText||ut,this.url=ve.url||null,this.ok=this.status>=200&&this.status<300}}class en extends Ht{constructor(ve={}){super(ve),this.type=ln.ResponseHeader}clone(ve={}){return new en({headers:ve.headers||this.headers,status:void 0!==ve.status?ve.status:this.status,statusText:ve.statusText||this.statusText,url:ve.url||this.url||void 0})}}class vt extends Ht{constructor(ve={}){super(ve),this.type=ln.Response,this.body=void 0!==ve.body?ve.body:null}clone(ve={}){return new vt({body:void 0!==ve.body?ve.body:this.body,headers:ve.headers||this.headers,status:void 0!==ve.status?ve.status:this.status,statusText:ve.statusText||this.statusText,url:ve.url||this.url||void 0})}}class yn extends Ht{constructor(ve){super(ve,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ve.url||"(unknown url)"}`:`Http failure response for ${ve.url||"(unknown url)"}: ${ve.status} ${ve.statusText}`,this.error=ve.error||null}}var xe=function(ne){return ne[ne.Continue=100]="Continue",ne[ne.SwitchingProtocols=101]="SwitchingProtocols",ne[ne.Processing=102]="Processing",ne[ne.EarlyHints=103]="EarlyHints",ne[ne.Ok=200]="Ok",ne[ne.Created=201]="Created",ne[ne.Accepted=202]="Accepted",ne[ne.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",ne[ne.NoContent=204]="NoContent",ne[ne.ResetContent=205]="ResetContent",ne[ne.PartialContent=206]="PartialContent",ne[ne.MultiStatus=207]="MultiStatus",ne[ne.AlreadyReported=208]="AlreadyReported",ne[ne.ImUsed=226]="ImUsed",ne[ne.MultipleChoices=300]="MultipleChoices",ne[ne.MovedPermanently=301]="MovedPermanently",ne[ne.Found=302]="Found",ne[ne.SeeOther=303]="SeeOther",ne[ne.NotModified=304]="NotModified",ne[ne.UseProxy=305]="UseProxy",ne[ne.Unused=306]="Unused",ne[ne.TemporaryRedirect=307]="TemporaryRedirect",ne[ne.PermanentRedirect=308]="PermanentRedirect",ne[ne.BadRequest=400]="BadRequest",ne[ne.Unauthorized=401]="Unauthorized",ne[ne.PaymentRequired=402]="PaymentRequired",ne[ne.Forbidden=403]="Forbidden",ne[ne.NotFound=404]="NotFound",ne[ne.MethodNotAllowed=405]="MethodNotAllowed",ne[ne.NotAcceptable=406]="NotAcceptable",ne[ne.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",ne[ne.RequestTimeout=408]="RequestTimeout",ne[ne.Conflict=409]="Conflict",ne[ne.Gone=410]="Gone",ne[ne.LengthRequired=411]="LengthRequired",ne[ne.PreconditionFailed=412]="PreconditionFailed",ne[ne.PayloadTooLarge=413]="PayloadTooLarge",ne[ne.UriTooLong=414]="UriTooLong",ne[ne.UnsupportedMediaType=415]="UnsupportedMediaType",ne[ne.RangeNotSatisfiable=416]="RangeNotSatisfiable",ne[ne.ExpectationFailed=417]="ExpectationFailed",ne[ne.ImATeapot=418]="ImATeapot",ne[ne.MisdirectedRequest=421]="MisdirectedRequest",ne[ne.UnprocessableEntity=422]="UnprocessableEntity",ne[ne.Locked=423]="Locked",ne[ne.FailedDependency=424]="FailedDependency",ne[ne.TooEarly=425]="TooEarly",ne[ne.UpgradeRequired=426]="UpgradeRequired",ne[ne.PreconditionRequired=428]="PreconditionRequired",ne[ne.TooManyRequests=429]="TooManyRequests",ne[ne.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",ne[ne.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",ne[ne.InternalServerError=500]="InternalServerError",ne[ne.NotImplemented=501]="NotImplemented",ne[ne.BadGateway=502]="BadGateway",ne[ne.ServiceUnavailable=503]="ServiceUnavailable",ne[ne.GatewayTimeout=504]="GatewayTimeout",ne[ne.HttpVersionNotSupported=505]="HttpVersionNotSupported",ne[ne.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",ne[ne.InsufficientStorage=507]="InsufficientStorage",ne[ne.LoopDetected=508]="LoopDetected",ne[ne.NotExtended=510]="NotExtended",ne[ne.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",ne}(xe||{});function qe(ne,ve){return{body:ve,headers:ne.headers,context:ne.context,observe:ne.observe,params:ne.params,reportProgress:ne.reportProgress,responseType:ne.responseType,withCredentials:ne.withCredentials,transferCache:ne.transferCache}}let dt=(()=>{class ne{constructor(Ie){this.handler=Ie}request(Ie,ut,Qe={}){let Xt;if(Ie instanceof Ut)Xt=Ie;else{let Tn,br;Tn=Qe.headers instanceof rt?Qe.headers:new rt(Qe.headers),Qe.params&&(br=Qe.params instanceof le?Qe.params:new le({fromObject:Qe.params})),Xt=new Ut(Ie,ut,void 0!==Qe.body?Qe.body:null,{headers:Tn,context:Qe.context,params:br,reportProgress:Qe.reportProgress,responseType:Qe.responseType||"json",withCredentials:Qe.withCredentials,transferCache:Qe.transferCache})}const jt=(0,R.of)(Xt).pipe((0,Ae.H)(Tn=>this.handler.handle(Tn)));if(Ie instanceof Ut||"events"===Qe.observe)return jt;const Rn=jt.pipe((0,ge.p)(Tn=>Tn instanceof vt));switch(Qe.observe||"body"){case"body":switch(Xt.responseType){case"arraybuffer":return Rn.pipe((0,Ve.T)(Tn=>{if(null!==Tn.body&&!(Tn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Tn.body}));case"blob":return Rn.pipe((0,Ve.T)(Tn=>{if(null!==Tn.body&&!(Tn.body instanceof Blob))throw new Error("Response is not a Blob.");return Tn.body}));case"text":return Rn.pipe((0,Ve.T)(Tn=>{if(null!==Tn.body&&"string"!=typeof Tn.body)throw new Error("Response is not a string.");return Tn.body}));default:return Rn.pipe((0,Ve.T)(Tn=>Tn.body))}case"response":return Rn;default:throw new Error(`Unreachable: unhandled observe type ${Qe.observe}}`)}}delete(Ie,ut={}){return this.request("DELETE",Ie,ut)}get(Ie,ut={}){return this.request("GET",Ie,ut)}head(Ie,ut={}){return this.request("HEAD",Ie,ut)}jsonp(Ie,ut){return this.request("JSONP",Ie,{params:(new le).append(ut,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ie,ut={}){return this.request("OPTIONS",Ie,ut)}patch(Ie,ut,Qe={}){return this.request("PATCH",Ie,qe(Qe,ut))}post(Ie,ut,Qe={}){return this.request("POST",Ie,qe(Qe,ut))}put(Ie,ut,Qe={}){return this.request("PUT",Ie,qe(Qe,ut))}static#e=this.\u0275fac=function(ut){return new(ut||ne)(T.KVO(Ge))};static#t=this.\u0275prov=T.jDH({token:ne,factory:ne.\u0275fac})}return ne})();function wn(ne,ve){return ve(ne)}function An(ne,ve){return(Ie,ut)=>ve.intercept(Ie,{handle:Qe=>ne(Qe,ut)})}const nt=new T.nKC(""),Cn=new T.nKC(""),Gn=new T.nKC(""),rr=new T.nKC("");function St(){let ne=null;return(ve,Ie)=>{null===ne&&(ne=((0,T.WQX)(nt,{optional:!0})??[]).reduceRight(An,wn));const ut=(0,T.WQX)(T.TgB),Qe=ut.add();return ne(ve,Ie).pipe((0,Be.j)(()=>ut.remove(Qe)))}}let Nt=(()=>{class ne extends Ge{constructor(Ie,ut){super(),this.backend=Ie,this.injector=ut,this.chain=null,this.pendingTasks=(0,T.WQX)(T.TgB);const Qe=(0,T.WQX)(rr,{optional:!0});this.backend=Qe??Ie}handle(Ie){if(null===this.chain){const Qe=Array.from(new Set([...this.injector.get(Cn),...this.injector.get(Gn,[])]));this.chain=Qe.reduceRight((Xt,jt)=>function Ln(ne,ve,Ie){return(ut,Qe)=>(0,T.N4e)(Ie,()=>ve(ut,Xt=>ne(Xt,Qe)))}(Xt,jt,this.injector),wn)}const ut=this.pendingTasks.add();return this.chain(Ie,Qe=>this.backend.handle(Qe)).pipe((0,Be.j)(()=>this.pendingTasks.remove(ut)))}static#e=this.\u0275fac=function(ut){return new(ut||ne)(T.KVO(lt),T.KVO(T.uvJ))};static#t=this.\u0275prov=T.jDH({token:ne,factory:ne.\u0275fac})}return ne})();const hs=/^\)\]\}',?\n/;let Ui=(()=>{class ne{constructor(Ie){this.xhrFactory=Ie}handle(Ie){if("JSONP"===Ie.method)throw new T.wOt(-2800,!1);const ut=this.xhrFactory;return(ut.\u0275loadImpl?(0,ie.H)(ut.\u0275loadImpl()):(0,R.of)(null)).pipe((0,Ee.n)(()=>new E.c(Xt=>{const jt=ut.build();if(jt.open(Ie.method,Ie.urlWithParams),Ie.withCredentials&&(jt.withCredentials=!0),Ie.headers.forEach((yr,Ir)=>jt.setRequestHeader(yr,Ir.join(","))),Ie.headers.has("Accept")||jt.setRequestHeader("Accept","application/json, text/plain, */*"),!Ie.headers.has("Content-Type")){const yr=Ie.detectContentTypeHeader();null!==yr&&jt.setRequestHeader("Content-Type",yr)}if(Ie.responseType){const yr=Ie.responseType.toLowerCase();jt.responseType="json"!==yr?yr:"text"}const Rn=Ie.serializeBody();let Tn=null;const br=()=>{if(null!==Tn)return Tn;const yr=jt.statusText||"OK",Ir=new rt(jt.getAllResponseHeaders()),li=function xn(ne){return"responseURL"in ne&&ne.responseURL?ne.responseURL:/^X-Request-URL:/m.test(ne.getAllResponseHeaders())?ne.getResponseHeader("X-Request-URL"):null}(jt)||Ie.url;return Tn=new en({headers:Ir,status:jt.status,statusText:yr,url:li}),Tn},si=()=>{let{headers:yr,status:Ir,statusText:li,url:tr}=br(),Fr=null;Ir!==xe.NoContent&&(Fr=typeof jt.response>"u"?jt.responseText:jt.response),0===Ir&&(Ir=Fr?xe.Ok:0);let di=Ir>=200&&Ir<300;if("json"===Ie.responseType&&"string"==typeof Fr){const Ei=Fr;Fr=Fr.replace(hs,"");try{Fr=""!==Fr?JSON.parse(Fr):null}catch(Ii){Fr=Ei,di&&(di=!1,Fr={error:Ii,text:Fr})}}di?(Xt.next(new vt({body:Fr,headers:yr,status:Ir,statusText:li,url:tr||void 0})),Xt.complete()):Xt.error(new yn({error:Fr,headers:yr,status:Ir,statusText:li,url:tr||void 0}))},_r=yr=>{const{url:Ir}=br(),li=new yn({error:yr,status:jt.status||0,statusText:jt.statusText||"Unknown Error",url:Ir||void 0});Xt.error(li)};let ui=!1;const Xr=yr=>{ui||(Xt.next(br()),ui=!0);let Ir={type:ln.DownloadProgress,loaded:yr.loaded};yr.lengthComputable&&(Ir.total=yr.total),"text"===Ie.responseType&&jt.responseText&&(Ir.partialText=jt.responseText),Xt.next(Ir)},Mi=yr=>{let Ir={type:ln.UploadProgress,loaded:yr.loaded};yr.lengthComputable&&(Ir.total=yr.total),Xt.next(Ir)};return jt.addEventListener("load",si),jt.addEventListener("error",_r),jt.addEventListener("timeout",_r),jt.addEventListener("abort",_r),Ie.reportProgress&&(jt.addEventListener("progress",Xr),null!==Rn&&jt.upload&&jt.upload.addEventListener("progress",Mi)),jt.send(Rn),Xt.next({type:ln.Sent}),()=>{jt.removeEventListener("error",_r),jt.removeEventListener("abort",_r),jt.removeEventListener("load",si),jt.removeEventListener("timeout",_r),Ie.reportProgress&&(jt.removeEventListener("progress",Xr),null!==Rn&&jt.upload&&jt.upload.removeEventListener("progress",Mi)),jt.readyState!==jt.DONE&&jt.abort()}})))}static#e=this.\u0275fac=function(ut){return new(ut||ne)(T.KVO(_e.N0))};static#t=this.\u0275prov=T.jDH({token:ne,factory:ne.\u0275fac})}return ne})();const zt=new T.nKC(""),Or=new T.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Zt=new T.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Qr{}let On=(()=>{class ne{constructor(Ie,ut,Qe){this.doc=Ie,this.platform=ut,this.cookieName=Qe,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ie=this.doc.cookie||"";return Ie!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,_e._b)(Ie,this.cookieName),this.lastCookieString=Ie),this.lastToken}static#e=this.\u0275fac=function(ut){return new(ut||ne)(T.KVO(_e.qQ),T.KVO(T.Agw),T.KVO(Or))};static#t=this.\u0275prov=T.jDH({token:ne,factory:ne.\u0275fac})}return ne})();function Nr(ne,ve){const Ie=ne.url.toLowerCase();if(!(0,T.WQX)(zt)||"GET"===ne.method||"HEAD"===ne.method||Ie.startsWith("http://")||Ie.startsWith("https://"))return ve(ne);const ut=(0,T.WQX)(Qr).getToken(),Qe=(0,T.WQX)(Zt);return null!=ut&&!ne.headers.has(Qe)&&(ne=ne.clone({headers:ne.headers.set(Qe,ut)})),ve(ne)}var we=function(ne){return ne[ne.Interceptors=0]="Interceptors",ne[ne.LegacyInterceptors=1]="LegacyInterceptors",ne[ne.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ne[ne.NoXsrfProtection=3]="NoXsrfProtection",ne[ne.JsonpSupport=4]="JsonpSupport",ne[ne.RequestsMadeViaParent=5]="RequestsMadeViaParent",ne[ne.Fetch=6]="Fetch",ne}(we||{});function Ke(...ne){const ve=[dt,Ui,Nt,{provide:Ge,useExisting:Nt},{provide:lt,useExisting:Ui},{provide:Cn,useValue:Nr,multi:!0},{provide:zt,useValue:!0},{provide:Qr,useClass:On}];for(const Ie of ne)ve.push(...Ie.\u0275providers);return(0,T.EmA)(ve)}const pe=new T.nKC("");function q(){return function Ce(ne,ve){return{\u0275kind:ne,\u0275providers:ve}}(we.LegacyInterceptors,[{provide:pe,useFactory:St},{provide:Cn,useExisting:pe,multi:!0}])}let Bn=(()=>{class ne{static#e=this.\u0275fac=function(ut){return new(ut||ne)};static#t=this.\u0275mod=T.$C({type:ne});static#n=this.\u0275inj=T.G2t({providers:[Ke(q())]})}return ne})()},4438:(rn,ze,k)=>{k.d(ze,{bc$:()=>bg,iLQ:()=>R0,sZ2:()=>wf,hnV:()=>yD,Hbi:()=>tR,o8S:()=>yd,BIS:()=>dE,gRc:()=>RD,Ql9:()=>bM,Ocv:()=>kM,Z63:()=>Us,aKT:()=>hc,uvJ:()=>Lr,zcH:()=>So,bkB:()=>Qa,$GK:()=>nr,nKC:()=>Qe,zZn:()=>so,_q3:()=>U0,MKu:()=>B0,xe9:()=>Gv,Co$:()=>t_,Vns:()=>Tu,SKi:()=>ws,Xx1:()=>Wi,Agw:()=>Df,PLl:()=>Tf,sFG:()=>_u,_9s:()=>qy,czy:()=>Xa,kdw:()=>ts,C4Q:()=>Th,NYb:()=>EM,giA:()=>mD,xvI:()=>qP,RxE:()=>cD,c1b:()=>$c,gXe:()=>us,mal:()=>go,L39:()=>MR,Ol2:()=>Ot,w6W:()=>gd,oH4:()=>bD,Rfq:()=>Nr,WQX:()=>hn,naY:()=>BM,QuC:()=>Ni,EmA:()=>Ao,fpN:()=>eR,HJs:()=>LR,N4e:()=>ds,O8t:()=>OR,An2:()=>Le,H3F:()=>uD,H8p:()=>ur,KH2:()=>Bp,TgB:()=>Ja,wOt:()=>mt,WHO:()=>pD,e01:()=>gD,H5H:()=>l0,Zy3:()=>ti,mq5:()=>Cw,JZv:()=>xn,LfX:()=>yt,plB:()=>yu,jNT:()=>P0,zjR:()=>_D,TL$:()=>Ag,Tbb:()=>Jt,Vt3:()=>Ep,Mj6:()=>_s,GFd:()=>ca,OA$:()=>Tt,Jv_:()=>xT,aNF:()=>kT,R7$:()=>KE,BMQ:()=>qI,AVh:()=>e0,wni:()=>uT,VBU:()=>Ua,FsC:()=>Jo,jDH:()=>ir,G2t:()=>Gi,$C:()=>To,EJ8:()=>Do,rXU:()=>td,nrm:()=>a0,k0s:()=>Nv,j41:()=>Ov,RV6:()=>vw,xGo:()=>Fd,KVO:()=>ni,kS0:()=>zs,QTQ:()=>Ty,bIt:()=>f0,lsd:()=>hT,XpG:()=>Zw,nI1:()=>HT,bMT:()=>GT,i5U:()=>zT,brH:()=>WT,Y8G:()=>JI,mGM:()=>dT,Njj:()=>Vu,eBV:()=>Ol,B4B:()=>Nf,n$t:()=>ay,wjB:()=>FT,DNE:()=>Cp,EFF:()=>CT,JRh:()=>m0,SpI:()=>Lv,DH7:()=>OT,mxI:()=>y0,R50:()=>_0,GBs:()=>lT}),k(467);let R=null,ie=1;const Ae=Symbol("SIGNAL");function ge(e){const n=R;return R=e,n}function rt(e){if((!je(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==ie)){if(!e.producerMustRecompute(e)&&!bt(e))return e.dirty=!1,void(e.lastCleanEpoch=ie);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=ie}}function bt(e){Ne(e);for(let n=0;n<e.producerNode.length;n++){const i=e.producerNode[n],s=e.producerLastReadVersion[n];if(s!==i.version||(rt(i),s!==i.version))return!0}return!1}function ee(e,n){if(function Ct(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),Ne(e),1===e.liveConsumerNode.length)for(let s=0;s<e.producerNode.length;s++)ee(e.producerNode[s],e.producerIndexOfThis[s]);const i=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[i],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[i],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const s=e.liveConsumerIndexOfThis[n],c=e.liveConsumerNode[n];Ne(c),c.producerIndexOfThis[s]=n}}function je(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ne(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let en=null;var Ln=k(1413),nt=k(8359),Cn=k(4412),Gn=k(6354);const St="https://g.co/ng/security#xss";class mt extends Error{constructor(n,i){super(ti(n,i)),this.code=n}}function ti(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}function bn(e){return{toString:e}.toString()}const kr="__parameters__";function Rr(e,n,i){return bn(()=>{const s=function Li(e){return function(...i){if(e){const s=e(...i);for(const c in s)this[c]=s[c]}}}(n);function c(...l){if(this instanceof c)return s.apply(this,l),this;const p=new c(...l);return y.annotation=p,y;function y(S,U,X){const ce=S.hasOwnProperty(kr)?S[kr]:Object.defineProperty(S,kr,{value:[]})[kr];for(;ce.length<=X;)ce.push(null);return(ce[X]=ce[X]||[]).push(p),S}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=e,c.annotationCls=c,c})}const xn=globalThis;function Un(e){for(let n in e)if(e[n]===Un)return n;throw Error("Could not find renamed property on target object.")}function Or(e,n){for(const i in n)n.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=n[i])}function Jt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Jt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function Zt(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const On=Un({__forward_ref__:Un});function Nr(e){return e.__forward_ref__=Nr,e.toString=function(){return Jt(this())},e}function ke(e){return we(e)?e():e}function we(e){return"function"==typeof e&&e.hasOwnProperty(On)&&e.__forward_ref__===Nr}function ir(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Gi(e){return{providers:e.providers||[],imports:e.imports||[]}}function ri(e){return Xe(e,ne)||Xe(e,Ie)}function yt(e){return null!==ri(e)}function Xe(e,n){return e.hasOwnProperty(n)?e[n]:null}function cn(e){return e&&(e.hasOwnProperty(ve)||e.hasOwnProperty(ut))?e[ve]:null}const ne=Un({\u0275prov:Un}),ve=Un({\u0275inj:Un}),Ie=Un({ngInjectableDef:Un}),ut=Un({ngInjectorDef:Un});class Qe{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=ir({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function yr(e){return e&&!!e.\u0275providers}const Ir=Un({\u0275cmp:Un}),li=Un({\u0275dir:Un}),tr=Un({\u0275pipe:Un}),Fr=Un({\u0275mod:Un}),di=Un({\u0275fac:Un}),Ei=Un({__NG_ELEMENT_ID__:Un}),Ii=Un({__NG_ENV_ID__:Un});function Nn(e){return"string"==typeof e?e:null==e?"":String(e)}function vo(e,n){throw new mt(-201,!1)}var nr=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(nr||{});let Eo;function xs(){return Eo}function Er(e){const n=Eo;return Eo=e,n}function Vo(e,n,i){const s=ri(e);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:i&nr.Optional?null:void 0!==n?n:void vo()}const Rs={},Sr="__NG_DI_FLAG__",Bi="ngTempTokenPath",vr=/\n/gm,Xs="__source";let Jr;function hi(e){const n=Jr;return Jr=e,n}function zr(e,n=nr.Default){if(void 0===Jr)throw new mt(-203,!1);return null===Jr?Vo(e,void 0,n):Jr.get(e,n&nr.Optional?null:void 0,n)}function ni(e,n=nr.Default){return(xs()||zr)(ke(e),n)}function hn(e,n=nr.Default){return ni(e,oi(n))}function oi(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ps(e){const n=[];for(let i=0;i<e.length;i++){const s=ke(e[i]);if(Array.isArray(s)){if(0===s.length)throw new mt(900,!1);let c,l=nr.Default;for(let p=0;p<s.length;p++){const y=s[p],S=gs(y);"number"==typeof S?-1===S?c=y.token:l|=S:c=y}n.push(ni(c,l))}else n.push(ni(s))}return n}function ks(e,n){return e[Sr]=n,e.prototype[Sr]=n,e}function gs(e){return e[Sr]}const Wi=ks(Rr("Optional"),8),ts=ks(Rr("SkipSelf"),4);function $i(e,n){return e.hasOwnProperty(di)?e[di]:null}function Oi(e,n){e.forEach(i=>Array.isArray(i)?Oi(i,n):n(i))}function Io(e,n,i){n>=e.length?e.push(i):e.splice(n,0,i)}function ao(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Ki(e,n,i){let s=wi(e,n);return s>=0?e[1|s]=i:(s=~s,function Xo(e,n,i,s){let c=e.length;if(c==n)e.push(i,s);else if(1===c)e.push(s,e[0]),e[0]=i;else{for(c--,e.push(e[c-1],e[c]);c>n;)e[c]=e[c-2],c--;e[n]=i,e[n+1]=s}}(e,s,n,i)),s}function Ls(e,n){const i=wi(e,n);if(i>=0)return e[1|i]}function wi(e,n){return function Yo(e,n,i){let s=0,c=e.length>>i;for(;c!==s;){const l=s+(c-s>>1),p=e[l<<i];if(n===p)return l<<i;p>n?c=l:s=l+1}return~(c<<i)}(e,n,1)}const Ti={},gr=[],Us=new Qe(""),da=new Qe("",-1),Zr=new Qe("");class co{get(n,i=Rs){if(i===Rs){const s=new Error(`NullInjectorError: No provider for ${Jt(n)}!`);throw s.name="NullInjectorError",s}return i}}var sr=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(sr||{}),us=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(us||{}),_s=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(_s||{});function wo(e,n,i){let s=e.length;for(;;){const c=e.indexOf(n,i);if(-1===c)return c;if(0===c||e.charCodeAt(c-1)<=32){const l=n.length;if(c+l===s||e.charCodeAt(c+l)<=32)return c}i=c+1}}function Fi(e,n,i){let s=0;for(;s<i.length;){const c=i[s];if("number"==typeof c){if(0!==c)break;s++;const l=i[s++],p=i[s++],y=i[s++];e.setAttribute(n,p,y,l)}else{const l=c,p=i[++s];K(l)?e.setProperty(n,l,p):e.setAttribute(n,l,p),s++}}return s}function G(e){return 3===e||4===e||6===e}function K(e){return 64===e.charCodeAt(0)}function N(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let i=-1;for(let s=0;s<n.length;s++){const c=n[s];"number"==typeof c?i=c:0===i||Z(e,i,c,null,-1===i||2===i?n[++s]:null)}}return e}function Z(e,n,i,s,c){let l=0,p=e.length;if(-1===n)p=-1;else for(;l<e.length;){const y=e[l++];if("number"==typeof y){if(y===n){p=-1;break}if(y>n){p=l-1;break}}}for(;l<e.length;){const y=e[l];if("number"==typeof y)break;if(y===i){if(null===s)return void(null!==c&&(e[l+1]=c));if(s===e[l+1])return void(e[l+2]=c)}l++,null!==s&&l++,null!==c&&l++}-1!==p&&(e.splice(p,0,n),l=p+1),e.splice(l++,0,i),null!==s&&e.splice(l++,0,s),null!==c&&e.splice(l++,0,c)}const be="ng-template";function fn(e,n,i,s){let c=0;if(s){for(;c<n.length&&"string"==typeof n[c];c+=2)if("class"===n[c]&&-1!==wo(n[c+1].toLowerCase(),i,0))return!0}else if(Xn(e))return!1;if(c=n.indexOf(1,c),c>-1){let l;for(;++c<n.length&&"string"==typeof(l=n[c]);)if(l.toLowerCase()===i)return!0}return!1}function Xn(e){return 4===e.type&&e.value!==be}function ys(e,n,i){return n===(4!==e.type||i?e.value:be)}function Zs(e,n,i){let s=4;const c=e.attrs,l=null!==c?function ha(e){for(let n=0;n<e.length;n++)if(G(e[n]))return n;return e.length}(c):0;let p=!1;for(let y=0;y<n.length;y++){const S=n[y];if("number"!=typeof S){if(!p)if(4&s){if(s=2|1&s,""!==S&&!ys(e,S,i)||""===S&&1===n.length){if(fi(s))return!1;p=!0}}else if(8&s){if(null===c||!fn(e,c,S,i)){if(fi(s))return!1;p=!0}}else{const U=n[++y],X=Ts(S,c,Xn(e),i);if(-1===X){if(fi(s))return!1;p=!0;continue}if(""!==U){let ce;if(ce=X>l?"":c[X+1].toLowerCase(),2&s&&U!==ce){if(fi(s))return!1;p=!0}}}}else{if(!p&&!fi(s)&&!fi(S))return!1;if(p&&fi(S))continue;p=!1,s=S|1&s}}return fi(s)||p}function fi(e){return!(1&e)}function Ts(e,n,i,s){if(null===n)return-1;let c=0;if(s||!i){let l=!1;for(;c<n.length;){const p=n[c];if(p===e)return c;if(3===p||6===p)l=!0;else{if(1===p||2===p){let y=n[++c];for(;"string"==typeof y;)y=n[++c];continue}if(4===p)break;if(0===p){c+=4;continue}}c+=l?1:2}return-1}return function ei(e,n){let i=e.indexOf(4);if(i>-1)for(i++;i<e.length;){const s=e[i];if("number"==typeof s)return-1;if(s===n)return i;i++}return-1}(n,e)}function Ta(e,n,i=!1){for(let s=0;s<n.length;s++)if(Zs(e,n[s],i))return!0;return!1}function fa(e,n){return e?":not("+n.trim()+")":n}function Va(e){let n=e[0],i=1,s=2,c="",l=!1;for(;i<e.length;){let p=e[i];if("string"==typeof p)if(2&s){const y=e[++i];c+="["+p+(y.length>0?'="'+y+'"':"")+"]"}else 8&s?c+="."+p:4&s&&(c+=" "+p);else""!==c&&!fi(p)&&(n+=fa(l,c),c=""),s=p,l=l||!fi(s);i++}return""!==c&&(n+=fa(l,c)),n}function Ua(e){return bn(()=>{const n=ga(e),i={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===sr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||us.Emulated,styles:e.styles||gr,_:null,schemas:e.schemas||null,tView:null,id:""};vs(i);const s=e.dependencies;return i.directiveDefs=qi(s,!1),i.pipeDefs=qi(s,!0),i.id=function Tc(e){let n=0;const i=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const c of i)n=Math.imul(31,n)+c.charCodeAt(0)|0;return n+=2147483648,"c"+n}(i),i})}function pa(e){return cr(e)||Wr(e)}function jo(e){return null!==e}function To(e){return bn(()=>({type:e.type,bootstrap:e.bootstrap||gr,declarations:e.declarations||gr,imports:e.imports||gr,exports:e.exports||gr,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Aa(e,n){if(null==e)return Ti;const i={};for(const s in e)if(e.hasOwnProperty(s)){const c=e[s];let l,p,y=_s.None;Array.isArray(c)?(y=c[0],l=c[1],p=c[2]??l):(l=c,p=c),n?(i[l]=y!==_s.None?[s,y]:s,n[l]=p):i[l]=s}return i}function Jo(e){return bn(()=>{const n=ga(e);return vs(n),n})}function Do(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function cr(e){return e[Ir]||null}function Wr(e){return e[li]||null}function ii(e){return e[tr]||null}function Ni(e){const n=cr(e)||Wr(e)||ii(e);return null!==n&&n.standalone}function xi(e,n){const i=e[Fr]||null;if(!i&&!0===n)throw new Error(`Type ${Jt(e)} does not have '\u0275mod' property.`);return i}function ga(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||Ti,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||gr,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Aa(e.inputs,n),outputs:Aa(e.outputs),debugInfo:null}}function vs(e){e.features?.forEach(n=>n(e))}function qi(e,n){if(!e)return null;const i=n?ii:pa;return()=>("function"==typeof e?e():e).map(s=>i(s)).filter(jo)}function Ao(e){return{\u0275providers:e}}function Y(...e){return{\u0275providers:C(0,e),\u0275fromNgModule:!0}}function C(e,...n){const i=[],s=new Set;let c;const l=p=>{i.push(p)};return Oi(n,p=>{const y=p;L(y,l,[],s)&&(c||=[],c.push(y))}),void 0!==c&&D(c,l),i}function D(e,n){for(let i=0;i<e.length;i++){const{ngModule:s,providers:c}=e[i];he(c,l=>{n(l,s)})}}function L(e,n,i,s){if(!(e=ke(e)))return!1;let c=null,l=cn(e);const p=!l&&cr(e);if(l||p){if(p&&!p.standalone)return!1;c=e}else{const S=e.ngModule;if(l=cn(S),!l)return!1;c=S}const y=s.has(c);if(p){if(y)return!1;if(s.add(c),p.dependencies){const S="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const U of S)L(U,n,i,s)}}else{if(!l)return!1;{if(null!=l.imports&&!y){let U;s.add(c);try{Oi(l.imports,X=>{L(X,n,i,s)&&(U||=[],U.push(X))})}finally{}void 0!==U&&D(U,n)}if(!y){const U=$i(c)||(()=>new c);n({provide:c,useFactory:U,deps:gr},c),n({provide:Zr,useValue:c,multi:!0},c),n({provide:Us,useValue:()=>ni(c),multi:!0},c)}const S=l.providers;if(null!=S&&!y){const U=e;he(S,X=>{n(X,U)})}}}return c!==e&&void 0!==e.providers}function he(e,n){for(let i of e)yr(i)&&(i=i.\u0275providers),Array.isArray(i)?he(i,n):n(i)}const Pe=Un({provide:String,useValue:Un});function Ue(e){return null!==e&&"object"==typeof e&&Pe in e}function on(e){return"function"==typeof e}const ur=new Qe(""),er={},Sn={};let Wn;function Vr(){return void 0===Wn&&(Wn=new co),Wn}class Lr{}class pi extends Lr{get destroyed(){return this._destroyed}constructor(n,i,s,c){super(),this.parent=i,this.source=s,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ma(n,p=>this.processProvider(p)),this.records.set(da,Di(void 0,this)),c.has("environment")&&this.records.set(Lr,Di(void 0,this));const l=this.records.get(ur);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(Zr,gr,nr.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=ge(null);try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const i=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of i)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=hi(this),s=Er(void 0);try{return n()}finally{hi(i),Er(s)}}get(n,i=Rs,s=nr.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Ii))return n[Ii](this);s=oi(s);const l=hi(this),p=Er(void 0);try{if(!(s&nr.SkipSelf)){let S=this.records.get(n);if(void 0===S){const U=function Zo(e){return"function"==typeof e||"object"==typeof e&&e instanceof Qe}(n)&&ri(n);S=U&&this.injectableDefInScope(U)?Di(kn(n),er):null,this.records.set(n,S)}if(null!=S)return this.hydrate(n,S)}return(s&nr.Self?Vr():this.parent).get(n,i=s&nr.Optional&&i===Rs?null:i)}catch(y){if("NullInjectorError"===y.name){if((y[Bi]=y[Bi]||[]).unshift(Jt(n)),l)throw y;return function Ys(e,n,i,s){const c=e[Bi];throw n[Xs]&&c.unshift(n[Xs]),e.message=function Ri(e,n,i,s=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let c=Jt(n);if(Array.isArray(n))c=n.map(Jt).join(" -> ");else if("object"==typeof n){let l=[];for(let p in n)if(n.hasOwnProperty(p)){let y=n[p];l.push(p+":"+("string"==typeof y?JSON.stringify(y):Jt(y)))}c=`{${l.join(", ")}}`}return`${i}${s?"("+s+")":""}[${c}]: ${e.replace(vr,"\n  ")}`}("\n"+e.message,c,i,s),e.ngTokenPath=c,e[Bi]=null,e}(y,n,"R3InjectorError",this.source)}throw y}finally{Er(p),hi(l)}}resolveInjectorInitializers(){const n=ge(null),i=hi(this),s=Er(void 0);try{const l=this.get(Us,gr,nr.Self);for(const p of l)p()}finally{hi(i),Er(s),ge(n)}}toString(){const n=[],i=this.records;for(const s of i.keys())n.push(Jt(s));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new mt(205,!1)}processProvider(n){let i=on(n=ke(n))?n:ke(n&&n.provide);const s=function uo(e){return Ue(e)?Di(void 0,e.useValue):Di(Os(e),er)}(n);if(!on(n)&&!0===n.multi){let c=this.records.get(i);c||(c=Di(void 0,er,!0),c.factory=()=>ps(c.multi),this.records.set(i,c)),i=n,c.multi.push(n)}this.records.set(i,s)}hydrate(n,i){const s=ge(null);try{return i.value===er&&(i.value=Sn,i.value=i.factory()),"object"==typeof i.value&&i.value&&function lo(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{ge(s)}}injectableDefInScope(n){if(!n.providedIn)return!1;const i=ke(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function kn(e){const n=ri(e),i=null!==n?n.factory:$i(e);if(null!==i)return i;if(e instanceof Qe)throw new mt(204,!1);if(e instanceof Function)return function os(e){if(e.length>0)throw new mt(204,!1);const i=function kt(e){return e&&(e[ne]||e[Ie])||null}(e);return null!==i?()=>i.factory(e):()=>new e}(e);throw new mt(204,!1)}function Os(e,n,i){let s;if(on(e)){const c=ke(e);return $i(c)||kn(c)}if(Ue(e))s=()=>ke(e.useValue);else if(function Mt(e){return!(!e||!e.useFactory)}(e))s=()=>e.useFactory(...ps(e.deps||[]));else if(function ht(e){return!(!e||!e.useExisting)}(e))s=()=>ni(ke(e.useExisting));else{const c=ke(e&&(e.useClass||e.provide));if(!function ls(e){return!!e.deps}(e))return $i(c)||kn(c);s=()=>new c(...ps(e.deps))}return s}function Di(e,n,i=!1){return{factory:e,value:n,multi:i?[]:void 0}}function ma(e,n){for(const i of e)Array.isArray(i)?ma(i,n):i&&yr(i)?ma(i.\u0275providers,n):n(i)}function ds(e,n){e instanceof pi&&e.assertNotDestroyed();const s=hi(e),c=Er(void 0);try{return n()}finally{hi(s),Er(c)}}function Es(){return void 0!==xs()||null!=function Lo(){return Jr}()}const xr=0,Yt=1,In=2,pr=3,Ai=4,gi=5,rs=6,js=7,mi=8,Kr=9,ho=10,Yn=11,$o=12,El=13,ai=14,jn=15,Dc=16,tc=17,Ho=18,_a=19,Il=20,ea=21,nc=22,Is=23,Kn=25,rc=1,bo=7,Sa=9,bi=10;var Su=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Su||{});function Ds(e){return Array.isArray(e)&&"object"==typeof e[rc]}function As(e){return Array.isArray(e)&&!0===e[rc]}function Kc(e){return!!(4&e.flags)}function ta(e){return e.componentOffset>-1}function qc(e){return!(1&~e.flags)}function to(e){return!!e.template}function Ba(e){return!!(512&e[In])}class te{constructor(n,i,s){this.previousValue=n,this.currentValue=i,this.firstChange=s}isFirstChange(){return this.firstChange}}function Te(e,n,i,s){null!==n?n.applyValueToInputSignal(n,s):e[i]=s}function Tt(){return ft}function ft(e){return e.type.prototype.ngOnChanges&&(e.setInput=Jn),mn}function mn(){const e=Vi(this),n=e?.current;if(n){const i=e.previous;if(i===Ti)e.previous=n;else for(let s in n)i[s]=n[s];e.current=null,this.ngOnChanges(n)}}function Jn(e,n,i,s,c){const l=this.declaredInputs[s],p=Vi(e)||function Ac(e,n){return e[lr]=n}(e,{previous:Ti,current:null}),y=p.current||(p.current={}),S=p.previous,U=S[l];y[l]=new te(U&&U.currentValue,i,S===Ti),Te(e,n,c,i)}Tt.ngInherit=!0;const lr="__ngSimpleChanges__";function Vi(e){return e[lr]||null}const $s=function(e,n,i){};let ku=!1;function Pr(e){for(;Array.isArray(e);)e=e[xr];return e}function Jc(e,n){return Pr(n[e])}function Hs(e,n){return Pr(n[e.index])}function sc(e,n){return e.data[n]}function oc(e,n){return e[n]}function zo(e,n){const i=n[e];return Ds(i)?i:i[xr]}function Zc(e){return!(128&~e[In])}function no(e,n){return null==n?null:e[n]}function tf(e){e[tc]=0}function Ga(e){1024&e[In]||(e[In]|=1024,Zc(e)&&Fu(e))}function bl(e){return!!(9216&e[In]||e[Is]?.dirty)}function bc(e){e[ho].changeDetectionScheduler?.notify(1),bl(e)?Fu(e):64&e[In]&&(function $a(){return ku}()?(e[In]|=1024,Fu(e)):e[ho].changeDetectionScheduler?.notify())}function Fu(e){e[ho].changeDetectionScheduler?.notify();let n=po(e);for(;null!==n&&!(8192&n[In])&&(n[In]|=8192,Zc(n));)n=po(n)}function Sl(e,n){if(!(256&~e[In]))throw new mt(911,!1);null===e[ea]&&(e[ea]=[]),e[ea].push(n)}function po(e){const n=e[pr];return As(n)?n[pr]:n}const Hn={lFrame:cf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Pl(){return Hn.bindingsEnabled}function Ft(){return Hn.lFrame.lView}function Mr(){return Hn.lFrame.tView}function Ol(e){return Hn.lFrame.contextLView=e,e[mi]}function Vu(e){return Hn.lFrame.contextLView=null,e}function Br(){let e=Sc();for(;null!==e&&64===e.type;)e=e.parent;return e}function Sc(){return Hn.lFrame.currentTNode}function va(e,n){const i=Hn.lFrame;i.currentTNode=e,i.isParent=n}function Lu(){return Hn.lFrame.isParent}function Ns(){const e=Hn.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function ia(){return Hn.lFrame.bindingIndex++}function Pd(e,n){const i=Hn.lFrame;i.bindingIndex=i.bindingRootIndex=e,Rc(n)}function Rc(e){Hn.lFrame.currentDirectiveIndex=e}function Nl(){return Hn.lFrame.currentQueryIndex}function xl(e){Hn.lFrame.currentQueryIndex=e}function sf(e){const n=e[Yt];return 2===n.type?n.declTNode:1===n.type?e[gi]:null}function af(e,n,i){if(i&nr.SkipSelf){let c=n,l=e;for(;!(c=c.parent,null!==c||i&nr.Host||(c=sf(l),null===c||(l=l[ai],10&c.type))););if(null===c)return!1;n=c,e=l}const s=Hn.lFrame=Rd();return s.currentTNode=n,s.lView=e,!0}function tu(e){const n=Rd(),i=e[Yt];Hn.lFrame=n,n.currentTNode=i.firstChild,n.lView=e,n.tView=i,n.contextLView=e,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function Rd(){const e=Hn.lFrame,n=null===e?null:e.child;return null===n?cf(e):n}function cf(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Uu(){const e=Hn.lFrame;return Hn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const uf=Uu;function kl(){const e=Uu();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Cs(){return Hn.lFrame.selectedIndex}function cc(e){Hn.lFrame.selectedIndex=e}function Si(){const e=Hn.lFrame;return sc(e.tView,e.selectedIndex)}let nu=!0;function Qi(){return nu}function Pa(e){nu=e}function Fl(e,n){for(let i=n.directiveStart,s=n.directiveEnd;i<s;i++){const l=e.data[i].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:y,ngAfterViewInit:S,ngAfterViewChecked:U,ngOnDestroy:X}=l;p&&(e.contentHooks??=[]).push(-i,p),y&&((e.contentHooks??=[]).push(i,y),(e.contentCheckHooks??=[]).push(i,y)),S&&(e.viewHooks??=[]).push(-i,S),U&&((e.viewHooks??=[]).push(i,U),(e.viewCheckHooks??=[]).push(i,U)),null!=X&&(e.destroyHooks??=[]).push(i,X)}}function Bu(e,n,i){$u(e,n,3,i)}function Nc(e,n,i,s){(3&e[In])===i&&$u(e,n,i,s)}function ju(e,n){let i=e[In];(3&i)===n&&(i&=16383,i+=1,e[In]=i)}function $u(e,n,i,s){const l=s??-1,p=n.length-1;let y=0;for(let S=void 0!==s?65535&e[tc]:0;S<p;S++)if("number"==typeof n[S+1]){if(y=n[S],null!=s&&y>=s)break}else n[S]<0&&(e[tc]+=65536),(y<l||-1==l)&&(Nd(e,i,n,S),e[tc]=(4294901760&e[tc])+S+2),S++}function Vl(e,n){$s(4,e,n);const i=ge(null);try{n.call(e)}finally{ge(i),$s(5,e,n)}}function Nd(e,n,i,s){const c=i[s]<0,l=i[s+1],y=e[c?-i[s]:i[s]];c?e[In]>>14<e[tc]>>16&&(3&e[In])===n&&(e[In]+=16384,Vl(y,l)):Vl(y,l)}const uc=-1;class Ma{constructor(n,i,s){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=s}}function Bl(e){return e!==uc}function ru(e){return 32767&e}function xc(e,n){let i=function Zp(e){return e>>16}(e),s=n;for(;i>0;)s=s[ai],i--;return s}let I=!0;function h(e){const n=I;return I=e,n}const A=255,W=5;let ae=0;const Fe={};function Gt(e,n){const i=$n(e,n);if(-1!==i)return i;const s=n[Yt];s.firstCreatePass&&(e.injectorIndex=n.length,Dn(s.data,e),Dn(n,null),Dn(s.blueprint,null));const c=Dr(e,n),l=e.injectorIndex;if(Bl(c)){const p=ru(c),y=xc(c,n),S=y[Yt].data;for(let U=0;U<8;U++)n[l+U]=y[p+U]|S[p+U]}return n[l+8]=c,l}function Dn(e,n){e.push(0,0,0,0,0,0,0,0,n)}function $n(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Dr(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let i=0,s=null,c=n;for(;null!==c;){if(s=w_(c),null===s)return uc;if(i++,c=c[ai],-1!==s.injectorIndex)return s.injectorIndex|i<<16}return uc}function io(e,n,i){!function At(e,n,i){let s;"string"==typeof i?s=i.charCodeAt(0)||0:i.hasOwnProperty(Ei)&&(s=i[Ei]),null==s&&(s=i[Ei]=ae++);const c=s&A;n.data[e+(c>>W)]|=1<<c}(e,n,i)}function Hu(e,n,i){if(i&nr.Optional||void 0!==e)return e;vo()}function Gu(e,n,i,s){if(i&nr.Optional&&void 0===s&&(s=null),!(i&(nr.Self|nr.Host))){const c=e[Kr],l=Er(void 0);try{return c?c.get(n,s,i&nr.Optional):Vo(n,s,i&nr.Optional)}finally{Er(l)}}return Hu(s,0,i)}function zu(e,n,i,s=nr.Default,c){if(null!==e){if(2048&n[In]&&!(s&nr.Self)){const p=function Jv(e,n,i,s,c){let l=e,p=n;for(;null!==l&&null!==p&&2048&p[In]&&!(512&p[In]);){const y=jl(l,p,i,s|nr.Self,Fe);if(y!==Fe)return y;let S=l.parent;if(!S){const U=p[Il];if(U){const X=U.get(i,Fe,s);if(X!==Fe)return X}S=w_(p),p=p[ai]}l=S}return c}(e,n,i,s,Fe);if(p!==Fe)return p}const l=jl(e,n,i,s,Fe);if(l!==Fe)return l}return Gu(n,i,s,c)}function jl(e,n,i,s,c){const l=function Wu(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Ei)?e[Ei]:void 0;return"number"==typeof n?n>=0?n&A:C_:n}(i);if("function"==typeof l){if(!af(n,e,s))return s&nr.Host?Hu(c,0,s):Gu(n,i,s,c);try{let p;if(p=l(s),null!=p||s&nr.Optional)return p;vo()}finally{uf()}}else if("number"==typeof l){let p=null,y=$n(e,n),S=uc,U=s&nr.Host?n[jn][gi]:null;for((-1===y||s&nr.SkipSelf)&&(S=-1===y?Dr(e,n):n[y+8],S!==uc&&Ku(s,!1)?(p=n[Yt],y=ru(S),n=xc(S,n)):y=-1);-1!==y;){const X=n[Yt];if(iu(l,y,X.data)){const ce=$l(y,n,i,p,s,U);if(ce!==Fe)return ce}S=n[y+8],S!==uc&&Ku(s,n[Yt].data[y+8]===U)&&iu(l,y,n)?(p=X,y=ru(S),n=xc(S,n)):y=-1}}return c}function $l(e,n,i,s,c,l){const p=n[Yt],y=p.data[e+8],X=Ka(y,p,i,null==s?ta(y)&&I:s!=p&&!!(3&y.type),c&nr.Host&&l===y);return null!==X?sa(n,p,X,y):Fe}function Ka(e,n,i,s,c){const l=e.providerIndexes,p=n.data,y=1048575&l,S=e.directiveStart,X=l>>20,Oe=c?y+X:e.directiveEnd;for(let We=s?y:y+X;We<Oe;We++){const gt=p[We];if(We<S&&i===gt||We>=S&&gt.type===i)return We}if(c){const We=p[S];if(We&&to(We)&&We.type===i)return S}return null}function sa(e,n,i,s){let c=e[i];const l=n.data;if(function Ll(e){return e instanceof Ma}(c)){const p=c;p.resolving&&function oo(e,n){throw n&&n.join(" > "),new mt(-200,e)}(function ar(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Nn(e)}(l[i]));const y=h(p.canSeeViewProviders);p.resolving=!0;const U=p.injectImpl?Er(p.injectImpl):null;af(e,s,nr.Default);try{c=e[i]=p.factory(void 0,l,e,s),n.firstCreatePass&&i>=s.directiveStart&&function Od(e,n,i){const{ngOnChanges:s,ngOnInit:c,ngDoCheck:l}=n.type.prototype;if(s){const p=ft(n);(i.preOrderHooks??=[]).push(e,p),(i.preOrderCheckHooks??=[]).push(e,p)}c&&(i.preOrderHooks??=[]).push(0-e,c),l&&((i.preOrderHooks??=[]).push(e,l),(i.preOrderCheckHooks??=[]).push(e,l))}(i,l[i],n)}finally{null!==U&&Er(U),h(y),p.resolving=!1,uf()}}return c}function iu(e,n,i){return!!(i[n+(e>>W)]&1<<e)}function Ku(e,n){return!(e&nr.Self||e&nr.Host&&n)}class Ss{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,s){return zu(this._tNode,this._lView,n,oi(s),i)}}function C_(){return new Ss(Br(),Ft())}function Fd(e){return bn(()=>{const n=e.prototype.constructor,i=n[di]||Vd(n),s=Object.prototype;let c=Object.getPrototypeOf(e.prototype).constructor;for(;c&&c!==s;){const l=c[di]||Vd(c);if(l&&l!==i)return l;c=Object.getPrototypeOf(c)}return l=>new l})}function Vd(e){return we(e)?()=>{const n=Vd(ke(e));return n&&n()}:$i(e)}function w_(e){const n=e[Yt],i=n.type;return 2===i?n.declTNode:1===i?e[gi]:null}function zs(e){return function Ra(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const i=e.attrs;if(i){const s=i.length;let c=0;for(;c<s;){const l=i[c];if(G(l))break;if(0===l)c+=2;else if("number"==typeof l)for(c++;c<s&&"string"==typeof i[c];)c++;else{if(l===n)return i[c+1];c+=2}}}return null}(Br(),e)}function ff(e,n=null,i=null,s){const c=Bd(e,n,i,s);return c.resolveInjectorInitializers(),c}function Bd(e,n=null,i=null,s,c=new Set){const l=[i||gr,Y(e)];return s=s||("object"==typeof e?void 0:Jt(e)),new pi(l,n||Vr(),s||null,c)}let so=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Rs;static#t=this.NULL=new co;static create(i,s){if(Array.isArray(i))return ff({name:""},s,i,"");{const c=i.name??"";return ff({name:c},i.parent,i.providers,c)}}static#n=this.\u0275prov=ir({token:e,providedIn:"any",factory:()=>ni(da)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function jd(e){return e.ngOriginalError}class So{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&jd(n);for(;i&&jd(i);)i=jd(i);return i||null}}const rg=new Qe("",{providedIn:"root",factory:()=>hn(So).handleError.bind(void 0)});let Gl=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=rE;static#t=this.__NG_ENV_ID__=i=>i}return e})();class ig extends Gl{constructor(n){super(),this._lView=n}onDestroy(n){return Sl(this._lView,n),()=>function za(e,n){if(null===e[ea])return;const i=e[ea].indexOf(n);-1!==i&&e[ea].splice(i,1)}(this._lView,n)}}function rE(){return new ig(Ft())}function og(){return qu(Br(),Ft())}function qu(e,n){return new hc(Hs(e,n))}let hc=(()=>{class e{constructor(i){this.nativeElement=i}static#e=this.__NG_ELEMENT_ID__=og}return e})();function gf(e){return e instanceof hc?e.nativeElement:e}function ag(e){return n=>{setTimeout(e,void 0,n)}}const Qa=class iE extends Ln.B{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,Es()&&(this.destroyRef=hn(Gl,{optional:!0})??void 0)}emit(n){const i=ge(null);try{super.next(n)}finally{ge(i)}}subscribe(n,i,s){let c=n,l=i||(()=>null),p=s;if(n&&"object"==typeof n){const S=n;c=S.next?.bind(S),l=S.error?.bind(S),p=S.complete?.bind(S)}this.__isAsync&&(l=ag(l),c&&(c=ag(c)),p&&(p=ag(p)));const y=super.subscribe({next:c,error:l,complete:p});return n instanceof nt.yU&&n.add(y),y}};function R_(){return this._results[Symbol.iterator]()}class cg{static#e=Symbol.iterator;get changes(){return this._changes??=new Qa}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const i=cg.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=R_)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){this.dirty=!1;const s=function ns(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Uo(e,n,i){if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++){let c=e[s],l=n[s];if(i&&(c=i(c),l=i(l)),l!==c)return!1}return!0}(this._results,s,i))&&(this._results=s,this.length=s.length,this.last=s[this.length-1],this.first=s[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function zl(e){return!(128&~e.flags)}const $d=new Map;let N_=0;const vf="__ngContext__";function Ps(e,n){Ds(n)?(e[vf]=n[_a],function lg(e){$d.set(e[_a],e)}(n)):e[vf]=n}function V_(e){return L_(e[$o])}function _g(e){return L_(e[Ai])}function L_(e){for(;null!==e&&!As(e);)e=e[Ai];return e}let Dg;function Ag(e){Dg=e}const wf=new Qe("",{providedIn:"root",factory:()=>H_}),H_="ng",Tf=new Qe(""),Df=new Qe("",{providedIn:"platform",factory:()=>"unknown"}),bg=new Qe(""),dE=new Qe("",{providedIn:"root",factory:()=>function cu(){if(void 0!==Dg)return Dg;if(typeof document<"u")return document;throw new mt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let z_=()=>null;function Xd(e,n,i=!1){return z_(e,n,i)}const X_=new Qe("",{providedIn:"root",factory:()=>!1});let Ql;function $g(e){return function eh(){if(void 0===Ql&&(Ql=null,xn.trustedTypes))try{Ql=xn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ql}()?.createScriptURL(e)||e}class tl{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${St})`}}function fu(e){return e instanceof tl?e.changingThisBreaksApplicationSecurity:e}function nh(e,n){const i=function _E(e){return e instanceof tl&&e.getTypeName()||null}(e);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${St})`)}return i===n}const wE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var il=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(il||{});function Nf(e){const n=Fc();return n?n.sanitize(il.URL,e)||"":nh(e,"URL")?fu(e):function Pf(e){return(e=String(e)).match(wE)?e:"unsafe:"+e}(Nn(e))}function oy(e){const n=Fc();if(n)return $g(n.sanitize(il.RESOURCE_URL,e)||"");if(nh(e,"ResourceURL"))return $g(fu(e));throw new mt(904,!1)}function ay(e,n,i){return function J0(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?oy:Nf}(n,i)(e)}function Fc(){const e=Ft();return e&&e[ho].sanitizer}function Ea(e){return e instanceof Function?e():e}var Xa=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Xa||{});let ol;function nm(e,n){return ol(e,n)}function oh(e,n,i,s,c){if(null!=s){let l,p=!1;As(s)?l=s:Ds(s)&&(p=!0,s=s[xr]);const y=Pr(s);0===e&&null!==i?null==c?_y(n,i,y):_c(n,i,y,c||null,!0):1===e&&null!==i?_c(n,i,y,c||null,!0):2===e?function hh(e,n,i){const s=im(e,n);s&&function nC(e,n,i,s){e.removeChild(n,i,s)}(e,s,n,i)}(n,y,p):3===e&&n.destroyNode(y),null!=l&&function zE(e,n,i,s,c){const l=i[bo];l!==Pr(i)&&oh(n,e,s,l,c);for(let y=bi;y<i.length;y++){const S=i[y];Wf(S[Yt],S,e,n,s,l)}}(n,e,l,i,c)}}function al(e,n,i){return e.createElement(n,i)}function ah(e,n){n[ho].changeDetectionScheduler?.notify(1),Wf(e,n,n[Yn],2,null,null)}function py(e,n){const i=e[Sa],s=i.indexOf(n);i.splice(s,1)}function ch(e,n){if(e.length<=bi)return;const i=bi+n,s=e[i];if(s){const c=s[Dc];null!==c&&c!==e&&py(c,s),n>0&&(e[i-1][Ai]=s[Ai]);const l=ao(e,bi+n);!function BE(e,n){ah(e,n),n[xr]=null,n[gi]=null}(s[Yt],s);const p=l[Ho];null!==p&&p.detachView(l[Yt]),s[pr]=null,s[Ai]=null,s[In]&=-129}return s}function uh(e,n){if(!(256&n[In])){const i=n[Yn];i.destroyNode&&Wf(e,n,i,3,null,null),function $E(e){let n=e[$o];if(!n)return Hf(e[Yt],e);for(;n;){let i=null;if(Ds(n))i=n[$o];else{const s=n[bi];s&&(i=s)}if(!i){for(;n&&!n[Ai]&&n!==e;)Ds(n)&&Hf(n[Yt],n),n=n[pr];null===n&&(n=e),Ds(n)&&Hf(n[Yt],n),i=n&&n[Ai]}n=i}}(n)}}function Hf(e,n){if(256&n[In])return;const i=ge(null);try{n[In]&=-129,n[In]|=256,n[Is]&&function oe(e){if(Ne(e),je(e))for(let n=0;n<e.producerNode.length;n++)ee(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}(n[Is]),function my(e,n){let i;if(null!=e&&null!=(i=e.destroyHooks))for(let s=0;s<i.length;s+=2){const c=n[i[s]];if(!(c instanceof Ma)){const l=i[s+1];if(Array.isArray(l))for(let p=0;p<l.length;p+=2){const y=c[l[p]],S=l[p+1];$s(4,y,S);try{S.call(y)}finally{$s(5,y,S)}}else{$s(4,c,l);try{l.call(c)}finally{$s(5,c,l)}}}}}(e,n),function gy(e,n){const i=e.cleanup,s=n[js];if(null!==i)for(let l=0;l<i.length-1;l+=2)if("string"==typeof i[l]){const p=i[l+3];p>=0?s[p]():s[-p].unsubscribe(),l+=2}else i[l].call(s[i[l+1]]);null!==s&&(n[js]=null);const c=n[ea];if(null!==c){n[ea]=null;for(let l=0;l<c.length;l++)(0,c[l])()}}(e,n),1===n[Yt].type&&n[Yn].destroy();const s=n[Dc];if(null!==s&&As(n[pr])){s!==n[pr]&&py(s,n);const c=n[Ho];null!==c&&c.detachView(e)}!function Wl(e){$d.delete(e[_a])}(n)}finally{ge(i)}}function Gf(e,n,i){return function zf(e,n,i){let s=n;for(;null!==s&&40&s.type;)s=(n=s).parent;if(null===s)return i[xr];{const{componentOffset:c}=s;if(c>-1){const{encapsulation:l}=e.data[s.directiveStart+c];if(l===us.None||l===us.Emulated)return null}return Hs(s,i)}}(e,n.parent,i)}function _c(e,n,i,s,c){e.insertBefore(n,i,s,c)}function _y(e,n,i){e.appendChild(n,i)}function GE(e,n,i,s,c){null!==s?_c(e,n,i,s,c):_y(e,n,i)}function im(e,n){return e.parentNode(n)}let vc,ed=function yc(e,n,i){return 40&e.type?Hs(e,i):null};function lh(e,n,i,s){const c=Gf(e,s,n),l=n[Yn],y=function gu(e,n,i){return ed(e,n,i)}(s.parent||n[gi],s,n);if(null!=c)if(Array.isArray(i))for(let S=0;S<i.length;S++)GE(l,c,i[S],y,!1);else GE(l,c,i,y,!1);void 0!==vc&&vc(l,s,n,i,c)}function dh(e,n){if(null!==n){const i=n.type;if(3&i)return Hs(n,e);if(4&i)return sm(-1,e[n.index]);if(8&i){const s=n.child;if(null!==s)return dh(e,s);{const c=e[n.index];return As(c)?sm(-1,c):Pr(c)}}if(32&i)return nm(n,e)()||Pr(e[n.index]);{const s=Uc(e,n);return null!==s?Array.isArray(s)?s[0]:dh(po(e[jn]),s):dh(e,n.next)}}return null}function Uc(e,n){return null!==n?e[jn][gi].projection[n.projection]:null}function sm(e,n){const i=bi+e+1;if(i<n.length){const s=n[i],c=s[Yt].firstChild;if(null!==c)return dh(s,c)}return n[bo]}function om(e,n,i,s,c,l,p){for(;null!=i;){const y=s[i.index],S=i.type;if(p&&0===n&&(y&&Ps(Pr(y),s),i.flags|=2),32&~i.flags)if(8&S)om(e,n,i.child,s,c,l,!1),oh(n,e,c,y,l);else if(32&S){const U=nm(i,s);let X;for(;X=U();)oh(n,e,c,X,l);oh(n,e,c,y,l)}else 16&S?am(e,n,s,i,c,l):oh(n,e,c,y,l);i=p?i.projectionNext:i.next}}function Wf(e,n,i,s,c,l){om(i,s,e.firstChild,n,c,l,!1)}function am(e,n,i,s,c,l){const p=i[jn],S=p[gi].projection[s.projection];if(Array.isArray(S))for(let U=0;U<S.length;U++)oh(n,e,c,S[U],l);else{let U=S;const X=p[pr];zl(s)&&(U.flags|=128),om(e,n,U,X,c,l,!0)}}function Cy(e,n,i){""===i?e.removeAttribute(n,"class"):e.setAttribute(n,"class",i)}function cl(e,n,i){const{mergedAttrs:s,classes:c,styles:l}=i;null!==s&&Fi(e,n,s),null!==c&&Cy(e,n,c),null!==l&&function Iy(e,n,i){e.setAttribute(n,"style",i)}(e,n,l)}const mr={};function KE(e=1){wy(Mr(),Ft(),Cs()+e,!1)}function wy(e,n,i,s){if(!s)if(3&~n[In]){const l=e.preOrderHooks;null!==l&&Nc(n,l,0,i)}else{const l=e.preOrderCheckHooks;null!==l&&Bu(n,l,i)}cc(i)}function td(e,n=nr.Default){const i=Ft();return null===i?ni(e,n):zu(Br(),i,ke(e),n)}function Ty(){throw new Error("invalid")}function Dy(e,n,i,s,c,l){const p=ge(null);try{let y=null;c&_s.SignalBased&&(y=n[s][Ae]),null!==y&&void 0!==y.transformFn&&(l=y.transformFn(l)),c&_s.HasDecoratorInputTransform&&(l=e.inputTransforms[s].call(n,l)),null!==e.setInput?e.setInput(n,y,l,i,s):Te(n,y,s,l)}finally{ge(p)}}function cm(e,n,i,s,c,l,p,y,S,U,X){const ce=n.blueprint.slice();return ce[xr]=c,ce[In]=204|s,(null!==U||e&&2048&e[In])&&(ce[In]|=2048),tf(ce),ce[pr]=ce[ai]=e,ce[mi]=i,ce[ho]=p||e&&e[ho],ce[Yn]=y||e&&e[Yn],ce[Kr]=S||e&&e[Kr]||null,ce[gi]=l,ce[_a]=function ug(){return N_++}(),ce[rs]=X,ce[Il]=U,ce[jn]=2==n.type?e[jn]:ce,ce}function fh(e,n,i,s,c){let l=e.data[n];if(null===l)l=function Ay(e,n,i,s,c){const l=Sc(),p=Lu(),S=e.data[n]=function eI(e,n,i,s,c,l){let p=n?n.injectorIndex:-1,y=0;return function Wa(){return null!==Hn.skipHydrationRootTNode}()&&(y|=128),{type:i,index:s,insertBeforeIndex:null,injectorIndex:p,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:y,providerIndexes:0,value:c,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?l:l&&l.parent,i,n,s,c);return null===e.firstChild&&(e.firstChild=S),null!==l&&(p?null==l.child&&null!==S.parent&&(l.child=S):null===l.next&&(l.next=S,S.prev=l)),S}(e,n,i,s,c),function qp(){return Hn.lFrame.inI18n}()&&(l.flags|=32);else if(64&l.type){l.type=i,l.value=s,l.attrs=c;const p=function ra(){const e=Hn.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();l.injectorIndex=null===p?-1:p.injectorIndex}return va(l,!0),l}function Kf(e,n,i,s){if(0===i)return-1;const c=n.length;for(let l=0;l<i;l++)n.push(s),e.blueprint.push(s),e.data.push(null);return c}function by(e,n,i,s,c){const l=Cs(),p=2&s;try{cc(-1),p&&n.length>Kn&&wy(e,n,Kn,!1),$s(p?2:0,c),i(s,c)}finally{cc(l),$s(p?3:1,c)}}function um(e,n,i){if(Kc(n)){const s=ge(null);try{const l=n.directiveEnd;for(let p=n.directiveStart;p<l;p++){const y=e.data[p];y.contentQueries&&y.contentQueries(1,i[p],p)}}finally{ge(s)}}}function lm(e,n,i){Pl()&&(function uC(e,n,i,s){const c=i.directiveStart,l=i.directiveEnd;ta(i)&&function ph(e,n,i){const s=Hs(n,e),c=Py(i);let p=16;i.signals?p=4096:i.onPush&&(p=64);const y=mh(e,cm(e,c,null,p,s,n,null,e[ho].rendererFactory.createRenderer(s,i),null,null,null));e[n.index]=y}(n,i,e.data[c+i.componentOffset]),e.firstCreatePass||Gt(i,n),Ps(s,n);const p=i.initialInputs;for(let y=c;y<l;y++){const S=e.data[y],U=sa(n,e,y,i);Ps(U,n),null!==p&&sI(0,y-c,U,S,0,p),to(S)&&(zo(i.index,n)[mi]=sa(n,e,y,i))}}(e,n,i,Hs(i,n)),!(64&~i.flags)&&rI(e,n,i))}function Sy(e,n,i=Hs){const s=n.localNames;if(null!==s){let c=n.index+1;for(let l=0;l<s.length;l+=2){const p=s[l+1],y=-1===p?i(n,e):e[p];e[c++]=y}}}function Py(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=qf(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function qf(e,n,i,s,c,l,p,y,S,U,X){const ce=Kn+s,Oe=ce+c,We=function mu(e,n){const i=[];for(let s=0;s<n;s++)i.push(s<e?null:mr);return i}(ce,Oe),gt="function"==typeof U?U():U;return We[Yt]={type:e,blueprint:We,template:i,queries:null,viewQuery:y,declTNode:n,data:We.slice().fill(null,ce),bindingStartIndex:ce,expandoStartIndex:Oe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:S,consts:gt,incompleteFirstPass:!1,ssrId:X}}let My=()=>null;function tI(e,n,i,s,c){for(let l in n){if(!n.hasOwnProperty(l))continue;const p=n[l];if(void 0===p)continue;s??={};let y,S=_s.None;Array.isArray(p)?(y=p[0],S=p[1]):y=p;let U=l;if(null!==c){if(!c.hasOwnProperty(l))continue;U=c[l]}0===e?nI(s,i,U,y,S):nI(s,i,U,y)}return s}function nI(e,n,i,s,c){let l;e.hasOwnProperty(i)?(l=e[i]).push(n,s):l=e[i]=[n,s],void 0!==c&&l.push(c)}function aa(e,n,i,s,c,l,p,y){const S=Hs(n,i);let X,U=n.inputs;!y&&null!=U&&(X=U[s])?(ul(e,i,X,s,c),ta(n)&&function oC(e,n){const i=zo(n,e);16&i[In]||(i[In]|=64)}(i,n.index)):3&n.type&&(s=function Ry(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(s),c=null!=p?p(c,n.value||"",s):c,l.setProperty(S,s,c))}function Oy(e,n,i,s){if(Pl()){const c=null===s?null:{"":-1},l=function Qf(e,n){const i=e.directiveRegistry;let s=null,c=null;if(i)for(let l=0;l<i.length;l++){const p=i[l];if(Ta(n,p.selectors,!1))if(s||(s=[]),to(p))if(null!==p.findHostDirectiveDefs){const y=[];c=c||new Map,p.findHostDirectiveDefs(p,y,c),s.unshift(...y,p),fm(e,n,y.length)}else s.unshift(p),fm(e,n,0);else c=c||new Map,p.findHostDirectiveDefs?.(p,s,c),s.push(p)}return null===s?null:[s,c]}(e,i);let p,y;null===l?p=y=null:[p,y]=l,null!==p&&dm(e,n,i,p,c,y),c&&function iI(e,n,i){if(n){const s=e.localNames=[];for(let c=0;c<n.length;c+=2){const l=i[n[c+1]];if(null==l)throw new mt(-301,!1);s.push(n[c],l)}}}(i,s,c)}i.mergedAttrs=N(i.mergedAttrs,i.attrs)}function dm(e,n,i,s,c,l){for(let U=0;U<s.length;U++)io(Gt(i,n),e,s[U].type);!function xy(e,n,i){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+i,e.providerIndexes=n}(i,e.data.length,s.length);for(let U=0;U<s.length;U++){const X=s[U];X.providersResolver&&X.providersResolver(X)}let p=!1,y=!1,S=Kf(e,n,s.length,null);for(let U=0;U<s.length;U++){const X=s[U];i.mergedAttrs=N(i.mergedAttrs,X.hostAttrs),ky(e,i,n,S,X),pm(S,X,c),null!==X.contentQueries&&(i.flags|=4),(null!==X.hostBindings||null!==X.hostAttrs||0!==X.hostVars)&&(i.flags|=64);const ce=X.type.prototype;!p&&(ce.ngOnChanges||ce.ngOnInit||ce.ngDoCheck)&&((e.preOrderHooks??=[]).push(i.index),p=!0),!y&&(ce.ngOnChanges||ce.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(i.index),y=!0),S++}!function sC(e,n,i){const c=n.directiveEnd,l=e.data,p=n.attrs,y=[];let S=null,U=null;for(let X=n.directiveStart;X<c;X++){const ce=l[X],Oe=i?i.get(ce):null,gt=Oe?Oe.outputs:null;S=tI(0,ce.inputs,X,S,Oe?Oe.inputs:null),U=tI(1,ce.outputs,X,U,gt);const Bt=null===S||null===p||Xn(n)?null:Fy(S,X,p);y.push(Bt)}null!==S&&(S.hasOwnProperty("class")&&(n.flags|=8),S.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=y,n.inputs=S,n.outputs=U}(e,i,l)}function rI(e,n,i){const s=i.directiveStart,c=i.directiveEnd,l=i.index,p=function ac(){return Hn.lFrame.currentDirectiveIndex}();try{cc(l);for(let y=s;y<c;y++){const S=e.data[y],U=n[y];Rc(y),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&hm(S,U)}}finally{cc(-1),Rc(p)}}function hm(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function fm(e,n,i){n.componentOffset=i,(e.components??=[]).push(n.index)}function pm(e,n,i){if(i){if(n.exportAs)for(let s=0;s<n.exportAs.length;s++)i[n.exportAs[s]]=e;to(n)&&(i[""]=e)}}function ky(e,n,i,s,c){e.data[s]=c;const l=c.factory||(c.factory=$i(c.type)),p=new Ma(l,to(c),td);e.blueprint[s]=p,i[s]=p,function Ny(e,n,i,s,c){const l=c.hostBindings;if(l){let p=e.hostBindingOpCodes;null===p&&(p=e.hostBindingOpCodes=[]);const y=~n.index;(function cC(e){let n=e.length;for(;n>0;){const i=e[--n];if("number"==typeof i&&i<0)return i}return 0})(p)!=y&&p.push(y),p.push(i,s,l)}}(e,n,s,Kf(e,i,c.hostVars,mr),c)}function Na(e,n,i,s,c,l){const p=Hs(e,n);!function gm(e,n,i,s,c,l,p){if(null==l)e.removeAttribute(n,c,i);else{const y=null==p?Nn(l):p(l,s||"",c);e.setAttribute(n,c,y,i)}}(n[Yn],p,l,e.value,i,s,c)}function sI(e,n,i,s,c,l){const p=l[n];if(null!==p)for(let y=0;y<p.length;)Dy(s,i,p[y++],p[y++],p[y++],p[y++])}function Fy(e,n,i){let s=null,c=0;for(;c<i.length;){const l=i[c];if(0!==l)if(5!==l){if("number"==typeof l)break;if(e.hasOwnProperty(l)){null===s&&(s=[]);const p=e[l];for(let y=0;y<p.length;y+=3)if(p[y]===n){s.push(l,p[y+1],p[y+2],i[c+1]);break}}c+=2}else c+=2;else c+=4}return s}function gh(e,n,i,s){return[e,!0,0,n,null,s,null,i,null,null]}function Vy(e,n){const i=e.contentQueries;if(null!==i){const s=ge(null);try{for(let c=0;c<i.length;c+=2){const p=i[c+1];if(-1!==p){const y=e.data[p];xl(i[c]),y.contentQueries(2,n[p],p)}}}finally{ge(s)}}}function mh(e,n){return e[$o]?e[El][Ai]=n:e[$o]=n,e[El]=n,n}function Xf(e,n,i){xl(0);const s=ge(null);try{n(e,i)}finally{ge(s)}}function Ia(e){return e[js]||(e[js]=[])}function Ro(e){return e.cleanup||(e.cleanup=[])}function _h(e,n){const i=e[Kr],s=i?i.get(So,null):null;s&&s.handleError(n)}function ul(e,n,i,s,c){for(let l=0;l<i.length;){const p=i[l++],y=i[l++],S=i[l++];Dy(e.data[p],n[p],s,y,S,c)}}function Wo(e,n){const i=zo(n,e),s=i[Yt];!function oI(e,n){for(let i=n.length;i<e.blueprint.length;i++)n.push(e.blueprint[i])}(s,i);const c=i[xr];null!==c&&null===i[rs]&&(i[rs]=Xd(c,i[Kr])),yh(s,i,i[mi])}function yh(e,n,i){tu(n);try{const s=e.viewQuery;null!==s&&Xf(1,s,i);const c=e.template;null!==c&&by(e,n,c,1,i),e.firstCreatePass&&(e.firstCreatePass=!1),n[Ho]?.finishViewCreation(e),e.staticContentQueries&&Vy(e,n),e.staticViewQueries&&Xf(2,e.viewQuery,i);const l=e.components;null!==l&&function rd(e,n){for(let i=0;i<n.length;i++)Wo(e,n[i])}(n,l)}catch(s){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),s}finally{n[In]&=-5,kl()}}function xa(e,n){return!n||null===n.firstChild||zl(e)}function vh(e,n,i,s=!0){const c=n[Yt];if(function HE(e,n,i,s){const c=bi+s,l=i.length;s>0&&(i[c-1][Ai]=n),s<l-bi?(n[Ai]=i[c],Io(i,bi+s,n)):(i.push(n),n[Ai]=null),n[pr]=i;const p=n[Dc];null!==p&&i!==p&&function $f(e,n){const i=e[Sa];n[jn]!==n[pr][pr][jn]&&(e[In]|=Su.HasTransplantedViews),null===i?e[Sa]=[n]:i.push(n)}(p,n);const y=n[Ho];null!==y&&y.insertView(e),bc(n),n[In]|=128}(c,n,e,i),s){const p=sm(i,e),y=n[Yn],S=im(y,e[bo]);null!==S&&function jE(e,n,i,s,c,l){s[xr]=c,s[gi]=n,Wf(e,s,i,1,c,l)}(c,e[gi],y,n,S,p)}const l=n[rs];null!==l&&null!==l.firstChild&&(l.firstChild=null)}function Eh(e,n,i,s,c=!1){for(;null!==i;){const l=n[i.index];null!==l&&s.push(Pr(l)),As(l)&&Ly(l,s);const p=i.type;if(8&p)Eh(e,n,i.child,s);else if(32&p){const y=nm(i,n);let S;for(;S=y();)s.push(S)}else if(16&p){const y=Uc(n,i);if(Array.isArray(y))s.push(...y);else{const S=po(n[jn]);Eh(S[Yt],S,y,s,!0)}}i=c?i.projectionNext:i.next}return s}function Ly(e,n){for(let i=bi;i<e.length;i++){const s=e[i],c=s[Yt].firstChild;null!==c&&Eh(s[Yt],s,c,n)}e[bo]!==e[xr]&&n.push(e[bo])}let Uy=[];const jy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Fu(e.lView)},consumerOnSignalRead(){this.lView[Is]=this}},Ih=100;function Ch(e,n=!0,i=0){const s=e[ho],c=s.rendererFactory;c.begin?.();try{!function cI(e,n){Im(e,n);let i=0;for(;bl(e);){if(i===Ih)throw new mt(103,!1);i++,Im(e,1)}}(e,i)}catch(p){throw n&&_h(e,p),p}finally{c.end?.(),s.inlineEffectRunner?.flush()}}function uI(e,n,i,s){const c=n[In];if(!(256&~c))return;n[ho].inlineEffectRunner?.flush(),tu(n);let p=null,y=null;(function Hy(e){return 2!==e.type})(e)&&(y=function By(e){return e[Is]??function aI(e){const n=Uy.pop()??Object.create(jy);return n.lView=e,n}(e)}(n),p=function et(e){return e&&(e.nextProducerIndex=0),ge(e)}(y));try{tf(n),function Pc(e){return Hn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==i&&by(e,n,i,2,s);const S=!(3&~c);if(S){const ce=e.preOrderCheckHooks;null!==ce&&Bu(n,ce,null)}else{const ce=e.preOrderHooks;null!==ce&&Nc(n,ce,0,null),ju(n,0)}if(function lI(e){for(let n=V_(e);null!==n;n=_g(n)){if(!(n[In]&Su.HasTransplantedViews))continue;const i=n[Sa];for(let s=0;s<i.length;s++){Ga(i[s])}}}(n),vm(n,0),null!==e.contentQueries&&Vy(e,n),S){const ce=e.contentCheckHooks;null!==ce&&Bu(n,ce)}else{const ce=e.contentHooks;null!==ce&&Nc(n,ce,1),ju(n,1)}!function qE(e,n){const i=e.hostBindingOpCodes;if(null!==i)try{for(let s=0;s<i.length;s++){const c=i[s];if(c<0)cc(~c);else{const l=c,p=i[++s],y=i[++s];Pd(p,l),y(2,n[l])}}}finally{cc(-1)}}(e,n);const U=e.components;null!==U&&zy(n,U,0);const X=e.viewQuery;if(null!==X&&Xf(2,X,s),S){const ce=e.viewCheckHooks;null!==ce&&Bu(n,ce)}else{const ce=e.viewHooks;null!==ce&&Nc(n,ce,2),ju(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[nc]){for(const ce of n[nc])ce();n[nc]=null}n[In]&=-73}catch(S){throw Fu(n),S}finally{null!==y&&(function Dt(e,n){if(ge(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(je(e))for(let i=e.nextProducerIndex;i<e.producerNode.length;i++)ee(e.producerNode[i],e.producerIndexOfThis[i]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}(y,p),function ym(e){e.lView[Is]!==e&&(e.lView=null,Uy.push(e))}(y)),kl()}}function vm(e,n){for(let i=V_(e);null!==i;i=_g(i))for(let s=bi;s<i.length;s++)Em(i[s],n)}function Gy(e,n,i){Em(zo(n,e),i)}function Em(e,n){Zc(e)&&Im(e,n)}function Im(e,n){const s=e[Yt],c=e[In],l=e[Is];let p=!!(0===n&&16&c);if(p||=!!(64&c&&0===n),p||=!!(1024&c),p||=!(!l?.dirty||!bt(l)),l&&(l.dirty=!1),e[In]&=-9217,p)uI(s,e,s.template,e[mi]);else if(8192&c){vm(e,1);const y=s.components;null!==y&&zy(e,y,1)}}function zy(e,n,i){for(let s=0;s<n.length;s++)Gy(e,n[s],i)}function id(e){for(e[ho].changeDetectionScheduler?.notify();e;){e[In]|=64;const n=po(e);if(Ba(e)&&!n)return e;e=n}return null}class wh{get rootNodes(){const n=this._lView,i=n[Yt];return Eh(i,n,i.firstChild,[])}constructor(n,i,s=!0){this._lView=n,this._cdRefInjectingView=i,this.notifyErrorHandler=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[mi]}set context(n){this._lView[mi]=n}get destroyed(){return!(256&~this._lView[In])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[pr];if(As(n)){const i=n[8],s=i?i.indexOf(this):-1;s>-1&&(ch(n,s),ao(i,s))}this._attachedToViewContainer=!1}uh(this._lView[Yt],this._lView)}onDestroy(n){Sl(this._lView,n)}markForCheck(){id(this._cdRefInjectingView||this._lView)}detach(){this._lView[In]&=-129}reattach(){bc(this._lView),this._lView[In]|=128}detectChanges(){this._lView[In]|=1024,Ch(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new mt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ah(this._lView[Yt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new mt(902,!1);this._appRef=n,bc(this._lView)}}let Th=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=ll}return e})();const dI=Th,Cm=class extends dI{constructor(n,i,s){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=s}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,s){const c=function Ya(e,n,i,s){const c=ge(null);try{const l=n.tView,S=cm(e,l,i,4096&e[In]?4096:16,null,n,null,null,s?.injector??null,s?.embeddedViewInjector??null,s?.dehydratedView??null);S[Dc]=e[n.index];const X=e[Ho];return null!==X&&(S[Ho]=X.createEmbeddedView(l)),yh(l,S,i),S}finally{ge(c)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:s});return new wh(c)}};function ll(){return Jf(Br(),Ft())}function Jf(e,n){return 4&e.type?new Cm(n,e,qu(e,n)):null}class Le{}class Bc{}class sd{}class Am{resolveComponentFactory(n){throw function vI(e){const n=Error(`No component factory found for ${Jt(e)}.`);return n.ngComponent=e,n}(n)}}let Ah=(()=>{class e{static#e=this.NULL=new Am}return e})();class qy{}let _u=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Oo(){const e=Ft(),i=zo(Br().index,e);return(Ds(i)?i:e)[Yn]}()}return e})(),EI=(()=>{class e{static#e=this.\u0275prov=ir({token:e,providedIn:"root",factory:()=>null})}return e})();const dl={},ad=new Set;function Ec(e){ad.has(e)||(ad.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Qy(...e){}class ws{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qa(!1),this.onMicrotaskEmpty=new Qa(!1),this.onStable=new Qa(!1),this.onError=new Qa(!1),typeof Zone>"u")throw new mt(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!s&&i,c.shouldCoalesceRunChangeDetection=s,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function np(){const e="function"==typeof xn.requestAnimationFrame;let n=xn[e?"requestAnimationFrame":"setTimeout"],i=xn[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const c=i[Zone.__symbol__("OriginalDelegate")];c&&(i=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Xy(e){const n=()=>{!function Pm(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(xn,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,rp(e),e.isCheckStableRunning=!0,bh(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),rp(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,s,c,l,p,y)=>{if(function Om(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(y))return i.invokeTask(c,l,p,y);try{return Yy(e),i.invokeTask(c,l,p,y)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||e.shouldCoalesceRunChangeDetection)&&n(),Mm(e)}},onInvoke:(i,s,c,l,p,y,S)=>{try{return Yy(e),i.invoke(c,l,p,y,S)}finally{e.shouldCoalesceRunChangeDetection&&n(),Mm(e)}},onHasTask:(i,s,c,l)=>{i.hasTask(c,l),s===c&&("microTask"==l.change?(e._hasPendingMicrotasks=l.microTask,rp(e),bh(e)):"macroTask"==l.change&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(i,s,c,l)=>(i.handleError(c,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ws.isInAngularZone())throw new mt(909,!1)}static assertNotInAngularZone(){if(ws.isInAngularZone())throw new mt(909,!1)}run(n,i,s){return this._inner.run(n,i,s)}runTask(n,i,s,c){const l=this._inner,p=l.scheduleEventTask("NgZoneEvent: "+c,n,Sm,Qy,Qy);try{return l.runTask(p,i,s)}finally{l.cancelTask(p)}}runGuarded(n,i,s){return this._inner.runGuarded(n,i,s)}runOutsideAngular(n){return this._outer.run(n)}}const Sm={};function bh(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function rp(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Yy(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Mm(e){e._nesting--,bh(e)}class Rm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qa,this.onMicrotaskEmpty=new Qa,this.onStable=new Qa,this.onError=new Qa}run(n,i,s){return n.apply(i,s)}runGuarded(n,i,s){return n.apply(i,s)}runOutsideAngular(n){return n()}runTask(n,i,s,c){return n.apply(i,s)}}var hl=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(hl||{});const ip={destroy(){}};function go(e,n){!n&&function Bs(e){if(!Es())throw new mt(-203,!1)}();const i=n?.injector??hn(so);if(!function oa(e){return"browser"===(e??hn(so)).get(Df)}(i))return ip;Ec("NgAfterNextRender");const s=i.get(cd),c=s.handler??=new Ph,l=n?.phase??hl.MixedReadWrite,p=()=>{c.unregister(S),y()},y=i.get(Gl).onDestroy(p),S=ds(i,()=>new No(l,()=>{p(),e()}));return c.register(S),{destroy:p}}class No{constructor(n,i){this.phase=n,this.callbackFn=i,this.zone=hn(ws),this.errorHandler=hn(So,{optional:!0}),hn(Le,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){this.errorHandler?.handleError(n)}}}class Ph{constructor(){this.executingCallbacks=!1,this.buckets={[hl.EarlyRead]:new Set,[hl.Write]:new Set,[hl.MixedReadWrite]:new Set,[hl.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const i of n)i.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(const n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}}let cd=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const s of i)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=ir({token:e,providedIn:"root",factory:()=>new e})}return e})();function yu(e){return!!xi(e)}function dd(e,n,i){let s=i?e.styles:null,c=i?e.classes:null,l=0;if(null!==n)for(let p=0;p<n.length;p++){const y=n[p];"number"==typeof y?l=y:1==l?c=Zt(c,y):2==l&&(s=Zt(s,y+": "+n[++p]+";"))}i?e.styles=s:e.stylesWithoutHost=s,i?e.classes=c:e.classesWithoutHost=c}class cp extends Ah{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=cr(n);return new hd(i,this.ngModule)}}function Eu(e){const n=[];for(const i in e){if(!e.hasOwnProperty(i))continue;const s=e[i];void 0!==s&&n.push({propName:Array.isArray(s)?s[0]:s,templateName:i})}return n}class fl{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,s){s=oi(s);const c=this.injector.get(n,dl,s);return c!==dl||i===dl?c:this.parentInjector.get(n,i,s)}}class hd extends sd{get inputs(){const n=this.componentDef,i=n.inputTransforms,s=Eu(n.inputs);if(null!==i)for(const c of s)i.hasOwnProperty(c.propName)&&(c.transform=i[c.propName]);return s}get outputs(){return Eu(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function La(e){return e.map(Va).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,s,c){const l=ge(null);try{let p=(c=c||this.ngModule)instanceof Lr?c:c?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new fl(n,p):n,S=y.get(qy,null);if(null===S)throw new mt(407,!1);const U=y.get(EI,null),Oe={rendererFactory:S,sanitizer:U,inlineEffectRunner:null,afterRenderEventManager:y.get(cd,null),changeDetectionScheduler:y.get(Le,null)},We=S.createRenderer(null,this.componentDef),gt=this.componentDef.selectors[0][0]||"div",Bt=s?function QE(e,n,i,s){const l=s.get(X_,!1)||i===us.ShadowDom,p=e.selectRootElement(n,l);return function XE(e){My(e)}(p),p}(We,s,this.componentDef.encapsulation,y):al(We,gt,function Zy(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(gt));let an=512;this.componentDef.signals?an|=4096:this.componentDef.onPush||(an|=16);let dn=null;null!==Bt&&(dn=Xd(Bt,y,!0));const qt=qf(0,null,null,1,0,null,null,null,null,null,null),dr=cm(null,qt,null,an,null,null,Oe,We,y,null,dn);let ci,Zi;tu(dr);try{const yo=this.componentDef;let Fa,zp=null;yo.findHostDirectiveDefs?(Fa=[],zp=new Map,yo.findHostDirectiveDefs(yo,Fa,zp),Fa.push(yo)):Fa=[yo];const cA=function ev(e,n){const i=e[Yt],s=Kn;return e[s]=n,fh(i,s,2,"#host",null)}(dr,Bt),UR=function Ko(e,n,i,s,c,l,p){const y=c[Yt];!function tv(e,n,i,s){for(const c of e)n.mergedAttrs=N(n.mergedAttrs,c.hostAttrs);null!==n.mergedAttrs&&(dd(n,n.mergedAttrs,!0),null!==i&&cl(s,i,n))}(s,e,n,p);let S=null;null!==n&&(S=Xd(n,c[Kr]));const U=l.rendererFactory.createRenderer(n,i);let X=16;i.signals?X=4096:i.onPush&&(X=64);const ce=cm(c,Py(i),null,X,c[e.index],e,l,U,null,null,S);return y.firstCreatePass&&fm(y,e,s.length-1),mh(c,ce),c[e.index]=ce}(cA,Bt,yo,Fa,dr,Oe,We);Zi=sc(qt,Kn),Bt&&function Oh(e,n,i,s){if(s)Fi(e,i,["ng-version","17.3.12"]);else{const{attrs:c,classes:l}=function eo(e){const n=[],i=[];let s=1,c=2;for(;s<e.length;){let l=e[s];if("string"==typeof l)2===c?""!==l&&n.push(l,e[++s]):8===c&&i.push(l);else{if(!fi(c))break;c=l}s++}return{attrs:n,classes:i}}(n.selectors[0]);c&&Fi(e,i,c),l&&l.length>0&&Cy(e,i,l.join(" "))}}(We,yo,Bt,s),void 0!==i&&function CI(e,n,i){const s=e.projection=[];for(let c=0;c<n.length;c++){const l=i[c];s.push(null!=l?Array.from(l):null)}}(Zi,this.ngContentSelectors,i),ci=function Rh(e,n,i,s,c,l){const p=Br(),y=c[Yt],S=Hs(p,c);dm(y,c,p,i,null,s);for(let X=0;X<i.length;X++)Ps(sa(c,y,p.directiveStart+X,p),c);rI(y,c,p),S&&Ps(S,c);const U=sa(c,y,p.directiveStart+p.componentOffset,p);if(e[mi]=c[mi]=U,null!==l)for(const X of l)X(U,n);return um(y,p,c),U}(UR,yo,Fa,zp,dr,[wI]),yh(qt,dr,null)}finally{kl()}return new Mh(this.componentType,ci,qu(Zi,dr),dr,Zi)}finally{ge(l)}}}class Mh extends Bc{constructor(n,i,s,c,l){super(),this.location=s,this._rootLView=c,this._tNode=l,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new wh(c,void 0,!1),this.componentType=n}setInput(n,i){const s=this._tNode.inputs;let c;if(null!==s&&(c=s[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const l=this._rootLView;ul(l[Yt],l,c,n,i),this.previousInputValues.set(n,i),id(zo(this._tNode.index,l))}}get injector(){return new Ss(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function wI(){const e=Br();Fl(Ft()[Yt],e)}let $c=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=TI}return e})();function TI(){return kh(Br(),Ft())}const DI=$c,Nh=class extends DI{constructor(n,i,s){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=s}get element(){return qu(this._hostTNode,this._hostLView)}get injector(){return new Ss(this._hostTNode,this._hostLView)}get parentInjector(){const n=Dr(this._hostTNode,this._hostLView);if(Bl(n)){const i=xc(n,this._hostLView),s=ru(n);return new Ss(i[Yt].data[s+8],i)}return new Ss(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=Vm(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-bi}createEmbeddedView(n,i,s){let c,l;"number"==typeof s?c=s:null!=s&&(c=s.index,l=s.injector);const y=n.createEmbeddedViewImpl(i||{},l,null);return this.insertImpl(y,c,xa(this._hostTNode,null)),y}createComponent(n,i,s,c,l){const p=n&&!function xt(e){return"function"==typeof e}(n);let y;if(p)y=i;else{const gt=i||{};y=gt.index,s=gt.injector,c=gt.projectableNodes,l=gt.environmentInjector||gt.ngModuleRef}const S=p?n:new hd(cr(n)),U=s||this.parentInjector;if(!l&&null==S.ngModule){const Bt=(p?U:this.parentInjector).get(Lr,null);Bt&&(l=Bt)}cr(S.componentType??{});const We=S.create(U,c,null,l);return this.insertImpl(We.hostView,y,xa(this._hostTNode,null)),We}insert(n,i){return this.insertImpl(n,i,!0)}insertImpl(n,i,s){const c=n._lView;if(function Dl(e){return As(e[pr])}(c)){const y=this.indexOf(n);if(-1!==y)this.detach(y);else{const S=c[pr],U=new Nh(S,S[gi],S[pr]);U.detach(U.indexOf(n))}}const l=this._adjustIndex(i),p=this._lContainer;return vh(p,c,l,s),n.attachToViewContainerRef(),Io(xh(p),l,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=Vm(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),s=ch(this._lContainer,i);s&&(ao(xh(this._lContainer),i),uh(s[Yt],s))}detach(n){const i=this._adjustIndex(n,-1),s=ch(this._lContainer,i);return s&&null!=ao(xh(this._lContainer),i)?new wh(s):null}_adjustIndex(n,i=0){return n??this.length+i}};function Vm(e){return e[8]}function xh(e){return e[8]||(e[8]=[])}function kh(e,n){let i;const s=n[e.index];return As(s)?i=s:(i=gh(s,n,null,e),n[e.index]=i,mh(n,i)),Lm(i,n,e,s),new Nh(i,e,n)}let Lm=function dp(e,n,i,s){if(e[bo])return;let c;c=8&i.type?Pr(s):function Iu(e,n){const i=e[Yn],s=i.createComment(""),c=Hs(n,e);return _c(i,im(i,c),s,function iC(e,n){return e.nextSibling(n)}(i,c),!1),s}(n,i),e[bo]=c},up=()=>!1;class fd{constructor(n){this.queryList=n,this.matches=null}clone(){return new fd(this.queryList)}setDirty(){this.queryList.setDirty()}}class hp{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const s=null!==n.contentQueries?n.contentQueries[0]:i.length,c=[];for(let l=0;l<s;l++){const p=i.getByIndex(l);c.push(this.queries[p.indexInDeclarationView].clone())}return new hp(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==Gm(n,i).matches&&this.queries[i].setDirty()}}class fp{constructor(n,i,s=null){this.flags=i,this.read=s,this.predicate="string"==typeof n?function SI(e){return e.split(",").map(n=>n.trim())}(n):n}}class pl{constructor(n=[]){this.queries=n}elementStart(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let s=0;s<this.length;s++){const c=null!==i?i.length:0,l=this.getByIndex(s).embeddedTView(n,c);l&&(l.indexInDeclarationView=s,null!==i?i.push(l):i=[l])}return null!==i?new pl(i):null}template(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Hc{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Hc(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const i=this._declarationNodeIndex;let s=n.parent;for(;null!==s&&8&s.type&&s.index!==i;)s=s.parent;return i===(null!==s?s.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const s=this.metadata.predicate;if(Array.isArray(s))for(let c=0;c<s.length;c++){const l=s[c];this.matchTNodeWithReadOption(n,i,Um(i,l)),this.matchTNodeWithReadOption(n,i,Ka(i,n,l,!1,!1))}else s===Th?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Ka(i,n,s,!1,!1))}matchTNodeWithReadOption(n,i,s){if(null!==s){const c=this.metadata.read;if(null!==c)if(c===hc||c===$c||c===Th&&4&i.type)this.addMatch(i.index,-2);else{const l=Ka(i,n,c,!1,!1);null!==l&&this.addMatch(i.index,l)}else this.addMatch(i.index,s)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function Um(e,n){const i=e.localNames;if(null!==i)for(let s=0;s<i.length;s+=2)if(i[s]===n)return i[s+1];return null}function iv(e,n,i,s){return-1===i?function bI(e,n){return 11&e.type?qu(e,n):4&e.type?Jf(e,n):null}(n,e):-2===i?function sv(e,n,i){return i===hc?qu(n,e):i===Th?Jf(n,e):i===$c?kh(n,e):void 0}(e,n,s):sa(e,e[Yt],i,n)}function Bm(e,n,i,s){const c=n[Ho].queries[s];if(null===c.matches){const l=e.data,p=i.matches,y=[];for(let S=0;null!==p&&S<p.length;S+=2){const U=p[S];y.push(U<0?null:iv(n,l[U],p[S+1],i.metadata.read))}c.matches=y}return c.matches}function Fh(e,n,i,s){const c=e.queries.getByIndex(i),l=c.matches;if(null!==l){const p=Bm(e,n,c,i);for(let y=0;y<l.length;y+=2){const S=l[y];if(S>0)s.push(p[y/2]);else{const U=l[y+1],X=n[-S];for(let ce=bi;ce<X.length;ce++){const Oe=X[ce];Oe[Dc]===Oe[pr]&&Fh(Oe[Yt],Oe,U,s)}if(null!==X[Sa]){const ce=X[Sa];for(let Oe=0;Oe<ce.length;Oe++){const We=ce[Oe];Fh(We[Yt],We,U,s)}}}}}return s}function jm(e,n,i){const s=new cg(!(4&~i));return function ZE(e,n,i,s){const c=Ia(n);c.push(i),e.firstCreatePass&&Ro(e).push(s,c.length-1)}(e,n,s,s.destroy),(n[Ho]??=new hp).queries.push(new fd(s))-1}function Hm(e,n,i){null===e.queries&&(e.queries=new pl),e.queries.track(new Hc(n,i))}function Gm(e,n){return e.queries.getByIndex(n)}function Cu(e,n){const i=e[Yt],s=Gm(i,n);return s.crossesNgTemplate?Fh(i,e,n,[]):Bm(i,e,s,n)}function Lh(e){return function Ic(e){return"function"==typeof e&&void 0!==e[Ae]}(e)&&"function"==typeof e.set}function Ep(e){let n=function yv(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),i=!0;const s=[e];for(;n;){let c;if(to(e))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new mt(903,!1);c=n.\u0275dir}if(c){if(i){s.push(c);const p=e;p.inputs=Gh(e.inputs),p.inputTransforms=Gh(e.inputTransforms),p.declaredInputs=Gh(e.declaredInputs),p.outputs=Gh(e.outputs);const y=c.hostBindings;y&&Ev(e,y);const S=c.viewQuery,U=c.contentQueries;if(S&&Ym(e,S),U&&Jm(e,U),Hh(e,c),Or(e.outputs,c.outputs),to(c)&&c.data.animation){const X=e.data;X.animation=(X.animation||[]).concat(c.data.animation)}}const l=c.features;if(l)for(let p=0;p<l.length;p++){const y=l[p];y&&y.ngInherit&&y(e),y===Ep&&(i=!1)}}n=Object.getPrototypeOf(n)}!function vv(e){let n=0,i=null;for(let s=e.length-1;s>=0;s--){const c=e[s];c.hostVars=n+=c.hostVars,c.hostAttrs=N(c.hostAttrs,i=N(i,c.hostAttrs))}}(s)}function Hh(e,n){for(const i in n.inputs){if(!n.inputs.hasOwnProperty(i)||e.inputs.hasOwnProperty(i))continue;const s=n.inputs[i];if(void 0!==s&&(e.inputs[i]=s,e.declaredInputs[i]=n.declaredInputs[i],null!==n.inputTransforms)){const c=Array.isArray(s)?s[0]:s;if(!n.inputTransforms.hasOwnProperty(c))continue;e.inputTransforms??={},e.inputTransforms[c]=n.inputTransforms[c]}}}function Gh(e){return e===Ti?{}:e===gr?[]:e}function Ym(e,n){const i=e.viewQuery;e.viewQuery=i?(s,c)=>{n(s,c),i(s,c)}:n}function Jm(e,n){const i=e.contentQueries;e.contentQueries=i?(s,c,l)=>{n(s,c,l),i(s,c,l)}:n}function Ev(e,n){const i=e.hostBindings;e.hostBindings=i?(s,c)=>{n(s,c),i(s,c)}:n}function ca(e){const n=e.inputConfig,i={};for(const s in n)if(n.hasOwnProperty(s)){const c=n[s];Array.isArray(c)&&c[3]&&(i[s]=c[3])}e.inputTransforms=i}class Tu{}class t_{}function gd(e,n){return new V(e,n??null,[])}class V extends Tu{constructor(n,i,s){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cp(this);const c=xi(n);this._bootstrapComponents=Ea(c.bootstrap),this._r3Injector=Bd(n,i,[{provide:Tu,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver},...s],Jt(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class z extends t_{constructor(n){super(),this.moduleType=n}create(n){return new V(this.moduleType,n,[])}}class pt extends Tu{constructor(n){super(),this.componentFactoryResolver=new cp(this),this.instance=null;const i=new pi([...n.providers,{provide:Tu,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver}],n.parent||Vr(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Ot(e,n,i=null){return new pt({providers:e,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let Ja=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Cn.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vl(e){return!!LI(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function LI(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Du(e,n,i){return e[n]=i}function Ws(e,n,i){return!Object.is(e[n],i)&&(e[n]=i,!0)}function Wh(e,n,i,s){const c=Ws(e,n,i);return Ws(e,n+1,s)||c}function Cp(e,n,i,s,c,l,p,y){const S=Ft(),U=Mr(),X=e+Kn,ce=U.firstCreatePass?function hA(e,n,i,s,c,l,p,y,S){const U=n.consts,X=fh(n,e,4,p||null,no(U,y));Oy(n,i,X,no(U,S)),Fl(n,X);const ce=X.tView=qf(2,X,s,c,l,n.directiveRegistry,n.pipeRegistry,null,n.schemas,U,null);return null!==n.queries&&(n.queries.template(n,X),ce.queries=n.queries.embeddedTView(X)),X}(X,U,S,n,i,s,c,l,p):U.data[X];va(ce,!1);const Oe=IC(U,S,ce,e);Qi()&&lh(U,S,Oe,ce),Ps(Oe,S);const We=gh(Oe,S,Oe,ce);return S[X]=We,mh(S,We),function lp(e,n,i){return up(e,n,i)}(We,ce,S),qc(ce)&&lm(U,S,ce),null!=p&&Sy(S,ce,y),Cp}let IC=function CC(e,n,i,s){return Pa(!0),n[Yn].createComment("")};function qI(e,n,i,s){const c=Ft();return Ws(c,ia(),n)&&(Mr(),Na(Si(),c,e,n,i,s)),qI}function Mv(e,n){return e<<17|n<<2}function _d(e){return e>>17&32767}function QI(e){return 2|e}function qh(e){return(131068&e)>>2}function XI(e,n){return-131069&e|n<<2}function YI(e){return 1|e}function ZC(e,n,i,s){const c=e[i+1],l=null===n;let p=s?_d(c):qh(c),y=!1;for(;0!==p&&(!1===y||l);){const U=e[p+1];JA(e[p],n)&&(y=!0,e[p+1]=s?YI(U):QI(U)),p=s?_d(U):qh(U)}y&&(e[i+1]=s?QI(c):YI(c))}function JA(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&wi(e,n)>=0}function JI(e,n,i){const s=Ft();return Ws(s,ia(),n)&&aa(Mr(),Si(),s,e,n,s[Yn],i,!1),JI}function ZI(e,n,i,s,c){const p=c?"class":"style";ul(e,i,n.inputs[p],p,s)}function e0(e,n){return function zc(e,n,i,s){const c=Ft(),l=Mr(),p=function Gs(e){const n=Hn.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,i}(2);l.firstUpdatePass&&function cw(e,n,i,s){const c=e.data;if(null===c[i+1]){const l=c[Cs()],p=function aw(e,n){return n>=e.expandoStartIndex}(e,i);(function hw(e,n){return!!(e.flags&(n?8:16))})(l,s)&&null===n&&!p&&(n=!1),n=function ab(e,n,i,s){const c=function Md(e){const n=Hn.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let l=s?n.residualClasses:n.residualStyles;if(null===c)0===(s?n.classBindings:n.styleBindings)&&(i=c_(i=t0(null,e,n,i,s),n.attrs,s),l=null);else{const p=n.directiveStylingLast;if(-1===p||e[p]!==c)if(i=t0(c,e,n,i,s),null===l){let S=function cb(e,n,i){const s=i?n.classBindings:n.styleBindings;if(0!==qh(s))return e[_d(s)]}(e,n,s);void 0!==S&&Array.isArray(S)&&(S=t0(null,e,n,S[1],s),S=c_(S,n.attrs,s),function ub(e,n,i,s){e[_d(i?n.classBindings:n.styleBindings)]=s}(e,n,s,S))}else l=function lb(e,n,i){let s;const c=n.directiveEnd;for(let l=1+n.directiveStylingLast;l<c;l++)s=c_(s,e[l].hostAttrs,i);return c_(s,n.attrs,i)}(e,n,s)}return void 0!==l&&(s?n.residualClasses=l:n.residualStyles=l),i}(c,l,n,s),function XA(e,n,i,s,c,l){let p=l?n.classBindings:n.styleBindings,y=_d(p),S=qh(p);e[s]=i;let X,U=!1;if(Array.isArray(i)?(X=i[1],(null===X||wi(i,X)>0)&&(U=!0)):X=i,c)if(0!==S){const Oe=_d(e[y+1]);e[s+1]=Mv(Oe,y),0!==Oe&&(e[Oe+1]=XI(e[Oe+1],s)),e[y+1]=function qA(e,n){return 131071&e|n<<17}(e[y+1],s)}else e[s+1]=Mv(y,0),0!==y&&(e[y+1]=XI(e[y+1],s)),y=s;else e[s+1]=Mv(S,0),0===y?y=s:e[S+1]=XI(e[S+1],s),S=s;U&&(e[s+1]=QI(e[s+1])),ZC(e,X,s,!0),ZC(e,X,s,!1),function YA(e,n,i,s,c){const l=c?e.residualClasses:e.residualStyles;null!=l&&"string"==typeof n&&wi(l,n)>=0&&(i[s+1]=YI(i[s+1]))}(n,X,e,s,l),p=Mv(y,S),l?n.classBindings=p:n.styleBindings=p}(c,l,n,i,p,s)}}(l,e,p,s),n!==mr&&Ws(c,p,n)&&function lw(e,n,i,s,c,l,p,y){if(!(3&n.type))return;const S=e.data,U=S[y+1],X=function QA(e){return!(1&~e)}(U)?dw(S,n,i,c,qh(U),p):void 0;Rv(X)||(Rv(l)||function KA(e){return!(2&~e)}(U)&&(l=dw(S,null,i,c,y,p)),function WE(e,n,i,s,c){if(n)c?e.addClass(i,s):e.removeClass(i,s);else{let l=-1===s.indexOf("-")?void 0:Xa.DashCase;null==c?e.removeStyle(i,s,l):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),l|=Xa.Important),e.setStyle(i,s,c,l))}}(s,p,Jc(Cs(),i),c,l))}(l,l.data[Cs()],c,c[Yn],e,c[p+1]=function pb(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Jt(fu(e)))),e}(n,i),s,p)}(e,n,null,!0),e0}function t0(e,n,i,s,c){let l=null;const p=i.directiveEnd;let y=i.directiveStylingLast;for(-1===y?y=i.directiveStart:y++;y<p&&(l=n[y],s=c_(s,l.hostAttrs,c),l!==e);)y++;return null!==e&&(i.directiveStylingLast=y),s}function c_(e,n,i){const s=i?1:2;let c=-1;if(null!==n)for(let l=0;l<n.length;l++){const p=n[l];"number"==typeof p?c=p:c===s&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Ki(e,p,!!i||n[++l]))}return void 0===e?null:e}function dw(e,n,i,s,c,l){const p=null===n;let y;for(;c>0;){const S=e[c],U=Array.isArray(S),X=U?S[1]:S,ce=null===X;let Oe=i[c+1];Oe===mr&&(Oe=ce?gr:void 0);let We=ce?Ls(Oe,s):X===s?Oe:void 0;if(U&&!Rv(We)&&(We=Ls(S,s)),Rv(We)&&(y=We,p))return y;const gt=e[c+1];c=p?_d(gt):qh(gt)}if(null!==n){let S=l?n.residualClasses:n.residualStyles;null!=S&&(y=Ls(S,s))}return y}function Rv(e){return void 0!==e}function Ov(e,n,i,s){const c=Ft(),l=Mr(),p=Kn+e,y=c[Yn],S=l.firstCreatePass?function Vb(e,n,i,s,c,l){const p=n.consts,S=fh(n,e,2,s,no(p,c));return Oy(n,i,S,no(p,l)),null!==S.attrs&&dd(S,S.attrs,!1),null!==S.mergedAttrs&&dd(S,S.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,S),S}(p,l,c,n,i,s):l.data[p],U=mw(l,c,S,y,n,e);c[p]=U;const X=qc(S);return va(S,!0),cl(y,U,S),!function i_(e){return!(32&~e.flags)}(S)&&Qi()&&lh(l,c,U,S),0===function wd(){return Hn.lFrame.elementDepthCount}()&&Ps(U,c),function rf(){Hn.lFrame.elementDepthCount++}(),X&&(lm(l,c,S),um(l,S,c)),null!==s&&Sy(c,S),Ov}function Nv(){let e=Br();Lu()?function bs(){Hn.lFrame.isParent=!1}():(e=e.parent,va(e,!1));const n=e;(function Dd(e){return Hn.skipHydrationRootTNode===e})(n)&&function Kp(){Hn.skipHydrationRootTNode=null}(),function Td(){Hn.lFrame.elementDepthCount--}();const i=Mr();return i.firstCreatePass&&(Fl(i,e),Kc(e)&&i.queries.elementEnd(e)),null!=n.classesWithoutHost&&function xd(e){return!!(8&e.flags)}(n)&&ZI(i,n,Ft(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function kd(e){return!!(16&e.flags)}(n)&&ZI(i,n,Ft(),n.stylesWithoutHost,!1),Nv}function a0(e,n,i,s){return Ov(e,n,i,s),Nv(),a0}let mw=(e,n,i,s,c,l)=>(Pa(!0),al(s,c,function df(){return Hn.lFrame.currentNamespace}()));function vw(){return Ft()}const Qh=void 0;var Gb=["en",[["a","p"],["AM","PM"],Qh],[["AM","PM"],Qh,Qh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qh,"{1} 'at' {0}",Qh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Hb(e){const i=Math.floor(Math.abs(e)),s=e.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===s?1:5}];let Up={};function l0(e){const n=function zb(e){return e.toLowerCase().replace(/_/g,"-")}(e);let i=ww(n);if(i)return i;const s=n.split("-")[0];if(i=ww(s),i)return i;if("en"===s)return Gb;throw new mt(701,!1)}function Cw(e){return l0(e)[Bp.PluralCase]}function ww(e){return e in Up||(Up[e]=xn.ng&&xn.ng.common&&xn.ng.common.locales&&xn.ng.common.locales[e]),Up[e]}var Bp=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Bp||{});const jp="en-US";let Tw=jp;function f0(e,n,i,s){const c=Ft(),l=Mr(),p=Br();return p0(l,c,c[Yn],p,e,n,s),f0}function p0(e,n,i,s,c,l,p){const y=qc(s),U=e.firstCreatePass&&Ro(e),X=n[mi],ce=Ia(n);let Oe=!0;if(3&s.type||p){const Bt=Hs(s,n),an=p?p(Bt):Bt,dn=ce.length,qt=p?ci=>p(Pr(ci[s.index])):s.index;let dr=null;if(!p&&y&&(dr=function jS(e,n,i,s){const c=e.cleanup;if(null!=c)for(let l=0;l<c.length-1;l+=2){const p=c[l];if(p===i&&c[l+1]===s){const y=n[js],S=c[l+2];return y.length>S?y[S]:null}"string"==typeof p&&(l+=2)}return null}(e,n,c,s.index)),null!==dr)(dr.__ngLastListenerFn__||dr).__ngNextListenerFn__=l,dr.__ngLastListenerFn__=l,Oe=!1;else{l=Jw(s,n,X,l,!1);const ci=i.listen(an,c,l);ce.push(l,ci),U&&U.push(c,qt,dn,dn+1)}}else l=Jw(s,n,X,l,!1);const We=s.outputs;let gt;if(Oe&&null!==We&&(gt=We[c])){const Bt=gt.length;if(Bt)for(let an=0;an<Bt;an+=2){const Zi=n[gt[an]][gt[an+1]].subscribe(l),yo=ce.length;ce.push(l,Zi),U&&U.push(c,s.index,yo,-(yo+1))}}}function Yw(e,n,i,s){const c=ge(null);try{return $s(6,n,i),!1!==i(s)}catch(l){return _h(e,l),!1}finally{$s(7,n,i),ge(c)}}function Jw(e,n,i,s,c){return function l(p){if(p===Function)return s;id(e.componentOffset>-1?zo(e.index,n):n);let S=Yw(n,i,s,p),U=l.__ngNextListenerFn__;for(;U;)S=Yw(n,i,U,p)&&S,U=U.__ngNextListenerFn__;return c&&!1===S&&p.preventDefault(),S}}function Zw(e=1){return function Oc(e){return(Hn.lFrame.contextLView=function Al(e,n){for(;e>0;)n=n[ai],e--;return n}(e,Hn.lFrame.contextLView))[mi]}(e)}function uT(e,n,i,s){!function ov(e,n,i,s){const c=Mr();if(c.firstCreatePass){const l=Br();Hm(c,new fp(n,i,s),l.index),function av(e,n){const i=e.contentQueries||(e.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(e.queries.length-1,n)}(c,e),!(2&~i)&&(c.staticContentQueries=!0)}return jm(c,Ft(),i)}(e,n,i,s)}function lT(e,n,i){!function $m(e,n,i){const s=Mr();return s.firstCreatePass&&(Hm(s,new fp(e,n,i),-1),!(2&~n)&&(s.staticViewQueries=!0)),jm(s,Ft(),n)}(e,n,i)}function dT(e){const n=Ft(),i=Mr(),s=Nl();xl(s+1);const c=Gm(i,s);if(e.dirty&&function ef(e){return!(4&~e[In])}(n)===!(2&~c.metadata.flags)){if(null===c.matches)e.reset([]);else{const l=Cu(n,s);e.reset(l,gf),e.notifyOnChanges()}return!0}return!1}function hT(){return function Vh(e,n){return e[Ho].queries[n].queryList}(Ft(),Nl())}function CT(e,n=""){const i=Ft(),s=Mr(),c=e+Kn,l=s.firstCreatePass?fh(s,c,1,n,null):s.data[c],p=wT(s,i,l,n,e);i[c]=p,Qi()&&lh(s,i,p,l),va(l,!1)}let wT=(e,n,i,s,c)=>(Pa(!0),function fy(e,n){return e.createText(n)}(n[Yn],s));function m0(e){return Lv("",e,""),m0}function Lv(e,n,i){const s=Ft(),c=function Mp(e,n,i,s){return Ws(e,ia(),i)?n+Nn(i)+s:mr}(s,e,n,i);return c!==mr&&function Ca(e,n,i){const s=Jc(n,e);!function jf(e,n,i){e.setValue(n,i)}(e[Yn],s,i)}(s,Cs(),c),Lv}function _0(e,n,i){Lh(n)&&(n=n());const s=Ft();return Ws(s,ia(),n)&&aa(Mr(),Si(),s,e,n,s[Yn],i,!1),_0}function OT(e,n){const i=Lh(e);return i&&e.set(n),i}function y0(e,n){const i=Ft(),s=Mr(),c=Br();return p0(s,i,i[Yn],c,e,n),y0}function v0(e,n,i,s,c){if(e=ke(e),Array.isArray(e))for(let l=0;l<e.length;l++)v0(e[l],n,i,s,c);else{const l=Mr(),p=Ft(),y=Br();let S=on(e)?e:ke(e.provide);const U=Os(e),X=1048575&y.providerIndexes,ce=y.directiveStart,Oe=y.providerIndexes>>20;if(on(e)||!e.multi){const We=new Ma(U,c,td),gt=I0(S,n,c?X:X+Oe,ce);-1===gt?(io(Gt(y,p),l,S),E0(l,e,n.length),n.push(S),y.directiveStart++,y.directiveEnd++,c&&(y.providerIndexes+=1048576),i.push(We),p.push(We)):(i[gt]=We,p[gt]=We)}else{const We=I0(S,n,X+Oe,ce),gt=I0(S,n,X,X+Oe),an=gt>=0&&i[gt];if(c&&!an||!c&&!(We>=0&&i[We])){io(Gt(y,p),l,S);const dn=function lP(e,n,i,s,c){const l=new Ma(e,i,td);return l.multi=[],l.index=n,l.componentProviders=0,NT(l,c,s&&!i),l}(c?uP:cP,i.length,c,s,U);!c&&an&&(i[gt].providerFactory=dn),E0(l,e,n.length,0),n.push(S),y.directiveStart++,y.directiveEnd++,c&&(y.providerIndexes+=1048576),i.push(dn),p.push(dn)}else E0(l,e,We>-1?We:gt,NT(i[c?gt:We],U,!c&&s));!c&&s&&an&&i[gt].componentProviders++}}}function E0(e,n,i,s){const c=on(n),l=function vn(e){return!!e.useClass}(n);if(c||l){const S=(l?ke(n.useClass):n).prototype.ngOnDestroy;if(S){const U=e.destroyHooks||(e.destroyHooks=[]);if(!c&&n.multi){const X=U.indexOf(i);-1===X?U.push(i,[s,S]):U[X+1].push(s,S)}else U.push(i,S)}}}function NT(e,n,i){return i&&e.componentProviders++,e.multi.push(n)-1}function I0(e,n,i,s){for(let c=i;c<s;c++)if(n[c]===e)return c;return-1}function cP(e,n,i,s){return C0(this.multi,[])}function uP(e,n,i,s){const c=this.multi;let l;if(this.providerFactory){const p=this.providerFactory.componentProviders,y=sa(i,i[Yt],this.providerFactory.index,s);l=y.slice(0,p),C0(c,l);for(let S=p;S<y.length;S++)l.push(y[S])}else l=[],C0(c,l);return l}function C0(e,n){for(let i=0;i<e.length;i++)n.push((0,e[i])());return n}function xT(e,n=[]){return i=>{i.providersResolver=(s,c)=>function aP(e,n,i){const s=Mr();if(s.firstCreatePass){const c=to(e);v0(i,s.data,s.blueprint,c,!0),v0(n,s.data,s.blueprint,c,!1)}}(s,c?c(e):e,n)}}let dP=(()=>{class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const s=C(0,i.type),c=s.length>0?Ot([s],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,c)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ir({token:e,providedIn:"environment",factory:()=>new e(ni(Lr))})}return e})();function kT(e){Ec("NgStandalone"),e.getStandaloneInjector=n=>n.get(dP).getOrCreateStandaloneInjector(e)}function FT(e,n,i){const s=e.\u0275cmp;s.directiveDefs=qi(n,!1),s.pipeDefs=qi(i,!0)}function g_(e,n){const i=e[n];return i===mr?void 0:i}function BT(e,n,i,s,c,l,p,y){const S=n+i;return function Tv(e,n,i,s,c){const l=Wh(e,n,i,s);return Ws(e,n+2,c)||l}(e,S,c,l,p)?Du(e,S+3,y?s.call(y,c,l,p):s(c,l,p)):g_(e,S+3)}function HT(e,n){const i=Mr();let s;const c=e+Kn;i.firstCreatePass?(s=function wP(e,n){if(n)for(let i=n.length-1;i>=0;i--){const s=n[i];if(e===s.name)return s}}(n,i.pipeRegistry),i.data[c]=s,s.onDestroy&&(i.destroyHooks??=[]).push(c,s.onDestroy)):s=i.data[c];const l=s.factory||(s.factory=$i(s.type)),y=Er(td);try{const S=h(!1),U=l();return h(S),function qS(e,n,i,s){i>=e.data.length&&(e.data[i]=null,e.blueprint[i]=null),n[i]=s}(i,Ft(),c,U),U}finally{Er(y)}}function GT(e,n,i){const s=e+Kn,c=Ft(),l=oc(c,s);return m_(c,s)?function LT(e,n,i,s,c,l){const p=n+i;return Ws(e,p,c)?Du(e,p+1,l?s.call(l,c):s(c)):g_(e,p+1)}(c,Ns(),n,l.transform,i,l):l.transform(i)}function zT(e,n,i,s){const c=e+Kn,l=Ft(),p=oc(l,c);return m_(l,c)?function UT(e,n,i,s,c,l,p){const y=n+i;return Wh(e,y,c,l)?Du(e,y+2,p?s.call(p,c,l):s(c,l)):g_(e,y+2)}(l,Ns(),n,p.transform,i,s,p):p.transform(i,s)}function WT(e,n,i,s,c){const l=e+Kn,p=Ft(),y=oc(p,l);return m_(p,l)?BT(p,Ns(),n,y.transform,i,s,c,y):y.transform(i,s,c)}function m_(e,n){return e[Yt].data[n].pure}class cD{constructor(n){this.full=n;const i=n.split(".");this.major=i[0],this.minor=i[1],this.patch=i.slice(2).join(".")}}const qP=new cD("17.3.12");let uD=(()=>{class e{log(i){console.log(i)}warn(i){console.warn(i)}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const pD=new Qe(""),gD=new Qe("");let S0,EM=(()=>{class e{constructor(i,s,c){this._ngZone=i,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,S0||(function IM(e){S0=e}(c),c.addToWindow(s)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ws.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(i)||(clearTimeout(s.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,s,c){let l=-1;s&&s>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==l),i()},s)),this._callbacks.push({doneCb:i,timeoutId:l,updateCb:c})}whenStable(i,s,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,s,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,s,c){return[]}static#e=this.\u0275fac=function(s){return new(s||e)(ni(ws),ni(mD),ni(gD))};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac})}return e})(),mD=(()=>{class e{constructor(){this._applications=new Map}registerApplication(i,s){this._applications.set(i,s)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,s=!0){return S0?.findTestabilityInTree(this,i,s)??null}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function P0(e){return!!e&&"function"==typeof e.then}function _D(e){return!!e&&"function"==typeof e.subscribe}const yD=new Qe("");let M0=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s}),this.appInits=hn(yD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const c of this.appInits){const l=c();if(P0(l))i.push(l);else if(_D(l)){const p=new Promise((y,S)=>{l.subscribe({complete:y,error:S})});i.push(p)}}const s=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{s()}).catch(c=>{this.reject(c)}),0===i.length&&s(),this.initialized=!0}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const R0=new Qe("");function ID(e,n){return Array.isArray(n)?n.reduce(ID,e):{...e,...n}}let yd=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=hn(rg),this.afterRenderEffectManager=hn(cd),this.externalTestViews=new Set,this.beforeRender=new Ln.B,this.afterTick=new Ln.B,this.componentTypes=[],this.components=[],this.isStable=hn(Ja).hasPendingTasks.pipe((0,Gn.T)(i=>!i)),this._injector=hn(Lr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,s){const c=i instanceof sd;if(!this._injector.get(M0).done)throw!c&&Ni(i),new mt(405,!1);let p;p=c?i:this._injector.get(Ah).resolveComponentFactory(i),this.componentTypes.push(p.componentType);const y=function CM(e){return e.isBoundToModule}(p)?void 0:this._injector.get(Tu),U=p.create(so.NULL,[],s||p.selector,y),X=U.location.nativeElement,ce=U.injector.get(pD,null);return ce?.registerApplication(X),U.onDestroy(()=>{this.detachView(U.hostView),$v(this.components,U),ce?.unregisterApplication(X)}),this._loadComponent(U),U}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new mt(101,!1);const s=ge(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(c){this.internalErrorHandler(c)}finally{this.afterTick.next(),this._runningTick=!1,ge(s)}}detectChangesInAttachedViews(i){let s=0;const c=this.afterRenderEffectManager;for(;;){if(s===Ih)throw new mt(103,!1);if(i){const l=0===s;this.beforeRender.next(l);for(let{_lView:p,notifyErrorHandler:y}of this._views)TM(p,l,y)}if(s++,c.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>O0(l))&&(c.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>O0(l))))break}}attachView(i){const s=i;this._views.push(s),s.attachToAppRef(this)}detachView(i){const s=i;$v(this._views,s),s.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const s=this._injector.get(R0,[]);[...this._bootstrapListeners,...s].forEach(c=>c(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>$v(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new mt(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $v(e,n){const i=e.indexOf(n);i>-1&&e.splice(i,1)}function TM(e,n,i){!n&&!O0(e)||function DM(e,n,i){let s;i?(s=0,e[In]|=1024):s=64&e[In]?0:1,Ch(e,n,s)}(e,i,n)}function O0(e){return bl(e)}class AM{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let bM=(()=>{class e{compileModuleSync(i){return new z(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const s=this.compileModuleSync(i),l=Ea(xi(i).declarations).reduce((p,y)=>{const S=cr(y);return S&&p.push(new hd(S)),p},[]);return new AM(s,l)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),MM=(()=>{class e{constructor(){this.zone=hn(ws),this.applicationRef=hn(yd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function RM(){const e=hn(ws),n=hn(So);return i=>e.runOutsideAngular(()=>n.handleError(i))}let NM=(()=>{class e{constructor(){this.subscription=new nt.yU,this.initialized=!1,this.zone=hn(ws),this.pendingTasks=hn(Ja)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ws.assertNotInAngularZone(),queueMicrotask(()=>{null!==i&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ws.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Gv=new Qe("",{providedIn:"root",factory:()=>hn(Gv,nr.Optional|nr.SkipSelf)||function xM(){return typeof $localize<"u"&&$localize.locale||jp}()}),kM=new Qe("",{providedIn:"root",factory:()=>"USD"}),N0=new Qe("");let DD=(()=>{class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,s){const c=function Jy(e="zone.js",n){return"noop"===e?new Rm:"zone.js"===e?new ws(n):e}(s?.ngZone,function TD(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:s?.ngZoneEventCoalescing,runCoalescing:s?.ngZoneRunCoalescing}));return c.run(()=>{const l=function de(e,n,i){return new V(e,n,i)}(i.moduleType,this.injector,function wD(e){return[{provide:ws,useFactory:e},{provide:Us,multi:!0,useFactory:()=>{const n=hn(MM,{optional:!0});return()=>n.initialize()}},{provide:Us,multi:!0,useFactory:()=>{const n=hn(NM);return()=>{n.initialize()}}},{provide:rg,useFactory:RM}]}(()=>c)),p=l.injector.get(So,null);return c.runOutsideAngular(()=>{const y=c.onError.subscribe({next:S=>{p.handleError(S)}});l.onDestroy(()=>{$v(this._modules,l),y.unsubscribe()})}),function ED(e,n,i){try{const s=i();return P0(s)?s.catch(c=>{throw n.runOutsideAngular(()=>e.handleError(c)),c}):s}catch(s){throw n.runOutsideAngular(()=>e.handleError(s)),s}}(p,c,()=>{const y=l.injector.get(M0);return y.runInitializers(),y.donePromise.then(()=>(function Dw(e){"string"==typeof e&&(Tw=e.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Gv,jp)||jp),this._moduleDoBootstrap(l),l))})})}bootstrapModule(i,s=[]){const c=ID({},s);return function PM(e,n,i){const s=new z(i);return Promise.resolve(s)}(0,0,i).then(l=>this.bootstrapModuleFactory(l,c))}_moduleDoBootstrap(i){const s=i.injector.get(yd);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(c=>s.bootstrap(c));else{if(!i.instance.ngDoBootstrap)throw new mt(-403,!1);i.instance.ngDoBootstrap(s)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new mt(404,!1);this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s());const i=this._injector.get(N0,null);i&&(i.forEach(s=>s()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(s){return new(s||e)(ni(so))};static#t=this.\u0275prov=ir({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),vd=null;const AD=new Qe("");function bD(e,n,i=[]){const s=`Platform: ${n}`,c=new Qe(s);return(l=[])=>{let p=x0();if(!p||p.injector.get(AD,!1)){const y=[...i,...l,{provide:c,useValue:!0}];e?e(y):function VM(e){if(vd&&!vd.get(AD,!1))throw new mt(400,!1);(function vD(){!function yn(e){en=e}(()=>{throw new mt(600,!1)})})(),vd=e;const n=e.get(DD);(function PD(e){e.get(Tf,null)?.forEach(i=>i())})(e)}(function SD(e=[],n){return so.create({name:n,providers:[{provide:ur,useValue:"platform"},{provide:N0,useValue:new Set([()=>vd=null])},...e]})}(y,s))}return function LM(e){const n=x0();if(!n)throw new mt(401,!1);return n}()}}function x0(){return vd?.get(DD)??null}function BM(){return!1}let RD=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=jM}return e})();function jM(e){return function $M(e,n,i){if(ta(e)&&!i){const s=zo(e.index,n);return new wh(s,s)}return 47&e.type?new wh(n[jn],n):null}(Br(),Ft(),!(16&~e))}class kD{constructor(){}supports(n){return vl(n)}create(n){return new KM(n)}}const WM=(e,n)=>n;class KM{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||WM}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,s=this._removalsHead,c=0,l=null;for(;i||s;){const p=!s||i&&i.currentIndex<VD(s,c,l)?i:s,y=VD(p,c,l),S=p.currentIndex;if(p===s)c--,s=s._nextRemoved;else if(i=i._next,null==p.previousIndex)c++;else{l||(l=[]);const U=y-c,X=S-c;if(U!=X){for(let Oe=0;Oe<U;Oe++){const We=Oe<l.length?l[Oe]:l[Oe]=0,gt=We+Oe;X<=gt&&gt<U&&(l[Oe]=We+1)}l[p.previousIndex]=X-U}}y!==S&&n(p,y,S)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!vl(n))throw new mt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,l,p,i=this._itHead,s=!1;if(Array.isArray(n)){this.length=n.length;for(let y=0;y<this.length;y++)l=n[y],p=this._trackByFn(y,l),null!==i&&Object.is(i.trackById,p)?(s&&(i=this._verifyReinsertion(i,l,p,y)),Object.is(i.item,l)||this._addIdentityChange(i,l)):(i=this._mismatch(i,l,p,y),s=!0),i=i._next}else c=0,function lA(e,n){if(Array.isArray(e))for(let i=0;i<e.length;i++)n(e[i]);else{const i=e[Symbol.iterator]();let s;for(;!(s=i.next()).done;)n(s.value)}}(n,y=>{p=this._trackByFn(c,y),null!==i&&Object.is(i.trackById,p)?(s&&(i=this._verifyReinsertion(i,y,p,c)),Object.is(i.item,y)||this._addIdentityChange(i,y)):(i=this._mismatch(i,y,p,c),s=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,s,c){let l;return null===n?l=this._itTail:(l=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,l,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(s,c))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,l,c)):n=this._addAfter(new qM(i,s),l,c),n}_verifyReinsertion(n,i,s,c){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==l?n=this._reinsertAfter(l,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,l=n._nextRemoved;return null===c?this._removalsHead=l:c._nextRemoved=l,null===l?this._removalsTail=c:l._prevRemoved=c,this._insertAfter(n,i,s),this._addToMoves(n,s),n}_moveAfter(n,i,s){return this._unlink(n),this._insertAfter(n,i,s),this._addToMoves(n,s),n}_addAfter(n,i,s){return this._insertAfter(n,i,s),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,s){const c=null===i?this._itHead:i._next;return n._next=c,n._prev=i,null===c?this._itTail=n:c._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new FD),this._linkedRecords.put(n),n.currentIndex=s,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,s=n._next;return null===i?this._itHead=s:i._next=s,null===s?this._itTail=i:s._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FD),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class qM{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QM{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===i||i<=s.currentIndex)&&Object.is(s.trackById,n))return s;return null}remove(n){const i=n._prevDup,s=n._nextDup;return null===i?this._head=s:i._nextDup=s,null===s?this._tail=i:s._prevDup=i,null===this._head}}class FD{constructor(){this.map=new Map}put(n){const i=n.trackById;let s=this.map.get(i);s||(s=new QM,this.map.set(i,s)),s.add(n)}get(n,i){const c=this.map.get(n);return c?c.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VD(e,n,i){const s=e.previousIndex;if(null===s)return s;let c=0;return i&&s<i.length&&(c=i[s]),s+n+c}class LD{constructor(){}supports(n){return n instanceof Map||LI(n)}create(){return new XM}}class XM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||LI(n)))throw new mt(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(s,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,s),this._appendAfter=i,i=i._next;else{const l=this._getOrCreateRecordForKey(c,s);i=this._insertBeforeOrAppend(i,l)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let s=i;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const s=n._prev;return i._next=n,i._prev=s,n._prev=i,s&&(s._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,i);const l=c._prev,p=c._next;return l&&(l._next=p),p&&(p._prev=l),c._next=null,c._prev=null,c}const s=new YM(n);return this._records.set(n,s),s.currentValue=i,this._addToAdditions(s),s}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(s=>i(n[s],s))}}class YM{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UD(){return new U0([new kD])}let U0=(()=>{class e{static#e=this.\u0275prov=ir({token:e,providedIn:"root",factory:UD});constructor(i){this.factories=i}static create(i,s){if(null!=s){const c=s.factories.slice();i=i.concat(c)}return new e(i)}static extend(i){return{provide:e,useFactory:s=>e.create(i,s||UD()),deps:[[e,new ts,new Wi]]}}find(i){const s=this.factories.find(c=>c.supports(i));if(null!=s)return s;throw new mt(901,!1)}}return e})();function BD(){return new B0([new LD])}let B0=(()=>{class e{static#e=this.\u0275prov=ir({token:e,providedIn:"root",factory:BD});constructor(i){this.factories=i}static create(i,s){if(s){const c=s.factories.slice();i=i.concat(c)}return new e(i)}static extend(i){return{provide:e,useFactory:s=>e.create(i,s||BD()),deps:[[e,new ts,new Wi]]}}find(i){const s=this.factories.find(c=>c.supports(i));if(s)return s;throw new mt(901,!1)}}return e})();const eR=bD(null,"core",[]);let tR=(()=>{class e{constructor(i){}static#e=this.\u0275fac=function(s){return new(s||e)(ni(yd))};static#t=this.\u0275mod=To({type:e});static#n=this.\u0275inj=Gi({})}return e})();function MR(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function OR(e){const n=ge(null);try{return e()}finally{ge(n)}}function LR(e){const n=cr(e);if(!n)return null;const i=new hd(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},1182:(rn,ze,k)=>{k.d(ze,{DS:()=>_t,X8:()=>Et,$z:()=>yn,UB:()=>qe,yy:()=>en,ZP:()=>vt,AU:()=>xe,CP:()=>Ht,gF:()=>dt}),k(2438);var T=k(177),R=k(4438),E=k(1825),ie=k(9253),Ae=k(1413),ge=k(7673),Ve=k(1985),Be=k(8455),Ee=k(6365),_e=k(8750),Ge=k(983),lt=k(9326),De=k(941),st=k(5558),it=k(6354),et=k(6129);class Dt extends Ae.B{constructor(Kt=1/0,pn=1/0,nn=et.U){super(),this._bufferSize=Kt,this._windowTime=pn,this._timestampProvider=nn,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=pn===1/0,this._bufferSize=Math.max(1,Kt),this._windowTime=Math.max(1,pn)}next(Kt){const{isStopped:pn,_buffer:nn,_infiniteTimeWindow:sn,_timestampProvider:wn,_windowTime:An}=this;pn||(nn.push(Kt),!sn&&nn.push(wn.now()+An)),this._trimBuffer(),super.next(Kt)}_subscribe(Kt){this._throwIfClosed(),this._trimBuffer();const pn=this._innerSubscribe(Kt),{_infiniteTimeWindow:nn,_buffer:sn}=this,wn=sn.slice();for(let An=0;An<wn.length&&!Kt.closed;An+=nn?1:2)Kt.next(wn[An]);return this._checkFinalizedStatuses(Kt),pn}_trimBuffer(){const{_bufferSize:Kt,_timestampProvider:pn,_buffer:nn,_infiniteTimeWindow:sn}=this,wn=(sn?1:2)*Kt;if(Kt<1/0&&wn<nn.length&&nn.splice(0,nn.length-wn),!sn){const An=pn.now();let Ln=0;for(let nt=1;nt<nn.length&&nn[nt]<=An;nt+=2)Ln=nt;Ln&&nn.splice(0,Ln+1)}}}var bt=k(7707),oe=k(9974);function ee(Ye,Kt,...pn){if(!0===Kt)return void Ye();if(!1===Kt)return;const nn=new bt.Ms({next:()=>{nn.unsubscribe(),Ye()}});return(0,_e.Tg)(Kt(...pn)).subscribe(nn)}function je(Ye,Kt,pn){let nn,sn=!1;return Ye&&"object"==typeof Ye?({bufferSize:nn=1/0,windowTime:Kt=1/0,refCount:sn=!1,scheduler:pn}=Ye):nn=Ye??1/0,function le(Ye={}){const{connector:Kt=(()=>new Ae.B),resetOnError:pn=!0,resetOnComplete:nn=!0,resetOnRefCountZero:sn=!0}=Ye;return wn=>{let An,Ln,nt,Cn=0,Gn=!1,rr=!1;const St=()=>{Ln?.unsubscribe(),Ln=void 0},mt=()=>{St(),An=nt=void 0,Gn=rr=!1},ti=()=>{const Nt=An;mt(),Nt?.unsubscribe()};return(0,oe.N)((Nt,Ze)=>{Cn++,!rr&&!Gn&&St();const Rt=nt=nt??Kt();Ze.add(()=>{Cn--,0===Cn&&!rr&&!Gn&&(Ln=ee(ti,sn))}),Rt.subscribe(Ze),!An&&Cn>0&&(An=new bt.Ms({next:Qn=>Rt.next(Qn),error:Qn=>{rr=!0,St(),Ln=ee(mt,pn,Qn),Rt.error(Qn)},complete:()=>{Gn=!0,St(),Ln=ee(mt,nn),Rt.complete()}}),(0,_e.Tg)(Nt).subscribe(An))})(wn)}}({connector:()=>new Dt(nn,Kt,pn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:sn})}var Ne=k(1594),Ct=k(8071);function ue(Ye,Kt){return(0,Ct.T)(Kt)?(0,st.n)(()=>Ye,Kt):(0,st.n)(()=>Ye)}var He=k(6745),Lt=k(5964),Ut=k(7935);const Ht=new R.nKC("angularfire2.auth.use-emulator"),en=new R.nKC("angularfire2.auth.settings"),vt=new R.nKC("angularfire2.auth.tenant-id"),yn=new R.nKC("angularfire2.auth.langugage-code"),xe=new R.nKC("angularfire2.auth.use-device-language"),qe=new R.nKC("angularfire.auth.persistence"),dt=(Ye,Kt,pn,nn,sn,wn,An,Ln)=>(0,ie.BM)(`${Ye.name}.auth`,"AngularFireAuth",Ye.name,()=>{const nt=Kt.runOutsideAngular(()=>Ye.auth());if(pn&&nt.useEmulator(...pn),nn&&(nt.tenantId=nn),nt.languageCode=sn,wn&&nt.useDeviceLanguage(),An)for(const[Cn,Gn]of Object.entries(An))nt.settings[Cn]=Gn;return Ln&&nt.setPersistence(Ln),nt},[pn,nn,sn,wn,An,Ln]);let _t=(()=>{class Ye{authState;idToken;user;idTokenResult;credential;constructor(pn,nn,sn,wn,An,Ln,nt,Cn,Gn,rr,St,mt){const ti=new Ae.B,Nt=(0,ge.of)(void 0).pipe((0,De.Q)(An.outsideAngular),(0,st.n)(()=>wn.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2438)))),(0,it.T)(()=>(0,ie.iB)(pn,wn,nn)),(0,it.T)(Ze=>dt(Ze,wn,Ln,Cn,Gn,rr,nt,St)),je({bufferSize:1,refCount:!1}));if((0,T.Vy)(sn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ge.of)(null);else{Nt.pipe((0,Ne.$)()).subscribe();const Ze=Nt.pipe((0,st.n)(Zn=>Zn.getRedirectResult().then(bn=>bn,()=>null)),E.U0,je({bufferSize:1,refCount:!1})),Rt=Nt.pipe((0,st.n)(Zn=>new Ve.c(bn=>({unsubscribe:wn.runOutsideAngular(()=>Zn.onAuthStateChanged(Pn=>bn.next(Pn),Pn=>bn.error(Pn),()=>bn.complete()))})))),Qn=Nt.pipe((0,st.n)(Zn=>new Ve.c(bn=>({unsubscribe:wn.runOutsideAngular(()=>Zn.onIdTokenChanged(Pn=>bn.next(Pn),Pn=>bn.error(Pn),()=>bn.complete()))}))));this.authState=Ze.pipe(ue(Rt),(0,He._)(An.outsideAngular),(0,De.Q)(An.insideAngular)),this.user=Ze.pipe(ue(Qn),(0,He._)(An.outsideAngular),(0,De.Q)(An.insideAngular)),this.idToken=this.user.pipe((0,st.n)(Zn=>Zn?(0,Be.H)(Zn.getIdToken()):(0,ge.of)(null))),this.idTokenResult=this.user.pipe((0,st.n)(Zn=>Zn?(0,Be.H)(Zn.getIdTokenResult()):(0,ge.of)(null))),this.credential=function rt(...Ye){const Kt=(0,lt.lI)(Ye),pn=(0,lt.R0)(Ye,1/0),nn=Ye;return nn.length?1===nn.length?(0,_e.Tg)(nn[0]):(0,Ee.U)(pn)((0,Be.H)(nn,Kt)):Ge.w}(Ze,ti,this.authState.pipe((0,Lt.p)(Zn=>!Zn))).pipe((0,it.T)(Zn=>Zn?.user?Zn:null),(0,He._)(An.outsideAngular),(0,De.Q)(An.insideAngular))}return(0,ie.Gt)(this,Nt,wn,{spy:{apply:(Ze,Rt,Qn)=>{(Ze.startsWith("signIn")||Ze.startsWith("createUser"))&&Qn.then(Zn=>ti.next(Zn))}}})}static \u0275fac=function(nn){return new(nn||Ye)(R.KVO(ie.rx),R.KVO(ie.uP,8),R.KVO(R.Agw),R.KVO(R.SKi),R.KVO(E.u0),R.KVO(Ht,8),R.KVO(en,8),R.KVO(vt,8),R.KVO(yn,8),R.KVO(xe,8),R.KVO(qe,8),R.KVO(E.Jv,8))};static \u0275prov=R.jDH({token:Ye,factory:Ye.\u0275fac,providedIn:"any"})}return Ye})(),Et=(()=>{class Ye{constructor(){Ut.A.registerVersion("angularfire",E.xv.full,"auth-compat")}static \u0275fac=function(nn){return new(nn||Ye)};static \u0275mod=R.$C({type:Ye});static \u0275inj=R.G2t({providers:[_t]})}return Ye})()},9253:(rn,ze,k)=>{k.d(ze,{BM:()=>rt,Gt:()=>ie,bf:()=>lt,e7:()=>Ae,iB:()=>Ee,rx:()=>Ve,uP:()=>Be});var _=k(4438),T=k(1825),R=k(7935);const E=["ngOnDestroy"],ie=(et,Dt,bt,oe={})=>new Proxy(et,{get:(le,ee)=>bt.runOutsideAngular(()=>{if(et[ee])return oe?.spy?.get&&oe.spy.get(ee,et[ee]),et[ee];if(E.indexOf(ee)>-1)return()=>{};const je=Dt.toPromise().then(Ne=>{const Ct=Ne?.[ee];return"function"==typeof Ct?Ct.bind(Ne):Ct?.then?Ct.then(ue=>bt.run(()=>ue)):bt.run(()=>Ct)});return new Proxy(()=>{},{get:(Ne,Ct)=>je[Ct],apply:(Ne,Ct,ue)=>je.then(He=>{const Lt=He?.(...ue);return oe?.spy?.apply&&oe.spy.apply(ee,ue,Lt),Lt})})})}),Ae=(et,Dt)=>{Dt.forEach(bt=>{Object.getOwnPropertyNames(bt.prototype||bt).forEach(oe=>{Object.defineProperty(et.prototype,oe,Object.getOwnPropertyDescriptor(bt.prototype||bt,oe))})})};class ge{constructor(Dt){return Dt}}const Ve=new _.nKC("angularfire2.app.options"),Be=new _.nKC("angularfire2.app.name");function Ee(et,Dt,bt){const le="object"==typeof bt&&bt||{};le.name=le.name||"string"==typeof bt&&bt||"[DEFAULT]";const je=R.A.apps.filter(Ne=>Ne&&Ne.name===le.name)[0]||Dt.runOutsideAngular(()=>R.A.initializeApp(et,le));try{if(JSON.stringify(et)!==JSON.stringify(je.options)){const Ne=!!module.hot;_e("error",`${je.name} Firebase App already initialized with different options${Ne?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ge(je)}const _e=(et,...Dt)=>{(0,_.naY)()&&typeof console<"u"&&console[et](...Dt)},Ge={provide:ge,useFactory:Ee,deps:[Ve,_.SKi,[new _.Xx1,Be]]};let lt=(()=>{class et{static initializeApp(bt,oe){return{ngModule:et,providers:[{provide:Ve,useValue:bt},{provide:Be,useValue:oe}]}}constructor(bt){R.A.registerVersion("angularfire",T.xv.full,"core"),R.A.registerVersion("angularfire",T.xv.full,"app-compat"),R.A.registerVersion("angular",_.xvI.full,bt.toString())}static \u0275fac=function(oe){return new(oe||et)(_.KVO(_.Agw))};static \u0275mod=_.$C({type:et});static \u0275inj=_.G2t({providers:[Ge]})}return et})();function rt(et,Dt,bt,oe,le){const[,ee,je]=globalThis.\u0275AngularfireInstanceCache.find(Ne=>Ne[0]===et)||[];if(ee)return function De(et,Dt){try{return et.toString()===Dt.toString()}catch{return et===Dt}}(le,je)||(it("error",`${Dt} was already initialized on the ${bt} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),it("warn",{is:le,was:je})),ee;{const Ne=oe();return globalThis.\u0275AngularfireInstanceCache.push([et,Ne,le]),Ne}}const st=typeof module<"u"&&!!module.hot,it=(et,...Dt)=>{(0,_.naY)()&&typeof console<"u"&&console[et](...Dt)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:(rn,ze,k)=>{k.d(ze,{xv:()=>De,U0:()=>Ut,u0:()=>je,Jv:()=>Dt});var _=k(4438),T=k(7852);(0,T.registerVersion)("firebase","10.13.1","app");var ie=k(6780),ge=k(9687);const Be=new class Ve extends ge.q{}(class Ae extends ie.R{constructor(yn,xe){super(yn,xe),this.scheduler=yn,this.work=xe}schedule(yn,xe=0){return xe>0?super.schedule(yn,xe):(this.delay=xe,this.state=yn,this.scheduler.flush(this),this)}execute(yn,xe){return xe>0||this.closed?super.execute(yn,xe):this._execute(yn,xe)}requestAsyncId(yn,xe,qe=0){return null!=qe&&qe>0||null==qe&&this.delay>0?super.requestAsyncId(yn,xe,qe):(yn.flush(this),0)}});var _e=k(3236),Ge=k(8141),lt=k(6745),rt=k(941);const De=new _.RxE("ANGULARFIRE2_VERSION");class Dt{constructor(){return((vt,yn)=>{const xe=(0,T.getApps)(),qe=[];return xe.forEach(dt=>{dt.container.getProvider(vt).instances.forEach(Et=>{qe.includes(Et)||qe.push(Et)})}),qe})(bt)}}const bt="app-check";function oe(){}class le{zone;delegate;constructor(yn,xe=Be){this.zone=yn,this.delegate=xe}now(){return this.delegate.now()}schedule(yn,xe,qe){const dt=this.zone;return this.delegate.schedule(function(Et){dt.runGuarded(()=>{yn.apply(this,[Et])})},xe,qe)}}class ee{zone;task=null;constructor(yn){this.zone=yn}call(yn,xe){const qe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",oe,{},oe,oe)),xe.pipe((0,Ge.M)({next:qe,complete:qe,error:qe})).subscribe(yn).add(qe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let je=(()=>{class vt{ngZone;outsideAngular;insideAngular;constructor(xe){this.ngZone=xe,this.outsideAngular=xe.runOutsideAngular(()=>new le(Zone.current)),this.insideAngular=xe.run(()=>new le(Zone.current,_e.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(qe){return new(qe||vt)(_.KVO(_.SKi))};static \u0275prov=_.jDH({token:vt,factory:vt.\u0275fac,providedIn:"root"})}return vt})();function Ut(vt){return function ln(vt){return function(xe){return(xe=xe.lift(new ee(vt.ngZone))).pipe((0,lt._)(vt.outsideAngular),(0,rt.Q)(vt.insideAngular))}}(function Ne(){const vt=globalThis.\u0275AngularFireScheduler;if(!vt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return vt}())(vt)}},9417:(rn,ze,k)=>{k.d(ze,{BC:()=>St,JD:()=>Jr,MR:()=>xs,X1:()=>Fi,YN:()=>wo,cb:()=>mt,j4:()=>Rs,k0:()=>bt,me:()=>rt,ok:()=>co,qT:()=>Fo,vS:()=>ar,wz:()=>ni,xH:()=>ss,y7:()=>Ys});var _=k(4438),T=k(177),R=k(8455),E=k(7468),ie=k(6354);let Ae=(()=>{class G{constructor(N,Z){this._renderer=N,this._elementRef=Z,this.onChange=be=>{},this.onTouched=()=>{}}setProperty(N,Z){this._renderer.setProperty(this._elementRef.nativeElement,N,Z)}registerOnTouched(N){this.onTouched=N}registerOnChange(N){this.onChange=N}setDisabledState(N){this.setProperty("disabled",N)}static#e=this.\u0275fac=function(Z){return new(Z||G)(_.rXU(_.sFG),_.rXU(_.aKT))};static#t=this.\u0275dir=_.FsC({type:G})}return G})(),ge=(()=>{class G extends Ae{static#e=this.\u0275fac=(()=>{let N;return function(be){return(N||(N=_.xGo(G)))(be||G)}})();static#t=this.\u0275dir=_.FsC({type:G,features:[_.Vt3]})}return G})();const Ve=new _.nKC(""),_e={provide:Ve,useExisting:(0,_.Rfq)(()=>rt),multi:!0},lt=new _.nKC("");let rt=(()=>{class G extends Ae{constructor(N,Z,be){super(N,Z),this._compositionMode=be,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ge(){const G=(0,T.QT)()?(0,T.QT)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(N){this.setProperty("value",N??"")}_handleInput(N){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(N)}_compositionStart(){this._composing=!0}_compositionEnd(N){this._composing=!1,this._compositionMode&&this.onChange(N)}static#e=this.\u0275fac=function(Z){return new(Z||G)(_.rXU(_.sFG),_.rXU(_.aKT),_.rXU(lt,8))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Z,be){1&Z&&_.bIt("input",function(Xn){return be._handleInput(Xn.target.value)})("blur",function(){return be.onTouched()})("compositionstart",function(){return be._compositionStart()})("compositionend",function(Xn){return be._compositionEnd(Xn.target.value)})},features:[_.Jv_([_e]),_.Vt3]})}return G})();function De(G){return null==G||("string"==typeof G||Array.isArray(G))&&0===G.length}function st(G){return null!=G&&"number"==typeof G.length}const it=new _.nKC(""),et=new _.nKC(""),Dt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class bt{static min(K){return function oe(G){return K=>{if(De(K.value)||De(G))return null;const N=parseFloat(K.value);return!isNaN(N)&&N<G?{min:{min:G,actual:K.value}}:null}}(K)}static max(K){return function le(G){return K=>{if(De(K.value)||De(G))return null;const N=parseFloat(K.value);return!isNaN(N)&&N>G?{max:{max:G,actual:K.value}}:null}}(K)}static required(K){return function ee(G){return De(G.value)?{required:!0}:null}(K)}static requiredTrue(K){return function je(G){return!0===G.value?null:{required:!0}}(K)}static email(K){return function Ne(G){return De(G.value)||Dt.test(G.value)?null:{email:!0}}(K)}static minLength(K){return function Ct(G){return K=>De(K.value)||!st(K.value)?null:K.value.length<G?{minlength:{requiredLength:G,actualLength:K.value.length}}:null}(K)}static maxLength(K){return function ue(G){return K=>st(K.value)&&K.value.length>G?{maxlength:{requiredLength:G,actualLength:K.value.length}}:null}(K)}static pattern(K){return function He(G){if(!G)return Lt;let K,N;return"string"==typeof G?(N="","^"!==G.charAt(0)&&(N+="^"),N+=G,"$"!==G.charAt(G.length-1)&&(N+="$"),K=new RegExp(N)):(N=G.toString(),K=G),Z=>{if(De(Z.value))return null;const be=Z.value;return K.test(be)?null:{pattern:{requiredPattern:N,actualValue:be}}}}(K)}static nullValidator(K){return null}static compose(K){return xe(K)}static composeAsync(K){return dt(K)}}function Lt(G){return null}function Ut(G){return null!=G}function ln(G){return(0,_.jNT)(G)?(0,R.H)(G):G}function Ht(G){let K={};return G.forEach(N=>{K=null!=N?{...K,...N}:K}),0===Object.keys(K).length?null:K}function en(G,K){return K.map(N=>N(G))}function yn(G){return G.map(K=>function vt(G){return!G.validate}(K)?K:N=>K.validate(N))}function xe(G){if(!G)return null;const K=G.filter(Ut);return 0==K.length?null:function(N){return Ht(en(N,K))}}function qe(G){return null!=G?xe(yn(G)):null}function dt(G){if(!G)return null;const K=G.filter(Ut);return 0==K.length?null:function(N){const Z=en(N,K).map(ln);return(0,E.p)(Z).pipe((0,ie.T)(Ht))}}function _t(G){return null!=G?dt(yn(G)):null}function Et(G,K){return null===G?[K]:Array.isArray(G)?[...G,K]:[G,K]}function Ye(G){return G._rawValidators}function Kt(G){return G._rawAsyncValidators}function pn(G){return G?Array.isArray(G)?G:[G]:[]}function nn(G,K){return Array.isArray(G)?G.includes(K):G===K}function sn(G,K){const N=pn(K);return pn(G).forEach(be=>{nn(N,be)||N.push(be)}),N}function wn(G,K){return pn(K).filter(N=>!nn(G,N))}class An{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(K){this._rawValidators=K||[],this._composedValidatorFn=qe(this._rawValidators)}_setAsyncValidators(K){this._rawAsyncValidators=K||[],this._composedAsyncValidatorFn=_t(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(K){this._onDestroyCallbacks.push(K)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(K=>K()),this._onDestroyCallbacks=[]}reset(K=void 0){this.control&&this.control.reset(K)}hasError(K,N){return!!this.control&&this.control.hasError(K,N)}getError(K,N){return this.control?this.control.getError(K,N):null}}class Ln extends An{get formDirective(){return null}get path(){return null}}class nt extends An{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Cn{constructor(K){this._cd=K}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let St=(()=>{class G extends Cn{constructor(N){super(N)}static#e=this.\u0275fac=function(Z){return new(Z||G)(_.rXU(nt,2))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Z,be){2&Z&&_.AVh("ng-untouched",be.isUntouched)("ng-touched",be.isTouched)("ng-pristine",be.isPristine)("ng-dirty",be.isDirty)("ng-valid",be.isValid)("ng-invalid",be.isInvalid)("ng-pending",be.isPending)},features:[_.Vt3]})}return G})(),mt=(()=>{class G extends Cn{constructor(N){super(N)}static#e=this.\u0275fac=function(Z){return new(Z||G)(_.rXU(Ln,10))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(Z,be){2&Z&&_.AVh("ng-untouched",be.isUntouched)("ng-touched",be.isTouched)("ng-pristine",be.isPristine)("ng-dirty",be.isDirty)("ng-valid",be.isValid)("ng-invalid",be.isInvalid)("ng-pending",be.isPending)("ng-submitted",be.isSubmitted)},features:[_.Vt3]})}return G})();const Un="VALID",Or="INVALID",Jt="PENDING",Zt="DISABLED";function Qr(G){return(we(G)?G.validators:G)||null}function Nr(G,K){return(we(K)?K.asyncValidators:G)||null}function we(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}function Ce(G,K,N){const Z=G.controls;if(!(K?Object.keys(Z):Z).length)throw new _.wOt(1e3,"");if(!Z[N])throw new _.wOt(1001,"")}function Ke(G,K,N){G._forEachChild((Z,be)=>{if(void 0===N[be])throw new _.wOt(1002,"")})}class Pt{constructor(K,N){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(K),this._assignAsyncValidators(N)}get validator(){return this._composedValidatorFn}set validator(K){this._rawValidators=this._composedValidatorFn=K}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(K){this._rawAsyncValidators=this._composedAsyncValidatorFn=K}get parent(){return this._parent}get valid(){return this.status===Un}get invalid(){return this.status===Or}get pending(){return this.status==Jt}get disabled(){return this.status===Zt}get enabled(){return this.status!==Zt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(K){this._assignValidators(K)}setAsyncValidators(K){this._assignAsyncValidators(K)}addValidators(K){this.setValidators(sn(K,this._rawValidators))}addAsyncValidators(K){this.setAsyncValidators(sn(K,this._rawAsyncValidators))}removeValidators(K){this.setValidators(wn(K,this._rawValidators))}removeAsyncValidators(K){this.setAsyncValidators(wn(K,this._rawAsyncValidators))}hasValidator(K){return nn(this._rawValidators,K)}hasAsyncValidator(K){return nn(this._rawAsyncValidators,K)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(K={}){this.touched=!0,this._parent&&!K.onlySelf&&this._parent.markAsTouched(K)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(K=>K.markAllAsTouched())}markAsUntouched(K={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(N=>{N.markAsUntouched({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}markAsDirty(K={}){this.pristine=!1,this._parent&&!K.onlySelf&&this._parent.markAsDirty(K)}markAsPristine(K={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(N=>{N.markAsPristine({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}markAsPending(K={}){this.status=Jt,!1!==K.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!K.onlySelf&&this._parent.markAsPending(K)}disable(K={}){const N=this._parentMarkedDirty(K.onlySelf);this.status=Zt,this.errors=null,this._forEachChild(Z=>{Z.disable({...K,onlySelf:!0})}),this._updateValue(),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...K,skipPristineCheck:N}),this._onDisabledChange.forEach(Z=>Z(!0))}enable(K={}){const N=this._parentMarkedDirty(K.onlySelf);this.status=Un,this._forEachChild(Z=>{Z.enable({...K,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent}),this._updateAncestors({...K,skipPristineCheck:N}),this._onDisabledChange.forEach(Z=>Z(!1))}_updateAncestors(K){this._parent&&!K.onlySelf&&(this._parent.updateValueAndValidity(K),K.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(K){this._parent=K}getRawValue(){return this.value}updateValueAndValidity(K={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Un||this.status===Jt)&&this._runAsyncValidator(K.emitEvent)),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!K.onlySelf&&this._parent.updateValueAndValidity(K)}_updateTreeValidity(K={emitEvent:!0}){this._forEachChild(N=>N._updateTreeValidity(K)),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zt:Un}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(K){if(this.asyncValidator){this.status=Jt,this._hasOwnPendingAsyncValidator=!0;const N=ln(this.asyncValidator(this));this._asyncValidationSubscription=N.subscribe(Z=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Z,{emitEvent:K})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(K,N={}){this.errors=K,this._updateControlsErrors(!1!==N.emitEvent)}get(K){let N=K;return null==N||(Array.isArray(N)||(N=N.split(".")),0===N.length)?null:N.reduce((Z,be)=>Z&&Z._find(be),this)}getError(K,N){const Z=N?this.get(N):this;return Z&&Z.errors?Z.errors[K]:null}hasError(K,N){return!!this.getError(K,N)}get root(){let K=this;for(;K._parent;)K=K._parent;return K}_updateControlsErrors(K){this.status=this._calculateStatus(),K&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(K)}_initObservables(){this.valueChanges=new _.bkB,this.statusChanges=new _.bkB}_calculateStatus(){return this._allControlsDisabled()?Zt:this.errors?Or:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jt)?Jt:this._anyControlsHaveStatus(Or)?Or:Un}_anyControlsHaveStatus(K){return this._anyControls(N=>N.status===K)}_anyControlsDirty(){return this._anyControls(K=>K.dirty)}_anyControlsTouched(){return this._anyControls(K=>K.touched)}_updatePristine(K={}){this.pristine=!this._anyControlsDirty(),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}_updateTouched(K={}){this.touched=this._anyControlsTouched(),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}_registerOnCollectionChange(K){this._onCollectionChange=K}_setUpdateStrategy(K){we(K)&&null!=K.updateOn&&(this._updateOn=K.updateOn)}_parentMarkedDirty(K){return!K&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(K){return null}_assignValidators(K){this._rawValidators=Array.isArray(K)?K.slice():K,this._composedValidatorFn=function On(G){return Array.isArray(G)?qe(G):G||null}(this._rawValidators)}_assignAsyncValidators(K){this._rawAsyncValidators=Array.isArray(K)?K.slice():K,this._composedAsyncValidatorFn=function ke(G){return Array.isArray(G)?_t(G):G||null}(this._rawAsyncValidators)}}class pe extends Pt{constructor(K,N,Z){super(Qr(N),Nr(Z,N)),this.controls=K,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(K,N){return this.controls[K]?this.controls[K]:(this.controls[K]=N,N.setParent(this),N._registerOnCollectionChange(this._onCollectionChange),N)}addControl(K,N,Z={}){this.registerControl(K,N),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}removeControl(K,N={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}setControl(K,N,Z={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],N&&this.registerControl(K,N),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}contains(K){return this.controls.hasOwnProperty(K)&&this.controls[K].enabled}setValue(K,N={}){Ke(this,0,K),Object.keys(K).forEach(Z=>{Ce(this,!0,Z),this.controls[Z].setValue(K[Z],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(K,N={}){null!=K&&(Object.keys(K).forEach(Z=>{const be=this.controls[Z];be&&be.patchValue(K[Z],{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(K={},N={}){this._forEachChild((Z,be)=>{Z.reset(K?K[be]:null,{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this._reduceChildren({},(K,N,Z)=>(K[Z]=N.getRawValue(),K))}_syncPendingControls(){let K=this._reduceChildren(!1,(N,Z)=>!!Z._syncPendingControls()||N);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){Object.keys(this.controls).forEach(N=>{const Z=this.controls[N];Z&&K(Z,N)})}_setUpControls(){this._forEachChild(K=>{K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(K){for(const[N,Z]of Object.entries(this.controls))if(this.contains(N)&&K(Z))return!0;return!1}_reduceValue(){return this._reduceChildren({},(N,Z,be)=>((Z.enabled||this.disabled)&&(N[be]=Z.value),N))}_reduceChildren(K,N){let Z=K;return this._forEachChild((be,fn)=>{Z=N(Z,be,fn)}),Z}_allControlsDisabled(){for(const K of Object.keys(this.controls))if(this.controls[K].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(K){return this.controls.hasOwnProperty(K)?this.controls[K]:null}}class me extends pe{}const Vt=new _.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>En}),En="always";function Bn(G,K){return[...K.path,G]}function zn(G,K,N=En){Gr(G,K),K.valueAccessor.writeValue(G.value),(G.disabled||"always"===N)&&K.valueAccessor.setDisabledState?.(G.disabled),function Ms(G,K){K.valueAccessor.registerOnChange(N=>{G._pendingValue=N,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&ir(G,K)})}(G,K),function is(G,K){const N=(Z,be)=>{K.valueAccessor.writeValue(Z),be&&K.viewToModelUpdate(Z)};G.registerOnChange(N),K._registerOnDestroy(()=>{G._unregisterOnChange(N)})}(G,K),function cs(G,K){K.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&ir(G,K),"submit"!==G.updateOn&&G.markAsTouched()})}(G,K),function Re(G,K){if(K.valueAccessor.setDisabledState){const N=Z=>{K.valueAccessor.setDisabledState(Z)};G.registerOnDisabledChange(N),K._registerOnDestroy(()=>{G._unregisterOnDisabledChange(N)})}}(G,K)}function Mn(G,K,N=!0){const Z=()=>{};K.valueAccessor&&(K.valueAccessor.registerOnChange(Z),K.valueAccessor.registerOnTouched(Z)),Yr(G,K),G&&(K._invokeOnDestroyCallbacks(),G._registerOnCollectionChange(()=>{}))}function Wt(G,K){G.forEach(N=>{N.registerOnValidatorChange&&N.registerOnValidatorChange(K)})}function Gr(G,K){const N=Ye(G);null!==K.validator?G.setValidators(Et(N,K.validator)):"function"==typeof N&&G.setValidators([N]);const Z=Kt(G);null!==K.asyncValidator?G.setAsyncValidators(Et(Z,K.asyncValidator)):"function"==typeof Z&&G.setAsyncValidators([Z]);const be=()=>G.updateValueAndValidity();Wt(K._rawValidators,be),Wt(K._rawAsyncValidators,be)}function Yr(G,K){let N=!1;if(null!==G){if(null!==K.validator){const be=Ye(G);if(Array.isArray(be)&&be.length>0){const fn=be.filter(Xn=>Xn!==K.validator);fn.length!==be.length&&(N=!0,G.setValidators(fn))}}if(null!==K.asyncValidator){const be=Kt(G);if(Array.isArray(be)&&be.length>0){const fn=be.filter(Xn=>Xn!==K.asyncValidator);fn.length!==be.length&&(N=!0,G.setAsyncValidators(fn))}}}const Z=()=>{};return Wt(K._rawValidators,Z),Wt(K._rawAsyncValidators,Z),N}function ir(G,K){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),K.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function ve(G,K){if(!G.hasOwnProperty("model"))return!1;const N=G.model;return!!N.isFirstChange()||!Object.is(K,N.currentValue)}function Qe(G,K){if(!K)return null;let N,Z,be;return Array.isArray(K),K.forEach(fn=>{fn.constructor===rt?N=fn:function Ie(G){return Object.getPrototypeOf(G.constructor)===ge}(fn)?Z=fn:be=fn}),be||Z||N||null}function si(G,K){const N=G.indexOf(K);N>-1&&G.splice(N,1)}function _r(G){return"object"==typeof G&&null!==G&&2===Object.keys(G).length&&"value"in G&&"disabled"in G}Promise.resolve();const ui=class extends Pt{constructor(K=null,N,Z){super(Qr(N),Nr(Z,N)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(K),this._setUpdateStrategy(N),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),we(N)&&(N.nonNullable||N.initialValueIsDefault)&&(this.defaultValue=_r(K)?K.value:K)}setValue(K,N={}){this.value=this._pendingValue=K,this._onChange.length&&!1!==N.emitModelToViewChange&&this._onChange.forEach(Z=>Z(this.value,!1!==N.emitViewToModelChange)),this.updateValueAndValidity(N)}patchValue(K,N={}){this.setValue(K,N)}reset(K=this.defaultValue,N={}){this._applyFormState(K),this.markAsPristine(N),this.markAsUntouched(N),this.setValue(this.value,N),this._pendingChange=!1}_updateValue(){}_anyControls(K){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(K){this._onChange.push(K)}_unregisterOnChange(K){si(this._onChange,K)}registerOnDisabledChange(K){this._onDisabledChange.push(K)}_unregisterOnDisabledChange(K){si(this._onDisabledChange,K)}_forEachChild(K){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(K){_r(K)?(this.value=this._pendingValue=K.value,K.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=K}},Ii={provide:nt,useExisting:(0,_.Rfq)(()=>ar)},Nn=Promise.resolve();let ar=(()=>{class G extends nt{constructor(N,Z,be,fn,Xn,ys){super(),this._changeDetectorRef=Xn,this.callSetDisabledState=ys,this.control=new ui,this._registered=!1,this.name="",this.update=new _.bkB,this._parent=N,this._setValidators(Z),this._setAsyncValidators(be),this.valueAccessor=Qe(0,fn)}ngOnChanges(N){if(this._checkForErrors(),!this._registered||"name"in N){if(this._registered&&(this._checkName(),this.formDirective)){const Z=N.name.previousValue;this.formDirective.removeControl({name:Z,path:this._getPath(Z)})}this._setUpControl()}"isDisabled"in N&&this._updateDisabled(N),ve(N,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){zn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(N){Nn.then(()=>{this.control.setValue(N,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(N){const Z=N.isDisabled.currentValue,be=0!==Z&&(0,_.L39)(Z);Nn.then(()=>{be&&!this.control.disabled?this.control.disable():!be&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(N){return this._parent?Bn(N,this._parent):[N]}static#e=this.\u0275fac=function(Z){return new(Z||G)(_.rXU(Ln,9),_.rXU(it,10),_.rXU(et,10),_.rXU(Ve,10),_.rXU(_.gRc,8),_.rXU(Vt,8))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[_.Mj6.None,"disabled","isDisabled"],model:[_.Mj6.None,"ngModel","model"],options:[_.Mj6.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_.Jv_([Ii]),_.Vt3,_.OA$]})}return G})(),Fo=(()=>{class G{static#e=this.\u0275fac=function(Z){return new(Z||G)};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return G})();const Eo={provide:Ve,useExisting:(0,_.Rfq)(()=>xs),multi:!0};let xs=(()=>{class G extends ge{writeValue(N){this.setProperty("value",parseFloat(N))}registerOnChange(N){this.onChange=Z=>{N(""==Z?null:parseFloat(Z))}}static#e=this.\u0275fac=(()=>{let N;return function(be){return(N||(N=_.xGo(G)))(be||G)}})();static#t=this.\u0275dir=_.FsC({type:G,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(Z,be){1&Z&&_.bIt("change",function(Xn){return be.onChange(Xn.target.value)})("input",function(Xn){return be.onChange(Xn.target.value)})("blur",function(){return be.onTouched()})},features:[_.Jv_([Eo]),_.Vt3]})}return G})();const Er=new _.nKC(""),la={provide:Ln,useExisting:(0,_.Rfq)(()=>Rs)};let Rs=(()=>{class G extends Ln{constructor(N,Z,be){super(),this.callSetDisabledState=be,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.bkB,this._setValidators(N),this._setAsyncValidators(Z)}ngOnChanges(N){this._checkFormPresent(),N.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Yr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(N){const Z=this.form.get(N.path);return zn(Z,N,this.callSetDisabledState),Z.updateValueAndValidity({emitEvent:!1}),this.directives.push(N),Z}getControl(N){return this.form.get(N.path)}removeControl(N){Mn(N.control||null,N,!1),function Xt(G,K){const N=G.indexOf(K);N>-1&&G.splice(N,1)}(this.directives,N)}addFormGroup(N){this._setUpFormContainer(N)}removeFormGroup(N){this._cleanUpFormContainer(N)}getFormGroup(N){return this.form.get(N.path)}addFormArray(N){this._setUpFormContainer(N)}removeFormArray(N){this._cleanUpFormContainer(N)}getFormArray(N){return this.form.get(N.path)}updateModel(N,Z){this.form.get(N.path).setValue(Z)}onSubmit(N){return this.submitted=!0,function ut(G,K){G._syncPendingControls(),K.forEach(N=>{const Z=N.control;"submit"===Z.updateOn&&Z._pendingChange&&(N.viewToModelUpdate(Z._pendingValue),Z._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(N),"dialog"===N?.target?.method}onReset(){this.resetForm()}resetForm(N=void 0){this.form.reset(N),this.submitted=!1}_updateDomValue(){this.directives.forEach(N=>{const Z=N.control,be=this.form.get(N.path);Z!==be&&(Mn(Z||null,N),(G=>G instanceof ui)(be)&&(zn(be,N,this.callSetDisabledState),N.control=be))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(N){const Z=this.form.get(N.path);(function Gi(G,K){Gr(G,K)})(Z,N),Z.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(N){if(this.form){const Z=this.form.get(N.path);Z&&function ri(G,K){return Yr(G,K)}(Z,N)&&Z.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Gr(this.form,this),this._oldForm&&Yr(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(Z){return new(Z||G)(_.rXU(it,10),_.rXU(et,10),_.rXU(Vt,8))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["","formGroup",""]],hostBindings:function(Z,be){1&Z&&_.bIt("submit",function(Xn){return be.onSubmit(Xn)})("reset",function(){return be.onReset()})},inputs:{form:[_.Mj6.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_.Jv_([la]),_.Vt3,_.OA$]})}return G})();const Xs={provide:nt,useExisting:(0,_.Rfq)(()=>Jr)};let Jr=(()=>{class G extends nt{set isDisabled(N){}static#e=this._ngModelWarningSentOnce=!1;constructor(N,Z,be,fn,Xn){super(),this._ngModelWarningConfig=Xn,this._added=!1,this.name=null,this.update=new _.bkB,this._ngModelWarningSent=!1,this._parent=N,this._setValidators(Z),this._setAsyncValidators(be),this.valueAccessor=Qe(0,fn)}ngOnChanges(N){this._added||this._setUpControl(),ve(N,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}get path(){return Bn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(Z){return new(Z||G)(_.rXU(Ln,13),_.rXU(it,10),_.rXU(et,10),_.rXU(Ve,10),_.rXU(Er,8))};static#n=this.\u0275dir=_.FsC({type:G,selectors:[["","formControlName",""]],inputs:{name:[_.Mj6.None,"formControlName","name"],isDisabled:[_.Mj6.None,"disabled","isDisabled"],model:[_.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[_.Jv_([Xs]),_.Vt3,_.OA$]})}return G})();const Lo={provide:Ve,useExisting:(0,_.Rfq)(()=>ni),multi:!0};function hi(G,K){return null==G?`${K}`:(K&&"object"==typeof K&&(K="Object"),`${G}: ${K}`.slice(0,50))}let ni=(()=>{class G extends ge{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(N){this._compareWith=N}writeValue(N){this.value=N;const be=hi(this._getOptionId(N),N);this.setProperty("value",be)}registerOnChange(N){this.onChange=Z=>{this.value=this._getOptionValue(Z),N(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(N){for(const Z of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Z),N))return Z;return null}_getOptionValue(N){const Z=function zr(G){return G.split(":")[0]}(N);return this._optionMap.has(Z)?this._optionMap.get(Z):N}static#e=this.\u0275fac=(()=>{let N;return function(be){return(N||(N=_.xGo(G)))(be||G)}})();static#t=this.\u0275dir=_.FsC({type:G,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(Z,be){1&Z&&_.bIt("change",function(Xn){return be.onChange(Xn.target.value)})("blur",function(){return be.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.Jv_([Lo]),_.Vt3]})}return G})(),ss=(()=>{class G{constructor(N,Z,be){this._element=N,this._renderer=Z,this._select=be,this._select&&(this.id=this._select._registerOption())}set ngValue(N){null!=this._select&&(this._select._optionMap.set(this.id,N),this._setElementValue(hi(this.id,N)),this._select.writeValue(this._select.value))}set value(N){this._setElementValue(N),this._select&&this._select.writeValue(this._select.value)}_setElementValue(N){this._renderer.setProperty(this._element.nativeElement,"value",N)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Z){return new(Z||G)(_.rXU(_.aKT),_.rXU(_.sFG),_.rXU(ni,9))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return G})();const hn={provide:Ve,useExisting:(0,_.Rfq)(()=>gs),multi:!0};function oi(G,K){return null==G?`${K}`:("string"==typeof K&&(K=`'${K}'`),K&&"object"==typeof K&&(K="Object"),`${G}: ${K}`.slice(0,50))}let gs=(()=>{class G extends ge{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(N){this._compareWith=N}writeValue(N){let Z;if(this.value=N,Array.isArray(N)){const be=N.map(fn=>this._getOptionId(fn));Z=(fn,Xn)=>{fn._setSelected(be.indexOf(Xn.toString())>-1)}}else Z=(be,fn)=>{be._setSelected(!1)};this._optionMap.forEach(Z)}registerOnChange(N){this.onChange=Z=>{const be=[],fn=Z.selectedOptions;if(void 0!==fn){const Xn=fn;for(let ys=0;ys<Xn.length;ys++){const fi=this._getOptionValue(Xn[ys].value);be.push(fi)}}else{const Xn=Z.options;for(let ys=0;ys<Xn.length;ys++){const Zs=Xn[ys];if(Zs.selected){const fi=this._getOptionValue(Zs.value);be.push(fi)}}}this.value=be,N(be)}}_registerOption(N){const Z=(this._idCounter++).toString();return this._optionMap.set(Z,N),Z}_getOptionId(N){for(const Z of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Z)._value,N))return Z;return null}_getOptionValue(N){const Z=function ps(G){return G.split(":")[0]}(N);return this._optionMap.has(Z)?this._optionMap.get(Z)._value:N}static#e=this.\u0275fac=(()=>{let N;return function(be){return(N||(N=_.xGo(G)))(be||G)}})();static#t=this.\u0275dir=_.FsC({type:G,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(Z,be){1&Z&&_.bIt("change",function(Xn){return be.onChange(Xn.target)})("blur",function(){return be.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.Jv_([hn]),_.Vt3]})}return G})(),Ys=(()=>{class G{constructor(N,Z,be){this._element=N,this._renderer=Z,this._select=be,this._select&&(this.id=this._select._registerOption(this))}set ngValue(N){null!=this._select&&(this._value=N,this._setElementValue(oi(this.id,N)),this._select.writeValue(this._select.value))}set value(N){this._select?(this._value=N,this._setElementValue(oi(this.id,N)),this._select.writeValue(this._select.value)):this._setElementValue(N)}_setElementValue(N){this._renderer.setProperty(this._element.nativeElement,"value",N)}_setSelected(N){this._renderer.setProperty(this._element.nativeElement,"selected",N)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Z){return new(Z||G)(_.rXU(_.aKT),_.rXU(_.sFG),_.rXU(gs,9))};static#t=this.\u0275dir=_.FsC({type:G,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return G})(),Ti=(()=>{class G{static#e=this.\u0275fac=function(Z){return new(Z||G)};static#t=this.\u0275mod=_.$C({type:G});static#n=this.\u0275inj=_.G2t({})}return G})();class gr extends Pt{constructor(K,N,Z){super(Qr(N),Nr(Z,N)),this.controls=K,this._initObservables(),this._setUpdateStrategy(N),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(K){return this.controls[this._adjustIndex(K)]}push(K,N={}){this.controls.push(K),this._registerControl(K),this.updateValueAndValidity({emitEvent:N.emitEvent}),this._onCollectionChange()}insert(K,N,Z={}){this.controls.splice(K,0,N),this._registerControl(N),this.updateValueAndValidity({emitEvent:Z.emitEvent})}removeAt(K,N={}){let Z=this._adjustIndex(K);Z<0&&(Z=0),this.controls[Z]&&this.controls[Z]._registerOnCollectionChange(()=>{}),this.controls.splice(Z,1),this.updateValueAndValidity({emitEvent:N.emitEvent})}setControl(K,N,Z={}){let be=this._adjustIndex(K);be<0&&(be=0),this.controls[be]&&this.controls[be]._registerOnCollectionChange(()=>{}),this.controls.splice(be,1),N&&(this.controls.splice(be,0,N),this._registerControl(N)),this.updateValueAndValidity({emitEvent:Z.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(K,N={}){Ke(this,0,K),K.forEach((Z,be)=>{Ce(this,!1,be),this.at(be).setValue(Z,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N)}patchValue(K,N={}){null!=K&&(K.forEach((Z,be)=>{this.at(be)&&this.at(be).patchValue(Z,{onlySelf:!0,emitEvent:N.emitEvent})}),this.updateValueAndValidity(N))}reset(K=[],N={}){this._forEachChild((Z,be)=>{Z.reset(K[be],{onlySelf:!0,emitEvent:N.emitEvent})}),this._updatePristine(N),this._updateTouched(N),this.updateValueAndValidity(N)}getRawValue(){return this.controls.map(K=>K.getRawValue())}clear(K={}){this.controls.length<1||(this._forEachChild(N=>N._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:K.emitEvent}))}_adjustIndex(K){return K<0?K+this.length:K}_syncPendingControls(){let K=this.controls.reduce((N,Z)=>!!Z._syncPendingControls()||N,!1);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){this.controls.forEach((N,Z)=>{K(N,Z)})}_updateValue(){this.value=this.controls.filter(K=>K.enabled||this.disabled).map(K=>K.value)}_anyControls(K){return this.controls.some(N=>N.enabled&&K(N))}_setUpControls(){this._forEachChild(K=>this._registerControl(K))}_allControlsDisabled(){for(const K of this.controls)if(K.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(K){K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)}_find(K){return this.at(K)??null}}function Zr(G){return!!G&&(void 0!==G.asyncValidators||void 0!==G.validators||void 0!==G.updateOn)}let co=(()=>{class G{constructor(){this.useNonNullable=!1}get nonNullable(){const N=new G;return N.useNonNullable=!0,N}group(N,Z=null){const be=this._reduceControls(N);let fn={};return Zr(Z)?fn=Z:null!==Z&&(fn.validators=Z.validator,fn.asyncValidators=Z.asyncValidator),new pe(be,fn)}record(N,Z=null){const be=this._reduceControls(N);return new me(be,Z)}control(N,Z,be){let fn={};return this.useNonNullable?(Zr(Z)?fn=Z:(fn.validators=Z,fn.asyncValidators=be),new ui(N,{...fn,nonNullable:!0})):new ui(N,Z,be)}array(N,Z,be){const fn=N.map(Xn=>this._createControl(Xn));return new gr(fn,Z,be)}_reduceControls(N){const Z={};return Object.keys(N).forEach(be=>{Z[be]=this._createControl(N[be])}),Z}_createControl(N){return N instanceof ui||N instanceof Pt?N:Array.isArray(N)?this.control(N[0],N.length>1?N[1]:null,N.length>2?N[2]:null):this.control(N)}static#e=this.\u0275fac=function(Z){return new(Z||G)};static#t=this.\u0275prov=_.jDH({token:G,factory:G.\u0275fac,providedIn:"root"})}return G})(),wo=(()=>{class G{static withConfig(N){return{ngModule:G,providers:[{provide:Vt,useValue:N.callSetDisabledState??En}]}}static#e=this.\u0275fac=function(Z){return new(Z||G)};static#t=this.\u0275mod=_.$C({type:G});static#n=this.\u0275inj=_.G2t({imports:[Ti]})}return G})(),Fi=(()=>{class G{static withConfig(N){return{ngModule:G,providers:[{provide:Er,useValue:N.warnOnNgModelWithFormControl??"always"},{provide:Vt,useValue:N.callSetDisabledState??En}]}}static#e=this.\u0275fac=function(Z){return new(Z||G)};static#t=this.\u0275mod=_.$C({type:G});static#n=this.\u0275inj=_.G2t({imports:[Ti]})}return G})()},345:(rn,ze,k)=>{k.d(ze,{B7:()=>Ne,Bb:()=>Cn,hE:()=>St,sG:()=>wn});var _=k(4438),T=k(177);class R extends T.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class E extends R{static makeCurrent(){(0,T.ZD)(new E)}onAndCancel(we,Ce,Ke){return we.addEventListener(Ce,Ke),()=>{we.removeEventListener(Ce,Ke)}}dispatchEvent(we,Ce){we.dispatchEvent(Ce)}remove(we){we.parentNode&&we.parentNode.removeChild(we)}createElement(we,Ce){return(Ce=Ce||this.getDefaultDocument()).createElement(we)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(we){return we.nodeType===Node.ELEMENT_NODE}isShadowRoot(we){return we instanceof DocumentFragment}getGlobalEventTarget(we,Ce){return"window"===Ce?window:"document"===Ce?we:"body"===Ce?we.body:null}getBaseHref(we){const Ce=function Ae(){return ie=ie||document.querySelector("base"),ie?ie.getAttribute("href"):null}();return null==Ce?null:function ge(ke){return new URL(ke,document.baseURI).pathname}(Ce)}resetBaseElement(){ie=null}getUserAgent(){return window.navigator.userAgent}getCookie(we){return(0,T._b)(document.cookie,we)}}let ie=null,Be=(()=>{class ke{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Ke){return new(Ke||ke)};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac})}return ke})();const Ee=new _.nKC("");let _e=(()=>{class ke{constructor(Ce,Ke){this._zone=Ke,this._eventNameToPlugin=new Map,Ce.forEach(Pt=>{Pt.manager=this}),this._plugins=Ce.slice().reverse()}addEventListener(Ce,Ke,Pt){return this._findPluginFor(Ke).addEventListener(Ce,Ke,Pt)}getZone(){return this._zone}_findPluginFor(Ce){let Ke=this._eventNameToPlugin.get(Ce);if(Ke)return Ke;if(Ke=this._plugins.find(pe=>pe.supports(Ce)),!Ke)throw new _.wOt(5101,!1);return this._eventNameToPlugin.set(Ce,Ke),Ke}static#e=this.\u0275fac=function(Ke){return new(Ke||ke)(_.KVO(Ee),_.KVO(_.SKi))};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac})}return ke})();class Ge{constructor(we){this._doc=we}}const lt="ng-app-id";let rt=(()=>{class ke{constructor(Ce,Ke,Pt,pe={}){this.doc=Ce,this.appId=Ke,this.nonce=Pt,this.platformId=pe,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,T.Vy)(pe),this.resetHostNodes()}addStyles(Ce){for(const Ke of Ce)1===this.changeUsageCount(Ke,1)&&this.onStyleAdded(Ke)}removeStyles(Ce){for(const Ke of Ce)this.changeUsageCount(Ke,-1)<=0&&this.onStyleRemoved(Ke)}ngOnDestroy(){const Ce=this.styleNodesInDOM;Ce&&(Ce.forEach(Ke=>Ke.remove()),Ce.clear());for(const Ke of this.getAllStyles())this.onStyleRemoved(Ke);this.resetHostNodes()}addHost(Ce){this.hostNodes.add(Ce);for(const Ke of this.getAllStyles())this.addStyleToHost(Ce,Ke)}removeHost(Ce){this.hostNodes.delete(Ce)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Ce){for(const Ke of this.hostNodes)this.addStyleToHost(Ke,Ce)}onStyleRemoved(Ce){const Ke=this.styleRef;Ke.get(Ce)?.elements?.forEach(Pt=>Pt.remove()),Ke.delete(Ce)}collectServerRenderedStyles(){const Ce=this.doc.head?.querySelectorAll(`style[${lt}="${this.appId}"]`);if(Ce?.length){const Ke=new Map;return Ce.forEach(Pt=>{null!=Pt.textContent&&Ke.set(Pt.textContent,Pt)}),Ke}return null}changeUsageCount(Ce,Ke){const Pt=this.styleRef;if(Pt.has(Ce)){const pe=Pt.get(Ce);return pe.usage+=Ke,pe.usage}return Pt.set(Ce,{usage:Ke,elements:[]}),Ke}getStyleElement(Ce,Ke){const Pt=this.styleNodesInDOM,pe=Pt?.get(Ke);if(pe?.parentNode===Ce)return Pt.delete(Ke),pe.removeAttribute(lt),pe;{const q=this.doc.createElement("style");return this.nonce&&q.setAttribute("nonce",this.nonce),q.textContent=Ke,this.platformIsServer&&q.setAttribute(lt,this.appId),Ce.appendChild(q),q}}addStyleToHost(Ce,Ke){const Pt=this.getStyleElement(Ce,Ke),pe=this.styleRef,q=pe.get(Ke)?.elements;q?q.push(Pt):pe.set(Ke,{elements:[Pt],usage:1})}resetHostNodes(){const Ce=this.hostNodes;Ce.clear(),Ce.add(this.doc.head)}static#e=this.\u0275fac=function(Ke){return new(Ke||ke)(_.KVO(T.qQ),_.KVO(_.sZ2),_.KVO(_.BIS,8),_.KVO(_.Agw))};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac})}return ke})();const De={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},st=/%COMP%/g,oe=new _.nKC("",{providedIn:"root",factory:()=>!0});function je(ke,we){return we.map(Ce=>Ce.replace(st,ke))}let Ne=(()=>{class ke{constructor(Ce,Ke,Pt,pe,q,J,se,me=null){this.eventManager=Ce,this.sharedStylesHost=Ke,this.appId=Pt,this.removeStylesOnCompDestroy=pe,this.doc=q,this.platformId=J,this.ngZone=se,this.nonce=me,this.rendererByCompId=new Map,this.platformIsServer=(0,T.Vy)(J),this.defaultRenderer=new Ct(Ce,q,se,this.platformIsServer)}createRenderer(Ce,Ke){if(!Ce||!Ke)return this.defaultRenderer;this.platformIsServer&&Ke.encapsulation===_.gXe.ShadowDom&&(Ke={...Ke,encapsulation:_.gXe.Emulated});const Pt=this.getOrCreateRenderer(Ce,Ke);return Pt instanceof Ht?Pt.applyToHost(Ce):Pt instanceof ln&&Pt.applyStyles(),Pt}getOrCreateRenderer(Ce,Ke){const Pt=this.rendererByCompId;let pe=Pt.get(Ke.id);if(!pe){const q=this.doc,J=this.ngZone,se=this.eventManager,me=this.sharedStylesHost,wt=this.removeStylesOnCompDestroy,Vt=this.platformIsServer;switch(Ke.encapsulation){case _.gXe.Emulated:pe=new Ht(se,me,Ke,this.appId,wt,q,J,Vt);break;case _.gXe.ShadowDom:return new Ut(se,me,Ce,Ke,q,J,this.nonce,Vt);default:pe=new ln(se,me,Ke,wt,q,J,Vt)}Pt.set(Ke.id,pe)}return pe}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Ke){return new(Ke||ke)(_.KVO(_e),_.KVO(rt),_.KVO(_.sZ2),_.KVO(oe),_.KVO(T.qQ),_.KVO(_.Agw),_.KVO(_.SKi),_.KVO(_.BIS))};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac})}return ke})();class Ct{constructor(we,Ce,Ke,Pt){this.eventManager=we,this.doc=Ce,this.ngZone=Ke,this.platformIsServer=Pt,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(we,Ce){return Ce?this.doc.createElementNS(De[Ce]||Ce,we):this.doc.createElement(we)}createComment(we){return this.doc.createComment(we)}createText(we){return this.doc.createTextNode(we)}appendChild(we,Ce){(Lt(we)?we.content:we).appendChild(Ce)}insertBefore(we,Ce,Ke){we&&(Lt(we)?we.content:we).insertBefore(Ce,Ke)}removeChild(we,Ce){we&&we.removeChild(Ce)}selectRootElement(we,Ce){let Ke="string"==typeof we?this.doc.querySelector(we):we;if(!Ke)throw new _.wOt(-5104,!1);return Ce||(Ke.textContent=""),Ke}parentNode(we){return we.parentNode}nextSibling(we){return we.nextSibling}setAttribute(we,Ce,Ke,Pt){if(Pt){Ce=Pt+":"+Ce;const pe=De[Pt];pe?we.setAttributeNS(pe,Ce,Ke):we.setAttribute(Ce,Ke)}else we.setAttribute(Ce,Ke)}removeAttribute(we,Ce,Ke){if(Ke){const Pt=De[Ke];Pt?we.removeAttributeNS(Pt,Ce):we.removeAttribute(`${Ke}:${Ce}`)}else we.removeAttribute(Ce)}addClass(we,Ce){we.classList.add(Ce)}removeClass(we,Ce){we.classList.remove(Ce)}setStyle(we,Ce,Ke,Pt){Pt&(_.czy.DashCase|_.czy.Important)?we.style.setProperty(Ce,Ke,Pt&_.czy.Important?"important":""):we.style[Ce]=Ke}removeStyle(we,Ce,Ke){Ke&_.czy.DashCase?we.style.removeProperty(Ce):we.style[Ce]=""}setProperty(we,Ce,Ke){null!=we&&(we[Ce]=Ke)}setValue(we,Ce){we.nodeValue=Ce}listen(we,Ce,Ke){if("string"==typeof we&&!(we=(0,T.QT)().getGlobalEventTarget(this.doc,we)))throw new Error(`Unsupported event target ${we} for event ${Ce}`);return this.eventManager.addEventListener(we,Ce,this.decoratePreventDefault(Ke))}decoratePreventDefault(we){return Ce=>{if("__ngUnwrap__"===Ce)return we;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>we(Ce)):we(Ce))&&Ce.preventDefault()}}}function Lt(ke){return"TEMPLATE"===ke.tagName&&void 0!==ke.content}class Ut extends Ct{constructor(we,Ce,Ke,Pt,pe,q,J,se){super(we,pe,q,se),this.sharedStylesHost=Ce,this.hostEl=Ke,this.shadowRoot=Ke.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const me=je(Pt.id,Pt.styles);for(const wt of me){const Vt=document.createElement("style");J&&Vt.setAttribute("nonce",J),Vt.textContent=wt,this.shadowRoot.appendChild(Vt)}}nodeOrShadowRoot(we){return we===this.hostEl?this.shadowRoot:we}appendChild(we,Ce){return super.appendChild(this.nodeOrShadowRoot(we),Ce)}insertBefore(we,Ce,Ke){return super.insertBefore(this.nodeOrShadowRoot(we),Ce,Ke)}removeChild(we,Ce){return super.removeChild(this.nodeOrShadowRoot(we),Ce)}parentNode(we){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(we)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ln extends Ct{constructor(we,Ce,Ke,Pt,pe,q,J,se){super(we,pe,q,J),this.sharedStylesHost=Ce,this.removeStylesOnCompDestroy=Pt,this.styles=se?je(se,Ke.styles):Ke.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Ht extends ln{constructor(we,Ce,Ke,Pt,pe,q,J,se){const me=Pt+"-"+Ke.id;super(we,Ce,Ke,pe,q,J,se,me),this.contentAttr=function le(ke){return"_ngcontent-%COMP%".replace(st,ke)}(me),this.hostAttr=function ee(ke){return"_nghost-%COMP%".replace(st,ke)}(me)}applyToHost(we){this.applyStyles(),this.setAttribute(we,this.hostAttr,"")}createElement(we,Ce){const Ke=super.createElement(we,Ce);return super.setAttribute(Ke,this.contentAttr,""),Ke}}let en=(()=>{class ke extends Ge{constructor(Ce){super(Ce)}supports(Ce){return!0}addEventListener(Ce,Ke,Pt){return Ce.addEventListener(Ke,Pt,!1),()=>this.removeEventListener(Ce,Ke,Pt)}removeEventListener(Ce,Ke,Pt){return Ce.removeEventListener(Ke,Pt)}static#e=this.\u0275fac=function(Ke){return new(Ke||ke)(_.KVO(T.qQ))};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac})}return ke})();const vt=["alt","control","meta","shift"],yn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xe={alt:ke=>ke.altKey,control:ke=>ke.ctrlKey,meta:ke=>ke.metaKey,shift:ke=>ke.shiftKey};let qe=(()=>{class ke extends Ge{constructor(Ce){super(Ce)}supports(Ce){return null!=ke.parseEventName(Ce)}addEventListener(Ce,Ke,Pt){const pe=ke.parseEventName(Ke),q=ke.eventCallback(pe.fullKey,Pt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.QT)().onAndCancel(Ce,pe.domEventName,q))}static parseEventName(Ce){const Ke=Ce.toLowerCase().split("."),Pt=Ke.shift();if(0===Ke.length||"keydown"!==Pt&&"keyup"!==Pt)return null;const pe=ke._normalizeKey(Ke.pop());let q="",J=Ke.indexOf("code");if(J>-1&&(Ke.splice(J,1),q="code."),vt.forEach(me=>{const wt=Ke.indexOf(me);wt>-1&&(Ke.splice(wt,1),q+=me+".")}),q+=pe,0!=Ke.length||0===pe.length)return null;const se={};return se.domEventName=Pt,se.fullKey=q,se}static matchEventFullKeyCode(Ce,Ke){let Pt=yn[Ce.key]||Ce.key,pe="";return Ke.indexOf("code.")>-1&&(Pt=Ce.code,pe="code."),!(null==Pt||!Pt)&&(Pt=Pt.toLowerCase()," "===Pt?Pt="space":"."===Pt&&(Pt="dot"),vt.forEach(q=>{q!==Pt&&(0,xe[q])(Ce)&&(pe+=q+".")}),pe+=Pt,pe===Ke)}static eventCallback(Ce,Ke,Pt){return pe=>{ke.matchEventFullKeyCode(pe,Ce)&&Pt.runGuarded(()=>Ke(pe))}}static _normalizeKey(Ce){return"esc"===Ce?"escape":Ce}static#e=this.\u0275fac=function(Ke){return new(Ke||ke)(_.KVO(T.qQ))};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac})}return ke})();const wn=(0,_.oH4)(_.fpN,"browser",[{provide:_.Agw,useValue:T.AJ},{provide:_.PLl,useValue:function Kt(){E.makeCurrent()},multi:!0},{provide:T.qQ,useFactory:function nn(){return(0,_.TL$)(document),document},deps:[]}]),An=new _.nKC(""),Ln=[{provide:_.e01,useClass:class Ve{addToWindow(we){_.JZv.getAngularTestability=(Ke,Pt=!0)=>{const pe=we.findTestabilityInTree(Ke,Pt);if(null==pe)throw new _.wOt(5103,!1);return pe},_.JZv.getAllAngularTestabilities=()=>we.getAllTestabilities(),_.JZv.getAllAngularRootElements=()=>we.getAllRootElements(),_.JZv.frameworkStabilizers||(_.JZv.frameworkStabilizers=[]),_.JZv.frameworkStabilizers.push(Ke=>{const Pt=_.JZv.getAllAngularTestabilities();let pe=Pt.length;const q=function(){pe--,0==pe&&Ke()};Pt.forEach(J=>{J.whenStable(q)})})}findTestabilityInTree(we,Ce,Ke){return null==Ce?null:we.getTestability(Ce)??(Ke?(0,T.QT)().isShadowRoot(Ce)?this.findTestabilityInTree(we,Ce.host,!0):this.findTestabilityInTree(we,Ce.parentElement,!0):null)}},deps:[]},{provide:_.WHO,useClass:_.NYb,deps:[_.SKi,_.giA,_.e01]},{provide:_.NYb,useClass:_.NYb,deps:[_.SKi,_.giA,_.e01]}],nt=[{provide:_.H8p,useValue:"root"},{provide:_.zcH,useFactory:function pn(){return new _.zcH},deps:[]},{provide:Ee,useClass:en,multi:!0,deps:[T.qQ,_.SKi,_.Agw]},{provide:Ee,useClass:qe,multi:!0,deps:[T.qQ]},Ne,rt,_e,{provide:_._9s,useExisting:Ne},{provide:T.N0,useClass:Be,deps:[]},[]];let Cn=(()=>{class ke{constructor(Ce){}static withServerTransition(Ce){return{ngModule:ke,providers:[{provide:_.sZ2,useValue:Ce.appId}]}}static#e=this.\u0275fac=function(Ke){return new(Ke||ke)(_.KVO(An,12))};static#t=this.\u0275mod=_.$C({type:ke});static#n=this.\u0275inj=_.G2t({providers:[...nt,...Ln],imports:[T.MD,_.Hbi]})}return ke})(),St=(()=>{class ke{constructor(Ce){this._doc=Ce}getTitle(){return this._doc.title}setTitle(Ce){this._doc.title=Ce||""}static#e=this.\u0275fac=function(Ke){return new(Ke||ke)(_.KVO(T.qQ))};static#t=this.\u0275prov=_.jDH({token:ke,factory:ke.\u0275fac,providedIn:"root"})}return ke})()},4454:(rn,ze,k)=>{k.d(ze,{nX:()=>oi,Ix:()=>Kr,Wk:()=>$o,iI:()=>ja,n3:()=>ts});var _=k(467),T=k(4438),R=k(1985),E=k(8071),Ae=k(8455),ge=k(7673),Ve=k(4412),Be=k(3073),Ee=k(3669),_e=k(6450),Ge=k(9326),lt=k(8496),rt=k(4360),De=k(5225);function st(...v){const M=(0,Ge.lI)(v),w=(0,Ge.ms)(v),{args:O,keys:j}=(0,Be.D)(v);if(0===O.length)return(0,Ae.H)([],M);const te=new R.c(function it(v,M,w=Ee.D){return O=>{et(M,()=>{const{length:j}=v,te=new Array(j);let Te=j,Tt=j;for(let ft=0;ft<j;ft++)et(M,()=>{const mn=(0,Ae.H)(v[ft],M);let Jn=!1;mn.subscribe((0,rt._)(O,lr=>{te[ft]=lr,Jn||(Jn=!0,Tt--),Tt||O.next(w(te.slice()))},()=>{--Te||O.complete()}))},O)},O)}}(O,M,j?Te=>(0,lt.e)(j,Te):Ee.D));return w?te.pipe((0,_e.I)(w)):te}function et(v,M,w){v?(0,De.N)(w,v,M):M()}var Dt=k(9350),bt=k(8793),oe=k(8750);function le(v){return new R.c(M=>{(0,oe.Tg)(v()).subscribe(M)})}var ee=k(1203);function je(v,M){const w=(0,E.T)(v)?v:()=>v,O=j=>j.error(w());return new R.c(M?j=>M.schedule(O,0,j):O)}var Ne=k(983),Ct=k(8359),ue=k(9974);function He(){return(0,ue.N)((v,M)=>{let w=null;v._refCount++;const O=(0,rt._)(M,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(w=null);const j=v._connection,te=w;w=null,j&&(!te||j===te)&&j.unsubscribe(),M.unsubscribe()});v.subscribe(O),O.closed||(w=v.connect())})}class Lt extends R.c{constructor(M,w){super(),this.source=M,this.subjectFactory=w,this._subject=null,this._refCount=0,this._connection=null,(0,ue.S)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,M?.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new Ct.yU;const w=this.getSubject();M.add(this.source.subscribe((0,rt._)(w,void 0,()=>{this._teardown(),w.complete()},O=>{this._teardown(),w.error(O)},()=>this._teardown()))),M.closed&&(this._connection=null,M=Ct.yU.EMPTY)}return M}refCount(){return He()(this)}}var Ut=k(1413),ln=k(177),Ht=k(6354),en=k(5558),vt=k(6697),yn=k(9172),xe=k(5964),qe=k(1397),dt=k(1594),_t=k(274),Et=k(8141),Ye=k(9437),Kt=k(2816),pn=k(9901);function nn(v){return v<=0?()=>Ne.w:(0,ue.N)((M,w)=>{let O=[];M.subscribe((0,rt._)(w,j=>{O.push(j),v<O.length&&O.shift()},()=>{for(const j of O)w.next(j);w.complete()},void 0,()=>{O=null}))})}var sn=k(3774),Ln=k(980),nt=k(5343),Gn=k(6365),rr=k(345);const St="primary",mt=Symbol("RouteTitle");class ti{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const w=this.params[M];return Array.isArray(w)?w[0]:w}return null}getAll(M){if(this.has(M)){const w=this.params[M];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function Nt(v){return new ti(v)}function Ze(v,M,w){const O=w.path.split("/");if(O.length>v.length||"full"===w.pathMatch&&(M.hasChildren()||O.length<v.length))return null;const j={};for(let te=0;te<O.length;te++){const Te=O[te],Tt=v[te];if(Te.startsWith(":"))j[Te.substring(1)]=Tt;else if(Te!==Tt.path)return null}return{consumed:v.slice(0,O.length),posParams:j}}function Qn(v,M){const w=v?Zn(v):void 0,O=M?Zn(M):void 0;if(!w||!O||w.length!=O.length)return!1;let j;for(let te=0;te<w.length;te++)if(j=w[te],!bn(v[j],M[j]))return!1;return!0}function Zn(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}function bn(v,M){if(Array.isArray(v)&&Array.isArray(M)){if(v.length!==M.length)return!1;const w=[...v].sort(),O=[...M].sort();return w.every((j,te)=>O[te]===j)}return v===M}function Pn(v){return v.length>0?v[v.length-1]:null}function kr(v){return function ie(v){return!!v&&(v instanceof R.c||(0,E.T)(v.lift)&&(0,E.T)(v.subscribe))}(v)?v:(0,T.jNT)(v)?(0,Ae.H)(Promise.resolve(v)):(0,ge.of)(v)}const qr={exact:function hs(v,M,w){if(!On(v.segments,M.segments)||!Un(v.segments,M.segments,w)||v.numberOfChildren!==M.numberOfChildren)return!1;for(const O in M.children)if(!v.children[O]||!hs(v.children[O],M.children[O],w))return!1;return!0},subset:Ui},Hr={exact:function Rr(v,M){return Qn(v,M)},subset:function xn(v,M){return Object.keys(M).length<=Object.keys(v).length&&Object.keys(M).every(w=>bn(v[w],M[w]))},ignored:()=>!0};function Li(v,M,w){return qr[w.paths](v.root,M.root,w.matrixParams)&&Hr[w.queryParams](v.queryParams,M.queryParams)&&!("exact"===w.fragment&&v.fragment!==M.fragment)}function Ui(v,M,w){return zt(v,M,M.segments,w)}function zt(v,M,w,O){if(v.segments.length>w.length){const j=v.segments.slice(0,w.length);return!(!On(j,w)||M.hasChildren()||!Un(j,w,O))}if(v.segments.length===w.length){if(!On(v.segments,w)||!Un(v.segments,w,O))return!1;for(const j in M.children)if(!v.children[j]||!Ui(v.children[j],M.children[j],O))return!1;return!0}{const j=w.slice(0,v.segments.length),te=w.slice(v.segments.length);return!!(On(v.segments,j)&&Un(v.segments,j,O)&&v.children[St])&&zt(v.children[St],M,te,O)}}function Un(v,M,w){return M.every((O,j)=>Hr[w](v[j].parameters,O.parameters))}class Or{constructor(M=new Jt([],{}),w={},O=null){this.root=M,this.queryParams=w,this.fragment=O}get queryParamMap(){return this._queryParamMap??=Nt(this.queryParams),this._queryParamMap}toString(){return Ce.serialize(this)}}class Jt{constructor(M,w){this.segments=M,this.children=w,this.parent=null,Object.values(w).forEach(O=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ke(this)}}class Zt{constructor(M,w){this.path=M,this.parameters=w}get parameterMap(){return this._parameterMap??=Nt(this.parameters),this._parameterMap}toString(){return Vt(this)}}function On(v,M){return v.length===M.length&&v.every((w,O)=>w.path===M[O].path)}let ke=(()=>{class v{static#e=this.\u0275fac=function(O){return new(O||v)};static#t=this.\u0275prov=T.jDH({token:v,factory:()=>new we,providedIn:"root"})}return v})();class we{parse(M){const w=new ir(M);return new Or(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(M){const w=`/${Pt(M.root,!0)}`,O=function Bn(v){const M=Object.entries(v).map(([w,O])=>Array.isArray(O)?O.map(j=>`${q(w)}=${q(j)}`).join("&"):`${q(w)}=${q(O)}`).filter(w=>w);return M.length?`?${M.join("&")}`:""}(M.queryParams);return`${w}${O}${"string"==typeof M.fragment?`#${function J(v){return encodeURI(v)}(M.fragment)}`:""}`}}const Ce=new we;function Ke(v){return v.segments.map(M=>Vt(M)).join("/")}function Pt(v,M){if(!v.hasChildren())return Ke(v);if(M){const w=v.children[St]?Pt(v.children[St],!1):"",O=[];return Object.entries(v.children).forEach(([j,te])=>{j!==St&&O.push(`${j}:${Pt(te,!1)}`)}),O.length>0?`${w}(${O.join("//")})`:w}{const w=function Nr(v,M){let w=[];return Object.entries(v.children).forEach(([O,j])=>{O===St&&(w=w.concat(M(j,O)))}),Object.entries(v.children).forEach(([O,j])=>{O!==St&&(w=w.concat(M(j,O)))}),w}(v,(O,j)=>j===St?[Pt(v.children[St],!1)]:[`${j}:${Pt(O,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[St]?`${Ke(v)}/${w[0]}`:`${Ke(v)}/(${w.join("//")})`}}function pe(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function q(v){return pe(v).replace(/%3B/gi,";")}function se(v){return pe(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function me(v){return decodeURIComponent(v)}function wt(v){return me(v.replace(/\+/g,"%20"))}function Vt(v){return`${se(v.path)}${function En(v){return Object.entries(v).map(([M,w])=>`;${se(M)}=${se(w)}`).join("")}(v.parameters)}`}const zn=/^[^\/()?;#]+/;function Mn(v){const M=v.match(zn);return M?M[0]:""}const Wt=/^[^\/()?;=#]+/,Gr=/^[^=?&#]+/,Ms=/^[^&#]+/;class ir{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Jt([],{}):new Jt([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(M.length>0||Object.keys(w).length>0)&&(O[St]=new Jt(M,w)),O}parseSegment(){const M=Mn(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new T.wOt(4009,!1);return this.capture(M),new Zt(me(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const w=function Re(v){const M=v.match(Wt);return M?M[0]:""}(this.remaining);if(!w)return;this.capture(w);let O="";if(this.consumeOptional("=")){const j=Mn(this.remaining);j&&(O=j,this.capture(O))}M[me(w)]=me(O)}parseQueryParam(M){const w=function Yr(v){const M=v.match(Gr);return M?M[0]:""}(this.remaining);if(!w)return;this.capture(w);let O="";if(this.consumeOptional("=")){const Te=function cs(v){const M=v.match(Ms);return M?M[0]:""}(this.remaining);Te&&(O=Te,this.capture(O))}const j=wt(w),te=wt(O);if(M.hasOwnProperty(j)){let Te=M[j];Array.isArray(Te)||(Te=[Te],M[j]=Te),Te.push(te)}else M[j]=te}parseParens(M){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=Mn(this.remaining),j=this.remaining[O.length];if("/"!==j&&")"!==j&&";"!==j)throw new T.wOt(4010,!1);let te;O.indexOf(":")>-1?(te=O.slice(0,O.indexOf(":")),this.capture(te),this.capture(":")):M&&(te=St);const Te=this.parseChildren();w[te]=1===Object.keys(Te).length?Te[St]:new Jt([],Te),this.consumeOptional("//")}return w}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new T.wOt(4011,!1)}}function is(v){return v.segments.length>0?new Jt([],{[St]:v}):v}function Gi(v){const M={};for(const[O,j]of Object.entries(v.children)){const te=Gi(j);if(O===St&&0===te.segments.length&&te.hasChildren())for(const[Te,Tt]of Object.entries(te.children))M[Te]=Tt;else(te.segments.length>0||te.hasChildren())&&(M[O]=te)}return function ri(v){if(1===v.numberOfChildren&&v.children[St]){const M=v.children[St];return new Jt(v.segments.concat(M.segments),M.children)}return v}(new Jt(v.segments,M))}function yt(v){return v instanceof Or}function kt(v){let M;const j=is(function w(te){const Te={};for(const ft of te.children){const mn=w(ft);Te[ft.outlet]=mn}const Tt=new Jt(te.url,Te);return te===v&&(M=Tt),Tt}(v.root));return M??j}function cn(v,M,w,O){let j=v;for(;j.parent;)j=j.parent;if(0===M.length)return Ie(j,j,j,w,O);const te=function Xt(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new Qe(!0,0,v);let M=0,w=!1;const O=v.reduce((j,te,Te)=>{if("object"==typeof te&&null!=te){if(te.outlets){const Tt={};return Object.entries(te.outlets).forEach(([ft,mn])=>{Tt[ft]="string"==typeof mn?mn.split("/"):mn}),[...j,{outlets:Tt}]}if(te.segmentPath)return[...j,te.segmentPath]}return"string"!=typeof te?[...j,te]:0===Te?(te.split("/").forEach((Tt,ft)=>{0==ft&&"."===Tt||(0==ft&&""===Tt?w=!0:".."===Tt?M++:""!=Tt&&j.push(Tt))}),j):[...j,te]},[]);return new Qe(w,M,O)}(M);if(te.toRoot())return Ie(j,j,new Jt([],{}),w,O);const Te=function Rn(v,M,w){if(v.isAbsolute)return new jt(M,!0,0);if(!w)return new jt(M,!1,NaN);if(null===w.parent)return new jt(w,!0,0);const O=ne(v.commands[0])?0:1;return function Tn(v,M,w){let O=v,j=M,te=w;for(;te>j;){if(te-=j,O=O.parent,!O)throw new T.wOt(4005,!1);j=O.segments.length}return new jt(O,!1,j-te)}(w,w.segments.length-1+O,v.numberOfDoubleDots)}(te,j,v),Tt=Te.processChildren?_r(Te.segmentGroup,Te.index,te.commands):si(Te.segmentGroup,Te.index,te.commands);return Ie(j,Te.segmentGroup,Tt,w,O)}function ne(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function ve(v){return"object"==typeof v&&null!=v&&v.outlets}function Ie(v,M,w,O,j){let Te,te={};O&&Object.entries(O).forEach(([ft,mn])=>{te[ft]=Array.isArray(mn)?mn.map(Jn=>`${Jn}`):`${mn}`}),Te=v===M?w:ut(v,M,w);const Tt=is(Gi(Te));return new Or(Tt,te,j)}function ut(v,M,w){const O={};return Object.entries(v.children).forEach(([j,te])=>{O[j]=te===M?w:ut(te,M,w)}),new Jt(v.segments,O)}class Qe{constructor(M,w,O){if(this.isAbsolute=M,this.numberOfDoubleDots=w,this.commands=O,M&&O.length>0&&ne(O[0]))throw new T.wOt(4003,!1);const j=O.find(ve);if(j&&j!==Pn(O))throw new T.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class jt{constructor(M,w,O){this.segmentGroup=M,this.processChildren=w,this.index=O}}function si(v,M,w){if(v??=new Jt([],{}),0===v.segments.length&&v.hasChildren())return _r(v,M,w);const O=function ui(v,M,w){let O=0,j=M;const te={match:!1,pathIndex:0,commandIndex:0};for(;j<v.segments.length;){if(O>=w.length)return te;const Te=v.segments[j],Tt=w[O];if(ve(Tt))break;const ft=`${Tt}`,mn=O<w.length-1?w[O+1]:null;if(j>0&&void 0===ft)break;if(ft&&mn&&"object"==typeof mn&&void 0===mn.outlets){if(!Ir(ft,mn,Te))return te;O+=2}else{if(!Ir(ft,{},Te))return te;O++}j++}return{match:!0,pathIndex:j,commandIndex:O}}(v,M,w),j=w.slice(O.commandIndex);if(O.match&&O.pathIndex<v.segments.length){const te=new Jt(v.segments.slice(0,O.pathIndex),{});return te.children[St]=new Jt(v.segments.slice(O.pathIndex),v.children),_r(te,0,j)}return O.match&&0===j.length?new Jt(v.segments,{}):O.match&&!v.hasChildren()?Xr(v,M,w):O.match?_r(v,0,j):Xr(v,M,w)}function _r(v,M,w){if(0===w.length)return new Jt(v.segments,{});{const O=function br(v){return ve(v[0])?v[0].outlets:{[St]:v}}(w),j={};if(Object.keys(O).some(te=>te!==St)&&v.children[St]&&1===v.numberOfChildren&&0===v.children[St].segments.length){const te=_r(v.children[St],M,w);return new Jt(v.segments,te.children)}return Object.entries(O).forEach(([te,Te])=>{"string"==typeof Te&&(Te=[Te]),null!==Te&&(j[te]=si(v.children[te],M,Te))}),Object.entries(v.children).forEach(([te,Te])=>{void 0===O[te]&&(j[te]=Te)}),new Jt(v.segments,j)}}function Xr(v,M,w){const O=v.segments.slice(0,M);let j=0;for(;j<w.length;){const te=w[j];if(ve(te)){const ft=Mi(te.outlets);return new Jt(O,ft)}if(0===j&&ne(w[0])){O.push(new Zt(v.segments[M].path,yr(w[0]))),j++;continue}const Te=ve(te)?te.outlets[St]:`${te}`,Tt=j<w.length-1?w[j+1]:null;Te&&Tt&&ne(Tt)?(O.push(new Zt(Te,yr(Tt))),j+=2):(O.push(new Zt(Te,{})),j++)}return new Jt(O,{})}function Mi(v){const M={};return Object.entries(v).forEach(([w,O])=>{"string"==typeof O&&(O=[O]),null!==O&&(M[w]=Xr(new Jt([],{}),0,O))}),M}function yr(v){const M={};return Object.entries(v).forEach(([w,O])=>M[w]=`${O}`),M}function Ir(v,M,w){return v==w.path&&Qn(M,w.parameters)}const li="imperative";var tr=function(v){return v[v.NavigationStart=0]="NavigationStart",v[v.NavigationEnd=1]="NavigationEnd",v[v.NavigationCancel=2]="NavigationCancel",v[v.NavigationError=3]="NavigationError",v[v.RoutesRecognized=4]="RoutesRecognized",v[v.ResolveStart=5]="ResolveStart",v[v.ResolveEnd=6]="ResolveEnd",v[v.GuardsCheckStart=7]="GuardsCheckStart",v[v.GuardsCheckEnd=8]="GuardsCheckEnd",v[v.RouteConfigLoadStart=9]="RouteConfigLoadStart",v[v.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",v[v.ChildActivationStart=11]="ChildActivationStart",v[v.ChildActivationEnd=12]="ChildActivationEnd",v[v.ActivationStart=13]="ActivationStart",v[v.ActivationEnd=14]="ActivationEnd",v[v.Scroll=15]="Scroll",v[v.NavigationSkipped=16]="NavigationSkipped",v}(tr||{});class Fr{constructor(M,w){this.id=M,this.url=w}}class di extends Fr{constructor(M,w,O="imperative",j=null){super(M,w),this.type=tr.NavigationStart,this.navigationTrigger=O,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ei extends Fr{constructor(M,w,O){super(M,w),this.urlAfterRedirects=O,this.type=tr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Ii=function(v){return v[v.Redirect=0]="Redirect",v[v.SupersededByNewNavigation=1]="SupersededByNewNavigation",v[v.NoDataFromResolver=2]="NoDataFromResolver",v[v.GuardRejected=3]="GuardRejected",v}(Ii||{}),Nn=function(v){return v[v.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",v[v.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",v}(Nn||{});class ar extends Fr{constructor(M,w,O,j){super(M,w),this.reason=O,this.code=j,this.type=tr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Fo extends Fr{constructor(M,w,O,j){super(M,w),this.reason=O,this.code=j,this.type=tr.NavigationSkipped}}class zi extends Fr{constructor(M,w,O,j){super(M,w),this.error=O,this.target=j,this.type=tr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class oo extends Fr{constructor(M,w,O,j){super(M,w),this.urlAfterRedirects=O,this.state=j,this.type=tr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qo extends Fr{constructor(M,w,O,j){super(M,w),this.urlAfterRedirects=O,this.state=j,this.type=tr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ua extends Fr{constructor(M,w,O,j,te){super(M,w),this.urlAfterRedirects=O,this.state=j,this.shouldActivate=te,this.type=tr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class vo extends Fr{constructor(M,w,O,j){super(M,w),this.urlAfterRedirects=O,this.state=j,this.type=tr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nr extends Fr{constructor(M,w,O,j){super(M,w),this.urlAfterRedirects=O,this.state=j,this.type=tr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eo{constructor(M){this.route=M,this.type=tr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xs{constructor(M){this.route=M,this.type=tr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Er{constructor(M){this.snapshot=M,this.type=tr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vo{constructor(M){this.snapshot=M,this.type=tr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qs{constructor(M){this.snapshot=M,this.type=tr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class la{constructor(M){this.snapshot=M,this.type=tr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rs{constructor(M,w,O){this.routerEvent=M,this.position=w,this.anchor=O,this.type=tr.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Sr{}class Bi{constructor(M){this.url=M}}class vr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new fs,this.attachRef=null}}let fs=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(w,O){const j=this.getOrCreateContext(w);j.outlet=O,this.contexts.set(w,j)}onChildOutletDestroyed(w){const O=this.getContext(w);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let O=this.getContext(w);return O||(O=new vr,this.contexts.set(w,O)),O}getContext(w){return this.contexts.get(w)||null}static#e=this.\u0275fac=function(O){return new(O||v)};static#t=this.\u0275prov=T.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();class Xs{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const w=this.pathFromRoot(M);return w.length>1?w[w.length-2]:null}children(M){const w=Jr(M,this._root);return w?w.children.map(O=>O.value):[]}firstChild(M){const w=Jr(M,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(M){const w=Lo(M,this._root);return w.length<2?[]:w[w.length-2].children.map(j=>j.value).filter(j=>j!==M)}pathFromRoot(M){return Lo(M,this._root).map(w=>w.value)}}function Jr(v,M){if(v===M.value)return M;for(const w of M.children){const O=Jr(v,w);if(O)return O}return null}function Lo(v,M){if(v===M.value)return[M];for(const w of M.children){const O=Lo(v,w);if(O.length)return O.unshift(M),O}return[]}class hi{constructor(M,w){this.value=M,this.children=w}toString(){return`TreeNode(${this.value})`}}function zr(v){const M={};return v&&v.children.forEach(w=>M[w.value.outlet]=w),M}class ni extends Xs{constructor(M,w){super(M),this.snapshot=w,Ys(this,M)}toString(){return this.snapshot.toString()}}function ss(v){const M=function hn(v){const te=new ks([],{},{},"",{},St,v,null,{});return new gs("",new hi(te,[]))}(v),w=new Ve.t([new Zt("",{})]),O=new Ve.t({}),j=new Ve.t({}),te=new Ve.t({}),Te=new Ve.t(""),Tt=new oi(w,O,te,Te,j,St,v,M.root);return Tt.snapshot=M.root,new ni(new hi(Tt,[]),M)}class oi{constructor(M,w,O,j,te,Te,Tt,ft){this.urlSubject=M,this.paramsSubject=w,this.queryParamsSubject=O,this.fragmentSubject=j,this.dataSubject=te,this.outlet=Te,this.component=Tt,this._futureSnapshot=ft,this.title=this.dataSubject?.pipe((0,Ht.T)(mn=>mn[mt]))??(0,ge.of)(void 0),this.url=M,this.params=w,this.queryParams=O,this.fragment=j,this.data=te}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Ht.T)(M=>Nt(M))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Ht.T)(M=>Nt(M))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ps(v,M,w="emptyOnly"){let O;const{routeConfig:j}=v;return O=null===M||"always"!==w&&""!==j?.path&&(M.component||M.routeConfig?.loadComponent)?{params:{...v.params},data:{...v.data},resolve:{...v.data,...v._resolvedData??{}}}:{params:{...M.params,...v.params},data:{...M.data,...v.data},resolve:{...v.data,...M.data,...j?.data,...v._resolvedData}},j&&ji(j)&&(O.resolve[mt]=j.title),O}class ks{get title(){return this.data?.[mt]}constructor(M,w,O,j,te,Te,Tt,ft,mn){this.url=M,this.params=w,this.queryParams=O,this.fragment=j,this.data=te,this.outlet=Te,this.component=Tt,this.routeConfig=ft,this._resolve=mn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Nt(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Nt(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gs extends Xs{constructor(M,w){super(w),this.url=M,Ys(this,w)}toString(){return Ri(this._root)}}function Ys(v,M){M.value._routerState=v,M.children.forEach(w=>Ys(v,w))}function Ri(v){const M=v.children.length>0?` { ${v.children.map(Ri).join(", ")} } `:"";return`${v.value}${M}`}function es(v){if(v.snapshot){const M=v.snapshot,w=v._futureSnapshot;v.snapshot=w,Qn(M.queryParams,w.queryParams)||v.queryParamsSubject.next(w.queryParams),M.fragment!==w.fragment&&v.fragmentSubject.next(w.fragment),Qn(M.params,w.params)||v.paramsSubject.next(w.params),function Rt(v,M){if(v.length!==M.length)return!1;for(let w=0;w<v.length;++w)if(!Qn(v[w],M[w]))return!1;return!0}(M.url,w.url)||v.urlSubject.next(w.url),Qn(M.data,w.data)||v.dataSubject.next(w.data)}else v.snapshot=v._futureSnapshot,v.dataSubject.next(v._futureSnapshot.data)}function Wi(v,M){const w=Qn(v.params,M.params)&&function Qr(v,M){return On(v,M)&&v.every((w,O)=>Qn(w.parameters,M[O].parameters))}(v.url,M.url);return w&&!(!v.parent!=!M.parent)&&(!v.parent||Wi(v.parent,M.parent))}function ji(v){return"string"==typeof v.title||null===v.title}let ts=(()=>{class v{constructor(){this.activated=null,this._activatedRoute=null,this.name=St,this.activateEvents=new T.bkB,this.deactivateEvents=new T.bkB,this.attachEvents=new T.bkB,this.detachEvents=new T.bkB,this.parentContexts=(0,T.WQX)(fs),this.location=(0,T.WQX)(T.c1b),this.changeDetector=(0,T.WQX)(T.gRc),this.environmentInjector=(0,T.WQX)(T.uvJ),this.inputBinder=(0,T.WQX)($i,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(w){if(w.name){const{firstChange:O,previousValue:j}=w.name;if(O)return;this.isTrackedInParentContexts(j)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(j)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(w){return this.parentContexts.getContext(w)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const w=this.parentContexts.getContext(this.name);w?.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T.wOt(4012,!1);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,O){this.activated=w,this._activatedRoute=O,this.location.insert(w.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,O){if(this.isActivated)throw new T.wOt(4013,!1);this._activatedRoute=w;const j=this.location,Te=w.snapshot.component,Tt=this.parentContexts.getOrCreateContext(this.name).children,ft=new Fs(w,Tt,j.injector);this.activated=j.createComponent(Te,{index:j.length,injector:ft,environmentInjector:O??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(O){return new(O||v)};static#t=this.\u0275dir=T.FsC({type:v,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[T.OA$]})}return v})();class Fs{__ngOutletInjector(M){return new Fs(this.route,this.childContexts,M)}constructor(M,w,O){this.route=M,this.childContexts=w,this.parent=O}get(M,w){return M===oi?this.route:M===fs?this.childContexts:this.parent.get(M,w)}}const $i=new T.nKC("");let Uo=(()=>{class v{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(w){this.unsubscribeFromRouteData(w),this.subscribeToRouteData(w)}unsubscribeFromRouteData(w){this.outletDataSubscriptions.get(w)?.unsubscribe(),this.outletDataSubscriptions.delete(w)}subscribeToRouteData(w){const{activatedRoute:O}=w,j=st([O.queryParams,O.params,O.data]).pipe((0,en.n)(([te,Te,Tt],ft)=>(Tt={...te,...Te,...Tt},0===ft?(0,ge.of)(Tt):Promise.resolve(Tt)))).subscribe(te=>{if(!w.isActivated||!w.activatedComponentRef||w.activatedRoute!==O||null===O.component)return void this.unsubscribeFromRouteData(w);const Te=(0,T.HJs)(O.component);if(Te)for(const{templateName:Tt}of Te.inputs)w.activatedComponentRef.setInput(Tt,te[Tt]);else this.unsubscribeFromRouteData(w)});this.outletDataSubscriptions.set(w,j)}static#e=this.\u0275fac=function(O){return new(O||v)};static#t=this.\u0275prov=T.jDH({token:v,factory:v.\u0275fac})}return v})();function Oi(v,M,w){if(w&&v.shouldReuseRoute(M.value,w.value.snapshot)){const O=w.value;O._futureSnapshot=M.value;const j=function Io(v,M,w){return M.children.map(O=>{for(const j of w.children)if(v.shouldReuseRoute(O.value,j.value.snapshot))return Oi(v,O,j);return Oi(v,O)})}(v,M,w);return new hi(O,j)}{if(v.shouldAttach(M.value)){const te=v.retrieve(M.value);if(null!==te){const Te=te.route;return Te.value._futureSnapshot=M.value,Te.children=M.children.map(Tt=>Oi(v,Tt)),Te}}const O=function ao(v){return new oi(new Ve.t(v.url),new Ve.t(v.params),new Ve.t(v.queryParams),new Ve.t(v.fragment),new Ve.t(v.data),v.outlet,v.component,v)}(M.value),j=M.children.map(te=>Oi(v,te));return new hi(O,j)}}const Hi="ngNavigationCancelingError";function ms(v,M){const{redirectTo:w,navigationBehaviorOptions:O}=yt(M)?{redirectTo:M,navigationBehaviorOptions:void 0}:M,j=Vs(!1,Ii.Redirect);return j.url=w,j.navigationBehaviorOptions=O,j}function Vs(v,M){const w=new Error(`NavigationCancelingError: ${v||""}`);return w[Hi]=!0,w.cancellationCode=M,w}function Js(v){return!!v&&v[Hi]}let Ki=(()=>{class v{static#e=this.\u0275fac=function(O){return new(O||v)};static#t=this.\u0275cmp=T.VBU({type:v,selectors:[["ng-component"]],standalone:!0,features:[T.aNF],decls:1,vars:0,template:function(O,j){1&O&&T.nrm(0,"router-outlet")},dependencies:[ts],encapsulation:2})}return v})();function co(v){const M=v.children&&v.children.map(co),w=M?{...v,children:M}:{...v};return!w.component&&!w.loadComponent&&(M||w.loadChildren)&&w.outlet&&w.outlet!==St&&(w.component=Ki),w}function sr(v){return v.outlet||St}function _s(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let M=v.parent;M;M=M.parent){const w=M.routeConfig;if(w?._loadedInjector)return w._loadedInjector;if(w?._injector)return w._injector}return null}class G{constructor(M,w,O,j,te){this.routeReuseStrategy=M,this.futureState=w,this.currState=O,this.forwardEvent=j,this.inputBindingEnabled=te}activate(M){const w=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,O,M),es(this.futureState.root),this.activateChildRoutes(w,O,M)}deactivateChildRoutes(M,w,O){const j=zr(w);M.children.forEach(te=>{const Te=te.value.outlet;this.deactivateRoutes(te,j[Te],O),delete j[Te]}),Object.values(j).forEach(te=>{this.deactivateRouteAndItsChildren(te,O)})}deactivateRoutes(M,w,O){const j=M.value,te=w?w.value:null;if(j===te)if(j.component){const Te=O.getContext(j.outlet);Te&&this.deactivateChildRoutes(M,w,Te.children)}else this.deactivateChildRoutes(M,w,O);else te&&this.deactivateRouteAndItsChildren(w,O)}deactivateRouteAndItsChildren(M,w){M.value.component&&this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,w):this.deactivateRouteAndOutlet(M,w)}detachAndStoreRouteSubtree(M,w){const O=w.getContext(M.value.outlet),j=O&&M.value.component?O.children:w,te=zr(M);for(const Te of Object.values(te))this.deactivateRouteAndItsChildren(Te,j);if(O&&O.outlet){const Te=O.outlet.detach(),Tt=O.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:Te,route:M,contexts:Tt})}}deactivateRouteAndOutlet(M,w){const O=w.getContext(M.value.outlet),j=O&&M.value.component?O.children:w,te=zr(M);for(const Te of Object.values(te))this.deactivateRouteAndItsChildren(Te,j);O&&(O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated()),O.attachRef=null,O.route=null)}activateChildRoutes(M,w,O){const j=zr(w);M.children.forEach(te=>{this.activateRoutes(te,j[te.value.outlet],O),this.forwardEvent(new la(te.value.snapshot))}),M.children.length&&this.forwardEvent(new Vo(M.value.snapshot))}activateRoutes(M,w,O){const j=M.value,te=w?w.value:null;if(es(j),j===te)if(j.component){const Te=O.getOrCreateContext(j.outlet);this.activateChildRoutes(M,w,Te.children)}else this.activateChildRoutes(M,w,O);else if(j.component){const Te=O.getOrCreateContext(j.outlet);if(this.routeReuseStrategy.shouldAttach(j.snapshot)){const Tt=this.routeReuseStrategy.retrieve(j.snapshot);this.routeReuseStrategy.store(j.snapshot,null),Te.children.onOutletReAttached(Tt.contexts),Te.attachRef=Tt.componentRef,Te.route=Tt.route.value,Te.outlet&&Te.outlet.attach(Tt.componentRef,Tt.route.value),es(Tt.route.value),this.activateChildRoutes(M,null,Te.children)}else{const Tt=_s(j.snapshot);Te.attachRef=null,Te.route=j,Te.injector=Tt,Te.outlet&&Te.outlet.activateWith(j,Te.injector),this.activateChildRoutes(M,null,Te.children)}}else this.activateChildRoutes(M,null,O)}}class K{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class N{constructor(M,w){this.component=M,this.route=w}}function Z(v,M,w){const O=v._root;return Xn(O,M?M._root:null,w,[O.value])}function fn(v,M){const w=Symbol(),O=M.get(v,w);return O===w?"function"!=typeof v||(0,T.LfX)(v)?M.get(v):v:O}function Xn(v,M,w,O,j={canDeactivateChecks:[],canActivateChecks:[]}){const te=zr(M);return v.children.forEach(Te=>{(function ys(v,M,w,O,j={canDeactivateChecks:[],canActivateChecks:[]}){const te=v.value,Te=M?M.value:null,Tt=w?w.getContext(v.value.outlet):null;if(Te&&te.routeConfig===Te.routeConfig){const ft=function Zs(v,M,w){if("function"==typeof w)return w(v,M);switch(w){case"pathParamsChange":return!On(v.url,M.url);case"pathParamsOrQueryParamsChange":return!On(v.url,M.url)||!Qn(v.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Wi(v,M)||!Qn(v.queryParams,M.queryParams);default:return!Wi(v,M)}}(Te,te,te.routeConfig.runGuardsAndResolvers);ft?j.canActivateChecks.push(new K(O)):(te.data=Te.data,te._resolvedData=Te._resolvedData),Xn(v,M,te.component?Tt?Tt.children:null:w,O,j),ft&&Tt&&Tt.outlet&&Tt.outlet.isActivated&&j.canDeactivateChecks.push(new N(Tt.outlet.component,Te))}else Te&&fi(M,Tt,j),j.canActivateChecks.push(new K(O)),Xn(v,null,te.component?Tt?Tt.children:null:w,O,j)})(Te,te[Te.value.outlet],w,O.concat([Te.value]),j),delete te[Te.value.outlet]}),Object.entries(te).forEach(([Te,Tt])=>fi(Tt,w.getContext(Te),j)),j}function fi(v,M,w){const O=zr(v),j=v.value;Object.entries(O).forEach(([te,Te])=>{fi(Te,j.component?M?M.children.getContext(te):null:M,w)}),w.canDeactivateChecks.push(new N(j.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,j))}function Ts(v){return"function"==typeof v}function Va(v){return v instanceof Dt.G||"EmptyError"===v?.name}const La=Symbol("INITIAL_VALUE");function eo(){return(0,en.n)(v=>st(v.map(M=>M.pipe((0,vt.s)(1),(0,yn.Z)(La)))).pipe((0,Ht.T)(M=>{for(const w of M)if(!0!==w){if(w===La)return La;if(!1===w||w instanceof Or)return w}return!0}),(0,xe.p)(M=>M!==La),(0,vt.s)(1)))}function ii(v){return(0,ee.F)((0,Et.M)(M=>{if(yt(M))throw ms(0,M)}),(0,Ht.T)(M=>!0===M))}class xi{constructor(M){this.segmentGroup=M||null}}class ga extends Error{constructor(M){super(),this.urlTree=M}}function vs(v){return je(new xi(v))}class Ao{constructor(M,w){this.urlSerializer=M,this.urlTree=w}lineralizeSegments(M,w){let O=[],j=w.root;for(;;){if(O=O.concat(j.segments),0===j.numberOfChildren)return(0,ge.of)(O);if(j.numberOfChildren>1||!j.children[St])return je(new T.wOt(4e3,!1));j=j.children[St]}}applyRedirectCommands(M,w,O){const j=this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),M,O);if(w.startsWith("/"))throw new ga(j);return j}applyRedirectCreateUrlTree(M,w,O,j){const te=this.createSegmentGroup(M,w.root,O,j);return new Or(te,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(M,w){const O={};return Object.entries(M).forEach(([j,te])=>{if("string"==typeof te&&te.startsWith(":")){const Tt=te.substring(1);O[j]=w[Tt]}else O[j]=te}),O}createSegmentGroup(M,w,O,j){const te=this.createSegments(M,w.segments,O,j);let Te={};return Object.entries(w.children).forEach(([Tt,ft])=>{Te[Tt]=this.createSegmentGroup(M,ft,O,j)}),new Jt(te,Te)}createSegments(M,w,O,j){return w.map(te=>te.path.startsWith(":")?this.findPosParam(M,te,j):this.findOrReturn(te,O))}findPosParam(M,w,O){const j=O[w.path.substring(1)];if(!j)throw new T.wOt(4001,!1);return j}findOrReturn(M,w){let O=0;for(const j of w){if(j.path===M.path)return w.splice(O),j;O++}return M}}const Y={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function C(v,M,w,O,j){const te=D(v,M,w);return te.matched?(O=function Ls(v,M){return v.providers&&!v._injector&&(v._injector=(0,T.Ol2)(v.providers,M,`Route: ${v.path}`)),v._injector??M}(M,O),function Ni(v,M,w,O){const j=M.canMatch;if(!j||0===j.length)return(0,ge.of)(!0);const te=j.map(Te=>{const Tt=fn(Te,v);return kr(function fa(v){return v&&Ts(v.canMatch)}(Tt)?Tt.canMatch(M,w):(0,T.N4e)(v,()=>Tt(M,w)))});return(0,ge.of)(te).pipe(eo(),ii())}(O,M,w).pipe((0,Ht.T)(Te=>!0===Te?te:{...Y}))):(0,ge.of)(te)}function D(v,M,w){if("**"===M.path)return function L(v){return{matched:!0,parameters:v.length>0?Pn(v).parameters:{},consumedSegments:v,remainingSegments:[],positionalParamSegments:{}}}(w);if(""===M.path)return"full"===M.pathMatch&&(v.hasChildren()||w.length>0)?{...Y}:{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const j=(M.matcher||Ze)(w,v,M);if(!j)return{...Y};const te={};Object.entries(j.posParams??{}).forEach(([Tt,ft])=>{te[Tt]=ft.path});const Te=j.consumed.length>0?{...te,...j.consumed[j.consumed.length-1].parameters}:te;return{matched:!0,consumedSegments:j.consumed,remainingSegments:w.slice(j.consumed.length),parameters:Te,positionalParamSegments:j.posParams??{}}}function Q(v,M,w,O){return w.length>0&&function Ue(v,M,w){return w.some(O=>Mt(v,M,O)&&sr(O)!==St)}(v,w,O)?{segmentGroup:new Jt(M,Pe(O,new Jt(w,v.children))),slicedSegments:[]}:0===w.length&&function ht(v,M,w){return w.some(O=>Mt(v,M,O))}(v,w,O)?{segmentGroup:new Jt(v.segments,he(v,w,O,v.children)),slicedSegments:w}:{segmentGroup:new Jt(v.segments,v.children),slicedSegments:w}}function he(v,M,w,O){const j={};for(const te of w)if(Mt(v,M,te)&&!O[sr(te)]){const Te=new Jt([],{});j[sr(te)]=Te}return{...O,...j}}function Pe(v,M){const w={};w[St]=M;for(const O of v)if(""===O.path&&sr(O)!==St){const j=new Jt([],{});w[sr(O)]=j}return w}function Mt(v,M,w){return(!(v.hasChildren()||M.length>0)||"full"!==w.pathMatch)&&""===w.path}class ur{}class Wn{constructor(M,w,O,j,te,Te,Tt){this.injector=M,this.configLoader=w,this.rootComponentType=O,this.config=j,this.urlTree=te,this.paramsInheritanceStrategy=Te,this.urlSerializer=Tt,this.applyRedirects=new Ao(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(M){return new T.wOt(4002,`'${M.segmentGroup}'`)}recognize(){const M=Q(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(M).pipe((0,Ht.T)(w=>{const O=new ks([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},St,this.rootComponentType,null,{}),j=new hi(O,w),te=new gs("",j),Te=function Xe(v,M,w=null,O=null){return cn(kt(v),M,w,O)}(O,[],this.urlTree.queryParams,this.urlTree.fragment);return Te.queryParams=this.urlTree.queryParams,te.url=this.urlSerializer.serialize(Te),this.inheritParamsAndData(te._root,null),{state:te,tree:Te}}))}match(M){return this.processSegmentGroup(this.injector,this.config,M,St).pipe((0,Ye.W)(O=>{if(O instanceof ga)return this.urlTree=O.urlTree,this.match(O.urlTree.root);throw O instanceof xi?this.noMatchError(O):O}))}inheritParamsAndData(M,w){const O=M.value,j=ps(O,w,this.paramsInheritanceStrategy);O.params=Object.freeze(j.params),O.data=Object.freeze(j.data),M.children.forEach(te=>this.inheritParamsAndData(te,O))}processSegmentGroup(M,w,O,j){return 0===O.segments.length&&O.hasChildren()?this.processChildren(M,w,O):this.processSegment(M,w,O,O.segments,j,!0).pipe((0,Ht.T)(te=>te instanceof hi?[te]:[]))}processChildren(M,w,O){const j=[];for(const te of Object.keys(O.children))"primary"===te?j.unshift(te):j.push(te);return(0,Ae.H)(j).pipe((0,_t.H)(te=>{const Te=O.children[te],Tt=function us(v,M){const w=v.filter(O=>sr(O)===M);return w.push(...v.filter(O=>sr(O)!==M)),w}(w,te);return this.processSegmentGroup(M,Tt,Te,te)}),(0,Kt.S)((te,Te)=>(te.push(...Te),te)),(0,pn.U)(null),function wn(v,M){const w=arguments.length>=2;return O=>O.pipe(v?(0,xe.p)((j,te)=>v(j,te,O)):Ee.D,nn(1),w?(0,pn.U)(M):(0,sn.v)(()=>new Dt.G))}(),(0,qe.Z)(te=>{if(null===te)return vs(O);const Te=pi(te);return function Vr(v){v.sort((M,w)=>M.value.outlet===St?-1:w.value.outlet===St?1:M.value.outlet.localeCompare(w.value.outlet))}(Te),(0,ge.of)(Te)}))}processSegment(M,w,O,j,te,Te){return(0,Ae.H)(w).pipe((0,_t.H)(Tt=>this.processSegmentAgainstRoute(Tt._injector??M,w,Tt,O,j,te,Te).pipe((0,Ye.W)(ft=>{if(ft instanceof xi)return(0,ge.of)(null);throw ft}))),(0,dt.$)(Tt=>!!Tt),(0,Ye.W)(Tt=>{if(Va(Tt))return function vn(v,M,w){return 0===M.length&&!v.children[w]}(O,j,te)?(0,ge.of)(new ur):vs(O);throw Tt}))}processSegmentAgainstRoute(M,w,O,j,te,Te,Tt){return function on(v,M,w,O){return!!(sr(v)===O||O!==St&&Mt(M,w,v))&&D(M,v,w).matched}(O,j,te,Te)?void 0===O.redirectTo?this.matchSegmentAgainstRoute(M,j,O,te,Te):this.allowRedirects&&Tt?this.expandSegmentAgainstRouteUsingRedirect(M,j,w,O,te,Te):vs(j):vs(j)}expandSegmentAgainstRouteUsingRedirect(M,w,O,j,te,Te){const{matched:Tt,consumedSegments:ft,positionalParamSegments:mn,remainingSegments:Jn}=D(w,j,te);if(!Tt)return vs(w);j.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const lr=this.applyRedirects.applyRedirectCommands(ft,j.redirectTo,mn);return this.applyRedirects.lineralizeSegments(j,lr).pipe((0,qe.Z)(Vi=>this.processSegment(M,O,w,Vi.concat(Jn),Te,!1)))}matchSegmentAgainstRoute(M,w,O,j,te){const Te=C(w,O,j,M);return"**"===O.path&&(w.children={}),Te.pipe((0,en.n)(Tt=>Tt.matched?this.getChildConfig(M=O._injector??M,O,j).pipe((0,en.n)(({routes:ft})=>{const mn=O._loadedInjector??M,{consumedSegments:Jn,remainingSegments:lr,parameters:Vi}=Tt,Ac=new ks(Jn,Vi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function os(v){return v.data||{}}(O),sr(O),O.component??O._loadedComponent??null,O,function uo(v){return v.resolve||{}}(O)),{segmentGroup:na,slicedSegments:fo}=Q(w,Jn,lr,ft);if(0===fo.length&&na.hasChildren())return this.processChildren(mn,ft,na).pipe((0,Ht.T)(Go=>null===Go?null:new hi(Ac,Go)));if(0===ft.length&&0===fo.length)return(0,ge.of)(new hi(Ac,[]));const $s=sr(O)===te;return this.processSegment(mn,ft,na,fo,$s?St:te,!0).pipe((0,Ht.T)(Go=>new hi(Ac,Go instanceof hi?[Go]:[])))})):vs(w)))}getChildConfig(M,w,O){return w.children?(0,ge.of)({routes:w.children,injector:M}):w.loadChildren?void 0!==w._loadedRoutes?(0,ge.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function Wr(v,M,w,O){const j=M.canLoad;if(void 0===j||0===j.length)return(0,ge.of)(!0);const te=j.map(Te=>{const Tt=fn(Te,v);return kr(function Bo(v){return v&&Ts(v.canLoad)}(Tt)?Tt.canLoad(M,w):(0,T.N4e)(v,()=>Tt(M,w)))});return(0,ge.of)(te).pipe(eo(),ii())}(M,w,O).pipe((0,qe.Z)(j=>j?this.configLoader.loadChildren(M,w).pipe((0,Et.M)(te=>{w._loadedRoutes=te.routes,w._loadedInjector=te.injector})):function Tc(v){return je(Vs(!1,Ii.GuardRejected))}())):(0,ge.of)({routes:[],injector:M})}}function Lr(v){const M=v.value.routeConfig;return M&&""===M.path}function pi(v){const M=[],w=new Set;for(const O of v){if(!Lr(O)){M.push(O);continue}const j=M.find(te=>O.value.routeConfig===te.value.routeConfig);void 0!==j?(j.children.push(...O.children),w.add(j)):M.push(O)}for(const O of w){const j=pi(O.children);M.push(new hi(O.value,j))}return M.filter(O=>!w.has(O))}function ls(v){const M=v.children.map(w=>ls(w)).flat();return[v,...M]}function ds(v){return(0,en.n)(M=>{const w=v(M);return w?(0,Ae.H)(w).pipe((0,Ht.T)(()=>M)):(0,ge.of)(M)})}let Es=(()=>{class v{buildTitle(w){let O,j=w.root;for(;void 0!==j;)O=this.getResolvedTitleForRoute(j)??O,j=j.children.find(te=>te.outlet===St);return O}getResolvedTitleForRoute(w){return w.data[mt]}static#e=this.\u0275fac=function(O){return new(O||v)};static#t=this.\u0275prov=T.jDH({token:v,factory:()=>(0,T.WQX)(Bs),providedIn:"root"})}return v})(),Bs=(()=>{class v extends Es{constructor(w){super(),this.title=w}updateTitle(w){const O=this.buildTitle(w);void 0!==O&&this.title.setTitle(O)}static#e=this.\u0275fac=function(O){return new(O||v)(T.KVO(rr.hE))};static#t=this.\u0275prov=T.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const P=new T.nKC("",{providedIn:"root",factory:()=>({})}),$=new T.nKC("");let x=(()=>{class v{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,T.WQX)(T.Ql9)}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,ge.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const O=kr(w.loadComponent()).pipe((0,Ht.T)(ot),(0,Et.M)(te=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=te}),(0,Ln.j)(()=>{this.componentLoaders.delete(w)})),j=new Lt(O,()=>new Ut.B).pipe(He());return this.componentLoaders.set(w,j),j}loadChildren(w,O){if(this.childrenLoaders.get(O))return this.childrenLoaders.get(O);if(O._loadedRoutes)return(0,ge.of)({routes:O._loadedRoutes,injector:O._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(O);const te=function B(v,M,w,O){return kr(v.loadChildren()).pipe((0,Ht.T)(ot),(0,qe.Z)(j=>j instanceof T.Co$||Array.isArray(j)?(0,ge.of)(j):(0,Ae.H)(M.compileModuleAsync(j))),(0,Ht.T)(j=>{O&&O(v);let te,Te,Tt=!1;return Array.isArray(j)?(Te=j,!0):(te=j.create(w).injector,Te=te.get($,[],{optional:!0,self:!0}).flat()),{routes:Te.map(co),injector:te}}))}(O,this.compiler,w,this.onLoadEndListener).pipe((0,Ln.j)(()=>{this.childrenLoaders.delete(O)})),Te=new Lt(te,()=>new Ut.B).pipe(He());return this.childrenLoaders.set(O,Te),Te}static#e=this.\u0275fac=function(O){return new(O||v)};static#t=this.\u0275prov=T.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function ot(v){return function ye(v){return v&&"object"==typeof v&&"default"in v}(v)?v.default:v}let xt=(()=>{class v{static#e=this.\u0275fac=function(O){return new(O||v)};static#t=this.\u0275prov=T.jDH({token:v,factory:()=>(0,T.WQX)(un),providedIn:"root"})}return v})(),un=(()=>{class v{shouldProcessUrl(w){return!0}extract(w){return w}merge(w,O){return w}static#e=this.\u0275fac=function(O){return new(O||v)};static#t=this.\u0275prov=T.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const Cr=new T.nKC(""),gn=new T.nKC("");function Ur(v,M,w){const O=v.get(gn),j=v.get(ln.qQ);return v.get(T.SKi).runOutsideAngular(()=>{if(!j.startViewTransition||O.skipNextTransition)return O.skipNextTransition=!1,new Promise(mn=>setTimeout(mn));let te;const Te=new Promise(mn=>{te=mn}),Tt=j.startViewTransition(()=>(te(),function hr(v){return new Promise(M=>{(0,T.mal)(M,{injector:v})})}(v))),{onViewTransitionCreated:ft}=O;return ft&&(0,T.N4e)(v,()=>ft({transition:Tt,from:M,to:w})),Te})}let fr=(()=>{class v{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ut.B,this.transitionAbortSubject=new Ut.B,this.configLoader=(0,T.WQX)(x),this.environmentInjector=(0,T.WQX)(T.uvJ),this.urlSerializer=(0,T.WQX)(ke),this.rootContexts=(0,T.WQX)(fs),this.location=(0,T.WQX)(ln.aZ),this.inputBindingEnabled=null!==(0,T.WQX)($i,{optional:!0}),this.titleStrategy=(0,T.WQX)(Es),this.options=(0,T.WQX)(P,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,T.WQX)(xt),this.createViewTransition=(0,T.WQX)(Cr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ge.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=j=>this.events.next(new xs(j)),this.configLoader.onLoadStartListener=j=>this.events.next(new Eo(j))}complete(){this.transitions?.complete()}handleNavigationRequest(w){const O=++this.navigationId;this.transitions?.next({...this.transitions.value,...w,id:O})}setupNavigations(w,O,j){return this.transitions=new Ve.t({id:0,currentUrlTree:O,currentRawUrl:O,extractedUrl:this.urlHandlingStrategy.extract(O),urlAfterRedirects:this.urlHandlingStrategy.extract(O),rawUrl:O,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:li,restoredState:null,currentSnapshot:j.snapshot,targetSnapshot:null,currentRouterState:j,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,xe.p)(te=>0!==te.id),(0,Ht.T)(te=>({...te,extractedUrl:this.urlHandlingStrategy.extract(te.rawUrl)})),(0,en.n)(te=>{let Te=!1,Tt=!1;return(0,ge.of)(te).pipe((0,en.n)(ft=>{if(this.navigationId>te.id)return this.cancelNavigationTransition(te,"",Ii.SupersededByNewNavigation),Ne.w;this.currentTransition=te,this.currentNavigation={id:ft.id,initialUrl:ft.rawUrl,extractedUrl:ft.extractedUrl,trigger:ft.source,extras:ft.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const mn=!w.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!mn&&"reload"!==(ft.extras.onSameUrlNavigation??w.onSameUrlNavigation)){const lr="";return this.events.next(new Fo(ft.id,this.urlSerializer.serialize(ft.rawUrl),lr,Nn.IgnoredSameUrlNavigation)),ft.resolve(null),Ne.w}if(this.urlHandlingStrategy.shouldProcessUrl(ft.rawUrl))return(0,ge.of)(ft).pipe((0,en.n)(lr=>{const Vi=this.transitions?.getValue();return this.events.next(new di(lr.id,this.urlSerializer.serialize(lr.extractedUrl),lr.source,lr.restoredState)),Vi!==this.transitions?.getValue()?Ne.w:Promise.resolve(lr)}),function Os(v,M,w,O,j,te){return(0,qe.Z)(Te=>function er(v,M,w,O,j,te,Te="emptyOnly"){return new Wn(v,M,w,O,j,Te,te).recognize()}(v,M,w,O,Te.extractedUrl,j,te).pipe((0,Ht.T)(({state:Tt,tree:ft})=>({...Te,targetSnapshot:Tt,urlAfterRedirects:ft}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,w.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Et.M)(lr=>{te.targetSnapshot=lr.targetSnapshot,te.urlAfterRedirects=lr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:lr.urlAfterRedirects};const Vi=new oo(lr.id,this.urlSerializer.serialize(lr.extractedUrl),this.urlSerializer.serialize(lr.urlAfterRedirects),lr.targetSnapshot);this.events.next(Vi)}));if(mn&&this.urlHandlingStrategy.shouldProcessUrl(ft.currentRawUrl)){const{id:lr,extractedUrl:Vi,source:Ac,restoredState:na,extras:fo}=ft,$s=new di(lr,this.urlSerializer.serialize(Vi),Ac,na);this.events.next($s);const Go=ss(this.rootComponentType).snapshot;return this.currentTransition=te={...ft,targetSnapshot:Go,urlAfterRedirects:Vi,extras:{...fo,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Vi,(0,ge.of)(te)}{const lr="";return this.events.next(new Fo(ft.id,this.urlSerializer.serialize(ft.extractedUrl),lr,Nn.IgnoredByUrlHandlingStrategy)),ft.resolve(null),Ne.w}}),(0,Et.M)(ft=>{const mn=new Qo(ft.id,this.urlSerializer.serialize(ft.extractedUrl),this.urlSerializer.serialize(ft.urlAfterRedirects),ft.targetSnapshot);this.events.next(mn)}),(0,Ht.T)(ft=>(this.currentTransition=te={...ft,guards:Z(ft.targetSnapshot,ft.currentSnapshot,this.rootContexts)},te)),function Ua(v,M){return(0,qe.Z)(w=>{const{targetSnapshot:O,currentSnapshot:j,guards:{canActivateChecks:te,canDeactivateChecks:Te}}=w;return 0===Te.length&&0===te.length?(0,ge.of)({...w,guardsResult:!0}):function pa(v,M,w,O){return(0,Ae.H)(v).pipe((0,qe.Z)(j=>function cr(v,M,w,O,j){const te=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!te||0===te.length)return(0,ge.of)(!0);const Te=te.map(Tt=>{const ft=_s(M)??j,mn=fn(Tt,ft);return kr(function Da(v){return v&&Ts(v.canDeactivate)}(mn)?mn.canDeactivate(v,M,w,O):(0,T.N4e)(ft,()=>mn(v,M,w,O))).pipe((0,dt.$)())});return(0,ge.of)(Te).pipe(eo())}(j.component,j.route,w,M,O)),(0,dt.$)(j=>!0!==j,!0))}(Te,O,j,v).pipe((0,qe.Z)(Tt=>Tt&&function Ta(v){return"boolean"==typeof v}(Tt)?function jo(v,M,w,O){return(0,Ae.H)(M).pipe((0,_t.H)(j=>(0,bt.x)(function Aa(v,M){return null!==v&&M&&M(new Er(v)),(0,ge.of)(!0)}(j.route.parent,O),function To(v,M){return null!==v&&M&&M(new Qs(v)),(0,ge.of)(!0)}(j.route,O),function Do(v,M,w){const O=M[M.length-1],te=M.slice(0,M.length-1).reverse().map(Te=>function be(v){const M=v.routeConfig?v.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:v,guards:M}:null}(Te)).filter(Te=>null!==Te).map(Te=>le(()=>{const Tt=Te.guards.map(ft=>{const mn=_s(Te.node)??w,Jn=fn(ft,mn);return kr(function ei(v){return v&&Ts(v.canActivateChild)}(Jn)?Jn.canActivateChild(O,v):(0,T.N4e)(mn,()=>Jn(O,v))).pipe((0,dt.$)())});return(0,ge.of)(Tt).pipe(eo())}));return(0,ge.of)(te).pipe(eo())}(v,j.path,w),function Jo(v,M,w){const O=M.routeConfig?M.routeConfig.canActivate:null;if(!O||0===O.length)return(0,ge.of)(!0);const j=O.map(te=>le(()=>{const Te=_s(M)??w,Tt=fn(te,Te);return kr(function ha(v){return v&&Ts(v.canActivate)}(Tt)?Tt.canActivate(M,v):(0,T.N4e)(Te,()=>Tt(M,v))).pipe((0,dt.$)())}));return(0,ge.of)(j).pipe(eo())}(v,j.route,w))),(0,dt.$)(j=>!0!==j,!0))}(O,te,v,M):(0,ge.of)(Tt)),(0,Ht.T)(Tt=>({...w,guardsResult:Tt})))})}(this.environmentInjector,ft=>this.events.next(ft)),(0,Et.M)(ft=>{if(te.guardsResult=ft.guardsResult,yt(ft.guardsResult))throw ms(0,ft.guardsResult);const mn=new ua(ft.id,this.urlSerializer.serialize(ft.extractedUrl),this.urlSerializer.serialize(ft.urlAfterRedirects),ft.targetSnapshot,!!ft.guardsResult);this.events.next(mn)}),(0,xe.p)(ft=>!!ft.guardsResult||(this.cancelNavigationTransition(ft,"",Ii.GuardRejected),!1)),ds(ft=>{if(ft.guards.canActivateChecks.length)return(0,ge.of)(ft).pipe((0,Et.M)(mn=>{const Jn=new vo(mn.id,this.urlSerializer.serialize(mn.extractedUrl),this.urlSerializer.serialize(mn.urlAfterRedirects),mn.targetSnapshot);this.events.next(Jn)}),(0,en.n)(mn=>{let Jn=!1;return(0,ge.of)(mn).pipe(function Di(v,M){return(0,qe.Z)(w=>{const{targetSnapshot:O,guards:{canActivateChecks:j}}=w;if(!j.length)return(0,ge.of)(w);const te=new Set(j.map(ft=>ft.route)),Te=new Set;for(const ft of te)if(!Te.has(ft))for(const mn of ls(ft))Te.add(mn);let Tt=0;return(0,Ae.H)(Te).pipe((0,_t.H)(ft=>te.has(ft)?function lo(v,M,w,O){const j=v.routeConfig,te=v._resolve;return void 0!==j?.title&&!ji(j)&&(te[mt]=j.title),function Zo(v,M,w,O){const j=Zn(v);if(0===j.length)return(0,ge.of)({});const te={};return(0,Ae.H)(j).pipe((0,qe.Z)(Te=>function ma(v,M,w,O){const j=_s(M)??O,te=fn(v,j);return kr(te.resolve?te.resolve(M,w):(0,T.N4e)(j,()=>te(M,w)))}(v[Te],M,w,O).pipe((0,dt.$)(),(0,Et.M)(Tt=>{te[Te]=Tt}))),nn(1),function An(v){return(0,Ht.T)(()=>v)}(te),(0,Ye.W)(Te=>Va(Te)?Ne.w:je(Te)))}(te,v,M,O).pipe((0,Ht.T)(Te=>(v._resolvedData=Te,v.data=ps(v,v.parent,w).resolve,null)))}(ft,O,v,M):(ft.data=ps(ft,ft.parent,v).resolve,(0,ge.of)(void 0))),(0,Et.M)(()=>Tt++),nn(1),(0,qe.Z)(ft=>Tt===Te.size?(0,ge.of)(w):Ne.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Et.M)({next:()=>Jn=!0,complete:()=>{Jn||this.cancelNavigationTransition(mn,"",Ii.NoDataFromResolver)}}))}),(0,Et.M)(mn=>{const Jn=new nr(mn.id,this.urlSerializer.serialize(mn.extractedUrl),this.urlSerializer.serialize(mn.urlAfterRedirects),mn.targetSnapshot);this.events.next(Jn)}))}),ds(ft=>{const mn=Jn=>{const lr=[];Jn.routeConfig?.loadComponent&&!Jn.routeConfig._loadedComponent&&lr.push(this.configLoader.loadComponent(Jn.routeConfig).pipe((0,Et.M)(Vi=>{Jn.component=Vi}),(0,Ht.T)(()=>{})));for(const Vi of Jn.children)lr.push(...mn(Vi));return lr};return st(mn(ft.targetSnapshot.root)).pipe((0,pn.U)(null),(0,vt.s)(1))}),ds(()=>this.afterPreactivation()),(0,en.n)(()=>{const{currentSnapshot:ft,targetSnapshot:mn}=te,Jn=this.createViewTransition?.(this.environmentInjector,ft.root,mn.root);return Jn?(0,Ae.H)(Jn).pipe((0,Ht.T)(()=>te)):(0,ge.of)(te)}),(0,Ht.T)(ft=>{const mn=function ns(v,M,w){const O=Oi(v,M._root,w?w._root:void 0);return new ni(O,M)}(w.routeReuseStrategy,ft.targetSnapshot,ft.currentRouterState);return this.currentTransition=te={...ft,targetRouterState:mn},this.currentNavigation.targetRouterState=mn,te}),(0,Et.M)(()=>{this.events.next(new Sr)}),((v,M,w,O)=>(0,Ht.T)(j=>(new G(M,j.targetRouterState,j.currentRouterState,w,O).activate(v),j)))(this.rootContexts,w.routeReuseStrategy,ft=>this.events.next(ft),this.inputBindingEnabled),(0,vt.s)(1),(0,Et.M)({next:ft=>{Te=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ei(ft.id,this.urlSerializer.serialize(ft.extractedUrl),this.urlSerializer.serialize(ft.urlAfterRedirects))),this.titleStrategy?.updateTitle(ft.targetRouterState.snapshot),ft.resolve(!0)},complete:()=>{Te=!0}}),function Cn(v){return(0,ue.N)((M,w)=>{(0,oe.Tg)(v).subscribe((0,rt._)(w,()=>w.complete(),nt.l)),!w.closed&&M.subscribe(w)})}(this.transitionAbortSubject.pipe((0,Et.M)(ft=>{throw ft}))),(0,Ln.j)(()=>{!Te&&!Tt&&this.cancelNavigationTransition(te,"",Ii.SupersededByNewNavigation),this.currentTransition?.id===te.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,Ye.W)(ft=>{if(Tt=!0,Js(ft))this.events.next(new ar(te.id,this.urlSerializer.serialize(te.extractedUrl),ft.message,ft.cancellationCode)),function Xo(v){return Js(v)&&yt(v.url)}(ft)?this.events.next(new Bi(ft.url)):te.resolve(!1);else{this.events.next(new zi(te.id,this.urlSerializer.serialize(te.extractedUrl),ft,te.targetSnapshot??void 0));try{te.resolve(w.errorHandler(ft))}catch(mn){this.options.resolveNavigationPromiseOnError?te.resolve(!1):te.reject(mn)}}return Ne.w}))}))}cancelNavigationTransition(w,O,j){const te=new ar(w.id,this.urlSerializer.serialize(w.extractedUrl),O,j);this.events.next(te),w.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(O){return new(O||v)};static#t=this.\u0275prov=T.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function wr(v){return v!==li}let Tr=(()=>{class v{static#e=this.\u0275fac=function(O){return new(O||v)};static#t=this.\u0275prov=T.jDH({token:v,factory:()=>(0,T.WQX)(Yt),providedIn:"root"})}return v})();class xr{shouldDetach(M){return!1}store(M,w){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,w){return M.routeConfig===w.routeConfig}}let Yt=(()=>{class v extends xr{static#e=this.\u0275fac=(()=>{let w;return function(j){return(w||(w=T.xGo(v)))(j||v)}})();static#t=this.\u0275prov=T.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),In=(()=>{class v{static#e=this.\u0275fac=function(O){return new(O||v)};static#t=this.\u0275prov=T.jDH({token:v,factory:()=>(0,T.WQX)(pr),providedIn:"root"})}return v})(),pr=(()=>{class v extends In{constructor(){super(...arguments),this.location=(0,T.WQX)(ln.aZ),this.urlSerializer=(0,T.WQX)(ke),this.options=(0,T.WQX)(P,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,T.WQX)(xt),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Or,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ss(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(w){return this.location.subscribe(O=>{"popstate"===O.type&&w(O.url,O.state)})}handleRouterEvent(w,O){if(w instanceof di)this.stateMemento=this.createStateMemento();else if(w instanceof Fo)this.rawUrlTree=O.initialUrl;else if(w instanceof oo){if("eager"===this.urlUpdateStrategy&&!O.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(O.finalUrl,O.initialUrl);this.setBrowserUrl(j,O)}}else w instanceof Sr?(this.currentUrlTree=O.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(O.finalUrl,O.initialUrl),this.routerState=O.targetRouterState,"deferred"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,O))):w instanceof ar&&(w.code===Ii.GuardRejected||w.code===Ii.NoDataFromResolver)?this.restoreHistory(O):w instanceof zi?this.restoreHistory(O,!0):w instanceof Ei&&(this.lastSuccessfulId=w.id,this.currentPageId=this.browserPageId)}setBrowserUrl(w,O){const j=this.urlSerializer.serialize(w);if(this.location.isCurrentPathEqualTo(j)||O.extras.replaceUrl){const Te={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId)};this.location.replaceState(j,"",Te)}else{const te={...O.extras.state,...this.generateNgRouterState(O.id,this.browserPageId+1)};this.location.go(j,"",te)}}restoreHistory(w,O=!1){if("computed"===this.canceledNavigationResolution){const te=this.currentPageId-this.browserPageId;0!==te?this.location.historyGo(te):this.currentUrlTree===w.finalUrl&&0===te&&(this.resetState(w),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(w,O){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:O}:{navigationId:w}}static#e=this.\u0275fac=(()=>{let w;return function(j){return(w||(w=T.xGo(v)))(j||v)}})();static#t=this.\u0275prov=T.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();var Ai=function(v){return v[v.COMPLETE=0]="COMPLETE",v[v.FAILED=1]="FAILED",v[v.REDIRECTING=2]="REDIRECTING",v}(Ai||{});function gi(v,M){v.events.pipe((0,xe.p)(w=>w instanceof Ei||w instanceof ar||w instanceof zi||w instanceof Fo),(0,Ht.T)(w=>w instanceof Ei||w instanceof Fo?Ai.COMPLETE:w instanceof ar&&(w.code===Ii.Redirect||w.code===Ii.SupersededByNewNavigation)?Ai.REDIRECTING:Ai.FAILED),(0,xe.p)(w=>w!==Ai.REDIRECTING),(0,vt.s)(1)).subscribe(()=>{M()})}function rs(v){throw v}const js={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Kr=(()=>{class v{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,T.WQX)(T.H3F),this.stateManager=(0,T.WQX)(In),this.options=(0,T.WQX)(P,{optional:!0})||{},this.pendingTasks=(0,T.WQX)(T.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,T.WQX)(fr),this.urlSerializer=(0,T.WQX)(ke),this.location=(0,T.WQX)(ln.aZ),this.urlHandlingStrategy=(0,T.WQX)(xt),this._events=new Ut.B,this.errorHandler=this.options.errorHandler||rs,this.navigated=!1,this.routeReuseStrategy=(0,T.WQX)(Tr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,T.WQX)($,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,T.WQX)($i,{optional:!0}),this.eventsSubscription=new Ct.yU,this.isNgZoneEnabled=(0,T.WQX)(T.SKi)instanceof T.SKi&&T.SKi.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:w=>{this.console.warn(w)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const w=this.navigationTransitions.events.subscribe(O=>{try{const j=this.navigationTransitions.currentTransition,te=this.navigationTransitions.currentNavigation;if(null!==j&&null!==te)if(this.stateManager.handleRouterEvent(O,te),O instanceof ar&&O.code!==Ii.Redirect&&O.code!==Ii.SupersededByNewNavigation)this.navigated=!0;else if(O instanceof Ei)this.navigated=!0;else if(O instanceof Bi){const Te=this.urlHandlingStrategy.merge(O.url,j.currentRawUrl),Tt={info:j.extras.info,skipLocationChange:j.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||wr(j.source)};this.scheduleNavigation(Te,li,null,Tt,{resolve:j.resolve,reject:j.reject,promise:j.promise})}(function Yn(v){return!(v instanceof Sr||v instanceof Bi)})(O)&&this._events.next(O)}catch(j){this.navigationTransitions.transitionAbortSubject.next(j)}});this.eventsSubscription.add(w)}resetRootComponentType(w){this.routerState.root.component=w,this.navigationTransitions.rootComponentType=w}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),li,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((w,O)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(w,"popstate",O)},0)})}navigateToSyncWithBrowser(w,O,j){const te={replaceUrl:!0},Te=j?.navigationId?j:null;if(j){const ft={...j};delete ft.navigationId,delete ft.\u0275routerPageId,0!==Object.keys(ft).length&&(te.state=ft)}const Tt=this.parseUrl(w);this.scheduleNavigation(Tt,O,Te,te)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(w){this.config=w.map(co),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(w,O={}){const{relativeTo:j,queryParams:te,fragment:Te,queryParamsHandling:Tt,preserveFragment:ft}=O,mn=ft?this.currentUrlTree.fragment:Te;let lr,Jn=null;switch(Tt){case"merge":Jn={...this.currentUrlTree.queryParams,...te};break;case"preserve":Jn=this.currentUrlTree.queryParams;break;default:Jn=te||null}null!==Jn&&(Jn=this.removeEmptyProps(Jn));try{lr=kt(j?j.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof w[0]||!w[0].startsWith("/"))&&(w=[]),lr=this.currentUrlTree.root}return cn(lr,w,Jn,mn??null)}navigateByUrl(w,O={skipLocationChange:!1}){const j=yt(w)?w:this.parseUrl(w),te=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(te,li,null,O)}navigate(w,O={skipLocationChange:!1}){return function ho(v){for(let M=0;M<v.length;M++)if(null==v[M])throw new T.wOt(4008,!1)}(w),this.navigateByUrl(this.createUrlTree(w,O),O)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){try{return this.urlSerializer.parse(w)}catch{return this.urlSerializer.parse("/")}}isActive(w,O){let j;if(j=!0===O?{...js}:!1===O?{...mi}:O,yt(w))return Li(this.currentUrlTree,w,j);const te=this.parseUrl(w);return Li(this.currentUrlTree,te,j)}removeEmptyProps(w){return Object.entries(w).reduce((O,[j,te])=>(null!=te&&(O[j]=te),O),{})}scheduleNavigation(w,O,j,te,Te){if(this.disposed)return Promise.resolve(!1);let Tt,ft,mn;Te?(Tt=Te.resolve,ft=Te.reject,mn=Te.promise):mn=new Promise((lr,Vi)=>{Tt=lr,ft=Vi});const Jn=this.pendingTasks.add();return gi(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Jn))}),this.navigationTransitions.handleNavigationRequest({source:O,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:w,extras:te,resolve:Tt,reject:ft,promise:mn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),mn.catch(lr=>Promise.reject(lr))}static#e=this.\u0275fac=function(O){return new(O||v)};static#t=this.\u0275prov=T.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),$o=(()=>{class v{constructor(w,O,j,te,Te,Tt){this.router=w,this.route=O,this.tabIndexAttribute=j,this.renderer=te,this.el=Te,this.locationStrategy=Tt,this.href=null,this.commands=null,this.onChanges=new Ut.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const ft=Te.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===ft||"area"===ft,this.isAnchorElement?this.subscription=w.events.subscribe(mn=>{mn instanceof Ei&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(w){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",w)}ngOnChanges(w){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(w,O,j,te,Te){const Tt=this.urlTree;return!!(null===Tt||this.isAnchorElement&&(0!==w||O||j||te||Te||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(Tt,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const w=this.urlTree;this.href=null!==w&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(w)):null;const O=null===this.href?null:(0,T.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",O)}applyAttributeValue(w,O){const j=this.renderer,te=this.el.nativeElement;null!==O?j.setAttribute(te,w,O):j.removeAttribute(te,w)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(O){return new(O||v)(T.rXU(Kr),T.rXU(oi),T.kS0("tabindex"),T.rXU(T.sFG),T.rXU(T.aKT),T.rXU(ln.hb))};static#t=this.\u0275dir=T.FsC({type:v,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(O,j){1&O&&T.bIt("click",function(Te){return j.onClick(Te.button,Te.ctrlKey,Te.shiftKey,Te.altKey,Te.metaKey)}),2&O&&T.BMQ("target",j.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[T.Mj6.HasDecoratorInputTransform,"preserveFragment","preserveFragment",T.L39],skipLocationChange:[T.Mj6.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",T.L39],replaceUrl:[T.Mj6.HasDecoratorInputTransform,"replaceUrl","replaceUrl",T.L39],routerLink:"routerLink"},standalone:!0,features:[T.GFd,T.OA$]})}return v})();class jn{}let Ho=(()=>{class v{constructor(w,O,j,te,Te){this.router=w,this.injector=j,this.preloadingStrategy=te,this.loader=Te}setUpPreloading(){this.subscription=this.router.events.pipe((0,xe.p)(w=>w instanceof Ei),(0,_t.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,O){const j=[];for(const te of O){te.providers&&!te._injector&&(te._injector=(0,T.Ol2)(te.providers,w,`Route: ${te.path}`));const Te=te._injector??w,Tt=te._loadedInjector??Te;(te.loadChildren&&!te._loadedRoutes&&void 0===te.canLoad||te.loadComponent&&!te._loadedComponent)&&j.push(this.preloadConfig(Te,te)),(te.children||te._loadedRoutes)&&j.push(this.processRoutes(Tt,te.children??te._loadedRoutes))}return(0,Ae.H)(j).pipe((0,Gn.U)())}preloadConfig(w,O){return this.preloadingStrategy.preload(O,()=>{let j;j=O.loadChildren&&void 0===O.canLoad?this.loader.loadChildren(w,O):(0,ge.of)(null);const te=j.pipe((0,qe.Z)(Te=>null===Te?(0,ge.of)(void 0):(O._loadedRoutes=Te.routes,O._loadedInjector=Te.injector,this.processRoutes(Te.injector??w,Te.routes))));if(O.loadComponent&&!O._loadedComponent){const Te=this.loader.loadComponent(O);return(0,Ae.H)([te,Te]).pipe((0,Gn.U)())}return te})}static#e=this.\u0275fac=function(O){return new(O||v)(T.KVO(Kr),T.KVO(T.Ql9),T.KVO(T.uvJ),T.KVO(jn),T.KVO(x))};static#t=this.\u0275prov=T.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const _a=new T.nKC("");let Il=(()=>{class v{constructor(w,O,j,te,Te={}){this.urlSerializer=w,this.transitions=O,this.viewportScroller=j,this.zone=te,this.options=Te,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,T.WQX)(T.uvJ),Te.scrollPositionRestoration||="disabled",Te.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof di?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof Ei?(this.lastId=w.id,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.urlAfterRedirects).fragment)):w instanceof Fo&&w.code===Nn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(w,this.urlSerializer.parse(w.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(w=>{w instanceof Rs&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,O){var j=this;this.zone.runOutsideAngular((0,_.A)(function*(){yield new Promise(te=>{setTimeout(()=>{te()}),(0,T.mal)(()=>{te()},{injector:j.environmentInjector})}),j.zone.run(()=>{j.transitions.events.next(new Rs(w,"popstate"===j.lastSource?j.store[j.restoredId]:null,O))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(O){T.QTQ()};static#t=this.\u0275prov=T.jDH({token:v,factory:v.\u0275fac})}return v})();function Is(v,M){return{\u0275kind:v,\u0275providers:M}}function ba(){const v=(0,T.WQX)(T.zZn);return M=>{const w=v.get(T.o8S);if(M!==w.components[0])return;const O=v.get(Kr),j=v.get(Sa);1===v.get(bi)&&O.initialNavigation(),v.get(Kc,null,T.$GK.Optional)?.setUpPreloading(),v.get(_a,null,T.$GK.Optional)?.init(),O.resetRootComponentType(w.componentTypes[0]),j.closed||(j.next(),j.complete(),j.unsubscribe())}}const Sa=new T.nKC("",{factory:()=>new Ut.B}),bi=new T.nKC("",{providedIn:"root",factory:()=>1}),Kc=new T.nKC("");function ta(v){return Is(0,[{provide:Kc,useExisting:Ho},{provide:jn,useExisting:v}])}function Qc(v){return Is(9,[{provide:Cr,useValue:Ur},{provide:gn,useValue:{skipNextTransition:!!v?.skipInitialTransition,...v}}])}const ki=new T.nKC("ROUTER_FORROOT_GUARD"),Mu=[ln.aZ,{provide:ke,useClass:we},Kr,fs,{provide:oi,useFactory:function nc(v){return v.routerState.root},deps:[Kr]},x,[]];let ja=(()=>{class v{constructor(w){}static forRoot(w,O){return{ngModule:v,providers:[Mu,[],{provide:$,multi:!0,useValue:w},{provide:ki,useFactory:Yh,deps:[[Kr,new T.Xx1,new T.kdw]]},{provide:P,useValue:O||{}},O?.useHash?{provide:ln.hb,useClass:ln.fw}:{provide:ln.hb,useClass:ln.Sm},{provide:_a,useFactory:()=>{const v=(0,T.WQX)(ln.Xr),M=(0,T.WQX)(T.SKi),w=(0,T.WQX)(P),O=(0,T.WQX)(fr),j=(0,T.WQX)(ke);return w.scrollOffset&&v.setOffset(w.scrollOffset),new Il(j,O,v,M,w)}},O?.preloadingStrategy?ta(O.preloadingStrategy).\u0275providers:[],O?.initialNavigation?wl(O):[],O?.bindToComponentInputs?Is(8,[Uo,{provide:$i,useExisting:Uo}]).\u0275providers:[],O?.enableViewTransitions?Qc().\u0275providers:[],[{provide:Ru,useFactory:ba},{provide:T.iLQ,multi:!0,useExisting:Ru}]]}}static forChild(w){return{ngModule:v,providers:[{provide:$,multi:!0,useValue:w}]}}static#e=this.\u0275fac=function(O){return new(O||v)(T.KVO(ki,8))};static#t=this.\u0275mod=T.$C({type:v});static#n=this.\u0275inj=T.G2t({})}return v})();function Yh(v){return"guarded"}function wl(v){return["disabled"===v.initialNavigation?Is(3,[{provide:T.hnV,multi:!0,useFactory:()=>{const M=(0,T.WQX)(Kr);return()=>{M.setUpLocationChangeListener()}}},{provide:bi,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?Is(2,[{provide:bi,useValue:0},{provide:T.hnV,multi:!0,deps:[T.zZn],useFactory:M=>{const w=M.get(ln.hj,Promise.resolve());return()=>w.then(()=>new Promise(O=>{const j=M.get(Kr),te=M.get(Sa);gi(j,()=>{O(!0)}),M.get(fr).afterPreactivation=()=>(O(!0),te.closed?(0,ge.of)(void 0):te),j.initialNavigation()}))}}]).\u0275providers:[]]}const Ru=new T.nKC("")},3345:(rn,ze,k)=>{k.d(ze,{A:()=>De});var _=k(1076),T=k(1362),R=k(7852),E=k(8041);class ie{constructor(it,et){this._delegate=it,this.firebase=et,(0,R._addComponent)(it,new T.uA("app-compat",()=>this,"PUBLIC")),this.container=it.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(it){this._delegate.automaticDataCollectionEnabled=it}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(it=>{this._delegate.checkDestroyed(),it()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(it,et=R._DEFAULT_ENTRY_NAME){var Dt;this._delegate.checkDestroyed();const bt=this._delegate.container.getProvider(it);return!bt.isInitialized()&&"EXPLICIT"===(null===(Dt=bt.getComponent())||void 0===Dt?void 0:Dt.instantiationMode)&&bt.initialize(),bt.getImmediate({identifier:et})}_removeServiceInstance(it,et=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(it).clearInstance(et)}_addComponent(it){(0,R._addComponent)(this._delegate,it)}_addOrOverwriteComponent(it){(0,R._addOrOverwriteComponent)(this._delegate,it)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new _.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ee=function Be(){const st=function Ve(st){const it={},et={__esModule:!0,initializeApp:function oe(Ne,Ct={}){const ue=R.initializeApp(Ne,Ct);if((0,_.gR)(it,ue.name))return it[ue.name];const He=new st(ue,et);return it[ue.name]=He,He},app:bt,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function ee(Ne){const Ct=Ne.name,ue=Ct.replace("-compat","");if(R._registerComponent(Ne)&&"PUBLIC"===Ne.type){const He=(Lt=bt())=>{if("function"!=typeof Lt[ue])throw ge.create("invalid-app-argument",{appName:Ct});return Lt[ue]()};void 0!==Ne.serviceProps&&(0,_.zw)(He,Ne.serviceProps),et[ue]=He,st.prototype[ue]=function(...Lt){return this._getService.bind(this,Ct).apply(this,Ne.multipleInstances?Lt:[])}}return"PUBLIC"===Ne.type?et[ue]:null},removeApp:function Dt(Ne){delete it[Ne]},useAsService:function je(Ne,Ct){return"serverAuth"===Ct?null:Ct},modularAPIs:R}};function bt(Ne){if(!(0,_.gR)(it,Ne=Ne||R._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:Ne});return it[Ne]}return et.default=et,Object.defineProperty(et,"apps",{get:function le(){return Object.keys(it).map(Ne=>it[Ne])}}),bt.App=st,et}(ie);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:Be,extendNamespace:function it(et){(0,_.zw)(st,et)},createSubscribe:_.tD,ErrorFactory:_.FA,deepExtend:_.zw}),st}(),_e=new E.Vy("@firebase/app-compat");try{const st=(0,_.mS)();if(void 0!==st.firebase){_e.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const it=st.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&_e.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const De=Ee;!function rt(st){(0,R.registerVersion)("@firebase/app-compat","0.2.40",st)}()},7852:(rn,ze,k)=>{k.r(ze),k.d(ze,{FirebaseError:()=>E.g,SDK_VERSION:()=>On,_DEFAULT_ENTRY_NAME:()=>Zn,_addComponent:()=>Hr,_addOrOverwriteComponent:()=>Li,_apps:()=>Pn,_clearComponents:()=>Un,_components:()=>qr,_getProvider:()=>hs,_isFirebaseApp:()=>Ui,_isFirebaseServerApp:()=>zt,_registerComponent:()=>Rr,_removeServiceInstance:()=>xn,_serverApps:()=>kr,deleteApp:()=>Ke,getApp:()=>we,getApps:()=>Ce,initializeApp:()=>Nr,initializeServerApp:()=>ke,onLog:()=>q,registerVersion:()=>pe,setLogLevel:()=>J});var _=k(467),T=k(1362),R=k(8041),E=k(1076);const ie=(yt,Xe)=>Xe.some(kt=>yt instanceof kt);let Ae,ge;const Ee=new WeakMap,_e=new WeakMap,Ge=new WeakMap,lt=new WeakMap,rt=new WeakMap;let it={get(yt,Xe,kt){if(yt instanceof IDBTransaction){if("done"===Xe)return _e.get(yt);if("objectStoreNames"===Xe)return yt.objectStoreNames||Ge.get(yt);if("store"===Xe)return kt.objectStoreNames[1]?void 0:kt.objectStore(kt.objectStoreNames[0])}return oe(yt[Xe])},set:(yt,Xe,kt)=>(yt[Xe]=kt,!0),has:(yt,Xe)=>yt instanceof IDBTransaction&&("done"===Xe||"store"===Xe)||Xe in yt};function bt(yt){return"function"==typeof yt?function Dt(yt){return yt!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Be(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(yt)?function(...Xe){return yt.apply(le(this),Xe),oe(Ee.get(this))}:function(...Xe){return oe(yt.apply(le(this),Xe))}:function(Xe,...kt){const cn=yt.call(le(this),Xe,...kt);return Ge.set(cn,Xe.sort?Xe.sort():[Xe]),oe(cn)}}(yt):(yt instanceof IDBTransaction&&function st(yt){if(_e.has(yt))return;const Xe=new Promise((kt,cn)=>{const ne=()=>{yt.removeEventListener("complete",ve),yt.removeEventListener("error",Ie),yt.removeEventListener("abort",Ie)},ve=()=>{kt(),ne()},Ie=()=>{cn(yt.error||new DOMException("AbortError","AbortError")),ne()};yt.addEventListener("complete",ve),yt.addEventListener("error",Ie),yt.addEventListener("abort",Ie)});_e.set(yt,Xe)}(yt),ie(yt,function Ve(){return Ae||(Ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(yt,it):yt)}function oe(yt){if(yt instanceof IDBRequest)return function De(yt){const Xe=new Promise((kt,cn)=>{const ne=()=>{yt.removeEventListener("success",ve),yt.removeEventListener("error",Ie)},ve=()=>{kt(oe(yt.result)),ne()},Ie=()=>{cn(yt.error),ne()};yt.addEventListener("success",ve),yt.addEventListener("error",Ie)});return Xe.then(kt=>{kt instanceof IDBCursor&&Ee.set(kt,yt)}).catch(()=>{}),rt.set(Xe,yt),Xe}(yt);if(lt.has(yt))return lt.get(yt);const Xe=bt(yt);return Xe!==yt&&(lt.set(yt,Xe),rt.set(Xe,yt)),Xe}const le=yt=>rt.get(yt),Ne=["get","getKey","getAll","getAllKeys","count"],Ct=["put","add","delete","clear"],ue=new Map;function He(yt,Xe){if(!(yt instanceof IDBDatabase)||Xe in yt||"string"!=typeof Xe)return;if(ue.get(Xe))return ue.get(Xe);const kt=Xe.replace(/FromIndex$/,""),cn=Xe!==kt,ne=Ct.includes(kt);if(!(kt in(cn?IDBIndex:IDBObjectStore).prototype)||!ne&&!Ne.includes(kt))return;const ve=function(){var Ie=(0,_.A)(function*(ut,...Qe){const Xt=this.transaction(ut,ne?"readwrite":"readonly");let jt=Xt.store;return cn&&(jt=jt.index(Qe.shift())),(yield Promise.all([jt[kt](...Qe),ne&&Xt.done]))[0]});return function(Qe){return Ie.apply(this,arguments)}}();return ue.set(Xe,ve),ve}!function et(yt){it=yt(it)}(yt=>({...yt,get:(Xe,kt,cn)=>He(Xe,kt)||yt.get(Xe,kt,cn),has:(Xe,kt)=>!!He(Xe,kt)||yt.has(Xe,kt)}));class Lt{constructor(Xe){this.container=Xe}getPlatformInfoString(){return this.container.getProviders().map(kt=>{if(function Ut(yt){const Xe=yt.getComponent();return"VERSION"===Xe?.type}(kt)){const cn=kt.getImmediate();return`${cn.library}/${cn.version}`}return null}).filter(kt=>kt).join(" ")}}const ln="@firebase/app",Ht="0.10.10",en=new R.Vy("@firebase/app"),Zn="[DEFAULT]",bn={[ln]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Pn=new Map,kr=new Map,qr=new Map;function Hr(yt,Xe){try{yt.container.addComponent(Xe)}catch(kt){en.debug(`Component ${Xe.name} failed to register with FirebaseApp ${yt.name}`,kt)}}function Li(yt,Xe){yt.container.addOrOverwriteComponent(Xe)}function Rr(yt){const Xe=yt.name;if(qr.has(Xe))return en.debug(`There were multiple attempts to register component ${Xe}.`),!1;qr.set(Xe,yt);for(const kt of Pn.values())Hr(kt,yt);for(const kt of kr.values())Hr(kt,yt);return!0}function hs(yt,Xe){const kt=yt.container.getProvider("heartbeat").getImmediate({optional:!0});return kt&&kt.triggerHeartbeat(),yt.container.getProvider(Xe)}function xn(yt,Xe,kt=Zn){hs(yt,Xe).clearInstance(kt)}function Ui(yt){return void 0!==yt.options}function zt(yt){return void 0!==yt.settings}function Un(){qr.clear()}const Jt=new E.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Zt{constructor(Xe,kt,cn){this._isDeleted=!1,this._options=Object.assign({},Xe),this._config=Object.assign({},kt),this._name=kt.name,this._automaticDataCollectionEnabled=kt.automaticDataCollectionEnabled,this._container=cn,this.container.addComponent(new T.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Xe){this.checkDestroyed(),this._automaticDataCollectionEnabled=Xe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Xe){this._isDeleted=Xe}checkDestroyed(){if(this.isDeleted)throw Jt.create("app-deleted",{appName:this._name})}}class Qr extends Zt{constructor(Xe,kt,cn,ne){const ve=void 0!==kt.automaticDataCollectionEnabled&&kt.automaticDataCollectionEnabled,Ie={name:cn,automaticDataCollectionEnabled:ve};super(void 0!==Xe.apiKey?Xe:Xe.options,Ie,ne),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ve},kt),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,kt.releaseOnDeref=void 0,pe(ln,Ht,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(Xe){this.isDeleted||(this._refCount++,void 0!==Xe&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(Xe,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ke(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Jt.create("server-app-deleted")}}const On="10.13.1";function Nr(yt,Xe={}){let kt=yt;"object"!=typeof Xe&&(Xe={name:Xe});const cn=Object.assign({name:Zn,automaticDataCollectionEnabled:!1},Xe),ne=cn.name;if("string"!=typeof ne||!ne)throw Jt.create("bad-app-name",{appName:String(ne)});if(kt||(kt=(0,E.T9)()),!kt)throw Jt.create("no-options");const ve=Pn.get(ne);if(ve){if((0,E.bD)(kt,ve.options)&&(0,E.bD)(cn,ve.config))return ve;throw Jt.create("duplicate-app",{appName:ne})}const Ie=new T.h1(ne);for(const Qe of qr.values())Ie.addComponent(Qe);const ut=new Zt(kt,cn,Ie);return Pn.set(ne,ut),ut}function ke(yt,Xe){if((0,E.Bd)()&&!(0,E.p7)())throw Jt.create("invalid-server-app-environment");let kt;void 0===Xe.automaticDataCollectionEnabled&&(Xe.automaticDataCollectionEnabled=!1),kt=Ui(yt)?yt.options:yt;const cn=Object.assign(Object.assign({},Xe),kt);if(void 0!==cn.releaseOnDeref&&delete cn.releaseOnDeref,void 0!==Xe.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Jt.create("finalization-registry-not-supported",{});const ve=""+(Xt=JSON.stringify(cn),[...Xt].reduce((jt,Rn)=>Math.imul(31,jt)+Rn.charCodeAt(0)|0,0)),Ie=kr.get(ve);var Xt;if(Ie)return Ie.incRefCount(Xe.releaseOnDeref),Ie;const ut=new T.h1(ve);for(const Xt of qr.values())ut.addComponent(Xt);const Qe=new Qr(kt,Xe,ve,ut);return kr.set(ve,Qe),Qe}function we(yt=Zn){const Xe=Pn.get(yt);if(!Xe&&yt===Zn&&(0,E.T9)())return Nr();if(!Xe)throw Jt.create("no-app",{appName:yt});return Xe}function Ce(){return Array.from(Pn.values())}function Ke(yt){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,_.A)(function*(yt){let Xe=!1;const kt=yt.name;Pn.has(kt)?(Xe=!0,Pn.delete(kt)):kr.has(kt)&&yt.decRefCount()<=0&&(kr.delete(kt),Xe=!0),Xe&&(yield Promise.all(yt.container.getProviders().map(cn=>cn.delete())),yt.isDeleted=!0)})).apply(this,arguments)}function pe(yt,Xe,kt){var cn;let ne=null!==(cn=bn[yt])&&void 0!==cn?cn:yt;kt&&(ne+=`-${kt}`);const ve=ne.match(/\s|\//),Ie=Xe.match(/\s|\//);if(ve||Ie){const ut=[`Unable to register library "${ne}" with version "${Xe}":`];return ve&&ut.push(`library name "${ne}" contains illegal characters (whitespace or "/")`),ve&&Ie&&ut.push("and"),Ie&&ut.push(`version name "${Xe}" contains illegal characters (whitespace or "/")`),void en.warn(ut.join(" "))}Rr(new T.uA(`${ne}-version`,()=>({library:ne,version:Xe}),"VERSION"))}function q(yt,Xe){if(null!==yt&&"function"!=typeof yt)throw Jt.create("invalid-log-argument");(0,R.Ey)(yt,Xe)}function J(yt){(0,R.He)(yt)}const se="firebase-heartbeat-database",me=1,wt="firebase-heartbeat-store";let Vt=null;function En(){return Vt||(Vt=function ee(yt,Xe,{blocked:kt,upgrade:cn,blocking:ne,terminated:ve}={}){const Ie=indexedDB.open(yt,Xe),ut=oe(Ie);return cn&&Ie.addEventListener("upgradeneeded",Qe=>{cn(oe(Ie.result),Qe.oldVersion,Qe.newVersion,oe(Ie.transaction),Qe)}),kt&&Ie.addEventListener("blocked",Qe=>kt(Qe.oldVersion,Qe.newVersion,Qe)),ut.then(Qe=>{ve&&Qe.addEventListener("close",()=>ve()),ne&&Qe.addEventListener("versionchange",Xt=>ne(Xt.oldVersion,Xt.newVersion,Xt))}).catch(()=>{}),ut}(se,me,{upgrade:(yt,Xe)=>{if(0===Xe)try{yt.createObjectStore(wt)}catch(kt){console.warn(kt)}}}).catch(yt=>{throw Jt.create("idb-open",{originalErrorMessage:yt.message})})),Vt}function zn(){return(zn=(0,_.A)(function*(yt){try{const kt=(yield En()).transaction(wt),cn=yield kt.objectStore(wt).get(Re(yt));return yield kt.done,cn}catch(Xe){if(Xe instanceof E.g)en.warn(Xe.message);else{const kt=Jt.create("idb-get",{originalErrorMessage:Xe?.message});en.warn(kt.message)}}})).apply(this,arguments)}function Mn(yt,Xe){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,_.A)(function*(yt,Xe){try{const cn=(yield En()).transaction(wt,"readwrite");yield cn.objectStore(wt).put(Xe,Re(yt)),yield cn.done}catch(kt){if(kt instanceof E.g)en.warn(kt.message);else{const cn=Jt.create("idb-set",{originalErrorMessage:kt?.message});en.warn(cn.message)}}})).apply(this,arguments)}function Re(yt){return`${yt.name}!${yt.options.appId}`}class Ms{constructor(Xe){this.container=Xe,this._heartbeatsCache=null;const kt=this.container.getProvider("app").getImmediate();this._storage=new is(kt),this._heartbeatsCachePromise=this._storage.read().then(cn=>(this._heartbeatsCache=cn,cn))}triggerHeartbeat(){var Xe=this;return(0,_.A)(function*(){var kt,cn;try{const ve=Xe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ie=cs();return null==(null===(kt=Xe._heartbeatsCache)||void 0===kt?void 0:kt.heartbeats)&&(Xe._heartbeatsCache=yield Xe._heartbeatsCachePromise,null==(null===(cn=Xe._heartbeatsCache)||void 0===cn?void 0:cn.heartbeats))||Xe._heartbeatsCache.lastSentHeartbeatDate===Ie||Xe._heartbeatsCache.heartbeats.some(ut=>ut.date===Ie)?void 0:(Xe._heartbeatsCache.heartbeats.push({date:Ie,agent:ve}),Xe._heartbeatsCache.heartbeats=Xe._heartbeatsCache.heartbeats.filter(ut=>{const Qe=new Date(ut.date).valueOf();return Date.now()-Qe<=2592e6}),Xe._storage.overwrite(Xe._heartbeatsCache))}catch(ne){en.warn(ne)}})()}getHeartbeatsHeader(){var Xe=this;return(0,_.A)(function*(){var kt;try{if(null===Xe._heartbeatsCache&&(yield Xe._heartbeatsCachePromise),null==(null===(kt=Xe._heartbeatsCache)||void 0===kt?void 0:kt.heartbeats)||0===Xe._heartbeatsCache.heartbeats.length)return"";const cn=cs(),{heartbeatsToSend:ne,unsentEntries:ve}=function ir(yt,Xe=1024){const kt=[];let cn=yt.slice();for(const ne of yt){const ve=kt.find(Ie=>Ie.agent===ne.agent);if(ve){if(ve.dates.push(ne.date),Gi(kt)>Xe){ve.dates.pop();break}}else if(kt.push({agent:ne.agent,dates:[ne.date]}),Gi(kt)>Xe){kt.pop();break}cn=cn.slice(1)}return{heartbeatsToSend:kt,unsentEntries:cn}}(Xe._heartbeatsCache.heartbeats),Ie=(0,E.Uj)(JSON.stringify({version:2,heartbeats:ne}));return Xe._heartbeatsCache.lastSentHeartbeatDate=cn,ve.length>0?(Xe._heartbeatsCache.heartbeats=ve,yield Xe._storage.overwrite(Xe._heartbeatsCache)):(Xe._heartbeatsCache.heartbeats=[],Xe._storage.overwrite(Xe._heartbeatsCache)),Ie}catch(cn){return en.warn(cn),""}})()}}function cs(){return(new Date).toISOString().substring(0,10)}class is{constructor(Xe){this.app=Xe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.A)(function*(){return!!(0,E.zW)()&&(0,E.eX)().then(()=>!0).catch(()=>!1)})()}read(){var Xe=this;return(0,_.A)(function*(){if(yield Xe._canUseIndexedDBPromise){const cn=yield function Bn(yt){return zn.apply(this,arguments)}(Xe.app);return cn?.heartbeats?cn:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Xe){var kt=this;return(0,_.A)(function*(){var cn;if(yield kt._canUseIndexedDBPromise){const ve=yield kt.read();return Mn(kt.app,{lastSentHeartbeatDate:null!==(cn=Xe.lastSentHeartbeatDate)&&void 0!==cn?cn:ve.lastSentHeartbeatDate,heartbeats:Xe.heartbeats})}})()}add(Xe){var kt=this;return(0,_.A)(function*(){var cn;if(yield kt._canUseIndexedDBPromise){const ve=yield kt.read();return Mn(kt.app,{lastSentHeartbeatDate:null!==(cn=Xe.lastSentHeartbeatDate)&&void 0!==cn?cn:ve.lastSentHeartbeatDate,heartbeats:[...ve.heartbeats,...Xe.heartbeats]})}})()}}function Gi(yt){return(0,E.Uj)(JSON.stringify({version:2,heartbeats:yt})).length}!function ri(yt){Rr(new T.uA("platform-logger",Xe=>new Lt(Xe),"PRIVATE")),Rr(new T.uA("heartbeat",Xe=>new Ms(Xe),"PRIVATE")),pe(ln,Ht,yt),pe(ln,Ht,"esm2017"),pe("fire-js","")}("")},1362:(rn,ze,k)=>{k.d(ze,{h1:()=>Ve,uA:()=>R});var _=k(467),T=k(1076);class R{constructor(Ee,_e,Ge){this.name=Ee,this.instanceFactory=_e,this.type=Ge,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ee){return this.instantiationMode=Ee,this}setMultipleInstances(Ee){return this.multipleInstances=Ee,this}setServiceProps(Ee){return this.serviceProps=Ee,this}setInstanceCreatedCallback(Ee){return this.onInstanceCreated=Ee,this}}const E="[DEFAULT]";class ie{constructor(Ee,_e){this.name=Ee,this.container=_e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ee){const _e=this.normalizeInstanceIdentifier(Ee);if(!this.instancesDeferred.has(_e)){const Ge=new T.cY;if(this.instancesDeferred.set(_e,Ge),this.isInitialized(_e)||this.shouldAutoInitialize())try{const lt=this.getOrInitializeService({instanceIdentifier:_e});lt&&Ge.resolve(lt)}catch{}}return this.instancesDeferred.get(_e).promise}getImmediate(Ee){var _e;const Ge=this.normalizeInstanceIdentifier(Ee?.identifier),lt=null!==(_e=Ee?.optional)&&void 0!==_e&&_e;if(!this.isInitialized(Ge)&&!this.shouldAutoInitialize()){if(lt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ge})}catch(rt){if(lt)return null;throw rt}}getComponent(){return this.component}setComponent(Ee){if(Ee.name!==this.name)throw Error(`Mismatching Component ${Ee.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ee,this.shouldAutoInitialize()){if(function ge(Be){return"EAGER"===Be.instantiationMode}(Ee))try{this.getOrInitializeService({instanceIdentifier:E})}catch{}for(const[_e,Ge]of this.instancesDeferred.entries()){const lt=this.normalizeInstanceIdentifier(_e);try{const rt=this.getOrInitializeService({instanceIdentifier:lt});Ge.resolve(rt)}catch{}}}}clearInstance(Ee=E){this.instancesDeferred.delete(Ee),this.instancesOptions.delete(Ee),this.instances.delete(Ee)}delete(){var Ee=this;return(0,_.A)(function*(){const _e=Array.from(Ee.instances.values());yield Promise.all([..._e.filter(Ge=>"INTERNAL"in Ge).map(Ge=>Ge.INTERNAL.delete()),..._e.filter(Ge=>"_delete"in Ge).map(Ge=>Ge._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ee=E){return this.instances.has(Ee)}getOptions(Ee=E){return this.instancesOptions.get(Ee)||{}}initialize(Ee={}){const{options:_e={}}=Ee,Ge=this.normalizeInstanceIdentifier(Ee.instanceIdentifier);if(this.isInitialized(Ge))throw Error(`${this.name}(${Ge}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const lt=this.getOrInitializeService({instanceIdentifier:Ge,options:_e});for(const[rt,De]of this.instancesDeferred.entries())Ge===this.normalizeInstanceIdentifier(rt)&&De.resolve(lt);return lt}onInit(Ee,_e){var Ge;const lt=this.normalizeInstanceIdentifier(_e),rt=null!==(Ge=this.onInitCallbacks.get(lt))&&void 0!==Ge?Ge:new Set;rt.add(Ee),this.onInitCallbacks.set(lt,rt);const De=this.instances.get(lt);return De&&Ee(De,lt),()=>{rt.delete(Ee)}}invokeOnInitCallbacks(Ee,_e){const Ge=this.onInitCallbacks.get(_e);if(Ge)for(const lt of Ge)try{lt(Ee,_e)}catch{}}getOrInitializeService({instanceIdentifier:Ee,options:_e={}}){let Ge=this.instances.get(Ee);if(!Ge&&this.component&&(Ge=this.component.instanceFactory(this.container,{instanceIdentifier:(Be=Ee,Be===E?void 0:Be),options:_e}),this.instances.set(Ee,Ge),this.instancesOptions.set(Ee,_e),this.invokeOnInitCallbacks(Ge,Ee),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ee,Ge)}catch{}var Be;return Ge||null}normalizeInstanceIdentifier(Ee=E){return this.component?this.component.multipleInstances?Ee:E:Ee}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ve{constructor(Ee){this.name=Ee,this.providers=new Map}addComponent(Ee){const _e=this.getProvider(Ee.name);if(_e.isComponentSet())throw new Error(`Component ${Ee.name} has already been registered with ${this.name}`);_e.setComponent(Ee)}addOrOverwriteComponent(Ee){this.getProvider(Ee.name).isComponentSet()&&this.providers.delete(Ee.name),this.addComponent(Ee)}getProvider(Ee){if(this.providers.has(Ee))return this.providers.get(Ee);const _e=new ie(Ee,this);return this.providers.set(Ee,_e),_e}getProviders(){return Array.from(this.providers.values())}}},8041:(rn,ze,k)=>{k.d(ze,{$b:()=>T,Ey:()=>Be,He:()=>Ve,Vy:()=>ge});const _=[];var T=function(Ee){return Ee[Ee.DEBUG=0]="DEBUG",Ee[Ee.VERBOSE=1]="VERBOSE",Ee[Ee.INFO=2]="INFO",Ee[Ee.WARN=3]="WARN",Ee[Ee.ERROR=4]="ERROR",Ee[Ee.SILENT=5]="SILENT",Ee}(T||{});const R={debug:T.DEBUG,verbose:T.VERBOSE,info:T.INFO,warn:T.WARN,error:T.ERROR,silent:T.SILENT},E=T.INFO,ie={[T.DEBUG]:"log",[T.VERBOSE]:"log",[T.INFO]:"info",[T.WARN]:"warn",[T.ERROR]:"error"},Ae=(Ee,_e,...Ge)=>{if(_e<Ee.logLevel)return;const lt=(new Date).toISOString(),rt=ie[_e];if(!rt)throw new Error(`Attempted to log a message with an invalid logType (value: ${_e})`);console[rt](`[${lt}]  ${Ee.name}:`,...Ge)};class ge{constructor(_e){this.name=_e,this._logLevel=E,this._logHandler=Ae,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(_e){if(!(_e in T))throw new TypeError(`Invalid value "${_e}" assigned to \`logLevel\``);this._logLevel=_e}setLogLevel(_e){this._logLevel="string"==typeof _e?R[_e]:_e}get logHandler(){return this._logHandler}set logHandler(_e){if("function"!=typeof _e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=_e}get userLogHandler(){return this._userLogHandler}set userLogHandler(_e){this._userLogHandler=_e}debug(..._e){this._userLogHandler&&this._userLogHandler(this,T.DEBUG,..._e),this._logHandler(this,T.DEBUG,..._e)}log(..._e){this._userLogHandler&&this._userLogHandler(this,T.VERBOSE,..._e),this._logHandler(this,T.VERBOSE,..._e)}info(..._e){this._userLogHandler&&this._userLogHandler(this,T.INFO,..._e),this._logHandler(this,T.INFO,..._e)}warn(..._e){this._userLogHandler&&this._userLogHandler(this,T.WARN,..._e),this._logHandler(this,T.WARN,..._e)}error(..._e){this._userLogHandler&&this._userLogHandler(this,T.ERROR,..._e),this._logHandler(this,T.ERROR,..._e)}}function Ve(Ee){_.forEach(_e=>{_e.setLogLevel(Ee)})}function Be(Ee,_e){for(const Ge of _){let lt=null;_e&&_e.level&&(lt=R[_e.level]),Ge.userLogHandler=null===Ee?null:(rt,De,...st)=>{const it=st.map(et=>{if(null==et)return null;if("string"==typeof et)return et;if("number"==typeof et||"boolean"==typeof et)return et.toString();if(et instanceof Error)return et.message;try{return JSON.stringify(et)}catch{return null}}).filter(et=>et).join(" ");De>=(lt??rt.logLevel)&&Ee({level:T[De].toLowerCase(),message:it,args:st,type:rt.name})}}}},7231:(rn,ze,k)=>{k.d(ze,{HF:()=>_.X});var _=k(576);k(7852),k(1076),k(8041),k(1362)},7935:(rn,ze,k)=>{k.d(ze,{A:()=>_.A});var _=k(3345);_.A.registerVersion("firebase","10.13.1","app-compat")},2438:(rn,ze,k)=>{var _=k(467),T=k(3345),R=k(576),E=k(1076),ge=(k(7852),k(8041),k(1362));function Ve(){return window}function _e(){return _e=(0,_.A)(function*(q,J,se){var me;const{BuildInfo:wt}=Ve();(0,R.au)(J.sessionId,"AuthEvent did not contain a session ID");const Vt=yield function et(q){return Dt.apply(this,arguments)}(J.sessionId),En={};return(0,R.av)()?En.ibi=wt.packageName:(0,R.aw)()?En.apn=wt.packageName:(0,R.ax)(q,"operation-not-supported-in-this-environment"),wt.displayName&&(En.appDisplayName=wt.displayName),En.sessionId=Vt,(0,R.ay)(q,se,J.type,void 0,null!==(me=J.eventId)&&void 0!==me?me:void 0,En)}),_e.apply(this,arguments)}function lt(){return(lt=(0,_.A)(function*(q){const{BuildInfo:J}=Ve(),se={};(0,R.av)()?se.iosBundleId=J.packageName:(0,R.aw)()?se.androidPackageName=J.packageName:(0,R.ax)(q,"operation-not-supported-in-this-environment"),yield(0,R.az)(q,se)})).apply(this,arguments)}function st(){return(st=(0,_.A)(function*(q,J,se){const{cordova:me}=Ve();let wt=()=>{};try{yield new Promise((Vt,En)=>{let Bn=null;function zn(){var Re;Vt();const Gr=null===(Re=me.plugins.browsertab)||void 0===Re?void 0:Re.close;"function"==typeof Gr&&Gr(),"function"==typeof se?.close&&se.close()}function Mn(){Bn||(Bn=window.setTimeout(()=>{En((0,R.aB)(q,"redirect-cancelled-by-user"))},2e3))}function Wt(){"visible"===document?.visibilityState&&Mn()}J.addPassiveListener(zn),document.addEventListener("resume",Mn,!1),(0,R.aw)()&&document.addEventListener("visibilitychange",Wt,!1),wt=()=>{J.removePassiveListener(zn),document.removeEventListener("resume",Mn,!1),document.removeEventListener("visibilitychange",Wt,!1),Bn&&window.clearTimeout(Bn)}})}finally{wt()}})).apply(this,arguments)}function Dt(){return(Dt=(0,_.A)(function*(q){const J=function bt(q){if((0,R.au)(/[0-9a-zA-Z]+/.test(q),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(q);const J=new ArrayBuffer(q.length),se=new Uint8Array(J);for(let me=0;me<q.length;me++)se[me]=q.charCodeAt(me);return se}(q),se=yield crypto.subtle.digest("SHA-256",J);return Array.from(new Uint8Array(se)).map(wt=>wt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class le extends R.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(J=>{this.resolveInitialized=J})}addPassiveListener(J){this.passiveListeners.add(J)}removePassiveListener(J){this.passiveListeners.delete(J)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(J){return this.resolveInitialized(),this.passiveListeners.forEach(se=>se(J)),super.onEvent(J)}initialized(){var J=this;return(0,_.A)(function*(){yield J.initPromise})()}}function Ne(q){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,_.A)(function*(q){const J=yield Lt()._get(Ut(q));return J&&(yield Lt()._remove(Ut(q))),J})).apply(this,arguments)}function He(){const q=[];for(let se=0;se<20;se++){const me=Math.floor(62*Math.random());q.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(me))}return q.join("")}function Lt(){return(0,R.aE)(R.b)}function Ut(q){return(0,R.aF)("authEvent",q.config.apiKey,q.name)}function en(q){if(!q?.includes("?"))return{};const[J,...se]=q.split("?");return(0,E.I9)(se.join("?"))}const xe=class yn{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aG,this._overrideRedirectResult=R.aH}_initialize(J){var se=this;return(0,_.A)(function*(){const me=J._key();let wt=se.eventManagers.get(me);return wt||(wt=new le(J),se.eventManagers.set(me,wt),se.attachCallbackListeners(J,wt)),wt})()}_openPopup(J){(0,R.ax)(J,"operation-not-supported-in-this-environment")}_openRedirect(J,se,me,wt){var Vt=this;return(0,_.A)(function*(){!function it(q){var J,se,me,wt,Vt,En,Bn,zn,Mn,Wt;const Re=Ve();(0,R.aC)("function"==typeof(null===(J=Re?.universalLinks)||void 0===J?void 0:J.subscribe),q,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.aC)(typeof(null===(se=Re?.BuildInfo)||void 0===se?void 0:se.packageName)<"u",q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.aC)("function"==typeof(null===(Vt=null===(wt=null===(me=Re?.cordova)||void 0===me?void 0:me.plugins)||void 0===wt?void 0:wt.browsertab)||void 0===Vt?void 0:Vt.openUrl),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aC)("function"==typeof(null===(zn=null===(Bn=null===(En=Re?.cordova)||void 0===En?void 0:En.plugins)||void 0===Bn?void 0:Bn.browsertab)||void 0===zn?void 0:zn.isAvailable),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aC)("function"==typeof(null===(Wt=null===(Mn=Re?.cordova)||void 0===Mn?void 0:Mn.InAppBrowser)||void 0===Wt?void 0:Wt.open),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(J);const En=yield Vt._initialize(J);yield En.initialized(),En.resetRedirect(),(0,R.aI)(),yield Vt._originValidation(J);const Bn=function ee(q,J,se=null){return{type:J,eventId:se,urlResponse:null,sessionId:He(),postBody:null,tenantId:q.tenantId,error:(0,R.aB)(q,"no-auth-event")}}(J,me,wt);yield function je(q,J){return Lt()._set(Ut(q),J)}(J,Bn);const zn=yield function Ee(q,J,se){return _e.apply(this,arguments)}(J,Bn,se),Mn=yield function rt(q){const{cordova:J}=Ve();return new Promise(se=>{J.plugins.browsertab.isAvailable(me=>{let wt=null;me?J.plugins.browsertab.openUrl(q):wt=J.InAppBrowser.open(q,(0,R.aA)()?"_blank":"_system","location=yes"),se(wt)})})}(zn);return function De(q,J,se){return st.apply(this,arguments)}(J,En,Mn)})()}_isIframeWebStorageSupported(J,se){throw new Error("Method not implemented.")}_originValidation(J){const se=J._key();return this.originValidationPromises[se]||(this.originValidationPromises[se]=function Ge(q){return lt.apply(this,arguments)}(J)),this.originValidationPromises[se]}attachCallbackListeners(J,se){const{universalLinks:me,handleOpenURL:wt,BuildInfo:Vt}=Ve(),En=setTimeout((0,_.A)(function*(){yield Ne(J),se.onEvent(qe())}),500),Bn=function(){var Wt=(0,_.A)(function*(Re){clearTimeout(En);const Gr=yield Ne(J);let Yr=null;Gr&&Re?.url&&(Yr=function ue(q,J){var se,me;const wt=function Ht(q){const J=en(q),se=J.link?decodeURIComponent(J.link):void 0,me=en(se).link,wt=J.deep_link_id?decodeURIComponent(J.deep_link_id):void 0;return en(wt).link||wt||me||se||q}(J);if(wt.includes("/__/auth/callback")){const Vt=en(wt),En=Vt.firebaseError?function ln(q){try{return JSON.parse(q)}catch{return null}}(decodeURIComponent(Vt.firebaseError)):null,Bn=null===(me=null===(se=En?.code)||void 0===se?void 0:se.split("auth/"))||void 0===me?void 0:me[1],zn=Bn?(0,R.aB)(Bn):null;return zn?{type:q.type,eventId:q.eventId,tenantId:q.tenantId,error:zn,urlResponse:null,sessionId:null,postBody:null}:{type:q.type,eventId:q.eventId,tenantId:q.tenantId,sessionId:q.sessionId,urlResponse:wt,postBody:null}}return null}(Gr,Re.url)),se.onEvent(Yr||qe())});return function(Gr){return Wt.apply(this,arguments)}}();typeof me<"u"&&"function"==typeof me.subscribe&&me.subscribe(null,Bn);const zn=wt,Mn=`${Vt.packageName.toLowerCase()}://`;Ve().handleOpenURL=function(){var Wt=(0,_.A)(function*(Re){if(Re.toLowerCase().startsWith(Mn)&&Bn({url:Re}),"function"==typeof zn)try{zn(Re)}catch(Gr){console.error(Gr)}});return function(Re){return Wt.apply(this,arguments)}}()}};function qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.aB)("no-auth-event")}}function Kt(){var q;return(null===(q=self?.location)||void 0===q?void 0:q.protocol)||null}function nn(q=(0,E.ZQ)()){return!("file:"!==Kt()&&"ionic:"!==Kt()&&"capacitor:"!==Kt()||!q.toLowerCase().match(/iphone|ipad|ipod|android/))}function nt(){try{const q=self.localStorage,J=R.aN();if(q)return q.setItem(J,"1"),q.removeItem(J),!function Ln(q=(0,E.ZQ)()){return function wn(){return(0,E.lT)()&&11===document?.documentMode}()||function An(q=(0,E.ZQ)()){return/Edge\/\d+/.test(q)}(q)}()||(0,E.zW)()}catch{return Cn()&&(0,E.zW)()}return!1}function Cn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gn(){return(function pn(){return"http:"===Kt()||"https:"===Kt()}()||(0,E.sr)()||nn())&&!function sn(){return(0,E.lV)()||(0,E.Ll)()}()&&nt()&&!Cn()}function rr(){return nn()&&typeof document<"u"}function mt(){return(mt=(0,_.A)(function*(){return!!rr()&&new Promise(q=>{const J=setTimeout(()=>{q(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(J),q(!0)})})})).apply(this,arguments)}const Nt={LOCAL:"local",NONE:"none",SESSION:"session"},Ze=R.aC,Rt="persistence";function Zn(q){return bn.apply(this,arguments)}function bn(){return(bn=(0,_.A)(function*(q){yield q._initializationPromise;const J=kr(),se=R.aF(Rt,q.config.apiKey,q.name);J&&J.setItem(se,q._getPersistence())})).apply(this,arguments)}function kr(){var q;try{return(null===(q=function ti(){return typeof window<"u"?window:null}())||void 0===q?void 0:q.sessionStorage)||null}catch{return null}}const qr=R.aC;class Hr{constructor(){this.browserResolver=R.aE(R.k),this.cordovaResolver=R.aE(xe),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aG,this._overrideRedirectResult=R.aH}_initialize(J){var se=this;return(0,_.A)(function*(){return yield se.selectUnderlyingResolver(),se.assertedUnderlyingResolver._initialize(J)})()}_openPopup(J,se,me,wt){var Vt=this;return(0,_.A)(function*(){return yield Vt.selectUnderlyingResolver(),Vt.assertedUnderlyingResolver._openPopup(J,se,me,wt)})()}_openRedirect(J,se,me,wt){var Vt=this;return(0,_.A)(function*(){return yield Vt.selectUnderlyingResolver(),Vt.assertedUnderlyingResolver._openRedirect(J,se,me,wt)})()}_isIframeWebStorageSupported(J,se){this.assertedUnderlyingResolver._isIframeWebStorageSupported(J,se)}_originValidation(J){return this.assertedUnderlyingResolver._originValidation(J)}get _shouldInitProactively(){return rr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var J=this;return(0,_.A)(function*(){if(J.underlyingResolver)return;const se=yield function St(){return mt.apply(this,arguments)}();J.underlyingResolver=se?J.cordovaResolver:J.browserResolver})()}}function Li(q){return q.unwrap()}function hs(q){return Ui(q)}function Ui(q){const{_tokenResponse:J}=q instanceof E.g?q.customData:q;if(!J)return null;if(!(q instanceof E.g)&&"temporaryProof"in J&&"phoneNumber"in J)return R.P.credentialFromResult(q);const se=J.providerId;if(!se||se===R.p.PASSWORD)return null;let me;switch(se){case R.p.GOOGLE:me=R.X;break;case R.p.FACEBOOK:me=R.W;break;case R.p.GITHUB:me=R.Y;break;case R.p.TWITTER:me=R.$;break;default:const{oauthIdToken:wt,oauthAccessToken:Vt,oauthTokenSecret:En,pendingToken:Bn,nonce:zn}=J;return Vt||En||wt||Bn?Bn?se.startsWith("saml.")?R.aQ._create(se,Bn):R.N._fromParams({providerId:se,signInMethod:se,pendingToken:Bn,idToken:wt,accessToken:Vt}):new R.Z(se).credential({idToken:wt,accessToken:Vt,rawNonce:zn}):null}return q instanceof E.g?me.credentialFromError(q):me.credentialFromResult(q)}function zt(q,J){return J.catch(se=>{throw se instanceof E.g&&function xn(q,J){var se;const me=null===(se=J.customData)||void 0===se?void 0:se._tokenResponse;if("auth/multi-factor-auth-required"===J?.code)J.resolver=new Jt(q,R.as(q,J));else if(me){const wt=Ui(J),Vt=J;wt&&(Vt.credential=wt,Vt.tenantId=me.tenantId||void 0,Vt.email=me.email||void 0,Vt.phoneNumber=me.phoneNumber||void 0)}}(q,se),se}).then(se=>{const wt=se.user;return{operationType:se.operationType,credential:hs(se),additionalUserInfo:R.aq(se),user:Zt.getOrCreate(wt)}})}function Un(q,J){return Or.apply(this,arguments)}function Or(){return(Or=(0,_.A)(function*(q,J){const se=yield J;return{verificationId:se.verificationId,confirm:me=>zt(q,se.confirm(me))}})).apply(this,arguments)}class Jt{constructor(J,se){this.resolver=se,this.auth=function Rr(q){return q.wrapped()}(J)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(J){return zt(Li(this.auth),this.resolver.resolveSignIn(J))}}class Zt{constructor(J){this._delegate=J,this.multiFactor=R.at(J)}static getOrCreate(J){return Zt.USER_MAP.has(J)||Zt.USER_MAP.set(J,new Zt(J)),Zt.USER_MAP.get(J)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(J){return this._delegate.getIdTokenResult(J)}getIdToken(J){return this._delegate.getIdToken(J)}linkAndRetrieveDataWithCredential(J){return this.linkWithCredential(J)}linkWithCredential(J){var se=this;return(0,_.A)(function*(){return zt(se.auth,R.a2(se._delegate,J))})()}linkWithPhoneNumber(J,se){var me=this;return(0,_.A)(function*(){return Un(me.auth,R.l(me._delegate,J,se))})()}linkWithPopup(J){var se=this;return(0,_.A)(function*(){return zt(se.auth,R.d(se._delegate,J,Hr))})()}linkWithRedirect(J){var se=this;return(0,_.A)(function*(){return yield Zn(R.aJ(se.auth)),R.g(se._delegate,J,Hr)})()}reauthenticateAndRetrieveDataWithCredential(J){return this.reauthenticateWithCredential(J)}reauthenticateWithCredential(J){var se=this;return(0,_.A)(function*(){return zt(se.auth,R.a3(se._delegate,J))})()}reauthenticateWithPhoneNumber(J,se){return Un(this.auth,R.r(this._delegate,J,se))}reauthenticateWithPopup(J){return zt(this.auth,R.e(this._delegate,J,Hr))}reauthenticateWithRedirect(J){var se=this;return(0,_.A)(function*(){return yield Zn(R.aJ(se.auth)),R.h(se._delegate,J,Hr)})()}sendEmailVerification(J){return R.ag(this._delegate,J)}unlink(J){var se=this;return(0,_.A)(function*(){return yield R.ap(se._delegate,J),se})()}updateEmail(J){return R.al(this._delegate,J)}updatePassword(J){return R.am(this._delegate,J)}updatePhoneNumber(J){return R.u(this._delegate,J)}updateProfile(J){return R.ak(this._delegate,J)}verifyBeforeUpdateEmail(J,se){return R.ah(this._delegate,J,se)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Zt.USER_MAP=new WeakMap;const Qr=R.aC;let On=(()=>{class q{constructor(se,me){if(this.app=se,me.isInitialized())return this._delegate=me.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:wt}=se.options;Qr(wt,"invalid-api-key",{appName:se.name}),Qr(wt,"invalid-api-key",{appName:se.name});const Vt=typeof window<"u"?Hr:void 0;this._delegate=me.initialize({options:{persistence:ke(wt,se.name),popupRedirectResolver:Vt}}),this._delegate._updateErrorMap(R.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Zt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(se){this._delegate.languageCode=se}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(se){this._delegate.tenantId=se}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(se,me){R.K(this._delegate,se,me)}applyActionCode(se){return R.a7(this._delegate,se)}checkActionCode(se){return R.a8(this._delegate,se)}confirmPasswordReset(se,me){return R.a6(this._delegate,se,me)}createUserWithEmailAndPassword(se,me){var wt=this;return(0,_.A)(function*(){return zt(wt._delegate,R.aa(wt._delegate,se,me))})()}fetchProvidersForEmail(se){return this.fetchSignInMethodsForEmail(se)}fetchSignInMethodsForEmail(se){return R.af(this._delegate,se)}isSignInWithEmailLink(se){return R.ad(this._delegate,se)}getRedirectResult(){var se=this;return(0,_.A)(function*(){Qr(Gn(),se._delegate,"operation-not-supported-in-this-environment");const me=yield R.j(se._delegate,Hr);return me?zt(se._delegate,Promise.resolve(me)):{credential:null,user:null}})()}addFrameworkForLogging(se){!function dt(q,J){(0,R.aJ)(q)._logFramework(J)}(this._delegate,se)}onAuthStateChanged(se,me,wt){const{next:Vt,error:En,complete:Bn}=Nr(se,me,wt);return this._delegate.onAuthStateChanged(Vt,En,Bn)}onIdTokenChanged(se,me,wt){const{next:Vt,error:En,complete:Bn}=Nr(se,me,wt);return this._delegate.onIdTokenChanged(Vt,En,Bn)}sendSignInLinkToEmail(se,me){return R.ac(this._delegate,se,me)}sendPasswordResetEmail(se,me){return R.a5(this._delegate,se,me||void 0)}setPersistence(se){var me=this;return(0,_.A)(function*(){let wt;switch(function Qn(q,J){Ze(Object.values(Nt).includes(J),q,"invalid-persistence-type"),(0,E.lV)()?Ze(J!==Nt.SESSION,q,"unsupported-persistence-type"):(0,E.Ll)()?Ze(J===Nt.NONE,q,"unsupported-persistence-type"):Cn()?Ze(J===Nt.NONE||J===Nt.LOCAL&&(0,E.zW)(),q,"unsupported-persistence-type"):Ze(J===Nt.NONE||nt(),q,"unsupported-persistence-type")}(me._delegate,se),se){case Nt.SESSION:wt=R.a;break;case Nt.LOCAL:wt=(yield R.aE(R.i)._isAvailable())?R.i:R.b;break;case Nt.NONE:wt=R.U;break;default:return R.ax("argument-error",{appName:me._delegate.name})}return me._delegate.setPersistence(wt)})()}signInAndRetrieveDataWithCredential(se){return this.signInWithCredential(se)}signInAnonymously(){return zt(this._delegate,R.a0(this._delegate))}signInWithCredential(se){return zt(this._delegate,R.a1(this._delegate,se))}signInWithCustomToken(se){return zt(this._delegate,R.a4(this._delegate,se))}signInWithEmailAndPassword(se,me){return zt(this._delegate,R.ab(this._delegate,se,me))}signInWithEmailLink(se,me){return zt(this._delegate,R.ae(this._delegate,se,me))}signInWithPhoneNumber(se,me){return Un(this._delegate,R.s(this._delegate,se,me))}signInWithPopup(se){var me=this;return(0,_.A)(function*(){return Qr(Gn(),me._delegate,"operation-not-supported-in-this-environment"),zt(me._delegate,R.c(me._delegate,se,Hr))})()}signInWithRedirect(se){var me=this;return(0,_.A)(function*(){return Qr(Gn(),me._delegate,"operation-not-supported-in-this-environment"),yield Zn(me._delegate),R.f(me._delegate,se,Hr)})()}updateCurrentUser(se){return this._delegate.updateCurrentUser(se)}verifyPasswordResetCode(se){return R.a9(this._delegate,se)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return q.Persistence=Nt,q})();function Nr(q,J,se){let me=q;"function"!=typeof q&&({next:me,error:J,complete:se}=q);const wt=me;return{next:En=>wt(En&&Zt.getOrCreate(En)),error:J,complete:se}}function ke(q,J){const se=function Pn(q,J){const se=kr();if(!se)return[];const me=R.aF(Rt,q,J);switch(se.getItem(me)){case Nt.NONE:return[R.U];case Nt.LOCAL:return[R.i,R.a];case Nt.SESSION:return[R.a];default:return[]}}(q,J);if(typeof self<"u"&&!se.includes(R.i)&&se.push(R.i),typeof window<"u")for(const me of[R.b,R.a])se.includes(me)||se.push(me);return se.includes(R.U)||se.push(R.U),se}class we{constructor(){this.providerId="phone",this._delegate=new R.P(Li(T.A.auth()))}static credential(J,se){return R.P.credential(J,se)}verifyPhoneNumber(J,se){return this._delegate.verifyPhoneNumber(J,se)}unwrap(){return this._delegate}}we.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,we.PROVIDER_ID=R.P.PROVIDER_ID;const Ce=R.aC;class Ke{constructor(J,se,me=T.A.app()){var wt;Ce(null===(wt=me.options)||void 0===wt?void 0:wt.apiKey,"invalid-api-key",{appName:me.name}),this._delegate=new R.R(me.auth(),J,se),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function pe(q){q.INTERNAL.registerComponent(new ge.uA("auth-compat",J=>{const se=J.getProvider("app-compat").getImmediate(),me=J.getProvider("auth");return new On(se,me)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.V,FacebookAuthProvider:R.W,GithubAuthProvider:R.Y,GoogleAuthProvider:R.X,OAuthProvider:R.Z,SAMLAuthProvider:R._,PhoneAuthProvider:we,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:Ke,TwitterAuthProvider:R.$,Auth:On,AuthCredential:R.L,Error:E.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),q.registerVersion("@firebase/auth-compat","0.5.13")}(T.A)},467:(rn,ze,k)=>{function _(R,E,ie,Ae,ge,Ve,Be){try{var Ee=R[Ve](Be),_e=Ee.value}catch(Ge){return void ie(Ge)}Ee.done?E(_e):Promise.resolve(_e).then(Ae,ge)}function T(R){return function(){var E=this,ie=arguments;return new Promise(function(Ae,ge){var Ve=R.apply(E,ie);function Be(_e){_(Ve,Ae,ge,Be,Ee,"next",_e)}function Ee(_e){_(Ve,Ae,ge,Be,Ee,"throw",_e)}Be(void 0)})}}k.d(ze,{A:()=>T})},1635:(rn,ze,k)=>{function E(xe,qe){var dt={};for(var _t in xe)Object.prototype.hasOwnProperty.call(xe,_t)&&qe.indexOf(_t)<0&&(dt[_t]=xe[_t]);if(null!=xe&&"function"==typeof Object.getOwnPropertySymbols){var Et=0;for(_t=Object.getOwnPropertySymbols(xe);Et<_t.length;Et++)qe.indexOf(_t[Et])<0&&Object.prototype.propertyIsEnumerable.call(xe,_t[Et])&&(dt[_t[Et]]=xe[_t[Et]])}return dt}function Ge(xe,qe,dt,_t){return new(dt||(dt=Promise))(function(Ye,Kt){function pn(wn){try{sn(_t.next(wn))}catch(An){Kt(An)}}function nn(wn){try{sn(_t.throw(wn))}catch(An){Kt(An)}}function sn(wn){wn.done?Ye(wn.value):function Et(Ye){return Ye instanceof dt?Ye:new dt(function(Kt){Kt(Ye)})}(wn.value).then(pn,nn)}sn((_t=_t.apply(xe,qe||[])).next())})}function oe(xe){return this instanceof oe?(this.v=xe,this):new oe(xe)}function le(xe,qe,dt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Et,_t=dt.apply(xe,qe||[]),Ye=[];return Et=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),pn("next"),pn("throw"),pn("return",function Kt(nt){return function(Cn){return Promise.resolve(Cn).then(nt,An)}}),Et[Symbol.asyncIterator]=function(){return this},Et;function pn(nt,Cn){_t[nt]&&(Et[nt]=function(Gn){return new Promise(function(rr,St){Ye.push([nt,Gn,rr,St])>1||nn(nt,Gn)})},Cn&&(Et[nt]=Cn(Et[nt])))}function nn(nt,Cn){try{!function sn(nt){nt.value instanceof oe?Promise.resolve(nt.value.v).then(wn,An):Ln(Ye[0][2],nt)}(_t[nt](Cn))}catch(Gn){Ln(Ye[0][3],Gn)}}function wn(nt){nn("next",nt)}function An(nt){nn("throw",nt)}function Ln(nt,Cn){nt(Cn),Ye.shift(),Ye.length&&nn(Ye[0][0],Ye[0][1])}}function je(xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt,qe=xe[Symbol.asyncIterator];return qe?qe.call(xe):(xe=function st(xe){var qe="function"==typeof Symbol&&Symbol.iterator,dt=qe&&xe[qe],_t=0;if(dt)return dt.call(xe);if(xe&&"number"==typeof xe.length)return{next:function(){return xe&&_t>=xe.length&&(xe=void 0),{value:xe&&xe[_t++],done:!xe}}};throw new TypeError(qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(xe),dt={},_t("next"),_t("throw"),_t("return"),dt[Symbol.asyncIterator]=function(){return this},dt);function _t(Ye){dt[Ye]=xe[Ye]&&function(Kt){return new Promise(function(pn,nn){!function Et(Ye,Kt,pn,nn){Promise.resolve(nn).then(function(sn){Ye({value:sn,done:pn})},Kt)}(pn,nn,(Kt=xe[Ye](Kt)).done,Kt.value)})}}}k.d(ze,{AQ:()=>le,N3:()=>oe,Tt:()=>E,sH:()=>Ge,xN:()=>je}),"function"==typeof SuppressedError&&SuppressedError}},rn=>{rn(rn.s=7827)}]);