<app-header></app-header>
<app-top-products></app-top-products>
<h1>Our Products</h1>
<div *ngIf="loading" class="loading-container">
  <div class="loader"></div>
  <p>Loading...</p>
</div>
<div *ngIf="!loading" class="products">
  <div class="products-container">
    <p (click)="navigateToCategotyPage('guitar')">Guitars</p>
    <div class="product">
      <div *ngFor="let product of guitarProducts" class="single-product">
        <div class="delete-button" *ngIf="isAdmin">
          <img
            (click)="removeProduct(product.product.category, product.key)"
            src="assets/remove.png"
            alt="img"
          />
          <img
            *ngIf="isEditing === ''"
            (click)="editing(product.key)"
            src="assets/pen.png"
            alt="img"
          />
          <img
            *ngIf="isEditing !== ''"
            (click)="cancelEditing()"
            src="assets/pen.png"
            alt="img"
          />
        </div>
        <div [ngClass]="isEditing ? 'display-none' : 'hover'">
          <button (click)="addInCart(product)">Add to cart</button>
          <div>
            <span (click)="navigation(product.key, product.product.category)"
              >See Product</span
            >
            <span
              (click)="likeUnlikeProduct(product.key, product.product.category)"
            >
              <img
                *ngIf="!checkIfliked(product.key)"
                (click)="
                  likeUnlikeProduct(product.key, product.product.category)
                "
                src="assets/heart.png"
                alt="img"
              />
              <img
                *ngIf="checkIfliked(product.key)"
                (click)="
                  likeUnlikeProduct(product.key, product.product.category)
                "
                src="assets/heart-red.png"
                alt="img"
              />
            </span>
          </div>
        </div>
        <div class="edit" *ngIf="isEditing === product.key">
          <app-reusable-form
            (formSubmitted)="
              onFormSubmitted($event, product.key, product.product.category)
            "
          ></app-reusable-form>
          <div>
            <button (click)="cancelEditing()">Cancel</button>
          </div>
        </div>
        <div
          [ngClass]="
            isEditing === product.key ? 'display-none' : 'img-placeholder'
          "
        >
          <div *ngIf="product.product.discount > 0" class="discount">
            -{{ product.product.discount }}%
          </div>
          <img [src]="product.product.photoUrl[0]" alt="img" />
        </div>
        <div class="info">
          <span>{{ product.product.category }}</span>
          <span>{{ product.product.model }}</span>
          <span *ngIf="!product.product.discount">{{ product.product.price }}</span>
          <div *ngIf="product.product.discount>0" class="if-discount">
            <span> {{ product.product.price }}$ </span>
            <span>   
                {{
                  calculateDiscount(
                    product.product.price,
                    product.product.discount
                  )
                }}$
              </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="products-container">
    <p (click)="navigateToCategotyPage('drum')">Drums</p>
    <div class="product">
      <div *ngFor="let product of drumProducts" class="single-product">
        <div class="delete-button" *ngIf="isAdmin">
          <img
            (click)="removeProduct(product.product.category, product.key)"
            src="assets/remove.png"
            alt="img"
          />
          <img
            *ngIf="isEditing === ''"
            (click)="editing(product.key)"
            src="assets/pen.png"
            alt="img"
          />
          <img
            *ngIf="isEditing !== ''"
            (click)="cancelEditing()"
            src="assets/pen.png"
            alt="img"
          />
        </div>
        <div [ngClass]="isEditing ? 'display-none' : 'hover'">
          <button (click)="addInCart(product)">Add to cart</button>
          <div>
            <span (click)="navigation(product.key, product.product.category)"
              >See Product</span
            >
            <span
              (click)="likeUnlikeProduct(product.key, product.product.category)"
            >
              <img
                *ngIf="!checkIfliked(product.key)"
                (click)="
                  likeUnlikeProduct(product.key, product.product.category)
                "
                src="assets/heart.png"
                alt="img"
              />
              <img
                *ngIf="checkIfliked(product.key)"
                (click)="
                  likeUnlikeProduct(product.key, product.product.category)
                "
                src="assets/heart-red.png"
                alt="img"
              />
            </span>
          </div>
        </div>
        <div class="edit" *ngIf="isEditing === product.key">
          <app-reusable-form
            (formSubmitted)="
              onFormSubmitted($event, product.key, product.product.category)
            "
          ></app-reusable-form>
          <div>
            <button (click)="cancelEditing()">Cancel</button>
          </div>
        </div>
        <div
          [ngClass]="
            isEditing === product.key ? 'display-none' : 'img-placeholder'
          "
        >
          <div *ngIf="product.product.discount > 0" class="discount">
            {{ product.product.discount }}
          </div>
          <img [src]="product.product.photoUrl[0]" alt="img" />
        </div>
        <div class="info">
          <span>{{ product.product.category }}</span>
          <span>{{ product.product.model }}</span>
          <span *ngIf="!product.product.discount">{{ product.product.price }}</span>
          <div *ngIf="product.product.discount>0" class="if-discount">
            <span> {{ product.product.price }}$ </span>
            <span *ngIf="product.product.discount > 0">   
                {{
                  calculateDiscount(
                    product.product.price,
                    product.product.discount
                  )
                }}$
              </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="products-container">
    <p (click)="navigateToCategotyPage('piano')">Pianos</p>
    <div class="product">
      <div *ngFor="let product of pianoProducts" class="single-product">
        <div class="delete-button" *ngIf="isAdmin">
          <img
            (click)="removeProduct(product.product.category, product.key)"
            src="assets/remove.png"
            alt="img"
          />
          <img
            *ngIf="isEditing === ''"
            (click)="editing(product.key)"
            src="assets/pen.png"
            alt="img"
          />
          <img
            *ngIf="isEditing !== ''"
            (click)="cancelEditing()"
            src="assets/pen.png"
            alt="img"
          />
        </div>
        <div [ngClass]="isEditing ? 'display-none' : 'hover'">
          <button (click)="addInCart(product)">Add to cart</button>
          <div>
            <span (click)="navigation(product.key, product.product.category)"
              >See Product</span
            >
            <span
              (click)="likeUnlikeProduct(product.key, product.product.category)"
            >
              <img
                *ngIf="!checkIfliked(product.key)"
                (click)="
                  likeUnlikeProduct(product.key, product.product.category)
                "
                src="assets/heart.png"
                alt="img"
              />
              <img
                *ngIf="checkIfliked(product.key)"
                (click)="
                  likeUnlikeProduct(product.key, product.product.category)
                "
                src="assets/heart-red.png"
                alt="img"
              />
            </span>
          </div>
        </div>
        <div class="edit" *ngIf="isEditing === product.key">
          <app-reusable-form
            (formSubmitted)="
              onFormSubmitted($event, product.key, product.product.category)
            "
          ></app-reusable-form>
          <div>
            <button (click)="cancelEditing()">Cancel</button>
          </div>
        </div>
        <div
          [ngClass]="
            isEditing === product.key ? 'display-none' : 'img-placeholder'
          "
        >
          <div *ngIf="product.product.discount > 0" class="discount">
            -{{ product.product.discount }}%
          </div>
          <img [src]="product.product.photoUrl[0]" alt="img" />
        </div>
        <div class="info">
          <span>{{ product.product.category }}</span>
          <span>{{ product.product.model }}</span>
          <span *ngIf="!product.product.discount">{{ product.product.price }}</span>
          <div *ngIf="product.product.discount>0" class="if-discount">
            <span> {{ product.product.price }}$ </span>
            <span *ngIf="product.product.discount > 0">   
                {{
                  calculateDiscount(
                    product.product.price,
                    product.product.discount
                  )
                }}$
              </span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="products-container">
    <p (click)="navigateToCategotyPage('bass')">Basses</p>
    <div class="product">
      <div *ngFor="let product of bassProducts" class="single-product">
        <div class="delete-button" *ngIf="isAdmin">
          <img
            (click)="removeProduct(product.product.category, product.key)"
            src="assets/remove.png"
            alt="img"
          />
          <img
            *ngIf="isEditing === ''"
            (click)="editing(product.key)"
            src="assets/pen.png"
            alt="img"
          />
          <img
            *ngIf="isEditing !== ''"
            (click)="cancelEditing()"
            src="assets/pen.png"
            alt="img"
          />
        </div>
        <div [ngClass]="isEditing ? 'display-none' : 'hover'">
          <button (click)="addInCart(product)">Add to cart</button>
          <div>
            <span (click)="navigation(product.key, product.product.category)"
              >See Product</span
            >
            <span
              (click)="likeUnlikeProduct(product.key, product.product.category)"
            >
              <img
                *ngIf="!checkIfliked(product.key)"
                (click)="
                  likeUnlikeProduct(product.key, product.product.category)
                "
                src="assets/heart.png"
                alt="img"
              />
              <img
                *ngIf="checkIfliked(product.key)"
                (click)="
                  likeUnlikeProduct(product.key, product.product.category)
                "
                src="assets/heart-red.png"
                alt="img"
              />
            </span>
          </div>
        </div>
        <div class="edit" *ngIf="isEditing === product.key">
          <app-reusable-form
            (formSubmitted)="
              onFormSubmitted($event, product.key, product.product.category)
            "
          ></app-reusable-form>
          <div>
            <button (click)="cancelEditing()">Cancel</button>
          </div>
        </div>
        <div
          [ngClass]="
            isEditing === product.key ? 'display-none' : 'img-placeholder'
          "
        >
          <div *ngIf="product.product.discount > 0" class="discount">
            -{{ product.product.discount }}%
          </div>
          <img [src]="product.product.photoUrl[0]" alt="img" />
        </div>
        <div class="info">
          <span>{{ product.product.category }}</span>
          <span>{{ product.product.model }}</span>
          <span *ngIf="!product.product.discount">{{ product.product.price }}</span>
          <div *ngIf="product.product.discount>0" class="if-discount">
            <span> {{ product.product.price }}$ </span>
            <span *ngIf="product.product.discount > 0">   
                {{
                  calculateDiscount(
                    product.product.price,
                    product.product.discount
                  )
                }}$
              </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<app-footer></app-footer>
