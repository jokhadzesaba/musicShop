"use strict";(self.webpackChunkmusicshop=self.webpackChunkmusicshop||[]).push([[590],{1944:(jt,He,V)=>{V.d(He,{$:()=>ka,A:()=>fe,G:()=>Ie,K:()=>Ki,L:()=>Yr,N:()=>Si,P:()=>cr,R:()=>Ut,U:()=>In,V:()=>$s,W:()=>oa,X:()=>vc,Y:()=>_l,Z:()=>ao,_:()=>xa,a:()=>_o,a0:()=>Y,a1:()=>Xa,a2:()=>lo,a3:()=>yr,a4:()=>Ws,a5:()=>ho,a6:()=>ca,a7:()=>vl,a8:()=>Fn,a9:()=>vr,aA:()=>Wn,aB:()=>ke,aC:()=>pe,aD:()=>Ns,aE:()=>It,aF:()=>wn,aG:()=>Ac,aH:()=>qs,aI:()=>$a,aJ:()=>gn,aN:()=>So,aQ:()=>Xs,aa:()=>qc,ab:()=>Lo,ac:()=>ua,ad:()=>au,ae:()=>Es,af:()=>hr,ag:()=>po,ah:()=>Hr,ak:()=>Il,al:()=>ai,am:()=>Cl,ap:()=>er,aq:()=>ot,as:()=>Vo,at:()=>cu,au:()=>Ve,av:()=>en,aw:()=>Ze,ax:()=>Ae,ay:()=>bc,az:()=>zu,b:()=>gd,c:()=>Pf,d:()=>zp,e:()=>Gu,f:()=>wr,g:()=>Xc,h:()=>Jc,i:()=>Dc,j:()=>Zc,k:()=>Th,l:()=>ic,m:()=>Rc,o:()=>Oc,p:()=>Le,r:()=>Uo,s:()=>es,u:()=>ym});var y=V(1528),q=V(7144),k=V(9360),D=V(5976),W=V(1316),_e=V(4920);const Le={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},fe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ie=function xe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},be=function it(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pt=new q.UR("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tt=new D.YJ("@firebase/auth");function st(S,..._){tt.logLevel<=D.Ge.ERROR&&tt.error(`Auth (${k.SDK_VERSION}): ${S}`,..._)}function Ae(S,..._){throw Xe(S,..._)}function ke(S,..._){return Xe(S,..._)}function ae(S,_,E){const b=Object.assign(Object.assign({},be()),{[_]:E});return new q.UR("auth","Firebase",b).create(_,{appName:S.name})}function Re(S,_,E){if(!(_ instanceof E))throw E.name!==_.constructor.name&&Ae(S,"argument-error"),ae(S,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xe(S,..._){if("string"!=typeof S){const E=_[0],b=[..._.slice(1)];return b[0]&&(b[0].appName=S.name),S._errorFactory.create(E,...b)}return pt.create(S,..._)}function pe(S,_,...E){if(!S)throw Xe(_,...E)}function we(S){const _="INTERNAL ASSERTION FAILED: "+S;throw st(_),new Error(_)}function Ve(S,_){S||we(_)}function ze(){var S;return typeof self<"u"&&(null===(S=self.location)||void 0===S?void 0:S.href)||""}function at(){return"http:"===wt()||"https:"===wt()}function wt(){var S;return typeof self<"u"&&(null===(S=self.location)||void 0===S?void 0:S.protocol)||null}class Lt{constructor(_,E){this.shortDelay=_,this.longDelay=E,Ve(E>_,"Short delay should be less than long delay!"),this.isMobile=(0,q.AV)()||(0,q.AL)()}get(){return function Tt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,q.Cc)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rn(S,_){Ve(S.emulator,"Emulator should always be set here");const{url:E}=S.emulator;return _?`${E}${_.startsWith("/")?_.slice(1):_}`:E}class Ue{static initialize(_,E,b){this.fetchImpl=_,E&&(this.headersImpl=E),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Je={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},lt=new Lt(3e4,6e4);function qe(S,_){return S.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:S.tenantId}):_}function gt(S,_,E,b){return ft.apply(this,arguments)}function ft(){return(ft=(0,y.c)(function*(S,_,E,b,K={}){return At(S,K,(0,y.c)(function*(){let oe={},Ne={};b&&("GET"===_?Ne=b:oe={body:JSON.stringify(b)});const ct=(0,q.ik)(Object.assign({key:S.config.apiKey},Ne)).slice(1),Pt=yield S._getAdditionalHeaders();return Pt["Content-Type"]="application/json",S.languageCode&&(Pt["X-Firebase-Locale"]=S.languageCode),Ue.fetch()(En(S,S.config.apiHost,E,ct),Object.assign({method:_,headers:Pt,referrerPolicy:"no-referrer"},oe))}))})).apply(this,arguments)}function At(S,_,E){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,y.c)(function*(S,_,E){S._canInitEmulator=!1;const b=Object.assign(Object.assign({},Je),_);try{const K=new Xt(S),oe=yield Promise.race([E(),K.promise]);K.clearNetworkTimeout();const Ne=yield oe.json();if("needConfirmation"in Ne)throw Sn(S,"account-exists-with-different-credential",Ne);if(oe.ok&&!("errorMessage"in Ne))return Ne;{const ct=oe.ok?Ne.errorMessage:Ne.error.message,[Pt,hn]=ct.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pt)throw Sn(S,"credential-already-in-use",Ne);if("EMAIL_EXISTS"===Pt)throw Sn(S,"email-already-in-use",Ne);if("USER_DISABLED"===Pt)throw Sn(S,"user-disabled",Ne);const Nn=b[Pt]||Pt.toLowerCase().replace(/[_\s]+/g,"-");if(hn)throw ae(S,Nn,hn);Ae(S,Nn)}}catch(K){if(K instanceof q.kx)throw K;Ae(S,"network-request-failed",{message:String(K)})}})).apply(this,arguments)}function tn(S,_,E,b){return nn.apply(this,arguments)}function nn(){return(nn=(0,y.c)(function*(S,_,E,b,K={}){const oe=yield gt(S,_,E,b,K);return"mfaPendingCredential"in oe&&Ae(S,"multi-factor-auth-required",{_serverResponse:oe}),oe})).apply(this,arguments)}function En(S,_,E,b){const K=`${_}${E}?${b}`;return S.config.emulator?rn(S.config,K):`${S.config.apiScheme}://${K}`}function An(S){switch(S){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Xt{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((E,b)=>{this.timer=setTimeout(()=>b(ke(this.auth,"network-request-failed")),lt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Sn(S,_,E){const b={appName:S.name};E.email&&(b.email=E.email),E.phoneNumber&&(b.phoneNumber=E.phoneNumber);const K=ke(S,_,b);return K.customData._tokenResponse=E,K}function qn(S){return void 0!==S&&void 0!==S.getResponse}function Vr(S){return void 0!==S&&void 0!==S.enterprise}class Wt{constructor(_){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===_.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=_.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=_.recaptchaEnforcementState}getProviderEnforcementState(_){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const E of this.recaptchaEnforcementState)if(E.provider&&E.provider===_)return An(E.enforcementState);return null}isProviderEnabled(_){return"ENFORCE"===this.getProviderEnforcementState(_)||"AUDIT"===this.getProviderEnforcementState(_)}}function Bt(){return(Bt=(0,y.c)(function*(S){return(yield gt(S,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Xr(S,_){return Un.apply(this,arguments)}function Un(){return(Un=(0,y.c)(function*(S,_){return gt(S,"GET","/v2/recaptchaConfig",qe(S,_))})).apply(this,arguments)}function Sr(){return(Sr=(0,y.c)(function*(S,_){return gt(S,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function ar(){return(ar=(0,y.c)(function*(S,_){return gt(S,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function yn(){return(yn=(0,y.c)(function*(S,_){return gt(S,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function ui(S){if(S)try{const _=new Date(Number(S));if(!isNaN(_.getTime()))return _.toUTCString()}catch{}}function qi(){return(qi=(0,y.c)(function*(S,_=!1){const E=(0,q.Yj)(S),b=yield E.getIdToken(_),K=xn(b);pe(K&&K.exp&&K.auth_time&&K.iat,E.auth,"internal-error");const oe="object"==typeof K.firebase?K.firebase:void 0,Ne=oe?.sign_in_provider;return{claims:K,token:b,authTime:ui(Ui(K.auth_time)),issuedAtTime:ui(Ui(K.iat)),expirationTime:ui(Ui(K.exp)),signInProvider:Ne||null,signInSecondFactor:oe?.sign_in_second_factor||null}})).apply(this,arguments)}function Ui(S){return 1e3*Number(S)}function xn(S){const[_,E,b]=S.split(".");if(void 0===_||void 0===E||void 0===b)return st("JWT malformed, contained fewer than 3 sections"),null;try{const K=(0,q.WW)(E);return K?JSON.parse(K):(st("Failed to decode base64 JWT payload"),null)}catch(K){return st("Caught error parsing JWT payload as JSON",K?.toString()),null}}function Or(S,_){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,y.c)(function*(S,_,E=!1){if(E)return _;try{return yield _}catch(b){throw b instanceof q.kx&&function Ur({code:S}){return"auth/user-disabled"===S||"auth/user-token-expired"===S}(b)&&S.auth.currentUser===S&&(yield S.auth.signOut()),b}})).apply(this,arguments)}class zn{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var E;if(_){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const K=(null!==(E=this.user.stsTokenManager.expirationTime)&&void 0!==E?E:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(_=!1){var E=this;if(!this.isRunning)return;const b=this.getInterval(_);this.timerId=setTimeout((0,y.c)(function*(){yield E.iteration()}),b)}iteration(){var _=this;return(0,y.c)(function*(){try{yield _.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===E?.code&&_.schedule(!0))}_.schedule()})()}}class Ri{constructor(_,E){this.createdAt=_,this.lastLoginAt=E,this._initializeTime()}_initializeTime(){this.lastSignInTime=ui(this.lastLoginAt),this.creationTime=ui(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kr(S){return $r.apply(this,arguments)}function $r(){return $r=(0,y.c)(function*(S){var _;const E=S.auth,b=yield S.getIdToken(),K=yield Or(S,function Cn(S,_){return yn.apply(this,arguments)}(E,{idToken:b}));pe(K?.users.length,E,"internal-error");const oe=K.users[0];S._notifyReloadListener(oe);const Ne=null!==(_=oe.providerUserInfo)&&void 0!==_&&_.length?function Ye(S){return S.map(_=>{var{providerId:E}=_,b=(0,W.sX)(_,["providerId"]);return{providerId:E,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}(oe.providerUserInfo):[],ct=function Et(S,_){return[...S.filter(b=>!_.some(K=>K.providerId===b.providerId)),..._]}(S.providerData,Ne),Nn=!!S.isAnonymous&&!(S.email&&oe.passwordHash||ct?.length),sr={uid:oe.localId,displayName:oe.displayName||null,photoURL:oe.photoUrl||null,email:oe.email||null,emailVerified:oe.emailVerified||!1,phoneNumber:oe.phoneNumber||null,tenantId:oe.tenantId||null,providerData:ct,metadata:new Ri(oe.createdAt,oe.lastLoginAt),isAnonymous:Nn};Object.assign(S,sr)}),$r.apply(this,arguments)}function Ci(){return(Ci=(0,y.c)(function*(S){const _=(0,q.Yj)(S);yield Kr(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function We(){return(We=(0,y.c)(function*(S,_){const E=yield At(S,{},(0,y.c)(function*(){const b=(0,q.ik)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:K,apiKey:oe}=S.config,Ne=En(S,K,"/v1/token",`key=${oe}`),ct=yield S._getAdditionalHeaders();return ct["Content-Type"]="application/x-www-form-urlencoded",Ue.fetch()(Ne,{method:"POST",headers:ct,body:b})}));return{accessToken:E.access_token,expiresIn:E.expires_in,refreshToken:E.refresh_token}})).apply(this,arguments)}function de(){return(de=(0,y.c)(function*(S,_){return gt(S,"POST","/v2/accounts:revokeToken",qe(S,_))})).apply(this,arguments)}class ee{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){pe(_.idToken,"internal-error"),pe(typeof _.idToken<"u","internal-error"),pe(typeof _.refreshToken<"u","internal-error");const E="expiresIn"in _&&typeof _.expiresIn<"u"?Number(_.expiresIn):function Bn(S){const _=xn(S);return pe(_,"internal-error"),pe(typeof _.exp<"u","internal-error"),pe(typeof _.iat<"u","internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,E)}getToken(_,E=!1){var b=this;return(0,y.c)(function*(){return pe(!b.accessToken||b.refreshToken,_,"user-token-expired"),E||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(_,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,E){var b=this;return(0,y.c)(function*(){const{accessToken:K,refreshToken:oe,expiresIn:Ne}=yield function ye(S,_){return We.apply(this,arguments)}(_,E);b.updateTokensAndExpiration(K,oe,Number(Ne))})()}updateTokensAndExpiration(_,E,b){this.refreshToken=E||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(_,E){const{refreshToken:b,accessToken:K,expirationTime:oe}=E,Ne=new ee;return b&&(pe("string"==typeof b,"internal-error",{appName:_}),Ne.refreshToken=b),K&&(pe("string"==typeof K,"internal-error",{appName:_}),Ne.accessToken=K),oe&&(pe("number"==typeof oe,"internal-error",{appName:_}),Ne.expirationTime=oe),Ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new ee,this.toJSON())}_performRefresh(){return we("not implemented")}}function Z(S,_){pe("string"==typeof S||typeof S>"u","internal-error",{appName:_})}class te{constructor(_){var{uid:E,auth:b,stsTokenManager:K}=_,oe=(0,W.sX)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=E,this.auth=b,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=oe.displayName||null,this.email=oe.email||null,this.emailVerified=oe.emailVerified||!1,this.phoneNumber=oe.phoneNumber||null,this.photoURL=oe.photoURL||null,this.isAnonymous=oe.isAnonymous||!1,this.tenantId=oe.tenantId||null,this.providerData=oe.providerData?[...oe.providerData]:[],this.metadata=new Ri(oe.createdAt||void 0,oe.lastLoginAt||void 0)}getIdToken(_){var E=this;return(0,y.c)(function*(){const b=yield Or(E,E.stsTokenManager.getToken(E.auth,_));return pe(b,E.auth,"internal-error"),E.accessToken!==b&&(E.accessToken=b,yield E.auth._persistUserIfCurrent(E),E.auth._notifyListenersIfCurrent(E)),b})()}getIdTokenResult(_){return function Zr(S){return qi.apply(this,arguments)}(this,_)}reload(){return function xs(S){return Ci.apply(this,arguments)}(this)}_assign(_){this!==_&&(pe(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(E=>Object.assign({},E)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){const E=new te(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}));return E.metadata._copy(this.metadata),E}_onReload(_){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,E=!1){var b=this;return(0,y.c)(function*(){let K=!1;_.idToken&&_.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(_),K=!0),E&&(yield Kr(b)),yield b.auth._persistUserIfCurrent(b),K&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var _=this;return(0,y.c)(function*(){const E=yield _.getIdToken();return yield Or(_,function si(S,_){return Sr.apply(this,arguments)}(_.auth,{idToken:E})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,E){var b,K,oe,Ne,ct,Pt,hn,Nn;const sr=null!==(b=E.displayName)&&void 0!==b?b:void 0,Po=null!==(K=E.email)&&void 0!==K?K:void 0,Ts=null!==(oe=E.phoneNumber)&&void 0!==oe?oe:void 0,xl=null!==(Ne=E.photoURL)&&void 0!==Ne?Ne:void 0,bo=null!==(ct=E.tenantId)&&void 0!==ct?ct:void 0,Mo=null!==(Pt=E._redirectEventId)&&void 0!==Pt?Pt:void 0,Nc=null!==(hn=E.createdAt)&&void 0!==hn?hn:void 0,Sh=null!==(Nn=E.lastLoginAt)&&void 0!==Nn?Nn:void 0,{uid:jo,emailVerified:ol,isAnonymous:vu,providerData:Ah,stsTokenManager:Ds}=E;pe(jo&&Ds,_,"internal-error");const or=ee.fromJSON(this.name,Ds);pe("string"==typeof jo,_,"internal-error"),Z(sr,_.name),Z(Po,_.name),pe("boolean"==typeof ol,_,"internal-error"),pe("boolean"==typeof vu,_,"internal-error"),Z(Ts,_.name),Z(xl,_.name),Z(bo,_.name),Z(Mo,_.name),Z(Nc,_.name),Z(Sh,_.name);const wd=new te({uid:jo,auth:_,email:Po,emailVerified:ol,displayName:sr,isAnonymous:vu,photoURL:xl,phoneNumber:Ts,tenantId:bo,stsTokenManager:or,createdAt:Nc,lastLoginAt:Sh});return Ah&&Array.isArray(Ah)&&(wd.providerData=Ah.map(al=>Object.assign({},al))),Mo&&(wd._redirectEventId=Mo),wd}static _fromIdTokenResponse(_,E,b=!1){return(0,y.c)(function*(){const K=new ee;K.updateFromServerResponse(E);const oe=new te({uid:E.localId,auth:_,stsTokenManager:K,isAnonymous:b});return yield Kr(oe),oe})()}}const $e=new Map;function It(S){Ve(S instanceof Function,"Expected a class definition");let _=$e.get(S);return _?(Ve(_ instanceof S,"Instance stored in cache mismatched with class"),_):(_=new S,$e.set(S,_),_)}const In=(()=>{class S{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.c)(function*(){return!0})()}_set(E,b){var K=this;return(0,y.c)(function*(){K.storage[E]=b})()}_get(E){var b=this;return(0,y.c)(function*(){const K=b.storage[E];return void 0===K?null:K})()}_remove(E){var b=this;return(0,y.c)(function*(){delete b.storage[E]})()}_addListener(E,b){}_removeListener(E,b){}}return S.type="NONE",S})();function wn(S,_,E){return`firebase:${S}:${_}:${E}`}class Ln{constructor(_,E,b){this.persistence=_,this.auth=E,this.userKey=b;const{config:K,name:oe}=this.auth;this.fullUserKey=wn(this.userKey,K.apiKey,oe),this.fullPersistenceKey=wn("persistence",K.apiKey,oe),this.boundEventHandler=E._onStorageEvent.bind(E),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,y.c)(function*(){const E=yield _.persistence._get(_.fullUserKey);return E?te._fromJSON(_.auth,E):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var E=this;return(0,y.c)(function*(){if(E.persistence===_)return;const b=yield E.getCurrentUser();return yield E.removeCurrentUser(),E.persistence=_,b?E.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,E,b="authUser"){return(0,y.c)(function*(){if(!E.length)return new Ln(It(In),_,b);const K=(yield Promise.all(E.map(function(){var hn=(0,y.c)(function*(Nn){if(yield Nn._isAvailable())return Nn});return function(Nn){return hn.apply(this,arguments)}}()))).filter(hn=>hn);let oe=K[0]||It(In);const Ne=wn(b,_.config.apiKey,_.name);let ct=null;for(const hn of E)try{const Nn=yield hn._get(Ne);if(Nn){const sr=te._fromJSON(_,Nn);hn!==oe&&(ct=sr),oe=hn;break}}catch{}const Pt=K.filter(hn=>hn._shouldAllowMigration);return oe._shouldAllowMigration&&Pt.length?(oe=Pt[0],ct&&(yield oe._set(Ne,ct.toJSON())),yield Promise.all(E.map(function(){var hn=(0,y.c)(function*(Nn){if(Nn!==oe)try{yield Nn._remove(Ne)}catch{}});return function(Nn){return hn.apply(this,arguments)}}())),new Ln(oe,_,b)):new Ln(oe,_,b)})()}}function Zt(S){const _=S.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(Oe(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(Nr(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(nt(_))return"Blackberry";if(St(_))return"Webos";if(pn(_))return"Safari";if((_.includes("chrome/")||jn(_))&&!_.includes("edge/"))return"Chrome";if(Ze(_))return"Android";{const b=S.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function Nr(S=(0,q.Su)()){return/firefox\//i.test(S)}function pn(S=(0,q.Su)()){const _=S.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function jn(S=(0,q.Su)()){return/crios\//i.test(S)}function Oe(S=(0,q.Su)()){return/iemobile/i.test(S)}function Ze(S=(0,q.Su)()){return/android/i.test(S)}function nt(S=(0,q.Su)()){return/blackberry/i.test(S)}function St(S=(0,q.Su)()){return/webos/i.test(S)}function en(S=(0,q.Su)()){return/iphone|ipad|ipod/i.test(S)||/macintosh/i.test(S)&&/mobile/i.test(S)}function Wn(S=(0,q.Su)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(S)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(S)}function ei(S=(0,q.Su)()){return en(S)||Ze(S)||St(S)||nt(S)||/windows phone/i.test(S)||Oe(S)}function le(S,_=[]){let E;switch(S){case"Browser":E=Zt((0,q.Su)());break;case"Worker":E=`${Zt((0,q.Su)())}-${S}`;break;default:E=S}const b=_.length?_.join(","):"FirebaseCore-web";return`${E}/JsCore/${k.SDK_VERSION}/${b}`}class Ce{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,E){const b=oe=>new Promise((Ne,ct)=>{try{Ne(_(oe))}catch(Pt){ct(Pt)}});b.onAbort=E,this.queue.push(b);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(_){var E=this;return(0,y.c)(function*(){if(E.auth.currentUser===_)return;const b=[];try{for(const K of E.queue)yield K(_),K.onAbort&&b.push(K.onAbort)}catch(K){b.reverse();for(const oe of b)try{oe()}catch{}throw E.auth._errorFactory.create("login-blocked",{originalMessage:K?.message})}})()}}function yt(){return(yt=(0,y.c)(function*(S,_={}){return gt(S,"GET","/v2/passwordPolicy",qe(S,_))})).apply(this,arguments)}class kt{constructor(_){var E,b,K,oe;const Ne=_.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(E=Ne.minPasswordLength)&&void 0!==E?E:6,Ne.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Ne.maxPasswordLength),void 0!==Ne.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Ne.containsLowercaseCharacter),void 0!==Ne.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Ne.containsUppercaseCharacter),void 0!==Ne.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Ne.containsNumericCharacter),void 0!==Ne.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Ne.containsNonAlphanumericCharacter),this.enforcementState=_.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(K=null===(b=_.allowedNonAlphanumericCharacters)||void 0===b?void 0:b.join(""))&&void 0!==K?K:"",this.forceUpgradeOnSignin=null!==(oe=_.forceUpgradeOnSignin)&&void 0!==oe&&oe,this.schemaVersion=_.schemaVersion}validatePassword(_){var E,b,K,oe,Ne,ct;const Pt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(_,Pt),this.validatePasswordCharacterOptions(_,Pt),Pt.isValid&&(Pt.isValid=null===(E=Pt.meetsMinPasswordLength)||void 0===E||E),Pt.isValid&&(Pt.isValid=null===(b=Pt.meetsMaxPasswordLength)||void 0===b||b),Pt.isValid&&(Pt.isValid=null===(K=Pt.containsLowercaseLetter)||void 0===K||K),Pt.isValid&&(Pt.isValid=null===(oe=Pt.containsUppercaseLetter)||void 0===oe||oe),Pt.isValid&&(Pt.isValid=null===(Ne=Pt.containsNumericCharacter)||void 0===Ne||Ne),Pt.isValid&&(Pt.isValid=null===(ct=Pt.containsNonAlphanumericCharacter)||void 0===ct||ct),Pt}validatePasswordLengthOptions(_,E){const b=this.customStrengthOptions.minPasswordLength,K=this.customStrengthOptions.maxPasswordLength;b&&(E.meetsMinPasswordLength=_.length>=b),K&&(E.meetsMaxPasswordLength=_.length<=K)}validatePasswordCharacterOptions(_,E){let b;this.updatePasswordCharacterOptionsStatuses(E,!1,!1,!1,!1);for(let K=0;K<_.length;K++)b=_.charAt(K),this.updatePasswordCharacterOptionsStatuses(E,b>="a"&&b<="z",b>="A"&&b<="Z",b>="0"&&b<="9",this.allowedNonAlphanumericCharacters.includes(b))}updatePasswordCharacterOptionsStatuses(_,E,b,K,oe){this.customStrengthOptions.containsLowercaseLetter&&(_.containsLowercaseLetter||(_.containsLowercaseLetter=E)),this.customStrengthOptions.containsUppercaseLetter&&(_.containsUppercaseLetter||(_.containsUppercaseLetter=b)),this.customStrengthOptions.containsNumericCharacter&&(_.containsNumericCharacter||(_.containsNumericCharacter=K)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(_.containsNonAlphanumericCharacter||(_.containsNonAlphanumericCharacter=oe))}}class zt{constructor(_,E,b,K){this.app=_,this.heartbeatServiceProvider=E,this.appCheckServiceProvider=b,this.config=K,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cn(this),this.idTokenSubscription=new cn(this),this.beforeStateQueue=new Ce(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=K.sdkClientVersion}_initializeWithPersistence(_,E){var b=this;return E&&(this._popupRedirectResolver=It(E)),this._initializationPromise=this.queue((0,y.c)(function*(){var K,oe;if(!b._deleted&&(b.persistenceManager=yield Ln.create(b,_),!b._deleted)){if(null!==(K=b._popupRedirectResolver)&&void 0!==K&&K._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(E),b.lastNotifiedUid=(null===(oe=b.currentUser)||void 0===oe?void 0:oe.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,y.c)(function*(){if(_._deleted)return;const E=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||E){if(_.currentUser&&E&&_.currentUser.uid===E.uid)return _._currentUser._assign(E),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(E,!0)}})()}initializeCurrentUser(_){var E=this;return(0,y.c)(function*(){var b;const K=yield E.assertedPersistence.getCurrentUser();let oe=K,Ne=!1;if(_&&E.config.authDomain){yield E.getOrInitRedirectPersistenceManager();const ct=null===(b=E.redirectUser)||void 0===b?void 0:b._redirectEventId,Pt=oe?._redirectEventId,hn=yield E.tryRedirectSignIn(_);(!ct||ct===Pt)&&hn?.user&&(oe=hn.user,Ne=!0)}if(!oe)return E.directlySetCurrentUser(null);if(!oe._redirectEventId){if(Ne)try{yield E.beforeStateQueue.runMiddleware(oe)}catch(ct){oe=K,E._popupRedirectResolver._overrideRedirectResult(E,()=>Promise.reject(ct))}return oe?E.reloadAndSetCurrentUserOrClear(oe):E.directlySetCurrentUser(null)}return pe(E._popupRedirectResolver,E,"argument-error"),yield E.getOrInitRedirectPersistenceManager(),E.redirectUser&&E.redirectUser._redirectEventId===oe._redirectEventId?E.directlySetCurrentUser(oe):E.reloadAndSetCurrentUserOrClear(oe)})()}tryRedirectSignIn(_){var E=this;return(0,y.c)(function*(){let b=null;try{b=yield E._popupRedirectResolver._completeRedirectFn(E,_,!0)}catch{yield E._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(_){var E=this;return(0,y.c)(function*(){try{yield Kr(_)}catch(b){if("auth/network-request-failed"!==b?.code)return E.directlySetCurrentUser(null)}return E.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function mt(){if(typeof navigator>"u")return null;const S=navigator;return S.languages&&S.languages[0]||S.language||null}()}_delete(){var _=this;return(0,y.c)(function*(){_._deleted=!0})()}updateCurrentUser(_){var E=this;return(0,y.c)(function*(){const b=_?(0,q.Yj)(_):null;return b&&pe(b.auth.config.apiKey===E.config.apiKey,E,"invalid-user-token"),E._updateCurrentUser(b&&b._clone(E))})()}_updateCurrentUser(_,E=!1){var b=this;return(0,y.c)(function*(){if(!b._deleted)return _&&pe(b.tenantId===_.tenantId,b,"tenant-id-mismatch"),E||(yield b.beforeStateQueue.runMiddleware(_)),b.queue((0,y.c)(function*(){yield b.directlySetCurrentUser(_),b.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,y.c)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var E=this;return this.queue((0,y.c)(function*(){yield E.assertedPersistence.setPersistence(It(_))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(_){var E=this;return(0,y.c)(function*(){E._getPasswordPolicyInternal()||(yield E._updatePasswordPolicy());const b=E._getPasswordPolicyInternal();return b.schemaVersion!==E.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(E._errorFactory.create("unsupported-password-policy-schema-version",{})):b.validatePassword(_)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var _=this;return(0,y.c)(function*(){const E=yield function Te(S){return yt.apply(this,arguments)}(_),b=new kt(E);null===_.tenantId?_._projectPasswordPolicy=b:_._tenantPasswordPolicies[_.tenantId]=b})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new q.UR("auth","Firebase",_())}onAuthStateChanged(_,E,b){return this.registerStateListener(this.authStateSubscription,_,E,b)}beforeAuthStateChanged(_,E){return this.beforeStateQueue.pushCallback(_,E)}onIdTokenChanged(_,E,b){return this.registerStateListener(this.idTokenSubscription,_,E,b)}authStateReady(){return new Promise((_,E)=>{if(this.currentUser)_();else{const b=this.onAuthStateChanged(()=>{b(),_()},E)}})}revokeAccessToken(_){var E=this;return(0,y.c)(function*(){if(E.currentUser){const b=yield E.currentUser.getIdToken(),K={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:_,idToken:b};null!=E.tenantId&&(K.tenantId=E.tenantId),yield function ce(S,_){return de.apply(this,arguments)}(E,K)}})()}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,E){var b=this;return(0,y.c)(function*(){const K=yield b.getOrInitRedirectPersistenceManager(E);return null===_?K.removeCurrentUser():K.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var E=this;return(0,y.c)(function*(){if(!E.redirectPersistenceManager){const b=_&&It(_)||E._popupRedirectResolver;pe(b,E,"argument-error"),E.redirectPersistenceManager=yield Ln.create(E,[It(b._redirectPersistence)],"redirectUser"),E.redirectUser=yield E.redirectPersistenceManager.getCurrentUser()}return E.redirectPersistenceManager})()}_redirectUserForId(_){var E=this;return(0,y.c)(function*(){var b,K;return E._isInitialized&&(yield E.queue((0,y.c)(function*(){}))),(null===(b=E._currentUser)||void 0===b?void 0:b._redirectEventId)===_?E._currentUser:(null===(K=E.redirectUser)||void 0===K?void 0:K._redirectEventId)===_?E.redirectUser:null})()}_persistUserIfCurrent(_){var E=this;return(0,y.c)(function*(){if(_===E.currentUser)return E.queue((0,y.c)(function*(){return E.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,E;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(E=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==E?E:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,E,b,K){if(this._deleted)return()=>{};const oe="function"==typeof E?E:E.next.bind(E);let Ne=!1;const ct=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(ct,this,"internal-error"),ct.then(()=>{Ne||oe(this.currentUser)}),"function"==typeof E){const Pt=_.addObserver(E,b,K);return()=>{Ne=!0,Pt()}}{const Pt=_.addObserver(E);return()=>{Ne=!0,Pt()}}}directlySetCurrentUser(_){var E=this;return(0,y.c)(function*(){E.currentUser&&E.currentUser!==_&&E._currentUser._stopProactiveRefresh(),_&&E.isProactiveRefreshEnabled&&_._startProactiveRefresh(),E.currentUser=_,_?yield E.assertedPersistence.setCurrentUser(_):yield E.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=le(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,y.c)(function*(){var E;const b={"X-Client-Version":_.clientVersion};_.app.options.appId&&(b["X-Firebase-gmpid"]=_.app.options.appId);const K=yield null===(E=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getHeartbeatsHeader();K&&(b["X-Firebase-Client"]=K);const oe=yield _._getAppCheckToken();return oe&&(b["X-Firebase-AppCheck"]=oe),b})()}_getAppCheckToken(){var _=this;return(0,y.c)(function*(){var E;const b=yield null===(E=_.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===E?void 0:E.getToken();return b?.error&&function Ke(S,..._){tt.logLevel<=D.Ge.WARN&&tt.warn(`Auth (${k.SDK_VERSION}): ${S}`,..._)}(`Error while retrieving App Check token: ${b.error}`),b?.token})()}}function gn(S){return(0,q.Yj)(S)}class cn{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,q.my)(E=>this.observer=E)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Yn={loadJS:()=>(0,y.c)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ur(S){return Yn.loadJS(S)}function Gr(S){return`__${S}${Math.floor(1e6*Math.random())}`}class Hn{constructor(_){this.type="recaptcha-enterprise",this.auth=gn(_)}verify(_="verify",E=!1){var b=this;return(0,y.c)(function*(){function oe(){return oe=(0,y.c)(function*(ct){if(!E){if(null==ct.tenantId&&null!=ct._agentRecaptchaConfig)return ct._agentRecaptchaConfig.siteKey;if(null!=ct.tenantId&&void 0!==ct._tenantRecaptchaConfigs[ct.tenantId])return ct._tenantRecaptchaConfigs[ct.tenantId].siteKey}return new Promise(function(){var Pt=(0,y.c)(function*(hn,Nn){Xr(ct,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(sr=>{if(void 0!==sr.recaptchaKey){const Po=new Wt(sr);return null==ct.tenantId?ct._agentRecaptchaConfig=Po:ct._tenantRecaptchaConfigs[ct.tenantId]=Po,hn(Po.siteKey)}Nn(new Error("recaptcha Enterprise site key undefined"))}).catch(sr=>{Nn(sr)})});return function(hn,Nn){return Pt.apply(this,arguments)}}())}),oe.apply(this,arguments)}function Ne(ct,Pt,hn){const Nn=window.grecaptcha;Vr(Nn)?Nn.enterprise.ready(()=>{Nn.enterprise.execute(ct,{action:_}).then(sr=>{Pt(sr)}).catch(()=>{Pt("NO_RECAPTCHA")})}):hn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ct,Pt)=>{(function K(ct){return oe.apply(this,arguments)})(b.auth).then(hn=>{if(!E&&Vr(window.grecaptcha))Ne(hn,ct,Pt);else{if(typeof window>"u")return void Pt(new Error("RecaptchaVerifier is only supported in browser"));let Nn=function cs(){return Yn.recaptchaEnterpriseScript}();0!==Nn.length&&(Nn+=hn),ur(Nn).then(()=>{Ne(hn,ct,Pt)}).catch(sr=>{Pt(sr)})}}).catch(hn=>{Pt(hn)})})})()}}function Er(S,_,E){return ls.apply(this,arguments)}function ls(){return(ls=(0,y.c)(function*(S,_,E,b=!1){const K=new Hn(S);let oe;try{oe=yield K.verify(E)}catch{oe=yield K.verify(E,!0)}const Ne=Object.assign({},_);return Object.assign(Ne,b?{captchaResp:oe}:{captchaResponse:oe}),Object.assign(Ne,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Ne,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Ne})).apply(this,arguments)}function Ni(S,_,E,b){return di.apply(this,arguments)}function di(){return di=(0,y.c)(function*(S,_,E,b){var K;if(null!==(K=S._getRecaptchaConfig())&&void 0!==K&&K.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const oe=yield Er(S,_,E,"getOobCode"===E);return b(S,oe)}return b(S,_).catch(function(){var oe=(0,y.c)(function*(Ne){if("auth/missing-recaptcha-token"===Ne.code){console.log(`${E} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ct=yield Er(S,_,E,"getOobCode"===E);return b(S,ct)}return Promise.reject(Ne)});return function(Ne){return oe.apply(this,arguments)}}())}),di.apply(this,arguments)}function Ki(S,_,E){const b=gn(S);pe(b._canInitEmulator,b,"emulator-config-failed"),pe(/^https?:\/\//.test(_),b,"invalid-emulator-scheme");const K=!!E?.disableWarnings,oe=Wo(_),{host:Ne,port:ct}=function yc(S){const _=Wo(S),E=/(\/\/)?([^?#/]+)/.exec(S.substr(_.length));if(!E)return{host:"",port:null};const b=E[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(b);if(K){const oe=K[1];return{host:oe,port:rr(b.substr(oe.length+1))}}{const[oe,Ne]=b.split(":");return{host:oe,port:rr(Ne)}}}(_);b.config.emulator={url:`${oe}//${Ne}${null===ct?"":`:${ct}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Ne,port:ct,protocol:oe.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function ki(){function S(){const _=document.createElement("p"),E=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",E.position="fixed",E.width="100%",E.backgroundColor="#ffffff",E.border=".1em solid #000000",E.color="#b50000",E.bottom="0px",E.left="0px",E.margin="0px",E.zIndex="10000",E.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",S):S())}()}function Wo(S){const _=S.indexOf(":");return _<0?"":S.substr(0,_+1)}function rr(S){if(!S)return null;const _=Number(S);return isNaN(_)?null:_}class Yr{constructor(_,E){this.providerId=_,this.signInMethod=E}toJSON(){return we("not implemented")}_getIdTokenResponse(_){return we("not implemented")}_linkToIdToken(_,E){return we("not implemented")}_getReauthenticationResolver(_){return we("not implemented")}}function Fs(S,_){return hi.apply(this,arguments)}function hi(){return(hi=(0,y.c)(function*(S,_){return gt(S,"POST","/v1/accounts:resetPassword",qe(S,_))})).apply(this,arguments)}function wa(){return(wa=(0,y.c)(function*(S,_){return gt(S,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Js(S,_){return so.apply(this,arguments)}function so(){return(so=(0,y.c)(function*(S,_){return gt(S,"POST","/v1/accounts:signUp",_)})).apply(this,arguments)}function ni(){return(ni=(0,y.c)(function*(S,_){return gt(S,"POST","/v1/accounts:update",qe(S,_))})).apply(this,arguments)}function Vt(S,_){return vn.apply(this,arguments)}function vn(){return(vn=(0,y.c)(function*(S,_){return tn(S,"POST","/v1/accounts:signInWithPassword",qe(S,_))})).apply(this,arguments)}function xr(S,_){return rs.apply(this,arguments)}function rs(){return(rs=(0,y.c)(function*(S,_){return gt(S,"POST","/v1/accounts:sendOobCode",qe(S,_))})).apply(this,arguments)}function ji(){return(ji=(0,y.c)(function*(S,_){return xr(S,_)})).apply(this,arguments)}function Yi(S,_){return dr.apply(this,arguments)}function dr(){return(dr=(0,y.c)(function*(S,_){return xr(S,_)})).apply(this,arguments)}function $i(S,_){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,y.c)(function*(S,_){return xr(S,_)})).apply(this,arguments)}function Fi(){return(Fi=(0,y.c)(function*(S,_){return xr(S,_)})).apply(this,arguments)}function oo(){return(oo=(0,y.c)(function*(S,_){return tn(S,"POST","/v1/accounts:signInWithEmailLink",qe(S,_))})).apply(this,arguments)}function Ls(){return(Ls=(0,y.c)(function*(S,_){return tn(S,"POST","/v1/accounts:signInWithEmailLink",qe(S,_))})).apply(this,arguments)}class Vs extends Yr{constructor(_,E,b,K=null){super("password",b),this._email=_,this._password=E,this._tenantId=K}static _fromEmailAndPassword(_,E){return new Vs(_,E,"password")}static _fromEmailAndCode(_,E,b=null){return new Vs(_,E,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const E="string"==typeof _?JSON.parse(_):_;if(E?.email&&E?.password){if("password"===E.signInMethod)return this._fromEmailAndPassword(E.email,E.password);if("emailLink"===E.signInMethod)return this._fromEmailAndCode(E.email,E.password,E.tenantId)}return null}_getIdTokenResponse(_){var E=this;return(0,y.c)(function*(){switch(E.signInMethod){case"password":return Ni(_,{returnSecureToken:!0,email:E._email,password:E._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Vt);case"emailLink":return function wo(S,_){return oo.apply(this,arguments)}(_,{email:E._email,oobCode:E._password});default:Ae(_,"internal-error")}})()}_linkToIdToken(_,E){var b=this;return(0,y.c)(function*(){switch(b.signInMethod){case"password":return Ni(_,{idToken:E,returnSecureToken:!0,email:b._email,password:b._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Js);case"emailLink":return function _i(S,_){return Ls.apply(this,arguments)}(_,{idToken:E,email:b._email,oobCode:b._password});default:Ae(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function Li(S,_){return us.apply(this,arguments)}function us(){return(us=(0,y.c)(function*(S,_){return tn(S,"POST","/v1/accounts:signInWithIdp",qe(S,_))})).apply(this,arguments)}class Si extends Yr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const E=new Si(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(E.idToken=_.idToken),_.accessToken&&(E.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(E.nonce=_.nonce),_.pendingToken&&(E.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(E.accessToken=_.oauthToken,E.secret=_.oauthTokenSecret):Ae("argument-error"),E}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const E="string"==typeof _?JSON.parse(_):_,{providerId:b,signInMethod:K}=E,oe=(0,W.sX)(E,["providerId","signInMethod"]);if(!b||!K)return null;const Ne=new Si(b,K);return Ne.idToken=oe.idToken||void 0,Ne.accessToken=oe.accessToken||void 0,Ne.secret=oe.secret,Ne.nonce=oe.nonce,Ne.pendingToken=oe.pendingToken||null,Ne}_getIdTokenResponse(_){return Li(_,this.buildRequest())}_linkToIdToken(_,E){const b=this.buildRequest();return b.idToken=E,Li(_,b)}_getReauthenticationResolver(_){const E=this.buildRequest();return E.autoCreate=!1,Li(_,E)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const E={};this.idToken&&(E.id_token=this.idToken),this.accessToken&&(E.access_token=this.accessToken),this.secret&&(E.oauth_token_secret=this.secret),E.providerId=this.providerId,this.nonce&&!this.pendingToken&&(E.nonce=this.nonce),_.postBody=(0,q.ik)(E)}return _}}function Us(){return(Us=(0,y.c)(function*(S,_){return gt(S,"POST","/v1/accounts:sendVerificationCode",qe(S,_))})).apply(this,arguments)}function qo(){return(qo=(0,y.c)(function*(S,_){return tn(S,"POST","/v1/accounts:signInWithPhoneNumber",qe(S,_))})).apply(this,arguments)}function Ji(){return(Ji=(0,y.c)(function*(S,_){const E=yield tn(S,"POST","/v1/accounts:signInWithPhoneNumber",qe(S,_));if(E.temporaryProof)throw Sn(S,"account-exists-with-different-credential",E);return E})).apply(this,arguments)}const Na={USER_NOT_FOUND:"user-not-found"};function yi(){return(yi=(0,y.c)(function*(S,_){return tn(S,"POST","/v1/accounts:signInWithPhoneNumber",qe(S,Object.assign(Object.assign({},_),{operation:"REAUTH"})),Na)})).apply(this,arguments)}class As extends Yr{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,E){return new As({verificationId:_,verificationCode:E})}static _fromTokenResponse(_,E){return new As({phoneNumber:_,temporaryProof:E})}_getIdTokenResponse(_){return function ln(S,_){return qo.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,E){return function Bs(S,_){return Ji.apply(this,arguments)}(_,Object.assign({idToken:E},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function Ko(S,_){return yi.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:E,verificationId:b,verificationCode:K}=this.params;return _&&E?{temporaryProof:_,phoneNumber:E}:{sessionInfo:b,code:K}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:E,verificationCode:b,phoneNumber:K,temporaryProof:oe}=_;return b||E||K||oe?new As({verificationId:E,verificationCode:b,phoneNumber:K,temporaryProof:oe}):null}}class js{constructor(_){var E,b,K,oe,Ne,ct;const Pt=(0,q.aw)((0,q.kF)(_)),hn=null!==(E=Pt.apiKey)&&void 0!==E?E:null,Nn=null!==(b=Pt.oobCode)&&void 0!==b?b:null,sr=function ds(S){switch(S){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=Pt.mode)&&void 0!==K?K:null);pe(hn&&Nn&&sr,"argument-error"),this.apiKey=hn,this.operation=sr,this.code=Nn,this.continueUrl=null!==(oe=Pt.continueUrl)&&void 0!==oe?oe:null,this.languageCode=null!==(Ne=Pt.languageCode)&&void 0!==Ne?Ne:null,this.tenantId=null!==(ct=Pt.tenantId)&&void 0!==ct?ct:null}static parseLink(_){const E=function Xi(S){const _=(0,q.aw)((0,q.kF)(S)).link,E=_?(0,q.aw)((0,q.kF)(_)).deep_link_id:null,b=(0,q.aw)((0,q.kF)(S)).deep_link_id;return(b?(0,q.aw)((0,q.kF)(b)).link:null)||b||E||_||S}(_);try{return new js(E)}catch{return null}}}let $s=(()=>{class S{constructor(){this.providerId=S.PROVIDER_ID}static credential(E,b){return Vs._fromEmailAndPassword(E,b)}static credentialWithLink(E,b){const K=js.parseLink(b);return pe(K,"argument-error"),Vs._fromEmailAndCode(E,K.code,K.tenantId)}}return S.PROVIDER_ID="password",S.EMAIL_PASSWORD_SIGN_IN_METHOD="password",S.EMAIL_LINK_SIGN_IN_METHOD="emailLink",S})();class Wi{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class Ta extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class ao extends Ta{static credentialFromJSON(_){const E="string"==typeof _?JSON.parse(_):_;return pe("providerId"in E&&"signInMethod"in E,"argument-error"),Si._fromParams(E)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return pe(_.idToken||_.accessToken,"argument-error"),Si._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return ao.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return ao.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:b,oauthTokenSecret:K,pendingToken:oe,nonce:Ne,providerId:ct}=_;if(!b&&!K&&!E&&!oe||!ct)return null;try{return new ao(ct)._credential({idToken:E,accessToken:b,nonce:Ne,pendingToken:oe})}catch{return null}}}let oa=(()=>{class S extends Ta{constructor(){super("facebook.com")}static credential(E){return Si._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.FACEBOOK_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return S.credentialFromTaggedObject(E)}static credentialFromError(E){return S.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return S.credential(E.oauthAccessToken)}catch{return null}}}return S.FACEBOOK_SIGN_IN_METHOD="facebook.com",S.PROVIDER_ID="facebook.com",S})(),vc=(()=>{class S extends Ta{constructor(){super("google.com"),this.addScope("profile")}static credential(E,b){return Si._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.GOOGLE_SIGN_IN_METHOD,idToken:E,accessToken:b})}static credentialFromResult(E){return S.credentialFromTaggedObject(E)}static credentialFromError(E){return S.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthIdToken:b,oauthAccessToken:K}=E;if(!b&&!K)return null;try{return S.credential(b,K)}catch{return null}}}return S.GOOGLE_SIGN_IN_METHOD="google.com",S.PROVIDER_ID="google.com",S})(),_l=(()=>{class S extends Ta{constructor(){super("github.com")}static credential(E){return Si._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.GITHUB_SIGN_IN_METHOD,accessToken:E})}static credentialFromResult(E){return S.credentialFromTaggedObject(E)}static credentialFromError(E){return S.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E||!("oauthAccessToken"in E)||!E.oauthAccessToken)return null;try{return S.credential(E.oauthAccessToken)}catch{return null}}}return S.GITHUB_SIGN_IN_METHOD="github.com",S.PROVIDER_ID="github.com",S})();class Xs extends Yr{constructor(_,E){super(_,_),this.pendingToken=E}_getIdTokenResponse(_){return Li(_,this.buildRequest())}_linkToIdToken(_,E){const b=this.buildRequest();return b.idToken=E,Li(_,b)}_getReauthenticationResolver(_){const E=this.buildRequest();return E.autoCreate=!1,Li(_,E)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const E="string"==typeof _?JSON.parse(_):_,{providerId:b,signInMethod:K,pendingToken:oe}=E;return b&&K&&oe&&b===K?new Xs(b,oe):null}static _create(_,E){return new Xs(_,E)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xa extends Wi{constructor(_){pe(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return xa.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return xa.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const E=Xs.fromJSON(_);return pe(E,"argument-error"),E}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:E,providerId:b}=_;if(!E||!b)return null;try{return Xs._create(b,E)}catch{return null}}}let ka=(()=>{class S extends Ta{constructor(){super("twitter.com")}static credential(E,b){return Si._fromParams({providerId:S.PROVIDER_ID,signInMethod:S.TWITTER_SIGN_IN_METHOD,oauthToken:E,oauthTokenSecret:b})}static credentialFromResult(E){return S.credentialFromTaggedObject(E)}static credentialFromError(E){return S.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{oauthAccessToken:b,oauthTokenSecret:K}=E;if(!b||!K)return null;try{return S.credential(b,K)}catch{return null}}}return S.TWITTER_SIGN_IN_METHOD="twitter.com",S.PROVIDER_ID="twitter.com",S})();function ou(S,_){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,y.c)(function*(S,_){return tn(S,"POST","/v1/accounts:signUp",qe(S,_))})).apply(this,arguments)}class co{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,E,b,K=!1){return(0,y.c)(function*(){const oe=yield te._fromIdTokenResponse(_,b,K),Ne=H(b);return new co({user:oe,providerId:Ne,_tokenResponse:b,operationType:E})})()}static _forOperation(_,E,b){return(0,y.c)(function*(){yield _._updateTokensIfNecessary(b,!0);const K=H(b);return new co({user:_,providerId:K,_tokenResponse:b,operationType:E})})()}}function H(S){return S.providerId?S.providerId:"phoneNumber"in S?"phone":null}function Y(S){return U.apply(this,arguments)}function U(){return(U=(0,y.c)(function*(S){var _;const E=gn(S);if(yield E._initializationPromise,null!==(_=E.currentUser)&&void 0!==_&&_.isAnonymous)return new co({user:E.currentUser,providerId:null,operationType:"signIn"});const b=yield ou(E,{returnSecureToken:!0}),K=yield co._fromIdTokenResponse(E,"signIn",b,!0);return yield E._updateCurrentUser(K.user),K})).apply(this,arguments)}class ie extends q.kx{constructor(_,E,b,K){var oe;super(E.code,E.message),this.operationType=b,this.user=K,Object.setPrototypeOf(this,ie.prototype),this.customData={appName:_.name,tenantId:null!==(oe=_.tenantId)&&void 0!==oe?oe:void 0,_serverResponse:E.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(_,E,b,K){return new ie(_,E,b,K)}}function De(S,_,E,b){return("reauthenticate"===_?E._getReauthenticationResolver(S):E._getIdTokenResponse(S)).catch(oe=>{throw"auth/multi-factor-auth-required"===oe.code?ie._fromErrorAndOperation(S,oe,_,b):oe})}function un(S){return new Set(S.map(({providerId:_})=>_).filter(_=>!!_))}function er(S,_){return Ps.apply(this,arguments)}function Ps(){return Ps=(0,y.c)(function*(S,_){const E=(0,q.Yj)(S);yield yl(!0,E,_);const{providerUserInfo:b}=yield function Di(S,_){return ar.apply(this,arguments)}(E.auth,{idToken:yield E.getIdToken(),deleteProvider:[_]}),K=un(b||[]);return E.providerData=E.providerData.filter(oe=>K.has(oe.providerId)),K.has("phone")||(E.phoneNumber=null),yield E.auth._persistUserIfCurrent(E),E}),Ps.apply(this,arguments)}function hs(S,_){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,y.c)(function*(S,_,E=!1){const b=yield Or(S,_._linkToIdToken(S.auth,yield S.getIdToken()),E);return co._forOperation(S,"link",b)})).apply(this,arguments)}function yl(S,_,E){return kn.apply(this,arguments)}function kn(){return(kn=(0,y.c)(function*(S,_,E){yield Kr(_);const K=!1===S?"provider-already-linked":"no-such-provider";pe(un(_.providerData).has(E)===S,_.auth,K)})).apply(this,arguments)}function kr(S,_){return mn.apply(this,arguments)}function mn(){return(mn=(0,y.c)(function*(S,_,E=!1){const{auth:b}=S,K="reauthenticate";try{const oe=yield Or(S,De(b,K,_,S),E);pe(oe.idToken,b,"internal-error");const Ne=xn(oe.idToken);pe(Ne,b,"internal-error");const{sub:ct}=Ne;return pe(S.uid===ct,b,"user-mismatch"),co._forOperation(S,K,oe)}catch(oe){throw"auth/user-not-found"===oe?.code&&Ae(b,"user-mismatch"),oe}})).apply(this,arguments)}function aa(S,_){return fi.apply(this,arguments)}function fi(){return(fi=(0,y.c)(function*(S,_,E=!1){const b="signIn",K=yield De(S,b,_),oe=yield co._fromIdTokenResponse(S,b,K);return E||(yield S._updateCurrentUser(oe.user)),oe})).apply(this,arguments)}function Xa(S,_){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,y.c)(function*(S,_){return aa(gn(S),_)})).apply(this,arguments)}function lo(S,_){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,y.c)(function*(S,_){const E=(0,q.Yj)(S);return yield yl(!1,E,_.providerId),hs(E,_)})).apply(this,arguments)}function yr(S,_){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,y.c)(function*(S,_){return kr((0,q.Yj)(S),_)})).apply(this,arguments)}function Fa(){return(Fa=(0,y.c)(function*(S,_){return tn(S,"POST","/v1/accounts:signInWithCustomToken",qe(S,_))})).apply(this,arguments)}function Ws(S,_){return ys.apply(this,arguments)}function ys(){return ys=(0,y.c)(function*(S,_){const E=gn(S),b=yield function ss(S,_){return Fa.apply(this,arguments)}(E,{token:_,returnSecureToken:!0}),K=yield co._fromIdTokenResponse(E,"signIn",b);return yield E._updateCurrentUser(K.user),K}),ys.apply(this,arguments)}class ko{constructor(_,E){this.factorId=_,this.uid=E.mfaEnrollmentId,this.enrollmentTime=new Date(E.enrolledAt).toUTCString(),this.displayName=E.displayName}static _fromServerResponse(_,E){return"phoneInfo"in E?zc._fromServerResponse(_,E):"totpInfo"in E?vs._fromServerResponse(_,E):Ae(_,"internal-error")}}class zc extends ko{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,E){return new zc(E)}}class vs extends ko{constructor(_){super("totp",_)}static _fromServerResponse(_,E){return new vs(E)}}function uo(S,_,E){var b;pe((null===(b=E.url)||void 0===b?void 0:b.length)>0,S,"invalid-continue-uri"),pe(typeof E.dynamicLinkDomain>"u"||E.dynamicLinkDomain.length>0,S,"invalid-dynamic-link-domain"),_.continueUrl=E.url,_.dynamicLinkDomain=E.dynamicLinkDomain,_.canHandleCodeInApp=E.handleCodeInApp,E.iOS&&(pe(E.iOS.bundleId.length>0,S,"missing-ios-bundle-id"),_.iOSBundleId=E.iOS.bundleId),E.android&&(pe(E.android.packageName.length>0,S,"missing-android-pkg-name"),_.androidInstallApp=E.android.installApp,_.androidMinimumVersionCode=E.android.minimumVersion,_.androidPackageName=E.android.packageName)}function Fo(S){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,y.c)(function*(S){const _=gn(S);_._getPasswordPolicyInternal()&&(yield _._updatePasswordPolicy())})).apply(this,arguments)}function ho(S,_,E){return Za.apply(this,arguments)}function Za(){return(Za=(0,y.c)(function*(S,_,E){const b=gn(S),K={requestType:"PASSWORD_RESET",email:_,clientType:"CLIENT_TYPE_WEB"};E&&uo(b,K,E),yield Ni(b,K,"getOobCode",Yi)})).apply(this,arguments)}function ca(S,_,E){return ec.apply(this,arguments)}function ec(){return ec=(0,y.c)(function*(S,_,E){yield Fs((0,q.Yj)(S),{oobCode:_,newPassword:E}).catch(function(){var b=(0,y.c)(function*(K){throw"auth/password-does-not-meet-requirements"===K.code&&Fo(S),K});return function(K){return b.apply(this,arguments)}}())}),ec.apply(this,arguments)}function vl(S,_){return Zs.apply(this,arguments)}function Zs(){return Zs=(0,y.c)(function*(S,_){yield function Ho(S,_){return ni.apply(this,arguments)}((0,q.Yj)(S),{oobCode:_})}),Zs.apply(this,arguments)}function Fn(S,_){return fo.apply(this,arguments)}function fo(){return(fo=(0,y.c)(function*(S,_){const E=(0,q.Yj)(S),b=yield Fs(E,{oobCode:_}),K=b.requestType;switch(pe(K,E,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pe(b.newEmail,E,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pe(b.mfaInfo,E,"internal-error");default:pe(b.email,E,"internal-error")}let oe=null;return b.mfaInfo&&(oe=ko._fromServerResponse(gn(E),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:oe},operation:K}})).apply(this,arguments)}function vr(S,_){return La.apply(this,arguments)}function La(){return(La=(0,y.c)(function*(S,_){const{data:E}=yield Fn((0,q.Yj)(S),_);return E.email})).apply(this,arguments)}function qc(S,_,E){return la.apply(this,arguments)}function la(){return(la=(0,y.c)(function*(S,_,E){const b=gn(S),Ne=yield Ni(b,{returnSecureToken:!0,email:_,password:E,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ou).catch(Pt=>{throw"auth/password-does-not-meet-requirements"===Pt.code&&Fo(S),Pt}),ct=yield co._fromIdTokenResponse(b,"signIn",Ne);return yield b._updateCurrentUser(ct.user),ct})).apply(this,arguments)}function Lo(S,_,E){return Xa((0,q.Yj)(S),$s.credential(_,E)).catch(function(){var b=(0,y.c)(function*(K){throw"auth/password-does-not-meet-requirements"===K.code&&Fo(S),K});return function(K){return b.apply(this,arguments)}}())}function ua(S,_,E){return bs.apply(this,arguments)}function bs(){return(bs=(0,y.c)(function*(S,_,E){const b=gn(S),K={requestType:"EMAIL_SIGNIN",email:_,clientType:"CLIENT_TYPE_WEB"};(function oe(Ne,ct){pe(ct.handleCodeInApp,b,"argument-error"),ct&&uo(b,Ne,ct)})(K,E),yield Ni(b,K,"getOobCode",$i)})).apply(this,arguments)}function au(S,_){const E=js.parseLink(_);return"EMAIL_SIGNIN"===E?.operation}function Es(S,_,E){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,y.c)(function*(S,_,E){const b=(0,q.Yj)(S),K=$s.credentialWithLink(_,E||ze());return pe(K._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Xa(b,K)})).apply(this,arguments)}function Ct(){return(Ct=(0,y.c)(function*(S,_){return gt(S,"POST","/v1/accounts:createAuthUri",qe(S,_))})).apply(this,arguments)}function hr(S,_){return Ec.apply(this,arguments)}function Ec(){return Ec=(0,y.c)(function*(S,_){const b={identifier:_,continueUri:at()?ze():"http://localhost"},{signinMethods:K}=yield function El(S,_){return Ct.apply(this,arguments)}((0,q.Yj)(S),b);return K||[]}),Ec.apply(this,arguments)}function po(S,_){return Br.apply(this,arguments)}function Br(){return Br=(0,y.c)(function*(S,_){const E=(0,q.Yj)(S),K={requestType:"VERIFY_EMAIL",idToken:yield S.getIdToken()};_&&uo(E.auth,K,_);const{email:oe}=yield function Bi(S,_){return ji.apply(this,arguments)}(E.auth,K);oe!==S.email&&(yield S.reload())}),Br.apply(this,arguments)}function Hr(S,_,E){return Va.apply(this,arguments)}function Va(){return Va=(0,y.c)(function*(S,_,E){const b=(0,q.Yj)(S),oe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield S.getIdToken(),newEmail:_};E&&uo(b.auth,oe,E);const{email:Ne}=yield function Pn(S,_){return Fi.apply(this,arguments)}(b.auth,oe);Ne!==S.email&&(yield S.reload())}),Va.apply(this,arguments)}function go(){return(go=(0,y.c)(function*(S,_){return gt(S,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Il(S,_){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,y.c)(function*(S,{displayName:_,photoURL:E}){if(void 0===_&&void 0===E)return;const b=(0,q.Yj)(S),oe={idToken:yield b.getIdToken(),displayName:_,photoUrl:E,returnSecureToken:!0},Ne=yield Or(b,function Do(S,_){return go.apply(this,arguments)}(b.auth,oe));b.displayName=Ne.displayName||null,b.photoURL=Ne.photoUrl||null;const ct=b.providerData.find(({providerId:Pt})=>"password"===Pt);ct&&(ct.displayName=b.displayName,ct.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Ne)}),Ic.apply(this,arguments)}function ai(S,_){return Ms((0,q.Yj)(S),_,null)}function Cl(S,_){return Ms((0,q.Yj)(S),null,_)}function Ms(S,_,E){return vi.apply(this,arguments)}function vi(){return vi=(0,y.c)(function*(S,_,E){const{auth:b}=S,oe={idToken:yield S.getIdToken(),returnSecureToken:!0};_&&(oe.email=_),E&&(oe.password=E);const Ne=yield Or(S,function Ca(S,_){return wa.apply(this,arguments)}(b,oe));yield S._updateTokensIfNecessary(Ne,!0)}),vi.apply(this,arguments)}class Pr{constructor(_,E,b={}){this.isNewUser=_,this.providerId=E,this.profile=b}}class P extends Pr{constructor(_,E,b,K){super(_,E,b),this.username=K}}class Q extends Pr{constructor(_,E){super(_,"facebook.com",E)}}class F extends P{constructor(_,E){super(_,"github.com",E,"string"==typeof E?.login?E?.login:null)}}class z extends Pr{constructor(_,E){super(_,"google.com",E)}}class me extends P{constructor(_,E,b){super(_,"twitter.com",E,b)}}function ot(S){const{user:_,_tokenResponse:E}=S;return _.isAnonymous&&!E?{providerId:null,isNewUser:!1,profile:null}:function zs(S){var _,E;if(!S)return null;const{providerId:b}=S,K=S.rawUserInfo?JSON.parse(S.rawUserInfo):{},oe=S.isNewUser||"identitytoolkit#SignupNewUserResponse"===S.kind;if(!b&&S?.idToken){const Ne=null===(E=null===(_=xn(S.idToken))||void 0===_?void 0:_.firebase)||void 0===E?void 0:E.sign_in_provider;if(Ne)return new Pr(oe,"anonymous"!==Ne&&"custom"!==Ne?Ne:null)}if(!b)return null;switch(b){case"facebook.com":return new Q(oe,K);case"github.com":return new F(oe,K);case"google.com":return new z(oe,K);case"twitter.com":return new me(oe,K,S.screenName||null);case"custom":case"anonymous":return new Pr(oe,null);default:return new Pr(oe,b,K)}}(E)}class gi{constructor(_,E,b){this.type=_,this.credential=E,this.user=b}static _fromIdtoken(_,E){return new gi("enroll",_,E)}static _fromMfaPendingCredential(_){return new gi("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var E,b;if(_?.multiFactorSession){if(null!==(E=_.multiFactorSession)&&void 0!==E&&E.pendingCredential)return gi._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null!==(b=_.multiFactorSession)&&void 0!==b&&b.idToken)return gi._fromIdtoken(_.multiFactorSession.idToken)}return null}}class ir{constructor(_,E,b){this.session=_,this.hints=E,this.signInResolver=b}static _fromError(_,E){const b=gn(_),K=E.customData._serverResponse,oe=(K.mfaInfo||[]).map(ct=>ko._fromServerResponse(b,ct));pe(K.mfaPendingCredential,b,"internal-error");const Ne=gi._fromMfaPendingCredential(K.mfaPendingCredential);return new ir(Ne,oe,function(){var ct=(0,y.c)(function*(Pt){const hn=yield Pt._process(b,Ne);delete K.mfaInfo,delete K.mfaPendingCredential;const Nn=Object.assign(Object.assign({},K),{idToken:hn.idToken,refreshToken:hn.refreshToken});switch(E.operationType){case"signIn":const sr=yield co._fromIdTokenResponse(b,E.operationType,Nn);return yield b._updateCurrentUser(sr.user),sr;case"reauthenticate":return pe(E.user,b,"internal-error"),co._forOperation(E.user,E.operationType,Nn);default:Ae(b,"internal-error")}});return function(Pt){return ct.apply(this,arguments)}}())}resolveSignIn(_){var E=this;return(0,y.c)(function*(){return E.signInResolver(_)})()}}function Vo(S,_){var E;const b=(0,q.Yj)(S),K=_;return pe(_.customData.operationType,b,"argument-error"),pe(null===(E=K.customData._serverResponse)||void 0===E?void 0:E.mfaPendingCredential,b,"argument-error"),ir._fromError(b,K)}class sn{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(E=>{E.mfaInfo&&(this.enrolledFactors=E.mfaInfo.map(b=>ko._fromServerResponse(_.auth,b)))})}static _fromUser(_){return new sn(_)}getSession(){var _=this;return(0,y.c)(function*(){return gi._fromIdtoken(yield _.user.getIdToken(),_.user)})()}enroll(_,E){var b=this;return(0,y.c)(function*(){const K=_,oe=yield b.getSession(),Ne=yield Or(b.user,K._process(b.user.auth,oe,E));return yield b.user._updateTokensIfNecessary(Ne),b.user.reload()})()}unenroll(_){var E=this;return(0,y.c)(function*(){const b="string"==typeof _?_:_.uid,K=yield E.user.getIdToken();try{const oe=yield Or(E.user,function wc(S,_){return gt(S,"POST","/v2/accounts/mfaEnrollment:withdraw",qe(S,_))}(E.user.auth,{idToken:K,mfaEnrollmentId:b}));E.enrolledFactors=E.enrolledFactors.filter(({uid:Ne})=>Ne!==b),yield E.user._updateTokensIfNecessary(oe),yield E.user.reload()}catch(oe){throw oe}})()}}const fn=new WeakMap;function cu(S){const _=(0,q.Yj)(S);return fn.has(_)||fn.set(_,sn._fromUser(_)),fn.get(_)}const Ht="__sak";class ht{constructor(_,E){this.storageRetriever=_,this.type=E}_isAvailable(){try{return this.storage?(this.storage.setItem(Ht,"1"),this.storage.removeItem(Ht),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(_,E){return this.storage.setItem(_,JSON.stringify(E)),Promise.resolve()}_get(_){const E=this.storage.getItem(_);return Promise.resolve(E?JSON.parse(E):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const gd=(()=>{class S extends ht{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(E,b)=>this.onStorageEvent(E,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function bt(){const S=(0,q.Su)();return pn(S)||en(S)}()&&function _r(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ei(),this._shouldAllowMigration=!0}forAllChangedKeys(E){for(const b of Object.keys(this.listeners)){const K=this.storage.getItem(b),oe=this.localCache[b];K!==oe&&E(b,oe,K)}}onStorageEvent(E,b=!1){if(!E.key)return void this.forAllChangedKeys((ct,Pt,hn)=>{this.notifyListeners(ct,hn)});const K=E.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ct=this.storage.getItem(K);if(E.newValue!==ct)null!==E.newValue?this.storage.setItem(K,E.newValue):this.storage.removeItem(K);else if(this.localCache[K]===E.newValue&&!b)return}const oe=()=>{const ct=this.storage.getItem(K);!b&&this.localCache[K]===ct||this.notifyListeners(K,ct)},Ne=this.storage.getItem(K);!function Xn(){return(0,q.Uv)()&&10===document.documentMode}()||Ne===E.newValue||E.newValue===E.oldValue?oe():setTimeout(oe,10)}notifyListeners(E,b){this.localCache[E]=b;const K=this.listeners[E];if(K)for(const oe of Array.from(K))oe(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((E,b,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:E,oldValue:b,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(E,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[E]||(this.listeners[E]=new Set,this.localCache[E]=this.storage.getItem(E)),this.listeners[E].add(b)}_removeListener(E,b){this.listeners[E]&&(this.listeners[E].delete(b),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(E,b){var K=()=>super._set,oe=this;return(0,y.c)(function*(){yield K().call(oe,E,b),oe.localCache[E]=JSON.stringify(b)})()}_get(E){var b=()=>super._get,K=this;return(0,y.c)(function*(){const oe=yield b().call(K,E);return K.localCache[E]=JSON.stringify(oe),oe})()}_remove(E){var b=()=>super._remove,K=this;return(0,y.c)(function*(){yield b().call(K,E),delete K.localCache[E]})()}}return S.type="LOCAL",S})(),_o=(()=>{class S extends ht{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(E,b){}_removeListener(E,b){}}return S.type="SESSION",S})();let wf=(()=>{class S{constructor(E){this.eventTarget=E,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(E){const b=this.receivers.find(oe=>oe.isListeningto(E));if(b)return b;const K=new S(E);return this.receivers.push(K),K}isListeningto(E){return this.eventTarget===E}handleEvent(E){var b=this;return(0,y.c)(function*(){const K=E,{eventId:oe,eventType:Ne,data:ct}=K.data,Pt=b.handlersMap[Ne];if(!Pt?.size)return;K.ports[0].postMessage({status:"ack",eventId:oe,eventType:Ne});const hn=Array.from(Pt).map(function(){var sr=(0,y.c)(function*(Po){return Po(K.origin,ct)});return function(Po){return sr.apply(this,arguments)}}()),Nn=yield function Bu(S){return Promise.all(S.map(function(){var _=(0,y.c)(function*(E){try{return{fulfilled:!0,value:yield E}}catch(b){return{fulfilled:!1,reason:b}}});return function(E){return _.apply(this,arguments)}}()))}(hn);K.ports[0].postMessage({status:"done",eventId:oe,eventType:Ne,response:Nn})})()}_subscribe(E,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[E]||(this.handlersMap[E]=new Set),this.handlersMap[E].add(b)}_unsubscribe(E,b){this.handlersMap[E]&&b&&this.handlersMap[E].delete(b),(!b||0===this.handlersMap[E].size)&&delete this.handlersMap[E],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return S.receivers=[],S})();function So(S="",_=10){let E="";for(let b=0;b<_;b++)E+=Math.floor(10*Math.random());return S+E}class Tf{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,E,b=50){var K=this;return(0,y.c)(function*(){const oe=typeof MessageChannel<"u"?new MessageChannel:null;if(!oe)throw new Error("connection_unavailable");let Ne,ct;return new Promise((Pt,hn)=>{const Nn=So("",20);oe.port1.start();const sr=setTimeout(()=>{hn(new Error("unsupported_event"))},b);ct={messageChannel:oe,onMessage(Po){const Ts=Po;if(Ts.data.eventId===Nn)switch(Ts.data.status){case"ack":clearTimeout(sr),Ne=setTimeout(()=>{hn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ne),Pt(Ts.data.response);break;default:clearTimeout(sr),clearTimeout(Ne),hn(new Error("invalid_response"))}}},K.handlers.add(ct),oe.port1.addEventListener("message",ct.onMessage),K.target.postMessage({eventType:_,eventId:Nn,data:E},[oe.port2])}).finally(()=>{ct&&K.removeMessageHandler(ct)})})()}}function zr(){return window}function bn(){return typeof zr().WorkerGlobalScope<"u"&&"function"==typeof zr().importScripts}function da(){return(da=(0,y.c)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Da="firebaseLocalStorageDb",tc="firebaseLocalStorage",Ai="fbase_key";class Kt{constructor(_){this.request=_}toPromise(){return new Promise((_,E)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{E(this.request.error)})})}}function yo(S,_){return S.transaction([tc],_?"readwrite":"readonly").objectStore(tc)}function ha(){const S=indexedDB.open(Da,1);return new Promise((_,E)=>{S.addEventListener("error",()=>{E(S.error)}),S.addEventListener("upgradeneeded",()=>{const b=S.result;try{b.createObjectStore(tc,{keyPath:Ai})}catch(K){E(K)}}),S.addEventListener("success",(0,y.c)(function*(){const b=S.result;b.objectStoreNames.contains(tc)?_(b):(b.close(),yield function nc(){const S=indexedDB.deleteDatabase(Da);return new Kt(S).toPromise()}(),_(yield ha()))}))})}function Xo(S,_,E){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,y.c)(function*(S,_,E){const b=yo(S,!0).put({[Ai]:_,value:E});return new Kt(b).toPromise()})).apply(this,arguments)}function fa(){return(fa=(0,y.c)(function*(S,_){const E=yo(S,!1).get(_),b=yield new Kt(E).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function li(S,_){const E=yo(S,!0).delete(_);return new Kt(E).toPromise()}const Dc=(()=>{class S{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var E=this;return(0,y.c)(function*(){return E.db||(E.db=yield ha()),E.db})()}_withRetries(E){var b=this;return(0,y.c)(function*(){let K=0;for(;;)try{const oe=yield b._openDb();return yield E(oe)}catch(oe){if(K++>3)throw oe;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var E=this;return(0,y.c)(function*(){return bn()?E.initializeReceiver():E.initializeSender()})()}initializeReceiver(){var E=this;return(0,y.c)(function*(){E.receiver=wf._getInstance(function _n(){return bn()?self:null}()),E.receiver._subscribe("keyChanged",function(){var b=(0,y.c)(function*(K,oe){return{keyProcessed:(yield E._poll()).includes(oe.key)}});return function(K,oe){return b.apply(this,arguments)}}()),E.receiver._subscribe("ping",function(){var b=(0,y.c)(function*(K,oe){return["keyChanged"]});return function(K,oe){return b.apply(this,arguments)}}())})()}initializeSender(){var E=this;return(0,y.c)(function*(){var b,K;if(E.activeServiceWorker=yield function Ba(){return da.apply(this,arguments)}(),!E.activeServiceWorker)return;E.sender=new Tf(E.activeServiceWorker);const oe=yield E.sender._send("ping",{},800);oe&&null!==(b=oe[0])&&void 0!==b&&b.fulfilled&&null!==(K=oe[0])&&void 0!==K&&K.value.includes("keyChanged")&&(E.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(E){var b=this;return(0,y.c)(function*(){if(b.sender&&b.activeServiceWorker&&function wi(){var S;return(null===(S=navigator?.serviceWorker)||void 0===S?void 0:S.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:E},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.c)(function*(){try{if(!indexedDB)return!1;const E=yield ha();return yield Xo(E,Ht,"1"),yield li(E,Ht),!0}catch{}return!1})()}_withPendingWrite(E){var b=this;return(0,y.c)(function*(){b.pendingWrites++;try{yield E()}finally{b.pendingWrites--}})()}_set(E,b){var K=this;return(0,y.c)(function*(){return K._withPendingWrite((0,y.c)(function*(){return yield K._withRetries(oe=>Xo(oe,E,b)),K.localCache[E]=b,K.notifyServiceWorker(E)}))})()}_get(E){var b=this;return(0,y.c)(function*(){const K=yield b._withRetries(oe=>function md(S,_){return fa.apply(this,arguments)}(oe,E));return b.localCache[E]=K,K})()}_remove(E){var b=this;return(0,y.c)(function*(){return b._withPendingWrite((0,y.c)(function*(){return yield b._withRetries(K=>li(K,E)),delete b.localCache[E],b.notifyServiceWorker(E)}))})()}_poll(){var E=this;return(0,y.c)(function*(){const b=yield E._withRetries(Ne=>{const ct=yo(Ne,!1).getAll();return new Kt(ct).toPromise()});if(!b)return[];if(0!==E.pendingWrites)return[];const K=[],oe=new Set;if(0!==b.length)for(const{fbase_key:Ne,value:ct}of b)oe.add(Ne),JSON.stringify(E.localCache[Ne])!==JSON.stringify(ct)&&(E.notifyListeners(Ne,ct),K.push(Ne));for(const Ne of Object.keys(E.localCache))E.localCache[Ne]&&!oe.has(Ne)&&(E.notifyListeners(Ne,null),K.push(Ne));return K})()}notifyListeners(E,b){this.localCache[E]=b;const K=this.listeners[E];if(K)for(const oe of Array.from(K))oe(b)}startPolling(){var E=this;this.stopPolling(),this.pollTimer=setInterval((0,y.c)(function*(){return E._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(E,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[E]||(this.listeners[E]=new Set,this._get(E)),this.listeners[E].add(b)}_removeListener(E,b){this.listeners[E]&&(this.listeners[E].delete(b),0===this.listeners[E].size&&delete this.listeners[E]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return S.type="LOCAL",S})(),ps=1e12;class w{constructor(_){this.auth=_,this.counter=ps,this._widgets=new Map}render(_,E){const b=this.counter;return this._widgets.set(b,new N(_,this.auth.name,E||{})),this.counter++,b}reset(_){var E;const b=_||ps;null===(E=this._widgets.get(b))||void 0===E||E.delete(),this._widgets.delete(b)}getResponse(_){var E;return(null===(E=this._widgets.get(_||ps))||void 0===E?void 0:E.getResponse())||""}execute(_){var E=this;return(0,y.c)(function*(){var b;return null===(b=E._widgets.get(_||ps))||void 0===b||b.execute(),""})()}}class N{constructor(_,E,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof _?document.getElementById(_):_;pe(K,"argument-error",{appName:E}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function A(S){const _=[],E="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<S;b++)_.push(E.charAt(Math.floor(62*Math.random())));return _.join("")}(50);const{callback:_,"expired-callback":E}=this.params;if(_)try{_(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,E)try{E()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const x=Gr("rcb"),G=new Lt(3e4,6e4);class re{constructor(){var _;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(_=zr().grecaptcha)||void 0===_||!_.render)}load(_,E=""){return pe(function ve(S){return S.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(S)}(E),_,"argument-error"),this.shouldResolveImmediately(E)&&qn(zr().grecaptcha)?Promise.resolve(zr().grecaptcha):new Promise((b,K)=>{const oe=zr().setTimeout(()=>{K(ke(_,"network-request-failed"))},G.get());zr()[x]=()=>{zr().clearTimeout(oe),delete zr()[x];const ct=zr().grecaptcha;if(!ct||!qn(ct))return void K(ke(_,"internal-error"));const Pt=ct.render;ct.render=(hn,Nn)=>{const sr=Pt(hn,Nn);return this.counter++,sr},this.hostLanguage=E,b(ct)},ur(`${function $n(){return Yn.recaptchaV2Script}()}?${(0,q.ik)({onload:x,render:"explicit",hl:E})}`).catch(()=>{clearTimeout(oe),K(ke(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){var E;return!(null===(E=zr().grecaptcha)||void 0===E||!E.render)&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class dt{load(_){return(0,y.c)(function*(){return new w(_)})()}clearedOneInstance(){}}const rt="recaptcha",$t={theme:"light",type:"image"};class Ut{constructor(_,E,b=Object.assign({},$t)){this.parameters=b,this.type=rt,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gn(_),this.isInvisible="invisible"===this.parameters.size,pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof E?document.getElementById(E):E;pe(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dt:new re,this.validateStartingState()}verify(){var _=this;return(0,y.c)(function*(){_.assertNotDestroyed();const E=yield _.render(),b=_.getAssertedRecaptcha();return b.getResponse(E)||new Promise(oe=>{const Ne=ct=>{ct&&(_.tokenChangeListeners.delete(Ne),oe(ct))};_.tokenChangeListeners.add(Ne),_.isInvisible&&b.execute(E)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){pe(!this.parameters.sitekey,this.auth,"argument-error"),pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return E=>{if(this.tokenChangeListeners.forEach(b=>b(E)),"function"==typeof _)_(E);else if("string"==typeof _){const b=zr()[_];"function"==typeof b&&b(E)}}}assertNotDestroyed(){pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,y.c)(function*(){if(yield _.init(),!_.widgetId){let E=_.container;if(!_.isInvisible){const b=document.createElement("div");E.appendChild(b),E=b}_.widgetId=_.getAssertedRecaptcha().render(E,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,y.c)(function*(){pe(at()&&!bn(),_.auth,"internal-error"),yield function nr(){let S=null;return new Promise(_=>{"complete"!==document.readyState?(S=()=>_(),window.addEventListener("load",S)):_()}).catch(_=>{throw S&&window.removeEventListener("load",S),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const E=yield function Rr(S){return Bt.apply(this,arguments)}(_.auth);pe(E,_.auth,"internal-error"),_.parameters.sitekey=E})()}getAssertedRecaptcha(){return pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Vi{constructor(_,E){this.verificationId=_,this.onConfirmation=E}confirm(_){const E=As._fromVerification(this.verificationId,_);return this.onConfirmation(E)}}function es(S,_,E){return rc.apply(this,arguments)}function rc(){return(rc=(0,y.c)(function*(S,_,E){const b=gn(S),K=yield ju(b,_,(0,q.Yj)(E));return new Vi(K,oe=>Xa(b,oe))})).apply(this,arguments)}function ic(S,_,E){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,y.c)(function*(S,_,E){const b=(0,q.Yj)(S);yield yl(!1,b,"phone");const K=yield ju(b.auth,_,(0,q.Yj)(E));return new Vi(K,oe=>lo(b,oe))})).apply(this,arguments)}function Uo(S,_,E){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,y.c)(function*(S,_,E){const b=(0,q.Yj)(S),K=yield ju(b.auth,_,(0,q.Yj)(E));return new Vi(K,oe=>yr(b,oe))})).apply(this,arguments)}function ju(S,_,E){return $u.apply(this,arguments)}function $u(){return $u=(0,y.c)(function*(S,_,E){var b;const K=yield E.verify();try{let oe;if(pe("string"==typeof K,S,"argument-error"),pe(E.type===rt,S,"argument-error"),oe="string"==typeof _?{phoneNumber:_}:_,"session"in oe){const Ne=oe.session;if("phoneNumber"in oe)return pe("enroll"===Ne.type,S,"internal-error"),(yield function Cc(S,_){return gt(S,"POST","/v2/accounts/mfaEnrollment:start",qe(S,_))}(S,{idToken:Ne.credential,phoneEnrollmentInfo:{phoneNumber:oe.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{pe("signin"===Ne.type,S,"internal-error");const ct=(null===(b=oe.multiFactorHint)||void 0===b?void 0:b.uid)||oe.multiFactorUid;return pe(ct,S,"missing-multi-factor-info"),(yield function Yc(S,_){return gt(S,"POST","/v2/accounts/mfaSignIn:start",qe(S,_))}(S,{mfaPendingCredential:Ne.credential,mfaEnrollmentId:ct,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ne}=yield function zo(S,_){return Us.apply(this,arguments)}(S,{phoneNumber:oe.phoneNumber,recaptchaToken:K});return Ne}}finally{E._reset()}}),$u.apply(this,arguments)}function ym(S,_){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,y.c)(function*(S,_){yield hs((0,q.Yj)(S),_)})).apply(this,arguments)}let cr=(()=>{class S{constructor(E){this.providerId=S.PROVIDER_ID,this.auth=gn(E)}verifyPhoneNumber(E,b){return ju(this.auth,E,(0,q.Yj)(b))}static credential(E,b){return As._fromVerification(E,b)}static credentialFromResult(E){return S.credentialFromTaggedObject(E)}static credentialFromError(E){return S.credentialFromTaggedObject(E.customData||{})}static credentialFromTaggedObject({_tokenResponse:E}){if(!E)return null;const{phoneNumber:b,temporaryProof:K}=E;return b&&K?As._fromTokenResponse(b,K):null}}return S.PROVIDER_ID="phone",S.PHONE_SIGN_IN_METHOD="phone",S})();function jr(S,_){return _?It(_):(pe(S._popupRedirectResolver,S,"argument-error"),S._popupRedirectResolver)}class Df extends Yr{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return Li(_,this._buildIdpRequest())}_linkToIdToken(_,E){return Li(_,this._buildIdpRequest(E))}_getReauthenticationResolver(_){return Li(_,this._buildIdpRequest())}_buildIdpRequest(_){const E={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(E.idToken=_),E}}function Hp(S){return aa(S.auth,new Df(S),S.bypassAuthState)}function Sf(S){const{auth:_,user:E}=S;return pe(E,_,"internal-error"),kr(E,new Df(S),S.bypassAuthState)}function Af(S){return _h.apply(this,arguments)}function _h(){return(_h=(0,y.c)(function*(S){const{auth:_,user:E}=S;return pe(E,_,"internal-error"),hs(E,new Df(S),S.bypassAuthState)})).apply(this,arguments)}class _d{constructor(_,E,b,K,oe=!1){this.auth=_,this.resolver=b,this.user=K,this.bypassAuthState=oe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(E)?E:[E]}execute(){var _=this;return new Promise(function(){var E=(0,y.c)(function*(b,K){_.pendingPromise={resolve:b,reject:K};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(oe){_.reject(oe)}});return function(b,K){return E.apply(this,arguments)}}())}onAuthEvent(_){var E=this;return(0,y.c)(function*(){const{urlResponse:b,sessionId:K,postBody:oe,tenantId:Ne,error:ct,type:Pt}=_;if(ct)return void E.reject(ct);const hn={auth:E.auth,requestUri:b,sessionId:K,tenantId:Ne||void 0,postBody:oe||void 0,user:E.user,bypassAuthState:E.bypassAuthState};try{E.resolve(yield E.getIdpTask(Pt)(hn))}catch(Nn){E.reject(Nn)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return Hp;case"linkViaPopup":case"linkViaRedirect":return Af;case"reauthViaPopup":case"reauthViaRedirect":return Sf;default:Ae(this.auth,"internal-error")}}resolve(_){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yh=new Lt(2e3,1e4);function Pf(S,_,E){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,y.c)(function*(S,_,E){const b=gn(S);Re(S,_,Wi);const K=jr(b,E);return new Al(b,"signInViaPopup",_,K).executeNotNull()})).apply(this,arguments)}function Gu(S,_,E){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,y.c)(function*(S,_,E){const b=(0,q.Yj)(S);Re(b.auth,_,Wi);const K=jr(b.auth,E);return new Al(b.auth,"reauthViaPopup",_,K,b).executeNotNull()})).apply(this,arguments)}function zp(S,_,E){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,y.c)(function*(S,_,E){const b=(0,q.Yj)(S);Re(b.auth,_,Wi);const K=jr(b.auth,E);return new Al(b.auth,"linkViaPopup",_,K,b).executeNotNull()})).apply(this,arguments)}let Al=(()=>{class S extends _d{constructor(E,b,K,oe,Ne){super(E,b,oe,Ne),this.provider=K,this.authWindow=null,this.pollId=null,S.currentPopupAction&&S.currentPopupAction.cancel(),S.currentPopupAction=this}executeNotNull(){var E=this;return(0,y.c)(function*(){const b=yield E.execute();return pe(b,E.auth,"internal-error"),b})()}onExecution(){var E=this;return(0,y.c)(function*(){Ve(1===E.filter.length,"Popup operations only handle one event");const b=So();E.authWindow=yield E.resolver._openPopup(E.auth,E.provider,E.filter[0],b),E.authWindow.associatedEvent=b,E.resolver._originValidation(E.auth).catch(K=>{E.reject(K)}),E.resolver._isIframeWebStorageSupported(E.auth,K=>{K||E.reject(ke(E.auth,"web-storage-unsupported"))}),E.pollUserCancellation()})()}get eventId(){var E;return(null===(E=this.authWindow)||void 0===E?void 0:E.associatedEvent)||null}cancel(){this.reject(ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,S.currentPopupAction=null}pollUserCancellation(){const E=()=>{var b,K;this.pollId=null!==(K=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==K&&K.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ke(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(E,yh.get())};E()}}return S.currentPopupAction=null,S})();const uu="pendingRedirect",Pl=new Map;class eo extends _d{constructor(_,E,b=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],E,void 0,b),this.eventId=null}execute(){var _=()=>super.execute,E=this;return(0,y.c)(function*(){let b=Pl.get(E.auth._key());if(!b){try{const oe=(yield function bf(S,_){return ja.apply(this,arguments)}(E.resolver,E.auth))?yield _().call(E):null;b=()=>Promise.resolve(oe)}catch(K){b=()=>Promise.reject(K)}Pl.set(E.auth._key(),b)}return E.bypassAuthState||Pl.set(E.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(_){var E=()=>super.onAuthEvent,b=this;return(0,y.c)(function*(){if("signInViaRedirect"===_.type)return E().call(b,_);if("unknown"!==_.type){if(_.eventId){const K=yield b.auth._redirectUserForId(_.eventId);if(K)return b.user=K,E().call(b,_);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,y.c)(function*(){})()}cleanUp(){}}function ja(){return(ja=(0,y.c)(function*(S,_){const E=Hu(_),b=pr(S);if(!(yield b._isAvailable()))return!1;const K="true"===(yield b._get(E));return yield b._remove(E),K})).apply(this,arguments)}function Sc(S,_){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,y.c)(function*(S,_){return pr(S)._set(Hu(_),"true")})).apply(this,arguments)}function $a(){Pl.clear()}function qs(S,_){Pl.set(S._key(),_)}function pr(S){return It(S._redirectPersistence)}function Hu(S){return wn(uu,S.config.apiKey,S.name)}function wr(S,_,E){return function Io(S,_,E){return bl.apply(this,arguments)}(S,_,E)}function bl(){return(bl=(0,y.c)(function*(S,_,E){const b=gn(S);Re(S,_,Wi),yield b._initializationPromise;const K=jr(b,E);return yield Sc(K,b),K._openRedirect(b,_,"signInViaRedirect")})).apply(this,arguments)}function Jc(S,_,E){return function Os(S,_,E){return vh.apply(this,arguments)}(S,_,E)}function vh(){return(vh=(0,y.c)(function*(S,_,E){const b=(0,q.Yj)(S);Re(b.auth,_,Wi),yield b.auth._initializationPromise;const K=jr(b.auth,E);yield Sc(K,b.auth);const oe=yield ws(b);return K._openRedirect(b.auth,_,"reauthViaRedirect",oe)})).apply(this,arguments)}function Xc(S,_,E){return function Cs(S,_,E){return Sa.apply(this,arguments)}(S,_,E)}function Sa(){return(Sa=(0,y.c)(function*(S,_,E){const b=(0,q.Yj)(S);Re(b.auth,_,Wi),yield b.auth._initializationPromise;const K=jr(b.auth,E);yield yl(!1,b,_.providerId),yield Sc(K,b.auth);const oe=yield ws(b);return K._openRedirect(b.auth,_,"linkViaRedirect",oe)})).apply(this,arguments)}function Zc(S,_){return du.apply(this,arguments)}function du(){return(du=(0,y.c)(function*(S,_){return yield gn(S)._initializationPromise,Ac(S,_,!1)})).apply(this,arguments)}function Ac(S,_){return hu.apply(this,arguments)}function hu(){return(hu=(0,y.c)(function*(S,_,E=!1){const b=gn(S),K=jr(b,_),Ne=yield new eo(b,K,E).execute();return Ne&&!E&&(delete Ne.user._redirectEventId,yield b._persistUserIfCurrent(Ne.user),yield b._setRedirectUser(null,_)),Ne})).apply(this,arguments)}function ws(S){return pa.apply(this,arguments)}function pa(){return(pa=(0,y.c)(function*(S){const _=So(`${S.uid}:::`);return S._redirectEventId=_,yield S.auth._setRedirectUser(S),yield S.auth._persistUserIfCurrent(S),_})).apply(this,arguments)}class Ns{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let E=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(_,b)&&(E=!0,this.sendToConsumer(_,b),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function sc(S){switch(S.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ea(S);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,E||(this.queuedRedirectEvent=_,E=!0)),E}sendToConsumer(_,E){var b;if(_.error&&!ea(_)){const K=(null===(b=_.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";E.onError(ke(this.auth,K))}else E.onAuthEvent(_)}isEventForConsumer(_,E){const b=null===E.eventId||!!_.eventId&&_.eventId===E.eventId;return E.filter.includes(_.type)&&b}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Co(_))}saveEventToCache(_){this.cachedEventUids.add(Co(_)),this.lastProcessedEventTime=Date.now()}}function Co(S){return[S.type,S.eventId,S.sessionId,S.tenantId].filter(_=>_).join("-")}function ea({type:S,error:_}){return"unknown"===S&&"auth/no-auth-event"===_?.code}function zu(S){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,y.c)(function*(S,_={}){return gt(S,"GET","/v1/projects",_)})).apply(this,arguments)}const Eh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,el=/^https?/;function Aa(){return(Aa=(0,y.c)(function*(S){if(S.config.emulator)return;const{authorizedDomains:_}=yield zu(S);for(const E of _)try{if(oc(E))return}catch{}Ae(S,"unauthorized-domain")})).apply(this,arguments)}function oc(S){const _=ze(),{protocol:E,hostname:b}=new URL(_);if(S.startsWith("chrome-extension://")){const Ne=new URL(S);return""===Ne.hostname&&""===b?"chrome-extension:"===E&&S.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===E&&Ne.hostname===b}if(!el.test(E))return!1;if(Eh.test(S))return b===S;const K=S.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(b)}const Mf=new Lt(3e4,6e4);function Ih(){const S=zr().___jsl;if(S?.H)for(const _ of Object.keys(S.H))if(S.H[_].r=S.H[_].r||[],S.H[_].L=S.H[_].L||[],S.H[_].r=[...S.H[_].L],S.CP)for(let E=0;E<S.CP.length;E++)S.CP[E]=null}let Pa=null;const qp=new Lt(5e3,15e3),tl="__/auth/iframe",pu="emulator/auth/iframe",yd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},as=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rf(S){const _=S.config;pe(_.authDomain,S,"auth-domain-config-required");const E=_.emulator?rn(_,pu):`https://${S.config.authDomain}/${tl}`,b={apiKey:_.apiKey,appName:S.name,v:k.SDK_VERSION},K=as.get(S.config.apiHost);K&&(b.eid=K);const oe=S._getFrameworks();return oe.length&&(b.fw=oe.join(",")),`${E}?${(0,q.ik)(b).slice(1)}`}function Bo(){return Bo=(0,y.c)(function*(S){const _=yield function Ch(S){return Pa=Pa||function fu(S){return new Promise((_,E)=>{var b,K,oe;function Ne(){Ih(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{Ih(),E(ke(S,"network-request-failed"))},timeout:Mf.get()})}if(null!==(K=null===(b=zr().gapi)||void 0===b?void 0:b.iframes)&&void 0!==K&&K.Iframe)_(gapi.iframes.getContext());else{if(null===(oe=zr().gapi)||void 0===oe||!oe.load){const ct=Gr("iframefcb");return zr()[ct]=()=>{gapi.load?Ne():E(ke(S,"network-request-failed"))},ur(`${function Oi(){return Yn.gapiScript}()}?onload=${ct}`).catch(Pt=>E(Pt))}Ne()}}).catch(_=>{throw Pa=null,_})}(S),Pa}(S),E=zr().gapi;return pe(E,S,"internal-error"),_.open({where:document.body,url:Rf(S),messageHandlersFilter:E.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yd,dontclear:!0},b=>new Promise(function(){var K=(0,y.c)(function*(oe,Ne){yield b.restyle({setHideOnLeave:!1});const ct=ke(S,"network-request-failed"),Pt=zr().setTimeout(()=>{Ne(ct)},qp.get());function hn(){zr().clearTimeout(Pt),oe(b)}b.ping(hn).then(hn,()=>{Ne(ct)})});return function(oe,Ne){return K.apply(this,arguments)}}()))}),Bo.apply(this,arguments)}const gu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lr{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const rl="__/auth/handler",il="emulator/auth/handler",Ku=encodeURIComponent("fac");function bc(S,_,E,b,K,oe){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,y.c)(function*(S,_,E,b,K,oe){pe(S.config.authDomain,S,"auth-domain-config-required"),pe(S.config.apiKey,S,"invalid-api-key");const Ne={apiKey:S.config.apiKey,appName:S.name,authType:E,redirectUrl:b,v:k.SDK_VERSION,eventId:K};if(_ instanceof Wi){_.setDefaultLanguage(S.languageCode),Ne.providerId=_.providerId||"",(0,q.t7)(_.getCustomParameters())||(Ne.customParameters=JSON.stringify(_.getCustomParameters()));for(const[Nn,sr]of Object.entries(oe||{}))Ne[Nn]=sr}if(_ instanceof Ta){const Nn=_.getScopes().filter(sr=>""!==sr);Nn.length>0&&(Ne.scopes=Nn.join(","))}S.tenantId&&(Ne.tid=S.tenantId);const ct=Ne;for(const Nn of Object.keys(ct))void 0===ct[Nn]&&delete ct[Nn];const Pt=yield S._getAppCheckToken(),hn=Pt?`#${Ku}=${encodeURIComponent(Pt)}`:"";return`${function Of({config:S}){return S.emulator?rn(S,il):`https://${S.authDomain}/${rl}`}(S)}?${(0,q.ik)(ct).slice(1)}${hn}`})).apply(this,arguments)}const vd="webStorageSupport",Th=class Ed{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_o,this._completeRedirectFn=Ac,this._overrideRedirectResult=qs}_openPopup(_,E,b,K){var oe=this;return(0,y.c)(function*(){var Ne;Ve(null===(Ne=oe.eventManagers[_._key()])||void 0===Ne?void 0:Ne.manager,"_initialize() not called before _openPopup()");const ct=yield bc(_,E,b,ze(),K);return function Jr(S,_,E,b=500,K=600){const oe=Math.max((window.screen.availHeight-K)/2,0).toString(),Ne=Math.max((window.screen.availWidth-b)/2,0).toString();let ct="";const Pt=Object.assign(Object.assign({},gu),{width:b.toString(),height:K.toString(),top:oe,left:Ne}),hn=(0,q.Su)().toLowerCase();E&&(ct=jn(hn)?"_blank":E),Nr(hn)&&(_=_||"http://localhost",Pt.scrollbars="yes");const Nn=Object.entries(Pt).reduce((Po,[Ts,xl])=>`${Po}${Ts}=${xl},`,"");if(function Kn(S=(0,q.Su)()){var _;return en(S)&&!(null===(_=window.navigator)||void 0===_||!_.standalone)}(hn)&&"_self"!==ct)return function Ha(S,_){const E=document.createElement("a");E.href=S,E.target=_;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),E.dispatchEvent(b)}(_||"",ct),new Lr(null);const sr=window.open(_||"",ct,Nn);pe(sr,S,"popup-blocked");try{sr.focus()}catch{}return new Lr(sr)}(_,ct,So())})()}_openRedirect(_,E,b,K){var oe=this;return(0,y.c)(function*(){return yield oe._originValidation(_),function Tc(S){zr().location.href=S}(yield bc(_,E,b,ze(),K)),new Promise(()=>{})})()}_initialize(_){const E=_._key();if(this.eventManagers[E]){const{manager:K,promise:oe}=this.eventManagers[E];return K?Promise.resolve(K):(Ve(oe,"If manager is not set, promise should be"),oe)}const b=this.initAndGetManager(_);return this.eventManagers[E]={promise:b},b.catch(()=>{delete this.eventManagers[E]}),b}initAndGetManager(_){var E=this;return(0,y.c)(function*(){const b=yield function Hi(S){return Bo.apply(this,arguments)}(_),K=new Ns(_);return b.register("authEvent",oe=>(pe(oe?.authEvent,_,"invalid-auth-event"),{status:K.onEvent(oe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),E.eventManagers[_._key()]={manager:K},E.iframes[_._key()]=b,K})()}_isIframeWebStorageSupported(_,E){this.iframes[_._key()].send(vd,{type:vd},K=>{var oe;const Ne=null===(oe=K?.[0])||void 0===oe?void 0:oe[vd];void 0!==Ne&&E(!!Ne),Ae(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const E=_._key();return this.originValidationPromises[E]||(this.originValidationPromises[E]=function Wa(S){return Aa.apply(this,arguments)}(_)),this.originValidationPromises[E]}get _shouldInitProactively(){return ei()||pn()||en()}};class Rl{constructor(_){this.factorId=_}_process(_,E,b){switch(E.type){case"enroll":return this._finalizeEnroll(_,E.credential,b);case"signin":return this._finalizeSignIn(_,E.credential);default:return we("unexpected MultiFactorSessionType")}}}class mu extends Rl{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new mu(_)}_finalizeEnroll(_,E,b){return function Nt(S,_){return gt(S,"POST","/v2/accounts/mfaEnrollment:finalize",qe(S,_))}(_,{idToken:E,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,E){return function vo(S,_){return gt(S,"POST","/v2/accounts/mfaSignIn:finalize",qe(S,_))}(_,{mfaPendingCredential:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Rc=(()=>{class S{constructor(){}static assertion(E){return mu._fromCredential(E)}}return S.FACTOR_ID="phone",S})();var Ol="@firebase/auth";class Nl{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var E=this;return(0,y.c)(function*(){return E.assertAuthConfigured(),yield E.auth._initializationPromise,E.auth.currentUser?{accessToken:yield E.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const E=this.auth.onIdTokenChanged(b=>{_(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(_,E),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const E=this.internalListeners.get(_);E&&(this.internalListeners.delete(_),E(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Id=(0,q.sX)("authIdTokenMaxAge")||300;let lc=null;const Cd=S=>function(){var _=(0,y.c)(function*(E){const b=E&&(yield E.getIdTokenResult()),K=b&&((new Date).getTime()-Date.parse(b.issuedAtTime))/1e3;if(K&&K>Id)return;const oe=b?.token;lc!==oe&&(lc=oe,yield fetch(S,{method:oe?"POST":"DELETE",headers:oe?{Authorization:`Bearer ${oe}`}:{}}))});return function(E){return _.apply(this,arguments)}}();function Oc(S=(0,k.getApp)()){const _=(0,k._getProvider)(S,"auth");if(_.isInitialized())return _.getImmediate();const E=function xi(S,_){const E=(0,k._getProvider)(S,"auth");if(E.isInitialized()){const K=E.getImmediate(),oe=E.getOptions();if((0,q.IN)(oe,_??{}))return K;Ae(K,"already-initialized")}return E.initialize({options:_})}(S,{popupRedirectResolver:Th,persistence:[Dc,gd,_o]}),b=(0,q.sX)("authTokenSyncURL");if(b){const oe=Cd(b);(function Jn(S,_,E){(0,q.Yj)(S).beforeAuthStateChanged(_,E)})(E,oe,()=>oe(E.currentUser)),function ci(S,_,E,b){(0,q.Yj)(S).onIdTokenChanged(_,E,b)}(E,Ne=>oe(Ne))}const K=(0,q.EB)("auth");return K&&Ki(E,`http://${K}`),E}(function Ar(S){Yn=S})({loadJS:S=>new Promise((_,E)=>{const b=document.createElement("script");b.setAttribute("src",S),b.onload=_,b.onerror=K=>{const oe=ke("internal-error");oe.customData=K,E(oe)},b.type="text/javascript",b.charset="UTF-8",function yu(){var S,_;return null!==(_=null===(S=document.getElementsByTagName("head"))||void 0===S?void 0:S[0])&&void 0!==_?_:document}().appendChild(b)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function qa(S){(0,k._registerComponent)(new _e.Yl("auth",(_,{options:E})=>{const b=_.getProvider("app").getImmediate(),K=_.getProvider("heartbeat"),oe=_.getProvider("app-check-internal"),{apiKey:Ne,authDomain:ct}=b.options;pe(Ne&&!Ne.includes(":"),"invalid-api-key",{appName:b.name});const Pt={apiKey:Ne,authDomain:ct,clientPlatform:S,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:le(S)},hn=new zt(b,K,oe,Pt);return function sa(S,_){const E=_?.persistence||[],b=(Array.isArray(E)?E:[E]).map(It);_?.errorMap&&S._updateErrorMap(_.errorMap),S._initializeWithPersistence(b,_?.popupRedirectResolver)}(hn,E),hn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,E,b)=>{_.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new _e.Yl("auth-internal",_=>{const E=gn(_.getProvider("auth").getImmediate());return new Nl(E)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(Ol,"1.6.0",function Yu(S){switch(S){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(S)),(0,k.registerVersion)(Ol,"1.6.0","esm2017")}("Browser")},7144:(jt,He,V)=>{V.d(He,{A3:()=>Je,AL:()=>at,AV:()=>pe,AX:()=>Sn,Al:()=>_e,Cc:()=>ze,EB:()=>Ke,GI:()=>tn,IN:()=>Xr,L0:()=>qn,O0:()=>fe,OS:()=>Ur,Su:()=>Xe,UR:()=>ft,Uc:()=>q,Uj:()=>zn,Uv:()=>Tt,WW:()=>ge,Wg:()=>Pe,Ww:()=>xe,Y7:()=>Vr,Y9:()=>k,YD:()=>Re,Yd:()=>Ae,Yj:()=>We,aw:()=>Di,c9:()=>Le,i:()=>nn,iQ:()=>xn,ik:()=>Sr,iw:()=>Lt,kF:()=>ar,kH:()=>Bt,kx:()=>gt,my:()=>yn,o5:()=>Wt,o9:()=>ae,on:()=>st,qS:()=>Cn,qk:()=>rn,sX:()=>ke,t7:()=>Rr,uH:()=>Ve,yW:()=>we,yy:()=>Ue});const y={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},q=function(ce,de){if(!ce)throw k(de)},k=function(ce){return new Error("Firebase Database ("+y.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ce)},D=function(ce){const de=[];let ee=0;for(let Z=0;Z<ce.length;Z++){let te=ce.charCodeAt(Z);te<128?de[ee++]=te:te<2048?(de[ee++]=te>>6|192,de[ee++]=63&te|128):55296==(64512&te)&&Z+1<ce.length&&56320==(64512&ce.charCodeAt(Z+1))?(te=65536+((1023&te)<<10)+(1023&ce.charCodeAt(++Z)),de[ee++]=te>>18|240,de[ee++]=te>>12&63|128,de[ee++]=te>>6&63|128,de[ee++]=63&te|128):(de[ee++]=te>>12|224,de[ee++]=te>>6&63|128,de[ee++]=63&te|128)}return de},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ce,de){if(!Array.isArray(ce))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ee=de?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[];for(let te=0;te<ce.length;te+=3){const $e=ce[te],It=te+1<ce.length,qt=It?ce[te+1]:0,In=te+2<ce.length,wn=In?ce[te+2]:0;let Nr=(15&qt)<<2|wn>>6,pn=63&wn;In||(pn=64,It||(Nr=64)),Z.push(ee[$e>>2],ee[(3&$e)<<4|qt>>4],ee[Nr],ee[pn])}return Z.join("")},encodeString(ce,de){return this.HAS_NATIVE_SUPPORT&&!de?btoa(ce):this.encodeByteArray(D(ce),de)},decodeString(ce,de){return this.HAS_NATIVE_SUPPORT&&!de?atob(ce):function(ce){const de=[];let ee=0,Z=0;for(;ee<ce.length;){const te=ce[ee++];if(te<128)de[Z++]=String.fromCharCode(te);else if(te>191&&te<224){const $e=ce[ee++];de[Z++]=String.fromCharCode((31&te)<<6|63&$e)}else if(te>239&&te<365){const In=((7&te)<<18|(63&ce[ee++])<<12|(63&ce[ee++])<<6|63&ce[ee++])-65536;de[Z++]=String.fromCharCode(55296+(In>>10)),de[Z++]=String.fromCharCode(56320+(1023&In))}else{const $e=ce[ee++],It=ce[ee++];de[Z++]=String.fromCharCode((15&te)<<12|(63&$e)<<6|63&It)}}return de.join("")}(this.decodeStringToByteArray(ce,de))},decodeStringToByteArray(ce,de){this.init_();const ee=de?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[];for(let te=0;te<ce.length;){const $e=ee[ce.charAt(te++)],qt=te<ce.length?ee[ce.charAt(te)]:0;++te;const wn=te<ce.length?ee[ce.charAt(te)]:64;++te;const Zt=te<ce.length?ee[ce.charAt(te)]:64;if(++te,null==$e||null==qt||null==wn||null==Zt)throw new Ee;Z.push($e<<2|qt>>4),64!==wn&&(Z.push(qt<<4&240|wn>>2),64!==Zt&&Z.push(wn<<6&192|Zt))}return Z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ce=0;ce<this.ENCODED_VALS.length;ce++)this.byteToCharMap_[ce]=this.ENCODED_VALS.charAt(ce),this.charToByteMap_[this.byteToCharMap_[ce]]=ce,this.byteToCharMapWebSafe_[ce]=this.ENCODED_VALS_WEBSAFE.charAt(ce),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ce]]=ce,ce>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ce)]=ce,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ce)]=ce)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Le=function(ce){const de=D(ce);return _e.encodeByteArray(de,!0)},Pe=function(ce){return Le(ce).replace(/\./g,"")},ge=function(ce){try{return _e.decodeString(ce,!0)}catch(de){console.error("base64Decode failed: ",de)}return null};function fe(ce){return xe(void 0,ce)}function xe(ce,de){if(!(de instanceof Object))return de;switch(de.constructor){case Date:return new Date(de.getTime());case Object:void 0===ce&&(ce={});break;case Array:ce=[];break;default:return de}for(const ee in de)!de.hasOwnProperty(ee)||!it(ee)||(ce[ee]=xe(ce[ee],de[ee]));return ce}function it(ce){return"__proto__"!==ce}const tt=()=>{try{return function Ie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ce=process.env.__FIREBASE_DEFAULTS__;return ce?JSON.parse(ce):void 0})()||(()=>{if(typeof document>"u")return;let ce;try{ce=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const de=ce&&ge(ce[1]);return de&&JSON.parse(de)})()}catch(ce){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ce}`)}},Ke=ce=>{var de,ee;return null===(ee=null===(de=tt())||void 0===de?void 0:de.emulatorHosts)||void 0===ee?void 0:ee[ce]},st=ce=>{const de=Ke(ce);if(!de)return;const ee=de.lastIndexOf(":");if(ee<=0||ee+1===de.length)throw new Error(`Invalid host ${de} with no separate hostname and port!`);const Z=parseInt(de.substring(ee+1),10);return"["===de[0]?[de.substring(1,ee-1),Z]:[de.substring(0,ee),Z]},Ae=()=>{var ce;return null===(ce=tt())||void 0===ce?void 0:ce.config},ke=ce=>{var de;return null===(de=tt())||void 0===de?void 0:de[`_${ce}`]};class ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((de,ee)=>{this.resolve=de,this.reject=ee})}wrapCallback(de){return(ee,Z)=>{ee?this.reject(ee):this.resolve(Z),"function"==typeof de&&(this.promise.catch(()=>{}),1===de.length?de(ee):de(ee,Z))}}}function Re(ce,de){if(ce.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Z=de||"demo-project",te=ce.iat||0,$e=ce.sub||ce.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const It=Object.assign({iss:`https://securetoken.google.com/${Z}`,aud:Z,iat:te,exp:te+3600,auth_time:te,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},ce);return[Pe(JSON.stringify({alg:"none",type:"JWT"})),Pe(JSON.stringify(It)),""].join(".")}function Xe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function pe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function we(){var ce;const de=null===(ce=tt())||void 0===ce?void 0:ce.forceEnvironment;if("node"===de)return!0;if("browser"===de)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ve(){return"object"==typeof self&&self.self===self}function ze(){const ce="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ce&&void 0!==ce.id}function at(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Tt(){const ce=Xe();return ce.indexOf("MSIE ")>=0||ce.indexOf("Trident/")>=0}function Lt(){return!0===y.NODE_CLIENT||!0===y.NODE_ADMIN}function rn(){return!we()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ue(){try{return"object"==typeof indexedDB}catch{return!1}}function Je(){return new Promise((ce,de)=>{try{let ee=!0;const Z="validate-browser-context-for-indexeddb-analytics-module",te=self.indexedDB.open(Z);te.onsuccess=()=>{te.result.close(),ee||self.indexedDB.deleteDatabase(Z),ce(!0)},te.onupgradeneeded=()=>{ee=!1},te.onerror=()=>{var $e;de((null===($e=te.error)||void 0===$e?void 0:$e.message)||"")}}catch(ee){de(ee)}})}class gt extends Error{constructor(de,ee,Z){super(ee),this.code=de,this.customData=Z,this.name="FirebaseError",Object.setPrototypeOf(this,gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ft.prototype.create)}}class ft{constructor(de,ee,Z){this.service=de,this.serviceName=ee,this.errors=Z}create(de,...ee){const Z=ee[0]||{},te=`${this.service}/${de}`,$e=this.errors[de],It=$e?function At(ce,de){return ce.replace(Jt,(ee,Z)=>{const te=de[Z];return null!=te?String(te):`<${Z}?>`})}($e,Z):"Error";return new gt(te,`${this.serviceName}: ${It} (${te}).`,Z)}}const Jt=/\{\$([^}]+)}/g;function tn(ce){return JSON.parse(ce)}function nn(ce){return JSON.stringify(ce)}const En=function(ce){let de={},ee={},Z={},te="";try{const $e=ce.split(".");de=tn(ge($e[0])||""),ee=tn(ge($e[1])||""),te=$e[2],Z=ee.d||{},delete ee.d}catch{}return{header:de,claims:ee,data:Z,signature:te}},Sn=function(ce){const ee=En(ce).claims;return!!ee&&"object"==typeof ee&&ee.hasOwnProperty("iat")},qn=function(ce){const de=En(ce).claims;return"object"==typeof de&&!0===de.admin};function Vr(ce,de){return Object.prototype.hasOwnProperty.call(ce,de)}function Wt(ce,de){if(Object.prototype.hasOwnProperty.call(ce,de))return ce[de]}function Rr(ce){for(const de in ce)if(Object.prototype.hasOwnProperty.call(ce,de))return!1;return!0}function Bt(ce,de,ee){const Z={};for(const te in ce)Object.prototype.hasOwnProperty.call(ce,te)&&(Z[te]=de.call(ee,ce[te],te,ce));return Z}function Xr(ce,de){if(ce===de)return!0;const ee=Object.keys(ce),Z=Object.keys(de);for(const te of ee){if(!Z.includes(te))return!1;const $e=ce[te],It=de[te];if(Un($e)&&Un(It)){if(!Xr($e,It))return!1}else if($e!==It)return!1}for(const te of Z)if(!ee.includes(te))return!1;return!0}function Un(ce){return null!==ce&&"object"==typeof ce}function Sr(ce){const de=[];for(const[ee,Z]of Object.entries(ce))Array.isArray(Z)?Z.forEach(te=>{de.push(encodeURIComponent(ee)+"="+encodeURIComponent(te))}):de.push(encodeURIComponent(ee)+"="+encodeURIComponent(Z));return de.length?"&"+de.join("&"):""}function Di(ce){const de={};return ce.replace(/^\?/,"").split("&").forEach(Z=>{if(Z){const[te,$e]=Z.split("=");de[decodeURIComponent(te)]=decodeURIComponent($e)}}),de}function ar(ce){const de=ce.indexOf("?");if(!de)return"";const ee=ce.indexOf("#",de);return ce.substring(de,ee>0?ee:void 0)}class Cn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let de=1;de<this.blockSize;++de)this.pad_[de]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(de,ee){ee||(ee=0);const Z=this.W_;if("string"==typeof de)for(let Zt=0;Zt<16;Zt++)Z[Zt]=de.charCodeAt(ee)<<24|de.charCodeAt(ee+1)<<16|de.charCodeAt(ee+2)<<8|de.charCodeAt(ee+3),ee+=4;else for(let Zt=0;Zt<16;Zt++)Z[Zt]=de[ee]<<24|de[ee+1]<<16|de[ee+2]<<8|de[ee+3],ee+=4;for(let Zt=16;Zt<80;Zt++){const Nr=Z[Zt-3]^Z[Zt-8]^Z[Zt-14]^Z[Zt-16];Z[Zt]=4294967295&(Nr<<1|Nr>>>31)}let wn,Ln,te=this.chain_[0],$e=this.chain_[1],It=this.chain_[2],qt=this.chain_[3],In=this.chain_[4];for(let Zt=0;Zt<80;Zt++){Zt<40?Zt<20?(wn=qt^$e&(It^qt),Ln=1518500249):(wn=$e^It^qt,Ln=1859775393):Zt<60?(wn=$e&It|qt&($e|It),Ln=2400959708):(wn=$e^It^qt,Ln=3395469782);const Nr=(te<<5|te>>>27)+wn+In+Ln+Z[Zt]&4294967295;In=qt,qt=It,It=4294967295&($e<<30|$e>>>2),$e=te,te=Nr}this.chain_[0]=this.chain_[0]+te&4294967295,this.chain_[1]=this.chain_[1]+$e&4294967295,this.chain_[2]=this.chain_[2]+It&4294967295,this.chain_[3]=this.chain_[3]+qt&4294967295,this.chain_[4]=this.chain_[4]+In&4294967295}update(de,ee){if(null==de)return;void 0===ee&&(ee=de.length);const Z=ee-this.blockSize;let te=0;const $e=this.buf_;let It=this.inbuf_;for(;te<ee;){if(0===It)for(;te<=Z;)this.compress_(de,te),te+=this.blockSize;if("string"==typeof de){for(;te<ee;)if($e[It]=de.charCodeAt(te),++It,++te,It===this.blockSize){this.compress_($e),It=0;break}}else for(;te<ee;)if($e[It]=de[te],++It,++te,It===this.blockSize){this.compress_($e),It=0;break}}this.inbuf_=It,this.total_+=ee}digest(){const de=[];let ee=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let te=this.blockSize-1;te>=56;te--)this.buf_[te]=255&ee,ee/=256;this.compress_(this.buf_);let Z=0;for(let te=0;te<5;te++)for(let $e=24;$e>=0;$e-=8)de[Z]=this.chain_[te]>>$e&255,++Z;return de}}function yn(ce,de){const ee=new ui(ce,de);return ee.subscribe.bind(ee)}class ui{constructor(de,ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ee,this.task.then(()=>{de(this)}).catch(Z=>{this.error(Z)})}next(de){this.forEachObserver(ee=>{ee.next(de)})}error(de){this.forEachObserver(ee=>{ee.error(de)}),this.close(de)}complete(){this.forEachObserver(de=>{de.complete()}),this.close()}subscribe(de,ee,Z){let te;if(void 0===de&&void 0===ee&&void 0===Z)throw new Error("Missing Observer.");te=function Zr(ce,de){if("object"!=typeof ce||null===ce)return!1;for(const ee of de)if(ee in ce&&"function"==typeof ce[ee])return!0;return!1}(de,["next","error","complete"])?de:{next:de,error:ee,complete:Z},void 0===te.next&&(te.next=qi),void 0===te.error&&(te.error=qi),void 0===te.complete&&(te.complete=qi);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?te.error(this.finalError):te.complete()}catch{}}),this.observers.push(te),$e}unsubscribeOne(de){void 0===this.observers||void 0===this.observers[de]||(delete this.observers[de],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(de){if(!this.finalized)for(let ee=0;ee<this.observers.length;ee++)this.sendOne(ee,de)}sendOne(de,ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[de])try{ee(this.observers[de])}catch(Z){typeof console<"u"&&console.error&&console.error(Z)}})}close(de){this.finalized||(this.finalized=!0,void 0!==de&&(this.finalError=de),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qi(){}function xn(ce,de){return`${ce} failed: ${de} argument `}const Ur=function(ce){const de=[];let ee=0;for(let Z=0;Z<ce.length;Z++){let te=ce.charCodeAt(Z);if(te>=55296&&te<=56319){const $e=te-55296;Z++,q(Z<ce.length,"Surrogate pair missing trail surrogate."),te=65536+($e<<10)+(ce.charCodeAt(Z)-56320)}te<128?de[ee++]=te:te<2048?(de[ee++]=te>>6|192,de[ee++]=63&te|128):te<65536?(de[ee++]=te>>12|224,de[ee++]=te>>6&63|128,de[ee++]=63&te|128):(de[ee++]=te>>18|240,de[ee++]=te>>12&63|128,de[ee++]=te>>6&63|128,de[ee++]=63&te|128)}return de},zn=function(ce){let de=0;for(let ee=0;ee<ce.length;ee++){const Z=ce.charCodeAt(ee);Z<128?de++:Z<2048?de+=2:Z>=55296&&Z<=56319?(de+=4,ee++):de+=3}return de};function We(ce){return ce&&ce._delegate?ce._delegate:ce}},3864:(jt,He,V)=>{V.d(He,{u:()=>st});var y=V(1368),q=V(6504),k=V(6736),D=V(4496);let W=(()=>{class Ae{transform(ae){return ae.charAt(0).toUpperCase()+ae.substring(1,ae.length)}static#e=this.\u0275fac=function(Re){return new(Re||Ae)};static#t=this.\u0275pipe=D.UTH({name:"upperCase",type:Ae,pure:!0,standalone:!0})}return Ae})();var _e=V(3804),Ee=V(788),Le=V(4856),Pe=V(1116),ge=V(640);function fe(Ae,ke){if(1&Ae){const ae=D.KQA();D.I0R(0,"img",14),D.qCj("click",function(){D.usT(ae);const Xe=D.GaO(3);return D.CGJ(Xe.editing())}),D.C$Y()}}function xe(Ae,ke){if(1&Ae){const ae=D.KQA();D.I0R(0,"img",14),D.qCj("click",function(){D.usT(ae);const Xe=D.GaO(3);return D.CGJ(Xe.cancelEditing())}),D.C$Y()}}function it(Ae,ke){if(1&Ae){const ae=D.KQA();D.I0R(0,"div",11)(1,"img",12),D.qCj("click",function(){D.usT(ae);const Xe=D.GaO(2);return D.CGJ(Xe.removeProduct())}),D.C$Y(),D.yuY(2,fe,1,0,"img",13)(3,xe,1,0,"img",13),D.C$Y()}if(2&Ae){const ae=D.GaO(2);D.yG2(2),D.E7m("ngIf",""===ae.isEditing),D.yG2(),D.E7m("ngIf",""!==ae.isEditing)}}function Ie(Ae,ke){if(1&Ae){const ae=D.KQA();D.I0R(0,"div",15)(1,"input",16),D.iHE("ngModelChange",function(Xe){D.usT(ae);const pe=D.GaO(2);return D.kNx(pe.position,Xe)||(pe.position=Xe),D.CGJ(Xe)}),D.C$Y(),D.I0R(2,"button",4),D.qCj("click",function(){D.usT(ae);const Xe=D.GaO(2);return D.CGJ(Xe.switch(Xe.position))}),D.OEk(3,"switch"),D.C$Y()()}if(2&Ae){const ae=D.GaO(2);D.yG2(),D.OKB("ngModel",ae.position)}}function be(Ae,ke){if(1&Ae){const ae=D.KQA();D.I0R(0,"div",17)(1,"app-reusable-form",18),D.qCj("formSubmitted",function(Xe){D.usT(ae);const pe=D.GaO(2);return D.CGJ(pe.onFormSubmit(Xe))}),D.C$Y(),D.I0R(2,"div")(3,"button",4),D.qCj("click",function(){D.usT(ae);const Xe=D.GaO(2);return D.CGJ(Xe.cancelEditing())}),D.OEk(4,"Cancel"),D.C$Y()()()}}function pt(Ae,ke){if(1&Ae&&(D.I0R(0,"div",19),D.OEk(1),D.C$Y()),2&Ae){const ae=D.GaO(2);D.yG2(),D.oRS(" -",ae.product.product.discount,"% ")}}function Be(Ae,ke){if(1&Ae&&(D.I0R(0,"span"),D.OEk(1),D.C$Y()),2&Ae){const ae=D.GaO(2);D.yG2(),D.oRS("",ae.product.product.price,"$")}}function tt(Ae,ke){if(1&Ae&&(D.I0R(0,"div",20)(1,"span"),D.OEk(2),D.C$Y(),D.I0R(3,"span"),D.OEk(4),D.C$Y()()),2&Ae){const ae=D.GaO(2);D.yG2(2),D.oRS(" ",ae.product.product.price,"$ "),D.yG2(2),D.oRS(" ",ae.calculateDiscount(),"$ ")}}function Ke(Ae,ke){if(1&Ae){const ae=D.KQA();D.I0R(0,"div")(1,"div",1),D.yuY(2,it,4,2,"div",2),D.wVc(3,"async"),D.I0R(4,"div",3)(5,"button",4),D.qCj("click",function(){D.usT(ae);const Xe=D.GaO();return D.CGJ(Xe.addInCart())}),D.OEk(6,"Add to cart"),D.C$Y(),D.I0R(7,"div")(8,"span",4),D.qCj("click",function(){D.usT(ae);const Xe=D.GaO();return D.CGJ(Xe.navigation())}),D.OEk(9,"See Product"),D.C$Y(),D.wR5(10,"span"),D.C$Y(),D.yuY(11,Ie,4,1,"div",5),D.C$Y(),D.yuY(12,be,5,0,"div",6),D.I0R(13,"div",3),D.yuY(14,pt,2,1,"div",7),D.wR5(15,"img",8),D.C$Y(),D.I0R(16,"div",9)(17,"span"),D.OEk(18),D.wVc(19,"upperCase"),D.C$Y(),D.I0R(20,"span"),D.OEk(21),D.wVc(22,"upperCase"),D.wVc(23,"slice"),D.C$Y(),D.yuY(24,Be,2,1,"span",0)(25,tt,5,2,"div",10),D.C$Y()()()}if(2&Ae){const ae=D.GaO();D.yG2(2),D.E7m("ngIf",D.kDX(3,11,ae.isAdmin)),D.yG2(2),D.E7m("ngClass",ae.isEditing?"display-none":"hover"),D.yG2(7),D.E7m("ngIf",ae.isUsedInSpecificParent),D.yG2(),D.E7m("ngIf",ae.isEditing===ae.product.key),D.yG2(),D.E7m("ngClass",ae.isEditing===ae.product.key?"display-none":"img-placeholder"),D.yG2(),D.E7m("ngIf",null==ae.product||null==ae.product.product?null:ae.product.product.discount),D.yG2(),D.E7m("src",ae.product.product.photoUrl[0],D.K6U),D.yG2(3),D.cNF(D.kDX(19,13,ae.product.product.category)),D.yG2(3),D.cNF(D.kDX(22,15,D.I7O(23,17,ae.product.product.model,0,150))),D.yG2(3),D.E7m("ngIf",!ae.product.product.discount),D.yG2(),D.E7m("ngIf",ae.product.product.discount)}}let st=(()=>{class Ae{constructor(ae,Re,Xe,pe,we,Ve){this.sharedService=ae,this.authService=Re,this.router=Xe,this.cd=pe,this.cartService=we,this.specificParent=Ve,this.singleProdPage=!1,this.removeEvent=new D._w7,this.editEvent=new D._w7,this.shifting=new D._w7,this.position=0,this.isEditing="",this.isUsedInSpecificParent=!1,this.showSpecificContent=!1,this.specificParent&&(this.isUsedInSpecificParent=!0)}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.likedProducts.subscribe(ae=>{this.likedProds=ae}),this.authService.loggedUser.subscribe(ae=>{this.authService.isAdmin.next(ae?.user.isAdmin),this.isAdmin=this.authService.isAdmin.asObservable(),this.userID=ae?.key})}removeProduct(){this.sharedService.removeProduct(this.product?.product.category,this.product?.key).subscribe(()=>{this.removeEvent.emit({prodId:this.product?.key,prodCategory:this.product?.product.category}),this.cd.detectChanges()})}navigation(){this.router.navigate([`single-product/${this.product?.key}`],{queryParams:{type:this.product?.product.category,prod:this.product?.key}}),this.cd.detectChanges()}addInCart(){this.cartService.cartOperations("add",this.product)}navigateToCategotyPage(){this.router.navigate([`categoty/${this.product?.product.category}`])}calculateDiscount(){return this.product?.product.price-Math.round(this.product?.product.price*this.product?.product.discount/100)}editing(){this.isEditing=this.product?.key}cancelEditing(){this.isEditing=""}onFormSubmit(ae){this.editEvent.emit({form:ae,prodId:this.product?.key,prodCategory:this.product?.product?.category}),ae.model&&(this.product.product.model=ae.model),ae.price&&(this.product.product.price=ae.price),ae.discount&&(this.product.product.discount=ae.discount),ae.quantity&&(this.product.product.quantity=ae.quantity),ae.description&&(this.product.product.description=ae.description),this.cancelEditing()}switch(ae){this.shifting.emit({id:this.product.key,switchToPosition:ae})}firstLetterUpperCase(ae){return ae.charAt(0).toUpperCase()+ae.substring(1,ae.length)}static#e=this.\u0275fac=function(Re){return new(Re||Ae)(D.GI1(_e.Y),D.GI1(Ee.e),D.GI1(Le.E5),D.GI1(D.kD9),D.GI1(Pe.c),D.GI1(ge._,8))};static#t=this.\u0275cmp=D.In1({type:Ae,selectors:[["app-card"]],inputs:{product:"product",singleProdPage:"singleProdPage",showSpecificContent:"showSpecificContent"},outputs:{removeEvent:"removeEvent",editEvent:"editEvent",shifting:"shifting"},standalone:!0,features:[D.UHJ],decls:1,vars:1,consts:[[4,"ngIf"],[1,"single-product"],["class","delete-button",4,"ngIf"],[3,"ngClass"],[3,"click"],["class","shifting",4,"ngIf"],["class","edit",4,"ngIf"],["class","discount",4,"ngIf"],["alt","img",3,"src"],[1,"info"],["class","if-discount",4,"ngIf"],[1,"delete-button"],["src","assets/remove.png","alt","img",3,"click"],["src","assets/pen.png","alt","img",3,"click",4,"ngIf"],["src","assets/pen.png","alt","img",3,"click"],[1,"shifting"],["type","number",3,"ngModel","ngModelChange"],[1,"edit"],[3,"formSubmitted"],[1,"discount"],[1,"if-discount"]],template:function(Re,Xe){1&Re&&D.yuY(0,Ke,26,21,"div",0),2&Re&&D.E7m("ngIf",Xe.product&&Xe.product.product)},dependencies:[q.y,q.ot,q.O4,q.ue,q._G,y.MD,y.QF,y.u_,y.a,y.qq,k.o,W],styles:[".single-product[_ngcontent-%COMP%]{width:200px;height:420px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%]{position:absolute;z-index:1}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:2px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:14%;z-index:1}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:20px;border-radius:4px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:35px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{color:red}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{display:flex;gap:10px;justify-content:center;width:140px;height:40px;color:#fff}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{height:260px;display:flex;justify-content:center;position:relative}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;min-height:50%;min-width:50%}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{height:155px;display:flex;flex-direction:column;justify-content:space-between}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{text-decoration:line-through}.if-discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;justify-self:flex-end}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:20px}.display-none[_ngcontent-%COMP%]{display:none}"],changeDetection:0})}return Ae})()},1680:(jt,He,V)=>{V.d(He,{w:()=>pt});var y=V(1368),q=V(4856),k=V(4496);let W=(()=>{class Be{constructor(Ke){this.zone=Ke}registerScript(Ke,st,Ae){const ke=window[st];if(ke)return void this.zone.run(()=>{Ae(ke)});const ae=document.createElement("script");ae.id=this.getElemId(st),ae.innerHTML="",ae.onload=()=>{this.zone.run(()=>{Ae(window[st])})},ae.src=Ke,ae.async=!0,ae.defer=!0,document.getElementsByTagName("head")[0].appendChild(ae)}cleanup(Ke){const st=document.getElementById(this.getElemId(Ke));st&&st.remove()}getElemId(Ke){return`ngx-paypal-script-elem-${Ke}`}}return Be.\u0275fac=function(Ke){return new(Ke||Be)(k.CoB(k.WW2))},Be.\u0275prov=k.wxM({token:Be,factory:Be.\u0275fac}),Be})(),_e=(()=>{class Be{constructor(Ke){this.scriptService=Ke,this.paypalWindowName="paypal"}registerPayPalScript(Ke,st){this.scriptService.registerScript(this.getUrlForConfig(Ke),this.paypalWindowName,st)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(Ke){const st=[{name:"client-id",value:Ke.clientId}];return Ke.locale&&st.push({name:"locale",value:Ke.locale}),Ke.currency&&st.push({name:"currency",value:Ke.currency}),Ke.commit&&st.push({name:"commit",value:Ke.commit}),Ke.vault&&st.push({name:"vault",value:Ke.vault}),Ke.intent&&st.push({name:"intent",value:Ke.intent}),Ke.funding&&st.push({name:"components",value:"buttons,funding-eligibility"}),Ke.extraParams&&st.push(...Ke.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(st)}`}getQueryString(Ke){let st="";for(let Ae=0;Ae<Ke.length;Ae++){const ke=Ke[Ae];st+=0===Ae?"?":"&",st+=`${ke.name}=${ke.value}`}return st}}return Be.\u0275fac=function(Ke){return new(Ke||Be)(k.CoB(W))},Be.\u0275prov=k.wxM({token:Be,factory:Be.\u0275fac}),Be})(),Le=(()=>{class Be{}return Be.\u0275fac=function(Ke){return new(Ke||Be)},Be.\u0275mod=k.a4G({type:Be}),Be.\u0275inj=k.s3X({providers:[W,_e],imports:[y.MD]}),Be})();var Pe=V(3804),ge=V(788),fe=V(1116);const xe=["paymentRef"];function it(Be,tt){if(1&Be){const Ke=k.KQA();k.I0R(0,"div",5)(1,"div",6)(2,"img",7),k.qCj("click",function(){const ke=k.usT(Ke).$implicit,ae=k.GaO(2);return k.CGJ(ae.removeFromCart(ke.product))}),k.C$Y()(),k.I0R(3,"div"),k.wR5(4,"img",8),k.C$Y(),k.I0R(5,"div",9)(6,"span"),k.OEk(7),k.C$Y(),k.I0R(8,"span"),k.OEk(9),k.wVc(10,"slice"),k.C$Y(),k.I0R(11,"span"),k.OEk(12),k.C$Y(),k.I0R(13,"p"),k.OEk(14),k.C$Y(),k.I0R(15,"p")(16,"img",10),k.qCj("click",function(){const ke=k.usT(Ke).$implicit,ae=k.GaO(2);return k.CGJ(ae.plus(ke.product.key,"minus"))}),k.C$Y(),k.OEk(17),k.I0R(18,"img",11),k.qCj("click",function(){const ke=k.usT(Ke).$implicit,ae=k.GaO(2);return k.CGJ(ae.plus(ke.product.key,"plus"))}),k.C$Y()(),k.I0R(19,"button",12),k.qCj("click",function(){const ke=k.usT(Ke).$implicit,ae=k.GaO(2);return k.CGJ(ae.nav(ke.product.key,ke.product.product.category))}),k.OEk(20," See Product "),k.C$Y()()()}if(2&Be){const Ke=tt.$implicit;k.yG2(4),k.E7m("src",Ke.product.product.photoUrl[0],k.K6U),k.yG2(3),k.oRS("Type: ",Ke.product.product.category,""),k.yG2(2),k.oRS("Model: ",k.I7O(10,6,Ke.product.product.model,0,60),"..."),k.yG2(3),k.oRS("Price: ",Ke.product.product.price,"$"),k.yG2(2),k.oRS("Discount -",Ke.product.product.discount,"%"),k.yG2(3),k.oRS("",Ke.quantity," ")}}function Ie(Be,tt){if(1&Be){const Ke=k.KQA();k.I0R(0,"div",13)(1,"h2"),k.OEk(2),k.C$Y(),k.I0R(3,"div")(4,"div")(5,"button",12),k.qCj("click",function(){k.usT(Ke);const Ae=k.GaO(2);return k.CGJ(Ae.makePayment())}),k.OEk(6,"Buy Now"),k.C$Y()()()()}if(2&Be){const Ke=k.GaO(2);k.yG2(2),k.oRS("Total Price: ",Ke.calculateTotalPrice(),"$")}}function be(Be,tt){if(1&Be&&(k.I0R(0,"div",1)(1,"div")(2,"h2"),k.OEk(3,"Cart"),k.C$Y()(),k.I0R(4,"div",2),k.yuY(5,it,21,10,"div",3),k.wVc(6,"async"),k.C$Y(),k.yuY(7,Ie,7,1,"div",4),k.C$Y()),2&Be){const Ke=k.GaO();k.yG2(5),k.E7m("ngForOf",k.kDX(6,2,Ke.cart$)),k.yG2(2),k.E7m("ngIf",Ke.calculateTotalPrice()>0)}}let pt=(()=>{class Be{constructor(Ke,st,Ae,ke,ae){this.sharedService=Ke,this.router=st,this.authService=Ae,this.cd=ke,this.cartService=ae,this.showCart=!0}ngOnInit(){this.authService.checkIfLoggedIn(),this.cart$=this.cartService.cart.asObservable(),this.cd.detectChanges()}makePayment(){this.sharedService.buyProducts(this.cartService.cart.getValue(),this.calculateTotalPrice(),this.authService.loggedUser.getValue()?.user.email,this.authService.loggedUser.getValue()?.key)}removeFromCart(Ke){this.cartService.cartOperations("remove",Ke),this.calculateTotalPrice()}nav(Ke,st){this.router.navigate([`single-product/${Ke}`],{queryParams:{type:st,prod:Ke}})}plus(Ke,st){let Ae=this.cartService.cart.getValue();const ke=Ae.findIndex(ae=>ae.product.key===Ke);"plus"===st?Ae[ke].quantity++:Ae[ke].quantity>1&&Ae[ke].quantity--,this.cartService.cart.next(Ae)}calculateTotalPrice(){let Ke=0;return this.cartService.cart.getValue().forEach(st=>{if(st.product.product.discount>0){const Ae=st.quantity*(st.product.product.price-this.calculateDiscount(st.product.product.price,st.product.product.discount));Ke+=Ae}else Ke+=st.quantity*st.product.product.price}),Ke}calculateDiscount(Ke,st){return Math.round(Ke*st/100)}static#e=this.\u0275fac=function(st){return new(st||Be)(k.GI1(Pe.Y),k.GI1(q.E5),k.GI1(ge.e),k.GI1(k.kD9),k.GI1(fe.c))};static#t=this.\u0275cmp=k.In1({type:Be,selectors:[["app-cart"]],viewQuery:function(st,Ae){if(1&st&&k.CC$(xe,7),2&st){let ke;k.wto(ke=k.Gqi())&&(Ae.paymentRef=ke.first)}},inputs:{showCart:"showCart",userEmail:"userEmail"},standalone:!0,features:[k.UHJ],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"products"],["class","product",4,"ngFor","ngForOf"],["class","payment",4,"ngIf"],[1,"product"],[1,"remove"],["src","assets/remove.png","alt","img",3,"click"],["alt","img",3,"src"],[1,"description"],["src","assets/minus.png","alt","img",3,"click"],["src","assets/plus.png","alt","img",3,"click"],[3,"click"],[1,"payment"]],template:function(st,Ae){1&st&&k.yuY(0,be,8,4,"div",0),2&st&&k.E7m("ngIf",Ae.showCart)},dependencies:[y.MD,y.ay,y.u_,y.a,y.qq,q.qQ,Le],styles:[".container[_ngcontent-%COMP%]{width:600px;height:600px;background-color:#98c0e0;overflow-y:scroll}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{text-align:center;padding:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]{display:flex;gap:5px;height:150px;width:80%;border:1px solid rgb(118,153,218);border-radius:8px;position:relative}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{position:absolute;right:0}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:20%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > img[_ngcontent-%COMP%]{width:100%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:repeat(2,190px);grid-template-rows:repeat(3,46px);align-content:center;align-items:center}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:14px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px;cursor:pointer}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:not(:last-child){font-size:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:24px;width:130px;border:none;color:#fff;background-color:#7699da;border-radius:3px;cursor:pointer}.container[_ngcontent-%COMP%]   .payment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}"],changeDetection:0})}return Be})()},1116:(jt,He,V)=>{V.d(He,{c:()=>k});var y=V(6700),q=V(4496);let k=(()=>{class D{constructor(){this.cart=new y.g([])}cartOperations(_e,Ee){let Le=this.cart.getValue();const Pe=Le.findIndex(fe=>fe.product.key===Ee.key);let ge=[...Le];-1!==Pe?"add"===_e?ge[Pe].quantity++:ge.splice(Pe,1):"add"===_e&&ge.push({quantity:1,product:Ee}),this.cart.next(ge),localStorage.setItem("cart",JSON.stringify(this.cart.value))}static#e=this.\u0275fac=function(Ee){return new(Ee||D)};static#t=this.\u0275prov=q.wxM({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})()},6940:(jt,He,V)=>{V.d(He,{W:()=>W});var y=V(6504),q=V(4856),k=V(4496),D=V(788);let W=(()=>{class _e{constructor(Le,Pe){this.service=Le,this.router=Pe,this.email=""}sendEmail(){this.email=""}navigate(Le){if("profile"===Le){const Pe=this.service.loggedUser.getValue()?.key;this.router.navigate([`profile/${Pe}`])}}static#e=this.\u0275fac=function(Pe){return new(Pe||_e)(k.GI1(D.e),k.GI1(q.E5))};static#t=this.\u0275cmp=k.In1({type:_e,selectors:[["app-footer"]],standalone:!0,features:[k.UHJ],decls:33,vars:1,consts:[[1,"container"],[1,"flex-container"],["src","assets/placeholder.png","alt","img"],["src","assets/phone.png","alt","img"],["routerLink","/login"],["routerLink","/products"],[3,"click"],["placeholder","Enter your Email",3,"ngModel","ngModelChange"],["src","assets/send.png","alt","img",3,"click"]],template:function(Pe,ge){1&Pe&&(k.I0R(0,"div",0),k.wR5(1,"div"),k.I0R(2,"div",1)(3,"div")(4,"h3"),k.OEk(5,"SABAMUSIC."),k.C$Y(),k.I0R(6,"p"),k.OEk(7,"Music Shop over 1000 brand. we sell quality product on our website"),k.C$Y(),k.I0R(8,"p"),k.wR5(9,"img",2),k.OEk(10,"Mindeli's street 7B"),k.C$Y(),k.I0R(11,"p"),k.wR5(12,"img",3),k.OEk(13,"+995 555 542 034"),k.C$Y()(),k.I0R(14,"div")(15,"h3"),k.OEk(16,"Menu"),k.C$Y(),k.I0R(17,"p",4),k.OEk(18,"Login"),k.C$Y(),k.I0R(19,"p",5),k.OEk(20,"Products"),k.C$Y(),k.I0R(21,"p"),k.OEk(22,"About Us"),k.C$Y(),k.I0R(23,"p"),k.OEk(24,"Terms & Policy"),k.C$Y(),k.I0R(25,"p",6),k.qCj("click",function(){return ge.navigate("profile")}),k.OEk(26,"My Account"),k.C$Y()(),k.I0R(27,"div")(28,"h3"),k.OEk(29,"Stay Updated"),k.C$Y(),k.I0R(30,"div")(31,"input",7),k.iHE("ngModelChange",function(xe){return k.kNx(ge.email,xe)||(ge.email=xe),xe}),k.C$Y(),k.I0R(32,"img",8),k.qCj("click",function(){return ge.sendEmail()}),k.C$Y()()()()()),2&Pe&&(k.yG2(31),k.OKB("ngModel",ge.email))},dependencies:[y.y,y.ot,y.ue,y._G,q.qQ,q.ER],styles:[".container[_ngcontent-%COMP%]{width:90%;height:220px;margin:100px auto;display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;height:2px;background-color:#000}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;height:100%}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:7px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:4px;cursor:pointer}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-size:14px;color:#616161}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > p[_ngcontent-%COMP%]{width:190px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{border:none;border-radius:2px;width:200px;height:20px;background-color:#e9dbdb}"],changeDetection:0})}return _e})()},1092:(jt,He,V)=>{V.d(He,{k:()=>ge});var y=V(4856),q=V(1368),k=V(1680),D=V(4496),W=V(788);function _e(fe,xe){if(1&fe){const it=D.KQA();D.I0R(0,"div",11)(1,"span",3),D.qCj("click",function(){D.usT(it);const be=D.GaO();return D.CGJ(be.navigateToCategotyPage("guitar"))}),D.OEk(2,"Guitar"),D.C$Y(),D.I0R(3,"span",3),D.qCj("click",function(){D.usT(it);const be=D.GaO();return D.CGJ(be.navigateToCategotyPage("drum"))}),D.OEk(4,"Drums"),D.C$Y(),D.I0R(5,"span",3),D.qCj("click",function(){D.usT(it);const be=D.GaO();return D.CGJ(be.navigateToCategotyPage("bass"))}),D.OEk(6,"Bass "),D.C$Y(),D.I0R(7,"span",3),D.qCj("click",function(){D.usT(it);const be=D.GaO();return D.CGJ(be.navigateToCategotyPage("piano"))}),D.OEk(8,"Piano"),D.C$Y(),D.I0R(9,"span",3),D.qCj("click",function(){D.usT(it);const be=D.GaO();return D.CGJ(be.navigateToCategotyPage("other"))}),D.OEk(10,"Other"),D.C$Y()()}}function Ee(fe,xe){if(1&fe){const it=D.KQA();D.I0R(0,"span",3),D.qCj("click",function(){D.usT(it);const be=D.GaO();return D.CGJ(be.navigate("login"))}),D.OEk(1,"Log In"),D.C$Y()}}function Le(fe,xe){if(1&fe){const it=D.KQA();D.I0R(0,"img",12),D.qCj("click",function(){D.usT(it);const be=D.GaO();return D.CGJ(be.logOut())}),D.C$Y()}}function Pe(fe,xe){if(1&fe){const it=D.KQA();D.I0R(0,"img",13),D.qCj("click",function(){D.usT(it);const be=D.GaO();return D.CGJ(be.navigateToProfile())}),D.C$Y()}}let ge=(()=>{class fe{constructor(it,Ie,be){this.router=it,this.loginService=Ie,this.cd=be,this.dropDown=!1,this.cart=!1}ngOnInit(){this.loginService.loggedUser.subscribe(it=>{this.user=it,this.profilePicture=this.user?.user.photoUrl,this.cd.detectChanges()})}changeDropDown(){this.dropDown=!this.dropDown}navigateToProfile(){this.router.navigate([`profile/${this.user?.key}`])}navigateToCategotyPage(it){this.router.navigate([`categoty/${it}`])}openCloseCart(){this.cart=!this.cart}logOut(){this.loginService.logOut(),this.router.navigate(["/products"])}navigate(it){this.router.navigate([`/${it}`])}static#e=this.\u0275fac=function(Ie){return new(Ie||fe)(D.GI1(y.E5),D.GI1(W.e),D.GI1(D.kD9))};static#t=this.\u0275cmp=D.In1({type:fe,selectors:[["app-header"]],standalone:!0,features:[D.UHJ],decls:19,vars:6,consts:[[1,"header-container"],["routerLink","/products"],[1,"dropdown-container"],[3,"click"],["class","dropdown",4,"ngIf"],["src","assets/down-arrow.png","alt","img",3,"click"],[3,"click",4,"ngIf"],[1,"cart",3,"userEmail","showCart"],["src","assets/logout.png","alt","img",3,"click",4,"ngIf"],["src","assets/shopping-cart.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click",4,"ngIf"],[1,"dropdown"],["src","assets/logout.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click"]],template:function(Ie,be){1&Ie&&(D.I0R(0,"div",0)(1,"div")(2,"span",1),D.OEk(3,"SABAMUSIC."),D.C$Y(),D.I0R(4,"div",2)(5,"span",3),D.qCj("click",function(){return be.changeDropDown()}),D.OEk(6,"Products "),D.yuY(7,_e,11,0,"div",4),D.C$Y(),D.I0R(8,"img",5),D.qCj("click",function(){return be.changeDropDown()}),D.C$Y()(),D.I0R(9,"span",3),D.qCj("click",function(){return be.navigate("contact")}),D.OEk(10,"Contact"),D.C$Y(),D.I0R(11,"span",3),D.qCj("click",function(){return be.navigate("about-us")}),D.OEk(12,"About Us"),D.C$Y(),D.yuY(13,Ee,2,0,"span",6),D.wR5(14,"app-cart",7),D.C$Y(),D.I0R(15,"div"),D.yuY(16,Le,1,0,"img",8),D.I0R(17,"img",9),D.qCj("click",function(){return be.openCloseCart()}),D.C$Y(),D.yuY(18,Pe,1,0,"img",10),D.C$Y()()),2&Ie&&(D.yG2(7),D.E7m("ngIf",be.dropDown),D.yG2(6),D.E7m("ngIf",!be.user),D.yG2(),D.E7m("userEmail",null==be.user||null==be.user.user?null:be.user.user.email)("showCart",be.cart),D.yG2(2),D.E7m("ngIf",be.user),D.yG2(2),D.E7m("ngIf",be.user))},dependencies:[q.MD,q.u_,y.qQ,y.ER,k.w],styles:[".header-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:160px;margin-bottom:40px;position:sticky;top:5px;z-index:2}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:60%;display:flex;justify-content:space-between;align-items:center}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child{display:flex;align-items:center;gap:10px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child > input[_ngcontent-%COMP%]{height:20px;border:none;background-color:#f3ecec;border-radius:3px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   .cart[_ngcontent-%COMP%]{position:absolute;top:80px;right:100px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:26px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:relative;font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%]{z-index:3;display:flex;flex-direction:column;position:absolute;top:30px;gap:5px;z-index:1}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:flex;gap:20px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   img[_ngcontent-%COMP%]{width:26px;height:26px;cursor:pointer}"],changeDetection:0})}return fe})()},3960:(jt,He,V)=>{V.r(He),V.d(He,{LoginAndRegistrationModule:()=>ww});var y=V(1368),q=V(6504),k=V(2740),D=V(4496),W=V(6176),_e=V(6e3),Ee=V(112),Le=V(3252),Pe=V(9900),ge=V(2700),fe=V(5568),xe=V(5448),it=V(7773);function Ie(){return(0,xe.i)((i,e)=>{let n,o=!1;i.subscribe((0,it.e)(e,u=>{const p=n;n=u,o&&e.next([p,u]),o=!0}))})}var be=V(4704),pt=V(208),Be=V(528);function Ke(i,e){return i===e}var at,st=V(6684),ke=(V(6858),V(8368)),ae=V(1528),Re=V(9360),Xe=V(4920),pe=V(5976),we=V(7144),Ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ze={},wt=wt||{},Tt=Ve||self;function mt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Lt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Ue="closure_uid_"+(1e9*Math.random()>>>0),Je=0;function lt(i,e,n){return i.call.apply(i.bind,arguments)}function qe(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function gt(i,e,n){return(gt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?lt:qe).apply(null,arguments)}function ft(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function At(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,p){for(var m=Array(arguments.length-2),R=2;R<arguments.length;R++)m[R-2]=arguments[R];return e.prototype[u].apply(o,m)}}function Jt(){this.s=this.s,this.o=this.o}Jt.prototype.s=!1,Jt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function rn(i){Object.prototype.hasOwnProperty.call(i,Ue)&&i[Ue]||(i[Ue]=++Je)}(this)},Jt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function En(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function An(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(mt(o)){const u=i.length||0,p=o.length||0;i.length=u+p;for(let m=0;m<p;m++)i[u+m]=o[m]}else i.push(o)}}function Xt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Xt.prototype.h=function(){this.defaultPrevented=!0};var Sn=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const n=()=>{};Tt.addEventListener("test",n,e),Tt.removeEventListener("test",n,e)}catch{}return i}();function qn(i){return/^[\s\xa0]*$/.test(i)}function Vr(){var i=Tt.navigator;return i&&(i=i.userAgent)?i:""}function Wt(i){return-1!=Vr().indexOf(i)}function Rr(i){return Rr[" "](i),i}Rr[" "]=function(){};var yn,i,Xr=Wt("Opera"),Un=Wt("Trident")||Wt("MSIE"),si=Wt("Edge"),Sr=si||Un,Di=Wt("Gecko")&&!(-1!=Vr().toLowerCase().indexOf("webkit")&&!Wt("Edge"))&&!(Wt("Trident")||Wt("MSIE"))&&!Wt("Edge"),ar=-1!=Vr().toLowerCase().indexOf("webkit")&&!Wt("Edge");function Cn(){var i=Tt.document;return i?i.documentMode:void 0}e:{var ui="",io=(i=Vr(),Di?/rv:([^\);]+)(\)|;)/.exec(i):si?/Edge\/([\d\.]+)/.exec(i):Un?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):ar?/WebKit\/(\S+)/.exec(i):Xr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(io&&(ui=io?io[1]:""),Un){var Zr=Cn();if(null!=Zr&&Zr>parseFloat(ui)){yn=String(Zr);break e}}yn=ui}var xn=Tt.document&&Un&&(Cn()||parseInt(yn,10))||void 0;function Bn(i,e){if(Xt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Di){e:{try{Rr(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Or[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Bn.$.h.call(this)}}At(Bn,Xt);var Or={2:"touch",3:"pen",4:"mouse"};Bn.prototype.h=function(){Bn.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Dn="closure_listenable_"+(1e6*Math.random()|0),Ur=0;function zn(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++Ur,this.fa=this.ia=!1}function Ri(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function Kr(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function xs(i){const e={};for(const n in i)e[n]=i[n];return e}const Ci="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Et(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let p=0;p<Ci.length;p++)n=Ci[p],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function Ye(i){this.src=i,this.g={},this.h=0}function ye(i,e){var n=e.type;if(n in i.g){var p,o=i.g[n],u=nn(o,e);(p=0<=u)&&Array.prototype.splice.call(o,u,1),p&&(Ri(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function We(i,e,n,o){for(var u=0;u<i.length;++u){var p=i[u];if(!p.fa&&p.listener==e&&p.capture==!!n&&p.la==o)return u}return-1}Ye.prototype.add=function(i,e,n,o,u){var p=i.toString();(i=this.g[p])||(i=this.g[p]=[],this.h++);var m=We(i,e,o,u);return-1<m?(e=i[m],n||(e.ia=!1)):((e=new zn(e,this.src,p,!!o,u)).ia=n,i.push(e)),e};var ce="closure_lm_"+(1e6*Math.random()|0),de={};function ee(i,e,n,o,u){if(o&&o.once)return $e(i,e,n,o,u);if(Array.isArray(e)){for(var p=0;p<e.length;p++)ee(i,e[p],n,o,u);return null}return n=Nr(n),i&&i[Dn]?i.O(e,n,Lt(o)?!!o.capture:!!o,u):Z(i,e,n,!1,o,u)}function Z(i,e,n,o,u,p){if(!e)throw Error("Invalid event type");var m=Lt(u)?!!u.capture:!!u,R=Ln(i);if(R||(i[ce]=R=new Ye(i)),(n=R.add(e,n,o,m,p)).proxy)return n;if(o=function te(){const e=wn;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)Sn||(u=m),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(In(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function $e(i,e,n,o,u){if(Array.isArray(e)){for(var p=0;p<e.length;p++)$e(i,e[p],n,o,u);return null}return n=Nr(n),i&&i[Dn]?i.P(e,n,Lt(o)?!!o.capture:!!o,u):Z(i,e,n,!0,o,u)}function It(i,e,n,o,u){if(Array.isArray(e))for(var p=0;p<e.length;p++)It(i,e[p],n,o,u);else o=Lt(o)?!!o.capture:!!o,n=Nr(n),i&&i[Dn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=We(p=i.g[e],n,o,u))&&(Ri(p[n]),Array.prototype.splice.call(p,n,1),0==p.length&&(delete i.g[e],i.h--))):i&&(i=Ln(i))&&(e=i.g[e.toString()],i=-1,e&&(i=We(e,n,o,u)),(n=-1<i?e[i]:null)&&qt(n))}function qt(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[Dn])ye(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(In(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=Ln(e))?(ye(n,i),0==n.h&&(n.src=null,e[ce]=null)):Ri(i)}}}function In(i){return i in de?de[i]:de[i]="on"+i}function wn(i,e){if(i.fa)i=!0;else{e=new Bn(e,this);var n=i.listener,o=i.la||i.src;i.ia&&qt(i),i=n.call(o,e)}return i}function Ln(i){return(i=i[ce])instanceof Ye?i:null}var Zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nr(i){return"function"==typeof i?i:(i[Zt]||(i[Zt]=function(e){return i.handleEvent(e)}),i[Zt])}function pn(){Jt.call(this),this.i=new Ye(this),this.S=this,this.J=null}function jn(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new Xt(e,i);else if(e instanceof Xt)e.target=e.target||i;else{var u=e;Et(e=new Xt(o,i),u)}if(u=!0,n)for(var p=n.length-1;0<=p;p--){var m=e.g=n[p];u=Oe(m,o,!0,e)&&u}if(u=Oe(m=e.g=i,o,!0,e)&&u,u=Oe(m,o,!1,e)&&u,n)for(p=0;p<n.length;p++)u=Oe(m=e.g=n[p],o,!1,e)&&u}function Oe(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,p=0;p<e.length;++p){var m=e[p];if(m&&!m.fa&&m.capture==n){var R=m.listener,L=m.la||m.src;m.ia&&ye(i.i,m),u=!1!==R.call(L,o)&&u}}return u&&!o.defaultPrevented}At(pn,Jt),pn.prototype[Dn]=!0,pn.prototype.removeEventListener=function(i,e,n,o){It(this,i,e,n,o)},pn.prototype.N=function(){if(pn.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)Ri(n[o]);delete i.g[e],i.h--}}this.J=null},pn.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},pn.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var Ze=Tt.JSON.stringify;function St(){var i=Ce;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Wn=new class nt{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Kn,i=>i.reset());class Kn{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Xn(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function ei(i){Tt.setTimeout(()=>{throw i},0)}let _r,le=!1,Ce=new class en{constructor(){this.h=this.g=null}add(e,n){const o=Wn.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},Te=()=>{const i=Tt.Promise.resolve(void 0);_r=()=>{i.then(yt)}};var yt=()=>{for(var i;i=St();){try{i.h.call(i.g)}catch(n){ei(n)}var e=Wn;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}le=!1};function Dt(i,e){pn.call(this),this.h=i||1,this.g=e||Tt,this.j=gt(this.qb,this),this.l=Date.now()}function kt(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function zt(i,e,n){if("function"==typeof i)n&&(i=gt(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=gt(i.handleEvent,i)}return 2147483647<Number(e)?-1:Tt.setTimeout(i,e||0)}function gn(i){i.g=zt(()=>{i.g=null,i.i&&(i.i=!1,gn(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}At(Dt,pn),(at=Dt.prototype).ga=!1,at.T=null,at.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),jn(this,"tick"),this.ga&&(kt(this),this.start()))}},at.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},at.N=function(){Dt.$.N.call(this),kt(this),delete this.g};class cn extends Jt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gn(this)}N(){super.N(),this.g&&(Tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yn(i){Jt.call(this),this.h=i,this.g={}}At(Yn,Jt);var Ar=[];function ur(i,e,n,o){Array.isArray(n)||(n&&(Ar[0]=n.toString()),n=Ar);for(var u=0;u<n.length;u++){var p=ee(e,n[u],o||i.handleEvent,!1,i.h||i);if(!p)break;i.g[p.key]=p}}function $n(i){Kr(i.g,function(e,n){this.g.hasOwnProperty(n)&&qt(e)},i),i.g={}}function cs(){this.g=!0}function Qn(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Hn(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var p=u[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var m=1;m<u.length;m++)u[m]=""}}}return Ze(n)}catch{return e}}(i,n)+(o?" "+o:"")})}Yn.prototype.N=function(){Yn.$.N.call(this),$n(this)},Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},cs.prototype.Ea=function(){this.g=!1},cs.prototype.info=function(){};var Er={},ls=null;function Ni(){return ls=ls||new pn}function di(i){Xt.call(this,Er.Ta,i)}function ti(i){const e=Ni();jn(e,new di(e))}function ks(i,e){Xt.call(this,Er.STAT_EVENT,i),this.stat=e}function xi(i){const e=Ni();jn(e,new ks(e,i))}function sa(i,e){Xt.call(this,Er.Ua,i),this.size=e}function Ki(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){i()},e)}Er.Ta="serverreachability",At(di,Xt),Er.STAT_EVENT="statevent",At(ks,Xt),Er.Ua="timingevent",At(sa,Xt);var Wo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},yc={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function rr(){}function Yr(){}rr.prototype.h=null;var wa,Fs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function hi(){Xt.call(this,"d")}function Ca(){Xt.call(this,"c")}function Js(){}function so(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new Yn(this),this.P=ni,this.V=new Dt(i=Sr?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ho}function Ho(){this.i=null,this.g="",this.h=!1}At(hi,Xt),At(Ca,Xt),At(Js,rr),Js.prototype.g=function(){return new XMLHttpRequest},Js.prototype.i=function(){return{}},wa=new Js;var ni=45e3,Vt={},vn={};function xr(i,e,n){i.L=1,i.A=qo(is(e)),i.u=n,i.S=!0,rs(i,null)}function rs(i,e){i.G=Date.now(),dr(i),i.B=is(i.A);var n=i.B,o=i.W;Array.isArray(o)||(o=[String(o)]),Ta(n.i,"t",o),i.o=0,n=i.l.J,i.h=new Ho,i.g=bs(i.l,n?e:null,!i.u),0<i.O&&(i.M=new cn(gt(i.Pa,i,i.g),i.O)),ur(i.U,i.g,"readystatechange",i.nb),e=i.I?xs(i.I):{},i.u?(i.v||(i.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.B,i.v,i.u,e)):(i.v="GET",i.g.ha(i.B,i.v,null,e)),ti(),function Oi(i,e,n,o,u,p){i.info(function(){if(i.g)if(p)for(var m="",R=p.split("&"),L=0;L<R.length;L++){var $=R[L].split("=");if(1<$.length){var ne=$[0];$=$[1];var he=ne.split("_");m=2<=he.length&&"type"==he[1]?m+(ne+"=")+$+"&":m+(ne+"=redacted&")}}else m=null;else m=p;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+m})}(i.j,i.v,i.B,i.m,i.W,i.u)}function Bi(i){return!!i.g&&"GET"==i.v&&2!=i.L&&i.l.Ha}function ji(i,e,n){let u,o=!0;for(;!i.J&&i.o<n.length;){if(u=Yi(i,n),u==vn){4==e&&(i.s=4,xi(14),o=!1),Qn(i.j,i.m,null,"[Incomplete Response]");break}if(u==Vt){i.s=4,xi(15),Qn(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}Qn(i.j,i.m,u,null),wo(i,u)}Bi(i)&&0!=i.o&&(i.h.g=i.h.g.slice(i.o),i.o=0),4!=e||0!=n.length||i.h.h||(i.s=1,xi(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fn(e),e.M=!0,xi(11))):(Qn(i.j,i.m,n,"[Invalid Chunked Response]"),Fi(i),Pn(i))}function Yi(i,e){var n=i.o,o=e.indexOf("\n",n);return-1==o?vn:(n=Number(e.substring(n,o)),isNaN(n)?Vt:(o+=1)+n>e.length?vn:(e=e.slice(o,o+n),i.o=o+n,e))}function dr(i){i.Y=Date.now()+i.P,$i(i,i.P)}function $i(i,e){if(null!=i.C)throw Error("WatchDog timer not null");i.C=Ki(gt(i.lb,i),e)}function Qi(i){i.C&&(Tt.clearTimeout(i.C),i.C=null)}function Pn(i){0==i.l.H||i.J||La(i.l,i)}function Fi(i){Qi(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,kt(i.V),$n(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function wo(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||xa(n.i,i)))if(!i.K&&xa(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;vr(n),uo(n)}Zs(n),xi(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ki(gt(n.ib,n),6e3));if(1>=To(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else la(n,11)}else if((i.K||n.g==i)&&vr(n),!qn(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let $=u[e];if(n.V=$[0],$=$[1],2==n.H)if("c"==$[0]){n.K=$[1],n.pa=$[2];const ne=$[3];null!=ne&&(n.ra=ne,n.l.info("VER="+n.ra));const he=$[4];null!=he&&(n.Ga=he,n.l.info("SVER="+n.Ga));const Me=$[5];null!=Me&&"number"==typeof Me&&0<Me&&(n.L=o=1.5*Me,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const Qe=i.g;if(Qe){const Gt=Qe.g?Qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gt){var p=o.i;p.g||-1==Gt.indexOf("spdy")&&-1==Gt.indexOf("quic")&&-1==Gt.indexOf("h2")||(p.j=p.l,p.g=new Set,p.h&&(ka(p,p.h),p.h=null))}if(o.F){const an=Qe.g?Qe.g.getResponseHeader("X-HTTP-Session-Id"):null;an&&(o.Da=an,ln(o.I,o.F,an))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var m=i;if((o=n).wa=ua(o,o.J?o.pa:null,o.Y),m.K){ou(o.i,m);var R=m,L=o.L;L&&R.setTimeout(L),R.C&&(Qi(R),dr(R)),o.g=m}else vl(o);0<n.j.length&&Qo(n)}else"stop"!=$[0]&&"close"!=$[0]||la(n,7);else 3==n.H&&("stop"==$[0]||"close"==$[0]?"stop"==$[0]?la(n,7):vs(n):"noop"!=$[0]&&n.h&&n.h.Aa($),n.A=0)}ti()}catch{}}function Ls(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(mt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function _i(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(mt(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function oo(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(mt(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,p=0;p<u;p++)e.call(void 0,o[p],n&&n[p],i)}(at=so.prototype).setTimeout=function(i){this.P=i},at.nb=function(i){i=i.target;const e=this.M;e&&3==Gn(i)?e.l():this.Pa(i)},at.Pa=function(i){try{if(i==this.g)e:{const ne=Gn(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ne)&&(3!=ne||Sr||this.g&&(this.h.h||this.g.ja()||ss(this.g)))){this.J||4!=ne||7==e||ti(),Qi(this);var n=this.g.da();this.ca=n;t:if(Bi(this)){var o=ss(this.g);i="";var u=o.length,p=4==Gn(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Fi(this),Pn(this);var m="";break t}this.h.i=new Tt.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:p&&e==u-1});o.length=0,this.h.g+=i,this.o=0,m=this.h.g}else m=this.g.ja();if(this.i=200==n,function Gr(i,e,n,o,u,p,m){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+p+" "+m})}(this.j,this.v,this.B,this.m,this.W,ne,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var R,L=this.g;if((R=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qn(R)){var $=R;break t}}$=null}if(!(n=$)){this.i=!1,this.s=3,xi(12),Fi(this),Pn(this);break e}Qn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wo(this,n)}this.S?(ji(this,ne,m),Sr&&this.i&&3==ne&&(ur(this.U,this.V,"tick",this.mb),this.V.start())):(Qn(this.j,this.m,m,null),wo(this,m)),4==ne&&Fi(this),this.i&&!this.J&&(4==ne?La(this.l,this):(this.i=!1,dr(this)))}else(function Fa(i){const e={};i=(i.g&&2<=Gn(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(qn(i[o]))continue;var n=Xn(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const p=e[u]||[];e[u]=p,p.push(n)}!function $r(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<m.indexOf("Unknown SID")?(this.s=3,xi(12)):(this.s=0,xi(13)),Fi(this),Pn(this)}}}catch{}},at.mb=function(){if(this.g){var i=Gn(this.g),e=this.g.ja();this.o<e.length&&(Qi(this),ji(this,i,e),this.i&&4!=i&&dr(this))}},at.cancel=function(){this.J=!0,Fi(this)},at.lb=function(){this.C=null;const i=Date.now();0<=i-this.Y?(function oi(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(ti(),xi(17)),Fi(this),this.s=2,Pn(this)):$i(this,this.Y-i)};var Vs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function us(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof us){this.h=i.h,Si(this,i.j),this.s=i.s,this.g=i.g,zo(this,i.m),this.l=i.l;var e=i.i,n=new js;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Us(this,n),this.o=i.o}else i&&(e=String(i).match(Vs))?(this.h=!1,Si(this,e[1]||"",!0),this.s=Bs(e[2]||""),this.g=Bs(e[3]||"",!0),zo(this,e[4]),this.l=Bs(e[5]||"",!0),Us(this,e[6]||"",!0),this.o=Bs(e[7]||"")):(this.h=!1,this.i=new js(null,this.h))}function is(i){return new us(i)}function Si(i,e,n){i.j=n?Bs(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function zo(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Us(i,e,n){e instanceof js?(i.i=e,function oa(i,e){e&&!i.j&&(Gi(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&($s(this,o),Ta(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Ji(e,ds)),i.i=new js(e,i.h))}function ln(i,e,n){i.i.set(e,n)}function qo(i){return ln(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Bs(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ji(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,Na),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Na(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}us.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Ji(e,Ko,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Ji(e,Ko,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Ji(n,"/"==n.charAt(0)?As:yi,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Ji(n,Xi)),i.join("")};var Ko=/[#\/\?@]/g,yi=/[#\?:]/g,As=/[#\?]/g,ds=/[#\?@]/g,Xi=/#/g;function js(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Gi(i){i.g||(i.g=new Map,i.h=0,i.i&&function Li(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var p=i[n].substring(0,o);u=i[n].substring(o+1)}else p=i[n];e(p,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function $s(i,e){Gi(i),e=ao(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Wi(i,e){return Gi(i),e=ao(i,e),i.g.has(e)}function Ta(i,e,n){$s(i,e),0<n.length&&(i.i=null,i.g.set(ao(i,e),En(n)),i.h+=n.length)}function ao(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}(at=js.prototype).add=function(i,e){Gi(this),this.i=null,i=ao(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},at.forEach=function(i,e){Gi(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},at.ta=function(){Gi(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let p=0;p<u.length;p++)n.push(e[o])}return n},at.Z=function(i){Gi(this);let e=[];if("string"==typeof i)Wi(this,i)&&(e=e.concat(this.g.get(ao(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},at.set=function(i,e){return Gi(this),this.i=null,Wi(this,i=ao(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},at.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},at.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const p=encodeURIComponent(String(o)),m=this.Z(o);for(o=0;o<m.length;o++){var u=p;""!==m[o]&&(u+="="+encodeURIComponent(String(m[o]))),i.push(u)}}return this.i=i.join("&")};var vc=class{constructor(i,e){this.g=i,this.map=e}};function _l(i){this.l=i||su,i=Tt.PerformanceNavigationTiming?0<(i=Tt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(Tt.g&&Tt.g.Ka&&Tt.g.Ka()&&Tt.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var su=10;function Xs(i){return!!i.h||!!i.g&&i.g.size>=i.j}function To(i){return i.h?1:i.g?i.g.size:0}function xa(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ka(i,e){i.g?i.g.add(e):i.h=e}function ou(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ja(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return En(i.i)}_l.prototype.cancel=function(){if(this.i=Ja(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var co=class{stringify(i){return Tt.JSON.stringify(i,void 0)}parse(i){return Tt.JSON.parse(i,void 0)}};function H(){this.g=new co}function Y(i,e,n){const o=n||"";try{Ls(i,function(u,p){let m=u;Lt(u)&&(m=Ze(u)),e.push(o+p+"="+encodeURIComponent(m))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function ie(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function De(i){this.l=i.ec||null,this.j=i.ob||!1}function un(i,e){pn.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=er,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}At(De,rr),De.prototype.g=function(){return new un(this.l,this.j)},De.prototype.i=function(i){return function(){return i}}({}),At(un,pn);var er=0;function Ps(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function hs(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Gs(i)}function Gs(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(at=un.prototype).open=function(i,e){if(this.readyState!=er)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Gs(this)},at.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||Tt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},at.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hs(this)),this.readyState=er},at.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Gs(this)),this.g&&(this.readyState=3,Gs(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Tt.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ps(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},at.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?hs(this):Gs(this),3==this.readyState&&Ps(this)}},at.Za=function(i){this.g&&(this.response=this.responseText=i,hs(this))},at.Ya=function(i){this.g&&(this.response=i,hs(this))},at.ka=function(){this.g&&hs(this)},at.setRequestHeader=function(i,e){this.v.append(i,e)},at.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},at.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(un.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var yl=Tt.JSON.parse;function kn(i){pn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=kr,this.L=this.M=!1}At(kn,pn);var kr="",mn=/^https?$/i,aa=["POST","PUT"];function Xa(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Wr(i),Yo(i)}function Wr(i){i.F||(i.F=!0,jn(i,"complete"),jn(i,"error"))}function lo(i){if(i.h&&typeof wt<"u"&&(!i.C[1]||4!=Gn(i)||2!=i.da()))if(i.v&&4==Gn(i))zt(i.La,0,i);else if(jn(i,"readystatechange"),4==Gn(i)){i.h=!1;try{const m=i.da();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===m){var u=String(i.I).match(Vs)[1]||null;!u&&Tt.self&&Tt.self.location&&(u=Tt.self.location.protocol.slice(0,-1)),o=!mn.test(u?u.toLowerCase():"")}n=o}if(n)jn(i,"complete"),jn(i,"success");else{i.m=6;try{var p=2<Gn(i)?i.g.statusText:""}catch{p=""}i.j=p+" ["+i.da()+"]",Wr(i)}}finally{Yo(i)}}}function Yo(i,e){if(i.g){yr(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||jn(i,"ready");try{n.onreadystatechange=o}catch{}}}function yr(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(Tt.clearTimeout(i.A),i.A=null)}function Gn(i){return i.g?i.g.readyState:0}function ss(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case kr:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Ws(i){let e="";return Kr(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function ys(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=Ws(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):ln(i,e,n))}function ko(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function zc(i){this.Ga=0,this.j=[],this.l=new cs,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ko("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ko("baseRetryDelayMs",5e3,i),this.hb=ko("retryDelaySeedMs",1e4,i),this.eb=ko("forwardChannelMaxRetries",2,i),this.xa=ko("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new _l(i&&i.concurrentRequestLimit),this.Ja=new H,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function vs(i){if(Fo(i),3==i.H){var e=i.W++,n=is(i.I);if(ln(n,"SID",i.K),ln(n,"RID",e),ln(n,"TYPE","terminate"),ca(i,n),(e=new so(i,i.l,e)).L=2,e.A=qo(is(n)),n=!1,Tt.navigator&&Tt.navigator.sendBeacon)try{n=Tt.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Tt.Image&&((new Image).src=e.A,n=!0),n||(e.g=bs(e.l,null),e.g.ha(e.A)),e.G=Date.now(),dr(e)}Lo(i)}function uo(i){i.g&&(Fn(i),i.g.cancel(),i.g=null)}function Fo(i){uo(i),i.u&&(Tt.clearTimeout(i.u),i.u=null),vr(i),i.i.cancel(),i.m&&("number"==typeof i.m&&Tt.clearTimeout(i.m),i.m=null)}function Qo(i){if(!Xs(i.i)&&!i.m){i.m=!0;var e=i.Na;_r||Te(),le||(_r(),le=!0),Ce.add(e,i),i.C=0}}function Za(i,e){var n;n=e?e.m:i.W++;const o=is(i.I);ln(o,"SID",i.K),ln(o,"RID",n),ln(o,"AID",i.V),ca(i,o),i.o&&i.s&&ys(o,i.o,i.s),n=new so(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=ec(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),ka(i.i,n),xr(n,o,e)}function ca(i,e){i.na&&Kr(i.na,function(n,o){ln(e,o,n)}),i.h&&Ls({},function(n,o){ln(e,o,n)})}function ec(i,e,n){n=Math.min(i.j.length,n);var o=i.h?gt(i.h.Va,i.h,i):null;e:{var u=i.j;let p=-1;for(;;){const m=["count="+n];-1==p?0<n?(p=u[0].g,m.push("ofs="+p)):p=0:m.push("ofs="+p);let R=!0;for(let L=0;L<n;L++){let $=u[L].g;const ne=u[L].map;if($-=p,0>$)p=Math.max(0,u[L].g-100),R=!1;else try{Y(ne,m,"req"+$+"_")}catch{o&&o(ne)}}if(R){o=m.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function vl(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;_r||Te(),le||(_r(),le=!0),Ce.add(e,i),i.A=0}}function Zs(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=Ki(gt(i.Ma,i),qc(i,i.A)),i.A++,0))}function Fn(i){null!=i.B&&(Tt.clearTimeout(i.B),i.B=null)}function fo(i){i.g=new so(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=is(i.wa);ln(e,"RID","rpc"),ln(e,"SID",i.K),ln(e,"AID",i.V),ln(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&ln(e,"TO",i.qa),ln(e,"TYPE","xmlhttp"),ca(i,e),i.o&&i.s&&ys(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.A=qo(is(e)),n.u=null,n.S=!0,rs(n,i)}function vr(i){null!=i.v&&(Tt.clearTimeout(i.v),i.v=null)}function La(i,e){var n=null;if(i.g==e){vr(i),Fn(i),i.g=null;var o=2}else{if(!xa(i.i,e))return;n=e.F,ou(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.u?e.u.length:0,e=Date.now()-e.G;var u=i.C;jn(o=Ni(),new sa(o,n)),Qo(i)}else vl(i);else if(3==(u=e.s)||0==u&&0<e.ca||!(1==o&&function ho(i,e){return!(To(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=Ki(gt(i.Na,i,e),qc(i,i.C)),i.C++,0)))}(i,e)||2==o&&Zs(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:la(i,5);break;case 4:la(i,10);break;case 3:la(i,6);break;default:la(i,2)}}function qc(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function la(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=gt(i.pb,i);n||(n=new us("//www.google.com/images/cleardot.gif"),Tt.location&&"http"==Tt.location.protocol||Si(n,"https"),qo(n)),function U(i,e){const n=new cs;if(Tt.Image){const o=new Image;o.onload=ft(ie,n,o,"TestLoadImage: loaded",!0,e),o.onerror=ft(ie,n,o,"TestLoadImage: error",!1,e),o.onabort=ft(ie,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=ft(ie,n,o,"TestLoadImage: timeout",!1,e),Tt.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else xi(2);i.H=0,i.h&&i.h.za(e),Lo(i),Fo(i)}function Lo(i){if(i.H=0,i.ma=[],i.h){const e=Ja(i.i);(0!=e.length||0!=i.j.length)&&(An(i.ma,e),An(i.ma,i.j),i.i.i.length=0,En(i.j),i.j.length=0),i.h.ya()}}function ua(i,e,n){var o=n instanceof us?is(n):new us(n);if(""!=o.g)e&&(o.g=e+"."+o.g),zo(o,o.m);else{var u=Tt.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var p=new us(null);o&&Si(p,o),e&&(p.g=e),u&&zo(p,u),n&&(p.l=n),o=p}return e=i.Da,(n=i.F)&&e&&ln(o,n,e),ln(o,"VER",i.ra),ca(i,o),o}function bs(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new kn(i.Ha&&!i.va?new De({ob:n}):i.va)).Oa(i.J),e}function au(){}function Es(){if(Un&&!(10<=Number(xn)))throw Error("Environmental error: no available transport.")}function Hs(i,e){pn.call(this),this.g=new zc(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!qn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qn(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new hr(this)}function El(i){hi.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Ct(){Ca.call(this),this.status=1}function hr(i){this.g=i}function po(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Br(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var p=i.g[3],m=(e=i.g[0])+(p^(n=i.g[1])&((u=i.g[2])^p))+o[0]+3614090360&4294967295;m=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=(n=(u=(p=(e=n+(m<<7&4294967295|m>>>25))+((m=p+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|m>>>20))+((m=u+(n^p&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|m>>>15))+((m=n+(e^u&(p^e))+o[3]+3250441966&4294967295)<<22&4294967295|m>>>10))+((m=e+(p^n&(u^p))+o[4]+4118548399&4294967295)<<7&4294967295|m>>>25))+((m=p+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|m>>>20))+((m=u+(n^p&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|m>>>15))+((m=n+(e^u&(p^e))+o[7]+4249261313&4294967295)<<22&4294967295|m>>>10))+((m=e+(p^n&(u^p))+o[8]+1770035416&4294967295)<<7&4294967295|m>>>25))+((m=p+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|m>>>20))+((m=u+(n^p&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|m>>>15))+((m=n+(e^u&(p^e))+o[11]+2304563134&4294967295)<<22&4294967295|m>>>10))+((m=e+(p^n&(u^p))+o[12]+1804603682&4294967295)<<7&4294967295|m>>>25))+((m=p+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|m>>>20))+((m=u+(n^p&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|m>>>15))+((m=n+(e^u&(p^e))+o[15]+1236535329&4294967295)<<22&4294967295|m>>>10))+((m=e+(u^p&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|m>>>27))+((m=p+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|m>>>23))+((m=u+(e^n&(p^e))+o[11]+643717713&4294967295)<<14&4294967295|m>>>18))+((m=n+(p^e&(u^p))+o[0]+3921069994&4294967295)<<20&4294967295|m>>>12))+((m=e+(u^p&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|m>>>27))+((m=p+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|m>>>23))+((m=u+(e^n&(p^e))+o[15]+3634488961&4294967295)<<14&4294967295|m>>>18))+((m=n+(p^e&(u^p))+o[4]+3889429448&4294967295)<<20&4294967295|m>>>12))+((m=e+(u^p&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|m>>>27))+((m=p+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|m>>>23))+((m=u+(e^n&(p^e))+o[3]+4107603335&4294967295)<<14&4294967295|m>>>18))+((m=n+(p^e&(u^p))+o[8]+1163531501&4294967295)<<20&4294967295|m>>>12))+((m=e+(u^p&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|m>>>27))+((m=p+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|m>>>23))+((m=u+(e^n&(p^e))+o[7]+1735328473&4294967295)<<14&4294967295|m>>>18))+((m=n+(p^e&(u^p))+o[12]+2368359562&4294967295)<<20&4294967295|m>>>12))+((m=e+(n^u^p)+o[5]+4294588738&4294967295)<<4&4294967295|m>>>28))+((m=p+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|m>>>21))+((m=u+(p^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|m>>>16))+((m=n+(u^p^e)+o[14]+4259657740&4294967295)<<23&4294967295|m>>>9))+((m=e+(n^u^p)+o[1]+2763975236&4294967295)<<4&4294967295|m>>>28))+((m=p+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|m>>>21))+((m=u+(p^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|m>>>16))+((m=n+(u^p^e)+o[10]+3200236656&4294967295)<<23&4294967295|m>>>9))+((m=e+(n^u^p)+o[13]+681279174&4294967295)<<4&4294967295|m>>>28))+((m=p+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|m>>>21))+((m=u+(p^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|m>>>16))+((m=n+(u^p^e)+o[6]+76029189&4294967295)<<23&4294967295|m>>>9))+((m=e+(n^u^p)+o[9]+3654602809&4294967295)<<4&4294967295|m>>>28))+((m=p+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|m>>>21))+((m=u+(p^e^n)+o[15]+530742520&4294967295)<<16&4294967295|m>>>16))+((m=n+(u^p^e)+o[2]+3299628645&4294967295)<<23&4294967295|m>>>9))+((m=e+(u^(n|~p))+o[0]+4096336452&4294967295)<<6&4294967295|m>>>26))+((m=p+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|m>>>22))+((m=u+(e^(p|~n))+o[14]+2878612391&4294967295)<<15&4294967295|m>>>17))+((m=n+(p^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|m>>>11))+((m=e+(u^(n|~p))+o[12]+1700485571&4294967295)<<6&4294967295|m>>>26))+((m=p+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|m>>>22))+((m=u+(e^(p|~n))+o[10]+4293915773&4294967295)<<15&4294967295|m>>>17))+((m=n+(p^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|m>>>11))+((m=e+(u^(n|~p))+o[8]+1873313359&4294967295)<<6&4294967295|m>>>26))+((m=p+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|m>>>22))+((m=u+(e^(p|~n))+o[6]+2734768916&4294967295)<<15&4294967295|m>>>17))+((m=n+(p^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|m>>>11))+((p=(e=n+((m=e+(u^(n|~p))+o[4]+4149444226&4294967295)<<6&4294967295|m>>>26))+((m=p+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|m>>>22))^((u=p+((m=u+(e^(p|~n))+o[2]+718787259&4294967295)<<15&4294967295|m>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(m<<21&4294967295|m>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+p&4294967295}function Hr(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var p=0|i[u];o&&p==e||(n[u]=p,o=!1)}this.g=n}(at=kn.prototype).Oa=function(i){this.M=i},at.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():wa.g(),this.C=function ki(i){return i.h||(i.h=i.i())}(this.u?this.u:wa),this.g.onreadystatechange=gt(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(p){return void Xa(this,p)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const p of o.keys())n.set(p,o.get(p))}o=Array.from(n.keys()).find(p=>"content-type"==p.toLowerCase()),u=Tt.FormData&&i instanceof Tt.FormData,!(0<=nn(aa,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[p,m]of n)this.g.setRequestHeader(p,m);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{yr(this),0<this.B&&((this.L=function fi(i){return Un&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gt(this.ua,this)):this.A=zt(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(p){Xa(this,p)}},at.ua=function(){typeof wt<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jn(this,"timeout"),this.abort(8))},at.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,jn(this,"complete"),jn(this,"abort"),Yo(this))},at.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yo(this,!0)),kn.$.N.call(this)},at.La=function(){this.s||(this.G||this.v||this.l?lo(this):this.kb())},at.kb=function(){lo(this)},at.isActive=function(){return!!this.g},at.da=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},at.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},at.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),yl(e)}},at.Ia=function(){return this.m},at.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(at=zc.prototype).ra=8,at.H=1,at.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new so(this,this.l,i);let p=this.s;if(this.U&&(p?(p=xs(p),Et(p,this.U)):p=this.U),null!==this.o||this.O||(u.I=p,p=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=ec(this,u,e),ln(n=is(this.I),"RID",i),ln(n,"CVER",22),this.F&&ln(n,"X-HTTP-Session-Id",this.F),ca(this,n),p&&(this.O?e="headers="+encodeURIComponent(String(Ws(p)))+"&"+e:this.o&&ys(n,this.o,p)),ka(this.i,u),this.bb&&ln(n,"TYPE","init"),this.P?(ln(n,"$req",e),ln(n,"SID","null"),u.aa=!0,xr(u,n,null)):xr(u,n,e),this.H=2}}else 3==this.H&&(i?Za(this,i):0==this.j.length||Xs(this.i)||Za(this))},at.Ma=function(){if(this.u=null,fo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Ki(gt(this.jb,this),i)}},at.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,xi(10),uo(this),fo(this))},at.ib=function(){null!=this.v&&(this.v=null,uo(this),Zs(this),xi(19))},at.pb=function(i){i?(this.l.info("Successfully pinged google.com"),xi(2)):(this.l.info("Failed to ping google.com"),xi(1))},at.isActive=function(){return!!this.h&&this.h.isActive(this)},(at=au.prototype).Ba=function(){},at.Aa=function(){},at.za=function(){},at.ya=function(){},at.isActive=function(){return!0},at.Va=function(){},Es.prototype.g=function(i,e){return new Hs(i,e)},At(Hs,pn),Hs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;xi(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=ua(i,null,i.Y),Qo(i)},Hs.prototype.close=function(){vs(this.g)},Hs.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=Ze(i),i=n);e.j.push(new vc(e.fb++,i)),3==e.H&&Qo(e)},Hs.prototype.N=function(){this.g.h=null,delete this.j,vs(this.g),delete this.g,Hs.$.N.call(this)},At(El,hi),At(Ct,Ca),At(hr,au),hr.prototype.Ba=function(){jn(this.g,"a")},hr.prototype.Aa=function(i){jn(this.g,new El(i))},hr.prototype.za=function(i){jn(this.g,new Ct)},hr.prototype.ya=function(){jn(this.g,"b")},At(po,function Ec(){this.blockSize=-1}),po.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},po.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,p=0;p<e;){if(0==u)for(;p<=n;)Br(this,i,p),p+=this.blockSize;if("string"==typeof i){for(;p<e;)if(o[u++]=i.charCodeAt(p++),u==this.blockSize){Br(this,o),u=0;break}}else for(;p<e;)if(o[u++]=i[p++],u==this.blockSize){Br(this,o),u=0;break}}this.h=u,this.i+=e},po.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var Va={};function Do(i){return-128<=i&&128>i?function Bt(i,e){var n=Va;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new Hr([0|e],0>e?-1:0)}):new Hr([0|i],0>i?-1:0)}function go(i){if(isNaN(i)||!isFinite(i))return ai;if(0>i)return Pr(go(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=Ic;return new Hr(e,0)}var Ic=4294967296,ai=Do(0),Cl=Do(1),Ms=Do(16777216);function vi(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function zs(i){return-1==i.h}function Pr(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new Hr(n,~i.h).add(Cl)}function P(i,e){return i.add(Pr(e))}function Q(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function F(i,e){this.g=i,this.h=e}function z(i,e){if(vi(e))throw Error("division by zero");if(vi(i))return new F(ai,ai);if(zs(i))return e=z(Pr(i),e),new F(Pr(e.g),Pr(e.h));if(zs(e))return e=z(i,Pr(e)),new F(Pr(e.g),e.h);if(30<i.g.length){if(zs(i)||zs(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Cl,o=e;0>=o.X(i);)n=me(n),o=me(o);var u=ot(n,1),p=ot(o,1);for(o=ot(o,2),n=ot(n,2);!vi(o);){var m=p.add(o);0>=m.X(i)&&(u=u.add(n),p=m),o=ot(o,1),n=ot(n,1)}return e=P(i,u.R(e)),new F(u,e)}for(u=ai;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),m=(p=go(n)).R(e);zs(m)||0<m.X(i);)m=(p=go(n-=o)).R(e);vi(p)&&(p=Cl),u=u.add(p),i=P(i,m)}return new F(u,i)}function me(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new Hr(n,i.h)}function ot(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],p=0;p<o;p++)u[p]=0<e?i.D(p+n)>>>e|i.D(p+n+1)<<32-e:i.D(p+n);return new Hr(u,i.h)}(at=Hr.prototype).ea=function(){if(zs(this))return-Pr(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:Ic+o)*e,e*=Ic}return i},at.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(vi(this))return"0";if(zs(this))return"-"+Pr(this).toString(i);for(var e=go(Math.pow(i,6)),n=this,o="";;){var u=z(n,e).g,p=((0<(n=P(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(vi(n=u))return p+o;for(;6>p.length;)p="0"+p;o=p+o}},at.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},at.X=function(i){return zs(i=P(this,i))?-1:vi(i)?0:1},at.abs=function(){return zs(this)?Pr(this):this},at.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var p=o+(65535&this.D(u))+(65535&i.D(u)),m=(p>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=m>>>16,n[u]=(m&=65535)<<16|(p&=65535)}return new Hr(n,-2147483648&n[n.length-1]?-1:0)},at.R=function(i){if(vi(this)||vi(i))return ai;if(zs(this))return zs(i)?Pr(this).R(Pr(i)):Pr(Pr(this).R(i));if(zs(i))return Pr(this.R(Pr(i)));if(0>this.X(Ms)&&0>i.X(Ms))return go(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var p=this.D(o)>>>16,m=65535&this.D(o),R=i.D(u)>>>16,L=65535&i.D(u);n[2*o+2*u]+=m*L,Q(n,2*o+2*u),n[2*o+2*u+1]+=p*L,Q(n,2*o+2*u+1),n[2*o+2*u+1]+=m*R,Q(n,2*o+2*u+1),n[2*o+2*u+2]+=p*R,Q(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new Hr(n,0)},at.gb=function(i){return z(this,i).h},at.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new Hr(n,this.h&i.h)},at.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new Hr(n,this.h|i.h)},at.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new Hr(n,this.h^i.h)},Es.prototype.createWebChannel=Es.prototype.g,Hs.prototype.send=Hs.prototype.u,Hs.prototype.open=Hs.prototype.m,Hs.prototype.close=Hs.prototype.close,Wo.NO_ERROR=0,Wo.TIMEOUT=8,Wo.HTTP_ERROR=6,yc.COMPLETE="complete",Yr.EventType=Fs,Fs.OPEN="a",Fs.CLOSE="b",Fs.ERROR="c",Fs.MESSAGE="d",pn.prototype.listen=pn.prototype.O,kn.prototype.listenOnce=kn.prototype.P,kn.prototype.getLastError=kn.prototype.Sa,kn.prototype.getLastErrorCode=kn.prototype.Ia,kn.prototype.getStatus=kn.prototype.da,kn.prototype.getResponseJson=kn.prototype.Wa,kn.prototype.getResponseText=kn.prototype.ja,kn.prototype.send=kn.prototype.ha,kn.prototype.setWithCredentials=kn.prototype.Oa,po.prototype.digest=po.prototype.l,po.prototype.reset=po.prototype.reset,po.prototype.update=po.prototype.j,Hr.prototype.add=Hr.prototype.add,Hr.prototype.multiply=Hr.prototype.R,Hr.prototype.modulo=Hr.prototype.gb,Hr.prototype.compare=Hr.prototype.X,Hr.prototype.toNumber=Hr.prototype.ea,Hr.prototype.toString=Hr.prototype.toString,Hr.prototype.getBits=Hr.prototype.D,Hr.fromNumber=go,Hr.fromString=function Il(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Pr(Il(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=go(Math.pow(e,8)),o=ai,u=0;u<i.length;u+=8){var p=Math.min(8,i.length-u),m=parseInt(i.substring(u,u+p),e);8>p?(p=go(Math.pow(e,p)),o=o.R(p).add(go(m))):o=(o=o.R(n)).add(go(m))}return o};var vt=ze.createWebChannelTransport=function(){return new Es},dn=ze.getStatEventTarget=function(){return Ni()},ii=ze.ErrorCode=Wo,Qr=ze.EventType=yc,ci=ze.Event=Er,Jn=ze.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Fr=(ze.FetchXmlHttpFactory=De,ze.WebChannel=Yr),fs=ze.XhrIo=kn,Jo=ze.Md5=po,Zi=ze.Integer=Hr;const Ua="@firebase/firestore";class tr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tr.UNAUTHENTICATED=new tr(null),tr.GOOGLE_CREDENTIALS=new tr("google-credentials-uid"),tr.FIRST_PARTY=new tr("first-party-uid"),tr.MOCK_USER=new tr("mock-user");let gi="10.8.0";const ir=new pe.YJ("@firebase/firestore");function Vo(){return ir.logLevel}function Nt(i,...e){if(ir.logLevel<=pe.Ge.DEBUG){const n=e.map(wc);ir.debug(`Firestore (${gi}): ${i}`,...n)}}function ri(i,...e){if(ir.logLevel<=pe.Ge.ERROR){const n=e.map(wc);ir.error(`Firestore (${gi}): ${i}`,...n)}}function mo(i,...e){if(ir.logLevel<=pe.Ge.WARN){const n=e.map(wc);ir.warn(`Firestore (${gi}): ${i}`,...n)}}function wc(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function sn(i="Unexpected state"){const e=`FIRESTORE (${gi}) INTERNAL ASSERTION FAILED: `+i;throw ri(e),new Error(e)}function fn(i,e){i||sn()}function Ht(i,e){return i}const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends we.kx{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class os{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class Is{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tr.UNAUTHENTICATED))}shutdown(){}}class gd{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class wl{constructor(e){this.t=e,this.currentUser=tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const p=$=>this.i!==u?(u=this.i,n($)):Promise.resolve();let m=new os;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new os,e.enqueueRetryable(()=>p(this.currentUser))};const R=()=>{const $=m;e.enqueueRetryable((0,ae.c)(function*(){yield $.promise,yield p(o.currentUser)}))},L=$=>{Nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=$,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit($=>L($)),setTimeout(()=>{if(!this.auth){const $=this.t.getImmediate({optional:!0});$?L($):(Nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new os)}},0),R()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(Nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(fn("string"==typeof o.accessToken),new Is(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return fn(null===e||"string"==typeof e),new tr(e)}}class _o{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=tr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Bu{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new _o(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(tr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class So{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=p=>{null!=p.error&&Nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const m=p.token!==this.R;return this.R=p.token,Nt("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?n(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>o(p))};const u=p=>{Nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.A.onInit(p=>u(p)),setTimeout(()=>{if(!this.appCheck){const p=this.A.getImmediate({optional:!0});p?u(p):Nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fn("string"==typeof n.token),this.R=n.token,new wf(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zr(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class Tc{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=zr(40);for(let p=0;p<u.length;++p)o.length<20&&u[p]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[p]%62))}return o}}function bn(i,e){return i<e?-1:i>e?1:0}function Ba(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function da(i){return i+"\0"}class wi{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new bt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new bt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new bt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wi.fromMillis(Date.now())}static fromDate(e){return wi.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new wi(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bn(this.nanoseconds,e.nanoseconds):bn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _n(e)}static min(){return new _n(new wi(0,0))}static max(){return new _n(new wi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Da{constructor(e,n,o){void 0===n?n=0:n>e.length&&sn(),void 0===o?o=e.length-n:o>e.length-n&&sn(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Da.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Da?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const p=e.get(u),m=n.get(u);if(p<m)return-1;if(p>m)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qr extends Da{construct(e,n,o){return new qr(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new bt(ht.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new qr(n)}static emptyPath(){return new qr([])}}const tc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ai extends Da{construct(e,n,o){return new Ai(e,n,o)}static isValidIdentifier(e){return tc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ai.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ai(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const p=()=>{if(0===o.length)throw new bt(ht.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let m=!1;for(;u<e.length;){const R=e[u];if("\\"===R){if(u+1===e.length)throw new bt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const L=e[u+1];if("\\"!==L&&"."!==L&&"`"!==L)throw new bt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=L,u+=2}else"`"===R?(m=!m,u++):"."!==R||m?(o+=R,u++):(p(),u++)}if(p(),m)throw new bt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ai(n)}static emptyPath(){return new Ai([])}}class Kt{constructor(e){this.path=e}static fromPath(e){return new Kt(qr.fromString(e))}static fromName(e){return new Kt(qr.fromString(e).popFirst(5))}static empty(){return new Kt(qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return qr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Kt(new qr(e.slice()))}}class yo{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function nc(i){return i.fields.find(e=>2===e.kind)}function ha(i){return i.fields.filter(e=>2!==e.kind)}yo.UNKNOWN_ID=-1;class Ir{constructor(e,n){this.fieldPath=e,this.kind=n}}class fa{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new fa(0,Rs.min())}}function li(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=_n.fromTimestamp(1e9===o?new wi(n+1,0):new wi(n,o));return new Rs(u,Kt.empty(),e)}function Zo(i){return new Rs(i.readTime,i.key,-1)}class Rs{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Rs(_n.min(),Kt.empty(),-1)}static max(){return new Rs(_n.max(),Kt.empty(),-1)}}function Tl(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Kt.comparator(i.documentKey,e.documentKey),0!==n?n:bn(i.largestBatchId,e.largestBatchId))}const Dc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function vo(i){return lu.apply(this,arguments)}function lu(){return lu=(0,ae.c)(function*(i){if(i.code!==ht.FAILED_PRECONDITION||i.message!==Dc)throw i;Nt("LocalStore","Unexpectedly lost primary lease")}),lu.apply(this,arguments)}class et{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&sn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new et((o,u)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(o,u)},this.catchCallback=p=>{this.wrapFailure(n,p).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof et?n:et.resolve(n)}catch(n){return et.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):et.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):et.reject(n)}static resolve(e){return new et((n,o)=>{n(e)})}static reject(e){return new et((n,o)=>{o(e)})}static waitFor(e){return new et((n,o)=>{let u=0,p=0,m=!1;e.forEach(R=>{++u,R.next(()=>{++p,m&&p===u&&n()},L=>o(L))}),m=!0,p===u&&n()})}static or(e){let n=et.resolve(!1);for(const o of e)n=n.next(u=>u?et.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,p)=>{o.push(n.call(this,u,p))}),this.waitFor(o)}static mapArray(e,n){return new et((o,u)=>{const p=e.length,m=new Array(p);let R=0;for(let L=0;L<p;L++){const $=L;n(e[$]).next(ne=>{m[$]=ne,++R,R===p&&o(m)},ne=>u(ne))}})}static doWhile(e,n){return new et((o,u)=>{const p=()=>{!0===e()?n().next(()=>{p()},u):o()};p()})}}class Cr{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new os,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new N(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=ve(o.target.error);this.V.reject(new N(e,u))}}static open(e,n,o,u){try{return new Cr(n,e.transaction(u,o))}catch(p){throw new N(n,p)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Nt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new x(n)}}class ps{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===ps.S((0,we.Su)())&&ri("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Nt("SimpleDb","Removing database:",e),G(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,we.yy)())return!1;if(ps.C())return!0;const e=(0,we.Su)(),n=ps.S(e),o=0<n&&n<10,u=ps.v(e),p=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||p)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,ae.c)(function*(){return n.db||(Nt("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const p=indexedDB.open(n.name,n.version);p.onsuccess=m=>{o(m.target.result)},p.onblocked=()=>{u(new N(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=m=>{const R=m.target.error;u("VersionError"===R.name?new bt(ht.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new bt(ht.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new N(e,R))},p.onupgradeneeded=m=>{Nt("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',m.oldVersion),n.p.N(m.target.result,p.transaction,m.oldVersion,n.version).next(()=>{Nt("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.B&&(n.db.onversionchange=o=>n.B(o)),n.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var p=this;return(0,ae.c)(function*(){const m="readonly"===n;let R=0;for(;;){++R;try{p.db=yield p.O(e);const L=Cr.open(p.db,e,m?"readonly":"readwrite",o),$=u(L).next(ne=>(L.g(),ne)).catch(ne=>(L.abort(ne),et.reject(ne))).toPromise();return $.catch(()=>{}),yield L.m,$}catch(L){const $=L,ne="FirebaseError"!==$.name&&R<3;if(Nt("SimpleDb","Transaction failed with error:",$.message,"Retrying:",ne),p.close(),!ne)return Promise.reject($)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class w{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return G(this.k.delete())}}class N extends bt{constructor(e,n){super(ht.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function A(i){return"IndexedDbTransactionError"===i.name}class x{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(Nt("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(Nt("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),G(o)}add(e){return Nt("SimpleDb","ADD",this.store.name,e,e),G(this.store.add(e))}get(e){return G(this.store.get(e)).next(n=>(void 0===n&&(n=null),Nt("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Nt("SimpleDb","DELETE",this.store.name,e),G(this.store.delete(e))}count(){return Nt("SimpleDb","COUNT",this.store.name),G(this.store.count())}W(e,n){const o=this.options(e,n),u=o.index?this.store.index(o.index):this.store;if("function"==typeof u.getAll){const p=u.getAll(o.range);return new et((m,R)=>{p.onerror=L=>{R(L.target.error)},p.onsuccess=L=>{m(L.target.result)}})}{const p=this.cursor(o),m=[];return this.G(p,(R,L)=>{m.push(L)}).next(()=>m)}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new et((u,p)=>{o.onerror=m=>{p(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}H(e,n){Nt("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(p,m,R)=>R.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new et((o,u)=>{n.onerror=p=>{const m=ve(p.target.error);u(m)},n.onsuccess=p=>{const m=p.target.result;m?e(m.primaryKey,m.value).next(R=>{R?m.continue():o()}):o()}})}G(e,n){const o=[];return new et((u,p)=>{e.onerror=m=>{p(m.target.error)},e.onsuccess=m=>{const R=m.target.result;if(!R)return void u();const L=new w(R),$=n(R.primaryKey,R.value,L);if($ instanceof et){const ne=$.catch(he=>(L.done(),et.reject(he)));o.push(ne)}L.isDone?u():null===L.$?R.continue():R.continue(L.$)}}).next(()=>et.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function G(i){return new et((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=ve(o.target.error);n(u)}})}let re=!1;function ve(i){const e=ps.S((0,we.Su)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new bt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return re||(re=!0,setTimeout(()=>{throw o},0)),o}}return i}class dt{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;Nt("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.c)(function*(){n.task=null;try{Nt("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(o){A(o)?Nt("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield vo(o)}yield n.ee(6e4)}))}}class rt{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,ae.c)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,p=!0;return et.doWhile(()=>!0===p&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(m=>{if(null!==m&&!o.has(m))return Nt("IndexBackfiller",`Processing collection: ${m}`),this.re(e,m,u).next(R=>{u-=R,o.add(m)});p=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(p=>{const m=p.changes;return this.localStore.indexManager.updateIndexEntries(e,m).next(()=>this.ie(u,p)).next(R=>(Nt("IndexBackfiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,n,R))).next(()=>m.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,p)=>{const m=Zo(p);Tl(m,o)>0&&(o=m)}),new Rs(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let $t=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function Ut(i){return null==i}function nr(i){return 0===i&&1/i==-1/0}function Vi(i){return"number"==typeof i&&Number.isInteger(i)&&!nr(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function es(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=ic(e)),e=rc(i.get(n),e);return ic(e)}function rc(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const p=i.charAt(u);switch(p){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=p}}return n}function ic(i){return i+"\x01\x01"}function Ao(i){const e=i.length;if(fn(e>=2),2===e)return fn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),qr.emptyPath();const n=e-2,o=[];let u="";for(let p=0;p<e;){const m=i.indexOf("\x01",p);switch((m<0||m>n)&&sn(),i.charAt(m+1)){case"\x01":const R=i.substring(p,m);let L;0===u.length?L=R:(u+=R,L=u,u=""),o.push(L);break;case"\x10":u+=i.substring(p,m),u+="\0";break;case"\x11":u+=i.substring(p,m+1);break;default:sn()}p=m+2}return new qr(o)}const Uo=["userId","batchId"];function Dl(i,e){return[i,es(e)]}function ju(i,e,n){return[i,es(e),n]}const $u={},ym=["prefixPath","collectionGroup","readTime","documentId"],Sl=["prefixPath","collectionGroup","documentId"],cr=["collectionGroup","readTime","prefixPath","documentId"],jr=["canonicalId","targetId"],Df=["targetId","path"],Hp=["path","targetId"],Sf=["collectionId","parent"],Af=["indexId","uid"],_h=["uid","sequenceNumber"],_d=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yh=["indexId","uid","orderedDocumentKey"],Pf=["userId","collectionPath","documentId"],Eo=["userId","collectionPath","largestBatchId"],Gu=["userId","collectionGroup","largestBatchId"],Wu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zp=[...Wu,"documentOverlays"],Qc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Al=Qc,uu=[...Al,"indexConfiguration","indexState","indexEntries"];class Pl extends Yc{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function eo(i,e){const n=Ht(i);return ps.M(n.ae,e)}function bf(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function ja(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Sc(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Pi{constructor(e,n){this.comparator=e,this.root=n||qs.EMPTY}insert(e,n){return new Pi(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qs.BLACK,null,null))}remove(e){return new Pi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qs.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $a(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $a(this.root,e,this.comparator,!1)}getReverseIterator(){return new $a(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $a(this.root,e,this.comparator,!0)}}class $a{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=n?o(e.key,n):1,n&&u&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qs{constructor(e,n,o,u,p){this.key=e,this.value=n,this.color=o??qs.RED,this.left=u??qs.EMPTY,this.right=p??qs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,p){return new qs(e??this.key,n??this.value,o??this.color,u??this.left,p??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const p=o(e,u.key);return u=p<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===p?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return qs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return qs.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw sn();const e=this.left.check();if(e!==this.right.check())throw sn();return e+(this.isRed()?0:1)}}qs.EMPTY=null,qs.RED=!0,qs.BLACK=!1,qs.EMPTY=new class{constructor(){this.size=0}get key(){throw sn()}get value(){throw sn()}get color(){throw sn()}get left(){throw sn()}get right(){throw sn()}copy(e,n,o,u,p){return this}insert(e,n,o){return new qs(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pr{constructor(e){this.comparator=e,this.data=new Pi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hu(this.data.getIterator())}getIteratorFrom(e){return new Hu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof pr)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,p=o.getNext().key;if(0!==this.comparator(u,p))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pr(this.comparator);return n.data=e,n}}class Hu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wr(i){return i.hasNext()?i.getNext():void 0}class Io{constructor(e){this.fields=e,e.sort(Ai.comparator)}static empty(){return new Io([])}unionWith(e){let n=new pr(Ai.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Io(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ba(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class bl extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Os{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(p){throw typeof DOMException<"u"&&p instanceof DOMException?new bl("Invalid base64 string: "+p):p}}(e);return new Os(n)}static fromUint8Array(e){const n=function(u){let p="";for(let m=0;m<u.length;++m)p+=String.fromCharCode(u[m]);return p}(e);return new Os(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Os.EMPTY_BYTE_STRING=new Os("");const vh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xc(i){if(fn(!!i),"string"==typeof i){let e=0;const n=vh.exec(i);if(fn(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Cs(i.seconds),nanos:Cs(i.nanos)}}function Cs(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Sa(i){return"string"==typeof i?Os.fromBase64String(i):Os.fromUint8Array(i)}function Zc(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function du(i){const e=i.mapValue.fields.__previous_value__;return Zc(e)?du(e):e}function Ac(i){const e=Xc(i.mapValue.fields.__local_write_time__.timestampValue);return new wi(e.seconds,e.nanos)}class hu{constructor(e,n,o,u,p,m,R,L,$){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=p,this.forceLongPolling=m,this.autoDetectLongPolling=R,this.longPollingOptions=L,this.useFetchStreams=$}}class ws{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ws("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ws&&e.projectId===this.projectId&&e.database===this.database}}const pa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ml={nullValue:"NULL_VALUE"};function Ns(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Zc(i)?4:Ch(i)?9007199254740991:10:sn()}function Co(i,e){if(i===e)return!0;const n=Ns(i);if(n!==Ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ac(i).isEqual(Ac(e));case 3:return function(u,p){if("string"==typeof u.timestampValue&&"string"==typeof p.timestampValue&&u.timestampValue.length===p.timestampValue.length)return u.timestampValue===p.timestampValue;const m=Xc(u.timestampValue),R=Xc(p.timestampValue);return m.seconds===R.seconds&&m.nanos===R.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return p=e,Sa(i.bytesValue).isEqual(Sa(p.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,p){return Cs(u.geoPointValue.latitude)===Cs(p.geoPointValue.latitude)&&Cs(u.geoPointValue.longitude)===Cs(p.geoPointValue.longitude)}(i,e);case 2:return function(u,p){if("integerValue"in u&&"integerValue"in p)return Cs(u.integerValue)===Cs(p.integerValue);if("doubleValue"in u&&"doubleValue"in p){const m=Cs(u.doubleValue),R=Cs(p.doubleValue);return m===R?nr(m)===nr(R):isNaN(m)&&isNaN(R)}return!1}(i,e);case 9:return Ba(i.arrayValue.values||[],e.arrayValue.values||[],Co);case 10:return function(u,p){const m=u.mapValue.fields||{},R=p.mapValue.fields||{};if(bf(m)!==bf(R))return!1;for(const L in m)if(m.hasOwnProperty(L)&&(void 0===R[L]||!Co(m[L],R[L])))return!1;return!0}(i,e);default:return sn()}var p}function ea(i,e){return void 0!==(i.values||[]).find(n=>Co(n,e))}function sc(i,e){if(i===e)return 0;const n=Ns(i),o=Ns(e);if(n!==o)return bn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return bn(i.booleanValue,e.booleanValue);case 2:return function(p,m){const R=Cs(p.integerValue||p.doubleValue),L=Cs(m.integerValue||m.doubleValue);return R<L?-1:R>L?1:R===L?0:isNaN(R)?isNaN(L)?0:-1:1}(i,e);case 3:return zu(i.timestampValue,e.timestampValue);case 4:return zu(Ac(i),Ac(e));case 5:return bn(i.stringValue,e.stringValue);case 6:return function(p,m){const R=Sa(p),L=Sa(m);return R.compareTo(L)}(i.bytesValue,e.bytesValue);case 7:return function(p,m){const R=p.split("/"),L=m.split("/");for(let $=0;$<R.length&&$<L.length;$++){const ne=bn(R[$],L[$]);if(0!==ne)return ne}return bn(R.length,L.length)}(i.referenceValue,e.referenceValue);case 8:return function(p,m){const R=bn(Cs(p.latitude),Cs(m.latitude));return 0!==R?R:bn(Cs(p.longitude),Cs(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(p,m){const R=p.values||[],L=m.values||[];for(let $=0;$<R.length&&$<L.length;++$){const ne=sc(R[$],L[$]);if(ne)return ne}return bn(R.length,L.length)}(i.arrayValue,e.arrayValue);case 10:return function(p,m){if(p===pa.mapValue&&m===pa.mapValue)return 0;if(p===pa.mapValue)return 1;if(m===pa.mapValue)return-1;const R=p.fields||{},L=Object.keys(R),$=m.fields||{},ne=Object.keys($);L.sort(),ne.sort();for(let he=0;he<L.length&&he<ne.length;++he){const Me=bn(L[he],ne[he]);if(0!==Me)return Me;const Qe=sc(R[L[he]],$[ne[he]]);if(0!==Qe)return Qe}return bn(L.length,ne.length)}(i.mapValue,e.mapValue);default:throw sn()}}function zu(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return bn(i,e);const n=Xc(i),o=Xc(e),u=bn(n.seconds,o.seconds);return 0!==u?u:bn(n.nanos,o.nanos)}function Ga(i){return Eh(i)}function Eh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=Xc(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Sa(i.bytesValue).toBase64():"referenceValue"in i?Kt.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const p of n.values||[])u?u=!1:o+=",",o+=Eh(p);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",p=!0;for(const m of o)p?p=!1:u+=",",u+=`${m}:${Eh(n.fields[m])}`;return u+"}"}(i.mapValue):sn()}function Wa(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Aa(i){return!!i&&"integerValue"in i}function oc(i){return!!i&&"arrayValue"in i}function Mf(i){return!!i&&"nullValue"in i}function Ih(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function fu(i){return!!i&&"mapValue"in i}function Pa(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ja(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Pa(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pa(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Ch(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function qp(i){return"nullValue"in i?Ml:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Wa(ws.empty(),Kt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:sn()}function tl(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Wa(ws.empty(),Kt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?pa:sn()}function pu(i,e){const n=sc(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function yd(i,e){const n=sc(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class as{constructor(e){this.value=e}static empty(){return new as({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!fu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pa(n)}setAll(e){let n=Ai.emptyPath(),o={},u=[];e.forEach((m,R)=>{if(!n.isImmediateParentOf(R)){const L=this.getFieldsMap(n);this.applyChanges(L,o,u),o={},u=[],n=R.popLast()}m?o[R.lastSegment()]=Pa(m):u.push(R.lastSegment())});const p=this.getFieldsMap(n);this.applyChanges(p,o,u)}delete(e){const n=this.field(e.popLast());fu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Co(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];fu(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){ja(n,(u,p)=>e[u]=p);for(const u of o)delete e[u]}clone(){return new as(Pa(this.value))}}function Rf(i){const e=[];return ja(i.fields,(n,o)=>{const u=new Ai([n]);if(fu(o)){const p=Rf(o.mapValue).fields;if(0===p.length)e.push(u);else for(const m of p)e.push(u.child(m))}else e.push(u)}),new Io(e)}class Hi{constructor(e,n,o,u,p,m,R){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=p,this.data=m,this.documentState=R}static newInvalidDocument(e){return new Hi(e,0,_n.min(),_n.min(),_n.min(),as.empty(),0)}static newFoundDocument(e,n,o,u){return new Hi(e,1,n,_n.min(),o,u,0)}static newNoDocument(e,n){return new Hi(e,2,n,_n.min(),_n.min(),as.empty(),0)}static newUnknownDocument(e,n){return new Hi(e,3,n,_n.min(),_n.min(),as.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_n.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=as.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=as.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_n.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bo{constructor(e,n){this.position=e,this.inclusive=n}}function gu(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const p=e[u],m=i.position[u];if(o=p.field.isKeyField()?Kt.comparator(Kt.fromName(m.referenceValue),n.key):sc(m,n.data.field(p.field)),"desc"===p.dir&&(o*=-1),0!==o)break}return o}function nl(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Co(i.position[n],e.position[n]))return!1;return!0}class Pc{constructor(e,n="asc"){this.field=e,this.dir=n}}function wh(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class qu{}class Lr extends qu{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new Ed(e,n,o):"array-contains"===n?new Rc(e,o):"in"===n?new ac(e,o):"not-in"===n?new cc(e,o):"array-contains-any"===n?new _u(e,o):new Lr(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new Th(e,o):new Rl(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(sc(n,this.value)):null!==n&&Ns(this.value)===Ns(n)&&this.matchesComparison(sc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return sn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jr extends qu{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Jr(e,n)}matches(e){return Ha(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Ha(i){return"and"===i.op}function rl(i){return"or"===i.op}function il(i){return Ku(i)&&Ha(i)}function Ku(i){for(const e of i.filters)if(e instanceof Jr)return!1;return!0}function bc(i){if(i instanceof Lr)return i.field.canonicalString()+i.op.toString()+Ga(i.value);if(il(i))return i.filters.map(e=>bc(e)).join(",");{const e=i.filters.map(n=>bc(n)).join(",");return`${i.op}(${e})`}}function Mc(i,e){return i instanceof Lr?(o=i,(u=e)instanceof Lr&&o.op===u.op&&o.field.isEqual(u.field)&&Co(o.value,u.value)):i instanceof Jr?function(o,u){return u instanceof Jr&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((p,m,R)=>p&&Mc(m,u.filters[R]),!0)}(i,e):void sn();var o,u}function Of(i,e){const n=i.filters.concat(e);return Jr.create(n,i.op)}function vd(i){return i instanceof Lr?`${(n=i).field.canonicalString()} ${n.op} ${Ga(n.value)}`:i instanceof Jr?function(n){return n.op.toString()+" {"+n.getFilters().map(vd).join(" ,")+"}"}(i):"Filter";var n}class Ed extends Lr{constructor(e,n,o){super(e,n,o),this.key=Kt.fromName(o.referenceValue)}matches(e){const n=Kt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Th extends Lr{constructor(e,n){super(e,"in",n),this.keys=mu(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Rl extends Lr{constructor(e,n){super(e,"not-in",n),this.keys=mu(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mu(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>Kt.fromName(o.referenceValue))}class Rc extends Lr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return oc(n)&&ea(n.arrayValue,this.value)}}class ac extends Lr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&ea(this.value.arrayValue,n)}}class cc extends Lr{constructor(e,n){super(e,"not-in",n)}matches(e){if(ea(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!ea(this.value.arrayValue,n)}}class _u extends Lr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!oc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>ea(this.value.arrayValue,o))}}class sl{constructor(e,n=null,o=[],u=[],p=null,m=null,R=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=p,this.startAt=m,this.endAt=R,this.ce=null}}function Ol(i,e=null,n=[],o=[],u=null,p=null,m=null){return new sl(i,e,n,o,u,p,m)}function za(i){const e=Ht(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>bc(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(p=o).field.canonicalString()+p.dir;var p}).join(","),Ut(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>Ga(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>Ga(o)).join(",")),e.ce=n}return e.ce}function Nl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!wh(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Mc(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!nl(i.startAt,e.startAt)&&nl(i.endAt,e.endAt)}function Yu(i){return Kt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function qa(i,e){return i.filters.filter(n=>n instanceof Lr&&n.field.isEqual(e))}function Dh(i,e,n){let o=Ml,u=!0;for(const p of qa(i,e)){let m=Ml,R=!0;switch(p.op){case"<":case"<=":m=qp(p.value);break;case"==":case"in":case">=":m=p.value;break;case">":m=p.value,R=!1;break;case"!=":case"not-in":m=Ml}pu({value:o,inclusive:u},{value:m,inclusive:R})<0&&(o=m,u=R)}if(null!==n)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const m=n.position[p];pu({value:o,inclusive:u},{value:m,inclusive:n.inclusive})<0&&(o=m,u=n.inclusive);break}return{value:o,inclusive:u}}function Id(i,e,n){let o=pa,u=!0;for(const p of qa(i,e)){let m=pa,R=!0;switch(p.op){case">=":case">":m=tl(p.value),R=!1;break;case"==":case"in":case"<=":m=p.value;break;case"<":m=p.value,R=!1;break;case"!=":case"not-in":m=pa}yd({value:o,inclusive:u},{value:m,inclusive:R})>0&&(o=m,u=R)}if(null!==n)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const m=n.position[p];yd({value:o,inclusive:u},{value:m,inclusive:n.inclusive})>0&&(o=m,u=n.inclusive);break}return{value:o,inclusive:u}}class lc{constructor(e,n=null,o=[],u=[],p=null,m="F",R=null,L=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=p,this.limitType=m,this.startAt=R,this.endAt=L,this.le=null,this.he=null,this.Pe=null}}function Cd(i,e,n,o,u,p,m,R){return new lc(i,e,n,o,u,p,m,R)}function Oc(i){return new lc(i)}function yu(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function S(i){return null!==i.collectionGroup}function _(i){const e=Ht(i);if(null===e.le){e.le=[];const n=new Set;for(const p of e.explicitOrderBy)e.le.push(p),n.add(p.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(m){let R=new pr(Ai.comparator);return m.filters.forEach(L=>{L.getFlattenedFilters().forEach($=>{$.isInequality()&&(R=R.add($.field))})}),R})(e).forEach(p=>{n.has(p.canonicalString())||p.isKeyField()||e.le.push(new Pc(p,o))}),n.has(Ai.keyField().canonicalString())||e.le.push(new Pc(Ai.keyField(),o))}return e.le}function E(i){const e=Ht(i);return e.he||(e.he=function b(i,e){if("F"===i.limitType)return Ol(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new Pc(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new Bo(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new Bo(i.startAt.position,i.startAt.inclusive):null;return Ol(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,_(i))),e.he}function K(i,e){const n=i.filters.concat([e]);return new lc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function oe(i,e,n){return new lc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Ne(i,e){return Nl(E(i),E(e))&&i.limitType===e.limitType}function ct(i){return`${za(E(i))}|lt:${i.limitType}`}function Pt(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>vd(u)).join(", ")}]`),Ut(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(m=u).field.canonicalString()} (${m.dir})`;var m}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>Ga(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>Ga(u)).join(",")),`Target(${o})`}(E(i))}; limitType=${i.limitType})`}function hn(i,e){return e.isFoundDocument()&&function(o,u){const p=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(p):Kt.isDocumentKey(o.path)?o.path.isEqual(p):o.path.isImmediateParentOf(p)}(i,e)&&function(o,u){for(const p of _(o))if(!p.field.isKeyField()&&null===u.data.field(p.field))return!1;return!0}(i,e)&&function(o,u){for(const p of o.filters)if(!p.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(m,R,L){const $=gu(m,R,L);return m.inclusive?$<=0:$<0}(o.startAt,_(o),u)||o.endAt&&!function(m,R,L){const $=gu(m,R,L);return m.inclusive?$>=0:$>0}(o.endAt,_(o),u)));var o,u}function Nn(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function sr(i){return(e,n)=>{let o=!1;for(const u of _(i)){const p=Po(u,e,n);if(0!==p)return p;o=o||u.field.isKeyField()}return 0}}function Po(i,e,n){const o=i.field.isKeyField()?Kt.comparator(e.key,n.key):function(p,m,R){const L=m.data.field(p),$=R.data.field(p);return null!==L&&null!==$?sc(L,$):sn()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return sn()}}class Ts{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,p]of o)if(this.equalsFn(u,e))return p}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let p=0;p<u.length;p++)if(this.equalsFn(u[p][0],e))return void(u[p]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){ja(this.inner,(n,o)=>{for(const[u,p]of o)e(u,p)})}isEmpty(){return Sc(this.inner)}size(){return this.innerSize}}const xl=new Pi(Kt.comparator);function bo(){return xl}const Mo=new Pi(Kt.comparator);function Nc(...i){let e=Mo;for(const n of i)e=e.insert(n.key,n);return e}function Sh(i){let e=Mo;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function jo(){return vu()}function ol(){return vu()}function vu(){return new Ts(i=>i.toString(),(i,e)=>i.isEqual(e))}const Ah=new Pi(Kt.comparator),Ds=new pr(Kt.comparator);function or(...i){let e=Ds;for(const n of i)e=e.add(n);return e}const wd=new pr(bn);function al(){return wd}function vm(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nr(e)?"-0":e}}function Nf(i){return{integerValue:""+i}}function Ph(i,e){return Vi(e)?Nf(e):vm(i,e)}class xf{constructor(){this._=void 0}}function Kp(i,e,n){return i instanceof kl?function(u,p){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return p&&Zc(p)&&(p=du(p)),p&&(m.fields.__previous_value__=p),{mapValue:m}}(n,e):i instanceof Eu?Yp(i,e):i instanceof Fl?Qp(i,e):function(u,p){const m=kf(u,p),R=Jp(m)+Jp(u.Ie);return Aa(m)&&Aa(u.Ie)?Nf(R):vm(u.serializer,R)}(i,e)}function Y_(i,e,n){return i instanceof Eu?Yp(i,e):i instanceof Fl?Qp(i,e):n}function kf(i,e){return i instanceof Iu?Aa(o=e)||(p=o)&&"doubleValue"in p?e:{integerValue:0}:null;var o,p}class kl extends xf{}class Eu extends xf{constructor(e){super(),this.elements=e}}function Yp(i,e){const n=Xp(e);for(const o of i.elements)n.some(u=>Co(u,o))||n.push(o);return{arrayValue:{values:n}}}class Fl extends xf{constructor(e){super(),this.elements=e}}function Qp(i,e){let n=Xp(e);for(const o of i.elements)n=n.filter(u=>!Co(u,o));return{arrayValue:{values:n}}}class Iu extends xf{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Jp(i){return Cs(i.integerValue||i.doubleValue)}function Xp(i){return oc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class xc{constructor(e,n){this.field=e,this.transform=n}}class Zp{constructor(e,n){this.version=e,this.transformResults=n}}class ts{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ts}static exists(e){return new ts(void 0,e)}static updateTime(e){return new ts(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ta(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Ff{}function cl(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new ul(i.key,ts.none()):new ll(i.key,i.data,ts.none());{const n=i.data,o=as.empty();let u=new pr(Ai.comparator);for(let p of e.fields)if(!u.has(p)){let m=n.field(p);null===m&&p.length>1&&(p=p.popLast(),m=n.field(p)),null===m?o.delete(p):o.set(p,m),u=u.add(p)}return new kc(i.key,o,new Io(u.toArray()),ts.none())}}function Lf(i,e,n){i instanceof ll?function(u,p,m){const R=u.value.clone(),L=Td(u.fieldTransforms,p,m.transformResults);R.setAll(L),p.convertToFoundDocument(m.version,R).setHasCommittedMutations()}(i,e,n):i instanceof kc?function(u,p,m){if(!ta(u.precondition,p))return void p.convertToUnknownDocument(m.version);const R=Td(u.fieldTransforms,p,m.transformResults),L=p.data;L.setAll(Vl(u)),L.setAll(R),p.convertToFoundDocument(m.version,L).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Ll(i,e,n,o){return i instanceof ll?function(p,m,R,L){if(!ta(p.precondition,m))return R;const $=p.value.clone(),ne=Em(p.fieldTransforms,L,m);return $.setAll(ne),m.convertToFoundDocument(m.version,$).setHasLocalMutations(),null}(i,e,n,o):i instanceof kc?function(p,m,R,L){if(!ta(p.precondition,m))return R;const $=Em(p.fieldTransforms,L,m),ne=m.data;return ne.setAll(Vl(p)),ne.setAll($),m.convertToFoundDocument(m.version,ne).setHasLocalMutations(),null===R?null:R.unionWith(p.fieldMask.fields).unionWith(p.fieldTransforms.map(he=>he.field))}(i,e,n,o):(R=n,ta(i.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):R);var m,R}function Vf(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),p=kf(o.transform,u||null);null!=p&&(null===n&&(n=as.empty()),n.set(o.field,p))}return n||null}function Uf(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&Ba(o,u,(p,m)=>function Cu(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof Eu&&u instanceof Eu||o instanceof Fl&&u instanceof Fl?Ba(o.elements,u.elements,Co):o instanceof Iu&&u instanceof Iu?Co(o.Ie,u.Ie):o instanceof kl&&u instanceof kl);var o,u}(p,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class ll extends Ff{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class kc extends Ff{constructor(e,n,o,u,p=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function Vl(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Td(i,e,n){const o=new Map;fn(i.length===n.length);for(let u=0;u<n.length;u++){const p=i[u],m=p.transform,R=e.data.field(p.field);o.set(p.field,Y_(m,R,n[u]))}return o}function Em(i,e,n){const o=new Map;for(const u of i){const p=u.transform,m=n.data.field(u.field);o.set(u.field,Kp(p,m,e))}return o}class ul extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eg extends Ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bf{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const p=this.mutations[u];p.key.isEqual(e.key)&&Lf(p,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Ll(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Ll(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=ol();return this.mutations.forEach(u=>{const p=e.get(u.key),m=p.overlayedDocument;let R=this.applyToLocalView(m,p.mutatedFields);R=n.has(u.key)?null:R;const L=cl(m,R);null!==L&&o.set(u.key,L),m.isValidDocument()||m.convertToNoDocument(_n.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),or())}isEqual(e){return this.batchId===e.batchId&&Ba(this.mutations,e.mutations,(n,o)=>Uf(n,o))&&Ba(this.baseMutations,e.baseMutations,(n,o)=>Uf(n,o))}}class tg{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){fn(e.mutations.length===o.length);let u=function(){return Ah}();const p=e.mutations;for(let m=0;m<p.length;m++)u=u.insert(p[m].key,o[m].version);return new tg(e,n,o,u)}}class ng{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class bh{constructor(e,n){this.count=e,this.unchangedNames=n}}var gs,gr;function Ul(i){switch(i){default:return sn();case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0}}function Fc(i){if(void 0===i)return ri("GRPC error has no .code"),ht.UNKNOWN;switch(i){case gs.OK:return ht.OK;case gs.CANCELLED:return ht.CANCELLED;case gs.UNKNOWN:return ht.UNKNOWN;case gs.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case gs.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case gs.INTERNAL:return ht.INTERNAL;case gs.UNAVAILABLE:return ht.UNAVAILABLE;case gs.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case gs.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case gs.NOT_FOUND:return ht.NOT_FOUND;case gs.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case gs.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case gs.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case gs.ABORTED:return ht.ABORTED;case gs.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case gs.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case gs.DATA_LOSS:return ht.DATA_LOSS;default:return sn()}}(gr=gs||(gs={}))[gr.OK=0]="OK",gr[gr.CANCELLED=1]="CANCELLED",gr[gr.UNKNOWN=2]="UNKNOWN",gr[gr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gr[gr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gr[gr.NOT_FOUND=5]="NOT_FOUND",gr[gr.ALREADY_EXISTS=6]="ALREADY_EXISTS",gr[gr.PERMISSION_DENIED=7]="PERMISSION_DENIED",gr[gr.UNAUTHENTICATED=16]="UNAUTHENTICATED",gr[gr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gr[gr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gr[gr.ABORTED=10]="ABORTED",gr[gr.OUT_OF_RANGE=11]="OUT_OF_RANGE",gr[gr.UNIMPLEMENTED=12]="UNIMPLEMENTED",gr[gr.INTERNAL=13]="INTERNAL",gr[gr.UNAVAILABLE=14]="UNAVAILABLE",gr[gr.DATA_LOSS=15]="DATA_LOSS";function Lc(){return new TextEncoder}const wu=new Zi([4294967295,4294967295],0);function rg(i){const e=Lc().encode(i),n=new Jo;return n.update(e),new Uint8Array(n.digest())}function J_(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),p=e.getUint32(12,!0);return[new Zi([n,o],0),new Zi([u,p],0)]}class $o{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new jf(`Invalid padding: ${n}`);if(o<0)throw new jf(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new jf(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new jf(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Zi.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(Zi.fromNumber(o)));return 1===u.compare(wu)&&(u=new Zi([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=rg(e),[o,u]=J_(n);for(let p=0;p<this.hashCount;p++){const m=this.de(o,u,p);if(!this.Ae(m))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,p=new Uint8Array(Math.ceil(e/8)),m=new $o(p,u,n);return o.forEach(R=>m.insert(R)),m}insert(e){if(0===this.Te)return;const n=rg(e),[o,u]=J_(n);for(let p=0;p<this.hashCount;p++){const m=this.de(o,u,p);this.Re(m)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class jf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qu{constructor(e,n,o,u,p){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,Dd.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Qu(_n.min(),u,new Pi(bn),bo(),or())}}class Dd{constructor(e,n,o,u,p){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Dd(o,n,or(),or(),or())}}class Sd{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class $f{constructor(e,n){this.targetId=e,this.fe=n}}class ig{constructor(e,n,o=Os.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class X_{constructor(){this.ge=0,this.pe=Ad(),this.ye=Os.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=or(),n=or(),o=or();return this.pe.forEach((u,p)=>{switch(p){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:sn()}}),new Dd(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=Ad()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,fn(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Z_{constructor(e){this.Le=e,this.ke=new Map,this.qe=bo(),this.Qe=Ju(),this.Ke=new Pi(bn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:sn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const p=u.target;if(Yu(p))if(0===o){const m=new Kt(p.path);this.We(n,m,Hi.newNoDocument(m,_n.min()))}else fn(1===o);else{const m=this.Ze(n);if(m!==o){const R=this.Xe(e),L=R?this.et(R,e,m):1;0!==L&&(this.He(n),this.Ke=this.Ke.insert(n,2===L?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:p=0}=n;let m,R;try{m=Sa(o).toUint8Array()}catch(L){if(L instanceof bl)return mo("Decoding the base64 bloom filter in existence filter failed ("+L.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw L}try{R=new $o(m,u,p)}catch(L){return mo(L instanceof jf?"BloomFilter error: ":"Applying bloom filter failed: ",L),null}return 0===R.Te?null:R}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Le.getRemoteKeysForTarget(n);let u=0;return o.forEach(p=>{const m=this.Le.nt(),R=`projects/${m.projectId}/databases/${m.database}/documents/${p.path.canonicalString()}`;e.mightContain(R)||(this.We(n,p,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((p,m)=>{const R=this.Ye(m);if(R){if(p.current&&Yu(R.target)){const L=new Kt(R.target.path);null!==this.qe.get(L)||this.st(m,L)||this.We(m,L,Hi.newNoDocument(L,e))}p.De&&(n.set(m,p.ve()),p.Fe())}});let o=or();this.Qe.forEach((p,m)=>{let R=!0;m.forEachWhile(L=>{const $=this.Ye(L);return!$||"TargetPurposeLimboResolution"===$.purpose||(R=!1,!1)}),R&&(o=o.add(p))}),this.qe.forEach((p,m)=>m.setReadTime(e));const u=new Qu(e,n,this.Ke,this.qe,o);return this.qe=bo(),this.Qe=Ju(),this.Ke=new Pi(bn),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new X_,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new pr(bn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||Nt("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new X_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ju(){return new Pi(Kt.comparator)}function Ad(){return new Pi(Kt.comparator)}const Pd={asc:"ASCENDING",desc:"DESCENDING"},ey={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sg={and:"AND",or:"OR"};class bd{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Im(i,e){return i.useProto3Json||Ut(e)?e:{value:e}}function Md(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cm(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function na(i,e){return Md(i,e.toTimestamp())}function zi(i){return fn(!!i),_n.fromTimestamp(function(n){const o=Xc(n);return new wi(o.seconds,o.nanos)}(i))}function to(i,e){return og(i,e).canonicalString()}function og(i,e){const n=(u=i,new qr(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?n:n.child(e)}function wm(i){const e=qr.fromString(i);return fn(ug(e)),e}function Tu(i,e){return to(i.databaseId,e.path)}function Bl(i,e){const n=wm(e);if(n.get(1)!==i.databaseId.projectId)throw new bt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new bt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Kt(Tm(n))}function ag(i,e){return to(i.databaseId,e)}function cg(i){const e=wm(i);return 4===e.length?qr.emptyPath():Tm(e)}function lg(i){return new qr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Tm(i){return fn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Gf(i,e,n){return{name:Tu(i,e),fields:n.value.mapValue.fields}}function Wf(i,e,n){const o=Bl(i,e.name),u=zi(e.updateTime),p=e.createTime?zi(e.createTime):_n.min(),m=new as({mapValue:{fields:e.fields}}),R=Hi.newFoundDocument(o,u,p,m);return n&&R.setHasCommittedMutations(),n?R.setHasCommittedMutations():R}function Mh(i,e){let n;if(e instanceof ll)n={update:Gf(i,e.key,e.value)};else if(e instanceof ul)n={delete:Tu(i,e.key)};else if(e instanceof kc)n={update:Gf(i,e.key,e.data),updateMask:Du(e.fieldMask)};else{if(!(e instanceof eg))return sn();n={verify:Tu(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(p,m){const R=m.transform;if(R instanceof kl)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(R instanceof Eu)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:R.elements}};if(R instanceof Fl)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:R.elements}};if(R instanceof Iu)return{fieldPath:m.field.canonicalString(),increment:R.Ie};throw sn()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(p=e.precondition).updateTime?{updateTime:na(i,p.updateTime)}:void 0!==p.exists?{exists:p.exists}:sn()),n;var p}function Sm(i,e){const n=e.currentDocument?void 0!==(p=e.currentDocument).updateTime?ts.updateTime(zi(p.updateTime)):void 0!==p.exists?ts.exists(p.exists):ts.none():ts.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(m,R){let L=null;"setToServerValue"in R?(fn("REQUEST_TIME"===R.setToServerValue),L=new kl):"appendMissingElements"in R?L=new Eu(R.appendMissingElements.values||[]):"removeAllFromArray"in R?L=new Fl(R.removeAllFromArray.values||[]):"increment"in R?L=new Iu(m,R.increment):sn();const $=Ai.fromServerFormat(R.fieldPath);return new xc($,L)}(i,u)):[];var p;if(e.update){const u=Bl(i,e.update.name),p=new as({mapValue:{fields:e.update.fields}});if(e.updateMask){const m=new Io((e.updateMask.fieldPaths||[]).map(ne=>Ai.fromServerFormat(ne)));return new kc(u,p,m,n,o)}return new ll(u,p,n,o)}if(e.delete){const u=Bl(i,e.delete);return new ul(u,n)}if(e.verify){const u=Bl(i,e.verify);return new eg(u,n)}return sn()}function ty(i,e){return{documents:[ag(i,e.path)]}}function Hf(i,e){const n={structuredQuery:{}},o=e.path;let u;null!==e.collectionGroup?(u=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=ag(i,u);const p=function($){if(0!==$.length)return Oh(Jr.create($,"and"))}(e.filters);p&&(n.structuredQuery.where=p);const m=function($){if(0!==$.length)return $.map(ne=>{return{field:hl((Me=ne).field),direction:iy(Me.dir)};var Me})}(e.orderBy);m&&(n.structuredQuery.orderBy=m);const R=Im(i,e.limit);return null!==R&&(n.structuredQuery.limit=R),e.startAt&&(n.structuredQuery.startAt={before:($=e.startAt).inclusive,values:$.position}),e.endAt&&(n.structuredQuery.endAt=function($){return{before:!$.inclusive,values:$.position}}(e.endAt)),{ut:n,parent:u};var $}function ny(i){let e=cg(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){fn(1===o);const ne=n.from[0];ne.allDescendants?u=ne.collectionId:e=e.child(ne.collectionId)}let p=[];n.where&&(p=function(he){const Me=Mv(he);return Me instanceof Jr&&il(Me)?Me.getFilters():[Me]}(n.where));let m=[];n.orderBy&&(m=n.orderBy.map(Me=>{return new Pc(Rh((Gt=Me).field),function(Ft){switch(Ft){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Gt.direction));var Gt}));let R=null;n.limit&&(R=function(he){let Me;return Me="object"==typeof he?he.value:he,Ut(Me)?null:Me}(n.limit));let L=null;var he;n.startAt&&(L=new Bo((he=n.startAt).values||[],!!he.before));let $=null;return n.endAt&&($=function(he){return new Bo(he.values||[],!he.before)}(n.endAt)),Cd(e,u,m,p,R,"F",L,$)}function Mv(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Rh(n.unaryFilter.field);return Lr.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=Rh(n.unaryFilter.field);return Lr.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const p=Rh(n.unaryFilter.field);return Lr.create(p,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=Rh(n.unaryFilter.field);return Lr.create(m,"!=",{nullValue:"NULL_VALUE"});default:return sn()}}(i):void 0!==i.fieldFilter?Lr.create(Rh((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sn()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return Jr.create(n.compositeFilter.filters.map(o=>Mv(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return sn()}}(n.compositeFilter.op))}(i):sn();var n}function iy(i){return Pd[i]}function Pm(i){return ey[i]}function ba(i){return sg[i]}function hl(i){return{fieldPath:i.canonicalString()}}function Rh(i){return Ai.fromServerFormat(i.fieldPath)}function Oh(i){return i instanceof Lr?function(n){if("=="===n.op){if(Ih(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NAN"}};if(Mf(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Ih(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NAN"}};if(Mf(n.value))return{unaryFilter:{field:hl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(n.field),op:Pm(n.op),value:n.value}}}(i):i instanceof Jr?function(n){const o=n.getFilters().map(u=>Oh(u));return 1===o.length?o[0]:{compositeFilter:{op:ba(n.op),filters:o}}}(i):sn()}function Du(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ug(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class uc{constructor(e,n,o,u,p=_n.min(),m=_n.min(),R=Os.EMPTY_BYTE_STRING,L=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=R,this.expectedCount=L}withSequenceNumber(e){return new uc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new uc(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new uc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new uc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class dg{constructor(e){this.ct=e}}function zf(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Nh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Tu(p=i.ct,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Md(p,m.version.toTimestamp()),createTime:Md(p,m.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:dc(e.version)};else{if(!e.isUnknownDocument())return sn();o.unknownDocument={path:n.path.toArray(),version:dc(e.version)}}var p,m;return o}function Nh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function dc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xu(i){const e=new wi(i.seconds,i.nanoseconds);return _n.fromTimestamp(e)}function Rd(i,e){const n=(e.baseMutations||[]).map(p=>Sm(i.ct,p));for(let p=0;p<e.mutations.length-1;++p)p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(e.mutations[p].updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p);const o=e.mutations.map(p=>Sm(i.ct,p)),u=wi.fromMillis(e.localWriteTimeMs);return new Bf(e.batchId,u,n,o)}function fg(i){const e=Xu(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Xu(i.lastLimboFreeSnapshotVersion):_n.min();let o;return o=void 0!==i.query.documents?(fn(1===(p=i.query).documents.length),E(Oc(cg(p.documents[0])))):function(p){return E(ny(p))}(i.query),new uc(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,Os.fromBase64String(i.resumeToken));var p}function qf(i,e){const n=dc(e.snapshotVersion),o=dc(e.lastLimboFreeSnapshotVersion);let u;u=Yu(e.target)?ty(i.ct,e.target):Hf(i.ct,e.target).ut;const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:za(e.target),readTime:n,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function xh(i){const e=ny({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?oe(e,e.limit,"L"):e}function Kf(i,e){return new ng(e.largestBatchId,Sm(i.ct,e.overlayMutation))}function bm(i,e){const n=e.path.lastSegment();return[i,es(e.path.popLast()),n]}function Mm(i,e,n,o){return{indexId:i,uid:e,sequenceNumber:n,readTime:dc(o.readTime),documentKey:es(o.documentKey.path),largestBatchId:o.largestBatchId}}class Rm{getBundleMetadata(e,n){return sy(e).get(n).next(o=>{if(o)return{id:(p=o).bundleId,createTime:Xu(p.createTime),version:p.version};var p})}saveBundleMetadata(e,n){return sy(e).put({bundleId:(u=n).id,createTime:dc(zi(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return oy(e).get(n).next(o=>{if(o)return{name:(p=o).name,query:xh(p.bundledQuery),readTime:Xu(p.readTime)};var p})}saveNamedQuery(e,n){return oy(e).put({name:(u=n).name,readTime:dc(zi(u.readTime)),bundledQuery:u.bundledQuery});var u}}function sy(i){return eo(i,"bundles")}function oy(i){return eo(i,"namedQueries")}class pg{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new pg(e,n.uid||"")}getOverlay(e,n){return Yf(e).get(bm(this.userId,n)).next(o=>o?Kf(this.serializer,o):null)}getOverlays(e,n){const o=jo();return et.forEach(n,u=>this.getOverlay(e,u).next(p=>{null!==p&&o.set(u,p)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((p,m)=>{const R=new ng(n,m);u.push(this.ht(e,R))}),et.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(m=>u.add(es(m.getCollectionPath())));const p=[];return u.forEach(m=>{const R=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);p.push(Yf(e).H("collectionPathOverlayIndex",R))}),et.waitFor(p)}getOverlaysForCollection(e,n,o){const u=jo(),p=es(n),m=IDBKeyRange.bound([this.userId,p,o],[this.userId,p,Number.POSITIVE_INFINITY],!0);return Yf(e).W("collectionPathOverlayIndex",m).next(R=>{for(const L of R){const $=Kf(this.serializer,L);u.set($.getKey(),$)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const p=jo();let m;const R=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Yf(e).Y({index:"collectionGroupOverlayIndex",range:R},(L,$,ne)=>{const he=Kf(this.serializer,$);p.size()<u||he.largestBatchId===m?(p.set(he.getKey(),he),m=he.largestBatchId):ne.done()}).next(()=>p)}ht(e,n){return Yf(e).put(function(u,p,m){const[R,L,$]=bm(p,m.mutation.key);return{userId:p,collectionPath:L,documentId:$,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Mh(u.ct,m.mutation)}}(this.serializer,this.userId,n))}}function Yf(i){return eo(i,"documentOverlays")}class jl{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Cs(e.integerValue));else if("doubleValue"in e){const o=Cs(e.doubleValue);isNaN(o)?this.Et(n,13):(this.Et(n,15),nr(o)?n.dt(0):n.dt(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Et(n,20),"string"==typeof o?n.At(o):(n.At(`${o.seconds||""}`),n.dt(o.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Sa(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Et(n,45),n.dt(o.latitude||0),n.dt(o.longitude||0)}else"mapValue"in e?Ch(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):sn()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const o=e.fields||{};this.Et(n,55);for(const u of Object.keys(o))this.Rt(u,n),this.It(o[u],n)}wt(e,n){const o=e.values||[];this.Et(n,50);for(const u of o)this.It(u,n)}gt(e,n){this.Et(n,37),Kt.fromName(e).path.forEach(o=>{this.Et(n,60),this.St(o,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function $l(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Od(i){const e=64-function(o){let u=0;for(let p=0;p<8;++p){const m=$l(255&o[p]);if(u+=m,8!==m)break}return u}(i);return Math.ceil(e/8)}jl.bt=new jl;class Rv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ct(o.value),o=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Mt(o.value),o=n.next();this.xt()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ct(o);else if(o<2048)this.Ct(960|o>>>6),this.Ct(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|o>>>12),this.Ct(128|63&o>>>6),this.Ct(128|63&o);else{const u=n.codePointAt(0);this.Ct(240|u>>>18),this.Ct(128|63&u>>>12),this.Ct(128|63&u>>>6),this.Ct(128|63&u)}}this.vt()}Nt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Mt(o);else if(o<2048)this.Mt(960|o>>>6),this.Mt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|o>>>12),this.Mt(128|63&o>>>6),this.Mt(128|63&o);else{const u=n.codePointAt(0);this.Mt(240|u>>>18),this.Mt(128|63&u>>>12),this.Mt(128|63&u>>>6),this.Mt(128|63&u)}}this.xt()}Bt(e){const n=this.Lt(e),o=Od(n);this.kt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}qt(e){const n=this.Lt(e),o=Od(n);this.kt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const n=function(p){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,p,!1),new Uint8Array(m.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Om{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class Ov{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Qf{constructor(){this.Gt=new Rv,this.zt=new Om(this.Gt),this.jt=new Ov(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Nd{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Nd(this.indexId,this.documentKey,this.arrayValue,o)}}function Zu(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=gg(i.arrayValue,e.arrayValue),0!==n?n:(n=gg(i.directionalValue,e.directionalValue),0!==n?n:Kt.comparator(i.documentKey,e.documentKey)))}function gg(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Nm{constructor(e){this.Yt=new pr((n,o)=>Ai.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Yt=this.Yt.add(o):this.Xt.push(o)}}get en(){return this.Yt.size>1}tn(e){if(fn(e.collectionGroup===this.collectionId),this.en)return!1;const n=nc(e);if(void 0!==n&&!this.nn(n))return!1;const o=ha(e);let u=new Set,p=0,m=0;for(;p<o.length&&this.nn(o[p]);++p)u=u.add(o[p].fieldPath.canonicalString());if(p===o.length)return!0;if(this.Yt.size>0){const R=this.Yt.getIterator().getNext();if(!u.has(R.field.canonicalString())){const L=o[p];if(!this.rn(R,L)||!this.sn(this.Zt[m++],L))return!1}++p}for(;p<o.length;++p)if(m>=this.Zt.length||!this.sn(this.Zt[m++],o[p]))return!1;return!0}on(){if(this.en)return null;let e=new pr(Ai.comparator);const n=[];for(const o of this.Xt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new Ir(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new Ir(o.field,0))}for(const o of this.Zt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new Ir(o.field,"asc"===o.dir?0:1)));return new yo(yo.UNKNOWN_ID,this.collectionId,n,fa.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function ay(i){var e,n;if(fn(i instanceof Lr||i instanceof Jr),i instanceof Lr){if(i instanceof ac){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(p=>Lr.create(i.field,"==",p)))||[];return Jr.create(u,"or")}return i}const o=i.filters.map(u=>ay(u));return Jr.create(o,i.op)}function Nv(i){if(0===i.getFilters().length)return[];const e=xd(ay(i));return fn(Gl(e)),xm(e)||Jf(e)?[e]:e.getFilters()}function xm(i){return i instanceof Lr}function Jf(i){return i instanceof Jr&&il(i)}function Gl(i){return xm(i)||Jf(i)||function(n){if(n instanceof Jr&&rl(n)){for(const o of n.getFilters())if(!xm(o)&&!Jf(o))return!1;return!0}return!1}(i)}function xd(i){if(fn(i instanceof Lr||i instanceof Jr),i instanceof Lr)return i;if(1===i.filters.length)return xd(i.filters[0]);const e=i.filters.map(o=>xd(o));let n=Jr.create(e,i.op);return n=Xf(n),Gl(n)?n:(fn(n instanceof Jr),fn(Ha(n)),fn(n.filters.length>1),n.filters.reduce((o,u)=>mg(o,u)))}function mg(i,e){let n;return fn(i instanceof Lr||i instanceof Jr),fn(e instanceof Lr||e instanceof Jr),n=i instanceof Lr?e instanceof Lr?Jr.create([i,e],"and"):km(i,e):e instanceof Lr?km(e,i):function(u,p){if(fn(u.filters.length>0&&p.filters.length>0),Ha(u)&&Ha(p))return Of(u,p.getFilters());const m=rl(u)?u:p,R=rl(u)?p:u,L=m.filters.map($=>mg($,R));return Jr.create(L,"or")}(i,e),Xf(n)}function km(i,e){if(Ha(e))return Of(e,i.getFilters());{const n=e.filters.map(o=>mg(i,o));return Jr.create(n,"or")}}function Xf(i){if(fn(i instanceof Lr||i instanceof Jr),i instanceof Lr)return i;const e=i.getFilters();if(1===e.length)return Xf(e[0]);if(Ku(i))return i;const n=e.map(u=>Xf(u)),o=[];return n.forEach(u=>{u instanceof Lr?o.push(u):u instanceof Jr&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:Jr.create(o,i.op)}class cI{constructor(){this._n=new cy}addToCollectionParentIndex(e,n){return this._n.add(n),et.resolve()}getCollectionParents(e,n){return et.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return et.resolve()}deleteFieldIndex(e,n){return et.resolve()}deleteAllFieldIndexes(e){return et.resolve()}createTargetIndexes(e,n){return et.resolve()}getDocumentsMatchingTarget(e,n){return et.resolve(null)}getIndexType(e,n){return et.resolve(0)}getFieldIndexes(e,n){return et.resolve([])}getNextCollectionGroupToUpdate(e){return et.resolve(null)}getMinOffset(e,n){return et.resolve(Rs.min())}getMinOffsetFromCollectionGroup(e,n){return et.resolve(Rs.min())}updateCollectionGroup(e,n,o){return et.resolve()}updateIndexEntries(e,n){return et.resolve()}}class cy{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new pr(qr.comparator),p=!u.has(o);return this.index[n]=u.add(o),p}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new pr(qr.comparator)).toArray()}}const Fm=new Uint8Array(0);class Lm{constructor(e,n){this.databaseId=n,this.an=new cy,this.un=new Ts(o=>za(o),(o,u)=>Nl(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const p={collectionId:o,parent:es(u)};return _g(e).put(p)}return et.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[da(n),""],!1,!0);return _g(e).W(u).next(p=>{for(const m of p){if(m.collectionId!==n)break;o.push(Ao(m.parent))}return o})}addFieldIndex(e,n){const o=yg(e),u={indexId:(R=n).indexId,collectionGroup:R.collectionGroup,fields:R.fields.map(L=>[L.fieldPath.canonicalString(),L.kind])};var R;delete u.indexId;const p=o.add(u);if(n.indexState){const m=kd(e);return p.next(R=>{m.put(Mm(R,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return p.next()}deleteFieldIndex(e,n){const o=yg(e),u=kd(e),p=Zf(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=yg(e),o=Zf(e),u=kd(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return et.forEach(this.cn(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const p=new Nm(o).on();if(null!=p)return this.addFieldIndex(e,p)}}))}getDocumentsMatchingTarget(e,n){const o=Zf(e);let u=!0;const p=new Map;return et.forEach(this.cn(n),m=>this.ln(e,m).next(R=>{u&&(u=!!R),p.set(m,R)})).next(()=>{if(u){let m=or();const R=[];return et.forEach(p,(L,$)=>{var On;Nt("IndexedDbIndexManager",`Using index ${On=L,`id=${On.indexId}|cg=${On.collectionGroup}|f=${On.fields.map(fr=>`${fr.fieldPath}:${fr.kind}`).join(",")}`} to execute ${za(n)}`);const ne=function(On,fr){const mi=nc(fr);if(void 0===mi)return null;for(const Mi of qa(On,mi.fieldPath))switch(Mi.op){case"array-contains-any":return Mi.value.arrayValue.values||[];case"array-contains":return[Mi.value]}return null}($,L),he=function(On,fr){const mi=new Map;for(const Mi of ha(fr))for(const ro of qa(On,Mi.fieldPath))switch(ro.op){case"==":case"in":mi.set(Mi.fieldPath.canonicalString(),ro.value);break;case"not-in":case"!=":return mi.set(Mi.fieldPath.canonicalString(),ro.value),Array.from(mi.values())}return null}($,L),Me=function(On,fr){const mi=[];let Mi=!0;for(const ro of ha(fr)){const Wc=0===ro.kind?Dh(On,ro.fieldPath,On.startAt):Id(On,ro.fieldPath,On.startAt);mi.push(Wc.value),Mi&&(Mi=Wc.inclusive)}return new Bo(mi,Mi)}($,L),Qe=function(On,fr){const mi=[];let Mi=!0;for(const ro of ha(fr)){const Wc=0===ro.kind?Id(On,ro.fieldPath,On.endAt):Dh(On,ro.fieldPath,On.endAt);mi.push(Wc.value),Mi&&(Mi=Wc.inclusive)}return new Bo(mi,Mi)}($,L),Gt=this.hn(L,$,Me),an=this.hn(L,$,Qe),Ft=this.Pn(L,$,he),Rn=this.In(L.indexId,ne,Gt,Me.inclusive,an,Qe.inclusive,Ft);return et.forEach(Rn,lr=>o.j(lr,n.limit).next(On=>{On.forEach(fr=>{const mi=Kt.fromSegments(fr.documentKey);m.has(mi)||(m=m.add(mi),R.push(mi))})}))}).next(()=>R)}return et.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:Nv(Jr.create(e.filters,"and")).map(o=>Ol(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,o,u,p,m,R){const L=(null!=n?n.length:1)*Math.max(o.length,p.length),$=L/(null!=n?n.length:1),ne=[];for(let he=0;he<L;++he){const Me=n?this.Tn(n[he/$]):Fm,Qe=this.En(e,Me,o[he%$],u),Gt=this.dn(e,Me,p[he%$],m),an=R.map(Ft=>this.En(e,Me,Ft,!0));ne.push(...this.createRange(Qe,Gt,an))}return ne}En(e,n,o,u){const p=new Nd(e,Kt.empty(),n,o);return u?p:p.Jt()}dn(e,n,o,u){const p=new Nd(e,Kt.empty(),n,o);return u?p.Jt():p}ln(e,n){const o=new Nm(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(p=>{let m=null;for(const R of p)o.tn(R)&&(!m||R.fields.length>m.fields.length)&&(m=R);return m})}getIndexType(e,n){let o=2;const u=this.cn(n);return et.forEach(u,p=>this.ln(e,p).next(m=>{m?0!==o&&m.fields.length<function(L){let $=new pr(Ai.comparator),ne=!1;for(const he of L.filters)for(const Me of he.getFlattenedFilters())Me.field.isKeyField()||("array-contains"===Me.op||"array-contains-any"===Me.op?ne=!0:$=$.add(Me.field));for(const he of L.orderBy)he.field.isKeyField()||($=$.add(he.field));return $.size+(ne?1:0)}(p)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}An(e,n){const o=new Qf;for(const u of ha(e)){const p=n.data.field(u.fieldPath);if(null==p)return null;const m=o.Ht(u.kind);jl.bt.Pt(p,m)}return o.Wt()}Tn(e){const n=new Qf;return jl.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const o=new Qf;return jl.bt.Pt(Wa(this.databaseId,n),o.Ht(function(p){const m=ha(p);return 0===m.length?0:m[m.length-1].kind}(e))),o.Wt()}Pn(e,n,o){if(null===o)return[];let u=[];u.push(new Qf);let p=0;for(const m of ha(e)){const R=o[p++];for(const L of u)if(this.Vn(n,m.fieldPath)&&oc(R))u=this.mn(u,m,R);else{const $=L.Ht(m.kind);jl.bt.Pt(R,$)}}return this.fn(u)}hn(e,n,o){return this.Pn(e,n,o.position)}fn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Wt();return n}mn(e,n,o){const u=[...e],p=[];for(const m of o.arrayValue.values||[])for(const R of u){const L=new Qf;L.seed(R.Wt()),jl.bt.Pt(m,L.Ht(n.kind)),p.push(L)}return p}Vn(e,n){return!!e.filters.find(o=>o instanceof Lr&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=yg(e),u=kd(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(p=>{const m=[];return et.forEach(p,R=>u.get([R.indexId,this.uid]).next(L=>{m.push(function(ne,he){const Me=he?new fa(he.sequenceNumber,new Rs(Xu(he.readTime),new Kt(Ao(he.documentKey)),he.largestBatchId)):fa.empty(),Qe=ne.fields.map(([Gt,an])=>new Ir(Ai.fromServerFormat(Gt),an));return new yo(ne.indexId,ne.collectionGroup,Qe,Me)}(R,L))})).next(()=>m)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const p=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==p?p:bn(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=yg(e),p=kd(e);return this.gn(e).next(m=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(R=>et.forEach(R,L=>p.put(Mm(L.indexId,this.uid,m,o)))))}updateIndexEntries(e,n){const o=new Map;return et.forEach(n,(u,p)=>{const m=o.get(u.collectionGroup);return(m?et.resolve(m):this.getFieldIndexes(e,u.collectionGroup)).next(R=>(o.set(u.collectionGroup,R),et.forEach(R,L=>this.pn(e,u,L).next($=>{const ne=this.yn(p,L);return $.isEqual(ne)?et.resolve():this.wn(e,p,L,$,ne)}))))})}Sn(e,n,o,u){return Zf(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.Rn(o,n.key),documentKey:n.key.path.toArray()})}bn(e,n,o,u){return Zf(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.Rn(o,n.key),n.key.path.toArray()])}pn(e,n,o){const u=Zf(e);let p=new pr(Zu);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.Rn(o,n)])},(m,R)=>{p=p.add(new Nd(o.indexId,n,R.arrayValue,R.directionalValue))}).next(()=>p)}yn(e,n){let o=new pr(Zu);const u=this.An(n,e);if(null==u)return o;const p=nc(n);if(null!=p){const m=e.data.field(p.fieldPath);if(oc(m))for(const R of m.arrayValue.values||[])o=o.add(new Nd(n.indexId,e.key,this.Tn(R),u))}else o=o.add(new Nd(n.indexId,e.key,Fm,u));return o}wn(e,n,o,u,p){Nt("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const m=[];return function(L,$,ne,he,Me){const Qe=L.getIterator(),Gt=$.getIterator();let an=wr(Qe),Ft=wr(Gt);for(;an||Ft;){let Rn=!1,lr=!1;if(an&&Ft){const On=ne(an,Ft);On<0?lr=!0:On>0&&(Rn=!0)}else null!=an?lr=!0:Rn=!0;Rn?(he(Ft),Ft=wr(Gt)):lr?(Me(an),an=wr(Qe)):(an=wr(Qe),Ft=wr(Gt))}}(u,p,Zu,R=>{m.push(this.Sn(e,n,o,R))},R=>{m.push(this.bn(e,n,o,R))}),et.waitFor(m)}gn(e){let n=1;return kd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,p)=>{p.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((m,R)=>Zu(m,R)).filter((m,R,L)=>!R||0!==Zu(m,L[R-1]));const u=[];u.push(e);for(const m of o){const R=Zu(m,e),L=Zu(m,n);if(0===R)u[0]=e.Jt();else if(R>0&&L<0)u.push(m),u.push(m.Jt());else if(L>0)break}u.push(n);const p=[];for(let m=0;m<u.length;m+=2){if(this.Dn(u[m],u[m+1]))return[];p.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Fm,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Fm,[]]))}return p}Dn(e,n){return Zu(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Vm)}getMinOffset(e,n){return et.mapArray(this.cn(n),o=>this.ln(e,o).next(u=>u||sn())).next(Vm)}}function _g(i){return eo(i,"collectionParents")}function Zf(i){return eo(i,"indexEntries")}function yg(i){return eo(i,"indexConfiguration")}function kd(i){return eo(i,"indexState")}function Vm(i){fn(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;Tl(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new Rs(e.readTime,e.documentKey,n)}const ly={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ga{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new ga(e,ga.DEFAULT_COLLECTION_PERCENTILE,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function uy(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),p=[],m=IDBKeyRange.only(n.batchId);let R=0;const L=o.Y({range:m},(ne,he,Me)=>(R++,Me.delete()));p.push(L.next(()=>{fn(1===R)}));const $=[];for(const ne of n.mutations){const he=ju(e,ne.key.path,n.batchId);p.push(u.delete(he)),$.push(ne.key)}return et.waitFor(p).next(()=>$)}function ep(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw sn();e=i.noDocument}return JSON.stringify(e).length}ga.DEFAULT_COLLECTION_PERCENTILE=10,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ga.DEFAULT=new ga(41943040,ga.DEFAULT_COLLECTION_PERCENTILE,ga.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ga.DISABLED=new ga(-1,0,0);class Fd{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Cn={}}static lt(e,n,o,u){fn(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new Fd(p,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wl(e).Y({index:"userMutationsIndex",range:o},(u,p,m)=>{n=!1,m.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const p=kh(e),m=Wl(e);return m.add({}).next(R=>{fn("number"==typeof R);const L=new Bf(R,n,o,u),$=function(Qe,Gt,an){const Ft=an.baseMutations.map(lr=>Mh(Qe.ct,lr)),Rn=an.mutations.map(lr=>Mh(Qe.ct,lr));return{userId:Gt,batchId:an.batchId,localWriteTimeMs:an.localWriteTime.toMillis(),baseMutations:Ft,mutations:Rn}}(this.serializer,this.userId,L),ne=[];let he=new pr((Me,Qe)=>bn(Me.canonicalString(),Qe.canonicalString()));for(const Me of u){const Qe=ju(this.userId,Me.key.path,R);he=he.add(Me.key.path.popLast()),ne.push(m.put($)),ne.push(p.put(Qe,$u))}return he.forEach(Me=>{ne.push(this.indexManager.addToCollectionParentIndex(e,Me))}),e.addOnCommittedListener(()=>{this.Cn[R]=L.keys()}),et.waitFor(ne).next(()=>L)})}lookupMutationBatch(e,n){return Wl(e).get(n).next(o=>o?(fn(o.userId===this.userId),Rd(this.serializer,o)):null)}vn(e,n){return this.Cn[n]?et.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Cn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let p=null;return Wl(e).Y({index:"userMutationsIndex",range:u},(m,R,L)=>{R.userId===this.userId&&(fn(R.batchId>=o),p=Rd(this.serializer,R)),L.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Wl(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,p,m)=>{o=p.batchId,m.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wl(e).W("userMutationsIndex",n).next(o=>o.map(u=>Rd(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=Dl(this.userId,n.path),u=IDBKeyRange.lowerBound(o),p=[];return kh(e).Y({range:u},(m,R,L)=>{const[$,ne,he]=m,Me=Ao(ne);if($===this.userId&&n.path.isEqual(Me))return Wl(e).get(he).next(Qe=>{if(!Qe)throw sn();fn(Qe.userId===this.userId),p.push(Rd(this.serializer,Qe))});L.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new pr(bn);const u=[];return n.forEach(p=>{const m=Dl(this.userId,p.path),R=IDBKeyRange.lowerBound(m),L=kh(e).Y({range:R},($,ne,he)=>{const[Me,Qe,Gt]=$,an=Ao(Qe);Me===this.userId&&p.path.isEqual(an)?o=o.add(Gt):he.done()});u.push(L)}),et.waitFor(u).next(()=>this.Fn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,p=Dl(this.userId,o),m=IDBKeyRange.lowerBound(p);let R=new pr(bn);return kh(e).Y({range:m},(L,$,ne)=>{const[he,Me,Qe]=L,Gt=Ao(Me);he===this.userId&&o.isPrefixOf(Gt)?Gt.length===u&&(R=R.add(Qe)):ne.done()}).next(()=>this.Fn(e,R))}Fn(e,n){const o=[],u=[];return n.forEach(p=>{u.push(Wl(e).get(p).next(m=>{if(null===m)throw sn();fn(m.userId===this.userId),o.push(Rd(this.serializer,m))}))}),et.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return uy(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),et.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return et.resolve();const o=IDBKeyRange.lowerBound(function(m){return[m]}(this.userId)),u=[];return kh(e).Y({range:o},(p,m,R)=>{if(p[0]===this.userId){const L=Ao(p[1]);u.push(L)}else R.done()}).next(()=>{fn(0===u.length)})})}containsKey(e,n){return dy(e,this.userId,n)}xn(e){return Ld(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function dy(i,e,n){const o=Dl(e,n.path),u=o[1],p=IDBKeyRange.lowerBound(o);let m=!1;return kh(i).Y({range:p,J:!0},(R,L,$)=>{const[ne,he,Me]=R;ne===e&&he===u&&(m=!0),$.done()}).next(()=>m)}function Wl(i){return eo(i,"mutations")}function kh(i){return eo(i,"documentMutations")}function Ld(i){return eo(i,"mutationQueues")}class Vd{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Vd(0)}static Bn(){return new Vd(-1)}}class xv{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{const o=new Vd(n.highestTargetId);return n.highestTargetId=o.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>_n.fromTimestamp(new wi(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Ln(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.kn(e,u)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(o=>(o.targetCount+=1,this.Qn(n,o),this.kn(e,o))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ed(e).delete(n.targetId)).next(()=>this.Ln(e)).next(o=>(fn(o.targetCount>0),o.targetCount-=1,this.kn(e,o)))}removeTargets(e,n,o){let u=0;const p=[];return ed(e).Y((m,R)=>{const L=fg(R);L.sequenceNumber<=n&&null===o.get(L.targetId)&&(u++,p.push(this.removeTargetData(e,L)))}).next(()=>et.waitFor(p)).next(()=>u)}forEachTarget(e,n){return ed(e).Y((o,u)=>{const p=fg(u);n(p)})}Ln(e){return Um(e).get("targetGlobalKey").next(n=>(fn(null!==n),n))}kn(e,n){return Um(e).put("targetGlobalKey",n)}qn(e,n){return ed(e).put(qf(this.serializer,n))}Qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){const o=za(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let p=null;return ed(e).Y({range:u,index:"queryTargetsIndex"},(m,R,L)=>{const $=fg(R);Nl(n,$.target)&&(p=$,L.done())}).next(()=>p)}addMatchingKeys(e,n,o){const u=[],p=td(e);return n.forEach(m=>{const R=es(m.path);u.push(p.put({targetId:o,path:R})),u.push(this.referenceDelegate.addReference(e,o,m))}),et.waitFor(u)}removeMatchingKeys(e,n,o){const u=td(e);return et.forEach(n,p=>{const m=es(p.path);return et.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(e,o,p)])})}removeMatchingKeysForTargetId(e,n){const o=td(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=td(e);let p=or();return u.Y({range:o,J:!0},(m,R,L)=>{const $=Ao(m[1]),ne=new Kt($);p=p.add(ne)}).next(()=>p)}containsKey(e,n){const o=es(n.path),u=IDBKeyRange.bound([o],[da(o)],!1,!0);let p=0;return td(e).Y({index:"documentTargetsIndex",J:!0,range:u},([m,R],L,$)=>{0!==m&&(p++,$.done())}).next(()=>p>0)}_t(e,n){return ed(e).get(n).next(o=>o?fg(o):null)}}function ed(i){return eo(i,"targets")}function Um(i){return eo(i,"targetGlobal")}function td(i){return eo(i,"targetDocuments")}function hy([i,e],[n,o]){const u=bn(i,n);return 0===u?bn(e,o):u}class kv{constructor(e){this.Kn=e,this.buffer=new pr(hy),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();hy(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fy{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;Nt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.c)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){A(o)?Nt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield vo(o)}yield n.zn(3e5)}))}}class py{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return et.resolve($t._e);const o=new kv(n);return this.jn.forEachTarget(e,u=>o.Wn(u.sequenceNumber)).next(()=>this.jn.Jn(e,u=>o.Wn(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.jn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Nt("LruGarbageCollector","Garbage collection skipped; disabled"),et.resolve(ly)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(Nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ly):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let o,u,p,m,R,L,$;const ne=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(he=>(he>this.params.maximumSequenceNumbersToCollect?(Nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${he}`),u=this.params.maximumSequenceNumbersToCollect):u=he,m=Date.now(),this.nthSequenceNumber(e,u))).next(he=>(o=he,R=Date.now(),this.removeTargets(e,o,n))).next(he=>(p=he,L=Date.now(),this.removeOrphanedDocuments(e,o))).next(he=>($=Date.now(),Vo()<=pe.Ge.DEBUG&&Nt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-ne}ms\n\tDetermined least recently used ${u} in `+(R-m)+`ms\n\tRemoved ${p} targets in `+(L-R)+`ms\n\tRemoved ${he} documents in `+($-L)+`ms\nTotal Duration: ${$-ne}ms`),et.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:p,documentsRemoved:he})))}}class lI{constructor(e,n){this.db=e,this.garbageCollector=function Fv(i,e){return new py(i,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Zn(e){let n=0;return this.Jn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(o,u)=>n(u))}addReference(e,n,o){return nd(e,o)}removeReference(e,n,o){return nd(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return nd(e,n)}er(e,n){return function(u,p){let m=!1;return Ld(u).Z(R=>dy(u,R,p).next(L=>(L&&(m=!0),et.resolve(!L)))).next(()=>m)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let p=0;return this.Xn(e,(m,R)=>{if(R<=n){const L=this.er(e,m).next($=>{if(!$)return p++,o.getEntry(e,m).next(()=>(o.removeEntry(m,_n.min()),td(e).delete([0,es(m.path)])))});u.push(L)}}).next(()=>et.waitFor(u)).next(()=>o.apply(e)).next(()=>p)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return nd(e,n)}Xn(e,n){const o=td(e);let u,p=$t._e;return o.Y({index:"documentTargetsIndex"},([m,R],{path:L,sequenceNumber:$})=>{0===m?(p!==$t._e&&n(new Kt(Ao(u)),p),p=$,u=L):p=$t._e}).next(()=>{p!==$t._e&&n(new Kt(Ao(u)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nd(i,e){return td(i).put((u=i.currentSequenceNumber,{targetId:0,path:es(e.path),sequenceNumber:u}));var u}class gy{constructor(){this.changes=new Ts(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Hi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?et.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Lv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return Ud(e).put(o)}removeEntry(e,n,o){return Ud(e).delete(function(p,m){const R=p.path.toArray();return[R.slice(0,R.length-2),R[R.length-2],Nh(m),R[R.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.tr(e,o)))}getEntry(e,n){let o=Hi.newInvalidDocument(n);return Ud(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(tp(n))},(u,p)=>{o=this.nr(n,p)}).next(()=>o)}rr(e,n){let o={size:0,document:Hi.newInvalidDocument(n)};return Ud(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(tp(n))},(u,p)=>{o={document:this.nr(n,p),size:ep(p)}}).next(()=>o)}getEntries(e,n){let o=bo();return this.ir(e,n,(u,p)=>{const m=this.nr(u,p);o=o.insert(u,m)}).next(()=>o)}sr(e,n){let o=bo(),u=new Pi(Kt.comparator);return this.ir(e,n,(p,m)=>{const R=this.nr(p,m);o=o.insert(p,R),u=u.insert(p,ep(m))}).next(()=>({documents:o,_r:u}))}ir(e,n,o){if(n.isEmpty())return et.resolve();let u=new pr(np);n.forEach(L=>u=u.add(L));const p=IDBKeyRange.bound(tp(u.first()),tp(u.last())),m=u.getIterator();let R=m.getNext();return Ud(e).Y({index:"documentKeyIndex",range:p},(L,$,ne)=>{const he=Kt.fromSegments([...$.prefixPath,$.collectionGroup,$.documentId]);for(;R&&np(R,he)<0;)o(R,null),R=m.getNext();R&&R.isEqual(he)&&(o(R,$),R=m.hasNext()?m.getNext():null),R?ne.U(tp(R)):ne.done()}).next(()=>{for(;R;)o(R,null),R=m.hasNext()?m.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,p){const m=n.path,R=[m.popLast().toArray(),m.lastSegment(),Nh(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],L=[m.popLast().toArray(),m.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ud(e).W(IDBKeyRange.bound(R,L,!0)).next($=>{p?.incrementDocumentReadCount($.length);let ne=bo();for(const he of $){const Me=this.nr(Kt.fromSegments(he.prefixPath.concat(he.collectionGroup,he.documentId)),he);Me.isFoundDocument()&&(hn(n,Me)||u.has(Me.key))&&(ne=ne.insert(Me.key,Me))}return ne})}getAllFromCollectionGroup(e,n,o,u){let p=bo();const m=vy(n,o),R=vy(n,Rs.max());return Ud(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,R,!0)},(L,$,ne)=>{const he=this.nr(Kt.fromSegments($.prefixPath.concat($.collectionGroup,$.documentId)),$);p=p.insert(he.key,he),p.size===u&&ne.done()}).next(()=>p)}newChangeBuffer(e){return new _y(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return yy(e).get("remoteDocumentGlobalKey").next(n=>(fn(!!n),n))}tr(e,n){return yy(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const o=function hg(i,e){let n;if(e.document)n=Wf(i.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Kt.fromSegments(e.noDocument.path),u=Xu(e.noDocument.readTime);n=Hi.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return sn();{const o=Kt.fromSegments(e.unknownDocument.path),u=Xu(e.unknownDocument.version);n=Hi.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const p=new wi(u[0],u[1]);return _n.fromTimestamp(p)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(_n.min()))return o}return Hi.newInvalidDocument(e)}}function my(i){return new Lv(i)}class _y extends gy{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Ts(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new pr((p,m)=>bn(p.canonicalString(),m.canonicalString()));return this.changes.forEach((p,m)=>{const R=this.ur.get(p);if(n.push(this.ar.removeEntry(e,p,R.readTime)),m.isValidDocument()){const L=zf(this.ar.serializer,m);u=u.add(p.path.popLast());const $=ep(L);o+=$-R.size,n.push(this.ar.addEntry(e,p,L))}else if(o-=R.size,this.trackRemovals){const L=zf(this.ar.serializer,m.convertToNoDocument(_n.min()));n.push(this.ar.addEntry(e,p,L))}}),u.forEach(p=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,p))}),n.push(this.ar.updateMetadata(e,o)),et.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(o=>(this.ur.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:o,_r:u})=>(u.forEach((p,m)=>{this.ur.set(p,{size:m,readTime:o.get(p).readTime})}),o))}}function yy(i){return eo(i,"remoteDocumentGlobal")}function Ud(i){return eo(i,"remoteDocumentsV14")}function tp(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vy(i,e){const n=e.documentKey.path.toArray();return[i,Nh(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function np(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let p=0;p<n.length-2&&p<o.length-2;++p)if(u=bn(n[p],o[p]),u)return u;return u=bn(n.length,o.length),u||(u=bn(n[n.length-2],o[o.length-2]),u||bn(n[n.length-1],o[o.length-1]))}class Ey{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Bm{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&Ll(o.mutation,u,Io.empty(),wi.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,or()).next(()=>o))}getLocalViewOfDocuments(e,n,o=or()){const u=jo();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(p=>{let m=Nc();return p.forEach((R,L)=>{m=m.insert(R,L.overlayedDocument)}),m}))}getOverlayedDocuments(e,n){const o=jo();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,or()))}populateOverlays(e,n,o){const u=[];return o.forEach(p=>{n.has(p)||u.push(p)}),this.documentOverlayCache.getOverlays(e,u).next(p=>{p.forEach((m,R)=>{n.set(m,R)})})}computeViews(e,n,o,u){let p=bo();const m=vu(),R=vu();return n.forEach((L,$)=>{const ne=o.get($.key);u.has($.key)&&(void 0===ne||ne.mutation instanceof kc)?p=p.insert($.key,$):void 0!==ne?(m.set($.key,ne.mutation.getFieldMask()),Ll(ne.mutation,$,ne.mutation.getFieldMask(),wi.now())):m.set($.key,Io.empty())}),this.recalculateAndSaveOverlays(e,p).next(L=>(L.forEach(($,ne)=>m.set($,ne)),n.forEach(($,ne)=>{var he;return R.set($,new Ey(ne,null!==(he=m.get($))&&void 0!==he?he:null))}),R))}recalculateAndSaveOverlays(e,n){const o=vu();let u=new Pi((m,R)=>m-R),p=or();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(m=>{for(const R of m)R.keys().forEach(L=>{const $=n.get(L);if(null===$)return;let ne=o.get(L)||Io.empty();ne=R.applyToLocalView($,ne),o.set(L,ne);const he=(u.get(R.batchId)||or()).add(L);u=u.insert(R.batchId,he)})}).next(()=>{const m=[],R=u.getReverseIterator();for(;R.hasNext();){const L=R.getNext(),$=L.key,ne=L.value,he=ol();ne.forEach(Me=>{if(!p.has(Me)){const Qe=cl(n.get(Me),o.get(Me));null!==Qe&&he.set(Me,Qe),p=p.add(Me)}}),m.push(this.documentOverlayCache.saveOverlays(e,$,he))}return et.waitFor(m)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return Kt.isDocumentKey((m=n).path)&&null===m.collectionGroup&&0===m.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):S(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var m}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(p=>{const m=u-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-p.size):et.resolve(jo());let R=-1,L=p;return m.next($=>et.forEach($,(ne,he)=>(R<he.largestBatchId&&(R=he.largestBatchId),p.get(ne)?et.resolve():this.remoteDocumentCache.getEntry(e,ne).next(Me=>{L=L.insert(ne,Me)}))).next(()=>this.populateOverlays(e,$,p)).next(()=>this.computeViews(e,L,$,or())).next(ne=>({batchId:R,changes:Sh(ne)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Kt(n)).next(o=>{let u=Nc();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const p=n.collectionGroup;let m=Nc();return this.indexManager.getCollectionParents(e,p).next(R=>et.forEach(R,L=>{const $=(he=n,Me=L.child(p),new lc(Me,null,he.explicitOrderBy.slice(),he.filters.slice(),he.limit,he.limitType,he.startAt,he.endAt));var he,Me;return this.getDocumentsMatchingCollectionQuery(e,$,o,u).next(ne=>{ne.forEach((he,Me)=>{m=m.insert(he,Me)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,n,o,u){let p;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(m=>(p=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,p,u))).next(m=>{p.forEach((L,$)=>{const ne=$.getKey();null===m.get(ne)&&(m=m.insert(ne,Hi.newInvalidDocument(ne)))});let R=Nc();return m.forEach((L,$)=>{const ne=p.get(L);void 0!==ne&&Ll(ne.mutation,$,Io.empty(),wi.now()),hn(n,$)&&(R=R.insert(L,$))}),R})}}class Iy{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return et.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(u=n).id,version:u.version,createTime:zi(u.createTime)}),et.resolve();var u}getNamedQuery(e,n){return et.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(u=n).name,query:xh(u.bundledQuery),readTime:zi(u.readTime)}),et.resolve();var u}}class jm{constructor(){this.overlays=new Pi(Kt.comparator),this.hr=new Map}getOverlay(e,n){return et.resolve(this.overlays.get(n))}getOverlays(e,n){const o=jo();return et.forEach(n,u=>this.getOverlay(e,u).next(p=>{null!==p&&o.set(u,p)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,p)=>{this.ht(e,n,p)}),et.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.hr.get(o);return void 0!==u&&(u.forEach(p=>this.overlays=this.overlays.remove(p)),this.hr.delete(o)),et.resolve()}getOverlaysForCollection(e,n,o){const u=jo(),p=n.length+1,m=new Kt(n.child("")),R=this.overlays.getIteratorFrom(m);for(;R.hasNext();){const L=R.getNext().value,$=L.getKey();if(!n.isPrefixOf($.path))break;$.path.length===p&&L.largestBatchId>o&&u.set(L.getKey(),L)}return et.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let p=new Pi(($,ne)=>$-ne);const m=this.overlays.getIterator();for(;m.hasNext();){const $=m.getNext().value;if($.getKey().getCollectionGroup()===n&&$.largestBatchId>o){let ne=p.get($.largestBatchId);null===ne&&(ne=jo(),p=p.insert($.largestBatchId,ne)),ne.set($.getKey(),$)}}const R=jo(),L=p.getIterator();for(;L.hasNext()&&(L.getNext().value.forEach(($,ne)=>R.set($,ne)),!(R.size()>=u)););return et.resolve(R)}ht(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const m=this.hr.get(u.largestBatchId).delete(o.key);this.hr.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new ng(n,o));let p=this.hr.get(n);void 0===p&&(p=or(),this.hr.set(n,p)),this.hr.set(n,p.add(o.key))}}class vg{constructor(){this.Pr=new pr(Ro.Ir),this.Tr=new pr(Ro.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const o=new Ro(e,n);this.Pr=this.Pr.add(o),this.Tr=this.Tr.add(o)}dr(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.Ar(new Ro(e,n))}Rr(e,n){e.forEach(o=>this.removeReference(o,n))}Vr(e){const n=new Kt(new qr([])),o=new Ro(n,e),u=new Ro(n,e+1),p=[];return this.Tr.forEachInRange([o,u],m=>{this.Ar(m),p.push(m.key)}),p}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Kt(new qr([])),o=new Ro(n,e),u=new Ro(n,e+1);let p=or();return this.Tr.forEachInRange([o,u],m=>{p=p.add(m.key)}),p}containsKey(e){const n=new Ro(e,0),o=this.Pr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Ro{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Kt.comparator(e.key,n.key)||bn(e.pr,n.pr)}static Er(e,n){return bn(e.pr,n.pr)||Kt.comparator(e.key,n.key)}}class ma{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new pr(Ro.Ir)}checkEmpty(e){return et.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const p=this.yr;this.yr++;const m=new Bf(p,n,o,u);this.mutationQueue.push(m);for(const R of u)this.wr=this.wr.add(new Ro(R.key,p)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return et.resolve(m)}lookupMutationBatch(e,n){return et.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.br(n+1),p=u<0?0:u;return et.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Ro(n,0),u=new Ro(n,Number.POSITIVE_INFINITY),p=[];return this.wr.forEachInRange([o,u],m=>{const R=this.Sr(m.pr);p.push(R)}),et.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new pr(bn);return n.forEach(u=>{const p=new Ro(u,0),m=new Ro(u,Number.POSITIVE_INFINITY);this.wr.forEachInRange([p,m],R=>{o=o.add(R.pr)})}),et.resolve(this.Dr(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let p=o;Kt.isDocumentKey(p)||(p=p.child(""));const m=new Ro(new Kt(p),0);let R=new pr(bn);return this.wr.forEachWhile(L=>{const $=L.key.path;return!!o.isPrefixOf($)&&($.length===u&&(R=R.add(L.pr)),!0)},m),et.resolve(this.Dr(R))}Dr(e){const n=[];return e.forEach(o=>{const u=this.Sr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){fn(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.wr;return et.forEach(n.mutations,u=>{const p=new Ro(u.key,n.batchId);return o=o.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.wr=o})}Mn(e){}containsKey(e,n){const o=new Ro(n,0),u=this.wr.firstAfterOrEqual(o);return et.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return et.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Vn{constructor(e){this.vr=e,this.docs=new Pi(Kt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),p=u?u.size:0,m=this.vr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:m}),this.size+=m-p,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return et.resolve(o?o.document.mutableCopy():Hi.newInvalidDocument(n))}getEntries(e,n){let o=bo();return n.forEach(u=>{const p=this.docs.get(u);o=o.insert(u,p?p.document.mutableCopy():Hi.newInvalidDocument(u))}),et.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let p=bo();const m=n.path,R=new Kt(m.child("")),L=this.docs.getIteratorFrom(R);for(;L.hasNext();){const{key:$,value:{document:ne}}=L.getNext();if(!m.isPrefixOf($.path))break;$.path.length>m.length+1||Tl(Zo(ne),o)<=0||(u.has(ne.key)||hn(n,ne))&&(p=p.insert(ne.key,ne.mutableCopy()))}return et.resolve(p)}getAllFromCollectionGroup(e,n,o,u){sn()}Fr(e,n){return et.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new Cy(this)}getSize(e){return et.resolve(this.size)}}class Cy extends gy{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this.ar.addEntry(e,u)):this.ar.removeEntry(o)}),et.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class rp{constructor(e){this.persistence=e,this.Mr=new Ts(n=>za(n),Nl),this.lastRemoteSnapshotVersion=_n.min(),this.highestTargetId=0,this.Or=0,this.Nr=new vg,this.targetCount=0,this.Br=Vd.Nn()}forEachTarget(e,n){return this.Mr.forEach((o,u)=>n(u)),et.resolve()}getLastRemoteSnapshotVersion(e){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return et.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Or&&(this.Or=n),et.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new Vd(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,et.resolve()}updateTargetData(e,n){return this.qn(n),et.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,et.resolve()}removeTargets(e,n,o){let u=0;const p=[];return this.Mr.forEach((m,R)=>{R.sequenceNumber<=n&&null===o.get(R.targetId)&&(this.Mr.delete(m),p.push(this.removeMatchingKeysForTargetId(e,R.targetId)),u++)}),et.waitFor(p).next(()=>u)}getTargetCount(e){return et.resolve(this.targetCount)}getTargetData(e,n){const o=this.Mr.get(n)||null;return et.resolve(o)}addMatchingKeys(e,n,o){return this.Nr.dr(n,o),et.resolve()}removeMatchingKeys(e,n,o){this.Nr.Rr(n,o);const u=this.persistence.referenceDelegate,p=[];return u&&n.forEach(m=>{p.push(u.markPotentiallyOrphaned(e,m))}),et.waitFor(p)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),et.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Nr.gr(n);return et.resolve(o)}containsKey(e,n){return et.resolve(this.Nr.containsKey(n))}}class Oo{constructor(e,n){this.Lr={},this.overlays={},this.kr=new $t(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new rp(this),this.indexManager=new cI,this.remoteDocumentCache=new Vn(o=>this.referenceDelegate.Kr(o)),this.serializer=new dg(n),this.$r=new Iy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Lr[e.toKey()];return o||(o=new ma(n,this.referenceDelegate),this.Lr[e.toKey()]=o),o}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,o){Nt("MemoryPersistence","Starting transaction:",e);const u=new Fh(this.kr.next());return this.referenceDelegate.Ur(),o(u).next(p=>this.referenceDelegate.Wr(u).next(()=>p)).toPromise().then(p=>(u.raiseOnCommittedEvent(),p))}Gr(e,n){return et.or(Object.values(this.Lr).map(o=>()=>o.containsKey(e,n)))}}class Fh extends Yc{constructor(e){super(),this.currentSequenceNumber=e}}class Lh{constructor(e){this.persistence=e,this.zr=new vg,this.jr=null}static Hr(e){return new Lh(e)}get Jr(){if(this.jr)return this.jr;throw sn()}addReference(e,n,o){return this.zr.addReference(o,n),this.Jr.delete(o.toString()),et.resolve()}removeReference(e,n,o){return this.zr.removeReference(o,n),this.Jr.add(o.toString()),et.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),et.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(u=>this.Jr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(p=>this.Jr.add(p.toString()))}).next(()=>o.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.Jr,o=>{const u=Kt.fromPath(o);return this.Yr(e,u).next(p=>{p||n.removeEntry(u,_n.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(o=>{o?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return et.or([()=>et.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class wy{constructor(e){this.serializer=e}N(e,n,o,u){const p=new Cr("createOrUpgrade",n);var L;o<1&&u>=1&&(e.createObjectStore("owner"),(L=e).createObjectStore("mutationQueues",{keyPath:"userId"}),L.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Uo,{unique:!0}),L.createObjectStore("documentMutations"),Eg(e),function(L){L.createObjectStore("remoteDocuments")}(e));let m=et.resolve();return o<3&&u>=3&&(0!==o&&(function(L){L.deleteObjectStore("targetDocuments"),L.deleteObjectStore("targets"),L.deleteObjectStore("targetGlobal")}(e),Eg(e)),m=m.next(()=>function(L){const $=L.store("targetGlobal"),ne={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_n.min().toTimestamp(),targetCount:0};return $.put("targetGlobalKey",ne)}(p))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(L,$){return $.store("mutations").W().next(ne=>{L.deleteObjectStore("mutations"),L.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Uo,{unique:!0});const he=$.store("mutations"),Me=ne.map(Qe=>he.put(Qe));return et.waitFor(Me)})}(e,p))),m=m.next(()=>{!function(L){L.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(m=m.next(()=>this.Xr(p))),o<6&&u>=6&&(m=m.next(()=>(function(L){L.createObjectStore("remoteDocumentGlobal")}(e),this.ei(p)))),o<7&&u>=7&&(m=m.next(()=>this.ti(p))),o<8&&u>=8&&(m=m.next(()=>this.ni(e,p))),o<9&&u>=9&&(m=m.next(()=>{!function(L){L.objectStoreNames.contains("remoteDocumentChanges")&&L.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(m=m.next(()=>this.ri(p))),o<11&&u>=11&&(m=m.next(()=>{(function(L){L.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(L){L.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(m=m.next(()=>{!function(L){const $=L.createObjectStore("documentOverlays",{keyPath:Pf});$.createIndex("collectionPathOverlayIndex",Eo,{unique:!1}),$.createIndex("collectionGroupOverlayIndex",Gu,{unique:!1})}(e)})),o<13&&u>=13&&(m=m.next(()=>function(L){const $=L.createObjectStore("remoteDocumentsV14",{keyPath:ym});$.createIndex("documentKeyIndex",Sl),$.createIndex("collectionGroupIndex",cr)}(e)).next(()=>this.ii(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>this.si(e,p))),o<15&&u>=15&&(m=m.next(()=>function(L){L.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),L.createObjectStore("indexState",{keyPath:Af}).createIndex("sequenceNumberIndex",_h,{unique:!1}),L.createObjectStore("indexEntries",{keyPath:_d}).createIndex("documentKeyIndex",yh,{unique:!1})}(e))),m}ei(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=ep(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Xr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>et.forEach(u,p=>{const m=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",m).next(R=>et.forEach(R,L=>{fn(L.userId===p.userId);const $=Rd(this.serializer,L);return uy(e,p.userId,$).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const p=[];return o.Y((m,R)=>{const L=new qr(m),$=[0,es(L)];p.push(n.get($).next(ne=>ne?et.resolve():n.put({targetId:0,path:es(L),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>et.waitFor(p))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:Sf});const o=n.store("collectionParents"),u=new cy,p=m=>{if(u.add(m)){const R=m.lastSegment(),L=m.popLast();return o.put({collectionId:R,parent:es(L)})}};return n.store("remoteDocuments").Y({J:!0},(m,R)=>{const L=new qr(m);return p(L.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([m,R,L],$)=>{const ne=Ao(R);return p(ne.popLast())}))}ri(e){const n=e.store("targets");return n.Y((o,u)=>{const p=fg(u),m=qf(this.serializer,p);return n.put(m)})}ii(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((p,m)=>{const R=n.store("remoteDocumentsV14"),L=(he=m,he.document?new Kt(qr.fromString(he.document.name).popFirst(5)):he.noDocument?Kt.fromSegments(he.noDocument.path):he.unknownDocument?Kt.fromSegments(he.unknownDocument.path):sn()).path.toArray(),$={prefixPath:L.slice(0,L.length-2),collectionGroup:L[L.length-2],documentId:L[L.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};var he;u.push(R.put($))}).next(()=>et.waitFor(u))}si(e,n){const o=n.store("mutations"),u=my(this.serializer),p=new Oo(Lh.Hr,this.serializer.ct);return o.W().next(m=>{const R=new Map;return m.forEach(L=>{var $;let ne=null!==($=R.get(L.userId))&&void 0!==$?$:or();Rd(this.serializer,L).keys().forEach(he=>ne=ne.add(he)),R.set(L.userId,ne)}),et.forEach(R,(L,$)=>{const ne=new tr($),he=pg.lt(this.serializer,ne),Me=p.getIndexManager(ne),Qe=Fd.lt(ne,this.serializer,Me,p.referenceDelegate);return new Bm(u,Qe,he,Me).recalculateAndSaveOverlaysForDocumentKeys(new Pl(n,$t._e),L).next()})})}}function Eg(i){i.createObjectStore("targetDocuments",{keyPath:Df}).createIndex("documentTargetsIndex",Hp,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",jr,{unique:!0}),i.createObjectStore("targetGlobal")}const Ig="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ip{constructor(e,n,o,u,p,m,R,L,$,ne,he=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.oi=p,this.window=m,this.document=R,this._i=$,this.ai=ne,this.ui=he,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=Me=>Promise.resolve(),!ip.D())throw new bt(ht.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lI(this,u),this.Ti=n+"main",this.serializer=new dg(L),this.Ei=new ps(this.Ti,this.ui,new wy(this.serializer)),this.Qr=new xv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=my(this.serializer),this.$r=new Rm,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===ne&&ri("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new bt(ht.FAILED_PRECONDITION,Ig);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new $t(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var o=(0,ae.c)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var n=(0,ae.c)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,ae.c)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(A(e))return Nt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Nt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Uh(e).get("owner").next(n=>et.resolve(this.Si(n)))}bi(e){return Bh(e).delete(this.clientId)}Di(){var e=this;return(0,ae.c)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=eo(o,"clientMetadata");return u.W().next(p=>{const m=e.vi(p,18e5),R=p.filter(L=>-1===m.indexOf(L));return et.forEach(R,L=>u.delete(L.clientId)).next(()=>R)})}).catch(()=>[]);if(e.di)for(const o of n)e.di.removeItem(e.Fi(o.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?et.resolve(!0):Uh(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new bt(ht.FAILED_PRECONDITION,Ig);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bh(e).W().next(o=>void 0===this.vi(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Nt("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,ae.c)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new Pl(n,$t._e);return e.yi(o).next(()=>e.bi(o))}),e.Ei.close(),e.Bi()})()}vi(e,n){return e.filter(o=>this.Ci(o.updateTimeMs,n)&&!this.Mi(o.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>Bh(e).W().next(n=>this.vi(n,18e5).map(o=>o.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Fd.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Lm(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return pg.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,o){Nt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",p=15===(L=this.ui)?uu:14===L?Al:13===L?Qc:12===L?zp:11===L?Wu:void sn();var L;let m;return this.Ei.runTransaction(e,u,p,R=>(m=new Pl(R,this.kr?this.kr.next():$t._e),"readwrite-primary"===n?this.gi(m).next(L=>!!L||this.pi(m)).next(L=>{if(!L)throw ri(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new bt(ht.FAILED_PRECONDITION,Dc);return o(m)}).next(L=>this.wi(m).next(()=>L)):this.ki(m).next(()=>o(m)))).then(R=>(m.raiseOnCommittedEvent(),R))}ki(e){return Uh(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new bt(ht.FAILED_PRECONDITION,Ig)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Uh(e).put("owner",n)}static D(){return ps.D()}yi(e){const n=Uh(e);return n.get("owner").next(o=>this.Si(o)?(Nt("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):et.resolve())}Ci(e,n){const o=Date.now();return!(e<o-n||e>o&&(ri(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,we.qk)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const o=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return Nt("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return ri("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ri("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Uh(i){return eo(i,"owner")}function Bh(i){return eo(i,"clientMetadata")}function $m(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class Cg{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.qi=o,this.Qi=u}static Ki(e,n){let o=or(),u=or();for(const p of n.docChanges)switch(p.type){case 0:o=o.add(p.doc.key);break;case 1:u=u.add(p.doc.key)}return new Cg(e,n.fromCache,o,u)}}class Ty{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Gm{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,we.qk)()?8:ps.v((0,we.Su)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,o,u){const p={result:null};return this.ji(e,n).next(m=>{p.result=m}).next(()=>{if(!p.result)return this.Hi(e,n,u,o).next(m=>{p.result=m})}).next(()=>{if(p.result)return;const m=new Ty;return this.Ji(e,n,m).next(R=>{if(p.result=R,this.Ui)return this.Yi(e,n,m,R.size)})}).next(()=>p.result)}Yi(e,n,o,u){return o.documentReadCount<this.Wi?(Vo()<=pe.Ge.DEBUG&&Nt("QueryEngine","SDK will not create cache indexes for query:",Pt(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),et.resolve()):(Vo()<=pe.Ge.DEBUG&&Nt("QueryEngine","Query:",Pt(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Gi*u?(Vo()<=pe.Ge.DEBUG&&Nt("QueryEngine","The SDK decides to create cache indexes for query:",Pt(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,E(n))):et.resolve())}ji(e,n){if(yu(n))return et.resolve(null);let o=E(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=oe(n,null,"F"),o=E(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(p=>{const m=or(...p);return this.zi.getDocuments(e,m).next(R=>this.indexManager.getMinOffset(e,o).next(L=>{const $=this.Zi(n,R);return this.Xi(n,$,m,L.readTime)?this.ji(e,oe(n,null,"F")):this.es(e,$,n,L)}))})))}Hi(e,n,o,u){return yu(n)||u.isEqual(_n.min())?et.resolve(null):this.zi.getDocuments(e,o).next(p=>{const m=this.Zi(n,p);return this.Xi(n,m,o,u)?et.resolve(null):(Vo()<=pe.Ge.DEBUG&&Nt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Pt(n)),this.es(e,m,n,li(u,-1)).next(R=>R))})}Zi(e,n){let o=new pr(sr(e));return n.forEach((u,p)=>{hn(e,p)&&(o=o.add(p))}),o}Xi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const p="F"===e.limitType?n.last():n.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(u)>0)}Ji(e,n,o){return Vo()<=pe.Ge.DEBUG&&Nt("QueryEngine","Using full collection scan to execute query:",Pt(n)),this.zi.getDocumentsMatchingQuery(e,n,Rs.min(),o)}es(e,n,o,u){return this.zi.getDocumentsMatchingQuery(e,o,u).next(p=>(n.forEach(m=>{p=p.insert(m.key,m)}),p))}}class wg{constructor(e,n,o,u){this.persistence=e,this.ts=n,this.serializer=u,this.ns=new Pi(bn),this.rs=new Ts(p=>za(p),Nl),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(o)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bm(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function Dy(i,e,n,o){return new wg(i,e,n,o)}function Sy(i,e){return jh.apply(this,arguments)}function jh(){return jh=(0,ae.c)(function*(i,e){const n=Ht(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(p=>(u=p,n._s(e),n.mutationQueue.getAllMutationBatches(o))).next(p=>{const m=[],R=[];let L=or();for(const $ of u){m.push($.batchId);for(const ne of $.mutations)L=L.add(ne.key)}for(const $ of p){R.push($.batchId);for(const ne of $.mutations)L=L.add(ne.key)}return n.localDocuments.getDocuments(o,L).next($=>({us:$,removedBatchIds:m,addedBatchIds:R}))})})}),jh.apply(this,arguments)}function Ay(i){const e=Ht(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Py(i,e,n){let o=or(),u=or();return n.forEach(p=>o=o.add(p)),e.getEntries(i,o).next(p=>{let m=bo();return n.forEach((R,L)=>{const $=p.get(R);L.isFoundDocument()!==$.isFoundDocument()&&(u=u.add(R)),L.isNoDocument()&&L.version.isEqual(_n.min())?(e.removeEntry(R,L.readTime),m=m.insert(R,L)):!$.isValidDocument()||L.version.compareTo($.version)>0||0===L.version.compareTo($.version)&&$.hasPendingWrites?(e.addEntry(L),m=m.insert(R,L)):Nt("LocalStore","Ignoring outdated watch update for ",R,". Current version:",$.version," Watch version:",L.version)}),{cs:m,ls:u}})}function Bv(i,e){const n=Ht(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function Bd(i,e){const n=Ht(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.Qr.getTargetData(o,e).next(p=>p?(u=p,et.resolve(u)):n.Qr.allocateTargetId(o).next(m=>(u=new uc(e,m,"TargetPurposeListen",o.currentSequenceNumber),n.Qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ns.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ns=n.ns.insert(o.targetId,o),n.rs.set(e,o.targetId)),o})}function Hl(i,e,n){return jd.apply(this,arguments)}function jd(){return jd=(0,ae.c)(function*(i,e,n){const o=Ht(i),u=o.ns.get(e),p=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",p,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!A(m))throw m;Nt("LocalStore",`Failed to update sequence numbers for target ${e}: ${m}`)}o.ns=o.ns.remove(e),o.rs.delete(u.target)}),jd.apply(this,arguments)}function $d(i,e,n){const o=Ht(i);let u=_n.min(),p=or();return o.persistence.runTransaction("Execute query","readwrite",m=>function(L,$,ne){const he=Ht(L),Me=he.rs.get(ne);return void 0!==Me?et.resolve(he.ns.get(Me)):he.Qr.getTargetData($,ne)}(o,m,E(e)).next(R=>{if(R)return u=R.lastLimboFreeSnapshotVersion,o.Qr.getMatchingKeysForTargetId(m,R.targetId).next(L=>{p=L})}).next(()=>o.ts.getDocumentsMatchingQuery(m,e,n?u:_n.min(),n?p:or())).next(R=>(Wm(o,Nn(e),R),{documents:R,hs:p})))}function Tg(i,e){const n=Ht(i),o=Ht(n.Qr),u=n.ns.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",p=>o._t(p,e).next(m=>m?m.target:null))}function Dg(i,e){const n=Ht(i),o=n.ss.get(e)||_n.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.os.getAllFromCollectionGroup(u,e,li(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Wm(n,e,u),u))}function Wm(i,e,n){let o=i.ss.get(e)||_n.min();n.forEach((u,p)=>{p.readTime.compareTo(o)>0&&(o=p.readTime)}),i.ss.set(e,o)}function sp(){return sp=(0,ae.c)(function*(i,e,n,o){const u=Ht(i);let p=or(),m=bo();for(const $ of n){const ne=e.Ps($.metadata.name);$.document&&(p=p.add(ne));const he=e.Is($);he.setReadTime(e.Ts($.metadata.readTime)),m=m.insert(ne,he)}const R=u.os.newChangeBuffer({trackRemovals:!0}),L=yield Bd(u,(ne=o,E(Oc(qr.fromString(`__bundle__/docs/${ne}`)))));var ne;return u.persistence.runTransaction("Apply bundle documents","readwrite",$=>Py($,R,m).next(ne=>(R.apply($),ne)).next(ne=>u.Qr.removeMatchingKeysForTargetId($,L.targetId).next(()=>u.Qr.addMatchingKeys($,p,L.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments($,ne.cs,ne.ls)).next(()=>ne.cs)))}),sp.apply(this,arguments)}function Gd(i,e){return Ma.apply(this,arguments)}function Ma(){return Ma=(0,ae.c)(function*(i,e,n=or()){const o=yield Bd(i,E(xh(e.bundledQuery))),u=Ht(i);return u.persistence.runTransaction("Save named query","readwrite",p=>{const m=zi(e.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u.$r.saveNamedQuery(p,e);const R=o.withResumeToken(Os.EMPTY_BYTE_STRING,m);return u.ns=u.ns.insert(R.targetId,R),u.Qr.updateTargetData(p,R).next(()=>u.Qr.removeMatchingKeysForTargetId(p,o.targetId)).next(()=>u.Qr.addMatchingKeys(p,n,o.targetId)).next(()=>u.$r.saveNamedQuery(p,e))})}),Ma.apply(this,arguments)}function zl(i,e){return`firestore_clients_${i}_${e}`}function Sg(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function ql(i,e){return`firestore_targets_${i}_${e}`}class $h{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Es(e,n,o){const u=JSON.parse(o);let p,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(p=new bt(u.error.code,u.error.message))),m?new $h(e,n,u.state,p):(ri("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wd{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Es(e,n){const o=JSON.parse(n);let u,p="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return p&&o.error&&(p="string"==typeof o.error.message&&"string"==typeof o.error.code,p&&(u=new bt(o.error.code,o.error.message))),p?new Wd(e,o.state,u):(ri("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,p=al();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=Vi(o.activeTargetIds[m]),p=p.add(o.activeTargetIds[m]);return u?new Gh(e,p):(ri("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Hd{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Hd(n.clientId,n.onlineState):(ri("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ra{constructor(){this.activeTargetIds=al()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ag{constructor(e,n,o,u,p){this.window=e,this.oi=n,this.persistenceKey=o,this.Vs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Pi(bn),this.started=!1,this.ys=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.ws=zl(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new ra),this.bs=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(L){return`firestore_bundle_loaded_v2_${L}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.c)(function*(){const n=yield e.syncEngine.Li();for(const u of n){if(u===e.Vs)continue;const p=e.getItem(zl(e.persistenceKey,u));if(p){const m=Gh.Es(u,p);m&&(e.ps=e.ps.insert(m.clientId,m))}}e.Ms();const o=e.storage.getItem(e.vs);if(o){const u=e.xs(o);u&&e.Os(u)}for(const u of e.ys)e.gs(u);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,o){this.Bs(e,n,o),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(ql(this.persistenceKey,e));if(o){const u=Wd.Es(e,o);u&&(n=u.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ql(this.persistenceKey,e))}updateQueryState(e,n,o){this.qs(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Ls(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Nt("SharedClientState","READ",e,n),n}setItem(e,n){Nt("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Nt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(Nt("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ws)return void ri("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,ae.c)(function*(){if(n.started){if(null!==o.key)if(n.bs.test(o.key)){if(null==o.newValue){const u=n.$s(o.key);return n.Us(u,null)}{const u=n.Ws(o.key,o.newValue);if(u)return n.Us(u.clientId,u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.Gs(o.key,o.newValue);if(u)return n.zs(u)}}else if(n.Cs.test(o.key)){if(null!==o.newValue){const u=n.js(o.key,o.newValue);if(u)return n.Hs(u)}}else if(o.key===n.vs){if(null!==o.newValue){const u=n.xs(o.newValue);if(u)return n.Os(u)}}else if(o.key===n.Ss){const u=function(m){let R=$t._e;if(null!=m)try{const L=JSON.parse(m);fn("number"==typeof L),R=L}catch(L){ri("SharedClientState","Failed to read sequence number from WebStorage",L)}return R}(o.newValue);u!==$t._e&&n.sequenceNumberHandler(u)}else if(o.key===n.Fs){const u=n.Js(o.newValue);yield Promise.all(u.map(p=>n.syncEngine.Ys(p)))}}else n.ys.push(o)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,o){const u=new $h(this.currentUser,e,n,o),p=Sg(this.persistenceKey,this.currentUser,e);this.setItem(p,u.ds())}Ls(e){const n=Sg(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,o){const u=ql(this.persistenceKey,e),p=new Wd(e,n,o);this.setItem(u,p.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const o=this.$s(e);return Gh.Es(o,n)}Gs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return $h.Es(new tr(void 0!==o[2]?o[2]:null),u,n)}js(e,n){const o=this.Cs.exec(e),u=Number(o[1]);return Wd.Es(u,n)}xs(e){return Hd.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,ae.c)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);Nt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const o=n?this.ps.insert(e,n):this.ps.remove(e),u=this.Ns(this.ps),p=this.Ns(o),m=[],R=[];return p.forEach(L=>{u.has(L)||m.push(L)}),u.forEach(L=>{p.has(L)||R.push(L)}),this.syncEngine.eo(m,R).then(()=>{this.ps=o})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=al();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class Wh{constructor(){this.no=new ra,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,o){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new ra,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Hh{io(e){}shutdown(){}}class op{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Nt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Nt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let fl=null;function Kl(){return null===fl?fl=268435456+Math.round(2147483648*Math.random()):fl++,"0x"+fl.toString(16)}const ap={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class My{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const No="WebChannelConnection";class zh extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),p=encodeURIComponent(this.databaseId.database);this.fo=o+"://"+n.host,this.po=`projects/${u}/databases/${p}`,this.yo="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${p}`}get wo(){return!1}So(n,o,u,p,m){const R=Kl(),L=this.bo(n,o.toUriEncodedString());Nt("RestConnection",`Sending RPC '${n}' ${R}:`,L,u);const $={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do($,p,m),this.Co(n,L,$,u).then(ne=>(Nt("RestConnection",`Received RPC '${n}' ${R}: `,ne),ne),ne=>{throw mo("RestConnection",`RPC '${n}' ${R} failed with error: `,ne,"url: ",L,"request:",u),ne})}vo(n,o,u,p,m,R){return this.So(n,o,u,p,m)}Do(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+gi,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((p,m)=>n[m]=p),u&&u.headers.forEach((p,m)=>n[m]=p)}bo(n,o){return`${this.fo}/v1/${o}:${ap[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,o,u){const p=Kl();return new Promise((m,R)=>{const L=new fs;L.setWithCredentials(!0),L.listenOnce(Qr.COMPLETE,()=>{try{switch(L.getLastErrorCode()){case ii.NO_ERROR:const ne=L.getResponseJson();Nt(No,`XHR for RPC '${e}' ${p} received:`,JSON.stringify(ne)),m(ne);break;case ii.TIMEOUT:Nt(No,`RPC '${e}' ${p} timed out`),R(new bt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case ii.HTTP_ERROR:const he=L.getStatus();if(Nt(No,`RPC '${e}' ${p} failed with status:`,he,"response text:",L.getResponseText()),he>0){let Me=L.getResponseJson();Array.isArray(Me)&&(Me=Me[0]);const Qe=Me?.error;if(Qe&&Qe.status&&Qe.message){const Gt=function(Ft){const Rn=Ft.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(Rn)>=0?Rn:ht.UNKNOWN}(Qe.status);R(new bt(Gt,Qe.message))}else R(new bt(ht.UNKNOWN,"Server responded with status "+L.getStatus()))}else R(new bt(ht.UNAVAILABLE,"Connection failed."));break;default:sn()}}finally{Nt(No,`RPC '${e}' ${p} completed.`)}});const $=JSON.stringify(u);Nt(No,`RPC '${e}' ${p} sending request:`,u),L.send(n,"POST",$,o,15)})}Fo(e,n,o){const u=Kl(),p=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=vt(),R=dn(),L={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},$=this.longPollingOptions.timeoutSeconds;void 0!==$&&(L.longPollingTimeout=Math.round(1e3*$)),this.useFetchStreams&&(L.useFetchStreams=!0),this.Do(L.initMessageHeaders,n,o),L.encodeInitMessageHeaders=!0;const ne=p.join("");Nt(No,`Creating RPC '${e}' stream ${u}: ${ne}`,L);const he=m.createWebChannel(ne,L);let Me=!1,Qe=!1;const Gt=new My({lo:Ft=>{Qe?Nt(No,`Not sending because RPC '${e}' stream ${u} is closed:`,Ft):(Me||(Nt(No,`Opening RPC '${e}' stream ${u} transport.`),he.open(),Me=!0),Nt(No,`RPC '${e}' stream ${u} sending:`,Ft),he.send(Ft))},ho:()=>he.close()}),an=(Ft,Rn,lr)=>{Ft.listen(Rn,On=>{try{lr(On)}catch(fr){setTimeout(()=>{throw fr},0)}})};return an(he,Fr.EventType.OPEN,()=>{Qe||Nt(No,`RPC '${e}' stream ${u} transport opened.`)}),an(he,Fr.EventType.CLOSE,()=>{Qe||(Qe=!0,Nt(No,`RPC '${e}' stream ${u} transport closed`),Gt.Vo())}),an(he,Fr.EventType.ERROR,Ft=>{Qe||(Qe=!0,mo(No,`RPC '${e}' stream ${u} transport errored:`,Ft),Gt.Vo(new bt(ht.UNAVAILABLE,"The operation could not be completed")))}),an(he,Fr.EventType.MESSAGE,Ft=>{var Rn;if(!Qe){const lr=Ft.data[0];fn(!!lr);const fr=lr.error||(null===(Rn=lr[0])||void 0===Rn?void 0:Rn.error);if(fr){Nt(No,`RPC '${e}' stream ${u} received error:`,fr);const mi=fr.status;let Mi=function(D_){const S_=gs[D_];if(void 0!==S_)return Fc(S_)}(mi),ro=fr.message;void 0===Mi&&(Mi=ht.INTERNAL,ro="Unknown error status: "+mi+" with message "+fr.message),Qe=!0,Gt.Vo(new bt(Mi,ro)),he.close()}else Nt(No,`RPC '${e}' stream ${u} received:`,lr),Gt.mo(lr)}}),an(R,ci.STAT_EVENT,Ft=>{Ft.stat===Jn.PROXY?Nt(No,`RPC '${e}' stream ${u} detected buffering proxy`):Ft.stat===Jn.NOPROXY&&Nt(No,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{Gt.Ro()},0),Gt}}function Pg(){return typeof window<"u"?window:null}function bg(){return typeof document<"u"?document:null}function Su(i){return new bd(i,!0)}class qh{constructor(e,n,o=1e3,u=1.5,p=6e4){this.oi=e,this.timerId=n,this.Mo=o,this.xo=u,this.Oo=p,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),o=Math.max(0,Date.now()-this.Lo),u=Math.max(0,n-o);u>0&&Nt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,u,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class cp{constructor(e,n,o,u,p,m,R,L){this.oi=e,this.$o=o,this.Uo=u,this.connection=p,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=R,this.listener=L,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new qh(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,ae.c)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,ae.c)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var o=this;return(0,ae.c)(function*(){o.n_(),o.r_(),o.jo.cancel(),o.Wo++,4!==e?o.jo.reset():n&&n.code===ht.RESOURCE_EXHAUSTED?(ri(n.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),o.jo.ko()):n&&n.code===ht.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.i_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Wo===n&&this.o_(o,u)},o=>{e(()=>{const u=new bt(ht.UNKNOWN,"Fetching auth token failed: "+o.message);return this.__(u)})})}o_(e,n){const o=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{o(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(u=>{o(()=>this.__(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Yo(){var e=this;this.state=5,this.jo.qo((0,ae.c)(function*(){e.state=0,e.start()}))}__(e){return Nt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(Nt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ry extends cp{constructor(e,n,o,u,p,m){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,m),this.serializer=p}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function bv(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===($=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===$?1:"REMOVE"===$?2:"CURRENT"===$?3:"RESET"===$?4:sn(),u=e.targetChange.targetIds||[],p=function($,ne){return $.useProto3Json?(fn(void 0===ne||"string"==typeof ne),Os.fromBase64String(ne||"")):(fn(void 0===ne||ne instanceof Uint8Array),Os.fromUint8Array(ne||new Uint8Array))}(i,e.targetChange.resumeToken),m=e.targetChange.cause,R=m&&function($){const ne=void 0===$.code?ht.UNKNOWN:Fc($.code);return new bt(ne,$.message||"")}(m);n=new ig(o,u,p,R||null)}else if("documentChange"in e){const o=e.documentChange,u=Bl(i,o.document.name),p=zi(o.document.updateTime),m=o.document.createTime?zi(o.document.createTime):_n.min(),R=new as({mapValue:{fields:o.document.fields}}),L=Hi.newFoundDocument(u,p,m,R);n=new Sd(o.targetIds||[],o.removedTargetIds||[],L.key,L)}else if("documentDelete"in e){const o=e.documentDelete,u=Bl(i,o.document),p=o.readTime?zi(o.readTime):_n.min(),m=Hi.newNoDocument(u,p);n=new Sd([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in e){const o=e.documentRemove,u=Bl(i,o.document);n=new Sd([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return sn();{const o=e.filter,{count:u=0,unchangedNames:p}=o,m=new bh(u,p);n=new $f(o.targetId,m)}}var $;return n}(this.serializer,e),o=function(p){if(!("targetChange"in p))return _n.min();const m=p.targetChange;return m.targetIds&&m.targetIds.length?_n.min():m.readTime?zi(m.readTime):_n.min()}(e);return this.listener.u_(n,o)}c_(e){const n={};n.database=lg(this.serializer),n.addTarget=function(p,m){let R;const L=m.target;if(R=Yu(L)?{documents:ty(p,L)}:{query:Hf(p,L).ut},R.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){R.resumeToken=Cm(p,m.resumeToken);const $=Im(p,m.expectedCount);null!==$&&(R.expectedCount=$)}else if(m.snapshotVersion.compareTo(_n.min())>0){R.readTime=Md(p,m.snapshotVersion.toTimestamp());const $=Im(p,m.expectedCount);null!==$&&(R.expectedCount=$)}return R}(this.serializer,e);const o=function ry(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sn()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.t_(n)}l_(e){const n={};n.database=lg(this.serializer),n.removeTarget=e,this.t_(n)}}class Hm extends cp{constructor(e,n,o,u,p,m){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,m),this.serializer=p,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(fn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function Am(i,e){return i&&i.length>0?(fn(void 0!==e),i.map(n=>function(u,p){let m=zi(u.updateTime?u.updateTime:p);return m.isEqual(_n.min())&&(m=zi(p)),new Zp(m,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=zi(e.commitTime);return this.listener.T_(o,n)}return fn(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=lg(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>Mh(this.serializer,o))};this.t_(n)}}class zd extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.A_=!1}R_(){if(this.A_)throw new bt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,o,u){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,m])=>this.connection.So(e,og(n,o),u,p,m)).catch(p=>{throw"FirebaseError"===p.name?(p.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new bt(ht.UNKNOWN,p.toString())})}vo(e,n,o,u,p){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,R])=>this.connection.vo(e,og(n,o),u,m,R,p)).catch(m=>{throw"FirebaseError"===m.name?(m.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new bt(ht.UNKNOWN,m.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class up{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ri(n),this.g_=!1):Nt("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class dp{constructor(e,n,o,u,p){var m=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=p,this.M_.io(R=>{o.enqueueAndForget((0,ae.c)(function*(){var L;_a(m)&&(Nt("RemoteStore","Restarting streams for network reachability change."),yield(L=(0,ae.c)(function*(ne){const he=Ht(ne);he.v_.add(4),yield Ra(he),he.x_.set("Unknown"),he.v_.delete(4),yield pl(he)}),function $(ne){return L.apply(this,arguments)})(m))}))}),this.x_=new up(o,u)}}function pl(i){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,ae.c)(function*(i){if(_a(i))for(const e of i.F_)yield e(!0)}),Kh.apply(this,arguments)}function Ra(i){return hc.apply(this,arguments)}function hc(){return hc=(0,ae.c)(function*(i){for(const e of i.F_)yield e(!1)}),hc.apply(this,arguments)}function id(i,e){const n=Ht(i);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),Ka(n)?hp(n):gl(n).Jo()&&zm(n,e))}function Au(i,e){const n=Ht(i),o=gl(n);n.C_.delete(e),o.Jo()&&Yh(n,e),0===n.C_.size&&(o.Jo()?o.Xo():_a(n)&&n.x_.set("Unknown"))}function zm(i,e){if(i.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_n.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gl(i).c_(e)}function Yh(i,e){i.O_.Oe(e),gl(i).l_(e)}function hp(i){i.O_=new Z_({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.C_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),gl(i).start(),i.x_.p_()}function Ka(i){return _a(i)&&!gl(i).Ho()&&i.C_.size>0}function _a(i){return 0===Ht(i).v_.size}function sd(i){i.O_=void 0}function Mg(i){return qd.apply(this,arguments)}function qd(){return qd=(0,ae.c)(function*(i){i.C_.forEach((e,n)=>{zm(i,e)})}),qd.apply(this,arguments)}function Qh(i,e){return Vc.apply(this,arguments)}function Vc(){return Vc=(0,ae.c)(function*(i,e){sd(i),Ka(i)?(i.x_.S_(e),hp(i)):i.x_.set("Unknown")}),Vc.apply(this,arguments)}function qm(i,e,n){return od.apply(this,arguments)}function od(){return od=(0,ae.c)(function*(i,e,n){if(i.x_.set("Online"),e instanceof ig&&2===e.state&&e.cause)try{yield(o=(0,ae.c)(function*(p,m){const R=m.cause;for(const L of m.targetIds)p.C_.has(L)&&(yield p.remoteSyncer.rejectListen(L,R),p.C_.delete(L),p.O_.removeTarget(L))}),function u(p,m){return o.apply(this,arguments)})(i,e)}catch(o){Nt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Kd(i,o)}else if(e instanceof Sd?i.O_.$e(e):e instanceof $f?i.O_.Je(e):i.O_.Ge(e),!n.isEqual(_n.min()))try{const o=yield Ay(i.localStore);n.compareTo(o)>=0&&(yield function(p,m){const R=p.O_.it(m);return R.targetChanges.forEach((L,$)=>{if(L.resumeToken.approximateByteSize()>0){const ne=p.C_.get($);ne&&p.C_.set($,ne.withResumeToken(L.resumeToken,m))}}),R.targetMismatches.forEach((L,$)=>{const ne=p.C_.get(L);if(!ne)return;p.C_.set(L,ne.withResumeToken(Os.EMPTY_BYTE_STRING,ne.snapshotVersion)),Yh(p,L);const he=new uc(ne.target,L,$,ne.sequenceNumber);zm(p,he)}),p.remoteSyncer.applyRemoteEvent(R)}(i,n))}catch(o){Nt("RemoteStore","Failed to raise snapshot:",o),yield Kd(i,o)}var o}),od.apply(this,arguments)}function Kd(i,e,n){return fp.apply(this,arguments)}function fp(){return fp=(0,ae.c)(function*(i,e,n){if(!A(e))throw e;i.v_.add(1),yield Ra(i),i.x_.set("Offline"),n||(n=()=>Ay(i.localStore)),i.asyncQueue.enqueueRetryable((0,ae.c)(function*(){Nt("RemoteStore","Retrying IndexedDB access"),yield n(),i.v_.delete(1),yield pl(i)}))}),fp.apply(this,arguments)}function pp(i,e){return e().catch(n=>Kd(i,n,e))}function Ks(i){return Jh.apply(this,arguments)}function Jh(){return Jh=(0,ae.c)(function*(i){const e=Ht(i),n=Uc(e);let o=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Km(e);)try{const u=yield Bv(e.localStore,o);if(null===u){0===e.D_.length&&n.Xo();break}o=u.batchId,Ym(e,u)}catch(u){yield Kd(e,u)}Oy(e)&&Ny(e)}),Jh.apply(this,arguments)}function Km(i){return _a(i)&&i.D_.length<10}function Ym(i,e){i.D_.push(e);const n=Uc(i);n.Jo()&&n.P_&&n.I_(e.mutations)}function Oy(i){return _a(i)&&!Uc(i).Ho()&&i.D_.length>0}function Ny(i){Uc(i).start()}function xy(i){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,ae.c)(function*(i){Uc(i).d_()}),Rg.apply(this,arguments)}function Tr(i){return Og.apply(this,arguments)}function Og(){return Og=(0,ae.c)(function*(i){const e=Uc(i);for(const n of i.D_)e.I_(n.mutations)}),Og.apply(this,arguments)}function Xh(i,e,n){return Pu.apply(this,arguments)}function Pu(){return Pu=(0,ae.c)(function*(i,e,n){const o=i.D_.shift(),u=tg.from(o,e,n);yield pp(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Ks(i)}),Pu.apply(this,arguments)}function Qm(i,e){return gp.apply(this,arguments)}function gp(){return gp=(0,ae.c)(function*(i,e){var n;e&&Uc(i).P_&&(yield(n=(0,ae.c)(function*(u,p){if(Ul(R=p.code)&&R!==ht.ABORTED){const m=u.D_.shift();Uc(u).Zo(),yield pp(u,()=>u.remoteSyncer.rejectFailedWrite(m.batchId,p)),yield Ks(u)}var R}),function o(u,p){return n.apply(this,arguments)})(i,e)),Oy(i)&&Ny(i)}),gp.apply(this,arguments)}function Zh(i,e){return Yl.apply(this,arguments)}function Yl(){return Yl=(0,ae.c)(function*(i,e){const n=Ht(i);n.asyncQueue.verifyOperationInProgress(),Nt("RemoteStore","RemoteStore received new credentials");const o=_a(n);n.v_.add(3),yield Ra(n),o&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield pl(n)}),Yl.apply(this,arguments)}function Ql(i,e){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,ae.c)(function*(i,e){const n=Ht(i);e?(n.v_.delete(2),yield pl(n)):e||(n.v_.add(2),yield Ra(n),n.x_.set("Unknown"))}),Yd.apply(this,arguments)}function gl(i){return i.N_||(i.N_=function(n,o,u){const p=Ht(n);return p.R_(),new Ry(o,p.connection,p.authCredentials,p.appCheckCredentials,p.serializer,u)}(i.datastore,i.asyncQueue,{Po:Mg.bind(null,i),To:Qh.bind(null,i),u_:qm.bind(null,i)}),i.F_.push(function(){var e=(0,ae.c)(function*(n){n?(i.N_.Zo(),Ka(i)?hp(i):i.x_.set("Unknown")):(yield i.N_.stop(),sd(i))});return function(n){return e.apply(this,arguments)}}())),i.N_}function Uc(i){return i.B_||(i.B_=function(n,o,u){const p=Ht(n);return p.R_(),new Hm(o,p.connection,p.authCredentials,p.appCheckCredentials,p.serializer,u)}(i.datastore,i.asyncQueue,{Po:xy.bind(null,i),To:Qm.bind(null,i),E_:Tr.bind(null,i),T_:Xh.bind(null,i)}),i.F_.push(function(){var e=(0,ae.c)(function*(n){n?(i.B_.Zo(),yield Ks(i)):(yield i.B_.stop(),i.D_.length>0&&(Nt("RemoteStore",`Stopping write stream with ${i.D_.length} pending writes`),i.D_=[]))});return function(n){return e.apply(this,arguments)}}())),i.B_}class Qd{constructor(e,n,o,u,p){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=p,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,p){const m=Date.now()+o,R=new Qd(e,n,m,u,p);return R.start(o),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bt(ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bu(i,e){if(ri("AsyncQueue",`${e}: ${i}`),A(i))return new bt(ht.UNAVAILABLE,`${e}: ${i}`);throw i}class Mu{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Kt.comparator(n.key,o.key):(n,o)=>Kt.comparator(n.key,o.key),this.keyedMap=Nc(),this.sortedSet=new Pi(this.comparator)}static emptySet(e){return new Mu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,p=o.getNext().key;if(!u.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new Mu;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class Ng{constructor(){this.L_=new Pi(Kt.comparator)}track(e){const n=e.doc.key,o=this.L_.get(n);o?0!==e.type&&3===o.type?this.L_=this.L_.insert(n,e):3===e.type&&1!==o.type?this.L_=this.L_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.L_=this.L_.remove(n):1===e.type&&2===o.type?this.L_=this.L_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):sn():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,o)=>{e.push(o)}),e}}class Ru{constructor(e,n,o,u,p,m,R,L,$){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=p,this.fromCache=m,this.syncStateChanged=R,this.excludesMetadataChanges=L,this.hasCachedResults=$}static fromInitialDocuments(e,n,o,u,p){const m=[];return n.forEach(R=>{m.push({type:0,doc:R})}),new Ru(e,n,Mu.emptySet(n),m,o,u,!0,!1,p)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ne(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class ky{constructor(){this.q_=void 0,this.Q_=[]}}class Fy{constructor(){this.queries=new Ts(e=>ct(e),Ne),this.onlineState="Unknown",this.K_=new Set}}function Jl(i,e){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,ae.c)(function*(i,e){const n=Ht(i),o=e.query;let u=!1,p=n.queries.get(o);if(p||(u=!0,p=new ky),u)try{p.q_=yield n.onListen(o)}catch(m){const R=bu(m,`Initialization of query '${Pt(e.query)}' failed`);return void e.onError(R)}n.queries.set(o,p),p.Q_.push(e),e.U_(n.onlineState),p.q_&&e.W_(p.q_)&&mp(n)}),Jd.apply(this,arguments)}function ef(i,e){return Xd.apply(this,arguments)}function Xd(){return Xd=(0,ae.c)(function*(i,e){const n=Ht(i),o=e.query;let u=!1;const p=n.queries.get(o);if(p){const m=p.Q_.indexOf(e);m>=0&&(p.Q_.splice(m,1),u=0===p.Q_.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),Xd.apply(this,arguments)}function Ly(i,e){const n=Ht(i);let o=!1;for(const u of e){const m=n.queries.get(u.query);if(m){for(const R of m.Q_)R.W_(u)&&(o=!0);m.q_=u}}o&&mp(n)}function Vy(i,e,n){const o=Ht(i),u=o.queries.get(e);if(u)for(const p of u.Q_)p.onError(n);o.queries.delete(e)}function mp(i){i.K_.forEach(e=>{e.next()})}class _p{constructor(e,n,o){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=o||{}}W_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Ru(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){return!e.fromCache||(!this.options.Z_||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=Ru.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class Uy{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}}class yp{constructor(e){this.serializer=e}Ps(e){return Bl(this.serializer,e)}Is(e){return e.metadata.exists?Wf(this.serializer,e.document,!1):Hi.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return zi(e)}}class Oa{constructor(e,n,o){this.ta=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tf(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;const o=qr.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){const n=new Map,o=new yp(this.serializer);for(const u of e)if(u.metadata.queries){const p=o.Ps(u.metadata.name);for(const m of u.metadata.queries){const R=(n.get(m)||or()).add(p);n.set(m,R)}}return n}complete(){var e=this;return(0,ae.c)(function*(){const n=yield function by(i,e,n,o){return sp.apply(this,arguments)}(e.localStore,new yp(e.serializer),e.documents,e.ta.id),o=e.ra(e.documents);for(const u of e.queries)yield Gd(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:n}})()}}function tf(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class vp{constructor(e){this.key=e}}class Ep{constructor(e){this.key=e}}class Ip{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=or(),this.mutatedKeys=or(),this.ua=sr(e),this.ca=new Mu(this.ua)}get la(){return this.oa}ha(e,n){const o=n?n.Pa:new Ng,u=n?n.ca:this.ca;let p=n?n.mutatedKeys:this.mutatedKeys,m=u,R=!1;const L="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,$="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ne,he)=>{const Me=u.get(ne),Qe=hn(this.query,he)?he:null,Gt=!!Me&&this.mutatedKeys.has(Me.key),an=!!Qe&&(Qe.hasLocalMutations||this.mutatedKeys.has(Qe.key)&&Qe.hasCommittedMutations);let Ft=!1;Me&&Qe?Me.data.isEqual(Qe.data)?Gt!==an&&(o.track({type:3,doc:Qe}),Ft=!0):this.Ia(Me,Qe)||(o.track({type:2,doc:Qe}),Ft=!0,(L&&this.ua(Qe,L)>0||$&&this.ua(Qe,$)<0)&&(R=!0)):!Me&&Qe?(o.track({type:0,doc:Qe}),Ft=!0):Me&&!Qe&&(o.track({type:1,doc:Me}),Ft=!0,(L||$)&&(R=!0)),Ft&&(Qe?(m=m.add(Qe),p=an?p.add(ne):p.delete(ne)):(m=m.delete(ne),p=p.delete(ne)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const ne="F"===this.query.limitType?m.last():m.first();m=m.delete(ne.key),p=p.delete(ne.key),o.track({type:1,doc:ne})}return{ca:m,Pa:o,Xi:R,mutatedKeys:p}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,u){const p=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const m=e.Pa.k_();m.sort((ne,he)=>function(Qe,Gt){const an=Ft=>{switch(Ft){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sn()}};return an(Qe)-an(Gt)}(ne.type,he.type)||this.ua(ne.doc,he.doc)),this.Ta(o),u=null!=u&&u;const R=n&&!u?this.Ea():[],L=0===this.aa.size&&this.current&&!u?1:0,$=L!==this._a;return this._a=L,0!==m.length||$?{snapshot:new Ru(this.query,e.ca,p,m,e.mutatedKeys,0===L,$,!1,!!o&&o.resumeToken.approximateByteSize()>0),da:R}:{da:R}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Ng,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=or(),this.ca.forEach(o=>{this.Aa(o.key)&&(this.aa=this.aa.add(o.key))});const n=[];return e.forEach(o=>{this.aa.has(o)||n.push(new Ep(o))}),this.aa.forEach(o=>{e.has(o)||n.push(new vp(o))}),n}Ra(e){this.oa=e.hs,this.aa=or();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Ru.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class xg{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class By{constructor(e){this.key=e,this.ma=!1}}class Jm{constructor(e,n,o,u,p,m){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=p,this.maxConcurrentLimboResolutions=m,this.fa={},this.ga=new Ts(R=>ct(R),Ne),this.pa=new Map,this.ya=new Set,this.wa=new Pi(Kt.comparator),this.Sa=new Map,this.ba=new vg,this.Da={},this.Ca=new Map,this.va=Vd.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function kg(i,e){return nf.apply(this,arguments)}function nf(){return nf=(0,ae.c)(function*(i,e){const n=ud(i);let o,u;const p=n.ga.get(e);if(p)o=p.targetId,n.sharedClientState.addLocalQueryTarget(o),u=p.view.Va();else{const m=yield Bd(n.localStore,E(e)),R=n.sharedClientState.addLocalQueryTarget(m.targetId);o=m.targetId,u=yield Xm(n,e,o,"current"===R,m.resumeToken),n.isPrimaryClient&&id(n.remoteStore,m)}return u}),nf.apply(this,arguments)}function Xm(i,e,n,o,u){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,ae.c)(function*(i,e,n,o,u){i.Ma=(he,Me,Qe)=>{return(Gt=(0,ae.c)(function*(Ft,Rn,lr,On){let fr=Rn.view.ha(lr);fr.Xi&&(fr=yield $d(Ft.localStore,Rn.query,!1).then(({documents:Wc})=>Rn.view.ha(Wc,fr)));const mi=On&&On.targetChanges.get(Rn.targetId),Mi=On&&null!=On.targetMismatches.get(Rn.targetId),ro=Rn.view.applyChanges(fr,Ft.isPrimaryClient,mi,Mi);return Xl(Ft,Rn.targetId,ro.da),ro.snapshot}),function an(Ft,Rn,lr,On){return Gt.apply(this,arguments)})(i,he,Me,Qe);var Gt};const p=yield $d(i.localStore,e,!0),m=new Ip(e,p.hs),R=m.ha(p.documents),L=Dd.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),$=m.applyChanges(R,i.isPrimaryClient,L);Xl(i,n,$.da);const ne=new xg(e,n,m);return i.ga.set(e,ne),i.pa.has(n)?i.pa.get(n).push(e):i.pa.set(n,[e]),$.snapshot}),Fg.apply(this,arguments)}function Cp(i,e){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,ae.c)(function*(i,e){const n=Ht(i),o=n.ga.get(e),u=n.pa.get(o.targetId);if(u.length>1)return n.pa.set(o.targetId,u.filter(p=>!Ne(p,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield Hl(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),Au(n.remoteStore,o.targetId),Go(n,o.targetId)}).catch(vo))):(Go(n,o.targetId),yield Hl(n.localStore,o.targetId,!0))}),Lg.apply(this,arguments)}function Vg(){return Vg=(0,ae.c)(function*(i,e,n){const o=bp(i);try{const u=yield function(m,R){const L=Ht(m),$=wi.now(),ne=R.reduce((Qe,Gt)=>Qe.add(Gt.key),or());let he,Me;return L.persistence.runTransaction("Locally write mutations","readwrite",Qe=>{let Gt=bo(),an=or();return L.os.getEntries(Qe,ne).next(Ft=>{Gt=Ft,Gt.forEach((Rn,lr)=>{lr.isValidDocument()||(an=an.add(Rn))})}).next(()=>L.localDocuments.getOverlayedDocuments(Qe,Gt)).next(Ft=>{he=Ft;const Rn=[];for(const lr of R){const On=Vf(lr,he.get(lr.key).overlayedDocument);null!=On&&Rn.push(new kc(lr.key,On,Rf(On.value.mapValue),ts.exists(!0)))}return L.mutationQueue.addMutationBatch(Qe,$,Rn,R)}).next(Ft=>{Me=Ft;const Rn=Ft.applyToLocalDocumentSet(he,an);return L.documentOverlayCache.saveOverlays(Qe,Ft.batchId,Rn)})}).then(()=>({batchId:Me.batchId,changes:Sh(he)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(m,R,L){let $=m.Da[m.currentUser.toKey()];$||($=new Pi(bn)),$=$.insert(R,L),m.Da[m.currentUser.toKey()]=$}(o,u.batchId,n),yield Zl(o,u.changes),yield Ks(o.remoteStore)}catch(u){const p=bu(u,"Failed to persist write");n.reject(p)}}),Vg.apply(this,arguments)}function Zm(i,e){return wp.apply(this,arguments)}function wp(){return wp=(0,ae.c)(function*(i,e){const n=Ht(i);try{const o=yield function Uv(i,e){const n=Ht(i),o=e.snapshotVersion;let u=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const m=n.os.newChangeBuffer({trackRemovals:!0});u=n.ns;const R=[];e.targetChanges.forEach((ne,he)=>{const Me=u.get(he);if(!Me)return;R.push(n.Qr.removeMatchingKeys(p,ne.removedDocuments,he).next(()=>n.Qr.addMatchingKeys(p,ne.addedDocuments,he)));let Qe=Me.withSequenceNumber(p.currentSequenceNumber);var an,Ft,Rn;null!==e.targetMismatches.get(he)?Qe=Qe.withResumeToken(Os.EMPTY_BYTE_STRING,_n.min()).withLastLimboFreeSnapshotVersion(_n.min()):ne.resumeToken.approximateByteSize()>0&&(Qe=Qe.withResumeToken(ne.resumeToken,o)),u=u.insert(he,Qe),Ft=Qe,Rn=ne,(0===(an=Me).resumeToken.approximateByteSize()||Ft.snapshotVersion.toMicroseconds()-an.snapshotVersion.toMicroseconds()>=3e8||Rn.addedDocuments.size+Rn.modifiedDocuments.size+Rn.removedDocuments.size>0)&&R.push(n.Qr.updateTargetData(p,Qe))});let L=bo(),$=or();if(e.documentUpdates.forEach(ne=>{e.resolvedLimboDocuments.has(ne)&&R.push(n.persistence.referenceDelegate.updateLimboDocument(p,ne))}),R.push(Py(p,m,e.documentUpdates).next(ne=>{L=ne.cs,$=ne.ls})),!o.isEqual(_n.min())){const ne=n.Qr.getLastRemoteSnapshotVersion(p).next(he=>n.Qr.setTargetsMetadata(p,p.currentSequenceNumber,o));R.push(ne)}return et.waitFor(R).next(()=>m.apply(p)).next(()=>n.localDocuments.getLocalViewOfDocuments(p,L,$)).next(()=>L)}).then(p=>(n.ns=u,p))}(n.localStore,e);e.targetChanges.forEach((u,p)=>{const m=n.Sa.get(p);m&&(fn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.ma=!0:u.modifiedDocuments.size>0?fn(m.ma):u.removedDocuments.size>0&&(fn(m.ma),m.ma=!1))}),yield Zl(n,o,e)}catch(o){yield vo(o)}}),wp.apply(this,arguments)}function Bc(i,e,n){const o=Ht(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.ga.forEach((p,m)=>{const R=m.view.U_(e);R.snapshot&&u.push(R.snapshot)}),function(m,R){const L=Ht(m);L.onlineState=R;let $=!1;L.queries.forEach((ne,he)=>{for(const Me of he.Q_)Me.U_(R)&&($=!0)}),$&&mp(L)}(o.eventManager,e),u.length&&o.fa.u_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function Ug(i,e,n){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,ae.c)(function*(i,e,n){const o=Ht(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.Sa.get(e),p=u&&u.key;if(p){let m=new Pi(Kt.comparator);m=m.insert(p,Hi.newNoDocument(p,_n.min()));const R=or().add(p),L=new Qu(_n.min(),new Map,new Pi(bn),m,R);yield Zm(o,L),o.wa=o.wa.remove(p),o.Sa.delete(e),jg(o)}else yield Hl(o.localStore,e,!1).then(()=>Go(o,e,n)).catch(vo)}),Tp.apply(this,arguments)}function $y(i,e){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,ae.c)(function*(i,e){const n=Ht(i),o=e.batch.batchId;try{const u=yield function Vv(i,e){const n=Ht(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),p=n.os.newChangeBuffer({trackRemovals:!0});return function(R,L,$,ne){const he=$.batch,Me=he.keys();let Qe=et.resolve();return Me.forEach(Gt=>{Qe=Qe.next(()=>ne.getEntry(L,Gt)).next(an=>{const Ft=$.docVersions.get(Gt);fn(null!==Ft),an.version.compareTo(Ft)<0&&(he.applyToRemoteDocument(an,$),an.isValidDocument()&&(an.setReadTime($.commitVersion),ne.addEntry(an)))})}),Qe.next(()=>R.mutationQueue.removeMutationBatch(L,he))}(n,o,e,p).next(()=>p.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(R){let L=or();for(let $=0;$<R.mutationResults.length;++$)R.mutationResults[$].transformResults.length>0&&(L=L.add(R.batch.mutations[$].key));return L}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);Dp(n,o,null),rf(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield Zl(n,u)}catch(u){yield vo(u)}}),Zd.apply(this,arguments)}function e_(i,e,n){return eh.apply(this,arguments)}function eh(){return eh=(0,ae.c)(function*(i,e,n){const o=Ht(i);try{const u=yield function(m,R){const L=Ht(m);return L.persistence.runTransaction("Reject batch","readwrite-primary",$=>{let ne;return L.mutationQueue.lookupMutationBatch($,R).next(he=>(fn(null!==he),ne=he.keys(),L.mutationQueue.removeMutationBatch($,he))).next(()=>L.mutationQueue.performConsistencyCheck($)).next(()=>L.documentOverlayCache.removeOverlaysForBatchId($,ne,R)).next(()=>L.localDocuments.recalculateAndSaveOverlaysForDocumentKeys($,ne)).next(()=>L.localDocuments.getDocuments($,ne))})}(o.localStore,e);Dp(o,e,n),rf(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield Zl(o,u)}catch(u){yield vo(u)}}),eh.apply(this,arguments)}function t_(){return t_=(0,ae.c)(function*(i,e){const n=Ht(i);_a(n.remoteStore)||Nt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const R=Ht(m);return R.persistence.runTransaction("Get highest unacknowledged batch id","readonly",L=>R.mutationQueue.getHighestUnacknowledgedBatchId(L))}(n.localStore);if(-1===o)return void e.resolve();const u=n.Ca.get(o)||[];u.push(e),n.Ca.set(o,u)}catch(o){const u=bu(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),t_.apply(this,arguments)}function rf(i,e){(i.Ca.get(e)||[]).forEach(n=>{n.resolve()}),i.Ca.delete(e)}function Dp(i,e,n){const o=Ht(i);let u=o.Da[o.currentUser.toKey()];if(u){const p=u.get(e);p&&(n?p.reject(n):p.resolve(),u=u.remove(e)),o.Da[o.currentUser.toKey()]=u}}function Go(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.pa.get(e))i.ga.delete(o),n&&i.fa.xa(o,n);i.pa.delete(e),i.isPrimaryClient&&i.ba.Vr(e).forEach(o=>{i.ba.containsKey(o)||ad(i,o)})}function ad(i,e){i.ya.delete(e.path.canonicalString());const n=i.wa.get(e);null!==n&&(Au(i.remoteStore,n),i.wa=i.wa.remove(e),i.Sa.delete(n),jg(i))}function Xl(i,e,n){for(const o of n)o instanceof vp?(i.ba.addReference(o.key,e),jc(i,o)):o instanceof Ep?(Nt("SyncEngine","Document no longer in limbo: "+o.key),i.ba.removeReference(o.key,e),i.ba.containsKey(o.key)||ad(i,o.key)):sn()}function jc(i,e){const n=e.key,o=n.path.canonicalString();i.wa.get(n)||i.ya.has(o)||(Nt("SyncEngine","New document in limbo: "+n),i.ya.add(o),jg(i))}function jg(i){for(;i.ya.size>0&&i.wa.size<i.maxConcurrentLimboResolutions;){const e=i.ya.values().next().value;i.ya.delete(e);const n=new Kt(qr.fromString(e)),o=i.va.next();i.Sa.set(o,new By(n)),i.wa=i.wa.insert(n,o),id(i.remoteStore,new uc(E(Oc(n.path)),o,"TargetPurposeLimboResolution",$t._e))}}function Zl(i,e,n){return cd.apply(this,arguments)}function cd(){return cd=(0,ae.c)(function*(i,e,n){const o=Ht(i),u=[],p=[],m=[];var R;o.ga.isEmpty()||(o.ga.forEach((R,L)=>{m.push(o.Ma(L,e,n).then($=>{if(($||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(L.targetId,$?.fromCache?"not-current":"current"),$){u.push($);const ne=Cg.Ki(L.targetId,$);p.push(ne)}}))}),yield Promise.all(m),o.fa.u_(u),yield(R=(0,ae.c)(function*($,ne){const he=Ht($);try{yield he.persistence.runTransaction("notifyLocalViewChanges","readwrite",Me=>et.forEach(ne,Qe=>et.forEach(Qe.qi,Gt=>he.persistence.referenceDelegate.addReference(Me,Qe.targetId,Gt)).next(()=>et.forEach(Qe.Qi,Gt=>he.persistence.referenceDelegate.removeReference(Me,Qe.targetId,Gt)))))}catch(Me){if(!A(Me))throw Me;Nt("LocalStore","Failed to update sequence numbers: "+Me)}for(const Me of ne){const Qe=Me.targetId;if(!Me.fromCache){const Gt=he.ns.get(Qe),Ft=Gt.withLastLimboFreeSnapshotVersion(Gt.snapshotVersion);he.ns=he.ns.insert(Qe,Ft)}}}),function L($,ne){return R.apply(this,arguments)})(o.localStore,p))}),cd.apply(this,arguments)}function Gy(i,e){return ld.apply(this,arguments)}function ld(){return ld=(0,ae.c)(function*(i,e){const n=Ht(i);if(!n.currentUser.isEqual(e)){Nt("SyncEngine","User change. New user:",e.toKey());const o=yield Sy(n.localStore,e);n.currentUser=e,(p=n).Ca.forEach(R=>{R.forEach(L=>{L.reject(new bt(ht.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),p.Ca.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Zl(n,o.us)}var p}),ld.apply(this,arguments)}function sf(i,e){const n=Ht(i),o=n.Sa.get(e);if(o&&o.ma)return or().add(o.key);{let u=or();const p=n.pa.get(e);if(!p)return u;for(const m of p){const R=n.ga.get(m);u=u.unionWith(R.view.la)}return u}}function th(i,e){return Ou.apply(this,arguments)}function Ou(){return Ou=(0,ae.c)(function*(i,e){const n=Ht(i),o=yield $d(n.localStore,e.query,!0),u=e.view.Ra(o);return n.isPrimaryClient&&Xl(n,e.targetId,u.da),u}),Ou.apply(this,arguments)}function Sp(i,e){return Nu.apply(this,arguments)}function Nu(){return Nu=(0,ae.c)(function*(i,e){const n=Ht(i);return Dg(n.localStore,e).then(o=>Zl(n,o))}),Nu.apply(this,arguments)}function Ya(i,e,n,o){return eu.apply(this,arguments)}function eu(){return eu=(0,ae.c)(function*(i,e,n,o){const u=Ht(i),p=yield function(R,L){const $=Ht(R),ne=Ht($.mutationQueue);return $.persistence.runTransaction("Lookup mutation documents","readonly",he=>ne.vn(he,L).next(Me=>Me?$.localDocuments.getDocuments(he,Me):et.resolve(null)))}(u.localStore,e);var L;null!==p?("pending"===n?yield Ks(u.remoteStore):"acknowledged"===n||"rejected"===n?(Dp(u,e,o||null),rf(u,e),L=e,Ht(Ht(u.localStore).mutationQueue).Mn(L)):sn(),yield Zl(u,p)):Nt("SyncEngine","Cannot apply mutation batch with id: "+e)}),eu.apply(this,arguments)}function $g(){return $g=(0,ae.c)(function*(i,e){const n=Ht(i);if(ud(n),bp(n),!0===e&&!0!==n.Fa){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield Gg(n,o.toArray());n.Fa=!0,yield Ql(n.remoteStore,!0);for(const p of u)id(n.remoteStore,p)}else if(!1===e&&!1!==n.Fa){const o=[];let u=Promise.resolve();n.pa.forEach((p,m)=>{n.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(Go(n,m),Hl(n.localStore,m,!0))),Au(n.remoteStore,m)}),yield u,yield Gg(n,o),function(m){const R=Ht(m);R.Sa.forEach((L,$)=>{Au(R.remoteStore,$)}),R.ba.mr(),R.Sa=new Map,R.wa=new Pi(Kt.comparator)}(n),n.Fa=!1,yield Ql(n.remoteStore,!1)}}),$g.apply(this,arguments)}function Gg(i,e,n){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,ae.c)(function*(i,e,n){const o=Ht(i),u=[],p=[];for(const m of e){let R;const L=o.pa.get(m);if(L&&0!==L.length){R=yield Bd(o.localStore,E(L[0]));for(const $ of L){const ne=o.ga.get($),he=yield th(o,ne);he.snapshot&&p.push(he.snapshot)}}else{const $=yield Tg(o.localStore,m);R=yield Bd(o.localStore,$),yield Xm(o,Hg($),m,!1,R.resumeToken)}u.push(R)}return o.fa.u_(p),u}),Wg.apply(this,arguments)}function Hg(i){return Cd(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function af(i){return n=Ht(i).localStore,Ht(Ht(n).persistence).Li();var n}function n_(i,e,n,o){return xu.apply(this,arguments)}function xu(){return xu=(0,ae.c)(function*(i,e,n,o){const u=Ht(i);if(u.Fa)return void Nt("SyncEngine","Ignoring unexpected query state notification.");const p=u.pa.get(e);if(p&&p.length>0)switch(n){case"current":case"not-current":{const m=yield Dg(u.localStore,Nn(p[0])),R=Qu.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Os.EMPTY_BYTE_STRING);yield Zl(u,m,R);break}case"rejected":yield Hl(u.localStore,e,!0),Go(u,e,o);break;default:sn()}}),xu.apply(this,arguments)}function Ap(i,e,n){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,ae.c)(function*(i,e,n){const o=ud(i);if(o.Fa){for(const u of e){if(o.pa.has(u)){Nt("SyncEngine","Adding an already active target "+u);continue}const p=yield Tg(o.localStore,u),m=yield Bd(o.localStore,p);yield Xm(o,Hg(p),m.targetId,!1,m.resumeToken),id(o.remoteStore,m)}for(const u of n)o.pa.has(u)&&(yield Hl(o.localStore,u,!1).then(()=>{Au(o.remoteStore,u),Go(o,u)}).catch(vo))}}),Pp.apply(this,arguments)}function ud(i){const e=Ht(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ug.bind(null,e),e.fa.u_=Ly.bind(null,e.eventManager),e.fa.xa=Vy.bind(null,e.eventManager),e}function bp(i){const e=Ht(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$y.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=e_.bind(null,e),e}class cf{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,ae.c)(function*(){n.serializer=Su(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Dy(this.persistence,new Gm,e.initialUser,this.serializer)}createPersistence(e){return new Oo(Lh.Hr,this.serializer)}createSharedClientState(e){return new Wh}terminate(){var e=this;return(0,ae.c)(function*(){var n,o;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(o=e.indexBackfillerScheduler)||void 0===o||o.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lf extends cf{constructor(e,n,o){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,ae.c)(function*(){yield n().call(o,e),yield o.Na.initialize(o,e),yield bp(o.Na.syncEngine),yield Ks(o.Na.remoteStore),yield o.persistence.fi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Dy(this.persistence,new Gm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new fy(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new rt(n,this.persistence);return new dt(e.asyncQueue,o)}createPersistence(e){const n=$m(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?ga.withCacheSize(this.cacheSizeBytes):ga.DEFAULT;return new ip(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,Pg(),bg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Wh}}class zg extends lf{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,ae.c)(function*(){yield n().call(o,e);const u=o.Na.syncEngine;o.sharedClientState instanceof Ag&&(o.sharedClientState.syncEngine={Zs:Ya.bind(null,u),Xs:n_.bind(null,u),eo:Ap.bind(null,u),Li:af.bind(null,u),Ys:Sp.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.fi(function(){var p=(0,ae.c)(function*(m){yield function Wy(i,e){return $g.apply(this,arguments)}(o.Na.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start():m||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(m&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():m||o.indexBackfillerScheduler.stop())});return function(m){return p.apply(this,arguments)}}())})()}createSharedClientState(e){const n=Pg();if(!Ag.D(n))throw new bt(ht.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=$m(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ag(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class nh{initialize(e,n){var o=this;return(0,ae.c)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Bc(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Gy.bind(null,o.syncEngine),yield Ql(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Fy}createDatastore(e){const n=Su(e.databaseInfo.databaseId),o=new zh(e.databaseInfo);return new zd(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,p=e.asyncQueue,m=n=>Bc(this.syncEngine,n,0),R=op.D()?new op:new Hh,new dp(o,u,p,m,R);var o,u,p,m,R}createSyncEngine(e,n){return function(u,p,m,R,L,$,ne){const he=new Jm(u,p,m,R,L,$);return ne&&(he.Fa=!0),he}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,ae.c)(function*(){var n,o;yield(o=(0,ae.c)(function*(p){const m=Ht(p);Nt("RemoteStore","RemoteStore shutting down."),m.v_.add(5),yield Ra(m),m.M_.shutdown(),m.x_.set("Unknown")}),function u(p){return o.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function qg(i,e=10240){let n=0;return{read:()=>(0,ae.c)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,ae.c)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class rh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class r_{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new os,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(o=>{o&&o.ea()?this.metadata.resolve(o.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.X_)}`))},o=>this.metadata.reject(o))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,ae.c)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,ae.c)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,ae.c)(function*(){const n=yield e.Ka();if(null===n)return null;const o=e.qa.decode(n),u=Number(o);isNaN(u)&&e.$a(`length string (${o}) is not valid number`);const p=yield e.Ua(u);return new Uy(JSON.parse(p),n.length+u)})()}Wa(){return this.buffer.findIndex(e=>123===e)}Ka(){var e=this;return(0,ae.c)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const n=e.Wa();n<0&&e.$a("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}Ua(e){var n=this;return(0,ae.c)(function*(){for(;n.buffer.length<e;)(yield n.Ga())&&n.$a("Reached the end of bundle when more is expected.");const o=n.qa.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,ae.c)(function*(){const n=yield e.ka.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class uf{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,ae.c)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new bt(ht.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const o=yield(u=(0,ae.c)(function*(m,R){const L=Ht(m),$={documents:R.map(Qe=>Tu(L.serializer,Qe))},ne=yield L.vo("BatchGetDocuments",L.serializer.databaseId,qr.emptyPath(),$,R.length),he=new Map;ne.forEach(Qe=>{const Gt=function Dm(i,e){return"found"in e?function(o,u){fn(!!u.found);const p=Bl(o,u.found.name),m=zi(u.found.updateTime),R=u.found.createTime?zi(u.found.createTime):_n.min(),L=new as({mapValue:{fields:u.found.fields}});return Hi.newFoundDocument(p,m,R,L)}(i,e):"missing"in e?function(o,u){fn(!!u.missing),fn(!!u.readTime);const p=Bl(o,u.missing),m=zi(u.readTime);return Hi.newNoDocument(p,m)}(i,e):sn()}(L.serializer,Qe);he.set(Gt.key.toString(),Gt)});const Me=[];return R.forEach(Qe=>{const Gt=he.get(Qe.toString());fn(!!Gt),Me.push(Gt)}),Me}),function p(m,R){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new ul(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.c)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const p=Kt.fromPath(u);e.mutations.push(new eg(p,e.precondition(p)))}),yield(o=(0,ae.c)(function*(p,m){const R=Ht(p),L={writes:m.map($=>Mh(R.serializer,$))};yield R.So("Commit",R.serializer.databaseId,qr.emptyPath(),L)}),function u(p,m){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw sn();n=_n.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new bt(ht.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(_n.min())?ts.exists(!1):ts.updateTime(n):ts.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(_n.min()))throw new bt(ht.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ts.updateTime(n)}return ts.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class df{constructor(e,n,o,u,p){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=p,this.za=o.maxAttempts,this.jo=new qh(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,ae.c)(function*(){const n=new uf(e.datastore),o=e.Ja(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(p=>{e.Ya(p)}))}).catch(u=>{e.Ya(u)})}))}Ja(e){try{const n=this.updateFunction(e);return!Ut(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!Ul(n)}return!1}}class hf{constructor(e,n,o,u){var p=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=tr.UNAUTHENTICATED,this.clientId=Tc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,ae.c)(function*(R){Nt("FirestoreClient","Received user=",R.uid),yield p.authCredentialListener(R),p.user=R});return function(R){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(Nt("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.c)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=bu(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function ff(i,e){return pf.apply(this,arguments)}function pf(){return pf=(0,ae.c)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Nt("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,ae.c)(function*(p){o.isEqual(p)||(yield Sy(e.localStore,p),o=p)});return function(p){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),pf.apply(this,arguments)}function Rp(i,e){return ih.apply(this,arguments)}function ih(){return ih=(0,ae.c)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield i_(i);Nt("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,i.configuration),i.setCredentialChangeListener(o=>Zh(e.remoteStore,o)),i.setAppCheckTokenChangeListener((o,u)=>Zh(e.remoteStore,u)),i._onlineComponents=e}),ih.apply(this,arguments)}function Kg(i){return"FirebaseError"===i.name?i.code===ht.FAILED_PRECONDITION||i.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function i_(i){return Hy.apply(this,arguments)}function Hy(){return Hy=(0,ae.c)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Nt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ff(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!Kg(n))throw n;mo("Error using user provided cache. Falling back to memory cache: "+n),yield ff(i,new cf)}}else Nt("FirestoreClient","Using default OfflineComponentProvider"),yield ff(i,new cf);return i._offlineComponents}),Hy.apply(this,arguments)}function Yg(i){return Qg.apply(this,arguments)}function Qg(){return Qg=(0,ae.c)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Nt("FirestoreClient","Using user provided OnlineComponentProvider"),yield Rp(i,i._uninitializedComponentsProvider._online)):(Nt("FirestoreClient","Using default OnlineComponentProvider"),yield Rp(i,new nh))),i._onlineComponents}),Qg.apply(this,arguments)}function h(i){return i_(i).then(e=>e.persistence)}function a(i){return i_(i).then(e=>e.localStore)}function l(i){return Yg(i).then(e=>e.remoteStore)}function f(i){return Yg(i).then(e=>e.syncEngine)}function T(i){return O.apply(this,arguments)}function O(){return O=(0,ae.c)(function*(i){const e=yield Yg(i),n=e.eventManager;return n.onListen=kg.bind(null,e.syncEngine),n.onUnlisten=Cp.bind(null,e.syncEngine),n}),O.apply(this,arguments)}function Fe(i,e,n={}){const o=new os;return i.asyncQueue.enqueueAndForget((0,ae.c)(function*(){return function(p,m,R,L,$){const ne=new rh({next:Me=>{m.enqueueAndForget(()=>ef(p,he));const Qe=Me.docs.has(R);!Qe&&Me.fromCache?$.reject(new bt(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):Qe&&Me.fromCache&&L&&"server"===L.source?$.reject(new bt(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):$.resolve(Me)},error:Me=>$.reject(Me)}),he=new _p(Oc(R.path),ne,{includeMetadataChanges:!0,Z_:!0});return Jl(p,he)}(yield T(i),i.asyncQueue,e,n,o)})),o.promise}function ut(i,e,n={}){const o=new os;return i.asyncQueue.enqueueAndForget((0,ae.c)(function*(){return function(p,m,R,L,$){const ne=new rh({next:Me=>{m.enqueueAndForget(()=>ef(p,he)),Me.fromCache&&"server"===L.source?$.reject(new bt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):$.resolve(Me)},error:Me=>$.reject(Me)}),he=new _p(R,ne,{includeMetadataChanges:!0,Z_:!0});return Jl(p,he)}(yield T(i),i.asyncQueue,e,n,o)})),o.promise}function Ss(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const no=new Map;function ku(i,e,n){if(!n)throw new bt(ht.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function $c(i,e,n,o){if(!0===e&&!0===o)throw new bt(ht.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function ia(i){if(!Kt.isDocumentKey(i))throw new bt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ya(i){if(Kt.isDocumentKey(i))throw new bt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function fc(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":sn()}function mr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new bt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fc(i);throw new bt(ht.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function sh(i,e){if(e<=0)throw new bt(ht.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Gc{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new bt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new bt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$c("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Ss(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(p){if(void 0!==p.timeoutSeconds){if(isNaN(p.timeoutSeconds))throw new bt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${p.timeoutSeconds} (must not be NaN)`);if(p.timeoutSeconds<5)throw new bt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${p.timeoutSeconds} (minimum allowed value is 5)`);if(p.timeoutSeconds>30)throw new bt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${p.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oh{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new bt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gc(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new Kc;switch(o.type){case"firstParty":return new Bu(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new bt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=no.get(n);o&&(Nt("ComponentProvider","Removing Datastore"),no.delete(n),o.terminate())}(this),Promise.resolve()}}class xo{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new xo(this.firestore,e,this._query)}}class Qt{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class Mn extends xo{constructor(e,n,o){super(e,n,Oc(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new Kt(e))}withConverter(e){return new Mn(this.firestore,e,this._path)}}function Zn(i,e,...n){if(i=(0,we.Yj)(i),ku("collection","path",e),i instanceof oh){const o=qr.fromString(e,...n);return ya(o),new Mn(i,null,o)}{if(!(i instanceof Qt||i instanceof Mn))throw new bt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(qr.fromString(e,...n));return ya(o),new Mn(i.firestore,null,o)}}function Ys(i,e,...n){if(i=(0,we.Yj)(i),1===arguments.length&&(e=Tc.newId()),ku("doc","path",e),i instanceof oh){const o=qr.fromString(e,...n);return ia(o),new Qt(i,null,new Kt(o))}{if(!(i instanceof Qt||i instanceof Mn))throw new bt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(qr.fromString(e,...n));return ia(o),new Qt(i.firestore,i instanceof Mn?i.converter:null,new Kt(o))}}function pc(i,e){return i=(0,we.Yj)(i),e=(0,we.Yj)(e),(i instanceof Qt||i instanceof Mn)&&(e instanceof Qt||e instanceof Mn)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function va(i,e){return i=(0,we.Yj)(i),e=(0,we.Yj)(e),i instanceof xo&&e instanceof xo&&i.firestore===e.firestore&&Ne(i._query,e._query)&&i.converter===e.converter}class Fu{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new qh(this,"async_queue_retry"),this._u=()=>{const n=bg();n&&Nt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=bg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=bg();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new os;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,ae.c)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(n){if(!A(n))throw n;Nt("AsyncQueue","Operation failed with retryable error: "+n)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(o=>{throw this.ru=o,this.iu=!1,ri("INTERNAL UNHANDLED ERROR: ",function(m){let R=m.message||"";return m.stack&&(R=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),R}(o)),o}).then(o=>(this.iu=!1,o))));return this.Xa=n,n}enqueueAfterDelay(e,n,o){this.au(),this.ou.indexOf(e)>-1&&(n=0);const u=Qd.createAndSchedule(this,e,n,o,p=>this.lu(p));return this.nu.push(u),u}au(){this.ru&&sn()}verifyOperationInProgress(){}hu(){var e=this;return(0,ae.c)(function*(){let n;do{n=e.Xa,yield n}while(n!==e.Xa)})()}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}function bi(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const p of["next","error","complete"])if(p in u&&"function"==typeof u[p])return!0;return!1}(i)}class Op{constructor(){this._progressObserver={},this._taskCompletionResolver=new os,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class br extends oh{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new Fu,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Np(this),this._firestoreClient.terminate()}}function _s(i){return i._firestoreClient||Np(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Np(i){var e,n,o;const u=i._freezeSettings(),p=(L=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new hu(i._databaseId,L,i._persistenceKey,(ne=u).host,ne.ssl,ne.experimentalForceLongPolling,ne.experimentalAutoDetectLongPolling,Ss(ne.experimentalLongPollingOptions),ne.useFetchStreams));var L,ne;i._firestoreClient=new hf(i._authCredentials,i._appCheckCredentials,i._queue,p),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function $v(i,e,n){const o=new os;return i.asyncQueue.enqueue((0,ae.c)(function*(){try{yield ff(i,n),yield Rp(i,e),o.resolve()}catch(u){const p=u;if(!Kg(p))throw p;mo("Error enabling indexeddb cache. Falling back to memory cache: "+p),o.reject(p)}})).then(()=>o.promise)}function Wv(i){if(i._initialized||i._terminated)throw new bt(ht.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lu(Os.fromBase64String(e))}catch(n){throw new bt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Lu(Os.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ch{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new bt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ai(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gf{constructor(e){this._methodName=e}}class o_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new bt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new bt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bn(this._lat,e._lat)||bn(this._long,e._long)}}const Yy=/^__.*__$/;class zv{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new kc(e,this.data,this.fieldMask,n,this.fieldTransforms):new ll(e,this.data,n,this.fieldTransforms)}}class qv{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new kc(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Kv(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sn()}}class a_{constructor(e,n,o,u,p,m){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===p&&this.Eu(),this.fieldTransforms=p||[],this.fieldMask=m||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new a_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Au({path:o,Vu:!1});return u.mu(e),u}fu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Au({path:o,Vu:!1});return u.Eu(),u}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return mf(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(Kv(this.du)&&Yy.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class fI{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Su(e)}Su(e,n,o,u=!1){return new a_({du:e,methodName:n,wu:o,path:Ai.emptyPath(),Vu:!1,yu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lh(i){const e=i._freezeSettings(),n=Su(i._databaseId);return new fI(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Zg(i,e,n,o,u,p={}){const m=i.Su(p.merge||p.mergeFields?2:0,e,n,u);Jy("Data must be an object, but it was:",m,o);const R=Xv(o,m);let L,$;if(p.merge)L=new Io(m.fieldMask),$=m.fieldTransforms;else if(p.mergeFields){const ne=[];for(const he of p.mergeFields){const Me=nm(e,he,n);if(!m.contains(Me))throw new bt(ht.INVALID_ARGUMENT,`Field '${Me}' is specified in your field mask but missing from your input data.`);eE(ne,Me)||ne.push(Me)}L=new Io(ne),$=m.fieldTransforms.filter(he=>L.covers(he.field))}else L=null,$=m.fieldTransforms;return new zv(new as(R),L,$)}class xp extends gf{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xp}}function Yv(i,e,n){return new a_({du:3,wu:e.settings.wu,methodName:i._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Qy extends gf{_toFieldTransform(e){return new xc(e.path,new kl)}isEqual(e){return e instanceof Qy}}class c_ extends gf{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=Yv(this,e,!0),o=this.bu.map(p=>uh(p,n)),u=new Eu(o);return new xc(e.path,u)}isEqual(e){return e instanceof c_&&(0,we.IN)(this.bu,e.bu)}}class em extends gf{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=Yv(this,e,!0),o=this.bu.map(p=>uh(p,n)),u=new Fl(o);return new xc(e.path,u)}isEqual(e){return e instanceof em&&(0,we.IN)(this.bu,e.bu)}}class Qv extends gf{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){const n=new Iu(e.serializer,Ph(e.serializer,this.Du));return new xc(e.path,n)}isEqual(e){return e instanceof Qv&&this.Du===e.Du}}function l_(i,e,n,o){const u=i.Su(1,e,n);Jy("Data must be an object, but it was:",u,o);const p=[],m=as.empty();ja(o,(L,$)=>{const ne=Xy(e,L,n);$=(0,we.Yj)($);const he=u.fu(ne);if($ instanceof xp)p.push(ne);else{const Me=uh($,he);null!=Me&&(p.push(ne),m.set(ne,Me))}});const R=new Io(p);return new qv(m,R,u.fieldTransforms)}function tm(i,e,n,o,u,p){const m=i.Su(1,e,n),R=[nm(e,o,n)],L=[u];if(p.length%2!=0)throw new bt(ht.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Me=0;Me<p.length;Me+=2)R.push(nm(e,p[Me])),L.push(p[Me+1]);const $=[],ne=as.empty();for(let Me=R.length-1;Me>=0;--Me)if(!eE($,R[Me])){const Qe=R[Me];let Gt=L[Me];Gt=(0,we.Yj)(Gt);const an=m.fu(Qe);if(Gt instanceof xp)$.push(Qe);else{const Ft=uh(Gt,an);null!=Ft&&($.push(Qe),ne.set(Qe,Ft))}}const he=new Io($);return new qv(ne,he,m.fieldTransforms)}function Jv(i,e,n,o=!1){return uh(n,i.Su(o?4:3,e))}function uh(i,e){if(Zv(i=(0,we.Yj)(i)))return Jy("Unsupported field value:",e,i),Xv(i,e);if(i instanceof gf)return function(o,u){if(!Kv(u.du))throw u.pu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.pu(`${o._methodName}() is not currently supported inside arrays`);const p=o._toFieldTransform(u);p&&u.fieldTransforms.push(p)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(o,u){const p=[];let m=0;for(const R of o){let L=uh(R,u.gu(m));null==L&&(L={nullValue:"NULL_VALUE"}),p.push(L),m++}return{arrayValue:{values:p}}}(i,e)}return function(o,u){if(null===(o=(0,we.Yj)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Ph(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const p=wi.fromDate(o);return{timestampValue:Md(u.serializer,p)}}if(o instanceof wi){const p=new wi(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Md(u.serializer,p)}}if(o instanceof o_)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Lu)return{bytesValue:Cm(u.serializer,o._byteString)};if(o instanceof Qt){const p=u.databaseId,m=o.firestore._databaseId;if(!m.isEqual(p))throw u.pu(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${p.projectId}/${p.database}`);return{referenceValue:to(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.pu(`Unsupported field value: ${fc(o)}`)}(i,e)}function Xv(i,e){const n={};return Sc(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ja(i,(o,u)=>{const p=uh(u,e.Ru(o));null!=p&&(n[o]=p)}),{mapValue:{fields:n}}}function Zv(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof wi||i instanceof o_||i instanceof Lu||i instanceof Qt||i instanceof gf)}function Jy(i,e,n){if(!Zv(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=fc(n);throw e.pu("an object"===o?i+" a custom object":i+" "+o)}var u}function nm(i,e,n){if((e=(0,we.Yj)(e))instanceof ch)return e._internalPath;if("string"==typeof e)return Xy(i,e);throw mf("Field path arguments must be of type string or ",i,!1,void 0,n)}const aw=new RegExp("[~\\*/\\[\\]]");function Xy(i,e,n){if(e.search(aw)>=0)throw mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new ch(...e.split("."))._internalPath}catch{throw mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function mf(i,e,n,o,u){const p=o&&!o.isEmpty(),m=void 0!==u;let R=`Function ${e}() called with invalid data`;n&&(R+=" (via `toFirestore()`)"),R+=". ";let L="";return(p||m)&&(L+=" (found",p&&(L+=` in field ${o}`),m&&(L+=` in document ${u}`),L+=")"),new bt(ht.INVALID_ARGUMENT,R+i+L)}function eE(i,e){return i.some(n=>n.isEqual(e))}class rm{constructor(e,n,o,u,p){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new cw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(u_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class cw extends rm{data(){return super.data()}}function u_(i,e){return"string"==typeof e?Xy(i,e):e instanceof ch?e._internalPath:e._delegate._internalPath}function tE(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new bt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zy{}class im extends Zy{}function dh(i,e,...n){let o=[];e instanceof Zy&&o.push(e),o=o.concat(n),function(p){const m=p.filter(L=>L instanceof yf).length,R=p.filter(L=>L instanceof kp).length;if(m>1||m>0&&R>0)throw new bt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class kp extends im{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new kp(e,n,o)}_apply(e){const n=this._parse(e);return iE(e._query,n),new xo(e.firestore,e.converter,K(e._query,n))}_parse(e){const n=lh(e.firestore);return function(p,m,R,L,$,ne,he){let Me;if($.isKeyField()){if("array-contains"===ne||"array-contains-any"===ne)throw new bt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ne}' queries on documentId().`);if("in"===ne||"not-in"===ne){tv(he,ne);const Qe=[];for(const Gt of he)Qe.push(ev(L,p,Gt));Me={arrayValue:{values:Qe}}}else Me=ev(L,p,he)}else"in"!==ne&&"not-in"!==ne&&"array-contains-any"!==ne||tv(he,ne),Me=Jv(R,"where",he,"in"===ne||"not-in"===ne);return Lr.create($,ne,Me)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class yf extends Zy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new yf(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:Jr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,p){let m=u;const R=p.getFlattenedFilters();for(const L of R)iE(m,L),m=K(m,L)}(e._query,n),new xo(e.firestore,e.converter,K(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Qs extends im{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Qs(e,n)}_apply(e){const n=function(u,p,m){if(null!==u.startAt)throw new bt(ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new bt(ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pc(p,m)}(e._query,this._field,this._direction);return new xo(e.firestore,e.converter,function(u,p){const m=u.explicitOrderBy.concat([p]);return new lc(u.path,u.collectionGroup,m,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}class Fp extends im{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new Fp(e,n,o)}_apply(e){return new xo(e.firestore,e.converter,oe(e._query,this._limit,this._limitType))}}class Lp extends im{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Lp(e,n,o)}_apply(e){const n=hh(e,this.type,this._docOrFields,this._inclusive);return new xo(e.firestore,e.converter,(p=n,new lc((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,p,u.endAt)));var u,p}}class sm extends im{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new sm(e,n,o)}_apply(e){const n=hh(e,this.type,this._docOrFields,this._inclusive);return new xo(e.firestore,e.converter,(p=n,new lc((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,p)));var u,p}}function hh(i,e,n,o){if(n[0]=(0,we.Yj)(n[0]),n[0]instanceof rm)return function(p,m,R,L,$){if(!L)throw new bt(ht.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${R}().`);const ne=[];for(const he of _(p))if(he.field.isKeyField())ne.push(Wa(m,L.key));else{const Me=L.data.field(he.field);if(Zc(Me))throw new bt(ht.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+he.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Me){const Qe=he.field.canonicalString();throw new bt(ht.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Qe}' (used as the orderBy) does not exist.`)}ne.push(Me)}return new Bo(ne,$)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=lh(i.firestore);return function(m,R,L,$,ne,he){const Me=m.explicitOrderBy;if(ne.length>Me.length)throw new bt(ht.INVALID_ARGUMENT,`Too many arguments provided to ${$}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Qe=[];for(let Gt=0;Gt<ne.length;Gt++){const an=ne[Gt];if(Me[Gt].field.isKeyField()){if("string"!=typeof an)throw new bt(ht.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${$}(), but got a ${typeof an}`);if(!S(m)&&-1!==an.indexOf("/"))throw new bt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${$}() must be a plain document ID, but '${an}' contains a slash.`);const Ft=m.path.child(qr.fromString(an));if(!Kt.isDocumentKey(Ft))throw new bt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${$}() must result in a valid document path, but '${Ft}' is not because it contains an odd number of segments.`);const Rn=new Kt(Ft);Qe.push(Wa(R,Rn))}else{const Ft=Jv(L,$,an);Qe.push(Ft)}}return new Bo(Qe,he)}(i._query,i.firestore._databaseId,u,e,n,o)}}function ev(i,e,n){if("string"==typeof(n=(0,we.Yj)(n))){if(""===n)throw new bt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!S(e)&&-1!==n.indexOf("/"))throw new bt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(qr.fromString(n));if(!Kt.isDocumentKey(o))throw new bt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Wa(i,new Kt(o))}if(n instanceof Qt)return Wa(i,n._key);throw new bt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fc(n)}.`)}function tv(i,e){if(!Array.isArray(i)||0===i.length)throw new bt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iE(i,e){const n=function(u,p){for(const m of u)for(const R of m.getFlattenedFilters())if(p.indexOf(R.op)>=0)return R.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new bt(ht.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class d_{convertValue(e,n="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw sn()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return ja(e,(u,p)=>{o[u]=this.convertValue(p,n)}),o}convertGeoPoint(e){return new o_(Cs(e.latitude),Cs(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=du(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Ac(e));default:return null}}convertTimestamp(e){const n=Xc(e);return new wi(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=qr.fromString(e);fn(ug(o));const u=new ws(o.get(1),o.get(3)),p=new Kt(o.popFirst(5));return u.isEqual(n)||ri(`Document ${p} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),p}}function om(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class am extends d_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}class Ef{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dd extends rm{constructor(e,n,o,u,p,m){super(e,n,o,u,m),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new If(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(u_("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class If extends dd{data(e={}){return super.data(e)}}class hd{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Ef(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new If(this._firestore,this._userDataWriter,o.key,o,new Ef(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,p){if(u._snapshot.oldDocs.isEmpty()){let m=0;return u._snapshot.docChanges.map(R=>({type:"added",doc:new If(u._firestore,u._userDataWriter,R.doc.key,R.doc,new Ef(u._snapshot.mutatedKeys.has(R.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:m++}))}{let m=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(R=>p||3!==R.type).map(R=>{const L=new If(u._firestore,u._userDataWriter,R.doc.key,R.doc,new Ef(u._snapshot.mutatedKeys.has(R.doc.key),u._snapshot.fromCache),u.query.converter);let $=-1,ne=-1;return 0!==R.type&&($=m.indexOf(R.doc.key),m=m.delete(R.doc.key)),1!==R.type&&(m=m.add(R.doc),ne=m.indexOf(R.doc.key)),{type:fh(R.type),doc:L,oldIndex:$,newIndex:ne}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function fh(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sn()}}function Vp(i,e){return i instanceof dd&&e instanceof dd?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof hd&&e instanceof hd&&i._firestore===e._firestore&&va(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class tu extends d_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}function cE(i,e,n){i=mr(i,Qt);const o=mr(i.firestore,br),u=om(i.converter,e,n);return Up(o,[Zg(lh(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,ts.none())])}function lE(i,e,n,...o){i=mr(i,Qt);const u=mr(i.firestore,br),p=lh(u);let m;return m="string"==typeof(e=(0,we.Yj)(e))||e instanceof ch?tm(p,"updateDoc",i._key,e,n,o):l_(p,"updateDoc",i._key,e),Up(u,[m.toMutation(i._key,ts.exists(!0))])}function uE(i,...e){var n,o,u;i=(0,we.Yj)(i);let p={includeMetadataChanges:!1},m=0;"object"!=typeof e[m]||bi(e[m])||(p=e[m],m++);const R={includeMetadataChanges:p.includeMetadataChanges};if(bi(e[m])){const he=e[m];e[m]=null===(n=he.next)||void 0===n?void 0:n.bind(he),e[m+1]=null===(o=he.error)||void 0===o?void 0:o.bind(he),e[m+2]=null===(u=he.complete)||void 0===u?void 0:u.bind(he)}let L,$,ne;if(i instanceof Qt)$=mr(i.firestore,br),ne=Oc(i._key.path),L={next:he=>{e[m]&&e[m](rv($,i,he))},error:e[m+1],complete:e[m+2]};else{const he=mr(i,xo);$=mr(he.firestore,br),ne=he._query;const Me=new tu($);L={next:Qe=>{e[m]&&e[m](new hd($,Me,he,Qe))},error:e[m+1],complete:e[m+2]},tE(i._query)}return function(Me,Qe,Gt,an){const Ft=new rh(an),Rn=new _p(Qe,Ft,Gt);return Me.asyncQueue.enqueueAndForget((0,ae.c)(function*(){return Jl(yield T(Me),Rn)})),()=>{Ft.La(),Me.asyncQueue.enqueueAndForget((0,ae.c)(function*(){return ef(yield T(Me),Rn)}))}}(_s($),ne,R,L)}function Up(i,e){return function(o,u){const p=new os;return o.asyncQueue.enqueueAndForget((0,ae.c)(function*(){return function jy(i,e,n){return Vg.apply(this,arguments)}(yield f(o),u,p)})),p.promise}(_s(i),e)}function rv(i,e,n){const o=n.docs.get(e._key),u=new tu(i);return new dd(i,u,e._key,o,new Ef(n.hasPendingWrites,n.fromCache),e.converter)}const MI={maxAttempts:5};class p_{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=lh(e)}set(e,n,o){this._verifyNotCommitted();const u=Vu(e,this._firestore),p=om(u.converter,n,o),m=Zg(this._dataReader,"WriteBatch.set",u._key,p,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,ts.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const p=Vu(e,this._firestore);let m;return m="string"==typeof(n=(0,we.Yj)(n))||n instanceof ch?tm(this._dataReader,"WriteBatch.update",p._key,n,o,u):l_(this._dataReader,"WriteBatch.update",p._key,n),this._mutations.push(m.toMutation(p._key,ts.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Vu(e,this._firestore);return this._mutations=this._mutations.concat(new ul(n._key,ts.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(ht.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vu(i,e){if((i=(0,we.Yj)(i)).firestore!==e)throw new bt(ht.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class mE extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=lh(n)}get(n){const o=Vu(n,this._firestore),u=new am(this._firestore);return this._transaction.lookup([o._key]).then(p=>{if(!p||1!==p.length)return sn();const m=p[0];if(m.isFoundDocument())return new rm(this._firestore,u,m.key,m,o.converter);if(m.isNoDocument())return new rm(this._firestore,u,o._key,null,o.converter);throw sn()})}set(n,o,u){const p=Vu(n,this._firestore),m=om(p.converter,o,u),R=Zg(this._dataReader,"Transaction.set",p._key,m,null!==p.converter,u);return this._transaction.set(p._key,R),this}update(n,o,u,...p){const m=Vu(n,this._firestore);let R;return R="string"==typeof(o=(0,we.Yj)(o))||o instanceof ch?tm(this._dataReader,"Transaction.update",m._key,o,u,p):l_(this._dataReader,"Transaction.update",m._key,o),this._transaction.update(m._key,R),this}delete(n){const o=Vu(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Vu(e,this._firestore),o=new tu(this._firestore);return super.get(e).then(u=>new dd(this._firestore,o,n._key,u._document,new Ef(!1,!1),n.converter))}}function __(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new bt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function CE(){if(typeof Uint8Array>"u")throw new bt("unimplemented","Uint8Arrays are not available in this environment.")}function BI(){if(!function Jc(){return typeof atob<"u"}())throw new bt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){gi=Re.SDK_VERSION,(0,Re._registerComponent)(new Xe.Yl("firestore",(o,{instanceIdentifier:u,options:p})=>{const m=o.getProvider("app").getImmediate(),R=new br(new wl(o.getProvider("auth-internal")),new So(o.getProvider("app-check-internal")),function($,ne){if(!Object.prototype.hasOwnProperty.apply($.options,["projectId"]))throw new bt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ws($.options.projectId,ne)}(m,u),m);return p=Object.assign({useFetchStreams:n},p),R._setSettings(p),R},"PUBLIC").setMultipleInstances(!0)),(0,Re.registerVersion)(Ua,"4.4.2",e),(0,Re.registerVersion)(Ua,"4.4.2","esm2017")}();class y_{constructor(e){this._delegate=e}static fromBase64String(e){return BI(),new y_(Lu.fromBase64String(e))}static fromUint8Array(e){return CE(),new y_(Lu.fromUint8Array(e))}toBase64(){return BI(),this._delegate.toBase64()}toUint8Array(){return CE(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wE(i){return function pw(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const o of e)if(o in n&&"function"==typeof n[o])return!0;return!1}(i,["next","error","complete"])}class gw{enableIndexedDbPersistence(e,n){return function s_(i,e){Wv(i=mr(i,br));const n=_s(i);if(n._uninitializedComponentsProvider)throw new bt(ht.FAILED_PRECONDITION,"SDK cache is already specified.");mo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new nh;return $v(n,u,new lf(u,o.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function jv(i){Wv(i=mr(i,br));const e=_s(i);if(e._uninitializedComponentsProvider)throw new bt(ht.FAILED_PRECONDITION,"SDK cache is already specified.");mo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new nh;return $v(e,o,new zg(o,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function dI(i){if(i._initialized&&!i._terminated)throw new bt(ht.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new os;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ae.c)(function*(){try{yield(n=(0,ae.c)(function*(u){if(!ps.D())return Promise.resolve();const p=u+"main";yield ps.delete(p)}),function o(u){return n.apply(this,arguments)})($m(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class jI{constructor(e,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof ws||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&mo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,o={}){!function Jg(i,e,n,o={}){var u;const p=(i=mr(i,oh))._getSettings(),m=`${e}:${n}`;if("firestore.googleapis.com"!==p.host&&p.host!==m&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},p),{host:m,ssl:!1})),o.mockUserToken){let R,L;if("string"==typeof o.mockUserToken)R=o.mockUserToken,L=tr.MOCK_USER;else{R=(0,we.YD)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const $=o.mockUserToken.sub||o.mockUserToken.user_id;if(!$)throw new bt(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");L=new tr($)}i._authCredentials=new gd(new Is(R,L))}}(this._delegate,e,n,o)}enableNetwork(){return function qy(i){return function B(i){return i.asyncQueue.enqueue((0,ae.c)(function*(){const e=yield h(i),n=yield l(i);return e.setNetworkEnabled(!0),function(u){const p=Ht(u);return p.v_.delete(0),pl(p)}(n)}))}(_s(i=mr(i,br)))}(this._delegate)}disableNetwork(){return function Gv(i){return function X(i){return i.asyncQueue.enqueue((0,ae.c)(function*(){const e=yield h(i),n=yield l(i);return e.setNetworkEnabled(!1),(o=(0,ae.c)(function*(p){const m=Ht(p);m.v_.add(0),yield Ra(m),m.x_.set("Offline")}),function u(p){return o.apply(this,arguments)})(n);var o}))}(_s(i=mr(i,br)))}(this._delegate)}enablePersistence(e){let n=!1,o=!1;return e&&(n=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,$c("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function hI(i){return function(n){const o=new os;return n.asyncQueue.enqueueAndForget((0,ae.c)(function*(){return function Bg(i,e){return t_.apply(this,arguments)}(yield f(n),o)})),o.promise}(_s(i=mr(i,br)))}(this._delegate)}onSnapshotsInSync(e){return function TI(i,e){return function Mt(i,e){const n=new rh(e);return i.asyncQueue.enqueueAndForget((0,ae.c)(function*(){return u=yield T(i),p=n,Ht(u).K_.add(p),void p.next();var u,p})),()=>{n.La(),i.asyncQueue.enqueueAndForget((0,ae.c)(function*(){return u=yield T(i),p=n,void Ht(u).K_.delete(p);var u,p}))}}(_s(i=mr(i,br)),bi(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new bt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ru(this,Zn(this._delegate,e))}catch(n){throw mc(n,"collection()","Firestore.collection()")}}doc(e){try{return new nu(this,Ys(this._delegate,e))}catch(n){throw mc(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _c(this,function Ei(i,e){if(i=mr(i,oh),ku("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new bt(ht.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xo(i,null,(o=e,new lc(qr.emptyPath(),o)));var o}(this._delegate,e))}catch(n){throw mc(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ov(i,e,n){i=mr(i,br);const o=Object.assign(Object.assign({},MI),n);return function(p){if(p.maxAttempts<1)throw new bt(ht.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(p,m,R){const L=new os;return p.asyncQueue.enqueueAndForget((0,ae.c)(function*(){const $=yield function v(i){return Yg(i).then(e=>e.datastore)}(p);new df(p.asyncQueue,$,R,m,L).ja()})),L.promise}(_s(i),u=>e(new mE(i,u)),o)}(this._delegate,n=>e(new lv(this,n)))}batch(){return _s(this._delegate),new uv(new p_(this._delegate,e=>Up(this._delegate,e)))}loadBundle(e){return function sw(i,e){const n=_s(i=mr(i,br)),o=new Op;return function xt(i,e,n,o){const u=function(m,R){let L;return L="string"==typeof m?Lc().encode(m):m,ne=function(ne,he){if(ne instanceof Uint8Array)return qg(ne,void 0);if(ne instanceof ArrayBuffer)return qg(new Uint8Array(ne),void 0);if(ne instanceof ReadableStream)return ne.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(L),new r_(ne,R);var ne}(n,Su(e));i.asyncQueue.enqueueAndForget((0,ae.c)(function*(){!function uI(i,e,n){const o=Ht(i);var u;(u=(0,ae.c)(function*(m,R,L){try{const $=yield R.getMetadata();if(yield function(Gt,an){const Ft=Ht(Gt),Rn=zi(an.createTime);return Ft.persistence.runTransaction("hasNewerBundle","readonly",lr=>Ft.$r.getBundleMetadata(lr,an.id)).then(lr=>!!lr&&lr.createTime.compareTo(Rn)>=0)}(m.localStore,$))return yield R.close(),L._completeWith({taskState:"Success",documentsLoaded:(Gt=$).totalDocuments,bytesLoaded:Gt.totalBytes,totalDocuments:Gt.totalDocuments,totalBytes:Gt.totalBytes}),Promise.resolve(new Set);L._updateProgress(tf($));const ne=new Oa($,m.localStore,R.serializer);let he=yield R.Oa();for(;he;){const Qe=yield ne.na(he);Qe&&L._updateProgress(Qe),he=yield R.Oa()}const Me=yield ne.complete();return yield Zl(m,Me.sa,void 0),yield function(Gt,an){const Ft=Ht(Gt);return Ft.persistence.runTransaction("Save bundle","readwrite",Rn=>Ft.$r.saveBundleMetadata(Rn,an))}(m.localStore,$),L._completeWith(Me.progress),Promise.resolve(Me.ia)}catch($){return mo("SyncEngine",`Loading bundle failed with ${$}`),L._failWith($),Promise.resolve(new Set)}var Gt}),function p(m,R,L){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield f(i),u,o)}))}(n,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function ow(i,e){return function on(i,e){return i.asyncQueue.enqueue((0,ae.c)(function*(){return function(o,u){const p=Ht(o);return p.persistence.runTransaction("Get named query","readonly",m=>p.$r.getNamedQuery(m,u))}(yield a(i),e)}))}(_s(i=mr(i,br)),e).then(n=>n?new xo(i,null,n.query):null)}(this._delegate,e).then(n=>n?new _c(this,n):null)}}class cv extends d_{constructor(e){super(),this.firestore=e}convertBytes(e){return new y_(new Lu(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return nu.forKey(n,this.firestore,null)}}class lv{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new cv(e)}get(e){const n=iu(e);return this._delegate.get(n).then(o=>new v_(this._firestore,new dd(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(e,n,o){const u=iu(e);return o?(__("Transaction.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const p=iu(e);return 2===arguments.length?this._delegate.update(p,n):this._delegate.update(p,n,o,...u),this}delete(e){const n=iu(e);return this._delegate.delete(n),this}}class uv{constructor(e){this._delegate=e}set(e,n,o){const u=iu(e);return o?(__("WriteBatch.set",o),this._delegate.set(u,n,o)):this._delegate.set(u,n),this}update(e,n,o,...u){const p=iu(e);return 2===arguments.length?this._delegate.update(p,n):this._delegate.update(p,n,o,...u),this}delete(e){const n=iu(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Bp{constructor(e,n,o){this._firestore=e,this._userDataWriter=n,this._delegate=o}fromFirestore(e,n){const o=new If(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new E_(this._firestore,o),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const o=Bp.INSTANCES;let u=o.get(e);u||(u=new WeakMap,o.set(e,u));let p=u.get(n);return p||(p=new Bp(e,new cv(e),n),u.set(n,p)),p}}Bp.INSTANCES=new WeakMap;class nu{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new cv(e)}static forPath(e,n,o){if(e.length%2!=0)throw new bt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new nu(n,new Qt(n._delegate,o,new Kt(e)))}static forKey(e,n,o){return new nu(n,new Qt(n._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new ru(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ru(this.firestore,Zn(this._delegate,e))}catch(n){throw mc(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,we.Yj)(e))instanceof Qt&&pc(this._delegate,e)}set(e,n){n=__("DocumentReference.set",n);try{return n?cE(this._delegate,e,n):cE(this._delegate,e)}catch(o){throw mc(o,"setDoc()","DocumentReference.set()")}}update(e,n,...o){try{return 1===arguments.length?lE(this._delegate,e):lE(this._delegate,e,n,...o)}catch(u){throw mc(u,"updateDoc()","DocumentReference.update()")}}delete(){return function CI(i){return Up(mr(i.firestore,br),[new ul(i._key,ts.none())])}(this._delegate)}onSnapshot(...e){const n=$I(e),o=GI(e,u=>new v_(this.firestore,new dd(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return uE(this._delegate,n,o)}get(e){let n;return n="cache"===e?.source?function oE(i){i=mr(i,Qt);const e=mr(i.firestore,br),n=_s(e),o=new tu(e);return function se(i,e){const n=new os;return i.asyncQueue.enqueueAndForget((0,ae.c)(function*(){return(o=(0,ae.c)(function*(p,m,R){try{const L=yield function(ne,he){const Me=Ht(ne);return Me.persistence.runTransaction("read document","readonly",Qe=>Me.localDocuments.getDocument(Qe,he))}(p,m);L.isFoundDocument()?R.resolve(L):L.isNoDocument()?R.resolve(null):R.reject(new bt(ht.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(L){const $=bu(L,`Failed to get document '${m} from cache`);R.reject($)}}),function u(p,m,R){return o.apply(this,arguments)})(yield a(i),e,n);var o})),n.promise}(n,i._key).then(u=>new dd(e,o,i._key,u,new Ef(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function aE(i){i=mr(i,Qt);const e=mr(i.firestore,br);return Fe(_s(e),i._key,{source:"server"}).then(n=>rv(e,i,n))}(this._delegate):function uw(i){i=mr(i,Qt);const e=mr(i.firestore,br);return Fe(_s(e),i._key).then(n=>rv(e,i,n))}(this._delegate),n.then(o=>new v_(this.firestore,new dd(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new nu(this.firestore,this._delegate.withConverter(e?Bp.getInstance(this.firestore,e):null))}}function mc(i,e,n){return i.message=i.message.replace(e,n),i}function $I(i){for(const e of i)if("object"==typeof e&&!wE(e))return e;return{}}function GI(i,e){var n,o;let u;return u=wE(i[0])?i[0]:wE(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:p=>{u.next&&u.next(e(p))},error:null===(n=u.error)||void 0===n?void 0:n.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class v_{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new nu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Vp(this._delegate,e._delegate)}}class E_ extends v_{data(e){const n=this._delegate.data(e);return this._delegate._converter||function cu(i,e){i||sn()}(void 0!==n),n}}class _c{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new cv(e)}where(e,n,o){try{return new _c(this.firestore,dh(this._delegate,function _f(i,e,n){const o=e,u=u_("where",i);return kp._create(u,o,n)}(e,n,o)))}catch(u){throw mc(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new _c(this.firestore,dh(this._delegate,function pI(i,e="asc"){const n=e,o=u_("orderBy",i);return Qs._create(o,n)}(e,n)))}catch(o){throw mc(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _c(this.firestore,dh(this._delegate,function gI(i){return sh("limit",i),Fp._create("limit",i,"F")}(e)))}catch(n){throw mc(n,"limit()","Query.limit()")}}limitToLast(e){try{return new _c(this.firestore,dh(this._delegate,function mI(i){return sh("limitToLast",i),Fp._create("limitToLast",i,"L")}(e)))}catch(n){throw mc(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _c(this.firestore,dh(this._delegate,function nE(...i){return Lp._create("startAt",i,!0)}(...e)))}catch(n){throw mc(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _c(this.firestore,dh(this._delegate,function rE(...i){return Lp._create("startAfter",i,!1)}(...e)))}catch(n){throw mc(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _c(this.firestore,dh(this._delegate,function _I(...i){return sm._create("endBefore",i,!1)}(...e)))}catch(n){throw mc(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _c(this.firestore,dh(this._delegate,function yI(...i){return sm._create("endAt",i,!0)}(...e)))}catch(n){throw mc(n,"endAt()","Query.endAt()")}}isEqual(e){return va(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function II(i){i=mr(i,xo);const e=mr(i.firestore,br),n=_s(e),o=new tu(e);return function Ge(i,e){const n=new os;return i.asyncQueue.enqueueAndForget((0,ae.c)(function*(){return(o=(0,ae.c)(function*(p,m,R){try{const L=yield $d(p,m,!0),$=new Ip(m,L.hs),ne=$.ha(L.documents),he=$.applyChanges(ne,!1);R.resolve(he.snapshot)}catch(L){const $=bu(L,`Failed to execute query '${m} against cache`);R.reject($)}}),function u(p,m,R){return o.apply(this,arguments)})(yield a(i),e,n);var o})),n.promise}(n,i._query).then(u=>new hd(e,o,i,u))}(this._delegate):"server"===e?.source?function cm(i){i=mr(i,xo);const e=mr(i.firestore,br),n=_s(e),o=new tu(e);return ut(n,i._query,{source:"server"}).then(u=>new hd(e,o,i,u))}(this._delegate):function EI(i){i=mr(i,xo);const e=mr(i.firestore,br),n=_s(e),o=new tu(e);return tE(i._query),ut(n,i._query).then(u=>new hd(e,o,i,u))}(this._delegate),n.then(o=>new dv(this.firestore,new hd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const n=$I(e),o=GI(e,u=>new dv(this.firestore,new hd(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return uE(this._delegate,n,o)}withConverter(e){return new _c(this.firestore,this._delegate.withConverter(e?Bp.getInstance(this.firestore,e):null))}}class _w{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new E_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class dv{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new _c(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new E_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new _w(this._firestore,n))}forEach(e,n){this._delegate.forEach(o=>{e.call(n,new E_(this._firestore,o))})}isEqual(e){return Vp(this._delegate,e._delegate)}}class ru extends _c{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new nu(this.firestore,e):null}doc(e){try{return new nu(this.firestore,void 0===e?Ys(this._delegate):Ys(this._delegate,e))}catch(n){throw mc(n,"doc()","CollectionReference.doc()")}}add(e){return function wI(i,e){const n=mr(i.firestore,br),o=Ys(i),u=om(i.converter,e);return Up(n,[Zg(lh(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,ts.exists(!1))]).then(()=>o)}(this._delegate,e).then(n=>new nu(this.firestore,n))}isEqual(e){return pc(this._delegate,e._delegate)}withConverter(e){return new ru(this.firestore,this._delegate.withConverter(e?Bp.getInstance(this.firestore,e):null))}}function iu(i){return mr(i,Qt)}class hv{constructor(...e){this._delegate=new ch(...e)}static documentId(){return new hv(Ai.keyField().canonicalString())}isEqual(e){return(e=(0,we.Yj)(e))instanceof ch&&this._delegate._internalPath.isEqual(e._internalPath)}}class jp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function RI(){return new Qy("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new jp(e)}static delete(){const e=function av(){return new xp("deleteField")}();return e._methodName="FieldValue.delete",new jp(e)}static arrayUnion(...e){const n=function OI(...i){return new c_("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new jp(n)}static arrayRemove(...e){const n=function NI(...i){return new em("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new jp(n)}static increment(e){const n=function xI(i){return new Qv("increment",i)}(e);return n._methodName="FieldValue.increment",new jp(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const TE={Firestore:jI,GeoPoint:o_,Timestamp:wi,Blob:y_,Transaction:lv,WriteBatch:uv,DocumentReference:nu,DocumentSnapshot:v_,Query:_c,QueryDocumentSnapshot:E_,QuerySnapshot:dv,CollectionReference:ru,FieldPath:hv,FieldValue:jp,setLogLevel:function mw(i){!function Cc(i){ir.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function yw(i){(function WI(i,e){i.INTERNAL.registerComponent(new Xe.Yl("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),u=n.getProvider("firestore").getImmediate();return e(o,u)},"PUBLIC").setServiceProps(Object.assign({},TE)))})(i,(e,n)=>new jI(e,n,new gw)),i.registerVersion("@firebase/firestore-compat","0.3.25")}(ke.c);var HI=V(9252);function DE(i,e){return function zI(i,e=Ee.M){return new Le._(n=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},n)}):o=i.onSnapshot({includeMetadataChanges:!0},n),()=>{o?.()}})}(i,e)}function C_(i,e){return DE(i,e).pipe((0,be.k)(n=>({payload:n,type:"query"})))}class SE{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const o=this.ref.collection(e),{ref:u,query:p}=ME(o,n);return new w_(u,p,this.afs)}snapshotChanges(){return function I_(i,e){return DE(i,e).pipe((0,fe.W)(void 0),Ie(),(0,be.k)(n=>{const[o,u]=n;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(W.wH)}valueChanges(e={}){return this.snapshotChanges().pipe((0,be.k)(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return(0,Pe.Q)(this.ref.get(e)).pipe(W.wH)}}function dm(i,e){return C_(i,e).pipe((0,fe.W)(void 0),Ie(),(0,be.k)(n=>{const[o,u]=n,p=u.payload.docChanges(),m=p.map(R=>({type:R.type,payload:R}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((R,L)=>{const $=p.find(he=>he.doc.ref.isEqual(R.ref)),ne=o?.payload.docs.find(he=>he.ref.isEqual(R.ref));$&&JSON.stringify($.doc.metadata)===JSON.stringify(R.metadata)||!$&&ne&&JSON.stringify(ne.metadata)===JSON.stringify(R.metadata)||m.push({type:"modified",payload:{oldIndex:L,newIndex:L,type:"modified",doc:R}})}),m}))}function qI(i,e,n){return dm(i,n).pipe((0,pt.K)((o,u)=>function AE(i,e,n){return e.forEach(o=>{n.indexOf(o.type)>-1&&(i=function KI(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return PE(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return PE(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return PE(i,e.oldIndex,1)}return i}(i,o))}),i}(o,u.map(p=>p.payload),e),[]),function tt(i,e=Be.Z){return i=i??Ke,(0,xe.i)((n,o)=>{let u,p=!0;n.subscribe((0,it.e)(o,m=>{const R=e(m);(p||!i(u,R))&&(p=!1,u=R,o.next(m))}))})}(),(0,be.k)(o=>o.map(u=>({type:u.type,payload:u}))))}function PE(i,e,n,...o){const u=i.slice();return u.splice(e,n,...o),u}function fv(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class w_{ref;query;afs;constructor(e,n,o){this.ref=e,this.query=n,this.afs=o}stateChanges(e){let n=dm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,be.k)(o=>o.filter(u=>e.indexOf(u.type)>-1)))),n.pipe((0,fe.W)(void 0),Ie(),(0,st.I)(([o,u])=>u.length>0||!o),(0,be.k)(([,o])=>o),W.wH)}auditTrail(e){return this.stateChanges(e).pipe((0,pt.K)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=fv(e);return qI(this.query,n,this.afs.schedulers.outsideAngular).pipe(W.wH)}valueChanges(e={}){return C_(this.query,this.afs.schedulers.outsideAngular).pipe((0,be.k)(n=>n.payload.docs.map(o=>e.idField?{...o.data(),[e.idField]:o.id}:o.data())),W.wH)}get(e){return(0,Pe.Q)(this.query.get(e)).pipe(W.wH)}add(e){return this.ref.add(e)}doc(e){return new SE(this.ref.doc(e),this.afs)}}class YI{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?dm(this.query,this.afs.schedulers.outsideAngular).pipe((0,be.k)(n=>n.filter(o=>e.indexOf(o.type)>-1)),(0,st.I)(n=>n.length>0),W.wH):dm(this.query,this.afs.schedulers.outsideAngular).pipe(W.wH)}auditTrail(e){return this.stateChanges(e).pipe((0,pt.K)((n,o)=>[...n,...o],[]))}snapshotChanges(e){const n=fv(e);return qI(this.query,n,this.afs.schedulers.outsideAngular).pipe(W.wH)}valueChanges(e={}){return C_(this.query,this.afs.schedulers.outsideAngular).pipe((0,be.k)(o=>o.payload.docs.map(u=>e.idField?{[e.idField]:u.id,...u.data()}:u.data())),W.wH)}get(e){return(0,Pe.Q)(this.query.get(e)).pipe(W.wH)}}const bE=new D.UbH("angularfire2.enableFirestorePersistence"),hm=new D.UbH("angularfire2.firestore.persistenceSettings"),QI=new D.UbH("angularfire2.firestore.settings"),JI=new D.UbH("angularfire2.firestore.use-emulator");function ME(i,e=(n=>n)){return{query:e(i),ref:i}}let XI=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(n,o,u,p,m,R,L,$,ne,he,Me,Qe,Gt,an,Ft,Rn,lr){this.schedulers=L;const On=(0,_e._G)(n,R,o),fr=ne;he&&(0,k.CU)(On,R,Me,Gt,an,Ft,Qe,Rn),[this.firestore,this.persistenceEnabled$]=(0,_e.PQ)(`${On.name}.firestore`,"AngularFirestore",On.name,()=>{const mi=R.runOutsideAngular(()=>On.firestore());if(p&&mi.settings(p),fr&&mi.useEmulator(...fr),u&&!(0,y.uf)(m)){const Mi=()=>{try{return(0,Pe.Q)(mi.enablePersistence($||void 0).then(()=>!0,()=>!1))}catch(ro){return typeof console<"u"&&console.warn(ro),(0,ge.of)(!1)}};return[mi,R.runOutsideAngular(Mi)]}return[mi,(0,ge.of)(!1)]},[p,fr,u])}collection(n,o){let u;u="string"==typeof n?this.firestore.collection(n):n;const{ref:p,query:m}=ME(u,o),R=this.schedulers.ngZone.run(()=>p);return new w_(R,m,this)}collectionGroup(n,o){const u=o||(m=>m),p=this.firestore.collectionGroup(n);return new YI(u(p),this)}doc(n){let o;o="string"==typeof n?this.firestore.doc(n):n;const u=this.schedulers.ngZone.run(()=>o);return new SE(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||i)(D.CoB(_e.E9),D.CoB(_e.Ml,8),D.CoB(bE,8),D.CoB(QI,8),D.CoB(D.AHE),D.CoB(D.WW2),D.CoB(W.u),D.CoB(hm,8),D.CoB(JI,8),D.CoB(k._o,8),D.CoB(k.GW,8),D.CoB(k.mq,8),D.CoB(k.ox,8),D.CoB(k.cd,8),D.CoB(k._8,8),D.CoB(k.Ev,8),D.CoB(W.gJ,8))};static \u0275prov=D.wxM({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),ZI=(()=>{class i{constructor(){HI.c.registerVersion("angularfire",W.j1.full,"fst-compat")}static enablePersistence(n){return{ngModule:i,providers:[{provide:bE,useValue:!0},{provide:hm,useValue:n}]}}static \u0275fac=function(o){return new(o||i)};static \u0275mod=D.a4G({type:i});static \u0275inj=D.s3X({providers:[XI]})}return i})();var eC=V(8836),pv=V(4856),ph=V(9684),RE=V(788);function tC(i,e){1&i&&(D.I0R(0,"span",13),D.OEk(1,"invalid Email format"),D.C$Y())}function vw(i,e){1&i&&(D.I0R(0,"span",13),D.OEk(1,"Email is required"),D.C$Y())}function OE(i,e){if(1&i){const n=D.KQA();D.I0R(0,"div",14)(1,"img",15),D.qCj("click",function(){D.usT(n);const u=D.GaO();return D.CGJ(u.togglePasswordVisibility("password"))}),D.C$Y()()}}function NE(i,e){if(1&i){const n=D.KQA();D.I0R(0,"div",14)(1,"img",16),D.qCj("click",function(){D.usT(n);const u=D.GaO();return D.CGJ(u.togglePasswordVisibility("password"))}),D.C$Y()()}}function T_(i,e){1&i&&(D.I0R(0,"span",13),D.OEk(1," Password is required "),D.C$Y())}function Ew(i,e){if(1&i){const n=D.KQA();D.I0R(0,"div",14)(1,"img",15),D.qCj("click",function(){D.usT(n);const u=D.GaO(2);return D.CGJ(u.togglePasswordVisibility("confirmPassword"))}),D.C$Y()()}}function Iw(i,e){if(1&i){const n=D.KQA();D.I0R(0,"div",14)(1,"img",16),D.qCj("click",function(){D.usT(n);const u=D.GaO(2);return D.CGJ(u.togglePasswordVisibility("confirmPassword"))}),D.C$Y()()}}function nC(i,e){1&i&&(D.I0R(0,"span",13),D.OEk(1," Confirm password is required "),D.C$Y())}function Cf(i,e){if(1&i&&(D.I0R(0,"div",4)(1,"div",7),D.wR5(2,"input",17),D.yuY(3,Ew,2,0,"div",9)(4,Iw,2,0,"div",9),D.C$Y(),D.yuY(5,nC,2,0,"span",6),D.C$Y()),2&i){const n=D.GaO();let o;D.yG2(2),D.E7m("type",n.showConfirmPassword),D.yG2(),D.E7m("ngIf","password"!==n.showConfirmPassword),D.yG2(),D.E7m("ngIf","password"===n.showConfirmPassword),D.yG2(),D.E7m("ngIf",(null==(o=n.form.get("confirmPassword"))?null:o.hasError("required"))&&(null==(o=n.form.get("confirmPassword"))?null:o.touched))}}function xE(i,e){if(1&i){const n=D.KQA();D.I0R(0,"button",18),D.qCj("click",function(){D.usT(n);const u=D.GaO();return D.CGJ(u.googleLogin())}),D.OEk(1," Sign in with Google "),D.wR5(2,"img",19),D.C$Y()}}function rC(i,e){if(1&i){const n=D.KQA();D.I0R(0,"button",18),D.qCj("click",function(){D.usT(n);const u=D.GaO();return D.CGJ(u.emailAndPasswordLogin())}),D.OEk(1," Sign in "),D.C$Y()}}function Cw(i,e){if(1&i){const n=D.KQA();D.I0R(0,"button",18),D.qCj("click",function(){D.usT(n);const u=D.GaO();return D.CGJ(u.registration())}),D.OEk(1," Register "),D.C$Y()}}const gv=i=>{const e=i.get("password")?.value,n=i.get("confirmPassword")?.value;return e&&n&&e!==n?{passwordsMismatch:!0}:null},iC=[{path:"",component:(()=>{class i{constructor(n,o){this.fb=n,this.logInService=o,this.selected=!0,this.showPassword="password",this.showConfirmPassword="password",this.form=this.fb.group({email:["",[q.AQ.required,q.AQ.email]],password:["",q.AQ.required],confirmPassword:["",q.AQ.required]},{validators:gv})}ngOnInit(){}select(){this.selected=!this.selected,this.clearInputs()}togglePasswordVisibility(n){"password"===n?this.showPassword="password"===this.showPassword?"":"password":"confirmPassword"===n&&(this.showConfirmPassword="password"===this.showConfirmPassword?"":"password")}googleLogin(){this.logInService.loginWithGoogle()}emailAndPasswordLogin(){const n=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.loginWithEmailAndPassword(n,o)}registration(){if(this.form.hasError("passwordsMismatch"))return console.log("Password mismatch detected"),void alert("Password and confirm password do not match");console.log(this.form.get("password")?.getRawValue()),console.log(this.form.get("confirmPassword")?.getRawValue()),console.log("Form is valid, proceeding with registration");let n=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.registration(n,o),this.clearInputs(),this.selected=!0}clearInputs(){this.form.get("email")?.setValue(""),this.form.get("password")?.setValue(""),this.form.get("confirmPassword")?.setValue(""),this.form.get("email")?.markAsUntouched(),this.form.get("password")?.markAsUntouched(),this.form.get("confirmPassword")?.markAsUntouched()}static#e=this.\u0275fac=function(o){return new(o||i)(D.GI1(q.im),D.GI1(RE.e))};static#t=this.\u0275cmp=D.In1({type:i,selectors:[["app-login"]],decls:24,vars:14,consts:[[1,"loginContainer"],[1,"container"],[3,"ngClass","click"],[3,"formGroup"],[1,"inputs"],["formControlName","email","placeholder","Email ex:sabadmin@gmail.com"],["class","error-message",4,"ngIf"],[1,"password-input"],["formControlName","password","placeholder","Password ex:123123123",3,"type"],["class","pass-img",4,"ngIf"],["class","inputs",4,"ngIf"],[3,"click",4,"ngIf"],["routerLink","/products"],[1,"error-message"],[1,"pass-img"],["src","assets/show.png","alt","img",3,"click"],["src","assets/hidden.png","alt","img",3,"click"],["formControlName","confirmPassword","placeholder","Confirm Password",3,"type"],[3,"click"],["src","assets/google.png","alt","img"]],template:function(o,u){if(1&o&&(D.I0R(0,"div",0)(1,"div",1)(2,"div")(3,"p",2),D.qCj("click",function(){return u.select()}),D.OEk(4,"LOG IN"),D.C$Y(),D.I0R(5,"p",2),D.qCj("click",function(){return u.select()}),D.OEk(6,"SIGN UP"),D.C$Y()(),D.I0R(7,"form",3)(8,"div",4),D.wR5(9,"input",5),D.yuY(10,tC,2,0,"span",6)(11,vw,2,0,"span",6),D.C$Y(),D.I0R(12,"div",4)(13,"div",7),D.wR5(14,"input",8),D.yuY(15,OE,2,0,"div",9)(16,NE,2,0,"div",9),D.C$Y(),D.yuY(17,T_,2,0,"span",6),D.C$Y(),D.yuY(18,Cf,6,4,"div",10)(19,xE,3,0,"button",11)(20,rC,2,0,"button",11)(21,Cw,2,0,"button",11),D.I0R(22,"button",12),D.OEk(23,"Guest Mode"),D.C$Y()()()()),2&o){let p,m,R;D.yG2(3),D.E7m("ngClass",u.selected?"selected":""),D.yG2(2),D.E7m("ngClass",u.selected?"":"selected"),D.yG2(2),D.E7m("formGroup",u.form)("@toggleState",u.selected?"login":"signup"),D.yG2(3),D.E7m("ngIf",null==(p=u.form.get("email"))?null:p.hasError("email")),D.yG2(),D.E7m("ngIf",(null==(m=u.form.get("email"))?null:m.hasError("required"))&&(null==(m=u.form.get("email"))?null:m.touched)),D.yG2(3),D.E7m("type",u.showPassword),D.yG2(),D.E7m("ngIf","password"!==u.showPassword),D.yG2(),D.E7m("ngIf","password"===u.showPassword),D.yG2(),D.E7m("ngIf",(null==(R=u.form.get("password"))?null:R.hasError("required"))&&(null==(R=u.form.get("password"))?null:R.touched)),D.yG2(),D.E7m("ngIf",!u.selected),D.yG2(),D.E7m("ngIf",u.selected),D.yG2(),D.E7m("ngIf",u.selected),D.yG2(),D.E7m("ngIf",!u.selected)}},dependencies:[y.QF,y.u_,q.sz,q.ot,q.ue,q.u,q.uW,q.Wo,pv.ER],styles:[".loginContainer[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:400px;height:400px;background-color:#62dfdf;border-radius:4px;background-image:url(background.05b7e6a7f70c58a5.webp);background-size:cover;transition:transform .3s ease-in-out}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;gap:20px;padding:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{cursor:pointer;font-size:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]{position:relative}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:6px;right:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{width:100%;height:70%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:200px;height:30px;border-radius:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#13afc7;color:#fff;display:flex;justify-content:center;align-items:center;cursor:pointer}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:5px}.selected[_ngcontent-%COMP%]{color:#fff;border-bottom:1px solid white}.error-message[_ngcontent-%COMP%]{font-size:14px;color:red}.button-disabled[_ngcontent-%COMP%]{background-color:#8ac9d3}"],data:{animation:[(0,ph.gV)("toggleState",[(0,ph.K2)("login",(0,ph.wb)({transform:"translateX(0)"})),(0,ph.K2)("signup",(0,ph.wb)({transform:"translateY(-10%)"})),(0,ph.aK)("login <=> signup",[(0,ph.Cs)("0.4s ease-in-out")])])]},changeDetection:0})}return i})()}];let FE=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=D.a4G({type:i});static#n=this.\u0275inj=D.s3X({imports:[pv.qQ.forChild(iC),pv.qQ]})}return i})();var LE=V(7048);let ww=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=D.a4G({type:i});static#n=this.\u0275inj=D.s3X({providers:[eC.wR],imports:[y.MD,q.y,q.sl,ZI,k.Q$,FE,LE.SU]})}return i})()},788:(jt,He,V)=>{V.d(He,{e:()=>fe});var y=V(8836),q=V(6700),k=V(4704),D=V(9144),W=V(2700),_e=V(4496),Ee=V(2740),Le=V(7048),Pe=V(4856),ge=V(1116);let fe=(()=>{class xe{constructor(Ie,be,pt,Be){this.auth=Ie,this.http=be,this.router=pt,this.cartService=Be,this.loggedUser=new q.g(void 0),this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app/musicShopUsers",this.isAdmin=new q.g(!1),this.likedProducts=new q.g([])}loginWithGoogle(){this.auth.signInWithPopup(new y.wR).then(Ie=>{localStorage.setItem("token",JSON.stringify(Ie.user?.uid)),this.findUser(Ie.user?.email).subscribe(be=>{void 0===be?this.addUserTodatabase(Ie.user?.email,Ie.user?.photoURL):this.findUser(Ie.user?.email).subscribe(pt=>{this.loggedUser.next(pt),this.likedProducts.next(pt?.user.likedProducts),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(pt))})})},Ie=>{alert(Ie.mesasage)})}loginWithEmailAndPassword(Ie,be){this.auth.signInWithEmailAndPassword(Ie,be).then(pt=>{this.findUser(pt.user?.email).subscribe(Be=>{this.loggedUser.next(Be),this.likedProducts.next(Be?.user.likedProducts),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(Be))})},pt=>{alert(pt.message),console.log(pt.mesasage)})}registration(Ie,be){this.auth.createUserWithEmailAndPassword(Ie,be).then(pt=>{this.addUserTodatabase(pt.user?.email)},pt=>{alert(pt.message)})}addUserTodatabase(Ie,be){this.http.post(`${this.url}.json`,{email:Ie,isAdmin:!1,photoUrl:be,address:"",likedProducts:[{key:"none",category:"other"}],purchasedProducts:[{email:Ie,userId:Ie,date:new Date,totalPrice:0,products:[{quantity:-1,product:{key:"unknown",product:{category:"other",model:"none",price:-1,quantity:-1,discount:-1,photoUrl:["none"]}}}]}]}).subscribe(()=>{console.log("User created succesfully")},Be=>{alert(Be.message)})}findUser(Ie){return this.http.get(`${this.url}.json`).pipe((0,k.k)(be=>{let pt,Be="";if(Object.entries(be).find(([tt,Ke])=>{Ke.email===Ie&&(pt=Ke,Be=tt)}),Be&&pt)return{user:pt,key:Be}}),(0,D.a)(be=>(console.error(be),(0,W.of)(void 0))))}findUserById(Ie){return this.http.get(`${this.url}/${Ie}.json`).pipe((0,k.k)(be=>be.email))}checkIfLoggedIn(){if(localStorage.getItem("currentUser")){let Ie=JSON.parse(localStorage.getItem("currentUser"));this.loggedUser.next(Ie),this.likedProducts.next(Ie?.user.likedProducts),localStorage.getItem("cart")&&this.cartService.cart.next(JSON.parse(localStorage.getItem("cart")))}}logOut(){localStorage.removeItem("currentUser"),localStorage.removeItem("cart"),this.likedProducts.next([]),this.loggedUser.next(void 0),this.cartService.cart.next([])}static#e=this.\u0275fac=function(be){return new(be||xe)(_e.CoB(Ee._o),_e.CoB(Le.KK),_e.CoB(Pe.E5),_e.CoB(ge.c))};static#t=this.\u0275prov=_e.wxM({token:xe,factory:xe.\u0275fac,providedIn:"root"})}return xe})()},640:(jt,He,V)=>{V.d(He,{_:()=>W});var y=V(6700),q=V(4496),k=V(788);function D(_e,Ee){1&_e&&(q.I0R(0,"div",2),q.wR5(1,"div",3),q.I0R(2,"p"),q.OEk(3,"Loading..."),q.C$Y()())}let W=(()=>{class _e{constructor(Le){this.authService=Le,this.isEditing="",this.loadingSubject=new y.g(!0),this.loading$=this.loadingSubject.asObservable()}ngOnInit(){this.authService.checkIfLoggedIn()}loadingValue(Le){this.loadingSubject.next(!Le)}static#e=this.\u0275fac=function(Pe){return new(Pe||_e)(q.GI1(k.e))};static#t=this.\u0275cmp=q.In1({type:_e,selectors:[["app-product-page"]],decls:11,vars:7,consts:[["class","loading-container",4,"ngIf"],[3,"category","productsImported"],[1,"loading-container"],[1,"loader"]],template:function(Pe,ge){1&Pe&&(q.wR5(0,"app-header")(1,"app-top-products"),q.I0R(2,"h1"),q.OEk(3,"Our Products"),q.C$Y(),q.yuY(4,D,4,0,"div",0),q.wVc(5,"async"),q.I0R(6,"app-product-page-single-category",1),q.qCj("productsImported",function(xe){return ge.loadingValue(xe)}),q.C$Y(),q.I0R(7,"app-product-page-single-category",1),q.qCj("productsImported",function(xe){return ge.loadingValue(xe)}),q.C$Y(),q.I0R(8,"app-product-page-single-category",1),q.qCj("productsImported",function(xe){return ge.loadingValue(xe)}),q.C$Y(),q.I0R(9,"app-product-page-single-category",1),q.qCj("productsImported",function(xe){return ge.loadingValue(xe)}),q.C$Y(),q.wR5(10,"app-footer")),2&Pe&&(q.yG2(4),q.E7m("ngIf",q.kDX(5,5,ge.loading$)),q.yG2(2),q.E7m("category","guitar"),q.yG2(),q.E7m("category","drum"),q.yG2(),q.E7m("category","piano"),q.yG2(),q.E7m("category","bass"))},styles:["h1[_ngcontent-%COMP%]{display:flex;justify-content:center}.loading-container[_ngcontent-%COMP%]{margin:0 auto;width:300px;height:300px;display:flex;flex-direction:column;justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%] > .loader[_ngcontent-%COMP%]{width:60px;aspect-ratio:1;border-radius:50%;border:8px solid lightblue;border-right-color:orange;animation:_ngcontent-%COMP%_l2 1s infinite linear}@keyframes _ngcontent-%COMP%_l2{to{transform:rotate(1turn)}}"],changeDetection:0})}return _e})()},3280:(jt,He,V)=>{V.r(He),V.d(He,{ProductPageModule:()=>ae});var y=V(1368),q=V(640),k=V(4856),D=V(4496);const W=[{path:"",component:q._}];let _e=(()=>{class Re{static#e=this.\u0275fac=function(we){return new(we||Re)};static#t=this.\u0275mod=D.a4G({type:Re});static#n=this.\u0275inj=D.s3X({imports:[k.qQ.forChild(W),k.qQ]})}return Re})();var Ee=V(112),Le=V(3252),Pe=V(3048);let it=(()=>{class Re{constructor(pe){this.cdr=pe,this.index=0,this.imgUrls=["assets/guitar1.jpg","assets/piano.png","assets/drum.avif","assets/bass.webp"],this.img=this.imgUrls[0]}ngOnInit(){this.startTimeChangeInterval()}startTimeChangeInterval(){this.intervalSubscription=function xe(Re=0,Xe=Ee.M){return Re<0&&(Re=0),function fe(Re=0,Xe,pe=Ee.a){let we=-1;return null!=Xe&&((0,Pe.G)(Xe)?pe=Xe:we=Xe),new Le._(Ve=>{let ze=function ge(Re){return Re instanceof Date&&!isNaN(Re)}(Re)?+Re-pe.now():Re;ze<0&&(ze=0);let at=0;return pe.schedule(function(){Ve.closed||(Ve.next(at++),0<=we?this.schedule(void 0,we):Ve.complete())},ze)})}(Re,Re,Xe)}(4e3).subscribe(()=>{this.changeImgUp(),this.cdr.detectChanges()})}changeImgUp(){3===this.index?(this.index=0,this.img=this.imgUrls[this.index]):(this.img=this.imgUrls[this.index+1],this.index++),this.clearInterval()}changeImgDown(){0===this.index?(this.index=3,this.img=this.imgUrls[this.index]):(this.img=this.imgUrls[this.index-1],this.index--),this.clearInterval()}changeIndex(pe){this.index=pe,this.img=this.imgUrls[pe],this.clearInterval()}clearInterval(){this.intervalSubscription&&this.intervalSubscription?.unsubscribe(),this.startTimeChangeInterval()}static#e=this.\u0275fac=function(we){return new(we||Re)(D.GI1(D.kD9))};static#t=this.\u0275cmp=D.In1({type:Re,selectors:[["app-top-products"]],decls:12,vars:5,consts:[[1,"topProducts-container"],[3,"ngClass","click"],[1,"arrows"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"images"],["alt","img",3,"src"]],template:function(we,Ve){1&we&&(D.I0R(0,"div",0)(1,"div")(2,"div")(3,"div",1),D.qCj("click",function(){return Ve.changeIndex(0)}),D.C$Y(),D.I0R(4,"div",1),D.qCj("click",function(){return Ve.changeIndex(1)}),D.C$Y(),D.I0R(5,"div",1),D.qCj("click",function(){return Ve.changeIndex(2)}),D.C$Y(),D.I0R(6,"div",1),D.qCj("click",function(){return Ve.changeIndex(3)}),D.C$Y()(),D.I0R(7,"div",2)(8,"img",3),D.qCj("click",function(){return Ve.changeImgDown()}),D.C$Y(),D.I0R(9,"img",4),D.qCj("click",function(){return Ve.changeImgUp()}),D.C$Y()()(),D.I0R(10,"div",5),D.wR5(11,"img",6),D.C$Y()()),2&we&&(D.yG2(3),D.E7m("ngClass",0===Ve.index?"highlight":""),D.yG2(),D.E7m("ngClass",1===Ve.index?"highlight":""),D.yG2(),D.E7m("ngClass",2===Ve.index?"highlight":""),D.yG2(),D.E7m("ngClass",3===Ve.index?"highlight":""),D.yG2(5),D.E7m("src",Ve.img,D.K6U))},dependencies:[y.QF],styles:[".topProducts-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0 auto 100px;gap:20px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;flex-direction:column;align-items:center;gap:10px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child{display:flex;gap:10px;width:100%}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]{width:10px;height:10px;border:.4px solid #ffc107;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]{display:flex}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:600px;height:300px}.highlight[_ngcontent-%COMP%]{background-color:#ffc107}"],changeDetection:0})}return Re})();var Ie=V(1092),be=V(6940),pt=V(1680),Be=V(6736),tt=V(3864),Ke=V(3804);function st(Re,Xe){if(1&Re){const pe=D.KQA();D.I0R(0,"app-card",6),D.qCj("editEvent",function(Ve){D.usT(pe);const ze=D.GaO(2);return D.CGJ(ze.onFormSubmitted(Ve))})("removeEvent",function(Ve){D.usT(pe);const ze=D.GaO(2);return D.CGJ(ze.removeHandler(Ve))})("shifting",function(Ve){D.usT(pe);const ze=D.GaO(2);return D.CGJ(ze.shiftPosition(Ve))}),D.C$Y()}if(2&Re){const pe=Xe.$implicit;D.E7m("showSpecificContent",!0)("product",pe)}}function Ae(Re,Xe){if(1&Re){const pe=D.KQA();D.I0R(0,"div",1)(1,"div")(2,"h2"),D.OEk(3),D.C$Y(),D.I0R(4,"div")(5,"img",2),D.qCj("click",function(){D.usT(pe);const Ve=D.GaO();return D.CGJ(Ve.shiftRight())}),D.C$Y(),D.I0R(6,"img",3),D.qCj("click",function(){D.usT(pe);const Ve=D.GaO();return D.CGJ(Ve.shiftLeft())}),D.C$Y()()(),D.I0R(7,"div",4),D.yuY(8,st,1,2,"app-card",5),D.wVc(9,"slice"),D.C$Y()()}if(2&Re){const pe=D.GaO();D.yG2(3),D.oRS("",pe.modifyCatName(),":"),D.yG2(5),D.E7m("ngForOf",D.I7O(9,2,pe.productsArray,pe.sliceStart,pe.SliceEnd))}}let ke=(()=>{class Re{constructor(pe,we){this.sharedService=pe,this.cd=we,this.productsArray=[],this.productsImported=new D._w7(!0),this.loading=!0,this.sliceStart=0,this.SliceEnd=6,this.length=0}ngOnInit(){this.category&&this.sharedService.getTypeOfProduct(`${this.category}`).subscribe(pe=>{this.productsArray=pe,this.length=pe.length,this.loading=!1,this.productsImported.emit(!0),this.cd.detectChanges()})}shiftLeft(){this.SliceEnd<this.length&&(this.sliceStart+=1,this.SliceEnd+=1)}shiftRight(){this.sliceStart>0&&(this.sliceStart-=1,this.SliceEnd-=1)}onFormSubmitted(pe){this.sharedService.editProduct(pe.form,pe.prodId,pe.prodCategory).subscribe(()=>{"guitar"===pe.prodCategory&&this.sharedService.updateProductArray(pe.form,this.productsArray,pe.prodId),this.cd.detectChanges()})}removeHandler(pe){this.productsArray=this.productsArray.filter(we=>we.key!==pe.prodId),this.cd.detectChanges()}shiftPosition(pe){if(pe.switchToPosition>this.length||pe.switchToPosition<0)alert("position must be greater than 0 or less than number of products");else{const we=this.productsArray.findIndex(ze=>ze.key===pe.id),Ve=this.productsArray[pe.switchToPosition];this.productsArray[pe.switchToPosition]=this.productsArray[we],this.productsArray[we]=Ve,this.sharedService.updateProductPagePosition(this.productsArray,this.category)}}modifyCatName(){return this.category?this.category.charAt(0).toUpperCase()+this.category.substring(1,this.category.length)+"s":this.category}static#e=this.\u0275fac=function(we){return new(we||Re)(D.GI1(Ke.Y),D.GI1(D.kD9))};static#t=this.\u0275cmp=D.In1({type:Re,selectors:[["app-product-page-single-category"]],inputs:{category:"category"},outputs:{productsImported:"productsImported"},standalone:!0,features:[D.UHJ],decls:1,vars:1,consts:[["class","products-container",4,"ngIf"],[1,"products-container"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"products"],[3,"showSpecificContent","product","editEvent","removeEvent","shifting",4,"ngFor","ngForOf"],[3,"showSpecificContent","product","editEvent","removeEvent","shifting"]],template:function(we,Ve){1&we&&D.yuY(0,Ae,10,6,"div",0),2&we&&D.E7m("ngIf",!Ve.loading)},dependencies:[y.MD,y.ay,y.u_,y.qq,tt.u],styles:[".products-container[_ngcontent-%COMP%]{padding:60px}.products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;display:flex;justify-content:space-between}.products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;cursor:pointer}.products-container[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{display:flex;gap:20px}"]})}return Re})(),ae=(()=>{class Re{static#e=this.\u0275fac=function(we){return new(we||Re)};static#t=this.\u0275mod=D.a4G({type:Re});static#n=this.\u0275inj=D.s3X({imports:[y.MD,_e,be.W,Ie.k,pt.w,k.qQ,Be.o,tt.u,ke]})}return Re})();D.AnM(q._,[y.u_,be.W,Ie.k,ke,it],[y.a])},2448:(jt,He,V)=>{V.r(He),V.d(He,{ProfileModuleModule:()=>Ve});var y=V(1368),q=V(4856),k=V(6504),D=V(3992),W=V(4496),_e=V(788),Ee=V(3804),Le=V(1092),Pe=V(6940),ge=V(3864);function fe(ze,at){if(1&ze){const wt=W.KQA();W.I0R(0,"button",11),W.qCj("click",function(){W.usT(wt);const mt=W.GaO();return W.CGJ(mt.addingProd())}),W.OEk(1," Add New Product "),W.C$Y()}}function xe(ze,at){if(1&ze){const wt=W.KQA();W.I0R(0,"div",28)(1,"div"),W.wR5(2,"img",29),W.I0R(3,"img",30),W.qCj("click",function(){const Lt=W.usT(wt).$implicit,rn=W.GaO(2);return W.CGJ(rn.removeImg(Lt))}),W.C$Y()()()}if(2&ze){const wt=at.$implicit;W.yG2(2),W.E7m("src",wt,W.K6U)}}function it(ze,at){if(1&ze){const wt=W.KQA();W.I0R(0,"form",12)(1,"select",13)(2,"option",14),W.OEk(3,"Guitar"),W.C$Y(),W.I0R(4,"option",15),W.OEk(5,"Drum"),W.C$Y(),W.I0R(6,"option",16),W.OEk(7,"Bass"),W.C$Y(),W.I0R(8,"option",17),W.OEk(9,"Piano"),W.C$Y(),W.I0R(10,"option",18),W.OEk(11,"Other"),W.C$Y()(),W.wR5(12,"input",19)(13,"input",20)(14,"input",21)(15,"input",22)(16,"input",23),W.I0R(17,"input",24),W.qCj("change",function(mt){W.usT(wt);const Lt=W.GaO();return W.CGJ(Lt.onFileChange(mt))}),W.C$Y(),W.I0R(18,"button",25),W.qCj("click",function(){W.usT(wt);const mt=W.GaO();return W.CGJ(mt.addNewProduct())}),W.OEk(19," add product "),W.C$Y(),W.I0R(20,"div",26),W.yuY(21,xe,4,1,"div",27),W.C$Y()()}if(2&ze){const wt=W.GaO();W.E7m("formGroup",wt.form),W.yG2(18),W.E7m("disabled",wt.form.invalid),W.yG2(3),W.E7m("ngForOf",wt.photos)}}function Ie(ze,at){if(1&ze){const wt=W.KQA();W.I0R(0,"img",37),W.qCj("click",function(){W.usT(wt);const mt=W.GaO().index,Lt=W.GaO();return W.CGJ(Lt.showMoreItems[mt]=!Lt.showMoreItems[mt])})("click",function(){W.usT(wt);const mt=W.GaO().index,Lt=W.GaO();return W.CGJ(Lt.changeArrow[mt]=!Lt.changeArrow[mt])}),W.C$Y()}}function be(ze,at){if(1&ze){const wt=W.KQA();W.I0R(0,"img",38),W.qCj("click",function(){W.usT(wt);const mt=W.GaO().index,Lt=W.GaO();return W.CGJ(Lt.showMoreItems[mt]=!Lt.showMoreItems[mt]&&!Lt.changeArrow)})("click",function(){W.usT(wt);const mt=W.GaO().index,Lt=W.GaO();return W.CGJ(Lt.changeArrow[mt]=!Lt.changeArrow[mt])}),W.C$Y()}}function pt(ze,at){if(1&ze&&(W.I0R(0,"div",39)(1,"div"),W.wR5(2,"img",29),W.C$Y(),W.I0R(3,"div",40)(4,"span"),W.OEk(5),W.C$Y(),W.I0R(6,"span"),W.OEk(7),W.C$Y(),W.I0R(8,"span"),W.OEk(9),W.C$Y(),W.I0R(10,"span"),W.OEk(11),W.C$Y(),W.I0R(12,"span"),W.OEk(13),W.C$Y()()()),2&ze){const wt=at.$implicit,Tt=W.GaO().$implicit,mt=W.GaO();W.yG2(2),W.E7m("src",wt.product.product.photoUrl[0],W.K6U),W.yG2(3),W.cNF(Tt.email?Tt.email:"unknown"),W.yG2(2),W.cNF(mt.upperCaseFirstLetter(wt.product.product.category)),W.yG2(2),W.cNF(wt.product.product.model),W.yG2(2),W.oRS("Price: ",wt.product.product.price,"$"),W.yG2(2),W.oRS("Dicsount: ",wt.product.product.discount,"%")}}function Be(ze,at){if(1&ze&&(W.I0R(0,"div",42)(1,"div"),W.wR5(2,"img",29),W.C$Y(),W.I0R(3,"div",40)(4,"span"),W.OEk(5),W.C$Y(),W.I0R(6,"span"),W.OEk(7),W.C$Y(),W.I0R(8,"span"),W.OEk(9),W.C$Y(),W.I0R(10,"span"),W.OEk(11),W.C$Y(),W.I0R(12,"span"),W.OEk(13),W.C$Y()()()),2&ze){const wt=at.$implicit,Tt=W.GaO(2).$implicit,mt=W.GaO();W.yG2(2),W.E7m("src",wt.product.product.photoUrl[0],W.K6U),W.yG2(3),W.cNF(Tt.email?Tt.email:"unknown"),W.yG2(2),W.cNF(mt.upperCaseFirstLetter(wt.product.product.category)),W.yG2(2),W.cNF(wt.product.product.model),W.yG2(2),W.oRS("Price: ",wt.product.product.price,""),W.yG2(2),W.oRS("Dicsount: ",wt.product.product.discount,"%")}}function tt(ze,at){if(1&ze&&(W.I0R(0,"div"),W.yuY(1,Be,14,6,"div",41),W.wVc(2,"slice"),W.C$Y()),2&ze){const wt=W.GaO().$implicit;W.yG2(),W.E7m("ngForOf",W.g7$(2,1,wt.products,1))}}function Ke(ze,at){if(1&ze&&(W.I0R(0,"div",31)(1,"div",32)(2,"span"),W.OEk(3),W.C$Y(),W.I0R(4,"span"),W.OEk(5),W.C$Y(),W.I0R(6,"div",33),W.yuY(7,Ie,1,0,"img",34)(8,be,1,0,"img",35),W.C$Y(),W.yuY(9,pt,14,6,"div",36),W.wVc(10,"slice"),W.yuY(11,tt,3,4,"div",8),W.C$Y()()),2&ze){const wt=at.$implicit,Tt=at.index,mt=W.GaO();W.yG2(3),W.cNF(mt.convertDate(wt.date)),W.yG2(2),W.oRS("total price: ",wt.totalPrice,""),W.yG2(2),W.E7m("ngIf",!mt.changeArrow[Tt]),W.yG2(),W.E7m("ngIf",mt.changeArrow[Tt]),W.yG2(),W.E7m("ngForOf",W.I7O(10,6,wt.products,0,1)),W.yG2(2),W.E7m("ngIf",mt.showMoreItems[Tt])}}function st(ze,at){1&ze&&(W.I0R(0,"p"),W.OEk(1,"Liked Products:"),W.C$Y())}function Ae(ze,at){1&ze&&W.wR5(0,"app-card",43),2&ze&&W.E7m("product",at.$implicit)}let ke=(()=>{class ze{constructor(wt,Tt,mt,Lt){this.authService=wt,this.cd=Tt,this.fb=mt,this.sharedService=Lt,this.photos=[],this.addingProduct=!1,this.showMoreItems=[],this.changeArrow=[],this.form=this.fb.group({category:["",[k.AQ.required]],model:["",k.AQ.required],price:["",k.AQ.required],quantity:["",k.AQ.required],discount:["",k.AQ.required],description:["",k.AQ.required]})}ngOnInit(){this.authService.loggedUser.pipe((0,D.U)(1)).subscribe(wt=>{this.user=wt,this.form.patchValue({category:"guitar"})})}update(){if(!this.user?.user.email)throw new Error("no user email found");this.authService.findUser(this.user?.user.email).subscribe(wt=>{this.user=wt,this.cd.detectChanges()})}onFileChange(wt){const Tt=wt.target.files[0];if(Tt){const mt=new FileReader;mt.onload=Lt=>{this.photos.push(Lt.target?.result),this.cd.detectChanges()},mt.readAsDataURL(Tt)}}addingProd(){this.addingProduct=!this.addingProduct}removeImg(wt){const Tt=this.photos.findIndex(mt=>mt===wt);this.photos.splice(Tt,1)}addNewProduct(){const wt=this.form.get("category")?.getRawValue(),Tt=this.form.get("model")?.getRawValue(),mt=this.form.get("price")?.getRawValue(),Lt=this.form.get("discount")?.getRawValue(),rn=this.form.get("quantity")?.getRawValue(),Ue=this.form.get("description")?.getRawValue();this.sharedService.addProduct(wt,Tt,mt,rn,Lt,this.photos,Ue).subscribe({next:()=>{this.form.get("category")?.setValue(""),this.form.get("model")?.setValue(""),this.form.get("price")?.setValue(""),this.form.get("discount")?.setValue(""),this.form.get("quantity")?.setValue(""),this.form.get("description")?.setValue(""),this.photos=[],this.cd.detectChanges(),alert("Product was added successfully")},error:Je=>{console.log("add product error: "+Je.message)},complete:()=>{console.log("Subscription completed")}})}convertDate(wt){let Tt=new Date(wt);return`${Tt.getDate()}/${Tt.getMonth()+1}/${Tt.getFullYear()}`}upperCaseFirstLetter(wt){return wt.charAt(0).toUpperCase()+wt.slice(1)}static#e=this.\u0275fac=function(Tt){return new(Tt||ze)(W.GI1(_e.e),W.GI1(W.kD9),W.GI1(k.im),W.GI1(Ee.Y))};static#t=this.\u0275cmp=W.In1({type:ze,selectors:[["app-profile"]],decls:25,vars:13,consts:[[1,"container"],[1,"wrapper"],[1,"box"],[1,"info"],[3,"click",4,"ngIf"],[3,"formGroup",4,"ngIf"],["class","purchased-products",4,"ngFor","ngForOf"],[1,"liked-products"],[4,"ngIf"],[1,"products"],["class","single-product",3,"product",4,"ngFor","ngForOf"],[3,"click"],[3,"formGroup"],["formControlName","category"],["value","guitar"],["value","drum"],["value","bass"],["value","piano"],["value","other"],["placeholder","Model","formControlName","model"],["placeholder","Price","formControlName","price"],["placeholder","Discount","formControlName","discount"],["placeholder","Quantity","formControlName","quantity"],["placeholder","Description","formControlName","description"],["type","file",3,"change"],[3,"disabled","click"],[1,"photos"],["class","pht",4,"ngFor","ngForOf"],[1,"pht"],["alt","img",3,"src"],["src","assets/remove.png","alt","img",3,"click"],[1,"purchased-products"],[1,"purchase-wrapper"],[1,"see-more-arrow"],["src","assets/arrow-down.png","alt","img",3,"click",4,"ngIf"],["src","assets/arrow-up.png","alt","img",3,"click",4,"ngIf"],["class","purchase",4,"ngFor","ngForOf"],["src","assets/arrow-down.png","alt","img",3,"click"],["src","assets/arrow-up.png","alt","img",3,"click"],[1,"purchase"],[1,"grid-container"],["class","other-items purchase",4,"ngFor","ngForOf"],[1,"other-items","purchase"],[1,"single-product",3,"product"]],template:function(Tt,mt){1&Tt&&(W.wR5(0,"app-header"),W.I0R(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"p")(6,"span"),W.OEk(7," Email:"),W.C$Y(),W.OEk(8),W.C$Y(),W.I0R(9,"p")(10,"span"),W.OEk(11,"Address:"),W.C$Y(),W.OEk(12),W.C$Y(),W.I0R(13,"button"),W.OEk(14,"Change Password"),W.C$Y(),W.yuY(15,fe,2,0,"button",4),W.C$Y(),W.yuY(16,it,22,3,"form",5),W.C$Y(),W.yuY(17,Ke,12,10,"div",6),W.wVc(18,"slice"),W.I0R(19,"div",7),W.yuY(20,st,2,0,"p",8),W.I0R(21,"div",9),W.yuY(22,Ae,1,1,"app-card",10),W.wVc(23,"slice"),W.C$Y()()()(),W.wR5(24,"app-footer")),2&Tt&&(W.yG2(8),W.oRS(" ",null==mt.user||null==mt.user.user?null:mt.user.user.email,""),W.yG2(4),W.oRS(" ",null==mt.user||null==mt.user.user?null:mt.user.user.address,"Some Adrress"),W.yG2(3),W.E7m("ngIf",null==mt.user||null==mt.user.user?null:mt.user.user.isAdmin),W.yG2(),W.E7m("ngIf",(null==mt.user||null==mt.user.user?null:mt.user.user.isAdmin)&&mt.addingProduct),W.yG2(),W.E7m("ngForOf",W.g7$(18,7,null==mt.user||null==mt.user.user?null:mt.user.user.purchasedProducts,1)),W.yG2(3),W.E7m("ngIf",mt.likedProducts),W.yG2(2),W.E7m("ngForOf",W.g7$(23,10,mt.likedProducts,1)))},dependencies:[y.ay,y.u_,k.sz,k.wd,k.GO,k.ot,k.GC,k.ue,k.u,k.uW,k.Wo,Le.k,Pe.W,ge.u,y.qq],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:85%;background-color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:8%;display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-size:18px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:200px;height:50px;cursor:pointer;--b: 2px;--s: .45em;--color: #373b44;padding:calc(.5em + var(--s)) calc(.9em + var(--s));color:var(--color);--_p: var(--s);background:conic-gradient(from 90deg at var(--b) var(--b),rgba(0,0,0,0) 90deg,var(--color) 0) var(--_p) var(--_p)/calc(100% - var(--b) - 2 * var(--_p)) calc(100% - var(--b) - 2 * var(--_p));transition:.3s linear,color 0s,background-color 0s;outline:var(--b) solid rgba(0,0,0,0);outline-offset:.6em;font-size:16px;border:0;user-select:none;-webkit-user-select:none;touch-action:manipulation}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus-visible{--_p: 0px;outline-color:var(--color);outline-offset:.05em}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background:var(--color);color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,200px);grid-template-rows:repeat(5,30px);padding-left:8%;margin-bottom:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]{display:flex;gap:12px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]:last-of-type{width:8px;position:absolute;top:3px;right:-6px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%]{padding-left:90px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;padding-top:10px;background-color:#7daecf;width:520px;margin-bottom:30px;position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]{position:absolute;bottom:-8px;width:35px;height:35px;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%]{display:flex;gap:3%;border:1px solid rgb(84,145,185);width:500px;height:120px;padding:10px;margin-bottom:36px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:13%;height:100%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:70px;height:100%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]{display:grid;width:100%;gap:7px;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(3,1fr);text-align:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{align-self:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-self:center;border:none;background-color:#373b44;color:#fff;width:120px;height:20px;cursor:pointer}.liked-products[_ngcontent-%COMP%]{padding:40px}.liked-products[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:20px;font-weight:700;padding:40px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;gap:20px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%]{width:150px;height:380px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:20%;z-index:1}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{display:flex;gap:10px;justify-content:center;width:140px;height:40px;color:#fff}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{width:100%;height:260px;position:relative}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:260px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{width:100%;height:120px;display:flex;flex-direction:column;justify-content:space-around}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}"],changeDetection:0})}return ze})();var ae=V(4704),Re=V(9212);const pe=[{path:"",component:ke,canActivate:[(()=>{class ze{constructor(){this.authService=(0,W.uUt)(_e.e),this.router=(0,W.uUt)(q.E5)}canActivate(wt){return this.authService.findUserById(wt.params.id).pipe((0,ae.k)(mt=>this.authService.loggedUser.value?.user.email===mt),(0,Re.y)(mt=>{mt||(alert("Access Denied!"),this.router.navigate(["/products"]))}))}static#e=this.\u0275fac=function(Tt){return new(Tt||ze)};static#t=this.\u0275prov=W.wxM({token:ze,factory:ze.\u0275fac,providedIn:"root"})}return ze})()]}];let we=(()=>{class ze{static#e=this.\u0275fac=function(Tt){return new(Tt||ze)};static#t=this.\u0275mod=W.a4G({type:ze});static#n=this.\u0275inj=W.s3X({imports:[q.qQ.forChild(pe),q.qQ]})}return ze})(),Ve=(()=>{class ze{static#e=this.\u0275fac=function(Tt){return new(Tt||ze)};static#t=this.\u0275mod=W.a4G({type:ze});static#n=this.\u0275inj=W.s3X({imports:[y.MD,we,k.sl,Le.k,Pe.W,ge.u]})}return ze})()},6736:(jt,He,V)=>{V.d(He,{o:()=>k});var y=V(4496),q=V(6504);let k=(()=>{class D{constructor(_e){this.fb=_e,this.formSubmitted=new y._w7,this.productForm=this.fb.group({model:[""],price:["",q.AQ.pattern("^[0-9]*$")],discount:["",q.AQ.pattern("^[0-9]*$")],quantity:["",q.AQ.pattern("^[0-9]*$")],description:[""]})}onSubmit(){this.formSubmitted.emit(this.productForm.value)}static#e=this.\u0275fac=function(Ee){return new(Ee||D)(y.GI1(q.im))};static#t=this.\u0275cmp=y.In1({type:D,selectors:[["app-reusable-form"]],outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[y.UHJ],decls:8,vars:1,consts:[[1,"edit",3,"formGroup"],["formControlName","model","type","text","placeholder","New model-name"],["formControlName","price","type","text","placeholder","New price"],["formControlName","discount","type","text","placeholder","New Discount"],["formControlName","quantity","type","text","placeholder","New Quantity"],["formControlName","description","placeholder","New Description"],[3,"click"]],template:function(Ee,Le){1&Ee&&(y.I0R(0,"form",0),y.wR5(1,"input",1)(2,"input",2)(3,"input",3)(4,"input",4)(5,"textarea",5),y.I0R(6,"button",6),y.qCj("click",function(){return Le.onSubmit()}),y.OEk(7,"Confirm Changes"),y.C$Y()()),2&Ee&&y.E7m("formGroup",Le.productForm)},dependencies:[q.sl,q.sz,q.ot,q.ue,q.u,q.uW,q.Wo],styles:[".edit[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;gap:6px;margin-top:60px}.edit[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .edit[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:80%;height:26px}"]})}return D})()},3804:(jt,He,V)=>{V.d(He,{Y:()=>fe});var y=V(6700),q=V(4704),k=V(9336),D=V(9212),W=V(7368),_e=V(9144),Ee=V(2700),Le=V(4496),Pe=V(7048),ge=V(788);let fe=(()=>{class xe{constructor(Ie,be){this.http=Ie,this.service=be,this.detectChanges=new y.g(!1),this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app"}addProduct(Ie,be,pt,Be,tt,Ke,st){const Ae={category:Ie,model:be,price:parseInt(pt),quantity:parseInt(Be),discount:parseInt(tt),photoUrl:Ke,description:st};return this.http.post(`${this.url}/products/${Ie}.json`,Ae)}ifDetectChanges(){return this.detectChanges.next(!this.detectChanges.value),this.detectChanges.value}getTypeOfProduct(Ie){return this.http.get(`${this.url}/products/${Ie}.json`).pipe((0,q.k)(be=>{let pt=[];return Object.entries(be).forEach(([Be,tt])=>pt.push({key:Be,product:tt})),pt}))}getAllTypeOfProduct(){const Ie=this.http.get(`${this.url}/products/guitar.json`),be=this.http.get(`${this.url}/products/piano.json`),pt=this.http.get(`${this.url}/products/bass.json`),Be=this.http.get(`${this.url}/products/drum.json`);return(0,k.y)([Ie,be,pt,Be]).pipe((0,q.k)(tt=>tt))}likeUnlikeProduct(Ie,be,pt){return this.http.get(`${this.url}/musicShopUsers/${be}.json`).pipe((0,D.y)(Be=>{let tt=this.service.loggedUser.value?.user,Ke=this.service.likedProducts.value;tt&&(tt.likedProducts.find(Ae=>Ae.key===Ie)?(Ke=Be.likedProducts.filter(Ae=>Ae.key!==Ie),tt.likedProducts=Ke):(Ke=[...Be.likedProducts,{key:Ie,category:pt}],tt.likedProducts=Ke),this.service.likedProducts.next(Ke)),this.http.patch(`${this.url}/musicShopUsers/${be}.json`,tt).subscribe()}))}getAllLikedProducts(Ie){}getProduct(Ie,be){return this.http.get(`${this.url}/products/${be}/${Ie}.json`)}getProductById(Ie,be){return this.http.get(`${this.url}/products/${be}/${Ie}.json`)}buyProducts(Ie,be,pt,Be){const tt={userId:Be,email:pt,date:new Date,totalPrice:be,products:Ie},Ke=this.http.get(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`).pipe((0,W.G)(Ae=>(Ae.purchasedProducts=[...Ae.purchasedProducts,tt],this.http.patch(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`,Ae))),(0,_e.a)(Ae=>(console.error("Error in adminUpdate$",Ae),(0,Ee.of)(null))));let st=(0,Ee.of)(null);Be&&(st=this.http.get(`${this.url}/musicShopUsers/${Be}.json`).pipe((0,W.G)(Ae=>(Ae.purchasedProducts=[...Ae.purchasedProducts,tt],this.http.patch(`${this.url}/musicShopUsers/${Be}.json`,Ae))),(0,_e.a)(Ae=>(console.error("Error in userUpdate$",Ae),(0,Ee.of)(null))))),(0,k.y)([Ke,st]).subscribe()}removeProduct(Ie,be){return this.http.delete(`${this.url}/products/${Ie}/${be}.json`)}editProduct(Ie,be,pt){return this.http.get(`${this.url}/products/${pt}/${be}.json`).pipe((0,D.y)(Be=>{Ie.model&&(Be.model=Ie.model),Ie.price&&(Be.price=Ie.price),Ie.discount&&(Be.discount=Ie.discount),Ie.quantity&&(Be.quantity=Ie.quantity),Ie.description&&(Be.description=Ie.description),this.http.patch(`${this.url}/products/${pt}/${be}.json`,Be).subscribe()}))}updateProductArray(Ie,be,pt){let Be=be.findIndex(tt=>tt.key===pt);Ie.discount&&(be[Be].product.discount=Ie.discount,Ie.model&&(be[Be].product.model=Ie.model),Ie.price&&(be[Be].product.price=Ie.price),Ie.description&&(be[Be].product.description=Ie.description),Ie.quantity&&(be[Be].product.quantity=Ie.quantity))}getRandomProducts(Ie){return this.getTypeOfProduct(Ie).pipe((0,q.k)(be=>{let pt=4;const Be=[],tt=[];for(;0!==pt;){if(be.length<=pt)return be;const Ke=Math.floor(Math.random()*be.length);tt.includes(Ke)||(Be.push(be[Ke]),tt.push(Ke),pt--)}return Be}))}checkIfLiked(Ie,be){return this.http.get(`${this.url}/musicShopUsers/${be}.json`).pipe((0,q.k)(pt=>!!pt.likedProducts.find(Be=>Be.key===Ie)))}updateProductPagePosition(Ie,be){const pt=Ie.reduce((Be,tt)=>(Be[tt.key]={...tt.product,discount:Number(tt.product.discount),price:Number(tt.product.price)},Be),{});this.http.put(`${this.url}/products/${be}.json`,pt).subscribe({next:Be=>{console.log("Update successful",Be)},error:Be=>{alert("something went wrong try again later")}})}static#e=this.\u0275fac=function(be){return new(be||xe)(Le.CoB(Pe.KK),Le.CoB(ge.e))};static#t=this.\u0275prov=Le.wxM({token:xe,factory:xe.\u0275fac,providedIn:"root"})}return xe})()},9456:(jt,He,V)=>{V.r(He),V.d(He,{SingleProductPageModule:()=>Ae});var y=V(1368),q=V(4856),k=V(3992),D=V(4496),W=V(3804),_e=V(788),Ee=V(1116),Le=V(1092),Pe=V(6940),ge=V(9840),fe=V(6700);function xe(ke,ae){if(1&ke){const Re=D.KQA();D.I0R(0,"img",2),D.qCj("click",function(){D.usT(Re);const pe=D.GaO();return D.CGJ(pe.likeUnlikeProduct())}),D.C$Y()}}function it(ke,ae){if(1&ke){const Re=D.KQA();D.I0R(0,"img",3),D.qCj("click",function(){D.usT(Re);const pe=D.GaO();return D.CGJ(pe.likeUnlikeProduct())}),D.C$Y()}}let Ie=(()=>{class ke{constructor(Re,Xe,pe){this.cd=Re,this.service=Xe,this.authService=pe,this.id="",this.userId="",this.isLiked$=new fe.g(!1)}ngOnInit(){this.checkIfliked()}checkIfliked(){this.service.checkIfLiked(this.id,this.userId).subscribe(Re=>{this.isLiked$.next(Re),console.log("checkIfliked result:",Re),this.cd.detectChanges()})}likeUnlikeProduct(){this.authService.loggedUser.pipe((0,k.U)(1)).subscribe(Re=>{void 0!==Re&&this.service.likeUnlikeProduct(this.id,Re.key,this.category).subscribe(()=>{console.log("Like/Unlike action completed"),this.isLiked$.next(!this.isLiked$.value)})})}static#e=this.\u0275fac=function(Xe){return new(Xe||ke)(D.GI1(D.kD9),D.GI1(W.Y),D.GI1(_e.e))};static#t=this.\u0275cmp=D.In1({type:ke,selectors:[["app-is-liked"]],inputs:{id:"id",userId:"userId",category:"category"},standalone:!0,features:[D.UHJ],decls:4,vars:6,consts:[["src","assets/heart-red.png","alt","Liked",3,"click",4,"ngIf"],["src","assets/heart.png","alt","Not Liked",3,"click",4,"ngIf"],["src","assets/heart-red.png","alt","Liked",3,"click"],["src","assets/heart.png","alt","Not Liked",3,"click"]],template:function(Xe,pe){1&Xe&&(D.yuY(0,xe,1,0,"img",0),D.wVc(1,"async"),D.yuY(2,it,1,0,"img",1),D.wVc(3,"async")),2&Xe&&(D.E7m("ngIf",D.kDX(1,2,pe.isLiked$)),D.yG2(2),D.E7m("ngIf",!D.kDX(3,4,pe.isLiked$)))},dependencies:[y.MD,y.u_,y.a],styles:["img[_ngcontent-%COMP%]{width:20px}"],changeDetection:0})}return ke})();function be(ke,ae){if(1&ke&&D.wR5(0,"img",13,14),2&ke){const Re=D.GaO();D.E7m("src",Re.images[Re.cuurentIndex],D.K6U)}}function pt(ke,ae){if(1&ke){const Re=D.KQA();D.I0R(0,"div")(1,"img",15),D.qCj("click",function(){const we=D.usT(Re).index,Ve=D.GaO();return D.CGJ(Ve.switchImage(we))}),D.C$Y()()}if(2&ke){const Re=ae.index,Xe=D.GaO();D.yG2(),D.E7m("src",Xe.images[Re],D.K6U)}}function Be(ke,ae){if(1&ke&&D.wR5(0,"app-suggestions",16),2&ke){const Re=D.GaO();D.E7m("categoty",null==Re.product?null:Re.product.category)}}const Ke=[{path:"",component:(()=>{class ke{constructor(Re,Xe,pe,we,Ve){this.sharedService=Re,this.authService=Xe,this.route=pe,this.cd=we,this.cartService=Ve,this.cuurentIndex=0,this.minSize=0,this.maxSize=0,this.focusedImg=this.product?.photoUrl?.[0],this.prodId=""}ngOnInit(){this.authService.checkIfLoggedIn(),this.route.queryParams.subscribe(()=>{this.getProductInfo()})}getProductInfo(){this.route.queryParams.pipe((0,k.U)(1)).subscribe(Re=>{this.sharedService.getProductById(Re.prod,Re.type).pipe((0,k.U)(1)).subscribe(Xe=>{this.product=Xe,this.images=Xe.photoUrl,this.prodId=Re.prod,this.cuurentIndex=0,this.focusedImg=this.product?.photoUrl?.[0],this.cd.detectChanges()})})}switchImage(Re){this.cuurentIndex=Re}scroll(Re){"right"===Re?this.images.unshift(this.images.pop()):this.images.push(this.images.shift())}addInCart(){this.cartService.cartOperations("add",{key:this.prodId,product:this.product})}static#e=this.\u0275fac=function(Xe){return new(Xe||ke)(D.GI1(W.Y),D.GI1(_e.e),D.GI1(q.gV),D.GI1(D.kD9),D.GI1(Ee.c))};static#t=this.\u0275cmp=D.In1({type:ke,selectors:[["app-single-product-page"]],decls:37,vars:12,consts:[[1,"container"],[1,"content"],[1,"images"],[1,"focused-img"],["alt","img",3,"src",4,"ngIf"],[1,"otherPhotos"],["src","assets/left.png","alt","img",3,"click"],[4,"ngFor","ngForOf"],["src","assets/right.png","alt","img",3,"click"],[1,"description","payment"],[3,"category","userId"],[3,"click"],[3,"categoty",4,"ngIf"],["alt","img",3,"src"],["myImage",""],["alt","img",3,"src","click"],[3,"categoty"]],template:function(Xe,pe){1&Xe&&(D.wR5(0,"app-header"),D.I0R(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),D.yuY(5,be,2,1,"img",4),D.C$Y(),D.I0R(6,"div",5)(7,"div")(8,"img",6),D.qCj("click",function(){return pe.scroll("left")}),D.C$Y()(),D.yuY(9,pt,2,1,"div",7),D.wVc(10,"slice"),D.I0R(11,"div")(12,"img",8),D.qCj("click",function(){return pe.scroll("right")}),D.C$Y()()()(),D.I0R(13,"div",9)(14,"div")(15,"p")(16,"span"),D.OEk(17,"Categoty:"),D.C$Y(),D.OEk(18),D.C$Y(),D.wR5(19,"app-is-liked",10),D.C$Y(),D.I0R(20,"div")(21,"p")(22,"span"),D.OEk(23,"Model:"),D.C$Y(),D.OEk(24),D.C$Y(),D.I0R(25,"p")(26,"span"),D.OEk(27,"Description: "),D.C$Y(),D.OEk(28),D.C$Y(),D.I0R(29,"p")(30,"span"),D.OEk(31,"Price:"),D.C$Y(),D.OEk(32),D.C$Y(),D.I0R(33,"button",11),D.qCj("click",function(){return pe.addInCart()}),D.OEk(34,"Add to Cart"),D.C$Y()()(),D.yuY(35,Be,1,1,"app-suggestions",12),D.wR5(36,"app-footer"),D.C$Y()()),2&Xe&&(D.yG2(5),D.E7m("ngIf",pe.images),D.yG2(4),D.E7m("ngForOf",D.g7$(10,9,pe.images,0)),D.yG2(9),D.oRS(" ",null==pe.product?null:pe.product.category,""),D.yG2(),D.E7m("category",null==pe.product?null:pe.product.category)("userId","-NuwyYV_Xx3Z9YdV7qOv"),D.yG2(5),D.oRS(" ",null==pe.product?null:pe.product.model,""),D.yG2(4),D.oRS(" ",null==pe.product?null:pe.product.description," "),D.yG2(4),D.oRS(" ",null==pe.product?null:pe.product.price,"$"),D.yG2(3),D.E7m("ngIf",null==pe.product?null:pe.product.category))},dependencies:[y.ay,y.u_,Le.k,Pe.W,ge.M,Ie,y.qq],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6%;margin-top:4%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:350px;height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px;max-height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]{display:flex;gap:4px;justify-content:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child, .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{background-color:unset}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > img[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]{width:40px;height:40px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:40px;gap:20px;width:90%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:23px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:10px;word-wrap:break-word;font-size:20px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px;height:30px;border:none;text-align:center;color:#fff;background-color:#7a7af0;border-radius:3px;cursor:pointer}"],changeDetection:0})}return ke})()}];let st=(()=>{class ke{static#e=this.\u0275fac=function(Xe){return new(Xe||ke)};static#t=this.\u0275mod=D.a4G({type:ke});static#n=this.\u0275inj=D.s3X({imports:[q.qQ.forChild(Ke),q.qQ]})}return ke})(),Ae=(()=>{class ke{static#e=this.\u0275fac=function(Xe){return new(Xe||ke)};static#t=this.\u0275mod=D.a4G({type:ke});static#n=this.\u0275inj=D.s3X({imports:[y.MD,Le.k,Pe.W,st,ge.M,Ie]})}return ke})()},9840:(jt,He,V)=>{V.d(He,{M:()=>_e});var y=V(3864),q=V(1368),k=V(4496),D=V(3804);function W(Ee,Le){1&Ee&&k.wR5(0,"app-card",2),2&Ee&&k.E7m("product",Le.$implicit)}let _e=(()=>{class Ee{constructor(Pe,ge){this.service=Pe,this.cd=ge,this.categoty="guitar"}ngOnInit(){this.service.getRandomProducts(this.categoty).subscribe(Pe=>{this.randomSuggestions=Pe,console.log(this.randomSuggestions),this.cd.detectChanges()})}static#e=this.\u0275fac=function(ge){return new(ge||Ee)(k.GI1(D.Y),k.GI1(k.kD9))};static#t=this.\u0275cmp=k.In1({type:Ee,selectors:[["app-suggestions"]],inputs:{categoty:"categoty"},standalone:!0,features:[k.UHJ],decls:4,vars:1,consts:[[1,"container"],[3,"product",4,"ngFor","ngForOf"],[3,"product"]],template:function(ge,fe){1&ge&&(k.I0R(0,"h2"),k.OEk(1,"You might also like:"),k.C$Y(),k.I0R(2,"div",0),k.yuY(3,W,1,1,"app-card",1),k.C$Y()),2&ge&&(k.yG2(3),k.E7m("ngForOf",fe.randomSuggestions))},dependencies:[y.u,q.MD,q.ay],styles:["h2[_ngcontent-%COMP%]{color:#9191de;text-align:center}div[_ngcontent-%COMP%]{padding:3%;display:flex;gap:20px}"],changeDetection:0})}return Ee})()},8744:(jt,He,V)=>{var y=V(4476),q=V(4856),k=V(4496);const D=[{path:"",redirectTo:"products",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.resolve().then(V.bind(V,3960)).then(h=>h.LoginAndRegistrationModule)},{path:"about-us",loadComponent:()=>V.e(760).then(V.bind(V,4760)).then(h=>h.AboutUsComponent)},{path:"contact",loadComponent:()=>V.e(104).then(V.bind(V,5104)).then(h=>h.ContanctComponent)},{path:"products",loadChildren:()=>Promise.resolve().then(V.bind(V,3280)).then(h=>h.ProductPageModule)},{path:"profile/:id",loadChildren:()=>Promise.resolve().then(V.bind(V,2448)).then(h=>h.ProfileModuleModule)},{path:"single-product/:id",loadChildren:()=>Promise.resolve().then(V.bind(V,9456)).then(h=>h.SingleProductPageModule)},{path:"categoty/:category",loadChildren:()=>V.e(644).then(V.bind(V,5644)).then(h=>h.SinleCategoryPageModuleModule)}];let W=(()=>{class h{static#e=this.\u0275fac=function(f){return new(f||h)};static#t=this.\u0275mod=k.a4G({type:h});static#n=this.\u0275inj=k.s3X({imports:[q.qQ.forRoot(D,{useHash:!1}),q.qQ]})}return h})(),_e=(()=>{class h{constructor(){this.title="musicShop"}static#e=this.\u0275fac=function(f){return new(f||h)};static#t=this.\u0275cmp=k.In1({type:h,selectors:[["app-root"]],decls:1,vars:0,template:function(f,v){1&f&&k.wR5(0,"router-outlet")},dependencies:[q.cP]})}return h})();var Ee=V(6176),Le=V(3680);class Pe{constructor(a){return a}}class ge{constructor(){return(0,Le.UH)()}}var pe=V(8836);class Ve{constructor(a){return a}}class ze{constructor(){return(0,Ee.S_)("auth")}}const wt=new k.UbH("angularfire2.auth-instances");function mt(h){return(a,l)=>{const f=a.runOutsideAngular(()=>h(l));return new Ve(f)}}const Lt={provide:ze,deps:[[new k.T7N,wt]]},rn={provide:Ve,useFactory:function Tt(h,a){const l=(0,Ee.UN)("auth",h,a);return l&&new Ve(l)},deps:[[new k.T7N,wt],Pe]};let Ue=(()=>{class h{constructor(){(0,Le.Kk)("angularfire",Ee.j1.full,"auth")}static \u0275fac=function(f){return new(f||h)};static \u0275mod=k.a4G({type:h});static \u0275inj=k.s3X({providers:[rn,Lt]})}return h})();function Je(h,...a){return{ngModule:Ue,providers:[{provide:wt,useFactory:mt(h),multi:!0,deps:[k.WW2,k.zZn,Ee.u,ge,[new k.T7N,Ee.gJ],...a]}]}}const qn=(0,Ee.qo)(pe.Iv,!0);var Nr=V(1528),pn=V(9360),jn=V(4920),Oe=V(7144),Ze=V(5976);const nt="@firebase/database";let en="";class Kn{constructor(a){this.domStorage_=a,this.prefix_="firebase:"}set(a,l){null==l?this.domStorage_.removeItem(this.prefixedName_(a)):this.domStorage_.setItem(this.prefixedName_(a),(0,Oe.i)(l))}get(a){const l=this.domStorage_.getItem(this.prefixedName_(a));return null==l?null:(0,Oe.GI)(l)}remove(a){this.domStorage_.removeItem(this.prefixedName_(a))}prefixedName_(a){return this.prefix_+a}toString(){return this.domStorage_.toString()}}class Xn{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(a,l){null==l?delete this.cache_[a]:this.cache_[a]=l}get(a){return(0,Oe.Y7)(this.cache_,a)?this.cache_[a]:null}remove(a){delete this.cache_[a]}}const ei=function(h){try{if(typeof window<"u"&&typeof window[h]<"u"){const a=window[h];return a.setItem("firebase:sentinel","cache"),a.removeItem("firebase:sentinel"),new Kn(a)}}catch{}return new Xn},_r=ei("localStorage"),le=ei("sessionStorage"),Ce=new Ze.YJ("@firebase/database"),Te=function(){let h=1;return function(){return h++}}(),yt=function(h){const a=(0,Oe.OS)(h),l=new Oe.qS;l.update(a);const f=l.digest();return Oe.Al.encodeByteArray(f)},Dt=function(...h){let a="";for(let l=0;l<h.length;l++){const f=h[l];Array.isArray(f)||f&&"object"==typeof f&&"number"==typeof f.length?a+=Dt.apply(null,f):a+="object"==typeof f?(0,Oe.i)(f):f,a+=" "}return a};let kt=null,zt=!0;const cn=function(...h){if(!0===zt&&(zt=!1,null===kt&&!0===le.get("logging_enabled")&&function(h,a){(0,Oe.Uc)(!a||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(Ce.logLevel=Ze.Ge.VERBOSE,kt=Ce.log.bind(Ce),a&&le.set("logging_enabled",!0)):"function"==typeof h?kt=h:(kt=null,le.remove("logging_enabled"))}(!0)),kt){const a=Dt.apply(null,h);kt(a)}},Yn=function(h){return function(...a){cn(h,...a)}},Ar=function(...h){const a="FIREBASE INTERNAL ERROR: "+Dt(...h);Ce.error(a)},ur=function(...h){const a=`FIREBASE FATAL ERROR: ${Dt(...h)}`;throw Ce.error(a),new Error(a)},$n=function(...h){const a="FIREBASE WARNING: "+Dt(...h);Ce.warn(a)},Oi=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},Qn="[MIN_NAME]",oi="[MAX_NAME]",Hn=function(h,a){if(h===a)return 0;if(h===Qn||a===oi)return-1;if(a===Qn||h===oi)return 1;{const l=ki(h),f=ki(a);return null!==l?null!==f?l-f==0?h.length-a.length:l-f:-1:null!==f?1:h<a?-1:1}},Er=function(h,a){return h===a?0:h<a?-1:1},ls=function(h,a){if(a&&h in a)return a[h];throw new Error("Missing required key ("+h+") in object: "+(0,Oe.i)(a))},Ni=function(h){if("object"!=typeof h||null===h)return(0,Oe.i)(h);const a=[];for(const f in h)a.push(f);a.sort();let l="{";for(let f=0;f<a.length;f++)0!==f&&(l+=","),l+=(0,Oe.i)(a[f]),l+=":",l+=Ni(h[a[f]]);return l+="}",l},di=function(h,a){const l=h.length;if(l<=a)return[h];const f=[];for(let v=0;v<l;v+=a)f.push(h.substring(v,v+a>l?l:v+a));return f};function ti(h,a){for(const l in h)h.hasOwnProperty(l)&&a(l,h[l])}const ks=function(h){(0,Oe.Uc)(!Oi(h),"Invalid JSON number");const f=1023;let v,T,O,B,X;0===h?(T=0,O=0,v=1/h==-1/0?1:0):(v=h<0,(h=Math.abs(h))>=Math.pow(2,1-f)?(B=Math.min(Math.floor(Math.log(h)/Math.LN2),f),T=B+f,O=Math.round(h*Math.pow(2,52-B)-Math.pow(2,52))):(T=0,O=Math.round(h/Math.pow(2,-1074))));const se=[];for(X=52;X;X-=1)se.push(O%2?1:0),O=Math.floor(O/2);for(X=11;X;X-=1)se.push(T%2?1:0),T=Math.floor(T/2);se.push(v?1:0),se.reverse();const Fe=se.join("");let Ge="";for(X=0;X<64;X+=8){let ut=parseInt(Fe.substr(X,8),2).toString(16);1===ut.length&&(ut="0"+ut),Ge+=ut}return Ge.toLowerCase()},Wo=new RegExp("^-?(0*)\\d{1,10}$"),ki=function(h){if(Wo.test(h)){const a=Number(h);if(a>=-2147483648&&a<=2147483647)return a}return null},Yr=function(h){try{h()}catch(a){setTimeout(()=>{throw $n("Exception was thrown by user callback.",a.stack||""),a},Math.floor(0))}},hi=function(h,a){const l=setTimeout(h,a);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class Ca{constructor(a,l){this.appName_=a,this.appCheckProvider=l,this.appCheck=l?.getImmediate({optional:!0}),this.appCheck||l?.get().then(f=>this.appCheck=f)}getToken(a){return this.appCheck?this.appCheck.getToken(a):new Promise((l,f)=>{setTimeout(()=>{this.appCheck?this.getToken(a).then(l,f):l(null)},0)})}addTokenChangeListener(a){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(f=>f.addTokenListener(a))}notifyForInvalidToken(){$n(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class wa{constructor(a,l,f){this.appName_=a,this.firebaseOptions_=l,this.authProvider_=f,this.auth_=null,this.auth_=f.getImmediate({optional:!0}),this.auth_||f.onInit(v=>this.auth_=v)}getToken(a){return this.auth_?this.auth_.getToken(a).catch(l=>l&&"auth/token-not-initialized"===l.code?(cn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,f)=>{setTimeout(()=>{this.auth_?this.getToken(a).then(l,f):l(null)},0)})}addTokenChangeListener(a){this.auth_?this.auth_.addAuthTokenListener(a):this.authProvider_.get().then(l=>l.addAuthTokenListener(a))}removeTokenChangeListener(a){this.authProvider_.get().then(l=>l.removeAuthTokenListener(a))}notifyForInvalidToken(){let a='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';a+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$n(a)}}let Js=(()=>{class h{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const xr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Yi="websocket",dr="long_polling";class $i{constructor(a,l,f,v,T=!1,O="",B=!1,X=!1){this.secure=l,this.namespace=f,this.webSocketOnly=v,this.nodeAdmin=T,this.persistenceKey=O,this.includeNamespaceInQueryParams=B,this.isUsingEmulator=X,this._host=a.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_r.get("host:"+a)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(a){a!==this.internalHost&&(this.internalHost=a,this.isCacheableHost()&&_r.set("host:"+this._host,this.internalHost))}toString(){let a=this.toURLString();return this.persistenceKey&&(a+="<"+this.persistenceKey+">"),a}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Pn(h,a,l){let f;if((0,Oe.Uc)("string"==typeof a,"typeof type must == string"),(0,Oe.Uc)("object"==typeof l,"typeof params must == object"),a===Yi)f=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(a!==dr)throw new Error("Unknown connection type: "+a);f=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function Qi(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(l.ns=h.namespace);const v=[];return ti(l,(T,O)=>{v.push(T+"="+O)}),f+v.join("&")}class Fi{constructor(){this.counters_={}}incrementCounter(a,l=1){(0,Oe.Y7)(this.counters_,a)||(this.counters_[a]=0),this.counters_[a]+=l}get(){return(0,Oe.O0)(this.counters_)}}const wo={},oo={};function _i(h){const a=h.toString();return wo[a]||(wo[a]=new Fi),wo[a]}class Vs{constructor(a){this.onMessage_=a,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(a,l){this.closeAfterResponse=a,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(a,l){for(this.pendingResponses[a]=l;this.pendingResponses[this.currentResponseNum];){const f=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let v=0;v<f.length;++v)f[v]&&Yr(()=>{this.onMessage_(f[v])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Gi{constructor(a,l,f,v,T,O,B){this.connId=a,this.repoInfo=l,this.applicationId=f,this.appCheckToken=v,this.authToken=T,this.transportSessionId=O,this.lastSessionId=B,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yn(a),this.stats_=_i(l),this.urlFn=X=>(this.appCheckToken&&(X.ac=this.appCheckToken),Pn(l,dr,X))}open(a,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new Vs(a),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,Oe.iw)()||"complete"===document.readyState)h();else{let a=!1;const l=function(){document.body?a||(a=!0,h()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new $s((...T)=>{const[O,B,X,se,Fe]=T;if(this.incrementIncomingBytes_(T),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===O)this.id=B,this.password=X;else{if("close"!==O)throw new Error("Unrecognized command received: "+O);B?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(B,()=>{this.onClosed_()})):this.onClosed_()}},(...T)=>{const[O,B]=T;this.incrementIncomingBytes_(T),this.myPacketOrderer.handleResponse(O,B)},()=>{this.onClosed_()},this.urlFn);const f={start:"t"};f.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(f.cb=this.scriptTagHolder.uniqueCallbackIdentifier),f.v="5",this.transportSessionId&&(f.s=this.transportSessionId),this.lastSessionId&&(f.ls=this.lastSessionId),this.applicationId&&(f.p=this.applicationId),this.appCheckToken&&(f.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&xr.test(location.hostname)&&(f.r="f");const v=this.urlFn(f);this.log_("Connecting via long-poll to "+v),this.scriptTagHolder.addTag(v,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Gi.forceAllow_=!0}static forceDisallow(){Gi.forceDisallow_=!0}static isAvailable(){return!((0,Oe.iw)()||!Gi.forceAllow_&&(Gi.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(a){const l=(0,Oe.i)(a);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const f=(0,Oe.c9)(l),v=di(f,1840);for(let T=0;T<v.length;T++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,v.length,v[T]),this.curSegmentNum++}addDisconnectPingFrame(a,l){if((0,Oe.iw)())return;this.myDisconnFrame=document.createElement("iframe");const f={dframe:"t"};f.id=a,f.pw=l,this.myDisconnFrame.src=this.urlFn(f),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(a){const l=(0,Oe.i)(a).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class $s{constructor(a,l,f,v){if(this.onDisconnect=f,this.urlFn=v,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Oe.iw)())this.commandCB=a,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Te(),window["pLPCommand"+this.uniqueCallbackIdentifier]=a,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=$s.createIFrame_();let T="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(T='<script>document.domain="'+document.domain+'";<\/script>');const O="<html><body>"+T+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(O),this.myIFrame.doc.close()}catch(B){cn("frame writing exception"),B.stack&&cn(B.stack),cn(B)}}}static createIFrame_(){const a=document.createElement("iframe");if(a.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(a);try{a.contentWindow.document||cn("No IE domain setting required")}catch{const f=document.domain;a.src="javascript:void((function(){document.open();document.domain='"+f+"';document.close();})())"}return a.contentDocument?a.doc=a.contentDocument:a.contentWindow?a.doc=a.contentWindow.document:a.document&&(a.doc=a.document),a}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const a=this.onDisconnect;a&&(this.onDisconnect=null,a())}startLongPoll(a,l){for(this.myID=a,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const a={};a.id=this.myID,a.pw=this.myPW,a.ser=this.currentSerial;let l=this.urlFn(a),f="",v=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+f.length<=1870;){const O=this.pendingSegs.shift();f=f+"&seg"+v+"="+O.seg+"&ts"+v+"="+O.ts+"&d"+v+"="+O.d,v++}return l+=f,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(a,l,f){this.pendingSegs.push({seg:a,ts:l,d:f}),this.alive&&this.newRequest_()}addLongPollTag_(a,l){this.outstandingRequests.add(l);const f=()=>{this.outstandingRequests.delete(l),this.newRequest_()},v=setTimeout(f,Math.floor(25e3));this.addTag(a,()=>{clearTimeout(v),f()})}addTag(a,l){(0,Oe.iw)()?this.doNodeLongPoll(a,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const f=this.myIFrame.doc.createElement("script");f.type="text/javascript",f.async=!0,f.src=a,f.onload=f.onreadystatechange=function(){const v=f.readyState;(!v||"loaded"===v||"complete"===v)&&(f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),l())},f.onerror=()=>{cn("Long-poll script failed to load: "+a),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(f)}catch{}},Math.floor(1))}}let ao=null;typeof MozWebSocket<"u"?ao=MozWebSocket:typeof WebSocket<"u"&&(ao=WebSocket);let oa=(()=>{class h{constructor(l,f,v,T,O,B,X){this.connId=l,this.applicationId=v,this.appCheckToken=T,this.authToken=O,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yn(this.connId),this.stats_=_i(f),this.connURL=h.connectionURL_(f,B,X,T,v),this.nodeAdmin=f.nodeAdmin}static connectionURL_(l,f,v,T,O){const B={v:"5"};return!(0,Oe.iw)()&&typeof location<"u"&&location.hostname&&xr.test(location.hostname)&&(B.r="f"),f&&(B.s=f),v&&(B.ls=v),T&&(B.ac=T),O&&(B.p=O),Pn(l,Yi,B)}open(l,f){this.onDisconnect=f,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_r.set("previous_websocket_failure",!0);try{let v;if((0,Oe.iw)()){v={headers:{"User-Agent":`Firebase/5/${en}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(v.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(v.headers["X-Firebase-AppCheck"]=this.appCheckToken);const O=process.env,B=0===this.connURL.indexOf("wss://")?O.HTTPS_PROXY||O.https_proxy:O.HTTP_PROXY||O.http_proxy;B&&(v.proxy={origin:B})}this.mySock=new ao(this.connURL,[],v)}catch(v){this.log_("Error instantiating WebSocket.");const T=v.message||v.data;return T&&this.log_(T),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=v=>{this.handleIncomingFrame(v)},this.mySock.onerror=v=>{this.log_("WebSocket error.  Closing connection.");const T=v.message||v.data;T&&this.log_(T),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const v=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);v&&v.length>1&&parseFloat(v[1])<4.4&&(l=!0)}return!l&&null!==ao&&!h.forceDisallow_}static previouslyFailed(){return _r.isInMemoryStorage||!0===_r.get("previous_websocket_failure")}markConnectionHealthy(){_r.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const f=this.frames.join("");this.frames=null;const v=(0,Oe.GI)(f);this.onMessage(v)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,Oe.Uc)(null===this.frames,"We already have a frame buffer"),l.length<=6){const f=Number(l);if(!isNaN(f))return this.handleNewFrameCount_(f),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const f=l.data;if(this.bytesReceived+=f.length,this.stats_.incrementCounter("bytes_received",f.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(f);else{const v=this.extractFrameCount_(f);null!==v&&this.appendFrame_(v)}}send(l){this.resetKeepAlive();const f=(0,Oe.i)(l);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);const v=di(f,16384);v.length>1&&this.sendString_(String(v.length));for(let T=0;T<v.length;T++)this.sendString_(v[T])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(f){this.log_("Exception thrown from WebSocket.send():",f.message||f.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),vc=(()=>{class h{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[Gi,oa]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const f=oa&&oa.isAvailable();let v=f&&!oa.previouslyFailed();if(l.webSocketOnly&&(f||$n("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),v=!0),v)this.transports_=[oa];else{const T=this.transports_=[];for(const O of h.ALL_TRANSPORTS)O&&O.isAvailable()&&T.push(O);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class un{constructor(a,l,f,v,T,O,B,X,se,Fe){this.id=a,this.repoInfo_=l,this.applicationId_=f,this.appCheckToken_=v,this.authToken_=T,this.onMessage_=O,this.onReady_=B,this.onDisconnect_=X,this.onKill_=se,this.lastSessionId=Fe,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yn("c:"+this.id+":"),this.transportManager_=new vc(l),this.log_("Connection created"),this.start_()}start_(){const a=this.transportManager_.initialTransport();this.conn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),f=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,f)},Math.floor(0));const v=a.healthyTimeout||0;v>0&&(this.healthyTimeout_=hi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(v)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(a){return l=>{a===this.conn_?this.onConnectionLost_(l):a===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(a){return l=>{2!==this.state_&&(a===this.rx_?this.onPrimaryMessageReceived_(l):a===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(a){this.sendData_({t:"d",d:a})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(a){if("t"in a){const l=a.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(a){const l=ls("t",a),f=ls("d",a);if("c"===l)this.onSecondaryControl_(f);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(f)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(a){const l=ls("t",a),f=ls("d",a);"c"===l?this.onControl_(f):"d"===l&&this.onDataMessage_(f)}onDataMessage_(a){this.onPrimaryResponse_(),this.onMessage_(a)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(a){const l=ls("t",a);if("d"in a){const f=a.d;if("h"===l){const v=Object.assign({},f);this.repoInfo_.isUsingEmulator&&(v.h=this.repoInfo_.host),this.onHandshake_(v)}else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let v=0;v<this.pendingDataMessages.length;++v)this.onDataMessage_(this.pendingDataMessages[v]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(f):"r"===l?this.onReset_(f):"e"===l?Ar("Server Error: "+f):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ar("Unknown control packet command: "+l)}}onHandshake_(a){const l=a.ts,f=a.v,v=a.h;this.sessionId=a.s,this.repoInfo_.host=v,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==f&&$n("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const a=this.transportManager_.upgradeTransport();a&&this.startUpgrade_(a)}startUpgrade_(a){this.secondaryConn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),f=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,f),hi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(a){this.log_("Reset packet received.  New host: "+a),this.repoInfo_.host=a,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(a,l){this.log_("Realtime connection established."),this.conn_=a,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):hi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const a=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===a||this.rx_===a)&&this.close()}onConnectionLost_(a){this.conn_=null,a||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_r.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(a){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(a),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(a){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(a)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class er{put(a,l,f,v){}merge(a,l,f,v){}refreshAuthToken(a){}refreshAppCheckToken(a){}onDisconnectPut(a,l,f){}onDisconnectMerge(a,l,f){}onDisconnectCancel(a,l){}reportStats(a){}}class Ps{constructor(a){this.allowedEvents_=a,this.listeners_={},(0,Oe.Uc)(Array.isArray(a)&&a.length>0,"Requires a non-empty array")}trigger(a,...l){if(Array.isArray(this.listeners_[a])){const f=[...this.listeners_[a]];for(let v=0;v<f.length;v++)f[v].callback.apply(f[v].context,l)}}on(a,l,f){this.validateEventType_(a),this.listeners_[a]=this.listeners_[a]||[],this.listeners_[a].push({callback:l,context:f});const v=this.getInitialEvent(a);v&&l.apply(f,v)}off(a,l,f){this.validateEventType_(a);const v=this.listeners_[a]||[];for(let T=0;T<v.length;T++)if(v[T].callback===l&&(!f||f===v[T].context))return void v.splice(T,1)}validateEventType_(a){(0,Oe.Uc)(this.allowedEvents_.find(l=>l===a),"Unknown event: "+a)}}class hs extends Ps{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,Oe.AV)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new hs}getInitialEvent(a){return(0,Oe.Uc)("online"===a,"Unknown event type: "+a),[this.online_]}currentlyOnline(){return this.online_}}class kn{constructor(a,l){if(void 0===l){this.pieces_=a.split("/");let f=0;for(let v=0;v<this.pieces_.length;v++)this.pieces_[v].length>0&&(this.pieces_[f]=this.pieces_[v],f++);this.pieces_.length=f,this.pieceNum_=0}else this.pieces_=a,this.pieceNum_=l}toString(){let a="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(a+="/"+this.pieces_[l]);return a||"/"}}function kr(){return new kn("")}function mn(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function aa(h){return h.pieces_.length-h.pieceNum_}function fi(h){let a=h.pieceNum_;return a<h.pieces_.length&&a++,new kn(h.pieces_,a)}function Xa(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function lo(h,a=0){return h.pieces_.slice(h.pieceNum_+a)}function Yo(h){if(h.pieceNum_>=h.pieces_.length)return null;const a=[];for(let l=h.pieceNum_;l<h.pieces_.length-1;l++)a.push(h.pieces_[l]);return new kn(a,0)}function yr(h,a){const l=[];for(let f=h.pieceNum_;f<h.pieces_.length;f++)l.push(h.pieces_[f]);if(a instanceof kn)for(let f=a.pieceNum_;f<a.pieces_.length;f++)l.push(a.pieces_[f]);else{const f=a.split("/");for(let v=0;v<f.length;v++)f[v].length>0&&l.push(f[v])}return new kn(l,0)}function Gn(h){return h.pieceNum_>=h.pieces_.length}function ss(h,a){const l=mn(h),f=mn(a);if(null===l)return a;if(l===f)return ss(fi(h),fi(a));throw new Error("INTERNAL ERROR: innerPath ("+a+") is not within outerPath ("+h+")")}function Ws(h,a){if(aa(h)!==aa(a))return!1;for(let l=h.pieceNum_,f=a.pieceNum_;l<=h.pieces_.length;l++,f++)if(h.pieces_[l]!==a.pieces_[f])return!1;return!0}function ys(h,a){let l=h.pieceNum_,f=a.pieceNum_;if(aa(h)>aa(a))return!1;for(;l<h.pieces_.length;){if(h.pieces_[l]!==a.pieces_[f])return!1;++l,++f}return!0}class ko{constructor(a,l){this.errorPrefix_=l,this.parts_=lo(a,0),this.byteLength_=Math.max(1,this.parts_.length);for(let f=0;f<this.parts_.length;f++)this.byteLength_+=(0,Oe.Uj)(this.parts_[f]);uo(this)}}function uo(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Fo(h))}function Fo(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class Qo extends Ps{constructor(){let a,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",a="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",a="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",a="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",a="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const f=!document[a];f!==this.visible_&&(this.visible_=f,this.trigger("visible",f))},!1)}static getInstance(){return new Qo}getInitialEvent(a){return(0,Oe.Uc)("visible"===a,"Unknown event type: "+a),[this.visible_]}}const ho=1e3;let qc,fo=(()=>{class h extends er{constructor(l,f,v,T,O,B,X,se){if(super(),this.repoInfo_=l,this.applicationId_=f,this.onDataUpdate_=v,this.onConnectStatus_=T,this.onServerInfoUpdate_=O,this.authTokenProvider_=B,this.appCheckTokenProvider_=X,this.authOverride_=se,this.id=h.nextPersistentConnectionId_++,this.log_=Yn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ho,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,se&&!(0,Oe.iw)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Qo.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&hs.getInstance().on("online",this.onOnline_,this)}sendRequest(l,f,v){const T=++this.requestNumber_,O={r:T,a:l,b:f};this.log_((0,Oe.i)(O)),(0,Oe.Uc)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(O),v&&(this.requestCBHash_[T]=v)}get(l){this.initConnection_();const f=new Oe.o9,T={action:"g",request:{p:l._path.toString(),q:l._queryObject},onComplete:B=>{const X=B.d;"ok"===B.s?f.resolve(X):f.reject(X)}};return this.outstandingGets_.push(T),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),f.promise}listen(l,f,v,T){this.initConnection_();const O=l._queryIdentifier,B=l._path.toString();this.log_("Listen called for "+B+" "+O),this.listens.has(B)||this.listens.set(B,new Map),(0,Oe.Uc)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Oe.Uc)(!this.listens.get(B).has(O),"listen() called twice for same path/queryId.");const X={onComplete:T,hashFn:f,query:l,tag:v};this.listens.get(B).set(O,X),this.connected_&&this.sendListen_(X)}sendGet_(l){const f=this.outstandingGets_[l];this.sendRequest("g",f.request,v=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),f.onComplete&&f.onComplete(v)})}sendListen_(l){const f=l.query,v=f._path.toString(),T=f._queryIdentifier;this.log_("Listen on "+v+" for "+T);const O={p:v};l.tag&&(O.q=f._queryObject,O.t=l.tag),O.h=l.hashFn(),this.sendRequest("q",O,X=>{const se=X.d,Fe=X.s;h.warnOnListenWarnings_(se,f),(this.listens.get(v)&&this.listens.get(v).get(T))===l&&(this.log_("listen response",X),"ok"!==Fe&&this.removeListen_(v,T),l.onComplete&&l.onComplete(Fe,se))})}static warnOnListenWarnings_(l,f){if(l&&"object"==typeof l&&(0,Oe.Y7)(l,"w")){const v=(0,Oe.o5)(l,"w");if(Array.isArray(v)&&~v.indexOf("no_index")){const T='".indexOn": "'+f._queryParams.getIndex().toString()+'"',O=f._path.toString();$n(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${T} at ${O} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,Oe.L0)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,f=(0,Oe.AX)(l)?"auth":"gauth",v={cred:l};null===this.authOverride_?v.noauth=!0:"object"==typeof this.authOverride_&&(v.authvar=this.authOverride_),this.sendRequest(f,v,T=>{const O=T.s,B=T.d||"error";this.authToken_===l&&("ok"===O?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(O,B))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const f=l.s,v=l.d||"error";"ok"===f?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(f,v)})}unlisten(l,f){const v=l._path.toString(),T=l._queryIdentifier;this.log_("Unlisten called for "+v+" "+T),(0,Oe.Uc)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(v,T)&&this.connected_&&this.sendUnlisten_(v,T,l._queryObject,f)}sendUnlisten_(l,f,v,T){this.log_("Unlisten on "+l+" for "+f);const O={p:l};T&&(O.q=v,O.t=T),this.sendRequest("n",O)}onDisconnectPut(l,f,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,f,v):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:f,onComplete:v})}onDisconnectMerge(l,f,v){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,f,v):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:f,onComplete:v})}onDisconnectCancel(l,f){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,f):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:f})}sendOnDisconnect_(l,f,v,T){const O={p:f,d:v};this.log_("onDisconnect "+l,O),this.sendRequest(l,O,B=>{T&&setTimeout(()=>{T(B.s,B.d)},Math.floor(0))})}put(l,f,v,T){this.putInternal("p",l,f,v,T)}merge(l,f,v,T){this.putInternal("m",l,f,v,T)}putInternal(l,f,v,T,O){this.initConnection_();const B={p:f,d:v};void 0!==O&&(B.h=O),this.outstandingPuts_.push({action:l,request:B,onComplete:T}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+f)}sendPut_(l){const f=this.outstandingPuts_[l].action,v=this.outstandingPuts_[l].request,T=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(f,v,O=>{this.log_(f+" response",O),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),T&&T(O.s,O.d)})}reportStats(l){if(this.connected_){const f={c:l};this.log_("reportStats",f),this.sendRequest("s",f,v=>{"ok"!==v.s&&this.log_("reportStats","Error sending stats: "+v.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,Oe.i)(l));const f=l.r,v=this.requestCBHash_[f];v&&(delete this.requestCBHash_[f],v(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,f){this.log_("handleServerMessage",l,f),"d"===l?this.onDataUpdate_(f.p,f.d,!1,f.t):"m"===l?this.onDataUpdate_(f.p,f.d,!0,f.t):"c"===l?this.onListenRevoked_(f.p,f.q):"ac"===l?this.onAuthRevoked_(f.s,f.d):"apc"===l?this.onAppCheckRevoked_(f.s,f.d):"sd"===l?this.onSecurityDebugPacket_(f):Ar("Unrecognized action received from server: "+(0,Oe.i)(l)+"\nAre you using the latest client?")}onReady_(l,f){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=f,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,Oe.Uc)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ho,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=ho,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ho),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let f=Math.max(0,this.reconnectDelay_-l);f=Math.random()*f,this.log_("Trying to reconnect in "+f+"ms"),this.scheduleConnect_(f),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,Nr.c)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const f=l.onDataMessage_.bind(l),v=l.onReady_.bind(l),T=l.onRealtimeDisconnect_.bind(l),O=l.id+":"+h.nextConnectionId_++,B=l.lastSessionId;let X=!1,se=null;const Fe=function(){se?se.close():(X=!0,T())};l.realtime_={close:Fe,sendRequest:function(Mt){(0,Oe.Uc)(se,"sendRequest call when we're not connected not allowed."),se.sendRequest(Mt)}};const ut=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[Mt,xt]=yield Promise.all([l.authTokenProvider_.getToken(ut),l.appCheckTokenProvider_.getToken(ut)]);X?cn("getToken() completed but was canceled"):(cn("getToken() completed. Creating connection."),l.authToken_=Mt&&Mt.accessToken,l.appCheckToken_=xt&&xt.token,se=new un(O,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,f,v,T,on=>{$n(on+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},B))}catch(Mt){l.log_("Failed to get token: "+Mt),X||(l.repoInfo_.nodeAdmin&&$n(Mt),Fe())}}})()}interrupt(l){cn("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){cn("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,Oe.t7)(this.interruptReasons_)&&(this.reconnectDelay_=ho,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const f=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:f})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const f=this.outstandingPuts_[l];f&&"h"in f.request&&f.queued&&(f.onComplete&&f.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,f){let v;v=f?f.map(O=>Ni(O)).join("$"):"default";const T=this.removeListen_(l,v);T&&T.onComplete&&T.onComplete("permission_denied")}removeListen_(l,f){const v=new kn(l).toString();let T;if(this.listens.has(v)){const O=this.listens.get(v);T=O.get(f),O.delete(f),0===O.size&&this.listens.delete(v)}else T=void 0;return T}onAuthRevoked_(l,f){cn("Auth token revoked: "+l+"/"+f),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,f){cn("App check token revoked: "+l+"/"+f),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const f of l.values())this.sendListen_(f);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let f="js";(0,Oe.iw)()&&(f=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+f+"."+en.replace(/\./g,"-")]=1,(0,Oe.AV)()?l["framework.cordova"]=1:(0,Oe.AL)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=hs.getInstance().currentlyOnline();return(0,Oe.t7)(this.interruptReasons_)&&l}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class vr{constructor(a,l){this.name=a,this.node=l}static Wrap(a,l){return new vr(a,l)}}class La{getCompare(){return this.compare.bind(this)}indexedValueChanged(a,l){const f=new vr(Qn,a),v=new vr(Qn,l);return 0!==this.compare(f,v)}minPost(){return vr.MIN}}class la extends La{static get __EMPTY_NODE(){return qc}static set __EMPTY_NODE(a){qc=a}compare(a,l){return Hn(a.name,l.name)}isDefinedOn(a){throw(0,Oe.Y9)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(a,l){return!1}minPost(){return vr.MIN}maxPost(){return new vr(oi,qc)}makePost(a,l){return(0,Oe.Uc)("string"==typeof a,"KeyIndex indexValue must always be a string."),new vr(a,qc)}toString(){return".key"}}const Lo=new la;class ua{constructor(a,l,f,v,T=null){this.isReverse_=v,this.resultGenerator_=T,this.nodeStack_=[];let O=1;for(;!a.isEmpty();)if(O=l?f(a.key,l):1,v&&(O*=-1),O<0)a=this.isReverse_?a.left:a.right;else{if(0===O){this.nodeStack_.push(a);break}this.nodeStack_.push(a),a=this.isReverse_?a.right:a.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,a=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value},this.isReverse_)for(a=a.left;!a.isEmpty();)this.nodeStack_.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack_.push(a),a=a.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const a=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value}}}let Ct,bs=(()=>{class h{constructor(l,f,v,T,O){this.key=l,this.value=f,this.color=v??h.RED,this.left=T??Es.EMPTY_NODE,this.right=O??Es.EMPTY_NODE}copy(l,f,v,T,O){return new h(l??this.key,f??this.value,v??this.color,T??this.left,O??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,f,v){let T=this;const O=v(l,T.key);return T=O<0?T.copy(null,null,null,T.left.insert(l,f,v),null):0===O?T.copy(null,f,null,null,null):T.copy(null,null,null,null,T.right.insert(l,f,v)),T.fixUp_()}removeMin_(){if(this.left.isEmpty())return Es.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,f){let v,T;if(v=this,f(l,v.key)<0)!v.left.isEmpty()&&!v.left.isRed_()&&!v.left.left.isRed_()&&(v=v.moveRedLeft_()),v=v.copy(null,null,null,v.left.remove(l,f),null);else{if(v.left.isRed_()&&(v=v.rotateRight_()),!v.right.isEmpty()&&!v.right.isRed_()&&!v.right.left.isRed_()&&(v=v.moveRedRight_()),0===f(l,v.key)){if(v.right.isEmpty())return Es.EMPTY_NODE;T=v.right.min_(),v=v.copy(T.key,T.value,null,null,v.right.removeMin_())}v=v.copy(null,null,null,null,v.right.remove(l,f))}return v.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),f=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,f)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class Es{constructor(a,l=Es.EMPTY_NODE){this.comparator_=a,this.root_=l}insert(a,l){return new Es(this.comparator_,this.root_.insert(a,l,this.comparator_).copy(null,null,bs.BLACK,null,null))}remove(a){return new Es(this.comparator_,this.root_.remove(a,this.comparator_).copy(null,null,bs.BLACK,null,null))}get(a){let l,f=this.root_;for(;!f.isEmpty();){if(l=this.comparator_(a,f.key),0===l)return f.value;l<0?f=f.left:l>0&&(f=f.right)}return null}getPredecessorKey(a){let l,f=this.root_,v=null;for(;!f.isEmpty();){if(l=this.comparator_(a,f.key),0===l){if(f.left.isEmpty())return v?v.key:null;for(f=f.left;!f.right.isEmpty();)f=f.right;return f.key}l<0?f=f.left:l>0&&(v=f,f=f.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(a){return this.root_.inorderTraversal(a)}reverseTraversal(a){return this.root_.reverseTraversal(a)}getIterator(a){return new ua(this.root_,null,this.comparator_,!1,a)}getIteratorFrom(a,l){return new ua(this.root_,a,this.comparator_,!1,l)}getReverseIteratorFrom(a,l){return new ua(this.root_,a,this.comparator_,!0,l)}getReverseIterator(a){return new ua(this.root_,null,this.comparator_,!0,a)}}function Hs(h,a){return Hn(h.name,a.name)}function El(h,a){return Hn(h,a)}Es.EMPTY_NODE=new class au{copy(a,l,f,v,T){return this}insert(a,l,f){return new bs(a,l,null)}remove(a,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ec=function(h){return"number"==typeof h?"number:"+ks(h):"string:"+h},po=function(h){if(h.isLeafNode()){const a=h.val();(0,Oe.Uc)("string"==typeof a||"number"==typeof a||"object"==typeof a&&(0,Oe.Y7)(a,".sv"),"Priority must be a string or number.")}else(0,Oe.Uc)(h===Ct||h.isEmpty(),"priority of unexpected type.");(0,Oe.Uc)(h===Ct||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Br,Va,Do,Hr=(()=>{class h{constructor(l,f=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=f,this.lazyHash_=null,(0,Oe.Uc)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),po(this.priorityNode_)}static set __childrenNodeConstructor(l){Br=l}static get __childrenNodeConstructor(){return Br}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new h(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Gn(l)?this:".priority"===mn(l)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,f){return null}updateImmediateChild(l,f){return".priority"===l?this.updatePriority(f):f.isEmpty()&&".priority"!==l?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,f).updatePriority(this.priorityNode_)}updateChild(l,f){const v=mn(l);return null===v?f:f.isEmpty()&&".priority"!==v?this:((0,Oe.Uc)(".priority"!==v||1===aa(l),".priority must be the last token in a path"),this.updateImmediateChild(v,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(fi(l),f)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,f){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+Ec(this.priorityNode_.val())+":");const f=typeof this.value_;l+=f+":",l+="number"===f?ks(this.value_):this.value_,this.lazyHash_=yt(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===h.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof h.__childrenNodeConstructor?-1:((0,Oe.Uc)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const f=typeof l.value_,v=typeof this.value_,T=h.VALUE_TYPE_ORDER.indexOf(f),O=h.VALUE_TYPE_ORDER.indexOf(v);return(0,Oe.Uc)(T>=0,"Unknown leaf type: "+f),(0,Oe.Uc)(O>=0,"Unknown leaf type: "+v),T===O?"object"===v?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:O-T}withIndex(){return this}isIndexed(){return!0}equals(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const ai=new class Ic extends La{compare(a,l){const f=a.node.getPriority(),v=l.node.getPriority(),T=f.compareTo(v);return 0===T?Hn(a.name,l.name):T}isDefinedOn(a){return!a.getPriority().isEmpty()}indexedValueChanged(a,l){return!a.getPriority().equals(l.getPriority())}minPost(){return vr.MIN}maxPost(){return new vr(oi,new Hr("[PRIORITY-POST]",Do))}makePost(a,l){const f=Va(a);return new vr(l,new Hr("[PRIORITY-POST]",f))}toString(){return".priority"}},Cl=Math.log(2);class Ms{constructor(a){this.count=parseInt(Math.log(a+1)/Cl,10),this.current_=this.count-1;const v=(T=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=a+1&v}nextBitIsOne(){const a=!(this.bits_&1<<this.current_);return this.current_--,a}}const vi=function(h,a,l,f){h.sort(a);const v=function(X,se){const Fe=se-X;let Ge,ut;if(0===Fe)return null;if(1===Fe)return Ge=h[X],ut=l?l(Ge):Ge,new bs(ut,Ge.node,bs.BLACK,null,null);{const Mt=parseInt(Fe/2,10)+X,xt=v(X,Mt),on=v(Mt+1,se);return Ge=h[Mt],ut=l?l(Ge):Ge,new bs(ut,Ge.node,bs.BLACK,xt,on)}},B=function(X){let se=null,Fe=null,Ge=h.length;const ut=function(xt,on){const Dr=Ge-xt,ns=Ge;Ge-=xt;const ms=v(Dr+1,ns),Ss=h[Dr],no=l?l(Ss):Ss;Mt(new bs(no,Ss.node,on,null,ms))},Mt=function(xt){se?(se.left=xt,se=xt):(Fe=xt,se=xt)};for(let xt=0;xt<X.count;++xt){const on=X.nextBitIsOne(),Dr=Math.pow(2,X.count-(xt+1));on?ut(Dr,bs.BLACK):(ut(Dr,bs.BLACK),ut(Dr,bs.RED))}return Fe}(new Ms(h.length));return new Es(f||a,B)};let zs;const Pr={};class P{constructor(a,l){this.indexes_=a,this.indexSet_=l}static get Default(){return(0,Oe.Uc)(Pr&&ai,"ChildrenNode.ts has not been loaded"),zs=zs||new P({".priority":Pr},{".priority":ai}),zs}get(a){const l=(0,Oe.o5)(this.indexes_,a);if(!l)throw new Error("No index defined for "+a);return l instanceof Es?l:null}hasIndex(a){return(0,Oe.Y7)(this.indexSet_,a.toString())}addIndex(a,l){(0,Oe.Uc)(a!==Lo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const f=[];let v=!1;const T=l.getIterator(vr.Wrap);let B,O=T.getNext();for(;O;)v=v||a.isDefinedOn(O.node),f.push(O),O=T.getNext();B=v?vi(f,a.getCompare()):Pr;const X=a.toString(),se=Object.assign({},this.indexSet_);se[X]=a;const Fe=Object.assign({},this.indexes_);return Fe[X]=B,new P(Fe,se)}addToIndexes(a,l){const f=(0,Oe.kH)(this.indexes_,(v,T)=>{const O=(0,Oe.o5)(this.indexSet_,T);if((0,Oe.Uc)(O,"Missing index implementation for "+T),v===Pr){if(O.isDefinedOn(a.node)){const B=[],X=l.getIterator(vr.Wrap);let se=X.getNext();for(;se;)se.name!==a.name&&B.push(se),se=X.getNext();return B.push(a),vi(B,O.getCompare())}return Pr}{const B=l.get(a.name);let X=v;return B&&(X=X.remove(new vr(a.name,B))),X.insert(a,a.node)}});return new P(f,this.indexSet_)}removeFromIndexes(a,l){const f=(0,Oe.kH)(this.indexes_,v=>{if(v===Pr)return v;{const T=l.get(a.name);return T?v.remove(new vr(a.name,T)):v}});return new P(f,this.indexSet_)}}let Q,F=(()=>{class h{constructor(l,f,v){this.children_=l,this.priorityNode_=f,this.indexMap_=v,this.lazyHash_=null,this.priorityNode_&&po(this.priorityNode_),this.children_.isEmpty()&&(0,Oe.Uc)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Q||(Q=new h(new Es(El),null,P.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Q}updatePriority(l){return this.children_.isEmpty()?this:new h(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const f=this.children_.get(l);return null===f?Q:f}}getChild(l){const f=mn(l);return null===f?this:this.getImmediateChild(f).getChild(fi(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,f){if((0,Oe.Uc)(f,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(f);{const v=new vr(l,f);let T,O;f.isEmpty()?(T=this.children_.remove(l),O=this.indexMap_.removeFromIndexes(v,this.children_)):(T=this.children_.insert(l,f),O=this.indexMap_.addToIndexes(v,this.children_));const B=T.isEmpty()?Q:this.priorityNode_;return new h(T,B,O)}}updateChild(l,f){const v=mn(l);if(null===v)return f;{(0,Oe.Uc)(".priority"!==mn(l)||1===aa(l),".priority must be the last token in a path");const T=this.getImmediateChild(v).updateChild(fi(l),f);return this.updateImmediateChild(v,T)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const f={};let v=0,T=0,O=!0;if(this.forEachChild(ai,(B,X)=>{f[B]=X.val(l),v++,O&&h.INTEGER_REGEXP_.test(B)?T=Math.max(T,Number(B)):O=!1}),!l&&O&&T<2*v){const B=[];for(const X in f)B[X]=f[X];return B}return l&&!this.getPriority().isEmpty()&&(f[".priority"]=this.getPriority().val()),f}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+Ec(this.getPriority().val())+":"),this.forEachChild(ai,(f,v)=>{const T=v.hash();""!==T&&(l+=":"+f+":"+T)}),this.lazyHash_=""===l?"":yt(l)}return this.lazyHash_}getPredecessorChildName(l,f,v){const T=this.resolveIndex_(v);if(T){const O=T.getPredecessorKey(new vr(l,f));return O?O.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const f=this.resolveIndex_(l);if(f){const v=f.minKey();return v&&v.name}return this.children_.minKey()}getFirstChild(l){const f=this.getFirstChildName(l);return f?new vr(f,this.children_.get(f)):null}getLastChildName(l){const f=this.resolveIndex_(l);if(f){const v=f.maxKey();return v&&v.name}return this.children_.maxKey()}getLastChild(l){const f=this.getLastChildName(l);return f?new vr(f,this.children_.get(f)):null}forEachChild(l,f){const v=this.resolveIndex_(l);return v?v.inorderTraversal(T=>f(T.name,T.node)):this.children_.inorderTraversal(f)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,f){const v=this.resolveIndex_(f);if(v)return v.getIteratorFrom(l,T=>T);{const T=this.children_.getIteratorFrom(l.name,vr.Wrap);let O=T.peek();for(;null!=O&&f.compare(O,l)<0;)T.getNext(),O=T.peek();return T}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,f){const v=this.resolveIndex_(f);if(v)return v.getReverseIteratorFrom(l,T=>T);{const T=this.children_.getReverseIteratorFrom(l.name,vr.Wrap);let O=T.peek();for(;null!=O&&f.compare(O,l)>0;)T.getNext(),O=T.peek();return T}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===me?-1:0}withIndex(l){if(l===Lo||this.indexMap_.hasIndex(l))return this;{const f=this.indexMap_.addIndex(l,this.children_);return new h(this.children_,this.priorityNode_,f)}}isIndexed(l){return l===Lo||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const f=l;if(this.getPriority().equals(f.getPriority())){if(this.children_.count()===f.children_.count()){const v=this.getIterator(ai),T=f.getIterator(ai);let O=v.getNext(),B=T.getNext();for(;O&&B;){if(O.name!==B.name||!O.node.equals(B.node))return!1;O=v.getNext(),B=T.getNext()}return null===O&&null===B}return!1}return!1}}resolveIndex_(l){return l===Lo?null:this.indexMap_.get(l.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const me=new class z extends F{constructor(){super(new Es(El),F.EMPTY_NODE,P.Default)}compareTo(a){return a===this?0:1}equals(a){return a===this}getPriority(){return this}getImmediateChild(a){return F.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(vr,{MIN:{value:new vr(Qn,F.EMPTY_NODE)},MAX:{value:new vr(oi,me)}}),la.__EMPTY_NODE=F.EMPTY_NODE,Hr.__childrenNodeConstructor=F,function hr(h){Ct=h}(me),function Il(h){Do=h}(me);const ot=!0;function vt(h,a=null){if(null===h)return F.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(a=h[".priority"]),(0,Oe.Uc)(null===a||"string"==typeof a||"number"==typeof a||"object"==typeof a&&".sv"in a,"Invalid priority type found: "+typeof a),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new Hr(h,vt(a));if(h instanceof Array||!ot){let l=F.EMPTY_NODE;return ti(h,(f,v)=>{if((0,Oe.Y7)(h,f)&&"."!==f.substring(0,1)){const T=vt(v);(T.isLeafNode()||!T.isEmpty())&&(l=l.updateImmediateChild(f,T))}}),l.updatePriority(vt(a))}{const l=[];let f=!1;if(ti(h,(O,B)=>{if("."!==O.substring(0,1)){const X=vt(B);X.isEmpty()||(f=f||!X.getPriority().isEmpty(),l.push(new vr(O,X)))}}),0===l.length)return F.EMPTY_NODE;const T=vi(l,Hs,O=>O.name,El);if(f){const O=vi(l,ai.getCompare());return new F(T,vt(a),new P({".priority":O},{".priority":ai}))}return new F(T,vt(a),P.Default)}}!function go(h){Va=h}(vt);class dn extends La{constructor(a){super(),this.indexPath_=a,(0,Oe.Uc)(!Gn(a)&&".priority"!==mn(a),"Can't create PathIndex with empty path or .priority key")}extractChild(a){return a.getChild(this.indexPath_)}isDefinedOn(a){return!a.getChild(this.indexPath_).isEmpty()}compare(a,l){const f=this.extractChild(a.node),v=this.extractChild(l.node),T=f.compareTo(v);return 0===T?Hn(a.name,l.name):T}makePost(a,l){const f=vt(a),v=F.EMPTY_NODE.updateChild(this.indexPath_,f);return new vr(l,v)}maxPost(){const a=F.EMPTY_NODE.updateChild(this.indexPath_,me);return new vr(oi,a)}toString(){return lo(this.indexPath_,0).join("/")}}const Qr=new class ii extends La{compare(a,l){const f=a.node.compareTo(l.node);return 0===f?Hn(a.name,l.name):f}isDefinedOn(a){return!0}indexedValueChanged(a,l){return!a.equals(l)}minPost(){return vr.MIN}maxPost(){return vr.MAX}makePost(a,l){const f=vt(a);return new vr(l,f)}toString(){return".value"}};function Fr(h,a,l){return{type:"child_changed",snapshotNode:a,childName:h,oldSnap:l}}class tr{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ai}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Oe.Uc)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Oe.Uc)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qn}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Oe.Uc)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Oe.Uc)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:oi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Oe.Uc)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ai}copy(){const a=new tr;return a.limitSet_=this.limitSet_,a.limit_=this.limit_,a.startSet_=this.startSet_,a.startAfterSet_=this.startAfterSet_,a.indexStartValue_=this.indexStartValue_,a.startNameSet_=this.startNameSet_,a.indexStartName_=this.indexStartName_,a.endSet_=this.endSet_,a.endBeforeSet_=this.endBeforeSet_,a.indexEndValue_=this.indexEndValue_,a.endNameSet_=this.endNameSet_,a.indexEndName_=this.indexEndName_,a.index_=this.index_,a.viewFrom_=this.viewFrom_,a}}function sn(h){const a={};if(h.isDefault())return a;let l;if(h.index_===ai?l="$priority":h.index_===Qr?l="$value":h.index_===Lo?l="$key":((0,Oe.Uc)(h.index_ instanceof dn,"Unrecognized index type!"),l=h.index_.toString()),a.orderBy=(0,Oe.i)(l),h.startSet_){const f=h.startAfterSet_?"startAfter":"startAt";a[f]=(0,Oe.i)(h.indexStartValue_),h.startNameSet_&&(a[f]+=","+(0,Oe.i)(h.indexStartName_))}if(h.endSet_){const f=h.endBeforeSet_?"endBefore":"endAt";a[f]=(0,Oe.i)(h.indexEndValue_),h.endNameSet_&&(a[f]+=","+(0,Oe.i)(h.indexEndName_))}return h.limitSet_&&(h.isViewFromLeft()?a.limitToFirst=h.limit_:a.limitToLast=h.limit_),a}function fn(h){const a={};if(h.startSet_&&(a.sp=h.indexStartValue_,h.startNameSet_&&(a.sn=h.indexStartName_),a.sin=!h.startAfterSet_),h.endSet_&&(a.ep=h.indexEndValue_,h.endNameSet_&&(a.en=h.indexEndName_),a.ein=!h.endBeforeSet_),h.limitSet_){a.l=h.limit_;let l=h.viewFrom_;""===l&&(l=h.isViewFromLeft()?"l":"r"),a.vf=l}return h.index_!==ai&&(a.i=h.index_.toString()),a}class cu extends er{constructor(a,l,f,v){super(),this.repoInfo_=a,this.onDataUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=v,this.log_=Yn("p:rest:"),this.listens_={}}reportStats(a){throw new Error("Method not implemented.")}static getListenId_(a,l){return void 0!==l?"tag$"+l:((0,Oe.Uc)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())}listen(a,l,f,v){const T=a._path.toString();this.log_("Listen called for "+T+" "+a._queryIdentifier);const O=cu.getListenId_(a,f),B={};this.listens_[O]=B;const X=sn(a._queryParams);this.restRequest_(T+".json",X,(se,Fe)=>{let Ge=Fe;if(404===se&&(Ge=null,se=null),null===se&&this.onDataUpdate_(T,Ge,!1,f),(0,Oe.o5)(this.listens_,O)===B){let ut;ut=se?401===se?"permission_denied":"rest_error:"+se:"ok",v(ut,null)}})}unlisten(a,l){const f=cu.getListenId_(a,l);delete this.listens_[f]}get(a){const l=sn(a._queryParams),f=a._path.toString(),v=new Oe.o9;return this.restRequest_(f+".json",l,(T,O)=>{let B=O;404===T&&(B=null,T=null),null===T?(this.onDataUpdate_(f,B,!1,null),v.resolve(B)):v.reject(new Error(B))}),v.promise}refreshAuthToken(a){}restRequest_(a,l={},f){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([v,T])=>{v&&v.accessToken&&(l.auth=v.accessToken),T&&T.token&&(l.ac=T.token);const O=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+a+"?ns="+this.repoInfo_.namespace+(0,Oe.ik)(l);this.log_("Sending REST request for "+O);const B=new XMLHttpRequest;B.onreadystatechange=()=>{if(f&&4===B.readyState){this.log_("REST Response for "+O+" received. status:",B.status,"response:",B.responseText);let X=null;if(B.status>=200&&B.status<300){try{X=(0,Oe.GI)(B.responseText)}catch{$n("Failed to parse JSON response for "+O+": "+B.responseText)}f(null,X)}else 401!==B.status&&404!==B.status&&$n("Got unsuccessful REST response for "+O+" Status: "+B.status),f(B.status);f=null}},B.open("GET",O,!0),B.send()})}}class Ht{constructor(){this.rootNode_=F.EMPTY_NODE}getNode(a){return this.rootNode_.getChild(a)}updateSnapshot(a,l){this.rootNode_=this.rootNode_.updateChild(a,l)}}function ht(){return{value:null,children:new Map}}function bt(h,a,l){if(Gn(a))h.value=l,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(a,l);else{const f=mn(a);h.children.has(f)||h.children.set(f,ht()),bt(h.children.get(f),a=fi(a),l)}}function Is(h,a,l){null!==h.value?l(a,h.value):function Kc(h,a){h.children.forEach((l,f)=>{a(f,l)})}(h,(f,v)=>{Is(v,new kn(a.toString()+"/"+f),l)})}class gd{constructor(a){this.collection_=a,this.last_=null}get(){const a=this.collection_.get(),l=Object.assign({},a);return this.last_&&ti(this.last_,(f,v)=>{l[f]=l[f]-v}),this.last_=a,l}}class wf{constructor(a,l){this.server_=l,this.statsToReport_={},this.statsListener_=new gd(a);const f=1e4+2e4*Math.random();hi(this.reportStats_.bind(this),Math.floor(f))}reportStats_(){const a=this.statsListener_.get(),l={};let f=!1;ti(a,(v,T)=>{T>0&&(0,Oe.Y7)(this.statsToReport_,v)&&(l[v]=T,f=!0)}),f&&this.server_.reportStats(l),hi(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var So=function(h){return h[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",h}(So||{});function Tc(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class bn{constructor(a,l,f){this.path=a,this.affectedTree=l,this.revert=f,this.type=So.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(a){if(Gn(this.path)){if(null!=this.affectedTree.value)return(0,Oe.Uc)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new kn(a));return new bn(kr(),l,this.revert)}}return(0,Oe.Uc)(mn(this.path)===a,"operationForChild called for unrelated child."),new bn(fi(this.path),this.affectedTree,this.revert)}}class da{constructor(a,l,f){this.source=a,this.path=l,this.snap=f,this.type=So.OVERWRITE}operationForChild(a){return Gn(this.path)?new da(this.source,kr(),this.snap.getImmediateChild(a)):new da(this.source,fi(this.path),this.snap)}}class wi{constructor(a,l,f){this.source=a,this.path=l,this.children=f,this.type=So.MERGE}operationForChild(a){if(Gn(this.path)){const l=this.children.subtree(new kn(a));return l.isEmpty()?null:l.value?new da(this.source,kr(),l.value):new wi(this.source,kr(),l)}return(0,Oe.Uc)(mn(this.path)===a,"Can't get a merge for a child not on the path of the operation"),new wi(this.source,fi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class _n{constructor(a,l,f){this.node_=a,this.fullyInitialized_=l,this.filtered_=f}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(a){if(Gn(a))return this.isFullyInitialized()&&!this.filtered_;const l=mn(a);return this.isCompleteForChild(l)}isCompleteForChild(a){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(a)}getNode(){return this.node_}}function tc(h,a,l,f,v,T){const O=f.filter(B=>B.type===l);O.sort((B,X)=>function Kt(h,a,l){if(null==a.childName||null==l.childName)throw(0,Oe.Y9)("Should only compare child_ events.");const f=new vr(a.childName,a.snapshotNode),v=new vr(l.childName,l.snapshotNode);return h.index_.compare(f,v)}(h,B,X)),O.forEach(B=>{const X=function Ai(h,a,l){return"value"===a.type||"child_removed"===a.type||(a.prevName=l.getPredecessorChildName(a.childName,a.snapshotNode,h.index_)),a}(h,B,T);v.forEach(se=>{se.respondsTo(B.type)&&a.push(se.createEvent(X,h.query_))})})}function yo(h,a){return{eventCache:h,serverCache:a}}function nc(h,a,l,f){return yo(new _n(a,l,f),h.serverCache)}function ha(h,a,l,f){return yo(h.eventCache,new _n(a,l,f))}function Xo(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function Ir(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let md;class li{constructor(a,l=(()=>(md||(md=new Es(Er)),md))()){this.value=a,this.children=l}static fromObject(a){let l=new li(null);return ti(a,(f,v)=>{l=l.set(new kn(f),v)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(a,l){if(null!=this.value&&l(this.value))return{path:kr(),value:this.value};if(Gn(a))return null;{const f=mn(a),v=this.children.get(f);if(null!==v){const T=v.findRootMostMatchingPathAndValue(fi(a),l);return null!=T?{path:yr(new kn(f),T.path),value:T.value}:null}return null}}findRootMostValueAndPath(a){return this.findRootMostMatchingPathAndValue(a,()=>!0)}subtree(a){if(Gn(a))return this;{const l=mn(a),f=this.children.get(l);return null!==f?f.subtree(fi(a)):new li(null)}}set(a,l){if(Gn(a))return new li(l,this.children);{const f=mn(a),T=(this.children.get(f)||new li(null)).set(fi(a),l),O=this.children.insert(f,T);return new li(this.value,O)}}remove(a){if(Gn(a))return this.children.isEmpty()?new li(null):new li(null,this.children);{const l=mn(a),f=this.children.get(l);if(f){const v=f.remove(fi(a));let T;return T=v.isEmpty()?this.children.remove(l):this.children.insert(l,v),null===this.value&&T.isEmpty()?new li(null):new li(this.value,T)}return this}}get(a){if(Gn(a))return this.value;{const l=mn(a),f=this.children.get(l);return f?f.get(fi(a)):null}}setTree(a,l){if(Gn(a))return l;{const f=mn(a),T=(this.children.get(f)||new li(null)).setTree(fi(a),l);let O;return O=T.isEmpty()?this.children.remove(f):this.children.insert(f,T),new li(this.value,O)}}fold(a){return this.fold_(kr(),a)}fold_(a,l){const f={};return this.children.inorderTraversal((v,T)=>{f[v]=T.fold_(yr(a,v),l)}),l(a,this.value,f)}findOnPath(a,l){return this.findOnPath_(a,kr(),l)}findOnPath_(a,l,f){const v=!!this.value&&f(l,this.value);if(v)return v;if(Gn(a))return null;{const T=mn(a),O=this.children.get(T);return O?O.findOnPath_(fi(a),yr(l,T),f):null}}foreachOnPath(a,l){return this.foreachOnPath_(a,kr(),l)}foreachOnPath_(a,l,f){if(Gn(a))return this;{this.value&&f(l,this.value);const v=mn(a),T=this.children.get(v);return T?T.foreachOnPath_(fi(a),yr(l,v),f):new li(null)}}foreach(a){this.foreach_(kr(),a)}foreach_(a,l){this.children.inorderTraversal((f,v)=>{v.foreach_(yr(a,f),l)}),this.value&&l(a,this.value)}foreachChild(a){this.children.inorderTraversal((l,f)=>{f.value&&a(l,f.value)})}}class Zo{constructor(a){this.writeTree_=a}static empty(){return new Zo(new li(null))}}function Rs(h,a,l){if(Gn(a))return new Zo(new li(l));{const f=h.writeTree_.findRootMostValueAndPath(a);if(null!=f){const v=f.path;let T=f.value;const O=ss(v,a);return T=T.updateChild(O,l),new Zo(h.writeTree_.set(v,T))}{const v=new li(l),T=h.writeTree_.setTree(a,v);return new Zo(T)}}}function Tl(h,a,l){let f=h;return ti(l,(v,T)=>{f=Rs(f,yr(a,v),T)}),f}function Dc(h,a){if(Gn(a))return Zo.empty();{const l=h.writeTree_.setTree(a,new li(null));return new Zo(l)}}function Yc(h,a){return null!=vo(h,a)}function vo(h,a){const l=h.writeTree_.findRootMostValueAndPath(a);return null!=l?h.writeTree_.get(l.path).getChild(ss(l.path,a)):null}function lu(h){const a=[],l=h.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(ai,(f,v)=>{a.push(new vr(f,v))}):h.writeTree_.children.inorderTraversal((f,v)=>{null!=v.value&&a.push(new vr(f,v.value))}),a}function et(h,a){if(Gn(a))return h;{const l=vo(h,a);return new Zo(null!=l?new li(l):h.writeTree_.subtree(a))}}function Cr(h){return h.writeTree_.isEmpty()}function ps(h,a){return w(kr(),h.writeTree_,a)}function w(h,a,l){if(null!=a.value)return l.updateChild(h,a.value);{let f=null;return a.children.inorderTraversal((v,T)=>{".priority"===v?((0,Oe.Uc)(null!==T.value,"Priority writes must always be leaf nodes"),f=T.value):l=w(yr(h,v),T,l)}),!l.getChild(h).isEmpty()&&null!==f&&(l=l.updateChild(yr(h,".priority"),f)),l}}function N(h,a){return jr(a,h)}function ve(h,a){if(h.snap)return ys(h.path,a);for(const l in h.children)if(h.children.hasOwnProperty(l)&&ys(yr(h.path,l),a))return!0;return!1}function rt(h){return h.visible}function $t(h,a,l){let f=Zo.empty();for(let v=0;v<h.length;++v){const T=h[v];if(a(T)){const O=T.path;let B;if(T.snap)ys(l,O)?(B=ss(l,O),f=Rs(f,B,T.snap)):ys(O,l)&&(B=ss(O,l),f=Rs(f,kr(),T.snap.getChild(B)));else{if(!T.children)throw(0,Oe.Y9)("WriteRecord should have .snap or .children");if(ys(l,O))B=ss(l,O),f=Tl(f,B,T.children);else if(ys(O,l))if(B=ss(O,l),Gn(B))f=Tl(f,kr(),T.children);else{const X=(0,Oe.o5)(T.children,mn(B));if(X){const se=X.getChild(fi(B));f=Rs(f,kr(),se)}}}}}return f}function Ut(h,a,l,f,v){if(f||v){const T=et(h.visibleWrites,a);return!v&&Cr(T)?l:v||null!=l||Yc(T,kr())?ps($t(h.allWrites,function(se){return(se.visible||v)&&(!f||!~f.indexOf(se.writeId))&&(ys(se.path,a)||ys(a,se.path))},a),l||F.EMPTY_NODE):null}{const T=vo(h.visibleWrites,a);if(null!=T)return T;{const O=et(h.visibleWrites,a);return Cr(O)?l:null!=l||Yc(O,kr())?ps(O,l||F.EMPTY_NODE):null}}}function Uo(h,a,l,f){return Ut(h.writeTree,h.treePath,a,l,f)}function Dl(h,a){return function nr(h,a,l){let f=F.EMPTY_NODE;const v=vo(h.visibleWrites,a);if(v)return v.isLeafNode()||v.forEachChild(ai,(T,O)=>{f=f.updateImmediateChild(T,O)}),f;if(l){const T=et(h.visibleWrites,a);return l.forEachChild(ai,(O,B)=>{const X=ps(et(T,new kn(O)),B);f=f.updateImmediateChild(O,X)}),lu(T).forEach(O=>{f=f.updateImmediateChild(O.name,O.node)}),f}return lu(et(h.visibleWrites,a)).forEach(O=>{f=f.updateImmediateChild(O.name,O.node)}),f}(h.writeTree,h.treePath,a)}function ju(h,a,l,f){return function Vi(h,a,l,f,v){(0,Oe.Uc)(f||v,"Either existingEventSnap or existingServerSnap must exist");const T=yr(a,l);if(Yc(h.visibleWrites,T))return null;{const O=et(h.visibleWrites,T);return Cr(O)?v.getChild(l):ps(O,v.getChild(l))}}(h.writeTree,h.treePath,a,l,f)}function $u(h,a){return function rc(h,a){return vo(h.visibleWrites,a)}(h.writeTree,yr(h.treePath,a))}function Sl(h,a,l){return function es(h,a,l,f){const v=yr(a,l),T=vo(h.visibleWrites,v);return null!=T?T:f.isCompleteForChild(l)?ps(et(h.visibleWrites,v),f.getNode().getImmediateChild(l)):null}(h.writeTree,h.treePath,a,l)}function cr(h,a){return jr(yr(h.treePath,a),h.writeTree)}function jr(h,a){return{treePath:h,writeTree:a}}class Df{constructor(){this.changeMap=new Map}trackChildChange(a){const l=a.type,f=a.childName;(0,Oe.Uc)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,Oe.Uc)(".priority"!==f,"Only non-priority child changes can be tracked.");const v=this.changeMap.get(f);if(v){const T=v.type;if("child_added"===l&&"child_removed"===T)this.changeMap.set(f,Fr(f,a.snapshotNode,v.snapshotNode));else if("child_removed"===l&&"child_added"===T)this.changeMap.delete(f);else if("child_removed"===l&&"child_changed"===T)this.changeMap.set(f,function pi(h,a){return{type:"child_removed",snapshotNode:a,childName:h}}(f,v.oldSnap));else if("child_changed"===l&&"child_added"===T)this.changeMap.set(f,function Jn(h,a){return{type:"child_added",snapshotNode:a,childName:h}}(f,a.snapshotNode));else{if("child_changed"!==l||"child_changed"!==T)throw(0,Oe.Y9)("Illegal combination of changes: "+a+" occurred after "+v);this.changeMap.set(f,Fr(f,a.snapshotNode,v.oldSnap))}}else this.changeMap.set(f,a)}getChanges(){return Array.from(this.changeMap.values())}}const Sf=new class Hp{getCompleteChild(a){return null}getChildAfterChild(a,l,f){return null}};class Af{constructor(a,l,f=null){this.writes_=a,this.viewCache_=l,this.optCompleteServerCache_=f}getCompleteChild(a){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(a))return l.getNode().getImmediateChild(a);{const f=null!=this.optCompleteServerCache_?new _n(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Sl(this.writes_,a,f)}}getChildAfterChild(a,l,f){const v=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ir(this.viewCache_),T=function ym(h,a,l,f,v,T){return function ic(h,a,l,f,v,T,O){let B;const X=et(h.visibleWrites,a),se=vo(X,kr());if(null!=se)B=se;else{if(null==l)return[];B=ps(X,l)}if(B=B.withIndex(O),B.isEmpty()||B.isLeafNode())return[];{const Fe=[],Ge=O.getCompare(),ut=T?B.getReverseIteratorFrom(f,O):B.getIteratorFrom(f,O);let Mt=ut.getNext();for(;Mt&&Fe.length<v;)0!==Ge(Mt,f)&&Fe.push(Mt),Mt=ut.getNext();return Fe}}(h.writeTree,h.treePath,a,l,f,v,T)}(this.writes_,v,l,1,f,a);return 0===T.length?null:T[0]}}function Eo(h,a,l,f,v,T){const O=a.eventCache;if(null!=$u(f,l))return a;{let B,X;if(Gn(l))if((0,Oe.Uc)(a.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),a.serverCache.isFiltered()){const se=Ir(a),Ge=Dl(f,se instanceof F?se:F.EMPTY_NODE);B=h.filter.updateFullNode(a.eventCache.getNode(),Ge,T)}else{const se=Uo(f,Ir(a));B=h.filter.updateFullNode(a.eventCache.getNode(),se,T)}else{const se=mn(l);if(".priority"===se){(0,Oe.Uc)(1===aa(l),"Can't have a priority with additional path components");const Fe=O.getNode();X=a.serverCache.getNode();const Ge=ju(f,l,Fe,X);B=null!=Ge?h.filter.updatePriority(Fe,Ge):O.getNode()}else{const Fe=fi(l);let Ge;if(O.isCompleteForChild(se)){X=a.serverCache.getNode();const ut=ju(f,l,O.getNode(),X);Ge=null!=ut?O.getNode().getImmediateChild(se).updateChild(Fe,ut):O.getNode().getImmediateChild(se)}else Ge=Sl(f,se,a.serverCache);B=null!=Ge?h.filter.updateChild(O.getNode(),se,Ge,Fe,v,T):O.getNode()}}return nc(a,B,O.isFullyInitialized()||Gn(l),h.filter.filtersNodes())}}function Gu(h,a,l,f,v,T,O,B){const X=a.serverCache;let se;const Fe=O?h.filter:h.filter.getIndexedFilter();if(Gn(l))se=Fe.updateFullNode(X.getNode(),f,null);else if(Fe.filtersNodes()&&!X.isFiltered()){const Mt=X.getNode().updateChild(l,f);se=Fe.updateFullNode(X.getNode(),Mt,null)}else{const Mt=mn(l);if(!X.isCompleteForPath(l)&&aa(l)>1)return a;const xt=fi(l),Dr=X.getNode().getImmediateChild(Mt).updateChild(xt,f);se=".priority"===Mt?Fe.updatePriority(X.getNode(),Dr):Fe.updateChild(X.getNode(),Mt,Dr,xt,Sf,null)}const Ge=ha(a,se,X.isFullyInitialized()||Gn(l),Fe.filtersNodes());return Eo(h,Ge,l,v,new Af(v,Ge,T),B)}function Wu(h,a,l,f,v,T,O){const B=a.eventCache;let X,se;const Fe=new Af(v,a,T);if(Gn(l))se=h.filter.updateFullNode(a.eventCache.getNode(),f,O),X=nc(a,se,!0,h.filter.filtersNodes());else{const Ge=mn(l);if(".priority"===Ge)se=h.filter.updatePriority(a.eventCache.getNode(),f),X=nc(a,se,B.isFullyInitialized(),B.isFiltered());else{const ut=fi(l),Mt=B.getNode().getImmediateChild(Ge);let xt;if(Gn(ut))xt=f;else{const on=Fe.getCompleteChild(Ge);xt=null!=on?".priority"===Xa(ut)&&on.getChild(Yo(ut)).isEmpty()?on:on.updateChild(ut,f):F.EMPTY_NODE}X=Mt.equals(xt)?a:nc(a,h.filter.updateChild(B.getNode(),Ge,xt,ut,Fe,O),B.isFullyInitialized(),h.filter.filtersNodes())}}return X}function zp(h,a){return h.eventCache.isCompleteForChild(a)}function Al(h,a,l){return l.foreach((f,v)=>{a=a.updateChild(f,v)}),a}function uu(h,a,l,f,v,T,O,B){if(a.serverCache.getNode().isEmpty()&&!a.serverCache.isFullyInitialized())return a;let se,X=a;se=Gn(l)?f:new li(null).setTree(l,f);const Fe=a.serverCache.getNode();return se.children.inorderTraversal((Ge,ut)=>{if(Fe.hasChild(Ge)){const xt=Al(0,a.serverCache.getNode().getImmediateChild(Ge),ut);X=Gu(h,X,new kn(Ge),xt,v,T,O,B)}}),se.children.inorderTraversal((Ge,ut)=>{const Mt=!a.serverCache.isCompleteForChild(Ge)&&null===ut.value;if(!Fe.hasChild(Ge)&&!Mt){const on=Al(0,a.serverCache.getNode().getImmediateChild(Ge),ut);X=Gu(h,X,new kn(Ge),on,v,T,O,B)}}),X}function $a(h,a){const l=Ir(h.viewCache_);return l&&(h.query._queryParams.loadsAllData()||!Gn(a)&&!l.getImmediateChild(mn(a)).isEmpty())?l.getChild(a):null}function wr(h,a,l,f){a.type===So.MERGE&&null!==a.source.queryId&&((0,Oe.Uc)(Ir(h.viewCache_),"We should always have a full cache before handling merges"),(0,Oe.Uc)(Xo(h.viewCache_),"Missing event cache, even though we have a server cache"));const v=h.viewCache_,T=function yh(h,a,l,f,v){const T=new Df;let O,B;if(l.type===So.OVERWRITE){const se=l;se.source.fromUser?O=Wu(h,a,se.path,se.snap,f,v,T):((0,Oe.Uc)(se.source.fromServer,"Unknown source."),B=se.source.tagged||a.serverCache.isFiltered()&&!Gn(se.path),O=Gu(h,a,se.path,se.snap,f,v,B,T))}else if(l.type===So.MERGE){const se=l;se.source.fromUser?O=function Qc(h,a,l,f,v,T,O){let B=a;return f.foreach((X,se)=>{const Fe=yr(l,X);zp(a,mn(Fe))&&(B=Wu(h,B,Fe,se,v,T,O))}),f.foreach((X,se)=>{const Fe=yr(l,X);zp(a,mn(Fe))||(B=Wu(h,B,Fe,se,v,T,O))}),B}(h,a,se.path,se.children,f,v,T):((0,Oe.Uc)(se.source.fromServer,"Unknown source."),B=se.source.tagged||a.serverCache.isFiltered(),O=uu(h,a,se.path,se.children,f,v,B,T))}else if(l.type===So.ACK_USER_WRITE){const se=l;O=se.revert?function bf(h,a,l,f,v,T){let O;if(null!=$u(f,l))return a;{const B=new Af(f,a,v),X=a.eventCache.getNode();let se;if(Gn(l)||".priority"===mn(l)){let Fe;if(a.serverCache.isFullyInitialized())Fe=Uo(f,Ir(a));else{const Ge=a.serverCache.getNode();(0,Oe.Uc)(Ge instanceof F,"serverChildren would be complete if leaf node"),Fe=Dl(f,Ge)}se=h.filter.updateFullNode(X,Fe,T)}else{const Fe=mn(l);let Ge=Sl(f,Fe,a.serverCache);null==Ge&&a.serverCache.isCompleteForChild(Fe)&&(Ge=X.getImmediateChild(Fe)),se=null!=Ge?h.filter.updateChild(X,Fe,Ge,fi(l),B,T):a.eventCache.getNode().hasChild(Fe)?h.filter.updateChild(X,Fe,F.EMPTY_NODE,fi(l),B,T):X,se.isEmpty()&&a.serverCache.isFullyInitialized()&&(O=Uo(f,Ir(a)),O.isLeafNode()&&(se=h.filter.updateFullNode(se,O,T)))}return O=a.serverCache.isFullyInitialized()||null!=$u(f,kr()),nc(a,se,O,h.filter.filtersNodes())}}(h,a,se.path,f,v,T):function Pl(h,a,l,f,v,T,O){if(null!=$u(v,l))return a;const B=a.serverCache.isFiltered(),X=a.serverCache;if(null!=f.value){if(Gn(l)&&X.isFullyInitialized()||X.isCompleteForPath(l))return Gu(h,a,l,X.getNode().getChild(l),v,T,B,O);if(Gn(l)){let se=new li(null);return X.getNode().forEachChild(Lo,(Fe,Ge)=>{se=se.set(new kn(Fe),Ge)}),uu(h,a,l,se,v,T,B,O)}return a}{let se=new li(null);return f.foreach((Fe,Ge)=>{const ut=yr(l,Fe);X.isCompleteForPath(ut)&&(se=se.set(Fe,X.getNode().getChild(ut)))}),uu(h,a,l,se,v,T,B,O)}}(h,a,se.path,se.affectedTree,f,v,T)}else{if(l.type!==So.LISTEN_COMPLETE)throw(0,Oe.Y9)("Unknown operation type: "+l.type);O=function eo(h,a,l,f,v){const T=a.serverCache;return Eo(h,ha(a,T.getNode(),T.isFullyInitialized()||Gn(l),T.isFiltered()),l,f,Sf,v)}(h,a,l.path,f,T)}const X=T.getChanges();return function Pf(h,a,l){const f=a.eventCache;if(f.isFullyInitialized()){const v=f.getNode().isLeafNode()||f.getNode().isEmpty(),T=Xo(h);(l.length>0||!h.eventCache.isFullyInitialized()||v&&!f.getNode().equals(T)||!f.getNode().getPriority().equals(T.getPriority()))&&l.push(function ci(h){return{type:"value",snapshotNode:h}}(Xo(a)))}}(a,O,X),{viewCache:O,changes:X}}(h.processor_,v,a,l,f);return function _d(h,a){(0,Oe.Uc)(a.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,Oe.Uc)(a.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,T.viewCache),(0,Oe.Uc)(T.viewCache.serverCache.isFullyInitialized()||!v.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=T.viewCache,function bl(h,a,l,f){return function qr(h,a,l,f){const v=[],T=[];return a.forEach(O=>{"child_changed"===O.type&&h.index_.indexedValueChanged(O.oldSnap,O.snapshotNode)&&T.push(function fs(h,a){return{type:"child_moved",snapshotNode:a,childName:h}}(O.childName,O.snapshotNode))}),tc(h,v,"child_removed",a,f,l),tc(h,v,"child_added",a,f,l),tc(h,v,"child_moved",T,f,l),tc(h,v,"child_changed",a,f,l),tc(h,v,"value",a,f,l),v}(h.eventGenerator_,a,l,f?[f]:h.eventRegistrations_)}(h,T.changes,T.viewCache.eventCache.getNode(),null)}let Jc,ea;function Sa(h,a,l,f){const v=a.source.queryId;if(null!==v){const T=h.views.get(v);return(0,Oe.Uc)(null!=T,"SyncTree gave us an op for an invalid query."),wr(T,a,l,f)}{let T=[];for(const O of h.views.values())T=T.concat(wr(O,a,l,f));return T}}function ws(h,a){let l=null;for(const f of h.views.values())l=l||$a(f,a);return l}class Eh{constructor(a){this.listenProvider_=a,this.syncPointTree_=new li(null),this.pendingWriteTree_=function Ao(){return{visibleWrites:Zo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function el(h,a,l,f,v){return function A(h,a,l,f,v){(0,Oe.Uc)(f>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===v&&(v=!0),h.allWrites.push({path:a,snap:l,writeId:f,visible:v}),v&&(h.visibleWrites=Rs(h.visibleWrites,a,l)),h.lastWriteId=f}(h.pendingWriteTree_,a,l,f,v),v?as(h,new da({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,l)):[]}function Aa(h,a,l=!1){const f=function G(h,a){for(let l=0;l<h.allWrites.length;l++){const f=h.allWrites[l];if(f.writeId===a)return f}return null}(h.pendingWriteTree_,a);if(function re(h,a){const l=h.allWrites.findIndex(B=>B.writeId===a);(0,Oe.Uc)(l>=0,"removeWrite called with nonexistent writeId.");const f=h.allWrites[l];h.allWrites.splice(l,1);let v=f.visible,T=!1,O=h.allWrites.length-1;for(;v&&O>=0;){const B=h.allWrites[O];B.visible&&(O>=l&&ve(B,f.path)?v=!1:ys(f.path,B.path)&&(T=!0)),O--}return!!v&&(T?(function dt(h){h.visibleWrites=$t(h.allWrites,rt,kr()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(f.snap?h.visibleWrites=Dc(h.visibleWrites,f.path):ti(f.children,X=>{h.visibleWrites=Dc(h.visibleWrites,yr(f.path,X))}),!0))}(h.pendingWriteTree_,a)){let T=new li(null);return null!=f.snap?T=T.set(kr(),!0):ti(f.children,O=>{T=T.set(new kn(O),!0)}),as(h,new bn(f.path,T,l))}return[]}function oc(h,a,l){return as(h,new da({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,l))}function pu(h,a,l){const v=h.pendingWriteTree_,T=h.syncPointTree_.findOnPath(a,(O,B)=>{const se=ws(B,ss(O,a));if(se)return se});return Ut(v,a,T,l,!0)}function as(h,a){return Rf(a,h.syncPointTree_,null,N(h.pendingWriteTree_,kr()))}function Rf(h,a,l,f){if(Gn(h.path))return Hi(h,a,l,f);{const v=a.get(kr());null==l&&null!=v&&(l=ws(v,kr()));let T=[];const O=mn(h.path),B=h.operationForChild(O),X=a.children.get(O);if(X&&B){const se=l?l.getImmediateChild(O):null,Fe=cr(f,O);T=T.concat(Rf(B,X,se,Fe))}return v&&(T=T.concat(Sa(v,h,f,l))),T}}function Hi(h,a,l,f){const v=a.get(kr());null==l&&null!=v&&(l=ws(v,kr()));let T=[];return a.children.inorderTraversal((O,B)=>{const X=l?l.getImmediateChild(O):null,se=cr(f,O),Fe=h.operationForChild(O);Fe&&(T=T.concat(Hi(Fe,B,X,se)))}),v&&(T=T.concat(Sa(v,h,f,l))),T}function Pc(h,a){return h.tagToQueryMap.get(a)}function wh(h){const a=h.indexOf("$");return(0,Oe.Uc)(-1!==a&&a<h.length-1,"Bad queryKey."),{queryId:h.substr(a+1),path:new kn(h.substr(0,a))}}function qu(h,a,l){const f=h.syncPointTree_.get(a);return(0,Oe.Uc)(f,"Missing sync point for query tag that we're tracking"),Sa(f,l,N(h.pendingWriteTree_,a),null)}class Ku{constructor(a){this.node_=a}getImmediateChild(a){const l=this.node_.getImmediateChild(a);return new Ku(l)}node(){return this.node_}}class bc{constructor(a,l){this.syncTree_=a,this.path_=l}getImmediateChild(a){const l=yr(this.path_,a);return new bc(this.syncTree_,l)}node(){return pu(this.syncTree_,this.path_)}}const Mc=function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h},Of=function(h,a,l){return h&&"object"==typeof h?((0,Oe.Uc)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?vd(h[".sv"],a,l):"object"==typeof h[".sv"]?Ed(h[".sv"],a):void(0,Oe.Uc)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},vd=function(h,a,l){if("timestamp"===h)return l.timestamp;(0,Oe.Uc)(!1,"Unexpected server value: "+h)},Ed=function(h,a,l){h.hasOwnProperty("increment")||(0,Oe.Uc)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const f=h.increment;"number"!=typeof f&&(0,Oe.Uc)(!1,"Unexpected increment value: "+f);const v=a.node();if((0,Oe.Uc)(null!==v&&typeof v<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!v.isLeafNode())return f;const O=v.getValue();return"number"!=typeof O?f:O+f},Th=function(h,a,l,f){return mu(a,new bc(l,h),f)},Rl=function(h,a,l){return mu(h,new Ku(a),l)};function mu(h,a,l){const f=h.getPriority().val(),v=Of(f,a.getImmediateChild(".priority"),l);let T;if(h.isLeafNode()){const O=h,B=Of(O.getValue(),a,l);return B!==O.getValue()||v!==O.getPriority().val()?new Hr(B,vt(v)):h}{const O=h;return T=O,v!==O.getPriority().val()&&(T=T.updatePriority(new Hr(v))),O.forEachChild(ai,(B,X)=>{const se=mu(X,a.getImmediateChild(B),l);se!==X&&(T=T.updateImmediateChild(B,se))}),T}}class Rc{constructor(a="",l=null,f={children:{},childCount:0}){this.name=a,this.parent=l,this.node=f}}function ac(h,a){let l=a instanceof kn?a:new kn(a),f=h,v=mn(l);for(;null!==v;){const T=(0,Oe.o5)(f.node.children,v)||{children:{},childCount:0};f=new Rc(v,f,T),l=fi(l),v=mn(l)}return f}function cc(h){return h.node.value}function _u(h,a){h.node.value=a,Dh(h)}function sl(h){return h.node.childCount>0}function za(h,a){ti(h.node.children,(l,f)=>{a(new Rc(l,h,f))})}function Nl(h,a,l,f){l&&!f&&a(h),za(h,v=>{Nl(v,a,!0,f)}),l&&f&&a(h)}function qa(h){return new kn(null===h.parent?h.name:qa(h.parent)+"/"+h.name)}function Dh(h){null!==h.parent&&function Id(h,a,l){const f=function Ol(h){return void 0===cc(h)&&!sl(h)}(l),v=(0,Oe.Y7)(h.node.children,a);f&&v?(delete h.node.children[a],h.node.childCount--,Dh(h)):!f&&!v&&(h.node.children[a]=l.node,h.node.childCount++,Dh(h))}(h.parent,h.name,h)}const lc=/[\[\].#$\/\u0000-\u001F\u007F]/,Cd=/[\[\].#$\u0000-\u001F\u007F]/,Oc=10485760,yu=function(h){return"string"==typeof h&&0!==h.length&&!lc.test(h)},K=function(h,a,l){const f=l instanceof kn?new ko(l,h):l;if(void 0===a)throw new Error(h+"contains undefined "+Fo(f));if("function"==typeof a)throw new Error(h+"contains a function "+Fo(f)+" with contents = "+a.toString());if(Oi(a))throw new Error(h+"contains "+a.toString()+" "+Fo(f));if("string"==typeof a&&a.length>Oc/3&&(0,Oe.Uj)(a)>Oc)throw new Error(h+"contains a string greater than "+Oc+" utf8 bytes "+Fo(f)+" ('"+a.substring(0,50)+"...')");if(a&&"object"==typeof a){let v=!1,T=!1;if(ti(a,(O,B)=>{if(".value"===O)v=!0;else if(".priority"!==O&&".sv"!==O&&(T=!0,!yu(O)))throw new Error(h+" contains an invalid key ("+O+") "+Fo(f)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function zc(h,a){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(a),h.byteLength_+=(0,Oe.Uj)(a),uo(h)})(f,O),K(h,B,f),function vs(h){const a=h.parts_.pop();h.byteLength_-=(0,Oe.Uj)(a),h.parts_.length>0&&(h.byteLength_-=1)}(f)}),v&&T)throw new Error(h+' contains ".value" child '+Fo(f)+" in addition to actual children.")}},Po=function(h,a){const l=a.path.toString();if("string"!=typeof a.repoInfo.host||0===a.repoInfo.host.length||!yu(a.repoInfo.namespace)&&"localhost"!==a.repoInfo.host.split(":")[0]||0!==l.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),function(h){return"string"==typeof h&&0!==h.length&&!Cd.test(h)}(h)}(l))throw new Error((0,Oe.iQ)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ts{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Mo(h,a,l){(function xl(h,a){let l=null;for(let f=0;f<a.length;f++){const v=a[f],T=v.getPath();null!==l&&!Ws(T,l.path)&&(h.eventLists_.push(l),l=null),null===l&&(l={events:[],path:T}),l.events.push(v)}l&&h.eventLists_.push(l)})(h,l),function Nc(h,a){h.recursionDepth_++;let l=!0;for(let f=0;f<h.eventLists_.length;f++){const v=h.eventLists_[f];v&&(a(v.path)?(Sh(h.eventLists_[f]),h.eventLists_[f]=null):l=!1)}l&&(h.eventLists_=[]),h.recursionDepth_--}(h,f=>ys(f,a)||ys(a,f))}function Sh(h){for(let a=0;a<h.events.length;a++){const l=h.events[a];if(null!==l){h.events[a]=null;const f=l.getEventRunner();kt&&cn("event: "+l.toString()),Yr(f)}}}const ol=25;class vu{constructor(a,l,f,v){this.repoInfo_=a,this.forceRestClient_=l,this.authTokenProvider_=f,this.appCheckProvider_=v,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ts,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ht(),this.transactionQueueTree_=new Rc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ds(h){const l=h.infoData_.getNode(new kn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function or(h){return Mc({timestamp:Ds(h)})}function wd(h,a,l,f,v){h.dataUpdateCount++;const T=new kn(a);l=h.interceptServerDataCallback_?h.interceptServerDataCallback_(a,l):l;let O=[];if(v)if(f){const X=(0,Oe.kH)(l,se=>vt(se));O=function qp(h,a,l,f){const v=Pc(h,f);if(v){const T=wh(v),O=T.path,B=T.queryId,X=ss(O,a),se=li.fromObject(l);return qu(h,O,new wi(Tc(B),X,se))}return[]}(h.serverSyncTree_,T,X,v)}else{const X=vt(l);O=function Ch(h,a,l,f){const v=Pc(h,f);if(null!=v){const T=wh(v),O=T.path,B=T.queryId,X=ss(O,a);return qu(h,O,new da(Tc(B),X,l))}return[]}(h.serverSyncTree_,T,X,v)}else if(f){const X=(0,Oe.kH)(l,se=>vt(se));O=function Mf(h,a,l){const f=li.fromObject(l);return as(h,new wi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,f))}(h.serverSyncTree_,T,X)}else{const X=vt(l);O=oc(h.serverSyncTree_,T,X)}let B=T;O.length>0&&(B=cl(h,T)),Mo(h.eventQueue_,B,O)}function al(h,a){Nf(h,"connected",a),!1===a&&function kf(h){xc(h,"onDisconnectEvents");const a=or(h),l=ht();Is(h.onDisconnect_,kr(),(v,T)=>{const O=Th(v,T,h.serverSyncTree_,a);bt(l,v,O)});let f=[];Is(l,kr(),(v,T)=>{f=f.concat(oc(h.serverSyncTree_,v,T));const O=function kc(h,a){const l=qa(Ll(h,a)),f=ac(h.transactionQueueTree_,a);return function Yu(h,a,l){let f=l?h:h.parent;for(;null!==f;){if(a(f))return!0;f=f.parent}}(f,v=>{Vl(h,v)}),Vl(h,f),Nl(f,v=>{Vl(h,v)}),l}(h,v);cl(h,O)}),h.onDisconnect_=ht(),Mo(h.eventQueue_,kr(),f)}(h)}function Nf(h,a,l){const f=new kn("/.info/"+a),v=vt(l);h.infoData_.updateSnapshot(f,v);const T=oc(h.infoSyncTree_,f,v);Mo(h.eventQueue_,f,T)}function Ph(h){return h.nextWriteId_++}function xc(h,...a){let l="";h.persistentConnection_&&(l=h.persistentConnection_.id+":"),cn(l,...a)}function ts(h,a,l){return pu(h.serverSyncTree_,a,l)||F.EMPTY_NODE}function ta(h,a=h.transactionQueueTree_){if(a||ll(h,a),cc(a)){const l=Vf(h,a);(0,Oe.Uc)(l.length>0,"Sending zero length transaction queue"),l.every(v=>0===v.status)&&function Ff(h,a,l){const f=l.map(se=>se.currentWriteId),v=ts(h,a,f);let T=v;const O=v.hash();for(let se=0;se<l.length;se++){const Fe=l[se];(0,Oe.Uc)(0===Fe.status,"tryToSendTransactionQueue_: items in queue should all be run."),Fe.status=1,Fe.retryCount++;const Ge=ss(a,Fe.path);T=T.updateChild(Ge,Fe.currentOutputSnapshotRaw)}const B=T.val(!0),X=a;h.server_.put(X.toString(),B,se=>{xc(h,"transaction put response",{path:X.toString(),status:se});let Fe=[];if("ok"===se){const Ge=[];for(let ut=0;ut<l.length;ut++)l[ut].status=2,Fe=Fe.concat(Aa(h.serverSyncTree_,l[ut].currentWriteId)),l[ut].onComplete&&Ge.push(()=>l[ut].onComplete(null,!0,l[ut].currentOutputSnapshotResolved)),l[ut].unwatcher();ll(h,ac(h.transactionQueueTree_,a)),ta(h,h.transactionQueueTree_),Mo(h.eventQueue_,a,Fe);for(let ut=0;ut<Ge.length;ut++)Yr(Ge[ut])}else{if("datastale"===se)for(let Ge=0;Ge<l.length;Ge++)l[Ge].status=3===l[Ge].status?4:0;else{$n("transaction at "+X.toString()+" failed: "+se);for(let Ge=0;Ge<l.length;Ge++)l[Ge].status=4,l[Ge].abortReason=se}cl(h,a)}},O)}(h,qa(a),l)}else sl(a)&&za(a,l=>{ta(h,l)})}function cl(h,a){const l=Ll(h,a),f=qa(l);return function Lf(h,a,l){if(0===a.length)return;const f=[];let v=[];const O=a.filter(B=>0===B.status).map(B=>B.currentWriteId);for(let B=0;B<a.length;B++){const X=a[B],se=ss(l,X.path);let Ge,Fe=!1;if((0,Oe.Uc)(null!==se,"rerunTransactionsUnderNode_: relativePath should not be null."),4===X.status)Fe=!0,Ge=X.abortReason,v=v.concat(Aa(h.serverSyncTree_,X.currentWriteId,!0));else if(0===X.status)if(X.retryCount>=ol)Fe=!0,Ge="maxretry",v=v.concat(Aa(h.serverSyncTree_,X.currentWriteId,!0));else{const ut=ts(h,X.path,O);X.currentInputSnapshot=ut;const Mt=a[B].update(ut.val());if(void 0!==Mt){K("transaction failed: Data returned ",Mt,X.path);let xt=vt(Mt);"object"==typeof Mt&&null!=Mt&&(0,Oe.Y7)(Mt,".priority")||(xt=xt.updatePriority(ut.getPriority()));const Dr=X.currentWriteId,ns=or(h),ms=Rl(xt,ut,ns);X.currentOutputSnapshotRaw=xt,X.currentOutputSnapshotResolved=ms,X.currentWriteId=Ph(h),O.splice(O.indexOf(Dr),1),v=v.concat(el(h.serverSyncTree_,X.path,ms,X.currentWriteId,X.applyLocally)),v=v.concat(Aa(h.serverSyncTree_,Dr,!0))}else Fe=!0,Ge="nodata",v=v.concat(Aa(h.serverSyncTree_,X.currentWriteId,!0))}Mo(h.eventQueue_,l,v),v=[],Fe&&(a[B].status=2,setTimeout(a[B].unwatcher,Math.floor(0)),a[B].onComplete&&f.push("nodata"===Ge?()=>a[B].onComplete(null,!1,a[B].currentInputSnapshot):()=>a[B].onComplete(new Error(Ge),!1,null)))}ll(h,h.transactionQueueTree_);for(let B=0;B<f.length;B++)Yr(f[B]);ta(h,h.transactionQueueTree_)}(h,Vf(h,l),f),f}function Ll(h,a){let l,f=h.transactionQueueTree_;for(l=mn(a);null!==l&&void 0===cc(f);)f=ac(f,l),l=mn(a=fi(a));return f}function Vf(h,a){const l=[];return Uf(h,a,l),l.sort((f,v)=>f.order-v.order),l}function Uf(h,a,l){const f=cc(a);if(f)for(let v=0;v<f.length;v++)l.push(f[v]);za(a,v=>{Uf(h,v,l)})}function ll(h,a){const l=cc(a);if(l){let f=0;for(let v=0;v<l.length;v++)2!==l[v].status&&(l[f]=l[v],f++);l.length=f,_u(a,l.length>0?l:void 0)}za(a,f=>{ll(h,f)})}function Vl(h,a){const l=cc(a);if(l){const f=[];let v=[],T=-1;for(let O=0;O<l.length;O++)3===l[O].status||(1===l[O].status?((0,Oe.Uc)(T===O-1,"All SENT items should be at beginning of queue."),T=O,l[O].status=3,l[O].abortReason="set"):((0,Oe.Uc)(0===l[O].status,"Unexpected transaction status in abort"),l[O].unwatcher(),v=v.concat(Aa(h.serverSyncTree_,l[O].currentWriteId,!0)),l[O].onComplete&&f.push(l[O].onComplete.bind(null,new Error("set"),!1,null))));-1===T?_u(a,void 0):l.length=T+1,Mo(h.eventQueue_,qa(a),v);for(let O=0;O<f.length;O++)Yr(f[O])}}const ul=function(h,a){const l=eg(h),f=l.namespace;return"firebase.com"===l.domain&&ur(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!f||"undefined"===f)&&"localhost"!==l.domain&&ur("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$n("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new $i(l.host,l.secure,f,"ws"===l.scheme||"wss"===l.scheme,a,"",f!==l.subdomain),path:new kn(l.pathString)}},eg=function(h){let a="",l="",f="",v="",T="",O=!0,B="https",X=443;if("string"==typeof h){let se=h.indexOf("//");se>=0&&(B=h.substring(0,se-1),h=h.substring(se+2));let Fe=h.indexOf("/");-1===Fe&&(Fe=h.length);let Ge=h.indexOf("?");-1===Ge&&(Ge=h.length),a=h.substring(0,Math.min(Fe,Ge)),Fe<Ge&&(v=function Td(h){let a="";const l=h.split("/");for(let f=0;f<l.length;f++)if(l[f].length>0){let v=l[f];try{v=decodeURIComponent(v.replace(/\+/g," "))}catch{}a+="/"+v}return a}(h.substring(Fe,Ge)));const ut=function Em(h){const a={};"?"===h.charAt(0)&&(h=h.substring(1));for(const l of h.split("&")){if(0===l.length)continue;const f=l.split("=");2===f.length?a[decodeURIComponent(f[0])]=decodeURIComponent(f[1]):$n(`Invalid query segment '${l}' in query '${h}'`)}return a}(h.substring(Math.min(h.length,Ge)));se=a.indexOf(":"),se>=0?(O="https"===B||"wss"===B,X=parseInt(a.substring(se+1),10)):se=a.length;const Mt=a.slice(0,se);if("localhost"===Mt.toLowerCase())l="localhost";else if(Mt.split(".").length<=2)l=Mt;else{const xt=a.indexOf(".");f=a.substring(0,xt).toLowerCase(),l=a.substring(xt+1),T=f}"ns"in ut&&(T=ut.ns)}return{host:a,port:X,domain:l,subdomain:f,secure:O,scheme:B,pathString:v,namespace:T}};class gr{constructor(a,l,f,v){this._repo=a,this._path=l,this._queryParams=f,this._orderByCalled=v}get key(){return Gn(this._path)?null:Xa(this._path)}get ref(){return new Lc(this._repo,this._path)}get _queryIdentifier(){const a=fn(this._queryParams),l=Ni(a);return"{}"===l?"default":l}get _queryObject(){return fn(this._queryParams)}isEqual(a){if(!((a=(0,Oe.Yj)(a))instanceof gr))return!1;const l=this._repo===a._repo,f=Ws(this._path,a._path);return l&&f&&this._queryIdentifier===a._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Wr(h){let a="";for(let l=h.pieceNum_;l<h.pieces_.length;l++)""!==h.pieces_[l]&&(a+="/"+encodeURIComponent(String(h.pieces_[l])));return a||"/"}(this._path)}}class Lc extends gr{constructor(a,l){super(a,l,new tr,!1)}get parent(){const a=Yo(this._path);return null===a?null:new Lc(this._repo,a)}get root(){let a=this;for(;null!==a.parent;)a=a.parent;return a}}(function vh(h){(0,Oe.Uc)(!Jc,"__referenceConstructor has already been defined"),Jc=h})(Lc),function sc(h){(0,Oe.Uc)(!ea,"__referenceConstructor has already been defined"),ea=h}(Lc);const ba={};class dg{constructor(a,l){this._repoInternal=a,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Ah(h,a,l){if(h.stats_=_i(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new cu(h.repoInfo_,(f,v,T,O)=>{wd(h,f,v,T,O)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>al(h,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Oe.i)(l)}catch(f){throw new Error("Invalid authOverride provided: "+f)}}h.persistentConnection_=new fo(h.repoInfo_,a,(f,v,T,O)=>{wd(h,f,v,T,O)},f=>{al(h,f)},f=>{!function vm(h,a){ti(a,(l,f)=>{Nf(h,l,f)})}(h,f)},h.authTokenProvider_,h.appCheckProvider_,l),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(f=>{h.server_.refreshAuthToken(f)}),h.appCheckProvider_.addTokenChangeListener(f=>{h.server_.refreshAppCheckToken(f.token)}),h.statsReporter_=function Ls(h,a){const l=h.toString();return oo[l]||(oo[l]=a()),oo[l]}(h.repoInfo_,()=>new wf(h.stats_,h.server_)),h.infoData_=new Ht,h.infoSyncTree_=new Eh({startListening:(f,v,T,O)=>{let B=[];const X=h.infoData_.getNode(f._path);return X.isEmpty()||(B=oc(h.infoSyncTree_,f._path,X),setTimeout(()=>{O("ok")},0)),B},stopListening:()=>{}}),Nf(h,"connected",!1),h.serverSyncTree_=new Eh({startListening:(f,v,T,O)=>(h.server_.listen(f,T,v,(B,X)=>{const se=O(B,X);Mo(h.eventQueue_,f._path,se)}),[]),stopListening:(f,v)=>{h.server_.unlisten(f,v)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Lc(this._repo,kr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Du(h,a){const l=ba[a];(!l||l[h.key]!==h)&&ur(`Database ${a}(${h.repoInfo_}) has already been deleted.`),function Jp(h){h.persistentConnection_&&h.persistentConnection_.interrupt("repo_interrupt")}(h),delete l[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(a){null===this._rootInternal&&ur("Cannot call "+a+" on a deleted database.")}}function dc(h=(0,pn.getApp)(),a){const l=(0,pn._getProvider)(h,"database").getImmediate({identifier:a});if(!l._instanceStarted){const f=(0,Oe.on)("database");f&&function Xu(h,a,l,f={}){(h=(0,Oe.Yj)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&ur("Cannot call useEmulator() after instance has already been initialized.");const v=h._repoInternal;let T;if(v.repoInfo_.nodeAdmin)f.mockUserToken&&ur('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),T=new Js(Js.OWNER);else if(f.mockUserToken){const O="string"==typeof f.mockUserToken?f.mockUserToken:(0,Oe.YD)(f.mockUserToken,h.app.options.projectId);T=new Js(O)}!function Rh(h,a,l,f){h.repoInfo_=new $i(`${a}:${l}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams,!0),f&&(h.authTokenProvider_=f)}(v,a,l,T)}(l,...f)}return l}fo.prototype.simpleListen=function(h,a){this.sendRequest("q",{p:h},a)},fo.prototype.echo=function(h,a){this.sendRequest("echo",{d:h},a)},function xh(h){(function Wn(h){en=h})(pn.SDK_VERSION),(0,pn._registerComponent)(new jn.Yl("database",(a,{instanceIdentifier:l})=>function Oh(h,a,l,f,v){let T=f||h.options.databaseURL;void 0===T&&(h.options.projectId||ur("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cn("Using default host for project ",h.options.projectId),T=`${h.options.projectId}-default-rtdb.firebaseio.com`);let X,se,O=ul(T,v),B=O.repoInfo;typeof process<"u"&&process.env&&(se=process.env.FIREBASE_DATABASE_EMULATOR_HOST),se?(X=!0,T=`http://${se}?ns=${B.namespace}`,O=ul(T,v),B=O.repoInfo):X=!O.repoInfo.secure;const Fe=v&&X?new Js(Js.OWNER):new wa(h.name,h.options,a);Po("Invalid Firebase Database URL",O),Gn(O.path)||ur("Database URL must point to the root of a Firebase Database (not including a child path).");const Ge=function ug(h,a,l,f){let v=ba[a.name];v||(v={},ba[a.name]=v);let T=v[h.toURLString()];return T&&ur("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),T=new vu(h,!1,l,f),v[h.toURLString()]=T,T}(B,h,Fe,new Ca(h.name,l));return new dg(Ge,h)}(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,pn.registerVersion)(nt,"1.0.3",h),(0,pn.registerVersion)(nt,"1.0.3","esm2017")}();class jl{constructor(a){return a}}const $l="database",Om=new k.UbH("angularfire2.database-instances");function Qf(h){return(a,l)=>{const f=a.runOutsideAngular(()=>h(l));return new jl(f)}}const Nd={provide:class Od{constructor(){return(0,Ee.S_)($l)}},deps:[[new k.T7N,Om]]},Zu={provide:jl,useFactory:function Ov(h,a){const l=(0,Ee.UN)($l,h,a);return l&&new jl(l)},deps:[[new k.T7N,Om],Pe]};let gg=(()=>{class h{constructor(){(0,Le.Kk)("angularfire",Ee.j1.full,"rtdb")}static \u0275fac=function(f){return new(f||h)};static \u0275mod=k.a4G({type:h});static \u0275inj=k.s3X({providers:[Zu,Nd]})}return h})();function Nm(h,...a){return{ngModule:gg,providers:[{provide:Om,useFactory:Qf(h),multi:!0,deps:[k.WW2,k.zZn,Ee.u,ge,[new k.T7N,ze],[new k.T7N,Ee.gJ],...a]}]}}const Vm=(0,Ee.qo)(dc,!0),np={apiKey:"AIzaSyCbQiRFo1MKF_WTEIwSMYg4rFL0CkKdTDI",authDomain:"exercise-app-9b873.firebaseapp.com",databaseURL:"https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app",projectId:"exercise-app-9b873",storageBucket:"exercise-app-9b873.appspot.com",messagingSenderId:"146569895533",appId:"1:146569895533:web:cfb4bca172cc29ee50a964",measurementId:"G-MW950TMVK5"};var Ey=V(6e3),Bm=V(3960),Iy=V(3280),jm=V(2448),vg=V(9456),Ro=V(1680),ma=V(1368),Vn=V(9684);function rp(h){return new k.OBp(3e3,!1)}function ql(h){switch(h.length){case 0:return new Vn.kP;case 1:return h[0];default:return new Vn.Wq(h)}}function $h(h,a,l=new Map,f=new Map){const v=[],T=[];let O=-1,B=null;if(a.forEach(X=>{const se=X.get("offset"),Fe=se==O,Ge=Fe&&B||new Map;X.forEach((ut,Mt)=>{let xt=Mt,on=ut;if("offset"!==Mt)switch(xt=h.normalizePropertyName(xt,v),on){case Vn.aM:on=l.get(Mt);break;case Vn.AN:on=f.get(Mt);break;default:on=h.normalizeStyleValue(Mt,xt,on,v)}Ge.set(xt,on)}),Fe||T.push(Ge),B=Ge,O=se}),v.length)throw function Bd(h){return new k.OBp(3502,!1)}();return T}function Wd(h,a,l,f){switch(a){case"start":h.onStart(()=>f(l&&Gh(l,"start",h)));break;case"done":h.onDone(()=>f(l&&Gh(l,"done",h)));break;case"destroy":h.onDestroy(()=>f(l&&Gh(l,"destroy",h)))}}function Gh(h,a,l){const T=Hd(h.element,h.triggerName,h.fromState,h.toState,a||h.phaseName,l.totalTime??h.totalTime,!!l.disabled),O=h._data;return null!=O&&(T._data=O),T}function Hd(h,a,l,f,v="",T=0,O){return{element:h,triggerName:a,fromState:l,toState:f,phaseName:v,totalTime:T,disabled:!!O}}function ra(h,a,l){let f=h.get(a);return f||h.set(a,f=l),f}function Ag(h){const a=h.indexOf(":");return[h.substring(1,a),h.slice(a+1)]}const Wh=typeof document>"u"?null:document.documentElement;function Hh(h){const a=h.parentNode||h.host||null;return a===Wh?null:a}let fl=null,Kl=!1;function zh(h,a){for(;a;){if(a===h)return!0;a=Hh(a)}return!1}function Pg(h,a,l){if(l)return Array.from(h.querySelectorAll(a));const f=h.querySelector(a);return f?[f]:[]}let Su=(()=>{class h{validateStyleProperty(l){return function ap(h){fl||(fl=function No(){return typeof document<"u"?document.body:null}()||{},Kl=!!fl.style&&"WebkitAppearance"in fl.style);let a=!0;return fl.style&&!function op(h){return"ebkit"==h.substring(1,6)}(h)&&(a=h in fl.style,!a&&Kl&&(a="Webkit"+h.charAt(0).toUpperCase()+h.slice(1)in fl.style)),a}(l)}matchesElement(l,f){return!1}containsElement(l,f){return zh(l,f)}getParentElement(l){return Hh(l)}query(l,f,v){return Pg(l,f,v)}computeStyle(l,f,v){return v||""}animate(l,f,v,T,O,B=[],X){return new Vn.kP(v,T)}static#e=this.\u0275fac=function(f){return new(f||h)};static#t=this.\u0275prov=k.wxM({token:h,factory:h.\u0275fac})}return h})();class qh{static#e=this.NOOP=new Su}class cp{}const Hm=1e3,rd="ng-enter",up="ng-leave",dp="ng-trigger",pl=".ng-trigger",Kh="ng-animating",Ra=".ng-animating";function hc(h){if("number"==typeof h)return h;const a=h.match(/^(-?[\.\d]+)(m?s)/);return!a||a.length<2?0:id(parseFloat(a[1]),a[2])}function id(h,a){return"s"===a?h*Hm:h}function Au(h,a,l){return h.hasOwnProperty("duration")?h:function zm(h,a,l){let v,T=0,O="";if("string"==typeof h){const B=h.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===B)return a.push(rp()),{duration:0,delay:0,easing:""};v=id(parseFloat(B[1]),B[2]);const X=B[3];null!=X&&(T=id(parseFloat(X),B[4]));const se=B[5];se&&(O=se)}else v=h;if(!l){let B=!1,X=a.length;v<0&&(a.push(function Oo(){return new k.OBp(3100,!1)}()),B=!0),T<0&&(a.push(function Fh(){return new k.OBp(3101,!1)}()),B=!0),B&&a.splice(X,0,rp())}return{duration:v,delay:T,easing:O}}(h,a,l)}function Ka(h,a,l){a.forEach((f,v)=>{const T=od(v);l&&!l.has(v)&&l.set(v,h.style[T]),h.style[T]=f})}function _a(h,a){a.forEach((l,f)=>{const v=od(f);h.style[v]=""})}function sd(h){return Array.isArray(h)?1==h.length?h[0]:(0,Vn.iC)(h):h}const qd=new RegExp("{{\\s*(.+?)\\s*}}","g");function Qh(h){let a=[];if("string"==typeof h){let l;for(;l=qd.exec(h);)a.push(l[1]);qd.lastIndex=0}return a}function Vc(h,a,l){const f=`${h}`,v=f.replace(qd,(T,O)=>{let B=a[O];return null==B&&(l.push(function Vh(h){return new k.OBp(3003,!1)}()),B=""),B.toString()});return v==f?h:v}const qm=/-+([a-z0-9])/g;function od(h){return h.replace(qm,(...a)=>a[1].toUpperCase())}function Ks(h,a,l){switch(a.type){case Vn.m0.Trigger:return h.visitTrigger(a,l);case Vn.m0.State:return h.visitState(a,l);case Vn.m0.Transition:return h.visitTransition(a,l);case Vn.m0.Sequence:return h.visitSequence(a,l);case Vn.m0.Group:return h.visitGroup(a,l);case Vn.m0.Animate:return h.visitAnimate(a,l);case Vn.m0.Keyframes:return h.visitKeyframes(a,l);case Vn.m0.Style:return h.visitStyle(a,l);case Vn.m0.Reference:return h.visitReference(a,l);case Vn.m0.AnimateChild:return h.visitAnimateChild(a,l);case Vn.m0.AnimateRef:return h.visitAnimateRef(a,l);case Vn.m0.Query:return h.visitQuery(a,l);case Vn.m0.Stagger:return h.visitStagger(a,l);default:throw function wy(h){return new k.OBp(3004,!1)}()}}function Jh(h,a){return window.getComputedStyle(h)[a]}const Km=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ym extends cp{normalizePropertyName(a,l){return od(a)}normalizeStyleValue(a,l,f,v){let T="";const O=f.toString().trim();if(Km.has(l)&&0!==f&&"0"!==f)if("number"==typeof f)T="px";else{const B=f.match(/^[+-]?[\d\.]+([a-z]*)$/);B&&0==B[1].length&&v.push(function Eg(h,a){return new k.OBp(3005,!1)}())}return O+T}}const Xh="*";const Zh=new Set(["true","1"]),Yl=new Set(["false","0"]);function Ql(h,a){const l=Zh.has(h)||Yl.has(h),f=Zh.has(a)||Yl.has(a);return(v,T)=>{let O=h==Xh||h==v,B=a==Xh||a==T;return!O&&l&&"boolean"==typeof v&&(O=v?Zh.has(h):Yl.has(h)),!B&&f&&"boolean"==typeof T&&(B=T?Zh.has(a):Yl.has(a)),O&&B}}const gl=new RegExp("s*:selfs*,?","g");function Uc(h,a,l,f){return new bu(h).build(a,l,f)}class bu{constructor(a){this._driver=a}build(a,l,f){const v=new Ru(l);return this._resetContextStyleTimingState(v),Ks(this,sd(a),v)}_resetContextStyleTimingState(a){a.currentQuerySelector="",a.collectedStyles=new Map,a.collectedStyles.set("",new Map),a.currentTime=0}visitTrigger(a,l){let f=l.queryCount=0,v=l.depCount=0;const T=[],O=[];return"@"==a.name.charAt(0)&&l.errors.push(function Ig(){return new k.OBp(3006,!1)}()),a.definitions.forEach(B=>{if(this._resetContextStyleTimingState(l),B.type==Vn.m0.State){const X=B,se=X.name;se.toString().split(/\s*,\s*/).forEach(Fe=>{X.name=Fe,T.push(this.visitState(X,l))}),X.name=se}else if(B.type==Vn.m0.Transition){const X=this.visitTransition(B,l);f+=X.queryCount,v+=X.depCount,O.push(X)}else l.errors.push(function ip(){return new k.OBp(3007,!1)}())}),{type:Vn.m0.Trigger,name:a.name,states:T,transitions:O,queryCount:f,depCount:v,options:null}}visitState(a,l){const f=this.visitStyle(a.styles,l),v=a.options&&a.options.params||null;if(f.containsDynamicStyles){const T=new Set,O=v||{};f.styles.forEach(B=>{B instanceof Map&&B.forEach(X=>{Qh(X).forEach(se=>{O.hasOwnProperty(se)||T.add(se)})})}),T.size&&l.errors.push(function Uh(h,a){return new k.OBp(3008,!1)}(0,T.values()))}return{type:Vn.m0.State,name:a.name,style:f,options:v?{params:v}:null}}visitTransition(a,l){l.queryCount=0,l.depCount=0;const f=Ks(this,sd(a.animation),l),v=function Pu(h,a){const l=[];return"string"==typeof h?h.split(/\s*,\s*/).forEach(f=>function Qm(h,a,l){if(":"==h[0]){const X=function gp(h,a){switch(h){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(l,f)=>parseFloat(f)>parseFloat(l);case":decrement":return(l,f)=>parseFloat(f)<parseFloat(l);default:return a.push(function Ay(h){return new k.OBp(3016,!1)}()),"* => *"}}(h,l);if("function"==typeof X)return void a.push(X);h=X}const f=h.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==f||f.length<4)return l.push(function Vv(h){return new k.OBp(3015,!1)}()),a;const v=f[1],T=f[2],O=f[3];a.push(Ql(v,O)),"<"==T[0]&&(v!=Xh||O!=Xh)&&a.push(Ql(O,v))}(f,l,a)):l.push(h),l}(a.expr,l.errors);return{type:Vn.m0.Transition,matchers:v,animation:f,queryCount:l.queryCount,depCount:l.depCount,options:Jl(a.options)}}visitSequence(a,l){return{type:Vn.m0.Sequence,steps:a.steps.map(f=>Ks(this,f,l)),options:Jl(a.options)}}visitGroup(a,l){const f=l.currentTime;let v=0;const T=a.steps.map(O=>{l.currentTime=f;const B=Ks(this,O,l);return v=Math.max(v,l.currentTime),B});return l.currentTime=v,{type:Vn.m0.Group,steps:T,options:Jl(a.options)}}visitAnimate(a,l){const f=function Fy(h,a){if(h.hasOwnProperty("duration"))return h;if("number"==typeof h)return Jd(Au(h,a).duration,0,"");const l=h;if(l.split(/\s+/).some(T=>"{"==T.charAt(0)&&"{"==T.charAt(1))){const T=Jd(0,0,"");return T.dynamic=!0,T.strValue=l,T}const v=Au(l,a);return Jd(v.duration,v.delay,v.easing)}(a.timings,l.errors);l.currentAnimateTimings=f;let v,T=a.styles?a.styles:(0,Vn.wb)({});if(T.type==Vn.m0.Keyframes)v=this.visitKeyframes(T,l);else{let O=a.styles,B=!1;if(!O){B=!0;const se={};f.easing&&(se.easing=f.easing),O=(0,Vn.wb)(se)}l.currentTime+=f.duration+f.delay;const X=this.visitStyle(O,l);X.isEmptyStep=B,v=X}return l.currentAnimateTimings=null,{type:Vn.m0.Animate,timings:f,style:v,options:null}}visitStyle(a,l){const f=this._makeStyleAst(a,l);return this._validateStyleAst(f,l),f}_makeStyleAst(a,l){const f=[],v=Array.isArray(a.styles)?a.styles:[a.styles];for(let B of v)"string"==typeof B?B===Vn.AN?f.push(B):l.errors.push(new k.OBp(3002,!1)):f.push(new Map(Object.entries(B)));let T=!1,O=null;return f.forEach(B=>{if(B instanceof Map&&(B.has("easing")&&(O=B.get("easing"),B.delete("easing")),!T))for(let X of B.values())if(X.toString().indexOf("{{")>=0){T=!0;break}}),{type:Vn.m0.Style,styles:f,easing:O,offset:a.offset,containsDynamicStyles:T,options:null}}_validateStyleAst(a,l){const f=l.currentAnimateTimings;let v=l.currentTime,T=l.currentTime;f&&T>0&&(T-=f.duration+f.delay),a.styles.forEach(O=>{"string"!=typeof O&&O.forEach((B,X)=>{const se=l.collectedStyles.get(l.currentQuerySelector),Fe=se.get(X);let Ge=!0;Fe&&(T!=v&&T>=Fe.startTime&&v<=Fe.endTime&&(l.errors.push(function Cg(h,a,l,f,v){return new k.OBp(3010,!1)}()),Ge=!1),T=Fe.startTime),Ge&&se.set(X,{startTime:T,endTime:v}),l.options&&function Mg(h,a,l){const f=a.params||{},v=Qh(h);v.length&&v.forEach(T=>{f.hasOwnProperty(T)||l.push(function Lh(h){return new k.OBp(3001,!1)}())})}(B,l.options,l.errors)})})}visitKeyframes(a,l){const f={type:Vn.m0.Keyframes,styles:[],options:null};if(!l.currentAnimateTimings)return l.errors.push(function Ty(){return new k.OBp(3011,!1)}()),f;let T=0;const O=[];let B=!1,X=!1,se=0;const Fe=a.steps.map(ns=>{const ms=this._makeStyleAst(ns,l);let Ss=null!=ms.offset?ms.offset:function ky(h){if("string"==typeof h)return null;let a=null;if(Array.isArray(h))h.forEach(l=>{if(l instanceof Map&&l.has("offset")){const f=l;a=parseFloat(f.get("offset")),f.delete("offset")}});else if(h instanceof Map&&h.has("offset")){const l=h;a=parseFloat(l.get("offset")),l.delete("offset")}return a}(ms.styles),no=0;return null!=Ss&&(T++,no=ms.offset=Ss),X=X||no<0||no>1,B=B||no<se,se=no,O.push(no),ms});X&&l.errors.push(function Gm(){return new k.OBp(3012,!1)}()),B&&l.errors.push(function wg(){return new k.OBp(3200,!1)}());const Ge=a.steps.length;let ut=0;T>0&&T<Ge?l.errors.push(function Dy(){return new k.OBp(3202,!1)}()):0==T&&(ut=1/(Ge-1));const Mt=Ge-1,xt=l.currentTime,on=l.currentAnimateTimings,Dr=on.duration;return Fe.forEach((ns,ms)=>{const Ss=ut>0?ms==Mt?1:ut*ms:O[ms],no=Ss*Dr;l.currentTime=xt+on.delay+no,on.duration=no,this._validateStyleAst(ns,l),ns.offset=Ss,f.styles.push(ns)}),f}visitReference(a,l){return{type:Vn.m0.Reference,animation:Ks(this,sd(a.animation),l),options:Jl(a.options)}}visitAnimateChild(a,l){return l.depCount++,{type:Vn.m0.AnimateChild,options:Jl(a.options)}}visitAnimateRef(a,l){return{type:Vn.m0.AnimateRef,animation:this.visitReference(a.animation,l),options:Jl(a.options)}}visitQuery(a,l){const f=l.currentQuerySelector,v=a.options||{};l.queryCount++,l.currentQuery=a;const[T,O]=function Mu(h){const a=!!h.split(/\s*,\s*/).find(l=>":self"==l);return a&&(h=h.replace(gl,"")),h=h.replace(/@\*/g,pl).replace(/@\w+/g,l=>pl+"-"+l.slice(1)).replace(/:animating/g,Ra),[h,a]}(a.selector);l.currentQuerySelector=f.length?f+" "+T:T,ra(l.collectedStyles,l.currentQuerySelector,new Map);const B=Ks(this,sd(a.animation),l);return l.currentQuery=null,l.currentQuerySelector=f,{type:Vn.m0.Query,selector:T,limit:v.limit||0,optional:!!v.optional,includeSelf:O,animation:B,originalSelector:a.selector,options:Jl(a.options)}}visitStagger(a,l){l.currentQuery||l.errors.push(function Sy(){return new k.OBp(3013,!1)}());const f="full"===a.timings?{duration:0,delay:0,easing:"full"}:Au(a.timings,l.errors,!0);return{type:Vn.m0.Stagger,animation:Ks(this,sd(a.animation),l),timings:f,options:null}}}class Ru{constructor(a){this.errors=a,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Jl(h){return h?(h={...h}).params&&(h.params=function Ng(h){return h?{...h}:null}(h.params)):h={},h}function Jd(h,a,l){return{duration:h,delay:a,easing:l}}function ef(h,a,l,f,v,T,O=null,B=!1){return{type:1,element:h,keyframes:a,preStyleProps:l,postStyleProps:f,duration:v,delay:T,totalTime:v+T,easing:O,subTimeline:B}}class Xd{constructor(){this._map=new Map}get(a){return this._map.get(a)||[]}append(a,l){let f=this._map.get(a);f||this._map.set(a,f=[]),f.push(...l)}has(a){return this._map.has(a)}clear(){this._map.clear()}}const mp=new RegExp(":enter","g"),Uy=new RegExp(":leave","g");function yp(h,a,l,f,v,T=new Map,O=new Map,B,X,se=[]){return(new Oa).buildKeyframes(h,a,l,f,v,T,O,B,X,se)}class Oa{buildKeyframes(a,l,f,v,T,O,B,X,se,Fe=[]){se=se||new Xd;const Ge=new vp(a,l,se,v,T,Fe,[]);Ge.options=X;const ut=X.delay?hc(X.delay):0;Ge.currentTimeline.delayNextStep(ut),Ge.currentTimeline.setStyles([O],null,Ge.errors,X),Ks(this,f,Ge);const Mt=Ge.timelines.filter(xt=>xt.containsAnimation());if(Mt.length&&B.size){let xt;for(let on=Mt.length-1;on>=0;on--){const Dr=Mt[on];if(Dr.element===l){xt=Dr;break}}xt&&!xt.allowOnlyTimelineStyles()&&xt.setStyles([B],null,Ge.errors,X)}return Mt.length?Mt.map(xt=>xt.buildKeyframes()):[ef(l,[],[],[],0,ut,"",!1)]}visitTrigger(a,l){}visitState(a,l){}visitTransition(a,l){}visitAnimateChild(a,l){const f=l.subInstructions.get(l.element);if(f){const v=l.createSubContext(a.options),T=l.currentTimeline.currentTime,O=this._visitSubInstructions(f,v,v.options);T!=O&&l.transformIntoNewTimeline(O)}l.previousNode=a}visitAnimateRef(a,l){const f=l.createSubContext(a.options);f.transformIntoNewTimeline(),this._applyAnimationRefDelays([a.options,a.animation.options],l,f),this.visitReference(a.animation,f),l.transformIntoNewTimeline(f.currentTimeline.currentTime),l.previousNode=a}_applyAnimationRefDelays(a,l,f){for(const v of a){const T=v?.delay;if(T){const O="number"==typeof T?T:hc(Vc(T,v?.params??{},l.errors));f.delayNextStep(O)}}}_visitSubInstructions(a,l,f){let T=l.currentTimeline.currentTime;const O=null!=f.duration?hc(f.duration):null,B=null!=f.delay?hc(f.delay):null;return 0!==O&&a.forEach(X=>{const se=l.appendInstructionToTimeline(X,O,B);T=Math.max(T,se.duration+se.delay)}),T}visitReference(a,l){l.updateOptions(a.options,!0),Ks(this,a.animation,l),l.previousNode=a}visitSequence(a,l){const f=l.subContextCount;let v=l;const T=a.options;if(T&&(T.params||T.delay)&&(v=l.createSubContext(T),v.transformIntoNewTimeline(),null!=T.delay)){v.previousNode.type==Vn.m0.Style&&(v.currentTimeline.snapshotCurrentStyles(),v.previousNode=tf);const O=hc(T.delay);v.delayNextStep(O)}a.steps.length&&(a.steps.forEach(O=>Ks(this,O,v)),v.currentTimeline.applyStylesToKeyframe(),v.subContextCount>f&&v.transformIntoNewTimeline()),l.previousNode=a}visitGroup(a,l){const f=[];let v=l.currentTimeline.currentTime;const T=a.options&&a.options.delay?hc(a.options.delay):0;a.steps.forEach(O=>{const B=l.createSubContext(a.options);T&&B.delayNextStep(T),Ks(this,O,B),v=Math.max(v,B.currentTimeline.currentTime),f.push(B.currentTimeline)}),f.forEach(O=>l.currentTimeline.mergeTimelineCollectedStyles(O)),l.transformIntoNewTimeline(v),l.previousNode=a}_visitTiming(a,l){if(a.dynamic){const f=a.strValue;return Au(l.params?Vc(f,l.params,l.errors):f,l.errors)}return{duration:a.duration,delay:a.delay,easing:a.easing}}visitAnimate(a,l){const f=l.currentAnimateTimings=this._visitTiming(a.timings,l),v=l.currentTimeline;f.delay&&(l.incrementTime(f.delay),v.snapshotCurrentStyles());const T=a.style;T.type==Vn.m0.Keyframes?this.visitKeyframes(T,l):(l.incrementTime(f.duration),this.visitStyle(T,l),v.applyStylesToKeyframe()),l.currentAnimateTimings=null,l.previousNode=a}visitStyle(a,l){const f=l.currentTimeline,v=l.currentAnimateTimings;!v&&f.hasCurrentStyleProperties()&&f.forwardFrame();const T=v&&v.easing||a.easing;a.isEmptyStep?f.applyEmptyStep(T):f.setStyles(a.styles,T,l.errors,l.options),l.previousNode=a}visitKeyframes(a,l){const f=l.currentAnimateTimings,v=l.currentTimeline.duration,T=f.duration,B=l.createSubContext().currentTimeline;B.easing=f.easing,a.styles.forEach(X=>{B.forwardTime((X.offset||0)*T),B.setStyles(X.styles,X.easing,l.errors,l.options),B.applyStylesToKeyframe()}),l.currentTimeline.mergeTimelineCollectedStyles(B),l.transformIntoNewTimeline(v+T),l.previousNode=a}visitQuery(a,l){const f=l.currentTimeline.currentTime,v=a.options||{},T=v.delay?hc(v.delay):0;T&&(l.previousNode.type===Vn.m0.Style||0==f&&l.currentTimeline.hasCurrentStyleProperties())&&(l.currentTimeline.snapshotCurrentStyles(),l.previousNode=tf);let O=f;const B=l.invokeQuery(a.selector,a.originalSelector,a.limit,a.includeSelf,!!v.optional,l.errors);l.currentQueryTotal=B.length;let X=null;B.forEach((se,Fe)=>{l.currentQueryIndex=Fe;const Ge=l.createSubContext(a.options,se);T&&Ge.delayNextStep(T),se===l.element&&(X=Ge.currentTimeline),Ks(this,a.animation,Ge),Ge.currentTimeline.applyStylesToKeyframe(),O=Math.max(O,Ge.currentTimeline.currentTime)}),l.currentQueryIndex=0,l.currentQueryTotal=0,l.transformIntoNewTimeline(O),X&&(l.currentTimeline.mergeTimelineCollectedStyles(X),l.currentTimeline.snapshotCurrentStyles()),l.previousNode=a}visitStagger(a,l){const f=l.parentContext,v=l.currentTimeline,T=a.timings,O=Math.abs(T.duration),B=O*(l.currentQueryTotal-1);let X=O*l.currentQueryIndex;switch(T.duration<0?"reverse":T.easing){case"reverse":X=B-X;break;case"full":X=f.currentStaggerTime}const Fe=l.currentTimeline;X&&Fe.delayNextStep(X);const Ge=Fe.currentTime;Ks(this,a.animation,l),l.previousNode=a,f.currentStaggerTime=v.currentTime-Ge+(v.startTime-f.currentTimeline.startTime)}}const tf={};class vp{constructor(a,l,f,v,T,O,B,X){this._driver=a,this.element=l,this.subInstructions=f,this._enterClassName=v,this._leaveClassName=T,this.errors=O,this.timelines=B,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=tf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=X||new Ep(this._driver,l,0),B.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(a,l){if(!a)return;const f=a;let v=this.options;null!=f.duration&&(v.duration=hc(f.duration)),null!=f.delay&&(v.delay=hc(f.delay));const T=f.params;if(T){let O=v.params;O||(O=this.options.params={}),Object.keys(T).forEach(B=>{(!l||!O.hasOwnProperty(B))&&(O[B]=Vc(T[B],O,this.errors))})}}_copyOptions(){const a={};if(this.options){const l=this.options.params;if(l){const f=a.params={};Object.keys(l).forEach(v=>{f[v]=l[v]})}}return a}createSubContext(a=null,l,f){const v=l||this.element,T=new vp(this._driver,v,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(v,f||0));return T.previousNode=this.previousNode,T.currentAnimateTimings=this.currentAnimateTimings,T.options=this._copyOptions(),T.updateOptions(a),T.currentQueryIndex=this.currentQueryIndex,T.currentQueryTotal=this.currentQueryTotal,T.parentContext=this,this.subContextCount++,T}transformIntoNewTimeline(a){return this.previousNode=tf,this.currentTimeline=this.currentTimeline.fork(this.element,a),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(a,l,f){const v={duration:l??a.duration,delay:this.currentTimeline.currentTime+(f??0)+a.delay,easing:""},T=new Ip(this._driver,a.element,a.keyframes,a.preStyleProps,a.postStyleProps,v,a.stretchStartingKeyframe);return this.timelines.push(T),v}incrementTime(a){this.currentTimeline.forwardTime(this.currentTimeline.duration+a)}delayNextStep(a){a>0&&this.currentTimeline.delayNextStep(a)}invokeQuery(a,l,f,v,T,O){let B=[];if(v&&B.push(this.element),a.length>0){a=(a=a.replace(mp,"."+this._enterClassName)).replace(Uy,"."+this._leaveClassName);let se=this._driver.query(this.element,a,1!=f);0!==f&&(se=f<0?se.slice(se.length+f,se.length):se.slice(0,f)),B.push(...se)}return!T&&0==B.length&&O.push(function jh(h){return new k.OBp(3014,!1)}()),B}}class Ep{constructor(a,l,f,v){this._driver=a,this.element=l,this.startTime=f,this._elementTimelineStylesLookup=v,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(l),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(l,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(a){const l=1===this._keyframes.size&&this._pendingStyles.size;this.duration||l?(this.forwardTime(this.currentTime+a),l&&this.snapshotCurrentStyles()):this.startTime+=a}fork(a,l){return this.applyStylesToKeyframe(),new Ep(this._driver,a,l||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(a){this.applyStylesToKeyframe(),this.duration=a,this._loadKeyframe()}_updateStyle(a,l){this._localTimelineStyles.set(a,l),this._globalTimelineStyles.set(a,l),this._styleSummary.set(a,{time:this.currentTime,value:l})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(a){a&&this._previousKeyframe.set("easing",a);for(let[l,f]of this._globalTimelineStyles)this._backFill.set(l,f||Vn.AN),this._currentKeyframe.set(l,Vn.AN);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(a,l,f,v){l&&this._previousKeyframe.set("easing",l);const T=v&&v.params||{},O=function By(h,a){const l=new Map;let f;return h.forEach(v=>{if("*"===v){f??=a.keys();for(let T of f)l.set(T,Vn.AN)}else for(let[T,O]of v)l.set(T,O)}),l}(a,this._globalTimelineStyles);for(let[B,X]of O){const se=Vc(X,T,f);this._pendingStyles.set(B,se),this._localTimelineStyles.has(B)||this._backFill.set(B,this._globalTimelineStyles.get(B)??Vn.AN),this._updateStyle(B,se)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((a,l)=>{this._currentKeyframe.set(l,a)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((a,l)=>{this._currentKeyframe.has(l)||this._currentKeyframe.set(l,a)}))}snapshotCurrentStyles(){for(let[a,l]of this._localTimelineStyles)this._pendingStyles.set(a,l),this._updateStyle(a,l)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const a=[];for(let l in this._currentKeyframe)a.push(l);return a}mergeTimelineCollectedStyles(a){a._styleSummary.forEach((l,f)=>{const v=this._styleSummary.get(f);(!v||l.time>v.time)&&this._updateStyle(f,l.value)})}buildKeyframes(){this.applyStylesToKeyframe();const a=new Set,l=new Set,f=1===this._keyframes.size&&0===this.duration;let v=[];this._keyframes.forEach((B,X)=>{const se=new Map([...this._backFill,...B]);se.forEach((Fe,Ge)=>{Fe===Vn.aM?a.add(Ge):Fe===Vn.AN&&l.add(Ge)}),f||se.set("offset",X/this.duration),v.push(se)});const T=[...a.values()],O=[...l.values()];if(f){const B=v[0],X=new Map(B);B.set("offset",0),X.set("offset",1),v=[B,X]}return ef(this.element,v,T,O,this.duration,this.startTime,this.easing,!1)}}class Ip extends Ep{constructor(a,l,f,v,T,O,B=!1){super(a,l,O.delay),this.keyframes=f,this.preStyleProps=v,this.postStyleProps=T,this._stretchStartingKeyframe=B,this.timings={duration:O.duration,delay:O.delay,easing:O.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let a=this.keyframes,{delay:l,duration:f,easing:v}=this.timings;if(this._stretchStartingKeyframe&&l){const T=[],O=f+l,B=l/O,X=new Map(a[0]);X.set("offset",0),T.push(X);const se=new Map(a[0]);se.set("offset",xg(B)),T.push(se);const Fe=a.length-1;for(let Ge=1;Ge<=Fe;Ge++){let ut=new Map(a[Ge]);const Mt=ut.get("offset");ut.set("offset",xg((l+Mt*f)/O)),T.push(ut)}f=O,l=0,v="",a=T}return ef(this.element,a,this.preStyleProps,this.postStyleProps,f,l,v,!0)}}function xg(h,a=3){const l=Math.pow(10,a-1);return Math.round(h*l)/l}function Jm(h,a,l,f,v,T,O,B,X,se,Fe,Ge,ut){return{type:0,element:h,triggerName:a,isRemovalTransition:v,fromState:l,fromStyles:T,toState:f,toStyles:O,timelines:B,queriedElements:X,preStyleProps:se,postStyleProps:Fe,totalTime:Ge,errors:ut}}const kg={};class nf{constructor(a,l,f){this._triggerName=a,this.ast=l,this._stateStyles=f}match(a,l,f,v){return function Fg(h,a,l,f,v){return h.some(T=>T(a,l,f,v))}(this.ast.matchers,a,l,f,v)}buildStyles(a,l,f){let v=this._stateStyles.get("*");return void 0!==a&&(v=this._stateStyles.get(a?.toString())||v),v?v.buildStyles(l,f):new Map}build(a,l,f,v,T,O,B,X,se,Fe){const Ge=[],ut=this.ast.options&&this.ast.options.params||kg,xt=this.buildStyles(f,B&&B.params||kg,Ge),on=X&&X.params||kg,Dr=this.buildStyles(v,on,Ge),ns=new Set,ms=new Map,Ss=new Map,no="void"===v,ku={params:Cp(on,ut),delay:this.ast.options?.delay},$c=Fe?[]:yp(a,l,this.ast.animation,T,O,xt,Dr,ku,se,Ge);let ia=0;return $c.forEach(ya=>{ia=Math.max(ya.duration+ya.delay,ia)}),Ge.length?Jm(l,this._triggerName,f,v,no,xt,Dr,[],[],ms,Ss,ia,Ge):($c.forEach(ya=>{const fc=ya.element,mr=ra(ms,fc,new Set);ya.preStyleProps.forEach(Gc=>mr.add(Gc));const sh=ra(Ss,fc,new Set);ya.postStyleProps.forEach(Gc=>sh.add(Gc)),fc!==l&&ns.add(fc)}),Jm(l,this._triggerName,f,v,no,xt,Dr,$c,[...ns.values()],ms,Ss,ia))}}function Cp(h,a){const l={...a};return Object.entries(h).forEach(([f,v])=>{null!=v&&(l[f]=v)}),l}class Lg{constructor(a,l,f){this.styles=a,this.defaultParams=l,this.normalizer=f}buildStyles(a,l){const f=new Map,v=Cp(a,this.defaultParams);return this.styles.styles.forEach(T=>{"string"!=typeof T&&T.forEach((O,B)=>{O&&(O=Vc(O,v,l));const X=this.normalizer.normalizePropertyName(B,l);O=this.normalizer.normalizeStyleValue(B,X,O,l),f.set(B,O)})}),f}}class Vg{constructor(a,l,f){this.name=a,this.ast=l,this._normalizer=f,this.transitionFactories=[],this.states=new Map,l.states.forEach(v=>{this.states.set(v.name,new Lg(v.style,v.options&&v.options.params||{},f))}),wp(this.states,"true","1"),wp(this.states,"false","0"),l.transitions.forEach(v=>{this.transitionFactories.push(new nf(a,v,this.states))}),this.fallbackTransition=function Zm(h,a,l){return new nf(h,{type:Vn.m0.Transition,animation:{type:Vn.m0.Sequence,steps:[],options:null},matchers:[(O,B)=>!0],options:null,queryCount:0,depCount:0},a)}(a,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(a,l,f,v){return this.transitionFactories.find(O=>O.match(a,l,f,v))||null}matchStyles(a,l,f){return this.fallbackTransition.buildStyles(a,l,f)}}function wp(h,a,l){h.has(a)?h.has(l)||h.set(l,h.get(a)):h.has(l)&&h.set(a,h.get(l))}const Bc=new Xd;class Ug{constructor(a,l,f){this.bodyNode=a,this._driver=l,this._normalizer=f,this._animations=new Map,this._playersById=new Map,this.players=[]}register(a,l){const f=[],T=Uc(this._driver,l,f,[]);if(f.length)throw function Hl(h){return new k.OBp(3503,!1)}();this._animations.set(a,T)}_buildPlayer(a,l,f){const v=a.element,T=$h(this._normalizer,a.keyframes,l,f);return this._driver.animate(v,T,a.duration,a.delay,a.easing,[],!0)}create(a,l,f={}){const v=[],T=this._animations.get(a);let O;const B=new Map;if(T?(O=yp(this._driver,l,T,rd,up,new Map,new Map,f,Bc,v),O.forEach(Fe=>{const Ge=ra(B,Fe.element,new Map);Fe.postStyleProps.forEach(ut=>Ge.set(ut,null))})):(v.push(function jd(){return new k.OBp(3300,!1)}()),O=[]),v.length)throw function $d(h){return new k.OBp(3504,!1)}();B.forEach((Fe,Ge)=>{Fe.forEach((ut,Mt)=>{Fe.set(Mt,this._driver.computeStyle(Ge,Mt,Vn.AN))})});const se=ql(O.map(Fe=>{const Ge=B.get(Fe.element);return this._buildPlayer(Fe,new Map,Ge)}));return this._playersById.set(a,se),se.onDestroy(()=>this.destroy(a)),this.players.push(se),se}destroy(a){const l=this._getPlayer(a);l.destroy(),this._playersById.delete(a);const f=this.players.indexOf(l);f>=0&&this.players.splice(f,1)}_getPlayer(a){const l=this._playersById.get(a);if(!l)throw function Tg(h){return new k.OBp(3301,!1)}();return l}listen(a,l,f,v){const T=Hd(l,"","","");return Wd(this._getPlayer(a),f,T,v),()=>{}}command(a,l,f,v){if("register"==f)return void this.register(a,v[0]);if("create"==f)return void this.create(a,l,v[0]||{});const T=this._getPlayer(a);switch(f){case"play":T.play();break;case"pause":T.pause();break;case"reset":T.reset();break;case"restart":T.restart();break;case"finish":T.finish();break;case"init":T.init();break;case"setPosition":T.setPosition(parseFloat(v[0]));break;case"destroy":this.destroy(a)}}}const Tp="ng-animate-queued",Zd="ng-animate-disabled",t_=[],rf={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Dp={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Go="__ng_removed";class ad{get params(){return this.options.params}constructor(a,l=""){this.namespaceId=l;const f=a&&a.hasOwnProperty("value");if(this.value=function ld(h){return h??null}(f?a.value:a),f){const{value:T,...O}=a;this.options=O}else this.options={};this.options.params||(this.options.params={})}absorbOptions(a){const l=a.params;if(l){const f=this.options.params;Object.keys(l).forEach(v=>{null==f[v]&&(f[v]=l[v])})}}}const Xl="void",jc=new ad(Xl);class jg{constructor(a,l,f){this.id=a,this.hostElement=l,this._engine=f,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+a,Ya(l,this._hostClassName)}listen(a,l,f,v){if(!this._triggers.has(l))throw function Dg(h,a){return new k.OBp(3302,!1)}();if(null==f||0==f.length)throw function Wm(h){return new k.OBp(3303,!1)}();if(!function th(h){return"start"==h||"done"==h}(f))throw function by(h,a){return new k.OBp(3400,!1)}();const T=ra(this._elementListeners,a,[]),O={name:l,phase:f,callback:v};T.push(O);const B=ra(this._engine.statesByElement,a,new Map);return B.has(l)||(Ya(a,dp),Ya(a,dp+"-"+l),B.set(l,jc)),()=>{this._engine.afterFlush(()=>{const X=T.indexOf(O);X>=0&&T.splice(X,1),this._triggers.has(l)||B.delete(l)})}}register(a,l){return!this._triggers.has(a)&&(this._triggers.set(a,l),!0)}_getTrigger(a){const l=this._triggers.get(a);if(!l)throw function sp(h){return new k.OBp(3401,!1)}();return l}trigger(a,l,f,v=!0){const T=this._getTrigger(l),O=new cd(this.id,l,a);let B=this._engine.statesByElement.get(a);B||(Ya(a,dp),Ya(a,dp+"-"+l),this._engine.statesByElement.set(a,B=new Map));let X=B.get(l);const se=new ad(f,this.id);if(!(f&&f.hasOwnProperty("value"))&&X&&se.absorbOptions(X.options),B.set(l,se),X||(X=jc),se.value!==Xl&&X.value===se.value){if(!function Wg(h,a){const l=Object.keys(h),f=Object.keys(a);if(l.length!=f.length)return!1;for(let v=0;v<l.length;v++){const T=l[v];if(!a.hasOwnProperty(T)||h[T]!==a[T])return!1}return!0}(X.params,se.params)){const on=[],Dr=T.matchStyles(X.value,X.params,on),ns=T.matchStyles(se.value,se.params,on);on.length?this._engine.reportError(on):this._engine.afterFlush(()=>{_a(a,Dr),Ka(a,ns)})}return}const ut=ra(this._engine.playersByElement,a,[]);ut.forEach(on=>{on.namespaceId==this.id&&on.triggerName==l&&on.queued&&on.destroy()});let Mt=T.matchTransition(X.value,se.value,a,se.params),xt=!1;if(!Mt){if(!v)return;Mt=T.fallbackTransition,xt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:l,transition:Mt,fromState:X,toState:se,player:O,isFallbackTransition:xt}),xt||(Ya(a,Tp),O.onStart(()=>{eu(a,Tp)})),O.onDone(()=>{let on=this.players.indexOf(O);on>=0&&this.players.splice(on,1);const Dr=this._engine.playersByElement.get(a);if(Dr){let ns=Dr.indexOf(O);ns>=0&&Dr.splice(ns,1)}}),this.players.push(O),ut.push(O),O}deregister(a){this._triggers.delete(a),this._engine.statesByElement.forEach(l=>l.delete(a)),this._elementListeners.forEach((l,f)=>{this._elementListeners.set(f,l.filter(v=>v.name!=a))})}clearElementCache(a){this._engine.statesByElement.delete(a),this._elementListeners.delete(a);const l=this._engine.playersByElement.get(a);l&&(l.forEach(f=>f.destroy()),this._engine.playersByElement.delete(a))}_signalRemovalForInnerTriggers(a,l){const f=this._engine.driver.query(a,pl,!0);f.forEach(v=>{if(v[Go])return;const T=this._engine.fetchNamespacesByElement(v);T.size?T.forEach(O=>O.triggerLeaveAnimation(v,l,!1,!0)):this.clearElementCache(v)}),this._engine.afterFlushAnimationsDone(()=>f.forEach(v=>this.clearElementCache(v)))}triggerLeaveAnimation(a,l,f,v){const T=this._engine.statesByElement.get(a),O=new Map;if(T){const B=[];if(T.forEach((X,se)=>{if(O.set(se,X.value),this._triggers.has(se)){const Fe=this.trigger(a,se,Xl,v);Fe&&B.push(Fe)}}),B.length)return this._engine.markElementAsRemoved(this.id,a,!0,l,O),f&&ql(B).onDone(()=>this._engine.processLeaveNode(a)),!0}return!1}prepareLeaveAnimationListeners(a){const l=this._elementListeners.get(a),f=this._engine.statesByElement.get(a);if(l&&f){const v=new Set;l.forEach(T=>{const O=T.name;if(v.has(O))return;v.add(O);const X=this._triggers.get(O).fallbackTransition,se=f.get(O)||jc,Fe=new ad(Xl),Ge=new cd(this.id,O,a);this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:O,transition:X,fromState:se,toState:Fe,player:Ge,isFallbackTransition:!0})})}}removeNode(a,l){const f=this._engine;if(a.childElementCount&&this._signalRemovalForInnerTriggers(a,l),this.triggerLeaveAnimation(a,l,!0))return;let v=!1;if(f.totalAnimations){const T=f.players.length?f.playersByQueriedElement.get(a):[];if(T&&T.length)v=!0;else{let O=a;for(;O=O.parentNode;)if(f.statesByElement.get(O)){v=!0;break}}}if(this.prepareLeaveAnimationListeners(a),v)f.markElementAsRemoved(this.id,a,!1,l);else{const T=a[Go];(!T||T===rf)&&(f.afterFlush(()=>this.clearElementCache(a)),f.destroyInnerAnimations(a),f._onRemovalComplete(a,l))}}insertNode(a,l){Ya(a,this._hostClassName)}drainQueuedTransitions(a){const l=[];return this._queue.forEach(f=>{const v=f.player;if(v.destroyed)return;const T=f.element,O=this._elementListeners.get(T);O&&O.forEach(B=>{if(B.name==f.triggerName){const X=Hd(T,f.triggerName,f.fromState.value,f.toState.value);X._data=a,Wd(f.player,B.phase,X,B.callback)}}),v.markedForDestroy?this._engine.afterFlush(()=>{v.destroy()}):l.push(f)}),this._queue=[],l.sort((f,v)=>{const T=f.transition.ast.depCount,O=v.transition.ast.depCount;return 0==T||0==O?T-O:this._engine.driver.containsElement(f.element,v.element)?1:-1})}destroy(a){this.players.forEach(l=>l.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,a)}}class Zl{_onRemovalComplete(a,l){this.onRemovalComplete(a,l)}constructor(a,l,f,v){this.bodyNode=a,this.driver=l,this._normalizer=f,this.scheduler=v,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(T,O)=>{}}get queuedPlayers(){const a=[];return this._namespaceList.forEach(l=>{l.players.forEach(f=>{f.queued&&a.push(f)})}),a}createNamespace(a,l){const f=new jg(a,l,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,l)?this._balanceNamespaceList(f,l):(this.newHostElements.set(l,f),this.collectEnterElement(l)),this._namespaceLookup[a]=f}_balanceNamespaceList(a,l){const f=this._namespaceList,v=this.namespacesByHostElement;if(f.length-1>=0){let O=!1,B=this.driver.getParentElement(l);for(;B;){const X=v.get(B);if(X){const se=f.indexOf(X);f.splice(se+1,0,a),O=!0;break}B=this.driver.getParentElement(B)}O||f.unshift(a)}else f.push(a);return v.set(l,a),a}register(a,l){let f=this._namespaceLookup[a];return f||(f=this.createNamespace(a,l)),f}registerTrigger(a,l,f){let v=this._namespaceLookup[a];v&&v.register(l,f)&&this.totalAnimations++}destroy(a,l){a&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const f=this._fetchNamespace(a);this.namespacesByHostElement.delete(f.hostElement);const v=this._namespaceList.indexOf(f);v>=0&&this._namespaceList.splice(v,1),f.destroy(l),delete this._namespaceLookup[a]}))}_fetchNamespace(a){return this._namespaceLookup[a]}fetchNamespacesByElement(a){const l=new Set,f=this.statesByElement.get(a);if(f)for(let v of f.values())if(v.namespaceId){const T=this._fetchNamespace(v.namespaceId);T&&l.add(T)}return l}trigger(a,l,f,v){if(sf(l)){const T=this._fetchNamespace(a);if(T)return T.trigger(l,f,v),!0}return!1}insertNode(a,l,f,v){if(!sf(l))return;const T=l[Go];if(T&&T.setForRemoval){T.setForRemoval=!1,T.setForMove=!0;const O=this.collectedLeaveElements.indexOf(l);O>=0&&this.collectedLeaveElements.splice(O,1)}if(a){const O=this._fetchNamespace(a);O&&O.insertNode(l,f)}v&&this.collectEnterElement(l)}collectEnterElement(a){this.collectedEnterElements.push(a)}markElementAsDisabled(a,l){l?this.disabledNodes.has(a)||(this.disabledNodes.add(a),Ya(a,Zd)):this.disabledNodes.has(a)&&(this.disabledNodes.delete(a),eu(a,Zd))}removeNode(a,l,f){if(sf(l)){this.scheduler?.notify();const v=a?this._fetchNamespace(a):null;v?v.removeNode(l,f):this.markElementAsRemoved(a,l,!1,f);const T=this.namespacesByHostElement.get(l);T&&T.id!==a&&T.removeNode(l,f)}else this._onRemovalComplete(l,f)}markElementAsRemoved(a,l,f,v,T){this.collectedLeaveElements.push(l),l[Go]={namespaceId:a,setForRemoval:v,hasAnimation:f,removedBeforeQueried:!1,previousTriggersValues:T}}listen(a,l,f,v,T){return sf(l)?this._fetchNamespace(a).listen(l,f,v,T):()=>{}}_buildInstruction(a,l,f,v,T){return a.transition.build(this.driver,a.element,a.fromState.value,a.toState.value,f,v,a.fromState.options,a.toState.options,l,T)}destroyInnerAnimations(a){let l=this.driver.query(a,pl,!0);l.forEach(f=>this.destroyActiveAnimationsForElement(f)),0!=this.playersByQueriedElement.size&&(l=this.driver.query(a,Ra,!0),l.forEach(f=>this.finishActiveQueriedAnimationOnElement(f)))}destroyActiveAnimationsForElement(a){const l=this.playersByElement.get(a);l&&l.forEach(f=>{f.queued?f.markedForDestroy=!0:f.destroy()})}finishActiveQueriedAnimationOnElement(a){const l=this.playersByQueriedElement.get(a);l&&l.forEach(f=>f.finish())}whenRenderingDone(){return new Promise(a=>{if(this.players.length)return ql(this.players).onDone(()=>a());a()})}processLeaveNode(a){const l=a[Go];if(l&&l.setForRemoval){if(a[Go]=rf,l.namespaceId){this.destroyInnerAnimations(a);const f=this._fetchNamespace(l.namespaceId);f&&f.clearElementCache(a)}this._onRemovalComplete(a,l.setForRemoval)}a.classList?.contains(Zd)&&this.markElementAsDisabled(a,!1),this.driver.query(a,".ng-animate-disabled",!0).forEach(f=>{this.markElementAsDisabled(f,!1)})}flush(a=-1){let l=[];if(this.newHostElements.size&&(this.newHostElements.forEach((f,v)=>this._balanceNamespaceList(f,v)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let f=0;f<this.collectedEnterElements.length;f++)Ya(this.collectedEnterElements[f],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const f=[];try{l=this._flushAnimations(f,a)}finally{for(let v=0;v<f.length;v++)f[v]()}}else for(let f=0;f<this.collectedLeaveElements.length;f++)this.processLeaveNode(this.collectedLeaveElements[f]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(f=>f()),this._flushFns=[],this._whenQuietFns.length){const f=this._whenQuietFns;this._whenQuietFns=[],l.length?ql(l).onDone(()=>{f.forEach(v=>v())}):f.forEach(v=>v())}}reportError(a){throw function Gd(h){return new k.OBp(3402,!1)}()}_flushAnimations(a,l){const f=new Xd,v=[],T=new Map,O=[],B=new Map,X=new Map,se=new Map,Fe=new Set;this.disabledNodes.forEach(Qt=>{Fe.add(Qt);const Mn=this.driver.query(Qt,".ng-animate-queued",!0);for(let Zn=0;Zn<Mn.length;Zn++)Fe.add(Mn[Zn])});const Ge=this.bodyNode,ut=Array.from(this.statesByElement.keys()),Mt=Nu(ut,this.collectedEnterElements),xt=new Map;let on=0;Mt.forEach((Qt,Mn)=>{const Zn=rd+on++;xt.set(Mn,Zn),Qt.forEach(Ei=>Ya(Ei,Zn))});const Dr=[],ns=new Set,ms=new Set;for(let Qt=0;Qt<this.collectedLeaveElements.length;Qt++){const Mn=this.collectedLeaveElements[Qt],Zn=Mn[Go];Zn&&Zn.setForRemoval&&(Dr.push(Mn),ns.add(Mn),Zn.hasAnimation?this.driver.query(Mn,".ng-star-inserted",!0).forEach(Ei=>ns.add(Ei)):ms.add(Mn))}const Ss=new Map,no=Nu(ut,Array.from(ns));no.forEach((Qt,Mn)=>{const Zn=up+on++;Ss.set(Mn,Zn),Qt.forEach(Ei=>Ya(Ei,Zn))}),a.push(()=>{Mt.forEach((Qt,Mn)=>{const Zn=xt.get(Mn);Qt.forEach(Ei=>eu(Ei,Zn))}),no.forEach((Qt,Mn)=>{const Zn=Ss.get(Mn);Qt.forEach(Ei=>eu(Ei,Zn))}),Dr.forEach(Qt=>{this.processLeaveNode(Qt)})});const ku=[],$c=[];for(let Qt=this._namespaceList.length-1;Qt>=0;Qt--)this._namespaceList[Qt].drainQueuedTransitions(l).forEach(Zn=>{const Ei=Zn.player,Ys=Zn.element;if(ku.push(Ei),this.collectedEnterElements.length){const br=Ys[Go];if(br&&br.setForMove){if(br.previousTriggersValues&&br.previousTriggersValues.has(Zn.triggerName)){const ah=br.previousTriggersValues.get(Zn.triggerName),gc=this.statesByElement.get(Zn.element);if(gc&&gc.has(Zn.triggerName)){const _s=gc.get(Zn.triggerName);_s.value=ah,gc.set(Zn.triggerName,_s)}}return void Ei.destroy()}}const pc=!Ge||!this.driver.containsElement(Ge,Ys),va=Ss.get(Ys),Fu=xt.get(Ys),bi=this._buildInstruction(Zn,f,Fu,va,pc);if(bi.errors&&bi.errors.length)return void $c.push(bi);if(pc)return Ei.onStart(()=>_a(Ys,bi.fromStyles)),Ei.onDestroy(()=>Ka(Ys,bi.toStyles)),void v.push(Ei);if(Zn.isFallbackTransition)return Ei.onStart(()=>_a(Ys,bi.fromStyles)),Ei.onDestroy(()=>Ka(Ys,bi.toStyles)),void v.push(Ei);const Op=[];bi.timelines.forEach(br=>{br.stretchStartingKeyframe=!0,this.disabledNodes.has(br.element)||Op.push(br)}),bi.timelines=Op,f.append(Ys,bi.timelines),O.push({instruction:bi,player:Ei,element:Ys}),bi.queriedElements.forEach(br=>ra(B,br,[]).push(Ei)),bi.preStyleProps.forEach((br,ah)=>{if(br.size){let gc=X.get(ah);gc||X.set(ah,gc=new Set),br.forEach((_s,Np)=>gc.add(Np))}}),bi.postStyleProps.forEach((br,ah)=>{let gc=se.get(ah);gc||se.set(ah,gc=new Set),br.forEach((_s,Np)=>gc.add(Np))})});if($c.length){const Qt=[];$c.forEach(Mn=>{Qt.push(function zl(h,a){return new k.OBp(3505,!1)}())}),ku.forEach(Mn=>Mn.destroy()),this.reportError(Qt)}const ia=new Map,ya=new Map;O.forEach(Qt=>{const Mn=Qt.element;f.has(Mn)&&(ya.set(Mn,Mn),this._beforeAnimationBuild(Qt.player.namespaceId,Qt.instruction,ia))}),v.forEach(Qt=>{const Mn=Qt.element;this._getPreviousPlayers(Mn,!1,Qt.namespaceId,Qt.triggerName,null).forEach(Ei=>{ra(ia,Mn,[]).push(Ei),Ei.destroy()})});const fc=Dr.filter(Qt=>Hg(Qt,X,se)),mr=new Map;Sp(mr,this.driver,ms,se,Vn.AN).forEach(Qt=>{Hg(Qt,X,se)&&fc.push(Qt)});const Gc=new Map;Mt.forEach((Qt,Mn)=>{Sp(Gc,this.driver,new Set(Qt),X,Vn.aM)}),fc.forEach(Qt=>{const Mn=mr.get(Qt),Zn=Gc.get(Qt);mr.set(Qt,new Map([...Mn?.entries()??[],...Zn?.entries()??[]]))});const oh=[],Jg=[],xo={};O.forEach(Qt=>{const{element:Mn,player:Zn,instruction:Ei}=Qt;if(f.has(Mn)){if(Fe.has(Mn))return Zn.onDestroy(()=>Ka(Mn,Ei.toStyles)),Zn.disabled=!0,Zn.overrideTotalTime(Ei.totalTime),void v.push(Zn);let Ys=xo;if(ya.size>1){let va=Mn;const Fu=[];for(;va=va.parentNode;){const bi=ya.get(va);if(bi){Ys=bi;break}Fu.push(va)}Fu.forEach(bi=>ya.set(bi,Ys))}const pc=this._buildAnimation(Zn.namespaceId,Ei,ia,T,Gc,mr);if(Zn.setRealPlayer(pc),Ys===xo)oh.push(Zn);else{const va=this.playersByElement.get(Ys);va&&va.length&&(Zn.parentPlayer=ql(va)),v.push(Zn)}}else _a(Mn,Ei.fromStyles),Zn.onDestroy(()=>Ka(Mn,Ei.toStyles)),Jg.push(Zn),Fe.has(Mn)&&v.push(Zn)}),Jg.forEach(Qt=>{const Mn=T.get(Qt.element);if(Mn&&Mn.length){const Zn=ql(Mn);Qt.setRealPlayer(Zn)}}),v.forEach(Qt=>{Qt.parentPlayer?Qt.syncPlayerEvents(Qt.parentPlayer):Qt.destroy()});for(let Qt=0;Qt<Dr.length;Qt++){const Mn=Dr[Qt],Zn=Mn[Go];if(eu(Mn,up),Zn&&Zn.hasAnimation)continue;let Ei=[];if(B.size){let pc=B.get(Mn);pc&&pc.length&&Ei.push(...pc);let va=this.driver.query(Mn,Ra,!0);for(let Fu=0;Fu<va.length;Fu++){let bi=B.get(va[Fu]);bi&&bi.length&&Ei.push(...bi)}}const Ys=Ei.filter(pc=>!pc.destroyed);Ys.length?Wy(this,Mn,Ys):this.processLeaveNode(Mn)}return Dr.length=0,oh.forEach(Qt=>{this.players.push(Qt),Qt.onDone(()=>{Qt.destroy();const Mn=this.players.indexOf(Qt);this.players.splice(Mn,1)}),Qt.play()}),oh}afterFlush(a){this._flushFns.push(a)}afterFlushAnimationsDone(a){this._whenQuietFns.push(a)}_getPreviousPlayers(a,l,f,v,T){let O=[];if(l){const B=this.playersByQueriedElement.get(a);B&&(O=B)}else{const B=this.playersByElement.get(a);if(B){const X=!T||T==Xl;B.forEach(se=>{se.queued||!X&&se.triggerName!=v||O.push(se)})}}return(f||v)&&(O=O.filter(B=>!(f&&f!=B.namespaceId||v&&v!=B.triggerName))),O}_beforeAnimationBuild(a,l,f){const T=l.element,O=l.isRemovalTransition?void 0:a,B=l.isRemovalTransition?void 0:l.triggerName;for(const X of l.timelines){const se=X.element,Fe=se!==T,Ge=ra(f,se,[]);this._getPreviousPlayers(se,Fe,O,B,l.toState).forEach(Mt=>{const xt=Mt.getRealPlayer();xt.beforeDestroy&&xt.beforeDestroy(),Mt.destroy(),Ge.push(Mt)})}_a(T,l.fromStyles)}_buildAnimation(a,l,f,v,T,O){const B=l.triggerName,X=l.element,se=[],Fe=new Set,Ge=new Set,ut=l.timelines.map(xt=>{const on=xt.element;Fe.add(on);const Dr=on[Go];if(Dr&&Dr.removedBeforeQueried)return new Vn.kP(xt.duration,xt.delay);const ns=on!==X,ms=function $g(h){const a=[];return Gg(h,a),a}((f.get(on)||t_).map(ia=>ia.getRealPlayer())).filter(ia=>!!ia.element&&ia.element===on),Ss=T.get(on),no=O.get(on),ku=$h(this._normalizer,xt.keyframes,Ss,no),$c=this._buildPlayer(xt,ku,ms);if(xt.subTimeline&&v&&Ge.add(on),ns){const ia=new cd(a,B,on);ia.setRealPlayer($c),se.push(ia)}return $c});se.forEach(xt=>{ra(this.playersByQueriedElement,xt.element,[]).push(xt),xt.onDone(()=>function Gy(h,a,l){let f=h.get(a);if(f){if(f.length){const v=f.indexOf(l);f.splice(v,1)}0==f.length&&h.delete(a)}return f}(this.playersByQueriedElement,xt.element,xt))}),Fe.forEach(xt=>Ya(xt,Kh));const Mt=ql(ut);return Mt.onDestroy(()=>{Fe.forEach(xt=>eu(xt,Kh)),Ka(X,l.toStyles)}),Ge.forEach(xt=>{ra(v,xt,[]).push(Mt)}),Mt}_buildPlayer(a,l,f){return l.length>0?this.driver.animate(a.element,l,a.duration,a.delay,a.easing,f):new Vn.kP(a.duration,a.delay)}}class cd{constructor(a,l,f){this.namespaceId=a,this.triggerName=l,this.element=f,this._player=new Vn.kP,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(a){this._containsRealPlayer||(this._player=a,this._queuedCallbacks.forEach((l,f)=>{l.forEach(v=>Wd(a,f,void 0,v))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(a.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(a){this.totalTime=a}syncPlayerEvents(a){const l=this._player;l.triggerCallback&&a.onStart(()=>l.triggerCallback("start")),a.onDone(()=>this.finish()),a.onDestroy(()=>this.destroy())}_queueEvent(a,l){ra(this._queuedCallbacks,a,[]).push(l)}onDone(a){this.queued&&this._queueEvent("done",a),this._player.onDone(a)}onStart(a){this.queued&&this._queueEvent("start",a),this._player.onStart(a)}onDestroy(a){this.queued&&this._queueEvent("destroy",a),this._player.onDestroy(a)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(a){this.queued||this._player.setPosition(a)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(a){const l=this._player;l.triggerCallback&&l.triggerCallback(a)}}function sf(h){return h&&1===h.nodeType}function Ou(h,a){const l=h.style.display;return h.style.display=a??"none",l}function Sp(h,a,l,f,v){const T=[];l.forEach(X=>T.push(Ou(X)));const O=[];f.forEach((X,se)=>{const Fe=new Map;X.forEach(Ge=>{const ut=a.computeStyle(se,Ge,v);Fe.set(Ge,ut),(!ut||0==ut.length)&&(se[Go]=Dp,O.push(se))}),h.set(se,Fe)});let B=0;return l.forEach(X=>Ou(X,T[B++])),O}function Nu(h,a){const l=new Map;if(h.forEach(B=>l.set(B,[])),0==a.length)return l;const v=new Set(a),T=new Map;function O(B){if(!B)return 1;let X=T.get(B);if(X)return X;const se=B.parentNode;return X=l.has(se)?se:v.has(se)?1:O(se),T.set(B,X),X}return a.forEach(B=>{const X=O(B);1!==X&&l.get(X).push(B)}),l}function Ya(h,a){h.classList?.add(a)}function eu(h,a){h.classList?.remove(a)}function Wy(h,a,l){ql(l).onDone(()=>h.processLeaveNode(a))}function Gg(h,a){for(let l=0;l<h.length;l++){const f=h[l];f instanceof Vn.Wq?Gg(f.players,a):a.push(f)}}function Hg(h,a,l){const f=l.get(h);if(!f)return!1;let v=a.get(h);return v?f.forEach(T=>v.add(T)):a.set(h,f),l.delete(h),!0}class af{constructor(a,l,f,v){this._driver=l,this._normalizer=f,this._triggerCache={},this.onRemovalComplete=(T,O)=>{},this._transitionEngine=new Zl(a.body,l,f,v),this._timelineEngine=new Ug(a.body,l,f),this._transitionEngine.onRemovalComplete=(T,O)=>this.onRemovalComplete(T,O)}registerTrigger(a,l,f,v,T){const O=a+"-"+v;let B=this._triggerCache[O];if(!B){const X=[],Fe=Uc(this._driver,T,X,[]);if(X.length)throw function Bv(h,a){return new k.OBp(3404,!1)}();B=function jy(h,a,l){return new Vg(h,a,l)}(v,Fe,this._normalizer),this._triggerCache[O]=B}this._transitionEngine.registerTrigger(l,v,B)}register(a,l){this._transitionEngine.register(a,l)}destroy(a,l){this._transitionEngine.destroy(a,l)}onInsert(a,l,f,v){this._transitionEngine.insertNode(a,l,f,v)}onRemove(a,l,f){this._transitionEngine.removeNode(a,l,f)}disableAnimations(a,l){this._transitionEngine.markElementAsDisabled(a,l)}process(a,l,f,v){if("@"==f.charAt(0)){const[T,O]=Ag(f);this._timelineEngine.command(T,l,O,v)}else this._transitionEngine.trigger(a,l,f,v)}listen(a,l,f,v,T){if("@"==f.charAt(0)){const[O,B]=Ag(f);return this._timelineEngine.listen(O,l,B,T)}return this._transitionEngine.listen(a,l,f,v,T)}flush(a=-1){this._transitionEngine.flush(a)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(a){this._transitionEngine.afterFlushAnimationsDone(a)}}class xu{static#e=this.initialStylesByElement=new WeakMap;constructor(a,l,f){this._element=a,this._startStyles=l,this._endStyles=f,this._state=0;let v=xu.initialStylesByElement.get(a);v||xu.initialStylesByElement.set(a,v=new Map),this._initialStyles=v}start(){this._state<1&&(this._startStyles&&Ka(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ka(this._element,this._initialStyles),this._endStyles&&(Ka(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(xu.initialStylesByElement.delete(this._element),this._startStyles&&(_a(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_a(this._element,this._endStyles),this._endStyles=null),Ka(this._element,this._initialStyles),this._state=3)}}function Ap(h){let a=null;return h.forEach((l,f)=>{(function Pp(h){return"display"===h||"position"===h})(f)&&(a=a||new Map,a.set(f,l))}),a}class ud{constructor(a,l,f,v){this.element=a,this.keyframes=l,this.options=f,this._specialStyles=v,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=f.duration,this._delay=f.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const a=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,a,this.options),this._finalKeyframe=a.length?a[a.length-1]:new Map;const l=()=>this._onFinish();this.domPlayer.addEventListener("finish",l),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",l)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(a){const l=[];return a.forEach(f=>{l.push(Object.fromEntries(f))}),l}_triggerWebAnimation(a,l,f){return a.animate(this._convertKeyframesToObject(l),f)}onStart(a){this._originalOnStartFns.push(a),this._onStartFns.push(a)}onDone(a){this._originalOnDoneFns.push(a),this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(a=>a()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}setPosition(a){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=a*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const a=new Map;this.hasStarted()&&this._finalKeyframe.forEach((f,v)=>{"offset"!==v&&a.set(v,this._finished?f:Jh(this.element,v))}),this.currentSnapshot=a}triggerCallback(a){const l="start"===a?this._onStartFns:this._onDoneFns;l.forEach(f=>f()),l.length=0}}class bp{validateStyleProperty(a){return!0}validateAnimatableStyleProperty(a){return!0}matchesElement(a,l){return!1}containsElement(a,l){return zh(a,l)}getParentElement(a){return Hh(a)}query(a,l,f){return Pg(a,l,f)}computeStyle(a,l,f){return Jh(a,l)}animate(a,l,f,v,T,O=[]){const X={duration:f,delay:v,fill:0==v?"both":"forwards"};T&&(X.easing=T);const se=new Map,Fe=O.filter(Mt=>Mt instanceof ud);(function fp(h,a){return 0===h||0===a})(f,v)&&Fe.forEach(Mt=>{Mt.currentSnapshot.forEach((xt,on)=>se.set(on,xt))});let Ge=function Yh(h){return h.length?h[0]instanceof Map?h:h.map(a=>new Map(Object.entries(a))):[]}(l).map(Mt=>new Map(Mt));Ge=function pp(h,a,l){if(l.size&&a.length){let f=a[0],v=[];if(l.forEach((T,O)=>{f.has(O)||v.push(O),f.set(O,T)}),v.length)for(let T=1;T<a.length;T++){let O=a[T];v.forEach(B=>O.set(B,Jh(h,B)))}}return a}(a,Ge,se);const ut=function n_(h,a){let l=null,f=null;return Array.isArray(a)&&a.length?(l=Ap(a[0]),a.length>1&&(f=Ap(a[a.length-1]))):a instanceof Map&&(l=Ap(a)),l||f?new xu(h,l,f):null}(a,Ge);return new ud(a,Ge,X,ut)}}const lf="@.disabled";class zg{constructor(a,l,f,v){this.namespaceId=a,this.delegate=l,this.engine=f,this._onDestroy=v,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(a){this.delegate.destroyNode?.(a)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(a,l){return this.delegate.createElement(a,l)}createComment(a){return this.delegate.createComment(a)}createText(a){return this.delegate.createText(a)}appendChild(a,l){this.delegate.appendChild(a,l),this.engine.onInsert(this.namespaceId,l,a,!1)}insertBefore(a,l,f,v=!0){this.delegate.insertBefore(a,l,f),this.engine.onInsert(this.namespaceId,l,a,v)}removeChild(a,l,f){this.engine.onRemove(this.namespaceId,l,this.delegate)}selectRootElement(a,l){return this.delegate.selectRootElement(a,l)}parentNode(a){return this.delegate.parentNode(a)}nextSibling(a){return this.delegate.nextSibling(a)}setAttribute(a,l,f,v){this.delegate.setAttribute(a,l,f,v)}removeAttribute(a,l,f){this.delegate.removeAttribute(a,l,f)}addClass(a,l){this.delegate.addClass(a,l)}removeClass(a,l){this.delegate.removeClass(a,l)}setStyle(a,l,f,v){this.delegate.setStyle(a,l,f,v)}removeStyle(a,l,f){this.delegate.removeStyle(a,l,f)}setProperty(a,l,f){"@"==l.charAt(0)&&l==lf?this.disableAnimations(a,!!f):this.delegate.setProperty(a,l,f)}setValue(a,l){this.delegate.setValue(a,l)}listen(a,l,f){return this.delegate.listen(a,l,f)}disableAnimations(a,l){this.engine.disableAnimations(a,l)}}class nh extends zg{constructor(a,l,f,v,T){super(l,f,v,T),this.factory=a,this.namespaceId=l}setProperty(a,l,f){"@"==l.charAt(0)?"."==l.charAt(1)&&l==lf?this.disableAnimations(a,f=void 0===f||!!f):this.engine.process(this.namespaceId,a,l.slice(1),f):this.delegate.setProperty(a,l,f)}listen(a,l,f){if("@"==l.charAt(0)){const v=function qg(h){switch(h){case"body":return document.body;case"document":return document;case"window":return window;default:return h}}(a);let T=l.slice(1),O="";return"@"!=T.charAt(0)&&([T,O]=function rh(h){const a=h.indexOf(".");return[h.substring(0,a),h.slice(a+1)]}(T)),this.engine.listen(this.namespaceId,v,T,O,B=>{this.factory.scheduleListenerCallback(B._data||-1,f,B)})}return this.delegate.listen(a,l,f)}}class r_{constructor(a,l,f){this.delegate=a,this.engine=l,this._zone=f,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,l.onRemovalComplete=(v,T)=>{const O=T?.parentNode(v);O&&T.removeChild(O,v)}}createRenderer(a,l){const v=this.delegate.createRenderer(a,l);if(!a||!l?.data?.animation){const se=this._rendererCache;let Fe=se.get(v);return Fe||(Fe=new zg("",v,this.engine,()=>se.delete(v)),se.set(v,Fe)),Fe}const T=l.id,O=l.id+"-"+this._currentId;this._currentId++,this.engine.register(O,a);const B=se=>{Array.isArray(se)?se.forEach(B):this.engine.registerTrigger(T,O,a,se.name,se)};return l.data.animation.forEach(B),new nh(this,O,v,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(a,l,f){if(a>=0&&a<this._microtaskId)return void this._zone.run(()=>l(f));const v=this._animationCallbacksBuffer;0==v.length&&queueMicrotask(()=>{this._zone.run(()=>{v.forEach(T=>{const[O,B]=T;O(B)}),this._animationCallbacksBuffer=[]})}),v.push([l,f])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const ff=[{provide:cp,useFactory:function df(){return new Ym}},{provide:af,useClass:(()=>{class h extends af{constructor(l,f,v){super(l,f,v,(0,k.uUt)(k.yai,{optional:!0}))}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(f){return new(f||h)(k.CoB(ma.Ud),k.CoB(qh),k.CoB(cp))};static#t=this.\u0275prov=k.wxM({token:h,factory:h.\u0275fac})}return h})()},{provide:k.O8F,useFactory:function hf(h,a,l){return new r_(h,a,l)},deps:[y.q,af,k.WW2]}],pf=[{provide:qh,useFactory:()=>new bp},{provide:k.qwP,useValue:"BrowserAnimations"},...ff],Rp=[{provide:qh,useClass:Su},{provide:k.qwP,useValue:"NoopAnimations"},...ff];let ih=(()=>{class h{static withConfig(l){return{ngModule:h,providers:l.disableAnimations?Rp:pf}}static#e=this.\u0275fac=function(f){return new(f||h)};static#t=this.\u0275mod=k.a4G({type:h});static#n=this.\u0275inj=k.s3X({providers:pf,imports:[y.iE]})}return h})();var Yg=V(9840);let Qg=(()=>{class h{static#e=this.\u0275fac=function(f){return new(f||h)};static#t=this.\u0275mod=k.a4G({type:h,bootstrap:[_e]});static#n=this.\u0275inj=k.s3X({imports:[ma.MD,y.iE,W,Bm.LoginAndRegistrationModule,Iy.ProductPageModule,jm.ProfileModuleModule,vg.SingleProductPageModule,ih,Ro.w,Yg.M,Ey.UN.initializeApp(np),Je(()=>qn()),Nm(()=>Vm())]})}return h})();y.o_().bootstrapModule(Qg).catch(h=>console.error(h))},6700:(jt,He,V)=>{V.d(He,{g:()=>q});var y=V(5657);class q extends y.E{constructor(D){super(),this._value=D}get value(){return this.getValue()}_subscribe(D){const W=super._subscribe(D);return!W.closed&&D.next(this._value),W}getValue(){const{hasError:D,thrownError:W,_value:_e}=this;if(D)throw W;return this._throwIfClosed(),_e}next(D){super.next(this._value=D)}}},3252:(jt,He,V)=>{V.d(He,{_:()=>Le});var y=V(1760),q=V(6928),k=V(472),D=V(3928),W=V(4491),_e=V(8880),Ee=V(2075);let Le=(()=>{class xe{constructor(Ie){Ie&&(this._subscribe=Ie)}lift(Ie){const be=new xe;return be.source=this,be.operator=Ie,be}subscribe(Ie,be,pt){const Be=function fe(xe){return xe&&xe instanceof y.yR||function ge(xe){return xe&&(0,_e.m)(xe.next)&&(0,_e.m)(xe.error)&&(0,_e.m)(xe.complete)}(xe)&&(0,q.GI)(xe)}(Ie)?Ie:new y.ot(Ie,be,pt);return(0,Ee.c)(()=>{const{operator:tt,source:Ke}=this;Be.add(tt?tt.call(Be,Ke):Ke?this._subscribe(Be):this._trySubscribe(Be))}),Be}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch(be){Ie.error(be)}}forEach(Ie,be){return new(be=Pe(be))((pt,Be)=>{const tt=new y.ot({next:Ke=>{try{Ie(Ke)}catch(st){Be(st),tt.unsubscribe()}},error:Be,complete:pt});this.subscribe(tt)})}_subscribe(Ie){var be;return null===(be=this.source)||void 0===be?void 0:be.subscribe(Ie)}[k.a](){return this}pipe(...Ie){return(0,D.Y)(Ie)(this)}toPromise(Ie){return new(Ie=Pe(Ie))((be,pt)=>{let Be;this.subscribe(tt=>Be=tt,tt=>pt(tt),()=>be(Be))})}}return xe.create=it=>new xe(it),xe})();function Pe(xe){var it;return null!==(it=xe??W.config.Promise)&&void 0!==it?it:Promise}},5657:(jt,He,V)=>{V.d(He,{E:()=>Ee});var y=V(3252),q=V(6928);const D=(0,V(4912).w)(Pe=>function(){Pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var W=V(1248),_e=V(2075);let Ee=(()=>{class Pe extends y._{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(fe){const xe=new Le(this,this);return xe.operator=fe,xe}_throwIfClosed(){if(this.closed)throw new D}next(fe){(0,_e.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const xe of this.currentObservers)xe.next(fe)}})}error(fe){(0,_e.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=fe;const{observers:xe}=this;for(;xe.length;)xe.shift().error(fe)}})}complete(){(0,_e.c)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:fe}=this;for(;fe.length;)fe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var fe;return(null===(fe=this.observers)||void 0===fe?void 0:fe.length)>0}_trySubscribe(fe){return this._throwIfClosed(),super._trySubscribe(fe)}_subscribe(fe){return this._throwIfClosed(),this._checkFinalizedStatuses(fe),this._innerSubscribe(fe)}_innerSubscribe(fe){const{hasError:xe,isStopped:it,observers:Ie}=this;return xe||it?q.au:(this.currentObservers=null,Ie.push(fe),new q.wH(()=>{this.currentObservers=null,(0,W.k)(Ie,fe)}))}_checkFinalizedStatuses(fe){const{hasError:xe,thrownError:it,isStopped:Ie}=this;xe?fe.error(it):Ie&&fe.complete()}asObservable(){const fe=new y._;return fe.source=this,fe}}return Pe.create=(ge,fe)=>new Le(ge,fe),Pe})();class Le extends Ee{constructor(ge,fe){super(),this.destination=ge,this.source=fe}next(ge){var fe,xe;null===(xe=null===(fe=this.destination)||void 0===fe?void 0:fe.next)||void 0===xe||xe.call(fe,ge)}error(ge){var fe,xe;null===(xe=null===(fe=this.destination)||void 0===fe?void 0:fe.error)||void 0===xe||xe.call(fe,ge)}complete(){var ge,fe;null===(fe=null===(ge=this.destination)||void 0===ge?void 0:ge.complete)||void 0===fe||fe.call(ge)}_subscribe(ge){var fe,xe;return null!==(xe=null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(ge))&&void 0!==xe?xe:q.au}}},1760:(jt,He,V)=>{V.d(He,{ot:()=>pt,yR:()=>xe});var y=V(8880),q=V(6928),k=V(4491),D=V(1984),W=V(308);const _e=Pe("C",void 0,void 0);function Pe(Ae,ke,ae){return{kind:Ae,value:ke,error:ae}}var ge=V(3376),fe=V(2075);class xe extends q.wH{constructor(ke){super(),this.isStopped=!1,ke?(this.destination=ke,(0,q.GI)(ke)&&ke.add(this)):this.destination=st}static create(ke,ae,Re){return new pt(ke,ae,Re)}next(ke){this.isStopped?Ke(function Le(Ae){return Pe("N",Ae,void 0)}(ke),this):this._next(ke)}error(ke){this.isStopped?Ke(function Ee(Ae){return Pe("E",void 0,Ae)}(ke),this):(this.isStopped=!0,this._error(ke))}complete(){this.isStopped?Ke(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ke){this.destination.next(ke)}_error(ke){try{this.destination.error(ke)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const it=Function.prototype.bind;function Ie(Ae,ke){return it.call(Ae,ke)}class be{constructor(ke){this.partialObserver=ke}next(ke){const{partialObserver:ae}=this;if(ae.next)try{ae.next(ke)}catch(Re){Be(Re)}}error(ke){const{partialObserver:ae}=this;if(ae.error)try{ae.error(ke)}catch(Re){Be(Re)}else Be(ke)}complete(){const{partialObserver:ke}=this;if(ke.complete)try{ke.complete()}catch(ae){Be(ae)}}}class pt extends xe{constructor(ke,ae,Re){let Xe;if(super(),(0,y.m)(ke)||!ke)Xe={next:ke??void 0,error:ae??void 0,complete:Re??void 0};else{let pe;this&&k.config.useDeprecatedNextContext?(pe=Object.create(ke),pe.unsubscribe=()=>this.unsubscribe(),Xe={next:ke.next&&Ie(ke.next,pe),error:ke.error&&Ie(ke.error,pe),complete:ke.complete&&Ie(ke.complete,pe)}):Xe=ke}this.destination=new be(Xe)}}function Be(Ae){k.config.useDeprecatedSynchronousErrorHandling?(0,fe.q)(Ae):(0,D.U)(Ae)}function Ke(Ae,ke){const{onStoppedNotification:ae}=k.config;ae&&ge.u.setTimeout(()=>ae(Ae,ke))}const st={closed:!0,next:W.K,error:function tt(Ae){throw Ae},complete:W.K}},6928:(jt,He,V)=>{V.d(He,{au:()=>_e,wH:()=>W,GI:()=>Ee});var y=V(8880);const k=(0,V(4912).w)(Pe=>function(fe){Pe(this),this.message=fe?`${fe.length} errors occurred during unsubscription:\n${fe.map((xe,it)=>`${it+1}) ${xe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=fe});var D=V(1248);class W{constructor(ge){this.initialTeardown=ge,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ge;if(!this.closed){this.closed=!0;const{_parentage:fe}=this;if(fe)if(this._parentage=null,Array.isArray(fe))for(const Ie of fe)Ie.remove(this);else fe.remove(this);const{initialTeardown:xe}=this;if((0,y.m)(xe))try{xe()}catch(Ie){ge=Ie instanceof k?Ie.errors:[Ie]}const{_finalizers:it}=this;if(it){this._finalizers=null;for(const Ie of it)try{Le(Ie)}catch(be){ge=ge??[],be instanceof k?ge=[...ge,...be.errors]:ge.push(be)}}if(ge)throw new k(ge)}}add(ge){var fe;if(ge&&ge!==this)if(this.closed)Le(ge);else{if(ge instanceof W){if(ge.closed||ge._hasParent(this))return;ge._addParent(this)}(this._finalizers=null!==(fe=this._finalizers)&&void 0!==fe?fe:[]).push(ge)}}_hasParent(ge){const{_parentage:fe}=this;return fe===ge||Array.isArray(fe)&&fe.includes(ge)}_addParent(ge){const{_parentage:fe}=this;this._parentage=Array.isArray(fe)?(fe.push(ge),fe):fe?[fe,ge]:ge}_removeParent(ge){const{_parentage:fe}=this;fe===ge?this._parentage=null:Array.isArray(fe)&&(0,D.k)(fe,ge)}remove(ge){const{_finalizers:fe}=this;fe&&(0,D.k)(fe,ge),ge instanceof W&&ge._removeParent(this)}}W.EMPTY=(()=>{const Pe=new W;return Pe.closed=!0,Pe})();const _e=W.EMPTY;function Ee(Pe){return Pe instanceof W||Pe&&"closed"in Pe&&(0,y.m)(Pe.remove)&&(0,y.m)(Pe.add)&&(0,y.m)(Pe.unsubscribe)}function Le(Pe){(0,y.m)(Pe)?Pe():Pe.unsubscribe()}},4491:(jt,He,V)=>{V.d(He,{config:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7228:(jt,He,V)=>{V.d(He,{W:()=>W});var y=V(267),k=V(6624),D=V(9900);function W(..._e){return function q(){return(0,y.u)(1)}()((0,D.Q)(_e,(0,k.e_)(_e)))}},8960:(jt,He,V)=>{V.d(He,{k:()=>q});const q=new(V(3252)._)(W=>W.complete())},9336:(jt,He,V)=>{V.d(He,{y:()=>Le});var y=V(3252),q=V(4300),k=V(560),D=V(6624),W=V(7773),_e=V(4187),Ee=V(7904);function Le(...Pe){const ge=(0,D.yu)(Pe),{args:fe,keys:xe}=(0,q.Q)(Pe),it=new y._(Ie=>{const{length:be}=fe;if(!be)return void Ie.complete();const pt=new Array(be);let Be=be,tt=be;for(let Ke=0;Ke<be;Ke++){let st=!1;(0,k.Uv)(fe[Ke]).subscribe((0,W.e)(Ie,Ae=>{st||(st=!0,tt--),pt[Ke]=Ae},()=>Be--,void 0,()=>{(!Be||!st)&&(tt||Ie.next(xe?(0,Ee.q)(xe,pt):pt),Ie.complete())}))}});return ge?it.pipe((0,_e.j)(ge)):it}},9900:(jt,He,V)=>{V.d(He,{Q:()=>ke});var y=V(560),q=V(3920),k=V(2924),_e=V(3252),Le=V(3835),Pe=V(8880),ge=V(9399);function xe(ae,Re){if(!ae)throw new Error("Iterable cannot be null");return new _e._(Xe=>{(0,ge._)(Xe,Re,()=>{const pe=ae[Symbol.asyncIterator]();(0,ge._)(Xe,Re,()=>{pe.next().then(we=>{we.done?Xe.complete():Xe.next(we.value)})},0,!0)})})}var it=V(5099),Ie=V(5432),be=V(5428),pt=V(1688),Be=V(376),tt=V(8272),Ke=V(5832);function ke(ae,Re){return Re?function Ae(ae,Re){if(null!=ae){if((0,it.O)(ae))return function D(ae,Re){return(0,y.Uv)(ae).pipe((0,k.y)(Re),(0,q.y)(Re))}(ae,Re);if((0,be.G)(ae))return function Ee(ae,Re){return new _e._(Xe=>{let pe=0;return Re.schedule(function(){pe===ae.length?Xe.complete():(Xe.next(ae[pe++]),Xe.closed||this.schedule())})})}(ae,Re);if((0,Ie.u)(ae))return function W(ae,Re){return(0,y.Uv)(ae).pipe((0,k.y)(Re),(0,q.y)(Re))}(ae,Re);if((0,Be.E)(ae))return xe(ae,Re);if((0,pt.i)(ae))return function fe(ae,Re){return new _e._(Xe=>{let pe;return(0,ge._)(Xe,Re,()=>{pe=ae[Le.w](),(0,ge._)(Xe,Re,()=>{let we,Ve;try{({value:we,done:Ve}=pe.next())}catch(ze){return void Xe.error(ze)}Ve?Xe.complete():Xe.next(we)},0,!0)}),()=>(0,Pe.m)(pe?.return)&&pe.return()})}(ae,Re);if((0,Ke.K)(ae))return function st(ae,Re){return xe((0,Ke._)(ae),Re)}(ae,Re)}throw(0,tt.W)(ae)}(ae,Re):(0,y.Uv)(ae)}},560:(jt,He,V)=>{V.d(He,{Uv:()=>it});var y=V(1316),q=V(5428),k=V(5432),D=V(3252),W=V(5099),_e=V(376),Ee=V(8272),Le=V(1688),Pe=V(5832),ge=V(8880),fe=V(1984),xe=V(472);function it(Ae){if(Ae instanceof D._)return Ae;if(null!=Ae){if((0,W.O)(Ae))return function Ie(Ae){return new D._(ke=>{const ae=Ae[xe.a]();if((0,ge.m)(ae.subscribe))return ae.subscribe(ke);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,q.G)(Ae))return function be(Ae){return new D._(ke=>{for(let ae=0;ae<Ae.length&&!ke.closed;ae++)ke.next(Ae[ae]);ke.complete()})}(Ae);if((0,k.u)(Ae))return function pt(Ae){return new D._(ke=>{Ae.then(ae=>{ke.closed||(ke.next(ae),ke.complete())},ae=>ke.error(ae)).then(null,fe.U)})}(Ae);if((0,_e.E)(Ae))return tt(Ae);if((0,Le.i)(Ae))return function Be(Ae){return new D._(ke=>{for(const ae of Ae)if(ke.next(ae),ke.closed)return;ke.complete()})}(Ae);if((0,Pe.K)(Ae))return function Ke(Ae){return tt((0,Pe._)(Ae))}(Ae)}throw(0,Ee.W)(Ae)}function tt(Ae){return new D._(ke=>{(function st(Ae,ke){var ae,Re,Xe,pe;return(0,y.kH)(this,void 0,void 0,function*(){try{for(ae=(0,y.mA)(Ae);!(Re=yield ae.next()).done;)if(ke.next(Re.value),ke.closed)return}catch(we){Xe={error:we}}finally{try{Re&&!Re.done&&(pe=ae.return)&&(yield pe.call(ae))}finally{if(Xe)throw Xe.error}}ke.complete()})})(Ae,ke).catch(ae=>ke.error(ae))})}},2700:(jt,He,V)=>{V.d(He,{of:()=>k});var y=V(6624),q=V(9900);function k(...D){const W=(0,y.e_)(D);return(0,q.Q)(D,W)}},7773:(jt,He,V)=>{V.d(He,{e:()=>q});var y=V(1760);function q(D,W,_e,Ee,Le){return new k(D,W,_e,Ee,Le)}class k extends y.yR{constructor(W,_e,Ee,Le,Pe,ge){super(W),this.onFinalize=Pe,this.shouldUnsubscribe=ge,this._next=_e?function(fe){try{_e(fe)}catch(xe){W.error(xe)}}:super._next,this._error=Le?function(fe){try{Le(fe)}catch(xe){W.error(xe)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(fe){W.error(fe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var W;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(W=this.onFinalize)||void 0===W||W.call(this))}}}},9144:(jt,He,V)=>{V.d(He,{a:()=>D});var y=V(560),q=V(7773),k=V(5448);function D(W){return(0,k.i)((_e,Ee)=>{let ge,Le=null,Pe=!1;Le=_e.subscribe((0,q.e)(Ee,void 0,void 0,fe=>{ge=(0,y.Uv)(W(fe,D(W)(_e))),Le?(Le.unsubscribe(),Le=null,ge.subscribe(Ee)):Pe=!0})),Pe&&(Le.unsubscribe(),Le=null,ge.subscribe(Ee))})}},6020:(jt,He,V)=>{V.d(He,{m:()=>k});var y=V(7400),q=V(8880);function k(D,W){return(0,q.m)(W)?(0,y.O)(D,W,1):(0,y.O)(D,1)}},2156:(jt,He,V)=>{V.d(He,{G:()=>k});var y=V(5448),q=V(7773);function k(D){return(0,y.i)((W,_e)=>{let Ee=!1;W.subscribe((0,q.e)(_e,Le=>{Ee=!0,_e.next(Le)},()=>{Ee||_e.next(D),_e.complete()}))})}},6684:(jt,He,V)=>{V.d(He,{I:()=>k});var y=V(5448),q=V(7773);function k(D,W){return(0,y.i)((_e,Ee)=>{let Le=0;_e.subscribe((0,q.e)(Ee,Pe=>D.call(W,Pe,Le++)&&Ee.next(Pe)))})}},8824:(jt,He,V)=>{V.d(He,{U:()=>q});var y=V(5448);function q(k){return(0,y.i)((D,W)=>{try{D.subscribe(W)}finally{W.add(k)}})}},5084:(jt,He,V)=>{V.d(He,{K:()=>Ee});var y=V(7696),q=V(6684),k=V(3992),D=V(2156),W=V(8124),_e=V(528);function Ee(Le,Pe){const ge=arguments.length>=2;return fe=>fe.pipe(Le?(0,q.I)((xe,it)=>Le(xe,it,fe)):_e.Z,(0,k.U)(1),ge?(0,D.G)(Pe):(0,W._)(()=>new y.G))}},4704:(jt,He,V)=>{V.d(He,{k:()=>k});var y=V(5448),q=V(7773);function k(D,W){return(0,y.i)((_e,Ee)=>{let Le=0;_e.subscribe((0,q.e)(Ee,Pe=>{Ee.next(D.call(W,Pe,Le++))}))})}},267:(jt,He,V)=>{V.d(He,{u:()=>k});var y=V(7400),q=V(528);function k(D=1/0){return(0,y.O)(q.Z,D)}},7400:(jt,He,V)=>{V.d(He,{O:()=>Le});var y=V(4704),q=V(560),k=V(5448),D=V(9399),W=V(7773),Ee=V(8880);function Le(Pe,ge,fe=1/0){return(0,Ee.m)(ge)?Le((xe,it)=>(0,y.k)((Ie,be)=>ge(xe,Ie,it,be))((0,q.Uv)(Pe(xe,it))),fe):("number"==typeof ge&&(fe=ge),(0,k.i)((xe,it)=>function _e(Pe,ge,fe,xe,it,Ie,be,pt){const Be=[];let tt=0,Ke=0,st=!1;const Ae=()=>{st&&!Be.length&&!tt&&ge.complete()},ke=Re=>tt<xe?ae(Re):Be.push(Re),ae=Re=>{Ie&&ge.next(Re),tt++;let Xe=!1;(0,q.Uv)(fe(Re,Ke++)).subscribe((0,W.e)(ge,pe=>{it?.(pe),Ie?ke(pe):ge.next(pe)},()=>{Xe=!0},void 0,()=>{if(Xe)try{for(tt--;Be.length&&tt<xe;){const pe=Be.shift();be?(0,D._)(ge,be,()=>ae(pe)):ae(pe)}Ae()}catch(pe){ge.error(pe)}}))};return Pe.subscribe((0,W.e)(ge,ke,()=>{st=!0,Ae()})),()=>{pt?.()}}(xe,it,Pe,fe)))}},3920:(jt,He,V)=>{V.d(He,{y:()=>D});var y=V(9399),q=V(5448),k=V(7773);function D(W,_e=0){return(0,q.i)((Ee,Le)=>{Ee.subscribe((0,k.e)(Le,Pe=>(0,y._)(Le,W,()=>Le.next(Pe),_e),()=>(0,y._)(Le,W,()=>Le.complete(),_e),Pe=>(0,y._)(Le,W,()=>Le.error(Pe),_e)))})}},208:(jt,He,V)=>{V.d(He,{K:()=>D});var y=V(5448),q=V(7773);function D(W,_e){return(0,y.i)(function k(W,_e,Ee,Le,Pe){return(ge,fe)=>{let xe=Ee,it=_e,Ie=0;ge.subscribe((0,q.e)(fe,be=>{const pt=Ie++;it=xe?W(it,be,pt):(xe=!0,be),Le&&fe.next(it)},Pe&&(()=>{xe&&fe.next(it),fe.complete()})))}}(W,_e,arguments.length>=2,!0))}},5568:(jt,He,V)=>{V.d(He,{W:()=>D});var y=V(7228),q=V(6624),k=V(5448);function D(...W){const _e=(0,q.e_)(W);return(0,k.i)((Ee,Le)=>{(_e?(0,y.W)(W,Ee,_e):(0,y.W)(W,Ee)).subscribe(Le)})}},2924:(jt,He,V)=>{V.d(He,{y:()=>q});var y=V(5448);function q(k,D=0){return(0,y.i)((W,_e)=>{_e.add(k.schedule(()=>W.subscribe(_e),D))})}},7368:(jt,He,V)=>{V.d(He,{G:()=>D});var y=V(560),q=V(5448),k=V(7773);function D(W,_e){return(0,q.i)((Ee,Le)=>{let Pe=null,ge=0,fe=!1;const xe=()=>fe&&!Pe&&Le.complete();Ee.subscribe((0,k.e)(Le,it=>{Pe?.unsubscribe();let Ie=0;const be=ge++;(0,y.Uv)(W(it,be)).subscribe(Pe=(0,k.e)(Le,pt=>Le.next(_e?_e(it,pt,be,Ie++):pt),()=>{Pe=null,xe()}))},()=>{fe=!0,xe()}))})}},3992:(jt,He,V)=>{V.d(He,{U:()=>D});var y=V(8960),q=V(5448),k=V(7773);function D(W){return W<=0?()=>y.k:(0,q.i)((_e,Ee)=>{let Le=0;_e.subscribe((0,k.e)(Ee,Pe=>{++Le<=W&&(Ee.next(Pe),W<=Le&&Ee.complete())}))})}},9212:(jt,He,V)=>{V.d(He,{y:()=>W});var y=V(8880),q=V(5448),k=V(7773),D=V(528);function W(_e,Ee,Le){const Pe=(0,y.m)(_e)||Ee||Le?{next:_e,error:Ee,complete:Le}:_e;return Pe?(0,q.i)((ge,fe)=>{var xe;null===(xe=Pe.subscribe)||void 0===xe||xe.call(Pe);let it=!0;ge.subscribe((0,k.e)(fe,Ie=>{var be;null===(be=Pe.next)||void 0===be||be.call(Pe,Ie),fe.next(Ie)},()=>{var Ie;it=!1,null===(Ie=Pe.complete)||void 0===Ie||Ie.call(Pe),fe.complete()},Ie=>{var be;it=!1,null===(be=Pe.error)||void 0===be||be.call(Pe,Ie),fe.error(Ie)},()=>{var Ie,be;it&&(null===(Ie=Pe.unsubscribe)||void 0===Ie||Ie.call(Pe)),null===(be=Pe.finalize)||void 0===be||be.call(Pe)}))}):D.Z}},8124:(jt,He,V)=>{V.d(He,{_:()=>D});var y=V(7696),q=V(5448),k=V(7773);function D(_e=W){return(0,q.i)((Ee,Le)=>{let Pe=!1;Ee.subscribe((0,k.e)(Le,ge=>{Pe=!0,Le.next(ge)},()=>Pe?Le.complete():Le.error(_e())))})}function W(){return new y.G}},1364:(jt,He,V)=>{V.d(He,{m:()=>W});var y=V(6928);class q extends y.wH{constructor(Ee,Le){super()}schedule(Ee,Le=0){return this}}const k={setInterval(_e,Ee,...Le){const{delegate:Pe}=k;return Pe?.setInterval?Pe.setInterval(_e,Ee,...Le):setInterval(_e,Ee,...Le)},clearInterval(_e){const{delegate:Ee}=k;return(Ee?.clearInterval||clearInterval)(_e)},delegate:void 0};var D=V(1248);class W extends q{constructor(Ee,Le){super(Ee,Le),this.scheduler=Ee,this.work=Le,this.pending=!1}schedule(Ee,Le=0){var Pe;if(this.closed)return this;this.state=Ee;const ge=this.id,fe=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(fe,ge,Le)),this.pending=!0,this.delay=Le,this.id=null!==(Pe=this.id)&&void 0!==Pe?Pe:this.requestAsyncId(fe,this.id,Le),this}requestAsyncId(Ee,Le,Pe=0){return k.setInterval(Ee.flush.bind(Ee,this),Pe)}recycleAsyncId(Ee,Le,Pe=0){if(null!=Pe&&this.delay===Pe&&!1===this.pending)return Le;null!=Le&&k.clearInterval(Le)}execute(Ee,Le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Pe=this._execute(Ee,Le);if(Pe)return Pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,Le){let ge,Pe=!1;try{this.work(Ee)}catch(fe){Pe=!0,ge=fe||new Error("Scheduled action threw falsy error")}if(Pe)return this.unsubscribe(),ge}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:Le}=this,{actions:Pe}=Le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,D.k)(Pe,this),null!=Ee&&(this.id=this.recycleAsyncId(Le,Ee,null)),this.delay=null,super.unsubscribe()}}}},9816:(jt,He,V)=>{V.d(He,{k:()=>k});var y=V(5960);class q{constructor(W,_e=q.now){this.schedulerActionCtor=W,this.now=_e}schedule(W,_e=0,Ee){return new this.schedulerActionCtor(this,W).schedule(Ee,_e)}}q.now=y.K.now;class k extends q{constructor(W,_e=q.now){super(W,_e),this.actions=[],this._active=!1}flush(W){const{actions:_e}=this;if(this._active)return void _e.push(W);let Ee;this._active=!0;do{if(Ee=W.execute(W.state,W.delay))break}while(W=_e.shift());if(this._active=!1,Ee){for(;W=_e.shift();)W.unsubscribe();throw Ee}}}},112:(jt,He,V)=>{V.d(He,{M:()=>k,a:()=>D});var y=V(1364);const k=new(V(9816).k)(y.m),D=k},5960:(jt,He,V)=>{V.d(He,{K:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3376:(jt,He,V)=>{V.d(He,{u:()=>y});const y={setTimeout(q,k,...D){const{delegate:W}=y;return W?.setTimeout?W.setTimeout(q,k,...D):setTimeout(q,k,...D)},clearTimeout(q){const{delegate:k}=y;return(k?.clearTimeout||clearTimeout)(q)},delegate:void 0}},3835:(jt,He,V)=>{V.d(He,{w:()=>q});const q=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},472:(jt,He,V)=>{V.d(He,{a:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},7696:(jt,He,V)=>{V.d(He,{G:()=>q});const q=(0,V(4912).w)(k=>function(){k(this),this.name="EmptyError",this.message="no elements in sequence"})},6624:(jt,He,V)=>{V.d(He,{_8:()=>_e,e_:()=>W,yu:()=>D});var y=V(8880),q=V(3048);function k(Ee){return Ee[Ee.length-1]}function D(Ee){return(0,y.m)(k(Ee))?Ee.pop():void 0}function W(Ee){return(0,q.G)(k(Ee))?Ee.pop():void 0}function _e(Ee,Le){return"number"==typeof k(Ee)?Ee.pop():Le}},4300:(jt,He,V)=>{V.d(He,{Q:()=>W});const{isArray:y}=Array,{getPrototypeOf:q,prototype:k,keys:D}=Object;function W(Ee){if(1===Ee.length){const Le=Ee[0];if(y(Le))return{args:Le,keys:null};if(function _e(Ee){return Ee&&"object"==typeof Ee&&q(Ee)===k}(Le)){const Pe=D(Le);return{args:Pe.map(ge=>Le[ge]),keys:Pe}}}return{args:Ee,keys:null}}},1248:(jt,He,V)=>{function y(q,k){if(q){const D=q.indexOf(k);0<=D&&q.splice(D,1)}}V.d(He,{k:()=>y})},4912:(jt,He,V)=>{function y(q){const D=q(W=>{Error.call(W),W.stack=(new Error).stack});return D.prototype=Object.create(Error.prototype),D.prototype.constructor=D,D}V.d(He,{w:()=>y})},7904:(jt,He,V)=>{function y(q,k){return q.reduce((D,W,_e)=>(D[W]=k[_e],D),{})}V.d(He,{q:()=>y})},2075:(jt,He,V)=>{V.d(He,{c:()=>k,q:()=>D});var y=V(4491);let q=null;function k(W){if(y.config.useDeprecatedSynchronousErrorHandling){const _e=!q;if(_e&&(q={errorThrown:!1,error:null}),W(),_e){const{errorThrown:Ee,error:Le}=q;if(q=null,Ee)throw Le}}else W()}function D(W){y.config.useDeprecatedSynchronousErrorHandling&&q&&(q.errorThrown=!0,q.error=W)}},9399:(jt,He,V)=>{function y(q,k,D,W=0,_e=!1){const Ee=k.schedule(function(){D(),_e?q.add(this.schedule(null,W)):this.unsubscribe()},W);if(q.add(Ee),!_e)return Ee}V.d(He,{_:()=>y})},528:(jt,He,V)=>{function y(q){return q}V.d(He,{Z:()=>y})},5428:(jt,He,V)=>{V.d(He,{G:()=>y});const y=q=>q&&"number"==typeof q.length&&"function"!=typeof q},376:(jt,He,V)=>{V.d(He,{E:()=>q});var y=V(8880);function q(k){return Symbol.asyncIterator&&(0,y.m)(k?.[Symbol.asyncIterator])}},8880:(jt,He,V)=>{function y(q){return"function"==typeof q}V.d(He,{m:()=>y})},5099:(jt,He,V)=>{V.d(He,{O:()=>k});var y=V(472),q=V(8880);function k(D){return(0,q.m)(D[y.a])}},1688:(jt,He,V)=>{V.d(He,{i:()=>k});var y=V(3835),q=V(8880);function k(D){return(0,q.m)(D?.[y.w])}},5432:(jt,He,V)=>{V.d(He,{u:()=>q});var y=V(8880);function q(k){return(0,y.m)(k?.then)}},5832:(jt,He,V)=>{V.d(He,{K:()=>D,_:()=>k});var y=V(1316),q=V(8880);function k(W){return(0,y.o7)(this,arguments,function*(){const Ee=W.getReader();try{for(;;){const{value:Le,done:Pe}=yield(0,y.U1)(Ee.read());if(Pe)return yield(0,y.U1)(void 0);yield yield(0,y.U1)(Le)}}finally{Ee.releaseLock()}})}function D(W){return(0,q.m)(W?.getReader)}},3048:(jt,He,V)=>{V.d(He,{G:()=>q});var y=V(8880);function q(k){return k&&(0,y.m)(k.schedule)}},5448:(jt,He,V)=>{V.d(He,{e:()=>q,i:()=>k});var y=V(8880);function q(D){return(0,y.m)(D?.lift)}function k(D){return W=>{if(q(W))return W.lift(function(_e){try{return D(_e,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},4187:(jt,He,V)=>{V.d(He,{j:()=>D});var y=V(4704);const{isArray:q}=Array;function D(W){return(0,y.k)(_e=>function k(W,_e){return q(_e)?W(..._e):W(_e)}(W,_e))}},308:(jt,He,V)=>{function y(){}V.d(He,{K:()=>y})},3928:(jt,He,V)=>{V.d(He,{W:()=>q,Y:()=>k});var y=V(528);function q(...D){return k(D)}function k(D){return 0===D.length?y.Z:1===D.length?D[0]:function(_e){return D.reduce((Ee,Le)=>Le(Ee),_e)}}},1984:(jt,He,V)=>{V.d(He,{U:()=>k});var y=V(4491),q=V(3376);function k(D){q.u.setTimeout(()=>{const{onUnhandledError:W}=y.config;if(!W)throw D;W(D)})}},8272:(jt,He,V)=>{function y(q){return new TypeError(`You provided ${null!==q&&"object"==typeof q?"an invalid object":`'${q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(He,{W:()=>y})},9684:(jt,He,V)=>{V.d(He,{AN:()=>q,Cs:()=>D,K2:()=>Le,Wq:()=>Xe,aK:()=>ge,aM:()=>pe,gV:()=>k,iC:()=>_e,kP:()=>Re,m0:()=>y,wb:()=>Ee});var y=function(we){return we[we.State=0]="State",we[we.Transition=1]="Transition",we[we.Sequence=2]="Sequence",we[we.Group=3]="Group",we[we.Animate=4]="Animate",we[we.Keyframes=5]="Keyframes",we[we.Style=6]="Style",we[we.Trigger=7]="Trigger",we[we.Reference=8]="Reference",we[we.AnimateChild=9]="AnimateChild",we[we.AnimateRef=10]="AnimateRef",we[we.Query=11]="Query",we[we.Stagger=12]="Stagger",we}(y||{});const q="*";function k(we,Ve){return{type:y.Trigger,name:we,definitions:Ve,options:{}}}function D(we,Ve=null){return{type:y.Animate,styles:Ve,timings:we}}function _e(we,Ve=null){return{type:y.Sequence,steps:we,options:Ve}}function Ee(we){return{type:y.Style,styles:we,offset:null}}function Le(we,Ve,ze){return{type:y.State,name:we,styles:Ve,options:ze}}function ge(we,Ve,ze=null){return{type:y.Transition,expr:we,animation:Ve,options:ze}}class Re{constructor(Ve=0,ze=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ve+ze}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ve=>Ve()),this._onDoneFns=[])}onStart(Ve){this._originalOnStartFns.push(Ve),this._onStartFns.push(Ve)}onDone(Ve){this._originalOnDoneFns.push(Ve),this._onDoneFns.push(Ve)}onDestroy(Ve){this._onDestroyFns.push(Ve)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ve=>Ve()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ve=>Ve()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Ve){this._position=this.totalTime?Ve*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ve){const ze="start"==Ve?this._onStartFns:this._onDoneFns;ze.forEach(at=>at()),ze.length=0}}class Xe{constructor(Ve){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ve;let ze=0,at=0,wt=0;const Tt=this.players.length;0==Tt?queueMicrotask(()=>this._onFinish()):this.players.forEach(mt=>{mt.onDone(()=>{++ze==Tt&&this._onFinish()}),mt.onDestroy(()=>{++at==Tt&&this._onDestroy()}),mt.onStart(()=>{++wt==Tt&&this._onStart()})}),this.totalTime=this.players.reduce((mt,Lt)=>Math.max(mt,Lt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ve=>Ve()),this._onDoneFns=[])}init(){this.players.forEach(Ve=>Ve.init())}onStart(Ve){this._onStartFns.push(Ve)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ve=>Ve()),this._onStartFns=[])}onDone(Ve){this._onDoneFns.push(Ve)}onDestroy(Ve){this._onDestroyFns.push(Ve)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ve=>Ve.play())}pause(){this.players.forEach(Ve=>Ve.pause())}restart(){this.players.forEach(Ve=>Ve.restart())}finish(){this._onFinish(),this.players.forEach(Ve=>Ve.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ve=>Ve.destroy()),this._onDestroyFns.forEach(Ve=>Ve()),this._onDestroyFns=[])}reset(){this.players.forEach(Ve=>Ve.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ve){const ze=Ve*this.totalTime;this.players.forEach(at=>{const wt=at.totalTime?Math.min(1,ze/at.totalTime):1;at.setPosition(wt)})}getPosition(){const Ve=this.players.reduce((ze,at)=>null===ze||at.totalTime>ze.totalTime?at:ze,null);return null!=Ve?Ve.getPosition():0}beforeDestroy(){this.players.forEach(Ve=>{Ve.beforeDestroy&&Ve.beforeDestroy()})}triggerCallback(Ve){const ze="start"==Ve?this._onStartFns:this._onDoneFns;ze.forEach(at=>at()),ze.length=0}}const pe="!"},1368:(jt,He,V)=>{V.d(He,{MD:()=>_i,MP:()=>Be,OM:()=>Ko,QF:()=>kt,Qd:()=>Ie,Sg:()=>Te,Ud:()=>Ee,YZ:()=>qo,_k:()=>Ls,a:()=>Yr,ay:()=>Yn,mQ:()=>Pe,mg:()=>W,oB:()=>tt,qq:()=>wo,uC:()=>pt,u_:()=>$n,uf:()=>Si,ug:()=>D,uy:()=>k});var y=V(4496);let q=null;function k(){return q}function D(P){q??=P}class W{}const Ee=new y.UbH("");let Le=(()=>{class P{historyGo(F){throw new Error("")}static#e=this.\u0275fac=function(z){return new(z||P)};static#t=this.\u0275prov=y.wxM({token:P,factory:()=>(0,y.uUt)(ge),providedIn:"platform"})}return P})();const Pe=new y.UbH("");let ge=(()=>{class P extends Le{constructor(){super(),this._doc=(0,y.uUt)(Ee),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(F){const z=k().getGlobalEventTarget(this._doc,"window");return z.addEventListener("popstate",F,!1),()=>z.removeEventListener("popstate",F)}onHashChange(F){const z=k().getGlobalEventTarget(this._doc,"window");return z.addEventListener("hashchange",F,!1),()=>z.removeEventListener("hashchange",F)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(F){this._location.pathname=F}pushState(F,z,me){this._history.pushState(F,z,me)}replaceState(F,z,me){this._history.replaceState(F,z,me)}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}static#e=this.\u0275fac=function(z){return new(z||P)};static#t=this.\u0275prov=y.wxM({token:P,factory:()=>new P,providedIn:"platform"})}return P})();function fe(P,Q){if(0==P.length)return Q;if(0==Q.length)return P;let F=0;return P.endsWith("/")&&F++,Q.startsWith("/")&&F++,2==F?P+Q.substring(1):1==F?P+Q:P+"/"+Q}function xe(P){const Q=P.match(/#|\?|$/),F=Q&&Q.index||P.length;return P.slice(0,F-("/"===P[F-1]?1:0))+P.slice(F)}function it(P){return P&&"?"!==P[0]?"?"+P:P}let Ie=(()=>{class P{historyGo(F){throw new Error("")}static#e=this.\u0275fac=function(z){return new(z||P)};static#t=this.\u0275prov=y.wxM({token:P,factory:()=>(0,y.uUt)(pt),providedIn:"root"})}return P})();const be=new y.UbH("");let pt=(()=>{class P extends Ie{constructor(F,z){super(),this._platformLocation=F,this._removeListenerFns=[],this._baseHref=z??this._platformLocation.getBaseHrefFromDOM()??(0,y.uUt)(Ee).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return fe(this._baseHref,F)}path(F=!1){const z=this._platformLocation.pathname+it(this._platformLocation.search),me=this._platformLocation.hash;return me&&F?`${z}${me}`:z}pushState(F,z,me,ot){const vt=this.prepareExternalUrl(me+it(ot));this._platformLocation.pushState(F,z,vt)}replaceState(F,z,me,ot){const vt=this.prepareExternalUrl(me+it(ot));this._platformLocation.replaceState(F,z,vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){this._platformLocation.historyGo?.(F)}static#e=this.\u0275fac=function(z){return new(z||P)(y.CoB(Le),y.CoB(be,8))};static#t=this.\u0275prov=y.wxM({token:P,factory:P.\u0275fac,providedIn:"root"})}return P})(),Be=(()=>{class P extends Ie{constructor(F,z){super(),this._platformLocation=F,this._baseHref="",this._removeListenerFns=[],null!=z&&(this._baseHref=z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}path(F=!1){const z=this._platformLocation.hash??"#";return z.length>0?z.substring(1):z}prepareExternalUrl(F){const z=fe(this._baseHref,F);return z.length>0?"#"+z:z}pushState(F,z,me,ot){let vt=this.prepareExternalUrl(me+it(ot));0==vt.length&&(vt=this._platformLocation.pathname),this._platformLocation.pushState(F,z,vt)}replaceState(F,z,me,ot){let vt=this.prepareExternalUrl(me+it(ot));0==vt.length&&(vt=this._platformLocation.pathname),this._platformLocation.replaceState(F,z,vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){this._platformLocation.historyGo?.(F)}static#e=this.\u0275fac=function(z){return new(z||P)(y.CoB(Le),y.CoB(be,8))};static#t=this.\u0275prov=y.wxM({token:P,factory:P.\u0275fac})}return P})(),tt=(()=>{class P{constructor(F){this._subject=new y._w7,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=F;const z=this._locationStrategy.getBaseHref();this._basePath=function ke(P){if(new RegExp("^(https?:)?//").test(P)){const[,F]=P.split(/\/\/[^\/]+/);return F}return P}(xe(Ae(z))),this._locationStrategy.onPopState(me=>{this._subject.emit({url:this.path(!0),pop:!0,state:me.state,type:me.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(F=!1){return this.normalize(this._locationStrategy.path(F))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(F,z=""){return this.path()==this.normalize(F+it(z))}normalize(F){return P.stripTrailingSlash(function st(P,Q){if(!P||!Q.startsWith(P))return Q;const F=Q.substring(P.length);return""===F||["/",";","?","#"].includes(F[0])?F:Q}(this._basePath,Ae(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._locationStrategy.prepareExternalUrl(F)}go(F,z="",me=null){this._locationStrategy.pushState(me,"",F,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+it(z)),me)}replaceState(F,z="",me=null){this._locationStrategy.replaceState(me,"",F,z),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+it(z)),me)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(F=0){this._locationStrategy.historyGo?.(F)}onUrlChange(F){return this._urlChangeListeners.push(F),this._urlChangeSubscription??=this.subscribe(z=>{this._notifyUrlChangeListeners(z.url,z.state)}),()=>{const z=this._urlChangeListeners.indexOf(F);this._urlChangeListeners.splice(z,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(F="",z){this._urlChangeListeners.forEach(me=>me(F,z))}subscribe(F,z,me){return this._subject.subscribe({next:F,error:z,complete:me})}static#e=this.normalizeQueryParams=it;static#t=this.joinWithSlash=fe;static#n=this.stripTrailingSlash=xe;static#r=this.\u0275fac=function(z){return new(z||P)(y.CoB(Ie))};static#i=this.\u0275prov=y.wxM({token:P,factory:()=>function Ke(){return new tt((0,y.CoB)(Ie))}(),providedIn:"root"})}return P})();function Ae(P){return P.replace(/\/index.html$/,"")}function Te(P,Q){Q=encodeURIComponent(Q);for(const F of P.split(";")){const z=F.indexOf("="),[me,ot]=-1==z?[F,""]:[F.slice(0,z),F.slice(z+1)];if(me.trim()===Q)return decodeURIComponent(ot)}return null}const yt=/\s+/,Dt=[];let kt=(()=>{class P{constructor(F,z){this._ngEl=F,this._renderer=z,this.initialClasses=Dt,this.stateMap=new Map}set klass(F){this.initialClasses=null!=F?F.trim().split(yt):Dt}set ngClass(F){this.rawClass="string"==typeof F?F.trim().split(yt):F}ngDoCheck(){for(const z of this.initialClasses)this._updateState(z,!0);const F=this.rawClass;if(Array.isArray(F)||F instanceof Set)for(const z of F)this._updateState(z,!0);else if(null!=F)for(const z of Object.keys(F))this._updateState(z,!!F[z]);this._applyStateDiff()}_updateState(F,z){const me=this.stateMap.get(F);void 0!==me?(me.enabled!==z&&(me.changed=!0,me.enabled=z),me.touched=!0):this.stateMap.set(F,{enabled:z,changed:!0,touched:!0})}_applyStateDiff(){for(const F of this.stateMap){const z=F[0],me=F[1];me.changed?(this._toggleClass(z,me.enabled),me.changed=!1):me.touched||(me.enabled&&this._toggleClass(z,!1),this.stateMap.delete(z)),me.touched=!1}}_toggleClass(F,z){(F=F.trim()).length>0&&F.split(yt).forEach(me=>{z?this._renderer.addClass(this._ngEl.nativeElement,me):this._renderer.removeClass(this._ngEl.nativeElement,me)})}static#e=this.\u0275fac=function(z){return new(z||P)(y.GI1(y.GMv),y.GI1(y.q87))};static#t=this.\u0275dir=y.Sc5({type:P,selectors:[["","ngClass",""]],inputs:{klass:[y.Wk5.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return P})();class cn{constructor(Q,F,z,me){this.$implicit=Q,this.ngForOf=F,this.index=z,this.count=me}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Yn=(()=>{class P{set ngForOf(F){this._ngForOf=F,this._ngForOfDirty=!0}set ngForTrackBy(F){this._trackByFn=F}get ngForTrackBy(){return this._trackByFn}constructor(F,z,me){this._viewContainer=F,this._template=z,this._differs=me,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(F){F&&(this._template=F)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const F=this._ngForOf;!this._differ&&F&&(this._differ=this._differs.find(F).create(this.ngForTrackBy))}if(this._differ){const F=this._differ.diff(this._ngForOf);F&&this._applyChanges(F)}}_applyChanges(F){const z=this._viewContainer;F.forEachOperation((me,ot,vt)=>{if(null==me.previousIndex)z.createEmbeddedView(this._template,new cn(me.item,this._ngForOf,-1,-1),null===vt?void 0:vt);else if(null==vt)z.remove(null===ot?void 0:ot);else if(null!==ot){const dn=z.get(ot);z.move(dn,vt),Ar(dn,me)}});for(let me=0,ot=z.length;me<ot;me++){const dn=z.get(me).context;dn.index=me,dn.count=ot,dn.ngForOf=this._ngForOf}F.forEachIdentityChange(me=>{Ar(z.get(me.currentIndex),me)})}static ngTemplateContextGuard(F,z){return!0}static#e=this.\u0275fac=function(z){return new(z||P)(y.GI1(y.y8U),y.GI1(y.Yw2),y.GI1(y.Uj7))};static#t=this.\u0275dir=y.Sc5({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return P})();function Ar(P,Q){P.context.$implicit=Q.item}let $n=(()=>{class P{constructor(F,z){this._viewContainer=F,this._context=new cs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=z}set ngIf(F){this._context.$implicit=this._context.ngIf=F,this._updateView()}set ngIfThen(F){Oi("ngIfThen",F),this._thenTemplateRef=F,this._thenViewRef=null,this._updateView()}set ngIfElse(F){Oi("ngIfElse",F),this._elseTemplateRef=F,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(F,z){return!0}static#e=this.\u0275fac=function(z){return new(z||P)(y.GI1(y.y8U),y.GI1(y.Yw2))};static#t=this.\u0275dir=y.Sc5({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return P})();class cs{constructor(){this.$implicit=null,this.ngIf=null}}function Oi(P,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,y.GEN)(Q)}'.`)}function Ki(P,Q){return new y.OBp(2100,!1)}class Wo{createSubscription(Q,F){return(0,y.sRj)(()=>Q.subscribe({next:F,error:z=>{throw z}}))}dispose(Q){(0,y.sRj)(()=>Q.unsubscribe())}}class yc{createSubscription(Q,F){return Q.then(F,z=>{throw z})}dispose(Q){}}const rr=new yc,ki=new Wo;let Yr=(()=>{class P{constructor(F){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=F}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(F){return this._obj?F!==this._obj?(this._dispose(),this.transform(F)):this._latestValue:(F&&this._subscribe(F),this._latestValue)}_subscribe(F){this._obj=F,this._strategy=this._selectStrategy(F),this._subscription=this._strategy.createSubscription(F,z=>this._updateLatestValue(F,z))}_selectStrategy(F){if((0,y.w5$)(F))return rr;if((0,y.gX2)(F))return ki;throw Ki()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(F,z){F===this._obj&&(this._latestValue=z,this._ref.markForCheck())}static#e=this.\u0275fac=function(z){return new(z||P)(y.GI1(y.kD9,16))};static#t=this.\u0275pipe=y.UTH({name:"async",type:P,pure:!1,standalone:!0})}return P})(),wo=(()=>{class P{transform(F,z,me){if(null==F)return null;if(!this.supports(F))throw Ki();return F.slice(z,me)}supports(F){return"string"==typeof F||Array.isArray(F)}static#e=this.\u0275fac=function(z){return new(z||P)};static#t=this.\u0275pipe=y.UTH({name:"slice",type:P,pure:!1,standalone:!0})}return P})(),_i=(()=>{class P{static#e=this.\u0275fac=function(z){return new(z||P)};static#t=this.\u0275mod=y.a4G({type:P});static#n=this.\u0275inj=y.s3X({})}return P})();const Ls="browser",Vs="server";function Si(P){return P===Vs}let qo=(()=>{class P{static#e=this.\u0275prov=(0,y.wxM)({token:P,providedIn:"root",factory:()=>function is(P){return P===Ls}((0,y.uUt)(y.AHE))?new Bs((0,y.uUt)(Ee),window):new Na})}return P})();class Bs{constructor(Q,F){this.document=Q,this.window=F,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(Q){this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){const F=function Ji(P,Q){const F=P.getElementById(Q)||P.getElementsByName(Q)[0];if(F)return F;if("function"==typeof P.createTreeWalker&&P.body&&"function"==typeof P.body.attachShadow){const z=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let me=z.currentNode;for(;me;){const ot=me.shadowRoot;if(ot){const vt=ot.getElementById(Q)||ot.querySelector(`[name="${Q}"]`);if(vt)return vt}me=z.nextNode()}}return null}(this.document,Q);F&&(this.scrollToElement(F),F.focus())}setHistoryScrollRestoration(Q){this.window.history.scrollRestoration=Q}scrollToElement(Q){const F=Q.getBoundingClientRect(),z=F.left+this.window.pageXOffset,me=F.top+this.window.pageYOffset,ot=this.offset();this.window.scrollTo(z-ot[0],me-ot[1])}}class Na{setOffset(Q){}getScrollPosition(){return[0,0]}scrollToPosition(Q){}scrollToAnchor(Q){}setHistoryScrollRestoration(Q){}}class Ko{}},7048:(jt,He,V)=>{V.d(He,{KK:()=>lt,SU:()=>wn}),V(1528);var q=V(4496),k=V(2700),D=V(3252),W=V(9900),_e=V(6020),Ee=V(6684),Le=V(4704),Pe=V(8824),ge=V(7368),fe=V(1368);class xe{}class it{}class Ie{constructor(Ce){this.normalizedNames=new Map,this.lazyUpdate=null,Ce?"string"==typeof Ce?this.lazyInit=()=>{this.headers=new Map,Ce.split("\n").forEach(Te=>{const yt=Te.indexOf(":");if(yt>0){const Dt=Te.slice(0,yt),kt=Dt.toLowerCase(),zt=Te.slice(yt+1).trim();this.maybeSetNormalizedName(Dt,kt),this.headers.has(kt)?this.headers.get(kt).push(zt):this.headers.set(kt,[zt])}})}:typeof Headers<"u"&&Ce instanceof Headers?(this.headers=new Map,Ce.forEach((Te,yt)=>{this.setHeaderEntries(yt,Te)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(Ce).forEach(([Te,yt])=>{this.setHeaderEntries(Te,yt)})}:this.headers=new Map}has(Ce){return this.init(),this.headers.has(Ce.toLowerCase())}get(Ce){this.init();const Te=this.headers.get(Ce.toLowerCase());return Te&&Te.length>0?Te[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ce){return this.init(),this.headers.get(Ce.toLowerCase())||null}append(Ce,Te){return this.clone({name:Ce,value:Te,op:"a"})}set(Ce,Te){return this.clone({name:Ce,value:Te,op:"s"})}delete(Ce,Te){return this.clone({name:Ce,value:Te,op:"d"})}maybeSetNormalizedName(Ce,Te){this.normalizedNames.has(Te)||this.normalizedNames.set(Te,Ce)}init(){this.lazyInit&&(this.lazyInit instanceof Ie?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ce=>this.applyUpdate(Ce)),this.lazyUpdate=null))}copyFrom(Ce){Ce.init(),Array.from(Ce.headers.keys()).forEach(Te=>{this.headers.set(Te,Ce.headers.get(Te)),this.normalizedNames.set(Te,Ce.normalizedNames.get(Te))})}clone(Ce){const Te=new Ie;return Te.lazyInit=this.lazyInit&&this.lazyInit instanceof Ie?this.lazyInit:this,Te.lazyUpdate=(this.lazyUpdate||[]).concat([Ce]),Te}applyUpdate(Ce){const Te=Ce.name.toLowerCase();switch(Ce.op){case"a":case"s":let yt=Ce.value;if("string"==typeof yt&&(yt=[yt]),0===yt.length)return;this.maybeSetNormalizedName(Ce.name,Te);const Dt=("a"===Ce.op?this.headers.get(Te):void 0)||[];Dt.push(...yt),this.headers.set(Te,Dt);break;case"d":const kt=Ce.value;if(kt){let zt=this.headers.get(Te);if(!zt)return;zt=zt.filter(gn=>-1===kt.indexOf(gn)),0===zt.length?(this.headers.delete(Te),this.normalizedNames.delete(Te)):this.headers.set(Te,zt)}else this.headers.delete(Te),this.normalizedNames.delete(Te)}}setHeaderEntries(Ce,Te){const yt=(Array.isArray(Te)?Te:[Te]).map(kt=>kt.toString()),Dt=Ce.toLowerCase();this.headers.set(Dt,yt),this.maybeSetNormalizedName(Ce,Dt)}forEach(Ce){this.init(),Array.from(this.normalizedNames.keys()).forEach(Te=>Ce(this.normalizedNames.get(Te),this.headers.get(Te)))}}class pt{encodeKey(Ce){return st(Ce)}encodeValue(Ce){return st(Ce)}decodeKey(Ce){return decodeURIComponent(Ce)}decodeValue(Ce){return decodeURIComponent(Ce)}}const tt=/%(\d[a-f0-9])/gi,Ke={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function st(le){return encodeURIComponent(le).replace(tt,(Ce,Te)=>Ke[Te]??Ce)}function Ae(le){return`${le}`}class ke{constructor(Ce={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ce.encoder||new pt,Ce.fromString){if(Ce.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Be(le,Ce){const Te=new Map;return le.length>0&&le.replace(/^\?/,"").split("&").forEach(Dt=>{const kt=Dt.indexOf("="),[zt,gn]=-1==kt?[Ce.decodeKey(Dt),""]:[Ce.decodeKey(Dt.slice(0,kt)),Ce.decodeValue(Dt.slice(kt+1))],cn=Te.get(zt)||[];cn.push(gn),Te.set(zt,cn)}),Te}(Ce.fromString,this.encoder)}else Ce.fromObject?(this.map=new Map,Object.keys(Ce.fromObject).forEach(Te=>{const yt=Ce.fromObject[Te],Dt=Array.isArray(yt)?yt.map(Ae):[Ae(yt)];this.map.set(Te,Dt)})):this.map=null}has(Ce){return this.init(),this.map.has(Ce)}get(Ce){this.init();const Te=this.map.get(Ce);return Te?Te[0]:null}getAll(Ce){return this.init(),this.map.get(Ce)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ce,Te){return this.clone({param:Ce,value:Te,op:"a"})}appendAll(Ce){const Te=[];return Object.keys(Ce).forEach(yt=>{const Dt=Ce[yt];Array.isArray(Dt)?Dt.forEach(kt=>{Te.push({param:yt,value:kt,op:"a"})}):Te.push({param:yt,value:Dt,op:"a"})}),this.clone(Te)}set(Ce,Te){return this.clone({param:Ce,value:Te,op:"s"})}delete(Ce,Te){return this.clone({param:Ce,value:Te,op:"d"})}toString(){return this.init(),this.keys().map(Ce=>{const Te=this.encoder.encodeKey(Ce);return this.map.get(Ce).map(yt=>Te+"="+this.encoder.encodeValue(yt)).join("&")}).filter(Ce=>""!==Ce).join("&")}clone(Ce){const Te=new ke({encoder:this.encoder});return Te.cloneFrom=this.cloneFrom||this,Te.updates=(this.updates||[]).concat(Ce),Te}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ce=>this.map.set(Ce,this.cloneFrom.map.get(Ce))),this.updates.forEach(Ce=>{switch(Ce.op){case"a":case"s":const Te=("a"===Ce.op?this.map.get(Ce.param):void 0)||[];Te.push(Ae(Ce.value)),this.map.set(Ce.param,Te);break;case"d":if(void 0===Ce.value){this.map.delete(Ce.param);break}{let yt=this.map.get(Ce.param)||[];const Dt=yt.indexOf(Ae(Ce.value));-1!==Dt&&yt.splice(Dt,1),yt.length>0?this.map.set(Ce.param,yt):this.map.delete(Ce.param)}}}),this.cloneFrom=this.updates=null)}}class Re{constructor(){this.map=new Map}set(Ce,Te){return this.map.set(Ce,Te),this}get(Ce){return this.map.has(Ce)||this.map.set(Ce,Ce.defaultValue()),this.map.get(Ce)}delete(Ce){return this.map.delete(Ce),this}has(Ce){return this.map.has(Ce)}keys(){return this.map.keys()}}function pe(le){return typeof ArrayBuffer<"u"&&le instanceof ArrayBuffer}function we(le){return typeof Blob<"u"&&le instanceof Blob}function Ve(le){return typeof FormData<"u"&&le instanceof FormData}class at{constructor(Ce,Te,yt,Dt){let kt;if(this.url=Te,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ce.toUpperCase(),function Xe(le){switch(le){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Dt?(this.body=void 0!==yt?yt:null,kt=Dt):kt=yt,kt&&(this.reportProgress=!!kt.reportProgress,this.withCredentials=!!kt.withCredentials,kt.responseType&&(this.responseType=kt.responseType),kt.headers&&(this.headers=kt.headers),kt.context&&(this.context=kt.context),kt.params&&(this.params=kt.params),this.transferCache=kt.transferCache),this.headers??=new Ie,this.context??=new Re,this.params){const zt=this.params.toString();if(0===zt.length)this.urlWithParams=Te;else{const gn=Te.indexOf("?");this.urlWithParams=Te+(-1===gn?"?":gn<Te.length-1?"&":"")+zt}}else this.params=new ke,this.urlWithParams=Te}serializeBody(){return null===this.body?null:pe(this.body)||we(this.body)||Ve(this.body)||function ze(le){return typeof URLSearchParams<"u"&&le instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ke?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ve(this.body)?null:we(this.body)?this.body.type||null:pe(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ke?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ce={}){const Te=Ce.method||this.method,yt=Ce.url||this.url,Dt=Ce.responseType||this.responseType,kt=void 0!==Ce.body?Ce.body:this.body,zt=void 0!==Ce.withCredentials?Ce.withCredentials:this.withCredentials,gn=void 0!==Ce.reportProgress?Ce.reportProgress:this.reportProgress;let cn=Ce.headers||this.headers,Yn=Ce.params||this.params;const Ar=Ce.context??this.context;return void 0!==Ce.setHeaders&&(cn=Object.keys(Ce.setHeaders).reduce((ur,$n)=>ur.set($n,Ce.setHeaders[$n]),cn)),Ce.setParams&&(Yn=Object.keys(Ce.setParams).reduce((ur,$n)=>ur.set($n,Ce.setParams[$n]),Yn)),new at(Te,yt,kt,{params:Yn,headers:cn,context:Ar,reportProgress:gn,responseType:Dt,withCredentials:zt})}}var wt=function(le){return le[le.Sent=0]="Sent",le[le.UploadProgress=1]="UploadProgress",le[le.ResponseHeader=2]="ResponseHeader",le[le.DownloadProgress=3]="DownloadProgress",le[le.Response=4]="Response",le[le.User=5]="User",le}(wt||{});class Tt{constructor(Ce,Te=Ue.Ok,yt="OK"){this.headers=Ce.headers||new Ie,this.status=void 0!==Ce.status?Ce.status:Te,this.statusText=Ce.statusText||yt,this.url=Ce.url||null,this.ok=this.status>=200&&this.status<300}}class mt extends Tt{constructor(Ce={}){super(Ce),this.type=wt.ResponseHeader}clone(Ce={}){return new mt({headers:Ce.headers||this.headers,status:void 0!==Ce.status?Ce.status:this.status,statusText:Ce.statusText||this.statusText,url:Ce.url||this.url||void 0})}}class Lt extends Tt{constructor(Ce={}){super(Ce),this.type=wt.Response,this.body=void 0!==Ce.body?Ce.body:null}clone(Ce={}){return new Lt({body:void 0!==Ce.body?Ce.body:this.body,headers:Ce.headers||this.headers,status:void 0!==Ce.status?Ce.status:this.status,statusText:Ce.statusText||this.statusText,url:Ce.url||this.url||void 0})}}class rn extends Tt{constructor(Ce){super(Ce,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ce.url||"(unknown url)"}`:`Http failure response for ${Ce.url||"(unknown url)"}: ${Ce.status} ${Ce.statusText}`,this.error=Ce.error||null}}var Ue=function(le){return le[le.Continue=100]="Continue",le[le.SwitchingProtocols=101]="SwitchingProtocols",le[le.Processing=102]="Processing",le[le.EarlyHints=103]="EarlyHints",le[le.Ok=200]="Ok",le[le.Created=201]="Created",le[le.Accepted=202]="Accepted",le[le.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",le[le.NoContent=204]="NoContent",le[le.ResetContent=205]="ResetContent",le[le.PartialContent=206]="PartialContent",le[le.MultiStatus=207]="MultiStatus",le[le.AlreadyReported=208]="AlreadyReported",le[le.ImUsed=226]="ImUsed",le[le.MultipleChoices=300]="MultipleChoices",le[le.MovedPermanently=301]="MovedPermanently",le[le.Found=302]="Found",le[le.SeeOther=303]="SeeOther",le[le.NotModified=304]="NotModified",le[le.UseProxy=305]="UseProxy",le[le.Unused=306]="Unused",le[le.TemporaryRedirect=307]="TemporaryRedirect",le[le.PermanentRedirect=308]="PermanentRedirect",le[le.BadRequest=400]="BadRequest",le[le.Unauthorized=401]="Unauthorized",le[le.PaymentRequired=402]="PaymentRequired",le[le.Forbidden=403]="Forbidden",le[le.NotFound=404]="NotFound",le[le.MethodNotAllowed=405]="MethodNotAllowed",le[le.NotAcceptable=406]="NotAcceptable",le[le.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",le[le.RequestTimeout=408]="RequestTimeout",le[le.Conflict=409]="Conflict",le[le.Gone=410]="Gone",le[le.LengthRequired=411]="LengthRequired",le[le.PreconditionFailed=412]="PreconditionFailed",le[le.PayloadTooLarge=413]="PayloadTooLarge",le[le.UriTooLong=414]="UriTooLong",le[le.UnsupportedMediaType=415]="UnsupportedMediaType",le[le.RangeNotSatisfiable=416]="RangeNotSatisfiable",le[le.ExpectationFailed=417]="ExpectationFailed",le[le.ImATeapot=418]="ImATeapot",le[le.MisdirectedRequest=421]="MisdirectedRequest",le[le.UnprocessableEntity=422]="UnprocessableEntity",le[le.Locked=423]="Locked",le[le.FailedDependency=424]="FailedDependency",le[le.TooEarly=425]="TooEarly",le[le.UpgradeRequired=426]="UpgradeRequired",le[le.PreconditionRequired=428]="PreconditionRequired",le[le.TooManyRequests=429]="TooManyRequests",le[le.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",le[le.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",le[le.InternalServerError=500]="InternalServerError",le[le.NotImplemented=501]="NotImplemented",le[le.BadGateway=502]="BadGateway",le[le.ServiceUnavailable=503]="ServiceUnavailable",le[le.GatewayTimeout=504]="GatewayTimeout",le[le.HttpVersionNotSupported=505]="HttpVersionNotSupported",le[le.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",le[le.InsufficientStorage=507]="InsufficientStorage",le[le.LoopDetected=508]="LoopDetected",le[le.NotExtended=510]="NotExtended",le[le.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",le}(Ue||{});function Je(le,Ce){return{body:Ce,headers:le.headers,context:le.context,observe:le.observe,params:le.params,reportProgress:le.reportProgress,responseType:le.responseType,withCredentials:le.withCredentials,transferCache:le.transferCache}}let lt=(()=>{class le{constructor(Te){this.handler=Te}request(Te,yt,Dt={}){let kt;if(Te instanceof at)kt=Te;else{let cn,Yn;cn=Dt.headers instanceof Ie?Dt.headers:new Ie(Dt.headers),Dt.params&&(Yn=Dt.params instanceof ke?Dt.params:new ke({fromObject:Dt.params})),kt=new at(Te,yt,void 0!==Dt.body?Dt.body:null,{headers:cn,context:Dt.context,params:Yn,reportProgress:Dt.reportProgress,responseType:Dt.responseType||"json",withCredentials:Dt.withCredentials,transferCache:Dt.transferCache})}const zt=(0,k.of)(kt).pipe((0,_e.m)(cn=>this.handler.handle(cn)));if(Te instanceof at||"events"===Dt.observe)return zt;const gn=zt.pipe((0,Ee.I)(cn=>cn instanceof Lt));switch(Dt.observe||"body"){case"body":switch(kt.responseType){case"arraybuffer":return gn.pipe((0,Le.k)(cn=>{if(null!==cn.body&&!(cn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return cn.body}));case"blob":return gn.pipe((0,Le.k)(cn=>{if(null!==cn.body&&!(cn.body instanceof Blob))throw new Error("Response is not a Blob.");return cn.body}));case"text":return gn.pipe((0,Le.k)(cn=>{if(null!==cn.body&&"string"!=typeof cn.body)throw new Error("Response is not a string.");return cn.body}));default:return gn.pipe((0,Le.k)(cn=>cn.body))}case"response":return gn;default:throw new Error(`Unreachable: unhandled observe type ${Dt.observe}}`)}}delete(Te,yt={}){return this.request("DELETE",Te,yt)}get(Te,yt={}){return this.request("GET",Te,yt)}head(Te,yt={}){return this.request("HEAD",Te,yt)}jsonp(Te,yt){return this.request("JSONP",Te,{params:(new ke).append(yt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Te,yt={}){return this.request("OPTIONS",Te,yt)}patch(Te,yt,Dt={}){return this.request("PATCH",Te,Je(Dt,yt))}post(Te,yt,Dt={}){return this.request("POST",Te,Je(Dt,yt))}put(Te,yt,Dt={}){return this.request("PUT",Te,Je(Dt,yt))}static#e=this.\u0275fac=function(yt){return new(yt||le)(q.CoB(xe))};static#t=this.\u0275prov=q.wxM({token:le,factory:le.\u0275fac})}return le})();function En(le,Ce){return Ce(le)}function An(le,Ce){return(Te,yt)=>Ce.intercept(Te,{handle:Dt=>le(Dt,yt)})}const Sn=new q.UbH(""),qn=new q.UbH(""),Vr=new q.UbH(""),Wt=new q.UbH("");function Rr(){let le=null;return(Ce,Te)=>{null===le&&(le=((0,q.uUt)(Sn,{optional:!0})??[]).reduceRight(An,En));const yt=(0,q.uUt)(q.g9Y),Dt=yt.add();return le(Ce,Te).pipe((0,Pe.U)(()=>yt.remove(Dt)))}}let Un=(()=>{class le extends xe{constructor(Te,yt){super(),this.backend=Te,this.injector=yt,this.chain=null,this.pendingTasks=(0,q.uUt)(q.g9Y);const Dt=(0,q.uUt)(Wt,{optional:!0});this.backend=Dt??Te}handle(Te){if(null===this.chain){const Dt=Array.from(new Set([...this.injector.get(qn),...this.injector.get(Vr,[])]));this.chain=Dt.reduceRight((kt,zt)=>function Xt(le,Ce,Te){return(yt,Dt)=>(0,q.SMS)(Te,()=>Ce(yt,kt=>le(kt,Dt)))}(kt,zt,this.injector),En)}const yt=this.pendingTasks.add();return this.chain(Te,Dt=>this.backend.handle(Dt)).pipe((0,Pe.U)(()=>this.pendingTasks.remove(yt)))}static#e=this.\u0275fac=function(yt){return new(yt||le)(q.CoB(it),q.CoB(q.SIe))};static#t=this.\u0275prov=q.wxM({token:le,factory:le.\u0275fac})}return le})();const xn=/^\)\]\}',?\n/;let Or=(()=>{class le{constructor(Te){this.xhrFactory=Te}handle(Te){if("JSONP"===Te.method)throw new q.OBp(-2800,!1);const yt=this.xhrFactory;return(yt.\u0275loadImpl?(0,W.Q)(yt.\u0275loadImpl()):(0,k.of)(null)).pipe((0,ge.G)(()=>new D._(kt=>{const zt=yt.build();if(zt.open(Te.method,Te.urlWithParams),Te.withCredentials&&(zt.withCredentials=!0),Te.headers.forEach((Gr,Qn)=>zt.setRequestHeader(Gr,Qn.join(","))),Te.headers.has("Accept")||zt.setRequestHeader("Accept","application/json, text/plain, */*"),!Te.headers.has("Content-Type")){const Gr=Te.detectContentTypeHeader();null!==Gr&&zt.setRequestHeader("Content-Type",Gr)}if(Te.responseType){const Gr=Te.responseType.toLowerCase();zt.responseType="json"!==Gr?Gr:"text"}const gn=Te.serializeBody();let cn=null;const Yn=()=>{if(null!==cn)return cn;const Gr=zt.statusText||"OK",Qn=new Ie(zt.getAllResponseHeaders()),oi=function Bn(le){return"responseURL"in le&&le.responseURL?le.responseURL:/^X-Request-URL:/m.test(le.getAllResponseHeaders())?le.getResponseHeader("X-Request-URL"):null}(zt)||Te.url;return cn=new mt({headers:Qn,status:zt.status,statusText:Gr,url:oi}),cn},Ar=()=>{let{headers:Gr,status:Qn,statusText:oi,url:Hn}=Yn(),Er=null;Qn!==Ue.NoContent&&(Er=typeof zt.response>"u"?zt.responseText:zt.response),0===Qn&&(Qn=Er?Ue.Ok:0);let ls=Qn>=200&&Qn<300;if("json"===Te.responseType&&"string"==typeof Er){const Ni=Er;Er=Er.replace(xn,"");try{Er=""!==Er?JSON.parse(Er):null}catch(di){Er=Ni,ls&&(ls=!1,Er={error:di,text:Er})}}ls?(kt.next(new Lt({body:Er,headers:Gr,status:Qn,statusText:oi,url:Hn||void 0})),kt.complete()):kt.error(new rn({error:Er,headers:Gr,status:Qn,statusText:oi,url:Hn||void 0}))},ur=Gr=>{const{url:Qn}=Yn(),oi=new rn({error:Gr,status:zt.status||0,statusText:zt.statusText||"Unknown Error",url:Qn||void 0});kt.error(oi)};let $n=!1;const cs=Gr=>{$n||(kt.next(Yn()),$n=!0);let Qn={type:wt.DownloadProgress,loaded:Gr.loaded};Gr.lengthComputable&&(Qn.total=Gr.total),"text"===Te.responseType&&zt.responseText&&(Qn.partialText=zt.responseText),kt.next(Qn)},Oi=Gr=>{let Qn={type:wt.UploadProgress,loaded:Gr.loaded};Gr.lengthComputable&&(Qn.total=Gr.total),kt.next(Qn)};return zt.addEventListener("load",Ar),zt.addEventListener("error",ur),zt.addEventListener("timeout",ur),zt.addEventListener("abort",ur),Te.reportProgress&&(zt.addEventListener("progress",cs),null!==gn&&zt.upload&&zt.upload.addEventListener("progress",Oi)),zt.send(gn),kt.next({type:wt.Sent}),()=>{zt.removeEventListener("error",ur),zt.removeEventListener("abort",ur),zt.removeEventListener("load",Ar),zt.removeEventListener("timeout",ur),Te.reportProgress&&(zt.removeEventListener("progress",cs),null!==gn&&zt.upload&&zt.upload.removeEventListener("progress",Oi)),zt.readyState!==zt.DONE&&zt.abort()}})))}static#e=this.\u0275fac=function(yt){return new(yt||le)(q.CoB(fe.OM))};static#t=this.\u0275prov=q.wxM({token:le,factory:le.\u0275fac})}return le})();const Dn=new q.UbH(""),zn=new q.UbH("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Kr=new q.UbH("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class $r{}let xs=(()=>{class le{constructor(Te,yt,Dt){this.doc=Te,this.platform=yt,this.cookieName=Dt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Te=this.doc.cookie||"";return Te!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,fe.Sg)(Te,this.cookieName),this.lastCookieString=Te),this.lastToken}static#e=this.\u0275fac=function(yt){return new(yt||le)(q.CoB(fe.Ud),q.CoB(q.AHE),q.CoB(zn))};static#t=this.\u0275prov=q.wxM({token:le,factory:le.\u0275fac})}return le})();function Ci(le,Ce){const Te=le.url.toLowerCase();if(!(0,q.uUt)(Dn)||"GET"===le.method||"HEAD"===le.method||Te.startsWith("http://")||Te.startsWith("https://"))return Ce(le);const yt=(0,q.uUt)($r).getToken(),Dt=(0,q.uUt)(Kr);return null!=yt&&!le.headers.has(Dt)&&(le=le.clone({headers:le.headers.set(Dt,yt)})),Ce(le)}var Ye=function(le){return le[le.Interceptors=0]="Interceptors",le[le.LegacyInterceptors=1]="LegacyInterceptors",le[le.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",le[le.NoXsrfProtection=3]="NoXsrfProtection",le[le.JsonpSupport=4]="JsonpSupport",le[le.RequestsMadeViaParent=5]="RequestsMadeViaParent",le[le.Fetch=6]="Fetch",le}(Ye||{});function We(...le){const Ce=[lt,Or,Un,{provide:xe,useExisting:Un},{provide:it,useExisting:Or},{provide:qn,useValue:Ci,multi:!0},{provide:Dn,useValue:!0},{provide:$r,useClass:xs}];for(const Te of le)Ce.push(...Te.\u0275providers);return(0,q.AFj)(Ce)}const de=new q.UbH("");function ee(){return function ye(le,Ce){return{\u0275kind:le,\u0275providers:Ce}}(Ye.LegacyInterceptors,[{provide:de,useFactory:Rr},{provide:qn,useExisting:de,multi:!0}])}let wn=(()=>{class le{static#e=this.\u0275fac=function(yt){return new(yt||le)};static#t=this.\u0275mod=q.a4G({type:le});static#n=this.\u0275inj=q.s3X({providers:[We(ee())]})}return le})()},4496:(jt,He,V)=>{V.d(He,{qwP:()=>G,qid:()=>QC,QHP:()=>ps,kZF:()=>CD,Ev2:()=>LM,Swk:()=>mm,YND:()=>re,kD9:()=>uh,ESV:()=>vM,ayF:()=>AM,syz:()=>ac,GMv:()=>ht,SIe:()=>ct,eAe:()=>Du,_w7:()=>ui,_6O:()=>xn,UbH:()=>Cr,zZn:()=>ba,Uj7:()=>em,YNh:()=>tm,KYU:()=>eI,obV:()=>xE,oF$:()=>Cf,WW2:()=>Qs,T7N:()=>Ed,AHE:()=>A,crf:()=>N,q87:()=>$v,O8F:()=>jv,yzm:()=>Wh,Qfh:()=>Rl,Yw2:()=>hf,G4X:()=>pM,eOv:()=>ED,j1C:()=>$b,a8Z:()=>hD,y8U:()=>iv,K6R:()=>wn,I44:()=>nv,cZD:()=>uR,SIz:()=>LE,Gk1:()=>rC,grM:()=>OD,wd:()=>$t,uUt:()=>wr,sPQ:()=>OM,_Ap:()=>Fs,AFj:()=>Ol,m4O:()=>FM,o9M:()=>hR,SMS:()=>Sh,sRj:()=>Lu,yai:()=>Op,oPY:()=>fD,i4S:()=>E,GUM:()=>G_,g9Y:()=>i,OBp:()=>Bt,aS5:()=>yD,Mn9:()=>vD,iMv:()=>PC,G58:()=>Xr,y02:()=>E0,IHs:()=>Zt,K_M:()=>Zo,Guz:()=>vf,w5$:()=>KC,gX2:()=>ID,auf:()=>ha,GEN:()=>Bn,eg9:()=>w_,Wk5:()=>le,QJr:()=>NE,SYr:()=>Fl,M5G:()=>RT,UHJ:()=>OT,yG2:()=>Og,e48:()=>fC,eAK:()=>vC,szK:()=>oT,In1:()=>ti,Sc5:()=>Wo,wxM:()=>Ir,s3X:()=>fa,a4G:()=>sa,UTH:()=>yc,GI1:()=>Pu,wR5:()=>DC,C$Y:()=>GE,I0R:()=>$E,KQA:()=>_0,otF:()=>wm,CoB:()=>pr,gJ8:()=>cg,KEo:()=>Qm,qCj:()=>RC,Gqi:()=>lT,GaO:()=>Q0,wVc:()=>qT,kDX:()=>KT,g7$:()=>YT,I7O:()=>QT,E7m:()=>_C,wto:()=>cT,CGJ:()=>po,usT:()=>Ec,K6U:()=>ed,YFg:()=>py,AnM:()=>NT,yuY:()=>L,OEk:()=>vT,cNF:()=>xC,oRS:()=>KE,kNx:()=>bT,iHE:()=>FC,OKB:()=>kC,CC$:()=>aT}),V(1528);let k=null,W=1;const _e=Symbol("SIGNAL");function Ee(t){const r=k;return k=t,r}function Ie(t){if((!Re(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==W)){if(!t.producerMustRecompute(t)&&!st(t))return t.dirty=!1,void(t.lastCleanEpoch=W);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=W}}function st(t){Xe(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],c=t.producerLastReadVersion[r];if(c!==s.version||(Ie(s),c!==s.version))return!0}return!1}function ae(t,r){if(function pe(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Xe(t),1===t.liveConsumerNode.length)for(let c=0;c<t.producerNode.length;c++)ae(t.producerNode[c],t.producerIndexOfThis[c]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const c=t.liveConsumerIndexOfThis[r],d=t.liveConsumerNode[r];Xe(d),d.producerIndexOfThis[c]=r}}function Re(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Xe(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let mt=null;var Xt=V(5657),Sn=V(6928),qn=V(6700),Vr=V(4704);const Rr="https://g.co/ng/security#xss";class Bt extends Error{constructor(r,s){super(Xr(r,s)),this.code=r}}function Xr(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}function yn(t){return r=>{setTimeout(t,void 0,r)}}const ui=class Cn extends Xt.E{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,c){let d=r,g=s||(()=>null),I=c;if(r&&"object"==typeof r){const M=r;d=M.next?.bind(M),g=M.error?.bind(M),I=M.complete?.bind(M)}this.__isAsync&&(g=yn(g),d&&(d=yn(d)),I&&(I=yn(I)));const C=super.subscribe({next:d,error:g,complete:I});return r instanceof Sn.wH&&r.add(C),C}};var xn=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(xn||{});function Bn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Bn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function Or(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}var In=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(In||{}),wn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(wn||{});function Ln(t){return{toString:t}.toString()}const Zt=globalThis,jn={},Oe=[];function Ze(t){for(let r in t)if(t[r]===Ze)return r;throw Error("Could not find renamed property on target object.")}function nt(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}const St=Ze({\u0275cmp:Ze}),en=Ze({\u0275dir:Ze}),Wn=Ze({\u0275pipe:Ze}),Kn=Ze({\u0275mod:Ze}),Xn=Ze({\u0275fac:Ze}),ei=Ze({__NG_ELEMENT_ID__:Ze}),_r=Ze({__NG_ENV_ID__:Ze});var le=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(le||{});function Ce(t,r,s){let c=t.length;for(;;){const d=t.indexOf(r,s);if(-1===d)return d;if(0===d||t.charCodeAt(d-1)<=32){const g=r.length;if(d+g===c||t.charCodeAt(d+g)<=32)return d}s=d+1}}function Te(t,r,s){let c=0;for(;c<s.length;){const d=s[c];if("number"==typeof d){if(0!==d)break;c++;const g=s[c++],I=s[c++],C=s[c++];t.setAttribute(r,I,C,g)}else{const g=d,I=s[++c];Dt(g)?t.setProperty(r,g,I):t.setAttribute(r,g,I),c++}}return c}function yt(t){return 3===t||4===t||6===t}function Dt(t){return 64===t.charCodeAt(0)}function kt(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let c=0;c<r.length;c++){const d=r[c];"number"==typeof d?s=d:0===s||zt(t,s,d,null,-1===s||2===s?r[++c]:null)}}return t}function zt(t,r,s,c,d){let g=0,I=t.length;if(-1===r)I=-1;else for(;g<t.length;){const C=t[g++];if("number"==typeof C){if(C===r){I=-1;break}if(C>r){I=g-1;break}}}for(;g<t.length;){const C=t[g];if("number"==typeof C)break;if(C===s){if(null===c)return void(null!==d&&(t[g+1]=d));if(c===t[g+1])return void(t[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==I&&(t.splice(I,0,r),g=I+1),t.splice(g++,0,s),null!==c&&t.splice(g++,0,c),null!==d&&t.splice(g++,0,d)}const gn="ng-template";function cn(t,r,s){let c=0,d=!0;for(;c<t.length;){let g=t[c++];if("string"==typeof g&&d){const I=t[c++];if(s&&"class"===g&&-1!==Ce(I.toLowerCase(),r,0))return!0}else{if(1===g){for(;c<t.length&&"string"==typeof(g=t[c++]);)if(g.toLowerCase()===r)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function Yn(t){return 4===t.type&&t.value!==gn}function Ar(t,r,s){return r===(4!==t.type||s?t.value:gn)}function ur(t,r,s){let c=4;const d=t.attrs||[],g=function Qn(t){for(let r=0;r<t.length;r++)if(yt(t[r]))return r;return t.length}(d);let I=!1;for(let C=0;C<r.length;C++){const M=r[C];if("number"!=typeof M){if(!I)if(4&c){if(c=2|1&c,""!==M&&!Ar(t,M,s)||""===M&&1===r.length){if($n(c))return!1;I=!0}}else{const j=8&c?M:r[++C];if(8&c&&null!==t.attrs){if(!cn(t.attrs,j,s)){if($n(c))return!1;I=!0}continue}const ue=cs(8&c?"class":M,d,Yn(t),s);if(-1===ue){if($n(c))return!1;I=!0;continue}if(""!==j){let Se;Se=ue>g?"":d[ue+1].toLowerCase();const je=8&c?Se:null;if(je&&-1!==Ce(je,j,0)||2&c&&j!==Se){if($n(c))return!1;I=!0}}}}else{if(!I&&!$n(c)&&!$n(M))return!1;if(I&&$n(M))continue;I=!1,c=M|1&c}}return $n(c)||I}function $n(t){return 0==(1&t)}function cs(t,r,s,c){if(null===r)return-1;let d=0;if(c||!s){let g=!1;for(;d<r.length;){const I=r[d];if(I===t)return d;if(3===I||6===I)g=!0;else{if(1===I||2===I){let C=r[++d];for(;"string"==typeof C;)C=r[++d];continue}if(4===I)break;if(0===I){d+=4;continue}}d+=g?1:2}return-1}return function oi(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const c=t[s];if("number"==typeof c)return-1;if(c===r)return s;s++}return-1}(r,t)}function Oi(t,r,s=!1){for(let c=0;c<r.length;c++)if(ur(t,r[c],s))return!0;return!1}function Er(t,r){return t?":not("+r.trim()+")":r}function ls(t){let r=t[0],s=1,c=2,d="",g=!1;for(;s<t.length;){let I=t[s];if("string"==typeof I)if(2&c){const C=t[++s];d+="["+I+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?d+="."+I:4&c&&(d+=" "+I);else""!==d&&!$n(I)&&(r+=Er(g,d),d=""),c=I,g=g||!$n(c);s++}return""!==d&&(r+=Er(g,d)),r}function ti(t){return Ln(()=>{const r=Ca(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===In.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||wn.Emulated,styles:t.styles||Oe,_:null,schemas:t.schemas||null,tView:null,id:""};wa(s);const c=t.dependencies;return s.directiveDefs=Js(c,!1),s.pipeDefs=Js(c,!0),s.id=function Ho(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const d of s)r=Math.imul(31,r)+d.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function ks(t){return rr(t)||ki(t)}function xi(t){return null!==t}function sa(t){return Ln(()=>({type:t.type,bootstrap:t.bootstrap||Oe,declarations:t.declarations||Oe,imports:t.imports||Oe,exports:t.exports||Oe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Ki(t,r){if(null==t)return jn;const s={};for(const c in t)if(t.hasOwnProperty(c)){const d=t[c];let g,I,C=le.None;Array.isArray(d)?(C=d[0],g=d[1],I=d[2]??g):(g=d,I=d),r?(s[g]=C!==le.None?[c,C]:c,r[g]=I):s[g]=c}return s}function Wo(t){return Ln(()=>{const r=Ca(t);return wa(r),r})}function yc(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function rr(t){return t[St]||null}function ki(t){return t[en]||null}function Yr(t){return t[Wn]||null}function Fs(t){const r=rr(t)||ki(t)||Yr(t);return null!==r&&r.standalone}function hi(t,r){const s=t[Kn]||null;if(!s&&!0===r)throw new Error(`Type ${Bn(t)} does not have '\u0275mod' property.`);return s}function Ca(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||jn,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||Oe,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ki(t.inputs,r),outputs:Ki(t.outputs),debugInfo:null}}function wa(t){t.features?.forEach(r=>r(t))}function Js(t,r){if(!t)return null;const s=r?Yr:ks;return()=>("function"==typeof t?t():t).map(c=>s(c)).filter(xi)}const ni=0,Vt=1,vn=2,xr=3,rs=4,Bi=5,ji=6,Yi=7,dr=8,$i=9,Qi=10,Pn=11,Fi=12,wo=13,oo=14,_i=15,Ls=16,Vs=17,Li=18,us=19,is=20,Si=21,zo=22,Us=23,ln=25,qo=1,Ji=7,Ko=9,yi=10;var As=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(As||{});function ds(t){return Array.isArray(t)&&"object"==typeof t[qo]}function Xi(t){return Array.isArray(t)&&!0===t[qo]}function js(t){return 0!=(4&t.flags)}function Gi(t){return t.componentOffset>-1}function $s(t){return 1==(1&t.flags)}function Wi(t){return!!t.template}function Ta(t){return 0!=(512&t[vn])}let aa=!1;function Wr(t){for(;Array.isArray(t);)t=t[ni];return t}function Yo(t,r){return Wr(r[t])}function yr(t,r){return Wr(r[t.index])}function ss(t,r){return t.data[r]}function Fa(t,r){return t[r]}function Ws(t,r){const s=r[t];return ds(s)?s:s[ni]}function ko(t){return 128==(128&t[vn])}function vs(t,r){return null==r?null:t[r]}function uo(t){t[Vs]=0}function Fo(t){1024&t[vn]||(t[vn]|=1024,ko(t)&&ca(t))}function ho(t){return!!(9216&t[vn]||t[Us]?.dirty)}function Za(t){ho(t)?ca(t):64&t[vn]&&(function fi(){return aa}()?(t[vn]|=1024,ca(t)):t[Qi].changeDetectionScheduler?.notify())}function ca(t){t[Qi].changeDetectionScheduler?.notify();let r=Zs(t);for(;null!==r&&!(8192&r[vn])&&(r[vn]|=8192,ko(r));)r=Zs(r)}function ec(t,r){if(256==(256&t[vn]))throw new Bt(911,!1);null===t[Si]&&(t[Si]=[]),t[Si].push(r)}function Zs(t){const r=t[xr];return Xi(r)?r[xr]:r}const Fn={lFrame:Fr(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Lo(){return Fn.bindingsEnabled}function Ct(){return Fn.lFrame.lView}function hr(){return Fn.lFrame.tView}function Ec(t){return Fn.lFrame.contextLView=t,t[dr]}function po(t){return Fn.lFrame.contextLView=null,t}function Br(){let t=Hr();for(;null!==t&&64===t.type;)t=t.parent;return t}function Hr(){return Fn.lFrame.currentTNode}function Do(t,r){const s=Fn.lFrame;s.currentTNode=t,s.isParent=r}function go(){return Fn.lFrame.isParent}function Ms(){const t=Fn.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function Pr(){return Fn.lFrame.bindingIndex++}function z(t,r){const s=Fn.lFrame;s.bindingIndex=s.bindingRootIndex=t,ot(r)}function ot(t){Fn.lFrame.currentDirectiveIndex=t}function dn(){return Fn.lFrame.currentQueryIndex}function ii(t){Fn.lFrame.currentQueryIndex=t}function Qr(t){const r=t[Vt];return 2===r.type?r.declTNode:1===r.type?t[Bi]:null}function ci(t,r,s){if(s&xn.SkipSelf){let d=r,g=t;for(;!(d=d.parent,null!==d||s&xn.Host||(d=Qr(g),null===d||(g=g[oo],10&d.type))););if(null===d)return!1;r=d,t=g}const c=Fn.lFrame=pi();return c.currentTNode=r,c.lView=t,!0}function Jn(t){const r=pi(),s=t[Vt];Fn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function pi(){const t=Fn.lFrame,r=null===t?null:t.child;return null===r?Fr(t):r}function Fr(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function fs(){const t=Fn.lFrame;return Fn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Jo=fs;function Zi(){const t=fs();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function tr(){return Fn.lFrame.selectedIndex}function gi(t){Fn.lFrame.selectedIndex=t}function ir(){const t=Fn.lFrame;return ss(t.tView,t.selectedIndex)}let wc=!0;function sn(){return wc}function fn(t){wc=t}function cu(){return Ht(Br(),Ct())}function Ht(t,r){return new ht(yr(t,r))}let nc,ht=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=cu}return t})();function bt(t){return t instanceof ht?t.nativeElement:t}function Kc(t,r){t.forEach(s=>Array.isArray(s)?Kc(s,r):r(s))}function gd(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function wl(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function zr(t,r,s){let c=bn(t,r);return c>=0?t[1|c]=s:(c=~c,function So(t,r,s,c){let d=t.length;if(d==r)t.push(s,c);else if(1===d)t.push(c,t[0]),t[0]=s;else{for(d--,t.push(t[d-1],t[d]);d>r;)t[d]=t[d-2],d--;t[r]=s,t[r+1]=c}}(t,c,r,s)),c}function Tc(t,r){const s=bn(t,r);if(s>=0)return t[1|s]}function bn(t,r){return function da(t,r,s){let c=0,d=t.length>>s;for(;d!==c;){const g=c+(d-c>>1),I=t[g<<s];if(r===I)return g<<s;I>r?d=g:c=g+1}return~(d<<s)}(t,r,1)}function wi(){return this._results[Symbol.iterator]()}class _n{static#e=Symbol.iterator;get changes(){return this._changes??=new ui}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const s=_n.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=wi)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){this.dirty=!1;const c=function Is(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function os(t,r,s){if(t.length!==r.length)return!1;for(let c=0;c<t.length;c++){let d=t[c],g=r[c];if(s&&(d=s(d),g=s(g)),g!==d)return!1}return!0}(this._results,c,s))&&(this._results=c,this.length=c.length,this.last=c[this.length-1],this.first=c[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(r){this._onDirty=r}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Kt(t){return 128==(128&t.flags)}function ha(t){nc=t}function Ir(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function fa(t){return{providers:t.providers||[],imports:t.imports||[]}}function li(t){return Rs(t,Yc)||Rs(t,lu)}function Zo(t){return null!==li(t)}function Rs(t,r){return t.hasOwnProperty(r)?t[r]:null}function Dc(t){return t&&(t.hasOwnProperty(vo)||t.hasOwnProperty(et))?t[vo]:null}const Yc=Ze({\u0275prov:Ze}),vo=Ze({\u0275inj:Ze}),lu=Ze({ngInjectableDef:Ze}),et=Ze({ngInjectorDef:Ze});class Cr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Ir({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ps=new Cr("",{providedIn:"root",factory:()=>w}),w="ng",N=new Cr(""),A=new Cr("",{providedIn:"platform",factory:()=>"unknown"}),G=new Cr(""),re=new Cr("",{providedIn:"root",factory:()=>function Xo(){if(void 0!==nc)return nc;if(typeof document<"u")return document;throw new Bt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),rt=Ze({__forward_ref__:Ze});function $t(t){return t.__forward_ref__=$t,t.toString=function(){return Bn(this())},t}function Ut(t){return nr(t)?t():t}function nr(t){return"function"==typeof t&&t.hasOwnProperty(rt)&&t.__forward_ref__===$t}function Sl(t){return t&&!!t.\u0275providers}function cr(t){return"string"==typeof t?t:null==t?"":String(t)}function _d(t,r){throw new Bt(-201,!1)}let yh;function Pf(){return yh}function Eo(t){const r=yh;return yh=t,r}function Gu(t,r,s){const c=li(t);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:s&xn.Optional?null:void 0!==r?r:void _d()}const Qc={},Al="__NG_DI_FLAG__",uu="ngTempTokenPath",eo=/\n/gm,ja="__source";let Sc;function $a(t){const r=Sc;return Sc=t,r}function qs(t,r=xn.Default){if(void 0===Sc)throw new Bt(-203,!1);return null===Sc?Gu(t,void 0,r):Sc.get(t,r&xn.Optional?null:void 0,r)}function pr(t,r=xn.Default){return(Pf()||qs)(Ut(t),r)}function wr(t,r=xn.Default){return pr(t,Io(r))}function Io(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function bl(t){const r=[];for(let s=0;s<t.length;s++){const c=Ut(t[s]);if(Array.isArray(c)){if(0===c.length)throw new Bt(900,!1);let d,g=xn.Default;for(let I=0;I<c.length;I++){const C=c[I],M=Os(C);"number"==typeof M?-1===M?d=C.token:g|=M:d=C}r.push(pr(d,g))}else r.push(pr(c))}return r}function Jc(t,r){return t[Al]=r,t.prototype[Al]=r,t}function Os(t){return t[Al]}let oc=()=>null;function fu(t,r,s=!1){return oc(t,r,s)}const rl="__parameters__";function Mc(t,r,s){return Ln(()=>{const c=function bc(t){return function(...s){if(t){const c=t(...s);for(const d in c)this[d]=c[d]}}}(r);function d(...g){if(this instanceof d)return c.apply(this,g),this;const I=new d(...g);return C.annotation=I,C;function C(M,j,J){const ue=M.hasOwnProperty(rl)?M[rl]:Object.defineProperty(M,rl,{value:[]})[rl];for(;ue.length<=J;)ue.push(null);return(ue[J]=ue[J]||[]).push(I),M}}return s&&(d.prototype=Object.create(s.prototype)),d.prototype.ngMetadataName=t,d.annotationCls=d,d})}const Ed=Jc(Mc("Optional"),8),Rl=Jc(Mc("SkipSelf"),4);function Rc(t,r){return t.hasOwnProperty(Xn)?t[Xn]:null}const ac=new Cr(""),cc=new Cr("",-1),_u=new Cr("");class sl{get(r,s=Qc){if(s===Qc){const c=new Error(`NullInjectorError: No provider for ${Bn(r)}!`);throw c.name="NullInjectorError",c}return s}}function Ol(t){return{\u0275providers:t}}function za(...t){return{\u0275providers:Nl(0,t),\u0275fromNgModule:!0}}function Nl(t,...r){const s=[],c=new Set;let d;const g=I=>{s.push(I)};return Kc(r,I=>{const C=I;qa(C,g,[],c)&&(d||=[],d.push(C))}),void 0!==d&&Yu(d,g),s}function Yu(t,r){for(let s=0;s<t.length;s++){const{ngModule:c,providers:d}=t[s];Id(d,g=>{r(g,c)})}}function qa(t,r,s,c){if(!(t=Ut(t)))return!1;let d=null,g=Dc(t);const I=!g&&rr(t);if(g||I){if(I&&!I.standalone)return!1;d=t}else{const M=t.ngModule;if(g=Dc(M),!g)return!1;d=M}const C=c.has(d);if(I){if(C)return!1;if(c.add(d),I.dependencies){const M="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const j of M)qa(j,r,s,c)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let j;c.add(d);try{Kc(g.imports,J=>{qa(J,r,s,c)&&(j||=[],j.push(J))})}finally{}void 0!==j&&Yu(j,r)}if(!C){const j=Rc(d)||(()=>new d);r({provide:d,useFactory:j,deps:Oe},d),r({provide:_u,useValue:d,multi:!0},d),r({provide:ac,useValue:()=>pr(d),multi:!0},d)}const M=g.providers;if(null!=M&&!C){const j=t;Id(M,J=>{r(J,j)})}}}return d!==t&&void 0!==t.providers}function Id(t,r){for(let s of t)Sl(s)&&(s=s.\u0275providers),Array.isArray(s)?Id(s,r):r(s)}const lc=Ze({provide:String,useValue:Ze});function Cd(t){return null!==t&&"object"==typeof t&&lc in t}function S(t){return"function"==typeof t}const E=new Cr(""),b={},K={};let oe;function Ne(){return void 0===oe&&(oe=new sl),oe}class ct{}class Pt extends ct{get destroyed(){return this._destroyed}constructor(r,s,c,d){super(),this.parent=s,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Nc(r,I=>this.processProvider(I)),this.records.set(cc,Ts(void 0,this)),d.has("environment")&&this.records.set(ct,Ts(void 0,this));const g=this.records.get(E);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(_u,Oe,xn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=$a(this),c=Eo(void 0);try{return r()}finally{$a(s),Eo(c)}}get(r,s=Qc,c=xn.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(_r))return r[_r](this);c=Io(c);const g=$a(this),I=Eo(void 0);try{if(!(c&xn.SkipSelf)){let M=this.records.get(r);if(void 0===M){const j=function Mo(t){return"function"==typeof t||"object"==typeof t&&t instanceof Cr}(r)&&li(r);M=j&&this.injectableDefInScope(j)?Ts(hn(r),b):null,this.records.set(r,M)}if(null!=M)return this.hydrate(r,M)}return(c&xn.Self?Ne():this.parent).get(r,s=c&xn.Optional&&s===Qc?null:s)}catch(C){if("NullInjectorError"===C.name){if((C[uu]=C[uu]||[]).unshift(Bn(r)),g)throw C;return function vh(t,r,s,c){const d=t[uu];throw r[ja]&&d.unshift(r[ja]),t.message=function Xc(t,r,s,c=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let d=Bn(r);if(Array.isArray(r))d=r.map(Bn).join(" -> ");else if("object"==typeof r){let g=[];for(let I in r)if(r.hasOwnProperty(I)){let C=r[I];g.push(I+":"+("string"==typeof C?JSON.stringify(C):Bn(C)))}d=`{${g.join(", ")}}`}return`${s}${c?"("+c+")":""}[${d}]: ${t.replace(eo,"\n  ")}`}("\n"+t.message,d,s,c),t.ngTokenPath=d,t[uu]=null,t}(C,r,"R3InjectorError",this.source)}throw C}finally{Eo(I),$a(g)}}resolveInjectorInitializers(){const r=$a(this),s=Eo(void 0);try{const d=this.get(ac,Oe,xn.Self);for(const g of d)g()}finally{$a(r),Eo(s)}}toString(){const r=[],s=this.records;for(const c of s.keys())r.push(Bn(c));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Bt(205,!1)}processProvider(r){let s=S(r=Ut(r))?r:Ut(r&&r.provide);const c=function sr(t){return Cd(t)?Ts(void 0,t.useValue):Ts(Po(t),b)}(r);if(!S(r)&&!0===r.multi){let d=this.records.get(s);d||(d=Ts(void 0,b,!0),d.factory=()=>bl(d.multi),this.records.set(s,d)),s=r,d.multi.push(r)}this.records.set(s,c)}hydrate(r,s){return s.value===b&&(s.value=K,s.value=s.factory()),"object"==typeof s.value&&s.value&&function bo(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Ut(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function hn(t){const r=li(t),s=null!==r?r.factory:Rc(t);if(null!==s)return s;if(t instanceof Cr)throw new Bt(204,!1);if(t instanceof Function)return function Nn(t){if(t.length>0)throw new Bt(204,!1);const s=function Tl(t){return t&&(t[Yc]||t[lu])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new Bt(204,!1)}function Po(t,r,s){let c;if(S(t)){const d=Ut(t);return Rc(d)||hn(d)}if(Cd(t))c=()=>Ut(t.useValue);else if(function yu(t){return!(!t||!t.useFactory)}(t))c=()=>t.useFactory(...bl(t.deps||[]));else if(function Oc(t){return!(!t||!t.useExisting)}(t))c=()=>pr(Ut(t.useExisting));else{const d=Ut(t&&(t.useClass||t.provide));if(!function xl(t){return!!t.deps}(t))return Rc(d)||hn(d);c=()=>new d(...bl(t.deps))}return c}function Ts(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function Nc(t,r){for(const s of t)Array.isArray(s)?Nc(s,r):s&&Sl(s)?Nc(s.\u0275providers,r):r(s)}function Sh(t,r){t instanceof Pt&&t.assertNotDestroyed();const c=$a(t),d=Eo(void 0);try{return r()}finally{$a(c),Eo(d)}}class Eu{constructor(r,s,c){this.previousValue=r,this.currentValue=s,this.firstChange=c}isFirstChange(){return this.firstChange}}function Yp(t,r,s,c){null!==r?r.applyValueToInputSignal(r,c):t[s]=c}function Fl(){return Qp}function Qp(t){return t.type.prototype.ngOnChanges&&(t.setInput=Jp),Iu}function Iu(){const t=xc(this),r=t?.current;if(r){const s=t.previous;if(s===jn)t.previous=r;else for(let c in r)s[c]=r[c];t.current=null,this.ngOnChanges(r)}}function Jp(t,r,s,c,d){const g=this.declaredInputs[c],I=xc(t)||function Cu(t,r){return t[Xp]=r}(t,{previous:jn,current:null}),C=I.current||(I.current={}),M=I.previous,j=M[g];C[g]=new Eu(j&&j.currentValue,s,M===jn),Yp(t,r,d,s)}Fl.ngInherit=!0;const Xp="__ngSimpleChanges__";function xc(t){return t[Xp]||null}const ta=function(t,r,s){};function cl(t,r){for(let s=r.directiveStart,c=r.directiveEnd;s<c;s++){const g=t.data[s].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:C,ngAfterViewInit:M,ngAfterViewChecked:j,ngOnDestroy:J}=g;I&&(t.contentHooks??=[]).push(-s,I),C&&((t.contentHooks??=[]).push(s,C),(t.contentCheckHooks??=[]).push(s,C)),M&&(t.viewHooks??=[]).push(-s,M),j&&((t.viewHooks??=[]).push(s,j),(t.viewCheckHooks??=[]).push(s,j)),null!=J&&(t.destroyHooks??=[]).push(s,J)}}function Lf(t,r,s){Uf(t,r,3,s)}function Ll(t,r,s,c){(3&t[vn])===s&&Uf(t,r,s,c)}function Vf(t,r){let s=t[vn];(3&s)===r&&(s&=16383,s+=1,t[vn]=s)}function Uf(t,r,s,c){const g=c??-1,I=r.length-1;let C=0;for(let M=void 0!==c?65535&t[Vs]:0;M<I;M++)if("number"==typeof r[M+1]){if(C=r[M],null!=c&&C>=c)break}else r[M]<0&&(t[Vs]+=65536),(C<g||-1==g)&&(kc(t,s,r,M),t[Vs]=(4294901760&t[Vs])+M+2),M++}function ll(t,r){ta(4,t,r);const s=Ee(null);try{r.call(t)}finally{Ee(s),ta(5,t,r)}}function kc(t,r,s,c){const d=s[c]<0,g=s[c+1],C=t[d?-s[c]:s[c]];d?t[vn]>>14<t[Vs]>>16&&(3&t[vn])===r&&(t[vn]+=16384,ll(C,g)):ll(C,g)}const Vl=-1;class Td{constructor(r,s,c){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=c}}function bh(t){return t!==Vl}function gs(t){return 32767&t}function Ul(t,r){let s=function gr(t){return t>>16}(t),c=r;for(;s>0;)c=c[oo],s--;return c}let Fc=!0;function dl(t){const r=Fc;return Fc=t,r}const wu=255,rg=5;let J_=0;const $o={};function Qu(t,r){const s=Sd(t,r);if(-1!==s)return s;const c=r[Vt];c.firstCreatePass&&(t.injectorIndex=r.length,Dd(c.data,t),Dd(r,null),Dd(c.blueprint,null));const d=$f(t,r),g=t.injectorIndex;if(bh(d)){const I=gs(d),C=Ul(d,r),M=C[Vt].data;for(let j=0;j<8;j++)r[g+j]=C[I+j]|M[I+j]}return r[g+8]=d,g}function Dd(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Sd(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function $f(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,c=null,d=r;for(;null!==d;){if(c=ag(d),null===c)return Vl;if(s++,d=d[oo],-1!==c.injectorIndex)return c.injectorIndex|s<<16}return Vl}function ig(t,r,s){!function jf(t,r,s){let c;"string"==typeof s?c=s.charCodeAt(0)||0:s.hasOwnProperty(ei)&&(c=s[ei]),null==c&&(c=s[ei]=J_++);const d=c&wu;r.data[t+(d>>rg)]|=1<<d}(t,r,s)}function Z_(t,r,s){if(s&xn.Optional||void 0!==t)return t;_d()}function Ju(t,r,s,c){if(s&xn.Optional&&void 0===c&&(c=null),!(s&(xn.Self|xn.Host))){const d=t[$i],g=Eo(void 0);try{return d?d.get(r,c,s&xn.Optional):Gu(r,c,s&xn.Optional)}finally{Eo(g)}}return Z_(c,0,s)}function Ad(t,r,s,c=xn.Default,d){if(null!==t){if(2048&r[vn]&&!(c&xn.Self)){const I=function Bl(t,r,s,c,d){let g=t,I=r;for(;null!==g&&null!==I&&2048&I[vn]&&!(512&I[vn]);){const C=Pd(g,I,s,c|xn.Self,$o);if(C!==$o)return C;let M=g.parent;if(!M){const j=I[is];if(j){const J=j.get(s,$o,c);if(J!==$o)return J}M=ag(I),I=I[oo]}g=M}return d}(t,r,s,c,$o);if(I!==$o)return I}const g=Pd(t,r,s,c,$o);if(g!==$o)return g}return Ju(r,s,c,d)}function Pd(t,r,s,c,d){const g=function Im(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(ei)?t[ei]:void 0;return"number"==typeof r?r>=0?r&wu:og:r}(s);if("function"==typeof g){if(!ci(r,t,c))return c&xn.Host?Z_(d,0,c):Ju(r,s,c,d);try{let I;if(I=g(c),null!=I||c&xn.Optional)return I;_d()}finally{Jo()}}else if("number"==typeof g){let I=null,C=Sd(t,r),M=Vl,j=c&xn.Host?r[_i][Bi]:null;for((-1===C||c&xn.SkipSelf)&&(M=-1===C?$f(t,r):r[C+8],M!==Vl&&Cm(c,!1)?(I=r[Vt],C=gs(M),r=Ul(M,r)):C=-1);-1!==C;){const J=r[Vt];if(Md(g,C,J.data)){const ue=ey(C,r,s,I,c,j);if(ue!==$o)return ue}M=r[C+8],M!==Vl&&Cm(c,r[Vt].data[C+8]===j)&&Md(g,C,r)?(I=J,C=gs(M),r=Ul(M,r)):C=-1}}return d}function ey(t,r,s,c,d,g){const I=r[Vt],C=I.data[t+8],J=sg(C,I,s,null==c?Gi(C)&&Fc:c!=I&&0!=(3&C.type),d&xn.Host&&g===C);return null!==J?bd(r,I,J,C):$o}function sg(t,r,s,c,d){const g=t.providerIndexes,I=r.data,C=1048575&g,M=t.directiveStart,J=g>>20,Se=d?C+J:t.directiveEnd;for(let je=c?C:C+J;je<Se;je++){const _t=I[je];if(je<M&&s===_t||je>=M&&_t.type===s)return je}if(d){const je=I[M];if(je&&Wi(je)&&je.type===s)return M}return null}function bd(t,r,s,c){let d=t[s];const g=r.data;if(function Em(t){return t instanceof Td}(d)){const I=d;I.resolving&&function Sf(t,r){throw r&&r.join(" > "),new Bt(-200,t)}(function jr(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():cr(t)}(g[s]));const C=dl(I.canSeeViewProviders);I.resolving=!0;const j=I.injectImpl?Eo(I.injectImpl):null;ci(t,c,xn.Default);try{d=t[s]=I.factory(void 0,g,t,c),r.firstCreatePass&&s>=c.directiveStart&&function Ff(t,r,s){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=r.type.prototype;if(c){const I=Qp(r);(s.preOrderHooks??=[]).push(t,I),(s.preOrderCheckHooks??=[]).push(t,I)}d&&(s.preOrderHooks??=[]).push(0-t,d),g&&((s.preOrderHooks??=[]).push(t,g),(s.preOrderCheckHooks??=[]).push(t,g))}(s,g[s],r)}finally{null!==j&&Eo(j),dl(C),I.resolving=!1,Jo()}}return d}function Md(t,r,s){return!!(s[r+(t>>rg)]&1<<t)}function Cm(t,r){return!(t&xn.Self||t&xn.Host&&r)}class to{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,c){return Ad(this._tNode,this._lView,r,Io(c),s)}}function og(){return new to(Br(),Ct())}function wm(t){return Ln(()=>{const r=t.prototype.constructor,s=r[Xn]||Tu(r),c=Object.prototype;let d=Object.getPrototypeOf(t.prototype).constructor;for(;d&&d!==c;){const g=d[Xn]||Tu(d);if(g&&g!==s)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Tu(t){return nr(t)?()=>{const r=Tu(Ut(t));return r&&r()}:Rc(t)}function ag(t){const r=t[Vt],s=r.type;return 2===s?r.declTNode:1===s?t[Bi]:null}function cg(t){return function X_(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const c=s.length;let d=0;for(;d<c;){const g=s[d];if(yt(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof s[d];)d++;else{if(g===r)return s[d+1];d+=2}}}return null}(Br(),t)}function iy(t,r=null,s=null,c){const d=Pm(t,r,s,c);return d.resolveInjectorInitializers(),d}function Pm(t,r=null,s=null,c,d=new Set){const g=[s||Oe,za(t)];return c=c||("object"==typeof t?void 0:Bn(t)),new Pt(g,r||Ne(),c||null,d)}let ba=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Qc;static#t=this.NULL=new sl;static create(s,c){if(Array.isArray(s))return iy({name:""},c,s,"");{const d=s.name??"";return iy({name:d},s.parent,s.providers,d)}}static#n=this.\u0275prov=Ir({token:t,providedIn:"any",factory:()=>pr(cc)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function Oh(t){return t.ngOriginalError}class Du{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Oh(r);for(;s&&Oh(s);)s=Oh(s);return s||null}}const ug=new Cr("",{providedIn:"root",factory:()=>wr(Du).handleError.bind(void 0)}),hg=new Cr("",{providedIn:"root",factory:()=>!1});let qf;function Mm(t){return function xh(){if(void 0===qf&&(qf=null,Zt.trustedTypes))try{qf=Zt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return qf}()?.createScriptURL(t)||t}class Rm{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Rr})`}}function $l(t){return t instanceof Rm?t.changingThisBreaksApplicationSecurity:t}function Od(t,r){const s=function Rv(t){return t instanceof Rm&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${Rr})`)}return s===r}const xm=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ld=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ld||{});function ed(t){const r=nd();return r?r.sanitize(Ld.URL,t)||"":Od(t,"URL")?$l(t):function Jf(t){return(t=String(t)).match(xm)?t:"unsafe:"+t}(cr(t))}function Um(t){const r=nd();if(r)return Mm(r.sanitize(Ld.RESOURCE_URL,t)||"");if(Od(t,"ResourceURL"))return Mm($l(t));throw new Bt(904,!1)}function py(t,r,s){return function fy(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Um:ed}(r,s)(t)}function nd(){const t=Ct();return t&&t[Qi].sanitizer}const np=new Map;let Ey=0;const rp="__ngContext__";function Oo(t,r){ds(r)?(t[rp]=r[us],function Iy(t){np.set(t[us],t)}(r)):t[rp]=r}function Ma(t){return t instanceof Function?t():t}var Wh=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Wh||{});let Hh;function op(t,r){return Hh(t,r)}function Kl(t,r,s,c,d){if(null!=c){let g,I=!1;Xi(c)?g=c:ds(c)&&(I=!0,c=c[ni]);const C=Wr(c);0===t&&null!==s?null==d?hc(r,s,C):Ra(r,s,C,d||null,!0):1===t&&null!==s?Ra(r,s,C,d||null,!0):2===t?function Kd(t,r,s){const c=Yh(t,r);c&&function Au(t,r,s,c){t.removeChild(r,s,c)}(t,c,r,s)}(r,C,I):3===t&&r.destroyNode(C),null!=g&&function Ym(t,r,s,c,d){const g=s[Ji];g!==Wr(s)&&Kl(r,t,c,g,d);for(let C=yi;C<s.length;C++){const M=s[C];Ks(M[Vt],M,t,r,c,g)}}(r,t,g,s,d)}}function zh(t,r,s){return t.createElement(r,s)}function Su(t,r){Ks(t,r,r[Pn],2,null,null)}function Hm(t,r){const s=t[Ko],c=s.indexOf(r);s.splice(c,1)}function zd(t,r){if(t.length<=yi)return;const s=yi+r,c=t[s];if(c){const d=c[Ls];null!==d&&d!==t&&Hm(d,c),r>0&&(t[s-1][rs]=c[rs]);const g=wl(t,yi+r);!function Pg(t,r){Su(t,r),r[ni]=null,r[Bi]=null}(c[Vt],c);const I=g[Li];null!==I&&I.detachView(g[Vt]),c[xr]=null,c[rs]=null,c[vn]&=-129}return c}function lp(t,r){if(!(256&r[vn])){const s=r[Pn];s.destroyNode&&Ks(t,r,s,3,null,null),function qh(t){let r=t[Fi];if(!r)return rd(t[Vt],t);for(;r;){let s=null;if(ds(r))s=r[Fi];else{const c=r[yi];c&&(s=c)}if(!s){for(;r&&!r[rs]&&r!==t;)ds(r)&&rd(r[Vt],r),r=r[xr];null===r&&(r=t),ds(r)&&rd(r[Vt],r),s=r&&r[rs]}r=s}}(r)}}function rd(t,r){if(!(256&r[vn])){r[vn]&=-129,r[vn]|=256,r[Us]&&function Ae(t){if(Xe(t),Re(t))for(let r=0;r<t.producerNode.length;r++)ae(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}(r[Us]),function dp(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let c=0;c<s.length;c+=2){const d=r[s[c]];if(!(d instanceof Td)){const g=s[c+1];if(Array.isArray(g))for(let I=0;I<g.length;I+=2){const C=d[g[I]],M=g[I+1];ta(4,C,M);try{M.call(C)}finally{ta(5,C,M)}}else{ta(4,d,g);try{g.call(d)}finally{ta(5,d,g)}}}}}(t,r),function up(t,r){const s=t.cleanup,c=r[Yi];if(null!==s)for(let g=0;g<s.length-1;g+=2)if("string"==typeof s[g]){const I=s[g+3];I>=0?c[I]():c[-I].unsubscribe(),g+=2}else s[g].call(c[s[g+1]]);null!==c&&(r[Yi]=null);const d=r[Si];if(null!==d){r[Si]=null;for(let g=0;g<d.length;g++)(0,d[g])()}}(t,r),1===r[Vt].type&&r[Pn].destroy();const s=r[Ls];if(null!==s&&Xi(r[xr])){s!==r[xr]&&Hm(s,r);const c=r[Li];null!==c&&c.detachView(t)}!function vg(t){np.delete(t[us])}(r)}}function pl(t,r,s){return function Kh(t,r,s){let c=r;for(;null!==c&&40&c.type;)c=(r=c).parent;if(null===c)return s[ni];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=t.data[c.directiveStart+d];if(g===wn.None||g===wn.Emulated)return null}return yr(c,s)}}(t,r.parent,s)}function Ra(t,r,s,c,d){t.insertBefore(r,s,c,d)}function hc(t,r,s){t.appendChild(r,s)}function id(t,r,s,c,d){null!==c?Ra(t,r,s,c,d):hc(t,r,s)}function Yh(t,r){return t.parentNode(r)}let Mg,sd=function _a(t,r,s){return 40&t.type?yr(t,s):null};function Qh(t,r,s,c){const d=pl(t,c,r),g=r[Pn],C=function Ka(t,r,s){return sd(t,r,s)}(c.parent||r[Bi],c,r);if(null!=d)if(Array.isArray(s))for(let M=0;M<s.length;M++)id(g,d,s[M],C,!1);else id(g,d,s,C,!1);void 0!==Mg&&Mg(g,c,r,s,d)}function Vc(t,r){if(null!==r){const s=r.type;if(3&s)return yr(r,t);if(4&s)return od(-1,t[r.index]);if(8&s){const c=r.child;if(null!==c)return Vc(t,c);{const d=t[r.index];return Xi(d)?od(-1,d):Wr(d)}}if(32&s)return op(r,t)()||Wr(t[r.index]);{const c=qm(t,r);return null!==c?Array.isArray(c)?c[0]:Vc(Zs(t[_i]),c):Vc(t,r.next)}}return null}function qm(t,r){return null!==r?t[_i][Bi].projection[r.projection]:null}function od(t,r){const s=yi+t+1;if(s<r.length){const c=r[s],d=c[Vt].firstChild;if(null!==d)return Vc(c,d)}return r[Ji]}function pp(t,r,s,c,d,g,I){for(;null!=s;){const C=c[s.index],M=s.type;if(I&&0===r&&(C&&Oo(Wr(C),c),s.flags|=2),32!=(32&s.flags))if(8&M)pp(t,r,s.child,c,d,g,!1),Kl(r,t,d,C,g);else if(32&M){const j=op(s,c);let J;for(;J=j();)Kl(r,t,d,J,g);Kl(r,t,d,C,g)}else 16&M?Km(t,r,c,s,d,g):Kl(r,t,d,C,g);s=I?s.projectionNext:s.next}}function Ks(t,r,s,c,d,g){pp(s,c,t.firstChild,r,d,g,!1)}function Km(t,r,s,c,d,g){const I=s[_i],M=I[Bi].projection[c.projection];if(Array.isArray(M))for(let j=0;j<M.length;j++)Kl(r,t,d,M[j],g);else{let j=M;const J=I[xr];Kt(c)&&(j.flags|=128),pp(t,r,j,J,d,g,!0)}}function xy(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function Rg(t,r,s){const{mergedAttrs:c,classes:d,styles:g}=s;null!==c&&Te(t,r,c),null!==d&&xy(t,r,d),null!==g&&function Ny(t,r,s){t.setAttribute(r,"style",s)}(t,r,g)}const Tr={};function Og(t=1){Xh(hr(),Ct(),tr()+t,!1)}function Xh(t,r,s,c){if(!c)if(3==(3&r[vn])){const g=t.preOrderCheckHooks;null!==g&&Lf(r,g,s)}else{const g=t.preOrderHooks;null!==g&&Ll(r,g,0,s)}gi(s)}function Pu(t,r=xn.Default){const s=Ct();return null===s?pr(t,r):Ad(Br(),s,Ut(t),r)}function Qm(){throw new Error("invalid")}function gp(t,r,s,c,d,g){const I=Ee(null);try{let C=null;d&le.SignalBased&&(C=r[c][_e]),null!==C&&void 0!==C.transformFn&&(g=C.transformFn(g)),d&le.HasDecoratorInputTransform&&(g=t.inputTransforms[c].call(r,g)),null!==t.setInput?t.setInput(r,C,g,s,c):Yp(r,C,c,g)}finally{Ee(I)}}function Yl(t,r,s,c,d,g,I,C,M,j,J){const ue=r.blueprint.slice();return ue[ni]=d,ue[vn]=204|c,(null!==j||t&&2048&t[vn])&&(ue[vn]|=2048),uo(ue),ue[xr]=ue[oo]=t,ue[dr]=s,ue[Qi]=I||t&&t[Qi],ue[Pn]=C||t&&t[Pn],ue[$i]=M||t&&t[$i]||null,ue[Bi]=g,ue[us]=function Bm(){return Ey++}(),ue[ji]=J,ue[is]=j,ue[_i]=2==r.type?t[_i]:ue,ue}function Ql(t,r,s,c,d){let g=t.data[r];if(null===g)g=function Yd(t,r,s,c,d){const g=Hr(),I=go(),M=t.data[r]=function Vy(t,r,s,c,d,g){let I=r?r.injectorIndex:-1,C=0;return function ua(){return null!==Fn.skipHydrationRootTNode}()&&(C|=128),{type:s,index:c,insertBeforeIndex:null,injectorIndex:I,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?g:g&&g.parent,s,r,c,d);return null===t.firstChild&&(t.firstChild=M),null!==g&&(I?null==g.child&&null!==M.parent&&(g.child=M):null===g.next&&(g.next=M,M.prev=g)),M}(t,r,s,c,d),function Q(){return Fn.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=s,g.value=c,g.attrs=d;const I=function Va(){const t=Fn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();g.injectorIndex=null===I?-1:I.injectorIndex}return Do(g,!0),g}function gl(t,r,s,c){if(0===s)return-1;const d=r.length;for(let g=0;g<s;g++)r.push(c),t.blueprint.push(c),t.data.push(null);return d}function Uc(t,r,s,c,d){const g=tr(),I=2&c;try{gi(-1),I&&r.length>ln&&Xh(t,r,ln,!1),ta(I?2:0,d),s(c,d)}finally{gi(g),ta(I?3:1,d)}}function Qd(t,r,s){if(js(r)){const c=Ee(null);try{const g=r.directiveEnd;for(let I=r.directiveStart;I<g;I++){const C=t.data[I];C.contentQueries&&C.contentQueries(1,s[I],I)}}finally{Ee(c)}}}function bu(t,r,s){Lo()&&(function kg(t,r,s,c){const d=s.directiveStart,g=s.directiveEnd;Gi(s)&&function wp(t,r,s){const c=yr(r,t),d=Ng(s);let I=16;s.signals?I=4096:s.onPush&&(I=64);const C=eh(t,Yl(t,d,null,I,c,r,null,t[Qi].rendererFactory.createRenderer(c,s),null,null,null));t[r.index]=C}(r,s,t.data[d+s.componentOffset]),t.firstCreatePass||Qu(s,r),Oo(c,r);const I=s.initialInputs;for(let C=d;C<g;C++){const M=t.data[C],j=bd(r,t,C,s);Oo(j,r),null!==I&&Tp(0,C-d,j,M,0,I),Wi(M)&&(Ws(s.index,r)[dr]=bd(r,t,C,s))}}(t,r,s,yr(s,r)),64==(64&s.flags)&&nf(t,r,s))}function Mu(t,r,s=yr){const c=r.localNames;if(null!==c){let d=r.index+1;for(let g=0;g<c.length;g+=2){const I=c[g+1],C=-1===I?s(r,t):t[I];t[d++]=C}}}function Ng(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Ru(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function Ru(t,r,s,c,d,g,I,C,M,j,J){const ue=ln+c,Se=ue+d,je=function ky(t,r){const s=[];for(let c=0;c<r;c++)s.push(c<t?null:Tr);return s}(ue,Se),_t="function"==typeof j?j():j;return je[Vt]={type:t,blueprint:je,template:s,queries:null,viewQuery:C,declTNode:r,data:je.slice().fill(null,ue),bindingStartIndex:ue,expandoStartIndex:Se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:M,consts:_t,incompleteFirstPass:!1,ssrId:J}}let Jd=()=>null;function mp(t,r,s,c,d){for(let g in r){if(!r.hasOwnProperty(g))continue;const I=r[g];if(void 0===I)continue;c??={};let C,M=le.None;Array.isArray(I)?(C=I[0],M=I[1]):C=I;let j=g;if(null!==d){if(!d.hasOwnProperty(g))continue;j=d[g]}0===t?_p(c,s,j,C,M):_p(c,s,j,C)}return c}function _p(t,r,s,c,d){let g;t.hasOwnProperty(s)?(g=t[s]).push(r,c):g=t[s]=[r,c],void 0!==d&&g.push(d)}function Oa(t,r,s,c,d,g,I,C){const M=yr(r,s);let J,j=r.inputs;!C&&null!=j&&(J=j[c])?(Xl(t,s,J,c,d),Gi(r)&&function tf(t,r){const s=Ws(r,t);16&s[vn]||(s[vn]|=64)}(s,r.index)):3&r.type&&(c=function yp(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(c),d=null!=I?I(d,r.value||"",c):d,g.setProperty(M,c,d))}function Ip(t,r,s,c){if(Lo()){const d=null===c?null:{"":-1},g=function Fg(t,r){const s=t.directiveRegistry;let c=null,d=null;if(s)for(let g=0;g<s.length;g++){const I=s[g];if(Oi(r,I.selectors,!1))if(c||(c=[]),Wi(I))if(null!==I.findHostDirectiveDefs){const C=[];d=d||new Map,I.findHostDirectiveDefs(I,C,d),c.unshift(...C,I),Cp(t,r,C.length)}else c.unshift(I),Cp(t,r,0);else d=d||new Map,I.findHostDirectiveDefs?.(I,c,d),c.push(I)}return null===c?null:[c,d]}(t,s);let I,C;null===g?I=C=null:[I,C]=g,null!==I&&xg(t,r,s,I,d,C),d&&function Lg(t,r,s){if(r){const c=t.localNames=[];for(let d=0;d<r.length;d+=2){const g=s[r[d+1]];if(null==g)throw new Bt(-301,!1);c.push(r[d],g)}}}(s,c,d)}s.mergedAttrs=kt(s.mergedAttrs,s.attrs)}function xg(t,r,s,c,d,g){for(let j=0;j<c.length;j++)ig(Qu(s,r),t,c[j].type);!function Vg(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,c.length);for(let j=0;j<c.length;j++){const J=c[j];J.providersResolver&&J.providersResolver(J)}let I=!1,C=!1,M=gl(t,r,c.length,null);for(let j=0;j<c.length;j++){const J=c[j];s.mergedAttrs=kt(s.mergedAttrs,J.hostAttrs),Zm(t,s,r,M,J),jy(M,J,d),null!==J.contentQueries&&(s.flags|=4),(null!==J.hostBindings||null!==J.hostAttrs||0!==J.hostVars)&&(s.flags|=64);const ue=J.type.prototype;!I&&(ue.ngOnChanges||ue.ngOnInit||ue.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),I=!0),!C&&(ue.ngOnChanges||ue.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),C=!0),M++}!function Uy(t,r,s){const d=r.directiveEnd,g=t.data,I=r.attrs,C=[];let M=null,j=null;for(let J=r.directiveStart;J<d;J++){const ue=g[J],Se=s?s.get(ue):null,_t=Se?Se.outputs:null;M=mp(0,ue.inputs,J,M,Se?Se.inputs:null),j=mp(1,ue.outputs,J,j,_t);const Ot=null===M||null===I||Yn(r)?null:$y(M,J,I);C.push(Ot)}null!==M&&(M.hasOwnProperty("class")&&(r.flags|=8),M.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=C,r.inputs=M,r.outputs=j}(t,s,g)}function nf(t,r,s){const c=s.directiveStart,d=s.directiveEnd,g=s.index,I=function me(){return Fn.lFrame.currentDirectiveIndex}();try{gi(g);for(let C=c;C<d;C++){const M=t.data[C],j=r[C];ot(C),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&Xm(M,j)}}finally{gi(-1),ot(I)}}function Xm(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Cp(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function jy(t,r,s){if(s){if(r.exportAs)for(let c=0;c<r.exportAs.length;c++)s[r.exportAs[c]]=t;Wi(r)&&(s[""]=t)}}function Zm(t,r,s,c,d){t.data[c]=d;const g=d.factory||(d.factory=Rc(d.type)),I=new Td(g,Wi(d),Pu);t.blueprint[c]=I,s[c]=I,function By(t,r,s,c,d){const g=d.hostBindings;if(g){let I=t.hostBindingOpCodes;null===I&&(I=t.hostBindingOpCodes=[]);const C=~r.index;(function Jm(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(I)!=C&&I.push(C),I.push(s,c,g)}}(t,r,c,gl(t,s,d.hostVars,Tr),d)}function Bc(t,r,s,c,d,g){const I=yr(t,r);!function Ug(t,r,s,c,d,g,I){if(null==g)t.removeAttribute(r,d,s);else{const C=null==I?cr(g):I(g,c||"",d);t.setAttribute(r,d,C,s)}}(r[Pn],I,g,t.value,s,c,d)}function Tp(t,r,s,c,d,g){const I=g[r];if(null!==I)for(let C=0;C<I.length;)gp(c,s,I[C++],I[C++],I[C++],I[C++])}function $y(t,r,s){let c=null,d=0;for(;d<s.length;){const g=s[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(t.hasOwnProperty(g)){null===c&&(c=[]);const I=t[g];for(let C=0;C<I.length;C+=3)if(I[C]===r){c.push(g,I[C+1],I[C+2],s[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Zd(t,r,s,c){return[t,!0,0,r,null,c,null,s,null,null]}function e_(t,r){const s=t.contentQueries;if(null!==s){const c=Ee(null);try{for(let d=0;d<s.length;d+=2){const I=s[d+1];if(-1!==I){const C=t.data[I];ii(s[d]),C.contentQueries(2,r[I],I)}}}finally{Ee(c)}}}function eh(t,r){return t[Fi]?t[wo][rs]=r:t[Fi]=r,t[wo]=r,r}function Bg(t,r,s){ii(0);const c=Ee(null);try{r(t,s)}finally{Ee(c)}}function rf(t){return t[Yi]||(t[Yi]=[])}function Dp(t){return t.cleanup||(t.cleanup=[])}function ad(t,r){const s=t[$i],c=s?s.get(Du,null):null;c&&c.handleError(r)}function Xl(t,r,s,c,d){for(let g=0;g<s.length;){const I=s[g++],C=s[g++],M=s[g++];gp(t.data[I],r[I],c,C,M,d)}}function jg(t,r){const s=Ws(r,t),c=s[Vt];!function Zl(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(c,s);const d=s[ni];null!==d&&null===s[ji]&&(s[ji]=fu(d,s[$i])),cd(c,s,s[dr])}function cd(t,r,s){Jn(r);try{const c=t.viewQuery;null!==c&&Bg(1,c,s);const d=t.template;null!==d&&Uc(t,r,d,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),r[Li]?.finishViewCreation(t),t.staticContentQueries&&e_(t,r),t.staticViewQueries&&Bg(2,t.viewQuery,s);const g=t.components;null!==g&&function Gy(t,r){for(let s=0;s<r.length;s++)jg(t,r[s])}(r,g)}catch(c){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),c}finally{r[vn]&=-5,Zi()}}function th(t,r){return!r||null===r.firstChild||Kt(t)}function Ou(t,r,s,c=!0){const d=r[Vt];if(function cp(t,r,s,c){const d=yi+c,g=s.length;c>0&&(s[d-1][rs]=r),c<g-yi?(r[rs]=s[d],gd(s,yi+c,r)):(s.push(r),r[rs]=null),r[xr]=s;const I=r[Ls];null!==I&&s!==I&&function Ry(t,r){const s=t[Ko];r[_i]!==r[xr][xr][_i]&&(t[vn]|=As.HasTransplantedViews),null===s?t[Ko]=[r]:s.push(r)}(I,r);const C=r[Li];null!==C&&C.insertView(t),Za(r),r[vn]|=128}(d,r,t,s),c){const I=od(s,t),C=r[Pn],M=Yh(C,t[Ji]);null!==M&&function bg(t,r,s,c,d,g){c[ni]=d,c[Bi]=r,Ks(t,c,s,1,d,g)}(d,t[Bi],C,r,M,I)}const g=r[ji];null!==g&&null!==g.firstChild&&(g.firstChild=null)}function Nu(t,r,s,c,d=!1){for(;null!==s;){const g=r[s.index];null!==g&&c.push(Wr(g)),Xi(g)&&Ya(g,c);const I=s.type;if(8&I)Nu(t,r,s.child,c);else if(32&I){const C=op(s,r);let M;for(;M=C();)c.push(M)}else if(16&I){const C=qm(r,s);if(Array.isArray(C))c.push(...C);else{const M=Zs(r[_i]);Nu(M[Vt],M,C,c,!0)}}s=d?s.projectionNext:s.next}return c}function Ya(t,r){for(let s=yi;s<t.length;s++){const c=t[s],d=c[Vt].firstChild;null!==d&&Nu(c[Vt],c,d,r)}t[Ji]!==t[ni]&&r.push(t[Ji])}let eu=[];const Wg={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ca(t.lView)},consumerOnSignalRead(){this.lView[Us]=this}};function n_(t){return Ap(t[Fi])}function xu(t){return Ap(t[rs])}function Ap(t){for(;null!==t&&!Xi(t);)t=t[rs];return t}function ud(t,r=!0,s=0){const c=t[Qi],d=c.rendererFactory;d.begin?.();try{!function bp(t,r){rh(t,r);let s=0;for(;ho(t);){if(100===s)throw new Bt(103,!1);s++,rh(t,1)}}(t,s)}catch(I){throw r&&ad(t,I),I}finally{d.end?.(),c.inlineEffectRunner?.flush()}}function cf(t,r,s,c){const d=r[vn];if(256==(256&d))return;r[Qi].inlineEffectRunner?.flush(),Jn(r);let I=null,C=null;(function Mp(t){return 2!==t.type})(t)&&(C=function Wy(t){return t[Us]??function $g(t){const r=eu.pop()??Object.create(Wg);return r.lView=t,r}(t)}(r),I=function tt(t){return t&&(t.nextProducerIndex=0),Ee(t)}(C));try{uo(r),function zs(t){return Fn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&Uc(t,r,s,2,c);const M=3==(3&d);if(M){const ue=t.preOrderCheckHooks;null!==ue&&Lf(r,ue,null)}else{const ue=t.preOrderHooks;null!==ue&&Ll(r,ue,0,null),Vf(r,0)}if(function zg(t){for(let r=n_(t);null!==r;r=xu(r)){if(!(r[vn]&As.HasTransplantedViews))continue;const s=r[Ko];for(let c=0;c<s.length;c++){Fo(s[c])}}}(r),lf(r,0),null!==t.contentQueries&&e_(t,r),M){const ue=t.contentCheckHooks;null!==ue&&Lf(r,ue)}else{const ue=t.contentHooks;null!==ue&&Ll(r,ue,1),Vf(r,1)}!function Zh(t,r){const s=t.hostBindingOpCodes;if(null!==s)try{for(let c=0;c<s.length;c++){const d=s[c];if(d<0)gi(~d);else{const g=d,I=s[++c],C=s[++c];z(I,g),C(2,r[g])}}}finally{gi(-1)}}(t,r);const j=t.components;null!==j&&r_(r,j,0);const J=t.viewQuery;if(null!==J&&Bg(2,J,c),M){const ue=t.viewCheckHooks;null!==ue&&Lf(r,ue)}else{const ue=t.viewHooks;null!==ue&&Ll(r,ue,2),Vf(r,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[zo]){for(const ue of r[zo])ue();r[zo]=null}r[vn]&=-73}catch(M){throw ca(r),M}finally{null!==C&&(function Ke(t,r){if(Ee(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Re(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)ae(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}(C,I),function Gg(t){t.lView[Us]!==t&&(t.lView=null,eu.push(t))}(C)),Zi()}}function lf(t,r){for(let s=n_(t);null!==s;s=xu(s))for(let c=yi;c<s.length;c++)qg(s[c],r)}function nh(t,r,s){qg(Ws(r,t),s)}function qg(t,r){ko(t)&&rh(t,r)}function rh(t,r){const c=t[Vt],d=t[vn],g=t[Us];let I=!!(0===r&&16&d);if(I||=!!(64&d&&0===r),I||=!!(1024&d),I||=!(!g?.dirty||!st(g)),g&&(g.dirty=!1),t[vn]&=-9217,I)cf(c,t,c.template,t[dr]);else if(8192&d){lf(t,1);const C=c.components;null!==C&&r_(t,C,1)}}function r_(t,r,s){for(let c=0;c<r.length;c++)nh(t,r[c],s)}function uf(t){for(t[Qi].changeDetectionScheduler?.notify();t;){t[vn]|=64;const r=Zs(t);if(Ta(t)&&!r)return t;t=r}return null}class df{get rootNodes(){const r=this._lView,s=r[Vt];return Nu(s,r,s.firstChild,[])}constructor(r,s,c=!0){this._lView=r,this._cdRefInjectingView=s,this.notifyErrorHandler=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[dr]}set context(r){this._lView[dr]=r}get destroyed(){return 256==(256&this._lView[vn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[xr];if(Xi(r)){const s=r[8],c=s?s.indexOf(this):-1;c>-1&&(zd(r,c),wl(s,c))}this._attachedToViewContainer=!1}lp(this._lView[Vt],this._lView)}onDestroy(r){ec(this._lView,r)}markForCheck(){uf(this._cdRefInjectingView||this._lView)}detach(){this._lView[vn]&=-129}reattach(){Za(this._lView),this._lView[vn]|=128}detectChanges(){this._lView[vn]|=1024,ud(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Bt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Su(this._lView[Vt],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Bt(902,!1);this._appRef=r,Za(this._lView)}}let hf=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Rp}return t})();const ff=hf,pf=class extends ff{constructor(r,s,c){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,c){const d=function ld(t,r,s,c){const d=r.tView,C=Yl(t,d,s,4096&t[vn]?4096:16,null,r,null,null,null,c?.injector??null,c?.dehydratedView??null);C[Ls]=t[r.index];const j=t[Li];return null!==j&&(C[Li]=j.createEmbeddedView(d)),cd(d,C,s),C}(this._declarationLView,this._declarationTContainer,r,{injector:s,dehydratedView:c});return new df(d)}};function Rp(){return ih(Br(),Ct())}function ih(t,r){return 4&t.type?new pf(r,t,Ht(t,r)):null}class Op{}class zy{}class br{}class Np{resolveComponentFactory(r){throw function ah(t){const r=Error(`No component factory found for ${Bn(t)}.`);return r.ngComponent=t,r}(r)}}let s_=(()=>{class t{static#e=this.NULL=new Np}return t})();class jv{}let $v=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function dI(){const t=Ct(),s=Ws(Br().index,t);return(ds(s)?s:t)[Pn]}()}return t})(),hI=(()=>{class t{static#e=this.\u0275prov=Ir({token:t,providedIn:"root",factory:()=>null})}return t})();const qy={};function Hv(t){return function Gv(t){return"function"==typeof t&&void 0!==t[_e]}(t)&&"function"==typeof t.set}function Lu(t){const r=Ee(null);try{return t()}finally{Ee(r)}}function Ky(t){return!!Yy(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Yy(t){return null!==t&&("function"==typeof t||"object"==typeof t)}class zv{constructor(){}supports(r){return Ky(r)}create(r){return new Kv(r)}}const qv=(t,r)=>r;class Kv{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||qv}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,c=this._removalsHead,d=0,g=null;for(;s||c;){const I=!c||s&&s.currentIndex<Zg(c,d,g)?s:c,C=Zg(I,d,g),M=I.currentIndex;if(I===c)d--,c=c._nextRemoved;else if(s=s._next,null==I.previousIndex)d++;else{g||(g=[]);const j=C-d,J=M-d;if(j!=J){for(let Se=0;Se<j;Se++){const je=Se<g.length?g[Se]:g[Se]=0,_t=je+Se;J<=_t&&_t<j&&(g[Se]=je+1)}g[I.previousIndex]=J-j}}C!==M&&r(I,C,M)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Ky(r))throw new Bt(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let d,g,I,s=this._itHead,c=!1;if(Array.isArray(r)){this.length=r.length;for(let C=0;C<this.length;C++)g=r[C],I=this._trackByFn(C,g),null!==s&&Object.is(s.trackById,I)?(c&&(s=this._verifyReinsertion(s,g,I,C)),Object.is(s.item,g)||this._addIdentityChange(s,g)):(s=this._mismatch(s,g,I,C),c=!0),s=s._next}else d=0,function o_(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let c;for(;!(c=s.next()).done;)r(c.value)}}(r,C=>{I=this._trackByFn(d,C),null!==s&&Object.is(s.trackById,I)?(c&&(s=this._verifyReinsertion(s,C,I,d)),Object.is(s.item,C)||this._addIdentityChange(s,C)):(s=this._mismatch(s,C,I,d),c=!0),s=s._next,d++}),this.length=d;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,c,d){let g;return null===r?g=this._itTail:(g=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,g,d)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,g,d)):r=this._addAfter(new a_(s,c),g,d),r}_verifyReinsertion(r,s,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?r=this._reinsertAfter(g,r._prev,d):r.currentIndex!=d&&(r.currentIndex=d,this._addToMoves(r,d)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const d=r._prevRemoved,g=r._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(r,s,c),this._addToMoves(r,c),r}_moveAfter(r,s,c){return this._unlink(r),this._insertAfter(r,s,c),this._addToMoves(r,c),r}_addAfter(r,s,c){return this._insertAfter(r,s,c),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,c){const d=null===s?this._itHead:s._next;return r._next=d,r._prev=s,null===d?this._itTail=r:d._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new lh),this._linkedRecords.put(r),r.currentIndex=c,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,c=r._next;return null===s?this._itHead=c:s._next=c,null===c?this._itTail=s:c._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lh),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class a_{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class fI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===s||s<=c.currentIndex)&&Object.is(c.trackById,r))return c;return null}remove(r){const s=r._prevDup,c=r._nextDup;return null===s?this._head=c:s._nextDup=c,null===c?this._tail=s:c._prevDup=s,null===this._head}}class lh{constructor(){this.map=new Map}put(r){const s=r.trackById;let c=this.map.get(s);c||(c=new fI,this.map.set(s,c)),c.add(r)}get(r,s){const d=this.map.get(r);return d?d.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zg(t,r,s){const c=t.previousIndex;if(null===c)return c;let d=0;return s&&c<s.length&&(d=s[c]),c+r+d}class xp{constructor(){}supports(r){return r instanceof Map||Yy(r)}create(){return new Yv}}class Yv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Yy(r)))throw new Bt(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(c,d)=>{if(s&&s.key===d)this._maybeAddToChanges(s,c),this._appendAfter=s,s=s._next;else{const g=this._getOrCreateRecordForKey(d,c);s=this._insertBeforeOrAppend(s,g)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let c=s;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const c=r._prev;return s._next=r,s._prev=c,r._prev=s,c&&(c._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const d=this._records.get(r);this._maybeAddToChanges(d,s);const g=d._prev,I=d._next;return g&&(g._next=I),I&&(I._prev=g),d._next=null,d._prev=null,d}const c=new Qy(r);return this._records.set(r,c),c.currentValue=s,this._addToAdditions(c),c}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(c=>s(r[c],c))}}class Qy{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function c_(){return new em([new zv])}let em=(()=>{class t{static#e=this.\u0275prov=Ir({token:t,providedIn:"root",factory:c_});constructor(s){this.factories=s}static create(s,c){if(null!=c){const d=c.factories.slice();s=s.concat(d)}return new t(s)}static extend(s){return{provide:t,useFactory:c=>t.create(s,c||c_()),deps:[[t,new Rl,new Ed]]}}find(s){const c=this.factories.find(d=>d.supports(s));if(null!=c)return c;throw new Bt(901,!1)}}return t})();function l_(){return new tm([new xp])}let tm=(()=>{class t{static#e=this.\u0275prov=Ir({token:t,providedIn:"root",factory:l_});constructor(s){this.factories=s}static create(s,c){if(c){const d=c.factories.slice();s=s.concat(d)}return new t(s)}static extend(s){return{provide:t,useFactory:c=>t.create(s,c||l_()),deps:[[t,new Rl,new Ed]]}}find(s){const c=this.factories.find(d=>d.supports(s));if(c)return c;throw new Bt(901,!1)}}return t})(),uh=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Xv}return t})();function Xv(t){return function Zv(t,r,s){if(Gi(t)&&!s){const c=Ws(t.index,r);return new df(c,c)}return 47&t.type?new df(r[_i],r):null}(Br(),Ct(),16==(16&t))}let mf=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=rm;static#t=this.__NG_ENV_ID__=s=>s}return t})();class eE extends mf{constructor(r){super(),this._lView=r}onDestroy(r){return ec(this._lView,r),()=>function vl(t,r){if(null===t[Si])return;const s=t[Si].indexOf(r);-1!==s&&t[Si].splice(s,1)}(this._lView,r)}}function rm(){return new eE(Ct())}const kp=new Set;function _f(t){kp.has(t)||(kp.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function yf(...t){}class Qs{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ui(!1),this.onMicrotaskEmpty=new ui(!1),this.onStable=new ui(!1),this.onError=new ui(!1),typeof Zone>"u")throw new Bt(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&s,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function lw(){const t="function"==typeof Zt.requestAnimationFrame;let r=Zt[t?"requestAnimationFrame":"setTimeout"],s=Zt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c);const d=s[Zone.__symbol__("OriginalDelegate")];d&&(s=d)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function mI(t){const r=()=>{!function gI(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Zt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Lp(t),t.isCheckStableRunning=!0,Fp(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Lp(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,c,d,g,I,C)=>{if(function _I(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(C))return s.invokeTask(d,g,I,C);try{return nE(t),s.invokeTask(d,g,I,C)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||t.shouldCoalesceRunChangeDetection)&&r(),rE(t)}},onInvoke:(s,c,d,g,I,C,M)=>{try{return nE(t),s.invoke(d,g,I,C,M)}finally{t.shouldCoalesceRunChangeDetection&&r(),rE(t)}},onHasTask:(s,c,d,g)=>{s.hasTask(d,g),c===d&&("microTask"==g.change?(t._hasPendingMicrotasks=g.microTask,Lp(t),Fp(t)):"macroTask"==g.change&&(t.hasPendingMacrotasks=g.macroTask))},onHandleError:(s,c,d,g)=>(s.handleError(d,g),t.runOutsideAngular(()=>t.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qs.isInAngularZone())throw new Bt(909,!1)}static assertNotInAngularZone(){if(Qs.isInAngularZone())throw new Bt(909,!1)}run(r,s,c){return this._inner.run(r,s,c)}runTask(r,s,c,d){const g=this._inner,I=g.scheduleEventTask("NgZoneEvent: "+d,r,pI,yf,yf);try{return g.runTask(I,s,c)}finally{g.cancelTask(I)}}runGuarded(r,s,c){return this._inner.runGuarded(r,s,c)}runOutsideAngular(r){return this._outer.run(r)}}const pI={};function Fp(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Lp(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function nE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function rE(t){t._nesting--,Fp(t)}class sm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ui,this.onMicrotaskEmpty=new ui,this.onStable=new ui,this.onError=new ui}run(r,s,c){return r.apply(s,c)}runGuarded(r,s,c){return r.apply(s,c)}runOutsideAngular(r){return r()}runTask(r,s,c,d){return r.apply(s,c)}}var hh=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(hh||{});const ev={destroy(){}};function nv(t,r){!r&&function jo(t){if(!Pf()&&!function Pi(){return Sc}())throw new Bt(-203,!1)}();const s=r?.injector??wr(ba);if(!function zl(t){return"browser"===(t??wr(ba)).get(A)}(s))return ev;_f("NgAfterNextRender");const c=s.get(am),d=c.handler??=new om,g=r?.phase??hh.MixedReadWrite,I=()=>{d.unregister(M),C()},C=s.get(mf).onDestroy(I),M=new d_(s,g,()=>{I(),t()});return d.register(M),{destroy:I}}class d_{constructor(r,s,c){this.phase=s,this.callbackFn=c,this.zone=r.get(Qs),this.errorHandler=r.get(Du,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(r){this.errorHandler?.handleError(r)}}}class om{constructor(){this.executingCallbacks=!1,this.buckets={[hh.EarlyRead]:new Set,[hh.Write]:new Set,[hh.MixedReadWrite]:new Set,[hh.Read]:new Set},this.deferredCallbacks=new Set}register(r){(this.executingCallbacks?this.deferredCallbacks:this.buckets[r.phase]).add(r)}unregister(r){this.buckets[r.phase].delete(r),this.deferredCallbacks.delete(r)}execute(){this.executingCallbacks=!0;for(const r of Object.values(this.buckets))for(const s of r)s.invoke();this.executingCallbacks=!1;for(const r of this.deferredCallbacks)this.buckets[r.phase].add(r);this.deferredCallbacks.clear()}destroy(){for(const r of Object.values(this.buckets))r.clear();this.deferredCallbacks.clear()}}let am=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){const s=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const c of s)c();this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Ir({token:t,providedIn:"root",factory:()=>new t})}return t})();function vf(t){return!!hi(t)}function tu(t,r,s){let c=s?t.styles:null,d=s?t.classes:null,g=0;if(null!==r)for(let I=0;I<r.length;I++){const C=r[I];"number"==typeof C?g=C:1==g?d=Or(d,C):2==g&&(c=Or(c,C+": "+r[++I]+";"))}s?t.styles=c:t.stylesWithoutHost=c,s?t.classes=d:t.classesWithoutHost=d}class oE extends s_{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=rr(r);return new cm(s,this.ngModule)}}function aE(t){const r=[];for(const s in t){if(!t.hasOwnProperty(s))continue;const c=t[s];void 0!==c&&r.push({propName:Array.isArray(c)?c[0]:c,templateName:s})}return r}class II{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,c){c=Io(c);const d=this.injector.get(r,qy,c);return d!==qy||s===qy?d:this.parentInjector.get(r,s,c)}}class cm extends br{get inputs(){const r=this.componentDef,s=r.inputTransforms,c=aE(r.inputs);if(null!==s)for(const d of c)s.hasOwnProperty(d.propName)&&(d.transform=s[d.propName]);return c}get outputs(){return aE(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Ni(t){return t.map(ls).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,c,d){let g=(d=d||this.ngModule)instanceof ct?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const I=g?new II(r,g):r,C=I.get(jv,null);if(null===C)throw new Bt(407,!1);const ue={rendererFactory:C,sanitizer:I.get(hI,null),inlineEffectRunner:null,afterRenderEventManager:I.get(am,null),changeDetectionScheduler:I.get(Op,null)},Se=C.createRenderer(null,this.componentDef),je=this.componentDef.selectors[0][0]||"div",_t=c?function Fy(t,r,s,c){const g=c.get(hg,!1)||s===wn.ShadowDom,I=t.selectRootElement(r,g);return function Jl(t){Jd(t)}(I),I}(Se,c,this.componentDef.encapsulation,I):zh(Se,je,function EI(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(je));let Ot=512;this.componentDef.signals?Ot|=4096:this.componentDef.onPush||(Ot|=16);let Yt=null;null!==_t&&(Yt=fu(_t,I,!0));const Tn=Ru(0,null,null,1,0,null,null,null,null,null,null),Rt=Yl(null,Tn,null,Ot,null,null,ue,Se,I,null,Yt);let Mr,Ii;Jn(Rt);try{const Ti=this.componentDef;let Qa,K_=null;Ti.findHostDirectiveDefs?(Qa=[],K_=new Map,Ti.findHostDirectiveDefs(Ti,Qa,K_),Qa.push(Ti)):Qa=[Ti];const fR=function lE(t,r){const s=t[Vt],c=ln;return t[c]=r,Ql(s,c,2,"#host",null)}(Rt,_t),pR=function CI(t,r,s,c,d,g,I){const C=d[Vt];!function wI(t,r,s,c){for(const d of t)r.mergedAttrs=kt(r.mergedAttrs,d.hostAttrs);null!==r.mergedAttrs&&(tu(r,r.mergedAttrs,!0),null!==s&&Rg(c,s,r))}(c,t,r,I);let M=null;null!==r&&(M=fu(r,d[$i]));const j=g.rendererFactory.createRenderer(r,s);let J=16;s.signals?J=4096:s.onPush&&(J=64);const ue=Yl(d,Ng(s),null,J,d[t.index],t,g,j,null,null,M);return C.firstCreatePass&&Cp(C,t,c.length-1),eh(d,ue),d[t.index]=ue}(fR,_t,Ti,Qa,Rt,ue,Se);Ii=ss(Tn,ln),_t&&function TI(t,r,s,c){if(c)Te(t,s,["ng-version","17.2.2"]);else{const{attrs:d,classes:g}=function di(t){const r=[],s=[];let c=1,d=2;for(;c<t.length;){let g=t[c];if("string"==typeof g)2===d?""!==g&&r.push(g,t[++c]):8===d&&s.push(g);else{if(!$n(d))break;d=g}c++}return{attrs:r,classes:s}}(r.selectors[0]);d&&Te(t,s,d),g&&g.length>0&&xy(t,s,g.join(" "))}}(Se,Ti,_t,c),void 0!==s&&function Up(t,r,s){const c=t.projection=[];for(let d=0;d<r.length;d++){const g=s[d];c.push(null!=g?Array.from(g):null)}}(Ii,this.ngContentSelectors,s),Mr=function uE(t,r,s,c,d,g){const I=Br(),C=d[Vt],M=yr(I,d);xg(C,d,I,s,null,c);for(let J=0;J<s.length;J++)Oo(bd(d,C,I.directiveStart+J,I),d);nf(C,d,I),M&&Oo(M,d);const j=bd(d,C,I.directiveStart+I.componentOffset,I);if(t[dr]=d[dr]=j,null!==g)for(const J of g)J(j,r);return Qd(C,I,d),j}(pR,Ti,Qa,K_,Rt,[rv]),cd(Tn,Rt,null)}finally{Zi()}return new cE(this.componentType,Mr,Ht(Ii,Rt),Rt,Ii)}}class cE extends zy{constructor(r,s,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new df(d,void 0,!1),this.componentType=r}setInput(r,s){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const g=this._rootLView;Xl(g[Vt],g,d,r,s),this.previousInputValues.set(r,s),uf(Ws(this._tNode.index,g))}}get injector(){return new to(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function rv(){const t=Br();cl(Ct()[Vt],t)}let iv=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=DI}return t})();function DI(){return AI(Br(),Ct())}const SI=iv,dE=class extends SI{constructor(r,s,c){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=c}get element(){return Ht(this._hostTNode,this._hostLView)}get injector(){return new to(this._hostTNode,this._hostLView)}get parentInjector(){const r=$f(this._hostTNode,this._hostLView);if(bh(r)){const s=Ul(r,this._hostLView),c=gs(r);return new to(s[Vt].data[c+8],s)}return new to(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=hE(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-yi}createEmbeddedView(r,s,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const C=r.createEmbeddedViewImpl(s||{},g,null);return this.insertImpl(C,d,th(this._hostTNode,null)),C}createComponent(r,s,c,d,g){const I=r&&!function al(t){return"function"==typeof t}(r);let C;if(I)C=s;else{const _t=s||{};C=_t.index,c=_t.injector,d=_t.projectableNodes,g=_t.environmentInjector||_t.ngModuleRef}const M=I?r:new cm(rr(r)),j=c||this.parentInjector;if(!g&&null==M.ngModule){const Ot=(I?j:this.parentInjector).get(ct,null);Ot&&(g=Ot)}rr(M.componentType??{});const je=M.create(j,d,null,g);return this.insertImpl(je.hostView,C,th(this._hostTNode,null)),je}insert(r,s){return this.insertImpl(r,s,!0)}insertImpl(r,s,c){const d=r._lView;if(function zc(t){return Xi(t[xr])}(d)){const C=this.indexOf(r);if(-1!==C)this.detach(C);else{const M=d[xr],j=new dE(M,M[Bi],M[xr]);j.detach(j.indexOf(r))}}const g=this._adjustIndex(s),I=this._lContainer;return Ou(I,d,g,c),r.attachToViewContainerRef(),gd(sv(I),g,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=hE(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),c=zd(this._lContainer,s);c&&(wl(sv(this._lContainer),s),lp(c[Vt],c))}detach(r){const s=this._adjustIndex(r,-1),c=zd(this._lContainer,s);return c&&null!=wl(sv(this._lContainer),s)?new df(c):null}_adjustIndex(r,s=0){return r??this.length+s}};function hE(t){return t[8]}function sv(t){return t[8]||(t[8]=[])}function AI(t,r){let s;const c=r[t.index];return Xi(c)?s=c:(s=Zd(c,r,null,t),r[t.index]=s,eh(r,s)),PI(s,r,t,c),new dE(s,t,r)}let PI=function gE(t,r,s,c){if(t[Ji])return;let d;d=8&s.type?Wr(c):function dw(t,r){const s=t[Pn],c=s.createComment(""),d=yr(r,t);return Ra(s,Yh(s,d),c,function hp(t,r){return t.nextSibling(r)}(s,d),!1),c}(r,s),t[Ji]=d},fE=()=>!1;class p_{constructor(r){this.queryList=r,this.matches=null}clone(){return new p_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vu{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const c=null!==r.contentQueries?r.contentQueries[0]:s.length,d=[];for(let g=0;g<c;g++){const I=s.getByIndex(g);d.push(this.queries[I.indexInDeclarationView].clone())}return new Vu(d)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}finishViewCreation(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==m_(r,s).matches&&this.queries[s].setDirty()}}class mE{constructor(r,s,c=null){this.flags=s,this.read=c,this.predicate="string"==typeof r?function fw(t){return t.split(",").map(r=>r.trim())}(r):r}}class ov{constructor(r=[]){this.queries=r}elementStart(r,s){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let c=0;c<this.length;c++){const d=null!==s?s.length:0,g=this.getByIndex(c).embeddedTView(r,d);g&&(g.indexInDeclarationView=c,null!==s?s.push(g):s=[g])}return null!==s?new ov(s):null}template(r,s){for(let c=0;c<this.queries.length;c++)this.queries[c].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class av{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new av(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let c=r.parent;for(;null!==c&&8&c.type&&c.index!==s;)c=c.parent;return s===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(r,s,RI(s,g)),this.matchTNodeWithReadOption(r,s,sg(s,r,g,!1,!1))}else c===hf?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,sg(s,r,c,!1,!1))}matchTNodeWithReadOption(r,s,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===ht||d===iv||d===hf&&4&s.type)this.addMatch(s.index,-2);else{const g=sg(s,r,d,!1,!1);null!==g&&this.addMatch(s.index,g)}else this.addMatch(s.index,c)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function RI(t,r){const s=t.localNames;if(null!==s)for(let c=0;c<s.length;c+=2)if(s[c]===r)return s[c+1];return null}function NI(t,r,s,c){return-1===s?function OI(t,r){return 11&t.type?Ht(t,r):4&t.type?ih(t,r):null}(r,t):-2===s?function xI(t,r,s){return s===ht?Ht(r,t):s===hf?ih(r,t):s===iv?AI(r,t):void 0}(t,r,c):bd(t,t[Vt],s,r)}function kI(t,r,s,c){const d=r[Li].queries[c];if(null===d.matches){const g=t.data,I=s.matches,C=[];for(let M=0;null!==I&&M<I.length;M+=2){const j=I[M];C.push(j<0?null:NI(r,g[j],I[M+1],s.metadata.read))}d.matches=C}return d.matches}function _E(t,r,s,c){const d=t.queries.getByIndex(s),g=d.matches;if(null!==g){const I=kI(t,r,d,s);for(let C=0;C<g.length;C+=2){const M=g[C];if(M>0)c.push(I[C/2]);else{const j=g[C+1],J=r[-M];for(let ue=yi;ue<J.length;ue++){const Se=J[ue];Se[Ls]===Se[xr]&&_E(Se[Vt],Se,j,c)}if(null!==J[Ko]){const ue=J[Ko];for(let Se=0;Se<ue.length;Se++){const je=ue[Se];_E(je[Vt],je,j,c)}}}}}return c}function yE(t,r,s){const c=new _n(4==(4&s));return function Ly(t,r,s,c){const d=rf(r);d.push(s),t.firstCreatePass&&Dp(t).push(c,d.length-1)}(t,r,c,c.destroy),(r[Li]??=new Vu).queries.push(new p_(c))-1}function VI(t,r,s){null===t.queries&&(t.queries=new ov),t.queries.track(new av(r,s))}function m_(t,r){return t.queries.getByIndex(r)}function UI(t,r){const s=t[Vt],c=m_(s,r);return c.crossesNgTemplate?_E(s,t,r,[]):kI(s,t,c,r)}function w_(t){let r=function fv(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const c=[t];for(;r;){let d;if(Wi(t))d=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Bt(903,!1);d=r.\u0275dir}if(d){if(s){c.push(d);const I=t;I.inputs=hm(t.inputs),I.inputTransforms=hm(t.inputTransforms),I.declaredInputs=hm(t.declaredInputs),I.outputs=hm(t.outputs);const C=d.hostBindings;C&&ME(t,C);const M=d.viewQuery,j=d.contentQueries;if(M&&QI(t,M),j&&JI(t,j),YI(t,d),nt(t.outputs,d.outputs),Wi(d)&&d.data.animation){const J=t.data;J.animation=(J.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let I=0;I<g.length;I++){const C=g[I];C&&C.ngInherit&&C(t),C===w_&&(s=!1)}}r=Object.getPrototypeOf(r)}!function bE(t){let r=0,s=null;for(let c=t.length-1;c>=0;c--){const d=t[c];d.hostVars=r+=d.hostVars,d.hostAttrs=kt(d.hostAttrs,s=kt(s,d.hostAttrs))}}(c)}function YI(t,r){for(const s in r.inputs){if(!r.inputs.hasOwnProperty(s)||t.inputs.hasOwnProperty(s))continue;const c=r.inputs[s];if(void 0!==c&&(t.inputs[s]=c,t.declaredInputs[s]=r.declaredInputs[s],null!==r.inputTransforms)){const d=Array.isArray(c)?c[0]:c;if(!r.inputTransforms.hasOwnProperty(d))continue;t.inputTransforms??={},t.inputTransforms[d]=r.inputTransforms[d]}}}function hm(t){return t===jn?{}:t===Oe?[]:t}function QI(t,r){const s=t.viewQuery;t.viewQuery=s?(c,d)=>{r(c,d),s(c,d)}:r}function JI(t,r){const s=t.contentQueries;t.contentQueries=s?(c,d,g)=>{r(c,d,g),s(c,d,g)}:r}function ME(t,r){const s=t.hostBindings;t.hostBindings=s?(c,d)=>{r(c,d),s(c,d)}:r}function NE(t){const r=t.inputConfig,s={};for(const c in r)if(r.hasOwnProperty(c)){const d=r[c];Array.isArray(d)&&d[3]&&(s[c]=d[3])}t.inputTransforms=s}class Cf{}class xE{}function rC(t,r){return new gv(t,r??null,[])}class gv extends Cf{constructor(r,s,c){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new oE(this);const d=hi(r);this._bootstrapComponents=Ma(d.bootstrap),this._r3Injector=Pm(r,s,[{provide:Cf,useValue:this},{provide:s_,useValue:this.componentFactoryResolver},...c],Bn(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class kE extends xE{constructor(r){super(),this.moduleType=r}create(r){return new gv(this.moduleType,r,[])}}class FE extends Cf{constructor(r){super(),this.componentFactoryResolver=new oE(this),this.instance=null;const s=new Pt([...r.providers,{provide:Cf,useValue:this},{provide:s_,useValue:this.componentFactoryResolver}],r.parent||Ne(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function LE(t,r,s=null){return new FE({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let i=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new qn.g(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(c){return new(c||t)};static#t=this.\u0275prov=Ir({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function e(t,r,s){return t[r]=s}function o(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function u(t,r,s,c){const d=o(t,r,s);return o(t,r+1,c)||d}function L(t,r,s,c,d,g,I,C){const M=Ct(),j=hr(),J=t+ln,ue=j.firstCreatePass?function R(t,r,s,c,d,g,I,C,M){const j=r.consts,J=Ql(r,t,4,I||null,vs(j,C));Ip(r,s,J,vs(j,M)),cl(r,J);const ue=J.tView=Ru(2,J,c,d,g,r.directiveRegistry,r.pipeRegistry,null,r.schemas,j,null);return null!==r.queries&&(r.queries.template(r,J),ue.queries=r.queries.embeddedTView(J)),J}(J,j,M,r,s,c,d,g,I):j.data[J];Do(ue,!1);const Se=$(j,M,ue,t);sn()&&Qh(j,M,Se,ue),Oo(Se,M);const je=Zd(Se,M,Se,ue);return M[J]=je,eh(M,je),function pE(t,r,s){return fE(t,r,s)}(je,ue,M),$s(ue)&&bu(j,M,ue),null!=I&&Mu(M,ue,C),L}let $=function ne(t,r,s,c){return fn(!0),r[Pn].createComment("")};function fC(t,r,s,c){const d=Ct();return o(d,Pr(),r)&&(hr(),Bc(ir(),d,t,r,s,c)),fC}function BE(t,r){return t<<17|r<<2}function Gp(t){return t>>17&32767}function pC(t){return 2|t}function pm(t){return(131068&t)>>2}function gC(t,r){return-131069&t|r<<2}function mC(t){return 1|t}function Qw(t,r,s,c){const d=t[s+1],g=null===r;let I=c?Gp(d):pm(d),C=!1;for(;0!==I&&(!1===C||g);){const j=t[I+1];jS(t[I],r)&&(C=!0,t[I+1]=c?mC(j):pC(j)),I=c?Gp(j):pm(j)}C&&(t[s+1]=c?pC(d):mC(d))}function jS(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&bn(t,r)>=0}function _C(t,r,s){const c=Ct();return o(c,Pr(),r)&&Oa(hr(),ir(),c,t,r,c[Pn],s,!1),_C}function yC(t,r,s,c,d){const I=d?"class":"style";Xl(t,s,r.inputs[I],I,c)}function vC(t,r){return function fd(t,r,s,c){const d=Ct(),g=hr(),I=function P(t){const r=Fn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}(2);g.firstUpdatePass&&function o0(t,r,s,c){const d=t.data;if(null===d[s+1]){const g=d[tr()],I=function s0(t,r){return r>=t.expandoStartIndex}(t,s);(function u0(t,r){return 0!=(t.flags&(r?8:16))})(g,c)&&null===r&&!I&&(r=!1),r=function QS(t,r,s,c){const d=function vt(t){const r=Fn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let g=c?r.residualClasses:r.residualStyles;if(null===d)0===(c?r.classBindings:r.styleBindings)&&(s=_v(s=EC(null,t,r,s,c),r.attrs,c),g=null);else{const I=r.directiveStylingLast;if(-1===I||t[I]!==d)if(s=EC(d,t,r,s,c),null===g){let M=function JS(t,r,s){const c=s?r.classBindings:r.styleBindings;if(0!==pm(c))return t[Gp(c)]}(t,r,c);void 0!==M&&Array.isArray(M)&&(M=EC(null,t,r,M[1],c),M=_v(M,r.attrs,c),function XS(t,r,s,c){t[Gp(s?r.classBindings:r.styleBindings)]=c}(t,r,c,M))}else g=function ZS(t,r,s){let c;const d=r.directiveEnd;for(let g=1+r.directiveStylingLast;g<d;g++)c=_v(c,t[g].hostAttrs,s);return _v(c,r.attrs,s)}(t,r,c)}return void 0!==g&&(c?r.residualClasses=g:r.residualStyles=g),s}(d,g,r,c),function US(t,r,s,c,d,g){let I=g?r.classBindings:r.styleBindings,C=Gp(I),M=pm(I);t[c]=s;let J,j=!1;if(Array.isArray(s)?(J=s[1],(null===J||bn(s,J)>0)&&(j=!0)):J=s,d)if(0!==M){const Se=Gp(t[C+1]);t[c+1]=BE(Se,C),0!==Se&&(t[Se+1]=gC(t[Se+1],c)),t[C+1]=function LS(t,r){return 131071&t|r<<17}(t[C+1],c)}else t[c+1]=BE(C,0),0!==C&&(t[C+1]=gC(t[C+1],c)),C=c;else t[c+1]=BE(M,0),0===C?C=c:t[M+1]=gC(t[M+1],c),M=c;j&&(t[c+1]=pC(t[c+1])),Qw(t,J,c,!0),Qw(t,J,c,!1),function BS(t,r,s,c,d){const g=d?t.residualClasses:t.residualStyles;null!=g&&"string"==typeof r&&bn(g,r)>=0&&(s[c+1]=mC(s[c+1]))}(r,J,t,c,g),I=BE(C,M),g?r.classBindings=I:r.styleBindings=I}(d,g,r,s,I,c)}}(g,t,I,c),r!==Tr&&o(d,I,r)&&function c0(t,r,s,c,d,g,I,C){if(!(3&r.type))return;const M=t.data,j=M[C+1],J=function VS(t){return 1==(1&t)}(j)?l0(M,r,s,d,pm(j),I):void 0;jE(J)||(jE(g)||function FS(t){return 2==(2&t)}(j)&&(g=l0(M,null,s,d,C,I)),function Oy(t,r,s,c,d){if(r)d?t.addClass(s,c):t.removeClass(s,c);else{let g=-1===c.indexOf("-")?void 0:Wh.DashCase;null==d?t.removeStyle(s,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=Wh.Important),t.setStyle(s,c,d,g))}}(c,I,Yo(tr(),s),d,g))}(g,g.data[tr()],d,d[Pn],t,d[I+1]=function rA(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Bn($l(t)))),t}(r,s),c,I)}(t,r,null,!0),vC}function EC(t,r,s,c,d){let g=null;const I=s.directiveEnd;let C=s.directiveStylingLast;for(-1===C?C=s.directiveStart:C++;C<I&&(g=r[C],c=_v(c,g.hostAttrs,d),g!==t);)C++;return null!==t&&(s.directiveStylingLast=C),c}function _v(t,r,s){const c=s?1:2;let d=-1;if(null!==r)for(let g=0;g<r.length;g++){const I=r[g];"number"==typeof I?d=I:d===c&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),zr(t,I,!!s||r[++g]))}return void 0===t?null:t}function l0(t,r,s,c,d,g){const I=null===r;let C;for(;d>0;){const M=t[d],j=Array.isArray(M),J=j?M[1]:M,ue=null===J;let Se=s[d+1];Se===Tr&&(Se=ue?Oe:void 0);let je=ue?Tc(Se,c):J===c?Se:void 0;if(j&&!jE(je)&&(je=Tc(M,c)),jE(je)&&(C=je,I))return C;const _t=t[d+1];d=I?Gp(_t):pm(_t)}if(null!==r){let M=g?r.residualClasses:r.residualStyles;null!=M&&(C=Tc(M,c))}return C}function jE(t){return void 0!==t}function $E(t,r,s,c){const d=Ct(),g=hr(),I=ln+t,C=d[Pn],M=g.firstCreatePass?function SA(t,r,s,c,d,g){const I=r.consts,M=Ql(r,t,2,c,vs(I,d));return Ip(r,s,M,vs(I,g)),null!==M.attrs&&tu(M,M.attrs,!1),null!==M.mergedAttrs&&tu(M,M.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,M),M}(I,g,d,r,s,c):g.data[I],j=p0(g,d,M,C,r,t);d[I]=j;const J=$s(M);return Do(M,!0),Rg(C,j,M),32!=(32&M.flags)&&sn()&&Qh(g,d,j,M),0===function La(){return Fn.lFrame.elementDepthCount}()&&Oo(j,d),function qc(){Fn.lFrame.elementDepthCount++}(),J&&(bu(g,d,M),Qd(g,M,d)),null!==c&&Mu(d,M),$E}function GE(){let t=Br();go()?function Il(){Fn.lFrame.isParent=!1}():(t=t.parent,Do(t,!1));const r=t;(function bs(t){return Fn.skipHydrationRootTNode===t})(r)&&function El(){Fn.skipHydrationRootTNode=null}(),function la(){Fn.lFrame.elementDepthCount--}();const s=hr();return s.firstCreatePass&&(cl(s,t),js(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function Bf(t){return 0!=(8&t.flags)}(r)&&yC(s,r,Ct(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function tg(t){return 0!=(16&t.flags)}(r)&&yC(s,r,Ct(),r.stylesWithoutHost,!1),GE}function DC(t,r,s,c){return $E(t,r,s,c),GE(),DC}let p0=(t,r,s,c,d,g)=>(fn(!0),zh(c,d,function mo(){return Fn.lFrame.currentNamespace}()));function _0(){return Ct()}const gm=void 0;var NA=["en",[["a","p"],["AM","PM"],gm],[["AM","PM"],gm,gm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],gm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],gm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",gm,"{1} 'at' {0}",gm],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function OA(t){const s=Math.floor(Math.abs(t)),c=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===c?1:5}];let $_={};function PC(t){const r=function xA(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=I0(r);if(s)return s;const c=r.split("-")[0];if(s=I0(c),s)return s;if("en"===c)return NA;throw new Bt(701,!1)}function E0(t){return PC(t)[G_.PluralCase]}function I0(t){return t in $_||($_[t]=Zt.ng&&Zt.ng.common&&Zt.ng.common.locales&&Zt.ng.common.locales[t]),$_[t]}var G_=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(G_||{});const W_="en-US";let C0=W_;function RC(t,r,s,c){const d=Ct(),g=hr(),I=Br();return OC(g,d,d[Pn],I,t,r,c),RC}function OC(t,r,s,c,d,g,I){const C=$s(c),j=t.firstCreatePass&&Dp(t),J=r[dr],ue=rf(r);let Se=!0;if(3&c.type||I){const Ot=yr(c,r),Yt=I?I(Ot):Ot,Tn=ue.length,Rt=I?Ii=>I(Wr(Ii[c.index])):c.index;let Mr=null;if(!I&&C&&(Mr=function PP(t,r,s,c){const d=t.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const I=d[g];if(I===s&&d[g+1]===c){const C=r[Yi],M=d[g+2];return C.length>M?C[M]:null}"string"==typeof I&&(g+=2)}return null}(t,r,d,c.index)),null!==Mr)(Mr.__ngLastListenerFn__||Mr).__ngNextListenerFn__=g,Mr.__ngLastListenerFn__=g,Se=!1;else{g=Y0(c,r,J,g,!1);const Ii=s.listen(Yt,d,g);ue.push(g,Ii),j&&j.push(d,Rt,Tn,Tn+1)}}else g=Y0(c,r,J,g,!1);const je=c.outputs;let _t;if(Se&&null!==je&&(_t=je[d])){const Ot=_t.length;if(Ot)for(let Yt=0;Yt<Ot;Yt+=2){const Ti=r[_t[Yt]][_t[Yt+1]].subscribe(g),Qa=ue.length;ue.push(g,Ti),j&&j.push(d,c.index,Qa,"function"==typeof Ti?Qa+1:-(Qa+1))}}}function K0(t,r,s,c){try{return ta(6,r,s),!1!==s(c)}catch(d){return ad(t,d),!1}finally{ta(7,r,s)}}function Y0(t,r,s,c,d){return function g(I){if(I===Function)return c;uf(t.componentOffset>-1?Ws(t.index,r):r);let M=K0(r,s,c,I),j=g.__ngNextListenerFn__;for(;j;)M=K0(r,s,j,I)&&M,j=j.__ngNextListenerFn__;return d&&!1===M&&I.preventDefault(),M}}function Q0(t=1){return function Ua(t){return(Fn.lFrame.contextLView=function Qo(t,r){for(;t>0;)r=r[oo],t--;return r}(t,Fn.lFrame.contextLView))[dr]}(t)}function oT(t,r,s,c){!function LI(t,r,s,c){const d=hr();if(d.firstCreatePass){const g=Br();VI(d,new mE(r,s,c),g.index),function vE(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(d,t),2==(2&s)&&(d.staticContentQueries=!0)}return yE(d,Ct(),s)}(t,r,s,c)}function aT(t,r,s){!function FI(t,r,s){const c=hr();return c.firstCreatePass&&(VI(c,new mE(t,r,s),-1),2==(2&r)&&(c.staticViewQueries=!0)),yE(c,Ct(),r)}(t,r,s)}function cT(t){const r=Ct(),s=hr(),c=dn();ii(c+1);const d=m_(s,c);if(t.dirty&&function ys(t){return 4==(4&t[vn])}(r)===(2==(2&d.metadata.flags))){if(null===d.matches)t.reset([]);else{const g=UI(r,c);t.reset(g,bt),t.notifyOnChanges()}return!0}return!1}function lT(){return function g_(t,r){return t[Li].queries[r].queryList}(Ct(),dn())}function vT(t,r=""){const s=Ct(),c=hr(),d=t+ln,g=c.firstCreatePass?Ql(c,d,1,r,null):c.data[d],I=ET(c,s,g,r,t);s[d]=I,sn()&&Qh(c,s,I,g),Do(g,!1)}let ET=(t,r,s,c,d)=>(fn(!0),function ap(t,r){return t.createText(r)}(r[Pn],c));function xC(t){return KE("",t,""),xC}function KE(t,r,s){const c=Ct(),d=function N_(t,r,s,c){return o(t,Pr(),s)?r+cr(s)+c:Tr}(c,t,r,s);return d!==Tr&&function jc(t,r,s){const c=Yo(r,t);!function My(t,r,s){t.setValue(r,s)}(t[Pn],c,s)}(c,tr(),d),KE}function kC(t,r,s){Hv(r)&&(r=r());const c=Ct();return o(c,Pr(),r)&&Oa(hr(),ir(),c,t,r,c[Pn],s,!1),kC}function bT(t,r){const s=Hv(t);return s&&t.set(r),s}function FC(t,r){const s=Ct(),c=hr(),d=Br();return OC(c,s,s[Pn],d,t,r),FC}function LC(t,r,s,c,d){if(t=Ut(t),Array.isArray(t))for(let g=0;g<t.length;g++)LC(t[g],r,s,c,d);else{const g=hr(),I=Ct(),C=Br();let M=S(t)?t:Ut(t.provide);const j=Po(t),J=1048575&C.providerIndexes,ue=C.directiveStart,Se=C.providerIndexes>>20;if(S(t)||!t.multi){const je=new Td(j,d,Pu),_t=UC(M,r,d?J:J+Se,ue);-1===_t?(ig(Qu(C,I),g,M),VC(g,t,r.length),r.push(M),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),s.push(je),I.push(je)):(s[_t]=je,I[_t]=je)}else{const je=UC(M,r,J+Se,ue),_t=UC(M,r,J,J+Se),Yt=_t>=0&&s[_t];if(d&&!Yt||!d&&!(je>=0&&s[je])){ig(Qu(C,I),g,M);const Tn=function JP(t,r,s,c,d){const g=new Td(t,s,Pu);return g.multi=[],g.index=r,g.componentProviders=0,MT(g,d,c&&!s),g}(d?QP:YP,s.length,d,c,j);!d&&Yt&&(s[_t].providerFactory=Tn),VC(g,t,r.length,0),r.push(M),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),s.push(Tn),I.push(Tn)}else VC(g,t,je>-1?je:_t,MT(s[d?_t:je],j,!d&&c));!d&&c&&Yt&&s[_t].componentProviders++}}}function VC(t,r,s,c){const d=S(r),g=function _(t){return!!t.useClass}(r);if(d||g){const M=(g?Ut(r.useClass):r).prototype.ngOnDestroy;if(M){const j=t.destroyHooks||(t.destroyHooks=[]);if(!d&&r.multi){const J=j.indexOf(s);-1===J?j.push(s,[c,M]):j[J+1].push(c,M)}else j.push(s,M)}}}function MT(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function UC(t,r,s,c){for(let d=s;d<c;d++)if(r[d]===t)return d;return-1}function YP(t,r,s,c){return BC(this.multi,[])}function QP(t,r,s,c){const d=this.multi;let g;if(this.providerFactory){const I=this.providerFactory.componentProviders,C=bd(s,s[Vt],this.providerFactory.index,c);g=C.slice(0,I),BC(d,g);for(let M=I;M<C.length;M++)g.push(C[M])}else g=[],BC(d,g);return g}function BC(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function RT(t,r=[]){return s=>{s.providersResolver=(c,d)=>function KP(t,r,s){const c=hr();if(c.firstCreatePass){const d=Wi(t);LC(s,c.data,c.blueprint,d,!0),LC(r,c.data,c.blueprint,d,!1)}}(c,d?d(t):t,r)}}let XP=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const c=Nl(0,s.type),d=c.length>0?LE([c],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,d)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ir({token:t,providedIn:"environment",factory:()=>new t(pr(ct))})}return t})();function OT(t){_f("NgStandalone"),t.getStandaloneInjector=r=>r.get(XP).getOrCreateStandaloneInjector(t)}function NT(t,r,s){const c=t.\u0275cmp;c.directiveDefs=Js(r,!1),c.pipeDefs=Js(s,!0)}function wv(t,r){const s=t[r];return s===Tr?void 0:s}function WT(t,r,s,c,d,g,I,C){const M=r+s;return function p(t,r,s,c,d){const g=u(t,r,s,c);return o(t,r+2,d)||g}(t,M,d,g,I)?e(t,M+3,C?c.call(C,d,g,I):c(d,g,I)):wv(t,M+3)}function qT(t,r){const s=hr();let c;const d=t+ln;s.firstCreatePass?(c=function _b(t,r){if(r)for(let s=r.length-1;s>=0;s--){const c=r[s];if(t===c.name)return c}}(r,s.pipeRegistry),s.data[d]=c,c.onDestroy&&(s.destroyHooks??=[]).push(d,c.onDestroy)):c=s.data[d];const g=c.factory||(c.factory=Rc(c.type)),C=Eo(Pu);try{const M=dl(!1),j=g();return dl(M),function kP(t,r,s,c){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=c}(s,Ct(),d,j),j}finally{Eo(C)}}function KT(t,r,s){const c=t+ln,d=Ct(),g=Fa(d,c);return Tv(d,c)?function $T(t,r,s,c,d,g){const I=r+s;return o(t,I,d)?e(t,I+1,g?c.call(g,d):c(d)):wv(t,I+1)}(d,Ms(),r,g.transform,s,g):g.transform(s)}function YT(t,r,s,c){const d=t+ln,g=Ct(),I=Fa(g,d);return Tv(g,d)?function GT(t,r,s,c,d,g,I){const C=r+s;return u(t,C,d,g)?e(t,C+2,I?c.call(I,d,g):c(d,g)):wv(t,C+2)}(g,Ms(),r,I.transform,s,c,I):I.transform(s,c)}function QT(t,r,s,c,d){const g=t+ln,I=Ct(),C=Fa(I,g);return Tv(I,g)?WT(I,Ms(),r,C.transform,s,c,d,C):C.transform(s,c,d)}function Tv(t,r){return t[Vt].data[r].pure}class hD{constructor(r){this.full=r;const s=r.split(".");this.major=s[0],this.minor=s[1],this.patch=s.slice(2).join(".")}}const $b=new hD("17.2.2");let fD=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(c){return new(c||t)};static#t=this.\u0275prov=Ir({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const yD=new Cr(""),vD=new Cr("");let qC,pM=(()=>{class t{constructor(s,c,d){this._ngZone=s,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,qC||(function gM(t){qC=t}(d),d.addToWindow(c)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qs.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb()}});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(s)||(clearTimeout(c.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==g),s()},c)),this._callbacks.push({doneCb:s,timeoutId:g,updateCb:d})}whenStable(s,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,c,d){return[]}static#e=this.\u0275fac=function(c){return new(c||t)(pr(Qs),pr(ED),pr(vD))};static#t=this.\u0275prov=Ir({token:t,factory:t.\u0275fac})}return t})(),ED=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,c){this._applications.set(s,c)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,c=!0){return qC?.findTestabilityInTree(this,s,c)??null}static#e=this.\u0275fac=function(c){return new(c||t)};static#t=this.\u0275prov=Ir({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function KC(t){return!!t&&"function"==typeof t.then}function ID(t){return!!t&&"function"==typeof t.subscribe}const CD=new Cr("");let YC=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,c)=>{this.resolve=s,this.reject=c}),this.appInits=wr(CD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const d of this.appInits){const g=d();if(KC(g))s.push(g);else if(ID(g)){const I=new Promise((C,M)=>{g.subscribe({complete:C,error:M})});s.push(I)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{c()}).catch(d=>{this.reject(d)}),0===s.length&&c(),this.initialized=!0}static#e=this.\u0275fac=function(c){return new(c||t)};static#t=this.\u0275prov=Ir({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const QC=new Cr("");function DD(t,r){return Array.isArray(r)?r.reduce(DD,t):{...t,...r}}let mm=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=wr(ug),this.afterRenderEffectManager=wr(am),this.componentTypes=[],this.components=[],this.isStable=wr(i).hasPendingTasks.pipe((0,Vr.k)(s=>!s)),this._injector=wr(ct)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,c){const d=s instanceof br;if(!this._injector.get(YC).done)throw!d&&Fs(s),new Bt(405,!1);let I;I=d?s:this._injector.get(s_).resolveComponentFactory(s),this.componentTypes.push(I.componentType);const C=function mM(t){return t.isBoundToModule}(I)?void 0:this._injector.get(Cf),j=I.create(ba.NULL,[],c||I.selector,C),J=j.location.nativeElement,ue=j.injector.get(yD,null);return ue?.registerApplication(J),j.onDestroy(()=>{this.detachView(j.hostView),XE(this.components,j),ue?.unregisterApplication(J)}),this._loadComponent(j),j}tick(){if(this._runningTick)throw new Bt(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let s=0;do{if(100===s)throw new Bt(103,!1);const c=0===s;for(let{_lView:d,notifyErrorHandler:g}of this._views)!c&&!SD(d)||this.detectChangesInView(d,g,c);this.afterRenderEffectManager.execute(),s++}while(this._views.some(({_lView:c})=>SD(c)))}detectChangesInView(s,c,d){let g;d?(g=0,s[vn]|=1024):g=64&s[vn]?0:1,ud(s,c,g)}attachView(s){const c=s;this._views.push(c),c.attachToAppRef(this)}detachView(s){const c=s;XE(this._views,c),c.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const c=this._injector.get(QC,[]);[...this._bootstrapListeners,...c].forEach(d=>d(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>XE(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new Bt(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(c){return new(c||t)};static#t=this.\u0275prov=Ir({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function XE(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}function SD(t){return ho(t)}class yM{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let vM=(()=>{class t{compileModuleSync(s){return new kE(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const c=this.compileModuleSync(s),g=Ma(hi(s).declarations).reduce((I,C)=>{const M=rr(C);return M&&I.push(new cm(M)),I},[]);return new yM(c,g)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(c){return new(c||t)};static#t=this.\u0275prov=Ir({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),CM=(()=>{class t{constructor(){this.zone=wr(Qs),this.applicationRef=wr(mm)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||t)};static#t=this.\u0275prov=Ir({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wM(){const t=wr(Qs),r=wr(Du);return s=>t.runOutsideAngular(()=>r.handleError(s))}let DM=(()=>{class t{constructor(){this.subscription=new Sn.wH,this.initialized=!1,this.zone=wr(Qs),this.pendingTasks=wr(i)}initialize(){if(this.initialized)return;this.initialized=!0;let s=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(s=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Qs.assertNotInAngularZone(),queueMicrotask(()=>{null!==s&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(s),s=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Qs.assertInAngularZone(),s??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||t)};static#t=this.\u0275prov=Ir({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const eI=new Cr("",{providedIn:"root",factory:()=>wr(eI,xn.Optional|xn.SkipSelf)||function SM(){return typeof $localize<"u"&&$localize.locale||W_}()}),AM=new Cr("",{providedIn:"root",factory:()=>"USD"}),JC=new Cr("");let MD=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,c){const d=function yI(t="zone.js",r){return"noop"===t?new sm:"zone.js"===t?new Qs(r):t}(c?.ngZone,function bD(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const g=function iC(t,r,s){return new gv(t,r,s)}(s.moduleType,this.injector,function PD(t){return[{provide:Qs,useFactory:t},{provide:ac,multi:!0,useFactory:()=>{const r=wr(CM,{optional:!0});return()=>r.initialize()}},{provide:ac,multi:!0,useFactory:()=>{const r=wr(DM);return()=>{r.initialize()}}},{provide:ug,useFactory:wM}]}(()=>d)),I=g.injector.get(Du,null);return d.runOutsideAngular(()=>{const C=d.onError.subscribe({next:M=>{I.handleError(M)}});g.onDestroy(()=>{XE(this._modules,g),C.unsubscribe()})}),function TD(t,r,s){try{const c=s();return KC(c)?c.catch(d=>{throw r.runOutsideAngular(()=>t.handleError(d)),d}):c}catch(c){throw r.runOutsideAngular(()=>t.handleError(c)),c}}(I,d,()=>{const C=g.injector.get(YC);return C.runInitializers(),C.donePromise.then(()=>(function w0(t){"string"==typeof t&&(C0=t.toLowerCase().replace(/_/g,"-"))}(g.injector.get(eI,W_)||W_),this._moduleDoBootstrap(g),g))})})}bootstrapModule(s,c=[]){const d=DD({},c);return function IM(t,r,s){const c=new kE(s);return Promise.resolve(c)}(0,0,s).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(s){const c=s.injector.get(mm);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!s.instance.ngDoBootstrap)throw new Bt(-403,!1);s.instance.ngDoBootstrap(c)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Bt(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const s=this._injector.get(JC,null);s&&(s.forEach(c=>c()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(c){return new(c||t)(pr(ba))};static#t=this.\u0275prov=Ir({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Wp=null;const RD=new Cr("");function OD(t,r,s=[]){const c=`Platform: ${r}`,d=new Cr(c);return(g=[])=>{let I=XC();if(!I||I.injector.get(RD,!1)){const C=[...s,...g,{provide:d,useValue:!0}];t?t(C):function bM(t){if(Wp&&!Wp.get(RD,!1))throw new Bt(400,!1);(function wD(){!function rn(t){mt=t}(()=>{throw new Bt(600,!1)})})(),Wp=t;const r=t.get(MD);(function xD(t){t.get(N,null)?.forEach(s=>s())})(t)}(function ND(t=[],r){return ba.create({name:r,providers:[{provide:E,useValue:"platform"},{provide:JC,useValue:new Set([()=>Wp=null])},...t]})}(C,c))}return function MM(t){const r=XC();if(!r)throw new Bt(401,!1);return r}()}}function XC(){return Wp?.get(MD)??null}function OM(){return!1}const FM=OD(null,"core",[]);let LM=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(c){return new(c||t)(pr(mm))};static#t=this.\u0275mod=sa({type:t});static#n=this.\u0275inj=fa({})}return t})();function uR(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function hR(t){const r=rr(t);if(!r)return null;const s=new cm(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},2740:(jt,He,V)=>{V.d(He,{_o:()=>qe,Q$:()=>gt,cd:()=>rn,Ev:()=>Je,mq:()=>mt,ox:()=>Lt,_8:()=>Ue,GW:()=>Tt,CU:()=>lt}),V(6858);var q=V(1368),k=V(4496),D=V(6176),W=V(6e3),_e=V(5657),Ee=V(2700),Le=V(3252),Pe=V(9900),ge=V(267),fe=V(560),xe=V(8960),it=V(6624),be=V(3920),pt=V(7368),Be=V(4704),tt=V(5960);class Ke extends _e.E{constructor(At=1/0,Jt=1/0,tn=tt.K){super(),this._bufferSize=At,this._windowTime=Jt,this._timestampProvider=tn,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Jt===1/0,this._bufferSize=Math.max(1,At),this._windowTime=Math.max(1,Jt)}next(At){const{isStopped:Jt,_buffer:tn,_infiniteTimeWindow:nn,_timestampProvider:En,_windowTime:An}=this;Jt||(tn.push(At),!nn&&tn.push(En.now()+An)),this._trimBuffer(),super.next(At)}_subscribe(At){this._throwIfClosed(),this._trimBuffer();const Jt=this._innerSubscribe(At),{_infiniteTimeWindow:tn,_buffer:nn}=this,En=nn.slice();for(let An=0;An<En.length&&!At.closed;An+=tn?1:2)At.next(En[An]);return this._checkFinalizedStatuses(At),Jt}_trimBuffer(){const{_bufferSize:At,_timestampProvider:Jt,_buffer:tn,_infiniteTimeWindow:nn}=this,En=(nn?1:2)*At;if(At<1/0&&En<tn.length&&tn.splice(0,tn.length-En),!nn){const An=Jt.now();let Xt=0;for(let Sn=1;Sn<tn.length&&tn[Sn]<=An;Sn+=2)Xt=Sn;Xt&&tn.splice(0,Xt+1)}}}var st=V(1760),Ae=V(5448);function ae(ft,At,...Jt){if(!0===At)return void ft();if(!1===At)return;const tn=new st.ot({next:()=>{tn.unsubscribe(),ft()}});return(0,fe.Uv)(At(...Jt)).subscribe(tn)}function Re(ft,At,Jt){let tn,nn=!1;return ft&&"object"==typeof ft?({bufferSize:tn=1/0,windowTime:At=1/0,refCount:nn=!1,scheduler:Jt}=ft):tn=ft??1/0,function ke(ft={}){const{connector:At=(()=>new _e.E),resetOnError:Jt=!0,resetOnComplete:tn=!0,resetOnRefCountZero:nn=!0}=ft;return En=>{let An,Xt,Sn,qn=0,Vr=!1,Wt=!1;const Rr=()=>{Xt?.unsubscribe(),Xt=void 0},Bt=()=>{Rr(),An=Sn=void 0,Vr=Wt=!1},Xr=()=>{const Un=An;Bt(),Un?.unsubscribe()};return(0,Ae.i)((Un,si)=>{qn++,!Wt&&!Vr&&Rr();const Sr=Sn=Sn??At();si.add(()=>{qn--,0===qn&&!Wt&&!Vr&&(Xt=ae(Xr,nn))}),Sr.subscribe(si),!An&&qn>0&&(An=new st.ot({next:Di=>Sr.next(Di),error:Di=>{Wt=!0,Rr(),Xt=ae(Bt,Jt,Di),Sr.error(Di)},complete:()=>{Vr=!0,Rr(),Xt=ae(Bt,tn),Sr.complete()}}),(0,fe.Uv)(Un).subscribe(An))})(En)}}({connector:()=>new Ke(tn,At,Jt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:nn})}var Xe=V(5084),pe=V(8880);function we(ft,At){return(0,pe.m)(At)?(0,pt.G)(()=>ft,At):(0,pt.G)(()=>ft)}var Ve=V(2924),ze=V(6684),at=V(9252);const Tt=new k.UbH("angularfire2.auth.use-emulator"),mt=new k.UbH("angularfire2.auth.settings"),Lt=new k.UbH("angularfire2.auth.tenant-id"),rn=new k.UbH("angularfire2.auth.langugage-code"),Ue=new k.UbH("angularfire2.auth.use-device-language"),Je=new k.UbH("angularfire.auth.persistence"),lt=(ft,At,Jt,tn,nn,En,An,Xt)=>(0,W.PQ)(`${ft.name}.auth`,"AngularFireAuth",ft.name,()=>{const Sn=At.runOutsideAngular(()=>ft.auth());if(Jt&&Sn.useEmulator(...Jt),tn&&(Sn.tenantId=tn),Sn.languageCode=nn,En&&Sn.useDeviceLanguage(),An)for(const[qn,Vr]of Object.entries(An))Sn.settings[qn]=Vr;return Xt&&Sn.setPersistence(Xt),Sn},[Jt,tn,nn,En,An,Xt]);let qe=(()=>{class ft{authState;idToken;user;idTokenResult;credential;constructor(Jt,tn,nn,En,An,Xt,Sn,qn,Vr,Wt,Rr,Bt){const Xr=new _e.E,Un=(0,Ee.of)(void 0).pipe((0,be.y)(An.outsideAngular),(0,pt.G)(()=>En.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,6858)))),(0,Be.k)(()=>(0,W._G)(Jt,En,tn)),(0,Be.k)(si=>lt(si,En,Xt,qn,Vr,Wt,Sn,Rr)),Re({bufferSize:1,refCount:!1}));if((0,q.uf)(nn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ee.of)(null);else{Un.pipe((0,Xe.K)()).subscribe();const si=Un.pipe((0,pt.G)(ar=>ar.getRedirectResult().then(Cn=>Cn,()=>null)),D.wH,Re({bufferSize:1,refCount:!1})),Sr=Un.pipe((0,pt.G)(ar=>new Le._(Cn=>({unsubscribe:En.runOutsideAngular(()=>ar.onAuthStateChanged(yn=>Cn.next(yn),yn=>Cn.error(yn),()=>Cn.complete()))})))),Di=Un.pipe((0,pt.G)(ar=>new Le._(Cn=>({unsubscribe:En.runOutsideAngular(()=>ar.onIdTokenChanged(yn=>Cn.next(yn),yn=>Cn.error(yn),()=>Cn.complete()))}))));this.authState=si.pipe(we(Sr),(0,Ve.y)(An.outsideAngular),(0,be.y)(An.insideAngular)),this.user=si.pipe(we(Di),(0,Ve.y)(An.outsideAngular),(0,be.y)(An.insideAngular)),this.idToken=this.user.pipe((0,pt.G)(ar=>ar?(0,Pe.Q)(ar.getIdToken()):(0,Ee.of)(null))),this.idTokenResult=this.user.pipe((0,pt.G)(ar=>ar?(0,Pe.Q)(ar.getIdTokenResult()):(0,Ee.of)(null))),this.credential=function Ie(...ft){const At=(0,it.e_)(ft),Jt=(0,it._8)(ft,1/0),tn=ft;return tn.length?1===tn.length?(0,fe.Uv)(tn[0]):(0,ge.u)(Jt)((0,Pe.Q)(tn,At)):xe.k}(si,Xr,this.authState.pipe((0,ze.I)(ar=>!ar))).pipe((0,Be.k)(ar=>ar?.user?ar:null),(0,Ve.y)(An.outsideAngular),(0,be.y)(An.insideAngular))}return(0,W._w)(this,Un,En,{spy:{apply:(si,Sr,Di)=>{(si.startsWith("signIn")||si.startsWith("createUser"))&&Di.then(ar=>Xr.next(ar))}}})}static \u0275fac=function(tn){return new(tn||ft)(k.CoB(W.E9),k.CoB(W.Ml,8),k.CoB(k.AHE),k.CoB(k.WW2),k.CoB(D.u),k.CoB(Tt,8),k.CoB(mt,8),k.CoB(Lt,8),k.CoB(rn,8),k.CoB(Ue,8),k.CoB(Je,8),k.CoB(D.gJ,8))};static \u0275prov=k.wxM({token:ft,factory:ft.\u0275fac,providedIn:"any"})}return ft})(),gt=(()=>{class ft{constructor(){at.c.registerVersion("angularfire",D.j1.full,"auth-compat")}static \u0275fac=function(tn){return new(tn||ft)};static \u0275mod=k.a4G({type:ft});static \u0275inj=k.s3X({providers:[qe]})}return ft})()},6e3:(jt,He,V)=>{V.d(He,{E9:()=>Le,Ml:()=>Pe,PQ:()=>Ie,UN:()=>it,_G:()=>ge,_w:()=>W,rh:()=>_e});var y=V(4496),q=V(6176),k=V(9252);const D=["ngOnDestroy"],W=(tt,Ke,st,Ae={})=>new Proxy(tt,{get:(ke,ae)=>st.runOutsideAngular(()=>{if(tt[ae])return Ae?.spy?.get&&Ae.spy.get(ae,tt[ae]),tt[ae];if(D.indexOf(ae)>-1)return()=>{};const Re=Ke.toPromise().then(Xe=>{const pe=Xe?.[ae];return"function"==typeof pe?pe.bind(Xe):pe?.then?pe.then(we=>st.run(()=>we)):st.run(()=>pe)});return new Proxy(()=>{},{get:(Xe,pe)=>Re[pe],apply:(Xe,pe,we)=>Re.then(Ve=>{const ze=Ve?.(...we);return Ae?.spy?.apply&&Ae.spy.apply(ae,we,ze),ze})})})}),_e=(tt,Ke)=>{Ke.forEach(st=>{Object.getOwnPropertyNames(st.prototype||st).forEach(Ae=>{Object.defineProperty(tt.prototype,Ae,Object.getOwnPropertyDescriptor(st.prototype||st,Ae))})})};class Ee{constructor(Ke){return Ke}}const Le=new y.UbH("angularfire2.app.options"),Pe=new y.UbH("angularfire2.app.name");function ge(tt,Ke,st){const ke="object"==typeof st&&st||{};ke.name=ke.name||"string"==typeof st&&st||"[DEFAULT]";const Re=k.c.apps.filter(Xe=>Xe&&Xe.name===ke.name)[0]||Ke.runOutsideAngular(()=>k.c.initializeApp(tt,ke));try{if(JSON.stringify(tt)!==JSON.stringify(Re.options)){const Xe=!!module.hot;fe("error",`${Re.name} Firebase App already initialized with different options${Xe?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ee(Re)}const fe=(tt,...Ke)=>{(0,y.sPQ)()&&typeof console<"u"&&console[tt](...Ke)},xe={provide:Ee,useFactory:ge,deps:[Le,y.WW2,[new y.T7N,Pe]]};let it=(()=>{class tt{static initializeApp(st,Ae){return{ngModule:tt,providers:[{provide:Le,useValue:st},{provide:Pe,useValue:Ae}]}}constructor(st){k.c.registerVersion("angularfire",q.j1.full,"core"),k.c.registerVersion("angularfire",q.j1.full,"app-compat"),k.c.registerVersion("angular",y.j1C.full,st.toString())}static \u0275fac=function(Ae){return new(Ae||tt)(y.CoB(y.AHE))};static \u0275mod=y.a4G({type:tt});static \u0275inj=y.s3X({providers:[xe]})}return tt})();function Ie(tt,Ke,st,Ae,ke){const[,ae,Re]=globalThis.\u0275AngularfireInstanceCache.find(Xe=>Xe[0]===tt)||[];if(ae)return function be(tt,Ke){try{return tt.toString()===Ke.toString()}catch{return tt===Ke}}(ke,Re)||(Be("error",`${Ke} was already initialized on the ${st} Firebase App with different settings.${pt?" You may need to reload as Firebase is not HMR aware.":""}`),Be("warn",{is:ke,was:Re})),ae;{const Xe=Ae();return globalThis.\u0275AngularfireInstanceCache.push([tt,Xe,ke]),Xe}}const pt=typeof module<"u"&&!!module.hot,Be=(tt,...Ke)=>{(0,y.sPQ)()&&typeof console<"u"&&console[tt](...Ke)};globalThis.\u0275AngularfireInstanceCache||=[]},6176:(jt,He,V)=>{V.d(He,{j1:()=>Ie,wH:()=>ze,u:()=>ae,gJ:()=>tt,S_:()=>Be,UN:()=>pt,qo:()=>Tt});var y=V(4496),q=V(3680),k=V(1364),W=V(9816);const Ee=new class _e extends W.k{}(class D extends k.m{constructor(Lt,rn){super(Lt,rn),this.scheduler=Lt,this.work=rn}schedule(Lt,rn=0){return rn>0?super.schedule(Lt,rn):(this.delay=rn,this.state=Lt,this.scheduler.flush(this),this)}execute(Lt,rn){return rn>0||this.closed?super.execute(Lt,rn):this._execute(Lt,rn)}requestAsyncId(Lt,rn,Ue=0){return null!=Ue&&Ue>0||null==Ue&&this.delay>0?super.requestAsyncId(Lt,rn,Ue):(Lt.flush(this),0)}});var Pe=V(112),ge=V(3252),fe=V(9212),xe=V(2924),it=V(3920);const Ie=new y.a8Z("ANGULARFIRE2_VERSION");function pt(mt,Lt,rn){if(Lt){if(1===Lt.length)return Lt[0];const lt=Lt.filter(qe=>qe.app===rn);if(1===lt.length)return lt[0]}return rn.container.getProvider(mt).getImmediate({optional:!0})}const Be=(mt,Lt)=>{const rn=Lt?[Lt]:(0,q.UH)(),Ue=[];return rn.forEach(Je=>{Je.container.getProvider(mt).instances.forEach(qe=>{Ue.includes(qe)||Ue.push(qe)})}),Ue};class tt{constructor(){return Be(Ke)}}const Ke="app-check";function st(){}class Ae{zone;delegate;constructor(Lt,rn=Ee){this.zone=Lt,this.delegate=rn}now(){return this.delegate.now()}schedule(Lt,rn,Ue){const Je=this.zone;return this.delegate.schedule(function(qe){Je.runGuarded(()=>{Lt.apply(this,[qe])})},rn,Ue)}}class ke{zone;task=null;constructor(Lt){this.zone=Lt}call(Lt,rn){const Ue=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",st,{},st,st)),rn.pipe((0,fe.y)({next:Ue,complete:Ue,error:Ue})).subscribe(Lt).add(Ue)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ae=(()=>{class mt{ngZone;outsideAngular;insideAngular;constructor(rn){this.ngZone=rn,this.outsideAngular=rn.runOutsideAngular(()=>new Ae(Zone.current)),this.insideAngular=rn.run(()=>new Ae(Zone.current,Pe.M)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Ue){return new(Ue||mt)(y.CoB(y.WW2))};static \u0275prov=y.wxM({token:mt,factory:mt.\u0275fac,providedIn:"root"})}return mt})();function Re(){const mt=globalThis.\u0275AngularFireScheduler;if(!mt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return mt}function pe(mt){return Re().ngZone.run(()=>mt())}function ze(mt){return function at(mt){return function(rn){return(rn=rn.lift(new ke(mt.ngZone))).pipe((0,xe.y)(mt.outsideAngular),(0,it.y)(mt.insideAngular))}}(Re())(mt)}const wt=(mt,Lt)=>function(){const Ue=arguments;return Lt&&setTimeout(()=>{"scheduled"===Lt.state&&Lt.invoke()},10),pe(()=>mt.apply(void 0,Ue))},Tt=(mt,Lt)=>function(){let rn;const Ue=arguments;for(let lt=0;lt<arguments.length;lt++)"function"==typeof Ue[lt]&&(Lt&&(rn||=pe(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",st,{},st,st))),Ue[lt]=wt(Ue[lt],rn));const Je=function Xe(mt){return Re().ngZone.runOutsideAngular(()=>mt())}(()=>mt.apply(this,Ue));if(!Lt){if(Je instanceof ge._){const lt=Re();return Je.pipe((0,xe.y)(lt.outsideAngular),(0,it.y)(lt.insideAngular))}return pe(()=>Je)}return Je instanceof ge._?Je.pipe(ze):Je instanceof Promise?pe(()=>new Promise((lt,qe)=>Je.then(gt=>pe(()=>lt(gt)),gt=>pe(()=>qe(gt))))):"function"==typeof Je&&rn?function(){return setTimeout(()=>{rn&&"scheduled"===rn.state&&rn.invoke()},10),Je.apply(this,arguments)}:pe(()=>Je)}},6504:(jt,He,V)=>{V.d(He,{AQ:()=>st,GC:()=>Qi,GO:()=>Vs,IT:()=>hi,O4:()=>Wo,Wo:()=>ji,_G:()=>xi,im:()=>To,ot:()=>Ie,sl:()=>co,sz:()=>sa,u:()=>Bt,uW:()=>Ho,ue:()=>Rr,wd:()=>Pn,y:()=>Ja});var y=V(4496),q=V(1368),k=V(9900),D=V(9336),W=V(4704);let _e=(()=>{class H{constructor(U,ie){this._renderer=U,this._elementRef=ie,this.onChange=De=>{},this.onTouched=()=>{}}setProperty(U,ie){this._renderer.setProperty(this._elementRef.nativeElement,U,ie)}registerOnTouched(U){this.onTouched=U}registerOnChange(U){this.onChange=U}setDisabledState(U){this.setProperty("disabled",U)}static#e=this.\u0275fac=function(ie){return new(ie||H)(y.GI1(y.q87),y.GI1(y.GMv))};static#t=this.\u0275dir=y.Sc5({type:H})}return H})(),Ee=(()=>{class H extends _e{static#e=this.\u0275fac=(()=>{let U;return function(De){return(U||(U=y.otF(H)))(De||H)}})();static#t=this.\u0275dir=y.Sc5({type:H,features:[y.eg9]})}return H})();const Le=new y.UbH(""),fe={provide:Le,useExisting:(0,y.wd)(()=>Ie),multi:!0},it=new y.UbH("");let Ie=(()=>{class H extends _e{constructor(U,ie,De){super(U,ie),this._compositionMode=De,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xe(){const H=(0,q.uy)()?(0,q.uy)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(U){this.setProperty("value",U??"")}_handleInput(U){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(U)}_compositionStart(){this._composing=!0}_compositionEnd(U){this._composing=!1,this._compositionMode&&this.onChange(U)}static#e=this.\u0275fac=function(ie){return new(ie||H)(y.GI1(y.q87),y.GI1(y.GMv),y.GI1(it,8))};static#t=this.\u0275dir=y.Sc5({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(ie,De){1&ie&&y.qCj("input",function(er){return De._handleInput(er.target.value)})("blur",function(){return De.onTouched()})("compositionstart",function(){return De._compositionStart()})("compositionend",function(er){return De._compositionEnd(er.target.value)})},features:[y.M5G([fe]),y.eg9]})}return H})();function be(H){return null==H||("string"==typeof H||Array.isArray(H))&&0===H.length}function pt(H){return null!=H&&"number"==typeof H.length}const Be=new y.UbH(""),tt=new y.UbH(""),Ke=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class st{static min(Y){return function Ae(H){return Y=>{if(be(Y.value)||be(H))return null;const U=parseFloat(Y.value);return!isNaN(U)&&U<H?{min:{min:H,actual:Y.value}}:null}}(Y)}static max(Y){return function ke(H){return Y=>{if(be(Y.value)||be(H))return null;const U=parseFloat(Y.value);return!isNaN(U)&&U>H?{max:{max:H,actual:Y.value}}:null}}(Y)}static required(Y){return function ae(H){return be(H.value)?{required:!0}:null}(Y)}static requiredTrue(Y){return function Re(H){return!0===H.value?null:{required:!0}}(Y)}static email(Y){return function Xe(H){return be(H.value)||Ke.test(H.value)?null:{email:!0}}(Y)}static minLength(Y){return function pe(H){return Y=>be(Y.value)||!pt(Y.value)?null:Y.value.length<H?{minlength:{requiredLength:H,actualLength:Y.value.length}}:null}(Y)}static maxLength(Y){return function we(H){return Y=>pt(Y.value)&&Y.value.length>H?{maxlength:{requiredLength:H,actualLength:Y.value.length}}:null}(Y)}static pattern(Y){return function Ve(H){if(!H)return ze;let Y,U;return"string"==typeof H?(U="","^"!==H.charAt(0)&&(U+="^"),U+=H,"$"!==H.charAt(H.length-1)&&(U+="$"),Y=new RegExp(U)):(U=H.toString(),Y=H),ie=>{if(be(ie.value))return null;const De=ie.value;return Y.test(De)?null:{pattern:{requiredPattern:U,actualValue:De}}}}(Y)}static nullValidator(Y){return null}static compose(Y){return Ue(Y)}static composeAsync(Y){return lt(Y)}}function ze(H){return null}function at(H){return null!=H}function wt(H){return(0,y.w5$)(H)?(0,k.Q)(H):H}function Tt(H){let Y={};return H.forEach(U=>{Y=null!=U?{...Y,...U}:Y}),0===Object.keys(Y).length?null:Y}function mt(H,Y){return Y.map(U=>U(H))}function rn(H){return H.map(Y=>function Lt(H){return!H.validate}(Y)?Y:U=>Y.validate(U))}function Ue(H){if(!H)return null;const Y=H.filter(at);return 0==Y.length?null:function(U){return Tt(mt(U,Y))}}function Je(H){return null!=H?Ue(rn(H)):null}function lt(H){if(!H)return null;const Y=H.filter(at);return 0==Y.length?null:function(U){const ie=mt(U,Y).map(wt);return(0,D.y)(ie).pipe((0,W.k)(Tt))}}function qe(H){return null!=H?lt(rn(H)):null}function gt(H,Y){return null===H?[Y]:Array.isArray(H)?[...H,Y]:[H,Y]}function ft(H){return H._rawValidators}function At(H){return H._rawAsyncValidators}function Jt(H){return H?Array.isArray(H)?H:[H]:[]}function tn(H,Y){return Array.isArray(H)?H.includes(Y):H===Y}function nn(H,Y){const U=Jt(Y);return Jt(H).forEach(De=>{tn(U,De)||U.push(De)}),U}function En(H,Y){return Jt(Y).filter(U=>!tn(H,U))}class An{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Y){this._rawValidators=Y||[],this._composedValidatorFn=Je(this._rawValidators)}_setAsyncValidators(Y){this._rawAsyncValidators=Y||[],this._composedAsyncValidatorFn=qe(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Y){this._onDestroyCallbacks.push(Y)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Y=>Y()),this._onDestroyCallbacks=[]}reset(Y=void 0){this.control&&this.control.reset(Y)}hasError(Y,U){return!!this.control&&this.control.hasError(Y,U)}getError(Y,U){return this.control?this.control.getError(Y,U):null}}class Xt extends An{get formDirective(){return null}get path(){return null}}class Sn extends An{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qn{constructor(Y){this._cd=Y}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Rr=(()=>{class H extends qn{constructor(U){super(U)}static#e=this.\u0275fac=function(ie){return new(ie||H)(y.GI1(Sn,2))};static#t=this.\u0275dir=y.Sc5({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(ie,De){2&ie&&y.eAK("ng-untouched",De.isUntouched)("ng-touched",De.isTouched)("ng-pristine",De.isPristine)("ng-dirty",De.isDirty)("ng-valid",De.isValid)("ng-invalid",De.isInvalid)("ng-pending",De.isPending)},features:[y.eg9]})}return H})(),Bt=(()=>{class H extends qn{constructor(U){super(U)}static#e=this.\u0275fac=function(ie){return new(ie||H)(y.GI1(Xt,10))};static#t=this.\u0275dir=y.Sc5({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(ie,De){2&ie&&y.eAK("ng-untouched",De.isUntouched)("ng-touched",De.isTouched)("ng-pristine",De.isPristine)("ng-dirty",De.isDirty)("ng-valid",De.isValid)("ng-invalid",De.isInvalid)("ng-pending",De.isPending)("ng-submitted",De.isSubmitted)},features:[y.eg9]})}return H})();const Ur="VALID",zn="INVALID",Ri="PENDING",Kr="DISABLED";function $r(H){return(Ye(H)?H.validators:H)||null}function Ci(H,Y){return(Ye(Y)?Y.asyncValidators:H)||null}function Ye(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}function ye(H,Y,U){const ie=H.controls;if(!(Y?Object.keys(ie):ie).length)throw new y.OBp(1e3,"");if(!ie[U])throw new y.OBp(1001,"")}function We(H,Y,U){H._forEachChild((ie,De)=>{if(void 0===U[De])throw new y.OBp(1002,"")})}class ce{constructor(Y,U){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(Y),this._assignAsyncValidators(U)}get validator(){return this._composedValidatorFn}set validator(Y){this._rawValidators=this._composedValidatorFn=Y}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Y){this._rawAsyncValidators=this._composedAsyncValidatorFn=Y}get parent(){return this._parent}get valid(){return this.status===Ur}get invalid(){return this.status===zn}get pending(){return this.status==Ri}get disabled(){return this.status===Kr}get enabled(){return this.status!==Kr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Y){this._assignValidators(Y)}setAsyncValidators(Y){this._assignAsyncValidators(Y)}addValidators(Y){this.setValidators(nn(Y,this._rawValidators))}addAsyncValidators(Y){this.setAsyncValidators(nn(Y,this._rawAsyncValidators))}removeValidators(Y){this.setValidators(En(Y,this._rawValidators))}removeAsyncValidators(Y){this.setAsyncValidators(En(Y,this._rawAsyncValidators))}hasValidator(Y){return tn(this._rawValidators,Y)}hasAsyncValidator(Y){return tn(this._rawAsyncValidators,Y)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Y={}){this.touched=!0,this._parent&&!Y.onlySelf&&this._parent.markAsTouched(Y)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(Y=>Y.markAllAsTouched())}markAsUntouched(Y={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(U=>{U.markAsUntouched({onlySelf:!0})}),this._parent&&!Y.onlySelf&&this._parent._updateTouched(Y)}markAsDirty(Y={}){this.pristine=!1,this._parent&&!Y.onlySelf&&this._parent.markAsDirty(Y)}markAsPristine(Y={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(U=>{U.markAsPristine({onlySelf:!0})}),this._parent&&!Y.onlySelf&&this._parent._updatePristine(Y)}markAsPending(Y={}){this.status=Ri,!1!==Y.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!Y.onlySelf&&this._parent.markAsPending(Y)}disable(Y={}){const U=this._parentMarkedDirty(Y.onlySelf);this.status=Kr,this.errors=null,this._forEachChild(ie=>{ie.disable({...Y,onlySelf:!0})}),this._updateValue(),!1!==Y.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...Y,skipPristineCheck:U}),this._onDisabledChange.forEach(ie=>ie(!0))}enable(Y={}){const U=this._parentMarkedDirty(Y.onlySelf);this.status=Ur,this._forEachChild(ie=>{ie.enable({...Y,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Y.emitEvent}),this._updateAncestors({...Y,skipPristineCheck:U}),this._onDisabledChange.forEach(ie=>ie(!1))}_updateAncestors(Y){this._parent&&!Y.onlySelf&&(this._parent.updateValueAndValidity(Y),Y.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(Y){this._parent=Y}getRawValue(){return this.value}updateValueAndValidity(Y={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ur||this.status===Ri)&&this._runAsyncValidator(Y.emitEvent)),!1!==Y.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Y.onlySelf&&this._parent.updateValueAndValidity(Y)}_updateTreeValidity(Y={emitEvent:!0}){this._forEachChild(U=>U._updateTreeValidity(Y)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Y.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kr:Ur}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Y){if(this.asyncValidator){this.status=Ri,this._hasOwnPendingAsyncValidator=!0;const U=wt(this.asyncValidator(this));this._asyncValidationSubscription=U.subscribe(ie=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ie,{emitEvent:Y})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(Y,U={}){this.errors=Y,this._updateControlsErrors(!1!==U.emitEvent)}get(Y){let U=Y;return null==U||(Array.isArray(U)||(U=U.split(".")),0===U.length)?null:U.reduce((ie,De)=>ie&&ie._find(De),this)}getError(Y,U){const ie=U?this.get(U):this;return ie&&ie.errors?ie.errors[Y]:null}hasError(Y,U){return!!this.getError(Y,U)}get root(){let Y=this;for(;Y._parent;)Y=Y._parent;return Y}_updateControlsErrors(Y){this.status=this._calculateStatus(),Y&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(Y)}_initObservables(){this.valueChanges=new y._w7,this.statusChanges=new y._w7}_calculateStatus(){return this._allControlsDisabled()?Kr:this.errors?zn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ri)?Ri:this._anyControlsHaveStatus(zn)?zn:Ur}_anyControlsHaveStatus(Y){return this._anyControls(U=>U.status===Y)}_anyControlsDirty(){return this._anyControls(Y=>Y.dirty)}_anyControlsTouched(){return this._anyControls(Y=>Y.touched)}_updatePristine(Y={}){this.pristine=!this._anyControlsDirty(),this._parent&&!Y.onlySelf&&this._parent._updatePristine(Y)}_updateTouched(Y={}){this.touched=this._anyControlsTouched(),this._parent&&!Y.onlySelf&&this._parent._updateTouched(Y)}_registerOnCollectionChange(Y){this._onCollectionChange=Y}_setUpdateStrategy(Y){Ye(Y)&&null!=Y.updateOn&&(this._updateOn=Y.updateOn)}_parentMarkedDirty(Y){return!Y&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(Y){return null}_assignValidators(Y){this._rawValidators=Array.isArray(Y)?Y.slice():Y,this._composedValidatorFn=function xs(H){return Array.isArray(H)?Je(H):H||null}(this._rawValidators)}_assignAsyncValidators(Y){this._rawAsyncValidators=Array.isArray(Y)?Y.slice():Y,this._composedAsyncValidatorFn=function Et(H){return Array.isArray(H)?qe(H):H||null}(this._rawAsyncValidators)}}class de extends ce{constructor(Y,U,ie){super($r(U),Ci(ie,U)),this.controls=Y,this._initObservables(),this._setUpdateStrategy(U),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Y,U){return this.controls[Y]?this.controls[Y]:(this.controls[Y]=U,U.setParent(this),U._registerOnCollectionChange(this._onCollectionChange),U)}addControl(Y,U,ie={}){this.registerControl(Y,U),this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}removeControl(Y,U={}){this.controls[Y]&&this.controls[Y]._registerOnCollectionChange(()=>{}),delete this.controls[Y],this.updateValueAndValidity({emitEvent:U.emitEvent}),this._onCollectionChange()}setControl(Y,U,ie={}){this.controls[Y]&&this.controls[Y]._registerOnCollectionChange(()=>{}),delete this.controls[Y],U&&this.registerControl(Y,U),this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}contains(Y){return this.controls.hasOwnProperty(Y)&&this.controls[Y].enabled}setValue(Y,U={}){We(this,0,Y),Object.keys(Y).forEach(ie=>{ye(this,!0,ie),this.controls[ie].setValue(Y[ie],{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U)}patchValue(Y,U={}){null!=Y&&(Object.keys(Y).forEach(ie=>{const De=this.controls[ie];De&&De.patchValue(Y[ie],{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U))}reset(Y={},U={}){this._forEachChild((ie,De)=>{ie.reset(Y?Y[De]:null,{onlySelf:!0,emitEvent:U.emitEvent})}),this._updatePristine(U),this._updateTouched(U),this.updateValueAndValidity(U)}getRawValue(){return this._reduceChildren({},(Y,U,ie)=>(Y[ie]=U.getRawValue(),Y))}_syncPendingControls(){let Y=this._reduceChildren(!1,(U,ie)=>!!ie._syncPendingControls()||U);return Y&&this.updateValueAndValidity({onlySelf:!0}),Y}_forEachChild(Y){Object.keys(this.controls).forEach(U=>{const ie=this.controls[U];ie&&Y(ie,U)})}_setUpControls(){this._forEachChild(Y=>{Y.setParent(this),Y._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Y){for(const[U,ie]of Object.entries(this.controls))if(this.contains(U)&&Y(ie))return!0;return!1}_reduceValue(){return this._reduceChildren({},(U,ie,De)=>((ie.enabled||this.disabled)&&(U[De]=ie.value),U))}_reduceChildren(Y,U){let ie=Y;return this._forEachChild((De,un)=>{ie=U(ie,De,un)}),ie}_allControlsDisabled(){for(const Y of Object.keys(this.controls))if(this.controls[Y].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(Y){return this.controls.hasOwnProperty(Y)?this.controls[Y]:null}}class $e extends de{}const qt=new y.UbH("CallSetDisabledState",{providedIn:"root",factory:()=>In}),In="always";function wn(H,Y){return[...Y.path,H]}function Ln(H,Y,U=In){jn(H,Y),Y.valueAccessor.writeValue(H.value),(H.disabled||"always"===U)&&Y.valueAccessor.setDisabledState?.(H.disabled),function Ze(H,Y){Y.valueAccessor.registerOnChange(U=>{H._pendingValue=U,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&St(H,Y)})}(H,Y),function en(H,Y){const U=(ie,De)=>{Y.valueAccessor.writeValue(ie),De&&Y.viewToModelUpdate(ie)};H.registerOnChange(U),Y._registerOnDestroy(()=>{H._unregisterOnChange(U)})}(H,Y),function nt(H,Y){Y.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&St(H,Y),"submit"!==H.updateOn&&H.markAsTouched()})}(H,Y),function pn(H,Y){if(Y.valueAccessor.setDisabledState){const U=ie=>{Y.valueAccessor.setDisabledState(ie)};H.registerOnDisabledChange(U),Y._registerOnDestroy(()=>{H._unregisterOnDisabledChange(U)})}}(H,Y)}function Zt(H,Y,U=!0){const ie=()=>{};Y.valueAccessor&&(Y.valueAccessor.registerOnChange(ie),Y.valueAccessor.registerOnTouched(ie)),Oe(H,Y),H&&(Y._invokeOnDestroyCallbacks(),H._registerOnCollectionChange(()=>{}))}function Nr(H,Y){H.forEach(U=>{U.registerOnValidatorChange&&U.registerOnValidatorChange(Y)})}function jn(H,Y){const U=ft(H);null!==Y.validator?H.setValidators(gt(U,Y.validator)):"function"==typeof U&&H.setValidators([U]);const ie=At(H);null!==Y.asyncValidator?H.setAsyncValidators(gt(ie,Y.asyncValidator)):"function"==typeof ie&&H.setAsyncValidators([ie]);const De=()=>H.updateValueAndValidity();Nr(Y._rawValidators,De),Nr(Y._rawAsyncValidators,De)}function Oe(H,Y){let U=!1;if(null!==H){if(null!==Y.validator){const De=ft(H);if(Array.isArray(De)&&De.length>0){const un=De.filter(er=>er!==Y.validator);un.length!==De.length&&(U=!0,H.setValidators(un))}}if(null!==Y.asyncValidator){const De=At(H);if(Array.isArray(De)&&De.length>0){const un=De.filter(er=>er!==Y.asyncValidator);un.length!==De.length&&(U=!0,H.setAsyncValidators(un))}}}const ie=()=>{};return Nr(Y._rawValidators,ie),Nr(Y._rawAsyncValidators,ie),U}function St(H,Y){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),Y.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function Te(H,Y){if(!H.hasOwnProperty("model"))return!1;const U=H.model;return!!U.isFirstChange()||!Object.is(Y,U.currentValue)}function kt(H,Y){if(!Y)return null;let U,ie,De;return Array.isArray(Y),Y.forEach(un=>{un.constructor===Ie?U=un:function yt(H){return Object.getPrototypeOf(H.constructor)===Ee}(un)?ie=un:De=un}),De||ie||U||null}function ur(H,Y){const U=H.indexOf(Y);U>-1&&H.splice(U,1)}function $n(H){return"object"==typeof H&&null!==H&&2===Object.keys(H).length&&"value"in H&&"disabled"in H}Promise.resolve();const cs=class extends ce{constructor(Y=null,U,ie){super($r(U),Ci(ie,U)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Y),this._setUpdateStrategy(U),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ye(U)&&(U.nonNullable||U.initialValueIsDefault)&&(this.defaultValue=$n(Y)?Y.value:Y)}setValue(Y,U={}){this.value=this._pendingValue=Y,this._onChange.length&&!1!==U.emitModelToViewChange&&this._onChange.forEach(ie=>ie(this.value,!1!==U.emitViewToModelChange)),this.updateValueAndValidity(U)}patchValue(Y,U={}){this.setValue(Y,U)}reset(Y=this.defaultValue,U={}){this._applyFormState(Y),this.markAsPristine(U),this.markAsUntouched(U),this.setValue(this.value,U),this._pendingChange=!1}_updateValue(){}_anyControls(Y){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Y){this._onChange.push(Y)}_unregisterOnChange(Y){ur(this._onChange,Y)}registerOnDisabledChange(Y){this._onDisabledChange.push(Y)}_unregisterOnDisabledChange(Y){ur(this._onDisabledChange,Y)}_forEachChild(Y){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Y){$n(Y)?(this.value=this._pendingValue=Y.value,Y.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Y}},ti={provide:Sn,useExisting:(0,y.wd)(()=>xi)},ks=Promise.resolve();let xi=(()=>{class H extends Sn{constructor(U,ie,De,un,er,Ps){super(),this._changeDetectorRef=er,this.callSetDisabledState=Ps,this.control=new cs,this._registered=!1,this.name="",this.update=new y._w7,this._parent=U,this._setValidators(ie),this._setAsyncValidators(De),this.valueAccessor=kt(0,un)}ngOnChanges(U){if(this._checkForErrors(),!this._registered||"name"in U){if(this._registered&&(this._checkName(),this.formDirective)){const ie=U.name.previousValue;this.formDirective.removeControl({name:ie,path:this._getPath(ie)})}this._setUpControl()}"isDisabled"in U&&this._updateDisabled(U),Te(U,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(U){this.viewModel=U,this.update.emit(U)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ln(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(U){ks.then(()=>{this.control.setValue(U,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(U){const ie=U.isDisabled.currentValue,De=0!==ie&&(0,y.cZD)(ie);ks.then(()=>{De&&!this.control.disabled?this.control.disable():!De&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(U){return this._parent?wn(U,this._parent):[U]}static#e=this.\u0275fac=function(ie){return new(ie||H)(y.GI1(Xt,9),y.GI1(Be,10),y.GI1(tt,10),y.GI1(Le,10),y.GI1(y.kD9,8),y.GI1(qt,8))};static#t=this.\u0275dir=y.Sc5({type:H,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[y.Wk5.None,"disabled","isDisabled"],model:[y.Wk5.None,"ngModel","model"],options:[y.Wk5.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[y.M5G([ti]),y.eg9,y.SYr]})}return H})(),sa=(()=>{class H{static#e=this.\u0275fac=function(ie){return new(ie||H)};static#t=this.\u0275dir=y.Sc5({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return H})();const Ki={provide:Le,useExisting:(0,y.wd)(()=>Wo),multi:!0};let Wo=(()=>{class H extends Ee{writeValue(U){this.setProperty("value",U??"")}registerOnChange(U){this.onChange=ie=>{U(""==ie?null:parseFloat(ie))}}static#e=this.\u0275fac=(()=>{let U;return function(De){return(U||(U=y.otF(H)))(De||H)}})();static#t=this.\u0275dir=y.Sc5({type:H,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(ie,De){1&ie&&y.qCj("input",function(er){return De.onChange(er.target.value)})("blur",function(){return De.onTouched()})},features:[y.M5G([Ki]),y.eg9]})}return H})();const Fs={provide:Le,useExisting:(0,y.wd)(()=>hi),multi:!0};let hi=(()=>{class H extends Ee{writeValue(U){this.setProperty("value",parseFloat(U))}registerOnChange(U){this.onChange=ie=>{U(""==ie?null:parseFloat(ie))}}static#e=this.\u0275fac=(()=>{let U;return function(De){return(U||(U=y.otF(H)))(De||H)}})();static#t=this.\u0275dir=y.Sc5({type:H,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(ie,De){1&ie&&y.qCj("change",function(er){return De.onChange(er.target.value)})("input",function(er){return De.onChange(er.target.value)})("blur",function(){return De.onTouched()})},features:[y.M5G([Fs]),y.eg9]})}return H})();const Ca=new y.UbH(""),so={provide:Xt,useExisting:(0,y.wd)(()=>Ho)};let Ho=(()=>{class H extends Xt{constructor(U,ie,De){super(),this.callSetDisabledState=De,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y._w7,this._setValidators(U),this._setAsyncValidators(ie)}ngOnChanges(U){this._checkFormPresent(),U.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Oe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(U){const ie=this.form.get(U.path);return Ln(ie,U,this.callSetDisabledState),ie.updateValueAndValidity({emitEvent:!1}),this.directives.push(U),ie}getControl(U){return this.form.get(U.path)}removeControl(U){Zt(U.control||null,U,!1),function zt(H,Y){const U=H.indexOf(Y);U>-1&&H.splice(U,1)}(this.directives,U)}addFormGroup(U){this._setUpFormContainer(U)}removeFormGroup(U){this._cleanUpFormContainer(U)}getFormGroup(U){return this.form.get(U.path)}addFormArray(U){this._setUpFormContainer(U)}removeFormArray(U){this._cleanUpFormContainer(U)}getFormArray(U){return this.form.get(U.path)}updateModel(U,ie){this.form.get(U.path).setValue(ie)}onSubmit(U){return this.submitted=!0,function Dt(H,Y){H._syncPendingControls(),Y.forEach(U=>{const ie=U.control;"submit"===ie.updateOn&&ie._pendingChange&&(U.viewToModelUpdate(ie._pendingValue),ie._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(U),"dialog"===U?.target?.method}onReset(){this.resetForm()}resetForm(U=void 0){this.form.reset(U),this.submitted=!1}_updateDomValue(){this.directives.forEach(U=>{const ie=U.control,De=this.form.get(U.path);ie!==De&&(Zt(ie||null,U),(H=>H instanceof cs)(De)&&(Ln(De,U,this.callSetDisabledState),U.control=De))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(U){const ie=this.form.get(U.path);(function Wn(H,Y){jn(H,Y)})(ie,U),ie.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(U){if(this.form){const ie=this.form.get(U.path);ie&&function Kn(H,Y){return Oe(H,Y)}(ie,U)&&ie.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){jn(this.form,this),this._oldForm&&Oe(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(ie){return new(ie||H)(y.GI1(Be,10),y.GI1(tt,10),y.GI1(qt,8))};static#t=this.\u0275dir=y.Sc5({type:H,selectors:[["","formGroup",""]],hostBindings:function(ie,De){1&ie&&y.qCj("submit",function(er){return De.onSubmit(er)})("reset",function(){return De.onReset()})},inputs:{form:[y.Wk5.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y.M5G([so]),y.eg9,y.SYr]})}return H})();const Bi={provide:Sn,useExisting:(0,y.wd)(()=>ji)};let ji=(()=>{class H extends Sn{set isDisabled(U){}static#e=this._ngModelWarningSentOnce=!1;constructor(U,ie,De,un,er){super(),this._ngModelWarningConfig=er,this._added=!1,this.name=null,this.update=new y._w7,this._ngModelWarningSent=!1,this._parent=U,this._setValidators(ie),this._setAsyncValidators(De),this.valueAccessor=kt(0,un)}ngOnChanges(U){this._added||this._setUpControl(),Te(U,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(U){this.viewModel=U,this.update.emit(U)}get path(){return wn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(ie){return new(ie||H)(y.GI1(Xt,13),y.GI1(Be,10),y.GI1(tt,10),y.GI1(Le,10),y.GI1(Ca,8))};static#n=this.\u0275dir=y.Sc5({type:H,selectors:[["","formControlName",""]],inputs:{name:[y.Wk5.None,"formControlName","name"],isDisabled:[y.Wk5.None,"disabled","isDisabled"],model:[y.Wk5.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[y.M5G([Bi]),y.eg9,y.SYr]})}return H})();const Yi={provide:Le,useExisting:(0,y.wd)(()=>Qi),multi:!0};function dr(H,Y){return null==H?`${Y}`:(Y&&"object"==typeof Y&&(Y="Object"),`${H}: ${Y}`.slice(0,50))}let Qi=(()=>{class H extends Ee{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(U){this._compareWith=U}writeValue(U){this.value=U;const De=dr(this._getOptionId(U),U);this.setProperty("value",De)}registerOnChange(U){this.onChange=ie=>{this.value=this._getOptionValue(ie),U(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(U){for(const ie of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ie),U))return ie;return null}_getOptionValue(U){const ie=function $i(H){return H.split(":")[0]}(U);return this._optionMap.has(ie)?this._optionMap.get(ie):U}static#e=this.\u0275fac=(()=>{let U;return function(De){return(U||(U=y.otF(H)))(De||H)}})();static#t=this.\u0275dir=y.Sc5({type:H,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(ie,De){1&ie&&y.qCj("change",function(er){return De.onChange(er.target.value)})("blur",function(){return De.onTouched()})},inputs:{compareWith:"compareWith"},features:[y.M5G([Yi]),y.eg9]})}return H})(),Pn=(()=>{class H{constructor(U,ie,De){this._element=U,this._renderer=ie,this._select=De,this._select&&(this.id=this._select._registerOption())}set ngValue(U){null!=this._select&&(this._select._optionMap.set(this.id,U),this._setElementValue(dr(this.id,U)),this._select.writeValue(this._select.value))}set value(U){this._setElementValue(U),this._select&&this._select.writeValue(this._select.value)}_setElementValue(U){this._renderer.setProperty(this._element.nativeElement,"value",U)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(ie){return new(ie||H)(y.GI1(y.GMv),y.GI1(y.q87),y.GI1(Qi,9))};static#t=this.\u0275dir=y.Sc5({type:H,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return H})();const Fi={provide:Le,useExisting:(0,y.wd)(()=>Ls),multi:!0};function wo(H,Y){return null==H?`${Y}`:("string"==typeof Y&&(Y=`'${Y}'`),Y&&"object"==typeof Y&&(Y="Object"),`${H}: ${Y}`.slice(0,50))}let Ls=(()=>{class H extends Ee{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(U){this._compareWith=U}writeValue(U){let ie;if(this.value=U,Array.isArray(U)){const De=U.map(un=>this._getOptionId(un));ie=(un,er)=>{un._setSelected(De.indexOf(er.toString())>-1)}}else ie=(De,un)=>{De._setSelected(!1)};this._optionMap.forEach(ie)}registerOnChange(U){this.onChange=ie=>{const De=[],un=ie.selectedOptions;if(void 0!==un){const er=un;for(let Ps=0;Ps<er.length;Ps++){const Gs=this._getOptionValue(er[Ps].value);De.push(Gs)}}else{const er=ie.options;for(let Ps=0;Ps<er.length;Ps++){const hs=er[Ps];if(hs.selected){const Gs=this._getOptionValue(hs.value);De.push(Gs)}}}this.value=De,U(De)}}_registerOption(U){const ie=(this._idCounter++).toString();return this._optionMap.set(ie,U),ie}_getOptionId(U){for(const ie of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ie)._value,U))return ie;return null}_getOptionValue(U){const ie=function oo(H){return H.split(":")[0]}(U);return this._optionMap.has(ie)?this._optionMap.get(ie)._value:U}static#e=this.\u0275fac=(()=>{let U;return function(De){return(U||(U=y.otF(H)))(De||H)}})();static#t=this.\u0275dir=y.Sc5({type:H,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(ie,De){1&ie&&y.qCj("change",function(er){return De.onChange(er.target)})("blur",function(){return De.onTouched()})},inputs:{compareWith:"compareWith"},features:[y.M5G([Fi]),y.eg9]})}return H})(),Vs=(()=>{class H{constructor(U,ie,De){this._element=U,this._renderer=ie,this._select=De,this._select&&(this.id=this._select._registerOption(this))}set ngValue(U){null!=this._select&&(this._value=U,this._setElementValue(wo(this.id,U)),this._select.writeValue(this._select.value))}set value(U){this._select?(this._value=U,this._setElementValue(wo(this.id,U)),this._select.writeValue(this._select.value)):this._setElementValue(U)}_setElementValue(U){this._renderer.setProperty(this._element.nativeElement,"value",U)}_setSelected(U){this._renderer.setProperty(this._element.nativeElement,"selected",U)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(ie){return new(ie||H)(y.GI1(y.GMv),y.GI1(y.q87),y.GI1(Ls,9))};static#t=this.\u0275dir=y.Sc5({type:H,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return H})(),oa=(()=>{class H{static#e=this.\u0275fac=function(ie){return new(ie||H)};static#t=this.\u0275mod=y.a4G({type:H});static#n=this.\u0275inj=y.s3X({})}return H})();class vc extends ce{constructor(Y,U,ie){super($r(U),Ci(ie,U)),this.controls=Y,this._initObservables(),this._setUpdateStrategy(U),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(Y){return this.controls[this._adjustIndex(Y)]}push(Y,U={}){this.controls.push(Y),this._registerControl(Y),this.updateValueAndValidity({emitEvent:U.emitEvent}),this._onCollectionChange()}insert(Y,U,ie={}){this.controls.splice(Y,0,U),this._registerControl(U),this.updateValueAndValidity({emitEvent:ie.emitEvent})}removeAt(Y,U={}){let ie=this._adjustIndex(Y);ie<0&&(ie=0),this.controls[ie]&&this.controls[ie]._registerOnCollectionChange(()=>{}),this.controls.splice(ie,1),this.updateValueAndValidity({emitEvent:U.emitEvent})}setControl(Y,U,ie={}){let De=this._adjustIndex(Y);De<0&&(De=0),this.controls[De]&&this.controls[De]._registerOnCollectionChange(()=>{}),this.controls.splice(De,1),U&&(this.controls.splice(De,0,U),this._registerControl(U)),this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(Y,U={}){We(this,0,Y),Y.forEach((ie,De)=>{ye(this,!1,De),this.at(De).setValue(ie,{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U)}patchValue(Y,U={}){null!=Y&&(Y.forEach((ie,De)=>{this.at(De)&&this.at(De).patchValue(ie,{onlySelf:!0,emitEvent:U.emitEvent})}),this.updateValueAndValidity(U))}reset(Y=[],U={}){this._forEachChild((ie,De)=>{ie.reset(Y[De],{onlySelf:!0,emitEvent:U.emitEvent})}),this._updatePristine(U),this._updateTouched(U),this.updateValueAndValidity(U)}getRawValue(){return this.controls.map(Y=>Y.getRawValue())}clear(Y={}){this.controls.length<1||(this._forEachChild(U=>U._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:Y.emitEvent}))}_adjustIndex(Y){return Y<0?Y+this.length:Y}_syncPendingControls(){let Y=this.controls.reduce((U,ie)=>!!ie._syncPendingControls()||U,!1);return Y&&this.updateValueAndValidity({onlySelf:!0}),Y}_forEachChild(Y){this.controls.forEach((U,ie)=>{Y(U,ie)})}_updateValue(){this.value=this.controls.filter(Y=>Y.enabled||this.disabled).map(Y=>Y.value)}_anyControls(Y){return this.controls.some(U=>U.enabled&&Y(U))}_setUpControls(){this._forEachChild(Y=>this._registerControl(Y))}_allControlsDisabled(){for(const Y of this.controls)if(Y.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(Y){Y.setParent(this),Y._registerOnCollectionChange(this._onCollectionChange)}_find(Y){return this.at(Y)??null}}function Xs(H){return!!H&&(void 0!==H.asyncValidators||void 0!==H.validators||void 0!==H.updateOn)}let To=(()=>{class H{constructor(){this.useNonNullable=!1}get nonNullable(){const U=new H;return U.useNonNullable=!0,U}group(U,ie=null){const De=this._reduceControls(U);let un={};return Xs(ie)?un=ie:null!==ie&&(un.validators=ie.validator,un.asyncValidators=ie.asyncValidator),new de(De,un)}record(U,ie=null){const De=this._reduceControls(U);return new $e(De,ie)}control(U,ie,De){let un={};return this.useNonNullable?(Xs(ie)?un=ie:(un.validators=ie,un.asyncValidators=De),new cs(U,{...un,nonNullable:!0})):new cs(U,ie,De)}array(U,ie,De){const un=U.map(er=>this._createControl(er));return new vc(un,ie,De)}_reduceControls(U){const ie={};return Object.keys(U).forEach(De=>{ie[De]=this._createControl(U[De])}),ie}_createControl(U){return U instanceof cs||U instanceof ce?U:Array.isArray(U)?this.control(U[0],U.length>1?U[1]:null,U.length>2?U[2]:null):this.control(U)}static#e=this.\u0275fac=function(ie){return new(ie||H)};static#t=this.\u0275prov=y.wxM({token:H,factory:H.\u0275fac,providedIn:"root"})}return H})(),Ja=(()=>{class H{static withConfig(U){return{ngModule:H,providers:[{provide:qt,useValue:U.callSetDisabledState??In}]}}static#e=this.\u0275fac=function(ie){return new(ie||H)};static#t=this.\u0275mod=y.a4G({type:H});static#n=this.\u0275inj=y.s3X({imports:[oa]})}return H})(),co=(()=>{class H{static withConfig(U){return{ngModule:H,providers:[{provide:Ca,useValue:U.warnOnNgModelWithFormControl??"always"},{provide:qt,useValue:U.callSetDisabledState??In}]}}static#e=this.\u0275fac=function(ie){return new(ie||H)};static#t=this.\u0275mod=y.a4G({type:H});static#n=this.\u0275inj=y.s3X({imports:[oa]})}return H})()},4476:(jt,He,V)=>{V.d(He,{OY:()=>Rr,iE:()=>qn,o_:()=>En,q:()=>Xe});var y=V(4496),q=V(1368);class k extends q.mg{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class D extends k{static makeCurrent(){(0,q.ug)(new D)}onAndCancel(Ye,ye,We){return Ye.addEventListener(ye,We),()=>{Ye.removeEventListener(ye,We)}}dispatchEvent(Ye,ye){Ye.dispatchEvent(ye)}remove(Ye){Ye.parentNode&&Ye.parentNode.removeChild(Ye)}createElement(Ye,ye){return(ye=ye||this.getDefaultDocument()).createElement(Ye)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ye){return Ye.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ye){return Ye instanceof DocumentFragment}getGlobalEventTarget(Ye,ye){return"window"===ye?window:"document"===ye?Ye:"body"===ye?Ye.body:null}getBaseHref(Ye){const ye=function _e(){return W=W||document.querySelector("base"),W?W.getAttribute("href"):null}();return null==ye?null:function Ee(Et){return new URL(Et,document.baseURI).pathname}(ye)}resetBaseElement(){W=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ye){return(0,q.Sg)(document.cookie,Ye)}}let W=null,Pe=(()=>{class Et{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(We){return new(We||Et)};static#t=this.\u0275prov=y.wxM({token:Et,factory:Et.\u0275fac})}return Et})();const ge=new y.UbH("");let fe=(()=>{class Et{constructor(ye,We){this._zone=We,this._eventNameToPlugin=new Map,ye.forEach(ce=>{ce.manager=this}),this._plugins=ye.slice().reverse()}addEventListener(ye,We,ce){return this._findPluginFor(We).addEventListener(ye,We,ce)}getZone(){return this._zone}_findPluginFor(ye){let We=this._eventNameToPlugin.get(ye);if(We)return We;if(We=this._plugins.find(de=>de.supports(ye)),!We)throw new y.OBp(5101,!1);return this._eventNameToPlugin.set(ye,We),We}static#e=this.\u0275fac=function(We){return new(We||Et)(y.CoB(ge),y.CoB(y.WW2))};static#t=this.\u0275prov=y.wxM({token:Et,factory:Et.\u0275fac})}return Et})();class xe{constructor(Ye){this._doc=Ye}}const it="ng-app-id";let Ie=(()=>{class Et{constructor(ye,We,ce,de={}){this.doc=ye,this.appId=We,this.nonce=ce,this.platformId=de,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,q.uf)(de),this.resetHostNodes()}addStyles(ye){for(const We of ye)1===this.changeUsageCount(We,1)&&this.onStyleAdded(We)}removeStyles(ye){for(const We of ye)this.changeUsageCount(We,-1)<=0&&this.onStyleRemoved(We)}ngOnDestroy(){const ye=this.styleNodesInDOM;ye&&(ye.forEach(We=>We.remove()),ye.clear());for(const We of this.getAllStyles())this.onStyleRemoved(We);this.resetHostNodes()}addHost(ye){this.hostNodes.add(ye);for(const We of this.getAllStyles())this.addStyleToHost(ye,We)}removeHost(ye){this.hostNodes.delete(ye)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(ye){for(const We of this.hostNodes)this.addStyleToHost(We,ye)}onStyleRemoved(ye){const We=this.styleRef;We.get(ye)?.elements?.forEach(ce=>ce.remove()),We.delete(ye)}collectServerRenderedStyles(){const ye=this.doc.head?.querySelectorAll(`style[${it}="${this.appId}"]`);if(ye?.length){const We=new Map;return ye.forEach(ce=>{null!=ce.textContent&&We.set(ce.textContent,ce)}),We}return null}changeUsageCount(ye,We){const ce=this.styleRef;if(ce.has(ye)){const de=ce.get(ye);return de.usage+=We,de.usage}return ce.set(ye,{usage:We,elements:[]}),We}getStyleElement(ye,We){const ce=this.styleNodesInDOM,de=ce?.get(We);if(de?.parentNode===ye)return ce.delete(We),de.removeAttribute(it),de;{const ee=this.doc.createElement("style");return this.nonce&&ee.setAttribute("nonce",this.nonce),ee.textContent=We,this.platformIsServer&&ee.setAttribute(it,this.appId),ye.appendChild(ee),ee}}addStyleToHost(ye,We){const ce=this.getStyleElement(ye,We),de=this.styleRef,ee=de.get(We)?.elements;ee?ee.push(ce):de.set(We,{elements:[ce],usage:1})}resetHostNodes(){const ye=this.hostNodes;ye.clear(),ye.add(this.doc.head)}static#e=this.\u0275fac=function(We){return new(We||Et)(y.CoB(q.Ud),y.CoB(y.QHP),y.CoB(y.YND,8),y.CoB(y.AHE))};static#t=this.\u0275prov=y.wxM({token:Et,factory:Et.\u0275fac})}return Et})();const be={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pt=/%COMP%/g,Ae=new y.UbH("",{providedIn:"root",factory:()=>!0});function Re(Et,Ye){return Ye.map(ye=>ye.replace(pt,Et))}let Xe=(()=>{class Et{constructor(ye,We,ce,de,ee,Z,te,$e=null){this.eventManager=ye,this.sharedStylesHost=We,this.appId=ce,this.removeStylesOnCompDestroy=de,this.doc=ee,this.platformId=Z,this.ngZone=te,this.nonce=$e,this.rendererByCompId=new Map,this.platformIsServer=(0,q.uf)(Z),this.defaultRenderer=new pe(ye,ee,te,this.platformIsServer)}createRenderer(ye,We){if(!ye||!We)return this.defaultRenderer;this.platformIsServer&&We.encapsulation===y.K6R.ShadowDom&&(We={...We,encapsulation:y.K6R.Emulated});const ce=this.getOrCreateRenderer(ye,We);return ce instanceof Tt?ce.applyToHost(ye):ce instanceof wt&&ce.applyStyles(),ce}getOrCreateRenderer(ye,We){const ce=this.rendererByCompId;let de=ce.get(We.id);if(!de){const ee=this.doc,Z=this.ngZone,te=this.eventManager,$e=this.sharedStylesHost,It=this.removeStylesOnCompDestroy,qt=this.platformIsServer;switch(We.encapsulation){case y.K6R.Emulated:de=new Tt(te,$e,We,this.appId,It,ee,Z,qt);break;case y.K6R.ShadowDom:return new at(te,$e,ye,We,ee,Z,this.nonce,qt);default:de=new wt(te,$e,We,It,ee,Z,qt)}ce.set(We.id,de)}return de}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(We){return new(We||Et)(y.CoB(fe),y.CoB(Ie),y.CoB(y.QHP),y.CoB(Ae),y.CoB(q.Ud),y.CoB(y.AHE),y.CoB(y.WW2),y.CoB(y.YND))};static#t=this.\u0275prov=y.wxM({token:Et,factory:Et.\u0275fac})}return Et})();class pe{constructor(Ye,ye,We,ce){this.eventManager=Ye,this.doc=ye,this.ngZone=We,this.platformIsServer=ce,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(Ye,ye){return ye?this.doc.createElementNS(be[ye]||ye,Ye):this.doc.createElement(Ye)}createComment(Ye){return this.doc.createComment(Ye)}createText(Ye){return this.doc.createTextNode(Ye)}appendChild(Ye,ye){(ze(Ye)?Ye.content:Ye).appendChild(ye)}insertBefore(Ye,ye,We){Ye&&(ze(Ye)?Ye.content:Ye).insertBefore(ye,We)}removeChild(Ye,ye){Ye&&Ye.removeChild(ye)}selectRootElement(Ye,ye){let We="string"==typeof Ye?this.doc.querySelector(Ye):Ye;if(!We)throw new y.OBp(-5104,!1);return ye||(We.textContent=""),We}parentNode(Ye){return Ye.parentNode}nextSibling(Ye){return Ye.nextSibling}setAttribute(Ye,ye,We,ce){if(ce){ye=ce+":"+ye;const de=be[ce];de?Ye.setAttributeNS(de,ye,We):Ye.setAttribute(ye,We)}else Ye.setAttribute(ye,We)}removeAttribute(Ye,ye,We){if(We){const ce=be[We];ce?Ye.removeAttributeNS(ce,ye):Ye.removeAttribute(`${We}:${ye}`)}else Ye.removeAttribute(ye)}addClass(Ye,ye){Ye.classList.add(ye)}removeClass(Ye,ye){Ye.classList.remove(ye)}setStyle(Ye,ye,We,ce){ce&(y.yzm.DashCase|y.yzm.Important)?Ye.style.setProperty(ye,We,ce&y.yzm.Important?"important":""):Ye.style[ye]=We}removeStyle(Ye,ye,We){We&y.yzm.DashCase?Ye.style.removeProperty(ye):Ye.style[ye]=""}setProperty(Ye,ye,We){null!=Ye&&(Ye[ye]=We)}setValue(Ye,ye){Ye.nodeValue=ye}listen(Ye,ye,We){if("string"==typeof Ye&&!(Ye=(0,q.uy)().getGlobalEventTarget(this.doc,Ye)))throw new Error(`Unsupported event target ${Ye} for event ${ye}`);return this.eventManager.addEventListener(Ye,ye,this.decoratePreventDefault(We))}decoratePreventDefault(Ye){return ye=>{if("__ngUnwrap__"===ye)return Ye;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Ye(ye)):Ye(ye))&&ye.preventDefault()}}}function ze(Et){return"TEMPLATE"===Et.tagName&&void 0!==Et.content}class at extends pe{constructor(Ye,ye,We,ce,de,ee,Z,te){super(Ye,de,ee,te),this.sharedStylesHost=ye,this.hostEl=We,this.shadowRoot=We.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const $e=Re(ce.id,ce.styles);for(const It of $e){const qt=document.createElement("style");Z&&qt.setAttribute("nonce",Z),qt.textContent=It,this.shadowRoot.appendChild(qt)}}nodeOrShadowRoot(Ye){return Ye===this.hostEl?this.shadowRoot:Ye}appendChild(Ye,ye){return super.appendChild(this.nodeOrShadowRoot(Ye),ye)}insertBefore(Ye,ye,We){return super.insertBefore(this.nodeOrShadowRoot(Ye),ye,We)}removeChild(Ye,ye){return super.removeChild(this.nodeOrShadowRoot(Ye),ye)}parentNode(Ye){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ye)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class wt extends pe{constructor(Ye,ye,We,ce,de,ee,Z,te){super(Ye,de,ee,Z),this.sharedStylesHost=ye,this.removeStylesOnCompDestroy=ce,this.styles=te?Re(te,We.styles):We.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Tt extends wt{constructor(Ye,ye,We,ce,de,ee,Z,te){const $e=ce+"-"+We.id;super(Ye,ye,We,de,ee,Z,te,$e),this.contentAttr=function ke(Et){return"_ngcontent-%COMP%".replace(pt,Et)}($e),this.hostAttr=function ae(Et){return"_nghost-%COMP%".replace(pt,Et)}($e)}applyToHost(Ye){this.applyStyles(),this.setAttribute(Ye,this.hostAttr,"")}createElement(Ye,ye){const We=super.createElement(Ye,ye);return super.setAttribute(We,this.contentAttr,""),We}}let mt=(()=>{class Et extends xe{constructor(ye){super(ye)}supports(ye){return!0}addEventListener(ye,We,ce){return ye.addEventListener(We,ce,!1),()=>this.removeEventListener(ye,We,ce)}removeEventListener(ye,We,ce){return ye.removeEventListener(We,ce)}static#e=this.\u0275fac=function(We){return new(We||Et)(y.CoB(q.Ud))};static#t=this.\u0275prov=y.wxM({token:Et,factory:Et.\u0275fac})}return Et})();const Lt=["alt","control","meta","shift"],rn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ue={alt:Et=>Et.altKey,control:Et=>Et.ctrlKey,meta:Et=>Et.metaKey,shift:Et=>Et.shiftKey};let Je=(()=>{class Et extends xe{constructor(ye){super(ye)}supports(ye){return null!=Et.parseEventName(ye)}addEventListener(ye,We,ce){const de=Et.parseEventName(We),ee=Et.eventCallback(de.fullKey,ce,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,q.uy)().onAndCancel(ye,de.domEventName,ee))}static parseEventName(ye){const We=ye.toLowerCase().split("."),ce=We.shift();if(0===We.length||"keydown"!==ce&&"keyup"!==ce)return null;const de=Et._normalizeKey(We.pop());let ee="",Z=We.indexOf("code");if(Z>-1&&(We.splice(Z,1),ee="code."),Lt.forEach($e=>{const It=We.indexOf($e);It>-1&&(We.splice(It,1),ee+=$e+".")}),ee+=de,0!=We.length||0===de.length)return null;const te={};return te.domEventName=ce,te.fullKey=ee,te}static matchEventFullKeyCode(ye,We){let ce=rn[ye.key]||ye.key,de="";return We.indexOf("code.")>-1&&(ce=ye.code,de="code."),!(null==ce||!ce)&&(ce=ce.toLowerCase()," "===ce?ce="space":"."===ce&&(ce="dot"),Lt.forEach(ee=>{ee!==ce&&(0,Ue[ee])(ye)&&(de+=ee+".")}),de+=ce,de===We)}static eventCallback(ye,We,ce){return de=>{Et.matchEventFullKeyCode(de,ye)&&ce.runGuarded(()=>We(de))}}static _normalizeKey(ye){return"esc"===ye?"escape":ye}static#e=this.\u0275fac=function(We){return new(We||Et)(y.CoB(q.Ud))};static#t=this.\u0275prov=y.wxM({token:Et,factory:Et.\u0275fac})}return Et})();const En=(0,y.grM)(y.m4O,"browser",[{provide:y.AHE,useValue:q._k},{provide:y.crf,useValue:function At(){D.makeCurrent()},multi:!0},{provide:q.Ud,useFactory:function tn(){return(0,y.auf)(document),document},deps:[]}]),An=new y.UbH(""),Xt=[{provide:y.Mn9,useClass:class Le{addToWindow(Ye){y.IHs.getAngularTestability=(We,ce=!0)=>{const de=Ye.findTestabilityInTree(We,ce);if(null==de)throw new y.OBp(5103,!1);return de},y.IHs.getAllAngularTestabilities=()=>Ye.getAllTestabilities(),y.IHs.getAllAngularRootElements=()=>Ye.getAllRootElements(),y.IHs.frameworkStabilizers||(y.IHs.frameworkStabilizers=[]),y.IHs.frameworkStabilizers.push(We=>{const ce=y.IHs.getAllAngularTestabilities();let de=ce.length;const ee=function(){de--,0==de&&We()};ce.forEach(Z=>{Z.whenStable(ee)})})}findTestabilityInTree(Ye,ye,We){return null==ye?null:Ye.getTestability(ye)??(We?(0,q.uy)().isShadowRoot(ye)?this.findTestabilityInTree(Ye,ye.host,!0):this.findTestabilityInTree(Ye,ye.parentElement,!0):null)}},deps:[]},{provide:y.aS5,useClass:y.G4X,deps:[y.WW2,y.eOv,y.Mn9]},{provide:y.G4X,useClass:y.G4X,deps:[y.WW2,y.eOv,y.Mn9]}],Sn=[{provide:y.i4S,useValue:"root"},{provide:y.eAe,useFactory:function Jt(){return new y.eAe},deps:[]},{provide:ge,useClass:mt,multi:!0,deps:[q.Ud,y.WW2,y.AHE]},{provide:ge,useClass:Je,multi:!0,deps:[q.Ud]},Xe,Ie,fe,{provide:y.O8F,useExisting:Xe},{provide:q.OM,useClass:Pe,deps:[]},[]];let qn=(()=>{class Et{constructor(ye){}static withServerTransition(ye){return{ngModule:Et,providers:[{provide:y.QHP,useValue:ye.appId}]}}static#e=this.\u0275fac=function(We){return new(We||Et)(y.CoB(An,12))};static#t=this.\u0275mod=y.a4G({type:Et});static#n=this.\u0275inj=y.s3X({providers:[...Sn,...Xt],imports:[q.MD,y.Ev2]})}return Et})(),Rr=(()=>{class Et{constructor(ye){this._doc=ye}getTitle(){return this._doc.title}setTitle(ye){this._doc.title=ye||""}static#e=this.\u0275fac=function(We){return new(We||Et)(y.CoB(q.Ud))};static#t=this.\u0275prov=y.wxM({token:Et,factory:Et.\u0275fac,providedIn:"root"})}return Et})()},4856:(jt,He,V)=>{V.d(He,{gV:()=>Fi,E5:()=>ri,ER:()=>sn,qQ:()=>Ir,cP:()=>Si});var y=V(4496),q=V(3252),k=V(8880),W=V(9900),_e=V(2700),Ee=V(6700),Le=V(4300),Pe=V(528),ge=V(4187),fe=V(6624),xe=V(7904),it=V(7773),Ie=V(9399);function be(...w){const N=(0,fe.e_)(w),A=(0,fe.yu)(w),{args:x,keys:G}=(0,Le.Q)(w);if(0===x.length)return(0,W.Q)([],N);const re=new q._(function pt(w,N,A=Pe.Z){return x=>{Be(N,()=>{const{length:G}=w,re=new Array(G);let ve=G,dt=G;for(let rt=0;rt<G;rt++)Be(N,()=>{const $t=(0,W.Q)(w[rt],N);let Ut=!1;$t.subscribe((0,it.e)(x,nr=>{re[rt]=nr,Ut||(Ut=!0,dt--),dt||x.next(A(re.slice()))},()=>{--ve||x.complete()}))},x)},x)}}(x,N,G?ve=>(0,xe.q)(G,ve):Pe.Z));return A?re.pipe((0,ge.j)(A)):re}function Be(w,N,A){w?(0,Ie._)(A,w,N):N()}var tt=V(7696),Ke=V(7228),st=V(560);function Ae(w){return new q._(N=>{(0,st.Uv)(w()).subscribe(N)})}var ke=V(3928);function ae(w,N){const A=(0,k.m)(w)?w:()=>w,x=G=>G.error(A());return new q._(N?G=>N.schedule(x,0,G):x)}var Re=V(8960),Xe=V(6928),pe=V(5448);function we(){return(0,pe.i)((w,N)=>{let A=null;w._refCount++;const x=(0,it.e)(N,void 0,void 0,void 0,()=>{if(!w||w._refCount<=0||0<--w._refCount)return void(A=null);const G=w._connection,re=A;A=null,G&&(!re||G===re)&&G.unsubscribe(),N.unsubscribe()});w.subscribe(x),x.closed||(A=w.connect())})}class Ve extends q._{constructor(N,A){super(),this.source=N,this.subjectFactory=A,this._subject=null,this._refCount=0,this._connection=null,(0,pe.e)(N)&&(this.lift=N.lift)}_subscribe(N){return this.getSubject().subscribe(N)}getSubject(){const N=this._subject;return(!N||N.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:N}=this;this._subject=this._connection=null,N?.unsubscribe()}connect(){let N=this._connection;if(!N){N=this._connection=new Xe.wH;const A=this.getSubject();N.add(this.source.subscribe((0,it.e)(A,void 0,()=>{this._teardown(),A.complete()},x=>{this._teardown(),A.error(x)},()=>this._teardown()))),N.closed&&(this._connection=null,N=Xe.wH.EMPTY)}return N}refCount(){return we()(this)}}var ze=V(5657),at=V(1368),wt=V(4704),Tt=V(7368),mt=V(3992),Lt=V(5568),rn=V(6684),Ue=V(7400),Je=V(5084),lt=V(6020),qe=V(9212),gt=V(9144),ft=V(208),At=V(2156);function Jt(w){return w<=0?()=>Re.k:(0,pe.i)((N,A)=>{let x=[];N.subscribe((0,it.e)(A,G=>{x.push(G),w<x.length&&x.shift()},()=>{for(const G of x)A.next(G);A.complete()},void 0,()=>{x=null}))})}var tn=V(8124),An=V(8824),Xt=V(308),qn=V(267),Vr=V(4476);const Wt="primary",Rr=Symbol("RouteTitle");class Bt{constructor(N){this.params=N||{}}has(N){return Object.prototype.hasOwnProperty.call(this.params,N)}get(N){if(this.has(N)){const A=this.params[N];return Array.isArray(A)?A[0]:A}return null}getAll(N){if(this.has(N)){const A=this.params[N];return Array.isArray(A)?A:[A]}return[]}get keys(){return Object.keys(this.params)}}function Xr(w){return new Bt(w)}function Un(w,N,A){const x=A.path.split("/");if(x.length>w.length||"full"===A.pathMatch&&(N.hasChildren()||x.length<w.length))return null;const G={};for(let re=0;re<x.length;re++){const ve=x[re],dt=w[re];if(ve.startsWith(":"))G[ve.substring(1)]=dt;else if(ve!==dt.path)return null}return{consumed:w.slice(0,x.length),posParams:G}}function Sr(w,N){const A=w?Di(w):void 0,x=N?Di(N):void 0;if(!A||!x||A.length!=x.length)return!1;let G;for(let re=0;re<A.length;re++)if(G=A[re],!ar(w[G],N[G]))return!1;return!0}function Di(w){return[...Object.keys(w),...Object.getOwnPropertySymbols(w)]}function ar(w,N){if(Array.isArray(w)&&Array.isArray(N)){if(w.length!==N.length)return!1;const A=[...w].sort(),x=[...N].sort();return A.every((G,re)=>x[re]===G)}return w===N}function Cn(w){return w.length>0?w[w.length-1]:null}function yn(w){return function D(w){return!!w&&(w instanceof q._||(0,k.m)(w.lift)&&(0,k.m)(w.subscribe))}(w)?w:(0,y.w5$)(w)?(0,W.Q)(Promise.resolve(w)):(0,_e.of)(w)}const ui={exact:function Ui(w,N,A){if(!$r(w.segments,N.segments)||!Dn(w.segments,N.segments,A)||w.numberOfChildren!==N.numberOfChildren)return!1;for(const x in N.children)if(!w.children[x]||!Ui(w.children[x],N.children[x],A))return!1;return!0},subset:Bn},io={exact:function qi(w,N){return Sr(w,N)},subset:function xn(w,N){return Object.keys(N).length<=Object.keys(w).length&&Object.keys(N).every(A=>ar(w[A],N[A]))},ignored:()=>!0};function Zr(w,N,A){return ui[A.paths](w.root,N.root,A.matrixParams)&&io[A.queryParams](w.queryParams,N.queryParams)&&!("exact"===A.fragment&&w.fragment!==N.fragment)}function Bn(w,N,A){return Or(w,N,N.segments,A)}function Or(w,N,A,x){if(w.segments.length>A.length){const G=w.segments.slice(0,A.length);return!(!$r(G,A)||N.hasChildren()||!Dn(G,A,x))}if(w.segments.length===A.length){if(!$r(w.segments,A)||!Dn(w.segments,A,x))return!1;for(const G in N.children)if(!w.children[G]||!Bn(w.children[G],N.children[G],x))return!1;return!0}{const G=A.slice(0,w.segments.length),re=A.slice(w.segments.length);return!!($r(w.segments,G)&&Dn(w.segments,G,x)&&w.children[Wt])&&Or(w.children[Wt],N,re,x)}}function Dn(w,N,A){return N.every((x,G)=>io[A](w[G].parameters,x.parameters))}class Ur{constructor(N=new zn([],{}),A={},x=null){this.root=N,this.queryParams=A,this.fragment=x}get queryParamMap(){return this._queryParamMap??=Xr(this.queryParams),this._queryParamMap}toString(){return Ye.serialize(this)}}class zn{constructor(N,A){this.segments=N,this.children=A,this.parent=null,Object.values(A).forEach(x=>x.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ye(this)}}class Ri{constructor(N,A){this.path=N,this.parameters=A}get parameterMap(){return this._parameterMap??=Xr(this.parameters),this._parameterMap}toString(){return It(this)}}function $r(w,N){return w.length===N.length&&w.every((A,x)=>A.path===N[x].path)}let Ci=(()=>{class w{static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=y.wxM({token:w,factory:()=>new Et,providedIn:"root"})}return w})();class Et{parse(N){const A=new nt(N);return new Ur(A.parseRootSegment(),A.parseQueryParams(),A.parseFragment())}serialize(N){const A=`/${We(N.root,!0)}`,x=function In(w){const N=Object.entries(w).map(([A,x])=>Array.isArray(x)?x.map(G=>`${de(A)}=${de(G)}`).join("&"):`${de(A)}=${de(x)}`).filter(A=>A);return N.length?`?${N.join("&")}`:""}(N.queryParams);return`${A}${x}${"string"==typeof N.fragment?`#${function ee(w){return encodeURI(w)}(N.fragment)}`:""}`}}const Ye=new Et;function ye(w){return w.segments.map(N=>It(N)).join("/")}function We(w,N){if(!w.hasChildren())return ye(w);if(N){const A=w.children[Wt]?We(w.children[Wt],!1):"",x=[];return Object.entries(w.children).forEach(([G,re])=>{G!==Wt&&x.push(`${G}:${We(re,!1)}`)}),x.length>0?`${A}(${x.join("//")})`:A}{const A=function xs(w,N){let A=[];return Object.entries(w.children).forEach(([x,G])=>{x===Wt&&(A=A.concat(N(G,x)))}),Object.entries(w.children).forEach(([x,G])=>{x!==Wt&&(A=A.concat(N(G,x)))}),A}(w,(x,G)=>G===Wt?[We(w.children[Wt],!1)]:[`${G}:${We(x,!1)}`]);return 1===Object.keys(w.children).length&&null!=w.children[Wt]?`${ye(w)}/${A[0]}`:`${ye(w)}/(${A.join("//")})`}}function ce(w){return encodeURIComponent(w).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function de(w){return ce(w).replace(/%3B/gi,";")}function Z(w){return ce(w).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function te(w){return decodeURIComponent(w)}function $e(w){return te(w.replace(/\+/g,"%20"))}function It(w){return`${Z(w.path)}${function qt(w){return Object.entries(w).map(([N,A])=>`;${Z(N)}=${Z(A)}`).join("")}(w.parameters)}`}const wn=/^[^\/()?;#]+/;function Ln(w){const N=w.match(wn);return N?N[0]:""}const Zt=/^[^\/()?;=#]+/,pn=/^[^=?&#]+/,Oe=/^[^&#]+/;class nt{constructor(N){this.url=N,this.remaining=N}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zn([],{}):new zn([],this.parseChildren())}parseQueryParams(){const N={};if(this.consumeOptional("?"))do{this.parseQueryParam(N)}while(this.consumeOptional("&"));return N}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const N=[];for(this.peekStartsWith("(")||N.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),N.push(this.parseSegment());let A={};this.peekStartsWith("/(")&&(this.capture("/"),A=this.parseParens(!0));let x={};return this.peekStartsWith("(")&&(x=this.parseParens(!1)),(N.length>0||Object.keys(A).length>0)&&(x[Wt]=new zn(N,A)),x}parseSegment(){const N=Ln(this.remaining);if(""===N&&this.peekStartsWith(";"))throw new y.OBp(4009,!1);return this.capture(N),new Ri(te(N),this.parseMatrixParams())}parseMatrixParams(){const N={};for(;this.consumeOptional(";");)this.parseParam(N);return N}parseParam(N){const A=function Nr(w){const N=w.match(Zt);return N?N[0]:""}(this.remaining);if(!A)return;this.capture(A);let x="";if(this.consumeOptional("=")){const G=Ln(this.remaining);G&&(x=G,this.capture(x))}N[te(A)]=te(x)}parseQueryParam(N){const A=function jn(w){const N=w.match(pn);return N?N[0]:""}(this.remaining);if(!A)return;this.capture(A);let x="";if(this.consumeOptional("=")){const ve=function Ze(w){const N=w.match(Oe);return N?N[0]:""}(this.remaining);ve&&(x=ve,this.capture(x))}const G=$e(A),re=$e(x);if(N.hasOwnProperty(G)){let ve=N[G];Array.isArray(ve)||(ve=[ve],N[G]=ve),ve.push(re)}else N[G]=re}parseParens(N){const A={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const x=Ln(this.remaining),G=this.remaining[x.length];if("/"!==G&&")"!==G&&";"!==G)throw new y.OBp(4010,!1);let re;x.indexOf(":")>-1?(re=x.slice(0,x.indexOf(":")),this.capture(re),this.capture(":")):N&&(re=Wt);const ve=this.parseChildren();A[re]=1===Object.keys(ve).length?ve[Wt]:new zn([],ve),this.consumeOptional("//")}return A}peekStartsWith(N){return this.remaining.startsWith(N)}consumeOptional(N){return!!this.peekStartsWith(N)&&(this.remaining=this.remaining.substring(N.length),!0)}capture(N){if(!this.consumeOptional(N))throw new y.OBp(4011,!1)}}function St(w){return w.segments.length>0?new zn([],{[Wt]:w}):w}function en(w){const N={};for(const[x,G]of Object.entries(w.children)){const re=en(G);if(x===Wt&&0===re.segments.length&&re.hasChildren())for(const[ve,dt]of Object.entries(re.children))N[ve]=dt;else(re.segments.length>0||re.hasChildren())&&(N[x]=re)}return function Wn(w){if(1===w.numberOfChildren&&w.children[Wt]){const N=w.children[Wt];return new zn(w.segments.concat(N.segments),N.children)}return w}(new zn(w.segments,N))}function Kn(w){return w instanceof Ur}function ei(w){let N;const G=St(function A(re){const ve={};for(const rt of re.children){const $t=A(rt);ve[rt.outlet]=$t}const dt=new zn(re.url,ve);return re===w&&(N=dt),dt}(w.root));return N??G}function _r(w,N,A,x){let G=w;for(;G.parent;)G=G.parent;if(0===N.length)return Te(G,G,G,A,x);const re=function kt(w){if("string"==typeof w[0]&&1===w.length&&"/"===w[0])return new Dt(!0,0,w);let N=0,A=!1;const x=w.reduce((G,re,ve)=>{if("object"==typeof re&&null!=re){if(re.outlets){const dt={};return Object.entries(re.outlets).forEach(([rt,$t])=>{dt[rt]="string"==typeof $t?$t.split("/"):$t}),[...G,{outlets:dt}]}if(re.segmentPath)return[...G,re.segmentPath]}return"string"!=typeof re?[...G,re]:0===ve?(re.split("/").forEach((dt,rt)=>{0==rt&&"."===dt||(0==rt&&""===dt?A=!0:".."===dt?N++:""!=dt&&G.push(dt))}),G):[...G,re]},[]);return new Dt(A,N,x)}(N);if(re.toRoot())return Te(G,G,new zn([],{}),A,x);const ve=function gn(w,N,A){if(w.isAbsolute)return new zt(N,!0,0);if(!A)return new zt(N,!1,NaN);if(null===A.parent)return new zt(A,!0,0);const x=le(w.commands[0])?0:1;return function cn(w,N,A){let x=w,G=N,re=A;for(;re>G;){if(re-=G,x=x.parent,!x)throw new y.OBp(4005,!1);G=x.segments.length}return new zt(x,!1,G-re)}(A,A.segments.length-1+x,w.numberOfDoubleDots)}(re,G,w),dt=ve.processChildren?ur(ve.segmentGroup,ve.index,re.commands):Ar(ve.segmentGroup,ve.index,re.commands);return Te(G,ve.segmentGroup,dt,A,x)}function le(w){return"object"==typeof w&&null!=w&&!w.outlets&&!w.segmentPath}function Ce(w){return"object"==typeof w&&null!=w&&w.outlets}function Te(w,N,A,x,G){let ve,re={};x&&Object.entries(x).forEach(([rt,$t])=>{re[rt]=Array.isArray($t)?$t.map(Ut=>`${Ut}`):`${$t}`}),ve=w===N?A:yt(w,N,A);const dt=St(en(ve));return new Ur(dt,re,G)}function yt(w,N,A){const x={};return Object.entries(w.children).forEach(([G,re])=>{x[G]=re===N?A:yt(re,N,A)}),new zn(w.segments,x)}class Dt{constructor(N,A,x){if(this.isAbsolute=N,this.numberOfDoubleDots=A,this.commands=x,N&&x.length>0&&le(x[0]))throw new y.OBp(4003,!1);const G=x.find(Ce);if(G&&G!==Cn(x))throw new y.OBp(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zt{constructor(N,A,x){this.segmentGroup=N,this.processChildren=A,this.index=x}}function Ar(w,N,A){if(w??=new zn([],{}),0===w.segments.length&&w.hasChildren())return ur(w,N,A);const x=function $n(w,N,A){let x=0,G=N;const re={match:!1,pathIndex:0,commandIndex:0};for(;G<w.segments.length;){if(x>=A.length)return re;const ve=w.segments[G],dt=A[x];if(Ce(dt))break;const rt=`${dt}`,$t=x<A.length-1?A[x+1]:null;if(G>0&&void 0===rt)break;if(rt&&$t&&"object"==typeof $t&&void 0===$t.outlets){if(!Qn(rt,$t,ve))return re;x+=2}else{if(!Qn(rt,{},ve))return re;x++}G++}return{match:!0,pathIndex:G,commandIndex:x}}(w,N,A),G=A.slice(x.commandIndex);if(x.match&&x.pathIndex<w.segments.length){const re=new zn(w.segments.slice(0,x.pathIndex),{});return re.children[Wt]=new zn(w.segments.slice(x.pathIndex),w.children),ur(re,0,G)}return x.match&&0===G.length?new zn(w.segments,{}):x.match&&!w.hasChildren()?cs(w,N,A):x.match?ur(w,0,G):cs(w,N,A)}function ur(w,N,A){if(0===A.length)return new zn(w.segments,{});{const x=function Yn(w){return Ce(w[0])?w[0].outlets:{[Wt]:w}}(A),G={};if(Object.keys(x).some(re=>re!==Wt)&&w.children[Wt]&&1===w.numberOfChildren&&0===w.children[Wt].segments.length){const re=ur(w.children[Wt],N,A);return new zn(w.segments,re.children)}return Object.entries(x).forEach(([re,ve])=>{"string"==typeof ve&&(ve=[ve]),null!==ve&&(G[re]=Ar(w.children[re],N,ve))}),Object.entries(w.children).forEach(([re,ve])=>{void 0===x[re]&&(G[re]=ve)}),new zn(w.segments,G)}}function cs(w,N,A){const x=w.segments.slice(0,N);let G=0;for(;G<A.length;){const re=A[G];if(Ce(re)){const rt=Oi(re.outlets);return new zn(x,rt)}if(0===G&&le(A[0])){x.push(new Ri(w.segments[N].path,Gr(A[0]))),G++;continue}const ve=Ce(re)?re.outlets[Wt]:`${re}`,dt=G<A.length-1?A[G+1]:null;ve&&dt&&le(dt)?(x.push(new Ri(ve,Gr(dt))),G+=2):(x.push(new Ri(ve,{})),G++)}return new zn(x,{})}function Oi(w){const N={};return Object.entries(w).forEach(([A,x])=>{"string"==typeof x&&(x=[x]),null!==x&&(N[A]=cs(new zn([],{}),0,x))}),N}function Gr(w){const N={};return Object.entries(w).forEach(([A,x])=>N[A]=`${x}`),N}function Qn(w,N,A){return w==A.path&&Sr(N,A.parameters)}const oi="imperative";var Hn=function(w){return w[w.NavigationStart=0]="NavigationStart",w[w.NavigationEnd=1]="NavigationEnd",w[w.NavigationCancel=2]="NavigationCancel",w[w.NavigationError=3]="NavigationError",w[w.RoutesRecognized=4]="RoutesRecognized",w[w.ResolveStart=5]="ResolveStart",w[w.ResolveEnd=6]="ResolveEnd",w[w.GuardsCheckStart=7]="GuardsCheckStart",w[w.GuardsCheckEnd=8]="GuardsCheckEnd",w[w.RouteConfigLoadStart=9]="RouteConfigLoadStart",w[w.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",w[w.ChildActivationStart=11]="ChildActivationStart",w[w.ChildActivationEnd=12]="ChildActivationEnd",w[w.ActivationStart=13]="ActivationStart",w[w.ActivationEnd=14]="ActivationEnd",w[w.Scroll=15]="Scroll",w[w.NavigationSkipped=16]="NavigationSkipped",w}(Hn||{});class Er{constructor(N,A){this.id=N,this.url=A}}class ls extends Er{constructor(N,A,x="imperative",G=null){super(N,A),this.type=Hn.NavigationStart,this.navigationTrigger=x,this.restoredState=G}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ni extends Er{constructor(N,A,x){super(N,A),this.urlAfterRedirects=x,this.type=Hn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var di=function(w){return w[w.Redirect=0]="Redirect",w[w.SupersededByNewNavigation=1]="SupersededByNewNavigation",w[w.NoDataFromResolver=2]="NoDataFromResolver",w[w.GuardRejected=3]="GuardRejected",w}(di||{}),ti=function(w){return w[w.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",w[w.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",w}(ti||{});class ks extends Er{constructor(N,A,x,G){super(N,A),this.reason=x,this.code=G,this.type=Hn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xi extends Er{constructor(N,A,x,G){super(N,A),this.reason=x,this.code=G,this.type=Hn.NavigationSkipped}}class sa extends Er{constructor(N,A,x,G){super(N,A),this.error=x,this.target=G,this.type=Hn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ki extends Er{constructor(N,A,x,G){super(N,A),this.urlAfterRedirects=x,this.state=G,this.type=Hn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wo extends Er{constructor(N,A,x,G){super(N,A),this.urlAfterRedirects=x,this.state=G,this.type=Hn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yc extends Er{constructor(N,A,x,G,re){super(N,A),this.urlAfterRedirects=x,this.state=G,this.shouldActivate=re,this.type=Hn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rr extends Er{constructor(N,A,x,G){super(N,A),this.urlAfterRedirects=x,this.state=G,this.type=Hn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ki extends Er{constructor(N,A,x,G){super(N,A),this.urlAfterRedirects=x,this.state=G,this.type=Hn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yr{constructor(N){this.route=N,this.type=Hn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Fs{constructor(N){this.route=N,this.type=Hn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hi{constructor(N){this.snapshot=N,this.type=Hn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ca{constructor(N){this.snapshot=N,this.type=Hn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wa{constructor(N){this.snapshot=N,this.type=Hn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Js{constructor(N){this.snapshot=N,this.type=Hn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class so{constructor(N,A,x){this.routerEvent=N,this.position=A,this.anchor=x,this.type=Hn.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ho{}class ni{constructor(N){this.url=N}}class vn{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new xr,this.attachRef=null}}let xr=(()=>{class w{constructor(){this.contexts=new Map}onChildOutletCreated(A,x){const G=this.getOrCreateContext(A);G.outlet=x,this.contexts.set(A,G)}onChildOutletDestroyed(A){const x=this.getContext(A);x&&(x.outlet=null,x.attachRef=null)}onOutletDeactivated(){const A=this.contexts;return this.contexts=new Map,A}onOutletReAttached(A){this.contexts=A}getOrCreateContext(A){let x=this.getContext(A);return x||(x=new vn,this.contexts.set(A,x)),x}getContext(A){return this.contexts.get(A)||null}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=y.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();class rs{constructor(N){this._root=N}get root(){return this._root.value}parent(N){const A=this.pathFromRoot(N);return A.length>1?A[A.length-2]:null}children(N){const A=Bi(N,this._root);return A?A.children.map(x=>x.value):[]}firstChild(N){const A=Bi(N,this._root);return A&&A.children.length>0?A.children[0].value:null}siblings(N){const A=ji(N,this._root);return A.length<2?[]:A[A.length-2].children.map(G=>G.value).filter(G=>G!==N)}pathFromRoot(N){return ji(N,this._root).map(A=>A.value)}}function Bi(w,N){if(w===N.value)return N;for(const A of N.children){const x=Bi(w,A);if(x)return x}return null}function ji(w,N){if(w===N.value)return[N];for(const A of N.children){const x=ji(w,A);if(x.length)return x.unshift(N),x}return[]}class Yi{constructor(N,A){this.value=N,this.children=A}toString(){return`TreeNode(${this.value})`}}function dr(w){const N={};return w&&w.children.forEach(A=>N[A.value.outlet]=A),N}class $i extends rs{constructor(N,A){super(N),this.snapshot=A,Ls(this,N)}toString(){return this.snapshot.toString()}}function Qi(w){const N=function Pn(w){const re=new oo([],{},{},"",{},Wt,w,null,{});return new _i("",new Yi(re,[]))}(w),A=new Ee.g([new Ri("",{})]),x=new Ee.g({}),G=new Ee.g({}),re=new Ee.g({}),ve=new Ee.g(""),dt=new Fi(A,x,re,ve,G,Wt,w,N.root);return dt.snapshot=N.root,new $i(new Yi(dt,[]),N)}class Fi{constructor(N,A,x,G,re,ve,dt,rt){this.urlSubject=N,this.paramsSubject=A,this.queryParamsSubject=x,this.fragmentSubject=G,this.dataSubject=re,this.outlet=ve,this.component=dt,this._futureSnapshot=rt,this.title=this.dataSubject?.pipe((0,wt.k)($t=>$t[Rr]))??(0,_e.of)(void 0),this.url=N,this.params=A,this.queryParams=x,this.fragment=G,this.data=re}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,wt.k)(N=>Xr(N))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,wt.k)(N=>Xr(N))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wo(w,N,A="emptyOnly"){let x;const{routeConfig:G}=w;return x=null===N||"always"!==A&&""!==G?.path&&(N.component||N.routeConfig?.loadComponent)?{params:{...w.params},data:{...w.data},resolve:{...w.data,...w._resolvedData??{}}}:{params:{...N.params,...w.params},data:{...N.data,...w.data},resolve:{...w.data,...N.data,...G?.data,...w._resolvedData}},G&&is(G)&&(x.resolve[Rr]=G.title),x}class oo{get title(){return this.data?.[Rr]}constructor(N,A,x,G,re,ve,dt,rt,$t){this.url=N,this.params=A,this.queryParams=x,this.fragment=G,this.data=re,this.outlet=ve,this.component=dt,this.routeConfig=rt,this._resolve=$t}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Xr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Xr(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(x=>x.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _i extends rs{constructor(N,A){super(A),this.url=N,Ls(this,A)}toString(){return Vs(this._root)}}function Ls(w,N){N.value._routerState=w,N.children.forEach(A=>Ls(w,A))}function Vs(w){const N=w.children.length>0?` { ${w.children.map(Vs).join(", ")} } `:"";return`${w.value}${N}`}function Li(w){if(w.snapshot){const N=w.snapshot,A=w._futureSnapshot;w.snapshot=A,Sr(N.queryParams,A.queryParams)||w.queryParamsSubject.next(A.queryParams),N.fragment!==A.fragment&&w.fragmentSubject.next(A.fragment),Sr(N.params,A.params)||w.paramsSubject.next(A.params),function si(w,N){if(w.length!==N.length)return!1;for(let A=0;A<w.length;++A)if(!Sr(w[A],N[A]))return!1;return!0}(N.url,A.url)||w.urlSubject.next(A.url),Sr(N.data,A.data)||w.dataSubject.next(A.data)}else w.snapshot=w._futureSnapshot,w.dataSubject.next(w._futureSnapshot.data)}function us(w,N){const A=Sr(w.params,N.params)&&function Kr(w,N){return $r(w,N)&&w.every((A,x)=>Sr(A.parameters,N[x].parameters))}(w.url,N.url);return A&&!(!w.parent!=!N.parent)&&(!w.parent||us(w.parent,N.parent))}function is(w){return"string"==typeof w.title||null===w.title}let Si=(()=>{class w{constructor(){this.activated=null,this._activatedRoute=null,this.name=Wt,this.activateEvents=new y._w7,this.deactivateEvents=new y._w7,this.attachEvents=new y._w7,this.detachEvents=new y._w7,this.parentContexts=(0,y.uUt)(xr),this.location=(0,y.uUt)(y.y8U),this.changeDetector=(0,y.uUt)(y.kD9),this.environmentInjector=(0,y.uUt)(y.SIe),this.inputBinder=(0,y.uUt)(Us,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(A){if(A.name){const{firstChange:x,previousValue:G}=A.name;if(x)return;this.isTrackedInParentContexts(G)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(G)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(A){return this.parentContexts.getContext(A)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const A=this.parentContexts.getContext(this.name);A?.route&&(A.attachRef?this.attach(A.attachRef,A.route):this.activateWith(A.route,A.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.OBp(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.OBp(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.OBp(4012,!1);this.location.detach();const A=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(A.instance),A}attach(A,x){this.activated=A,this._activatedRoute=x,this.location.insert(A.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(A.instance)}deactivate(){if(this.activated){const A=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(A)}}activateWith(A,x){if(this.isActivated)throw new y.OBp(4013,!1);this._activatedRoute=A;const G=this.location,ve=A.snapshot.component,dt=this.parentContexts.getOrCreateContext(this.name).children,rt=new zo(A,dt,G.injector);this.activated=G.createComponent(ve,{index:G.length,injector:rt,environmentInjector:x??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275dir=y.Sc5({type:w,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.SYr]})}return w})();class zo{constructor(N,A,x){this.route=N,this.childContexts=A,this.parent=x}get(N,A){return N===Fi?this.route:N===xr?this.childContexts:this.parent.get(N,A)}}const Us=new y.UbH("");let ln=(()=>{class w{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(A){this.unsubscribeFromRouteData(A),this.subscribeToRouteData(A)}unsubscribeFromRouteData(A){this.outletDataSubscriptions.get(A)?.unsubscribe(),this.outletDataSubscriptions.delete(A)}subscribeToRouteData(A){const{activatedRoute:x}=A,G=be([x.queryParams,x.params,x.data]).pipe((0,Tt.G)(([re,ve,dt],rt)=>(dt={...re,...ve,...dt},0===rt?(0,_e.of)(dt):Promise.resolve(dt)))).subscribe(re=>{if(!A.isActivated||!A.activatedComponentRef||A.activatedRoute!==x||null===x.component)return void this.unsubscribeFromRouteData(A);const ve=(0,y.o9M)(x.component);if(ve)for(const{templateName:dt}of ve.inputs)A.activatedComponentRef.setInput(dt,re[dt]);else this.unsubscribeFromRouteData(A)});this.outletDataSubscriptions.set(A,G)}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=y.wxM({token:w,factory:w.\u0275fac})}return w})();function Bs(w,N,A){if(A&&w.shouldReuseRoute(N.value,A.value.snapshot)){const x=A.value;x._futureSnapshot=N.value;const G=function Ji(w,N,A){return N.children.map(x=>{for(const G of A.children)if(w.shouldReuseRoute(x.value,G.value.snapshot))return Bs(w,x,G);return Bs(w,x)})}(w,N,A);return new Yi(x,G)}{if(w.shouldAttach(N.value)){const re=w.retrieve(N.value);if(null!==re){const ve=re.route;return ve.value._futureSnapshot=N.value,ve.children=N.children.map(dt=>Bs(w,dt)),ve}}const x=function Na(w){return new Fi(new Ee.g(w.url),new Ee.g(w.params),new Ee.g(w.queryParams),new Ee.g(w.fragment),new Ee.g(w.data),w.outlet,w.component,w)}(N.value),G=N.children.map(re=>Bs(w,re));return new Yi(x,G)}}const Ko="ngNavigationCancelingError";function yi(w,N){const{redirectTo:A,navigationBehaviorOptions:x}=Kn(N)?{redirectTo:N,navigationBehaviorOptions:void 0}:N,G=As(!1,di.Redirect);return G.url=A,G.navigationBehaviorOptions=x,G}function As(w,N){const A=new Error(`NavigationCancelingError: ${w||""}`);return A[Ko]=!0,A.cancellationCode=N,A}function Xi(w){return!!w&&w[Ko]}let js=(()=>{class w{static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275cmp=y.In1({type:w,selectors:[["ng-component"]],standalone:!0,features:[y.UHJ],decls:1,vars:0,template:function(x,G){1&x&&y.wR5(0,"router-outlet")},dependencies:[Si],encapsulation:2})}return w})();function Xs(w){const N=w.children&&w.children.map(Xs),A=N?{...w,children:N}:{...w};return!A.component&&!A.loadComponent&&(N||A.loadChildren)&&A.outlet&&A.outlet!==Wt&&(A.component=js),A}function To(w){return w.outlet||Wt}function ka(w){if(!w)return null;if(w.routeConfig?._injector)return w.routeConfig._injector;for(let N=w.parent;N;N=N.parent){const A=N.routeConfig;if(A?._loadedInjector)return A._loadedInjector;if(A?._injector)return A._injector}return null}class co{constructor(N,A,x,G,re){this.routeReuseStrategy=N,this.futureState=A,this.currState=x,this.forwardEvent=G,this.inputBindingEnabled=re}activate(N){const A=this.futureState._root,x=this.currState?this.currState._root:null;this.deactivateChildRoutes(A,x,N),Li(this.futureState.root),this.activateChildRoutes(A,x,N)}deactivateChildRoutes(N,A,x){const G=dr(A);N.children.forEach(re=>{const ve=re.value.outlet;this.deactivateRoutes(re,G[ve],x),delete G[ve]}),Object.values(G).forEach(re=>{this.deactivateRouteAndItsChildren(re,x)})}deactivateRoutes(N,A,x){const G=N.value,re=A?A.value:null;if(G===re)if(G.component){const ve=x.getContext(G.outlet);ve&&this.deactivateChildRoutes(N,A,ve.children)}else this.deactivateChildRoutes(N,A,x);else re&&this.deactivateRouteAndItsChildren(A,x)}deactivateRouteAndItsChildren(N,A){N.value.component&&this.routeReuseStrategy.shouldDetach(N.value.snapshot)?this.detachAndStoreRouteSubtree(N,A):this.deactivateRouteAndOutlet(N,A)}detachAndStoreRouteSubtree(N,A){const x=A.getContext(N.value.outlet),G=x&&N.value.component?x.children:A,re=dr(N);for(const ve of Object.values(re))this.deactivateRouteAndItsChildren(ve,G);if(x&&x.outlet){const ve=x.outlet.detach(),dt=x.children.onOutletDeactivated();this.routeReuseStrategy.store(N.value.snapshot,{componentRef:ve,route:N,contexts:dt})}}deactivateRouteAndOutlet(N,A){const x=A.getContext(N.value.outlet),G=x&&N.value.component?x.children:A,re=dr(N);for(const ve of Object.values(re))this.deactivateRouteAndItsChildren(ve,G);x&&(x.outlet&&(x.outlet.deactivate(),x.children.onOutletDeactivated()),x.attachRef=null,x.route=null)}activateChildRoutes(N,A,x){const G=dr(A);N.children.forEach(re=>{this.activateRoutes(re,G[re.value.outlet],x),this.forwardEvent(new Js(re.value.snapshot))}),N.children.length&&this.forwardEvent(new Ca(N.value.snapshot))}activateRoutes(N,A,x){const G=N.value,re=A?A.value:null;if(Li(G),G===re)if(G.component){const ve=x.getOrCreateContext(G.outlet);this.activateChildRoutes(N,A,ve.children)}else this.activateChildRoutes(N,A,x);else if(G.component){const ve=x.getOrCreateContext(G.outlet);if(this.routeReuseStrategy.shouldAttach(G.snapshot)){const dt=this.routeReuseStrategy.retrieve(G.snapshot);this.routeReuseStrategy.store(G.snapshot,null),ve.children.onOutletReAttached(dt.contexts),ve.attachRef=dt.componentRef,ve.route=dt.route.value,ve.outlet&&ve.outlet.attach(dt.componentRef,dt.route.value),Li(dt.route.value),this.activateChildRoutes(N,null,ve.children)}else{const dt=ka(G.snapshot);ve.attachRef=null,ve.route=G,ve.injector=dt,ve.outlet&&ve.outlet.activateWith(G,ve.injector),this.activateChildRoutes(N,null,ve.children)}}else this.activateChildRoutes(N,null,x)}}class H{constructor(N){this.path=N,this.route=this.path[this.path.length-1]}}class Y{constructor(N,A){this.component=N,this.route=A}}function U(w,N,A){const x=w._root;return un(x,N?N._root:null,A,[x.value])}function De(w,N){const A=Symbol(),x=N.get(w,A);return x===A?"function"!=typeof w||(0,y.K_M)(w)?N.get(w):w:x}function un(w,N,A,x,G={canDeactivateChecks:[],canActivateChecks:[]}){const re=dr(N);return w.children.forEach(ve=>{(function er(w,N,A,x,G={canDeactivateChecks:[],canActivateChecks:[]}){const re=w.value,ve=N?N.value:null,dt=A?A.getContext(w.value.outlet):null;if(ve&&re.routeConfig===ve.routeConfig){const rt=function Ps(w,N,A){if("function"==typeof A)return A(w,N);switch(A){case"pathParamsChange":return!$r(w.url,N.url);case"pathParamsOrQueryParamsChange":return!$r(w.url,N.url)||!Sr(w.queryParams,N.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!us(w,N)||!Sr(w.queryParams,N.queryParams);default:return!us(w,N)}}(ve,re,re.routeConfig.runGuardsAndResolvers);rt?G.canActivateChecks.push(new H(x)):(re.data=ve.data,re._resolvedData=ve._resolvedData),un(w,N,re.component?dt?dt.children:null:A,x,G),rt&&dt&&dt.outlet&&dt.outlet.isActivated&&G.canDeactivateChecks.push(new Y(dt.outlet.component,ve))}else ve&&hs(N,dt,G),G.canActivateChecks.push(new H(x)),un(w,null,re.component?dt?dt.children:null:A,x,G)})(ve,re[ve.value.outlet],A,x.concat([ve.value]),G),delete re[ve.value.outlet]}),Object.entries(re).forEach(([ve,dt])=>hs(dt,A.getContext(ve),G)),G}function hs(w,N,A){const x=dr(w),G=w.value;Object.entries(x).forEach(([re,ve])=>{hs(ve,G.component?N?N.children.getContext(re):null:N,A)}),A.canDeactivateChecks.push(new Y(G.component&&N&&N.outlet&&N.outlet.isActivated?N.outlet.component:null,G))}function Gs(w){return"function"==typeof w}function Xa(w){return w instanceof tt.G||"EmptyError"===w?.name}const Wr=Symbol("INITIAL_VALUE");function lo(){return(0,Tt.G)(w=>be(w.map(N=>N.pipe((0,mt.U)(1),(0,Lt.W)(Wr)))).pipe((0,wt.k)(N=>{for(const A of N)if(!0!==A){if(A===Wr)return Wr;if(!1===A||A instanceof Ur)return A}return!0}),(0,rn.I)(N=>N!==Wr),(0,mt.U)(1)))}function vs(w){return(0,ke.W)((0,qe.y)(N=>{if(Kn(N))throw yi(0,N)}),(0,wt.k)(N=>!0===N))}class Fo{constructor(N){this.segmentGroup=N||null}}class Qo extends Error{constructor(N){super(),this.urlTree=N}}function ho(w){return ae(new Fo(w))}class vl{constructor(N,A){this.urlSerializer=N,this.urlTree=A}lineralizeSegments(N,A){let x=[],G=A.root;for(;;){if(x=x.concat(G.segments),0===G.numberOfChildren)return(0,_e.of)(x);if(G.numberOfChildren>1||!G.children[Wt])return ae(new y.OBp(4e3,!1));G=G.children[Wt]}}applyRedirectCommands(N,A,x){const G=this.applyRedirectCreateUrlTree(A,this.urlSerializer.parse(A),N,x);if(A.startsWith("/"))throw new Qo(G);return G}applyRedirectCreateUrlTree(N,A,x,G){const re=this.createSegmentGroup(N,A.root,x,G);return new Ur(re,this.createQueryParams(A.queryParams,this.urlTree.queryParams),A.fragment)}createQueryParams(N,A){const x={};return Object.entries(N).forEach(([G,re])=>{if("string"==typeof re&&re.startsWith(":")){const dt=re.substring(1);x[G]=A[dt]}else x[G]=re}),x}createSegmentGroup(N,A,x,G){const re=this.createSegments(N,A.segments,x,G);let ve={};return Object.entries(A.children).forEach(([dt,rt])=>{ve[dt]=this.createSegmentGroup(N,rt,x,G)}),new zn(re,ve)}createSegments(N,A,x,G){return A.map(re=>re.path.startsWith(":")?this.findPosParam(N,re,G):this.findOrReturn(re,x))}findPosParam(N,A,x){const G=x[A.path.substring(1)];if(!G)throw new y.OBp(4001,!1);return G}findOrReturn(N,A){let x=0;for(const G of A){if(G.path===N.path)return A.splice(x),G;x++}return N}}const Zs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fn(w,N,A,x,G){const re=fo(w,N,A);return re.matched?(x=function Gi(w,N){return w.providers&&!w._injector&&(w._injector=(0,y.SIz)(w.providers,N,`Route: ${w.path}`)),w._injector??N}(N,x),function uo(w,N,A,x){const G=N.canMatch;if(!G||0===G.length)return(0,_e.of)(!0);const re=G.map(ve=>{const dt=De(ve,w);return yn(function fi(w){return w&&Gs(w.canMatch)}(dt)?dt.canMatch(N,A):(0,y.SMS)(w,()=>dt(N,A)))});return(0,_e.of)(re).pipe(lo(),vs())}(x,N,A).pipe((0,wt.k)(ve=>!0===ve?re:{...Zs}))):(0,_e.of)(re)}function fo(w,N,A){if("**"===N.path)return function vr(w){return{matched:!0,parameters:w.length>0?Cn(w).parameters:{},consumedSegments:w,remainingSegments:[],positionalParamSegments:{}}}(A);if(""===N.path)return"full"===N.pathMatch&&(w.hasChildren()||A.length>0)?{...Zs}:{matched:!0,consumedSegments:[],remainingSegments:A,parameters:{},positionalParamSegments:{}};const G=(N.matcher||Un)(A,w,N);if(!G)return{...Zs};const re={};Object.entries(G.posParams??{}).forEach(([dt,rt])=>{re[dt]=rt.path});const ve=G.consumed.length>0?{...re,...G.consumed[G.consumed.length-1].parameters}:re;return{matched:!0,consumedSegments:G.consumed,remainingSegments:A.slice(G.consumed.length),parameters:ve,positionalParamSegments:G.posParams??{}}}function La(w,N,A,x){return A.length>0&&function Lo(w,N,A){return A.some(x=>bs(w,N,x)&&To(x)!==Wt)}(w,A,x)?{segmentGroup:new zn(N,la(x,new zn(A,w.children))),slicedSegments:[]}:0===A.length&&function ua(w,N,A){return A.some(x=>bs(w,N,x))}(w,A,x)?{segmentGroup:new zn(w.segments,qc(w,A,x,w.children)),slicedSegments:A}:{segmentGroup:new zn(w.segments,w.children),slicedSegments:A}}function qc(w,N,A,x){const G={};for(const re of A)if(bs(w,N,re)&&!x[To(re)]){const ve=new zn([],{});G[To(re)]=ve}return{...x,...G}}function la(w,N){const A={};A[Wt]=N;for(const x of w)if(""===x.path&&To(x)!==Wt){const G=new zn([],{});A[To(x)]=G}return A}function bs(w,N,A){return(!(w.hasChildren()||N.length>0)||"full"!==A.pathMatch)&&""===A.path}class Hs{}class hr{constructor(N,A,x,G,re,ve,dt){this.injector=N,this.configLoader=A,this.rootComponentType=x,this.config=G,this.urlTree=re,this.paramsInheritanceStrategy=ve,this.urlSerializer=dt,this.applyRedirects=new vl(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(N){return new y.OBp(4002,`'${N.segmentGroup}'`)}recognize(){const N=La(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(N).pipe((0,wt.k)(A=>{const x=new oo([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wt,this.rootComponentType,null,{}),G=new Yi(x,A),re=new _i("",G),ve=function Xn(w,N,A=null,x=null){return _r(ei(w),N,A,x)}(x,[],this.urlTree.queryParams,this.urlTree.fragment);return ve.queryParams=this.urlTree.queryParams,re.url=this.urlSerializer.serialize(ve),this.inheritParamsAndData(re._root,null),{state:re,tree:ve}}))}match(N){return this.processSegmentGroup(this.injector,this.config,N,Wt).pipe((0,gt.a)(x=>{if(x instanceof Qo)return this.urlTree=x.urlTree,this.match(x.urlTree.root);throw x instanceof Fo?this.noMatchError(x):x}))}inheritParamsAndData(N,A){const x=N.value,G=wo(x,A,this.paramsInheritanceStrategy);x.params=Object.freeze(G.params),x.data=Object.freeze(G.data),N.children.forEach(re=>this.inheritParamsAndData(re,x))}processSegmentGroup(N,A,x,G){return 0===x.segments.length&&x.hasChildren()?this.processChildren(N,A,x):this.processSegment(N,A,x,x.segments,G,!0).pipe((0,wt.k)(re=>re instanceof Yi?[re]:[]))}processChildren(N,A,x){const G=[];for(const re of Object.keys(x.children))"primary"===re?G.unshift(re):G.push(re);return(0,W.Q)(G).pipe((0,lt.m)(re=>{const ve=x.children[re],dt=function xa(w,N){const A=w.filter(x=>To(x)===N);return A.push(...w.filter(x=>To(x)!==N)),A}(A,re);return this.processSegmentGroup(N,dt,ve,re)}),(0,ft.K)((re,ve)=>(re.push(...ve),re)),(0,At.G)(null),function nn(w,N){const A=arguments.length>=2;return x=>x.pipe(w?(0,rn.I)((G,re)=>w(G,re,x)):Pe.Z,Jt(1),A?(0,At.G)(N):(0,tn._)(()=>new tt.G))}(),(0,Ue.O)(re=>{if(null===re)return ho(x);const ve=Br(re);return function Ec(w){w.sort((N,A)=>N.value.outlet===Wt?-1:A.value.outlet===Wt?1:N.value.outlet.localeCompare(A.value.outlet))}(ve),(0,_e.of)(ve)}))}processSegment(N,A,x,G,re,ve){return(0,W.Q)(A).pipe((0,lt.m)(dt=>this.processSegmentAgainstRoute(dt._injector??N,A,dt,x,G,re,ve).pipe((0,gt.a)(rt=>{if(rt instanceof Fo)return(0,_e.of)(null);throw rt}))),(0,Je.K)(dt=>!!dt),(0,gt.a)(dt=>{if(Xa(dt))return function Es(w,N,A){return 0===N.length&&!w.children[A]}(x,G,re)?(0,_e.of)(new Hs):ho(x);throw dt}))}processSegmentAgainstRoute(N,A,x,G,re,ve,dt){return function au(w,N,A,x){return!!(To(w)===x||x!==Wt&&bs(N,A,w))&&fo(N,w,A).matched}(x,G,re,ve)?void 0===x.redirectTo?this.matchSegmentAgainstRoute(N,G,x,re,ve):this.allowRedirects&&dt?this.expandSegmentAgainstRouteUsingRedirect(N,G,A,x,re,ve):ho(G):ho(G)}expandSegmentAgainstRouteUsingRedirect(N,A,x,G,re,ve){const{matched:dt,consumedSegments:rt,positionalParamSegments:$t,remainingSegments:Ut}=fo(A,G,re);if(!dt)return ho(A);G.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const nr=this.applyRedirects.applyRedirectCommands(rt,G.redirectTo,$t);return this.applyRedirects.lineralizeSegments(G,nr).pipe((0,Ue.O)(Vi=>this.processSegment(N,x,A,Vi.concat(Ut),ve,!1)))}matchSegmentAgainstRoute(N,A,x,G,re){const ve=Fn(A,x,G,N);return"**"===x.path&&(A.children={}),ve.pipe((0,Tt.G)(dt=>dt.matched?this.getChildConfig(N=x._injector??N,x,G).pipe((0,Tt.G)(({routes:rt})=>{const $t=x._loadedInjector??N,{consumedSegments:Ut,remainingSegments:nr,parameters:Vi}=dt,es=new oo(Ut,Vi,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Va(w){return w.data||{}}(x),To(x),x.component??x._loadedComponent??null,x,function Do(w){return w.resolve||{}}(x)),{segmentGroup:rc,slicedSegments:ic}=La(A,Ut,nr,rt);if(0===ic.length&&rc.hasChildren())return this.processChildren($t,rt,rc).pipe((0,wt.k)(Uo=>null===Uo?null:new Yi(es,Uo)));if(0===rt.length&&0===ic.length)return(0,_e.of)(new Yi(es,[]));const Ao=To(x)===re;return this.processSegment($t,rt,rc,ic,Ao?Wt:re,!0).pipe((0,wt.k)(Uo=>new Yi(es,Uo instanceof Yi?[Uo]:[])))})):ho(A)))}getChildConfig(N,A,x){return A.children?(0,_e.of)({routes:A.children,injector:N}):A.loadChildren?void 0!==A._loadedRoutes?(0,_e.of)({routes:A._loadedRoutes,injector:A._loadedInjector}):function zc(w,N,A,x){const G=N.canLoad;if(void 0===G||0===G.length)return(0,_e.of)(!0);const re=G.map(ve=>{const dt=De(ve,w);return yn(function kn(w){return w&&Gs(w.canLoad)}(dt)?dt.canLoad(N,A):(0,y.SMS)(w,()=>dt(N,A)))});return(0,_e.of)(re).pipe(lo(),vs())}(N,A,x).pipe((0,Ue.O)(G=>G?this.configLoader.loadChildren(N,A).pipe((0,qe.y)(re=>{A._loadedRoutes=re.routes,A._loadedInjector=re.injector})):function ec(w){return ae(As(!1,di.GuardRejected))}())):(0,_e.of)({routes:[],injector:N})}}function po(w){const N=w.value.routeConfig;return N&&""===N.path}function Br(w){const N=[],A=new Set;for(const x of w){if(!po(x)){N.push(x);continue}const G=N.find(re=>x.value.routeConfig===re.value.routeConfig);void 0!==G?(G.children.push(...x.children),A.add(G)):N.push(x)}for(const x of A){const G=Br(x.children);N.push(new Yi(x.value,G))}return N.filter(x=>!A.has(x))}function Ic(w){const N=w.children.map(A=>Ic(A)).flat();return[w,...N]}function vi(w){return(0,Tt.G)(N=>{const A=w(N);return A?(0,W.Q)(A).pipe((0,wt.k)(()=>N)):(0,_e.of)(N)})}let zs=(()=>{class w{buildTitle(A){let x,G=A.root;for(;void 0!==G;)x=this.getResolvedTitleForRoute(G)??x,G=G.children.find(re=>re.outlet===Wt);return x}getResolvedTitleForRoute(A){return A.data[Rr]}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=y.wxM({token:w,factory:()=>(0,y.uUt)(Pr),providedIn:"root"})}return w})(),Pr=(()=>{class w extends zs{constructor(A){super(),this.title=A}updateTitle(A){const x=this.buildTitle(A);void 0!==x&&this.title.setTitle(x)}static#e=this.\u0275fac=function(x){return new(x||w)(y.CoB(Vr.OY))};static#t=this.\u0275prov=y.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const P=new y.UbH("",{providedIn:"root",factory:()=>({})}),Q=new y.UbH("");let F=(()=>{class w{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.uUt)(y.ESV)}loadComponent(A){if(this.componentLoaders.get(A))return this.componentLoaders.get(A);if(A._loadedComponent)return(0,_e.of)(A._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(A);const x=yn(A.loadComponent()).pipe((0,wt.k)(ot),(0,qe.y)(re=>{this.onLoadEndListener&&this.onLoadEndListener(A),A._loadedComponent=re}),(0,An.U)(()=>{this.componentLoaders.delete(A)})),G=new Ve(x,()=>new ze.E).pipe(we());return this.componentLoaders.set(A,G),G}loadChildren(A,x){if(this.childrenLoaders.get(x))return this.childrenLoaders.get(x);if(x._loadedRoutes)return(0,_e.of)({routes:x._loadedRoutes,injector:x._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(x);const re=function z(w,N,A,x){return yn(w.loadChildren()).pipe((0,wt.k)(ot),(0,Ue.O)(G=>G instanceof y.obV||Array.isArray(G)?(0,_e.of)(G):(0,W.Q)(N.compileModuleAsync(G))),(0,wt.k)(G=>{x&&x(w);let re,ve,dt=!1;return Array.isArray(G)?(ve=G,!0):(re=G.create(A).injector,ve=re.get(Q,[],{optional:!0,self:!0}).flat()),{routes:ve.map(Xs),injector:re}}))}(x,this.compiler,A,this.onLoadEndListener).pipe((0,An.U)(()=>{this.childrenLoaders.delete(x)})),ve=new Ve(re,()=>new ze.E).pipe(we());return this.childrenLoaders.set(x,ve),ve}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=y.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function ot(w){return function me(w){return w&&"object"==typeof w&&"default"in w}(w)?w.default:w}let vt=(()=>{class w{static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=y.wxM({token:w,factory:()=>(0,y.uUt)(dn),providedIn:"root"})}return w})(),dn=(()=>{class w{shouldProcessUrl(A){return!0}extract(A){return A}merge(A,x){return A}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=y.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const ii=new y.UbH(""),Qr=new y.UbH("");function ci(w,N,A){const x=w.get(Qr),G=w.get(at.Ud);return w.get(y.WW2).runOutsideAngular(()=>{if(!G.startViewTransition||x.skipNextTransition)return x.skipNextTransition=!1,Promise.resolve();let re;const ve=new Promise($t=>{re=$t}),dt=G.startViewTransition(()=>(re(),function Jn(w){return new Promise(N=>{(0,y.I44)(N,{injector:w})})}(w))),{onViewTransitionCreated:rt}=x;return rt&&(0,y.SMS)(w,()=>rt({transition:dt,from:N,to:A})),ve})}let pi=(()=>{class w{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ze.E,this.transitionAbortSubject=new ze.E,this.configLoader=(0,y.uUt)(F),this.environmentInjector=(0,y.uUt)(y.SIe),this.urlSerializer=(0,y.uUt)(Ci),this.rootContexts=(0,y.uUt)(xr),this.location=(0,y.uUt)(at.oB),this.inputBindingEnabled=null!==(0,y.uUt)(Us,{optional:!0}),this.titleStrategy=(0,y.uUt)(zs),this.options=(0,y.uUt)(P,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,y.uUt)(vt),this.createViewTransition=(0,y.uUt)(ii,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,_e.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=G=>this.events.next(new Fs(G)),this.configLoader.onLoadStartListener=G=>this.events.next(new Yr(G))}complete(){this.transitions?.complete()}handleNavigationRequest(A){const x=++this.navigationId;this.transitions?.next({...this.transitions.value,...A,id:x})}setupNavigations(A,x,G){return this.transitions=new Ee.g({id:0,currentUrlTree:x,currentRawUrl:x,extractedUrl:this.urlHandlingStrategy.extract(x),urlAfterRedirects:this.urlHandlingStrategy.extract(x),rawUrl:x,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:oi,restoredState:null,currentSnapshot:G.snapshot,targetSnapshot:null,currentRouterState:G,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,rn.I)(re=>0!==re.id),(0,wt.k)(re=>({...re,extractedUrl:this.urlHandlingStrategy.extract(re.rawUrl)})),(0,Tt.G)(re=>{this.currentTransition=re;let ve=!1,dt=!1;return(0,_e.of)(re).pipe((0,qe.y)(rt=>{this.currentNavigation={id:rt.id,initialUrl:rt.rawUrl,extractedUrl:rt.extractedUrl,trigger:rt.source,extras:rt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Tt.G)(rt=>{const $t=!A.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!$t&&"reload"!==(rt.extras.onSameUrlNavigation??A.onSameUrlNavigation)){const nr="";return this.events.next(new xi(rt.id,this.urlSerializer.serialize(rt.rawUrl),nr,ti.IgnoredSameUrlNavigation)),rt.resolve(null),Re.k}if(this.urlHandlingStrategy.shouldProcessUrl(rt.rawUrl))return(0,_e.of)(rt).pipe((0,Tt.G)(nr=>{const Vi=this.transitions?.getValue();return this.events.next(new ls(nr.id,this.urlSerializer.serialize(nr.extractedUrl),nr.source,nr.restoredState)),Vi!==this.transitions?.getValue()?Re.k:Promise.resolve(nr)}),function go(w,N,A,x,G,re){return(0,Ue.O)(ve=>function El(w,N,A,x,G,re,ve="emptyOnly"){return new hr(w,N,A,x,G,ve,re).recognize()}(w,N,A,x,ve.extractedUrl,G,re).pipe((0,wt.k)(({state:dt,tree:rt})=>({...ve,targetSnapshot:dt,urlAfterRedirects:rt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,A.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,qe.y)(nr=>{re.targetSnapshot=nr.targetSnapshot,re.urlAfterRedirects=nr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:nr.urlAfterRedirects};const Vi=new Ki(nr.id,this.urlSerializer.serialize(nr.extractedUrl),this.urlSerializer.serialize(nr.urlAfterRedirects),nr.targetSnapshot);this.events.next(Vi)}));if($t&&this.urlHandlingStrategy.shouldProcessUrl(rt.currentRawUrl)){const{id:nr,extractedUrl:Vi,source:es,restoredState:rc,extras:ic}=rt,Ao=new ls(nr,this.urlSerializer.serialize(Vi),es,rc);this.events.next(Ao);const Uo=Qi(this.rootComponentType).snapshot;return this.currentTransition=re={...rt,targetSnapshot:Uo,urlAfterRedirects:Vi,extras:{...ic,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=Vi,(0,_e.of)(re)}{const nr="";return this.events.next(new xi(rt.id,this.urlSerializer.serialize(rt.extractedUrl),nr,ti.IgnoredByUrlHandlingStrategy)),rt.resolve(null),Re.k}}),(0,qe.y)(rt=>{const $t=new Wo(rt.id,this.urlSerializer.serialize(rt.extractedUrl),this.urlSerializer.serialize(rt.urlAfterRedirects),rt.targetSnapshot);this.events.next($t)}),(0,wt.k)(rt=>(this.currentTransition=re={...rt,guards:U(rt.targetSnapshot,rt.currentSnapshot,this.rootContexts)},re)),function Yo(w,N){return(0,Ue.O)(A=>{const{targetSnapshot:x,currentSnapshot:G,guards:{canActivateChecks:re,canDeactivateChecks:ve}}=A;return 0===ve.length&&0===re.length?(0,_e.of)({...A,guardsResult:!0}):function yr(w,N,A,x){return(0,W.Q)(w).pipe((0,Ue.O)(G=>function ko(w,N,A,x,G){const re=N&&N.routeConfig?N.routeConfig.canDeactivate:null;if(!re||0===re.length)return(0,_e.of)(!0);const ve=re.map(dt=>{const rt=ka(N)??G,$t=De(dt,rt);return yn(function aa(w){return w&&Gs(w.canDeactivate)}($t)?$t.canDeactivate(w,N,A,x):(0,y.SMS)(rt,()=>$t(w,N,A,x))).pipe((0,Je.K)())});return(0,_e.of)(ve).pipe(lo())}(G.component,G.route,A,N,x)),(0,Je.K)(G=>!0!==G,!0))}(ve,x,G,w).pipe((0,Ue.O)(dt=>dt&&function yl(w){return"boolean"==typeof w}(dt)?function Gn(w,N,A,x){return(0,W.Q)(N).pipe((0,lt.m)(G=>(0,Ke.W)(function Fa(w,N){return null!==w&&N&&N(new hi(w)),(0,_e.of)(!0)}(G.route.parent,x),function ss(w,N){return null!==w&&N&&N(new wa(w)),(0,_e.of)(!0)}(G.route,x),function ys(w,N,A){const x=N[N.length-1],re=N.slice(0,N.length-1).reverse().map(ve=>function ie(w){const N=w.routeConfig?w.routeConfig.canActivateChild:null;return N&&0!==N.length?{node:w,guards:N}:null}(ve)).filter(ve=>null!==ve).map(ve=>Ae(()=>{const dt=ve.guards.map(rt=>{const $t=ka(ve.node)??A,Ut=De(rt,$t);return yn(function mn(w){return w&&Gs(w.canActivateChild)}(Ut)?Ut.canActivateChild(x,w):(0,y.SMS)($t,()=>Ut(x,w))).pipe((0,Je.K)())});return(0,_e.of)(dt).pipe(lo())}));return(0,_e.of)(re).pipe(lo())}(w,G.path,A),function Ws(w,N,A){const x=N.routeConfig?N.routeConfig.canActivate:null;if(!x||0===x.length)return(0,_e.of)(!0);const G=x.map(re=>Ae(()=>{const ve=ka(N)??A,dt=De(re,ve);return yn(function kr(w){return w&&Gs(w.canActivate)}(dt)?dt.canActivate(N,w):(0,y.SMS)(ve,()=>dt(N,w))).pipe((0,Je.K)())}));return(0,_e.of)(G).pipe(lo())}(w,G.route,A))),(0,Je.K)(G=>!0!==G,!0))}(x,re,w,N):(0,_e.of)(dt)),(0,wt.k)(dt=>({...A,guardsResult:dt})))})}(this.environmentInjector,rt=>this.events.next(rt)),(0,qe.y)(rt=>{if(re.guardsResult=rt.guardsResult,Kn(rt.guardsResult))throw yi(0,rt.guardsResult);const $t=new yc(rt.id,this.urlSerializer.serialize(rt.extractedUrl),this.urlSerializer.serialize(rt.urlAfterRedirects),rt.targetSnapshot,!!rt.guardsResult);this.events.next($t)}),(0,rn.I)(rt=>!!rt.guardsResult||(this.cancelNavigationTransition(rt,"",di.GuardRejected),!1)),vi(rt=>{if(rt.guards.canActivateChecks.length)return(0,_e.of)(rt).pipe((0,qe.y)($t=>{const Ut=new rr($t.id,this.urlSerializer.serialize($t.extractedUrl),this.urlSerializer.serialize($t.urlAfterRedirects),$t.targetSnapshot);this.events.next(Ut)}),(0,Tt.G)($t=>{let Ut=!1;return(0,_e.of)($t).pipe(function Il(w,N){return(0,Ue.O)(A=>{const{targetSnapshot:x,guards:{canActivateChecks:G}}=A;if(!G.length)return(0,_e.of)(A);const re=new Set(G.map(rt=>rt.route)),ve=new Set;for(const rt of re)if(!ve.has(rt))for(const $t of Ic(rt))ve.add($t);let dt=0;return(0,W.Q)(ve).pipe((0,lt.m)(rt=>re.has(rt)?function ai(w,N,A,x){const G=w.routeConfig,re=w._resolve;return void 0!==G?.title&&!is(G)&&(re[Rr]=G.title),function Cl(w,N,A,x){const G=Di(w);if(0===G.length)return(0,_e.of)({});const re={};return(0,W.Q)(G).pipe((0,Ue.O)(ve=>function Ms(w,N,A,x){const G=ka(N)??x,re=De(w,G);return yn(re.resolve?re.resolve(N,A):(0,y.SMS)(G,()=>re(N,A)))}(w[ve],N,A,x).pipe((0,Je.K)(),(0,qe.y)(dt=>{re[ve]=dt}))),Jt(1),function En(w){return(0,wt.k)(()=>w)}(re),(0,gt.a)(ve=>Xa(ve)?Re.k:ae(ve)))}(re,w,N,x).pipe((0,wt.k)(ve=>(w._resolvedData=ve,w.data=wo(w,w.parent,A).resolve,null)))}(rt,x,w,N):(rt.data=wo(rt,rt.parent,w).resolve,(0,_e.of)(void 0))),(0,qe.y)(()=>dt++),Jt(1),(0,Ue.O)(rt=>dt===ve.size?(0,_e.of)(A):Re.k))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,qe.y)({next:()=>Ut=!0,complete:()=>{Ut||this.cancelNavigationTransition($t,"",di.NoDataFromResolver)}}))}),(0,qe.y)($t=>{const Ut=new ki($t.id,this.urlSerializer.serialize($t.extractedUrl),this.urlSerializer.serialize($t.urlAfterRedirects),$t.targetSnapshot);this.events.next(Ut)}))}),vi(rt=>{const $t=Ut=>{const nr=[];Ut.routeConfig?.loadComponent&&!Ut.routeConfig._loadedComponent&&nr.push(this.configLoader.loadComponent(Ut.routeConfig).pipe((0,qe.y)(Vi=>{Ut.component=Vi}),(0,wt.k)(()=>{})));for(const Vi of Ut.children)nr.push(...$t(Vi));return nr};return be($t(rt.targetSnapshot.root)).pipe((0,At.G)(null),(0,mt.U)(1))}),vi(()=>this.afterPreactivation()),(0,Tt.G)(()=>{const{currentSnapshot:rt,targetSnapshot:$t}=re,Ut=this.createViewTransition?.(this.environmentInjector,rt.root,$t.root);return Ut?(0,W.Q)(Ut).pipe((0,wt.k)(()=>re)):(0,_e.of)(re)}),(0,wt.k)(rt=>{const $t=function qo(w,N,A){const x=Bs(w,N._root,A?A._root:void 0);return new $i(x,N)}(A.routeReuseStrategy,rt.targetSnapshot,rt.currentRouterState);return this.currentTransition=re={...rt,targetRouterState:$t},this.currentNavigation.targetRouterState=$t,re}),(0,qe.y)(()=>{this.events.next(new Ho)}),((w,N,A,x)=>(0,wt.k)(G=>(new co(N,G.targetRouterState,G.currentRouterState,A,x).activate(w),G)))(this.rootContexts,A.routeReuseStrategy,rt=>this.events.next(rt),this.inputBindingEnabled),(0,mt.U)(1),(0,qe.y)({next:rt=>{ve=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ni(rt.id,this.urlSerializer.serialize(rt.extractedUrl),this.urlSerializer.serialize(rt.urlAfterRedirects))),this.titleStrategy?.updateTitle(rt.targetRouterState.snapshot),rt.resolve(!0)},complete:()=>{ve=!0}}),function Sn(w){return(0,pe.i)((N,A)=>{(0,st.Uv)(w).subscribe((0,it.e)(A,()=>A.complete(),Xt.K)),!A.closed&&N.subscribe(A)})}(this.transitionAbortSubject.pipe((0,qe.y)(rt=>{throw rt}))),(0,An.U)(()=>{!ve&&!dt&&this.cancelNavigationTransition(re,"",di.SupersededByNewNavigation),this.currentTransition?.id===re.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,gt.a)(rt=>{if(dt=!0,Xi(rt))this.events.next(new ks(re.id,this.urlSerializer.serialize(re.extractedUrl),rt.message,rt.cancellationCode)),function ds(w){return Xi(w)&&Kn(w.url)}(rt)?this.events.next(new ni(rt.url)):re.resolve(!1);else{this.events.next(new sa(re.id,this.urlSerializer.serialize(re.extractedUrl),rt,re.targetSnapshot??void 0));try{re.resolve(A.errorHandler(rt))}catch($t){this.options.resolveNavigationPromiseOnError?re.resolve(!1):re.reject($t)}}return Re.k}))}))}cancelNavigationTransition(A,x,G){const re=new ks(A.id,this.urlSerializer.serialize(A.extractedUrl),x,G);this.events.next(re),A.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=y.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();function Fr(w){return w!==oi}let fs=(()=>{class w{static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=y.wxM({token:w,factory:()=>(0,y.uUt)(Zi),providedIn:"root"})}return w})();class Jo{shouldDetach(N){return!1}store(N,A){}shouldAttach(N){return!1}retrieve(N){return null}shouldReuseRoute(N,A){return N.routeConfig===A.routeConfig}}let Zi=(()=>{class w extends Jo{static#e=this.\u0275fac=(()=>{let A;return function(G){return(A||(A=y.otF(w)))(G||w)}})();static#t=this.\u0275prov=y.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),Ua=(()=>{class w{static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=y.wxM({token:w,factory:()=>(0,y.uUt)(tr),providedIn:"root"})}return w})(),tr=(()=>{class w extends Ua{constructor(){super(...arguments),this.location=(0,y.uUt)(at.oB),this.urlSerializer=(0,y.uUt)(Ci),this.options=(0,y.uUt)(P,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,y.uUt)(vt),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ur,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Qi(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(A){return this.location.subscribe(x=>{"popstate"===x.type&&A(x.url,x.state)})}handleRouterEvent(A,x){if(A instanceof ls)this.stateMemento=this.createStateMemento();else if(A instanceof xi)this.rawUrlTree=x.initialUrl;else if(A instanceof Ki){if("eager"===this.urlUpdateStrategy&&!x.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(x.finalUrl,x.initialUrl);this.setBrowserUrl(G,x)}}else A instanceof Ho?(this.currentUrlTree=x.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(x.finalUrl,x.initialUrl),this.routerState=x.targetRouterState,"deferred"===this.urlUpdateStrategy&&(x.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,x))):A instanceof ks&&(A.code===di.GuardRejected||A.code===di.NoDataFromResolver)?this.restoreHistory(x):A instanceof sa?this.restoreHistory(x,!0):A instanceof Ni&&(this.lastSuccessfulId=A.id,this.currentPageId=this.browserPageId)}setBrowserUrl(A,x){const G=this.urlSerializer.serialize(A);if(this.location.isCurrentPathEqualTo(G)||x.extras.replaceUrl){const ve={...x.extras.state,...this.generateNgRouterState(x.id,this.browserPageId)};this.location.replaceState(G,"",ve)}else{const re={...x.extras.state,...this.generateNgRouterState(x.id,this.browserPageId+1)};this.location.go(G,"",re)}}restoreHistory(A,x=!1){if("computed"===this.canceledNavigationResolution){const re=this.currentPageId-this.browserPageId;0!==re?this.location.historyGo(re):this.currentUrlTree===A.finalUrl&&0===re&&(this.resetState(A),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(x&&this.resetState(A),this.resetUrlToCurrentUrlTree())}resetState(A){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,A.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(A,x){return"computed"===this.canceledNavigationResolution?{navigationId:A,\u0275routerPageId:x}:{navigationId:A}}static#e=this.\u0275fac=(()=>{let A;return function(G){return(A||(A=y.otF(w)))(G||w)}})();static#t=this.\u0275prov=y.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();var gi=function(w){return w[w.COMPLETE=0]="COMPLETE",w[w.FAILED=1]="FAILED",w[w.REDIRECTING=2]="REDIRECTING",w}(gi||{});function ir(w,N){w.events.pipe((0,rn.I)(A=>A instanceof Ni||A instanceof ks||A instanceof sa||A instanceof xi),(0,wt.k)(A=>A instanceof Ni||A instanceof xi?gi.COMPLETE:A instanceof ks&&(A.code===di.Redirect||A.code===di.SupersededByNewNavigation)?gi.REDIRECTING:gi.FAILED),(0,rn.I)(A=>A!==gi.REDIRECTING),(0,mt.U)(1)).subscribe(()=>{N()})}function Vo(w){throw w}const Cc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Nt={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ri=(()=>{class w{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,y.uUt)(y.oPY),this.stateManager=(0,y.uUt)(Ua),this.options=(0,y.uUt)(P,{optional:!0})||{},this.pendingTasks=(0,y.uUt)(y.g9Y),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,y.uUt)(pi),this.urlSerializer=(0,y.uUt)(Ci),this.location=(0,y.uUt)(at.oB),this.urlHandlingStrategy=(0,y.uUt)(vt),this._events=new ze.E,this.errorHandler=this.options.errorHandler||Vo,this.navigated=!1,this.routeReuseStrategy=(0,y.uUt)(fs),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,y.uUt)(Q,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,y.uUt)(Us,{optional:!0}),this.eventsSubscription=new Xe.wH,this.isNgZoneEnabled=(0,y.uUt)(y.WW2)instanceof y.WW2&&y.WW2.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:A=>{this.console.warn(A)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const A=this.navigationTransitions.events.subscribe(x=>{try{const G=this.navigationTransitions.currentTransition,re=this.navigationTransitions.currentNavigation;if(null!==G&&null!==re)if(this.stateManager.handleRouterEvent(x,re),x instanceof ks&&x.code!==di.Redirect&&x.code!==di.SupersededByNewNavigation)this.navigated=!0;else if(x instanceof Ni)this.navigated=!0;else if(x instanceof ni){const ve=this.urlHandlingStrategy.merge(x.url,G.currentRawUrl),dt={info:G.extras.info,skipLocationChange:G.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Fr(G.source)};this.scheduleNavigation(ve,oi,null,dt,{resolve:G.resolve,reject:G.reject,promise:G.promise})}(function wc(w){return!(w instanceof Ho||w instanceof ni)})(x)&&this._events.next(x)}catch(G){this.navigationTransitions.transitionAbortSubject.next(G)}});this.eventsSubscription.add(A)}resetRootComponentType(A){this.routerState.root.component=A,this.navigationTransitions.rootComponentType=A}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((A,x)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(A,"popstate",x)},0)})}navigateToSyncWithBrowser(A,x,G){const re={replaceUrl:!0},ve=G?.navigationId?G:null;if(G){const rt={...G};delete rt.navigationId,delete rt.\u0275routerPageId,0!==Object.keys(rt).length&&(re.state=rt)}const dt=this.parseUrl(A);this.scheduleNavigation(dt,x,ve,re)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(A){this.config=A.map(Xs),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(A,x={}){const{relativeTo:G,queryParams:re,fragment:ve,queryParamsHandling:dt,preserveFragment:rt}=x,$t=rt?this.currentUrlTree.fragment:ve;let nr,Ut=null;switch(dt){case"merge":Ut={...this.currentUrlTree.queryParams,...re};break;case"preserve":Ut=this.currentUrlTree.queryParams;break;default:Ut=re||null}null!==Ut&&(Ut=this.removeEmptyProps(Ut));try{nr=ei(G?G.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof A[0]||!A[0].startsWith("/"))&&(A=[]),nr=this.currentUrlTree.root}return _r(nr,A,Ut,$t??null)}navigateByUrl(A,x={skipLocationChange:!1}){const G=Kn(A)?A:this.parseUrl(A),re=this.urlHandlingStrategy.merge(G,this.rawUrlTree);return this.scheduleNavigation(re,oi,null,x)}navigate(A,x={skipLocationChange:!1}){return function mo(w){for(let N=0;N<w.length;N++)if(null==w[N])throw new y.OBp(4008,!1)}(A),this.navigateByUrl(this.createUrlTree(A,x),x)}serializeUrl(A){return this.urlSerializer.serialize(A)}parseUrl(A){try{return this.urlSerializer.parse(A)}catch{return this.urlSerializer.parse("/")}}isActive(A,x){let G;if(G=!0===x?{...Cc}:!1===x?{...Nt}:x,Kn(A))return Zr(this.currentUrlTree,A,G);const re=this.parseUrl(A);return Zr(this.currentUrlTree,re,G)}removeEmptyProps(A){return Object.entries(A).reduce((x,[G,re])=>(null!=re&&(x[G]=re),x),{})}scheduleNavigation(A,x,G,re,ve){if(this.disposed)return Promise.resolve(!1);let dt,rt,$t;ve?(dt=ve.resolve,rt=ve.reject,$t=ve.promise):$t=new Promise((nr,Vi)=>{dt=nr,rt=Vi});const Ut=this.pendingTasks.add();return ir(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Ut))}),this.navigationTransitions.handleNavigationRequest({source:x,restoredState:G,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:A,extras:re,resolve:dt,reject:rt,promise:$t,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),$t.catch(nr=>Promise.reject(nr))}static#e=this.\u0275fac=function(x){return new(x||w)};static#t=this.\u0275prov=y.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})(),sn=(()=>{class w{constructor(A,x,G,re,ve,dt){this.router=A,this.route=x,this.tabIndexAttribute=G,this.renderer=re,this.el=ve,this.locationStrategy=dt,this.href=null,this.commands=null,this.onChanges=new ze.E,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const rt=ve.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===rt||"area"===rt,this.isAnchorElement?this.subscription=A.events.subscribe($t=>{$t instanceof Ni&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(A){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",A)}ngOnChanges(A){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(A){null!=A?(this.commands=Array.isArray(A)?A:[A],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(A,x,G,re,ve){const dt=this.urlTree;return!!(null===dt||this.isAnchorElement&&(0!==A||x||G||re||ve||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(dt,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const A=this.urlTree;this.href=null!==A&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(A)):null;const x=null===this.href?null:(0,y.YFg)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",x)}applyAttributeValue(A,x){const G=this.renderer,re=this.el.nativeElement;null!==x?G.setAttribute(re,A,x):G.removeAttribute(re,A)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(x){return new(x||w)(y.GI1(ri),y.GI1(Fi),y.gJ8("tabindex"),y.GI1(y.q87),y.GI1(y.GMv),y.GI1(at.Qd))};static#t=this.\u0275dir=y.Sc5({type:w,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(x,G){1&x&&y.qCj("click",function(ve){return G.onClick(ve.button,ve.ctrlKey,ve.shiftKey,ve.altKey,ve.metaKey)}),2&x&&y.e48("target",G.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[y.Wk5.HasDecoratorInputTransform,"preserveFragment","preserveFragment",y.cZD],skipLocationChange:[y.Wk5.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",y.cZD],replaceUrl:[y.Wk5.HasDecoratorInputTransform,"replaceUrl","replaceUrl",y.cZD],routerLink:"routerLink"},standalone:!0,features:[y.QJr,y.SYr]})}return w})();class Ht{}let os=(()=>{class w{constructor(A,x,G,re,ve){this.router=A,this.injector=G,this.preloadingStrategy=re,this.loader=ve}setUpPreloading(){this.subscription=this.router.events.pipe((0,rn.I)(A=>A instanceof Ni),(0,lt.m)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(A,x){const G=[];for(const re of x){re.providers&&!re._injector&&(re._injector=(0,y.SIz)(re.providers,A,`Route: ${re.path}`));const ve=re._injector??A,dt=re._loadedInjector??ve;(re.loadChildren&&!re._loadedRoutes&&void 0===re.canLoad||re.loadComponent&&!re._loadedComponent)&&G.push(this.preloadConfig(ve,re)),(re.children||re._loadedRoutes)&&G.push(this.processRoutes(dt,re.children??re._loadedRoutes))}return(0,W.Q)(G).pipe((0,qn.u)())}preloadConfig(A,x){return this.preloadingStrategy.preload(x,()=>{let G;G=x.loadChildren&&void 0===x.canLoad?this.loader.loadChildren(A,x):(0,_e.of)(null);const re=G.pipe((0,Ue.O)(ve=>null===ve?(0,_e.of)(void 0):(x._loadedRoutes=ve.routes,x._loadedInjector=ve.injector,this.processRoutes(ve.injector??A,ve.routes))));if(x.loadComponent&&!x._loadedComponent){const ve=this.loader.loadComponent(x);return(0,W.Q)([re,ve]).pipe((0,qn.u)())}return re})}static#e=this.\u0275fac=function(x){return new(x||w)(y.CoB(ri),y.CoB(y.ESV),y.CoB(y.SIe),y.CoB(Ht),y.CoB(F))};static#t=this.\u0275prov=y.wxM({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})();const Is=new y.UbH("");let Kc=(()=>{class w{constructor(A,x,G,re,ve={}){this.urlSerializer=A,this.transitions=x,this.viewportScroller=G,this.zone=re,this.options=ve,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ve.scrollPositionRestoration||="disabled",ve.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(A=>{A instanceof ls?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=A.navigationTrigger,this.restoredId=A.restoredState?A.restoredState.navigationId:0):A instanceof Ni?(this.lastId=A.id,this.scheduleScrollEvent(A,this.urlSerializer.parse(A.urlAfterRedirects).fragment)):A instanceof xi&&A.code===ti.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(A,this.urlSerializer.parse(A.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(A=>{A instanceof so&&(A.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(A.position):A.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(A.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(A,x){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new so(A,"popstate"===this.lastSource?this.store[this.restoredId]:null,x))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(x){y.KEo()};static#t=this.\u0275prov=y.wxM({token:w,factory:w.\u0275fac})}return w})();function _o(w,N){return{\u0275kind:w,\u0275providers:N}}function zr(){const w=(0,y.uUt)(y.zZn);return N=>{const A=w.get(y.Swk);if(N!==A.components[0])return;const x=w.get(ri),G=w.get(Tc);1===w.get(bn)&&x.initialNavigation(),w.get(_n,null,y._6O.Optional)?.setUpPreloading(),w.get(Is,null,y._6O.Optional)?.init(),x.resetRootComponentType(A.componentTypes[0]),G.closed||(G.next(),G.complete(),G.unsubscribe())}}const Tc=new y.UbH("",{factory:()=>new ze.E}),bn=new y.UbH("",{providedIn:"root",factory:()=>1}),_n=new y.UbH("");function Da(w){return _o(0,[{provide:_n,useExisting:os},{provide:Ht,useExisting:w}])}function yo(w){return _o(9,[{provide:ii,useValue:ci},{provide:Qr,useValue:{skipNextTransition:!!w?.skipInitialTransition,...w}}])}const ha=new y.UbH("ROUTER_FORROOT_GUARD"),Xo=[at.oB,{provide:Ci,useClass:Et},ri,xr,{provide:Fi,useFactory:function wl(w){return w.routerState.root},deps:[ri]},F,[]];let Ir=(()=>{class w{constructor(A){}static forRoot(A,x){return{ngModule:w,providers:[Xo,[],{provide:Q,multi:!0,useValue:A},{provide:ha,useFactory:Zo,deps:[[ri,new y.T7N,new y.Qfh]]},{provide:P,useValue:x||{}},x?.useHash?{provide:at.Qd,useClass:at.MP}:{provide:at.Qd,useClass:at.uC},{provide:Is,useFactory:()=>{const w=(0,y.uUt)(at.YZ),N=(0,y.uUt)(y.WW2),A=(0,y.uUt)(P),x=(0,y.uUt)(pi),G=(0,y.uUt)(Ci);return A.scrollOffset&&w.setOffset(A.scrollOffset),new Kc(G,x,w,N,A)}},x?.preloadingStrategy?Da(x.preloadingStrategy).\u0275providers:[],x?.initialNavigation?Rs(x):[],x?.bindToComponentInputs?_o(8,[ln,{provide:Us,useExisting:ln}]).\u0275providers:[],x?.enableViewTransitions?yo().\u0275providers:[],[{provide:Tl,useFactory:zr},{provide:y.qid,multi:!0,useExisting:Tl}]]}}static forChild(A){return{ngModule:w,providers:[{provide:Q,multi:!0,useValue:A}]}}static#e=this.\u0275fac=function(x){return new(x||w)(y.CoB(ha,8))};static#t=this.\u0275mod=y.a4G({type:w});static#n=this.\u0275inj=y.s3X({})}return w})();function Zo(w){return"guarded"}function Rs(w){return["disabled"===w.initialNavigation?_o(3,[{provide:y.kZF,multi:!0,useFactory:()=>{const N=(0,y.uUt)(ri);return()=>{N.setUpLocationChangeListener()}}},{provide:bn,useValue:2}]).\u0275providers:[],"enabledBlocking"===w.initialNavigation?_o(2,[{provide:bn,useValue:0},{provide:y.kZF,multi:!0,deps:[y.zZn],useFactory:N=>{const A=N.get(at.mQ,Promise.resolve());return()=>A.then(()=>new Promise(x=>{const G=N.get(ri),re=N.get(Tc);ir(G,()=>{x(!0)}),N.get(pi).afterPreactivation=()=>(x(!0),re.closed?(0,_e.of)(void 0):re),G.initialNavigation()}))}}]).\u0275providers:[]]}const Tl=new y.UbH("")},8368:(jt,He,V)=>{V.d(He,{c:()=>be});var y=V(7144),q=V(4920),k=V(9360),D=V(5976);class W{constructor(Be,tt){this._delegate=Be,this.firebase=tt,(0,k._addComponent)(Be,new q.Yl("app-compat",()=>this,"PUBLIC")),this.container=Be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Be){this._delegate.automaticDataCollectionEnabled=Be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Be=>{this._delegate.checkDestroyed(),Be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(Be,tt=k._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const st=this._delegate.container.getProvider(Be);return!st.isInitialized()&&"EXPLICIT"===(null===(Ke=st.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&st.initialize(),st.getImmediate({identifier:tt})}_removeServiceInstance(Be,tt=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Be).clearInstance(tt)}_addComponent(Be){(0,k._addComponent)(this._delegate,Be)}_addOrOverwriteComponent(Be){(0,k._addOrOverwriteComponent)(this._delegate,Be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new y.UR("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ge=function Pe(){const pt=function Le(pt){const Be={},tt={__esModule:!0,initializeApp:function Ae(Xe,pe={}){const we=k.initializeApp(Xe,pe);if((0,y.Y7)(Be,we.name))return Be[we.name];const Ve=new pt(we,tt);return Be[we.name]=Ve,Ve},app:st,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function ae(Xe){const pe=Xe.name,we=pe.replace("-compat","");if(k._registerComponent(Xe)&&"PUBLIC"===Xe.type){const Ve=(ze=st())=>{if("function"!=typeof ze[we])throw Ee.create("invalid-app-argument",{appName:pe});return ze[we]()};void 0!==Xe.serviceProps&&(0,y.Ww)(Ve,Xe.serviceProps),tt[we]=Ve,pt.prototype[we]=function(...ze){return this._getService.bind(this,pe).apply(this,Xe.multipleInstances?ze:[])}}return"PUBLIC"===Xe.type?tt[we]:null},removeApp:function Ke(Xe){delete Be[Xe]},useAsService:function Re(Xe,pe){return"serverAuth"===pe?null:pe},modularAPIs:k}};function st(Xe){if(!(0,y.Y7)(Be,Xe=Xe||k._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:Xe});return Be[Xe]}return tt.default=tt,Object.defineProperty(tt,"apps",{get:function ke(){return Object.keys(Be).map(Xe=>Be[Xe])}}),st.App=pt,tt}(W);return pt.INTERNAL=Object.assign(Object.assign({},pt.INTERNAL),{createFirebaseNamespace:Pe,extendNamespace:function Be(tt){(0,y.Ww)(pt,tt)},createSubscribe:y.my,ErrorFactory:y.UR,deepExtend:y.Ww}),pt}(),fe=new D.YJ("@firebase/app-compat");if((0,y.uH)()&&void 0!==self.firebase){fe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const pt=self.firebase.SDK_VERSION;pt&&pt.indexOf("LITE")>=0&&fe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=ge;!function Ie(pt){(0,k.registerVersion)("@firebase/app-compat","0.2.27",pt)}()},9360:(jt,He,V)=>{V.r(He),V.d(He,{FirebaseError:()=>D.kx,SDK_VERSION:()=>Ur,_DEFAULT_ENTRY_NAME:()=>Di,_addComponent:()=>ui,_addOrOverwriteComponent:()=>io,_apps:()=>Cn,_clearComponents:()=>xn,_components:()=>yn,_getProvider:()=>qi,_registerComponent:()=>Zr,_removeServiceInstance:()=>Ui,deleteApp:()=>$r,getApp:()=>Ri,getApps:()=>Kr,initializeApp:()=>zn,onLog:()=>Et,registerVersion:()=>Ci,setLogLevel:()=>Ye});var y=V(1528),q=V(4920),k=V(5976),D=V(7144);const W=(Ze,nt)=>nt.some(St=>Ze instanceof St);let _e,Ee;const ge=new WeakMap,fe=new WeakMap,xe=new WeakMap,it=new WeakMap,Ie=new WeakMap;let Be={get(Ze,nt,St){if(Ze instanceof IDBTransaction){if("done"===nt)return fe.get(Ze);if("objectStoreNames"===nt)return Ze.objectStoreNames||xe.get(Ze);if("store"===nt)return St.objectStoreNames[1]?void 0:St.objectStore(St.objectStoreNames[0])}return Ae(Ze[nt])},set:(Ze,nt,St)=>(Ze[nt]=St,!0),has:(Ze,nt)=>Ze instanceof IDBTransaction&&("done"===nt||"store"===nt)||nt in Ze};function st(Ze){return"function"==typeof Ze?function Ke(Ze){return Ze!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Pe(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ze)?function(...nt){return Ze.apply(ke(this),nt),Ae(ge.get(this))}:function(...nt){return Ae(Ze.apply(ke(this),nt))}:function(nt,...St){const en=Ze.call(ke(this),nt,...St);return xe.set(en,nt.sort?nt.sort():[nt]),Ae(en)}}(Ze):(Ze instanceof IDBTransaction&&function pt(Ze){if(fe.has(Ze))return;const nt=new Promise((St,en)=>{const Wn=()=>{Ze.removeEventListener("complete",Kn),Ze.removeEventListener("error",Xn),Ze.removeEventListener("abort",Xn)},Kn=()=>{St(),Wn()},Xn=()=>{en(Ze.error||new DOMException("AbortError","AbortError")),Wn()};Ze.addEventListener("complete",Kn),Ze.addEventListener("error",Xn),Ze.addEventListener("abort",Xn)});fe.set(Ze,nt)}(Ze),W(Ze,function Le(){return _e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ze,Be):Ze)}function Ae(Ze){if(Ze instanceof IDBRequest)return function be(Ze){const nt=new Promise((St,en)=>{const Wn=()=>{Ze.removeEventListener("success",Kn),Ze.removeEventListener("error",Xn)},Kn=()=>{St(Ae(Ze.result)),Wn()},Xn=()=>{en(Ze.error),Wn()};Ze.addEventListener("success",Kn),Ze.addEventListener("error",Xn)});return nt.then(St=>{St instanceof IDBCursor&&ge.set(St,Ze)}).catch(()=>{}),Ie.set(nt,Ze),nt}(Ze);if(it.has(Ze))return it.get(Ze);const nt=st(Ze);return nt!==Ze&&(it.set(Ze,nt),Ie.set(nt,Ze)),nt}const ke=Ze=>Ie.get(Ze),Xe=["get","getKey","getAll","getAllKeys","count"],pe=["put","add","delete","clear"],we=new Map;function Ve(Ze,nt){if(!(Ze instanceof IDBDatabase)||nt in Ze||"string"!=typeof nt)return;if(we.get(nt))return we.get(nt);const St=nt.replace(/FromIndex$/,""),en=nt!==St,Wn=pe.includes(St);if(!(St in(en?IDBIndex:IDBObjectStore).prototype)||!Wn&&!Xe.includes(St))return;const Kn=function(){var Xn=(0,y.c)(function*(ei,..._r){const le=this.transaction(ei,Wn?"readwrite":"readonly");let Ce=le.store;return en&&(Ce=Ce.index(_r.shift())),(yield Promise.all([Ce[St](..._r),Wn&&le.done]))[0]});return function(_r){return Xn.apply(this,arguments)}}();return we.set(nt,Kn),Kn}!function tt(Ze){Be=Ze(Be)}(Ze=>({...Ze,get:(nt,St,en)=>Ve(nt,St)||Ze.get(nt,St,en),has:(nt,St)=>!!Ve(nt,St)||Ze.has(nt,St)}));class ze{constructor(nt){this.container=nt}getPlatformInfoString(){return this.container.getProviders().map(St=>{if(function at(Ze){const nt=Ze.getComponent();return"VERSION"===nt?.type}(St)){const en=St.getImmediate();return`${en.library}/${en.version}`}return null}).filter(St=>St).join(" ")}}const wt="@firebase/app",mt=new k.YJ("@firebase/app"),Di="[DEFAULT]",ar={[wt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Cn=new Map,yn=new Map;function ui(Ze,nt){try{Ze.container.addComponent(nt)}catch(St){mt.debug(`Component ${nt.name} failed to register with FirebaseApp ${Ze.name}`,St)}}function io(Ze,nt){Ze.container.addOrOverwriteComponent(nt)}function Zr(Ze){const nt=Ze.name;if(yn.has(nt))return mt.debug(`There were multiple attempts to register component ${nt}.`),!1;yn.set(nt,Ze);for(const St of Cn.values())ui(St,Ze);return!0}function qi(Ze,nt){const St=Ze.container.getProvider("heartbeat").getImmediate({optional:!0});return St&&St.triggerHeartbeat(),Ze.container.getProvider(nt)}function Ui(Ze,nt,St=Di){qi(Ze,nt).clearInstance(St)}function xn(){yn.clear()}const Or=new D.UR("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Dn{constructor(nt,St,en){this._isDeleted=!1,this._options=Object.assign({},nt),this._config=Object.assign({},St),this._name=St.name,this._automaticDataCollectionEnabled=St.automaticDataCollectionEnabled,this._container=en,this.container.addComponent(new q.Yl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(nt){this.checkDestroyed(),this._automaticDataCollectionEnabled=nt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(nt){this._isDeleted=nt}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}}const Ur="10.8.0";function zn(Ze,nt={}){let St=Ze;"object"!=typeof nt&&(nt={name:nt});const en=Object.assign({name:Di,automaticDataCollectionEnabled:!1},nt),Wn=en.name;if("string"!=typeof Wn||!Wn)throw Or.create("bad-app-name",{appName:String(Wn)});if(St||(St=(0,D.Yd)()),!St)throw Or.create("no-options");const Kn=Cn.get(Wn);if(Kn){if((0,D.IN)(St,Kn.options)&&(0,D.IN)(en,Kn.config))return Kn;throw Or.create("duplicate-app",{appName:Wn})}const Xn=new q.op(Wn);for(const _r of yn.values())Xn.addComponent(_r);const ei=new Dn(St,en,Xn);return Cn.set(Wn,ei),ei}function Ri(Ze=Di){const nt=Cn.get(Ze);if(!nt&&Ze===Di&&(0,D.Yd)())return zn();if(!nt)throw Or.create("no-app",{appName:Ze});return nt}function Kr(){return Array.from(Cn.values())}function $r(Ze){return xs.apply(this,arguments)}function xs(){return(xs=(0,y.c)(function*(Ze){const nt=Ze.name;Cn.has(nt)&&(Cn.delete(nt),yield Promise.all(Ze.container.getProviders().map(St=>St.delete())),Ze.isDeleted=!0)})).apply(this,arguments)}function Ci(Ze,nt,St){var en;let Wn=null!==(en=ar[Ze])&&void 0!==en?en:Ze;St&&(Wn+=`-${St}`);const Kn=Wn.match(/\s|\//),Xn=nt.match(/\s|\//);if(Kn||Xn){const ei=[`Unable to register library "${Wn}" with version "${nt}":`];return Kn&&ei.push(`library name "${Wn}" contains illegal characters (whitespace or "/")`),Kn&&Xn&&ei.push("and"),Xn&&ei.push(`version name "${nt}" contains illegal characters (whitespace or "/")`),void mt.warn(ei.join(" "))}Zr(new q.Yl(`${Wn}-version`,()=>({library:Wn,version:nt}),"VERSION"))}function Et(Ze,nt){if(null!==Ze&&"function"!=typeof Ze)throw Or.create("invalid-log-argument");(0,k.S2)(Ze,nt)}function Ye(Ze){(0,k.QN)(Ze)}const ye="firebase-heartbeat-database",We=1,ce="firebase-heartbeat-store";let de=null;function ee(){return de||(de=function ae(Ze,nt,{blocked:St,upgrade:en,blocking:Wn,terminated:Kn}={}){const Xn=indexedDB.open(Ze,nt),ei=Ae(Xn);return en&&Xn.addEventListener("upgradeneeded",_r=>{en(Ae(Xn.result),_r.oldVersion,_r.newVersion,Ae(Xn.transaction),_r)}),St&&Xn.addEventListener("blocked",_r=>St(_r.oldVersion,_r.newVersion,_r)),ei.then(_r=>{Kn&&_r.addEventListener("close",()=>Kn()),Wn&&_r.addEventListener("versionchange",le=>Wn(le.oldVersion,le.newVersion,le))}).catch(()=>{}),ei}(ye,We,{upgrade:(Ze,nt)=>{if(0===nt)try{Ze.createObjectStore(ce)}catch(St){console.warn(St)}}}).catch(Ze=>{throw Or.create("idb-open",{originalErrorMessage:Ze.message})})),de}function te(){return(te=(0,y.c)(function*(Ze){try{const St=(yield ee()).transaction(ce),en=yield St.objectStore(ce).get(qt(Ze));return yield St.done,en}catch(nt){if(nt instanceof D.kx)mt.warn(nt.message);else{const St=Or.create("idb-get",{originalErrorMessage:nt?.message});mt.warn(St.message)}}})).apply(this,arguments)}function $e(Ze,nt){return It.apply(this,arguments)}function It(){return(It=(0,y.c)(function*(Ze,nt){try{const en=(yield ee()).transaction(ce,"readwrite");yield en.objectStore(ce).put(nt,qt(Ze)),yield en.done}catch(St){if(St instanceof D.kx)mt.warn(St.message);else{const en=Or.create("idb-set",{originalErrorMessage:St?.message});mt.warn(en.message)}}})).apply(this,arguments)}function qt(Ze){return`${Ze.name}!${Ze.options.appId}`}class Ln{constructor(nt){this.container=nt,this._heartbeatsCache=null;const St=this.container.getProvider("app").getImmediate();this._storage=new pn(St),this._heartbeatsCachePromise=this._storage.read().then(en=>(this._heartbeatsCache=en,en))}triggerHeartbeat(){var nt=this;return(0,y.c)(function*(){var St,en;const Kn=nt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Xn=Zt();if((null!=(null===(St=nt._heartbeatsCache)||void 0===St?void 0:St.heartbeats)||(nt._heartbeatsCache=yield nt._heartbeatsCachePromise,null!=(null===(en=nt._heartbeatsCache)||void 0===en?void 0:en.heartbeats)))&&nt._heartbeatsCache.lastSentHeartbeatDate!==Xn&&!nt._heartbeatsCache.heartbeats.some(ei=>ei.date===Xn))return nt._heartbeatsCache.heartbeats.push({date:Xn,agent:Kn}),nt._heartbeatsCache.heartbeats=nt._heartbeatsCache.heartbeats.filter(ei=>{const _r=new Date(ei.date).valueOf();return Date.now()-_r<=2592e6}),nt._storage.overwrite(nt._heartbeatsCache)})()}getHeartbeatsHeader(){var nt=this;return(0,y.c)(function*(){var St;if(null===nt._heartbeatsCache&&(yield nt._heartbeatsCachePromise),null==(null===(St=nt._heartbeatsCache)||void 0===St?void 0:St.heartbeats)||0===nt._heartbeatsCache.heartbeats.length)return"";const en=Zt(),{heartbeatsToSend:Wn,unsentEntries:Kn}=function Nr(Ze,nt=1024){const St=[];let en=Ze.slice();for(const Wn of Ze){const Kn=St.find(Xn=>Xn.agent===Wn.agent);if(Kn){if(Kn.dates.push(Wn.date),jn(St)>nt){Kn.dates.pop();break}}else if(St.push({agent:Wn.agent,dates:[Wn.date]}),jn(St)>nt){St.pop();break}en=en.slice(1)}return{heartbeatsToSend:St,unsentEntries:en}}(nt._heartbeatsCache.heartbeats),Xn=(0,D.Wg)(JSON.stringify({version:2,heartbeats:Wn}));return nt._heartbeatsCache.lastSentHeartbeatDate=en,Kn.length>0?(nt._heartbeatsCache.heartbeats=Kn,yield nt._storage.overwrite(nt._heartbeatsCache)):(nt._heartbeatsCache.heartbeats=[],nt._storage.overwrite(nt._heartbeatsCache)),Xn})()}}function Zt(){return(new Date).toISOString().substring(0,10)}class pn{constructor(nt){this.app=nt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.c)(function*(){return!!(0,D.yy)()&&(0,D.A3)().then(()=>!0).catch(()=>!1)})()}read(){var nt=this;return(0,y.c)(function*(){if(yield nt._canUseIndexedDBPromise){const en=yield function Z(Ze){return te.apply(this,arguments)}(nt.app);return en?.heartbeats?en:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(nt){var St=this;return(0,y.c)(function*(){var en;if(yield St._canUseIndexedDBPromise){const Kn=yield St.read();return $e(St.app,{lastSentHeartbeatDate:null!==(en=nt.lastSentHeartbeatDate)&&void 0!==en?en:Kn.lastSentHeartbeatDate,heartbeats:nt.heartbeats})}})()}add(nt){var St=this;return(0,y.c)(function*(){var en;if(yield St._canUseIndexedDBPromise){const Kn=yield St.read();return $e(St.app,{lastSentHeartbeatDate:null!==(en=nt.lastSentHeartbeatDate)&&void 0!==en?en:Kn.lastSentHeartbeatDate,heartbeats:[...Kn.heartbeats,...nt.heartbeats]})}})()}}function jn(Ze){return(0,D.Wg)(JSON.stringify({version:2,heartbeats:Ze})).length}!function Oe(Ze){Zr(new q.Yl("platform-logger",nt=>new ze(nt),"PRIVATE")),Zr(new q.Yl("heartbeat",nt=>new Ln(nt),"PRIVATE")),Ci(wt,"0.9.27",Ze),Ci(wt,"0.9.27","esm2017"),Ci("fire-js","")}("")},4920:(jt,He,V)=>{V.d(He,{Yl:()=>k,op:()=>Le});var y=V(1528),q=V(7144);class k{constructor(ge,fe,xe){this.name=ge,this.instanceFactory=fe,this.type=xe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ge){return this.instantiationMode=ge,this}setMultipleInstances(ge){return this.multipleInstances=ge,this}setServiceProps(ge){return this.serviceProps=ge,this}setInstanceCreatedCallback(ge){return this.onInstanceCreated=ge,this}}const D="[DEFAULT]";class W{constructor(ge,fe){this.name=ge,this.container=fe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ge){const fe=this.normalizeInstanceIdentifier(ge);if(!this.instancesDeferred.has(fe)){const xe=new q.o9;if(this.instancesDeferred.set(fe,xe),this.isInitialized(fe)||this.shouldAutoInitialize())try{const it=this.getOrInitializeService({instanceIdentifier:fe});it&&xe.resolve(it)}catch{}}return this.instancesDeferred.get(fe).promise}getImmediate(ge){var fe;const xe=this.normalizeInstanceIdentifier(ge?.identifier),it=null!==(fe=ge?.optional)&&void 0!==fe&&fe;if(!this.isInitialized(xe)&&!this.shouldAutoInitialize()){if(it)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:xe})}catch(Ie){if(it)return null;throw Ie}}getComponent(){return this.component}setComponent(ge){if(ge.name!==this.name)throw Error(`Mismatching Component ${ge.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ge,this.shouldAutoInitialize()){if(function Ee(Pe){return"EAGER"===Pe.instantiationMode}(ge))try{this.getOrInitializeService({instanceIdentifier:D})}catch{}for(const[fe,xe]of this.instancesDeferred.entries()){const it=this.normalizeInstanceIdentifier(fe);try{const Ie=this.getOrInitializeService({instanceIdentifier:it});xe.resolve(Ie)}catch{}}}}clearInstance(ge=D){this.instancesDeferred.delete(ge),this.instancesOptions.delete(ge),this.instances.delete(ge)}delete(){var ge=this;return(0,y.c)(function*(){const fe=Array.from(ge.instances.values());yield Promise.all([...fe.filter(xe=>"INTERNAL"in xe).map(xe=>xe.INTERNAL.delete()),...fe.filter(xe=>"_delete"in xe).map(xe=>xe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ge=D){return this.instances.has(ge)}getOptions(ge=D){return this.instancesOptions.get(ge)||{}}initialize(ge={}){const{options:fe={}}=ge,xe=this.normalizeInstanceIdentifier(ge.instanceIdentifier);if(this.isInitialized(xe))throw Error(`${this.name}(${xe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const it=this.getOrInitializeService({instanceIdentifier:xe,options:fe});for(const[Ie,be]of this.instancesDeferred.entries())xe===this.normalizeInstanceIdentifier(Ie)&&be.resolve(it);return it}onInit(ge,fe){var xe;const it=this.normalizeInstanceIdentifier(fe),Ie=null!==(xe=this.onInitCallbacks.get(it))&&void 0!==xe?xe:new Set;Ie.add(ge),this.onInitCallbacks.set(it,Ie);const be=this.instances.get(it);return be&&ge(be,it),()=>{Ie.delete(ge)}}invokeOnInitCallbacks(ge,fe){const xe=this.onInitCallbacks.get(fe);if(xe)for(const it of xe)try{it(ge,fe)}catch{}}getOrInitializeService({instanceIdentifier:ge,options:fe={}}){let xe=this.instances.get(ge);if(!xe&&this.component&&(xe=this.component.instanceFactory(this.container,{instanceIdentifier:(Pe=ge,Pe===D?void 0:Pe),options:fe}),this.instances.set(ge,xe),this.instancesOptions.set(ge,fe),this.invokeOnInitCallbacks(xe,ge),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ge,xe)}catch{}var Pe;return xe||null}normalizeInstanceIdentifier(ge=D){return this.component?this.component.multipleInstances?ge:D:ge}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Le{constructor(ge){this.name=ge,this.providers=new Map}addComponent(ge){const fe=this.getProvider(ge.name);if(fe.isComponentSet())throw new Error(`Component ${ge.name} has already been registered with ${this.name}`);fe.setComponent(ge)}addOrOverwriteComponent(ge){this.getProvider(ge.name).isComponentSet()&&this.providers.delete(ge.name),this.addComponent(ge)}getProvider(ge){if(this.providers.has(ge))return this.providers.get(ge);const fe=new W(ge,this);return this.providers.set(ge,fe),fe}getProviders(){return Array.from(this.providers.values())}}},5976:(jt,He,V)=>{V.d(He,{Ge:()=>q,QN:()=>Le,S2:()=>Pe,YJ:()=>Ee});const y=[];var q=function(ge){return ge[ge.DEBUG=0]="DEBUG",ge[ge.VERBOSE=1]="VERBOSE",ge[ge.INFO=2]="INFO",ge[ge.WARN=3]="WARN",ge[ge.ERROR=4]="ERROR",ge[ge.SILENT=5]="SILENT",ge}(q||{});const k={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},D=q.INFO,W={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},_e=(ge,fe,...xe)=>{if(fe<ge.logLevel)return;const it=(new Date).toISOString(),Ie=W[fe];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${fe})`);console[Ie](`[${it}]  ${ge.name}:`,...xe)};class Ee{constructor(fe){this.name=fe,this._logLevel=D,this._logHandler=_e,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(fe){if(!(fe in q))throw new TypeError(`Invalid value "${fe}" assigned to \`logLevel\``);this._logLevel=fe}setLogLevel(fe){this._logLevel="string"==typeof fe?k[fe]:fe}get logHandler(){return this._logHandler}set logHandler(fe){if("function"!=typeof fe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=fe}get userLogHandler(){return this._userLogHandler}set userLogHandler(fe){this._userLogHandler=fe}debug(...fe){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...fe),this._logHandler(this,q.DEBUG,...fe)}log(...fe){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...fe),this._logHandler(this,q.VERBOSE,...fe)}info(...fe){this._userLogHandler&&this._userLogHandler(this,q.INFO,...fe),this._logHandler(this,q.INFO,...fe)}warn(...fe){this._userLogHandler&&this._userLogHandler(this,q.WARN,...fe),this._logHandler(this,q.WARN,...fe)}error(...fe){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...fe),this._logHandler(this,q.ERROR,...fe)}}function Le(ge){y.forEach(fe=>{fe.setLogLevel(ge)})}function Pe(ge,fe){for(const xe of y){let it=null;fe&&fe.level&&(it=k[fe.level]),xe.userLogHandler=null===ge?null:(Ie,be,...pt)=>{const Be=pt.map(tt=>{if(null==tt)return null;if("string"==typeof tt)return tt;if("number"==typeof tt||"boolean"==typeof tt)return tt.toString();if(tt instanceof Error)return tt.message;try{return JSON.stringify(tt)}catch{return null}}).filter(tt=>tt).join(" ");be>=(it??Ie.logLevel)&&ge({level:q[be].toLowerCase(),message:Be,args:pt,type:Ie.name})}}}},3680:(jt,He,V)=>{V.d(He,{Kk:()=>y.registerVersion,UH:()=>y.getApps,WE:()=>y.getApp});var y=V(9360);(0,y.registerVersion)("firebase","10.8.0","app")},8836:(jt,He,V)=>{V.d(He,{wR:()=>y.X,Iv:()=>y.o});var y=V(1944);V(7144),V(9360),V(5976),V(4920)},9252:(jt,He,V)=>{V.d(He,{c:()=>y.c});var y=V(8368);y.c.registerVersion("firebase","10.8.0","app-compat")},6858:(jt,He,V)=>{V.r(He);var y=V(1528),q=V(8368),k=V(1944),D=V(7144),Ee=(V(9360),V(5976),V(4920));function Le(){return window}function fe(){return fe=(0,y.c)(function*(ee,Z,te){var $e;const{BuildInfo:It}=Le();(0,k.au)(Z.sessionId,"AuthEvent did not contain a session ID");const qt=yield function tt(ee){return Ke.apply(this,arguments)}(Z.sessionId),In={};return(0,k.av)()?In.ibi=It.packageName:(0,k.aw)()?In.apn=It.packageName:(0,k.ax)(ee,"operation-not-supported-in-this-environment"),It.displayName&&(In.appDisplayName=It.displayName),In.sessionId=qt,(0,k.ay)(ee,te,Z.type,void 0,null!==($e=Z.eventId)&&void 0!==$e?$e:void 0,In)}),fe.apply(this,arguments)}function it(){return(it=(0,y.c)(function*(ee){const{BuildInfo:Z}=Le(),te={};(0,k.av)()?te.iosBundleId=Z.packageName:(0,k.aw)()?te.androidPackageName=Z.packageName:(0,k.ax)(ee,"operation-not-supported-in-this-environment"),yield(0,k.az)(ee,te)})).apply(this,arguments)}function pt(){return(pt=(0,y.c)(function*(ee,Z,te){const{cordova:$e}=Le();let It=()=>{};try{yield new Promise((qt,In)=>{let wn=null;function Ln(){var pn;qt();const jn=null===(pn=$e.plugins.browsertab)||void 0===pn?void 0:pn.close;"function"==typeof jn&&jn(),"function"==typeof te?.close&&te.close()}function Zt(){wn||(wn=window.setTimeout(()=>{In((0,k.aB)(ee,"redirect-cancelled-by-user"))},2e3))}function Nr(){"visible"===document?.visibilityState&&Zt()}Z.addPassiveListener(Ln),document.addEventListener("resume",Zt,!1),(0,k.aw)()&&document.addEventListener("visibilitychange",Nr,!1),It=()=>{Z.removePassiveListener(Ln),document.removeEventListener("resume",Zt,!1),document.removeEventListener("visibilitychange",Nr,!1),wn&&window.clearTimeout(wn)}})}finally{It()}})).apply(this,arguments)}function Ke(){return(Ke=(0,y.c)(function*(ee){const Z=function st(ee){if((0,k.au)(/[0-9a-zA-Z]+/.test(ee),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(ee);const Z=new ArrayBuffer(ee.length),te=new Uint8Array(Z);for(let $e=0;$e<ee.length;$e++)te[$e]=ee.charCodeAt($e);return te}(ee),te=yield crypto.subtle.digest("SHA-256",Z);return Array.from(new Uint8Array(te)).map(It=>It.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class ke extends k.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Z=>{this.resolveInialized=Z})}addPassiveListener(Z){this.passiveListeners.add(Z)}removePassiveListener(Z){this.passiveListeners.delete(Z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Z){return this.resolveInialized(),this.passiveListeners.forEach(te=>te(Z)),super.onEvent(Z)}initialized(){var Z=this;return(0,y.c)(function*(){yield Z.initPromise})()}}function Xe(ee){return pe.apply(this,arguments)}function pe(){return(pe=(0,y.c)(function*(ee){const Z=yield ze()._get(at(ee));return Z&&(yield ze()._remove(at(ee))),Z})).apply(this,arguments)}function Ve(){const ee=[];for(let te=0;te<20;te++){const $e=Math.floor(62*Math.random());ee.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt($e))}return ee.join("")}function ze(){return(0,k.aE)(k.b)}function at(ee){return(0,k.aF)("authEvent",ee.config.apiKey,ee.name)}function mt(ee){if(!ee?.includes("?"))return{};const[Z,...te]=ee.split("?");return(0,D.aw)(te.join("?"))}const Ue=class rn{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aG,this._overrideRedirectResult=k.aH}_initialize(Z){var te=this;return(0,y.c)(function*(){const $e=Z._key();let It=te.eventManagers.get($e);return It||(It=new ke(Z),te.eventManagers.set($e,It),te.attachCallbackListeners(Z,It)),It})()}_openPopup(Z){(0,k.ax)(Z,"operation-not-supported-in-this-environment")}_openRedirect(Z,te,$e,It){var qt=this;return(0,y.c)(function*(){!function Be(ee){var Z,te,$e,It,qt,In,wn,Ln,Zt,Nr;const pn=Le();(0,k.aC)("function"==typeof(null===(Z=pn?.universalLinks)||void 0===Z?void 0:Z.subscribe),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.aC)(typeof(null===(te=pn?.BuildInfo)||void 0===te?void 0:te.packageName)<"u",ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.aC)("function"==typeof(null===(qt=null===(It=null===($e=pn?.cordova)||void 0===$e?void 0:$e.plugins)||void 0===It?void 0:It.browsertab)||void 0===qt?void 0:qt.openUrl),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aC)("function"==typeof(null===(Ln=null===(wn=null===(In=pn?.cordova)||void 0===In?void 0:In.plugins)||void 0===wn?void 0:wn.browsertab)||void 0===Ln?void 0:Ln.isAvailable),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aC)("function"==typeof(null===(Nr=null===(Zt=pn?.cordova)||void 0===Zt?void 0:Zt.InAppBrowser)||void 0===Nr?void 0:Nr.open),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Z);const In=yield qt._initialize(Z);yield In.initialized(),In.resetRedirect(),(0,k.aI)(),yield qt._originValidation(Z);const wn=function ae(ee,Z,te=null){return{type:Z,eventId:te,urlResponse:null,sessionId:Ve(),postBody:null,tenantId:ee.tenantId,error:(0,k.aB)(ee,"no-auth-event")}}(Z,$e,It);yield function Re(ee,Z){return ze()._set(at(ee),Z)}(Z,wn);const Ln=yield function ge(ee,Z,te){return fe.apply(this,arguments)}(Z,wn,te),Zt=yield function Ie(ee){const{cordova:Z}=Le();return new Promise(te=>{Z.plugins.browsertab.isAvailable($e=>{let It=null;$e?Z.plugins.browsertab.openUrl(ee):It=Z.InAppBrowser.open(ee,(0,k.aA)()?"_blank":"_system","location=yes"),te(It)})})}(Ln);return function be(ee,Z,te){return pt.apply(this,arguments)}(Z,In,Zt)})()}_isIframeWebStorageSupported(Z,te){throw new Error("Method not implemented.")}_originValidation(Z){const te=Z._key();return this.originValidationPromises[te]||(this.originValidationPromises[te]=function xe(ee){return it.apply(this,arguments)}(Z)),this.originValidationPromises[te]}attachCallbackListeners(Z,te){const{universalLinks:$e,handleOpenURL:It,BuildInfo:qt}=Le(),In=setTimeout((0,y.c)(function*(){yield Xe(Z),te.onEvent(Je())}),500),wn=function(){var Nr=(0,y.c)(function*(pn){clearTimeout(In);const jn=yield Xe(Z);let Oe=null;jn&&pn?.url&&(Oe=function we(ee,Z){var te,$e;const It=function Tt(ee){const Z=mt(ee),te=Z.link?decodeURIComponent(Z.link):void 0,$e=mt(te).link,It=Z.deep_link_id?decodeURIComponent(Z.deep_link_id):void 0;return mt(It).link||It||$e||te||ee}(Z);if(It.includes("/__/auth/callback")){const qt=mt(It),In=qt.firebaseError?function wt(ee){try{return JSON.parse(ee)}catch{return null}}(decodeURIComponent(qt.firebaseError)):null,wn=null===($e=null===(te=In?.code)||void 0===te?void 0:te.split("auth/"))||void 0===$e?void 0:$e[1],Ln=wn?(0,k.aB)(wn):null;return Ln?{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,error:Ln,urlResponse:null,sessionId:null,postBody:null}:{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,sessionId:ee.sessionId,urlResponse:It,postBody:null}}return null}(jn,pn.url)),te.onEvent(Oe||Je())});return function(jn){return Nr.apply(this,arguments)}}();typeof $e<"u"&&"function"==typeof $e.subscribe&&$e.subscribe(null,wn);const Ln=It,Zt=`${qt.packageName.toLowerCase()}://`;Le().handleOpenURL=function(){var Nr=(0,y.c)(function*(pn){if(pn.toLowerCase().startsWith(Zt)&&wn({url:pn}),"function"==typeof Ln)try{Ln(pn)}catch(jn){console.error(jn)}});return function(pn){return Nr.apply(this,arguments)}}()}};function Je(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aB)("no-auth-event")}}function At(){var ee;return(null===(ee=self?.location)||void 0===ee?void 0:ee.protocol)||null}function tn(ee=(0,D.Su)()){return!("file:"!==At()&&"ionic:"!==At()&&"capacitor:"!==At()||!ee.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sn(){try{const ee=self.localStorage,Z=k.aN();if(ee)return ee.setItem(Z,"1"),ee.removeItem(Z),!function Xt(ee=(0,D.Su)()){return function En(){return(0,D.Uv)()&&11===document?.documentMode}()||function An(ee=(0,D.Su)()){return/Edge\/\d+/.test(ee)}(ee)}()||(0,D.yy)()}catch{return qn()&&(0,D.yy)()}return!1}function qn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vr(){return(function Jt(){return"http:"===At()||"https:"===At()}()||(0,D.Cc)()||tn())&&!function nn(){return(0,D.AL)()||(0,D.yW)()}()&&Sn()&&!qn()}function Wt(){return tn()&&typeof document<"u"}function Bt(){return(Bt=(0,y.c)(function*(){return!!Wt()&&new Promise(ee=>{const Z=setTimeout(()=>{ee(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Z),ee(!0)})})})).apply(this,arguments)}const Un={LOCAL:"local",NONE:"none",SESSION:"session"},si=k.aC,Sr="persistence";function ar(ee){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,y.c)(function*(ee){yield ee._initializationPromise;const Z=ui(),te=k.aF(Sr,ee.config.apiKey,ee.name);Z&&Z.setItem(te,ee._getPersistence())})).apply(this,arguments)}function ui(){var ee;try{return(null===(ee=function Xr(){return typeof window<"u"?window:null}())||void 0===ee?void 0:ee.sessionStorage)||null}catch{return null}}const io=k.aC;class Zr{constructor(){this.browserResolver=k.aE(k.k),this.cordovaResolver=k.aE(Ue),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aG,this._overrideRedirectResult=k.aH}_initialize(Z){var te=this;return(0,y.c)(function*(){return yield te.selectUnderlyingResolver(),te.assertedUnderlyingResolver._initialize(Z)})()}_openPopup(Z,te,$e,It){var qt=this;return(0,y.c)(function*(){return yield qt.selectUnderlyingResolver(),qt.assertedUnderlyingResolver._openPopup(Z,te,$e,It)})()}_openRedirect(Z,te,$e,It){var qt=this;return(0,y.c)(function*(){return yield qt.selectUnderlyingResolver(),qt.assertedUnderlyingResolver._openRedirect(Z,te,$e,It)})()}_isIframeWebStorageSupported(Z,te){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Z,te)}_originValidation(Z){return this.assertedUnderlyingResolver._originValidation(Z)}get _shouldInitProactively(){return Wt()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return io(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Z=this;return(0,y.c)(function*(){if(Z.underlyingResolver)return;const te=yield function Rr(){return Bt.apply(this,arguments)}();Z.underlyingResolver=te?Z.cordovaResolver:Z.browserResolver})()}}function qi(ee){return ee.unwrap()}function xn(ee){return Or(ee)}function Or(ee){const{_tokenResponse:Z}=ee instanceof D.kx?ee.customData:ee;if(!Z)return null;if(!(ee instanceof D.kx)&&"temporaryProof"in Z&&"phoneNumber"in Z)return k.P.credentialFromResult(ee);const te=Z.providerId;if(!te||te===k.p.PASSWORD)return null;let $e;switch(te){case k.p.GOOGLE:$e=k.X;break;case k.p.FACEBOOK:$e=k.W;break;case k.p.GITHUB:$e=k.Y;break;case k.p.TWITTER:$e=k.$;break;default:const{oauthIdToken:It,oauthAccessToken:qt,oauthTokenSecret:In,pendingToken:wn,nonce:Ln}=Z;return qt||In||It||wn?wn?te.startsWith("saml.")?k.aQ._create(te,wn):k.N._fromParams({providerId:te,signInMethod:te,pendingToken:wn,idToken:It,accessToken:qt}):new k.Z(te).credential({idToken:It,accessToken:qt,rawNonce:Ln}):null}return ee instanceof D.kx?$e.credentialFromError(ee):$e.credentialFromResult(ee)}function Dn(ee,Z){return Z.catch(te=>{throw te instanceof D.kx&&function Bn(ee,Z){var te;const $e=null===(te=Z.customData)||void 0===te?void 0:te._tokenResponse;if("auth/multi-factor-auth-required"===Z?.code)Z.resolver=new Ri(ee,k.as(ee,Z));else if($e){const It=Or(Z),qt=Z;It&&(qt.credential=It,qt.tenantId=$e.tenantId||void 0,qt.email=$e.email||void 0,qt.phoneNumber=$e.phoneNumber||void 0)}}(ee,te),te}).then(te=>{const It=te.user;return{operationType:te.operationType,credential:xn(te),additionalUserInfo:k.aq(te),user:Kr.getOrCreate(It)}})}function Ur(ee,Z){return zn.apply(this,arguments)}function zn(){return(zn=(0,y.c)(function*(ee,Z){const te=yield Z;return{verificationId:te.verificationId,confirm:$e=>Dn(ee,te.confirm($e))}})).apply(this,arguments)}class Ri{constructor(Z,te){this.resolver=te,this.auth=function Ui(ee){return ee.wrapped()}(Z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Z){return Dn(qi(this.auth),this.resolver.resolveSignIn(Z))}}class Kr{constructor(Z){this._delegate=Z,this.multiFactor=k.at(Z)}static getOrCreate(Z){return Kr.USER_MAP.has(Z)||Kr.USER_MAP.set(Z,new Kr(Z)),Kr.USER_MAP.get(Z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Z){return this._delegate.getIdTokenResult(Z)}getIdToken(Z){return this._delegate.getIdToken(Z)}linkAndRetrieveDataWithCredential(Z){return this.linkWithCredential(Z)}linkWithCredential(Z){var te=this;return(0,y.c)(function*(){return Dn(te.auth,k.a2(te._delegate,Z))})()}linkWithPhoneNumber(Z,te){var $e=this;return(0,y.c)(function*(){return Ur($e.auth,k.l($e._delegate,Z,te))})()}linkWithPopup(Z){var te=this;return(0,y.c)(function*(){return Dn(te.auth,k.d(te._delegate,Z,Zr))})()}linkWithRedirect(Z){var te=this;return(0,y.c)(function*(){return yield ar(k.aJ(te.auth)),k.g(te._delegate,Z,Zr)})()}reauthenticateAndRetrieveDataWithCredential(Z){return this.reauthenticateWithCredential(Z)}reauthenticateWithCredential(Z){var te=this;return(0,y.c)(function*(){return Dn(te.auth,k.a3(te._delegate,Z))})()}reauthenticateWithPhoneNumber(Z,te){return Ur(this.auth,k.r(this._delegate,Z,te))}reauthenticateWithPopup(Z){return Dn(this.auth,k.e(this._delegate,Z,Zr))}reauthenticateWithRedirect(Z){var te=this;return(0,y.c)(function*(){return yield ar(k.aJ(te.auth)),k.h(te._delegate,Z,Zr)})()}sendEmailVerification(Z){return k.ag(this._delegate,Z)}unlink(Z){var te=this;return(0,y.c)(function*(){return yield k.ap(te._delegate,Z),te})()}updateEmail(Z){return k.al(this._delegate,Z)}updatePassword(Z){return k.am(this._delegate,Z)}updatePhoneNumber(Z){return k.u(this._delegate,Z)}updateProfile(Z){return k.ak(this._delegate,Z)}verifyBeforeUpdateEmail(Z,te){return k.ah(this._delegate,Z,te)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Kr.USER_MAP=new WeakMap;const $r=k.aC;let xs=(()=>{class ee{constructor(te,$e){if(this.app=te,$e.isInitialized())return this._delegate=$e.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:It}=te.options;$r(It,"invalid-api-key",{appName:te.name}),$r(It,"invalid-api-key",{appName:te.name});const qt=typeof window<"u"?Zr:void 0;this._delegate=$e.initialize({options:{persistence:Et(It,te.name),popupRedirectResolver:qt}}),this._delegate._updateErrorMap(k.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Kr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(te){this._delegate.languageCode=te}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(te){this._delegate.tenantId=te}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(te,$e){k.K(this._delegate,te,$e)}applyActionCode(te){return k.a7(this._delegate,te)}checkActionCode(te){return k.a8(this._delegate,te)}confirmPasswordReset(te,$e){return k.a6(this._delegate,te,$e)}createUserWithEmailAndPassword(te,$e){var It=this;return(0,y.c)(function*(){return Dn(It._delegate,k.aa(It._delegate,te,$e))})()}fetchProvidersForEmail(te){return this.fetchSignInMethodsForEmail(te)}fetchSignInMethodsForEmail(te){return k.af(this._delegate,te)}isSignInWithEmailLink(te){return k.ad(this._delegate,te)}getRedirectResult(){var te=this;return(0,y.c)(function*(){$r(Vr(),te._delegate,"operation-not-supported-in-this-environment");const $e=yield k.j(te._delegate,Zr);return $e?Dn(te._delegate,Promise.resolve($e)):{credential:null,user:null}})()}addFrameworkForLogging(te){!function lt(ee,Z){(0,k.aJ)(ee)._logFramework(Z)}(this._delegate,te)}onAuthStateChanged(te,$e,It){const{next:qt,error:In,complete:wn}=Ci(te,$e,It);return this._delegate.onAuthStateChanged(qt,In,wn)}onIdTokenChanged(te,$e,It){const{next:qt,error:In,complete:wn}=Ci(te,$e,It);return this._delegate.onIdTokenChanged(qt,In,wn)}sendSignInLinkToEmail(te,$e){return k.ac(this._delegate,te,$e)}sendPasswordResetEmail(te,$e){return k.a5(this._delegate,te,$e||void 0)}setPersistence(te){var $e=this;return(0,y.c)(function*(){let It;switch(function Di(ee,Z){si(Object.values(Un).includes(Z),ee,"invalid-persistence-type"),(0,D.AL)()?si(Z!==Un.SESSION,ee,"unsupported-persistence-type"):(0,D.yW)()?si(Z===Un.NONE,ee,"unsupported-persistence-type"):qn()?si(Z===Un.NONE||Z===Un.LOCAL&&(0,D.yy)(),ee,"unsupported-persistence-type"):si(Z===Un.NONE||Sn(),ee,"unsupported-persistence-type")}($e._delegate,te),te){case Un.SESSION:It=k.a;break;case Un.LOCAL:It=(yield k.aE(k.i)._isAvailable())?k.i:k.b;break;case Un.NONE:It=k.U;break;default:return k.ax("argument-error",{appName:$e._delegate.name})}return $e._delegate.setPersistence(It)})()}signInAndRetrieveDataWithCredential(te){return this.signInWithCredential(te)}signInAnonymously(){return Dn(this._delegate,k.a0(this._delegate))}signInWithCredential(te){return Dn(this._delegate,k.a1(this._delegate,te))}signInWithCustomToken(te){return Dn(this._delegate,k.a4(this._delegate,te))}signInWithEmailAndPassword(te,$e){return Dn(this._delegate,k.ab(this._delegate,te,$e))}signInWithEmailLink(te,$e){return Dn(this._delegate,k.ae(this._delegate,te,$e))}signInWithPhoneNumber(te,$e){return Ur(this._delegate,k.s(this._delegate,te,$e))}signInWithPopup(te){var $e=this;return(0,y.c)(function*(){return $r(Vr(),$e._delegate,"operation-not-supported-in-this-environment"),Dn($e._delegate,k.c($e._delegate,te,Zr))})()}signInWithRedirect(te){var $e=this;return(0,y.c)(function*(){return $r(Vr(),$e._delegate,"operation-not-supported-in-this-environment"),yield ar($e._delegate),k.f($e._delegate,te,Zr)})()}updateCurrentUser(te){return this._delegate.updateCurrentUser(te)}verifyPasswordResetCode(te){return k.a9(this._delegate,te)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ee.Persistence=Un,ee})();function Ci(ee,Z,te){let $e=ee;"function"!=typeof ee&&({next:$e,error:Z,complete:te}=ee);const It=$e;return{next:In=>It(In&&Kr.getOrCreate(In)),error:Z,complete:te}}function Et(ee,Z){const te=function yn(ee,Z){const te=ui();if(!te)return[];const $e=k.aF(Sr,ee,Z);switch(te.getItem($e)){case Un.NONE:return[k.U];case Un.LOCAL:return[k.i,k.a];case Un.SESSION:return[k.a];default:return[]}}(ee,Z);if(typeof self<"u"&&!te.includes(k.i)&&te.push(k.i),typeof window<"u")for(const $e of[k.b,k.a])te.includes($e)||te.push($e);return te.includes(k.U)||te.push(k.U),te}class Ye{constructor(){this.providerId="phone",this._delegate=new k.P(qi(q.c.auth()))}static credential(Z,te){return k.P.credential(Z,te)}verifyPhoneNumber(Z,te){return this._delegate.verifyPhoneNumber(Z,te)}unwrap(){return this._delegate}}Ye.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Ye.PROVIDER_ID=k.P.PROVIDER_ID;const ye=k.aC;class We{constructor(Z,te,$e=q.c.app()){var It;ye(null===(It=$e.options)||void 0===It?void 0:It.apiKey,"invalid-api-key",{appName:$e.name}),this._delegate=new k.R($e.auth(),Z,te),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function de(ee){ee.INTERNAL.registerComponent(new Ee.Yl("auth-compat",Z=>{const te=Z.getProvider("app-compat").getImmediate(),$e=Z.getProvider("auth");return new xs(te,$e)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.V,FacebookAuthProvider:k.W,GithubAuthProvider:k.Y,GoogleAuthProvider:k.X,OAuthProvider:k.Z,SAMLAuthProvider:k._,PhoneAuthProvider:Ye,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:We,TwitterAuthProvider:k.$,Auth:xs,AuthCredential:k.L,Error:D.kx}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ee.registerVersion("@firebase/auth-compat","0.5.2")}(q.c)},1528:(jt,He,V)=>{function y(k,D,W,_e,Ee,Le,Pe){try{var ge=k[Le](Pe),fe=ge.value}catch(xe){return void W(xe)}ge.done?D(fe):Promise.resolve(fe).then(_e,Ee)}function q(k){return function(){var D=this,W=arguments;return new Promise(function(_e,Ee){var Le=k.apply(D,W);function Pe(fe){y(Le,_e,Ee,Pe,ge,"next",fe)}function ge(fe){y(Le,_e,Ee,Pe,ge,"throw",fe)}Pe(void 0)})}}V.d(He,{c:()=>q})},1316:(jt,He,V)=>{function D(Ue,Je){var lt={};for(var qe in Ue)Object.prototype.hasOwnProperty.call(Ue,qe)&&Je.indexOf(qe)<0&&(lt[qe]=Ue[qe]);if(null!=Ue&&"function"==typeof Object.getOwnPropertySymbols){var gt=0;for(qe=Object.getOwnPropertySymbols(Ue);gt<qe.length;gt++)Je.indexOf(qe[gt])<0&&Object.prototype.propertyIsEnumerable.call(Ue,qe[gt])&&(lt[qe[gt]]=Ue[qe[gt]])}return lt}function xe(Ue,Je,lt,qe){return new(lt||(lt=Promise))(function(ft,At){function Jt(En){try{nn(qe.next(En))}catch(An){At(An)}}function tn(En){try{nn(qe.throw(En))}catch(An){At(An)}}function nn(En){En.done?ft(En.value):function gt(ft){return ft instanceof lt?ft:new lt(function(At){At(ft)})}(En.value).then(Jt,tn)}nn((qe=qe.apply(Ue,Je||[])).next())})}function Ae(Ue){return this instanceof Ae?(this.v=Ue,this):new Ae(Ue)}function ke(Ue,Je,lt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var gt,qe=lt.apply(Ue,Je||[]),ft=[];return gt={},At("next"),At("throw"),At("return"),gt[Symbol.asyncIterator]=function(){return this},gt;function At(Xt){qe[Xt]&&(gt[Xt]=function(Sn){return new Promise(function(qn,Vr){ft.push([Xt,Sn,qn,Vr])>1||Jt(Xt,Sn)})})}function Jt(Xt,Sn){try{!function tn(Xt){Xt.value instanceof Ae?Promise.resolve(Xt.value.v).then(nn,En):An(ft[0][2],Xt)}(qe[Xt](Sn))}catch(qn){An(ft[0][3],qn)}}function nn(Xt){Jt("next",Xt)}function En(Xt){Jt("throw",Xt)}function An(Xt,Sn){Xt(Sn),ft.shift(),ft.length&&Jt(ft[0][0],ft[0][1])}}function Re(Ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lt,Je=Ue[Symbol.asyncIterator];return Je?Je.call(Ue):(Ue=function pt(Ue){var Je="function"==typeof Symbol&&Symbol.iterator,lt=Je&&Ue[Je],qe=0;if(lt)return lt.call(Ue);if(Ue&&"number"==typeof Ue.length)return{next:function(){return Ue&&qe>=Ue.length&&(Ue=void 0),{value:Ue&&Ue[qe++],done:!Ue}}};throw new TypeError(Je?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ue),lt={},qe("next"),qe("throw"),qe("return"),lt[Symbol.asyncIterator]=function(){return this},lt);function qe(ft){lt[ft]=Ue[ft]&&function(At){return new Promise(function(Jt,tn){!function gt(ft,At,Jt,tn){Promise.resolve(tn).then(function(nn){ft({value:nn,done:Jt})},At)}(Jt,tn,(At=Ue[ft](At)).done,At.value)})}}}V.d(He,{U1:()=>Ae,kH:()=>xe,mA:()=>Re,o7:()=>ke,sX:()=>D}),"function"==typeof SuppressedError&&SuppressedError}},jt=>{jt(jt.s=8744)}]);