"use strict";(self.webpackChunkmusicshop=self.webpackChunkmusicshop||[]).push([[792],{576:(un,Ye,k)=>{k.d(Ye,{$:()=>_s,A:()=>me,G:()=>Te,K:()=>Qi,L:()=>ar,N:()=>li,P:()=>Yc,R:()=>dt,U:()=>Wn,V:()=>Gs,W:()=>ls,X:()=>Tr,Y:()=>zs,Z:()=>zo,_:()=>dr,a:()=>na,a0:()=>K,a1:()=>wa,a2:()=>C,a3:()=>L,a4:()=>Le,a5:()=>Zn,a6:()=>wr,a7:()=>gs,a8:()=>bs,a9:()=>Ki,aA:()=>qi,aB:()=>Y,aC:()=>le,aD:()=>Lu,aE:()=>xt,aF:()=>Jn,aG:()=>Vu,aH:()=>nf,aI:()=>Cd,aJ:()=>Ut,aN:()=>tr,aQ:()=>Kr,aa:()=>co,ab:()=>Za,ac:()=>Mo,ad:()=>fa,ae:()=>ki,af:()=>hr,ag:()=>ss,ah:()=>Ps,ak:()=>Yi,al:()=>Ms,am:()=>ta,ap:()=>ir,aq:()=>Ce,as:()=>vi,at:()=>El,au:()=>Je,av:()=>as,aw:()=>Fs,ax:()=>We,ay:()=>nu,az:()=>eu,b:()=>pa,c:()=>ef,d:()=>tf,e:()=>Dl,f:()=>Td,g:()=>Rl,h:()=>Dd,i:()=>wl,j:()=>Rr,k:()=>Bu,l:()=>Ac,m:()=>$u,p:()=>Fe,r:()=>Co,s:()=>fr,u:()=>ku});var _=k(467),V=k(7852),P=k(1076),w=k(8041),G=k(1635),Pe=k(1362);const Fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},me={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Te=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Ve=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},At=new P.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ot=new w.Vy("@firebase/auth");function je(E,...h){ot.logLevel<=w.$b.ERROR&&ot.error(`Auth (${V.SDK_VERSION}): ${E}`,...h)}function We(E,...h){throw st(E,...h)}function Y(E,...h){return st(E,...h)}function te(E,h,f){const T=Object.assign(Object.assign({},Ve()),{[h]:f});return new P.FA("auth","Firebase",T).create(h,{appName:E.name})}function De(E){return te(E,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rt(E,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&We(E,"argument-error"),te(E,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function st(E,...h){if("string"!=typeof E){const f=h[0],T=[...h.slice(1)];return T[0]&&(T[0].appName=E.name),E._errorFactory.create(f,...T)}return At.create(E,...h)}function le(E,h,...f){if(!E)throw st(h,...f)}function Ge(E){const h="INTERNAL ASSERTION FAILED: "+E;throw je(h),new Error(h)}function Je(E,h){E||Ge(h)}function zt(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Pt(){return"http:"===Kt()||"https:"===Kt()}function Kt(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Tn{constructor(h,f){this.shortDelay=h,this.longDelay=f,Je(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.jZ)()||(0,P.lV)()}get(){return function Bt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Pt()||(0,P.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xe(E,h){Je(E.emulator,"Emulator should always be set here");const{url:f}=E.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class Qe{static initialize(h,f,T){this.fetchImpl=h,f&&(this.headersImpl=f),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},yt=new Tn(3e4,6e4);function Et(E,h){return E.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:E.tenantId}):h}function et(E,h,f,T){return qt.apply(this,arguments)}function qt(){return(qt=(0,_.A)(function*(E,h,f,T,W={}){return pn(E,W,(0,_.A)(function*(){let ae={},ke={};T&&("GET"===h?ke=T:ae={body:JSON.stringify(T)});const Dt=(0,P.Am)(Object.assign({key:E.config.apiKey},ke)).slice(1),Gt=yield E._getAdditionalHeaders();return Gt["Content-Type"]="application/json",E.languageCode&&(Gt["X-Firebase-Locale"]=E.languageCode),Qe.fetch()(An(E,E.config.apiHost,f,Dt),Object.assign({method:h,headers:Gt,referrerPolicy:"no-referrer"},ae))}))})).apply(this,arguments)}function pn(E,h,f){return on.apply(this,arguments)}function on(){return(on=(0,_.A)(function*(E,h,f){E._canInitEmulator=!1;const T=Object.assign(Object.assign({},lt),h);try{const W=new at(E),ae=yield Promise.race([f(),W.promise]);W.clearNetworkTimeout();const ke=yield ae.json();if("needConfirmation"in ke)throw In(E,"account-exists-with-different-credential",ke);if(ae.ok&&!("errorMessage"in ke))return ke;{const Dt=ae.ok?ke.errorMessage:ke.error.message,[Gt,Sn]=Dt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Gt)throw In(E,"credential-already-in-use",ke);if("EMAIL_EXISTS"===Gt)throw In(E,"email-already-in-use",ke);if("USER_DISABLED"===Gt)throw In(E,"user-disabled",ke);const zn=T[Gt]||Gt.toLowerCase().replace(/[_\s]+/g,"-");if(Sn)throw te(E,zn,Sn);We(E,zn)}}catch(W){if(W instanceof P.g)throw W;We(E,"network-request-failed",{message:String(W)})}})).apply(this,arguments)}function an(E,h,f,T){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,_.A)(function*(E,h,f,T,W={}){const ae=yield et(E,h,f,T,W);return"mfaPendingCredential"in ae&&We(E,"multi-factor-auth-required",{_serverResponse:ae}),ae})).apply(this,arguments)}function An(E,h,f,T){const W=`${h}${f}?${T}`;return E.config.emulator?xe(E.config,W):`${E.config.apiScheme}://${W}`}function jn(E){switch(E){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class at{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,T)=>{this.timer=setTimeout(()=>T(Y(this.auth,"network-request-failed")),yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function In(E,h,f){const T={appName:E.name};f.email&&(T.email=f.email),f.phoneNumber&&(T.phoneNumber=f.phoneNumber);const W=Y(E,h,T);return W.customData._tokenResponse=f,W}function Qn(E){return void 0!==E&&void 0!==E.getResponse}function Xn(E){return void 0!==E&&void 0!==E.enterprise}class bt{constructor(h){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=h.recaptchaEnforcementState}getProviderEnforcementState(h){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===h)return jn(f.enforcementState);return null}isProviderEnabled(h){return"ENFORCE"===this.getProviderEnforcementState(h)||"AUDIT"===this.getProviderEnforcementState(h)}}function jr(){return(jr=(0,_.A)(function*(E){return(yield et(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Rt(E,h){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,_.A)(function*(E,h){return et(E,"GET","/v2/recaptchaConfig",Et(E,h))})).apply(this,arguments)}function rr(){return(rr=(0,_.A)(function*(E,h){return et(E,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Pn(){return(Pn=(0,_.A)(function*(E,h){return et(E,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function vn(E,h){return xr.apply(this,arguments)}function xr(){return(xr=(0,_.A)(function*(E,h){return et(E,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function $r(E){if(E)try{const h=new Date(Number(E));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Sr(){return(Sr=(0,_.A)(function*(E,h=!1){const f=(0,P.Ku)(E),T=yield f.getIdToken(h),W=Ln(T);le(W&&W.exp&&W.auth_time&&W.iat,f.auth,"internal-error");const ae="object"==typeof W.firebase?W.firebase:void 0,ke=ae?.sign_in_provider;return{claims:W,token:T,authTime:$r(hs(W.auth_time)),issuedAtTime:$r(hs(W.iat)),expirationTime:$r(hs(W.exp)),signInProvider:ke||null,signInSecondFactor:ae?.sign_in_second_factor||null}})).apply(this,arguments)}function hs(E){return 1e3*Number(E)}function Ln(E){const[h,f,T]=E.split(".");if(void 0===h||void 0===f||void 0===T)return je("JWT malformed, contained fewer than 3 sections"),null;try{const W=(0,P.u)(f);return W?JSON.parse(W):(je("Failed to decode base64 JWT payload"),null)}catch(W){return je("Caught error parsing JWT payload as JSON",W?.toString()),null}}function Ti(E){const h=Ln(E);return le(h,"internal-error"),le(typeof h.exp<"u","internal-error"),le(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}function Wt(E,h){return Un.apply(this,arguments)}function Un(){return(Un=(0,_.A)(function*(E,h,f=!1){if(f)return h;try{return yield h}catch(T){throw T instanceof P.g&&function Qr({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(T)&&E.auth.currentUser===E&&(yield E.auth.signOut()),T}})).apply(this,arguments)}class nn{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const W=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,W)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const T=this.getInterval(h);this.timerId=setTimeout((0,_.A)(function*(){yield f.iteration()}),T)}iteration(){var h=this;return(0,_.A)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class rn{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=$r(this.lastLoginAt),this.creationTime=$r(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xr(E){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,_.A)(function*(E){var h;const f=E.auth,T=yield E.getIdToken(),W=yield Wt(E,vn(f,{idToken:T}));le(W?.users.length,f,"internal-error");const ae=W.users[0];E._notifyReloadListener(ae);const ke=null!==(h=ae.providerUserInfo)&&void 0!==h&&h.length?Ee(ae.providerUserInfo):[],Dt=function Ie(E,h){return[...E.filter(T=>!h.some(W=>W.providerId===T.providerId)),...h]}(E.providerData,ke),zn=!!E.isAnonymous&&!(E.email&&ae.passwordHash||Dt?.length),Ar={uid:ae.localId,displayName:ae.displayName||null,photoURL:ae.photoUrl||null,email:ae.email||null,emailVerified:ae.emailVerified||!1,phoneNumber:ae.phoneNumber||null,tenantId:ae.tenantId||null,providerData:Dt,metadata:new rn(ae.createdAt,ae.lastLoginAt),isAnonymous:zn};Object.assign(E,Ar)})).apply(this,arguments)}function Re(){return(Re=(0,_.A)(function*(E){const h=(0,P.Ku)(E);yield Xr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ee(E){return E.map(h=>{var{providerId:f}=h,T=(0,G.Tt)(h,["providerId"]);return{providerId:f,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function Mt(){return(Mt=(0,_.A)(function*(E,h){const f=yield pn(E,{},(0,_.A)(function*(){const T=(0,P.Am)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:W,apiKey:ae}=E.config,ke=An(E,W,"/v1/token",`key=${ae}`),Dt=yield E._getAdditionalHeaders();return Dt["Content-Type"]="application/x-www-form-urlencoded",Qe.fetch()(ke,{method:"POST",headers:Dt,body:T})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function q(){return(q=(0,_.A)(function*(E,h){return et(E,"POST","/v2/accounts:revokeToken",Et(E,h))})).apply(this,arguments)}class J{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){le(h.idToken,"internal-error"),le(typeof h.idToken<"u","internal-error"),le(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):Ti(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}updateFromIdToken(h){le(0!==h.length,"internal-error");const f=Ti(h);this.updateTokensAndExpiration(h,null,f)}getToken(h,f=!1){var T=this;return(0,_.A)(function*(){return f||!T.accessToken||T.isExpired?(le(T.refreshToken,h,"user-token-expired"),T.refreshToken?(yield T.refresh(h,T.refreshToken),T.accessToken):null):T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var T=this;return(0,_.A)(function*(){const{accessToken:W,refreshToken:ae,expiresIn:ke}=yield function Ke(E,h){return Mt.apply(this,arguments)}(h,f);T.updateTokensAndExpiration(W,ae,Number(ke))})()}updateTokensAndExpiration(h,f,T){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(h,f){const{refreshToken:T,accessToken:W,expirationTime:ae}=f,ke=new J;return T&&(le("string"==typeof T,"internal-error",{appName:h}),ke.refreshToken=T),W&&(le("string"==typeof W,"internal-error",{appName:h}),ke.accessToken=W),ae&&(le("number"==typeof ae,"internal-error",{appName:h}),ke.expirationTime=ae),ke}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new J,this.toJSON())}_performRefresh(){return Ge("not implemented")}}function oe(E,h){le("string"==typeof E||typeof E>"u","internal-error",{appName:h})}class pe{constructor(h){var{uid:f,auth:T,stsTokenManager:W}=h,ae=(0,G.Tt)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=T,this.stsTokenManager=W,this.accessToken=W.accessToken,this.displayName=ae.displayName||null,this.email=ae.email||null,this.emailVerified=ae.emailVerified||!1,this.phoneNumber=ae.phoneNumber||null,this.photoURL=ae.photoURL||null,this.isAnonymous=ae.isAnonymous||!1,this.tenantId=ae.tenantId||null,this.providerData=ae.providerData?[...ae.providerData]:[],this.metadata=new rn(ae.createdAt||void 0,ae.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,_.A)(function*(){const T=yield Wt(f,f.stsTokenManager.getToken(f.auth,h));return le(T,f.auth,"internal-error"),f.accessToken!==T&&(f.accessToken=T,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),T})()}getIdTokenResult(h){return function $i(E){return Sr.apply(this,arguments)}(this,h)}reload(){return function oi(E){return Re.apply(this,arguments)}(this)}_assign(h){this!==h&&(le(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new pe(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var T=this;return(0,_.A)(function*(){let W=!1;h.idToken&&h.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(h),W=!0),f&&(yield Xr(T)),yield T.auth._persistUserIfCurrent(T),W&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var h=this;return(0,_.A)(function*(){if((0,V._isFirebaseServerApp)(h.auth.app))return Promise.reject(De(h.auth));const f=yield h.getIdToken();return yield Wt(h,function Ot(E,h){return rr.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var T,W,ae,ke,Dt,Gt,Sn,zn;const Ar=null!==(T=f.displayName)&&void 0!==T?T:void 0,go=null!==(W=f.email)&&void 0!==W?W:void 0,Pa=null!==(ae=f.phoneNumber)&&void 0!==ae?ae:void 0,Hu=null!==(ke=f.photoURL)&&void 0!==ke?ke:void 0,Gu=null!==(Dt=f.tenantId)&&void 0!==Dt?Dt:void 0,zu=null!==(Gt=f._redirectEventId)&&void 0!==Gt?Gt:void 0,jl=null!==(Sn=f.createdAt)&&void 0!==Sn?Sn:void 0,$l=null!==(zn=f.lastLoginAt)&&void 0!==zn?zn:void 0,{uid:Ga,emailVerified:aa,isAnonymous:Wu,providerData:iu,stsTokenManager:Ku}=f;le(Ga&&Ku,h,"internal-error");const dc=J.fromJSON(this.name,Ku);le("string"==typeof Ga,h,"internal-error"),oe(Ar,h.name),oe(go,h.name),le("boolean"==typeof aa,h,"internal-error"),le("boolean"==typeof Wu,h,"internal-error"),oe(Pa,h.name),oe(Hu,h.name),oe(Gu,h.name),oe(zu,h.name),oe(jl,h.name),oe($l,h.name);const za=new pe({uid:Ga,auth:h,email:go,emailVerified:aa,displayName:Ar,isAnonymous:Wu,photoURL:Hu,phoneNumber:Pa,tenantId:Gu,stsTokenManager:dc,createdAt:jl,lastLoginAt:$l});return iu&&Array.isArray(iu)&&(za.providerData=iu.map(xs=>Object.assign({},xs))),zu&&(za._redirectEventId=zu),za}static _fromIdTokenResponse(h,f,T=!1){return(0,_.A)(function*(){const W=new J;W.updateFromServerResponse(f);const ae=new pe({uid:f.localId,auth:h,stsTokenManager:W,isAnonymous:T});return yield Xr(ae),ae})()}static _fromGetAccountInfoResponse(h,f,T){return(0,_.A)(function*(){const W=f.users[0];le(void 0!==W.localId,"internal-error");const ae=void 0!==W.providerUserInfo?Ee(W.providerUserInfo):[],ke=!(W.email&&W.passwordHash||ae?.length),Dt=new J;Dt.updateFromIdToken(T);const Gt=new pe({uid:W.localId,auth:h,stsTokenManager:Dt,isAnonymous:ke}),Sn={uid:W.localId,displayName:W.displayName||null,photoURL:W.photoUrl||null,email:W.email||null,emailVerified:W.emailVerified||!1,phoneNumber:W.phoneNumber||null,tenantId:W.tenantId||null,providerData:ae,metadata:new rn(W.createdAt,W.lastLoginAt),isAnonymous:!(W.email&&W.passwordHash||ae?.length)};return Object.assign(Gt,Sn),Gt})()}}const gt=new Map;function xt(E){Je(E instanceof Function,"Expected a class definition");let h=gt.get(E);return h?(Je(h instanceof E,"Instance stored in cache mismatched with class"),h):(h=new E,gt.set(E,h),h)}const Wn=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.A)(function*(){return!0})()}_set(f,T){var W=this;return(0,_.A)(function*(){W.storage[f]=T})()}_get(f){var T=this;return(0,_.A)(function*(){const W=T.storage[f];return void 0===W?null:W})()}_remove(f){var T=this;return(0,_.A)(function*(){delete T.storage[f]})()}_addListener(f,T){}_removeListener(f,T){}}return E.type="NONE",E})();function Jn(E,h,f){return`firebase:${E}:${h}:${f}`}class Rn{constructor(h,f,T){this.persistence=h,this.auth=f,this.userKey=T;const{config:W,name:ae}=this.auth;this.fullUserKey=Jn(this.userKey,W.apiKey,ae),this.fullPersistenceKey=Jn("persistence",W.apiKey,ae),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,_.A)(function*(){const f=yield h.persistence._get(h.fullUserKey);return f?pe._fromJSON(h.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var f=this;return(0,_.A)(function*(){if(f.persistence===h)return;const T=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=h,T?f.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,f,T="authUser"){return(0,_.A)(function*(){if(!f.length)return new Rn(xt(Wn),h,T);const W=(yield Promise.all(f.map(function(){var Sn=(0,_.A)(function*(zn){if(yield zn._isAvailable())return zn});return function(zn){return Sn.apply(this,arguments)}}()))).filter(Sn=>Sn);let ae=W[0]||xt(Wn);const ke=Jn(T,h.config.apiKey,h.name);let Dt=null;for(const Sn of f)try{const zn=yield Sn._get(ke);if(zn){const Ar=pe._fromJSON(h,zn);Sn!==ae&&(Dt=Ar),ae=Sn;break}}catch{}const Gt=W.filter(Sn=>Sn._shouldAllowMigration);return ae._shouldAllowMigration&&Gt.length?(ae=Gt[0],Dt&&(yield ae._set(ke,Dt.toJSON())),yield Promise.all(f.map(function(){var Sn=(0,_.A)(function*(zn){if(zn!==ae)try{yield zn._remove(ke)}catch{}});return function(zn){return Sn.apply(this,arguments)}}())),new Rn(ae,h,T)):new Rn(ae,h,T)})()}}function Ht(E){const h=E.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(_o(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ne(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Kn(h))return"Blackberry";if(rs(h))return"Webos";if(kr(h))return"Safari";if((h.includes("chrome/")||ai(h))&&!h.includes("edge/"))return"Chrome";if(Fs(h))return"Android";{const T=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function Ne(E=(0,P.ZQ)()){return/firefox\//i.test(E)}function kr(E=(0,P.ZQ)()){const h=E.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function ai(E=(0,P.ZQ)()){return/crios\//i.test(E)}function _o(E=(0,P.ZQ)()){return/iemobile/i.test(E)}function Fs(E=(0,P.ZQ)()){return/android/i.test(E)}function Kn(E=(0,P.ZQ)()){return/blackberry/i.test(E)}function rs(E=(0,P.ZQ)()){return/webos/i.test(E)}function as(E=(0,P.ZQ)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function qi(E=(0,P.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function kt(E=(0,P.ZQ)()){return as(E)||Fs(E)||rs(E)||Kn(E)||/windows phone/i.test(E)||_o(E)}function ln(E,h=[]){let f;switch(E){case"Browser":f=Ht((0,P.ZQ)());break;case"Worker":f=`${Ht((0,P.ZQ)())}-${E}`;break;default:f=E}const T=h.length?h.join(","):"FirebaseCore-web";return`${f}/JsCore/${V.SDK_VERSION}/${T}`}class se{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,f){const T=ae=>new Promise((ke,Dt)=>{try{ke(h(ae))}catch(Gt){Dt(Gt)}});T.onAbort=f,this.queue.push(T);const W=this.queue.length-1;return()=>{this.queue[W]=()=>Promise.resolve()}}runMiddleware(h){var f=this;return(0,_.A)(function*(){if(f.auth.currentUser===h)return;const T=[];try{for(const W of f.queue)yield W(h),W.onAbort&&T.push(W.onAbort)}catch(W){T.reverse();for(const ae of T)try{ae()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:W?.message})}})()}}function ve(){return(ve=(0,_.A)(function*(E,h={}){return et(E,"GET","/v2/passwordPolicy",Et(E,h))})).apply(this,arguments)}class Ze{constructor(h){var f,T,W,ae;const ke=h.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=ke.minPasswordLength)&&void 0!==f?f:6,ke.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ke.maxPasswordLength),void 0!==ke.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=ke.containsLowercaseCharacter),void 0!==ke.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=ke.containsUppercaseCharacter),void 0!==ke.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=ke.containsNumericCharacter),void 0!==ke.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ke.containsNonAlphanumericCharacter),this.enforcementState=h.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(W=null===(T=h.allowedNonAlphanumericCharacters)||void 0===T?void 0:T.join(""))&&void 0!==W?W:"",this.forceUpgradeOnSignin=null!==(ae=h.forceUpgradeOnSignin)&&void 0!==ae&&ae,this.schemaVersion=h.schemaVersion}validatePassword(h){var f,T,W,ae,ke,Dt;const Gt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(h,Gt),this.validatePasswordCharacterOptions(h,Gt),Gt.isValid&&(Gt.isValid=null===(f=Gt.meetsMinPasswordLength)||void 0===f||f),Gt.isValid&&(Gt.isValid=null===(T=Gt.meetsMaxPasswordLength)||void 0===T||T),Gt.isValid&&(Gt.isValid=null===(W=Gt.containsLowercaseLetter)||void 0===W||W),Gt.isValid&&(Gt.isValid=null===(ae=Gt.containsUppercaseLetter)||void 0===ae||ae),Gt.isValid&&(Gt.isValid=null===(ke=Gt.containsNumericCharacter)||void 0===ke||ke),Gt.isValid&&(Gt.isValid=null===(Dt=Gt.containsNonAlphanumericCharacter)||void 0===Dt||Dt),Gt}validatePasswordLengthOptions(h,f){const T=this.customStrengthOptions.minPasswordLength,W=this.customStrengthOptions.maxPasswordLength;T&&(f.meetsMinPasswordLength=h.length>=T),W&&(f.meetsMaxPasswordLength=h.length<=W)}validatePasswordCharacterOptions(h,f){let T;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let W=0;W<h.length;W++)T=h.charAt(W),this.updatePasswordCharacterOptionsStatuses(f,T>="a"&&T<="z",T>="A"&&T<="Z",T>="0"&&T<="9",this.allowedNonAlphanumericCharacters.includes(T))}updatePasswordCharacterOptionsStatuses(h,f,T,W,ae){this.customStrengthOptions.containsLowercaseLetter&&(h.containsLowercaseLetter||(h.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(h.containsUppercaseLetter||(h.containsUppercaseLetter=T)),this.customStrengthOptions.containsNumericCharacter&&(h.containsNumericCharacter||(h.containsNumericCharacter=W)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(h.containsNonAlphanumericCharacter||(h.containsNonAlphanumericCharacter=ae))}}class Yt{constructor(h,f,T,W){this.app=h,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=T,this.config=W,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xn(this),this.idTokenSubscription=new xn(this),this.beforeStateQueue=new se(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=At,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=W.sdkClientVersion}_initializeWithPersistence(h,f){var T=this;return f&&(this._popupRedirectResolver=xt(f)),this._initializationPromise=this.queue((0,_.A)(function*(){var W,ae;if(!T._deleted&&(T.persistenceManager=yield Rn.create(T,h),!T._deleted)){if(null!==(W=T._popupRedirectResolver)&&void 0!==W&&W._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(f),T.lastNotifiedUid=(null===(ae=T.currentUser)||void 0===ae?void 0:ae.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,_.A)(function*(){if(h._deleted)return;const f=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||f){if(h.currentUser&&f&&h.currentUser.uid===f.uid)return h._currentUser._assign(f),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(h){var f=this;return(0,_.A)(function*(){try{const T=yield vn(f,{idToken:h}),W=yield pe._fromGetAccountInfoResponse(f,T,h);yield f.directlySetCurrentUser(W)}catch(T){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",T),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(h){var f=this;return(0,_.A)(function*(){var T;if((0,V._isFirebaseServerApp)(f.app)){const Dt=f.app.settings.authIdToken;return Dt?new Promise(Gt=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(Dt).then(Gt,Gt))}):f.directlySetCurrentUser(null)}const W=yield f.assertedPersistence.getCurrentUser();let ae=W,ke=!1;if(h&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Dt=null===(T=f.redirectUser)||void 0===T?void 0:T._redirectEventId,Gt=ae?._redirectEventId,Sn=yield f.tryRedirectSignIn(h);(!Dt||Dt===Gt)&&Sn?.user&&(ae=Sn.user,ke=!0)}if(!ae)return f.directlySetCurrentUser(null);if(!ae._redirectEventId){if(ke)try{yield f.beforeStateQueue.runMiddleware(ae)}catch(Dt){ae=W,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Dt))}return ae?f.reloadAndSetCurrentUserOrClear(ae):f.directlySetCurrentUser(null)}return le(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===ae._redirectEventId?f.directlySetCurrentUser(ae):f.reloadAndSetCurrentUserOrClear(ae)})()}tryRedirectSignIn(h){var f=this;return(0,_.A)(function*(){let T=null;try{T=yield f._popupRedirectResolver._completeRedirectFn(f,h,!0)}catch{yield f._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(h){var f=this;return(0,_.A)(function*(){try{yield Xr(h)}catch(T){if("auth/network-request-failed"!==T?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function tn(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var h=this;return(0,_.A)(function*(){h._deleted=!0})()}updateCurrentUser(h){var f=this;return(0,_.A)(function*(){if((0,V._isFirebaseServerApp)(f.app))return Promise.reject(De(f));const T=h?(0,P.Ku)(h):null;return T&&le(T.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(T&&T._clone(f))})()}_updateCurrentUser(h,f=!1){var T=this;return(0,_.A)(function*(){if(!T._deleted)return h&&le(T.tenantId===h.tenantId,T,"tenant-id-mismatch"),f||(yield T.beforeStateQueue.runMiddleware(h)),T.queue((0,_.A)(function*(){yield T.directlySetCurrentUser(h),T.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,_.A)(function*(){return(0,V._isFirebaseServerApp)(h.app)?Promise.reject(De(h)):(yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0))})()}setPersistence(h){var f=this;return(0,V._isFirebaseServerApp)(this.app)?Promise.reject(De(this)):this.queue((0,_.A)(function*(){yield f.assertedPersistence.setPersistence(xt(h))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(h){var f=this;return(0,_.A)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const T=f._getPasswordPolicyInternal();return T.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):T.validatePassword(h)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var h=this;return(0,_.A)(function*(){const f=yield function ye(E){return ve.apply(this,arguments)}(h),T=new Ze(f);null===h.tenantId?h._projectPasswordPolicy=T:h._tenantPasswordPolicies[h.tenantId]=T})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.FA("auth","Firebase",h())}onAuthStateChanged(h,f,T){return this.registerStateListener(this.authStateSubscription,h,f,T)}beforeAuthStateChanged(h,f){return this.beforeStateQueue.pushCallback(h,f)}onIdTokenChanged(h,f,T){return this.registerStateListener(this.idTokenSubscription,h,f,T)}authStateReady(){return new Promise((h,f)=>{if(this.currentUser)h();else{const T=this.onAuthStateChanged(()=>{T(),h()},f)}})}revokeAccessToken(h){var f=this;return(0,_.A)(function*(){if(f.currentUser){const T=yield f.currentUser.getIdToken(),W={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:h,idToken:T};null!=f.tenantId&&(W.tenantId=f.tenantId),yield function he(E,h){return q.apply(this,arguments)}(f,W)}})()}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,f){var T=this;return(0,_.A)(function*(){const W=yield T.getOrInitRedirectPersistenceManager(f);return null===h?W.removeCurrentUser():W.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var f=this;return(0,_.A)(function*(){if(!f.redirectPersistenceManager){const T=h&&xt(h)||f._popupRedirectResolver;le(T,f,"argument-error"),f.redirectPersistenceManager=yield Rn.create(f,[xt(T._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(h){var f=this;return(0,_.A)(function*(){var T,W;return f._isInitialized&&(yield f.queue((0,_.A)(function*(){}))),(null===(T=f._currentUser)||void 0===T?void 0:T._redirectEventId)===h?f._currentUser:(null===(W=f.redirectUser)||void 0===W?void 0:W._redirectEventId)===h?f.redirectUser:null})()}_persistUserIfCurrent(h){var f=this;return(0,_.A)(function*(){if(h===f.currentUser)return f.queue((0,_.A)(function*(){return f.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(f=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,f,T,W){if(this._deleted)return()=>{};const ae="function"==typeof f?f:f.next.bind(f);let ke=!1;const Dt=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(Dt,this,"internal-error"),Dt.then(()=>{ke||ae(this.currentUser)}),"function"==typeof f){const Gt=h.addObserver(f,T,W);return()=>{ke=!0,Gt()}}{const Gt=h.addObserver(f);return()=>{ke=!0,Gt()}}}directlySetCurrentUser(h){var f=this;return(0,_.A)(function*(){f.currentUser&&f.currentUser!==h&&f._currentUser._stopProactiveRefresh(),h&&f.isProactiveRefreshEnabled&&h._startProactiveRefresh(),f.currentUser=h,h?yield f.assertedPersistence.setCurrentUser(h):yield f.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ln(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,_.A)(function*(){var f;const T={"X-Client-Version":h.clientVersion};h.app.options.appId&&(T["X-Firebase-gmpid"]=h.app.options.appId);const W=yield null===(f=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();W&&(T["X-Firebase-Client"]=W);const ae=yield h._getAppCheckToken();return ae&&(T["X-Firebase-AppCheck"]=ae),T})()}_getAppCheckToken(){var h=this;return(0,_.A)(function*(){var f;const T=yield null===(f=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return T?.error&&function Jt(E,...h){ot.logLevel<=w.$b.WARN&&ot.warn(`Auth (${V.SDK_VERSION}): ${E}`,...h)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function Ut(E){return(0,P.Ku)(E)}class xn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.tD)(f=>this.observer=f)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Cn={loadJS:()=>(0,_.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ti(E){return Cn.loadJS(E)}function Hi(E){return`__${E}${Math.floor(1e6*Math.random())}`}class ui{constructor(h){this.type="recaptcha-enterprise",this.auth=Ut(h)}verify(h="verify",f=!1){var T=this;return(0,_.A)(function*(){function ae(){return ae=(0,_.A)(function*(Dt){if(!f){if(null==Dt.tenantId&&null!=Dt._agentRecaptchaConfig)return Dt._agentRecaptchaConfig.siteKey;if(null!=Dt.tenantId&&void 0!==Dt._tenantRecaptchaConfigs[Dt.tenantId])return Dt._tenantRecaptchaConfigs[Dt.tenantId].siteKey}return new Promise(function(){var Gt=(0,_.A)(function*(Sn,zn){Rt(Dt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ar=>{if(void 0!==Ar.recaptchaKey){const go=new bt(Ar);return null==Dt.tenantId?Dt._agentRecaptchaConfig=go:Dt._tenantRecaptchaConfigs[Dt.tenantId]=go,Sn(go.siteKey)}zn(new Error("recaptcha Enterprise site key undefined"))}).catch(Ar=>{zn(Ar)})});return function(Sn,zn){return Gt.apply(this,arguments)}}())}),ae.apply(this,arguments)}function ke(Dt,Gt,Sn){const zn=window.grecaptcha;Xn(zn)?zn.enterprise.ready(()=>{zn.enterprise.execute(Dt,{action:h}).then(Ar=>{Gt(Ar)}).catch(()=>{Gt("NO_RECAPTCHA")})}):Sn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Dt,Gt)=>{(function W(Dt){return ae.apply(this,arguments)})(T.auth).then(Sn=>{if(!f&&Xn(window.grecaptcha))ke(Sn,Dt,Gt);else{if(typeof window>"u")return void Gt(new Error("RecaptchaVerifier is only supported in browser"));let zn=function ci(){return Cn.recaptchaEnterpriseScript}();0!==zn.length&&(zn+=Sn),ti(zn).then(()=>{ke(Sn,Dt,Gt)}).catch(Ar=>{Gt(Ar)})}}).catch(Sn=>{Gt(Sn)})})})()}}function cr(E,h,f){return _r.apply(this,arguments)}function _r(){return(_r=(0,_.A)(function*(E,h,f,T=!1){const W=new ui(E);let ae;try{ae=yield W.verify(f)}catch{ae=yield W.verify(f,!0)}const ke=Object.assign({},h);return Object.assign(ke,T?{captchaResp:ae}:{captchaResponse:ae}),Object.assign(ke,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ke,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ke})).apply(this,arguments)}function Yr(E,h,f,T){return ni.apply(this,arguments)}function ni(){return ni=(0,_.A)(function*(E,h,f,T){var W;if(null!==(W=E._getRecaptchaConfig())&&void 0!==W&&W.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const ae=yield cr(E,h,f,"getOobCode"===f);return T(E,ae)}return T(E,h).catch(function(){var ae=(0,_.A)(function*(ke){if("auth/missing-recaptcha-token"===ke.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Dt=yield cr(E,h,f,"getOobCode"===f);return T(E,Dt)}return Promise.reject(ke)});return function(ke){return ae.apply(this,arguments)}}())}),ni.apply(this,arguments)}function Qi(E,h,f){const T=Ut(E);le(T._canInitEmulator,T,"emulator-config-failed"),le(/^https?:\/\//.test(h),T,"invalid-emulator-scheme");const W=!!f?.disableWarnings,ae=ea(h),{host:ke,port:Dt}=function da(E){const h=ea(E),f=/(\/\/)?([^?#/]+)/.exec(E.substr(h.length));if(!f)return{host:"",port:null};const T=f[2].split("@").pop()||"",W=/^(\[[^\]]+\])(:|$)/.exec(T);if(W){const ae=W[1];return{host:ae,port:Ia(T.substr(ae.length+1))}}{const[ae,ke]=T.split(":");return{host:ae,port:Ia(ke)}}}(h);T.config.emulator={url:`${ae}//${ke}${null===Dt?"":`:${Dt}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:ke,port:Dt,protocol:ae.replace(":",""),options:Object.freeze({disableWarnings:W})}),W||function to(){function E(){const h=document.createElement("p"),f=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function ea(E){const h=E.indexOf(":");return h<0?"":E.substr(0,h+1)}function Ia(E){if(!E)return null;const h=Number(E);return isNaN(h)?null:h}class ar{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return Ge("not implemented")}_getIdTokenResponse(h){return Ge("not implemented")}_linkToIdToken(h,f){return Ge("not implemented")}_getReauthenticationResolver(h){return Ge("not implemented")}}function yo(E,h){return no.apply(this,arguments)}function no(){return(no=(0,_.A)(function*(E,h){return et(E,"POST","/v1/accounts:resetPassword",Et(E,h))})).apply(this,arguments)}function $o(){return($o=(0,_.A)(function*(E,h){return et(E,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Us(E,h){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,_.A)(function*(E,h){return et(E,"POST","/v1/accounts:signUp",h)})).apply(this,arguments)}function Nr(){return(Nr=(0,_.A)(function*(E,h){return et(E,"POST","/v1/accounts:update",Et(E,h))})).apply(this,arguments)}function ws(E,h){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,_.A)(function*(E,h){return an(E,"POST","/v1/accounts:signInWithPassword",Et(E,h))})).apply(this,arguments)}function Dr(E,h){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,_.A)(function*(E,h){return et(E,"POST","/v1/accounts:sendOobCode",Et(E,h))})).apply(this,arguments)}function Wr(){return(Wr=(0,_.A)(function*(E,h){return Dr(E,h)})).apply(this,arguments)}function So(E,h){return gi.apply(this,arguments)}function gi(){return(gi=(0,_.A)(function*(E,h){return Dr(E,h)})).apply(this,arguments)}function Ur(E,h){return ri.apply(this,arguments)}function ri(){return(ri=(0,_.A)(function*(E,h){return Dr(E,h)})).apply(this,arguments)}function hn(){return(hn=(0,_.A)(function*(E,h){return Dr(E,h)})).apply(this,arguments)}function js(){return(js=(0,_.A)(function*(E,h){return an(E,"POST","/v1/accounts:signInWithEmailLink",Et(E,h))})).apply(this,arguments)}function Ts(){return(Ts=(0,_.A)(function*(E,h){return an(E,"POST","/v1/accounts:signInWithEmailLink",Et(E,h))})).apply(this,arguments)}class Hs extends ar{constructor(h,f,T,W=null){super("password",T),this._email=h,this._password=f,this._tenantId=W}static _fromEmailAndPassword(h,f){return new Hs(h,f,"password")}static _fromEmailAndCode(h,f,T=null){return new Hs(h,f,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(h){var f=this;return(0,_.A)(function*(){switch(f.signInMethod){case"password":return Yr(h,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ws);case"emailLink":return function Di(E,h){return js.apply(this,arguments)}(h,{email:f._email,oobCode:f._password});default:We(h,"internal-error")}})()}_linkToIdToken(h,f){var T=this;return(0,_.A)(function*(){switch(T.signInMethod){case"password":return Yr(h,{idToken:f,returnSecureToken:!0,email:T._email,password:T._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Us);case"emailLink":return function $s(E,h){return Ts.apply(this,arguments)}(h,{idToken:f,email:T._email,oobCode:T._password});default:We(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Vi(E,h){return ii.apply(this,arguments)}function ii(){return(ii=(0,_.A)(function*(E,h){return an(E,"POST","/v1/accounts:signInWithIdp",Et(E,h))})).apply(this,arguments)}class li extends ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new li(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):We("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:T,signInMethod:W}=f,ae=(0,G.Tt)(f,["providerId","signInMethod"]);if(!T||!W)return null;const ke=new li(T,W);return ke.idToken=ae.idToken||void 0,ke.accessToken=ae.accessToken||void 0,ke.secret=ae.secret,ke.nonce=ae.nonce,ke.pendingToken=ae.pendingToken||null,ke}_getIdTokenResponse(h){return Vi(h,this.buildRequest())}_linkToIdToken(h,f){const T=this.buildRequest();return T.idToken=f,Vi(h,T)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Vi(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,P.Am)(f)}return h}}function io(){return(io=(0,_.A)(function*(E,h){return et(E,"POST","/v1/accounts:sendVerificationCode",Et(E,h))})).apply(this,arguments)}function vo(){return(vo=(0,_.A)(function*(E,h){return an(E,"POST","/v1/accounts:signInWithPhoneNumber",Et(E,h))})).apply(this,arguments)}function Ni(){return(Ni=(0,_.A)(function*(E,h){const f=yield an(E,"POST","/v1/accounts:signInWithPhoneNumber",Et(E,h));if(f.temporaryProof)throw In(E,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const so={USER_NOT_FOUND:"user-not-found"};function Ui(){return(Ui=(0,_.A)(function*(E,h){return an(E,"POST","/v1/accounts:signInWithPhoneNumber",Et(E,Object.assign(Object.assign({},h),{operation:"REAUTH"})),so)})).apply(this,arguments)}class ms extends ar{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new ms({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new ms({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function zi(E,h){return vo.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function is(E,h){return Ni.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Eo(E,h){return Ui.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:T,verificationCode:W}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:T,code:W}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:T,phoneNumber:W,temporaryProof:ae}=h;return T||f||W||ae?new ms({verificationId:f,verificationCode:T,phoneNumber:W,temporaryProof:ae}):null}}class ps{constructor(h){var f,T,W,ae,ke,Dt;const Gt=(0,P.I9)((0,P.hp)(h)),Sn=null!==(f=Gt.apiKey)&&void 0!==f?f:null,zn=null!==(T=Gt.oobCode)&&void 0!==T?T:null,Ar=function Vs(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(W=Gt.mode)&&void 0!==W?W:null);le(Sn&&zn&&Ar,"argument-error"),this.apiKey=Sn,this.operation=Ar,this.code=zn,this.continueUrl=null!==(ae=Gt.continueUrl)&&void 0!==ae?ae:null,this.languageCode=null!==(ke=Gt.languageCode)&&void 0!==ke?ke:null,this.tenantId=null!==(Dt=Gt.tenantId)&&void 0!==Dt?Dt:null}static parseLink(h){const f=function fs(E){const h=(0,P.I9)((0,P.hp)(E)).link,f=h?(0,P.I9)((0,P.hp)(h)).deep_link_id:null,T=(0,P.I9)((0,P.hp)(E)).deep_link_id;return(T?(0,P.I9)((0,P.hp)(T)).link:null)||T||f||h||E}(h);try{return new ps(f)}catch{return null}}}let Gs=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(f,T){return Hs._fromEmailAndPassword(f,T)}static credentialWithLink(f,T){const W=ps.parseLink(T);return le(W,"argument-error"),Hs._fromEmailAndCode(f,W.code,W.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class mi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Go extends mi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class zo extends Go{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return le("providerId"in f&&"signInMethod"in f,"argument-error"),li._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return le(h.idToken||h.accessToken,"argument-error"),li._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return zo.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return zo.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:T,oauthTokenSecret:W,pendingToken:ae,nonce:ke,providerId:Dt}=h;if(!T&&!W&&!f&&!ae||!Dt)return null;try{return new zo(Dt)._credential({idToken:f,accessToken:T,nonce:ke,pendingToken:ae})}catch{return null}}}let ls=(()=>{class E extends Go{constructor(){super("facebook.com")}static credential(f){return li._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return E.credential(f.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),Tr=(()=>{class E extends Go{constructor(){super("google.com"),this.addScope("profile")}static credential(f,T){return li._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:T})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:T,oauthAccessToken:W}=f;if(!T&&!W)return null;try{return E.credential(T,W)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),zs=(()=>{class E extends Go{constructor(){super("github.com")}static credential(f){return li._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return E.credential(f.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Kr extends ar{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return Vi(h,this.buildRequest())}_linkToIdToken(h,f){const T=this.buildRequest();return T.idToken=f,Vi(h,T)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,Vi(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:T,signInMethod:W,pendingToken:ae}=f;return T&&W&&ae&&T===W?new Kr(T,ae):null}static _create(h,f){return new Kr(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class dr extends mi{constructor(h){le(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return dr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return dr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const f=Kr.fromJSON(h);return le(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:f,providerId:T}=h;if(!f||!T)return null;try{return Kr._create(T,f)}catch{return null}}}let _s=(()=>{class E extends Go{constructor(){super("twitter.com")}static credential(f,T){return li._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:T})}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:T,oauthTokenSecret:W}=f;if(!T||!W)return null;try{return E.credential(T,W)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Ds(E,h){return Po.apply(this,arguments)}function Po(){return(Po=(0,_.A)(function*(E,h){return an(E,"POST","/v1/accounts:signUp",Et(E,h))})).apply(this,arguments)}class xi{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,T,W=!1){return(0,_.A)(function*(){const ae=yield pe._fromIdTokenResponse(h,T,W),ke=H(T);return new xi({user:ae,providerId:ke,_tokenResponse:T,operationType:f})})()}static _forOperation(h,f,T){return(0,_.A)(function*(){yield h._updateTokensIfNecessary(T,!0);const W=H(T);return new xi({user:h,providerId:W,_tokenResponse:T,operationType:f})})()}}function H(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function K(E){return O.apply(this,arguments)}function O(){return(O=(0,_.A)(function*(E){var h;if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(De(E));const f=Ut(E);if(yield f._initializationPromise,null!==(h=f.currentUser)&&void 0!==h&&h.isAnonymous)return new xi({user:f.currentUser,providerId:null,operationType:"signIn"});const T=yield Ds(f,{returnSecureToken:!0}),W=yield xi._fromIdTokenResponse(f,"signIn",T,!0);return yield f._updateCurrentUser(W.user),W})).apply(this,arguments)}class ee extends P.g{constructor(h,f,T,W){var ae;super(f.code,f.message),this.operationType=T,this.user=W,Object.setPrototypeOf(this,ee.prototype),this.customData={appName:h.name,tenantId:null!==(ae=h.tenantId)&&void 0!==ae?ae:void 0,_serverResponse:f.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(h,f,T,W){return new ee(h,f,T,W)}}function Se(E,h,f,T){return("reauthenticate"===h?f._getReauthenticationResolver(E):f._getIdTokenResponse(E)).catch(ae=>{throw"auth/multi-factor-auth-required"===ae.code?ee._fromErrorAndOperation(E,ae,h,T):ae})}function fn(E){return new Set(E.map(({providerId:h})=>h).filter(h=>!!h))}function ir(E,h){return As.apply(this,arguments)}function As(){return As=(0,_.A)(function*(E,h){const f=(0,P.Ku)(E);yield ao(!0,f,h);const{providerUserInfo:T}=yield function Yn(E,h){return Pn.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),W=fn(T||[]);return f.providerData=f.providerData.filter(ae=>W.has(ae.providerId)),W.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),As.apply(this,arguments)}function Ws(E,h){return di.apply(this,arguments)}function di(){return(di=(0,_.A)(function*(E,h,f=!1){const T=yield Wt(E,h._linkToIdToken(E.auth,yield E.getIdToken()),f);return xi._forOperation(E,"link",T)})).apply(this,arguments)}function ao(E,h,f){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,_.A)(function*(E,h,f){yield Xr(h);const W=!1===E?"provider-already-linked":"no-such-provider";le(fn(h.providerData).has(f)===E,h.auth,W)})).apply(this,arguments)}function Ya(E,h){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,_.A)(function*(E,h,f=!1){const{auth:T}=E;if((0,V._isFirebaseServerApp)(T.app))return Promise.reject(De(T));const W="reauthenticate";try{const ae=yield Wt(E,Se(T,W,h,E),f);le(ae.idToken,T,"internal-error");const ke=Ln(ae.idToken);le(ke,T,"internal-error");const{sub:Dt}=ke;return le(E.uid===Dt,T,"user-mismatch"),xi._forOperation(E,W,ae)}catch(ae){throw"auth/user-not-found"===ae?.code&&We(T,"user-mismatch"),ae}})).apply(this,arguments)}function Zr(E,h){return ka.apply(this,arguments)}function ka(){return(ka=(0,_.A)(function*(E,h,f=!1){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(De(E));const T="signIn",W=yield Se(E,T,h),ae=yield xi._fromIdTokenResponse(E,T,W);return f||(yield E._updateCurrentUser(ae.user)),ae})).apply(this,arguments)}function wa(E,h){return re.apply(this,arguments)}function re(){return(re=(0,_.A)(function*(E,h){return Zr(Ut(E),h)})).apply(this,arguments)}function C(E,h){return S.apply(this,arguments)}function S(){return(S=(0,_.A)(function*(E,h){const f=(0,P.Ku)(E);return yield ao(!1,f,h.providerId),Ws(f,h)})).apply(this,arguments)}function L(E,h){return Z.apply(this,arguments)}function Z(){return(Z=(0,_.A)(function*(E,h){return Ya((0,P.Ku)(E),h)})).apply(this,arguments)}function be(){return(be=(0,_.A)(function*(E,h){return an(E,"POST","/v1/accounts:signInWithCustomToken",Et(E,h))})).apply(this,arguments)}function Le(E,h){return _t.apply(this,arguments)}function _t(){return _t=(0,_.A)(function*(E,h){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(De(E));const f=Ut(E),T=yield function de(E,h){return be.apply(this,arguments)}(f,{token:h,returnSecureToken:!0}),W=yield xi._fromIdTokenResponse(f,"signIn",T);return yield f._updateCurrentUser(W.user),W}),_t.apply(this,arguments)}class St{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?$t._fromServerResponse(h,f):"totpInfo"in f?Zt._fromServerResponse(h,f):We(h,"internal-error")}}class $t extends St{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new $t(f)}}class Zt extends St{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new Zt(f)}}function kn(E,h,f){var T;le((null===(T=f.url)||void 0===T?void 0:T.length)>0,E,"invalid-continue-uri"),le(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(le(f.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(le(f.android.packageName.length>0,E,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function On(E){return _n.apply(this,arguments)}function _n(){return(_n=(0,_.A)(function*(E){const h=Ut(E);h._getPasswordPolicyInternal()&&(yield h._updatePasswordPolicy())})).apply(this,arguments)}function Zn(E,h,f){return yr.apply(this,arguments)}function yr(){return(yr=(0,_.A)(function*(E,h,f){const T=Ut(E),W={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};f&&kn(T,W,f),yield Yr(T,W,"getOobCode",So)})).apply(this,arguments)}function wr(E,h,f){return Bi.apply(this,arguments)}function Bi(){return Bi=(0,_.A)(function*(E,h,f){yield yo((0,P.Ku)(E),{oobCode:h,newPassword:f}).catch(function(){var T=(0,_.A)(function*(W){throw"auth/password-does-not-meet-requirements"===W.code&&On(E),W});return function(W){return T.apply(this,arguments)}}())}),Bi.apply(this,arguments)}function gs(E,h){return hi.apply(this,arguments)}function hi(){return hi=(0,_.A)(function*(E,h){yield function Cs(E,h){return Nr.apply(this,arguments)}((0,P.Ku)(E),{oobCode:h})}),hi.apply(this,arguments)}function bs(E,h){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,_.A)(function*(E,h){const f=(0,P.Ku)(E),T=yield yo(f,{oobCode:h}),W=T.requestType;switch(le(W,f,"internal-error"),W){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(T.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(T.mfaInfo,f,"internal-error");default:le(T.email,f,"internal-error")}let ae=null;return T.mfaInfo&&(ae=St._fromServerResponse(Ut(f),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:ae},operation:W}})).apply(this,arguments)}function Ki(E,h){return _i.apply(this,arguments)}function _i(){return(_i=(0,_.A)(function*(E,h){const{data:f}=yield bs((0,P.Ku)(E),h);return f.email})).apply(this,arguments)}function co(E,h,f){return uo.apply(this,arguments)}function uo(){return(uo=(0,_.A)(function*(E,h,f){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(De(E));const T=Ut(E),ke=yield Yr(T,{returnSecureToken:!0,email:h,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ds).catch(Gt=>{throw"auth/password-does-not-meet-requirements"===Gt.code&&On(E),Gt}),Dt=yield xi._fromIdTokenResponse(T,"signIn",ke);return yield T._updateCurrentUser(Dt.user),Dt})).apply(this,arguments)}function Za(E,h,f){return(0,V._isFirebaseServerApp)(E.app)?Promise.reject(De(E)):wa((0,P.Ku)(E),Gs.credential(h,f)).catch(function(){var T=(0,_.A)(function*(W){throw"auth/password-does-not-meet-requirements"===W.code&&On(E),W});return function(W){return T.apply(this,arguments)}}())}function Mo(E,h,f){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,_.A)(function*(E,h,f){const T=Ut(E),W={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};(function ae(ke,Dt){le(Dt.handleCodeInApp,T,"argument-error"),Dt&&kn(T,ke,Dt)})(W,f),yield Yr(T,W,"getOobCode",Ur)})).apply(this,arguments)}function fa(E,h){const f=ps.parseLink(h);return"EMAIL_SIGNIN"===f?.operation}function ki(E,h,f){return bn.apply(this,arguments)}function bn(){return(bn=(0,_.A)(function*(E,h,f){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(De(E));const T=(0,P.Ku)(E),W=Gs.credentialWithLink(h,f||zt());return le(W._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),wa(T,W)})).apply(this,arguments)}function Hn(){return(Hn=(0,_.A)(function*(E,h){return et(E,"POST","/v1/accounts:createAuthUri",Et(E,h))})).apply(this,arguments)}function hr(E,h){return Ai.apply(this,arguments)}function Ai(){return Ai=(0,_.A)(function*(E,h){const T={identifier:h,continueUri:Pt()?zt():"http://localhost"},{signinMethods:W}=yield function Fn(E,h){return Hn.apply(this,arguments)}((0,P.Ku)(E),T);return W||[]}),Ai.apply(this,arguments)}function ss(E,h){return si.apply(this,arguments)}function si(){return si=(0,_.A)(function*(E,h){const f=(0,P.Ku)(E),W={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};h&&kn(f.auth,W,h);const{email:ae}=yield function ro(E,h){return Wr.apply(this,arguments)}(f.auth,W);ae!==E.email&&(yield E.reload())}),si.apply(this,arguments)}function Ps(E,h,f){return wn.apply(this,arguments)}function wn(){return wn=(0,_.A)(function*(E,h,f){const T=(0,P.Ku)(E),ae={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:h};f&&kn(T.auth,ae,f);const{email:ke}=yield function us(E,h){return hn.apply(this,arguments)}(T.auth,ae);ke!==E.email&&(yield E.reload())}),wn.apply(this,arguments)}function Ta(){return(Ta=(0,_.A)(function*(E,h){return et(E,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Yi(E,h){return ys.apply(this,arguments)}function ys(){return ys=(0,_.A)(function*(E,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const T=(0,P.Ku)(E),ae={idToken:yield T.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},ke=yield Wt(T,function Tc(E,h){return Ta.apply(this,arguments)}(T.auth,ae));T.displayName=ke.displayName||null,T.photoURL=ke.photoUrl||null;const Dt=T.providerData.find(({providerId:Gt})=>"password"===Gt);Dt&&(Dt.displayName=T.displayName,Dt.photoURL=T.photoURL),yield T._updateTokensIfNecessary(ke)}),ys.apply(this,arguments)}function Ms(E,h){const f=(0,P.Ku)(E);return(0,V._isFirebaseServerApp)(f.auth.app)?Promise.reject(De(f.auth)):Fa(f,h,null)}function ta(E,h){return Fa((0,P.Ku)(E),null,h)}function Fa(E,h,f){return ec.apply(this,arguments)}function ec(){return ec=(0,_.A)(function*(E,h,f){const{auth:T}=E,ae={idToken:yield E.getIdToken(),returnSecureToken:!0};h&&(ae.email=h),f&&(ae.password=f);const ke=yield Wt(E,function Cr(E,h){return $o.apply(this,arguments)}(T,ae));yield E._updateTokensIfNecessary(ke,!0)}),ec.apply(this,arguments)}class lo{constructor(h,f,T={}){this.isNewUser=h,this.providerId=f,this.profile=T}}class Ro extends lo{constructor(h,f,T,W){super(h,f,T),this.username=W}}class b extends lo{constructor(h,f){super(h,"facebook.com",f)}}class X extends Ro{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class F extends lo{constructor(h,f){super(h,"google.com",f)}}class $ extends Ro{constructor(h,f,T){super(h,"twitter.com",f,T)}}function Ce(E){const{user:h,_tokenResponse:f}=E;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Wo(E){var h,f;if(!E)return null;const{providerId:T}=E,W=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},ae=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!T&&E?.idToken){const ke=null===(f=null===(h=Ln(E.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(ke)return new lo(ae,"anonymous"!==ke&&"custom"!==ke?ke:null)}if(!T)return null;switch(T){case"facebook.com":return new b(ae,W);case"github.com":return new X(ae,W);case"google.com":return new F(ae,W);case"twitter.com":return new $(ae,W,E.screenName||null);case"custom":case"anonymous":return new lo(ae,null);default:return new lo(ae,T,W)}}(f)}class gr{constructor(h,f,T){this.type=h,this.credential=f,this.user=T}static _fromIdtoken(h,f){return new gr("enroll",h,f)}static _fromMfaPendingCredential(h){return new gr("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,T;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return gr._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(T=h.multiFactorSession)&&void 0!==T&&T.idToken)return gr._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Si{constructor(h,f,T){this.session=h,this.hints=f,this.signInResolver=T}static _fromError(h,f){const T=Ut(h),W=f.customData._serverResponse,ae=(W.mfaInfo||[]).map(Dt=>St._fromServerResponse(T,Dt));le(W.mfaPendingCredential,T,"internal-error");const ke=gr._fromMfaPendingCredential(W.mfaPendingCredential);return new Si(ke,ae,function(){var Dt=(0,_.A)(function*(Gt){const Sn=yield Gt._process(T,ke);delete W.mfaInfo,delete W.mfaPendingCredential;const zn=Object.assign(Object.assign({},W),{idToken:Sn.idToken,refreshToken:Sn.refreshToken});switch(f.operationType){case"signIn":const Ar=yield xi._fromIdTokenResponse(T,f.operationType,zn);return yield T._updateCurrentUser(Ar.user),Ar;case"reauthenticate":return le(f.user,T,"internal-error"),xi._forOperation(f.user,f.operationType,zn);default:We(T,"internal-error")}});return function(Gt){return Dt.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,_.A)(function*(){return f.signInResolver(h)})()}}function vi(E,h){var f;const T=(0,P.Ku)(E),W=h;return le(h.customData.operationType,T,"argument-error"),le(null===(f=W.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,T,"argument-error"),Si._fromError(T,W)}class sr{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(T=>St._fromServerResponse(h.auth,T)))})}static _fromUser(h){return new sr(h)}getSession(){var h=this;return(0,_.A)(function*(){return gr._fromIdtoken(yield h.user.getIdToken(),h.user)})()}enroll(h,f){var T=this;return(0,_.A)(function*(){const W=h,ae=yield T.getSession(),ke=yield Wt(T.user,W._process(T.user.auth,ae,f));return yield T.user._updateTokensIfNecessary(ke),T.user.reload()})()}unenroll(h){var f=this;return(0,_.A)(function*(){const T="string"==typeof h?h:h.uid,W=yield f.user.getIdToken();try{const ae=yield Wt(f.user,function Io(E,h){return et(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Et(E,h))}(f.user.auth,{idToken:W,mfaEnrollmentId:T}));f.enrolledFactors=f.enrolledFactors.filter(({uid:ke})=>ke!==T),yield f.user._updateTokensIfNecessary(ae),yield f.user.reload()}catch(ae){throw ae}})()}}const Ko=new WeakMap;function El(E){const h=(0,P.Ku)(E);return Ko.has(h)||Ko.set(h,sr._fromUser(h)),Ko.get(h)}const fi="__sak";class Gn{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(fi,"1"),this.storage.removeItem(fi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const pa=(()=>{class E extends Gn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,T)=>this.onStorageEvent(f,T),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kt(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const T of Object.keys(this.listeners)){const W=this.storage.getItem(T),ae=this.localCache[T];W!==ae&&f(T,ae,W)}}onStorageEvent(f,T=!1){if(!f.key)return void this.forAllChangedKeys((Dt,Gt,Sn)=>{this.notifyListeners(Dt,Sn)});const W=f.key;T?this.detachListener():this.stopPolling();const ae=()=>{const Dt=this.storage.getItem(W);!T&&this.localCache[W]===Dt||this.notifyListeners(W,Dt)},ke=this.storage.getItem(W);!function tt(){return(0,P.lT)()&&10===document.documentMode}()||ke===f.newValue||f.newValue===f.oldValue?ae():setTimeout(ae,10)}notifyListeners(f,T){this.localCache[f]=T;const W=this.listeners[f];if(W)for(const ae of Array.from(W))ae(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,T,W)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:T,newValue:W}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(T)}_removeListener(f,T){this.listeners[f]&&(this.listeners[f].delete(T),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,T){var W=()=>super._set,ae=this;return(0,_.A)(function*(){yield W().call(ae,f,T),ae.localCache[f]=JSON.stringify(T)})()}_get(f){var T=()=>super._get,W=this;return(0,_.A)(function*(){const ae=yield T().call(W,f);return W.localCache[f]=JSON.stringify(ae),ae})()}_remove(f){var T=()=>super._remove,W=this;return(0,_.A)(function*(){yield T().call(W,f),delete W.localCache[f]})()}}return E.type="LOCAL",E})(),na=(()=>{class E extends Gn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,T){}_removeListener(f,T){}}return E.type="SESSION",E})();let vs=(()=>{class E{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const T=this.receivers.find(ae=>ae.isListeningto(f));if(T)return T;const W=new E(f);return this.receivers.push(W),W}isListeningto(f){return this.eventTarget===f}handleEvent(f){var T=this;return(0,_.A)(function*(){const W=f,{eventId:ae,eventType:ke,data:Dt}=W.data,Gt=T.handlersMap[ke];if(!Gt?.size)return;W.ports[0].postMessage({status:"ack",eventId:ae,eventType:ke});const Sn=Array.from(Gt).map(function(){var Ar=(0,_.A)(function*(go){return go(W.origin,Dt)});return function(go){return Ar.apply(this,arguments)}}()),zn=yield function nc(E){return Promise.all(E.map(function(){var h=(0,_.A)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(T){return{fulfilled:!1,reason:T}}});return function(f){return h.apply(this,arguments)}}()))}(Sn);W.ports[0].postMessage({status:"done",eventId:ae,eventType:ke,response:zn})})()}_subscribe(f,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(T)}_unsubscribe(f,T){this.handlersMap[f]&&T&&this.handlersMap[f].delete(T),(!T||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function tr(E="",h=10){let f="";for(let T=0;T<h;T++)f+=Math.floor(10*Math.random());return E+f}class rc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,f,T=50){var W=this;return(0,_.A)(function*(){const ae=typeof MessageChannel<"u"?new MessageChannel:null;if(!ae)throw new Error("connection_unavailable");let ke,Dt;return new Promise((Gt,Sn)=>{const zn=tr("",20);ae.port1.start();const Ar=setTimeout(()=>{Sn(new Error("unsupported_event"))},T);Dt={messageChannel:ae,onMessage(go){const Pa=go;if(Pa.data.eventId===zn)switch(Pa.data.status){case"ack":clearTimeout(Ar),ke=setTimeout(()=>{Sn(new Error("timeout"))},3e3);break;case"done":clearTimeout(ke),Gt(Pa.data.response);break;default:clearTimeout(Ar),clearTimeout(ke),Sn(new Error("invalid_response"))}}},W.handlers.add(Dt),ae.port1.addEventListener("message",Dt.onMessage),W.target.postMessage({eventType:h,eventId:zn,data:f},[ae.port2])}).finally(()=>{Dt&&W.removeMessageHandler(Dt)})})()}}function Ii(){return window}function Da(){return typeof Ii().WorkerGlobalScope<"u"&&"function"==typeof Ii().importScripts}function Pi(){return(Pi=(0,_.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Os="firebaseLocalStorageDb",ra="firebaseLocalStorage",qc="fbase_key";class ho{constructor(h){this.request=h}toPromise(){return new Promise((h,f)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function Va(E,h){return E.transaction([ra],h?"readwrite":"readonly").objectStore(ra)}function Qc(){const E=indexedDB.open(Os,1);return new Promise((h,f)=>{E.addEventListener("error",()=>{f(E.error)}),E.addEventListener("upgradeneeded",()=>{const T=E.result;try{T.createObjectStore(ra,{keyPath:qc})}catch(W){f(W)}}),E.addEventListener("success",(0,_.A)(function*(){const T=E.result;T.objectStoreNames.contains(ra)?h(T):(T.close(),yield function ic(){const E=indexedDB.deleteDatabase(Os);return new ho(E).toPromise()}(),h(yield Qc()))}))})}function Pu(E,h,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,_.A)(function*(E,h,f){const T=Va(E,!0).put({[qc]:h,value:f});return new ho(T).toPromise()})).apply(this,arguments)}function La(){return(La=(0,_.A)(function*(E,h){const f=Va(E,!1).get(h),T=yield new ho(f).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function Cl(E,h){const f=Va(E,!0).delete(h);return new ho(f).toPromise()}const wl=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,_.A)(function*(){return f.db||(f.db=yield Qc()),f.db})()}_withRetries(f){var T=this;return(0,_.A)(function*(){let W=0;for(;;)try{const ae=yield T._openDb();return yield f(ae)}catch(ae){if(W++>3)throw ae;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,_.A)(function*(){return Da()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,_.A)(function*(){f.receiver=vs._getInstance(function Rs(){return Da()?self:null}()),f.receiver._subscribe("keyChanged",function(){var T=(0,_.A)(function*(W,ae){return{keyProcessed:(yield f._poll()).includes(ae.key)}});return function(W,ae){return T.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var T=(0,_.A)(function*(W,ae){return["keyChanged"]});return function(W,ae){return T.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,_.A)(function*(){var T,W;if(f.activeServiceWorker=yield function Aa(){return Pi.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new rc(f.activeServiceWorker);const ae=yield f.sender._send("ping",{},800);ae&&null!==(T=ae[0])&&void 0!==T&&T.fulfilled&&null!==(W=ae[0])&&void 0!==W&&W.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var T=this;return(0,_.A)(function*(){if(T.sender&&T.activeServiceWorker&&function Su(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:f},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.A)(function*(){try{if(!indexedDB)return!1;const f=yield Qc();return yield Pu(f,fi,"1"),yield Cl(f,fi),!0}catch{}return!1})()}_withPendingWrite(f){var T=this;return(0,_.A)(function*(){T.pendingWrites++;try{yield f()}finally{T.pendingWrites--}})()}_set(f,T){var W=this;return(0,_.A)(function*(){return W._withPendingWrite((0,_.A)(function*(){return yield W._withRetries(ae=>Pu(ae,f,T)),W.localCache[f]=T,W.notifyServiceWorker(f)}))})()}_get(f){var T=this;return(0,_.A)(function*(){const W=yield T._withRetries(ae=>function Mu(E,h){return La.apply(this,arguments)}(ae,f));return T.localCache[f]=W,W})()}_remove(f){var T=this;return(0,_.A)(function*(){return T._withPendingWrite((0,_.A)(function*(){return yield T._withRetries(W=>Cl(W,f)),delete T.localCache[f],T.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,_.A)(function*(){const T=yield f._withRetries(ke=>{const Dt=Va(ke,!1).getAll();return new ho(Dt).toPromise()});if(!T)return[];if(0!==f.pendingWrites)return[];const W=[],ae=new Set;if(0!==T.length)for(const{fbase_key:ke,value:Dt}of T)ae.add(ke),JSON.stringify(f.localCache[ke])!==JSON.stringify(Dt)&&(f.notifyListeners(ke,Dt),W.push(ke));for(const ke of Object.keys(f.localCache))f.localCache[ke]&&!ae.has(ke)&&(f.notifyListeners(ke,null),W.push(ke));return W})()}notifyListeners(f,T){this.localCache[f]=T;const W=this.listeners[f];if(W)for(const ae of Array.from(W))ae(T)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,_.A)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(T)}_removeListener(f,T){this.listeners[f]&&(this.listeners[f].delete(T),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),Tl=1e12;class Ou{constructor(h){this.auth=h,this.counter=Tl,this._widgets=new Map}render(h,f){const T=this.counter;return this._widgets.set(T,new Nu(h,this.auth.name,f||{})),this.counter++,T}reset(h){var f;const T=h||Tl;null===(f=this._widgets.get(T))||void 0===f||f.delete(),this._widgets.delete(T)}getResponse(h){var f;return(null===(f=this._widgets.get(h||Tl))||void 0===f?void 0:f.getResponse())||""}execute(h){var f=this;return(0,_.A)(function*(){var T;return null===(T=f._widgets.get(h||Tl))||void 0===T||T.execute(),""})()}}class Nu{constructor(h,f,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const W="string"==typeof h?document.getElementById(h):h;le(W,"argument-error",{appName:f}),this.container=W,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function v(E){const h=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<E;T++)h.push(f.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":f}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const M=Hi("rcb"),I=new Tn(3e4,6e4);class R{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Ii().grecaptcha)||void 0===h||!h.render)}load(h,f=""){return le(function B(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(f),h,"argument-error"),this.shouldResolveImmediately(f)&&Qn(Ii().grecaptcha)?Promise.resolve(Ii().grecaptcha):new Promise((T,W)=>{const ae=Ii().setTimeout(()=>{W(Y(h,"network-request-failed"))},I.get());Ii()[M]=()=>{Ii().clearTimeout(ae),delete Ii()[M];const Dt=Ii().grecaptcha;if(!Dt||!Qn(Dt))return void W(Y(h,"internal-error"));const Gt=Dt.render;Dt.render=(Sn,zn)=>{const Ar=Gt(Sn,zn);return this.counter++,Ar},this.hostLanguage=f,T(Dt)},ti(`${function mr(){return Cn.recaptchaV2Script}()}?${(0,P.Am)({onload:M,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(ae),W(Y(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var f;return!(null===(f=Ii().grecaptcha)||void 0===f||!f.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ne{load(h){return(0,_.A)(function*(){return new Ou(h)})()}clearedOneInstance(){}}const we="recaptcha",wt={theme:"light",type:"image"};class dt{constructor(h,f,T=Object.assign({},wt)){this.parameters=T,this.type=we,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ut(h),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const W="string"==typeof f?document.getElementById(f):f;le(W,this.auth,"argument-error"),this.container=W,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ne:new R,this.validateStartingState()}verify(){var h=this;return(0,_.A)(function*(){h.assertNotDestroyed();const f=yield h.render(),T=h.getAssertedRecaptcha();return T.getResponse(f)||new Promise(ae=>{const ke=Dt=>{Dt&&(h.tokenChangeListeners.delete(ke),ae(Dt))};h.tokenChangeListeners.add(ke),h.isInvisible&&T.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return f=>{if(this.tokenChangeListeners.forEach(T=>T(f)),"function"==typeof h)h(f);else if("string"==typeof h){const T=Ii()[h];"function"==typeof T&&T(f)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,_.A)(function*(){if(yield h.init(),!h.widgetId){let f=h.container;if(!h.isInvisible){const T=document.createElement("div");f.appendChild(T),f=T}h.widgetId=h.getAssertedRecaptcha().render(f,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,_.A)(function*(){le(Pt()&&!Da(),h.auth,"internal-error"),yield function gn(){let E=null;return new Promise(h=>{"complete"!==document.readyState?(E=()=>h(),window.addEventListener("load",E)):h()}).catch(h=>{throw E&&window.removeEventListener("load",E),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const f=yield function pt(E){return jr.apply(this,arguments)}(h.auth);le(f,h.auth,"internal-error"),h.parameters.sitekey=f})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class or{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=ms._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function fr(E,h,f){return ji.apply(this,arguments)}function ji(){return(ji=(0,_.A)(function*(E,h,f){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(De(E));const T=Ut(E),W=yield Qo(T,h,(0,P.Ku)(f));return new or(W,ae=>wa(T,ae))})).apply(this,arguments)}function Ac(E,h,f){return ia.apply(this,arguments)}function ia(){return(ia=(0,_.A)(function*(E,h,f){const T=(0,P.Ku)(E);yield ao(!1,T,"phone");const W=yield Qo(T.auth,h,(0,P.Ku)(f));return new or(W,ae=>C(T,ae))})).apply(this,arguments)}function Co(E,h,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,_.A)(function*(E,h,f){const T=(0,P.Ku)(E);if((0,V._isFirebaseServerApp)(T.auth.app))return Promise.reject(De(T.auth));const W=yield Qo(T.auth,h,(0,P.Ku)(f));return new or(W,ae=>L(T,ae))})).apply(this,arguments)}function Qo(E,h,f){return xu.apply(this,arguments)}function xu(){return xu=(0,_.A)(function*(E,h,f){var T;const W=yield f.verify();try{let ae;if(le("string"==typeof W,E,"argument-error"),le(f.type===we,E,"argument-error"),ae="string"==typeof h?{phoneNumber:h}:h,"session"in ae){const ke=ae.session;if("phoneNumber"in ae)return le("enroll"===ke.type,E,"internal-error"),(yield function os(E,h){return et(E,"POST","/v2/accounts/mfaEnrollment:start",Et(E,h))}(E,{idToken:ke.credential,phoneEnrollmentInfo:{phoneNumber:ae.phoneNumber,recaptchaToken:W}})).phoneSessionInfo.sessionInfo;{le("signin"===ke.type,E,"internal-error");const Dt=(null===(T=ae.multiFactorHint)||void 0===T?void 0:T.uid)||ae.multiFactorUid;return le(Dt,E,"missing-multi-factor-info"),(yield function Ru(E,h){return et(E,"POST","/v2/accounts/mfaSignIn:start",Et(E,h))}(E,{mfaPendingCredential:ke.credential,mfaEnrollmentId:Dt,phoneSignInInfo:{recaptchaToken:W}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ke}=yield function Gi(E,h){return io.apply(this,arguments)}(E,{phoneNumber:ae.phoneNumber,recaptchaToken:W});return ke}}finally{f._reset()}}),xu.apply(this,arguments)}function ku(E,h){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,_.A)(function*(E,h){const f=(0,P.Ku)(E);if((0,V._isFirebaseServerApp)(f.auth.app))return Promise.reject(De(f.auth));yield Ws(f,h)})).apply(this,arguments)}let Yc=(()=>{class E{constructor(f){this.providerId=E.PROVIDER_ID,this.auth=Ut(f)}verifyPhoneNumber(f,T){return Qo(this.auth,f,(0,P.Ku)(T))}static credential(f,T){return ms._fromVerification(f,T)}static credentialFromResult(f){return E.credentialFromTaggedObject(f)}static credentialFromError(f){return E.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:T,temporaryProof:W}=f;return T&&W?ms._fromTokenResponse(T,W):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Mr(E,h){return h?xt(h):(le(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Ba extends ar{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Vi(h,this._buildIdpRequest())}_linkToIdToken(h,f){return Vi(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return Vi(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function Jc(E){return Zr(E.auth,new Ba(E),E.bypassAuthState)}function Qs(E){const{auth:h,user:f}=E;return le(f,h,"internal-error"),Ya(f,new Ba(E),E.bypassAuthState)}function Id(E){return sc.apply(this,arguments)}function sc(){return(sc=(0,_.A)(function*(E){const{auth:h,user:f}=E;return le(f,h,"internal-error"),Ws(f,new Ba(E),E.bypassAuthState)})).apply(this,arguments)}class oc{constructor(h,f,T,W,ae=!1){this.auth=h,this.resolver=T,this.user=W,this.bypassAuthState=ae,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,_.A)(function*(T,W){h.pendingPromise={resolve:T,reject:W};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(ae){h.reject(ae)}});return function(T,W){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,_.A)(function*(){const{urlResponse:T,sessionId:W,postBody:ae,tenantId:ke,error:Dt,type:Gt}=h;if(Dt)return void f.reject(Dt);const Sn={auth:f.auth,requestUri:T,sessionId:W,tenantId:ke||void 0,postBody:ae||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Gt)(Sn))}catch(zn){f.reject(zn)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Jc;case"linkViaPopup":case"linkViaRedirect":return Id;case"reauthViaPopup":case"reauthViaRedirect":return Qs;default:We(this.auth,"internal-error")}}resolve(h){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xo=new Tn(2e3,1e4);function ef(E,h,f){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,_.A)(function*(E,h,f){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(Y(E,"operation-not-supported-in-this-environment"));const T=Ut(E);rt(E,h,mi);const W=Mr(T,f);return new Al(T,"signInViaPopup",h,W).executeNotNull()})).apply(this,arguments)}function Dl(E,h,f){return fo.apply(this,arguments)}function fo(){return(fo=(0,_.A)(function*(E,h,f){const T=(0,P.Ku)(E);if((0,V._isFirebaseServerApp)(T.auth.app))return Promise.reject(Y(T.auth,"operation-not-supported-in-this-environment"));rt(T.auth,h,mi);const W=Mr(T.auth,f);return new Al(T.auth,"reauthViaPopup",h,W,T).executeNotNull()})).apply(this,arguments)}function tf(E,h,f){return ja.apply(this,arguments)}function ja(){return(ja=(0,_.A)(function*(E,h,f){const T=(0,P.Ku)(E);rt(T.auth,h,mi);const W=Mr(T.auth,f);return new Al(T.auth,"linkViaPopup",h,W,T).executeNotNull()})).apply(this,arguments)}let Al=(()=>{class E extends oc{constructor(f,T,W,ae,ke){super(f,T,ae,ke),this.provider=W,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var f=this;return(0,_.A)(function*(){const T=yield f.execute();return le(T,f.auth,"internal-error"),T})()}onExecution(){var f=this;return(0,_.A)(function*(){Je(1===f.filter.length,"Popup operations only handle one event");const T=tr();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],T),f.authWindow.associatedEvent=T,f.resolver._originValidation(f.auth).catch(W=>{f.reject(W)}),f.resolver._isIframeWebStorageSupported(f.auth,W=>{W||f.reject(Y(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Y(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const f=()=>{var T,W;this.pollId=null!==(W=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==W&&W.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Y(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,Xo.get())};f()}}return E.currentPopupAction=null,E})();const bl="pendingRedirect",bc=new Map;class Fu extends oc{constructor(h,f,T=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,T),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,_.A)(function*(){let T=bc.get(f.auth._key());if(!T){try{const ae=(yield function Sl(E,h){return $a.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;T=()=>Promise.resolve(ae)}catch(W){T=()=>Promise.reject(W)}bc.set(f.auth._key(),T)}return f.bypassAuthState||bc.set(f.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,T=this;return(0,_.A)(function*(){if("signInViaRedirect"===h.type)return f().call(T,h);if("unknown"!==h.type){if(h.eventId){const W=yield T.auth._redirectUserForId(h.eventId);if(W)return T.user=W,f().call(T,h);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,_.A)(function*(){})()}cleanUp(){}}function $a(){return($a=(0,_.A)(function*(E,h){const f=rf(h),T=wd(E);if(!(yield T._isAvailable()))return!1;const W="true"===(yield T._get(f));return yield T._remove(f),W})).apply(this,arguments)}function wo(E,h){return qn.apply(this,arguments)}function qn(){return(qn=(0,_.A)(function*(E,h){return wd(E)._set(rf(h),"true")})).apply(this,arguments)}function Cd(){bc.clear()}function nf(E,h){bc.set(E._key(),h)}function wd(E){return xt(E._redirectPersistence)}function rf(E){return Jn(bl,E.config.apiKey,E.name)}function Td(E,h,f){return function Pl(E,h,f){return Ha.apply(this,arguments)}(E,h,f)}function Ha(){return(Ha=(0,_.A)(function*(E,h,f){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(De(E));const T=Ut(E);rt(E,h,mi),yield T._initializationPromise;const W=Mr(T,f);return yield wo(W,T),W._openRedirect(T,h,"signInViaRedirect")})).apply(this,arguments)}function Dd(E,h,f){return function Ad(E,h,f){return Ml.apply(this,arguments)}(E,h,f)}function Ml(){return(Ml=(0,_.A)(function*(E,h,f){const T=(0,P.Ku)(E);if(rt(T.auth,h,mi),(0,V._isFirebaseServerApp)(T.auth.app))return Promise.reject(De(T.auth));yield T.auth._initializationPromise;const W=Mr(T.auth,f);yield wo(W,T.auth);const ae=yield Sc(T);return W._openRedirect(T.auth,h,"reauthViaRedirect",ae)})).apply(this,arguments)}function Rl(E,h,f){return function Kp(E,h,f){return Ft.apply(this,arguments)}(E,h,f)}function Ft(){return(Ft=(0,_.A)(function*(E,h,f){const T=(0,P.Ku)(E);rt(T.auth,h,mi),yield T.auth._initializationPromise;const W=Mr(T.auth,f);yield ao(!1,T,h.providerId),yield wo(W,T.auth);const ae=yield Sc(T);return W._openRedirect(T.auth,h,"linkViaRedirect",ae)})).apply(this,arguments)}function Rr(E,h){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,_.A)(function*(E,h){return yield Ut(E)._initializationPromise,Vu(E,h,!1)})).apply(this,arguments)}function Vu(E,h){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,_.A)(function*(E,h,f=!1){if((0,V._isFirebaseServerApp)(E.app))return Promise.reject(De(E));const T=Ut(E),W=Mr(T,h),ke=yield new Fu(T,W,f).execute();return ke&&!f&&(delete ke.user._redirectEventId,yield T._persistUserIfCurrent(ke.user),yield T._setRedirectUser(null,h)),ke})).apply(this,arguments)}function Sc(E){return sa.apply(this,arguments)}function sa(){return(sa=(0,_.A)(function*(E){const h=tr(`${E.uid}:::`);return E._redirectEventId=h,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),h})).apply(this,arguments)}class Lu{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(h,T)&&(f=!0,this.sendToConsumer(h,T),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Sd(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bd(E);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var T;if(h.error&&!bd(h)){const W=(null===(T=h.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";f.onError(Y(this.auth,W))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const T=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&T}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ns(h))}saveEventToCache(h){this.cachedEventUids.add(Ns(h)),this.lastProcessedEventTime=Date.now()}}function Ns(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(h=>h).join("-")}function bd({type:E,error:h}){return"unknown"===E&&"auth/no-auth-event"===h?.code}function eu(E){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,_.A)(function*(E,h={}){return et(E,"GET","/v1/projects",h)})).apply(this,arguments)}const po=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pc=/^https?/;function Xs(){return(Xs=(0,_.A)(function*(E){if(E.config.emulator)return;const{authorizedDomains:h}=yield eu(E);for(const f of h)try{if(qp(f))return}catch{}We(E,"unauthorized-domain")})).apply(this,arguments)}function qp(E){const h=zt(),{protocol:f,hostname:T}=new URL(h);if(E.startsWith("chrome-extension://")){const ke=new URL(E);return""===ke.hostname&&""===T?"chrome-extension:"===f&&E.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&ke.hostname===T}if(!Pc.test(f))return!1;if(po.test(E))return T===E;const W=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+W+"|"+W+")$","i").test(T)}const Mc=new Tn(3e4,6e4);function Pd(){const E=Ii().___jsl;if(E?.H)for(const h of Object.keys(E.H))if(E.H[h].r=E.H[h].r||[],E.H[h].L=E.H[h].L||[],E.H[h].r=[...E.H[h].L],E.CP)for(let f=0;f<E.CP.length;f++)E.CP[f]=null}let Rc=null;const Nl=new Tn(5e3,15e3),xl="__/auth/iframe",sf="emulator/auth/iframe",af={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rd(E){const h=E.config;le(h.authDomain,E,"auth-domain-config-required");const f=h.emulator?xe(h,sf):`https://${E.config.authDomain}/${xl}`,T={apiKey:h.apiKey,appName:E.name,v:V.SDK_VERSION},W=tu.get(E.config.apiHost);W&&(T.eid=W);const ae=E._getFrameworks();return ae.length&&(T.fw=ae.join(",")),`${f}?${(0,P.Am)(T).slice(1)}`}function Uu(){return Uu=(0,_.A)(function*(E){const h=yield function Md(E){return Rc=Rc||function ac(E){return new Promise((h,f)=>{var T,W,ae;function ke(){Pd(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Pd(),f(Y(E,"network-request-failed"))},timeout:Mc.get()})}if(null!==(W=null===(T=Ii().gapi)||void 0===T?void 0:T.iframes)&&void 0!==W&&W.Iframe)h(gapi.iframes.getContext());else{if(null===(ae=Ii().gapi)||void 0===ae||!ae.load){const Dt=Hi("iframefcb");return Ii()[Dt]=()=>{gapi.load?ke():f(Y(E,"network-request-failed"))},ti(`${function cs(){return Cn.gapiScript}()}?onload=${Dt}`).catch(Gt=>f(Gt))}ke()}}).catch(h=>{throw Rc=null,h})}(E),Rc}(E),f=Ii().gapi;return le(f,E,"internal-error"),h.open({where:document.body,url:Rd(E),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:af,dontclear:!0},T=>new Promise(function(){var W=(0,_.A)(function*(ae,ke){yield T.restyle({setHideOnLeave:!1});const Dt=Y(E,"network-request-failed"),Gt=Ii().setTimeout(()=>{ke(Dt)},Nl.get());function Sn(){Ii().clearTimeout(Gt),ae(T)}T.ping(Sn).then(Sn,()=>{ke(Dt)})});return function(ae,ke){return W.apply(this,arguments)}}()))}),Uu.apply(this,arguments)}const uf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Mi{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Xp="__/auth/handler",Yp="emulator/auth/handler",df=encodeURIComponent("fac");function nu(E,h,f,T,W,ae){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,_.A)(function*(E,h,f,T,W,ae){le(E.config.authDomain,E,"auth-domain-config-required"),le(E.config.apiKey,E,"invalid-api-key");const ke={apiKey:E.config.apiKey,appName:E.name,authType:f,redirectUrl:T,v:V.SDK_VERSION,eventId:W};if(h instanceof mi){h.setDefaultLanguage(E.languageCode),ke.providerId=h.providerId||"",(0,P.Im)(h.getCustomParameters())||(ke.customParameters=JSON.stringify(h.getCustomParameters()));for(const[zn,Ar]of Object.entries(ae||{}))ke[zn]=Ar}if(h instanceof Go){const zn=h.getScopes().filter(Ar=>""!==Ar);zn.length>0&&(ke.scopes=zn.join(","))}E.tenantId&&(ke.tid=E.tenantId);const Dt=ke;for(const zn of Object.keys(Dt))void 0===Dt[zn]&&delete Dt[zn];const Gt=yield E._getAppCheckToken(),Sn=Gt?`#${df}=${encodeURIComponent(Gt)}`:"";return`${function ba({config:E}){return E.emulator?xe(E,Yp):`https://${E.authDomain}/${Xp}`}(E)}?${(0,P.Am)(Dt).slice(1)}${Sn}`})).apply(this,arguments)}const Od="webStorageSupport",Bu=class Fl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=na,this._completeRedirectFn=Vu,this._overrideRedirectResult=nf}_openPopup(h,f,T,W){var ae=this;return(0,_.A)(function*(){var ke;Je(null===(ke=ae.eventManagers[h._key()])||void 0===ke?void 0:ke.manager,"_initialize() not called before _openPopup()");const Dt=yield nu(h,f,T,zt(),W);return function Qp(E,h,f,T=500,W=600){const ae=Math.max((window.screen.availHeight-W)/2,0).toString(),ke=Math.max((window.screen.availWidth-T)/2,0).toString();let Dt="";const Gt=Object.assign(Object.assign({},uf),{width:T.toString(),height:W.toString(),top:ae,left:ke}),Sn=(0,P.ZQ)().toLowerCase();f&&(Dt=ai(Sn)?"_blank":f),Ne(Sn)&&(h=h||"http://localhost",Gt.scrollbars="yes");const zn=Object.entries(Gt).reduce((go,[Pa,Hu])=>`${go}${Pa}=${Hu},`,"");if(function It(E=(0,P.ZQ)()){var h;return as(E)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Sn)&&"_self"!==Dt)return function lf(E,h){const f=document.createElement("a");f.href=E,f.target=h;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(T)}(h||"",Dt),new Mi(null);const Ar=window.open(h||"",Dt,zn);le(Ar,E,"popup-blocked");try{Ar.focus()}catch{}return new Mi(Ar)}(h,Dt,tr())})()}_openRedirect(h,f,T,W){var ae=this;return(0,_.A)(function*(){return yield ae._originValidation(h),function Oo(E){Ii().location.href=E}(yield nu(h,f,T,zt(),W)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:W,promise:ae}=this.eventManagers[f];return W?Promise.resolve(W):(Je(ae,"If manager is not set, promise should be"),ae)}const T=this.initAndGetManager(h);return this.eventManagers[f]={promise:T},T.catch(()=>{delete this.eventManagers[f]}),T}initAndGetManager(h){var f=this;return(0,_.A)(function*(){const T=yield function cf(E){return Uu.apply(this,arguments)}(h),W=new Lu(h);return T.register("authEvent",ae=>(le(ae?.authEvent,h,"invalid-auth-event"),{status:W.onEvent(ae.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:W},f.iframes[h._key()]=T,W})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(Od,{type:Od},W=>{var ae;const ke=null===(ae=W?.[0])||void 0===ae?void 0:ae[Od];void 0!==ke&&f(!!ke),We(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function oa(E){return Xs.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return kt()||kr()||as()}};class Nc{constructor(h){this.factorId=h}_process(h,f,T){switch(f.type){case"enroll":return this._finalizeEnroll(h,f.credential,T);case"signin":return this._finalizeSignIn(h,f.credential);default:return Ge("unexpected MultiFactorSessionType")}}}class ju extends Nc{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new ju(h)}_finalizeEnroll(h,f,T){return function Ks(E,h){return et(E,"POST","/v2/accounts/mfaEnrollment:finalize",Et(E,h))}(h,{idToken:f,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,f){return function Ed(E,h){return et(E,"POST","/v2/accounts/mfaSignIn:finalize",Et(E,h))}(h,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $u=(()=>{class E{constructor(){}static assertion(f){return ju._fromCredential(f)}}return E.FACTOR_ID="phone",E})();var Ll="@firebase/auth";class Ul{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var f=this;return(0,_.A)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const f=this.auth.onIdTokenChanged(T=>{h(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,f),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const f=this.internalListeners.get(h);f&&(this.internalListeners.delete(h),f(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,P.XA)("authIdTokenMaxAge"),function Or(E){Cn=E}({loadJS:E=>new Promise((h,f)=>{const T=document.createElement("script");T.setAttribute("src",E),T.onload=h,T.onerror=W=>{const ae=Y("internal-error");ae.customData=W,f(ae)},T.type="text/javascript",T.charset="UTF-8",function xc(){var E,h;return null!==(h=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==h?h:document}().appendChild(T)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function kd(E){(0,V._registerComponent)(new Pe.uA("auth",(h,{options:f})=>{const T=h.getProvider("app").getImmediate(),W=h.getProvider("heartbeat"),ae=h.getProvider("app-check-internal"),{apiKey:ke,authDomain:Dt}=T.options;le(ke&&!ke.includes(":"),"invalid-api-key",{appName:T.name});const Gt={apiKey:ke,authDomain:Dt,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ln(E)},Sn=new Yt(T,W,ae,Gt);return function jo(E,h){const f=h?.persistence||[],T=(Array.isArray(f)?f:[f]).map(xt);h?.errorMap&&E._updateErrorMap(h.errorMap),E._initializeWithPersistence(T,h?.popupRedirectResolver)}(Sn,f),Sn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,f,T)=>{h.getProvider("auth-internal").initialize()})),(0,V._registerComponent)(new Pe.uA("auth-internal",h=>{const f=Ut(h.getProvider("auth").getImmediate());return new Ul(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,V.registerVersion)(Ll,"1.7.8",function xd(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(E)),(0,V.registerVersion)(Ll,"1.7.8","esm2017")}("Browser")},1076:(un,Ye,k)=>{k.d(Ye,{Am:()=>rr,Bd:()=>Ge,FA:()=>qt,Fy:()=>De,I9:()=>Yn,Im:()=>pt,Ku:()=>Mt,Ll:()=>le,T9:()=>We,Uj:()=>Be,XA:()=>Y,ZQ:()=>rt,bD:()=>Rt,cY:()=>te,eX:()=>lt,g:()=>et,gR:()=>Xn,hp:()=>Pn,jZ:()=>st,lT:()=>Bt,lV:()=>Pt,mS:()=>Te,nr:()=>xe,p7:()=>Je,sr:()=>zt,tD:()=>xr,u:()=>_e,zW:()=>Qe,zw:()=>$e});const w=function(he){const q=[];let J=0;for(let oe=0;oe<he.length;oe++){let pe=he.charCodeAt(oe);pe<128?q[J++]=pe:pe<2048?(q[J++]=pe>>6|192,q[J++]=63&pe|128):55296==(64512&pe)&&oe+1<he.length&&56320==(64512&he.charCodeAt(oe+1))?(pe=65536+((1023&pe)<<10)+(1023&he.charCodeAt(++oe)),q[J++]=pe>>18|240,q[J++]=pe>>12&63|128,q[J++]=pe>>6&63|128,q[J++]=63&pe|128):(q[J++]=pe>>12|224,q[J++]=pe>>6&63|128,q[J++]=63&pe|128)}return q},Pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(he,q){if(!Array.isArray(he))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,oe=[];for(let pe=0;pe<he.length;pe+=3){const gt=he[pe],xt=pe+1<he.length,yn=xt?he[pe+1]:0,Wn=pe+2<he.length,Jn=Wn?he[pe+2]:0;let Ne=(15&yn)<<2|Jn>>6,kr=63&Jn;Wn||(kr=64,xt||(Ne=64)),oe.push(J[gt>>2],J[(3&gt)<<4|yn>>4],J[Ne],J[kr])}return oe.join("")},encodeString(he,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(he):this.encodeByteArray(w(he),q)},decodeString(he,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(he):function(he){const q=[];let J=0,oe=0;for(;J<he.length;){const pe=he[J++];if(pe<128)q[oe++]=String.fromCharCode(pe);else if(pe>191&&pe<224){const gt=he[J++];q[oe++]=String.fromCharCode((31&pe)<<6|63&gt)}else if(pe>239&&pe<365){const Wn=((7&pe)<<18|(63&he[J++])<<12|(63&he[J++])<<6|63&he[J++])-65536;q[oe++]=String.fromCharCode(55296+(Wn>>10)),q[oe++]=String.fromCharCode(56320+(1023&Wn))}else{const gt=he[J++],xt=he[J++];q[oe++]=String.fromCharCode((15&pe)<<12|(63&gt)<<6|63&xt)}}return q.join("")}(this.decodeStringToByteArray(he,q))},decodeStringToByteArray(he,q){this.init_();const J=q?this.charToByteMapWebSafe_:this.charToByteMap_,oe=[];for(let pe=0;pe<he.length;){const gt=J[he.charAt(pe++)],yn=pe<he.length?J[he.charAt(pe)]:0;++pe;const Jn=pe<he.length?J[he.charAt(pe)]:64;++pe;const Ht=pe<he.length?J[he.charAt(pe)]:64;if(++pe,null==gt||null==yn||null==Jn||null==Ht)throw new ge;oe.push(gt<<2|yn>>4),64!==Jn&&(oe.push(yn<<4&240|Jn>>2),64!==Ht&&oe.push(Jn<<6&192|Ht))}return oe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let he=0;he<this.ENCODED_VALS.length;he++)this.byteToCharMap_[he]=this.ENCODED_VALS.charAt(he),this.charToByteMap_[this.byteToCharMap_[he]]=he,this.byteToCharMapWebSafe_[he]=this.ENCODED_VALS_WEBSAFE.charAt(he),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[he]]=he,he>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(he)]=he,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(he)]=he)}}};class ge extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Be=function(he){return function(he){const q=w(he);return Pe.encodeByteArray(q,!0)}(he).replace(/\./g,"")},_e=function(he){try{return Pe.decodeString(he,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function $e(he,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===he&&(he={});break;case Array:he=[];break;default:return q}for(const J in q)!q.hasOwnProperty(J)||!He(J)||(he[J]=$e(he[J],q[J]));return he}function He(he){return"__proto__"!==he}function Te(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ot=()=>{try{return Te().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const he=process.env.__FIREBASE_DEFAULTS__;return he?JSON.parse(he):void 0})()||(()=>{if(typeof document>"u")return;let he;try{he=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const q=he&&_e(he[1]);return q&&JSON.parse(q)})()}catch(he){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${he}`)}},We=()=>{var he;return null===(he=ot())||void 0===he?void 0:he.config},Y=he=>{var q;return null===(q=ot())||void 0===q?void 0:q[`_${he}`]};class te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,J)=>{this.resolve=q,this.reject=J})}wrapCallback(q){return(J,oe)=>{J?this.reject(J):this.resolve(oe),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(J):q(J,oe))}}}function De(he,q){if(he.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const oe=q||"demo-project",pe=he.iat||0,gt=he.sub||he.user_id;if(!gt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const xt=Object.assign({iss:`https://securetoken.google.com/${oe}`,aud:oe,iat:pe,exp:pe+3600,auth_time:pe,sub:gt,user_id:gt,firebase:{sign_in_provider:"custom",identities:{}}},he);return[Be(JSON.stringify({alg:"none",type:"JWT"})),Be(JSON.stringify(xt)),""].join(".")}function rt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function st(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function le(){var he;const q=null===(he=ot())||void 0===he?void 0:he.forceEnvironment;if("node"===q)return!0;if("browser"===q)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ge(){return typeof window<"u"||Je()}function Je(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function zt(){const he="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof he&&void 0!==he.id}function Pt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Bt(){const he=rt();return he.indexOf("MSIE ")>=0||he.indexOf("Trident/")>=0}function xe(){return!le()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){try{return"object"==typeof indexedDB}catch{return!1}}function lt(){return new Promise((he,q)=>{try{let J=!0;const oe="validate-browser-context-for-indexeddb-analytics-module",pe=self.indexedDB.open(oe);pe.onsuccess=()=>{pe.result.close(),J||self.indexedDB.deleteDatabase(oe),he(!0)},pe.onupgradeneeded=()=>{J=!1},pe.onerror=()=>{var gt;q((null===(gt=pe.error)||void 0===gt?void 0:gt.message)||"")}}catch(J){q(J)}})}class et extends Error{constructor(q,J,oe){super(J),this.code=q,this.customData=oe,this.name="FirebaseError",Object.setPrototypeOf(this,et.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qt.prototype.create)}}class qt{constructor(q,J,oe){this.service=q,this.serviceName=J,this.errors=oe}create(q,...J){const oe=J[0]||{},pe=`${this.service}/${q}`,gt=this.errors[q],xt=gt?function pn(he,q){return he.replace(on,(J,oe)=>{const pe=q[oe];return null!=pe?String(pe):`<${oe}?>`})}(gt,oe):"Error";return new et(pe,`${this.serviceName}: ${xt} (${pe}).`,oe)}}const on=/\{\$([^}]+)}/g;function Xn(he,q){return Object.prototype.hasOwnProperty.call(he,q)}function pt(he){for(const q in he)if(Object.prototype.hasOwnProperty.call(he,q))return!1;return!0}function Rt(he,q){if(he===q)return!0;const J=Object.keys(he),oe=Object.keys(q);for(const pe of J){if(!oe.includes(pe))return!1;const gt=he[pe],xt=q[pe];if(Xe(gt)&&Xe(xt)){if(!Rt(gt,xt))return!1}else if(gt!==xt)return!1}for(const pe of oe)if(!J.includes(pe))return!1;return!0}function Xe(he){return null!==he&&"object"==typeof he}function rr(he){const q=[];for(const[J,oe]of Object.entries(he))Array.isArray(oe)?oe.forEach(pe=>{q.push(encodeURIComponent(J)+"="+encodeURIComponent(pe))}):q.push(encodeURIComponent(J)+"="+encodeURIComponent(oe));return q.length?"&"+q.join("&"):""}function Yn(he){const q={};return he.replace(/^\?/,"").split("&").forEach(oe=>{if(oe){const[pe,gt]=oe.split("=");q[decodeURIComponent(pe)]=decodeURIComponent(gt)}}),q}function Pn(he){const q=he.indexOf("?");if(!q)return"";const J=he.indexOf("#",q);return he.substring(q,J>0?J:void 0)}function xr(he,q){const J=new $r(he,q);return J.subscribe.bind(J)}class $r{constructor(q,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{q(this)}).catch(oe=>{this.error(oe)})}next(q){this.forEachObserver(J=>{J.next(q)})}error(q){this.forEachObserver(J=>{J.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,J,oe){let pe;if(void 0===q&&void 0===J&&void 0===oe)throw new Error("Missing Observer.");pe=function $i(he,q){if("object"!=typeof he||null===he)return!1;for(const J of q)if(J in he&&"function"==typeof he[J])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:J,complete:oe},void 0===pe.next&&(pe.next=Sr),void 0===pe.error&&(pe.error=Sr),void 0===pe.complete&&(pe.complete=Sr);const gt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?pe.error(this.finalError):pe.complete()}catch{}}),this.observers.push(pe),gt}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,q)}sendOne(q,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{J(this.observers[q])}catch(oe){typeof console<"u"&&console.error&&console.error(oe)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sr(){}function Mt(he){return he&&he._delegate?he._delegate:he}},6943:(un,Ye,k)=>{k.d(Ye,{i:()=>Jt});var _=k(177),V=k(9417),P=k(9156),w=k(4438);let G=(()=>{class je{transform(Y){return Y.charAt(0).toUpperCase()+Y.substring(1,Y.length)}static#e=this.\u0275fac=function(te){return new(te||je)};static#t=this.\u0275pipe=w.EJ8({name:"upperCase",type:je,pure:!0,standalone:!0})}return je})();var Pe=k(5435),ge=k(6569),Fe=k(4454),Be=k(2906),_e=k(6552);function me(je,We){if(1&je){const Y=w.RV6();w.j41(0,"img",13),w.bIt("click",function(){w.eBV(Y);const De=w.XpG(3);return w.Njj(De.editing())}),w.k0s()}}function $e(je,We){if(1&je){const Y=w.RV6();w.j41(0,"img",13),w.bIt("click",function(){w.eBV(Y);const De=w.XpG(3);return w.Njj(De.cancelEditing())}),w.k0s()}}function He(je,We){if(1&je){const Y=w.RV6();w.j41(0,"div",10)(1,"img",11),w.bIt("click",function(){w.eBV(Y);const De=w.XpG(2);return w.Njj(De.removeProduct())}),w.k0s(),w.DNE(2,me,1,0,"img",12)(3,$e,1,0,"img",12),w.k0s()}if(2&je){const Y=w.XpG(2);w.R7$(2),w.Y8G("ngIf",""===Y.isEditing),w.R7$(),w.Y8G("ngIf",""!==Y.isEditing)}}function Te(je,We){if(1&je){const Y=w.RV6();w.j41(0,"div",14)(1,"app-reusable-form",15),w.bIt("formSubmitted",function(De){w.eBV(Y);const rt=w.XpG(2);return w.Njj(rt.onFormSubmit(De))}),w.k0s(),w.j41(2,"div")(3,"button",4),w.bIt("click",function(){w.eBV(Y);const De=w.XpG(2);return w.Njj(De.cancelEditing())}),w.EFF(4,"Cancel"),w.k0s()()()}}function Ve(je,We){if(1&je&&(w.j41(0,"div",16),w.EFF(1),w.k0s()),2&je){const Y=w.XpG(2);w.R7$(),w.SpI(" -",Y.product.product.discount,"% ")}}function At(je,We){if(1&je&&(w.j41(0,"span"),w.EFF(1),w.k0s()),2&je){const Y=w.XpG(2);w.R7$(),w.SpI("",Y.product.product.price,"$")}}function vt(je,We){if(1&je&&(w.j41(0,"div",17)(1,"span"),w.EFF(2),w.k0s(),w.j41(3,"span"),w.EFF(4),w.k0s()()),2&je){const Y=w.XpG(2);w.R7$(2),w.SpI(" ",Y.product.product.price,"$ "),w.R7$(2),w.SpI(" ",Y.calculateDiscount(),"$ ")}}function ot(je,We){if(1&je){const Y=w.RV6();w.j41(0,"div")(1,"div",1),w.DNE(2,He,4,2,"div",2),w.nI1(3,"async"),w.j41(4,"div",3)(5,"button",4),w.bIt("click",function(){w.eBV(Y);const De=w.XpG();return w.Njj(De.addInCart())}),w.EFF(6,"Add to cart"),w.k0s(),w.j41(7,"div")(8,"span",4),w.bIt("click",function(){w.eBV(Y);const De=w.XpG();return w.Njj(De.navigation())}),w.EFF(9,"See Product"),w.k0s()()(),w.DNE(10,Te,5,0,"div",5),w.j41(11,"div",3),w.DNE(12,Ve,2,1,"div",6),w.nrm(13,"img",7),w.k0s(),w.j41(14,"div",8)(15,"span"),w.EFF(16),w.nI1(17,"upperCase"),w.k0s(),w.j41(18,"span"),w.EFF(19),w.nI1(20,"slice"),w.nI1(21,"upperCase"),w.k0s(),w.DNE(22,At,2,1,"span",0)(23,vt,5,2,"div",9),w.k0s()()()}if(2&je){const Y=w.XpG();w.R7$(2),w.Y8G("ngIf",w.bMT(3,10,Y.isAdmin)),w.R7$(2),w.Y8G("ngClass",Y.isEditing?"display-none":"hover"),w.R7$(6),w.Y8G("ngIf",Y.isEditing===Y.product.key),w.R7$(),w.Y8G("ngClass",Y.isEditing===Y.product.key?"display-none":"img-placeholder"),w.R7$(),w.Y8G("ngIf",null==Y.product||null==Y.product.product?null:Y.product.product.discount),w.R7$(),w.Y8G("src",Y.product.product.photoUrl[0],w.B4B),w.R7$(3),w.JRh(w.bMT(17,12,Y.product.product.category)),w.R7$(3),w.JRh(w.bMT(21,18,w.brH(20,14,Y.product.product.model,0,150))),w.R7$(3),w.Y8G("ngIf",!Y.product.product.discount),w.R7$(),w.Y8G("ngIf",Y.product.product.discount)}}let Jt=(()=>{class je{constructor(Y,te,De,rt,st,le){this.sharedService=Y,this.authService=te,this.router=De,this.cd=rt,this.cartService=st,this.specificParent=le,this.singleProdPage=!1,this.removeEvent=new w.bkB,this.editEvent=new w.bkB,this.position=0,this.isEditing="",this.isUsedInSpecificParent=!1,this.showSpecificContent=!1,this.specificParent&&(this.isUsedInSpecificParent=!0)}ngOnInit(){this.authService.checkIfLoggedIn(),this.authService.loggedUser.subscribe(Y=>{this.authService.isAdmin.next(Y?.user.isAdmin),this.isAdmin=this.authService.isAdmin.asObservable(),this.userID=Y?.key})}removeProduct(){this.sharedService.removeProduct(this.product?.product.category,this.product?.key).subscribe(()=>{this.removeEvent.emit({prodId:this.product?.key,prodCategory:this.product?.product.category}),this.cd.detectChanges()})}navigation(){this.router.navigate([`single-product/${this.product?.key}`],{queryParams:{type:this.product?.product.category,prod:this.product?.key}}),this.cd.detectChanges()}addInCart(){this.cartService.cartOperations("add",this.product)}navigateToCategotyPage(){this.router.navigate([`categoty/${this.product?.product.category}`])}calculateDiscount(){return this.product?.product.price-Math.round(this.product?.product.price*this.product?.product.discount/100)}editing(){this.isEditing=this.product?.key}cancelEditing(){this.isEditing=""}onFormSubmit(Y){this.editEvent.emit({form:Y,prodId:this.product?.key,prodCategory:this.product?.product?.category}),Y.model&&(this.product.product.model=Y.model),Y.price&&(this.product.product.price=Y.price),Y.discount&&(this.product.product.discount=Y.discount),Y.quantity&&(this.product.product.quantity=Y.quantity),Y.description&&(this.product.product.description=Y.description),this.cancelEditing()}firstLetterUpperCase(Y){return Y.charAt(0).toUpperCase()+Y.substring(1,Y.length)}static#e=this.\u0275fac=function(te){return new(te||je)(w.rXU(Pe.m),w.rXU(ge.p),w.rXU(Fe.Ix),w.rXU(w.gRc),w.rXU(Be.m),w.rXU(_e.u,8))};static#t=this.\u0275cmp=w.VBU({type:je,selectors:[["app-card"]],inputs:{product:"product",singleProdPage:"singleProdPage",showSpecificContent:"showSpecificContent"},outputs:{removeEvent:"removeEvent",editEvent:"editEvent"},standalone:!0,features:[w.aNF],decls:1,vars:1,consts:[[4,"ngIf"],[1,"single-product"],["class","delete-button",4,"ngIf"],[3,"ngClass"],[3,"click"],["class","edit",4,"ngIf"],["class","discount",4,"ngIf"],["alt","img",3,"src"],[1,"info"],["class","if-discount",4,"ngIf"],[1,"delete-button"],["src","assets/remove.png","alt","img",3,"click"],["src","assets/pen.png","alt","img",3,"click",4,"ngIf"],["src","assets/pen.png","alt","img",3,"click"],[1,"edit"],[3,"formSubmitted"],[1,"discount"],[1,"if-discount"]],template:function(te,De){1&te&&w.DNE(0,ot,24,20,"div",0),2&te&&w.Y8G("ngIf",De.product&&De.product.product)},dependencies:[V.YN,_.MD,_.YU,_.bT,_.Jj,_.P9,P.B,G],styles:[".single-product[_ngcontent-%COMP%]{width:200px;height:420px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%]{position:absolute;z-index:1}.single-product[_ngcontent-%COMP%] > .delete-button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:25px;height:25px;margin-right:2px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:14%;z-index:1}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:20px;border-radius:4px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:35px}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]   .shifting[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{color:red}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{display:flex;gap:10px;justify-content:center;width:140px;height:40px;color:#fff}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{height:260px;display:flex;justify-content:center;position:relative}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;max-width:100%;min-height:50%;min-width:50%}.single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{height:155px;display:flex;flex-direction:column;justify-content:space-between}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-of-type{text-decoration:line-through}.if-discount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700;justify-self:flex-end}.if-discount[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:20px}.display-none[_ngcontent-%COMP%]{display:none}"],changeDetection:0})}return je})()},2739:(un,Ye,k)=>{k.d(Ye,{K:()=>Jt});var _=k(177),V=k(4454),P=k(4438),w=k(1413);const G=["payPalButtonContainer"];let Pe=(()=>{class je{constructor(Y){this.zone=Y}registerScript(Y,te,De){const rt=window[te];if(rt)return void this.zone.run(()=>{De(rt)});const st=document.createElement("script");st.id=this.getElemId(te),st.innerHTML="",st.onload=()=>{this.zone.run(()=>{De(window[te])})},st.src=Y,st.async=!0,st.defer=!0,document.getElementsByTagName("head")[0].appendChild(st)}cleanup(Y){const te=document.getElementById(this.getElemId(Y));te&&te.remove()}getElemId(Y){return`ngx-paypal-script-elem-${Y}`}}return je.\u0275fac=function(Y){return new(Y||je)(P.KVO(P.SKi))},je.\u0275prov=P.jDH({token:je,factory:je.\u0275fac}),je})(),ge=(()=>{class je{constructor(Y){this.scriptService=Y,this.paypalWindowName="paypal"}registerPayPalScript(Y,te){this.scriptService.registerScript(this.getUrlForConfig(Y),this.paypalWindowName,te)}destroyPayPalScript(){this.scriptService.cleanup(this.paypalWindowName)}getUrlForConfig(Y){const te=[{name:"client-id",value:Y.clientId}];return Y.locale&&te.push({name:"locale",value:Y.locale}),Y.currency&&te.push({name:"currency",value:Y.currency}),Y.commit&&te.push({name:"commit",value:Y.commit}),Y.vault&&te.push({name:"vault",value:Y.vault}),Y.intent&&te.push({name:"intent",value:Y.intent}),Y.funding&&te.push({name:"components",value:"buttons,funding-eligibility"}),Y.extraParams&&te.push(...Y.extraParams),`https://www.paypal.com/sdk/js${this.getQueryString(te)}`}getQueryString(Y){let te="";for(let De=0;De<Y.length;De++){const rt=Y[De];te+=0===De?"?":"&",te+=`${rt.name}=${rt.value}`}return te}}return je.\u0275fac=function(Y){return new(Y||je)(P.KVO(Pe))},je.\u0275prov=P.jDH({token:je,factory:je.\u0275fac}),je})(),Fe=(()=>{class je{constructor(Y,te,De){this.paypalScriptService=Y,this.cdr=te,this.ngZone=De,this.registerScript=!0,this.scriptLoaded=new P.bkB,this.ngUnsubscribe=new w.B,this.initializePayPal=!0}set payPalButtonContainer(Y){this.payPalButtonContainerElem=Y}ngOnChanges(Y){this.payPalButtonContainerId||(this.payPalButtonContainerId=this.generateElementId());const te=this.config;Y.config.isFirstChange()&&te&&this.registerScript&&this.initPayPalScript(te,De=>{this.payPal=De,this.doPayPalCheck()}),Y.config.isFirstChange()||this.reinitialize(te)}ngOnDestroy(){this.paypalScriptService.destroyPayPalScript(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){this.doPayPalCheck()}customInit(Y){this.payPal=Y,this.doPayPalCheck()}reinitialize(Y){if(this.config=Y,this.payPal=void 0,this.paypalScriptService.destroyPayPalScript(),this.payPalButtonContainerId=this.generateElementId(),this.initializePayPal=!0,this.payPalButtonContainerElem)try{for(;this.payPalButtonContainerElem.nativeElement.firstChild;)this.payPalButtonContainerElem.nativeElement.removeChild(this.payPalButtonContainerElem.nativeElement.firstChild)}catch(te){console.error(te)}this.cdr.detectChanges(),this.config&&(this.payPal?this.doPayPalCheck():this.initPayPalScript(this.config,te=>{this.payPal=te,this.doPayPalCheck()}))}doPayPalCheck(){this.initializePayPal&&this.config&&this.payPal&&this.payPalButtonContainerElem&&this.payPalButtonContainerElem.nativeElement.id&&(this.initializePayPal=!1,this.initPayPal(this.config,this.payPal))}initPayPalScript(Y,te){this.paypalScriptService.registerPayPalScript({clientId:Y.clientId,locale:Y.advanced?.locale,commit:Y.advanced&&Y.advanced.commit?Y.advanced.commit:void 0,currency:Y.currency,vault:Y.vault,intent:Y.intent,funding:null!=Y.fundingSource||null!=Y.fundingSource,extraParams:Y.advanced&&Y.advanced.extraQueryParams?Y.advanced.extraQueryParams:[]},De=>{this.scriptLoaded.next(De),te(De)})}generateElementId(){return`ngx-captcha-id-${this.generateGuid()}`}initPayPal(Y,te){this.ngZone.runOutsideAngular(()=>{const le={style:Y.style,fundingSource:void 0,onApprove:(Je,zt)=>this.ngZone.run(()=>{if(Y.onApprove&&Y.onApprove(Je,zt),Y.authorizeOnServer)return Y.authorizeOnServer(Je,zt);const Pt=Y.onClientAuthorization;Pt&&zt.order.capture().then(Kt=>{this.ngZone.run(()=>{Pt(Kt)})})}),onError:Je=>{this.ngZone.run(()=>{Y.onError&&Y.onError(Je)})},onCancel:(Je,zt)=>{this.ngZone.run(()=>{Y.onCancel&&Y.onCancel(Je,zt)})},onClick:(Je,zt)=>{this.ngZone.run(()=>{Y.onClick&&Y.onClick(Je,zt)})},onInit:(Je,zt)=>{this.ngZone.run(()=>{Y.onInit&&Y.onInit(Je,zt)})},...(Y.createOrderOnClient||Y.createOrderOnServer)&&{createOrder:(Je,zt)=>this.ngZone.run(()=>{if(Y.createOrderOnClient&&Y.createOrderOnServer)throw Error("Both 'createOrderOnClient' and 'createOrderOnServer' are defined.\n                    Please choose one or the other.");if(!Y.createOrderOnClient&&!Y.createOrderOnServer)throw Error("Neither 'createOrderOnClient' or 'createOrderOnServer' are defined.\n                    Please define one of these to create order.");if(Y.createOrderOnClient)return zt.order.create(Y.createOrderOnClient(Je));if(Y.createOrderOnServer)return Y.createOrderOnServer(Je);throw Error("Invalid state for 'createOrder'.")})},...Y.createSubscriptionOnClient&&{createSubscription:(Je,zt)=>this.ngZone.run(()=>{if(Y.createSubscriptionOnClient)return zt.subscription.create(Y.createSubscriptionOnClient(Je))})},...Y.onShippingChange&&{onShippingChange:(Je,zt)=>this.ngZone.run(()=>{if(Y.onShippingChange)return Y.onShippingChange(Je,zt)})}};let Ge;switch(Y.fundingSource){case"PAYPAL":Ge=te.FUNDING.PAYPAL;break;case"CARD":Ge=te.FUNDING.CARD;break;case"PAYLATER":Ge=te.FUNDING.PAYLATER;break;case"CREDIT":Ge=te.FUNDING.CREDIT;break;case"VENMO":Ge=te.FUNDING.VENMO}null!=Ge&&(le.fundingSource=Ge,"PAYPAL"!==Y.fundingSource&&delete le.style?.color),te.Buttons(le).render(`#${this.payPalButtonContainerId}`)})}generateGuid(){let Y=(new Date).getTime(),te=performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,De=>{let rt=16*Math.random();return Y>0?(rt=(Y+rt)%16|0,Y=Math.floor(Y/16)):(rt=(te+rt)%16|0,te=Math.floor(te/16)),("x"==De?rt:7&rt|8).toString(16)})}}return je.\u0275fac=function(Y){return new(Y||je)(P.rXU(ge),P.rXU(P.gRc),P.rXU(P.SKi))},je.\u0275cmp=P.VBU({type:je,selectors:[["ngx-paypal"]],viewQuery:function(Y,te){if(1&Y&&P.GBs(G,5),2&Y){let De;P.mGM(De=P.lsd())&&(te.payPalButtonContainer=De.first)}},inputs:{config:"config",registerScript:"registerScript"},outputs:{scriptLoaded:"scriptLoaded"},features:[P.OA$],decls:2,vars:1,consts:[["payPalButtonContainer",""],[3,"id"]],template:function(Y,te){1&Y&&P.nrm(0,"div",1,0),2&Y&&P.Y8G("id",te.payPalButtonContainerId)},encapsulation:2,changeDetection:0}),je})(),Be=(()=>{class je{}return je.\u0275fac=function(Y){return new(Y||je)},je.\u0275mod=P.$C({type:je}),je.\u0275inj=P.G2t({providers:[Pe,ge],imports:[_.MD]}),je})(),_e=(()=>{class je{constructor(Y,te){this.document=Y,this.platformId=te,this.documentIsAccessible=(0,_.UE)(this.platformId)}static getCookieRegExp(Y){const te=Y.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+te+"|;\\s*"+te+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(Y){try{return decodeURIComponent(Y)}catch{return Y}}check(Y){return!!this.documentIsAccessible&&(Y=encodeURIComponent(Y),je.getCookieRegExp(Y).test(this.document.cookie))}get(Y){if(this.documentIsAccessible&&this.check(Y)){Y=encodeURIComponent(Y);const De=je.getCookieRegExp(Y).exec(this.document.cookie);return De[1]?je.safeDecodeURIComponent(De[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const Y={},te=this.document;return te.cookie&&""!==te.cookie&&te.cookie.split(";").forEach(De=>{const[rt,st]=De.split("=");Y[je.safeDecodeURIComponent(rt.replace(/^ /,""))]=je.safeDecodeURIComponent(st)}),Y}set(Y,te,De,rt,st,le,Ge,Je){if(!this.documentIsAccessible)return;if("number"==typeof De||De instanceof Date||rt||st||le||Ge)return void this.set(Y,te,{expires:De,path:rt,domain:st,secure:le,sameSite:Ge||"Lax",partitioned:Je});let zt=encodeURIComponent(Y)+"="+encodeURIComponent(te)+";";const Pt=De||{};Pt.expires&&(zt+="number"==typeof Pt.expires?"expires="+new Date((new Date).getTime()+1e3*Pt.expires*60*60*24).toUTCString()+";":"expires="+Pt.expires.toUTCString()+";"),Pt.path&&(zt+="path="+Pt.path+";"),Pt.domain&&(zt+="domain="+Pt.domain+";"),!1===Pt.secure&&"None"===Pt.sameSite&&(Pt.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${Y} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),Pt.secure&&(zt+="secure;"),Pt.sameSite||(Pt.sameSite="Lax"),zt+="sameSite="+Pt.sameSite+";",Pt.partitioned&&(zt+="Partitioned;"),this.document.cookie=zt}delete(Y,te,De,rt,st="Lax"){this.documentIsAccessible&&this.set(Y,"",{expires:new Date("Thu, 01 Jan 1970 00:00:01 GMT"),path:te,domain:De,secure:rt,sameSite:st})}deleteAll(Y,te,De,rt="Lax"){if(!this.documentIsAccessible)return;const st=this.getAll();for(const le in st)st.hasOwnProperty(le)&&this.delete(le,Y,te,De,rt)}static#e=this.\u0275fac=function(te){return new(te||je)(P.KVO(_.qQ),P.KVO(P.Agw))};static#t=this.\u0275prov=P.jDH({token:je,factory:je.\u0275fac,providedIn:"root"})}return je})(),me=(()=>{class je{constructor(Y){this.cookieService=Y}ngOnInit(){this.initConfig(),this.setCookie("paypal_cookie","some_value");const Y=this.getCookie("paypal_cookie");console.log("PayPal Cookie Value: ",Y)}initConfig(){this.paypalConfig={currency:"USD",clientId:"AQ7YdqsTpxT_ouN31zRUyhQFvr1mMuO8rfcrWINg6SE5BFQ0l67cIFOhsNjIMdaxDU2RU42hI8yx2IxG",createOrderOnClient:Y=>({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:"0.1",breakdown:{item_total:{currency_code:"USD",value:"0.1"}}},items:[{name:"Music Shop Products",quantity:"1",category:"PHYSICAL_GOODS",unit_amount:{currency_code:"USD",value:"0.1"}}]}]}),advanced:{commit:"true"},style:{label:"paypal",layout:"vertical"},onApprove:(Y,te)=>{console.log("payment approved: ",Y,te)},onCancel:(Y,te)=>{console.log("payment cancelled: ",Y,te)},onClick:(Y,te)=>{console.log("Onclick: ",Y,te)}}}setCookie(Y,te){this.cookieService.set(Y,te,void 0,"/",void 0,!0,"None")}getCookie(Y){return this.cookieService.get(Y)}deleteCookie(Y){this.cookieService.delete(Y)}static#e=this.\u0275fac=function(te){return new(te||je)(P.rXU(_e))};static#t=this.\u0275cmp=P.VBU({type:je,selectors:[["app-paypal"]],inputs:{totalPrice:"totalPrice"},standalone:!0,features:[P.aNF],decls:1,vars:1,consts:[[3,"config"]],template:function(te,De){1&te&&P.nrm(0,"ngx-paypal",0),2&te&&P.Y8G("config",De.paypalConfig)},dependencies:[Be,Fe]})}return je})();var $e=k(5435),He=k(6569),Te=k(2906);const Ve=["paymentRef"];function At(je,We){if(1&je){const Y=P.RV6();P.j41(0,"div",5)(1,"div",6)(2,"img",7),P.bIt("click",function(){const De=P.eBV(Y).$implicit,rt=P.XpG(2);return P.Njj(rt.removeFromCart(De.product))}),P.k0s()(),P.j41(3,"div"),P.nrm(4,"img",8),P.k0s(),P.j41(5,"div",9)(6,"span"),P.EFF(7),P.k0s(),P.j41(8,"span"),P.EFF(9),P.nI1(10,"slice"),P.k0s(),P.j41(11,"span"),P.EFF(12),P.k0s(),P.j41(13,"p"),P.EFF(14),P.k0s(),P.j41(15,"p")(16,"img",10),P.bIt("click",function(){const De=P.eBV(Y).$implicit,rt=P.XpG(2);return P.Njj(rt.plus(De.product.key,"minus"))}),P.k0s(),P.EFF(17),P.j41(18,"img",11),P.bIt("click",function(){const De=P.eBV(Y).$implicit,rt=P.XpG(2);return P.Njj(rt.plus(De.product.key,"plus"))}),P.k0s()(),P.j41(19,"button",12),P.bIt("click",function(){const De=P.eBV(Y).$implicit,rt=P.XpG(2);return P.Njj(rt.nav(De.product.key,De.product.product.category))}),P.EFF(20," See Product "),P.k0s()()()}if(2&je){const Y=We.$implicit;P.R7$(4),P.Y8G("src",Y.product.product.photoUrl[0],P.B4B),P.R7$(3),P.SpI("Type: ",Y.product.product.category,""),P.R7$(2),P.SpI("Model: ",P.brH(10,6,Y.product.product.model,0,60),"..."),P.R7$(3),P.SpI("Price: ",Y.product.product.price,"$"),P.R7$(2),P.SpI("Discount -",Y.product.product.discount,"%"),P.R7$(3),P.SpI("",Y.quantity," ")}}function vt(je,We){if(1&je&&(P.j41(0,"div",13)(1,"h2"),P.EFF(2),P.k0s(),P.j41(3,"div")(4,"div"),P.nrm(5,"app-paypal"),P.k0s()()()),2&je){const Y=P.XpG(2);P.R7$(2),P.SpI("Total Price: ",Y.calculateTotalPrice(),"$")}}function ot(je,We){if(1&je&&(P.j41(0,"div",1)(1,"div")(2,"h2"),P.EFF(3,"Cart"),P.k0s()(),P.j41(4,"div",2),P.DNE(5,At,21,10,"div",3),P.nI1(6,"async"),P.k0s(),P.DNE(7,vt,6,1,"div",4),P.k0s()),2&je){const Y=P.XpG();P.R7$(5),P.Y8G("ngForOf",P.bMT(6,2,Y.cart$)),P.R7$(2),P.Y8G("ngIf",Y.calculateTotalPrice()>0)}}let Jt=(()=>{class je{constructor(Y,te,De,rt,st){this.sharedService=Y,this.router=te,this.authService=De,this.cd=rt,this.cartService=st,this.showCart=!0}ngOnInit(){this.authService.checkIfLoggedIn(),this.cart$=this.cartService.cart.asObservable(),this.cd.detectChanges()}makePayment(){this.sharedService.buyProducts(this.cartService.cart.getValue(),this.calculateTotalPrice(),this.authService.loggedUser.getValue()?.user.email,this.authService.loggedUser.getValue()?.key)}removeFromCart(Y){this.cartService.cartOperations("remove",Y),this.calculateTotalPrice()}nav(Y,te){this.router.navigate([`single-product/${Y}`],{queryParams:{type:te,prod:Y}})}plus(Y,te){let De=this.cartService.cart.getValue();const rt=De.findIndex(st=>st.product.key===Y);"plus"===te?De[rt].quantity++:De[rt].quantity>1&&De[rt].quantity--,this.cartService.cart.next(De)}calculateTotalPrice(){let Y=0;return this.cartService.cart.getValue().forEach(te=>{if(te.product.product.discount>0){const De=te.quantity*(te.product.product.price-this.calculateDiscount(te.product.product.price,te.product.product.discount));Y+=De}else Y+=te.quantity*te.product.product.price}),Y}calculateDiscount(Y,te){return Math.round(Y*te/100)}static#e=this.\u0275fac=function(te){return new(te||je)(P.rXU($e.m),P.rXU(V.Ix),P.rXU(He.p),P.rXU(P.gRc),P.rXU(Te.m))};static#t=this.\u0275cmp=P.VBU({type:je,selectors:[["app-cart"]],viewQuery:function(te,De){if(1&te&&P.GBs(Ve,7),2&te){let rt;P.mGM(rt=P.lsd())&&(De.paymentRef=rt.first)}},inputs:{showCart:"showCart",userEmail:"userEmail"},standalone:!0,features:[P.aNF],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"products"],["class","product",4,"ngFor","ngForOf"],["class","payment",4,"ngIf"],[1,"product"],[1,"remove"],["src","assets/remove.png","alt","img",3,"click"],["alt","img",3,"src"],[1,"description"],["src","assets/minus.png","alt","img",3,"click"],["src","assets/plus.png","alt","img",3,"click"],[3,"click"],[1,"payment"]],template:function(te,De){1&te&&P.DNE(0,ot,8,4,"div",0),2&te&&P.Y8G("ngIf",De.showCart)},dependencies:[_.MD,_.Sq,_.bT,_.Jj,_.P9,V.iI,me],styles:[".container[_ngcontent-%COMP%]{width:600px;height:600px;background-color:#98c0e0;overflow-y:scroll}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{text-align:center;padding:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]{display:flex;gap:5px;height:150px;width:80%;border:1px solid rgb(118,153,218);border-radius:8px;position:relative}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{position:absolute;right:0}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:20%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2) > img[_ngcontent-%COMP%]{width:100%;height:100%}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:grid;width:100%;grid-template-columns:repeat(2,190px);grid-template-rows:repeat(3,46px);align-content:center;align-items:center}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:14px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:15px;height:15px;cursor:pointer}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:not(:last-child){font-size:20px}.container[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%] > .product[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{height:24px;width:130px;border:none;color:#fff;background-color:#7699da;border-radius:3px;cursor:pointer}.container[_ngcontent-%COMP%]   .payment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}"],changeDetection:0})}return je})()},2906:(un,Ye,k)=>{k.d(Ye,{m:()=>P});var _=k(4412),V=k(4438);let P=(()=>{class w{constructor(){this.cart=new _.t([])}cartOperations(Pe,ge){let Fe=this.cart.getValue();const Be=Fe.findIndex(me=>me.product.key===ge.key);let _e=[...Fe];-1!==Be?"add"===Pe?_e[Be].quantity++:_e.splice(Be,1):"add"===Pe&&_e.push({quantity:1,product:ge}),this.cart.next(_e),localStorage.setItem("cart",JSON.stringify(this.cart.value))}static#e=this.\u0275fac=function(ge){return new(ge||w)};static#t=this.\u0275prov=V.jDH({token:w,factory:w.\u0275fac,providedIn:"root"})}return w})()},708:(un,Ye,k)=>{k.d(Ye,{n:()=>G});var _=k(9417),V=k(4454),P=k(4438),w=k(6569);let G=(()=>{class Pe{constructor(Fe,Be){this.service=Fe,this.router=Be,this.email=""}sendEmail(){this.email=""}navigate(Fe){if("profile"===Fe){const Be=this.service.loggedUser.getValue()?.key;this.router.navigate([`profile/${Be}`])}}static#e=this.\u0275fac=function(Be){return new(Be||Pe)(P.rXU(w.p),P.rXU(V.Ix))};static#t=this.\u0275cmp=P.VBU({type:Pe,selectors:[["app-footer"]],standalone:!0,features:[P.aNF],decls:33,vars:1,consts:[[1,"container"],[1,"flex-container"],["src","assets/placeholder.png","alt","img"],["src","assets/phone.png","alt","img"],["routerLink","/login"],["routerLink","/products"],[3,"click"],["placeholder","Enter your Email",3,"ngModelChange","ngModel"],["src","assets/send.png","alt","img",3,"click"]],template:function(Be,_e){1&Be&&(P.j41(0,"div",0),P.nrm(1,"div"),P.j41(2,"div",1)(3,"div")(4,"h3"),P.EFF(5,"SABAMUSIC."),P.k0s(),P.j41(6,"p"),P.EFF(7,"Music Shop over 1000 brand. we sell quality product on our website"),P.k0s(),P.j41(8,"p"),P.nrm(9,"img",2),P.EFF(10,"Mindeli's street 7B"),P.k0s(),P.j41(11,"p"),P.nrm(12,"img",3),P.EFF(13,"+995 555 542 034"),P.k0s()(),P.j41(14,"div")(15,"h3"),P.EFF(16,"Menu"),P.k0s(),P.j41(17,"p",4),P.EFF(18,"Login"),P.k0s(),P.j41(19,"p",5),P.EFF(20,"Products"),P.k0s(),P.j41(21,"p"),P.EFF(22,"About Us"),P.k0s(),P.j41(23,"p"),P.EFF(24,"Terms & Policy"),P.k0s(),P.j41(25,"p",6),P.bIt("click",function(){return _e.navigate("profile")}),P.EFF(26,"My Account"),P.k0s()(),P.j41(27,"div")(28,"h3"),P.EFF(29,"Stay Updated"),P.k0s(),P.j41(30,"div")(31,"input",7),P.mxI("ngModelChange",function($e){return P.DH7(_e.email,$e)||(_e.email=$e),$e}),P.k0s(),P.j41(32,"img",8),P.bIt("click",function(){return _e.sendEmail()}),P.k0s()()()()()),2&Be&&(P.R7$(31),P.R50("ngModel",_e.email))},dependencies:[_.YN,_.me,_.BC,_.vS,V.iI,V.Wk],styles:[".container[_ngcontent-%COMP%]{width:90%;height:220px;margin:100px auto;display:flex;flex-direction:column}.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;height:2px;background-color:#000}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;height:100%}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:7px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:4px;cursor:pointer}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;font-size:14px;color:#616161}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > p[_ngcontent-%COMP%]{width:190px}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%] > .flex-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{border:none;border-radius:2px;width:200px;height:20px;background-color:#e9dbdb}"],changeDetection:0})}return Pe})()},2152:(un,Ye,k)=>{k.d(Ye,{l:()=>_e});var _=k(4454),V=k(177),P=k(2739),w=k(4438),G=k(6569);function Pe(me,$e){if(1&me){const He=w.RV6();w.j41(0,"div",11)(1,"span",3),w.bIt("click",function(){w.eBV(He);const Ve=w.XpG();return w.Njj(Ve.navigateToCategotyPage("guitar"))}),w.EFF(2,"Guitar"),w.k0s(),w.j41(3,"span",3),w.bIt("click",function(){w.eBV(He);const Ve=w.XpG();return w.Njj(Ve.navigateToCategotyPage("drum"))}),w.EFF(4,"Drums"),w.k0s(),w.j41(5,"span",3),w.bIt("click",function(){w.eBV(He);const Ve=w.XpG();return w.Njj(Ve.navigateToCategotyPage("bass"))}),w.EFF(6,"Bass "),w.k0s(),w.j41(7,"span",3),w.bIt("click",function(){w.eBV(He);const Ve=w.XpG();return w.Njj(Ve.navigateToCategotyPage("piano"))}),w.EFF(8,"Piano"),w.k0s(),w.j41(9,"span",3),w.bIt("click",function(){w.eBV(He);const Ve=w.XpG();return w.Njj(Ve.navigateToCategotyPage("other"))}),w.EFF(10,"Other"),w.k0s()()}}function ge(me,$e){if(1&me){const He=w.RV6();w.j41(0,"span",3),w.bIt("click",function(){w.eBV(He);const Ve=w.XpG();return w.Njj(Ve.navigate("login"))}),w.EFF(1,"Log In"),w.k0s()}}function Fe(me,$e){if(1&me){const He=w.RV6();w.j41(0,"img",12),w.bIt("click",function(){w.eBV(He);const Ve=w.XpG();return w.Njj(Ve.logOut())}),w.k0s()}}function Be(me,$e){if(1&me){const He=w.RV6();w.j41(0,"img",13),w.bIt("click",function(){w.eBV(He);const Ve=w.XpG();return w.Njj(Ve.navigateToProfile())}),w.k0s()}}let _e=(()=>{class me{constructor(He,Te,Ve){this.router=He,this.loginService=Te,this.cd=Ve,this.dropDown=!1,this.cart=!1}ngOnInit(){this.loginService.loggedUser.subscribe(He=>{this.user=He,this.profilePicture=this.user?.user.photoUrl,this.cd.detectChanges()})}changeDropDown(){this.dropDown=!this.dropDown}navigateToProfile(){this.router.navigate([`profile/${this.user?.key}`])}navigateToCategotyPage(He){this.router.navigate([`categoty/${He}`])}openCloseCart(){this.cart=!this.cart}logOut(){this.loginService.logOut(),this.router.navigate(["/products"])}navigate(He){this.router.navigate([`/${He}`])}static#e=this.\u0275fac=function(Te){return new(Te||me)(w.rXU(_.Ix),w.rXU(G.p),w.rXU(w.gRc))};static#t=this.\u0275cmp=w.VBU({type:me,selectors:[["app-header"]],standalone:!0,features:[w.aNF],decls:19,vars:6,consts:[[1,"header-container"],["routerLink","/products"],[1,"dropdown-container"],[3,"click"],["class","dropdown",4,"ngIf"],["src","assets/down-arrow.png","alt","img",3,"click"],[3,"click",4,"ngIf"],[1,"cart",3,"userEmail","showCart"],["src","assets/logout.png","alt","img",3,"click",4,"ngIf"],["src","assets/shopping-cart.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click",4,"ngIf"],[1,"dropdown"],["src","assets/logout.png","alt","img",3,"click"],["src","assets/profile.png","alt","img",3,"click"]],template:function(Te,Ve){1&Te&&(w.j41(0,"div",0)(1,"div")(2,"span",1),w.EFF(3,"SABAMUSIC."),w.k0s(),w.j41(4,"div",2)(5,"span",3),w.bIt("click",function(){return Ve.changeDropDown()}),w.EFF(6,"Products "),w.DNE(7,Pe,11,0,"div",4),w.k0s(),w.j41(8,"img",5),w.bIt("click",function(){return Ve.changeDropDown()}),w.k0s()(),w.j41(9,"span",3),w.bIt("click",function(){return Ve.navigate("contact")}),w.EFF(10,"Contact"),w.k0s(),w.j41(11,"span",3),w.bIt("click",function(){return Ve.navigate("about-us")}),w.EFF(12,"About Us"),w.k0s(),w.DNE(13,ge,2,0,"span",6),w.nrm(14,"app-cart",7),w.k0s(),w.j41(15,"div"),w.DNE(16,Fe,1,0,"img",8),w.j41(17,"img",9),w.bIt("click",function(){return Ve.openCloseCart()}),w.k0s(),w.DNE(18,Be,1,0,"img",10),w.k0s()()),2&Te&&(w.R7$(7),w.Y8G("ngIf",Ve.dropDown),w.R7$(6),w.Y8G("ngIf",!Ve.user),w.R7$(),w.Y8G("userEmail",null==Ve.user||null==Ve.user.user?null:Ve.user.user.email)("showCart",Ve.cart),w.R7$(2),w.Y8G("ngIf",Ve.user),w.R7$(2),w.Y8G("ngIf",Ve.user))},dependencies:[V.MD,V.bT,_.iI,_.Wk,P.K],styles:[".header-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:160px;margin-bottom:40px;position:sticky;top:5px;z-index:2}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:60%;display:flex;justify-content:space-between;align-items:center}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child{display:flex;align-items:center;gap:10px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:last-child > input[_ngcontent-%COMP%]{height:20px;border:none;background-color:#f3ecec;border-radius:3px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   .cart[_ngcontent-%COMP%]{position:absolute;top:80px;right:100px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > span[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:26px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{position:relative;font-size:20px;cursor:pointer}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%]{z-index:3;display:flex;flex-direction:column;position:absolute;top:30px;gap:5px;z-index:1}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .dropdown-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > .dropdown[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#000}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child{display:flex;gap:20px}.header-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child   img[_ngcontent-%COMP%]{width:26px;height:26px;cursor:pointer}"],changeDetection:0})}return me})()},513:(un,Ye,k)=>{k.r(Ye),k.d(Ye,{LoginAndRegistrationModule:()=>Ky});var _=k(177),V=k(9417),P=k(1182),w=k(4438),G=k(1825),Pe=k(9253),ge=k(3236),Fe=k(1985),Be=k(8455),_e=k(7673),me=k(9172),$e=k(9974),He=k(4360);function Te(){return(0,$e.N)((a,t)=>{let r,o=!1;a.subscribe((0,He._)(t,u=>{const d=r;r=u,o&&t.next([d,u]),o=!0}))})}var Ve=k(6354),At=k(2816),vt=k(3669);function Jt(a,t){return a===t}var zt,Pt,je=k(5964),Y=(k(2438),k(3345)),te=k(467),De=k(7852),rt=k(1362),st=k(8041),le=k(1076),Ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Je={};(function(){var a;function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function u(nt,Ae,ze){ze||(ze=0);var it=Array(16);if("string"==typeof Ae)for(var ut=0;16>ut;++ut)it[ut]=Ae.charCodeAt(ze++)|Ae.charCodeAt(ze++)<<8|Ae.charCodeAt(ze++)<<16|Ae.charCodeAt(ze++)<<24;else for(ut=0;16>ut;++ut)it[ut]=Ae[ze++]|Ae[ze++]<<8|Ae[ze++]<<16|Ae[ze++]<<24;var Ct=nt.g[3],Ue=(Ae=nt.g[0])+(Ct^(ze=nt.g[1])&((ut=nt.g[2])^Ct))+it[0]+3614090360&4294967295;Ue=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=(ze=(ut=(Ct=(Ae=ze+(Ue<<7&4294967295|Ue>>>25))+((Ue=Ct+(ut^Ae&(ze^ut))+it[1]+3905402710&4294967295)<<12&4294967295|Ue>>>20))+((Ue=ut+(ze^Ct&(Ae^ze))+it[2]+606105819&4294967295)<<17&4294967295|Ue>>>15))+((Ue=ze+(Ae^ut&(Ct^Ae))+it[3]+3250441966&4294967295)<<22&4294967295|Ue>>>10))+((Ue=Ae+(Ct^ze&(ut^Ct))+it[4]+4118548399&4294967295)<<7&4294967295|Ue>>>25))+((Ue=Ct+(ut^Ae&(ze^ut))+it[5]+1200080426&4294967295)<<12&4294967295|Ue>>>20))+((Ue=ut+(ze^Ct&(Ae^ze))+it[6]+2821735955&4294967295)<<17&4294967295|Ue>>>15))+((Ue=ze+(Ae^ut&(Ct^Ae))+it[7]+4249261313&4294967295)<<22&4294967295|Ue>>>10))+((Ue=Ae+(Ct^ze&(ut^Ct))+it[8]+1770035416&4294967295)<<7&4294967295|Ue>>>25))+((Ue=Ct+(ut^Ae&(ze^ut))+it[9]+2336552879&4294967295)<<12&4294967295|Ue>>>20))+((Ue=ut+(ze^Ct&(Ae^ze))+it[10]+4294925233&4294967295)<<17&4294967295|Ue>>>15))+((Ue=ze+(Ae^ut&(Ct^Ae))+it[11]+2304563134&4294967295)<<22&4294967295|Ue>>>10))+((Ue=Ae+(Ct^ze&(ut^Ct))+it[12]+1804603682&4294967295)<<7&4294967295|Ue>>>25))+((Ue=Ct+(ut^Ae&(ze^ut))+it[13]+4254626195&4294967295)<<12&4294967295|Ue>>>20))+((Ue=ut+(ze^Ct&(Ae^ze))+it[14]+2792965006&4294967295)<<17&4294967295|Ue>>>15))+((Ue=ze+(Ae^ut&(Ct^Ae))+it[15]+1236535329&4294967295)<<22&4294967295|Ue>>>10))+((Ue=Ae+(ut^Ct&(ze^ut))+it[1]+4129170786&4294967295)<<5&4294967295|Ue>>>27))+((Ue=Ct+(ze^ut&(Ae^ze))+it[6]+3225465664&4294967295)<<9&4294967295|Ue>>>23))+((Ue=ut+(Ae^ze&(Ct^Ae))+it[11]+643717713&4294967295)<<14&4294967295|Ue>>>18))+((Ue=ze+(Ct^Ae&(ut^Ct))+it[0]+3921069994&4294967295)<<20&4294967295|Ue>>>12))+((Ue=Ae+(ut^Ct&(ze^ut))+it[5]+3593408605&4294967295)<<5&4294967295|Ue>>>27))+((Ue=Ct+(ze^ut&(Ae^ze))+it[10]+38016083&4294967295)<<9&4294967295|Ue>>>23))+((Ue=ut+(Ae^ze&(Ct^Ae))+it[15]+3634488961&4294967295)<<14&4294967295|Ue>>>18))+((Ue=ze+(Ct^Ae&(ut^Ct))+it[4]+3889429448&4294967295)<<20&4294967295|Ue>>>12))+((Ue=Ae+(ut^Ct&(ze^ut))+it[9]+568446438&4294967295)<<5&4294967295|Ue>>>27))+((Ue=Ct+(ze^ut&(Ae^ze))+it[14]+3275163606&4294967295)<<9&4294967295|Ue>>>23))+((Ue=ut+(Ae^ze&(Ct^Ae))+it[3]+4107603335&4294967295)<<14&4294967295|Ue>>>18))+((Ue=ze+(Ct^Ae&(ut^Ct))+it[8]+1163531501&4294967295)<<20&4294967295|Ue>>>12))+((Ue=Ae+(ut^Ct&(ze^ut))+it[13]+2850285829&4294967295)<<5&4294967295|Ue>>>27))+((Ue=Ct+(ze^ut&(Ae^ze))+it[2]+4243563512&4294967295)<<9&4294967295|Ue>>>23))+((Ue=ut+(Ae^ze&(Ct^Ae))+it[7]+1735328473&4294967295)<<14&4294967295|Ue>>>18))+((Ue=ze+(Ct^Ae&(ut^Ct))+it[12]+2368359562&4294967295)<<20&4294967295|Ue>>>12))+((Ue=Ae+(ze^ut^Ct)+it[5]+4294588738&4294967295)<<4&4294967295|Ue>>>28))+((Ue=Ct+(Ae^ze^ut)+it[8]+2272392833&4294967295)<<11&4294967295|Ue>>>21))+((Ue=ut+(Ct^Ae^ze)+it[11]+1839030562&4294967295)<<16&4294967295|Ue>>>16))+((Ue=ze+(ut^Ct^Ae)+it[14]+4259657740&4294967295)<<23&4294967295|Ue>>>9))+((Ue=Ae+(ze^ut^Ct)+it[1]+2763975236&4294967295)<<4&4294967295|Ue>>>28))+((Ue=Ct+(Ae^ze^ut)+it[4]+1272893353&4294967295)<<11&4294967295|Ue>>>21))+((Ue=ut+(Ct^Ae^ze)+it[7]+4139469664&4294967295)<<16&4294967295|Ue>>>16))+((Ue=ze+(ut^Ct^Ae)+it[10]+3200236656&4294967295)<<23&4294967295|Ue>>>9))+((Ue=Ae+(ze^ut^Ct)+it[13]+681279174&4294967295)<<4&4294967295|Ue>>>28))+((Ue=Ct+(Ae^ze^ut)+it[0]+3936430074&4294967295)<<11&4294967295|Ue>>>21))+((Ue=ut+(Ct^Ae^ze)+it[3]+3572445317&4294967295)<<16&4294967295|Ue>>>16))+((Ue=ze+(ut^Ct^Ae)+it[6]+76029189&4294967295)<<23&4294967295|Ue>>>9))+((Ue=Ae+(ze^ut^Ct)+it[9]+3654602809&4294967295)<<4&4294967295|Ue>>>28))+((Ue=Ct+(Ae^ze^ut)+it[12]+3873151461&4294967295)<<11&4294967295|Ue>>>21))+((Ue=ut+(Ct^Ae^ze)+it[15]+530742520&4294967295)<<16&4294967295|Ue>>>16))+((Ue=ze+(ut^Ct^Ae)+it[2]+3299628645&4294967295)<<23&4294967295|Ue>>>9))+((Ue=Ae+(ut^(ze|~Ct))+it[0]+4096336452&4294967295)<<6&4294967295|Ue>>>26))+((Ue=Ct+(ze^(Ae|~ut))+it[7]+1126891415&4294967295)<<10&4294967295|Ue>>>22))+((Ue=ut+(Ae^(Ct|~ze))+it[14]+2878612391&4294967295)<<15&4294967295|Ue>>>17))+((Ue=ze+(Ct^(ut|~Ae))+it[5]+4237533241&4294967295)<<21&4294967295|Ue>>>11))+((Ue=Ae+(ut^(ze|~Ct))+it[12]+1700485571&4294967295)<<6&4294967295|Ue>>>26))+((Ue=Ct+(ze^(Ae|~ut))+it[3]+2399980690&4294967295)<<10&4294967295|Ue>>>22))+((Ue=ut+(Ae^(Ct|~ze))+it[10]+4293915773&4294967295)<<15&4294967295|Ue>>>17))+((Ue=ze+(Ct^(ut|~Ae))+it[1]+2240044497&4294967295)<<21&4294967295|Ue>>>11))+((Ue=Ae+(ut^(ze|~Ct))+it[8]+1873313359&4294967295)<<6&4294967295|Ue>>>26))+((Ue=Ct+(ze^(Ae|~ut))+it[15]+4264355552&4294967295)<<10&4294967295|Ue>>>22))+((Ue=ut+(Ae^(Ct|~ze))+it[6]+2734768916&4294967295)<<15&4294967295|Ue>>>17))+((Ue=ze+(Ct^(ut|~Ae))+it[13]+1309151649&4294967295)<<21&4294967295|Ue>>>11))+((Ct=(Ae=ze+((Ue=Ae+(ut^(ze|~Ct))+it[4]+4149444226&4294967295)<<6&4294967295|Ue>>>26))+((Ue=Ct+(ze^(Ae|~ut))+it[11]+3174756917&4294967295)<<10&4294967295|Ue>>>22))^((ut=Ct+((Ue=ut+(Ae^(Ct|~ze))+it[2]+718787259&4294967295)<<15&4294967295|Ue>>>17))|~Ae))+it[9]+3951481745&4294967295,nt.g[0]=nt.g[0]+Ae&4294967295,nt.g[1]=nt.g[1]+(ut+(Ue<<21&4294967295|Ue>>>11))&4294967295,nt.g[2]=nt.g[2]+ut&4294967295,nt.g[3]=nt.g[3]+Ct&4294967295}function m(nt,Ae){this.h=Ae;for(var ze=[],it=!0,ut=nt.length-1;0<=ut;ut--){var Ct=0|nt[ut];it&&Ct==Ae||(ze[ut]=Ct,it=!1)}this.g=ze}(function t(nt,Ae){function ze(){}ze.prototype=Ae.prototype,nt.D=Ae.prototype,nt.prototype=new ze,nt.prototype.constructor=nt,nt.C=function(it,ut,Ct){for(var Ue=Array(arguments.length-2),Bc=2;Bc<arguments.length;Bc++)Ue[Bc-2]=arguments[Bc];return Ae.prototype[ut].apply(it,Ue)}})(o,function r(){this.blockSize=-1}),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},o.prototype.u=function(nt,Ae){void 0===Ae&&(Ae=nt.length);for(var ze=Ae-this.blockSize,it=this.B,ut=this.h,Ct=0;Ct<Ae;){if(0==ut)for(;Ct<=ze;)u(this,nt,Ct),Ct+=this.blockSize;if("string"==typeof nt){for(;Ct<Ae;)if(it[ut++]=nt.charCodeAt(Ct++),ut==this.blockSize){u(this,it),ut=0;break}}else for(;Ct<Ae;)if(it[ut++]=nt[Ct++],ut==this.blockSize){u(this,it),ut=0;break}}this.h=ut,this.o+=Ae},o.prototype.v=function(){var nt=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);nt[0]=128;for(var Ae=1;Ae<nt.length-8;++Ae)nt[Ae]=0;var ze=8*this.o;for(Ae=nt.length-8;Ae<nt.length;++Ae)nt[Ae]=255&ze,ze/=256;for(this.u(nt),nt=Array(16),Ae=ze=0;4>Ae;++Ae)for(var it=0;32>it;it+=8)nt[ze++]=this.g[Ae]>>>it&255;return nt};var D={};function N(nt){return-128<=nt&&128>nt?function d(nt,Ae){var ze=D;return Object.prototype.hasOwnProperty.call(ze,nt)?ze[nt]:ze[nt]=Ae(nt)}(nt,function(Ae){return new m([0|Ae],0>Ae?-1:0)}):new m([0|nt],0>nt?-1:0)}function j(nt){if(isNaN(nt)||!isFinite(nt))return fe;if(0>nt)return Xt(j(-nt));for(var Ae=[],ze=1,it=0;nt>=ze;it++)Ae[it]=nt/ze|0,ze*=4294967296;return new m(Ae,0)}var fe=N(0),Me=N(1),ct=N(16777216);function jt(nt){if(0!=nt.h)return!1;for(var Ae=0;Ae<nt.g.length;Ae++)if(0!=nt.g[Ae])return!1;return!0}function sn(nt){return-1==nt.h}function Xt(nt){for(var Ae=nt.g.length,ze=[],it=0;it<Ae;it++)ze[it]=~nt.g[it];return new m(ze,~nt.h).add(Me)}function Bn(nt,Ae){return nt.add(Xt(Ae))}function nr(nt,Ae){for(;(65535&nt[Ae])!=nt[Ae];)nt[Ae+1]+=nt[Ae]>>>16,nt[Ae]&=65535,Ae++}function Vn(nt,Ae){this.g=nt,this.h=Ae}function ur(nt,Ae){if(jt(Ae))throw Error("division by zero");if(jt(nt))return new Vn(fe,fe);if(sn(nt))return Ae=ur(Xt(nt),Ae),new Vn(Xt(Ae.g),Xt(Ae.h));if(sn(Ae))return Ae=ur(nt,Xt(Ae)),new Vn(Xt(Ae.g),Ae.h);if(30<nt.g.length){if(sn(nt)||sn(Ae))throw Error("slowDivide_ only works with positive integers.");for(var ze=Me,it=Ae;0>=it.l(nt);)ze=Lr(ze),it=Lr(it);var ut=br(ze,1),Ct=br(it,1);for(it=br(it,2),ze=br(ze,2);!jt(it);){var Ue=Ct.add(it);0>=Ue.l(nt)&&(ut=ut.add(ze),Ct=Ue),it=br(it,1),ze=br(ze,1)}return Ae=Bn(nt,ut.j(Ae)),new Vn(ut,Ae)}for(ut=fe;0<=nt.l(Ae);){for(ze=Math.max(1,Math.floor(nt.m()/Ae.m())),it=48>=(it=Math.ceil(Math.log(ze)/Math.LN2))?1:Math.pow(2,it-48),Ue=(Ct=j(ze)).j(Ae);sn(Ue)||0<Ue.l(nt);)Ue=(Ct=j(ze-=it)).j(Ae);jt(Ct)&&(Ct=Me),ut=ut.add(Ct),nt=Bn(nt,Ue)}return new Vn(ut,nt)}function Lr(nt){for(var Ae=nt.g.length+1,ze=[],it=0;it<Ae;it++)ze[it]=nt.i(it)<<1|nt.i(it-1)>>>31;return new m(ze,nt.h)}function br(nt,Ae){var ze=Ae>>5;Ae%=32;for(var it=nt.g.length-ze,ut=[],Ct=0;Ct<it;Ct++)ut[Ct]=0<Ae?nt.i(Ct+ze)>>>Ae|nt.i(Ct+ze+1)<<32-Ae:nt.i(Ct+ze);return new m(ut,nt.h)}(a=m.prototype).m=function(){if(sn(this))return-Xt(this).m();for(var nt=0,Ae=1,ze=0;ze<this.g.length;ze++){var it=this.i(ze);nt+=(0<=it?it:4294967296+it)*Ae,Ae*=4294967296}return nt},a.toString=function(nt){if(2>(nt=nt||10)||36<nt)throw Error("radix out of range: "+nt);if(jt(this))return"0";if(sn(this))return"-"+Xt(this).toString(nt);for(var Ae=j(Math.pow(nt,6)),ze=this,it="";;){var ut=ur(ze,Ae).g,Ct=((0<(ze=Bn(ze,ut.j(Ae))).g.length?ze.g[0]:ze.h)>>>0).toString(nt);if(jt(ze=ut))return Ct+it;for(;6>Ct.length;)Ct="0"+Ct;it=Ct+it}},a.i=function(nt){return 0>nt?0:nt<this.g.length?this.g[nt]:this.h},a.l=function(nt){return sn(nt=Bn(this,nt))?-1:jt(nt)?0:1},a.abs=function(){return sn(this)?Xt(this):this},a.add=function(nt){for(var Ae=Math.max(this.g.length,nt.g.length),ze=[],it=0,ut=0;ut<=Ae;ut++){var Ct=it+(65535&this.i(ut))+(65535&nt.i(ut)),Ue=(Ct>>>16)+(this.i(ut)>>>16)+(nt.i(ut)>>>16);it=Ue>>>16,ze[ut]=(Ue&=65535)<<16|(Ct&=65535)}return new m(ze,-2147483648&ze[ze.length-1]?-1:0)},a.j=function(nt){if(jt(this)||jt(nt))return fe;if(sn(this))return sn(nt)?Xt(this).j(Xt(nt)):Xt(Xt(this).j(nt));if(sn(nt))return Xt(this.j(Xt(nt)));if(0>this.l(ct)&&0>nt.l(ct))return j(this.m()*nt.m());for(var Ae=this.g.length+nt.g.length,ze=[],it=0;it<2*Ae;it++)ze[it]=0;for(it=0;it<this.g.length;it++)for(var ut=0;ut<nt.g.length;ut++){var Ct=this.i(it)>>>16,Ue=65535&this.i(it),Bc=nt.i(ut)>>>16,sd=65535&nt.i(ut);ze[2*it+2*ut]+=Ue*sd,nr(ze,2*it+2*ut),ze[2*it+2*ut+1]+=Ct*sd,nr(ze,2*it+2*ut+1),ze[2*it+2*ut+1]+=Ue*Bc,nr(ze,2*it+2*ut+1),ze[2*it+2*ut+2]+=Ct*Bc,nr(ze,2*it+2*ut+2)}for(it=0;it<Ae;it++)ze[it]=ze[2*it+1]<<16|ze[2*it];for(it=Ae;it<2*Ae;it++)ze[it]=0;return new m(ze,0)},a.A=function(nt){return ur(this,nt).h},a.and=function(nt){for(var Ae=Math.max(this.g.length,nt.g.length),ze=[],it=0;it<Ae;it++)ze[it]=this.i(it)&nt.i(it);return new m(ze,this.h&nt.h)},a.or=function(nt){for(var Ae=Math.max(this.g.length,nt.g.length),ze=[],it=0;it<Ae;it++)ze[it]=this.i(it)|nt.i(it);return new m(ze,this.h|nt.h)},a.xor=function(nt){for(var Ae=Math.max(this.g.length,nt.g.length),ze=[],it=0;it<Ae;it++)ze[it]=this.i(it)^nt.i(it);return new m(ze,this.h^nt.h)},o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Pt=Je.Md5=o,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.A,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=j,m.fromString=function ie(nt,Ae){if(0==nt.length)throw Error("number format error: empty string");if(2>(Ae=Ae||10)||36<Ae)throw Error("radix out of range: "+Ae);if("-"==nt.charAt(0))return Xt(ie(nt.substring(1),Ae));if(0<=nt.indexOf("-"))throw Error('number format error: interior "-" character');for(var ze=j(Math.pow(Ae,8)),it=fe,ut=0;ut<nt.length;ut+=8){var Ct=Math.min(8,nt.length-ut),Ue=parseInt(nt.substring(ut,ut+Ct),Ae);8>Ct?(Ct=j(Math.pow(Ae,Ct)),it=it.j(Ct).add(j(Ue))):it=(it=it.j(ze)).add(j(Ue))}return it},zt=Je.Integer=m}).apply(typeof Ge<"u"?Ge:typeof self<"u"?self:typeof window<"u"?window:{});var tn,Tn,xe,Qe,lt,yt,Et,et,qt,Kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bt={};(function(){var a,t="function"==typeof Object.defineProperties?Object.defineProperty:function(g,x,z){return g==Array.prototype||g==Object.prototype||(g[x]=z.value),g},o=function r(g){g=["object"==typeof globalThis&&globalThis,g,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Kt&&Kt];for(var x=0;x<g.length;++x){var z=g[x];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}(this);!function u(g,x){if(x)e:{var z=o;g=g.split(".");for(var ue=0;ue<g.length-1;ue++){var ht=g[ue];if(!(ht in z))break e;z=z[ht]}(x=x(ue=z[g=g[g.length-1]]))!=ue&&null!=x&&t(z,g,{configurable:!0,writable:!0,value:x})}}("Array.prototype.values",function(g){return g||function(){return function d(g,x){g instanceof String&&(g+="");var z=0,ue=!1,ht={next:function(){if(!ue&&z<g.length){var Nt=z++;return{value:x(Nt,g[Nt]),done:!1}}return ue=!0,{done:!0,value:void 0}}};return ht[Symbol.iterator]=function(){return ht},ht}(this,function(x,z){return z})}});var m=m||{},D=this||self;function N(g){var x=typeof g;return"array"==(x="object"!=x?x:g?Array.isArray(g)?"array":x:"null")||"object"==x&&"number"==typeof g.length}function j(g){var x=typeof g;return"object"==x&&null!=g||"function"==x}function ie(g,x,z){return g.call.apply(g.bind,arguments)}function fe(g,x,z){if(!g)throw Error();if(2<arguments.length){var ue=Array.prototype.slice.call(arguments,2);return function(){var ht=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ht,ue),g.apply(x,ht)}}return function(){return g.apply(x,arguments)}}function Me(g,x,z){return(Me=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ie:fe).apply(null,arguments)}function ct(g,x){var z=Array.prototype.slice.call(arguments,1);return function(){var ue=z.slice();return ue.push.apply(ue,arguments),g.apply(this,ue)}}function jt(g,x){function z(){}z.prototype=x.prototype,g.aa=x.prototype,g.prototype=new z,g.prototype.constructor=g,g.Qb=function(ue,ht,Nt){for(var mn=Array(arguments.length-2),Ri=2;Ri<arguments.length;Ri++)mn[Ri-2]=arguments[Ri];return x.prototype[ht].apply(ue,mn)}}function sn(g){const x=g.length;if(0<x){const z=Array(x);for(let ue=0;ue<x;ue++)z[ue]=g[ue];return z}return[]}function Xt(g,x){for(let z=1;z<arguments.length;z++){const ue=arguments[z];if(N(ue)){const ht=g.length||0,Nt=ue.length||0;g.length=ht+Nt;for(let mn=0;mn<Nt;mn++)g[ht+mn]=ue[mn]}else g.push(ue)}}function nr(g){return/^[\s\xa0]*$/.test(g)}function Vn(){var g=D.navigator;return g&&(g=g.userAgent)?g:""}function ur(g){return ur[" "](g),g}ur[" "]=function(){};var Lr=!(-1==Vn().indexOf("Gecko")||-1!=Vn().toLowerCase().indexOf("webkit")&&-1==Vn().indexOf("Edge")||-1!=Vn().indexOf("Trident")||-1!=Vn().indexOf("MSIE")||-1!=Vn().indexOf("Edge"));function br(g,x,z){for(const ue in g)x.call(z,g[ue],ue,g)}function Ae(g){const x={};for(const z in g)x[z]=g[z];return x}const ze="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function it(g,x){let z,ue;for(let ht=1;ht<arguments.length;ht++){for(z in ue=arguments[ht],ue)g[z]=ue[z];for(let Nt=0;Nt<ze.length;Nt++)z=ze[Nt],Object.prototype.hasOwnProperty.call(ue,z)&&(g[z]=ue[z])}}function ut(g){var x=1;g=g.split(":");const z=[];for(;0<x&&g.length;)z.push(g.shift()),x--;return g.length&&z.push(g.join(":")),z}function Ct(g){D.setTimeout(()=>{throw g},0)}function Ue(){var g=Am;let x=null;return g.g&&(x=g.g,g.g=g.g.next,g.g||(g.h=null),x.next=null),x}var sd=new class Bn{constructor(x,z){this.i=x,this.j=z,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}(()=>new vI,g=>g.reset());class vI{constructor(){this.next=this.g=this.h=null}set(x,z){this.h=x,this.g=z,this.next=null}reset(){this.next=this.g=this.h=null}}let od,tp=!1,Am=new class Bc{constructor(){this.h=this.g=null}add(x,z){const ue=sd.get();ue.set(x,z),this.h?this.h.next=ue:this.g=ue,this.h=ue}},Ah=()=>{const g=D.Promise.resolve(void 0);od=()=>{g.then(qy)}};var qy=()=>{for(var g;g=Ue();){try{g.h.call(g.g)}catch(z){Ct(z)}var x=sd;x.j(g),100>x.h&&(x.h++,g.next=x.g,x.g=g)}tp=!1};function _u(){this.s=this.s,this.C=this.C}function Vo(g,x){this.type=g,this.g=this.target=x,this.defaultPrevented=!1}_u.prototype.s=!1,_u.prototype.ma=function(){this.s||(this.s=!0,this.N())},_u.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Vo.prototype.h=function(){this.defaultPrevented=!0};var EI=function(){if(!D.addEventListener||!Object.defineProperty)return!1;var g=!1,x=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const z=()=>{};D.addEventListener("test",z,x),D.removeEventListener("test",z,x)}catch{}return g}();function dl(g,x){if(Vo.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var z=this.type=g.type,ue=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=x,x=g.relatedTarget){if(Lr){e:{try{ur(x.nodeName);var ht=!0;break e}catch{}ht=!1}ht||(x=null)}}else"mouseover"==z?x=g.fromElement:"mouseout"==z&&(x=g.toElement);this.relatedTarget=x,ue?(this.clientX=void 0!==ue.clientX?ue.clientX:ue.pageX,this.clientY=void 0!==ue.clientY?ue.clientY:ue.pageY,this.screenX=ue.screenX||0,this.screenY=ue.screenY||0):(this.clientX=void 0!==g.clientX?g.clientX:g.pageX,this.clientY=void 0!==g.clientY?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType="string"==typeof g.pointerType?g.pointerType:p0[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&dl.aa.h.call(this)}}jt(dl,Vo);var p0={2:"touch",3:"pen",4:"mouse"};dl.prototype.h=function(){dl.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ad="closure_listenable_"+(1e6*Math.random()|0),Ec=0;function Qy(g,x,z,ue,ht){this.listener=g,this.proxy=null,this.src=x,this.type=z,this.capture=!!ue,this.ha=ht,this.key=++Ec,this.da=this.fa=!1}function np(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function bm(g){this.src=g,this.g={},this.h=0}function Is(g,x){var z=x.type;if(z in g.g){var Nt,ue=g.g[z],ht=Array.prototype.indexOf.call(ue,x,void 0);(Nt=0<=ht)&&Array.prototype.splice.call(ue,ht,1),Nt&&(np(x),0==g.g[z].length&&(delete g.g[z],g.h--))}}function Sm(g,x,z,ue){for(var ht=0;ht<g.length;++ht){var Nt=g[ht];if(!Nt.da&&Nt.listener==x&&Nt.capture==!!z&&Nt.ha==ue)return ht}return-1}bm.prototype.add=function(g,x,z,ue,ht){var Nt=g.toString();(g=this.g[Nt])||(g=this.g[Nt]=[],this.h++);var mn=Sm(g,x,ue,ht);return-1<mn?(x=g[mn],z||(x.fa=!1)):((x=new Qy(x,this.src,Nt,!!ue,ht)).fa=z,g.push(x)),x};var bh="closure_lm_"+(1e6*Math.random()|0),Pm={};function Xy(g,x,z,ue,ht){if(ue&&ue.once)return Mm(g,x,z,ue,ht);if(Array.isArray(x)){for(var Nt=0;Nt<x.length;Nt++)Xy(g,x[Nt],z,ue,ht);return null}return z=Nm(z),g&&g[ad]?g.K(x,z,j(ue)?!!ue.capture:!!ue,ht):rp(g,x,z,!1,ue,ht)}function rp(g,x,z,ue,ht,Nt){if(!x)throw Error("Invalid event type");var mn=j(ht)?!!ht.capture:!!ht,Ri=ip(g);if(Ri||(g[bh]=Ri=new bm(g)),(z=Ri.add(x,z,ue,mn,Nt)).proxy)return z;if(ue=function Yy(){const x=hl;return function g(z){return x.call(g.src,g.listener,z)}}(),z.proxy=ue,ue.src=g,ue.listener=z,g.addEventListener)EI||(ht=mn),void 0===ht&&(ht=!1),g.addEventListener(x.toString(),ue,ht);else if(g.attachEvent)g.attachEvent(Jy(x.toString()),ue);else{if(!g.addListener||!g.removeListener)throw Error("addEventListener and attachEvent are unavailable.");g.addListener(ue)}return z}function Mm(g,x,z,ue,ht){if(Array.isArray(x)){for(var Nt=0;Nt<x.length;Nt++)Mm(g,x[Nt],z,ue,ht);return null}return z=Nm(z),g&&g[ad]?g.L(x,z,j(ue)?!!ue.capture:!!ue,ht):rp(g,x,z,!0,ue,ht)}function Rm(g,x,z,ue,ht){if(Array.isArray(x))for(var Nt=0;Nt<x.length;Nt++)Rm(g,x[Nt],z,ue,ht);else ue=j(ue)?!!ue.capture:!!ue,z=Nm(z),g&&g[ad]?(g=g.i,(x=String(x).toString())in g.g&&-1<(z=Sm(Nt=g.g[x],z,ue,ht))&&(np(Nt[z]),Array.prototype.splice.call(Nt,z,1),0==Nt.length&&(delete g.g[x],g.h--))):g&&(g=ip(g))&&(x=g.g[x.toString()],g=-1,x&&(g=Sm(x,z,ue,ht)),(z=-1<g?x[g]:null)&&Om(z))}function Om(g){if("number"!=typeof g&&g&&!g.da){var x=g.src;if(x&&x[ad])Is(x.i,g);else{var z=g.type,ue=g.proxy;x.removeEventListener?x.removeEventListener(z,ue,g.capture):x.detachEvent?x.detachEvent(Jy(z),ue):x.addListener&&x.removeListener&&x.removeListener(ue),(z=ip(x))?(Is(z,g),0==z.h&&(z.src=null,x[bh]=null)):np(g)}}}function Jy(g){return g in Pm?Pm[g]:Pm[g]="on"+g}function hl(g,x){if(g.da)g=!0;else{x=new dl(x,this);var z=g.listener,ue=g.ha||g.src;g.fa&&Om(g),g=z.call(ue,x)}return g}function ip(g){return(g=g[bh])instanceof bm?g:null}var Sh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nm(g){return"function"==typeof g?g:(g[Sh]||(g[Sh]=function(x){return g.handleEvent(x)}),g[Sh])}function To(){_u.call(this),this.i=new bm(this),this.M=this,this.F=null}function Lo(g,x){var z,ue=g.F;if(ue)for(z=[];ue;ue=ue.F)z.push(ue);if(g=g.M,ue=x.type||x,"string"==typeof x)x=new Vo(x,g);else if(x instanceof Vo)x.target=x.target||g;else{var ht=x;it(x=new Vo(ue,g),ht)}if(ht=!0,z)for(var Nt=z.length-1;0<=Nt;Nt--){var mn=x.g=z[Nt];ht=Ph(mn,ue,!0,x)&&ht}if(ht=Ph(mn=x.g=g,ue,!0,x)&&ht,ht=Ph(mn,ue,!1,x)&&ht,z)for(Nt=0;Nt<z.length;Nt++)ht=Ph(mn=x.g=z[Nt],ue,!1,x)&&ht}function Ph(g,x,z,ue){if(!(x=g.i.g[String(x)]))return!0;x=x.concat();for(var ht=!0,Nt=0;Nt<x.length;++Nt){var mn=x[Nt];if(mn&&!mn.da&&mn.capture==z){var Ri=mn.listener,Uo=mn.ha||mn.src;mn.fa&&Is(g.i,mn),ht=!1!==Ri.call(Uo,ue)&&ht}}return ht&&!ue.defaultPrevented}function cd(g,x,z){if("function"==typeof g)z&&(g=Me(g,z));else{if(!g||"function"!=typeof g.handleEvent)throw Error("Invalid listener argument");g=Me(g.handleEvent,g)}return 2147483647<Number(x)?-1:D.setTimeout(g,x||0)}function sp(g){g.g=cd(()=>{g.g=null,g.i&&(g.i=!1,sp(g))},g.l);const x=g.h;g.h=null,g.m.apply(null,x)}jt(To,_u),To.prototype[ad]=!0,To.prototype.removeEventListener=function(g,x,z,ue){Rm(this,g,x,z,ue)},To.prototype.N=function(){if(To.aa.N.call(this),this.i){var x,g=this.i;for(x in g.g){for(var z=g.g[x],ue=0;ue<z.length;ue++)np(z[ue]);delete g.g[x],g.h--}}this.F=null},To.prototype.K=function(g,x,z,ue){return this.i.add(String(g),x,!1,z,ue)},To.prototype.L=function(g,x,z,ue){return this.i.add(String(g),x,!0,z,ue)};class yu extends _u{constructor(x,z){super(),this.m=x,this.l=z,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:sp(this)}N(){super.N(),this.g&&(D.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vu(g){_u.call(this),this.h=g,this.g={}}jt(vu,_u);var xm=[];function ud(g){br(g.g,function(x,z){this.g.hasOwnProperty(z)&&Om(x)},g),g.g={}}vu.prototype.N=function(){vu.aa.N.call(this),ud(this)},vu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var km=D.JSON.stringify,II=D.JSON.parse,Fm=class{stringify(g){return D.JSON.stringify(g,void 0)}parse(g){return D.JSON.parse(g,void 0)}};function op(){}function ld(){}op.prototype.h=null;var ap={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dd(){Vo.call(this,"d")}function cp(){Vo.call(this,"c")}jt(dd,Vo),jt(cp,Vo);var Eu={},Zy=null;function fl(){return Zy=Zy||new To}function hd(g){Vo.call(this,Eu.La,g)}function Mh(g){const x=fl();Lo(x,new hd(x))}function ev(g,x){Vo.call(this,Eu.STAT_EVENT,g),this.stat=x}function Jo(g){const x=fl();Lo(x,new ev(x,g))}function tv(g,x){Vo.call(this,Eu.Ma,g),this.size=x}function Rh(g,x){if("function"!=typeof g)throw Error("Fn must not be null and must be a function");return D.setTimeout(function(){g()},x)}function Oh(){this.g=!0}function $c(g,x,z,ue){g.info(function(){return"XMLHTTP TEXT ("+x+"): "+function DI(g,x){if(!g.g)return x;if(!x)return null;try{var z=JSON.parse(x);if(z)for(g=0;g<z.length;g++)if(Array.isArray(z[g])){var ue=z[g];if(!(2>ue.length)){var ht=ue[1];if(Array.isArray(ht)&&!(1>ht.length)){var Nt=ht[0];if("noop"!=Nt&&"stop"!=Nt&&"close"!=Nt)for(var mn=1;mn<ht.length;mn++)ht[mn]=""}}}return km(z)}catch{return x}}(g,z)+(ue?" "+ue:"")})}Eu.La="serverreachability",jt(hd,Vo),Eu.STAT_EVENT="statevent",jt(ev,Vo),Eu.Ma="timingevent",jt(tv,Vo),Oh.prototype.xa=function(){this.g=!1},Oh.prototype.info=function(){};var xh,Nh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function kh(){}function Iu(g,x,z,ue){this.j=g,this.i=x,this.l=z,this.R=ue||1,this.U=new vu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lm}function Lm(){this.i=null,this.g="",this.h=!1}jt(kh,op),kh.prototype.g=function(){return new XMLHttpRequest},kh.prototype.i=function(){return{}},xh=new kh;var up={},lp={};function dp(g,x,z){g.L=1,g.v=Lh(Ic(x)),g.m=z,g.P=!0,nv(g,null)}function nv(g,x){g.F=Date.now(),fd(g),g.A=Ic(g.v);var z=g.A,ue=g.R;Array.isArray(ue)||(ue=[String(ue)]),OI(z.i,"t",ue),g.C=0,z=g.j.J,g.h=new Lm,g.g=wv(g.j,z?x:null,!g.m),0<g.O&&(g.M=new yu(Me(g.Y,g,g.g),g.O)),x=g.U,z=g.g,ue=g.ca;var ht="readystatechange";Array.isArray(ht)||(ht&&(xm[0]=ht.toString()),ht=xm);for(var Nt=0;Nt<ht.length;Nt++){var mn=Xy(z,ht[Nt],ue||x.handleEvent,!1,x.h||x);if(!mn)break;x.g[mn.key]=mn}x=g.H?Ae(g.H):{},g.m?(g.u||(g.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,x)):(g.u="GET",g.g.ea(g.A,g.u,null,x)),Mh(),function CI(g,x,z,ue,ht,Nt){g.info(function(){if(g.g)if(Nt)for(var mn="",Ri=Nt.split("&"),Uo=0;Uo<Ri.length;Uo++){var wi=Ri[Uo].split("=");if(1<wi.length){var Bo=wi[0];wi=wi[1];var Zo=Bo.split("_");mn=2<=Zo.length&&"type"==Zo[1]?mn+(Bo+"=")+wi+"&":mn+(Bo+"=redacted&")}}else mn=null;else mn=Nt;return"XMLHTTP REQ ("+ue+") [attempt "+ht+"]: "+x+"\n"+z+"\n"+mn})}(g.i,g.u,g.A,g.l,g.R,g.m)}function rv(g){return!!g.g&&"GET"==g.u&&2!=g.L&&g.j.Ca}function AI(g,x){var z=g.C,ue=x.indexOf("\n",z);return-1==ue?lp:(z=Number(x.substring(z,ue)),isNaN(z)?up:(ue+=1)+z>x.length?lp:(x=x.slice(ue,ue+z),g.C=ue+z,x))}function fd(g){g.S=Date.now()+g.I,hp(g,g.I)}function hp(g,x){if(null!=g.B)throw Error("WatchDog timer not null");g.B=Rh(Me(g.ba,g),x)}function fp(g){g.B&&(D.clearTimeout(g.B),g.B=null)}function pl(g){0==g.j.G||g.J||Iv(g.j,g)}function Hc(g){fp(g);var x=g.M;x&&"function"==typeof x.ma&&x.ma(),g.M=null,ud(g.U),g.g&&(x=g.g,g.g=null,x.abort(),x.ma())}function Um(g,x){try{var z=g.j;if(0!=z.G&&(z.g==g||Fh(z.h,g)))if(!g.K&&Fh(z.h,g)&&3==z.G){try{var ue=z.Da.g.parse(x)}catch{ue=null}if(Array.isArray(ue)&&3==ue.length){var ht=ue;if(0==ht[0]){e:if(!z.u){if(z.g){if(!(z.g.F+3e3<g.F))break e;Ip(z),$h(z)}Ym(z),Jo(18)}}else z.za=ht[1],0<z.za-z.T&&37500>ht[2]&&z.F&&0==z.v&&!z.C&&(z.C=Rh(Me(z.Za,z),6e3));if(1>=Bm(z.h)&&z.ca){try{z.ca()}catch{}z.ca=void 0}}else yl(z,11)}else if((g.K||z.g==g)&&Ip(z),!nr(x))for(ht=z.Da.g.parse(x),x=0;x<ht.length;x++){let wi=ht[x];if(z.T=wi[0],wi=wi[1],2==z.G)if("c"==wi[0]){z.K=wi[1],z.ia=wi[2];const Bo=wi[3];null!=Bo&&(z.la=Bo,z.j.info("VER="+z.la));const Zo=wi[4];null!=Zo&&(z.Aa=Zo,z.j.info("SVER="+z.Aa));const Qa=wi[5];null!=Qa&&"number"==typeof Qa&&0<Qa&&(z.L=ue=1.5*Qa,z.j.info("backChannelRequestTimeoutMs_="+ue)),ue=z;const Cc=g.g;if(Cc){const vl=Cc.g?Cc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vl){var Nt=ue.h;Nt.g||-1==vl.indexOf("spdy")&&-1==vl.indexOf("quic")&&-1==vl.indexOf("h2")||(Nt.j=Nt.l,Nt.g=new Set,Nt.h&&(Vh(Nt,Nt.h),Nt.h=null))}if(ue.D){const n_=Cc.g?Cc.g.getResponseHeader("X-HTTP-Session-Id"):null;n_&&(ue.ya=n_,es(ue.I,ue.D,n_))}}z.G=3,z.l&&z.l.ua(),z.ba&&(z.R=Date.now()-g.F,z.j.info("Handshake RTT: "+z.R+"ms"));var mn=g;if((ue=z).qa=e_(ue,ue.J?ue.ia:null,ue.W),mn.K){jm(ue.h,mn);var Ri=mn,Uo=ue.L;Uo&&(Ri.I=Uo),Ri.B&&(fp(Ri),fd(Ri)),ue.g=mn}else Gh(ue);0<z.i.length&&vp(z)}else"stop"!=wi[0]&&"close"!=wi[0]||yl(z,7);else 3==z.G&&("stop"==wi[0]||"close"==wi[0]?"stop"==wi[0]?yl(z,7):_v(z):"noop"!=wi[0]&&z.l&&z.l.ta(wi),z.v=0)}Mh()}catch{}}Iu.prototype.ca=function(g){g=g.target;const x=this.M;x&&3==Gc(g)?x.j():this.Y(g)},Iu.prototype.Y=function(g){try{if(g==this.g)e:{const Zo=Gc(this.g);var x=this.g.Ba();if(this.g.Z(),!(3>Zo)&&(3!=Zo||this.g&&(this.h.h||this.g.oa()||Bh(this.g)))){this.J||4!=Zo||7==x||Mh(),fp(this);var z=this.g.Z();this.X=z;t:if(rv(this)){var ue=Bh(this.g);g="";var ht=ue.length,Nt=4==Gc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hc(this),pl(this);var mn="";break t}this.h.i=new D.TextDecoder}for(x=0;x<ht;x++)this.h.h=!0,g+=this.h.i.decode(ue[x],{stream:!(Nt&&x==ht-1)});ue.length=0,this.h.g+=g,this.C=0,mn=this.h.g}else mn=this.g.oa();if(this.o=200==z,function wI(g,x,z,ue,ht,Nt,mn){g.info(function(){return"XMLHTTP RESP ("+ue+") [ attempt "+ht+"]: "+x+"\n"+z+"\n"+Nt+" "+mn})}(this.i,this.u,this.A,this.l,this.R,Zo,z),this.o){if(this.T&&!this.K){t:{if(this.g){var Ri,Uo=this.g;if((Ri=Uo.g?Uo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nr(Ri)){var wi=Ri;break t}}wi=null}if(!(z=wi)){this.o=!1,this.s=3,Jo(12),Hc(this),pl(this);break e}$c(this.i,this.l,z,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Um(this,z)}if(this.P){let Cc;for(z=!0;!this.J&&this.C<mn.length;){if(Cc=AI(this,mn),Cc==lp){4==Zo&&(this.s=4,Jo(14),z=!1),$c(this.i,this.l,null,"[Incomplete Response]");break}if(Cc==up){this.s=4,Jo(15),$c(this.i,this.l,mn,"[Invalid Chunk]"),z=!1;break}$c(this.i,this.l,Cc,null),Um(this,Cc)}if(rv(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Zo||0!=mn.length||this.h.h||(this.s=1,Jo(16),z=!1),this.o=this.o&&z,z){if(0<mn.length&&!this.W){this.W=!0;var Bo=this.j;Bo.g==this&&Bo.ba&&!Bo.M&&(Bo.j.info("Great, no buffering proxy detected. Bytes received: "+mn.length),Jm(Bo),Bo.M=!0,Jo(11))}}else $c(this.i,this.l,mn,"[Invalid Chunked Response]"),Hc(this),pl(this)}else $c(this.i,this.l,mn,null),Um(this,mn);4==Zo&&Hc(this),this.o&&!this.J&&(4==Zo?Iv(this.j,this):(this.o=!1,fd(this)))}else(function mv(g){const x={};g=(g.g&&2<=Gc(g)&&g.g.getAllResponseHeaders()||"").split("\r\n");for(let ue=0;ue<g.length;ue++){if(nr(g[ue]))continue;var z=ut(g[ue]);const ht=z[0];if("string"!=typeof(z=z[1]))continue;z=z.trim();const Nt=x[ht]||[];x[ht]=Nt,Nt.push(z)}!function nt(g,x){for(const z in g)x.call(void 0,g[z],z,g)}(x,function(ue){return ue.join(", ")})})(this.g),400==z&&0<mn.indexOf("Unknown SID")?(this.s=3,Jo(12)):(this.s=0,Jo(13)),Hc(this),pl(this)}}}catch{}},Iu.prototype.cancel=function(){this.J=!0,Hc(this)},Iu.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(function TI(g,x){g.info(function(){return"TIMEOUT: "+x})}(this.i,this.A),2!=this.L&&(Mh(),Jo(17)),Hc(this),this.s=2,pl(this)):hp(this,this.S-g)};var bI=class{constructor(g,x){this.g=g,this.map=x}};function iv(g){this.l=g||10,g=D.PerformanceNavigationTiming?0<(g=D.performance.getEntriesByType("navigation")).length&&("hq"==g[0].nextHopProtocol||"h2"==g[0].nextHopProtocol):!!(D.chrome&&D.chrome.loadTimes&&D.chrome.loadTimes()&&D.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sv(g){return!!g.h||!!g.g&&g.g.size>=g.j}function Bm(g){return g.h?1:g.g?g.g.size:0}function Fh(g,x){return g.h?g.h==x:!!g.g&&g.g.has(x)}function Vh(g,x){g.g?g.g.add(x):g.h=x}function jm(g,x){g.h&&g.h==x?g.h=null:g.g&&g.g.has(x)&&g.g.delete(x)}function $m(g){if(null!=g.h)return g.i.concat(g.h.D);if(null!=g.g&&0!==g.g.size){let x=g.i;for(const z of g.g.values())x=x.concat(z.D);return x}return sn(g.i)}function Hm(g,x){if(g.forEach&&"function"==typeof g.forEach)g.forEach(x,void 0);else if(N(g)||"string"==typeof g)Array.prototype.forEach.call(g,x,void 0);else for(var z=function SI(g){if(g.na&&"function"==typeof g.na)return g.na();if(!g.V||"function"!=typeof g.V){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(N(g)||"string"==typeof g){var x=[];g=g.length;for(var z=0;z<g;z++)x.push(z);return x}x=[],z=0;for(const ue in g)x[z++]=ue;return x}}}(g),ue=function ov(g){if(g.V&&"function"==typeof g.V)return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if("string"==typeof g)return g.split("");if(N(g)){for(var x=[],z=g.length,ue=0;ue<z;ue++)x.push(g[ue]);return x}for(ue in x=[],z=0,g)x[z++]=g[ue];return x}(g),ht=ue.length,Nt=0;Nt<ht;Nt++)x.call(void 0,ue[Nt],z&&z[Nt],g)}iv.prototype.cancel=function(){if(this.i=$m(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const g of this.g.values())g.cancel();this.g.clear()}};var av=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cu(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Cu){this.h=g.h,zm(this,g.j),this.o=g.o,this.g=g.g,Wm(this,g.s),this.l=g.l;var x=g.i,z=new pp;z.i=x.i,x.g&&(z.g=new Map(x.g),z.h=x.h),cv(this,z),this.m=g.m}else g&&(x=String(g).match(av))?(this.h=!1,zm(this,x[1]||"",!0),this.o=gl(x[2]||""),this.g=gl(x[3]||"",!0),Wm(this,x[4]),this.l=gl(x[5]||"",!0),cv(this,x[6]||"",!0),this.m=gl(x[7]||"")):(this.h=!1,this.i=new pp(null,this.h))}function Ic(g){return new Cu(g)}function zm(g,x,z){g.j=z?gl(x,!0):x,g.j&&(g.j=g.j.replace(/:$/,""))}function Wm(g,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);g.s=x}else g.s=null}function cv(g,x,z){x instanceof pp?(g.i=x,function dv(g,x){x&&!g.j&&(ml(g),g.i=null,g.g.forEach(function(z,ue){var ht=ue.toLowerCase();ue!=ht&&(MI(this,ue),OI(this,ht,z))},g)),g.j=x}(g.i,g.h)):(z||(x=pd(x,g0)),g.i=new pp(x,g.h))}function es(g,x,z){g.i.set(x,z)}function Lh(g){return es(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function gl(g,x){return g?x?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function pd(g,x,z){return"string"==typeof g?(g=encodeURI(g).replace(x,uv),z&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function uv(g){return"%"+((g=g.charCodeAt(0))>>4&15).toString(16)+(15&g).toString(16)}Cu.prototype.toString=function(){var g=[],x=this.j;x&&g.push(pd(x,Km,!0),":");var z=this.g;return(z||"file"==x)&&(g.push("//"),(x=this.o)&&g.push(pd(x,Km,!0),"@"),g.push(encodeURIComponent(String(z)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(z=this.s)&&g.push(":",String(z))),(z=this.l)&&(this.g&&"/"!=z.charAt(0)&&g.push("/"),g.push(pd(z,"/"==z.charAt(0)?PI:lv,!0))),(z=this.i.toString())&&g.push("?",z),(z=this.m)&&g.push("#",pd(z,m0)),g.join("")};var Km=/[#\/\?@]/g,lv=/[#\?:]/g,PI=/[#\?]/g,g0=/[#\?@]/g,m0=/#/g;function pp(g,x){this.h=this.g=null,this.i=g||null,this.j=!!x}function ml(g){g.g||(g.g=new Map,g.h=0,g.i&&function Gm(g,x){if(g){g=g.split("&");for(var z=0;z<g.length;z++){var ue=g[z].indexOf("="),ht=null;if(0<=ue){var Nt=g[z].substring(0,ue);ht=g[z].substring(ue+1)}else Nt=g[z];x(Nt,ht?decodeURIComponent(ht.replace(/\+/g," ")):"")}}}(g.i,function(x,z){g.add(decodeURIComponent(x.replace(/\+/g," ")),z)}))}function MI(g,x){ml(g),x=Uh(g,x),g.g.has(x)&&(g.i=null,g.h-=g.g.get(x).length,g.g.delete(x))}function RI(g,x){return ml(g),x=Uh(g,x),g.g.has(x)}function OI(g,x,z){MI(g,x),0<z.length&&(g.i=null,g.g.set(Uh(g,x),sn(z)),g.h+=z.length)}function Uh(g,x){return x=String(x),g.j&&(x=x.toLowerCase()),x}function _l(g,x,z,ue,ht){try{ht&&(ht.onload=null,ht.onerror=null,ht.onabort=null,ht.ontimeout=null),ue(z)}catch{}}function y0(){this.g=new Fm}function v0(g,x,z){const ue=z||"";try{Hm(g,function(ht,Nt){let mn=ht;j(ht)&&(mn=km(ht)),x.push(ue+Nt+"="+encodeURIComponent(mn))})}catch(ht){throw x.push(ue+"type="+encodeURIComponent("_badmap")),ht}}function gp(g){this.l=g.Ub||null,this.j=g.eb||!1}function qm(g,x){To.call(this),this.D=g,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function NI(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}function mp(g){g.readyState=4,g.l=null,g.j=null,g.v=null,_p(g)}function _p(g){g.onreadystatechange&&g.onreadystatechange.call(g)}function fv(g){let x="";return br(g,function(z,ue){x+=ue,x+=":",x+=z,x+="\r\n"}),x}function wu(g,x,z){e:{for(ue in z){var ue=!1;break e}ue=!0}ue||(z=fv(z),"string"==typeof g?null!=z&&encodeURIComponent(String(z)):es(g,x,z))}function ts(g){To.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=pp.prototype).add=function(g,x){ml(this),this.i=null,g=Uh(this,g);var z=this.g.get(g);return z||this.g.set(g,z=[]),z.push(x),this.h+=1,this},a.forEach=function(g,x){ml(this),this.g.forEach(function(z,ue){z.forEach(function(ht){g.call(x,ht,ue,this)},this)},this)},a.na=function(){ml(this);const g=Array.from(this.g.values()),x=Array.from(this.g.keys()),z=[];for(let ue=0;ue<x.length;ue++){const ht=g[ue];for(let Nt=0;Nt<ht.length;Nt++)z.push(x[ue])}return z},a.V=function(g){ml(this);let x=[];if("string"==typeof g)RI(this,g)&&(x=x.concat(this.g.get(Uh(this,g))));else{g=Array.from(this.g.values());for(let z=0;z<g.length;z++)x=x.concat(g[z])}return x},a.set=function(g,x){return ml(this),this.i=null,RI(this,g=Uh(this,g))&&(this.h-=this.g.get(g).length),this.g.set(g,[x]),this.h+=1,this},a.get=function(g,x){return g&&0<(g=this.V(g)).length?String(g[0]):x},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],x=Array.from(this.g.keys());for(var z=0;z<x.length;z++){var ue=x[z];const Nt=encodeURIComponent(String(ue)),mn=this.V(ue);for(ue=0;ue<mn.length;ue++){var ht=Nt;""!==mn[ue]&&(ht+="="+encodeURIComponent(String(mn[ue]))),g.push(ht)}}return this.i=g.join("&")},jt(gp,op),gp.prototype.g=function(){return new qm(this.l,this.j)},gp.prototype.i=function(g){return function(){return g}}({}),jt(qm,To),(a=qm.prototype).open=function(g,x){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=x,this.readyState=1,_p(this)},a.send=function(g){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(x.body=g),(this.D||D).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mp(this)),this.readyState=0},a.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,_p(this)),this.g&&(this.readyState=3,_p(this),this.g)))if("arraybuffer"===this.responseType)g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof D.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;NI(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var x=g.value?g.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!g.done}))&&(this.response=this.responseText+=x)}g.done?mp(this):_p(this),3==this.readyState&&NI(this)}},a.Ra=function(g){this.g&&(this.response=this.responseText=g,mp(this))},a.Qa=function(g){this.g&&(this.response=g,mp(this))},a.ga=function(){this.g&&mp(this)},a.setRequestHeader=function(g,x){this.u.append(g,x)},a.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],x=this.h.entries();for(var z=x.next();!z.done;)g.push((z=z.value)[0]+": "+z[1]),z=x.next();return g.join("\r\n")},Object.defineProperty(qm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(g){this.m=g?"include":"same-origin"}}),jt(ts,To);var xI=/^https?$/i,E0=["POST","PUT"];function Qm(g,x){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=x,g.m=5,pv(g),yp(g)}function pv(g){g.A||(g.A=!0,Lo(g,"complete"),Lo(g,"error"))}function kI(g){if(g.h&&typeof m<"u"&&(!g.v[1]||4!=Gc(g)||2!=g.Z()))if(g.u&&4==Gc(g))cd(g.Ea,0,g);else if(Lo(g,"readystatechange"),4==Gc(g)){g.h=!1;try{const mn=g.Z();e:switch(mn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var z;if(!(z=x)){var ue;if(ue=0===mn){var ht=String(g.D).match(av)[1]||null;!ht&&D.self&&D.self.location&&(ht=D.self.location.protocol.slice(0,-1)),ue=!xI.test(ht?ht.toLowerCase():"")}z=ue}if(z)Lo(g,"complete"),Lo(g,"success");else{g.m=6;try{var Nt=2<Gc(g)?g.g.statusText:""}catch{Nt=""}g.l=Nt+" ["+g.Z()+"]",pv(g)}}finally{yp(g)}}}function yp(g,x){if(g.g){gv(g);const z=g.g,ue=g.v[0]?()=>{}:null;g.g=null,g.v=null,x||Lo(g,"ready");try{z.onreadystatechange=ue}catch{}}}function gv(g){g.I&&(D.clearTimeout(g.I),g.I=null)}function Gc(g){return g.g?g.g.readyState:0}function Bh(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function jh(g,x,z){return z&&z.internalChannelParams&&z.internalChannelParams[g]||x}function Xm(g){this.Aa=0,this.i=[],this.j=new Oh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jh("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jh("baseRetryDelayMs",5e3,g),this.cb=jh("retryDelaySeedMs",1e4,g),this.Wa=jh("forwardChannelMaxRetries",2,g),this.wa=jh("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new iv(g&&g.concurrentRequestLimit),this.Da=new y0,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function _v(g){if(FI(g),3==g.G){var x=g.U++,z=Ic(g.I);if(es(z,"SID",g.K),es(z,"RID",x),es(z,"TYPE","terminate"),Hh(g,z),(x=new Iu(g,g.j,x)).L=2,x.v=Lh(Ic(z)),z=!1,D.navigator&&D.navigator.sendBeacon)try{z=D.navigator.sendBeacon(x.v.toString(),"")}catch{}!z&&D.Image&&((new Image).src=x.v,z=!0),z||(x.g=wv(x.j,null),x.g.ea(x.v)),x.F=Date.now(),fd(x)}Zm(g)}function $h(g){g.g&&(Jm(g),g.g.cancel(),g.g=null)}function FI(g){$h(g),g.u&&(D.clearTimeout(g.u),g.u=null),Ip(g),g.h.cancel(),g.s&&("number"==typeof g.s&&D.clearTimeout(g.s),g.s=null)}function vp(g){if(!sv(g.h)&&!g.s){g.s=!0;var x=g.Ga;od||Ah(),tp||(od(),tp=!0),Am.add(x,g),g.B=0}}function Ep(g,x){var z;z=x?x.l:g.U++;const ue=Ic(g.I);es(ue,"SID",g.K),es(ue,"RID",z),es(ue,"AID",g.T),Hh(g,ue),g.m&&g.o&&wu(ue,g.m,g.o),z=new Iu(g,g.j,z,g.B+1),null===g.m&&(z.H=g.o),x&&(g.i=x.D.concat(g.i)),x=vv(g,z,1e3),z.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Vh(g.h,z),dp(z,ue,x)}function Hh(g,x){g.H&&br(g.H,function(z,ue){es(x,ue,z)}),g.l&&Hm({},function(z,ue){es(x,ue,z)})}function vv(g,x,z){z=Math.min(g.i.length,z);var ue=g.l?Me(g.l.Na,g.l,g):null;e:{var ht=g.i;let Nt=-1;for(;;){const mn=["count="+z];-1==Nt?0<z?(Nt=ht[0].g,mn.push("ofs="+Nt)):Nt=0:mn.push("ofs="+Nt);let Ri=!0;for(let Uo=0;Uo<z;Uo++){let wi=ht[Uo].g;const Bo=ht[Uo].map;if(wi-=Nt,0>wi)Nt=Math.max(0,ht[Uo].g-100),Ri=!1;else try{v0(Bo,mn,"req"+wi+"_")}catch{ue&&ue(Bo)}}if(Ri){ue=mn.join("&");break e}}}return g=g.i.splice(0,z),x.D=g,ue}function Gh(g){if(!g.g&&!g.u){g.Y=1;var x=g.Fa;od||Ah(),tp||(od(),tp=!0),Am.add(x,g),g.v=0}}function Ym(g){return!(g.g||g.u||3<=g.v||(g.Y++,g.u=Rh(Me(g.Fa,g),Cv(g,g.v)),g.v++,0))}function Jm(g){null!=g.A&&(D.clearTimeout(g.A),g.A=null)}function Ev(g){g.g=new Iu(g,g.j,"rpc",g.Y),null===g.m&&(g.g.H=g.o),g.g.O=0;var x=Ic(g.qa);es(x,"RID","rpc"),es(x,"SID",g.K),es(x,"AID",g.T),es(x,"CI",g.F?"0":"1"),!g.F&&g.ja&&es(x,"TO",g.ja),es(x,"TYPE","xmlhttp"),Hh(g,x),g.m&&g.o&&wu(x,g.m,g.o),g.L&&(g.g.I=g.L);var z=g.g;g=g.ia,z.L=1,z.v=Lh(Ic(x)),z.m=null,z.P=!0,nv(z,g)}function Ip(g){null!=g.C&&(D.clearTimeout(g.C),g.C=null)}function Iv(g,x){var z=null;if(g.g==x){Ip(g),Jm(g),g.g=null;var ue=2}else{if(!Fh(g.h,x))return;z=x.D,jm(g.h,x),ue=1}if(0!=g.G)if(x.o)if(1==ue){z=x.m?x.m.length:0,x=Date.now()-x.F;var ht=g.B;Lo(ue=fl(),new tv(ue,z)),vp(g)}else Gh(g);else if(3==(ht=x.s)||0==ht&&0<x.X||!(1==ue&&function yv(g,x){return!(Bm(g.h)>=g.h.j-(g.s?1:0)||(g.s?(g.i=x.D.concat(g.i),0):1==g.G||2==g.G||g.B>=(g.Va?0:g.Wa)||(g.s=Rh(Me(g.Ga,g,x),Cv(g,g.B)),g.B++,0)))}(g,x)||2==ue&&Ym(g)))switch(z&&0<z.length&&(x=g.h,x.i=x.i.concat(z)),ht){case 1:yl(g,5);break;case 4:yl(g,10);break;case 3:yl(g,6);break;default:yl(g,2)}}function Cv(g,x){let z=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(z*=2),z*x}function yl(g,x){if(g.j.info("Error code "+x),2==x){var z=Me(g.fb,g),ue=g.Xa;const ht=!ue;ue=new Cu(ue||"//www.google.com/images/cleardot.gif"),D.location&&"http"==D.location.protocol||zm(ue,"https"),Lh(ue),ht?function hv(g,x){const z=new Oh;if(D.Image){const ue=new Image;ue.onload=ct(_l,z,"TestLoadImage: loaded",!0,x,ue),ue.onerror=ct(_l,z,"TestLoadImage: error",!1,x,ue),ue.onabort=ct(_l,z,"TestLoadImage: abort",!1,x,ue),ue.ontimeout=ct(_l,z,"TestLoadImage: timeout",!1,x,ue),D.setTimeout(function(){ue.ontimeout&&ue.ontimeout()},1e4),ue.src=g}else x(!1)}(ue.toString(),z):function _0(g,x){new Oh;const ue=new AbortController,ht=setTimeout(()=>{ue.abort(),_l(0,0,!1,x)},1e4);fetch(g,{signal:ue.signal}).then(Nt=>{clearTimeout(ht),_l(0,0,!!Nt.ok,x)}).catch(()=>{clearTimeout(ht),_l(0,0,!1,x)})}(ue.toString(),z)}else Jo(2);g.G=0,g.l&&g.l.sa(x),Zm(g),FI(g)}function Zm(g){if(g.G=0,g.ka=[],g.l){const x=$m(g.h);(0!=x.length||0!=g.i.length)&&(Xt(g.ka,x),Xt(g.ka,g.i),g.h.i.length=0,sn(g.i),g.i.length=0),g.l.ra()}}function e_(g,x,z){var ue=z instanceof Cu?Ic(z):new Cu(z);if(""!=ue.g)x&&(ue.g=x+"."+ue.g),Wm(ue,ue.s);else{var ht=D.location;ue=ht.protocol,x=x?x+"."+ht.hostname:ht.hostname,ht=+ht.port;var Nt=new Cu(null);ue&&zm(Nt,ue),x&&(Nt.g=x),ht&&Wm(Nt,ht),z&&(Nt.l=z),ue=Nt}return x=g.ya,(z=g.D)&&x&&es(ue,z,x),es(ue,"VER",g.la),Hh(g,ue),ue}function wv(g,x,z){if(x&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return(x=new ts(g.Ca&&!g.pa?new gp({eb:z}):g.pa)).Ha(g.J),x}function VI(){}function zh(){}function la(g,x){To.call(this),this.g=new Xm(x),this.l=g,this.h=x&&x.messageUrlParams||null,g=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(g?g["X-WebChannel-Content-Type"]=x.messageContentType:g={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(g?g["X-WebChannel-Client-Profile"]=x.va:g={"X-WebChannel-Client-Profile":x.va}),this.g.S=g,(g=x&&x.Sb)&&!nr(g)&&(this.g.m=g),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!nr(x)&&(this.g.D=x,null!==(g=this.h)&&x in g&&x in(g=this.h)&&delete g[x]),this.j=new gd(this)}function Tu(g){dd.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var x=g.__sm__;if(x){e:{for(const z in x){g=z;break e}g=void 0}(this.i=g)&&(g=this.i,x=null!==x&&g in x?x[g]:void 0),this.data=x}else this.data=g}function t_(){cp.call(this),this.status=1}function gd(g){this.g=g}(a=ts.prototype).Ha=function(g){this.J=g},a.ea=function(g,x,z,ue){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);x=x?x.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xh.g(),this.v=function jc(g){return g.h||(g.h=g.i())}(this.o?this.o:xh),this.g.onreadystatechange=Me(this.Ea,this);try{this.B=!0,this.g.open(x,String(g),!0),this.B=!1}catch(Nt){return void Qm(this,Nt)}if(g=z||"",z=new Map(this.headers),ue)if(Object.getPrototypeOf(ue)===Object.prototype)for(var ht in ue)z.set(ht,ue[ht]);else{if("function"!=typeof ue.keys||"function"!=typeof ue.get)throw Error("Unknown input type for opt_headers: "+String(ue));for(const Nt of ue.keys())z.set(Nt,ue.get(Nt))}ue=Array.from(z.keys()).find(Nt=>"content-type"==Nt.toLowerCase()),ht=D.FormData&&g instanceof D.FormData,!(0<=Array.prototype.indexOf.call(E0,x,void 0))||ue||ht||z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Nt,mn]of z)this.g.setRequestHeader(Nt,mn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gv(this),this.u=!0,this.g.send(g),this.u=!1}catch(Nt){Qm(this,Nt)}},a.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,Lo(this,"complete"),Lo(this,"abort"),yp(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yp(this,!0)),ts.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?kI(this):this.bb())},a.bb=function(){kI(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<Gc(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(g){if(this.g){var x=this.g.responseText;return g&&0==x.indexOf(g)&&(x=x.substring(g.length)),II(x)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=Xm.prototype).la=8,a.G=1,a.connect=function(g,x,z,ue){Jo(0),this.W=g,this.H=x||{},z&&void 0!==ue&&(this.H.OSID=z,this.H.OAID=ue),this.F=this.X,this.I=e_(this,null,this.W),vp(this)},a.Ga=function(g){if(this.s)if(this.s=null,1==this.G){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const ht=new Iu(this,this.j,g);let Nt=this.o;if(this.S&&(Nt?(Nt=Ae(Nt),it(Nt,this.S)):Nt=this.S),null!==this.m||this.O||(ht.H=Nt,Nt=null),this.P)e:{for(var x=0,z=0;z<this.i.length;z++){var ue=this.i[z];if(void 0===(ue="__data__"in ue.map&&"string"==typeof(ue=ue.map.__data__)?ue.length:void 0))break;if(4096<(x+=ue)){x=z;break e}if(4096===x||z===this.i.length-1){x=z+1;break e}}x=1e3}else x=1e3;x=vv(this,ht,x),es(z=Ic(this.I),"RID",g),es(z,"CVER",22),this.D&&es(z,"X-HTTP-Session-Id",this.D),Hh(this,z),Nt&&(this.O?x="headers="+encodeURIComponent(String(fv(Nt)))+"&"+x:this.m&&wu(z,this.m,Nt)),Vh(this.h,ht),this.Ua&&es(z,"TYPE","init"),this.P?(es(z,"$req",x),es(z,"SID","null"),ht.T=!0,dp(ht,z,null)):dp(ht,z,x),this.G=2}}else 3==this.G&&(g?Ep(this,g):0==this.i.length||sv(this.h)||Ep(this))},a.Fa=function(){if(this.u=null,Ev(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Rh(Me(this.ab,this),g)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jo(10),$h(this),Ev(this))},a.Za=function(){null!=this.C&&(this.C=null,$h(this),Ym(this),Jo(19))},a.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Jo(2)):(this.j.info("Failed to ping google.com"),Jo(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=VI.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},zh.prototype.g=function(g,x){return new la(g,x)},jt(la,To),la.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},la.prototype.close=function(){_v(this.g)},la.prototype.o=function(g){var x=this.g;if("string"==typeof g){var z={};z.__data__=g,g=z}else this.u&&((z={}).__data__=km(g),g=z);x.i.push(new bI(x.Ya++,g)),3==x.G&&vp(x)},la.prototype.N=function(){this.g.l=null,delete this.j,_v(this.g),delete this.g,la.aa.N.call(this)},jt(Tu,dd),jt(t_,cp),jt(gd,VI),gd.prototype.ua=function(){Lo(this.g,"a")},gd.prototype.ta=function(g){Lo(this.g,new Tu(g))},gd.prototype.sa=function(g){Lo(this.g,new t_)},gd.prototype.ra=function(){Lo(this.g,"b")},zh.prototype.createWebChannel=zh.prototype.g,la.prototype.send=la.prototype.o,la.prototype.open=la.prototype.m,la.prototype.close=la.prototype.close,qt=Bt.createWebChannelTransport=function(){return new zh},et=Bt.getStatEventTarget=function(){return fl()},Et=Bt.Event=Eu,yt=Bt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nh.NO_ERROR=0,Nh.TIMEOUT=8,Nh.HTTP_ERROR=6,lt=Bt.ErrorCode=Nh,Vm.COMPLETE="complete",Qe=Bt.EventType=Vm,ld.EventType=ap,ap.OPEN="a",ap.CLOSE="b",ap.ERROR="c",ap.MESSAGE="d",To.prototype.listen=To.prototype.K,xe=Bt.WebChannel=ld,Tn=Bt.FetchXmlHttpFactory=gp,ts.prototype.listenOnce=ts.prototype.L,ts.prototype.getLastError=ts.prototype.Ka,ts.prototype.getLastErrorCode=ts.prototype.Ba,ts.prototype.getStatus=ts.prototype.Z,ts.prototype.getResponseJson=ts.prototype.Oa,ts.prototype.getResponseText=ts.prototype.oa,ts.prototype.send=ts.prototype.ea,ts.prototype.setWithCredentials=ts.prototype.Ha,tn=Bt.XhrIo=ts}).apply(typeof Kt<"u"?Kt:typeof self<"u"?self:typeof window<"u"?window:{});const pn="@firebase/firestore";class on{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");let an="10.13.1";const Dn=new st.Vy("@firebase/firestore");function An(){return Dn.logLevel}function at(a,...t){if(Dn.logLevel<=st.$b.DEBUG){const r=t.map(Xn);Dn.debug(`Firestore (${an}): ${a}`,...r)}}function In(a,...t){if(Dn.logLevel<=st.$b.ERROR){const r=t.map(Xn);Dn.error(`Firestore (${an}): ${a}`,...r)}}function Qn(a,...t){if(Dn.logLevel<=st.$b.WARN){const r=t.map(Xn);Dn.warn(`Firestore (${an}): ${a}`,...r)}}function Xn(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function bt(a="Unexpected state"){const t=`FIRESTORE (${an}) INTERNAL ASSERTION FAILED: `+a;throw In(t),new Error(t)}function pt(a,t){a||bt()}function Rt(a,t){return a}const Xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ot extends le.g{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class rr{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}class Yn{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Pn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(on.UNAUTHENTICATED))}shutdown(){}}class vn{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class xr{constructor(t){this.t=t,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){var o=this;let u=this.i;const d=j=>this.i!==u?(u=this.i,r(j)):Promise.resolve();let m=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new rr,t.enqueueRetryable(()=>d(this.currentUser))};const D=()=>{const j=m;t.enqueueRetryable((0,te.A)(function*(){yield j.promise,yield d(o.currentUser)}))},N=j=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=j,this.auth.addAuthTokenListener(this.o),D()};this.t.onInit(j=>N(j)),setTimeout(()=>{if(!this.auth){const j=this.t.getImmediate({optional:!0});j?N(j):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new rr)}},0),D()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(o=>this.i!==t?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(pt("string"==typeof o.accessToken),new Yn(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return pt(null===t||"string"==typeof t),new on(t)}}class $r{constructor(t,r,o){this.l=t,this.h=r,this.P=o,this.type="FirstParty",this.user=on.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Hr{constructor(t,r,o){this.l=t,this.h=r,this.P=o}getToken(){return Promise.resolve(new $r(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $i{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sr{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){const o=d=>{null!=d.error&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const m=d.token!==this.R;return this.R=d.token,at("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?r(d.token):Promise.resolve()};this.o=d=>{t.enqueueRetryable(()=>o(d))};const u=d=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.A.onInit(d=>u(d)),setTimeout(()=>{if(!this.appCheck){const d=this.A.getImmediate({optional:!0});d?u(d):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(pt("string"==typeof r.token),this.R=r.token,new $i(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ln(a){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let o=0;o<a;o++)r[o]=Math.floor(256*Math.random());return r}class Ti{static newId(){const r=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=Ln(40);for(let d=0;d<u.length;++d)o.length<20&&u[d]<r&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[d]%62))}return o}}function Wt(a,t){return a<t?-1:a>t?1:0}function Un(a,t,r){return a.length===t.length&&a.every((o,u)=>r(o,t[u]))}function Qr(a){return a+"\0"}class nn{constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Ot(Xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ot(Xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new Ot(Xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ot(Xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return nn.fromMillis(Date.now())}static fromDate(t){return nn.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),o=Math.floor(1e6*(t-1e3*r));return new nn(r,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Wt(this.nanoseconds,t.nanoseconds):Wt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new rn(t)}static min(){return new rn(new nn(0,0))}static max(){return new rn(new nn(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xr{constructor(t,r,o){void 0===r?r=0:r>t.length&&bt(),void 0===o?o=t.length-r:o>t.length-r&&bt(),this.segments=t,this.offset=r,this.len=o}get length(){return this.len}isEqual(t){return 0===Xr.comparator(this,t)}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Xr?t.forEach(o=>{r.push(o)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,o=this.limit();r<o;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const o=Math.min(t.length,r.length);for(let u=0;u<o;u++){const d=t.get(u),m=r.get(u);if(d<m)return-1;if(d>m)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class Nn extends Xr{construct(t,r,o){return new Nn(t,r,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const o of t){if(o.indexOf("//")>=0)throw new Ot(Xe.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);r.push(...o.split("/").filter(u=>u.length>0))}return new Nn(r)}static emptyPath(){return new Nn([])}}const oi=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Re extends Xr{construct(t,r,o){return new Re(t,r,o)}static isValidIdentifier(t){return oi.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Re.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Re(["__name__"])}static fromServerFormat(t){const r=[];let o="",u=0;const d=()=>{if(0===o.length)throw new Ot(Xe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(o),o=""};let m=!1;for(;u<t.length;){const D=t[u];if("\\"===D){if(u+1===t.length)throw new Ot(Xe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const N=t[u+1];if("\\"!==N&&"."!==N&&"`"!==N)throw new Ot(Xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);o+=N,u+=2}else"`"===D?(m=!m,u++):"."!==D||m?(o+=D,u++):(d(),u++)}if(d(),m)throw new Ot(Xe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Re(r)}static emptyPath(){return new Re([])}}class Ie{constructor(t){this.path=t}static fromPath(t){return new Ie(Nn.fromString(t))}static fromName(t){return new Ie(Nn.fromString(t).popFirst(5))}static empty(){return new Ie(Nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Nn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,r){return Nn.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ie(new Nn(t.slice()))}}class Ee{constructor(t,r,o,u){this.indexId=t,this.collectionGroup=r,this.fields=o,this.indexState=u}}function Ke(a){return a.fields.find(t=>2===t.kind)}function Mt(a){return a.fields.filter(t=>2!==t.kind)}Ee.UNKNOWN_ID=-1;class q{constructor(t,r){this.fieldPath=t,this.kind=r}}class oe{constructor(t,r){this.sequenceNumber=t,this.offset=r}static empty(){return new oe(0,xt.min())}}function pe(a,t){const r=a.toTimestamp().seconds,o=a.toTimestamp().nanoseconds+1,u=rn.fromTimestamp(1e9===o?new nn(r+1,0):new nn(r,o));return new xt(u,Ie.empty(),t)}function gt(a){return new xt(a.readTime,a.key,-1)}class xt{constructor(t,r,o){this.readTime=t,this.documentKey=r,this.largestBatchId=o}static min(){return new xt(rn.min(),Ie.empty(),-1)}static max(){return new xt(rn.max(),Ie.empty(),-1)}}function yn(a,t){let r=a.readTime.compareTo(t.readTime);return 0!==r?r:(r=Ie.comparator(a.documentKey,t.documentKey),0!==r?r:Wt(a.largestBatchId,t.largestBatchId))}const Wn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Jn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Rn(a){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,te.A)(function*(a){if(a.code!==Xe.FAILED_PRECONDITION||a.message!==Wn)throw a;at("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class Ne{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Ne((o,u)=>{this.nextCallback=d=>{this.wrapSuccess(t,d).next(o,u)},this.catchCallback=d=>{this.wrapFailure(r,d).next(o,u)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Ne?r:Ne.resolve(r)}catch(r){return Ne.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Ne.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Ne.reject(r)}static resolve(t){return new Ne((r,o)=>{r(t)})}static reject(t){return new Ne((r,o)=>{o(t)})}static waitFor(t){return new Ne((r,o)=>{let u=0,d=0,m=!1;t.forEach(D=>{++u,D.next(()=>{++d,m&&d===u&&r()},N=>o(N))}),m=!0,d===u&&r()})}static or(t){let r=Ne.resolve(!1);for(const o of t)r=r.next(u=>u?Ne.resolve(u):o());return r}static forEach(t,r){const o=[];return t.forEach((u,d)=>{o.push(r.call(this,u,d))}),this.waitFor(o)}static mapArray(t,r){return new Ne((o,u)=>{const d=t.length,m=new Array(d);let D=0;for(let N=0;N<d;N++){const j=N;r(t[j]).next(ie=>{m[j]=ie,++D,D===d&&o(m)},ie=>u(ie))}})}static doWhile(t,r){return new Ne((o,u)=>{const d=()=>{!0===t()?r().next(()=>{d()},u):o()};d()})}}class kr{constructor(t,r){this.action=t,this.transaction=r,this.aborted=!1,this.V=new rr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Kn(t,r.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=tt(o.target.error);this.V.reject(new Kn(t,u))}}static open(t,r,o,u){try{return new kr(r,t.transaction(u,o))}catch(d){throw new Kn(r,d)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(at("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const r=this.transaction.objectStore(t);return new as(r)}}class ai{constructor(t,r,o){this.name=t,this.version=r,this.p=o,12.2===ai.S((0,le.ZQ)())&&In("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return at("SimpleDb","Removing database:",t),qi(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,le.zW)())return!1;if(ai.v())return!0;const t=(0,le.ZQ)(),r=ai.S(t),o=0<r&&r<10,u=_o(t),d=0<u&&u<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||o||d)}static v(){var t;return typeof process<"u"&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.C)}static F(t,r){return t.store(r)}static S(t){const r=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(o)}M(t){var r=this;return(0,te.A)(function*(){return r.db||(at("SimpleDb","Opening database:",r.name),r.db=yield new Promise((o,u)=>{const d=indexedDB.open(r.name,r.version);d.onsuccess=m=>{o(m.target.result)},d.onblocked=()=>{u(new Kn(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},d.onerror=m=>{const D=m.target.error;u("VersionError"===D.name?new Ot(Xe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===D.name?new Ot(Xe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+D):new Kn(t,D))},d.onupgradeneeded=m=>{at("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',m.oldVersion),r.p.O(m.target.result,d.transaction,m.oldVersion,r.version).next(()=>{at("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=o=>r.N(o)),r.db})()}L(t){this.N=t,this.db&&(this.db.onversionchange=r=>t(r))}runTransaction(t,r,o,u){var d=this;return(0,te.A)(function*(){const m="readonly"===r;let D=0;for(;;){++D;try{d.db=yield d.M(t);const N=kr.open(d.db,t,m?"readonly":"readwrite",o),j=u(N).next(ie=>(N.g(),ie)).catch(ie=>(N.abort(ie),Ne.reject(ie))).toPromise();return j.catch(()=>{}),yield N.m,j}catch(N){const j=N,ie="FirebaseError"!==j.name&&D<3;if(at("SimpleDb","Transaction failed with error:",j.message,"Retrying:",ie),d.close(),!ie)return Promise.reject(j)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function _o(a){const t=a.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class Fs{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return qi(this.B.delete())}}class Kn extends Ot{constructor(t,r){super(Xe.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function rs(a){return"IndexedDbTransactionError"===a.name}class as{constructor(t){this.store=t}put(t,r){let o;return void 0!==r?(at("SimpleDb","PUT",this.store.name,t,r),o=this.store.put(r,t)):(at("SimpleDb","PUT",this.store.name,"<auto-key>",t),o=this.store.put(t)),qi(o)}add(t){return at("SimpleDb","ADD",this.store.name,t,t),qi(this.store.add(t))}get(t){return qi(this.store.get(t)).next(r=>(void 0===r&&(r=null),at("SimpleDb","GET",this.store.name,t,r),r))}delete(t){return at("SimpleDb","DELETE",this.store.name,t),qi(this.store.delete(t))}count(){return at("SimpleDb","COUNT",this.store.name),qi(this.store.count())}U(t,r){const o=this.options(t,r),u=o.index?this.store.index(o.index):this.store;if("function"==typeof u.getAll){const d=u.getAll(o.range);return new Ne((m,D)=>{d.onerror=N=>{D(N.target.error)},d.onsuccess=N=>{m(N.target.result)}})}{const d=this.cursor(o),m=[];return this.W(d,(D,N)=>{m.push(N)}).next(()=>m)}}G(t,r){const o=this.store.getAll(t,null===r?void 0:r);return new Ne((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}j(t,r){at("SimpleDb","DELETE ALL",this.store.name);const o=this.options(t,r);o.H=!1;const u=this.cursor(o);return this.W(u,(d,m,D)=>D.delete())}J(t,r){let o;r?o=t:(o={},r=t);const u=this.cursor(o);return this.W(u,r)}Y(t){const r=this.cursor({});return new Ne((o,u)=>{r.onerror=d=>{const m=tt(d.target.error);u(m)},r.onsuccess=d=>{const m=d.target.result;m?t(m.primaryKey,m.value).next(D=>{D?m.continue():o()}):o()}})}W(t,r){const o=[];return new Ne((u,d)=>{t.onerror=m=>{d(m.target.error)},t.onsuccess=m=>{const D=m.target.result;if(!D)return void u();const N=new Fs(D),j=r(D.primaryKey,D.value,N);if(j instanceof Ne){const ie=j.catch(fe=>(N.done(),Ne.reject(fe)));o.push(ie)}N.isDone?u():null===N.K?D.continue():D.continue(N.K)}}).next(()=>Ne.waitFor(o))}options(t,r){let o;return void 0!==t&&("string"==typeof t?o=t:r=t),{index:o,range:r}}cursor(t){let r="next";if(t.reverse&&(r="prev"),t.index){const o=this.store.index(t.index);return t.H?o.openKeyCursor(t.range,r):o.openCursor(t.range,r)}return this.store.openCursor(t.range,r)}}function qi(a){return new Ne((t,r)=>{a.onsuccess=o=>{t(o.target.result)},a.onerror=o=>{const u=tt(o.target.error);r(u)}})}let It=!1;function tt(a){const t=ai.S((0,le.ZQ)());if(t>=12.2&&t<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const o=new Ot("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return It||(It=!0,setTimeout(()=>{throw o},0)),o}}return a}class kt{constructor(t,r){this.asyncQueue=t,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(t){var r=this;at("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,te.A)(function*(){r.task=null;try{at("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(o){rs(o)?at("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield Rn(o)}yield r.X(6e4)}))}}class ln{constructor(t,r){this.localStore=t,this.persistence=r}ee(t=50){var r=this;return(0,te.A)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>r.te(o,t))})()}te(t,r){const o=new Set;let u=r,d=!0;return Ne.doWhile(()=>!0===d&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(m=>{if(null!==m&&!o.has(m))return at("IndexBackfiller",`Processing collection: ${m}`),this.ne(t,m,u).next(D=>{u-=D,o.add(m)});d=!1})).next(()=>r-u)}ne(t,r,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,r).next(u=>this.localStore.localDocuments.getNextDocuments(t,r,u,o).next(d=>{const m=d.changes;return this.localStore.indexManager.updateIndexEntries(t,m).next(()=>this.re(u,d)).next(D=>(at("IndexBackfiller",`Updating offset: ${D}`),this.localStore.indexManager.updateCollectionGroup(t,r,D))).next(()=>m.size)}))}re(t,r){let o=t;return r.changes.forEach((u,d)=>{const m=gt(d);yn(m,o)>0&&(o=m)}),new xt(o.readTime,o.documentKey,Math.max(r.batchId,t.largestBatchId))}}let se=(()=>{class a{constructor(r,o){this.previousValue=r,o&&(o.sequenceNumberHandler=u=>this.ie(u),this.se=u=>o.writeSequenceNumber(u))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function ye(a){return null==a}function ve(a){return 0===a&&1/a==-1/0}function mt(a){return"number"==typeof a&&Number.isInteger(a)&&!ve(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function Ze(a){let t="";for(let r=0;r<a.length;r++)t.length>0&&(t=Ut(t)),t=Yt(a.get(r),t);return Ut(t)}function Yt(a,t){let r=t;const o=a.length;for(let u=0;u<o;u++){const d=a.charAt(u);switch(d){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=d}}return r}function Ut(a){return a+"\x01\x01"}function xn(a){const t=a.length;if(pt(t>=2),2===t)return pt("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),Nn.emptyPath();const r=t-2,o=[];let u="";for(let d=0;d<t;){const m=a.indexOf("\x01",d);switch((m<0||m>r)&&bt(),a.charAt(m+1)){case"\x01":const D=a.substring(d,m);let N;0===u.length?N=D:(u+=D,N=u,u=""),o.push(N);break;case"\x10":u+=a.substring(d,m),u+="\0";break;case"\x11":u+=a.substring(d,m+1);break;default:bt()}d=m+2}return new Nn(o)}const Cn=["userId","batchId"];function Or(a,t){return[a,Ze(t)]}function ti(a,t,r){return[a,Ze(t),r]}const mr={},ci=["prefixPath","collectionGroup","readTime","documentId"],cs=["prefixPath","collectionGroup","documentId"],Hi=["collectionGroup","readTime","prefixPath","documentId"],Ir=["canonicalId","targetId"],Pr=["targetId","path"],ui=["path","targetId"],cr=["collectionId","parent"],_r=["indexId","uid"],Yr=["uid","sequenceNumber"],ni=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Jr=["indexId","uid","orderedDocumentKey"],$n=["userId","collectionPath","documentId"],lr=["userId","collectionPath","largestBatchId"],jo=["userId","collectionGroup","largestBatchId"],Qi=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ea=[...Qi,"documentOverlays"],da=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ia=da,to=[...Ia,"indexConfiguration","indexState","indexEntries"],ar=to,yo=[...to,"globals"];class no extends Jn{constructor(t,r){super(),this._e=t,this.currentSequenceNumber=r}}function Cr(a,t){const r=Rt(a);return ai.F(r._e,t)}function $o(a){let t=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t++;return t}function Us(a,t){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&t(r,a[r])}function Cs(a){for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t))return!1;return!0}class Nr{constructor(t,r){this.comparator=t,this.root=r||Oi.EMPTY}insert(t,r){return new Nr(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Oi.BLACK,null,null))}remove(t){return new Nr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Oi.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(0===o)return r.value;o<0?r=r.left:o>0&&(r=r.right)}return null}indexOf(t){let r=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(t,o.key);if(0===u)return r+o.left.size;u<0?o=o.left:(r+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,o)=>(t(r,o),!1))}toString(){const t=[];return this.inorderTraversal((r,o)=>(t.push(`${r}:${o}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ws(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ws(this.root,t,this.comparator,!1)}getReverseIterator(){return new ws(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ws(this.root,t,this.comparator,!0)}}class ws{constructor(t,r,o,u){this.isReverse=u,this.nodeStack=[];let d=1;for(;!t.isEmpty();)if(d=r?o(t.key,r):1,r&&u&&(d*=-1),d<0)t=this.isReverse?t.left:t.right;else{if(0===d){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Oi{constructor(t,r,o,u,d){this.key=t,this.value=r,this.color=o??Oi.RED,this.left=u??Oi.EMPTY,this.right=d??Oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,o,u,d){return new Oi(t??this.key,r??this.value,o??this.color,u??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let u=this;const d=o(t,u.key);return u=d<0?u.copy(null,null,null,u.left.insert(t,r,o),null):0===d?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Oi.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let o,u=this;if(r(t,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(t,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===r(t,u.key)){if(u.right.isEmpty())return Oi.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(t,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bt();const t=this.left.check();if(t!==this.right.check())throw bt();return t+(this.isRed()?0:1)}}Oi.EMPTY=null,Oi.RED=!0,Oi.BLACK=!1,Oi.EMPTY=new class{constructor(){this.size=0}get key(){throw bt()}get value(){throw bt()}get color(){throw bt()}get left(){throw bt()}get right(){throw bt()}copy(t,r,o,u,d){return this}insert(t,r,o){return new Oi(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dr{constructor(t){this.comparator=t,this.data=new Nr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,o)=>(t(r),!1))}forEachInRange(t,r){const o=this.data.getIteratorFrom(t[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,t[1])>=0)return;r(u.key)}}forEachWhile(t,r){let o;for(o=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();o.hasNext();)if(!t(o.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new Bs(this.data.getIterator())}getIteratorFrom(t){return new Bs(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(o=>{r=r.add(o)}),r}isEqual(t){if(!(t instanceof Dr)||this.size!==t.size)return!1;const r=this.data.getIterator(),o=t.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=o.getNext().key;if(0!==this.comparator(u,d))return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Dr(this.comparator);return r.data=t,r}}class Bs{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ro(a){return a.hasNext()?a.getNext():void 0}class Wr{constructor(t){this.fields=t,t.sort(Re.comparator)}static empty(){return new Wr([])}unionWith(t){let r=new Dr(Re.comparator);for(const o of this.fields)r=r.add(o);for(const o of t)r=r.add(o);return new Wr(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Un(this.fields,t.fields,(r,o)=>r.isEqual(o))}}class So extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ur{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(u){try{return atob(u)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new So("Invalid base64 string: "+d):d}}(t);return new Ur(r)}static fromUint8Array(t){const r=function(u){let d="";for(let m=0;m<u.length;++m)d+=String.fromCharCode(u[m]);return d}(t);return new Ur(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const o=new Uint8Array(r.length);for(let u=0;u<r.length;u++)o[u]=r.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Wt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ur.EMPTY_BYTE_STRING=new Ur("");const ri=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function us(a){if(pt(!!a),"string"==typeof a){let t=0;const r=ri.exec(a);if(pt(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),t=Number(u)}const o=new Date(a);return{seconds:Math.floor(o.getTime()/1e3),nanos:t}}return{seconds:hn(a.seconds),nanos:hn(a.nanos)}}function hn(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function Di(a){return"string"==typeof a?Ur.fromBase64String(a):Ur.fromUint8Array(a)}function js(a){var t,r;return"server_timestamp"===(null===(r=((null===(t=a?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function $s(a){const t=a.mapValue.fields.__previous_value__;return js(t)?$s(t):t}function Ts(a){const t=us(a.mapValue.fields.__local_write_time__.timestampValue);return new nn(t.seconds,t.nanos)}class Hs{constructor(t,r,o,u,d,m,D,N,j){this.databaseId=t,this.appId=r,this.persistenceKey=o,this.host=u,this.ssl=d,this.forceLongPolling=m,this.autoDetectLongPolling=D,this.longPollingOptions=N,this.useFetchStreams=j}}class Vi{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new Vi("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Vi&&t.projectId===this.projectId&&t.database===this.database}}const ii={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Li={nullValue:"NULL_VALUE"};function li(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?js(a)?4:Go(a)?9007199254740991:Gs(a)?10:11:bt()}function Gi(a,t){if(a===t)return!0;const r=li(a);if(r!==li(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===t.booleanValue;case 4:return Ts(a).isEqual(Ts(t));case 3:return function(u,d){if("string"==typeof u.timestampValue&&"string"==typeof d.timestampValue&&u.timestampValue.length===d.timestampValue.length)return u.timestampValue===d.timestampValue;const m=us(u.timestampValue),D=us(d.timestampValue);return m.seconds===D.seconds&&m.nanos===D.nanos}(a,t);case 5:return a.stringValue===t.stringValue;case 6:return d=t,Di(a.bytesValue).isEqual(Di(d.bytesValue));case 7:return a.referenceValue===t.referenceValue;case 8:return function(u,d){return hn(u.geoPointValue.latitude)===hn(d.geoPointValue.latitude)&&hn(u.geoPointValue.longitude)===hn(d.geoPointValue.longitude)}(a,t);case 2:return function(u,d){if("integerValue"in u&&"integerValue"in d)return hn(u.integerValue)===hn(d.integerValue);if("doubleValue"in u&&"doubleValue"in d){const m=hn(u.doubleValue),D=hn(d.doubleValue);return m===D?ve(m)===ve(D):isNaN(m)&&isNaN(D)}return!1}(a,t);case 9:return Un(a.arrayValue.values||[],t.arrayValue.values||[],Gi);case 10:case 11:return function(u,d){const m=u.mapValue.fields||{},D=d.mapValue.fields||{};if($o(m)!==$o(D))return!1;for(const N in m)if(m.hasOwnProperty(N)&&(void 0===D[N]||!Gi(m[N],D[N])))return!1;return!0}(a,t);default:return bt()}var d}function io(a,t){return void 0!==(a.values||[]).find(r=>Gi(r,t))}function zi(a,t){if(a===t)return 0;const r=li(a),o=li(t);if(r!==o)return Wt(r,o);switch(r){case 0:case 9007199254740991:return 0;case 1:return Wt(a.booleanValue,t.booleanValue);case 2:return function(d,m){const D=hn(d.integerValue||d.doubleValue),N=hn(m.integerValue||m.doubleValue);return D<N?-1:D>N?1:D===N?0:isNaN(D)?isNaN(N)?0:-1:1}(a,t);case 3:return vo(a.timestampValue,t.timestampValue);case 4:return vo(Ts(a),Ts(t));case 5:return Wt(a.stringValue,t.stringValue);case 6:return function(d,m){const D=Di(d),N=Di(m);return D.compareTo(N)}(a.bytesValue,t.bytesValue);case 7:return function(d,m){const D=d.split("/"),N=m.split("/");for(let j=0;j<D.length&&j<N.length;j++){const ie=Wt(D[j],N[j]);if(0!==ie)return ie}return Wt(D.length,N.length)}(a.referenceValue,t.referenceValue);case 8:return function(d,m){const D=Wt(hn(d.latitude),hn(m.latitude));return 0!==D?D:Wt(hn(d.longitude),hn(m.longitude))}(a.geoPointValue,t.geoPointValue);case 9:return is(a.arrayValue,t.arrayValue);case 10:return function(d,m){var D,N,j,ie;const ct=null===(D=(d.fields||{}).value)||void 0===D?void 0:D.arrayValue,jt=null===(N=(m.fields||{}).value)||void 0===N?void 0:N.arrayValue,sn=Wt((null===(j=ct?.values)||void 0===j?void 0:j.length)||0,(null===(ie=jt?.values)||void 0===ie?void 0:ie.length)||0);return 0!==sn?sn:is(ct,jt)}(a.mapValue,t.mapValue);case 11:return function(d,m){if(d===ii.mapValue&&m===ii.mapValue)return 0;if(d===ii.mapValue)return 1;if(m===ii.mapValue)return-1;const D=d.fields||{},N=Object.keys(D),j=m.fields||{},ie=Object.keys(j);N.sort(),ie.sort();for(let fe=0;fe<N.length&&fe<ie.length;++fe){const Me=Wt(N[fe],ie[fe]);if(0!==Me)return Me;const ct=zi(D[N[fe]],j[ie[fe]]);if(0!==ct)return ct}return Wt(N.length,ie.length)}(a.mapValue,t.mapValue);default:throw bt()}}function vo(a,t){if("string"==typeof a&&"string"==typeof t&&a.length===t.length)return Wt(a,t);const r=us(a),o=us(t),u=Wt(r.seconds,o.seconds);return 0!==u?u:Wt(r.nanos,o.nanos)}function is(a,t){const r=a.values||[],o=t.values||[];for(let u=0;u<r.length&&u<o.length;++u){const d=zi(r[u],o[u]);if(d)return d}return Wt(r.length,o.length)}function Ni(a){return so(a)}function so(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const o=us(r);return`time(${o.seconds},${o.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?Di(a.bytesValue).toBase64():"referenceValue"in a?Ie.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=so(d);return o+"]"}(a.arrayValue):"mapValue"in a?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${so(r.fields[m])}`;return u+"}"}(a.mapValue):bt()}function Ui(a,t){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${t.path.canonicalString()}`}}function ms(a){return!!a&&"integerValue"in a}function Vs(a){return!!a&&"arrayValue"in a}function fs(a){return!!a&&"nullValue"in a}function ps(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Xi(a){return!!a&&"mapValue"in a}function Gs(a){var t,r;return"__vector__"===(null===(r=((null===(t=a?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function mi(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const t={mapValue:{fields:{}}};return Us(a.mapValue.fields,(r,o)=>t.mapValue.fields[r]=mi(o)),t}if(a.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=mi(a.arrayValue.values[r]);return t}return Object.assign({},a)}function Go(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}const zo={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function ls(a){return"nullValue"in a?Li:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?Ui(Vi.empty(),Ie.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?Gs(a)?zo:{mapValue:{}}:bt()}function Tr(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?Ui(Vi.empty(),Ie.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?zo:"mapValue"in a?Gs(a)?{mapValue:{}}:ii:bt()}function zs(a,t){const r=zi(a.value,t.value);return 0!==r?r:a.inclusive&&!t.inclusive?-1:!a.inclusive&&t.inclusive?1:0}function ha(a,t){const r=zi(a.value,t.value);return 0!==r?r:a.inclusive&&!t.inclusive?1:!a.inclusive&&t.inclusive?-1:0}class Kr{constructor(t){this.value=t}static empty(){return new Kr({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let o=0;o<t.length-1;++o)if(r=(r.mapValue.fields||{})[t.get(o)],!Xi(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=mi(r)}setAll(t){let r=Re.emptyPath(),o={},u=[];t.forEach((m,D)=>{if(!r.isImmediateParentOf(D)){const N=this.getFieldsMap(r);this.applyChanges(N,o,u),o={},u=[],r=D.popLast()}m?o[D.lastSegment()]=mi(m):u.push(D.lastSegment())});const d=this.getFieldsMap(r);this.applyChanges(d,o,u)}delete(t){const r=this.field(t.popLast());Xi(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return Gi(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let o=0;o<t.length;++o){let u=r.mapValue.fields[t.get(o)];Xi(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[t.get(o)]=u),r=u}return r.mapValue.fields}applyChanges(t,r,o){Us(r,(u,d)=>t[u]=d);for(const u of o)delete t[u]}clone(){return new Kr(mi(this.value))}}function oo(a){const t=[];return Us(a.fields,(r,o)=>{const u=new Re([r]);if(Xi(o)){const d=oo(o.mapValue).fields;if(0===d.length)t.push(u);else for(const m of d)t.push(u.child(m))}else t.push(u)}),new Wr(t)}class dr{constructor(t,r,o,u,d,m,D){this.key=t,this.documentType=r,this.version=o,this.readTime=u,this.createTime=d,this.data=m,this.documentState=D}static newInvalidDocument(t){return new dr(t,0,rn.min(),rn.min(),rn.min(),Kr.empty(),0)}static newFoundDocument(t,r,o,u){return new dr(t,1,r,rn.min(),o,u,0)}static newNoDocument(t,r){return new dr(t,2,r,rn.min(),rn.min(),Kr.empty(),0)}static newUnknownDocument(t,r){return new dr(t,3,r,rn.min(),rn.min(),Kr.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(rn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof dr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _s{constructor(t,r){this.position=t,this.inclusive=r}}function Ds(a,t,r){let o=0;for(let u=0;u<a.position.length;u++){const d=t[u],m=a.position[u];if(o=d.field.isKeyField()?Ie.comparator(Ie.fromName(m.referenceValue),r.key):zi(m,r.data.field(d.field)),"desc"===d.dir&&(o*=-1),0!==o)break}return o}function Po(a,t){if(null===a)return null===t;if(null===t||a.inclusive!==t.inclusive||a.position.length!==t.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!Gi(a.position[r],t.position[r]))return!1;return!0}class xi{constructor(t,r="asc"){this.field=t,this.dir=r}}function H(a,t){return a.dir===t.dir&&a.field.isEqual(t.field)}class K{}class O extends K{constructor(t,r,o){super(),this.field=t,this.op=r,this.value=o}static create(t,r,o){return t.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(t,r,o):new Ya(t,r,o):"array-contains"===r?new wa(t,o):"in"===r?new re(t,o):"not-in"===r?new C(t,o):"array-contains-any"===r?new S(t,o):new O(t,r,o)}static createKeyFieldInFilter(t,r,o){return"in"===r?new Ja(t,o):new Zr(t,o)}matches(t){const r=t.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(zi(r,this.value)):null!==r&&li(this.value)===li(r)&&this.matchesComparison(zi(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ee extends K{constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new ee(t,r)}matches(t){return Se(this)?void 0===this.filters.find(r=>!r.matches(t)):void 0!==this.filters.find(r=>r.matches(t))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Se(a){return"and"===a.op}function fn(a){return"or"===a.op}function ir(a){return As(a)&&Se(a)}function As(a){for(const t of a.filters)if(t instanceof ee)return!1;return!0}function Ws(a){if(a instanceof O)return a.field.canonicalString()+a.op.toString()+Ni(a.value);if(ir(a))return a.filters.map(t=>Ws(t)).join(",");{const t=a.filters.map(r=>Ws(r)).join(",");return`${a.op}(${t})`}}function di(a,t){return a instanceof O?(o=a,(u=t)instanceof O&&o.op===u.op&&o.field.isEqual(u.field)&&Gi(o.value,u.value)):a instanceof ee?function(o,u){return u instanceof ee&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((d,m,D)=>d&&di(m,u.filters[D]),!0)}(a,t):void bt();var o,u}function ao(a,t){const r=a.filters.concat(t);return ee.create(r,a.op)}function Ca(a){return a instanceof O?`${(r=a).field.canonicalString()} ${r.op} ${Ni(r.value)}`:a instanceof ee?function(r){return r.op.toString()+" {"+r.getFilters().map(Ca).join(" ,")+"}"}(a):"Filter";var r}class Ya extends O{constructor(t,r,o){super(t,r,o),this.key=Ie.fromName(o.referenceValue)}matches(t){const r=Ie.comparator(t.key,this.key);return this.matchesComparison(r)}}class Ja extends O{constructor(t,r){super(t,"in",r),this.keys=ka(0,r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class Zr extends O{constructor(t,r){super(t,"not-in",r),this.keys=ka(0,r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function ka(a,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map(o=>Ie.fromName(o.referenceValue))}class wa extends O{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return Vs(r)&&io(r.arrayValue,this.value)}}class re extends O{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return null!==r&&io(this.value.arrayValue,r)}}class C extends O{constructor(t,r){super(t,"not-in",r)}matches(t){if(io(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return null!==r&&!io(this.value.arrayValue,r)}}class S extends O{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!Vs(r)||!r.arrayValue.values)&&r.arrayValue.values.some(o=>io(this.value.arrayValue,o))}}class L{constructor(t,r=null,o=[],u=[],d=null,m=null,D=null){this.path=t,this.collectionGroup=r,this.orderBy=o,this.filters=u,this.limit=d,this.startAt=m,this.endAt=D,this.ue=null}}function Z(a,t=null,r=[],o=[],u=null,d=null,m=null){return new L(a,t,r,o,u,d,m)}function de(a){const t=Rt(a);if(null===t.ue){let r=t.path.canonicalString();null!==t.collectionGroup&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(o=>Ws(o)).join(","),r+="|ob:",r+=t.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),ye(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>Ni(o)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>Ni(o)).join(",")),t.ue=r}return t.ue}function be(a,t){if(a.limit!==t.limit||a.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!H(a.orderBy[r],t.orderBy[r]))return!1;if(a.filters.length!==t.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!di(a.filters[r],t.filters[r]))return!1;return a.collectionGroup===t.collectionGroup&&!!a.path.isEqual(t.path)&&!!Po(a.startAt,t.startAt)&&Po(a.endAt,t.endAt)}function Le(a){return Ie.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function _t(a,t){return a.filters.filter(r=>r instanceof O&&r.field.isEqual(t))}function St(a,t,r){let o=Li,u=!0;for(const d of _t(a,t)){let m=Li,D=!0;switch(d.op){case"<":case"<=":m=ls(d.value);break;case"==":case"in":case">=":m=d.value;break;case">":m=d.value,D=!1;break;case"!=":case"not-in":m=Li}zs({value:o,inclusive:u},{value:m,inclusive:D})<0&&(o=m,u=D)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(t)){const m=r.position[d];zs({value:o,inclusive:u},{value:m,inclusive:r.inclusive})<0&&(o=m,u=r.inclusive);break}return{value:o,inclusive:u}}function $t(a,t,r){let o=ii,u=!0;for(const d of _t(a,t)){let m=ii,D=!0;switch(d.op){case">=":case">":m=Tr(d.value),D=!1;break;case"==":case"in":case"<=":m=d.value;break;case"<":m=d.value,D=!1;break;case"!=":case"not-in":m=ii}ha({value:o,inclusive:u},{value:m,inclusive:D})>0&&(o=m,u=D)}if(null!==r)for(let d=0;d<a.orderBy.length;++d)if(a.orderBy[d].field.isEqual(t)){const m=r.position[d];ha({value:o,inclusive:u},{value:m,inclusive:r.inclusive})>0&&(o=m,u=r.inclusive);break}return{value:o,inclusive:u}}class Zt{constructor(t,r=null,o=[],u=[],d=null,m="F",D=null,N=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=o,this.filters=u,this.limit=d,this.limitType=m,this.startAt=D,this.endAt=N,this.ce=null,this.le=null,this.he=null}}function kn(a,t,r,o,u,d,m,D){return new Zt(a,t,r,o,u,d,m,D)}function On(a){return new Zt(a)}function _n(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function Zn(a){return null!==a.collectionGroup}function yr(a){const t=Rt(a);if(null===t.ce){t.ce=[];const r=new Set;for(const d of t.explicitOrderBy)t.ce.push(d),r.add(d.field.canonicalString());const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let D=new Dr(Re.comparator);return m.filters.forEach(N=>{N.getFlattenedFilters().forEach(j=>{j.isInequality()&&(D=D.add(j.field))})}),D})(t).forEach(d=>{r.has(d.canonicalString())||d.isKeyField()||t.ce.push(new xi(d,o))}),r.has(Re.keyField().canonicalString())||t.ce.push(new xi(Re.keyField(),o))}return t.ce}function wr(a){const t=Rt(a);return t.le||(t.le=function gs(a,t){if("F"===a.limitType)return Z(a.path,a.collectionGroup,t,a.filters,a.limit,a.startAt,a.endAt);{t=t.map(u=>new xi(u.field,"desc"===u.dir?"asc":"desc"));const r=a.endAt?new _s(a.endAt.position,a.endAt.inclusive):null,o=a.startAt?new _s(a.startAt.position,a.startAt.inclusive):null;return Z(a.path,a.collectionGroup,t,a.filters,a.limit,r,o)}}(t,yr(a))),t.le}function hi(a,t){const r=a.filters.concat([t]);return new Zt(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function bs(a,t,r){return new Zt(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),t,r,a.startAt,a.endAt)}function Wi(a,t){return be(wr(a),wr(t))&&a.limitType===t.limitType}function Ki(a){return`${de(wr(a))}|lt:${a.limitType}`}function _i(a){return`Query(target=${function(r){let o=r.path.canonicalString();return null!==r.collectionGroup&&(o+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(o+=`, filters: [${r.filters.map(u=>Ca(u)).join(", ")}]`),ye(r.limit)||(o+=", limit: "+r.limit),r.orderBy.length>0&&(o+=`, orderBy: [${r.orderBy.map(u=>{return`${(m=u).field.canonicalString()} (${m.dir})`;var m}).join(", ")}]`),r.startAt&&(o+=", startAt: ",o+=r.startAt.inclusive?"b:":"a:",o+=r.startAt.position.map(u=>Ni(u)).join(",")),r.endAt&&(o+=", endAt: ",o+=r.endAt.inclusive?"a:":"b:",o+=r.endAt.position.map(u=>Ni(u)).join(",")),`Target(${o})`}(wr(a))}; limitType=${a.limitType})`}function co(a,t){return t.isFoundDocument()&&function(o,u){const d=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(d):Ie.isDocumentKey(o.path)?o.path.isEqual(d):o.path.isImmediateParentOf(d)}(a,t)&&function(o,u){for(const d of yr(o))if(!d.field.isKeyField()&&null===u.data.field(d.field))return!1;return!0}(a,t)&&function(o,u){for(const d of o.filters)if(!d.matches(u))return!1;return!0}(a,t)&&(u=t,!((o=a).startAt&&!function(m,D,N){const j=Ds(m,D,N);return m.inclusive?j<=0:j<0}(o.startAt,yr(o),u)||o.endAt&&!function(m,D,N){const j=Ds(m,D,N);return m.inclusive?j>=0:j>0}(o.endAt,yr(o),u)));var o,u}function uo(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function Za(a){return(t,r)=>{let o=!1;for(const u of yr(a)){const d=Mo(u,t,r);if(0!==d)return d;o=o||u.field.isKeyField()}return 0}}function Mo(a,t,r){const o=a.field.isKeyField()?Ie.comparator(t.key,r.key):function(d,m,D){const N=m.data.field(d),j=D.data.field(d);return null!==N&&null!==j?zi(N,j):bt()}(a.field,t,r);switch(a.dir){case"asc":return o;case"desc":return-1*o;default:return bt()}}class Ss{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),o=this.inner[r];if(void 0!==o)for(const[u,d]of o)if(this.equalsFn(u,t))return d}has(t){return void 0!==this.get(t)}set(t,r){const o=this.mapKeyFn(t),u=this.inner[o];if(void 0===u)return this.inner[o]=[[t,r]],void this.innerSize++;for(let d=0;d<u.length;d++)if(this.equalsFn(u[d][0],t))return void(u[d]=[t,r]);u.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),o=this.inner[r];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return 1===o.length?delete this.inner[r]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(t){Us(this.inner,(r,o)=>{for(const[u,d]of o)t(u,d)})}isEmpty(){return Cs(this.inner)}size(){return this.innerSize}}const fa=new Nr(Ie.comparator);function ki(){return fa}const bn=new Nr(Ie.comparator);function Fn(...a){let t=bn;for(const r of a)t=t.insert(r.key,r);return t}function Hn(a){let t=bn;return a.forEach((r,o)=>t=t.insert(r,o.overlayedDocument)),t}function hr(){return ss()}function Ai(){return ss()}function ss(){return new Ss(a=>a.toString(),(a,t)=>a.isEqual(t))}const si=new Nr(Ie.comparator),Ps=new Dr(Ie.comparator);function wn(...a){let t=Ps;for(const r of a)t=t.add(r);return t}const Tc=new Dr(Wt);function Ta(){return Tc}function Yi(a,t){if(a.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ve(t)?"-0":t}}function ys(a){return{integerValue:""+a}}function Ms(a,t){return mt(t)?ys(t):Yi(a,t)}class ta{constructor(){this._=void 0}}function Fa(a,t,r){return a instanceof lo?function(u,d){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return d&&js(d)&&(d=$s(d)),d&&(m.fields.__previous_value__=d),{mapValue:m}}(r,t):a instanceof Ro?b(a,t):a instanceof X?F(a,t):function(u,d){const m=Wo(u,d),D=Ce(m)+Ce(u.Pe);return ms(m)&&ms(u.Pe)?ys(D):Yi(u.serializer,D)}(a,t)}function ec(a,t,r){return a instanceof Ro?b(a,t):a instanceof X?F(a,t):r}function Wo(a,t){return a instanceof $?ms(o=t)||(d=o)&&"doubleValue"in d?t:{integerValue:0}:null;var o,d}class lo extends ta{}class Ro extends ta{constructor(t){super(),this.elements=t}}function b(a,t){const r=Tt(t);for(const o of a.elements)r.some(u=>Gi(u,o))||r.push(o);return{arrayValue:{values:r}}}class X extends ta{constructor(t){super(),this.elements=t}}function F(a,t){let r=Tt(t);for(const o of a.elements)r=r.filter(u=>!Gi(u,o));return{arrayValue:{values:r}}}class $ extends ta{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function Ce(a){return hn(a.integerValue||a.doubleValue)}function Tt(a){return Vs(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class Vt{constructor(t,r){this.field=t,this.transform=r}}class ei{constructor(t,r){this.version=t,this.transformResults=r}}class er{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new er}static exists(t){return new er(void 0,t)}static updateTime(t){return new er(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Gr(a,t){return void 0!==a.updateTime?t.isFoundDocument()&&t.version.isEqual(a.updateTime):void 0===a.exists||a.exists===t.isFoundDocument()}class vr{}function yi(a,t){if(!a.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return a.isNoDocument()?new Ks(a.key,er.none()):new En(a.key,a.data,er.none());{const r=a.data,o=Kr.empty();let u=new Dr(Re.comparator);for(let d of t.fields)if(!u.has(d)){let m=r.field(d);null===m&&d.length>1&&(d=d.popLast(),m=r.field(d)),null===m?o.delete(d):o.set(d,m),u=u.add(d)}return new gr(a.key,o,new Wr(u.toArray()),er.none())}}function qr(a,t,r){a instanceof En?function(u,d,m){const D=u.value.clone(),N=vi(u.fieldTransforms,d,m.transformResults);D.setAll(N),d.convertToFoundDocument(m.version,D).setHasCommittedMutations()}(a,t,r):a instanceof gr?function(u,d,m){if(!Gr(u.precondition,d))return void d.convertToUnknownDocument(m.version);const D=vi(u.fieldTransforms,d,m.transformResults),N=d.data;N.setAll(Si(u)),N.setAll(D),d.convertToFoundDocument(m.version,N).setHasCommittedMutations()}(a,t,r):t.convertToNoDocument(r.version).setHasCommittedMutations()}function bi(a,t,r,o){return a instanceof En?function(d,m,D,N){if(!Gr(d.precondition,m))return D;const j=d.value.clone(),ie=os(d.fieldTransforms,N,m);return j.setAll(ie),m.convertToFoundDocument(m.version,j).setHasLocalMutations(),null}(a,t,r,o):a instanceof gr?function(d,m,D,N){if(!Gr(d.precondition,m))return D;const j=os(d.fieldTransforms,N,m),ie=m.data;return ie.setAll(Si(d)),ie.setAll(j),m.convertToFoundDocument(m.version,ie).setHasLocalMutations(),null===D?null:D.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(fe=>fe.field))}(a,t,r,o):(D=r,Gr(a.precondition,m=t)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):D);var m,D}function zr(a,t){let r=null;for(const o of a.fieldTransforms){const u=t.data.field(o.field),d=Wo(o.transform,u||null);null!=d&&(null===r&&(r=Kr.empty()),r.set(o.field,d))}return r||null}function en(a,t){return a.type===t.type&&!!a.key.isEqual(t.key)&&!!a.precondition.isEqual(t.precondition)&&(u=t.fieldTransforms,!!(void 0===(o=a.fieldTransforms)&&void 0===u||o&&u&&Un(o,u,(d,m)=>function Mn(a,t){return a.field.isEqual(t.field)&&(u=t.transform,(o=a.transform)instanceof Ro&&u instanceof Ro||o instanceof X&&u instanceof X?Un(o.elements,u.elements,Gi):o instanceof $&&u instanceof $?Gi(o.Pe,u.Pe):o instanceof lo&&u instanceof lo);var o,u}(d,m))))&&(0===a.type?a.value.isEqual(t.value):1!==a.type||a.data.isEqual(t.data)&&a.fieldMask.isEqual(t.fieldMask));var o,u}class En extends vr{constructor(t,r,o,u=[]){super(),this.key=t,this.value=r,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class gr extends vr{constructor(t,r,o,u,d=[]){super(),this.key=t,this.data=r,this.fieldMask=o,this.precondition=u,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function Si(a){const t=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const o=a.data.field(r);t.set(r,o)}}),t}function vi(a,t,r){const o=new Map;pt(a.length===r.length);for(let u=0;u<r.length;u++){const d=a[u],m=d.transform,D=t.data.field(d.field);o.set(d.field,ec(m,D,r[u]))}return o}function os(a,t,r){const o=new Map;for(const u of a){const d=u.transform,m=r.data.field(u.field);o.set(u.field,Fa(d,m,t))}return o}class Ks extends vr{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ei extends vr{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Br{constructor(t,r,o,u){this.batchId=t,this.localWriteTime=r,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(t,r){const o=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const d=this.mutations[u];d.key.isEqual(t.key)&&qr(d,t,o[u])}}applyToLocalView(t,r){for(const o of this.baseMutations)o.key.isEqual(t.key)&&(r=bi(o,t,r,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(t.key)&&(r=bi(o,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const o=Ai();return this.mutations.forEach(u=>{const d=t.get(u.key),m=d.overlayedDocument;let D=this.applyToLocalView(m,d.mutatedFields);D=r.has(u.key)?null:D;const N=yi(m,D);null!==N&&o.set(u.key,N),m.isValidDocument()||m.convertToNoDocument(rn.min())}),o}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),wn())}isEqual(t){return this.batchId===t.batchId&&Un(this.mutations,t.mutations,(r,o)=>en(r,o))&&Un(this.baseMutations,t.baseMutations,(r,o)=>en(r,o))}}class Io{constructor(t,r,o,u){this.batch=t,this.commitVersion=r,this.mutationResults=o,this.docVersions=u}static from(t,r,o){pt(t.mutations.length===o.length);let u=function(){return si}();const d=t.mutations;for(let m=0;m<d.length;m++)u=u.insert(d[m].key,o[m].version);return new Io(t,r,o,u)}}class sr{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class El{constructor(t,r){this.count=t,this.unchangedNames=r}}var fi,Gn;function Dc(a){switch(a){default:return bt();case Xe.CANCELLED:case Xe.UNKNOWN:case Xe.DEADLINE_EXCEEDED:case Xe.RESOURCE_EXHAUSTED:case Xe.INTERNAL:case Xe.UNAVAILABLE:case Xe.UNAUTHENTICATED:return!1;case Xe.INVALID_ARGUMENT:case Xe.NOT_FOUND:case Xe.ALREADY_EXISTS:case Xe.PERMISSION_DENIED:case Xe.FAILED_PRECONDITION:case Xe.ABORTED:case Xe.OUT_OF_RANGE:case Xe.UNIMPLEMENTED:case Xe.DATA_LOSS:return!0}}function tc(a){if(void 0===a)return In("GRPC error has no .code"),Xe.UNKNOWN;switch(a){case fi.OK:return Xe.OK;case fi.CANCELLED:return Xe.CANCELLED;case fi.UNKNOWN:return Xe.UNKNOWN;case fi.DEADLINE_EXCEEDED:return Xe.DEADLINE_EXCEEDED;case fi.RESOURCE_EXHAUSTED:return Xe.RESOURCE_EXHAUSTED;case fi.INTERNAL:return Xe.INTERNAL;case fi.UNAVAILABLE:return Xe.UNAVAILABLE;case fi.UNAUTHENTICATED:return Xe.UNAUTHENTICATED;case fi.INVALID_ARGUMENT:return Xe.INVALID_ARGUMENT;case fi.NOT_FOUND:return Xe.NOT_FOUND;case fi.ALREADY_EXISTS:return Xe.ALREADY_EXISTS;case fi.PERMISSION_DENIED:return Xe.PERMISSION_DENIED;case fi.FAILED_PRECONDITION:return Xe.FAILED_PRECONDITION;case fi.ABORTED:return Xe.ABORTED;case fi.OUT_OF_RANGE:return Xe.OUT_OF_RANGE;case fi.UNIMPLEMENTED:return Xe.UNIMPLEMENTED;case fi.DATA_LOSS:return Xe.DATA_LOSS;default:return bt()}}(Gn=fi||(fi={}))[Gn.OK=0]="OK",Gn[Gn.CANCELLED=1]="CANCELLED",Gn[Gn.UNKNOWN=2]="UNKNOWN",Gn[Gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gn[Gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gn[Gn.NOT_FOUND=5]="NOT_FOUND",Gn[Gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gn[Gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gn[Gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gn[Gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gn[Gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gn[Gn.ABORTED=10]="ABORTED",Gn[Gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gn[Gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gn[Gn.INTERNAL=13]="INTERNAL",Gn[Gn.UNAVAILABLE=14]="UNAVAILABLE",Gn[Gn.DATA_LOSS=15]="DATA_LOSS";function pa(){return new TextEncoder}const Il=new zt([4294967295,4294967295],0);function na(a){const t=pa().encode(a),r=new Pt;return r.update(t),new Uint8Array(r.digest())}function nc(a){const t=new DataView(a.buffer),r=t.getUint32(0,!0),o=t.getUint32(4,!0),u=t.getUint32(8,!0),d=t.getUint32(12,!0);return[new zt([r,o],0),new zt([u,d],0)]}class vs{constructor(t,r,o){if(this.bitmap=t,this.padding=r,this.hashCount=o,r<0||r>=8)throw new tr(`Invalid padding: ${r}`);if(o<0)throw new tr(`Invalid hash count: ${o}`);if(t.length>0&&0===this.hashCount)throw new tr(`Invalid hash count: ${o}`);if(0===t.length&&0!==r)throw new tr(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*t.length-r,this.Te=zt.fromNumber(this.Ie)}Ee(t,r,o){let u=t.add(r.multiply(zt.fromNumber(o)));return 1===u.compare(Il)&&(u=new zt([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Te).toNumber()}de(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const r=na(t),[o,u]=nc(r);for(let d=0;d<this.hashCount;d++){const m=this.Ee(o,u,d);if(!this.de(m))return!1}return!0}static create(t,r,o){const u=t%8==0?0:8-t%8,d=new Uint8Array(Math.ceil(t/8)),m=new vs(d,u,r);return o.forEach(D=>m.insert(D)),m}insert(t){if(0===this.Ie)return;const r=na(t),[o,u]=nc(r);for(let d=0;d<this.hashCount;d++){const m=this.Ee(o,u,d);this.Ae(m)}}Ae(t){const r=Math.floor(t/8);this.bitmap[r]|=1<<t%8}}class tr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class rc{constructor(t,r,o,u,d){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(t,r,o){const u=new Map;return u.set(t,Ii.createSynthesizedTargetChangeForCurrentChange(t,r,o)),new rc(rn.min(),u,new Nr(Wt),ki(),wn())}}class Ii{constructor(t,r,o,u,d){this.resumeToken=t,this.current=r,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(t,r,o){return new Ii(o,r,wn(),wn(),wn())}}class Oo{constructor(t,r,o,u){this.Re=t,this.removedTargetIds=r,this.key=o,this.Ve=u}}class Da{constructor(t,r){this.targetId=t,this.me=r}}class Aa{constructor(t,r,o=Ur.EMPTY_BYTE_STRING,u=null){this.state=t,this.targetIds=r,this.resumeToken=o,this.cause=u}}class Pi{constructor(){this.fe=0,this.ge=Os(),this.pe=Ur.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=wn(),r=wn(),o=wn();return this.ge.forEach((u,d)=>{switch(d){case 0:t=t.add(u);break;case 2:r=r.add(u);break;case 1:o=o.add(u);break;default:bt()}}),new Ii(this.pe,this.ye,t,r,o)}Ce(){this.we=!1,this.ge=Os()}Fe(t,r){this.we=!0,this.ge=this.ge.insert(t,r)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,pt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Su{constructor(t){this.Le=t,this.Be=new Map,this.ke=ki(),this.qe=Rs(),this.Qe=new Nr(Wt)}Ke(t){for(const r of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(r,t.Ve):this.Ue(r,t.key,t.Ve);for(const r of t.removedTargetIds)this.Ue(r,t.key,t.Ve)}We(t){this.forEachTarget(t,r=>{const o=this.Ge(r);switch(t.state){case 0:this.ze(r)&&o.De(t.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(t.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(o.Ne(),o.De(t.resumeToken));break;case 4:this.ze(r)&&(this.je(r),o.De(t.resumeToken));break;default:bt()}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.Be.forEach((o,u)=>{this.ze(u)&&r(u)})}He(t){const r=t.targetId,o=t.me.count,u=this.Je(r);if(u){const d=u.target;if(Le(d))if(0===o){const m=new Ie(d.path);this.Ue(r,m,dr.newNoDocument(m,rn.min()))}else pt(1===o);else{const m=this.Ye(r);if(m!==o){const D=this.Ze(t),N=D?this.Xe(D,t,m):1;0!==N&&(this.je(r),this.Qe=this.Qe.insert(r,2===N?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(t){const r=t.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:d=0}=r;let m,D;try{m=Di(o).toUint8Array()}catch(N){if(N instanceof So)return Qn("Decoding the base64 bloom filter in existence filter failed ("+N.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw N}try{D=new vs(m,u,d)}catch(N){return Qn(N instanceof tr?"BloomFilter error: ":"Applying bloom filter failed: ",N),null}return 0===D.Ie?null:D}Xe(t,r,o){return r.me.count===o-this.nt(t,r.targetId)?0:2}nt(t,r){const o=this.Le.getRemoteKeysForTarget(r);let u=0;return o.forEach(d=>{const m=this.Le.tt(),D=`projects/${m.projectId}/databases/${m.database}/documents/${d.path.canonicalString()}`;t.mightContain(D)||(this.Ue(r,d,null),u++)}),u}rt(t){const r=new Map;this.Be.forEach((d,m)=>{const D=this.Je(m);if(D){if(d.current&&Le(D.target)){const N=new Ie(D.target.path);null!==this.ke.get(N)||this.it(m,N)||this.Ue(m,N,dr.newNoDocument(N,t))}d.be&&(r.set(m,d.ve()),d.Ce())}});let o=wn();this.qe.forEach((d,m)=>{let D=!0;m.forEachWhile(N=>{const j=this.Je(N);return!j||"TargetPurposeLimboResolution"===j.purpose||(D=!1,!1)}),D&&(o=o.add(d))}),this.ke.forEach((d,m)=>m.setReadTime(t));const u=new rc(t,r,this.Qe,this.ke,o);return this.ke=ki(),this.qe=Rs(),this.Qe=new Nr(Wt),u}$e(t,r){if(!this.ze(t))return;const o=this.it(t,r.key)?2:0;this.Ge(t).Fe(r.key,o),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(t))}Ue(t,r,o){if(!this.ze(t))return;const u=this.Ge(t);this.it(t,r)?u.Fe(r,1):u.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(t)),o&&(this.ke=this.ke.insert(r,o))}removeTarget(t){this.Be.delete(t)}Ye(t){const r=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let r=this.Be.get(t);return r||(r=new Pi,this.Be.set(t,r)),r}st(t){let r=this.qe.get(t);return r||(r=new Dr(Wt),this.qe=this.qe.insert(t,r)),r}ze(t){const r=null!==this.Je(t);return r||at("WatchChangeAggregator","Detected inactive target",t),r}Je(t){const r=this.Be.get(t);return r&&r.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Pi),this.Le.getRemoteKeysForTarget(t).forEach(r=>{this.Ue(t,r,null)})}it(t,r){return this.Le.getRemoteKeysForTarget(t).has(r)}}function Rs(){return new Nr(Ie.comparator)}function Os(){return new Nr(Ie.comparator)}const Kc={asc:"ASCENDING",desc:"DESCENDING"},ra={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qc={and:"AND",or:"OR"};class ho{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Va(a,t){return a.useProto3Json||ye(t)?t:{value:t}}function ic(a,t){return a.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qc(a,t){return a.useProto3Json?t.toBase64():t.toUint8Array()}function Pu(a,t){return ic(a,t.toTimestamp())}function Fi(a){return pt(!!a),rn.fromTimestamp(function(r){const o=us(r);return new nn(o.seconds,o.nanos)}(a))}function Mu(a,t){return La(a,t).canonicalString()}function La(a,t){const r=(u=a,new Nn(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===t?r:r.child(t)}function Cl(a){const t=Nn.fromString(a);return pt(ia(t)),t}function Xc(a,t){return Mu(a.databaseId,t.path)}function ga(a,t){const r=Cl(t);if(r.get(1)!==a.databaseId.projectId)throw new Ot(Xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Ot(Xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new Ie(Ed(r))}function Yh(a,t){return Mu(a.databaseId,t)}function wl(a){const t=Cl(a);return 4===t.length?Nn.emptyPath():Ed(t)}function Ru(a){return new Nn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Ed(a){return pt(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function Jh(a,t,r){return{name:Xc(a,t),fields:r.value.mapValue.fields}}function Zh(a,t,r){const o=ga(a,t.name),u=Fi(t.updateTime),d=t.createTime?Fi(t.createTime):rn.min(),m=new Kr({mapValue:{fields:t.fields}}),D=dr.newFoundDocument(o,u,d,m);return r&&D.setHasCommittedMutations(),r?D.setHasCommittedMutations():D}function Ou(a,t){let r;if(t instanceof En)r={update:Jh(a,t.key,t.value)};else if(t instanceof Ks)r={delete:Xc(a,t.key)};else if(t instanceof gr)r={update:Jh(a,t.key,t.data),updateMask:Ac(t.fieldMask)};else{if(!(t instanceof Ei))return bt();r={verify:Xc(a,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(o=>function(d,m){const D=m.transform;if(D instanceof lo)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(D instanceof Ro)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:D.elements}};if(D instanceof X)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:D.elements}};if(D instanceof $)return{fieldPath:m.field.canonicalString(),increment:D.Pe};throw bt()}(0,o))),t.precondition.isNone||(r.currentDocument=void 0!==(d=t.precondition).updateTime?{updateTime:Pu(a,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:bt()),r;var d}function Nu(a,t){const r=t.currentDocument?void 0!==(d=t.currentDocument).updateTime?er.updateTime(Fi(d.updateTime)):void 0!==d.exists?er.exists(d.exists):er.none():er.none(),o=t.updateTransforms?t.updateTransforms.map(u=>function(m,D){let N=null;"setToServerValue"in D?(pt("REQUEST_TIME"===D.setToServerValue),N=new lo):"appendMissingElements"in D?N=new Ro(D.appendMissingElements.values||[]):"removeAllFromArray"in D?N=new X(D.removeAllFromArray.values||[]):"increment"in D?N=new $(m,D.increment):bt();const j=Re.fromServerFormat(D.fieldPath);return new Vt(j,N)}(a,u)):[];var d;if(t.update){const u=ga(a,t.update.name),d=new Kr({mapValue:{fields:t.update.fields}});if(t.updateMask){const m=new Wr((t.updateMask.fieldPaths||[]).map(ie=>Re.fromServerFormat(ie)));return new gr(u,d,m,r,o)}return new En(u,d,r,o)}if(t.delete){const u=ga(a,t.delete);return new Ks(u,r)}if(t.verify){const u=ga(a,t.verify);return new Ei(u,r)}return bt()}function M(a,t){return{documents:[Yh(a,t.path)]}}function I(a,t){const r={structuredQuery:{}},o=t.path;let u;null!==t.collectionGroup?(u=o,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(u=o.popLast(),r.structuredQuery.from=[{collectionId:o.lastSegment()}]),r.parent=Yh(a,u);const d=function(j){if(0!==j.length)return ji(ee.create(j,"and"))}(t.filters);d&&(r.structuredQuery.where=d);const m=function(j){if(0!==j.length)return j.map(ie=>{return{field:or((Me=ie).field),direction:wt(Me.dir)};var Me})}(t.orderBy);m&&(r.structuredQuery.orderBy=m);const D=Va(a,t.limit);return null!==D&&(r.structuredQuery.limit=D),t.startAt&&(r.structuredQuery.startAt={before:(j=t.startAt).inclusive,values:j.position}),t.endAt&&(r.structuredQuery.endAt=function(j){return{before:!j.inclusive,values:j.position}}(t.endAt)),{_t:r,parent:u};var j}function B(a){let t=wl(a.parent);const r=a.structuredQuery,o=r.from?r.from.length:0;let u=null;if(o>0){pt(1===o);const ie=r.from[0];ie.allDescendants?u=ie.collectionId:t=t.child(ie.collectionId)}let d=[];r.where&&(d=function(fe){const Me=we(fe);return Me instanceof ee&&ir(Me)?Me.getFilters():[Me]}(r.where));let m=[];r.orderBy&&(m=r.orderBy.map(Me=>{return new xi(fr((jt=Me).field),function(Xt){switch(Xt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(jt.direction));var jt}));let D=null;r.limit&&(D=function(fe){let Me;return Me="object"==typeof fe?fe.value:fe,ye(Me)?null:Me}(r.limit));let N=null;var fe;r.startAt&&(N=new _s((fe=r.startAt).values||[],!!fe.before));let j=null;return r.endAt&&(j=function(fe){return new _s(fe.values||[],!fe.before)}(r.endAt)),kn(t,u,m,d,D,"F",N,j)}function we(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const o=fr(r.unaryFilter.field);return O.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=fr(r.unaryFilter.field);return O.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=fr(r.unaryFilter.field);return O.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=fr(r.unaryFilter.field);return O.create(m,"!=",{nullValue:"NULL_VALUE"});default:return bt()}}(a):void 0!==a.fieldFilter?O.create(fr((r=a).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bt()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return ee.create(r.compositeFilter.filters.map(o=>we(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return bt()}}(r.compositeFilter.op))}(a):bt();var r}function wt(a){return Kc[a]}function dt(a){return ra[a]}function gn(a){return qc[a]}function or(a){return{fieldPath:a.canonicalString()}}function fr(a){return Re.fromServerFormat(a.fieldPath)}function ji(a){return a instanceof O?function(r){if("=="===r.op){if(ps(r.value))return{unaryFilter:{field:or(r.field),op:"IS_NAN"}};if(fs(r.value))return{unaryFilter:{field:or(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(ps(r.value))return{unaryFilter:{field:or(r.field),op:"IS_NOT_NAN"}};if(fs(r.value))return{unaryFilter:{field:or(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:or(r.field),op:dt(r.op),value:r.value}}}(a):a instanceof ee?function(r){const o=r.getFilters().map(u=>ji(u));return 1===o.length?o[0]:{compositeFilter:{op:gn(r.op),filters:o}}}(a):bt()}function Ac(a){const t=[];return a.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function ia(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class Co{constructor(t,r,o,u,d=rn.min(),m=rn.min(),D=Ur.EMPTY_BYTE_STRING,N=null){this.target=t,this.targetId=r,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=D,this.expectedCount=N}withSequenceNumber(t){return new Co(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class qs{constructor(t){this.ct=t}}function xu(a,t){const r=t.key,o={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:ku(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())o.document={name:Xc(d=a.ct,(m=t).key),fields:m.data.value.mapValue.fields,updateTime:ic(d,m.version.toTimestamp()),createTime:ic(d,m.createTime.toTimestamp())};else if(t.isNoDocument())o.noDocument={path:r.path.toArray(),readTime:Ua(t.version)};else{if(!t.isUnknownDocument())return bt();o.unknownDocument={path:r.path.toArray(),version:Ua(t.version)}}var d,m;return o}function ku(a){const t=a.toTimestamp();return[t.seconds,t.nanoseconds]}function Ua(a){const t=a.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Yc(a){const t=new nn(a.seconds,a.nanoseconds);return rn.fromTimestamp(t)}function Mr(a,t){const r=(t.baseMutations||[]).map(d=>Nu(a.ct,d));for(let d=0;d<t.mutations.length-1;++d)d+1<t.mutations.length&&void 0!==t.mutations[d+1].transform&&(t.mutations[d].updateTransforms=t.mutations[d+1].transform.fieldTransforms,t.mutations.splice(d+1,1),++d);const o=t.mutations.map(d=>Nu(a.ct,d)),u=nn.fromMillis(t.localWriteTimeMs);return new Br(t.batchId,u,r,o)}function Ba(a){const t=Yc(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?Yc(a.lastLimboFreeSnapshotVersion):rn.min();let o;return o=void 0!==a.query.documents?(pt(1===(d=a.query).documents.length),wr(On(wl(d.documents[0])))):function(d){return wr(B(d))}(a.query),new Co(o,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,t,r,Ur.fromBase64String(a.resumeToken));var d}function Jc(a,t){const r=Ua(t.snapshotVersion),o=Ua(t.lastLimboFreeSnapshotVersion);let u;u=Le(t.target)?M(a.ct,t.target):I(a.ct,t.target)._t;const d=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:de(t.target),readTime:r,resumeToken:d,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Qs(a){const t=B({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?bs(t,t.limit,"L"):t}function Id(a,t){return new sr(t.largestBatchId,Nu(a.ct,t.overlayMutation))}function sc(a,t){const r=t.path.lastSegment();return[a,Ze(t.path.popLast()),r]}function oc(a,t,r,o){return{indexId:a,uid:t,sequenceNumber:r,readTime:Ua(o.readTime),documentKey:Ze(o.documentKey.path),largestBatchId:o.largestBatchId}}class Xo{getBundleMetadata(t,r){return ef(t).get(r).next(o=>{if(o)return{id:(d=o).bundleId,createTime:Yc(d.createTime),version:d.version};var d})}saveBundleMetadata(t,r){return ef(t).put({bundleId:(u=r).id,createTime:Ua(Fi(u.createTime)),version:u.version});var u}getNamedQuery(t,r){return Zc(t).get(r).next(o=>{if(o)return{name:(d=o).name,query:Qs(d.bundledQuery),readTime:Yc(d.readTime)};var d})}saveNamedQuery(t,r){return Zc(t).put({name:(u=r).name,readTime:Ua(Fi(u.readTime)),bundledQuery:u.bundledQuery});var u}}function ef(a){return Cr(a,"bundles")}function Zc(a){return Cr(a,"namedQueries")}class Dl{constructor(t,r){this.serializer=t,this.userId=r}static lt(t,r){return new Dl(t,r.uid||"")}getOverlay(t,r){return fo(t).get(sc(this.userId,r)).next(o=>o?Id(this.serializer,o):null)}getOverlays(t,r){const o=hr();return Ne.forEach(r,u=>this.getOverlay(t,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(t,r,o){const u=[];return o.forEach((d,m)=>{const D=new sr(r,m);u.push(this.ht(t,D))}),Ne.waitFor(u)}removeOverlaysForBatchId(t,r,o){const u=new Set;r.forEach(m=>u.add(Ze(m.getCollectionPath())));const d=[];return u.forEach(m=>{const D=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,o+1],!1,!0);d.push(fo(t).j("collectionPathOverlayIndex",D))}),Ne.waitFor(d)}getOverlaysForCollection(t,r,o){const u=hr(),d=Ze(r),m=IDBKeyRange.bound([this.userId,d,o],[this.userId,d,Number.POSITIVE_INFINITY],!0);return fo(t).U("collectionPathOverlayIndex",m).next(D=>{for(const N of D){const j=Id(this.serializer,N);u.set(j.getKey(),j)}return u})}getOverlaysForCollectionGroup(t,r,o,u){const d=hr();let m;const D=IDBKeyRange.bound([this.userId,r,o],[this.userId,r,Number.POSITIVE_INFINITY],!0);return fo(t).J({index:"collectionGroupOverlayIndex",range:D},(N,j,ie)=>{const fe=Id(this.serializer,j);d.size()<u||fe.largestBatchId===m?(d.set(fe.getKey(),fe),m=fe.largestBatchId):ie.done()}).next(()=>d)}ht(t,r){return fo(t).put(function(u,d,m){const[D,N,j]=sc(d,m.mutation.key);return{userId:d,collectionPath:N,documentId:j,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Ou(u.ct,m.mutation)}}(this.serializer,this.userId,r))}}function fo(a){return Cr(a,"documentOverlays")}class tf{Pt(t){return Cr(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(r=>{const o=r?.value;return o?Ur.fromUint8Array(o):Ur.EMPTY_BYTE_STRING})}setSessionToken(t,r){return this.Pt(t).put({name:"sessionToken",value:r.toUint8Array()})}}class ja{constructor(){}It(t,r){this.Tt(t,r),r.Et()}Tt(t,r){if("nullValue"in t)this.dt(r,5);else if("booleanValue"in t)this.dt(r,10),r.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(r,15),r.At(hn(t.integerValue));else if("doubleValue"in t){const o=hn(t.doubleValue);isNaN(o)?this.dt(r,13):(this.dt(r,15),ve(o)?r.At(0):r.At(o))}else if("timestampValue"in t){let o=t.timestampValue;this.dt(r,20),"string"==typeof o&&(o=us(o)),r.Rt(`${o.seconds||""}`),r.At(o.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,r),this.ft(r);else if("bytesValue"in t)this.dt(r,30),r.gt(Di(t.bytesValue)),this.ft(r);else if("referenceValue"in t)this.yt(t.referenceValue,r);else if("geoPointValue"in t){const o=t.geoPointValue;this.dt(r,45),r.At(o.latitude||0),r.At(o.longitude||0)}else"mapValue"in t?Go(t)?this.dt(r,Number.MAX_SAFE_INTEGER):Gs(t)?this.wt(t.mapValue,r):(this.St(t.mapValue,r),this.ft(r)):"arrayValue"in t?(this.bt(t.arrayValue,r),this.ft(r)):bt()}Vt(t,r){this.dt(r,25),this.Dt(t,r)}Dt(t,r){r.Rt(t)}St(t,r){const o=t.fields||{};this.dt(r,55);for(const u of Object.keys(o))this.Vt(u,r),this.Tt(o[u],r)}wt(t,r){var o,u;const d=t.fields||{};this.dt(r,53);const m="value",D=(null===(u=null===(o=d[m].arrayValue)||void 0===o?void 0:o.values)||void 0===u?void 0:u.length)||0;this.dt(r,15),r.At(hn(D)),this.Vt(m,r),this.Tt(d[m],r)}bt(t,r){const o=t.values||[];this.dt(r,50);for(const u of o)this.Tt(u,r)}yt(t,r){this.dt(r,37),Ie.fromName(t).path.forEach(o=>{this.dt(r,60),this.Dt(o,r)})}dt(t,r){t.At(r)}ft(t){t.At(2)}}function Al(a){if(0===a)return 8;let t=0;return!(a>>4)&&(t+=4,a<<=4),!(a>>6)&&(t+=2,a<<=2),!(a>>7)&&(t+=1),t}function bl(a){const t=64-function(o){let u=0;for(let d=0;d<8;++d){const m=Al(255&o[d]);if(u+=m,8!==m)break}return u}(a);return Math.ceil(t/8)}ja.vt=new ja;class bc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){const r=t[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Ft(o.value),o=r.next();this.Mt()}xt(t){const r=t[Symbol.iterator]();let o=r.next();for(;!o.done;)this.Ot(o.value),o=r.next();this.Nt()}Lt(t){for(const r of t){const o=r.charCodeAt(0);if(o<128)this.Ft(o);else if(o<2048)this.Ft(960|o>>>6),this.Ft(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|o>>>12),this.Ft(128|63&o>>>6),this.Ft(128|63&o);else{const u=r.codePointAt(0);this.Ft(240|u>>>18),this.Ft(128|63&u>>>12),this.Ft(128|63&u>>>6),this.Ft(128|63&u)}}this.Mt()}Bt(t){for(const r of t){const o=r.charCodeAt(0);if(o<128)this.Ot(o);else if(o<2048)this.Ot(960|o>>>6),this.Ot(128|63&o);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|o>>>12),this.Ot(128|63&o>>>6),this.Ot(128|63&o);else{const u=r.codePointAt(0);this.Ot(240|u>>>18),this.Ot(128|63&u>>>12),this.Ot(128|63&u>>>6),this.Ot(128|63&u)}}this.Nt()}kt(t){const r=this.qt(t),o=bl(r);this.Qt(1+o),this.buffer[this.position++]=255&o;for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=255&r[u]}Kt(t){const r=this.qt(t),o=bl(r);this.Qt(1+o),this.buffer[this.position++]=~(255&o);for(let u=r.length-o;u<r.length;++u)this.buffer[this.position++]=~(255&r[u])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){const r=function(d){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,d,!1),new Uint8Array(m.buffer)}(t),o=!!(128&r[0]);r[0]^=o?255:128;for(let u=1;u<r.length;++u)r[u]^=o?255:0;return r}Ft(t){const r=255&t;0===r?(this.Ut(0),this.Ut(255)):255===r?(this.Ut(255),this.Ut(0)):this.Ut(r)}Ot(t){const r=255&t;0===r?(this.Gt(0),this.Gt(255)):255===r?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){const r=t+this.position;if(r<=this.buffer.length)return;let o=2*this.buffer.length;o<r&&(o=r);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Fu{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}}class Sl{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}}class $a{constructor(){this.jt=new bc,this.Ht=new Fu(this.jt),this.Jt=new Sl(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return 0===t?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class wo{constructor(t,r,o,u){this.indexId=t,this.documentKey=r,this.arrayValue=o,this.directionalValue=u}Zt(){const t=this.directionalValue.length,r=0===t||255===this.directionalValue[t-1]?t+1:t,o=new Uint8Array(r);return o.set(this.directionalValue,0),r!==t?o.set([0],this.directionalValue.length):++o[o.length-1],new wo(this.indexId,this.documentKey,this.arrayValue,o)}}function qn(a,t){let r=a.indexId-t.indexId;return 0!==r?r:(r=Cd(a.arrayValue,t.arrayValue),0!==r?r:(r=Cd(a.directionalValue,t.directionalValue),0!==r?r:Ie.comparator(a.documentKey,t.documentKey)))}function Cd(a,t){for(let r=0;r<a.length&&r<t.length;++r){const o=a[r]-t[r];if(0!==o)return o}return a.length-t.length}class nf{constructor(t){this.Xt=new Dr((r,o)=>Re.comparator(r.field,o.field)),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(const r of t.filters){const o=r;o.isInequality()?this.Xt=this.Xt.add(o):this.tn.push(o)}}get nn(){return this.Xt.size>1}rn(t){if(pt(t.collectionGroup===this.collectionId),this.nn)return!1;const r=Ke(t);if(void 0!==r&&!this.sn(r))return!1;const o=Mt(t);let u=new Set,d=0,m=0;for(;d<o.length&&this.sn(o[d]);++d)u=u.add(o[d].fieldPath.canonicalString());if(d===o.length)return!0;if(this.Xt.size>0){const D=this.Xt.getIterator().getNext();if(!u.has(D.field.canonicalString())){const N=o[d];if(!this.on(D,N)||!this._n(this.en[m++],N))return!1}++d}for(;d<o.length;++d)if(m>=this.en.length||!this._n(this.en[m++],o[d]))return!1;return!0}an(){if(this.nn)return null;let t=new Dr(Re.comparator);const r=[];for(const o of this.tn)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)r.push(new q(o.field,2));else{if(t.has(o.field))continue;t=t.add(o.field),r.push(new q(o.field,0))}for(const o of this.en)o.field.isKeyField()||t.has(o.field)||(t=t.add(o.field),r.push(new q(o.field,"asc"===o.dir?0:1)));return new Ee(Ee.UNKNOWN_ID,this.collectionId,r,oe.empty())}sn(t){for(const r of this.tn)if(this.on(r,t))return!0;return!1}on(t,r){return!(void 0===t||!t.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===t.op||"array-contains-any"===t.op)}_n(t,r){return!!t.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===t.dir||1===r.kind&&"desc"===t.dir)}}function wd(a){var t,r;if(pt(a instanceof O||a instanceof ee),a instanceof O){if(a instanceof re){const u=(null===(r=null===(t=a.value.arrayValue)||void 0===t?void 0:t.values)||void 0===r?void 0:r.map(d=>O.create(a.field,"==",d)))||[];return ee.create(u,"or")}return a}const o=a.filters.map(u=>wd(u));return ee.create(o,a.op)}function rf(a){if(0===a.getFilters().length)return[];const t=Dd(wd(a));return pt(Ha(t)),Td(t)||Pl(t)?[t]:t.getFilters()}function Td(a){return a instanceof O}function Pl(a){return a instanceof ee&&ir(a)}function Ha(a){return Td(a)||Pl(a)||function(r){if(r instanceof ee&&fn(r)){for(const o of r.getFilters())if(!Td(o)&&!Pl(o))return!1;return!0}return!1}(a)}function Dd(a){if(pt(a instanceof O||a instanceof ee),a instanceof O)return a;if(1===a.filters.length)return Dd(a.filters[0]);const t=a.filters.map(o=>Dd(o));let r=ee.create(t,a.op);return r=Rl(r),Ha(r)?r:(pt(r instanceof ee),pt(Se(r)),pt(r.filters.length>1),r.filters.reduce((o,u)=>Ad(o,u)))}function Ad(a,t){let r;return pt(a instanceof O||a instanceof ee),pt(t instanceof O||t instanceof ee),r=a instanceof O?t instanceof O?ee.create([a,t],"and"):Ml(a,t):t instanceof O?Ml(t,a):function(u,d){if(pt(u.filters.length>0&&d.filters.length>0),Se(u)&&Se(d))return ao(u,d.getFilters());const m=fn(u)?u:d,D=fn(u)?d:u,N=m.filters.map(j=>Ad(j,D));return ee.create(N,"or")}(a,t),Rl(r)}function Ml(a,t){if(Se(t))return ao(t,a.getFilters());{const r=t.filters.map(o=>Ad(a,o));return ee.create(r,"or")}}function Rl(a){if(pt(a instanceof O||a instanceof ee),a instanceof O)return a;const t=a.getFilters();if(1===t.length)return Rl(t[0]);if(As(a))return a;const r=t.map(u=>Rl(u)),o=[];return r.forEach(u=>{u instanceof O?o.push(u):u instanceof ee&&(u.op===a.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:ee.create(o,a.op)}class Kp{constructor(){this.un=new Ft}addToCollectionParentIndex(t,r){return this.un.add(r),Ne.resolve()}getCollectionParents(t,r){return Ne.resolve(this.un.getEntries(r))}addFieldIndex(t,r){return Ne.resolve()}deleteFieldIndex(t,r){return Ne.resolve()}deleteAllFieldIndexes(t){return Ne.resolve()}createTargetIndexes(t,r){return Ne.resolve()}getDocumentsMatchingTarget(t,r){return Ne.resolve(null)}getIndexType(t,r){return Ne.resolve(0)}getFieldIndexes(t,r){return Ne.resolve([])}getNextCollectionGroupToUpdate(t){return Ne.resolve(null)}getMinOffset(t,r){return Ne.resolve(xt.min())}getMinOffsetFromCollectionGroup(t,r){return Ne.resolve(xt.min())}updateCollectionGroup(t,r,o){return Ne.resolve()}updateIndexEntries(t,r){return Ne.resolve()}}class Ft{constructor(){this.index={}}add(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r]||new Dr(Nn.comparator),d=!u.has(o);return this.index[r]=u.add(o),d}has(t){const r=t.lastSegment(),o=t.popLast(),u=this.index[r];return u&&u.has(o)}getEntries(t){return(this.index[t]||new Dr(Nn.comparator)).toArray()}}const Rr=new Uint8Array(0);class Ol{constructor(t,r){this.databaseId=r,this.cn=new Ft,this.ln=new Ss(o=>de(o),(o,u)=>be(o,u)),this.uid=t.uid||""}addToCollectionParentIndex(t,r){if(!this.cn.has(r)){const o=r.lastSegment(),u=r.popLast();t.addOnCommittedListener(()=>{this.cn.add(r)});const d={collectionId:o,parent:Ze(u)};return Vu(t).put(d)}return Ne.resolve()}getCollectionParents(t,r){const o=[],u=IDBKeyRange.bound([r,""],[Qr(r),""],!1,!0);return Vu(t).U(u).next(d=>{for(const m of d){if(m.collectionId!==r)break;o.push(xn(m.parent))}return o})}addFieldIndex(t,r){const o=Sc(t),u={indexId:(D=r).indexId,collectionGroup:D.collectionGroup,fields:D.fields.map(N=>[N.fieldPath.canonicalString(),N.kind])};var D;delete u.indexId;const d=o.add(u);if(r.indexState){const m=sa(t);return d.next(D=>{m.put(oc(D,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return d.next()}deleteFieldIndex(t,r){const o=Sc(t),u=sa(t),d=Fr(t);return o.delete(r.indexId).next(()=>u.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>d.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){const r=Sc(t),o=Fr(t),u=sa(t);return r.j().next(()=>o.j()).next(()=>u.j())}createTargetIndexes(t,r){return Ne.forEach(this.hn(r),o=>this.getIndexType(t,o).next(u=>{if(0===u||1===u){const d=new nf(o).an();if(null!=d)return this.addFieldIndex(t,d)}}))}getDocumentsMatchingTarget(t,r){const o=Fr(t);let u=!0;const d=new Map;return Ne.forEach(this.hn(r),m=>this.Pn(t,m).next(D=>{u&&(u=!!D),d.set(m,D)})).next(()=>{if(u){let m=wn();const D=[];return Ne.forEach(d,(N,j)=>{var Vn;at("IndexedDbIndexManager",`Using index ${Vn=N,`id=${Vn.indexId}|cg=${Vn.collectionGroup}|f=${Vn.fields.map(ur=>`${ur.fieldPath}:${ur.kind}`).join(",")}`} to execute ${de(r)}`);const ie=function(Vn,ur){const Lr=Ke(ur);if(void 0===Lr)return null;for(const br of _t(Vn,Lr.fieldPath))switch(br.op){case"array-contains-any":return br.value.arrayValue.values||[];case"array-contains":return[br.value]}return null}(j,N),fe=function(Vn,ur){const Lr=new Map;for(const br of Mt(ur))for(const nt of _t(Vn,br.fieldPath))switch(nt.op){case"==":case"in":Lr.set(br.fieldPath.canonicalString(),nt.value);break;case"not-in":case"!=":return Lr.set(br.fieldPath.canonicalString(),nt.value),Array.from(Lr.values())}return null}(j,N),Me=function(Vn,ur){const Lr=[];let br=!0;for(const nt of Mt(ur)){const Ae=0===nt.kind?St(Vn,nt.fieldPath,Vn.startAt):$t(Vn,nt.fieldPath,Vn.startAt);Lr.push(Ae.value),br&&(br=Ae.inclusive)}return new _s(Lr,br)}(j,N),ct=function(Vn,ur){const Lr=[];let br=!0;for(const nt of Mt(ur)){const Ae=0===nt.kind?$t(Vn,nt.fieldPath,Vn.endAt):St(Vn,nt.fieldPath,Vn.endAt);Lr.push(Ae.value),br&&(br=Ae.inclusive)}return new _s(Lr,br)}(j,N),jt=this.In(N,j,Me),sn=this.In(N,j,ct),Xt=this.Tn(N,j,fe),Bn=this.En(N.indexId,ie,jt,Me.inclusive,sn,ct.inclusive,Xt);return Ne.forEach(Bn,nr=>o.G(nr,r.limit).next(Vn=>{Vn.forEach(ur=>{const Lr=Ie.fromSegments(ur.documentKey);m.has(Lr)||(m=m.add(Lr),D.push(Lr))})}))}).next(()=>D)}return Ne.resolve(null)})}hn(t){let r=this.ln.get(t);return r||(r=0===t.filters.length?[t]:rf(ee.create(t.filters,"and")).map(o=>Z(t.path,t.collectionGroup,t.orderBy,o.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,r),r)}En(t,r,o,u,d,m,D){const N=(null!=r?r.length:1)*Math.max(o.length,d.length),j=N/(null!=r?r.length:1),ie=[];for(let fe=0;fe<N;++fe){const Me=r?this.dn(r[fe/j]):Rr,ct=this.An(t,Me,o[fe%j],u),jt=this.Rn(t,Me,d[fe%j],m),sn=D.map(Xt=>this.An(t,Me,Xt,!0));ie.push(...this.createRange(ct,jt,sn))}return ie}An(t,r,o,u){const d=new wo(t,Ie.empty(),r,o);return u?d:d.Zt()}Rn(t,r,o,u){const d=new wo(t,Ie.empty(),r,o);return u?d.Zt():d}Pn(t,r){const o=new nf(r),u=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(t,u).next(d=>{let m=null;for(const D of d)o.rn(D)&&(!m||D.fields.length>m.fields.length)&&(m=D);return m})}getIndexType(t,r){let o=2;const u=this.hn(r);return Ne.forEach(u,d=>this.Pn(t,d).next(m=>{m?0!==o&&m.fields.length<function(N){let j=new Dr(Re.comparator),ie=!1;for(const fe of N.filters)for(const Me of fe.getFlattenedFilters())Me.field.isKeyField()||("array-contains"===Me.op||"array-contains-any"===Me.op?ie=!0:j=j.add(Me.field));for(const fe of N.orderBy)fe.field.isKeyField()||(j=j.add(fe.field));return j.size+(ie?1:0)}(d)&&(o=1):o=0})).next(()=>null!==r.limit&&u.length>1&&2===o?1:o)}Vn(t,r){const o=new $a;for(const u of Mt(t)){const d=r.data.field(u.fieldPath);if(null==d)return null;const m=o.Yt(u.kind);ja.vt.It(d,m)}return o.zt()}dn(t){const r=new $a;return ja.vt.It(t,r.Yt(0)),r.zt()}mn(t,r){const o=new $a;return ja.vt.It(Ui(this.databaseId,r),o.Yt(function(d){const m=Mt(d);return 0===m.length?0:m[m.length-1].kind}(t))),o.zt()}Tn(t,r,o){if(null===o)return[];let u=[];u.push(new $a);let d=0;for(const m of Mt(t)){const D=o[d++];for(const N of u)if(this.fn(r,m.fieldPath)&&Vs(D))u=this.gn(u,m,D);else{const j=N.Yt(m.kind);ja.vt.It(D,j)}}return this.pn(u)}In(t,r,o){return this.Tn(t,r,o.position)}pn(t){const r=[];for(let o=0;o<t.length;++o)r[o]=t[o].zt();return r}gn(t,r,o){const u=[...t],d=[];for(const m of o.arrayValue.values||[])for(const D of u){const N=new $a;N.seed(D.zt()),ja.vt.It(m,N.Yt(r.kind)),d.push(N)}return d}fn(t,r){return!!t.filters.find(o=>o instanceof O&&o.field.isEqual(r)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(t,r){const o=Sc(t),u=sa(t);return(r?o.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):o.U()).next(d=>{const m=[];return Ne.forEach(d,D=>u.get([D.indexId,this.uid]).next(N=>{m.push(function(ie,fe){const Me=fe?new oe(fe.sequenceNumber,new xt(Yc(fe.readTime),new Ie(xn(fe.documentKey)),fe.largestBatchId)):oe.empty(),ct=ie.fields.map(([jt,sn])=>new q(Re.fromServerFormat(jt),sn));return new Ee(ie.indexId,ie.collectionGroup,ct,Me)}(D,N))})).next(()=>m)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(r=>0===r.length?null:(r.sort((o,u)=>{const d=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==d?d:Wt(o.collectionGroup,u.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(t,r,o){const u=Sc(t),d=sa(t);return this.yn(t).next(m=>u.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(D=>Ne.forEach(D,N=>d.put(oc(N.indexId,this.uid,m,o)))))}updateIndexEntries(t,r){const o=new Map;return Ne.forEach(r,(u,d)=>{const m=o.get(u.collectionGroup);return(m?Ne.resolve(m):this.getFieldIndexes(t,u.collectionGroup)).next(D=>(o.set(u.collectionGroup,D),Ne.forEach(D,N=>this.wn(t,u,N).next(j=>{const ie=this.Sn(d,N);return j.isEqual(ie)?Ne.resolve():this.bn(t,d,N,j,ie)}))))})}Dn(t,r,o,u){return Fr(t).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.mn(o,r.key),documentKey:r.key.path.toArray()})}vn(t,r,o,u){return Fr(t).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.mn(o,r.key),r.key.path.toArray()])}wn(t,r,o){const u=Fr(t);let d=new Dr(qn);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.mn(o,r)])},(m,D)=>{d=d.add(new wo(o.indexId,r,D.arrayValue,D.directionalValue))}).next(()=>d)}Sn(t,r){let o=new Dr(qn);const u=this.Vn(r,t);if(null==u)return o;const d=Ke(r);if(null!=d){const m=t.data.field(d.fieldPath);if(Vs(m))for(const D of m.arrayValue.values||[])o=o.add(new wo(r.indexId,t.key,this.dn(D),u))}else o=o.add(new wo(r.indexId,t.key,Rr,u));return o}bn(t,r,o,u,d){at("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const m=[];return function(N,j,ie,fe,Me){const ct=N.getIterator(),jt=j.getIterator();let sn=ro(ct),Xt=ro(jt);for(;sn||Xt;){let Bn=!1,nr=!1;if(sn&&Xt){const Vn=ie(sn,Xt);Vn<0?nr=!0:Vn>0&&(Bn=!0)}else null!=sn?nr=!0:Bn=!0;Bn?(fe(Xt),Xt=ro(jt)):nr?(Me(sn),sn=ro(ct)):(sn=ro(ct),Xt=ro(jt))}}(u,d,qn,D=>{m.push(this.Dn(t,r,o,D))},D=>{m.push(this.vn(t,r,o,D))}),Ne.waitFor(m)}yn(t){let r=1;return sa(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,d)=>{d.done(),r=u.sequenceNumber+1}).next(()=>r)}createRange(t,r,o){o=o.sort((m,D)=>qn(m,D)).filter((m,D,N)=>!D||0!==qn(m,N[D-1]));const u=[];u.push(t);for(const m of o){const D=qn(m,t),N=qn(m,r);if(0===D)u[0]=t.Zt();else if(D>0&&N<0)u.push(m),u.push(m.Zt());else if(N>0)break}u.push(r);const d=[];for(let m=0;m<u.length;m+=2){if(this.Cn(u[m],u[m+1]))return[];d.push(IDBKeyRange.bound([u[m].indexId,this.uid,u[m].arrayValue,u[m].directionalValue,Rr,[]],[u[m+1].indexId,this.uid,u[m+1].arrayValue,u[m+1].directionalValue,Rr,[]]))}return d}Cn(t,r){return qn(t,r)>0}getMinOffsetFromCollectionGroup(t,r){return this.getFieldIndexes(t,r).next(ma)}getMinOffset(t,r){return Ne.mapArray(this.hn(r),o=>this.Pn(t,o).next(u=>u||bt())).next(ma)}}function Vu(a){return Cr(a,"collectionParents")}function Fr(a){return Cr(a,"indexEntries")}function Sc(a){return Cr(a,"indexConfiguration")}function sa(a){return Cr(a,"indexState")}function ma(a){pt(0!==a.length);let t=a[0].indexState.offset,r=t.largestBatchId;for(let o=1;o<a.length;o++){const u=a[o].indexState.offset;yn(u,t)<0&&(t=u),r<u.largestBatchId&&(r=u.largestBatchId)}return new xt(t.readTime,t.documentKey,r)}const Lu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ns{constructor(t,r,o){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=o}static withCacheSize(t){return new Ns(t,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function bd(a,t,r){const o=a.store("mutations"),u=a.store("documentMutations"),d=[],m=IDBKeyRange.only(r.batchId);let D=0;const N=o.J({range:m},(ie,fe,Me)=>(D++,Me.delete()));d.push(N.next(()=>{pt(1===D)}));const j=[];for(const ie of r.mutations){const fe=ti(t,ie.key.path,r.batchId);d.push(u.delete(fe)),j.push(ie.key)}return Ne.waitFor(d).next(()=>j)}function Sd(a){if(!a)return 0;let t;if(a.document)t=a.document;else if(a.unknownDocument)t=a.unknownDocument;else{if(!a.noDocument)throw bt();t=a.noDocument}return JSON.stringify(t).length}Ns.DEFAULT_COLLECTION_PERCENTILE=10,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ns.DEFAULT=new Ns(41943040,Ns.DEFAULT_COLLECTION_PERCENTILE,Ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ns.DISABLED=new Ns(-1,0,0);class eu{constructor(t,r,o,u){this.userId=t,this.serializer=r,this.indexManager=o,this.referenceDelegate=u,this.Fn={}}static lt(t,r,o,u){pt(""!==t.uid);const d=t.isAuthenticated()?t.uid:"";return new eu(d,r,o,u)}checkEmpty(t){let r=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return po(t).J({index:"userMutationsIndex",range:o},(u,d,m)=>{r=!1,m.done()}).next(()=>r)}addMutationBatch(t,r,o,u){const d=Pc(t),m=po(t);return m.add({}).next(D=>{pt("number"==typeof D);const N=new Br(D,r,o,u),j=function(ct,jt,sn){const Xt=sn.baseMutations.map(nr=>Ou(ct.ct,nr)),Bn=sn.mutations.map(nr=>Ou(ct.ct,nr));return{userId:jt,batchId:sn.batchId,localWriteTimeMs:sn.localWriteTime.toMillis(),baseMutations:Xt,mutations:Bn}}(this.serializer,this.userId,N),ie=[];let fe=new Dr((Me,ct)=>Wt(Me.canonicalString(),ct.canonicalString()));for(const Me of u){const ct=ti(this.userId,Me.key.path,D);fe=fe.add(Me.key.path.popLast()),ie.push(m.put(j)),ie.push(d.put(ct,mr))}return fe.forEach(Me=>{ie.push(this.indexManager.addToCollectionParentIndex(t,Me))}),t.addOnCommittedListener(()=>{this.Fn[D]=N.keys()}),Ne.waitFor(ie).next(()=>N)})}lookupMutationBatch(t,r){return po(t).get(r).next(o=>o?(pt(o.userId===this.userId),Mr(this.serializer,o)):null)}Mn(t,r){return this.Fn[r]?Ne.resolve(this.Fn[r]):this.lookupMutationBatch(t,r).next(o=>{if(o){const u=o.keys();return this.Fn[r]=u,u}return null})}getNextMutationBatchAfterBatchId(t,r){const o=r+1,u=IDBKeyRange.lowerBound([this.userId,o]);let d=null;return po(t).J({index:"userMutationsIndex",range:u},(m,D,N)=>{D.userId===this.userId&&(pt(D.batchId>=o),d=Mr(this.serializer,D)),N.done()}).next(()=>d)}getHighestUnacknowledgedBatchId(t){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return po(t).J({index:"userMutationsIndex",range:r,reverse:!0},(u,d,m)=>{o=d.batchId,m.done()}).next(()=>o)}getAllMutationBatches(t){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return po(t).U("userMutationsIndex",r).next(o=>o.map(u=>Mr(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(t,r){const o=Or(this.userId,r.path),u=IDBKeyRange.lowerBound(o),d=[];return Pc(t).J({range:u},(m,D,N)=>{const[j,ie,fe]=m,Me=xn(ie);if(j===this.userId&&r.path.isEqual(Me))return po(t).get(fe).next(ct=>{if(!ct)throw bt();pt(ct.userId===this.userId),d.push(Mr(this.serializer,ct))});N.done()}).next(()=>d)}getAllMutationBatchesAffectingDocumentKeys(t,r){let o=new Dr(Wt);const u=[];return r.forEach(d=>{const m=Or(this.userId,d.path),D=IDBKeyRange.lowerBound(m),N=Pc(t).J({range:D},(j,ie,fe)=>{const[Me,ct,jt]=j,sn=xn(ct);Me===this.userId&&d.path.isEqual(sn)?o=o.add(jt):fe.done()});u.push(N)}),Ne.waitFor(u).next(()=>this.xn(t,o))}getAllMutationBatchesAffectingQuery(t,r){const o=r.path,u=o.length+1,d=Or(this.userId,o),m=IDBKeyRange.lowerBound(d);let D=new Dr(Wt);return Pc(t).J({range:m},(N,j,ie)=>{const[fe,Me,ct]=N,jt=xn(Me);fe===this.userId&&o.isPrefixOf(jt)?jt.length===u&&(D=D.add(ct)):ie.done()}).next(()=>this.xn(t,D))}xn(t,r){const o=[],u=[];return r.forEach(d=>{u.push(po(t).get(d).next(m=>{if(null===m)throw bt();pt(m.userId===this.userId),o.push(Mr(this.serializer,m))}))}),Ne.waitFor(u).next(()=>o)}removeMutationBatch(t,r){return bd(t._e,this.userId,r).next(o=>(t.addOnCommittedListener(()=>{this.On(r.batchId)}),Ne.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(t,u))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(r=>{if(!r)return Ne.resolve();const o=IDBKeyRange.lowerBound(function(m){return[m]}(this.userId)),u=[];return Pc(t).J({range:o},(d,m,D)=>{if(d[0]===this.userId){const N=xn(d[1]);u.push(N)}else D.done()}).next(()=>{pt(0===u.length)})})}containsKey(t,r){return Ls(t,this.userId,r)}Nn(t){return oa(t).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ls(a,t,r){const o=Or(t,r.path),u=o[1],d=IDBKeyRange.lowerBound(o);let m=!1;return Pc(a).J({range:d,H:!0},(D,N,j)=>{const[ie,fe,Me]=D;ie===t&&fe===u&&(m=!0),j.done()}).next(()=>m)}function po(a){return Cr(a,"mutations")}function Pc(a){return Cr(a,"documentMutations")}function oa(a){return Cr(a,"mutationQueues")}class Xs{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xs(0)}static kn(){return new Xs(-1)}}class qp{constructor(t,r){this.referenceDelegate=t,this.serializer=r}allocateTargetId(t){return this.qn(t).next(r=>{const o=new Xs(r.highestTargetId);return r.highestTargetId=o.next(),this.Qn(t,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(r=>rn.fromTimestamp(new nn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(t,r,o){return this.qn(t).next(u=>(u.highestListenSequenceNumber=r,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),r>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=r),this.Qn(t,u)))}addTargetData(t,r){return this.Kn(t,r).next(()=>this.qn(t).next(o=>(o.targetCount+=1,this.$n(r,o),this.Qn(t,o))))}updateTargetData(t,r){return this.Kn(t,r)}removeTargetData(t,r){return this.removeMatchingKeysForTargetId(t,r.targetId).next(()=>Mc(t).delete(r.targetId)).next(()=>this.qn(t)).next(o=>(pt(o.targetCount>0),o.targetCount-=1,this.Qn(t,o)))}removeTargets(t,r,o){let u=0;const d=[];return Mc(t).J((m,D)=>{const N=Ba(D);N.sequenceNumber<=r&&null===o.get(N.targetId)&&(u++,d.push(this.removeTargetData(t,N)))}).next(()=>Ne.waitFor(d)).next(()=>u)}forEachTarget(t,r){return Mc(t).J((o,u)=>{const d=Ba(u);r(d)})}qn(t){return Pd(t).get("targetGlobalKey").next(r=>(pt(null!==r),r))}Qn(t,r){return Pd(t).put("targetGlobalKey",r)}Kn(t,r){return Mc(t).put(Jc(this.serializer,r))}$n(t,r){let o=!1;return t.targetId>r.highestTargetId&&(r.highestTargetId=t.targetId,o=!0),t.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t.sequenceNumber,o=!0),o}getTargetCount(t){return this.qn(t).next(r=>r.targetCount)}getTargetData(t,r){const o=de(r),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let d=null;return Mc(t).J({range:u,index:"queryTargetsIndex"},(m,D,N)=>{const j=Ba(D);be(r,j.target)&&(d=j,N.done())}).next(()=>d)}addMatchingKeys(t,r,o){const u=[],d=ac(t);return r.forEach(m=>{const D=Ze(m.path);u.push(d.put({targetId:o,path:D})),u.push(this.referenceDelegate.addReference(t,o,m))}),Ne.waitFor(u)}removeMatchingKeys(t,r,o){const u=ac(t);return Ne.forEach(r,d=>{const m=Ze(d.path);return Ne.waitFor([u.delete([o,m]),this.referenceDelegate.removeReference(t,o,d)])})}removeMatchingKeysForTargetId(t,r){const o=ac(t),u=IDBKeyRange.bound([r],[r+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(t,r){const o=IDBKeyRange.bound([r],[r+1],!1,!0),u=ac(t);let d=wn();return u.J({range:o,H:!0},(m,D,N)=>{const j=xn(m[1]),ie=new Ie(j);d=d.add(ie)}).next(()=>d)}containsKey(t,r){const o=Ze(r.path),u=IDBKeyRange.bound([o],[Qr(o)],!1,!0);let d=0;return ac(t).J({index:"documentTargetsIndex",H:!0,range:u},([m,D],N,j)=>{0!==m&&(d++,j.done())}).next(()=>d>0)}ot(t,r){return Mc(t).get(r).next(o=>o?Ba(o):null)}}function Mc(a){return Cr(a,"targets")}function Pd(a){return Cr(a,"targetGlobal")}function ac(a){return Cr(a,"targetDocuments")}function Rc([a,t],[r,o]){const u=Wt(a,r);return 0===u?Wt(t,o):u}class Md{constructor(t){this.Un=t,this.buffer=new Dr(Rc),this.Wn=0}Gn(){return++this.Wn}zn(t){const r=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(r);else{const o=this.buffer.last();Rc(r,o)<0&&(this.buffer=this.buffer.delete(o).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Nl{constructor(t,r,o){this.garbageCollector=t,this.asyncQueue=r,this.localStore=o,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(t){var r=this;at("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,te.A)(function*(){r.jn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(o){rs(o)?at("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Rn(o)}yield r.Hn(3e5)}))}}class xl{constructor(t,r){this.Jn=t,this.params=r}calculateTargetCount(t,r){return this.Jn.Yn(t).next(o=>Math.floor(r/100*o))}nthSequenceNumber(t,r){if(0===r)return Ne.resolve(se.oe);const o=new Md(r);return this.Jn.forEachTarget(t,u=>o.zn(u.sequenceNumber)).next(()=>this.Jn.Zn(t,u=>o.zn(u))).next(()=>o.maxValue)}removeTargets(t,r,o){return this.Jn.removeTargets(t,r,o)}removeOrphanedDocuments(t,r){return this.Jn.removeOrphanedDocuments(t,r)}collect(t,r){return-1===this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(Lu)):this.getCacheSize(t).next(o=>o<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lu):this.Xn(t,r))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,r){let o,u,d,m,D,N,j;const ie=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(fe=>(fe>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${fe}`),u=this.params.maximumSequenceNumbersToCollect):u=fe,m=Date.now(),this.nthSequenceNumber(t,u))).next(fe=>(o=fe,D=Date.now(),this.removeTargets(t,o,r))).next(fe=>(d=fe,N=Date.now(),this.removeOrphanedDocuments(t,o))).next(fe=>(j=Date.now(),An()<=st.$b.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-ie}ms\n\tDetermined least recently used ${u} in `+(D-m)+`ms\n\tRemoved ${d} targets in `+(N-D)+`ms\n\tRemoved ${fe} documents in `+(j-N)+`ms\nTotal Duration: ${j-ie}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:d,documentsRemoved:fe})))}}class af{constructor(t,r){this.db=t,this.garbageCollector=function sf(a,t){return new xl(a,t)}(this,r)}Yn(t){const r=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(o=>r.next(u=>o+u))}er(t){let r=0;return this.Zn(t,o=>{r++}).next(()=>r)}forEachTarget(t,r){return this.db.getTargetCache().forEachTarget(t,r)}Zn(t,r){return this.tr(t,(o,u)=>r(u))}addReference(t,r,o){return tu(t,o)}removeReference(t,r,o){return tu(t,o)}removeTargets(t,r,o){return this.db.getTargetCache().removeTargets(t,r,o)}markPotentiallyOrphaned(t,r){return tu(t,r)}nr(t,r){return function(u,d){let m=!1;return oa(u).Y(D=>Ls(u,D,d).next(N=>(N&&(m=!0),Ne.resolve(!N)))).next(()=>m)}(t,r)}removeOrphanedDocuments(t,r){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let d=0;return this.tr(t,(m,D)=>{if(D<=r){const N=this.nr(t,m).next(j=>{if(!j)return d++,o.getEntry(t,m).next(()=>(o.removeEntry(m,rn.min()),ac(t).delete([0,Ze(m.path)])))});u.push(N)}}).next(()=>Ne.waitFor(u)).next(()=>o.apply(t)).next(()=>d)}removeTarget(t,r){const o=r.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,o)}updateLimboDocument(t,r){return tu(t,r)}tr(t,r){const o=ac(t);let u,d=se.oe;return o.J({index:"documentTargetsIndex"},([m,D],{path:N,sequenceNumber:j})=>{0===m?(d!==se.oe&&r(new Ie(xn(u)),d),d=j,u=N):d=se.oe}).next(()=>{d!==se.oe&&r(new Ie(xn(u)),d)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function tu(a,t){return ac(a).put((u=a.currentSequenceNumber,{targetId:0,path:Ze(t.path),sequenceNumber:u}));var u}class Rd{constructor(){this.changes=new Ss(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,dr.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const o=this.changes.get(r);return void 0!==o?Ne.resolve(o):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class cf{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,r,o){return Oc(t).put(o)}removeEntry(t,r,o){return Oc(t).delete(function(d,m){const D=d.path.toArray();return[D.slice(0,D.length-2),D[D.length-2],ku(m),D[D.length-1]]}(r,o))}updateMetadata(t,r){return this.getMetadata(t).next(o=>(o.byteSize+=r,this.rr(t,o)))}getEntry(t,r){let o=dr.newInvalidDocument(r);return Oc(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Es(r))},(u,d)=>{o=this.ir(r,d)}).next(()=>o)}sr(t,r){let o={size:0,document:dr.newInvalidDocument(r)};return Oc(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(Es(r))},(u,d)=>{o={document:this.ir(r,d),size:Sd(d)}}).next(()=>o)}getEntries(t,r){let o=ki();return this._r(t,r,(u,d)=>{const m=this.ir(u,d);o=o.insert(u,m)}).next(()=>o)}ar(t,r){let o=ki(),u=new Nr(Ie.comparator);return this._r(t,r,(d,m)=>{const D=this.ir(d,m);o=o.insert(d,D),u=u.insert(d,Sd(m))}).next(()=>({documents:o,ur:u}))}_r(t,r,o){if(r.isEmpty())return Ne.resolve();let u=new Dr(Mi);r.forEach(N=>u=u.add(N));const d=IDBKeyRange.bound(Es(u.first()),Es(u.last())),m=u.getIterator();let D=m.getNext();return Oc(t).J({index:"documentKeyIndex",range:d},(N,j,ie)=>{const fe=Ie.fromSegments([...j.prefixPath,j.collectionGroup,j.documentId]);for(;D&&Mi(D,fe)<0;)o(D,null),D=m.getNext();D&&D.isEqual(fe)&&(o(D,j),D=m.hasNext()?m.getNext():null),D?ie.$(Es(D)):ie.done()}).next(()=>{for(;D;)o(D,null),D=m.hasNext()?m.getNext():null})}getDocumentsMatchingQuery(t,r,o,u,d){const m=r.path,D=[m.popLast().toArray(),m.lastSegment(),ku(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],N=[m.popLast().toArray(),m.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Oc(t).U(IDBKeyRange.bound(D,N,!0)).next(j=>{d?.incrementDocumentReadCount(j.length);let ie=ki();for(const fe of j){const Me=this.ir(Ie.fromSegments(fe.prefixPath.concat(fe.collectionGroup,fe.documentId)),fe);Me.isFoundDocument()&&(co(r,Me)||u.has(Me.key))&&(ie=ie.insert(Me.key,Me))}return ie})}getAllFromCollectionGroup(t,r,o,u){let d=ki();const m=cc(r,o),D=cc(r,xt.max());return Oc(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(m,D,!0)},(N,j,ie)=>{const fe=this.ir(Ie.fromSegments(j.prefixPath.concat(j.collectionGroup,j.documentId)),j);d=d.insert(fe.key,fe),d.size===u&&ie.done()}).next(()=>d)}newChangeBuffer(t){return new uf(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(r=>r.byteSize)}getMetadata(t){return kl(t).get("remoteDocumentGlobalKey").next(r=>(pt(!!r),r))}rr(t,r){return kl(t).put("remoteDocumentGlobalKey",r)}ir(t,r){if(r){const o=function Qo(a,t){let r;if(t.document)r=Zh(a.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const o=Ie.fromSegments(t.noDocument.path),u=Yc(t.noDocument.readTime);r=dr.newNoDocument(o,u),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return bt();{const o=Ie.fromSegments(t.unknownDocument.path),u=Yc(t.unknownDocument.version);r=dr.newUnknownDocument(o,u)}}return t.readTime&&r.setReadTime(function(u){const d=new nn(u[0],u[1]);return rn.fromTimestamp(d)}(t.readTime)),r}(this.serializer,r);if(!o.isNoDocument()||!o.version.isEqual(rn.min()))return o}return dr.newInvalidDocument(t)}}function Uu(a){return new cf(a)}class uf extends Rd{constructor(t,r){super(),this.cr=t,this.trackRemovals=r,this.lr=new Ss(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(t){const r=[];let o=0,u=new Dr((d,m)=>Wt(d.canonicalString(),m.canonicalString()));return this.changes.forEach((d,m)=>{const D=this.lr.get(d);if(r.push(this.cr.removeEntry(t,d,D.readTime)),m.isValidDocument()){const N=xu(this.cr.serializer,m);u=u.add(d.path.popLast());const j=Sd(N);o+=j-D.size,r.push(this.cr.addEntry(t,d,N))}else if(o-=D.size,this.trackRemovals){const N=xu(this.cr.serializer,m.convertToNoDocument(rn.min()));r.push(this.cr.addEntry(t,d,N))}}),u.forEach(d=>{r.push(this.cr.indexManager.addToCollectionParentIndex(t,d))}),r.push(this.cr.updateMetadata(t,o)),Ne.waitFor(r)}getFromCache(t,r){return this.cr.sr(t,r).next(o=>(this.lr.set(r,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(t,r){return this.cr.ar(t,r).next(({documents:o,ur:u})=>(u.forEach((d,m)=>{this.lr.set(d,{size:m,readTime:o.get(d).readTime})}),o))}}function kl(a){return Cr(a,"remoteDocumentGlobal")}function Oc(a){return Cr(a,"remoteDocumentsV14")}function Es(a){const t=a.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cc(a,t){const r=t.documentKey.path.toArray();return[a,ku(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Mi(a,t){const r=a.path.toArray(),o=t.path.toArray();let u=0;for(let d=0;d<r.length-2&&d<o.length-2;++d)if(u=Wt(r[d],o[d]),u)return u;return u=Wt(r.length,o.length),u||(u=Wt(r[r.length-2],o[o.length-2]),u||Wt(r[r.length-1],o[o.length-1]))}class Qp{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}class lf{constructor(t,r,o,u){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=o,this.indexManager=u}getDocument(t,r){let o=null;return this.documentOverlayCache.getOverlay(t,r).next(u=>(o=u,this.remoteDocumentCache.getEntry(t,r))).next(u=>(null!==o&&bi(o.mutation,u,Wr.empty(),nn.now()),u))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.getLocalViewOfDocuments(t,o,wn()).next(()=>o))}getLocalViewOfDocuments(t,r,o=wn()){const u=hr();return this.populateOverlays(t,u,r).next(()=>this.computeViews(t,r,u,o).next(d=>{let m=Fn();return d.forEach((D,N)=>{m=m.insert(D,N.overlayedDocument)}),m}))}getOverlayedDocuments(t,r){const o=hr();return this.populateOverlays(t,o,r).next(()=>this.computeViews(t,r,o,wn()))}populateOverlays(t,r,o){const u=[];return o.forEach(d=>{r.has(d)||u.push(d)}),this.documentOverlayCache.getOverlays(t,u).next(d=>{d.forEach((m,D)=>{r.set(m,D)})})}computeViews(t,r,o,u){let d=ki();const m=ss(),D=ss();return r.forEach((N,j)=>{const ie=o.get(j.key);u.has(j.key)&&(void 0===ie||ie.mutation instanceof gr)?d=d.insert(j.key,j):void 0!==ie?(m.set(j.key,ie.mutation.getFieldMask()),bi(ie.mutation,j,ie.mutation.getFieldMask(),nn.now())):m.set(j.key,Wr.empty())}),this.recalculateAndSaveOverlays(t,d).next(N=>(N.forEach((j,ie)=>m.set(j,ie)),r.forEach((j,ie)=>{var fe;return D.set(j,new Qp(ie,null!==(fe=m.get(j))&&void 0!==fe?fe:null))}),D))}recalculateAndSaveOverlays(t,r){const o=ss();let u=new Nr((m,D)=>m-D),d=wn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(m=>{for(const D of m)D.keys().forEach(N=>{const j=r.get(N);if(null===j)return;let ie=o.get(N)||Wr.empty();ie=D.applyToLocalView(j,ie),o.set(N,ie);const fe=(u.get(D.batchId)||wn()).add(N);u=u.insert(D.batchId,fe)})}).next(()=>{const m=[],D=u.getReverseIterator();for(;D.hasNext();){const N=D.getNext(),j=N.key,ie=N.value,fe=Ai();ie.forEach(Me=>{if(!d.has(Me)){const ct=yi(r.get(Me),o.get(Me));null!==ct&&fe.set(Me,ct),d=d.add(Me)}}),m.push(this.documentOverlayCache.saveOverlays(t,j,fe))}return Ne.waitFor(m)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(o=>this.recalculateAndSaveOverlays(t,o))}getDocumentsMatchingQuery(t,r,o,u){return Ie.isDocumentKey((m=r).path)&&null===m.collectionGroup&&0===m.filters.length?this.getDocumentsMatchingDocumentQuery(t,r.path):Zn(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,o,u):this.getDocumentsMatchingCollectionQuery(t,r,o,u);var m}getNextDocuments(t,r,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,o,u).next(d=>{const m=u-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,o.largestBatchId,u-d.size):Ne.resolve(hr());let D=-1,N=d;return m.next(j=>Ne.forEach(j,(ie,fe)=>(D<fe.largestBatchId&&(D=fe.largestBatchId),d.get(ie)?Ne.resolve():this.remoteDocumentCache.getEntry(t,ie).next(Me=>{N=N.insert(ie,Me)}))).next(()=>this.populateOverlays(t,j,d)).next(()=>this.computeViews(t,N,j,wn())).next(ie=>({batchId:D,changes:Hn(ie)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new Ie(r)).next(o=>{let u=Fn();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(t,r,o,u){const d=r.collectionGroup;let m=Fn();return this.indexManager.getCollectionParents(t,d).next(D=>Ne.forEach(D,N=>{const j=(fe=r,Me=N.child(d),new Zt(Me,null,fe.explicitOrderBy.slice(),fe.filters.slice(),fe.limit,fe.limitType,fe.startAt,fe.endAt));var fe,Me;return this.getDocumentsMatchingCollectionQuery(t,j,o,u).next(ie=>{ie.forEach((fe,Me)=>{m=m.insert(fe,Me)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(t,r,o,u){let d;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,o.largestBatchId).next(m=>(d=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,o,d,u))).next(m=>{d.forEach((N,j)=>{const ie=j.getKey();null===m.get(ie)&&(m=m.insert(ie,dr.newInvalidDocument(ie)))});let D=Fn();return m.forEach((N,j)=>{const ie=d.get(N);void 0!==ie&&bi(ie.mutation,j,Wr.empty(),nn.now()),co(r,j)&&(D=D.insert(N,j))}),D})}}class Xp{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,r){return Ne.resolve(this.hr.get(r))}saveBundleMetadata(t,r){return this.hr.set(r.id,{id:(u=r).id,version:u.version,createTime:Fi(u.createTime)}),Ne.resolve();var u}getNamedQuery(t,r){return Ne.resolve(this.Pr.get(r))}saveNamedQuery(t,r){return this.Pr.set(r.name,{name:(u=r).name,query:Qs(u.bundledQuery),readTime:Fi(u.readTime)}),Ne.resolve();var u}}class Yp{constructor(){this.overlays=new Nr(Ie.comparator),this.Ir=new Map}getOverlay(t,r){return Ne.resolve(this.overlays.get(r))}getOverlays(t,r){const o=hr();return Ne.forEach(r,u=>this.getOverlay(t,u).next(d=>{null!==d&&o.set(u,d)})).next(()=>o)}saveOverlays(t,r,o){return o.forEach((u,d)=>{this.ht(t,r,d)}),Ne.resolve()}removeOverlaysForBatchId(t,r,o){const u=this.Ir.get(o);return void 0!==u&&(u.forEach(d=>this.overlays=this.overlays.remove(d)),this.Ir.delete(o)),Ne.resolve()}getOverlaysForCollection(t,r,o){const u=hr(),d=r.length+1,m=new Ie(r.child("")),D=this.overlays.getIteratorFrom(m);for(;D.hasNext();){const N=D.getNext().value,j=N.getKey();if(!r.isPrefixOf(j.path))break;j.path.length===d&&N.largestBatchId>o&&u.set(N.getKey(),N)}return Ne.resolve(u)}getOverlaysForCollectionGroup(t,r,o,u){let d=new Nr((j,ie)=>j-ie);const m=this.overlays.getIterator();for(;m.hasNext();){const j=m.getNext().value;if(j.getKey().getCollectionGroup()===r&&j.largestBatchId>o){let ie=d.get(j.largestBatchId);null===ie&&(ie=hr(),d=d.insert(j.largestBatchId,ie)),ie.set(j.getKey(),j)}}const D=hr(),N=d.getIterator();for(;N.hasNext()&&(N.getNext().value.forEach((j,ie)=>D.set(j,ie)),!(D.size()>=u)););return Ne.resolve(D)}ht(t,r,o){const u=this.overlays.get(o.key);if(null!==u){const m=this.Ir.get(u.largestBatchId).delete(o.key);this.Ir.set(u.largestBatchId,m)}this.overlays=this.overlays.insert(o.key,new sr(r,o));let d=this.Ir.get(r);void 0===d&&(d=wn(),this.Ir.set(r,d)),this.Ir.set(r,d.add(o.key))}}class df{constructor(){this.sessionToken=Ur.EMPTY_BYTE_STRING}getSessionToken(t){return Ne.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Ne.resolve()}}class nu{constructor(){this.Tr=new Dr(Ji.Er),this.dr=new Dr(Ji.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,r){const o=new Ji(t,r);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(t,r){t.forEach(o=>this.addReference(o,r))}removeReference(t,r){this.Vr(new Ji(t,r))}mr(t,r){t.forEach(o=>this.removeReference(o,r))}gr(t){const r=new Ie(new Nn([])),o=new Ji(r,t),u=new Ji(r,t+1),d=[];return this.dr.forEachInRange([o,u],m=>{this.Vr(m),d.push(m.key)}),d}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const r=new Ie(new Nn([])),o=new Ji(r,t),u=new Ji(r,t+1);let d=wn();return this.dr.forEachInRange([o,u],m=>{d=d.add(m.key)}),d}containsKey(t){const r=new Ji(t,0),o=this.Tr.firstAfterOrEqual(r);return null!==o&&t.isEqual(o.key)}}class Ji{constructor(t,r){this.key=t,this.wr=r}static Er(t,r){return Ie.comparator(t.key,r.key)||Wt(t.wr,r.wr)}static Ar(t,r){return Wt(t.wr,r.wr)||Ie.comparator(t.key,r.key)}}class ba{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new Dr(Ji.Er)}checkEmpty(t){return Ne.resolve(0===this.mutationQueue.length)}addMutationBatch(t,r,o,u){const d=this.Sr;this.Sr++;const m=new Br(d,r,o,u);this.mutationQueue.push(m);for(const D of u)this.br=this.br.add(new Ji(D.key,d)),this.indexManager.addToCollectionParentIndex(t,D.key.path.popLast());return Ne.resolve(m)}lookupMutationBatch(t,r){return Ne.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(t,r){const u=this.vr(r+1),d=u<0?0:u;return Ne.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const o=new Ji(r,0),u=new Ji(r,Number.POSITIVE_INFINITY),d=[];return this.br.forEachInRange([o,u],m=>{const D=this.Dr(m.wr);d.push(D)}),Ne.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(t,r){let o=new Dr(Wt);return r.forEach(u=>{const d=new Ji(u,0),m=new Ji(u,Number.POSITIVE_INFINITY);this.br.forEachInRange([d,m],D=>{o=o.add(D.wr)})}),Ne.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(t,r){const o=r.path,u=o.length+1;let d=o;Ie.isDocumentKey(d)||(d=d.child(""));const m=new Ji(new Ie(d),0);let D=new Dr(Wt);return this.br.forEachWhile(N=>{const j=N.key.path;return!!o.isPrefixOf(j)&&(j.length===u&&(D=D.add(N.wr)),!0)},m),Ne.resolve(this.Cr(D))}Cr(t){const r=[];return t.forEach(o=>{const u=this.Dr(o);null!==u&&r.push(u)}),r}removeMutationBatch(t,r){pt(0===this.Fr(r.batchId,"removed")),this.mutationQueue.shift();let o=this.br;return Ne.forEach(r.mutations,u=>{const d=new Ji(u.key,r.batchId);return o=o.delete(d),this.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(()=>{this.br=o})}On(t){}containsKey(t,r){const o=new Ji(r,0),u=this.br.firstAfterOrEqual(o);return Ne.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(t){return Ne.resolve()}Fr(t,r){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){const r=this.vr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Od{constructor(t){this.Mr=t,this.docs=new Nr(Ie.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const o=r.key,u=this.docs.get(o),d=u?u.size:0,m=this.Mr(r);return this.docs=this.docs.insert(o,{document:r.mutableCopy(),size:m}),this.size+=m-d,this.indexManager.addToCollectionParentIndex(t,o.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const o=this.docs.get(r);return Ne.resolve(o?o.document.mutableCopy():dr.newInvalidDocument(r))}getEntries(t,r){let o=ki();return r.forEach(u=>{const d=this.docs.get(u);o=o.insert(u,d?d.document.mutableCopy():dr.newInvalidDocument(u))}),Ne.resolve(o)}getDocumentsMatchingQuery(t,r,o,u){let d=ki();const m=r.path,D=new Ie(m.child("")),N=this.docs.getIteratorFrom(D);for(;N.hasNext();){const{key:j,value:{document:ie}}=N.getNext();if(!m.isPrefixOf(j.path))break;j.path.length>m.length+1||yn(gt(ie),o)<=0||(u.has(ie.key)||co(r,ie))&&(d=d.insert(ie.key,ie.mutableCopy()))}return Ne.resolve(d)}getAllFromCollectionGroup(t,r,o,u){bt()}Or(t,r){return Ne.forEach(this.docs,o=>r(o))}newChangeBuffer(t){return new Fl(this)}getSize(t){return Ne.resolve(this.size)}}class Fl extends Rd{constructor(t){super(),this.cr=t}applyChanges(t){const r=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?r.push(this.cr.addEntry(t,u)):this.cr.removeEntry(o)}),Ne.waitFor(r)}getFromCache(t,r){return this.cr.getEntry(t,r)}getAllFromCache(t,r){return this.cr.getEntries(t,r)}}class Bu{constructor(t){this.persistence=t,this.Nr=new Ss(r=>de(r),be),this.lastRemoteSnapshotVersion=rn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new nu,this.targetCount=0,this.kr=Xs.Bn()}forEachTarget(t,r){return this.Nr.forEach((o,u)=>r(u)),Ne.resolve()}getLastRemoteSnapshotVersion(t){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ne.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(t,r,o){return o&&(this.lastRemoteSnapshotVersion=o),r>this.Lr&&(this.Lr=r),Ne.resolve()}Kn(t){this.Nr.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.kr=new Xs(r),this.highestTargetId=r),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,r){return this.Kn(r),this.targetCount+=1,Ne.resolve()}updateTargetData(t,r){return this.Kn(r),Ne.resolve()}removeTargetData(t,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(t,r,o){let u=0;const d=[];return this.Nr.forEach((m,D)=>{D.sequenceNumber<=r&&null===o.get(D.targetId)&&(this.Nr.delete(m),d.push(this.removeMatchingKeysForTargetId(t,D.targetId)),u++)}),Ne.waitFor(d).next(()=>u)}getTargetCount(t){return Ne.resolve(this.targetCount)}getTargetData(t,r){const o=this.Nr.get(r)||null;return Ne.resolve(o)}addMatchingKeys(t,r,o){return this.Br.Rr(r,o),Ne.resolve()}removeMatchingKeys(t,r,o){this.Br.mr(r,o);const u=this.persistence.referenceDelegate,d=[];return u&&r.forEach(m=>{d.push(u.markPotentiallyOrphaned(t,m))}),Ne.waitFor(d)}removeMatchingKeysForTargetId(t,r){return this.Br.gr(r),Ne.resolve()}getMatchingKeysForTargetId(t,r){const o=this.Br.yr(r);return Ne.resolve(o)}containsKey(t,r){return Ne.resolve(this.Br.containsKey(r))}}class Nc{constructor(t,r){this.qr={},this.overlays={},this.Qr=new se(0),this.Kr=!1,this.Kr=!0,this.$r=new df,this.referenceDelegate=t(this),this.Ur=new Bu(this),this.indexManager=new Kp,this.remoteDocumentCache=new Od(o=>this.referenceDelegate.Wr(o)),this.serializer=new qs(r),this.Gr=new Xp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Yp,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let o=this.qr[t.toKey()];return o||(o=new ba(r,this.referenceDelegate),this.qr[t.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,r,o){at("MemoryPersistence","Starting transaction:",t);const u=new ju(this.Qr.next());return this.referenceDelegate.zr(),o(u).next(d=>this.referenceDelegate.jr(u).next(()=>d)).toPromise().then(d=>(u.raiseOnCommittedEvent(),d))}Hr(t,r){return Ne.or(Object.values(this.qr).map(o=>()=>o.containsKey(t,r)))}}class ju extends Jn{constructor(t){super(),this.currentSequenceNumber=t}}class $u{constructor(t){this.persistence=t,this.Jr=new nu,this.Yr=null}static Zr(t){return new $u(t)}get Xr(){if(this.Yr)return this.Yr;throw bt()}addReference(t,r,o){return this.Jr.addReference(o,r),this.Xr.delete(o.toString()),Ne.resolve()}removeReference(t,r,o){return this.Jr.removeReference(o,r),this.Xr.add(o.toString()),Ne.resolve()}markPotentiallyOrphaned(t,r){return this.Xr.add(r.toString()),Ne.resolve()}removeTarget(t,r){this.Jr.gr(r.targetId).forEach(u=>this.Xr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(t,r.targetId).next(u=>{u.forEach(d=>this.Xr.add(d.toString()))}).next(()=>o.removeTargetData(t,r))}zr(){this.Yr=new Set}jr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.Xr,o=>{const u=Ie.fromPath(o);return this.ei(t,u).next(d=>{d||r.removeEntry(u,rn.min())})}).next(()=>(this.Yr=null,r.apply(t)))}updateLimboDocument(t,r){return this.ei(t,r).next(o=>{o?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(t){return 0}ei(t,r){return Ne.or([()=>Ne.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Hr(t,r)])}}class Nd{constructor(t){this.serializer=t}O(t,r,o,u){const d=new kr("createOrUpgrade",r);var N;o<1&&u>=1&&(t.createObjectStore("owner"),(N=t).createObjectStore("mutationQueues",{keyPath:"userId"}),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Cn,{unique:!0}),N.createObjectStore("documentMutations"),uc(t),function(N){N.createObjectStore("remoteDocuments")}(t));let m=Ne.resolve();return o<3&&u>=3&&(0!==o&&(function(N){N.deleteObjectStore("targetDocuments"),N.deleteObjectStore("targets"),N.deleteObjectStore("targetGlobal")}(t),uc(t)),m=m.next(()=>function(N){const j=N.store("targetGlobal"),ie={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rn.min().toTimestamp(),targetCount:0};return j.put("targetGlobalKey",ie)}(d))),o<4&&u>=4&&(0!==o&&(m=m.next(()=>function(N,j){return j.store("mutations").U().next(ie=>{N.deleteObjectStore("mutations"),N.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Cn,{unique:!0});const fe=j.store("mutations"),Me=ie.map(ct=>fe.put(ct));return Ne.waitFor(Me)})}(t,d))),m=m.next(()=>{!function(N){N.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),o<5&&u>=5&&(m=m.next(()=>this.ni(d))),o<6&&u>=6&&(m=m.next(()=>(function(N){N.createObjectStore("remoteDocumentGlobal")}(t),this.ri(d)))),o<7&&u>=7&&(m=m.next(()=>this.ii(d))),o<8&&u>=8&&(m=m.next(()=>this.si(t,d))),o<9&&u>=9&&(m=m.next(()=>{!function(N){N.objectStoreNames.contains("remoteDocumentChanges")&&N.deleteObjectStore("remoteDocumentChanges")}(t)})),o<10&&u>=10&&(m=m.next(()=>this.oi(d))),o<11&&u>=11&&(m=m.next(()=>{(function(N){N.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(N){N.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),o<12&&u>=12&&(m=m.next(()=>{!function(N){const j=N.createObjectStore("documentOverlays",{keyPath:$n});j.createIndex("collectionPathOverlayIndex",lr,{unique:!1}),j.createIndex("collectionGroupOverlayIndex",jo,{unique:!1})}(t)})),o<13&&u>=13&&(m=m.next(()=>function(N){const j=N.createObjectStore("remoteDocumentsV14",{keyPath:ci});j.createIndex("documentKeyIndex",cs),j.createIndex("collectionGroupIndex",Hi)}(t)).next(()=>this._i(t,d)).next(()=>t.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(m=m.next(()=>this.ai(t,d))),o<15&&u>=15&&(m=m.next(()=>function(N){N.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),N.createObjectStore("indexState",{keyPath:_r}).createIndex("sequenceNumberIndex",Yr,{unique:!1}),N.createObjectStore("indexEntries",{keyPath:ni}).createIndex("documentKeyIndex",Jr,{unique:!1})}(t))),o<16&&u>=16&&(m=m.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),o<17&&u>=17&&(m=m.next(()=>{!function(N){N.createObjectStore("globals",{keyPath:"name"})}(t)})),m}ri(t){let r=0;return t.store("remoteDocuments").J((o,u)=>{r+=Sd(u)}).next(()=>{const o={byteSize:r};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}ni(t){const r=t.store("mutationQueues"),o=t.store("mutations");return r.U().next(u=>Ne.forEach(u,d=>{const m=IDBKeyRange.bound([d.userId,-1],[d.userId,d.lastAcknowledgedBatchId]);return o.U("userMutationsIndex",m).next(D=>Ne.forEach(D,N=>{pt(N.userId===d.userId);const j=Mr(this.serializer,N);return bd(t,d.userId,j).next(()=>{})}))}))}ii(t){const r=t.store("targetDocuments"),o=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(u=>{const d=[];return o.J((m,D)=>{const N=new Nn(m),j=[0,Ze(N)];d.push(r.get(j).next(ie=>ie?Ne.resolve():r.put({targetId:0,path:Ze(N),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Ne.waitFor(d))})}si(t,r){t.createObjectStore("collectionParents",{keyPath:cr});const o=r.store("collectionParents"),u=new Ft,d=m=>{if(u.add(m)){const D=m.lastSegment(),N=m.popLast();return o.put({collectionId:D,parent:Ze(N)})}};return r.store("remoteDocuments").J({H:!0},(m,D)=>{const N=new Nn(m);return d(N.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([m,D,N],j)=>{const ie=xn(D);return d(ie.popLast())}))}oi(t){const r=t.store("targets");return r.J((o,u)=>{const d=Ba(u),m=Jc(this.serializer,d);return r.put(m)})}_i(t,r){const o=r.store("remoteDocuments"),u=[];return o.J((d,m)=>{const D=r.store("remoteDocumentsV14"),N=(fe=m,fe.document?new Ie(Nn.fromString(fe.document.name).popFirst(5)):fe.noDocument?Ie.fromSegments(fe.noDocument.path):fe.unknownDocument?Ie.fromSegments(fe.unknownDocument.path):bt()).path.toArray(),j={prefixPath:N.slice(0,N.length-2),collectionGroup:N[N.length-2],documentId:N[N.length-1],readTime:m.readTime||[0,0],unknownDocument:m.unknownDocument,noDocument:m.noDocument,document:m.document,hasCommittedMutations:!!m.hasCommittedMutations};var fe;u.push(D.put(j))}).next(()=>Ne.waitFor(u))}ai(t,r){const o=r.store("mutations"),u=Uu(this.serializer),d=new Nc($u.Zr,this.serializer.ct);return o.U().next(m=>{const D=new Map;return m.forEach(N=>{var j;let ie=null!==(j=D.get(N.userId))&&void 0!==j?j:wn();Mr(this.serializer,N).keys().forEach(fe=>ie=ie.add(fe)),D.set(N.userId,ie)}),Ne.forEach(D,(N,j)=>{const ie=new on(j),fe=Dl.lt(this.serializer,ie),Me=d.getIndexManager(ie),ct=eu.lt(ie,this.serializer,Me,d.referenceDelegate);return new lf(u,ct,fe,Me).recalculateAndSaveOverlaysForDocumentKeys(new no(r,se.oe),N).next()})})}}function uc(a){a.createObjectStore("targetDocuments",{keyPath:Pr}).createIndex("documentTargetsIndex",ui,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ir,{unique:!0}),a.createObjectStore("targetGlobal")}const Sa="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ll{constructor(t,r,o,u,d,m,D,N,j,ie,fe=17){if(this.allowTabSynchronization=t,this.persistenceKey=r,this.clientId=o,this.ui=d,this.window=m,this.document=D,this.ci=j,this.li=ie,this.hi=fe,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=Me=>Promise.resolve(),!Ll.D())throw new Ot(Xe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new af(this,u),this.Ai=r+"main",this.serializer=new qs(N),this.Ri=new ai(this.Ai,this.hi,new Nd(this.serializer)),this.$r=new tf,this.Ur=new qp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Uu(this.serializer),this.Gr=new Xo,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===ie&&In("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ot(Xe.FAILED_PRECONDITION,Sa);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new se(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){var r=this;return this.di=function(){var o=(0,te.A)(function*(u){if(r.started)return t(u)});return function(u){return o.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(function(){var r=(0,te.A)(function*(o){null===o.newVersion&&(yield t())});return function(o){return r.apply(this,arguments)}}())}setNetworkEnabled(t){var r=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget((0,te.A)(function*(){r.started&&(yield r.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Ul(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(r=>{r||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(r=>this.isPrimary&&!r?this.bi(t).next(()=>!1):!!r&&this.Di(t).next(()=>!0))).catch(t=>{if(rs(t))return at("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return at("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return lc(t).get("owner").next(r=>Ne.resolve(this.vi(r)))}Ci(t){return Ul(t).delete(this.clientId)}Fi(){var t=this;return(0,te.A)(function*(){if(t.isPrimary&&!t.Mi(t.Ei,18e5)){t.Ei=Date.now();const r=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Cr(o,"clientMetadata");return u.U().next(d=>{const m=t.xi(d,18e5),D=d.filter(N=>-1===m.indexOf(N));return Ne.forEach(D,N=>u.delete(N.clientId)).next(()=>D)})}).catch(()=>[]);if(t.Vi)for(const o of r)t.Vi.removeItem(t.Oi(o.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?Ne.resolve(!0):lc(t).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)){if(this.vi(r)&&this.networkEnabled)return!0;if(!this.vi(r)){if(!r.allowTabSynchronization)throw new Ot(Xe.FAILED_PRECONDITION,Sa);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ul(t).U().next(o=>void 0===this.xi(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(r=>(this.isPrimary!==r&&at("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var t=this;return(0,te.A)(function*(){t.Kr=!1,t.Li(),t.Ti&&(t.Ti.cancel(),t.Ti=null),t.Bi(),t.ki(),yield t.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const o=new no(r,se.oe);return t.bi(o).next(()=>t.Ci(o))}),t.Ri.close(),t.qi()})()}xi(t,r){return t.filter(o=>this.Mi(o.updateTimeMs,r)&&!this.Ni(o.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>Ul(t).U().next(r=>this.xi(r,18e5).map(o=>o.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,r){return eu.lt(t,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new Ol(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return Dl.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,r,o){at("IndexedDbPersistence","Starting transaction:",t);const u="readonly"===r?"readonly":"readwrite",d=17===(N=this.hi)?yo:16===N?ar:15===N?to:14===N?Ia:13===N?da:12===N?ea:11===N?Qi:void bt();var N;let m;return this.Ri.runTransaction(t,u,d,D=>(m=new no(D,this.Qr?this.Qr.next():se.oe),"readwrite-primary"===r?this.wi(m).next(N=>!!N||this.Si(m)).next(N=>{if(!N)throw In(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Ot(Xe.FAILED_PRECONDITION,Wn);return o(m)}).next(N=>this.Di(m).next(()=>N)):this.Ki(m).next(()=>o(m)))).then(D=>(m.raiseOnCommittedEvent(),D))}Ki(t){return lc(t).get("owner").next(r=>{if(null!==r&&this.Mi(r.leaseTimestampMs,5e3)&&!this.Ni(r.ownerId)&&!this.vi(r)&&!(this.li||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Ot(Xe.FAILED_PRECONDITION,Sa)})}Di(t){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lc(t).put("owner",r)}static D(){return ai.D()}bi(t){const r=lc(t);return r.get("owner").next(o=>this.vi(o)?(at("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):Ne.resolve())}Mi(t,r){const o=Date.now();return!(t<o-r||t>o&&(In(`Detected an update time that is in the future: ${t} > ${o}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Pi=()=>{this.Li();const r=/(?:Version|Mobile)\/1[456]/;(0,le.nr)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var r;try{const o=null!==(null===(r=this.Vi)||void 0===r?void 0:r.getItem(this.Oi(t)));return at("IndexedDbPersistence",`Client '${t}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return In("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){In("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function lc(a){return Cr(a,"owner")}function Ul(a){return Cr(a,"clientMetadata")}function xd(a,t){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+t+"/"+r+"/"}class kd{constructor(t,r,o,u){this.targetId=t,this.fromCache=r,this.$i=o,this.Ui=u}static Wi(t,r){let o=wn(),u=wn();for(const d of r.docChanges)switch(d.type){case 0:o=o.add(d.doc.key);break;case 1:u=u.add(d.doc.key)}return new kd(t,r.fromCache,o,u)}}class I_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class Jp{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,le.nr)()?8:_o((0,le.ZQ)())>0?6:4}initialize(t,r){this.Ji=t,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(t,r,o,u){const d={result:null};return this.Yi(t,r).next(m=>{d.result=m}).next(()=>{if(!d.result)return this.Zi(t,r,u,o).next(m=>{d.result=m})}).next(()=>{if(d.result)return;const m=new I_;return this.Xi(t,r,m).next(D=>{if(d.result=D,this.zi)return this.es(t,r,m,D.size)})}).next(()=>d.result)}es(t,r,o,u){return o.documentReadCount<this.ji?(An()<=st.$b.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",_i(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ne.resolve()):(An()<=st.$b.DEBUG&&at("QueryEngine","Query:",_i(r),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Hi*u?(An()<=st.$b.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",_i(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,wr(r))):Ne.resolve())}Yi(t,r){if(_n(r))return Ne.resolve(null);let o=wr(r);return this.indexManager.getIndexType(t,o).next(u=>0===u?null:(null!==r.limit&&1===u&&(r=bs(r,null,"F"),o=wr(r)),this.indexManager.getDocumentsMatchingTarget(t,o).next(d=>{const m=wn(...d);return this.Ji.getDocuments(t,m).next(D=>this.indexManager.getMinOffset(t,o).next(N=>{const j=this.ts(r,D);return this.ns(r,j,m,N.readTime)?this.Yi(t,bs(r,null,"F")):this.rs(t,j,r,N)}))})))}Zi(t,r,o,u){return _n(r)||u.isEqual(rn.min())?Ne.resolve(null):this.Ji.getDocuments(t,o).next(d=>{const m=this.ts(r,d);return this.ns(r,m,o,u)?Ne.resolve(null):(An()<=st.$b.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),_i(r)),this.rs(t,m,r,pe(u,-1)).next(D=>D))})}ts(t,r){let o=new Dr(Za(t));return r.forEach((u,d)=>{co(t,d)&&(o=o.add(d))}),o}ns(t,r,o,u){if(null===t.limit)return!1;if(o.size!==r.size)return!0;const d="F"===t.limitType?r.last():r.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(u)>0)}Xi(t,r,o){return An()<=st.$b.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",_i(r)),this.Ji.getDocumentsMatchingQuery(t,r,xt.min(),o)}rs(t,r,o,u){return this.Ji.getDocumentsMatchingQuery(t,o,u).next(d=>(r.forEach(m=>{d=d.insert(m.key,m)}),d))}}class Bl{constructor(t,r,o,u){this.persistence=t,this.ss=r,this.serializer=u,this.os=new Nr(Wt),this._s=new Ss(d=>de(d),be),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(o)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.os))}}function ru(a,t,r,o){return new Bl(a,t,r,o)}function Zp(a,t){return xc.apply(this,arguments)}function xc(){return(xc=(0,te.A)(function*(a,t){const r=Rt(a);return yield r.persistence.runTransaction("Handle user change","readonly",o=>{let u;return r.mutationQueue.getAllMutationBatches(o).next(d=>(u=d,r.ls(t),r.mutationQueue.getAllMutationBatches(o))).next(d=>{const m=[],D=[];let N=wn();for(const j of u){m.push(j.batchId);for(const ie of j.mutations)N=N.add(ie.key)}for(const j of d){D.push(j.batchId);for(const ie of j.mutations)N=N.add(ie.key)}return r.localDocuments.getDocuments(o,N).next(j=>({hs:j,removedBatchIds:m,addedBatchIds:D}))})})})).apply(this,arguments)}function h(a){const t=Rt(a);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Ur.getLastRemoteSnapshotVersion(r))}function T(a,t,r){let o=wn(),u=wn();return r.forEach(d=>o=o.add(d)),t.getEntries(a,o).next(d=>{let m=ki();return r.forEach((D,N)=>{const j=d.get(D);N.isFoundDocument()!==j.isFoundDocument()&&(u=u.add(D)),N.isNoDocument()&&N.version.isEqual(rn.min())?(t.removeEntry(D,N.readTime),m=m.insert(D,N)):!j.isValidDocument()||N.version.compareTo(j.version)>0||0===N.version.compareTo(j.version)&&j.hasPendingWrites?(t.addEntry(N),m=m.insert(D,N)):at("LocalStore","Ignoring outdated watch update for ",D,". Current version:",j.version," Watch version:",N.version)}),{Ps:m,Is:u}})}function W(a,t){const r=Rt(a);return r.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===t&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(o,t)))}function ae(a,t){const r=Rt(a);return r.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return r.Ur.getTargetData(o,t).next(d=>d?(u=d,Ne.resolve(u)):r.Ur.allocateTargetId(o).next(m=>(u=new Co(t,m,"TargetPurposeListen",o.currentSequenceNumber),r.Ur.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=r.os.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(r.os=r.os.insert(o.targetId,o),r._s.set(t,o.targetId)),o})}function ke(a,t,r){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,te.A)(function*(a,t,r){const o=Rt(a),u=o.os.get(t),d=r?"readwrite":"readwrite-primary";try{r||(yield o.persistence.runTransaction("Release target",d,m=>o.persistence.referenceDelegate.removeTarget(m,u)))}catch(m){if(!rs(m))throw m;at("LocalStore",`Failed to update sequence numbers for target ${t}: ${m}`)}o.os=o.os.remove(t),o._s.delete(u.target)})).apply(this,arguments)}function Gt(a,t,r){const o=Rt(a);let u=rn.min(),d=wn();return o.persistence.runTransaction("Execute query","readwrite",m=>function(N,j,ie){const fe=Rt(N),Me=fe._s.get(ie);return void 0!==Me?Ne.resolve(fe.os.get(Me)):fe.Ur.getTargetData(j,ie)}(o,m,wr(t)).next(D=>{if(D)return u=D.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(m,D.targetId).next(N=>{d=N})}).next(()=>o.ss.getDocumentsMatchingQuery(m,t,r?u:rn.min(),r?d:wn())).next(D=>(Ar(o,uo(t),D),{documents:D,Ts:d})))}function Sn(a,t){const r=Rt(a),o=Rt(r.Ur),u=r.os.get(t);return u?Promise.resolve(u.target):r.persistence.runTransaction("Get target data","readonly",d=>o.ot(d,t).next(m=>m?m.target:null))}function zn(a,t){const r=Rt(a),o=r.us.get(t)||rn.min();return r.persistence.runTransaction("Get new document changes","readonly",u=>r.cs.getAllFromCollectionGroup(u,t,pe(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Ar(r,t,u),u))}function Ar(a,t,r){let o=a.us.get(t)||rn.min();r.forEach((u,d)=>{d.readTime.compareTo(o)>0&&(o=d.readTime)}),a.us.set(t,o)}function Pa(){return(Pa=(0,te.A)(function*(a,t,r,o){const u=Rt(a);let d=wn(),m=ki();for(const j of r){const ie=t.Es(j.metadata.name);j.document&&(d=d.add(ie));const fe=t.ds(j);fe.setReadTime(t.As(j.metadata.readTime)),m=m.insert(ie,fe)}const D=u.cs.newChangeBuffer({trackRemovals:!0}),N=yield ae(u,(ie=o,wr(On(Nn.fromString(`__bundle__/docs/${ie}`)))));var ie;return u.persistence.runTransaction("Apply bundle documents","readwrite",j=>T(j,D,m).next(ie=>(D.apply(j),ie)).next(ie=>u.Ur.removeMatchingKeysForTargetId(j,N.targetId).next(()=>u.Ur.addMatchingKeys(j,d,N.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(j,ie.Ps,ie.Is)).next(()=>ie.Ps)))})).apply(this,arguments)}function Hu(a,t){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,te.A)(function*(a,t,r=wn()){const o=yield ae(a,wr(Qs(t.bundledQuery))),u=Rt(a);return u.persistence.runTransaction("Save named query","readwrite",d=>{const m=Fi(t.readTime);if(o.snapshotVersion.compareTo(m)>=0)return u.Gr.saveNamedQuery(d,t);const D=o.withResumeToken(Ur.EMPTY_BYTE_STRING,m);return u.os=u.os.insert(D.targetId,D),u.Ur.updateTargetData(d,D).next(()=>u.Ur.removeMatchingKeysForTargetId(d,o.targetId)).next(()=>u.Ur.addMatchingKeys(d,r,o.targetId)).next(()=>u.Gr.saveNamedQuery(d,t))})})).apply(this,arguments)}function zu(a,t){return`firestore_clients_${a}_${t}`}function jl(a,t,r){let o=`firestore_mutations_${a}_${r}`;return t.isAuthenticated()&&(o+=`_${t.uid}`),o}function $l(a,t){return`firestore_targets_${a}_${t}`}class Ga{constructor(t,r,o,u){this.user=t,this.batchId=r,this.state=o,this.error=u}static Rs(t,r,o){const u=JSON.parse(o);let d,m="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return m&&u.error&&(m="string"==typeof u.error.message&&"string"==typeof u.error.code,m&&(d=new Ot(u.error.code,u.error.message))),m?new Ga(t,r,u.state,d):(In("SharedClientState",`Failed to parse mutation state for ID '${r}': ${o}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class aa{constructor(t,r,o){this.targetId=t,this.state=r,this.error=o}static Rs(t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Ot(o.error.code,o.error.message))),d?new aa(t,o.state,u):(In("SharedClientState",`Failed to parse target state for ID '${t}': ${r}`),null)}Vs(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Wu{constructor(t,r){this.clientId=t,this.activeTargetIds=r}static Rs(t,r){const o=JSON.parse(r);let u="object"==typeof o&&o.activeTargetIds instanceof Array,d=Ta();for(let m=0;u&&m<o.activeTargetIds.length;++m)u=mt(o.activeTargetIds[m]),d=d.add(o.activeTargetIds[m]);return u?new Wu(t,d):(In("SharedClientState",`Failed to parse client data for instance '${t}': ${r}`),null)}}class iu{constructor(t,r){this.clientId=t,this.onlineState=r}static Rs(t){const r=JSON.parse(t);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new iu(r.clientId,r.onlineState):(In("SharedClientState",`Failed to parse online state: ${t}`),null)}}class Ku{constructor(){this.activeTargetIds=Ta()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class dc{constructor(t,r,o,u,d){this.window=t,this.ui=r,this.persistenceKey=o,this.ps=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Nr(Wt),this.started=!1,this.bs=[];const m=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=d,this.Ds=zu(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new Ku),this.Cs=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(N){return`firestore_bundle_loaded_v2_${N}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,te.A)(function*(){const r=yield t.syncEngine.Qi();for(const u of r){if(u===t.ps)continue;const d=t.getItem(zu(t.persistenceKey,u));if(d){const m=Wu.Rs(u,d);m&&(t.Ss=t.Ss.insert(m.clientId,m))}}t.Ns();const o=t.storage.getItem(t.xs);if(o){const u=t.Ls(o);u&&t.Bs(u)}for(const u of t.bs)t.ws(u);t.bs=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.vs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(t){let r=!1;return this.Ss.forEach((o,u)=>{u.activeTargetIds.has(t)&&(r=!0)}),r}addPendingMutation(t){this.qs(t,"pending")}updateMutationState(t,r,o){this.qs(t,r,o),this.Qs(t)}addLocalQueryTarget(t){let r="not-current";if(this.isActiveQueryTarget(t)){const o=this.storage.getItem($l(this.persistenceKey,t));if(o){const u=aa.Rs(t,o);u&&(r=u.state)}}return this.Ks.fs(t),this.Ns(),r}removeLocalQueryTarget(t){this.Ks.gs(t),this.Ns()}isLocalQueryTarget(t){return this.Ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem($l(this.persistenceKey,t))}updateQueryState(t,r,o){this.$s(t,r,o)}handleUserChange(t,r,o){r.forEach(u=>{this.Qs(u)}),this.currentUser=t,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(t){this.Us(t)}notifyBundleLoaded(t){this.Ws(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(t){const r=this.storage.getItem(t);return at("SharedClientState","READ",t,r),r}setItem(t,r){at("SharedClientState","SET",t,r),this.storage.setItem(t,r)}removeItem(t){at("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ws(t){var r=this;const o=t;if(o.storageArea===this.storage){if(at("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Ds)return void In("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,te.A)(function*(){if(r.started){if(null!==o.key)if(r.Cs.test(o.key)){if(null==o.newValue){const u=r.Gs(o.key);return r.zs(u,null)}{const u=r.js(o.key,o.newValue);if(u)return r.zs(u.clientId,u)}}else if(r.Fs.test(o.key)){if(null!==o.newValue){const u=r.Hs(o.key,o.newValue);if(u)return r.Js(u)}}else if(r.Ms.test(o.key)){if(null!==o.newValue){const u=r.Ys(o.key,o.newValue);if(u)return r.Zs(u)}}else if(o.key===r.xs){if(null!==o.newValue){const u=r.Ls(o.newValue);if(u)return r.Bs(u)}}else if(o.key===r.vs){const u=function(m){let D=se.oe;if(null!=m)try{const N=JSON.parse(m);pt("number"==typeof N),D=N}catch(N){In("SharedClientState","Failed to read sequence number from WebStorage",N)}return D}(o.newValue);u!==se.oe&&r.sequenceNumberHandler(u)}else if(o.key===r.Os){const u=r.Xs(o.newValue);yield Promise.all(u.map(d=>r.syncEngine.eo(d)))}}else r.bs.push(o)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(t,r,o){const u=new Ga(this.currentUser,t,r,o),d=jl(this.persistenceKey,this.currentUser,t);this.setItem(d,u.Vs())}Qs(t){const r=jl(this.persistenceKey,this.currentUser,t);this.removeItem(r)}Us(t){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:t}))}$s(t,r,o){const u=$l(this.persistenceKey,t),d=new aa(t,r,o);this.setItem(u,d.Vs())}Ws(t){const r=JSON.stringify(Array.from(t));this.setItem(this.Os,r)}Gs(t){const r=this.Cs.exec(t);return r?r[1]:null}js(t,r){const o=this.Gs(t);return Wu.Rs(o,r)}Hs(t,r){const o=this.Fs.exec(t),u=Number(o[1]);return Ga.Rs(new on(void 0!==o[2]?o[2]:null),u,r)}Ys(t,r){const o=this.Ms.exec(t),u=Number(o[1]);return aa.Rs(u,r)}Ls(t){return iu.Rs(t)}Xs(t){return JSON.parse(t)}Js(t){var r=this;return(0,te.A)(function*(){if(t.user.uid===r.currentUser.uid)return r.syncEngine.no(t.batchId,t.state,t.error);at("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Zs(t){return this.syncEngine.ro(t.targetId,t.state,t.error)}zs(t,r){const o=r?this.Ss.insert(t,r):this.Ss.remove(t),u=this.ks(this.Ss),d=this.ks(o),m=[],D=[];return d.forEach(N=>{u.has(N)||m.push(N)}),u.forEach(N=>{d.has(N)||D.push(N)}),this.syncEngine.io(m,D).then(()=>{this.Ss=o})}Bs(t){this.Ss.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ks(t){let r=Ta();return t.forEach((o,u)=>{r=r.unionWith(u.activeTargetIds)}),r}}class za{constructor(){this.so=new Ku,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,o){}addLocalQueryTarget(t){return this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,r,o){this.oo[t]=r}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Ku,Promise.resolve()}handleUserChange(t,r,o){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class xs{_o(t){}shutdown(){}}class C_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){at("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){at("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Fd=null;function Vd(){return null===Fd?Fd=268435456+Math.round(2147483648*Math.random()):Fd++,"0x"+Fd.toString(16)}const Jv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class w_{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}const Ys="WebChannelConnection";class Zv extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const o=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),d=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+r.host,this.vo=`projects/${u}/databases/${d}`,this.Co="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${d}`}get Fo(){return!1}Mo(r,o,u,d,m){const D=Vd(),N=this.xo(r,o.toUriEncodedString());at("RestConnection",`Sending RPC '${r}' ${D}:`,N,u);const j={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(j,d,m),this.No(r,N,j,u).then(ie=>(at("RestConnection",`Received RPC '${r}' ${D}: `,ie),ie),ie=>{throw Qn("RestConnection",`RPC '${r}' ${D} failed with error: `,ie,"url: ",N,"request:",u),ie})}Lo(r,o,u,d,m,D){return this.Mo(r,o,u,d,m)}Oo(r,o,u){r["X-Goog-Api-Client"]="gl-js/ fire/"+an,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((d,m)=>r[m]=d),u&&u.headers.forEach((d,m)=>r[m]=d)}xo(r,o){return`${this.Do}/v1/${o}:${Jv[r]}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,r,o,u){const d=Vd();return new Promise((m,D)=>{const N=new tn;N.setWithCredentials(!0),N.listenOnce(Qe.COMPLETE,()=>{try{switch(N.getLastErrorCode()){case lt.NO_ERROR:const ie=N.getResponseJson();at(Ys,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(ie)),m(ie);break;case lt.TIMEOUT:at(Ys,`RPC '${t}' ${d} timed out`),D(new Ot(Xe.DEADLINE_EXCEEDED,"Request time out"));break;case lt.HTTP_ERROR:const fe=N.getStatus();if(at(Ys,`RPC '${t}' ${d} failed with status:`,fe,"response text:",N.getResponseText()),fe>0){let Me=N.getResponseJson();Array.isArray(Me)&&(Me=Me[0]);const ct=Me?.error;if(ct&&ct.status&&ct.message){const jt=function(Xt){const Bn=Xt.toLowerCase().replace(/_/g,"-");return Object.values(Xe).indexOf(Bn)>=0?Bn:Xe.UNKNOWN}(ct.status);D(new Ot(jt,ct.message))}else D(new Ot(Xe.UNKNOWN,"Server responded with status "+N.getStatus()))}else D(new Ot(Xe.UNAVAILABLE,"Connection failed."));break;default:bt()}}finally{at(Ys,`RPC '${t}' ${d} completed.`)}});const j=JSON.stringify(u);at(Ys,`RPC '${t}' ${d} sending request:`,u),N.send(r,"POST",j,o,15)})}Bo(t,r,o){const u=Vd(),d=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=qt(),D=et(),N={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},j=this.longPollingOptions.timeoutSeconds;void 0!==j&&(N.longPollingTimeout=Math.round(1e3*j)),this.useFetchStreams&&(N.xmlHttpFactory=new Tn({})),this.Oo(N.initMessageHeaders,r,o),N.encodeInitMessageHeaders=!0;const ie=d.join("");at(Ys,`Creating RPC '${t}' stream ${u}: ${ie}`,N);const fe=m.createWebChannel(ie,N);let Me=!1,ct=!1;const jt=new w_({Io:Xt=>{ct?at(Ys,`Not sending because RPC '${t}' stream ${u} is closed:`,Xt):(Me||(at(Ys,`Opening RPC '${t}' stream ${u} transport.`),fe.open(),Me=!0),at(Ys,`RPC '${t}' stream ${u} sending:`,Xt),fe.send(Xt))},To:()=>fe.close()}),sn=(Xt,Bn,nr)=>{Xt.listen(Bn,Vn=>{try{nr(Vn)}catch(ur){setTimeout(()=>{throw ur},0)}})};return sn(fe,xe.EventType.OPEN,()=>{ct||(at(Ys,`RPC '${t}' stream ${u} transport opened.`),jt.yo())}),sn(fe,xe.EventType.CLOSE,()=>{ct||(ct=!0,at(Ys,`RPC '${t}' stream ${u} transport closed`),jt.So())}),sn(fe,xe.EventType.ERROR,Xt=>{ct||(ct=!0,Qn(Ys,`RPC '${t}' stream ${u} transport errored:`,Xt),jt.So(new Ot(Xe.UNAVAILABLE,"The operation could not be completed")))}),sn(fe,xe.EventType.MESSAGE,Xt=>{var Bn;if(!ct){const nr=Xt.data[0];pt(!!nr);const ur=nr.error||(null===(Bn=nr[0])||void 0===Bn?void 0:Bn.error);if(ur){at(Ys,`RPC '${t}' stream ${u} received error:`,ur);const Lr=ur.status;let br=function(ze){const it=fi[ze];if(void 0!==it)return tc(it)}(Lr),nt=ur.message;void 0===br&&(br=Xe.INTERNAL,nt="Unknown error status: "+Lr+" with message "+ur.message),ct=!0,jt.So(new Ot(br,nt)),fe.close()}else at(Ys,`RPC '${t}' stream ${u} received:`,nr),jt.bo(nr)}}),sn(D,Et.STAT_EVENT,Xt=>{Xt.stat===yt.PROXY?at(Ys,`RPC '${t}' stream ${u} detected buffering proxy`):Xt.stat===yt.NOPROXY&&at(Ys,`RPC '${t}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{jt.wo()},0),jt}}function eg(){return typeof window<"u"?window:null}function Hl(){return typeof document<"u"?document:null}function su(a){return new ho(a,!0)}class hf{constructor(t,r,o=1e3,u=1.5,d=6e4){this.ui=t,this.timerId=r,this.ko=o,this.qo=u,this.Qo=d,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const r=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),u=Math.max(0,r-o);u>0&&at("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,u,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class T_{constructor(t,r,o,u,d,m,D,N){this.ui=t,this.Ho=o,this.Jo=u,this.connection=d,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=D,this.listener=N,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hf(t,r)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var t=this;return(0,te.A)(function*(){t.n_()&&(yield t.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){var t=this;return(0,te.A)(function*(){if(t.r_())return t.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,r){var o=this;return(0,te.A)(function*(){o.u_(),o.c_(),o.t_.cancel(),o.Yo++,4!==t?o.t_.reset():r&&r.code===Xe.RESOURCE_EXHAUSTED?(In(r.toString()),In("Using maximum backoff delay to prevent overloading the backend."),o.t_.Wo()):r&&r.code===Xe.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.l_(),o.stream.close(),o.stream=null),o.state=t,yield o.listener.mo(r)})()}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Yo===r&&this.P_(o,u)},o=>{t(()=>{const u=new Ot(Xe.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(u)})})}P_(t,r){const o=this.h_(this.Yo);this.stream=this.T_(t,r),this.stream.Eo(()=>{o(()=>this.listener.Eo())}),this.stream.Ro(()=>{o(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(u=>{o(()=>this.I_(u))}),this.stream.onMessage(u=>{o(()=>1==++this.e_?this.E_(u):this.onNext(u))})}i_(){var t=this;this.state=5,this.t_.Go((0,te.A)(function*(){t.state=0,t.start()}))}I_(t){return at("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return r=>{this.ui.enqueueAndForget(()=>this.Yo===t?r():(at("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eE extends T_{constructor(t,r,o,u,d,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,o,u,m),this.serializer=d}T_(t,r){return this.connection.Bo("Listen",t,r)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const r=function Tl(a,t){let r;if("targetChange"in t){const o="NO_CHANGE"===(j=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===j?1:"REMOVE"===j?2:"CURRENT"===j?3:"RESET"===j?4:bt(),u=t.targetChange.targetIds||[],d=function(j,ie){return j.useProto3Json?(pt(void 0===ie||"string"==typeof ie),Ur.fromBase64String(ie||"")):(pt(void 0===ie||ie instanceof Buffer||ie instanceof Uint8Array),Ur.fromUint8Array(ie||new Uint8Array))}(a,t.targetChange.resumeToken),m=t.targetChange.cause,D=m&&function(j){const ie=void 0===j.code?Xe.UNKNOWN:tc(j.code);return new Ot(ie,j.message||"")}(m);r=new Aa(o,u,d,D||null)}else if("documentChange"in t){const o=t.documentChange,u=ga(a,o.document.name),d=Fi(o.document.updateTime),m=o.document.createTime?Fi(o.document.createTime):rn.min(),D=new Kr({mapValue:{fields:o.document.fields}}),N=dr.newFoundDocument(u,d,m,D);r=new Oo(o.targetIds||[],o.removedTargetIds||[],N.key,N)}else if("documentDelete"in t){const o=t.documentDelete,u=ga(a,o.document),d=o.readTime?Fi(o.readTime):rn.min(),m=dr.newNoDocument(u,d);r=new Oo([],o.removedTargetIds||[],m.key,m)}else if("documentRemove"in t){const o=t.documentRemove,u=ga(a,o.document);r=new Oo([],o.removedTargetIds||[],u,null)}else{if(!("filter"in t))return bt();{const o=t.filter,{count:u=0,unchangedNames:d}=o,m=new El(u,d);r=new Da(o.targetId,m)}}var j;return r}(this.serializer,t),o=function(d){if(!("targetChange"in d))return rn.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?rn.min():m.readTime?Fi(m.readTime):rn.min()}(t);return this.listener.d_(r,o)}A_(t){const r={};r.database=Ru(this.serializer),r.addTarget=function(d,m){let D;const N=m.target;if(D=Le(N)?{documents:M(d,N)}:{query:I(d,N)._t},D.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){D.resumeToken=Qc(d,m.resumeToken);const j=Va(d,m.expectedCount);null!==j&&(D.expectedCount=j)}else if(m.snapshotVersion.compareTo(rn.min())>0){D.readTime=ic(d,m.snapshotVersion.toTimestamp());const j=Va(d,m.expectedCount);null!==j&&(D.expectedCount=j)}return D}(this.serializer,t);const o=function ne(a,t){const r=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt()}}(t.purpose);return null==r?null:{"goog-listen-tags":r}}(0,t);o&&(r.labels=o),this.a_(r)}R_(t){const r={};r.database=Ru(this.serializer),r.removeTarget=t,this.a_(r)}}class tE extends T_{constructor(t,r,o,u,d,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,o,u,m),this.serializer=d}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,r){return this.connection.Bo("Write",t,r)}E_(t){return pt(!!t.streamToken),this.lastStreamToken=t.streamToken,pt(!t.writeResults||0===t.writeResults.length),this.listener.f_()}onNext(t){pt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const r=function v(a,t){return a&&a.length>0?(pt(void 0!==t),a.map(r=>function(u,d){let m=Fi(u.updateTime?u.updateTime:d);return m.isEqual(rn.min())&&(m=Fi(d)),new ei(m,u.transformResults||[])}(r,t))):[]}(t.writeResults,t.commitTime),o=Fi(t.commitTime);return this.listener.g_(o,r)}p_(){const t={};t.database=Ru(this.serializer),this.a_(t)}m_(t){const r={streamToken:this.lastStreamToken,writes:t.map(o=>Ou(this.serializer,o))};this.a_(r)}}class D_ extends class{}{constructor(t,r,o,u){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=o,this.serializer=u,this.y_=!1}w_(){if(this.y_)throw new Ot(Xe.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,r,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Mo(t,La(r,o),u,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ot(Xe.UNKNOWN,d.toString())})}Lo(t,r,o,u,d){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,D])=>this.connection.Lo(t,La(r,o),u,m,D,d)).catch(m=>{throw"FirebaseError"===m.name?(m.code===Xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Ot(Xe.UNKNOWN,m.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class nE{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const r=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(In(r),this.D_=!1):at("OnlineStateTracker",r)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class A_{constructor(t,r,o,u,d){var m=this;this.localStore=t,this.datastore=r,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=d,this.k_._o(D=>{o.enqueueAndForget((0,te.A)(function*(){var N;No(m)&&(at("RemoteStore","Restarting streams for network reachability change."),yield(N=(0,te.A)(function*(ie){const fe=Rt(ie);fe.L_.add(4),yield Ud(fe),fe.q_.set("Unknown"),fe.L_.delete(4),yield Ld(fe)}),function j(ie){return N.apply(this,arguments)})(m))}))}),this.q_=new nE(o,u)}}function Ld(a){return tg.apply(this,arguments)}function tg(){return(tg=(0,te.A)(function*(a){if(No(a))for(const t of a.B_)yield t(!0)})).apply(this,arguments)}function Ud(a){return ff.apply(this,arguments)}function ff(){return(ff=(0,te.A)(function*(a){for(const t of a.B_)yield t(!1)})).apply(this,arguments)}function Bd(a,t){const r=Rt(a);r.N_.has(t.targetId)||(r.N_.set(t.targetId,t),jd(r)?S_(r):Wl(r).r_()&&b_(r,t))}function mo(a,t){const r=Rt(a),o=Wl(r);r.N_.delete(t),o.r_()&&ng(r,t),0===r.N_.size&&(o.r_()?o.o_():No(r)&&r.q_.set("Unknown"))}function b_(a,t){if(a.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rn.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}Wl(a).A_(t)}function ng(a,t){a.Q_.xe(t),Wl(a).R_(t)}function S_(a){a.Q_=new Su({getRemoteKeysForTarget:t=>a.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>a.N_.get(t)||null,tt:()=>a.datastore.serializer.databaseId}),Wl(a).start(),a.q_.v_()}function jd(a){return No(a)&&!Wl(a).n_()&&a.N_.size>0}function No(a){return 0===Rt(a).L_.size}function rg(a){a.Q_=void 0}function Gl(a){return ig.apply(this,arguments)}function ig(){return(ig=(0,te.A)(function*(a){a.q_.set("Online")})).apply(this,arguments)}function rE(a){return pf.apply(this,arguments)}function pf(){return(pf=(0,te.A)(function*(a){a.N_.forEach((t,r)=>{b_(a,t)})})).apply(this,arguments)}function $C(a,t){return P_.apply(this,arguments)}function P_(){return(P_=(0,te.A)(function*(a,t){rg(a),jd(a)?(a.q_.M_(t),S_(a)):a.q_.set("Unknown")})).apply(this,arguments)}function HC(a,t,r){return M_.apply(this,arguments)}function M_(){return M_=(0,te.A)(function*(a,t,r){if(a.q_.set("Online"),t instanceof Aa&&2===t.state&&t.cause)try{yield(o=(0,te.A)(function*(d,m){const D=m.cause;for(const N of m.targetIds)d.N_.has(N)&&(yield d.remoteSyncer.rejectListen(N,D),d.N_.delete(N),d.Q_.removeTarget(N))}),function u(d,m){return o.apply(this,arguments)})(a,t)}catch(o){at("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),o),yield sg(a,o)}else if(t instanceof Oo?a.Q_.Ke(t):t instanceof Da?a.Q_.He(t):a.Q_.We(t),!r.isEqual(rn.min()))try{const o=yield h(a.localStore);r.compareTo(o)>=0&&(yield function(d,m){const D=d.Q_.rt(m);return D.targetChanges.forEach((N,j)=>{if(N.resumeToken.approximateByteSize()>0){const ie=d.N_.get(j);ie&&d.N_.set(j,ie.withResumeToken(N.resumeToken,m))}}),D.targetMismatches.forEach((N,j)=>{const ie=d.N_.get(N);if(!ie)return;d.N_.set(N,ie.withResumeToken(Ur.EMPTY_BYTE_STRING,ie.snapshotVersion)),ng(d,N);const fe=new Co(ie.target,N,j,ie.sequenceNumber);b_(d,fe)}),d.remoteSyncer.applyRemoteEvent(D)}(a,r))}catch(o){at("RemoteStore","Failed to raise snapshot:",o),yield sg(a,o)}var o}),M_.apply(this,arguments)}function sg(a,t,r){return og.apply(this,arguments)}function og(){return(og=(0,te.A)(function*(a,t,r){if(!rs(t))throw t;a.L_.add(1),yield Ud(a),a.q_.set("Offline"),r||(r=()=>h(a.localStore)),a.asyncQueue.enqueueRetryable((0,te.A)(function*(){at("RemoteStore","Retrying IndexedDB access"),yield r(),a.L_.delete(1),yield Ld(a)}))})).apply(this,arguments)}function qu(a,t){return t().catch(r=>sg(a,r,t))}function hc(a){return gf.apply(this,arguments)}function gf(){return(gf=(0,te.A)(function*(a){const t=Rt(a),r=ou(t);let o=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;iE(t);)try{const u=yield W(t.localStore,o);if(null===u){0===t.O_.length&&r.o_();break}o=u.batchId,ag(t,u)}catch(u){yield sg(t,u)}Wa(t)&&R_(t)})).apply(this,arguments)}function iE(a){return No(a)&&a.O_.length<10}function ag(a,t){a.O_.push(t);const r=ou(a);r.r_()&&r.V_&&r.m_(t.mutations)}function Wa(a){return No(a)&&!ou(a).n_()&&a.O_.length>0}function R_(a){ou(a).start()}function cg(a){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,te.A)(function*(a){ou(a).p_()})).apply(this,arguments)}function sE(a){return mf.apply(this,arguments)}function mf(){return(mf=(0,te.A)(function*(a){const t=ou(a);for(const r of a.O_)t.m_(r.mutations)})).apply(this,arguments)}function O_(a,t,r){return zl.apply(this,arguments)}function zl(){return(zl=(0,te.A)(function*(a,t,r){const o=a.O_.shift(),u=Io.from(o,t,r);yield qu(a,()=>a.remoteSyncer.applySuccessfulWrite(u)),yield hc(a)})).apply(this,arguments)}function _f(a,t){return $d.apply(this,arguments)}function $d(){return $d=(0,te.A)(function*(a,t){var r;t&&ou(a).V_&&(yield(r=(0,te.A)(function*(u,d){if(Dc(D=d.code)&&D!==Xe.ABORTED){const m=u.O_.shift();ou(u).s_(),yield qu(u,()=>u.remoteSyncer.rejectFailedWrite(m.batchId,d)),yield hc(u)}var D}),function o(u,d){return r.apply(this,arguments)})(a,t)),Wa(a)&&R_(a)}),$d.apply(this,arguments)}function N_(a,t){return ug.apply(this,arguments)}function ug(){return(ug=(0,te.A)(function*(a,t){const r=Rt(a);r.asyncQueue.verifyOperationInProgress(),at("RemoteStore","RemoteStore received new credentials");const o=No(r);r.L_.add(3),yield Ud(r),o&&r.q_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(t),r.L_.delete(3),yield Ld(r)})).apply(this,arguments)}function lg(a,t){return yf.apply(this,arguments)}function yf(){return(yf=(0,te.A)(function*(a,t){const r=Rt(a);t?(r.L_.delete(2),yield Ld(r)):t||(r.L_.add(2),yield Ud(r),r.q_.set("Unknown"))})).apply(this,arguments)}function Wl(a){return a.K_||(a.K_=function(r,o,u){const d=Rt(r);return d.w_(),new eE(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:Gl.bind(null,a),Ro:rE.bind(null,a),mo:$C.bind(null,a),d_:HC.bind(null,a)}),a.B_.push(function(){var t=(0,te.A)(function*(r){r?(a.K_.s_(),jd(a)?S_(a):a.q_.set("Unknown")):(yield a.K_.stop(),rg(a))});return function(r){return t.apply(this,arguments)}}())),a.K_}function ou(a){return a.U_||(a.U_=function(r,o,u){const d=Rt(r);return d.w_(),new tE(o,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,u)}(a.datastore,a.asyncQueue,{Eo:()=>Promise.resolve(),Ro:cg.bind(null,a),mo:_f.bind(null,a),f_:sE.bind(null,a),g_:O_.bind(null,a)}),a.B_.push(function(){var t=(0,te.A)(function*(r){r?(a.U_.s_(),yield hc(a)):(yield a.U_.stop(),a.O_.length>0&&(at("RemoteStore",`Stopping write stream with ${a.O_.length} pending writes`),a.O_=[]))});return function(r){return t.apply(this,arguments)}}())),a.U_}class xo{constructor(t,r,o,u,d){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=o,this.op=u,this.removalCallback=d,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,o,u,d){const m=Date.now()+o,D=new xo(t,r,m,u,d);return D.start(o),D}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ot(Xe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function au(a,t){if(In("AsyncQueue",`${t}: ${a}`),rs(a))return new Ot(Xe.UNAVAILABLE,`${t}: ${a}`);throw a}class Xu{constructor(t){this.comparator=t?(r,o)=>t(r,o)||Ie.comparator(r.key,o.key):(r,o)=>Ie.comparator(r.key,o.key),this.keyedMap=Fn(),this.sortedSet=new Nr(this.comparator)}static emptySet(t){return new Xu(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,o)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof Xu)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),o=t.sortedSet.getIterator();for(;r.hasNext();){const u=r.getNext().key,d=o.getNext().key;if(!u.isEqual(d))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,r){const o=new Xu;return o.comparator=this.comparator,o.keyedMap=t,o.sortedSet=r,o}}class vf{constructor(){this.W_=new Nr(Ie.comparator)}track(t){const r=t.doc.key,o=this.W_.get(r);o?0!==t.type&&3===o.type?this.W_=this.W_.insert(r,t):3===t.type&&1!==o.type?this.W_=this.W_.insert(r,{type:o.type,doc:t.doc}):2===t.type&&2===o.type?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):2===t.type&&0===o.type?this.W_=this.W_.insert(r,{type:0,doc:t.doc}):1===t.type&&0===o.type?this.W_=this.W_.remove(r):1===t.type&&2===o.type?this.W_=this.W_.insert(r,{type:1,doc:o.doc}):0===t.type&&1===o.type?this.W_=this.W_.insert(r,{type:2,doc:t.doc}):bt():this.W_=this.W_.insert(r,t)}G_(){const t=[];return this.W_.inorderTraversal((r,o)=>{t.push(o)}),t}}class ks{constructor(t,r,o,u,d,m,D,N,j){this.query=t,this.docs=r,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=d,this.fromCache=m,this.syncStateChanged=D,this.excludesMetadataChanges=N,this.hasCachedResults=j}static fromInitialDocuments(t,r,o,u,d){const m=[];return r.forEach(D=>{m.push({type:0,doc:D})}),new ks(t,r,Xu.emptySet(r),m,o,u,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Wi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,o=t.docChanges;if(r.length!==o.length)return!1;for(let u=0;u<r.length;u++)if(r[u].type!==o[u].type||!r[u].doc.isEqual(o[u].doc))return!1;return!0}}class Hd{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class x_{constructor(){this.queries=dg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(r,o){const u=Rt(r),d=u.queries;u.queries=dg(),d.forEach((m,D)=>{for(const N of D.j_)N.onError(o)})}(this,new Ot(Xe.ABORTED,"Firestore shutting down"))}}function dg(){return new Ss(a=>Ki(a),Wi)}function hg(a,t){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,te.A)(function*(a,t){const r=Rt(a);let o=3;const u=t.query;let d=r.queries.get(u);d?!d.H_()&&t.J_()&&(o=2):(d=new Hd,o=t.J_()?0:1);try{switch(o){case 0:d.z_=yield r.onListen(u,!0);break;case 1:d.z_=yield r.onListen(u,!1);break;case 2:yield r.onFirstRemoteStoreListen(u)}}catch(m){const D=au(m,`Initialization of query '${_i(t.query)}' failed`);return void t.onError(D)}r.queries.set(u,d),d.j_.push(t),t.Z_(r.onlineState),d.z_&&t.X_(d.z_)&&pg(r)})).apply(this,arguments)}function fg(a,t){return If.apply(this,arguments)}function If(){return(If=(0,te.A)(function*(a,t){const r=Rt(a),o=t.query;let u=3;const d=r.queries.get(o);if(d){const m=d.j_.indexOf(t);m>=0&&(d.j_.splice(m,1),0===d.j_.length?u=t.J_()?0:1:!d.H_()&&t.J_()&&(u=2))}switch(u){case 0:return r.queries.delete(o),r.onUnlisten(o,!0);case 1:return r.queries.delete(o),r.onUnlisten(o,!1);case 2:return r.onLastRemoteStoreUnlisten(o);default:return}})).apply(this,arguments)}function oE(a,t){const r=Rt(a);let o=!1;for(const u of t){const m=r.queries.get(u.query);if(m){for(const D of m.j_)D.X_(u)&&(o=!0);m.z_=u}}o&&pg(r)}function k_(a,t,r){const o=Rt(a),u=o.queries.get(t);if(u)for(const d of u.j_)d.onError(r);o.queries.delete(t)}function pg(a){a.Y_.forEach(t=>{t.next()})}var gg,F_;(F_=gg||(gg={})).ea="default",F_.Cache="cache";class mg{constructor(t,r,o){this.query=t,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(t){if(!this.options.includeMetadataChanges){const o=[];for(const u of t.docChanges)3!==u.type&&o.push(u);t=new ks(t.query,t.docs,t.oldDocs,o,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.na?this.ia(t)&&(this.ta.next(t),r=!0):this.sa(t,this.onlineState)&&(this.oa(t),r=!0),this.ra=t,r}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),r=!0),r}sa(t,r){return!t.fromCache||!this.J_()||(!this.options._a||!("Offline"!==r))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===r)}ia(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(t){t=ks.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==gg.Cache}}class V_{constructor(t,r){this.aa=t,this.byteLength=r}ua(){return"metadata"in this.aa}}class _g{constructor(t){this.serializer=t}Es(t){return ga(this.serializer,t)}ds(t){return t.metadata.exists?Zh(this.serializer,t.document,!1):dr.newNoDocument(this.Es(t.metadata.name),this.As(t.metadata.readTime))}As(t){return Fi(t)}}class L_{constructor(t,r,o){this.ca=t,this.localStore=r,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gd(t)}la(t){this.progress.bytesLoaded+=t.byteLength;let r=this.progress.documentsLoaded;if(t.aa.namedQuery)this.queries.push(t.aa.namedQuery);else if(t.aa.documentMetadata){this.documents.push({metadata:t.aa.documentMetadata}),t.aa.documentMetadata.exists||++r;const o=Nn.fromString(t.aa.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else t.aa.document&&(this.documents[this.documents.length-1].document=t.aa.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}ha(t){const r=new Map,o=new _g(this.serializer);for(const u of t)if(u.metadata.queries){const d=o.Es(u.metadata.name);for(const m of u.metadata.queries){const D=(r.get(m)||wn()).add(d);r.set(m,D)}}return r}complete(){var t=this;return(0,te.A)(function*(){const r=yield function go(a,t,r,o){return Pa.apply(this,arguments)}(t.localStore,new _g(t.serializer),t.documents,t.ca.id),o=t.ha(t.documents);for(const u of t.queries)yield Hu(t.localStore,u,o.get(u.name));return t.progress.taskState="Success",{progress:t.progress,Pa:t.collectionGroups,Ia:r}})()}}function Gd(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class yg{constructor(t){this.key=t}}class vg{constructor(t){this.key=t}}class Eg{constructor(t,r){this.query=t,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=wn(),this.mutatedKeys=wn(),this.Aa=Za(t),this.Ra=new Xu(this.Aa)}get Va(){return this.Ta}ma(t,r){const o=r?r.fa:new vf,u=r?r.Ra:this.Ra;let d=r?r.mutatedKeys:this.mutatedKeys,m=u,D=!1;const N="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,j="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal((ie,fe)=>{const Me=u.get(ie),ct=co(this.query,fe)?fe:null,jt=!!Me&&this.mutatedKeys.has(Me.key),sn=!!ct&&(ct.hasLocalMutations||this.mutatedKeys.has(ct.key)&&ct.hasCommittedMutations);let Xt=!1;Me&&ct?Me.data.isEqual(ct.data)?jt!==sn&&(o.track({type:3,doc:ct}),Xt=!0):this.ga(Me,ct)||(o.track({type:2,doc:ct}),Xt=!0,(N&&this.Aa(ct,N)>0||j&&this.Aa(ct,j)<0)&&(D=!0)):!Me&&ct?(o.track({type:0,doc:ct}),Xt=!0):Me&&!ct&&(o.track({type:1,doc:Me}),Xt=!0,(N||j)&&(D=!0)),Xt&&(ct?(m=m.add(ct),d=sn?d.add(ie):d.delete(ie)):(m=m.delete(ie),d=d.delete(ie)))}),null!==this.query.limit)for(;m.size>this.query.limit;){const ie="F"===this.query.limitType?m.last():m.first();m=m.delete(ie.key),d=d.delete(ie.key),o.track({type:1,doc:ie})}return{Ra:m,fa:o,ns:D,mutatedKeys:d}}ga(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,o,u){const d=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const m=t.fa.G_();m.sort((ie,fe)=>function(ct,jt){const sn=Xt=>{switch(Xt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt()}};return sn(ct)-sn(jt)}(ie.type,fe.type)||this.Aa(ie.doc,fe.doc)),this.pa(o),u=null!=u&&u;const D=r&&!u?this.ya():[],N=0===this.da.size&&this.current&&!u?1:0,j=N!==this.Ea;return this.Ea=N,0!==m.length||j?{snapshot:new ks(this.query,t.Ra,d,m,t.mutatedKeys,0===N,j,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:D}:{wa:D}}Z_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=wn(),this.Ra.forEach(o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))});const r=[];return t.forEach(o=>{this.da.has(o)||r.push(new vg(o))}),this.da.forEach(o=>{t.has(o)||r.push(new yg(o))}),r}ba(t){this.Ta=t.Ts,this.da=wn();const r=this.ma(t.documents);return this.applyChanges(r,!0)}Da(){return ks.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class U_{constructor(t,r,o){this.query=t,this.targetId=r,this.view=o}}class aE{constructor(t){this.key=t,this.va=!1}}class cE{constructor(t,r,o,u,d,m){this.localStore=t,this.remoteStore=r,this.eventManager=o,this.sharedClientState=u,this.currentUser=d,this.maxConcurrentLimboResolutions=m,this.Ca={},this.Fa=new Ss(D=>Ki(D),Wi),this.Ma=new Map,this.xa=new Set,this.Oa=new Nr(Ie.comparator),this.Na=new Map,this.La=new nu,this.Ba={},this.ka=new Map,this.qa=Xs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function uE(a,t){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,te.A)(function*(a,t,r=!0){const o=Fg(a);let u;const d=o.Fa.get(t);return d?(o.sharedClientState.addLocalQueryTarget(d.targetId),u=d.view.Da()):u=yield Cg(o,t,r,!0),u})).apply(this,arguments)}function B_(a,t){return j_.apply(this,arguments)}function j_(){return(j_=(0,te.A)(function*(a,t){const r=Fg(a);yield Cg(r,t,!0,!1)})).apply(this,arguments)}function Cg(a,t,r,o){return wg.apply(this,arguments)}function wg(){return(wg=(0,te.A)(function*(a,t,r,o){const u=yield ae(a.localStore,wr(t)),d=u.targetId,m=r?a.sharedClientState.addLocalQueryTarget(d):"not-current";let D;return o&&(D=yield Tg(a,t,d,"current"===m,u.resumeToken)),a.isPrimaryClient&&r&&Bd(a.remoteStore,u),D})).apply(this,arguments)}function Tg(a,t,r,o,u){return $_.apply(this,arguments)}function $_(){return $_=(0,te.A)(function*(a,t,r,o,u){a.Ka=(fe,Me,ct)=>{return(jt=(0,te.A)(function*(Xt,Bn,nr,Vn){let ur=Bn.view.ma(nr);ur.ns&&(ur=yield Gt(Xt.localStore,Bn.query,!1).then(({documents:Ae})=>Bn.view.ma(Ae,ur)));const Lr=Vn&&Vn.targetChanges.get(Bn.targetId),br=Vn&&null!=Vn.targetMismatches.get(Bn.targetId),nt=Bn.view.applyChanges(ur,Xt.isPrimaryClient,Lr,br);return Wd(Xt,Bn.targetId,nt.wa),nt.snapshot}),function sn(Xt,Bn,nr,Vn){return jt.apply(this,arguments)})(a,fe,Me,ct);var jt};const d=yield Gt(a.localStore,t,!0),m=new Eg(t,d.Ts),D=m.ma(d.documents),N=Ii.createSynthesizedTargetChangeForCurrentChange(r,o&&"Offline"!==a.onlineState,u),j=m.applyChanges(D,a.isPrimaryClient,N);Wd(a,r,j.wa);const ie=new U_(t,r,m);return a.Fa.set(t,ie),a.Ma.has(r)?a.Ma.get(r).push(t):a.Ma.set(r,[t]),j.snapshot}),$_.apply(this,arguments)}function lE(a,t,r){return Cf.apply(this,arguments)}function Cf(){return(Cf=(0,te.A)(function*(a,t,r){const o=Rt(a),u=o.Fa.get(t),d=o.Ma.get(u.targetId);if(d.length>1)return o.Ma.set(u.targetId,d.filter(m=>!Wi(m,t))),void o.Fa.delete(t);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||(yield ke(o.localStore,u.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(u.targetId),r&&mo(o.remoteStore,u.targetId),uu(o,u.targetId)}).catch(Rn))):(uu(o,u.targetId),yield ke(o.localStore,u.targetId,!0))})).apply(this,arguments)}function Dg(a,t){return Ag.apply(this,arguments)}function Ag(){return(Ag=(0,te.A)(function*(a,t){const r=Rt(a),o=r.Fa.get(t),u=r.Ma.get(o.targetId);r.isPrimaryClient&&1===u.length&&(r.sharedClientState.removeLocalQueryTarget(o.targetId),mo(r.remoteStore,o.targetId))})).apply(this,arguments)}function wf(){return(wf=(0,te.A)(function*(a,t,r){const o=Zu(a);try{const u=yield function(m,D){const N=Rt(m),j=nn.now(),ie=D.reduce((ct,jt)=>ct.add(jt.key),wn());let fe,Me;return N.persistence.runTransaction("Locally write mutations","readwrite",ct=>{let jt=ki(),sn=wn();return N.cs.getEntries(ct,ie).next(Xt=>{jt=Xt,jt.forEach((Bn,nr)=>{nr.isValidDocument()||(sn=sn.add(Bn))})}).next(()=>N.localDocuments.getOverlayedDocuments(ct,jt)).next(Xt=>{fe=Xt;const Bn=[];for(const nr of D){const Vn=zr(nr,fe.get(nr.key).overlayedDocument);null!=Vn&&Bn.push(new gr(nr.key,Vn,oo(Vn.value.mapValue),er.exists(!0)))}return N.mutationQueue.addMutationBatch(ct,j,Bn,D)}).next(Xt=>{Me=Xt;const Bn=Xt.applyToLocalDocumentSet(fe,sn);return N.documentOverlayCache.saveOverlays(ct,Xt.batchId,Bn)})}).then(()=>({batchId:Me.batchId,changes:Hn(fe)}))}(o.localStore,t);o.sharedClientState.addPendingMutation(u.batchId),function(m,D,N){let j=m.Ba[m.currentUser.toKey()];j||(j=new Nr(Wt)),j=j.insert(D,N),m.Ba[m.currentUser.toKey()]=j}(o,u.batchId,r),yield Ma(o,u.changes),yield hc(o.remoteStore)}catch(u){const d=au(u,"Failed to persist write");r.reject(d)}})).apply(this,arguments)}function H_(a,t){return Tf.apply(this,arguments)}function Tf(){return(Tf=(0,te.A)(function*(a,t){const r=Rt(a);try{const o=yield function f(a,t){const r=Rt(a),o=t.snapshotVersion;let u=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",d=>{const m=r.cs.newChangeBuffer({trackRemovals:!0});u=r.os;const D=[];t.targetChanges.forEach((ie,fe)=>{const Me=u.get(fe);if(!Me)return;D.push(r.Ur.removeMatchingKeys(d,ie.removedDocuments,fe).next(()=>r.Ur.addMatchingKeys(d,ie.addedDocuments,fe)));let ct=Me.withSequenceNumber(d.currentSequenceNumber);var sn,Xt,Bn;null!==t.targetMismatches.get(fe)?ct=ct.withResumeToken(Ur.EMPTY_BYTE_STRING,rn.min()).withLastLimboFreeSnapshotVersion(rn.min()):ie.resumeToken.approximateByteSize()>0&&(ct=ct.withResumeToken(ie.resumeToken,o)),u=u.insert(fe,ct),Xt=ct,Bn=ie,(0===(sn=Me).resumeToken.approximateByteSize()||Xt.snapshotVersion.toMicroseconds()-sn.snapshotVersion.toMicroseconds()>=3e8||Bn.addedDocuments.size+Bn.modifiedDocuments.size+Bn.removedDocuments.size>0)&&D.push(r.Ur.updateTargetData(d,ct))});let N=ki(),j=wn();if(t.documentUpdates.forEach(ie=>{t.resolvedLimboDocuments.has(ie)&&D.push(r.persistence.referenceDelegate.updateLimboDocument(d,ie))}),D.push(T(d,m,t.documentUpdates).next(ie=>{N=ie.Ps,j=ie.Is})),!o.isEqual(rn.min())){const ie=r.Ur.getLastRemoteSnapshotVersion(d).next(fe=>r.Ur.setTargetsMetadata(d,d.currentSequenceNumber,o));D.push(ie)}return Ne.waitFor(D).next(()=>m.apply(d)).next(()=>r.localDocuments.getLocalViewOfDocuments(d,N,j)).next(()=>N)}).then(d=>(r.os=u,d))}(r.localStore,t);t.targetChanges.forEach((u,d)=>{const m=r.Na.get(d);m&&(pt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?m.va=!0:u.modifiedDocuments.size>0?pt(m.va):u.removedDocuments.size>0&&(pt(m.va),m.va=!1))}),yield Ma(r,o,t)}catch(o){yield Rn(o)}})).apply(this,arguments)}function Df(a,t,r){const o=Rt(a);if(o.isPrimaryClient&&0===r||!o.isPrimaryClient&&1===r){const u=[];o.Fa.forEach((d,m)=>{const D=m.view.Z_(t);D.snapshot&&u.push(D.snapshot)}),function(m,D){const N=Rt(m);N.onlineState=D;let j=!1;N.queries.forEach((ie,fe)=>{for(const Me of fe.j_)Me.Z_(D)&&(j=!0)}),j&&pg(N)}(o.eventManager,t),u.length&&o.Ca.d_(u),o.onlineState=t,o.isPrimaryClient&&o.sharedClientState.setOnlineState(t)}}function GC(a,t,r){return bg.apply(this,arguments)}function bg(){return(bg=(0,te.A)(function*(a,t,r){const o=Rt(a);o.sharedClientState.updateQueryState(t,"rejected",r);const u=o.Na.get(t),d=u&&u.key;if(d){let m=new Nr(Ie.comparator);m=m.insert(d,dr.newNoDocument(d,rn.min()));const D=wn().add(d),N=new rc(rn.min(),new Map,new Nr(Wt),m,D);yield H_(o,N),o.Oa=o.Oa.remove(d),o.Na.delete(t),Ju(o)}else yield ke(o.localStore,t,!1).then(()=>uu(o,t,r)).catch(Rn)})).apply(this,arguments)}function dE(a,t){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,te.A)(function*(a,t){const r=Rt(a),o=t.batch.batchId;try{const u=yield function E(a,t){const r=Rt(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=t.batch.keys(),d=r.cs.newChangeBuffer({trackRemovals:!0});return function(D,N,j,ie){const fe=j.batch,Me=fe.keys();let ct=Ne.resolve();return Me.forEach(jt=>{ct=ct.next(()=>ie.getEntry(N,jt)).next(sn=>{const Xt=j.docVersions.get(jt);pt(null!==Xt),sn.version.compareTo(Xt)<0&&(fe.applyToRemoteDocument(sn,j),sn.isValidDocument()&&(sn.setReadTime(j.commitVersion),ie.addEntry(sn)))})}),ct.next(()=>D.mutationQueue.removeMutationBatch(N,fe))}(r,o,t,d).next(()=>d.apply(o)).next(()=>r.mutationQueue.performConsistencyCheck(o)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(o,u,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(D){let N=wn();for(let j=0;j<D.mutationResults.length;++j)D.mutationResults[j].transformResults.length>0&&(N=N.add(D.batch.mutations[j].key));return N}(t))).next(()=>r.localDocuments.getDocuments(o,u))})}(r.localStore,t);zd(r,o,null),Pg(r,o),r.sharedClientState.updateMutationState(o,"acknowledged"),yield Ma(r,u)}catch(u){yield Rn(u)}})).apply(this,arguments)}function hE(a,t,r){return G_.apply(this,arguments)}function G_(){return(G_=(0,te.A)(function*(a,t,r){const o=Rt(a);try{const u=yield function(m,D){const N=Rt(m);return N.persistence.runTransaction("Reject batch","readwrite-primary",j=>{let ie;return N.mutationQueue.lookupMutationBatch(j,D).next(fe=>(pt(null!==fe),ie=fe.keys(),N.mutationQueue.removeMutationBatch(j,fe))).next(()=>N.mutationQueue.performConsistencyCheck(j)).next(()=>N.documentOverlayCache.removeOverlaysForBatchId(j,ie,D)).next(()=>N.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(j,ie)).next(()=>N.localDocuments.getDocuments(j,ie))})}(o.localStore,t);zd(o,t,r),Pg(o,t),o.sharedClientState.updateMutationState(t,"rejected",r),yield Ma(o,u)}catch(u){yield Rn(u)}})).apply(this,arguments)}function Kl(){return(Kl=(0,te.A)(function*(a,t){const r=Rt(a);No(r.remoteStore)||at("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const D=Rt(m);return D.persistence.runTransaction("Get highest unacknowledged batch id","readonly",N=>D.mutationQueue.getHighestUnacknowledgedBatchId(N))}(r.localStore);if(-1===o)return void t.resolve();const u=r.ka.get(o)||[];u.push(t),r.ka.set(o,u)}catch(o){const u=au(o,"Initialization of waitForPendingWrites() operation failed");t.reject(u)}})).apply(this,arguments)}function Pg(a,t){(a.ka.get(t)||[]).forEach(r=>{r.resolve()}),a.ka.delete(t)}function zd(a,t,r){const o=Rt(a);let u=o.Ba[o.currentUser.toKey()];if(u){const d=u.get(t);d&&(r?d.reject(r):d.resolve(),u=u.remove(t)),o.Ba[o.currentUser.toKey()]=u}}function uu(a,t,r=null){a.sharedClientState.removeLocalQueryTarget(t);for(const o of a.Ma.get(t))a.Fa.delete(o),r&&a.Ca.$a(o,r);a.Ma.delete(t),a.isPrimaryClient&&a.La.gr(t).forEach(o=>{a.La.containsKey(o)||Yu(a,o)})}function Yu(a,t){a.xa.delete(t.path.canonicalString());const r=a.Oa.get(t);null!==r&&(mo(a.remoteStore,r),a.Oa=a.Oa.remove(t),a.Na.delete(r),Ju(a))}function Wd(a,t,r){for(const o of r)o instanceof yg?(a.La.addReference(o.key,t),Mg(a,o)):o instanceof vg?(at("SyncEngine","Document no longer in limbo: "+o.key),a.La.removeReference(o.key,t),a.La.containsKey(o.key)||Yu(a,o.key)):bt()}function Mg(a,t){const r=t.key,o=r.path.canonicalString();a.Oa.get(r)||a.xa.has(o)||(at("SyncEngine","New document in limbo: "+r),a.xa.add(o),Ju(a))}function Ju(a){for(;a.xa.size>0&&a.Oa.size<a.maxConcurrentLimboResolutions;){const t=a.xa.values().next().value;a.xa.delete(t);const r=new Ie(Nn.fromString(t)),o=a.qa.next();a.Na.set(o,new aE(r)),a.Oa=a.Oa.insert(r,o),Bd(a.remoteStore,new Co(wr(On(r.path)),o,"TargetPurposeLimboResolution",se.oe))}}function Ma(a,t,r){return lu.apply(this,arguments)}function lu(){return lu=(0,te.A)(function*(a,t,r){const o=Rt(a),u=[],d=[],m=[];var D;o.Fa.isEmpty()||(o.Fa.forEach((D,N)=>{m.push(o.Ka(N,t,r).then(j=>{var ie;if((j||r)&&o.isPrimaryClient){const fe=j?!j.fromCache:null===(ie=r?.targetChanges.get(N.targetId))||void 0===ie?void 0:ie.current;o.sharedClientState.updateQueryState(N.targetId,fe?"current":"not-current")}if(j){u.push(j);const fe=kd.Wi(N.targetId,j);d.push(fe)}}))}),yield Promise.all(m),o.Ca.d_(u),yield(D=(0,te.A)(function*(j,ie){const fe=Rt(j);try{yield fe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Me=>Ne.forEach(ie,ct=>Ne.forEach(ct.$i,jt=>fe.persistence.referenceDelegate.addReference(Me,ct.targetId,jt)).next(()=>Ne.forEach(ct.Ui,jt=>fe.persistence.referenceDelegate.removeReference(Me,ct.targetId,jt)))))}catch(Me){if(!rs(Me))throw Me;at("LocalStore","Failed to update sequence numbers: "+Me)}for(const Me of ie){const ct=Me.targetId;if(!Me.fromCache){const jt=fe.os.get(ct),Xt=jt.withLastLimboFreeSnapshotVersion(jt.snapshotVersion);fe.os=fe.os.insert(ct,Xt)}}}),function N(j,ie){return D.apply(this,arguments)})(o.localStore,d))}),lu.apply(this,arguments)}function Rg(a,t){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,te.A)(function*(a,t){const r=Rt(a);if(!r.currentUser.isEqual(t)){at("SyncEngine","User change. New user:",t.toKey());const o=yield Zp(r.localStore,t);r.currentUser=t,(d=r).ka.forEach(D=>{D.forEach(N=>{N.reject(new Ot(Xe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.ka.clear(),r.sharedClientState.handleUserChange(t,o.removedBatchIds,o.addedBatchIds),yield Ma(r,o.hs)}var d})).apply(this,arguments)}function Af(a,t){const r=Rt(a),o=r.Na.get(t);if(o&&o.va)return wn().add(o.key);{let u=wn();const d=r.Ma.get(t);if(!d)return u;for(const m of d){const D=r.Fa.get(m);u=u.unionWith(D.view.Va)}return u}}function WC(a,t){return qd.apply(this,arguments)}function qd(){return(qd=(0,te.A)(function*(a,t){const r=Rt(a),o=yield Gt(r.localStore,t.query,!0),u=t.view.ba(o);return r.isPrimaryClient&&Wd(r,t.targetId,u.wa),u})).apply(this,arguments)}function Qd(a,t){return Og.apply(this,arguments)}function Og(){return(Og=(0,te.A)(function*(a,t){const r=Rt(a);return zn(r.localStore,t).then(o=>Ma(r,o))})).apply(this,arguments)}function z_(a,t,r,o){return Ng.apply(this,arguments)}function Ng(){return(Ng=(0,te.A)(function*(a,t,r,o){const u=Rt(a),d=yield function(D,N){const j=Rt(D),ie=Rt(j.mutationQueue);return j.persistence.runTransaction("Lookup mutation documents","readonly",fe=>ie.Mn(fe,N).next(Me=>Me?j.localDocuments.getDocuments(fe,Me):Ne.resolve(null)))}(u.localStore,t);var N;null!==d?("pending"===r?yield hc(u.remoteStore):"acknowledged"===r||"rejected"===r?(zd(u,t,o||null),Pg(u,t),N=t,Rt(Rt(u.localStore).mutationQueue).On(N)):bt(),yield Ma(u,d)):at("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function Xd(){return(Xd=(0,te.A)(function*(a,t){const r=Rt(a);if(Fg(r),Zu(r),!0===t&&!0!==r.Qa){const o=r.sharedClientState.getAllActiveQueryTargets(),u=yield xg(r,o.toArray());r.Qa=!0,yield lg(r.remoteStore,!0);for(const d of u)Bd(r.remoteStore,d)}else if(!1===t&&!1!==r.Qa){const o=[];let u=Promise.resolve();r.Ma.forEach((d,m)=>{r.sharedClientState.isLocalQueryTarget(m)?o.push(m):u=u.then(()=>(uu(r,m),ke(r.localStore,m,!0))),mo(r.remoteStore,m)}),yield u,yield xg(r,o),function(m){const D=Rt(m);D.Na.forEach((N,j)=>{mo(D.remoteStore,j)}),D.La.pr(),D.Na=new Map,D.Oa=new Nr(Ie.comparator)}(r),r.Qa=!1,yield lg(r.remoteStore,!1)}})).apply(this,arguments)}function xg(a,t,r){return kg.apply(this,arguments)}function kg(){return(kg=(0,te.A)(function*(a,t,r){const o=Rt(a),u=[],d=[];for(const m of t){let D;const N=o.Ma.get(m);if(N&&0!==N.length){D=yield ae(o.localStore,wr(N[0]));for(const j of N){const ie=o.Fa.get(j),fe=yield WC(o,ie);fe.snapshot&&d.push(fe.snapshot)}}else{const j=yield Sn(o.localStore,m);D=yield ae(o.localStore,j),yield Tg(o,W_(j),m,!1,D.resumeToken)}u.push(D)}return o.Ca.d_(d),u})).apply(this,arguments)}function W_(a){return kn(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function Yd(a){return r=Rt(a).localStore,Rt(Rt(r).persistence).Qi();var r}function K_(a,t,r,o){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,te.A)(function*(a,t,r,o){const u=Rt(a);if(u.Qa)return void at("SyncEngine","Ignoring unexpected query state notification.");const d=u.Ma.get(t);if(d&&d.length>0)switch(r){case"current":case"not-current":{const m=yield zn(u.localStore,uo(d[0])),D=rc.createSynthesizedRemoteEventForCurrentChange(t,"current"===r,Ur.EMPTY_BYTE_STRING);yield Ma(u,m,D);break}case"rejected":yield ke(u.localStore,t,!0),uu(u,t,o);break;default:bt()}})).apply(this,arguments)}function pE(a,t,r){return q_.apply(this,arguments)}function q_(){return(q_=(0,te.A)(function*(a,t,r){const o=Fg(a);if(o.Qa){for(const u of t){if(o.Ma.has(u)&&o.sharedClientState.isActiveQueryTarget(u)){at("SyncEngine","Adding an already active target "+u);continue}const d=yield Sn(o.localStore,u),m=yield ae(o.localStore,d);yield Tg(o,W_(d),m.targetId,!1,m.resumeToken),Bd(o.remoteStore,m)}for(const u of r)o.Ma.has(u)&&(yield ke(o.localStore,u,!1).then(()=>{mo(o.remoteStore,u),uu(o,u)}).catch(Rn))}})).apply(this,arguments)}function Fg(a){const t=Rt(a);return t.remoteStore.remoteSyncer.applyRemoteEvent=H_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Af.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=GC.bind(null,t),t.Ca.d_=oE.bind(null,t.eventManager),t.Ca.$a=k_.bind(null,t.eventManager),t}function Zu(a){const t=Rt(a);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hE.bind(null,t),t}class kc{constructor(){this.synchronizeTabs=!1}initialize(t){var r=this;return(0,te.A)(function*(){r.serializer=su(t.databaseInfo.databaseId),r.sharedClientState=r.createSharedClientState(t),r.persistence=r.createPersistence(t),yield r.persistence.start(),r.localStore=r.createLocalStore(t),r.gcScheduler=r.createGarbageCollectionScheduler(t,r.localStore),r.indexBackfillerScheduler=r.createIndexBackfillerScheduler(t,r.localStore)})()}createGarbageCollectionScheduler(t,r){return null}createIndexBackfillerScheduler(t,r){return null}createLocalStore(t){return ru(this.persistence,new Jp,t.initialUser,this.serializer)}createPersistence(t){return new Nc($u.Zr,this.serializer)}createSharedClientState(t){return new za}terminate(){var t=this;return(0,te.A)(function*(){var r,o;null===(r=t.gcScheduler)||void 0===r||r.stop(),null===(o=t.indexBackfillerScheduler)||void 0===o||o.stop(),t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class Lg extends kc{constructor(t,r,o){super(),this.Wa=t,this.cacheSizeBytes=r,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(t){var r=()=>super.initialize,o=this;return(0,te.A)(function*(){yield r().call(o,t),yield o.Wa.initialize(o,t),yield Zu(o.Wa.syncEngine),yield hc(o.Wa.remoteStore),yield o.persistence.yi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(t){return ru(this.persistence,new Jp,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,r){return new Nl(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,r)}createIndexBackfillerScheduler(t,r){const o=new ln(r,this.persistence);return new kt(t.asyncQueue,o)}createPersistence(t){const r=xd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Ns.withCacheSize(this.cacheSizeBytes):Ns.DEFAULT;return new Ll(this.synchronizeTabs,r,t.clientId,o,t.asyncQueue,eg(),Hl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new za}}class Ug extends Lg{constructor(t,r){super(t,r,!1),this.Wa=t,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(t){var r=()=>super.initialize,o=this;return(0,te.A)(function*(){yield r().call(o,t);const u=o.Wa.syncEngine;o.sharedClientState instanceof dc&&(o.sharedClientState.syncEngine={no:z_.bind(null,u),ro:K_.bind(null,u),io:pE.bind(null,u),Qi:Yd.bind(null,u),eo:Qd.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.yi(function(){var d=(0,te.A)(function*(m){yield function fE(a,t){return Xd.apply(this,arguments)}(o.Wa.syncEngine,m),o.gcScheduler&&(m&&!o.gcScheduler.started?o.gcScheduler.start():m||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(m&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():m||o.indexBackfillerScheduler.stop())});return function(m){return d.apply(this,arguments)}}())})()}createSharedClientState(t){const r=eg();if(!dc.D(r))throw new Ot(Xe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=xd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new dc(r,t.asyncQueue,o,t.clientId,t.initialUser)}}class du{initialize(t,r){var o=this;return(0,te.A)(function*(){o.localStore||(o.localStore=t.localStore,o.sharedClientState=t.sharedClientState,o.datastore=o.createDatastore(r),o.remoteStore=o.createRemoteStore(r),o.eventManager=o.createEventManager(r),o.syncEngine=o.createSyncEngine(r,!t.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>Df(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=Rg.bind(null,o.syncEngine),yield lg(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(t){return new x_}createDatastore(t){const r=su(t.databaseInfo.databaseId),o=new Zv(t.databaseInfo);return new D_(t.authCredentials,t.appCheckCredentials,o,r)}createRemoteStore(t){return o=this.localStore,u=this.datastore,d=t.asyncQueue,m=r=>Df(this.syncEngine,r,0),D=C_.D()?new C_:new xs,new A_(o,u,d,m,D);var o,u,d,m,D}createSyncEngine(t,r){return function(u,d,m,D,N,j,ie){const fe=new cE(u,d,m,D,N,j);return ie&&(fe.Qa=!0),fe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){var t=this;return(0,te.A)(function*(){var r,o,u;yield(u=(0,te.A)(function*(m){const D=Rt(m);at("RemoteStore","RemoteStore shutting down."),D.L_.add(5),yield Ud(D),D.k_.shutdown(),D.q_.set("Unknown")}),function d(m){return u.apply(this,arguments)})(t.remoteStore),null===(r=t.datastore)||void 0===r||r.terminate(),null===(o=t.eventManager)||void 0===o||o.terminate()})()}}function Zd(a,t=10240){let r=0;return{read:()=>(0,te.A)(function*(){if(r<a.byteLength){const o={value:a.slice(r,r+t),done:!1};return r+=t,o}return{done:!0}})(),cancel:()=>(0,te.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class el{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):In("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,r){this.muted||setTimeout(()=>{this.muted||t(r)},0)}}class Q_{constructor(t,r){this.ja=t,this.serializer=r,this.metadata=new rr,this.buffer=new Uint8Array,this.Ha=new TextDecoder("utf-8"),this.Ja().then(o=>{o&&o.ua()?this.metadata.resolve(o.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.aa)}`))},o=>this.metadata.reject(o))}close(){return this.ja.cancel()}getMetadata(){var t=this;return(0,te.A)(function*(){return t.metadata.promise})()}Ua(){var t=this;return(0,te.A)(function*(){return yield t.getMetadata(),t.Ja()})()}Ja(){var t=this;return(0,te.A)(function*(){const r=yield t.Ya();if(null===r)return null;const o=t.Ha.decode(r),u=Number(o);isNaN(u)&&t.Za(`length string (${o}) is not valid number`);const d=yield t.Xa(u);return new V_(JSON.parse(d),r.length+u)})()}eu(){return this.buffer.findIndex(t=>123===t)}Ya(){var t=this;return(0,te.A)(function*(){for(;t.eu()<0&&!(yield t.tu()););if(0===t.buffer.length)return null;const r=t.eu();r<0&&t.Za("Reached the end of bundle when a length string is expected.");const o=t.buffer.slice(0,r);return t.buffer=t.buffer.slice(r),o})()}Xa(t){var r=this;return(0,te.A)(function*(){for(;r.buffer.length<t;)(yield r.tu())&&r.Za("Reached the end of bundle when more is expected.");const o=r.Ha.decode(r.buffer.slice(0,t));return r.buffer=r.buffer.slice(t),o})()}Za(t){throw this.ja.cancel(),new Error(`Invalid bundle format: ${t}`)}tu(){var t=this;return(0,te.A)(function*(){const r=yield t.ja.read();if(!r.done){const o=new Uint8Array(t.buffer.length+r.value.length);o.set(t.buffer),o.set(r.value,t.buffer.length),t.buffer=o}return r.done})()}}class X_{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){var r=this;return(0,te.A)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new Ot(Xe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const o=yield(u=(0,te.A)(function*(m,D){const N=Rt(m),j={documents:D.map(ct=>Xc(N.serializer,ct))},ie=yield N.Lo("BatchGetDocuments",N.serializer.databaseId,Nn.emptyPath(),j,D.length),fe=new Map;ie.forEach(ct=>{const jt=function Wp(a,t){return"found"in t?function(o,u){pt(!!u.found);const d=ga(o,u.found.name),m=Fi(u.found.updateTime),D=u.found.createTime?Fi(u.found.createTime):rn.min(),N=new Kr({mapValue:{fields:u.found.fields}});return dr.newFoundDocument(d,m,D,N)}(a,t):"missing"in t?function(o,u){pt(!!u.missing),pt(!!u.readTime);const d=ga(o,u.missing),m=Fi(u.readTime);return dr.newNoDocument(d,m)}(a,t):bt()}(N.serializer,ct);fe.set(jt.key.toString(),jt)});const Me=[];return D.forEach(ct=>{const jt=fe.get(ct.toString());pt(!!jt),Me.push(jt)}),Me}),function d(m,D){return u.apply(this,arguments)})(r.datastore,t);var u;return o.forEach(u=>r.recordVersion(u)),o})()}set(t,r){this.write(r.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,r){try{this.write(r.toMutation(t,this.preconditionForUpdate(t)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(t.toString())}delete(t){this.write(new Ks(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,te.A)(function*(){if(t.ensureCommitNotCalled(),t.lastTransactionError)throw t.lastTransactionError;const r=t.readVersions;var o;t.mutations.forEach(o=>{r.delete(o.key.toString())}),r.forEach((o,u)=>{const d=Ie.fromPath(u);t.mutations.push(new Ei(d,t.precondition(d)))}),yield(o=(0,te.A)(function*(d,m){const D=Rt(d),N={writes:m.map(j=>Ou(D.serializer,j))};yield D.Mo("Commit",D.serializer.databaseId,Nn.emptyPath(),N)}),function u(d,m){return o.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let r;if(t.isFoundDocument())r=t.version;else{if(!t.isNoDocument())throw bt();r=rn.min()}const o=this.readVersions.get(t.key.toString());if(o){if(!r.isEqual(o))throw new Ot(Xe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),r)}precondition(t){const r=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&r?r.isEqual(rn.min())?er.exists(!1):er.updateTime(r):er.none()}preconditionForUpdate(t){const r=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&r){if(r.isEqual(rn.min()))throw new Ot(Xe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return er.updateTime(r)}return er.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class Y_{constructor(t,r,o,u,d){this.asyncQueue=t,this.datastore=r,this.options=o,this.updateFunction=u,this.deferred=d,this.nu=o.maxAttempts,this.t_=new hf(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){var t=this;this.t_.Go((0,te.A)(function*(){const r=new X_(t.datastore),o=t.su(r);o&&o.then(u=>{t.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{t.deferred.resolve(u)}).catch(d=>{t.ou(d)}))}).catch(u=>{t.ou(u)})}))}su(t){try{const r=this.updateFunction(t);return!ye(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ou(t){this.nu>0&&this._u(t)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(t)}_u(t){if("FirebaseError"===t.name){const r=t.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!Dc(r)}return!1}}class bf{constructor(t,r,o,u){var d=this;this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=o,this.databaseInfo=u,this.user=on.UNAUTHENTICATED,this.clientId=Ti.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var m=(0,te.A)(function*(D){at("FirestoreClient","Received user=",D.uid),yield d.authCredentialListener(D),d.user=D});return function(D){return m.apply(this,arguments)}}()),this.appCheckCredentials.start(o,m=>(at("FirestoreClient","Received new app check token=",m),this.appCheckCredentialListener(m,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ot(Xe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const r=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,te.A)(function*(){try{t._onlineComponents&&(yield t._onlineComponents.terminate()),t._offlineComponents&&(yield t._offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),r.resolve()}catch(o){const u=au(o,"Failed to shutdown persistence");r.reject(u)}})),r.promise}}function ql(a,t){return hu.apply(this,arguments)}function hu(){return hu=(0,te.A)(function*(a,t){a.asyncQueue.verifyOperationInProgress(),at("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield t.initialize(r);let o=r.initialUser;a.setCredentialChangeListener(function(){var u=(0,te.A)(function*(d){o.isEqual(d)||(yield Zp(t.localStore,d),o=d)});return function(d){return u.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=t}),hu.apply(this,arguments)}function Bg(a,t){return jg.apply(this,arguments)}function jg(){return(jg=(0,te.A)(function*(a,t){a.asyncQueue.verifyOperationInProgress();const r=yield Ql(a);at("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(r,a.configuration),a.setCredentialChangeListener(o=>N_(t.remoteStore,o)),a.setAppCheckTokenChangeListener((o,u)=>N_(t.remoteStore,u)),a._onlineComponents=t})).apply(this,arguments)}function mE(a){return"FirebaseError"===a.name?a.code===Xe.FAILED_PRECONDITION||a.code===Xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code}function Ql(a){return eh.apply(this,arguments)}function eh(){return(eh=(0,te.A)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){at("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ql(a,a._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!mE(r))throw r;Qn("Error using user provided cache. Falling back to memory cache: "+r),yield ql(a,new kc)}}else at("FirestoreClient","Using default OfflineComponentProvider"),yield ql(a,new kc);return a._offlineComponents})).apply(this,arguments)}function th(a){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,te.A)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(at("FirestoreClient","Using user provided OnlineComponentProvider"),yield Bg(a,a._uninitializedComponentsProvider._online)):(at("FirestoreClient","Using default OnlineComponentProvider"),yield Bg(a,new du))),a._onlineComponents})).apply(this,arguments)}function $g(a){return Ql(a).then(t=>t.persistence)}function tl(a){return Ql(a).then(t=>t.localStore)}function J_(a){return th(a).then(t=>t.remoteStore)}function Hg(a){return th(a).then(t=>t.syncEngine)}function Xl(a){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,te.A)(function*(a){const t=yield th(a),r=t.eventManager;return r.onListen=uE.bind(null,t.syncEngine),r.onUnlisten=lE.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=B_.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Dg.bind(null,t.syncEngine),r})).apply(this,arguments)}function yE(a,t,r={}){const o=new rr;return a.asyncQueue.enqueueAndForget((0,te.A)(function*(){return function(d,m,D,N,j){const ie=new el({next:Me=>{m.enqueueAndForget(()=>fg(d,fe));const ct=Me.docs.has(D);!ct&&Me.fromCache?j.reject(new Ot(Xe.UNAVAILABLE,"Failed to get document because the client is offline.")):ct&&Me.fromCache&&N&&"server"===N.source?j.reject(new Ot(Xe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):j.resolve(Me)},error:Me=>j.reject(Me)}),fe=new mg(On(D.path),ie,{includeMetadataChanges:!0,_a:!0});return hg(d,fe)}(yield Xl(a),a.asyncQueue,t,r,o)})),o.promise}function vE(a,t,r={}){const o=new rr;return a.asyncQueue.enqueueAndForget((0,te.A)(function*(){return function(d,m,D,N,j){const ie=new el({next:Me=>{m.enqueueAndForget(()=>fg(d,fe)),Me.fromCache&&"server"===N.source?j.reject(new Ot(Xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):j.resolve(Me)},error:Me=>j.reject(Me)}),fe=new mg(D,ie,{includeMetadataChanges:!0,_a:!0});return hg(d,fe)}(yield Xl(a),a.asyncQueue,t,r,o)})),o.promise}function Pf(a){const t={};return void 0!==a.timeoutSeconds&&(t.timeoutSeconds=a.timeoutSeconds),t}const fc=new Map;function nl(a,t,r){if(!r)throw new Ot(Xe.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${t}.`)}function zg(a,t,r,o){if(!0===t&&!0===o)throw new Ot(Xe.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function Wg(a){if(!Ie.isDocumentKey(a))throw new Ot(Xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Kg(a){if(Ie.isDocumentKey(a))throw new Ot(Xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function qg(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const t=(o=a).constructor?o.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var o;return"function"==typeof a?"a function":bt()}function Vr(a,t){if("_delegate"in a&&(a=a._delegate),!(a instanceof t)){if(t.name===a.constructor.name)throw new Ot(Xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=qg(a);throw new Ot(Xe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return a}function TE(a,t){if(t<=0)throw new Ot(Xe.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${t}.`)}class Mf{constructor(t){var r,o;if(void 0===t.host){if(void 0!==t.ssl)throw new Ot(Xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(r=t.ssl)||void 0===r||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ot(Xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}zg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==t.experimentalAutoDetectLongPolling&&!t.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Pf(null!==(o=t.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new Ot(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new Ot(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new Ot(Xe.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===t.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class rl{constructor(t,r,o,u){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ot(Xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ot(Xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mf(t),void 0!==t.credentials&&(this._authCredentials=function(o){if(!o)return new Pn;switch(o.type){case"firstParty":return new Hr(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Ot(Xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const o=fc.get(r);o&&(at("ComponentProvider","Removing Datastore"),fc.delete(r),o.terminate())}(this),Promise.resolve()}}class ko{constructor(t,r,o){this.converter=r,this._query=o,this.type="query",this.firestore=t}withConverter(t){return new ko(this.firestore,t,this._query)}}class Zi{constructor(t,r,o){this.converter=r,this._key=o,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pc(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Zi(this.firestore,t,this._key)}}class pc extends ko{constructor(t,r,o){super(t,r,On(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Zi(this.firestore,null,new Ie(t))}withConverter(t){return new pc(this.firestore,t,this._path)}}function ty(a,t,...r){if(a=(0,le.Ku)(a),nl("collection","path",t),a instanceof rl){const o=Nn.fromString(t,...r);return Kg(o),new pc(a,null,o)}{if(!(a instanceof Zi||a instanceof pc))throw new Ot(Xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Nn.fromString(t,...r));return Kg(o),new pc(a.firestore,null,o)}}function Rf(a,t,...r){if(a=(0,le.Ku)(a),1===arguments.length&&(t=Ti.newId()),nl("doc","path",t),a instanceof rl){const o=Nn.fromString(t,...r);return Wg(o),new Zi(a,null,new Ie(o))}{if(!(a instanceof Zi||a instanceof pc))throw new Ot(Xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(Nn.fromString(t,...r));return Wg(o),new Zi(a.firestore,a instanceof pc?a.converter:null,new Ie(o))}}function ny(a,t){return a=(0,le.Ku)(a),t=(0,le.Ku)(t),(a instanceof Zi||a instanceof pc)&&(t instanceof Zi||t instanceof pc)&&a.firestore===t.firestore&&a.path===t.path&&a.converter===t.converter}function Of(a,t){return a=(0,le.Ku)(a),t=(0,le.Ku)(t),a instanceof ko&&t instanceof ko&&a.firestore===t.firestore&&Wi(a._query,t._query)&&a.converter===t.converter}class ry{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new hf(this,"async_queue_retry"),this.Eu=()=>{const r=Hl();r&&at("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()};const t=Hl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;const r=Hl();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise(()=>{});const r=new rr;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.uu.push(t),this.Ru()))}Ru(){var t=this;return(0,te.A)(function*(){if(0!==t.uu.length){try{yield t.uu[0](),t.uu.shift(),t.t_.reset()}catch(r){if(!rs(r))throw r;at("AsyncQueue","Operation failed with retryable error: "+r)}t.uu.length>0&&t.t_.Go(()=>t.Ru())}})()}Au(t){const r=this.au.then(()=>(this.Pu=!0,t().catch(o=>{throw this.hu=o,this.Pu=!1,In("INTERNAL UNHANDLED ERROR: ",function(m){let D=m.message||"";return m.stack&&(D=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),D}(o)),o}).then(o=>(this.Pu=!1,o))));return this.au=r,r}enqueueAfterDelay(t,r,o){this.du(),this.Tu.indexOf(t)>-1&&(r=0);const u=xo.createAndSchedule(this,t,r,o,d=>this.Vu(d));return this.lu.push(u),u}du(){this.hu&&bt()}verifyOperationInProgress(){}mu(){var t=this;return(0,te.A)(function*(){let r;do{r=t.au,yield r}while(r!==t.au)})()}fu(t){for(const r of this.lu)if(r.timerId===t)return!0;return!1}gu(t){return this.mu().then(()=>{this.lu.sort((r,o)=>r.targetTimeMs-o.targetTimeMs);for(const r of this.lu)if(r.skipDelay(),"all"!==t&&r.timerId===t)break;return this.mu()})}pu(t){this.Tu.push(t)}Vu(t){const r=this.lu.indexOf(t);this.lu.splice(r,1)}}function Qg(a){return function(r,o){if("object"!=typeof r||null===r)return!1;const u=r;for(const d of["next","error","complete"])if(d in u&&"function"==typeof u[d])return!0;return!1}(a)}class bE{constructor(){this._progressObserver={},this._taskCompletionResolver=new rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,r,o){this._progressObserver={next:t,error:r,complete:o}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,r){return this._taskCompletionResolver.promise.then(t,r)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Ci extends rl{constructor(t,r,o,u){super(t,r,o,u),this.type="firestore",this._queue=new ry,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||il(this),this._firestoreClient.terminate()}}function ds(a){return a._firestoreClient||il(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function il(a){var t,r,o;const u=a._freezeSettings(),d=(N=(null===(t=a._app)||void 0===t?void 0:t.options.appId)||"",new Hs(a._databaseId,N,a._persistenceKey,(ie=u).host,ie.ssl,ie.experimentalForceLongPolling,ie.experimentalAutoDetectLongPolling,Pf(ie.experimentalLongPollingOptions),ie.useFetchStreams));var N,ie;a._firestoreClient=new bf(a._authCredentials,a._appCheckCredentials,a._queue,d),null!==(r=u.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(a._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function Nf(a,t,r){const o=new rr;return a.asyncQueue.enqueue((0,te.A)(function*(){try{yield ql(a,r),yield Bg(a,t),o.resolve()}catch(u){const d=u;if(!mE(d))throw d;Qn("Error enabling indexeddb cache. Falling back to memory cache: "+d),o.reject(d)}})).then(()=>o.promise)}function NE(a){if(a._initialized||a._terminated)throw new Ot(Xe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gc(Ur.fromBase64String(t))}catch(r){throw new Ot(Xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new gc(Ur.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Vc{constructor(...t){for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ot(Xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Re(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class sl{constructor(t){this._methodName=t}}class xf{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Ot(Xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Ot(Xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Wt(this._lat,t._lat)||Wt(this._long,t._long)}}class kf{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(o,u){if(o.length!==u.length)return!1;for(let d=0;d<o.length;++d)if(o[d]!==u[d])return!1;return!0}(this._values,t._values)}}const FE=/^__.*__$/;class VE{constructor(t,r,o){this.data=t,this.fieldMask=r,this.fieldTransforms=o}toMutation(t,r){return null!==this.fieldMask?new gr(t,this.data,this.fieldMask,r,this.fieldTransforms):new En(t,this.data,r,this.fieldTransforms)}}class cy{constructor(t,r,o){this.data=t,this.fieldMask=r,this.fieldTransforms=o}toMutation(t,r){return new gr(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function Ff(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt()}}class Xg{constructor(t,r,o,u,d,m){this.settings=t,this.databaseId=r,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===d&&this.yu(),this.fieldTransforms=d||[],this.fieldMask=m||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new Xg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(t),u=this.Su({path:o,Du:!1});return u.vu(t),u}Cu(t){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(t),u=this.Su({path:o,Du:!1});return u.yu(),u}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return ih(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return void 0!==this.fieldMask.find(r=>t.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>t.isPrefixOf(r.field))}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(0===t.length)throw this.Mu("Document fields must not be empty");if(Ff(this.wu)&&FE.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}}class ZC{constructor(t,r,o){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=o||su(t)}Nu(t,r,o,u=!1){return new Xg({wu:t,methodName:r,Ou:o,path:Re.emptyPath(),Du:!1,xu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lc(a){const t=a._freezeSettings(),r=su(a._databaseId);return new ZC(a._databaseId,!!t.ignoreUndefinedProperties,r)}function Yg(a,t,r,o,u,d={}){const m=a.Nu(d.merge||d.mergeFields?2:0,t,r,u);Lf("Data must be an object, but it was:",m,o);const D=dy(o,m);let N,j;if(d.merge)N=new Wr(m.fieldMask),j=m.fieldTransforms;else if(d.mergeFields){const ie=[];for(const fe of d.mergeFields){const Me=mc(t,fe,r);if(!m.contains(Me))throw new Ot(Xe.INVALID_ARGUMENT,`Field '${Me}' is specified in your field mask but missing from your input data.`);UE(ie,Me)||ie.push(Me)}N=new Wr(ie),j=m.fieldTransforms.filter(fe=>N.covers(fe.field))}else N=null,j=m.fieldTransforms;return new VE(new Kr(D),N,j)}class Vf extends sl{_toFieldTransform(t){if(2!==t.wu)throw t.Mu(1===t.wu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Vf}}function LE(a,t,r){return new Xg({wu:3,Ou:t.settings.Ou,methodName:a._methodName,Du:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class uy extends sl{_toFieldTransform(t){return new Vt(t.path,new lo)}isEqual(t){return t instanceof uy}}class ly extends sl{constructor(t,r){super(t),this.Lu=r}_toFieldTransform(t){const r=LE(this,t,!0),o=this.Lu.map(d=>pu(d,r)),u=new Ro(o);return new Vt(t.path,u)}isEqual(t){return t instanceof ly&&(0,le.bD)(this.Lu,t.Lu)}}class Jg extends sl{constructor(t,r){super(t),this.Lu=r}_toFieldTransform(t){const r=LE(this,t,!0),o=this.Lu.map(d=>pu(d,r)),u=new X(o);return new Vt(t.path,u)}isEqual(t){return t instanceof Jg&&(0,le.bD)(this.Lu,t.Lu)}}class Yl extends sl{constructor(t,r){super(t),this.Bu=r}_toFieldTransform(t){const r=new $(t.serializer,Ms(t.serializer,this.Bu));return new Vt(t.path,r)}isEqual(t){return t instanceof Yl&&this.Bu===t.Bu}}function Jl(a,t,r,o){const u=a.Nu(1,t,r);Lf("Data must be an object, but it was:",u,o);const d=[],m=Kr.empty();Us(o,(N,j)=>{const ie=ca(t,N,r);j=(0,le.Ku)(j);const fe=u.Cu(ie);if(j instanceof Vf)d.push(ie);else{const Me=pu(j,fe);null!=Me&&(d.push(ie),m.set(ie,Me))}});const D=new Wr(d);return new cy(m,D,u.fieldTransforms)}function rh(a,t,r,o,u,d){const m=a.Nu(1,t,r),D=[mc(t,o,r)],N=[u];if(d.length%2!=0)throw new Ot(Xe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Me=0;Me<d.length;Me+=2)D.push(mc(t,d[Me])),N.push(d[Me+1]);const j=[],ie=Kr.empty();for(let Me=D.length-1;Me>=0;--Me)if(!UE(j,D[Me])){const ct=D[Me];let jt=N[Me];jt=(0,le.Ku)(jt);const sn=m.Cu(ct);if(jt instanceof Vf)j.push(ct);else{const Xt=pu(jt,sn);null!=Xt&&(j.push(ct),ie.set(ct,Xt))}}const fe=new Wr(j);return new cy(ie,fe,m.fieldTransforms)}function Zg(a,t,r,o=!1){return pu(r,a.Nu(o?4:3,t))}function pu(a,t){if(hy(a=(0,le.Ku)(a)))return Lf("Unsupported field value:",t,a),dy(a,t);if(a instanceof sl)return function(o,u){if(!Ff(u.wu))throw u.Mu(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Mu(`${o._methodName}() is not currently supported inside arrays`);const d=o._toFieldTransform(u);d&&u.fieldTransforms.push(d)}(a,t),null;if(void 0===a&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),a instanceof Array){if(t.settings.Du&&4!==t.wu)throw t.Mu("Nested arrays are not supported");return function(o,u){const d=[];let m=0;for(const D of o){let N=pu(D,u.Fu(m));null==N&&(N={nullValue:"NULL_VALUE"}),d.push(N),m++}return{arrayValue:{values:d}}}(a,t)}return function(o,u){if(null===(o=(0,le.Ku)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Ms(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const d=nn.fromDate(o);return{timestampValue:ic(u.serializer,d)}}if(o instanceof nn){const d=new nn(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:ic(u.serializer,d)}}if(o instanceof xf)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof gc)return{bytesValue:Qc(u.serializer,o._byteString)};if(o instanceof Zi){const d=u.databaseId,m=o.firestore._databaseId;if(!m.isEqual(d))throw u.Mu(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Mu(o.firestore._databaseId||u.databaseId,o._key.path)}}if(o instanceof kf)return D=u,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(N=>{if("number"!=typeof N)throw D.Mu("VectorValues must only contain numeric values.");return Yi(D.serializer,N)})}}}}};var D;throw u.Mu(`Unsupported field value: ${qg(o)}`)}(a,t)}function dy(a,t){const r={};return Cs(a)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Us(a,(o,u)=>{const d=pu(u,t.bu(o));null!=d&&(r[o]=d)}),{mapValue:{fields:r}}}function hy(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof nn||a instanceof xf||a instanceof gc||a instanceof Zi||a instanceof sl||a instanceof kf)}function Lf(a,t,r){if(!hy(r)||"object"!=typeof(u=r)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=qg(r);throw t.Mu("an object"===o?a+" a custom object":a+" "+o)}var u}function mc(a,t,r){if((t=(0,le.Ku)(t))instanceof Vc)return t._internalPath;if("string"==typeof t)return ca(a,t);throw ih("Field path arguments must be of type string or ",a,!1,void 0,r)}const _a=new RegExp("[~\\*/\\[\\]]");function ca(a,t,r){if(t.search(_a)>=0)throw ih(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new Vc(...t.split("."))._internalPath}catch{throw ih(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function ih(a,t,r,o,u){const d=o&&!o.isEmpty(),m=void 0!==u;let D=`Function ${t}() called with invalid data`;r&&(D+=" (via `toFirestore()`)"),D+=". ";let N="";return(d||m)&&(N+=" (found",d&&(N+=` in field ${o}`),m&&(N+=` in document ${u}`),N+=")"),new Ot(Xe.INVALID_ARGUMENT,D+a+N)}function UE(a,t){return a.some(r=>r.isEqual(t))}class sh{constructor(t,r,o,u,d){this._firestore=t,this._userDataWriter=r,this._key=o,this._document=u,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Zi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new e0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(em("DocumentSnapshot.get",t));if(null!==r)return this._userDataWriter.convertValue(r)}}}class e0 extends sh{data(){return super.data()}}function em(a,t){return"string"==typeof t?ca(a,t):t instanceof Vc?t._internalPath:t._delegate._internalPath}function tm(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new Ot(Xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class Bf extends Uf{}function Ka(a,t,...r){let o=[];t instanceof Uf&&o.push(t),o=o.concat(r),function(d){const m=d.filter(N=>N instanceof Zl).length,D=d.filter(N=>N instanceof ol).length;if(m>1||m>0&&D>0)throw new Ot(Xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)a=u._apply(a);return a}class ol extends Bf{constructor(t,r,o){super(),this._field=t,this._op=r,this._value=o,this.type="where"}static _create(t,r,o){return new ol(t,r,o)}_apply(t){const r=this._parse(t);return my(t._query,r),new ko(t.firestore,t.converter,hi(t._query,r))}_parse(t){const r=Lc(t.firestore);return function(d,m,D,N,j,ie,fe){let Me;if(j.isKeyField()){if("array-contains"===ie||"array-contains-any"===ie)throw new Ot(Xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ie}' queries on documentId().`);if("in"===ie||"not-in"===ie){gy(fe,ie);const ct=[];for(const jt of fe)ct.push(Hf(N,d,jt));Me={arrayValue:{values:ct}}}else Me=Hf(N,d,fe)}else"in"!==ie&&"not-in"!==ie&&"array-contains-any"!==ie||gy(fe,ie),Me=Zg(D,"where",fe,"in"===ie||"not-in"===ie);return O.create(j,ie,Me)}(t._query,0,r,t.firestore._databaseId,this._field,this._op,this._value)}}class Zl extends Uf{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new Zl(t,r)}_parse(t){const r=this._queryConstraints.map(o=>o._parse(t)).filter(o=>o.getFilters().length>0);return 1===r.length?r[0]:ee.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return 0===r.getFilters().length?t:(function(u,d){let m=u;const D=d.getFlattenedFilters();for(const N of D)my(m,N),m=hi(m,N)}(t._query,r),new ko(t.firestore,t.converter,hi(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class jf extends Bf{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new jf(t,r)}_apply(t){const r=function(u,d,m){if(null!==u.startAt)throw new Ot(Xe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new Ot(Xe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xi(d,m)}(t._query,this._field,this._direction);return new ko(t.firestore,t.converter,function(u,d){const m=u.explicitOrderBy.concat([d]);return new Zt(u.path,u.collectionGroup,m,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(t._query,r))}}class al extends Bf{constructor(t,r,o){super(),this.type=t,this._limit=r,this._limitType=o}static _create(t,r,o){return new al(t,r,o)}_apply(t){return new ko(t.firestore,t.converter,bs(t._query,this._limit,this._limitType))}}class ah extends Bf{constructor(t,r,o){super(),this.type=t,this._docOrFields=r,this._inclusive=o}static _create(t,r,o){return new ah(t,r,o)}_apply(t){const r=uh(t,this.type,this._docOrFields,this._inclusive);return new ko(t.firestore,t.converter,(d=r,new Zt((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,d,u.endAt)));var u,d}}class $f extends Bf{constructor(t,r,o){super(),this.type=t,this._docOrFields=r,this._inclusive=o}static _create(t,r,o){return new $f(t,r,o)}_apply(t){const r=uh(t,this.type,this._docOrFields,this._inclusive);return new ko(t.firestore,t.converter,(d=r,new Zt((u=t._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,d)));var u,d}}function uh(a,t,r,o){if(r[0]=(0,le.Ku)(r[0]),r[0]instanceof sh)return function(d,m,D,N,j){if(!N)throw new Ot(Xe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${D}().`);const ie=[];for(const fe of yr(d))if(fe.field.isKeyField())ie.push(Ui(m,N.key));else{const Me=N.data.field(fe.field);if(js(Me))throw new Ot(Xe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+fe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Me){const ct=fe.field.canonicalString();throw new Ot(Xe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ct}' (used as the orderBy) does not exist.`)}ie.push(Me)}return new _s(ie,j)}(a._query,a.firestore._databaseId,t,r[0]._document,o);{const u=Lc(a.firestore);return function(m,D,N,j,ie,fe){const Me=m.explicitOrderBy;if(ie.length>Me.length)throw new Ot(Xe.INVALID_ARGUMENT,`Too many arguments provided to ${j}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ct=[];for(let jt=0;jt<ie.length;jt++){const sn=ie[jt];if(Me[jt].field.isKeyField()){if("string"!=typeof sn)throw new Ot(Xe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${j}(), but got a ${typeof sn}`);if(!Zn(m)&&-1!==sn.indexOf("/"))throw new Ot(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${j}() must be a plain document ID, but '${sn}' contains a slash.`);const Xt=m.path.child(Nn.fromString(sn));if(!Ie.isDocumentKey(Xt))throw new Ot(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${j}() must result in a valid document path, but '${Xt}' is not because it contains an odd number of segments.`);const Bn=new Ie(Xt);ct.push(Ui(D,Bn))}else{const Xt=Zg(N,j,sn);ct.push(Xt)}}return new _s(ct,fe)}(a._query,a.firestore._databaseId,u,t,r,o)}}function Hf(a,t,r){if("string"==typeof(r=(0,le.Ku)(r))){if(""===r)throw new Ot(Xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zn(t)&&-1!==r.indexOf("/"))throw new Ot(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const o=t.path.child(Nn.fromString(r));if(!Ie.isDocumentKey(o))throw new Ot(Xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Ui(a,new Ie(o))}if(r instanceof Zi)return Ui(a,r._key);throw new Ot(Xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qg(r)}.`)}function gy(a,t){if(!Array.isArray(a)||0===a.length)throw new Ot(Xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function my(a,t){const r=function(u,d){for(const m of u)for(const D of m.getFlattenedFilters())if(d.indexOf(D.op)>=0)return D.op;return null}(a.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw new Ot(Xe.INVALID_ARGUMENT,r===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class zf{convertValue(t,r="none"){switch(li(t)){case 0:return null;case 1:return t.booleanValue;case 2:return hn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(Di(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw bt()}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const o={};return Us(t,(u,d)=>{o[u]=this.convertValue(d,r)}),o}convertVectorValue(t){var r,o,u;const d=null===(u=null===(o=null===(r=t.fields)||void 0===r?void 0:r.value.arrayValue)||void 0===o?void 0:o.values)||void 0===u?void 0:u.map(m=>hn(m.doubleValue));return new kf(d)}convertGeoPoint(t){return new xf(hn(t.latitude),hn(t.longitude))}convertArray(t,r){return(t.values||[]).map(o=>this.convertValue(o,r))}convertServerTimestamp(t,r){switch(r){case"previous":const o=$s(t);return null==o?null:this.convertValue(o,r);case"estimate":return this.convertTimestamp(Ts(t));default:return null}}convertTimestamp(t){const r=us(t);return new nn(r.seconds,r.nanos)}convertDocumentKey(t,r){const o=Nn.fromString(t);pt(ia(o));const u=new Vi(o.get(1),o.get(3)),d=new Ie(o.popFirst(5));return u.isEqual(r)||In(`Document ${d} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),d}}function _c(a,t,r){let o;return o=a?r&&(r.merge||r.mergeFields)?a.toFirestore(t,r):a.toFirestore(t):t,o}class _y extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new gc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Zi(this.firestore,null,r)}}class gu{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class yc extends sh{constructor(t,r,o,u,d,m){super(t,r,o,u,m),this._firestore=t,this._firestoreImpl=t,this.metadata=d}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const o=this._document.data.field(em("DocumentSnapshot.get",t));if(null!==o)return this._userDataWriter.convertValue(o,r.serverTimestamps)}}}class ed extends yc{data(t={}){return super.data(t)}}class vc{constructor(t,r,o,u){this._firestore=t,this._userDataWriter=r,this._snapshot=u,this.metadata=new gu(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,r){this._snapshot.docs.forEach(o=>{t.call(r,new ed(this._firestore,this._userDataWriter,o.key,o,new gu(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ot(Xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(u,d){if(u._snapshot.oldDocs.isEmpty()){let m=0;return u._snapshot.docChanges.map(D=>({type:"added",doc:new ed(u._firestore,u._userDataWriter,D.doc.key,D.doc,new gu(u._snapshot.mutatedKeys.has(D.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:m++}))}{let m=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(D=>d||3!==D.type).map(D=>{const N=new ed(u._firestore,u._userDataWriter,D.doc.key,D.doc,new gu(u._snapshot.mutatedKeys.has(D.doc.key),u._snapshot.fromCache),u.query.converter);let j=-1,ie=-1;return 0!==D.type&&(j=m.indexOf(D.doc.key),m=m.delete(D.doc.key)),1!==D.type&&(m=m.add(D.doc),ie=m.indexOf(D.doc.key)),{type:yy(D.type),doc:N,oldIndex:j,newIndex:ie}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function yy(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt()}}function lh(a,t){return a instanceof yc&&t instanceof yc?a._firestore===t._firestore&&a._key.isEqual(t._key)&&(null===a._document?null===t._document:a._document.isEqual(t._document))&&a._converter===t._converter:a instanceof vc&&t instanceof vc&&a._firestore===t._firestore&&Of(a.query,t.query)&&a.metadata.isEqual(t.metadata)&&a._snapshot.isEqual(t._snapshot)}class Uc extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new gc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new Zi(this.firestore,null,r)}}function Ey(a,t,r){a=Vr(a,Zi);const o=Vr(a.firestore,Ci),u=_c(a.converter,t,r);return cl(o,[Yg(Lc(o),"setDoc",a._key,u,null!==a.converter,r).toMutation(a._key,er.none())])}function am(a,t,r,...o){a=Vr(a,Zi);const u=Vr(a.firestore,Ci),d=Lc(u);let m;return m="string"==typeof(t=(0,le.Ku)(t))||t instanceof Vc?rh(d,"updateDoc",a._key,t,r,o):Jl(d,"updateDoc",a._key,t),cl(u,[m.toMutation(a._key,er.exists(!0))])}function Iy(a,...t){var r,o,u;a=(0,le.Ku)(a);let d={includeMetadataChanges:!1,source:"default"},m=0;"object"!=typeof t[m]||Qg(t[m])||(d=t[m],m++);const D={includeMetadataChanges:d.includeMetadataChanges,source:d.source};if(Qg(t[m])){const fe=t[m];t[m]=null===(r=fe.next)||void 0===r?void 0:r.bind(fe),t[m+1]=null===(o=fe.error)||void 0===o?void 0:o.bind(fe),t[m+2]=null===(u=fe.complete)||void 0===u?void 0:u.bind(fe)}let N,j,ie;if(a instanceof Zi)j=Vr(a.firestore,Ci),ie=On(a._key.path),N={next:fe=>{t[m]&&t[m](Er(j,a,fe))},error:t[m+1],complete:t[m+2]};else{const fe=Vr(a,ko);j=Vr(fe.firestore,Ci),ie=fe._query;const Me=new Uc(j);N={next:ct=>{t[m]&&t[m](new vc(j,Me,fe,ct))},error:t[m+1],complete:t[m+2]},tm(a._query)}return function(Me,ct,jt,sn){const Xt=new el(sn),Bn=new mg(ct,Xt,jt);return Me.asyncQueue.enqueueAndForget((0,te.A)(function*(){return hg(yield Xl(Me),Bn)})),()=>{Xt.za(),Me.asyncQueue.enqueueAndForget((0,te.A)(function*(){return fg(yield Xl(Me),Bn)}))}}(ds(j),ie,D,N)}function cl(a,t){return function(o,u){const d=new rr;return o.asyncQueue.enqueueAndForget((0,te.A)(function*(){return function cu(a,t,r){return wf.apply(this,arguments)}(yield Hg(o),u,d)})),d.promise}(ds(a),t)}function Er(a,t,r){const o=r.docs.get(t._key),u=new Uc(a);return new yc(a,u,t._key,o,new gu(r.hasPendingWrites,r.fromCache),t.converter)}const Py={maxAttempts:5};class qf{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Lc(t)}set(t,r,o){this._verifyNotCommitted();const u=mu(t,this._firestore),d=_c(u.converter,r,o),m=Yg(this._dataReader,"WriteBatch.set",u._key,d,null!==u.converter,o);return this._mutations.push(m.toMutation(u._key,er.none())),this}update(t,r,o,...u){this._verifyNotCommitted();const d=mu(t,this._firestore);let m;return m="string"==typeof(r=(0,le.Ku)(r))||r instanceof Vc?rh(this._dataReader,"WriteBatch.update",d._key,r,o,u):Jl(this._dataReader,"WriteBatch.update",d._key,r),this._mutations.push(m.toMutation(d._key,er.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=mu(t,this._firestore);return this._mutations=this._mutations.concat(new Ks(r._key,er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ot(Xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mu(a,t){if((a=(0,le.Ku)(a)).firestore!==t)throw new Ot(Xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class QE extends class{constructor(r,o){this._firestore=r,this._transaction=o,this._dataReader=Lc(r)}get(r){const o=mu(r,this._firestore),u=new _y(this._firestore);return this._transaction.lookup([o._key]).then(d=>{if(!d||1!==d.length)return bt();const m=d[0];if(m.isFoundDocument())return new sh(this._firestore,u,m.key,m,o.converter);if(m.isNoDocument())return new sh(this._firestore,u,o._key,null,o.converter);throw bt()})}set(r,o,u){const d=mu(r,this._firestore),m=_c(d.converter,o,u),D=Yg(this._dataReader,"Transaction.set",d._key,m,null!==d.converter,u);return this._transaction.set(d._key,D),this}update(r,o,u,...d){const m=mu(r,this._firestore);let D;return D="string"==typeof(o=(0,le.Ku)(o))||o instanceof Vc?rh(this._dataReader,"Transaction.update",m._key,o,u,d):Jl(this._dataReader,"Transaction.update",m._key,o),this._transaction.update(m._key,D),this}delete(r){const o=mu(r,this._firestore);return this._transaction.delete(o._key),this}}{constructor(t,r){super(t,r),this._firestore=t}get(t){const r=mu(t,this._firestore),o=new Uc(this._firestore);return super.get(t).then(u=>new yc(this._firestore,o,r._key,u._document,new gu(!1,!1),r.converter))}}function pm(a,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ot("invalid-argument",`Invalid options passed to function ${a}(): You cannot specify both "merge" and "mergeFields".`);return t}function xy(){if(typeof Uint8Array>"u")throw new Ot("unimplemented","Uint8Arrays are not available in this environment.")}function ky(){if(!function gi(){return typeof atob<"u"}())throw new Ot("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,r=!0){an=De.SDK_VERSION,(0,De._registerComponent)(new rt.uA("firestore",(o,{instanceIdentifier:u,options:d})=>{const m=o.getProvider("app").getImmediate(),D=new Ci(new xr(o.getProvider("auth-internal")),new Sr(o.getProvider("app-check-internal")),function(j,ie){if(!Object.prototype.hasOwnProperty.apply(j.options,["projectId"]))throw new Ot(Xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vi(j.options.projectId,ie)}(m,u),m);return d=Object.assign({useFetchStreams:r},d),D._setSettings(d),D},"PUBLIC").setMultipleInstances(!0)),(0,De.registerVersion)(pn,"4.7.1",t),(0,De.registerVersion)(pn,"4.7.1","esm2017")}();class ph{constructor(t){this._delegate=t}static fromBase64String(t){return ky(),new ph(gc.fromBase64String(t))}static fromUint8Array(t){return xy(),new ph(gc.fromUint8Array(t))}toBase64(){return ky(),this._delegate.toBase64()}toUint8Array(){return xy(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ra(a){return function gm(a,t){if("object"!=typeof a||null===a)return!1;const r=a;for(const o of t)if(o in r&&"function"==typeof r[o])return!0;return!1}(a,["next","error","complete"])}class sI{enableIndexedDbPersistence(t,r){return function SE(a,t){NE(a=Vr(a,Ci));const r=ds(a);if(r._uninitializedComponentsProvider)throw new Ot(Xe.FAILED_PRECONDITION,"SDK cache is already specified.");Qn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=a._freezeSettings(),u=new du;return Nf(r,u,new Lg(u,o.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(t){return function PE(a){NE(a=Vr(a,Ci));const t=ds(a);if(t._uninitializedComponentsProvider)throw new Ot(Xe.FAILED_PRECONDITION,"SDK cache is already specified.");Qn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings(),o=new du;return Nf(t,o,new Ug(o,r.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function oy(a){if(a._initialized&&!a._terminated)throw new Ot(Xe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new rr;return a._queue.enqueueAndForgetEvenWhileRestricted((0,te.A)(function*(){try{yield(r=(0,te.A)(function*(u){if(!ai.D())return Promise.resolve();const d=u+"main";yield ai.delete(d)}),function o(u){return r.apply(this,arguments)})(xd(a._databaseId,a._persistenceKey)),t.resolve()}catch(r){t.reject(r)}var r})),t.promise}(t._delegate)}}class Fy{constructor(t,r,o){this._delegate=r,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},t instanceof Vi||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const r=this._delegate._getSettings();!t.merge&&r.host!==t.host&&Qn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},r),t)).merge,this._delegate._setSettings(t)}useEmulator(t,r,o={}){!function DE(a,t,r,o={}){var u;const d=(a=Vr(a,rl))._getSettings(),m=`${t}:${r}`;if("firestore.googleapis.com"!==d.host&&d.host!==m&&Qn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},d),{host:m,ssl:!1})),o.mockUserToken){let D,N;if("string"==typeof o.mockUserToken)D=o.mockUserToken,N=on.MOCK_USER;else{D=(0,le.Fy)(o.mockUserToken,null===(u=a._app)||void 0===u?void 0:u.options.projectId);const j=o.mockUserToken.sub||o.mockUserToken.user_id;if(!j)throw new Ot(Xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");N=new on(j)}a._authCredentials=new vn(new Yn(D,N))}}(this._delegate,t,r,o)}enableNetwork(){return function RE(a){return function fu(a){return a.asyncQueue.enqueue((0,te.A)(function*(){const t=yield $g(a),r=yield J_(a);return t.setNetworkEnabled(!0),function(u){const d=Rt(u);return d.L_.delete(0),Ld(d)}(r)}))}(ds(a=Vr(a,Ci)))}(this._delegate)}disableNetwork(){return function OE(a){return function nh(a){return a.asyncQueue.enqueue((0,te.A)(function*(){const t=yield $g(a),r=yield J_(a);return t.setNetworkEnabled(!1),(o=(0,te.A)(function*(d){const m=Rt(d);m.L_.add(0),yield Ud(m),m.q_.set("Offline")}),function u(d){return o.apply(this,arguments)})(r);var o}))}(ds(a=Vr(a,Ci)))}(this._delegate)}enablePersistence(t){let r=!1,o=!1;return t&&(r=!!t.synchronizeTabs,o=!!t.experimentalForceOwningTab,zg("synchronizeTabs",r,"experimentalForceOwningTab",o)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function ME(a){return function(r){const o=new rr;return r.asyncQueue.enqueueAndForget((0,te.A)(function*(){return function zC(a,t){return Kl.apply(this,arguments)}(yield Hg(r),o)})),o.promise}(ds(a=Vr(a,Ci)))}(this._delegate)}onSnapshotsInSync(t){return function Cy(a,t){return function QC(a,t){const r=new el(t);return a.asyncQueue.enqueueAndForget((0,te.A)(function*(){return u=yield Xl(a),d=r,Rt(u).Y_.add(d),void d.next();var u,d})),()=>{r.za(),a.asyncQueue.enqueueAndForget((0,te.A)(function*(){return u=yield Xl(a),d=r,void Rt(u).Y_.delete(d);var u,d}))}}(ds(a=Vr(a,Ci)),Qg(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ot("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new rd(this,ty(this._delegate,t))}catch(r){throw Fo(r,"collection()","Firestore.collection()")}}doc(t){try{return new ya(this,Rf(this._delegate,t))}catch(r){throw Fo(r,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Yo(this,function AE(a,t){if(a=Vr(a,rl),nl("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ot(Xe.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ko(a,null,(o=t,new Zt(Nn.emptyPath(),o)));var o}(this._delegate,t))}catch(r){throw Fo(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function XE(a,t,r){a=Vr(a,Ci);const o=Object.assign(Object.assign({},Py),r);return function(d){if(d.maxAttempts<1)throw new Ot(Xe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(d,m,D){const N=new rr;return d.asyncQueue.enqueueAndForget((0,te.A)(function*(){const j=yield function Z_(a){return th(a).then(t=>t.datastore)}(d);new Y_(d.asyncQueue,j,D,m,N).ru()})),N.promise}(ds(a),u=>t(new QE(a,u)),o)}(this._delegate,r=>t(new mh(this,r)))}batch(){return ds(this._delegate),new Xf(new qf(this._delegate,t=>cl(this._delegate,t)))}loadBundle(t){return function ay(a,t){const r=ds(a=Vr(a,Ci)),o=new bE;return function ey(a,t,r,o){const u=function(m,D){let N;return N="string"==typeof m?pa().encode(m):m,ie=function(ie,fe){if(ie instanceof Uint8Array)return Zd(ie,void 0);if(ie instanceof ArrayBuffer)return Zd(new Uint8Array(ie),void 0);if(ie instanceof ReadableStream)return ie.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(N),new Q_(ie,D);var ie}(r,su(t));a.asyncQueue.enqueueAndForget((0,te.A)(function*(){!function gE(a,t,r){const o=Rt(a);var u;(u=(0,te.A)(function*(m,D,N){try{const j=yield D.getMetadata();if(yield function(jt,sn){const Xt=Rt(jt),Bn=Fi(sn.createTime);return Xt.persistence.runTransaction("hasNewerBundle","readonly",nr=>Xt.Gr.getBundleMetadata(nr,sn.id)).then(nr=>!!nr&&nr.createTime.compareTo(Bn)>=0)}(m.localStore,j))return yield D.close(),N._completeWith({taskState:"Success",documentsLoaded:(jt=j).totalDocuments,bytesLoaded:jt.totalBytes,totalDocuments:jt.totalDocuments,totalBytes:jt.totalBytes}),Promise.resolve(new Set);N._updateProgress(Gd(j));const ie=new L_(j,m.localStore,D.serializer);let fe=yield D.Ua();for(;fe;){const ct=yield ie.la(fe);ct&&N._updateProgress(ct),fe=yield D.Ua()}const Me=yield ie.complete();return yield Ma(m,Me.Ia,void 0),yield function(jt,sn){const Xt=Rt(jt);return Xt.persistence.runTransaction("Save bundle","readwrite",Bn=>Xt.Gr.saveBundleMetadata(Bn,sn))}(m.localStore,j),N._completeWith(Me.progress),Promise.resolve(Me.Pa)}catch(j){return Qn("SyncEngine",`Loading bundle failed with ${j}`),N._failWith(j),Promise.resolve(new Set)}var jt}),function d(m,D,N){return u.apply(this,arguments)})(o,t,r).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Hg(a),u,o)}))}(r,a._databaseId,t,o),o}(this._delegate,t)}namedQuery(t){return function JC(a,t){return function EE(a,t){return a.asyncQueue.enqueue((0,te.A)(function*(){return function(o,u){const d=Rt(o);return d.persistence.runTransaction("Get named query","readonly",m=>d.Gr.getNamedQuery(m,u))}(yield tl(a),t)}))}(ds(a=Vr(a,Ci)),t).then(r=>r?new ko(a,null,r.query):null)}(this._delegate,t).then(r=>r?new Yo(this,r):null)}}class gh extends zf{constructor(t){super(),this.firestore=t}convertBytes(t){return new ph(new gc(t))}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return ya.forKey(r,this.firestore,null)}}class mh{constructor(t,r){this._firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}get(t){const r=qa(t);return this._delegate.get(r).then(o=>new ul(this._firestore,new yc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,r.converter)))}set(t,r,o){const u=qa(t);return o?(pm("Transaction.set",o),this._delegate.set(u,r,o)):this._delegate.set(u,r),this}update(t,r,o,...u){const d=qa(t);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...u),this}delete(t){const r=qa(t);return this._delegate.delete(r),this}}class Xf{constructor(t){this._delegate=t}set(t,r,o){const u=qa(t);return o?(pm("WriteBatch.set",o),this._delegate.set(u,r,o)):this._delegate.set(u,r),this}update(t,r,o,...u){const d=qa(t);return 2===arguments.length?this._delegate.update(d,r):this._delegate.update(d,r,o,...u),this}delete(t){const r=qa(t);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class nd{constructor(t,r,o){this._firestore=t,this._userDataWriter=r,this._delegate=o}fromFirestore(t,r){const o=new ed(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new va(this._firestore,o),r??{})}toFirestore(t,r){return r?this._delegate.toFirestore(t,r):this._delegate.toFirestore(t)}static getInstance(t,r){const o=nd.INSTANCES;let u=o.get(t);u||(u=new WeakMap,o.set(t,u));let d=u.get(r);return d||(d=new nd(t,new gh(t),r),u.set(r,d)),d}}nd.INSTANCES=new WeakMap;class ya{constructor(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}static forPath(t,r,o){if(t.length%2!=0)throw new Ot("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new ya(r,new Zi(r._delegate,o,new Ie(t)))}static forKey(t,r,o){return new ya(r,new Zi(r._delegate,o,t))}get id(){return this._delegate.id}get parent(){return new rd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new rd(this.firestore,ty(this._delegate,t))}catch(r){throw Fo(r,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,le.Ku)(t))instanceof Zi&&ny(this._delegate,t)}set(t,r){r=pm("DocumentReference.set",r);try{return r?Ey(this._delegate,t,r):Ey(this._delegate,t)}catch(o){throw Fo(o,"setDoc()","DocumentReference.set()")}}update(t,r,...o){try{return 1===arguments.length?am(this._delegate,t):am(this._delegate,t,r,...o)}catch(u){throw Fo(u,"updateDoc()","DocumentReference.update()")}}delete(){return function zE(a){return cl(Vr(a.firestore,Ci),[new Ks(a._key,er.none())])}(this._delegate)}onSnapshot(...t){const r=mm(t),o=_h(t,u=>new ul(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Iy(this._delegate,r,o)}get(t){let r;return r="cache"===t?.source?function sm(a){a=Vr(a,Zi);const t=Vr(a.firestore,Ci),r=ds(t),o=new Uc(t);return function _E(a,t){const r=new rr;return a.asyncQueue.enqueueAndForget((0,te.A)(function*(){return(o=(0,te.A)(function*(d,m,D){try{const N=yield function(ie,fe){const Me=Rt(ie);return Me.persistence.runTransaction("read document","readonly",ct=>Me.localDocuments.getDocument(ct,fe))}(d,m);N.isFoundDocument()?D.resolve(N):N.isNoDocument()?D.resolve(null):D.reject(new Ot(Xe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(N){const j=au(N,`Failed to get document '${m} from cache`);D.reject(j)}}),function u(d,m,D){return o.apply(this,arguments)})(yield tl(a),t,r);var o})),r.promise}(r,a._key).then(u=>new yc(t,o,a._key,u,new gu(null!==u&&u.hasLocalMutations,!0),a.converter))}(this._delegate):"server"===t?.source?function hh(a){a=Vr(a,Zi);const t=Vr(a.firestore,Ci);return yE(ds(t),a._key,{source:"server"}).then(r=>Er(t,a,r))}(this._delegate):function dh(a){a=Vr(a,Zi);const t=Vr(a.firestore,Ci);return yE(ds(t),a._key).then(r=>Er(t,a,r))}(this._delegate),r.then(o=>new ul(this.firestore,new yc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(t){return new ya(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}function Fo(a,t,r){return a.message=a.message.replace(t,r),a}function mm(a){for(const t of a)if("object"==typeof t&&!Ra(t))return t;return{}}function _h(a,t){var r,o;let u;return u=Ra(a[0])?a[0]:Ra(a[1])?a[1]:"function"==typeof a[0]?{next:a[0],error:a[1],complete:a[2]}:{next:a[1],error:a[2],complete:a[3]},{next:d=>{u.next&&u.next(t(d))},error:null===(r=u.error)||void 0===r?void 0:r.bind(u),complete:null===(o=u.complete)||void 0===o?void 0:o.bind(u)}}class ul{constructor(t,r){this._firestore=t,this._delegate=r}get ref(){return new ya(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,r){return this._delegate.get(t,r)}isEqual(t){return lh(this._delegate,t._delegate)}}class va extends ul{data(t){const r=this._delegate.data(t);return this._delegate._converter||function jr(a,t){a||bt()}(void 0!==r),r}}class Yo{constructor(t,r){this.firestore=t,this._delegate=r,this._userDataWriter=new gh(t)}where(t,r,o){try{return new Yo(this.firestore,Ka(this._delegate,function nm(a,t,r){const o=t,u=em("where",a);return ol._create(u,o,r)}(t,r,o)))}catch(u){throw Fo(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,r){try{return new Yo(this.firestore,Ka(this._delegate,function rm(a,t="asc"){const r=t,o=em("orderBy",a);return jf._create(o,r)}(t,r)))}catch(o){throw Fo(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Yo(this.firestore,Ka(this._delegate,function BE(a){return TE("limit",a),al._create("limit",a,"F")}(t)))}catch(r){throw Fo(r,"limit()","Query.limit()")}}limitToLast(t){try{return new Yo(this.firestore,Ka(this._delegate,function jE(a){return TE("limitToLast",a),al._create("limitToLast",a,"L")}(t)))}catch(r){throw Fo(r,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Yo(this.firestore,Ka(this._delegate,function $E(...a){return ah._create("startAt",a,!0)}(...t)))}catch(r){throw Fo(r,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Yo(this.firestore,Ka(this._delegate,function HE(...a){return ah._create("startAfter",a,!1)}(...t)))}catch(r){throw Fo(r,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Yo(this.firestore,Ka(this._delegate,function py(...a){return $f._create("endBefore",a,!1)}(...t)))}catch(r){throw Fo(r,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Yo(this.firestore,Ka(this._delegate,function ch(...a){return $f._create("endAt",a,!0)}(...t)))}catch(r){throw Fo(r,"endAt()","Query.endAt()")}}isEqual(t){return Of(this._delegate,t._delegate)}get(t){let r;return r="cache"===t?.source?function om(a){a=Vr(a,ko);const t=Vr(a.firestore,Ci),r=ds(t),o=new Uc(t);return function KC(a,t){const r=new rr;return a.asyncQueue.enqueueAndForget((0,te.A)(function*(){return(o=(0,te.A)(function*(d,m,D){try{const N=yield Gt(d,m,!0),j=new Eg(m,N.Ts),ie=j.ma(N.documents),fe=j.applyChanges(ie,!1);D.resolve(fe.snapshot)}catch(N){const j=au(N,`Failed to execute query '${m} against cache`);D.reject(j)}}),function u(d,m,D){return o.apply(this,arguments)})(yield tl(a),t,r);var o})),r.promise}(r,a._query).then(u=>new vc(t,o,a,u))}(this._delegate):"server"===t?.source?function Wf(a){a=Vr(a,ko);const t=Vr(a.firestore,Ci),r=ds(t),o=new Uc(t);return vE(r,a._query,{source:"server"}).then(u=>new vc(t,o,a,u))}(this._delegate):function vy(a){a=Vr(a,ko);const t=Vr(a.firestore,Ci),r=ds(t),o=new Uc(t);return tm(a._query),vE(r,a._query).then(u=>new vc(t,o,a,u))}(this._delegate),r.then(o=>new yh(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...t){const r=mm(t),o=_h(t,u=>new yh(this.firestore,new vc(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Iy(this._delegate,r,o)}withConverter(t){return new Yo(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}class oI{constructor(t,r){this._firestore=t,this._delegate=r}get type(){return this._delegate.type}get doc(){return new va(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yh{constructor(t,r){this._firestore=t,this._delegate=r}get query(){return new Yo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new va(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(r=>new oI(this._firestore,r))}forEach(t,r){this._delegate.forEach(o=>{t.call(r,new va(this._firestore,o))})}isEqual(t){return lh(this._delegate,t._delegate)}}class rd extends Yo{constructor(t,r){super(t,r),this.firestore=t,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new ya(this.firestore,t):null}doc(t){try{return new ya(this.firestore,void 0===t?Rf(this._delegate):Rf(this._delegate,t))}catch(r){throw Fo(r,"doc()","CollectionReference.doc()")}}add(t){return function WE(a,t){const r=Vr(a.firestore,Ci),o=Rf(a),u=_c(a.converter,t);return cl(r,[Yg(Lc(a.firestore),"addDoc",o._key,u,null!==a.converter,{}).toMutation(o._key,er.exists(!1))]).then(()=>o)}(this._delegate,t).then(r=>new ya(this.firestore,r))}isEqual(t){return ny(this._delegate,t._delegate)}withConverter(t){return new rd(this.firestore,this._delegate.withConverter(t?nd.getInstance(this.firestore,t):null))}}function qa(a){return Vr(a,Zi)}class Yf{constructor(...t){this._delegate=new Vc(...t)}static documentId(){return new Yf(Re.keyField().canonicalString())}isEqual(t){return(t=(0,le.Ku)(t))instanceof Vc&&this._delegate._internalPath.isEqual(t._internalPath)}}class Oa{constructor(t){this._delegate=t}static serverTimestamp(){const t=function YE(){return new uy("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Oa(t)}static delete(){const t=function My(){return new Vf("deleteField")}();return t._methodName="FieldValue.delete",new Oa(t)}static arrayUnion(...t){const r=function JE(...a){return new ly("arrayUnion",a)}(...t);return r._methodName="FieldValue.arrayUnion",new Oa(r)}static arrayRemove(...t){const r=function ZE(...a){return new Jg("arrayRemove",a)}(...t);return r._methodName="FieldValue.arrayRemove",new Oa(r)}static increment(t){const r=function eI(a){return new Yl("increment",a)}(t);return r._methodName="FieldValue.increment",new Oa(r)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const vh={Firestore:Fy,GeoPoint:xf,Timestamp:nn,Blob:ph,Transaction:mh,WriteBatch:Xf,DocumentReference:ya,DocumentSnapshot:ul,Query:Yo,QueryDocumentSnapshot:va,QuerySnapshot:yh,CollectionReference:rd,FieldPath:Yf,FieldValue:Oa,setLogLevel:function Vy(a){!function jn(a){Dn.setLogLevel(a)}(a)},CACHE_SIZE_UNLIMITED:-1};!function Eh(a){(function _m(a,t){a.INTERNAL.registerComponent(new rt.uA("firestore-compat",r=>{const o=r.getProvider("app-compat").getImmediate(),u=r.getProvider("firestore").getImmediate();return t(o,u)},"PUBLIC").setServiceProps(Object.assign({},vh)))})(a,(t,r)=>new Fy(t,r,new sI)),a.registerVersion("@firebase/firestore-compat","0.3.36")}(Y.A);var Ly=k(7935);function By(a,t){return function Uy(a,t=ge.E){return new Fe.c(r=>{let o;return null!=t?t.schedule(()=>{o=a.onSnapshot({includeMetadataChanges:!0},r)}):o=a.onSnapshot({includeMetadataChanges:!0},r),()=>{o?.()}})}(a,t)}function ym(a,t){return By(a,t).pipe((0,Ve.T)(r=>({payload:r,type:"query"})))}class jy{ref;afs;constructor(t,r){this.ref=t,this.afs=r}set(t,r){return this.ref.set(t,r)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,r){const o=this.ref.collection(t),{ref:u,query:d}=id(o,r);return new vm(u,d,this.afs)}snapshotChanges(){return function aI(a,t){return By(a,t).pipe((0,me.Z)(void 0),Te(),(0,Ve.T)(r=>{const[o,u]=r;return u.exists?o?.exists?{payload:u,type:"modified"}:{payload:u,type:"added"}:{payload:u,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(G.U0)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Ve.T)(({payload:r})=>t.idField?{...r.data(),[t.idField]:r.id}:r.data()))}get(t){return(0,Be.H)(this.ref.get(t)).pipe(G.U0)}}function Ih(a,t){return ym(a,t).pipe((0,me.Z)(void 0),Te(),(0,Ve.T)(r=>{const[o,u]=r,d=u.payload.docChanges(),m=d.map(D=>({type:D.type,payload:D}));return o&&JSON.stringify(o.payload.metadata)!==JSON.stringify(u.payload.metadata)&&u.payload.docs.forEach((D,N)=>{const j=d.find(fe=>fe.doc.ref.isEqual(D.ref)),ie=o?.payload.docs.find(fe=>fe.ref.isEqual(D.ref));j&&JSON.stringify(j.doc.metadata)===JSON.stringify(D.metadata)||!j&&ie&&JSON.stringify(ie.metadata)===JSON.stringify(D.metadata)||m.push({type:"modified",payload:{oldIndex:N,newIndex:N,type:"modified",doc:D}})}),m}))}function Ch(a,t,r){return Ih(a,r).pipe((0,At.S)((o,u)=>function cI(a,t,r){return t.forEach(o=>{r.indexOf(o.type)>-1&&(a=function uI(a,t){switch(t.type){case"added":if(!a[t.newIndex]||!a[t.newIndex].doc.ref.isEqual(t.doc.ref))return $y(a,t.newIndex,0,t);break;case"modified":if(null==a[t.oldIndex]||a[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const r=a.slice();return r.splice(t.oldIndex,1),r.splice(t.newIndex,0,t),r}return $y(a,t.newIndex,1,t)}break;case"removed":if(a[t.oldIndex]&&a[t.oldIndex].doc.ref.isEqual(t.doc.ref))return $y(a,t.oldIndex,1)}return a}(a,o))}),a}(o,u.map(d=>d.payload),t),[]),function ot(a,t=vt.D){return a=a??Jt,(0,$e.N)((r,o)=>{let u,d=!0;r.subscribe((0,He._)(o,m=>{const D=t(m);(d||!a(u,D))&&(d=!1,u=D,o.next(m))}))})}(),(0,Ve.T)(o=>o.map(u=>({type:u.type,payload:u}))))}function $y(a,t,r,...o){const u=a.slice();return u.splice(t,r,...o),u}function Hy(a){return(!a||0===a.length)&&(a=["added","removed","modified"]),a}class vm{ref;query;afs;constructor(t,r,o){this.ref=t,this.query=r,this.afs=o}stateChanges(t){let r=Ih(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(r=r.pipe((0,Ve.T)(o=>o.filter(u=>t.indexOf(u.type)>-1)))),r.pipe((0,me.Z)(void 0),Te(),(0,je.p)(([o,u])=>u.length>0||!o),(0,Ve.T)(([,o])=>o),G.U0)}auditTrail(t){return this.stateChanges(t).pipe((0,At.S)((r,o)=>[...r,...o],[]))}snapshotChanges(t){const r=Hy(t);return Ch(this.query,r,this.afs.schedulers.outsideAngular).pipe(G.U0)}valueChanges(t={}){return ym(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ve.T)(r=>r.payload.docs.map(o=>t.idField?{...o.data(),[t.idField]:o.id}:o.data())),G.U0)}get(t){return(0,Be.H)(this.query.get(t)).pipe(G.U0)}add(t){return this.ref.add(t)}doc(t){return new jy(this.ref.doc(t),this.afs)}}class lI{query;afs;constructor(t,r){this.query=t,this.afs=r}stateChanges(t){return t&&0!==t.length?Ih(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ve.T)(r=>r.filter(o=>t.indexOf(o.type)>-1)),(0,je.p)(r=>r.length>0),G.U0):Ih(this.query,this.afs.schedulers.outsideAngular).pipe(G.U0)}auditTrail(t){return this.stateChanges(t).pipe((0,At.S)((r,o)=>[...r,...o],[]))}snapshotChanges(t){const r=Hy(t);return Ch(this.query,r,this.afs.schedulers.outsideAngular).pipe(G.U0)}valueChanges(t={}){return ym(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ve.T)(o=>o.payload.docs.map(u=>t.idField?{[t.idField]:u.id,...u.data()}:u.data())),G.U0)}get(t){return(0,Be.H)(this.query.get(t)).pipe(G.U0)}}const Gy=new w.nKC("angularfire2.enableFirestorePersistence"),Em=new w.nKC("angularfire2.firestore.persistenceSettings"),Im=new w.nKC("angularfire2.firestore.settings"),zy=new w.nKC("angularfire2.firestore.use-emulator");function id(a,t=(r=>r)){return{query:t(a),ref:a}}let wh=(()=>{class a{schedulers;firestore;persistenceEnabled$;constructor(r,o,u,d,m,D,N,j,ie,fe,Me,ct,jt,sn,Xt,Bn,nr){this.schedulers=N;const Vn=(0,Pe.iB)(r,D,o),ur=ie;fe&&(0,P.gF)(Vn,D,Me,jt,sn,Xt,ct,Bn),[this.firestore,this.persistenceEnabled$]=(0,Pe.BM)(`${Vn.name}.firestore`,"AngularFirestore",Vn.name,()=>{const Lr=D.runOutsideAngular(()=>Vn.firestore());if(d&&Lr.settings(d),ur&&Lr.useEmulator(...ur),u&&!(0,_.Vy)(m)){const br=()=>{try{return(0,Be.H)(Lr.enablePersistence(j||void 0).then(()=>!0,()=>!1))}catch(nt){return typeof console<"u"&&console.warn(nt),(0,_e.of)(!1)}};return[Lr,D.runOutsideAngular(br)]}return[Lr,(0,_e.of)(!1)]},[d,ur,u])}collection(r,o){let u;u="string"==typeof r?this.firestore.collection(r):r;const{ref:d,query:m}=id(u,o),D=this.schedulers.ngZone.run(()=>d);return new vm(D,m,this)}collectionGroup(r,o){const u=o||(m=>m),d=this.firestore.collectionGroup(r);return new lI(u(d),this)}doc(r){let o;o="string"==typeof r?this.firestore.doc(r):r;const u=this.schedulers.ngZone.run(()=>o);return new jy(u,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(o){return new(o||a)(w.KVO(Pe.rx),w.KVO(Pe.uP,8),w.KVO(Gy,8),w.KVO(Im,8),w.KVO(w.Agw),w.KVO(w.SKi),w.KVO(G.u0),w.KVO(Em,8),w.KVO(zy,8),w.KVO(P.DS,8),w.KVO(P.CP,8),w.KVO(P.yy,8),w.KVO(P.ZP,8),w.KVO(P.$z,8),w.KVO(P.AU,8),w.KVO(P.UB,8),w.KVO(G.Jv,8))};static \u0275prov=w.jDH({token:a,factory:a.\u0275fac,providedIn:"any"})}return a})(),Th=(()=>{class a{constructor(){Ly.A.registerVersion("angularfire",G.xv.full,"fst-compat")}static enablePersistence(r){return{ngModule:a,providers:[{provide:Gy,useValue:!0},{provide:Em,useValue:r}]}}static \u0275fac=function(o){return new(o||a)};static \u0275mod=w.$C({type:a});static \u0275inj=w.G2t({providers:[wh]})}return a})();var dI=k(7231),Cm=k(4454),ll=k(9969),Jf=k(6569);function wm(a,t){1&a&&(w.j41(0,"span",13),w.EFF(1,"invalid Email format"),w.k0s())}function hI(a,t){1&a&&(w.j41(0,"span",13),w.EFF(1,"Email is required"),w.k0s())}function l0(a,t){if(1&a){const r=w.RV6();w.j41(0,"div",14)(1,"img",15),w.bIt("click",function(){w.eBV(r);const u=w.XpG();return w.Njj(u.togglePasswordVisibility("password"))}),w.k0s()()}}function d0(a,t){if(1&a){const r=w.RV6();w.j41(0,"div",14)(1,"img",16),w.bIt("click",function(){w.eBV(r);const u=w.XpG();return w.Njj(u.togglePasswordVisibility("password"))}),w.k0s()()}}function fI(a,t){1&a&&(w.j41(0,"span",13),w.EFF(1," Password is required "),w.k0s())}function pI(a,t){if(1&a){const r=w.RV6();w.j41(0,"div",14)(1,"img",15),w.bIt("click",function(){w.eBV(r);const u=w.XpG(2);return w.Njj(u.togglePasswordVisibility("confirmPassword"))}),w.k0s()()}}function h0(a,t){if(1&a){const r=w.RV6();w.j41(0,"div",14)(1,"img",16),w.bIt("click",function(){w.eBV(r);const u=w.XpG(2);return w.Njj(u.togglePasswordVisibility("confirmPassword"))}),w.k0s()()}}function gI(a,t){1&a&&(w.j41(0,"span",13),w.EFF(1," Confirm password is required "),w.k0s())}function f0(a,t){if(1&a&&(w.j41(0,"div",4)(1,"div",7),w.nrm(2,"input",17),w.DNE(3,pI,2,0,"div",9)(4,h0,2,0,"div",9),w.k0s(),w.DNE(5,gI,2,0,"span",6),w.k0s()),2&a){let r;const o=w.XpG();w.R7$(2),w.Y8G("type",o.showConfirmPassword),w.R7$(),w.Y8G("ngIf","password"!==o.showConfirmPassword),w.R7$(),w.Y8G("ngIf","password"===o.showConfirmPassword),w.R7$(),w.Y8G("ngIf",(null==(r=o.form.get("confirmPassword"))?null:r.hasError("required"))&&(null==(r=o.form.get("confirmPassword"))?null:r.touched))}}function mI(a,t){if(1&a){const r=w.RV6();w.j41(0,"button",18),w.bIt("click",function(){w.eBV(r);const u=w.XpG();return w.Njj(u.googleLogin())}),w.EFF(1," Sign in with Google "),w.nrm(2,"img",19),w.k0s()}}function _I(a,t){if(1&a){const r=w.RV6();w.j41(0,"button",18),w.bIt("click",function(){w.eBV(r);const u=w.XpG();return w.Njj(u.emailAndPasswordLogin())}),w.EFF(1," Sign in "),w.k0s()}}function yI(a,t){if(1&a){const r=w.RV6();w.j41(0,"button",18),w.bIt("click",function(){w.eBV(r);const u=w.XpG();return w.Njj(u.registration())}),w.EFF(1," Register "),w.k0s()}}const Tm=a=>{const t=a.get("password")?.value,r=a.get("confirmPassword")?.value;return t&&r&&t!==r?{passwordsMismatch:!0}:null},Dm=[{path:"",component:(()=>{class a{constructor(r,o){this.fb=r,this.logInService=o,this.selected=!0,this.showPassword="password",this.showConfirmPassword="password",this.form=this.fb.group({email:["",[V.k0.required,V.k0.email]],password:["",V.k0.required],confirmPassword:["",V.k0.required]},{validators:Tm})}ngOnInit(){}select(){this.selected=!this.selected,this.clearInputs()}togglePasswordVisibility(r){"password"===r?this.showPassword="password"===this.showPassword?"":"password":"confirmPassword"===r&&(this.showConfirmPassword="password"===this.showConfirmPassword?"":"password")}googleLogin(){this.logInService.loginWithGoogle()}emailAndPasswordLogin(){const r=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.loginWithEmailAndPassword(r,o)}registration(){if(this.form.hasError("passwordsMismatch"))return console.log("Password mismatch detected"),void alert("Password and confirm password do not match");console.log(this.form.get("password")?.getRawValue()),console.log(this.form.get("confirmPassword")?.getRawValue()),console.log("Form is valid, proceeding with registration");let r=this.form.get("email")?.value,o=this.form.get("password")?.value;this.logInService.registration(r,o),this.clearInputs(),this.selected=!0}clearInputs(){this.form.get("email")?.setValue(""),this.form.get("password")?.setValue(""),this.form.get("confirmPassword")?.setValue(""),this.form.get("email")?.markAsUntouched(),this.form.get("password")?.markAsUntouched(),this.form.get("confirmPassword")?.markAsUntouched()}static#e=this.\u0275fac=function(o){return new(o||a)(w.rXU(V.ok),w.rXU(Jf.p))};static#t=this.\u0275cmp=w.VBU({type:a,selectors:[["app-login"]],decls:24,vars:14,consts:[[1,"loginContainer"],[1,"container"],[3,"click","ngClass"],[3,"formGroup"],[1,"inputs"],["formControlName","email","placeholder","Email ex:sabadmin@gmail.com"],["class","error-message",4,"ngIf"],[1,"password-input"],["formControlName","password","placeholder","Password ex:123123123",3,"type"],["class","pass-img",4,"ngIf"],["class","inputs",4,"ngIf"],[3,"click",4,"ngIf"],["routerLink","/products"],[1,"error-message"],[1,"pass-img"],["src","assets/show.png","alt","img",3,"click"],["src","assets/hidden.png","alt","img",3,"click"],["formControlName","confirmPassword","placeholder","Confirm Password",3,"type"],[3,"click"],["src","assets/google.png","alt","img"]],template:function(o,u){if(1&o&&(w.j41(0,"div",0)(1,"div",1)(2,"div")(3,"p",2),w.bIt("click",function(){return u.select()}),w.EFF(4,"LOG IN"),w.k0s(),w.j41(5,"p",2),w.bIt("click",function(){return u.select()}),w.EFF(6,"SIGN UP"),w.k0s()(),w.j41(7,"form",3)(8,"div",4),w.nrm(9,"input",5),w.DNE(10,wm,2,0,"span",6)(11,hI,2,0,"span",6),w.k0s(),w.j41(12,"div",4)(13,"div",7),w.nrm(14,"input",8),w.DNE(15,l0,2,0,"div",9)(16,d0,2,0,"div",9),w.k0s(),w.DNE(17,fI,2,0,"span",6),w.k0s(),w.DNE(18,f0,6,4,"div",10)(19,mI,3,0,"button",11)(20,_I,2,0,"button",11)(21,yI,2,0,"button",11),w.j41(22,"button",12),w.EFF(23,"Guest Mode"),w.k0s()()()()),2&o){let d,m,D;w.R7$(3),w.Y8G("ngClass",u.selected?"selected":""),w.R7$(2),w.Y8G("ngClass",u.selected?"":"selected"),w.R7$(2),w.Y8G("formGroup",u.form)("@toggleState",u.selected?"login":"signup"),w.R7$(3),w.Y8G("ngIf",null==(d=u.form.get("email"))?null:d.hasError("email")),w.R7$(),w.Y8G("ngIf",(null==(m=u.form.get("email"))?null:m.hasError("required"))&&(null==(m=u.form.get("email"))?null:m.touched)),w.R7$(3),w.Y8G("type",u.showPassword),w.R7$(),w.Y8G("ngIf","password"!==u.showPassword),w.R7$(),w.Y8G("ngIf","password"===u.showPassword),w.R7$(),w.Y8G("ngIf",(null==(D=u.form.get("password"))?null:D.hasError("required"))&&(null==(D=u.form.get("password"))?null:D.touched)),w.R7$(),w.Y8G("ngIf",!u.selected),w.R7$(),w.Y8G("ngIf",u.selected),w.R7$(),w.Y8G("ngIf",u.selected),w.R7$(),w.Y8G("ngIf",!u.selected)}},dependencies:[_.YU,_.bT,V.qT,V.me,V.BC,V.cb,V.j4,V.JD,Cm.Wk],styles:[".loginContainer[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:400px;height:400px;background-color:#62dfdf;border-radius:4px;background-image:url(background.05b7e6a7f70c58a5.webp);background-size:cover;transition:transform .3s ease-in-out}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;gap:20px;padding:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{cursor:pointer;font-size:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]{position:relative}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:6px;right:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .password-input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]{width:100%;height:70%;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%] > .inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:200px;height:30px;border-radius:10px}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:none}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#13afc7;color:#fff;display:flex;justify-content:center;align-items:center;cursor:pointer}.loginContainer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%] > form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:5px}.selected[_ngcontent-%COMP%]{color:#fff;border-bottom:1px solid white}.error-message[_ngcontent-%COMP%]{font-size:14px;color:red}.button-disabled[_ngcontent-%COMP%]{background-color:#8ac9d3}"],data:{animation:[(0,ll.hZ)("toggleState",[(0,ll.wk)("login",(0,ll.iF)({transform:"translateX(0)"})),(0,ll.wk)("signup",(0,ll.iF)({transform:"translateY(-10%)"})),(0,ll.kY)("login <=> signup",[(0,ll.i0)("0.4s ease-in-out")])])]},changeDetection:0})}return a})()}];let ep=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=w.$C({type:a});static#n=this.\u0275inj=w.G2t({imports:[Cm.iI.forChild(Dm),Cm.iI]})}return a})();var Wy=k(1626);const Dh={apiKey:"AIzaSyCbQiRFo1MKF_WTEIwSMYg4rFL0CkKdTDI",authDomain:"exercise-app-9b873.firebaseapp.com",databaseURL:"https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app",projectId:"exercise-app-9b873",storageBucket:"exercise-app-9b873.appspot.com",messagingSenderId:"146569895533",appId:"1:146569895533:web:cfb4bca172cc29ee50a964",measurementId:"G-MW950TMVK5"};let Ky=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=w.$C({type:a});static#n=this.\u0275inj=w.G2t({providers:[dI.HF],imports:[_.MD,V.YN,V.X1,Th,P.X8,ep,Wy.q1,Pe.bf.initializeApp(Dh)]})}return a})()},6569:(un,Ye,k)=>{k.d(Ye,{p:()=>me});var _=k(7231),V=k(4412),P=k(6354),w=k(9437),G=k(7673),Pe=k(4438),ge=k(1182),Fe=k(1626),Be=k(4454),_e=k(2906);let me=(()=>{class $e{constructor(Te,Ve,At,vt){this.auth=Te,this.http=Ve,this.router=At,this.cartService=vt,this.loggedUser=new V.t(void 0),this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app/musicShopUsers",this.isAdmin=new V.t(!1)}loginWithGoogle(){this.auth.signInWithPopup(new _.HF).then(Te=>{localStorage.setItem("token",JSON.stringify(Te.user?.uid)),this.findUser(Te.user?.email).subscribe(Ve=>{void 0===Ve?this.addUserTodatabase(Te.user?.email,Te.user?.photoURL):this.findUser(Te.user?.email).subscribe(At=>{this.loggedUser.next(At),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(At))})})},Te=>{alert(Te.mesasage)})}loginWithEmailAndPassword(Te,Ve){this.auth.signInWithEmailAndPassword(Te,Ve).then(At=>{this.findUser(At.user?.email).subscribe(vt=>{this.loggedUser.next(vt),this.router.navigate(["/products"]),localStorage.setItem("currentUser",JSON.stringify(vt))})},At=>{alert(At.message),console.log(At.mesasage)})}registration(Te,Ve){this.auth.createUserWithEmailAndPassword(Te,Ve).then(At=>{this.addUserTodatabase(At.user?.email)},At=>{alert(At.message)})}addUserTodatabase(Te,Ve){this.http.post(`${this.url}.json`,{email:Te,isAdmin:!1,photoUrl:Ve,address:"",likedProducts:[{key:"none",category:"other"}],purchasedProducts:[{email:Te,userId:Te,date:new Date,totalPrice:0,products:[{quantity:-1,product:{key:"unknown",product:{category:"other",model:"none",price:-1,quantity:-1,discount:-1,photoUrl:["none"]}}}]}]}).subscribe(()=>{console.log("User created succesfully")},vt=>{alert(vt.message)})}findUser(Te){return this.http.get(`${this.url}.json`).pipe((0,P.T)(Ve=>{let At,vt="";if(Object.entries(Ve).find(([ot,Jt])=>{Jt.email===Te&&(At=Jt,vt=ot)}),vt&&At)return{user:At,key:vt}}),(0,w.W)(Ve=>(console.error(Ve),(0,G.of)(void 0))))}findUserById(Te){return this.http.get(`${this.url}/${Te}.json`).pipe((0,P.T)(Ve=>Ve.email))}checkIfLoggedIn(){if(localStorage.getItem("currentUser")){let Te=JSON.parse(localStorage.getItem("currentUser"));this.loggedUser.next(Te),localStorage.getItem("cart")&&this.cartService.cart.next(JSON.parse(localStorage.getItem("cart")))}}logOut(){localStorage.removeItem("currentUser"),localStorage.removeItem("cart"),this.loggedUser.next(void 0),this.cartService.cart.next([])}static#e=this.\u0275fac=function(Ve){return new(Ve||$e)(Pe.KVO(ge.DS),Pe.KVO(Fe.Qq),Pe.KVO(Be.Ix),Pe.KVO(_e.m))};static#t=this.\u0275prov=Pe.jDH({token:$e,factory:$e.\u0275fac,providedIn:"root"})}return $e})()},6552:(un,Ye,k)=>{k.d(Ye,{u:()=>G});var _=k(4412),V=k(4438),P=k(6569);function w(Pe,ge){1&Pe&&(V.j41(0,"div",2),V.nrm(1,"div",3),V.j41(2,"p"),V.EFF(3,"Loading..."),V.k0s()())}let G=(()=>{class Pe{constructor(Fe){this.authService=Fe,this.isEditing="",this.loadingSubject=new _.t(!0),this.loading$=this.loadingSubject.asObservable()}ngOnInit(){this.authService.checkIfLoggedIn()}loadingValue(Fe){this.loadingSubject.next(!Fe)}static#e=this.\u0275fac=function(Be){return new(Be||Pe)(V.rXU(P.p))};static#t=this.\u0275cmp=V.VBU({type:Pe,selectors:[["app-product-page"]],decls:11,vars:7,consts:[["class","loading-container",4,"ngIf"],[3,"productsImported","category"],[1,"loading-container"],[1,"loader"]],template:function(Be,_e){1&Be&&(V.nrm(0,"app-header")(1,"app-top-products"),V.j41(2,"h1"),V.EFF(3,"Our Products"),V.k0s(),V.DNE(4,w,4,0,"div",0),V.nI1(5,"async"),V.j41(6,"app-product-page-single-category",1),V.bIt("productsImported",function($e){return _e.loadingValue($e)}),V.k0s(),V.j41(7,"app-product-page-single-category",1),V.bIt("productsImported",function($e){return _e.loadingValue($e)}),V.k0s(),V.j41(8,"app-product-page-single-category",1),V.bIt("productsImported",function($e){return _e.loadingValue($e)}),V.k0s(),V.j41(9,"app-product-page-single-category",1),V.bIt("productsImported",function($e){return _e.loadingValue($e)}),V.k0s(),V.nrm(10,"app-footer")),2&Be&&(V.R7$(4),V.Y8G("ngIf",V.bMT(5,5,_e.loading$)),V.R7$(2),V.Y8G("category","guitar"),V.R7$(),V.Y8G("category","drum"),V.R7$(),V.Y8G("category","piano"),V.R7$(),V.Y8G("category","bass"))},styles:["h1[_ngcontent-%COMP%]{display:flex;justify-content:center}.loading-container[_ngcontent-%COMP%]{margin:0 auto;width:300px;height:300px;display:flex;flex-direction:column;justify-content:center;align-items:center}.loading-container[_ngcontent-%COMP%] > .loader[_ngcontent-%COMP%]{width:60px;aspect-ratio:1;border-radius:50%;border:8px solid lightblue;border-right-color:orange;animation:_ngcontent-%COMP%_l2 1s infinite linear}@keyframes _ngcontent-%COMP%_l2{to{transform:rotate(1turn)}}"],changeDetection:0})}return Pe})()},8569:(un,Ye,k)=>{k.r(Ye),k.d(Ye,{ProductPageModule:()=>te});var _=k(177),V=k(6552),P=k(4454),w=k(4438);const G=[{path:"",component:V.u}];let Pe=(()=>{class De{static#e=this.\u0275fac=function(le){return new(le||De)};static#t=this.\u0275mod=w.$C({type:De});static#n=this.\u0275inj=w.G2t({imports:[P.iI.forChild(G),P.iI]})}return De})();var ge=k(3236),Fe=k(1985),Be=k(9470);let He=(()=>{class De{constructor(st){this.cdr=st,this.index=0,this.imgUrls=["assets/guitar1.jpg","assets/piano.png","assets/drum.avif","assets/bass.webp"],this.img=this.imgUrls[0]}ngOnInit(){this.startTimeChangeInterval()}startTimeChangeInterval(){this.intervalSubscription=function $e(De=0,rt=ge.E){return De<0&&(De=0),function me(De=0,rt,st=ge.b){let le=-1;return null!=rt&&((0,Be.m)(rt)?st=rt:le=rt),new Fe.c(Ge=>{let Je=function _e(De){return De instanceof Date&&!isNaN(De)}(De)?+De-st.now():De;Je<0&&(Je=0);let zt=0;return st.schedule(function(){Ge.closed||(Ge.next(zt++),0<=le?this.schedule(void 0,le):Ge.complete())},Je)})}(De,De,rt)}(4e3).subscribe(()=>{this.changeImgUp(),this.cdr.detectChanges()})}changeImgUp(){3===this.index?(this.index=0,this.img=this.imgUrls[this.index]):(this.img=this.imgUrls[this.index+1],this.index++),this.clearInterval()}changeImgDown(){0===this.index?(this.index=3,this.img=this.imgUrls[this.index]):(this.img=this.imgUrls[this.index-1],this.index--),this.clearInterval()}changeIndex(st){this.index=st,this.img=this.imgUrls[st],this.clearInterval()}clearInterval(){this.intervalSubscription&&this.intervalSubscription?.unsubscribe(),this.startTimeChangeInterval()}static#e=this.\u0275fac=function(le){return new(le||De)(w.rXU(w.gRc))};static#t=this.\u0275cmp=w.VBU({type:De,selectors:[["app-top-products"]],decls:12,vars:5,consts:[[1,"topProducts-container"],[3,"click","ngClass"],[1,"arrows"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"images"],["alt","img",3,"src"]],template:function(le,Ge){1&le&&(w.j41(0,"div",0)(1,"div")(2,"div")(3,"div",1),w.bIt("click",function(){return Ge.changeIndex(0)}),w.k0s(),w.j41(4,"div",1),w.bIt("click",function(){return Ge.changeIndex(1)}),w.k0s(),w.j41(5,"div",1),w.bIt("click",function(){return Ge.changeIndex(2)}),w.k0s(),w.j41(6,"div",1),w.bIt("click",function(){return Ge.changeIndex(3)}),w.k0s()(),w.j41(7,"div",2)(8,"img",3),w.bIt("click",function(){return Ge.changeImgDown()}),w.k0s(),w.j41(9,"img",4),w.bIt("click",function(){return Ge.changeImgUp()}),w.k0s()()(),w.j41(10,"div",5),w.nrm(11,"img",6),w.k0s()()),2&le&&(w.R7$(3),w.Y8G("ngClass",0===Ge.index?"highlight":""),w.R7$(),w.Y8G("ngClass",1===Ge.index?"highlight":""),w.R7$(),w.Y8G("ngClass",2===Ge.index?"highlight":""),w.R7$(),w.Y8G("ngClass",3===Ge.index?"highlight":""),w.R7$(5),w.Y8G("src",Ge.img,w.B4B))},dependencies:[_.YU],styles:[".topProducts-container[_ngcontent-%COMP%]{width:80%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0 auto 100px;gap:20px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;flex-direction:column;align-items:center;gap:10px}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child{display:flex;gap:10px;width:100%}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]:first-child > div[_ngcontent-%COMP%]{width:10px;height:10px;border:.4px solid #ffc107;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]{display:flex}.topProducts-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > .arrows[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;cursor:pointer}.topProducts-container[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:600px;height:300px}.highlight[_ngcontent-%COMP%]{background-color:#ffc107}"],changeDetection:0})}return De})();var Te=k(2152),Ve=k(708),At=k(2739),vt=k(9156),ot=k(6943),Jt=k(5435);function je(De,rt){if(1&De){const st=w.RV6();w.j41(0,"app-card",6),w.bIt("editEvent",function(Ge){w.eBV(st);const Je=w.XpG(2);return w.Njj(Je.onFormSubmitted(Ge))})("removeEvent",function(Ge){w.eBV(st);const Je=w.XpG(2);return w.Njj(Je.removeHandler(Ge))}),w.k0s()}if(2&De){const st=rt.$implicit;w.Y8G("showSpecificContent",!0)("product",st)}}function We(De,rt){if(1&De){const st=w.RV6();w.j41(0,"div",1)(1,"div")(2,"h2"),w.EFF(3),w.k0s(),w.j41(4,"div")(5,"img",2),w.bIt("click",function(){w.eBV(st);const Ge=w.XpG();return w.Njj(Ge.shiftRight())}),w.k0s(),w.j41(6,"img",3),w.bIt("click",function(){w.eBV(st);const Ge=w.XpG();return w.Njj(Ge.shiftLeft())}),w.k0s()()(),w.j41(7,"div",4),w.DNE(8,je,1,2,"app-card",5),w.nI1(9,"slice"),w.k0s()()}if(2&De){const st=w.XpG();w.R7$(3),w.SpI("",st.modifyCatName(),":"),w.R7$(5),w.Y8G("ngForOf",w.brH(9,2,st.productsArray,st.sliceStart,st.SliceEnd))}}let Y=(()=>{class De{constructor(st,le){this.sharedService=st,this.cd=le,this.productsArray=[],this.productsImported=new w.bkB(!0),this.loading=!0,this.sliceStart=0,this.SliceEnd=6,this.length=0}ngOnInit(){this.category&&this.sharedService.getTypeOfProduct(`${this.category}`).subscribe(st=>{this.productsArray=st,this.length=st.length,this.loading=!1,this.productsImported.emit(!0),this.cd.detectChanges()})}shiftLeft(){this.SliceEnd<this.length&&(this.sliceStart+=1,this.SliceEnd+=1)}shiftRight(){this.sliceStart>0&&(this.sliceStart-=1,this.SliceEnd-=1)}onFormSubmitted(st){this.sharedService.editProduct(st.form,st.prodId,st.prodCategory).subscribe(()=>{"guitar"===st.prodCategory&&this.sharedService.updateProductArray(st.form,this.productsArray,st.prodId),this.cd.detectChanges()})}removeHandler(st){this.productsArray=this.productsArray.filter(le=>le.key!==st.prodId),this.cd.detectChanges()}modifyCatName(){return this.category?this.category.charAt(0).toUpperCase()+this.category.substring(1,this.category.length)+"s":this.category}static#e=this.\u0275fac=function(le){return new(le||De)(w.rXU(Jt.m),w.rXU(w.gRc))};static#t=this.\u0275cmp=w.VBU({type:De,selectors:[["app-product-page-single-category"]],inputs:{category:"category"},outputs:{productsImported:"productsImported"},standalone:!0,features:[w.aNF],decls:1,vars:1,consts:[["class","products-container",4,"ngIf"],[1,"products-container"],["src","assets/left.png","alt","img",3,"click"],["src","assets/right.png","alt","img",3,"click"],[1,"products"],[3,"showSpecificContent","product","editEvent","removeEvent",4,"ngFor","ngForOf"],[3,"editEvent","removeEvent","showSpecificContent","product"]],template:function(le,Ge){1&le&&w.DNE(0,We,10,6,"div",0),2&le&&w.Y8G("ngIf",!Ge.loading)},dependencies:[_.MD,_.Sq,_.bT,_.P9,ot.i],styles:[".products-container[_ngcontent-%COMP%]{padding:60px}.products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:100%;display:flex;justify-content:space-between}.products-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:28px;cursor:pointer}.products-container[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{display:flex;gap:20px}"]})}return De})(),te=(()=>{class De{static#e=this.\u0275fac=function(le){return new(le||De)};static#t=this.\u0275mod=w.$C({type:De});static#n=this.\u0275inj=w.G2t({imports:[_.MD,Pe,Ve.n,Te.l,At.K,P.iI,vt.B,ot.i,Y]})}return De})();w.wjB(V.u,[_.bT,Ve.n,Te.l,Y,He],[_.Jj])},1343:(un,Ye,k)=>{k.r(Ye),k.d(Ye,{ProfileModuleModule:()=>Ge});var _=k(177),V=k(4454),P=k(9417),w=k(6697),G=k(4438),Pe=k(6569),ge=k(5435),Fe=k(2152),Be=k(708),_e=k(6943);function me(Je,zt){if(1&Je){const Pt=G.RV6();G.j41(0,"button",11),G.bIt("click",function(){G.eBV(Pt);const Bt=G.XpG();return G.Njj(Bt.addingProd())}),G.EFF(1," Add New Product "),G.k0s()}}function $e(Je,zt){if(1&Je){const Pt=G.RV6();G.j41(0,"div",28)(1,"div"),G.nrm(2,"img",29),G.j41(3,"img",30),G.bIt("click",function(){const Bt=G.eBV(Pt).$implicit,tn=G.XpG(2);return G.Njj(tn.removeImg(Bt))}),G.k0s()()()}if(2&Je){const Pt=zt.$implicit;G.R7$(2),G.Y8G("src",Pt,G.B4B)}}function He(Je,zt){if(1&Je){const Pt=G.RV6();G.j41(0,"form",12)(1,"select",13)(2,"option",14),G.EFF(3,"Guitar"),G.k0s(),G.j41(4,"option",15),G.EFF(5,"Drum"),G.k0s(),G.j41(6,"option",16),G.EFF(7,"Bass"),G.k0s(),G.j41(8,"option",17),G.EFF(9,"Piano"),G.k0s(),G.j41(10,"option",18),G.EFF(11,"Other"),G.k0s()(),G.nrm(12,"input",19)(13,"input",20)(14,"input",21)(15,"input",22)(16,"input",23),G.j41(17,"input",24),G.bIt("change",function(Bt){G.eBV(Pt);const tn=G.XpG();return G.Njj(tn.onFileChange(Bt))}),G.k0s(),G.j41(18,"button",25),G.bIt("click",function(){G.eBV(Pt);const Bt=G.XpG();return G.Njj(Bt.addNewProduct())}),G.EFF(19," add product "),G.k0s(),G.j41(20,"div",26),G.DNE(21,$e,4,1,"div",27),G.k0s()()}if(2&Je){const Pt=G.XpG();G.Y8G("formGroup",Pt.form),G.R7$(18),G.Y8G("disabled",Pt.form.invalid),G.R7$(3),G.Y8G("ngForOf",Pt.photos)}}function Te(Je,zt){if(1&Je){const Pt=G.RV6();G.j41(0,"img",37),G.bIt("click",function(){G.eBV(Pt);const Bt=G.XpG().index,tn=G.XpG();return G.Njj(tn.showMoreItems[Bt]=!tn.showMoreItems[Bt])})("click",function(){G.eBV(Pt);const Bt=G.XpG().index,tn=G.XpG();return G.Njj(tn.changeArrow[Bt]=!tn.changeArrow[Bt])}),G.k0s()}}function Ve(Je,zt){if(1&Je){const Pt=G.RV6();G.j41(0,"img",38),G.bIt("click",function(){G.eBV(Pt);const Bt=G.XpG().index,tn=G.XpG();return G.Njj(tn.showMoreItems[Bt]=!tn.showMoreItems[Bt]&&!tn.changeArrow)})("click",function(){G.eBV(Pt);const Bt=G.XpG().index,tn=G.XpG();return G.Njj(tn.changeArrow[Bt]=!tn.changeArrow[Bt])}),G.k0s()}}function At(Je,zt){if(1&Je&&(G.j41(0,"div",39)(1,"div"),G.nrm(2,"img",29),G.k0s(),G.j41(3,"div",40)(4,"span"),G.EFF(5),G.k0s(),G.j41(6,"span"),G.EFF(7),G.k0s(),G.j41(8,"span"),G.EFF(9),G.k0s(),G.j41(10,"span"),G.EFF(11),G.k0s(),G.j41(12,"span"),G.EFF(13),G.k0s()()()),2&Je){const Pt=zt.$implicit,Kt=G.XpG().$implicit,Bt=G.XpG();G.R7$(2),G.Y8G("src",Pt.product.product.photoUrl[0],G.B4B),G.R7$(3),G.JRh(Kt.email?Kt.email:"unknown"),G.R7$(2),G.JRh(Bt.upperCaseFirstLetter(Pt.product.product.category)),G.R7$(2),G.JRh(Pt.product.product.model),G.R7$(2),G.SpI("Price: ",Pt.product.product.price,"$"),G.R7$(2),G.SpI("Dicsount: ",Pt.product.product.discount,"%")}}function vt(Je,zt){if(1&Je&&(G.j41(0,"div",42)(1,"div"),G.nrm(2,"img",29),G.k0s(),G.j41(3,"div",40)(4,"span"),G.EFF(5),G.k0s(),G.j41(6,"span"),G.EFF(7),G.k0s(),G.j41(8,"span"),G.EFF(9),G.k0s(),G.j41(10,"span"),G.EFF(11),G.k0s(),G.j41(12,"span"),G.EFF(13),G.k0s()()()),2&Je){const Pt=zt.$implicit,Kt=G.XpG(2).$implicit,Bt=G.XpG();G.R7$(2),G.Y8G("src",Pt.product.product.photoUrl[0],G.B4B),G.R7$(3),G.JRh(Kt.email?Kt.email:"unknown"),G.R7$(2),G.JRh(Bt.upperCaseFirstLetter(Pt.product.product.category)),G.R7$(2),G.JRh(Pt.product.product.model),G.R7$(2),G.SpI("Price: ",Pt.product.product.price,""),G.R7$(2),G.SpI("Dicsount: ",Pt.product.product.discount,"%")}}function ot(Je,zt){if(1&Je&&(G.j41(0,"div"),G.DNE(1,vt,14,6,"div",41),G.nI1(2,"slice"),G.k0s()),2&Je){const Pt=G.XpG().$implicit;G.R7$(),G.Y8G("ngForOf",G.i5U(2,1,Pt.products,1))}}function Jt(Je,zt){if(1&Je&&(G.j41(0,"div",31)(1,"div",32)(2,"span"),G.EFF(3),G.k0s(),G.j41(4,"span"),G.EFF(5),G.k0s(),G.j41(6,"div",33),G.DNE(7,Te,1,0,"img",34)(8,Ve,1,0,"img",35),G.k0s(),G.DNE(9,At,14,6,"div",36),G.nI1(10,"slice"),G.DNE(11,ot,3,4,"div",8),G.k0s()()),2&Je){const Pt=zt.$implicit,Kt=zt.index,Bt=G.XpG();G.R7$(3),G.JRh(Bt.convertDate(Pt.date)),G.R7$(2),G.SpI("total price: ",Pt.totalPrice,""),G.R7$(2),G.Y8G("ngIf",!Bt.changeArrow[Kt]),G.R7$(),G.Y8G("ngIf",Bt.changeArrow[Kt]),G.R7$(),G.Y8G("ngForOf",G.brH(10,6,Pt.products,0,1)),G.R7$(2),G.Y8G("ngIf",Bt.showMoreItems[Kt])}}function je(Je,zt){1&Je&&(G.j41(0,"p"),G.EFF(1,"Liked Products:"),G.k0s())}function We(Je,zt){1&Je&&G.nrm(0,"app-card",43),2&Je&&G.Y8G("product",zt.$implicit)}let Y=(()=>{class Je{constructor(Pt,Kt,Bt,tn){this.authService=Pt,this.cd=Kt,this.fb=Bt,this.sharedService=tn,this.photos=[],this.addingProduct=!1,this.showMoreItems=[],this.changeArrow=[],this.form=this.fb.group({category:["",[P.k0.required]],model:["",P.k0.required],price:["",P.k0.required],quantity:["",P.k0.required],discount:["",P.k0.required],description:["",P.k0.required]})}ngOnInit(){this.authService.loggedUser.pipe((0,w.s)(1)).subscribe(Pt=>{this.user=Pt,this.form.patchValue({category:"guitar"})})}update(){if(!this.user?.user.email)throw new Error("no user email found");this.authService.findUser(this.user?.user.email).subscribe(Pt=>{this.user=Pt,this.cd.detectChanges()})}onFileChange(Pt){const Kt=Pt.target.files[0];if(Kt){const Bt=new FileReader;Bt.onload=tn=>{this.photos.push(tn.target?.result),this.cd.detectChanges()},Bt.readAsDataURL(Kt)}}addingProd(){this.addingProduct=!this.addingProduct}removeImg(Pt){const Kt=this.photos.findIndex(Bt=>Bt===Pt);this.photos.splice(Kt,1)}addNewProduct(){const Pt=this.form.get("category")?.getRawValue(),Kt=this.form.get("model")?.getRawValue(),Bt=this.form.get("price")?.getRawValue(),tn=this.form.get("discount")?.getRawValue(),Tn=this.form.get("quantity")?.getRawValue(),xe=this.form.get("description")?.getRawValue();this.sharedService.addProduct(Pt,Kt,Bt,Tn,tn,this.photos,xe).subscribe({next:()=>{this.form.get("category")?.setValue(""),this.form.get("model")?.setValue(""),this.form.get("price")?.setValue(""),this.form.get("discount")?.setValue(""),this.form.get("quantity")?.setValue(""),this.form.get("description")?.setValue(""),this.photos=[],this.cd.detectChanges(),alert("Product was added successfully")},error:Qe=>{console.log("add product error: "+Qe.message)},complete:()=>{console.log("Subscription completed")}})}convertDate(Pt){let Kt=new Date(Pt);return`${Kt.getDate()}/${Kt.getMonth()+1}/${Kt.getFullYear()}`}upperCaseFirstLetter(Pt){return Pt.charAt(0).toUpperCase()+Pt.slice(1)}static#e=this.\u0275fac=function(Kt){return new(Kt||Je)(G.rXU(Pe.p),G.rXU(G.gRc),G.rXU(P.ok),G.rXU(ge.m))};static#t=this.\u0275cmp=G.VBU({type:Je,selectors:[["app-profile"]],decls:25,vars:13,consts:[[1,"container"],[1,"wrapper"],[1,"box"],[1,"info"],[3,"click",4,"ngIf"],[3,"formGroup",4,"ngIf"],["class","purchased-products",4,"ngFor","ngForOf"],[1,"liked-products"],[4,"ngIf"],[1,"products"],["class","single-product",3,"product",4,"ngFor","ngForOf"],[3,"click"],[3,"formGroup"],["formControlName","category"],["value","guitar"],["value","drum"],["value","bass"],["value","piano"],["value","other"],["placeholder","Model","formControlName","model"],["placeholder","Price","formControlName","price"],["placeholder","Discount","formControlName","discount"],["placeholder","Quantity","formControlName","quantity"],["placeholder","Description","formControlName","description"],["type","file",3,"change"],[3,"click","disabled"],[1,"photos"],["class","pht",4,"ngFor","ngForOf"],[1,"pht"],["alt","img",3,"src"],["src","assets/remove.png","alt","img",3,"click"],[1,"purchased-products"],[1,"purchase-wrapper"],[1,"see-more-arrow"],["src","assets/arrow-down.png","alt","img",3,"click",4,"ngIf"],["src","assets/arrow-up.png","alt","img",3,"click",4,"ngIf"],["class","purchase",4,"ngFor","ngForOf"],["src","assets/arrow-down.png","alt","img",3,"click"],["src","assets/arrow-up.png","alt","img",3,"click"],[1,"purchase"],[1,"grid-container"],["class","other-items purchase",4,"ngFor","ngForOf"],[1,"other-items","purchase"],[1,"single-product",3,"product"]],template:function(Kt,Bt){1&Kt&&(G.nrm(0,"app-header"),G.j41(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"p")(6,"span"),G.EFF(7," Email:"),G.k0s(),G.EFF(8),G.k0s(),G.j41(9,"p")(10,"span"),G.EFF(11,"Address:"),G.k0s(),G.EFF(12),G.k0s(),G.j41(13,"button"),G.EFF(14,"Change Password"),G.k0s(),G.DNE(15,me,2,0,"button",4),G.k0s(),G.DNE(16,He,22,3,"form",5),G.k0s(),G.DNE(17,Jt,12,10,"div",6),G.nI1(18,"slice"),G.j41(19,"div",7),G.DNE(20,je,2,0,"p",8),G.j41(21,"div",9),G.DNE(22,We,1,1,"app-card",10),G.nI1(23,"slice"),G.k0s()()()(),G.nrm(24,"app-footer")),2&Kt&&(G.R7$(8),G.SpI(" ",null==Bt.user||null==Bt.user.user?null:Bt.user.user.email,""),G.R7$(4),G.SpI(" ",null==Bt.user||null==Bt.user.user?null:Bt.user.user.address,"Some Adrress"),G.R7$(3),G.Y8G("ngIf",null==Bt.user||null==Bt.user.user?null:Bt.user.user.isAdmin),G.R7$(),G.Y8G("ngIf",(null==Bt.user||null==Bt.user.user?null:Bt.user.user.isAdmin)&&Bt.addingProduct),G.R7$(),G.Y8G("ngForOf",G.i5U(18,7,null==Bt.user||null==Bt.user.user?null:Bt.user.user.purchasedProducts,1)),G.R7$(3),G.Y8G("ngIf",Bt.likedProducts),G.R7$(2),G.Y8G("ngForOf",G.i5U(23,10,Bt.likedProducts,1)))},dependencies:[_.Sq,_.bT,P.qT,P.xH,P.y7,P.me,P.wz,P.BC,P.cb,P.j4,P.JD,Fe.l,Be.n,_e.i,_.P9],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{width:85%;background-color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{padding:8%;display:flex;flex-direction:column;gap:10px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-size:18px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:200px;height:50px;cursor:pointer;--b: 2px;--s: .45em;--color: #373b44;padding:calc(.5em + var(--s)) calc(.9em + var(--s));color:var(--color);--_p: var(--s);background:conic-gradient(from 90deg at var(--b) var(--b),rgba(0,0,0,0) 90deg,var(--color) 0) var(--_p) var(--_p)/calc(100% - var(--b) - 2 * var(--_p)) calc(100% - var(--b) - 2 * var(--_p));transition:.3s linear,color 0s,background-color 0s;outline:var(--b) solid rgba(0,0,0,0);outline-offset:.6em;font-size:16px;border:0;user-select:none;-webkit-user-select:none;touch-action:manipulation}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:focus-visible{--_p: 0px;outline-color:var(--color);outline-offset:.05em}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:active{background:var(--color);color:#fff}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,200px);grid-template-rows:repeat(5,30px);padding-left:8%;margin-bottom:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]{display:flex;gap:12px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:80px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%] > .box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .photos[_ngcontent-%COMP%]   .pht[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]:last-of-type{width:8px;position:absolute;top:3px;right:-6px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%]{padding-left:90px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;padding-top:10px;background-color:#7daecf;width:520px;margin-bottom:30px;position:relative}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]{position:absolute;bottom:-8px;width:35px;height:35px;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%] > .see-more-arrow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;cursor:pointer}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%]{display:flex;gap:3%;border:1px solid rgb(84,145,185);width:500px;height:120px;padding:10px;margin-bottom:36px}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{width:13%;height:100%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   img[_ngcontent-%COMP%]{width:70px;height:100%}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]{display:grid;width:100%;gap:7px;grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(3,1fr);text-align:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{align-self:center}.container[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .purchased-products[_ngcontent-%COMP%] > .purchase-wrapper[_ngcontent-%COMP%]   .purchase[_ngcontent-%COMP%] > .grid-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{justify-self:center;border:none;background-color:#373b44;color:#fff;width:120px;height:20px;cursor:pointer}.liked-products[_ngcontent-%COMP%]{padding:40px}.liked-products[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:20px;font-weight:700;padding:40px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]{display:flex;gap:20px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%]{width:150px;height:380px;background-color:#e6e9f0;position:relative;display:flex;flex-direction:column}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%]:hover > .hover[_ngcontent-%COMP%]{display:block}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%]{display:none;position:absolute;background-color:#3a3afa;top:30%;left:20%;z-index:1}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:140px;height:40px;border:1px solid gray;background-color:#fff;color:#d37a42;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{display:flex;gap:10px;justify-content:center;width:140px;height:40px;color:#fff}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .hover[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type > span[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:3px;cursor:pointer}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]{width:100%;height:260px;position:relative}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%] > .discount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:40px;height:40px;position:absolute;top:20px;right:40px;background-color:#e97171;border-radius:50%;color:#fff}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .img-placeholder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:260px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]{width:100%;height:120px;display:flex;flex-direction:column;justify-content:space-around}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.liked-products[_ngcontent-%COMP%] > .products[_ngcontent-%COMP%]   .single-product[_ngcontent-%COMP%] > .info[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:not(:nth-child(2)){font-size:20px;font-weight:700}"],changeDetection:0})}return Je})();var te=k(6354),De=k(8141);const st=[{path:"",component:Y,canActivate:[(()=>{class Je{constructor(){this.authService=(0,G.WQX)(Pe.p),this.router=(0,G.WQX)(V.Ix)}canActivate(Pt){return this.authService.findUserById(Pt.params.id).pipe((0,te.T)(Bt=>this.authService.loggedUser.value?.user.email===Bt),(0,De.M)(Bt=>{Bt||(alert("Access Denied!"),this.router.navigate(["/products"]))}))}static#e=this.\u0275fac=function(Kt){return new(Kt||Je)};static#t=this.\u0275prov=G.jDH({token:Je,factory:Je.\u0275fac,providedIn:"root"})}return Je})()]}];let le=(()=>{class Je{static#e=this.\u0275fac=function(Kt){return new(Kt||Je)};static#t=this.\u0275mod=G.$C({type:Je});static#n=this.\u0275inj=G.G2t({imports:[V.iI.forChild(st),V.iI]})}return Je})(),Ge=(()=>{class Je{static#e=this.\u0275fac=function(Kt){return new(Kt||Je)};static#t=this.\u0275mod=G.$C({type:Je});static#n=this.\u0275inj=G.G2t({imports:[_.MD,le,P.X1,Fe.l,Be.n,_e.i]})}return Je})()},9156:(un,Ye,k)=>{k.d(Ye,{B:()=>P});var _=k(4438),V=k(9417);let P=(()=>{class w{constructor(Pe){this.fb=Pe,this.formSubmitted=new _.bkB,this.productForm=this.fb.group({model:[""],price:["",V.k0.pattern("^[0-9]*$")],discount:["",V.k0.pattern("^[0-9]*$")],quantity:["",V.k0.pattern("^[0-9]*$")],description:[""]})}onSubmit(){this.formSubmitted.emit(this.productForm.value)}static#e=this.\u0275fac=function(ge){return new(ge||w)(_.rXU(V.ok))};static#t=this.\u0275cmp=_.VBU({type:w,selectors:[["app-reusable-form"]],outputs:{formSubmitted:"formSubmitted"},standalone:!0,features:[_.aNF],decls:8,vars:1,consts:[[1,"edit",3,"formGroup"],["formControlName","model","type","text","placeholder","New model-name"],["formControlName","price","type","text","placeholder","New price"],["formControlName","discount","type","text","placeholder","New Discount"],["formControlName","quantity","type","text","placeholder","New Quantity"],["formControlName","description","placeholder","New Description"],[3,"click"]],template:function(ge,Fe){1&ge&&(_.j41(0,"form",0),_.nrm(1,"input",1)(2,"input",2)(3,"input",3)(4,"input",4)(5,"textarea",5),_.j41(6,"button",6),_.bIt("click",function(){return Fe.onSubmit()}),_.EFF(7,"Confirm Changes"),_.k0s()()),2&ge&&_.Y8G("formGroup",Fe.productForm)},dependencies:[V.X1,V.qT,V.me,V.BC,V.cb,V.j4,V.JD],styles:[".edit[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;gap:6px;margin-top:60px}.edit[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], .edit[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:80%;height:26px}"]})}return w})()},5435:(un,Ye,k)=>{k.d(Ye,{m:()=>me});var _=k(4412),V=k(6354),P=k(7468),w=k(8141),G=k(5558),Pe=k(9437),ge=k(7673),Fe=k(4438),Be=k(1626),_e=k(6569);let me=(()=>{class $e{constructor(Te,Ve){this.http=Te,this.service=Ve,this.detectChanges=new _.t(!1),this.userId=this.service.loggedUser.value?.key,this.url="https://exercise-app-9b873-default-rtdb.europe-west1.firebasedatabase.app"}addProduct(Te,Ve,At,vt,ot,Jt,je){const We={category:Te,model:Ve,price:parseInt(At),quantity:parseInt(vt),discount:parseInt(ot),photoUrl:Jt,description:je};return this.http.post(`${this.url}/products/${Te}.json`,We)}ifDetectChanges(){return this.detectChanges.next(!this.detectChanges.value),this.detectChanges.value}getTypeOfProduct(Te){return this.http.get(`${this.url}/products/${Te}.json`).pipe((0,V.T)(Ve=>{let At=[];return Object.entries(Ve).forEach(([vt,ot])=>At.push({key:vt,product:ot})),At}))}getAllTypeOfProduct(){const Te=this.http.get(`${this.url}/products/guitar.json`),Ve=this.http.get(`${this.url}/products/piano.json`),At=this.http.get(`${this.url}/products/bass.json`),vt=this.http.get(`${this.url}/products/drum.json`);return(0,P.p)([Te,Ve,At,vt]).pipe((0,V.T)(ot=>ot))}likeUnlikeProduct(Te,Ve,At,vt){return this.http.get(`${this.url}/musicShopUsers/${At}.json`).pipe((0,w.M)(ot=>{let Jt=ot;console.log(ot);let je=vt;Jt&&(Jt.likedProducts.find(Y=>Y.key===Te)?(je=ot.likedProducts.filter(Y=>Y.key!==Te),Jt.likedProducts=je):(je=[...ot.likedProducts,{key:Te,category:Ve}],Jt.likedProducts=je)),this.http.patch(`${this.url}/musicShopUsers/${At}.json`,Jt).subscribe()}))}getAllLikedProducts(Te){}getProduct(Te,Ve){return this.http.get(`${this.url}/products/${Ve}/${Te}.json`)}getProductById(Te,Ve){return this.http.get(`${this.url}/products/${Ve}/${Te}.json`)}buyProducts(Te,Ve,At,vt){const ot={userId:vt,email:At,date:new Date,totalPrice:Ve,products:Te},Jt=this.http.get(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`).pipe((0,G.n)(We=>(We.purchasedProducts=[...We.purchasedProducts,ot],this.http.patch(`${this.url}/musicShopUsers/-NuwyYV_Xx3Z9YdV7qOv.json`,We))),(0,Pe.W)(We=>(console.error("Error in adminUpdate$",We),(0,ge.of)(null))));let je=(0,ge.of)(null);vt&&(je=this.http.get(`${this.url}/musicShopUsers/${vt}.json`).pipe((0,G.n)(We=>(We.purchasedProducts=[...We.purchasedProducts,ot],this.http.patch(`${this.url}/musicShopUsers/${vt}.json`,We))),(0,Pe.W)(We=>(console.error("Error in userUpdate$",We),(0,ge.of)(null))))),(0,P.p)([Jt,je]).subscribe()}removeProduct(Te,Ve){return this.http.delete(`${this.url}/products/${Te}/${Ve}.json`)}editProduct(Te,Ve,At){return this.http.get(`${this.url}/products/${At}/${Ve}.json`).pipe((0,w.M)(vt=>{Te.model&&(vt.model=Te.model),Te.price&&(vt.price=Te.price),Te.discount&&(vt.discount=Te.discount),Te.quantity&&(vt.quantity=Te.quantity),Te.description&&(vt.description=Te.description),this.http.patch(`${this.url}/products/${At}/${Ve}.json`,vt).subscribe()}))}updateProductArray(Te,Ve,At){let vt=Ve.findIndex(ot=>ot.key===At);Te.discount&&(Ve[vt].product.discount=Te.discount,Te.model&&(Ve[vt].product.model=Te.model),Te.price&&(Ve[vt].product.price=Te.price),Te.description&&(Ve[vt].product.description=Te.description),Te.quantity&&(Ve[vt].product.quantity=Te.quantity))}getRandomProducts(Te){return this.getTypeOfProduct(Te).pipe((0,V.T)(Ve=>{let At=4;const vt=[],ot=[];for(;0!==At;){if(Ve.length<=At)return Ve;const Jt=Math.floor(Math.random()*Ve.length);ot.includes(Jt)||(vt.push(Ve[Jt]),ot.push(Jt),At--)}return vt}))}getLikedProductsArr(Te){return this.http.get(`${this.url}/musicShopUsers/${Te}.json`).pipe((0,V.T)(Ve=>Ve))}static#e=this.\u0275fac=function(Ve){return new(Ve||$e)(Fe.KVO(Be.Qq),Fe.KVO(_e.p))};static#t=this.\u0275prov=Fe.jDH({token:$e,factory:$e.\u0275fac,providedIn:"root"})}return $e})()},2735:(un,Ye,k)=>{k.r(Ye),k.d(Ye,{SingleProductPageModule:()=>vt});var _=k(177),V=k(4454),P=k(6697),w=k(4438),G=k(5435),Pe=k(6569),ge=k(2906),Fe=k(2152),Be=k(708),_e=k(8964);function me(ot,Jt){if(1&ot&&w.nrm(0,"img",13,0),2&ot){const je=w.XpG();w.Y8G("src",je.images[je.cuurentIndex],w.B4B)}}function $e(ot,Jt){if(1&ot){const je=w.RV6();w.j41(0,"div")(1,"img",14),w.bIt("click",function(){const Y=w.eBV(je).index,te=w.XpG();return w.Njj(te.switchImage(Y))}),w.k0s()()}if(2&ot){const je=Jt.index,We=w.XpG();w.R7$(),w.Y8G("src",We.images[je],w.B4B)}}function He(ot,Jt){if(1&ot&&w.nrm(0,"app-suggestions",15),2&ot){const je=w.XpG();w.Y8G("categoty",null==je.product?null:je.product.category)}}const Ve=[{path:"",component:(()=>{class ot{constructor(je,We,Y,te,De){this.sharedService=je,this.authService=We,this.route=Y,this.cd=te,this.cartService=De,this.cuurentIndex=0,this.minSize=0,this.maxSize=0,this.focusedImg=this.product?.photoUrl?.[0],this.prodId="",this.userId=""}ngOnInit(){this.authService.loggedUser.subscribe(je=>{this.userId=je?.key}),this.authService.checkIfLoggedIn(),this.route.queryParams.subscribe(()=>{this.getProductInfo()})}getProductInfo(){this.route.queryParams.pipe((0,P.s)(1)).subscribe(je=>{this.sharedService.getProductById(je.prod,je.type).pipe((0,P.s)(1)).subscribe(We=>{this.product=We,this.images=We.photoUrl,this.prodId=je.prod,this.cuurentIndex=0,this.focusedImg=this.product?.photoUrl?.[0],this.cd.detectChanges()})})}switchImage(je){this.cuurentIndex=je}checkIfliked(){return!!this.likedProducts&&this.likedProducts.find(je=>je.key=this.prodId)}likeProduct(je){this.sharedService.likeUnlikeProduct(this.prodId,this.product?.category,this.userId,this.likedProducts).subscribe(()=>{this.likedProducts&&(this.likedProducts=this.likedProducts=this.likedProducts?.filter(We=>We.key!==this.prodId)),this.cd.detectChanges()})}scroll(je){"right"===je?this.images.unshift(this.images.pop()):this.images.push(this.images.shift())}addInCart(){this.cartService.cartOperations("add",{key:this.prodId,product:this.product})}static#e=this.\u0275fac=function(We){return new(We||ot)(w.rXU(G.m),w.rXU(Pe.p),w.rXU(V.nX),w.rXU(w.gRc),w.rXU(ge.m))};static#t=this.\u0275cmp=w.VBU({type:ot,selectors:[["app-single-product-page"]],decls:36,vars:10,consts:[["myImage",""],[1,"container"],[1,"content"],[1,"images"],[1,"focused-img"],["alt","img",3,"src",4,"ngIf"],[1,"otherPhotos"],["src","assets/left.png","alt","img",3,"click"],[4,"ngFor","ngForOf"],["src","assets/right.png","alt","img",3,"click"],[1,"description","payment"],[3,"click"],[3,"categoty",4,"ngIf"],["alt","img",3,"src"],["alt","img",3,"click","src"],[3,"categoty"]],template:function(We,Y){1&We&&(w.nrm(0,"app-header"),w.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),w.DNE(5,me,2,1,"img",5),w.k0s(),w.j41(6,"div",6)(7,"div")(8,"img",7),w.bIt("click",function(){return Y.scroll("left")}),w.k0s()(),w.DNE(9,$e,2,1,"div",8),w.nI1(10,"slice"),w.j41(11,"div")(12,"img",9),w.bIt("click",function(){return Y.scroll("right")}),w.k0s()()()(),w.j41(13,"div",10)(14,"div")(15,"p")(16,"span"),w.EFF(17,"Categoty:"),w.k0s(),w.EFF(18),w.k0s()(),w.j41(19,"div")(20,"p")(21,"span"),w.EFF(22,"Model:"),w.k0s(),w.EFF(23),w.k0s(),w.j41(24,"p")(25,"span"),w.EFF(26,"Description: "),w.k0s(),w.EFF(27),w.k0s(),w.j41(28,"p")(29,"span"),w.EFF(30,"Price:"),w.k0s(),w.EFF(31),w.k0s(),w.j41(32,"button",11),w.bIt("click",function(){return Y.addInCart()}),w.EFF(33,"Add to Cart"),w.k0s()()(),w.DNE(34,He,1,1,"app-suggestions",12),w.nrm(35,"app-footer"),w.k0s()()),2&We&&(w.R7$(5),w.Y8G("ngIf",Y.images),w.R7$(4),w.Y8G("ngForOf",w.i5U(10,7,Y.images,0)),w.R7$(9),w.SpI(" ",null==Y.product?null:Y.product.category,""),w.R7$(5),w.SpI(" ",null==Y.product?null:Y.product.model,""),w.R7$(4),w.SpI(" ",null==Y.product?null:Y.product.description," "),w.R7$(4),w.SpI(" ",null==Y.product?null:Y.product.price,"$"),w.R7$(3),w.Y8G("ngIf",null==Y.product?null:Y.product.category))},dependencies:[_.Sq,_.bT,Fe.l,Be.n,_e.x,_.P9],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6%;margin-top:4%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:350px;height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .focused-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px;max-height:350px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]{display:flex;gap:4px;justify-content:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child, .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{background-color:unset}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-child > img[_ngcontent-%COMP%], .container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child > img[_ngcontent-%COMP%]{width:40px;height:40px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background-color:#fff;display:flex;align-items:center}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .images[_ngcontent-%COMP%] > .otherPhotos[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px;max-height:100px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:40px;gap:20px;width:90%}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child   div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:23px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:10px;word-wrap:break-word;font-size:20px}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > p[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .description[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90px;height:30px;border:none;text-align:center;color:#fff;background-color:#7a7af0;border-radius:3px;cursor:pointer}"],changeDetection:0})}return ot})()}];let At=(()=>{class ot{static#e=this.\u0275fac=function(We){return new(We||ot)};static#t=this.\u0275mod=w.$C({type:ot});static#n=this.\u0275inj=w.G2t({imports:[V.iI.forChild(Ve),V.iI]})}return ot})(),vt=(()=>{class ot{static#e=this.\u0275fac=function(We){return new(We||ot)};static#t=this.\u0275mod=w.$C({type:ot});static#n=this.\u0275inj=w.G2t({imports:[_.MD,Fe.l,Be.n,At,_e.x]})}return ot})()},8964:(un,Ye,k)=>{k.d(Ye,{x:()=>Pe});var _=k(6943),V=k(177),P=k(4438),w=k(5435);function G(ge,Fe){1&ge&&P.nrm(0,"app-card",2),2&ge&&P.Y8G("product",Fe.$implicit)}let Pe=(()=>{class ge{constructor(Be,_e){this.service=Be,this.cd=_e,this.categoty="guitar"}ngOnInit(){this.service.getRandomProducts(this.categoty).subscribe(Be=>{this.randomSuggestions=Be,this.cd.detectChanges()})}static#e=this.\u0275fac=function(_e){return new(_e||ge)(P.rXU(w.m),P.rXU(P.gRc))};static#t=this.\u0275cmp=P.VBU({type:ge,selectors:[["app-suggestions"]],inputs:{categoty:"categoty"},standalone:!0,features:[P.aNF],decls:4,vars:1,consts:[[1,"container"],[3,"product",4,"ngFor","ngForOf"],[3,"product"]],template:function(_e,me){1&_e&&(P.j41(0,"h2"),P.EFF(1,"You might also like:"),P.k0s(),P.j41(2,"div",0),P.DNE(3,G,1,1,"app-card",1),P.k0s()),2&_e&&(P.R7$(3),P.Y8G("ngForOf",me.randomSuggestions))},dependencies:[_.i,V.MD,V.Sq],styles:["h2[_ngcontent-%COMP%]{color:#9191de;text-align:center}div[_ngcontent-%COMP%]{padding:3%;display:flex;gap:20px}"],changeDetection:0})}return ge})()},3627:(un,Ye,k)=>{var _=k(345),V=k(4454),P=k(4438);const w=[{path:"",redirectTo:"products",pathMatch:"full"},{path:"login",loadChildren:()=>Promise.resolve().then(k.bind(k,513)).then(re=>re.LoginAndRegistrationModule)},{path:"about-us",loadComponent:()=>k.e(70).then(k.bind(k,9070)).then(re=>re.AboutUsComponent)},{path:"contact",loadComponent:()=>k.e(222).then(k.bind(k,3222)).then(re=>re.ContanctComponent)},{path:"products",loadChildren:()=>Promise.resolve().then(k.bind(k,8569)).then(re=>re.ProductPageModule)},{path:"profile/:id",loadChildren:()=>Promise.resolve().then(k.bind(k,1343)).then(re=>re.ProfileModuleModule)},{path:"single-product/:id",loadChildren:()=>Promise.resolve().then(k.bind(k,2735)).then(re=>re.SingleProductPageModule)},{path:"categoty/:category",loadChildren:()=>k.e(456).then(k.bind(k,9456)).then(re=>re.SinleCategoryPageModuleModule)}];let G=(()=>{class re{static#e=this.\u0275fac=function(L){return new(L||re)};static#t=this.\u0275mod=P.$C({type:re});static#n=this.\u0275inj=P.G2t({imports:[V.iI.forRoot(w,{useHash:!0}),V.iI]})}return re})(),Pe=(()=>{class re{constructor(){this.title="musicShop"}static#e=this.\u0275fac=function(L){return new(L||re)};static#t=this.\u0275cmp=P.VBU({type:re,selectors:[["app-root"]],decls:1,vars:0,template:function(L,Z){1&L&&P.nrm(0,"router-outlet")},dependencies:[V.n3]})}return re})();var ge=k(513),Fe=k(8569),Be=k(1343),_e=k(2735),me=k(2739),$e=k(177),He=k(9969);function Ve(re){return new P.wOt(3e3,!1)}function Xn(re){switch(re.length){case 0:return new He.sf;case 1:return re[0];default:return new He.ui(re)}}function bt(re,C,S=new Map,L=new Map){const Z=[],de=[];let be=-1,Le=null;if(C.forEach(_t=>{const St=_t.get("offset"),$t=St==be,Zt=$t&&Le||new Map;_t.forEach((kn,On)=>{let _n=On,Zn=kn;if("offset"!==On)switch(_n=re.normalizePropertyName(_n,Z),Zn){case He.FX:Zn=S.get(On);break;case He.kp:Zn=L.get(On);break;default:Zn=re.normalizeStyleValue(On,_n,Zn,Z)}Zt.set(_n,Zn)}),$t||de.push(Zt),Le=Zt,be=St}),Z.length)throw function yt(re){return new P.wOt(3502,!1)}();return de}function pt(re,C,S,L){switch(C){case"start":re.onStart(()=>L(S&&jr(S,"start",re)));break;case"done":re.onDone(()=>L(S&&jr(S,"done",re)));break;case"destroy":re.onDestroy(()=>L(S&&jr(S,"destroy",re)))}}function jr(re,C,S){const de=Rt(re.element,re.triggerName,re.fromState,re.toState,C||re.phaseName,S.totalTime??re.totalTime,!!S.disabled),be=re._data;return null!=be&&(de._data=be),de}function Rt(re,C,S,L,Z="",de=0,be){return{element:re,triggerName:C,fromState:S,toState:L,phaseName:Z,totalTime:de,disabled:!!be}}function Xe(re,C,S){let L=re.get(C);return L||re.set(C,L=S),L}function Ot(re){const C=re.indexOf(":");return[re.substring(1,C),re.slice(C+1)]}const rr=typeof document>"u"?null:document.documentElement;function Yn(re){const C=re.parentNode||re.host||null;return C===rr?null:C}let vn=null,xr=!1;function Sr(re,C){for(;C;){if(C===re)return!0;C=Yn(C)}return!1}function hs(re,C,S){if(S)return Array.from(re.querySelectorAll(C));const L=re.querySelector(C);return L?[L]:[]}let Ti=(()=>{class re{validateStyleProperty(S){return function $r(re){vn||(vn=function $i(){return typeof document<"u"?document.body:null}()||{},xr=!!vn.style&&"WebkitAppearance"in vn.style);let C=!0;return vn.style&&!function Pn(re){return"ebkit"==re.substring(1,6)}(re)&&(C=re in vn.style,!C&&xr&&(C="Webkit"+re.charAt(0).toUpperCase()+re.slice(1)in vn.style)),C}(S)}matchesElement(S,L){return!1}containsElement(S,L){return Sr(S,L)}getParentElement(S){return Yn(S)}query(S,L,Z){return hs(S,L,Z)}computeStyle(S,L,Z){return Z||""}animate(S,L,Z,de,be,Le=[],_t){return new He.sf(Z,de)}static#e=this.\u0275fac=function(L){return new(L||re)};static#t=this.\u0275prov=P.jDH({token:re,factory:re.\u0275fac})}return re})();class Wt{static#e=this.NOOP=new Ti}class Un{}const nn=1e3,Nn="ng-enter",oi="ng-leave",Re="ng-trigger",Ie=".ng-trigger",Ee="ng-animating",Ke=".ng-animating";function Mt(re){if("number"==typeof re)return re;const C=re.match(/^(-?[\.\d]+)(m?s)/);return!C||C.length<2?0:he(parseFloat(C[1]),C[2])}function he(re,C){return"s"===C?re*nn:re}function q(re,C,S){return re.hasOwnProperty("duration")?re:function J(re,C,S){let Z,de=0,be="";if("string"==typeof re){const Le=re.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Le)return C.push(Ve()),{duration:0,delay:0,easing:""};Z=he(parseFloat(Le[1]),Le[2]);const _t=Le[3];null!=_t&&(de=he(parseFloat(_t),Le[4]));const St=Le[5];St&&(be=St)}else Z=re;if(!S){let Le=!1,_t=C.length;Z<0&&(C.push(function At(){return new P.wOt(3100,!1)}()),Le=!0),de<0&&(C.push(function vt(){return new P.wOt(3101,!1)}()),Le=!0),Le&&C.splice(_t,0,Ve())}return{duration:Z,delay:de,easing:be}}(re,C,S)}function gt(re,C,S){C.forEach((L,Z)=>{const de=kr(Z);S&&!S.has(Z)&&S.set(Z,re.style[de]),re.style[de]=L})}function xt(re,C){C.forEach((S,L)=>{const Z=kr(L);re.style[Z]=""})}function yn(re){return Array.isArray(re)?1==re.length?re[0]:(0,He.K2)(re):re}const Jn=new RegExp("{{\\s*(.+?)\\s*}}","g");function Rn(re){let C=[];if("string"==typeof re){let S;for(;S=Jn.exec(re);)C.push(S[1]);Jn.lastIndex=0}return C}function Ht(re,C,S){const L=`${re}`,Z=L.replace(Jn,(de,be)=>{let Le=C[be];return null==Le&&(S.push(function Jt(re){return new P.wOt(3003,!1)}()),Le=""),Le.toString()});return Z==L?re:Z}const Ne=/-+([a-z0-9])/g;function kr(re){return re.replace(Ne,(...C)=>C[1].toUpperCase())}function Kn(re,C,S){switch(C.type){case He.If.Trigger:return re.visitTrigger(C,S);case He.If.State:return re.visitState(C,S);case He.If.Transition:return re.visitTransition(C,S);case He.If.Sequence:return re.visitSequence(C,S);case He.If.Group:return re.visitGroup(C,S);case He.If.Animate:return re.visitAnimate(C,S);case He.If.Keyframes:return re.visitKeyframes(C,S);case He.If.Style:return re.visitStyle(C,S);case He.If.Reference:return re.visitReference(C,S);case He.If.AnimateChild:return re.visitAnimateChild(C,S);case He.If.AnimateRef:return re.visitAnimateRef(C,S);case He.If.Query:return re.visitQuery(C,S);case He.If.Stagger:return re.visitStagger(C,S);default:throw function je(re){return new P.wOt(3004,!1)}()}}function rs(re,C){return window.getComputedStyle(re)[C]}const as=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class qi extends Un{normalizePropertyName(C,S){return kr(C)}normalizeStyleValue(C,S,L,Z){let de="";const be=L.toString().trim();if(as.has(S)&&0!==L&&"0"!==L)if("number"==typeof L)de="px";else{const Le=L.match(/^[+-]?[\d\.]+([a-z]*)$/);Le&&0==Le[1].length&&Z.push(function We(re,C){return new P.wOt(3005,!1)}())}return be+de}}const ve="*";const Ut=new Set(["true","1"]),xn=new Set(["false","0"]);function Cn(re,C){const S=Ut.has(re)||xn.has(re),L=Ut.has(C)||xn.has(C);return(Z,de)=>{let be=re==ve||re==Z,Le=C==ve||C==de;return!be&&S&&"boolean"==typeof Z&&(be=Z?Ut.has(re):xn.has(re)),!Le&&L&&"boolean"==typeof de&&(Le=de?Ut.has(C):xn.has(C)),be&&Le}}const ti=new RegExp("s*:selfs*,?","g");function mr(re,C,S,L){return new cs(re).build(C,S,L)}class cs{constructor(C){this._driver=C}build(C,S,L){const Z=new Pr(S);return this._resetContextStyleTimingState(Z),Kn(this,yn(C),Z)}_resetContextStyleTimingState(C){C.currentQuerySelector="",C.collectedStyles=new Map,C.collectedStyles.set("",new Map),C.currentTime=0}visitTrigger(C,S){let L=S.queryCount=0,Z=S.depCount=0;const de=[],be=[];return"@"==C.name.charAt(0)&&S.errors.push(function Y(){return new P.wOt(3006,!1)}()),C.definitions.forEach(Le=>{if(this._resetContextStyleTimingState(S),Le.type==He.If.State){const _t=Le,St=_t.name;St.toString().split(/\s*,\s*/).forEach($t=>{_t.name=$t,de.push(this.visitState(_t,S))}),_t.name=St}else if(Le.type==He.If.Transition){const _t=this.visitTransition(Le,S);L+=_t.queryCount,Z+=_t.depCount,be.push(_t)}else S.errors.push(function te(){return new P.wOt(3007,!1)}())}),{type:He.If.Trigger,name:C.name,states:de,transitions:be,queryCount:L,depCount:Z,options:null}}visitState(C,S){const L=this.visitStyle(C.styles,S),Z=C.options&&C.options.params||null;if(L.containsDynamicStyles){const de=new Set,be=Z||{};L.styles.forEach(Le=>{Le instanceof Map&&Le.forEach(_t=>{Rn(_t).forEach(St=>{be.hasOwnProperty(St)||de.add(St)})})}),de.size&&S.errors.push(function De(re,C){return new P.wOt(3008,!1)}(0,de.values()))}return{type:He.If.State,name:C.name,style:L,options:Z?{params:Z}:null}}visitTransition(C,S){S.queryCount=0,S.depCount=0;const L=Kn(this,yn(C.animation),S),Z=function mt(re,C){const S=[];return"string"==typeof re?re.split(/\s*,\s*/).forEach(L=>function Ze(re,C,S){if(":"==re[0]){const _t=function Yt(re,C){switch(re){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(S,L)=>parseFloat(L)>parseFloat(S);case":decrement":return(S,L)=>parseFloat(L)<parseFloat(S);default:return C.push(function Tn(re){return new P.wOt(3016,!1)}()),"* => *"}}(re,S);if("function"==typeof _t)return void C.push(_t);re=_t}const L=re.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==L||L.length<4)return S.push(function tn(re){return new P.wOt(3015,!1)}()),C;const Z=L[1],de=L[2],be=L[3];C.push(Cn(Z,be)),"<"==de[0]&&(Z!=ve||be!=ve)&&C.push(Cn(be,Z))}(L,S,C)):S.push(re),S}(C.expr,S.errors);return{type:He.If.Transition,matchers:Z,animation:L,queryCount:S.queryCount,depCount:S.depCount,options:_r(C.options)}}visitSequence(C,S){return{type:He.If.Sequence,steps:C.steps.map(L=>Kn(this,L,S)),options:_r(C.options)}}visitGroup(C,S){const L=S.currentTime;let Z=0;const de=C.steps.map(be=>{S.currentTime=L;const Le=Kn(this,be,S);return Z=Math.max(Z,S.currentTime),Le});return S.currentTime=Z,{type:He.If.Group,steps:de,options:_r(C.options)}}visitAnimate(C,S){const L=function cr(re,C){if(re.hasOwnProperty("duration"))return re;if("number"==typeof re)return Yr(q(re,C).duration,0,"");const S=re;if(S.split(/\s+/).some(de=>"{"==de.charAt(0)&&"{"==de.charAt(1))){const de=Yr(0,0,"");return de.dynamic=!0,de.strValue=S,de}const Z=q(S,C);return Yr(Z.duration,Z.delay,Z.easing)}(C.timings,S.errors);S.currentAnimateTimings=L;let Z,de=C.styles?C.styles:(0,He.iF)({});if(de.type==He.If.Keyframes)Z=this.visitKeyframes(de,S);else{let be=C.styles,Le=!1;if(!be){Le=!0;const St={};L.easing&&(St.easing=L.easing),be=(0,He.iF)(St)}S.currentTime+=L.duration+L.delay;const _t=this.visitStyle(be,S);_t.isEmptyStep=Le,Z=_t}return S.currentAnimateTimings=null,{type:He.If.Animate,timings:L,style:Z,options:null}}visitStyle(C,S){const L=this._makeStyleAst(C,S);return this._validateStyleAst(L,S),L}_makeStyleAst(C,S){const L=[],Z=Array.isArray(C.styles)?C.styles:[C.styles];for(let Le of Z)"string"==typeof Le?Le===He.kp?L.push(Le):S.errors.push(new P.wOt(3002,!1)):L.push(new Map(Object.entries(Le)));let de=!1,be=null;return L.forEach(Le=>{if(Le instanceof Map&&(Le.has("easing")&&(be=Le.get("easing"),Le.delete("easing")),!de))for(let _t of Le.values())if(_t.toString().indexOf("{{")>=0){de=!0;break}}),{type:He.If.Style,styles:L,easing:be,offset:C.offset,containsDynamicStyles:de,options:null}}_validateStyleAst(C,S){const L=S.currentAnimateTimings;let Z=S.currentTime,de=S.currentTime;L&&de>0&&(de-=L.duration+L.delay),C.styles.forEach(be=>{"string"!=typeof be&&be.forEach((Le,_t)=>{const St=S.collectedStyles.get(S.currentQuerySelector),$t=St.get(_t);let Zt=!0;$t&&(de!=Z&&de>=$t.startTime&&Z<=$t.endTime&&(S.errors.push(function le(re,C,S,L,Z){return new P.wOt(3010,!1)}()),Zt=!1),de=$t.startTime),Zt&&St.set(_t,{startTime:de,endTime:Z}),S.options&&function Wn(re,C,S){const L=C.params||{},Z=Rn(re);Z.length&&Z.forEach(de=>{L.hasOwnProperty(de)||S.push(function ot(re){return new P.wOt(3001,!1)}())})}(Le,S.options,S.errors)})})}visitKeyframes(C,S){const L={type:He.If.Keyframes,styles:[],options:null};if(!S.currentAnimateTimings)return S.errors.push(function Ge(){return new P.wOt(3011,!1)}()),L;let de=0;const be=[];let Le=!1,_t=!1,St=0;const $t=C.steps.map(wr=>{const Bi=this._makeStyleAst(wr,S);let gs=null!=Bi.offset?Bi.offset:function ui(re){if("string"==typeof re)return null;let C=null;if(Array.isArray(re))re.forEach(S=>{if(S instanceof Map&&S.has("offset")){const L=S;C=parseFloat(L.get("offset")),L.delete("offset")}});else if(re instanceof Map&&re.has("offset")){const S=re;C=parseFloat(S.get("offset")),S.delete("offset")}return C}(Bi.styles),hi=0;return null!=gs&&(de++,hi=Bi.offset=gs),_t=_t||hi<0||hi>1,Le=Le||hi<St,St=hi,be.push(hi),Bi});_t&&S.errors.push(function Je(){return new P.wOt(3012,!1)}()),Le&&S.errors.push(function zt(){return new P.wOt(3200,!1)}());const Zt=C.steps.length;let kn=0;de>0&&de<Zt?S.errors.push(function Pt(){return new P.wOt(3202,!1)}()):0==de&&(kn=1/(Zt-1));const On=Zt-1,_n=S.currentTime,Zn=S.currentAnimateTimings,yr=Zn.duration;return $t.forEach((wr,Bi)=>{const gs=kn>0?Bi==On?1:kn*Bi:be[Bi],hi=gs*yr;S.currentTime=_n+Zn.delay+hi,Zn.duration=hi,this._validateStyleAst(wr,S),wr.offset=gs,L.styles.push(wr)}),L}visitReference(C,S){return{type:He.If.Reference,animation:Kn(this,yn(C.animation),S),options:_r(C.options)}}visitAnimateChild(C,S){return S.depCount++,{type:He.If.AnimateChild,options:_r(C.options)}}visitAnimateRef(C,S){return{type:He.If.AnimateRef,animation:this.visitReference(C.animation,S),options:_r(C.options)}}visitQuery(C,S){const L=S.currentQuerySelector,Z=C.options||{};S.queryCount++,S.currentQuery=C;const[de,be]=function Hi(re){const C=!!re.split(/\s*,\s*/).find(S=>":self"==S);return C&&(re=re.replace(ti,"")),re=re.replace(/@\*/g,Ie).replace(/@\w+/g,S=>Ie+"-"+S.slice(1)).replace(/:animating/g,Ke),[re,C]}(C.selector);S.currentQuerySelector=L.length?L+" "+de:de,Xe(S.collectedStyles,S.currentQuerySelector,new Map);const Le=Kn(this,yn(C.animation),S);return S.currentQuery=null,S.currentQuerySelector=L,{type:He.If.Query,selector:de,limit:Z.limit||0,optional:!!Z.optional,includeSelf:be,animation:Le,originalSelector:C.selector,options:_r(C.options)}}visitStagger(C,S){S.currentQuery||S.errors.push(function Kt(){return new P.wOt(3013,!1)}());const L="full"===C.timings?{duration:0,delay:0,easing:"full"}:q(C.timings,S.errors,!0);return{type:He.If.Stagger,animation:Kn(this,yn(C.animation),S),timings:L,options:null}}}class Pr{constructor(C){this.errors=C,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function _r(re){return re?(re={...re}).params&&(re.params=function Ir(re){return re?{...re}:null}(re.params)):re={},re}function Yr(re,C,S){return{duration:re,delay:C,easing:S}}function ni(re,C,S,L,Z,de,be=null,Le=!1){return{type:1,element:re,keyframes:C,preStyleProps:S,postStyleProps:L,duration:Z,delay:de,totalTime:Z+de,easing:be,subTimeline:Le}}class Jr{constructor(){this._map=new Map}get(C){return this._map.get(C)||[]}append(C,S){let L=this._map.get(C);L||this._map.set(C,L=[]),L.push(...S)}has(C){return this._map.has(C)}clear(){this._map.clear()}}const jo=new RegExp(":enter","g"),ea=new RegExp(":leave","g");function da(re,C,S,L,Z,de=new Map,be=new Map,Le,_t,St=[]){return(new Ia).buildKeyframes(re,C,S,L,Z,de,be,Le,_t,St)}class Ia{buildKeyframes(C,S,L,Z,de,be,Le,_t,St,$t=[]){St=St||new Jr;const Zt=new ar(C,S,St,Z,de,$t,[]);Zt.options=_t;const kn=_t.delay?Mt(_t.delay):0;Zt.currentTimeline.delayNextStep(kn),Zt.currentTimeline.setStyles([be],null,Zt.errors,_t),Kn(this,L,Zt);const On=Zt.timelines.filter(_n=>_n.containsAnimation());if(On.length&&Le.size){let _n;for(let Zn=On.length-1;Zn>=0;Zn--){const yr=On[Zn];if(yr.element===S){_n=yr;break}}_n&&!_n.allowOnlyTimelineStyles()&&_n.setStyles([Le],null,Zt.errors,_t)}return On.length?On.map(_n=>_n.buildKeyframes()):[ni(S,[],[],[],0,kn,"",!1)]}visitTrigger(C,S){}visitState(C,S){}visitTransition(C,S){}visitAnimateChild(C,S){const L=S.subInstructions.get(S.element);if(L){const Z=S.createSubContext(C.options),de=S.currentTimeline.currentTime,be=this._visitSubInstructions(L,Z,Z.options);de!=be&&S.transformIntoNewTimeline(be)}S.previousNode=C}visitAnimateRef(C,S){const L=S.createSubContext(C.options);L.transformIntoNewTimeline(),this._applyAnimationRefDelays([C.options,C.animation.options],S,L),this.visitReference(C.animation,L),S.transformIntoNewTimeline(L.currentTimeline.currentTime),S.previousNode=C}_applyAnimationRefDelays(C,S,L){for(const Z of C){const de=Z?.delay;if(de){const be="number"==typeof de?de:Mt(Ht(de,Z?.params??{},S.errors));L.delayNextStep(be)}}}_visitSubInstructions(C,S,L){let de=S.currentTimeline.currentTime;const be=null!=L.duration?Mt(L.duration):null,Le=null!=L.delay?Mt(L.delay):null;return 0!==be&&C.forEach(_t=>{const St=S.appendInstructionToTimeline(_t,be,Le);de=Math.max(de,St.duration+St.delay)}),de}visitReference(C,S){S.updateOptions(C.options,!0),Kn(this,C.animation,S),S.previousNode=C}visitSequence(C,S){const L=S.subContextCount;let Z=S;const de=C.options;if(de&&(de.params||de.delay)&&(Z=S.createSubContext(de),Z.transformIntoNewTimeline(),null!=de.delay)){Z.previousNode.type==He.If.Style&&(Z.currentTimeline.snapshotCurrentStyles(),Z.previousNode=to);const be=Mt(de.delay);Z.delayNextStep(be)}C.steps.length&&(C.steps.forEach(be=>Kn(this,be,Z)),Z.currentTimeline.applyStylesToKeyframe(),Z.subContextCount>L&&Z.transformIntoNewTimeline()),S.previousNode=C}visitGroup(C,S){const L=[];let Z=S.currentTimeline.currentTime;const de=C.options&&C.options.delay?Mt(C.options.delay):0;C.steps.forEach(be=>{const Le=S.createSubContext(C.options);de&&Le.delayNextStep(de),Kn(this,be,Le),Z=Math.max(Z,Le.currentTimeline.currentTime),L.push(Le.currentTimeline)}),L.forEach(be=>S.currentTimeline.mergeTimelineCollectedStyles(be)),S.transformIntoNewTimeline(Z),S.previousNode=C}_visitTiming(C,S){if(C.dynamic){const L=C.strValue;return q(S.params?Ht(L,S.params,S.errors):L,S.errors)}return{duration:C.duration,delay:C.delay,easing:C.easing}}visitAnimate(C,S){const L=S.currentAnimateTimings=this._visitTiming(C.timings,S),Z=S.currentTimeline;L.delay&&(S.incrementTime(L.delay),Z.snapshotCurrentStyles());const de=C.style;de.type==He.If.Keyframes?this.visitKeyframes(de,S):(S.incrementTime(L.duration),this.visitStyle(de,S),Z.applyStylesToKeyframe()),S.currentAnimateTimings=null,S.previousNode=C}visitStyle(C,S){const L=S.currentTimeline,Z=S.currentAnimateTimings;!Z&&L.hasCurrentStyleProperties()&&L.forwardFrame();const de=Z&&Z.easing||C.easing;C.isEmptyStep?L.applyEmptyStep(de):L.setStyles(C.styles,de,S.errors,S.options),S.previousNode=C}visitKeyframes(C,S){const L=S.currentAnimateTimings,Z=S.currentTimeline.duration,de=L.duration,Le=S.createSubContext().currentTimeline;Le.easing=L.easing,C.styles.forEach(_t=>{Le.forwardTime((_t.offset||0)*de),Le.setStyles(_t.styles,_t.easing,S.errors,S.options),Le.applyStylesToKeyframe()}),S.currentTimeline.mergeTimelineCollectedStyles(Le),S.transformIntoNewTimeline(Z+de),S.previousNode=C}visitQuery(C,S){const L=S.currentTimeline.currentTime,Z=C.options||{},de=Z.delay?Mt(Z.delay):0;de&&(S.previousNode.type===He.If.Style||0==L&&S.currentTimeline.hasCurrentStyleProperties())&&(S.currentTimeline.snapshotCurrentStyles(),S.previousNode=to);let be=L;const Le=S.invokeQuery(C.selector,C.originalSelector,C.limit,C.includeSelf,!!Z.optional,S.errors);S.currentQueryTotal=Le.length;let _t=null;Le.forEach((St,$t)=>{S.currentQueryIndex=$t;const Zt=S.createSubContext(C.options,St);de&&Zt.delayNextStep(de),St===S.element&&(_t=Zt.currentTimeline),Kn(this,C.animation,Zt),Zt.currentTimeline.applyStylesToKeyframe(),be=Math.max(be,Zt.currentTimeline.currentTime)}),S.currentQueryIndex=0,S.currentQueryTotal=0,S.transformIntoNewTimeline(be),_t&&(S.currentTimeline.mergeTimelineCollectedStyles(_t),S.currentTimeline.snapshotCurrentStyles()),S.previousNode=C}visitStagger(C,S){const L=S.parentContext,Z=S.currentTimeline,de=C.timings,be=Math.abs(de.duration),Le=be*(S.currentQueryTotal-1);let _t=be*S.currentQueryIndex;switch(de.duration<0?"reverse":de.easing){case"reverse":_t=Le-_t;break;case"full":_t=L.currentStaggerTime}const $t=S.currentTimeline;_t&&$t.delayNextStep(_t);const Zt=$t.currentTime;Kn(this,C.animation,S),S.previousNode=C,L.currentStaggerTime=Z.currentTime-Zt+(Z.startTime-L.currentTimeline.startTime)}}const to={};class ar{constructor(C,S,L,Z,de,be,Le,_t){this._driver=C,this.element=S,this.subInstructions=L,this._enterClassName=Z,this._leaveClassName=de,this.errors=be,this.timelines=Le,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=to,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_t||new yo(this._driver,S,0),Le.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(C,S){if(!C)return;const L=C;let Z=this.options;null!=L.duration&&(Z.duration=Mt(L.duration)),null!=L.delay&&(Z.delay=Mt(L.delay));const de=L.params;if(de){let be=Z.params;be||(be=this.options.params={}),Object.keys(de).forEach(Le=>{(!S||!be.hasOwnProperty(Le))&&(be[Le]=Ht(de[Le],be,this.errors))})}}_copyOptions(){const C={};if(this.options){const S=this.options.params;if(S){const L=C.params={};Object.keys(S).forEach(Z=>{L[Z]=S[Z]})}}return C}createSubContext(C=null,S,L){const Z=S||this.element,de=new ar(this._driver,Z,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(Z,L||0));return de.previousNode=this.previousNode,de.currentAnimateTimings=this.currentAnimateTimings,de.options=this._copyOptions(),de.updateOptions(C),de.currentQueryIndex=this.currentQueryIndex,de.currentQueryTotal=this.currentQueryTotal,de.parentContext=this,this.subContextCount++,de}transformIntoNewTimeline(C){return this.previousNode=to,this.currentTimeline=this.currentTimeline.fork(this.element,C),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(C,S,L){const Z={duration:S??C.duration,delay:this.currentTimeline.currentTime+(L??0)+C.delay,easing:""},de=new no(this._driver,C.element,C.keyframes,C.preStyleProps,C.postStyleProps,Z,C.stretchStartingKeyframe);return this.timelines.push(de),Z}incrementTime(C){this.currentTimeline.forwardTime(this.currentTimeline.duration+C)}delayNextStep(C){C>0&&this.currentTimeline.delayNextStep(C)}invokeQuery(C,S,L,Z,de,be){let Le=[];if(Z&&Le.push(this.element),C.length>0){C=(C=C.replace(jo,"."+this._enterClassName)).replace(ea,"."+this._leaveClassName);let St=this._driver.query(this.element,C,1!=L);0!==L&&(St=L<0?St.slice(St.length+L,St.length):St.slice(0,L)),Le.push(...St)}return!de&&0==Le.length&&be.push(function Bt(re){return new P.wOt(3014,!1)}()),Le}}class yo{constructor(C,S,L,Z){this._driver=C,this.element=S,this.startTime=L,this._elementTimelineStylesLookup=Z,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(S),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(S,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(C){const S=1===this._keyframes.size&&this._pendingStyles.size;this.duration||S?(this.forwardTime(this.currentTime+C),S&&this.snapshotCurrentStyles()):this.startTime+=C}fork(C,S){return this.applyStylesToKeyframe(),new yo(this._driver,C,S||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(C){this.applyStylesToKeyframe(),this.duration=C,this._loadKeyframe()}_updateStyle(C,S){this._localTimelineStyles.set(C,S),this._globalTimelineStyles.set(C,S),this._styleSummary.set(C,{time:this.currentTime,value:S})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(C){C&&this._previousKeyframe.set("easing",C);for(let[S,L]of this._globalTimelineStyles)this._backFill.set(S,L||He.kp),this._currentKeyframe.set(S,He.kp);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(C,S,L,Z){S&&this._previousKeyframe.set("easing",S);const de=Z&&Z.params||{},be=function $o(re,C){const S=new Map;let L;return re.forEach(Z=>{if("*"===Z){L??=C.keys();for(let de of L)S.set(de,He.kp)}else for(let[de,be]of Z)S.set(de,be)}),S}(C,this._globalTimelineStyles);for(let[Le,_t]of be){const St=Ht(_t,de,L);this._pendingStyles.set(Le,St),this._localTimelineStyles.has(Le)||this._backFill.set(Le,this._globalTimelineStyles.get(Le)??He.kp),this._updateStyle(Le,St)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((C,S)=>{this._currentKeyframe.set(S,C)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((C,S)=>{this._currentKeyframe.has(S)||this._currentKeyframe.set(S,C)}))}snapshotCurrentStyles(){for(let[C,S]of this._localTimelineStyles)this._pendingStyles.set(C,S),this._updateStyle(C,S)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const C=[];for(let S in this._currentKeyframe)C.push(S);return C}mergeTimelineCollectedStyles(C){C._styleSummary.forEach((S,L)=>{const Z=this._styleSummary.get(L);(!Z||S.time>Z.time)&&this._updateStyle(L,S.value)})}buildKeyframes(){this.applyStylesToKeyframe();const C=new Set,S=new Set,L=1===this._keyframes.size&&0===this.duration;let Z=[];this._keyframes.forEach((Le,_t)=>{const St=new Map([...this._backFill,...Le]);St.forEach(($t,Zt)=>{$t===He.FX?C.add(Zt):$t===He.kp&&S.add(Zt)}),L||St.set("offset",_t/this.duration),Z.push(St)});const de=[...C.values()],be=[...S.values()];if(L){const Le=Z[0],_t=new Map(Le);Le.set("offset",0),_t.set("offset",1),Z=[Le,_t]}return ni(this.element,Z,de,be,this.duration,this.startTime,this.easing,!1)}}class no extends yo{constructor(C,S,L,Z,de,be,Le=!1){super(C,S,be.delay),this.keyframes=L,this.preStyleProps=Z,this.postStyleProps=de,this._stretchStartingKeyframe=Le,this.timings={duration:be.duration,delay:be.delay,easing:be.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let C=this.keyframes,{delay:S,duration:L,easing:Z}=this.timings;if(this._stretchStartingKeyframe&&S){const de=[],be=L+S,Le=S/be,_t=new Map(C[0]);_t.set("offset",0),de.push(_t);const St=new Map(C[0]);St.set("offset",Cr(Le)),de.push(St);const $t=C.length-1;for(let Zt=1;Zt<=$t;Zt++){let kn=new Map(C[Zt]);const On=kn.get("offset");kn.set("offset",Cr((S+On*L)/be)),de.push(kn)}L=be,S=0,Z="",C=de}return ni(this.element,C,this.preStyleProps,this.postStyleProps,L,S,Z,!0)}}function Cr(re,C=3){const S=Math.pow(10,C-1);return Math.round(re*S)/S}function Us(re,C,S,L,Z,de,be,Le,_t,St,$t,Zt,kn){return{type:0,element:re,triggerName:C,isRemovalTransition:Z,fromState:S,fromStyles:de,toState:L,toStyles:be,timelines:Le,queriedElements:_t,preStyleProps:St,postStyleProps:$t,totalTime:Zt,errors:kn}}const Ho={};class Cs{constructor(C,S,L){this._triggerName=C,this.ast=S,this._stateStyles=L}match(C,S,L,Z){return function ws(re,C,S,L,Z){return re.some(de=>de(C,S,L,Z))}(this.ast.matchers,C,S,L,Z)}buildStyles(C,S,L){let Z=this._stateStyles.get("*");return void 0!==C&&(Z=this._stateStyles.get(C?.toString())||Z),Z?Z.buildStyles(S,L):new Map}build(C,S,L,Z,de,be,Le,_t,St,$t){const Zt=[],kn=this.ast.options&&this.ast.options.params||Ho,_n=this.buildStyles(L,Le&&Le.params||Ho,Zt),Zn=_t&&_t.params||Ho,yr=this.buildStyles(Z,Zn,Zt),wr=new Set,Bi=new Map,gs=new Map,hi="void"===Z,bs={params:Oi(Zn,kn),delay:this.ast.options?.delay},Wi=$t?[]:da(C,S,this.ast.animation,de,be,_n,yr,bs,St,Zt);let Ki=0;return Wi.forEach(_i=>{Ki=Math.max(_i.duration+_i.delay,Ki)}),Zt.length?Us(S,this._triggerName,L,Z,hi,_n,yr,[],[],Bi,gs,Ki,Zt):(Wi.forEach(_i=>{const co=_i.element,uo=Xe(Bi,co,new Set);_i.preStyleProps.forEach(Mo=>uo.add(Mo));const Za=Xe(gs,co,new Set);_i.postStyleProps.forEach(Mo=>Za.add(Mo)),co!==S&&wr.add(co)}),Us(S,this._triggerName,L,Z,hi,_n,yr,Wi,[...wr.values()],Bi,gs,Ki))}}function Oi(re,C){const S={...C};return Object.entries(re).forEach(([L,Z])=>{null!=Z&&(S[L]=Z)}),S}class Dr{constructor(C,S,L){this.styles=C,this.defaultParams=S,this.normalizer=L}buildStyles(C,S){const L=new Map,Z=Oi(C,this.defaultParams);return this.styles.styles.forEach(de=>{"string"!=typeof de&&de.forEach((be,Le)=>{be&&(be=Ht(be,Z,S));const _t=this.normalizer.normalizePropertyName(Le,S);be=this.normalizer.normalizeStyleValue(Le,_t,be,S),L.set(Le,be)})}),L}}class ro{constructor(C,S,L){this.name=C,this.ast=S,this._normalizer=L,this.transitionFactories=[],this.states=new Map,S.states.forEach(Z=>{this.states.set(Z.name,new Dr(Z.style,Z.options&&Z.options.params||{},L))}),So(this.states,"true","1"),So(this.states,"false","0"),S.transitions.forEach(Z=>{this.transitionFactories.push(new Cs(C,Z,this.states))}),this.fallbackTransition=function Wr(re,C,S){return new Cs(re,{type:He.If.Transition,animation:{type:He.If.Sequence,steps:[],options:null},matchers:[(be,Le)=>!0],options:null,queryCount:0,depCount:0},C)}(C,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(C,S,L,Z){return this.transitionFactories.find(be=>be.match(C,S,L,Z))||null}matchStyles(C,S,L){return this.fallbackTransition.buildStyles(C,S,L)}}function So(re,C,S){re.has(C)?re.has(S)||re.set(S,re.get(C)):re.has(S)&&re.set(C,re.get(S))}const gi=new Jr;class Ur{constructor(C,S,L){this.bodyNode=C,this._driver=S,this._normalizer=L,this._animations=new Map,this._playersById=new Map,this.players=[]}register(C,S){const L=[],de=mr(this._driver,S,L,[]);if(L.length)throw function Et(re){return new P.wOt(3503,!1)}();this._animations.set(C,de)}_buildPlayer(C,S,L){const Z=C.element,de=bt(this._normalizer,C.keyframes,S,L);return this._driver.animate(Z,de,C.duration,C.delay,C.easing,[],!0)}create(C,S,L={}){const Z=[],de=this._animations.get(C);let be;const Le=new Map;if(de?(be=da(this._driver,S,de,Nn,oi,new Map,new Map,L,gi,Z),be.forEach($t=>{const Zt=Xe(Le,$t.element,new Map);$t.postStyleProps.forEach(kn=>Zt.set(kn,null))})):(Z.push(function et(){return new P.wOt(3300,!1)}()),be=[]),Z.length)throw function qt(re){return new P.wOt(3504,!1)}();Le.forEach(($t,Zt)=>{$t.forEach((kn,On)=>{$t.set(On,this._driver.computeStyle(Zt,On,He.kp))})});const St=Xn(be.map($t=>{const Zt=Le.get($t.element);return this._buildPlayer($t,new Map,Zt)}));return this._playersById.set(C,St),St.onDestroy(()=>this.destroy(C)),this.players.push(St),St}destroy(C){const S=this._getPlayer(C);S.destroy(),this._playersById.delete(C);const L=this.players.indexOf(S);L>=0&&this.players.splice(L,1)}_getPlayer(C){const S=this._playersById.get(C);if(!S)throw function pn(re){return new P.wOt(3301,!1)}();return S}listen(C,S,L,Z){const de=Rt(S,"","","");return pt(this._getPlayer(C),L,de,Z),()=>{}}command(C,S,L,Z){if("register"==L)return void this.register(C,Z[0]);if("create"==L)return void this.create(C,S,Z[0]||{});const de=this._getPlayer(C);switch(L){case"play":de.play();break;case"pause":de.pause();break;case"reset":de.reset();break;case"restart":de.restart();break;case"finish":de.finish();break;case"init":de.init();break;case"setPosition":de.setPosition(parseFloat(Z[0]));break;case"destroy":this.destroy(C)}}}const ri="ng-animate-queued",hn="ng-animate-disabled",Ts=[],Hs={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Vi={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ii="__ng_removed";class Li{get params(){return this.options.params}constructor(C,S=""){this.namespaceId=S;const L=C&&C.hasOwnProperty("value");if(this.value=function Ni(re){return re??null}(L?C.value:C),L){const{value:de,...be}=C;this.options=be}else this.options={};this.options.params||(this.options.params={})}absorbOptions(C){const S=C.params;if(S){const L=this.options.params;Object.keys(S).forEach(Z=>{null==L[Z]&&(L[Z]=S[Z])})}}}const li="void",Gi=new Li(li);class io{constructor(C,S,L){this.id=C,this.hostElement=S,this._engine=L,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+C,fs(S,this._hostClassName)}listen(C,S,L,Z){if(!this._triggers.has(S))throw function on(re,C){return new P.wOt(3302,!1)}();if(null==L||0==L.length)throw function an(re){return new P.wOt(3303,!1)}();if(!function Eo(re){return"start"==re||"done"==re}(L))throw function Dn(re,C){return new P.wOt(3400,!1)}();const de=Xe(this._elementListeners,C,[]),be={name:S,phase:L,callback:Z};de.push(be);const Le=Xe(this._engine.statesByElement,C,new Map);return Le.has(S)||(fs(C,Re),fs(C,Re+"-"+S),Le.set(S,Gi)),()=>{this._engine.afterFlush(()=>{const _t=de.indexOf(be);_t>=0&&de.splice(_t,1),this._triggers.has(S)||Le.delete(S)})}}register(C,S){return!this._triggers.has(C)&&(this._triggers.set(C,S),!0)}_getTrigger(C){const S=this._triggers.get(C);if(!S)throw function An(re){return new P.wOt(3401,!1)}();return S}trigger(C,S,L,Z=!0){const de=this._getTrigger(S),be=new vo(this.id,S,C);let Le=this._engine.statesByElement.get(C);Le||(fs(C,Re),fs(C,Re+"-"+S),this._engine.statesByElement.set(C,Le=new Map));let _t=Le.get(S);const St=new Li(L,this.id);if(!(L&&L.hasOwnProperty("value"))&&_t&&St.absorbOptions(_t.options),Le.set(S,St),_t||(_t=Gi),St.value!==li&&_t.value===St.value){if(!function Go(re,C){const S=Object.keys(re),L=Object.keys(C);if(S.length!=L.length)return!1;for(let Z=0;Z<S.length;Z++){const de=S[Z];if(!C.hasOwnProperty(de)||re[de]!==C[de])return!1}return!0}(_t.params,St.params)){const Zn=[],yr=de.matchStyles(_t.value,_t.params,Zn),wr=de.matchStyles(St.value,St.params,Zn);Zn.length?this._engine.reportError(Zn):this._engine.afterFlush(()=>{xt(C,yr),gt(C,wr)})}return}const kn=Xe(this._engine.playersByElement,C,[]);kn.forEach(Zn=>{Zn.namespaceId==this.id&&Zn.triggerName==S&&Zn.queued&&Zn.destroy()});let On=de.matchTransition(_t.value,St.value,C,St.params),_n=!1;if(!On){if(!Z)return;On=de.fallbackTransition,_n=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:S,transition:On,fromState:_t,toState:St,player:be,isFallbackTransition:_n}),_n||(fs(C,ri),be.onStart(()=>{ps(C,ri)})),be.onDone(()=>{let Zn=this.players.indexOf(be);Zn>=0&&this.players.splice(Zn,1);const yr=this._engine.playersByElement.get(C);if(yr){let wr=yr.indexOf(be);wr>=0&&yr.splice(wr,1)}}),this.players.push(be),kn.push(be),be}deregister(C){this._triggers.delete(C),this._engine.statesByElement.forEach(S=>S.delete(C)),this._elementListeners.forEach((S,L)=>{this._elementListeners.set(L,S.filter(Z=>Z.name!=C))})}clearElementCache(C){this._engine.statesByElement.delete(C),this._elementListeners.delete(C);const S=this._engine.playersByElement.get(C);S&&(S.forEach(L=>L.destroy()),this._engine.playersByElement.delete(C))}_signalRemovalForInnerTriggers(C,S){const L=this._engine.driver.query(C,Ie,!0);L.forEach(Z=>{if(Z[ii])return;const de=this._engine.fetchNamespacesByElement(Z);de.size?de.forEach(be=>be.triggerLeaveAnimation(Z,S,!1,!0)):this.clearElementCache(Z)}),this._engine.afterFlushAnimationsDone(()=>L.forEach(Z=>this.clearElementCache(Z)))}triggerLeaveAnimation(C,S,L,Z){const de=this._engine.statesByElement.get(C),be=new Map;if(de){const Le=[];if(de.forEach((_t,St)=>{if(be.set(St,_t.value),this._triggers.has(St)){const $t=this.trigger(C,St,li,Z);$t&&Le.push($t)}}),Le.length)return this._engine.markElementAsRemoved(this.id,C,!0,S,be),L&&Xn(Le).onDone(()=>this._engine.processLeaveNode(C)),!0}return!1}prepareLeaveAnimationListeners(C){const S=this._elementListeners.get(C),L=this._engine.statesByElement.get(C);if(S&&L){const Z=new Set;S.forEach(de=>{const be=de.name;if(Z.has(be))return;Z.add(be);const _t=this._triggers.get(be).fallbackTransition,St=L.get(be)||Gi,$t=new Li(li),Zt=new vo(this.id,be,C);this._engine.totalQueuedPlayers++,this._queue.push({element:C,triggerName:be,transition:_t,fromState:St,toState:$t,player:Zt,isFallbackTransition:!0})})}}removeNode(C,S){const L=this._engine;if(C.childElementCount&&this._signalRemovalForInnerTriggers(C,S),this.triggerLeaveAnimation(C,S,!0))return;let Z=!1;if(L.totalAnimations){const de=L.players.length?L.playersByQueriedElement.get(C):[];if(de&&de.length)Z=!0;else{let be=C;for(;be=be.parentNode;)if(L.statesByElement.get(be)){Z=!0;break}}}if(this.prepareLeaveAnimationListeners(C),Z)L.markElementAsRemoved(this.id,C,!1,S);else{const de=C[ii];(!de||de===Hs)&&(L.afterFlush(()=>this.clearElementCache(C)),L.destroyInnerAnimations(C),L._onRemovalComplete(C,S))}}insertNode(C,S){fs(C,this._hostClassName)}drainQueuedTransitions(C){const S=[];return this._queue.forEach(L=>{const Z=L.player;if(Z.destroyed)return;const de=L.element,be=this._elementListeners.get(de);be&&be.forEach(Le=>{if(Le.name==L.triggerName){const _t=Rt(de,L.triggerName,L.fromState.value,L.toState.value);_t._data=C,pt(L.player,Le.phase,_t,Le.callback)}}),Z.markedForDestroy?this._engine.afterFlush(()=>{Z.destroy()}):S.push(L)}),this._queue=[],S.sort((L,Z)=>{const de=L.transition.ast.depCount,be=Z.transition.ast.depCount;return 0==de||0==be?de-be:this._engine.driver.containsElement(L.element,Z.element)?1:-1})}destroy(C){this.players.forEach(S=>S.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,C)}}class zi{_onRemovalComplete(C,S){this.onRemovalComplete(C,S)}constructor(C,S,L,Z){this.bodyNode=C,this.driver=S,this._normalizer=L,this.scheduler=Z,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(de,be)=>{}}get queuedPlayers(){const C=[];return this._namespaceList.forEach(S=>{S.players.forEach(L=>{L.queued&&C.push(L)})}),C}createNamespace(C,S){const L=new io(C,S,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,S)?this._balanceNamespaceList(L,S):(this.newHostElements.set(S,L),this.collectEnterElement(S)),this._namespaceLookup[C]=L}_balanceNamespaceList(C,S){const L=this._namespaceList,Z=this.namespacesByHostElement;if(L.length-1>=0){let be=!1,Le=this.driver.getParentElement(S);for(;Le;){const _t=Z.get(Le);if(_t){const St=L.indexOf(_t);L.splice(St+1,0,C),be=!0;break}Le=this.driver.getParentElement(Le)}be||L.unshift(C)}else L.push(C);return Z.set(S,C),C}register(C,S){let L=this._namespaceLookup[C];return L||(L=this.createNamespace(C,S)),L}registerTrigger(C,S,L){let Z=this._namespaceLookup[C];Z&&Z.register(S,L)&&this.totalAnimations++}destroy(C,S){C&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const L=this._fetchNamespace(C);this.namespacesByHostElement.delete(L.hostElement);const Z=this._namespaceList.indexOf(L);Z>=0&&this._namespaceList.splice(Z,1),L.destroy(S),delete this._namespaceLookup[C]}))}_fetchNamespace(C){return this._namespaceLookup[C]}fetchNamespacesByElement(C){const S=new Set,L=this.statesByElement.get(C);if(L)for(let Z of L.values())if(Z.namespaceId){const de=this._fetchNamespace(Z.namespaceId);de&&S.add(de)}return S}trigger(C,S,L,Z){if(so(S)){const de=this._fetchNamespace(C);if(de)return de.trigger(S,L,Z),!0}return!1}insertNode(C,S,L,Z){if(!so(S))return;const de=S[ii];if(de&&de.setForRemoval){de.setForRemoval=!1,de.setForMove=!0;const be=this.collectedLeaveElements.indexOf(S);be>=0&&this.collectedLeaveElements.splice(be,1)}if(C){const be=this._fetchNamespace(C);be&&be.insertNode(S,L)}Z&&this.collectEnterElement(S)}collectEnterElement(C){this.collectedEnterElements.push(C)}markElementAsDisabled(C,S){S?this.disabledNodes.has(C)||(this.disabledNodes.add(C),fs(C,hn)):this.disabledNodes.has(C)&&(this.disabledNodes.delete(C),ps(C,hn))}removeNode(C,S,L){if(so(S)){this.scheduler?.notify();const Z=C?this._fetchNamespace(C):null;Z?Z.removeNode(S,L):this.markElementAsRemoved(C,S,!1,L);const de=this.namespacesByHostElement.get(S);de&&de.id!==C&&de.removeNode(S,L)}else this._onRemovalComplete(S,L)}markElementAsRemoved(C,S,L,Z,de){this.collectedLeaveElements.push(S),S[ii]={namespaceId:C,setForRemoval:Z,hasAnimation:L,removedBeforeQueried:!1,previousTriggersValues:de}}listen(C,S,L,Z,de){return so(S)?this._fetchNamespace(C).listen(S,L,Z,de):()=>{}}_buildInstruction(C,S,L,Z,de){return C.transition.build(this.driver,C.element,C.fromState.value,C.toState.value,L,Z,C.fromState.options,C.toState.options,S,de)}destroyInnerAnimations(C){let S=this.driver.query(C,Ie,!0);S.forEach(L=>this.destroyActiveAnimationsForElement(L)),0!=this.playersByQueriedElement.size&&(S=this.driver.query(C,Ke,!0),S.forEach(L=>this.finishActiveQueriedAnimationOnElement(L)))}destroyActiveAnimationsForElement(C){const S=this.playersByElement.get(C);S&&S.forEach(L=>{L.queued?L.markedForDestroy=!0:L.destroy()})}finishActiveQueriedAnimationOnElement(C){const S=this.playersByQueriedElement.get(C);S&&S.forEach(L=>L.finish())}whenRenderingDone(){return new Promise(C=>{if(this.players.length)return Xn(this.players).onDone(()=>C());C()})}processLeaveNode(C){const S=C[ii];if(S&&S.setForRemoval){if(C[ii]=Hs,S.namespaceId){this.destroyInnerAnimations(C);const L=this._fetchNamespace(S.namespaceId);L&&L.clearElementCache(C)}this._onRemovalComplete(C,S.setForRemoval)}C.classList?.contains(hn)&&this.markElementAsDisabled(C,!1),this.driver.query(C,".ng-animate-disabled",!0).forEach(L=>{this.markElementAsDisabled(L,!1)})}flush(C=-1){let S=[];if(this.newHostElements.size&&(this.newHostElements.forEach((L,Z)=>this._balanceNamespaceList(L,Z)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let L=0;L<this.collectedEnterElements.length;L++)fs(this.collectedEnterElements[L],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const L=[];try{S=this._flushAnimations(L,C)}finally{for(let Z=0;Z<L.length;Z++)L[Z]()}}else for(let L=0;L<this.collectedLeaveElements.length;L++)this.processLeaveNode(this.collectedLeaveElements[L]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(L=>L()),this._flushFns=[],this._whenQuietFns.length){const L=this._whenQuietFns;this._whenQuietFns=[],S.length?Xn(S).onDone(()=>{L.forEach(Z=>Z())}):L.forEach(Z=>Z())}}reportError(C){throw function jn(re){return new P.wOt(3402,!1)}()}_flushAnimations(C,S){const L=new Jr,Z=[],de=new Map,be=[],Le=new Map,_t=new Map,St=new Map,$t=new Set;this.disabledNodes.forEach(bn=>{$t.add(bn);const Fn=this.driver.query(bn,".ng-animate-queued",!0);for(let Hn=0;Hn<Fn.length;Hn++)$t.add(Fn[Hn])});const Zt=this.bodyNode,kn=Array.from(this.statesByElement.keys()),On=Vs(kn,this.collectedEnterElements),_n=new Map;let Zn=0;On.forEach((bn,Fn)=>{const Hn=Nn+Zn++;_n.set(Fn,Hn),bn.forEach(hr=>fs(hr,Hn))});const yr=[],wr=new Set,Bi=new Set;for(let bn=0;bn<this.collectedLeaveElements.length;bn++){const Fn=this.collectedLeaveElements[bn],Hn=Fn[ii];Hn&&Hn.setForRemoval&&(yr.push(Fn),wr.add(Fn),Hn.hasAnimation?this.driver.query(Fn,".ng-star-inserted",!0).forEach(hr=>wr.add(hr)):Bi.add(Fn))}const gs=new Map,hi=Vs(kn,Array.from(wr));hi.forEach((bn,Fn)=>{const Hn=oi+Zn++;gs.set(Fn,Hn),bn.forEach(hr=>fs(hr,Hn))}),C.push(()=>{On.forEach((bn,Fn)=>{const Hn=_n.get(Fn);bn.forEach(hr=>ps(hr,Hn))}),hi.forEach((bn,Fn)=>{const Hn=gs.get(Fn);bn.forEach(hr=>ps(hr,Hn))}),yr.forEach(bn=>{this.processLeaveNode(bn)})});const bs=[],Wi=[];for(let bn=this._namespaceList.length-1;bn>=0;bn--)this._namespaceList[bn].drainQueuedTransitions(S).forEach(Hn=>{const hr=Hn.player,Ai=Hn.element;if(bs.push(hr),this.collectedEnterElements.length){const Yi=Ai[ii];if(Yi&&Yi.setForMove){if(Yi.previousTriggersValues&&Yi.previousTriggersValues.has(Hn.triggerName)){const ys=Yi.previousTriggersValues.get(Hn.triggerName),Ms=this.statesByElement.get(Hn.element);if(Ms&&Ms.has(Hn.triggerName)){const ta=Ms.get(Hn.triggerName);ta.value=ys,Ms.set(Hn.triggerName,ta)}}return void hr.destroy()}}const ss=!Zt||!this.driver.containsElement(Zt,Ai),si=gs.get(Ai),Ps=_n.get(Ai),wn=this._buildInstruction(Hn,L,Ps,si,ss);if(wn.errors&&wn.errors.length)return void Wi.push(wn);if(ss)return hr.onStart(()=>xt(Ai,wn.fromStyles)),hr.onDestroy(()=>gt(Ai,wn.toStyles)),void Z.push(hr);if(Hn.isFallbackTransition)return hr.onStart(()=>xt(Ai,wn.fromStyles)),hr.onDestroy(()=>gt(Ai,wn.toStyles)),void Z.push(hr);const Tc=[];wn.timelines.forEach(Yi=>{Yi.stretchStartingKeyframe=!0,this.disabledNodes.has(Yi.element)||Tc.push(Yi)}),wn.timelines=Tc,L.append(Ai,wn.timelines),be.push({instruction:wn,player:hr,element:Ai}),wn.queriedElements.forEach(Yi=>Xe(Le,Yi,[]).push(hr)),wn.preStyleProps.forEach((Yi,ys)=>{if(Yi.size){let Ms=_t.get(ys);Ms||_t.set(ys,Ms=new Set),Yi.forEach((ta,Fa)=>Ms.add(Fa))}}),wn.postStyleProps.forEach((Yi,ys)=>{let Ms=St.get(ys);Ms||St.set(ys,Ms=new Set),Yi.forEach((ta,Fa)=>Ms.add(Fa))})});if(Wi.length){const bn=[];Wi.forEach(Fn=>{bn.push(function In(re,C){return new P.wOt(3505,!1)}())}),bs.forEach(Fn=>Fn.destroy()),this.reportError(bn)}const Ki=new Map,_i=new Map;be.forEach(bn=>{const Fn=bn.element;L.has(Fn)&&(_i.set(Fn,Fn),this._beforeAnimationBuild(bn.player.namespaceId,bn.instruction,Ki))}),Z.forEach(bn=>{const Fn=bn.element;this._getPreviousPlayers(Fn,!1,bn.namespaceId,bn.triggerName,null).forEach(hr=>{Xe(Ki,Fn,[]).push(hr),hr.destroy()})});const co=yr.filter(bn=>zo(bn,_t,St)),uo=new Map;ms(uo,this.driver,Bi,St,He.kp).forEach(bn=>{zo(bn,_t,St)&&co.push(bn)});const Mo=new Map;On.forEach((bn,Fn)=>{ms(Mo,this.driver,new Set(bn),_t,He.FX)}),co.forEach(bn=>{const Fn=uo.get(bn),Hn=Mo.get(bn);uo.set(bn,new Map([...Fn?.entries()??[],...Hn?.entries()??[]]))});const Ss=[],fa=[],ki={};be.forEach(bn=>{const{element:Fn,player:Hn,instruction:hr}=bn;if(L.has(Fn)){if($t.has(Fn))return Hn.onDestroy(()=>gt(Fn,hr.toStyles)),Hn.disabled=!0,Hn.overrideTotalTime(hr.totalTime),void Z.push(Hn);let Ai=ki;if(_i.size>1){let si=Fn;const Ps=[];for(;si=si.parentNode;){const wn=_i.get(si);if(wn){Ai=wn;break}Ps.push(si)}Ps.forEach(wn=>_i.set(wn,Ai))}const ss=this._buildAnimation(Hn.namespaceId,hr,Ki,de,Mo,uo);if(Hn.setRealPlayer(ss),Ai===ki)Ss.push(Hn);else{const si=this.playersByElement.get(Ai);si&&si.length&&(Hn.parentPlayer=Xn(si)),Z.push(Hn)}}else xt(Fn,hr.fromStyles),Hn.onDestroy(()=>gt(Fn,hr.toStyles)),fa.push(Hn),$t.has(Fn)&&Z.push(Hn)}),fa.forEach(bn=>{const Fn=de.get(bn.element);if(Fn&&Fn.length){const Hn=Xn(Fn);bn.setRealPlayer(Hn)}}),Z.forEach(bn=>{bn.parentPlayer?bn.syncPlayerEvents(bn.parentPlayer):bn.destroy()});for(let bn=0;bn<yr.length;bn++){const Fn=yr[bn],Hn=Fn[ii];if(ps(Fn,oi),Hn&&Hn.hasAnimation)continue;let hr=[];if(Le.size){let ss=Le.get(Fn);ss&&ss.length&&hr.push(...ss);let si=this.driver.query(Fn,Ke,!0);for(let Ps=0;Ps<si.length;Ps++){let wn=Le.get(si[Ps]);wn&&wn.length&&hr.push(...wn)}}const Ai=hr.filter(ss=>!ss.destroyed);Ai.length?Xi(this,Fn,Ai):this.processLeaveNode(Fn)}return yr.length=0,Ss.forEach(bn=>{this.players.push(bn),bn.onDone(()=>{bn.destroy();const Fn=this.players.indexOf(bn);this.players.splice(Fn,1)}),bn.play()}),Ss}afterFlush(C){this._flushFns.push(C)}afterFlushAnimationsDone(C){this._whenQuietFns.push(C)}_getPreviousPlayers(C,S,L,Z,de){let be=[];if(S){const Le=this.playersByQueriedElement.get(C);Le&&(be=Le)}else{const Le=this.playersByElement.get(C);if(Le){const _t=!de||de==li;Le.forEach(St=>{St.queued||!_t&&St.triggerName!=Z||be.push(St)})}}return(L||Z)&&(be=be.filter(Le=>!(L&&L!=Le.namespaceId||Z&&Z!=Le.triggerName))),be}_beforeAnimationBuild(C,S,L){const de=S.element,be=S.isRemovalTransition?void 0:C,Le=S.isRemovalTransition?void 0:S.triggerName;for(const _t of S.timelines){const St=_t.element,$t=St!==de,Zt=Xe(L,St,[]);this._getPreviousPlayers(St,$t,be,Le,S.toState).forEach(On=>{const _n=On.getRealPlayer();_n.beforeDestroy&&_n.beforeDestroy(),On.destroy(),Zt.push(On)})}xt(de,S.fromStyles)}_buildAnimation(C,S,L,Z,de,be){const Le=S.triggerName,_t=S.element,St=[],$t=new Set,Zt=new Set,kn=S.timelines.map(_n=>{const Zn=_n.element;$t.add(Zn);const yr=Zn[ii];if(yr&&yr.removedBeforeQueried)return new He.sf(_n.duration,_n.delay);const wr=Zn!==_t,Bi=function Gs(re){const C=[];return mi(re,C),C}((L.get(Zn)||Ts).map(Ki=>Ki.getRealPlayer())).filter(Ki=>!!Ki.element&&Ki.element===Zn),gs=de.get(Zn),hi=be.get(Zn),bs=bt(this._normalizer,_n.keyframes,gs,hi),Wi=this._buildPlayer(_n,bs,Bi);if(_n.subTimeline&&Z&&Zt.add(Zn),wr){const Ki=new vo(C,Le,Zn);Ki.setRealPlayer(Wi),St.push(Ki)}return Wi});St.forEach(_n=>{Xe(this.playersByQueriedElement,_n.element,[]).push(_n),_n.onDone(()=>function is(re,C,S){let L=re.get(C);if(L){if(L.length){const Z=L.indexOf(S);L.splice(Z,1)}0==L.length&&re.delete(C)}return L}(this.playersByQueriedElement,_n.element,_n))}),$t.forEach(_n=>fs(_n,Ee));const On=Xn(kn);return On.onDestroy(()=>{$t.forEach(_n=>ps(_n,Ee)),gt(_t,S.toStyles)}),Zt.forEach(_n=>{Xe(Z,_n,[]).push(On)}),On}_buildPlayer(C,S,L){return S.length>0?this.driver.animate(C.element,S,C.duration,C.delay,C.easing,L):new He.sf(C.duration,C.delay)}}class vo{constructor(C,S,L){this.namespaceId=C,this.triggerName=S,this.element=L,this._player=new He.sf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(C){this._containsRealPlayer||(this._player=C,this._queuedCallbacks.forEach((S,L)=>{S.forEach(Z=>pt(C,L,void 0,Z))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(C.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(C){this.totalTime=C}syncPlayerEvents(C){const S=this._player;S.triggerCallback&&C.onStart(()=>S.triggerCallback("start")),C.onDone(()=>this.finish()),C.onDestroy(()=>this.destroy())}_queueEvent(C,S){Xe(this._queuedCallbacks,C,[]).push(S)}onDone(C){this.queued&&this._queueEvent("done",C),this._player.onDone(C)}onStart(C){this.queued&&this._queueEvent("start",C),this._player.onStart(C)}onDestroy(C){this.queued&&this._queueEvent("destroy",C),this._player.onDestroy(C)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(C){this.queued||this._player.setPosition(C)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(C){const S=this._player;S.triggerCallback&&S.triggerCallback(C)}}function so(re){return re&&1===re.nodeType}function Ui(re,C){const S=re.style.display;return re.style.display=C??"none",S}function ms(re,C,S,L,Z){const de=[];S.forEach(_t=>de.push(Ui(_t)));const be=[];L.forEach((_t,St)=>{const $t=new Map;_t.forEach(Zt=>{const kn=C.computeStyle(St,Zt,Z);$t.set(Zt,kn),(!kn||0==kn.length)&&(St[ii]=Vi,be.push(St))}),re.set(St,$t)});let Le=0;return S.forEach(_t=>Ui(_t,de[Le++])),be}function Vs(re,C){const S=new Map;if(re.forEach(Le=>S.set(Le,[])),0==C.length)return S;const Z=new Set(C),de=new Map;function be(Le){if(!Le)return 1;let _t=de.get(Le);if(_t)return _t;const St=Le.parentNode;return _t=S.has(St)?St:Z.has(St)?1:be(St),de.set(Le,_t),_t}return C.forEach(Le=>{const _t=be(Le);1!==_t&&S.get(_t).push(Le)}),S}function fs(re,C){re.classList?.add(C)}function ps(re,C){re.classList?.remove(C)}function Xi(re,C,S){Xn(S).onDone(()=>re.processLeaveNode(C))}function mi(re,C){for(let S=0;S<re.length;S++){const L=re[S];L instanceof He.ui?mi(L.players,C):C.push(L)}}function zo(re,C,S){const L=S.get(re);if(!L)return!1;let Z=C.get(re);return Z?L.forEach(de=>Z.add(de)):C.set(re,L),S.delete(re),!0}class ls{constructor(C,S,L,Z){this._driver=S,this._normalizer=L,this._triggerCache={},this.onRemovalComplete=(de,be)=>{},this._transitionEngine=new zi(C.body,S,L,Z),this._timelineEngine=new Ur(C.body,S,L),this._transitionEngine.onRemovalComplete=(de,be)=>this.onRemovalComplete(de,be)}registerTrigger(C,S,L,Z,de){const be=C+"-"+Z;let Le=this._triggerCache[be];if(!Le){const _t=[],$t=mr(this._driver,de,_t,[]);if(_t.length)throw function lt(re,C){return new P.wOt(3404,!1)}();Le=function Bs(re,C,S){return new ro(re,C,S)}(Z,$t,this._normalizer),this._triggerCache[be]=Le}this._transitionEngine.registerTrigger(S,Z,Le)}register(C,S){this._transitionEngine.register(C,S)}destroy(C,S){this._transitionEngine.destroy(C,S)}onInsert(C,S,L,Z){this._transitionEngine.insertNode(C,S,L,Z)}onRemove(C,S,L){this._transitionEngine.removeNode(C,S,L)}disableAnimations(C,S){this._transitionEngine.markElementAsDisabled(C,S)}process(C,S,L,Z){if("@"==L.charAt(0)){const[de,be]=Ot(L);this._timelineEngine.command(de,S,be,Z)}else this._transitionEngine.trigger(C,S,L,Z)}listen(C,S,L,Z,de){if("@"==L.charAt(0)){const[be,Le]=Ot(L);return this._timelineEngine.listen(be,S,Le,de)}return this._transitionEngine.listen(C,S,L,Z,de)}flush(C=-1){this._transitionEngine.flush(C)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(C){this._transitionEngine.afterFlushAnimationsDone(C)}}class zs{static#e=this.initialStylesByElement=new WeakMap;constructor(C,S,L){this._element=C,this._startStyles=S,this._endStyles=L,this._state=0;let Z=zs.initialStylesByElement.get(C);Z||zs.initialStylesByElement.set(C,Z=new Map),this._initialStyles=Z}start(){this._state<1&&(this._startStyles&&gt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gt(this._element,this._initialStyles),this._endStyles&&(gt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(zs.initialStylesByElement.delete(this._element),this._startStyles&&(xt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(xt(this._element,this._endStyles),this._endStyles=null),gt(this._element,this._initialStyles),this._state=3)}}function ha(re){let C=null;return re.forEach((S,L)=>{(function Kr(re){return"display"===re||"position"===re})(L)&&(C=C||new Map,C.set(L,S))}),C}class oo{constructor(C,S,L,Z){this.element=C,this.keyframes=S,this.options=L,this._specialStyles=Z,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=L.duration,this._delay=L.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(C=>C()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const C=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,C,this.options),this._finalKeyframe=C.length?C[C.length-1]:new Map;const S=()=>this._onFinish();this.domPlayer.addEventListener("finish",S),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",S)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(C){const S=[];return C.forEach(L=>{S.push(Object.fromEntries(L))}),S}_triggerWebAnimation(C,S,L){return C.animate(this._convertKeyframesToObject(S),L)}onStart(C){this._originalOnStartFns.push(C),this._onStartFns.push(C)}onDone(C){this._originalOnDoneFns.push(C),this._onDoneFns.push(C)}onDestroy(C){this._onDestroyFns.push(C)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(C=>C()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(C=>C()),this._onDestroyFns=[])}setPosition(C){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=C*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const C=new Map;this.hasStarted()&&this._finalKeyframe.forEach((L,Z)=>{"offset"!==Z&&C.set(Z,this._finished?L:rs(this.element,Z))}),this.currentSnapshot=C}triggerCallback(C){const S="start"===C?this._onStartFns:this._onDoneFns;S.forEach(L=>L()),S.length=0}}class dr{validateStyleProperty(C){return!0}validateAnimatableStyleProperty(C){return!0}matchesElement(C,S){return!1}containsElement(C,S){return Sr(C,S)}getParentElement(C){return Yn(C)}query(C,S,L){return hs(C,S,L)}computeStyle(C,S,L){return rs(C,S)}animate(C,S,L,Z,de,be=[]){const _t={duration:L,delay:Z,fill:0==Z?"both":"forwards"};de&&(_t.easing=de);const St=new Map,$t=be.filter(On=>On instanceof oo);(function _o(re,C){return 0===re||0===C})(L,Z)&&$t.forEach(On=>{On.currentSnapshot.forEach((_n,Zn)=>St.set(Zn,_n))});let Zt=function oe(re){return re.length?re[0]instanceof Map?re:re.map(C=>new Map(Object.entries(C))):[]}(S).map(On=>new Map(On));Zt=function Fs(re,C,S){if(S.size&&C.length){let L=C[0],Z=[];if(S.forEach((de,be)=>{L.has(be)||Z.push(be),L.set(be,de)}),Z.length)for(let de=1;de<C.length;de++){let be=C[de];Z.forEach(Le=>be.set(Le,rs(re,Le)))}}return C}(C,Zt,St);const kn=function Tr(re,C){let S=null,L=null;return Array.isArray(C)&&C.length?(S=ha(C[0]),C.length>1&&(L=ha(C[C.length-1]))):C instanceof Map&&(S=ha(C)),S||L?new zs(re,S,L):null}(C,Zt);return new oo(C,Zt,_t,kn)}}const xi="@.disabled";class H{constructor(C,S,L,Z){this.namespaceId=C,this.delegate=S,this.engine=L,this._onDestroy=Z,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(C){this.delegate.destroyNode?.(C)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(C,S){return this.delegate.createElement(C,S)}createComment(C){return this.delegate.createComment(C)}createText(C){return this.delegate.createText(C)}appendChild(C,S){this.delegate.appendChild(C,S),this.engine.onInsert(this.namespaceId,S,C,!1)}insertBefore(C,S,L,Z=!0){this.delegate.insertBefore(C,S,L),this.engine.onInsert(this.namespaceId,S,C,Z)}removeChild(C,S,L){this.engine.onRemove(this.namespaceId,S,this.delegate)}selectRootElement(C,S){return this.delegate.selectRootElement(C,S)}parentNode(C){return this.delegate.parentNode(C)}nextSibling(C){return this.delegate.nextSibling(C)}setAttribute(C,S,L,Z){this.delegate.setAttribute(C,S,L,Z)}removeAttribute(C,S,L){this.delegate.removeAttribute(C,S,L)}addClass(C,S){this.delegate.addClass(C,S)}removeClass(C,S){this.delegate.removeClass(C,S)}setStyle(C,S,L,Z){this.delegate.setStyle(C,S,L,Z)}removeStyle(C,S,L){this.delegate.removeStyle(C,S,L)}setProperty(C,S,L){"@"==S.charAt(0)&&S==xi?this.disableAnimations(C,!!L):this.delegate.setProperty(C,S,L)}setValue(C,S){this.delegate.setValue(C,S)}listen(C,S,L){return this.delegate.listen(C,S,L)}disableAnimations(C,S){this.engine.disableAnimations(C,S)}}class K extends H{constructor(C,S,L,Z,de){super(S,L,Z,de),this.factory=C,this.namespaceId=S}setProperty(C,S,L){"@"==S.charAt(0)?"."==S.charAt(1)&&S==xi?this.disableAnimations(C,L=void 0===L||!!L):this.engine.process(this.namespaceId,C,S.slice(1),L):this.delegate.setProperty(C,S,L)}listen(C,S,L){if("@"==S.charAt(0)){const Z=function O(re){switch(re){case"body":return document.body;case"document":return document;case"window":return window;default:return re}}(C);let de=S.slice(1),be="";return"@"!=de.charAt(0)&&([de,be]=function ee(re){const C=re.indexOf(".");return[re.substring(0,C),re.slice(C+1)]}(de)),this.engine.listen(this.namespaceId,Z,de,be,Le=>{this.factory.scheduleListenerCallback(Le._data||-1,L,Le)})}return this.delegate.listen(C,S,L)}}class Se{constructor(C,S,L){this.delegate=C,this.engine=S,this._zone=L,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,S.onRemovalComplete=(Z,de)=>{const be=de?.parentNode(Z);be&&de.removeChild(be,Z)}}createRenderer(C,S){const Z=this.delegate.createRenderer(C,S);if(!C||!S?.data?.animation){const St=this._rendererCache;let $t=St.get(Z);return $t||($t=new H("",Z,this.engine,()=>St.delete(Z)),St.set(Z,$t)),$t}const de=S.id,be=S.id+"-"+this._currentId;this._currentId++,this.engine.register(be,C);const Le=St=>{Array.isArray(St)?St.forEach(Le):this.engine.registerTrigger(de,be,C,St.name,St)};return S.data.animation.forEach(Le),new K(this,be,Z,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(C,S,L){if(C>=0&&C<this._microtaskId)return void this._zone.run(()=>S(L));const Z=this._animationCallbacksBuffer;0==Z.length&&queueMicrotask(()=>{this._zone.run(()=>{Z.forEach(de=>{const[be,Le]=de;be(Le)}),this._animationCallbacksBuffer=[]})}),Z.push([S,L])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const Ws=[{provide:Un,useFactory:function ir(){return new qi}},{provide:ls,useClass:(()=>{class re extends ls{constructor(S,L,Z){super(S,L,Z,(0,P.WQX)(P.An2,{optional:!0}))}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(L){return new(L||re)(P.KVO($e.qQ),P.KVO(Wt),P.KVO(Un))};static#t=this.\u0275prov=P.jDH({token:re,factory:re.\u0275fac})}return re})()},{provide:P._9s,useFactory:function As(re,C,S){return new Se(re,C,S)},deps:[_.B7,ls,P.SKi]}],di=[{provide:Wt,useFactory:()=>new dr},{provide:P.bc$,useValue:"BrowserAnimations"},...Ws],ao=[{provide:Wt,useClass:Ti},{provide:P.bc$,useValue:"NoopAnimations"},...Ws];let Ca=(()=>{class re{static withConfig(S){return{ngModule:re,providers:S.disableAnimations?ao:di}}static#e=this.\u0275fac=function(L){return new(L||re)};static#t=this.\u0275mod=P.$C({type:re});static#n=this.\u0275inj=P.G2t({providers:di,imports:[_.Bb]})}return re})();var ka=k(8964);let wa=(()=>{class re{static#e=this.\u0275fac=function(L){return new(L||re)};static#t=this.\u0275mod=P.$C({type:re,bootstrap:[Pe]});static#n=this.\u0275inj=P.G2t({imports:[$e.MD,_.Bb,G,ge.LoginAndRegistrationModule,Fe.ProductPageModule,Be.ProfileModuleModule,_e.SingleProductPageModule,Ca,me.K,ka.x]})}return re})();_.sG().bootstrapModule(wa).catch(re=>console.error(re))},4412:(un,Ye,k)=>{k.d(Ye,{t:()=>V});var _=k(1413);class V extends _.B{constructor(w){super(),this._value=w}get value(){return this.getValue()}_subscribe(w){const G=super._subscribe(w);return!G.closed&&w.next(this._value),G}getValue(){const{hasError:w,thrownError:G,_value:Pe}=this;if(w)throw G;return this._throwIfClosed(),Pe}next(w){super.next(this._value=w)}}},1985:(un,Ye,k)=>{k.d(Ye,{c:()=>Fe});var _=k(7707),V=k(8359),P=k(3494),w=k(1203),G=k(1026),Pe=k(8071),ge=k(9786);let Fe=(()=>{class $e{constructor(Te){Te&&(this._subscribe=Te)}lift(Te){const Ve=new $e;return Ve.source=this,Ve.operator=Te,Ve}subscribe(Te,Ve,At){const vt=function me($e){return $e&&$e instanceof _.vU||function _e($e){return $e&&(0,Pe.T)($e.next)&&(0,Pe.T)($e.error)&&(0,Pe.T)($e.complete)}($e)&&(0,V.Uv)($e)}(Te)?Te:new _.Ms(Te,Ve,At);return(0,ge.Y)(()=>{const{operator:ot,source:Jt}=this;vt.add(ot?ot.call(vt,Jt):Jt?this._subscribe(vt):this._trySubscribe(vt))}),vt}_trySubscribe(Te){try{return this._subscribe(Te)}catch(Ve){Te.error(Ve)}}forEach(Te,Ve){return new(Ve=Be(Ve))((At,vt)=>{const ot=new _.Ms({next:Jt=>{try{Te(Jt)}catch(je){vt(je),ot.unsubscribe()}},error:vt,complete:At});this.subscribe(ot)})}_subscribe(Te){var Ve;return null===(Ve=this.source)||void 0===Ve?void 0:Ve.subscribe(Te)}[P.s](){return this}pipe(...Te){return(0,w.m)(Te)(this)}toPromise(Te){return new(Te=Be(Te))((Ve,At)=>{let vt;this.subscribe(ot=>vt=ot,ot=>At(ot),()=>Ve(vt))})}}return $e.create=He=>new $e(He),$e})();function Be($e){var He;return null!==(He=$e??G.$.Promise)&&void 0!==He?He:Promise}},1413:(un,Ye,k)=>{k.d(Ye,{B:()=>ge});var _=k(1985),V=k(8359);const w=(0,k(1853).L)(Be=>function(){Be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var G=k(7908),Pe=k(9786);let ge=(()=>{class Be extends _.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(me){const $e=new Fe(this,this);return $e.operator=me,$e}_throwIfClosed(){if(this.closed)throw new w}next(me){(0,Pe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const $e of this.currentObservers)$e.next(me)}})}error(me){(0,Pe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=me;const{observers:$e}=this;for(;$e.length;)$e.shift().error(me)}})}complete(){(0,Pe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:me}=this;for(;me.length;)me.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var me;return(null===(me=this.observers)||void 0===me?void 0:me.length)>0}_trySubscribe(me){return this._throwIfClosed(),super._trySubscribe(me)}_subscribe(me){return this._throwIfClosed(),this._checkFinalizedStatuses(me),this._innerSubscribe(me)}_innerSubscribe(me){const{hasError:$e,isStopped:He,observers:Te}=this;return $e||He?V.Kn:(this.currentObservers=null,Te.push(me),new V.yU(()=>{this.currentObservers=null,(0,G.o)(Te,me)}))}_checkFinalizedStatuses(me){const{hasError:$e,thrownError:He,isStopped:Te}=this;$e?me.error(He):Te&&me.complete()}asObservable(){const me=new _.c;return me.source=this,me}}return Be.create=(_e,me)=>new Fe(_e,me),Be})();class Fe extends ge{constructor(_e,me){super(),this.destination=_e,this.source=me}next(_e){var me,$e;null===($e=null===(me=this.destination)||void 0===me?void 0:me.next)||void 0===$e||$e.call(me,_e)}error(_e){var me,$e;null===($e=null===(me=this.destination)||void 0===me?void 0:me.error)||void 0===$e||$e.call(me,_e)}complete(){var _e,me;null===(me=null===(_e=this.destination)||void 0===_e?void 0:_e.complete)||void 0===me||me.call(_e)}_subscribe(_e){var me,$e;return null!==($e=null===(me=this.source)||void 0===me?void 0:me.subscribe(_e))&&void 0!==$e?$e:V.Kn}}},7707:(un,Ye,k)=>{k.d(Ye,{Ms:()=>At,vU:()=>$e});var _=k(8071),V=k(8359),P=k(1026),w=k(5334),G=k(5343);const Pe=Be("C",void 0,void 0);function Be(We,Y,te){return{kind:We,value:Y,error:te}}var _e=k(9270),me=k(9786);class $e extends V.yU{constructor(Y){super(),this.isStopped=!1,Y?(this.destination=Y,(0,V.Uv)(Y)&&Y.add(this)):this.destination=je}static create(Y,te,De){return new At(Y,te,De)}next(Y){this.isStopped?Jt(function Fe(We){return Be("N",We,void 0)}(Y),this):this._next(Y)}error(Y){this.isStopped?Jt(function ge(We){return Be("E",void 0,We)}(Y),this):(this.isStopped=!0,this._error(Y))}complete(){this.isStopped?Jt(Pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Y){this.destination.next(Y)}_error(Y){try{this.destination.error(Y)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Te(We,Y){return He.call(We,Y)}class Ve{constructor(Y){this.partialObserver=Y}next(Y){const{partialObserver:te}=this;if(te.next)try{te.next(Y)}catch(De){vt(De)}}error(Y){const{partialObserver:te}=this;if(te.error)try{te.error(Y)}catch(De){vt(De)}else vt(Y)}complete(){const{partialObserver:Y}=this;if(Y.complete)try{Y.complete()}catch(te){vt(te)}}}class At extends $e{constructor(Y,te,De){let rt;if(super(),(0,_.T)(Y)||!Y)rt={next:Y??void 0,error:te??void 0,complete:De??void 0};else{let st;this&&P.$.useDeprecatedNextContext?(st=Object.create(Y),st.unsubscribe=()=>this.unsubscribe(),rt={next:Y.next&&Te(Y.next,st),error:Y.error&&Te(Y.error,st),complete:Y.complete&&Te(Y.complete,st)}):rt=Y}this.destination=new Ve(rt)}}function vt(We){P.$.useDeprecatedSynchronousErrorHandling?(0,me.l)(We):(0,w.m)(We)}function Jt(We,Y){const{onStoppedNotification:te}=P.$;te&&_e.f.setTimeout(()=>te(We,Y))}const je={closed:!0,next:G.l,error:function ot(We){throw We},complete:G.l}},8359:(un,Ye,k)=>{k.d(Ye,{Kn:()=>Pe,yU:()=>G,Uv:()=>ge});var _=k(8071);const P=(0,k(1853).L)(Be=>function(me){Be(this),this.message=me?`${me.length} errors occurred during unsubscription:\n${me.map(($e,He)=>`${He+1}) ${$e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=me});var w=k(7908);class G{constructor(_e){this.initialTeardown=_e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let _e;if(!this.closed){this.closed=!0;const{_parentage:me}=this;if(me)if(this._parentage=null,Array.isArray(me))for(const Te of me)Te.remove(this);else me.remove(this);const{initialTeardown:$e}=this;if((0,_.T)($e))try{$e()}catch(Te){_e=Te instanceof P?Te.errors:[Te]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Te of He)try{Fe(Te)}catch(Ve){_e=_e??[],Ve instanceof P?_e=[..._e,...Ve.errors]:_e.push(Ve)}}if(_e)throw new P(_e)}}add(_e){var me;if(_e&&_e!==this)if(this.closed)Fe(_e);else{if(_e instanceof G){if(_e.closed||_e._hasParent(this))return;_e._addParent(this)}(this._finalizers=null!==(me=this._finalizers)&&void 0!==me?me:[]).push(_e)}}_hasParent(_e){const{_parentage:me}=this;return me===_e||Array.isArray(me)&&me.includes(_e)}_addParent(_e){const{_parentage:me}=this;this._parentage=Array.isArray(me)?(me.push(_e),me):me?[me,_e]:_e}_removeParent(_e){const{_parentage:me}=this;me===_e?this._parentage=null:Array.isArray(me)&&(0,w.o)(me,_e)}remove(_e){const{_finalizers:me}=this;me&&(0,w.o)(me,_e),_e instanceof G&&_e._removeParent(this)}}G.EMPTY=(()=>{const Be=new G;return Be.closed=!0,Be})();const Pe=G.EMPTY;function ge(Be){return Be instanceof G||Be&&"closed"in Be&&(0,_.T)(Be.remove)&&(0,_.T)(Be.add)&&(0,_.T)(Be.unsubscribe)}function Fe(Be){(0,_.T)(Be)?Be():Be.unsubscribe()}},1026:(un,Ye,k)=>{k.d(Ye,{$:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},8793:(un,Ye,k)=>{k.d(Ye,{x:()=>G});var _=k(6365),P=k(9326),w=k(8455);function G(...Pe){return function V(){return(0,_.U)(1)}()((0,w.H)(Pe,(0,P.lI)(Pe)))}},983:(un,Ye,k)=>{k.d(Ye,{w:()=>V});const V=new(k(1985).c)(G=>G.complete())},7468:(un,Ye,k)=>{k.d(Ye,{p:()=>Fe});var _=k(1985),V=k(3073),P=k(8750),w=k(9326),G=k(4360),Pe=k(6450),ge=k(8496);function Fe(...Be){const _e=(0,w.ms)(Be),{args:me,keys:$e}=(0,V.D)(Be),He=new _.c(Te=>{const{length:Ve}=me;if(!Ve)return void Te.complete();const At=new Array(Ve);let vt=Ve,ot=Ve;for(let Jt=0;Jt<Ve;Jt++){let je=!1;(0,P.Tg)(me[Jt]).subscribe((0,G._)(Te,We=>{je||(je=!0,ot--),At[Jt]=We},()=>vt--,void 0,()=>{(!vt||!je)&&(ot||Te.next($e?(0,ge.e)($e,At):At),Te.complete())}))}});return _e?He.pipe((0,Pe.I)(_e)):He}},8455:(un,Ye,k)=>{k.d(Ye,{H:()=>Y});var _=k(8750),V=k(941),P=k(6745),Pe=k(1985),Fe=k(4761),Be=k(8071),_e=k(5225);function $e(te,De){if(!te)throw new Error("Iterable cannot be null");return new Pe.c(rt=>{(0,_e.N)(rt,De,()=>{const st=te[Symbol.asyncIterator]();(0,_e.N)(rt,De,()=>{st.next().then(le=>{le.done?rt.complete():rt.next(le.value)})},0,!0)})})}var He=k(5055),Te=k(9858),Ve=k(7441),At=k(5397),vt=k(7953),ot=k(591),Jt=k(5196);function Y(te,De){return De?function We(te,De){if(null!=te){if((0,He.l)(te))return function w(te,De){return(0,_.Tg)(te).pipe((0,P._)(De),(0,V.Q)(De))}(te,De);if((0,Ve.X)(te))return function ge(te,De){return new Pe.c(rt=>{let st=0;return De.schedule(function(){st===te.length?rt.complete():(rt.next(te[st++]),rt.closed||this.schedule())})})}(te,De);if((0,Te.y)(te))return function G(te,De){return(0,_.Tg)(te).pipe((0,P._)(De),(0,V.Q)(De))}(te,De);if((0,vt.T)(te))return $e(te,De);if((0,At.x)(te))return function me(te,De){return new Pe.c(rt=>{let st;return(0,_e.N)(rt,De,()=>{st=te[Fe.l](),(0,_e.N)(rt,De,()=>{let le,Ge;try{({value:le,done:Ge}=st.next())}catch(Je){return void rt.error(Je)}Ge?rt.complete():rt.next(le)},0,!0)}),()=>(0,Be.T)(st?.return)&&st.return()})}(te,De);if((0,Jt.U)(te))return function je(te,De){return $e((0,Jt.C)(te),De)}(te,De)}throw(0,ot.L)(te)}(te,De):(0,_.Tg)(te)}},8750:(un,Ye,k)=>{k.d(Ye,{Tg:()=>He});var _=k(1635),V=k(7441),P=k(9858),w=k(1985),G=k(5055),Pe=k(7953),ge=k(591),Fe=k(5397),Be=k(5196),_e=k(8071),me=k(5334),$e=k(3494);function He(We){if(We instanceof w.c)return We;if(null!=We){if((0,G.l)(We))return function Te(We){return new w.c(Y=>{const te=We[$e.s]();if((0,_e.T)(te.subscribe))return te.subscribe(Y);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(We);if((0,V.X)(We))return function Ve(We){return new w.c(Y=>{for(let te=0;te<We.length&&!Y.closed;te++)Y.next(We[te]);Y.complete()})}(We);if((0,P.y)(We))return function At(We){return new w.c(Y=>{We.then(te=>{Y.closed||(Y.next(te),Y.complete())},te=>Y.error(te)).then(null,me.m)})}(We);if((0,Pe.T)(We))return ot(We);if((0,Fe.x)(We))return function vt(We){return new w.c(Y=>{for(const te of We)if(Y.next(te),Y.closed)return;Y.complete()})}(We);if((0,Be.U)(We))return function Jt(We){return ot((0,Be.C)(We))}(We)}throw(0,ge.L)(We)}function ot(We){return new w.c(Y=>{(function je(We,Y){var te,De,rt,st;return(0,_.sH)(this,void 0,void 0,function*(){try{for(te=(0,_.xN)(We);!(De=yield te.next()).done;)if(Y.next(De.value),Y.closed)return}catch(le){rt={error:le}}finally{try{De&&!De.done&&(st=te.return)&&(yield st.call(te))}finally{if(rt)throw rt.error}}Y.complete()})})(We,Y).catch(te=>Y.error(te))})}},7673:(un,Ye,k)=>{k.d(Ye,{of:()=>P});var _=k(9326),V=k(8455);function P(...w){const G=(0,_.lI)(w);return(0,V.H)(w,G)}},4360:(un,Ye,k)=>{k.d(Ye,{_:()=>V});var _=k(7707);function V(w,G,Pe,ge,Fe){return new P(w,G,Pe,ge,Fe)}class P extends _.vU{constructor(G,Pe,ge,Fe,Be,_e){super(G),this.onFinalize=Be,this.shouldUnsubscribe=_e,this._next=Pe?function(me){try{Pe(me)}catch($e){G.error($e)}}:super._next,this._error=Fe?function(me){try{Fe(me)}catch($e){G.error($e)}finally{this.unsubscribe()}}:super._error,this._complete=ge?function(){try{ge()}catch(me){G.error(me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var G;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Pe}=this;super.unsubscribe(),!Pe&&(null===(G=this.onFinalize)||void 0===G||G.call(this))}}}},9437:(un,Ye,k)=>{k.d(Ye,{W:()=>w});var _=k(8750),V=k(4360),P=k(9974);function w(G){return(0,P.N)((Pe,ge)=>{let _e,Fe=null,Be=!1;Fe=Pe.subscribe((0,V._)(ge,void 0,void 0,me=>{_e=(0,_.Tg)(G(me,w(G)(Pe))),Fe?(Fe.unsubscribe(),Fe=null,_e.subscribe(ge)):Be=!0})),Be&&(Fe.unsubscribe(),Fe=null,_e.subscribe(ge))})}},274:(un,Ye,k)=>{k.d(Ye,{H:()=>P});var _=k(1397),V=k(8071);function P(w,G){return(0,V.T)(G)?(0,_.Z)(w,G,1):(0,_.Z)(w,1)}},9901:(un,Ye,k)=>{k.d(Ye,{U:()=>P});var _=k(9974),V=k(4360);function P(w){return(0,_.N)((G,Pe)=>{let ge=!1;G.subscribe((0,V._)(Pe,Fe=>{ge=!0,Pe.next(Fe)},()=>{ge||Pe.next(w),Pe.complete()}))})}},5964:(un,Ye,k)=>{k.d(Ye,{p:()=>P});var _=k(9974),V=k(4360);function P(w,G){return(0,_.N)((Pe,ge)=>{let Fe=0;Pe.subscribe((0,V._)(ge,Be=>w.call(G,Be,Fe++)&&ge.next(Be)))})}},980:(un,Ye,k)=>{k.d(Ye,{j:()=>V});var _=k(9974);function V(P){return(0,_.N)((w,G)=>{try{w.subscribe(G)}finally{G.add(P)}})}},1594:(un,Ye,k)=>{k.d(Ye,{$:()=>ge});var _=k(9350),V=k(5964),P=k(6697),w=k(9901),G=k(3774),Pe=k(3669);function ge(Fe,Be){const _e=arguments.length>=2;return me=>me.pipe(Fe?(0,V.p)(($e,He)=>Fe($e,He,me)):Pe.D,(0,P.s)(1),_e?(0,w.U)(Be):(0,G.v)(()=>new _.G))}},6354:(un,Ye,k)=>{k.d(Ye,{T:()=>P});var _=k(9974),V=k(4360);function P(w,G){return(0,_.N)((Pe,ge)=>{let Fe=0;Pe.subscribe((0,V._)(ge,Be=>{ge.next(w.call(G,Be,Fe++))}))})}},6365:(un,Ye,k)=>{k.d(Ye,{U:()=>P});var _=k(1397),V=k(3669);function P(w=1/0){return(0,_.Z)(V.D,w)}},1397:(un,Ye,k)=>{k.d(Ye,{Z:()=>Fe});var _=k(6354),V=k(8750),P=k(9974),w=k(5225),G=k(4360),ge=k(8071);function Fe(Be,_e,me=1/0){return(0,ge.T)(_e)?Fe(($e,He)=>(0,_.T)((Te,Ve)=>_e($e,Te,He,Ve))((0,V.Tg)(Be($e,He))),me):("number"==typeof _e&&(me=_e),(0,P.N)(($e,He)=>function Pe(Be,_e,me,$e,He,Te,Ve,At){const vt=[];let ot=0,Jt=0,je=!1;const We=()=>{je&&!vt.length&&!ot&&_e.complete()},Y=De=>ot<$e?te(De):vt.push(De),te=De=>{Te&&_e.next(De),ot++;let rt=!1;(0,V.Tg)(me(De,Jt++)).subscribe((0,G._)(_e,st=>{He?.(st),Te?Y(st):_e.next(st)},()=>{rt=!0},void 0,()=>{if(rt)try{for(ot--;vt.length&&ot<$e;){const st=vt.shift();Ve?(0,w.N)(_e,Ve,()=>te(st)):te(st)}We()}catch(st){_e.error(st)}}))};return Be.subscribe((0,G._)(_e,Y,()=>{je=!0,We()})),()=>{At?.()}}($e,He,Be,me)))}},941:(un,Ye,k)=>{k.d(Ye,{Q:()=>w});var _=k(5225),V=k(9974),P=k(4360);function w(G,Pe=0){return(0,V.N)((ge,Fe)=>{ge.subscribe((0,P._)(Fe,Be=>(0,_.N)(Fe,G,()=>Fe.next(Be),Pe),()=>(0,_.N)(Fe,G,()=>Fe.complete(),Pe),Be=>(0,_.N)(Fe,G,()=>Fe.error(Be),Pe)))})}},2816:(un,Ye,k)=>{k.d(Ye,{S:()=>w});var _=k(9974),V=k(4360);function w(G,Pe){return(0,_.N)(function P(G,Pe,ge,Fe,Be){return(_e,me)=>{let $e=ge,He=Pe,Te=0;_e.subscribe((0,V._)(me,Ve=>{const At=Te++;He=$e?G(He,Ve,At):($e=!0,Ve),Fe&&me.next(He)},Be&&(()=>{$e&&me.next(He),me.complete()})))}}(G,Pe,arguments.length>=2,!0))}},9172:(un,Ye,k)=>{k.d(Ye,{Z:()=>w});var _=k(8793),V=k(9326),P=k(9974);function w(...G){const Pe=(0,V.lI)(G);return(0,P.N)((ge,Fe)=>{(Pe?(0,_.x)(G,ge,Pe):(0,_.x)(G,ge)).subscribe(Fe)})}},6745:(un,Ye,k)=>{k.d(Ye,{_:()=>V});var _=k(9974);function V(P,w=0){return(0,_.N)((G,Pe)=>{Pe.add(P.schedule(()=>G.subscribe(Pe),w))})}},5558:(un,Ye,k)=>{k.d(Ye,{n:()=>w});var _=k(8750),V=k(9974),P=k(4360);function w(G,Pe){return(0,V.N)((ge,Fe)=>{let Be=null,_e=0,me=!1;const $e=()=>me&&!Be&&Fe.complete();ge.subscribe((0,P._)(Fe,He=>{Be?.unsubscribe();let Te=0;const Ve=_e++;(0,_.Tg)(G(He,Ve)).subscribe(Be=(0,P._)(Fe,At=>Fe.next(Pe?Pe(He,At,Ve,Te++):At),()=>{Be=null,$e()}))},()=>{me=!0,$e()}))})}},6697:(un,Ye,k)=>{k.d(Ye,{s:()=>w});var _=k(983),V=k(9974),P=k(4360);function w(G){return G<=0?()=>_.w:(0,V.N)((Pe,ge)=>{let Fe=0;Pe.subscribe((0,P._)(ge,Be=>{++Fe<=G&&(ge.next(Be),G<=Fe&&ge.complete())}))})}},8141:(un,Ye,k)=>{k.d(Ye,{M:()=>G});var _=k(8071),V=k(9974),P=k(4360),w=k(3669);function G(Pe,ge,Fe){const Be=(0,_.T)(Pe)||ge||Fe?{next:Pe,error:ge,complete:Fe}:Pe;return Be?(0,V.N)((_e,me)=>{var $e;null===($e=Be.subscribe)||void 0===$e||$e.call(Be);let He=!0;_e.subscribe((0,P._)(me,Te=>{var Ve;null===(Ve=Be.next)||void 0===Ve||Ve.call(Be,Te),me.next(Te)},()=>{var Te;He=!1,null===(Te=Be.complete)||void 0===Te||Te.call(Be),me.complete()},Te=>{var Ve;He=!1,null===(Ve=Be.error)||void 0===Ve||Ve.call(Be,Te),me.error(Te)},()=>{var Te,Ve;He&&(null===(Te=Be.unsubscribe)||void 0===Te||Te.call(Be)),null===(Ve=Be.finalize)||void 0===Ve||Ve.call(Be)}))}):w.D}},3774:(un,Ye,k)=>{k.d(Ye,{v:()=>w});var _=k(9350),V=k(9974),P=k(4360);function w(Pe=G){return(0,V.N)((ge,Fe)=>{let Be=!1;ge.subscribe((0,P._)(Fe,_e=>{Be=!0,Fe.next(_e)},()=>Be?Fe.complete():Fe.error(Pe())))})}function G(){return new _.G}},6780:(un,Ye,k)=>{k.d(Ye,{R:()=>G});var _=k(8359);class V extends _.yU{constructor(ge,Fe){super()}schedule(ge,Fe=0){return this}}const P={setInterval(Pe,ge,...Fe){const{delegate:Be}=P;return Be?.setInterval?Be.setInterval(Pe,ge,...Fe):setInterval(Pe,ge,...Fe)},clearInterval(Pe){const{delegate:ge}=P;return(ge?.clearInterval||clearInterval)(Pe)},delegate:void 0};var w=k(7908);class G extends V{constructor(ge,Fe){super(ge,Fe),this.scheduler=ge,this.work=Fe,this.pending=!1}schedule(ge,Fe=0){var Be;if(this.closed)return this;this.state=ge;const _e=this.id,me=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(me,_e,Fe)),this.pending=!0,this.delay=Fe,this.id=null!==(Be=this.id)&&void 0!==Be?Be:this.requestAsyncId(me,this.id,Fe),this}requestAsyncId(ge,Fe,Be=0){return P.setInterval(ge.flush.bind(ge,this),Be)}recycleAsyncId(ge,Fe,Be=0){if(null!=Be&&this.delay===Be&&!1===this.pending)return Fe;null!=Fe&&P.clearInterval(Fe)}execute(ge,Fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Be=this._execute(ge,Fe);if(Be)return Be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ge,Fe){let _e,Be=!1;try{this.work(ge)}catch(me){Be=!0,_e=me||new Error("Scheduled action threw falsy error")}if(Be)return this.unsubscribe(),_e}unsubscribe(){if(!this.closed){const{id:ge,scheduler:Fe}=this,{actions:Be}=Fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,w.o)(Be,this),null!=ge&&(this.id=this.recycleAsyncId(Fe,ge,null)),this.delay=null,super.unsubscribe()}}}},9687:(un,Ye,k)=>{k.d(Ye,{q:()=>P});var _=k(6129);class V{constructor(G,Pe=V.now){this.schedulerActionCtor=G,this.now=Pe}schedule(G,Pe=0,ge){return new this.schedulerActionCtor(this,G).schedule(ge,Pe)}}V.now=_.U.now;class P extends V{constructor(G,Pe=V.now){super(G,Pe),this.actions=[],this._active=!1}flush(G){const{actions:Pe}=this;if(this._active)return void Pe.push(G);let ge;this._active=!0;do{if(ge=G.execute(G.state,G.delay))break}while(G=Pe.shift());if(this._active=!1,ge){for(;G=Pe.shift();)G.unsubscribe();throw ge}}}},3236:(un,Ye,k)=>{k.d(Ye,{E:()=>P,b:()=>w});var _=k(6780);const P=new(k(9687).q)(_.R),w=P},6129:(un,Ye,k)=>{k.d(Ye,{U:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},9270:(un,Ye,k)=>{k.d(Ye,{f:()=>_});const _={setTimeout(V,P,...w){const{delegate:G}=_;return G?.setTimeout?G.setTimeout(V,P,...w):setTimeout(V,P,...w)},clearTimeout(V){const{delegate:P}=_;return(P?.clearTimeout||clearTimeout)(V)},delegate:void 0}},4761:(un,Ye,k)=>{k.d(Ye,{l:()=>V});const V=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(un,Ye,k)=>{k.d(Ye,{s:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(un,Ye,k)=>{k.d(Ye,{G:()=>V});const V=(0,k(1853).L)(P=>function(){P(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(un,Ye,k)=>{k.d(Ye,{R0:()=>Pe,lI:()=>G,ms:()=>w});var _=k(8071),V=k(9470);function P(ge){return ge[ge.length-1]}function w(ge){return(0,_.T)(P(ge))?ge.pop():void 0}function G(ge){return(0,V.m)(P(ge))?ge.pop():void 0}function Pe(ge,Fe){return"number"==typeof P(ge)?ge.pop():Fe}},3073:(un,Ye,k)=>{k.d(Ye,{D:()=>G});const{isArray:_}=Array,{getPrototypeOf:V,prototype:P,keys:w}=Object;function G(ge){if(1===ge.length){const Fe=ge[0];if(_(Fe))return{args:Fe,keys:null};if(function Pe(ge){return ge&&"object"==typeof ge&&V(ge)===P}(Fe)){const Be=w(Fe);return{args:Be.map(_e=>Fe[_e]),keys:Be}}}return{args:ge,keys:null}}},7908:(un,Ye,k)=>{function _(V,P){if(V){const w=V.indexOf(P);0<=w&&V.splice(w,1)}}k.d(Ye,{o:()=>_})},1853:(un,Ye,k)=>{function _(V){const w=V(G=>{Error.call(G),G.stack=(new Error).stack});return w.prototype=Object.create(Error.prototype),w.prototype.constructor=w,w}k.d(Ye,{L:()=>_})},8496:(un,Ye,k)=>{function _(V,P){return V.reduce((w,G,Pe)=>(w[G]=P[Pe],w),{})}k.d(Ye,{e:()=>_})},9786:(un,Ye,k)=>{k.d(Ye,{Y:()=>P,l:()=>w});var _=k(1026);let V=null;function P(G){if(_.$.useDeprecatedSynchronousErrorHandling){const Pe=!V;if(Pe&&(V={errorThrown:!1,error:null}),G(),Pe){const{errorThrown:ge,error:Fe}=V;if(V=null,ge)throw Fe}}else G()}function w(G){_.$.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=G)}},5225:(un,Ye,k)=>{function _(V,P,w,G=0,Pe=!1){const ge=P.schedule(function(){w(),Pe?V.add(this.schedule(null,G)):this.unsubscribe()},G);if(V.add(ge),!Pe)return ge}k.d(Ye,{N:()=>_})},3669:(un,Ye,k)=>{function _(V){return V}k.d(Ye,{D:()=>_})},7441:(un,Ye,k)=>{k.d(Ye,{X:()=>_});const _=V=>V&&"number"==typeof V.length&&"function"!=typeof V},7953:(un,Ye,k)=>{k.d(Ye,{T:()=>V});var _=k(8071);function V(P){return Symbol.asyncIterator&&(0,_.T)(P?.[Symbol.asyncIterator])}},8071:(un,Ye,k)=>{function _(V){return"function"==typeof V}k.d(Ye,{T:()=>_})},5055:(un,Ye,k)=>{k.d(Ye,{l:()=>P});var _=k(3494),V=k(8071);function P(w){return(0,V.T)(w[_.s])}},5397:(un,Ye,k)=>{k.d(Ye,{x:()=>P});var _=k(4761),V=k(8071);function P(w){return(0,V.T)(w?.[_.l])}},9858:(un,Ye,k)=>{k.d(Ye,{y:()=>V});var _=k(8071);function V(P){return(0,_.T)(P?.then)}},5196:(un,Ye,k)=>{k.d(Ye,{C:()=>P,U:()=>w});var _=k(1635),V=k(8071);function P(G){return(0,_.AQ)(this,arguments,function*(){const ge=G.getReader();try{for(;;){const{value:Fe,done:Be}=yield(0,_.N3)(ge.read());if(Be)return yield(0,_.N3)(void 0);yield yield(0,_.N3)(Fe)}}finally{ge.releaseLock()}})}function w(G){return(0,V.T)(G?.getReader)}},9470:(un,Ye,k)=>{k.d(Ye,{m:()=>V});var _=k(8071);function V(P){return P&&(0,_.T)(P.schedule)}},9974:(un,Ye,k)=>{k.d(Ye,{N:()=>P,S:()=>V});var _=k(8071);function V(w){return(0,_.T)(w?.lift)}function P(w){return G=>{if(V(G))return G.lift(function(Pe){try{return w(Pe,this)}catch(ge){this.error(ge)}});throw new TypeError("Unable to lift unknown Observable type")}}},6450:(un,Ye,k)=>{k.d(Ye,{I:()=>w});var _=k(6354);const{isArray:V}=Array;function w(G){return(0,_.T)(Pe=>function P(G,Pe){return V(Pe)?G(...Pe):G(Pe)}(G,Pe))}},5343:(un,Ye,k)=>{function _(){}k.d(Ye,{l:()=>_})},1203:(un,Ye,k)=>{k.d(Ye,{F:()=>V,m:()=>P});var _=k(3669);function V(...w){return P(w)}function P(w){return 0===w.length?_.D:1===w.length?w[0]:function(Pe){return w.reduce((ge,Fe)=>Fe(ge),Pe)}}},5334:(un,Ye,k)=>{k.d(Ye,{m:()=>P});var _=k(1026),V=k(9270);function P(w){V.f.setTimeout(()=>{const{onUnhandledError:G}=_.$;if(!G)throw w;G(w)})}},591:(un,Ye,k)=>{function _(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ye,{L:()=>_})},9969:(un,Ye,k)=>{k.d(Ye,{FX:()=>st,If:()=>_,K2:()=>Pe,hZ:()=>P,i0:()=>w,iF:()=>ge,kY:()=>_e,kp:()=>V,sf:()=>De,ui:()=>rt,wk:()=>Fe});var _=function(le){return le[le.State=0]="State",le[le.Transition=1]="Transition",le[le.Sequence=2]="Sequence",le[le.Group=3]="Group",le[le.Animate=4]="Animate",le[le.Keyframes=5]="Keyframes",le[le.Style=6]="Style",le[le.Trigger=7]="Trigger",le[le.Reference=8]="Reference",le[le.AnimateChild=9]="AnimateChild",le[le.AnimateRef=10]="AnimateRef",le[le.Query=11]="Query",le[le.Stagger=12]="Stagger",le}(_||{});const V="*";function P(le,Ge){return{type:_.Trigger,name:le,definitions:Ge,options:{}}}function w(le,Ge=null){return{type:_.Animate,styles:Ge,timings:le}}function Pe(le,Ge=null){return{type:_.Sequence,steps:le,options:Ge}}function ge(le){return{type:_.Style,styles:le,offset:null}}function Fe(le,Ge,Je){return{type:_.State,name:le,styles:Ge,options:Je}}function _e(le,Ge,Je=null){return{type:_.Transition,expr:le,animation:Ge,options:Je}}class De{constructor(Ge=0,Je=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Ge+Je}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ge=>Ge()),this._onDoneFns=[])}onStart(Ge){this._originalOnStartFns.push(Ge),this._onStartFns.push(Ge)}onDone(Ge){this._originalOnDoneFns.push(Ge),this._onDoneFns.push(Ge)}onDestroy(Ge){this._onDestroyFns.push(Ge)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Ge=>Ge()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Ge=>Ge()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Ge){this._position=this.totalTime?Ge*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Ge){const Je="start"==Ge?this._onStartFns:this._onDoneFns;Je.forEach(zt=>zt()),Je.length=0}}class rt{constructor(Ge){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Ge;let Je=0,zt=0,Pt=0;const Kt=this.players.length;0==Kt?queueMicrotask(()=>this._onFinish()):this.players.forEach(Bt=>{Bt.onDone(()=>{++Je==Kt&&this._onFinish()}),Bt.onDestroy(()=>{++zt==Kt&&this._onDestroy()}),Bt.onStart(()=>{++Pt==Kt&&this._onStart()})}),this.totalTime=this.players.reduce((Bt,tn)=>Math.max(Bt,tn.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Ge=>Ge()),this._onDoneFns=[])}init(){this.players.forEach(Ge=>Ge.init())}onStart(Ge){this._onStartFns.push(Ge)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Ge=>Ge()),this._onStartFns=[])}onDone(Ge){this._onDoneFns.push(Ge)}onDestroy(Ge){this._onDestroyFns.push(Ge)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Ge=>Ge.play())}pause(){this.players.forEach(Ge=>Ge.pause())}restart(){this.players.forEach(Ge=>Ge.restart())}finish(){this._onFinish(),this.players.forEach(Ge=>Ge.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Ge=>Ge.destroy()),this._onDestroyFns.forEach(Ge=>Ge()),this._onDestroyFns=[])}reset(){this.players.forEach(Ge=>Ge.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Ge){const Je=Ge*this.totalTime;this.players.forEach(zt=>{const Pt=zt.totalTime?Math.min(1,Je/zt.totalTime):1;zt.setPosition(Pt)})}getPosition(){const Ge=this.players.reduce((Je,zt)=>null===Je||zt.totalTime>Je.totalTime?zt:Je,null);return null!=Ge?Ge.getPosition():0}beforeDestroy(){this.players.forEach(Ge=>{Ge.beforeDestroy&&Ge.beforeDestroy()})}triggerCallback(Ge){const Je="start"==Ge?this._onStartFns:this._onDoneFns;Je.forEach(zt=>zt()),Je.length=0}}const st="!"},177:(un,Ye,k)=>{k.d(Ye,{AJ:()=>Ts,Jj:()=>ar,MD:()=>$s,N0:()=>Eo,P9:()=>Di,QT:()=>P,Sm:()=>At,Sq:()=>Cn,UE:()=>Li,VF:()=>G,Vy:()=>li,Xr:()=>vo,YU:()=>Ze,ZD:()=>w,_b:()=>ye,aZ:()=>ot,bT:()=>mr,fw:()=>vt,hb:()=>Te,hj:()=>Be,qQ:()=>ge});var _=k(4438);let V=null;function P(){return V}function w(b){V??=b}class G{}const ge=new _.nKC("");let Fe=(()=>{class b{historyGo(F){throw new Error("")}static#e=this.\u0275fac=function($){return new($||b)};static#t=this.\u0275prov=_.jDH({token:b,factory:()=>(0,_.WQX)(_e),providedIn:"platform"})}return b})();const Be=new _.nKC("");let _e=(()=>{class b extends Fe{constructor(){super(),this._doc=(0,_.WQX)(ge),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(F){const $=P().getGlobalEventTarget(this._doc,"window");return $.addEventListener("popstate",F,!1),()=>$.removeEventListener("popstate",F)}onHashChange(F){const $=P().getGlobalEventTarget(this._doc,"window");return $.addEventListener("hashchange",F,!1),()=>$.removeEventListener("hashchange",F)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(F){this._location.pathname=F}pushState(F,$,Ce){this._history.pushState(F,$,Ce)}replaceState(F,$,Ce){this._history.replaceState(F,$,Ce)}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}static#e=this.\u0275fac=function($){return new($||b)};static#t=this.\u0275prov=_.jDH({token:b,factory:()=>new b,providedIn:"platform"})}return b})();function me(b,X){if(0==b.length)return X;if(0==X.length)return b;let F=0;return b.endsWith("/")&&F++,X.startsWith("/")&&F++,2==F?b+X.substring(1):1==F?b+X:b+"/"+X}function $e(b){const X=b.match(/#|\?|$/),F=X&&X.index||b.length;return b.slice(0,F-("/"===b[F-1]?1:0))+b.slice(F)}function He(b){return b&&"?"!==b[0]?"?"+b:b}let Te=(()=>{class b{historyGo(F){throw new Error("")}static#e=this.\u0275fac=function($){return new($||b)};static#t=this.\u0275prov=_.jDH({token:b,factory:()=>(0,_.WQX)(At),providedIn:"root"})}return b})();const Ve=new _.nKC("");let At=(()=>{class b extends Te{constructor(F,$){super(),this._platformLocation=F,this._removeListenerFns=[],this._baseHref=$??this._platformLocation.getBaseHrefFromDOM()??(0,_.WQX)(ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return me(this._baseHref,F)}path(F=!1){const $=this._platformLocation.pathname+He(this._platformLocation.search),Ce=this._platformLocation.hash;return Ce&&F?`${$}${Ce}`:$}pushState(F,$,Ce,Tt){const Vt=this.prepareExternalUrl(Ce+He(Tt));this._platformLocation.pushState(F,$,Vt)}replaceState(F,$,Ce,Tt){const Vt=this.prepareExternalUrl(Ce+He(Tt));this._platformLocation.replaceState(F,$,Vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){this._platformLocation.historyGo?.(F)}static#e=this.\u0275fac=function($){return new($||b)(_.KVO(Fe),_.KVO(Ve,8))};static#t=this.\u0275prov=_.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})(),vt=(()=>{class b extends Te{constructor(F,$){super(),this._platformLocation=F,this._baseHref="",this._removeListenerFns=[],null!=$&&(this._baseHref=$)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}path(F=!1){const $=this._platformLocation.hash??"#";return $.length>0?$.substring(1):$}prepareExternalUrl(F){const $=me(this._baseHref,F);return $.length>0?"#"+$:$}pushState(F,$,Ce,Tt){let Vt=this.prepareExternalUrl(Ce+He(Tt));0==Vt.length&&(Vt=this._platformLocation.pathname),this._platformLocation.pushState(F,$,Vt)}replaceState(F,$,Ce,Tt){let Vt=this.prepareExternalUrl(Ce+He(Tt));0==Vt.length&&(Vt=this._platformLocation.pathname),this._platformLocation.replaceState(F,$,Vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){this._platformLocation.historyGo?.(F)}static#e=this.\u0275fac=function($){return new($||b)(_.KVO(Fe),_.KVO(Ve,8))};static#t=this.\u0275prov=_.jDH({token:b,factory:b.\u0275fac})}return b})(),ot=(()=>{class b{constructor(F){this._subject=new _.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=F;const $=this._locationStrategy.getBaseHref();this._basePath=function Y(b){if(new RegExp("^(https?:)?//").test(b)){const[,F]=b.split(/\/\/[^\/]+/);return F}return b}($e(We($))),this._locationStrategy.onPopState(Ce=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ce.state,type:Ce.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(F=!1){return this.normalize(this._locationStrategy.path(F))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(F,$=""){return this.path()==this.normalize(F+He($))}normalize(F){return b.stripTrailingSlash(function je(b,X){if(!b||!X.startsWith(b))return X;const F=X.substring(b.length);return""===F||["/",";","?","#"].includes(F[0])?F:X}(this._basePath,We(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._locationStrategy.prepareExternalUrl(F)}go(F,$="",Ce=null){this._locationStrategy.pushState(Ce,"",F,$),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+He($)),Ce)}replaceState(F,$="",Ce=null){this._locationStrategy.replaceState(Ce,"",F,$),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+He($)),Ce)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(F=0){this._locationStrategy.historyGo?.(F)}onUrlChange(F){return this._urlChangeListeners.push(F),this._urlChangeSubscription??=this.subscribe($=>{this._notifyUrlChangeListeners($.url,$.state)}),()=>{const $=this._urlChangeListeners.indexOf(F);this._urlChangeListeners.splice($,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(F="",$){this._urlChangeListeners.forEach(Ce=>Ce(F,$))}subscribe(F,$,Ce){return this._subject.subscribe({next:F,error:$,complete:Ce})}static#e=this.normalizeQueryParams=He;static#t=this.joinWithSlash=me;static#n=this.stripTrailingSlash=$e;static#r=this.\u0275fac=function($){return new($||b)(_.KVO(Te))};static#i=this.\u0275prov=_.jDH({token:b,factory:()=>function Jt(){return new ot((0,_.KVO)(Te))}(),providedIn:"root"})}return b})();function We(b){return b.replace(/\/index.html$/,"")}function ye(b,X){X=encodeURIComponent(X);for(const F of b.split(";")){const $=F.indexOf("="),[Ce,Tt]=-1==$?[F,""]:[F.slice(0,$),F.slice($+1)];if(Ce.trim()===X)return decodeURIComponent(Tt)}return null}const ve=/\s+/,mt=[];let Ze=(()=>{class b{constructor(F,$){this._ngEl=F,this._renderer=$,this.initialClasses=mt,this.stateMap=new Map}set klass(F){this.initialClasses=null!=F?F.trim().split(ve):mt}set ngClass(F){this.rawClass="string"==typeof F?F.trim().split(ve):F}ngDoCheck(){for(const $ of this.initialClasses)this._updateState($,!0);const F=this.rawClass;if(Array.isArray(F)||F instanceof Set)for(const $ of F)this._updateState($,!0);else if(null!=F)for(const $ of Object.keys(F))this._updateState($,!!F[$]);this._applyStateDiff()}_updateState(F,$){const Ce=this.stateMap.get(F);void 0!==Ce?(Ce.enabled!==$&&(Ce.changed=!0,Ce.enabled=$),Ce.touched=!0):this.stateMap.set(F,{enabled:$,changed:!0,touched:!0})}_applyStateDiff(){for(const F of this.stateMap){const $=F[0],Ce=F[1];Ce.changed?(this._toggleClass($,Ce.enabled),Ce.changed=!1):Ce.touched||(Ce.enabled&&this._toggleClass($,!1),this.stateMap.delete($)),Ce.touched=!1}}_toggleClass(F,$){(F=F.trim()).length>0&&F.split(ve).forEach(Ce=>{$?this._renderer.addClass(this._ngEl.nativeElement,Ce):this._renderer.removeClass(this._ngEl.nativeElement,Ce)})}static#e=this.\u0275fac=function($){return new($||b)(_.rXU(_.aKT),_.rXU(_.sFG))};static#t=this.\u0275dir=_.FsC({type:b,selectors:[["","ngClass",""]],inputs:{klass:[_.Mj6.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return b})();class xn{constructor(X,F,$,Ce){this.$implicit=X,this.ngForOf=F,this.index=$,this.count=Ce}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cn=(()=>{class b{set ngForOf(F){this._ngForOf=F,this._ngForOfDirty=!0}set ngForTrackBy(F){this._trackByFn=F}get ngForTrackBy(){return this._trackByFn}constructor(F,$,Ce){this._viewContainer=F,this._template=$,this._differs=Ce,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(F){F&&(this._template=F)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const F=this._ngForOf;!this._differ&&F&&(this._differ=this._differs.find(F).create(this.ngForTrackBy))}if(this._differ){const F=this._differ.diff(this._ngForOf);F&&this._applyChanges(F)}}_applyChanges(F){const $=this._viewContainer;F.forEachOperation((Ce,Tt,Vt)=>{if(null==Ce.previousIndex)$.createEmbeddedView(this._template,new xn(Ce.item,this._ngForOf,-1,-1),null===Vt?void 0:Vt);else if(null==Vt)$.remove(null===Tt?void 0:Tt);else if(null!==Tt){const Mn=$.get(Tt);$.move(Mn,Vt),Or(Mn,Ce)}});for(let Ce=0,Tt=$.length;Ce<Tt;Ce++){const Mn=$.get(Ce).context;Mn.index=Ce,Mn.count=Tt,Mn.ngForOf=this._ngForOf}F.forEachIdentityChange(Ce=>{Or($.get(Ce.currentIndex),Ce)})}static ngTemplateContextGuard(F,$){return!0}static#e=this.\u0275fac=function($){return new($||b)(_.rXU(_.c1b),_.rXU(_.C4Q),_.rXU(_._q3))};static#t=this.\u0275dir=_.FsC({type:b,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return b})();function Or(b,X){b.context.$implicit=X.item}let mr=(()=>{class b{constructor(F,$){this._viewContainer=F,this._context=new ci,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=$}set ngIf(F){this._context.$implicit=this._context.ngIf=F,this._updateView()}set ngIfThen(F){cs("ngIfThen",F),this._thenTemplateRef=F,this._thenViewRef=null,this._updateView()}set ngIfElse(F){cs("ngIfElse",F),this._elseTemplateRef=F,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(F,$){return!0}static#e=this.\u0275fac=function($){return new($||b)(_.rXU(_.c1b),_.rXU(_.C4Q))};static#t=this.\u0275dir=_.FsC({type:b,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return b})();class ci{constructor(){this.$implicit=null,this.ngIf=null}}function cs(b,X){if(X&&!X.createEmbeddedView)throw new Error(`${b} must be a TemplateRef, but received '${(0,_.Tbb)(X)}'.`)}function Qi(b,X){return new _.wOt(2100,!1)}class ea{createSubscription(X,F){return(0,_.O8t)(()=>X.subscribe({next:F,error:$=>{throw $}}))}dispose(X){(0,_.O8t)(()=>X.unsubscribe())}}class da{createSubscription(X,F){return X.then(F,$=>{throw $})}dispose(X){}}const Ia=new da,to=new ea;let ar=(()=>{class b{constructor(F){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=F}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(F){if(!this._obj){if(F)try{this.markForCheckOnValueUpdate=!1,this._subscribe(F)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return F!==this._obj?(this._dispose(),this.transform(F)):this._latestValue}_subscribe(F){this._obj=F,this._strategy=this._selectStrategy(F),this._subscription=this._strategy.createSubscription(F,$=>this._updateLatestValue(F,$))}_selectStrategy(F){if((0,_.jNT)(F))return Ia;if((0,_.zjR)(F))return to;throw Qi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(F,$){F===this._obj&&(this._latestValue=$,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function($){return new($||b)(_.rXU(_.gRc,16))};static#t=this.\u0275pipe=_.EJ8({name:"async",type:b,pure:!1,standalone:!0})}return b})(),Di=(()=>{class b{transform(F,$,Ce){if(null==F)return null;if(!this.supports(F))throw Qi();return F.slice($,Ce)}supports(F){return"string"==typeof F||Array.isArray(F)}static#e=this.\u0275fac=function($){return new($||b)};static#t=this.\u0275pipe=_.EJ8({name:"slice",type:b,pure:!1,standalone:!0})}return b})(),$s=(()=>{class b{static#e=this.\u0275fac=function($){return new($||b)};static#t=this.\u0275mod=_.$C({type:b});static#n=this.\u0275inj=_.G2t({})}return b})();const Ts="browser",Hs="server";function Li(b){return b===Ts}function li(b){return b===Hs}let vo=(()=>{class b{static#e=this.\u0275prov=(0,_.jDH)({token:b,providedIn:"root",factory:()=>Li((0,_.WQX)(_.Agw))?new is((0,_.WQX)(ge),window):new so})}return b})();class is{constructor(X,F){this.document=X,this.window=F,this.offset=()=>[0,0]}setOffset(X){this.offset=Array.isArray(X)?()=>X:X}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(X){this.window.scrollTo(X[0],X[1])}scrollToAnchor(X){const F=function Ni(b,X){const F=b.getElementById(X)||b.getElementsByName(X)[0];if(F)return F;if("function"==typeof b.createTreeWalker&&b.body&&"function"==typeof b.body.attachShadow){const $=b.createTreeWalker(b.body,NodeFilter.SHOW_ELEMENT);let Ce=$.currentNode;for(;Ce;){const Tt=Ce.shadowRoot;if(Tt){const Vt=Tt.getElementById(X)||Tt.querySelector(`[name="${X}"]`);if(Vt)return Vt}Ce=$.nextNode()}}return null}(this.document,X);F&&(this.scrollToElement(F),F.focus())}setHistoryScrollRestoration(X){this.window.history.scrollRestoration=X}scrollToElement(X){const F=X.getBoundingClientRect(),$=F.left+this.window.pageXOffset,Ce=F.top+this.window.pageYOffset,Tt=this.offset();this.window.scrollTo($-Tt[0],Ce-Tt[1])}}class so{setOffset(X){}getScrollPosition(){return[0,0]}scrollToPosition(X){}scrollToAnchor(X){}setHistoryScrollRestoration(X){}}class Eo{}},1626:(un,Ye,k)=>{k.d(Ye,{Qq:()=>lt,q1:()=>Wn}),k(467);var V=k(4438),P=k(7673),w=k(1985),G=k(8455),Pe=k(274),ge=k(5964),Fe=k(6354),Be=k(980),_e=k(5558),me=k(177);class $e{}class He{}class Te{constructor(ye){this.normalizedNames=new Map,this.lazyUpdate=null,ye?"string"==typeof ye?this.lazyInit=()=>{this.headers=new Map,ye.split("\n").forEach(ve=>{const mt=ve.indexOf(":");if(mt>0){const Ze=ve.slice(0,mt),Yt=Ze.toLowerCase(),Ut=ve.slice(mt+1).trim();this.maybeSetNormalizedName(Ze,Yt),this.headers.has(Yt)?this.headers.get(Yt).push(Ut):this.headers.set(Yt,[Ut])}})}:typeof Headers<"u"&&ye instanceof Headers?(this.headers=new Map,ye.forEach((ve,mt)=>{this.setHeaderEntries(mt,ve)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(ye).forEach(([ve,mt])=>{this.setHeaderEntries(ve,mt)})}:this.headers=new Map}has(ye){return this.init(),this.headers.has(ye.toLowerCase())}get(ye){this.init();const ve=this.headers.get(ye.toLowerCase());return ve&&ve.length>0?ve[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ye){return this.init(),this.headers.get(ye.toLowerCase())||null}append(ye,ve){return this.clone({name:ye,value:ve,op:"a"})}set(ye,ve){return this.clone({name:ye,value:ve,op:"s"})}delete(ye,ve){return this.clone({name:ye,value:ve,op:"d"})}maybeSetNormalizedName(ye,ve){this.normalizedNames.has(ve)||this.normalizedNames.set(ve,ye)}init(){this.lazyInit&&(this.lazyInit instanceof Te?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ye=>this.applyUpdate(ye)),this.lazyUpdate=null))}copyFrom(ye){ye.init(),Array.from(ye.headers.keys()).forEach(ve=>{this.headers.set(ve,ye.headers.get(ve)),this.normalizedNames.set(ve,ye.normalizedNames.get(ve))})}clone(ye){const ve=new Te;return ve.lazyInit=this.lazyInit&&this.lazyInit instanceof Te?this.lazyInit:this,ve.lazyUpdate=(this.lazyUpdate||[]).concat([ye]),ve}applyUpdate(ye){const ve=ye.name.toLowerCase();switch(ye.op){case"a":case"s":let mt=ye.value;if("string"==typeof mt&&(mt=[mt]),0===mt.length)return;this.maybeSetNormalizedName(ye.name,ve);const Ze=("a"===ye.op?this.headers.get(ve):void 0)||[];Ze.push(...mt),this.headers.set(ve,Ze);break;case"d":const Yt=ye.value;if(Yt){let Ut=this.headers.get(ve);if(!Ut)return;Ut=Ut.filter(xn=>-1===Yt.indexOf(xn)),0===Ut.length?(this.headers.delete(ve),this.normalizedNames.delete(ve)):this.headers.set(ve,Ut)}else this.headers.delete(ve),this.normalizedNames.delete(ve)}}setHeaderEntries(ye,ve){const mt=(Array.isArray(ve)?ve:[ve]).map(Yt=>Yt.toString()),Ze=ye.toLowerCase();this.headers.set(Ze,mt),this.maybeSetNormalizedName(ye,Ze)}forEach(ye){this.init(),Array.from(this.normalizedNames.keys()).forEach(ve=>ye(this.normalizedNames.get(ve),this.headers.get(ve)))}}class At{encodeKey(ye){return je(ye)}encodeValue(ye){return je(ye)}decodeKey(ye){return decodeURIComponent(ye)}decodeValue(ye){return decodeURIComponent(ye)}}const ot=/%(\d[a-f0-9])/gi,Jt={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function je(se){return encodeURIComponent(se).replace(ot,(ye,ve)=>Jt[ve]??ye)}function We(se){return`${se}`}class Y{constructor(ye={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ye.encoder||new At,ye.fromString){if(ye.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function vt(se,ye){const ve=new Map;return se.length>0&&se.replace(/^\?/,"").split("&").forEach(Ze=>{const Yt=Ze.indexOf("="),[Ut,xn]=-1==Yt?[ye.decodeKey(Ze),""]:[ye.decodeKey(Ze.slice(0,Yt)),ye.decodeValue(Ze.slice(Yt+1))],Cn=ve.get(Ut)||[];Cn.push(xn),ve.set(Ut,Cn)}),ve}(ye.fromString,this.encoder)}else ye.fromObject?(this.map=new Map,Object.keys(ye.fromObject).forEach(ve=>{const mt=ye.fromObject[ve],Ze=Array.isArray(mt)?mt.map(We):[We(mt)];this.map.set(ve,Ze)})):this.map=null}has(ye){return this.init(),this.map.has(ye)}get(ye){this.init();const ve=this.map.get(ye);return ve?ve[0]:null}getAll(ye){return this.init(),this.map.get(ye)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ye,ve){return this.clone({param:ye,value:ve,op:"a"})}appendAll(ye){const ve=[];return Object.keys(ye).forEach(mt=>{const Ze=ye[mt];Array.isArray(Ze)?Ze.forEach(Yt=>{ve.push({param:mt,value:Yt,op:"a"})}):ve.push({param:mt,value:Ze,op:"a"})}),this.clone(ve)}set(ye,ve){return this.clone({param:ye,value:ve,op:"s"})}delete(ye,ve){return this.clone({param:ye,value:ve,op:"d"})}toString(){return this.init(),this.keys().map(ye=>{const ve=this.encoder.encodeKey(ye);return this.map.get(ye).map(mt=>ve+"="+this.encoder.encodeValue(mt)).join("&")}).filter(ye=>""!==ye).join("&")}clone(ye){const ve=new Y({encoder:this.encoder});return ve.cloneFrom=this.cloneFrom||this,ve.updates=(this.updates||[]).concat(ye),ve}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ye=>this.map.set(ye,this.cloneFrom.map.get(ye))),this.updates.forEach(ye=>{switch(ye.op){case"a":case"s":const ve=("a"===ye.op?this.map.get(ye.param):void 0)||[];ve.push(We(ye.value)),this.map.set(ye.param,ve);break;case"d":if(void 0===ye.value){this.map.delete(ye.param);break}{let mt=this.map.get(ye.param)||[];const Ze=mt.indexOf(We(ye.value));-1!==Ze&&mt.splice(Ze,1),mt.length>0?this.map.set(ye.param,mt):this.map.delete(ye.param)}}}),this.cloneFrom=this.updates=null)}}class De{constructor(){this.map=new Map}set(ye,ve){return this.map.set(ye,ve),this}get(ye){return this.map.has(ye)||this.map.set(ye,ye.defaultValue()),this.map.get(ye)}delete(ye){return this.map.delete(ye),this}has(ye){return this.map.has(ye)}keys(){return this.map.keys()}}function st(se){return typeof ArrayBuffer<"u"&&se instanceof ArrayBuffer}function le(se){return typeof Blob<"u"&&se instanceof Blob}function Ge(se){return typeof FormData<"u"&&se instanceof FormData}class zt{constructor(ye,ve,mt,Ze){let Yt;if(this.url=ve,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ye.toUpperCase(),function rt(se){switch(se){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Ze?(this.body=void 0!==mt?mt:null,Yt=Ze):Yt=mt,Yt&&(this.reportProgress=!!Yt.reportProgress,this.withCredentials=!!Yt.withCredentials,Yt.responseType&&(this.responseType=Yt.responseType),Yt.headers&&(this.headers=Yt.headers),Yt.context&&(this.context=Yt.context),Yt.params&&(this.params=Yt.params),this.transferCache=Yt.transferCache),this.headers??=new Te,this.context??=new De,this.params){const Ut=this.params.toString();if(0===Ut.length)this.urlWithParams=ve;else{const xn=ve.indexOf("?");this.urlWithParams=ve+(-1===xn?"?":xn<ve.length-1?"&":"")+Ut}}else this.params=new Y,this.urlWithParams=ve}serializeBody(){return null===this.body?null:"string"==typeof this.body||st(this.body)||le(this.body)||Ge(this.body)||function Je(se){return typeof URLSearchParams<"u"&&se instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Y?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ge(this.body)?null:le(this.body)?this.body.type||null:st(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Y?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ye={}){const ve=ye.method||this.method,mt=ye.url||this.url,Ze=ye.responseType||this.responseType,Yt=ye.transferCache??this.transferCache,Ut=void 0!==ye.body?ye.body:this.body,xn=ye.withCredentials??this.withCredentials,Cn=ye.reportProgress??this.reportProgress;let Or=ye.headers||this.headers,ti=ye.params||this.params;const mr=ye.context??this.context;return void 0!==ye.setHeaders&&(Or=Object.keys(ye.setHeaders).reduce((ci,cs)=>ci.set(cs,ye.setHeaders[cs]),Or)),ye.setParams&&(ti=Object.keys(ye.setParams).reduce((ci,cs)=>ci.set(cs,ye.setParams[cs]),ti)),new zt(ve,mt,Ut,{params:ti,headers:Or,context:mr,reportProgress:Cn,responseType:Ze,withCredentials:xn,transferCache:Yt})}}var Pt=function(se){return se[se.Sent=0]="Sent",se[se.UploadProgress=1]="UploadProgress",se[se.ResponseHeader=2]="ResponseHeader",se[se.DownloadProgress=3]="DownloadProgress",se[se.Response=4]="Response",se[se.User=5]="User",se}(Pt||{});class Kt{constructor(ye,ve=xe.Ok,mt="OK"){this.headers=ye.headers||new Te,this.status=void 0!==ye.status?ye.status:ve,this.statusText=ye.statusText||mt,this.url=ye.url||null,this.ok=this.status>=200&&this.status<300}}class Bt extends Kt{constructor(ye={}){super(ye),this.type=Pt.ResponseHeader}clone(ye={}){return new Bt({headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class tn extends Kt{constructor(ye={}){super(ye),this.type=Pt.Response,this.body=void 0!==ye.body?ye.body:null}clone(ye={}){return new tn({body:void 0!==ye.body?ye.body:this.body,headers:ye.headers||this.headers,status:void 0!==ye.status?ye.status:this.status,statusText:ye.statusText||this.statusText,url:ye.url||this.url||void 0})}}class Tn extends Kt{constructor(ye){super(ye,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ye.url||"(unknown url)"}`:`Http failure response for ${ye.url||"(unknown url)"}: ${ye.status} ${ye.statusText}`,this.error=ye.error||null}}var xe=function(se){return se[se.Continue=100]="Continue",se[se.SwitchingProtocols=101]="SwitchingProtocols",se[se.Processing=102]="Processing",se[se.EarlyHints=103]="EarlyHints",se[se.Ok=200]="Ok",se[se.Created=201]="Created",se[se.Accepted=202]="Accepted",se[se.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",se[se.NoContent=204]="NoContent",se[se.ResetContent=205]="ResetContent",se[se.PartialContent=206]="PartialContent",se[se.MultiStatus=207]="MultiStatus",se[se.AlreadyReported=208]="AlreadyReported",se[se.ImUsed=226]="ImUsed",se[se.MultipleChoices=300]="MultipleChoices",se[se.MovedPermanently=301]="MovedPermanently",se[se.Found=302]="Found",se[se.SeeOther=303]="SeeOther",se[se.NotModified=304]="NotModified",se[se.UseProxy=305]="UseProxy",se[se.Unused=306]="Unused",se[se.TemporaryRedirect=307]="TemporaryRedirect",se[se.PermanentRedirect=308]="PermanentRedirect",se[se.BadRequest=400]="BadRequest",se[se.Unauthorized=401]="Unauthorized",se[se.PaymentRequired=402]="PaymentRequired",se[se.Forbidden=403]="Forbidden",se[se.NotFound=404]="NotFound",se[se.MethodNotAllowed=405]="MethodNotAllowed",se[se.NotAcceptable=406]="NotAcceptable",se[se.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",se[se.RequestTimeout=408]="RequestTimeout",se[se.Conflict=409]="Conflict",se[se.Gone=410]="Gone",se[se.LengthRequired=411]="LengthRequired",se[se.PreconditionFailed=412]="PreconditionFailed",se[se.PayloadTooLarge=413]="PayloadTooLarge",se[se.UriTooLong=414]="UriTooLong",se[se.UnsupportedMediaType=415]="UnsupportedMediaType",se[se.RangeNotSatisfiable=416]="RangeNotSatisfiable",se[se.ExpectationFailed=417]="ExpectationFailed",se[se.ImATeapot=418]="ImATeapot",se[se.MisdirectedRequest=421]="MisdirectedRequest",se[se.UnprocessableEntity=422]="UnprocessableEntity",se[se.Locked=423]="Locked",se[se.FailedDependency=424]="FailedDependency",se[se.TooEarly=425]="TooEarly",se[se.UpgradeRequired=426]="UpgradeRequired",se[se.PreconditionRequired=428]="PreconditionRequired",se[se.TooManyRequests=429]="TooManyRequests",se[se.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",se[se.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",se[se.InternalServerError=500]="InternalServerError",se[se.NotImplemented=501]="NotImplemented",se[se.BadGateway=502]="BadGateway",se[se.ServiceUnavailable=503]="ServiceUnavailable",se[se.GatewayTimeout=504]="GatewayTimeout",se[se.HttpVersionNotSupported=505]="HttpVersionNotSupported",se[se.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",se[se.InsufficientStorage=507]="InsufficientStorage",se[se.LoopDetected=508]="LoopDetected",se[se.NotExtended=510]="NotExtended",se[se.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",se}(xe||{});function Qe(se,ye){return{body:ye,headers:se.headers,context:se.context,observe:se.observe,params:se.params,reportProgress:se.reportProgress,responseType:se.responseType,withCredentials:se.withCredentials,transferCache:se.transferCache}}let lt=(()=>{class se{constructor(ve){this.handler=ve}request(ve,mt,Ze={}){let Yt;if(ve instanceof zt)Yt=ve;else{let Cn,Or;Cn=Ze.headers instanceof Te?Ze.headers:new Te(Ze.headers),Ze.params&&(Or=Ze.params instanceof Y?Ze.params:new Y({fromObject:Ze.params})),Yt=new zt(ve,mt,void 0!==Ze.body?Ze.body:null,{headers:Cn,context:Ze.context,params:Or,reportProgress:Ze.reportProgress,responseType:Ze.responseType||"json",withCredentials:Ze.withCredentials,transferCache:Ze.transferCache})}const Ut=(0,P.of)(Yt).pipe((0,Pe.H)(Cn=>this.handler.handle(Cn)));if(ve instanceof zt||"events"===Ze.observe)return Ut;const xn=Ut.pipe((0,ge.p)(Cn=>Cn instanceof tn));switch(Ze.observe||"body"){case"body":switch(Yt.responseType){case"arraybuffer":return xn.pipe((0,Fe.T)(Cn=>{if(null!==Cn.body&&!(Cn.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Cn.body}));case"blob":return xn.pipe((0,Fe.T)(Cn=>{if(null!==Cn.body&&!(Cn.body instanceof Blob))throw new Error("Response is not a Blob.");return Cn.body}));case"text":return xn.pipe((0,Fe.T)(Cn=>{if(null!==Cn.body&&"string"!=typeof Cn.body)throw new Error("Response is not a string.");return Cn.body}));default:return xn.pipe((0,Fe.T)(Cn=>Cn.body))}case"response":return xn;default:throw new Error(`Unreachable: unhandled observe type ${Ze.observe}}`)}}delete(ve,mt={}){return this.request("DELETE",ve,mt)}get(ve,mt={}){return this.request("GET",ve,mt)}head(ve,mt={}){return this.request("HEAD",ve,mt)}jsonp(ve,mt){return this.request("JSONP",ve,{params:(new Y).append(mt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(ve,mt={}){return this.request("OPTIONS",ve,mt)}patch(ve,mt,Ze={}){return this.request("PATCH",ve,Qe(Ze,mt))}post(ve,mt,Ze={}){return this.request("POST",ve,Qe(Ze,mt))}put(ve,mt,Ze={}){return this.request("PUT",ve,Qe(Ze,mt))}static#e=this.\u0275fac=function(mt){return new(mt||se)(V.KVO($e))};static#t=this.\u0275prov=V.jDH({token:se,factory:se.\u0275fac})}return se})();function Dn(se,ye){return ye(se)}function An(se,ye){return(ve,mt)=>ye.intercept(ve,{handle:Ze=>se(Ze,mt)})}const at=new V.nKC(""),In=new V.nKC(""),Qn=new V.nKC(""),Xn=new V.nKC("");function bt(){let se=null;return(ye,ve)=>{null===se&&(se=((0,V.WQX)(at,{optional:!0})??[]).reduceRight(An,Dn));const mt=(0,V.WQX)(V.TgB),Ze=mt.add();return se(ye,ve).pipe((0,Be.j)(()=>mt.remove(Ze)))}}let Rt=(()=>{class se extends $e{constructor(ve,mt){super(),this.backend=ve,this.injector=mt,this.chain=null,this.pendingTasks=(0,V.WQX)(V.TgB);const Ze=(0,V.WQX)(Xn,{optional:!0});this.backend=Ze??ve}handle(ve){if(null===this.chain){const Ze=Array.from(new Set([...this.injector.get(In),...this.injector.get(Qn,[])]));this.chain=Ze.reduceRight((Yt,Ut)=>function jn(se,ye,ve){return(mt,Ze)=>(0,V.N4e)(ve,()=>ye(mt,Yt=>se(Yt,Ze)))}(Yt,Ut,this.injector),Dn)}const mt=this.pendingTasks.add();return this.chain(ve,Ze=>this.backend.handle(Ze)).pipe((0,Be.j)(()=>this.pendingTasks.remove(mt)))}static#e=this.\u0275fac=function(mt){return new(mt||se)(V.KVO(He),V.KVO(V.uvJ))};static#t=this.\u0275prov=V.jDH({token:se,factory:se.\u0275fac})}return se})();const hs=/^\)\]\}',?\n/;let Ti=(()=>{class se{constructor(ve){this.xhrFactory=ve}handle(ve){if("JSONP"===ve.method)throw new V.wOt(-2800,!1);const mt=this.xhrFactory;return(mt.\u0275loadImpl?(0,G.H)(mt.\u0275loadImpl()):(0,P.of)(null)).pipe((0,_e.n)(()=>new w.c(Yt=>{const Ut=mt.build();if(Ut.open(ve.method,ve.urlWithParams),ve.withCredentials&&(Ut.withCredentials=!0),ve.headers.forEach((Ir,Pr)=>Ut.setRequestHeader(Ir,Pr.join(","))),ve.headers.has("Accept")||Ut.setRequestHeader("Accept","application/json, text/plain, */*"),!ve.headers.has("Content-Type")){const Ir=ve.detectContentTypeHeader();null!==Ir&&Ut.setRequestHeader("Content-Type",Ir)}if(ve.responseType){const Ir=ve.responseType.toLowerCase();Ut.responseType="json"!==Ir?Ir:"text"}const xn=ve.serializeBody();let Cn=null;const Or=()=>{if(null!==Cn)return Cn;const Ir=Ut.statusText||"OK",Pr=new Te(Ut.getAllResponseHeaders()),ui=function Ln(se){return"responseURL"in se&&se.responseURL?se.responseURL:/^X-Request-URL:/m.test(se.getAllResponseHeaders())?se.getResponseHeader("X-Request-URL"):null}(Ut)||ve.url;return Cn=new Bt({headers:Pr,status:Ut.status,statusText:Ir,url:ui}),Cn},ti=()=>{let{headers:Ir,status:Pr,statusText:ui,url:cr}=Or(),_r=null;Pr!==xe.NoContent&&(_r=typeof Ut.response>"u"?Ut.responseText:Ut.response),0===Pr&&(Pr=_r?xe.Ok:0);let Yr=Pr>=200&&Pr<300;if("json"===ve.responseType&&"string"==typeof _r){const ni=_r;_r=_r.replace(hs,"");try{_r=""!==_r?JSON.parse(_r):null}catch(Jr){_r=ni,Yr&&(Yr=!1,_r={error:Jr,text:_r})}}Yr?(Yt.next(new tn({body:_r,headers:Ir,status:Pr,statusText:ui,url:cr||void 0})),Yt.complete()):Yt.error(new Tn({error:_r,headers:Ir,status:Pr,statusText:ui,url:cr||void 0}))},mr=Ir=>{const{url:Pr}=Or(),ui=new Tn({error:Ir,status:Ut.status||0,statusText:Ut.statusText||"Unknown Error",url:Pr||void 0});Yt.error(ui)};let ci=!1;const cs=Ir=>{ci||(Yt.next(Or()),ci=!0);let Pr={type:Pt.DownloadProgress,loaded:Ir.loaded};Ir.lengthComputable&&(Pr.total=Ir.total),"text"===ve.responseType&&Ut.responseText&&(Pr.partialText=Ut.responseText),Yt.next(Pr)},Hi=Ir=>{let Pr={type:Pt.UploadProgress,loaded:Ir.loaded};Ir.lengthComputable&&(Pr.total=Ir.total),Yt.next(Pr)};return Ut.addEventListener("load",ti),Ut.addEventListener("error",mr),Ut.addEventListener("timeout",mr),Ut.addEventListener("abort",mr),ve.reportProgress&&(Ut.addEventListener("progress",cs),null!==xn&&Ut.upload&&Ut.upload.addEventListener("progress",Hi)),Ut.send(xn),Yt.next({type:Pt.Sent}),()=>{Ut.removeEventListener("error",mr),Ut.removeEventListener("abort",mr),Ut.removeEventListener("load",ti),Ut.removeEventListener("timeout",mr),ve.reportProgress&&(Ut.removeEventListener("progress",cs),null!==xn&&Ut.upload&&Ut.upload.removeEventListener("progress",Hi)),Ut.readyState!==Ut.DONE&&Ut.abort()}})))}static#e=this.\u0275fac=function(mt){return new(mt||se)(V.KVO(me.N0))};static#t=this.\u0275prov=V.jDH({token:se,factory:se.\u0275fac})}return se})();const Wt=new V.nKC(""),Qr=new V.nKC("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),rn=new V.nKC("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Xr{}let Nn=(()=>{class se{constructor(ve,mt,Ze){this.doc=ve,this.platform=mt,this.cookieName=Ze,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const ve=this.doc.cookie||"";return ve!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,me._b)(ve,this.cookieName),this.lastCookieString=ve),this.lastToken}static#e=this.\u0275fac=function(mt){return new(mt||se)(V.KVO(me.qQ),V.KVO(V.Agw),V.KVO(Qr))};static#t=this.\u0275prov=V.jDH({token:se,factory:se.\u0275fac})}return se})();function oi(se,ye){const ve=se.url.toLowerCase();if(!(0,V.WQX)(Wt)||"GET"===se.method||"HEAD"===se.method||ve.startsWith("http://")||ve.startsWith("https://"))return ye(se);const mt=(0,V.WQX)(Xr).getToken(),Ze=(0,V.WQX)(rn);return null!=mt&&!se.headers.has(Ze)&&(se=se.clone({headers:se.headers.set(Ze,mt)})),ye(se)}var Ie=function(se){return se[se.Interceptors=0]="Interceptors",se[se.LegacyInterceptors=1]="LegacyInterceptors",se[se.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",se[se.NoXsrfProtection=3]="NoXsrfProtection",se[se.JsonpSupport=4]="JsonpSupport",se[se.RequestsMadeViaParent=5]="RequestsMadeViaParent",se[se.Fetch=6]="Fetch",se}(Ie||{});function Ke(...se){const ye=[lt,Ti,Rt,{provide:$e,useExisting:Rt},{provide:He,useExisting:Ti},{provide:In,useValue:oi,multi:!0},{provide:Wt,useValue:!0},{provide:Xr,useClass:Nn}];for(const ve of se)ye.push(...ve.\u0275providers);return(0,V.EmA)(ye)}const he=new V.nKC("");function q(){return function Ee(se,ye){return{\u0275kind:se,\u0275providers:ye}}(Ie.LegacyInterceptors,[{provide:he,useFactory:bt},{provide:In,useExisting:he,multi:!0}])}let Wn=(()=>{class se{static#e=this.\u0275fac=function(mt){return new(mt||se)};static#t=this.\u0275mod=V.$C({type:se});static#n=this.\u0275inj=V.G2t({providers:[Ke(q())]})}return se})()},4438:(un,Ye,k)=>{k.d(Ye,{bc$:()=>bg,iLQ:()=>MC,sZ2:()=>wf,hnV:()=>yD,Hbi:()=>tR,o8S:()=>yd,BIS:()=>dE,gRc:()=>RD,Ql9:()=>bM,Ocv:()=>kM,Z63:()=>zs,aKT:()=>hc,uvJ:()=>si,zcH:()=>No,bkB:()=>Wa,$GK:()=>ar,nKC:()=>Ze,zZn:()=>mo,_q3:()=>LC,MKu:()=>UC,xe9:()=>Gv,Co$:()=>t_,Vns:()=>Tu,SKi:()=>Is,Xx1:()=>Li,Agw:()=>Df,PLl:()=>Tf,sFG:()=>_u,_9s:()=>qy,czy:()=>Ka,kdw:()=>Gi,C4Q:()=>Th,NYb:()=>EM,giA:()=>mD,xvI:()=>qP,RxE:()=>cD,c1b:()=>$c,gXe:()=>_s,mal:()=>To,L39:()=>MR,Ol2:()=>Nt,w6W:()=>gd,oH4:()=>bD,Rfq:()=>oi,WQX:()=>hn,naY:()=>BM,QuC:()=>On,EmA:()=>hi,fpN:()=>eR,HJs:()=>LR,N4e:()=>Wo,O8t:()=>OR,An2:()=>Ue,H3F:()=>uD,H8p:()=>Fn,KH2:()=>Bp,TgB:()=>Qa,wOt:()=>pt,WHO:()=>pD,e01:()=>gD,H5H:()=>uC,Zy3:()=>jr,mq5:()=>Cw,JZv:()=>Ln,LfX:()=>It,plB:()=>yu,jNT:()=>SC,zjR:()=>_D,TL$:()=>Ag,Tbb:()=>nn,Vt3:()=>Ep,Mj6:()=>Ds,GFd:()=>la,OA$:()=>wt,Jv_:()=>xT,aNF:()=>kT,R7$:()=>KE,BMQ:()=>qI,AVh:()=>eC,wni:()=>uT,VBU:()=>L,FsC:()=>_t,jDH:()=>Kn,G2t:()=>as,$C:()=>be,EJ8:()=>St,rXU:()=>td,nrm:()=>oC,k0s:()=>Nv,j41:()=>Ov,RV6:()=>vw,xGo:()=>Fd,KVO:()=>ri,kS0:()=>Ys,QTQ:()=>Ty,bIt:()=>hC,lsd:()=>hT,XpG:()=>Zw,nI1:()=>HT,bMT:()=>GT,i5U:()=>zT,brH:()=>WT,Y8G:()=>JI,mGM:()=>dT,Njj:()=>Vu,eBV:()=>Ol,B4B:()=>Nf,n$t:()=>ay,wjB:()=>FT,DNE:()=>Cp,EFF:()=>CT,JRh:()=>gC,SpI:()=>Lv,DH7:()=>OT,mxI:()=>_C,R50:()=>mC,GBs:()=>lT}),k(467);let P=null,G=1;const Pe=Symbol("SIGNAL");function ge(e){const n=P;return P=e,n}function Te(e){if((!De(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==G)){if(!e.producerMustRecompute(e)&&!je(e))return e.dirty=!1,void(e.lastCleanEpoch=G);e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=G}}function je(e){rt(e);for(let n=0;n<e.producerNode.length;n++){const i=e.producerNode[n],s=e.producerLastReadVersion[n];if(s!==i.version||(Te(i),s!==i.version))return!0}return!1}function te(e,n){if(function st(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),rt(e),1===e.liveConsumerNode.length)for(let s=0;s<e.producerNode.length;s++)te(e.producerNode[s],e.producerIndexOfThis[s]);const i=e.liveConsumerNode.length-1;if(e.liveConsumerNode[n]=e.liveConsumerNode[i],e.liveConsumerIndexOfThis[n]=e.liveConsumerIndexOfThis[i],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,n<e.liveConsumerNode.length){const s=e.liveConsumerIndexOfThis[n],c=e.liveConsumerNode[n];rt(c),c.producerIndexOfThis[s]=n}}function De(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function rt(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let Bt=null;var jn=k(1413),at=k(8359),In=k(4412),Qn=k(6354);const bt="https://g.co/ng/security#xss";class pt extends Error{constructor(n,i){super(jr(n,i)),this.code=n}}function jr(e,n){return`NG0${Math.abs(e)}${n?": "+n:""}`}function Pn(e){return{toString:e}.toString()}const xr="__parameters__";function Sr(e,n,i){return Pn(()=>{const s=function $i(e){return function(...i){if(e){const s=e(...i);for(const c in s)this[c]=s[c]}}}(n);function c(...l){if(this instanceof c)return s.apply(this,l),this;const p=new c(...l);return y.annotation=p,y;function y(A,U,Q){const ce=A.hasOwnProperty(xr)?A[xr]:Object.defineProperty(A,xr,{value:[]})[xr];for(;ce.length<=Q;)ce.push(null);return(ce[Q]=ce[Q]||[]).push(p),A}}return i&&(c.prototype=Object.create(i.prototype)),c.prototype.ngMetadataName=e,c.annotationCls=c,c})}const Ln=globalThis;function Un(e){for(let n in e)if(e[n]===Un)return n;throw Error("Could not find renamed property on target object.")}function Qr(e,n){for(const i in n)n.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=n[i])}function nn(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(nn).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const n=e.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function rn(e,n){return null==e||""===e?null===n?"":n:null==n||""===n?e:e+" "+n}const Nn=Un({__forward_ref__:Un});function oi(e){return e.__forward_ref__=oi,e.toString=function(){return nn(this())},e}function Re(e){return Ie(e)?e():e}function Ie(e){return"function"==typeof e&&e.hasOwnProperty(Nn)&&e.__forward_ref__===oi}function Kn(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function as(e){return{providers:e.providers||[],imports:e.imports||[]}}function qi(e){return tt(e,se)||tt(e,ve)}function It(e){return null!==qi(e)}function tt(e,n){return e.hasOwnProperty(n)?e[n]:null}function ln(e){return e&&(e.hasOwnProperty(ye)||e.hasOwnProperty(mt))?e[ye]:null}const se=Un({\u0275prov:Un}),ye=Un({\u0275inj:Un}),ve=Un({ngInjectableDef:Un}),mt=Un({ngInjectorDef:Un});class Ze{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=Kn({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ir(e){return e&&!!e.\u0275providers}const Pr=Un({\u0275cmp:Un}),ui=Un({\u0275dir:Un}),cr=Un({\u0275pipe:Un}),_r=Un({\u0275mod:Un}),Yr=Un({\u0275fac:Un}),ni=Un({__NG_ELEMENT_ID__:Un}),Jr=Un({__NG_ENV_ID__:Un});function $n(e){return"string"==typeof e?e:null==e?"":String(e)}function to(e,n){throw new pt(-201,!1)}var ar=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(ar||{});let yo;function no(){return yo}function Cr(e){const n=yo;return yo=e,n}function $o(e,n,i){const s=qi(e);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:i&ar.Optional?null:void 0!==n?n:void to()}const Cs={},Nr="__NG_DI_FLAG__",ws="ngTempTokenPath",Dr=/\n/gm,ro="__source";let Wr;function gi(e){const n=Wr;return Wr=e,n}function Ur(e,n=ar.Default){if(void 0===Wr)throw new pt(-203,!1);return null===Wr?$o(e,void 0,n):Wr.get(e,n&ar.Optional?null:void 0,n)}function ri(e,n=ar.Default){return(no()||Ur)(Re(e),n)}function hn(e,n=ar.Default){return ri(e,Di(n))}function Di(e){return typeof e>"u"||"number"==typeof e?e:(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function js(e){const n=[];for(let i=0;i<e.length;i++){const s=Re(e[i]);if(Array.isArray(s)){if(0===s.length)throw new pt(900,!1);let c,l=ar.Default;for(let p=0;p<s.length;p++){const y=s[p],A=Ts(y);"number"==typeof A?-1===A?c=y.token:l|=A:c=y}n.push(ri(c,l))}else n.push(ri(s))}return n}function $s(e,n){return e[Nr]=n,e.prototype[Nr]=n,e}function Ts(e){return e[Nr]}const Li=$s(Sr("Optional"),8),Gi=$s(Sr("SkipSelf"),4);function zi(e,n){return e.hasOwnProperty(Yr)?e[Yr]:null}function Ni(e,n){e.forEach(i=>Array.isArray(i)?Ni(i,n):n(i))}function so(e,n,i){n>=e.length?e.push(i):e.splice(n,0,i)}function Eo(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Xi(e,n,i){let s=mi(e,n);return s>=0?e[1|s]=i:(s=~s,function fs(e,n,i,s){let c=e.length;if(c==n)e.push(i,s);else if(1===c)e.push(s,e[0]),e[0]=i;else{for(c--,e.push(e[c-1],e[c]);c>n;)e[c]=e[c-2],c--;e[n]=i,e[n+1]=s}}(e,s,n,i)),s}function Gs(e,n){const i=mi(e,n);if(i>=0)return e[1|i]}function mi(e,n){return function zo(e,n,i){let s=0,c=e.length>>i;for(;c!==s;){const l=s+(c-s>>1),p=e[l<<i];if(n===p)return l<<i;p>n?c=l:s=l+1}return~(c<<i)}(e,n,1)}const ls={},Tr=[],zs=new Ze(""),ha=new Ze("",-1),Kr=new Ze("");class oo{get(n,i=Cs){if(i===Cs){const s=new Error(`NullInjectorError: No provider for ${nn(n)}!`);throw s.name="NullInjectorError",s}return i}}var dr=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(dr||{}),_s=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(_s||{}),Ds=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Ds||{});function Po(e,n,i){let s=e.length;for(;;){const c=e.indexOf(n,i);if(-1===c)return c;if(0===c||e.charCodeAt(c-1)<=32){const l=n.length;if(c+l===s||e.charCodeAt(c+l)<=32)return c}i=c+1}}function xi(e,n,i){let s=0;for(;s<i.length;){const c=i[s];if("number"==typeof c){if(0!==c)break;s++;const l=i[s++],p=i[s++],y=i[s++];e.setAttribute(n,p,y,l)}else{const l=c,p=i[++s];K(l)?e.setProperty(n,l,p):e.setAttribute(n,l,p),s++}}return s}function H(e){return 3===e||4===e||6===e}function K(e){return 64===e.charCodeAt(0)}function O(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let i=-1;for(let s=0;s<n.length;s++){const c=n[s];"number"==typeof c?i=c:0===i||ee(e,i,c,null,-1===i||2===i?n[++s]:null)}}return e}function ee(e,n,i,s,c){let l=0,p=e.length;if(-1===n)p=-1;else for(;l<e.length;){const y=e[l++];if("number"==typeof y){if(y===n){p=-1;break}if(y>n){p=l-1;break}}}for(;l<e.length;){const y=e[l];if("number"==typeof y)break;if(y===i){if(null===s)return void(null!==c&&(e[l+1]=c));if(s===e[l+1])return void(e[l+2]=c)}l++,null!==s&&l++,null!==c&&l++}-1!==p&&(e.splice(p,0,n),l=p+1),e.splice(l++,0,i),null!==s&&e.splice(l++,0,s),null!==c&&e.splice(l++,0,c)}const Se="ng-template";function fn(e,n,i,s){let c=0;if(s){for(;c<n.length&&"string"==typeof n[c];c+=2)if("class"===n[c]&&-1!==Po(n[c+1].toLowerCase(),i,0))return!0}else if(ir(e))return!1;if(c=n.indexOf(1,c),c>-1){let l;for(;++c<n.length&&"string"==typeof(l=n[c]);)if(l.toLowerCase()===i)return!0}return!1}function ir(e){return 4===e.type&&e.value!==Se}function As(e,n,i){return n===(4!==e.type||i?e.value:Se)}function Ws(e,n,i){let s=4;const c=e.attrs,l=null!==c?function Ja(e){for(let n=0;n<e.length;n++)if(H(e[n]))return n;return e.length}(c):0;let p=!1;for(let y=0;y<n.length;y++){const A=n[y];if("number"!=typeof A){if(!p)if(4&s){if(s=2|1&s,""!==A&&!As(e,A,i)||""===A&&1===n.length){if(di(s))return!1;p=!0}}else if(8&s){if(null===c||!fn(e,c,A,i)){if(di(s))return!1;p=!0}}else{const U=n[++y],Q=ao(A,c,ir(e),i);if(-1===Q){if(di(s))return!1;p=!0;continue}if(""!==U){let ce;if(ce=Q>l?"":c[Q+1].toLowerCase(),2&s&&U!==ce){if(di(s))return!1;p=!0}}}}else{if(!p&&!di(s)&&!di(A))return!1;if(p&&di(A))continue;p=!1,s=A|1&s}}return di(s)||p}function di(e){return!(1&e)}function ao(e,n,i,s){if(null===n)return-1;let c=0;if(s||!i){let l=!1;for(;c<n.length;){const p=n[c];if(p===e)return c;if(3===p||6===p)l=!0;else{if(1===p||2===p){let y=n[++c];for(;"string"==typeof y;)y=n[++c];continue}if(4===p)break;if(0===p){c+=4;continue}}c+=l?1:2}return-1}return function Zr(e,n){let i=e.indexOf(4);if(i>-1)for(i++;i<e.length;){const s=e[i];if("number"==typeof s)return-1;if(s===n)return i;i++}return-1}(n,e)}function Ca(e,n,i=!1){for(let s=0;s<n.length;s++)if(Ws(e,n[s],i))return!0;return!1}function wa(e,n){return e?":not("+n.trim()+")":n}function re(e){let n=e[0],i=1,s=2,c="",l=!1;for(;i<e.length;){let p=e[i];if("string"==typeof p)if(2&s){const y=e[++i];c+="["+p+(y.length>0?'="'+y+'"':"")+"]"}else 8&s?c+="."+p:4&s&&(c+=" "+p);else""!==c&&!di(p)&&(n+=wa(l,c),c=""),s=p,l=l||!di(s);i++}return""!==c&&(n+=wa(l,c)),n}function L(e){return Pn(()=>{const n=Zn(e),i={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===dr.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||_s.Emulated,styles:e.styles||Tr,_:null,schemas:e.schemas||null,tView:null,id:""};yr(i);const s=e.dependencies;return i.directiveDefs=wr(s,!1),i.pipeDefs=wr(s,!0),i.id=function gs(e){let n=0;const i=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const c of i)n=Math.imul(31,n)+c.charCodeAt(0)|0;return n+=2147483648,"c"+n}(i),i})}function Z(e){return $t(e)||Zt(e)}function de(e){return null!==e}function be(e){return Pn(()=>({type:e.type,bootstrap:e.bootstrap||Tr,declarations:e.declarations||Tr,imports:e.imports||Tr,exports:e.exports||Tr,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Le(e,n){if(null==e)return ls;const i={};for(const s in e)if(e.hasOwnProperty(s)){const c=e[s];let l,p,y=Ds.None;Array.isArray(c)?(y=c[0],l=c[1],p=c[2]??l):(l=c,p=c),n?(i[l]=y!==Ds.None?[s,y]:s,n[l]=p):i[l]=s}return i}function _t(e){return Pn(()=>{const n=Zn(e);return yr(n),n})}function St(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,standalone:!0===e.standalone,onDestroy:e.type.prototype.ngOnDestroy||null}}function $t(e){return e[Pr]||null}function Zt(e){return e[ui]||null}function kn(e){return e[cr]||null}function On(e){const n=$t(e)||Zt(e)||kn(e);return null!==n&&n.standalone}function _n(e,n){const i=e[_r]||null;if(!i&&!0===n)throw new Error(`Type ${nn(e)} does not have '\u0275mod' property.`);return i}function Zn(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:e.inputs||ls,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Tr,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Le(e.inputs,n),outputs:Le(e.outputs),debugInfo:null}}function yr(e){e.features?.forEach(n=>n(e))}function wr(e,n){if(!e)return null;const i=n?kn:Z;return()=>("function"==typeof e?e():e).map(s=>i(s)).filter(de)}function hi(e){return{\u0275providers:e}}function bs(...e){return{\u0275providers:Wi(0,e),\u0275fromNgModule:!0}}function Wi(e,...n){const i=[],s=new Set;let c;const l=p=>{i.push(p)};return Ni(n,p=>{const y=p;_i(y,l,[],s)&&(c||=[],c.push(y))}),void 0!==c&&Ki(c,l),i}function Ki(e,n){for(let i=0;i<e.length;i++){const{ngModule:s,providers:c}=e[i];uo(c,l=>{n(l,s)})}}function _i(e,n,i,s){if(!(e=Re(e)))return!1;let c=null,l=ln(e);const p=!l&&$t(e);if(l||p){if(p&&!p.standalone)return!1;c=e}else{const A=e.ngModule;if(l=ln(A),!l)return!1;c=A}const y=s.has(c);if(p){if(y)return!1;if(s.add(c),p.dependencies){const A="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const U of A)_i(U,n,i,s)}}else{if(!l)return!1;{if(null!=l.imports&&!y){let U;s.add(c);try{Ni(l.imports,Q=>{_i(Q,n,i,s)&&(U||=[],U.push(Q))})}finally{}void 0!==U&&Ki(U,n)}if(!y){const U=zi(c)||(()=>new c);n({provide:c,useFactory:U,deps:Tr},c),n({provide:Kr,useValue:c,multi:!0},c),n({provide:zs,useValue:()=>ri(c),multi:!0},c)}const A=l.providers;if(null!=A&&!y){const U=e;uo(A,Q=>{n(Q,U)})}}}return c!==e&&void 0!==e.providers}function uo(e,n){for(let i of e)Ir(i)&&(i=i.\u0275providers),Array.isArray(i)?uo(i,n):n(i)}const Za=Un({provide:String,useValue:Un});function Mo(e){return null!==e&&"object"==typeof e&&Za in e}function ki(e){return"function"==typeof e}const Fn=new Ze(""),Hn={},hr={};let Ai;function ss(){return void 0===Ai&&(Ai=new oo),Ai}class si{}class Ps extends si{get destroyed(){return this._destroyed}constructor(n,i,s,c){super(),this.parent=i,this.source=s,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ec(n,p=>this.processProvider(p)),this.records.set(ha,ys(void 0,this)),c.has("environment")&&this.records.set(si,ys(void 0,this));const l=this.records.get(Fn);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(Kr,Tr,ar.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const n=ge(null);try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const i=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of i)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ge(n)}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=gi(this),s=Cr(void 0);try{return n()}finally{gi(i),Cr(s)}}get(n,i=Cs,s=ar.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(Jr))return n[Jr](this);s=Di(s);const l=gi(this),p=Cr(void 0);try{if(!(s&ar.SkipSelf)){let A=this.records.get(n);if(void 0===A){const U=function Fa(e){return"function"==typeof e||"object"==typeof e&&e instanceof Ze}(n)&&qi(n);A=U&&this.injectableDefInScope(U)?ys(wn(n),Hn):null,this.records.set(n,A)}if(null!=A)return this.hydrate(n,A)}return(s&ar.Self?ss():this.parent).get(n,i=s&ar.Optional&&i===Cs?null:i)}catch(y){if("NullInjectorError"===y.name){if((y[ws]=y[ws]||[]).unshift(nn(n)),l)throw y;return function Hs(e,n,i,s){const c=e[ws];throw n[ro]&&c.unshift(n[ro]),e.message=function Vi(e,n,i,s=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let c=nn(n);if(Array.isArray(n))c=n.map(nn).join(" -> ");else if("object"==typeof n){let l=[];for(let p in n)if(n.hasOwnProperty(p)){let y=n[p];l.push(p+":"+("string"==typeof y?JSON.stringify(y):nn(y)))}c=`{${l.join(", ")}}`}return`${i}${s?"("+s+")":""}[${c}]: ${e.replace(Dr,"\n  ")}`}("\n"+e.message,c,i,s),e.ngTokenPath=c,e[ws]=null,e}(y,n,"R3InjectorError",this.source)}throw y}finally{Cr(p),gi(l)}}resolveInjectorInitializers(){const n=ge(null),i=gi(this),s=Cr(void 0);try{const l=this.get(zs,Tr,ar.Self);for(const p of l)p()}finally{gi(i),Cr(s),ge(n)}}toString(){const n=[],i=this.records;for(const s of i.keys())n.push(nn(s));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pt(205,!1)}processProvider(n){let i=ki(n=Re(n))?n:Re(n&&n.provide);const s=function Ta(e){return Mo(e)?ys(void 0,e.useValue):ys(Yi(e),Hn)}(n);if(!ki(n)&&!0===n.multi){let c=this.records.get(i);c||(c=ys(void 0,Hn,!0),c.factory=()=>js(c.multi),this.records.set(i,c)),i=n,c.multi.push(n)}this.records.set(i,s)}hydrate(n,i){const s=ge(null);try{return i.value===Hn&&(i.value=hr,i.value=i.factory()),"object"==typeof i.value&&i.value&&function ta(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{ge(s)}}injectableDefInScope(n){if(!n.providedIn)return!1;const i=Re(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function wn(e){const n=qi(e),i=null!==n?n.factory:zi(e);if(null!==i)return i;if(e instanceof Ze)throw new pt(204,!1);if(e instanceof Function)return function Tc(e){if(e.length>0)throw new pt(204,!1);const i=function kt(e){return e&&(e[se]||e[ve])||null}(e);return null!==i?()=>i.factory(e):()=>new e}(e);throw new pt(204,!1)}function Yi(e,n,i){let s;if(ki(e)){const c=Re(e);return zi(c)||wn(c)}if(Mo(e))s=()=>Re(e.useValue);else if(function fa(e){return!(!e||!e.useFactory)}(e))s=()=>e.useFactory(...js(e.deps||[]));else if(function Ss(e){return!(!e||!e.useExisting)}(e))s=()=>ri(Re(e.useExisting));else{const c=Re(e&&(e.useClass||e.provide));if(!function Ms(e){return!!e.deps}(e))return zi(c)||wn(c);s=()=>new c(...js(e.deps))}return s}function ys(e,n,i=!1){return{factory:e,value:n,multi:i?[]:void 0}}function ec(e,n){for(const i of e)Array.isArray(i)?ec(i,n):i&&Ir(i)?ec(i.\u0275providers,n):n(i)}function Wo(e,n){e instanceof Ps&&e.assertNotDestroyed();const s=gi(e),c=Cr(void 0);try{return n()}finally{gi(s),Cr(c)}}function lo(){return void 0!==no()||null!=function So(){return Wr}()}const zr=0,en=1,En=2,gr=3,Si=4,vi=5,os=6,Ks=7,Ei=8,Br=9,Io=10,sr=11,Ko=12,El=13,fi=14,Gn=15,Dc=16,tc=17,qo=18,pa=19,Il=20,na=21,nc=22,vs=23,tr=25,rc=1,Oo=7,Aa=9,Pi=10;var Su=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Su||{});function Rs(e){return Array.isArray(e)&&"object"==typeof e[rc]}function Os(e){return Array.isArray(e)&&!0===e[rc]}function Kc(e){return!!(4&e.flags)}function ra(e){return e.componentOffset>-1}function qc(e){return!(1&~e.flags)}function ho(e){return!!e.template}function Va(e){return!!(512&e[En])}class ne{constructor(n,i,s){this.previousValue=n,this.currentValue=i,this.firstChange=s}isFirstChange(){return this.firstChange}}function we(e,n,i,s){null!==n?n.applyValueToInputSignal(n,s):e[i]=s}function wt(){return dt}function dt(e){return e.type.prototype.ngOnChanges&&(e.setInput=or),gn}function gn(){const e=ji(this),n=e?.current;if(n){const i=e.previous;if(i===ls)e.previous=n;else for(let s in n)i[s]=n[s];e.current=null,this.ngOnChanges(n)}}function or(e,n,i,s,c){const l=this.declaredInputs[s],p=ji(e)||function Ac(e,n){return e[fr]=n}(e,{previous:ls,current:null}),y=p.current||(p.current={}),A=p.previous,U=A[l];y[l]=new ne(U&&U.currentValue,i,A===ls),we(e,n,c,i)}wt.ngInherit=!0;const fr="__ngSimpleChanges__";function ji(e){return e[fr]||null}const qs=function(e,n,i){};let ku=!1;function Mr(e){for(;Array.isArray(e);)e=e[zr];return e}function Jc(e,n){return Mr(n[e])}function Qs(e,n){return Mr(n[e.index])}function sc(e,n){return e.data[n]}function oc(e,n){return e[n]}function Xo(e,n){const i=n[e];return Rs(i)?i:i[zr]}function Zc(e){return!(128&~e[En])}function fo(e,n){return null==n?null:e[n]}function tf(e){e[tc]=0}function ja(e){1024&e[En]||(e[En]|=1024,Zc(e)&&Fu(e))}function bl(e){return!!(9216&e[En]||e[vs]?.dirty)}function bc(e){e[Io].changeDetectionScheduler?.notify(1),bl(e)?Fu(e):64&e[En]&&(function Ua(){return ku}()?(e[En]|=1024,Fu(e)):e[Io].changeDetectionScheduler?.notify())}function Fu(e){e[Io].changeDetectionScheduler?.notify();let n=wo(e);for(;null!==n&&!(8192&n[En])&&(n[En]|=8192,Zc(n));)n=wo(n)}function Sl(e,n){if(!(256&~e[En]))throw new pt(911,!1);null===e[na]&&(e[na]=[]),e[na].push(n)}function wo(e){const n=e[gr];return Os(n)?n[gr]:n}const qn={lFrame:cf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Pl(){return qn.bindingsEnabled}function Ft(){return qn.lFrame.lView}function Rr(){return qn.lFrame.tView}function Ol(e){return qn.lFrame.contextLView=e,e[Ei]}function Vu(e){return qn.lFrame.contextLView=null,e}function Fr(){let e=Sc();for(;null!==e&&64===e.type;)e=e.parent;return e}function Sc(){return qn.lFrame.currentTNode}function ma(e,n){const i=qn.lFrame;i.currentTNode=e,i.isParent=n}function Lu(){return qn.lFrame.isParent}function Ls(){const e=qn.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function oa(){return qn.lFrame.bindingIndex++}function Pd(e,n){const i=qn.lFrame;i.bindingIndex=i.bindingRootIndex=e,Rc(n)}function Rc(e){qn.lFrame.currentDirectiveIndex=e}function Nl(){return qn.lFrame.currentQueryIndex}function xl(e){qn.lFrame.currentQueryIndex=e}function sf(e){const n=e[en];return 2===n.type?n.declTNode:1===n.type?e[vi]:null}function af(e,n,i){if(i&ar.SkipSelf){let c=n,l=e;for(;!(c=c.parent,null!==c||i&ar.Host||(c=sf(l),null===c||(l=l[fi],10&c.type))););if(null===c)return!1;n=c,e=l}const s=qn.lFrame=Rd();return s.currentTNode=n,s.lView=e,!0}function tu(e){const n=Rd(),i=e[en];qn.lFrame=n,n.currentTNode=i.firstChild,n.lView=e,n.tView=i,n.contextLView=e,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function Rd(){const e=qn.lFrame,n=null===e?null:e.child;return null===n?cf(e):n}function cf(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function Uu(){const e=qn.lFrame;return qn.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const uf=Uu;function kl(){const e=Uu();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Es(){return qn.lFrame.selectedIndex}function cc(e){qn.lFrame.selectedIndex=e}function Mi(){const e=qn.lFrame;return sc(e.tView,e.selectedIndex)}let nu=!0;function Ji(){return nu}function ba(e){nu=e}function Fl(e,n){for(let i=n.directiveStart,s=n.directiveEnd;i<s;i++){const l=e.data[i].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:y,ngAfterViewInit:A,ngAfterViewChecked:U,ngOnDestroy:Q}=l;p&&(e.contentHooks??=[]).push(-i,p),y&&((e.contentHooks??=[]).push(i,y),(e.contentCheckHooks??=[]).push(i,y)),A&&(e.viewHooks??=[]).push(-i,A),U&&((e.viewHooks??=[]).push(i,U),(e.viewCheckHooks??=[]).push(i,U)),null!=Q&&(e.destroyHooks??=[]).push(i,Q)}}function Bu(e,n,i){$u(e,n,3,i)}function Nc(e,n,i,s){(3&e[En])===i&&$u(e,n,i,s)}function ju(e,n){let i=e[En];(3&i)===n&&(i&=16383,i+=1,e[En]=i)}function $u(e,n,i,s){const l=s??-1,p=n.length-1;let y=0;for(let A=void 0!==s?65535&e[tc]:0;A<p;A++)if("number"==typeof n[A+1]){if(y=n[A],null!=s&&y>=s)break}else n[A]<0&&(e[tc]+=65536),(y<l||-1==l)&&(Nd(e,i,n,A),e[tc]=(4294901760&e[tc])+A+2),A++}function Vl(e,n){qs(4,e,n);const i=ge(null);try{n.call(e)}finally{ge(i),qs(5,e,n)}}function Nd(e,n,i,s){const c=i[s]<0,l=i[s+1],y=e[c?-i[s]:i[s]];c?e[En]>>14<e[tc]>>16&&(3&e[En])===n&&(e[En]+=16384,Vl(y,l)):Vl(y,l)}const uc=-1;class Sa{constructor(n,i,s){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=s}}function Bl(e){return e!==uc}function ru(e){return 32767&e}function xc(e,n){let i=function Zp(e){return e>>16}(e),s=n;for(;i>0;)s=s[fi],i--;return s}let E=!0;function h(e){const n=E;return E=e,n}const T=255,W=5;let ae=0;const ke={};function Gt(e,n){const i=zn(e,n);if(-1!==i)return i;const s=n[en];s.firstCreatePass&&(e.injectorIndex=n.length,Sn(s.data,e),Sn(n,null),Sn(s.blueprint,null));const c=Ar(e,n),l=e.injectorIndex;if(Bl(c)){const p=ru(c),y=xc(c,n),A=y[en].data;for(let U=0;U<8;U++)n[l+U]=y[p+U]|A[p+U]}return n[l+8]=c,l}function Sn(e,n){e.push(0,0,0,0,0,0,0,0,n)}function zn(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Ar(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let i=0,s=null,c=n;for(;null!==c;){if(s=w_(c),null===s)return uc;if(i++,c=c[fi],-1!==s.injectorIndex)return s.injectorIndex|i<<16}return uc}function go(e,n,i){!function Dt(e,n,i){let s;"string"==typeof i?s=i.charCodeAt(0)||0:i.hasOwnProperty(ni)&&(s=i[ni]),null==s&&(s=i[ni]=ae++);const c=s&T;n.data[e+(c>>W)]|=1<<c}(e,n,i)}function Hu(e,n,i){if(i&ar.Optional||void 0!==e)return e;to()}function Gu(e,n,i,s){if(i&ar.Optional&&void 0===s&&(s=null),!(i&(ar.Self|ar.Host))){const c=e[Br],l=Cr(void 0);try{return c?c.get(n,s,i&ar.Optional):$o(n,s,i&ar.Optional)}finally{Cr(l)}}return Hu(s,0,i)}function zu(e,n,i,s=ar.Default,c){if(null!==e){if(2048&n[En]&&!(s&ar.Self)){const p=function Jv(e,n,i,s,c){let l=e,p=n;for(;null!==l&&null!==p&&2048&p[En]&&!(512&p[En]);){const y=jl(l,p,i,s|ar.Self,ke);if(y!==ke)return y;let A=l.parent;if(!A){const U=p[Il];if(U){const Q=U.get(i,ke,s);if(Q!==ke)return Q}A=w_(p),p=p[fi]}l=A}return c}(e,n,i,s,ke);if(p!==ke)return p}const l=jl(e,n,i,s,ke);if(l!==ke)return l}return Gu(n,i,s,c)}function jl(e,n,i,s,c){const l=function Wu(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(ni)?e[ni]:void 0;return"number"==typeof n?n>=0?n&T:C_:n}(i);if("function"==typeof l){if(!af(n,e,s))return s&ar.Host?Hu(c,0,s):Gu(n,i,s,c);try{let p;if(p=l(s),null!=p||s&ar.Optional)return p;to()}finally{uf()}}else if("number"==typeof l){let p=null,y=zn(e,n),A=uc,U=s&ar.Host?n[Gn][vi]:null;for((-1===y||s&ar.SkipSelf)&&(A=-1===y?Ar(e,n):n[y+8],A!==uc&&Ku(s,!1)?(p=n[en],y=ru(A),n=xc(A,n)):y=-1);-1!==y;){const Q=n[en];if(iu(l,y,Q.data)){const ce=$l(y,n,i,p,s,U);if(ce!==ke)return ce}A=n[y+8],A!==uc&&Ku(s,n[en].data[y+8]===U)&&iu(l,y,n)?(p=Q,y=ru(A),n=xc(A,n)):y=-1}}return c}function $l(e,n,i,s,c,l){const p=n[en],y=p.data[e+8],Q=Ga(y,p,i,null==s?ra(y)&&E:s!=p&&!!(3&y.type),c&ar.Host&&l===y);return null!==Q?aa(n,p,Q,y):ke}function Ga(e,n,i,s,c){const l=e.providerIndexes,p=n.data,y=1048575&l,A=e.directiveStart,Q=l>>20,Oe=c?y+Q:e.directiveEnd;for(let qe=s?y:y+Q;qe<Oe;qe++){const ft=p[qe];if(qe<A&&i===ft||qe>=A&&ft.type===i)return qe}if(c){const qe=p[A];if(qe&&ho(qe)&&qe.type===i)return A}return null}function aa(e,n,i,s){let c=e[i];const l=n.data;if(function Ll(e){return e instanceof Sa}(c)){const p=c;p.resolving&&function ea(e,n){throw n&&n.join(" > "),new pt(-200,e)}(function lr(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():$n(e)}(l[i]));const y=h(p.canSeeViewProviders);p.resolving=!0;const U=p.injectImpl?Cr(p.injectImpl):null;af(e,s,ar.Default);try{c=e[i]=p.factory(void 0,l,e,s),n.firstCreatePass&&i>=s.directiveStart&&function Od(e,n,i){const{ngOnChanges:s,ngOnInit:c,ngDoCheck:l}=n.type.prototype;if(s){const p=dt(n);(i.preOrderHooks??=[]).push(e,p),(i.preOrderCheckHooks??=[]).push(e,p)}c&&(i.preOrderHooks??=[]).push(0-e,c),l&&((i.preOrderHooks??=[]).push(e,l),(i.preOrderCheckHooks??=[]).push(e,l))}(i,l[i],n)}finally{null!==U&&Cr(U),h(y),p.resolving=!1,uf()}}return c}function iu(e,n,i){return!!(i[n+(e>>W)]&1<<e)}function Ku(e,n){return!(e&ar.Self||e&ar.Host&&n)}class xs{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,s){return zu(this._tNode,this._lView,n,Di(s),i)}}function C_(){return new xs(Fr(),Ft())}function Fd(e){return Pn(()=>{const n=e.prototype.constructor,i=n[Yr]||Vd(n),s=Object.prototype;let c=Object.getPrototypeOf(e.prototype).constructor;for(;c&&c!==s;){const l=c[Yr]||Vd(c);if(l&&l!==i)return l;c=Object.getPrototypeOf(c)}return l=>new l})}function Vd(e){return Ie(e)?()=>{const n=Vd(Re(e));return n&&n()}:zi(e)}function w_(e){const n=e[en],i=n.type;return 2===i?n.declTNode:1===i?e[vi]:null}function Ys(e){return function Pa(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const i=e.attrs;if(i){const s=i.length;let c=0;for(;c<s;){const l=i[c];if(H(l))break;if(0===l)c+=2;else if("number"==typeof l)for(c++;c<s&&"string"==typeof i[c];)c++;else{if(l===n)return i[c+1];c+=2}}}return null}(Fr(),e)}function ff(e,n=null,i=null,s){const c=Bd(e,n,i,s);return c.resolveInjectorInitializers(),c}function Bd(e,n=null,i=null,s,c=new Set){const l=[i||Tr,bs(e)];return s=s||("object"==typeof e?void 0:nn(e)),new Ps(l,n||ss(),s||null,c)}let mo=(()=>{class e{static#e=this.THROW_IF_NOT_FOUND=Cs;static#t=this.NULL=new oo;static create(i,s){if(Array.isArray(i))return ff({name:""},s,i,"");{const c=i.name??"";return ff({name:c},i.parent,i.providers,c)}}static#n=this.\u0275prov=Kn({token:e,providedIn:"any",factory:()=>ri(ha)});static#r=this.__NG_ELEMENT_ID__=-1}return e})();function jd(e){return e.ngOriginalError}class No{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&jd(n);for(;i&&jd(i);)i=jd(i);return i||null}}const rg=new Ze("",{providedIn:"root",factory:()=>hn(No).handleError.bind(void 0)});let Gl=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=rE;static#t=this.__NG_ENV_ID__=i=>i}return e})();class ig extends Gl{constructor(n){super(),this._lView=n}onDestroy(n){return Sl(this._lView,n),()=>function $a(e,n){if(null===e[na])return;const i=e[na].indexOf(n);-1!==i&&e[na].splice(i,1)}(this._lView,n)}}function rE(){return new ig(Ft())}function og(){return qu(Fr(),Ft())}function qu(e,n){return new hc(Qs(e,n))}let hc=(()=>{class e{constructor(i){this.nativeElement=i}static#e=this.__NG_ELEMENT_ID__=og}return e})();function gf(e){return e instanceof hc?e.nativeElement:e}function ag(e){return n=>{setTimeout(e,void 0,n)}}const Wa=class iE extends jn.B{constructor(n=!1){super(),this.destroyRef=void 0,this.__isAsync=n,lo()&&(this.destroyRef=hn(Gl,{optional:!0})??void 0)}emit(n){const i=ge(null);try{super.next(n)}finally{ge(i)}}subscribe(n,i,s){let c=n,l=i||(()=>null),p=s;if(n&&"object"==typeof n){const A=n;c=A.next?.bind(A),l=A.error?.bind(A),p=A.complete?.bind(A)}this.__isAsync&&(l=ag(l),c&&(c=ag(c)),p&&(p=ag(p)));const y=super.subscribe({next:c,error:l,complete:p});return n instanceof at.yU&&n.add(y),y}};function R_(){return this._results[Symbol.iterator]()}class cg{static#e=Symbol.iterator;get changes(){return this._changes??=new Wa}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const i=cg.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=R_)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){this.dirty=!1;const s=function is(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function vo(e,n,i){if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++){let c=e[s],l=n[s];if(i&&(c=i(c),l=i(l)),l!==c)return!1}return!0}(this._results,s,i))&&(this._results=s,this.length=s.length,this.last=s[this.length-1],this.first=s[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function zl(e){return!(128&~e.flags)}const $d=new Map;let N_=0;const vf="__ngContext__";function ks(e,n){Rs(n)?(e[vf]=n[pa],function lg(e){$d.set(e[pa],e)}(n)):e[vf]=n}function V_(e){return L_(e[Ko])}function _g(e){return L_(e[Si])}function L_(e){for(;null!==e&&!Os(e);)e=e[Si];return e}let Dg;function Ag(e){Dg=e}const wf=new Ze("",{providedIn:"root",factory:()=>H_}),H_="ng",Tf=new Ze(""),Df=new Ze("",{providedIn:"platform",factory:()=>"unknown"}),bg=new Ze(""),dE=new Ze("",{providedIn:"root",factory:()=>function cu(){if(void 0!==Dg)return Dg;if(typeof document<"u")return document;throw new pt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let z_=()=>null;function Xd(e,n,i=!1){return z_(e,n,i)}const X_=new Ze("",{providedIn:"root",factory:()=>!1});let Ql;function $g(e){return function eh(){if(void 0===Ql&&(Ql=null,Ln.trustedTypes))try{Ql=Ln.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Ql}()?.createScriptURL(e)||e}class tl{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bt})`}}function fu(e){return e instanceof tl?e.changingThisBreaksApplicationSecurity:e}function nh(e,n){const i=function _E(e){return e instanceof tl&&e.getTypeName()||null}(e);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${bt})`)}return i===n}const wE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var il=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(il||{});function Nf(e){const n=Fc();return n?n.sanitize(il.URL,e)||"":nh(e,"URL")?fu(e):function Pf(e){return(e=String(e)).match(wE)?e:"unsafe:"+e}($n(e))}function oy(e){const n=Fc();if(n)return $g(n.sanitize(il.RESOURCE_URL,e)||"");if(nh(e,"ResourceURL"))return $g(fu(e));throw new pt(904,!1)}function ay(e,n,i){return function YC(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?oy:Nf}(n,i)(e)}function Fc(){const e=Ft();return e&&e[Io].sanitizer}function _a(e){return e instanceof Function?e():e}var Ka=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Ka||{});let ol;function nm(e,n){return ol(e,n)}function oh(e,n,i,s,c){if(null!=s){let l,p=!1;Os(s)?l=s:Rs(s)&&(p=!0,s=s[zr]);const y=Mr(s);0===e&&null!==i?null==c?_y(n,i,y):_c(n,i,y,c||null,!0):1===e&&null!==i?_c(n,i,y,c||null,!0):2===e?function hh(e,n,i){const s=im(e,n);s&&function t0(e,n,i,s){e.removeChild(n,i,s)}(e,s,n,i)}(n,y,p):3===e&&n.destroyNode(y),null!=l&&function zE(e,n,i,s,c){const l=i[Oo];l!==Mr(i)&&oh(n,e,s,l,c);for(let y=Pi;y<i.length;y++){const A=i[y];Wf(A[en],A,e,n,s,l)}}(n,e,l,i,c)}}function al(e,n,i){return e.createElement(n,i)}function ah(e,n){n[Io].changeDetectionScheduler?.notify(1),Wf(e,n,n[sr],2,null,null)}function py(e,n){const i=e[Aa],s=i.indexOf(n);i.splice(s,1)}function ch(e,n){if(e.length<=Pi)return;const i=Pi+n,s=e[i];if(s){const c=s[Dc];null!==c&&c!==e&&py(c,s),n>0&&(e[i-1][Si]=s[Si]);const l=Eo(e,Pi+n);!function BE(e,n){ah(e,n),n[zr]=null,n[vi]=null}(s[en],s);const p=l[qo];null!==p&&p.detachView(l[en]),s[gr]=null,s[Si]=null,s[En]&=-129}return s}function uh(e,n){if(!(256&n[En])){const i=n[sr];i.destroyNode&&Wf(e,n,i,3,null,null),function $E(e){let n=e[Ko];if(!n)return Hf(e[en],e);for(;n;){let i=null;if(Rs(n))i=n[Ko];else{const s=n[Pi];s&&(i=s)}if(!i){for(;n&&!n[Si]&&n!==e;)Rs(n)&&Hf(n[en],n),n=n[gr];null===n&&(n=e),Rs(n)&&Hf(n[en],n),i=n&&n[Si]}n=i}}(n)}}function Hf(e,n){if(256&n[En])return;const i=ge(null);try{n[En]&=-129,n[En]|=256,n[vs]&&function We(e){if(rt(e),De(e))for(let n=0;n<e.producerNode.length;n++)te(e.producerNode[n],e.producerIndexOfThis[n]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}(n[vs]),function my(e,n){let i;if(null!=e&&null!=(i=e.destroyHooks))for(let s=0;s<i.length;s+=2){const c=n[i[s]];if(!(c instanceof Sa)){const l=i[s+1];if(Array.isArray(l))for(let p=0;p<l.length;p+=2){const y=c[l[p]],A=l[p+1];qs(4,y,A);try{A.call(y)}finally{qs(5,y,A)}}else{qs(4,c,l);try{l.call(c)}finally{qs(5,c,l)}}}}}(e,n),function gy(e,n){const i=e.cleanup,s=n[Ks];if(null!==i)for(let l=0;l<i.length-1;l+=2)if("string"==typeof i[l]){const p=i[l+3];p>=0?s[p]():s[-p].unsubscribe(),l+=2}else i[l].call(s[i[l+1]]);null!==s&&(n[Ks]=null);const c=n[na];if(null!==c){n[na]=null;for(let l=0;l<c.length;l++)(0,c[l])()}}(e,n),1===n[en].type&&n[sr].destroy();const s=n[Dc];if(null!==s&&Os(n[gr])){s!==n[gr]&&py(s,n);const c=n[qo];null!==c&&c.detachView(e)}!function Wl(e){$d.delete(e[pa])}(n)}finally{ge(i)}}function Gf(e,n,i){return function zf(e,n,i){let s=n;for(;null!==s&&40&s.type;)s=(n=s).parent;if(null===s)return i[zr];{const{componentOffset:c}=s;if(c>-1){const{encapsulation:l}=e.data[s.directiveStart+c];if(l===_s.None||l===_s.Emulated)return null}return Qs(s,i)}}(e,n.parent,i)}function _c(e,n,i,s,c){e.insertBefore(n,i,s,c)}function _y(e,n,i){e.appendChild(n,i)}function GE(e,n,i,s,c){null!==s?_c(e,n,i,s,c):_y(e,n,i)}function im(e,n){return e.parentNode(n)}let vc,ed=function yc(e,n,i){return 40&e.type?Qs(e,i):null};function lh(e,n,i,s){const c=Gf(e,s,n),l=n[sr],y=function gu(e,n,i){return ed(e,n,i)}(s.parent||n[vi],s,n);if(null!=c)if(Array.isArray(i))for(let A=0;A<i.length;A++)GE(l,c,i[A],y,!1);else GE(l,c,i,y,!1);void 0!==vc&&vc(l,s,n,i,c)}function dh(e,n){if(null!==n){const i=n.type;if(3&i)return Qs(n,e);if(4&i)return sm(-1,e[n.index]);if(8&i){const s=n.child;if(null!==s)return dh(e,s);{const c=e[n.index];return Os(c)?sm(-1,c):Mr(c)}}if(32&i)return nm(n,e)()||Mr(e[n.index]);{const s=Uc(e,n);return null!==s?Array.isArray(s)?s[0]:dh(wo(e[Gn]),s):dh(e,n.next)}}return null}function Uc(e,n){return null!==n?e[Gn][vi].projection[n.projection]:null}function sm(e,n){const i=Pi+e+1;if(i<n.length){const s=n[i],c=s[en].firstChild;if(null!==c)return dh(s,c)}return n[Oo]}function om(e,n,i,s,c,l,p){for(;null!=i;){const y=s[i.index],A=i.type;if(p&&0===n&&(y&&ks(Mr(y),s),i.flags|=2),32&~i.flags)if(8&A)om(e,n,i.child,s,c,l,!1),oh(n,e,c,y,l);else if(32&A){const U=nm(i,s);let Q;for(;Q=U();)oh(n,e,c,Q,l);oh(n,e,c,y,l)}else 16&A?am(e,n,s,i,c,l):oh(n,e,c,y,l);i=p?i.projectionNext:i.next}}function Wf(e,n,i,s,c,l){om(i,s,e.firstChild,n,c,l,!1)}function am(e,n,i,s,c,l){const p=i[Gn],A=p[vi].projection[s.projection];if(Array.isArray(A))for(let U=0;U<A.length;U++)oh(n,e,c,A[U],l);else{let U=A;const Q=p[gr];zl(s)&&(U.flags|=128),om(e,n,U,Q,c,l,!0)}}function Cy(e,n,i){""===i?e.removeAttribute(n,"class"):e.setAttribute(n,"class",i)}function cl(e,n,i){const{mergedAttrs:s,classes:c,styles:l}=i;null!==s&&xi(e,n,s),null!==c&&Cy(e,n,c),null!==l&&function Iy(e,n,i){e.setAttribute(n,"style",i)}(e,n,l)}const Er={};function KE(e=1){wy(Rr(),Ft(),Es()+e,!1)}function wy(e,n,i,s){if(!s)if(3&~n[En]){const l=e.preOrderHooks;null!==l&&Nc(n,l,0,i)}else{const l=e.preOrderCheckHooks;null!==l&&Bu(n,l,i)}cc(i)}function td(e,n=ar.Default){const i=Ft();return null===i?ri(e,n):zu(Fr(),i,Re(e),n)}function Ty(){throw new Error("invalid")}function Dy(e,n,i,s,c,l){const p=ge(null);try{let y=null;c&Ds.SignalBased&&(y=n[s][Pe]),null!==y&&void 0!==y.transformFn&&(l=y.transformFn(l)),c&Ds.HasDecoratorInputTransform&&(l=e.inputTransforms[s].call(n,l)),null!==e.setInput?e.setInput(n,y,l,i,s):we(n,y,s,l)}finally{ge(p)}}function cm(e,n,i,s,c,l,p,y,A,U,Q){const ce=n.blueprint.slice();return ce[zr]=c,ce[En]=204|s,(null!==U||e&&2048&e[En])&&(ce[En]|=2048),tf(ce),ce[gr]=ce[fi]=e,ce[Ei]=i,ce[Io]=p||e&&e[Io],ce[sr]=y||e&&e[sr],ce[Br]=A||e&&e[Br]||null,ce[vi]=l,ce[pa]=function ug(){return N_++}(),ce[os]=Q,ce[Il]=U,ce[Gn]=2==n.type?e[Gn]:ce,ce}function fh(e,n,i,s,c){let l=e.data[n];if(null===l)l=function Ay(e,n,i,s,c){const l=Sc(),p=Lu(),A=e.data[n]=function eI(e,n,i,s,c,l){let p=n?n.injectorIndex:-1,y=0;return function Ha(){return null!==qn.skipHydrationRootTNode}()&&(y|=128),{type:i,index:s,insertBeforeIndex:null,injectorIndex:p,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:y,providerIndexes:0,value:c,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?l:l&&l.parent,i,n,s,c);return null===e.firstChild&&(e.firstChild=A),null!==l&&(p?null==l.child&&null!==A.parent&&(l.child=A):null===l.next&&(l.next=A,A.prev=l)),A}(e,n,i,s,c),function qp(){return qn.lFrame.inI18n}()&&(l.flags|=32);else if(64&l.type){l.type=i,l.value=s,l.attrs=c;const p=function sa(){const e=qn.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();l.injectorIndex=null===p?-1:p.injectorIndex}return ma(l,!0),l}function Kf(e,n,i,s){if(0===i)return-1;const c=n.length;for(let l=0;l<i;l++)n.push(s),e.blueprint.push(s),e.data.push(null);return c}function by(e,n,i,s,c){const l=Es(),p=2&s;try{cc(-1),p&&n.length>tr&&wy(e,n,tr,!1),qs(p?2:0,c),i(s,c)}finally{cc(l),qs(p?3:1,c)}}function um(e,n,i){if(Kc(n)){const s=ge(null);try{const l=n.directiveEnd;for(let p=n.directiveStart;p<l;p++){const y=e.data[p];y.contentQueries&&y.contentQueries(1,i[p],p)}}finally{ge(s)}}}function lm(e,n,i){Pl()&&(function u0(e,n,i,s){const c=i.directiveStart,l=i.directiveEnd;ra(i)&&function ph(e,n,i){const s=Qs(n,e),c=Py(i);let p=16;i.signals?p=4096:i.onPush&&(p=64);const y=mh(e,cm(e,c,null,p,s,n,null,e[Io].rendererFactory.createRenderer(s,i),null,null,null));e[n.index]=y}(n,i,e.data[c+i.componentOffset]),e.firstCreatePass||Gt(i,n),ks(s,n);const p=i.initialInputs;for(let y=c;y<l;y++){const A=e.data[y],U=aa(n,e,y,i);ks(U,n),null!==p&&sI(0,y-c,U,A,0,p),ho(A)&&(Xo(i.index,n)[Ei]=aa(n,e,y,i))}}(e,n,i,Qs(i,n)),!(64&~i.flags)&&rI(e,n,i))}function Sy(e,n,i=Qs){const s=n.localNames;if(null!==s){let c=n.index+1;for(let l=0;l<s.length;l+=2){const p=s[l+1],y=-1===p?i(n,e):e[p];e[c++]=y}}}function Py(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=qf(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}function qf(e,n,i,s,c,l,p,y,A,U,Q){const ce=tr+s,Oe=ce+c,qe=function mu(e,n){const i=[];for(let s=0;s<n;s++)i.push(s<e?null:Er);return i}(ce,Oe),ft="function"==typeof U?U():U;return qe[en]={type:e,blueprint:qe,template:i,queries:null,viewQuery:y,declTNode:n,data:qe.slice().fill(null,ce),bindingStartIndex:ce,expandoStartIndex:Oe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:A,consts:ft,incompleteFirstPass:!1,ssrId:Q}}let My=()=>null;function tI(e,n,i,s,c){for(let l in n){if(!n.hasOwnProperty(l))continue;const p=n[l];if(void 0===p)continue;s??={};let y,A=Ds.None;Array.isArray(p)?(y=p[0],A=p[1]):y=p;let U=l;if(null!==c){if(!c.hasOwnProperty(l))continue;U=c[l]}0===e?nI(s,i,U,y,A):nI(s,i,U,y)}return s}function nI(e,n,i,s,c){let l;e.hasOwnProperty(i)?(l=e[i]).push(n,s):l=e[i]=[n,s],void 0!==c&&l.push(c)}function ua(e,n,i,s,c,l,p,y){const A=Qs(n,i);let Q,U=n.inputs;!y&&null!=U&&(Q=U[s])?(ul(e,i,Q,s,c),ra(n)&&function o0(e,n){const i=Xo(n,e);16&i[En]||(i[En]|=64)}(i,n.index)):3&n.type&&(s=function Ry(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(s),c=null!=p?p(c,n.value||"",s):c,l.setProperty(A,s,c))}function Oy(e,n,i,s){if(Pl()){const c=null===s?null:{"":-1},l=function Qf(e,n){const i=e.directiveRegistry;let s=null,c=null;if(i)for(let l=0;l<i.length;l++){const p=i[l];if(Ca(n,p.selectors,!1))if(s||(s=[]),ho(p))if(null!==p.findHostDirectiveDefs){const y=[];c=c||new Map,p.findHostDirectiveDefs(p,y,c),s.unshift(...y,p),fm(e,n,y.length)}else s.unshift(p),fm(e,n,0);else c=c||new Map,p.findHostDirectiveDefs?.(p,s,c),s.push(p)}return null===s?null:[s,c]}(e,i);let p,y;null===l?p=y=null:[p,y]=l,null!==p&&dm(e,n,i,p,c,y),c&&function iI(e,n,i){if(n){const s=e.localNames=[];for(let c=0;c<n.length;c+=2){const l=i[n[c+1]];if(null==l)throw new pt(-301,!1);s.push(n[c],l)}}}(i,s,c)}i.mergedAttrs=O(i.mergedAttrs,i.attrs)}function dm(e,n,i,s,c,l){for(let U=0;U<s.length;U++)go(Gt(i,n),e,s[U].type);!function xy(e,n,i){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+i,e.providerIndexes=n}(i,e.data.length,s.length);for(let U=0;U<s.length;U++){const Q=s[U];Q.providersResolver&&Q.providersResolver(Q)}let p=!1,y=!1,A=Kf(e,n,s.length,null);for(let U=0;U<s.length;U++){const Q=s[U];i.mergedAttrs=O(i.mergedAttrs,Q.hostAttrs),ky(e,i,n,A,Q),pm(A,Q,c),null!==Q.contentQueries&&(i.flags|=4),(null!==Q.hostBindings||null!==Q.hostAttrs||0!==Q.hostVars)&&(i.flags|=64);const ce=Q.type.prototype;!p&&(ce.ngOnChanges||ce.ngOnInit||ce.ngDoCheck)&&((e.preOrderHooks??=[]).push(i.index),p=!0),!y&&(ce.ngOnChanges||ce.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(i.index),y=!0),A++}!function s0(e,n,i){const c=n.directiveEnd,l=e.data,p=n.attrs,y=[];let A=null,U=null;for(let Q=n.directiveStart;Q<c;Q++){const ce=l[Q],Oe=i?i.get(ce):null,ft=Oe?Oe.outputs:null;A=tI(0,ce.inputs,Q,A,Oe?Oe.inputs:null),U=tI(1,ce.outputs,Q,U,ft);const Lt=null===A||null===p||ir(n)?null:Fy(A,Q,p);y.push(Lt)}null!==A&&(A.hasOwnProperty("class")&&(n.flags|=8),A.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=y,n.inputs=A,n.outputs=U}(e,i,l)}function rI(e,n,i){const s=i.directiveStart,c=i.directiveEnd,l=i.index,p=function ac(){return qn.lFrame.currentDirectiveIndex}();try{cc(l);for(let y=s;y<c;y++){const A=e.data[y],U=n[y];Rc(y),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&hm(A,U)}}finally{cc(-1),Rc(p)}}function hm(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function fm(e,n,i){n.componentOffset=i,(e.components??=[]).push(n.index)}function pm(e,n,i){if(i){if(n.exportAs)for(let s=0;s<n.exportAs.length;s++)i[n.exportAs[s]]=e;ho(n)&&(i[""]=e)}}function ky(e,n,i,s,c){e.data[s]=c;const l=c.factory||(c.factory=zi(c.type)),p=new Sa(l,ho(c),td);e.blueprint[s]=p,i[s]=p,function Ny(e,n,i,s,c){const l=c.hostBindings;if(l){let p=e.hostBindingOpCodes;null===p&&(p=e.hostBindingOpCodes=[]);const y=~n.index;(function c0(e){let n=e.length;for(;n>0;){const i=e[--n];if("number"==typeof i&&i<0)return i}return 0})(p)!=y&&p.push(y),p.push(i,s,l)}}(e,n,s,Kf(e,i,c.hostVars,Er),c)}function Ra(e,n,i,s,c,l){const p=Qs(e,n);!function gm(e,n,i,s,c,l,p){if(null==l)e.removeAttribute(n,c,i);else{const y=null==p?$n(l):p(l,s||"",c);e.setAttribute(n,c,y,i)}}(n[sr],p,l,e.value,i,s,c)}function sI(e,n,i,s,c,l){const p=l[n];if(null!==p)for(let y=0;y<p.length;)Dy(s,i,p[y++],p[y++],p[y++],p[y++])}function Fy(e,n,i){let s=null,c=0;for(;c<i.length;){const l=i[c];if(0!==l)if(5!==l){if("number"==typeof l)break;if(e.hasOwnProperty(l)){null===s&&(s=[]);const p=e[l];for(let y=0;y<p.length;y+=3)if(p[y]===n){s.push(l,p[y+1],p[y+2],i[c+1]);break}}c+=2}else c+=2;else c+=4}return s}function gh(e,n,i,s){return[e,!0,0,n,null,s,null,i,null,null]}function Vy(e,n){const i=e.contentQueries;if(null!==i){const s=ge(null);try{for(let c=0;c<i.length;c+=2){const p=i[c+1];if(-1!==p){const y=e.data[p];xl(i[c]),y.contentQueries(2,n[p],p)}}}finally{ge(s)}}}function mh(e,n){return e[Ko]?e[El][Si]=n:e[Ko]=n,e[El]=n,n}function Xf(e,n,i){xl(0);const s=ge(null);try{n(e,i)}finally{ge(s)}}function ya(e){return e[Ks]||(e[Ks]=[])}function Fo(e){return e.cleanup||(e.cleanup=[])}function _h(e,n){const i=e[Br],s=i?i.get(No,null):null;s&&s.handleError(n)}function ul(e,n,i,s,c){for(let l=0;l<i.length;){const p=i[l++],y=i[l++],A=i[l++];Dy(e.data[p],n[p],s,y,A,c)}}function Yo(e,n){const i=Xo(n,e),s=i[en];!function oI(e,n){for(let i=n.length;i<e.blueprint.length;i++)n.push(e.blueprint[i])}(s,i);const c=i[zr];null!==c&&null===i[os]&&(i[os]=Xd(c,i[Br])),yh(s,i,i[Ei])}function yh(e,n,i){tu(n);try{const s=e.viewQuery;null!==s&&Xf(1,s,i);const c=e.template;null!==c&&by(e,n,c,1,i),e.firstCreatePass&&(e.firstCreatePass=!1),n[qo]?.finishViewCreation(e),e.staticContentQueries&&Vy(e,n),e.staticViewQueries&&Xf(2,e.viewQuery,i);const l=e.components;null!==l&&function rd(e,n){for(let i=0;i<n.length;i++)Yo(e,n[i])}(n,l)}catch(s){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),s}finally{n[En]&=-5,kl()}}function Oa(e,n){return!n||null===n.firstChild||zl(e)}function vh(e,n,i,s=!0){const c=n[en];if(function HE(e,n,i,s){const c=Pi+s,l=i.length;s>0&&(i[c-1][Si]=n),s<l-Pi?(n[Si]=i[c],so(i,Pi+s,n)):(i.push(n),n[Si]=null),n[gr]=i;const p=n[Dc];null!==p&&i!==p&&function $f(e,n){const i=e[Aa];n[Gn]!==n[gr][gr][Gn]&&(e[En]|=Su.HasTransplantedViews),null===i?e[Aa]=[n]:i.push(n)}(p,n);const y=n[qo];null!==y&&y.insertView(e),bc(n),n[En]|=128}(c,n,e,i),s){const p=sm(i,e),y=n[sr],A=im(y,e[Oo]);null!==A&&function jE(e,n,i,s,c,l){s[zr]=c,s[vi]=n,Wf(e,s,i,1,c,l)}(c,e[vi],y,n,A,p)}const l=n[os];null!==l&&null!==l.firstChild&&(l.firstChild=null)}function Eh(e,n,i,s,c=!1){for(;null!==i;){const l=n[i.index];null!==l&&s.push(Mr(l)),Os(l)&&Ly(l,s);const p=i.type;if(8&p)Eh(e,n,i.child,s);else if(32&p){const y=nm(i,n);let A;for(;A=y();)s.push(A)}else if(16&p){const y=Uc(n,i);if(Array.isArray(y))s.push(...y);else{const A=wo(n[Gn]);Eh(A[en],A,y,s,!0)}}i=c?i.projectionNext:i.next}return s}function Ly(e,n){for(let i=Pi;i<e.length;i++){const s=e[i],c=s[en].firstChild;null!==c&&Eh(s[en],s,c,n)}e[Oo]!==e[zr]&&n.push(e[Oo])}let Uy=[];const jy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{},consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Fu(e.lView)},consumerOnSignalRead(){this.lView[vs]=this}},Ih=100;function Ch(e,n=!0,i=0){const s=e[Io],c=s.rendererFactory;c.begin?.();try{!function cI(e,n){Im(e,n);let i=0;for(;bl(e);){if(i===Ih)throw new pt(103,!1);i++,Im(e,1)}}(e,i)}catch(p){throw n&&_h(e,p),p}finally{c.end?.(),s.inlineEffectRunner?.flush()}}function uI(e,n,i,s){const c=n[En];if(!(256&~c))return;n[Io].inlineEffectRunner?.flush(),tu(n);let p=null,y=null;(function Hy(e){return 2!==e.type})(e)&&(y=function By(e){return e[vs]??function aI(e){const n=Uy.pop()??Object.create(jy);return n.lView=e,n}(e)}(n),p=function ot(e){return e&&(e.nextProducerIndex=0),ge(e)}(y));try{tf(n),function Pc(e){return qn.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==i&&by(e,n,i,2,s);const A=!(3&~c);if(A){const ce=e.preOrderCheckHooks;null!==ce&&Bu(n,ce,null)}else{const ce=e.preOrderHooks;null!==ce&&Nc(n,ce,0,null),ju(n,0)}if(function lI(e){for(let n=V_(e);null!==n;n=_g(n)){if(!(n[En]&Su.HasTransplantedViews))continue;const i=n[Aa];for(let s=0;s<i.length;s++){ja(i[s])}}}(n),vm(n,0),null!==e.contentQueries&&Vy(e,n),A){const ce=e.contentCheckHooks;null!==ce&&Bu(n,ce)}else{const ce=e.contentHooks;null!==ce&&Nc(n,ce,1),ju(n,1)}!function qE(e,n){const i=e.hostBindingOpCodes;if(null!==i)try{for(let s=0;s<i.length;s++){const c=i[s];if(c<0)cc(~c);else{const l=c,p=i[++s],y=i[++s];Pd(p,l),y(2,n[l])}}}finally{cc(-1)}}(e,n);const U=e.components;null!==U&&zy(n,U,0);const Q=e.viewQuery;if(null!==Q&&Xf(2,Q,s),A){const ce=e.viewCheckHooks;null!==ce&&Bu(n,ce)}else{const ce=e.viewHooks;null!==ce&&Nc(n,ce,2),ju(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[nc]){for(const ce of n[nc])ce();n[nc]=null}n[En]&=-73}catch(A){throw Fu(n),A}finally{null!==y&&(function Jt(e,n){if(ge(n),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(De(e))for(let i=e.nextProducerIndex;i<e.producerNode.length;i++)te(e.producerNode[i],e.producerIndexOfThis[i]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}(y,p),function ym(e){e.lView[vs]!==e&&(e.lView=null,Uy.push(e))}(y)),kl()}}function vm(e,n){for(let i=V_(e);null!==i;i=_g(i))for(let s=Pi;s<i.length;s++)Em(i[s],n)}function Gy(e,n,i){Em(Xo(n,e),i)}function Em(e,n){Zc(e)&&Im(e,n)}function Im(e,n){const s=e[en],c=e[En],l=e[vs];let p=!!(0===n&&16&c);if(p||=!!(64&c&&0===n),p||=!!(1024&c),p||=!(!l?.dirty||!je(l)),l&&(l.dirty=!1),e[En]&=-9217,p)uI(s,e,s.template,e[Ei]);else if(8192&c){vm(e,1);const y=s.components;null!==y&&zy(e,y,1)}}function zy(e,n,i){for(let s=0;s<n.length;s++)Gy(e,n[s],i)}function id(e){for(e[Io].changeDetectionScheduler?.notify();e;){e[En]|=64;const n=wo(e);if(Va(e)&&!n)return e;e=n}return null}class wh{get rootNodes(){const n=this._lView,i=n[en];return Eh(i,n,i.firstChild,[])}constructor(n,i,s=!0){this._lView=n,this._cdRefInjectingView=i,this.notifyErrorHandler=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ei]}set context(n){this._lView[Ei]=n}get destroyed(){return!(256&~this._lView[En])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[gr];if(Os(n)){const i=n[8],s=i?i.indexOf(this):-1;s>-1&&(ch(n,s),Eo(i,s))}this._attachedToViewContainer=!1}uh(this._lView[en],this._lView)}onDestroy(n){Sl(this._lView,n)}markForCheck(){id(this._cdRefInjectingView||this._lView)}detach(){this._lView[En]&=-129}reattach(){bc(this._lView),this._lView[En]|=128}detectChanges(){this._lView[En]|=1024,Ch(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ah(this._lView[en],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new pt(902,!1);this._appRef=n,bc(this._lView)}}let Th=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=ll}return e})();const dI=Th,Cm=class extends dI{constructor(n,i,s){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=s}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,s){const c=function qa(e,n,i,s){const c=ge(null);try{const l=n.tView,A=cm(e,l,i,4096&e[En]?4096:16,null,n,null,null,s?.injector??null,s?.embeddedViewInjector??null,s?.dehydratedView??null);A[Dc]=e[n.index];const Q=e[qo];return null!==Q&&(A[qo]=Q.createEmbeddedView(l)),yh(l,A,i),A}finally{ge(c)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:s});return new wh(c)}};function ll(){return Jf(Fr(),Ft())}function Jf(e,n){return 4&e.type?new Cm(n,e,qu(e,n)):null}class Ue{}class Bc{}class sd{}class Am{resolveComponentFactory(n){throw function vI(e){const n=Error(`No component factory found for ${nn(e)}.`);return n.ngComponent=e,n}(n)}}let Ah=(()=>{class e{static#e=this.NULL=new Am}return e})();class qy{}let _u=(()=>{class e{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Vo(){const e=Ft(),i=Xo(Fr().index,e);return(Rs(i)?i:e)[sr]}()}return e})(),EI=(()=>{class e{static#e=this.\u0275prov=Kn({token:e,providedIn:"root",factory:()=>null})}return e})();const dl={},ad=new Set;function Ec(e){ad.has(e)||(ad.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function Qy(...e){}class Is{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wa(!1),this.onMicrotaskEmpty=new Wa(!1),this.onStable=new Wa(!1),this.onError=new Wa(!1),typeof Zone>"u")throw new pt(908,!1);Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!s&&i,c.shouldCoalesceRunChangeDetection=s,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function np(){const e="function"==typeof Ln.requestAnimationFrame;let n=Ln[e?"requestAnimationFrame":"setTimeout"],i=Ln[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const c=i[Zone.__symbol__("OriginalDelegate")];c&&(i=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Xy(e){const n=()=>{!function Pm(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ln,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,rp(e),e.isCheckStableRunning=!0,bh(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),rp(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,s,c,l,p,y)=>{if(function Om(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(y))return i.invokeTask(c,l,p,y);try{return Yy(e),i.invokeTask(c,l,p,y)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||e.shouldCoalesceRunChangeDetection)&&n(),Mm(e)}},onInvoke:(i,s,c,l,p,y,A)=>{try{return Yy(e),i.invoke(c,l,p,y,A)}finally{e.shouldCoalesceRunChangeDetection&&n(),Mm(e)}},onHasTask:(i,s,c,l)=>{i.hasTask(c,l),s===c&&("microTask"==l.change?(e._hasPendingMicrotasks=l.microTask,rp(e),bh(e)):"macroTask"==l.change&&(e.hasPendingMacrotasks=l.macroTask))},onHandleError:(i,s,c,l)=>(i.handleError(c,l),e.runOutsideAngular(()=>e.onError.emit(l)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Is.isInAngularZone())throw new pt(909,!1)}static assertNotInAngularZone(){if(Is.isInAngularZone())throw new pt(909,!1)}run(n,i,s){return this._inner.run(n,i,s)}runTask(n,i,s,c){const l=this._inner,p=l.scheduleEventTask("NgZoneEvent: "+c,n,Sm,Qy,Qy);try{return l.runTask(p,i,s)}finally{l.cancelTask(p)}}runGuarded(n,i,s){return this._inner.runGuarded(n,i,s)}runOutsideAngular(n){return this._outer.run(n)}}const Sm={};function bh(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function rp(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Yy(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Mm(e){e._nesting--,bh(e)}class Rm{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wa,this.onMicrotaskEmpty=new Wa,this.onStable=new Wa,this.onError=new Wa}run(n,i,s){return n.apply(i,s)}runGuarded(n,i,s){return n.apply(i,s)}runOutsideAngular(n){return n()}runTask(n,i,s,c){return n.apply(i,s)}}var hl=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(hl||{});const ip={destroy(){}};function To(e,n){!n&&function Ro(e){if(!lo())throw new pt(-203,!1)}();const i=n?.injector??hn(mo);if(!function ca(e){return"browser"===(e??hn(mo)).get(Df)}(i))return ip;Ec("NgAfterNextRender");const s=i.get(cd),c=s.handler??=new Ph,l=n?.phase??hl.MixedReadWrite,p=()=>{c.unregister(A),y()},y=i.get(Gl).onDestroy(p),A=Wo(i,()=>new Lo(l,()=>{p(),e()}));return c.register(A),{destroy:p}}class Lo{constructor(n,i){this.phase=n,this.callbackFn=i,this.zone=hn(Is),this.errorHandler=hn(No,{optional:!0}),hn(Ue,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(n){this.errorHandler?.handleError(n)}}}class Ph{constructor(){this.executingCallbacks=!1,this.buckets={[hl.EarlyRead]:new Set,[hl.Write]:new Set,[hl.MixedReadWrite]:new Set,[hl.Read]:new Set},this.deferredCallbacks=new Set}register(n){(this.executingCallbacks?this.deferredCallbacks:this.buckets[n.phase]).add(n)}unregister(n){this.buckets[n.phase].delete(n),this.deferredCallbacks.delete(n)}execute(){this.executingCallbacks=!0;for(const n of Object.values(this.buckets))for(const i of n)i.invoke();this.executingCallbacks=!1;for(const n of this.deferredCallbacks)this.buckets[n.phase].add(n);this.deferredCallbacks.clear()}destroy(){for(const n of Object.values(this.buckets))n.clear();this.deferredCallbacks.clear()}}let cd=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const s of i)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Kn({token:e,providedIn:"root",factory:()=>new e})}return e})();function yu(e){return!!_n(e)}function dd(e,n,i){let s=i?e.styles:null,c=i?e.classes:null,l=0;if(null!==n)for(let p=0;p<n.length;p++){const y=n[p];"number"==typeof y?l=y:1==l?c=rn(c,y):2==l&&(s=rn(s,y+": "+n[++p]+";"))}i?e.styles=s:e.stylesWithoutHost=s,i?e.classes=c:e.classesWithoutHost=c}class cp extends Ah{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=$t(n);return new hd(i,this.ngModule)}}function Eu(e){const n=[];for(const i in e){if(!e.hasOwnProperty(i))continue;const s=e[i];void 0!==s&&n.push({propName:Array.isArray(s)?s[0]:s,templateName:i})}return n}class fl{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,s){s=Di(s);const c=this.injector.get(n,dl,s);return c!==dl||i===dl?c:this.parentInjector.get(n,i,s)}}class hd extends sd{get inputs(){const n=this.componentDef,i=n.inputTransforms,s=Eu(n.inputs);if(null!==i)for(const c of s)i.hasOwnProperty(c.propName)&&(c.transform=i[c.propName]);return s}get outputs(){return Eu(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function C(e){return e.map(re).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,s,c){const l=ge(null);try{let p=(c=c||this.ngModule)instanceof si?c:c?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new fl(n,p):n,A=y.get(qy,null);if(null===A)throw new pt(407,!1);const U=y.get(EI,null),Oe={rendererFactory:A,sanitizer:U,inlineEffectRunner:null,afterRenderEventManager:y.get(cd,null),changeDetectionScheduler:y.get(Ue,null)},qe=A.createRenderer(null,this.componentDef),ft=this.componentDef.selectors[0][0]||"div",Lt=s?function QE(e,n,i,s){const l=s.get(X_,!1)||i===_s.ShadowDom,p=e.selectRootElement(n,l);return function XE(e){My(e)}(p),p}(qe,s,this.componentDef.encapsulation,y):al(qe,ft,function Zy(e){const n=e.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(ft));let cn=512;this.componentDef.signals?cn|=4096:this.componentDef.onPush||(cn|=16);let dn=null;null!==Lt&&(dn=Xd(Lt,y,!0));const Qt=qf(0,null,null,1,0,null,null,null,null,null,null),pr=cm(null,Qt,null,cn,null,null,Oe,qe,y,null,dn);let pi,ns;tu(pr);try{const bo=this.componentDef;let xa,zp=null;bo.findHostDirectiveDefs?(xa=[],zp=new Map,bo.findHostDirectiveDefs(bo,xa,zp),xa.push(bo)):xa=[bo];const cA=function ev(e,n){const i=e[en],s=tr;return e[s]=n,fh(i,s,2,"#host",null)}(pr,Lt),UR=function Jo(e,n,i,s,c,l,p){const y=c[en];!function tv(e,n,i,s){for(const c of e)n.mergedAttrs=O(n.mergedAttrs,c.hostAttrs);null!==n.mergedAttrs&&(dd(n,n.mergedAttrs,!0),null!==i&&cl(s,i,n))}(s,e,n,p);let A=null;null!==n&&(A=Xd(n,c[Br]));const U=l.rendererFactory.createRenderer(n,i);let Q=16;i.signals?Q=4096:i.onPush&&(Q=64);const ce=cm(c,Py(i),null,Q,c[e.index],e,l,U,null,null,A);return y.firstCreatePass&&fm(y,e,s.length-1),mh(c,ce),c[e.index]=ce}(cA,Lt,bo,xa,pr,Oe,qe);ns=sc(Qt,tr),Lt&&function Oh(e,n,i,s){if(s)xi(e,i,["ng-version","17.3.12"]);else{const{attrs:c,classes:l}=function S(e){const n=[],i=[];let s=1,c=2;for(;s<e.length;){let l=e[s];if("string"==typeof l)2===c?""!==l&&n.push(l,e[++s]):8===c&&i.push(l);else{if(!di(c))break;c=l}s++}return{attrs:n,classes:i}}(n.selectors[0]);c&&xi(e,i,c),l&&l.length>0&&Cy(e,i,l.join(" "))}}(qe,bo,Lt,s),void 0!==i&&function CI(e,n,i){const s=e.projection=[];for(let c=0;c<n.length;c++){const l=i[c];s.push(null!=l?Array.from(l):null)}}(ns,this.ngContentSelectors,i),pi=function Rh(e,n,i,s,c,l){const p=Fr(),y=c[en],A=Qs(p,c);dm(y,c,p,i,null,s);for(let Q=0;Q<i.length;Q++)ks(aa(c,y,p.directiveStart+Q,p),c);rI(y,c,p),A&&ks(A,c);const U=aa(c,y,p.directiveStart+p.componentOffset,p);if(e[Ei]=c[Ei]=U,null!==l)for(const Q of l)Q(U,n);return um(y,p,c),U}(UR,bo,xa,zp,pr,[wI]),yh(Qt,pr,null)}finally{kl()}return new Mh(this.componentType,pi,qu(ns,pr),pr,ns)}finally{ge(l)}}}class Mh extends Bc{constructor(n,i,s,c,l){super(),this.location=s,this._rootLView=c,this._tNode=l,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new wh(c,void 0,!1),this.componentType=n}setInput(n,i){const s=this._tNode.inputs;let c;if(null!==s&&(c=s[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const l=this._rootLView;ul(l[en],l,c,n,i),this.previousInputValues.set(n,i),id(Xo(this._tNode.index,l))}}get injector(){return new xs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function wI(){const e=Fr();Fl(Ft()[en],e)}let $c=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=TI}return e})();function TI(){return kh(Fr(),Ft())}const DI=$c,Nh=class extends DI{constructor(n,i,s){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=s}get element(){return qu(this._hostTNode,this._hostLView)}get injector(){return new xs(this._hostTNode,this._hostLView)}get parentInjector(){const n=Ar(this._hostTNode,this._hostLView);if(Bl(n)){const i=xc(n,this._hostLView),s=ru(n);return new xs(i[en].data[s+8],i)}return new xs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=Vm(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-Pi}createEmbeddedView(n,i,s){let c,l;"number"==typeof s?c=s:null!=s&&(c=s.index,l=s.injector);const y=n.createEmbeddedViewImpl(i||{},l,null);return this.insertImpl(y,c,Oa(this._hostTNode,null)),y}createComponent(n,i,s,c,l){const p=n&&!function Vt(e){return"function"==typeof e}(n);let y;if(p)y=i;else{const ft=i||{};y=ft.index,s=ft.injector,c=ft.projectableNodes,l=ft.environmentInjector||ft.ngModuleRef}const A=p?n:new hd($t(n)),U=s||this.parentInjector;if(!l&&null==A.ngModule){const Lt=(p?U:this.parentInjector).get(si,null);Lt&&(l=Lt)}$t(A.componentType??{});const qe=A.create(U,c,null,l);return this.insertImpl(qe.hostView,y,Oa(this._hostTNode,null)),qe}insert(n,i){return this.insertImpl(n,i,!0)}insertImpl(n,i,s){const c=n._lView;if(function Dl(e){return Os(e[gr])}(c)){const y=this.indexOf(n);if(-1!==y)this.detach(y);else{const A=c[gr],U=new Nh(A,A[vi],A[gr]);U.detach(U.indexOf(n))}}const l=this._adjustIndex(i),p=this._lContainer;return vh(p,c,l,s),n.attachToViewContainerRef(),so(xh(p),l,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=Vm(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),s=ch(this._lContainer,i);s&&(Eo(xh(this._lContainer),i),uh(s[en],s))}detach(n){const i=this._adjustIndex(n,-1),s=ch(this._lContainer,i);return s&&null!=Eo(xh(this._lContainer),i)?new wh(s):null}_adjustIndex(n,i=0){return n??this.length+i}};function Vm(e){return e[8]}function xh(e){return e[8]||(e[8]=[])}function kh(e,n){let i;const s=n[e.index];return Os(s)?i=s:(i=gh(s,n,null,e),n[e.index]=i,mh(n,i)),Lm(i,n,e,s),new Nh(i,e,n)}let Lm=function dp(e,n,i,s){if(e[Oo])return;let c;c=8&i.type?Mr(s):function Iu(e,n){const i=e[sr],s=i.createComment(""),c=Qs(n,e);return _c(i,im(i,c),s,function r0(e,n){return e.nextSibling(n)}(i,c),!1),s}(n,i),e[Oo]=c},up=()=>!1;class fd{constructor(n){this.queryList=n,this.matches=null}clone(){return new fd(this.queryList)}setDirty(){this.queryList.setDirty()}}class hp{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const s=null!==n.contentQueries?n.contentQueries[0]:i.length,c=[];for(let l=0;l<s;l++){const p=i.getByIndex(l);c.push(this.queries[p.indexInDeclarationView].clone())}return new hp(c)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==Gm(n,i).matches&&this.queries[i].setDirty()}}class fp{constructor(n,i,s=null){this.flags=i,this.read=s,this.predicate="string"==typeof n?function SI(e){return e.split(",").map(n=>n.trim())}(n):n}}class pl{constructor(n=[]){this.queries=n}elementStart(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let s=0;s<this.length;s++){const c=null!==i?i.length:0,l=this.getByIndex(s).embeddedTView(n,c);l&&(l.indexInDeclarationView=s,null!==i?i.push(l):i=[l])}return null!==i?new pl(i):null}template(n,i){for(let s=0;s<this.queries.length;s++)this.queries[s].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Hc{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Hc(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const i=this._declarationNodeIndex;let s=n.parent;for(;null!==s&&8&s.type&&s.index!==i;)s=s.parent;return i===(null!==s?s.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const s=this.metadata.predicate;if(Array.isArray(s))for(let c=0;c<s.length;c++){const l=s[c];this.matchTNodeWithReadOption(n,i,Um(i,l)),this.matchTNodeWithReadOption(n,i,Ga(i,n,l,!1,!1))}else s===Th?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,Ga(i,n,s,!1,!1))}matchTNodeWithReadOption(n,i,s){if(null!==s){const c=this.metadata.read;if(null!==c)if(c===hc||c===$c||c===Th&&4&i.type)this.addMatch(i.index,-2);else{const l=Ga(i,n,c,!1,!1);null!==l&&this.addMatch(i.index,l)}else this.addMatch(i.index,s)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function Um(e,n){const i=e.localNames;if(null!==i)for(let s=0;s<i.length;s+=2)if(i[s]===n)return i[s+1];return null}function iv(e,n,i,s){return-1===i?function bI(e,n){return 11&e.type?qu(e,n):4&e.type?Jf(e,n):null}(n,e):-2===i?function sv(e,n,i){return i===hc?qu(n,e):i===Th?Jf(n,e):i===$c?kh(n,e):void 0}(e,n,s):aa(e,e[en],i,n)}function Bm(e,n,i,s){const c=n[qo].queries[s];if(null===c.matches){const l=e.data,p=i.matches,y=[];for(let A=0;null!==p&&A<p.length;A+=2){const U=p[A];y.push(U<0?null:iv(n,l[U],p[A+1],i.metadata.read))}c.matches=y}return c.matches}function Fh(e,n,i,s){const c=e.queries.getByIndex(i),l=c.matches;if(null!==l){const p=Bm(e,n,c,i);for(let y=0;y<l.length;y+=2){const A=l[y];if(A>0)s.push(p[y/2]);else{const U=l[y+1],Q=n[-A];for(let ce=Pi;ce<Q.length;ce++){const Oe=Q[ce];Oe[Dc]===Oe[gr]&&Fh(Oe[en],Oe,U,s)}if(null!==Q[Aa]){const ce=Q[Aa];for(let Oe=0;Oe<ce.length;Oe++){const qe=ce[Oe];Fh(qe[en],qe,U,s)}}}}}return s}function jm(e,n,i){const s=new cg(!(4&~i));return function ZE(e,n,i,s){const c=ya(n);c.push(i),e.firstCreatePass&&Fo(e).push(s,c.length-1)}(e,n,s,s.destroy),(n[qo]??=new hp).queries.push(new fd(s))-1}function Hm(e,n,i){null===e.queries&&(e.queries=new pl),e.queries.track(new Hc(n,i))}function Gm(e,n){return e.queries.getByIndex(n)}function Cu(e,n){const i=e[en],s=Gm(i,n);return s.crossesNgTemplate?Fh(i,e,n,[]):Bm(i,e,s,n)}function Lh(e){return function Ic(e){return"function"==typeof e&&void 0!==e[Pe]}(e)&&"function"==typeof e.set}function Ep(e){let n=function yv(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),i=!0;const s=[e];for(;n;){let c;if(ho(e))c=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new pt(903,!1);c=n.\u0275dir}if(c){if(i){s.push(c);const p=e;p.inputs=Gh(e.inputs),p.inputTransforms=Gh(e.inputTransforms),p.declaredInputs=Gh(e.declaredInputs),p.outputs=Gh(e.outputs);const y=c.hostBindings;y&&Ev(e,y);const A=c.viewQuery,U=c.contentQueries;if(A&&Ym(e,A),U&&Jm(e,U),Hh(e,c),Qr(e.outputs,c.outputs),ho(c)&&c.data.animation){const Q=e.data;Q.animation=(Q.animation||[]).concat(c.data.animation)}}const l=c.features;if(l)for(let p=0;p<l.length;p++){const y=l[p];y&&y.ngInherit&&y(e),y===Ep&&(i=!1)}}n=Object.getPrototypeOf(n)}!function vv(e){let n=0,i=null;for(let s=e.length-1;s>=0;s--){const c=e[s];c.hostVars=n+=c.hostVars,c.hostAttrs=O(c.hostAttrs,i=O(i,c.hostAttrs))}}(s)}function Hh(e,n){for(const i in n.inputs){if(!n.inputs.hasOwnProperty(i)||e.inputs.hasOwnProperty(i))continue;const s=n.inputs[i];if(void 0!==s&&(e.inputs[i]=s,e.declaredInputs[i]=n.declaredInputs[i],null!==n.inputTransforms)){const c=Array.isArray(s)?s[0]:s;if(!n.inputTransforms.hasOwnProperty(c))continue;e.inputTransforms??={},e.inputTransforms[c]=n.inputTransforms[c]}}}function Gh(e){return e===ls?{}:e===Tr?[]:e}function Ym(e,n){const i=e.viewQuery;e.viewQuery=i?(s,c)=>{n(s,c),i(s,c)}:n}function Jm(e,n){const i=e.contentQueries;e.contentQueries=i?(s,c,l)=>{n(s,c,l),i(s,c,l)}:n}function Ev(e,n){const i=e.hostBindings;e.hostBindings=i?(s,c)=>{n(s,c),i(s,c)}:n}function la(e){const n=e.inputConfig,i={};for(const s in n)if(n.hasOwnProperty(s)){const c=n[s];Array.isArray(c)&&c[3]&&(i[s]=c[3])}e.inputTransforms=i}class Tu{}class t_{}function gd(e,n){return new x(e,n??null,[])}class x extends Tu{constructor(n,i,s){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cp(this);const c=_n(n);this._bootstrapComponents=_a(c.bootstrap),this._r3Injector=Bd(n,i,[{provide:Tu,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver},...s],nn(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class z extends t_{constructor(n){super(),this.moduleType=n}create(n){return new x(this.moduleType,n,[])}}class ht extends Tu{constructor(n){super(),this.componentFactoryResolver=new cp(this),this.instance=null;const i=new Ps([...n.providers,{provide:Tu,useValue:this},{provide:Ah,useValue:this.componentFactoryResolver}],n.parent||ss(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Nt(e,n,i=null){return new ht({providers:e,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let Qa=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new In.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=Kn({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function vl(e){return!!LI(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function LI(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Du(e,n,i){return e[n]=i}function Js(e,n,i){return!Object.is(e[n],i)&&(e[n]=i,!0)}function Wh(e,n,i,s){const c=Js(e,n,i);return Js(e,n+1,s)||c}function Cp(e,n,i,s,c,l,p,y){const A=Ft(),U=Rr(),Q=e+tr,ce=U.firstCreatePass?function hA(e,n,i,s,c,l,p,y,A){const U=n.consts,Q=fh(n,e,4,p||null,fo(U,y));Oy(n,i,Q,fo(U,A)),Fl(n,Q);const ce=Q.tView=qf(2,Q,s,c,l,n.directiveRegistry,n.pipeRegistry,null,n.schemas,U,null);return null!==n.queries&&(n.queries.template(n,Q),ce.queries=n.queries.embeddedTView(Q)),Q}(Q,U,A,n,i,s,c,l,p):U.data[Q];ma(ce,!1);const Oe=I0(U,A,ce,e);Ji()&&lh(U,A,Oe,ce),ks(Oe,A);const qe=gh(Oe,A,Oe,ce);return A[Q]=qe,mh(A,qe),function lp(e,n,i){return up(e,n,i)}(qe,ce,A),qc(ce)&&lm(U,A,ce),null!=p&&Sy(A,ce,y),Cp}let I0=function C0(e,n,i,s){return ba(!0),n[sr].createComment("")};function qI(e,n,i,s){const c=Ft();return Js(c,oa(),n)&&(Rr(),Ra(Mi(),c,e,n,i,s)),qI}function Mv(e,n){return e<<17|n<<2}function _d(e){return e>>17&32767}function QI(e){return 2|e}function qh(e){return(131068&e)>>2}function XI(e,n){return-131069&e|n<<2}function YI(e){return 1|e}function Z0(e,n,i,s){const c=e[i+1],l=null===n;let p=s?_d(c):qh(c),y=!1;for(;0!==p&&(!1===y||l);){const U=e[p+1];JA(e[p],n)&&(y=!0,e[p+1]=s?YI(U):QI(U)),p=s?_d(U):qh(U)}y&&(e[i+1]=s?QI(c):YI(c))}function JA(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&mi(e,n)>=0}function JI(e,n,i){const s=Ft();return Js(s,oa(),n)&&ua(Rr(),Mi(),s,e,n,s[sr],i,!1),JI}function ZI(e,n,i,s,c){const p=c?"class":"style";ul(e,i,n.inputs[p],p,s)}function eC(e,n){return function zc(e,n,i,s){const c=Ft(),l=Rr(),p=function Xs(e){const n=qn.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,i}(2);l.firstUpdatePass&&function cw(e,n,i,s){const c=e.data;if(null===c[i+1]){const l=c[Es()],p=function aw(e,n){return n>=e.expandoStartIndex}(e,i);(function hw(e,n){return!!(e.flags&(n?8:16))})(l,s)&&null===n&&!p&&(n=!1),n=function ab(e,n,i,s){const c=function Md(e){const n=qn.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let l=s?n.residualClasses:n.residualStyles;if(null===c)0===(s?n.classBindings:n.styleBindings)&&(i=c_(i=tC(null,e,n,i,s),n.attrs,s),l=null);else{const p=n.directiveStylingLast;if(-1===p||e[p]!==c)if(i=tC(c,e,n,i,s),null===l){let A=function cb(e,n,i){const s=i?n.classBindings:n.styleBindings;if(0!==qh(s))return e[_d(s)]}(e,n,s);void 0!==A&&Array.isArray(A)&&(A=tC(null,e,n,A[1],s),A=c_(A,n.attrs,s),function ub(e,n,i,s){e[_d(i?n.classBindings:n.styleBindings)]=s}(e,n,s,A))}else l=function lb(e,n,i){let s;const c=n.directiveEnd;for(let l=1+n.directiveStylingLast;l<c;l++)s=c_(s,e[l].hostAttrs,i);return c_(s,n.attrs,i)}(e,n,s)}return void 0!==l&&(s?n.residualClasses=l:n.residualStyles=l),i}(c,l,n,s),function XA(e,n,i,s,c,l){let p=l?n.classBindings:n.styleBindings,y=_d(p),A=qh(p);e[s]=i;let Q,U=!1;if(Array.isArray(i)?(Q=i[1],(null===Q||mi(i,Q)>0)&&(U=!0)):Q=i,c)if(0!==A){const Oe=_d(e[y+1]);e[s+1]=Mv(Oe,y),0!==Oe&&(e[Oe+1]=XI(e[Oe+1],s)),e[y+1]=function qA(e,n){return 131071&e|n<<17}(e[y+1],s)}else e[s+1]=Mv(y,0),0!==y&&(e[y+1]=XI(e[y+1],s)),y=s;else e[s+1]=Mv(A,0),0===y?y=s:e[A+1]=XI(e[A+1],s),A=s;U&&(e[s+1]=QI(e[s+1])),Z0(e,Q,s,!0),Z0(e,Q,s,!1),function YA(e,n,i,s,c){const l=c?e.residualClasses:e.residualStyles;null!=l&&"string"==typeof n&&mi(l,n)>=0&&(i[s+1]=YI(i[s+1]))}(n,Q,e,s,l),p=Mv(y,A),l?n.classBindings=p:n.styleBindings=p}(c,l,n,i,p,s)}}(l,e,p,s),n!==Er&&Js(c,p,n)&&function lw(e,n,i,s,c,l,p,y){if(!(3&n.type))return;const A=e.data,U=A[y+1],Q=function QA(e){return!(1&~e)}(U)?dw(A,n,i,c,qh(U),p):void 0;Rv(Q)||(Rv(l)||function KA(e){return!(2&~e)}(U)&&(l=dw(A,null,i,c,y,p)),function WE(e,n,i,s,c){if(n)c?e.addClass(i,s):e.removeClass(i,s);else{let l=-1===s.indexOf("-")?void 0:Ka.DashCase;null==c?e.removeStyle(i,s,l):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),l|=Ka.Important),e.setStyle(i,s,c,l))}}(s,p,Jc(Es(),i),c,l))}(l,l.data[Es()],c,c[sr],e,c[p+1]=function pb(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=nn(fu(e)))),e}(n,i),s,p)}(e,n,null,!0),eC}function tC(e,n,i,s,c){let l=null;const p=i.directiveEnd;let y=i.directiveStylingLast;for(-1===y?y=i.directiveStart:y++;y<p&&(l=n[y],s=c_(s,l.hostAttrs,c),l!==e);)y++;return null!==e&&(i.directiveStylingLast=y),s}function c_(e,n,i){const s=i?1:2;let c=-1;if(null!==n)for(let l=0;l<n.length;l++){const p=n[l];"number"==typeof p?c=p:c===s&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Xi(e,p,!!i||n[++l]))}return void 0===e?null:e}function dw(e,n,i,s,c,l){const p=null===n;let y;for(;c>0;){const A=e[c],U=Array.isArray(A),Q=U?A[1]:A,ce=null===Q;let Oe=i[c+1];Oe===Er&&(Oe=ce?Tr:void 0);let qe=ce?Gs(Oe,s):Q===s?Oe:void 0;if(U&&!Rv(qe)&&(qe=Gs(A,s)),Rv(qe)&&(y=qe,p))return y;const ft=e[c+1];c=p?_d(ft):qh(ft)}if(null!==n){let A=l?n.residualClasses:n.residualStyles;null!=A&&(y=Gs(A,s))}return y}function Rv(e){return void 0!==e}function Ov(e,n,i,s){const c=Ft(),l=Rr(),p=tr+e,y=c[sr],A=l.firstCreatePass?function Vb(e,n,i,s,c,l){const p=n.consts,A=fh(n,e,2,s,fo(p,c));return Oy(n,i,A,fo(p,l)),null!==A.attrs&&dd(A,A.attrs,!1),null!==A.mergedAttrs&&dd(A,A.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,A),A}(p,l,c,n,i,s):l.data[p],U=mw(l,c,A,y,n,e);c[p]=U;const Q=qc(A);return ma(A,!0),cl(y,U,A),!function i_(e){return!(32&~e.flags)}(A)&&Ji()&&lh(l,c,U,A),0===function wd(){return qn.lFrame.elementDepthCount}()&&ks(U,c),function rf(){qn.lFrame.elementDepthCount++}(),Q&&(lm(l,c,A),um(l,A,c)),null!==s&&Sy(c,A),Ov}function Nv(){let e=Fr();Lu()?function Ns(){qn.lFrame.isParent=!1}():(e=e.parent,ma(e,!1));const n=e;(function Dd(e){return qn.skipHydrationRootTNode===e})(n)&&function Kp(){qn.skipHydrationRootTNode=null}(),function Td(){qn.lFrame.elementDepthCount--}();const i=Rr();return i.firstCreatePass&&(Fl(i,e),Kc(e)&&i.queries.elementEnd(e)),null!=n.classesWithoutHost&&function xd(e){return!!(8&e.flags)}(n)&&ZI(i,n,Ft(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function kd(e){return!!(16&e.flags)}(n)&&ZI(i,n,Ft(),n.stylesWithoutHost,!1),Nv}function oC(e,n,i,s){return Ov(e,n,i,s),Nv(),oC}let mw=(e,n,i,s,c,l)=>(ba(!0),al(s,c,function df(){return qn.lFrame.currentNamespace}()));function vw(){return Ft()}const Qh=void 0;var Gb=["en",[["a","p"],["AM","PM"],Qh],[["AM","PM"],Qh,Qh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qh,"{1} 'at' {0}",Qh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Hb(e){const i=Math.floor(Math.abs(e)),s=e.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===s?1:5}];let Up={};function uC(e){const n=function zb(e){return e.toLowerCase().replace(/_/g,"-")}(e);let i=ww(n);if(i)return i;const s=n.split("-")[0];if(i=ww(s),i)return i;if("en"===s)return Gb;throw new pt(701,!1)}function Cw(e){return uC(e)[Bp.PluralCase]}function ww(e){return e in Up||(Up[e]=Ln.ng&&Ln.ng.common&&Ln.ng.common.locales&&Ln.ng.common.locales[e]),Up[e]}var Bp=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(Bp||{});const jp="en-US";let Tw=jp;function hC(e,n,i,s){const c=Ft(),l=Rr(),p=Fr();return fC(l,c,c[sr],p,e,n,s),hC}function fC(e,n,i,s,c,l,p){const y=qc(s),U=e.firstCreatePass&&Fo(e),Q=n[Ei],ce=ya(n);let Oe=!0;if(3&s.type||p){const Lt=Qs(s,n),cn=p?p(Lt):Lt,dn=ce.length,Qt=p?pi=>p(Mr(pi[s.index])):s.index;let pr=null;if(!p&&y&&(pr=function jS(e,n,i,s){const c=e.cleanup;if(null!=c)for(let l=0;l<c.length-1;l+=2){const p=c[l];if(p===i&&c[l+1]===s){const y=n[Ks],A=c[l+2];return y.length>A?y[A]:null}"string"==typeof p&&(l+=2)}return null}(e,n,c,s.index)),null!==pr)(pr.__ngLastListenerFn__||pr).__ngNextListenerFn__=l,pr.__ngLastListenerFn__=l,Oe=!1;else{l=Jw(s,n,Q,l,!1);const pi=i.listen(cn,c,l);ce.push(l,pi),U&&U.push(c,Qt,dn,dn+1)}}else l=Jw(s,n,Q,l,!1);const qe=s.outputs;let ft;if(Oe&&null!==qe&&(ft=qe[c])){const Lt=ft.length;if(Lt)for(let cn=0;cn<Lt;cn+=2){const ns=n[ft[cn]][ft[cn+1]].subscribe(l),bo=ce.length;ce.push(l,ns),U&&U.push(c,s.index,bo,-(bo+1))}}}function Yw(e,n,i,s){const c=ge(null);try{return qs(6,n,i),!1!==i(s)}catch(l){return _h(e,l),!1}finally{qs(7,n,i),ge(c)}}function Jw(e,n,i,s,c){return function l(p){if(p===Function)return s;id(e.componentOffset>-1?Xo(e.index,n):n);let A=Yw(n,i,s,p),U=l.__ngNextListenerFn__;for(;U;)A=Yw(n,i,U,p)&&A,U=U.__ngNextListenerFn__;return c&&!1===A&&p.preventDefault(),A}}function Zw(e=1){return function Oc(e){return(qn.lFrame.contextLView=function Al(e,n){for(;e>0;)n=n[fi],e--;return n}(e,qn.lFrame.contextLView))[Ei]}(e)}function uT(e,n,i,s){!function ov(e,n,i,s){const c=Rr();if(c.firstCreatePass){const l=Fr();Hm(c,new fp(n,i,s),l.index),function av(e,n){const i=e.contentQueries||(e.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(e.queries.length-1,n)}(c,e),!(2&~i)&&(c.staticContentQueries=!0)}return jm(c,Ft(),i)}(e,n,i,s)}function lT(e,n,i){!function $m(e,n,i){const s=Rr();return s.firstCreatePass&&(Hm(s,new fp(e,n,i),-1),!(2&~n)&&(s.staticViewQueries=!0)),jm(s,Ft(),n)}(e,n,i)}function dT(e){const n=Ft(),i=Rr(),s=Nl();xl(s+1);const c=Gm(i,s);if(e.dirty&&function ef(e){return!(4&~e[En])}(n)===!(2&~c.metadata.flags)){if(null===c.matches)e.reset([]);else{const l=Cu(n,s);e.reset(l,gf),e.notifyOnChanges()}return!0}return!1}function hT(){return function Vh(e,n){return e[qo].queries[n].queryList}(Ft(),Nl())}function CT(e,n=""){const i=Ft(),s=Rr(),c=e+tr,l=s.firstCreatePass?fh(s,c,1,n,null):s.data[c],p=wT(s,i,l,n,e);i[c]=p,Ji()&&lh(s,i,p,l),ma(l,!1)}let wT=(e,n,i,s,c)=>(ba(!0),function fy(e,n){return e.createText(n)}(n[sr],s));function gC(e){return Lv("",e,""),gC}function Lv(e,n,i){const s=Ft(),c=function Mp(e,n,i,s){return Js(e,oa(),i)?n+$n(i)+s:Er}(s,e,n,i);return c!==Er&&function va(e,n,i){const s=Jc(n,e);!function jf(e,n,i){e.setValue(n,i)}(e[sr],s,i)}(s,Es(),c),Lv}function mC(e,n,i){Lh(n)&&(n=n());const s=Ft();return Js(s,oa(),n)&&ua(Rr(),Mi(),s,e,n,s[sr],i,!1),mC}function OT(e,n){const i=Lh(e);return i&&e.set(n),i}function _C(e,n){const i=Ft(),s=Rr(),c=Fr();return fC(s,i,i[sr],c,e,n),_C}function yC(e,n,i,s,c){if(e=Re(e),Array.isArray(e))for(let l=0;l<e.length;l++)yC(e[l],n,i,s,c);else{const l=Rr(),p=Ft(),y=Fr();let A=ki(e)?e:Re(e.provide);const U=Yi(e),Q=1048575&y.providerIndexes,ce=y.directiveStart,Oe=y.providerIndexes>>20;if(ki(e)||!e.multi){const qe=new Sa(U,c,td),ft=EC(A,n,c?Q:Q+Oe,ce);-1===ft?(go(Gt(y,p),l,A),vC(l,e,n.length),n.push(A),y.directiveStart++,y.directiveEnd++,c&&(y.providerIndexes+=1048576),i.push(qe),p.push(qe)):(i[ft]=qe,p[ft]=qe)}else{const qe=EC(A,n,Q+Oe,ce),ft=EC(A,n,Q,Q+Oe),cn=ft>=0&&i[ft];if(c&&!cn||!c&&!(qe>=0&&i[qe])){go(Gt(y,p),l,A);const dn=function lP(e,n,i,s,c){const l=new Sa(e,i,td);return l.multi=[],l.index=n,l.componentProviders=0,NT(l,c,s&&!i),l}(c?uP:cP,i.length,c,s,U);!c&&cn&&(i[ft].providerFactory=dn),vC(l,e,n.length,0),n.push(A),y.directiveStart++,y.directiveEnd++,c&&(y.providerIndexes+=1048576),i.push(dn),p.push(dn)}else vC(l,e,qe>-1?qe:ft,NT(i[c?ft:qe],U,!c&&s));!c&&s&&cn&&i[ft].componentProviders++}}}function vC(e,n,i,s){const c=ki(n),l=function bn(e){return!!e.useClass}(n);if(c||l){const A=(l?Re(n.useClass):n).prototype.ngOnDestroy;if(A){const U=e.destroyHooks||(e.destroyHooks=[]);if(!c&&n.multi){const Q=U.indexOf(i);-1===Q?U.push(i,[s,A]):U[Q+1].push(s,A)}else U.push(i,A)}}}function NT(e,n,i){return i&&e.componentProviders++,e.multi.push(n)-1}function EC(e,n,i,s){for(let c=i;c<s;c++)if(n[c]===e)return c;return-1}function cP(e,n,i,s){return IC(this.multi,[])}function uP(e,n,i,s){const c=this.multi;let l;if(this.providerFactory){const p=this.providerFactory.componentProviders,y=aa(i,i[en],this.providerFactory.index,s);l=y.slice(0,p),IC(c,l);for(let A=p;A<y.length;A++)l.push(y[A])}else l=[],IC(c,l);return l}function IC(e,n){for(let i=0;i<e.length;i++)n.push((0,e[i])());return n}function xT(e,n=[]){return i=>{i.providersResolver=(s,c)=>function aP(e,n,i){const s=Rr();if(s.firstCreatePass){const c=ho(e);yC(i,s.data,s.blueprint,c,!0),yC(n,s.data,s.blueprint,c,!1)}}(s,c?c(e):e,n)}}let dP=(()=>{class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const s=Wi(0,i.type),c=s.length>0?Nt([s],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,c)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Kn({token:e,providedIn:"environment",factory:()=>new e(ri(si))})}return e})();function kT(e){Ec("NgStandalone"),e.getStandaloneInjector=n=>n.get(dP).getOrCreateStandaloneInjector(e)}function FT(e,n,i){const s=e.\u0275cmp;s.directiveDefs=wr(n,!1),s.pipeDefs=wr(i,!0)}function g_(e,n){const i=e[n];return i===Er?void 0:i}function BT(e,n,i,s,c,l,p,y){const A=n+i;return function Tv(e,n,i,s,c){const l=Wh(e,n,i,s);return Js(e,n+2,c)||l}(e,A,c,l,p)?Du(e,A+3,y?s.call(y,c,l,p):s(c,l,p)):g_(e,A+3)}function HT(e,n){const i=Rr();let s;const c=e+tr;i.firstCreatePass?(s=function wP(e,n){if(n)for(let i=n.length-1;i>=0;i--){const s=n[i];if(e===s.name)return s}}(n,i.pipeRegistry),i.data[c]=s,s.onDestroy&&(i.destroyHooks??=[]).push(c,s.onDestroy)):s=i.data[c];const l=s.factory||(s.factory=zi(s.type)),y=Cr(td);try{const A=h(!1),U=l();return h(A),function qS(e,n,i,s){i>=e.data.length&&(e.data[i]=null,e.blueprint[i]=null),n[i]=s}(i,Ft(),c,U),U}finally{Cr(y)}}function GT(e,n,i){const s=e+tr,c=Ft(),l=oc(c,s);return m_(c,s)?function LT(e,n,i,s,c,l){const p=n+i;return Js(e,p,c)?Du(e,p+1,l?s.call(l,c):s(c)):g_(e,p+1)}(c,Ls(),n,l.transform,i,l):l.transform(i)}function zT(e,n,i,s){const c=e+tr,l=Ft(),p=oc(l,c);return m_(l,c)?function UT(e,n,i,s,c,l,p){const y=n+i;return Wh(e,y,c,l)?Du(e,y+2,p?s.call(p,c,l):s(c,l)):g_(e,y+2)}(l,Ls(),n,p.transform,i,s,p):p.transform(i,s)}function WT(e,n,i,s,c){const l=e+tr,p=Ft(),y=oc(p,l);return m_(p,l)?BT(p,Ls(),n,y.transform,i,s,c,y):y.transform(i,s,c)}function m_(e,n){return e[en].data[n].pure}class cD{constructor(n){this.full=n;const i=n.split(".");this.major=i[0],this.minor=i[1],this.patch=i.slice(2).join(".")}}const qP=new cD("17.3.12");let uD=(()=>{class e{log(i){console.log(i)}warn(i){console.warn(i)}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=Kn({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const pD=new Ze(""),gD=new Ze("");let bC,EM=(()=>{class e{constructor(i,s,c){this._ngZone=i,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,bC||(function IM(e){bC=e}(c),c.addToWindow(s)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Is.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(i)||(clearTimeout(s.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,s,c){let l=-1;s&&s>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==l),i()},s)),this._callbacks.push({doneCb:i,timeoutId:l,updateCb:c})}whenStable(i,s,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,s,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,s,c){return[]}static#e=this.\u0275fac=function(s){return new(s||e)(ri(Is),ri(mD),ri(gD))};static#t=this.\u0275prov=Kn({token:e,factory:e.\u0275fac})}return e})(),mD=(()=>{class e{constructor(){this._applications=new Map}registerApplication(i,s){this._applications.set(i,s)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,s=!0){return bC?.findTestabilityInTree(this,i,s)??null}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=Kn({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function SC(e){return!!e&&"function"==typeof e.then}function _D(e){return!!e&&"function"==typeof e.subscribe}const yD=new Ze("");let PC=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s}),this.appInits=hn(yD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const c of this.appInits){const l=c();if(SC(l))i.push(l);else if(_D(l)){const p=new Promise((y,A)=>{l.subscribe({complete:y,error:A})});i.push(p)}}const s=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{s()}).catch(c=>{this.reject(c)}),0===i.length&&s(),this.initialized=!0}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=Kn({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const MC=new Ze("");function ID(e,n){return Array.isArray(n)?n.reduce(ID,e):{...e,...n}}let yd=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=hn(rg),this.afterRenderEffectManager=hn(cd),this.externalTestViews=new Set,this.beforeRender=new jn.B,this.afterTick=new jn.B,this.componentTypes=[],this.components=[],this.isStable=hn(Qa).hasPendingTasks.pipe((0,Qn.T)(i=>!i)),this._injector=hn(si)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,s){const c=i instanceof sd;if(!this._injector.get(PC).done)throw!c&&On(i),new pt(405,!1);let p;p=c?i:this._injector.get(Ah).resolveComponentFactory(i),this.componentTypes.push(p.componentType);const y=function CM(e){return e.isBoundToModule}(p)?void 0:this._injector.get(Tu),U=p.create(mo.NULL,[],s||p.selector,y),Q=U.location.nativeElement,ce=U.injector.get(pD,null);return ce?.registerApplication(Q),U.onDestroy(()=>{this.detachView(U.hostView),$v(this.components,U),ce?.unregisterApplication(Q)}),this._loadComponent(U),U}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new pt(101,!1);const s=ge(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(c){this.internalErrorHandler(c)}finally{this.afterTick.next(),this._runningTick=!1,ge(s)}}detectChangesInAttachedViews(i){let s=0;const c=this.afterRenderEffectManager;for(;;){if(s===Ih)throw new pt(103,!1);if(i){const l=0===s;this.beforeRender.next(l);for(let{_lView:p,notifyErrorHandler:y}of this._views)TM(p,l,y)}if(s++,c.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>RC(l))&&(c.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:l})=>RC(l))))break}}attachView(i){const s=i;this._views.push(s),s.attachToAppRef(this)}detachView(i){const s=i;$v(this._views,s),s.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const s=this._injector.get(MC,[]);[...this._bootstrapListeners,...s].forEach(c=>c(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>$v(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new pt(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=Kn({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $v(e,n){const i=e.indexOf(n);i>-1&&e.splice(i,1)}function TM(e,n,i){!n&&!RC(e)||function DM(e,n,i){let s;i?(s=0,e[En]|=1024):s=64&e[En]?0:1,Ch(e,n,s)}(e,i,n)}function RC(e){return bl(e)}class AM{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let bM=(()=>{class e{compileModuleSync(i){return new z(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const s=this.compileModuleSync(i),l=_a(_n(i).declarations).reduce((p,y)=>{const A=$t(y);return A&&p.push(new hd(A)),p},[]);return new AM(s,l)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=Kn({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),MM=(()=>{class e{constructor(){this.zone=hn(Is),this.applicationRef=hn(yd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=Kn({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function RM(){const e=hn(Is),n=hn(No);return i=>e.runOutsideAngular(()=>n.handleError(i))}let NM=(()=>{class e{constructor(){this.subscription=new at.yU,this.initialized=!1,this.zone=hn(Is),this.pendingTasks=hn(Qa)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Is.assertNotInAngularZone(),queueMicrotask(()=>{null!==i&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Is.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||e)};static#t=this.\u0275prov=Kn({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Gv=new Ze("",{providedIn:"root",factory:()=>hn(Gv,ar.Optional|ar.SkipSelf)||function xM(){return typeof $localize<"u"&&$localize.locale||jp}()}),kM=new Ze("",{providedIn:"root",factory:()=>"USD"}),OC=new Ze("");let DD=(()=>{class e{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,s){const c=function Jy(e="zone.js",n){return"noop"===e?new Rm:"zone.js"===e?new Is(n):e}(s?.ngZone,function TD(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:s?.ngZoneEventCoalescing,runCoalescing:s?.ngZoneRunCoalescing}));return c.run(()=>{const l=function ue(e,n,i){return new x(e,n,i)}(i.moduleType,this.injector,function wD(e){return[{provide:Is,useFactory:e},{provide:zs,multi:!0,useFactory:()=>{const n=hn(MM,{optional:!0});return()=>n.initialize()}},{provide:zs,multi:!0,useFactory:()=>{const n=hn(NM);return()=>{n.initialize()}}},{provide:rg,useFactory:RM}]}(()=>c)),p=l.injector.get(No,null);return c.runOutsideAngular(()=>{const y=c.onError.subscribe({next:A=>{p.handleError(A)}});l.onDestroy(()=>{$v(this._modules,l),y.unsubscribe()})}),function ED(e,n,i){try{const s=i();return SC(s)?s.catch(c=>{throw n.runOutsideAngular(()=>e.handleError(c)),c}):s}catch(s){throw n.runOutsideAngular(()=>e.handleError(s)),s}}(p,c,()=>{const y=l.injector.get(PC);return y.runInitializers(),y.donePromise.then(()=>(function Dw(e){"string"==typeof e&&(Tw=e.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Gv,jp)||jp),this._moduleDoBootstrap(l),l))})})}bootstrapModule(i,s=[]){const c=ID({},s);return function PM(e,n,i){const s=new z(i);return Promise.resolve(s)}(0,0,i).then(l=>this.bootstrapModuleFactory(l,c))}_moduleDoBootstrap(i){const s=i.injector.get(yd);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(c=>s.bootstrap(c));else{if(!i.instance.ngDoBootstrap)throw new pt(-403,!1);i.instance.ngDoBootstrap(s)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pt(404,!1);this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s());const i=this._injector.get(OC,null);i&&(i.forEach(s=>s()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(s){return new(s||e)(ri(mo))};static#t=this.\u0275prov=Kn({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})(),vd=null;const AD=new Ze("");function bD(e,n,i=[]){const s=`Platform: ${n}`,c=new Ze(s);return(l=[])=>{let p=NC();if(!p||p.injector.get(AD,!1)){const y=[...i,...l,{provide:c,useValue:!0}];e?e(y):function VM(e){if(vd&&!vd.get(AD,!1))throw new pt(400,!1);(function vD(){!function Tn(e){Bt=e}(()=>{throw new pt(600,!1)})})(),vd=e;const n=e.get(DD);(function PD(e){e.get(Tf,null)?.forEach(i=>i())})(e)}(function SD(e=[],n){return mo.create({name:n,providers:[{provide:Fn,useValue:"platform"},{provide:OC,useValue:new Set([()=>vd=null])},...e]})}(y,s))}return function LM(e){const n=NC();if(!n)throw new pt(401,!1);return n}()}}function NC(){return vd?.get(DD)??null}function BM(){return!1}let RD=(()=>{class e{static#e=this.__NG_ELEMENT_ID__=jM}return e})();function jM(e){return function $M(e,n,i){if(ra(e)&&!i){const s=Xo(e.index,n);return new wh(s,s)}return 47&e.type?new wh(n[Gn],n):null}(Fr(),Ft(),!(16&~e))}class kD{constructor(){}supports(n){return vl(n)}create(n){return new KM(n)}}const WM=(e,n)=>n;class KM{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||WM}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,s=this._removalsHead,c=0,l=null;for(;i||s;){const p=!s||i&&i.currentIndex<VD(s,c,l)?i:s,y=VD(p,c,l),A=p.currentIndex;if(p===s)c--,s=s._nextRemoved;else if(i=i._next,null==p.previousIndex)c++;else{l||(l=[]);const U=y-c,Q=A-c;if(U!=Q){for(let Oe=0;Oe<U;Oe++){const qe=Oe<l.length?l[Oe]:l[Oe]=0,ft=qe+Oe;Q<=ft&&ft<U&&(l[Oe]=qe+1)}l[p.previousIndex]=Q-U}}y!==A&&n(p,y,A)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!vl(n))throw new pt(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let c,l,p,i=this._itHead,s=!1;if(Array.isArray(n)){this.length=n.length;for(let y=0;y<this.length;y++)l=n[y],p=this._trackByFn(y,l),null!==i&&Object.is(i.trackById,p)?(s&&(i=this._verifyReinsertion(i,l,p,y)),Object.is(i.item,l)||this._addIdentityChange(i,l)):(i=this._mismatch(i,l,p,y),s=!0),i=i._next}else c=0,function lA(e,n){if(Array.isArray(e))for(let i=0;i<e.length;i++)n(e[i]);else{const i=e[Symbol.iterator]();let s;for(;!(s=i.next()).done;)n(s.value)}}(n,y=>{p=this._trackByFn(c,y),null!==i&&Object.is(i.trackById,p)?(s&&(i=this._verifyReinsertion(i,y,p,c)),Object.is(i.item,y)||this._addIdentityChange(i,y)):(i=this._mismatch(i,y,p,c),s=!0),i=i._next,c++}),this.length=c;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,s,c){let l;return null===n?l=this._itTail:(l=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,l,c)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(s,c))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,l,c)):n=this._addAfter(new qM(i,s),l,c),n}_verifyReinsertion(n,i,s,c){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==l?n=this._reinsertAfter(l,n._prev,c):n.currentIndex!=c&&(n.currentIndex=c,this._addToMoves(n,c)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const c=n._prevRemoved,l=n._nextRemoved;return null===c?this._removalsHead=l:c._nextRemoved=l,null===l?this._removalsTail=c:l._prevRemoved=c,this._insertAfter(n,i,s),this._addToMoves(n,s),n}_moveAfter(n,i,s){return this._unlink(n),this._insertAfter(n,i,s),this._addToMoves(n,s),n}_addAfter(n,i,s){return this._insertAfter(n,i,s),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,s){const c=null===i?this._itHead:i._next;return n._next=c,n._prev=i,null===c?this._itTail=n:c._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new FD),this._linkedRecords.put(n),n.currentIndex=s,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,s=n._next;return null===i?this._itHead=s:i._next=s,null===s?this._itTail=i:s._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FD),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class qM{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class QM{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===i||i<=s.currentIndex)&&Object.is(s.trackById,n))return s;return null}remove(n){const i=n._prevDup,s=n._nextDup;return null===i?this._head=s:i._nextDup=s,null===s?this._tail=i:s._prevDup=i,null===this._head}}class FD{constructor(){this.map=new Map}put(n){const i=n.trackById;let s=this.map.get(i);s||(s=new QM,this.map.set(i,s)),s.add(n)}get(n,i){const c=this.map.get(n);return c?c.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function VD(e,n,i){const s=e.previousIndex;if(null===s)return s;let c=0;return i&&s<i.length&&(c=i[s]),s+n+c}class LD{constructor(){}supports(n){return n instanceof Map||LI(n)}create(){return new XM}}class XM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||LI(n)))throw new pt(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(s,c)=>{if(i&&i.key===c)this._maybeAddToChanges(i,s),this._appendAfter=i,i=i._next;else{const l=this._getOrCreateRecordForKey(c,s);i=this._insertBeforeOrAppend(i,l)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let s=i;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const s=n._prev;return i._next=n,i._prev=s,n._prev=i,s&&(s._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const c=this._records.get(n);this._maybeAddToChanges(c,i);const l=c._prev,p=c._next;return l&&(l._next=p),p&&(p._prev=l),c._next=null,c._prev=null,c}const s=new YM(n);return this._records.set(n,s),s.currentValue=i,this._addToAdditions(s),s}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(s=>i(n[s],s))}}class YM{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UD(){return new LC([new kD])}let LC=(()=>{class e{static#e=this.\u0275prov=Kn({token:e,providedIn:"root",factory:UD});constructor(i){this.factories=i}static create(i,s){if(null!=s){const c=s.factories.slice();i=i.concat(c)}return new e(i)}static extend(i){return{provide:e,useFactory:s=>e.create(i,s||UD()),deps:[[e,new Gi,new Li]]}}find(i){const s=this.factories.find(c=>c.supports(i));if(null!=s)return s;throw new pt(901,!1)}}return e})();function BD(){return new UC([new LD])}let UC=(()=>{class e{static#e=this.\u0275prov=Kn({token:e,providedIn:"root",factory:BD});constructor(i){this.factories=i}static create(i,s){if(s){const c=s.factories.slice();i=i.concat(c)}return new e(i)}static extend(i){return{provide:e,useFactory:s=>e.create(i,s||BD()),deps:[[e,new Gi,new Li]]}}find(i){const s=this.factories.find(c=>c.supports(i));if(s)return s;throw new pt(901,!1)}}return e})();const eR=bD(null,"core",[]);let tR=(()=>{class e{constructor(i){}static#e=this.\u0275fac=function(s){return new(s||e)(ri(yd))};static#t=this.\u0275mod=be({type:e});static#n=this.\u0275inj=as({})}return e})();function MR(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function OR(e){const n=ge(null);try{return e()}finally{ge(n)}}function LR(e){const n=$t(e);if(!n)return null;const i=new hd(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},1182:(un,Ye,k)=>{k.d(Ye,{DS:()=>yt,X8:()=>Et,$z:()=>Tn,UB:()=>Qe,yy:()=>Bt,ZP:()=>tn,AU:()=>xe,CP:()=>Kt,gF:()=>lt}),k(2438);var V=k(177),P=k(4438),w=k(1825),G=k(9253),Pe=k(1413),ge=k(7673),Fe=k(1985),Be=k(8455),_e=k(6365),me=k(8750),$e=k(983),He=k(9326),Ve=k(941),At=k(5558),vt=k(6354),ot=k(6129);class Jt extends Pe.B{constructor(qt=1/0,pn=1/0,on=ot.U){super(),this._bufferSize=qt,this._windowTime=pn,this._timestampProvider=on,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=pn===1/0,this._bufferSize=Math.max(1,qt),this._windowTime=Math.max(1,pn)}next(qt){const{isStopped:pn,_buffer:on,_infiniteTimeWindow:an,_timestampProvider:Dn,_windowTime:An}=this;pn||(on.push(qt),!an&&on.push(Dn.now()+An)),this._trimBuffer(),super.next(qt)}_subscribe(qt){this._throwIfClosed(),this._trimBuffer();const pn=this._innerSubscribe(qt),{_infiniteTimeWindow:on,_buffer:an}=this,Dn=an.slice();for(let An=0;An<Dn.length&&!qt.closed;An+=on?1:2)qt.next(Dn[An]);return this._checkFinalizedStatuses(qt),pn}_trimBuffer(){const{_bufferSize:qt,_timestampProvider:pn,_buffer:on,_infiniteTimeWindow:an}=this,Dn=(an?1:2)*qt;if(qt<1/0&&Dn<on.length&&on.splice(0,on.length-Dn),!an){const An=pn.now();let jn=0;for(let at=1;at<on.length&&on[at]<=An;at+=2)jn=at;jn&&on.splice(0,jn+1)}}}var je=k(7707),We=k(9974);function te(et,qt,...pn){if(!0===qt)return void et();if(!1===qt)return;const on=new je.Ms({next:()=>{on.unsubscribe(),et()}});return(0,me.Tg)(qt(...pn)).subscribe(on)}function De(et,qt,pn){let on,an=!1;return et&&"object"==typeof et?({bufferSize:on=1/0,windowTime:qt=1/0,refCount:an=!1,scheduler:pn}=et):on=et??1/0,function Y(et={}){const{connector:qt=(()=>new Pe.B),resetOnError:pn=!0,resetOnComplete:on=!0,resetOnRefCountZero:an=!0}=et;return Dn=>{let An,jn,at,In=0,Qn=!1,Xn=!1;const bt=()=>{jn?.unsubscribe(),jn=void 0},pt=()=>{bt(),An=at=void 0,Qn=Xn=!1},jr=()=>{const Rt=An;pt(),Rt?.unsubscribe()};return(0,We.N)((Rt,Xe)=>{In++,!Xn&&!Qn&&bt();const Ot=at=at??qt();Xe.add(()=>{In--,0===In&&!Xn&&!Qn&&(jn=te(jr,an))}),Ot.subscribe(Xe),!An&&In>0&&(An=new je.Ms({next:rr=>Ot.next(rr),error:rr=>{Xn=!0,bt(),jn=te(pt,pn,rr),Ot.error(rr)},complete:()=>{Qn=!0,bt(),jn=te(pt,on),Ot.complete()}}),(0,me.Tg)(Rt).subscribe(An))})(Dn)}}({connector:()=>new Jt(on,qt,pn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:an})}var rt=k(1594),st=k(8071);function le(et,qt){return(0,st.T)(qt)?(0,At.n)(()=>et,qt):(0,At.n)(()=>et)}var Ge=k(6745),Je=k(5964),zt=k(7935);const Kt=new P.nKC("angularfire2.auth.use-emulator"),Bt=new P.nKC("angularfire2.auth.settings"),tn=new P.nKC("angularfire2.auth.tenant-id"),Tn=new P.nKC("angularfire2.auth.langugage-code"),xe=new P.nKC("angularfire2.auth.use-device-language"),Qe=new P.nKC("angularfire.auth.persistence"),lt=(et,qt,pn,on,an,Dn,An,jn)=>(0,G.BM)(`${et.name}.auth`,"AngularFireAuth",et.name,()=>{const at=qt.runOutsideAngular(()=>et.auth());if(pn&&at.useEmulator(...pn),on&&(at.tenantId=on),at.languageCode=an,Dn&&at.useDeviceLanguage(),An)for(const[In,Qn]of Object.entries(An))at.settings[In]=Qn;return jn&&at.setPersistence(jn),at},[pn,on,an,Dn,An,jn]);let yt=(()=>{class et{authState;idToken;user;idTokenResult;credential;constructor(pn,on,an,Dn,An,jn,at,In,Qn,Xn,bt,pt){const jr=new Pe.B,Rt=(0,ge.of)(void 0).pipe((0,Ve.Q)(An.outsideAngular),(0,At.n)(()=>Dn.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2438)))),(0,vt.T)(()=>(0,G.iB)(pn,Dn,on)),(0,vt.T)(Xe=>lt(Xe,Dn,jn,In,Qn,Xn,at,bt)),De({bufferSize:1,refCount:!1}));if((0,V.Vy)(an))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ge.of)(null);else{Rt.pipe((0,rt.$)()).subscribe();const Xe=Rt.pipe((0,At.n)(Yn=>Yn.getRedirectResult().then(Pn=>Pn,()=>null)),w.U0,De({bufferSize:1,refCount:!1})),Ot=Rt.pipe((0,At.n)(Yn=>new Fe.c(Pn=>({unsubscribe:Dn.runOutsideAngular(()=>Yn.onAuthStateChanged(vn=>Pn.next(vn),vn=>Pn.error(vn),()=>Pn.complete()))})))),rr=Rt.pipe((0,At.n)(Yn=>new Fe.c(Pn=>({unsubscribe:Dn.runOutsideAngular(()=>Yn.onIdTokenChanged(vn=>Pn.next(vn),vn=>Pn.error(vn),()=>Pn.complete()))}))));this.authState=Xe.pipe(le(Ot),(0,Ge._)(An.outsideAngular),(0,Ve.Q)(An.insideAngular)),this.user=Xe.pipe(le(rr),(0,Ge._)(An.outsideAngular),(0,Ve.Q)(An.insideAngular)),this.idToken=this.user.pipe((0,At.n)(Yn=>Yn?(0,Be.H)(Yn.getIdToken()):(0,ge.of)(null))),this.idTokenResult=this.user.pipe((0,At.n)(Yn=>Yn?(0,Be.H)(Yn.getIdTokenResult()):(0,ge.of)(null))),this.credential=function Te(...et){const qt=(0,He.lI)(et),pn=(0,He.R0)(et,1/0),on=et;return on.length?1===on.length?(0,me.Tg)(on[0]):(0,_e.U)(pn)((0,Be.H)(on,qt)):$e.w}(Xe,jr,this.authState.pipe((0,Je.p)(Yn=>!Yn))).pipe((0,vt.T)(Yn=>Yn?.user?Yn:null),(0,Ge._)(An.outsideAngular),(0,Ve.Q)(An.insideAngular))}return(0,G.Gt)(this,Rt,Dn,{spy:{apply:(Xe,Ot,rr)=>{(Xe.startsWith("signIn")||Xe.startsWith("createUser"))&&rr.then(Yn=>jr.next(Yn))}}})}static \u0275fac=function(on){return new(on||et)(P.KVO(G.rx),P.KVO(G.uP,8),P.KVO(P.Agw),P.KVO(P.SKi),P.KVO(w.u0),P.KVO(Kt,8),P.KVO(Bt,8),P.KVO(tn,8),P.KVO(Tn,8),P.KVO(xe,8),P.KVO(Qe,8),P.KVO(w.Jv,8))};static \u0275prov=P.jDH({token:et,factory:et.\u0275fac,providedIn:"any"})}return et})(),Et=(()=>{class et{constructor(){zt.A.registerVersion("angularfire",w.xv.full,"auth-compat")}static \u0275fac=function(on){return new(on||et)};static \u0275mod=P.$C({type:et});static \u0275inj=P.G2t({providers:[yt]})}return et})()},9253:(un,Ye,k)=>{k.d(Ye,{BM:()=>Te,Gt:()=>G,bf:()=>He,e7:()=>Pe,iB:()=>_e,rx:()=>Fe,uP:()=>Be});var _=k(4438),V=k(1825),P=k(7935);const w=["ngOnDestroy"],G=(ot,Jt,je,We={})=>new Proxy(ot,{get:(Y,te)=>je.runOutsideAngular(()=>{if(ot[te])return We?.spy?.get&&We.spy.get(te,ot[te]),ot[te];if(w.indexOf(te)>-1)return()=>{};const De=Jt.toPromise().then(rt=>{const st=rt?.[te];return"function"==typeof st?st.bind(rt):st?.then?st.then(le=>je.run(()=>le)):je.run(()=>st)});return new Proxy(()=>{},{get:(rt,st)=>De[st],apply:(rt,st,le)=>De.then(Ge=>{const Je=Ge?.(...le);return We?.spy?.apply&&We.spy.apply(te,le,Je),Je})})})}),Pe=(ot,Jt)=>{Jt.forEach(je=>{Object.getOwnPropertyNames(je.prototype||je).forEach(We=>{Object.defineProperty(ot.prototype,We,Object.getOwnPropertyDescriptor(je.prototype||je,We))})})};class ge{constructor(Jt){return Jt}}const Fe=new _.nKC("angularfire2.app.options"),Be=new _.nKC("angularfire2.app.name");function _e(ot,Jt,je){const Y="object"==typeof je&&je||{};Y.name=Y.name||"string"==typeof je&&je||"[DEFAULT]";const De=P.A.apps.filter(rt=>rt&&rt.name===Y.name)[0]||Jt.runOutsideAngular(()=>P.A.initializeApp(ot,Y));try{if(JSON.stringify(ot)!==JSON.stringify(De.options)){const rt=!!module.hot;me("error",`${De.name} Firebase App already initialized with different options${rt?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ge(De)}const me=(ot,...Jt)=>{(0,_.naY)()&&typeof console<"u"&&console[ot](...Jt)},$e={provide:ge,useFactory:_e,deps:[Fe,_.SKi,[new _.Xx1,Be]]};let He=(()=>{class ot{static initializeApp(je,We){return{ngModule:ot,providers:[{provide:Fe,useValue:je},{provide:Be,useValue:We}]}}constructor(je){P.A.registerVersion("angularfire",V.xv.full,"core"),P.A.registerVersion("angularfire",V.xv.full,"app-compat"),P.A.registerVersion("angular",_.xvI.full,je.toString())}static \u0275fac=function(We){return new(We||ot)(_.KVO(_.Agw))};static \u0275mod=_.$C({type:ot});static \u0275inj=_.G2t({providers:[$e]})}return ot})();function Te(ot,Jt,je,We,Y){const[,te,De]=globalThis.\u0275AngularfireInstanceCache.find(rt=>rt[0]===ot)||[];if(te)return function Ve(ot,Jt){try{return ot.toString()===Jt.toString()}catch{return ot===Jt}}(Y,De)||(vt("error",`${Jt} was already initialized on the ${je} Firebase App with different settings.${At?" You may need to reload as Firebase is not HMR aware.":""}`),vt("warn",{is:Y,was:De})),te;{const rt=We();return globalThis.\u0275AngularfireInstanceCache.push([ot,rt,Y]),rt}}const At=typeof module<"u"&&!!module.hot,vt=(ot,...Jt)=>{(0,_.naY)()&&typeof console<"u"&&console[ot](...Jt)};globalThis.\u0275AngularfireInstanceCache||=[]},1825:(un,Ye,k)=>{k.d(Ye,{xv:()=>Ve,U0:()=>zt,u0:()=>De,Jv:()=>Jt});var _=k(4438),V=k(7852);(0,V.registerVersion)("firebase","10.13.1","app");var G=k(6780),ge=k(9687);const Be=new class Fe extends ge.q{}(class Pe extends G.R{constructor(Tn,xe){super(Tn,xe),this.scheduler=Tn,this.work=xe}schedule(Tn,xe=0){return xe>0?super.schedule(Tn,xe):(this.delay=xe,this.state=Tn,this.scheduler.flush(this),this)}execute(Tn,xe){return xe>0||this.closed?super.execute(Tn,xe):this._execute(Tn,xe)}requestAsyncId(Tn,xe,Qe=0){return null!=Qe&&Qe>0||null==Qe&&this.delay>0?super.requestAsyncId(Tn,xe,Qe):(Tn.flush(this),0)}});var me=k(3236),$e=k(8141),He=k(6745),Te=k(941);const Ve=new _.RxE("ANGULARFIRE2_VERSION");class Jt{constructor(){return((tn,Tn)=>{const xe=(0,V.getApps)(),Qe=[];return xe.forEach(lt=>{lt.container.getProvider(tn).instances.forEach(Et=>{Qe.includes(Et)||Qe.push(Et)})}),Qe})(je)}}const je="app-check";function We(){}class Y{zone;delegate;constructor(Tn,xe=Be){this.zone=Tn,this.delegate=xe}now(){return this.delegate.now()}schedule(Tn,xe,Qe){const lt=this.zone;return this.delegate.schedule(function(Et){lt.runGuarded(()=>{Tn.apply(this,[Et])})},xe,Qe)}}class te{zone;task=null;constructor(Tn){this.zone=Tn}call(Tn,xe){const Qe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",We,{},We,We)),xe.pipe((0,$e.M)({next:Qe,complete:Qe,error:Qe})).subscribe(Tn).add(Qe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let De=(()=>{class tn{ngZone;outsideAngular;insideAngular;constructor(xe){this.ngZone=xe,this.outsideAngular=xe.runOutsideAngular(()=>new Y(Zone.current)),this.insideAngular=xe.run(()=>new Y(Zone.current,me.E)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Qe){return new(Qe||tn)(_.KVO(_.SKi))};static \u0275prov=_.jDH({token:tn,factory:tn.\u0275fac,providedIn:"root"})}return tn})();function zt(tn){return function Pt(tn){return function(xe){return(xe=xe.lift(new te(tn.ngZone))).pipe((0,He._)(tn.outsideAngular),(0,Te.Q)(tn.insideAngular))}}(function rt(){const tn=globalThis.\u0275AngularFireScheduler;if(!tn)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return tn}())(tn)}},9417:(un,Ye,k)=>{k.d(Ye,{BC:()=>bt,JD:()=>Wr,MR:()=>no,X1:()=>xi,YN:()=>Po,cb:()=>pt,j4:()=>Cs,k0:()=>je,me:()=>Te,ok:()=>oo,qT:()=>jo,vS:()=>lr,wz:()=>ri,xH:()=>us,y7:()=>Hs});var _=k(4438),V=k(177),P=k(8455),w=k(7468),G=k(6354);let Pe=(()=>{class H{constructor(O,ee){this._renderer=O,this._elementRef=ee,this.onChange=Se=>{},this.onTouched=()=>{}}setProperty(O,ee){this._renderer.setProperty(this._elementRef.nativeElement,O,ee)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}static#e=this.\u0275fac=function(ee){return new(ee||H)(_.rXU(_.sFG),_.rXU(_.aKT))};static#t=this.\u0275dir=_.FsC({type:H})}return H})(),ge=(()=>{class H extends Pe{static#e=this.\u0275fac=(()=>{let O;return function(Se){return(O||(O=_.xGo(H)))(Se||H)}})();static#t=this.\u0275dir=_.FsC({type:H,features:[_.Vt3]})}return H})();const Fe=new _.nKC(""),me={provide:Fe,useExisting:(0,_.Rfq)(()=>Te),multi:!0},He=new _.nKC("");let Te=(()=>{class H extends Pe{constructor(O,ee,Se){super(O,ee),this._compositionMode=Se,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $e(){const H=(0,V.QT)()?(0,V.QT)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(O){this.setProperty("value",O??"")}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}static#e=this.\u0275fac=function(ee){return new(ee||H)(_.rXU(_.sFG),_.rXU(_.aKT),_.rXU(He,8))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(ee,Se){1&ee&&_.bIt("input",function(ir){return Se._handleInput(ir.target.value)})("blur",function(){return Se.onTouched()})("compositionstart",function(){return Se._compositionStart()})("compositionend",function(ir){return Se._compositionEnd(ir.target.value)})},features:[_.Jv_([me]),_.Vt3]})}return H})();function Ve(H){return null==H||("string"==typeof H||Array.isArray(H))&&0===H.length}function At(H){return null!=H&&"number"==typeof H.length}const vt=new _.nKC(""),ot=new _.nKC(""),Jt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class je{static min(K){return function We(H){return K=>{if(Ve(K.value)||Ve(H))return null;const O=parseFloat(K.value);return!isNaN(O)&&O<H?{min:{min:H,actual:K.value}}:null}}(K)}static max(K){return function Y(H){return K=>{if(Ve(K.value)||Ve(H))return null;const O=parseFloat(K.value);return!isNaN(O)&&O>H?{max:{max:H,actual:K.value}}:null}}(K)}static required(K){return function te(H){return Ve(H.value)?{required:!0}:null}(K)}static requiredTrue(K){return function De(H){return!0===H.value?null:{required:!0}}(K)}static email(K){return function rt(H){return Ve(H.value)||Jt.test(H.value)?null:{email:!0}}(K)}static minLength(K){return function st(H){return K=>Ve(K.value)||!At(K.value)?null:K.value.length<H?{minlength:{requiredLength:H,actualLength:K.value.length}}:null}(K)}static maxLength(K){return function le(H){return K=>At(K.value)&&K.value.length>H?{maxlength:{requiredLength:H,actualLength:K.value.length}}:null}(K)}static pattern(K){return function Ge(H){if(!H)return Je;let K,O;return"string"==typeof H?(O="","^"!==H.charAt(0)&&(O+="^"),O+=H,"$"!==H.charAt(H.length-1)&&(O+="$"),K=new RegExp(O)):(O=H.toString(),K=H),ee=>{if(Ve(ee.value))return null;const Se=ee.value;return K.test(Se)?null:{pattern:{requiredPattern:O,actualValue:Se}}}}(K)}static nullValidator(K){return null}static compose(K){return xe(K)}static composeAsync(K){return lt(K)}}function Je(H){return null}function zt(H){return null!=H}function Pt(H){return(0,_.jNT)(H)?(0,P.H)(H):H}function Kt(H){let K={};return H.forEach(O=>{K=null!=O?{...K,...O}:K}),0===Object.keys(K).length?null:K}function Bt(H,K){return K.map(O=>O(H))}function Tn(H){return H.map(K=>function tn(H){return!H.validate}(K)?K:O=>K.validate(O))}function xe(H){if(!H)return null;const K=H.filter(zt);return 0==K.length?null:function(O){return Kt(Bt(O,K))}}function Qe(H){return null!=H?xe(Tn(H)):null}function lt(H){if(!H)return null;const K=H.filter(zt);return 0==K.length?null:function(O){const ee=Bt(O,K).map(Pt);return(0,w.p)(ee).pipe((0,G.T)(Kt))}}function yt(H){return null!=H?lt(Tn(H)):null}function Et(H,K){return null===H?[K]:Array.isArray(H)?[...H,K]:[H,K]}function et(H){return H._rawValidators}function qt(H){return H._rawAsyncValidators}function pn(H){return H?Array.isArray(H)?H:[H]:[]}function on(H,K){return Array.isArray(H)?H.includes(K):H===K}function an(H,K){const O=pn(K);return pn(H).forEach(Se=>{on(O,Se)||O.push(Se)}),O}function Dn(H,K){return pn(K).filter(O=>!on(H,O))}class An{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(K){this._rawValidators=K||[],this._composedValidatorFn=Qe(this._rawValidators)}_setAsyncValidators(K){this._rawAsyncValidators=K||[],this._composedAsyncValidatorFn=yt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(K){this._onDestroyCallbacks.push(K)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(K=>K()),this._onDestroyCallbacks=[]}reset(K=void 0){this.control&&this.control.reset(K)}hasError(K,O){return!!this.control&&this.control.hasError(K,O)}getError(K,O){return this.control?this.control.getError(K,O):null}}class jn extends An{get formDirective(){return null}get path(){return null}}class at extends An{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class In{constructor(K){this._cd=K}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let bt=(()=>{class H extends In{constructor(O){super(O)}static#e=this.\u0275fac=function(ee){return new(ee||H)(_.rXU(at,2))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(ee,Se){2&ee&&_.AVh("ng-untouched",Se.isUntouched)("ng-touched",Se.isTouched)("ng-pristine",Se.isPristine)("ng-dirty",Se.isDirty)("ng-valid",Se.isValid)("ng-invalid",Se.isInvalid)("ng-pending",Se.isPending)},features:[_.Vt3]})}return H})(),pt=(()=>{class H extends In{constructor(O){super(O)}static#e=this.\u0275fac=function(ee){return new(ee||H)(_.rXU(jn,10))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(ee,Se){2&ee&&_.AVh("ng-untouched",Se.isUntouched)("ng-touched",Se.isTouched)("ng-pristine",Se.isPristine)("ng-dirty",Se.isDirty)("ng-valid",Se.isValid)("ng-invalid",Se.isInvalid)("ng-pending",Se.isPending)("ng-submitted",Se.isSubmitted)},features:[_.Vt3]})}return H})();const Un="VALID",Qr="INVALID",nn="PENDING",rn="DISABLED";function Xr(H){return(Ie(H)?H.validators:H)||null}function oi(H,K){return(Ie(K)?K.asyncValidators:H)||null}function Ie(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}function Ee(H,K,O){const ee=H.controls;if(!(K?Object.keys(ee):ee).length)throw new _.wOt(1e3,"");if(!ee[O])throw new _.wOt(1001,"")}function Ke(H,K,O){H._forEachChild((ee,Se)=>{if(void 0===O[Se])throw new _.wOt(1002,"")})}class Mt{constructor(K,O){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(K),this._assignAsyncValidators(O)}get validator(){return this._composedValidatorFn}set validator(K){this._rawValidators=this._composedValidatorFn=K}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(K){this._rawAsyncValidators=this._composedAsyncValidatorFn=K}get parent(){return this._parent}get valid(){return this.status===Un}get invalid(){return this.status===Qr}get pending(){return this.status==nn}get disabled(){return this.status===rn}get enabled(){return this.status!==rn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(K){this._assignValidators(K)}setAsyncValidators(K){this._assignAsyncValidators(K)}addValidators(K){this.setValidators(an(K,this._rawValidators))}addAsyncValidators(K){this.setAsyncValidators(an(K,this._rawAsyncValidators))}removeValidators(K){this.setValidators(Dn(K,this._rawValidators))}removeAsyncValidators(K){this.setAsyncValidators(Dn(K,this._rawAsyncValidators))}hasValidator(K){return on(this._rawValidators,K)}hasAsyncValidator(K){return on(this._rawAsyncValidators,K)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(K={}){this.touched=!0,this._parent&&!K.onlySelf&&this._parent.markAsTouched(K)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(K=>K.markAllAsTouched())}markAsUntouched(K={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}markAsDirty(K={}){this.pristine=!1,this._parent&&!K.onlySelf&&this._parent.markAsDirty(K)}markAsPristine(K={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}markAsPending(K={}){this.status=nn,!1!==K.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!K.onlySelf&&this._parent.markAsPending(K)}disable(K={}){const O=this._parentMarkedDirty(K.onlySelf);this.status=rn,this.errors=null,this._forEachChild(ee=>{ee.disable({...K,onlySelf:!0})}),this._updateValue(),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...K,skipPristineCheck:O}),this._onDisabledChange.forEach(ee=>ee(!0))}enable(K={}){const O=this._parentMarkedDirty(K.onlySelf);this.status=Un,this._forEachChild(ee=>{ee.enable({...K,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent}),this._updateAncestors({...K,skipPristineCheck:O}),this._onDisabledChange.forEach(ee=>ee(!1))}_updateAncestors(K){this._parent&&!K.onlySelf&&(this._parent.updateValueAndValidity(K),K.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(K){this._parent=K}getRawValue(){return this.value}updateValueAndValidity(K={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Un||this.status===nn)&&this._runAsyncValidator(K.emitEvent)),!1!==K.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!K.onlySelf&&this._parent.updateValueAndValidity(K)}_updateTreeValidity(K={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(K)),this.updateValueAndValidity({onlySelf:!0,emitEvent:K.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rn:Un}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(K){if(this.asyncValidator){this.status=nn,this._hasOwnPendingAsyncValidator=!0;const O=Pt(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(ee=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ee,{emitEvent:K})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(K,O={}){this.errors=K,this._updateControlsErrors(!1!==O.emitEvent)}get(K){let O=K;return null==O||(Array.isArray(O)||(O=O.split(".")),0===O.length)?null:O.reduce((ee,Se)=>ee&&ee._find(Se),this)}getError(K,O){const ee=O?this.get(O):this;return ee&&ee.errors?ee.errors[K]:null}hasError(K,O){return!!this.getError(K,O)}get root(){let K=this;for(;K._parent;)K=K._parent;return K}_updateControlsErrors(K){this.status=this._calculateStatus(),K&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(K)}_initObservables(){this.valueChanges=new _.bkB,this.statusChanges=new _.bkB}_calculateStatus(){return this._allControlsDisabled()?rn:this.errors?Qr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nn)?nn:this._anyControlsHaveStatus(Qr)?Qr:Un}_anyControlsHaveStatus(K){return this._anyControls(O=>O.status===K)}_anyControlsDirty(){return this._anyControls(K=>K.dirty)}_anyControlsTouched(){return this._anyControls(K=>K.touched)}_updatePristine(K={}){this.pristine=!this._anyControlsDirty(),this._parent&&!K.onlySelf&&this._parent._updatePristine(K)}_updateTouched(K={}){this.touched=this._anyControlsTouched(),this._parent&&!K.onlySelf&&this._parent._updateTouched(K)}_registerOnCollectionChange(K){this._onCollectionChange=K}_setUpdateStrategy(K){Ie(K)&&null!=K.updateOn&&(this._updateOn=K.updateOn)}_parentMarkedDirty(K){return!K&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(K){return null}_assignValidators(K){this._rawValidators=Array.isArray(K)?K.slice():K,this._composedValidatorFn=function Nn(H){return Array.isArray(H)?Qe(H):H||null}(this._rawValidators)}_assignAsyncValidators(K){this._rawAsyncValidators=Array.isArray(K)?K.slice():K,this._composedAsyncValidatorFn=function Re(H){return Array.isArray(H)?yt(H):H||null}(this._rawAsyncValidators)}}class he extends Mt{constructor(K,O,ee){super(Xr(O),oi(ee,O)),this.controls=K,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(K,O){return this.controls[K]?this.controls[K]:(this.controls[K]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(K,O,ee={}){this.registerControl(K,O),this.updateValueAndValidity({emitEvent:ee.emitEvent}),this._onCollectionChange()}removeControl(K,O={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(K,O,ee={}){this.controls[K]&&this.controls[K]._registerOnCollectionChange(()=>{}),delete this.controls[K],O&&this.registerControl(K,O),this.updateValueAndValidity({emitEvent:ee.emitEvent}),this._onCollectionChange()}contains(K){return this.controls.hasOwnProperty(K)&&this.controls[K].enabled}setValue(K,O={}){Ke(this,0,K),Object.keys(K).forEach(ee=>{Ee(this,!0,ee),this.controls[ee].setValue(K[ee],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(K,O={}){null!=K&&(Object.keys(K).forEach(ee=>{const Se=this.controls[ee];Se&&Se.patchValue(K[ee],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(K={},O={}){this._forEachChild((ee,Se)=>{ee.reset(K?K[Se]:null,{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(K,O,ee)=>(K[ee]=O.getRawValue(),K))}_syncPendingControls(){let K=this._reduceChildren(!1,(O,ee)=>!!ee._syncPendingControls()||O);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){Object.keys(this.controls).forEach(O=>{const ee=this.controls[O];ee&&K(ee,O)})}_setUpControls(){this._forEachChild(K=>{K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(K){for(const[O,ee]of Object.entries(this.controls))if(this.contains(O)&&K(ee))return!0;return!1}_reduceValue(){return this._reduceChildren({},(O,ee,Se)=>((ee.enabled||this.disabled)&&(O[Se]=ee.value),O))}_reduceChildren(K,O){let ee=K;return this._forEachChild((Se,fn)=>{ee=O(ee,Se,fn)}),ee}_allControlsDisabled(){for(const K of Object.keys(this.controls))if(this.controls[K].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(K){return this.controls.hasOwnProperty(K)?this.controls[K]:null}}class pe extends he{}const xt=new _.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>yn}),yn="always";function Wn(H,K){return[...K.path,H]}function Jn(H,K,O=yn){kr(H,K),K.valueAccessor.writeValue(H.value),(H.disabled||"always"===O)&&K.valueAccessor.setDisabledState?.(H.disabled),function _o(H,K){K.valueAccessor.registerOnChange(O=>{H._pendingValue=O,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&Kn(H,K)})}(H,K),function rs(H,K){const O=(ee,Se)=>{K.valueAccessor.writeValue(ee),Se&&K.viewToModelUpdate(ee)};H.registerOnChange(O),K._registerOnDestroy(()=>{H._unregisterOnChange(O)})}(H,K),function Fs(H,K){K.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&Kn(H,K),"submit"!==H.updateOn&&H.markAsTouched()})}(H,K),function Ne(H,K){if(K.valueAccessor.setDisabledState){const O=ee=>{K.valueAccessor.setDisabledState(ee)};H.registerOnDisabledChange(O),K._registerOnDestroy(()=>{H._unregisterOnDisabledChange(O)})}}(H,K)}function Rn(H,K,O=!0){const ee=()=>{};K.valueAccessor&&(K.valueAccessor.registerOnChange(ee),K.valueAccessor.registerOnTouched(ee)),ai(H,K),H&&(K._invokeOnDestroyCallbacks(),H._registerOnCollectionChange(()=>{}))}function Ht(H,K){H.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(K)})}function kr(H,K){const O=et(H);null!==K.validator?H.setValidators(Et(O,K.validator)):"function"==typeof O&&H.setValidators([O]);const ee=qt(H);null!==K.asyncValidator?H.setAsyncValidators(Et(ee,K.asyncValidator)):"function"==typeof ee&&H.setAsyncValidators([ee]);const Se=()=>H.updateValueAndValidity();Ht(K._rawValidators,Se),Ht(K._rawAsyncValidators,Se)}function ai(H,K){let O=!1;if(null!==H){if(null!==K.validator){const Se=et(H);if(Array.isArray(Se)&&Se.length>0){const fn=Se.filter(ir=>ir!==K.validator);fn.length!==Se.length&&(O=!0,H.setValidators(fn))}}if(null!==K.asyncValidator){const Se=qt(H);if(Array.isArray(Se)&&Se.length>0){const fn=Se.filter(ir=>ir!==K.asyncValidator);fn.length!==Se.length&&(O=!0,H.setAsyncValidators(fn))}}}const ee=()=>{};return Ht(K._rawValidators,ee),Ht(K._rawAsyncValidators,ee),O}function Kn(H,K){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),K.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function ye(H,K){if(!H.hasOwnProperty("model"))return!1;const O=H.model;return!!O.isFirstChange()||!Object.is(K,O.currentValue)}function Ze(H,K){if(!K)return null;let O,ee,Se;return Array.isArray(K),K.forEach(fn=>{fn.constructor===Te?O=fn:function ve(H){return Object.getPrototypeOf(H.constructor)===ge}(fn)?ee=fn:Se=fn}),Se||ee||O||null}function ti(H,K){const O=H.indexOf(K);O>-1&&H.splice(O,1)}function mr(H){return"object"==typeof H&&null!==H&&2===Object.keys(H).length&&"value"in H&&"disabled"in H}Promise.resolve();const ci=class extends Mt{constructor(K=null,O,ee){super(Xr(O),oi(ee,O)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(K),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ie(O)&&(O.nonNullable||O.initialValueIsDefault)&&(this.defaultValue=mr(K)?K.value:K)}setValue(K,O={}){this.value=this._pendingValue=K,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(ee=>ee(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(K,O={}){this.setValue(K,O)}reset(K=this.defaultValue,O={}){this._applyFormState(K),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(K){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(K){this._onChange.push(K)}_unregisterOnChange(K){ti(this._onChange,K)}registerOnDisabledChange(K){this._onDisabledChange.push(K)}_unregisterOnDisabledChange(K){ti(this._onDisabledChange,K)}_forEachChild(K){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(K){mr(K)?(this.value=this._pendingValue=K.value,K.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=K}},Jr={provide:at,useExisting:(0,_.Rfq)(()=>lr)},$n=Promise.resolve();let lr=(()=>{class H extends at{constructor(O,ee,Se,fn,ir,As){super(),this._changeDetectorRef=ir,this.callSetDisabledState=As,this.control=new ci,this._registered=!1,this.name="",this.update=new _.bkB,this._parent=O,this._setValidators(ee),this._setAsyncValidators(Se),this.valueAccessor=Ze(0,fn)}ngOnChanges(O){if(this._checkForErrors(),!this._registered||"name"in O){if(this._registered&&(this._checkName(),this.formDirective)){const ee=O.name.previousValue;this.formDirective.removeControl({name:ee,path:this._getPath(ee)})}this._setUpControl()}"isDisabled"in O&&this._updateDisabled(O),ye(O,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Jn(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(O){$n.then(()=>{this.control.setValue(O,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(O){const ee=O.isDisabled.currentValue,Se=0!==ee&&(0,_.L39)(ee);$n.then(()=>{Se&&!this.control.disabled?this.control.disable():!Se&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(O){return this._parent?Wn(O,this._parent):[O]}static#e=this.\u0275fac=function(ee){return new(ee||H)(_.rXU(jn,9),_.rXU(vt,10),_.rXU(ot,10),_.rXU(Fe,10),_.rXU(_.gRc,8),_.rXU(xt,8))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[_.Mj6.None,"disabled","isDisabled"],model:[_.Mj6.None,"ngModel","model"],options:[_.Mj6.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_.Jv_([Jr]),_.Vt3,_.OA$]})}return H})(),jo=(()=>{class H{static#e=this.\u0275fac=function(ee){return new(ee||H)};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return H})();const yo={provide:Fe,useExisting:(0,_.Rfq)(()=>no),multi:!0};let no=(()=>{class H extends ge{writeValue(O){this.setProperty("value",parseFloat(O))}registerOnChange(O){this.onChange=ee=>{O(""==ee?null:parseFloat(ee))}}static#e=this.\u0275fac=(()=>{let O;return function(Se){return(O||(O=_.xGo(H)))(Se||H)}})();static#t=this.\u0275dir=_.FsC({type:H,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(ee,Se){1&ee&&_.bIt("change",function(ir){return Se.onChange(ir.target.value)})("input",function(ir){return Se.onChange(ir.target.value)})("blur",function(){return Se.onTouched()})},features:[_.Jv_([yo]),_.Vt3]})}return H})();const Cr=new _.nKC(""),Ho={provide:jn,useExisting:(0,_.Rfq)(()=>Cs)};let Cs=(()=>{class H extends jn{constructor(O,ee,Se){super(),this.callSetDisabledState=Se,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.bkB,this._setValidators(O),this._setAsyncValidators(ee)}ngOnChanges(O){this._checkFormPresent(),O.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ai(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(O){const ee=this.form.get(O.path);return Jn(ee,O,this.callSetDisabledState),ee.updateValueAndValidity({emitEvent:!1}),this.directives.push(O),ee}getControl(O){return this.form.get(O.path)}removeControl(O){Rn(O.control||null,O,!1),function Yt(H,K){const O=H.indexOf(K);O>-1&&H.splice(O,1)}(this.directives,O)}addFormGroup(O){this._setUpFormContainer(O)}removeFormGroup(O){this._cleanUpFormContainer(O)}getFormGroup(O){return this.form.get(O.path)}addFormArray(O){this._setUpFormContainer(O)}removeFormArray(O){this._cleanUpFormContainer(O)}getFormArray(O){return this.form.get(O.path)}updateModel(O,ee){this.form.get(O.path).setValue(ee)}onSubmit(O){return this.submitted=!0,function mt(H,K){H._syncPendingControls(),K.forEach(O=>{const ee=O.control;"submit"===ee.updateOn&&ee._pendingChange&&(O.viewToModelUpdate(ee._pendingValue),ee._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(O),"dialog"===O?.target?.method}onReset(){this.resetForm()}resetForm(O=void 0){this.form.reset(O),this.submitted=!1}_updateDomValue(){this.directives.forEach(O=>{const ee=O.control,Se=this.form.get(O.path);ee!==Se&&(Rn(ee||null,O),(H=>H instanceof ci)(Se)&&(Jn(Se,O,this.callSetDisabledState),O.control=Se))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(O){const ee=this.form.get(O.path);(function as(H,K){kr(H,K)})(ee,O),ee.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(O){if(this.form){const ee=this.form.get(O.path);ee&&function qi(H,K){return ai(H,K)}(ee,O)&&ee.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){kr(this.form,this),this._oldForm&&ai(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(ee){return new(ee||H)(_.rXU(vt,10),_.rXU(ot,10),_.rXU(xt,8))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["","formGroup",""]],hostBindings:function(ee,Se){1&ee&&_.bIt("submit",function(ir){return Se.onSubmit(ir)})("reset",function(){return Se.onReset()})},inputs:{form:[_.Mj6.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_.Jv_([Ho]),_.Vt3,_.OA$]})}return H})();const ro={provide:at,useExisting:(0,_.Rfq)(()=>Wr)};let Wr=(()=>{class H extends at{set isDisabled(O){}static#e=this._ngModelWarningSentOnce=!1;constructor(O,ee,Se,fn,ir){super(),this._ngModelWarningConfig=ir,this._added=!1,this.name=null,this.update=new _.bkB,this._ngModelWarningSent=!1,this._parent=O,this._setValidators(ee),this._setAsyncValidators(Se),this.valueAccessor=Ze(0,fn)}ngOnChanges(O){this._added||this._setUpControl(),ye(O,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}get path(){return Wn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(ee){return new(ee||H)(_.rXU(jn,13),_.rXU(vt,10),_.rXU(ot,10),_.rXU(Fe,10),_.rXU(Cr,8))};static#n=this.\u0275dir=_.FsC({type:H,selectors:[["","formControlName",""]],inputs:{name:[_.Mj6.None,"formControlName","name"],isDisabled:[_.Mj6.None,"disabled","isDisabled"],model:[_.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[_.Jv_([ro]),_.Vt3,_.OA$]})}return H})();const So={provide:Fe,useExisting:(0,_.Rfq)(()=>ri),multi:!0};function gi(H,K){return null==H?`${K}`:(K&&"object"==typeof K&&(K="Object"),`${H}: ${K}`.slice(0,50))}let ri=(()=>{class H extends ge{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(O){this._compareWith=O}writeValue(O){this.value=O;const Se=gi(this._getOptionId(O),O);this.setProperty("value",Se)}registerOnChange(O){this.onChange=ee=>{this.value=this._getOptionValue(ee),O(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(O){for(const ee of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ee),O))return ee;return null}_getOptionValue(O){const ee=function Ur(H){return H.split(":")[0]}(O);return this._optionMap.has(ee)?this._optionMap.get(ee):O}static#e=this.\u0275fac=(()=>{let O;return function(Se){return(O||(O=_.xGo(H)))(Se||H)}})();static#t=this.\u0275dir=_.FsC({type:H,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(ee,Se){1&ee&&_.bIt("change",function(ir){return Se.onChange(ir.target.value)})("blur",function(){return Se.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.Jv_([So]),_.Vt3]})}return H})(),us=(()=>{class H{constructor(O,ee,Se){this._element=O,this._renderer=ee,this._select=Se,this._select&&(this.id=this._select._registerOption())}set ngValue(O){null!=this._select&&(this._select._optionMap.set(this.id,O),this._setElementValue(gi(this.id,O)),this._select.writeValue(this._select.value))}set value(O){this._setElementValue(O),this._select&&this._select.writeValue(this._select.value)}_setElementValue(O){this._renderer.setProperty(this._element.nativeElement,"value",O)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(ee){return new(ee||H)(_.rXU(_.aKT),_.rXU(_.sFG),_.rXU(ri,9))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return H})();const hn={provide:Fe,useExisting:(0,_.Rfq)(()=>Ts),multi:!0};function Di(H,K){return null==H?`${K}`:("string"==typeof K&&(K=`'${K}'`),K&&"object"==typeof K&&(K="Object"),`${H}: ${K}`.slice(0,50))}let Ts=(()=>{class H extends ge{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(O){this._compareWith=O}writeValue(O){let ee;if(this.value=O,Array.isArray(O)){const Se=O.map(fn=>this._getOptionId(fn));ee=(fn,ir)=>{fn._setSelected(Se.indexOf(ir.toString())>-1)}}else ee=(Se,fn)=>{Se._setSelected(!1)};this._optionMap.forEach(ee)}registerOnChange(O){this.onChange=ee=>{const Se=[],fn=ee.selectedOptions;if(void 0!==fn){const ir=fn;for(let As=0;As<ir.length;As++){const di=this._getOptionValue(ir[As].value);Se.push(di)}}else{const ir=ee.options;for(let As=0;As<ir.length;As++){const Ws=ir[As];if(Ws.selected){const di=this._getOptionValue(Ws.value);Se.push(di)}}}this.value=Se,O(Se)}}_registerOption(O){const ee=(this._idCounter++).toString();return this._optionMap.set(ee,O),ee}_getOptionId(O){for(const ee of this._optionMap.keys())if(this._compareWith(this._optionMap.get(ee)._value,O))return ee;return null}_getOptionValue(O){const ee=function js(H){return H.split(":")[0]}(O);return this._optionMap.has(ee)?this._optionMap.get(ee)._value:O}static#e=this.\u0275fac=(()=>{let O;return function(Se){return(O||(O=_.xGo(H)))(Se||H)}})();static#t=this.\u0275dir=_.FsC({type:H,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(ee,Se){1&ee&&_.bIt("change",function(ir){return Se.onChange(ir.target)})("blur",function(){return Se.onTouched()})},inputs:{compareWith:"compareWith"},features:[_.Jv_([hn]),_.Vt3]})}return H})(),Hs=(()=>{class H{constructor(O,ee,Se){this._element=O,this._renderer=ee,this._select=Se,this._select&&(this.id=this._select._registerOption(this))}set ngValue(O){null!=this._select&&(this._value=O,this._setElementValue(Di(this.id,O)),this._select.writeValue(this._select.value))}set value(O){this._select?(this._value=O,this._setElementValue(Di(this.id,O)),this._select.writeValue(this._select.value)):this._setElementValue(O)}_setElementValue(O){this._renderer.setProperty(this._element.nativeElement,"value",O)}_setSelected(O){this._renderer.setProperty(this._element.nativeElement,"selected",O)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(ee){return new(ee||H)(_.rXU(_.aKT),_.rXU(_.sFG),_.rXU(Ts,9))};static#t=this.\u0275dir=_.FsC({type:H,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return H})(),ls=(()=>{class H{static#e=this.\u0275fac=function(ee){return new(ee||H)};static#t=this.\u0275mod=_.$C({type:H});static#n=this.\u0275inj=_.G2t({})}return H})();class Tr extends Mt{constructor(K,O,ee){super(Xr(O),oi(ee,O)),this.controls=K,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(K){return this.controls[this._adjustIndex(K)]}push(K,O={}){this.controls.push(K),this._registerControl(K),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}insert(K,O,ee={}){this.controls.splice(K,0,O),this._registerControl(O),this.updateValueAndValidity({emitEvent:ee.emitEvent})}removeAt(K,O={}){let ee=this._adjustIndex(K);ee<0&&(ee=0),this.controls[ee]&&this.controls[ee]._registerOnCollectionChange(()=>{}),this.controls.splice(ee,1),this.updateValueAndValidity({emitEvent:O.emitEvent})}setControl(K,O,ee={}){let Se=this._adjustIndex(K);Se<0&&(Se=0),this.controls[Se]&&this.controls[Se]._registerOnCollectionChange(()=>{}),this.controls.splice(Se,1),O&&(this.controls.splice(Se,0,O),this._registerControl(O)),this.updateValueAndValidity({emitEvent:ee.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(K,O={}){Ke(this,0,K),K.forEach((ee,Se)=>{Ee(this,!1,Se),this.at(Se).setValue(ee,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(K,O={}){null!=K&&(K.forEach((ee,Se)=>{this.at(Se)&&this.at(Se).patchValue(ee,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(K=[],O={}){this._forEachChild((ee,Se)=>{ee.reset(K[Se],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this.controls.map(K=>K.getRawValue())}clear(K={}){this.controls.length<1||(this._forEachChild(O=>O._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:K.emitEvent}))}_adjustIndex(K){return K<0?K+this.length:K}_syncPendingControls(){let K=this.controls.reduce((O,ee)=>!!ee._syncPendingControls()||O,!1);return K&&this.updateValueAndValidity({onlySelf:!0}),K}_forEachChild(K){this.controls.forEach((O,ee)=>{K(O,ee)})}_updateValue(){this.value=this.controls.filter(K=>K.enabled||this.disabled).map(K=>K.value)}_anyControls(K){return this.controls.some(O=>O.enabled&&K(O))}_setUpControls(){this._forEachChild(K=>this._registerControl(K))}_allControlsDisabled(){for(const K of this.controls)if(K.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(K){K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange)}_find(K){return this.at(K)??null}}function Kr(H){return!!H&&(void 0!==H.asyncValidators||void 0!==H.validators||void 0!==H.updateOn)}let oo=(()=>{class H{constructor(){this.useNonNullable=!1}get nonNullable(){const O=new H;return O.useNonNullable=!0,O}group(O,ee=null){const Se=this._reduceControls(O);let fn={};return Kr(ee)?fn=ee:null!==ee&&(fn.validators=ee.validator,fn.asyncValidators=ee.asyncValidator),new he(Se,fn)}record(O,ee=null){const Se=this._reduceControls(O);return new pe(Se,ee)}control(O,ee,Se){let fn={};return this.useNonNullable?(Kr(ee)?fn=ee:(fn.validators=ee,fn.asyncValidators=Se),new ci(O,{...fn,nonNullable:!0})):new ci(O,ee,Se)}array(O,ee,Se){const fn=O.map(ir=>this._createControl(ir));return new Tr(fn,ee,Se)}_reduceControls(O){const ee={};return Object.keys(O).forEach(Se=>{ee[Se]=this._createControl(O[Se])}),ee}_createControl(O){return O instanceof ci||O instanceof Mt?O:Array.isArray(O)?this.control(O[0],O.length>1?O[1]:null,O.length>2?O[2]:null):this.control(O)}static#e=this.\u0275fac=function(ee){return new(ee||H)};static#t=this.\u0275prov=_.jDH({token:H,factory:H.\u0275fac,providedIn:"root"})}return H})(),Po=(()=>{class H{static withConfig(O){return{ngModule:H,providers:[{provide:xt,useValue:O.callSetDisabledState??yn}]}}static#e=this.\u0275fac=function(ee){return new(ee||H)};static#t=this.\u0275mod=_.$C({type:H});static#n=this.\u0275inj=_.G2t({imports:[ls]})}return H})(),xi=(()=>{class H{static withConfig(O){return{ngModule:H,providers:[{provide:Cr,useValue:O.warnOnNgModelWithFormControl??"always"},{provide:xt,useValue:O.callSetDisabledState??yn}]}}static#e=this.\u0275fac=function(ee){return new(ee||H)};static#t=this.\u0275mod=_.$C({type:H});static#n=this.\u0275inj=_.G2t({imports:[ls]})}return H})()},345:(un,Ye,k)=>{k.d(Ye,{B7:()=>rt,Bb:()=>In,hE:()=>bt,sG:()=>Dn});var _=k(4438),V=k(177);class P extends V.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class w extends P{static makeCurrent(){(0,V.ZD)(new w)}onAndCancel(Ie,Ee,Ke){return Ie.addEventListener(Ee,Ke),()=>{Ie.removeEventListener(Ee,Ke)}}dispatchEvent(Ie,Ee){Ie.dispatchEvent(Ee)}remove(Ie){Ie.parentNode&&Ie.parentNode.removeChild(Ie)}createElement(Ie,Ee){return(Ee=Ee||this.getDefaultDocument()).createElement(Ie)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ie){return Ie.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ie){return Ie instanceof DocumentFragment}getGlobalEventTarget(Ie,Ee){return"window"===Ee?window:"document"===Ee?Ie:"body"===Ee?Ie.body:null}getBaseHref(Ie){const Ee=function Pe(){return G=G||document.querySelector("base"),G?G.getAttribute("href"):null}();return null==Ee?null:function ge(Re){return new URL(Re,document.baseURI).pathname}(Ee)}resetBaseElement(){G=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ie){return(0,V._b)(document.cookie,Ie)}}let G=null,Be=(()=>{class Re{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(Ke){return new(Ke||Re)};static#t=this.\u0275prov=_.jDH({token:Re,factory:Re.\u0275fac})}return Re})();const _e=new _.nKC("");let me=(()=>{class Re{constructor(Ee,Ke){this._zone=Ke,this._eventNameToPlugin=new Map,Ee.forEach(Mt=>{Mt.manager=this}),this._plugins=Ee.slice().reverse()}addEventListener(Ee,Ke,Mt){return this._findPluginFor(Ke).addEventListener(Ee,Ke,Mt)}getZone(){return this._zone}_findPluginFor(Ee){let Ke=this._eventNameToPlugin.get(Ee);if(Ke)return Ke;if(Ke=this._plugins.find(he=>he.supports(Ee)),!Ke)throw new _.wOt(5101,!1);return this._eventNameToPlugin.set(Ee,Ke),Ke}static#e=this.\u0275fac=function(Ke){return new(Ke||Re)(_.KVO(_e),_.KVO(_.SKi))};static#t=this.\u0275prov=_.jDH({token:Re,factory:Re.\u0275fac})}return Re})();class $e{constructor(Ie){this._doc=Ie}}const He="ng-app-id";let Te=(()=>{class Re{constructor(Ee,Ke,Mt,he={}){this.doc=Ee,this.appId=Ke,this.nonce=Mt,this.platformId=he,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,V.Vy)(he),this.resetHostNodes()}addStyles(Ee){for(const Ke of Ee)1===this.changeUsageCount(Ke,1)&&this.onStyleAdded(Ke)}removeStyles(Ee){for(const Ke of Ee)this.changeUsageCount(Ke,-1)<=0&&this.onStyleRemoved(Ke)}ngOnDestroy(){const Ee=this.styleNodesInDOM;Ee&&(Ee.forEach(Ke=>Ke.remove()),Ee.clear());for(const Ke of this.getAllStyles())this.onStyleRemoved(Ke);this.resetHostNodes()}addHost(Ee){this.hostNodes.add(Ee);for(const Ke of this.getAllStyles())this.addStyleToHost(Ee,Ke)}removeHost(Ee){this.hostNodes.delete(Ee)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Ee){for(const Ke of this.hostNodes)this.addStyleToHost(Ke,Ee)}onStyleRemoved(Ee){const Ke=this.styleRef;Ke.get(Ee)?.elements?.forEach(Mt=>Mt.remove()),Ke.delete(Ee)}collectServerRenderedStyles(){const Ee=this.doc.head?.querySelectorAll(`style[${He}="${this.appId}"]`);if(Ee?.length){const Ke=new Map;return Ee.forEach(Mt=>{null!=Mt.textContent&&Ke.set(Mt.textContent,Mt)}),Ke}return null}changeUsageCount(Ee,Ke){const Mt=this.styleRef;if(Mt.has(Ee)){const he=Mt.get(Ee);return he.usage+=Ke,he.usage}return Mt.set(Ee,{usage:Ke,elements:[]}),Ke}getStyleElement(Ee,Ke){const Mt=this.styleNodesInDOM,he=Mt?.get(Ke);if(he?.parentNode===Ee)return Mt.delete(Ke),he.removeAttribute(He),he;{const q=this.doc.createElement("style");return this.nonce&&q.setAttribute("nonce",this.nonce),q.textContent=Ke,this.platformIsServer&&q.setAttribute(He,this.appId),Ee.appendChild(q),q}}addStyleToHost(Ee,Ke){const Mt=this.getStyleElement(Ee,Ke),he=this.styleRef,q=he.get(Ke)?.elements;q?q.push(Mt):he.set(Ke,{elements:[Mt],usage:1})}resetHostNodes(){const Ee=this.hostNodes;Ee.clear(),Ee.add(this.doc.head)}static#e=this.\u0275fac=function(Ke){return new(Ke||Re)(_.KVO(V.qQ),_.KVO(_.sZ2),_.KVO(_.BIS,8),_.KVO(_.Agw))};static#t=this.\u0275prov=_.jDH({token:Re,factory:Re.\u0275fac})}return Re})();const Ve={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},At=/%COMP%/g,We=new _.nKC("",{providedIn:"root",factory:()=>!0});function De(Re,Ie){return Ie.map(Ee=>Ee.replace(At,Re))}let rt=(()=>{class Re{constructor(Ee,Ke,Mt,he,q,J,oe,pe=null){this.eventManager=Ee,this.sharedStylesHost=Ke,this.appId=Mt,this.removeStylesOnCompDestroy=he,this.doc=q,this.platformId=J,this.ngZone=oe,this.nonce=pe,this.rendererByCompId=new Map,this.platformIsServer=(0,V.Vy)(J),this.defaultRenderer=new st(Ee,q,oe,this.platformIsServer)}createRenderer(Ee,Ke){if(!Ee||!Ke)return this.defaultRenderer;this.platformIsServer&&Ke.encapsulation===_.gXe.ShadowDom&&(Ke={...Ke,encapsulation:_.gXe.Emulated});const Mt=this.getOrCreateRenderer(Ee,Ke);return Mt instanceof Kt?Mt.applyToHost(Ee):Mt instanceof Pt&&Mt.applyStyles(),Mt}getOrCreateRenderer(Ee,Ke){const Mt=this.rendererByCompId;let he=Mt.get(Ke.id);if(!he){const q=this.doc,J=this.ngZone,oe=this.eventManager,pe=this.sharedStylesHost,gt=this.removeStylesOnCompDestroy,xt=this.platformIsServer;switch(Ke.encapsulation){case _.gXe.Emulated:he=new Kt(oe,pe,Ke,this.appId,gt,q,J,xt);break;case _.gXe.ShadowDom:return new zt(oe,pe,Ee,Ke,q,J,this.nonce,xt);default:he=new Pt(oe,pe,Ke,gt,q,J,xt)}Mt.set(Ke.id,he)}return he}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(Ke){return new(Ke||Re)(_.KVO(me),_.KVO(Te),_.KVO(_.sZ2),_.KVO(We),_.KVO(V.qQ),_.KVO(_.Agw),_.KVO(_.SKi),_.KVO(_.BIS))};static#t=this.\u0275prov=_.jDH({token:Re,factory:Re.\u0275fac})}return Re})();class st{constructor(Ie,Ee,Ke,Mt){this.eventManager=Ie,this.doc=Ee,this.ngZone=Ke,this.platformIsServer=Mt,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(Ie,Ee){return Ee?this.doc.createElementNS(Ve[Ee]||Ee,Ie):this.doc.createElement(Ie)}createComment(Ie){return this.doc.createComment(Ie)}createText(Ie){return this.doc.createTextNode(Ie)}appendChild(Ie,Ee){(Je(Ie)?Ie.content:Ie).appendChild(Ee)}insertBefore(Ie,Ee,Ke){Ie&&(Je(Ie)?Ie.content:Ie).insertBefore(Ee,Ke)}removeChild(Ie,Ee){Ie&&Ie.removeChild(Ee)}selectRootElement(Ie,Ee){let Ke="string"==typeof Ie?this.doc.querySelector(Ie):Ie;if(!Ke)throw new _.wOt(-5104,!1);return Ee||(Ke.textContent=""),Ke}parentNode(Ie){return Ie.parentNode}nextSibling(Ie){return Ie.nextSibling}setAttribute(Ie,Ee,Ke,Mt){if(Mt){Ee=Mt+":"+Ee;const he=Ve[Mt];he?Ie.setAttributeNS(he,Ee,Ke):Ie.setAttribute(Ee,Ke)}else Ie.setAttribute(Ee,Ke)}removeAttribute(Ie,Ee,Ke){if(Ke){const Mt=Ve[Ke];Mt?Ie.removeAttributeNS(Mt,Ee):Ie.removeAttribute(`${Ke}:${Ee}`)}else Ie.removeAttribute(Ee)}addClass(Ie,Ee){Ie.classList.add(Ee)}removeClass(Ie,Ee){Ie.classList.remove(Ee)}setStyle(Ie,Ee,Ke,Mt){Mt&(_.czy.DashCase|_.czy.Important)?Ie.style.setProperty(Ee,Ke,Mt&_.czy.Important?"important":""):Ie.style[Ee]=Ke}removeStyle(Ie,Ee,Ke){Ke&_.czy.DashCase?Ie.style.removeProperty(Ee):Ie.style[Ee]=""}setProperty(Ie,Ee,Ke){null!=Ie&&(Ie[Ee]=Ke)}setValue(Ie,Ee){Ie.nodeValue=Ee}listen(Ie,Ee,Ke){if("string"==typeof Ie&&!(Ie=(0,V.QT)().getGlobalEventTarget(this.doc,Ie)))throw new Error(`Unsupported event target ${Ie} for event ${Ee}`);return this.eventManager.addEventListener(Ie,Ee,this.decoratePreventDefault(Ke))}decoratePreventDefault(Ie){return Ee=>{if("__ngUnwrap__"===Ee)return Ie;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Ie(Ee)):Ie(Ee))&&Ee.preventDefault()}}}function Je(Re){return"TEMPLATE"===Re.tagName&&void 0!==Re.content}class zt extends st{constructor(Ie,Ee,Ke,Mt,he,q,J,oe){super(Ie,he,q,oe),this.sharedStylesHost=Ee,this.hostEl=Ke,this.shadowRoot=Ke.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const pe=De(Mt.id,Mt.styles);for(const gt of pe){const xt=document.createElement("style");J&&xt.setAttribute("nonce",J),xt.textContent=gt,this.shadowRoot.appendChild(xt)}}nodeOrShadowRoot(Ie){return Ie===this.hostEl?this.shadowRoot:Ie}appendChild(Ie,Ee){return super.appendChild(this.nodeOrShadowRoot(Ie),Ee)}insertBefore(Ie,Ee,Ke){return super.insertBefore(this.nodeOrShadowRoot(Ie),Ee,Ke)}removeChild(Ie,Ee){return super.removeChild(this.nodeOrShadowRoot(Ie),Ee)}parentNode(Ie){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ie)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Pt extends st{constructor(Ie,Ee,Ke,Mt,he,q,J,oe){super(Ie,he,q,J),this.sharedStylesHost=Ee,this.removeStylesOnCompDestroy=Mt,this.styles=oe?De(oe,Ke.styles):Ke.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Kt extends Pt{constructor(Ie,Ee,Ke,Mt,he,q,J,oe){const pe=Mt+"-"+Ke.id;super(Ie,Ee,Ke,he,q,J,oe,pe),this.contentAttr=function Y(Re){return"_ngcontent-%COMP%".replace(At,Re)}(pe),this.hostAttr=function te(Re){return"_nghost-%COMP%".replace(At,Re)}(pe)}applyToHost(Ie){this.applyStyles(),this.setAttribute(Ie,this.hostAttr,"")}createElement(Ie,Ee){const Ke=super.createElement(Ie,Ee);return super.setAttribute(Ke,this.contentAttr,""),Ke}}let Bt=(()=>{class Re extends $e{constructor(Ee){super(Ee)}supports(Ee){return!0}addEventListener(Ee,Ke,Mt){return Ee.addEventListener(Ke,Mt,!1),()=>this.removeEventListener(Ee,Ke,Mt)}removeEventListener(Ee,Ke,Mt){return Ee.removeEventListener(Ke,Mt)}static#e=this.\u0275fac=function(Ke){return new(Ke||Re)(_.KVO(V.qQ))};static#t=this.\u0275prov=_.jDH({token:Re,factory:Re.\u0275fac})}return Re})();const tn=["alt","control","meta","shift"],Tn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xe={alt:Re=>Re.altKey,control:Re=>Re.ctrlKey,meta:Re=>Re.metaKey,shift:Re=>Re.shiftKey};let Qe=(()=>{class Re extends $e{constructor(Ee){super(Ee)}supports(Ee){return null!=Re.parseEventName(Ee)}addEventListener(Ee,Ke,Mt){const he=Re.parseEventName(Ke),q=Re.eventCallback(he.fullKey,Mt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,V.QT)().onAndCancel(Ee,he.domEventName,q))}static parseEventName(Ee){const Ke=Ee.toLowerCase().split("."),Mt=Ke.shift();if(0===Ke.length||"keydown"!==Mt&&"keyup"!==Mt)return null;const he=Re._normalizeKey(Ke.pop());let q="",J=Ke.indexOf("code");if(J>-1&&(Ke.splice(J,1),q="code."),tn.forEach(pe=>{const gt=Ke.indexOf(pe);gt>-1&&(Ke.splice(gt,1),q+=pe+".")}),q+=he,0!=Ke.length||0===he.length)return null;const oe={};return oe.domEventName=Mt,oe.fullKey=q,oe}static matchEventFullKeyCode(Ee,Ke){let Mt=Tn[Ee.key]||Ee.key,he="";return Ke.indexOf("code.")>-1&&(Mt=Ee.code,he="code."),!(null==Mt||!Mt)&&(Mt=Mt.toLowerCase()," "===Mt?Mt="space":"."===Mt&&(Mt="dot"),tn.forEach(q=>{q!==Mt&&(0,xe[q])(Ee)&&(he+=q+".")}),he+=Mt,he===Ke)}static eventCallback(Ee,Ke,Mt){return he=>{Re.matchEventFullKeyCode(he,Ee)&&Mt.runGuarded(()=>Ke(he))}}static _normalizeKey(Ee){return"esc"===Ee?"escape":Ee}static#e=this.\u0275fac=function(Ke){return new(Ke||Re)(_.KVO(V.qQ))};static#t=this.\u0275prov=_.jDH({token:Re,factory:Re.\u0275fac})}return Re})();const Dn=(0,_.oH4)(_.fpN,"browser",[{provide:_.Agw,useValue:V.AJ},{provide:_.PLl,useValue:function qt(){w.makeCurrent()},multi:!0},{provide:V.qQ,useFactory:function on(){return(0,_.TL$)(document),document},deps:[]}]),An=new _.nKC(""),jn=[{provide:_.e01,useClass:class Fe{addToWindow(Ie){_.JZv.getAngularTestability=(Ke,Mt=!0)=>{const he=Ie.findTestabilityInTree(Ke,Mt);if(null==he)throw new _.wOt(5103,!1);return he},_.JZv.getAllAngularTestabilities=()=>Ie.getAllTestabilities(),_.JZv.getAllAngularRootElements=()=>Ie.getAllRootElements(),_.JZv.frameworkStabilizers||(_.JZv.frameworkStabilizers=[]),_.JZv.frameworkStabilizers.push(Ke=>{const Mt=_.JZv.getAllAngularTestabilities();let he=Mt.length;const q=function(){he--,0==he&&Ke()};Mt.forEach(J=>{J.whenStable(q)})})}findTestabilityInTree(Ie,Ee,Ke){return null==Ee?null:Ie.getTestability(Ee)??(Ke?(0,V.QT)().isShadowRoot(Ee)?this.findTestabilityInTree(Ie,Ee.host,!0):this.findTestabilityInTree(Ie,Ee.parentElement,!0):null)}},deps:[]},{provide:_.WHO,useClass:_.NYb,deps:[_.SKi,_.giA,_.e01]},{provide:_.NYb,useClass:_.NYb,deps:[_.SKi,_.giA,_.e01]}],at=[{provide:_.H8p,useValue:"root"},{provide:_.zcH,useFactory:function pn(){return new _.zcH},deps:[]},{provide:_e,useClass:Bt,multi:!0,deps:[V.qQ,_.SKi,_.Agw]},{provide:_e,useClass:Qe,multi:!0,deps:[V.qQ]},rt,Te,me,{provide:_._9s,useExisting:rt},{provide:V.N0,useClass:Be,deps:[]},[]];let In=(()=>{class Re{constructor(Ee){}static withServerTransition(Ee){return{ngModule:Re,providers:[{provide:_.sZ2,useValue:Ee.appId}]}}static#e=this.\u0275fac=function(Ke){return new(Ke||Re)(_.KVO(An,12))};static#t=this.\u0275mod=_.$C({type:Re});static#n=this.\u0275inj=_.G2t({providers:[...at,...jn],imports:[V.MD,_.Hbi]})}return Re})(),bt=(()=>{class Re{constructor(Ee){this._doc=Ee}getTitle(){return this._doc.title}setTitle(Ee){this._doc.title=Ee||""}static#e=this.\u0275fac=function(Ke){return new(Ke||Re)(_.KVO(V.qQ))};static#t=this.\u0275prov=_.jDH({token:Re,factory:Re.\u0275fac,providedIn:"root"})}return Re})()},4454:(un,Ye,k)=>{k.d(Ye,{nX:()=>Di,Ix:()=>Br,Wk:()=>Ko,iI:()=>La,n3:()=>Gi});var _=k(467),V=k(4438),P=k(1985),w=k(8071),Pe=k(8455),ge=k(7673),Fe=k(4412),Be=k(3073),_e=k(3669),me=k(6450),$e=k(9326),He=k(8496),Te=k(4360),Ve=k(5225);function At(...v){const M=(0,$e.lI)(v),I=(0,$e.ms)(v),{args:R,keys:B}=(0,Be.D)(v);if(0===R.length)return(0,Pe.H)([],M);const ne=new P.c(function vt(v,M,I=_e.D){return R=>{ot(M,()=>{const{length:B}=v,ne=new Array(B);let we=B,wt=B;for(let dt=0;dt<B;dt++)ot(M,()=>{const gn=(0,Pe.H)(v[dt],M);let or=!1;gn.subscribe((0,Te._)(R,fr=>{ne[dt]=fr,or||(or=!0,wt--),wt||R.next(I(ne.slice()))},()=>{--we||R.complete()}))},R)},R)}}(R,M,B?we=>(0,He.e)(B,we):_e.D));return I?ne.pipe((0,me.I)(I)):ne}function ot(v,M,I){v?(0,Ve.N)(I,v,M):M()}var Jt=k(9350),je=k(8793),We=k(8750);function Y(v){return new P.c(M=>{(0,We.Tg)(v()).subscribe(M)})}var te=k(1203);function De(v,M){const I=(0,w.T)(v)?v:()=>v,R=B=>B.error(I());return new P.c(M?B=>M.schedule(R,0,B):R)}var rt=k(983),st=k(8359),le=k(9974);function Ge(){return(0,le.N)((v,M)=>{let I=null;v._refCount++;const R=(0,Te._)(M,void 0,void 0,void 0,()=>{if(!v||v._refCount<=0||0<--v._refCount)return void(I=null);const B=v._connection,ne=I;I=null,B&&(!ne||B===ne)&&B.unsubscribe(),M.unsubscribe()});v.subscribe(R),R.closed||(I=v.connect())})}class Je extends P.c{constructor(M,I){super(),this.source=M,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,le.S)(M)&&(this.lift=M.lift)}_subscribe(M){return this.getSubject().subscribe(M)}getSubject(){const M=this._subject;return(!M||M.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:M}=this;this._subject=this._connection=null,M?.unsubscribe()}connect(){let M=this._connection;if(!M){M=this._connection=new st.yU;const I=this.getSubject();M.add(this.source.subscribe((0,Te._)(I,void 0,()=>{this._teardown(),I.complete()},R=>{this._teardown(),I.error(R)},()=>this._teardown()))),M.closed&&(this._connection=null,M=st.yU.EMPTY)}return M}refCount(){return Ge()(this)}}var zt=k(1413),Pt=k(177),Kt=k(6354),Bt=k(5558),tn=k(6697),Tn=k(9172),xe=k(5964),Qe=k(1397),lt=k(1594),yt=k(274),Et=k(8141),et=k(9437),qt=k(2816),pn=k(9901);function on(v){return v<=0?()=>rt.w:(0,le.N)((M,I)=>{let R=[];M.subscribe((0,Te._)(I,B=>{R.push(B),v<R.length&&R.shift()},()=>{for(const B of R)I.next(B);I.complete()},void 0,()=>{R=null}))})}var an=k(3774),jn=k(980),at=k(5343),Qn=k(6365),Xn=k(345);const bt="primary",pt=Symbol("RouteTitle");class jr{constructor(M){this.params=M||{}}has(M){return Object.prototype.hasOwnProperty.call(this.params,M)}get(M){if(this.has(M)){const I=this.params[M];return Array.isArray(I)?I[0]:I}return null}getAll(M){if(this.has(M)){const I=this.params[M];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Rt(v){return new jr(v)}function Xe(v,M,I){const R=I.path.split("/");if(R.length>v.length||"full"===I.pathMatch&&(M.hasChildren()||R.length<v.length))return null;const B={};for(let ne=0;ne<R.length;ne++){const we=R[ne],wt=v[ne];if(we.startsWith(":"))B[we.substring(1)]=wt;else if(we!==wt.path)return null}return{consumed:v.slice(0,R.length),posParams:B}}function rr(v,M){const I=v?Yn(v):void 0,R=M?Yn(M):void 0;if(!I||!R||I.length!=R.length)return!1;let B;for(let ne=0;ne<I.length;ne++)if(B=I[ne],!Pn(v[B],M[B]))return!1;return!0}function Yn(v){return[...Object.keys(v),...Object.getOwnPropertySymbols(v)]}function Pn(v,M){if(Array.isArray(v)&&Array.isArray(M)){if(v.length!==M.length)return!1;const I=[...v].sort(),R=[...M].sort();return I.every((B,ne)=>R[ne]===B)}return v===M}function vn(v){return v.length>0?v[v.length-1]:null}function xr(v){return function G(v){return!!v&&(v instanceof P.c||(0,w.T)(v.lift)&&(0,w.T)(v.subscribe))}(v)?v:(0,V.jNT)(v)?(0,Pe.H)(Promise.resolve(v)):(0,ge.of)(v)}const $r={exact:function hs(v,M,I){if(!Nn(v.segments,M.segments)||!Un(v.segments,M.segments,I)||v.numberOfChildren!==M.numberOfChildren)return!1;for(const R in M.children)if(!v.children[R]||!hs(v.children[R],M.children[R],I))return!1;return!0},subset:Ti},Hr={exact:function Sr(v,M){return rr(v,M)},subset:function Ln(v,M){return Object.keys(M).length<=Object.keys(v).length&&Object.keys(M).every(I=>Pn(v[I],M[I]))},ignored:()=>!0};function $i(v,M,I){return $r[I.paths](v.root,M.root,I.matrixParams)&&Hr[I.queryParams](v.queryParams,M.queryParams)&&!("exact"===I.fragment&&v.fragment!==M.fragment)}function Ti(v,M,I){return Wt(v,M,M.segments,I)}function Wt(v,M,I,R){if(v.segments.length>I.length){const B=v.segments.slice(0,I.length);return!(!Nn(B,I)||M.hasChildren()||!Un(B,I,R))}if(v.segments.length===I.length){if(!Nn(v.segments,I)||!Un(v.segments,I,R))return!1;for(const B in M.children)if(!v.children[B]||!Ti(v.children[B],M.children[B],R))return!1;return!0}{const B=I.slice(0,v.segments.length),ne=I.slice(v.segments.length);return!!(Nn(v.segments,B)&&Un(v.segments,B,R)&&v.children[bt])&&Wt(v.children[bt],M,ne,R)}}function Un(v,M,I){return M.every((R,B)=>Hr[I](v[B].parameters,R.parameters))}class Qr{constructor(M=new nn([],{}),I={},R=null){this.root=M,this.queryParams=I,this.fragment=R}get queryParamMap(){return this._queryParamMap??=Rt(this.queryParams),this._queryParamMap}toString(){return Ee.serialize(this)}}class nn{constructor(M,I){this.segments=M,this.children=I,this.parent=null,Object.values(I).forEach(R=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ke(this)}}class rn{constructor(M,I){this.path=M,this.parameters=I}get parameterMap(){return this._parameterMap??=Rt(this.parameters),this._parameterMap}toString(){return xt(this)}}function Nn(v,M){return v.length===M.length&&v.every((I,R)=>I.path===M[R].path)}let Re=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:()=>new Ie,providedIn:"root"})}return v})();class Ie{parse(M){const I=new Kn(M);return new Qr(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(M){const I=`/${Mt(M.root,!0)}`,R=function Wn(v){const M=Object.entries(v).map(([I,R])=>Array.isArray(R)?R.map(B=>`${q(I)}=${q(B)}`).join("&"):`${q(I)}=${q(R)}`).filter(I=>I);return M.length?`?${M.join("&")}`:""}(M.queryParams);return`${I}${R}${"string"==typeof M.fragment?`#${function J(v){return encodeURI(v)}(M.fragment)}`:""}`}}const Ee=new Ie;function Ke(v){return v.segments.map(M=>xt(M)).join("/")}function Mt(v,M){if(!v.hasChildren())return Ke(v);if(M){const I=v.children[bt]?Mt(v.children[bt],!1):"",R=[];return Object.entries(v.children).forEach(([B,ne])=>{B!==bt&&R.push(`${B}:${Mt(ne,!1)}`)}),R.length>0?`${I}(${R.join("//")})`:I}{const I=function oi(v,M){let I=[];return Object.entries(v.children).forEach(([R,B])=>{R===bt&&(I=I.concat(M(B,R)))}),Object.entries(v.children).forEach(([R,B])=>{R!==bt&&(I=I.concat(M(B,R)))}),I}(v,(R,B)=>B===bt?[Mt(v.children[bt],!1)]:[`${B}:${Mt(R,!1)}`]);return 1===Object.keys(v.children).length&&null!=v.children[bt]?`${Ke(v)}/${I[0]}`:`${Ke(v)}/(${I.join("//")})`}}function he(v){return encodeURIComponent(v).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function q(v){return he(v).replace(/%3B/gi,";")}function oe(v){return he(v).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pe(v){return decodeURIComponent(v)}function gt(v){return pe(v.replace(/\+/g,"%20"))}function xt(v){return`${oe(v.path)}${function yn(v){return Object.entries(v).map(([M,I])=>`;${oe(M)}=${oe(I)}`).join("")}(v.parameters)}`}const Jn=/^[^\/()?;#]+/;function Rn(v){const M=v.match(Jn);return M?M[0]:""}const Ht=/^[^\/()?;=#]+/,kr=/^[^=?&#]+/,_o=/^[^&#]+/;class Kn{constructor(M){this.url=M,this.remaining=M}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new nn([],{}):new nn([],this.parseChildren())}parseQueryParams(){const M={};if(this.consumeOptional("?"))do{this.parseQueryParam(M)}while(this.consumeOptional("&"));return M}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const M=[];for(this.peekStartsWith("(")||M.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),M.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(M.length>0||Object.keys(I).length>0)&&(R[bt]=new nn(M,I)),R}parseSegment(){const M=Rn(this.remaining);if(""===M&&this.peekStartsWith(";"))throw new V.wOt(4009,!1);return this.capture(M),new rn(pe(M),this.parseMatrixParams())}parseMatrixParams(){const M={};for(;this.consumeOptional(";");)this.parseParam(M);return M}parseParam(M){const I=function Ne(v){const M=v.match(Ht);return M?M[0]:""}(this.remaining);if(!I)return;this.capture(I);let R="";if(this.consumeOptional("=")){const B=Rn(this.remaining);B&&(R=B,this.capture(R))}M[pe(I)]=pe(R)}parseQueryParam(M){const I=function ai(v){const M=v.match(kr);return M?M[0]:""}(this.remaining);if(!I)return;this.capture(I);let R="";if(this.consumeOptional("=")){const we=function Fs(v){const M=v.match(_o);return M?M[0]:""}(this.remaining);we&&(R=we,this.capture(R))}const B=gt(I),ne=gt(R);if(M.hasOwnProperty(B)){let we=M[B];Array.isArray(we)||(we=[we],M[B]=we),we.push(ne)}else M[B]=ne}parseParens(M){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=Rn(this.remaining),B=this.remaining[R.length];if("/"!==B&&")"!==B&&";"!==B)throw new V.wOt(4010,!1);let ne;R.indexOf(":")>-1?(ne=R.slice(0,R.indexOf(":")),this.capture(ne),this.capture(":")):M&&(ne=bt);const we=this.parseChildren();I[ne]=1===Object.keys(we).length?we[bt]:new nn([],we),this.consumeOptional("//")}return I}peekStartsWith(M){return this.remaining.startsWith(M)}consumeOptional(M){return!!this.peekStartsWith(M)&&(this.remaining=this.remaining.substring(M.length),!0)}capture(M){if(!this.consumeOptional(M))throw new V.wOt(4011,!1)}}function rs(v){return v.segments.length>0?new nn([],{[bt]:v}):v}function as(v){const M={};for(const[R,B]of Object.entries(v.children)){const ne=as(B);if(R===bt&&0===ne.segments.length&&ne.hasChildren())for(const[we,wt]of Object.entries(ne.children))M[we]=wt;else(ne.segments.length>0||ne.hasChildren())&&(M[R]=ne)}return function qi(v){if(1===v.numberOfChildren&&v.children[bt]){const M=v.children[bt];return new nn(v.segments.concat(M.segments),M.children)}return v}(new nn(v.segments,M))}function It(v){return v instanceof Qr}function kt(v){let M;const B=rs(function I(ne){const we={};for(const dt of ne.children){const gn=I(dt);we[dt.outlet]=gn}const wt=new nn(ne.url,we);return ne===v&&(M=wt),wt}(v.root));return M??B}function ln(v,M,I,R){let B=v;for(;B.parent;)B=B.parent;if(0===M.length)return ve(B,B,B,I,R);const ne=function Yt(v){if("string"==typeof v[0]&&1===v.length&&"/"===v[0])return new Ze(!0,0,v);let M=0,I=!1;const R=v.reduce((B,ne,we)=>{if("object"==typeof ne&&null!=ne){if(ne.outlets){const wt={};return Object.entries(ne.outlets).forEach(([dt,gn])=>{wt[dt]="string"==typeof gn?gn.split("/"):gn}),[...B,{outlets:wt}]}if(ne.segmentPath)return[...B,ne.segmentPath]}return"string"!=typeof ne?[...B,ne]:0===we?(ne.split("/").forEach((wt,dt)=>{0==dt&&"."===wt||(0==dt&&""===wt?I=!0:".."===wt?M++:""!=wt&&B.push(wt))}),B):[...B,ne]},[]);return new Ze(I,M,R)}(M);if(ne.toRoot())return ve(B,B,new nn([],{}),I,R);const we=function xn(v,M,I){if(v.isAbsolute)return new Ut(M,!0,0);if(!I)return new Ut(M,!1,NaN);if(null===I.parent)return new Ut(I,!0,0);const R=se(v.commands[0])?0:1;return function Cn(v,M,I){let R=v,B=M,ne=I;for(;ne>B;){if(ne-=B,R=R.parent,!R)throw new V.wOt(4005,!1);B=R.segments.length}return new Ut(R,!1,B-ne)}(I,I.segments.length-1+R,v.numberOfDoubleDots)}(ne,B,v),wt=we.processChildren?mr(we.segmentGroup,we.index,ne.commands):ti(we.segmentGroup,we.index,ne.commands);return ve(B,we.segmentGroup,wt,I,R)}function se(v){return"object"==typeof v&&null!=v&&!v.outlets&&!v.segmentPath}function ye(v){return"object"==typeof v&&null!=v&&v.outlets}function ve(v,M,I,R,B){let we,ne={};R&&Object.entries(R).forEach(([dt,gn])=>{ne[dt]=Array.isArray(gn)?gn.map(or=>`${or}`):`${gn}`}),we=v===M?I:mt(v,M,I);const wt=rs(as(we));return new Qr(wt,ne,B)}function mt(v,M,I){const R={};return Object.entries(v.children).forEach(([B,ne])=>{R[B]=ne===M?I:mt(ne,M,I)}),new nn(v.segments,R)}class Ze{constructor(M,I,R){if(this.isAbsolute=M,this.numberOfDoubleDots=I,this.commands=R,M&&R.length>0&&se(R[0]))throw new V.wOt(4003,!1);const B=R.find(ye);if(B&&B!==vn(R))throw new V.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ut{constructor(M,I,R){this.segmentGroup=M,this.processChildren=I,this.index=R}}function ti(v,M,I){if(v??=new nn([],{}),0===v.segments.length&&v.hasChildren())return mr(v,M,I);const R=function ci(v,M,I){let R=0,B=M;const ne={match:!1,pathIndex:0,commandIndex:0};for(;B<v.segments.length;){if(R>=I.length)return ne;const we=v.segments[B],wt=I[R];if(ye(wt))break;const dt=`${wt}`,gn=R<I.length-1?I[R+1]:null;if(B>0&&void 0===dt)break;if(dt&&gn&&"object"==typeof gn&&void 0===gn.outlets){if(!Pr(dt,gn,we))return ne;R+=2}else{if(!Pr(dt,{},we))return ne;R++}B++}return{match:!0,pathIndex:B,commandIndex:R}}(v,M,I),B=I.slice(R.commandIndex);if(R.match&&R.pathIndex<v.segments.length){const ne=new nn(v.segments.slice(0,R.pathIndex),{});return ne.children[bt]=new nn(v.segments.slice(R.pathIndex),v.children),mr(ne,0,B)}return R.match&&0===B.length?new nn(v.segments,{}):R.match&&!v.hasChildren()?cs(v,M,I):R.match?mr(v,0,B):cs(v,M,I)}function mr(v,M,I){if(0===I.length)return new nn(v.segments,{});{const R=function Or(v){return ye(v[0])?v[0].outlets:{[bt]:v}}(I),B={};if(Object.keys(R).some(ne=>ne!==bt)&&v.children[bt]&&1===v.numberOfChildren&&0===v.children[bt].segments.length){const ne=mr(v.children[bt],M,I);return new nn(v.segments,ne.children)}return Object.entries(R).forEach(([ne,we])=>{"string"==typeof we&&(we=[we]),null!==we&&(B[ne]=ti(v.children[ne],M,we))}),Object.entries(v.children).forEach(([ne,we])=>{void 0===R[ne]&&(B[ne]=we)}),new nn(v.segments,B)}}function cs(v,M,I){const R=v.segments.slice(0,M);let B=0;for(;B<I.length;){const ne=I[B];if(ye(ne)){const dt=Hi(ne.outlets);return new nn(R,dt)}if(0===B&&se(I[0])){R.push(new rn(v.segments[M].path,Ir(I[0]))),B++;continue}const we=ye(ne)?ne.outlets[bt]:`${ne}`,wt=B<I.length-1?I[B+1]:null;we&&wt&&se(wt)?(R.push(new rn(we,Ir(wt))),B+=2):(R.push(new rn(we,{})),B++)}return new nn(R,{})}function Hi(v){const M={};return Object.entries(v).forEach(([I,R])=>{"string"==typeof R&&(R=[R]),null!==R&&(M[I]=cs(new nn([],{}),0,R))}),M}function Ir(v){const M={};return Object.entries(v).forEach(([I,R])=>M[I]=`${R}`),M}function Pr(v,M,I){return v==I.path&&rr(M,I.parameters)}const ui="imperative";var cr=function(v){return v[v.NavigationStart=0]="NavigationStart",v[v.NavigationEnd=1]="NavigationEnd",v[v.NavigationCancel=2]="NavigationCancel",v[v.NavigationError=3]="NavigationError",v[v.RoutesRecognized=4]="RoutesRecognized",v[v.ResolveStart=5]="ResolveStart",v[v.ResolveEnd=6]="ResolveEnd",v[v.GuardsCheckStart=7]="GuardsCheckStart",v[v.GuardsCheckEnd=8]="GuardsCheckEnd",v[v.RouteConfigLoadStart=9]="RouteConfigLoadStart",v[v.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",v[v.ChildActivationStart=11]="ChildActivationStart",v[v.ChildActivationEnd=12]="ChildActivationEnd",v[v.ActivationStart=13]="ActivationStart",v[v.ActivationEnd=14]="ActivationEnd",v[v.Scroll=15]="Scroll",v[v.NavigationSkipped=16]="NavigationSkipped",v}(cr||{});class _r{constructor(M,I){this.id=M,this.url=I}}class Yr extends _r{constructor(M,I,R="imperative",B=null){super(M,I),this.type=cr.NavigationStart,this.navigationTrigger=R,this.restoredState=B}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ni extends _r{constructor(M,I,R){super(M,I),this.urlAfterRedirects=R,this.type=cr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var Jr=function(v){return v[v.Redirect=0]="Redirect",v[v.SupersededByNewNavigation=1]="SupersededByNewNavigation",v[v.NoDataFromResolver=2]="NoDataFromResolver",v[v.GuardRejected=3]="GuardRejected",v}(Jr||{}),$n=function(v){return v[v.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",v[v.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",v}($n||{});class lr extends _r{constructor(M,I,R,B){super(M,I),this.reason=R,this.code=B,this.type=cr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class jo extends _r{constructor(M,I,R,B){super(M,I),this.reason=R,this.code=B,this.type=cr.NavigationSkipped}}class Qi extends _r{constructor(M,I,R,B){super(M,I),this.error=R,this.target=B,this.type=cr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ea extends _r{constructor(M,I,R,B){super(M,I),this.urlAfterRedirects=R,this.state=B,this.type=cr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class da extends _r{constructor(M,I,R,B){super(M,I),this.urlAfterRedirects=R,this.state=B,this.type=cr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ia extends _r{constructor(M,I,R,B,ne){super(M,I),this.urlAfterRedirects=R,this.state=B,this.shouldActivate=ne,this.type=cr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class to extends _r{constructor(M,I,R,B){super(M,I),this.urlAfterRedirects=R,this.state=B,this.type=cr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ar extends _r{constructor(M,I,R,B){super(M,I),this.urlAfterRedirects=R,this.state=B,this.type=cr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yo{constructor(M){this.route=M,this.type=cr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class no{constructor(M){this.route=M,this.type=cr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Cr{constructor(M){this.snapshot=M,this.type=cr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $o{constructor(M){this.snapshot=M,this.type=cr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Us{constructor(M){this.snapshot=M,this.type=cr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ho{constructor(M){this.snapshot=M,this.type=cr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cs{constructor(M,I,R){this.routerEvent=M,this.position=I,this.anchor=R,this.type=cr.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Nr{}class ws{constructor(M){this.url=M}}class Dr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Bs,this.attachRef=null}}let Bs=(()=>{class v{constructor(){this.contexts=new Map}onChildOutletCreated(I,R){const B=this.getOrCreateContext(I);B.outlet=R,this.contexts.set(I,B)}onChildOutletDestroyed(I){const R=this.getContext(I);R&&(R.outlet=null,R.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let R=this.getContext(I);return R||(R=new Dr,this.contexts.set(I,R)),R}getContext(I){return this.contexts.get(I)||null}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();class ro{constructor(M){this._root=M}get root(){return this._root.value}parent(M){const I=this.pathFromRoot(M);return I.length>1?I[I.length-2]:null}children(M){const I=Wr(M,this._root);return I?I.children.map(R=>R.value):[]}firstChild(M){const I=Wr(M,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(M){const I=So(M,this._root);return I.length<2?[]:I[I.length-2].children.map(B=>B.value).filter(B=>B!==M)}pathFromRoot(M){return So(M,this._root).map(I=>I.value)}}function Wr(v,M){if(v===M.value)return M;for(const I of M.children){const R=Wr(v,I);if(R)return R}return null}function So(v,M){if(v===M.value)return[M];for(const I of M.children){const R=So(v,I);if(R.length)return R.unshift(M),R}return[]}class gi{constructor(M,I){this.value=M,this.children=I}toString(){return`TreeNode(${this.value})`}}function Ur(v){const M={};return v&&v.children.forEach(I=>M[I.value.outlet]=I),M}class ri extends ro{constructor(M,I){super(M),this.snapshot=I,Hs(this,M)}toString(){return this.snapshot.toString()}}function us(v){const M=function hn(v){const ne=new $s([],{},{},"",{},bt,v,null,{});return new Ts("",new gi(ne,[]))}(v),I=new Fe.t([new rn("",{})]),R=new Fe.t({}),B=new Fe.t({}),ne=new Fe.t({}),we=new Fe.t(""),wt=new Di(I,R,ne,we,B,bt,v,M.root);return wt.snapshot=M.root,new ri(new gi(wt,[]),M)}class Di{constructor(M,I,R,B,ne,we,wt,dt){this.urlSubject=M,this.paramsSubject=I,this.queryParamsSubject=R,this.fragmentSubject=B,this.dataSubject=ne,this.outlet=we,this.component=wt,this._futureSnapshot=dt,this.title=this.dataSubject?.pipe((0,Kt.T)(gn=>gn[pt]))??(0,ge.of)(void 0),this.url=M,this.params=I,this.queryParams=R,this.fragment=B,this.data=ne}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Kt.T)(M=>Rt(M))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Kt.T)(M=>Rt(M))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function js(v,M,I="emptyOnly"){let R;const{routeConfig:B}=v;return R=null===M||"always"!==I&&""!==B?.path&&(M.component||M.routeConfig?.loadComponent)?{params:{...v.params},data:{...v.data},resolve:{...v.data,...v._resolvedData??{}}}:{params:{...M.params,...v.params},data:{...M.data,...v.data},resolve:{...v.data,...M.data,...B?.data,...v._resolvedData}},B&&li(B)&&(R.resolve[pt]=B.title),R}class $s{get title(){return this.data?.[pt]}constructor(M,I,R,B,ne,we,wt,dt,gn){this.url=M,this.params=I,this.queryParams=R,this.fragment=B,this.data=ne,this.outlet=we,this.component=wt,this.routeConfig=dt,this._resolve=gn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Rt(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Rt(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ts extends ro{constructor(M,I){super(I),this.url=M,Hs(this,I)}toString(){return Vi(this._root)}}function Hs(v,M){M.value._routerState=v,M.children.forEach(I=>Hs(v,I))}function Vi(v){const M=v.children.length>0?` { ${v.children.map(Vi).join(", ")} } `:"";return`${v.value}${M}`}function ii(v){if(v.snapshot){const M=v.snapshot,I=v._futureSnapshot;v.snapshot=I,rr(M.queryParams,I.queryParams)||v.queryParamsSubject.next(I.queryParams),M.fragment!==I.fragment&&v.fragmentSubject.next(I.fragment),rr(M.params,I.params)||v.paramsSubject.next(I.params),function Ot(v,M){if(v.length!==M.length)return!1;for(let I=0;I<v.length;++I)if(!rr(v[I],M[I]))return!1;return!0}(M.url,I.url)||v.urlSubject.next(I.url),rr(M.data,I.data)||v.dataSubject.next(I.data)}else v.snapshot=v._futureSnapshot,v.dataSubject.next(v._futureSnapshot.data)}function Li(v,M){const I=rr(v.params,M.params)&&function Xr(v,M){return Nn(v,M)&&v.every((I,R)=>rr(I.parameters,M[R].parameters))}(v.url,M.url);return I&&!(!v.parent!=!M.parent)&&(!v.parent||Li(v.parent,M.parent))}function li(v){return"string"==typeof v.title||null===v.title}let Gi=(()=>{class v{constructor(){this.activated=null,this._activatedRoute=null,this.name=bt,this.activateEvents=new V.bkB,this.deactivateEvents=new V.bkB,this.attachEvents=new V.bkB,this.detachEvents=new V.bkB,this.parentContexts=(0,V.WQX)(Bs),this.location=(0,V.WQX)(V.c1b),this.changeDetector=(0,V.WQX)(V.gRc),this.environmentInjector=(0,V.WQX)(V.uvJ),this.inputBinder=(0,V.WQX)(zi,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(I){if(I.name){const{firstChange:R,previousValue:B}=I.name;if(R)return;this.isTrackedInParentContexts(B)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(B)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(I){return this.parentContexts.getContext(I)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);I?.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V.wOt(4012,!1);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,R){this.activated=I,this._activatedRoute=R,this.location.insert(I.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,R){if(this.isActivated)throw new V.wOt(4013,!1);this._activatedRoute=I;const B=this.location,we=I.snapshot.component,wt=this.parentContexts.getOrCreateContext(this.name).children,dt=new io(I,wt,B.injector);this.activated=B.createComponent(we,{index:B.length,injector:dt,environmentInjector:R??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275dir=V.FsC({type:v,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[V.OA$]})}return v})();class io{__ngOutletInjector(M){return new io(this.route,this.childContexts,M)}constructor(M,I,R){this.route=M,this.childContexts=I,this.parent=R}get(M,I){return M===Di?this.route:M===Bs?this.childContexts:this.parent.get(M,I)}}const zi=new V.nKC("");let vo=(()=>{class v{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(I){this.unsubscribeFromRouteData(I),this.subscribeToRouteData(I)}unsubscribeFromRouteData(I){this.outletDataSubscriptions.get(I)?.unsubscribe(),this.outletDataSubscriptions.delete(I)}subscribeToRouteData(I){const{activatedRoute:R}=I,B=At([R.queryParams,R.params,R.data]).pipe((0,Bt.n)(([ne,we,wt],dt)=>(wt={...ne,...we,...wt},0===dt?(0,ge.of)(wt):Promise.resolve(wt)))).subscribe(ne=>{if(!I.isActivated||!I.activatedComponentRef||I.activatedRoute!==R||null===R.component)return void this.unsubscribeFromRouteData(I);const we=(0,V.HJs)(R.component);if(we)for(const{templateName:wt}of we.inputs)I.activatedComponentRef.setInput(wt,ne[wt]);else this.unsubscribeFromRouteData(I)});this.outletDataSubscriptions.set(I,B)}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac})}return v})();function Ni(v,M,I){if(I&&v.shouldReuseRoute(M.value,I.value.snapshot)){const R=I.value;R._futureSnapshot=M.value;const B=function so(v,M,I){return M.children.map(R=>{for(const B of I.children)if(v.shouldReuseRoute(R.value,B.value.snapshot))return Ni(v,R,B);return Ni(v,R)})}(v,M,I);return new gi(R,B)}{if(v.shouldAttach(M.value)){const ne=v.retrieve(M.value);if(null!==ne){const we=ne.route;return we.value._futureSnapshot=M.value,we.children=M.children.map(wt=>Ni(v,wt)),we}}const R=function Eo(v){return new Di(new Fe.t(v.url),new Fe.t(v.params),new Fe.t(v.queryParams),new Fe.t(v.fragment),new Fe.t(v.data),v.outlet,v.component,v)}(M.value),B=M.children.map(ne=>Ni(v,ne));return new gi(R,B)}}const Ui="ngNavigationCancelingError";function ms(v,M){const{redirectTo:I,navigationBehaviorOptions:R}=It(M)?{redirectTo:M,navigationBehaviorOptions:void 0}:M,B=Vs(!1,Jr.Redirect);return B.url=I,B.navigationBehaviorOptions=R,B}function Vs(v,M){const I=new Error(`NavigationCancelingError: ${v||""}`);return I[Ui]=!0,I.cancellationCode=M,I}function ps(v){return!!v&&v[Ui]}let Xi=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275cmp=V.VBU({type:v,selectors:[["ng-component"]],standalone:!0,features:[V.aNF],decls:1,vars:0,template:function(R,B){1&R&&V.nrm(0,"router-outlet")},dependencies:[Gi],encapsulation:2})}return v})();function oo(v){const M=v.children&&v.children.map(oo),I=M?{...v,children:M}:{...v};return!I.component&&!I.loadComponent&&(M||I.loadChildren)&&I.outlet&&I.outlet!==bt&&(I.component=Xi),I}function dr(v){return v.outlet||bt}function Ds(v){if(!v)return null;if(v.routeConfig?._injector)return v.routeConfig._injector;for(let M=v.parent;M;M=M.parent){const I=M.routeConfig;if(I?._loadedInjector)return I._loadedInjector;if(I?._injector)return I._injector}return null}class H{constructor(M,I,R,B,ne){this.routeReuseStrategy=M,this.futureState=I,this.currState=R,this.forwardEvent=B,this.inputBindingEnabled=ne}activate(M){const I=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,R,M),ii(this.futureState.root),this.activateChildRoutes(I,R,M)}deactivateChildRoutes(M,I,R){const B=Ur(I);M.children.forEach(ne=>{const we=ne.value.outlet;this.deactivateRoutes(ne,B[we],R),delete B[we]}),Object.values(B).forEach(ne=>{this.deactivateRouteAndItsChildren(ne,R)})}deactivateRoutes(M,I,R){const B=M.value,ne=I?I.value:null;if(B===ne)if(B.component){const we=R.getContext(B.outlet);we&&this.deactivateChildRoutes(M,I,we.children)}else this.deactivateChildRoutes(M,I,R);else ne&&this.deactivateRouteAndItsChildren(I,R)}deactivateRouteAndItsChildren(M,I){M.value.component&&this.routeReuseStrategy.shouldDetach(M.value.snapshot)?this.detachAndStoreRouteSubtree(M,I):this.deactivateRouteAndOutlet(M,I)}detachAndStoreRouteSubtree(M,I){const R=I.getContext(M.value.outlet),B=R&&M.value.component?R.children:I,ne=Ur(M);for(const we of Object.values(ne))this.deactivateRouteAndItsChildren(we,B);if(R&&R.outlet){const we=R.outlet.detach(),wt=R.children.onOutletDeactivated();this.routeReuseStrategy.store(M.value.snapshot,{componentRef:we,route:M,contexts:wt})}}deactivateRouteAndOutlet(M,I){const R=I.getContext(M.value.outlet),B=R&&M.value.component?R.children:I,ne=Ur(M);for(const we of Object.values(ne))this.deactivateRouteAndItsChildren(we,B);R&&(R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated()),R.attachRef=null,R.route=null)}activateChildRoutes(M,I,R){const B=Ur(I);M.children.forEach(ne=>{this.activateRoutes(ne,B[ne.value.outlet],R),this.forwardEvent(new Ho(ne.value.snapshot))}),M.children.length&&this.forwardEvent(new $o(M.value.snapshot))}activateRoutes(M,I,R){const B=M.value,ne=I?I.value:null;if(ii(B),B===ne)if(B.component){const we=R.getOrCreateContext(B.outlet);this.activateChildRoutes(M,I,we.children)}else this.activateChildRoutes(M,I,R);else if(B.component){const we=R.getOrCreateContext(B.outlet);if(this.routeReuseStrategy.shouldAttach(B.snapshot)){const wt=this.routeReuseStrategy.retrieve(B.snapshot);this.routeReuseStrategy.store(B.snapshot,null),we.children.onOutletReAttached(wt.contexts),we.attachRef=wt.componentRef,we.route=wt.route.value,we.outlet&&we.outlet.attach(wt.componentRef,wt.route.value),ii(wt.route.value),this.activateChildRoutes(M,null,we.children)}else{const wt=Ds(B.snapshot);we.attachRef=null,we.route=B,we.injector=wt,we.outlet&&we.outlet.activateWith(B,we.injector),this.activateChildRoutes(M,null,we.children)}}else this.activateChildRoutes(M,null,R)}}class K{constructor(M){this.path=M,this.route=this.path[this.path.length-1]}}class O{constructor(M,I){this.component=M,this.route=I}}function ee(v,M,I){const R=v._root;return ir(R,M?M._root:null,I,[R.value])}function fn(v,M){const I=Symbol(),R=M.get(v,I);return R===I?"function"!=typeof v||(0,V.LfX)(v)?M.get(v):v:R}function ir(v,M,I,R,B={canDeactivateChecks:[],canActivateChecks:[]}){const ne=Ur(M);return v.children.forEach(we=>{(function As(v,M,I,R,B={canDeactivateChecks:[],canActivateChecks:[]}){const ne=v.value,we=M?M.value:null,wt=I?I.getContext(v.value.outlet):null;if(we&&ne.routeConfig===we.routeConfig){const dt=function Ws(v,M,I){if("function"==typeof I)return I(v,M);switch(I){case"pathParamsChange":return!Nn(v.url,M.url);case"pathParamsOrQueryParamsChange":return!Nn(v.url,M.url)||!rr(v.queryParams,M.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Li(v,M)||!rr(v.queryParams,M.queryParams);default:return!Li(v,M)}}(we,ne,ne.routeConfig.runGuardsAndResolvers);dt?B.canActivateChecks.push(new K(R)):(ne.data=we.data,ne._resolvedData=we._resolvedData),ir(v,M,ne.component?wt?wt.children:null:I,R,B),dt&&wt&&wt.outlet&&wt.outlet.isActivated&&B.canDeactivateChecks.push(new O(wt.outlet.component,we))}else we&&di(M,wt,B),B.canActivateChecks.push(new K(R)),ir(v,null,ne.component?wt?wt.children:null:I,R,B)})(we,ne[we.value.outlet],I,R.concat([we.value]),B),delete ne[we.value.outlet]}),Object.entries(ne).forEach(([we,wt])=>di(wt,I.getContext(we),B)),B}function di(v,M,I){const R=Ur(v),B=v.value;Object.entries(R).forEach(([ne,we])=>{di(we,B.component?M?M.children.getContext(ne):null:M,I)}),I.canDeactivateChecks.push(new O(B.component&&M&&M.outlet&&M.outlet.isActivated?M.outlet.component:null,B))}function ao(v){return"function"==typeof v}function re(v){return v instanceof Jt.G||"EmptyError"===v?.name}const C=Symbol("INITIAL_VALUE");function S(){return(0,Bt.n)(v=>At(v.map(M=>M.pipe((0,tn.s)(1),(0,Tn.Z)(C)))).pipe((0,Kt.T)(M=>{for(const I of M)if(!0!==I){if(I===C)return C;if(!1===I||I instanceof Qr)return I}return!0}),(0,xe.p)(M=>M!==C),(0,tn.s)(1)))}function kn(v){return(0,te.F)((0,Et.M)(M=>{if(It(M))throw ms(0,M)}),(0,Kt.T)(M=>!0===M))}class _n{constructor(M){this.segmentGroup=M||null}}class Zn extends Error{constructor(M){super(),this.urlTree=M}}function yr(v){return De(new _n(v))}class hi{constructor(M,I){this.urlSerializer=M,this.urlTree=I}lineralizeSegments(M,I){let R=[],B=I.root;for(;;){if(R=R.concat(B.segments),0===B.numberOfChildren)return(0,ge.of)(R);if(B.numberOfChildren>1||!B.children[bt])return De(new V.wOt(4e3,!1));B=B.children[bt]}}applyRedirectCommands(M,I,R){const B=this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),M,R);if(I.startsWith("/"))throw new Zn(B);return B}applyRedirectCreateUrlTree(M,I,R,B){const ne=this.createSegmentGroup(M,I.root,R,B);return new Qr(ne,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(M,I){const R={};return Object.entries(M).forEach(([B,ne])=>{if("string"==typeof ne&&ne.startsWith(":")){const wt=ne.substring(1);R[B]=I[wt]}else R[B]=ne}),R}createSegmentGroup(M,I,R,B){const ne=this.createSegments(M,I.segments,R,B);let we={};return Object.entries(I.children).forEach(([wt,dt])=>{we[wt]=this.createSegmentGroup(M,dt,R,B)}),new nn(ne,we)}createSegments(M,I,R,B){return I.map(ne=>ne.path.startsWith(":")?this.findPosParam(M,ne,B):this.findOrReturn(ne,R))}findPosParam(M,I,R){const B=R[I.path.substring(1)];if(!B)throw new V.wOt(4001,!1);return B}findOrReturn(M,I){let R=0;for(const B of I){if(B.path===M.path)return I.splice(R),B;R++}return M}}const bs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Wi(v,M,I,R,B){const ne=Ki(v,M,I);return ne.matched?(R=function Gs(v,M){return v.providers&&!v._injector&&(v._injector=(0,V.Ol2)(v.providers,M,`Route: ${v.path}`)),v._injector??M}(M,R),function On(v,M,I,R){const B=M.canMatch;if(!B||0===B.length)return(0,ge.of)(!0);const ne=B.map(we=>{const wt=fn(we,v);return xr(function wa(v){return v&&ao(v.canMatch)}(wt)?wt.canMatch(M,I):(0,V.N4e)(v,()=>wt(M,I)))});return(0,ge.of)(ne).pipe(S(),kn())}(R,M,I).pipe((0,Kt.T)(we=>!0===we?ne:{...bs}))):(0,ge.of)(ne)}function Ki(v,M,I){if("**"===M.path)return function _i(v){return{matched:!0,parameters:v.length>0?vn(v).parameters:{},consumedSegments:v,remainingSegments:[],positionalParamSegments:{}}}(I);if(""===M.path)return"full"===M.pathMatch&&(v.hasChildren()||I.length>0)?{...bs}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const B=(M.matcher||Xe)(I,v,M);if(!B)return{...bs};const ne={};Object.entries(B.posParams??{}).forEach(([wt,dt])=>{ne[wt]=dt.path});const we=B.consumed.length>0?{...ne,...B.consumed[B.consumed.length-1].parameters}:ne;return{matched:!0,consumedSegments:B.consumed,remainingSegments:I.slice(B.consumed.length),parameters:we,positionalParamSegments:B.posParams??{}}}function co(v,M,I,R){return I.length>0&&function Mo(v,M,I){return I.some(R=>fa(v,M,R)&&dr(R)!==bt)}(v,I,R)?{segmentGroup:new nn(M,Za(R,new nn(I,v.children))),slicedSegments:[]}:0===I.length&&function Ss(v,M,I){return I.some(R=>fa(v,M,R))}(v,I,R)?{segmentGroup:new nn(v.segments,uo(v,I,R,v.children)),slicedSegments:I}:{segmentGroup:new nn(v.segments,v.children),slicedSegments:I}}function uo(v,M,I,R){const B={};for(const ne of I)if(fa(v,M,ne)&&!R[dr(ne)]){const we=new nn([],{});B[dr(ne)]=we}return{...R,...B}}function Za(v,M){const I={};I[bt]=M;for(const R of v)if(""===R.path&&dr(R)!==bt){const B=new nn([],{});I[dr(R)]=B}return I}function fa(v,M,I){return(!(v.hasChildren()||M.length>0)||"full"!==I.pathMatch)&&""===I.path}class Fn{}class Ai{constructor(M,I,R,B,ne,we,wt){this.injector=M,this.configLoader=I,this.rootComponentType=R,this.config=B,this.urlTree=ne,this.paramsInheritanceStrategy=we,this.urlSerializer=wt,this.applyRedirects=new hi(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(M){return new V.wOt(4002,`'${M.segmentGroup}'`)}recognize(){const M=co(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(M).pipe((0,Kt.T)(I=>{const R=new $s([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},bt,this.rootComponentType,null,{}),B=new gi(R,I),ne=new Ts("",B),we=function tt(v,M,I=null,R=null){return ln(kt(v),M,I,R)}(R,[],this.urlTree.queryParams,this.urlTree.fragment);return we.queryParams=this.urlTree.queryParams,ne.url=this.urlSerializer.serialize(we),this.inheritParamsAndData(ne._root,null),{state:ne,tree:we}}))}match(M){return this.processSegmentGroup(this.injector,this.config,M,bt).pipe((0,et.W)(R=>{if(R instanceof Zn)return this.urlTree=R.urlTree,this.match(R.urlTree.root);throw R instanceof _n?this.noMatchError(R):R}))}inheritParamsAndData(M,I){const R=M.value,B=js(R,I,this.paramsInheritanceStrategy);R.params=Object.freeze(B.params),R.data=Object.freeze(B.data),M.children.forEach(ne=>this.inheritParamsAndData(ne,R))}processSegmentGroup(M,I,R,B){return 0===R.segments.length&&R.hasChildren()?this.processChildren(M,I,R):this.processSegment(M,I,R,R.segments,B,!0).pipe((0,Kt.T)(ne=>ne instanceof gi?[ne]:[]))}processChildren(M,I,R){const B=[];for(const ne of Object.keys(R.children))"primary"===ne?B.unshift(ne):B.push(ne);return(0,Pe.H)(B).pipe((0,yt.H)(ne=>{const we=R.children[ne],wt=function _s(v,M){const I=v.filter(R=>dr(R)===M);return I.push(...v.filter(R=>dr(R)!==M)),I}(I,ne);return this.processSegmentGroup(M,wt,we,ne)}),(0,qt.S)((ne,we)=>(ne.push(...we),ne)),(0,pn.U)(null),function Dn(v,M){const I=arguments.length>=2;return R=>R.pipe(v?(0,xe.p)((B,ne)=>v(B,ne,R)):_e.D,on(1),I?(0,pn.U)(M):(0,an.v)(()=>new Jt.G))}(),(0,Qe.Z)(ne=>{if(null===ne)return yr(R);const we=Ps(ne);return function ss(v){v.sort((M,I)=>M.value.outlet===bt?-1:I.value.outlet===bt?1:M.value.outlet.localeCompare(I.value.outlet))}(we),(0,ge.of)(we)}))}processSegment(M,I,R,B,ne,we){return(0,Pe.H)(I).pipe((0,yt.H)(wt=>this.processSegmentAgainstRoute(wt._injector??M,I,wt,R,B,ne,we).pipe((0,et.W)(dt=>{if(dt instanceof _n)return(0,ge.of)(null);throw dt}))),(0,lt.$)(wt=>!!wt),(0,et.W)(wt=>{if(re(wt))return function bn(v,M,I){return 0===M.length&&!v.children[I]}(R,B,ne)?(0,ge.of)(new Fn):yr(R);throw wt}))}processSegmentAgainstRoute(M,I,R,B,ne,we,wt){return function ki(v,M,I,R){return!!(dr(v)===R||R!==bt&&fa(M,I,v))&&Ki(M,v,I).matched}(R,B,ne,we)?void 0===R.redirectTo?this.matchSegmentAgainstRoute(M,B,R,ne,we):this.allowRedirects&&wt?this.expandSegmentAgainstRouteUsingRedirect(M,B,I,R,ne,we):yr(B):yr(B)}expandSegmentAgainstRouteUsingRedirect(M,I,R,B,ne,we){const{matched:wt,consumedSegments:dt,positionalParamSegments:gn,remainingSegments:or}=Ki(I,B,ne);if(!wt)return yr(I);B.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const fr=this.applyRedirects.applyRedirectCommands(dt,B.redirectTo,gn);return this.applyRedirects.lineralizeSegments(B,fr).pipe((0,Qe.Z)(ji=>this.processSegment(M,R,I,ji.concat(or),we,!1)))}matchSegmentAgainstRoute(M,I,R,B,ne){const we=Wi(I,R,B,M);return"**"===R.path&&(I.children={}),we.pipe((0,Bt.n)(wt=>wt.matched?this.getChildConfig(M=R._injector??M,R,B).pipe((0,Bt.n)(({routes:dt})=>{const gn=R._loadedInjector??M,{consumedSegments:or,remainingSegments:fr,parameters:ji}=wt,Ac=new $s(or,ji,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,function Tc(v){return v.data||{}}(R),dr(R),R.component??R._loadedComponent??null,R,function Ta(v){return v.resolve||{}}(R)),{segmentGroup:ia,slicedSegments:Co}=co(I,or,fr,dt);if(0===Co.length&&ia.hasChildren())return this.processChildren(gn,dt,ia).pipe((0,Kt.T)(Qo=>null===Qo?null:new gi(Ac,Qo)));if(0===dt.length&&0===Co.length)return(0,ge.of)(new gi(Ac,[]));const qs=dr(R)===ne;return this.processSegment(gn,dt,ia,Co,qs?bt:ne,!0).pipe((0,Kt.T)(Qo=>new gi(Ac,Qo instanceof gi?[Qo]:[])))})):yr(I)))}getChildConfig(M,I,R){return I.children?(0,ge.of)({routes:I.children,injector:M}):I.loadChildren?void 0!==I._loadedRoutes?(0,ge.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function Zt(v,M,I,R){const B=M.canLoad;if(void 0===B||0===B.length)return(0,ge.of)(!0);const ne=B.map(we=>{const wt=fn(we,v);return xr(function Ya(v){return v&&ao(v.canLoad)}(wt)?wt.canLoad(M,I):(0,V.N4e)(v,()=>wt(M,I)))});return(0,ge.of)(ne).pipe(S(),kn())}(M,I,R).pipe((0,Qe.Z)(B=>B?this.configLoader.loadChildren(M,I).pipe((0,Et.M)(ne=>{I._loadedRoutes=ne.routes,I._loadedInjector=ne.injector})):function gs(v){return De(Vs(!1,Jr.GuardRejected))}())):(0,ge.of)({routes:[],injector:M})}}function si(v){const M=v.value.routeConfig;return M&&""===M.path}function Ps(v){const M=[],I=new Set;for(const R of v){if(!si(R)){M.push(R);continue}const B=M.find(ne=>R.value.routeConfig===ne.value.routeConfig);void 0!==B?(B.children.push(...R.children),I.add(B)):M.push(R)}for(const R of I){const B=Ps(R.children);M.push(new gi(R.value,B))}return M.filter(R=>!I.has(R))}function Ms(v){const M=v.children.map(I=>Ms(I)).flat();return[v,...M]}function Wo(v){return(0,Bt.n)(M=>{const I=v(M);return I?(0,Pe.H)(I).pipe((0,Kt.T)(()=>M)):(0,ge.of)(M)})}let lo=(()=>{class v{buildTitle(I){let R,B=I.root;for(;void 0!==B;)R=this.getResolvedTitleForRoute(B)??R,B=B.children.find(ne=>ne.outlet===bt);return R}getResolvedTitleForRoute(I){return I.data[pt]}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:()=>(0,V.WQX)(Ro),providedIn:"root"})}return v})(),Ro=(()=>{class v extends lo{constructor(I){super(),this.title=I}updateTitle(I){const R=this.buildTitle(I);void 0!==R&&this.title.setTitle(R)}static#e=this.\u0275fac=function(R){return new(R||v)(V.KVO(Xn.hE))};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const b=new V.nKC("",{providedIn:"root",factory:()=>({})}),X=new V.nKC("");let F=(()=>{class v{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,V.WQX)(V.Ql9)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,ge.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const R=xr(I.loadComponent()).pipe((0,Kt.T)(Tt),(0,Et.M)(ne=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=ne}),(0,jn.j)(()=>{this.componentLoaders.delete(I)})),B=new Je(R,()=>new zt.B).pipe(Ge());return this.componentLoaders.set(I,B),B}loadChildren(I,R){if(this.childrenLoaders.get(R))return this.childrenLoaders.get(R);if(R._loadedRoutes)return(0,ge.of)({routes:R._loadedRoutes,injector:R._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(R);const ne=function $(v,M,I,R){return xr(v.loadChildren()).pipe((0,Kt.T)(Tt),(0,Qe.Z)(B=>B instanceof V.Co$||Array.isArray(B)?(0,ge.of)(B):(0,Pe.H)(M.compileModuleAsync(B))),(0,Kt.T)(B=>{R&&R(v);let ne,we,wt=!1;return Array.isArray(B)?(we=B,!0):(ne=B.create(I).injector,we=ne.get(X,[],{optional:!0,self:!0}).flat()),{routes:we.map(oo),injector:ne}}))}(R,this.compiler,I,this.onLoadEndListener).pipe((0,jn.j)(()=>{this.childrenLoaders.delete(R)})),we=new Je(ne,()=>new zt.B).pipe(Ge());return this.childrenLoaders.set(R,we),we}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function Tt(v){return function Ce(v){return v&&"object"==typeof v&&"default"in v}(v)?v.default:v}let Vt=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:()=>(0,V.WQX)(Mn),providedIn:"root"})}return v})(),Mn=(()=>{class v{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,R){return I}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const ei=new V.nKC(""),er=new V.nKC("");function Gr(v,M,I){const R=v.get(er),B=v.get(Pt.qQ);return v.get(V.SKi).runOutsideAngular(()=>{if(!B.startViewTransition||R.skipNextTransition)return R.skipNextTransition=!1,new Promise(gn=>setTimeout(gn));let ne;const we=new Promise(gn=>{ne=gn}),wt=B.startViewTransition(()=>(ne(),function vr(v){return new Promise(M=>{(0,V.mal)(M,{injector:v})})}(v))),{onViewTransitionCreated:dt}=R;return dt&&(0,V.N4e)(v,()=>dt({transition:wt,from:M,to:I})),we})}let yi=(()=>{class v{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new zt.B,this.transitionAbortSubject=new zt.B,this.configLoader=(0,V.WQX)(F),this.environmentInjector=(0,V.WQX)(V.uvJ),this.urlSerializer=(0,V.WQX)(Re),this.rootContexts=(0,V.WQX)(Bs),this.location=(0,V.WQX)(Pt.aZ),this.inputBindingEnabled=null!==(0,V.WQX)(zi,{optional:!0}),this.titleStrategy=(0,V.WQX)(lo),this.options=(0,V.WQX)(b,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,V.WQX)(Vt),this.createViewTransition=(0,V.WQX)(ei,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ge.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=B=>this.events.next(new no(B)),this.configLoader.onLoadStartListener=B=>this.events.next(new yo(B))}complete(){this.transitions?.complete()}handleNavigationRequest(I){const R=++this.navigationId;this.transitions?.next({...this.transitions.value,...I,id:R})}setupNavigations(I,R,B){return this.transitions=new Fe.t({id:0,currentUrlTree:R,currentRawUrl:R,extractedUrl:this.urlHandlingStrategy.extract(R),urlAfterRedirects:this.urlHandlingStrategy.extract(R),rawUrl:R,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ui,restoredState:null,currentSnapshot:B.snapshot,targetSnapshot:null,currentRouterState:B,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,xe.p)(ne=>0!==ne.id),(0,Kt.T)(ne=>({...ne,extractedUrl:this.urlHandlingStrategy.extract(ne.rawUrl)})),(0,Bt.n)(ne=>{let we=!1,wt=!1;return(0,ge.of)(ne).pipe((0,Bt.n)(dt=>{if(this.navigationId>ne.id)return this.cancelNavigationTransition(ne,"",Jr.SupersededByNewNavigation),rt.w;this.currentTransition=ne,this.currentNavigation={id:dt.id,initialUrl:dt.rawUrl,extractedUrl:dt.extractedUrl,trigger:dt.source,extras:dt.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const gn=!I.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!gn&&"reload"!==(dt.extras.onSameUrlNavigation??I.onSameUrlNavigation)){const fr="";return this.events.next(new jo(dt.id,this.urlSerializer.serialize(dt.rawUrl),fr,$n.IgnoredSameUrlNavigation)),dt.resolve(null),rt.w}if(this.urlHandlingStrategy.shouldProcessUrl(dt.rawUrl))return(0,ge.of)(dt).pipe((0,Bt.n)(fr=>{const ji=this.transitions?.getValue();return this.events.next(new Yr(fr.id,this.urlSerializer.serialize(fr.extractedUrl),fr.source,fr.restoredState)),ji!==this.transitions?.getValue()?rt.w:Promise.resolve(fr)}),function Yi(v,M,I,R,B,ne){return(0,Qe.Z)(we=>function Hn(v,M,I,R,B,ne,we="emptyOnly"){return new Ai(v,M,I,R,B,we,ne).recognize()}(v,M,I,R,we.extractedUrl,B,ne).pipe((0,Kt.T)(({state:wt,tree:dt})=>({...we,targetSnapshot:wt,urlAfterRedirects:dt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,I.config,this.urlSerializer,this.paramsInheritanceStrategy),(0,Et.M)(fr=>{ne.targetSnapshot=fr.targetSnapshot,ne.urlAfterRedirects=fr.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:fr.urlAfterRedirects};const ji=new ea(fr.id,this.urlSerializer.serialize(fr.extractedUrl),this.urlSerializer.serialize(fr.urlAfterRedirects),fr.targetSnapshot);this.events.next(ji)}));if(gn&&this.urlHandlingStrategy.shouldProcessUrl(dt.currentRawUrl)){const{id:fr,extractedUrl:ji,source:Ac,restoredState:ia,extras:Co}=dt,qs=new Yr(fr,this.urlSerializer.serialize(ji),Ac,ia);this.events.next(qs);const Qo=us(this.rootComponentType).snapshot;return this.currentTransition=ne={...dt,targetSnapshot:Qo,urlAfterRedirects:ji,extras:{...Co,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=ji,(0,ge.of)(ne)}{const fr="";return this.events.next(new jo(dt.id,this.urlSerializer.serialize(dt.extractedUrl),fr,$n.IgnoredByUrlHandlingStrategy)),dt.resolve(null),rt.w}}),(0,Et.M)(dt=>{const gn=new da(dt.id,this.urlSerializer.serialize(dt.extractedUrl),this.urlSerializer.serialize(dt.urlAfterRedirects),dt.targetSnapshot);this.events.next(gn)}),(0,Kt.T)(dt=>(this.currentTransition=ne={...dt,guards:ee(dt.targetSnapshot,dt.currentSnapshot,this.rootContexts)},ne)),function L(v,M){return(0,Qe.Z)(I=>{const{targetSnapshot:R,currentSnapshot:B,guards:{canActivateChecks:ne,canDeactivateChecks:we}}=I;return 0===we.length&&0===ne.length?(0,ge.of)({...I,guardsResult:!0}):function Z(v,M,I,R){return(0,Pe.H)(v).pipe((0,Qe.Z)(B=>function $t(v,M,I,R,B){const ne=M&&M.routeConfig?M.routeConfig.canDeactivate:null;if(!ne||0===ne.length)return(0,ge.of)(!0);const we=ne.map(wt=>{const dt=Ds(M)??B,gn=fn(wt,dt);return xr(function ka(v){return v&&ao(v.canDeactivate)}(gn)?gn.canDeactivate(v,M,I,R):(0,V.N4e)(dt,()=>gn(v,M,I,R))).pipe((0,lt.$)())});return(0,ge.of)(we).pipe(S())}(B.component,B.route,I,M,R)),(0,lt.$)(B=>!0!==B,!0))}(we,R,B,v).pipe((0,Qe.Z)(wt=>wt&&function Ca(v){return"boolean"==typeof v}(wt)?function de(v,M,I,R){return(0,Pe.H)(M).pipe((0,yt.H)(B=>(0,je.x)(function Le(v,M){return null!==v&&M&&M(new Cr(v)),(0,ge.of)(!0)}(B.route.parent,R),function be(v,M){return null!==v&&M&&M(new Us(v)),(0,ge.of)(!0)}(B.route,R),function St(v,M,I){const R=M[M.length-1],ne=M.slice(0,M.length-1).reverse().map(we=>function Se(v){const M=v.routeConfig?v.routeConfig.canActivateChild:null;return M&&0!==M.length?{node:v,guards:M}:null}(we)).filter(we=>null!==we).map(we=>Y(()=>{const wt=we.guards.map(dt=>{const gn=Ds(we.node)??I,or=fn(dt,gn);return xr(function Zr(v){return v&&ao(v.canActivateChild)}(or)?or.canActivateChild(R,v):(0,V.N4e)(gn,()=>or(R,v))).pipe((0,lt.$)())});return(0,ge.of)(wt).pipe(S())}));return(0,ge.of)(ne).pipe(S())}(v,B.path,I),function _t(v,M,I){const R=M.routeConfig?M.routeConfig.canActivate:null;if(!R||0===R.length)return(0,ge.of)(!0);const B=R.map(ne=>Y(()=>{const we=Ds(M)??I,wt=fn(ne,we);return xr(function Ja(v){return v&&ao(v.canActivate)}(wt)?wt.canActivate(M,v):(0,V.N4e)(we,()=>wt(M,v))).pipe((0,lt.$)())}));return(0,ge.of)(B).pipe(S())}(v,B.route,I))),(0,lt.$)(B=>!0!==B,!0))}(R,ne,v,M):(0,ge.of)(wt)),(0,Kt.T)(wt=>({...I,guardsResult:wt})))})}(this.environmentInjector,dt=>this.events.next(dt)),(0,Et.M)(dt=>{if(ne.guardsResult=dt.guardsResult,It(dt.guardsResult))throw ms(0,dt.guardsResult);const gn=new Ia(dt.id,this.urlSerializer.serialize(dt.extractedUrl),this.urlSerializer.serialize(dt.urlAfterRedirects),dt.targetSnapshot,!!dt.guardsResult);this.events.next(gn)}),(0,xe.p)(dt=>!!dt.guardsResult||(this.cancelNavigationTransition(dt,"",Jr.GuardRejected),!1)),Wo(dt=>{if(dt.guards.canActivateChecks.length)return(0,ge.of)(dt).pipe((0,Et.M)(gn=>{const or=new to(gn.id,this.urlSerializer.serialize(gn.extractedUrl),this.urlSerializer.serialize(gn.urlAfterRedirects),gn.targetSnapshot);this.events.next(or)}),(0,Bt.n)(gn=>{let or=!1;return(0,ge.of)(gn).pipe(function ys(v,M){return(0,Qe.Z)(I=>{const{targetSnapshot:R,guards:{canActivateChecks:B}}=I;if(!B.length)return(0,ge.of)(I);const ne=new Set(B.map(dt=>dt.route)),we=new Set;for(const dt of ne)if(!we.has(dt))for(const gn of Ms(dt))we.add(gn);let wt=0;return(0,Pe.H)(we).pipe((0,yt.H)(dt=>ne.has(dt)?function ta(v,M,I,R){const B=v.routeConfig,ne=v._resolve;return void 0!==B?.title&&!li(B)&&(ne[pt]=B.title),function Fa(v,M,I,R){const B=Yn(v);if(0===B.length)return(0,ge.of)({});const ne={};return(0,Pe.H)(B).pipe((0,Qe.Z)(we=>function ec(v,M,I,R){const B=Ds(M)??R,ne=fn(v,B);return xr(ne.resolve?ne.resolve(M,I):(0,V.N4e)(B,()=>ne(M,I)))}(v[we],M,I,R).pipe((0,lt.$)(),(0,Et.M)(wt=>{ne[we]=wt}))),on(1),function An(v){return(0,Kt.T)(()=>v)}(ne),(0,et.W)(we=>re(we)?rt.w:De(we)))}(ne,v,M,R).pipe((0,Kt.T)(we=>(v._resolvedData=we,v.data=js(v,v.parent,I).resolve,null)))}(dt,R,v,M):(dt.data=js(dt,dt.parent,v).resolve,(0,ge.of)(void 0))),(0,Et.M)(()=>wt++),on(1),(0,Qe.Z)(dt=>wt===we.size?(0,ge.of)(I):rt.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),(0,Et.M)({next:()=>or=!0,complete:()=>{or||this.cancelNavigationTransition(gn,"",Jr.NoDataFromResolver)}}))}),(0,Et.M)(gn=>{const or=new ar(gn.id,this.urlSerializer.serialize(gn.extractedUrl),this.urlSerializer.serialize(gn.urlAfterRedirects),gn.targetSnapshot);this.events.next(or)}))}),Wo(dt=>{const gn=or=>{const fr=[];or.routeConfig?.loadComponent&&!or.routeConfig._loadedComponent&&fr.push(this.configLoader.loadComponent(or.routeConfig).pipe((0,Et.M)(ji=>{or.component=ji}),(0,Kt.T)(()=>{})));for(const ji of or.children)fr.push(...gn(ji));return fr};return At(gn(dt.targetSnapshot.root)).pipe((0,pn.U)(null),(0,tn.s)(1))}),Wo(()=>this.afterPreactivation()),(0,Bt.n)(()=>{const{currentSnapshot:dt,targetSnapshot:gn}=ne,or=this.createViewTransition?.(this.environmentInjector,dt.root,gn.root);return or?(0,Pe.H)(or).pipe((0,Kt.T)(()=>ne)):(0,ge.of)(ne)}),(0,Kt.T)(dt=>{const gn=function is(v,M,I){const R=Ni(v,M._root,I?I._root:void 0);return new ri(R,M)}(I.routeReuseStrategy,dt.targetSnapshot,dt.currentRouterState);return this.currentTransition=ne={...dt,targetRouterState:gn},this.currentNavigation.targetRouterState=gn,ne}),(0,Et.M)(()=>{this.events.next(new Nr)}),((v,M,I,R)=>(0,Kt.T)(B=>(new H(M,B.targetRouterState,B.currentRouterState,I,R).activate(v),B)))(this.rootContexts,I.routeReuseStrategy,dt=>this.events.next(dt),this.inputBindingEnabled),(0,tn.s)(1),(0,Et.M)({next:dt=>{we=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ni(dt.id,this.urlSerializer.serialize(dt.extractedUrl),this.urlSerializer.serialize(dt.urlAfterRedirects))),this.titleStrategy?.updateTitle(dt.targetRouterState.snapshot),dt.resolve(!0)},complete:()=>{we=!0}}),function In(v){return(0,le.N)((M,I)=>{(0,We.Tg)(v).subscribe((0,Te._)(I,()=>I.complete(),at.l)),!I.closed&&M.subscribe(I)})}(this.transitionAbortSubject.pipe((0,Et.M)(dt=>{throw dt}))),(0,jn.j)(()=>{!we&&!wt&&this.cancelNavigationTransition(ne,"",Jr.SupersededByNewNavigation),this.currentTransition?.id===ne.id&&(this.currentNavigation=null,this.currentTransition=null)}),(0,et.W)(dt=>{if(wt=!0,ps(dt))this.events.next(new lr(ne.id,this.urlSerializer.serialize(ne.extractedUrl),dt.message,dt.cancellationCode)),function fs(v){return ps(v)&&It(v.url)}(dt)?this.events.next(new ws(dt.url)):ne.resolve(!1);else{this.events.next(new Qi(ne.id,this.urlSerializer.serialize(ne.extractedUrl),dt,ne.targetSnapshot??void 0));try{ne.resolve(I.errorHandler(dt))}catch(gn){this.options.resolveNavigationPromiseOnError?ne.resolve(!1):ne.reject(gn)}}return rt.w}))}))}cancelNavigationTransition(I,R,B){const ne=new lr(I.id,this.urlSerializer.serialize(I.extractedUrl),R,B);this.events.next(ne),I.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();function qr(v){return v!==ui}let bi=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:()=>(0,V.WQX)(en),providedIn:"root"})}return v})();class zr{shouldDetach(M){return!1}store(M,I){}shouldAttach(M){return!1}retrieve(M){return null}shouldReuseRoute(M,I){return M.routeConfig===I.routeConfig}}let en=(()=>{class v extends zr{static#e=this.\u0275fac=(()=>{let I;return function(B){return(I||(I=V.xGo(v)))(B||v)}})();static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),En=(()=>{class v{static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:()=>(0,V.WQX)(gr),providedIn:"root"})}return v})(),gr=(()=>{class v extends En{constructor(){super(...arguments),this.location=(0,V.WQX)(Pt.aZ),this.urlSerializer=(0,V.WQX)(Re),this.options=(0,V.WQX)(b,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,V.WQX)(Vt),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Qr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=us(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(I){return this.location.subscribe(R=>{"popstate"===R.type&&I(R.url,R.state)})}handleRouterEvent(I,R){if(I instanceof Yr)this.stateMemento=this.createStateMemento();else if(I instanceof jo)this.rawUrlTree=R.initialUrl;else if(I instanceof ea){if("eager"===this.urlUpdateStrategy&&!R.extras.skipLocationChange){const B=this.urlHandlingStrategy.merge(R.finalUrl,R.initialUrl);this.setBrowserUrl(B,R)}}else I instanceof Nr?(this.currentUrlTree=R.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(R.finalUrl,R.initialUrl),this.routerState=R.targetRouterState,"deferred"===this.urlUpdateStrategy&&(R.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,R))):I instanceof lr&&(I.code===Jr.GuardRejected||I.code===Jr.NoDataFromResolver)?this.restoreHistory(R):I instanceof Qi?this.restoreHistory(R,!0):I instanceof ni&&(this.lastSuccessfulId=I.id,this.currentPageId=this.browserPageId)}setBrowserUrl(I,R){const B=this.urlSerializer.serialize(I);if(this.location.isCurrentPathEqualTo(B)||R.extras.replaceUrl){const we={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId)};this.location.replaceState(B,"",we)}else{const ne={...R.extras.state,...this.generateNgRouterState(R.id,this.browserPageId+1)};this.location.go(B,"",ne)}}restoreHistory(I,R=!1){if("computed"===this.canceledNavigationResolution){const ne=this.currentPageId-this.browserPageId;0!==ne?this.location.historyGo(ne):this.currentUrlTree===I.finalUrl&&0===ne&&(this.resetState(I),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,R){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:R}:{navigationId:I}}static#e=this.\u0275fac=(()=>{let I;return function(B){return(I||(I=V.xGo(v)))(B||v)}})();static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();var Si=function(v){return v[v.COMPLETE=0]="COMPLETE",v[v.FAILED=1]="FAILED",v[v.REDIRECTING=2]="REDIRECTING",v}(Si||{});function vi(v,M){v.events.pipe((0,xe.p)(I=>I instanceof ni||I instanceof lr||I instanceof Qi||I instanceof jo),(0,Kt.T)(I=>I instanceof ni||I instanceof jo?Si.COMPLETE:I instanceof lr&&(I.code===Jr.Redirect||I.code===Jr.SupersededByNewNavigation)?Si.REDIRECTING:Si.FAILED),(0,xe.p)(I=>I!==Si.REDIRECTING),(0,tn.s)(1)).subscribe(()=>{M()})}function os(v){throw v}const Ks={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ei={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Br=(()=>{class v{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=(0,V.WQX)(V.H3F),this.stateManager=(0,V.WQX)(En),this.options=(0,V.WQX)(b,{optional:!0})||{},this.pendingTasks=(0,V.WQX)(V.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,V.WQX)(yi),this.urlSerializer=(0,V.WQX)(Re),this.location=(0,V.WQX)(Pt.aZ),this.urlHandlingStrategy=(0,V.WQX)(Vt),this._events=new zt.B,this.errorHandler=this.options.errorHandler||os,this.navigated=!1,this.routeReuseStrategy=(0,V.WQX)(bi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,V.WQX)(X,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,V.WQX)(zi,{optional:!0}),this.eventsSubscription=new st.yU,this.isNgZoneEnabled=(0,V.WQX)(V.SKi)instanceof V.SKi&&V.SKi.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:I=>{this.console.warn(I)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const I=this.navigationTransitions.events.subscribe(R=>{try{const B=this.navigationTransitions.currentTransition,ne=this.navigationTransitions.currentNavigation;if(null!==B&&null!==ne)if(this.stateManager.handleRouterEvent(R,ne),R instanceof lr&&R.code!==Jr.Redirect&&R.code!==Jr.SupersededByNewNavigation)this.navigated=!0;else if(R instanceof ni)this.navigated=!0;else if(R instanceof ws){const we=this.urlHandlingStrategy.merge(R.url,B.currentRawUrl),wt={info:B.extras.info,skipLocationChange:B.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qr(B.source)};this.scheduleNavigation(we,ui,null,wt,{resolve:B.resolve,reject:B.reject,promise:B.promise})}(function sr(v){return!(v instanceof Nr||v instanceof ws)})(R)&&this._events.next(R)}catch(B){this.navigationTransitions.transitionAbortSubject.next(B)}});this.eventsSubscription.add(I)}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ui,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((I,R)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(I,"popstate",R)},0)})}navigateToSyncWithBrowser(I,R,B){const ne={replaceUrl:!0},we=B?.navigationId?B:null;if(B){const dt={...B};delete dt.navigationId,delete dt.\u0275routerPageId,0!==Object.keys(dt).length&&(ne.state=dt)}const wt=this.parseUrl(I);this.scheduleNavigation(wt,R,we,ne)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(I){this.config=I.map(oo),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(I,R={}){const{relativeTo:B,queryParams:ne,fragment:we,queryParamsHandling:wt,preserveFragment:dt}=R,gn=dt?this.currentUrlTree.fragment:we;let fr,or=null;switch(wt){case"merge":or={...this.currentUrlTree.queryParams,...ne};break;case"preserve":or=this.currentUrlTree.queryParams;break;default:or=ne||null}null!==or&&(or=this.removeEmptyProps(or));try{fr=kt(B?B.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof I[0]||!I[0].startsWith("/"))&&(I=[]),fr=this.currentUrlTree.root}return ln(fr,I,or,gn??null)}navigateByUrl(I,R={skipLocationChange:!1}){const B=It(I)?I:this.parseUrl(I),ne=this.urlHandlingStrategy.merge(B,this.rawUrlTree);return this.scheduleNavigation(ne,ui,null,R)}navigate(I,R={skipLocationChange:!1}){return function Io(v){for(let M=0;M<v.length;M++)if(null==v[M])throw new V.wOt(4008,!1)}(I),this.navigateByUrl(this.createUrlTree(I,R),R)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){try{return this.urlSerializer.parse(I)}catch{return this.urlSerializer.parse("/")}}isActive(I,R){let B;if(B=!0===R?{...Ks}:!1===R?{...Ei}:R,It(I))return $i(this.currentUrlTree,I,B);const ne=this.parseUrl(I);return $i(this.currentUrlTree,ne,B)}removeEmptyProps(I){return Object.entries(I).reduce((R,[B,ne])=>(null!=ne&&(R[B]=ne),R),{})}scheduleNavigation(I,R,B,ne,we){if(this.disposed)return Promise.resolve(!1);let wt,dt,gn;we?(wt=we.resolve,dt=we.reject,gn=we.promise):gn=new Promise((fr,ji)=>{wt=fr,dt=ji});const or=this.pendingTasks.add();return vi(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(or))}),this.navigationTransitions.handleNavigationRequest({source:R,restoredState:B,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:I,extras:ne,resolve:wt,reject:dt,promise:gn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),gn.catch(fr=>Promise.reject(fr))}static#e=this.\u0275fac=function(R){return new(R||v)};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})(),Ko=(()=>{class v{constructor(I,R,B,ne,we,wt){this.router=I,this.route=R,this.tabIndexAttribute=B,this.renderer=ne,this.el=we,this.locationStrategy=wt,this.href=null,this.commands=null,this.onChanges=new zt.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const dt=we.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===dt||"area"===dt,this.isAnchorElement?this.subscription=I.events.subscribe(gn=>{gn instanceof ni&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,R,B,ne,we){const wt=this.urlTree;return!!(null===wt||this.isAnchorElement&&(0!==I||R||B||ne||we||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(wt,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const I=this.urlTree;this.href=null!==I&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(I)):null;const R=null===this.href?null:(0,V.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",R)}applyAttributeValue(I,R){const B=this.renderer,ne=this.el.nativeElement;null!==R?B.setAttribute(ne,I,R):B.removeAttribute(ne,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(R){return new(R||v)(V.rXU(Br),V.rXU(Di),V.kS0("tabindex"),V.rXU(V.sFG),V.rXU(V.aKT),V.rXU(Pt.hb))};static#t=this.\u0275dir=V.FsC({type:v,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(R,B){1&R&&V.bIt("click",function(we){return B.onClick(we.button,we.ctrlKey,we.shiftKey,we.altKey,we.metaKey)}),2&R&&V.BMQ("target",B.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[V.Mj6.HasDecoratorInputTransform,"preserveFragment","preserveFragment",V.L39],skipLocationChange:[V.Mj6.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",V.L39],replaceUrl:[V.Mj6.HasDecoratorInputTransform,"replaceUrl","replaceUrl",V.L39],routerLink:"routerLink"},standalone:!0,features:[V.GFd,V.OA$]})}return v})();class Gn{}let qo=(()=>{class v{constructor(I,R,B,ne,we){this.router=I,this.injector=B,this.preloadingStrategy=ne,this.loader=we}setUpPreloading(){this.subscription=this.router.events.pipe((0,xe.p)(I=>I instanceof ni),(0,yt.H)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,R){const B=[];for(const ne of R){ne.providers&&!ne._injector&&(ne._injector=(0,V.Ol2)(ne.providers,I,`Route: ${ne.path}`));const we=ne._injector??I,wt=ne._loadedInjector??we;(ne.loadChildren&&!ne._loadedRoutes&&void 0===ne.canLoad||ne.loadComponent&&!ne._loadedComponent)&&B.push(this.preloadConfig(we,ne)),(ne.children||ne._loadedRoutes)&&B.push(this.processRoutes(wt,ne.children??ne._loadedRoutes))}return(0,Pe.H)(B).pipe((0,Qn.U)())}preloadConfig(I,R){return this.preloadingStrategy.preload(R,()=>{let B;B=R.loadChildren&&void 0===R.canLoad?this.loader.loadChildren(I,R):(0,ge.of)(null);const ne=B.pipe((0,Qe.Z)(we=>null===we?(0,ge.of)(void 0):(R._loadedRoutes=we.routes,R._loadedInjector=we.injector,this.processRoutes(we.injector??I,we.routes))));if(R.loadComponent&&!R._loadedComponent){const we=this.loader.loadComponent(R);return(0,Pe.H)([ne,we]).pipe((0,Qn.U)())}return ne})}static#e=this.\u0275fac=function(R){return new(R||v)(V.KVO(Br),V.KVO(V.Ql9),V.KVO(V.uvJ),V.KVO(Gn),V.KVO(F))};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}return v})();const pa=new V.nKC("");let Il=(()=>{class v{constructor(I,R,B,ne,we={}){this.urlSerializer=I,this.transitions=R,this.viewportScroller=B,this.zone=ne,this.options=we,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,V.WQX)(V.uvJ),we.scrollPositionRestoration||="disabled",we.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Yr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof ni?(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment)):I instanceof jo&&I.code===$n.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof Cs&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,R){var B=this;this.zone.runOutsideAngular((0,_.A)(function*(){yield new Promise(ne=>{setTimeout(()=>{ne()}),(0,V.mal)(()=>{ne()},{injector:B.environmentInjector})}),B.zone.run(()=>{B.transitions.events.next(new Cs(I,"popstate"===B.lastSource?B.store[B.restoredId]:null,R))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(R){V.QTQ()};static#t=this.\u0275prov=V.jDH({token:v,factory:v.\u0275fac})}return v})();function vs(v,M){return{\u0275kind:v,\u0275providers:M}}function Da(){const v=(0,V.WQX)(V.zZn);return M=>{const I=v.get(V.o8S);if(M!==I.components[0])return;const R=v.get(Br),B=v.get(Aa);1===v.get(Pi)&&R.initialNavigation(),v.get(Kc,null,V.$GK.Optional)?.setUpPreloading(),v.get(pa,null,V.$GK.Optional)?.init(),R.resetRootComponentType(I.componentTypes[0]),B.closed||(B.next(),B.complete(),B.unsubscribe())}}const Aa=new V.nKC("",{factory:()=>new zt.B}),Pi=new V.nKC("",{providedIn:"root",factory:()=>1}),Kc=new V.nKC("");function ra(v){return vs(0,[{provide:Kc,useExisting:qo},{provide:Gn,useExisting:v}])}function Qc(v){return vs(9,[{provide:ei,useValue:Gr},{provide:er,useValue:{skipNextTransition:!!v?.skipInitialTransition,...v}}])}const Fi=new V.nKC("ROUTER_FORROOT_GUARD"),Mu=[Pt.aZ,{provide:Re,useClass:Ie},Br,Bs,{provide:Di,useFactory:function nc(v){return v.routerState.root},deps:[Br]},F,[]];let La=(()=>{class v{constructor(I){}static forRoot(I,R){return{ngModule:v,providers:[Mu,[],{provide:X,multi:!0,useValue:I},{provide:Fi,useFactory:Yh,deps:[[Br,new V.Xx1,new V.kdw]]},{provide:b,useValue:R||{}},R?.useHash?{provide:Pt.hb,useClass:Pt.fw}:{provide:Pt.hb,useClass:Pt.Sm},{provide:pa,useFactory:()=>{const v=(0,V.WQX)(Pt.Xr),M=(0,V.WQX)(V.SKi),I=(0,V.WQX)(b),R=(0,V.WQX)(yi),B=(0,V.WQX)(Re);return I.scrollOffset&&v.setOffset(I.scrollOffset),new Il(B,R,v,M,I)}},R?.preloadingStrategy?ra(R.preloadingStrategy).\u0275providers:[],R?.initialNavigation?wl(R):[],R?.bindToComponentInputs?vs(8,[vo,{provide:zi,useExisting:vo}]).\u0275providers:[],R?.enableViewTransitions?Qc().\u0275providers:[],[{provide:Ru,useFactory:Da},{provide:V.iLQ,multi:!0,useExisting:Ru}]]}}static forChild(I){return{ngModule:v,providers:[{provide:X,multi:!0,useValue:I}]}}static#e=this.\u0275fac=function(R){return new(R||v)(V.KVO(Fi,8))};static#t=this.\u0275mod=V.$C({type:v});static#n=this.\u0275inj=V.G2t({})}return v})();function Yh(v){return"guarded"}function wl(v){return["disabled"===v.initialNavigation?vs(3,[{provide:V.hnV,multi:!0,useFactory:()=>{const M=(0,V.WQX)(Br);return()=>{M.setUpLocationChangeListener()}}},{provide:Pi,useValue:2}]).\u0275providers:[],"enabledBlocking"===v.initialNavigation?vs(2,[{provide:Pi,useValue:0},{provide:V.hnV,multi:!0,deps:[V.zZn],useFactory:M=>{const I=M.get(Pt.hj,Promise.resolve());return()=>I.then(()=>new Promise(R=>{const B=M.get(Br),ne=M.get(Aa);vi(B,()=>{R(!0)}),M.get(yi).afterPreactivation=()=>(R(!0),ne.closed?(0,ge.of)(void 0):ne),B.initialNavigation()}))}}]).\u0275providers:[]]}const Ru=new V.nKC("")},3345:(un,Ye,k)=>{k.d(Ye,{A:()=>Ve});var _=k(1076),V=k(1362),P=k(7852),w=k(8041);class G{constructor(vt,ot){this._delegate=vt,this.firebase=ot,(0,P._addComponent)(vt,new V.uA("app-compat",()=>this,"PUBLIC")),this.container=vt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(vt){this._delegate.automaticDataCollectionEnabled=vt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(vt=>{this._delegate.checkDestroyed(),vt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(vt,ot=P._DEFAULT_ENTRY_NAME){var Jt;this._delegate.checkDestroyed();const je=this._delegate.container.getProvider(vt);return!je.isInitialized()&&"EXPLICIT"===(null===(Jt=je.getComponent())||void 0===Jt?void 0:Jt.instantiationMode)&&je.initialize(),je.getImmediate({identifier:ot})}_removeServiceInstance(vt,ot=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(vt).clearInstance(ot)}_addComponent(vt){(0,P._addComponent)(this._delegate,vt)}_addOrOverwriteComponent(vt){(0,P._addOrOverwriteComponent)(this._delegate,vt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ge=new _.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),_e=function Be(){const At=function Fe(At){const vt={},ot={__esModule:!0,initializeApp:function We(rt,st={}){const le=P.initializeApp(rt,st);if((0,_.gR)(vt,le.name))return vt[le.name];const Ge=new At(le,ot);return vt[le.name]=Ge,Ge},app:je,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function te(rt){const st=rt.name,le=st.replace("-compat","");if(P._registerComponent(rt)&&"PUBLIC"===rt.type){const Ge=(Je=je())=>{if("function"!=typeof Je[le])throw ge.create("invalid-app-argument",{appName:st});return Je[le]()};void 0!==rt.serviceProps&&(0,_.zw)(Ge,rt.serviceProps),ot[le]=Ge,At.prototype[le]=function(...Je){return this._getService.bind(this,st).apply(this,rt.multipleInstances?Je:[])}}return"PUBLIC"===rt.type?ot[le]:null},removeApp:function Jt(rt){delete vt[rt]},useAsService:function De(rt,st){return"serverAuth"===st?null:st},modularAPIs:P}};function je(rt){if(!(0,_.gR)(vt,rt=rt||P._DEFAULT_ENTRY_NAME))throw ge.create("no-app",{appName:rt});return vt[rt]}return ot.default=ot,Object.defineProperty(ot,"apps",{get:function Y(){return Object.keys(vt).map(rt=>vt[rt])}}),je.App=At,ot}(G);return At.INTERNAL=Object.assign(Object.assign({},At.INTERNAL),{createFirebaseNamespace:Be,extendNamespace:function vt(ot){(0,_.zw)(At,ot)},createSubscribe:_.tD,ErrorFactory:_.FA,deepExtend:_.zw}),At}(),me=new w.Vy("@firebase/app-compat");try{const At=(0,_.mS)();if(void 0!==At.firebase){me.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const vt=At.firebase.SDK_VERSION;vt&&vt.indexOf("LITE")>=0&&me.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const Ve=_e;!function Te(At){(0,P.registerVersion)("@firebase/app-compat","0.2.40",At)}()},7852:(un,Ye,k)=>{k.r(Ye),k.d(Ye,{FirebaseError:()=>w.g,SDK_VERSION:()=>Nn,_DEFAULT_ENTRY_NAME:()=>Yn,_addComponent:()=>Hr,_addOrOverwriteComponent:()=>$i,_apps:()=>vn,_clearComponents:()=>Un,_components:()=>$r,_getProvider:()=>hs,_isFirebaseApp:()=>Ti,_isFirebaseServerApp:()=>Wt,_registerComponent:()=>Sr,_removeServiceInstance:()=>Ln,_serverApps:()=>xr,deleteApp:()=>Ke,getApp:()=>Ie,getApps:()=>Ee,initializeApp:()=>oi,initializeServerApp:()=>Re,onLog:()=>q,registerVersion:()=>he,setLogLevel:()=>J});var _=k(467),V=k(1362),P=k(8041),w=k(1076);const G=(It,tt)=>tt.some(kt=>It instanceof kt);let Pe,ge;const _e=new WeakMap,me=new WeakMap,$e=new WeakMap,He=new WeakMap,Te=new WeakMap;let vt={get(It,tt,kt){if(It instanceof IDBTransaction){if("done"===tt)return me.get(It);if("objectStoreNames"===tt)return It.objectStoreNames||$e.get(It);if("store"===tt)return kt.objectStoreNames[1]?void 0:kt.objectStore(kt.objectStoreNames[0])}return We(It[tt])},set:(It,tt,kt)=>(It[tt]=kt,!0),has:(It,tt)=>It instanceof IDBTransaction&&("done"===tt||"store"===tt)||tt in It};function je(It){return"function"==typeof It?function Jt(It){return It!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Be(){return ge||(ge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(It)?function(...tt){return It.apply(Y(this),tt),We(_e.get(this))}:function(...tt){return We(It.apply(Y(this),tt))}:function(tt,...kt){const ln=It.call(Y(this),tt,...kt);return $e.set(ln,tt.sort?tt.sort():[tt]),We(ln)}}(It):(It instanceof IDBTransaction&&function At(It){if(me.has(It))return;const tt=new Promise((kt,ln)=>{const se=()=>{It.removeEventListener("complete",ye),It.removeEventListener("error",ve),It.removeEventListener("abort",ve)},ye=()=>{kt(),se()},ve=()=>{ln(It.error||new DOMException("AbortError","AbortError")),se()};It.addEventListener("complete",ye),It.addEventListener("error",ve),It.addEventListener("abort",ve)});me.set(It,tt)}(It),G(It,function Fe(){return Pe||(Pe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(It,vt):It)}function We(It){if(It instanceof IDBRequest)return function Ve(It){const tt=new Promise((kt,ln)=>{const se=()=>{It.removeEventListener("success",ye),It.removeEventListener("error",ve)},ye=()=>{kt(We(It.result)),se()},ve=()=>{ln(It.error),se()};It.addEventListener("success",ye),It.addEventListener("error",ve)});return tt.then(kt=>{kt instanceof IDBCursor&&_e.set(kt,It)}).catch(()=>{}),Te.set(tt,It),tt}(It);if(He.has(It))return He.get(It);const tt=je(It);return tt!==It&&(He.set(It,tt),Te.set(tt,It)),tt}const Y=It=>Te.get(It),rt=["get","getKey","getAll","getAllKeys","count"],st=["put","add","delete","clear"],le=new Map;function Ge(It,tt){if(!(It instanceof IDBDatabase)||tt in It||"string"!=typeof tt)return;if(le.get(tt))return le.get(tt);const kt=tt.replace(/FromIndex$/,""),ln=tt!==kt,se=st.includes(kt);if(!(kt in(ln?IDBIndex:IDBObjectStore).prototype)||!se&&!rt.includes(kt))return;const ye=function(){var ve=(0,_.A)(function*(mt,...Ze){const Yt=this.transaction(mt,se?"readwrite":"readonly");let Ut=Yt.store;return ln&&(Ut=Ut.index(Ze.shift())),(yield Promise.all([Ut[kt](...Ze),se&&Yt.done]))[0]});return function(Ze){return ve.apply(this,arguments)}}();return le.set(tt,ye),ye}!function ot(It){vt=It(vt)}(It=>({...It,get:(tt,kt,ln)=>Ge(tt,kt)||It.get(tt,kt,ln),has:(tt,kt)=>!!Ge(tt,kt)||It.has(tt,kt)}));class Je{constructor(tt){this.container=tt}getPlatformInfoString(){return this.container.getProviders().map(kt=>{if(function zt(It){const tt=It.getComponent();return"VERSION"===tt?.type}(kt)){const ln=kt.getImmediate();return`${ln.library}/${ln.version}`}return null}).filter(kt=>kt).join(" ")}}const Pt="@firebase/app",Kt="0.10.10",Bt=new P.Vy("@firebase/app"),Yn="[DEFAULT]",Pn={[Pt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},vn=new Map,xr=new Map,$r=new Map;function Hr(It,tt){try{It.container.addComponent(tt)}catch(kt){Bt.debug(`Component ${tt.name} failed to register with FirebaseApp ${It.name}`,kt)}}function $i(It,tt){It.container.addOrOverwriteComponent(tt)}function Sr(It){const tt=It.name;if($r.has(tt))return Bt.debug(`There were multiple attempts to register component ${tt}.`),!1;$r.set(tt,It);for(const kt of vn.values())Hr(kt,It);for(const kt of xr.values())Hr(kt,It);return!0}function hs(It,tt){const kt=It.container.getProvider("heartbeat").getImmediate({optional:!0});return kt&&kt.triggerHeartbeat(),It.container.getProvider(tt)}function Ln(It,tt,kt=Yn){hs(It,tt).clearInstance(kt)}function Ti(It){return void 0!==It.options}function Wt(It){return void 0!==It.settings}function Un(){$r.clear()}const nn=new w.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class rn{constructor(tt,kt,ln){this._isDeleted=!1,this._options=Object.assign({},tt),this._config=Object.assign({},kt),this._name=kt.name,this._automaticDataCollectionEnabled=kt.automaticDataCollectionEnabled,this._container=ln,this.container.addComponent(new V.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this.checkDestroyed(),this._automaticDataCollectionEnabled=tt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(tt){this._isDeleted=tt}checkDestroyed(){if(this.isDeleted)throw nn.create("app-deleted",{appName:this._name})}}class Xr extends rn{constructor(tt,kt,ln,se){const ye=void 0!==kt.automaticDataCollectionEnabled&&kt.automaticDataCollectionEnabled,ve={name:ln,automaticDataCollectionEnabled:ye};super(void 0!==tt.apiKey?tt:tt.options,ve,se),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ye},kt),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,kt.releaseOnDeref=void 0,he(Pt,Kt,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(tt){this.isDeleted||(this._refCount++,void 0!==tt&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(tt,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ke(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw nn.create("server-app-deleted")}}const Nn="10.13.1";function oi(It,tt={}){let kt=It;"object"!=typeof tt&&(tt={name:tt});const ln=Object.assign({name:Yn,automaticDataCollectionEnabled:!1},tt),se=ln.name;if("string"!=typeof se||!se)throw nn.create("bad-app-name",{appName:String(se)});if(kt||(kt=(0,w.T9)()),!kt)throw nn.create("no-options");const ye=vn.get(se);if(ye){if((0,w.bD)(kt,ye.options)&&(0,w.bD)(ln,ye.config))return ye;throw nn.create("duplicate-app",{appName:se})}const ve=new V.h1(se);for(const Ze of $r.values())ve.addComponent(Ze);const mt=new rn(kt,ln,ve);return vn.set(se,mt),mt}function Re(It,tt){if((0,w.Bd)()&&!(0,w.p7)())throw nn.create("invalid-server-app-environment");let kt;void 0===tt.automaticDataCollectionEnabled&&(tt.automaticDataCollectionEnabled=!1),kt=Ti(It)?It.options:It;const ln=Object.assign(Object.assign({},tt),kt);if(void 0!==ln.releaseOnDeref&&delete ln.releaseOnDeref,void 0!==tt.releaseOnDeref&&typeof FinalizationRegistry>"u")throw nn.create("finalization-registry-not-supported",{});const ye=""+(Yt=JSON.stringify(ln),[...Yt].reduce((Ut,xn)=>Math.imul(31,Ut)+xn.charCodeAt(0)|0,0)),ve=xr.get(ye);var Yt;if(ve)return ve.incRefCount(tt.releaseOnDeref),ve;const mt=new V.h1(ye);for(const Yt of $r.values())mt.addComponent(Yt);const Ze=new Xr(kt,tt,ye,mt);return xr.set(ye,Ze),Ze}function Ie(It=Yn){const tt=vn.get(It);if(!tt&&It===Yn&&(0,w.T9)())return oi();if(!tt)throw nn.create("no-app",{appName:It});return tt}function Ee(){return Array.from(vn.values())}function Ke(It){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,_.A)(function*(It){let tt=!1;const kt=It.name;vn.has(kt)?(tt=!0,vn.delete(kt)):xr.has(kt)&&It.decRefCount()<=0&&(xr.delete(kt),tt=!0),tt&&(yield Promise.all(It.container.getProviders().map(ln=>ln.delete())),It.isDeleted=!0)})).apply(this,arguments)}function he(It,tt,kt){var ln;let se=null!==(ln=Pn[It])&&void 0!==ln?ln:It;kt&&(se+=`-${kt}`);const ye=se.match(/\s|\//),ve=tt.match(/\s|\//);if(ye||ve){const mt=[`Unable to register library "${se}" with version "${tt}":`];return ye&&mt.push(`library name "${se}" contains illegal characters (whitespace or "/")`),ye&&ve&&mt.push("and"),ve&&mt.push(`version name "${tt}" contains illegal characters (whitespace or "/")`),void Bt.warn(mt.join(" "))}Sr(new V.uA(`${se}-version`,()=>({library:se,version:tt}),"VERSION"))}function q(It,tt){if(null!==It&&"function"!=typeof It)throw nn.create("invalid-log-argument");(0,P.Ey)(It,tt)}function J(It){(0,P.He)(It)}const oe="firebase-heartbeat-database",pe=1,gt="firebase-heartbeat-store";let xt=null;function yn(){return xt||(xt=function te(It,tt,{blocked:kt,upgrade:ln,blocking:se,terminated:ye}={}){const ve=indexedDB.open(It,tt),mt=We(ve);return ln&&ve.addEventListener("upgradeneeded",Ze=>{ln(We(ve.result),Ze.oldVersion,Ze.newVersion,We(ve.transaction),Ze)}),kt&&ve.addEventListener("blocked",Ze=>kt(Ze.oldVersion,Ze.newVersion,Ze)),mt.then(Ze=>{ye&&Ze.addEventListener("close",()=>ye()),se&&Ze.addEventListener("versionchange",Yt=>se(Yt.oldVersion,Yt.newVersion,Yt))}).catch(()=>{}),mt}(oe,pe,{upgrade:(It,tt)=>{if(0===tt)try{It.createObjectStore(gt)}catch(kt){console.warn(kt)}}}).catch(It=>{throw nn.create("idb-open",{originalErrorMessage:It.message})})),xt}function Jn(){return(Jn=(0,_.A)(function*(It){try{const kt=(yield yn()).transaction(gt),ln=yield kt.objectStore(gt).get(Ne(It));return yield kt.done,ln}catch(tt){if(tt instanceof w.g)Bt.warn(tt.message);else{const kt=nn.create("idb-get",{originalErrorMessage:tt?.message});Bt.warn(kt.message)}}})).apply(this,arguments)}function Rn(It,tt){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,_.A)(function*(It,tt){try{const ln=(yield yn()).transaction(gt,"readwrite");yield ln.objectStore(gt).put(tt,Ne(It)),yield ln.done}catch(kt){if(kt instanceof w.g)Bt.warn(kt.message);else{const ln=nn.create("idb-set",{originalErrorMessage:kt?.message});Bt.warn(ln.message)}}})).apply(this,arguments)}function Ne(It){return`${It.name}!${It.options.appId}`}class _o{constructor(tt){this.container=tt,this._heartbeatsCache=null;const kt=this.container.getProvider("app").getImmediate();this._storage=new rs(kt),this._heartbeatsCachePromise=this._storage.read().then(ln=>(this._heartbeatsCache=ln,ln))}triggerHeartbeat(){var tt=this;return(0,_.A)(function*(){var kt,ln;try{const ye=tt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ve=Fs();return null==(null===(kt=tt._heartbeatsCache)||void 0===kt?void 0:kt.heartbeats)&&(tt._heartbeatsCache=yield tt._heartbeatsCachePromise,null==(null===(ln=tt._heartbeatsCache)||void 0===ln?void 0:ln.heartbeats))||tt._heartbeatsCache.lastSentHeartbeatDate===ve||tt._heartbeatsCache.heartbeats.some(mt=>mt.date===ve)?void 0:(tt._heartbeatsCache.heartbeats.push({date:ve,agent:ye}),tt._heartbeatsCache.heartbeats=tt._heartbeatsCache.heartbeats.filter(mt=>{const Ze=new Date(mt.date).valueOf();return Date.now()-Ze<=2592e6}),tt._storage.overwrite(tt._heartbeatsCache))}catch(se){Bt.warn(se)}})()}getHeartbeatsHeader(){var tt=this;return(0,_.A)(function*(){var kt;try{if(null===tt._heartbeatsCache&&(yield tt._heartbeatsCachePromise),null==(null===(kt=tt._heartbeatsCache)||void 0===kt?void 0:kt.heartbeats)||0===tt._heartbeatsCache.heartbeats.length)return"";const ln=Fs(),{heartbeatsToSend:se,unsentEntries:ye}=function Kn(It,tt=1024){const kt=[];let ln=It.slice();for(const se of It){const ye=kt.find(ve=>ve.agent===se.agent);if(ye){if(ye.dates.push(se.date),as(kt)>tt){ye.dates.pop();break}}else if(kt.push({agent:se.agent,dates:[se.date]}),as(kt)>tt){kt.pop();break}ln=ln.slice(1)}return{heartbeatsToSend:kt,unsentEntries:ln}}(tt._heartbeatsCache.heartbeats),ve=(0,w.Uj)(JSON.stringify({version:2,heartbeats:se}));return tt._heartbeatsCache.lastSentHeartbeatDate=ln,ye.length>0?(tt._heartbeatsCache.heartbeats=ye,yield tt._storage.overwrite(tt._heartbeatsCache)):(tt._heartbeatsCache.heartbeats=[],tt._storage.overwrite(tt._heartbeatsCache)),ve}catch(ln){return Bt.warn(ln),""}})()}}function Fs(){return(new Date).toISOString().substring(0,10)}class rs{constructor(tt){this.app=tt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.A)(function*(){return!!(0,w.zW)()&&(0,w.eX)().then(()=>!0).catch(()=>!1)})()}read(){var tt=this;return(0,_.A)(function*(){if(yield tt._canUseIndexedDBPromise){const ln=yield function Wn(It){return Jn.apply(this,arguments)}(tt.app);return ln?.heartbeats?ln:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(tt){var kt=this;return(0,_.A)(function*(){var ln;if(yield kt._canUseIndexedDBPromise){const ye=yield kt.read();return Rn(kt.app,{lastSentHeartbeatDate:null!==(ln=tt.lastSentHeartbeatDate)&&void 0!==ln?ln:ye.lastSentHeartbeatDate,heartbeats:tt.heartbeats})}})()}add(tt){var kt=this;return(0,_.A)(function*(){var ln;if(yield kt._canUseIndexedDBPromise){const ye=yield kt.read();return Rn(kt.app,{lastSentHeartbeatDate:null!==(ln=tt.lastSentHeartbeatDate)&&void 0!==ln?ln:ye.lastSentHeartbeatDate,heartbeats:[...ye.heartbeats,...tt.heartbeats]})}})()}}function as(It){return(0,w.Uj)(JSON.stringify({version:2,heartbeats:It})).length}!function qi(It){Sr(new V.uA("platform-logger",tt=>new Je(tt),"PRIVATE")),Sr(new V.uA("heartbeat",tt=>new _o(tt),"PRIVATE")),he(Pt,Kt,It),he(Pt,Kt,"esm2017"),he("fire-js","")}("")},1362:(un,Ye,k)=>{k.d(Ye,{h1:()=>Fe,uA:()=>P});var _=k(467),V=k(1076);class P{constructor(_e,me,$e){this.name=_e,this.instanceFactory=me,this.type=$e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(_e){return this.instantiationMode=_e,this}setMultipleInstances(_e){return this.multipleInstances=_e,this}setServiceProps(_e){return this.serviceProps=_e,this}setInstanceCreatedCallback(_e){return this.onInstanceCreated=_e,this}}const w="[DEFAULT]";class G{constructor(_e,me){this.name=_e,this.container=me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(_e){const me=this.normalizeInstanceIdentifier(_e);if(!this.instancesDeferred.has(me)){const $e=new V.cY;if(this.instancesDeferred.set(me,$e),this.isInitialized(me)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:me});He&&$e.resolve(He)}catch{}}return this.instancesDeferred.get(me).promise}getImmediate(_e){var me;const $e=this.normalizeInstanceIdentifier(_e?.identifier),He=null!==(me=_e?.optional)&&void 0!==me&&me;if(!this.isInitialized($e)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:$e})}catch(Te){if(He)return null;throw Te}}getComponent(){return this.component}setComponent(_e){if(_e.name!==this.name)throw Error(`Mismatching Component ${_e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=_e,this.shouldAutoInitialize()){if(function ge(Be){return"EAGER"===Be.instantiationMode}(_e))try{this.getOrInitializeService({instanceIdentifier:w})}catch{}for(const[me,$e]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(me);try{const Te=this.getOrInitializeService({instanceIdentifier:He});$e.resolve(Te)}catch{}}}}clearInstance(_e=w){this.instancesDeferred.delete(_e),this.instancesOptions.delete(_e),this.instances.delete(_e)}delete(){var _e=this;return(0,_.A)(function*(){const me=Array.from(_e.instances.values());yield Promise.all([...me.filter($e=>"INTERNAL"in $e).map($e=>$e.INTERNAL.delete()),...me.filter($e=>"_delete"in $e).map($e=>$e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(_e=w){return this.instances.has(_e)}getOptions(_e=w){return this.instancesOptions.get(_e)||{}}initialize(_e={}){const{options:me={}}=_e,$e=this.normalizeInstanceIdentifier(_e.instanceIdentifier);if(this.isInitialized($e))throw Error(`${this.name}(${$e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:$e,options:me});for(const[Te,Ve]of this.instancesDeferred.entries())$e===this.normalizeInstanceIdentifier(Te)&&Ve.resolve(He);return He}onInit(_e,me){var $e;const He=this.normalizeInstanceIdentifier(me),Te=null!==($e=this.onInitCallbacks.get(He))&&void 0!==$e?$e:new Set;Te.add(_e),this.onInitCallbacks.set(He,Te);const Ve=this.instances.get(He);return Ve&&_e(Ve,He),()=>{Te.delete(_e)}}invokeOnInitCallbacks(_e,me){const $e=this.onInitCallbacks.get(me);if($e)for(const He of $e)try{He(_e,me)}catch{}}getOrInitializeService({instanceIdentifier:_e,options:me={}}){let $e=this.instances.get(_e);if(!$e&&this.component&&($e=this.component.instanceFactory(this.container,{instanceIdentifier:(Be=_e,Be===w?void 0:Be),options:me}),this.instances.set(_e,$e),this.instancesOptions.set(_e,me),this.invokeOnInitCallbacks($e,_e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,_e,$e)}catch{}var Be;return $e||null}normalizeInstanceIdentifier(_e=w){return this.component?this.component.multipleInstances?_e:w:_e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fe{constructor(_e){this.name=_e,this.providers=new Map}addComponent(_e){const me=this.getProvider(_e.name);if(me.isComponentSet())throw new Error(`Component ${_e.name} has already been registered with ${this.name}`);me.setComponent(_e)}addOrOverwriteComponent(_e){this.getProvider(_e.name).isComponentSet()&&this.providers.delete(_e.name),this.addComponent(_e)}getProvider(_e){if(this.providers.has(_e))return this.providers.get(_e);const me=new G(_e,this);return this.providers.set(_e,me),me}getProviders(){return Array.from(this.providers.values())}}},8041:(un,Ye,k)=>{k.d(Ye,{$b:()=>V,Ey:()=>Be,He:()=>Fe,Vy:()=>ge});const _=[];var V=function(_e){return _e[_e.DEBUG=0]="DEBUG",_e[_e.VERBOSE=1]="VERBOSE",_e[_e.INFO=2]="INFO",_e[_e.WARN=3]="WARN",_e[_e.ERROR=4]="ERROR",_e[_e.SILENT=5]="SILENT",_e}(V||{});const P={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},w=V.INFO,G={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},Pe=(_e,me,...$e)=>{if(me<_e.logLevel)return;const He=(new Date).toISOString(),Te=G[me];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${me})`);console[Te](`[${He}]  ${_e.name}:`,...$e)};class ge{constructor(me){this.name=me,this._logLevel=w,this._logHandler=Pe,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(me){if(!(me in V))throw new TypeError(`Invalid value "${me}" assigned to \`logLevel\``);this._logLevel=me}setLogLevel(me){this._logLevel="string"==typeof me?P[me]:me}get logHandler(){return this._logHandler}set logHandler(me){if("function"!=typeof me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=me}get userLogHandler(){return this._userLogHandler}set userLogHandler(me){this._userLogHandler=me}debug(...me){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...me),this._logHandler(this,V.DEBUG,...me)}log(...me){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...me),this._logHandler(this,V.VERBOSE,...me)}info(...me){this._userLogHandler&&this._userLogHandler(this,V.INFO,...me),this._logHandler(this,V.INFO,...me)}warn(...me){this._userLogHandler&&this._userLogHandler(this,V.WARN,...me),this._logHandler(this,V.WARN,...me)}error(...me){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...me),this._logHandler(this,V.ERROR,...me)}}function Fe(_e){_.forEach(me=>{me.setLogLevel(_e)})}function Be(_e,me){for(const $e of _){let He=null;me&&me.level&&(He=P[me.level]),$e.userLogHandler=null===_e?null:(Te,Ve,...At)=>{const vt=At.map(ot=>{if(null==ot)return null;if("string"==typeof ot)return ot;if("number"==typeof ot||"boolean"==typeof ot)return ot.toString();if(ot instanceof Error)return ot.message;try{return JSON.stringify(ot)}catch{return null}}).filter(ot=>ot).join(" ");Ve>=(He??Te.logLevel)&&_e({level:V[Ve].toLowerCase(),message:vt,args:At,type:Te.name})}}}},7231:(un,Ye,k)=>{k.d(Ye,{HF:()=>_.X});var _=k(576);k(7852),k(1076),k(8041),k(1362)},7935:(un,Ye,k)=>{k.d(Ye,{A:()=>_.A});var _=k(3345);_.A.registerVersion("firebase","10.13.1","app-compat")},2438:(un,Ye,k)=>{var _=k(467),V=k(3345),P=k(576),w=k(1076),ge=(k(7852),k(8041),k(1362));function Fe(){return window}function me(){return me=(0,_.A)(function*(q,J,oe){var pe;const{BuildInfo:gt}=Fe();(0,P.au)(J.sessionId,"AuthEvent did not contain a session ID");const xt=yield function ot(q){return Jt.apply(this,arguments)}(J.sessionId),yn={};return(0,P.av)()?yn.ibi=gt.packageName:(0,P.aw)()?yn.apn=gt.packageName:(0,P.ax)(q,"operation-not-supported-in-this-environment"),gt.displayName&&(yn.appDisplayName=gt.displayName),yn.sessionId=xt,(0,P.ay)(q,oe,J.type,void 0,null!==(pe=J.eventId)&&void 0!==pe?pe:void 0,yn)}),me.apply(this,arguments)}function He(){return(He=(0,_.A)(function*(q){const{BuildInfo:J}=Fe(),oe={};(0,P.av)()?oe.iosBundleId=J.packageName:(0,P.aw)()?oe.androidPackageName=J.packageName:(0,P.ax)(q,"operation-not-supported-in-this-environment"),yield(0,P.az)(q,oe)})).apply(this,arguments)}function At(){return(At=(0,_.A)(function*(q,J,oe){const{cordova:pe}=Fe();let gt=()=>{};try{yield new Promise((xt,yn)=>{let Wn=null;function Jn(){var Ne;xt();const kr=null===(Ne=pe.plugins.browsertab)||void 0===Ne?void 0:Ne.close;"function"==typeof kr&&kr(),"function"==typeof oe?.close&&oe.close()}function Rn(){Wn||(Wn=window.setTimeout(()=>{yn((0,P.aB)(q,"redirect-cancelled-by-user"))},2e3))}function Ht(){"visible"===document?.visibilityState&&Rn()}J.addPassiveListener(Jn),document.addEventListener("resume",Rn,!1),(0,P.aw)()&&document.addEventListener("visibilitychange",Ht,!1),gt=()=>{J.removePassiveListener(Jn),document.removeEventListener("resume",Rn,!1),document.removeEventListener("visibilitychange",Ht,!1),Wn&&window.clearTimeout(Wn)}})}finally{gt()}})).apply(this,arguments)}function Jt(){return(Jt=(0,_.A)(function*(q){const J=function je(q){if((0,P.au)(/[0-9a-zA-Z]+/.test(q),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(q);const J=new ArrayBuffer(q.length),oe=new Uint8Array(J);for(let pe=0;pe<q.length;pe++)oe[pe]=q.charCodeAt(pe);return oe}(q),oe=yield crypto.subtle.digest("SHA-256",J);return Array.from(new Uint8Array(oe)).map(gt=>gt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Y extends P.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(J=>{this.resolveInitialized=J})}addPassiveListener(J){this.passiveListeners.add(J)}removePassiveListener(J){this.passiveListeners.delete(J)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(J){return this.resolveInitialized(),this.passiveListeners.forEach(oe=>oe(J)),super.onEvent(J)}initialized(){var J=this;return(0,_.A)(function*(){yield J.initPromise})()}}function rt(q){return st.apply(this,arguments)}function st(){return(st=(0,_.A)(function*(q){const J=yield Je()._get(zt(q));return J&&(yield Je()._remove(zt(q))),J})).apply(this,arguments)}function Ge(){const q=[];for(let oe=0;oe<20;oe++){const pe=Math.floor(62*Math.random());q.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(pe))}return q.join("")}function Je(){return(0,P.aE)(P.b)}function zt(q){return(0,P.aF)("authEvent",q.config.apiKey,q.name)}function Bt(q){if(!q?.includes("?"))return{};const[J,...oe]=q.split("?");return(0,w.I9)(oe.join("?"))}const xe=class Tn{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aG,this._overrideRedirectResult=P.aH}_initialize(J){var oe=this;return(0,_.A)(function*(){const pe=J._key();let gt=oe.eventManagers.get(pe);return gt||(gt=new Y(J),oe.eventManagers.set(pe,gt),oe.attachCallbackListeners(J,gt)),gt})()}_openPopup(J){(0,P.ax)(J,"operation-not-supported-in-this-environment")}_openRedirect(J,oe,pe,gt){var xt=this;return(0,_.A)(function*(){!function vt(q){var J,oe,pe,gt,xt,yn,Wn,Jn,Rn,Ht;const Ne=Fe();(0,P.aC)("function"==typeof(null===(J=Ne?.universalLinks)||void 0===J?void 0:J.subscribe),q,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.aC)(typeof(null===(oe=Ne?.BuildInfo)||void 0===oe?void 0:oe.packageName)<"u",q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.aC)("function"==typeof(null===(xt=null===(gt=null===(pe=Ne?.cordova)||void 0===pe?void 0:pe.plugins)||void 0===gt?void 0:gt.browsertab)||void 0===xt?void 0:xt.openUrl),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aC)("function"==typeof(null===(Jn=null===(Wn=null===(yn=Ne?.cordova)||void 0===yn?void 0:yn.plugins)||void 0===Wn?void 0:Wn.browsertab)||void 0===Jn?void 0:Jn.isAvailable),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aC)("function"==typeof(null===(Ht=null===(Rn=Ne?.cordova)||void 0===Rn?void 0:Rn.InAppBrowser)||void 0===Ht?void 0:Ht.open),q,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(J);const yn=yield xt._initialize(J);yield yn.initialized(),yn.resetRedirect(),(0,P.aI)(),yield xt._originValidation(J);const Wn=function te(q,J,oe=null){return{type:J,eventId:oe,urlResponse:null,sessionId:Ge(),postBody:null,tenantId:q.tenantId,error:(0,P.aB)(q,"no-auth-event")}}(J,pe,gt);yield function De(q,J){return Je()._set(zt(q),J)}(J,Wn);const Jn=yield function _e(q,J,oe){return me.apply(this,arguments)}(J,Wn,oe),Rn=yield function Te(q){const{cordova:J}=Fe();return new Promise(oe=>{J.plugins.browsertab.isAvailable(pe=>{let gt=null;pe?J.plugins.browsertab.openUrl(q):gt=J.InAppBrowser.open(q,(0,P.aA)()?"_blank":"_system","location=yes"),oe(gt)})})}(Jn);return function Ve(q,J,oe){return At.apply(this,arguments)}(J,yn,Rn)})()}_isIframeWebStorageSupported(J,oe){throw new Error("Method not implemented.")}_originValidation(J){const oe=J._key();return this.originValidationPromises[oe]||(this.originValidationPromises[oe]=function $e(q){return He.apply(this,arguments)}(J)),this.originValidationPromises[oe]}attachCallbackListeners(J,oe){const{universalLinks:pe,handleOpenURL:gt,BuildInfo:xt}=Fe(),yn=setTimeout((0,_.A)(function*(){yield rt(J),oe.onEvent(Qe())}),500),Wn=function(){var Ht=(0,_.A)(function*(Ne){clearTimeout(yn);const kr=yield rt(J);let ai=null;kr&&Ne?.url&&(ai=function le(q,J){var oe,pe;const gt=function Kt(q){const J=Bt(q),oe=J.link?decodeURIComponent(J.link):void 0,pe=Bt(oe).link,gt=J.deep_link_id?decodeURIComponent(J.deep_link_id):void 0;return Bt(gt).link||gt||pe||oe||q}(J);if(gt.includes("/__/auth/callback")){const xt=Bt(gt),yn=xt.firebaseError?function Pt(q){try{return JSON.parse(q)}catch{return null}}(decodeURIComponent(xt.firebaseError)):null,Wn=null===(pe=null===(oe=yn?.code)||void 0===oe?void 0:oe.split("auth/"))||void 0===pe?void 0:pe[1],Jn=Wn?(0,P.aB)(Wn):null;return Jn?{type:q.type,eventId:q.eventId,tenantId:q.tenantId,error:Jn,urlResponse:null,sessionId:null,postBody:null}:{type:q.type,eventId:q.eventId,tenantId:q.tenantId,sessionId:q.sessionId,urlResponse:gt,postBody:null}}return null}(kr,Ne.url)),oe.onEvent(ai||Qe())});return function(kr){return Ht.apply(this,arguments)}}();typeof pe<"u"&&"function"==typeof pe.subscribe&&pe.subscribe(null,Wn);const Jn=gt,Rn=`${xt.packageName.toLowerCase()}://`;Fe().handleOpenURL=function(){var Ht=(0,_.A)(function*(Ne){if(Ne.toLowerCase().startsWith(Rn)&&Wn({url:Ne}),"function"==typeof Jn)try{Jn(Ne)}catch(kr){console.error(kr)}});return function(Ne){return Ht.apply(this,arguments)}}()}};function Qe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aB)("no-auth-event")}}function qt(){var q;return(null===(q=self?.location)||void 0===q?void 0:q.protocol)||null}function on(q=(0,w.ZQ)()){return!("file:"!==qt()&&"ionic:"!==qt()&&"capacitor:"!==qt()||!q.toLowerCase().match(/iphone|ipad|ipod|android/))}function at(){try{const q=self.localStorage,J=P.aN();if(q)return q.setItem(J,"1"),q.removeItem(J),!function jn(q=(0,w.ZQ)()){return function Dn(){return(0,w.lT)()&&11===document?.documentMode}()||function An(q=(0,w.ZQ)()){return/Edge\/\d+/.test(q)}(q)}()||(0,w.zW)()}catch{return In()&&(0,w.zW)()}return!1}function In(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Qn(){return(function pn(){return"http:"===qt()||"https:"===qt()}()||(0,w.sr)()||on())&&!function an(){return(0,w.lV)()||(0,w.Ll)()}()&&at()&&!In()}function Xn(){return on()&&typeof document<"u"}function pt(){return(pt=(0,_.A)(function*(){return!!Xn()&&new Promise(q=>{const J=setTimeout(()=>{q(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(J),q(!0)})})})).apply(this,arguments)}const Rt={LOCAL:"local",NONE:"none",SESSION:"session"},Xe=P.aC,Ot="persistence";function Yn(q){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,_.A)(function*(q){yield q._initializationPromise;const J=xr(),oe=P.aF(Ot,q.config.apiKey,q.name);J&&J.setItem(oe,q._getPersistence())})).apply(this,arguments)}function xr(){var q;try{return(null===(q=function jr(){return typeof window<"u"?window:null}())||void 0===q?void 0:q.sessionStorage)||null}catch{return null}}const $r=P.aC;class Hr{constructor(){this.browserResolver=P.aE(P.k),this.cordovaResolver=P.aE(xe),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aG,this._overrideRedirectResult=P.aH}_initialize(J){var oe=this;return(0,_.A)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._initialize(J)})()}_openPopup(J,oe,pe,gt){var xt=this;return(0,_.A)(function*(){return yield xt.selectUnderlyingResolver(),xt.assertedUnderlyingResolver._openPopup(J,oe,pe,gt)})()}_openRedirect(J,oe,pe,gt){var xt=this;return(0,_.A)(function*(){return yield xt.selectUnderlyingResolver(),xt.assertedUnderlyingResolver._openRedirect(J,oe,pe,gt)})()}_isIframeWebStorageSupported(J,oe){this.assertedUnderlyingResolver._isIframeWebStorageSupported(J,oe)}_originValidation(J){return this.assertedUnderlyingResolver._originValidation(J)}get _shouldInitProactively(){return Xn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $r(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var J=this;return(0,_.A)(function*(){if(J.underlyingResolver)return;const oe=yield function bt(){return pt.apply(this,arguments)}();J.underlyingResolver=oe?J.cordovaResolver:J.browserResolver})()}}function $i(q){return q.unwrap()}function hs(q){return Ti(q)}function Ti(q){const{_tokenResponse:J}=q instanceof w.g?q.customData:q;if(!J)return null;if(!(q instanceof w.g)&&"temporaryProof"in J&&"phoneNumber"in J)return P.P.credentialFromResult(q);const oe=J.providerId;if(!oe||oe===P.p.PASSWORD)return null;let pe;switch(oe){case P.p.GOOGLE:pe=P.X;break;case P.p.FACEBOOK:pe=P.W;break;case P.p.GITHUB:pe=P.Y;break;case P.p.TWITTER:pe=P.$;break;default:const{oauthIdToken:gt,oauthAccessToken:xt,oauthTokenSecret:yn,pendingToken:Wn,nonce:Jn}=J;return xt||yn||gt||Wn?Wn?oe.startsWith("saml.")?P.aQ._create(oe,Wn):P.N._fromParams({providerId:oe,signInMethod:oe,pendingToken:Wn,idToken:gt,accessToken:xt}):new P.Z(oe).credential({idToken:gt,accessToken:xt,rawNonce:Jn}):null}return q instanceof w.g?pe.credentialFromError(q):pe.credentialFromResult(q)}function Wt(q,J){return J.catch(oe=>{throw oe instanceof w.g&&function Ln(q,J){var oe;const pe=null===(oe=J.customData)||void 0===oe?void 0:oe._tokenResponse;if("auth/multi-factor-auth-required"===J?.code)J.resolver=new nn(q,P.as(q,J));else if(pe){const gt=Ti(J),xt=J;gt&&(xt.credential=gt,xt.tenantId=pe.tenantId||void 0,xt.email=pe.email||void 0,xt.phoneNumber=pe.phoneNumber||void 0)}}(q,oe),oe}).then(oe=>{const gt=oe.user;return{operationType:oe.operationType,credential:hs(oe),additionalUserInfo:P.aq(oe),user:rn.getOrCreate(gt)}})}function Un(q,J){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,_.A)(function*(q,J){const oe=yield J;return{verificationId:oe.verificationId,confirm:pe=>Wt(q,oe.confirm(pe))}})).apply(this,arguments)}class nn{constructor(J,oe){this.resolver=oe,this.auth=function Sr(q){return q.wrapped()}(J)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(J){return Wt($i(this.auth),this.resolver.resolveSignIn(J))}}class rn{constructor(J){this._delegate=J,this.multiFactor=P.at(J)}static getOrCreate(J){return rn.USER_MAP.has(J)||rn.USER_MAP.set(J,new rn(J)),rn.USER_MAP.get(J)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(J){return this._delegate.getIdTokenResult(J)}getIdToken(J){return this._delegate.getIdToken(J)}linkAndRetrieveDataWithCredential(J){return this.linkWithCredential(J)}linkWithCredential(J){var oe=this;return(0,_.A)(function*(){return Wt(oe.auth,P.a2(oe._delegate,J))})()}linkWithPhoneNumber(J,oe){var pe=this;return(0,_.A)(function*(){return Un(pe.auth,P.l(pe._delegate,J,oe))})()}linkWithPopup(J){var oe=this;return(0,_.A)(function*(){return Wt(oe.auth,P.d(oe._delegate,J,Hr))})()}linkWithRedirect(J){var oe=this;return(0,_.A)(function*(){return yield Yn(P.aJ(oe.auth)),P.g(oe._delegate,J,Hr)})()}reauthenticateAndRetrieveDataWithCredential(J){return this.reauthenticateWithCredential(J)}reauthenticateWithCredential(J){var oe=this;return(0,_.A)(function*(){return Wt(oe.auth,P.a3(oe._delegate,J))})()}reauthenticateWithPhoneNumber(J,oe){return Un(this.auth,P.r(this._delegate,J,oe))}reauthenticateWithPopup(J){return Wt(this.auth,P.e(this._delegate,J,Hr))}reauthenticateWithRedirect(J){var oe=this;return(0,_.A)(function*(){return yield Yn(P.aJ(oe.auth)),P.h(oe._delegate,J,Hr)})()}sendEmailVerification(J){return P.ag(this._delegate,J)}unlink(J){var oe=this;return(0,_.A)(function*(){return yield P.ap(oe._delegate,J),oe})()}updateEmail(J){return P.al(this._delegate,J)}updatePassword(J){return P.am(this._delegate,J)}updatePhoneNumber(J){return P.u(this._delegate,J)}updateProfile(J){return P.ak(this._delegate,J)}verifyBeforeUpdateEmail(J,oe){return P.ah(this._delegate,J,oe)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}rn.USER_MAP=new WeakMap;const Xr=P.aC;let Nn=(()=>{class q{constructor(oe,pe){if(this.app=oe,pe.isInitialized())return this._delegate=pe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:gt}=oe.options;Xr(gt,"invalid-api-key",{appName:oe.name}),Xr(gt,"invalid-api-key",{appName:oe.name});const xt=typeof window<"u"?Hr:void 0;this._delegate=pe.initialize({options:{persistence:Re(gt,oe.name),popupRedirectResolver:xt}}),this._delegate._updateErrorMap(P.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?rn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(oe){this._delegate.languageCode=oe}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(oe){this._delegate.tenantId=oe}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(oe,pe){P.K(this._delegate,oe,pe)}applyActionCode(oe){return P.a7(this._delegate,oe)}checkActionCode(oe){return P.a8(this._delegate,oe)}confirmPasswordReset(oe,pe){return P.a6(this._delegate,oe,pe)}createUserWithEmailAndPassword(oe,pe){var gt=this;return(0,_.A)(function*(){return Wt(gt._delegate,P.aa(gt._delegate,oe,pe))})()}fetchProvidersForEmail(oe){return this.fetchSignInMethodsForEmail(oe)}fetchSignInMethodsForEmail(oe){return P.af(this._delegate,oe)}isSignInWithEmailLink(oe){return P.ad(this._delegate,oe)}getRedirectResult(){var oe=this;return(0,_.A)(function*(){Xr(Qn(),oe._delegate,"operation-not-supported-in-this-environment");const pe=yield P.j(oe._delegate,Hr);return pe?Wt(oe._delegate,Promise.resolve(pe)):{credential:null,user:null}})()}addFrameworkForLogging(oe){!function lt(q,J){(0,P.aJ)(q)._logFramework(J)}(this._delegate,oe)}onAuthStateChanged(oe,pe,gt){const{next:xt,error:yn,complete:Wn}=oi(oe,pe,gt);return this._delegate.onAuthStateChanged(xt,yn,Wn)}onIdTokenChanged(oe,pe,gt){const{next:xt,error:yn,complete:Wn}=oi(oe,pe,gt);return this._delegate.onIdTokenChanged(xt,yn,Wn)}sendSignInLinkToEmail(oe,pe){return P.ac(this._delegate,oe,pe)}sendPasswordResetEmail(oe,pe){return P.a5(this._delegate,oe,pe||void 0)}setPersistence(oe){var pe=this;return(0,_.A)(function*(){let gt;switch(function rr(q,J){Xe(Object.values(Rt).includes(J),q,"invalid-persistence-type"),(0,w.lV)()?Xe(J!==Rt.SESSION,q,"unsupported-persistence-type"):(0,w.Ll)()?Xe(J===Rt.NONE,q,"unsupported-persistence-type"):In()?Xe(J===Rt.NONE||J===Rt.LOCAL&&(0,w.zW)(),q,"unsupported-persistence-type"):Xe(J===Rt.NONE||at(),q,"unsupported-persistence-type")}(pe._delegate,oe),oe){case Rt.SESSION:gt=P.a;break;case Rt.LOCAL:gt=(yield P.aE(P.i)._isAvailable())?P.i:P.b;break;case Rt.NONE:gt=P.U;break;default:return P.ax("argument-error",{appName:pe._delegate.name})}return pe._delegate.setPersistence(gt)})()}signInAndRetrieveDataWithCredential(oe){return this.signInWithCredential(oe)}signInAnonymously(){return Wt(this._delegate,P.a0(this._delegate))}signInWithCredential(oe){return Wt(this._delegate,P.a1(this._delegate,oe))}signInWithCustomToken(oe){return Wt(this._delegate,P.a4(this._delegate,oe))}signInWithEmailAndPassword(oe,pe){return Wt(this._delegate,P.ab(this._delegate,oe,pe))}signInWithEmailLink(oe,pe){return Wt(this._delegate,P.ae(this._delegate,oe,pe))}signInWithPhoneNumber(oe,pe){return Un(this._delegate,P.s(this._delegate,oe,pe))}signInWithPopup(oe){var pe=this;return(0,_.A)(function*(){return Xr(Qn(),pe._delegate,"operation-not-supported-in-this-environment"),Wt(pe._delegate,P.c(pe._delegate,oe,Hr))})()}signInWithRedirect(oe){var pe=this;return(0,_.A)(function*(){return Xr(Qn(),pe._delegate,"operation-not-supported-in-this-environment"),yield Yn(pe._delegate),P.f(pe._delegate,oe,Hr)})()}updateCurrentUser(oe){return this._delegate.updateCurrentUser(oe)}verifyPasswordResetCode(oe){return P.a9(this._delegate,oe)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return q.Persistence=Rt,q})();function oi(q,J,oe){let pe=q;"function"!=typeof q&&({next:pe,error:J,complete:oe}=q);const gt=pe;return{next:yn=>gt(yn&&rn.getOrCreate(yn)),error:J,complete:oe}}function Re(q,J){const oe=function vn(q,J){const oe=xr();if(!oe)return[];const pe=P.aF(Ot,q,J);switch(oe.getItem(pe)){case Rt.NONE:return[P.U];case Rt.LOCAL:return[P.i,P.a];case Rt.SESSION:return[P.a];default:return[]}}(q,J);if(typeof self<"u"&&!oe.includes(P.i)&&oe.push(P.i),typeof window<"u")for(const pe of[P.b,P.a])oe.includes(pe)||oe.push(pe);return oe.includes(P.U)||oe.push(P.U),oe}class Ie{constructor(){this.providerId="phone",this._delegate=new P.P($i(V.A.auth()))}static credential(J,oe){return P.P.credential(J,oe)}verifyPhoneNumber(J,oe){return this._delegate.verifyPhoneNumber(J,oe)}unwrap(){return this._delegate}}Ie.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,Ie.PROVIDER_ID=P.P.PROVIDER_ID;const Ee=P.aC;class Ke{constructor(J,oe,pe=V.A.app()){var gt;Ee(null===(gt=pe.options)||void 0===gt?void 0:gt.apiKey,"invalid-api-key",{appName:pe.name}),this._delegate=new P.R(pe.auth(),J,oe),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function he(q){q.INTERNAL.registerComponent(new ge.uA("auth-compat",J=>{const oe=J.getProvider("app-compat").getImmediate(),pe=J.getProvider("auth");return new Nn(oe,pe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.V,FacebookAuthProvider:P.W,GithubAuthProvider:P.Y,GoogleAuthProvider:P.X,OAuthProvider:P.Z,SAMLAuthProvider:P._,PhoneAuthProvider:Ie,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:Ke,TwitterAuthProvider:P.$,Auth:Nn,AuthCredential:P.L,Error:w.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),q.registerVersion("@firebase/auth-compat","0.5.13")}(V.A)},467:(un,Ye,k)=>{function _(P,w,G,Pe,ge,Fe,Be){try{var _e=P[Fe](Be),me=_e.value}catch($e){return void G($e)}_e.done?w(me):Promise.resolve(me).then(Pe,ge)}function V(P){return function(){var w=this,G=arguments;return new Promise(function(Pe,ge){var Fe=P.apply(w,G);function Be(me){_(Fe,Pe,ge,Be,_e,"next",me)}function _e(me){_(Fe,Pe,ge,Be,_e,"throw",me)}Be(void 0)})}}k.d(Ye,{A:()=>V})},1635:(un,Ye,k)=>{function w(xe,Qe){var lt={};for(var yt in xe)Object.prototype.hasOwnProperty.call(xe,yt)&&Qe.indexOf(yt)<0&&(lt[yt]=xe[yt]);if(null!=xe&&"function"==typeof Object.getOwnPropertySymbols){var Et=0;for(yt=Object.getOwnPropertySymbols(xe);Et<yt.length;Et++)Qe.indexOf(yt[Et])<0&&Object.prototype.propertyIsEnumerable.call(xe,yt[Et])&&(lt[yt[Et]]=xe[yt[Et]])}return lt}function $e(xe,Qe,lt,yt){return new(lt||(lt=Promise))(function(et,qt){function pn(Dn){try{an(yt.next(Dn))}catch(An){qt(An)}}function on(Dn){try{an(yt.throw(Dn))}catch(An){qt(An)}}function an(Dn){Dn.done?et(Dn.value):function Et(et){return et instanceof lt?et:new lt(function(qt){qt(et)})}(Dn.value).then(pn,on)}an((yt=yt.apply(xe,Qe||[])).next())})}function We(xe){return this instanceof We?(this.v=xe,this):new We(xe)}function Y(xe,Qe,lt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Et,yt=lt.apply(xe,Qe||[]),et=[];return Et=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),pn("next"),pn("throw"),pn("return",function qt(at){return function(In){return Promise.resolve(In).then(at,An)}}),Et[Symbol.asyncIterator]=function(){return this},Et;function pn(at,In){yt[at]&&(Et[at]=function(Qn){return new Promise(function(Xn,bt){et.push([at,Qn,Xn,bt])>1||on(at,Qn)})},In&&(Et[at]=In(Et[at])))}function on(at,In){try{!function an(at){at.value instanceof We?Promise.resolve(at.value.v).then(Dn,An):jn(et[0][2],at)}(yt[at](In))}catch(Qn){jn(et[0][3],Qn)}}function Dn(at){on("next",at)}function An(at){on("throw",at)}function jn(at,In){at(In),et.shift(),et.length&&on(et[0][0],et[0][1])}}function De(xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var lt,Qe=xe[Symbol.asyncIterator];return Qe?Qe.call(xe):(xe=function At(xe){var Qe="function"==typeof Symbol&&Symbol.iterator,lt=Qe&&xe[Qe],yt=0;if(lt)return lt.call(xe);if(xe&&"number"==typeof xe.length)return{next:function(){return xe&&yt>=xe.length&&(xe=void 0),{value:xe&&xe[yt++],done:!xe}}};throw new TypeError(Qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(xe),lt={},yt("next"),yt("throw"),yt("return"),lt[Symbol.asyncIterator]=function(){return this},lt);function yt(et){lt[et]=xe[et]&&function(qt){return new Promise(function(pn,on){!function Et(et,qt,pn,on){Promise.resolve(on).then(function(an){et({value:an,done:pn})},qt)}(pn,on,(qt=xe[et](qt)).done,qt.value)})}}}k.d(Ye,{AQ:()=>Y,N3:()=>We,Tt:()=>w,sH:()=>$e,xN:()=>De}),"function"==typeof SuppressedError&&SuppressedError}},un=>{un(un.s=3627)}]);